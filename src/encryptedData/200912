From java-user-return-43846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 01 09:53:26 2009
Return-Path: <java-user-return-43846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43237 invoked from network); 1 Dec 2009 09:53:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Dec 2009 09:53:25 -0000
Received: (qmail 50327 invoked by uid 500); 1 Dec 2009 09:53:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50243 invoked by uid 500); 1 Dec 2009 09:53:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50233 invoked by uid 99); 1 Dec 2009 09:53:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Dec 2009 09:53:22 +0000
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [85.158.140.211] (HELO mail194.messagelabs.com) (85.158.140.211)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Dec 2009 09:53:12 +0000
X-VirusChecked: Checked
X-Env-Sender: wzzelfzzel@abas.de
X-Msg-Ref: server-3.tower-194.messagelabs.com!1259661171!26045811!1
X-StarScan-Version: 6.2.4; banners=-,-,-
X-Originating-IP: [212.202.226.202]
Received: (qmail 15951 invoked from network); 1 Dec 2009 09:52:51 -0000
Received: from gate.abas.de (HELO gate.abas.de) (212.202.226.202)
  by server-3.tower-194.messagelabs.com with DHE-RSA-AES256-SHA encrypted SMTP; 1 Dec 2009 09:52:51 -0000
Received: from gate.abas.de (localhost [127.0.0.1])
	by gate.abas.de (8.14.3/8.14.3) with ESMTP id nB19qoNT006484
	for <java-user@lucene.apache.org>; Tue, 1 Dec 2009 10:52:51 +0100 (CET)
Received: (from localhost) by gate.abas.de (MSCAN) id 3/gate.abas.de/smtp-gw/mscan; Tue Dec  1 10:52:50 2009
From: Stefan Trcek <wzzelfzzel@abas.de>
To: java-user@lucene.apache.org
Subject: Re: What does "out of order" mean?
Date: Tue, 1 Dec 2009 10:52:41 +0100
User-Agent: KMail/1.9.10
References: <4B0FAF24.20205@dev.unitedplanet.de> <200911301822.37463.wzzelfzzel@abas.de> <9ac0c6aa0911300942k1c84cc51w4fedeb32eda3099e@mail.gmail.com>
In-Reply-To: <9ac0c6aa0911300942k1c84cc51w4fedeb32eda3099e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: Multipart/Mixed;
  boundary="Boundary-00=_qdOFLMSRcOQCKlt"
Message-ID: <200912011052.42045.wzzelfzzel@abas.de>
X-ABAS-MAIL-MARK: added by mailmarker.abas.de
X-Virus-Checked: Checked by ClamAV on apache.org

--Boundary-00=_qdOFLMSRcOQCKlt
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On Monday 30 November 2009 18:42:50 Michael McCandless wrote:
> I was able to apply that git patch just fine -- so I think it'll
> work?

Good to hear it works that simple.
This patch completes the task.
It is a "two file" patch, so if this will work too, I'm confident.

Stefan

> On Mon, Nov 30, 2009 at 12:22 PM, Stefan Trcek <wzzelfzzel@abas.de> 
wrote:
> > On Monday 30 November 2009 14:24:20 Michael McCandless wrote:
> >> I agree, it's silly we label things like TopDocs/TopFieldDocs as
> >> expert -- they are no longer for "low level" APIs (or, perhaps
> >> since we've removed the "high level" API (= Hits), what remains
> >> should no longer be considered low level).
> >>
> >> Do you wanna cough up a patch to correct these?

--Boundary-00=_qdOFLMSRcOQCKlt
Content-Type: text/plain;
  charset="iso 8859-15";
  name="patch2.txt"
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
	filename="patch2.txt"

diff --git a/src/java/org/apache/lucene/search/TopDocs.java b/src/java/org/apache/lucene/search/TopDocs.java
index 0f098e1..06ee171 100644
--- a/src/java/org/apache/lucene/search/TopDocs.java
+++ b/src/java/org/apache/lucene/search/TopDocs.java
@@ -20,7 +20,7 @@ package org.apache.lucene.search;
 /**
  * @see Searcher#search(Query,Filter,int) */
 public class TopDocs implements java.io.Serializable {
-  /** Expert: The total number of hits for the query.
+  /** The total number of hits for the query.
   */
   public int totalHits;
   /** The top hits for the query. */
diff --git a/src/java/org/apache/lucene/search/TopFieldDocs.java b/src/java/org/apache/lucene/search/TopFieldDocs.java
index a0e657f..0197478 100644
--- a/src/java/org/apache/lucene/search/TopFieldDocs.java
+++ b/src/java/org/apache/lucene/search/TopFieldDocs.java
@@ -19,8 +19,6 @@ package org.apache.lucene.search;
 
 
 /**
- * Expert: Returned by low-level sorted search implementations.
- *
  * <p>Created: Feb 12, 2004 8:58:46 AM 
  *
  * @since   lucene 1.4


--Boundary-00=_qdOFLMSRcOQCKlt
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--Boundary-00=_qdOFLMSRcOQCKlt--

From java-user-return-43847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 01 10:08:13 2009
Return-Path: <java-user-return-43847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52164 invoked from network); 1 Dec 2009 10:08:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Dec 2009 10:08:13 -0000
Received: (qmail 76350 invoked by uid 500); 1 Dec 2009 10:08:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76273 invoked by uid 500); 1 Dec 2009 10:08:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76191 invoked by uid 99); 1 Dec 2009 10:08:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Dec 2009 10:08:10 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Dec 2009 10:08:03 +0000
Received: by yxe30 with SMTP id 30so9921875yxe.29
        for <java-user@lucene.apache.org>; Tue, 01 Dec 2009 02:07:41 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.175.14 with SMTP id x14mr9461899ybe.191.1259662061763; 
	Tue, 01 Dec 2009 02:07:41 -0800 (PST)
In-Reply-To: <200912011052.42045.wzzelfzzel@abas.de>
References: <4B0FAF24.20205@dev.unitedplanet.de>
	 <200911301822.37463.wzzelfzzel@abas.de>
	 <9ac0c6aa0911300942k1c84cc51w4fedeb32eda3099e@mail.gmail.com>
	 <200912011052.42045.wzzelfzzel@abas.de>
Date: Tue, 1 Dec 2009 05:07:41 -0500
Message-ID: <9ac0c6aa0912010207r32c069bam6795c473572f69f8@mail.gmail.com>
Subject: Re: What does "out of order" mean?
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

OK -- none of IndexSearcher's search methods needed tweaking?  Just
TopDocs/TopFieldDocs?

Mike

On Tue, Dec 1, 2009 at 4:52 AM, Stefan Trcek <wzzelfzzel@abas.de> wrote:
> On Monday 30 November 2009 18:42:50 Michael McCandless wrote:
>> I was able to apply that git patch just fine -- so I think it'll
>> work?
>
> Good to hear it works that simple.
> This patch completes the task.
> It is a "two file" patch, so if this will work too, I'm confident.
>
> Stefan
>
>> On Mon, Nov 30, 2009 at 12:22 PM, Stefan Trcek <wzzelfzzel@abas.de>
> wrote:
>> > On Monday 30 November 2009 14:24:20 Michael McCandless wrote:
>> >> I agree, it's silly we label things like TopDocs/TopFieldDocs as
>> >> expert -- they are no longer for "low level" APIs (or, perhaps
>> >> since we've removed the "high level" API (= Hits), what remains
>> >> should no longer be considered low level).
>> >>
>> >> Do you wanna cough up a patch to correct these?
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 01 10:32:28 2009
Return-Path: <java-user-return-43848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64143 invoked from network); 1 Dec 2009 10:32:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Dec 2009 10:32:28 -0000
Received: (qmail 10524 invoked by uid 500); 1 Dec 2009 10:32:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10422 invoked by uid 500); 1 Dec 2009 10:32:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10412 invoked by uid 99); 1 Dec 2009 10:32:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Dec 2009 10:32:25 +0000
X-ASF-Spam-Status: No, hits=-6.6 required=5.0
	tests=BAYES_00,RCVD_IN_DNSWL_MED,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [85.158.140.195] (HELO mail193.messagelabs.com) (85.158.140.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Dec 2009 10:32:23 +0000
X-VirusChecked: Checked
X-Env-Sender: wzzelfzzel@abas.de
X-Msg-Ref: server-11.tower-193.messagelabs.com!1259663515!39442700!1
X-StarScan-Version: 6.2.4; banners=-,-,-
X-Originating-IP: [212.202.226.202]
Received: (qmail 7984 invoked from network); 1 Dec 2009 10:31:55 -0000
Received: from gate.abas.de (HELO gate.abas.de) (212.202.226.202)
  by server-11.tower-193.messagelabs.com with DHE-RSA-AES256-SHA encrypted SMTP; 1 Dec 2009 10:31:55 -0000
Received: from gate.abas.de (localhost [127.0.0.1])
	by gate.abas.de (8.14.3/8.14.3) with ESMTP id nB1AVsqp006040
	for <java-user@lucene.apache.org>; Tue, 1 Dec 2009 11:31:54 +0100 (CET)
Received: (from localhost) by gate.abas.de (MSCAN) id 3/gate.abas.de/smtp-gw/mscan; Tue Dec  1 11:31:54 2009
From: Stefan Trcek <wzzelfzzel@abas.de>
To: java-user@lucene.apache.org
Subject: Re: What does "out of order" mean?
Date: Tue, 1 Dec 2009 11:31:39 +0100
User-Agent: KMail/1.9.10
References: <4B0FAF24.20205@dev.unitedplanet.de> <200912011052.42045.wzzelfzzel@abas.de> <9ac0c6aa0912010207r32c069bam6795c473572f69f8@mail.gmail.com>
In-Reply-To: <9ac0c6aa0912010207r32c069bam6795c473572f69f8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-ID: <200912011131.39815.wzzelfzzel@abas.de>
X-ABAS-MAIL-MARK: added by mailmarker.abas.de

On Tuesday 01 December 2009 11:07:41 Michael McCandless wrote:
> OK -- none of IndexSearcher's search methods needed tweaking?  Just
> TopDocs/TopFieldDocs?

Yes, you can use these methods in Searcher, they are sufficient:

TopDocs Searcher.search(Query query, Filter filter, int n)
TopFieldDocs Searcher.search(Query query, Filter filter, int n, Sort 
sort)

Stefan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 01 11:33:48 2009
Return-Path: <java-user-return-43849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80691 invoked from network); 1 Dec 2009 11:33:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Dec 2009 11:33:47 -0000
Received: (qmail 95711 invoked by uid 500); 1 Dec 2009 11:33:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95660 invoked by uid 500); 1 Dec 2009 11:33:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95650 invoked by uid 99); 1 Dec 2009 11:33:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Dec 2009 11:33:45 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Dec 2009 11:33:37 +0000
Received: by ywh15 with SMTP id 15so4098691ywh.5
        for <java-user@lucene.apache.org>; Tue, 01 Dec 2009 03:33:15 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.41.9 with SMTP id o9mr8663180ybo.310.1259667195796; Tue, 
	01 Dec 2009 03:33:15 -0800 (PST)
In-Reply-To: <200912011131.39815.wzzelfzzel@abas.de>
References: <4B0FAF24.20205@dev.unitedplanet.de>
	 <200912011052.42045.wzzelfzzel@abas.de>
	 <9ac0c6aa0912010207r32c069bam6795c473572f69f8@mail.gmail.com>
	 <200912011131.39815.wzzelfzzel@abas.de>
Date: Tue, 1 Dec 2009 06:33:15 -0500
Message-ID: <9ac0c6aa0912010333r68a3af15p1be99ceee6edbf66@mail.gmail.com>
Subject: Re: What does "out of order" mean?
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Super, thanks.  I'll commit your patch, fixing javadocs for
TopDocs/TopFieldDocs.

Mike

On Tue, Dec 1, 2009 at 5:31 AM, Stefan Trcek <wzzelfzzel@abas.de> wrote:
> On Tuesday 01 December 2009 11:07:41 Michael McCandless wrote:
>> OK -- none of IndexSearcher's search methods needed tweaking? =A0Just
>> TopDocs/TopFieldDocs?
>
> Yes, you can use these methods in Searcher, they are sufficient:
>
> TopDocs Searcher.search(Query query, Filter filter, int n)
> TopFieldDocs Searcher.search(Query query, Filter filter, int n, Sort
> sort)
>
> Stefan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 01 13:16:22 2009
Return-Path: <java-user-return-43850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15600 invoked from network); 1 Dec 2009 13:16:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Dec 2009 13:16:22 -0000
Received: (qmail 35090 invoked by uid 500); 1 Dec 2009 13:16:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35009 invoked by uid 500); 1 Dec 2009 13:16:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34999 invoked by uid 99); 1 Dec 2009 13:16:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Dec 2009 13:16:19 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Dec 2009 13:16:16 +0000
Received: by ywh15 with SMTP id 15so4168403ywh.5
        for <java-user@lucene.apache.org>; Tue, 01 Dec 2009 05:15:55 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.115.8 with SMTP id n8mr8346593ybc.64.1259673355413; Tue, 
	01 Dec 2009 05:15:55 -0800 (PST)
In-Reply-To: <200912011131.39815.wzzelfzzel@abas.de>
References: <4B0FAF24.20205@dev.unitedplanet.de>
	 <200912011052.42045.wzzelfzzel@abas.de>
	 <9ac0c6aa0912010207r32c069bam6795c473572f69f8@mail.gmail.com>
	 <200912011131.39815.wzzelfzzel@abas.de>
Date: Tue, 1 Dec 2009 08:15:55 -0500
Message-ID: <9ac0c6aa0912010515n7ab2a0e8qc0401bcbe033bd20@mail.gmail.com>
Subject: Re: What does "out of order" mean?
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

OK I committed this, plus further removes of "expert" from TopDocs, to
trunk (future 3.1), 2.9 and 3.0 branches.

Thanks!

Mike

On Tue, Dec 1, 2009 at 5:31 AM, Stefan Trcek <wzzelfzzel@abas.de> wrote:
> On Tuesday 01 December 2009 11:07:41 Michael McCandless wrote:
>> OK -- none of IndexSearcher's search methods needed tweaking? =A0Just
>> TopDocs/TopFieldDocs?
>
> Yes, you can use these methods in Searcher, they are sufficient:
>
> TopDocs Searcher.search(Query query, Filter filter, int n)
> TopFieldDocs Searcher.search(Query query, Filter filter, int n, Sort
> sort)
>
> Stefan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 01 14:12:27 2009
Return-Path: <java-user-return-43851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43855 invoked from network); 1 Dec 2009 14:12:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Dec 2009 14:12:27 -0000
Received: (qmail 12105 invoked by uid 500); 1 Dec 2009 14:12:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12019 invoked by uid 500); 1 Dec 2009 14:12:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12009 invoked by uid 99); 1 Dec 2009 14:12:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Dec 2009 14:12:23 +0000
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [85.158.138.179] (HELO mail169.messagelabs.com) (85.158.138.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Dec 2009 14:12:13 +0000
X-VirusChecked: Checked
X-Env-Sender: wzzelfzzel@abas.de
X-Msg-Ref: server-11.tower-169.messagelabs.com!1259676709!22287493!1
X-StarScan-Version: 6.2.4; banners=-,-,-
X-Originating-IP: [212.202.226.202]
Received: (qmail 9257 invoked from network); 1 Dec 2009 14:11:52 -0000
Received: from gate.abas.de (HELO gate.abas.de) (212.202.226.202)
  by server-11.tower-169.messagelabs.com with DHE-RSA-AES256-SHA encrypted SMTP; 1 Dec 2009 14:11:52 -0000
Received: from gate.abas.de (localhost [127.0.0.1])
	by gate.abas.de (8.14.3/8.14.3) with ESMTP id nB1EBmPo030108
	for <java-user@lucene.apache.org>; Tue, 1 Dec 2009 15:11:48 +0100 (CET)
Received: (from localhost) by gate.abas.de (MSCAN) id 3/gate.abas.de/smtp-gw/mscan; Tue Dec  1 15:11:48 2009
From: Stefan Trcek <wzzelfzzel@abas.de>
To: java-user@lucene.apache.org
Subject: Re: What does "out of order" mean?
Date: Tue, 1 Dec 2009 15:11:45 +0100
User-Agent: KMail/1.9.10
References: <4B0FAF24.20205@dev.unitedplanet.de> <9ac0c6aa0911300942k1c84cc51w4fedeb32eda3099e@mail.gmail.com> <alpine.LFD.2.00.0911301749190.7911@grenache>
In-Reply-To: <alpine.LFD.2.00.0911301749190.7911@grenache>
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="iso-8859-15"
Content-Transfer-Encoding: quoted-printable
Message-ID: <200912011511.45231.wzzelfzzel@abas.de>
X-ABAS-MAIL-MARK: added by mailmarker.abas.de
X-Virus-Checked: Checked by ClamAV on apache.org

On Monday 30 November 2009 18:51:34 Nick Burch wrote:
> On Mon, Nov 30, 2009 at 12:22 PM, Stefan Trcek <wzzelfzzel@abas.de>=20
wrote:
> > I'd do, but was not successful to get the svn repo some months ago.
> > I have to claim the sys admin for any svn repo to open a door
> > through the firewall. Gave up due to
> >
> > $ nmap -p3690 svn.apache.org
> > =A0 =A0 PORT =A0 =A0 STATE =A0 =A0SERVICE
> > =A0 =A0 3690/tcp filtered unknown
>
> Apache svn doesn't use the svnserve protocol, it uses plain old HTTP
> (or HTTPS for committers), so you only need port 80 access, and that
> should be open everywhere.
>
> You can get the svn url, and the appropriate commandline, from:
>  	http://lucene.apache.org/java/docs/developer-resources.html

Thanks, I got it and it works.
I just talked to a collegue who is familiar with svn: the patch format=20
of git and svn seems to be the same. As I've never used svn, but use=20
git regularly I can stay with git.

Stefan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 01 18:44:04 2009
Return-Path: <java-user-return-43852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66732 invoked from network); 1 Dec 2009 18:44:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Dec 2009 18:44:04 -0000
Received: (qmail 43637 invoked by uid 500); 1 Dec 2009 18:44:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43602 invoked by uid 500); 1 Dec 2009 18:44:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43592 invoked by uid 99); 1 Dec 2009 18:44:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Dec 2009 18:44:01 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.222.176 as permitted sender)
Received: from [209.85.222.176] (HELO mail-pz0-f176.google.com) (209.85.222.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Dec 2009 18:43:59 +0000
Received: by pzk6 with SMTP id 6so3735480pzk.29
        for <java-user@lucene.apache.org>; Tue, 01 Dec 2009 10:43:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=vGWRMv5RnClBWnOSFLn9uzfUUcrBGZCBPv8kwsGG6Ak=;
        b=uS9uC0we02P5oabYPe9JDgM5lM3rrDsQlwcsPciZ8k1mnurYfhEShb3lKTZhQJ0Z0e
         i+1rtKlN6+tNmOWpF3mKIPaRTBapx2Iwpvaamj5ZHzB4ElI9HrET/hliI15N6PS7mRs4
         IJmBC91MPZixyyOaG8PkL/exjlbWRC1TS/w3A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=hNbnMskWMf7lqOcgjCS81jUTx8IJ29jA0TzXZA1xHWvP5QYbX2yVzBNFgplSYl1+vJ
         1gq/M6q8u94YZ+LOH9gXaRCFhGeRC6CHXN6EmMwuX2dkLsgplimpR0WUzq++c2477Xal
         TfJ8Mfkhp6M99hyIeDNFybVnofWuYX+v7VktI=
MIME-Version: 1.0
Received: by 10.115.115.14 with SMTP id s14mr11611337wam.189.1259693018740; 
	Tue, 01 Dec 2009 10:43:38 -0800 (PST)
In-Reply-To: <655947.17150.qm@web52906.mail.re2.yahoo.com>
References: <655947.17150.qm@web52906.mail.re2.yahoo.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Tue, 1 Dec 2009 13:43:18 -0500
Message-ID: <8f0ad1f30912011043k4afe442eue41a09b808ac66b7@mail.gmail.com>
Subject: Re: LowerCaseFilter fails one letter (I) of Turkish alphabet
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e648f5dee878d50479af2249

--0016e648f5dee878d50479af2249
Content-Type: text/plain; charset=UTF-8

Hi Ahmet,

After thinking about what Shai brought up, I changed my mind and think it is
not good enough that we only have Collation as a way to solve this.
Because you might want turkish stemming too, and right now there is no way
for the included snowball turkish stemmer to work.
I really do not like this.

So as much as I want to reduce clutter and not have lots of filters that can
be solved in a general way with unicode, I think this is one case
where the best solution for now would be to have a turkish-specific
lowercasefilter...

I don't think we have to use String for this either, we can just apply rules
to the two uppercase I's, and lowercase everything else.

Will you open an issue?


On Mon, Nov 30, 2009 at 2:00 PM, AHMET ARSLAN <iorixxx@yahoo.com> wrote:

> In Turkish alphabet lowercase of I is not i. It is LATIN SMALL LETTER
> DOTLESS I. LowerCaseFilter which uses Character.toLowerCase() makes mistake
> just for that character.
>
> http://java.sun.com/javase/6/docs/api/java/lang/String.html#toLowerCase()<http://java.sun.com/javase/6/docs/api/java/lang/String.html#toLowerCase%28%29>
>
> I am not sure if it is worth to add a new TokenFilter for Turkish language.
> I see there exist GreekLowerCaseFilter and RussianLowerCaseFilter. It would
> be nice to see TurkishLowerCaseFilter in Lucene.
>
> Wiki recommends to ask permission from lucene committers before opening an
> issue. I can provide a patch (although it is just a one line change in
> original LowercaseFilter) for that if you want.
>
> Thank you for your consideration.
>
> Ahmet
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Robert Muir
rcmuir@gmail.com

--0016e648f5dee878d50479af2249--

From java-user-return-43853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 01 20:35:49 2009
Return-Path: <java-user-return-43853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99023 invoked from network); 1 Dec 2009 20:35:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Dec 2009 20:35:49 -0000
Received: (qmail 95120 invoked by uid 500); 1 Dec 2009 20:35:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95038 invoked by uid 500); 1 Dec 2009 20:35:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95028 invoked by uid 99); 1 Dec 2009 20:35:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Dec 2009 20:35:46 +0000
X-ASF-Spam-Status: No, hits=-2.2 required=5.0
	tests=AWL,BAYES_00,RCVD_IN_SORBS_WEB
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.49.16] (HELO web52906.mail.re2.yahoo.com) (206.190.49.16)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 01 Dec 2009 20:35:44 +0000
Received: (qmail 84293 invoked by uid 60001); 1 Dec 2009 20:35:23 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1259699723; bh=4b1E1lGhDM2y2yWWThTQBrbRe1iLaQqT0hscJCiWpNc=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=xGwYJSW6gA4AHlJ/FTYHnUGgtDKx3GxAB2wTwoH7KgNCJg9DSwLXE6BqUcrneyazxkuMmspM9T5BC+nEwke9/jEDl+XcebIDIh67BechY++ab8J6qJNp4hV81ZDB4ZBATjapc9vKK9L55RpaFLNx4YfnHH00BJKnehxUs3ZpWiI=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=4aYnIHl7fwbadD3g+IdZgs7mMnl/gC4/f1ua260uWHu9yBIPtovHJppzlsIWYhwzZsHY+NC1mj3JHRQ93F/cfjEc7vwtW/kWM6vW1JgU5AjX02zP9tuEzN6XwmCfwJxudY9SJcgGA+6dcniRTpW7YW2E0ypekIbc1Ue6UrZxaHw=;
Message-ID: <96515.82179.qm@web52906.mail.re2.yahoo.com>
X-YMail-OSG: Uv2vUuAVM1kqx_FkeQ.OoQjsgUULtB9l6TeYkKqcTunUmAMhjBA_9bfUdY66wbWI1.LeU31F4HTkUDXIBFOAOr71G.hCUzNJ1PUGowShv2SNZh7CdyWtW6B8qjrWxHGNG0SvaSzE_bRuzJGtzV9PwA7BUFDMu47JydvJrP5ba.y0LNe9TeXezDW3NmuO40Bcr0AKD_xVNBjl8ArBE90xwhyHBiN92R.7_JEKsxP9V.VsLZXXSywQVSBMCCby.OeSbY5YIHIOYzWyCFoj1alFSmVEHEKOExBuZGOGH4uArgASyLYOj.L0UbqGOqLnhP0_bFU4GY_L56x5DDtJ.28a7YfAle9P2XMpp_4x5QNGTWreCpVENnlOUgV_gBtLGD.kh8mOEY8xucfw22bO5xiz36YE.M0IczmEdb85uqTP4qruGdyK80cOVBZtHZDOKN_jmbXT_KaTL0EhsGRkkU2bpG0-
Received: from [78.168.95.16] by web52906.mail.re2.yahoo.com via HTTP; Tue, 01 Dec 2009 12:35:23 PST
X-Mailer: YahooMailClassic/8.1.6 YahooMailWebService/0.8.100.260964
Date: Tue, 1 Dec 2009 12:35:23 -0800 (PST)
From: AHMET ARSLAN <iorixxx@yahoo.com>
Subject: Re: LowerCaseFilter fails one letter (I) of Turkish alphabet
To: java-user@lucene.apache.org
In-Reply-To: <8f0ad1f30912011043k4afe442eue41a09b808ac66b7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

> Hi Ahmet,
> 
> After thinking about what Shai brought up, I changed my
> mind and think it is
> not good enough that we only have Collation as a way to
> solve this.
> Because you might want turkish stemming too, and right now
> there is no way
> for the included snowball turkish stemmer to work.
> I really do not like this.
> 
> So as much as I want to reduce clutter and not have lots of
> filters that can
> be solved in a general way with unicode, I think this is
> one case
> where the best solution for now would be to have a
> turkish-specific
> lowercasefilter...
> 
> I don't think we have to use String for this either, we can
> just apply rules
> to the two uppercase I's, and lowercase everything else.
> 
> Will you open an issue?

Of course. Here it is: https://issues.apache.org/jira/browse/LUCENE-2102
I can add more test cases if you want.
Thank you for your interest.


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 01 20:39:37 2009
Return-Path: <java-user-return-43854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99934 invoked from network); 1 Dec 2009 20:39:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Dec 2009 20:39:37 -0000
Received: (qmail 1739 invoked by uid 500); 1 Dec 2009 20:39:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1631 invoked by uid 500); 1 Dec 2009 20:39:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1315 invoked by uid 99); 1 Dec 2009 20:39:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Dec 2009 20:39:32 +0000
X-ASF-Spam-Status: No, hits=-2.5 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.60] (HELO web50306.mail.re2.yahoo.com) (206.190.38.60)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 01 Dec 2009 20:39:30 +0000
Received: (qmail 67837 invoked by uid 60001); 1 Dec 2009 20:39:08 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1259699948; bh=7f49GA/KpJ59zZKxFZQ3+NqLU6XQAAdOIEknkyoWZ5Y=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=xySBgvkv29jTaUej/kQYkNkdxX2SHhzU4Z2bvnpB3apYOV7x+/OILST25aPMEh5f1TOvRBUDZ5WzDkCJo1wS3BbIR8f5GxbZ4EfBfrg2+6YNFqBA4zx3tuuU56JQKUo6I6iZMpImmzRo7K5j+0iuIhrjiE4x7ALaB5L99k53M4g=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=RuBlFrngw1KTqzVreerS+9jZqOW4Dr0FMm/SFwnYByNqGbHwKA/ZSsqLXaJbtNSVCe2BsBabIK0voF+eugjRnKBtexlqJ2/3bOiGDtksiBuQ4BHPPc480rGrMQTRT/wtZl99z06+x+nbws6B1+DKmyQeNTIBGlo9kO0jZYWeMjw=;
Message-ID: <858380.66889.qm@web50306.mail.re2.yahoo.com>
X-YMail-OSG: RMAYvB0VM1la65EOYDlkRhtPg9J7DIuPz3tgkBweHT1eygTQQsP6BL4BkoLL1S9poikrlCW5QUOHwR7789G_Yk.PSG_AZyYHnj9B0xBovHAls40DxegpObN.M0YGLwYYbes.bPoF_y_B_ZLnkihzy57HWMOeFb1ybmBdTaQRZsd0XEUEOooDhcKXtRk8CHHg9ZXmSDY7oJnGyJPIWUfRba0_ewsLQO2yErB08vqTrarKVQErVQ_DXodHsrZUsCoT2MqaAinin7sIn10RepCcH7VizPNabMl0KFk4xYfT1IGiGZ5N5Go3_cGg6tsiuyBQqeR4I1SDczRcwB7b5Nw1hFCsCbZOn1y49K3rGmlED2WhhTTOdRNhFOUs1fuEAMPUeggI1S9kSxa5jAL.qplcFqKdXBbrEJ9KBmSDKYnqg6M0jfe1wzbflhb_0liBizeLfJoP2uupAQZX3v8h6dlp0RWw1UooLVU5X2SA1nTypwA760MZ5yZignypVtHCB295n5e3_dXuJCWH98t3mPTrnhyEctRX2EIsbQ2E2vIEeg7Ewf3sXC01
Received: from [167.206.188.3] by web50306.mail.re2.yahoo.com via HTTP; Tue, 01 Dec 2009 12:39:08 PST
X-Mailer: YahooMailRC/211.6 YahooMailWebService/0.8.100.260964
Date: Tue, 1 Dec 2009 12:39:08 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: NYC Search & Discovery Meetup
To: java-user@lucene.apache.org, solr-user@lucene.apache.org,
  Nutch User List <nutch-user@lucene.apache.org>,
  mahout-user@lucene.apache.org, uima-user@incubator.apache.org,
  droids-dev@incubator.apache.org, tika-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Hello,

For those living in or near NYC, you may be interested in joining (and/or presenting?) at the NYC Search & Discovery Meetup.
Topics are: search, machine learning, data mining, NLP, information gathering, information extraction, etc.

  http://www.meetup.com/NYC-Search-and-Discovery/

Our previous/first meetup was about solr-python and parse.ly (a service that makes use of Solr and solr-python).

Tomorrow (December 2 2009) we have:

  Incorporating Probabilistic Retrieval Knowledge into TFIDF-based Search Engine

You can RSVP at:
  http://www.meetup.com/NYC-Search-and-Discovery/calendar/11745435/

Otis
--
Sematext -- http://sematext.com/ -- Solr - Lucene - Nutch


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 01 22:10:03 2009
Return-Path: <java-user-return-43855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42031 invoked from network); 1 Dec 2009 22:10:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Dec 2009 22:10:03 -0000
Received: (qmail 55929 invoked by uid 500); 1 Dec 2009 22:10:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55844 invoked by uid 500); 1 Dec 2009 22:10:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55834 invoked by uid 99); 1 Dec 2009 22:10:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Dec 2009 22:10:00 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.58] (HELO web50304.mail.re2.yahoo.com) (206.190.38.58)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 01 Dec 2009 22:09:49 +0000
Received: (qmail 67158 invoked by uid 60001); 1 Dec 2009 22:09:27 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1259705367; bh=ScSoDOSHM+u18Vr64RVC1kIE1CNdwUNvQXJQ4Tvz6Fs=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=BthEWUmhhBXIWZSE+Zi6c9uAzaMqcER58X34yZZjL9AQUlP5o/Oo0T4qhpdCC68p321P4fZ4UCuJS9ezTwg/BdT4o1Pad/1onzTCzk5rrGgJKIXE84NXTeXXSMHzUfbXxTuIRXP3WE8R8KHXarwqRy5ducfvtMlBKLrQQen8Whg=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=6mMoJyPAVn8DefbXAmrspzTSonhG90DnFWPYK7iQ4cQo6/IJrLjYLQ9uxLAauYVC+5AhG5Hp7uUWNdOEmaNTMj8bOkK7tAmcaWbk1Io9iQcO4U8k2njT7AIpXjSLxv5MaQoPDbLDjQMN8r1wA0t12nIY2xWGsc6vvhwLFPWIS0Q=;
Message-ID: <568985.66972.qm@web50304.mail.re2.yahoo.com>
X-YMail-OSG: IbEdOE4VM1lGrXTyL19xlzD0UqthHOeEP6yHh2aPqRefzlf2BOJe3jMRPydja8hAz6aTeQVoiC.BLpaCt66Z.M8WTqwbZWzfl13r5mOdWO4gAVnBJcXUkxPvqUIbv7sH5j.QfLte8B2iglDEb3afORH9zfnqamY5tItR.lsu_VRSXYMKb2ByyuuC15FWGRD95ni3Yz5D7b04yQrdPQS_Wpah0Si421OdUig3tl9FVnmen_j02FMofZDt.IefQQz7XQAqTfah.W_dU3XSh8ZovDAGfjfh_.OGWF.nMtsjxfF_4i0TnvNDRbcBEPcMebhJIYNHMiKtAySQad5fZ4C5ATtxP0Ov45vDfQsWANlFHvxw2Jrhhdov05u1C9R9L1S6RDy3nImzSLqw6C1GWWg3Ax52V1rxTa0AxhlUh8kjf.diieZKpPyH6KXhBbdDB_w7H1BrT_gd1Do_Q3uXoLfjqeQNsbUQY9jSVx.o8L2WL0A84enyW.UoP.kw0Z7Y8guVmnWXo4FXbKeWpYkHzdk.PoLmKtAPRUhAzAbajQsJ7esu84bBMu9uDtTXzqWg58IBNHkKxZkrcxk40nYX1w--
Received: from [167.206.188.3] by web50304.mail.re2.yahoo.com via HTTP; Tue, 01 Dec 2009 14:09:27 PST
X-Mailer: YahooMailRC/211.6 YahooMailWebService/0.8.100.260964
References: <EAD332B3E650427FBB0F2780493C723D@VEGA>  <900164.70889.qm@web94803.mail.in2.yahoo.com>  <2C30719D97FF477BA02AD3F75DB6F2A0@VEGA>  <867513fe0911260259h2fdc40dal433f3535ae7e6a94@mail.gmail.com>  <99912d2d0911261808q244b13d2q72dcfb0288e62186@mail.gmail.com> <99912d2d0911261810o780b6c32h8a75930fa583d34d@mail.gmail.com>
Date: Tue, 1 Dec 2009 14:09:27 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Need help regarding implementation of autosuggest using jquery
To: java-user@lucene.apache.org
In-Reply-To: <99912d2d0911261810o780b6c32h8a75930fa583d34d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,=0A=0AHave a look at http://www.sematext.com/products/autocomplete/index=
.html=0A=0AIt handles Chinese and large volumes of data.=0A=0A Otis=0A--=0A=
Sematext -- http://sematext.com/ -- Solr - Lucene - Nutch=0A=0A=0A=0A----- =
Original Message ----=0A> From: fulin tang <tangfulin@gmail.com>=0A> To: ja=
va-user@lucene.apache.org=0A> Sent: Thu, November 26, 2009 9:10:41 PM=0A> S=
ubject: Re: Need help regarding implementation of autosuggest using jquery=
=0A> =0A> By the way , we search Chinese words, so Trie tree looks not perf=
ect=0A> for us either=0A> =0A> =0A> 2009/11/27 fulin tang :=0A> > We have t=
he same needs in our music search, and we found this is not a=0A> > good ap=
proach for performance reason .=0A> >=0A> > Did any one have experience of =
implement the autosuggestion in a heavy=0A> > product environment ?=0A> > A=
ny suggestions ?=0A> >=0A> >=0A> > 2009/11/26 Anshum :=0A> >> Try this,=0A>=
 >> Change the code as required:=0A> >> ---------=0A> >>=0A> >>=0A> >> impo=
rt java.io.IOException;=0A> >>=0A> >> import org.apache.lucene.index.Corrup=
tIndexException;=0A> >> import org.apache.lucene.index.IndexReader;=0A> >> =
import org.apache.lucene.index.Term;=0A> >> import org.apache.lucene.index.=
TermEnum;=0A> >>=0A> >> /**=0A> >>  * @author anshum=0A> >>  *=0A> >>  */=
=0A> >> public class GetTermsToSuggest {=0A> >>=0A> >> private static void =
getTerms(String inputText) {=0A> >> IndexReader reader =3D null;=0A> >>  tr=
y {=0A> >> reader =3D IndexReader.open("/home/anshum/index/testindex");=0A>=
 >>  String field =3D "fieldname";=0A> >> field =3D field.intern();=0A> >> =
TermEnum tenum =3D reader.terms(new Term("fieldname", ""));=0A> >>  Boolean=
 hasRun =3D false;=0A> >> try {=0A> >> do {=0A> >>  final Term term =3D ten=
um.term();=0A> >> if (term =3D=3D null || term.field() !=3D field)=0A> >>  =
break;=0A> >> final String termText =3D term.text();=0A> >> if (termText.st=
artsWith(inputText)) {=0A> >>  System.out.println(termText);=0A> >> hasRun =
=3D true;=0A> >> } else if (hasRun =3D=3D true)=0A> >>  break;=0A> >> } whi=
le (tenum.next());=0A> >> tenum.close();=0A> >>  } catch (IOException e) {=
=0A> >> e.printStackTrace();=0A> >> }=0A> >>  } catch (CorruptIndexExceptio=
n e2) {=0A> >> e2.printStackTrace();=0A> >> } catch (IOException e2) {=0A> =
>>  e2.printStackTrace();=0A> >> }=0A> >>=0A> >> }=0A> >>=0A> >> /**=0A> >>=
  * @param args=0A> >>  */=0A> >>  public static void main(String[] args) {=
=0A> >> GetTermsToSuggest.getTerms(args[0]);=0A> >>  }=0A> >> }=0A> >>=0A> =
>>=0A> >> --=0A> >> Anshum Gupta=0A> >> Naukri Labs!=0A> >> http://ai-cafe.=
blogspot.com=0A> >>=0A> >> The facts expressed here belong to everybody, th=
e opinions to me. The=0A> >> distinction is yours to draw............=0A> >=
>=0A> >>=0A> >> On Thu, Nov 26, 2009 at 3:19 PM, Uwe Schindler wrote:=0A> >=
>=0A> >>> You can fix this if you just create the initial term not with "",=
 instead=0A> >>> with your prefix:=0A> >>> TermEnum tenum =3D reader.terms(=
new Term(field,prefix));=0A> >>>=0A> >>> And inside the while loop just bre=
ak out,=0A> >>>=0A> >>> if (!termText.startsWith(prefix)) break;=0A> >>>=0A=
> >>> -----=0A> >>> Uwe Schindler=0A> >>> H.-H.-Meier-Allee 63, D-28213 Bre=
men=0A> >>> http://www.thetaphi.de=0A> >>> eMail: uwe@thetaphi.de=0A> >>>=
=0A> >>>=0A> >>> > -----Original Message-----=0A> >>> > From: DHIVYA M [mai=
lto:dhivyakrishnan87@yahoo.com]=0A> >>> > Sent: Thursday, November 26, 2009=
 10:39 AM=0A> >>> > To: java-user@lucene.apache.org=0A> >>> > Subject: RE: =
Need help regarding implementation of autosuggest using=0A> >>> > jquery=0A=
> >>> >=0A> >>> > Sir,=0A> >>> >=0A> >>> > Your suggestion was fantastic.=
=0A> >>> >=0A> >>> > I tried the below mentioned code but it is showing me =
the entire result=0A> >>> of=0A> >>> > indexed words starting from the lett=
er that i give as input.=0A> >>> > Ex:=0A> >>> > if i give "fo"=0A> >>> > a=
m getting all the indexes from the word starting with fo upto words=0A> >>>=
 > starting with z.=0A> >>> > i.e. it starts displaying from the word match=
ing the search word and ends=0A> >>> > up with the last word available in t=
he index file.=0A> >>> >=0A> >>> > Kindly suggest me a solution for this pr=
oblem=0A> >>> >=0A> >>> > Thanks in advance,=0A> >>> > Dhivya=0A> >>> >=0A>=
 >>> > --- On Wed, 25/11/09, Uwe Schindler wrote:=0A> >>> >=0A> >>> >=0A> >=
>> > From: Uwe Schindler =0A> >>> > Subject: RE: Need help regarding implem=
entation of autosuggest using=0A> >>> > jquery=0A> >>> > To: java-user@luce=
ne.apache.org=0A> >>> > Date: Wednesday, 25 November, 2009, 9:54 AM=0A> >>>=
 >=0A> >>> >=0A> >>> > Hi Dhivya,=0A> >>> >=0A> >>> > you can iterate all t=
erms in the index using a TermEnum, that can be=0A> >>> > retrieved using I=
ndexReader.terms(Term startTerm).=0A> >>> >=0A> >>> > If you are interested=
 in all terms from a specific field, position the=0A> >>> > TermEnum on the=
 first possible term in this field ("") and iterate until=0A> >>> > the=0A>=
 >>> > field name changes. As terms in the TermEnum are first ordered by fi=
eld=0A> >>> > name=0A> >>> > then by term text (in UTF-16 order), the loop =
would look like this:=0A> >>> >=0A> >>> > IndexReader reader =3D ...=0A> >>=
> > String field =3D ....=0A> >>> > Field =3D field.intern(); // important =
for the while loop=0A> >>> > TermEnum tenum =3D reader.terms(new Term(field=
,""));=0A> >>> > try {=0A> >>> >     do {=0A> >>> >         final Term term=
 =3D tenum.term();=0A> >>> >         if (term=3D=3Dnull || term.field()!=3D=
field) break;=0A> >>> >         final String termText =3D term.text();=0A> =
>>> >         // do something with the termText=0A> >>> >     } while (tenu=
m.next());=0A> >>> > } finally {=0A> >>> >     tenum.close();=0A> >>> > }=
=0A> >>> >=0A> >>> >=0A> >>> > -----=0A> >>> > Uwe Schindler=0A> >>> > H.-H=
.-Meier-Allee 63, D-28213 Bremen=0A> >>> > http://www.thetaphi.de=0A> >>> >=
 eMail: uwe@thetaphi.de=0A> >>> >=0A> >>> >=0A> >>> > > -----Original Messa=
ge-----=0A> >>> > > From: DHIVYA M [mailto:dhivyakrishnan87@yahoo.com]=0A> =
>>> > > Sent: Wednesday, November 25, 2009 8:06 AM=0A> >>> > > To: java use=
r=0A> >>> > > Subject: Need help regarding implementation of autosuggest us=
ing jquery=0A> >>> > >=0A> >>> > > Hi all,=0A> >>> > >=0A> >>> > > Am using=
 lucene 2.3.2 as a search engine in my e-paper site. So that i=0A> >>> > > =
want the user to search the news. I achieved that objective but now am=0A> =
>>> > > trying to implement autosuggest so that user can pick a choice from=
 the=0A> >>> > > drop down and no need of typing in the entire sentence or =
so.=0A> >>> > >=0A> >>> > > I have download Jquery for this purpose and am =
trying to implement it.=0A> >>> > > The collections of data to refer for th=
e suggestion is given in an=0A> >>> > > arraylist or jus with in a string.=
=0A> >>> > >=0A> >>> > > But for my application, i need to populate the sug=
gestions with the=0A> >>> > > indexed words available in the index file cre=
ated during indexing=0A> >>> > > operation.=0A> >>> > >=0A> >>> > > Can any=
one give an idea to read the contents from the index file and=0A> >>> > mak=
e=0A> >>> > > it available as suggestions? or anyother idea to achieve this=
=0A> >>> objective?=0A> >>> > >=0A> >>> > > Thanks in advance,=0A> >>> > > =
Dhivya=0A> >>> > >=0A> >>> > >=0A> >>> > >       The INTERNET now has a per=
sonality. YOURS! See your Yahoo!=0A> >>> > Homepage.=0A> >>> > > http://in.=
yahoo.com/=0A> >>> >=0A> >>> >=0A> >>> > ----------------------------------=
-----------------------------------=0A> >>> > To unsubscribe, e-mail: java-=
user-unsubscribe@lucene.apache.org=0A> >>> > For additional commands, e-mai=
l: java-user-help@lucene.apache.org=0A> >>> >=0A> >>> >=0A> >>> >=0A> >>> >=
=0A> >>> >       The INTERNET now has a personality. YOURS! See your Yahoo!=
=0A> >>> Homepage.=0A> >>> > http://in.yahoo.com/=0A> >>>=0A> >>>=0A> >>> -=
--------------------------------------------------------------------=0A> >>=
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> >>> F=
or additional commands, e-mail: java-user-help@lucene.apache.org=0A> >>>=0A=
> >>>=0A> >>=0A> >=0A> >=0A> >=0A> > --=0A> > =E6=A2=A6=E7=9A=84=E5=BC=80=
=E5=A7=8B=E6=8C=A3=E6=89=8E=E4=BA=8E=E5=9F=8E=E5=B8=82=E7=9A=84=E8=BE=B9=E7=
=BC=98=0A> > =E5=BF=83=E7=9A=84=E8=BF=9C=E6=96=B9=E6=89=A7=E7=9D=80=E5=9C=
=A8=E8=84=9A=E6=AD=A5=E7=9A=84=E7=9E=AC=E9=97=B4=0A> > =E6=88=91=E7=9A=84=
=E5=AE=BF=E5=91=BD=E5=9F=8B=E8=97=8F=E4=BA=86=E5=AF=82=E5=AF=9E=E7=9A=84=E6=
=B0=B8=E8=BF=9C=0A> >=0A> =0A> =0A> =0A> -- =0A> =E6=A2=A6=E7=9A=84=E5=BC=
=80=E5=A7=8B=E6=8C=A3=E6=89=8E=E4=BA=8E=E5=9F=8E=E5=B8=82=E7=9A=84=E8=BE=B9=
=E7=BC=98=0A> =E5=BF=83=E7=9A=84=E8=BF=9C=E6=96=B9=E6=89=A7=E7=9D=80=E5=9C=
=A8=E8=84=9A=E6=AD=A5=E7=9A=84=E7=9E=AC=E9=97=B4=0A> =E6=88=91=E7=9A=84=E5=
=AE=BF=E5=91=BD=E5=9F=8B=E8=97=8F=E4=BA=86=E5=AF=82=E5=AF=9E=E7=9A=84=E6=B0=
=B8=E8=BF=9C=0A> =0A> -----------------------------------------------------=
----------------=0A> To unsubscribe, e-mail: java-user-unsubscribe@lucene.a=
pache.org=0A> For additional commands, e-mail: java-user-help@lucene.apache=
.org=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 01 22:24:01 2009
Return-Path: <java-user-return-43856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49426 invoked from network); 1 Dec 2009 22:24:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Dec 2009 22:24:01 -0000
Received: (qmail 75135 invoked by uid 500); 1 Dec 2009 22:23:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75065 invoked by uid 500); 1 Dec 2009 22:23:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75055 invoked by uid 99); 1 Dec 2009 22:23:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Dec 2009 22:23:58 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.211.185 as permitted sender)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Dec 2009 22:23:55 +0000
Received: by ywh15 with SMTP id 15so4723029ywh.5
        for <java-user@lucene.apache.org>; Tue, 01 Dec 2009 14:23:34 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=HQYiUQp79XjQ21/yK0fO9JBmWqVFSuPQM3jdQvVj05U=;
        b=CknH9YU/5pXLJ72U4adEkrANhJpiZSsXXzw8MaqgBQLqnNjkYmGpz/OwppSA+jS/6w
         3pJLn8eBVomH5cBo9vUtkVgMy5F59GCaKY9IwBCN3bJUEY6sQnAFL7ym+qZ14tSfD09X
         Z3yVfGwTLy7s+jbNWeaN0sNaJRmWsBnM3AyiA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=MunlF7SIkPbra+ojKN1BU6e+qtjTeStAcdeN3j0VWF1xIrVSEVFSatvo13+T6PD2Kv
         5rSGSRB0ekiQC2yZp15u6ep1CoyIa2RKM1Gzj59cfiukjxgfqpXoUDJCwRR1/8x/6PfS
         HPBRR293ys6awbHO6BqlUvdCQvXXAoJTmDta0=
MIME-Version: 1.0
Received: by 10.91.153.15 with SMTP id f15mr8896708ago.77.1259706213783; Tue, 
	01 Dec 2009 14:23:33 -0800 (PST)
In-Reply-To: <568985.66972.qm@web50304.mail.re2.yahoo.com>
References: <EAD332B3E650427FBB0F2780493C723D@VEGA>
	 <900164.70889.qm@web94803.mail.in2.yahoo.com>
	 <2C30719D97FF477BA02AD3F75DB6F2A0@VEGA>
	 <867513fe0911260259h2fdc40dal433f3535ae7e6a94@mail.gmail.com>
	 <99912d2d0911261808q244b13d2q72dcfb0288e62186@mail.gmail.com>
	 <99912d2d0911261810o780b6c32h8a75930fa583d34d@mail.gmail.com>
	 <568985.66972.qm@web50304.mail.re2.yahoo.com>
Date: Wed, 2 Dec 2009 06:23:33 +0800
Message-ID: <7d94dcde0912011423q3e0623fetfed6ebff5a47ad0a@mail.gmail.com>
Subject: Re: Need help regarding implementation of autosuggest using jquery
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64713e264dea90479b2351f

--0016e64713e264dea90479b2351f
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

Hi, dudes,

I finished an search suggestion module a few months ago.

The framework is as below:
1. Log all your search keywords or retrieve all your segmented terms which
can be searched
2. Index all the keywords and or terms with N-Gram tech
3. Search this index with a same analyzer based on user input

You can find a example in lucene contribute materials: SpellCheck or you ca=
n
find the source code of our project here:
http://code.google.com/p/askrosa/source/browse/trunk/RosaCrawler/src/autoco=
mplete/AutoCompleter.java
This code is not really up to date, the parameters in the EdgeNGramTokenFil=
ter
should be 2 and 5 or some values not too small and not too large. I
recommend you read some thing about N-Gram(don't worry, it's very easy to
understand)

You can do any modifying to the code and redeploy.

Hope you will enjoy the search tools you are building.

On Wed, Dec 2, 2009 at 6:09 AM, Otis Gospodnetic <otis_gospodnetic@yahoo.co=
m
> wrote:

> Hi,
>
> Have a look at http://www.sematext.com/products/autocomplete/index.html
>
> It handles Chinese and large volumes of data.
>
>  Otis
> --
> Sematext -- http://sematext.com/ -- Solr - Lucene - Nutch
>
>
>
> ----- Original Message ----
> > From: fulin tang <tangfulin@gmail.com>
> > To: java-user@lucene.apache.org
> > Sent: Thu, November 26, 2009 9:10:41 PM
> > Subject: Re: Need help regarding implementation of autosuggest using
> jquery
> >
> > By the way , we search Chinese words, so Trie tree looks not perfect
> > for us either
> >
> >
> > 2009/11/27 fulin tang :
> > > We have the same needs in our music search, and we found this is not =
a
> > > good approach for performance reason .
> > >
> > > Did any one have experience of implement the autosuggestion in a heav=
y
> > > product environment ?
> > > Any suggestions ?
> > >
> > >
> > > 2009/11/26 Anshum :
> > >> Try this,
> > >> Change the code as required:
> > >> ---------
> > >>
> > >>
> > >> import java.io.IOException;
> > >>
> > >> import org.apache.lucene.index.CorruptIndexException;
> > >> import org.apache.lucene.index.IndexReader;
> > >> import org.apache.lucene.index.Term;
> > >> import org.apache.lucene.index.TermEnum;
> > >>
> > >> /**
> > >>  * @author anshum
> > >>  *
> > >>  */
> > >> public class GetTermsToSuggest {
> > >>
> > >> private static void getTerms(String inputText) {
> > >> IndexReader reader =3D null;
> > >>  try {
> > >> reader =3D IndexReader.open("/home/anshum/index/testindex");
> > >>  String field =3D "fieldname";
> > >> field =3D field.intern();
> > >> TermEnum tenum =3D reader.terms(new Term("fieldname", ""));
> > >>  Boolean hasRun =3D false;
> > >> try {
> > >> do {
> > >>  final Term term =3D tenum.term();
> > >> if (term =3D=3D null || term.field() !=3D field)
> > >>  break;
> > >> final String termText =3D term.text();
> > >> if (termText.startsWith(inputText)) {
> > >>  System.out.println(termText);
> > >> hasRun =3D true;
> > >> } else if (hasRun =3D=3D true)
> > >>  break;
> > >> } while (tenum.next());
> > >> tenum.close();
> > >>  } catch (IOException e) {
> > >> e.printStackTrace();
> > >> }
> > >>  } catch (CorruptIndexException e2) {
> > >> e2.printStackTrace();
> > >> } catch (IOException e2) {
> > >>  e2.printStackTrace();
> > >> }
> > >>
> > >> }
> > >>
> > >> /**
> > >>  * @param args
> > >>  */
> > >>  public static void main(String[] args) {
> > >> GetTermsToSuggest.getTerms(args[0]);
> > >>  }
> > >> }
> > >>
> > >>
> > >> --
> > >> Anshum Gupta
> > >> Naukri Labs!
> > >> http://ai-cafe.blogspot.com
> > >>
> > >> The facts expressed here belong to everybody, the opinions to me. Th=
e
> > >> distinction is yours to draw............
> > >>
> > >>
> > >> On Thu, Nov 26, 2009 at 3:19 PM, Uwe Schindler wrote:
> > >>
> > >>> You can fix this if you just create the initial term not with "",
> instead
> > >>> with your prefix:
> > >>> TermEnum tenum =3D reader.terms(new Term(field,prefix));
> > >>>
> > >>> And inside the while loop just break out,
> > >>>
> > >>> if (!termText.startsWith(prefix)) break;
> > >>>
> > >>> -----
> > >>> Uwe Schindler
> > >>> H.-H.-Meier-Allee 63, D-28213 Bremen
> > >>> http://www.thetaphi.de
> > >>> eMail: uwe@thetaphi.de
> > >>>
> > >>>
> > >>> > -----Original Message-----
> > >>> > From: DHIVYA M [mailto:dhivyakrishnan87@yahoo.com]
> > >>> > Sent: Thursday, November 26, 2009 10:39 AM
> > >>> > To: java-user@lucene.apache.org
> > >>> > Subject: RE: Need help regarding implementation of autosuggest
> using
> > >>> > jquery
> > >>> >
> > >>> > Sir,
> > >>> >
> > >>> > Your suggestion was fantastic.
> > >>> >
> > >>> > I tried the below mentioned code but it is showing me the entire
> result
> > >>> of
> > >>> > indexed words starting from the letter that i give as input.
> > >>> > Ex:
> > >>> > if i give "fo"
> > >>> > am getting all the indexes from the word starting with fo upto
> words
> > >>> > starting with z.
> > >>> > i.e. it starts displaying from the word matching the search word
> and ends
> > >>> > up with the last word available in the index file.
> > >>> >
> > >>> > Kindly suggest me a solution for this problem
> > >>> >
> > >>> > Thanks in advance,
> > >>> > Dhivya
> > >>> >
> > >>> > --- On Wed, 25/11/09, Uwe Schindler wrote:
> > >>> >
> > >>> >
> > >>> > From: Uwe Schindler
> > >>> > Subject: RE: Need help regarding implementation of autosuggest
> using
> > >>> > jquery
> > >>> > To: java-user@lucene.apache.org
> > >>> > Date: Wednesday, 25 November, 2009, 9:54 AM
> > >>> >
> > >>> >
> > >>> > Hi Dhivya,
> > >>> >
> > >>> > you can iterate all terms in the index using a TermEnum, that can
> be
> > >>> > retrieved using IndexReader.terms(Term startTerm).
> > >>> >
> > >>> > If you are interested in all terms from a specific field, positio=
n
> the
> > >>> > TermEnum on the first possible term in this field ("") and iterat=
e
> until
> > >>> > the
> > >>> > field name changes. As terms in the TermEnum are first ordered by
> field
> > >>> > name
> > >>> > then by term text (in UTF-16 order), the loop would look like thi=
s:
> > >>> >
> > >>> > IndexReader reader =3D ...
> > >>> > String field =3D ....
> > >>> > Field =3D field.intern(); // important for the while loop
> > >>> > TermEnum tenum =3D reader.terms(new Term(field,""));
> > >>> > try {
> > >>> >     do {
> > >>> >         final Term term =3D tenum.term();
> > >>> >         if (term=3D=3Dnull || term.field()!=3Dfield) break;
> > >>> >         final String termText =3D term.text();
> > >>> >         // do something with the termText
> > >>> >     } while (tenum.next());
> > >>> > } finally {
> > >>> >     tenum.close();
> > >>> > }
> > >>> >
> > >>> >
> > >>> > -----
> > >>> > Uwe Schindler
> > >>> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > >>> > http://www.thetaphi.de
> > >>> > eMail: uwe@thetaphi.de
> > >>> >
> > >>> >
> > >>> > > -----Original Message-----
> > >>> > > From: DHIVYA M [mailto:dhivyakrishnan87@yahoo.com]
> > >>> > > Sent: Wednesday, November 25, 2009 8:06 AM
> > >>> > > To: java user
> > >>> > > Subject: Need help regarding implementation of autosuggest usin=
g
> jquery
> > >>> > >
> > >>> > > Hi all,
> > >>> > >
> > >>> > > Am using lucene 2.3.2 as a search engine in my e-paper site. So
> that i
> > >>> > > want the user to search the news. I achieved that objective but
> now am
> > >>> > > trying to implement autosuggest so that user can pick a choice
> from the
> > >>> > > drop down and no need of typing in the entire sentence or so.
> > >>> > >
> > >>> > > I have download Jquery for this purpose and am trying to
> implement it.
> > >>> > > The collections of data to refer for the suggestion is given in
> an
> > >>> > > arraylist or jus with in a string.
> > >>> > >
> > >>> > > But for my application, i need to populate the suggestions with
> the
> > >>> > > indexed words available in the index file created during indexi=
ng
> > >>> > > operation.
> > >>> > >
> > >>> > > Can anyone give an idea to read the contents from the index fil=
e
> and
> > >>> > make
> > >>> > > it available as suggestions? or anyother idea to achieve this
> > >>> objective?
> > >>> > >
> > >>> > > Thanks in advance,
> > >>> > > Dhivya
> > >>> > >
> > >>> > >
> > >>> > >       The INTERNET now has a personality. YOURS! See your Yahoo=
!
> > >>> > Homepage.
> > >>> > > http://in.yahoo.com/
> > >>> >
> > >>> >
> > >>> >
> ---------------------------------------------------------------------
> > >>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >>> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>> >
> > >>> >
> > >>> >
> > >>> >
> > >>> >       The INTERNET now has a personality. YOURS! See your Yahoo!
> > >>> Homepage.
> > >>> > http://in.yahoo.com/
> > >>>
> > >>>
> > >>> -------------------------------------------------------------------=
--
> > >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>>
> > >>>
> > >>
> > >
> > >
> > >
> > > --
> > > =C3=CE=B5=C4=BF=AA=CA=BC=D5=F5=D4=FA=D3=DA=B3=C7=CA=D0=B5=C4=B1=DF=D4=
=B5
> > > =D0=C4=B5=C4=D4=B6=B7=BD=D6=B4=D7=C5=D4=DA=BD=C5=B2=BD=B5=C4=CB=B2=BC=
=E4
> > > =CE=D2=B5=C4=CB=DE=C3=FC=C2=F1=B2=D8=C1=CB=BC=C5=C4=AF=B5=C4=D3=C0=D4=
=B6
> > >
> >
> >
> >
> > --
> > =C3=CE=B5=C4=BF=AA=CA=BC=D5=F5=D4=FA=D3=DA=B3=C7=CA=D0=B5=C4=B1=DF=D4=
=B5
> > =D0=C4=B5=C4=D4=B6=B7=BD=D6=B4=D7=C5=D4=DA=BD=C5=B2=BD=B5=C4=CB=B2=BC=
=E4
> > =CE=D2=B5=C4=CB=DE=C3=FC=C2=F1=B2=D8=C1=CB=BC=C5=C4=AF=B5=C4=D3=C0=D4=
=B6
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Weiwei Wang
Alex Wang
=CD=F5=CE=A1=CE=A1
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--0016e64713e264dea90479b2351f--

From java-user-return-43857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 02 12:36:07 2009
Return-Path: <java-user-return-43857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2971 invoked from network); 2 Dec 2009 12:36:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Dec 2009 12:36:07 -0000
Received: (qmail 66789 invoked by uid 500); 2 Dec 2009 12:36:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66713 invoked by uid 500); 2 Dec 2009 12:36:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66703 invoked by uid 99); 2 Dec 2009 12:36:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Dec 2009 12:36:03 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of serera@gmail.com designates 209.85.219.225 as permitted sender)
Received: from [209.85.219.225] (HELO mail-ew0-f225.google.com) (209.85.219.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Dec 2009 12:35:55 +0000
Received: by ewy25 with SMTP id 25so196734ewy.5
        for <java-user@lucene.apache.org>; Wed, 02 Dec 2009 04:35:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=o/vMvzwvmtpcA90DMw+9SCPZCYEpBNiianL0h//z3dQ=;
        b=Fe+1rcFrjU1BX41bCzQzncxabwP9X+Btoke0nxYUqXqknDIzPJgzH6W7VgerTRPmdH
         iNHLBedE4OPA6lCGz06ILlBmCE3DkTxG9i+heDSiFV+BXaEZqzBykjput9Do0aRoQJRe
         n+IOWfbmeQlAv2xobpdaOuSFEZO7GSaiW9J7A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=gs0m3ct8rCZMK+lh0SuL8sVfBYc6pTqt9zMW7pADCyZ+oaeMp+CaxAgPNlVN6QjAw6
         rofDesKLtL3ffW8v0NVGo/pv+oDcmUieRk1J2WIUQ2jEBPVKht+hR3G8ToS2TMfCqPQp
         BC8GGpnuVEtEbVxz13V72WdX0lNjxkkbay1+Y=
MIME-Version: 1.0
Received: by 10.216.87.9 with SMTP id x9mr24433wee.0.1259757333553; Wed, 02 
	Dec 2009 04:35:33 -0800 (PST)
Date: Wed, 2 Dec 2009 14:35:33 +0200
Message-ID: <786fde50912020435l17a19577rbdf251a854757ea8@mail.gmail.com>
Subject: Best Locking approach (Directory Lock)
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6db29965ea3550479be1c43
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6db29965ea3550479be1c43
Content-Type: text/plain; charset=ISO-8859-1

Hi

We've run into problems w/ LockFactory usage on our system. The problem is
that the system can be such that the index is configured on a local file
system, or a remote, shared one. If remote/share, the protocol is sometimes
SMB 1.0/2.0, Samba, NFS 3/4 etc. In short, we have no control on the FS type
used or OS (Linux, Windows 2003/2008, Unix, AIX, iSeries etc.).

We currently use NativeFSLockFactory, because we want to ensure the lock
file is deleted upon JVM exit, whether by clean exit, or "kill". However,
the more I read the documentation of the class, and the inline documentation
in the class, I get a feeling that this choice, in our environment, is error
prone. Some file systems do not support native FS locking, some may take too
long to obtain the lock, in which case the Lock obtain method will timeout
etc. The current problem is that the index is configured on a Samba share,
and we hit LockObtainFailedExceptions (timeouts, or Access Denied once).
When the system is configured on a Windows share (I think SMB 1.0),
everything works fine.

So I'm not sure what to do. Should we always use SimpleFSLockFactory? We
know for sure only one node in the cluster will access the shared file
system for writing (not in a given time, but always). Therefore I was
tempted to move to NoLockFactory. But this move scares me a bit, and I'd
appreciate if someone can confirm my understanding of Lock being used to
protect against multiple IndexWriters from different JVMs *only*, or does it
have other uses as well? What about multiple IndexWriters from the same JVM?

If NoLockFactory is not safe, then we can move to SimpleFSLockFactory, and
since we can guarantee by other means that only one IndexWriter attempts to
write to the index, we can IndexWriter.unlock(Dir) if the lock exists.

Also, the code of NativeFSLockFactory mentions that on NFS if not configured
properly, the lock obtaining may take 35 seconds. What sort of configuration
is needed? Just out of curiosity.

Any advice will be appreciated.

Shai

--0016e6db29965ea3550479be1c43--

From java-user-return-43858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 02 13:03:41 2009
Return-Path: <java-user-return-43858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14118 invoked from network); 2 Dec 2009 13:03:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Dec 2009 13:03:41 -0000
Received: (qmail 97936 invoked by uid 500); 2 Dec 2009 13:03:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97850 invoked by uid 500); 2 Dec 2009 13:03:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97840 invoked by uid 99); 2 Dec 2009 13:03:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Dec 2009 13:03:39 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Dec 2009 13:03:37 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 0A531D36003
	for <java-user@lucene.apache.org>; Wed,  2 Dec 2009 14:03:15 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Nj9RtKAIfbC5 for <java-user@lucene.apache.org>;
	Wed,  2 Dec 2009 14:03:08 +0100 (CET)
Received: from VEGA (unknown [134.102.249.74])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 9E37AD36002
	for <java-user@lucene.apache.org>; Wed,  2 Dec 2009 14:03:08 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <786fde50912020435l17a19577rbdf251a854757ea8@mail.gmail.com>
Subject: RE: Best Locking approach (Directory Lock)
Date: Wed, 2 Dec 2009 14:03:07 +0100
Message-ID: <DE27F3FA3D204D84BF09DB29EB0C7E31@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <786fde50912020435l17a19577rbdf251a854757ea8@mail.gmail.com>
Thread-Index: AcpzTAkMysqUTLYPTFyHOb4KjfoyHwAA0ZWw
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579

Hi Shai,

> have other uses as well? What about multiple IndexWriters from the same
> JVM?

This also needs a lock. But if it is guaranteed to only have one JVM
accessing the index, you can use an in-JVM-Locking mechanism which is
provided by
http://lucene.apache.org/java/3_0_0/api/all/org/apache/lucene/store/SingleIn
stanceLockFactory.html

> If NoLockFactory is not safe, then we can move to SimpleFSLockFactory, and
> since we can guarantee by other means that only one IndexWriter attempts
> to
> write to the index, we can IndexWriter.unlock(Dir) if the lock exists.

If you can guarantee that you only have *one* JVM and there may be multiple
IndexWriters, use above solution.

Uwe


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 02 13:24:44 2009
Return-Path: <java-user-return-43859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19770 invoked from network); 2 Dec 2009 13:24:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Dec 2009 13:24:44 -0000
Received: (qmail 28811 invoked by uid 500); 2 Dec 2009 13:24:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28719 invoked by uid 500); 2 Dec 2009 13:24:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28709 invoked by uid 99); 2 Dec 2009 13:24:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Dec 2009 13:24:41 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 74.125.78.24 as permitted sender)
Received: from [74.125.78.24] (HELO ey-out-2122.google.com) (74.125.78.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Dec 2009 13:24:39 +0000
Received: by ey-out-2122.google.com with SMTP id 22so59572eye.3
        for <java-user@lucene.apache.org>; Wed, 02 Dec 2009 05:24:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=y56HvbJp7W8FGUgi9HBVpcV+DNuaU07nUjcSxECLzr4=;
        b=aPN72o2SC9L+Bjx7/YWF57HavBtLF38vrCbBbjP/fEU8BUW93xIZlXaMq016qFU3He
         EM8+Qp1wnV7BNgbKH6QbDNJpwPScVVsm+cLNPVPR3M9ZVHM4mhtdPpvdpczxEdQOkchb
         bhX0jFEHxqiwFVtuXohs6aBpC0Sc9QsGtvgVw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=gzTqQAJlkUFQ9zQ//SWiqSScbKV1fJrnARQFORKD5ScST4zdWCehe3/suCUZ4asO87
         2rN3Sj7XMKf5BAdtpaEdOR/84d2vzwT9UIg8EfX/j1RoQIgUPtW4wakb4Yznn/rbmKkW
         9Q9PR6oN8si6XcLJc7k2/nBbMMr+Czc5xQbiw=
MIME-Version: 1.0
Received: by 10.216.89.209 with SMTP id c59mr26337wef.181.1259760258193; Wed, 
	02 Dec 2009 05:24:18 -0800 (PST)
In-Reply-To: <DE27F3FA3D204D84BF09DB29EB0C7E31@VEGA>
References: <786fde50912020435l17a19577rbdf251a854757ea8@mail.gmail.com>
	 <DE27F3FA3D204D84BF09DB29EB0C7E31@VEGA>
Date: Wed, 2 Dec 2009 15:24:18 +0200
Message-ID: <786fde50912020524k46c22518u4bb99700000f99e6@mail.gmail.com>
Subject: Re: Best Locking approach (Directory Lock)
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6dab056b118720479beca02

--0016e6dab056b118720479beca02
Content-Type: text/plain; charset=ISO-8859-1

I have multiple JVMs on different machines accessing the shared file system.
I don't really have multiple IndexWriters on the same JVM, I asked this just
out of curiosity.

So I don't understand from your reply if it's safe to use NoLockFactory, or
I should use SimpleFSLockFactory and unlock if needed?

Shai

On Wed, Dec 2, 2009 at 3:03 PM, Uwe Schindler <uwe@thetaphi.de> wrote:

> Hi Shai,
>
> > have other uses as well? What about multiple IndexWriters from the same
> > JVM?
>
> This also needs a lock. But if it is guaranteed to only have one JVM
> accessing the index, you can use an in-JVM-Locking mechanism which is
> provided by
>
> http://lucene.apache.org/java/3_0_0/api/all/org/apache/lucene/store/SingleIn
> stanceLockFactory.html<http://lucene.apache.org/java/3_0_0/api/all/org/apache/lucene/store/SingleIn%0AstanceLockFactory.html>
>
> > If NoLockFactory is not safe, then we can move to SimpleFSLockFactory,
> and
> > since we can guarantee by other means that only one IndexWriter attempts
> > to
> > write to the index, we can IndexWriter.unlock(Dir) if the lock exists.
>
> If you can guarantee that you only have *one* JVM and there may be multiple
> IndexWriters, use above solution.
>
> Uwe
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6dab056b118720479beca02--

From java-user-return-43860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 02 13:35:08 2009
Return-Path: <java-user-return-43860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25392 invoked from network); 2 Dec 2009 13:35:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Dec 2009 13:35:08 -0000
Received: (qmail 41067 invoked by uid 500); 2 Dec 2009 13:35:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40990 invoked by uid 500); 2 Dec 2009 13:35:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40980 invoked by uid 99); 2 Dec 2009 13:35:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Dec 2009 13:35:05 +0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.25 as permitted sender)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Dec 2009 13:34:55 +0000
Received: from compute2.internal (compute2.internal [10.202.2.42])
	by gateway1.messagingengine.com (Postfix) with ESMTP id 6D988C5FA3
	for <java-user@lucene.apache.org>; Wed,  2 Dec 2009 08:34:34 -0500 (EST)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by compute2.internal (MEProxy); Wed, 02 Dec 2009 08:34:34 -0500
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:subject:content-type:content-transfer-encoding; s=smtpout; bh=gOto76zTWRFkheGPRXqPYXYIAXc=; b=jYT5Irxok7rjjodNo4Sp8XPeODcqmT4sZ21G90bfjlStbzXr6ZFrtyiYn23CestxvR20Xi1BJHbc6P+NMU3Y3ETc57IFXh+wyvTN69ZQPXTq0CCkRS6Ba2PGANTs6+JXpC5anGWJfYHcvURv9zXGD5wSHOHhRUZFfC4SoNNhiCA=
X-Sasl-enc: 4djeUvlYTbiBx+2PNDTXC9Auu71ex9mhtMMYWaT0HWCM 1259760873
Received: from macbook.lan (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPA id A7F8349FE4C
	for <java-user@lucene.apache.org>; Wed,  2 Dec 2009 08:34:32 -0500 (EST)
Message-ID: <4B166CDB.6010204@fastmail.fm>
Date: Wed, 02 Dec 2009 13:34:19 +0000
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Thunderbird 2.0.0.23 (Macintosh/20090812)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: java.lang.NegativeArraySizeException on searching using Integer.MAX_VALUE
 for number of hits
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, just upgraded my code to Lucene 3.0 and on one simple search I get 
the following stacktrace when I pass Integer.MAX_VALUE to the 
Searcher.search(Query query,int n) method, if I change the value to 1000 
it works okay.


java.lang.NegativeArraySizeException
    at 
org.apache.lucene.util.PriorityQueue.initialize(PriorityQueue.java:90)
    at org.apache.lucene.search.HitQueue.<init>(HitQueue.java:67)
    at 
org.apache.lucene.search.TopScoreDocCollector.<init>(TopScoreDocCollector.java:117)
    at 
org.apache.lucene.search.TopScoreDocCollector.<init>(TopScoreDocCollector.java:37)
    at 
org.apache.lucene.search.TopScoreDocCollector$InOrderTopScoreDocCollector.<init>(TopScoreDocCollector.java:42)
    at 
org.apache.lucene.search.TopScoreDocCollector$InOrderTopScoreDocCollector.<init>(TopScoreDocCollector.java:40)
    at 
org.apache.lucene.search.TopScoreDocCollector.create(TopScoreDocCollector.java:104)
    at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:167)
    at org.apache.lucene.search.Searcher.search(Searcher.java:98)
    at org.apache.lucene.search.Searcher.search(Searcher.java:108)

Now I know I should specify a max hits value, but I really want to 
return all matches , and regardless it shouldn't throw this exception, 
and in other search code which also has specifies Integer.MAX_VALUE the 
exception is not occurring.


thanks Paul



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 02 13:46:21 2009
Return-Path: <java-user-return-43861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30615 invoked from network); 2 Dec 2009 13:46:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Dec 2009 13:46:21 -0000
Received: (qmail 50857 invoked by uid 500); 2 Dec 2009 13:46:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50759 invoked by uid 500); 2 Dec 2009 13:46:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50749 invoked by uid 99); 2 Dec 2009 13:46:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Dec 2009 13:46:19 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Dec 2009 13:46:16 +0000
Received: by yxe30 with SMTP id 30so162563yxe.29
        for <java-user@lucene.apache.org>; Wed, 02 Dec 2009 05:45:55 -0800 (PST)
MIME-Version: 1.0
Received: by 10.151.25.7 with SMTP id c7mr333157ybj.236.1259761555034; Wed, 02 
	Dec 2009 05:45:55 -0800 (PST)
In-Reply-To: <786fde50912020524k46c22518u4bb99700000f99e6@mail.gmail.com>
References: <786fde50912020435l17a19577rbdf251a854757ea8@mail.gmail.com>
	 <DE27F3FA3D204D84BF09DB29EB0C7E31@VEGA>
	 <786fde50912020524k46c22518u4bb99700000f99e6@mail.gmail.com>
Date: Wed, 2 Dec 2009 08:45:55 -0500
Message-ID: <9ac0c6aa0912020545h1cd98d1x8ecef4a9523893f9@mail.gmail.com>
Subject: Re: Best Locking approach (Directory Lock)
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Currently the sole usage of the LockFactory within Lucene is for the
write.lock, ie, to prevent more than one writer (= IndexWriter, or,
IndexReader trying to do deletions or set norms) from being open on
the index at once.

If your app has external mechanisms that can ensure, without fail,
that only one writer will be open at once, then NoLockFactory is
perfectly safe.

But you have to be certain: one slipup will quickly corrupt the index.
 IndexWriters are like the male Siamese fighting fish (betta fish) --
they will fight to the death [of the index]!

Mike

On Wed, Dec 2, 2009 at 8:24 AM, Shai Erera <serera@gmail.com> wrote:
> I have multiple JVMs on different machines accessing the shared file system.
> I don't really have multiple IndexWriters on the same JVM, I asked this just
> out of curiosity.
>
> So I don't understand from your reply if it's safe to use NoLockFactory, or
> I should use SimpleFSLockFactory and unlock if needed?
>
> Shai
>
> On Wed, Dec 2, 2009 at 3:03 PM, Uwe Schindler <uwe@thetaphi.de> wrote:
>
>> Hi Shai,
>>
>> > have other uses as well? What about multiple IndexWriters from the same
>> > JVM?
>>
>> This also needs a lock. But if it is guaranteed to only have one JVM
>> accessing the index, you can use an in-JVM-Locking mechanism which is
>> provided by
>>
>> http://lucene.apache.org/java/3_0_0/api/all/org/apache/lucene/store/SingleIn
>> stanceLockFactory.html<http://lucene.apache.org/java/3_0_0/api/all/org/apache/lucene/store/SingleIn%0AstanceLockFactory.html>
>>
>> > If NoLockFactory is not safe, then we can move to SimpleFSLockFactory,
>> and
>> > since we can guarantee by other means that only one IndexWriter attempts
>> > to
>> > write to the index, we can IndexWriter.unlock(Dir) if the lock exists.
>>
>> If you can guarantee that you only have *one* JVM and there may be multiple
>> IndexWriters, use above solution.
>>
>> Uwe
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 02 13:52:20 2009
Return-Path: <java-user-return-43862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33534 invoked from network); 2 Dec 2009 13:52:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Dec 2009 13:52:20 -0000
Received: (qmail 59663 invoked by uid 500); 2 Dec 2009 13:52:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59578 invoked by uid 500); 2 Dec 2009 13:52:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59568 invoked by uid 99); 2 Dec 2009 13:52:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Dec 2009 13:52:18 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 209.85.219.225 as permitted sender)
Received: from [209.85.219.225] (HELO mail-ew0-f225.google.com) (209.85.219.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Dec 2009 13:52:15 +0000
Received: by ewy25 with SMTP id 25so286712ewy.5
        for <java-user@lucene.apache.org>; Wed, 02 Dec 2009 05:51:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=ZDuoP6N6yhQjMLV2+iPwrwhAlKRw3ZKLhWNeGYU1I1M=;
        b=O7C+UmSaCR8ioKrACESHnd9/h8/5rNC1tc+WqOtrMAei4Xgh8wXI2N3axnXGttdvg2
         tX/hjfLiNeFP5uPAw+Dg5httbx14somxGM3thtwf5Xpta2/vSgkR7DR+NGTDQf9pU0in
         4V+M6qY78f9pSwFEeddccycXKOfsLoEczPdvo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=vrAberc/e3jmKXGCuF+/41lbbSRiqYjXPTN1kRJsFcp56VFCUdFpIHTVw6PkS0lHfb
         0z80sDiRlHpXoaf9VwFbDQWZK+wsuDNoMoWrLnLBYnGN0WTBoBHFNUYKMdiVV3mkePUV
         1jq5ievRGGZroMHkASpOvKE/PRukjVZn1146M=
MIME-Version: 1.0
Received: by 10.216.87.79 with SMTP id x57mr42755wee.83.1259761913339; Wed, 02 
	Dec 2009 05:51:53 -0800 (PST)
In-Reply-To: <9ac0c6aa0912020545h1cd98d1x8ecef4a9523893f9@mail.gmail.com>
References: <786fde50912020435l17a19577rbdf251a854757ea8@mail.gmail.com>
	 <DE27F3FA3D204D84BF09DB29EB0C7E31@VEGA>
	 <786fde50912020524k46c22518u4bb99700000f99e6@mail.gmail.com>
	 <9ac0c6aa0912020545h1cd98d1x8ecef4a9523893f9@mail.gmail.com>
Date: Wed, 2 Dec 2009 15:51:53 +0200
Message-ID: <786fde50912020551k2e9940b1qd66337c8c4498727@mail.gmail.com>
Subject: Re: Best Locking approach (Directory Lock)
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d7dfa7589f1a0479bf2deb

--0016e6d7dfa7589f1a0479bf2deb
Content-Type: text/plain; charset=ISO-8859-1

Thanks Mike.

I'm pretty sure about our mechanism to control one JVM opening the index for
write, but bugs can always be discovered. That's why we used
NativeFSLockFactory - because even if the JVM is killed, the lock file
should be removed. So if we do find the lock, it's fishy (Siamese or not).
But if I use SimpleFSLockFactory and find the lock, it will be harder for me
to tell if it's because of JVM kill, or because there is a bug and another
IndexWriter opens the index for write.

I think I'll go w/ NoLockFactory then ...

Shai

On Wed, Dec 2, 2009 at 3:45 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> Currently the sole usage of the LockFactory within Lucene is for the
> write.lock, ie, to prevent more than one writer (= IndexWriter, or,
> IndexReader trying to do deletions or set norms) from being open on
> the index at once.
>
> If your app has external mechanisms that can ensure, without fail,
> that only one writer will be open at once, then NoLockFactory is
> perfectly safe.
>
> But you have to be certain: one slipup will quickly corrupt the index.
>  IndexWriters are like the male Siamese fighting fish (betta fish) --
> they will fight to the death [of the index]!
>
> Mike
>
> On Wed, Dec 2, 2009 at 8:24 AM, Shai Erera <serera@gmail.com> wrote:
> > I have multiple JVMs on different machines accessing the shared file
> system.
> > I don't really have multiple IndexWriters on the same JVM, I asked this
> just
> > out of curiosity.
> >
> > So I don't understand from your reply if it's safe to use NoLockFactory,
> or
> > I should use SimpleFSLockFactory and unlock if needed?
> >
> > Shai
> >
> > On Wed, Dec 2, 2009 at 3:03 PM, Uwe Schindler <uwe@thetaphi.de> wrote:
> >
> >> Hi Shai,
> >>
> >> > have other uses as well? What about multiple IndexWriters from the
> same
> >> > JVM?
> >>
> >> This also needs a lock. But if it is guaranteed to only have one JVM
> >> accessing the index, you can use an in-JVM-Locking mechanism which is
> >> provided by
> >>
> >>
> http://lucene.apache.org/java/3_0_0/api/all/org/apache/lucene/store/SingleIn
> >> stanceLockFactory.html<
> http://lucene.apache.org/java/3_0_0/api/all/org/apache/lucene/store/SingleIn%0AstanceLockFactory.html
> >
> >>
> >> > If NoLockFactory is not safe, then we can move to SimpleFSLockFactory,
> >> and
> >> > since we can guarantee by other means that only one IndexWriter
> attempts
> >> > to
> >> > write to the index, we can IndexWriter.unlock(Dir) if the lock exists.
> >>
> >> If you can guarantee that you only have *one* JVM and there may be
> multiple
> >> IndexWriters, use above solution.
> >>
> >> Uwe
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6d7dfa7589f1a0479bf2deb--

From java-user-return-43863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 02 14:51:18 2009
Return-Path: <java-user-return-43863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61548 invoked from network); 2 Dec 2009 14:51:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Dec 2009 14:51:18 -0000
Received: (qmail 34209 invoked by uid 500); 2 Dec 2009 14:51:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34116 invoked by uid 500); 2 Dec 2009 14:51:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34106 invoked by uid 99); 2 Dec 2009 14:51:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Dec 2009 14:51:15 +0000
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Dec 2009 14:51:06 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NFqXV-0002Ba-A0
	for java-user@lucene.apache.org; Wed, 02 Dec 2009 06:50:45 -0800
Message-ID: <26610142.post@talk.nabble.com>
Date: Wed, 2 Dec 2009 06:50:45 -0800 (PST)
From: archibal <bugpb60@hotmail.com>
To: java-user@lucene.apache.org
Subject: About Lucene ...
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: bugpb60@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello all,

I'm actually looking for a software who can search in a computer (and on
windows network drive) all files and the contents of files based on indexing
method.

I have few questions about lucene :

- Lucene engine does index only the contents ? or is it possible to index
the name of folders, name of files and their contents ?
-Lucene is an API ? 
-optionnally i want to have a central server which index all data (name of
files, folders and file content) on network and i would like to connect via
a browser on the central server ? are there project who does this or
something like ?

Thanks in advance
Best Regards

Patrick







-- 
View this message in context: http://old.nabble.com/About-Lucene-...-tp26610142p26610142.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 02 15:01:03 2009
Return-Path: <java-user-return-43864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64693 invoked from network); 2 Dec 2009 15:01:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Dec 2009 15:01:02 -0000
Received: (qmail 54854 invoked by uid 500); 2 Dec 2009 15:01:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54776 invoked by uid 500); 2 Dec 2009 15:01:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54766 invoked by uid 99); 2 Dec 2009 15:01:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Dec 2009 15:01:00 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Dec 2009 15:00:49 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 192F1D36003;
	Wed,  2 Dec 2009 16:00:29 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id FILep6zkwlBg; Wed,  2 Dec 2009 16:00:16 +0100 (CET)
Received: from VEGA (unknown [134.102.249.74])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 818BDD36002;
	Wed,  2 Dec 2009 16:00:16 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>,
	<paul_t100@fastmail.fm>
References: <4B166CDB.6010204@fastmail.fm>
Subject: RE: java.lang.NegativeArraySizeException on searching using Integer.MAX_VALUE for number of hits
Date: Wed, 2 Dec 2009 16:00:15 +0100
Message-ID: <1F6EE7A063094F1DB572BA6C3D040CBA@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <4B166CDB.6010204@fastmail.fm>
Thread-Index: AcpzVE0DJUHEc8UNRvqvY+D0UGAi6AACwsdQ
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

If you want to have all results, you do something wrong. :-)

Full text engines like lucene are made for returning only top-ranking
results. So if you use TopDocs results you must know before how many TopDocs
you want to have. Internally Lucene works with PriorityQueues that filter
the top ranking results.

If you want to have all results, you should not sort them by ranking, which
is not needed then). In this case, implement an own Collector and collect
the results for yourself into e.g. ArrayLists and so on (but they are
unsorted then).

Another possibility (if you really need the docs in relevance order) is to
run the search 2 times:
First only collect the top n=100 results. The TopDocs instance also returns
the max results. Using that number you can re-run the query to get all
ranked results - but this is generally a bad approach, because PQs get
slower for too many results, where order is not relevant.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Paul Taylor [mailto:paul_t100@fastmail.fm]
> Sent: Wednesday, December 02, 2009 2:34 PM
> To: java-user@lucene.apache.org
> Subject: java.lang.NegativeArraySizeException on searching using
> Integer.MAX_VALUE for number of hits
> 
> Hi, just upgraded my code to Lucene 3.0 and on one simple search I get
> the following stacktrace when I pass Integer.MAX_VALUE to the
> Searcher.search(Query query,int n) method, if I change the value to 1000
> it works okay.
> 
> 
> java.lang.NegativeArraySizeException
>     at
> org.apache.lucene.util.PriorityQueue.initialize(PriorityQueue.java:90)
>     at org.apache.lucene.search.HitQueue.<init>(HitQueue.java:67)
>     at
> org.apache.lucene.search.TopScoreDocCollector.<init>(TopScoreDocCollector.
> java:117)
>     at
> org.apache.lucene.search.TopScoreDocCollector.<init>(TopScoreDocCollector.
> java:37)
>     at
> org.apache.lucene.search.TopScoreDocCollector$InOrderTopScoreDocCollector.
> <init>(TopScoreDocCollector.java:42)
>     at
> org.apache.lucene.search.TopScoreDocCollector$InOrderTopScoreDocCollector.
> <init>(TopScoreDocCollector.java:40)
>     at
> org.apache.lucene.search.TopScoreDocCollector.create(TopScoreDocCollector.
> java:104)
>     at
> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:167)
>     at org.apache.lucene.search.Searcher.search(Searcher.java:98)
>     at org.apache.lucene.search.Searcher.search(Searcher.java:108)
> 
> Now I know I should specify a max hits value, but I really want to
> return all matches , and regardless it shouldn't throw this exception,
> and in other search code which also has specifies Integer.MAX_VALUE the
> exception is not occurring.
> 
> 
> thanks Paul
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 02 15:03:37 2009
Return-Path: <java-user-return-43865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65785 invoked from network); 2 Dec 2009 15:03:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Dec 2009 15:03:36 -0000
Received: (qmail 60365 invoked by uid 500); 2 Dec 2009 15:03:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60316 invoked by uid 500); 2 Dec 2009 15:03:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60279 invoked by uid 99); 2 Dec 2009 15:03:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Dec 2009 15:03:34 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.220.228 as permitted sender)
Received: from [209.85.220.228] (HELO mail-fx0-f228.google.com) (209.85.220.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Dec 2009 15:03:31 +0000
Received: by fxm28 with SMTP id 28so315222fxm.5
        for <java-user@lucene.apache.org>; Wed, 02 Dec 2009 07:03:09 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=DHw4HeLSjfAzf1JslYo/BVXOeKwjjwl6RfR5bo7jnvk=;
        b=f+ls4pVWCJOngJBy8HAYQFNzvqaZi07b5Iz2KFZjlRTzvEVkj6j8e82juGmeaSoaOB
         Fa3igUou1jGMTkl7eWzPHks1Tn3cl3qOn0Iifml7Ji9m7PEasGJLdY/PnKDmx/YA6Xs7
         6QAkv7fFV6CmvRTNIt93jZsdNlYj1Hzcwph6s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=QiJfFuHCkr9GjOl5/iYUnY2PYaw5uo1F+Wsh4A3DPURSDWWdkNwmKtt/d2bFBOQW3s
         4VFY255LLhUUmCWfhyEppiKC6HozsB7eTV5OWsP9O1Zvsfdij/TYf5AbV55KK8yDuzIS
         IehzKPewFEOkgiUeCSTTpujWmBwjbI7FDPBXw=
MIME-Version: 1.0
Received: by 10.216.87.14 with SMTP id x14mr67302wee.127.1259766189292; Wed, 
	02 Dec 2009 07:03:09 -0800 (PST)
In-Reply-To: <26610142.post@talk.nabble.com>
References: <26610142.post@talk.nabble.com>
Date: Wed, 2 Dec 2009 10:03:09 -0500
Message-ID: <359a92830912020703w6e314f72m655fc179b7083d14@mail.gmail.com>
Subject: Re: About Lucene ...
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d7dff8367b8c0479c02c3d

--0016e6d7dff8367b8c0479c02c3d
Content-Type: text/plain; charset=ISO-8859-1

Yes, Lucene is an API. You'd have to write a significant amount
of code to accomplish what you want. The Lucene demo would
be a good place to start.

Lucene by itself doesn't index anything. You have to design a
schema, feed it data and search that data. You can make it
index file names, dates, sizes, whatever by coding appropriately.

Lucene has nothing to do with a web presentation layer, so you'd
also have to write a web application to have  a web interface.

I'm not familiar with any out-of-the-box products that do what you
want, but then I haven't looked.

HTH
Erick

On Wed, Dec 2, 2009 at 9:50 AM, archibal <bugpb60@hotmail.com> wrote:

>
> Hello all,
>
> I'm actually looking for a software who can search in a computer (and on
> windows network drive) all files and the contents of files based on
> indexing
> method.
>
> I have few questions about lucene :
>
> - Lucene engine does index only the contents ? or is it possible to index
> the name of folders, name of files and their contents ?
> -Lucene is an API ?
> -optionnally i want to have a central server which index all data (name of
> files, folders and file content) on network and i would like to connect via
> a browser on the central server ? are there project who does this or
> something like ?
>
> Thanks in advance
> Best Regards
>
> Patrick
>
>
>
>
>
>
>
> --
> View this message in context:
> http://old.nabble.com/About-Lucene-...-tp26610142p26610142.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6d7dff8367b8c0479c02c3d--

From java-user-return-43866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 02 15:11:18 2009
Return-Path: <java-user-return-43866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67488 invoked from network); 2 Dec 2009 15:11:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Dec 2009 15:11:18 -0000
Received: (qmail 68393 invoked by uid 500); 2 Dec 2009 15:11:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68328 invoked by uid 500); 2 Dec 2009 15:11:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68248 invoked by uid 99); 2 Dec 2009 15:11:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Dec 2009 15:11:16 +0000
X-ASF-Spam-Status: No, hits=-2.2 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shashi.mit@gmail.com designates 209.85.220.228 as permitted sender)
Received: from [209.85.220.228] (HELO mail-fx0-f228.google.com) (209.85.220.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Dec 2009 15:11:13 +0000
Received: by fxm28 with SMTP id 28so324787fxm.5
        for <java-user@lucene.apache.org>; Wed, 02 Dec 2009 07:10:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:received:in-reply-to
         :references:from:date:x-google-sender-auth:message-id:subject:to
         :content-type;
        bh=VEtB6udGsOWzUi9Djn19c9NItds+VPhrLz6EPNIVcHY=;
        b=M/+VKodJozfqYzScceSGSsy3ocrPCWEOzfBzfW4QdgP2CWkrkodcB48UlS7IuvewpN
         Wp2aYyUzH6guWsGnbZlSkxXGNI6xYHxZd3AEnkQvtNSEzrNVnlph1v79zYnlTYkeQ9Fz
         yQ5OWmPRJ7DFEsGkGRZHVxbqfTuWUsGop6UnU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:in-reply-to:references:from:date
         :x-google-sender-auth:message-id:subject:to:content-type;
        b=uW67ouuNLUOhvKuqax1BLwUauQBZBaWEOPCQ60AY/W+bR30oW6bGHHP6wJyMeAjhCB
         wLHUaR4GUDHr/N6iOX/h4NwdK7/JfLMp5Wi8+fjLKXhP0ZVAy88TOwglLJ7IWi/ZlPtd
         ChdVONy3qCPXQrdes7mHT9DKImjkRnfcJOvKM=
MIME-Version: 1.0
Sender: shashi.mit@gmail.com
Received: by 10.216.86.129 with SMTP id w1mr74065wee.145.1259766647186; Wed, 
	02 Dec 2009 07:10:47 -0800 (PST)
In-Reply-To: <26610142.post@talk.nabble.com>
References: <26610142.post@talk.nabble.com>
From: Shashi Kant <skant@sloan.mit.edu>
Date: Wed, 2 Dec 2009 10:10:27 -0500
X-Google-Sender-Auth: 6c7c16effa420bc5
Message-ID: <4d19a3630912020710l5de65d87u1272a5433ba736d9@mail.gmail.com>
Subject: Re: About Lucene ...
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d7854581669c0479c0472d

--0016e6d7854581669c0479c0472d
Content-Type: text/plain; charset=ISO-8859-1

This forum is probably not the best place to ask this question, since this
is Lucene developers/users forum. If you want to write a tool, then this is
the place is to be. If you want an ready tool, one I am aware of  is
searchmyfiles.exe from Nirsoft.
http://www.nirsoft.net/utils/search_my_files.html

Caveat: Neither have I used it nor do I endorse that tool. But I would guess
there would be plenty of commercial & F/OSS tools that do most or all what
you want. A bit of googling should get you there.


On Wed, Dec 2, 2009 at 9:50 AM, archibal <bugpb60@hotmail.com> wrote:

>
> Hello all,
>
> I'm actually looking for a software who can search in a computer (and on
> windows network drive) all files and the contents of files based on
> indexing
> method.
>
> I have few questions about lucene :
>
> - Lucene engine does index only the contents ? or is it possible to index
> the name of folders, name of files and their contents ?
> -Lucene is an API ?
> -optionnally i want to have a central server which index all data (name of
> files, folders and file content) on network and i would like to connect via
> a browser on the central server ? are there project who does this or
> something like ?
>
> Thanks in advance
> Best Regards
>
> Patrick
>
>
>
>
>
>
>
> --
> View this message in context:
> http://old.nabble.com/About-Lucene-...-tp26610142p26610142.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6d7854581669c0479c0472d--

From java-user-return-43867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 02 15:19:13 2009
Return-Path: <java-user-return-43867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69056 invoked from network); 2 Dec 2009 15:19:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Dec 2009 15:19:13 -0000
Received: (qmail 83874 invoked by uid 500); 2 Dec 2009 15:19:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83790 invoked by uid 500); 2 Dec 2009 15:19:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83780 invoked by uid 99); 2 Dec 2009 15:19:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Dec 2009 15:19:10 +0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.25 as permitted sender)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Dec 2009 15:19:00 +0000
Received: from compute2.internal (compute2.internal [10.202.2.42])
	by gateway1.messagingengine.com (Postfix) with ESMTP id 94CB6C5E6F;
	Wed,  2 Dec 2009 10:18:39 -0500 (EST)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by compute2.internal (MEProxy); Wed, 02 Dec 2009 10:18:39 -0500
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:cc:subject:references:in-reply-to:content-type:content-transfer-encoding; s=smtpout; bh=4lRwIImua+cKGaU7iwl/BYgGsAs=; b=Xve/HO/Mvf4HYd84rhBYLHRB5aHswl4k3H/HvVlN36RFkkFbmPbDICJrilgXLBvq8NmqgSmFi3HSu1QYpdHh8f/wQvjAEyc1c3axYUJL1pATwANrXsVZ4izObWUQnv2yFeJ9jW1dsJYCmdc1QbHSzv7v1H+RwuBfk4hz93GU4n0=
X-Sasl-enc: UQvpZgpnNP7z+Ki0wDn/bCvx4LtnOaBhTjmVAtr8hf3y 1259767118
Received: from macbook.lan (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPA id 699FB49FF0A;
	Wed,  2 Dec 2009 10:18:38 -0500 (EST)
Message-ID: <4B16854C.5030603@fastmail.fm>
Date: Wed, 02 Dec 2009 15:18:36 +0000
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Thunderbird 2.0.0.23 (Macintosh/20090812)
MIME-Version: 1.0
To: Uwe Schindler <uwe@thetaphi.de>
CC: java-user@lucene.apache.org
Subject: Re: java.lang.NegativeArraySizeException on searching using Integer.MAX_VALUE
 for number of hits
References: <4B166CDB.6010204@fastmail.fm> <1F6EE7A063094F1DB572BA6C3D040CBA@VEGA>
In-Reply-To: <1F6EE7A063094F1DB572BA6C3D040CBA@VEGA>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Uwe Schindler wrote:
> If you want to have all results, you do something wrong. :-)
>
> Full text engines like lucene are made for returning only top-ranking
> results. So if you use TopDocs results you must know before how many TopDocs
> you want to have. Internally Lucene works with PriorityQueues that filter
> the top ranking results.
>
> If you want to have all results, you should not sort them by ranking, which
> is not needed then). In this case, implement an own Collector and collect
> the results for yourself into e.g. ArrayLists and so on (but they are
> unsorted then).
>
> Another possibility (if you really need the docs in relevance order) is to
> run the search 2 times:
> First only collect the top n=100 results. The TopDocs instance also returns
> the max results. Using that number you can re-run the query to get all
> ranked results - but this is generally a bad approach, because PQs get
> slower for too many results, where order is not relevant.
Yes thats all fine and is my long term approach, but  isn't there a bug 
here, (in the case that is  failing there is only one actual result ), 
you haven't really addressed why I am geting this exception


Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 02 15:21:07 2009
Return-Path: <java-user-return-43868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69514 invoked from network); 2 Dec 2009 15:21:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Dec 2009 15:21:07 -0000
Received: (qmail 88385 invoked by uid 500); 2 Dec 2009 15:21:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88329 invoked by uid 500); 2 Dec 2009 15:21:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88319 invoked by uid 99); 2 Dec 2009 15:21:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Dec 2009 15:21:05 +0000
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [85.158.139.19] (HELO mail178.messagelabs.com) (85.158.139.19)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Dec 2009 15:20:54 +0000
X-VirusChecked: Checked
X-Env-Sender: wzzelfzzel@abas.de
X-Msg-Ref: server-12.tower-178.messagelabs.com!1259767233!58476101!1
X-StarScan-Version: 6.2.4; banners=-,-,-
X-Originating-IP: [212.202.226.202]
Received: (qmail 16558 invoked from network); 2 Dec 2009 15:20:34 -0000
Received: from gate.abas.de (HELO gate.abas.de) (212.202.226.202)
  by server-12.tower-178.messagelabs.com with DHE-RSA-AES256-SHA encrypted SMTP; 2 Dec 2009 15:20:34 -0000
Received: from gate.abas.de (localhost [127.0.0.1])
	by gate.abas.de (8.14.3/8.14.3) with ESMTP id nB2FKXPA005307
	for <java-user@lucene.apache.org>; Wed, 2 Dec 2009 16:20:33 +0100 (CET)
Received: (from localhost) by gate.abas.de (MSCAN) id 3/gate.abas.de/smtp-gw/mscan; Wed Dec  2 16:20:33 2009
From: Stefan Trcek <wzzelfzzel@abas.de>
To: java-user@lucene.apache.org
Subject: Re: About Lucene ...
Date: Wed, 2 Dec 2009 16:20:28 +0100
User-Agent: KMail/1.9.10
References: <26610142.post@talk.nabble.com>
In-Reply-To: <26610142.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-ID: <200912021620.29231.wzzelfzzel@abas.de>
X-ABAS-MAIL-MARK: added by mailmarker.abas.de
X-Virus-Checked: Checked by ClamAV on apache.org

On Wednesday 02 December 2009 15:50:45 archibal wrote:
>
> -optionnally i want to have a central server which index all data
> (name of files, folders and file content) on network and i would like
> to connect via a browser on the central server ? are there project
> who does this or something like ?

You may have a look at
    regain http://regain.murfman.de/wiki/doku.php?id=start
    hounder http://www.hounder.org/index.html
I never used these products, so I can't tell you anything about 'em.

Stefan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 02 15:26:47 2009
Return-Path: <java-user-return-43869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71031 invoked from network); 2 Dec 2009 15:26:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Dec 2009 15:26:47 -0000
Received: (qmail 380 invoked by uid 500); 2 Dec 2009 15:26:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 323 invoked by uid 500); 2 Dec 2009 15:26:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 235 invoked by uid 99); 2 Dec 2009 15:26:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Dec 2009 15:26:45 +0000
X-ASF-Spam-Status: No, hits=-4.6 required=5.0
	tests=AWL,BAYES_00,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [85.158.139.211] (HELO mail206.messagelabs.com) (85.158.139.211)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Dec 2009 15:26:41 +0000
X-VirusChecked: Checked
X-Env-Sender: wzzelfzzel@abas.de
X-Msg-Ref: server-11.tower-206.messagelabs.com!1259767578!6249098!1
X-StarScan-Version: 6.2.4; banners=-,-,-
X-Originating-IP: [212.202.226.202]
Received: (qmail 4855 invoked from network); 2 Dec 2009 15:26:19 -0000
Received: from gate.abas.de (HELO gate.abas.de) (212.202.226.202)
  by server-11.tower-206.messagelabs.com with DHE-RSA-AES256-SHA encrypted SMTP; 2 Dec 2009 15:26:19 -0000
Received: from gate.abas.de (localhost [127.0.0.1])
	by gate.abas.de (8.14.3/8.14.3) with ESMTP id nB2FQIuX032708
	for <java-user@lucene.apache.org>; Wed, 2 Dec 2009 16:26:18 +0100 (CET)
Received: (from localhost) by gate.abas.de (MSCAN) id 3/gate.abas.de/smtp-gw/mscan; Wed Dec  2 16:26:18 2009
From: Stefan Trcek <wzzelfzzel@abas.de>
To: java-user@lucene.apache.org
Subject: Re: About Lucene ...
Date: Wed, 2 Dec 2009 16:26:06 +0100
User-Agent: KMail/1.9.10
References: <26610142.post@talk.nabble.com> <200912021620.29231.wzzelfzzel@abas.de>
In-Reply-To: <200912021620.29231.wzzelfzzel@abas.de>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-ID: <200912021626.06754.wzzelfzzel@abas.de>
X-ABAS-MAIL-MARK: added by mailmarker.abas.de

On Wednesday 02 December 2009 16:20:28 Stefan Trcek wrote:
> On Wednesday 02 December 2009 15:50:45 archibal wrote:
> > -optionnally i want to have a central server which index all data
> > (name of files, folders and file content) on network and i would
> > like to connect via a browser on the central server ? are there
> > project who does this or something like ?
>
> You may have a look at
>     regain http://regain.murfman.de/wiki/doku.php?id=start
>     hounder http://www.hounder.org/index.html
> I never used these products, so I can't tell you anything about 'em.

And of course nutch, but I guess you found that already.

Stefan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 02 17:44:38 2009
Return-Path: <java-user-return-43870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29804 invoked from network); 2 Dec 2009 17:44:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Dec 2009 17:44:37 -0000
Received: (qmail 54658 invoked by uid 500); 2 Dec 2009 17:44:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54573 invoked by uid 500); 2 Dec 2009 17:44:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54563 invoked by uid 99); 2 Dec 2009 17:44:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Dec 2009 17:44:35 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of eirbjo@gmail.com designates 209.85.220.228 as permitted sender)
Received: from [209.85.220.228] (HELO mail-fx0-f228.google.com) (209.85.220.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Dec 2009 17:44:25 +0000
Received: by fxm28 with SMTP id 28so511671fxm.5
        for <java-user@lucene.apache.org>; Wed, 02 Dec 2009 09:44:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=/vomy9pAWEFHY3Z8go6TcWI2OXSTdkzaPEgKr15tyIs=;
        b=pYr4X6XYOBsm66g+S0jPdZTkr2djUzPr48pbpfEYBp+YaYJaMN/lFSUZ4NF2aR/pbV
         k0sbTSMtgjwiNsqeqcsNgDzK/WpYZ6TRgnvzHMLn/vp+BNwrMgQcDo1gLEC7kpN07Hp1
         qaXL8RPegZAoVsvpZtDSW5A+Qi1GqYuJQuafU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=BrdT++cHazub/0i5QmoFTAln5xBQdsmsKJroEZ8r2GMjKm/v0dlPyvSJMu7rp6ZDT8
         XJ8Au6yyzx7EFbPY4hMzsGctoVXB2FfeMAAhXeVwlXIaTl6XZM2JfJy/2sdh6ftEBFvO
         Wves8g7y/uR3nC/U7OBrfWFvk6ix1VbG+aldM=
MIME-Version: 1.0
Received: by 10.216.86.85 with SMTP id v63mr136617wee.32.1259775845227; Wed, 
	02 Dec 2009 09:44:05 -0800 (PST)
Date: Wed, 2 Dec 2009 18:44:05 +0100
Message-ID: <34660cca0912020944n2b6b7965i6753f1b47b8f4820@mail.gmail.com>
Subject: Potential leak of file resources in SpellChecker
From: =?ISO-8859-1?Q?Eirik_Bj=F8rsn=F8s?= <eirbjo@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/mixed; boundary=0016e6d9a057c05cf20479c26bd6
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d9a057c05cf20479c26bd6
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I'm using SpellChecker (in Lucene contrib) to help users of SVNSearch
who can't type right:

http://svnsearch.org/svnsearch/repos/ASF/search?logMessage=lusene

SpellChecker works very well for my purpose, but I've encountered a
possible file resource leak issue:

I can't find any way to close the IndexSearcher (and IndexReader) that
is being used by SpellChecker internally.

I've worked around this issue by keeping a single SpellChecker open
for each repository, but I'd really like to be able to close it and
reopen it on demand without leaking file descriptors.

Could we add a close() method to SpellChecker that will close the
IndexSearcher and null the reference to it? And perhaps add some code
that reopens the searcher if the reference to it is null? Or would
that break thread safety of SpellChecker?

The attached patch adds a close method but leaves it to the user to
call setSpellIndex to reopen the searcher.

Thanks,
Eirik.


--0016e6d9a057c05cf20479c26bd6
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--0016e6d9a057c05cf20479c26bd6--

From java-user-return-43871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 02 19:15:14 2009
Return-Path: <java-user-return-43871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82265 invoked from network); 2 Dec 2009 19:15:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Dec 2009 19:15:14 -0000
Received: (qmail 6464 invoked by uid 500); 2 Dec 2009 19:15:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6318 invoked by uid 500); 2 Dec 2009 19:15:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6257 invoked by uid 99); 2 Dec 2009 19:15:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Dec 2009 19:15:08 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erik.hatcher@gmail.com designates 209.85.212.179 as permitted sender)
Received: from [209.85.212.179] (HELO mail-vw0-f179.google.com) (209.85.212.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Dec 2009 19:14:58 +0000
Received: by vws9 with SMTP id 9so201651vws.20
        for <multiple recipients>; Wed, 02 Dec 2009 11:14:37 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :content-type:content-transfer-encoding:mime-version:subject:date
         :x-mailer;
        bh=08gzk/LWSC6cnx2PzkhQ8kOW1q1ehOBAOsIR1fGNfmE=;
        b=QRVQytIvjqLT8QKdWqomkdVMlq/MjBSoxx2qCXamifMXGt61ay/RcITYWKoIigH+nu
         7bCd1oq15EVSyZ+AYRnLorM7/1z1HI+3XcOdvkdPy1JiMQyS1fkdjMsBfShfaA7uQMg6
         JibJQbZXLa/ID4vb038Ch2gwd0qpTNzVMlEiM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:content-type:content-transfer-encoding
         :mime-version:subject:date:x-mailer;
        b=MkxcIaASMGfVvI65oMK4wblbjkTOmFvNUnSD2aJX7kW/cDSzc2v5K9jFPBIhaXP/Dh
         htFnV27LZu8k/3KTmHIavgbojrQgEppZnHCYact1pz5SdRntTsbmVGqvvf0XNKC7bLiK
         77MbY4vf6tHap03LRanmftzVrLmgaktBG+naE=
Received: by 10.220.121.233 with SMTP id i41mr634323vcr.50.1259781277279;
        Wed, 02 Dec 2009 11:14:37 -0800 (PST)
Received: from ?10.0.1.69? (c-71-63-2-238.hsd1.va.comcast.net [71.63.2.238])
        by mx.google.com with ESMTPS id 23sm2742895vws.9.2009.12.02.11.14.35
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 02 Dec 2009 11:14:35 -0800 (PST)
Message-Id: <5FCF6F15-AEB1-420C-A626-620EE231F3E2@gmail.com>
From: Erik Hatcher <erik.hatcher@gmail.com>
To: solr-user@lucene.apache.org,
 general@lucene.apache.org,
 java-user@lucene.apache.org
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v936)
Subject: Migrating to Open-Source Search with Lucene and Solr/ Free Webinar 8-Dec 2pm ET/11amPT/1900 GMT 
Date: Wed, 2 Dec 2009 14:14:33 -0500
X-Mailer: Apple Mail (2.936)
X-Virus-Checked: Checked by ClamAV on apache.org

WEBINAR:
Hosted by KMWorld and featuring speakers from The Motley Fool and =20
Lucid Imagination
Tuesday, Dec 8: 2pm ET/11amPT/1900 GMT
Sign up here: http://www.kmworld.com/webinars/lucid/08dec2009/luc3

Greetings,

I'll be presenting along with some of our customers from Motley Fool =20
at a free webinar, sponsored by Lucid Imagination, entitled "Take =20
Control of Your Search Destiny: Migrating to Apache Solr/Lucene Open =20
Source Search" .

I'll be joined by Motley Fool Director of Search Danny Hsia and Motley =20=

Fool Search VP Tech Operation Chad Wolfsheimer, to discuss how The =20
Motley Fool took control of their search technology and migrated to =20
Lucene/Solr Open Source Search =96 and how they dramatically improved =20=

search relevancy, speed, versatility and costs.

You're welcome to join or to forward this to someone who might like to.

Thanks,
	Erik=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 03 01:43:34 2009
Return-Path: <java-user-return-43872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64833 invoked from network); 3 Dec 2009 01:43:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Dec 2009 01:43:34 -0000
Received: (qmail 31279 invoked by uid 500); 3 Dec 2009 01:43:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31196 invoked by uid 500); 3 Dec 2009 01:43:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31186 invoked by uid 99); 3 Dec 2009 01:43:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 01:43:31 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erdincyilmazel@gmail.com designates 209.85.220.228 as permitted sender)
Received: from [209.85.220.228] (HELO mail-fx0-f228.google.com) (209.85.220.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 01:43:23 +0000
Received: by fxm28 with SMTP id 28so934554fxm.5
        for <java-user@lucene.apache.org>; Wed, 02 Dec 2009 17:43:03 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:received:date
         :x-google-sender-auth:message-id:subject:from:to:content-type;
        bh=RMDE7tPAZFxRnhfuZklYdL7r13KYw2stCF9dJIQ/JGs=;
        b=B196uFdnxDdM8AJqZwQspCJRYspKiba3Idjm0Hx7/SVF/o9O8daBA3Fxl2hJNzosT4
         bpGYNaZh6DzvQKIzff+zym02hETCOZJOIa+se10frrkcHtriVfj3b/iminPuGaTM0TPZ
         DOj3nnN5HA3mByR9aeIQv7l9v2diCmxAJZiG8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:date:x-google-sender-auth:message-id:subject
         :from:to:content-type;
        b=C24Wlc5B6yFwarWU4v+uWO72qoBf0bYHCSsIZMH1C8ZDJwHdXYtX4TDHyVqDJ0cOeY
         qBBa0ijNkNy7lZhpkzGU2gc6vKAq8wmKgDs2mhMovVb/bETyhoaSPmUAXdFCw2+K6LyQ
         x5A5V5WrtNfhZYdOpmcS8gEzl9Hxzp7joXzUU=
MIME-Version: 1.0
Sender: erdincyilmazel@gmail.com
Received: by 10.223.145.130 with SMTP id d2mr145069fav.78.1259804582829; Wed, 
	02 Dec 2009 17:43:02 -0800 (PST)
Date: Thu, 3 Dec 2009 01:43:02 +0000
X-Google-Sender-Auth: 5bb64e5697d12557
Message-ID: <7af3bac90912021743u5d62a249s19df6fd541cc9ac5@mail.gmail.com>
Subject: Caching analyzed query
From: Erdinc Yilmazel <erdinc@yilmazel.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0023545307fca55dea0479c91c5b
X-Virus-Checked: Checked by ClamAV on apache.org

--0023545307fca55dea0479c91c5b
Content-Type: text/plain; charset=ISO-8859-1

Hi,

In my application certain kind of queries for certain kinds of inputs will
be repeated on the lucene index. The application flow is something like
this:

   1. Get input A
   2. Lookup a key/value store for key A
   3. Load a text from key value store to be used as a query
   4. Analyze the text and build a Query object
   5. Perform a search

What I want to do is to implement a cache for the steps 2, 3 and 4. I don't
want to analyze the query text again and again. Think of this as a
distributed application, running on several servers. What is the best way to
cache analyzed version of the input text? I can make a cache per JVM by
holding a previously created Query object for a specific input, but in a
distributed environment if I store the serialized form of Query object, the
overhead of deserializing may kill all the benefits of caching here...

Thanks,
Erdinc

--0023545307fca55dea0479c91c5b--

From java-user-return-43873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 03 02:32:53 2009
Return-Path: <java-user-return-43873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89721 invoked from network); 3 Dec 2009 02:32:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Dec 2009 02:32:53 -0000
Received: (qmail 70001 invoked by uid 500); 3 Dec 2009 02:32:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69895 invoked by uid 500); 3 Dec 2009 02:32:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69885 invoked by uid 99); 3 Dec 2009 02:32:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 02:32:50 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 02:32:48 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NG1UZ-0000q3-Cb
	for java-user@lucene.apache.org; Wed, 02 Dec 2009 18:32:27 -0800
Message-ID: <26620107.post@talk.nabble.com>
Date: Wed, 2 Dec 2009 18:32:27 -0800 (PST)
From: blazingwolf7 <blazingwolf7@gmail.com>
To: java-user@lucene.apache.org
Subject: Storing image with Lucene
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: blazingwolf7@gmail.com


Hi,

As per title...is it possible to store image using Lucene? And if its
possible...how can I do that?

Thanks
-- 
View this message in context: http://old.nabble.com/Storing-image-with-Lucene-tp26620107p26620107.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 03 02:45:04 2009
Return-Path: <java-user-return-43874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92785 invoked from network); 3 Dec 2009 02:45:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Dec 2009 02:45:04 -0000
Received: (qmail 79856 invoked by uid 500); 3 Dec 2009 02:45:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79722 invoked by uid 500); 3 Dec 2009 02:45:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79711 invoked by uid 99); 3 Dec 2009 02:45:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 02:45:01 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.160.46 as permitted sender)
Received: from [209.85.160.46] (HELO mail-pw0-f46.google.com) (209.85.160.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 02:44:58 +0000
Received: by pwj17 with SMTP id 17so777387pwj.5
        for <java-user@lucene.apache.org>; Wed, 02 Dec 2009 18:44:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=cJJKX9+qn5YE3VPN0ZkyYdg2l1VModkchjzRhb47BS0=;
        b=qUL56jfpWoUW9HXFudB56zk+lv1cbd4LVcqwVh2H/c+UwHQWRmUCZRrioWQXtIkQ/Y
         nKGFuFTXIir6jd/hIWf7lQ/zGK4Jg4ioyhUl5m2ql6fcZYn2fQAaoNft4N8bK0fjuK/w
         O+Cilzr2fSgrou98x4ZbM2rwOCHW1pt3HlPC8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=RexKLqt3zJamfYgHh5z54Mpdsip+bB+j6/6KMkucDoPPQLBf+cwX+ZaU15i86dqLxu
         bVte5HfDjg/JKjT3m0nvSmmGZZIuwzdt1amaq92w/CujJsD75fSj3ZVm/JAqqLKrPoeH
         SEkXAxT/wbfcZXF0XS1V4RcjEtrLZyg/4IxQM=
MIME-Version: 1.0
Received: by 10.114.253.23 with SMTP id a23mr1598393wai.155.1259808278226; 
	Wed, 02 Dec 2009 18:44:38 -0800 (PST)
In-Reply-To: <26620107.post@talk.nabble.com>
References: <26620107.post@talk.nabble.com>
From: Anshum <anshumg@gmail.com>
Date: Thu, 3 Dec 2009 08:14:18 +0530
Message-ID: <867513fe0912021844g7db1558q1effec93a2d1d8c9@mail.gmail.com>
Subject: Re: Storing image with Lucene
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6878693e8a5f60479c9f83a

--0016e6878693e8a5f60479c9f83a
Content-Type: text/plain; charset=ISO-8859-1

Hi,
Lucene supports string/int literals for indexing and searching. In other
words, anything that can be transformed into a string/int can be consumed by
the lucene api. Moreover, so are you trying to implement an image search? In
that case perhaps you'd have to either figure out a transform else try
something else.
If it is mere storage of an image in lucene (for a particular doc, to be
fetched) you may as well do what is done by other similar engines behind the
scenes e.g. for blob objects. Just store a path/link to the actual image
instead of image in the index and fetch it at runtime (in the wrapper code).

--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Thu, Dec 3, 2009 at 8:02 AM, blazingwolf7 <blazingwolf7@gmail.com> wrote:

>
> Hi,
>
> As per title...is it possible to store image using Lucene? And if its
> possible...how can I do that?
>
> Thanks
> --
> View this message in context:
> http://old.nabble.com/Storing-image-with-Lucene-tp26620107p26620107.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6878693e8a5f60479c9f83a--

From java-user-return-43875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 03 03:07:17 2009
Return-Path: <java-user-return-43875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96418 invoked from network); 3 Dec 2009 03:07:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Dec 2009 03:07:17 -0000
Received: (qmail 88573 invoked by uid 500); 3 Dec 2009 03:07:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88464 invoked by uid 500); 3 Dec 2009 03:07:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88450 invoked by uid 99); 3 Dec 2009 03:07:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 03:07:14 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vaijanath.rao@corp.aol.com designates 205.188.105.146 as permitted sender)
Received: from [205.188.105.146] (HELO imr-da04.mx.aol.com) (205.188.105.146)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 03:07:11 +0000
Received: from AOLDTCMEH01.ad.office.aol.com (aoldtcmeh01.office.aol.com [10.180.121.20])
	by imr-da04.mx.aol.com (8.14.1/8.14.1) with ESMTP id nB336kwO003744
	for <java-user@lucene.apache.org>; Wed, 2 Dec 2009 22:06:46 -0500
Received: from EVSDTC05.ad.office.aol.com ([10.180.121.25]) by AOLDTCMEH01.ad.office.aol.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 2 Dec 2009 22:06:46 -0500
Received: from EVSE1A01.ad.office.aol.com ([10.146.190.230]) by EVSDTC05.ad.office.aol.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 2 Dec 2009 21:57:21 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Storing image with Lucene
Date: Thu, 3 Dec 2009 08:27:17 +0530
Message-ID: <4994C2F19CAF5641BFC1F4832A7EE2E346113D@EVSE1A01.ad.office.aol.com>
In-Reply-To: <26620107.post@talk.nabble.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Storing image with Lucene
Thread-Index: AcpzwO6fWjD4FhDuRYKM7GzosRV7dgAAwZuw
References: <26620107.post@talk.nabble.com>
From: "Rao, Vaijanath" <vaijanath.rao@corp.aol.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 03 Dec 2009 02:57:21.0226 (UTC) FILETIME=[551D7AA0:01CA73C4]

Hi,

Yes you can, create a binary field which you can use to store the image
in.
Field(String name, Reader reader)  Use this to store your image and use
binaryValue() to get the image back.

You can also look at storing the features of the image into the index in
similar way.

--Thanks and Regards
Vaijanath N. Rao

-----Original Message-----
From: blazingwolf7 [mailto:blazingwolf7@gmail.com]=20
Sent: Thursday, December 03, 2009 8:02 AM
To: java-user@lucene.apache.org
Subject: Storing image with Lucene


Hi,

As per title...is it possible to store image using Lucene? And if its
possible...how can I do that?

Thanks
--
View this message in context:
http://old.nabble.com/Storing-image-with-Lucene-tp26620107p26620107.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 03 03:10:10 2009
Return-Path: <java-user-return-43876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96845 invoked from network); 3 Dec 2009 03:10:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Dec 2009 03:10:10 -0000
Received: (qmail 91065 invoked by uid 500); 3 Dec 2009 03:10:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90940 invoked by uid 500); 3 Dec 2009 03:10:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90930 invoked by uid 99); 3 Dec 2009 03:10:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 03:10:07 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 03:09:57 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NG24W-0003Uy-Nd
	for java-user@lucene.apache.org; Wed, 02 Dec 2009 19:09:36 -0800
Message-ID: <26620344.post@talk.nabble.com>
Date: Wed, 2 Dec 2009 19:09:36 -0800 (PST)
From: blazingwolf7 <blazingwolf7@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Storing image with Lucene
In-Reply-To: <867513fe0912021844g7db1558q1effec93a2d1d8c9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: blazingwolf7@gmail.com
References: <26620107.post@talk.nabble.com> <867513fe0912021844g7db1558q1effec93a2d1d8c9@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks for the reply...yes i am trying to create an Image Search. And I did
create something similar to your
suggestion on only storing the links. But due to some limitations being set
on me...I have to find a way to 
store the image..

Maybe I could try the transform idea. 

Anshum-2 wrote:
> 
> Hi,
> Lucene supports string/int literals for indexing and searching. In other
> words, anything that can be transformed into a string/int can be consumed
> by
> the lucene api. Moreover, so are you trying to implement an image search?
> In
> that case perhaps you'd have to either figure out a transform else try
> something else.
> If it is mere storage of an image in lucene (for a particular doc, to be
> fetched) you may as well do what is done by other similar engines behind
> the
> scenes e.g. for blob objects. Just store a path/link to the actual image
> instead of image in the index and fetch it at runtime (in the wrapper
> code).
> 
> --
> Anshum Gupta
> Naukri Labs!
> http://ai-cafe.blogspot.com
> 
> The facts expressed here belong to everybody, the opinions to me. The
> distinction is yours to draw............
> 
> 
> On Thu, Dec 3, 2009 at 8:02 AM, blazingwolf7 <blazingwolf7@gmail.com>
> wrote:
> 
>>
>> Hi,
>>
>> As per title...is it possible to store image using Lucene? And if its
>> possible...how can I do that?
>>
>> Thanks
>> --
>> View this message in context:
>> http://old.nabble.com/Storing-image-with-Lucene-tp26620107p26620107.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://old.nabble.com/Storing-image-with-Lucene-tp26620107p26620344.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 03 04:21:14 2009
Return-Path: <java-user-return-43877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6375 invoked from network); 3 Dec 2009 04:21:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Dec 2009 04:21:13 -0000
Received: (qmail 19565 invoked by uid 500); 3 Dec 2009 04:21:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19379 invoked by uid 500); 3 Dec 2009 04:21:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19369 invoked by uid 99); 3 Dec 2009 04:21:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 04:21:08 +0000
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=MIME_BASE64_BLANKS,MIME_BASE64_TEXT,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anshumg@gmail.com designates 209.85.210.192 as permitted sender)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 04:20:58 +0000
Received: by yxe30 with SMTP id 30so970591yxe.29
        for <java-user@lucene.apache.org>; Wed, 02 Dec 2009 20:20:37 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:x-rim-org-msg-ref-id
         :message-id:content-transfer-encoding:reply-to:x-priority
         :sensitivity:importance:subject:to:from:date:content-type
         :mime-version;
        bh=TFfcsBb4u/DbVjjt/v9m3gkRnuqPhz3UuaClPtuX3JI=;
        b=AAi/kVi/KxEf5e6Fi+zcsMOqS0z55FEKorWscsbibIDSBWlPU8U4NJk5ZCoQMmYq5h
         eOdRM6GHzJVE51NC71Nslru/X6f0QI3FPsC9cW8Jvh4LpHMUT4Lw5KfOi4f7o+INWH4G
         Jf9BulswlK2BM9NrY4oyHZM6sIaB2bsPRNPVA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=x-rim-org-msg-ref-id:message-id:content-transfer-encoding:reply-to
         :x-priority:sensitivity:importance:subject:to:from:date:content-type
         :mime-version;
        b=YjylTLV42YECMrnFttq9gitQAODsAh/nJHQC4RAz0vcmNY2jtN+XnpZDamZ1keq/u3
         LH/dQNqkGviuO5jCxqpxXUH+rLotugC3Q2QAFG7xhCk1ZSBFrqJvJakmEDAEstSylcEN
         UR5I0dF3+3nele0iX7ExMgb/F7QmKJDxNoDPM=
Received: by 10.150.245.31 with SMTP id s31mr1922105ybh.128.1259814036667;
        Wed, 02 Dec 2009 20:20:36 -0800 (PST)
Received: from bda029.bisx.produk.on.blackberry (bda-216-9-253-157.bise.eu.blackberry.com [216.9.253.157])
        by mx.google.com with ESMTPS id 14sm950590gxk.14.2009.12.02.20.20.35
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 02 Dec 2009 20:20:35 -0800 (PST)
X-rim-org-msg-ref-id:1060777316
Message-ID:<1060777316-1259814033-cardhu_decombobulator_blackberry.rim.net-27047805-@bda130.bisx.produk.on.blackberry>
Content-Transfer-Encoding: base64
Reply-To: anshumg@gmail.com
X-Priority: Normal
Sensitivity: Normal
Importance: Normal
Subject: Re: Storing image with Lucene
To: java-user@lucene.apache.org
From: "anshum.gupta@naukri.com" <anshumg@gmail.com>
Date: Thu, 3 Dec 2009 04:20:32 +0000
Content-Type: text/plain; charset="Windows-1252"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

SGkgVmFpamFuYXRoLA0KSnVzdCB3YW50ZWQgdG8ga25vdyBpZiB5b3UgY2FuIHBlcmZvcm0gYSBz
ZWFyY2ggb24gdGhlIGJpbmFyeSBmaWVsZCAoYXMgSSBoYXZlbid0IHRyaWVkIHRoaXMgZXZlcikg
Pw0KLS0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tLQ0KRnJvbTogUmFvLCBWYWlqYW5hdGgNClRv
OiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNClJlcGx5VG86IGphdmEtdXNlckBsdWNlbmUu
YXBhY2hlLm9yZw0KU3ViamVjdDogUkU6IFN0b3JpbmcgaW1hZ2Ugd2l0aCBMdWNlbmUNClNlbnQ6
IERlYyAzLCAyMDA5IDA4OjI3DQoNCkhpLA0KDQpZZXMgeW91IGNhbiwgY3JlYXRlIGEgYmluYXJ5
IGZpZWxkIHdoaWNoIHlvdSBjYW4gdXNlIHRvIHN0b3JlIHRoZSBpbWFnZQ0KaW4uDQpGaWVsZChT
dHJpbmcgbmFtZSwgUmVhZGVyIHJlYWRlcikgIFVzZSB0aGlzIHRvIHN0b3JlIHlvdXIgaW1hZ2Ug
YW5kIHVzZQ0KYmluYXJ5VmFsdWUoKSB0byBnZXQgdGhlIGltYWdlIGJhY2suDQoNCllvdSBjYW4g
YWxzbyBsb29rIGF0IHN0b3JpbmcgdGhlIGZlYXR1cmVzIG9mIHRoZSBpbWFnZSBpbnRvIHRoZSBp
bmRleCBpbg0Kc2ltaWxhciB3YXkuDQoNCi0tVGhhbmtzIGFuZCBSZWdhcmRzDQpWYWlqYW5hdGgg
Ti4gUmFvDQoNCi0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQpGcm9tOiBibGF6aW5nd29sZjcg
W21haWx0bzpibGF6aW5nd29sZjdAZ21haWwuY29tXSANClNlbnQ6IFRodXJzZGF5LCBEZWNlbWJl
ciAwMywgMjAwOSA4OjAyIEFNDQpUbzogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQpTdWJq
ZWN0OiBTdG9yaW5nIGltYWdlIHdpdGggTHVjZW5lDQoNCg0KSGksDQoNCkFzIHBlciB0aXRsZS4u
LmlzIGl0IHBvc3NpYmxlIHRvIHN0b3JlIGltYWdlIHVzaW5nIEx1Y2VuZT8gQW5kIGlmIGl0cw0K
cG9zc2libGUuLi5ob3cgY2FuIEkgZG8gdGhhdD8NCg0KVGhhbmtzDQotLQ0KVmlldyB0aGlzIG1l
c3NhZ2UgaW4gY29udGV4dDoNCmh0dHA6Ly9vbGQubmFiYmxlLmNvbS9TdG9yaW5nLWltYWdlLXdp
dGgtTHVjZW5lLXRwMjY2MjAxMDdwMjY2MjAxMDcuaHRtbA0KU2VudCBmcm9tIHRoZSBMdWNlbmUg
LSBKYXZhIFVzZXJzIG1haWxpbmcgbGlzdCBhcmNoaXZlIGF0IE5hYmJsZS5jb20uDQoNCg0KLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tDQpUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVA
bHVjZW5lLmFwYWNoZS5vcmcNCkZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEt
dXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQoNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQpUbyB1bnN1YnNj
cmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCkZv
ciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFj
aGUub3JnDQoNCg0KDQpTZW50IGZyb20gQmxhY2tCZXJyea4gb24gQWlydGVs



From java-user-return-43878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 03 06:19:47 2009
Return-Path: <java-user-return-43878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40620 invoked from network); 3 Dec 2009 06:19:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Dec 2009 06:19:47 -0000
Received: (qmail 76923 invoked by uid 500); 3 Dec 2009 06:19:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76848 invoked by uid 500); 3 Dec 2009 06:19:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76838 invoked by uid 99); 3 Dec 2009 06:19:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 06:19:43 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 06:19:38 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NG526-00087Y-6c
	for java-user@lucene.apache.org; Wed, 02 Dec 2009 22:19:18 -0800
Message-ID: <26621546.post@talk.nabble.com>
Date: Wed, 2 Dec 2009 22:19:18 -0800 (PST)
From: blazingwolf7 <blazingwolf7@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Storing image with Lucene
In-Reply-To: <1060777316-1259814033-cardhu_decombobulator_blackberry.rim.net-27047805-@bda130.bisx.produk.on.blackberry>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: blazingwolf7@gmail.com
References: <26620107.post@talk.nabble.com> <1060777316-1259814033-cardhu_decombobulator_blackberry.rim.net-27047805-@bda130.bisx.produk.on.blackberry>


oh...thanks for the suggestion. I will try using the idea.If it works I wil=
l
let u all know..


Anshum-2 wrote:
>=20
> Hi Vaijanath,
> Just wanted to know if you can perform a search on the binary field (as I
> haven't tried this ever) ?
> ------Original Message------
> From: Rao, Vaijanath
> To: java-user@lucene.apache.org
> ReplyTo: java-user@lucene.apache.org
> Subject: RE: Storing image with Lucene
> Sent: Dec 3, 2009 08:27
>=20
> Hi,
>=20
> Yes you can, create a binary field which you can use to store the image
> in.
> Field(String name, Reader reader)  Use this to store your image and use
> binaryValue() to get the image back.
>=20
> You can also look at storing the features of the image into the index in
> similar way.
>=20
> --Thanks and Regards
> Vaijanath N. Rao
>=20
> -----Original Message-----
> From: blazingwolf7 [mailto:blazingwolf7@gmail.com]=20
> Sent: Thursday, December 03, 2009 8:02 AM
> To: java-user@lucene.apache.org
> Subject: Storing image with Lucene
>=20
>=20
> Hi,
>=20
> As per title...is it possible to store image using Lucene? And if its
> possible...how can I do that?
>=20
> Thanks
> --
> View this message in context:
> http://old.nabble.com/Storing-image-with-Lucene-tp26620107p26620107.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
> Sent from BlackBerry=C2=AE on Airtel
>=20

--=20
View this message in context: http://old.nabble.com/Storing-image-with-Luce=
ne-tp26620107p26621546.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 03 07:01:34 2009
Return-Path: <java-user-return-43879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58237 invoked from network); 3 Dec 2009 07:01:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Dec 2009 07:01:34 -0000
Received: (qmail 99681 invoked by uid 500); 3 Dec 2009 07:01:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99615 invoked by uid 500); 3 Dec 2009 07:01:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99605 invoked by uid 99); 3 Dec 2009 07:01:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 07:01:31 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 07:01:29 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NG5ga-0002Ev-SJ
	for java-user@lucene.apache.org; Wed, 02 Dec 2009 23:01:08 -0800
Message-ID: <26621710.post@talk.nabble.com>
Date: Wed, 2 Dec 2009 23:01:08 -0800 (PST)
From: blazingwolf7 <blazingwolf7@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Storing image with Lucene
In-Reply-To: <26621546.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: blazingwolf7@gmail.com
References: <26620107.post@talk.nabble.com> <1060777316-1259814033-cardhu_decombobulator_blackberry.rim.net-27047805-@bda130.bisx.produk.on.blackberry> <26621546.post@talk.nabble.com>


I found a solution already.

That is to convert the image from byte array of the image >> string
Then the string will be stored in the index. But beware, the byte will have
to be encoded to Base64
or the image retrieved will be mess up(meaning the pic is totally ruin)



blazingwolf7 wrote:
>=20
> oh...thanks for the suggestion. I will try using the idea.If it works I
> will let u all know..
>=20
>=20
> Anshum-2 wrote:
>>=20
>> Hi Vaijanath,
>> Just wanted to know if you can perform a search on the binary field (as =
I
>> haven't tried this ever) ?
>> ------Original Message------
>> From: Rao, Vaijanath
>> To: java-user@lucene.apache.org
>> ReplyTo: java-user@lucene.apache.org
>> Subject: RE: Storing image with Lucene
>> Sent: Dec 3, 2009 08:27
>>=20
>> Hi,
>>=20
>> Yes you can, create a binary field which you can use to store the image
>> in.
>> Field(String name, Reader reader)  Use this to store your image and use
>> binaryValue() to get the image back.
>>=20
>> You can also look at storing the features of the image into the index in
>> similar way.
>>=20
>> --Thanks and Regards
>> Vaijanath N. Rao
>>=20
>> -----Original Message-----
>> From: blazingwolf7 [mailto:blazingwolf7@gmail.com]=20
>> Sent: Thursday, December 03, 2009 8:02 AM
>> To: java-user@lucene.apache.org
>> Subject: Storing image with Lucene
>>=20
>>=20
>> Hi,
>>=20
>> As per title...is it possible to store image using Lucene? And if its
>> possible...how can I do that?
>>=20
>> Thanks
>> --
>> View this message in context:
>> http://old.nabble.com/Storing-image-with-Lucene-tp26620107p26620107.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20
>>=20
>> Sent from BlackBerry=C2=AE on Airtel
>>=20
>=20
>=20

--=20
View this message in context: http://old.nabble.com/Storing-image-with-Luce=
ne-tp26620107p26621710.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 03 07:19:53 2009
Return-Path: <java-user-return-43880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60840 invoked from network); 3 Dec 2009 07:19:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Dec 2009 07:19:53 -0000
Received: (qmail 11945 invoked by uid 500); 3 Dec 2009 07:19:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11869 invoked by uid 500); 3 Dec 2009 07:19:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11859 invoked by uid 99); 3 Dec 2009 07:19:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 07:19:50 +0000
X-ASF-Spam-Status: No, hits=-2.5 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jake.mannix@gmail.com designates 209.85.222.187 as permitted sender)
Received: from [209.85.222.187] (HELO mail-pz0-f187.google.com) (209.85.222.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 07:19:48 +0000
Received: by pzk17 with SMTP id 17so1014147pzk.6
        for <java-user@lucene.apache.org>; Wed, 02 Dec 2009 23:19:28 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=NAyw0onQsXLNnx2WonrnirtOZtWpzyZT/7+dCSys6xs=;
        b=SOJ7ly/tZ48MyWyytRVagvLJCRTA7WtS/SWz96H/RfY4ekK/zqvqSLPNrlIiltLadU
         wI1Yhig7DVGicGwROetd9DM3pI/o6fAzHF9Q8Azw4Sw6ysSKRxO+eFKvuhvGb4p9dT6M
         424e6RK+8tPfVJk1HcHEpAIR3jLVWjTLFZnDI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=BAPH1fhgioQ97G27MQ89W95nbcIXb5aRE7pMy2XTcn6+o1Dq3NhdAyYo8Xzxng17Ox
         eMYSLdGjtmGIhnV5a0iVhQsJe4OyaUpct3BTqU+11ixk1EPuvt/MZQn4PI3ug7i5ngOl
         ZHGzy8xan+LA9tKrqH6S1flODU8oyhL5BoynY=
MIME-Version: 1.0
Received: by 10.143.24.38 with SMTP id b38mr164029wfj.12.1259824768214; Wed, 
	02 Dec 2009 23:19:28 -0800 (PST)
In-Reply-To: <7af3bac90912021743u5d62a249s19df6fd541cc9ac5@mail.gmail.com>
References: <7af3bac90912021743u5d62a249s19df6fd541cc9ac5@mail.gmail.com>
Date: Wed, 2 Dec 2009 23:19:28 -0800
Message-ID: <4b124c310912022319w46667858vc41c2a1529320f56@mail.gmail.com>
Subject: Re: Caching analyzed query
From: Jake Mannix <jake.mannix@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636e1f995c9e7eb0479cdcf16

--001636e1f995c9e7eb0479cdcf16
Content-Type: text/plain; charset=ISO-8859-1

What kind of queries are these?  I.e. How much work goes into step 4?  Is
this
a fairly standard combination of Boolean/Phrase/other stock Lucene queries
built
up out of tokenizing the text?

If so, it's going to be nowhere near the bottleneck in your runtime (we're
talking
often way less than a millisecond per query), and so you can save this to
the
last minute.  Doing the key/value store lookup (especially if remote!) I can
see
caching, but producing the Lucene query is only slow if you're doing some
*really* crazy stuff.  Sometimes happens, to be sure, but usually, the
crazier
your query gets, the slower it gets (step 5), and so even in this case, the
bottleneck
is not in the Query object creation.  It happens once per query.  Step 5 has
lots of
steps which happen once per *document* which matches the query (inner loop
versus before the loop starts).

  -jake

On Wed, Dec 2, 2009 at 5:43 PM, Erdinc Yilmazel <erdinc@yilmazel.com> wrote:

> Hi,
>
> In my application certain kind of queries for certain kinds of inputs will
> be repeated on the lucene index. The application flow is something like
> this:
>
>   1. Get input A
>   2. Lookup a key/value store for key A
>   3. Load a text from key value store to be used as a query
>   4. Analyze the text and build a Query object
>   5. Perform a search
>
> What I want to do is to implement a cache for the steps 2, 3 and 4. I don't
> want to analyze the query text again and again. Think of this as a
> distributed application, running on several servers. What is the best way
> to
> cache analyzed version of the input text? I can make a cache per JVM by
> holding a previously created Query object for a specific input, but in a
> distributed environment if I store the serialized form of Query object, the
> overhead of deserializing may kill all the benefits of caching here...
>
> Thanks,
> Erdinc
>

--001636e1f995c9e7eb0479cdcf16--

From java-user-return-43881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 03 08:48:32 2009
Return-Path: <java-user-return-43881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82884 invoked from network); 3 Dec 2009 08:48:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Dec 2009 08:48:32 -0000
Received: (qmail 96986 invoked by uid 500); 3 Dec 2009 08:48:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96896 invoked by uid 500); 3 Dec 2009 08:48:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96886 invoked by uid 99); 3 Dec 2009 08:48:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 08:48:29 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.211.185 as permitted sender)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 08:48:18 +0000
Received: by ywh15 with SMTP id 15so1114324ywh.5
        for <java-user@lucene.apache.org>; Thu, 03 Dec 2009 00:47:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=X4nYxGvDLeYdOBkSijEIhnGUbM7O7fpml5sZA/KecsY=;
        b=hp0VSEviOv/steS7oa+PsY+z6h7yo+J/Uh58pzSJOP9PXSGCUblzqcePPxIwMMqXc7
         u77M2pmQyBZTNAjZaMLN1jGsxab52Yyhto3d+FIvMlxiQIBjkVF3j/w1tC3dWnRxzgBM
         +pRbMprq4hBACixxnHVadSMfVy2QOH0l9i8Hw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=CW7EXocYLmCEmwnivOAHCC0Yo4KMzV3d9nRLVQzp7B7hYoVJfk5h4uNGBBOoSB2VHq
         NtcwTJrEekmLYPPQfMUrdfEIMMbSTTPPY4zMn+e8tQlYs49U3x051S9vFg3TzUarEFG+
         3ye0LhXXoYKVN/NlLK73+OKjiWfVyThs/XL/0=
MIME-Version: 1.0
Received: by 10.90.40.31 with SMTP id n31mr2070358agn.4.1259830076069; Thu, 03 
	Dec 2009 00:47:56 -0800 (PST)
In-Reply-To: <200912021626.06754.wzzelfzzel@abas.de>
References: <26610142.post@talk.nabble.com>
	 <200912021620.29231.wzzelfzzel@abas.de>
	 <200912021626.06754.wzzelfzzel@abas.de>
Date: Thu, 3 Dec 2009 16:47:56 +0800
Message-ID: <7d94dcde0912030047g292f56e3p31fbe936bceb67a2@mail.gmail.com>
Subject: Re: About Lucene ...
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364ee77429572b0479cf0c19
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364ee77429572b0479cf0c19
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

You can do everything related to search(full text or just paths) with
Lucene:-)

On Wed, Dec 2, 2009 at 11:26 PM, Stefan Trcek <wzzelfzzel@abas.de> wrote:

> On Wednesday 02 December 2009 16:20:28 Stefan Trcek wrote:
> > On Wednesday 02 December 2009 15:50:45 archibal wrote:
> > > -optionnally i want to have a central server which index all data
> > > (name of files, folders and file content) on network and i would
> > > like to connect via a browser on the central server ? are there
> > > project who does this or something like ?
> >
> > You may have a look at
> >     regain http://regain.murfman.de/wiki/doku.php?id=3Dstart
> >     hounder http://www.hounder.org/index.html
> > I never used these products, so I can't tell you anything about 'em.
>
> And of course nutch, but I guess you found that already.
>
> Stefan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--0016364ee77429572b0479cf0c19--

From java-user-return-43882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 03 09:04:32 2009
Return-Path: <java-user-return-43882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87974 invoked from network); 3 Dec 2009 09:04:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Dec 2009 09:04:31 -0000
Received: (qmail 10448 invoked by uid 500); 3 Dec 2009 09:04:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10355 invoked by uid 500); 3 Dec 2009 09:04:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10345 invoked by uid 99); 3 Dec 2009 09:04:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 09:04:29 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [202.86.5.36] (HELO smtp109.mail.in.yahoo.com) (202.86.5.36)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 03 Dec 2009 09:04:17 +0000
Received: (qmail 2434 invoked from network); 3 Dec 2009 09:03:54 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=FYYlPnpxMSuBV3ZXC5sdAew3jPdhD9rnJJYyOsRTV0lX1a/BCB/Gh85VTmUul0SBRlOB/+VRNm5zock3U4LXnUwgup5hjn+bxBzMAbtYf2yo/PGdmkfGpbIeBi9g0YRxANUEcaSARYGQTRRZFyAPVdIG28IKsHLW//ZnxyKxAN4=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp109.mail.in.yahoo.com with SMTP; 3 Dec 2009 09:03:54 -0000
X-Yahoo-SMTP: UautoMGswBCijiDZb3m7wS2y3hHHGA--
X-YMail-OSG: ZBBGDcYVM1m1lfF.vy5lSBV11Rq27E6Rlpq_1QNSMfHl9FWA73o_lG6uDVntzgOZB3xPFEB4Wga_6_6HAo2qJkpukD8Qkry31qPu.Wpr.3ZWsd81KKigUA0RUH7O7irry8os9iXQGNXh1plYyg2cWo05cqk6UNQaEHCqPY21cvF8lM4vGv2QL5z96QxJQgdlmKHXuO32
X-Yahoo-Newman-Property: ymail-3
Message-ID: <014401ca73f7$8a2e58d0$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
Subject: Sorting issues resolved in 3.0?
Date: Thu, 3 Dec 2009 14:33:52 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Hello all,

Sorting consumes huge amount of memory. Did 2.9.1 /3.0 has ability to =
customize field cache. In my case, 80% of documents are required to be =
sorted. Currently the field cache is loading all records.=20

Is there any custom interface available to decide which document to be =
loaded in cache?

Is there any functionality to load this fieldcache from disk rather =
completly keeping in to memory. Something similar to ehcache. =20

Is any optimization done in sorting.     =20

Regards
Ganesh
Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 03 09:08:13 2009
Return-Path: <java-user-return-43883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89070 invoked from network); 3 Dec 2009 09:08:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Dec 2009 09:08:13 -0000
Received: (qmail 16059 invoked by uid 500); 3 Dec 2009 09:08:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15998 invoked by uid 500); 3 Dec 2009 09:08:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15988 invoked by uid 99); 3 Dec 2009 09:08:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 09:08:10 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 09:07:58 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 34F6AD36003
	for <java-user@lucene.apache.org>; Thu,  3 Dec 2009 10:07:38 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id DAdNju5QPnsN for <java-user@lucene.apache.org>;
	Thu,  3 Dec 2009 10:07:28 +0100 (CET)
Received: from VEGA (unknown [134.102.249.74])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 4C4C2D36002
	for <java-user@lucene.apache.org>; Thu,  3 Dec 2009 10:07:28 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <014401ca73f7$8a2e58d0$710bc30a@sv.us.sonicwall.com>
Subject: RE: Sorting issues resolved in 3.0?
Date: Thu, 3 Dec 2009 10:07:28 +0100
Message-ID: <28B1594C0E4749FA87B43804FE9D4765@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <014401ca73f7$8a2e58d0$710bc30a@sv.us.sonicwall.com>
Thread-Index: Acpz96Zw4XboGKWbR+m7yeT3E83tXQAADEIw
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

In 3.0 nothing changed about that (and also in 2.9). Only that the
FieldCache is now segment-wise which makes IndexReader.reopen be faster.

But you are still able to do your own sorting with own structures, you just
have to write your own TopDocsCollector.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Ganesh [mailto:emailgane@yahoo.co.in]
> Sent: Thursday, December 03, 2009 10:04 AM
> To: java-user@lucene.apache.org
> Subject: Sorting issues resolved in 3.0?
> 
> Hello all,
> 
> Sorting consumes huge amount of memory. Did 2.9.1 /3.0 has ability to
> customize field cache. In my case, 80% of documents are required to be
> sorted. Currently the field cache is loading all records.
> 
> Is there any custom interface available to decide which document to be
> loaded in cache?
> 
> Is there any functionality to load this fieldcache from disk rather
> completly keeping in to memory. Something similar to ehcache.
> 
> Is any optimization done in sorting.
> 
> Regards
> Ganesh
> Send instant messages to your online friends http://in.messenger.yahoo.com
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 03 09:27:51 2009
Return-Path: <java-user-return-43884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94749 invoked from network); 3 Dec 2009 09:27:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Dec 2009 09:27:50 -0000
Received: (qmail 38256 invoked by uid 500); 3 Dec 2009 09:27:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38165 invoked by uid 500); 3 Dec 2009 09:27:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38155 invoked by uid 99); 3 Dec 2009 09:27:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 09:27:48 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yangjianhua.cn@gmail.com designates 209.85.222.187 as permitted sender)
Received: from [209.85.222.187] (HELO mail-pz0-f187.google.com) (209.85.222.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 09:27:37 +0000
Received: by pzk17 with SMTP id 17so1106858pzk.6
        for <java-user@lucene.apache.org>; Thu, 03 Dec 2009 01:27:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=G1sJELryo12HlovI990dPFE5vuoXeEkNnC+JV8V46v0=;
        b=nK11Y+33FCtGQkXRuR9sxzKhitLWlGm+boNxAkslg5OmPVEoWQxe5HX2fKwNK6Nryk
         WatSp5G+hXbeGPr1ykbW0azmLLQE6RQUCEdaZYOdJdXPvRZCMvmcHnAb3pEh8mKVVGW0
         Oa4SXRQooc5ht+d9dpPyYY/bsotRO42kNeLkA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=kxYB0Rv4iSwNFvq6a/GMDcC9AaQlOMBUSNvhQ0tDIt7/rJRzhkkudZLFndubM9qbyd
         bGUhk9fRP1yeBMUCpQNp6vp6sVDKIHhrBHJI83opxNM9dfJHX1ztUf0WXo1jYQqYP1GK
         accFFrSrhO9VPPKLPuPUv1ZQLgN2YBhrXa1Gk=
MIME-Version: 1.0
Received: by 10.141.41.19 with SMTP id t19mr81690rvj.41.1259832434576; Thu, 03 
	Dec 2009 01:27:14 -0800 (PST)
In-Reply-To: <7d94dcde0912030047g292f56e3p31fbe936bceb67a2@mail.gmail.com>
References: <26610142.post@talk.nabble.com>
	 <200912021620.29231.wzzelfzzel@abas.de>
	 <200912021626.06754.wzzelfzzel@abas.de>
	 <7d94dcde0912030047g292f56e3p31fbe936bceb67a2@mail.gmail.com>
Date: Thu, 3 Dec 2009 17:27:14 +0800
Message-ID: <52fe31430912030127q5ddca807g30ca9bb693d77332@mail.gmail.com>
Subject: Re: About Lucene ...
From: =?GB2312?B?0e69qLuq?= <yangjianhua.cn@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd23a82bd4db20479cf98a5
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd23a82bd4db20479cf98a5
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

May be you can try Omnifind Yahoo Edition.

2009/12/3 Weiwei Wang <ww.wang.cs@gmail.com>

> You can do everything related to search(full text or just paths) with
> Lucene:-)
>
> On Wed, Dec 2, 2009 at 11:26 PM, Stefan Trcek <wzzelfzzel@abas.de> wrote:
>
> > On Wednesday 02 December 2009 16:20:28 Stefan Trcek wrote:
> > > On Wednesday 02 December 2009 15:50:45 archibal wrote:
> > > > -optionnally i want to have a central server which index all data
> > > > (name of files, folders and file content) on network and i would
> > > > like to connect via a browser on the central server ? are there
> > > > project who does this or something like ?
> > >
> > > You may have a look at
> > >     regain http://regain.murfman.de/wiki/doku.php?id=3Dstart
> > >     hounder http://www.hounder.org/index.html
> > > I never used these products, so I can't tell you anything about 'em.
> >
> > And of course nutch, but I guess you found that already.
> >
> > Stefan
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> Weiwei Wang
> Alex Wang
> =CD=F5=CE=A1=CE=A1
> Room 403, Mengmin Wei Building
> Computer Science Department
> Gulou Campus of Nanjing University
> Nanjing, P.R.China, 210093
>
> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>



--=20
=D1=EE=BD=A8=BB=AA

--000e0cd23a82bd4db20479cf98a5--

From java-user-return-43885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 03 09:49:45 2009
Return-Path: <java-user-return-43885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5325 invoked from network); 3 Dec 2009 09:49:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Dec 2009 09:49:45 -0000
Received: (qmail 63623 invoked by uid 500); 3 Dec 2009 09:49:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63536 invoked by uid 500); 3 Dec 2009 09:49:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63526 invoked by uid 99); 3 Dec 2009 09:49:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 09:49:42 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lukas.vlcek@gmail.com designates 74.125.78.26 as permitted sender)
Received: from [74.125.78.26] (HELO ey-out-2122.google.com) (74.125.78.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 09:49:32 +0000
Received: by ey-out-2122.google.com with SMTP id 25so1387774eya.5
        for <java-user@lucene.apache.org>; Thu, 03 Dec 2009 01:49:12 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=DpxM7s0tmS64HNIxwkPVDK9p5+qQ26nebQJ99jCRjI4=;
        b=AL4CQKkMfwWzywXyyywrqSWtoRk0kfthll0YLHXh5a3BEB2bbiB4teKdWROXfSPNdq
         tL37p0jlfz7dzUKuJ1IbTtAaAvq/MrEa17bldCMEYxvRZFsdaPcKLCzVVNT45a1eK9PC
         Ax3+cOVV4BiPFey8ZylnVjecqfnfcNR745HE4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=NyXaubfhG1X4ggfHggJaG8luG5U8wZtv5V8x65thkVirTucdN4+ZA+XhhLX8CSqw5w
         UvAH2COd+s+p3rSKdPeS86ZJHjnwfkW1d5R+GObBSFC5o2+wpQ9XzQnwYEb8WosH6iWM
         A7SXpwRs9UNe8kUqK3ZicMALzExGPTmQ03B00=
MIME-Version: 1.0
Received: by 10.216.85.132 with SMTP id u4mr429498wee.191.1259833751129; Thu, 
	03 Dec 2009 01:49:11 -0800 (PST)
In-Reply-To: <52fe31430912030127q5ddca807g30ca9bb693d77332@mail.gmail.com>
References: <26610142.post@talk.nabble.com> <200912021620.29231.wzzelfzzel@abas.de> 
	<200912021626.06754.wzzelfzzel@abas.de> <7d94dcde0912030047g292f56e3p31fbe936bceb67a2@mail.gmail.com> 
	<52fe31430912030127q5ddca807g30ca9bb693d77332@mail.gmail.com>
From: =?UTF-8?B?THVrw6HFoSBWbMSNZWs=?= <lukas.vlcek@gmail.com>
Date: Thu, 3 Dec 2009 10:48:51 +0100
Message-ID: <52c3ddca0912030148n2033bb3ao8e99e2154e01961b@mail.gmail.com>
Subject: Re: About Lucene ...
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d56698364e110479cfe762
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d56698364e110479cfe762
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

This might be OT but did you consider Google Desktop Search?
Seems that somebody reported success with hacking it to allow network file
system index/search: http://www.geekzone.co.nz/content.asp?contentid=3D3939

Regards,
Lukas

http://blog.lukas-vlcek.com/


2009/12/3 =E6=9D=A8=E5=BB=BA=E5=8D=8E <yangjianhua.cn@gmail.com>

> May be you can try Omnifind Yahoo Edition.
>
> 2009/12/3 Weiwei Wang <ww.wang.cs@gmail.com>
>
> > You can do everything related to search(full text or just paths) with
> > Lucene:-)
> >
> > On Wed, Dec 2, 2009 at 11:26 PM, Stefan Trcek <wzzelfzzel@abas.de>
> wrote:
> >
> > > On Wednesday 02 December 2009 16:20:28 Stefan Trcek wrote:
> > > > On Wednesday 02 December 2009 15:50:45 archibal wrote:
> > > > > -optionnally i want to have a central server which index all data
> > > > > (name of files, folders and file content) on network and i would
> > > > > like to connect via a browser on the central server ? are there
> > > > > project who does this or something like ?
> > > >
> > > > You may have a look at
> > > >     regain http://regain.murfman.de/wiki/doku.php?id=3Dstart
> > > >     hounder http://www.hounder.org/index.html
> > > > I never used these products, so I can't tell you anything about 'em=
.
> > >
> > > And of course nutch, but I guess you found that already.
> > >
> > > Stefan
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > --
> > Weiwei Wang
> > Alex Wang
> > =E7=8E=8B=E5=B7=8D=E5=B7=8D
> > Room 403, Mengmin Wei Building
> > Computer Science Department
> > Gulou Campus of Nanjing University
> > Nanjing, P.R.China, 210093
> >
> > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> >
>
>
>
> --
> =E6=9D=A8=E5=BB=BA=E5=8D=8E
>

--0016e6d56698364e110479cfe762--

From java-user-return-43886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 03 10:32:24 2009
Return-Path: <java-user-return-43886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29668 invoked from network); 3 Dec 2009 10:32:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Dec 2009 10:32:23 -0000
Received: (qmail 28845 invoked by uid 500); 3 Dec 2009 10:32:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28757 invoked by uid 500); 3 Dec 2009 10:32:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28746 invoked by uid 99); 3 Dec 2009 10:32:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 10:32:20 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [202.86.5.90] (HELO smtp103.mail.in.yahoo.com) (202.86.5.90)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 03 Dec 2009 10:32:16 +0000
Received: (qmail 95648 invoked from network); 3 Dec 2009 10:31:53 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=FSy3pncQ88wWa3XZfRkxN/5dR5yHxBY3rkgRzRqnZlzF/5WECniuLIvcWRCsBncEhirTIZi44JE/qAJ0yVFZnElgWz8Tu0tCu4qwBt87yM+iqqZEt/ZcrciyugGtS1ieMHwbEVCBObB4624H7KAsqeNuDs17SiGhvGkCv3WcOBU=  ;
Received: from  (emailgane@203.98.194.130 with login)
        by smtp103.mail.in.yahoo.com with SMTP; 03 Dec 2009 16:01:52 +0530 IST
X-Yahoo-SMTP: JObyHkuswBBrNSLZp.Ycd7Boqpr_GQ--
X-YMail-OSG: 0dSTuR8VM1lDP3zWcM5Rki4VNu_.IaXea0MKT7u56GkQ1o7Nd8dfM1Bd0LkDzRVHapW9tcerA3nPaolntTIxOUezRI8FPk9pCIWCXbG3d0tBx33eLkeyx3zWD22aW9fvbR.2XtSLtn2_S.l6VowmNJ0JlB76qZM4OIsaAdhvbh.e4H8ewbGvy2IQijjO_TN3j1OavQ3PObosHtXwxT1ruUMSMrmjVTv1IzHlaJRlrW21n8R5nSxkOw--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <017901ca7403$d4536700$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <006801ca6f1e$8dc488d0$710bc30a@sv.us.sonicwall.com> <9ac0c6aa0911270147w462ea1a3s7c13287a5c6608fd@mail.gmail.com> <008801ca6f4a$abe0cd20$710bc30a@sv.us.sonicwall.com> <9ac0c6aa0911270224j2bfe4a9fv9ff18e2e64171f35@mail.gmail.com> <2ffb6d060911270230o34272120w668a25c0593779fd@mail.gmail.com>
Subject: Re: IndexDivisor
Date: Thu, 3 Dec 2009 16:01:49 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138

Thanks.

IndexDivisor means, When set to N, then one in every N*termIndexInterval =
terms in the index is loaded into memory.

For example i am having 100,000 unique terms and termIndexInterval set =
to 5 then (100000 / (5*128) ) terms (=3D=3DX terms)will be loaded in to =
memory.=20
If termIndexInterval is set to 500 then (100000 / (5*100*128) ) =3D=3D> =
(X/100) terms should be loaded and the memory consmuped should be 100 =
times less than that of the first one. But is not the case. The memory =
difference is very less.=20

Could any one explain me the calculation of memory savings with respect =
to IndexDivisor.=20

Regards
Ganesh


----- Original Message -----=20
From: "Danil =C5=A2ORIN" <torindan@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Friday, November 27, 2009 4:00 PM
Subject: Re: IndexDivisor


Try to open with very large value (MAX_INT) it will load only first
term, and look up the rest from disk.

On Fri, Nov 27, 2009 at 12:24, Michael McCandless
<lucene@mikemccandless.com> wrote:
> If you are absolutely certain you won't be doing any lookups by term.
>
> The only use case I know of is internal, when Lucene's SegmentMerger
> is merging the segment with other segments. In this case, the merger
> does a linear iteration of all terms, and never a lookup by term, so
> we save CPU/RAM by not loading the terms index.
>
> Mike
>
> On Fri, Nov 27, 2009 at 5:16 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>> Thanks,
>>
>> May i know the purpose of using negative value?
>>
>> Regards
>> Ganesh
>>
>> ----- Original Message -----
>> From: "Michael McCandless" <lucene@mikemccandless.com>
>> To: <java-user@lucene.apache.org>
>> Sent: Friday, November 27, 2009 3:17 PM
>> Subject: Re: IndexDivisor
>>
>>
>>> This is the expected behavior.
>>>
>>> If you intend to use the reader for searching, looking doc freq,
>>> deleting docs, etc, you must pass a non-negative value for
>>> indexDivisor.
>>>
>>> Mike
>>>
>>> On Fri, Nov 27, 2009 at 12:00 AM, Ganesh <emailgane@yahoo.co.in> =
wrote:
>>>> Hello all,
>>>>
>>>> I am using Lucene v2.9.1, If I open my reader with positive value =
for termInfosIndexDivisor then the search works fine. If i set to -1, =
then search throws exception "terms index was not loaded when this =
reader was created". Is this the intend behaviour?
>>>>
>>>> I thought by setting this value to -1, No memory will be used and =
the terms will be fetched from the disk. Search might be slow but with =
very less memory consumption.
>>>>
>>>> Regards
>>>> Ganesh
>>>> Send instant messages to your online friends =
http://in.messenger.yahoo.com
>>>>
>>>> =
---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>> Send instant messages to your online friends =
http://in.messenger.yahoo.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 03 10:40:13 2009
Return-Path: <java-user-return-43887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31500 invoked from network); 3 Dec 2009 10:40:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Dec 2009 10:40:13 -0000
Received: (qmail 39626 invoked by uid 500); 3 Dec 2009 10:40:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39542 invoked by uid 500); 3 Dec 2009 10:40:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39532 invoked by uid 99); 3 Dec 2009 10:40:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 10:40:10 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 10:40:07 +0000
Received: by ywh15 with SMTP id 15so1177964ywh.5
        for <java-user@lucene.apache.org>; Thu, 03 Dec 2009 02:39:46 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.247.29 with SMTP id u29mr2578303ybh.90.1259836786061; Thu, 
	03 Dec 2009 02:39:46 -0800 (PST)
In-Reply-To: <2ffb6d060911270230o34272120w668a25c0593779fd@mail.gmail.com>
References: <006801ca6f1e$8dc488d0$710bc30a@sv.us.sonicwall.com>
	 <9ac0c6aa0911270147w462ea1a3s7c13287a5c6608fd@mail.gmail.com>
	 <008801ca6f4a$abe0cd20$710bc30a@sv.us.sonicwall.com>
	 <9ac0c6aa0911270224j2bfe4a9fv9ff18e2e64171f35@mail.gmail.com>
	 <2ffb6d060911270230o34272120w668a25c0593779fd@mail.gmail.com>
Date: Thu, 3 Dec 2009 05:39:46 -0500
Message-ID: <9ac0c6aa0912030239l8c70b37x8f936ae8905e8259@mail.gmail.com>
Subject: Re: IndexDivisor
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

That's indeed how index divisor works, so, the memory difference
should be 100X lower, for just the RAM consumed by the terms index.

Other things consume RAM (norms, deleted docs, field cache), so maybe
those are messing up your measurements?

Mike

On Fri, Nov 27, 2009 at 5:30 AM, Danil =C5=A2ORIN <torindan@gmail.com> wrot=
e:
> Try to open with very large value (MAX_INT) it will load only first
> term, and look up the rest from disk.
>
> On Fri, Nov 27, 2009 at 12:24, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>> If you are absolutely certain you won't be doing any lookups by term.
>>
>> The only use case I know of is internal, when Lucene's SegmentMerger
>> is merging the segment with other segments. =C2=A0In this case, the merg=
er
>> does a linear iteration of all terms, and never a lookup by term, so
>> we save CPU/RAM by not loading the terms index.
>>
>> Mike
>>
>> On Fri, Nov 27, 2009 at 5:16 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>>> Thanks,
>>>
>>> May i know the purpose of using negative value?
>>>
>>> Regards
>>> Ganesh
>>>
>>> ----- Original Message -----
>>> From: "Michael McCandless" <lucene@mikemccandless.com>
>>> To: <java-user@lucene.apache.org>
>>> Sent: Friday, November 27, 2009 3:17 PM
>>> Subject: Re: IndexDivisor
>>>
>>>
>>>> This is the expected behavior.
>>>>
>>>> If you intend to use the reader for searching, looking doc freq,
>>>> deleting docs, etc, you must pass a non-negative value for
>>>> indexDivisor.
>>>>
>>>> Mike
>>>>
>>>> On Fri, Nov 27, 2009 at 12:00 AM, Ganesh <emailgane@yahoo.co.in> wrote=
:
>>>>> Hello all,
>>>>>
>>>>> I am using Lucene v2.9.1, If I open my reader with positive value for=
 termInfosIndexDivisor then the search works fine. If i set to -1, then sea=
rch throws exception "terms index was not loaded when this reader was creat=
ed". Is this the intend behaviour?
>>>>>
>>>>> I thought by setting this value to -1, No memory will be used and the=
 terms will be fetched from the disk. Search might be slow but with very le=
ss memory consumption.
>>>>>
>>>>> Regards
>>>>> Ganesh
>>>>> Send instant messages to your online friends http://in.messenger.yaho=
o.com
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>> Send instant messages to your online friends http://in.messenger.yahoo.=
com
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 03 10:55:45 2009
Return-Path: <java-user-return-43888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37253 invoked from network); 3 Dec 2009 10:55:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Dec 2009 10:55:45 -0000
Received: (qmail 59921 invoked by uid 500); 3 Dec 2009 10:55:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59845 invoked by uid 500); 3 Dec 2009 10:55:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59835 invoked by uid 99); 3 Dec 2009 10:55:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 10:55:42 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [202.86.5.93] (HELO smtp106.mail.in.yahoo.com) (202.86.5.93)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 03 Dec 2009 10:55:40 +0000
Received: (qmail 60233 invoked from network); 3 Dec 2009 10:55:18 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=lHUwFSnV8lXPNNXba9tnqI8l3ZujbWlbkGZE9RjHIX0W+/Y+XHVmS597yumoB0KyFh4mjvLxhQ3W2JLtpkfi/KKoI/XQkA0ruZueu5ZqRS22mglLaLgXrJI2YgmvdftMeKnnZrqbM3hERfgChGT6iQdit+5W4QgpOAIq8526B54=  ;
Received: from  (emailgane@203.98.194.130 with login)
        by smtp106.mail.in.yahoo.com with SMTP; 03 Dec 2009 16:25:16 +0530 IST
X-Yahoo-SMTP: JObyHkuswBBrNSLZp.Ycd7Boqpr_GQ--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <018d01ca7407$18f59060$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <006801ca6f1e$8dc488d0$710bc30a@sv.us.sonicwall.com> <9ac0c6aa0911270147w462ea1a3s7c13287a5c6608fd@mail.gmail.com> <008801ca6f4a$abe0cd20$710bc30a@sv.us.sonicwall.com> <9ac0c6aa0911270224j2bfe4a9fv9ff18e2e64171f35@mail.gmail.com> <2ffb6d060911270230o34272120w668a25c0593779fd@mail.gmail.com> <9ac0c6aa0912030239l8c70b37x8f936ae8905e8259@mail.gmail.com>
Subject: Re: IndexDivisor
Date: Thu, 3 Dec 2009 16:25:13 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138

I don't have norms, I don't delete docs using IndexReader. I have =
switched off sorting. I think fieldcache is used for sorting.
I am just loading all the index with different values and calculating =
the memory difference.=20

I am having 100 million records splitted across database. I loaded all =
the database with index divisor value 1000, 5000, and 10000 and the =
memory consumption seems to be same.=20

Regards
Ganesh =20

----- Original Message -----=20
From: "Michael McCandless" <lucene@mikemccandless.com>
To: <java-user@lucene.apache.org>
Sent: Thursday, December 03, 2009 4:09 PM
Subject: Re: IndexDivisor


That's indeed how index divisor works, so, the memory difference
should be 100X lower, for just the RAM consumed by the terms index.

Other things consume RAM (norms, deleted docs, field cache), so maybe
those are messing up your measurements?

Mike

On Fri, Nov 27, 2009 at 5:30 AM, Danil =C5=A2ORIN <torindan@gmail.com> =
wrote:
> Try to open with very large value (MAX_INT) it will load only first
> term, and look up the rest from disk.
>
> On Fri, Nov 27, 2009 at 12:24, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>> If you are absolutely certain you won't be doing any lookups by term.
>>
>> The only use case I know of is internal, when Lucene's SegmentMerger
>> is merging the segment with other segments. In this case, the merger
>> does a linear iteration of all terms, and never a lookup by term, so
>> we save CPU/RAM by not loading the terms index.
>>
>> Mike
>>
>> On Fri, Nov 27, 2009 at 5:16 AM, Ganesh <emailgane@yahoo.co.in> =
wrote:
>>> Thanks,
>>>
>>> May i know the purpose of using negative value?
>>>
>>> Regards
>>> Ganesh
>>>
>>> ----- Original Message -----
>>> From: "Michael McCandless" <lucene@mikemccandless.com>
>>> To: <java-user@lucene.apache.org>
>>> Sent: Friday, November 27, 2009 3:17 PM
>>> Subject: Re: IndexDivisor
>>>
>>>
>>>> This is the expected behavior.
>>>>
>>>> If you intend to use the reader for searching, looking doc freq,
>>>> deleting docs, etc, you must pass a non-negative value for
>>>> indexDivisor.
>>>>
>>>> Mike
>>>>
>>>> On Fri, Nov 27, 2009 at 12:00 AM, Ganesh <emailgane@yahoo.co.in> =
wrote:
>>>>> Hello all,
>>>>>
>>>>> I am using Lucene v2.9.1, If I open my reader with positive value =
for termInfosIndexDivisor then the search works fine. If i set to -1, =
then search throws exception "terms index was not loaded when this =
reader was created". Is this the intend behaviour?
>>>>>
>>>>> I thought by setting this value to -1, No memory will be used and =
the terms will be fetched from the disk. Search might be slow but with =
very less memory consumption.
>>>>>
>>>>> Regards
>>>>> Ganesh
>>>>> Send instant messages to your online friends =
http://in.messenger.yahoo.com
>>>>>
>>>>> =
---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>
>>>> =
---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>> Send instant messages to your online friends =
http://in.messenger.yahoo.com
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 03 11:17:52 2009
Return-Path: <java-user-return-43889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43939 invoked from network); 3 Dec 2009 11:17:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Dec 2009 11:17:52 -0000
Received: (qmail 86658 invoked by uid 500); 3 Dec 2009 11:17:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86575 invoked by uid 500); 3 Dec 2009 11:17:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86565 invoked by uid 99); 3 Dec 2009 11:17:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 11:17:49 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 11:17:46 +0000
Received: by yxe30 with SMTP id 30so1207152yxe.29
        for <java-user@lucene.apache.org>; Thu, 03 Dec 2009 03:17:25 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.252.17 with SMTP id z17mr2572419ybh.277.1259839045751; 
	Thu, 03 Dec 2009 03:17:25 -0800 (PST)
In-Reply-To: <018d01ca7407$18f59060$710bc30a@sv.us.sonicwall.com>
References: <006801ca6f1e$8dc488d0$710bc30a@sv.us.sonicwall.com>
	 <9ac0c6aa0911270147w462ea1a3s7c13287a5c6608fd@mail.gmail.com>
	 <008801ca6f4a$abe0cd20$710bc30a@sv.us.sonicwall.com>
	 <9ac0c6aa0911270224j2bfe4a9fv9ff18e2e64171f35@mail.gmail.com>
	 <2ffb6d060911270230o34272120w668a25c0593779fd@mail.gmail.com>
	 <9ac0c6aa0912030239l8c70b37x8f936ae8905e8259@mail.gmail.com>
	 <018d01ca7407$18f59060$710bc30a@sv.us.sonicwall.com>
Date: Thu, 3 Dec 2009 06:17:25 -0500
Message-ID: <9ac0c6aa0912030317h642f5194g6e48d08d64972a0c@mail.gmail.com>
Subject: Re: IndexDivisor
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

How do you measure memory consumption?

If you pass -1 for the divisor do you still see no difference?

Can you post the output of CheckIndex on your index?

Are you sure your index has no deletions?

Mike

On Thu, Dec 3, 2009 at 5:55 AM, Ganesh <emailgane@yahoo.co.in> wrote:
> I don't have norms, I don't delete docs using IndexReader. I have switche=
d off sorting. I think fieldcache is used for sorting.
> I am just loading all the index with different values and calculating the=
 memory difference.
>
> I am having 100 million records splitted across database. I loaded all th=
e database with index divisor value 1000, 5000, and 10000 and the memory co=
nsumption seems to be same.
>
> Regards
> Ganesh
>
> ----- Original Message -----
> From: "Michael McCandless" <lucene@mikemccandless.com>
> To: <java-user@lucene.apache.org>
> Sent: Thursday, December 03, 2009 4:09 PM
> Subject: Re: IndexDivisor
>
>
> That's indeed how index divisor works, so, the memory difference
> should be 100X lower, for just the RAM consumed by the terms index.
>
> Other things consume RAM (norms, deleted docs, field cache), so maybe
> those are messing up your measurements?
>
> Mike
>
> On Fri, Nov 27, 2009 at 5:30 AM, Danil =C5=A2ORIN <torindan@gmail.com> wr=
ote:
>> Try to open with very large value (MAX_INT) it will load only first
>> term, and look up the rest from disk.
>>
>> On Fri, Nov 27, 2009 at 12:24, Michael McCandless
>> <lucene@mikemccandless.com> wrote:
>>> If you are absolutely certain you won't be doing any lookups by term.
>>>
>>> The only use case I know of is internal, when Lucene's SegmentMerger
>>> is merging the segment with other segments. In this case, the merger
>>> does a linear iteration of all terms, and never a lookup by term, so
>>> we save CPU/RAM by not loading the terms index.
>>>
>>> Mike
>>>
>>> On Fri, Nov 27, 2009 at 5:16 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>>>> Thanks,
>>>>
>>>> May i know the purpose of using negative value?
>>>>
>>>> Regards
>>>> Ganesh
>>>>
>>>> ----- Original Message -----
>>>> From: "Michael McCandless" <lucene@mikemccandless.com>
>>>> To: <java-user@lucene.apache.org>
>>>> Sent: Friday, November 27, 2009 3:17 PM
>>>> Subject: Re: IndexDivisor
>>>>
>>>>
>>>>> This is the expected behavior.
>>>>>
>>>>> If you intend to use the reader for searching, looking doc freq,
>>>>> deleting docs, etc, you must pass a non-negative value for
>>>>> indexDivisor.
>>>>>
>>>>> Mike
>>>>>
>>>>> On Fri, Nov 27, 2009 at 12:00 AM, Ganesh <emailgane@yahoo.co.in> wrot=
e:
>>>>>> Hello all,
>>>>>>
>>>>>> I am using Lucene v2.9.1, If I open my reader with positive value fo=
r termInfosIndexDivisor then the search works fine. If i set to -1, then se=
arch throws exception "terms index was not loaded when this reader was crea=
ted". Is this the intend behaviour?
>>>>>>
>>>>>> I thought by setting this value to -1, No memory will be used and th=
e terms will be fetched from the disk. Search might be slow but with very l=
ess memory consumption.
>>>>>>
>>>>>> Regards
>>>>>> Ganesh
>>>>>> Send instant messages to your online friends http://in.messenger.yah=
oo.com
>>>>>>
>>>>>> --------------------------------------------------------------------=
-
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>> Send instant messages to your online friends http://in.messenger.yahoo=
.com
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> Send instant messages to your online friends http://in.messenger.yahoo.co=
m
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 03 12:16:06 2009
Return-Path: <java-user-return-43890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58082 invoked from network); 3 Dec 2009 12:16:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Dec 2009 12:16:06 -0000
Received: (qmail 41341 invoked by uid 500); 3 Dec 2009 12:16:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41252 invoked by uid 500); 3 Dec 2009 12:16:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41242 invoked by uid 99); 3 Dec 2009 12:16:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 12:16:03 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [202.86.5.91] (HELO smtp104.mail.in.yahoo.com) (202.86.5.91)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 03 Dec 2009 12:15:52 +0000
Received: (qmail 86653 invoked from network); 3 Dec 2009 12:15:29 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=boLc072fk1EIdNVU2d6VnXfeOqxOYvJRUJ1gI9vE0jDHq0qBoO9QNb6qlvMMww0vsXBLk8XtAOXCUKPmDQFjq4hciKhiXYLkaeuIUXhXbBmFaH9/qNDZVMzn3i4uSzLfgXil46aJPMGRQhCSRvmq0CyTGwv5n6t9NZgKVgcdPpQ=  ;
Received: from  (emailgane@203.98.194.130 with login)
        by smtp104.mail.in.yahoo.com with SMTP; 03 Dec 2009 17:45:29 +0530 IST
X-Yahoo-SMTP: JObyHkuswBBrNSLZp.Ycd7Boqpr_GQ--
X-YMail-OSG: VpZE540VM1k7L4tqEOgqx1eBSaIrbkKzn9jOfO6mORmXksu9ul7CWXhtp4OloK29Qi2OPk89JP7NATU1b1lHWBpkrhqJ9hu8.Xogkyf23Nf1HYWtn6jNJlUFSiNqLiJ8SqxDsi0.7iRAYTcokQ0N8gqed5w0c_Dw4XKpEEdLfPF3wOOY08x6durSR.0sF9EnFI7nQXjNBipBdH1EyORCS2KXEekYyKzDY4CogzBSdYxwZDw9B8.z3w--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <01bf01ca7412$4d8dea60$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <006801ca6f1e$8dc488d0$710bc30a@sv.us.sonicwall.com> <9ac0c6aa0911270147w462ea1a3s7c13287a5c6608fd@mail.gmail.com> <008801ca6f4a$abe0cd20$710bc30a@sv.us.sonicwall.com> <9ac0c6aa0911270224j2bfe4a9fv9ff18e2e64171f35@mail.gmail.com> <2ffb6d060911270230o34272120w668a25c0593779fd@mail.gmail.com> <9ac0c6aa0912030239l8c70b37x8f936ae8905e8259@mail.gmail.com> <018d01ca7407$18f59060$710bc30a@sv.us.sonicwall.com> <9ac0c6aa0912030317h642f5194g6e48d08d64972a0c@mail.gmail.com>
Subject: Re: IndexDivisor
Date: Thu, 3 Dec 2009 17:45:25 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

I don't have deletions. No norms. No sorting.=20
I am setting 70 MB for IndexWriter RamBuffer but not indexing any =
documents. Swtiched off indexing.
I have enabled TermVector for one field.=20
I am opening all 30 database with different value of indexdivisor.

Below are my stats
IndexDivisor    Memory
    -1                7 MB
    1                  486 MB
    100              180 MB
    1000            176 MB.

1. Whether term vector will consume RAM. I think it should only consume =
disk space.

2. By setting RAM buffer for IW, Does it will allocate memory Or based =
on the usage the memory will be allocated / increased.=20

Regards
Ganesh

----- Original Message -----=20
From: "Michael McCandless" <lucene@mikemccandless.com>
To: <java-user@lucene.apache.org>
Sent: Thursday, December 03, 2009 4:47 PM
Subject: Re: IndexDivisor


How do you measure memory consumption?

If you pass -1 for the divisor do you still see no difference?

Can you post the output of CheckIndex on your index?

Are you sure your index has no deletions?

Mike

On Thu, Dec 3, 2009 at 5:55 AM, Ganesh <emailgane@yahoo.co.in> wrote:
> I don't have norms, I don't delete docs using IndexReader. I have =
switched off sorting. I think fieldcache is used for sorting.
> I am just loading all the index with different values and calculating =
the memory difference.
>
> I am having 100 million records splitted across database. I loaded all =
the database with index divisor value 1000, 5000, and 10000 and the =
memory consumption seems to be same.
>
> Regards
> Ganesh
>
> ----- Original Message -----
> From: "Michael McCandless" <lucene@mikemccandless.com>
> To: <java-user@lucene.apache.org>
> Sent: Thursday, December 03, 2009 4:09 PM
> Subject: Re: IndexDivisor
>
>
> That's indeed how index divisor works, so, the memory difference
> should be 100X lower, for just the RAM consumed by the terms index.
>
> Other things consume RAM (norms, deleted docs, field cache), so maybe
> those are messing up your measurements?
>
> Mike
>
> On Fri, Nov 27, 2009 at 5:30 AM, Danil =C5=A2ORIN <torindan@gmail.com> =
wrote:
>> Try to open with very large value (MAX_INT) it will load only first
>> term, and look up the rest from disk.
>>
>> On Fri, Nov 27, 2009 at 12:24, Michael McCandless
>> <lucene@mikemccandless.com> wrote:
>>> If you are absolutely certain you won't be doing any lookups by =
term.
>>>
>>> The only use case I know of is internal, when Lucene's SegmentMerger
>>> is merging the segment with other segments. In this case, the merger
>>> does a linear iteration of all terms, and never a lookup by term, so
>>> we save CPU/RAM by not loading the terms index.
>>>
>>> Mike
>>>
>>> On Fri, Nov 27, 2009 at 5:16 AM, Ganesh <emailgane@yahoo.co.in> =
wrote:
>>>> Thanks,
>>>>
>>>> May i know the purpose of using negative value?
>>>>
>>>> Regards
>>>> Ganesh
>>>>
>>>> ----- Original Message -----
>>>> From: "Michael McCandless" <lucene@mikemccandless.com>
>>>> To: <java-user@lucene.apache.org>
>>>> Sent: Friday, November 27, 2009 3:17 PM
>>>> Subject: Re: IndexDivisor
>>>>
>>>>
>>>>> This is the expected behavior.
>>>>>
>>>>> If you intend to use the reader for searching, looking doc freq,
>>>>> deleting docs, etc, you must pass a non-negative value for
>>>>> indexDivisor.
>>>>>
>>>>> Mike
>>>>>
>>>>> On Fri, Nov 27, 2009 at 12:00 AM, Ganesh <emailgane@yahoo.co.in> =
wrote:
>>>>>> Hello all,
>>>>>>
>>>>>> I am using Lucene v2.9.1, If I open my reader with positive value =
for termInfosIndexDivisor then the search works fine. If i set to -1, =
then search throws exception "terms index was not loaded when this =
reader was created". Is this the intend behaviour?
>>>>>>
>>>>>> I thought by setting this value to -1, No memory will be used and =
the terms will be fetched from the disk. Search might be slow but with =
very less memory consumption.
>>>>>>
>>>>>> Regards
>>>>>> Ganesh
>>>>>> Send instant messages to your online friends =
http://in.messenger.yahoo.com
>>>>>>
>>>>>> =
---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>
>>>>> =
---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>> Send instant messages to your online friends =
http://in.messenger.yahoo.com
>>>>
>>>> =
---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> Send instant messages to your online friends =
http://in.messenger.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 03 12:43:21 2009
Return-Path: <java-user-return-43891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71393 invoked from network); 3 Dec 2009 12:43:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Dec 2009 12:43:21 -0000
Received: (qmail 67130 invoked by uid 500); 3 Dec 2009 12:43:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67068 invoked by uid 500); 3 Dec 2009 12:43:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67057 invoked by uid 99); 3 Dec 2009 12:43:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 12:43:19 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [203.104.17.155] (HELO web94806.mail.in2.yahoo.com) (203.104.17.155)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 03 Dec 2009 12:43:09 +0000
Received: (qmail 95613 invoked by uid 60001); 3 Dec 2009 12:42:47 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1259844167; bh=mWbbq6Ulx8D5evrK/H+P7DJhN84UmFTMbxs6Ziv+B1M=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=LZL7pFD12yzCPZdO5v8QIFcSnx/wDcyLz2m5yJazZ6yrOaQ6g2uJ/PcRhvq4B6EctP1DMc1BP4afW44n8u++V8TofBqibk/ssTqFf8EqMfxOVunazRRz9Ld2OwNpwmXELEJplxc5tO4Zq8iEohsRNvueFEurnwyN/RLYhH+yBLs=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=hpXHUtYDXNjGa+lh75YxPRHUFfPU3bQQstk+G4AdbNu6Vbqwg3MF8DM4xAiJWYBUhl+z9DJhcorIbUSJOsqLS93xV1SEAvlTugDRp8zPwsw5g+YzhPM/11SLyXBqvOHDvwbg2WrU5RwUyfhPZrcs8+NDILPbE9szxbbnFpjuN3E=;
Message-ID: <470630.94130.qm@web94806.mail.in2.yahoo.com>
X-YMail-OSG: KVMmxfUVM1kcYVxNjM10zbVXMXfXlIiTzgoosAfj9m9aC6sCTXZlUCDXFTXhEwBKt6e.X8YoJnIVHIv1k66qxrlW43seODC9bYBNv8nh7_bI3c_7NlW5QWLDyynPSx1mSCVIbAgkMzCcEH6lAyEHEuUq9zOIskEYFp6ehtt4UeitVOsRs6_hjyl27V7KJSLkSm7DFeXrD6eFQbxkeCDbRnBNrlO_iLWdWxpRrbGcIYkDHvXbvHswIOcnVn4nIkmx8onEWOnq
Received: from [209.73.190.209] by web94806.mail.in2.yahoo.com via HTTP; Thu, 03 Dec 2009 18:12:47 IST
X-Mailer: YahooMailClassic/8.1.6 YahooMailWebService/0.8.100.260964
Date: Thu, 3 Dec 2009 18:12:47 +0530 (IST)
From: DHIVYA M <dhivyakrishnan87@yahoo.com>
Subject: How to do relevancy ranking in lucene
To: java user <java-user@lucene.apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1601032916-1259844167=:94130"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1601032916-1259844167=:94130
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi all,
Am using lucene 2.3.2.
When i search using lucene demo am getting all the results which contains t=
he query. But i would like to restrict my results to the relevant match and=
 not all the documents containing the query string.
=A0
Ex:
Query: how to search a string?
=A0
Response am getting is: all documents containing words - search, string
=A0
Desired response: I would like to compare the=A0documents that contains bot=
h the words and the documents that contains anyone word of the query string=
 - to find the relevant documents.
=A0
Kindly suggest me as how i should proceed and the details regarding this co=
ntext.
Urgent help needed.
=A0
Thanks in advance for the timely help.
Dhivya=0A=0A=0A      The INTERNET now has a personality. YOURS! See your Ya=
hoo! Homepage. http://in.yahoo.com/
--0-1601032916-1259844167=:94130--

From java-user-return-43892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 03 12:52:59 2009
Return-Path: <java-user-return-43892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74110 invoked from network); 3 Dec 2009 12:52:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Dec 2009 12:52:58 -0000
Received: (qmail 82222 invoked by uid 500); 3 Dec 2009 12:52:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82151 invoked by uid 500); 3 Dec 2009 12:52:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82141 invoked by uid 99); 3 Dec 2009 12:52:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 12:52:56 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 12:52:54 +0000
Received: by yxe30 with SMTP id 30so1275665yxe.29
        for <java-user@lucene.apache.org>; Thu, 03 Dec 2009 04:52:32 -0800 (PST)
MIME-Version: 1.0
Received: by 10.151.88.30 with SMTP id q30mr2743786ybl.315.1259844752747; Thu, 
	03 Dec 2009 04:52:32 -0800 (PST)
In-Reply-To: <01bf01ca7412$4d8dea60$710bc30a@sv.us.sonicwall.com>
References: <006801ca6f1e$8dc488d0$710bc30a@sv.us.sonicwall.com>
	 <9ac0c6aa0911270147w462ea1a3s7c13287a5c6608fd@mail.gmail.com>
	 <008801ca6f4a$abe0cd20$710bc30a@sv.us.sonicwall.com>
	 <9ac0c6aa0911270224j2bfe4a9fv9ff18e2e64171f35@mail.gmail.com>
	 <2ffb6d060911270230o34272120w668a25c0593779fd@mail.gmail.com>
	 <9ac0c6aa0912030239l8c70b37x8f936ae8905e8259@mail.gmail.com>
	 <018d01ca7407$18f59060$710bc30a@sv.us.sonicwall.com>
	 <9ac0c6aa0912030317h642f5194g6e48d08d64972a0c@mail.gmail.com>
	 <01bf01ca7412$4d8dea60$710bc30a@sv.us.sonicwall.com>
Date: Thu, 3 Dec 2009 07:52:32 -0500
Message-ID: <9ac0c6aa0912030452m660fec4byf4c9e368f24b57cf@mail.gmail.com>
Subject: Re: IndexDivisor
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

On Thu, Dec 3, 2009 at 7:15 AM, Ganesh <emailgane@yahoo.co.in> wrote:

> Below are my stats
> IndexDivisor =A0 =A0Memory
> =A0 =A0-1 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A07 MB
> =A0 =A01 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0486 MB
> =A0 =A0100 =A0 =A0 =A0 =A0 =A0 =A0 =A0180 MB
> =A0 =A01000 =A0 =A0 =A0 =A0 =A0 =A0176 MB.

Do you simply create the IndexWriter & IndexReader, but do no
searching/indexing?

How are you measuring RAM?  You should use a RAM profiler (eg YourKit)
to get the "real" usage, not counting garbage that's yet to be
collected.

My guess is the shear process of Lucene scanning your terms index
creates lots of garbage and you're measuring the RAM consumed by that
garbage.  The garbage should be harmless (it'll eventually get GCd &
reused).

> 1. Whether term vector will consume RAM. I think it should only consume d=
isk space.

No RAM is consumed.

> 2. By setting RAM buffer for IW, Does it will allocate memory Or based on=
 the usage the memory will be allocated / increased.

Only a little RAM is allocated up front, I think.  It's only as you
start indexing docs that the big RAM is really allocated.  After a
flush the RAM is then reused (ie, not freed) for subsequent segments.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 03 13:16:19 2009
Return-Path: <java-user-return-43893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80102 invoked from network); 3 Dec 2009 13:16:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Dec 2009 13:16:19 -0000
Received: (qmail 2844 invoked by uid 500); 3 Dec 2009 13:16:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2757 invoked by uid 500); 3 Dec 2009 13:16:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2747 invoked by uid 99); 3 Dec 2009 13:16:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 13:16:16 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 13:16:14 +0000
Received: by yxe30 with SMTP id 30so1294492yxe.29
        for <java-user@lucene.apache.org>; Thu, 03 Dec 2009 05:15:54 -0800 (PST)
MIME-Version: 1.0
Received: by 10.151.18.19 with SMTP id v19mr2875566ybi.66.1259846153252; Thu, 
	03 Dec 2009 05:15:53 -0800 (PST)
In-Reply-To: <34660cca0912020944n2b6b7965i6753f1b47b8f4820@mail.gmail.com>
References: <34660cca0912020944n2b6b7965i6753f1b47b8f4820@mail.gmail.com>
Date: Thu, 3 Dec 2009 08:15:53 -0500
Message-ID: <9ac0c6aa0912030515i6832f6cfucc765ca8a173de@mail.gmail.com>
Subject: Re: Potential leak of file resources in SpellChecker
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

This sounds like an important bug fix -- could you open a Jira issue &
attach a patch?  Thanks!

Mike

2009/12/2 Eirik Bj=F8rsn=F8s <eirbjo@gmail.com>:
> Hi,
>
> I'm using SpellChecker (in Lucene contrib) to help users of SVNSearch
> who can't type right:
>
> http://svnsearch.org/svnsearch/repos/ASF/search?logMessage=3Dlusene
>
> SpellChecker works very well for my purpose, but I've encountered a
> possible file resource leak issue:
>
> I can't find any way to close the IndexSearcher (and IndexReader) that
> is being used by SpellChecker internally.
>
> I've worked around this issue by keeping a single SpellChecker open
> for each repository, but I'd really like to be able to close it and
> reopen it on demand without leaking file descriptors.
>
> Could we add a close() method to SpellChecker that will close the
> IndexSearcher and null the reference to it? And perhaps add some code
> that reopens the searcher if the reference to it is null? Or would
> that break thread safety of SpellChecker?
>
> The attached patch adds a close method but leaves it to the user to
> call setSpellIndex to reopen the searcher.
>
> Thanks,
> Eirik.
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 03 13:39:38 2009
Return-Path: <java-user-return-43894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93720 invoked from network); 3 Dec 2009 13:39:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Dec 2009 13:39:38 -0000
Received: (qmail 32701 invoked by uid 500); 3 Dec 2009 13:39:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32614 invoked by uid 500); 3 Dec 2009 13:39:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32603 invoked by uid 99); 3 Dec 2009 13:39:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 13:39:35 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.219.215 as permitted sender)
Received: from [209.85.219.215] (HELO mail-ew0-f215.google.com) (209.85.219.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 13:39:27 +0000
Received: by ewy7 with SMTP id 7so421370ewy.12
        for <java-user@lucene.apache.org>; Thu, 03 Dec 2009 05:39:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=wjnWJLzVLnQD5GGTFLI1j+MktNkF7KMtnj3kCEMhNxw=;
        b=bIH6j4ksy+FERtpAOZuvH9VesXccv6HapYOC2wyxKFCoBVHKyuA/gEhSOu0gqFSaFP
         yK+O/qIFTmyiPqCF7BCWqmNa5dEgpn9EmsryZVClCLkIV/c6VM+Qxo/7swwrOcVJ3xay
         wXA067NhdPkdRQMR9OVfXicgFTWG6KLWrIdN0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=wdW8BvEQ+tt9FXYfYBzREvK3mWvi/9PqTO7cTL2wKZQSuOlG3fG9i79ZpYaWKqBFDP
         hk3Nka8CGeaffsIFSclDv03rB8pTcQu7SCwnRH+fM2tfR/3vDoem6U5BOaFdL+frBpxn
         1PfvAnsC0Adfk6Bf5lqBG/T0YrHfdtg0LNkjM=
MIME-Version: 1.0
Received: by 10.216.93.14 with SMTP id k14mr528823wef.152.1259847546362; Thu, 
	03 Dec 2009 05:39:06 -0800 (PST)
In-Reply-To: <470630.94130.qm@web94806.mail.in2.yahoo.com>
References: <470630.94130.qm@web94806.mail.in2.yahoo.com>
Date: Thu, 3 Dec 2009 08:39:06 -0500
Message-ID: <359a92830912030539o1158fd79y878869ab041eabb1@mail.gmail.com>
Subject: Re: How to do relevancy ranking in lucene
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d7e06478da690479d31dee
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d7e06478da690479d31dee
Content-Type: text/plain; charset=ISO-8859-1

I don't really understand your goal here. Lucene already does this with
it's relevancy ranking. By definition, it calculates a score for each
document and ranks them in order of the score. This is NOT a simple
"is the word in the document or not"....

You can read about the scoring algorithm here:
http://lucene.apache.org/java/2_1_0/scoring.html

If this is way off base, can you give us some details of why
the current ranking doesn't fit your needs?

Best
Erick


On Thu, Dec 3, 2009 at 7:42 AM, DHIVYA M <dhivyakrishnan87@yahoo.com> wrote:

> Hi all,
> Am using lucene 2.3.2.
> When i search using lucene demo am getting all the results which contains
> the query. But i would like to restrict my results to the relevant match and
> not all the documents containing the query string.
>
> Ex:
> Query: how to search a string?
>
> Response am getting is: all documents containing words - search, string
>
> Desired response: I would like to compare the documents that contains both
> the words and the documents that contains anyone word of the query string -
> to find the relevant documents.
>
> Kindly suggest me as how i should proceed and the details regarding this
> context.
> Urgent help needed.
>
> Thanks in advance for the timely help.
> Dhivya
>
>
>      The INTERNET now has a personality. YOURS! See your Yahoo! Homepage.
> http://in.yahoo.com/

--0016e6d7e06478da690479d31dee--

From java-user-return-43895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 03 14:30:56 2009
Return-Path: <java-user-return-43895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21508 invoked from network); 3 Dec 2009 14:30:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Dec 2009 14:30:56 -0000
Received: (qmail 99788 invoked by uid 500); 3 Dec 2009 14:30:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99688 invoked by uid 500); 3 Dec 2009 14:30:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99678 invoked by uid 99); 3 Dec 2009 14:30:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 14:30:53 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 14:30:51 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NGChS-0003xi-Cw
	for java-user@lucene.apache.org; Thu, 03 Dec 2009 06:30:30 -0800
Message-ID: <26626826.post@talk.nabble.com>
Date: Thu, 3 Dec 2009 06:30:30 -0800 (PST)
From: Paul Williams <mopster@gmail.com>
To: java-user@lucene.apache.org
Subject: Problem with close IndexWriter pausing due to locked files
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mopster@gmail.com


Hi,


I have found an issue with a Lucene index locking files from a Searcher
instance. So that when a mergeSegments happens on a indexwriter close it
actually hangs until the search instance is closed

This seems to happen only when the index is stored on a network SAN device.
When stored elsewhere it acts normally.

Lucene version:2.1 and 2.3. going to test later versions.

The merge segments hangs here:-

DEBUG 12:59:09,993 debug.ThreadDump  -   at
java.io.WinNTFileSystem.delete0(Native Method)
DEBUG 12:59:09,993 debug.ThreadDump  -   at
java.io.Win32FileSystem.delete(Win32FileSystem.java:504)
DEBUG 12:59:09,993 debug.ThreadDump  -   at
java.io.File.delete(File.java:871)
DEBUG 12:59:09,993 debug.ThreadDump  -   at
org.apache.lucene.store.FSDirectory.deleteFile(FSDirectory.java:350)
DEBUG 12:59:09,993 debug.ThreadDump  -   at
org.apache.lucene.index.IndexFileDeleter.deleteFile(IndexFileDeleter.java:224)
DEBUG 12:59:09,993 debug.ThreadDump  -   at
org.apache.lucene.index.IndexFileDeleter.deleteFiles(IndexFileDeleter.java:217)
DEBUG 12:59:09,993 debug.ThreadDump  -   at
org.apache.lucene.index.IndexFileDeleter.deleteFiles(IndexFileDeleter.java:298)
DEBUG 12:59:09,993 debug.ThreadDump  -   at
org.apache.lucene.index.IndexFileDeleter.deleteFiles(IndexFileDeleter.java:215)
DEBUG 12:59:09,993 debug.ThreadDump  -   at
org.apache.lucene.index.IndexFileDeleter.deleteSegments(IndexFileDeleter.java:177)
DEBUG 12:59:09,993 debug.ThreadDump  -   at
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:1582)
DEBUG 12:59:10,008 debug.ThreadDump  -   at
org.apache.lucene.index.IndexWriter.maybeMergeSegments(IndexWriter.java:1415)
DEBUG 12:59:10,008 debug.ThreadDump  -   at
org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:1352)
DEBUG 12:59:10,008 debug.ThreadDump  -   at
org.apache.lucene.index.IndexWriter.close(IndexWriter.java:588)

Once the searcher is closed from a seperate JVM/Server it frees the files
and the writer close can finish.

Has anyone else seen this behaviour?

I see it catches the IO exception on deletefiles in the indexwriter and puts
it in delete list for later. But this does not seem to happen on this
occasion. it just seems to hang

Any ideas on a way round this?

Regards,

Paul


-- 
View this message in context: http://old.nabble.com/Problem-with-close-IndexWriter-pausing-due-to-locked-files-tp26626826p26626826.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 03 14:31:14 2009
Return-Path: <java-user-return-43896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21597 invoked from network); 3 Dec 2009 14:31:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Dec 2009 14:31:14 -0000
Received: (qmail 1711 invoked by uid 500); 3 Dec 2009 14:31:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1626 invoked by uid 500); 3 Dec 2009 14:31:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1616 invoked by uid 99); 3 Dec 2009 14:31:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 14:31:11 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [202.86.5.92] (HELO smtp105.mail.in.yahoo.com) (202.86.5.92)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 03 Dec 2009 14:31:08 +0000
Received: (qmail 5400 invoked from network); 3 Dec 2009 14:30:45 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=TT4yxIXfwew433NWZdd6IoRbqn5GeSqcbz6Y0F7cHSMDS2Yoq0uSjosWZwCCuU/FxGvwNkRNme4YDxKTUVB2sC6KbrapZfjCqSGpIL/rqyCaLGK0Dd+kaMWRn66beomjlggvtvFE0QX/cxwhGbVBwlMOT87cPu3J2tGKVfABMNk=  ;
Received: from  (emailgane@203.98.194.130 with login)
        by smtp105.mail.in.yahoo.com with SMTP; 03 Dec 2009 20:00:45 +0530 IST
X-Yahoo-SMTP: JObyHkuswBBrNSLZp.Ycd7Boqpr_GQ--
X-YMail-OSG: vj5nvLkVM1kLTVtfmDD2kcPojpBSkbvDFP_P.r8FdllyQyDUSzaB.6IdaEjN8paNJCW7pxmAVbPgFVWxyFE3p2449X8KxrWV6GYLkH8ZOo_RQSOE35H4rcMEv_HMpVjXyW94o4Q3JfADKnm35tNciCWo.2UsngONMet9rQMawb.jjDJh_yYqh3mHBce5eXXKocbtvOMrFtlow_6WUsnIScZLZvu750xKFmpqV3pArF2_0dnrQygFW6kkCvmgqOVaOwomfNtQT1dlq1KEvoYd.GqUsQ--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <020601ca7425$32f57700$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <006801ca6f1e$8dc488d0$710bc30a@sv.us.sonicwall.com> <9ac0c6aa0911270147w462ea1a3s7c13287a5c6608fd@mail.gmail.com> <008801ca6f4a$abe0cd20$710bc30a@sv.us.sonicwall.com> <9ac0c6aa0911270224j2bfe4a9fv9ff18e2e64171f35@mail.gmail.com> <2ffb6d060911270230o34272120w668a25c0593779fd@mail.gmail.com> <9ac0c6aa0912030239l8c70b37x8f936ae8905e8259@mail.gmail.com> <018d01ca7407$18f59060$710bc30a@sv.us.sonicwall.com> <9ac0c6aa0912030317h642f5194g6e48d08d64972a0c@mail.gmail.com> <01bf01ca7412$4d8dea60$710bc30a@sv.us.sonicwall.com> <9ac0c6aa0912030452m660fec4byf4c9e368f24b57cf@mail.gmail.com>
Subject: Re: IndexDivisor
Date: Thu, 3 Dec 2009 20:00:41 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138

Thanks mike.

I am opening the reader and warming it up and then calculating the =
memory consumed.
long usedMemory   =3D runtime.totalMemory() - runtime.freeMemory();

Regards
Ganesh

----- Original Message -----=20
From: "Michael McCandless" <lucene@mikemccandless.com>
To: <java-user@lucene.apache.org>
Sent: Thursday, December 03, 2009 6:22 PM
Subject: Re: IndexDivisor


On Thu, Dec 3, 2009 at 7:15 AM, Ganesh <emailgane@yahoo.co.in> wrote:

> Below are my stats
> IndexDivisor Memory
> -1 7 MB
> 1 486 MB
> 100 180 MB
> 1000 176 MB.

Do you simply create the IndexWriter & IndexReader, but do no
searching/indexing?

How are you measuring RAM?  You should use a RAM profiler (eg YourKit)
to get the "real" usage, not counting garbage that's yet to be
collected.

My guess is the shear process of Lucene scanning your terms index
creates lots of garbage and you're measuring the RAM consumed by that
garbage.  The garbage should be harmless (it'll eventually get GCd &
reused).

> 1. Whether term vector will consume RAM. I think it should only =
consume disk space.

No RAM is consumed.

> 2. By setting RAM buffer for IW, Does it will allocate memory Or based =
on the usage the memory will be allocated / increased.

Only a little RAM is allocated up front, I think.  It's only as you
start indexing docs that the big RAM is really allocated.  After a
flush the RAM is then reused (ie, not freed) for subsequent segments.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 03 15:05:41 2009
Return-Path: <java-user-return-43897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32287 invoked from network); 3 Dec 2009 15:05:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Dec 2009 15:05:41 -0000
Received: (qmail 63369 invoked by uid 500); 3 Dec 2009 15:05:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63293 invoked by uid 500); 3 Dec 2009 15:05:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63276 invoked by uid 99); 3 Dec 2009 15:05:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 15:05:38 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of torindan@gmail.com designates 74.125.92.24 as permitted sender)
Received: from [74.125.92.24] (HELO qw-out-2122.google.com) (74.125.92.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 15:05:30 +0000
Received: by qw-out-2122.google.com with SMTP id 9so222908qwb.53
        for <java-user@lucene.apache.org>; Thu, 03 Dec 2009 07:05:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=Gfch9oNB0MCF1gbUdsVXhDBa1GwrqZLLQ5MiJvR0ZP8=;
        b=ZmZLQi6Ygn98bUmJ0zRoH8mXZkwISAXIfn4JFktor+z5X9X+4r+4P1HGkFxXu9gIac
         Dbn/EPAo4aIZ4oOPV5Byoi10r8ya9S/0ahcpUD/PG2WMCIZVglnHbXpkPbp9LDxBIY6y
         goQ8qMGtWhi7YrOVhwgu6l6f0GS8xIyYzR8/A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=U1/1Eq4LHCg4etu2Tk7sonCXfFGHZwMiCqZpz3aquglp7igTeq+pzeGLSnbyqxJ8+r
         Nf9KbvbfKVrjXRVsUcHZLvCKE4SltYgS6d4ss71nVgerN4OGXXsWqRAD6vZEf+wbepe7
         DCmBvsi2OZKxB/Mc4P8N+7++JXb3XNdhjtsLw=
MIME-Version: 1.0
Received: by 10.229.10.153 with SMTP id p25mr235991qcp.36.1259852708348; Thu, 
	03 Dec 2009 07:05:08 -0800 (PST)
In-Reply-To: <020601ca7425$32f57700$710bc30a@sv.us.sonicwall.com>
References: <006801ca6f1e$8dc488d0$710bc30a@sv.us.sonicwall.com>
	 <008801ca6f4a$abe0cd20$710bc30a@sv.us.sonicwall.com>
	 <9ac0c6aa0911270224j2bfe4a9fv9ff18e2e64171f35@mail.gmail.com>
	 <2ffb6d060911270230o34272120w668a25c0593779fd@mail.gmail.com>
	 <9ac0c6aa0912030239l8c70b37x8f936ae8905e8259@mail.gmail.com>
	 <018d01ca7407$18f59060$710bc30a@sv.us.sonicwall.com>
	 <9ac0c6aa0912030317h642f5194g6e48d08d64972a0c@mail.gmail.com>
	 <01bf01ca7412$4d8dea60$710bc30a@sv.us.sonicwall.com>
	 <9ac0c6aa0912030452m660fec4byf4c9e368f24b57cf@mail.gmail.com>
	 <020601ca7425$32f57700$710bc30a@sv.us.sonicwall.com>
Date: Thu, 3 Dec 2009 17:05:08 +0200
Message-ID: <2ffb6d060912030705r3708b688nf44f810c3ea931f7@mail.gmail.com>
Subject: Re: IndexDivisor
From: =?UTF-8?B?RGFuaWwgxaJPUklO?= <torindan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Run System.gc() exactly before measuring memory usage.

On sun jvm it will FORCE gc (unless DisableExplicitGC is used).


On Thu, Dec 3, 2009 at 16:30, Ganesh <emailgane@yahoo.co.in> wrote:
> Thanks mike.
>
> I am opening the reader and warming it up and then calculating the memory=
 consumed.
> long usedMemory =C2=A0 =3D runtime.totalMemory() - runtime.freeMemory();
>
> Regards
> Ganesh
>
> ----- Original Message -----
> From: "Michael McCandless" <lucene@mikemccandless.com>
> To: <java-user@lucene.apache.org>
> Sent: Thursday, December 03, 2009 6:22 PM
> Subject: Re: IndexDivisor
>
>
> On Thu, Dec 3, 2009 at 7:15 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>
>> Below are my stats
>> IndexDivisor Memory
>> -1 7 MB
>> 1 486 MB
>> 100 180 MB
>> 1000 176 MB.
>
> Do you simply create the IndexWriter & IndexReader, but do no
> searching/indexing?
>
> How are you measuring RAM? =C2=A0You should use a RAM profiler (eg YourKi=
t)
> to get the "real" usage, not counting garbage that's yet to be
> collected.
>
> My guess is the shear process of Lucene scanning your terms index
> creates lots of garbage and you're measuring the RAM consumed by that
> garbage. =C2=A0The garbage should be harmless (it'll eventually get GCd &
> reused).
>
>> 1. Whether term vector will consume RAM. I think it should only consume =
disk space.
>
> No RAM is consumed.
>
>> 2. By setting RAM buffer for IW, Does it will allocate memory Or based o=
n the usage the memory will be allocated / increased.
>
> Only a little RAM is allocated up front, I think. =C2=A0It's only as you
> start indexing docs that the big RAM is really allocated. =C2=A0After a
> flush the RAM is then reused (ie, not freed) for subsequent segments.
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> Send instant messages to your online friends http://in.messenger.yahoo.co=
m
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 03 15:45:05 2009
Return-Path: <java-user-return-43898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43586 invoked from network); 3 Dec 2009 15:45:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Dec 2009 15:45:05 -0000
Received: (qmail 26967 invoked by uid 500); 3 Dec 2009 15:45:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26911 invoked by uid 500); 3 Dec 2009 15:45:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26901 invoked by uid 99); 3 Dec 2009 15:45:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 15:45:02 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 15:45:00 +0000
Received: by yxe30 with SMTP id 30so1439375yxe.29
        for <java-user@lucene.apache.org>; Thu, 03 Dec 2009 07:44:39 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.21.26 with SMTP id 26mr3158504ybu.192.1259855074847; Thu, 
	03 Dec 2009 07:44:34 -0800 (PST)
In-Reply-To: <26626826.post@talk.nabble.com>
References: <26626826.post@talk.nabble.com>
Date: Thu, 3 Dec 2009 10:44:34 -0500
Message-ID: <9ac0c6aa0912030744k6776c311vc02a98d312e4d7e@mail.gmail.com>
Subject: Re: Problem with close IndexWriter pausing due to locked files
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

That's rather spooky.

It could be your SAN device hangs on delete, if another machine has
that file open?  Is it possible that it does this (intentionally)?
You could make a simple standalone test case.

Different OSs have different semantics.  Windows refuses to do the
delete (throws IOException to javaland), Unix does "delete on last
close".  NFS simply deletes it, messing up any further reads (the
dreaded "Stale NFS Handle").

Mike

On Thu, Dec 3, 2009 at 9:30 AM, Paul Williams <mopster@gmail.com> wrote:
>
> Hi,
>
>
> I have found an issue with a Lucene index locking files from a Searcher
> instance. So that when a mergeSegments happens on a indexwriter close it
> actually hangs until the search instance is closed
>
> This seems to happen only when the index is stored on a network SAN devic=
e.
> When stored elsewhere it acts normally.
>
> Lucene version:2.1 and 2.3. going to test later versions.
>
> The merge segments hangs here:-
>
> DEBUG 12:59:09,993 debug.ThreadDump =A0- =A0 at
> java.io.WinNTFileSystem.delete0(Native Method)
> DEBUG 12:59:09,993 debug.ThreadDump =A0- =A0 at
> java.io.Win32FileSystem.delete(Win32FileSystem.java:504)
> DEBUG 12:59:09,993 debug.ThreadDump =A0- =A0 at
> java.io.File.delete(File.java:871)
> DEBUG 12:59:09,993 debug.ThreadDump =A0- =A0 at
> org.apache.lucene.store.FSDirectory.deleteFile(FSDirectory.java:350)
> DEBUG 12:59:09,993 debug.ThreadDump =A0- =A0 at
> org.apache.lucene.index.IndexFileDeleter.deleteFile(IndexFileDeleter.java=
:224)
> DEBUG 12:59:09,993 debug.ThreadDump =A0- =A0 at
> org.apache.lucene.index.IndexFileDeleter.deleteFiles(IndexFileDeleter.jav=
a:217)
> DEBUG 12:59:09,993 debug.ThreadDump =A0- =A0 at
> org.apache.lucene.index.IndexFileDeleter.deleteFiles(IndexFileDeleter.jav=
a:298)
> DEBUG 12:59:09,993 debug.ThreadDump =A0- =A0 at
> org.apache.lucene.index.IndexFileDeleter.deleteFiles(IndexFileDeleter.jav=
a:215)
> DEBUG 12:59:09,993 debug.ThreadDump =A0- =A0 at
> org.apache.lucene.index.IndexFileDeleter.deleteSegments(IndexFileDeleter.=
java:177)
> DEBUG 12:59:09,993 debug.ThreadDump =A0- =A0 at
> org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:1582)
> DEBUG 12:59:10,008 debug.ThreadDump =A0- =A0 at
> org.apache.lucene.index.IndexWriter.maybeMergeSegments(IndexWriter.java:1=
415)
> DEBUG 12:59:10,008 debug.ThreadDump =A0- =A0 at
> org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:135=
2)
> DEBUG 12:59:10,008 debug.ThreadDump =A0- =A0 at
> org.apache.lucene.index.IndexWriter.close(IndexWriter.java:588)
>
> Once the searcher is closed from a seperate JVM/Server it frees the files
> and the writer close can finish.
>
> Has anyone else seen this behaviour?
>
> I see it catches the IO exception on deletefiles in the indexwriter and p=
uts
> it in delete list for later. But this does not seem to happen on this
> occasion. it just seems to hang
>
> Any ideas on a way round this?
>
> Regards,
>
> Paul
>
>
> --
> View this message in context: http://old.nabble.com/Problem-with-close-In=
dexWriter-pausing-due-to-locked-files-tp26626826p26626826.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 03 15:48:02 2009
Return-Path: <java-user-return-43899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45889 invoked from network); 3 Dec 2009 15:48:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Dec 2009 15:48:02 -0000
Received: (qmail 36974 invoked by uid 500); 3 Dec 2009 15:47:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36912 invoked by uid 500); 3 Dec 2009 15:47:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36902 invoked by uid 99); 3 Dec 2009 15:47:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 15:47:59 +0000
X-ASF-Spam-Status: No, hits=-2.4 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [202.86.5.93] (HELO smtp106.mail.in.yahoo.com) (202.86.5.93)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 03 Dec 2009 15:47:57 +0000
Received: (qmail 8188 invoked from network); 3 Dec 2009 15:47:33 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=q06HXRFO3+WbkHi/JXp+LPbH77Kfze/CGbYgsO2zWyiLD8KXtcGiICXPaz62dlC2RWlWALJ9iBei1Ti9QJYpMt+IStrduvkHG7+X2fuI38kF0uK/e8YM/m/vHypd0zwjkrhenCklnayRDBBNFfBruzdfoWAm4Az7YBwP5tFRefs=  ;
Received: from  (emailgane@203.98.194.130 with login)
        by smtp106.mail.in.yahoo.com with SMTP; 03 Dec 2009 21:17:33 +0530 IST
X-Yahoo-SMTP: JObyHkuswBBrNSLZp.Ycd7Boqpr_GQ--
X-YMail-OSG: ugEtzLMVM1lw3GY5ZXAtfoBC7rCZBKCzP2T7KjU3s5Iob80VsqY6YJPioYRcYbkyzjhdiCyC_YkD8aQsaiKfWJ9d2MLAKBc0YbIXo_EigeztbC5F4cdP5bAfYm6UK9wboMZrGLjqd3a9bkHuSP1TskSlCRrvcolJi1NOSt00C81p7i5HUm_5gUVaJ7wjsVV1IL0.1.WQzM6Ij9wEsd9qJT5im3Nx6FQPPKFnlMRXtY5uYbGXj4oeMgz6zI_55B9DBQ1ovWWXx5oziu4YKMhg_dRYcQ--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <023701ca742f$ed9e2610$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <006801ca6f1e$8dc488d0$710bc30a@sv.us.sonicwall.com> <008801ca6f4a$abe0cd20$710bc30a@sv.us.sonicwall.com> <9ac0c6aa0911270224j2bfe4a9fv9ff18e2e64171f35@mail.gmail.com> <2ffb6d060911270230o34272120w668a25c0593779fd@mail.gmail.com> <9ac0c6aa0912030239l8c70b37x8f936ae8905e8259@mail.gmail.com> <018d01ca7407$18f59060$710bc30a@sv.us.sonicwall.com> <9ac0c6aa0912030317h642f5194g6e48d08d64972a0c@mail.gmail.com> <01bf01ca7412$4d8dea60$710bc30a@sv.us.sonicwall.com> <9ac0c6aa0912030452m660fec4byf4c9e368f24b57cf@mail.gmail.com> <020601ca7425$32f57700$710bc30a@sv.us.sonicwall.com> <2ffb6d060912030705r3708b688nf44f810c3ea931f7@mail.gmail.com>
Subject: Re: IndexDivisor
Date: Thu, 3 Dec 2009 21:17:30 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138

I am doing GC before calculating the memory. Even i set my indexdivisor =
to 10000 but there seems to be no change.

Below are my stats
 IndexDivisor Memory
 -1         7 MB
 1         486 MB
 100     180 MB
 1000     176 MB.
10000    176MB

Regards
Ganesh

----- Original Message -----=20
From: "Danil =C5=A2ORIN" <torindan@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Thursday, December 03, 2009 8:35 PM
Subject: Re: IndexDivisor


Run System.gc() exactly before measuring memory usage.

On sun jvm it will FORCE gc (unless DisableExplicitGC is used).


On Thu, Dec 3, 2009 at 16:30, Ganesh <emailgane@yahoo.co.in> wrote:
> Thanks mike.
>
> I am opening the reader and warming it up and then calculating the =
memory consumed.
> long usedMemory =3D runtime.totalMemory() - runtime.freeMemory();
>
> Regards
> Ganesh
>
> ----- Original Message -----
> From: "Michael McCandless" <lucene@mikemccandless.com>
> To: <java-user@lucene.apache.org>
> Sent: Thursday, December 03, 2009 6:22 PM
> Subject: Re: IndexDivisor
>
>
> On Thu, Dec 3, 2009 at 7:15 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>
>> Below are my stats
>> IndexDivisor Memory
>> -1 7 MB
>> 1 486 MB
>> 100 180 MB
>> 1000 176 MB.
>
> Do you simply create the IndexWriter & IndexReader, but do no
> searching/indexing?
>
> How are you measuring RAM? You should use a RAM profiler (eg YourKit)
> to get the "real" usage, not counting garbage that's yet to be
> collected.
>
> My guess is the shear process of Lucene scanning your terms index
> creates lots of garbage and you're measuring the RAM consumed by that
> garbage. The garbage should be harmless (it'll eventually get GCd &
> reused).
>
>> 1. Whether term vector will consume RAM. I think it should only =
consume disk space.
>
> No RAM is consumed.
>
>> 2. By setting RAM buffer for IW, Does it will allocate memory Or =
based on the usage the memory will be allocated / increased.
>
> Only a little RAM is allocated up front, I think. It's only as you
> start indexing docs that the big RAM is really allocated. After a
> flush the RAM is then reused (ie, not freed) for subsequent segments.
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> Send instant messages to your online friends =
http://in.messenger.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 03 16:06:23 2009
Return-Path: <java-user-return-43900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51478 invoked from network); 3 Dec 2009 16:06:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Dec 2009 16:06:23 -0000
Received: (qmail 68682 invoked by uid 500); 3 Dec 2009 16:06:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68622 invoked by uid 500); 3 Dec 2009 16:06:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68612 invoked by uid 99); 3 Dec 2009 16:06:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 16:06:21 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.217.219] (HELO mail-gx0-f219.google.com) (209.85.217.219)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 16:06:12 +0000
Received: by gxk19 with SMTP id 19so1395345gxk.5
        for <java-user@lucene.apache.org>; Thu, 03 Dec 2009 08:05:51 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.247.29 with SMTP id u29mr3216623ybh.90.1259856351237; Thu, 
	03 Dec 2009 08:05:51 -0800 (PST)
In-Reply-To: <023701ca742f$ed9e2610$710bc30a@sv.us.sonicwall.com>
References: <006801ca6f1e$8dc488d0$710bc30a@sv.us.sonicwall.com>
	 <2ffb6d060911270230o34272120w668a25c0593779fd@mail.gmail.com>
	 <9ac0c6aa0912030239l8c70b37x8f936ae8905e8259@mail.gmail.com>
	 <018d01ca7407$18f59060$710bc30a@sv.us.sonicwall.com>
	 <9ac0c6aa0912030317h642f5194g6e48d08d64972a0c@mail.gmail.com>
	 <01bf01ca7412$4d8dea60$710bc30a@sv.us.sonicwall.com>
	 <9ac0c6aa0912030452m660fec4byf4c9e368f24b57cf@mail.gmail.com>
	 <020601ca7425$32f57700$710bc30a@sv.us.sonicwall.com>
	 <2ffb6d060912030705r3708b688nf44f810c3ea931f7@mail.gmail.com>
	 <023701ca742f$ed9e2610$710bc30a@sv.us.sonicwall.com>
Date: Thu, 3 Dec 2009 11:05:51 -0500
Message-ID: <9ac0c6aa0912030805m437713cclcee1d8b6f77848e9@mail.gmail.com>
Subject: Re: IndexDivisor
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Can you run w/ a memory profiler?  I don't trust that gc is truly running.

Mike

On Thu, Dec 3, 2009 at 10:47 AM, Ganesh <emailgane@yahoo.co.in> wrote:
> I am doing GC before calculating the memory. Even i set my indexdivisor t=
o 10000 but there seems to be no change.
>
> Below are my stats
> =C2=A0IndexDivisor Memory
> =C2=A0-1 =C2=A0 =C2=A0 =C2=A0 =C2=A0 7 MB
> =C2=A01 =C2=A0 =C2=A0 =C2=A0 =C2=A0 486 MB
> =C2=A0100 =C2=A0 =C2=A0 180 MB
> =C2=A01000 =C2=A0 =C2=A0 176 MB.
> 10000 =C2=A0 =C2=A0176MB
>
> Regards
> Ganesh
>
> ----- Original Message -----
> From: "Danil =C5=A2ORIN" <torindan@gmail.com>
> To: <java-user@lucene.apache.org>
> Sent: Thursday, December 03, 2009 8:35 PM
> Subject: Re: IndexDivisor
>
>
> Run System.gc() exactly before measuring memory usage.
>
> On sun jvm it will FORCE gc (unless DisableExplicitGC is used).
>
>
> On Thu, Dec 3, 2009 at 16:30, Ganesh <emailgane@yahoo.co.in> wrote:
>> Thanks mike.
>>
>> I am opening the reader and warming it up and then calculating the memor=
y consumed.
>> long usedMemory =3D runtime.totalMemory() - runtime.freeMemory();
>>
>> Regards
>> Ganesh
>>
>> ----- Original Message -----
>> From: "Michael McCandless" <lucene@mikemccandless.com>
>> To: <java-user@lucene.apache.org>
>> Sent: Thursday, December 03, 2009 6:22 PM
>> Subject: Re: IndexDivisor
>>
>>
>> On Thu, Dec 3, 2009 at 7:15 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>>
>>> Below are my stats
>>> IndexDivisor Memory
>>> -1 7 MB
>>> 1 486 MB
>>> 100 180 MB
>>> 1000 176 MB.
>>
>> Do you simply create the IndexWriter & IndexReader, but do no
>> searching/indexing?
>>
>> How are you measuring RAM? You should use a RAM profiler (eg YourKit)
>> to get the "real" usage, not counting garbage that's yet to be
>> collected.
>>
>> My guess is the shear process of Lucene scanning your terms index
>> creates lots of garbage and you're measuring the RAM consumed by that
>> garbage. The garbage should be harmless (it'll eventually get GCd &
>> reused).
>>
>>> 1. Whether term vector will consume RAM. I think it should only consume=
 disk space.
>>
>> No RAM is consumed.
>>
>>> 2. By setting RAM buffer for IW, Does it will allocate memory Or based =
on the usage the memory will be allocated / increased.
>>
>> Only a little RAM is allocated up front, I think. It's only as you
>> start indexing docs that the big RAM is really allocated. After a
>> flush the RAM is then reused (ie, not freed) for subsequent segments.
>>
>> Mike
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>> Send instant messages to your online friends http://in.messenger.yahoo.c=
om
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> Send instant messages to your online friends http://in.messenger.yahoo.co=
m
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 03 16:21:15 2009
Return-Path: <java-user-return-43901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57243 invoked from network); 3 Dec 2009 16:21:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Dec 2009 16:21:15 -0000
Received: (qmail 94408 invoked by uid 500); 3 Dec 2009 16:21:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94345 invoked by uid 500); 3 Dec 2009 16:21:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94335 invoked by uid 99); 3 Dec 2009 16:21:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 16:21:13 +0000
X-ASF-Spam-Status: No, hits=-1.9 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of benhei@gmail.com designates 209.85.218.222 as permitted sender)
Received: from [209.85.218.222] (HELO mail-bw0-f222.google.com) (209.85.218.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 16:21:11 +0000
Received: by bwz22 with SMTP id 22so1308646bwz.5
        for <java-user@lucene.apache.org>; Thu, 03 Dec 2009 08:20:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=TcRnZIROv99Nvrp0ZQ35kzIrwIzy9mrfmpO3mIcXvw4=;
        b=Y3tRug3v7tBg9oIwKkVTMy3Tv4AGVzTrGJlcheo7qFs8OIpA9tFYcY3GSC3HSws0m2
         1Uxo5phdVYwhhcPHlON+7tNLPO+NaMc0JWRwL5/JguEDULKlihlEmpjSWaJBpZUzC3LM
         qa34CwBZ+jxt6pOpFOVznx5ErjkHLP7kDkENA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=SpHvLfJj0hHXxx6IrQHtt6FUuJK8BOcjDM7Rz6c3kd6ngb28oaz9Zti4bwItV74Hji
         ltRcFy8HnEXjONegHnxjcJ3Gb/oqug4BkU8RZj/AHmV4vrDfr61GqRMnzqKCrTW1hYa+
         mnBLKH+Gyxfw90rCJlVQvtbUpGVEwyqLZqra8=
MIME-Version: 1.0
Received: by 10.204.154.92 with SMTP id n28mr1927080bkw.5.1259857249877; Thu, 
	03 Dec 2009 08:20:49 -0800 (PST)
In-Reply-To: <9ac0c6aa0912030805m437713cclcee1d8b6f77848e9@mail.gmail.com>
References: <006801ca6f1e$8dc488d0$710bc30a@sv.us.sonicwall.com>
	 <9ac0c6aa0912030239l8c70b37x8f936ae8905e8259@mail.gmail.com>
	 <018d01ca7407$18f59060$710bc30a@sv.us.sonicwall.com>
	 <9ac0c6aa0912030317h642f5194g6e48d08d64972a0c@mail.gmail.com>
	 <01bf01ca7412$4d8dea60$710bc30a@sv.us.sonicwall.com>
	 <9ac0c6aa0912030452m660fec4byf4c9e368f24b57cf@mail.gmail.com>
	 <020601ca7425$32f57700$710bc30a@sv.us.sonicwall.com>
	 <2ffb6d060912030705r3708b688nf44f810c3ea931f7@mail.gmail.com>
	 <023701ca742f$ed9e2610$710bc30a@sv.us.sonicwall.com>
	 <9ac0c6aa0912030805m437713cclcee1d8b6f77848e9@mail.gmail.com>
Date: Thu, 3 Dec 2009 17:20:49 +0100
Message-ID: <94095f520912030820s766a59b8vfe157fd91da44cf8@mail.gmail.com>
Subject: Re: IndexDivisor
From: Benjamin Heilbrunn <benhei@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Maybe the command line argument "-verbose:gc output" would help to
determine if GC is running.
But you are right - a profiler would be the best way.

Benjamin

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 03 16:37:39 2009
Return-Path: <java-user-return-43902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64114 invoked from network); 3 Dec 2009 16:37:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Dec 2009 16:37:38 -0000
Received: (qmail 25510 invoked by uid 500); 3 Dec 2009 16:37:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25462 invoked by uid 500); 3 Dec 2009 16:37:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25452 invoked by uid 99); 3 Dec 2009 16:37:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 16:37:36 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erdincyilmazel@gmail.com designates 209.85.220.228 as permitted sender)
Received: from [209.85.220.228] (HELO mail-fx0-f228.google.com) (209.85.220.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 16:37:28 +0000
Received: by fxm28 with SMTP id 28so1563295fxm.5
        for <java-user@lucene.apache.org>; Thu, 03 Dec 2009 08:37:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:received:date
         :x-google-sender-auth:message-id:subject:from:to:content-type;
        bh=cr50Bvx24SaNIaweqrtGQaw8Rfwk5hMjbMiHXkyQLiM=;
        b=skbiqQH3uNc/fU3gTxljqkOJ3JPS5Bkuq/aMnMMoLhnmZ2rZJok9SXVwHDNnCozOue
         g6YQhBEnBn8LEC9q41kwTk0dketKpc+kHhwR5QPPDn4uYdM7u3tY7WZh216fpGtdrrAf
         rp4ya9VIVcOKk0lBmwUmzCcQsrDvXJrBixXxU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:date:x-google-sender-auth:message-id:subject
         :from:to:content-type;
        b=t76QhAVeKrO0GG0MOvnW2U73CAAf5vZgqwamdNOz5kuZWGPWn0bgL7Pvu6hGiMV0mi
         5zqIU0Ku9Rv8so+QPxDhbPaQOSuo89GutJf2SDh4ijeEj/SgUqws8VJ5GoKZXG13sZtf
         DWfasIrpNexWSklJiyTC8n6HSv/HnGewWUgrg=
MIME-Version: 1.0
Sender: erdincyilmazel@gmail.com
Received: by 10.223.92.141 with SMTP id r13mr250211fam.79.1259858228074; Thu, 
	03 Dec 2009 08:37:08 -0800 (PST)
Date: Thu, 3 Dec 2009 16:37:08 +0000
X-Google-Sender-Auth: a6ccd192e1aae4ef
Message-ID: <7af3bac90912030837yea27584wb3c22da1614cc249@mail.gmail.com>
Subject: Getting score of explicit documents for a query
From: Erdinc Yilmazel <erdinc@yilmazel.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001517447a7426d8f90479d59a35
X-Virus-Checked: Checked by ClamAV on apache.org

--001517447a7426d8f90479d59a35
Content-Type: text/plain; charset=ISO-8859-1

Hi,

Given a query, is there a way to learn score of some specific documents in
the index against this query? I don't want to make a global search in the
index and rank and sort all the matching documents. What I want to do is
learn the rank of a bunch of documents in the index that I can identify by
document id..

Erdinc

--001517447a7426d8f90479d59a35--

From java-user-return-43903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 03 16:46:57 2009
Return-Path: <java-user-return-43903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66479 invoked from network); 3 Dec 2009 16:46:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Dec 2009 16:46:57 -0000
Received: (qmail 41031 invoked by uid 500); 3 Dec 2009 16:46:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40946 invoked by uid 500); 3 Dec 2009 16:46:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40936 invoked by uid 99); 3 Dec 2009 16:46:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 16:46:54 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of benhei@gmail.com designates 209.85.218.222 as permitted sender)
Received: from [209.85.218.222] (HELO mail-bw0-f222.google.com) (209.85.218.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 16:46:46 +0000
Received: by bwz22 with SMTP id 22so1337617bwz.5
        for <java-user@lucene.apache.org>; Thu, 03 Dec 2009 08:46:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=wbsxIx1jmOs6GDqF7E7R/A5Im8NDTKyRqyKBsN4uujQ=;
        b=PSwQfdXn2c4Uw8Pz43J/nP8hyKlEkgH/kCNgYkOAorjyuMTn5gCIHM4fU1F55e0iRz
         CBcfOV5NGijU0sooK18u9GoJ8Lr+E+5fbsNZXozUEPtEt/t2L8PZ/2GIeKd/QZfmwZFT
         Vzi0fUFealTmEiZNQGocUO/jBVLGossEjl5AU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=YTLzCXT1v8IGEPmmuRm409BIi/w32W+8gzsYSHm5/55aCJKyO7agMErmWbothtq/nl
         lYSwx419FmA5AMJotkNQ8K3Hm2Hc+IoYsZBw0INyi6n783dUJiPK8sRYP+abmoMedGgb
         1QcYdrNFbwJ5vi5I+ofsGWZXwsClSAOdLtqiA=
MIME-Version: 1.0
Received: by 10.204.10.13 with SMTP id n13mr1935969bkn.60.1259858786392; Thu, 
	03 Dec 2009 08:46:26 -0800 (PST)
Date: Thu, 3 Dec 2009 17:46:26 +0100
Message-ID: <94095f520912030846j5c25f0aetdf5a0f4215a04342@mail.gmail.com>
Subject: Norm Value of not existing Field
From: Benjamin Heilbrunn <benhei@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I'm using Lucene 2.9.1 patched with
http://issues.apache.org/jira/browse/LUCENE-1260
For some special reason I need to find all documents which contain at
least 1 term in a certain field.
This works by iterating the norms array only as long as the field
exists on every document.
For documents without the field the norms array holds the byte-value 124.
Where does 124 come from - and is there a way to change it to an other
value like -128 (0xFF) for not existing fields?


Benjamin

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 03 17:14:21 2009
Return-Path: <java-user-return-43904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75843 invoked from network); 3 Dec 2009 17:14:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Dec 2009 17:14:21 -0000
Received: (qmail 84234 invoked by uid 500); 3 Dec 2009 17:14:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84143 invoked by uid 500); 3 Dec 2009 17:14:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84133 invoked by uid 99); 3 Dec 2009 17:14:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 17:14:18 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 17:14:10 +0000
Received: by ywh15 with SMTP id 15so1536934ywh.5
        for <java-user@lucene.apache.org>; Thu, 03 Dec 2009 09:13:49 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.247.29 with SMTP id u29mr3353154ybh.90.1259860428154; Thu, 
	03 Dec 2009 09:13:48 -0800 (PST)
In-Reply-To: <94095f520912030846j5c25f0aetdf5a0f4215a04342@mail.gmail.com>
References: <94095f520912030846j5c25f0aetdf5a0f4215a04342@mail.gmail.com>
Date: Thu, 3 Dec 2009 12:13:48 -0500
Message-ID: <9ac0c6aa0912030913n4075a4falab1263ce5e924e6@mail.gmail.com>
Subject: Re: Norm Value of not existing Field
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

This isn't easy to change; it's hardcoded, in oal.index.NormsWriter,
to 1.0, and also in SegmentReader, to 1.0 (when the field doesn't have
norms stored, but eg someone is requesting them anyway).  1.0 must
encode to 124.  I suppose we could empower Similarity to define what
the "undefined norm value" should be?  Wanna make a patch?

Mike

On Thu, Dec 3, 2009 at 11:46 AM, Benjamin Heilbrunn <benhei@gmail.com> wrote:
> Hi,
>
> I'm using Lucene 2.9.1 patched with
> http://issues.apache.org/jira/browse/LUCENE-1260
> For some special reason I need to find all documents which contain at
> least 1 term in a certain field.
> This works by iterating the norms array only as long as the field
> exists on every document.
> For documents without the field the norms array holds the byte-value 124.
> Where does 124 come from - and is there a way to change it to an other
> value like -128 (0xFF) for not existing fields?
>
>
> Benjamin
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 03 18:33:24 2009
Return-Path: <java-user-return-43905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25713 invoked from network); 3 Dec 2009 18:33:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Dec 2009 18:33:24 -0000
Received: (qmail 8350 invoked by uid 500); 3 Dec 2009 18:33:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8275 invoked by uid 500); 3 Dec 2009 18:33:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8261 invoked by uid 99); 3 Dec 2009 18:33:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 18:33:21 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.219.217 as permitted sender)
Received: from [209.85.219.217] (HELO mail-ew0-f217.google.com) (209.85.219.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 18:33:13 +0000
Received: by ewy9 with SMTP id 9so744459ewy.11
        for <java-user@lucene.apache.org>; Thu, 03 Dec 2009 10:32:53 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=sdClfQbD2UJeVblEF3pthQlwGTEFHBKo3iJ+88BsPqc=;
        b=wyi9Wg3DhVVVL7g9igoPI/QODDbQHzS5kEa/1Ng08mUmDzFs6bCHhYZzuULm4+gegN
         xQcb+IgEzlFYITVegqGCTCJRkOxv+GIHvBQovokShliEstiBQZLPHYszQNwpa8xXGm6q
         Xo8NMc/zDceouKgEjTlkhtWqBTKS2Q4GsImN8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=fKymbovxRzP/6biE9kzipnOf+1Ky0zorryLGUALurwog+qpDsa41Ou7UMdj7khoZ1M
         qTCswVvP9JY6TYFDCcuhvntTym1QivGLUETFUaoiJsFZZDPbaKQ8TBwSJVROHn5OghaP
         URGbAPu+tF+H2g2ULiky9omQUqJd3D+X/KN5E=
MIME-Version: 1.0
Received: by 10.216.90.136 with SMTP id e8mr612797wef.110.1259865172761; Thu, 
	03 Dec 2009 10:32:52 -0800 (PST)
In-Reply-To: <94095f520912030846j5c25f0aetdf5a0f4215a04342@mail.gmail.com>
References: <94095f520912030846j5c25f0aetdf5a0f4215a04342@mail.gmail.com>
Date: Thu, 3 Dec 2009 13:32:52 -0500
Message-ID: <359a92830912031032t9c7dab3gbdabf14c330aacec@mail.gmail.com>
Subject: Re: Norm Value of not existing Field
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6dab09316600c0479d7381e
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6dab09316600c0479d7381e
Content-Type: text/plain; charset=ISO-8859-1

It would be clumsier, but you could create a Filter by spinning
through all the terms on a field and setting the appropriate bit.

You could even do this at startup and store the filters around for
all the fields you care about, or cache them when first used.

The advantage I see here is that it wouldn't depend upon
what looks like a peculiarity in field norms.

The disadvantage is that I bet it's slower.

FWIW
Erick

On Thu, Dec 3, 2009 at 11:46 AM, Benjamin Heilbrunn <benhei@gmail.com>wrote:

> Hi,
>
> I'm using Lucene 2.9.1 patched with
> http://issues.apache.org/jira/browse/LUCENE-1260
> For some special reason I need to find all documents which contain at
> least 1 term in a certain field.
> This works by iterating the norms array only as long as the field
> exists on every document.
> For documents without the field the norms array holds the byte-value 124.
> Where does 124 come from - and is there a way to change it to an other
> value like -128 (0xFF) for not existing fields?
>
>
> Benjamin
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6dab09316600c0479d7381e--

From java-user-return-43906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 03 20:04:36 2009
Return-Path: <java-user-return-43906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96999 invoked from network); 3 Dec 2009 20:04:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Dec 2009 20:04:36 -0000
Received: (qmail 25853 invoked by uid 500); 3 Dec 2009 20:04:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25718 invoked by uid 500); 3 Dec 2009 20:04:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25708 invoked by uid 99); 3 Dec 2009 20:04:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 20:04:32 +0000
X-ASF-Spam-Status: No, hits=-6.6 required=5.0
	tests=AWL,BAYES_00,RCVD_IN_DNSWL_MED
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [132.249.20.114] (HELO postal.sdsc.edu) (132.249.20.114)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 20:04:30 +0000
Received: from mta.ad.sdsc.edu (mta.ad.sdsc.edu [132.249.69.68])
	by postal.sdsc.edu (8.11.7/8.11.7/server/78) with ESMTP id nB3K49Y02342
	for <java-user@lucene.apache.org>; Thu, 3 Dec 2009 12:04:09 -0800 (PST)
Received: from MBX.ad.sdsc.edu ([fe80::85f9:e068:7dc0:4fe0]) by
 mta.ad.sdsc.edu ([132.249.69.68]) with mapi; Thu, 3 Dec 2009 12:04:04 -0800
From: Christopher Condit <condit@sdsc.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 3 Dec 2009 12:04:03 -0800
Subject: Snowball Stemmer Question
Thread-Topic: Snowball Stemmer Question
Thread-Index: Acp0PBC8E0CrGl9nQ/+L1tJbs1RzVgAEhOrQ
Message-ID: <BAFDED91EF7D5A43A30F897D6C94B1284D33D8F559@MBX.ad.sdsc.edu>
References: <94095f520912030846j5c25f0aetdf5a0f4215a04342@mail.gmail.com>
 <9ac0c6aa0912030913n4075a4falab1263ce5e924e6@mail.gmail.com>
In-Reply-To: <9ac0c6aa0912030913n4075a4falab1263ce5e924e6@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

The Snowball Analyzer works well for certain constructs but not others. In =
particular I'm having a problem with things like "colossal" vs "colossus" a=
nd "hippocampus" vs "hippocampal".
Is there a way to customize the analyzer to include these rules?
Thanks,
-Chris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 03 20:20:10 2009
Return-Path: <java-user-return-43907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3752 invoked from network); 3 Dec 2009 20:20:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Dec 2009 20:20:09 -0000
Received: (qmail 55579 invoked by uid 500); 3 Dec 2009 20:20:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55343 invoked by uid 500); 3 Dec 2009 20:20:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55087 invoked by uid 99); 3 Dec 2009 20:20:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 20:20:03 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of eirbjo@gmail.com designates 209.85.219.217 as permitted sender)
Received: from [209.85.219.217] (HELO mail-ew0-f217.google.com) (209.85.219.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 20:19:53 +0000
Received: by ewy9 with SMTP id 9so859290ewy.11
        for <java-user@lucene.apache.org>; Thu, 03 Dec 2009 12:19:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=9yfpQdwvcNSg/B9VcMPJORf3Qe8juSOcBTTN2XAGC0w=;
        b=lWn5SRUde2NXKyJ3XDnACMBzHtx8revL8vmcabrcyDtsjy0ibIwg/I8hcGmmtkvOcr
         xGR4dTakloydxzFrx5RkgThcvSuZ/jGgAXyAn5isVDB0EsT+Nag/ANI5Auq2qTw6pCPB
         P5OZWF/QDYMKv54ZFKn0aKzJMZFsgTaPXIebU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=c/DgrjHT8iRvUkNgPvCPjgY/+ZuGOk9+m/jAgp3hetcnF7MW20My76iq8aonJ6gDp9
         bZFyogY/8Lx76D87e8l7rnNnZDwX41t4/N3FAnfo72nHMwnwFvr26jdOLMrW6ERbIpx7
         zVXoLhXzyJdc/OKpcoJiNNHcScTxS6deFh12E=
MIME-Version: 1.0
Received: by 10.216.90.18 with SMTP id d18mr684386wef.225.1259871573379; Thu, 
	03 Dec 2009 12:19:33 -0800 (PST)
In-Reply-To: <9ac0c6aa0912030515i6832f6cfucc765ca8a173de@mail.gmail.com>
References: <34660cca0912020944n2b6b7965i6753f1b47b8f4820@mail.gmail.com>
	 <9ac0c6aa0912030515i6832f6cfucc765ca8a173de@mail.gmail.com>
Date: Thu, 3 Dec 2009 21:19:33 +0100
Message-ID: <34660cca0912031219u5a28b3f1o27ada2ab7ef1c13f@mail.gmail.com>
Subject: Re: Potential leak of file resources in SpellChecker
From: =?ISO-8859-1?Q?Eirik_Bj=F8rsn=F8s?= <eirbjo@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Dec 3, 2009 at 2:15 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
> This sounds like an important bug fix -- could you open a Jira issue &
> attach a patch? =A0Thanks!

Mike,

I've opened an issue with a patch that should be pretty trivial:

https://issues.apache.org/jira/browse/LUCENE-2108

Looking forward to seeing it in 3.0.x :-)

PS: Upgrading SVNSearch to 3.0.0 was close to painless thanks to
Lucene's well thought out upgrade and deprecation policy. I really
like the way I could gradually replace deprecated API calls and then
make the final switch from 2.9.1 to 3.0.0. More projects should follow
this path. Keep up the good work!

Eirik.

> 2009/12/2 Eirik Bj=F8rsn=F8s <eirbjo@gmail.com>:
>> Hi,
>>
>> I'm using SpellChecker (in Lucene contrib) to help users of SVNSearch
>> who can't type right:
>>
>> http://svnsearch.org/svnsearch/repos/ASF/search?logMessage=3Dlusene
>>
>> SpellChecker works very well for my purpose, but I've encountered a
>> possible file resource leak issue:
>>
>> I can't find any way to close the IndexSearcher (and IndexReader) that
>> is being used by SpellChecker internally.
>>
>> I've worked around this issue by keeping a single SpellChecker open
>> for each repository, but I'd really like to be able to close it and
>> reopen it on demand without leaking file descriptors.
>>
>> Could we add a close() method to SpellChecker that will close the
>> IndexSearcher and null the reference to it? And perhaps add some code
>> that reopens the searcher if the reference to it is null? Or would
>> that break thread safety of SpellChecker?
>>
>> The attached patch adds a close method but leaves it to the user to
>> call setSpellIndex to reopen the searcher.
>>
>> Thanks,
>> Eirik.
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 03 20:33:28 2009
Return-Path: <java-user-return-43908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8883 invoked from network); 3 Dec 2009 20:33:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Dec 2009 20:33:27 -0000
Received: (qmail 83965 invoked by uid 500); 3 Dec 2009 20:33:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83864 invoked by uid 500); 3 Dec 2009 20:33:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83854 invoked by uid 99); 3 Dec 2009 20:33:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 20:33:25 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Dec 2009 20:33:22 +0000
Received: by yxe30 with SMTP id 30so1714687yxe.29
        for <java-user@lucene.apache.org>; Thu, 03 Dec 2009 12:33:01 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.213.7 with SMTP id l7mr3688879ybg.220.1259872378850; Thu, 
	03 Dec 2009 12:32:58 -0800 (PST)
In-Reply-To: <34660cca0912031219u5a28b3f1o27ada2ab7ef1c13f@mail.gmail.com>
References: <34660cca0912020944n2b6b7965i6753f1b47b8f4820@mail.gmail.com>
	 <9ac0c6aa0912030515i6832f6cfucc765ca8a173de@mail.gmail.com>
	 <34660cca0912031219u5a28b3f1o27ada2ab7ef1c13f@mail.gmail.com>
Date: Thu, 3 Dec 2009 15:32:58 -0500
Message-ID: <9ac0c6aa0912031232x726d72f8tb9d62ed4fe3be211@mail.gmail.com>
Subject: Re: Potential leak of file resources in SpellChecker
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Thanks!  I'm glad to hear your upgrade to 3.0.0 was smooth.

Mike

2009/12/3 Eirik Bj=F8rsn=F8s <eirbjo@gmail.com>:
> On Thu, Dec 3, 2009 at 2:15 PM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>> This sounds like an important bug fix -- could you open a Jira issue &
>> attach a patch? =A0Thanks!
>
> Mike,
>
> I've opened an issue with a patch that should be pretty trivial:
>
> https://issues.apache.org/jira/browse/LUCENE-2108
>
> Looking forward to seeing it in 3.0.x :-)
>
> PS: Upgrading SVNSearch to 3.0.0 was close to painless thanks to
> Lucene's well thought out upgrade and deprecation policy. I really
> like the way I could gradually replace deprecated API calls and then
> make the final switch from 2.9.1 to 3.0.0. More projects should follow
> this path. Keep up the good work!
>
> Eirik.
>
>> 2009/12/2 Eirik Bj=F8rsn=F8s <eirbjo@gmail.com>:
>>> Hi,
>>>
>>> I'm using SpellChecker (in Lucene contrib) to help users of SVNSearch
>>> who can't type right:
>>>
>>> http://svnsearch.org/svnsearch/repos/ASF/search?logMessage=3Dlusene
>>>
>>> SpellChecker works very well for my purpose, but I've encountered a
>>> possible file resource leak issue:
>>>
>>> I can't find any way to close the IndexSearcher (and IndexReader) that
>>> is being used by SpellChecker internally.
>>>
>>> I've worked around this issue by keeping a single SpellChecker open
>>> for each repository, but I'd really like to be able to close it and
>>> reopen it on demand without leaking file descriptors.
>>>
>>> Could we add a close() method to SpellChecker that will close the
>>> IndexSearcher and null the reference to it? And perhaps add some code
>>> that reopens the searcher if the reference to it is null? Or would
>>> that break thread safety of SpellChecker?
>>>
>>> The attached patch adds a close method but leaves it to the user to
>>> call setSpellIndex to reopen the searcher.
>>>
>>> Thanks,
>>> Eirik.
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 04 02:45:36 2009
Return-Path: <java-user-return-43909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73838 invoked from network); 4 Dec 2009 02:45:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Dec 2009 02:45:35 -0000
Received: (qmail 39755 invoked by uid 500); 4 Dec 2009 02:45:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39633 invoked by uid 500); 4 Dec 2009 02:45:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39621 invoked by uid 99); 4 Dec 2009 02:45:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Dec 2009 02:45:31 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.60] (HELO web50306.mail.re2.yahoo.com) (206.190.38.60)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 04 Dec 2009 02:45:20 +0000
Received: (qmail 62239 invoked by uid 60001); 4 Dec 2009 02:44:59 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1259894699; bh=RpV6NathgIdAYkfu14oaHGgirg7jniiD545fiTkIEpY=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=k5fh1pudQxJ0mlhNg29/fNzy1KTfeBY4PBWmNl1Y5yIH2d937nOOvBKa6cm086kPzeQOGHpCO29v1TNcYVcteT772H5KyE229snzpw02TmUmDaeXcJLhlO4Th6ueNuKHmZ81sNgxXxZGv5FeUfpqgsA+bBw5m+gJL1BDhE1TiPk=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=Gfw7KuAiMMEPrx/tT8mxRgIhet1TAxlPsn86gu4DY7mHDTkIK++4y8uSY9msIcLZ+bAxH1JBXsoIkbZE1wjro//VkWquP/fqyv1Ym638e4mlP1e8EE5D4qe8HbGf1oAdIziT3petlYd/Sxo7ib7ku5s9BckQzFLQoqIj6buoVgw=;
Message-ID: <252659.61404.qm@web50306.mail.re2.yahoo.com>
X-YMail-OSG: cYG36MgVM1loPjEUy_Kww3q0BuNGo3WBRJUJIWWwoz5lUzWGNVnxyEAIBfSlw2MjDy0NA5T9v9Z.peDSYCfq5DgxTZ3ce4v74nvMzkoHCsz0JdsdjzTjfXyDRS4F6.bqiTysJb.JZOG9_fm4PiIRSrWUczlYkV5mcExghjK3YDnufcKULec2z_k4jJ8u.bKc2OfYn6CjnGn3n0YwvLYYOdAlHIqHxJNdMhOa.1bDyKCtRga0mg2PwCi.YQPVy5aeKrwNSyzZyhtapPa7XNuTG.lF17jyneaaBBo89BTJTeQ4w_gXqATH7ekWF8bV_8Qi12Mqo8jM_mGn3hvnY8AWKzOgvph_RIkJVNEhb6dEbx9ndSoHWg57fC2AsIlVZacmdZ2FcogmLQUGBV9EuhvsvA_v
Received: from [74.73.1.126] by web50306.mail.re2.yahoo.com via HTTP; Thu, 03 Dec 2009 18:44:59 PST
X-Mailer: YahooMailRC/240.3 YahooMailWebService/0.8.100.260964
References: <94095f520912030846j5c25f0aetdf5a0f4215a04342@mail.gmail.com> <9ac0c6aa0912030913n4075a4falab1263ce5e924e6@mail.gmail.com> <BAFDED91EF7D5A43A30F897D6C94B1284D33D8F559@MBX.ad.sdsc.edu>
Date: Thu, 3 Dec 2009 18:44:59 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Snowball Stemmer Question
To: java-user@lucene.apache.org
In-Reply-To: <BAFDED91EF7D5A43A30F897D6C94B1284D33D8F559@MBX.ad.sdsc.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

Chris,

You could look at KStem to see if that does a better job.
Or perhaps WordNet can be used to get the lemma of those terms instead of using stemming.
Finally.... what was I going to say... ah, yes, using synonyms may be another way this can be handled.

Otis
--
Sematext -- http://sematext.com/ -- Solr - Lucene - Nutch



----- Original Message ----
> From: Christopher Condit <condit@sdsc.edu>
> To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
> Sent: Thu, December 3, 2009 3:04:03 PM
> Subject: Snowball Stemmer Question
> 
> The Snowball Analyzer works well for certain constructs but not others. In 
> particular I'm having a problem with things like "colossal" vs "colossus" and 
> "hippocampus" vs "hippocampal".
> Is there a way to customize the analyzer to include these rules?
> Thanks,
> -Chris
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 04 02:56:50 2009
Return-Path: <java-user-return-43910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76145 invoked from network); 4 Dec 2009 02:56:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Dec 2009 02:56:50 -0000
Received: (qmail 49015 invoked by uid 500); 4 Dec 2009 02:56:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48892 invoked by uid 500); 4 Dec 2009 02:56:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48882 invoked by uid 99); 4 Dec 2009 02:56:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Dec 2009 02:56:45 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.61] (HELO web50307.mail.re2.yahoo.com) (206.190.38.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 04 Dec 2009 02:56:43 +0000
Received: (qmail 39569 invoked by uid 60001); 4 Dec 2009 02:56:21 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1259895381; bh=/xqwhkkzbYZ8LAHlJYbgctrqfUHw4zdHLUi1SrskWXI=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=Y2OJZraadfG+2YmjLIsqcWdZEWpSD7+1ig56kQcBHyn1EOdxIFaB8JhE7jgdZnJaaMS1bUox1YeV8o6zuvOq4J40iAdw5aPeClFcvH98yY+DORtPKOURMkLN6OFyxFpsASaFUkiQcb4dEKK+rwMh07JqWFPtkAwxTAwQ05AMBfI=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=nu1j9Ce8D9FwdXTBT16MvHIdz1KpEm5mZWHB+eSzU4cdRO6uKIfqk6sz3APPgSjvKK8tOCBYWu8jBAzz11hzcCZHblrIt+rCVsMcy9S6P0ebVJWez13xV1qv3fTcrk8xlXQlZCLSSZcWhcl8fo/B7BQvhLo9P53Ydq7032P9Dls=;
Message-ID: <681678.38990.qm@web50307.mail.re2.yahoo.com>
X-YMail-OSG: ZF9ww9kVM1laK9VaWBgSsQZOd0r1J5LsdymaZIkJowdhipGpsq5J.AQcKSd1F5eahhwDDC1IWUFyDEoQJgsrvsRJilu_BOozhit7zRoQGxnNMf14ccwtu.THn7qqlH81D5Ij5BzG8t1m_oD1AYsAk_E9bfk0_QUb1tn5f9lFusnbcSEmRpuCbuUpl.AK.vak_DUw69HySFDrbgK3VT9YBt61I4hBgAlzdjeITI0jv9KXfiuN.5FKwqjQaX1KZ3r40NirmykZXXdJCJ_Xv78r1mUx1KGbwD89h1b.XYhiwLdtC4qoWsSTOkqwQebtuBim7v_YhVowTqW7Ivzy.n7_g3Wy2FOhyZwuw1a5bdvJ0Yd8Ry0W5Rgz7T_PMvuPOhpjWIIb7tTPD6tfiKQbF9uqL7hZ
Received: from [74.73.1.126] by web50307.mail.re2.yahoo.com via HTTP; Thu, 03 Dec 2009 18:56:21 PST
X-Mailer: YahooMailRC/240.3 YahooMailWebService/0.8.100.260964
References: <7af3bac90912030837yea27584wb3c22da1614cc249@mail.gmail.com>
Date: Thu, 3 Dec 2009 18:56:21 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Getting score of explicit documents for a query
To: java-user@lucene.apache.org
In-Reply-To: <7af3bac90912030837yea27584wb3c22da1614cc249@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

I think you should be able to use 1+ FilteredQuery (with IDs of your docs) with your main query and thus get the scores only for docs that interest you.

 Otis
--
Sematext -- http://sematext.com/ -- Solr - Lucene - Nutch



----- Original Message ----
> From: Erdinc Yilmazel <erdinc@yilmazel.com>
> To: java-user@lucene.apache.org
> Sent: Thu, December 3, 2009 11:37:08 AM
> Subject: Getting score of explicit documents for a query
> 
> Hi,
> 
> Given a query, is there a way to learn score of some specific documents in
> the index against this query? I don't want to make a global search in the
> index and rank and sort all the matching documents. What I want to do is
> learn the rank of a bunch of documents in the index that I can identify by
> document id..
> 
> Erdinc


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 04 05:16:14 2009
Return-Path: <java-user-return-43911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2568 invoked from network); 4 Dec 2009 05:16:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Dec 2009 05:16:14 -0000
Received: (qmail 66087 invoked by uid 500); 4 Dec 2009 05:16:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66026 invoked by uid 500); 4 Dec 2009 05:16:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66016 invoked by uid 99); 4 Dec 2009 05:16:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Dec 2009 05:16:10 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.104.17.163] (HELO web94808.mail.in2.yahoo.com) (203.104.17.163)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 04 Dec 2009 05:16:08 +0000
Received: (qmail 43609 invoked by uid 60001); 4 Dec 2009 05:15:44 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1259903744; bh=Hm/yydC19RX/ItXU9kq87n52A3XEh5zx+2piqweaUrE=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=WUf/fnd1K8oJKvk9no3b0gPeB+YyX4OjpkzMj38/3PsQDcRzdG4dZOqNNniLR+GPP2SahqDPZFWmLbM7DKxt28u2p8boB6OmDR3pPhz+2AcEEddfAcs50wXukCBrMX4wkdYicAEAbxFM5JuL4+7pCZmNN3bo+PgF7SyIafUx84U=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=I4hWGtuSPSYBQ47vKxFTe5aoMTqf3/70dmoXXeWsS8nG6qRrKhy12DQR2jmCbtd+JnZlswPWu68xcC9CjNbjjGvO9301C0YHfHxLD7nMlOxWk8M4e3ye/I0qveCCqW3etmNA6vbZjJzVsFOEUCgTFm8VV0HJJ5Zh2ApWDQVhuN8=;
Message-ID: <527161.43575.qm@web94808.mail.in2.yahoo.com>
X-YMail-OSG: HBX5ZPYVM1k73HxIglqkfzOJr1dqFPz74TxSNmVCy2pwyo9ZTPxI.4lJg635VmYVjcgU0i7bzPlQcYhHAWCCrNpi.MTS1w39vzdCD2IKWd1_Ue3cWkJVKPZMoalWdNZGyjsZ1vR78fPaS2JCEnvbaAzF8rL_QJFvwf0aUdu3vuMRzq8DMv_x_eA2RLoYk5selI6.0Sg3PrdjRqvwQbpVj1gvVT.MRLwpzrE8wSEjQT6e824QUjmLS97H1hwUYIl2Kr9Kwt.Q
Received: from [209.73.190.211] by web94808.mail.in2.yahoo.com via HTTP; Fri, 04 Dec 2009 10:45:44 IST
X-Mailer: YahooMailClassic/8.1.6 YahooMailWebService/0.8.100.260964
Date: Fri, 4 Dec 2009 10:45:44 +0530 (IST)
From: DHIVYA M <dhivyakrishnan87@yahoo.com>
Subject: Re: How to do relevancy ranking in lucene
To: java-user@lucene.apache.org
In-Reply-To: <359a92830912030539o1158fd79y878869ab041eabb1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1964793483-1259903744=:43575"

--0-1964793483-1259903744=:43575
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

yes ofcourse but am a beginner in using lucene. So i couldnt find out where=
 , in which part of the code is this ranking handled?
=A0
So kindly point me out the place or the code if possible=20
=A0
Thanks in advance,
Dhivya

--- On Thu, 3/12/09, Erick Erickson <erickerickson@gmail.com> wrote:


From: Erick Erickson <erickerickson@gmail.com>
Subject: Re: How to do relevancy ranking in lucene
To: java-user@lucene.apache.org
Date: Thursday, 3 December, 2009, 1:39 PM


I don't really understand your goal here. Lucene already does this with
it's relevancy ranking. By definition, it calculates a score for each
document and ranks them in order of the score. This is NOT a simple
"is the word in the document or not"....

You can read about the scoring algorithm here:
http://lucene.apache.org/java/2_1_0/scoring.html

If this is way off base, can you give us some details of why
the current ranking doesn't fit your needs?

Best
Erick


On Thu, Dec 3, 2009 at 7:42 AM, DHIVYA M <dhivyakrishnan87@yahoo.com> wrote=
:

> Hi all,
> Am using lucene 2.3.2.
> When i search using lucene demo am getting all the results which contains
> the query. But i would like to restrict my results to the relevant match =
and
> not all the documents containing the query string.
>
> Ex:
> Query: how to search a string?
>
> Response am getting is: all documents containing words - search, string
>
> Desired response: I would like to compare the documents that contains bot=
h
> the words and the documents that contains anyone word of the query string=
 -
> to find the relevant documents.
>
> Kindly suggest me as how i should proceed and the details regarding this
> context.
> Urgent help needed.
>
> Thanks in advance for the timely help.
> Dhivya
>
>
>=A0 =A0 =A0 The INTERNET now has a personality. YOURS! See your Yahoo! Hom=
epage.
> http://in.yahoo.com/
=0A=0A=0A      The INTERNET now has a personality. YOURS! See your Yahoo! H=
omepage. http://in.yahoo.com/
--0-1964793483-1259903744=:43575--

From java-user-return-43912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 04 05:25:23 2009
Return-Path: <java-user-return-43912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6297 invoked from network); 4 Dec 2009 05:25:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Dec 2009 05:25:23 -0000
Received: (qmail 73138 invoked by uid 500); 4 Dec 2009 05:25:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73043 invoked by uid 500); 4 Dec 2009 05:25:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73033 invoked by uid 99); 4 Dec 2009 05:25:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Dec 2009 05:25:18 +0000
X-ASF-Spam-Status: No, hits=-2.4 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [202.86.5.90] (HELO smtp103.mail.in.yahoo.com) (202.86.5.90)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 04 Dec 2009 05:25:13 +0000
Received: (qmail 80671 invoked from network); 4 Dec 2009 05:24:49 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=cG0A70rYoREPt3AuuQ7+oeLkTZfusFmgeUxwGMtz4BovmayY647pj+tSFW0Wj02SZXV5v8k2Wj0GNqMMFtRujYdHMNH7hn8NJMsX4C8kEiE1QKghUqLZzKJ5wTUdnDUUnNSTHAlwDXRgL7MbqBPgKvEFPhpdLoRK/90hDE3a3rI=  ;
Received: from  (emailgane@203.98.194.130 with login)
        by smtp103.mail.in.yahoo.com with SMTP; 04 Dec 2009 10:54:45 +0530 IST
X-Yahoo-SMTP: JObyHkuswBBrNSLZp.Ycd7Boqpr_GQ--
X-YMail-OSG: 26tLoCoVM1mUMI0iAlcdqgO.LDtWIzYSCnq27KySyjbhSAhuHMxVjJkRW.TPRW40sDZUV1TnJ7dfuJ_Q2Gd3e.C80abT4hNKe5QL6KC7J6LVYjFwIWlXARlZk_kYGrLSdLjC74yoxyqCb.rkYsy4lfMR768G68wo8dRP5Cywv3yEV3IZiq9MJjyvlvRcbyOaqvQftt2n0OynmZIW1wBMGIGjRPk0Ja57zNB77EWvxMdPN3GkPT9UiQ--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <026901ca74a2$17552360$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <006801ca6f1e$8dc488d0$710bc30a@sv.us.sonicwall.com> <2ffb6d060911270230o34272120w668a25c0593779fd@mail.gmail.com> <9ac0c6aa0912030239l8c70b37x8f936ae8905e8259@mail.gmail.com> <018d01ca7407$18f59060$710bc30a@sv.us.sonicwall.com> <9ac0c6aa0912030317h642f5194g6e48d08d64972a0c@mail.gmail.com> <01bf01ca7412$4d8dea60$710bc30a@sv.us.sonicwall.com> <9ac0c6aa0912030452m660fec4byf4c9e368f24b57cf@mail.gmail.com> <020601ca7425$32f57700$710bc30a@sv.us.sonicwall.com> <2ffb6d060912030705r3708b688nf44f810c3ea931f7@mail.gmail.com> <023701ca742f$ed9e2610$710bc30a@sv.us.sonicwall.com> <9ac0c6aa0912030805m437713cclcee1d8b6f77848e9@mail.gmail.com>
Subject: Re: IndexDivisor
Date: Fri, 4 Dec 2009 10:54:42 +0530
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_NextPart_000_0267_01CA74D0.2F00ED90"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138

------=_NextPart_000_0267_01CA74D0.2F00ED90
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable

Thanks mike..=20

Please find the attached file. I ran the testing for 1,100,1000,10000 =
divisor value.  There is difference from 1 to 100 but there is no =
difference between 100 to 10000.=20

I created a new application, in which i opened all reader and searcher =
and warmed up. Sleep for a minute and close all the searcher and reader. =


There is no deletions, no norms and i am not doing sorting.

Regards
Ganesh



----- Original Message -----=20
From: "Michael McCandless" <lucene@mikemccandless.com>
To: <java-user@lucene.apache.org>
Sent: Thursday, December 03, 2009 9:35 PM
Subject: Re: IndexDivisor


Can you run w/ a memory profiler?  I don't trust that gc is truly =
running.

Mike

On Thu, Dec 3, 2009 at 10:47 AM, Ganesh <emailgane@yahoo.co.in> wrote:
> I am doing GC before calculating the memory. Even i set my =
indexdivisor to 10000 but there seems to be no change.
>
> Below are my stats
> IndexDivisor Memory
> -1 7 MB
> 1 486 MB
> 100 180 MB
> 1000 176 MB.
> 10000 176MB
>
> Regards
> Ganesh
>
> ----- Original Message -----
> From: "Danil =C5=A2ORIN" <torindan@gmail.com>
> To: <java-user@lucene.apache.org>
> Sent: Thursday, December 03, 2009 8:35 PM
> Subject: Re: IndexDivisor
>
>
> Run System.gc() exactly before measuring memory usage.
>
> On sun jvm it will FORCE gc (unless DisableExplicitGC is used).
>
>
> On Thu, Dec 3, 2009 at 16:30, Ganesh <emailgane@yahoo.co.in> wrote:
>> Thanks mike.
>>
>> I am opening the reader and warming it up and then calculating the =
memory consumed.
>> long usedMemory =3D runtime.totalMemory() - runtime.freeMemory();
>>
>> Regards
>> Ganesh
>>
>> ----- Original Message -----
>> From: "Michael McCandless" <lucene@mikemccandless.com>
>> To: <java-user@lucene.apache.org>
>> Sent: Thursday, December 03, 2009 6:22 PM
>> Subject: Re: IndexDivisor
>>
>>
>> On Thu, Dec 3, 2009 at 7:15 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>>
>>> Below are my stats
>>> IndexDivisor Memory
>>> -1 7 MB
>>> 1 486 MB
>>> 100 180 MB
>>> 1000 176 MB.
>>
>> Do you simply create the IndexWriter & IndexReader, but do no
>> searching/indexing?
>>
>> How are you measuring RAM? You should use a RAM profiler (eg YourKit)
>> to get the "real" usage, not counting garbage that's yet to be
>> collected.
>>
>> My guess is the shear process of Lucene scanning your terms index
>> creates lots of garbage and you're measuring the RAM consumed by that
>> garbage. The garbage should be harmless (it'll eventually get GCd &
>> reused).
>>
>>> 1. Whether term vector will consume RAM. I think it should only =
consume disk space.
>>
>> No RAM is consumed.
>>
>>> 2. By setting RAM buffer for IW, Does it will allocate memory Or =
based on the usage the memory will be allocated / increased.
>>
>> Only a little RAM is allocated up front, I think. It's only as you
>> start indexing docs that the big RAM is really allocated. After a
>> flush the RAM is then reused (ie, not freed) for subsequent segments.
>>
>> Mike
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>> Send instant messages to your online friends =
http://in.messenger.yahoo.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> Send instant messages to your online friends =
http://in.messenger.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_000_0267_01CA74D0.2F00ED90
Content-Type: text/plain;
	name="Divisor_10000.txt"
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
	filename="Divisor_10000.txt"

IndexReader opened with IndexDivisor: 10000
TermCount: 76797
Warmup done: 
Memory: UsedMemory: 0 :FreeMemory:793
IndexReader opened with IndexDivisor: 10000
TermCount: 100517
Warmup done: 
Memory: UsedMemory: 0 :FreeMemory:793
IndexReader opened with IndexDivisor: 10000
TermCount: 7046764
Warmup done: 
Memory: UsedMemory: 4 :FreeMemory:788
IndexReader opened with IndexDivisor: 10000
TermCount: 895
Warmup done: 
Memory: UsedMemory: 4 :FreeMemory:788
IndexReader opened with IndexDivisor: 10000
TermCount: 16027390
Warmup done: 
Memory: UsedMemory: 14 :FreeMemory:778
IndexReader opened with IndexDivisor: 10000
TermCount: 23763379
Warmup done: 
Memory: UsedMemory: 29 :FreeMemory:763
IndexReader opened with IndexDivisor: 10000
TermCount: 14045912
Warmup done: 
Memory: UsedMemory: 38 :FreeMemory:754
IndexReader opened with IndexDivisor: 10000
TermCount: 24766967
Warmup done: 
Memory: UsedMemory: 53 :FreeMemory:739
IndexReader opened with IndexDivisor: 10000
TermCount: 14076860
Warmup done: 
Memory: UsedMemory: 62 :FreeMemory:730
IndexReader opened with IndexDivisor: 10000
TermCount: 198181
Warmup done: 
Memory: UsedMemory: 62 :FreeMemory:730
IndexReader opened with IndexDivisor: 10000
TermCount: 9936827
Warmup done: 
Memory: UsedMemory: 68 :FreeMemory:724
IndexReader opened with IndexDivisor: 10000
TermCount: 8404853
Warmup done: 
Memory: UsedMemory: 73 :FreeMemory:719
IndexReader opened with IndexDivisor: 10000
TermCount: 103089
Warmup done: 
Memory: UsedMemory: 73 :FreeMemory:719
IndexReader opened with IndexDivisor: 10000
TermCount: 10509706
Warmup done: 
Memory: UsedMemory: 80 :FreeMemory:713
IndexReader opened with IndexDivisor: 10000
TermCount: 6346746
Warmup done: 
Memory: UsedMemory: 83 :FreeMemory:709
IndexReader opened with IndexDivisor: 10000
TermCount: 3352636
Warmup done: 
Memory: UsedMemory: 85 :FreeMemory:707
IndexReader opened with IndexDivisor: 10000
TermCount: 706120
Warmup done: 
Memory: UsedMemory: 86 :FreeMemory:707
IndexReader opened with IndexDivisor: 10000
TermCount: 11797452
Warmup done: 
Memory: UsedMemory: 93 :FreeMemory:700
IndexReader opened with IndexDivisor: 10000
TermCount: 11070070
Warmup done: 
Memory: UsedMemory: 99 :FreeMemory:693
IndexReader opened with IndexDivisor: 10000
TermCount: 153046
Warmup done: 
Memory: UsedMemory: 99 :FreeMemory:693
IndexReader opened with IndexDivisor: 10000
TermCount: 13863642
Warmup done: 
Memory: UsedMemory: 107 :FreeMemory:685
IndexReader opened with IndexDivisor: 10000
TermCount: 12390328
Warmup done: 
Memory: UsedMemory: 115 :FreeMemory:678
IndexReader opened with IndexDivisor: 10000
TermCount: 12820556
Warmup done: 
Memory: UsedMemory: 123 :FreeMemory:670
IndexReader opened with IndexDivisor: 10000
TermCount: 14774894
Warmup done: 
Memory: UsedMemory: 132 :FreeMemory:660
IndexReader opened with IndexDivisor: 10000
TermCount: 6751075
Warmup done: 
Memory: UsedMemory: 136 :FreeMemory:656
IndexReader opened with IndexDivisor: 10000
TermCount: 159274
Warmup done: 
Memory: UsedMemory: 136 :FreeMemory:656
IndexReader opened with IndexDivisor: 10000
TermCount: 6561434
Warmup done: 
Memory: UsedMemory: 139 :FreeMemory:653
IndexReader opened with IndexDivisor: 10000
TermCount: 6099580
Warmup done: 
Memory: UsedMemory: 142 :FreeMemory:650
IndexReader opened with IndexDivisor: 10000
TermCount: 12735737
Warmup done: 
Memory: UsedMemory: 149 :FreeMemory:644
IndexReader opened with IndexDivisor: 10000
TermCount: 16537020
Warmup done: 
Memory: UsedMemory: 158 :FreeMemory:635
IndexReader opened with IndexDivisor: 10000
TermCount: 15858883
Warmup done: 
Memory: UsedMemory: 166 :FreeMemory:627
IndexReader opened with IndexDivisor: 10000
TermCount: 7393342
Warmup done: 
Memory: UsedMemory: 169 :FreeMemory:624
Sleep.
Close IndexSearcher and Reader.
Memory: UsedMemory: 169 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 169 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 169 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 169 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 169 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 169 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 169 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 169 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 169 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 169 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 168 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 168 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 168 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 168 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 168 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 168 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 168 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 168 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 168 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 168 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 168 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 168 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 168 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 168 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 168 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 168 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 168 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 168 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 168 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 168 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 168 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 168 :FreeMemory:624
Sleep.

------=_NextPart_000_0267_01CA74D0.2F00ED90
Content-Type: text/plain;
	name="Divisor_1.txt"
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
	filename="Divisor_1.txt"

IndexReader opened with IndexDivisor: 1
TermCount: 76797
Warmup done: 
Memory: UsedMemory: 0 :FreeMemory:793
IndexReader opened with IndexDivisor: 1
TermCount: 100517
Warmup done: 
Memory: UsedMemory: 0 :FreeMemory:792
IndexReader opened with IndexDivisor: 1
TermCount: 7046764
Warmup done: 
Memory: UsedMemory: 12 :FreeMemory:780
IndexReader opened with IndexDivisor: 1
TermCount: 895
Warmup done: 
Memory: UsedMemory: 12 :FreeMemory:780
IndexReader opened with IndexDivisor: 1
TermCount: 16027390
Warmup done: 
Memory: UsedMemory: 40 :FreeMemory:753
IndexReader opened with IndexDivisor: 1
TermCount: 23763379
Warmup done: 
Memory: UsedMemory: 81 :FreeMemory:712
IndexReader opened with IndexDivisor: 1
TermCount: 14045912
Warmup done: 
Memory: UsedMemory: 104 :FreeMemory:688
IndexReader opened with IndexDivisor: 1
TermCount: 24766967
Warmup done: 
Memory: UsedMemory: 147 :FreeMemory:646
IndexReader opened with IndexDivisor: 1
TermCount: 14076860
Warmup done: 
Memory: UsedMemory: 170 :FreeMemory:622
IndexReader opened with IndexDivisor: 1
TermCount: 198181
Warmup done: 
Memory: UsedMemory: 171 :FreeMemory:622
IndexReader opened with IndexDivisor: 1
TermCount: 9936827
Warmup done: 
Memory: UsedMemory: 187 :FreeMemory:605
IndexReader opened with IndexDivisor: 1
TermCount: 8404853
Warmup done: 
Memory: UsedMemory: 201 :FreeMemory:591
IndexReader opened with IndexDivisor: 1
TermCount: 103089
Warmup done: 
Memory: UsedMemory: 201 :FreeMemory:591
IndexReader opened with IndexDivisor: 1
TermCount: 10509706
Warmup done: 
Memory: UsedMemory: 219 :FreeMemory:573
IndexReader opened with IndexDivisor: 1
TermCount: 6346746
Warmup done: 
Memory: UsedMemory: 230 :FreeMemory:563
IndexReader opened with IndexDivisor: 1
TermCount: 3352636
Warmup done: 
Memory: UsedMemory: 235 :FreeMemory:557
IndexReader opened with IndexDivisor: 1
TermCount: 706120
Warmup done: 
Memory: UsedMemory: 236 :FreeMemory:556
IndexReader opened with IndexDivisor: 1
TermCount: 11797452
Warmup done: 
Memory: UsedMemory: 256 :FreeMemory:537
IndexReader opened with IndexDivisor: 1
TermCount: 11070070
Warmup done: 
Memory: UsedMemory: 274 :FreeMemory:518
IndexReader opened with IndexDivisor: 1
TermCount: 153046
Warmup done: 
Memory: UsedMemory: 275 :FreeMemory:518
IndexReader opened with IndexDivisor: 1
TermCount: 13863642
Warmup done: 
Memory: UsedMemory: 298 :FreeMemory:495
IndexReader opened with IndexDivisor: 1
TermCount: 12390328
Warmup done: 
Memory: UsedMemory: 319 :FreeMemory:474
IndexReader opened with IndexDivisor: 1
TermCount: 12820556
Warmup done: 
Memory: UsedMemory: 340 :FreeMemory:452
IndexReader opened with IndexDivisor: 1
TermCount: 14774894
Warmup done: 
Memory: UsedMemory: 366 :FreeMemory:427
IndexReader opened with IndexDivisor: 1
TermCount: 6751075
Warmup done: 
Memory: UsedMemory: 377 :FreeMemory:416
IndexReader opened with IndexDivisor: 1
TermCount: 159274
Warmup done: 
Memory: UsedMemory: 377 :FreeMemory:415
IndexReader opened with IndexDivisor: 1
TermCount: 6561434
Warmup done: 
Memory: UsedMemory: 387 :FreeMemory:405
IndexReader opened with IndexDivisor: 1
TermCount: 6099580
Warmup done: 
Memory: UsedMemory: 396 :FreeMemory:396
IndexReader opened with IndexDivisor: 1
TermCount: 12735737
Warmup done: 
Memory: UsedMemory: 416 :FreeMemory:376
IndexReader opened with IndexDivisor: 1
TermCount: 16537020
Warmup done: 
Memory: UsedMemory: 443 :FreeMemory:350
IndexReader opened with IndexDivisor: 1
TermCount: 15858883
Warmup done: 
Memory: UsedMemory: 467 :FreeMemory:325
IndexReader opened with IndexDivisor: 1
TermCount: 7393342
Warmup done: 
Memory: UsedMemory: 478 :FreeMemory:315
Sleep.
Close IndexSearcher and Reader.
Memory: UsedMemory: 478 :FreeMemory:315
Close IndexSearcher and Reader.
Memory: UsedMemory: 478 :FreeMemory:314
Close IndexSearcher and Reader.
Memory: UsedMemory: 478 :FreeMemory:314
Close IndexSearcher and Reader.
Memory: UsedMemory: 479 :FreeMemory:314
Close IndexSearcher and Reader.
Memory: UsedMemory: 453 :FreeMemory:340
Close IndexSearcher and Reader.
Memory: UsedMemory: 449 :FreeMemory:344
Close IndexSearcher and Reader.
Memory: UsedMemory: 434 :FreeMemory:359
Close IndexSearcher and Reader.
Memory: UsedMemory: 407 :FreeMemory:386
Close IndexSearcher and Reader.
Memory: UsedMemory: 369 :FreeMemory:423
Close IndexSearcher and Reader.
Memory: UsedMemory: 369 :FreeMemory:423
Close IndexSearcher and Reader.
Memory: UsedMemory: 369 :FreeMemory:423
Close IndexSearcher and Reader.
Memory: UsedMemory: 369 :FreeMemory:423
Close IndexSearcher and Reader.
Memory: UsedMemory: 349 :FreeMemory:443
Close IndexSearcher and Reader.
Memory: UsedMemory: 349 :FreeMemory:443
Close IndexSearcher and Reader.
Memory: UsedMemory: 349 :FreeMemory:443
Close IndexSearcher and Reader.
Memory: UsedMemory: 349 :FreeMemory:443
Close IndexSearcher and Reader.
Memory: UsedMemory: 327 :FreeMemory:466
Close IndexSearcher and Reader.
Memory: UsedMemory: 327 :FreeMemory:466
Close IndexSearcher and Reader.
Memory: UsedMemory: 315 :FreeMemory:478
Close IndexSearcher and Reader.
Memory: UsedMemory: 315 :FreeMemory:478
Close IndexSearcher and Reader.
Memory: UsedMemory: 287 :FreeMemory:505
Close IndexSearcher and Reader.
Memory: UsedMemory: 287 :FreeMemory:505
Close IndexSearcher and Reader.
Memory: UsedMemory: 275 :FreeMemory:518
Close IndexSearcher and Reader.
Memory: UsedMemory: 259 :FreeMemory:534
Close IndexSearcher and Reader.
Memory: UsedMemory: 237 :FreeMemory:556
Close IndexSearcher and Reader.
Memory: UsedMemory: 237 :FreeMemory:556
Close IndexSearcher and Reader.
Memory: UsedMemory: 237 :FreeMemory:556
Close IndexSearcher and Reader.
Memory: UsedMemory: 237 :FreeMemory:556
Close IndexSearcher and Reader.
Memory: UsedMemory: 210 :FreeMemory:583
Close IndexSearcher and Reader.
Memory: UsedMemory: 210 :FreeMemory:583
Close IndexSearcher and Reader.
Memory: UsedMemory: 193 :FreeMemory:599
Close IndexSearcher and Reader.
Memory: UsedMemory: 186 :FreeMemory:607
Sleep.

------=_NextPart_000_0267_01CA74D0.2F00ED90
Content-Type: text/plain;
	name="Divisor_100.txt"
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
	filename="Divisor_100.txt"

IndexReader opened with IndexDivisor: 100
TermCount: 76797
Warmup done: 
Memory: UsedMemory: 0 :FreeMemory:793
IndexReader opened with IndexDivisor: 100
TermCount: 100517
Warmup done: 
Memory: UsedMemory: 0 :FreeMemory:793
IndexReader opened with IndexDivisor: 100
TermCount: 7046764
Warmup done: 
Memory: UsedMemory: 4 :FreeMemory:788
IndexReader opened with IndexDivisor: 100
TermCount: 895
Warmup done: 
Memory: UsedMemory: 4 :FreeMemory:788
IndexReader opened with IndexDivisor: 100
TermCount: 16027390
Warmup done: 
Memory: UsedMemory: 15 :FreeMemory:778
IndexReader opened with IndexDivisor: 100
TermCount: 23763379
Warmup done: 
Memory: UsedMemory: 30 :FreeMemory:763
IndexReader opened with IndexDivisor: 100
TermCount: 14045912
Warmup done: 
Memory: UsedMemory: 39 :FreeMemory:754
IndexReader opened with IndexDivisor: 100
TermCount: 24766967
Warmup done: 
Memory: UsedMemory: 54 :FreeMemory:738
IndexReader opened with IndexDivisor: 100
TermCount: 14076860
Warmup done: 
Memory: UsedMemory: 63 :FreeMemory:729
IndexReader opened with IndexDivisor: 100
TermCount: 198181
Warmup done: 
Memory: UsedMemory: 63 :FreeMemory:729
IndexReader opened with IndexDivisor: 100
TermCount: 9936827
Warmup done: 
Memory: UsedMemory: 69 :FreeMemory:723
IndexReader opened with IndexDivisor: 100
TermCount: 8404853
Warmup done: 
Memory: UsedMemory: 74 :FreeMemory:718
IndexReader opened with IndexDivisor: 100
TermCount: 103089
Warmup done: 
Memory: UsedMemory: 75 :FreeMemory:718
IndexReader opened with IndexDivisor: 100
TermCount: 10509706
Warmup done: 
Memory: UsedMemory: 81 :FreeMemory:712
IndexReader opened with IndexDivisor: 100
TermCount: 6346746
Warmup done: 
Memory: UsedMemory: 85 :FreeMemory:708
IndexReader opened with IndexDivisor: 100
TermCount: 3352636
Warmup done: 
Memory: UsedMemory: 87 :FreeMemory:706
IndexReader opened with IndexDivisor: 100
TermCount: 706120
Warmup done: 
Memory: UsedMemory: 87 :FreeMemory:705
IndexReader opened with IndexDivisor: 100
TermCount: 11797452
Warmup done: 
Memory: UsedMemory: 94 :FreeMemory:698
IndexReader opened with IndexDivisor: 100
TermCount: 11070070
Warmup done: 
Memory: UsedMemory: 101 :FreeMemory:692
IndexReader opened with IndexDivisor: 100
TermCount: 153046
Warmup done: 
Memory: UsedMemory: 101 :FreeMemory:692
IndexReader opened with IndexDivisor: 100
TermCount: 13863642
Warmup done: 
Memory: UsedMemory: 109 :FreeMemory:683
IndexReader opened with IndexDivisor: 100
TermCount: 12390328
Warmup done: 
Memory: UsedMemory: 117 :FreeMemory:675
IndexReader opened with IndexDivisor: 100
TermCount: 12820556
Warmup done: 
Memory: UsedMemory: 125 :FreeMemory:668
IndexReader opened with IndexDivisor: 100
TermCount: 14774894
Warmup done: 
Memory: UsedMemory: 134 :FreeMemory:658
IndexReader opened with IndexDivisor: 100
TermCount: 6751075
Warmup done: 
Memory: UsedMemory: 138 :FreeMemory:654
IndexReader opened with IndexDivisor: 100
TermCount: 159274
Warmup done: 
Memory: UsedMemory: 139 :FreeMemory:654
IndexReader opened with IndexDivisor: 100
TermCount: 6561434
Warmup done: 
Memory: UsedMemory: 142 :FreeMemory:651
IndexReader opened with IndexDivisor: 100
TermCount: 6099580
Warmup done: 
Memory: UsedMemory: 145 :FreeMemory:648
IndexReader opened with IndexDivisor: 100
TermCount: 12735737
Warmup done: 
Memory: UsedMemory: 152 :FreeMemory:641
IndexReader opened with IndexDivisor: 100
TermCount: 16537020
Warmup done: 
Memory: UsedMemory: 161 :FreeMemory:632
IndexReader opened with IndexDivisor: 100
TermCount: 15858883
Warmup done: 
Memory: UsedMemory: 169 :FreeMemory:624
IndexReader opened with IndexDivisor: 100
TermCount: 7393342
Warmup done: 
Memory: UsedMemory: 172 :FreeMemory:621
Sleep.
Close IndexSearcher and Reader.
Memory: UsedMemory: 172 :FreeMemory:621
Close IndexSearcher and Reader.
Memory: UsedMemory: 172 :FreeMemory:621
Close IndexSearcher and Reader.
Memory: UsedMemory: 172 :FreeMemory:621
Close IndexSearcher and Reader.
Memory: UsedMemory: 172 :FreeMemory:621
Close IndexSearcher and Reader.
Memory: UsedMemory: 172 :FreeMemory:621
Close IndexSearcher and Reader.
Memory: UsedMemory: 172 :FreeMemory:621
Close IndexSearcher and Reader.
Memory: UsedMemory: 171 :FreeMemory:622
Close IndexSearcher and Reader.
Memory: UsedMemory: 171 :FreeMemory:622
Close IndexSearcher and Reader.
Memory: UsedMemory: 171 :FreeMemory:622
Close IndexSearcher and Reader.
Memory: UsedMemory: 171 :FreeMemory:622
Close IndexSearcher and Reader.
Memory: UsedMemory: 170 :FreeMemory:622
Close IndexSearcher and Reader.
Memory: UsedMemory: 170 :FreeMemory:622
Close IndexSearcher and Reader.
Memory: UsedMemory: 170 :FreeMemory:622
Close IndexSearcher and Reader.
Memory: UsedMemory: 170 :FreeMemory:622
Close IndexSearcher and Reader.
Memory: UsedMemory: 170 :FreeMemory:622
Close IndexSearcher and Reader.
Memory: UsedMemory: 170 :FreeMemory:622
Close IndexSearcher and Reader.
Memory: UsedMemory: 170 :FreeMemory:622
Close IndexSearcher and Reader.
Memory: UsedMemory: 170 :FreeMemory:622
Close IndexSearcher and Reader.
Memory: UsedMemory: 170 :FreeMemory:623
Close IndexSearcher and Reader.
Memory: UsedMemory: 170 :FreeMemory:623
Close IndexSearcher and Reader.
Memory: UsedMemory: 170 :FreeMemory:623
Close IndexSearcher and Reader.
Memory: UsedMemory: 170 :FreeMemory:623
Close IndexSearcher and Reader.
Memory: UsedMemory: 169 :FreeMemory:623
Close IndexSearcher and Reader.
Memory: UsedMemory: 169 :FreeMemory:623
Close IndexSearcher and Reader.
Memory: UsedMemory: 169 :FreeMemory:623
Close IndexSearcher and Reader.
Memory: UsedMemory: 169 :FreeMemory:623
Close IndexSearcher and Reader.
Memory: UsedMemory: 169 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 169 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 169 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 169 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 168 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 168 :FreeMemory:624
Sleep.

------=_NextPart_000_0267_01CA74D0.2F00ED90
Content-Type: text/plain;
	name="Divisor_1000.txt"
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
	filename="Divisor_1000.txt"

IndexReader opened with IndexDivisor: 1000
TermCount: 76797
Warmup done: 
Memory: UsedMemory: 0 :FreeMemory:793
IndexReader opened with IndexDivisor: 1000
TermCount: 100517
Warmup done: 
Memory: UsedMemory: 0 :FreeMemory:793
IndexReader opened with IndexDivisor: 1000
TermCount: 7046764
Warmup done: 
Memory: UsedMemory: 4 :FreeMemory:788
IndexReader opened with IndexDivisor: 1000
TermCount: 895
Warmup done: 
Memory: UsedMemory: 4 :FreeMemory:788
IndexReader opened with IndexDivisor: 1000
TermCount: 16027390
Warmup done: 
Memory: UsedMemory: 14 :FreeMemory:778
IndexReader opened with IndexDivisor: 1000
TermCount: 23763379
Warmup done: 
Memory: UsedMemory: 30 :FreeMemory:763
IndexReader opened with IndexDivisor: 1000
TermCount: 14045912
Warmup done: 
Memory: UsedMemory: 38 :FreeMemory:754
IndexReader opened with IndexDivisor: 1000
TermCount: 24766967
Warmup done: 
Memory: UsedMemory: 53 :FreeMemory:739
IndexReader opened with IndexDivisor: 1000
TermCount: 14076860
Warmup done: 
Memory: UsedMemory: 62 :FreeMemory:730
IndexReader opened with IndexDivisor: 1000
TermCount: 198181
Warmup done: 
Memory: UsedMemory: 62 :FreeMemory:730
IndexReader opened with IndexDivisor: 1000
TermCount: 9936827
Warmup done: 
Memory: UsedMemory: 68 :FreeMemory:724
IndexReader opened with IndexDivisor: 1000
TermCount: 8404853
Warmup done: 
Memory: UsedMemory: 73 :FreeMemory:719
IndexReader opened with IndexDivisor: 1000
TermCount: 103089
Warmup done: 
Memory: UsedMemory: 73 :FreeMemory:719
IndexReader opened with IndexDivisor: 1000
TermCount: 10509706
Warmup done: 
Memory: UsedMemory: 80 :FreeMemory:713
IndexReader opened with IndexDivisor: 1000
TermCount: 6346746
Warmup done: 
Memory: UsedMemory: 83 :FreeMemory:709
IndexReader opened with IndexDivisor: 1000
TermCount: 3352636
Warmup done: 
Memory: UsedMemory: 85 :FreeMemory:707
IndexReader opened with IndexDivisor: 1000
TermCount: 706120
Warmup done: 
Memory: UsedMemory: 86 :FreeMemory:707
IndexReader opened with IndexDivisor: 1000
TermCount: 11797452
Warmup done: 
Memory: UsedMemory: 93 :FreeMemory:700
IndexReader opened with IndexDivisor: 1000
TermCount: 11070070
Warmup done: 
Memory: UsedMemory: 99 :FreeMemory:693
IndexReader opened with IndexDivisor: 1000
TermCount: 153046
Warmup done: 
Memory: UsedMemory: 99 :FreeMemory:693
IndexReader opened with IndexDivisor: 1000
TermCount: 13863642
Warmup done: 
Memory: UsedMemory: 108 :FreeMemory:685
IndexReader opened with IndexDivisor: 1000
TermCount: 12390328
Warmup done: 
Memory: UsedMemory: 115 :FreeMemory:677
IndexReader opened with IndexDivisor: 1000
TermCount: 12820556
Warmup done: 
Memory: UsedMemory: 123 :FreeMemory:670
IndexReader opened with IndexDivisor: 1000
TermCount: 14774894
Warmup done: 
Memory: UsedMemory: 132 :FreeMemory:660
IndexReader opened with IndexDivisor: 1000
TermCount: 6751075
Warmup done: 
Memory: UsedMemory: 136 :FreeMemory:656
IndexReader opened with IndexDivisor: 1000
TermCount: 159274
Warmup done: 
Memory: UsedMemory: 136 :FreeMemory:656
IndexReader opened with IndexDivisor: 1000
TermCount: 6561434
Warmup done: 
Memory: UsedMemory: 139 :FreeMemory:653
IndexReader opened with IndexDivisor: 1000
TermCount: 6099580
Warmup done: 
Memory: UsedMemory: 142 :FreeMemory:650
IndexReader opened with IndexDivisor: 1000
TermCount: 12735737
Warmup done: 
Memory: UsedMemory: 149 :FreeMemory:643
IndexReader opened with IndexDivisor: 1000
TermCount: 16537020
Warmup done: 
Memory: UsedMemory: 158 :FreeMemory:635
IndexReader opened with IndexDivisor: 1000
TermCount: 15858883
Warmup done: 
Memory: UsedMemory: 166 :FreeMemory:627
IndexReader opened with IndexDivisor: 1000
TermCount: 7393342
Warmup done: 
Memory: UsedMemory: 169 :FreeMemory:624
Sleep.
Close IndexSearcher and Reader.
Memory: UsedMemory: 169 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 169 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 169 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 169 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 169 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 169 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 169 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 169 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 169 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 169 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 169 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 169 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 169 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 169 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 169 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 169 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 169 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 169 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 168 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 168 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 168 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 168 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 168 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 168 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 168 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 168 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 168 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 168 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 168 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 168 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 168 :FreeMemory:624
Close IndexSearcher and Reader.
Memory: UsedMemory: 168 :FreeMemory:624
Sleep.


------=_NextPart_000_0267_01CA74D0.2F00ED90
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------=_NextPart_000_0267_01CA74D0.2F00ED90--

Send instant messages to your online friends http://in.messenger.yahoo.com 

From java-user-return-43913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 04 08:41:23 2009
Return-Path: <java-user-return-43913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67937 invoked from network); 4 Dec 2009 08:41:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Dec 2009 08:41:22 -0000
Received: (qmail 32641 invoked by uid 500); 4 Dec 2009 08:41:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32551 invoked by uid 500); 4 Dec 2009 08:41:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32539 invoked by uid 99); 4 Dec 2009 08:41:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Dec 2009 08:41:18 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of benhei@gmail.com designates 209.85.218.222 as permitted sender)
Received: from [209.85.218.222] (HELO mail-bw0-f222.google.com) (209.85.218.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Dec 2009 08:41:10 +0000
Received: by bwz22 with SMTP id 22so1858593bwz.5
        for <java-user@lucene.apache.org>; Fri, 04 Dec 2009 00:40:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=R2E+e5aIRbxGilLjczm8zwIT1n3FvcB5xjSPPu0cJLY=;
        b=UIGRAdT+2vE1c4RF0zGX1SvWK8Bu+stQqfBWiz0T/nncOHhRheIwcalqhgZo8noZcE
         YLuCCKofanI8fm8+6hg8+18VBgYW3+GYWKydIRCaRyZKUnwcVeiInEZyRWunVJB1x9G4
         a9LxXx/ssXVTXD1GpeayaojPiLryd9r/hqx3g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=V16BdafIJUGh6/XqJ/guDZQndtxFh5SE4UhF9cHeMoczwyWaEb3prtTWcxpNfyBN0A
         YcQQ9+WqWyv6fBI2CfewtBzsTVb6t7F9FskcqeAq3560RxemWteJ290uFgqmu9Uxke3z
         E6/cTYX/hJBxVCPDaH1zGwc1nIL6mX21VmytM=
MIME-Version: 1.0
Received: by 10.204.5.139 with SMTP id 11mr2867371bkv.102.1259916050269; Fri, 
	04 Dec 2009 00:40:50 -0800 (PST)
In-Reply-To: <359a92830912031032t9c7dab3gbdabf14c330aacec@mail.gmail.com>
References: <94095f520912030846j5c25f0aetdf5a0f4215a04342@mail.gmail.com>
	 <359a92830912031032t9c7dab3gbdabf14c330aacec@mail.gmail.com>
Date: Fri, 4 Dec 2009 09:40:50 +0100
Message-ID: <94095f520912040040k5fac5738uf974b47b5d0e00c4@mail.gmail.com>
Subject: Re: Norm Value of not existing Field
From: Benjamin Heilbrunn <benhei@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Erick, I'm not sure if I understand you right.
What do you mean by "spinning through all the terms on a field".

It would be an option to load all unique terms of a field by using TermEnum.
Than use TermDocs to get the docs to those terms.
The rest of docs doesn't contain a term and so you know, that the
field don't exists or is empty on those docs.
Btw: Is there a distinction in Lucene between empty and not existing Fields?

The above method would work very well I think, but it would require to
build and hold an extra data structure.
My index has about 20 fields and 4 million docs. The overhead would be to large.

I think - using the norms array (which is already there for most of
the fields) would be a nice approach.


Benjamin

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 04 09:04:43 2009
Return-Path: <java-user-return-43914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74928 invoked from network); 4 Dec 2009 09:04:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Dec 2009 09:04:43 -0000
Received: (qmail 67399 invoked by uid 500); 4 Dec 2009 09:04:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67324 invoked by uid 500); 4 Dec 2009 09:04:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67313 invoked by uid 99); 4 Dec 2009 09:04:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Dec 2009 09:04:41 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [203.104.17.159] (HELO web94807.mail.in2.yahoo.com) (203.104.17.159)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 04 Dec 2009 09:04:31 +0000
Received: (qmail 73464 invoked by uid 60001); 4 Dec 2009 09:04:09 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1259917449; bh=4nXvmbWs6HyrcGRPpvF2Vtl8KqDBX0ZlbqKChp65YZ0=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=i08UfHPABKL5cmafePT8sV/vYUQAccRV4HeFSLJCnTJ2kaJH/w8P3TdgClMPpM2siBUYocyqc7hG+h8wkTguaU/XOg9s+phrtXr4IbNRJ+qsgjDkzyNNZCtXAna1cooJQ9LyDQNALGrBXF0oLaE9yZy55TvKWtQm07reP0N+sko=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=cYILe+Qm7jN1MNVXMGavu4XxPHuOEUTeAAFNBlG4CxUGx7BDHZM2g7+n3e+au+hIq5E2uedg+AcgnNJUtXOL7fb/h5LiRf569BpI56vgu1pcmF3E+O4eZMrZwhtJb4Y0oksXMoUy/9bCVXCZW1jgvKqqQsb8k6BHbVGCeWPhEgE=;
Message-ID: <926936.64541.qm@web94807.mail.in2.yahoo.com>
X-YMail-OSG: xR5SEgAVM1kyAKTSvYFu2GpP0IOxU2170csK5inupjYzy3JrackC3sFgacZN4eEsgraKISqbsTE6TEsYCAqEutHOBO2NewqqrzM1QBjIta5Fbi9i_RRiklOeqAC7ePWGdERJYXRJAn6orZAS4aMSx1RoFzkovE8DtsmOcwksjQLJdIrHlbNnBYL7MHS4PtreB2DNsj0Tm1YvHXy5VOhpP3ohMdc8b8Ntf61Um5Gkzz5dKxGQw5uu5a8nW6tojXYf9bQLfsuo
Received: from [209.73.190.210] by web94807.mail.in2.yahoo.com via HTTP; Fri, 04 Dec 2009 14:34:09 IST
X-Mailer: YahooMailClassic/9.0.19 YahooMailWebService/0.8.100.260964
Date: Fri, 4 Dec 2009 14:34:09 +0530 (IST)
From: DHIVYA M <dhivyakrishnan87@yahoo.com>
Subject: How to include some more fields to be indexed in the file document class?
To: java user <java-user@lucene.apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1809841673-1259917449=:64541"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1809841673-1259917449=:64541
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi all,
=A0
Am using lucene 2.3.2.
I would like to include some more fields of the to be indexed other than th=
e available one.
=A0
In the FileDocument class of the demo version of lucene 2.3.2 there are onl=
y three fields added to the documents to be indexed.
=A0
Ex: doc.add(new Field("path"..........
=A0=A0=A0=A0=A0 doc.add(new Field("modified".........
=A0=A0=A0=A0=A0 doc.add(new Field("contents"..........
=A0
=A0
If i want to add some more fields,
like
=A0
=A0=A0=A0=A0=A0=A0doc.add(new Field("xyz"........
=A0
what should i do?
Should i modify the class file and include it again in my web lucene? Or an=
y other simpler way is possible?
Kindly let me know.
=A0
Thanks in advance,
Dhivya=0A=0A=0A      The INTERNET now has a personality. YOURS! See your Ya=
hoo! Homepage. http://in.yahoo.com/
--0-1809841673-1259917449=:64541--

From java-user-return-43915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 04 09:58:20 2009
Return-Path: <java-user-return-43915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98180 invoked from network); 4 Dec 2009 09:58:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Dec 2009 09:58:20 -0000
Received: (qmail 52424 invoked by uid 500); 4 Dec 2009 09:58:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52356 invoked by uid 500); 4 Dec 2009 09:58:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52346 invoked by uid 99); 4 Dec 2009 09:58:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Dec 2009 09:58:16 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.160.46 as permitted sender)
Received: from [209.85.160.46] (HELO mail-pw0-f46.google.com) (209.85.160.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Dec 2009 09:58:14 +0000
Received: by pwj17 with SMTP id 17so2222240pwj.5
        for <java-user@lucene.apache.org>; Fri, 04 Dec 2009 01:57:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=IYQZzgiDjJseSoOLrxxOkmHg6lTCkPqReKB038FCDsU=;
        b=jtafHH/0z6ogXMZcKKI4Kb+kRqpj+auhqiGXhFEZALB+H28Vt8QsjXBFubiarDzOBc
         ErggyomWw/YwIysjGItD0dQPG/dzJeuufj86tr8/kxZEhFjsex1EbtuNcLhQxpFcf9ro
         S+aWzlUgB8zwr1Eo/slgKiHGUaJJV41UKirqU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=uswiPjN+sKxv5e47b+T/TjHcLQjP66frtKRyScCQHk79EiKyaewL/8iqAWZ+/fCxDc
         Kk7qGu1jHeUKIbTdo8DuG2U3LnmY73yEkxz98WXWj7Wf3kazqvXgYTd+dP8bX9LRn6Jg
         F+GNUj7wdsF78qrMEy7LLHciDrs7kE44xgusY=
MIME-Version: 1.0
Received: by 10.114.189.40 with SMTP id m40mr3746489waf.228.1259920674368; 
	Fri, 04 Dec 2009 01:57:54 -0800 (PST)
In-Reply-To: <926936.64541.qm@web94807.mail.in2.yahoo.com>
References: <926936.64541.qm@web94807.mail.in2.yahoo.com>
From: Anshum <anshumg@gmail.com>
Date: Fri, 4 Dec 2009 15:27:34 +0530
Message-ID: <867513fe0912040157w5b7c49bbwe4081c37e2550201@mail.gmail.com>
Subject: Re: How to include some more fields to be indexed in the file 
	document class?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64ccdde3dabd20479e42449

--0016e64ccdde3dabd20479e42449
Content-Type: text/plain; charset=ISO-8859-1

Hi Dhivya,
So are you using the same demo code for your app? Incase you are you have to
modify that code and continue.
All said and done, you'd have to add fields in your java file and
recompile(in case you are already using some code for that purpose). In case
you would be starting to write an indexer from scratch, you'd have to write
a java file on the same  lines as the demo (modified) and include it.
Does that help?

--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Fri, Dec 4, 2009 at 2:34 PM, DHIVYA M <dhivyakrishnan87@yahoo.com> wrote:

> Hi all,
>
> Am using lucene 2.3.2.
> I would like to include some more fields of the to be indexed other than
> the available one.
>
> In the FileDocument class of the demo version of lucene 2.3.2 there are
> only three fields added to the documents to be indexed.
>
> Ex: doc.add(new Field("path"..........
>       doc.add(new Field("modified".........
>       doc.add(new Field("contents"..........
>
>
> If i want to add some more fields,
> like
>
>       doc.add(new Field("xyz"........
>
> what should i do?
> Should i modify the class file and include it again in my web lucene? Or
> any other simpler way is possible?
> Kindly let me know.
>
> Thanks in advance,
> Dhivya
>
>
>      The INTERNET now has a personality. YOURS! See your Yahoo! Homepage.
> http://in.yahoo.com/

--0016e64ccdde3dabd20479e42449--

From java-user-return-43916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 04 10:31:24 2009
Return-Path: <java-user-return-43916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17411 invoked from network); 4 Dec 2009 10:31:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Dec 2009 10:31:24 -0000
Received: (qmail 97790 invoked by uid 500); 4 Dec 2009 10:31:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97729 invoked by uid 500); 4 Dec 2009 10:31:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97719 invoked by uid 99); 4 Dec 2009 10:31:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Dec 2009 10:31:21 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Dec 2009 10:31:19 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NGVRD-0000lg-1R
	for java-user@lucene.apache.org; Fri, 04 Dec 2009 02:30:59 -0800
Message-ID: <26635841.post@talk.nabble.com>
Date: Fri, 4 Dec 2009 02:30:59 -0800 (PST)
From: "m.harig" <m.harig@gmail.com>
To: java-user@lucene.apache.org
Subject: updating index
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: m.harig@gmail.com


hello all

        how do i update my existing index to avoid my duplicates , this is
how am doing my indexing

   doc.add(new Field("id",""+i,Field.Store.YES,Field.Index.NOT_ANALYZED));
                       
   doc.add(new Field("title", indexForm.getTitle(), Field.Store.YES,
                                        Field.Index.ANALYZED));
   doc.add(new Field("contents", indexForm.getContent(),
                Field.Store.YES, Field.Index.ANALYZED));
   writer.updateDocument(new Term("id"), doc);

   but i've no luck , the index getting duplicate documents , how do i
handle it? please anyone help me?
-- 
View this message in context: http://old.nabble.com/updating-index-tp26635841p26635841.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 04 10:37:16 2009
Return-Path: <java-user-return-43917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18300 invoked from network); 4 Dec 2009 10:37:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Dec 2009 10:37:16 -0000
Received: (qmail 5460 invoked by uid 500); 4 Dec 2009 10:37:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5368 invoked by uid 500); 4 Dec 2009 10:37:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5358 invoked by uid 99); 4 Dec 2009 10:37:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Dec 2009 10:37:13 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.220.228 as permitted sender)
Received: from [209.85.220.228] (HELO mail-fx0-f228.google.com) (209.85.220.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Dec 2009 10:37:11 +0000
Received: by fxm28 with SMTP id 28so2294003fxm.5
        for <java-user@lucene.apache.org>; Fri, 04 Dec 2009 02:36:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=Mv2zit8goF+ULs+1Th0zEnEAz6x9Im8ttm9eKtA6Gk8=;
        b=FFdkcdwSZH1T+/R6efBMYnHBPyE+Zv9NcJSBip0xlZbSh+UVs715ZITjsutPayd5gg
         +k+EyI2NrxojsJzORc9qpMHYK4A5t4qW7pAKtrDouqZyczpjncnF3FTKfmg9x/BzH4nU
         YS/a/CtzjB/HalJA+MqJNR1JQ/NuLEenepTBw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=tI3e21c92wu/DTYluatzjogwdwAGNnMSyo106d5oEkvM4BLthmGNgf1EVGBg/kOL0V
         +yQVXdrQxsLCptBBOb9xEHzNCtH6VKmA0cy5h/8DF6XhifhpHnzt3OVJi/MAnyjo9rkH
         L4d6NjCDUmShyMPsih7Z1+ypgdgSCCUlMggkM=
MIME-Version: 1.0
Received: by 10.223.53.149 with SMTP id m21mr421751fag.101.1259923010121; Fri, 
	04 Dec 2009 02:36:50 -0800 (PST)
In-Reply-To: <26635841.post@talk.nabble.com>
References: <26635841.post@talk.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 4 Dec 2009 10:36:30 +0000
Message-ID: <8c4e68610912040236l2e236605sa8280a8ccb9b2ab5@mail.gmail.com>
Subject: Re: updating index
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

writer.updateDocument(new Term("id", ""+i), doc);

Read the javadocs!  Haven't we been here before?


--
Ian.


On Fri, Dec 4, 2009 at 10:30 AM, m.harig <m.harig@gmail.com> wrote:
>
> hello all
>
> =A0 =A0 =A0 =A0how do i update my existing index to avoid my duplicates ,=
 this is
> how am doing my indexing
>
> =A0 doc.add(new Field("id",""+i,Field.Store.YES,Field.Index.NOT_ANALYZED)=
);
>
> =A0 doc.add(new Field("title", indexForm.getTitle(), Field.Store.YES,
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0Field.Index.ANALYZED));
> =A0 doc.add(new Field("contents", indexForm.getContent(),
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Field.Store.YES, Field.Index.ANALYZED));
> =A0 writer.updateDocument(new Term("id"), doc);
>
> =A0 but i've no luck , the index getting duplicate documents , how do i
> handle it? please anyone help me?
> --
> View this message in context: http://old.nabble.com/updating-index-tp2663=
5841p26635841.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 04 13:31:36 2009
Return-Path: <java-user-return-43918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64267 invoked from network); 4 Dec 2009 13:31:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Dec 2009 13:31:35 -0000
Received: (qmail 1680 invoked by uid 500); 4 Dec 2009 13:31:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1595 invoked by uid 500); 4 Dec 2009 13:31:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1585 invoked by uid 99); 4 Dec 2009 13:31:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Dec 2009 13:31:32 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.211.173] (HELO mail-yw0-f173.google.com) (209.85.211.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Dec 2009 13:31:23 +0000
Received: by ywh3 with SMTP id 3so2269029ywh.22
        for <java-user@lucene.apache.org>; Fri, 04 Dec 2009 05:31:01 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.30.40 with SMTP id d40mr5448811ybd.133.1259933461328; Fri, 
	04 Dec 2009 05:31:01 -0800 (PST)
In-Reply-To: <026901ca74a2$17552360$710bc30a@sv.us.sonicwall.com>
References: <006801ca6f1e$8dc488d0$710bc30a@sv.us.sonicwall.com>
	 <018d01ca7407$18f59060$710bc30a@sv.us.sonicwall.com>
	 <9ac0c6aa0912030317h642f5194g6e48d08d64972a0c@mail.gmail.com>
	 <01bf01ca7412$4d8dea60$710bc30a@sv.us.sonicwall.com>
	 <9ac0c6aa0912030452m660fec4byf4c9e368f24b57cf@mail.gmail.com>
	 <020601ca7425$32f57700$710bc30a@sv.us.sonicwall.com>
	 <2ffb6d060912030705r3708b688nf44f810c3ea931f7@mail.gmail.com>
	 <023701ca742f$ed9e2610$710bc30a@sv.us.sonicwall.com>
	 <9ac0c6aa0912030805m437713cclcee1d8b6f77848e9@mail.gmail.com>
	 <026901ca74a2$17552360$710bc30a@sv.us.sonicwall.com>
Date: Fri, 4 Dec 2009 08:31:01 -0500
Message-ID: <9ac0c6aa0912040531s6d10b148nf6b175b8bb24e619@mail.gmail.com>
Subject: Re: IndexDivisor
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

I'm confused -- what are these attachments?  Output from a memory profiler?

Can you post the app you created?

Mike

On Fri, Dec 4, 2009 at 12:24 AM, Ganesh <emailgane@yahoo.co.in> wrote:
> Thanks mike..
>
> Please find the attached file. I ran the testing for 1,100,1000,10000 div=
isor value. =C2=A0There is difference from 1 to 100 but there is no differe=
nce between 100 to 10000.
>
> I created a new application, in which i opened all reader and searcher an=
d warmed up. Sleep for a minute and close all the searcher and reader.
>
> There is no deletions, no norms and i am not doing sorting.
>
> Regards
> Ganesh
>
>
>
> ----- Original Message -----
> From: "Michael McCandless" <lucene@mikemccandless.com>
> To: <java-user@lucene.apache.org>
> Sent: Thursday, December 03, 2009 9:35 PM
> Subject: Re: IndexDivisor
>
>
> Can you run w/ a memory profiler? =C2=A0I don't trust that gc is truly ru=
nning.
>
> Mike
>
> On Thu, Dec 3, 2009 at 10:47 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>> I am doing GC before calculating the memory. Even i set my indexdivisor =
to 10000 but there seems to be no change.
>>
>> Below are my stats
>> IndexDivisor Memory
>> -1 7 MB
>> 1 486 MB
>> 100 180 MB
>> 1000 176 MB.
>> 10000 176MB
>>
>> Regards
>> Ganesh
>>
>> ----- Original Message -----
>> From: "Danil =C5=A2ORIN" <torindan@gmail.com>
>> To: <java-user@lucene.apache.org>
>> Sent: Thursday, December 03, 2009 8:35 PM
>> Subject: Re: IndexDivisor
>>
>>
>> Run System.gc() exactly before measuring memory usage.
>>
>> On sun jvm it will FORCE gc (unless DisableExplicitGC is used).
>>
>>
>> On Thu, Dec 3, 2009 at 16:30, Ganesh <emailgane@yahoo.co.in> wrote:
>>> Thanks mike.
>>>
>>> I am opening the reader and warming it up and then calculating the memo=
ry consumed.
>>> long usedMemory =3D runtime.totalMemory() - runtime.freeMemory();
>>>
>>> Regards
>>> Ganesh
>>>
>>> ----- Original Message -----
>>> From: "Michael McCandless" <lucene@mikemccandless.com>
>>> To: <java-user@lucene.apache.org>
>>> Sent: Thursday, December 03, 2009 6:22 PM
>>> Subject: Re: IndexDivisor
>>>
>>>
>>> On Thu, Dec 3, 2009 at 7:15 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>>>
>>>> Below are my stats
>>>> IndexDivisor Memory
>>>> -1 7 MB
>>>> 1 486 MB
>>>> 100 180 MB
>>>> 1000 176 MB.
>>>
>>> Do you simply create the IndexWriter & IndexReader, but do no
>>> searching/indexing?
>>>
>>> How are you measuring RAM? You should use a RAM profiler (eg YourKit)
>>> to get the "real" usage, not counting garbage that's yet to be
>>> collected.
>>>
>>> My guess is the shear process of Lucene scanning your terms index
>>> creates lots of garbage and you're measuring the RAM consumed by that
>>> garbage. The garbage should be harmless (it'll eventually get GCd &
>>> reused).
>>>
>>>> 1. Whether term vector will consume RAM. I think it should only consum=
e disk space.
>>>
>>> No RAM is consumed.
>>>
>>>> 2. By setting RAM buffer for IW, Does it will allocate memory Or based=
 on the usage the memory will be allocated / increased.
>>>
>>> Only a little RAM is allocated up front, I think. It's only as you
>>> start indexing docs that the big RAM is really allocated. After a
>>> flush the RAM is then reused (ie, not freed) for subsequent segments.
>>>
>>> Mike
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>> Send instant messages to your online friends http://in.messenger.yahoo.=
com
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>> Send instant messages to your online friends http://in.messenger.yahoo.c=
om
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 04 13:54:37 2009
Return-Path: <java-user-return-43919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77057 invoked from network); 4 Dec 2009 13:54:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Dec 2009 13:54:37 -0000
Received: (qmail 44859 invoked by uid 500); 4 Dec 2009 13:54:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44759 invoked by uid 500); 4 Dec 2009 13:54:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44749 invoked by uid 99); 4 Dec 2009 13:54:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Dec 2009 13:54:34 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.78.27 as permitted sender)
Received: from [74.125.78.27] (HELO ey-out-2122.google.com) (74.125.78.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Dec 2009 13:54:32 +0000
Received: by ey-out-2122.google.com with SMTP id 22so642452eye.3
        for <java-user@lucene.apache.org>; Fri, 04 Dec 2009 05:54:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=9ZoGd6WBeM5RDvQkPCBKv1oV6jg57tNOWD50uMOV0VU=;
        b=J/EhUCB2w7/P7evOEUaGFkrAMKQFuI4FPyjm3o9TaQo+znto+Y+7Axszb2XzJD8PMz
         De5E1K/jrDHWVBkCZ4sVYKPSmEwk7ndTD4wP7A7qV5Cjfj1Fi4CswHplCfCnqqRfHbTb
         LzM+7Yoprgryway4IoK7hgBkL3k1z5nk/fgdI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=w6Ma2kPL67HJy9Kvv3Npp06aUumbhdEC2V1DRTcOYhlZuTIzI0LmUNdHXsZqvLiU+4
         kY92rx1I9rMEC8nT7Yqg7/P+PKTHwKrAbcRtSO6tZsZBc70NojUrXuTm2XS/V57kvz7Q
         w7HiOqEWeBt0EPK8TWZbwIr1QrNyxWppF3+IY=
MIME-Version: 1.0
Received: by 10.216.93.71 with SMTP id k49mr1042848wef.172.1259934851148; Fri, 
	04 Dec 2009 05:54:11 -0800 (PST)
In-Reply-To: <94095f520912040040k5fac5738uf974b47b5d0e00c4@mail.gmail.com>
References: <94095f520912030846j5c25f0aetdf5a0f4215a04342@mail.gmail.com>
	 <359a92830912031032t9c7dab3gbdabf14c330aacec@mail.gmail.com>
	 <94095f520912040040k5fac5738uf974b47b5d0e00c4@mail.gmail.com>
Date: Fri, 4 Dec 2009 08:54:11 -0500
Message-ID: <359a92830912040554s28d976fta610bb5cdf3f4f2f@mail.gmail.com>
Subject: Re: Norm Value of not existing Field
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d7e93a3e2de60479e7719c

--0016e6d7e93a3e2de60479e7719c
Content-Type: text/plain; charset=ISO-8859-1

The word "Filter" as part of a class is overloaded in Lucene <G>....

See: http://lucene.apache.org/java/2_9_1/api/all/index.html

The above filter is just a DocIdSet, one bit per document. So
in your example, you're only talking 12M or so, even if you
create one filter for every field and keep it around.

You *might* get some joy from, say, QueryWrapperFilter, although
I don't know if it handles pure wildcard terms (e.g. field:*)...

If that doesn't work out of the box, I *think* you can use TermDocs
with a term like field:"" and just keep marching until next() returns
false, merrily setting your Filter bits for each Doc returned by
the enumerator.....

HTH
Erick


On Fri, Dec 4, 2009 at 3:40 AM, Benjamin Heilbrunn <benhei@gmail.com> wrote:

> Erick, I'm not sure if I understand you right.
> What do you mean by "spinning through all the terms on a field".
>
> It would be an option to load all unique terms of a field by using
> TermEnum.
> Than use TermDocs to get the docs to those terms.
> The rest of docs doesn't contain a term and so you know, that the
> field don't exists or is empty on those docs.
> Btw: Is there a distinction in Lucene between empty and not existing
> Fields?
>
> The above method would work very well I think, but it would require to
> build and hold an extra data structure.
> My index has about 20 fields and 4 million docs. The overhead would be to
> large.
>
> I think - using the norms array (which is already there for most of
> the fields) would be a nice approach.
>
>
> Benjamin
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6d7e93a3e2de60479e7719c--

From java-user-return-43920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 04 14:01:48 2009
Return-Path: <java-user-return-43920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80850 invoked from network); 4 Dec 2009 14:01:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Dec 2009 14:01:48 -0000
Received: (qmail 59440 invoked by uid 500); 4 Dec 2009 14:01:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59363 invoked by uid 500); 4 Dec 2009 14:01:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59353 invoked by uid 99); 4 Dec 2009 14:01:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Dec 2009 14:01:46 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.219.225 as permitted sender)
Received: from [209.85.219.225] (HELO mail-ew0-f225.google.com) (209.85.219.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Dec 2009 14:01:40 +0000
Received: by ewy25 with SMTP id 25so540923ewy.5
        for <java-user@lucene.apache.org>; Fri, 04 Dec 2009 06:01:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=TqeoxccMB6kpHhzL4wFiJQvAy8R3RykExR8+4Jvv/ZU=;
        b=ESyR860x7qy/VcbkgDlfvjEO36hU71FKUS/r0Pkwmm2chIS4PdaG5ZrfLaqipcAeP3
         c/5okXoPFkv3AgrlJikkbpYmGp9Dkw7wRHbwHuyzwTYVVtmSAS+nqA0o7m+MqUmLxIF8
         ypXNOlnj7GFtwkKTkN13pdKCPZwDFwBrPE2AQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=FsqvEPs0JG+uC/NEKyssz1NnCOqVxCNAqincQlxVRIC23YngX0uuASDolS8w156fVG
         IAwVT8cloLwMKjFpO12DKe19GBww7C2FEk6UtxHqeYor4jJfHURR4y/IhFpJPX2GotXx
         Ps09EEtflJSTMFOSkenUv0d4vbjlRnAkRgpCU=
MIME-Version: 1.0
Received: by 10.216.87.133 with SMTP id y5mr1091664wee.139.1259935279030; Fri, 
	04 Dec 2009 06:01:19 -0800 (PST)
In-Reply-To: <527161.43575.qm@web94808.mail.in2.yahoo.com>
References: <359a92830912030539o1158fd79y878869ab041eabb1@mail.gmail.com>
	 <527161.43575.qm@web94808.mail.in2.yahoo.com>
Date: Fri, 4 Dec 2009 09:01:18 -0500
Message-ID: <359a92830912040601x7879c998m2afeeb7f110459b7@mail.gmail.com>
Subject: Re: How to do relevancy ranking in lucene
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d9a2c7bf24ca0479e78a9f

--0016e6d9a2c7bf24ca0479e78a9f
Content-Type: text/plain; charset=ISO-8859-1

Hmmm, I don't know the underlying scoring code well enough to answer
off the top of my head. But if you have the source code, I'd examine
the junit tests (the class names should give you a strong hint) and
start from there.

Best
Erick

On Fri, Dec 4, 2009 at 12:15 AM, DHIVYA M <dhivyakrishnan87@yahoo.com>wrote:

> yes ofcourse but am a beginner in using lucene. So i couldnt find out where
> , in which part of the code is this ranking handled?
>
> So kindly point me out the place or the code if possible
>
> Thanks in advance,
> Dhivya
>
> --- On Thu, 3/12/09, Erick Erickson <erickerickson@gmail.com> wrote:
>
>
> From: Erick Erickson <erickerickson@gmail.com>
> Subject: Re: How to do relevancy ranking in lucene
> To: java-user@lucene.apache.org
> Date: Thursday, 3 December, 2009, 1:39 PM
>
>
> I don't really understand your goal here. Lucene already does this with
> it's relevancy ranking. By definition, it calculates a score for each
> document and ranks them in order of the score. This is NOT a simple
> "is the word in the document or not"....
>
> You can read about the scoring algorithm here:
> http://lucene.apache.org/java/2_1_0/scoring.html
>
> If this is way off base, can you give us some details of why
> the current ranking doesn't fit your needs?
>
> Best
> Erick
>
>
> On Thu, Dec 3, 2009 at 7:42 AM, DHIVYA M <dhivyakrishnan87@yahoo.com>
> wrote:
>
> > Hi all,
> > Am using lucene 2.3.2.
> > When i search using lucene demo am getting all the results which contains
> > the query. But i would like to restrict my results to the relevant match
> and
> > not all the documents containing the query string.
> >
> > Ex:
> > Query: how to search a string?
> >
> > Response am getting is: all documents containing words - search, string
> >
> > Desired response: I would like to compare the documents that contains
> both
> > the words and the documents that contains anyone word of the query string
> -
> > to find the relevant documents.
> >
> > Kindly suggest me as how i should proceed and the details regarding this
> > context.
> > Urgent help needed.
> >
> > Thanks in advance for the timely help.
> > Dhivya
> >
> >
> >      The INTERNET now has a personality. YOURS! See your Yahoo! Homepage.
> > http://in.yahoo.com/
>
>
>
>      The INTERNET now has a personality. YOURS! See your Yahoo! Homepage.
> http://in.yahoo.com/
>

--0016e6d9a2c7bf24ca0479e78a9f--

From java-user-return-43921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 04 14:12:35 2009
Return-Path: <java-user-return-43921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85788 invoked from network); 4 Dec 2009 14:12:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Dec 2009 14:12:35 -0000
Received: (qmail 73749 invoked by uid 500); 4 Dec 2009 14:12:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73682 invoked by uid 500); 4 Dec 2009 14:12:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73672 invoked by uid 99); 4 Dec 2009 14:12:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Dec 2009 14:12:32 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [202.86.5.94] (HELO smtp107.mail.in.yahoo.com) (202.86.5.94)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 04 Dec 2009 14:12:21 +0000
Received: (qmail 89048 invoked from network); 4 Dec 2009 14:11:59 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=L2MKJO4ao/L13C4XZI4q8es9/rAMvh/DNrtwRADByBRpl5zwB3/whC+4FRub+TtZJUHJogSTMkTSgA6pSzNRUl6mNqMxR2XgX28buvy9vI2ELSq8nx7KUK5BkQvzURgJloNae0tp7FIiEs5BzRBePquroAfGq7jDAdBgT2ZTcaQ=  ;
Received: from  (emailgane@203.98.194.130 with login)
        by smtp107.mail.in.yahoo.com with SMTP; 04 Dec 2009 19:41:59 +0530 IST
X-Yahoo-SMTP: JObyHkuswBBrNSLZp.Ycd7Boqpr_GQ--
X-YMail-OSG: ZwRixE4VM1ncPi1Ae08CIQ1fqYWoFfQA_fddMiuiuMs8Jpdju16kLyErmgktUsw0JAfOTijDSZvOJTBTME8RqdqvzijSoivxPFny4Zo6oTztjUsXSFBlX6te0b99UXG6fv_cgQ91oo1sEE8yKXT5JMjDK81JNRnBI7mgoXOQMbpwRQh.FWiJWfyxjgpaw6uHRLJNH7ibkzGfyfe.ugp_20du454_ZneyNFKtVAeccReXXUG4QkVnew--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <033001ca74eb$be5d42c0$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <006801ca6f1e$8dc488d0$710bc30a@sv.us.sonicwall.com> <018d01ca7407$18f59060$710bc30a@sv.us.sonicwall.com> <9ac0c6aa0912030317h642f5194g6e48d08d64972a0c@mail.gmail.com> <01bf01ca7412$4d8dea60$710bc30a@sv.us.sonicwall.com> <9ac0c6aa0912030452m660fec4byf4c9e368f24b57cf@mail.gmail.com> <020601ca7425$32f57700$710bc30a@sv.us.sonicwall.com> <2ffb6d060912030705r3708b688nf44f810c3ea931f7@mail.gmail.com> <023701ca742f$ed9e2610$710bc30a@sv.us.sonicwall.com> <9ac0c6aa0912030805m437713cclcee1d8b6f77848e9@mail.gmail.com> <026901ca74a2$17552360$710bc30a@sv.us.sonicwall.com> <9ac0c6aa0912040531s6d10b148nf6b175b8bb24e619@mail.gmail.com>
Subject: Re: IndexDivisor
Date: Fri, 4 Dec 2009 19:41:55 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

I didn't run with profiler. I created a test app and run that.. I am =
opening multiple database.

IndexReader opened with IndexDivisor: 100 //Open the reader with the =
divisor value
TermCount: 7046764                                   //Available unique =
terms in the db
Warmup done:                                             //warming up
Memory: UsedMemory: 4 :FreeMemory:788 //Memory consumed after GC.

I couldn't see the memory difference for the value btw 100 to 10000. I =
will try to run with profiler and get back to you.

Other than terms what all the other things which consumes memory.  There =
is no deletions, no norms and i am not doing sorting

Regards
Ganesh


----- Original Message -----=20
From: "Michael McCandless" <lucene@mikemccandless.com>
To: <java-user@lucene.apache.org>
Sent: Friday, December 04, 2009 7:01 PM
Subject: Re: IndexDivisor


I'm confused -- what are these attachments?  Output from a memory =
profiler?

Can you post the app you created?

Mike

On Fri, Dec 4, 2009 at 12:24 AM, Ganesh <emailgane@yahoo.co.in> wrote:
> Thanks mike..
>
> Please find the attached file. I ran the testing for 1,100,1000,10000 =
divisor value. There is difference from 1 to 100 but there is no =
difference between 100 to 10000.
>
> I created a new application, in which i opened all reader and searcher =
and warmed up. Sleep for a minute and close all the searcher and reader.
>
> There is no deletions, no norms and i am not doing sorting.
>
> Regards
> Ganesh
>
>
>
> ----- Original Message -----
> From: "Michael McCandless" <lucene@mikemccandless.com>
> To: <java-user@lucene.apache.org>
> Sent: Thursday, December 03, 2009 9:35 PM
> Subject: Re: IndexDivisor
>
>
> Can you run w/ a memory profiler? I don't trust that gc is truly =
running.
>
> Mike
>
> On Thu, Dec 3, 2009 at 10:47 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>> I am doing GC before calculating the memory. Even i set my =
indexdivisor to 10000 but there seems to be no change.
>>
>> Below are my stats
>> IndexDivisor Memory
>> -1 7 MB
>> 1 486 MB
>> 100 180 MB
>> 1000 176 MB.
>> 10000 176MB
>>
>> Regards
>> Ganesh
>>
>> ----- Original Message -----
>> From: "Danil =C5=A2ORIN" <torindan@gmail.com>
>> To: <java-user@lucene.apache.org>
>> Sent: Thursday, December 03, 2009 8:35 PM
>> Subject: Re: IndexDivisor
>>
>>
>> Run System.gc() exactly before measuring memory usage.
>>
>> On sun jvm it will FORCE gc (unless DisableExplicitGC is used).
>>
>>
>> On Thu, Dec 3, 2009 at 16:30, Ganesh <emailgane@yahoo.co.in> wrote:
>>> Thanks mike.
>>>
>>> I am opening the reader and warming it up and then calculating the =
memory consumed.
>>> long usedMemory =3D runtime.totalMemory() - runtime.freeMemory();
>>>
>>> Regards
>>> Ganesh
>>>
>>> ----- Original Message -----
>>> From: "Michael McCandless" <lucene@mikemccandless.com>
>>> To: <java-user@lucene.apache.org>
>>> Sent: Thursday, December 03, 2009 6:22 PM
>>> Subject: Re: IndexDivisor
>>>
>>>
>>> On Thu, Dec 3, 2009 at 7:15 AM, Ganesh <emailgane@yahoo.co.in> =
wrote:
>>>
>>>> Below are my stats
>>>> IndexDivisor Memory
>>>> -1 7 MB
>>>> 1 486 MB
>>>> 100 180 MB
>>>> 1000 176 MB.
>>>
>>> Do you simply create the IndexWriter & IndexReader, but do no
>>> searching/indexing?
>>>
>>> How are you measuring RAM? You should use a RAM profiler (eg =
YourKit)
>>> to get the "real" usage, not counting garbage that's yet to be
>>> collected.
>>>
>>> My guess is the shear process of Lucene scanning your terms index
>>> creates lots of garbage and you're measuring the RAM consumed by =
that
>>> garbage. The garbage should be harmless (it'll eventually get GCd &
>>> reused).
>>>
>>>> 1. Whether term vector will consume RAM. I think it should only =
consume disk space.
>>>
>>> No RAM is consumed.
>>>
>>>> 2. By setting RAM buffer for IW, Does it will allocate memory Or =
based on the usage the memory will be allocated / increased.
>>>
>>> Only a little RAM is allocated up front, I think. It's only as you
>>> start indexing docs that the big RAM is really allocated. After a
>>> flush the RAM is then reused (ie, not freed) for subsequent =
segments.
>>>
>>> Mike
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>> Send instant messages to your online friends =
http://in.messenger.yahoo.com
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>> Send instant messages to your online friends =
http://in.messenger.yahoo.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 04 15:33:03 2009
Return-Path: <java-user-return-43922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15899 invoked from network); 4 Dec 2009 15:33:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Dec 2009 15:33:03 -0000
Received: (qmail 99373 invoked by uid 500); 4 Dec 2009 15:33:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99284 invoked by uid 500); 4 Dec 2009 15:33:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99274 invoked by uid 99); 4 Dec 2009 15:33:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Dec 2009 15:33:00 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of peterlkeegan@gmail.com designates 209.85.160.46 as permitted sender)
Received: from [209.85.160.46] (HELO mail-pw0-f46.google.com) (209.85.160.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Dec 2009 15:32:52 +0000
Received: by pwj17 with SMTP id 17so2431410pwj.5
        for <java-user@lucene.apache.org>; Fri, 04 Dec 2009 07:32:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=Asxwhk/euXfmxrMJLUlyLnSqre3CiUZ21ExIWIX7GEg=;
        b=XLYB5Bz8vQfHbe6DO81SayrtVFgJG1Ankpb/xNHPHQZoCYj0nDVxXa9KwcqQhk77qI
         cZ0PRRMZa086tiNHB7mvrCHTnHGZY6MIXU1xfkBbyravT7WdPLb3mnOMPZ3qWtHNloK8
         ZIclryUuq7ERJoVSYQTtF2BOyi7ZbllnXfzD8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=WJYDcnA8g2b31FizEKeOFhInVs+FOnDaACzdOfrnMKQiZKjk7uxtZICkg+JCQukQcT
         9q+9pfH3KjuA/1cCL1K6mWMsKin6A4QFrMyeqR3pt1Ln+PWEZr793E51HUskzaeamR8U
         8qsTWT3c7Mn1EKxMruWDdtHiiS8kG6JfnqVD4=
MIME-Version: 1.0
Received: by 10.142.2.9 with SMTP id 9mr377281wfb.39.1259940751157; Fri, 04 
	Dec 2009 07:32:31 -0800 (PST)
Date: Fri, 4 Dec 2009 10:32:31 -0500
Message-ID: <e994873a0912040732y2874d17au4eb8c3f9119e40c0@mail.gmail.com>
Subject: searchWithFilter bug?
From: Peter Keegan <peterlkeegan@gmail.com>
To: java-user <java-user@lucene.apache.org>
Content-Type: multipart/alternative; boundary=00504502bd71e92a230479e8d098
X-Virus-Checked: Checked by ClamAV on apache.org

--00504502bd71e92a230479e8d098
Content-Type: text/plain; charset=ISO-8859-1

I'm having a problem with 'searchWithFilter' on Lucene 2.9.1. The Filter
wraps a simple BitSet. When doing a 'MatchAllDocs' query with this filter, I
get only a subset of the expected results, even accounting for deletes. The
index has 10 segments. In IndexSearcher->searchWithFilter, it looks like the
scorer is advancing to the filter's docId, which is the index-wide value,
but the scorer is using the segment-relative value. If I optimize the index,
I get the expected results.
Does this look like a bug?

Peter

--00504502bd71e92a230479e8d098--

From java-user-return-43923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 04 15:39:21 2009
Return-Path: <java-user-return-43923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19683 invoked from network); 4 Dec 2009 15:39:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Dec 2009 15:39:21 -0000
Received: (qmail 13521 invoked by uid 500); 4 Dec 2009 15:39:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13444 invoked by uid 500); 4 Dec 2009 15:39:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13434 invoked by uid 99); 4 Dec 2009 15:39:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Dec 2009 15:39:18 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.211.173] (HELO mail-yw0-f173.google.com) (209.85.211.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Dec 2009 15:39:16 +0000
Received: by ywh3 with SMTP id 3so2380149ywh.22
        for <java-user@lucene.apache.org>; Fri, 04 Dec 2009 07:38:55 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.78.1 with SMTP id a1mr5761808ybb.39.1259941133405; Fri, 04 
	Dec 2009 07:38:53 -0800 (PST)
In-Reply-To: <e994873a0912040732y2874d17au4eb8c3f9119e40c0@mail.gmail.com>
References: <e994873a0912040732y2874d17au4eb8c3f9119e40c0@mail.gmail.com>
Date: Fri, 4 Dec 2009 10:38:53 -0500
Message-ID: <9ac0c6aa0912040738m65b0ae36ud62e60cdf1660a27@mail.gmail.com>
Subject: Re: searchWithFilter bug?
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

That doesn't sound good.

Though, in searchWithFilter, we seem to ask for the Query's scorer,
and the Filter's docIdSetIterator, using the same reader (which may be
toplevel, for the legacy case, or per-segment, for the normal case).
So I'm not [yet] seeing where the issue is...

Can you boil it down to a smallish test case?

Mike

On Fri, Dec 4, 2009 at 10:32 AM, Peter Keegan <peterlkeegan@gmail.com> wrote:
> I'm having a problem with 'searchWithFilter' on Lucene 2.9.1. The Filter
> wraps a simple BitSet. When doing a 'MatchAllDocs' query with this filter, I
> get only a subset of the expected results, even accounting for deletes. The
> index has 10 segments. In IndexSearcher->searchWithFilter, it looks like the
> scorer is advancing to the filter's docId, which is the index-wide value,
> but the scorer is using the segment-relative value. If I optimize the index,
> I get the expected results.
> Does this look like a bug?
>
> Peter
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 04 15:48:17 2009
Return-Path: <java-user-return-43924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22598 invoked from network); 4 Dec 2009 15:48:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Dec 2009 15:48:17 -0000
Received: (qmail 39244 invoked by uid 500); 4 Dec 2009 15:48:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39170 invoked by uid 500); 4 Dec 2009 15:48:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39160 invoked by uid 99); 4 Dec 2009 15:48:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Dec 2009 15:48:14 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of peterlkeegan@gmail.com designates 209.85.160.46 as permitted sender)
Received: from [209.85.160.46] (HELO mail-pw0-f46.google.com) (209.85.160.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Dec 2009 15:48:06 +0000
Received: by pwj17 with SMTP id 17so2441599pwj.5
        for <java-user@lucene.apache.org>; Fri, 04 Dec 2009 07:47:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=GxC9rSogQVrzzdZHj0kJVFLP/GV9N6/LZugOUNVD0jQ=;
        b=OmIbet9OtolV7GW4bIk2ekYu66l/2BTaIKlzkXMuitwVw5ZJCQkdj+9On3O8m1brl9
         FjMI8VtNcJUXuvM6EamS3XetiomrGRiYrAPVfjavcxNy5CczQzshfvnEokLybzK4+DCW
         VaAAHMk9bTq1oAWeCf8zdEREHu3zJpA6KeR6g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=BkMyJcD9CNEc9Go7Mok0FClXapK0BIVLDSIm7dQA1pznP7A5dC+AKO/mCbNwuZKzEd
         BX5pocNdTtfT6bOMd/YNKKSL9J9NTNE+oaejP/Jhwetxo0nFvzRo8j+Qtn/VdDBM4WBl
         4jQa0DBTcdF7lLhNlBXCVugtiBEsi7KL/47MA=
MIME-Version: 1.0
Received: by 10.142.122.10 with SMTP id u10mr358022wfc.165.1259941664780; Fri, 
	04 Dec 2009 07:47:44 -0800 (PST)
In-Reply-To: <9ac0c6aa0912040738m65b0ae36ud62e60cdf1660a27@mail.gmail.com>
References: <e994873a0912040732y2874d17au4eb8c3f9119e40c0@mail.gmail.com>
	 <9ac0c6aa0912040738m65b0ae36ud62e60cdf1660a27@mail.gmail.com>
Date: Fri, 4 Dec 2009 10:47:44 -0500
Message-ID: <e994873a0912040747r77d4d4d3j46dd254cb866cec5@mail.gmail.com>
Subject: Re: searchWithFilter bug?
From: Peter Keegan <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636e0a4e85df36d0479e90731
X-Virus-Checked: Checked by ClamAV on apache.org

--001636e0a4e85df36d0479e90731
Content-Type: text/plain; charset=ISO-8859-1

I think the Filter's docIdSetIterator is using the top level reader for each
segment, because the cardinality of the DocIdSet from which it's created is
the same for all readers (and what I expect to see at the top level.

Peter

On Fri, Dec 4, 2009 at 10:38 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> That doesn't sound good.
>
> Though, in searchWithFilter, we seem to ask for the Query's scorer,
> and the Filter's docIdSetIterator, using the same reader (which may be
> toplevel, for the legacy case, or per-segment, for the normal case).
> So I'm not [yet] seeing where the issue is...
>
> Can you boil it down to a smallish test case?
>
> Mike
>
> On Fri, Dec 4, 2009 at 10:32 AM, Peter Keegan <peterlkeegan@gmail.com>
> wrote:
> > I'm having a problem with 'searchWithFilter' on Lucene 2.9.1. The Filter
> > wraps a simple BitSet. When doing a 'MatchAllDocs' query with this
> filter, I
> > get only a subset of the expected results, even accounting for deletes.
> The
> > index has 10 segments. In IndexSearcher->searchWithFilter, it looks like
> the
> > scorer is advancing to the filter's docId, which is the index-wide value,
> > but the scorer is using the segment-relative value. If I optimize the
> index,
> > I get the expected results.
> > Does this look like a bug?
> >
> > Peter
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636e0a4e85df36d0479e90731--

From java-user-return-43925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 04 16:02:18 2009
Return-Path: <java-user-return-43925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26687 invoked from network); 4 Dec 2009 16:02:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Dec 2009 16:02:18 -0000
Received: (qmail 76822 invoked by uid 500); 4 Dec 2009 16:02:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76761 invoked by uid 500); 4 Dec 2009 16:02:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76750 invoked by uid 99); 4 Dec 2009 16:02:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Dec 2009 16:02:15 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.218.222 as permitted sender)
Received: from [209.85.218.222] (HELO mail-bw0-f222.google.com) (209.85.218.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Dec 2009 16:02:05 +0000
Received: by bwz22 with SMTP id 22so2254095bwz.5
        for <java-user@lucene.apache.org>; Fri, 04 Dec 2009 08:01:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=f/MpyJlS1kypRkaahYV/dSo0RFKfsSZ/TQYsXCTt68o=;
        b=c4M2pBzro3hm5lwOMOo6Ln4QWaRuOasBqIdDC0iVYYshe/KzjL+MWK2ZkoksrkOb3l
         +zluZEyOkx/1vnLGnYUXh50LGMI389OAQuM250wCK4thDqcEBvBjI/nFqRzfeee+nouk
         cE6O/W1O5RpHoAdGIfDTusk/fEkiolb4xeN64=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        b=NUBuMzMTbPTyiKv9MkDw6d2kPr8ZCwZmgZc66ZRWN+dw26jnsDgfz3q+5jxgFncILa
         CH0ZkpmeIcBd8MR629QV7lRBUAfyLUqqzv5MXue1Gtbj7f7rebsLf/qXdA2jgaEUbTcI
         /tWcduRbhz6d1oVJD9OgDfwkz5pVCfCkGu2SI=
MIME-Version: 1.0
Received: by 10.204.25.66 with SMTP id y2mr3449406bkb.59.1259942504421; Fri, 
	04 Dec 2009 08:01:44 -0800 (PST)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <e994873a0912040747r77d4d4d3j46dd254cb866cec5@mail.gmail.com>
References: <e994873a0912040732y2874d17au4eb8c3f9119e40c0@mail.gmail.com>
	 <9ac0c6aa0912040738m65b0ae36ud62e60cdf1660a27@mail.gmail.com>
	 <e994873a0912040747r77d4d4d3j46dd254cb866cec5@mail.gmail.com>
Date: Fri, 4 Dec 2009 17:01:44 +0100
Message-ID: <f18c9dde0912040801t58bd9ca7yacc2a16c829fd3c9@mail.gmail.com>
Subject: Re: searchWithFilter bug?
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

Peter, which filter do you use, do you respect the IndexReaders
maxDoc() and the docBase?

simon

On Fri, Dec 4, 2009 at 4:47 PM, Peter Keegan <peterlkeegan@gmail.com> wrote:
> I think the Filter's docIdSetIterator is using the top level reader for each
> segment, because the cardinality of the DocIdSet from which it's created is
> the same for all readers (and what I expect to see at the top level.
>
> Peter
>
> On Fri, Dec 4, 2009 at 10:38 AM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>> That doesn't sound good.
>>
>> Though, in searchWithFilter, we seem to ask for the Query's scorer,
>> and the Filter's docIdSetIterator, using the same reader (which may be
>> toplevel, for the legacy case, or per-segment, for the normal case).
>> So I'm not [yet] seeing where the issue is...
>>
>> Can you boil it down to a smallish test case?
>>
>> Mike
>>
>> On Fri, Dec 4, 2009 at 10:32 AM, Peter Keegan <peterlkeegan@gmail.com>
>> wrote:
>> > I'm having a problem with 'searchWithFilter' on Lucene 2.9.1. The Filter
>> > wraps a simple BitSet. When doing a 'MatchAllDocs' query with this
>> filter, I
>> > get only a subset of the expected results, even accounting for deletes.
>> The
>> > index has 10 segments. In IndexSearcher->searchWithFilter, it looks like
>> the
>> > scorer is advancing to the filter's docId, which is the index-wide value,
>> > but the scorer is using the segment-relative value. If I optimize the
>> index,
>> > I get the expected results.
>> > Does this look like a bug?
>> >
>> > Peter
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 04 16:27:59 2009
Return-Path: <java-user-return-43926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34617 invoked from network); 4 Dec 2009 16:27:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Dec 2009 16:27:59 -0000
Received: (qmail 40384 invoked by uid 500); 4 Dec 2009 16:27:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40281 invoked by uid 500); 4 Dec 2009 16:27:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40271 invoked by uid 99); 4 Dec 2009 16:27:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Dec 2009 16:27:56 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of peterlkeegan@gmail.com designates 209.85.160.46 as permitted sender)
Received: from [209.85.160.46] (HELO mail-pw0-f46.google.com) (209.85.160.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Dec 2009 16:27:47 +0000
Received: by pwj17 with SMTP id 17so2469011pwj.5
        for <java-user@lucene.apache.org>; Fri, 04 Dec 2009 08:27:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=3f8D44ETXQW9fBWZSFaJV2PiUPnwtTG42oWy8JbpGPI=;
        b=A1PEphxBcieMhM0IBtFFOwxXhDYnmEXiImeF+rpKjd859xwrlNKVNCLYb5bAwMIGus
         3uHS/Jxf/biidyer5W2lKh6M2r8L6KS1FsHzp3e/PeAmDAmwdazOF9fhJ9PN6aiLkjAM
         PQ3q4u/o0YHIkijePqXkknLMblZFQN0+j0zzE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=SRs/hDJFmTQiJIO72Jwc+8BaUlMbzS3dn59py90tsTw/JRHm3x+yBGpMXGSbuAEsMg
         FQ5xF1ObotiqcB9xcU3hJlpo6lAIX243TpbS6FRwPjFYjtIPM7P6/9WNHhDBTgQ+J0GY
         GpRX+QZ+513vtJwDvD5GnhyikFBcRIjQWnsNI=
MIME-Version: 1.0
Received: by 10.143.25.39 with SMTP id c39mr406590wfj.249.1259944046177; Fri, 
	04 Dec 2009 08:27:26 -0800 (PST)
In-Reply-To: <f18c9dde0912040801t58bd9ca7yacc2a16c829fd3c9@mail.gmail.com>
References: <e994873a0912040732y2874d17au4eb8c3f9119e40c0@mail.gmail.com>
	 <9ac0c6aa0912040738m65b0ae36ud62e60cdf1660a27@mail.gmail.com>
	 <e994873a0912040747r77d4d4d3j46dd254cb866cec5@mail.gmail.com>
	 <f18c9dde0912040801t58bd9ca7yacc2a16c829fd3c9@mail.gmail.com>
Date: Fri, 4 Dec 2009 11:27:26 -0500
Message-ID: <e994873a0912040827t165570caib4c036326e811623@mail.gmail.com>
Subject: Re: searchWithFilter bug?
From: Peter Keegan <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org, simon.willnauer@gmail.com
Content-Type: multipart/alternative; boundary=001636e0b61e4f2ea80479e995e7
X-Virus-Checked: Checked by ClamAV on apache.org

--001636e0b61e4f2ea80479e995e7
Content-Type: text/plain; charset=ISO-8859-1

The filter is just a java.util.BitSet. I use the top level reader to create
the filter, and call IndexSearcher.search (Query, Filter, HitCollector). So,
there is no 'docBase' at this level of the api.

Peter

On Fri, Dec 4, 2009 at 11:01 AM, Simon Willnauer <
simon.willnauer@googlemail.com> wrote:

> Peter, which filter do you use, do you respect the IndexReaders
> maxDoc() and the docBase?
>
> simon
>
> On Fri, Dec 4, 2009 at 4:47 PM, Peter Keegan <peterlkeegan@gmail.com>
> wrote:
> > I think the Filter's docIdSetIterator is using the top level reader for
> each
> > segment, because the cardinality of the DocIdSet from which it's created
> is
> > the same for all readers (and what I expect to see at the top level.
> >
> > Peter
> >
> > On Fri, Dec 4, 2009 at 10:38 AM, Michael McCandless <
> > lucene@mikemccandless.com> wrote:
> >
> >> That doesn't sound good.
> >>
> >> Though, in searchWithFilter, we seem to ask for the Query's scorer,
> >> and the Filter's docIdSetIterator, using the same reader (which may be
> >> toplevel, for the legacy case, or per-segment, for the normal case).
> >> So I'm not [yet] seeing where the issue is...
> >>
> >> Can you boil it down to a smallish test case?
> >>
> >> Mike
> >>
> >> On Fri, Dec 4, 2009 at 10:32 AM, Peter Keegan <peterlkeegan@gmail.com>
> >> wrote:
> >> > I'm having a problem with 'searchWithFilter' on Lucene 2.9.1. The
> Filter
> >> > wraps a simple BitSet. When doing a 'MatchAllDocs' query with this
> >> filter, I
> >> > get only a subset of the expected results, even accounting for
> deletes.
> >> The
> >> > index has 10 segments. In IndexSearcher->searchWithFilter, it looks
> like
> >> the
> >> > scorer is advancing to the filter's docId, which is the index-wide
> value,
> >> > but the scorer is using the segment-relative value. If I optimize the
> >> index,
> >> > I get the expected results.
> >> > Does this look like a bug?
> >> >
> >> > Peter
> >> >
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636e0b61e4f2ea80479e995e7--

From java-user-return-43927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 04 17:54:18 2009
Return-Path: <java-user-return-43927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70871 invoked from network); 4 Dec 2009 17:54:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Dec 2009 17:54:18 -0000
Received: (qmail 10127 invoked by uid 500); 4 Dec 2009 17:54:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10038 invoked by uid 500); 4 Dec 2009 17:54:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10028 invoked by uid 99); 4 Dec 2009 17:54:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Dec 2009 17:54:14 +0000
X-ASF-Spam-Status: No, hits=-2.5 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.220.224 as permitted sender)
Received: from [209.85.220.224] (HELO mail-fx0-f224.google.com) (209.85.220.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Dec 2009 17:54:11 +0000
Received: by fxm24 with SMTP id 24so2837683fxm.11
        for <java-user@lucene.apache.org>; Fri, 04 Dec 2009 09:53:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=oDG7LrYetr70Ha1Dudc45yH4mzWx63qxeCfk4bpzJc4=;
        b=px9dFGIPGr7mxMpecv8vYo7j5hba+1SSL21K6b5JhpjnsNHr5kYx7gXIbYpkFAFuf2
         Ky8rbsrgP06L40FrD1D+A5c93htr5yBh+K9JzFAIw7nSrvGyUYwnwoxLaU/Pw+EiqOYF
         T++dcNXUxRpJdOsu0zEqYp1EEJaAcqNVRzq74=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        b=fdv3Vy/VWmgH0YLHbFjCnKC2h1NOZtVhl4m2h95iSZ36S+LTbzRdLnFqIjb6llQIDP
         SwRMmw/FhhrsDwo29rFQU+hKUmXE/YFTiPdryYcdbj+TLVaNBisWf5hXjGpUPBlufzlL
         CNUrYozHx0Gteh1JPSpNa+ciYJMRPky+Fmt3s=
MIME-Version: 1.0
Received: by 10.239.130.160 with SMTP id 32mr366582hbj.58.1259949229776; Fri, 
	04 Dec 2009 09:53:49 -0800 (PST)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <e994873a0912040827t165570caib4c036326e811623@mail.gmail.com>
References: <e994873a0912040732y2874d17au4eb8c3f9119e40c0@mail.gmail.com>
	 <9ac0c6aa0912040738m65b0ae36ud62e60cdf1660a27@mail.gmail.com>
	 <e994873a0912040747r77d4d4d3j46dd254cb866cec5@mail.gmail.com>
	 <f18c9dde0912040801t58bd9ca7yacc2a16c829fd3c9@mail.gmail.com>
	 <e994873a0912040827t165570caib4c036326e811623@mail.gmail.com>
Date: Fri, 4 Dec 2009 18:53:49 +0100
Message-ID: <f18c9dde0912040953vd510a63o2126d05f8705eb54@mail.gmail.com>
Subject: Re: searchWithFilter bug?
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8

---------- Forwarded message ----------
From: Simon Willnauer <simon.willnauer@googlemail.com>
Date: Fri, Dec 4, 2009 at 6:53 PM
Subject: Re: searchWithFilter bug?
To: Peter Keegan <peterlkeegan@gmail.com>


Peter, since search is per segment you need to use the segment reader
passed in during search to create you DocIdSet if you use absolute
docID your filter will not work.
Many filters don't need to be segment aware as they use the given
reader to somehow generate the docIdSet like
MultiTermQueryWrapperFiler. DistanceFilter (contrib/spatial) and its
subclasses keep state internally to work with per-segment search.

maybe this helps to understand:

 public static final class SimpleDocIdSetFilter extends Filter {
   private int docBase;
   private int[] docs;
   private int index;
   public SimpleDocIdSetFilter(int[] docs) {
     this.docs = docs;
   }
   @Override
   public DocIdSet getDocIdSet(IndexReader reader) {
     final OpenBitSet set = new OpenBitSet();
     final int limit = docBase+reader.maxDoc();
     for (;index < docs.length; index++) {
       final int docId = docs[index];
       if(docId > limit)
         break;
       set.set(docId-docBase);
     }
     docBase = limit;
     return set.isEmpty()?null:set;
   }
 }

@Mike: maybe we should add a testcase / method in TestFilteredSearch
that searches on more than one segment.

simon


On Fri, Dec 4, 2009 at 5:27 PM, Peter Keegan <peterlkeegan@gmail.com> wrote:
> The filter is just a java.util.BitSet. I use the top level reader to create
> the filter, and call IndexSearcher.search (Query, Filter, HitCollector). So,
> there is no 'docBase' at this level of the api.
>
> Peter
>
> On Fri, Dec 4, 2009 at 11:01 AM, Simon Willnauer
> <simon.willnauer@googlemail.com> wrote:
>>
>> Peter, which filter do you use, do you respect the IndexReaders
>> maxDoc() and the docBase?
>>
>> simon
>>
>> On Fri, Dec 4, 2009 at 4:47 PM, Peter Keegan <peterlkeegan@gmail.com>
>> wrote:
>> > I think the Filter's docIdSetIterator is using the top level reader for
>> > each
>> > segment, because the cardinality of the DocIdSet from which it's created
>> > is
>> > the same for all readers (and what I expect to see at the top level.
>> >
>> > Peter
>> >
>> > On Fri, Dec 4, 2009 at 10:38 AM, Michael McCandless <
>> > lucene@mikemccandless.com> wrote:
>> >
>> >> That doesn't sound good.
>> >>
>> >> Though, in searchWithFilter, we seem to ask for the Query's scorer,
>> >> and the Filter's docIdSetIterator, using the same reader (which may be
>> >> toplevel, for the legacy case, or per-segment, for the normal case).
>> >> So I'm not [yet] seeing where the issue is...
>> >>
>> >> Can you boil it down to a smallish test case?
>> >>
>> >> Mike
>> >>
>> >> On Fri, Dec 4, 2009 at 10:32 AM, Peter Keegan <peterlkeegan@gmail.com>
>> >> wrote:
>> >> > I'm having a problem with 'searchWithFilter' on Lucene 2.9.1. The
>> >> > Filter
>> >> > wraps a simple BitSet. When doing a 'MatchAllDocs' query with this
>> >> filter, I
>> >> > get only a subset of the expected results, even accounting for
>> >> > deletes.
>> >> The
>> >> > index has 10 segments. In IndexSearcher->searchWithFilter, it looks
>> >> > like
>> >> the
>> >> > scorer is advancing to the filter's docId, which is the index-wide
>> >> > value,
>> >> > but the scorer is using the segment-relative value. If I optimize the
>> >> index,
>> >> > I get the expected results.
>> >> > Does this look like a bug?
>> >> >
>> >> > Peter
>> >> >
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 04 18:10:02 2009
Return-Path: <java-user-return-43928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80724 invoked from network); 4 Dec 2009 18:10:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Dec 2009 18:10:01 -0000
Received: (qmail 52043 invoked by uid 500); 4 Dec 2009 18:09:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51989 invoked by uid 500); 4 Dec 2009 18:09:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51979 invoked by uid 99); 4 Dec 2009 18:09:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Dec 2009 18:09:59 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.211.173] (HELO mail-yw0-f173.google.com) (209.85.211.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Dec 2009 18:09:57 +0000
Received: by ywh3 with SMTP id 3so2511751ywh.22
        for <java-user@lucene.apache.org>; Fri, 04 Dec 2009 10:09:36 -0800 (PST)
MIME-Version: 1.0
Received: by 10.151.29.8 with SMTP id g8mr5929277ybj.250.1259950176184; Fri, 
	04 Dec 2009 10:09:36 -0800 (PST)
In-Reply-To: <f18c9dde0912040953vd510a63o2126d05f8705eb54@mail.gmail.com>
References: <e994873a0912040732y2874d17au4eb8c3f9119e40c0@mail.gmail.com>
	 <9ac0c6aa0912040738m65b0ae36ud62e60cdf1660a27@mail.gmail.com>
	 <e994873a0912040747r77d4d4d3j46dd254cb866cec5@mail.gmail.com>
	 <f18c9dde0912040801t58bd9ca7yacc2a16c829fd3c9@mail.gmail.com>
	 <e994873a0912040827t165570caib4c036326e811623@mail.gmail.com>
	 <f18c9dde0912040953vd510a63o2126d05f8705eb54@mail.gmail.com>
Date: Fri, 4 Dec 2009 13:09:36 -0500
Message-ID: <9ac0c6aa0912041009vd529160n3cab7fbfb52fcf73@mail.gmail.com>
Subject: Re: searchWithFilter bug?
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org, simon.willnauer@gmail.com
Content-Type: text/plain; charset=ISO-8859-1

On Fri, Dec 4, 2009 at 12:53 PM, Simon Willnauer
<simon.willnauer@googlemail.com> wrote:

> @Mike: maybe we should add a testcase / method in TestFilteredSearch
> that searches on more than one segment.

I agree, we should -- wanna cough up a patch?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 04 18:30:05 2009
Return-Path: <java-user-return-43929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91631 invoked from network); 4 Dec 2009 18:30:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Dec 2009 18:30:05 -0000
Received: (qmail 93590 invoked by uid 500); 4 Dec 2009 18:30:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93501 invoked by uid 500); 4 Dec 2009 18:30:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93491 invoked by uid 99); 4 Dec 2009 18:30:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Dec 2009 18:30:02 +0000
X-ASF-Spam-Status: No, hits=-2.5 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.220.224 as permitted sender)
Received: from [209.85.220.224] (HELO mail-fx0-f224.google.com) (209.85.220.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Dec 2009 18:29:59 +0000
Received: by fxm24 with SMTP id 24so2868317fxm.11
        for <java-user@lucene.apache.org>; Fri, 04 Dec 2009 10:29:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:cc:content-type;
        bh=egZs22RgIXc2+nuz3eQCpIGhf0u5q5Dn3hbcynPKAL4=;
        b=TwOda6H1nDTUEEd0SyWNtnNsaqqFNEGx7bMeREM4HDg9SLVktQYpt47QFTLHZqZPJz
         hY6QB2vWLkAtSNbd6L2ltWyAFWBDq4bEALjIfDo6TuLZY/XIJTFAzbM1FD9m18GMRnsz
         FNrX9qYRox0+7deuh1sA4qkmgYN3fFpa9Q1WA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:cc:content-type;
        b=SsAWFVHgZGDpcs8c6MnUlz96EMFsDi9gZFq4nvAwN+/MDjmpMZ3SyBKWH9yS4up0Ul
         OQHY0EUhOSbfWkRGo9S1/ngn/yKNQnBbkhAHekI4k3yYXEG1ths5woeBfwQDKYhhR4nH
         CyFSw4RPU9jIGCyIU7P9augnRm5B+GCAGd6c8=
MIME-Version: 1.0
Received: by 10.239.184.150 with SMTP id y22mr394135hbg.21.1259951378122; Fri, 
	04 Dec 2009 10:29:38 -0800 (PST)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <9ac0c6aa0912041009vd529160n3cab7fbfb52fcf73@mail.gmail.com>
References: <e994873a0912040732y2874d17au4eb8c3f9119e40c0@mail.gmail.com>
	 <9ac0c6aa0912040738m65b0ae36ud62e60cdf1660a27@mail.gmail.com>
	 <e994873a0912040747r77d4d4d3j46dd254cb866cec5@mail.gmail.com>
	 <f18c9dde0912040801t58bd9ca7yacc2a16c829fd3c9@mail.gmail.com>
	 <e994873a0912040827t165570caib4c036326e811623@mail.gmail.com>
	 <f18c9dde0912040953vd510a63o2126d05f8705eb54@mail.gmail.com>
	 <9ac0c6aa0912041009vd529160n3cab7fbfb52fcf73@mail.gmail.com>
Date: Fri, 4 Dec 2009 19:29:38 +0100
Message-ID: <f18c9dde0912041029x51d18358uae05b7c2399984dc@mail.gmail.com>
Subject: Re: searchWithFilter bug?
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: Michael McCandless <lucene@mikemccandless.com>
Cc: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8

On Fri, Dec 4, 2009 at 7:09 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
> On Fri, Dec 4, 2009 at 12:53 PM, Simon Willnauer
> <simon.willnauer@googlemail.com> wrote:
>
>> @Mike: maybe we should add a testcase / method in TestFilteredSearch
>> that searches on more than one segment.
>
Working on it... will open an issue in a bit.
> I agree, we should -- wanna cough up a patch?
>
> Mike
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 05 04:37:56 2009
Return-Path: <java-user-return-43930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83642 invoked from network); 5 Dec 2009 04:37:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Dec 2009 04:37:56 -0000
Received: (qmail 97882 invoked by uid 500); 5 Dec 2009 04:37:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97713 invoked by uid 500); 5 Dec 2009 04:37:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97700 invoked by uid 99); 5 Dec 2009 04:37:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Dec 2009 04:37:51 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [203.104.17.155] (HELO web94806.mail.in2.yahoo.com) (203.104.17.155)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 05 Dec 2009 04:37:41 +0000
Received: (qmail 73540 invoked by uid 60001); 5 Dec 2009 04:37:19 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1259987839; bh=D+ozu/Bx1VYA6bV88r0Rqov4w932MYFY57u+HPRqKBc=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=5tm+nCYYLfuBITzDtf9xAfSACz69l4IIStggVOfPrSwvu9YVKvfASNz+lftX74ORAcZ/XAdLf4jdwGV3WoFp81GpBm0CF1Ne1o0T7kUgIFdCfgJ1Utu9/X0/UJ6lifTTKK1u0TZbR72IsRkNi5hYG7EvmjlUP2MAGDhq5KZ/i5U=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=jaTmq8yYWFEM7FmZK3lj/Dt/hd154iCWr3fYVn5jAi/2apR5d9HtyTGc4aLi15WLoRf6VjGs8KFQzYJ+K4PahWgMSn+1CT+FZK/XtB44gT4ISLFFvaT2fSI8vVx8I2jT9GFVIaSM24BbaZC2dRRWm7Rx6MOLgkAOR0sMM6Ih/aU=;
Message-ID: <474390.73534.qm@web94806.mail.in2.yahoo.com>
X-YMail-OSG: KKu9EWcVM1mqkSY3Dz85j5q2Y4VxLE7daAt85_j.z47_JrZix5qGcrGZVGK0lApNvL3aVze54Uz_Td9Bd2vNX_b0g6owFooX.5NrORLpr0bYUVLiywK8daSfURG608lZRi8ftrDG6zpBRe1Gs06n9FltNzxLma73SPbSwfa2ULud4IEuOEXXGSOBdeYvNt65kH1e149xvy8IBON3Zt.8ik9QiE88kN755M5C6ggMPaxcDkwnrA--
Received: from [209.73.190.210] by web94806.mail.in2.yahoo.com via HTTP; Sat, 05 Dec 2009 10:07:19 IST
X-Mailer: YahooMailClassic/9.0.19 YahooMailWebService/0.8.100.260964
Date: Sat, 5 Dec 2009 10:07:19 +0530 (IST)
From: DHIVYA M <dhivyakrishnan87@yahoo.com>
Subject: Re: How to include some more fields to be indexed in the file  document class?
To: java-user@lucene.apache.org
In-Reply-To: <867513fe0912040157w5b7c49bbwe4081c37e2550201@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-791504163-1259987839=:73534"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-791504163-1259987839=:73534
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Thanx for the suggestion sir.
But i wrote the Document of FileDocument class here in my indexing program =
so that it vl look this method rather than refering the one from the jar fi=
le.
=A0
Updating the jar by creating a class again seemed to be time consuming for =
me so did this way.
=A0
Thanks,
Dhivya

--- On Fri, 4/12/09, Anshum <anshumg@gmail.com> wrote:


From: Anshum <anshumg@gmail.com>
Subject: Re: How to include some more fields to be indexed in the file docu=
ment class?
To: java-user@lucene.apache.org
Date: Friday, 4 December, 2009, 9:57 AM


Hi Dhivya,
So are you using the same demo code for your app? Incase you are you have t=
o
modify that code and continue.
All said and done, you'd have to add fields in your java file and
recompile(in case you are already using some code for that purpose). In cas=
e
you would be starting to write an indexer from scratch, you'd have to write
a java file on the same=A0 lines as the demo (modified) and include it.
Does that help?

--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Fri, Dec 4, 2009 at 2:34 PM, DHIVYA M <dhivyakrishnan87@yahoo.com> wrote=
:

> Hi all,
>
> Am using lucene 2.3.2.
> I would like to include some more fields of the to be indexed other than
> the available one.
>
> In the FileDocument class of the demo version of lucene 2.3.2 there are
> only three fields added to the documents to be indexed.
>
> Ex: doc.add(new Field("path"..........
>=A0 =A0 =A0=A0=A0doc.add(new Field("modified".........
>=A0 =A0 =A0=A0=A0doc.add(new Field("contents"..........
>
>
> If i want to add some more fields,
> like
>
>=A0 =A0 =A0=A0=A0doc.add(new Field("xyz"........
>
> what should i do?
> Should i modify the class file and include it again in my web lucene? Or
> any other simpler way is possible?
> Kindly let me know.
>
> Thanks in advance,
> Dhivya
>
>
>=A0 =A0 =A0 The INTERNET now has a personality. YOURS! See your Yahoo! Hom=
epage.
> http://in.yahoo.com/
=0A=0A=0A      The INTERNET now has a personality. YOURS! See your Yahoo! H=
omepage. http://in.yahoo.com/
--0-791504163-1259987839=:73534--

From java-user-return-43931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 06 09:44:50 2009
Return-Path: <java-user-return-43931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27301 invoked from network); 6 Dec 2009 09:44:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Dec 2009 09:44:50 -0000
Received: (qmail 25386 invoked by uid 500); 6 Dec 2009 09:44:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25298 invoked by uid 500); 6 Dec 2009 09:44:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25288 invoked by uid 99); 6 Dec 2009 09:44:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Dec 2009 09:44:46 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.211.173] (HELO mail-yw0-f173.google.com) (209.85.211.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Dec 2009 09:44:44 +0000
Received: by ywh3 with SMTP id 3so3421145ywh.22
        for <java-user@lucene.apache.org>; Sun, 06 Dec 2009 01:44:23 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.21.26 with SMTP id 26mr8972896ybu.192.1260092662919; Sun, 
	06 Dec 2009 01:44:22 -0800 (PST)
In-Reply-To: <033001ca74eb$be5d42c0$710bc30a@sv.us.sonicwall.com>
References: <006801ca6f1e$8dc488d0$710bc30a@sv.us.sonicwall.com>
	 <01bf01ca7412$4d8dea60$710bc30a@sv.us.sonicwall.com>
	 <9ac0c6aa0912030452m660fec4byf4c9e368f24b57cf@mail.gmail.com>
	 <020601ca7425$32f57700$710bc30a@sv.us.sonicwall.com>
	 <2ffb6d060912030705r3708b688nf44f810c3ea931f7@mail.gmail.com>
	 <023701ca742f$ed9e2610$710bc30a@sv.us.sonicwall.com>
	 <9ac0c6aa0912030805m437713cclcee1d8b6f77848e9@mail.gmail.com>
	 <026901ca74a2$17552360$710bc30a@sv.us.sonicwall.com>
	 <9ac0c6aa0912040531s6d10b148nf6b175b8bb24e619@mail.gmail.com>
	 <033001ca74eb$be5d42c0$710bc30a@sv.us.sonicwall.com>
Date: Sun, 6 Dec 2009 04:44:22 -0500
Message-ID: <9ac0c6aa0912060144m5ce66e7ew5c9d2c5a76375a2f@mail.gmail.com>
Subject: Re: IndexDivisor
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

You really have to use a profiler, to trust the RAM measurements.

Certain queries, eg function queries, can load the field cache.  What
kind of queries are you running?

Mike

On Fri, Dec 4, 2009 at 9:11 AM, Ganesh <emailgane@yahoo.co.in> wrote:
> I didn't run with profiler. I created a test app and run that.. I am open=
ing multiple database.
>
> IndexReader opened with IndexDivisor: 100 //Open the reader with the divi=
sor value
> TermCount: 7046764 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 //Availa=
ble unique terms in the db
> Warmup done: =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 //warming up
> Memory: UsedMemory: 4 :FreeMemory:788 //Memory consumed after GC.
>
> I couldn't see the memory difference for the value btw 100 to 10000. I wi=
ll try to run with profiler and get back to you.
>
> Other than terms what all the other things which consumes memory. =C2=A0T=
here is no deletions, no norms and i am not doing sorting
>
> Regards
> Ganesh
>
>
> ----- Original Message -----
> From: "Michael McCandless" <lucene@mikemccandless.com>
> To: <java-user@lucene.apache.org>
> Sent: Friday, December 04, 2009 7:01 PM
> Subject: Re: IndexDivisor
>
>
> I'm confused -- what are these attachments? =C2=A0Output from a memory pr=
ofiler?
>
> Can you post the app you created?
>
> Mike
>
> On Fri, Dec 4, 2009 at 12:24 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>> Thanks mike..
>>
>> Please find the attached file. I ran the testing for 1,100,1000,10000 di=
visor value. There is difference from 1 to 100 but there is no difference b=
etween 100 to 10000.
>>
>> I created a new application, in which i opened all reader and searcher a=
nd warmed up. Sleep for a minute and close all the searcher and reader.
>>
>> There is no deletions, no norms and i am not doing sorting.
>>
>> Regards
>> Ganesh
>>
>>
>>
>> ----- Original Message -----
>> From: "Michael McCandless" <lucene@mikemccandless.com>
>> To: <java-user@lucene.apache.org>
>> Sent: Thursday, December 03, 2009 9:35 PM
>> Subject: Re: IndexDivisor
>>
>>
>> Can you run w/ a memory profiler? I don't trust that gc is truly running=
.
>>
>> Mike
>>
>> On Thu, Dec 3, 2009 at 10:47 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>>> I am doing GC before calculating the memory. Even i set my indexdivisor=
 to 10000 but there seems to be no change.
>>>
>>> Below are my stats
>>> IndexDivisor Memory
>>> -1 7 MB
>>> 1 486 MB
>>> 100 180 MB
>>> 1000 176 MB.
>>> 10000 176MB
>>>
>>> Regards
>>> Ganesh
>>>
>>> ----- Original Message -----
>>> From: "Danil =C5=A2ORIN" <torindan@gmail.com>
>>> To: <java-user@lucene.apache.org>
>>> Sent: Thursday, December 03, 2009 8:35 PM
>>> Subject: Re: IndexDivisor
>>>
>>>
>>> Run System.gc() exactly before measuring memory usage.
>>>
>>> On sun jvm it will FORCE gc (unless DisableExplicitGC is used).
>>>
>>>
>>> On Thu, Dec 3, 2009 at 16:30, Ganesh <emailgane@yahoo.co.in> wrote:
>>>> Thanks mike.
>>>>
>>>> I am opening the reader and warming it up and then calculating the mem=
ory consumed.
>>>> long usedMemory =3D runtime.totalMemory() - runtime.freeMemory();
>>>>
>>>> Regards
>>>> Ganesh
>>>>
>>>> ----- Original Message -----
>>>> From: "Michael McCandless" <lucene@mikemccandless.com>
>>>> To: <java-user@lucene.apache.org>
>>>> Sent: Thursday, December 03, 2009 6:22 PM
>>>> Subject: Re: IndexDivisor
>>>>
>>>>
>>>> On Thu, Dec 3, 2009 at 7:15 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>>>>
>>>>> Below are my stats
>>>>> IndexDivisor Memory
>>>>> -1 7 MB
>>>>> 1 486 MB
>>>>> 100 180 MB
>>>>> 1000 176 MB.
>>>>
>>>> Do you simply create the IndexWriter & IndexReader, but do no
>>>> searching/indexing?
>>>>
>>>> How are you measuring RAM? You should use a RAM profiler (eg YourKit)
>>>> to get the "real" usage, not counting garbage that's yet to be
>>>> collected.
>>>>
>>>> My guess is the shear process of Lucene scanning your terms index
>>>> creates lots of garbage and you're measuring the RAM consumed by that
>>>> garbage. The garbage should be harmless (it'll eventually get GCd &
>>>> reused).
>>>>
>>>>> 1. Whether term vector will consume RAM. I think it should only consu=
me disk space.
>>>>
>>>> No RAM is consumed.
>>>>
>>>>> 2. By setting RAM buffer for IW, Does it will allocate memory Or base=
d on the usage the memory will be allocated / increased.
>>>>
>>>> Only a little RAM is allocated up front, I think. It's only as you
>>>> start indexing docs that the big RAM is really allocated. After a
>>>> flush the RAM is then reused (ie, not freed) for subsequent segments.
>>>>
>>>> Mike
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>> Send instant messages to your online friends http://in.messenger.yahoo=
.com
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>> Send instant messages to your online friends http://in.messenger.yahoo.=
com
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> Send instant messages to your online friends http://in.messenger.yahoo.co=
m
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 06 09:49:32 2009
Return-Path: <java-user-return-43932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29292 invoked from network); 6 Dec 2009 09:49:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Dec 2009 09:49:32 -0000
Received: (qmail 29050 invoked by uid 500); 6 Dec 2009 09:49:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28965 invoked by uid 500); 6 Dec 2009 09:49:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28954 invoked by uid 99); 6 Dec 2009 09:49:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Dec 2009 09:49:30 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.217.225] (HELO mail-gx0-f225.google.com) (209.85.217.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Dec 2009 09:49:21 +0000
Received: by gxk25 with SMTP id 25so1155667gxk.5
        for <java-user@lucene.apache.org>; Sun, 06 Dec 2009 01:48:59 -0800 (PST)
MIME-Version: 1.0
Received: by 10.151.18.19 with SMTP id v19mr8957843ybi.66.1260092939802; Sun, 
	06 Dec 2009 01:48:59 -0800 (PST)
In-Reply-To: <4B16854C.5030603@fastmail.fm>
References: <4B166CDB.6010204@fastmail.fm>
	 <1F6EE7A063094F1DB572BA6C3D040CBA@VEGA> <4B16854C.5030603@fastmail.fm>
Date: Sun, 6 Dec 2009 04:48:59 -0500
Message-ID: <9ac0c6aa0912060148q4ca578c4yc3d11cf85a4d3ce8@mail.gmail.com>
Subject: Re: java.lang.NegativeArraySizeException on searching using 
	Integer.MAX_VALUE for number of hits
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org, paul_t100@fastmail.fm
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Dec 2, 2009 at 10:18 AM, Paul Taylor <paul_t100@fastmail.fm> wrote:
> Uwe Schindler wrote:
>>
>> If you want to have all results, you do something wrong. :-)
>>
>> Full text engines like lucene are made for returning only top-ranking
>> results. So if you use TopDocs results you must know before how many
>> TopDocs
>> you want to have. Internally Lucene works with PriorityQueues that filte=
r
>> the top ranking results.
>>
>> If you want to have all results, you should not sort them by ranking,
>> which
>> is not needed then). In this case, implement an own Collector and collec=
t
>> the results for yourself into e.g. ArrayLists and so on (but they are
>> unsorted then).
>>
>> Another possibility (if you really need the docs in relevance order) is =
to
>> run the search 2 times:
>> First only collect the top n=3D100 results. The TopDocs instance also
>> returns
>> the max results. Using that number you can re-run the query to get all
>> ranked results - but this is generally a bad approach, because PQs get
>> slower for too many results, where order is not relevant.
>
> Yes thats all fine and is my long term approach, but =A0isn't there a bug
> here, (in the case that is =A0failing there is only one actual result ), =
you
> haven't really addressed why I am geting this exception

This is certainly confusing (that you hit a NegativeArraySizeException
on passing MAX_INT); it's because the PQ takes 1+ the size you pass in
(which wraps int around to -1).  I suppose we could bounds check that
in PQ, though if we do that very likely the next thing you hit is
OOME, which would be the better exception here.  I'll open an issue.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 06 09:53:45 2009
Return-Path: <java-user-return-43933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30752 invoked from network); 6 Dec 2009 09:53:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Dec 2009 09:53:44 -0000
Received: (qmail 33087 invoked by uid 500); 6 Dec 2009 09:53:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33040 invoked by uid 500); 6 Dec 2009 09:53:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33030 invoked by uid 99); 6 Dec 2009 09:53:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Dec 2009 09:53:42 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.210.173] (HELO mail-yx0-f173.google.com) (209.85.210.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Dec 2009 09:53:40 +0000
Received: by yxe3 with SMTP id 3so2137246yxe.20
        for <java-user@lucene.apache.org>; Sun, 06 Dec 2009 01:53:19 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.141.15 with SMTP id o15mr8960147ybd.86.1260093199205; Sun, 
	06 Dec 2009 01:53:19 -0800 (PST)
In-Reply-To: <4B166CDB.6010204@fastmail.fm>
References: <4B166CDB.6010204@fastmail.fm>
Date: Sun, 6 Dec 2009 04:53:19 -0500
Message-ID: <9ac0c6aa0912060153r19ae900fx9922bc037529cd48@mail.gmail.com>
Subject: Re: java.lang.NegativeArraySizeException on searching using 
	Integer.MAX_VALUE for number of hits
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org, paul_t100@fastmail.fm
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

OK, I opened https://issues.apache.org/jira/browse/LUCENE-2119

Mike

On Wed, Dec 2, 2009 at 8:34 AM, Paul Taylor <paul_t100@fastmail.fm> wrote:
> Hi, just upgraded my code to Lucene 3.0 and on one simple search I get th=
e
> following stacktrace when I pass Integer.MAX_VALUE to the
> Searcher.search(Query query,int n) method, if I change the value to 1000 =
it
> works okay.
>
>
> java.lang.NegativeArraySizeException
> =A0 at org.apache.lucene.util.PriorityQueue.initialize(PriorityQueue.java=
:90)
> =A0 at org.apache.lucene.search.HitQueue.<init>(HitQueue.java:67)
> =A0 at
> org.apache.lucene.search.TopScoreDocCollector.<init>(TopScoreDocCollector=
.java:117)
> =A0 at
> org.apache.lucene.search.TopScoreDocCollector.<init>(TopScoreDocCollector=
.java:37)
> =A0 at
> org.apache.lucene.search.TopScoreDocCollector$InOrderTopScoreDocCollector=
.<init>(TopScoreDocCollector.java:42)
> =A0 at
> org.apache.lucene.search.TopScoreDocCollector$InOrderTopScoreDocCollector=
.<init>(TopScoreDocCollector.java:40)
> =A0 at
> org.apache.lucene.search.TopScoreDocCollector.create(TopScoreDocCollector=
.java:104)
> =A0 at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:1=
67)
> =A0 at org.apache.lucene.search.Searcher.search(Searcher.java:98)
> =A0 at org.apache.lucene.search.Searcher.search(Searcher.java:108)
>
> Now I know I should specify a max hits value, but I really want to return
> all matches , and regardless it shouldn't throw this exception, and in ot=
her
> search code which also has specifies Integer.MAX_VALUE the exception is n=
ot
> occurring.
>
>
> thanks Paul
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 06 18:13:47 2009
Return-Path: <java-user-return-43934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46169 invoked from network); 6 Dec 2009 18:13:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Dec 2009 18:13:47 -0000
Received: (qmail 30316 invoked by uid 500); 6 Dec 2009 18:13:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30242 invoked by uid 500); 6 Dec 2009 18:13:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30232 invoked by uid 99); 6 Dec 2009 18:13:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Dec 2009 18:13:44 +0000
X-ASF-Spam-Status: No, hits=-2.2 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ghazal.gharooni@gmail.com designates 209.85.223.195 as permitted sender)
Received: from [209.85.223.195] (HELO mail-iw0-f195.google.com) (209.85.223.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Dec 2009 18:13:42 +0000
Received: by iwn33 with SMTP id 33so2765569iwn.29
        for <java-user@lucene.apache.org>; Sun, 06 Dec 2009 10:13:21 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=KyakLCWMnXShSPJS3NTMqEfPD/u5VjPF/sTwXdHOCIw=;
        b=MDK2iiGYYgwu080dEB1+exGgacJZNm0PBkJ9DUFEvJfY7bBibNsptKe24L3/oQQvq1
         o03dY3NwcxjUNHteL5oSYhjANzgieMeiZGfXwxcTx84KMdAITrFI5XXo5WUXtKe4zjLk
         S3jcWQoOFRnjgYfLQI6NxCuak9LGAJzVlcI6E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=GBKVFsTIDDlW/QBpsv5I/Ot4UzbzNY6xVRtAjdnLAGBE/wGJWAyHOrjva1rkwoVz1D
         FIzzfC4RCPQCryAular0wd5kaHyQknIJk6tNk+yZZsMDMeS+rUmNxRaXEXZgGtkRRz8+
         Sub4M5HOUfSmjmzmFx/ufjlUddECxtVUGieYA=
MIME-Version: 1.0
Received: by 10.231.61.195 with SMTP id u3mr1308117ibh.12.1260123201495; Sun, 
	06 Dec 2009 10:13:21 -0800 (PST)
In-Reply-To: <671e7270912061008v575d6c42hbc18ee813317a8a6@mail.gmail.com>
References: <671e7270912060213v33283eaehcfcdf9f68c00dff9@mail.gmail.com>
	 <671e7270912061008v575d6c42hbc18ee813317a8a6@mail.gmail.com>
Date: Sun, 6 Dec 2009 10:13:21 -0800
Message-ID: <671e7270912061013g3f849617k8476643086f5c104@mail.gmail.com>
Subject: [ERR] Only a type can be imported
From: Ghazal Gharooni <ghazal.gharooni@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00151774149ccc6141047a134b8d

--00151774149ccc6141047a134b8d
Content-Type: text/plain; charset=ISO-8859-1

Hello,
I am new in lucene project. I got the following error while trying to run
the project and test Search Criteria (results.jsp) . I added all jar files
to class path. I notified that QueryParser accept three argument while the
code only includes two arguments. So, I've changed the qp = new
QueryParser("contents", analyzer); to this one: qp = new
QueryParser(Version.LUCENE_
CURRENT,"contents", analyzer);  However, it still doesn't work. Please
somebody help me to get through this issue.


ERROR:
------------------------------------------

org.apache.jasper.JasperException: Unable to compile class for JSP

Generated servlet error:
Only a type can be imported.
org.apache.lucene.analysis.standard.StandardAnalyzer resolves to a
package

Generated servlet error:
Only a type can be imported. org.apache.lucene.util.Version resolves
to a package

An error occurred at line: 45 in the jsp file: /results.jsp
Generated servlet error:
IndexSearcher cannot be resolved or is not a type

An error occurred at line: 45 in the jsp file: /results.jsp
Generated servlet error:
Query cannot be resolved or is not a type

An error occurred at line: 45 in the jsp file: /results.jsp
Generated servlet error:
TopDocs cannot be resolved or is not a type

An error occurred at line: 45 in the jsp file: /results.jsp
Generated servlet error:
IndexReader cannot be resolved or is not a type

An error occurred at line: 45 in the jsp file: /results.jsp
Generated servlet error:
IndexReader cannot be resolved

An error occurred at line: 45 in the jsp file: /results.jsp
Generated servlet error:
FSDirectory cannot be resolved

An error occurred at line: 45 in the jsp file: /results.jsp
Generated servlet error:
IndexSearcher cannot be resolved or is not a type

An error occurred at line: 77 in the jsp file: /results.jsp
Generated servlet error:
Analyzer cannot be resolved or is not a type

An error occurred at line: 77 in the jsp file: /results.jsp
Generated servlet error:
StandardAnalyzer cannot be resolved or is not a type

An error occurred at line: 77 in the jsp file: /results.jsp
Generated servlet error:
Version.LUCENE_CURRENT cannot be resolved or is not a type

An error occurred at line: 77 in the jsp file: /results.jsp
Generated servlet error:
QueryParser cannot be resolved or is not a type

An error occurred at line: 77 in the jsp file: /results.jsp
Generated servlet error:
QueryParser cannot be resolved or is not a type

An error occurred at line: 77 in the jsp file: /results.jsp
Generated servlet error:
ParseException cannot be resolved or is not a type

An error occurred at line: 143 in the jsp file: /results.jsp
Generated servlet error:
Document cannot be resolved or is not a type


	org.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:84)
	org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:328)
	org.apache.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:397)
	org.apache.jasper.compiler.Compiler.compile(Compiler.java:288)
	org.apache.jasper.compiler.Compiler.compile(Compiler.java:267)
	org.apache.jasper.compiler.Compiler.compile(Compiler.java:255)
	org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:556)
	org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:293)
	org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:291)
	org.apache.jasper.servlet.JspServlet.service(JspServlet.java:241)
	javax.servlet.http.HttpServlet.service(HttpServlet.java:802)

--00151774149ccc6141047a134b8d--

From java-user-return-43935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 07 04:13:30 2009
Return-Path: <java-user-return-43935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18358 invoked from network); 7 Dec 2009 04:13:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Dec 2009 04:13:30 -0000
Received: (qmail 36066 invoked by uid 500); 7 Dec 2009 04:13:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35941 invoked by uid 500); 7 Dec 2009 04:13:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35931 invoked by uid 99); 7 Dec 2009 04:13:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Dec 2009 04:13:25 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Dec 2009 04:13:20 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NHUy4-00078w-4T
	for java-user@lucene.apache.org; Sun, 06 Dec 2009 20:13:00 -0800
Message-ID: <26672045.post@talk.nabble.com>
Date: Sun, 6 Dec 2009 20:13:00 -0800 (PST)
From: "m.harig" <m.harig@gmail.com>
To: java-user@lucene.apache.org
Subject: english dictionary for spelling
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: m.harig@gmail.com



-- 
View this message in context: http://old.nabble.com/english-dictionary-for-spelling-tp26672045p26672045.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 07 04:16:55 2009
Return-Path: <java-user-return-43936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18598 invoked from network); 7 Dec 2009 04:16:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Dec 2009 04:16:55 -0000
Received: (qmail 38029 invoked by uid 500); 7 Dec 2009 04:16:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37926 invoked by uid 500); 7 Dec 2009 04:16:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37916 invoked by uid 99); 7 Dec 2009 04:16:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Dec 2009 04:16:52 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Dec 2009 04:16:42 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NHV1J-0007Km-So
	for java-user@lucene.apache.org; Sun, 06 Dec 2009 20:16:21 -0800
Message-ID: <26672207.post@talk.nabble.com>
Date: Sun, 6 Dec 2009 20:16:21 -0800 (PST)
From: "m.harig" <m.harig@gmail.com>
To: java-user@lucene.apache.org
Subject: english dictionary for spelling
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: m.harig@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


hello all

      i've a doubt in spell checker , am creating spell index from my
original index , but my original index itself has some misspelled words. So
i decided to use any proper English dictionary words for my spell checker ,
can any one tell me is there any option in lucene to do my above? i've used
wordsnet , but it gives me synonyms , i need spell correction not synonyms .
please let me know
-- 
View this message in context: http://old.nabble.com/english-dictionary-for-spelling-tp26672207p26672207.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 07 04:47:00 2009
Return-Path: <java-user-return-43937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21767 invoked from network); 7 Dec 2009 04:47:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Dec 2009 04:47:00 -0000
Received: (qmail 53493 invoked by uid 500); 7 Dec 2009 04:46:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53377 invoked by uid 500); 7 Dec 2009 04:46:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 2796 invoked by uid 99); 6 Dec 2009 20:30:37 -0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dcliman@gmail.com designates 209.85.222.176 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:received:from:date
         :x-google-sender-auth:message-id:subject:to:content-type;
        bh=MOQjqP2XwoHFdtF/0EbeSSPm3KQY1eRIi/9PcQIaw2E=;
        b=HExnSvIrlDQ3nKIYfnQq4KOHkRIJYCDCv2EPFzeR43N0v0hWFnbRWjadanJ5SNRg0t
         IkR+9bpJJdtppP2qEazMFGB3RS5Ae4t7ZboxkTvSWS7l5JZKXYAiQNtm8HOrspyXuT05
         /92a0elU1E4jmH5lMg+rEt0vDUOr485Cq6mBE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:from:date:x-google-sender-auth:message-id
         :subject:to:content-type;
        b=ITr1Al1WH83YUqDFebpnTQO649GtO5eoKTZHhhLzjm5A7r8l1qM8rGnz6OkpPzv0QD
         RKn6fm6hGSO/O38B6HEUgZBeUDWXToJWYaQmnQcLlvUnCUXyD2wU1WL2CBLAh254c7by
         SqQWhbZ22R9inbm65hOrBGdEZHZXAl++DtpkA=
MIME-Version: 1.0
Sender: dcliman@gmail.com
From: Dan <lue6x9@gmail.com>
Date: Sun, 6 Dec 2009 12:29:55 -0800
X-Google-Sender-Auth: 762b0a3b55af8ab2
Message-ID: <75e0f60f0912061229n668b6a40vf2c1af1f938b729d@mail.gmail.com>
Subject: NIOFSDirectory AssertionError in sun.nio.ch.NativeThreadSet
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8

I've been running some tests with Lucene 2.9.1 on a Linux box with a
Sun JVM and getting a sun.nio.ch.NateiveThreadSet Assertion error (see
below for stacktrace).

Does anyone know what this error means? Any suggestions for a workaround?

We used the following to open the index.
	FSDirectory dir = FSDirectory.open(new File("path_to_lucene_index"));
        IndexReader sReader = IndexReader.open(dir, true);  // open a
read-only reader



java version "1.5.0_08"
Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_08-b03)
Java HotSpot(TM) Server VM (build 1.5.0_08-b03, mixed mode)


java.lang.AssertionError
        at sun.nio.ch.NativeThreadSet.add(NativeThreadSet.java:46)
        at sun.nio.ch.FileChannelImpl.read(FileChannelImpl.java:623)
        at org.apache.lucene.store.NIOFSDirectory$NIOFSIndexInput.readInternal(NIOFSDirectory.java:161)
        at org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.java:136)
        at org.apache.lucene.index.CompoundFileReader$CSIndexInput.readInternal(CompoundFileReader.java:247)
        at org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java:157)
        at org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.java:38)
        at org.apache.lucene.store.IndexInput.readVInt(IndexInput.java:80)
        at org.apache.lucene.index.TermBuffer.read(TermBuffer.java:64)
        at org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:129)
        at org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java:160)
        at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:232)
        at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:179)
        at org.apache.lucene.index.SegmentReader.docFreq(SegmentReader.java:975)
        at org.apache.lucene.index.DirectoryReader.docFreq(DirectoryReader.java:627)
        at org.apache.lucene.search.IndexSearcher.docFreq(IndexSearcher.java:147)
        at org.apache.lucene.search.Similarity.idfExplain(Similarity.java:765)
        at org.apache.lucene.search.TermQuery$TermWeight.&lt;init&gt;(TermQuery.java:46)
        at org.apache.lucene.search.TermQuery.createWeight(TermQuery.java:146)
        at org.apache.lucene.search.BooleanQuery$BooleanWeight.&lt;init&gt;(BooleanQuery.java:184)
        at org.apache.lucene.search.BooleanQuery.createWeight(BooleanQuery.java:415)
        at org.apache.lucene.search.Query.weight(Query.java:99)
        at org.apache.lucene.search.Searcher.createWeight(Searcher.java:230)
        at org.apache.lucene.search.Searcher.search(Searcher.java:171)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 07 07:31:29 2009
Return-Path: <java-user-return-43938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78105 invoked from network); 7 Dec 2009 07:31:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Dec 2009 07:31:29 -0000
Received: (qmail 67368 invoked by uid 500); 7 Dec 2009 07:31:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67238 invoked by uid 500); 7 Dec 2009 07:31:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67228 invoked by uid 99); 7 Dec 2009 07:31:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Dec 2009 07:31:25 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Dec 2009 07:31:14 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 022EAD36003
	for <java-user@lucene.apache.org>; Mon,  7 Dec 2009 08:30:54 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id dnLt5J8WYRjD for <java-user@lucene.apache.org>;
	Mon,  7 Dec 2009 08:30:42 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 9CFC4D36002
	for <java-user@lucene.apache.org>; Mon,  7 Dec 2009 08:30:42 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <75e0f60f0912061229n668b6a40vf2c1af1f938b729d@mail.gmail.com>
Subject: RE: NIOFSDirectory AssertionError in sun.nio.ch.NativeThreadSet
Date: Mon, 7 Dec 2009 08:30:41 +0100
Message-ID: <77F75CADB8764234B6A1CCA740748EAD@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <75e0f60f0912061229n668b6a40vf2c1af1f938b729d@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
Thread-Index: Acp2+FcsTHMjR26bTaq/krShgVv6xwAFqCdg
X-Virus-Checked: Checked by ClamAV on apache.org

Maybe you should update your JVM?

1.5.0_08 is really old, the latest 1.5 version is _22. This looks like a Sun
Bug, because the AssertionException happens in Sun's code not in Lucene's.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: dcliman@gmail.com [mailto:dcliman@gmail.com] On Behalf Of Dan
> Sent: Sunday, December 06, 2009 9:30 PM
> To: java-user@lucene.apache.org
> Subject: NIOFSDirectory AssertionError in sun.nio.ch.NativeThreadSet
> 
> I've been running some tests with Lucene 2.9.1 on a Linux box with a
> Sun JVM and getting a sun.nio.ch.NateiveThreadSet Assertion error (see
> below for stacktrace).
> 
> Does anyone know what this error means? Any suggestions for a workaround?
> 
> We used the following to open the index.
> 	FSDirectory dir = FSDirectory.open(new
> File("path_to_lucene_index"));
>         IndexReader sReader = IndexReader.open(dir, true);  // open a
> read-only reader
> 
> 
> 
> java version "1.5.0_08"
> Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_08-b03)
> Java HotSpot(TM) Server VM (build 1.5.0_08-b03, mixed mode)
> 
> 
> java.lang.AssertionError
>         at sun.nio.ch.NativeThreadSet.add(NativeThreadSet.java:46)
>         at sun.nio.ch.FileChannelImpl.read(FileChannelImpl.java:623)
>         at
> org.apache.lucene.store.NIOFSDirectory$NIOFSIndexInput.readInternal(NIOFSD
> irectory.java:161)
>         at
> org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.ja
> va:136)
>         at
> org.apache.lucene.index.CompoundFileReader$CSIndexInput.readInternal(Compo
> undFileReader.java:247)
>         at
> org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java:
> 157)
>         at
> org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.jav
> a:38)
>         at org.apache.lucene.store.IndexInput.readVInt(IndexInput.java:80)
>         at org.apache.lucene.index.TermBuffer.read(TermBuffer.java:64)
>         at
> org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:129)
>         at
> org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java:160)
>         at
> org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:232)
>         at
> org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:179)
>         at
> org.apache.lucene.index.SegmentReader.docFreq(SegmentReader.java:975)
>         at
> org.apache.lucene.index.DirectoryReader.docFreq(DirectoryReader.java:627)
>         at
> org.apache.lucene.search.IndexSearcher.docFreq(IndexSearcher.java:147)
>         at
> org.apache.lucene.search.Similarity.idfExplain(Similarity.java:765)
>         at
> org.apache.lucene.search.TermQuery$TermWeight.&lt;init&gt;(TermQuery.java:
> 46)
>         at
> org.apache.lucene.search.TermQuery.createWeight(TermQuery.java:146)
>         at
> org.apache.lucene.search.BooleanQuery$BooleanWeight.&lt;init&gt;(BooleanQu
> ery.java:184)
>         at
> org.apache.lucene.search.BooleanQuery.createWeight(BooleanQuery.java:415)
>         at org.apache.lucene.search.Query.weight(Query.java:99)
>         at
> org.apache.lucene.search.Searcher.createWeight(Searcher.java:230)
>         at org.apache.lucene.search.Searcher.search(Searcher.java:171)
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 07 09:58:55 2009
Return-Path: <java-user-return-43939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23035 invoked from network); 7 Dec 2009 09:58:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Dec 2009 09:58:55 -0000
Received: (qmail 881 invoked by uid 500); 7 Dec 2009 09:58:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 795 invoked by uid 500); 7 Dec 2009 09:58:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 785 invoked by uid 99); 7 Dec 2009 09:58:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Dec 2009 09:58:52 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.220.224 as permitted sender)
Received: from [209.85.220.224] (HELO mail-fx0-f224.google.com) (209.85.220.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Dec 2009 09:58:44 +0000
Received: by fxm24 with SMTP id 24so4194001fxm.11
        for <java-user@lucene.apache.org>; Mon, 07 Dec 2009 01:58:24 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=zCbAB6TJ6521z7Ls7L+10k3n2jP5wXxccmaSbGZODwQ=;
        b=KT/gSTEe/RS72ZJ3uEn2pn69jqMAUWa3Z9VXF9bR2HhC1+kL1Uue4xQEFCumAVmGvO
         xIu9y7KCywzYTLLJVPzefs/z9iSIiNELr3AK0a2iF9rUX2ekNWOHHQiPyn+eDpcnTUnX
         6Jnfc4UVfY0U1jDehiZUVjS5WLSPUfI7Rh+wc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=YeC6u/spntHR9irXB68woO0UJbg6OKw6DHmtrzmjBz1+/zSCzjg3mQsqe3xvxh7VTL
         8e//8gxzKVrWgV2cI8L7YtY4Pl8BocaEtpwQoESkXwmfZ2m5nr2cjufwlc64Cmdgz6QP
         HDu42ithAAS2vK69T1DjWQkQdWuOki1qestIs=
MIME-Version: 1.0
Received: by 10.223.18.145 with SMTP id w17mr909443faa.66.1260179904272; Mon, 
	07 Dec 2009 01:58:24 -0800 (PST)
In-Reply-To: <671e7270912061013g3f849617k8476643086f5c104@mail.gmail.com>
References: <671e7270912060213v33283eaehcfcdf9f68c00dff9@mail.gmail.com> 
	<671e7270912061008v575d6c42hbc18ee813317a8a6@mail.gmail.com> 
	<671e7270912061013g3f849617k8476643086f5c104@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 7 Dec 2009 09:58:04 +0000
Message-ID: <8c4e68610912070158n406e2bd2x8a46991c88b51d11@mail.gmail.com>
Subject: Re: [ERR] Only a type can be imported
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Using google to search for "Generated servlet error: Only a type can
be imported." leads to posts that say it is caused by your webapp not
being able to find a jar.

Double check that you've got the lucene-core-x.x.x.jar file in
webapps/whatever/WEB-INF/lib, assuming that's the right place for
whatever it is you are running.

And double check that you don't have any old lucene jars anywhere else.


--
Ian.


On Sun, Dec 6, 2009 at 6:13 PM, Ghazal Gharooni
<ghazal.gharooni@gmail.com> wrote:
> Hello,
> I am new in lucene project. I got the following error while trying to run
> the project and test Search Criteria (results.jsp) . I added all jar file=
s
> to class path. I notified that QueryParser accept three argument while th=
e
> code only includes two arguments. So, I've changed the qp =3D new
> QueryParser("contents", analyzer); to this one: qp =3D new
> QueryParser(Version.LUCENE_
> CURRENT,"contents", analyzer); =A0However, it still doesn't work. Please
> somebody help me to get through this issue.
>
>
> ERROR:
> ------------------------------------------
>
> org.apache.jasper.JasperException: Unable to compile class for JSP
>
> Generated servlet error:
> Only a type can be imported.
> org.apache.lucene.analysis.standard.StandardAnalyzer resolves to a
> package
>
> Generated servlet error:
> Only a type can be imported. org.apache.lucene.util.Version resolves
> to a package
>
> An error occurred at line: 45 in the jsp file: /results.jsp
> Generated servlet error:
> IndexSearcher cannot be resolved or is not a type
>
> An error occurred at line: 45 in the jsp file: /results.jsp
> Generated servlet error:
> Query cannot be resolved or is not a type
>
> An error occurred at line: 45 in the jsp file: /results.jsp
> Generated servlet error:
> TopDocs cannot be resolved or is not a type
>
> An error occurred at line: 45 in the jsp file: /results.jsp
> Generated servlet error:
> IndexReader cannot be resolved or is not a type
>
> An error occurred at line: 45 in the jsp file: /results.jsp
> Generated servlet error:
> IndexReader cannot be resolved
>
> An error occurred at line: 45 in the jsp file: /results.jsp
> Generated servlet error:
> FSDirectory cannot be resolved
>
> An error occurred at line: 45 in the jsp file: /results.jsp
> Generated servlet error:
> IndexSearcher cannot be resolved or is not a type
>
> An error occurred at line: 77 in the jsp file: /results.jsp
> Generated servlet error:
> Analyzer cannot be resolved or is not a type
>
> An error occurred at line: 77 in the jsp file: /results.jsp
> Generated servlet error:
> StandardAnalyzer cannot be resolved or is not a type
>
> An error occurred at line: 77 in the jsp file: /results.jsp
> Generated servlet error:
> Version.LUCENE_CURRENT cannot be resolved or is not a type
>
> An error occurred at line: 77 in the jsp file: /results.jsp
> Generated servlet error:
> QueryParser cannot be resolved or is not a type
>
> An error occurred at line: 77 in the jsp file: /results.jsp
> Generated servlet error:
> QueryParser cannot be resolved or is not a type
>
> An error occurred at line: 77 in the jsp file: /results.jsp
> Generated servlet error:
> ParseException cannot be resolved or is not a type
>
> An error occurred at line: 143 in the jsp file: /results.jsp
> Generated servlet error:
> Document cannot be resolved or is not a type
>
>
> =A0 =A0 =A0 =A0org.apache.jasper.compiler.DefaultErrorHandler.javacError(=
DefaultErrorHandler.java:84)
> =A0 =A0 =A0 =A0org.apache.jasper.compiler.ErrorDispatcher.javacError(Erro=
rDispatcher.java:328)
> =A0 =A0 =A0 =A0org.apache.jasper.compiler.JDTCompiler.generateClass(JDTCo=
mpiler.java:397)
> =A0 =A0 =A0 =A0org.apache.jasper.compiler.Compiler.compile(Compiler.java:=
288)
> =A0 =A0 =A0 =A0org.apache.jasper.compiler.Compiler.compile(Compiler.java:=
267)
> =A0 =A0 =A0 =A0org.apache.jasper.compiler.Compiler.compile(Compiler.java:=
255)
> =A0 =A0 =A0 =A0org.apache.jasper.JspCompilationContext.compile(JspCompila=
tionContext.java:556)
> =A0 =A0 =A0 =A0org.apache.jasper.servlet.JspServletWrapper.service(JspSer=
vletWrapper.java:293)
> =A0 =A0 =A0 =A0org.apache.jasper.servlet.JspServlet.serviceJspFile(JspSer=
vlet.java:291)
> =A0 =A0 =A0 =A0org.apache.jasper.servlet.JspServlet.service(JspServlet.ja=
va:241)
> =A0 =A0 =A0 =A0javax.servlet.http.HttpServlet.service(HttpServlet.java:80=
2)
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 07 13:44:09 2009
Return-Path: <java-user-return-43940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15524 invoked from network); 7 Dec 2009 13:44:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Dec 2009 13:44:09 -0000
Received: (qmail 42167 invoked by uid 500); 7 Dec 2009 13:44:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42087 invoked by uid 500); 7 Dec 2009 13:44:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42077 invoked by uid 99); 7 Dec 2009 13:44:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Dec 2009 13:44:06 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of benhei@gmail.com designates 209.85.218.222 as permitted sender)
Received: from [209.85.218.222] (HELO mail-bw0-f222.google.com) (209.85.218.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Dec 2009 13:43:56 +0000
Received: by bwz22 with SMTP id 22so3816537bwz.5
        for <java-user@lucene.apache.org>; Mon, 07 Dec 2009 05:43:36 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=8GLeQGCATgZnF77hvYw5r3TNJLfMQe6yNozplNzWZ6o=;
        b=eR1VcBO2CAUV27P57L/Q+iVmEsmxdHZlk7GylRABfh0oE90LH70xCNFkLaJZLpl7WK
         YQl1f7OCzBQ9Nr87/kxfluTgPTmFZM5wYP9R3mjXcFmdF50+XWBmfgg1SXDr+e+6f29j
         yqumHnE4a2/75j3oQh+OM2SKMq7ZVtacgWy10=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=IiXE8y5kGlyI2Vyf+DKWRPMhB1WN8A7Iy/7UlsmFw7nDrhsOHyvGKW56Uvx+7VqE8k
         AQ+zwnfH9zf2qnhPd8iFietTnb0V4DlnvLlYDsznZ/8qZnzpG3IxrNudrh1clkV7vZUn
         T3Z7Q4j9cDR5j2Eup8AvkemoCeT2EJ50pTaI4=
MIME-Version: 1.0
Received: by 10.204.34.203 with SMTP id m11mr7174305bkd.79.1260193416348; Mon, 
	07 Dec 2009 05:43:36 -0800 (PST)
In-Reply-To: <26672207.post@talk.nabble.com>
References: <26672207.post@talk.nabble.com>
Date: Mon, 7 Dec 2009 14:43:36 +0100
Message-ID: <94095f520912070543lf705609tcb5242d5ea924441@mail.gmail.com>
Subject: Re: english dictionary for spelling
From: Benjamin Heilbrunn <benhei@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

If you are searching for a dictionary this might be a good ressource
for you: http://wiki.services.openoffice.org/wiki/Dictionaries

2009/12/7 m.harig <m.harig@gmail.com>:
>
> hello all
>
> =A0 =A0 =A0i've a doubt in spell checker , am creating spell index from m=
y
> original index , but my original index itself has some misspelled words. =
So
> i decided to use any proper English dictionary words for my spell checker=
 ,
> can any one tell me is there any option in lucene to do my above? i've us=
ed
> wordsnet , but it gives me synonyms , i need spell correction not synonym=
s .
> please let me know
> --
> View this message in context: http://old.nabble.com/english-dictionary-fo=
r-spelling-tp26672207p26672207.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 07 16:33:19 2009
Return-Path: <java-user-return-43941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81453 invoked from network); 7 Dec 2009 16:33:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Dec 2009 16:33:19 -0000
Received: (qmail 98838 invoked by uid 500); 7 Dec 2009 16:33:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98763 invoked by uid 500); 7 Dec 2009 16:33:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98752 invoked by uid 99); 7 Dec 2009 16:33:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Dec 2009 16:33:16 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ghazal.gharooni@gmail.com designates 209.85.223.196 as permitted sender)
Received: from [209.85.223.196] (HELO mail-iw0-f196.google.com) (209.85.223.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Dec 2009 16:33:08 +0000
Received: by iwn34 with SMTP id 34so3087054iwn.21
        for <java-user@lucene.apache.org>; Mon, 07 Dec 2009 08:32:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=hx1VLOFRb1qj3SxiADoUjr8zT42ZG64p6047xVrDDbI=;
        b=KIAq9AE9UJM/ctEXuF7dk0oJKP2BInOLjwpk95+szmx8/VHl0cMYZVJhJXDSeVLPIZ
         0OrJ0m+MA3NbL4MzpolFJwxRrKAczJdy8p2xaOhBzXoat/S3oCTmKh1b3vljwrcwxH0p
         eG37hz/0/jqWsx1Pw+ves9UZETDy1jIHU4asE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=TFXfLxtTDYInSahSOpY3t5Fy9xd5q9nYrP0lIbRKSi5KWZKjntt5JZR4+aF9njm3QX
         3pDjlN+p4KTSw29Zup8rTNxRafJPmHq5/sVTYt8ZdwkBTfvxFNZmLmC7oosAUgpLBO1b
         4Ovy0K4CJCV8pLixOKweqGdSfLSd2Ox6tW3Yo=
MIME-Version: 1.0
Received: by 10.231.170.14 with SMTP id b14mr1725677ibz.26.1260203565810; Mon, 
	07 Dec 2009 08:32:45 -0800 (PST)
In-Reply-To: <8c4e68610912070158n406e2bd2x8a46991c88b51d11@mail.gmail.com>
References: <671e7270912060213v33283eaehcfcdf9f68c00dff9@mail.gmail.com>
	 <671e7270912061008v575d6c42hbc18ee813317a8a6@mail.gmail.com>
	 <671e7270912061013g3f849617k8476643086f5c104@mail.gmail.com>
	 <8c4e68610912070158n406e2bd2x8a46991c88b51d11@mail.gmail.com>
Date: Mon, 7 Dec 2009 08:32:45 -0800
Message-ID: <671e7270912070832y617d732am3b3cd9707360fc3a@mail.gmail.com>
Subject: Re: [ERR] Only a type can be imported
From: Ghazal Gharooni <ghazal.gharooni@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you! I added all the jar files but accessed them as an external
jar files. Since I copied them all in WEB-INF/lib the problem has been
solved.


On Mon, Dec 7, 2009 at 1:58 AM, Ian Lea <ian.lea@gmail.com> wrote:
>
> Using google to search for "Generated servlet error: Only a type can
> be imported." leads to posts that say it is caused by your webapp not
> being able to find a jar.
>
> Double check that you've got the lucene-core-x.x.x.jar file in
> webapps/whatever/WEB-INF/lib, assuming that's the right place for
> whatever it is you are running.
>
> And double check that you don't have any old lucene jars anywhere else.
>
>
> --
> Ian.
>
>
> On Sun, Dec 6, 2009 at 6:13 PM, Ghazal Gharooni
> <ghazal.gharooni@gmail.com> wrote:
> > Hello,
> > I am new in lucene project. I got the following error while trying to r=
un
> > the project and test Search Criteria (results.jsp) . I added all jar fi=
les
> > to class path. I notified that QueryParser accept three argument while =
the
> > code only includes two arguments. So, I've changed the qp =3D new
> > QueryParser("contents", analyzer); to this one: qp =3D new
> > QueryParser(Version.LUCENE_
> > CURRENT,"contents", analyzer); =A0However, it still doesn't work. Pleas=
e
> > somebody help me to get through this issue.
> >
> >
> > ERROR:
> > ------------------------------------------
> >
> > org.apache.jasper.JasperException: Unable to compile class for JSP
> >
> > Generated servlet error:
> > Only a type can be imported.
> > org.apache.lucene.analysis.standard.StandardAnalyzer resolves to a
> > package
> >
> > Generated servlet error:
> > Only a type can be imported. org.apache.lucene.util.Version resolves
> > to a package
> >
> > An error occurred at line: 45 in the jsp file: /results.jsp
> > Generated servlet error:
> > IndexSearcher cannot be resolved or is not a type
> >
> > An error occurred at line: 45 in the jsp file: /results.jsp
> > Generated servlet error:
> > Query cannot be resolved or is not a type
> >
> > An error occurred at line: 45 in the jsp file: /results.jsp
> > Generated servlet error:
> > TopDocs cannot be resolved or is not a type
> >
> > An error occurred at line: 45 in the jsp file: /results.jsp
> > Generated servlet error:
> > IndexReader cannot be resolved or is not a type
> >
> > An error occurred at line: 45 in the jsp file: /results.jsp
> > Generated servlet error:
> > IndexReader cannot be resolved
> >
> > An error occurred at line: 45 in the jsp file: /results.jsp
> > Generated servlet error:
> > FSDirectory cannot be resolved
> >
> > An error occurred at line: 45 in the jsp file: /results.jsp
> > Generated servlet error:
> > IndexSearcher cannot be resolved or is not a type
> >
> > An error occurred at line: 77 in the jsp file: /results.jsp
> > Generated servlet error:
> > Analyzer cannot be resolved or is not a type
> >
> > An error occurred at line: 77 in the jsp file: /results.jsp
> > Generated servlet error:
> > StandardAnalyzer cannot be resolved or is not a type
> >
> > An error occurred at line: 77 in the jsp file: /results.jsp
> > Generated servlet error:
> > Version.LUCENE_CURRENT cannot be resolved or is not a type
> >
> > An error occurred at line: 77 in the jsp file: /results.jsp
> > Generated servlet error:
> > QueryParser cannot be resolved or is not a type
> >
> > An error occurred at line: 77 in the jsp file: /results.jsp
> > Generated servlet error:
> > QueryParser cannot be resolved or is not a type
> >
> > An error occurred at line: 77 in the jsp file: /results.jsp
> > Generated servlet error:
> > ParseException cannot be resolved or is not a type
> >
> > An error occurred at line: 143 in the jsp file: /results.jsp
> > Generated servlet error:
> > Document cannot be resolved or is not a type
> >
> >
> > =A0 =A0 =A0 =A0org.apache.jasper.compiler.DefaultErrorHandler.javacErro=
r(DefaultErrorHandler.java:84)
> > =A0 =A0 =A0 =A0org.apache.jasper.compiler.ErrorDispatcher.javacError(Er=
rorDispatcher.java:328)
> > =A0 =A0 =A0 =A0org.apache.jasper.compiler.JDTCompiler.generateClass(JDT=
Compiler.java:397)
> > =A0 =A0 =A0 =A0org.apache.jasper.compiler.Compiler.compile(Compiler.jav=
a:288)
> > =A0 =A0 =A0 =A0org.apache.jasper.compiler.Compiler.compile(Compiler.jav=
a:267)
> > =A0 =A0 =A0 =A0org.apache.jasper.compiler.Compiler.compile(Compiler.jav=
a:255)
> > =A0 =A0 =A0 =A0org.apache.jasper.JspCompilationContext.compile(JspCompi=
lationContext.java:556)
> > =A0 =A0 =A0 =A0org.apache.jasper.servlet.JspServletWrapper.service(JspS=
ervletWrapper.java:293)
> > =A0 =A0 =A0 =A0org.apache.jasper.servlet.JspServlet.serviceJspFile(JspS=
ervlet.java:291)
> > =A0 =A0 =A0 =A0org.apache.jasper.servlet.JspServlet.service(JspServlet.=
java:241)
> > =A0 =A0 =A0 =A0javax.servlet.http.HttpServlet.service(HttpServlet.java:=
802)
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 07 20:48:48 2009
Return-Path: <java-user-return-43942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22836 invoked from network); 7 Dec 2009 20:48:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Dec 2009 20:48:48 -0000
Received: (qmail 25614 invoked by uid 500); 7 Dec 2009 20:48:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25510 invoked by uid 500); 7 Dec 2009 20:48:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25500 invoked by uid 99); 7 Dec 2009 20:48:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Dec 2009 20:48:45 +0000
X-ASF-Spam-Status: No, hits=-3.6 required=5.0
	tests=BAYES_00,RCVD_IN_DNSWL_LOW
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.25 as permitted sender)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Dec 2009 20:48:43 +0000
Received: from compute2.internal (compute2.internal [10.202.2.42])
	by gateway1.messagingengine.com (Postfix) with ESMTP id 2C193C5955
	for <java-user@lucene.apache.org>; Mon,  7 Dec 2009 15:48:22 -0500 (EST)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by compute2.internal (MEProxy); Mon, 07 Dec 2009 15:48:22 -0500
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:subject:content-type:content-transfer-encoding; s=smtpout; bh=HrlEbDVett6t7RTncBMZJN0chrU=; b=hlrP6N3/yMuqcb0mIvu4M5YxOUccgGytGFKmY32hGncOA3+2tI/L0wsvz17j7PWoutU/gYBWaYjGycODTxMfOYLj9TH2XggA0fjenhFwyvZabWhfiSoOWL18H+D46x/4BPcWpqE5A+IJNtkYZ7wIlwlijdA40X3pPGXmkMDtEhA=
X-Sasl-enc: PswZ4joQotmt4OU4W4Yo1SQn3/lMF6wpiU6CSiYHoZ4j 1260218901
Received: from macbook.lan (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPA id AD8F01A137
	for <java-user@lucene.apache.org>; Mon,  7 Dec 2009 15:48:21 -0500 (EST)
Message-ID: <4B1D6A14.8020304@fastmail.fm>
Date: Mon, 07 Dec 2009 20:48:20 +0000
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Thunderbird 2.0.0.23 (Macintosh/20090812)
MIME-Version: 1.0
To: Lucene Users <java-user@lucene.apache.org>
Subject: Looking for a MappingCharFilter that accepts regular expressions
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

I want my search to treat 'No. 1' and 'No.1' the same, because in our 
context its one token I want 'No. 1' to become 'No.1',  I need to do 
this before tokenizing because the tokenizer would split one value into 
two terms and one into just one term. I already use a NormalizeMapFilter 
to map &' to 'and' but I think it only takes literal text and I need to

1. be case insensitive (but lowercasefilter is only applied after 
tokenizing)

2. cope with all numbers e.g no. 109

So I was going to subclass BaseCharFilter and do my matches with a 
regular expression like ([Nn]+[Oo]+\\.) ([0-9]+) but I'm struggling to 
understand the offset methods you have to do once you get a match. Has 
anyone already got a regular expression Charfilter OR am I approaching 
this all wrong

thanks Paul



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 07 21:27:34 2009
Return-Path: <java-user-return-43943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38403 invoked from network); 7 Dec 2009 21:27:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Dec 2009 21:27:34 -0000
Received: (qmail 87373 invoked by uid 500); 7 Dec 2009 21:27:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87280 invoked by uid 500); 7 Dec 2009 21:27:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87270 invoked by uid 99); 7 Dec 2009 21:27:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Dec 2009 21:27:31 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of moonwatcher32329@gmail.com designates 209.85.218.222 as permitted sender)
Received: from [209.85.218.222] (HELO mail-bw0-f222.google.com) (209.85.218.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Dec 2009 21:27:23 +0000
Received: by bwz22 with SMTP id 22so4280120bwz.5
        for <java-user@lucene.apache.org>; Mon, 07 Dec 2009 13:27:03 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=4vQKaKy3eEVGsuRg6QNfb3rW8tigiwD2/tuVc+AaSDo=;
        b=qBzexkPZ9NBEKHzm7uu+pdR0wfui+l3squNy6XODTs2s8bHsJYyba20jmdB1XtS32Y
         R1EWpJgbNjH+6ZS5y8QLutKNFRaho3LIYrynO7ozk0QySzUh3Z/AwtA5BipWm5Rca3k2
         5Wscrpn7gkfBVxvD458Ema3Y+xgb2MHBKdBc0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=GRvf2cfWrhnMLzD9rJzDg4QymMl95u1VY6olmBfAbV1LvdmXnVvM5nrLcnndwDc46U
         O5t9KSejDOzIqzUEXNmsXzBkWVVIMfrfJsa/vMZ27HmIRjWSkWtap6wqZJqMtNowp4yT
         +Mr1dzlOfPjQTZzEfxUCQ6ZrMG74jjuUdE/IQ=
MIME-Version: 1.0
Received: by 10.204.156.19 with SMTP id u19mr1987189bkw.62.1260221222622; Mon, 
	07 Dec 2009 13:27:02 -0800 (PST)
Date: Mon, 7 Dec 2009 16:27:02 -0500
Message-ID: <17022a310912071327x6be7f6afjf45e0ab69269e47c@mail.gmail.com>
Subject: heap memory issues when sorting by a string field
From: TCK <moonwatcher32329@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175cd1625017b5047a2a1e2a
X-Virus-Checked: Checked by ClamAV on apache.org

--0015175cd1625017b5047a2a1e2a
Content-Type: text/plain; charset=ISO-8859-1

Hi,
I'm having heap memory issues when I do lucene queries involving sorting by
a string field. Such queries seem to load a lot of data in to the heap.
Moreover lucene seems to hold on to references to this data even after the
index reader has been closed and a full GC has been run. Some of the
consequences of this are that in my generational heap configuration a lot of
memory gets promoted to tenured space each time I close the old index reader
and after opening and querying using a new one, and the tenured space
eventually gets fragmented causing a lot of promotion failures resulting in
jvm hangs while the jvm does stop-the-world GCs.

Does anyone know any workarounds to avoid these memory issues when doing
such lucene queries?

My profiling showed that even after a full GC lucene is holding on to a lot
of references to field value data notably via the
FieldCacheImpl/ExtendedFieldCacheImpl. I noticed that the WeakHashMap
readerCaches are using unbounded HashMaps as the innerCaches and I used
reflection to replace these innerCaches with dummy empty HashMaps, but still
I'm seeing the same behavior. I wondered if anyone has gone through these
same issues before and would offer any advice.

Thanks a lot,
TCK

--0015175cd1625017b5047a2a1e2a--

From java-user-return-43944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 07 21:38:30 2009
Return-Path: <java-user-return-43944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45691 invoked from network); 7 Dec 2009 21:38:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Dec 2009 21:38:30 -0000
Received: (qmail 3016 invoked by uid 500); 7 Dec 2009 21:38:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2944 invoked by uid 500); 7 Dec 2009 21:38:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2934 invoked by uid 99); 7 Dec 2009 21:38:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Dec 2009 21:38:28 +0000
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=HTML_FONT_FACE_BAD,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.219.225 as permitted sender)
Received: from [209.85.219.225] (HELO mail-ew0-f225.google.com) (209.85.219.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Dec 2009 21:38:19 +0000
Received: by ewy25 with SMTP id 25so3799211ewy.5
        for <java-user@lucene.apache.org>; Mon, 07 Dec 2009 13:37:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=1ozlG2ptQYMOYWPQCNz1ftZ2SuNAbPEScZFEMfauw3o=;
        b=xBRKOVZArvkondcxY8X9Ut1l2obvxQ9Z6EDn8fBUFtdE6uihTz2kD3rQqk4hOtzv9Q
         gvBCB5qf/klel6ukrw3K7w80w2c9JTHIxljcsith4QAJOJllHfSuSXp9x2biBbzrz7s2
         OI0SjyBUdWfO/k8mwuWIZpO1LT5MXHTCW+kM4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=ntry1+ZMxvp4vhKcID8VCPYpVdfIcmKu5xjLoKX1AYjBcOF1aFkZ7Moy93WviGKi2R
         04+IsyprBDf/3wCFGxltEx20WMrpagp43PoDW0xzeb5wU9P1RxEz5fpw9NPTVLjnC4hc
         +0PQlzYRmq79CvHk+nHyl8faRmTw/zTKIFjKU=
MIME-Version: 1.0
Received: by 10.216.87.131 with SMTP id y3mr2635723wee.9.1260221879636; Mon, 
	07 Dec 2009 13:37:59 -0800 (PST)
In-Reply-To: <17022a310912071327x6be7f6afjf45e0ab69269e47c@mail.gmail.com>
References: <17022a310912071327x6be7f6afjf45e0ab69269e47c@mail.gmail.com>
Date: Mon, 7 Dec 2009 16:37:59 -0500
Message-ID: <359a92830912071337o3ed869dbv68576b704666b8df@mail.gmail.com>
Subject: Re: heap memory issues when sorting by a string field
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d77e5e7953ef047a2a45e9
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d77e5e7953ef047a2a45e9
Content-Type: text/plain; charset=ISO-8859-1

What this sounds like is that you're not really closing your
readers even though you think you are. Sorting indeed uses up
significant memory when it populates internal caches and keeps
it around for later use (which is one of the reasons that warming
queries matter). But if you really do close the reader, I'm pretty
sure the memory should be GC-able.

One thing that trips people up is IndexReader.reopen(). If it
returns a reader different than the original, you *must* close the
old one. If you don't, the old reader is still hanging around and
memory won't be returne.... An example from the Javadocs...

 IndexReader reader = ...
 ...
 IndexReader new = r.reopen();
 if (new != reader) {
   ...     // reader was reopened
   reader.close();
 }
 reader = new;
 ...


If this is irrelevant, could you post your close/open

code?

HTH

Erick


On Mon, Dec 7, 2009 at 4:27 PM, TCK <moonwatcher32329@gmail.com> wrote:

> Hi,
> I'm having heap memory issues when I do lucene queries involving sorting by
> a string field. Such queries seem to load a lot of data in to the heap.
> Moreover lucene seems to hold on to references to this data even after the
> index reader has been closed and a full GC has been run. Some of the
> consequences of this are that in my generational heap configuration a lot
> of
> memory gets promoted to tenured space each time I close the old index
> reader
> and after opening and querying using a new one, and the tenured space
> eventually gets fragmented causing a lot of promotion failures resulting in
> jvm hangs while the jvm does stop-the-world GCs.
>
> Does anyone know any workarounds to avoid these memory issues when doing
> such lucene queries?
>
> My profiling showed that even after a full GC lucene is holding on to a lot
> of references to field value data notably via the
> FieldCacheImpl/ExtendedFieldCacheImpl. I noticed that the WeakHashMap
> readerCaches are using unbounded HashMaps as the innerCaches and I used
> reflection to replace these innerCaches with dummy empty HashMaps, but
> still
> I'm seeing the same behavior. I wondered if anyone has gone through these
> same issues before and would offer any advice.
>
> Thanks a lot,
> TCK
>

--0016e6d77e5e7953ef047a2a45e9--

From java-user-return-43945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 07 21:49:16 2009
Return-Path: <java-user-return-43945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53268 invoked from network); 7 Dec 2009 21:49:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Dec 2009 21:49:16 -0000
Received: (qmail 21080 invoked by uid 500); 7 Dec 2009 21:49:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20988 invoked by uid 500); 7 Dec 2009 21:49:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20978 invoked by uid 99); 7 Dec 2009 21:49:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Dec 2009 21:49:12 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of moonwatcher32329@gmail.com designates 209.85.218.222 as permitted sender)
Received: from [209.85.218.222] (HELO mail-bw0-f222.google.com) (209.85.218.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Dec 2009 21:49:04 +0000
Received: by bwz22 with SMTP id 22so4297422bwz.5
        for <java-user@lucene.apache.org>; Mon, 07 Dec 2009 13:48:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=drugrqxGkqZBAsGPxmvy4BpX8yMsKxsD1u/EwtOPQhA=;
        b=mbw7r2J2DWPWkvy4T7TTJq3dMKGg9CxaiRJPRBGj4gsVzNHWeJkL3qvxtLlwDqvxfg
         iBzxHu9DANMVE5LkqCDerkIRF5GLFVdK3TvJJHn5jYcEfqxWh5IBfhPy3WnMsSNO6SPi
         GKNA4yRDWF1n7WyJSu5yGRRasNlf0clmMOKUc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Hd6d7tXD5AL6dnZtzNQ6B9H3eEh/UmOX9+4DQBluTvG9G20oIZXK3Qg9Yp8MwXZ0+n
         2RhF4snsLqmmpYE9/YntxpkpLlyz0JDBMaa6iYzbqDc8041lQca4i+LYMLZah4DYTPyS
         dhpUB8EX8j8QZRLqfKTQbdqOMpOiv3BX0v2jE=
MIME-Version: 1.0
Received: by 10.204.14.72 with SMTP id f8mr7531072bka.197.1260222523960; Mon, 
	07 Dec 2009 13:48:43 -0800 (PST)
In-Reply-To: <359a92830912071337o3ed869dbv68576b704666b8df@mail.gmail.com>
References: <17022a310912071327x6be7f6afjf45e0ab69269e47c@mail.gmail.com>
	 <359a92830912071337o3ed869dbv68576b704666b8df@mail.gmail.com>
Date: Mon, 7 Dec 2009 16:48:43 -0500
Message-ID: <17022a310912071348m85926b0vbc0687e6085e79b5@mail.gmail.com>
Subject: Re: heap memory issues when sorting by a string field
From: TCK <moonwatcher32329@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000325559cbae0efaf047a2a6b9f
X-Virus-Checked: Checked by ClamAV on apache.org

--000325559cbae0efaf047a2a6b9f
Content-Type: text/plain; charset=ISO-8859-1

Thanks for the response. But I'm definitely calling close() on the old
reader and opening a new one (not using reopen). Also, to simplify the
analysis, I did my test with a single-threaded requester to eliminate any
concurrency issues.

I'm doing:
sSearcher.getIndexReader().close();
sSearcher.close(); // this actually seems to be a no-op
IndexReader newIndexReader = IndexReader.open(newDirectory);
sSearcher = new IndexSearcher(newIndexReader);

Btw, isn't it bad practice anyway to have an unbounded cache? Are there any
plans to replace the HashMaps used for the innerCaches with an actual
size-bounded cache with some eviction policy (perhaps EhCache or something)
?

Thanks again,
TCK




On Mon, Dec 7, 2009 at 4:37 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> What this sounds like is that you're not really closing your
> readers even though you think you are. Sorting indeed uses up
> significant memory when it populates internal caches and keeps
> it around for later use (which is one of the reasons that warming
> queries matter). But if you really do close the reader, I'm pretty
> sure the memory should be GC-able.
>
> One thing that trips people up is IndexReader.reopen(). If it
> returns a reader different than the original, you *must* close the
> old one. If you don't, the old reader is still hanging around and
> memory won't be returne.... An example from the Javadocs...
>
>  IndexReader reader = ...
>  ...
>  IndexReader new = r.reopen();
>  if (new != reader) {
>   ...     // reader was reopened
>   reader.close();
>  }
>  reader = new;
>  ...
>
>
> If this is irrelevant, could you post your close/open
>
> code?
>
> HTH
>
> Erick
>
>
> On Mon, Dec 7, 2009 at 4:27 PM, TCK <moonwatcher32329@gmail.com> wrote:
>
> > Hi,
> > I'm having heap memory issues when I do lucene queries involving sorting
> by
> > a string field. Such queries seem to load a lot of data in to the heap.
> > Moreover lucene seems to hold on to references to this data even after
> the
> > index reader has been closed and a full GC has been run. Some of the
> > consequences of this are that in my generational heap configuration a lot
> > of
> > memory gets promoted to tenured space each time I close the old index
> > reader
> > and after opening and querying using a new one, and the tenured space
> > eventually gets fragmented causing a lot of promotion failures resulting
> in
> > jvm hangs while the jvm does stop-the-world GCs.
> >
> > Does anyone know any workarounds to avoid these memory issues when doing
> > such lucene queries?
> >
> > My profiling showed that even after a full GC lucene is holding on to a
> lot
> > of references to field value data notably via the
> > FieldCacheImpl/ExtendedFieldCacheImpl. I noticed that the WeakHashMap
> > readerCaches are using unbounded HashMaps as the innerCaches and I used
> > reflection to replace these innerCaches with dummy empty HashMaps, but
> > still
> > I'm seeing the same behavior. I wondered if anyone has gone through these
> > same issues before and would offer any advice.
> >
> > Thanks a lot,
> > TCK
> >
>

--000325559cbae0efaf047a2a6b9f--

From java-user-return-43946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 08 00:38:48 2009
Return-Path: <java-user-return-43946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28056 invoked from network); 8 Dec 2009 00:38:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Dec 2009 00:38:48 -0000
Received: (qmail 44141 invoked by uid 500); 8 Dec 2009 00:38:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44065 invoked by uid 500); 8 Dec 2009 00:38:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44055 invoked by uid 99); 8 Dec 2009 00:38:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 00:38:44 +0000
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.217.225] (HELO mail-gx0-f225.google.com) (209.85.217.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 00:38:35 +0000
Received: by gxk25 with SMTP id 25so2533579gxk.5
        for <java-user@lucene.apache.org>; Mon, 07 Dec 2009 16:38:14 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.248.1 with SMTP id v1mr12565317ybh.306.1260232694130; Mon, 
	07 Dec 2009 16:38:14 -0800 (PST)
In-Reply-To: <17022a310912071348m85926b0vbc0687e6085e79b5@mail.gmail.com>
References: <17022a310912071327x6be7f6afjf45e0ab69269e47c@mail.gmail.com>
	 <359a92830912071337o3ed869dbv68576b704666b8df@mail.gmail.com>
	 <17022a310912071348m85926b0vbc0687e6085e79b5@mail.gmail.com>
Date: Mon, 7 Dec 2009 16:38:14 -0800
Message-ID: <660086cb0912071638h6c6e10e1u4899889bc9a4ed74@mail.gmail.com>
Subject: Re: heap memory issues when sorting by a string field
From: Tom Hill <solr-list@worldware.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd694d61167da047a2ccac8
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd694d61167da047a2ccac8
Content-Type: text/plain; charset=ISO-8859-1

Hi -

If I understand correctly, WeakHashMap does not free the memory for the
value (cached data) when the key is nulled, or even when the key is garbage
collected.

It requires one more step: a method on WeakHashMap must be called to allow
it to release its hard reference to the cached data. It appears that most
methods in WeakHashMap end up calling expungeStaleEntries, which will clear
the hard reference. But you have to call some method on the map, before the
memory is eligible for garbage collection.

So it requires four stages to free the cached data. Null the key; A GC to
release the weak reference to the key; A call to some method on the map;
Then the next GC cycle should free the value.

So it seems possible that you could end up with double memory usage for a
time. If you don't have a GC between the time that you close the old reader,
and you start to load the field cache entry for the next reader, then the
key may still be hanging around uncollected.

At that point, it may run a GC when you allocate the new cache, but that's
only the first GC. It can't free the cached data until after the next call
to expungeStaleEntries, so for a while you have both caches around.

This extra usage could cause things to move into tenured space. Could this
be causing your problem?

Workaround would be to cause some method to be called on the WeakHashMap.
You don't want to call get(), since that will try to populate the cache.
Maybe if you tried putting a small value to the cache, and doing a GC, and
see if your memory drops then.


Tom



On Mon, Dec 7, 2009 at 1:48 PM, TCK <moonwatcher32329@gmail.com> wrote:

> Thanks for the response. But I'm definitely calling close() on the old
> reader and opening a new one (not using reopen). Also, to simplify the
> analysis, I did my test with a single-threaded requester to eliminate any
> concurrency issues.
>
> I'm doing:
> sSearcher.getIndexReader().close();
> sSearcher.close(); // this actually seems to be a no-op
> IndexReader newIndexReader = IndexReader.open(newDirectory);
> sSearcher = new IndexSearcher(newIndexReader);
>
> Btw, isn't it bad practice anyway to have an unbounded cache? Are there any
> plans to replace the HashMaps used for the innerCaches with an actual
> size-bounded cache with some eviction policy (perhaps EhCache or something)
> ?
>
> Thanks again,
> TCK
>
>
>
>
> On Mon, Dec 7, 2009 at 4:37 PM, Erick Erickson <erickerickson@gmail.com
> >wrote:
>
> > What this sounds like is that you're not really closing your
> > readers even though you think you are. Sorting indeed uses up
> > significant memory when it populates internal caches and keeps
> > it around for later use (which is one of the reasons that warming
> > queries matter). But if you really do close the reader, I'm pretty
> > sure the memory should be GC-able.
> >
> > One thing that trips people up is IndexReader.reopen(). If it
> > returns a reader different than the original, you *must* close the
> > old one. If you don't, the old reader is still hanging around and
> > memory won't be returne.... An example from the Javadocs...
> >
> >  IndexReader reader = ...
> >  ...
> >  IndexReader new = r.reopen();
> >  if (new != reader) {
> >   ...     // reader was reopened
> >   reader.close();
> >  }
> >  reader = new;
> >  ...
> >
> >
> > If this is irrelevant, could you post your close/open
> >
> > code?
> >
> > HTH
> >
> > Erick
> >
> >
> > On Mon, Dec 7, 2009 at 4:27 PM, TCK <moonwatcher32329@gmail.com> wrote:
> >
> > > Hi,
> > > I'm having heap memory issues when I do lucene queries involving
> sorting
> > by
> > > a string field. Such queries seem to load a lot of data in to the heap.
> > > Moreover lucene seems to hold on to references to this data even after
> > the
> > > index reader has been closed and a full GC has been run. Some of the
> > > consequences of this are that in my generational heap configuration a
> lot
> > > of
> > > memory gets promoted to tenured space each time I close the old index
> > > reader
> > > and after opening and querying using a new one, and the tenured space
> > > eventually gets fragmented causing a lot of promotion failures
> resulting
> > in
> > > jvm hangs while the jvm does stop-the-world GCs.
> > >
> > > Does anyone know any workarounds to avoid these memory issues when
> doing
> > > such lucene queries?
> > >
> > > My profiling showed that even after a full GC lucene is holding on to a
> > lot
> > > of references to field value data notably via the
> > > FieldCacheImpl/ExtendedFieldCacheImpl. I noticed that the WeakHashMap
> > > readerCaches are using unbounded HashMaps as the innerCaches and I used
> > > reflection to replace these innerCaches with dummy empty HashMaps, but
> > > still
> > > I'm seeing the same behavior. I wondered if anyone has gone through
> these
> > > same issues before and would offer any advice.
> > >
> > > Thanks a lot,
> > > TCK
> > >
> >
>

--000e0cd694d61167da047a2ccac8--

From java-user-return-43947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 08 00:45:07 2009
Return-Path: <java-user-return-43947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31743 invoked from network); 8 Dec 2009 00:45:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Dec 2009 00:45:07 -0000
Received: (qmail 52050 invoked by uid 500); 8 Dec 2009 00:45:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51961 invoked by uid 500); 8 Dec 2009 00:45:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51951 invoked by uid 99); 8 Dec 2009 00:45:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 00:45:04 +0000
X-ASF-Spam-Status: No, hits=-2.8 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.223.196 as permitted sender)
Received: from [209.85.223.196] (HELO mail-iw0-f196.google.com) (209.85.223.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 00:45:02 +0000
Received: by iwn34 with SMTP id 34so3399375iwn.21
        for <java-user@lucene.apache.org>; Mon, 07 Dec 2009 16:44:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=POGz4Cg5L4Iv23Ey0JDgamU7CBCsjCgbk/qkWSuvw40=;
        b=M20cXOO9J9oDKac5eBa+gsGX04Pg6IZKc0lxQnoPgdGhIXx3ugObRfSKxDl0ExpAe+
         JMVoM4ADfgF9ux8Ht5E/tBUHiBwUoXYGXNVNZ6bN/jF0gcOqrOhdeWRjjfArYbUZIwXz
         7dFUOizVpiMw34j5QYQzvRgdVzo/vc++VVtLk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=T1a8mLh8AdmVGN1WKDaOP4dVRHReZHdE0GSQkt4o3bVCuFJbfsVTiAi+/YCwRQPdKf
         MSrByZgJY+BeRkJZHN4j9MLM+rghB6rcZUiwpcPlKQkh957r5NjSkunAQ6I/0eyRK6op
         3KJXYZPBkzbLOortcWXeWDblUGbXifdfM3cFI=
MIME-Version: 1.0
Received: by 10.231.121.93 with SMTP id g29mr958161ibr.13.1260233081744; Mon, 
	07 Dec 2009 16:44:41 -0800 (PST)
In-Reply-To: <660086cb0912071638h6c6e10e1u4899889bc9a4ed74@mail.gmail.com>
References: <17022a310912071327x6be7f6afjf45e0ab69269e47c@mail.gmail.com>
	 <359a92830912071337o3ed869dbv68576b704666b8df@mail.gmail.com>
	 <17022a310912071348m85926b0vbc0687e6085e79b5@mail.gmail.com>
	 <660086cb0912071638h6c6e10e1u4899889bc9a4ed74@mail.gmail.com>
Date: Mon, 7 Dec 2009 16:44:41 -0800
Message-ID: <85d3c3b60912071644x57dba746r49da93a63887039@mail.gmail.com>
Subject: Re: heap memory issues when sorting by a string field
From: Jason Rutherglen <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

I wonder if Google Collections (even though we don't use third party
libraries) concurrent map, which supports weak keys, handles the
removal of weakly referenced keys in a more elegant way than Java's
WeakHashMap?

On Mon, Dec 7, 2009 at 4:38 PM, Tom Hill <solr-list@worldware.com> wrote:
> Hi -
>
> If I understand correctly, WeakHashMap does not free the memory for the
> value (cached data) when the key is nulled, or even when the key is garba=
ge
> collected.
>
> It requires one more step: a method on WeakHashMap must be called to allo=
w
> it to release its hard reference to the cached data. It appears that most
> methods in WeakHashMap end up calling expungeStaleEntries, which will cle=
ar
> the hard reference. But you have to call some method on the map, before t=
he
> memory is eligible for garbage collection.
>
> So it requires four stages to free the cached data. Null the key; A GC to
> release the weak reference to the key; A call to some method on the map;
> Then the next GC cycle should free the value.
>
> So it seems possible that you could end up with double memory usage for a
> time. If you don't have a GC between the time that you close the old read=
er,
> and you start to load the field cache entry for the next reader, then the
> key may still be hanging around uncollected.
>
> At that point, it may run a GC when you allocate the new cache, but that'=
s
> only the first GC. It can't free the cached data until after the next cal=
l
> to expungeStaleEntries, so for a while you have both caches around.
>
> This extra usage could cause things to move into tenured space. Could thi=
s
> be causing your problem?
>
> Workaround would be to cause some method to be called on the WeakHashMap.
> You don't want to call get(), since that will try to populate the cache.
> Maybe if you tried putting a small value to the cache, and doing a GC, an=
d
> see if your memory drops then.
>
>
> Tom
>
>
>
> On Mon, Dec 7, 2009 at 1:48 PM, TCK <moonwatcher32329@gmail.com> wrote:
>
>> Thanks for the response. But I'm definitely calling close() on the old
>> reader and opening a new one (not using reopen). Also, to simplify the
>> analysis, I did my test with a single-threaded requester to eliminate an=
y
>> concurrency issues.
>>
>> I'm doing:
>> sSearcher.getIndexReader().close();
>> sSearcher.close(); // this actually seems to be a no-op
>> IndexReader newIndexReader =3D IndexReader.open(newDirectory);
>> sSearcher =3D new IndexSearcher(newIndexReader);
>>
>> Btw, isn't it bad practice anyway to have an unbounded cache? Are there =
any
>> plans to replace the HashMaps used for the innerCaches with an actual
>> size-bounded cache with some eviction policy (perhaps EhCache or somethi=
ng)
>> ?
>>
>> Thanks again,
>> TCK
>>
>>
>>
>>
>> On Mon, Dec 7, 2009 at 4:37 PM, Erick Erickson <erickerickson@gmail.com
>> >wrote:
>>
>> > What this sounds like is that you're not really closing your
>> > readers even though you think you are. Sorting indeed uses up
>> > significant memory when it populates internal caches and keeps
>> > it around for later use (which is one of the reasons that warming
>> > queries matter). But if you really do close the reader, I'm pretty
>> > sure the memory should be GC-able.
>> >
>> > One thing that trips people up is IndexReader.reopen(). If it
>> > returns a reader different than the original, you *must* close the
>> > old one. If you don't, the old reader is still hanging around and
>> > memory won't be returne.... An example from the Javadocs...
>> >
>> > =A0IndexReader reader =3D ...
>> > =A0...
>> > =A0IndexReader new =3D r.reopen();
>> > =A0if (new !=3D reader) {
>> > =A0 ... =A0 =A0 // reader was reopened
>> > =A0 reader.close();
>> > =A0}
>> > =A0reader =3D new;
>> > =A0...
>> >
>> >
>> > If this is irrelevant, could you post your close/open
>> >
>> > code?
>> >
>> > HTH
>> >
>> > Erick
>> >
>> >
>> > On Mon, Dec 7, 2009 at 4:27 PM, TCK <moonwatcher32329@gmail.com> wrote=
:
>> >
>> > > Hi,
>> > > I'm having heap memory issues when I do lucene queries involving
>> sorting
>> > by
>> > > a string field. Such queries seem to load a lot of data in to the he=
ap.
>> > > Moreover lucene seems to hold on to references to this data even aft=
er
>> > the
>> > > index reader has been closed and a full GC has been run. Some of the
>> > > consequences of this are that in my generational heap configuration =
a
>> lot
>> > > of
>> > > memory gets promoted to tenured space each time I close the old inde=
x
>> > > reader
>> > > and after opening and querying using a new one, and the tenured spac=
e
>> > > eventually gets fragmented causing a lot of promotion failures
>> resulting
>> > in
>> > > jvm hangs while the jvm does stop-the-world GCs.
>> > >
>> > > Does anyone know any workarounds to avoid these memory issues when
>> doing
>> > > such lucene queries?
>> > >
>> > > My profiling showed that even after a full GC lucene is holding on t=
o a
>> > lot
>> > > of references to field value data notably via the
>> > > FieldCacheImpl/ExtendedFieldCacheImpl. I noticed that the WeakHashMa=
p
>> > > readerCaches are using unbounded HashMaps as the innerCaches and I u=
sed
>> > > reflection to replace these innerCaches with dummy empty HashMaps, b=
ut
>> > > still
>> > > I'm seeing the same behavior. I wondered if anyone has gone through
>> these
>> > > same issues before and would offer any advice.
>> > >
>> > > Thanks a lot,
>> > > TCK
>> > >
>> >
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 08 00:57:58 2009
Return-Path: <java-user-return-43948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34022 invoked from network); 8 Dec 2009 00:57:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Dec 2009 00:57:58 -0000
Received: (qmail 59158 invoked by uid 500); 8 Dec 2009 00:57:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59078 invoked by uid 500); 8 Dec 2009 00:57:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59068 invoked by uid 99); 8 Dec 2009 00:57:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 00:57:55 +0000
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.211.173] (HELO mail-yw0-f173.google.com) (209.85.211.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 00:57:46 +0000
Received: by ywh3 with SMTP id 3so4733623ywh.22
        for <java-user@lucene.apache.org>; Mon, 07 Dec 2009 16:57:25 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.80.16 with SMTP id d16mr12709014ybb.0.1260233845789; Mon, 
	07 Dec 2009 16:57:25 -0800 (PST)
In-Reply-To: <85d3c3b60912071644x57dba746r49da93a63887039@mail.gmail.com>
References: <17022a310912071327x6be7f6afjf45e0ab69269e47c@mail.gmail.com>
	 <359a92830912071337o3ed869dbv68576b704666b8df@mail.gmail.com>
	 <17022a310912071348m85926b0vbc0687e6085e79b5@mail.gmail.com>
	 <660086cb0912071638h6c6e10e1u4899889bc9a4ed74@mail.gmail.com>
	 <85d3c3b60912071644x57dba746r49da93a63887039@mail.gmail.com>
Date: Mon, 7 Dec 2009 16:57:25 -0800
Message-ID: <660086cb0912071657s55d70dffua8256282a8593a2a@mail.gmail.com>
Subject: Re: heap memory issues when sorting by a string field
From: Tom Hill <solr-list@worldware.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd3acf0b65518047a2d0e7d
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd3acf0b65518047a2d0e7d
Content-Type: text/plain; charset=ISO-8859-1

Hey, that's a nice little Class! I hadn't see it before. But it sounds like
the asynchronous cleanup might deal with the problem I mentioned above (but
I haven't looked at the code yet).

It's an apache license - but you mentioned something about no third party
libraries. Is that a policy for Lucene?

Thanks,

Tom


On Mon, Dec 7, 2009 at 4:44 PM, Jason Rutherglen <jason.rutherglen@gmail.com
> wrote:

> I wonder if Google Collections (even though we don't use third party
> libraries) concurrent map, which supports weak keys, handles the
> removal of weakly referenced keys in a more elegant way than Java's
> WeakHashMap?
>
> On Mon, Dec 7, 2009 at 4:38 PM, Tom Hill <solr-list@worldware.com> wrote:
> > Hi -
> >
> > If I understand correctly, WeakHashMap does not free the memory for the
> > value (cached data) when the key is nulled, or even when the key is
> garbage
> > collected.
> >
> > It requires one more step: a method on WeakHashMap must be called to
> allow
> > it to release its hard reference to the cached data. It appears that most
> > methods in WeakHashMap end up calling expungeStaleEntries, which will
> clear
> > the hard reference. But you have to call some method on the map, before
> the
> > memory is eligible for garbage collection.
> >
> > So it requires four stages to free the cached data. Null the key; A GC to
> > release the weak reference to the key; A call to some method on the map;
> > Then the next GC cycle should free the value.
> >
> > So it seems possible that you could end up with double memory usage for a
> > time. If you don't have a GC between the time that you close the old
> reader,
> > and you start to load the field cache entry for the next reader, then the
> > key may still be hanging around uncollected.
> >
> > At that point, it may run a GC when you allocate the new cache, but
> that's
> > only the first GC. It can't free the cached data until after the next
> call
> > to expungeStaleEntries, so for a while you have both caches around.
> >
> > This extra usage could cause things to move into tenured space. Could
> this
> > be causing your problem?
> >
> > Workaround would be to cause some method to be called on the WeakHashMap.
> > You don't want to call get(), since that will try to populate the cache.
> > Maybe if you tried putting a small value to the cache, and doing a GC,
> and
> > see if your memory drops then.
> >
> >
> > Tom
> >
> >
> >
> > On Mon, Dec 7, 2009 at 1:48 PM, TCK <moonwatcher32329@gmail.com> wrote:
> >
> >> Thanks for the response. But I'm definitely calling close() on the old
> >> reader and opening a new one (not using reopen). Also, to simplify the
> >> analysis, I did my test with a single-threaded requester to eliminate
> any
> >> concurrency issues.
> >>
> >> I'm doing:
> >> sSearcher.getIndexReader().close();
> >> sSearcher.close(); // this actually seems to be a no-op
> >> IndexReader newIndexReader = IndexReader.open(newDirectory);
> >> sSearcher = new IndexSearcher(newIndexReader);
> >>
> >> Btw, isn't it bad practice anyway to have an unbounded cache? Are there
> any
> >> plans to replace the HashMaps used for the innerCaches with an actual
> >> size-bounded cache with some eviction policy (perhaps EhCache or
> something)
> >> ?
> >>
> >> Thanks again,
> >> TCK
> >>
> >>
> >>
> >>
> >> On Mon, Dec 7, 2009 at 4:37 PM, Erick Erickson <erickerickson@gmail.com
> >> >wrote:
> >>
> >> > What this sounds like is that you're not really closing your
> >> > readers even though you think you are. Sorting indeed uses up
> >> > significant memory when it populates internal caches and keeps
> >> > it around for later use (which is one of the reasons that warming
> >> > queries matter). But if you really do close the reader, I'm pretty
> >> > sure the memory should be GC-able.
> >> >
> >> > One thing that trips people up is IndexReader.reopen(). If it
> >> > returns a reader different than the original, you *must* close the
> >> > old one. If you don't, the old reader is still hanging around and
> >> > memory won't be returne.... An example from the Javadocs...
> >> >
> >> >  IndexReader reader = ...
> >> >  ...
> >> >  IndexReader new = r.reopen();
> >> >  if (new != reader) {
> >> >   ...     // reader was reopened
> >> >   reader.close();
> >> >  }
> >> >  reader = new;
> >> >  ...
> >> >
> >> >
> >> > If this is irrelevant, could you post your close/open
> >> >
> >> > code?
> >> >
> >> > HTH
> >> >
> >> > Erick
> >> >
> >> >
> >> > On Mon, Dec 7, 2009 at 4:27 PM, TCK <moonwatcher32329@gmail.com>
> wrote:
> >> >
> >> > > Hi,
> >> > > I'm having heap memory issues when I do lucene queries involving
> >> sorting
> >> > by
> >> > > a string field. Such queries seem to load a lot of data in to the
> heap.
> >> > > Moreover lucene seems to hold on to references to this data even
> after
> >> > the
> >> > > index reader has been closed and a full GC has been run. Some of the
> >> > > consequences of this are that in my generational heap configuration
> a
> >> lot
> >> > > of
> >> > > memory gets promoted to tenured space each time I close the old
> index
> >> > > reader
> >> > > and after opening and querying using a new one, and the tenured
> space
> >> > > eventually gets fragmented causing a lot of promotion failures
> >> resulting
> >> > in
> >> > > jvm hangs while the jvm does stop-the-world GCs.
> >> > >
> >> > > Does anyone know any workarounds to avoid these memory issues when
> >> doing
> >> > > such lucene queries?
> >> > >
> >> > > My profiling showed that even after a full GC lucene is holding on
> to a
> >> > lot
> >> > > of references to field value data notably via the
> >> > > FieldCacheImpl/ExtendedFieldCacheImpl. I noticed that the
> WeakHashMap
> >> > > readerCaches are using unbounded HashMaps as the innerCaches and I
> used
> >> > > reflection to replace these innerCaches with dummy empty HashMaps,
> but
> >> > > still
> >> > > I'm seeing the same behavior. I wondered if anyone has gone through
> >> these
> >> > > same issues before and would offer any advice.
> >> > >
> >> > > Thanks a lot,
> >> > > TCK
> >> > >
> >> >
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd3acf0b65518047a2d0e7d--

From java-user-return-43949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 08 00:58:33 2009
Return-Path: <java-user-return-43949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34168 invoked from network); 8 Dec 2009 00:58:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Dec 2009 00:58:33 -0000
Received: (qmail 61004 invoked by uid 500); 8 Dec 2009 00:58:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60915 invoked by uid 500); 8 Dec 2009 00:58:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60905 invoked by uid 99); 8 Dec 2009 00:58:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 00:58:31 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of brianli.cas@gmail.com designates 209.85.212.178 as permitted sender)
Received: from [209.85.212.178] (HELO mail-vw0-f178.google.com) (209.85.212.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 00:58:23 +0000
Received: by vws8 with SMTP id 8so2197111vws.21
        for <java-user@lucene.apache.org>; Mon, 07 Dec 2009 16:58:02 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=/WxKvrbUQpCxPDoX1BI6nX7IIHONbWEFUIwgPEDsfDg=;
        b=ZkP22Vxfxp7C7wo9KTHJXL8pfHELXOJlRI6UmuZYPQrygoXBiluJhC19q+lHzt4S0j
         idWUGwbFqCnytyi1firN9vjwUXqvDnFKOhC7/QAzKeezTiOXJ9Bcj1R3RFvq4+86seLB
         uKfYMtwhMSTjmf0FkL8XuVgPjbGKpqnLo1d9U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=x9wbDpOL3qwDDbTvj507kE8hrRq5k4qWNIFKmD3pfJWsXwyPS049HOEe9bu9vPdoFd
         AJpF0hh66+lXIHVOr6CJyw0ZtRTPjQktilzSjUNjOyMkkCvGumkrJ9VDQu9nVBjaU1Yv
         2uswOFEpgxG6PzRuDZMsgMOb+2exoTu4PuUUg=
MIME-Version: 1.0
Received: by 10.220.122.213 with SMTP id m21mr8687229vcr.86.1260233881908; 
	Mon, 07 Dec 2009 16:58:01 -0800 (PST)
Date: Tue, 8 Dec 2009 08:58:01 +0800
Message-ID: <d5162cdb0912071658j3511a811wed3df169c27cf27f@mail.gmail.com>
Subject: Lucene-3.0.0 web demo problem
From: brian li <brianli.cas@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I was checking out Lucene-3.0.0, and bumped into one little problem.

I followed the steps in http://lucene.apache.org/java/3_0_0/demo3.html
to run the basic web demo of lucene. Then I got an error message that
in result.jsp QueryParser(String, Analyzer) was undefined. I went to
the source code in org.apache.lucene.queryparser.QueryParser and found
that QueryParser had only one public constructor which was
QueryParser(Version matchVersion, String f, Analyzer a). I changed the
function parameters in the call in result.jsp accordingly and it
worked.

I am not quite sure who can change the web demo code, so I just post
it here. Just think newbie like me can enjoy one less bump trying
this.

Regards,
Brian

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 08 03:55:05 2009
Return-Path: <java-user-return-43950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62235 invoked from network); 8 Dec 2009 03:55:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Dec 2009 03:55:05 -0000
Received: (qmail 75950 invoked by uid 500); 8 Dec 2009 03:55:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75850 invoked by uid 500); 8 Dec 2009 03:55:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75800 invoked by uid 99); 8 Dec 2009 03:55:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 03:55:00 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.222.176 as permitted sender)
Received: from [209.85.222.176] (HELO mail-pz0-f176.google.com) (209.85.222.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 03:54:58 +0000
Received: by pzk6 with SMTP id 6so4382770pzk.29
        for <java-user@lucene.apache.org>; Mon, 07 Dec 2009 19:54:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=68lXZmJxCtmHOQcBFDi4D4JdDFPc4iuXn3ZabGfUUDA=;
        b=stw2RbqyBoLZprzdjacE5SUoNcGX3m7l/d17UFEQOgd02S5FuReYAS4WcAMKWdRiN8
         K+lHoZpMEWp4ILaFFiBNAgwOS+t9B15R48rwICDBkul1dMPTXq8DzTmStXyTgJzSm1xo
         bxg8gUxTdZc5GlTUUlsIrRg+uoI7/4TFhjkDU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=TvOcPmKXih9OTXdXhgyrWkG2nQdtnHU5pLQoj+TlEDfifPHnHWc+nTQO8YbkO71OAp
         +a2uXOzncBo2/aWvzAHktk0uCRrWYqQ2otfstgCazn/qVO5zzMA8X0MaIZOv5qRolkdv
         NkwyA8inBG/2uMiNUaCWUFw+Iw8jn8jqbUaOg=
MIME-Version: 1.0
Received: by 10.114.237.31 with SMTP id k31mr13801110wah.183.1260244478107; 
	Mon, 07 Dec 2009 19:54:38 -0800 (PST)
In-Reply-To: <d5162cdb0912071658j3511a811wed3df169c27cf27f@mail.gmail.com>
References: <d5162cdb0912071658j3511a811wed3df169c27cf27f@mail.gmail.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Mon, 7 Dec 2009 22:54:18 -0500
Message-ID: <8f0ad1f30912071954u5c956b94yeee3bf572505c125@mail.gmail.com>
Subject: Re: Lucene-3.0.0 web demo problem
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64ba08272a0a6047a2f88ec

--0016e64ba08272a0a6047a2f88ec
Content-Type: text/plain; charset=UTF-8

thanks for reporting this, i opened a jira issue at
https://issues.apache.org/jira/browse/LUCENE-2132

On Mon, Dec 7, 2009 at 7:58 PM, brian li <brianli.cas@gmail.com> wrote:

> Hi,
>
> I was checking out Lucene-3.0.0, and bumped into one little problem.
>
> I followed the steps in http://lucene.apache.org/java/3_0_0/demo3.html
> to run the basic web demo of lucene. Then I got an error message that
> in result.jsp QueryParser(String, Analyzer) was undefined. I went to
> the source code in org.apache.lucene.queryparser.QueryParser and found
> that QueryParser had only one public constructor which was
> QueryParser(Version matchVersion, String f, Analyzer a). I changed the
> function parameters in the call in result.jsp accordingly and it
> worked.
>
> I am not quite sure who can change the web demo code, so I just post
> it here. Just think newbie like me can enjoy one less bump trying
> this.
>
> Regards,
> Brian
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Robert Muir
rcmuir@gmail.com

--0016e64ba08272a0a6047a2f88ec--

From java-user-return-43951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 08 06:17:40 2009
Return-Path: <java-user-return-43951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51809 invoked from network); 8 Dec 2009 06:17:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Dec 2009 06:17:40 -0000
Received: (qmail 91473 invoked by uid 500); 8 Dec 2009 06:17:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91389 invoked by uid 500); 8 Dec 2009 06:17:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91379 invoked by uid 99); 8 Dec 2009 06:17:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 06:17:36 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of brianli.cas@gmail.com designates 209.85.212.178 as permitted sender)
Received: from [209.85.212.178] (HELO mail-vw0-f178.google.com) (209.85.212.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 06:17:28 +0000
Received: by vws8 with SMTP id 8so2272126vws.21
        for <java-user@lucene.apache.org>; Mon, 07 Dec 2009 22:17:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=Jpr4SZFkYiKcrK06T9igIEQe84mxCnfR5dM9awRjstw=;
        b=ZaWkPdoGzw1MZSryYxL2P9yi/5hg0rqdmv1KySRAEV35cdUD9yDVpgcX3mH+nrtOgA
         /4oDkoiV17J8YuH51tIKNoj0EChyd5imDE1/fne8wcbfSelxMT3VIQSlyhTpq0zjDLln
         Fgmdf6Lfprhwx5l2pWC0QJnnlDfKek8lknbDs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=a5Cu6UmbZLQ8fQVP7BetP2CPtphRodMu5I4SHWLuQRkkDF4zM60XumnaLOngo6+djM
         EsTLsqwe8kGGzILp9+y/3dMEoQil7CzPM38Z0cLgQHSORHtiLoFFgqQvxQ97yJjJrK08
         BNzGgW6uTkjsxnsn3nOK0cDIcwelb2z3NY83Y=
MIME-Version: 1.0
Received: by 10.220.123.167 with SMTP id p39mr1223028vcr.22.1260253027246; 
	Mon, 07 Dec 2009 22:17:07 -0800 (PST)
In-Reply-To: <8f0ad1f30912071954u5c956b94yeee3bf572505c125@mail.gmail.com>
References: <d5162cdb0912071658j3511a811wed3df169c27cf27f@mail.gmail.com>
	 <8f0ad1f30912071954u5c956b94yeee3bf572505c125@mail.gmail.com>
Date: Tue, 8 Dec 2009 14:17:07 +0800
Message-ID: <d5162cdb0912072217s6230835cr82779b1612859a60@mail.gmail.com>
Subject: Re: Lucene-3.0.0 web demo problem
From: brian li <brianli.cas@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks. And now I know where to go if there are more issues :)

On Tue, Dec 8, 2009 at 11:54 AM, Robert Muir <rcmuir@gmail.com> wrote:
> thanks for reporting this, i opened a jira issue at
> https://issues.apache.org/jira/browse/LUCENE-2132
>
> On Mon, Dec 7, 2009 at 7:58 PM, brian li <brianli.cas@gmail.com> wrote:
>
>> Hi,
>>
>> I was checking out Lucene-3.0.0, and bumped into one little problem.
>>
>> I followed the steps in http://lucene.apache.org/java/3_0_0/demo3.html
>> to run the basic web demo of lucene. Then I got an error message that
>> in result.jsp QueryParser(String, Analyzer) was undefined. I went to
>> the source code in org.apache.lucene.queryparser.QueryParser and found
>> that QueryParser had only one public constructor which was
>> QueryParser(Version matchVersion, String f, Analyzer a). I changed the
>> function parameters in the call in result.jsp accordingly and it
>> worked.
>>
>> I am not quite sure who can change the web demo code, so I just post
>> it here. Just think newbie like me can enjoy one less bump trying
>> this.
>>
>> Regards,
>> Brian
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 08 06:26:01 2009
Return-Path: <java-user-return-43952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55602 invoked from network); 8 Dec 2009 06:26:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Dec 2009 06:26:01 -0000
Received: (qmail 2788 invoked by uid 500); 8 Dec 2009 06:25:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2709 invoked by uid 500); 8 Dec 2009 06:25:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2699 invoked by uid 99); 8 Dec 2009 06:25:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 06:25:59 +0000
X-ASF-Spam-Status: No, hits=-2.0 required=5.0
	tests=BAYES_00,RCVD_IN_SORBS_WEB
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [67.195.8.215] (HELO web110315.mail.gq1.yahoo.com) (67.195.8.215)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 08 Dec 2009 06:25:57 +0000
Received: (qmail 58042 invoked by uid 60001); 8 Dec 2009 06:25:35 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1260253535; bh=6uQ06jWfVvh3SiC27eNcV8VtDkTc1NnvkBIwFv7jqBM=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=JcHMU7ffCifk7xGzdeHKatFgRtHrwccG347vtYj+z1Wr8WkkRCN+01iKsfJJLp2vo2JwebSZVgTjnEuD9igCqWMOVHiEsXQNj3E9XmFUSDjdr4fPwkMxp8oTsTOOAcdaQnrLIn0QMspEICUWwO/XQ841P7xq3b4rvD5GvpGvBP8=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=VwiOw1GhOKFAzS3P+JZW6MA8eIGCYc0pmcPM7XhUgDrS4xUWZLw5ZYDD8gxjJJH0rY+Ivvhq9saIwHzVb1Uf3dY4wiWT0ubTou1ERcw32Q42OONnOs331Rh8P9TABJeL5Yf+xJctdTt+WI1R4Sl/CbGd9/xBquQAWcakKm+6JG4=;
Message-ID: <824410.56949.qm@web110315.mail.gq1.yahoo.com>
X-YMail-OSG: 4XWcfjgVM1mvutFfZX.gnHosmJNOODAi8hYAMmpcQz1Kw4c4uo74vlvQSVm_bCwXJItQQDZWM2ynl4xUveQ8sAyyjSdWW0rWf161Gnjmm6GlpWclGiKFou4G3wJZdmO4k7IMtP3we4qqS2epPkgi6g.9wMpdFX1LEIvPrkEeIH5V7Z_JN0UYKHY231Qk5KikbSX1ZqJjzyn_diosZJePSUlDCrJW6_doWxGQta9a4oje2WwKjk2iwCetXY3bhpCkq2oMMSMgxFfyYHrPQAZ81Q--
Received: from [116.197.178.83] by web110315.mail.gq1.yahoo.com via HTTP; Mon, 07 Dec 2009 22:25:35 PST
X-Mailer: YahooMailRC/240.3 YahooMailWebService/0.8.100.260964
Date: Mon, 7 Dec 2009 22:25:35 -0800 (PST)
From: Cool The Breezer <techcool.kumar@yahoo.com>
Subject: IndexWriter creates multiple .cfs files
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Hello Group,
                  I am continuously updating an index and at the same time searcher also searches the index, which resulted in multiple .cfs files for each commit by IndexWriter. I am not sure whether this is an expected behavior or I need to merge each time after IndexWriter commits. In between the writer's commit, I reopen the IndexReader but still .cfs files keep on increasing. I would like to have one .cfs file which can be reopened frequently by reader and at the same time progressive commit by writer. Is it possible?

- RB


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 08 06:31:24 2009
Return-Path: <java-user-return-43953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59983 invoked from network); 8 Dec 2009 06:31:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Dec 2009 06:31:24 -0000
Received: (qmail 12976 invoked by uid 500); 8 Dec 2009 06:31:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12879 invoked by uid 500); 8 Dec 2009 06:31:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12867 invoked by uid 99); 8 Dec 2009 06:31:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 06:31:21 +0000
X-ASF-Spam-Status: No, hits=-2.8 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.160.46 as permitted sender)
Received: from [209.85.160.46] (HELO mail-pw0-f46.google.com) (209.85.160.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 06:31:19 +0000
Received: by pwj16 with SMTP id 16so808440pwj.5
        for <java-user@lucene.apache.org>; Mon, 07 Dec 2009 22:30:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=XHelyB5en2cCRzdHV2acT04GW1Dfov4YKeoCVn8DzoE=;
        b=NtPoMre4u0SiFnXktlwL9JVhP8RE1yrwVAjl/pz9dVxv+uw75EOo+m2Iy/6mqEKQTt
         pF83k6995jYIOFdh3oEm6e3DY3GlJKn5WiGyiXnokETXziRNJtM8HnAs+6HLs5TPaNal
         aA+Sh5uCkpAadpK1Mkge6VyRNju6rQMTnnSdY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=TVx17A/Z5T9e3esX39odEKCSf73ZfwMdrk0zDYT1l1zcQaKJx1HSY3+kiR82yIyg8w
         53Q5j2WYPm+eqcd0ZFdTZ4TPXpQiDIt3HAMN/aXjfGsk9gBk+PoJQ8Zyn/ge+RXNt1dR
         gKVbIjk+nzlkF0QyWX57KV3q8ffbuVZJmMDLE=
MIME-Version: 1.0
Received: by 10.140.194.19 with SMTP id r19mr432925rvf.281.1260253859207; Mon, 
	07 Dec 2009 22:30:59 -0800 (PST)
In-Reply-To: <824410.56949.qm@web110315.mail.gq1.yahoo.com>
References: <824410.56949.qm@web110315.mail.gq1.yahoo.com>
Date: Mon, 7 Dec 2009 22:30:59 -0800
Message-ID: <85d3c3b60912072230ida12c40m5594f97f24aaa398@mail.gmail.com>
Subject: Re: IndexWriter creates multiple .cfs files
From: Jason Rutherglen <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

RB,

That's expected behavior, each .cfs corresponds to all of a
segment's files. You could write your own directory
implementation that underneath writes to a single file. It's
usually good to present what you're trying to accomplish (i.e.
the why).

Jason

On Mon, Dec 7, 2009 at 10:25 PM, Cool The Breezer
<techcool.kumar@yahoo.com> wrote:
> Hello Group,
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0I am continuously updating an index an=
d at the same time searcher also searches the index, which resulted in mult=
iple .cfs files for each commit by IndexWriter. I am not sure whether this =
is an expected behavior or I need to merge each time after IndexWriter comm=
its. In between the writer's commit, I reopen the IndexReader but still .cf=
s files keep on increasing. I would like to have one .cfs file which can be=
 reopened frequently by reader and at the same time progressive commit by w=
riter. Is it possible?
>
> - RB
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 08 06:43:32 2009
Return-Path: <java-user-return-43954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70871 invoked from network); 8 Dec 2009 06:43:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Dec 2009 06:43:32 -0000
Received: (qmail 23244 invoked by uid 500); 8 Dec 2009 06:43:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23157 invoked by uid 500); 8 Dec 2009 06:43:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23147 invoked by uid 99); 8 Dec 2009 06:43:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 06:43:29 +0000
X-ASF-Spam-Status: No, hits=-2.0 required=5.0
	tests=BAYES_00,RCVD_IN_SORBS_WEB
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [67.195.8.202] (HELO web110302.mail.gq1.yahoo.com) (67.195.8.202)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 08 Dec 2009 06:43:27 +0000
Received: (qmail 86910 invoked by uid 60001); 8 Dec 2009 06:43:06 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1260254586; bh=Ps0wxubx8Sjbj6OL8+PYpdYvOLXRrAtE7HhPl6NjJ5I=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=VFthC0iCrGZyvJDZSBmuOkfRUXl6KYBoz0vf+AevXitKxJmZQsSiOFJGnWGezH0gkJcB/fNExIRhaNU0RztyEimgM9rhbMxmbTg19JnIhy+ZDY20xC1zu+YExmbVOmABPDmX+Hp4MAuR3AUB4D5VJzGkaTlkQAgMCwodoHb6hkI=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=UtjRUOibGRwWXFgT5tMugVbhOxAYvuAiyfoZfcyBMg+M2pBhapHnMaKHT4qp8wJj6Qru1a3k1p+Ox+thdiNmhHe7ikyhC/ymBMA3wRIGNoy+TVx/OtC8hakl2E9f+URdU4CZjxZ+SxhAo+2XlKSMEzkAOeCBoSqDvbHuXaGjclE=;
Message-ID: <758919.85996.qm@web110302.mail.gq1.yahoo.com>
X-YMail-OSG: p_upJzYVM1kmdD_faRYqIUdSaGJDy10q2096XUwYeZxUsz7Qtmj39DkFlQbsF97nEDB3WLbdiRdoH_6L2OG4NgLfNBuoa9D1b7kuC.rY.jIzoinfItmTIqDWgWr9vG4D2HXJtKELrwPPmtXVIjZutPITepBxKiuah5HQkhiqn8_wdJcaxCM4IznKMlJSadzDpQpSb8br7WgDygt93RBqZ.mTllpHktqAs5qXlVK0p5eIe3tcQ9YQJo_xr_AUnG_cCCb8D3ZmzK_tpk8tn0tZTFLHZmqhwCUpVG3H98Nfo3i4Y1nFUElVqdI-
Received: from [116.197.178.83] by web110302.mail.gq1.yahoo.com via HTTP; Mon, 07 Dec 2009 22:43:06 PST
X-Mailer: YahooMailRC/240.3 YahooMailWebService/0.8.100.260964
References: <824410.56949.qm@web110315.mail.gq1.yahoo.com> <85d3c3b60912072230ida12c40m5594f97f24aaa398@mail.gmail.com>
Date: Mon, 7 Dec 2009 22:43:06 -0800 (PST)
From: Cool The Breezer <techcool.kumar@yahoo.com>
Subject: Re: IndexWriter creates multiple .cfs files
To: java-user@lucene.apache.org
In-Reply-To: <85d3c3b60912072230ida12c40m5594f97f24aaa398@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Thanks Jason for quick reply and suggestion. I am definitely going to change directory implementation policy to have one .cfs file instead of hundreds in one directory. 

regards,
Ranjan


----- Original Message ----
From: Jason Rutherglen <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Sent: Tue, December 8, 2009 12:00:59 PM
Subject: Re: IndexWriter creates multiple .cfs files

RB,

That's expected behavior, each .cfs corresponds to all of a
segment's files. You could write your own directory
implementation that underneath writes to a single file. It's
usually good to present what you're trying to accomplish (i.e.
the why).

Jason

On Mon, Dec 7, 2009 at 10:25 PM, Cool The Breezer
<techcool.kumar@yahoo.com> wrote:
> Hello Group,
>                  I am continuously updating an index and at the same time searcher also searches the index, which resulted in multiple .cfs files for each commit by IndexWriter. I am not sure whether this is an expected behavior or I need to merge each time after IndexWriter commits. In between the writer's commit, I reopen the IndexReader but still .cfs files keep on increasing. I would like to have one .cfs file which can be reopened frequently by reader and at the same time progressive commit by writer. Is it possible?
>
> - RB
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 08 06:45:32 2009
Return-Path: <java-user-return-43955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71334 invoked from network); 8 Dec 2009 06:45:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Dec 2009 06:45:32 -0000
Received: (qmail 26233 invoked by uid 500); 8 Dec 2009 06:45:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26156 invoked by uid 500); 8 Dec 2009 06:45:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26146 invoked by uid 99); 8 Dec 2009 06:45:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 06:45:29 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 06:45:27 +0000
Received: from intrepid (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.8/8.13.8) with ESMTP id nB86iteN025656
	for <java-user@lucene.apache.org>; Tue, 8 Dec 2009 08:44:55 +0200
Received: from mobile.teamware.com ([212.226.92.17]) by nimitz.teamw.com with ESMTP
	 id m35dziws; 8 Dec 2009 08:44:00 +0200
Message-ID: <4B1DF5C9.5080109@teamware.com>
Date: Tue, 08 Dec 2009 17:44:25 +1100
From: Antony Bowesman <adb@teamware.com>
User-Agent: Thunderbird 2.0.0.19 (Windows/20081209)
MIME-Version: 1.0
To: Lucene User <java-user@lucene.apache.org>
Subject: TopFieldDocCollector and v3.0.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-3.0 (monkey.teamware.com [212.226.92.15]); Tue, 08 Dec 2009 08:44:55 +0200 (EET)
X-Teamware-Monkey-MailScanner-Information: Please contact the ISP for more information
X-Teamware-Monkey-MailScanner-ID: nB86iteN025656
X-Teamware-Monkey-MailScanner: Found to be clean
X-Teamware-Monkey-MailScanner-SpamScore: 1
X-Teamware-Monkey-MailScanner-From: adb@teamware.com
X-Old-Spam-Status: No

I'm on 2.3.2 and looking to move to 2.9.1 or 3.0.0

In 2.9.1 TopFieldDocCollector is

"Deprecated. Please use TopFieldCollector instead."

in 3.0.0 TopFieldCollector says

NOTE: This API is experimental and might change in incompatible ways in the next 
release

What is the suggested path for migrating TopFieldDocCollector usage?

Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 08 06:46:01 2009
Return-Path: <java-user-return-43956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71416 invoked from network); 8 Dec 2009 06:46:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Dec 2009 06:46:01 -0000
Received: (qmail 28016 invoked by uid 500); 8 Dec 2009 06:45:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27935 invoked by uid 500); 8 Dec 2009 06:45:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27925 invoked by uid 99); 8 Dec 2009 06:45:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 06:45:58 +0000
X-ASF-Spam-Status: No, hits=0.1 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of moonwatcher32329@gmail.com designates 209.85.218.222 as permitted sender)
Received: from [209.85.218.222] (HELO mail-bw0-f222.google.com) (209.85.218.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 06:45:56 +0000
Received: by bwz22 with SMTP id 22so4520490bwz.5
        for <java-user@lucene.apache.org>; Mon, 07 Dec 2009 22:45:34 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=z/ZQBLtL3YaZXJ30nERWWc++sE7+nVsccEM5mj73Cig=;
        b=jq2gU5pA1g3mKzGdE/iL6VFHiKURz1HFPdcq9LmU7CgtatN/s+tG40tBNo0NNrCWu9
         WfVa7YYMB+CyUMmssGRh/WeQldZpWdJISICZzXbmvrCceCUIx25+wddW63Jh8F7aQadt
         RZjwa3nkFx7R1EP6kh4jUih818dtF7w0CP9Jk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=lCiF9bHtrKh+5Pe33Gvbfu0m76v9XllmQ/XRq1tglPr2H/79DgFrNgj1NXY7mtTKpW
         VyWpZpIRyF69L80g1wDumm3j4AldF6ryYvgouaRpZvcMPPAq5XQqUQcn+emSJ2VvEP3v
         6fm2D56rlkI+NHgy/Qthk9eTgMss7qpS543DY=
MIME-Version: 1.0
Received: by 10.204.48.194 with SMTP id s2mr7966903bkf.210.1260254734490; Mon, 
	07 Dec 2009 22:45:34 -0800 (PST)
In-Reply-To: <660086cb0912071657s55d70dffua8256282a8593a2a@mail.gmail.com>
References: <17022a310912071327x6be7f6afjf45e0ab69269e47c@mail.gmail.com>
	 <359a92830912071337o3ed869dbv68576b704666b8df@mail.gmail.com>
	 <17022a310912071348m85926b0vbc0687e6085e79b5@mail.gmail.com>
	 <660086cb0912071638h6c6e10e1u4899889bc9a4ed74@mail.gmail.com>
	 <85d3c3b60912071644x57dba746r49da93a63887039@mail.gmail.com>
	 <660086cb0912071657s55d70dffua8256282a8593a2a@mail.gmail.com>
Date: Tue, 8 Dec 2009 01:45:34 -0500
Message-ID: <17022a310912072245q7b979758j13482b5282452322@mail.gmail.com>
Subject: Re: heap memory issues when sorting by a string field
From: TCK <moonwatcher32329@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000325556f5ac69ea3047a31ebca

--000325556f5ac69ea3047a31ebca
Content-Type: text/plain; charset=ISO-8859-1

Thanks for the feedback guys. The evidence I have collected does point to an
issue either in the java WeakHashMap implementation or in Lucene's use of
it. In particular, I used reflection to replace the WeakHashMap instances
with my own dummy Map that does a no-op for the put operation, and although
this caused tons more garbage to be created for each search query the CMS
executions always collected that garbage and brought down the tenured space
usage to a small value.

Before that, I tried calling clear() on the WeakHashMap instances and then
calling size() which calls expungeStaleEntries() but that didn't help. There
may be indeed be a case of double memory usage for a while (until enough CMS
executions have run) as Tom pointed out, but I don't fully understand what's
happenning yet.

Also, bizzarely during my introspection of the readerCache WeakHashMap
instances I found an instance of
org.apache.lucene.index.CompoundFileReader$CSIndexInput as a key. Looking at
the code I don't see how anything other than an IndexReader could possibly
get there, and this class certainly doesn't extend IndexReader. Any ideas?
:-) Maybe I need to get more sleep.

Btw, is searching with a sort by a text field not a common use-case of
lucene? I've been testing with only 1Gb indexes and I'm pretty sure there
are much larger indexes out there.

Cheers,
TCK





On Mon, Dec 7, 2009 at 7:57 PM, Tom Hill <solr-list@worldware.com> wrote:

> Hey, that's a nice little Class! I hadn't see it before. But it sounds like
> the asynchronous cleanup might deal with the problem I mentioned above (but
> I haven't looked at the code yet).
>
> It's an apache license - but you mentioned something about no third party
> libraries. Is that a policy for Lucene?
>
> Thanks,
>
> Tom
>
>
> On Mon, Dec 7, 2009 at 4:44 PM, Jason Rutherglen <
> jason.rutherglen@gmail.com
> > wrote:
>
> > I wonder if Google Collections (even though we don't use third party
> > libraries) concurrent map, which supports weak keys, handles the
> > removal of weakly referenced keys in a more elegant way than Java's
> > WeakHashMap?
> >
> > On Mon, Dec 7, 2009 at 4:38 PM, Tom Hill <solr-list@worldware.com>
> wrote:
> > > Hi -
> > >
> > > If I understand correctly, WeakHashMap does not free the memory for the
> > > value (cached data) when the key is nulled, or even when the key is
> > garbage
> > > collected.
> > >
> > > It requires one more step: a method on WeakHashMap must be called to
> > allow
> > > it to release its hard reference to the cached data. It appears that
> most
> > > methods in WeakHashMap end up calling expungeStaleEntries, which will
> > clear
> > > the hard reference. But you have to call some method on the map, before
> > the
> > > memory is eligible for garbage collection.
> > >
> > > So it requires four stages to free the cached data. Null the key; A GC
> to
> > > release the weak reference to the key; A call to some method on the
> map;
> > > Then the next GC cycle should free the value.
> > >
> > > So it seems possible that you could end up with double memory usage for
> a
> > > time. If you don't have a GC between the time that you close the old
> > reader,
> > > and you start to load the field cache entry for the next reader, then
> the
> > > key may still be hanging around uncollected.
> > >
> > > At that point, it may run a GC when you allocate the new cache, but
> > that's
> > > only the first GC. It can't free the cached data until after the next
> > call
> > > to expungeStaleEntries, so for a while you have both caches around.
> > >
> > > This extra usage could cause things to move into tenured space. Could
> > this
> > > be causing your problem?
> > >
> > > Workaround would be to cause some method to be called on the
> WeakHashMap.
> > > You don't want to call get(), since that will try to populate the
> cache.
> > > Maybe if you tried putting a small value to the cache, and doing a GC,
> > and
> > > see if your memory drops then.
> > >
> > >
> > > Tom
> > >
> > >
> > >
> > > On Mon, Dec 7, 2009 at 1:48 PM, TCK <moonwatcher32329@gmail.com>
> wrote:
> > >
> > >> Thanks for the response. But I'm definitely calling close() on the old
> > >> reader and opening a new one (not using reopen). Also, to simplify the
> > >> analysis, I did my test with a single-threaded requester to eliminate
> > any
> > >> concurrency issues.
> > >>
> > >> I'm doing:
> > >> sSearcher.getIndexReader().close();
> > >> sSearcher.close(); // this actually seems to be a no-op
> > >> IndexReader newIndexReader = IndexReader.open(newDirectory);
> > >> sSearcher = new IndexSearcher(newIndexReader);
> > >>
> > >> Btw, isn't it bad practice anyway to have an unbounded cache? Are
> there
> > any
> > >> plans to replace the HashMaps used for the innerCaches with an actual
> > >> size-bounded cache with some eviction policy (perhaps EhCache or
> > something)
> > >> ?
> > >>
> > >> Thanks again,
> > >> TCK
> > >>
> > >>
> > >>
> > >>
> > >> On Mon, Dec 7, 2009 at 4:37 PM, Erick Erickson <
> erickerickson@gmail.com
> > >> >wrote:
> > >>
> > >> > What this sounds like is that you're not really closing your
> > >> > readers even though you think you are. Sorting indeed uses up
> > >> > significant memory when it populates internal caches and keeps
> > >> > it around for later use (which is one of the reasons that warming
> > >> > queries matter). But if you really do close the reader, I'm pretty
> > >> > sure the memory should be GC-able.
> > >> >
> > >> > One thing that trips people up is IndexReader.reopen(). If it
> > >> > returns a reader different than the original, you *must* close the
> > >> > old one. If you don't, the old reader is still hanging around and
> > >> > memory won't be returne.... An example from the Javadocs...
> > >> >
> > >> >  IndexReader reader = ...
> > >> >  ...
> > >> >  IndexReader new = r.reopen();
> > >> >  if (new != reader) {
> > >> >   ...     // reader was reopened
> > >> >   reader.close();
> > >> >  }
> > >> >  reader = new;
> > >> >  ...
> > >> >
> > >> >
> > >> > If this is irrelevant, could you post your close/open
> > >> >
> > >> > code?
> > >> >
> > >> > HTH
> > >> >
> > >> > Erick
> > >> >
> > >> >
> > >> > On Mon, Dec 7, 2009 at 4:27 PM, TCK <moonwatcher32329@gmail.com>
> > wrote:
> > >> >
> > >> > > Hi,
> > >> > > I'm having heap memory issues when I do lucene queries involving
> > >> sorting
> > >> > by
> > >> > > a string field. Such queries seem to load a lot of data in to the
> > heap.
> > >> > > Moreover lucene seems to hold on to references to this data even
> > after
> > >> > the
> > >> > > index reader has been closed and a full GC has been run. Some of
> the
> > >> > > consequences of this are that in my generational heap
> configuration
> > a
> > >> lot
> > >> > > of
> > >> > > memory gets promoted to tenured space each time I close the old
> > index
> > >> > > reader
> > >> > > and after opening and querying using a new one, and the tenured
> > space
> > >> > > eventually gets fragmented causing a lot of promotion failures
> > >> resulting
> > >> > in
> > >> > > jvm hangs while the jvm does stop-the-world GCs.
> > >> > >
> > >> > > Does anyone know any workarounds to avoid these memory issues when
> > >> doing
> > >> > > such lucene queries?
> > >> > >
> > >> > > My profiling showed that even after a full GC lucene is holding on
> > to a
> > >> > lot
> > >> > > of references to field value data notably via the
> > >> > > FieldCacheImpl/ExtendedFieldCacheImpl. I noticed that the
> > WeakHashMap
> > >> > > readerCaches are using unbounded HashMaps as the innerCaches and I
> > used
> > >> > > reflection to replace these innerCaches with dummy empty HashMaps,
> > but
> > >> > > still
> > >> > > I'm seeing the same behavior. I wondered if anyone has gone
> through
> > >> these
> > >> > > same issues before and would offer any advice.
> > >> > >
> > >> > > Thanks a lot,
> > >> > > TCK
> > >> > >
> > >> >
> > >>
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

--000325556f5ac69ea3047a31ebca--

From java-user-return-43957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 08 06:48:50 2009
Return-Path: <java-user-return-43957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71744 invoked from network); 8 Dec 2009 06:48:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Dec 2009 06:48:50 -0000
Received: (qmail 30726 invoked by uid 500); 8 Dec 2009 06:48:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30636 invoked by uid 500); 8 Dec 2009 06:48:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30626 invoked by uid 99); 8 Dec 2009 06:48:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 06:48:48 +0000
X-ASF-Spam-Status: No, hits=-2.8 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.160.46 as permitted sender)
Received: from [209.85.160.46] (HELO mail-pw0-f46.google.com) (209.85.160.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 06:48:46 +0000
Received: by pwj16 with SMTP id 16so817180pwj.5
        for <java-user@lucene.apache.org>; Mon, 07 Dec 2009 22:48:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=Y78QecwoGXppOiEduxyKzac0xkl0QFQL+Z8NYuSuA+o=;
        b=nwmM8mSKc9ssZY9Ncy6mvzJEn9BDCk6N3dDkgM3pjQ9ahr5dUXU4e2vmflqayWpUvO
         Qfodf32Q7a9aU+RoVxeY0Gvg3Vt4MCt3mPZa/bA/yx+jyrWugo5Sf3WGfeKr2h6WVz1/
         UDL2vOHJfy91uf6wUM0qvdDxb5JlTmoT/t5BE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=byqcel3M6kt6rEVo2/vcgYZRfVJqwT3xQzkyTaXipuANaZMfq05Tzr3Y2Mxu8FIZ4e
         k0aWxjT6O7IPGFZomVURPSuHu0O3bcFigGBAuIy7Ju5PrpwI2hvIG90QMdmfk0dcgISF
         q5tcYVBKTSA0kmyBMJvnPyTi1Tv6gPPZa7LhY=
MIME-Version: 1.0
Received: by 10.140.194.19 with SMTP id r19mr433825rvf.281.1260254905564; Mon, 
	07 Dec 2009 22:48:25 -0800 (PST)
In-Reply-To: <660086cb0912071657s55d70dffua8256282a8593a2a@mail.gmail.com>
References: <17022a310912071327x6be7f6afjf45e0ab69269e47c@mail.gmail.com>
	 <359a92830912071337o3ed869dbv68576b704666b8df@mail.gmail.com>
	 <17022a310912071348m85926b0vbc0687e6085e79b5@mail.gmail.com>
	 <660086cb0912071638h6c6e10e1u4899889bc9a4ed74@mail.gmail.com>
	 <85d3c3b60912071644x57dba746r49da93a63887039@mail.gmail.com>
	 <660086cb0912071657s55d70dffua8256282a8593a2a@mail.gmail.com>
Date: Mon, 7 Dec 2009 22:48:25 -0800
Message-ID: <85d3c3b60912072248j6f6d30bfkd9fa4ee32ae91f1d@mail.gmail.com>
Subject: Re: heap memory issues when sorting by a string field
From: Jason Rutherglen <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

> It's an apache license - but you mentioned something about no third party
> libraries. Is that a policy for Lucene?

Pretty much...  Though one can always submit a patch anyways.

On Mon, Dec 7, 2009 at 4:57 PM, Tom Hill <solr-list@worldware.com> wrote:
> Hey, that's a nice little Class! I hadn't see it before. But it sounds li=
ke
> the asynchronous cleanup might deal with the problem I mentioned above (b=
ut
> I haven't looked at the code yet).
>
> It's an apache license - but you mentioned something about no third party
> libraries. Is that a policy for Lucene?
>
> Thanks,
>
> Tom
>
>
> On Mon, Dec 7, 2009 at 4:44 PM, Jason Rutherglen <jason.rutherglen@gmail.=
com
>> wrote:
>
>> I wonder if Google Collections (even though we don't use third party
>> libraries) concurrent map, which supports weak keys, handles the
>> removal of weakly referenced keys in a more elegant way than Java's
>> WeakHashMap?
>>
>> On Mon, Dec 7, 2009 at 4:38 PM, Tom Hill <solr-list@worldware.com> wrote=
:
>> > Hi -
>> >
>> > If I understand correctly, WeakHashMap does not free the memory for th=
e
>> > value (cached data) when the key is nulled, or even when the key is
>> garbage
>> > collected.
>> >
>> > It requires one more step: a method on WeakHashMap must be called to
>> allow
>> > it to release its hard reference to the cached data. It appears that m=
ost
>> > methods in WeakHashMap end up calling expungeStaleEntries, which will
>> clear
>> > the hard reference. But you have to call some method on the map, befor=
e
>> the
>> > memory is eligible for garbage collection.
>> >
>> > So it requires four stages to free the cached data. Null the key; A GC=
 to
>> > release the weak reference to the key; A call to some method on the ma=
p;
>> > Then the next GC cycle should free the value.
>> >
>> > So it seems possible that you could end up with double memory usage fo=
r a
>> > time. If you don't have a GC between the time that you close the old
>> reader,
>> > and you start to load the field cache entry for the next reader, then =
the
>> > key may still be hanging around uncollected.
>> >
>> > At that point, it may run a GC when you allocate the new cache, but
>> that's
>> > only the first GC. It can't free the cached data until after the next
>> call
>> > to expungeStaleEntries, so for a while you have both caches around.
>> >
>> > This extra usage could cause things to move into tenured space. Could
>> this
>> > be causing your problem?
>> >
>> > Workaround would be to cause some method to be called on the WeakHashM=
ap.
>> > You don't want to call get(), since that will try to populate the cach=
e.
>> > Maybe if you tried putting a small value to the cache, and doing a GC,
>> and
>> > see if your memory drops then.
>> >
>> >
>> > Tom
>> >
>> >
>> >
>> > On Mon, Dec 7, 2009 at 1:48 PM, TCK <moonwatcher32329@gmail.com> wrote=
:
>> >
>> >> Thanks for the response. But I'm definitely calling close() on the ol=
d
>> >> reader and opening a new one (not using reopen). Also, to simplify th=
e
>> >> analysis, I did my test with a single-threaded requester to eliminate
>> any
>> >> concurrency issues.
>> >>
>> >> I'm doing:
>> >> sSearcher.getIndexReader().close();
>> >> sSearcher.close(); // this actually seems to be a no-op
>> >> IndexReader newIndexReader =3D IndexReader.open(newDirectory);
>> >> sSearcher =3D new IndexSearcher(newIndexReader);
>> >>
>> >> Btw, isn't it bad practice anyway to have an unbounded cache? Are the=
re
>> any
>> >> plans to replace the HashMaps used for the innerCaches with an actual
>> >> size-bounded cache with some eviction policy (perhaps EhCache or
>> something)
>> >> ?
>> >>
>> >> Thanks again,
>> >> TCK
>> >>
>> >>
>> >>
>> >>
>> >> On Mon, Dec 7, 2009 at 4:37 PM, Erick Erickson <erickerickson@gmail.c=
om
>> >> >wrote:
>> >>
>> >> > What this sounds like is that you're not really closing your
>> >> > readers even though you think you are. Sorting indeed uses up
>> >> > significant memory when it populates internal caches and keeps
>> >> > it around for later use (which is one of the reasons that warming
>> >> > queries matter). But if you really do close the reader, I'm pretty
>> >> > sure the memory should be GC-able.
>> >> >
>> >> > One thing that trips people up is IndexReader.reopen(). If it
>> >> > returns a reader different than the original, you *must* close the
>> >> > old one. If you don't, the old reader is still hanging around and
>> >> > memory won't be returne.... An example from the Javadocs...
>> >> >
>> >> > =A0IndexReader reader =3D ...
>> >> > =A0...
>> >> > =A0IndexReader new =3D r.reopen();
>> >> > =A0if (new !=3D reader) {
>> >> > =A0 ... =A0 =A0 // reader was reopened
>> >> > =A0 reader.close();
>> >> > =A0}
>> >> > =A0reader =3D new;
>> >> > =A0...
>> >> >
>> >> >
>> >> > If this is irrelevant, could you post your close/open
>> >> >
>> >> > code?
>> >> >
>> >> > HTH
>> >> >
>> >> > Erick
>> >> >
>> >> >
>> >> > On Mon, Dec 7, 2009 at 4:27 PM, TCK <moonwatcher32329@gmail.com>
>> wrote:
>> >> >
>> >> > > Hi,
>> >> > > I'm having heap memory issues when I do lucene queries involving
>> >> sorting
>> >> > by
>> >> > > a string field. Such queries seem to load a lot of data in to the
>> heap.
>> >> > > Moreover lucene seems to hold on to references to this data even
>> after
>> >> > the
>> >> > > index reader has been closed and a full GC has been run. Some of =
the
>> >> > > consequences of this are that in my generational heap configurati=
on
>> a
>> >> lot
>> >> > > of
>> >> > > memory gets promoted to tenured space each time I close the old
>> index
>> >> > > reader
>> >> > > and after opening and querying using a new one, and the tenured
>> space
>> >> > > eventually gets fragmented causing a lot of promotion failures
>> >> resulting
>> >> > in
>> >> > > jvm hangs while the jvm does stop-the-world GCs.
>> >> > >
>> >> > > Does anyone know any workarounds to avoid these memory issues whe=
n
>> >> doing
>> >> > > such lucene queries?
>> >> > >
>> >> > > My profiling showed that even after a full GC lucene is holding o=
n
>> to a
>> >> > lot
>> >> > > of references to field value data notably via the
>> >> > > FieldCacheImpl/ExtendedFieldCacheImpl. I noticed that the
>> WeakHashMap
>> >> > > readerCaches are using unbounded HashMaps as the innerCaches and =
I
>> used
>> >> > > reflection to replace these innerCaches with dummy empty HashMaps=
,
>> but
>> >> > > still
>> >> > > I'm seeing the same behavior. I wondered if anyone has gone throu=
gh
>> >> these
>> >> > > same issues before and would offer any advice.
>> >> > >
>> >> > > Thanks a lot,
>> >> > > TCK
>> >> > >
>> >> >
>> >>
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 08 06:52:18 2009
Return-Path: <java-user-return-43958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72159 invoked from network); 8 Dec 2009 06:52:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Dec 2009 06:52:18 -0000
Received: (qmail 36059 invoked by uid 500); 8 Dec 2009 06:52:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35988 invoked by uid 500); 8 Dec 2009 06:52:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35978 invoked by uid 99); 8 Dec 2009 06:52:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 06:52:16 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.160.46 as permitted sender)
Received: from [209.85.160.46] (HELO mail-pw0-f46.google.com) (209.85.160.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 06:52:07 +0000
Received: by pwj16 with SMTP id 16so818847pwj.5
        for <java-user@lucene.apache.org>; Mon, 07 Dec 2009 22:51:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=LAVWahGTyrhNNabPbysAQCdmCmR72cK0/onDILXEwjA=;
        b=wtGFan2rPOnyFicUjnhgXs7t7bo0Pgvxs/1sueDqyN8HJePohFK1ePpzUc0XEAf6vV
         kavySYeP0JDXXWY+o8sqrH96BYXhz82jdlE0/WEbdD76wGubsIEvS1Wfr2LpBsxlOIOi
         vGqOtlUYxSGxth2zoVj1nsc9fgiaWqAnHbbF8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=LkLKef1eyTXkfQKV1Q4697CebEQ/Q/xKjJUDJa9VlvV+w9FuZrmoj9iULbzl2NOWEW
         MjUuBgkXztjAfPUCKgZN/zfa/0bTRcyNppps3vLQ+UIR3yfO+QdjKQBatfWxGLTNh+4F
         Dec3wX9QjMesSg0re8gagr1nD87Qjbym/By2k=
MIME-Version: 1.0
Received: by 10.140.202.12 with SMTP id z12mr531228rvf.112.1260255106394; Mon, 
	07 Dec 2009 22:51:46 -0800 (PST)
In-Reply-To: <17022a310912072245q7b979758j13482b5282452322@mail.gmail.com>
References: <17022a310912071327x6be7f6afjf45e0ab69269e47c@mail.gmail.com>
	 <359a92830912071337o3ed869dbv68576b704666b8df@mail.gmail.com>
	 <17022a310912071348m85926b0vbc0687e6085e79b5@mail.gmail.com>
	 <660086cb0912071638h6c6e10e1u4899889bc9a4ed74@mail.gmail.com>
	 <85d3c3b60912071644x57dba746r49da93a63887039@mail.gmail.com>
	 <660086cb0912071657s55d70dffua8256282a8593a2a@mail.gmail.com>
	 <17022a310912072245q7b979758j13482b5282452322@mail.gmail.com>
Date: Mon, 7 Dec 2009 22:51:46 -0800
Message-ID: <85d3c3b60912072251l557e484apa5427790bafd175d@mail.gmail.com>
Subject: Re: heap memory issues when sorting by a string field
From: Jason Rutherglen <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

TCK,

CSIndexInput is returned by SegmentReader.getFieldCacheKey()

If you think it's an issue, then it'd be good to open an issue and submit
some code as a patch, maybe a test case showing the WHM isn't
removing values like it's supposed to.

Jason

On Mon, Dec 7, 2009 at 10:45 PM, TCK <moonwatcher32329@gmail.com> wrote:
> Thanks for the feedback guys. The evidence I have collected does point to=
 an
> issue either in the java WeakHashMap implementation or in Lucene's use of
> it. In particular, I used reflection to replace the WeakHashMap instances
> with my own dummy Map that does a no-op for the put operation, and althou=
gh
> this caused tons more garbage to be created for each search query the CMS
> executions always collected that garbage and brought down the tenured spa=
ce
> usage to a small value.
>
> Before that, I tried calling clear() on the WeakHashMap instances and the=
n
> calling size() which calls expungeStaleEntries() but that didn't help. Th=
ere
> may be indeed be a case of double memory usage for a while (until enough =
CMS
> executions have run) as Tom pointed out, but I don't fully understand wha=
t's
> happenning yet.
>
> Also, bizzarely during my introspection of the readerCache WeakHashMap
> instances I found an instance of
> org.apache.lucene.index.CompoundFileReader$CSIndexInput as a key. Looking=
 at
> the code I don't see how anything other than an IndexReader could possibl=
y
> get there, and this class certainly doesn't extend IndexReader. Any ideas=
?
> :-) Maybe I need to get more sleep.
>
> Btw, is searching with a sort by a text field not a common use-case of
> lucene? I've been testing with only 1Gb indexes and I'm pretty sure there
> are much larger indexes out there.
>
> Cheers,
> TCK
>
>
>
>
>
> On Mon, Dec 7, 2009 at 7:57 PM, Tom Hill <solr-list@worldware.com> wrote:
>
>> Hey, that's a nice little Class! I hadn't see it before. But it sounds l=
ike
>> the asynchronous cleanup might deal with the problem I mentioned above (=
but
>> I haven't looked at the code yet).
>>
>> It's an apache license - but you mentioned something about no third part=
y
>> libraries. Is that a policy for Lucene?
>>
>> Thanks,
>>
>> Tom
>>
>>
>> On Mon, Dec 7, 2009 at 4:44 PM, Jason Rutherglen <
>> jason.rutherglen@gmail.com
>> > wrote:
>>
>> > I wonder if Google Collections (even though we don't use third party
>> > libraries) concurrent map, which supports weak keys, handles the
>> > removal of weakly referenced keys in a more elegant way than Java's
>> > WeakHashMap?
>> >
>> > On Mon, Dec 7, 2009 at 4:38 PM, Tom Hill <solr-list@worldware.com>
>> wrote:
>> > > Hi -
>> > >
>> > > If I understand correctly, WeakHashMap does not free the memory for =
the
>> > > value (cached data) when the key is nulled, or even when the key is
>> > garbage
>> > > collected.
>> > >
>> > > It requires one more step: a method on WeakHashMap must be called to
>> > allow
>> > > it to release its hard reference to the cached data. It appears that
>> most
>> > > methods in WeakHashMap end up calling expungeStaleEntries, which wil=
l
>> > clear
>> > > the hard reference. But you have to call some method on the map, bef=
ore
>> > the
>> > > memory is eligible for garbage collection.
>> > >
>> > > So it requires four stages to free the cached data. Null the key; A =
GC
>> to
>> > > release the weak reference to the key; A call to some method on the
>> map;
>> > > Then the next GC cycle should free the value.
>> > >
>> > > So it seems possible that you could end up with double memory usage =
for
>> a
>> > > time. If you don't have a GC between the time that you close the old
>> > reader,
>> > > and you start to load the field cache entry for the next reader, the=
n
>> the
>> > > key may still be hanging around uncollected.
>> > >
>> > > At that point, it may run a GC when you allocate the new cache, but
>> > that's
>> > > only the first GC. It can't free the cached data until after the nex=
t
>> > call
>> > > to expungeStaleEntries, so for a while you have both caches around.
>> > >
>> > > This extra usage could cause things to move into tenured space. Coul=
d
>> > this
>> > > be causing your problem?
>> > >
>> > > Workaround would be to cause some method to be called on the
>> WeakHashMap.
>> > > You don't want to call get(), since that will try to populate the
>> cache.
>> > > Maybe if you tried putting a small value to the cache, and doing a G=
C,
>> > and
>> > > see if your memory drops then.
>> > >
>> > >
>> > > Tom
>> > >
>> > >
>> > >
>> > > On Mon, Dec 7, 2009 at 1:48 PM, TCK <moonwatcher32329@gmail.com>
>> wrote:
>> > >
>> > >> Thanks for the response. But I'm definitely calling close() on the =
old
>> > >> reader and opening a new one (not using reopen). Also, to simplify =
the
>> > >> analysis, I did my test with a single-threaded requester to elimina=
te
>> > any
>> > >> concurrency issues.
>> > >>
>> > >> I'm doing:
>> > >> sSearcher.getIndexReader().close();
>> > >> sSearcher.close(); // this actually seems to be a no-op
>> > >> IndexReader newIndexReader =3D IndexReader.open(newDirectory);
>> > >> sSearcher =3D new IndexSearcher(newIndexReader);
>> > >>
>> > >> Btw, isn't it bad practice anyway to have an unbounded cache? Are
>> there
>> > any
>> > >> plans to replace the HashMaps used for the innerCaches with an actu=
al
>> > >> size-bounded cache with some eviction policy (perhaps EhCache or
>> > something)
>> > >> ?
>> > >>
>> > >> Thanks again,
>> > >> TCK
>> > >>
>> > >>
>> > >>
>> > >>
>> > >> On Mon, Dec 7, 2009 at 4:37 PM, Erick Erickson <
>> erickerickson@gmail.com
>> > >> >wrote:
>> > >>
>> > >> > What this sounds like is that you're not really closing your
>> > >> > readers even though you think you are. Sorting indeed uses up
>> > >> > significant memory when it populates internal caches and keeps
>> > >> > it around for later use (which is one of the reasons that warming
>> > >> > queries matter). But if you really do close the reader, I'm prett=
y
>> > >> > sure the memory should be GC-able.
>> > >> >
>> > >> > One thing that trips people up is IndexReader.reopen(). If it
>> > >> > returns a reader different than the original, you *must* close th=
e
>> > >> > old one. If you don't, the old reader is still hanging around and
>> > >> > memory won't be returne.... An example from the Javadocs...
>> > >> >
>> > >> > =A0IndexReader reader =3D ...
>> > >> > =A0...
>> > >> > =A0IndexReader new =3D r.reopen();
>> > >> > =A0if (new !=3D reader) {
>> > >> > =A0 ... =A0 =A0 // reader was reopened
>> > >> > =A0 reader.close();
>> > >> > =A0}
>> > >> > =A0reader =3D new;
>> > >> > =A0...
>> > >> >
>> > >> >
>> > >> > If this is irrelevant, could you post your close/open
>> > >> >
>> > >> > code?
>> > >> >
>> > >> > HTH
>> > >> >
>> > >> > Erick
>> > >> >
>> > >> >
>> > >> > On Mon, Dec 7, 2009 at 4:27 PM, TCK <moonwatcher32329@gmail.com>
>> > wrote:
>> > >> >
>> > >> > > Hi,
>> > >> > > I'm having heap memory issues when I do lucene queries involvin=
g
>> > >> sorting
>> > >> > by
>> > >> > > a string field. Such queries seem to load a lot of data in to t=
he
>> > heap.
>> > >> > > Moreover lucene seems to hold on to references to this data eve=
n
>> > after
>> > >> > the
>> > >> > > index reader has been closed and a full GC has been run. Some o=
f
>> the
>> > >> > > consequences of this are that in my generational heap
>> configuration
>> > a
>> > >> lot
>> > >> > > of
>> > >> > > memory gets promoted to tenured space each time I close the old
>> > index
>> > >> > > reader
>> > >> > > and after opening and querying using a new one, and the tenured
>> > space
>> > >> > > eventually gets fragmented causing a lot of promotion failures
>> > >> resulting
>> > >> > in
>> > >> > > jvm hangs while the jvm does stop-the-world GCs.
>> > >> > >
>> > >> > > Does anyone know any workarounds to avoid these memory issues w=
hen
>> > >> doing
>> > >> > > such lucene queries?
>> > >> > >
>> > >> > > My profiling showed that even after a full GC lucene is holding=
 on
>> > to a
>> > >> > lot
>> > >> > > of references to field value data notably via the
>> > >> > > FieldCacheImpl/ExtendedFieldCacheImpl. I noticed that the
>> > WeakHashMap
>> > >> > > readerCaches are using unbounded HashMaps as the innerCaches an=
d I
>> > used
>> > >> > > reflection to replace these innerCaches with dummy empty HashMa=
ps,
>> > but
>> > >> > > still
>> > >> > > I'm seeing the same behavior. I wondered if anyone has gone
>> through
>> > >> these
>> > >> > > same issues before and would offer any advice.
>> > >> > >
>> > >> > > Thanks a lot,
>> > >> > > TCK
>> > >> > >
>> > >> >
>> > >>
>> > >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 08 07:40:43 2009
Return-Path: <java-user-return-43959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79429 invoked from network); 8 Dec 2009 07:40:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Dec 2009 07:40:43 -0000
Received: (qmail 74486 invoked by uid 500); 8 Dec 2009 07:40:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74386 invoked by uid 500); 8 Dec 2009 07:40:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74374 invoked by uid 99); 8 Dec 2009 07:40:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 07:40:41 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 07:40:38 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id A3B4345ED13
	for <java-user@lucene.apache.org>; Tue,  8 Dec 2009 08:40:15 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id AB-gu8vf-t8S for <java-user@lucene.apache.org>;
	Tue,  8 Dec 2009 08:39:59 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 1C57645ECE2
	for <java-user@lucene.apache.org>; Tue,  8 Dec 2009 08:39:58 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <4B1DF5C9.5080109@teamware.com>
Subject: RE: TopFieldDocCollector and v3.0.0
Date: Tue, 8 Dec 2009 08:39:56 +0100
Message-ID: <11F77567575744638E2187A564E8B78E@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <4B1DF5C9.5080109@teamware.com>
Thread-Index: Acp30g5JVsWBVp4JT4irvcZ8LN4cQAAB1uZw
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579

That's a java docs issue and already fixed for the 3.0 branch. You have to
use the no longer experimental API.

Any by the way: Experimental means not "bad" or "functionally unstable", it
just means that the API might change on later releases.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Antony Bowesman [mailto:adb@teamware.com]
> Sent: Tuesday, December 08, 2009 7:44 AM
> To: Lucene User
> Subject: TopFieldDocCollector and v3.0.0
> 
> I'm on 2.3.2 and looking to move to 2.9.1 or 3.0.0
> 
> In 2.9.1 TopFieldDocCollector is
> 
> "Deprecated. Please use TopFieldCollector instead."
> 
> in 3.0.0 TopFieldCollector says
> 
> NOTE: This API is experimental and might change in incompatible ways in
> the next
> release
> 
> What is the suggested path for migrating TopFieldDocCollector usage?
> 
> Antony
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 08 10:01:49 2009
Return-Path: <java-user-return-43960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23580 invoked from network); 8 Dec 2009 10:01:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Dec 2009 10:01:49 -0000
Received: (qmail 91608 invoked by uid 500); 8 Dec 2009 10:01:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91527 invoked by uid 500); 8 Dec 2009 10:01:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91517 invoked by uid 99); 8 Dec 2009 10:01:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 10:01:47 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.211.173] (HELO mail-yw0-f173.google.com) (209.85.211.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 10:01:44 +0000
Received: by ywh3 with SMTP id 3so5018585ywh.22
        for <java-user@lucene.apache.org>; Tue, 08 Dec 2009 02:01:23 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.75.6 with SMTP id x6mr13509644yba.283.1260266482339; Tue, 
	08 Dec 2009 02:01:22 -0800 (PST)
In-Reply-To: <758919.85996.qm@web110302.mail.gq1.yahoo.com>
References: <824410.56949.qm@web110315.mail.gq1.yahoo.com>
	 <85d3c3b60912072230ida12c40m5594f97f24aaa398@mail.gmail.com>
	 <758919.85996.qm@web110302.mail.gq1.yahoo.com>
Date: Tue, 8 Dec 2009 05:01:22 -0500
Message-ID: <9ac0c6aa0912080201t7b514d7av76fc5c93bcdcbba7@mail.gmail.com>
Subject: Re: IndexWriter creates multiple .cfs files
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

IndexWriter takes care of merging the CFSs down, over time.  Have you
changed your mergeFactor?  It's odd to see 100s of CFSs.

Or maybe you're not closing the old reader on reopening a new one?
That would prevent deletion of the files.

Mike

On Tue, Dec 8, 2009 at 1:43 AM, Cool The Breezer
<techcool.kumar@yahoo.com> wrote:
> Thanks Jason for quick reply and suggestion. I am definitely going to cha=
nge directory implementation policy to have one .cfs file instead of hundre=
ds in one directory.
>
> regards,
> Ranjan
>
>
> ----- Original Message ----
> From: Jason Rutherglen <jason.rutherglen@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Tue, December 8, 2009 12:00:59 PM
> Subject: Re: IndexWriter creates multiple .cfs files
>
> RB,
>
> That's expected behavior, each .cfs corresponds to all of a
> segment's files. You could write your own directory
> implementation that underneath writes to a single file. It's
> usually good to present what you're trying to accomplish (i.e.
> the why).
>
> Jason
>
> On Mon, Dec 7, 2009 at 10:25 PM, Cool The Breezer
> <techcool.kumar@yahoo.com> wrote:
>> Hello Group,
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0I am continuously updating an index a=
nd at the same time searcher also searches the index, which resulted in mul=
tiple .cfs files for each commit by IndexWriter. I am not sure whether this=
 is an expected behavior or I need to merge each time after IndexWriter com=
mits. In between the writer's commit, I reopen the IndexReader but still .c=
fs files keep on increasing. I would like to have one .cfs file which can b=
e reopened frequently by reader and at the same time progressive commit by =
writer. Is it possible?
>>
>> - RB
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 08 10:36:51 2009
Return-Path: <java-user-return-43961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41349 invoked from network); 8 Dec 2009 10:36:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Dec 2009 10:36:51 -0000
Received: (qmail 36035 invoked by uid 500); 8 Dec 2009 10:36:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35973 invoked by uid 500); 8 Dec 2009 10:36:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35963 invoked by uid 99); 8 Dec 2009 10:36:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 10:36:48 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.211.173] (HELO mail-yw0-f173.google.com) (209.85.211.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 10:36:46 +0000
Received: by ywh3 with SMTP id 3so5035190ywh.22
        for <java-user@lucene.apache.org>; Tue, 08 Dec 2009 02:36:24 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.39.17 with SMTP id m17mr13705486ybm.81.1260268584790; Tue, 
	08 Dec 2009 02:36:24 -0800 (PST)
In-Reply-To: <660086cb0912071638h6c6e10e1u4899889bc9a4ed74@mail.gmail.com>
References: <17022a310912071327x6be7f6afjf45e0ab69269e47c@mail.gmail.com>
	 <359a92830912071337o3ed869dbv68576b704666b8df@mail.gmail.com>
	 <17022a310912071348m85926b0vbc0687e6085e79b5@mail.gmail.com>
	 <660086cb0912071638h6c6e10e1u4899889bc9a4ed74@mail.gmail.com>
Date: Tue, 8 Dec 2009 05:36:24 -0500
Message-ID: <9ac0c6aa0912080236j5d3a87d1jbce8558fba738765@mail.gmail.com>
Subject: Re: heap memory issues when sorting by a string field
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

This is a rather disturbing implementation detail of WeakHashMap, that
it needs the one extra step (invoking one of its methods) for its weak
keys to be reclaimable.

Maybe on IndexReader.close(), Lucene should go and evict all entries
in the FieldCache associated with that reader.  Ie, step through the
sub-readers, and if they are truly closed as well (not shared w/ other
readers), evict.  I'll open an issue.

Even in TCK's code fragment, it's not until the final line is done
executing, that the cache key even loses all hard references, because
it's that line that assigns to sSearcher, replacing the strong
reference to the old searcher.  Inserting sSearcher =3D null prior to
that would drop the hard reference sooner, but because of this impl
detail of WeakHashMap, something would still have to touch it (eg, a
warmup query that hits the field cache) before it's reclaimable.

Mike

On Mon, Dec 7, 2009 at 7:38 PM, Tom Hill <solr-list@worldware.com> wrote:
> Hi -
>
> If I understand correctly, WeakHashMap does not free the memory for the
> value (cached data) when the key is nulled, or even when the key is garba=
ge
> collected.
>
> It requires one more step: a method on WeakHashMap must be called to allo=
w
> it to release its hard reference to the cached data. It appears that most
> methods in WeakHashMap end up calling expungeStaleEntries, which will cle=
ar
> the hard reference. But you have to call some method on the map, before t=
he
> memory is eligible for garbage collection.
>
> So it requires four stages to free the cached data. Null the key; A GC to
> release the weak reference to the key; A call to some method on the map;
> Then the next GC cycle should free the value.
>
> So it seems possible that you could end up with double memory usage for a
> time. If you don't have a GC between the time that you close the old read=
er,
> and you start to load the field cache entry for the next reader, then the
> key may still be hanging around uncollected.
>
> At that point, it may run a GC when you allocate the new cache, but that'=
s
> only the first GC. It can't free the cached data until after the next cal=
l
> to expungeStaleEntries, so for a while you have both caches around.
>
> This extra usage could cause things to move into tenured space. Could thi=
s
> be causing your problem?
>
> Workaround would be to cause some method to be called on the WeakHashMap.
> You don't want to call get(), since that will try to populate the cache.
> Maybe if you tried putting a small value to the cache, and doing a GC, an=
d
> see if your memory drops then.
>
>
> Tom
>
>
>
> On Mon, Dec 7, 2009 at 1:48 PM, TCK <moonwatcher32329@gmail.com> wrote:
>
>> Thanks for the response. But I'm definitely calling close() on the old
>> reader and opening a new one (not using reopen). Also, to simplify the
>> analysis, I did my test with a single-threaded requester to eliminate an=
y
>> concurrency issues.
>>
>> I'm doing:
>> sSearcher.getIndexReader().close();
>> sSearcher.close(); // this actually seems to be a no-op
>> IndexReader newIndexReader =3D IndexReader.open(newDirectory);
>> sSearcher =3D new IndexSearcher(newIndexReader);
>>
>> Btw, isn't it bad practice anyway to have an unbounded cache? Are there =
any
>> plans to replace the HashMaps used for the innerCaches with an actual
>> size-bounded cache with some eviction policy (perhaps EhCache or somethi=
ng)
>> ?
>>
>> Thanks again,
>> TCK
>>
>>
>>
>>
>> On Mon, Dec 7, 2009 at 4:37 PM, Erick Erickson <erickerickson@gmail.com
>> >wrote:
>>
>> > What this sounds like is that you're not really closing your
>> > readers even though you think you are. Sorting indeed uses up
>> > significant memory when it populates internal caches and keeps
>> > it around for later use (which is one of the reasons that warming
>> > queries matter). But if you really do close the reader, I'm pretty
>> > sure the memory should be GC-able.
>> >
>> > One thing that trips people up is IndexReader.reopen(). If it
>> > returns a reader different than the original, you *must* close the
>> > old one. If you don't, the old reader is still hanging around and
>> > memory won't be returne.... An example from the Javadocs...
>> >
>> > =A0IndexReader reader =3D ...
>> > =A0...
>> > =A0IndexReader new =3D r.reopen();
>> > =A0if (new !=3D reader) {
>> > =A0 ... =A0 =A0 // reader was reopened
>> > =A0 reader.close();
>> > =A0}
>> > =A0reader =3D new;
>> > =A0...
>> >
>> >
>> > If this is irrelevant, could you post your close/open
>> >
>> > code?
>> >
>> > HTH
>> >
>> > Erick
>> >
>> >
>> > On Mon, Dec 7, 2009 at 4:27 PM, TCK <moonwatcher32329@gmail.com> wrote=
:
>> >
>> > > Hi,
>> > > I'm having heap memory issues when I do lucene queries involving
>> sorting
>> > by
>> > > a string field. Such queries seem to load a lot of data in to the he=
ap.
>> > > Moreover lucene seems to hold on to references to this data even aft=
er
>> > the
>> > > index reader has been closed and a full GC has been run. Some of the
>> > > consequences of this are that in my generational heap configuration =
a
>> lot
>> > > of
>> > > memory gets promoted to tenured space each time I close the old inde=
x
>> > > reader
>> > > and after opening and querying using a new one, and the tenured spac=
e
>> > > eventually gets fragmented causing a lot of promotion failures
>> resulting
>> > in
>> > > jvm hangs while the jvm does stop-the-world GCs.
>> > >
>> > > Does anyone know any workarounds to avoid these memory issues when
>> doing
>> > > such lucene queries?
>> > >
>> > > My profiling showed that even after a full GC lucene is holding on t=
o a
>> > lot
>> > > of references to field value data notably via the
>> > > FieldCacheImpl/ExtendedFieldCacheImpl. I noticed that the WeakHashMa=
p
>> > > readerCaches are using unbounded HashMaps as the innerCaches and I u=
sed
>> > > reflection to replace these innerCaches with dummy empty HashMaps, b=
ut
>> > > still
>> > > I'm seeing the same behavior. I wondered if anyone has gone through
>> these
>> > > same issues before and would offer any advice.
>> > >
>> > > Thanks a lot,
>> > > TCK
>> > >
>> >
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 08 10:44:00 2009
Return-Path: <java-user-return-43962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43862 invoked from network); 8 Dec 2009 10:44:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Dec 2009 10:44:00 -0000
Received: (qmail 53669 invoked by uid 500); 8 Dec 2009 10:43:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53603 invoked by uid 500); 8 Dec 2009 10:43:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53593 invoked by uid 99); 8 Dec 2009 10:43:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 10:43:56 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 10:43:48 +0000
Received: by yxe30 with SMTP id 30so5709384yxe.29
        for <java-user@lucene.apache.org>; Tue, 08 Dec 2009 02:43:26 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.129.13 with SMTP id b13mr13564298ybd.314.1260269006763; 
	Tue, 08 Dec 2009 02:43:26 -0800 (PST)
In-Reply-To: <9ac0c6aa0912080236j5d3a87d1jbce8558fba738765@mail.gmail.com>
References: <17022a310912071327x6be7f6afjf45e0ab69269e47c@mail.gmail.com>
	 <359a92830912071337o3ed869dbv68576b704666b8df@mail.gmail.com>
	 <17022a310912071348m85926b0vbc0687e6085e79b5@mail.gmail.com>
	 <660086cb0912071638h6c6e10e1u4899889bc9a4ed74@mail.gmail.com>
	 <9ac0c6aa0912080236j5d3a87d1jbce8558fba738765@mail.gmail.com>
Date: Tue, 8 Dec 2009 05:43:26 -0500
Message-ID: <9ac0c6aa0912080243g4f7fab20q73b228cf1426a4ae@mail.gmail.com>
Subject: Re: heap memory issues when sorting by a string field
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

I've opened LUCENE-2135.

Mike

On Tue, Dec 8, 2009 at 5:36 AM, Michael McCandless
<lucene@mikemccandless.com> wrote:
> This is a rather disturbing implementation detail of WeakHashMap, that
> it needs the one extra step (invoking one of its methods) for its weak
> keys to be reclaimable.
>
> Maybe on IndexReader.close(), Lucene should go and evict all entries
> in the FieldCache associated with that reader. =A0Ie, step through the
> sub-readers, and if they are truly closed as well (not shared w/ other
> readers), evict. =A0I'll open an issue.
>
> Even in TCK's code fragment, it's not until the final line is done
> executing, that the cache key even loses all hard references, because
> it's that line that assigns to sSearcher, replacing the strong
> reference to the old searcher. =A0Inserting sSearcher =3D null prior to
> that would drop the hard reference sooner, but because of this impl
> detail of WeakHashMap, something would still have to touch it (eg, a
> warmup query that hits the field cache) before it's reclaimable.
>
> Mike
>
> On Mon, Dec 7, 2009 at 7:38 PM, Tom Hill <solr-list@worldware.com> wrote:
>> Hi -
>>
>> If I understand correctly, WeakHashMap does not free the memory for the
>> value (cached data) when the key is nulled, or even when the key is garb=
age
>> collected.
>>
>> It requires one more step: a method on WeakHashMap must be called to all=
ow
>> it to release its hard reference to the cached data. It appears that mos=
t
>> methods in WeakHashMap end up calling expungeStaleEntries, which will cl=
ear
>> the hard reference. But you have to call some method on the map, before =
the
>> memory is eligible for garbage collection.
>>
>> So it requires four stages to free the cached data. Null the key; A GC t=
o
>> release the weak reference to the key; A call to some method on the map;
>> Then the next GC cycle should free the value.
>>
>> So it seems possible that you could end up with double memory usage for =
a
>> time. If you don't have a GC between the time that you close the old rea=
der,
>> and you start to load the field cache entry for the next reader, then th=
e
>> key may still be hanging around uncollected.
>>
>> At that point, it may run a GC when you allocate the new cache, but that=
's
>> only the first GC. It can't free the cached data until after the next ca=
ll
>> to expungeStaleEntries, so for a while you have both caches around.
>>
>> This extra usage could cause things to move into tenured space. Could th=
is
>> be causing your problem?
>>
>> Workaround would be to cause some method to be called on the WeakHashMap=
.
>> You don't want to call get(), since that will try to populate the cache.
>> Maybe if you tried putting a small value to the cache, and doing a GC, a=
nd
>> see if your memory drops then.
>>
>>
>> Tom
>>
>>
>>
>> On Mon, Dec 7, 2009 at 1:48 PM, TCK <moonwatcher32329@gmail.com> wrote:
>>
>>> Thanks for the response. But I'm definitely calling close() on the old
>>> reader and opening a new one (not using reopen). Also, to simplify the
>>> analysis, I did my test with a single-threaded requester to eliminate a=
ny
>>> concurrency issues.
>>>
>>> I'm doing:
>>> sSearcher.getIndexReader().close();
>>> sSearcher.close(); // this actually seems to be a no-op
>>> IndexReader newIndexReader =3D IndexReader.open(newDirectory);
>>> sSearcher =3D new IndexSearcher(newIndexReader);
>>>
>>> Btw, isn't it bad practice anyway to have an unbounded cache? Are there=
 any
>>> plans to replace the HashMaps used for the innerCaches with an actual
>>> size-bounded cache with some eviction policy (perhaps EhCache or someth=
ing)
>>> ?
>>>
>>> Thanks again,
>>> TCK
>>>
>>>
>>>
>>>
>>> On Mon, Dec 7, 2009 at 4:37 PM, Erick Erickson <erickerickson@gmail.com
>>> >wrote:
>>>
>>> > What this sounds like is that you're not really closing your
>>> > readers even though you think you are. Sorting indeed uses up
>>> > significant memory when it populates internal caches and keeps
>>> > it around for later use (which is one of the reasons that warming
>>> > queries matter). But if you really do close the reader, I'm pretty
>>> > sure the memory should be GC-able.
>>> >
>>> > One thing that trips people up is IndexReader.reopen(). If it
>>> > returns a reader different than the original, you *must* close the
>>> > old one. If you don't, the old reader is still hanging around and
>>> > memory won't be returne.... An example from the Javadocs...
>>> >
>>> > =A0IndexReader reader =3D ...
>>> > =A0...
>>> > =A0IndexReader new =3D r.reopen();
>>> > =A0if (new !=3D reader) {
>>> > =A0 ... =A0 =A0 // reader was reopened
>>> > =A0 reader.close();
>>> > =A0}
>>> > =A0reader =3D new;
>>> > =A0...
>>> >
>>> >
>>> > If this is irrelevant, could you post your close/open
>>> >
>>> > code?
>>> >
>>> > HTH
>>> >
>>> > Erick
>>> >
>>> >
>>> > On Mon, Dec 7, 2009 at 4:27 PM, TCK <moonwatcher32329@gmail.com> wrot=
e:
>>> >
>>> > > Hi,
>>> > > I'm having heap memory issues when I do lucene queries involving
>>> sorting
>>> > by
>>> > > a string field. Such queries seem to load a lot of data in to the h=
eap.
>>> > > Moreover lucene seems to hold on to references to this data even af=
ter
>>> > the
>>> > > index reader has been closed and a full GC has been run. Some of th=
e
>>> > > consequences of this are that in my generational heap configuration=
 a
>>> lot
>>> > > of
>>> > > memory gets promoted to tenured space each time I close the old ind=
ex
>>> > > reader
>>> > > and after opening and querying using a new one, and the tenured spa=
ce
>>> > > eventually gets fragmented causing a lot of promotion failures
>>> resulting
>>> > in
>>> > > jvm hangs while the jvm does stop-the-world GCs.
>>> > >
>>> > > Does anyone know any workarounds to avoid these memory issues when
>>> doing
>>> > > such lucene queries?
>>> > >
>>> > > My profiling showed that even after a full GC lucene is holding on =
to a
>>> > lot
>>> > > of references to field value data notably via the
>>> > > FieldCacheImpl/ExtendedFieldCacheImpl. I noticed that the WeakHashM=
ap
>>> > > readerCaches are using unbounded HashMaps as the innerCaches and I =
used
>>> > > reflection to replace these innerCaches with dummy empty HashMaps, =
but
>>> > > still
>>> > > I'm seeing the same behavior. I wondered if anyone has gone through
>>> these
>>> > > same issues before and would offer any advice.
>>> > >
>>> > > Thanks a lot,
>>> > > TCK
>>> > >
>>> >
>>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 08 11:14:14 2009
Return-Path: <java-user-return-43963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55733 invoked from network); 8 Dec 2009 11:14:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Dec 2009 11:14:14 -0000
Received: (qmail 85039 invoked by uid 500); 8 Dec 2009 11:14:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84973 invoked by uid 500); 8 Dec 2009 11:14:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84963 invoked by uid 99); 8 Dec 2009 11:14:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 11:14:11 +0000
X-ASF-Spam-Status: No, hits=-2.0 required=5.0
	tests=BAYES_00,RCVD_IN_SORBS_WEB
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [67.195.8.207] (HELO web110307.mail.gq1.yahoo.com) (67.195.8.207)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 08 Dec 2009 11:14:09 +0000
Received: (qmail 90612 invoked by uid 60001); 8 Dec 2009 11:13:48 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1260270828; bh=PDuRZYsvI+JGTyFJpS1WVhrOm4YsKyr8vpKoWvgS6g8=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=y1I7j3vgGKPyYk7FhTFMv2ZIkIqHCkDUcFTEO1lL3PrpZGH5aF5MEawuoLGBdeNxJWlEr2nhvqAnedcQB2Q5NLvpaT6Cs1R9Xb9+N0Wk5tsnIERhdsZSHZSWrCyP5TmWJ4latIO6hk7GZMyHbbB+y3ha1t9sTj8OhYRUri7dD2A=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=lXCj2y7eZmy26F7XCo33kOySlPiSVBKv1yPMvQ4l/NdvcDBbHKYW4VM/hQ4/tQzC5n5QBsy6AztT2mI6oWMA1C4BlnKEDV4RcKoSsLUQou+2Wz6OCyh47pd4kakRdmVtUfnmsOwHATJIyDnExqHNMAR7NNWNRByzdgUtCKdCQng=;
Message-ID: <894103.90548.qm@web110307.mail.gq1.yahoo.com>
X-YMail-OSG: QVubcwQVM1kudSUu43B42UYBKbRsiw5NynpxQ25pfttEQa70hXmxohVkGQlDJYpNZnuSYsLywM_zIF4paStwUPy_xYMDfqhILd8tLftke.9k_YAftVM0ZME61sjS2UvCsO6W.sDVv3YqnHMFAuRFh3KEH79sCGPzAMkaLSmNR7ilQE4ZeYELMP_OjMFAaMQLz1j.qjp5j.I_JEYRrtcBN2_6s4KdRzC8_FpcjI2wXiBOQ9zBwNy3EEZw_4XofETDbl0Mnc5vGICF6xkmjyjf9UtkWh6iFChBFfv9mTas9bGCP_aSeIXRFlmrH1Ky01m.EN0-
Received: from [116.197.178.83] by web110307.mail.gq1.yahoo.com via HTTP; Tue, 08 Dec 2009 03:13:48 PST
X-Mailer: YahooMailRC/240.3 YahooMailWebService/0.8.100.260964
References: <824410.56949.qm@web110315.mail.gq1.yahoo.com>  <85d3c3b60912072230ida12c40m5594f97f24aaa398@mail.gmail.com>  <758919.85996.qm@web110302.mail.gq1.yahoo.com> <9ac0c6aa0912080201t7b514d7av76fc5c93bcdcbba7@mail.gmail.com>
Date: Tue, 8 Dec 2009 03:13:48 -0800 (PST)
From: Cool The Breezer <techcool.kumar@yahoo.com>
Subject: Re: IndexWriter creates multiple .cfs files
To: java-user@lucene.apache.org
In-Reply-To: <9ac0c6aa0912080201t7b514d7av76fc5c93bcdcbba7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Thanks Mike for your timely suggestion. Somehow readers are not reopened properly. 





----- Original Message ----
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Sent: Tue, December 8, 2009 3:31:22 PM
Subject: Re: IndexWriter creates multiple .cfs files

IndexWriter takes care of merging the CFSs down, over time.  Have you
changed your mergeFactor?  It's odd to see 100s of CFSs.

Or maybe you're not closing the old reader on reopening a new one?
That would prevent deletion of the files.

Mike

On Tue, Dec 8, 2009 at 1:43 AM, Cool The Breezer
<techcool.kumar@yahoo.com> wrote:
> Thanks Jason for quick reply and suggestion. I am definitely going to change directory implementation policy to have one .cfs file instead of hundreds in one directory.
>
> regards,
> Ranjan
>
>
> ----- Original Message ----
> From: Jason Rutherglen <jason.rutherglen@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Tue, December 8, 2009 12:00:59 PM
> Subject: Re: IndexWriter creates multiple .cfs files
>
> RB,
>
> That's expected behavior, each .cfs corresponds to all of a
> segment's files. You could write your own directory
> implementation that underneath writes to a single file. It's
> usually good to present what you're trying to accomplish (i.e.
> the why).
>
> Jason
>
> On Mon, Dec 7, 2009 at 10:25 PM, Cool The Breezer
> <techcool.kumar@yahoo.com> wrote:
>> Hello Group,
>>                  I am continuously updating an index and at the same time searcher also searches the index, which resulted in multiple .cfs files for each commit by IndexWriter. I am not sure whether this is an expected behavior or I need to merge each time after IndexWriter commits. In between the writer's commit, I reopen the IndexReader but still .cfs files keep on increasing. I would like to have one .cfs file which can be reopened frequently by reader and at the same time progressive commit by writer. Is it possible?
>>
>> - RB
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 08 11:30:15 2009
Return-Path: <java-user-return-43964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64259 invoked from network); 8 Dec 2009 11:30:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Dec 2009 11:30:15 -0000
Received: (qmail 5476 invoked by uid 500); 8 Dec 2009 11:30:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5381 invoked by uid 500); 8 Dec 2009 11:30:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5371 invoked by uid 99); 8 Dec 2009 11:30:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 11:30:12 +0000
X-ASF-Spam-Status: No, hits=-2.4 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [202.86.5.95] (HELO smtp108.mail.in.yahoo.com) (202.86.5.95)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 08 Dec 2009 11:30:08 +0000
Received: (qmail 5490 invoked from network); 8 Dec 2009 11:29:45 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=Rua7Ltf7sMVciGQIDxzMp4vnARZ5Z1EveMSZrrXwj+zyszVTOb1/tc/t/AJ+ULVlPYuXvcYEiANsBWvl57YUDZcX7MVgKftWSPPPUcYHoZ6kXv1yh6EsAqlwNxZq26oj0vRIM7hlLYuzJRunaEDSr00kIFSwG456qCwibU12HPM=  ;
Received: from  (emailgane@203.98.194.130 with login)
        by smtp108.mail.in.yahoo.com with SMTP; 08 Dec 2009 16:59:44 +0530 IST
X-Yahoo-SMTP: JObyHkuswBBrNSLZp.Ycd7Boqpr_GQ--
X-YMail-OSG: mKxD2v8VM1m46KJ1lIBNmhURbhmHl8bSzzCZJUP2XGTTDiNO.f1qM_DQmmzgejvT0R6XsXh1ZSGI6LBkxh9fSXoAQlCxjrU8icmXplTwR9QFlN1UR.ou4rX9k3ROkgFK1No.61jRbkcoly8M27ZPCPwBcvhNuOV.woM0ZQ48GeDUqxmp__uNyEsp.zexcNIMsn9Azrvl0b5hDGPd8fx2gmPqXbCQA6A..qkvK_8jfsdRKW6xVBaQOQ--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <001101ca77f9$bd86a380$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <006801ca6f1e$8dc488d0$710bc30a@sv.us.sonicwall.com> <01bf01ca7412$4d8dea60$710bc30a@sv.us.sonicwall.com> <9ac0c6aa0912030452m660fec4byf4c9e368f24b57cf@mail.gmail.com> <020601ca7425$32f57700$710bc30a@sv.us.sonicwall.com> <2ffb6d060912030705r3708b688nf44f810c3ea931f7@mail.gmail.com> <023701ca742f$ed9e2610$710bc30a@sv.us.sonicwall.com> <9ac0c6aa0912030805m437713cclcee1d8b6f77848e9@mail.gmail.com> <026901ca74a2$17552360$710bc30a@sv.us.sonicwall.com> <9ac0c6aa0912040531s6d10b148nf6b175b8bb24e619@mail.gmail.com> <033001ca74eb$be5d42c0$710bc30a@sv.us.sonicwall.com> <9ac0c6aa0912060144m5ce66e7ew5c9d2c5a76375a2f@mail.gmail.com>
Subject: Re: IndexDivisor
Date: Tue, 8 Dec 2009 16:59:40 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138

Thanks Mike...

As i explained before, I created a small app, which loads all the db, =
does term search (using term query) and calculates the memory =
consumption. I tried this with divisor value but after 100 there seems =
to be no difference.

Just load the database with different divisor value and then perform =
warming using TermQuery. I feel there should be some difference when =
opening with different value. But it didn't. I will try to perform the =
same using profiler.

Regards
Ganesh=20


----- Original Message -----=20
From: "Michael McCandless" <lucene@mikemccandless.com>
To: <java-user@lucene.apache.org>
Sent: Sunday, December 06, 2009 3:14 PM
Subject: Re: IndexDivisor


You really have to use a profiler, to trust the RAM measurements.

Certain queries, eg function queries, can load the field cache.  What
kind of queries are you running?

Mike

On Fri, Dec 4, 2009 at 9:11 AM, Ganesh <emailgane@yahoo.co.in> wrote:
> I didn't run with profiler. I created a test app and run that.. I am =
opening multiple database.
>
> IndexReader opened with IndexDivisor: 100 //Open the reader with the =
divisor value
> TermCount: 7046764 //Available unique terms in the db
> Warmup done: //warming up
> Memory: UsedMemory: 4 :FreeMemory:788 //Memory consumed after GC.
>
> I couldn't see the memory difference for the value btw 100 to 10000. I =
will try to run with profiler and get back to you.
>
> Other than terms what all the other things which consumes memory. =
There is no deletions, no norms and i am not doing sorting
>
> Regards
> Ganesh
>
>
> ----- Original Message -----
> From: "Michael McCandless" <lucene@mikemccandless.com>
> To: <java-user@lucene.apache.org>
> Sent: Friday, December 04, 2009 7:01 PM
> Subject: Re: IndexDivisor
>
>
> I'm confused -- what are these attachments? Output from a memory =
profiler?
>
> Can you post the app you created?
>
> Mike
>
> On Fri, Dec 4, 2009 at 12:24 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>> Thanks mike..
>>
>> Please find the attached file. I ran the testing for 1,100,1000,10000 =
divisor value. There is difference from 1 to 100 but there is no =
difference between 100 to 10000.
>>
>> I created a new application, in which i opened all reader and =
searcher and warmed up. Sleep for a minute and close all the searcher =
and reader.
>>
>> There is no deletions, no norms and i am not doing sorting.
>>
>> Regards
>> Ganesh
>>
>>
>>
>> ----- Original Message -----
>> From: "Michael McCandless" <lucene@mikemccandless.com>
>> To: <java-user@lucene.apache.org>
>> Sent: Thursday, December 03, 2009 9:35 PM
>> Subject: Re: IndexDivisor
>>
>>
>> Can you run w/ a memory profiler? I don't trust that gc is truly =
running.
>>
>> Mike
>>
>> On Thu, Dec 3, 2009 at 10:47 AM, Ganesh <emailgane@yahoo.co.in> =
wrote:
>>> I am doing GC before calculating the memory. Even i set my =
indexdivisor to 10000 but there seems to be no change.
>>>
>>> Below are my stats
>>> IndexDivisor Memory
>>> -1 7 MB
>>> 1 486 MB
>>> 100 180 MB
>>> 1000 176 MB.
>>> 10000 176MB
>>>
>>> Regards
>>> Ganesh
>>>
>>> ----- Original Message -----
>>> From: "Danil =C5=A2ORIN" <torindan@gmail.com>
>>> To: <java-user@lucene.apache.org>
>>> Sent: Thursday, December 03, 2009 8:35 PM
>>> Subject: Re: IndexDivisor
>>>
>>>
>>> Run System.gc() exactly before measuring memory usage.
>>>
>>> On sun jvm it will FORCE gc (unless DisableExplicitGC is used).
>>>
>>>
>>> On Thu, Dec 3, 2009 at 16:30, Ganesh <emailgane@yahoo.co.in> wrote:
>>>> Thanks mike.
>>>>
>>>> I am opening the reader and warming it up and then calculating the =
memory consumed.
>>>> long usedMemory =3D runtime.totalMemory() - runtime.freeMemory();
>>>>
>>>> Regards
>>>> Ganesh
>>>>
>>>> ----- Original Message -----
>>>> From: "Michael McCandless" <lucene@mikemccandless.com>
>>>> To: <java-user@lucene.apache.org>
>>>> Sent: Thursday, December 03, 2009 6:22 PM
>>>> Subject: Re: IndexDivisor
>>>>
>>>>
>>>> On Thu, Dec 3, 2009 at 7:15 AM, Ganesh <emailgane@yahoo.co.in> =
wrote:
>>>>
>>>>> Below are my stats
>>>>> IndexDivisor Memory
>>>>> -1 7 MB
>>>>> 1 486 MB
>>>>> 100 180 MB
>>>>> 1000 176 MB.
>>>>
>>>> Do you simply create the IndexWriter & IndexReader, but do no
>>>> searching/indexing?
>>>>
>>>> How are you measuring RAM? You should use a RAM profiler (eg =
YourKit)
>>>> to get the "real" usage, not counting garbage that's yet to be
>>>> collected.
>>>>
>>>> My guess is the shear process of Lucene scanning your terms index
>>>> creates lots of garbage and you're measuring the RAM consumed by =
that
>>>> garbage. The garbage should be harmless (it'll eventually get GCd &
>>>> reused).
>>>>
>>>>> 1. Whether term vector will consume RAM. I think it should only =
consume disk space.
>>>>
>>>> No RAM is consumed.
>>>>
>>>>> 2. By setting RAM buffer for IW, Does it will allocate memory Or =
based on the usage the memory will be allocated / increased.
>>>>
>>>> Only a little RAM is allocated up front, I think. It's only as you
>>>> start indexing docs that the big RAM is really allocated. After a
>>>> flush the RAM is then reused (ie, not freed) for subsequent =
segments.
>>>>
>>>> Mike
>>>>
>>>> =
---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>> Send instant messages to your online friends =
http://in.messenger.yahoo.com
>>>>
>>>> =
---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>> Send instant messages to your online friends =
http://in.messenger.yahoo.com
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> Send instant messages to your online friends =
http://in.messenger.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 08 12:32:09 2009
Return-Path: <java-user-return-43965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81650 invoked from network); 8 Dec 2009 12:32:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Dec 2009 12:32:09 -0000
Received: (qmail 71504 invoked by uid 500); 8 Dec 2009 12:32:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71420 invoked by uid 500); 8 Dec 2009 12:32:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71410 invoked by uid 99); 8 Dec 2009 12:32:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 12:32:07 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.210.192 as permitted sender)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 12:32:04 +0000
Received: by yxe30 with SMTP id 30so5777956yxe.29
        for <java-user@lucene.apache.org>; Tue, 08 Dec 2009 04:31:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=be0FOBIqP5IILjEiY0HCrWdmsoZEyqNS7zJC2uMW1bc=;
        b=rnsOAIAkPIqADL48blHANtOkpTLvX8ygG6nWb5A6ijd6fNxzhVMwaJYhqCCbip6WA+
         woUa5Gi1E1s3Xvlr8oVtOrHvVBZ70UAJIt0z8ynMcsFVQCRKNrasDNGkgVuuFAXwsjNL
         GFaU2tuBfpyNjvcZm/FozpQlzocii6YqdBDhk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=C+Mkp1ktlTkiLN52jVhw00hib7fCaIHJODvmjXXVlCFnkgVMi33SIPQBF4pyLiyOM0
         FZL35WRmPkWzwCSugV5NusI35tS3fjawZzgSLW3AgYBQ1MX7o7Dwog1MCO/lpOs+ICVk
         ONUBb5xckpnkhKZ9irdR3jn1zMOKAAgrtw2/o=
MIME-Version: 1.0
Received: by 10.91.21.25 with SMTP id y25mr3446836agi.66.1260275498632; Tue, 
	08 Dec 2009 04:31:38 -0800 (PST)
Date: Tue, 8 Dec 2009 20:31:38 +0800
Message-ID: <7d94dcde0912080431w28364d09sd7202b7eaf12e25b@mail.gmail.com>
Subject: org.apache.lucene.search.RemoteSearchable missing
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e641dcbc6b434b047a36c1a8

--0016e641dcbc6b434b047a36c1a8
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hi,all,
    I can't not find this class in the downloaded jar and I can't figure ou=
t
what's wrong.
Does anybody here know how to fix it?

--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--0016e641dcbc6b434b047a36c1a8--

From java-user-return-43966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 08 12:33:14 2009
Return-Path: <java-user-return-43966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81826 invoked from network); 8 Dec 2009 12:33:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Dec 2009 12:33:14 -0000
Received: (qmail 73475 invoked by uid 500); 8 Dec 2009 12:33:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73385 invoked by uid 500); 8 Dec 2009 12:33:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73375 invoked by uid 99); 8 Dec 2009 12:33:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 12:33:11 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 74.125.92.25 as permitted sender)
Received: from [74.125.92.25] (HELO qw-out-2122.google.com) (74.125.92.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 12:33:01 +0000
Received: by qw-out-2122.google.com with SMTP id 9so908195qwb.53
        for <java-user@lucene.apache.org>; Tue, 08 Dec 2009 04:32:40 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :x-enigmail-version:content-type:content-transfer-encoding;
        bh=dy0kk4cRTUvwhaghElNZrZ97ZDocCsLOTp6zR6QhrXI=;
        b=kepctgaQ2Zrp0T3pdj+eKbFW7ET18c67YCtCnIn6QaU0T2QP7B1/yQYF0rhpgsrwxP
         JktHI4VP6vJAbxP2sbKP7wyTkkQLNi+CM/eo4EkfV5EPiwwO5NH3DxixGJbDgABxN3p6
         rZ0KtjGTp+mbrETAMy7akopIctg/CFlK75M5U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:x-enigmail-version:content-type
         :content-transfer-encoding;
        b=Lv0goayTSYvgHDE00MoRvfX95AnsVIZTWoCrQ0A2yM8qxUE3nHUefduJiCBYHPd4gW
         LrIKTmBkIJUnX5DbFRDQw+Ms4elOfNgJxneDsYmM6YMdpVmnMoYqDgEW9rRR8zTZG/U5
         mOKvwDUuMHpVzDP45LvtL7z7X+a7H+srz31w8=
Received: by 10.224.93.74 with SMTP id u10mr4484787qam.327.1260275560636;
        Tue, 08 Dec 2009 04:32:40 -0800 (PST)
Received: from ?192.168.1.101? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 2sm10965870qwi.37.2009.12.08.04.32.38
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 08 Dec 2009 04:32:39 -0800 (PST)
Message-ID: <4B1E4762.6030706@gmail.com>
Date: Tue, 08 Dec 2009 07:32:34 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.23 (X11/20090817)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: org.apache.lucene.search.RemoteSearchable missing
References: <7d94dcde0912080431w28364d09sd7202b7eaf12e25b@mail.gmail.com>
In-Reply-To: <7d94dcde0912080431w28364d09sd7202b7eaf12e25b@mail.gmail.com>
X-Enigmail-Version: 0.96.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Weiwei Wang wrote:
> Hi,all,
>     I can't not find this class in the downloaded jar and I can't figure out
> what's wrong.
> Does anybody here know how to fix it?
>
>   
Its now in the remote Contrib.

-- 
- Mark

http://www.lucidimagination.com




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 08 12:39:30 2009
Return-Path: <java-user-return-43967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89236 invoked from network); 8 Dec 2009 12:39:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Dec 2009 12:39:30 -0000
Received: (qmail 82262 invoked by uid 500); 8 Dec 2009 12:39:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82171 invoked by uid 500); 8 Dec 2009 12:39:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82161 invoked by uid 99); 8 Dec 2009 12:39:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 12:39:27 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.211.173 as permitted sender)
Received: from [209.85.211.173] (HELO mail-yw0-f173.google.com) (209.85.211.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 12:39:24 +0000
Received: by ywh3 with SMTP id 3so5100046ywh.22
        for <java-user@lucene.apache.org>; Tue, 08 Dec 2009 04:39:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=praBhDuk+mYxq5xvAOIzRurn4HSvHh94r/7mSFdpL38=;
        b=eSZNPUI+M391RUsI9cEcp0K1/EnnvmAKNvVKaA5slLglqbSuRIgHoKEelLJepuqdvO
         Gqib0Ju43V4WPQZq+ZK/sGGNe1iX07sDptTP9dQOP/RrgfcySUfj13M+Elv4dzGOhky3
         8rf2BJ867GZV53igO90b6F+4jkrkKRURKRPyE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=req51vOVO7PBv1mGEsPg+ZXmS980jOFfXseBOcuRAm6qMnDF1HxVRP0ujpFv/QyY5O
         HlgZJLc4HAU9kFjHkJvgaYYx8+XFZOTLW4nLEbKY9JzSzd4dVcArrZhrkx7BUhbIIYHa
         06kf13nLzWzzmbLS4LgK63iv6tSdFgUyHLeyY=
MIME-Version: 1.0
Received: by 10.91.50.26 with SMTP id c26mr6776395agk.77.1260275943404; Tue, 
	08 Dec 2009 04:39:03 -0800 (PST)
In-Reply-To: <4B1E4762.6030706@gmail.com>
References: <7d94dcde0912080431w28364d09sd7202b7eaf12e25b@mail.gmail.com>
	 <4B1E4762.6030706@gmail.com>
Date: Tue, 8 Dec 2009 20:39:03 +0800
Message-ID: <7d94dcde0912080439s70df4d1em1c69b84d08feff7b@mail.gmail.com>
Subject: Re: org.apache.lucene.search.RemoteSearchable missing
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f87baeecf75b047a36dbfd

--001485f87baeecf75b047a36dbfd
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Thanks, so many changes in 3.0.0

On Tue, Dec 8, 2009 at 8:32 PM, Mark Miller <markrmiller@gmail.com> wrote:

> Weiwei Wang wrote:
> > Hi,all,
> >     I can't not find this class in the downloaded jar and I can't figur=
e
> out
> > what's wrong.
> > Does anybody here know how to fix it?
> >
> >
> Its now in the remote Contrib.
>
> --
> - Mark
>
> http://www.lucidimagination.com
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--001485f87baeecf75b047a36dbfd--

From java-user-return-43968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 08 13:24:48 2009
Return-Path: <java-user-return-43968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 140 invoked from network); 8 Dec 2009 13:24:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Dec 2009 13:24:48 -0000
Received: (qmail 33626 invoked by uid 500); 8 Dec 2009 13:24:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33538 invoked by uid 500); 8 Dec 2009 13:24:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33528 invoked by uid 99); 8 Dec 2009 13:24:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 13:24:45 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.219.217 as permitted sender)
Received: from [209.85.219.217] (HELO mail-ew0-f217.google.com) (209.85.219.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 13:24:42 +0000
Received: by ewy9 with SMTP id 9so2421701ewy.11
        for <java-user@lucene.apache.org>; Tue, 08 Dec 2009 05:24:21 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=QG/EdbGbOhl49DK0RK2rR7ykJHSSw5/ZwI3V5atZfl0=;
        b=iEOlc0Emi4VCNYdZjimFau9zQK0VAjUULp9UWVTMRK4PMOCJMfJ4c5Yn7T1tQ1hFTt
         U9WNZ5N89Dg8Q4rIA6tgcjuuMlGoOGrkwuNdQjqHBqT7eeDIzMqOdMgkysFXKnYRqMsf
         wuEJw7WDgBSBUxKa3A+/2MUc+5wFgYrFNhD8k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=x7VddL/3BOhCYyZhxqRct5V+W3g3KR0YzF+6fQnvhT8/IY9Y3wDPtrsJxxw2tQoFWH
         NSPWRsom0wUP/dBsL+Y4VIhPRasjQ9KI7ASWiq2AXIXr4mzHHeWT2D4t1Kdho6jRXsXi
         fVxb6lbXrUlXeV81HOQDXOQfVKRYkkMdJvjYg=
MIME-Version: 1.0
Received: by 10.216.87.67 with SMTP id x45mr2832190wee.18.1260278661412; Tue, 
	08 Dec 2009 05:24:21 -0800 (PST)
In-Reply-To: <4B1DF5C9.5080109@teamware.com>
References: <4B1DF5C9.5080109@teamware.com>
Date: Tue, 8 Dec 2009 08:24:21 -0500
Message-ID: <359a92830912080524u7fcf47advb28752abaa2b920a@mail.gmail.com>
Subject: Re: TopFieldDocCollector and v3.0.0
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d99eadee76be047a377d2d

--0016e6d99eadee76be047a377d2d
Content-Type: text/plain; charset=ISO-8859-1

You might want to move to 2.9.1 first, find and fix all the deprecations
and *then* move to 3.x.

It seems like more work, but it's actually not. Especially if you have
reasonable
unit tests. Since lots of effort has been put into maintaining backwards
compatibility in the 2.X versions, 2.9.1 should "just work" for you. Then
you can remove the deprecated methods a little bit at a time rather than
all at once. It's always tempting to do things in "one big edit", but then
you
never know which one of the many changes actually broke something. Unless
you can code perfectly the first time, in which case I'd recommend we hire
you and pay you a gazillion dollars <G>....

Once all the deprecations are removed from 2.9.1, you shouldn't have to do
anything to move to 3.x. So you get the best of both worlds....

Best
Erick


On Tue, Dec 8, 2009 at 1:44 AM, Antony Bowesman <adb@teamware.com> wrote:

> I'm on 2.3.2 and looking to move to 2.9.1 or 3.0.0
>
> In 2.9.1 TopFieldDocCollector is
>
> "Deprecated. Please use TopFieldCollector instead."
>
> in 3.0.0 TopFieldCollector says
>
> NOTE: This API is experimental and might change in incompatible ways in the
> next release
>
> What is the suggested path for migrating TopFieldDocCollector usage?
>
> Antony
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6d99eadee76be047a377d2d--

From java-user-return-43969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 08 13:27:33 2009
Return-Path: <java-user-return-43969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2037 invoked from network); 8 Dec 2009 13:27:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Dec 2009 13:27:33 -0000
Received: (qmail 44008 invoked by uid 500); 8 Dec 2009 13:27:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43942 invoked by uid 500); 8 Dec 2009 13:27:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43932 invoked by uid 99); 8 Dec 2009 13:27:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 13:27:30 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.219.217 as permitted sender)
Received: from [209.85.219.217] (HELO mail-ew0-f217.google.com) (209.85.219.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 13:27:22 +0000
Received: by ewy9 with SMTP id 9so2424666ewy.11
        for <java-user@lucene.apache.org>; Tue, 08 Dec 2009 05:27:02 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=CRTMbWYyOxkCctzbykLEh3yrq64pvynVm7PiD3Jo73o=;
        b=m+wF5Wdfu3i7I6bFBIfyXy1VAMbnCN7OsPdNfl8TlQLRaF83ZxROnT/VyiI5g4fHxB
         BGbRWRFBZFry9mcxEtH5lBHke9xcKnY8cPPqwryp9GkTJLrTfEmtReBOPegSZQwZb4EP
         OZ6yjxJCQzDBfwwvv3xe8giYcYvtD/xgfklNs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=d8I/vgTLhxgrK5ZfwLTanKxz2ORcbPKGi48/KrIuVEcy9910CltAQMvwkx5u/HhK15
         7U6Y7hzmeAox0B2GiVBnMW802VoVthWs7W4UU4WtFu+IUPBFIpVHEJJzdDGc+JbEqCI0
         mx0JRy33im3hfTIGzXOQsJWXmSVNf6UZnPhbI=
MIME-Version: 1.0
Received: by 10.216.85.144 with SMTP id u16mr2851711wee.3.1260278822068; Tue, 
	08 Dec 2009 05:27:02 -0800 (PST)
In-Reply-To: <894103.90548.qm@web110307.mail.gq1.yahoo.com>
References: <824410.56949.qm@web110315.mail.gq1.yahoo.com>
	 <85d3c3b60912072230ida12c40m5594f97f24aaa398@mail.gmail.com>
	 <758919.85996.qm@web110302.mail.gq1.yahoo.com>
	 <9ac0c6aa0912080201t7b514d7av76fc5c93bcdcbba7@mail.gmail.com>
	 <894103.90548.qm@web110307.mail.gq1.yahoo.com>
Date: Tue, 8 Dec 2009 08:27:02 -0500
Message-ID: <359a92830912080527j31d97fabgb0f1dd6c4e670011@mail.gmail.com>
Subject: Re: IndexWriter creates multiple .cfs files
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d58b9a81e2fb047a37878d
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d58b9a81e2fb047a37878d
Content-Type: text/plain; charset=ISO-8859-1

If you're using reopen, be sure to close the old reader
if the new one isn't identical, something like:

IndexReader new = r.reopen();
 if (new != reader) {
   ...     // reader was reopened
   reader.close();
 }
 reader = new;


Erick


On Tue, Dec 8, 2009 at 6:13 AM, Cool The Breezer
<techcool.kumar@yahoo.com>wrote:

> Thanks Mike for your timely suggestion. Somehow readers are not reopened
> properly.
>
>
>
>
>
> ----- Original Message ----
> From: Michael McCandless <lucene@mikemccandless.com>
> To: java-user@lucene.apache.org
> Sent: Tue, December 8, 2009 3:31:22 PM
> Subject: Re: IndexWriter creates multiple .cfs files
>
> IndexWriter takes care of merging the CFSs down, over time.  Have you
> changed your mergeFactor?  It's odd to see 100s of CFSs.
>
> Or maybe you're not closing the old reader on reopening a new one?
> That would prevent deletion of the files.
>
> Mike
>
> On Tue, Dec 8, 2009 at 1:43 AM, Cool The Breezer
> <techcool.kumar@yahoo.com> wrote:
> > Thanks Jason for quick reply and suggestion. I am definitely going to
> change directory implementation policy to have one .cfs file instead of
> hundreds in one directory.
> >
> > regards,
> > Ranjan
> >
> >
> > ----- Original Message ----
> > From: Jason Rutherglen <jason.rutherglen@gmail.com>
> > To: java-user@lucene.apache.org
> > Sent: Tue, December 8, 2009 12:00:59 PM
> > Subject: Re: IndexWriter creates multiple .cfs files
> >
> > RB,
> >
> > That's expected behavior, each .cfs corresponds to all of a
> > segment's files. You could write your own directory
> > implementation that underneath writes to a single file. It's
> > usually good to present what you're trying to accomplish (i.e.
> > the why).
> >
> > Jason
> >
> > On Mon, Dec 7, 2009 at 10:25 PM, Cool The Breezer
> > <techcool.kumar@yahoo.com> wrote:
> >> Hello Group,
> >>                  I am continuously updating an index and at the same
> time searcher also searches the index, which resulted in multiple .cfs files
> for each commit by IndexWriter. I am not sure whether this is an expected
> behavior or I need to merge each time after IndexWriter commits. In between
> the writer's commit, I reopen the IndexReader but still .cfs files keep on
> increasing. I would like to have one .cfs file which can be reopened
> frequently by reader and at the same time progressive commit by writer. Is
> it possible?
> >>
> >> - RB
> >>
> >>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6d58b9a81e2fb047a37878d--

From java-user-return-43970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 08 13:46:56 2009
Return-Path: <java-user-return-43970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14212 invoked from network); 8 Dec 2009 13:46:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Dec 2009 13:46:56 -0000
Received: (qmail 64026 invoked by uid 500); 8 Dec 2009 13:46:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63926 invoked by uid 500); 8 Dec 2009 13:46:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63911 invoked by uid 99); 8 Dec 2009 13:46:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 13:46:53 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.225] (HELO mail-gx0-f225.google.com) (209.85.217.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 13:46:51 +0000
Received: by gxk25 with SMTP id 25so2990576gxk.5
        for <java-user@lucene.apache.org>; Tue, 08 Dec 2009 05:46:30 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.77.24 with SMTP id z24mr14039495yba.41.1260279988588; Tue, 
	08 Dec 2009 05:46:28 -0800 (PST)
In-Reply-To: <001101ca77f9$bd86a380$710bc30a@sv.us.sonicwall.com>
References: <006801ca6f1e$8dc488d0$710bc30a@sv.us.sonicwall.com>
	 <020601ca7425$32f57700$710bc30a@sv.us.sonicwall.com>
	 <2ffb6d060912030705r3708b688nf44f810c3ea931f7@mail.gmail.com>
	 <023701ca742f$ed9e2610$710bc30a@sv.us.sonicwall.com>
	 <9ac0c6aa0912030805m437713cclcee1d8b6f77848e9@mail.gmail.com>
	 <026901ca74a2$17552360$710bc30a@sv.us.sonicwall.com>
	 <9ac0c6aa0912040531s6d10b148nf6b175b8bb24e619@mail.gmail.com>
	 <033001ca74eb$be5d42c0$710bc30a@sv.us.sonicwall.com>
	 <9ac0c6aa0912060144m5ce66e7ew5c9d2c5a76375a2f@mail.gmail.com>
	 <001101ca77f9$bd86a380$710bc30a@sv.us.sonicwall.com>
Date: Tue, 8 Dec 2009 08:46:28 -0500
Message-ID: <9ac0c6aa0912080546w71b4f69ft44d54bbacaf230ce@mail.gmail.com>
Subject: Re: IndexDivisor
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Visiting all the index terms, which must be done for any divisor !=3D
-1, generates a good amount of garbage.  So if you're including that
garbage in your memory measurement, that would explain what you're
seeing, and switching to a memory profiler should show the true RAM
usage.

Mike

On Tue, Dec 8, 2009 at 6:29 AM, Ganesh <emailgane@yahoo.co.in> wrote:
> Thanks Mike...
>
> As i explained before, I created a small app, which loads all the db, doe=
s term search (using term query) and calculates the memory consumption. I t=
ried this with divisor value but after 100 there seems to be no difference.
>
> Just load the database with different divisor value and then perform warm=
ing using TermQuery. I feel there should be some difference when opening wi=
th different value. But it didn't. I will try to perform the same using pro=
filer.
>
> Regards
> Ganesh
>
>
> ----- Original Message -----
> From: "Michael McCandless" <lucene@mikemccandless.com>
> To: <java-user@lucene.apache.org>
> Sent: Sunday, December 06, 2009 3:14 PM
> Subject: Re: IndexDivisor
>
>
> You really have to use a profiler, to trust the RAM measurements.
>
> Certain queries, eg function queries, can load the field cache. =C2=A0Wha=
t
> kind of queries are you running?
>
> Mike
>
> On Fri, Dec 4, 2009 at 9:11 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>> I didn't run with profiler. I created a test app and run that.. I am ope=
ning multiple database.
>>
>> IndexReader opened with IndexDivisor: 100 //Open the reader with the div=
isor value
>> TermCount: 7046764 //Available unique terms in the db
>> Warmup done: //warming up
>> Memory: UsedMemory: 4 :FreeMemory:788 //Memory consumed after GC.
>>
>> I couldn't see the memory difference for the value btw 100 to 10000. I w=
ill try to run with profiler and get back to you.
>>
>> Other than terms what all the other things which consumes memory. There =
is no deletions, no norms and i am not doing sorting
>>
>> Regards
>> Ganesh
>>
>>
>> ----- Original Message -----
>> From: "Michael McCandless" <lucene@mikemccandless.com>
>> To: <java-user@lucene.apache.org>
>> Sent: Friday, December 04, 2009 7:01 PM
>> Subject: Re: IndexDivisor
>>
>>
>> I'm confused -- what are these attachments? Output from a memory profile=
r?
>>
>> Can you post the app you created?
>>
>> Mike
>>
>> On Fri, Dec 4, 2009 at 12:24 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>>> Thanks mike..
>>>
>>> Please find the attached file. I ran the testing for 1,100,1000,10000 d=
ivisor value. There is difference from 1 to 100 but there is no difference =
between 100 to 10000.
>>>
>>> I created a new application, in which i opened all reader and searcher =
and warmed up. Sleep for a minute and close all the searcher and reader.
>>>
>>> There is no deletions, no norms and i am not doing sorting.
>>>
>>> Regards
>>> Ganesh
>>>
>>>
>>>
>>> ----- Original Message -----
>>> From: "Michael McCandless" <lucene@mikemccandless.com>
>>> To: <java-user@lucene.apache.org>
>>> Sent: Thursday, December 03, 2009 9:35 PM
>>> Subject: Re: IndexDivisor
>>>
>>>
>>> Can you run w/ a memory profiler? I don't trust that gc is truly runnin=
g.
>>>
>>> Mike
>>>
>>> On Thu, Dec 3, 2009 at 10:47 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>>>> I am doing GC before calculating the memory. Even i set my indexdiviso=
r to 10000 but there seems to be no change.
>>>>
>>>> Below are my stats
>>>> IndexDivisor Memory
>>>> -1 7 MB
>>>> 1 486 MB
>>>> 100 180 MB
>>>> 1000 176 MB.
>>>> 10000 176MB
>>>>
>>>> Regards
>>>> Ganesh
>>>>
>>>> ----- Original Message -----
>>>> From: "Danil =C5=A2ORIN" <torindan@gmail.com>
>>>> To: <java-user@lucene.apache.org>
>>>> Sent: Thursday, December 03, 2009 8:35 PM
>>>> Subject: Re: IndexDivisor
>>>>
>>>>
>>>> Run System.gc() exactly before measuring memory usage.
>>>>
>>>> On sun jvm it will FORCE gc (unless DisableExplicitGC is used).
>>>>
>>>>
>>>> On Thu, Dec 3, 2009 at 16:30, Ganesh <emailgane@yahoo.co.in> wrote:
>>>>> Thanks mike.
>>>>>
>>>>> I am opening the reader and warming it up and then calculating the me=
mory consumed.
>>>>> long usedMemory =3D runtime.totalMemory() - runtime.freeMemory();
>>>>>
>>>>> Regards
>>>>> Ganesh
>>>>>
>>>>> ----- Original Message -----
>>>>> From: "Michael McCandless" <lucene@mikemccandless.com>
>>>>> To: <java-user@lucene.apache.org>
>>>>> Sent: Thursday, December 03, 2009 6:22 PM
>>>>> Subject: Re: IndexDivisor
>>>>>
>>>>>
>>>>> On Thu, Dec 3, 2009 at 7:15 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>>>>>
>>>>>> Below are my stats
>>>>>> IndexDivisor Memory
>>>>>> -1 7 MB
>>>>>> 1 486 MB
>>>>>> 100 180 MB
>>>>>> 1000 176 MB.
>>>>>
>>>>> Do you simply create the IndexWriter & IndexReader, but do no
>>>>> searching/indexing?
>>>>>
>>>>> How are you measuring RAM? You should use a RAM profiler (eg YourKit)
>>>>> to get the "real" usage, not counting garbage that's yet to be
>>>>> collected.
>>>>>
>>>>> My guess is the shear process of Lucene scanning your terms index
>>>>> creates lots of garbage and you're measuring the RAM consumed by that
>>>>> garbage. The garbage should be harmless (it'll eventually get GCd &
>>>>> reused).
>>>>>
>>>>>> 1. Whether term vector will consume RAM. I think it should only cons=
ume disk space.
>>>>>
>>>>> No RAM is consumed.
>>>>>
>>>>>> 2. By setting RAM buffer for IW, Does it will allocate memory Or bas=
ed on the usage the memory will be allocated / increased.
>>>>>
>>>>> Only a little RAM is allocated up front, I think. It's only as you
>>>>> start indexing docs that the big RAM is really allocated. After a
>>>>> flush the RAM is then reused (ie, not freed) for subsequent segments.
>>>>>
>>>>> Mike
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>> Send instant messages to your online friends http://in.messenger.yaho=
o.com
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>> Send instant messages to your online friends http://in.messenger.yahoo=
.com
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>> Send instant messages to your online friends http://in.messenger.yahoo.c=
om
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> Send instant messages to your online friends http://in.messenger.yahoo.co=
m
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 08 14:41:11 2009
Return-Path: <java-user-return-43971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40728 invoked from network); 8 Dec 2009 14:41:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Dec 2009 14:41:11 -0000
Received: (qmail 40403 invoked by uid 500); 8 Dec 2009 14:41:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40316 invoked by uid 500); 8 Dec 2009 14:41:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40306 invoked by uid 99); 8 Dec 2009 14:41:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 14:41:07 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 14:40:56 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 31AF745F055
	for <java-user@lucene.apache.org>; Tue,  8 Dec 2009 15:40:36 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id ckj3McMdNiaw for <java-user@lucene.apache.org>;
	Tue,  8 Dec 2009 15:40:26 +0100 (CET)
Received: from VEGA (unknown [134.102.249.75])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 3B8B345EFF2
	for <java-user@lucene.apache.org>; Tue,  8 Dec 2009 15:40:26 +0100 (CET)
Thread-Index: Acp4Cdnxf05P32z4TYy5RiVawDUd4gACiwkQ
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <4B1DF5C9.5080109@teamware.com> <359a92830912080524u7fcf47advb28752abaa2b920a@mail.gmail.com>
Subject: RE: TopFieldDocCollector and v3.0.0
Date: Tue, 8 Dec 2009 15:40:24 +0100
Message-ID: <9D84AF8B8E444AA1B6B9C921F8F1721A@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <359a92830912080524u7fcf47advb28752abaa2b920a@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

The only difference to 3.0 is, that after moving to 3.0, you can remove lots
of unsafe casts and use generics (which does not work in 2.9, as it is Java
1.4 only). So this is the good thing when directly moving to 3.0.

But as the release notes for 3.0 denote, for new users that want to start
new projects, 3.0 is the best start because they get a clean generified and
type safe API (whichout old crap). For users porting from older versions,
the move through 2.9.1 is recommended. After the move to 3.0, you can (but
you must not) further update your code to use generics, which is not really
needed but will remove all compiler warnings.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Tuesday, December 08, 2009 2:24 PM
> To: java-user@lucene.apache.org
> Subject: Re: TopFieldDocCollector and v3.0.0
> 
> You might want to move to 2.9.1 first, find and fix all the deprecations
> and *then* move to 3.x.
> 
> It seems like more work, but it's actually not. Especially if you have
> reasonable
> unit tests. Since lots of effort has been put into maintaining backwards
> compatibility in the 2.X versions, 2.9.1 should "just work" for you. Then
> you can remove the deprecated methods a little bit at a time rather than
> all at once. It's always tempting to do things in "one big edit", but then
> you
> never know which one of the many changes actually broke something. Unless
> you can code perfectly the first time, in which case I'd recommend we hire
> you and pay you a gazillion dollars <G>....
> 
> Once all the deprecations are removed from 2.9.1, you shouldn't have to do
> anything to move to 3.x. So you get the best of both worlds....
> 
> Best
> Erick
> 
> 
> On Tue, Dec 8, 2009 at 1:44 AM, Antony Bowesman <adb@teamware.com> wrote:
> 
> > I'm on 2.3.2 and looking to move to 2.9.1 or 3.0.0
> >
> > In 2.9.1 TopFieldDocCollector is
> >
> > "Deprecated. Please use TopFieldCollector instead."
> >
> > in 3.0.0 TopFieldCollector says
> >
> > NOTE: This API is experimental and might change in incompatible ways in
> the
> > next release
> >
> > What is the suggested path for migrating TopFieldDocCollector usage?
> >
> > Antony
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 08 15:13:14 2009
Return-Path: <java-user-return-43972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49843 invoked from network); 8 Dec 2009 15:13:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Dec 2009 15:13:14 -0000
Received: (qmail 83749 invoked by uid 500); 8 Dec 2009 15:13:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83437 invoked by uid 500); 8 Dec 2009 15:13:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83401 invoked by uid 99); 8 Dec 2009 15:13:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 15:13:09 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of reva.phanindra@gmail.com designates 209.85.220.224 as permitted sender)
Received: from [209.85.220.224] (HELO mail-fx0-f224.google.com) (209.85.220.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 15:13:07 +0000
Received: by fxm24 with SMTP id 24so5451372fxm.11
        for <java-user@lucene.apache.org>; Tue, 08 Dec 2009 07:12:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=ke8EaywNFr82N+yOSpB5uI/xhD9VgO/Z/2Dy/8cwywM=;
        b=RKVIwYhnUXwlNtx1ZV1WOcWg8YPR0EME4DzQ2jH3+NSsYBE6SVMyKjIejTaU7Rcxi2
         wLY0Es3znJ3OyBwSDK8798mRmkH1AhV9pkvTNZdx8+dAk5K91WHyuIbd/wE0FhVGApW5
         EBTM70Eu1ewt5UNChOfyi+oqKVZfHE4ARXSrs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=oR0rHkJVf90uL+lF4AWneE/Q+gP4LEc21Thf+t/hE6aIhLwaK7RAwYPl3yyQ2uURRj
         4h+kOuOG9rhmIVeHUcBg6/Lmzm+GcNBdFT2bBEXectau1xzd4xSPgEoH77jo09BUFBF6
         kSl5mI9nIk5wx2hyKe/HlXcgbbUv3yUoulw04=
MIME-Version: 1.0
Received: by 10.239.179.98 with SMTP id c34mr812988hbg.17.1260285166565; Tue, 
	08 Dec 2009 07:12:46 -0800 (PST)
Date: Tue, 8 Dec 2009 16:12:46 +0100
Message-ID: <dc3d8a2a0912080712v2239d6f8n269dac2277ca3c32@mail.gmail.com>
Subject: question related to Indexing
From: Phanindra Reva <reva.phanindra@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Hello All,
              I am a newbie using Lucene. To be brief, I am just
wondering whether is there a point where we get the access to the
org.apache.lucene.document.Document (which is being indexed at the
moment)  after the analysing part is completed but exactly before it
is added to the index. My whole aim is to modify all the field names
present in the document before its being added to the index, but I
need those field names un-edited during the analysis part.
   If it seems strange.. please don't mind.
Thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 08 15:56:20 2009
Return-Path: <java-user-return-43973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69581 invoked from network); 8 Dec 2009 15:56:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Dec 2009 15:56:20 -0000
Received: (qmail 85542 invoked by uid 500); 8 Dec 2009 15:56:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85454 invoked by uid 500); 8 Dec 2009 15:56:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85444 invoked by uid 99); 8 Dec 2009 15:56:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 15:56:17 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.220.224 as permitted sender)
Received: from [209.85.220.224] (HELO mail-fx0-f224.google.com) (209.85.220.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 15:56:14 +0000
Received: by fxm24 with SMTP id 24so5498644fxm.11
        for <java-user@lucene.apache.org>; Tue, 08 Dec 2009 07:55:53 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=bFaKWDWIGej5pISTS/5ibdwJzAhMcfIoOigH1J0adP8=;
        b=dR0EVjV0jVPR2TC3dyXyXjheRSNEgb+j1ZRkn4r3+8n3h0Up7yY++UXRAvZiOzPLlq
         vz61fmf1BjR5B7RAj3J7CtntH1BYTDdjuu+Njjem0ojd1Q3Jfg2q9G+ypCFCEF1NNLEu
         GbkFrefpovdEXUfsn+g4pcfmtLo4th2MfZ8uc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Ml5JgqEzKJscwyX77kkxbdmbIAQjRgNn+zcjOyk3C6FdY7kFiDZdgt5hvnP/2GI9Ob
         vSerVYfGYXwhg4yLTFwr1Gg+5t/uT/QdNy0exTB7jdCeRRLjs+VcHBvv/YqXMTuWpapF
         V44h2dUrI40htUc6CuvASAg8tKabpS/Q5tI5M=
MIME-Version: 1.0
Received: by 10.216.87.67 with SMTP id x45mr2886887wee.18.1260287752748; Tue, 
	08 Dec 2009 07:55:52 -0800 (PST)
In-Reply-To: <dc3d8a2a0912080712v2239d6f8n269dac2277ca3c32@mail.gmail.com>
References: <dc3d8a2a0912080712v2239d6f8n269dac2277ca3c32@mail.gmail.com>
Date: Tue, 8 Dec 2009 10:55:52 -0500
Message-ID: <359a92830912080755t53ed8447v6eb5b753a8282965@mail.gmail.com>
Subject: Re: question related to Indexing
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d99eadd13d7a047a399ba1

--0016e6d99eadd13d7a047a399ba1
Content-Type: text/plain; charset=ISO-8859-1

You're right, it *does* seem strange <G>....

I'm having a really hard time imagining a use-case
for this capability, so it's hard to suggest
an approach. Perhaps you could supply
an outline of your use-case? This may be
an XY problem.

Best
Erick

On Tue, Dec 8, 2009 at 10:12 AM, Phanindra Reva <reva.phanindra@gmail.com>wrote:

> Hello All,
>              I am a newbie using Lucene. To be brief, I am just
> wondering whether is there a point where we get the access to the
> org.apache.lucene.document.Document (which is being indexed at the
> moment)  after the analysing part is completed but exactly before it
> is added to the index. My whole aim is to modify all the field names
> present in the document before its being added to the index, but I
> need those field names un-edited during the analysis part.
>   If it seems strange.. please don't mind.
> Thanks.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6d99eadd13d7a047a399ba1--

From java-user-return-43974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 08 16:05:08 2009
Return-Path: <java-user-return-43974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73082 invoked from network); 8 Dec 2009 16:05:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Dec 2009 16:05:08 -0000
Received: (qmail 96157 invoked by uid 500); 8 Dec 2009 16:05:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96086 invoked by uid 500); 8 Dec 2009 16:05:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96076 invoked by uid 99); 8 Dec 2009 16:05:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 16:05:05 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 16:05:03 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NI2YN-0003V6-05
	for java-user@lucene.apache.org; Tue, 08 Dec 2009 08:04:43 -0800
Message-ID: <26696184.post@talk.nabble.com>
Date: Tue, 8 Dec 2009 08:04:42 -0800 (PST)
From: kanayo <richies4all@gmail.com>
To: java-user@lucene.apache.org
Subject: Problem searching field with % as value
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: richies4all@gmail.com


Hi,

I am a newbie to lucene. I am using Standard Analyzer in my lucene project. 
I am indexing some fields which may contain only "%" as a field value and it
indexes fine and i can view the value against the field in the index using
Luke.

However when i try to retrieve the same field using indexsearcher and
passing "%" as a query parameter nothing is retrieved. It is simply being
ignored. I have also tried to escape the "%" while searching but still no
results.

Is there anything am not doing right?

Thanks in advance for your assistance.


-- 
View this message in context: http://old.nabble.com/Problem-searching-field-with---as-value-tp26696184p26696184.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 08 16:16:55 2009
Return-Path: <java-user-return-43975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78990 invoked from network); 8 Dec 2009 16:16:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Dec 2009 16:16:55 -0000
Received: (qmail 18572 invoked by uid 500); 8 Dec 2009 16:16:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18490 invoked by uid 500); 8 Dec 2009 16:16:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18474 invoked by uid 99); 8 Dec 2009 16:16:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 16:16:49 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of reva.phanindra@gmail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 16:16:47 +0000
Received: by fg-out-1718.google.com with SMTP id e12so1125833fga.5
        for <java-user@lucene.apache.org>; Tue, 08 Dec 2009 08:16:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=D4ZwZWbkZXY7W4e5M8pi75wUVMjKmONo0GR/c++CtgI=;
        b=VGUJIbzjGG2cB3hau3p7WAV1hUBJ7gg+fRiRvbF9yOJ55wZdPy6VKtH1i9uGmY0KAC
         VMoPkJM1+drUPRMfXztmMKcerNWYX4k7zGyJKu8UcoqTHWayyYVZYbp1XaAVTLTjbln2
         QKgMZ41V6PfuzWvfS1l9XO6lu0JDZkuKz1xDg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=tHv8dFR/z/+CXVQxQTzlA4nNzo1LpgNK2MrPKbB0AFjC/SmbPKr42j8BDIZ28LRX5k
         8yVH/0LXd4hUrJzi7f3d3GIx+0GVhb7+KhBi5PLXiHHq6aDfhQdFaJzGEhASpIofcj49
         bXKnpkAd+XnjcqUAwokS9vSR3u11UC4TRWFfM=
MIME-Version: 1.0
Received: by 10.239.139.215 with SMTP id u23mr865487hbu.28.1260288986279; Tue, 
	08 Dec 2009 08:16:26 -0800 (PST)
In-Reply-To: <359a92830912080755t53ed8447v6eb5b753a8282965@mail.gmail.com>
References: <dc3d8a2a0912080712v2239d6f8n269dac2277ca3c32@mail.gmail.com>
	 <359a92830912080755t53ed8447v6eb5b753a8282965@mail.gmail.com>
Date: Tue, 8 Dec 2009 17:16:25 +0100
Message-ID: <dc3d8a2a0912080816j31b92663tc0eac853bfdce861@mail.gmail.com>
Subject: Re: question related to Indexing
From: Phanindra Reva <reva.phanindra@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hello,
        Thanks for the reply. *strange* was expected. I am trying to
store field names as payloads, so I need unedited field names during
analysis part. And later my plan is to replace all the field names
with a default value and then store the document in the index. So, If
its possible to get the reference of the Document after the analysis,
I could modify all the field names. Even a way of modifying ( of
course , it should be after analysis and before adding to the index )
the field-name values that are going to be added to the index will
suffice.
     I guess.. this time you feel its much more strange, but that's my
task for which above mentioned is one way to accomplish.
Thanks.

On Tue, Dec 8, 2009 at 4:55 PM, Erick Erickson <erickerickson@gmail.com> wr=
ote:
> You're right, it *does* seem strange <G>....
>
> I'm having a really hard time imagining a use-case
> for this capability, so it's hard to suggest
> an approach. Perhaps you could supply
> an outline of your use-case? This may be
> an XY problem.
>
> Best
> Erick
>
> On Tue, Dec 8, 2009 at 10:12 AM, Phanindra Reva <reva.phanindra@gmail.com=
>wrote:
>
>> Hello All,
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0I am a newbie using Lucene. To be brief, I am=
 just
>> wondering whether is there a point where we get the access to the
>> org.apache.lucene.document.Document (which is being indexed at the
>> moment) =A0after the analysing part is completed but exactly before it
>> is added to the index. My whole aim is to modify all the field names
>> present in the document before its being added to the index, but I
>> need those field names un-edited during the analysis part.
>> =A0 If it seems strange.. please don't mind.
>> Thanks.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 08 16:20:28 2009
Return-Path: <java-user-return-43976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79756 invoked from network); 8 Dec 2009 16:20:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Dec 2009 16:20:28 -0000
Received: (qmail 22665 invoked by uid 500); 8 Dec 2009 16:20:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22579 invoked by uid 500); 8 Dec 2009 16:20:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22569 invoked by uid 99); 8 Dec 2009 16:20:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 16:20:26 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.220.224 as permitted sender)
Received: from [209.85.220.224] (HELO mail-fx0-f224.google.com) (209.85.220.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 16:20:23 +0000
Received: by fxm24 with SMTP id 24so5525069fxm.11
        for <java-user@lucene.apache.org>; Tue, 08 Dec 2009 08:20:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=AU8oTiRMHuKbjNo96yS2uus2CsitH5QfHyBc99JZGy8=;
        b=on70jrt4AM1pUR8Z9OCahp1gNxBqJpQhNdHq3lXM3f+KDXM+dNuilDNpNw6VYKcA5T
         ENg1jPqYPyGYsHQixw3YAtpHQIkAtOIbKsutZjT+/SKpMc0X9XbLzd7D8uk5qR6xGPjs
         U4GIHJab1/MCYW0iiUpyxBJcglrtd6odW6Lic=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=qc5gNJpWf32rHJ1Q1wpSTqEFy4FZ597mrsq9nE/UaDxh/4/T2wyjUIdp6bJ5JqdJZO
         OqAAhqAsZAezhmPAYtF6A/LKyFeh3cea4XpTi/gl2zIC89+H4U0B2dhzoEPNA/1OJf/R
         fwAB7HyAA0OReh0h/HoQXyCjFa5CjaeJUQ6Vs=
MIME-Version: 1.0
Received: by 10.216.90.14 with SMTP id d14mr995040wef.30.1260289201700; Tue, 
	08 Dec 2009 08:20:01 -0800 (PST)
In-Reply-To: <26696184.post@talk.nabble.com>
References: <26696184.post@talk.nabble.com>
Date: Tue, 8 Dec 2009 11:20:01 -0500
Message-ID: <359a92830912080820yed97137n2bc1ed9c4e79a120@mail.gmail.com>
Subject: Re: Problem searching field with % as value
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d77e912e8054047a39f2ec

--0016e6d77e912e8054047a39f2ec
Content-Type: text/plain; charset=ISO-8859-1

Try printing out query.toString() to see what's actually being
sent to the searcher.

You can try the same thing in Luke, specifying StandardAnalyzer
to parse queries.

Are you sure you're specifying the fields in the query and not just the
'%'? That would go against your default field.

When you say that you can see the fields in luke, are you storing the field?
Because what you may be seeing is the *stored* value rather than the
*tokens*.
Make sure you're looking at the tokens in Luke..

If none of that helps, could you post a code snippet or two (index and
query)?

Best
Erick

On Tue, Dec 8, 2009 at 11:04 AM, kanayo <richies4all@gmail.com> wrote:

>
> Hi,
>
> I am a newbie to lucene. I am using Standard Analyzer in my lucene project.
> I am indexing some fields which may contain only "%" as a field value and
> it
> indexes fine and i can view the value against the field in the index using
> Luke.
>
> However when i try to retrieve the same field using indexsearcher and
> passing "%" as a query parameter nothing is retrieved. It is simply being
> ignored. I have also tried to escape the "%" while searching but still no
> results.
>
> Is there anything am not doing right?
>
> Thanks in advance for your assistance.
>
>
> --
> View this message in context:
> http://old.nabble.com/Problem-searching-field-with---as-value-tp26696184p26696184.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6d77e912e8054047a39f2ec--

From java-user-return-43977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 08 17:02:57 2009
Return-Path: <java-user-return-43977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94125 invoked from network); 8 Dec 2009 17:02:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Dec 2009 17:02:57 -0000
Received: (qmail 81332 invoked by uid 500); 8 Dec 2009 17:02:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81256 invoked by uid 500); 8 Dec 2009 17:02:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81242 invoked by uid 99); 8 Dec 2009 17:02:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 17:02:53 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 17:02:43 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NI3SA-0005FR-Nx
	for java-user@lucene.apache.org; Tue, 08 Dec 2009 09:02:22 -0800
Message-ID: <26696993.post@talk.nabble.com>
Date: Tue, 8 Dec 2009 09:02:22 -0800 (PST)
From: kanayo <richies4all@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem searching field with % as value
In-Reply-To: <359a92830912080820yed97137n2bc1ed9c4e79a120@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: richies4all@gmail.com
References: <26696184.post@talk.nabble.com> <359a92830912080820yed97137n2bc1ed9c4e79a120@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks for your reply Erick.

In Luke, its also not working. I tried to retrieving values from the field
by specifying the field as the search field and then specify % as the search
parameter which using StandardAnalyzer but nothing is displayed. Also while
Luke shows the query details for other search values, it dosent show query
details for search value of %.

I think it is not Tokenized in the index. Is there anything else i can do to
be able to retrieve values from fields comprising of just %?

Thanks for your assistance.


Erick Erickson wrote:
> 
> Try printing out query.toString() to see what's actually being
> sent to the searcher.
> 
> You can try the same thing in Luke, specifying StandardAnalyzer
> to parse queries.
> 
> Are you sure you're specifying the fields in the query and not just the
> '%'? That would go against your default field.
> 
> When you say that you can see the fields in luke, are you storing the
> field?
> Because what you may be seeing is the *stored* value rather than the
> *tokens*.
> Make sure you're looking at the tokens in Luke..
> 
> If none of that helps, could you post a code snippet or two (index and
> query)?
> 
> Best
> Erick
> 
> On Tue, Dec 8, 2009 at 11:04 AM, kanayo <richies4all@gmail.com> wrote:
> 
>>
>> Hi,
>>
>> I am a newbie to lucene. I am using Standard Analyzer in my lucene
>> project.
>> I am indexing some fields which may contain only "%" as a field value and
>> it
>> indexes fine and i can view the value against the field in the index
>> using
>> Luke.
>>
>> However when i try to retrieve the same field using indexsearcher and
>> passing "%" as a query parameter nothing is retrieved. It is simply being
>> ignored. I have also tried to escape the "%" while searching but still no
>> results.
>>
>> Is there anything am not doing right?
>>
>> Thanks in advance for your assistance.
>>
>>
>> --
>> View this message in context:
>> http://old.nabble.com/Problem-searching-field-with---as-value-tp26696184p26696184.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://old.nabble.com/Problem-searching-field-with---as-value-tp26696184p26696993.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 08 17:19:18 2009
Return-Path: <java-user-return-43978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99648 invoked from network); 8 Dec 2009 17:19:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Dec 2009 17:19:18 -0000
Received: (qmail 7520 invoked by uid 500); 8 Dec 2009 17:19:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7389 invoked by uid 500); 8 Dec 2009 17:19:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7366 invoked by uid 99); 8 Dec 2009 17:19:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 17:19:13 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.220.224 as permitted sender)
Received: from [209.85.220.224] (HELO mail-fx0-f224.google.com) (209.85.220.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 17:19:03 +0000
Received: by fxm24 with SMTP id 24so5588961fxm.11
        for <java-user@lucene.apache.org>; Tue, 08 Dec 2009 09:18:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=sAOYCb2vOzV7DKXRYO3IfOSsPx7uCf9RaqlgS/nMT1M=;
        b=nTFayQnv1cfKHpdBbQPHVPdufZcwICgk6va1ghNedughxcI+R2hUTh3+zCmua0oD2s
         QcJ0ViHwAdJyinVAc41CbCT9RXPTQ0P4TlZi80dUjtRYCBhpQ8hoZV9r6RrS8AhAmqrV
         34zWYGnCPUNoZIt4GD7PXQ6ZtP1ba7sNM6+PI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=WWbnkuPaRfIw7zmU6vV9yOtjE++YyyhKPKhjI21Eh/NRWGZf1PWDI/VJyfZtSWEF3u
         x8rujfGW8X09gEdBhaBWrEZ/KnogWl9Nolg7ftzS7YCVCrKtnxtuJ/XzQB0hDVrolTkT
         IhLx0pKVUYrs9oCRNDQdugKxgw+uYhXGLNkQE=
MIME-Version: 1.0
Received: by 10.223.20.85 with SMTP id e21mr1328309fab.25.1260292723121; Tue, 
	08 Dec 2009 09:18:43 -0800 (PST)
In-Reply-To: <26696993.post@talk.nabble.com>
References: <26696184.post@talk.nabble.com> <359a92830912080820yed97137n2bc1ed9c4e79a120@mail.gmail.com> 
	<26696993.post@talk.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 8 Dec 2009 17:18:23 +0000
Message-ID: <8c4e68610912080918r1b77afb0t70715111e0338dd8@mail.gmail.com>
Subject: Re: Problem searching field with % as value
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

If you store the field unanalyzed it will be indexed as is.  You can
then search for it via a TermQuery, or use QueryParser with
PerFieldAnalyzerWrapper specifying KeywordAnalyzer for the field
containing this character.

Another approach is to replace the % with something easier to work
with.  You could do this yourself or, I think, with MappingCharFilter.

Personally I'd probably replace "%" with "percent" somewhere in my
code with a simple string replacement.


--
Ian.



On Tue, Dec 8, 2009 at 5:02 PM, kanayo <richies4all@gmail.com> wrote:
>
> Thanks for your reply Erick.
>
> In Luke, its also not working. I tried to retrieving values from the field
> by specifying the field as the search field and then specify % as the search
> parameter which using StandardAnalyzer but nothing is displayed. Also while
> Luke shows the query details for other search values, it dosent show query
> details for search value of %.
>
> I think it is not Tokenized in the index. Is there anything else i can do to
> be able to retrieve values from fields comprising of just %?
>
> Thanks for your assistance.
>
>
> Erick Erickson wrote:
>>
>> Try printing out query.toString() to see what's actually being
>> sent to the searcher.
>>
>> You can try the same thing in Luke, specifying StandardAnalyzer
>> to parse queries.
>>
>> Are you sure you're specifying the fields in the query and not just the
>> '%'? That would go against your default field.
>>
>> When you say that you can see the fields in luke, are you storing the
>> field?
>> Because what you may be seeing is the *stored* value rather than the
>> *tokens*.
>> Make sure you're looking at the tokens in Luke..
>>
>> If none of that helps, could you post a code snippet or two (index and
>> query)?
>>
>> Best
>> Erick
>>
>> On Tue, Dec 8, 2009 at 11:04 AM, kanayo <richies4all@gmail.com> wrote:
>>
>>>
>>> Hi,
>>>
>>> I am a newbie to lucene. I am using Standard Analyzer in my lucene
>>> project.
>>> I am indexing some fields which may contain only "%" as a field value and
>>> it
>>> indexes fine and i can view the value against the field in the index
>>> using
>>> Luke.
>>>
>>> However when i try to retrieve the same field using indexsearcher and
>>> passing "%" as a query parameter nothing is retrieved. It is simply being
>>> ignored. I have also tried to escape the "%" while searching but still no
>>> results.
>>>
>>> Is there anything am not doing right?
>>>
>>> Thanks in advance for your assistance.
>>>
>>>
>>> --
>>> View this message in context:
>>> http://old.nabble.com/Problem-searching-field-with---as-value-tp26696184p26696184.html
>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>
> --
> View this message in context: http://old.nabble.com/Problem-searching-field-with---as-value-tp26696184p26696993.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 08 19:42:02 2009
Return-Path: <java-user-return-43979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81065 invoked from network); 8 Dec 2009 19:42:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Dec 2009 19:42:01 -0000
Received: (qmail 64608 invoked by uid 500); 8 Dec 2009 19:41:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64527 invoked by uid 500); 8 Dec 2009 19:41:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64517 invoked by uid 99); 8 Dec 2009 19:41:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 19:41:58 +0000
X-ASF-Spam-Status: No, hits=-3.2 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.18.92] (HELO smtp2.syr.edu) (128.230.18.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 19:41:56 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by smtp2.syr.edu (8.14.3/8.14.3) with ESMTP id nB8JfYSJ003574
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Tue, 8 Dec 2009 14:41:34 -0500
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-01.ad.syr.edu ([2002:80e6:6cc3::80e6:6cc3]) with mapi; Tue, 8 Dec
 2009 14:41:34 -0500
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 8 Dec 2009 14:41:34 -0500
Subject: RE: TopFieldDocCollector and v3.0.0
Thread-Topic: TopFieldDocCollector and v3.0.0
Thread-Index: Acp4Cdnxf05P32z4TYy5RiVawDUd4gACiwkQAAoWLkA=
Message-ID: <2D127F11DC79714E9B6A43AC9458147F3276B237@suex07-mbx-03.ad.syr.edu>
References: <4B1DF5C9.5080109@teamware.com>
 <359a92830912080524u7fcf47advb28752abaa2b920a@mail.gmail.com>
 <9D84AF8B8E444AA1B6B9C921F8F1721A@VEGA>
In-Reply-To: <9D84AF8B8E444AA1B6B9C921F8F1721A@VEGA>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=1.12.8161:2.4.5,1.2.40,4.0.166 definitions=2009-12-08_08:2009-11-30,2009-12-08,2009-12-08 signatures=0
X-Proofpoint-Spam-Reason: safe

Hi Uwe,

On 12/08/2009 at 9:40 AM, Uwe Schindler wrote:
> After the move to 3.0, you can (but you must not) further update
> your code to use generics, which is not really needed but will
> remove all compiler warnings.

This sounds like you're telling people that although they are able to updat=
e their code to use generics, it is forbidden.

I'm sure, though, that you mean that they are not required to do so: someth=
ing like "but you need not" rather than "but you must not".

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 08 20:22:02 2009
Return-Path: <java-user-return-43980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93576 invoked from network); 8 Dec 2009 20:22:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Dec 2009 20:22:02 -0000
Received: (qmail 21210 invoked by uid 500); 8 Dec 2009 20:22:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21142 invoked by uid 500); 8 Dec 2009 20:22:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21132 invoked by uid 99); 8 Dec 2009 20:22:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 20:22:00 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 20:21:57 +0000
Received: by yxe30 with SMTP id 30so6247073yxe.29
        for <java-user@lucene.apache.org>; Tue, 08 Dec 2009 12:21:36 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.125.12 with SMTP id x12mr11902486ybc.51.1260303696558; 
	Tue, 08 Dec 2009 12:21:36 -0800 (PST)
In-Reply-To: <dc3d8a2a0912080816j31b92663tc0eac853bfdce861@mail.gmail.com>
References: <dc3d8a2a0912080712v2239d6f8n269dac2277ca3c32@mail.gmail.com>
	 <359a92830912080755t53ed8447v6eb5b753a8282965@mail.gmail.com>
	 <dc3d8a2a0912080816j31b92663tc0eac853bfdce861@mail.gmail.com>
Date: Tue, 8 Dec 2009 12:21:36 -0800
Message-ID: <660086cb0912081221r3fec9dcbw3bf8d4b4a64ea212@mail.gmail.com>
Subject: Re: question related to Indexing
From: Tom Hill <solr-list@worldware.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd6c900247a37047a3d520e

--000e0cd6c900247a37047a3d520e
Content-Type: text/plain; charset=ISO-8859-1

If you tell us WHY you want to do this, rather than HOW you want to do it,
the chances are much better that someone can help.

What's the business motivation here?  What does the end user want to
achieve?

Tom

On Tue, Dec 8, 2009 at 8:16 AM, Phanindra Reva <reva.phanindra@gmail.com>wrote:

> Hello,
>        Thanks for the reply. *strange* was expected. I am trying to
> store field names as payloads, so I need unedited field names during
> analysis part. And later my plan is to replace all the field names
> with a default value and then store the document in the index. So, If
> its possible to get the reference of the Document after the analysis,
> I could modify all the field names. Even a way of modifying ( of
> course , it should be after analysis and before adding to the index )
> the field-name values that are going to be added to the index will
> suffice.
>     I guess.. this time you feel its much more strange, but that's my
> task for which above mentioned is one way to accomplish.
> Thanks.
>
> On Tue, Dec 8, 2009 at 4:55 PM, Erick Erickson <erickerickson@gmail.com>
> wrote:
> > You're right, it *does* seem strange <G>....
> >
> > I'm having a really hard time imagining a use-case
> > for this capability, so it's hard to suggest
> > an approach. Perhaps you could supply
> > an outline of your use-case? This may be
> > an XY problem.
> >
> > Best
> > Erick
> >
> > On Tue, Dec 8, 2009 at 10:12 AM, Phanindra Reva <
> reva.phanindra@gmail.com>wrote:
> >
> >> Hello All,
> >>              I am a newbie using Lucene. To be brief, I am just
> >> wondering whether is there a point where we get the access to the
> >> org.apache.lucene.document.Document (which is being indexed at the
> >> moment)  after the analysing part is completed but exactly before it
> >> is added to the index. My whole aim is to modify all the field names
> >> present in the document before its being added to the index, but I
> >> need those field names un-edited during the analysis part.
> >>   If it seems strange.. please don't mind.
> >> Thanks.
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd6c900247a37047a3d520e--

From java-user-return-43981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 08 20:42:19 2009
Return-Path: <java-user-return-43981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98526 invoked from network); 8 Dec 2009 20:42:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Dec 2009 20:42:19 -0000
Received: (qmail 54554 invoked by uid 500); 8 Dec 2009 20:42:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54479 invoked by uid 500); 8 Dec 2009 20:42:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54469 invoked by uid 99); 8 Dec 2009 20:42:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 20:42:17 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of reva.phanindra@gmail.com designates 209.85.220.224 as permitted sender)
Received: from [209.85.220.224] (HELO mail-fx0-f224.google.com) (209.85.220.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 20:42:09 +0000
Received: by fxm24 with SMTP id 24so5801112fxm.11
        for <java-user@lucene.apache.org>; Tue, 08 Dec 2009 12:41:48 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=FYvZMXuoVN/dehHnBhcX1zBnMYqkOHd8uVQuZ7F8Z74=;
        b=eA2A8kRulrrNQXtKQ9l87HQHSFr6kERhgoCBGk16LofPpcy1w7LhyYTITwjzgri5ZI
         GGOUWOP3NgmrOQY+rhoTWn+vEssmiKTJJUJQH0GFLmE8J8onWL80u15pzHdjCm8gZYYX
         CAX7m48360WT1w8Mjz2ghQsUKp/ssryotvC0s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=v7HOmvGse/eSVJikxQR7hcDiM0pQVv2muuDJTqPEd+ieFVs4ftXPtDq9IEWsvoZyaI
         ++TesZd/TgdgImhVXF6KP8IK5giTJJSAzxPkdDHG9wFTwXPqUSHvZp1gl7SaIgum00G3
         6ln/KLL5IpJjErxZay5oq2SdAB+LQyeRkiVac=
MIME-Version: 1.0
Received: by 10.239.179.97 with SMTP id c33mr820646hbg.157.1260304908655; Tue, 
	08 Dec 2009 12:41:48 -0800 (PST)
In-Reply-To: <660086cb0912081221r3fec9dcbw3bf8d4b4a64ea212@mail.gmail.com>
References: <dc3d8a2a0912080712v2239d6f8n269dac2277ca3c32@mail.gmail.com>
	 <359a92830912080755t53ed8447v6eb5b753a8282965@mail.gmail.com>
	 <dc3d8a2a0912080816j31b92663tc0eac853bfdce861@mail.gmail.com>
	 <660086cb0912081221r3fec9dcbw3bf8d4b4a64ea212@mail.gmail.com>
Date: Tue, 8 Dec 2009 21:41:48 +0100
Message-ID: <dc3d8a2a0912081241l1368bb6ahbe894247e8e72a3e@mail.gmail.com>
Subject: Re: question related to Indexing
From: Phanindra Reva <reva.phanindra@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Tom and Erick,
                          I am really sorry for posting such a dull
question. Meanwhile I have explored a few other parts of API,
fortunately I have found a place which could exaclty fit for my case.
Thanks for patiently trying to understand my question.. and warning
me.
Bye.

On Tue, Dec 8, 2009 at 9:21 PM, Tom Hill <solr-list@worldware.com> wrote:
> If you tell us WHY you want to do this, rather than HOW you want to do it=
,
> the chances are much better that someone can help.
>
> What's the business motivation here? =A0What does the end user want to
> achieve?
>
> Tom
>
> On Tue, Dec 8, 2009 at 8:16 AM, Phanindra Reva <reva.phanindra@gmail.com>=
wrote:
>
>> Hello,
>> =A0 =A0 =A0 =A0Thanks for the reply. *strange* was expected. I am trying=
 to
>> store field names as payloads, so I need unedited field names during
>> analysis part. And later my plan is to replace all the field names
>> with a default value and then store the document in the index. So, If
>> its possible to get the reference of the Document after the analysis,
>> I could modify all the field names. Even a way of modifying ( of
>> course , it should be after analysis and before adding to the index )
>> the field-name values that are going to be added to the index will
>> suffice.
>> =A0 =A0 I guess.. this time you feel its much more strange, but that's m=
y
>> task for which above mentioned is one way to accomplish.
>> Thanks.
>>
>> On Tue, Dec 8, 2009 at 4:55 PM, Erick Erickson <erickerickson@gmail.com>
>> wrote:
>> > You're right, it *does* seem strange <G>....
>> >
>> > I'm having a really hard time imagining a use-case
>> > for this capability, so it's hard to suggest
>> > an approach. Perhaps you could supply
>> > an outline of your use-case? This may be
>> > an XY problem.
>> >
>> > Best
>> > Erick
>> >
>> > On Tue, Dec 8, 2009 at 10:12 AM, Phanindra Reva <
>> reva.phanindra@gmail.com>wrote:
>> >
>> >> Hello All,
>> >> =A0 =A0 =A0 =A0 =A0 =A0 =A0I am a newbie using Lucene. To be brief, I=
 am just
>> >> wondering whether is there a point where we get the access to the
>> >> org.apache.lucene.document.Document (which is being indexed at the
>> >> moment) =A0after the analysing part is completed but exactly before i=
t
>> >> is added to the index. My whole aim is to modify all the field names
>> >> present in the document before its being added to the index, but I
>> >> need those field names un-edited during the analysis part.
>> >> =A0 If it seems strange.. please don't mind.
>> >> Thanks.
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 08 21:44:30 2009
Return-Path: <java-user-return-43982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23788 invoked from network); 8 Dec 2009 21:44:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Dec 2009 21:44:30 -0000
Received: (qmail 33754 invoked by uid 500); 8 Dec 2009 21:44:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33674 invoked by uid 500); 8 Dec 2009 21:44:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33664 invoked by uid 99); 8 Dec 2009 21:44:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 21:44:27 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Dec 2009 21:44:25 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 984D4D36004
	for <java-user@lucene.apache.org>; Tue,  8 Dec 2009 22:44:04 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Uf+XBHIocITU for <java-user@lucene.apache.org>;
	Tue,  8 Dec 2009 22:43:54 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 8BB5BD36003
	for <java-user@lucene.apache.org>; Tue,  8 Dec 2009 22:43:54 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <4B1DF5C9.5080109@teamware.com> <359a92830912080524u7fcf47advb28752abaa2b920a@mail.gmail.com> <9D84AF8B8E444AA1B6B9C921F8F1721A@VEGA> <2D127F11DC79714E9B6A43AC9458147F3276B237@suex07-mbx-03.ad.syr.edu>
Subject: RE: TopFieldDocCollector and v3.0.0
Date: Tue, 8 Dec 2009 22:43:53 +0100
Message-ID: <336011D970CD40A6957FF6840E538E26@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147F3276B237@suex07-mbx-03.ad.syr.edu>
Thread-Index: Acp4Cdnxf05P32z4TYy5RiVawDUd4gACiwkQAAoWLkAABL/gIA==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579

Sorry wrong word, Germans often have the problem with English "must". It has
to be to be "but you must not".

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Steven A Rowe [mailto:sarowe@syr.edu]
> Sent: Tuesday, December 08, 2009 8:42 PM
> To: java-user@lucene.apache.org
> Subject: RE: TopFieldDocCollector and v3.0.0
> 
> Hi Uwe,
> 
> On 12/08/2009 at 9:40 AM, Uwe Schindler wrote:
> > After the move to 3.0, you can (but you must not) further update
> > your code to use generics, which is not really needed but will
> > remove all compiler warnings.
> 
> This sounds like you're telling people that although they are able to
> update their code to use generics, it is forbidden.
> 
> I'm sure, though, that you mean that they are not required to do so:
> something like "but you need not" rather than "but you must not".
> 
> Steve
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 09 00:34:39 2009
Return-Path: <java-user-return-43983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2573 invoked from network); 9 Dec 2009 00:34:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Dec 2009 00:34:39 -0000
Received: (qmail 48052 invoked by uid 500); 9 Dec 2009 00:34:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47983 invoked by uid 500); 9 Dec 2009 00:34:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47973 invoked by uid 99); 9 Dec 2009 00:34:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 00:34:36 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.222.176 as permitted sender)
Received: from [209.85.222.176] (HELO mail-pz0-f176.google.com) (209.85.222.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 00:34:28 +0000
Received: by pzk6 with SMTP id 6so5066865pzk.29
        for <java-user@lucene.apache.org>; Tue, 08 Dec 2009 16:34:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=0YwqKh9VduZU58ytdODOsOUfXD3c5fuK1ldSpQIIg6Q=;
        b=PW9wz2w/CDMX3Hu7G8sTLcgCzoIN94EU2viu1v8Q211xEJZWJK2jrKW9bU+kJwb9jc
         aJCdUDhS0DRvKTJx+ycv7D7ITX1MSeA96W/C32uVc110TluhNksnKNy8B16juj9trTd+
         0kyfXYrg4Dz78pjwqkAqeulikLd7+0a2z3IQY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=idco1LT+wXynXw6NzLiR9UraSHept9VlygRmOo0KX+w1e4mr6eH77BTlcBfsTH0Q5H
         dtejSFw9NyQrmBZthziKDY3IJxXgBllgIbGXjhdE9CGJvpyfwUj8O7XE1h6lPSUW19je
         j4d6KQJ5gX4qwClqGbeF+KaRh9qQ4BGy54fqU=
MIME-Version: 1.0
Received: by 10.141.105.10 with SMTP id h10mr46493rvm.23.1260318847149; Tue, 
	08 Dec 2009 16:34:07 -0800 (PST)
Date: Tue, 8 Dec 2009 16:34:07 -0800
Message-ID: <85d3c3b60912081634j4bfa8cbdm3a3ad5286c3a9b70@mail.gmail.com>
Subject: NearSpansUnordered payloads not returning all the time
From: Jason Rutherglen <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Howdy,

I am wondering if anyone has seen
NearSpansUnordered.getPayload() not return payloads that are
verifiably accessible via IR.termPositions? It's a bit confusing
because most of the time they're returned properly.

I suspect the payload logic gets tripped up in
NearSpansUnordered. I'll put together a test case, however the
difficulty is that we're only seeing the issue with largish 800
MB indexes, which could make the test case a little crazy.

Jason

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 09 03:23:33 2009
Return-Path: <java-user-return-43984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76381 invoked from network); 9 Dec 2009 03:23:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Dec 2009 03:23:33 -0000
Received: (qmail 73967 invoked by uid 500); 9 Dec 2009 03:23:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73798 invoked by uid 500); 9 Dec 2009 03:23:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73788 invoked by uid 99); 9 Dec 2009 03:23:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 03:23:27 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.211.182 as permitted sender)
Received: from [209.85.211.182] (HELO mail-yw0-f182.google.com) (209.85.211.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 03:23:25 +0000
Received: by ywh12 with SMTP id 12so7923853ywh.21
        for <java-user@lucene.apache.org>; Tue, 08 Dec 2009 19:23:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=3n7I6UOu5kWpR4CfAh6H/zHpTuc+KRRH36eZmxWMSy4=;
        b=MWsiwMossu37EfGAsjEzbspDlvhzTZ+rEJ/qrDAT5zalZhEqFWgbVaOCq/H3izT1kJ
         Jgwsve3gkRzgynNbLf8+ED8ApHog52988gpTyUy58PGb2yLZWF5tDsXJC44II9Dy52Hu
         lKEz8sslrrfXu/DA1XLB5vdqVrkbHHZrX+/m4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=iNe5GO5xkNuMFrqXnswvCGuMax+x4GhO0GR+SOtApMS7SPBgNsMgB56CLGDsstjMDS
         b12hh2OGvmbgK23tuUWoFmyzqDN0t7BTLOP1n8G6Y1I0NkA4Do3aIuJtkksqhKxVCV74
         q5sq9SVGKcTV9RrNUd7kknjjATUFUjL1cQYYQ=
MIME-Version: 1.0
Received: by 10.90.41.29 with SMTP id o29mr1700470ago.101.1260328982237; Tue, 
	08 Dec 2009 19:23:02 -0800 (PST)
Date: Wed, 9 Dec 2009 11:23:02 +0800
Message-ID: <7d94dcde0912081923t36af687eycce4cedd5e85e047@mail.gmail.com>
Subject: HOW to do date range searchi in 3.0
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016361e83da4958fe047a433592

--0016361e83da4958fe047a433592
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hi, all
     I need to do a date range search like date:[a previous time to null]
I used a filter to do this job, the code  is shown below:
    Calendar c =3D Calendar.getInstance();
    c.setTimeInMillis(c.getTimeInMillis() -
parameter.getRecentUpdateConstraint()
        * RosaCrawlerConstants.ONE_DAY_IN_MILLISECOND);
    String fromTime =3D DateTools.dateToString(c.getTime(),
DateTools.Resolution.DAY);
    Query updateTimeRange =3D new
TermRangeQuery("updateTime",fromTime,null,true,false);
    query.add(updateTimeRange, BooleanClause.Occur.MUST);

However, it doesn't work as before in version 2.4.1(I'm updating my project
from version 2.4.1 to lucenen 3.0.0)

Could anybody here offer me a solution?
--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--0016361e83da4958fe047a433592--

From java-user-return-43985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 09 06:56:40 2009
Return-Path: <java-user-return-43985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58711 invoked from network); 9 Dec 2009 06:56:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Dec 2009 06:56:40 -0000
Received: (qmail 98089 invoked by uid 500); 9 Dec 2009 06:56:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98010 invoked by uid 500); 9 Dec 2009 06:56:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98000 invoked by uid 99); 9 Dec 2009 06:56:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 06:56:35 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ihasmax@gmail.com designates 209.85.160.46 as permitted sender)
Received: from [209.85.160.46] (HELO mail-pw0-f46.google.com) (209.85.160.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 06:56:27 +0000
Received: by pwj16 with SMTP id 16so1633467pwj.5
        for <java-user@lucene.apache.org>; Tue, 08 Dec 2009 22:56:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=9zPtZalFnX97bEkciyn2Cd76bAs/80E5AbIdCwxeTj8=;
        b=JIsuu8uXAKl+9+ucZASx0Vt2BX7mAJCbDW1MZeT04rXc34ss+9KJRZiYc7iwgapEUB
         3k+QFVKIciIT1FIZ1lwWOsB90QmkT9uf9jvohATRoO192oBvWuoZPKdUTY9sEZd7txGX
         YHcToGoJEyI1Ruc0Ef8r5AuIPL/9GjR178iq4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=tfgvPK9wEx7UMwWVBngayKOS9byflPBWgb3bQllmWfWboJxXDhnA2GLIKT/DjyoQ1i
         Pef5KEunfCCtrtHQO2lfOYBvihR5jBQpWcNIh8sQIKx3zqQcGwyxbqjukkU/FvOBwYDT
         Oa+x1ZvvCwFAraT8rg8iIqQZiEN0OSdZfoMBc=
MIME-Version: 1.0
Received: by 10.141.124.15 with SMTP id b15mr61691rvn.20.1260341765950; Tue, 
	08 Dec 2009 22:56:05 -0800 (PST)
In-Reply-To: <9ac0c6aa0910090244s3b70ec9bsb5168b55d4958671@mail.gmail.com>
References: <3836ec640910020810t236410a0j78ccc788975a0915@mail.gmail.com>
	 <88f6e29a0910080101m4d17c5al1e466e19badfd331@mail.gmail.com>
	 <3836ec640910082137l465152ddv3eeff61802c9f1ff@mail.gmail.com>
	 <9ac0c6aa0910090244s3b70ec9bsb5168b55d4958671@mail.gmail.com>
Date: Wed, 9 Dec 2009 00:56:05 -0600
Message-ID: <3836ec640912082256n33210772j3a8840b51f7a6737@mail.gmail.com>
Subject: Re: FileNotFoundException on index
From: Max Lynch <ihasmax@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000325560d92414f36047a462fda
X-Virus-Checked: Checked by ClamAV on apache.org

--000325560d92414f36047a462fda
Content-Type: text/plain; charset=ISO-8859-1

Hi Mike,

Missed your response on this,
What I was doing was physically removing index/write.lock if older than 8
hours, allowing another process of my indexer to run.  I realize in
hindsight that there is no reason why I should be doing this and it was
really stupid.  I think I was under the impression one of my pylucene
processes was hanging.

On Fri, Oct 9, 2009 at 3:44 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> You can use o.a.l.index.CheckIndex to fix the index.  It will remove
> references to any segments that are missing or have problems during
> testing.  First run it without -fix to see what problems there are.
> Then take a backup of the index.  Then run it with -fix.  The index
> will lose all docs in those segments that it removes.
>
> Can you describe what led up to this?  Is it repeatable?
>
> Mike
>
> On Fri, Oct 9, 2009 at 12:37 AM, Max Lynch <ihasmax@gmail.com> wrote:
> > Missed your response, thanks Bernd.
> >
> > I don't think that's it, since I haven't been executing any commands like
> > that.  The only thing I could think of is corruption.  I've got the index
> > backed up in case there is a way to fix it (it won't matter in a week or
> so
> > since I cull any documents older than 25 days).
> >
> > Is there a way to fix this?
> >
> > Thanks.
> >
> > On Thu, Oct 8, 2009 at 3:01 AM, Bernd Fondermann <
> > bernd.fondermann@googlemail.com> wrote:
> >
> >> Hi Max
> >>
> >> just a guess: maybe you deleted all *.c source files in that area and
> >> unintentionally deleted this index file, too.
> >>
> >>  Bernd
> >>
> >> On Fri, Oct 2, 2009 at 17:10, Max Lynch <ihasmax@gmail.com> wrote:
> >> > I'm getting this error when I try to run my searcher and my indexer:
> >> >
> >> > Traceback (most recent call last):
> >> > self.searcher = lucene.IndexSearcher(self.directory)
> >> > JavaError: java.io.FileNotFoundException:
> >> /home/spider/misc/index/_275c.cfs
> >> > (No such file or directory)
> >> >
> >> > I don't know anything about the format of the Lucene index, but I
> notice
> >> I
> >> > have several _275* files from b to j but no c.
> >> >
> >> > Any ideas?
> >> >
> >> > Thanks.
> >> >
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000325560d92414f36047a462fda--

From java-user-return-43986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 09 07:10:10 2009
Return-Path: <java-user-return-43986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62263 invoked from network); 9 Dec 2009 07:10:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Dec 2009 07:10:10 -0000
Received: (qmail 11874 invoked by uid 500); 9 Dec 2009 07:10:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11796 invoked by uid 500); 9 Dec 2009 07:10:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11786 invoked by uid 99); 9 Dec 2009 07:10:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 07:10:07 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 07:09:57 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 250BAD36004
	for <java-user@lucene.apache.org>; Wed,  9 Dec 2009 08:09:37 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 9HTF2BcuAvDF for <java-user@lucene.apache.org>;
	Wed,  9 Dec 2009 08:09:27 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id DE272D36003
	for <java-user@lucene.apache.org>; Wed,  9 Dec 2009 08:09:26 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <7d94dcde0912081923t36af687eycce4cedd5e85e047@mail.gmail.com>
Subject: RE: HOW to do date range searchi in 3.0
Date: Wed, 9 Dec 2009 08:09:24 +0100
Message-ID: <6F73E5EFE6B9474AAF68829D340E3944@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-2022-jp"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <7d94dcde0912081923t36af687eycce4cedd5e85e047@mail.gmail.com>
Thread-index: Acp4fwQxHsTa/RwlSCmsUInjFf369QAHx/ig
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

How did you index your date?

I would suggest to reindex the date using NumericField! And then query using
NumericRangeQuery. If reindexing is not possible the Query like you have
done, should work. Please give us examples of how you indexed and how you
query.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Weiwei Wang [mailto:ww.wang.cs@gmail.com]
> Sent: Wednesday, December 09, 2009 4:23 AM
> To: java-user@lucene.apache.org
> Subject: HOW to do date range searchi in 3.0
> 
> Hi, all
>      I need to do a date range search like date:[a previous time to null]
> I used a filter to do this job, the code  is shown below:
>     Calendar c = Calendar.getInstance();
>     c.setTimeInMillis(c.getTimeInMillis() -
> parameter.getRecentUpdateConstraint()
>         * RosaCrawlerConstants.ONE_DAY_IN_MILLISECOND);
>     String fromTime = DateTools.dateToString(c.getTime(),
> DateTools.Resolution.DAY);
>     Query updateTimeRange = new
> TermRangeQuery("updateTime",fromTime,null,true,false);
>     query.add(updateTimeRange, BooleanClause.Occur.MUST);
> 
> However, it doesn't work as before in version 2.4.1(I'm updating my
> project
> from version 2.4.1 to lucenen 3.0.0)
> 
> Could anybody here offer me a solution?
> --
> Weiwei Wang
> Alex Wang
> $B2&V[V[(B
> Room 403, Mengmin Wei Building
> Computer Science Department
> Gulou Campus of Nanjing University
> Nanjing, P.R.China, 210093
> 
> Homepage: http://cs.nju.edu.cn/rl/weiweiwang


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 09 07:12:47 2009
Return-Path: <java-user-return-43987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63350 invoked from network); 9 Dec 2009 07:12:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Dec 2009 07:12:47 -0000
Received: (qmail 15738 invoked by uid 500); 9 Dec 2009 07:12:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15656 invoked by uid 500); 9 Dec 2009 07:12:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15642 invoked by uid 99); 9 Dec 2009 07:12:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 07:12:44 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.211.182 as permitted sender)
Received: from [209.85.211.182] (HELO mail-yw0-f182.google.com) (209.85.211.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 07:12:42 +0000
Received: by ywh12 with SMTP id 12so8038221ywh.21
        for <java-user@lucene.apache.org>; Tue, 08 Dec 2009 23:12:21 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=l9Y8o4lY3BfOcf6zLerwMltgFg7vBH4vntBYZMElJbE=;
        b=DOpgYHrFGeOh5HERlo5AmRUBSxAA504HsuLwTRwvbT0WCbzazDGlnblYurcNcvCbx5
         MtiCi1m5aJzwbA/Vt2MxAYGMzUD9TztT4XPeeiyfMsp6FbG55ZtLRLKbQHBxig+T51YE
         8MEP5jUhAGv1uvs0X4QZicbWOfRT3YNYuCn9k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=g7MZqp86+bCnWMGMJ2g21Sst8xBJGAYzingXZmYLqEaNM4k0Pp9zA6LIg4+z50EdwT
         XyhbMjCf4IC91z0pj/HD5yrCIRBB5FycwmsnNvaQzMVaQ/Er5W1nIcf8gAUwrEuKQPbJ
         eeOSGCn9lBXFPbDmk9pXH3N+wT43+pbvqk3X8=
MIME-Version: 1.0
Received: by 10.90.38.8 with SMTP id l8mr14637112agl.86.1260342741530; Tue, 08 
	Dec 2009 23:12:21 -0800 (PST)
In-Reply-To: <6F73E5EFE6B9474AAF68829D340E3944@VEGA>
References: <7d94dcde0912081923t36af687eycce4cedd5e85e047@mail.gmail.com>
	 <6F73E5EFE6B9474AAF68829D340E3944@VEGA>
Date: Wed, 9 Dec 2009 15:12:21 +0800
Message-ID: <7d94dcde0912082312k45ab557cj9c44caa694506f40@mail.gmail.com>
Subject: Re: HOW to do date range searchi in 3.0
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163616415f677aaf047a466920

--00163616415f677aaf047a466920
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Thanks, Uwe. I've found the problem. the updateTime field is lost when i
converted my index from an older version.

Another question, is there any detailed tutorial about Lucene 3.0.0?

2009/12/9 Uwe Schindler <uwe@thetaphi.de>

> How did you index your date?
>
> I would suggest to reindex the date using NumericField! And then query
> using
> NumericRangeQuery. If reindexing is not possible the Query like you have
> done, should work. Please give us examples of how you indexed and how you
> query.
>
> Uwe
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
> > -----Original Message-----
> > From: Weiwei Wang [mailto:ww.wang.cs@gmail.com]
> > Sent: Wednesday, December 09, 2009 4:23 AM
> > To: java-user@lucene.apache.org
> > Subject: HOW to do date range searchi in 3.0
> >
> > Hi, all
> >      I need to do a date range search like date:[a previous time to nul=
l]
> > I used a filter to do this job, the code  is shown below:
> >     Calendar c =3D Calendar.getInstance();
> >     c.setTimeInMillis(c.getTimeInMillis() -
> > parameter.getRecentUpdateConstraint()
> >         * RosaCrawlerConstants.ONE_DAY_IN_MILLISECOND);
> >     String fromTime =3D DateTools.dateToString(c.getTime(),
> > DateTools.Resolution.DAY);
> >     Query updateTimeRange =3D new
> > TermRangeQuery("updateTime",fromTime,null,true,false);
> >     query.add(updateTimeRange, BooleanClause.Occur.MUST);
> >
> > However, it doesn't work as before in version 2.4.1(I'm updating my
> > project
> > from version 2.4.1 to lucenen 3.0.0)
> >
> > Could anybody here offer me a solution?
> > --
> > Weiwei Wang
> > Alex Wang
> > =E7=8E=8B=E5=B7=8D=E5=B7=8D
> > Room 403, Mengmin Wei Building
> > Computer Science Department
> > Gulou Campus of Nanjing University
> > Nanjing, P.R.China, 210093
> >
> > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--00163616415f677aaf047a466920--

From java-user-return-43988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 09 09:28:52 2009
Return-Path: <java-user-return-43988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10084 invoked from network); 9 Dec 2009 09:28:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Dec 2009 09:28:52 -0000
Received: (qmail 62155 invoked by uid 500); 9 Dec 2009 09:28:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62003 invoked by uid 500); 9 Dec 2009 09:28:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61934 invoked by uid 99); 9 Dec 2009 09:28:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 09:28:48 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 09:28:44 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 1C53AD36005;
	Wed,  9 Dec 2009 10:28:21 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id ma-RwMJex37B; Wed,  9 Dec 2009 10:28:12 +0100 (CET)
Received: from VEGA (unknown [134.102.249.75])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 1D29AD36003;
	Wed,  9 Dec 2009 10:28:12 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <general@lucene.apache.org>,
	<java-dev@lucene.apache.org>,
	<java-user@lucene.apache.org>
References: <f18c9dde0912050503w21f15245pa9326047e60f8433@mail.gmail.com> <E66EE24B-393B-486F-94BB-1C594C0D147B@apache.org> <CBB69BCF988E463DB732AEB661D43561@VEGA> <3C7517D824BC401D9EEC8AB0937D7EF0@VEGA> <Pine.LNX.4.64.0912080940080.22124@radix.cryptio.net> <D8DEC410934F4979BFE64A9EDFD4FFBD@VEGA> <416A802BF3884F7A80D9589AEBAE717F@VEGA>
Subject: RE: [VOTE] Push fast-vector-highlighter mvn artifacts for 3.0.0 and 2.9.1
Date: Wed, 9 Dec 2009 10:28:10 +0100
Message-ID: <01AF1109550C4822A317DE46CFE66280@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <416A802BF3884F7A80D9589AEBAE717F@VEGA>
Thread-Index: Acp4LrQqV98SlImPSoGy5Kh0YAmwmQAADg2AAAf/RDAAGKG7cA==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579

Hi all,

The missing maven artifacts for the fast-vector-highlighter contrib of
Lucene Java in version 2.9.1 and 3.0.0 are now available at:

http://repo1.maven.org/maven2/org/apache/lucene/
http://repo2.maven.org/maven2/org/apache/lucene/

Uwe

-----
Uwe Schindler
uschindler@apache.org 
Apache Lucene Java Committer
Bremen, Germany
http://lucene.apache.org/java/docs/

> From: Uwe Schindler [mailto:uwe@thetaphi.de]
> Sent: Tuesday, December 08, 2009 10:41 PM
> To: java-dev@lucene.apache.org; general@lucene.apache.org
> Subject: RE: [VOTE] Push fast-vector-highlighter mvn artifacts for 3.0.0
> and 2.9.1
> 
> I got 3 binding votes from Grant, Mike, and Ted (and one from Simon, who
> was
> a big help on Sunday evening when I created the artifacts), so I push the
> maven artifacts onto the rsync repo in few minutes.
> 
> Thanks!
> 
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
> 
> > -----Original Message-----
> > From: Uwe Schindler [mailto:uwe@thetaphi.de]
> > Sent: Tuesday, December 08, 2009 7:03 PM
> > To: java-dev@lucene.apache.org
> > Subject: [VOTE] Push fast-vector-highlighter mvn artifacts for 3.0.0 and
> > 2.9.1
> >
> > Sorry,
> >
> > I initially didn't want to start a vote, as Grant only proposed to
> "maybe
> > start one". But nobody responded (esp. to the questions in this mail) I
> > ask
> > again, an I will start the vote for now.
> >
> >
> ==========================================================================
> > ==
> > Please vote, that the missing artifacts for of fast-verctor-highlighter
> of
> > Lucene Java 2.9.1 and 3.0.0 should be pushed to repoX.maven.org.
> >
> > You can find the artifacts here:
> > http://people.apache.org/~uschindler/staging-area/
> >
> > This dir contains only the maven folder to be copied to maven-rsync dir
> on
> > p.a.o. The top-level version in the maven metadata is 3.0.0, which
> > conforms
> > to the current state on maven (so during merging both folders during
> > build,
> > I set preference to metadata.xml of 3.0.0).
> >
> > All files are signed by my PGP key (even the 2.9.1 ones; that release
> was
> > originally built by Mike McCandless).
> >
> ==========================================================================
> > ==
> >
> > What I additionally found out until now (because Simon nagged me):
> >
> > If you compare the JAR files inside the binary ZIP file from the apache
> > archive and the JAR files directly published on maven (for the other
> > contribs), the MD5s/SHA1s are different even as they are created from
> the
> > same source code (because the timestamps inside the JAR are different,
> for
> > 2.9.1 another JDK compiler/platform was used). This interestingly does
> not
> > apply to lucene-core.jar in 3.0. Because of that I see no problem with
> > this
> > maven release, even that they are not the orginal JAR files from the
> > binary
> > distrib.
> >
> > What is not nice, is that the svn revision number in the manifest is
> > different, but else is exactly the same, see my comments below in
> earlier
> > mails about changing the ant script for showing the SVN rev of the last
> > changed file.
> >
> > So if nobody objects to release these rebuild jar files, all signed by
> my
> > key, I would like to simply put them on the maven-rsync folder.
> >
> > Uwe
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> >
> > > -----Original Message-----
> > > From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
> > > Sent: Tuesday, December 08, 2009 6:48 PM
> > > To: java-dev@lucene.apache.org
> > > Subject: Re: (NAG) Push fast-vector-highlighter mvn artifacts for 3.0
> > and
> > > 2.9
> > >
> > >
> > > : What to do now, any votes on adding the missing maven artifacts for
> > > : fast-vector-highlighter to 2.9.1 and 3.0.0 on the apache maven
> > > reposititory?
> > >
> > > It's not even clear to me that anything special needs to be done
> before
> > > publishing those jars to maven.  2.9.1 and 3.0.0 were already voted on
> > and
> > > released -- including all of the source code in them.
> > >
> > > The safest bet least likely to anger the process gods is just to call
> a
> > > vote (new thread with VOTE in the subject) and cast a vote ...
> > considering
> > > the sources has already been reviewed it should go pretty quick.
> > >
> > > :
> > > : > I rebuilt the maven-dir for 2.9.1 and 3.0.0, merged them (3.0.0 is
> > > top-
> > > : > level
> > > : > version) and extracted only fast-vector-highlighter:
> > > : >
> > > : > http://people.apache.org/~uschindler/staging-area/
> > > : >
> > > : > I will copy this dir to the maven folder on people.a.o, when I got
> > > votes
> > > : > (how many)? At least someone should check the signatures.
> > > : >
> > > : > By the way, we have a small error in our ant build.xml that
> inserts
> > > : > svnversion into the manifest file. This version is not the version
> > of
> > > the
> > > : > last changed item (would be svnversion -c) but the current svn
> > > version,
> > > : > even
> > > : > that I checked out the corresponding tags. It's no problem at all,
> > but
> > > not
> > > : > very nice.
> > > : >
> > > : > Maybe we should change build.xml to call "svnversion -c" in
> future,
> > to
> > > get
> > > : > the real number.
> > > : >
> > > : > Uwe
> > > : >
> > > : > -----
> > > : > Uwe Schindler
> > > : > H.-H.-Meier-Allee 63, D-28213 Bremen
> > > : > http://www.thetaphi.de
> > > : > eMail: uwe@thetaphi.de
> > > : >
> > > : >
> > > : > > -----Original Message-----
> > > : > > From: Grant Ingersoll [mailto:gsingers@apache.org]
> > > : > > Sent: Saturday, December 05, 2009 10:26 PM
> > > : > > To: java-dev@lucene.apache.org
> > > : > > Subject: Re: Push fast-vector-highlighter mvn artifacts for 3.0
> > and
> > > 2.9
> > > : > >
> > > : > > I suppose we could put up the artifacts on a dev site and then
> we
> > > could
> > > : > > vote to release both of them pretty quickly.  I think that
> should
> > be
> > > : > easy
> > > : > > to do, since it pretty much only involves verifying the jar and
> > the
> > > : > > signatures.
> > > : > >
> > > : > > On Dec 5, 2009, at 1:03 PM, Simon Willnauer wrote:
> > > : > >
> > > : > > > hi folks,
> > > : > > > The maven artifacts for fast-vector-highlighter have never
> been
> > > pushed
> > > : > > > since it was released because there were no pom.xml.template
> > > inside
> > > : > > > the module. I added a pom file a day ago in the context of
> > > : > > > LUCENE-2107. I already talked to uwe and grant how to deal
> with
> > > this
> > > : > > > issues and if we should push the artifact for Lucene 2.9 /
> 3.0.
> > > Since
> > > : > > > this is only a metadata file we could consider rebuilding the
> > > : > > > artefacts and publish them for those releases. I can not
> > remember
> > > that
> > > : > > > anything like that happened before, so we should discuss how
> to
> > > deal
> > > : > > > with this situation and if we should wait until 3.1.
> > > : > > >
> > > : > > > simon
> > > : > > >
> > > : > > > --------------------------------------------------------------
> --
> > --
> > > ---
> > > : > > > To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
> > > : > > > For additional commands, e-mail: java-dev-
> help@lucene.apache.org
> > > : > > >
> > > : > >
> > > : > >
> > > : > >
> > > : > > ----------------------------------------------------------------
> --
> > --
> > > -
> > > : > > To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
> > > : > > For additional commands, e-mail: java-dev-help@lucene.apache.org
> > > : >
> > > : >
> > > : >
> > > : > ------------------------------------------------------------------
> --
> > -
> > > : > To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
> > > : > For additional commands, e-mail: java-dev-help@lucene.apache.org
> > > :
> > > :
> > > :
> > > : --------------------------------------------------------------------
> -
> > > : To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
> > > : For additional commands, e-mail: java-dev-help@lucene.apache.org
> > > :
> > >
> > >
> > >
> > > -Hoss
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-dev-help@lucene.apache.org
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-dev-help@lucene.apache.org
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 09 09:59:41 2009
Return-Path: <java-user-return-43989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27005 invoked from network); 9 Dec 2009 09:59:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Dec 2009 09:59:37 -0000
Received: (qmail 92287 invoked by uid 500); 9 Dec 2009 09:57:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92207 invoked by uid 500); 9 Dec 2009 09:57:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92197 invoked by uid 99); 9 Dec 2009 09:57:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 09:57:56 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.104.17.155] (HELO web94806.mail.in2.yahoo.com) (203.104.17.155)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 09 Dec 2009 09:57:54 +0000
Received: (qmail 67468 invoked by uid 60001); 9 Dec 2009 09:57:29 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1260352649; bh=LJw+eTFcue8Bv/ujdBY4WHWjHGonreOE3Y1MJFaROv4=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=ImdJ1kKBVPoAcB94bsqlU2Ipzds5/Hn4rgynUEjXhf7364Xloe/ijYVB8Pmr97/rEzJsHWj6kqD2mm6XxGFCB+XPReh/1Eqzo6SmDRf57mobeTJrm/EJUnc91g3vdZqqH4S0UZHI0hCdC/m3IxcyU+9DCMhQJSEwk654ZqutNYo=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=fH7PMZ6KLnnfSYDndOI41MfzsFxysiKM8M6AbGwqxmU4v170i1xLJrOnvFWh2VnI9sxxMgFCTk8/6flQzg4IyjKGdsKaI3TaH22fMRjC5DOAu0BfhlBlx49edgRP+mTX1xo7PUh0jbFdXhbD7Y2aIKtvxGI5R6NPlRX9DnPEc1c=;
Message-ID: <386784.67012.qm@web94806.mail.in2.yahoo.com>
X-YMail-OSG: XfDN1JcVM1ncfAOr6v.IM9ngOZfoxwsCiyK1Oh0TAYdDGXFVZh7QqeWHhmJAm7FA0sGXA_CkiC7VZ3ntxPKZhsgUAm2412Y3rKLJig1_TAvCiAo8KTwfSZczKW_ByA_ah6DhE7pbBlKsqkB.y.kKyL5WalbCuRBDTzk.eIQEhewhQc0ySDXAHXMcuTz5mFNLorQPJQvapnHnVy83.8oQFenfeZiaINH7kh.5NlXmLRi5_acmyl_jdr0DKezz9UWTM3ESSymXGheWDJh4TLUYiTsGOzQPPQ--
Received: from [209.73.190.211] by web94806.mail.in2.yahoo.com via HTTP; Wed, 09 Dec 2009 15:27:29 IST
X-Mailer: YahooMailClassic/9.0.19 YahooMailWebService/0.8.100.260964
Date: Wed, 9 Dec 2009 15:27:28 +0530 (IST)
From: DHIVYA M <dhivyakrishnan87@yahoo.com>
Subject: Kindly spot out the reason for this undesired output.
To: java user <java-user@lucene.apache.org>
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary="0-1251658241-1260352649=:67012"

--0-1251658241-1260352649=:67012
Content-Type: multipart/alternative; boundary="0-1863837678-1260352649=:67012"

--0-1863837678-1260352649=:67012
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi all,
=A0
I have attached the code file and also the output screenshot. The problem i=
s:
=A0
When i search for a query, it gives out the resultant documents containing =
the query but,
=A0
if two documents a and b contains that query,
Result is:
=A0
Link for a:
contents of a
contents of b
=A0
Link for b:
contents of a
contents of b
=A0
kindly go through the attached documents for the code, obtained output and =
the correct output screenshots.=A0
Can anyone pls solve this problem.
I want the contents of the corresponding file alone to be displayed and the=
 repetition should be avoided.
=A0
Also how to rank my results / how to implement relevancy ranking.
Am a beginner and have no idea so kindly help me on this context.
=A0
Thanks,
Dhivya=0A=0A=0A      The INTERNET now has a personality. YOURS! See your Ya=
hoo! Homepage. http://in.yahoo.com/
--0-1863837678-1260352649=:67012
Content-Type: text/html; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

<table cellspacing=3D"0" cellpadding=3D"0" border=3D"0" ><tr><td valign=3D"=
top" style=3D"font: inherit;"><DIV>Hi all,</DIV>
<DIV>&nbsp;</DIV>
<DIV>I have attached the code file and also the output screenshot. The prob=
lem is:</DIV>
<DIV>&nbsp;</DIV>
<DIV>When i search for a query, it gives out the resultant documents contai=
ning the query but,</DIV>
<DIV>&nbsp;</DIV>
<DIV>if two documents a and b contains that query,</DIV>
<DIV>Result is:</DIV>
<DIV>&nbsp;</DIV>
<DIV>Link for a:</DIV>
<DIV>contents of a</DIV>
<DIV>contents of b</DIV>
<DIV>&nbsp;</DIV>
<DIV>Link for b:</DIV>
<DIV>contents of a</DIV>
<DIV>contents of b</DIV>
<DIV>&nbsp;</DIV>
<DIV>kindly go through the attached documents for the code, obtained output=
 and the correct output screenshots.&nbsp;</DIV>
<DIV>Can anyone pls solve this problem.</DIV>
<DIV>I want the contents of the corresponding file alone to be displayed an=
d the repetition should be avoided.</DIV>
<DIV>&nbsp;</DIV>
<DIV>Also how to rank my results / how to implement relevancy ranking.</DIV=
>
<DIV>Am a beginner and have no idea so kindly help me on this context.</DIV=
>
<DIV>&nbsp;</DIV>
<DIV>Thanks,</DIV>
<DIV>Dhivya</DIV></td></tr></table><br>=0A=0A=0A=0A      <!--1--><hr size=
=3D1></hr> =0AThe INTERNET now has a personality. YOURS! <a href=3D"http://=
in.rd.yahoo.com/tagline_yyi_1/*http://in.yahoo.com/" target=3D"_blank">See =
your Yahoo! Homepage</a>.
--0-1863837678-1260352649=:67012--
--0-1251658241-1260352649=:67012
Content-Type: image/pjpeg; name="result.jpg"
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename="result.jpg"

/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsL
DBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/
2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIy
MjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCAMABAADASIAAhEBAxEB/8QA
HwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUF
BAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkK
FhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1
dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXG
x8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEB
AQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAEC
AxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRom
JygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOE
hYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU
1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwDck0TTGnit
4tLsBJJklmt0wqjqenuKyM+H7qX7NZW+n4LELO8MLNKwPRQB8q9skHPXGOu5
4tjun0SS0sY2M06kSlPvGLK7lX1JHb0B71ztrYWX2GCKG2e4nCgCOGSfd7ZA
YBO3t/u12YalHFTftNIRdraXb7vXbol9/Q8vFVpYe3LfmktHrZeS0d3116bG
zYaVpF3ZpMNLseSQf9HTqCQc8deKg1CHw9pkqpc6VagGCWcsLVCAse3PbOfm
GOK6DSdNNjpkFu0aRsoJZEZmCkkkjLEk9ep6+3Ss6/0+4utb89tNaW1tbSWP
a7Ji6Mmw7VBPopB3YGSO3NU4qOkdjoi29ZGRL/ZcEMLS+E2WaacQx25t7fex
2ls537cYU/xZ9qnWLQG0ObVf7HtxFAkjyRG1j8xSmdykdMggjrj3qFdB1a5a
1SNb6wtIr9ZIVlmilmt0ELqxyS6lSxAAyxGT0GMbV7oJi8JX+m2KvLNLbTKp
dhulkcEkk8DJY57DnsKXRuxStdK/9XZmadb6NqEssLaBFaTxKrmKe3iyUbOG
BQsCOCOvatD+wdJ/6BVj/wCA6f4VVvPDlxDotz5fnale3CxRy/aFhZvKB5VF
KrHkAsRuGMnnNZUPh+5stNsvt2kvd2lu1yTbySwjyNz7o5CAQgwu4fLyuflF
EmlfTYSTfU3/AOwdJ/6BVj/4Dp/hR/YOk/8AQKsf/AdP8K5Sz8OXl5Z6DdyW
17PbLp0Ai+ym3LQSA5Lfvhlcgr8yEH5ee1d9c6fLPNDJHfXFusbZaOJYyso9
G3KTj/dI61Vl2E9OphyafocV59mk0qzVvJabcbZNu0EA9u2R+dVIBoV1aWc9
voUUjXaO8cItY1cbRyDnABzgdepFaniXR7u+jtjZIGfeYJssFxDINrkZ9ODj
2rNufDl+58QRpbr5DWksengOBuaYbpBj+H5wOvrU/Ipa21NEaDpJAP8AZNkP
Y26f4VXutO0SzmtI5NItC11N5KbbZOG2s3PthTVOfwtPJc3t6LFTe/bbWS2l
LLuVFEQkKnPy8K4I4zjvxTU8P3n9uW0v9klZo9Qlmm1HzUPmxMsgTvuO3cow
RxjjIofp/WgktL3/AKsa/wDYOk/9Aqx/8B0/wo/sHSf+gVY/+A6f4Vh2HhW6
a38htN+w3C2bxXN3vQ/bJjjbJ8pJbDAtucAjPA5OLlroeqyX0U93CyJdMLq7
RZVPlyJuCIOeTgx8jj9370X8ga8y9JoelRxO40ezcqCQi26Zb2GcD8zVbTLD
RtV0y3votFtoo50DqstvHuAPTOMj9al8M6ZPpmnXcZ0o2yK37lCkKTzYXrIY
2KMxPG7Iz3A6nCh8IXlzo8gu9L/0qLRo7e3WR0JS4UycqQxAPKkN79etHy/r
UaV+puw6XoU81xDFpti0lu4SUfZlG0lQwHTngjpU39g6T/0CrH/wHT/CsS88
L3ZGurbaYI5rx4ZRcReUpmQCPzIsnPLFX4ZdpzyeTU+l+Fyl5pjPp1wtrbLc
NsvBbgxuxjKFVh+QDKsRgcHnrii/kLpe5qf2DpP/AECrH/wHT/CoZ9L0K2kg
SXTbFWnk8qMfZlO5sFsdOOFP5VkWnhC+tNNtEsrdbO9k0ma3uZlcA+cQnl7m
BJOCGwRnA6dqgtvCPlw2UjaBdSGC8WWS3uUs/umNlYoI9q/e2E7sE7R1xT62
t/VxtW69/wAjT1C20mxu7e1j8OR3c86O6pBBCMKu3JJdlH8QrQXQdJKgnSbJ
SR0NumR+lQeItKnuNY025Swv7uCGKZHFjdCB1ZjHt58xCR8p4zWVrWk3aQa3
fPYNHZvZ3BjiaRSYZPK+aUgEj5+V4yRjP8bYm9le3cEr2VzUv9O0TTrb7RNp
FoyeYkeEtkJy7hR+rCrP9g6T/wBAqx/8B0/wrEi8PXUtvM9ppLWUbmzzE0iE
zMkwd5SQxB+XufmbHI6VZtPD91HrSyvpmy5W8lmk1Ten76Ft22Pg7zwUG0gK
NuQeBlvToLpe/wDVjS/sHSf+gVY/+A6f4Uf2DpP/AECrH/wHT/Cuam8G3K6L
okDafK8cULC8t7UW7OZiqgOfOBRsBSM5yMjHGa6PQ9Ca11LUb24tmEsrRrFN
MVaUoIowQSM4O5Tn1Iz6U1a9rA1bqO/sHSf+gVY/+A6f4Uf2DpP/AECrH/wH
T/CtzyPajyPanZE3Zh/2DpP/AECrH/wHT/Cj+wdJ/wCgVY/+A6f4VueR7UeR
7UWQXZh/2DpP/QKsf/AdP8KP7B0n/oFWP/gOn+Fbnke1Hke1FkF2Yf8AYOk/
9Aqx/wDAdP8ACj+wdJ/6BVj/AOA6f4VueR7UeR7UWQXZh/2DpP8A0CrH/wAB
0/wo/sHSf+gVY/8AgOn+Fbnke1Hke1FkF2Yf9g6T/wBAqx/8B0/wo/sHSf8A
oFWP/gOn+Fbnke1Hke1FkF2Yf9g6T/0CrH/wHT/Cj+wdJ/6BVj/4Dp/hW55H
tR5HtRZBdmH/AGDpP/QKsf8AwHT/AAo/sHSf+gVY/wDgOn+Fbnke1Hke1FkF
2Yf9g6T/ANAqx/8AAdP8KP7B0n/oFWP/AIDp/hW55HtR5HtRZBdmH/YOk/8A
QKsf/AdP8KP7B0n/AKBVj/4Dp/hW55HtR5HtRZBdmH/YOk/9Aqx/8B0/wo/s
HSf+gVY/+A6f4VueR7UeR7UWQXZh/wBg6T/0CrH/AMB0/wAKP7B0n/oFWP8A
4Dp/hW55HtR5HtRZBdmH/YOk/wDQKsf/AAHT/Cj+wdJ/6BVj/wCA6f4VueR7
UeR7UWQXZh/2DpP/AECrH/wHT/Cj+wdJ/wCgVY/+A6f4VueR7UeR7UWQXZh/
2DpP/QKsf/AdP8KP7B0n/oFWP/gOn+Fbnke1Hke1FkF2Yf8AYOk/9Aqx/wDA
dP8ACj+wdJ/6BVj/AOA6f4VueR7UeR7UWQXZh/2DpP8A0CrH/wAB0/wo/sHS
f+gVY/8AgOn+Fbnke1Hke1FkF2Yf9g6T/wBAqx/8B0/wo/sHSf8AoFWP/gOn
+Fbnke1Hke1FkF2Yf9g6T/0CrH/wHT/Cj+wdJ/6BVj/4Dp/hW55HtR5HtRZB
dmH/AGDpP/QKsf8AwHT/AAo/sHSf+gVY/wDgOn+Fbnke1Hke1FkF2Yf9g6T/
ANAqx/8AAdP8KP7B0n/oFWP/AIDp/hW55HtR5HtRZBdmH/YOk/8AQKsf/AdP
8KP7B0n/AKBVj/4Dp/hW55HtR5HtRZBdmH/YOk/9Aqx/8B0/wo/sHSf+gVY/
+A6f4VueR7UeR7UWQXZh/wBg6T/0CrH/AMB0/wAKP7B0n/oFWP8A4Dp/hW55
HtR5HtRZBdmH/YOk/wDQKsf/AAHT/Cj+wdJ/6BVj/wCA6f4VueR7UeR7UWQX
Zh/2DpP/AECrH/wHT/Cj+wdJ/wCgVY/+A6f4VueR7UeR7UWQXZh/2DpP/QKs
f/AdP8KP7B0n/oFWP/gOn+Fbnke1Hke1FkF2Yf8AYOk/9Aqx/wDAdP8ACj+w
dJ/6BVj/AOA6f4VueR7UeR7UWQXZh/2DpP8A0CrH/wAB0/wo/sHSf+gVY/8A
gOn+Fbnke1Hke1FkF2Yf9g6T/wBAqx/8B0/wo/sHSf8AoFWP/gOn+Fbnke1H
ke1FkF2Yf9g6T/0CrH/wHT/Cj+wdJ/6BVj/4Dp/hW55HtR5HtRZBdmH/AGDp
P/QKsf8AwHT/AAo/sHSf+gVY/wDgOn+Fbnke1Hke1FkF2Yf9g6T/ANAqx/8A
AdP8KP7B0n/oFWP/AIDp/hW55HtR5HtRZBdmH/YOk/8AQKsf/AdP8KP7B0n/
AKBVj/4Dp/hW55HtR5HtRZBdmH/YOk/9Aqx/8B0/wo/sHSf+gVY/+A6f4Vue
R7UeR7UWQXZh/wBg6T/0CrH/AMB0/wAKP7B0n/oFWP8A4Dp/hW55HtR5HtRZ
BdmH/YOk/wDQKsf/AAHT/Cj+wdJ/6BVj/wCA6f4VueR7UeR7UWQXZh/2DpP/
AECrH/wHT/Cj+wdJ/wCgVY/+A6f4VueR7UeR7UWQXZh/2DpP/QKsf/AdP8KP
7B0n/oFWP/gOn+Fbnke1Hke1FkF2Yf8AYOk/9Aqx/wDAdP8ACj+wdJ/6BVj/
AOA6f4VueR7UeR7UWQXZh/2DpP8A0CrH/wAB0/wo/sHSf+gVY/8AgOn+Fbnk
e1Hke1FkF2Yf9g6T/wBAqx/8B0/wo/sHSf8AoFWP/gOn+Fbnke1Hke1FkF2Y
f9g6T/0CrH/wHT/Cj+wdJ/6BVj/4Dp/hW55HtR5HtRZBdmH/AGDpP/QKsf8A
wHT/AAo/sHSf+gVY/wDgOn+Fbnke1Hke1FkF2YL6BpRMSLplkpkljj3fZk4D
OFz0960P+EJ0P/nh/wCQIP8A41VmeLb5B6YuIefT94tSXljf+QPLFzIRIhZE
kKs6BgWAORglcjqPqKmSRUWyl/whOh/88P8AyBB/8ao/4QnQ/wDnh/5Ag/8A
jVXfKj/6F7Wv/Bg//wAkUtnYaitlAtw85nEaiQ7ictjn9aiOpctDBtfDWlXN
+9o9jaosfnZeO2jDNskCDqpHOcninal4e8L6ZbySXHlK6xs6xMlsrPgdADHz
6Vp2kLvqUgRm3N9qwVPJ/frUd02s6dezNZPdRtMkIMiwvJuVfNyuRG+DlkPI
9actFcI6uxkjw9onBA0i4UOistpcwyuAzqgO37OOMsM8ir934P0W2sbi4jtk
Z4YnkCvbwlSVUnBxGD29adBpWpaldTXtwzh3aHfI8Eis5RYSxUEqFBeMfwZw
PTGNK+tLiPTbxneXb9nlzuJx9w0orS7CTV7I5OLw9pl9cXu+KO2W3uBAiW9t
ByPLjckl425y+OMdKP8AhFtMK3UiRXkkFpt+0SpBZHywRnJXyt233AxwfQ4L
qwvrnUtTFm842XnzCIkdYIME4+h/KrOjQaro93Ne/Zb+4vvLMVuWYiJQcZL8
7m/3cY49cFeCVSXtpRex66oQWGjOKTk7dCA+E9OiuI4LmG9tpJIvORZYLHcU
zjJUREr9GAPB9Dhsvh7TLG4stkUdytxcGB0uLaDgeXI4IKRrzlMc561Jqljq
Oo6pJfW1vqVs1wA06SOWAcAD5WByVx6gYxxxwI7WwvrbUtMF48533nyiUk9I
J8kZ+o/OiNWXtlHoOVCn9WlNpKVn0O4eCKUYkjVwOzDNMeW3iO1pEUjtmqup
3jxBYYiBJIcZPQDGST7Af0Hesa2Zb+8NnYWJ1G4A3M0uCMeuCdqj/OTXqxp7
ySPDvfQ6VJIZPuSK30NP2CuSt7+zuJWhWMWdwpK4GdmR2ZOn4jB/lWvbt50W
cMjKSrpu+6w6j/PUYNOUXHcV09jVbYoyxAHuai+0W2cecn51HYacl7KzSErA
hwSOrn0B7CtxdL0zyyosISB/ERlvzPNYyqWLULmaArDI5HqKqX2j6bqgQahp
9rdiMkoLiFZNpPXGQcVYvLIac32i0LG2z+8iY52+4Pp9akBBAI6GqTUkJqzE
2KO1GwU6iqJDySf4G/KjyT/cb8qdYaZps+lzXl5ptnczCe5JeaBHYhZnAGSD
0AAq8PDOnn/mAaN/35T/AON1i61jZUjP8k/3G/KjyT/cb8qt2uk+H7uPcmja
ZuGNyi1jOM/hU/8Awj2h/wDQF03/AMBI/wDCj2vkHszN8k/3G/KjyT/cb8q0
v+Ee0P8A6Aum/wDgJH/hR/wj2h/9AXTf/ASP/Cj2r7C9mjN8k/3G/KjyT/cb
8q0v+Ee0P/oC6b/4CR/4Uf8ACPaH/wBAXTf/AAEj/wAKPavsHs0Zvkn+435U
eSf7jflWl/wj2h/9AXTf/ASP/Cj/AIR7Q/8AoC6b/wCAkf8AhR7V9g9mjN8k
/wBxvyo8k/3G/KtL/hHtD/6Aum/+Akf+FH/CPaH/ANAXTf8AwEj/AMKPavsH
s0Zvkn+435UyW0SeF4ZoBJE6lXR1yrA9QQeorV/4R7Q/+gLpv/gJH/hR/wAI
9of/AEBdN/8AASP/AAo9r5D9n5maICoAEZAHAAFHkn+435Vpf8I9of8A0BdN
/wDASP8Awo/4R7Q/+gLpv/gJH/hR7V9hezRm+Sf7jflR5J/uN+VaX/CPaH/0
BdN/8BI/8KP+Ee0P/oC6b/4CR/4Ue1fYPZozfJP9xvyo8k/3G/KtL/hHtD/6
Aum/+Akf+FH/AAj2h/8AQF03/wABI/8ACj2r7B7NGb5J/uN+VHkn+435Vpf8
I9of/QF03/wEj/wo/wCEe0P/AKAum/8AgJH/AIUe1fYPZozfJP8Acb8qPJP9
xvyrS/4R7Q/+gLpv/gJH/hR/wj2h/wDQF03/AMBI/wDCj2r7B7NGb5J/uN+V
Hkn+435Vpf8ACPaH/wBAXTf/AAEj/wAKP+Ee0P8A6Aum/wDgJH/hR7V9g9mj
N8k/3G/KjyT/AHG/KtL/AIR7Q/8AoC6b/wCAkf8AhR/wj2h/9AXTf/ASP/Cj
2r7B7NGb5J/uN+VHkn+435Vpf8I9of8A0BdN/wDASP8Awo/4R7Q/+gLpv/gJ
H/hR7V9g9mjN8k/3G/KjyT/cb8q0v+Ee0P8A6Aum/wDgJH/hR/wj2h/9AXTf
/ASP/Cj2r7B7NGb5J/uN+VHkn+435Vpf8I9of/QF03/wEj/wo/4R7Q/+gLpv
/gJH/hR7V9g9mjN8k/3G/KjyT/cb8q0v+Ee0P/oC6b/4CR/4Uf8ACPaH/wBA
XTf/AAEj/wAKPavsHs0Zvkn+435UeSf7jflWl/wj2h/9AXTf/ASP/Cj/AIR7
Q/8AoC6b/wCAkf8AhR7V9g9mjN8k/wBxvyo8k/3G/KtL/hHtD/6Aum/+Akf+
FH/CPaH/ANAXTf8AwEj/AMKPavsHs0Zvkn+435UeSf7jflWl/wAI9of/AEBd
N/8AASP/AAo/4R7Q/wDoC6b/AOAkf+FHtX2D2aM3yT/cb8qPJP8Acb8q0v8A
hHtD/wCgLpv/AICR/wCFH/CPaH/0BdN/8BI/8KPavsHs0Zvkn+435UeSf7jf
lWl/wj2h/wDQF03/AMBI/wDCj/hHtD/6Aum/+Akf+FHtX2D2aM3yT/cb8qPJ
P9xvyrS/4R7Q/wDoC6b/AOAkf+FH/CPaH/0BdN/8BI/8KPavsHs0Zvkn+435
UeSf7jflWl/wj2h/9AXTf/ASP/Cj/hHtD/6Aum/+Akf+FHtX2D2aM3yT/cb8
qPJP9xvyrS/4R7Q/+gLpv/gJH/hR/wAI9of/AEBdN/8AASP/AAo9q+wezRm+
Sf7jflR5J/uN+VaX/CPaH/0BdN/8BI/8KP8AhHtD/wCgLpv/AICR/wCFHtX2
D2aM3yT/AHG/KjyT/cb8q0v+Ee0P/oC6b/4CR/4Uf8I9of8A0BdN/wDASP8A
wo9q+wezRm+Sf7jflR5J/uN+VaX/AAj2h/8AQF03/wABI/8ACj/hHtD/AOgL
pv8A4CR/4Ue1fYPZozfJP9xvyo8k/wBxvyrS/wCEe0P/AKAum/8AgJH/AIUf
8I9of/QF03/wEj/wo9q+wezRm+Sf7jflR5J/uN+VaX/CPaH/ANAXTf8AwEj/
AMKP+Ee0P/oC6b/4CR/4Ue1fYPZozfJP9xvyo8k/3G/KtL/hHtD/AOgLpv8A
4CR/4Uf8I9of/QF03/wEj/wo9q+wezRm+Sf7jflR5J/uN+VaX/CPaH/0BdN/
8BI/8KP+Ee0P/oC6b/4CR/4Ue1fYPZozfJP9xvyo8k/3G/KtL/hHtD/6Aum/
+Akf+FH/AAj2h/8AQF03/wABI/8ACj2r7B7NGb5J/uN+VHkn+435Vpf8I9of
/QF03/wEj/wo/wCEe0P/AKAum/8AgJH/AIUe1fYPZozfJP8Acb8qPJP9xvyr
S/4R7Q/+gLpv/gJH/hR/wj2h/wDQF03/AMBI/wDCj2r7B7NGb5J/uN+VHkn+
435Vpf8ACPaH/wBAXTf/AAEj/wAKP+Ee0P8A6Aum/wDgJH/hR7V9g9mjN8k/
3G/KjyT/AHG/KtL/AIR7Q/8AoC6b/wCAkf8AhR/wj2h/9AXTf/ASP/Cj2r7B
7NGb5J/uN+VHkn+435Vpf8I9of8A0BdN/wDASP8Awo/4R7Q/+gLpv/gJH/hR
7V9g9mjN8k/3G/KjyT/cb8q0v+Ee0P8A6Aum/wDgJH/hR/wj2h/9AXTf/ASP
/Cj2r7B7NGb5J/uN+VHkn+435Vpf8I9of/QF03/wEj/wqhoehaPL4f02STSN
PeR7WJmZrWMliUGSTjk0e1fYPZoZ5J/uN+VHkn+435Vdj0bw9NLLFHo+nM0R
2viyTAOM4ztwTyOlS/8ACPaH/wBAXTf/AAEj/wAKftH2BQT2Zm+Sf7jflR5J
/uN+VP0fQtHlspGk0jT3YXVwoLWsZOBM4A6dAAB+FX/+Ed0T/oC6b/4CR/4U
va+QezRm+Sf7jflSGPHUEfWtP/hHdE/6Aum/+Akf+FZKwRW17qEEEaRQR3IE
caKFVQYYiQAOnJJ/GqjUu7ClCyuSeUf7p/KjyT/cb8ql0rSNNvbJp7zTrO4n
a5uAZJoEdiBM4AyR2AA/Crv/AAj2h/8AQF03/wABI/8ACp9r5D9mZvkn+435
UeSf7jflWl/wj2h/9AXTf/ASP/Cj/hHtD/6Aum/+Akf+FHtX2D2aM3yT/cb8
qPJP9xvyrS/4R7Q/+gLpv/gJH/hR/wAI9of/AEBdN/8AASP/AAo9q+wezRm+
Sf7jflR5J/uN+VaX/CPaH/0BdN/8BI/8KP8AhHtD/wCgLpv/AICR/wCFHtX2
D2aM3yT/AHG/KjyT/cb8q0v+Ee0P/oC6b/4CR/4Uf8I9of8A0BdN/wDASP8A
wo9q+wezRm+Sf7jflR5J/uN+VaX/AAj2h/8AQF03/wABI/8ACj/hHtD/AOgL
pv8A4CR/4Ue1fYPZozfJP9xvyo8k/wBxvyrS/wCEe0P/AKAum/8AgJH/AIUf
8I9of/QF03/wEj/wo9q+wezRm+Sf7jflR5J/uN+VaX/CPaH/ANAXTf8AwEj/
AMKP+Ee0P/oC6b/4CR/4Ue1fYPZozfJP9xvyo8k/3G/KtL/hHtD/AOgLpv8A
4CR/4Uf8I9of/QF03/wEj/wo9q+wezRmNbh0KPHuUjBBGQarf2PY/wDQPg/7
8j/Ctz/hHtD/AOgLpv8A4CR/4Uf8I9of/QF03/wEj/wo9r5B7PzMP+x7H/oH
wf8Afkf4Uf2PY/8AQPg/78j/AArc/wCEe0P/AKAum/8AgJH/AIUf8I9of/QF
03/wEj/wo9r5D9n5mQ9hBJEsT2qNGv3UZAQPoKi/sex/6B8H/fkf4Vuf8I9o
f/QF03/wEj/wo/4R7Q/+gLpv/gJH/hR7XyD2fmYf9j2P/QPg/wC/I/wpV0mz
Rgy2MKsDkERAEfpW3/wj2h/9AXTf/ASP/Cj/AIR7Q/8AoC6b/wCAkf8AhR7X
yD2fmYF3oOm38olvNLtbiQDAea3Vzj0yRUH/AAimhf8AQB07/wABE/wq95/g
03Hlf2bp23f5fnfYF8vd6btuK2P+Ee0M/wDMF03/AMBI/wDCnKTW8RRafwyO
Z/4RTQv+gDp3/gIn+FT2uhaZp8pms9LtbaQjBeGBUOPTIFb/APwj2h/9AXTf
/ASP/Cquo6NpdpZ+fa6bZW8yzQ7ZIbdEYZlUHkD0JFJVPIpxdtzzH4ia/caD
qVtstzKlxbOq/NjB3rn+S16L4LudB/4Q8XWl3LnzIy1xKI8zCQDkFcHkdl59
s5ycPxV4cXxFp0axqhvLZi8Qc4EgIwyZ7Z4wexArm9Ask0u4dLXUFsrsjEtt
dERv+KMRnHZlJHoa7nCNajyqVmunc4Klf2FRScW0+q6EWv6h4FsNLurvR9W1
G71QHdHHJFIA7Z53FkHvzn86ueBNam1+2v7t4DEgkRQpOeQgBOfpisq+8O2d
zcm3tZUv712y0Vswc5PUuw+VB7n8ATxXd+HvD39haRHaKu6QkySuq4DOeuB6
DgD2ArSuoQp8vNzN/gRhasq15OHKifSL8/2fb70wCDvI55yc/rWtDfoWKxt7
kFSKwXV9HuJWmikOnzMZPMRCxgc/e3Ac7CecjoSc8dJhdWMkRnj1G08gjmRZ
02/nnivOaR3q5c1G+XyZxtDJ5bbz2HFMsCxs4DLw5jBORnBI7jjvWeSmrqIL
QFrAn9/c4wki/wByPP3s9Cw4AyASemseTVRRMirZTalJcXC31lbwQxHajoWJ
lOMgrk/d5HJ+nXOLVFFaN3IjHlVht1eDT/Bl5O0nlgS3ILAZIBnfOPfGce+K
5bRJ72/vNG1B7q3glmuFPlS3LvIU3/dCiPAYqDk7jn1AyK7I29neaHNY3M8M
bmWYr5jDKMZGKtjIz1BqvYaZb6XJ5lldaHC+MbltjkD0B87gVxQS53Kor9vL
vpb8enS12dE1JqPI7d/+AdC20anMAAP3MZOO/wAz1w/iG+1TS/FWtahpps/9
E0SG4lW5Rm8xUec7F2kbSefmOcY+6c8dVbShLqa4utTspWdEQCLEYUKWPd2z
979KklGkztM0xsJDNF5MpcofMj5+Rs9V+Y8Hjk+tC0NbrW/9ao4DUr3xI3/C
Qy2+swRRJqtikSG3kLRq/kHaCJhgfONwA+b5um7jYufEut2+o6iu/TGttOvL
W2kj8pxLP5qx52/OQh3OcZDZ6cYyd+aw8PXEk8k9rpUrzxiGZnSJjJGOisT1
UYHB4qjZaBoNprN1qbDS5ZnlR7ZjHGGtQsSR7UbOQMJnjHXFNaaf10J6aiXE
8urw2WmTyWk5ubiRrg2jEx/Z4nPBPqT5aMPUt6VleIgL6zvtUK5Rb+zs7Y8/
cS6j3kemXyPcItdTBFpFrO01u9pE7LtOyRQMbixwM4BLMSSOSetKkekJYx2W
6za2j27Y5JFcZUgg8k5IIByec89aFo0/6/q36gc/a+JdUmvobh/sJ0+fUZ9P
S1SNvtCGPeN5fdhs+WTt2DAbqccrB4g1STwt/bsk9kovVj+w2sVo0jxyOwCx
uTKodskKf9WAc5OBW5Ha6FFqcmpxw6Yl/Iu17pRGJWHHBfqRwO/YVAdJ8ME3
hNjoxN6c3X7qL9/zn5/73PPOeaVtP6/r/Ibavf8Ar+vzOC1fVrzWdKNzfwpF
dppGtQSKgAGUMa9AzgHjkBmwe5rdfxNrOlQ3NpdLp7zrBZPbSRo6xxefKYsS
ZbLbCM5G3d6LXSpZeH44FgS30pYVR4xGFjChHxvXHTDYGR3xzUssejziUSjT
5BNEIJA5jO+MZwh9V5PB45NP+vz/AMwvol6/p+hzlzr3iG3t7yIfYpZbC6Ed
1fQWbyIkRi8zd5Al3lgSoIV2OCDjnAi0jUdYbV9bmbV9OltPt9skSzxvGAjx
xHCEyHBKtwuOXOe+K3X0bwtLp8Wnyafor2ULl47ZoojGjHOSFxgHk8+9Tvaa
DJeNePDpjXTBQZ2EZc7SCvzdeCAR6YoWjE9jy6FGgtftHlW8NvqtqHFzbECW
6ga6j82S654cRyAZBYDMnIyFFy/04T6reaDpdhps9vBeXD2lhfLts1At4t5A
A4ZZJcgAY+Z+V6j0OHT/AA7bSXckFrpMT3gIuWRIlM+c53kfezk9fWmS6V4Y
n06LTpbHR5LGFt0Vs8cRiQ88qvQHk9B3NK2lv63/AE/qxXN71/62OCtTBdWy
asnmS6hb3OlxafNcAGdYHWLcMgnh9027BwcHk4rc8RAX1nfaoVyi39nZ2x5+
4l1HvI9Mvke4Ra6hrfRGvYb1o9NN3Anlwzny/MjX+6rdQOTwKckekJYx2W6z
a2j27Y5JFcZUgg8k5IIByec89aq+t/O/5f5fiStLIw4/FN2TYh47ffcazc2D
KFOfLjExBAz9792ue3J46VWk8UaxD4NPiMiylW6EP2S1jiIaAySBAJHaQK5G
4ZH7sZBGR1G+LDw6upNqQtdJF+zBjdBIvNJxjO/rnHHXpSJp3hyN7x0tNIVr
0EXTKkQM4Oc7/wC9nJ6561PT+v61/Ad1e/8AW5gx614tludO06S2sbG9uY7m
R5LqDcNsZj2kRxzsBneQR5h6Z/2TUi8aa/qc+lx6VpKStLp8F9coAjZEjEFV
LzRlQNp+YLJ1GQMc9XZWPh/TQgsLbSrUR7tggWNNu7G7GOmdq59cD0qO50rw
zeRW0V1Y6PPHajFuskcTCEccID93oOnpT/r8/wDgfcLozKvdRlg/tHXIFh8z
z4tNs3nJ8tAZFR3bpx5jHIB+YRryM8Y9he3Nv4kvFuY9OvbuTXY4GlWIhVIs
c7kBYlG+XB5OAWFdqItHGm/2czWcln5flmGWRXVl7htxO7PfOc1FBYeHrWJY
re20qGNGDqsaRKFYLsBAHfb8ufTihaf16f8AB+8dzm18T66sNlayvYR6rcX6
Wk8M1nJGtqGidx/y0YSnKjDKwDdPlPIrtr8n9r2Go6jJAj2Vpqkcs8MTGNvK
kiXeqZzjj7uTzkZ71tXfhnw3PBZWtvDpFrYwXZupbWOGIRzkxvGQyjA6MOSD
93Faq22hJBFAsWmLDFE0McYEYVI2xuQDspwMjocCjz/rb/hwurr+u/8AwDmd
N8YarGJZNdgt7aC1vPs10/lhGjVoldGKrLIF+Y7SNxzuU8cill8Va3a/a554
LMQ2ekDU5YBG4kYsZdsYbdhcBFycHkNxyMal1omkPZx6dYyaTY6Y0ivdW8MK
L5wUghQQwC8gZyDkcDHWtnzNN+0PP5ln5zoI2k3puZQSQpPUgEnj3ND/AK+7
/MSst/61/wAjkY9e8XDRjd3Onw26iRXa7+yLKFgKElhDFcuz4IAyHzhuF4rV
1PV4Gn0P7MLG+kkvVjYsuTEWt5JAV5yjEAdf4WPrUn/COeDhbm3Gj6B5LOJD
H9nh2lgCA2MYzgnn3outNs7rW7a8a905LWF/PaBI1Eks3ltGGeTdggI2Mbc8
DnAxQ/6/r+v8hefmYq+J9dWGytZXsI9VuL9LSeGazkjW1DRO4/5aMJTlRhlY
BunynkLNEvie104ajBp7X0eoy2q3qgL5ZiZmLwKzbg7eUBwSV5J3Ba0bvwz4
bngsrW3h0i1sYLs3UtrHDEI5yY3jIZRgdGHJB+7itiKPRoIraKJdPjjtebdE
8sCHgj5B/DwSOOxNC7/10/4P6g+39df+Ac4nifVX1WxO/TfsV5qk1gsARvPj
ESyZYtuwSTGDjaNoIHPWoW8c3cGi6Zfy21vI8+jXOozwplTviEZCrknAyzA5
z0rXvdE0W51iz1SB9OtryG6FxNMix+ZcARugVmBB/jzznpVy10/w7ZXUl1aW
ukwXEpYySxJEruW5bJHJzgZ9aSva39bf56lXXNfp/wAF/pY5uDxD4ra2sEuL
Sztp769SGGeaBShjaGRyQkdw+cFByXGQeg61fh8TXjO9s/2BLuxSd9RMztFE
gQ4jO75tgcEPk7sKDxmtKz0vw1p2PsNlo9riQSjyI4k+cAgNx3wzDPoT60aV
BBYzXl3dajZ3F7eSBpZY9sa7VG1FClmOAPUnJJPHQNk9v67mbp3im81ex1E6
f/YF5eQQF4IdO1cXW5+cB8om0ZHrz7darw+ItXvZbHTrS809b6Vbh57i50+W
NIzEUBj8ky53fvAd28jAyMgiuouJNNvLaS2uZbOeCVSskUroyuD1BB4IqhJp
HhiXTYtOksNGexhbfHbNFEYkbnkL0B5PbuaAOS1XxPr2qaFqDWEtnYKmgjUH
k8t5H3MJQRGwddv3AVbBx6HtbvNc1PSZJsQ6bcaitlYZuTA0fmGW4aPDfMx2
gcjk4JJ74rrj/ZTPIzGxLSRCFyWTLRjOFPqvJ46cmoIrHw9BCsMNtpUcSqqq
iLGFAVi6gAdgxLD0Jz1o6/15jb/r7v8AJ/eYI8Ra2s8mkySaaNRGprZLdmBx
DtMAmDeV5mS2Mrt39ec9qyL2+1DxhZ2Om+TpE18Lu8kC3Ss9lMkDNEAyZJck
ujdcDBbsAes1qxsdSsJ7eF9D3XEivP8AbrZbmOXaAAWQOuSMLgk8YqvYeHtA
g8PwaTqP9mamkcjzt9ojiKGVmLMyochRliAOw4yaVr7/ANbBddP63MDTfEV5
Z+Grp9MMcsemyWelpDcyBws/mCOUF05IAdAD7Zx2N1/EXiK0mu/tL6XLFp2o
W9pceXbyK06zGPDJmQ+WVEo4O/dj+GuiGn+HRKJRa6SJBGkQfZFkIhBRc+ik
AgdiBip3TSJPN3/YG851kk3FDvdcbWPqRtXB7YHpVX1u/wCtv+D94ltY5N/F
+qtrN7Db/Y/sAt7mW2ubiHykzAyq4JEzMy5LAsUQAgEbhVix8T6tqd5pHkR2
tvBfrczvFNC7TQxxNGvlsA4Ak+ZgeynjB2/Nt/2X4a+0TT/YtH86c7ppPLi3
SHIOWPUnIB59KsRx6PFcm5jGnpcEsxlUoGJbG45687Vz67R6VK2/r+v+G8xu
xyOkeJ/F2r6NJqUOjxCGeOOW1fy42CKXG4YFwTKQpJ6RHKkYycC1L4wuYtP1
O4SW0nW00UX8Uxt5IRJLmUEFGbcozGo2k5GTzWu+heEpGuWfS9DZro5uC0EJ
Mpzu+bj5ueee9SXGleGbuO2jubHR5ktk8uBZI4mES4xtUH7owAMCmF1e/wDX
Q4yW41VvFbNp99Fa/aNchWYPEzh82CtggOuV4PBzztPbB3v+El1GyfVP7Uk0
y1lgO+G3vC1rGIjIVV2ucyK2RjgKCCcEDIrans9Auo3juINLmSR1kdZFjYM6
gBWIPUgAAHsAKWytdC02a4msYdMtZblt07wCNGlOScsR948nr6mj+vwQr7X8
v1OX1jUYvFHw88QSyzaZKLe1mYf2VqrXKZERIDsFT/vkgg8VU8VQw3H9oS3S
qZLDQFudOZgCYp9z5dO4cFYhkc8gd67XUIdF1a2+zakmnXkG4N5Vz5ci5HQ4
bIzUK6b4bSO0jWz0hY7Jt9qoSICBs5yg/hOe4xR1/rsx30X9dU/0/E5DTY8a
5p2pNGo1m41q6trtwBvMCxyYRj12ALEwB4zg969GrPSLRo9Rk1BF05b6VAkl
yvliR1HQFupHA49qs/bbT/n7t/8Av6v+NPpYnqT0VB9ttP8An7t/+/q/40fb
bT/n7t/+/q/40gJ6Kg+22n/P3b/9/V/xo+22n/P3b/8Af1f8aAJ6Kg+22n/P
3b/9/V/xo+22n/P3b/8Af1f8aAJ6Kg+22n/P3b/9/V/xo+22n/P3b/8Af1f8
aAJ6Kg+22n/P3b/9/V/xo+22n/P3b/8Af1f8aAJ6Kg+22n/P3b/9/V/xo+22
n/P3b/8Af1f8aAJ6Kg+22n/P3b/9/V/xo+22n/P3b/8Af1f8aAJ6Kg+22n/P
3b/9/V/xo+22n/P3b/8Af1f8aAJ6Kg+22n/P3b/9/V/xo+22n/P3b/8Af1f8
aAJ6Kg+22n/P3b/9/V/xo+22n/P3b/8Af1f8aAJ6Kg+22n/P3b/9/V/xo+22
n/P3b/8Af1f8aAJ6Kg+22n/P3b/9/V/xo+22n/P3b/8Af1f8aAJ65nxveeKt
N0Q33hW1sry4gy01pcRO7yJ6x7WX5hz8vO7tyAG3/ttp/wA/dv8A9/V/xo+2
2n/P3b/9/V/xoGZ/hp9ek0SGXxIllHqUnzPDZqwSIHohJZtzDuRxzgZxkmki
5PhHT/sbQrcfYovLMykpnYOuCDj+Xv0rQ+22n/P3b/8Af1f8aoaHc28Xh/TY
5LiFJEtYlZWkUFSEGQRng0LQRg6NJ4l0rQL2a40+OSVZHMcTEBy2SWkY7gNg
wcADLdsDmtjwpqt9rGiRXN9amJyPllBG2YcjcADkHjnjHccHAt6j9l1HT5rP
+1BbCZSjSW80YcA9QCwIGR3xn0xU1vLp9rbx28E9rHDEoREWVcKB0HWtp1VN
O6V2zOFPltZ6Ir6Nk6bNtOD9rusf9/3rn9Y1ptF1K4i06XzJniae6twhk+z9
P3hx93Oc89OM8EVt6VPAmnyo9zDGxurhhukUHBmcg9ehBB/GnWVno2my3U1l
JbQzXcxnnkE4Jkc+pJPHJwBwMnA5rmnFyWh2UKsabbkr+XQm0UWp0qKWzuft
UU2ZDPnPmMep9umMdsc85rNnGNT1E+twp/8AIEVXtMtNF0aGaHTmtbeKaZp3
RJht3nAJAJ4HA4GAOwqnOVe8u5EYMjzAqwOQcRxjj8Qa1oqzSMK8uZtl/RgV
0o4GT9ouSB/22krAiW0Wy0zU5rC3vLi4cPNdSSETxyD5iF+UnC7W+XIAxj1r
e024ggszHLPEjiaYlXcA8yMR19iKckWjR3jXiLpy3TfenHlhz9W61LWodDJ/
t3Uo2t1dbN3voleFUDAQFmUKHOfnGGJ4C52Ed+Btdvg9zbNNZJJa+Y8t20TG
MooX7qb85yxB+bgqfXFaaWuhR28sCQ6YsMxzLGojCufcdD+NUdR0rT79IbYX
GkxWMQwIxChkQZ+YI+7CZHHC/wD1l/X9en4h/X9f1oV7jUruKSC8e3WS8W0i
iVFwq+bMwyMMw6bBwWGemR1rd0x7+SzDajHGk5Y4VF2/L2yAzAH6Mf6COaPR
7gyGYafKZECOXKNuUHIBz1Ge1SwS6dawLDby2cMScKkboqj6AUxFuioPttp/
z92//f1f8aPttp/z92//AH9X/GgCeioPttp/z92//f1f8aPttp/z92//AH9X
/GgCeioPttp/z92//f1f8aPttp/z92//AH9X/GgCeioPttp/z92//f1f8aPt
tp/z92//AH9X/GgCeioPttp/z92//f1f8aPttp/z92//AH9X/GgCeioPttp/
z92//f1f8aPttp/z92//AH9X/GgCeioPttp/z92//f1f8aPttp/z92//AH9X
/GgCeioPttp/z92//f1f8aPttp/z92//AH9X/GgCeioPttp/z92//f1f8aPt
tp/z92//AH9X/GgCeszXtUs9K0maa8mMaOpjULy7sRgBR3NXPttp/wA/dv8A
9/V/xqvdLpd5JBJPLaO8D74mZ0JRsYyM9DzTTV9QZxUEGsz+HItEl0oQFoxG
1w867EXO7JQc7/b15rv7YYtkHPAxz1/Gq6Np6dLm3/GVf8amF5aAYF3b/wDf
1f8AGrnU5+liYwUTnfGF94u05Lefw1ZWN9GzCOWCaNjIrE4DAhwCvIB/u9em
dulMt9/wj0Y1J7d73fCZjbKyx7vNU4UMScDpk9cZwM4Gh9ttP+fu3/7+r/jV
a/ubeWzMcdxE7l48Kjgnh1Pb6VmtynsZ/wBnuP8An2uP+/Tf4US20lxGI7iw
adB0WW2LD9RXQNeKGI3LwfWsq88W6dY6kunStcvdMiybLezmmCqxIBZkUhRl
T1I6Vp7RvoT7NdytHDcQxiOG0kijHRY7cqB+Qo8u7P8Ayxuf+/bf4Vop4hsn
u4rTzXWeUSGNJInQsIyAx5A4ywwe+cjIq59tX+8v50e0fYPZruYgF4vSG5/G
Jj/SoGsA83nPpStNnPmG0y354rovtq/3l/OqOqeJLHRoYZLySTE0nlRrDBJM
7vgnAVAT0Unp2pOb6oap+ZntFcuctb3BP/XJv8KT7Pcf8+0//fpv8K1H1+0i
0l9TlkeK1jiMzmWJ0ZUAySUI3A4HTGaVNds3cIZwhZxGnmqY/MYruwhbG/jJ
+XPQ+hp+0ltYXs1vcyvs9x/z7T/9+m/wo+z3H/PtP/36b/Ct/wC2r/eX86Pt
q/3l/On7SXYPZruYQjuwMCG6/wC/bf4Uuy8/55XX/ftv8KvL4k097SC6W4zF
PL5MZ2NlnyVxtxnqD24watQanHc28cyFgjqGAkRkYD3VgCD7EZpe0b6B7Ndz
H2Xn/PK6/wC/bf4UbLz/AJ5XX/ftv8K3Ptq/3l/Oj7av95fzo9o+wezXcw9l
5/zyuv8Av23+FGy8/wCeV1/37b/Ctz7av95fzrL/AOEt046vJpaNcvdRuqSe
XZzNGjFQwDSBdg4IPJ70e0fYPZruV9l5/wA8rr/v23+FGy8/55XX/ftv8K3P
tq/3l/Oj7av95fzo9o+wezXcw9l5/wA8rr/v23+FGy8/55XX/ftv8K2J9Tjt
4JJnLFY1LERoXYgeirkk+wGaItVt52kSKeN3jIEihhlCQCAw6g4IOD60e0fY
PZruY+y8/wCeV1/37b/CjZef88rr/v23+Fbn21f7y/nR9tX+8v50e0fYPZru
Yey8/wCeV1/37b/CjZef88rr/v23+Fbn21f7y/nWLb+NtKudU/s2P7f9r4JR
9NuEABJAYsyBQpIOCTg460e0e1g9mt7jdl5/zyuv+/bf4UbLz/nldf8Aftv8
K3Ptq/3l/Oq97rVrp9v591MI4t6R7sE/M7BVHHqSBR7R9g9mu5l7Lz/nldf9
+2/wo2Xn/PK6/wC/bf4VufbV/vL+dH21f7y/nR7R9g9mu5h7Lz/nldf9+2/w
o2Xn/PK6/wC/bf4VqXutWun2/n3Uwji3pHuwT8zsFUcepIFEmtWsV/BZPMBc
To8kaYPzKm3cc9BjcvX1o9o+wezXcy9l5/zyuv8Av23+FGy8/wCeV1/37b/C
tS51q1tJLaOeYI9zL5MQwTufaWxx04Unn0qx9tX+8v50e0fYPZruYey8/wCe
V1/37b/CjZef88rr/v23+Fbn21f7y/nR9tX+8v50e0fYPZruYey8/wCeV1/3
7b/CjZef88rr/v23+Fbn21f7y/nR9tX+8v50e0fYPZruYey8/wCeV1/37b/C
jZef88rr/v23+Fbn21f7y/nR9tX+8v50e0fYPZruYey8/wCeV1/37b/CjZef
88rr/v23+Fbn21f7y/nR9tX+8v50e0fYPZruYey8/wCeV1/37b/CjZef88rr
/v23+Fbn21f7y/nR9tX+8v50e0fYPZruYey8/wCeV1/37b/CjZef88rr/v23
+Fbn21f7y/nR9tX+8v50e0fYPZruYey8/wCeV1/37b/CjZef88rr/v23+Fbn
21f7y/nR9tX+8v50e0fYPZruYey8/wCeV1/37b/CjZef88rr/v23+Fbn21f7
y/nR9tX+8v50e0fYPZruYey8/wCeV1/37b/CjZef88rr/v23+Fbn21f7y/nR
9tX+8v50e0fYPZruYey8/wCeV1/37b/CjZef88rr/v23+Fbn21f7y/nR9tX+
8v50e0fYPZruYey8/wCeV1/37b/CjZef88rr/v23+Fbn21f7y/nR9tX+8v50
e0fYPZruYey8/wCeV1/37b/CjZef88rr/v23+Fbn21f7y/nR9tX+8v50e0fY
PZruYey8/wCeV1/37b/CjZef88rr/v23+Fbn21f7y/nR9tX+8v50e0fYPZru
Yey8/wCeV1/37b/CjZef88rr/v23+Fbn21f7y/nR9tX+8v50e0fYPZruYey8
/wCeV1/37b/CjZef88rr/v23+Fbn21f7y/nR9tX+8v50e0fYPZruYey8/wCe
V1/37b/CjZef88rr/v23+Fbn21f7y/nR9tX+8v50e0fYPZruYey8/wCeV1/3
7b/CjZef88rr/v23+Fbn21f7y/nR9tX+8v50e0fYPZruYey8/wCeV1/37b/C
jZef88rr/v23+Fbn21f7y/nR9tX+8v50e0fYPZruYey8/wCeV1/37b/CjZef
88rr/v23+Fbn21f7y/nR9tX+8v50e0fYPZruYey8/wCeV1/37b/CjZef88rr
/v23+Fbn21f7y/nR9tX+8v50e0fYPZruYey8/wCeV1/37b/CjZef88rr/v23
+Fbn21f7y/nR9tX+8v50e0fYPZruYey8/wCeV1/37b/CjZef88rr/v23+Fbn
21f7y/nR9tX+8v50e0fYPZruYey8/wCeV1/37b/CjZef88rr/v23+Fbn21f7
y/nR9tX+8v50e0fYPZruYey8/wCeV1/37b/CjZef88rr/v23+Fbn21f7y/nR
9tX+8v50e0fYPZruYey8/wCeV1/37b/CjZef88rr/v23+Fbn21f7y/nR9tX+
8v50e0fYPZruYey8/wCeV1/37b/CjZef88rr/v23+Fbn21f7y/nR9tX+8v50
e0fYPZruYey8/wCeV1/37b/CjZef88rr/v23+Fbn21f7y/nR9tX+8v50e0fY
PZruYey8/wCeV1/37b/CjZef88rr/v23+Fbn21f7y/nR9tX+8v50e0fYPZru
Yey8/wCeV1/37b/CjZef88rr/v23+Fbn21f7y/nR9tX+8v50e0fYPZruYey8
/wCeV1/37b/CjZef88rr/v23+Fbn21f7y/nR9tX+8v50e0fYPZruYey8/wCe
V1/37b/CjZef88rr/v23+Fbn21f7y/nR9tX+8v50e0fYPZruYey8/wCeV1/3
7b/CjZef88rr/v23+Fbn21f7y/nR9tX+8v50e0fYPZruYey8/wCeV1/37b/C
mmG5Y5a3uD9Ym/wre+2r/eX86Ptq/wB5fzo9pLsHs13MLy7v/njc/wDftv8A
Cjy7v/njc/8Aftv8K3ftq/3l/Oj7av8AeX86PaS7B7NdzC8u7/543P8A37b/
AAo8u7/543P/AH7b/Ct37av95fzo+2r/AHl/Oj2kuwezXcwvLu/+eNz/AN+2
/wAKPLu/+eNz/wB+2/wrd+2r/eX86Ptq/wB5fzo9pLsHs13MLy7v/njc/wDf
tv8ACjy7v/njc/8Aftv8K3ftq/3l/Oj7av8AeX86PaS7B7NdzC8u7/543P8A
37b/AAo8u7/543P/AH7b/Ct37av95fzo+2r/AHl/Oj2kuwezXcwvLu/+eNz/
AN+2/wAKPLu/+eNz/wB+2/wrd+2r/eX86Ptq/wB5fzo9pLsHs13MLy7v/njc
/wDftv8ACjy7v/njc/8Aftv8K3ftq/3l/Oj7av8AeX86PaS7B7NdzC8u7/54
3P8A37b/AAo8u7/543P/AH7b/Ct37av95fzo+2r/AHl/Oj2kuwezXcwvLu/+
eNz/AN+2/wAKPLu/+eNz/wB+2/wrd+2r/eX86Ptq/wB5fzo9pLsHs13MLy7v
/njc/wDftv8ACjy7v/njc/8Aftv8K3ftq/3l/Oj7av8AeX86PaS7B7NdzC8u
7/543P8A37b/AAo8u7/543P/AH7b/Ct37av95fzo+2r/AHl/Oj2kuwezXcwv
Lu/+eNz/AN+2/wAKPLu/+eNz/wB+2/wrd+2r/eX86Ptq/wB5fzo9pLsHs13M
Ly7v/njc/wDftv8ACjy7v/njc/8Aftv8K3ftq/3l/Oj7av8AeX86PaS7B7Nd
zC8u7/543P8A37b/AAo8u7/543P/AH7b/Ct37av95fzo+2r/AHl/Oj2kuwez
XcwvLu/+eNz/AN+2/wAKDFdHrBc/9+2/wrd+2r/eX86VbxSwG5eT60e0l2D2
a7mdIn7xvqa5iXSr248dT3MV5e2duthApaGOMpMRJKShLo3QEfdIPzfSuuaK
5LE/Y5eT/eT/AOKpPJuf+fOX/vpP/iqXMtGX0aPN5bXX2uHntobo3scWrrby
SqSFJlTyRluACB8ueMD0rY8ExXCWdz597e3GSjBLuzuoGjOOQDcO5bt907Rj
jrXYeTc/8+cv/fSf/FUeTc/8+cv/AH0n/wAVQmkOWv4kGyuX8aQzGPRpYmv4
lh1APJNY2xnkiXypBuCbH4yQPunrXX+Tc/8APnL/AN9J/wDFUeTc/wDPnL/3
0n/xVDa7iR5p4oS5vbG7jx4guUl0krY+Tbyp5k2HD+ciqoDEbOHUDk7RmjUd
Nup9UhnvYtWa1tdVhKCBp/kiNoASqxnJHmcEgcZbplq9L8m5/wCfOX/vpP8A
4qjybn/nzl/76T/4qhNJ3/re49fwf4qxBso2VP5Nz/z5y/8AfSf/ABVHk3P/
AD5y/wDfSf8AxVHMhWOLstMuo/FklqbWRdOtXlv4JSPkaSYY2g+oJmJHYOvr
XPCLxE39iG8vNUtI10+Bg62V1cMZwx8wSCJ1wcbP9aGU8++fVfJuf+fOX/vp
P/iqPJuf+fOX/vpP/iqSaVtdv6/r0G+vmeeTnxLbyStAl7ILGSS1jDBmFx5p
YpJ/tBMwjd2/ee9dvbW5gtYoTI8hjQKXc5ZsDGSe5q55Nz/z5y/99J/8VR5N
z/z5y/8AfSf/ABVNNJWE1d3INlcvp2l3y+KNdvvtV9DAbmNktljjEVwBBGM7
mQt1BHysBkfWuv8AJuf+fOX/AL6T/wCKo8m5/wCfOX/vpP8A4qi63uCPMNHX
Xm/tC8A1RRHHBdpayR3KjzAzmSAGZ2Lkr8uVAUnaQvFX7yK9P2C51P8AtoWF
0J55orEz+bDI23yUIi+dVCbgQPl3cnkivQPJuf8Anzl/76T/AOKo8m5/585f
++k/+KpXX9f16W9B9bnnM1lr8lpey3EmqfaodAUwrFK6g3JEwPCHa0gGzgZ5
wfQ1XuNO1Gy/4SZrBNVS+uJLeUP/AKRIrQlYhKU+YKXGHG1WDgDC44r07ybn
/nzl/wC+k/8AiqPJuf8Anzl/76T/AOKouv6+/wDryDX+vl/keZpHewQaY32v
WNR2zuq2wtNQtN2WTlpGLNhef9aSrAkZAFei7Kn8m5/585f++k/+Ko8m5/58
5f8AvpP/AIqnzImxBsrDitZx40v5xE4ibToESQqdpYSSkjPTIyOPcV0fk3P/
AD5y/wDfSf8AxVHk3P8Az5y/99J/8VQ2u4+ljzSwj102Mhsf7YGrjTpvtovf
M8o3WBs8rzPk+9ux5fyY69qV7S5uLCddPi1uWy8yxJTUVnaTzRcKXKiX58BQ
CcfL6d69K8m5/wCfOX/vpP8A4qjybn/nzl/76T/4qhNXuN/1/X9dTkPDgnXX
NUikF/Om4v8Aa7gXMaZLtiNY5fk4H8UfBGMgcZ6jZU/k3P8Az5y/99J/8VR5
Nz/z5y/99J/8VQpJJIVtbnNeMLK4vPDrQWwm81rm2IaFAzqBOhLAEEcAE8gj
jmsXV9G1201VJ7HUdQ1G5GmXqwPcRQhYpT5ewZSNBkkfxZ+79a7/AMm5/wCf
OX/vpP8A4qjybn/nzl/76T/4qldd/wCrWGnY8z0mzvnbSma41G7WPUVldbmx
uoTAPs8oJJndyRkqODtB6deZvA8l3dnSbhZtYm32Ba/kvTKYmc7PL2bxtJ+9
ynb72Sa9G8i5I/485f8AvpP/AIqoLHTDp1jBZWlhLHbwII408xTtUdBktk01
JXv/AFsK2lv63bDZRsqfybn/AJ85f++k/wDiqPJuf+fOX/vpP/iqOZBYg2Ub
Kn8m5/585f8AvpP/AIqjybn/AJ85f++k/wDiqOZBYg2UbKn8m5/585f++k/+
Ko8m5/585f8AvpP/AIqjmQWINlGyp/Juf+fOX/vpP/iqPJuf+fOX/vpP/iqO
ZBYg2UbKn8m5/wCfOX/vpP8A4qjybn/nzl/76T/4qjmQWINlGyp/Juf+fOX/
AL6T/wCKo8m5/wCfOX/vpP8A4qjmQWINlGyp/Juf+fOX/vpP/iqPJuf+fOX/
AL6T/wCKo5kFiDZRsqfybn/nzl/76T/4qjybn/nzl/76T/4qjmQWINlGyp/J
uf8Anzl/76T/AOKo8m5/585f++k/+Ko5kFiDZRsqfybn/nzl/wC+k/8AiqPJ
uf8Anzl/76T/AOKo5kFiDZRsqfybn/nzl/76T/4qjybn/nzl/wC+k/8AiqOZ
BYg2UbKn8m5/585f++k/+Ko8m5/585f++k/+Ko5kFiDZRsqfybn/AJ85f++k
/wDiqPJuf+fOX/vpP/iqOZBYg2UbKn8m5/585f8AvpP/AIqjybn/AJ85f++k
/wDiqOZBYg2UbKn8m5/585f++k/+Ko8m5/585f8AvpP/AIqjmQWINlGyp/Ju
f+fOX/vpP/iqPJuf+fOX/vpP/iqOZBYg2UbKn8m5/wCfOX/vpP8A4qjybn/n
zl/76T/4qjmQWINlGyp/Juf+fOX/AL6T/wCKo8m5/wCfOX/vpP8A4qjmQWIN
lGyp/Juf+fOX/vpP/iqPJuf+fOX/AL6T/wCKo5kFiDZRsqfybn/nzl/76T/4
qjybn/nzl/76T/4qjmQWINlGyp/Juf8Anzl/76T/AOKo8m5/585f++k/+Ko5
kFiDZRsqfybn/nzl/wC+k/8AiqPJuf8Anzl/76T/AOKo5kFiDZRsqfybn/nz
l/76T/4qjybn/nzl/wC+k/8AiqOZBYg2UbKn8m5/585f++k/+Ko8m5/585f+
+k/+Ko5kFiDZRsqfybn/AJ85f++k/wDiqPJuf+fOX/vpP/iqOZBYg2UbKn8m
5/585f8AvpP/AIqjybn/AJ85f++k/wDiqOZBYg2UbKn8m5/585f++k/+Ko8m
5/585f8AvpP/AIqjmQWINlGyp/Juf+fOX/vpP/iqPJuf+fOX/vpP/iqOZBYg
2UbKn8m5/wCfOX/vpP8A4qjybn/nzl/76T/4qjmQWINlGyp/Juf+fOX/AL6T
/wCKo8m5/wCfOX/vpP8A4qjmQWINlGyp/Juf+fOX/vpP/iqPJuf+fOX/AL6T
/wCKo5kFiDZRsqfybn/nzl/76T/4qjybn/nzl/76T/4qjmQWINlGyp/Juf8A
nzl/76T/AOKo8m5/585f++k/+Ko5kFiDZRsqfybn/nzl/wC+k/8AiqPJuf8A
nzl/76T/AOKo5kFiDZRsqfybn/nzl/76T/4qjybn/nzl/wC+k/8AiqOZBYg2
UbKn8m5/585f++k/+Ko8m5/585f++k/+Ko5kFiDZRsqfybn/AJ85f++k/wDi
qPJuf+fOX/vpP/iqOZBYg2UbKn8m5/585f8AvpP/AIqjybn/AJ85f++k/wDi
qOZBYg2UbKn8m5/585f++k/+Ko8m5/585f8AvpP/AIqjmQWINlGyp/Juf+fO
X/vpP/iqPJuf+fOX/vpP/iqOZBYg2UbKn8m5/wCfOX/vpP8A4qjybn/nzl/7
6T/4qjmQWINlGyp/Juf+fOX/AL6T/wCKo8m5/wCfOX/vpP8A4qjmQWINlGyp
/Juf+fOX/vpP/iqPJuf+fOX/AL6T/wCKo5kFiDZRsqfybn/nzl/76T/4qjyb
n/nzl/76T/4qjmQWINlGyp/Juf8Anzl/76T/AOKo8m5/585f++k/+Ko5kFiD
ZRsqfybn/nzl/wC+k/8AiqPJuf8Anzl/76T/AOKo5kFiDZRsqfybn/nzl/76
T/4qjybn/nzl/wC+k/8AiqOZBYg2UsafvF+oqbybn/nzl/76T/4qlWK5DA/Y
5eD/AHk/+Ko5kFjRMuCRmobq9S0tZLiTO2NSxA6n2HuelU5btVlcYbhiKw3v
HNxJFey3GRIZok+TynRXBXou4EZXIJ59TXHi6yw9J1Gv68zWlB1JcqOmtb9b
uJnCtGyuUdHxuVgehwSPf6EVP5vvXCy6ldtdNFp8sqTzncQNmwYAXccqT0x0
rpvti45DflWWAxSxdPninp16P0LxFF0ZcrNTzfeo7i9jtoTLKxCAgcKWOSQA
MDk8kVlXWqxWlpNcyLIUhjaRgoGcAZOOa5i41LUTdx390JmskumZLMmAlUEf
yvkHqHPTd2rTFV44eN+pyTrwg1zf15new3cdxBHNE+6ORQyt6g0/zfeuI0nU
ZXvYo7CV/sAUTPGyoAiyDcqgAZ7+uBiuk+2r6NVYWr9Ypqdmv66eRvUioOyd
yzqMzfZAiOyGSWKMspwcM6qcHtwTzR/Zemd9PtWPq0Skn8SKzru6DpCoDZNz
B1/66rWZ4j1SS2th5s7QWSo8tzMOCFXHyj65/SuiXLBOU3ZIxlJr4VdnRSaf
pES7pLGxRfVoUH9KcNM0pgCNPsyD0IhX/CvFU8VWd2YWl2w25clYPkVYhxtZ
vmO9u5DLgdMHnPpPhjVWvvDVtcoww28DaAF4dhwB0HHA7Cq+r1owVSasn0e/
zMo4qnOThF3a7bfI6H+y9L/6B1n/AN+F/wAKP7L0v/oHWf8A34X/AArzrTvE
WsXFvot1qer3NlbXFpA6XEVtE0U87E70mJQ7AfkC42A7iAScALo/ifULnxIt
uuum9lbUbuC403ZD/o0CM4ST5VDrjagyxIO/1xR7N3sauVrv+v60PRP7L0v/
AKB1n/34X/Cj+y9L/wCgdZ/9+F/wrzzxV4mvrDX7q3h182ckVhFPZ2ISFvtk
xeQbMMpds7VXCEEZrem8Z21p4htdEuVeO6uVyjebCRnaW+6H8wD5SNxTGR1p
KAOdv6/rudL/AGXpf/QOs/8Avwv+FH9l6X/0DrP/AL8L/hXJR+PrM4e4tr61
tntZbyO4miXZJDHty4wxYZDAgEA+w4q34d8YWniaGeSyYqYGAdTLDJjIyDmJ
3X14znjkdKaptic7bnRf2Xpf/QOs/wDvwv8AhR/Zel/9A6z/AO/C/wCFV/tM
n979KPtMn979KfsmL2pY/svS/wDoHWf/AH4X/Cj+y9L/AOgdZ/8Afhf8Kr/a
ZP736UfaZP736UeyYe1LH9l6X/0DrP8A78L/AIUf2Xpf/QOs/wDvwv8AhVf7
TJ/e/Sj7TJ/e/Sj2TD2pY/svS/8AoHWf/fhf8KP7L0v/AKB1n/34X/Cq/wBp
k/vfpR9pk/vfpR7Jh7Usf2Xpf/QOs/8Avwv+FH9l6X/0DrP/AL8L/hVf7TJ/
e/Sj7TJ/e/Sj2TD2pY/svS/+gdZ/9+F/wo/svS/+gdZ/9+F/wqv9pk/vfpR9
pk/vfpR7Jh7Usf2Xpf8A0DrP/vwv+FH9l6X/ANA6z/78L/hVf7TJ/e/Sj7TJ
/e/Sj2TD2pY/svS/+gdZ/wDfhf8ACj+y9L/6B1n/AN+F/wAKr/aZP736UfaZ
P736UeyYe1LH9l6X/wBA6z/78L/hR/Zel/8AQOs/+/C/4VX+0yf3v0o+0yf3
v0o9kw9qWP7L0v8A6B1n/wB+F/wo/svS/wDoHWf/AH4X/Cq/2mT+9+lH2mT+
9+lHsmHtSx/Zel/9A6z/AO/C/wCFH9l6X/0DrP8A78L/AIVX+0yf3v0o+0yf
3v0o9kw9qWP7L0v/AKB1n/34X/Cj+y9L/wCgdZ/9+F/wqv8AaZP736UfaZP7
36UeyYe1LH9l6X/0DrP/AL8L/hR/Zel/9A6z/wC/C/4VX+0yf3v0o+0yf3v0
o9kw9qWP7L0v/oHWf/fhf8KDpWnEYSzgiY8B4kCMvuCORVf7TJ/e/SnxXDmZ
Bu6sO1L2bH7QisTe3Wn208+oyrJJErkQpGByM91PNWPJn/6Cd5/3zF/8RWZY
3MiabZqAMC3i/wDQBU/2uX0WlyF3Lnkz/wDQTvP++Yv/AIimia4tbm3Rrhri
KZzGfMChlO0sCCoAI+UjGO/Wqv2uX0WoZ7lvMs2cDAuO3/XOSjkC5veb70eb
71mfbV9Go+2r6NRyDuafm+9Hm+9Zn21fRqPtq+jUcgXNPzfejzfesz7avo1H
21fRqOQLmn5vvR5vvWZ9tX0aj7avo1HIFzT833o833rM+2r6NR9tX0ajkC5p
+b70eb71mfbV9Go+2r6NRyBc0/N96PN96zPtq+jUfbV9Go5Auafm+9Hm+9Zn
21fRqPtq+jUcgXNPzfejzfesz7avo1H21fRqOQLmn5vvR5vvWZ9tX0aj7avo
1HIFzT833o833rM+2r6NR9tX0ajkC5p+b70eb71mfbV9Go+2r6NRyBc0/N96
PN96zPtq+jUfbV9Go5Auafm+9Hm+9Zn21fRqPtq+jUcgXNPzfejzfesz7avo
1H21fRqOQLmn5vvR5vvWZ9tX0aj7avo1HIFzT833o833rM+2r6NR9tX0ajkC
5p+b70eb71mfbV9Go+2r6NRyBc0/N96PN96zPtq+jUfbV9Go5Auafm+9Hm+9
Zn21fRqPtq+jUcgXNPzfejzfesz7avo1H21fRqOQLmn5vvXO6x450vQ9etdH
vFuPtN1EZIjGgYH72Fxndk7CBx1Iq/8AbV9GritZlht7y58QaxC8kVvJ9ljS
ELuVMFgBkjqOSc5+baBjO66cYK7qLT9SW30O20rxBa6t5ixB4pkwWil27tp6
MCpII6jIJ5BHWtLzfevNdS1K2HiWa0tEuLa9tIvtAmCrsIwuSvOT1AIIAOMZ
BCkdlb30jW0TXEeycoDIqHIDY5APpmlKC3QKRseb70eb71w3i3WPFVgsE3hy
zs72NmEcsM0beYrE4DAhwCvIz6demdu7p93diwhGpNC95tzKbZCse70UMScD
pk9euB0EcpVzaluo4YnllkWONAWZ3OAo9Saz/wDhJ9E/6DOn/wDgSn+NYPjC
4E3he6jAbLPEOf8ArqtULNrN9MVnS1vI7eJfOjW3EU0SjALKw+8B/wDrqZKw
1qdxa6laX0ZktLqG4RTtLQyBwD6ZFT+b71xehBLDXtWhXLII4CjD+JT5hB/I
iuh+2r6NVKN1cTZp+b70eb71x9tqfiFtZa3uIbMWafMZ1jbLr2AG7hv5e/Gd
37avo1HKFy7dXyWds88gYqnUKOeuKgm1Z7eIyz2F1HGCAWJjOMnHZ81x/ivV
74ebb2XmNthRxBHEGeVmcg+pwAueK5y48VeMruBoZ9P1Bo2xkfYsdDnsvtUv
RjR7B5vvR5vvXM6Lqk09vOtxN55imKrKoALKVVhnHGRuxxjp0pddvtWTSpJN
CS2e+T5liulJWQd1BDDB9CeOxxnIpRuriudL5vvUTXhExiSJ5GChjtK8A5x1
I9DXJ+FdV1+90v7X4ht7a2mlwYreCNlZF/29zHk+nbvycDSur54or6aC3M8i
xQgReeIN2XYff7evvjHehxBM1ZtUS2eMXEUsKucB2wVH1IJwMkDPuKteb71j
asITp9xbSW78ROsM0rhgWI6Ali31JGAAewqvp2o3k1rI9/FHG5c+WsWfuYGM
5PXOeeMjBwpJAi61XUfmdD5vvR5vvXj3g0x6To9prcWljSLSDSG+13GyM/bX
O0q+yNsttwxy21jvx6417LxlrlxGbKeK0tdSbUBaLLPDhEUw+bkxpM+W4IAE
ncHjpWnJrb+t7Ceh6V5vvR5vvXlreO9euIbO2sbO2nv55rxS8MauhWCTYNqv
NHknIJO44x909u3F9cTacGCC2vHiyBIvmLFIR3AYbgD6EZx1FJRurg3Z2Nvz
fejzfevNvCut+Pr3XLuHxHYaTZ6faMU8y3ikLXLYyDGTIRtwQSxH+zjO7b1O
q3e+yKKGAZ1BbONvPX35wMe9ChcTlYvt4gslKEO7RndmQIcJj1789sA1dgvY
rqBJoX3RuMqcYz+dchiJ7W7kmuJYniZgsanCxgH5eP4s9fxwOaTw7dtHd3S+
U/lsqksH+VT2UL75JzntVOmraEqbvqdp5vvR5vvXnWp6RoU3xA0qeXRbB5Jb
a6lldrWMs7hodrE45IycE8jNTW3i3Upb6KdxZmwmv5rFbVY2E6GPeN5fdhs+
WTt2jAPU45jl0u/61saeZ3/m+9Hm+9eUX/inU9R8JXTXhsnt9U0W6uYY7eNl
e3AQfKxLEP8AfALALgjpzx0Ona9frri2N55cFo0Q+yJ9mZmnARSW80PtGCT8
hUHjIJFPk1sJu39en+Z23m+9Hm+9cR401jxNp+jG98L21ndzw5aa1uYnZpE9
Y9rj5h/d5z25ADXvDl/rcmjRS+I0tI9Rk+Z4bNCEiHZSSzbmHcjjnAzjJOUL
mvqt3exS2f2De8jS4aIp+7ZO5d8fJjqCOp4wey6LdXs0c32ve0YlIgllTy5J
Ez1ZMcegPGRzgd2/bV9Gp0V2rSoMNywFVbS1hXIJoiZ5D/tH+dZF/ocl7eic
Xbwp5YjZUX5iMk8HPHX07VoNqUrMT5Npyc/69/8A43Sf2hL/AM8rT/v+/wD8
bpVcOq0OSpG6HCo4S5ouzM2Dw4LbUobmK4fyoixETjcRkEYDZ6cjrnp1rX8o
1F/aEv8AzytP+/7/APxuj+0Jf+eVp/3/AH/+N0UcNGinGnGybuE6rqO8nce9
sskbRyIGRgQysMgg9jWBL4Pgm1AOzQiwEvm/Y1h2jds29QcYyM9K3P7Ql/55
Wn/f9/8A43R/aEv/ADytP+/7/wDxunUw8atueN7amM6dOduboVbHQ7fTpmkt
/MAKBAhbIVR0A71f8o1F/aEv/PK0/wC/7/8Axuj+0Jf+eVp/3/f/AON06dH2
ceWEbI1lLmd2xLiMqID6XEP/AKMWud8ZaZca3YLZxsyx43ghSwZwwIVgOdpG
focHsa6CS7aYIJFgRVkWT93IzE7WDAcoO4Heo/OFW6DnZ7NNNeqM5SS03TTX
3nKWmm+IhY29nG0lqsYxve5+VB/sheT9D6cEV032GQaOLBNRvEk27TdhlaXO
ck5cMOee3APGMDEvnLR5y12VJSqK0jjo0I0tY3+epmTeGraW2t7JL69h02KO
OI2MbJ5cip03EqXGcDO1hnH1rR06yh0yCWKFpGWSeWc7yCd0jlyOB0yTinec
tHnLUcmtzbW1hqWUKavNqYaTzpYEgZSRtCqzMCOM5y57+lZ7eG7ZtZOo/bLz
BuPtRtgU8oy+X5e4/LuPy9t2PatLzlo85aXs0O7OP03w3Nc6n5V5b6mmkQWM
1mkV/PCzFZCo2p5RJ2hU+853cjnius0yzm06ExS6pe344Cm6EWUA7Aoi5/HJ
qTzlo85aFTsDbZa8yjzKq+ctHnLT5BalrzKPMqr5y0ectHIGpa8yjzKq+ctH
nLRyBqWvMo8yqvnLR5y0cgalrzKPMqr5y0ectHIGpa8yjzKq+ctHnLRyBqWv
Mo8yqvnLR5y0cgalrzKPMqr5y0ectHIGpa8yjzKq+ctHnLRyBqWvMo8yqvnL
R5y0cgalrzKPMqr5y0ectHIGpa8yjzKq+ctHnLRyBqWvMo8yqvnLR5y0cgal
rzKkgf8A0iP/AHh/OqPnLTo7kJIr9dpBpOGgIsWMWdNszj/l3i/9AFT+T7VT
gvZLa3igRbd0iQIrPI6kgDAyAh5wPWpP7Tm/55Wn/f8Af/43XPyy7HTdFjyf
aq13Fg2gx1uP/aclL/ac3/PK0/7/AL//ABuopr2aZ4G2Wg8qTzMec/PysuP9
X/tfpRyy7BdFjyjR5RqL+0Jf+eVp/wB/3/8AjdH9oS/88rT/AL/v/wDG6OWX
YV0S+UaPKNRf2hL/AM8rT/v+/wD8bo/tCX/nlaf9/wB//jdHLLsF0S+UaPKN
Rf2hL/zytP8Av+//AMbo/tCX/nlaf9/3/wDjdHLLsF0S+UaPKNRf2hL/AM8r
T/v+/wD8bo/tCX/nlaf9/wB//jdHLLsF0S+UaPKNRf2hL/zytP8Av+//AMbo
/tCX/nlaf9/3/wDjdHLLsF0S+UaPKNRf2hL/AM8rT/v+/wD8bo/tCX/nlaf9
/wB//jdHLLsF0S+UaPKNRf2hL/zytP8Av+//AMbo/tCX/nlaf9/3/wDjdHLL
sF0S+UaPKNRf2hL/AM8rT/v+/wD8bo/tCX/nlaf9/wB//jdHLLsF0S+UaPKN
Rf2hL/zytP8Av+//AMbo/tCX/nlaf9/3/wDjdHLLsF0S+UaPKNRf2hL/AM8r
T/v+/wD8bo/tCX/nlaf9/wB//jdHLLsF0S+UaPKNRf2hL/zytP8Av+//AMbo
/tCX/nlaf9/3/wDjdHLLsF0S+UaPKNRf2hL/AM8rT/v+/wD8bo/tCX/nlaf9
/wB//jdHLLsF0S+UaPKNRf2hL/zytP8Av+//AMbo/tCX/nlaf9/3/wDjdHLL
sF0S+UaPKNRf2hL/AM8rT/v+/wD8bo/tCX/nlaf9/wB//jdHLLsF0S+UaPKN
Rf2hL/zytP8Av+//AMbo/tCX/nlaf9/3/wDjdHLLsF0S+UaPKNRf2hL/AM8r
T/v+/wD8bo/tCX/nlaf9/wB//jdHLLsF0S+UaPKNRf2hL/zytP8Av+//AMbo
/tCX/nlaf9/3/wDjdHLLsF0S+UaPKNRf2hL/AM8rT/v+/wD8bo/tCX/nlaf9
/wB//jdHLLsF0S+UaPKNRf2hL/zytP8Av+//AMbo/tCX/nlaf9/3/wDjdHLL
sF0S+UaPKNRf2hL/AM8rT/v+/wD8bo/tCX/nlaf9/wB//jdHLLsF0S+UaPKN
Rf2hL/zytP8Av+//AMbo/tCX/nlaf9/3/wDjdHLLsF0S+UaqiG+hkuPIEWyV
w4JkKkfKo7A+lS/2hL/zytP+/wC//wAbo/tCX/nlaf8Af9//AI3Q4yfQLo5a
TwhqEniW81hrmI/aLYW6wlmIjGF5Bx6qTjHeuu8o1F/aEv8AzytP+/7/APxu
j+0Jf+eVp/3/AH/+N03zvdCSitiXyjR5RqL+0Jf+eVp/3/f/AON0f2hL/wA8
rT/v+/8A8bpcsuw7oq6zpcmpaVNaxsquxVlLdMqwbB9M4xms29sPEt5cm4/4
lkUhtzbnY7YKEYPGytz+0Jf+eVp/3/f/AON0f2hL/wA8rT/v+/8A8bqXTb3Q
1JIzNE0rUraa5uNTngkllSONRCOFVAQOcDnn9OtbHlGov7Ql/wCeVp/3/f8A
+N0f2hL/AM8rT/v+/wD8bqlGSVrBdEvlGjyjUX9oS/8APK0/7/v/APG6P7Ql
/wCeVp/3/f8A+N0csuwrogv9IhvopFkVizBDxIyglG3JkA84bnms6bwrZ3F3
cTNYRotxE0Dosw2qjPvbbtjVs4yoO7gGtj+0Jf8Anlaf9/3/APjdH9oS/wDP
K0/7/v8A/G6XJLsGgsdosRcruJdtzMzFixwBySc9AB+FSeUai/tCX/nlaf8A
f9//AI3R/aEv/PK0/wC/7/8Axunyy7BdEvlGqzQXKXUrpb288UsaKVlkK4Kl
j02nP3h+VSf2hL/zytP+/wC//wAbo/tCX/nlaf8Af9//AI3ScJPoNNIpXtjd
3kk8ptLZZJYTF/rzgHnDH93kkcdTjgelaXkn0qL+0Jf+eVp/3/f/AON0f2hL
/wA8rT/v+/8A8bpRpuN7LcHK+7EXTrdLP7GtvEtts8vyQgCbcY27emMdqy73
wvavpDafp1hpFvC7hnin08Swtj1jVkGenOe1av8AaEv/ADytP+/7/wDxuj+0
Jf8Anlaf9/3/APjdU4yfQLruZFj4Q06HQ4dMv7W21FEkaZvPt0KmRiWZghyF
GWOB2HGTW1HapDEkUSKkaKFVFGAoHQAdhTP7Ql/55Wn/AH/f/wCN0f2hL/zy
tP8Av+//AMbotLsK6JfKNRzWaXERilXchxkZI6c9qT+0Jf8Anlaf9/3/APjd
H9oS/wDPK0/7/v8A/G6LS7BdGRLoeoyCOP7VAyDIZ3jyyjHGPXPfJ496u6Xp
A0+3G8h7lwPOkGfmPPr6Zq1/aEv/ADytP+/7/wDxuj+0Jf8Anlaf9/3/APjd
O0uwkooVrOJp0naJDMilUkKjcoOMgHsDgZ+gqBNFsItRk1GOwtUvpF2vcrCo
kYccFsZI4H5VN/aEv/PK0/7/AL//ABuj+0Jf+eVp/wB/3/8AjdLll2HdFaLQ
NLgN0YtMs4zd5FyUgUednOd/HzdT19TTodE063v5L+DT7WK8kXa9wkKrIw44
LAZI4H5Cp/7Ql/55Wn/f9/8A43R/aEv/ADytP+/7/wDxujll2HddyXyjR5Rq
L+0Jf+eVp/3/AH/+N0f2hL/zytP+/wC//wAbo5ZdhXRL5Rp8MRE8Z/2h/Oq/
9oS/88rT/v8Av/8AG6VdSlVgfJtODn/Xv/8AG6OWXYLoo+GvDWlaloUN3dwy
yTvJKGYXMi9JGA4DADgCtb/hDNC/59Zv/Aub/wCLo8Gf8itbf9dZ/wD0c9b9
cpqYH/CGaF/z6zf+Bc3/AMXR/wAIZoX/AD6zf+Bc3/xdb9FAGB/whmhf8+s3
/gXN/wDF0f8ACGaF/wA+s3/gXN/8XW/RQBgf8IZoX/PrN/4Fzf8AxdH/AAhm
hf8APrN/4Fzf/F1v0UAYH/CGaF/z6zf+Bc3/AMXR/wAIZoX/AD6zf+Bc3/xd
b9FAGB/whmhf8+s3/gXN/wDF0f8ACGaF/wA+s3/gXN/8XW/RQBgf8IZoX/Pr
N/4Fzf8AxdH/AAhmhf8APrN/4Fzf/F1v0UAYH/CGaF/z6zf+Bc3/AMXR/wAI
ZoX/AD6zf+Bc3/xdb9FAGB/whmhf8+s3/gXN/wDF0f8ACGaF/wA+s3/gXN/8
XW/RQBgf8IZoX/PrN/4Fzf8AxdH/AAhmhf8APrN/4Fzf/F1v0UAYH/CGaF/z
6zf+Bc3/AMXR/wAIZoX/AD6zf+Bc3/xdb9FAGB/whmhf8+s3/gXN/wDF0f8A
CGaF/wA+s3/gXN/8XW/RQBgf8IZoX/PrN/4Fzf8AxdH/AAhmhf8APrN/4Fzf
/F1v0UAYH/CGaF/z6zf+Bc3/AMXR/wAIZoX/AD6zf+Bc3/xdb9FAGB/whmhf
8+s3/gXN/wDF0f8ACGaF/wA+s3/gXN/8XW/RQBgf8IZoX/PrN/4Fzf8AxdH/
AAhmhf8APrN/4Fzf/F1v0UAYH/CGaF/z6zf+Bc3/AMXR/wAIZoX/AD6zf+Bc
3/xdb9FAGB/whmhf8+s3/gXN/wDF0f8ACGaF/wA+s3/gXN/8XW/RQBgf8IZo
X/PrN/4Fzf8AxdH/AAhmhf8APrN/4Fzf/F1v0UAYH/CGaF/z6zf+Bc3/AMXR
/wAIZoX/AD6zf+Bc3/xdb9FAGB/whmhf8+s3/gXN/wDF0f8ACGaF/wA+s3/g
XN/8XW/RQBgf8IZoX/PrN/4Fzf8AxdH/AAhmhf8APrN/4Fzf/F1v0UAYH/CG
aF/z6zf+Bc3/AMXR/wAIZoX/AD6zf+Bc3/xdb9FAGB/whmhf8+s3/gXN/wDF
0f8ACGaF/wA+s3/gXN/8XW/RQBgf8IZoX/PrN/4Fzf8AxdH/AAhmhf8APrN/
4Fzf/F1v0UAYH/CGaF/z6zf+Bc3/AMXR/wAIZoX/AD6zf+Bc3/xdb9FAGB/w
hmhf8+s3/gXN/wDF0f8ACGaF/wA+s3/gXN/8XW/RQBgf8IZoX/PrN/4Fzf8A
xdH/AAhmhf8APrN/4Fzf/F1v0UAYH/CGaF/z6zf+Bc3/AMXR/wAIZoX/AD6z
f+Bc3/xdb9FAGB/whmhf8+s3/gXN/wDF0f8ACGaF/wA+s3/gXN/8XW/RQBgf
8IZoX/PrN/4Fzf8AxdH/AAhmhf8APrN/4Fzf/F1v0UAYH/CGaF/z6zf+Bc3/
AMXR/wAIZoX/AD6zf+Bc3/xdb9FAGB/whmhf8+s3/gXN/wDF0f8ACGaF/wA+
s3/gXN/8XW/RQBgf8IZoX/PrN/4Fzf8AxdH/AAhmhf8APrN/4Fzf/F1v0UAY
H/CGaF/z6zf+Bc3/AMXR/wAIZoX/AD6zf+Bc3/xdb9FAGB/whmhf8+s3/gXN
/wDF0f8ACGaF/wA+s3/gXN/8XW/RQBgf8IZoX/PrN/4Fzf8AxdH/AAhmhf8A
PrN/4Fzf/F1v0UAYH/CGaF/z6zf+Bc3/AMXR/wAIZoX/AD6zf+Bc3/xdb9FA
GB/whmhf8+s3/gXN/wDF0f8ACGaF/wA+s3/gXN/8XW/RQBgf8IZoX/PrN/4F
zf8AxdH/AAhmhf8APrN/4Fzf/F1v0UAYH/CGaF/z6zf+Bc3/AMXR/wAIZoX/
AD6zf+Bc3/xdb9FAGB/whmhf8+s3/gXN/wDF0f8ACGaF/wA+s3/gXN/8XW/R
QBgf8IZoX/PrN/4Fzf8AxdH/AAhmhf8APrN/4Fzf/F1v0UAYH/CGaF/z6zf+
Bc3/AMXR/wAIZoX/AD6zf+Bc3/xdb9FAGB/whmhf8+s3/gXN/wDF0f8ACGaF
/wA+s3/gXN/8XW/RQBgf8IZoX/PrN/4Fzf8AxdH/AAhmhf8APrN/4Fzf/F1v
0UAYH/CGaF/z6zf+Bc3/AMXR/wAIZoX/AD6zf+Bc3/xdb9FAGB/whmhf8+s3
/gXN/wDF0f8ACGaF/wA+s3/gXN/8XW/RQBgf8IZoX/PrN/4Fzf8AxdH/AAhm
hf8APrN/4Fzf/F1v0UAYH/CGaF/z6zf+Bc3/AMXR/wAIZoX/AD6zf+Bc3/xd
b9FAGB/whmhf8+s3/gXN/wDF0f8ACGaF/wA+s3/gXN/8XW/RQBgf8IZoX/Pr
N/4Fzf8AxdH/AAhmhf8APrN/4Fzf/F1v0UAYH/CGaF/z6zf+Bc3/AMXR/wAI
ZoX/AD6zf+Bc3/xdb9FAGB/whmhf8+s3/gXN/wDF0f8ACGaF/wA+s3/gXN/8
XW/RQBgf8IZoX/PrN/4Fzf8AxdH/AAhmhf8APrN/4Fzf/F1v0UAYH/CGaF/z
6zf+Bc3/AMXR/wAIZoX/AD6zf+Bc3/xdb9FAGB/whmhf8+s3/gXN/wDF0f8A
CGaF/wA+s3/gXN/8XW/RQBgf8IZoX/PrN/4Fzf8AxdH/AAhmhf8APrN/4Fzf
/F1v0UAYH/CGaF/z6zf+Bc3/AMXR/wAIZoX/AD6zf+Bc3/xdb9FAGB/whmhf
8+s3/gXN/wDF0f8ACGaF/wA+s3/gXN/8XW/RQBgf8IZoX/PrN/4Fzf8AxdH/
AAhmhf8APrN/4Fzf/F1v0UAYH/CGaF/z6zf+Bc3/AMXR/wAIZoX/AD6zf+Bc
3/xdb9FAGB/whmhf8+s3/gXN/wDF1Fc+D9EjhLLbTA5H/L3N/wDFV0lQXn/H
sfqP50Ac2PCWjf8APvN/4FS//FVYs/DelWd7DcQ27iRHypeeRwD9GYijVLbU
7poksrlLaJSHd/42IPA6YA9fXp0znSt/MxF523zMjdt6UAUfBn/IrW3/AF1n
/wDRz1p6lqH9nwKyWlxeTu22O3t9u9z1PLsqgAZOWIHbqQDmeDP+RWtv+us/
/o56k8U+K9J8IaO+patcpFHnbGhPzSv2VQMk++BwOaTdhos6Jrdtr1gbq2Sa
IpI0M0E67ZIZFOGRgCRkexIPUEir0NxDcBzBNHKEcxsUYNtYHBBx0IPauZ8B
apo+saJcXejXTXkct1JJcXPkvGsk7fMwUOAcAFQOOgHJINcHpV1baTY3EB1G
7itD4huItZddRlMlrCXl8pmO/dCrPt3SDaSOSe9PW9n2/wAl92oul13/AM/x
0+89iluIYDGJpo4zK/lxh2A3tgnAz1OAePai4nS2tpbiQOUiQuwRC7YAycKA
ST7AZrx7U5IJ7jTZbvV7mTw3ba+Es9SfUpEBia3Yt+/DgsFkyquWJ6qD1pk3
iq3h8V2d6PERtrY6nc2t5bXmpuzqgSUAyRFhFCu5QFGwsflO/JIpN6X/AK2X
+Y7f19/+R6zomr2+v6JZ6taJKlvdxCWNZQAwB9QCefxq/XltnqCxfs6pd2mr
NZvDpR23NvMqssi8BQ3OCW+XjnnjBrC1PXbeIa4IfGl24i0CG+ixqo+a7O75
hg8fwfu1wh3DKnIqpWUmu3/Bf6fkCTaXn/wF+p7fUcNxDcBzBNHKEcxsUYNt
YHBBx0IPavGdc8XxT6kuo2viI2r217YiSOXUnAkifyi5SFWWMQ4ckyOHySw+
UBTUuh3lhptjPC2rXEVlJr1xHqso1KUtbwlpTCzNvzCrttzINpbjJOc0Wf8A
Xy/zFfS/9df8j1GfXrS38SWmhMk5u7qCS4RhGfLCoQDljxn5ugyfXGRm0t7u
1WSw+y3I2QrN9oMf7pssRtDd2G3JHoR615dqM+hN4o8PW0fiueWzjsNQf7W2
pASMhKMAJwQxUbWAYNn92QWOGrkz43uLnToWPjeaGZ7DTNwS8iBWTzysw5HX
bh2z83qdvFJatL+uv+Q2tH/Xb/M+h6K8bvPEltZvq1gPEE8+n2uuRIyDV9kz
xNb7mRbhpF2ASKx5dR8pUHse58DfL4QM9vqB1OWSSaQO+om825Y7IzJuYZVd
qkKcZBPOck+zzf1smJ7pf11/yNXVPEFppOp6XYXEVy02pTGGFo4SUVgpb5n6
DgdM5PYYBI1q8ROsabcz+D9Rm1+STxF/aB+32N5qDKIZjHICpt2bEQV8ICFH
B75zWzomr3NxJoU+m6nd3XiKV3TW9MuLp2EWEbeWhJIhCyKoUqFyGA5zRsnf
o/8AL+mwe/8AXn/SR6rRXkr3Vrqfgy/vLXxHqx8SjSpXu9Pi1GVXhuFG4log
cwlXUqANqnOCGyKwvEHi2A6hNJp3jSe2jkttNlBi1EMrSGYrLtDlgMLgsFwP
l+bjcCfa5f66/wCQdL/10/zPd6K8UvPENrp1xrkkPi64dNO1mzS0ifVdw2OY
/OBJbMin95kMWVdpwFwa07e/vLnXbu6vvG0Wm3tvc3Cy6cqP5ggG7Y2xpmi2
bCj+aIscZJPzUr6X/rZf5jtrY9VlljgheaaRI4o1LO7nCqBySSegpyOsiK6M
GVhkMDkEeteAPrH2rwjZW7+I7y+utT8N3j3MT6izM0qbSgCA8H5ZF4GWAYNu
5rp31Sws7nw+1hro1Gz8mBUsYNclW5DmXDOg3kXK53KyN90JgelUlrb+uv8A
kJ6K/wDXT/M9ZooopAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQ
AUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAB
RRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFF
FFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUU
UAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAVBef8ex+o/nU9QX
n/HsfqP50AVhT0/1if7wpgp6f6xP94UAZvgz/kVrb/rrP/6Oet+sDwZ/yK1t
/wBdZ/8A0c9b9ABRRRQAUUUUAFFFFABRRRQAUUUUAZ2r6SdUW3MeoXlhNbyG
SOa1ZM5KlSCrqykYY9VOO2KfpelxaXDIqyyzzTSebPcTbd8z4A3NtAXOFA4A
GAOKvUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFF
ABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUA
FFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAU
UUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRR
RQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFF
ABUF5/x7H6j+dT1Bef8AHsfqP50AVhT0/wBYn+8KYKen+sT/AHhQBm+DP+RW
tv8ArrP/AOjnrfrA8Gf8itbf9dZ//Rz1v0AFFFFABRRRQAUUUUAFFFFABRRR
QAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFA
BRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAF
FFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUU
UUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRR
QAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFA
BUF5/wAex+o/nU9QXn/HsfqP50AVhT0/1if7wpgp6f6xP94UAZvgz/kVrb/r
rP8A+jnrfrA8Gf8AIrW3/XWf/wBHPW/QAUUUUAFFFFABRRRQAUUUUAFFFFAB
RRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFF
FFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUU
UAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQ
AUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAB
RRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFQ
Xn/HsfqP51PUF5/x7H6j+dAFYU9P9Yn+8KYKen+sT/eFAGb4M/5Fa2/66z/+
jnrfrA8Gf8itbf8AXWf/ANHPW/QAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQA
UUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABR
RRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFF
FABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUU
AFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQA
UUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFQXn/Hs
fqP51PUF5/x7H6j+dAFYU9P9Yn+8KYKen+sT/eFAGb4M/wCRWtv+us//AKOe
sr4mstv4ctrxr+6shFf2yPNBeyWwEbzIr7ijLkbSeT06jFavgz/kVrb/AK6z
/wDo56TxboF94isLe0tNQt7IRXMVwzTWrTbjG6uoGJEwMrz1yPSjqvVfmHR+
j/I5rw1rjW2seIv7MuNR17w9AIPsjRStdt57cPFHK5JcfcJJbauTkjmppviY
tybAaRpF1cvLqh0+5i8y3ZkIiL4VhNsLHjB3EDawODgHpPEehXHiDw7/AGab
2OGZmieSQwb4pNrBmV4y3KNggru6Hqe/OL4A1VL5r5ddsRcf2gmoxgaYwjWR
YfJK7fOyU24wMggjqaFvr/Wq/S/4fM6af1o/1sReDfFcsIOm6kNVvJp9WvLW
K+mVShdGdljzkfwqcbV2DpkdK7G81R7Tw7capLZywSQ27zG3mKllIBOCULL+
RNcrbeA9XtxYZ16xY2mrS6oSNNcb2k3ZT/X8Ab3557ehz1suYtGZdWIuiY9k
/wBltXw+eDtjBdsc+pqodL+X5IUnq301/N/oZNpo91faGl2+q3qapcwb/PSd
hGjMvQRZ2YGcfdz3znmtSS4nS7gLRSxxI4hdnZdsm4cMACTwwA5A6mufs7mW
yt0sYtR1E2CDYm7QrkzomOFEmNvHTJTOPfmr8mrwTQTwv9vMZ2+RjSLrdGRj
BYlTuOQD2/rXVOEnLa69Hp+H/AOWEoqK119Vq/6+Y3T/ABS9xBO9zp1wkgvH
tbeJNhaYgn5R8/UBSSThfQ1I/i6yiaKKS0v1uZLg2zW4h3PHJt3AMQSvIxgg
kHOegJGL5EC7zHdaijx3rXtq40S6zGzE7lfj51IYjjafeiWJJbqG9N1e/axd
rdTOdButrlU2Kqr/AAgKT1LHJz7Vp7Gm3qn9z/y/p+RPtZrZ/l5/8A3LTxXa
XU0Ef2S9iEs72xeWNQscqhiUJDc8KeVyvvViDXkuCWTT7/7OYWmiuBCGSZRj
7u0lsnOQCAT2rlUtcLAkl5dOkd+96wHh+7G4tnK9eB8zfp+NuN2j0iTSRqOp
raCBoIGTRLlZkGMLufbhsD0VScDnrlSoQ+yvwf8AkONaV9X+X+ZZvvGqx2t2
LbT7gXtq8KyQStEdokbbztkIB7YJByRxjmuojlLW6yyRvCSu5kfBZPY4JGfo
TXn8mnpL5ubq4jDwwxBIfDt0iJ5T71IHpknI/LFdBHeaMbhL240yeTUAoD3S
6HcKxOMHBMZIGOMZPHFTVoxt7if3Psu/ncdKrK/vv8V+hR0XWm1C/tL7UxqE
Avmb+z13bLcLgkKQGyzlcnLjHHy++vqrPd63YaUZZooJIpbiUwytGzbCqhdy
kEDL54I6DtkVj2f2a3ezilm1KWwsXL2sH9jXKspwQoZ9p3BQxAwB2znFWbnU
FuDbXKyXiahblwsv9h3RjZW6qUxnsv8AF1GenFVON53inbXo/O3T0v56ijL3
GpPXTqvn169DU8P3c11psqTS+ZLb3Etv5rclwjkAnHfGM+9VDb3Fh4gtDBd3
UyPDK96ksrOpAA2sAThCW7LgYzxxUVjqFtp1rDb2x1AqC7zNLo90zSuxJLZC
gD5jnoeOOOtZmnyXtvq73d5rmp3NvI5eS2Tw9PGG4wo3bSwUccf4mpVN80mt
Fr0ev4fP7hupG0U9de60/H5ff857We5+w6LqLXtz5msPsnQykqokRmXYp4Ur
gDjGRnOTzW0NcMbWMElnPJNdRv8ANEY9nmICWT5mBzkHH/1jjHtGs7e4tRI+
pSWdkzNaQDR7lShII+Ztp3bQSBwOvOTzUmoTaffWrQg6rCRci4ikj0q53R9N
wHyfxfOM/wC1+bnFSl8Lt6Pzt93/AABQlyx319Vr3+80bfxPazWcF41tcQ20
scsrSSGPESRnDFsOT19M++KwdY8XW2paTP8A2ddXFvPbSwSMIZI3MkbSBSMx
s35ZDdOMHm1GmjpFqkDR6sbe/wAr5a6XcjyVK4YL+77nLfjUVxM9/pT2V9f3
8rAIY5I9BuU+ZWDBnGDuOVHQqOT7YqEIRkpcr3Xf/J+n5CnObjbmXXt/wPU3
U8QIxuY20+/S6gVX+zGNS8iscKy7WIxnIOSMY5xVCPxvp0hRFtb1pmuTa+XH
GsmH27uWRint97PX0JGbeRw6hFcyXVzfteziNPMXQ7kRCNG3bDGQSVY53Zbn
6cVnXMN1FewT20t1Iz6hHcuV0G5RYdsRT7p6rwo2jnnrThQpv4l+fl5eop1p
rWL/AC8/P0OofxhZRSRwSWWoLdNcfZjbiEMyPt3DJBK4Ixg7u/scS/8ACUWo
iO61uVuhci1No/lrJ5hG4DJfZyOQd3PTrxXM3+8zWlzbm/lv31BLi4uP7GuF
jRVjZRhMZ2gYGNxPJOfS7J5MltdCRp57m8lD3JuPD9y8Lqq4VRHgEAYBzuJz
n8JdCnZOz/H/AC2389hqtO9r/l5+e+3kaOs3d0ND1WRJLi0kexNzFkgSRMFw
y9wMYXp/eOD3ptv4rhi04tNZXxa2khgmJ8snLgbX+/yDuHvz061RuBaSeHYt
Khm1NHS3a38+TR7p/kZcEY2g+mMk4wOtUZ7LzIbiJL+9RLgwPJnw/dH54goB
HoDtGR196qFODVpLr2fl+n4ilUlo4vp3Xb/M65NbjlvVhjs7t4DI0X2xUUxB
lzuB53AAgjOMZ71ljx9ojNPteSRY4XmVoiknmKvXCoxZev8AGF7+hqGyulsZ
JIYbi/8A7OeV5fJbQ7nzF3Hcyh9uNu4n+EnBxnoaqnf/AGJNo66hf/YzC0EO
7QLkuqHgBjj5sLwMBTkAnPIMRowvqn+P+W/4FurLSzX4f5/8E2l8W6eIbiW4
juLRIYo5gbhVTzEkJCkc8ZIx82Md+OaTT/EVrrEkc9m7BYZvIuIzIjAbxlTl
GZTyAOCeprAktkuLhpZr2/DfZYYYzFoV0pR4m3o/IIPzdRjkce9bK6qJbOaK
9lvpZXxsaLRLqNEI5B2lSSc8/e7DpRKjBL3U/wAf8vUUas2/ea/D/MqeKNcl
eyK6euoIkV7FDJdwbFjLbwGQknfjsSoxnjPUVrv4ktUm5t7k2nn/AGc3oVfJ
EmduD827G75c7cZ71zV1bh7S5sbS+vYrGW5+0rHLoF1I8bbw5UMNvy7gTyM8
4zUyxW4jks2uNRbS5bj7S9v/AGJc7w24OVV9vCFxnG0nkjNX7KHIlb8Htp5b
/gS6k+ZtP8V5+fp5nSJrcct6sMVneSQGRovtaIDEGXOQcHcBkEZ24zxmq8Ot
/wBpWa3ttBcRW0bLIszsmyaMkq2NrHoMnDYIIHFZ1ldjT5pI7a5vxYNM8whb
Q7kyKWO4qH2427ieqk4OM9DUWmmytLu9uLlbt2u4xHKttod1AknXLOMNljk8
jH+GXsoq7S/B/wBfoae1bdr/AIr+v1K1/qpuNX1A3661aQWd1BDC1nMqgFtv
DhWIIYnOSOnGQeDZ0/xNBpGnTjUruS4na+uUjEs0aMyo+OrsqgDI4BHXgVny
2ss0d6j6jdH7XLDK5/4R67yDHtx377Rn8ams4jZSLcxX14LwTTSbzoF15bJK
QzIU6/eAIIYdMc10OEHHla/B9l5d9zDnlzXX5ru/PtaxtX8kGseH21i2v7yO
M2/mW3kSNGVfnGQD85JwMHI44HPN29v7vTPC0t9NCJbyC18yRFxguF57jjOT
9Olc7qs9/fvam31vULTyPmOPDs8m9/XlcYHYY47knmrs99HdaTJp08+pSJLa
NDJKdGud7SEYL524A5Py4/GsHSdl2vtZ6L7kbxqLm17b3Wv4lhfFRjFrHdaT
fR3FzEHiXMOJWyAVT951+bOD2BParOmazcX+t6nYyWMkUVo6qspKY5UHBwxO
TnIwOnXniufnMtzaxxzX96JbdUFrJFoN2vkup5fGTuJHHPGM9iQdbQ8nWr6d
Z5mF0qySpLpk9uA6qq5V34xx93k+/FOdOCi3b8H3X6EwnNtJvt27f5nR0UUV
wnYFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRR
QAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFA
BRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAF
FFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABUF5/wAex+o/nU9QXn/HsfqP
50AVhT0/1if7wpgp6f6xP94UAZvgz/kVrb/rrP8A+jnrfrA8Gf8AIrW3/XWf
/wBHPW/QAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUU
UAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQ
AUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAB
RRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFF
FFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUU
UAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFQXn/HsfqP51PUF5/x7H6j+dAF
YU9P9Yn+8KYKen+sT/eFAGb4M/5Fa2/66z/+jnrQ1PW9J0VI21XVLKwWUkRm
6uEiDkdcbiM1n+DP+RWtv+us/wD6Oes74lmVfC0BgRHlGp2RRXcqrN9oTAJA
OB74P0NHVLu1+YdGbVp4o8P38cslnrumXEcRUSNDdxuELHaoJB4yeB6mtGC5
t7pXa3njmVHaNjG4YK6nDKcdCDwR2ri9f1PVrLQbi91LRdKec6lbW/lSOZo1
hZ4sMrGNS5DsSMhcHnJ24PPaBrOpaTYvofhzS1luZNR1GZQkUbJFFHcbcBGm
hHVx0bjHQ54Fq/68v0YW0v8A11/VHrVFc1qmuazpvw8utbm02CDV7eyaeS0l
mzGjqMkblzkcEgA89MjqMX/hMNat2v7e/fSYbhbO0u7d1imZU852QoVUlpmB
UbQoUsSBgdaOrX9f1oHS/wDXT/M7+ivMbfx14qlvYNPaw01ZzrB02SWdHiIU
wCVW8pXfB6kjfzgDCkkra07xtrpl0+XUYtN+yy6nc6ZKIEkDu0QkIlXLEICY
8bDu653dgef9dP8ANfeH9fn/AJM9EpskiQxPLK6pGgLMzHAUDqSewrifDviH
xbr7x3B0iK00y9tTPbXU0cbCBiAUyEuC0oIP92I8e/D/AIl/2ivg2MW13bxu
bu1ScvbswfMyDgBxgZ5IJORkcZzQ01p/XYFZnR2fiLRNRRXsdZ0+6R5fJVoL
pHBkwW2DB+9gE464FaVeQXVyzeL7Q32m6VFeaf4hVHubG32NOGs2dnYkk5bj
jJxgDLYyen8Oa34h8TyRPqOgqnh/ULUyrI3lqUDAFVJWdzIGBOTsj9xzwLVX
X9aJg9Hr/WrR1enaxpmsRySaXqNpfRxtsdrWdZQrehKk4NXa5uwtIZ/Gd3rc
JSOJrVbFCOPtDI7Mze4X7oP+92rLubjxJN8SNTs9O1Syit4tLhligubWSRNz
PIMnbKvOV5bHTAxxkq+3z/C/5pB38v8Agf5ncUV5XfeKfEeq+BptShv7CzmS
/tLVkhgYujeYiyfMsx+ViwK+sZH94EeoW6zLbxrcSRyThQJHjQorN3IUkkD2
yfqaqwElFFFIAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiig
AooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAC
iiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKK
KKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooo
oAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACoLz/
AI9j9R/Op6gvP+PY/UfzoArCnp/rE/3hTBT0/wBYn+8KAM3wZ/yK1t/11n/9
HPVvW/Dum+IoIYdSS4eOJxIiw3csPzAggny2XJBAIz0PIqp4M/5Fa2/66z/+
jnrfoAy9V8PadrelxabqCXEttGyOoW6lRiyfdJdWDMQcHknkA9Rms+PwH4eh
tUgjt7tBHcPcpKuoXAlSRxhysvmbxuzyAcE8kZrpKKAM270HTr3QpNFnhc2E
ieW8aTOhZepBdSGOe5zzk5zk1lTfD/w3cSNJNa3ckjRRQ7n1C4JCxkNHg+Zw
VIyCOck88nPT0Udbh5HLr8PfDi3iXYgvvPWYXAf+1LrmULtDn95y23jJ5I4N
Pg8A+Hrdrdo4L0G3umvIt2pXLBZm6vgyck85z1yfU56WigDDtvCGjWXnfZYb
mFZd+ES9mCRbySxiXfiInJ5QKeTU+r+HdN13T4rHUUuJLeJ1dVS7ljJZfuks
jAtg4PJPIB61q0UAcyvgDw6upLqPkXxulnW53tqdy2ZVG0MQZME7fl5HTjpV
iDwbolss6QQXMUcwceWl7OEi3klvKXfiInJ5QL1Ireoo8gOV0D4ceFPC9xcX
Gi6WbSe4hMEki3MxbYSCQCXJXoORg8VcvvB2i6jKJbmO8Mv2YWjvHfzxtJEM
4Vyrjf8AePLZPJreooDYwLnwZoV5Ney3FvcO16saz/6bMA3lkFCAHwrKVGGG
D155NbdvAltbxwRmQpGoRTJIzsQOOWYksfckk1JRQAUUUUAFFFFABRRRQAUU
UUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRR
QAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFA
BRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAF
FFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUU
UUAFFFFABRRRQAUUUUAFFFFABRRRQAVBef8AHsfqP51PUF5/x7H6j+dAFYU9
P9Yn+8KYKen+sT/eFAGb4M/5Fa2/66z/APo5636wPBn/ACK1t/11n/8ARz0/
xP4nt/CmnpqF7Z3k1nvCSzW4RhACQNzAsDjn+EHABoA3KKytf8Q2Ph3w9ca3
dl5LWBA+IQGZ89AoJAJOfWrem3jahp0F21rPa+cu4QzlC6g9M7GZenPBPWgC
1RUN3cx2VpNcyrI0cSF2EUbSMQPRVBJPsBWBa+N9OutIj1X7JfxWUlpFdJLL
CAreY5RYgQSPMzjj/aHPNAHS0VlaLrUmsC6Euj6npr20vlMl9Eq7+M7kKsys
vPUGtRiFUsc4AzwMmgBaKyvD+v2niTTnvrOO4jiWeSArcRGN9yMVPynkcjoc
H1AqLW/EceiLJI2nX95DAnm3MlqiMLdP7zBmBbgE4QMcDpyMj03Bam1RWFf+
KrSzMAt7W81Ey2/2s/YkVvLg/wCejbmGQc8KuWODhTg0l94rs7X7P9mtrvUv
Ot/tZ+xIr+XB/wA9DlhkHPCrlmwcKcGj+v6+5/c+wb/1/Xl96N6isC98WWdv
s+x2l5qebYXb/YVVvKgOdrncy5zg4VcscHANPv8AxZptjBpE4W5uYNVljitp
baEug342szcBRyOpyewODRbWwXNyisXW/EceiLJI2nX95DAnm3MlqiMLdP7z
BmBbgE4QMcDpyMsv/FVpZmAW9reaiZbf7WfsSK3lwf8APRtzDIOeFXLHBwpw
aLhY3aKyNV8S6bpHh465NK0tl5ayRmEbmlDDI2jvkc+wyTgA1rA5APrRYLi0
UUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRR
RQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFF
ABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUA
FFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAU
UUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABUF5/x7H6j+dT1Bef8A
HsfqP50AVhT0/wBYn+8KYKen+sT/AHhQBm+DP+RWtv8ArrP/AOjnpni+/wBJ
tbOzg1a8s7eG4ukTbdSqgkXPzD5jzwefrT/Bn/IrW3/XWf8A9HPW/Ste1w7n
jt7JPaeDtc0PWJRFa+HLS5t4LmdggujJERbYJIywjZlI7ttxWnPrem3l5BDq
uvS2GjvpMT6Zd2l+0EcswLLL86MA7r8mEOe/B5r0+inq73/rf8dQ/r8v8vxP
KDrE901naeOdUudE8zRo5oGW7exWa4JYSFnUqN6jy/3ZOBuJ2+nn0er6dceH
bGxufEpaCGw0wx2w1HykikFwRKNqMuWCjcS2SvByMDH0xRR9q/n/AJ/5/gHS
39dP8jxiTXZRc6zY2fisnSY9Whhlvp7l7gWtu1uNoLxyI6oZcLv3g5+8x+bO
oNQSyXQ7HWfFclx4fmNyTq8E0ttHJKCpjhNxvLbQpkw3mfMUwSSCD6nRQv6+
7+mDPN/hfcaI9i9vb60tzdxahfCFP7RLtNGZSd7IGxIcFTuIJ5yDzWh4+8c+
HNBiGiapqyWk9/GySFUaRoYiMMxCAkEjhc9+egNdxRSaukgWjbPPodV0vRNa
m1aVhb6XqGjWyad5qlTJ5ZkIiVTyXZZEIT7x9Mg4oeHR/wAIQIX1+RIDPoVr
DCH6tNEZC0Kj+J/3i4UcnnAOK9QopvW/n/wf8wWn4fhb/I8mt7G98MaZpi6f
qtvH4kn0eG0m0eS2Ny8xXcUYKsitGFLOpc5QDr0rR15bDwf4L8JaPqGpWsUl
ve2SlpZAgfy3UyMMn7o6k9sivSKKd9b+af3O4PVa9rfhY4fx5478N6JAujal
q8drLqEZV2RGkaKEjBbCAkEjhc9znoDVaHVdL0TWptWlYW+l6ho1smneapUy
eWZCIlU8l2WRCE+8fTIOPQaKm2jXf/gh/X5P9DyLWNL8RaX8LVguLCxkhttI
SImW9dJIWIG/EYiYE9F+/wBAcYyc+rWbXD2cLXUUUU5QeYkUhkVT6Biqkj3w
Knoqm7tsVgooopDCiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKK
KKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooo
oAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiig
AooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAC
iiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAqC8/wCP
Y/UfzqeoLz/j2P1H86AKwp6f6xP94UwU9P8AWJ/vCgDN8Gf8itbf9dZ//Rz1
v1geDP8AkVrb/rrP/wCjnrfoAKKKKACiiigAooooAKKKKACiiigAooooAKKK
KACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAoooo
AKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigA
ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACi
iigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKK
KACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACoLz/j2P1H
86nqC8/49j9R/OgCsKen+sT/AHhTBT0/1if7woAzfBn/ACK1t/11n/8ARz1J
4n8QHQLG3aG2N1fXlylpaQbtoeVs43Ng4UAEk4PAqPwZ/wAitbf9dZ//AEc9
R+MNCu9XttOu9OMR1DS71L23jmYqkpAIZCRnblWPODg4pP8Ar9RofDJ4ptL6
xjvTpl/bTylbiW1t5IGtwEYg7Wd94LBRnK49DnI0rbWtKvNQn0+11OynvYM+
dbxXCtJHg4O5Qcjn1qhb6hrOqgQtotzpClT5s13LC55HSMRSNk57ttx6HoOQ
t/DmsT6PoWk32g7X0MSebcrJC8d9H5TxlIwW3Zl3KWEgUdck8U23/X9dPxEv
6/rz+5HX3vjLw9ZadeXraxYypaW/2mRIblGfYfukDP8AESAPUkDvUsfirQHs
LK+bWtPjt73i3eS6jAlboVU5wSDwQM815jH4Q8Qjw5pOlw+G5baSLQb2xuG8
22CCaXbt+7ISclMkgfxDPfG3eeHbzULyO51Lw7q91aXWmx2clpBqgt2gaMsC
JFSdUdHD54LEYORzR3/rv/kvvB/1+H/BO8l1vSYL1bKbVLKO6eQRLA9wgcuQ
CFCk5zgg49CKzNP8d+GdRsry8j1mxjt7OcwTSTXMaqp3FQc7sBWIO0nrXC3H
hbVrZfEH2DwlIkl1qllcQNDNbfNHCULnc0gJ+ZHI3AElwSAS2NKHRdXg0q5t
ZNG1hLqHWJ720u9PubUMokd2DKJJNrDB2srj+LgHqD+vy/zf3D/r8/8AgHf2
2qadeyrFa39rPI0KzhIplYmNvuvgH7p7Hoat1j+H5NTj060tNVsyl1HaoZbi
MRrCz9CoUMSG7njbzwTWxTZKdwooopDCiiigAooooAKKKKACiiigAooooAKK
KKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooo
oAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiig
AooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAC
iiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKK
KKACiiigAooooAKKKKACiiigAooooAKgvP8Aj2P1H86nqC8/49j9R/OgCsKe
n+sT/eFMFPT/AFif7woAzfBn/IrW3/XWf/0c9al7NJDs2NjOc8fSsvwZ/wAi
tbf9dZ//AEc9VfHEmqx2Fp/ZJl8wzfvVt2iE7R458rzQULDg4bqAcEHFeTnb
qLATdKXLLTW9re8uppSSc1c0/tlx/wA9P0FH2y4/56foK89s9bu9eu47C21y
5sBHpcd3HcPbxCS5YllcyKylQEKruCgct1AxVXQ9Y8R+JNUVZ9VbTreTSYL1
YrS1j3q7M6n5pA+QduenQr0wS3wPPmSUnLENW396fXb+unWzOpKD2X9af5no
cuuLBf21jJcbbm5V3iTZncExu5xgY3Dr61Z+2XH/AD0/QV4rY6x4g0XwfpBs
tY3JNol3eKLi2RzG8YUjBGMjBOM5OSSSwwo3p9e16xTUIH1I3Mx06zukcW6A
xNJKUkESgfMcY2q24lsDnOK3qRzGLtHEt6tfFLW0rX20+9i9y17f1p/mer2U
0k2/e2cYxx9aWx1G01KOaS0l8xYZpLdztIxIjFWHI7EHnpXMeA/7TkXVJ76/
v7q2adVsvttskD+WFGWKCNGBLFh8w5CggDOTz3/CQeKJtDkvJL24eK1vb5Ly
XS4YBOiRyFUZYpQwaMAEEA7+Ryea+4yRzeCh7WfM7O7u/wCbq3rptr+hzVEu
Z272/A9SqjYazp2qXN7b2N3HPJYy+RchMkRyYB256EjPOOh4PIrmPiM73Xge
GW0vpYVlvLMiWFVy6tMgH3lPqD9QM8ZB5p7nVdD1nxLfW2rSlLfWNPhlR4Iy
bkOkCOXO0Y4bI2BMHPUcD1VrKz9Py/zM/s3/AK6nrVUJNb02PXIdFa7j/tKa
Fp0txkt5akAscdBk8ZxnnHQ1x+kar4q1XXf7Q+2adBpMeoS2c9pLcjcArMig
J5AZZThW5lIIPC8jFjxLb3N18R/DkNrfPZM1je7po41dwuYvu7wVB6clWGM8
dwLp5/5XDuv63O3ory+HxJ4o1SHTNKsru3FxO94qai0qW5u1gkCKyZhlTLKS
xAXnaSMCr91q3iKyk0q41O/P2JI4Y7y40byZYhOZdreasib/AC24G6PBUhsj
oQLW3mD0v5HoNFcT8N4LlNM1eWfUrm6L6rdqFnWPClZnBYbFU5PfJxxwBWBY
654sm/s1pvEEZe61250t1SxjVBGvm4cDk7xs+X5sAY3B8EkWtvNJ/fb/ADG1
a/k2vuv/AJHqtVNU1Sx0XTLjUdSuY7azt13yyueFH9T2AHJJwK84g8R+KNSS
y0azvohePcX8ZvZpI7d5fIm2qo/cSIW2nJAQZ2kjGDnK1pNWuJfE0upawJbi
LwqPPjs/La3dv3ysASm7G4FuoO4kdAAJb0uv60b/AEHFXlZ/1ql+p7JFKk8K
SxncjqGU4xkHkU+vLJvE+s+HUurOfUvPjFlp8ouHt0VbITStHI4A6qoAIDlu
RySKu6v4m1fwzNqunyakb6KOO0ePU7qOMG08+UxN5uwKpCgbxwOvORzWjWtl
3t/X9WIjdrU7a31zTLvWbrSLe8jlv7RFkuIUyTEGzjcegPHTOeh7itCuE0Cz
urL4paxHdarcakW0m2ZJbiOJWVfMl+X92qqRnJzjPNd3UrZP+t2h9Wv62TCi
iigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKK
KACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAoooo
AKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigA
ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACi
iigAooooAKKKKACiiigAooooAKKKKACoLz/j2P1H86nqC8/49j9R/OgCsKen
+sT/AHhTBT0/1if7woAzfBn/ACK1t/11n/8ARz1b1vQ7LXYIoL+ytLyFG3iO
6iWRQ3TIBB56/nVTwZ/yK1t/11n/APRz1m+OL+603U/C09vcX3ltqflS2trz
9oBicgMOpwVHUheSW6AjnxWGhiaTozvZ220e6Ki3HVdL/kaF34T06/gggvNN
065htxiGOaBXWLjHygjjgDp6U9fDNmmpNqS2Nit+y7WuhEBKRgDBfGcYA79q
xr7xnp9xNYRSW+uWuoRag0JsI1RWMiws4SVtxjKMpDD5+Tg/wtg8PePrnU9M
0eS88PX8dzqUDyxNG0AikKLuIXM24EjgBgD1JwASPHXDWBtb3rf4n11/E09r
JFpvh74cdyzeHdEZmOSTZRkk/wDfNQan8PNNu7KSOy0/SLS4YRr5psEkVkRl
IjdcAsnygYBHQc8U3UPHNjc+EW1B7HW7ezu7K4lM9r5Rmt0T5S3yuxDZYYIy
AeW2gHGpp/ii2udQ/s21tL64S3VFuLwtEVhLR7x5gL7+Rj5gpXJ69caR4fwq
d1KWn95/10E60iPwl4TTw0byTbYJLdbA6afa/ZoAF3YIj3N83zHLZOcD0q2P
BvhYKijw1o+1HMiD7DFhWOMsPl4PA59hWdoXxE0HxDrf9lWE2+V42lhkEsTr
Kq4ycI7MnUHEiqfbg1o6r4lj028ktINOvtSuIYRcTx2SxkwxnIDNvdc52thV
yx2nivXoUY0KahF6eZm9WzUvLK11C0ktL22hubaQYeGaMOjDryp4NZI8FeFF
haFfDGiiJmDMgsIsEjOCRt6jJ/M1mr8RNMuruW20rTtW1R47RL3dbWwVWibO
CrSMgPTp3PAyQwEWq/FHwzpVtaTtc+clxbLdgJLFGyxNnDbZHVmPB+VAzcdO
mddv6/rsI6VND0iPVP7UTS7JdQ27ftYt0EuMbcb8Zxjjr0p2paNpesxJFqum
2d9GjbkS6gWUKfUBgcGsOx8d2OqXV/Fp+mavcxWB/fzra7VH7veu1WId9w4A
VSehxggnI1P4mrDZX62Oj3f9p2U9tFNazPAxQTSbeSkxAPBG0kEErkYyQeQe
Z2V9o2l6nZR2V/ptnd2sZBSCeBZEUgYBCkYGASKjfw9osl5bXj6Pp7XVqqpb
zNbIXhVfuhGxlQO2OlZV342trITySaXqTQWYT+0Jo1iZbEsAxWTD5YqrAt5Y
cAHrUuleMLXW9Zu9OsNP1GQWcvlXF08IjiQlAyn52DMDnA2qex+6QSLcDXtd
K06yubm5tLC1t7i6YNcSxQqjTHnlyBljyevrWevg3wumzZ4b0dfLfzExYxDa
/HzD5eDwOfYVW8T+M7TwojTXthfSWsaB5bmMRrGmSQFzI6724Pypub25Gazf
ELSxqFzapY6o6Wt3FZz3P2bZFG8u0IfmIJUlgPlBPfG0gkWuwPTc1f8AhE/D
f2A2P/CP6V9jaTzjb/Yo/LL4xu24xuxxnrT73wv4f1Lyft+haZdeRGIovPtI
38tB0VcjgewrjfHPim4msI10hNYjhg1W3tpdQtfKWBm81VeNiW8zb1BKrjPB
JGRXb6zLIunmCF2Se6dbeNlOGUscFh7qu5v+A0LVX/rp/mD0ZFB4Z0C1leW3
0PTYZJIfId47SNS0eANhIHK4AGOmAKmtdD0mx0+XT7PS7K3spt3mW0NuiRvk
YOVAwcjg5puraxBo8MG+Ka4uLiTybe2g2mSZ8E4G4gcKCSSQAB1rBl+Iumwy
W9s+nat/aE121kbJbYNJFMF3BXYN5YyMEHcQQc5wGIN9ANrT/DHh/SLr7Tpu
haZZXG0r5ttaRxvg9RlQDitWsPXPFNr4c0WDU9Ss79Vmkjj8iGDzpI2cgANs
JUYJ9cHoMkgHK1n4k6P4eEaarBPa3Rj86W1kntllijyQGIMuHztJCoWb2ycU
BY7GivOrLxla6Jf+J7vVNUlubZtQhSxSaaOMYe3SQIhcoijGTyR05JJ52NF+
IOna9fWFvZWN8Y73zQlyWhMSvF99CVkJJHH3QwIOQSASAGdbRXHaj8RLTStL
XUrzRdWis9nmNM4gVVUkhcFpQHLYJCpubGMgZGZG+IWljULm1Sx1R0tbuKzn
ufs2yKN5doQ/MQSpLAfKCe+NpBItdgem51tFYC+KVmvvItdI1S6ty8kSXsEa
GFpEDblyXDLypXcyhc8bqXTPFMOqjTDFpt9Gb8TNtk8rNuImCt5gDnHJAwu4
gnnFC1A3qK55/F1t/wAJRN4ft9N1O5vII45ZnSALEkbEjducqGAx/DknsCQw
GXN8TdKtJbyK+07VLWW2s3vvKeKNpHiUgZ8tHZ0J3A/vAnGScYOC+lx2d7Ha
0V514m8YHUNFkjsP7U0u5guLCfMirGZoJZwoxgkgHDAg7W4wRgnOlrPiyzm0
ppJLfWrfT3u4YoNSsTGVnYyqBsZXJCE8FmCgrkAkkAn9fl/mI7OiuT074gaZ
qd5bww2Opxwz3ctmlzPbiOPzowxKkMd/IQnO3A6HByKk0nxtDrGqWdnBo2qJ
FeQPc293KIRFJCpA34EhcAllwCufmGQOcC1B6HQS3kcUhRlYkegpn9oRf3X/
ACH+Nc7rHiCK28SjSorO6u7kxpLJ5Bj/AHMbHaHYM6sRkHO0NjHPUZzpfF9l
DPlrW8NgLj7KdRVUMAl3bdv3t/3/AJd23bnvXwWMzzNKeJqU6drJtLRbJu3z
fTq+h1RpQtdnZ/2hF/df8h/jR/aEX91/yH+Nea3/AMQydFn1DSdE1KdIrtbV
pZ4kiQP5oQgq7q+eeOMAkA4wQHx+NNOs9Vuke3117u5vY7U2kkO5YZfJDbUw
dqjjk5wSSwJXLDNZznNm7LrpZX0te+um/UfsqZ6P/aEX91/yH+NWIpBLGHUE
A+tcAvjS1ltrZ7fTNRuLqdp1+xxrGJY/JbbIW3OE4OBwxzkYzzXW+GtTTWvD
tlqUdvNBFcx+ZGk23dtJ4J2sw5GD1784PFevkWZY/FYiUMTblSfbe6X+ZnVh
GK0NWiiivqjAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA
KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAo
oooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACii
igAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAqC8/49j9R
/Op6gvP+PY/UfzoArCnp/rE/3hTBT0/1if7woAzfBn/IrW3/AF1n/wDRz1L4
i0KbWRp8treJa3en3QuoXlhMsZbaykMoZSRhj0Yc4+lReDP+RWtv+us//o56
36AOKuPAt1Pe2d+dXg+2LqH2+8kazJEzCPylRAJB5ahCQMlznBJPOX2/gaVP
CNhoVxqoLadNG9rd29uYnSNeCpy7ZZlLqWGB83TjnsqKFp/XYLnI3PgZW0jx
FYWV8IBrG5U3w70tUYYdVUMM5Yu3Uct0OOWL4KuZ9Y06/wBQvrCU2KBFkttP
aG4ZRGUMZl805jJLHaVPXrnmuxooAwPD+h6nokMNjLrEdzptqhjtohabJQg4
RZJN5D7VwMhVJwCe+Y9R8OXzeIJNa0bVI7G5uLZba6Se1M8ciqSUYAOhV13M
M5IweRxXR0UPXcFoeY2Gh6hpnjmXTPD881jaQaNBaLdXelyzxyFXdjtkyibx
vBzkjJIwccdDa+DZ9Dltm8OaolmiWaWc8d3bG4EqoSUcYdNrjc+TyDu6cV1t
FHT+vP8AzB7/ANeX+RyCeDtQ8rxPG+u4/tsfJLDamOW3YRiMEtvw3CjOAvOc
YyAMqX4b38xuCdZ06ESwWsSx22lGOOM28vmRlV844HJBHfsRXolFAf1/X3HH
T+C7+V9USPWoorTWUUanCLMnc+wJI8JMn7rcoAwwkxjNaHh7w3PoWq6vcm9g
ltr+VHjgjtjGYQiCNRuLtu+VV7DnJ9h0NFC0B6/1/X/BOM8T+B7rxBf388Wr
QQRXun/YWWey894R824xNvXZu3DcMHO0e2KMvw+1me01KKTxDYb7+7trp2XS
3AUwhcADz+h8tO/r6jHoNFC0/rzv+YPX+vkcHeeAdVfTbnSrHxBaw6ZLfC+j
in04yvC/mCUqrrKoKFwTggkBsZ712T2rS3NrNK6t5AY7QmMuRjcOeMAsMc/e
68Vaoo6WDzMXxDoLa0tjPbXhs9Q0+4Fxa3Hl+YobBVlZcjcrKxBAIPPBFYk3
ge9l1Kz1M6vbfb11AX925sW2TMsflKiL5vyKEJ6liSc57V2tFC01/r+tAMLx
ZoVz4j0ZbC2vorNhcRTGSW3MwPluHAwHXqVHOemfXIZeaFqX9tnVtL1WC1nn
t0t7tJ7QzRyhCSrKBIpRhucdWByMjiugooA4n/hBtRXVb3U49eiF7JfR3ttI
bHIjKx+UyyDzMSBo+DjZgnIxwBq6l4Zm1vS7aHUtRLXsFytwt1bQ+UExwyou
4kBkLKcsT8xOegHQ0UAcV4l8CXGuXl9Jb6pb20F3p32AxzWPnNAvzZMLb12b
sjcMHO0egxTl+H2sz2mpRSeIbDff3dtdOy6W4CmELgAef0Plp39fUY9BooWn
9ed/zD+v0Ob0vQdS0KSSODV4jo/nyXItvsRadd5LsiyB8bdxbA2FsHGeho8M
6dEl/qusRR3cUV/MGhhuVZCigDcwjYBk3PuJB5OAe+K6SihAc8vh68HjG+1v
+0oxBdWSWgt0tyJECliGEm8jOWb+H09MnlJPhfqjafFaL4hsECWE9gzjSWBk
Sbbvkb9/zKSuS3ck5FemUUraW/rr/mx3d7/1/Wh51rHw31TWZZDNruneXLa2
ttJG2lMwZYH3jrP0Zs5Hoce9WLrwFq7aTLo1l4gs4NJ+1Jc21vLpryNbBHVx
GrecPk3LwCOAcA4Ax3tFO/8AX4i/r9DgoPAur2sdiza3aTGz1WbVSqaaymVp
N2UGZ8D774Jz/D6HOf4CstQsdRtNsTyhoit39q0u7tWtgQWIjaWRo+XwCsKq
p68ACvTaKFp/XyB6/wBfP8zh/FfhqXXdagle5tI4Ld45EJtC1xEykMTFMHGz
OFBBVhx36VnjwbIFn08akp0Oa8+2NZtb5kVt4kKLLuwELjONpPJGfT0iivl8
Rw9Xq1ZTVeybbS5E7Xd++677m6qq2qPM08GXZ8N3+lT6rA0lzffbo5ktCojf
zRLgqZDuG4Y6jj86rDwTrD64NUm12xZjfx3zommuoLJF5W0EznAKn35/KvVa
KzXDmIV7Yha3v7i62v18kN1k+n4/13PFNT8N32mtbQ3N/LLG893dm4s9KumC
vKynZ/o83mL1fvtI4IJANepeFBdDwzZLd28NvKisojgjMaBAxCYQklMqFO3J
x0zxWzRXq5flc8JPnnU5tGvhS3d+j/ryM5z5ugUUUV65mFFFFABRRRQAUUUU
AFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQA
UUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABR
RRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFF
FABRRRQAUUUUAFFFFABRRRQAVBef8ex+o/nU9QXn/HsfqP50AVhT0/1if7wp
gp6f6xP94UAZvgz/AJFa2/66z/8Ao5636wPBn/IrW3/XWf8A9HPWhqet6Toq
RtquqWVgspIjN1cJEHI643EZoAv0VU0/VNP1e2+06bfWt7b7ivm20yyLkdRl
SRmrdABRUUFzb3Su1vPHMqO0bGNwwV1OGU46EHgjtUtABRVBtb0lb57JtUsh
dxgl4DcJ5igDJJXORxz9Kvb13hNw3EEgZ5IHU/qPzp2aG01uLRRRSEFFFFAB
RRRQAUVXkvrOG8hs5bqBLqYExQtIA8gHJ2r1OPai8vrTTrc3F9dQWsAIBknk
CKCenJ4p2Y7PYsUUisrqGUhlIyCDkEVWttT0+8uZ7a1vraee3O2aKKVWaM5x
hgDkcg9aLMLPctUVVj1OwluLiCO+tnmthmeNZVLRD/aGcr+NWqVgaa3Ciiop
7iC1j8y4mjhj3Bd0jBRknAGT3JIFAiWiiigAooooAKKjkuIIYpZZZo0jhBMr
swAQAZJY9uOee1PVldQykMpGQQcgigBaKKKACiikLqHCFhuIJC55IHU/qPzo
AWiop7iC1j8y4mjhj3Bd0jBRknAGT3JIFS0AFFFIXVSoZgCxwoJ6nGePwBoA
WiiigAoqIXEDXLWwmjM6qHaIMNwUkgEjrg4PPtUtABRUZuIRcLbmWMTspdYy
w3FQQCQOuASOfcVJQAUUUUAFFRx3EMsssUcsbyRELIisCUJAIBHbgg/jUlAB
RRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFF
FFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUU
UAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQ
AUUUUAFFFFABRRRQAUUUUAFFFFABUF5/x7H6j+dT1Bef8ex+o/nQBWFPT/WJ
/vCmCnp/rE/3hQBm+DP+RWtv+us//o56zviW7ReFoJEieZl1OyIjQgM5FwnA
yQMn3IHvWj4M/wCRWtv+us//AKOeret+HdN8RQQw6klw8cTiRFhu5YfmBBBP
lsuSCARnoeRR1T7NfmHR/M45E1XSNV8SeKntINGW/Frbw296fOZ3U7TIyQFt
zHdtVFYsxAGRms2TxT4q1S90+y8+20+5g177FKWtHAlU2xkXdGs5wOTld5z8
p+XBB9G1HQ9P1bSl02+ikmtlKMuZnDhkIKsJAd4YEA7s596yv+Ff+Hdzt9nv
fMeZbgyf2lc7/NVdocN5mQ204JByR1zQt/Jf5p/5/f8AcdPP/gW/yOR8Ialq
Ghm2soItPj0q81++skjWNt6HdK6sMEKqgpt2YPHO4dB3Oty6nZeDdRlWWOXU
orORhJbxGMFwpwVUsxH0yaqReAPD0AtxHBfD7PctdxZ1O5O2ZvvPzJyTz19T
6nO15E1hpgg06P7RJGAI1vLqQ7ued0hDseM8kGnHZL0/IqLtU5vO/wCP+Rka
Zo+kXfgO1sJI4pNOntFZyxBDbl3Fyf72SW3evNXbkTRTQXzzxPCkyrH5cZBE
bjaQzbiG+Yq2QB938aw4vD99BKXi0DTY4y5kNuuuXIgLdc+T5Pl9efu9eeta
Bi19hchtJ05luf8AWBtanIHGPlBg+T/gOPXrW0tXe/5f5mrXnf7uvzMTRtc1
mO3EE95azXN/q1xa28kkD7IdjSFiR5nzDC4VQVx6mppvFOuxanBpS2+ntcjU
PsU853qhDReajqnJHHUFjyMZ+bIlbw/fPFcRN4f0zZPOLll/ty5wkoYtvj/c
/u2yScpih/D9+62oOhWGbaYzxuNfugxkIwXZhFlzjjLE8cdKu8G7tfl/n/W5
s3Tcm7b37eduv4fMis/FmrbrKW+jsvs0l/PYSCBH3s0YkPmLk/KDsxt+b13d
hpW2rau+knWppdKXT5bI3MSvvjMJIDKHfLBlwTkgKfQGs2HwvdwNAY9Ds8wX
BuY8+IrsgSnq2DFyTznPqfU09fDl4tvPbf8ACPaYbaZHRrdtcuTEgbOdiGHa
nU/dAxnik1B7fp/mKSpt6bfLv69jJ1PxN4gmtb6z82K2lhksnjuBaPCXSWXa
RsMpYDIH3iCRkFRkGu4GqrDMLGVLmW9WPLPHYzLC7BcnD4KgH03H05Ncw3hS
5cyF9BsnaVFR2fxFdsWCtuXkxZyp5B6jtW5DJ4kggjhTSdLKooUF9XmdiB6s
YCSfcnNKpytWX6dkTPldrL8Uu3/BOb8LXOo6emj6jdizuv8AhInzcSojCdJC
jOmXJwyKFZdoVdvGCcHPRX2ZPHGkRyjMKWlzLHkcebmNc/XazfgTVK00nU7G
8N1b6BpSyZdlB1mdkjLHLFEMBVCTnO0DOTT59O1m5s4raXSLFliYvHJ/b1yJ
VJznEgh3jgkdenHSiTTlzf5f59Am1Kbl/l5+foix4Py2gyxAEW6XlzFbgcYi
ErBQMdgOBjsKbcWUL69aXFmkcS6XbyQBlAG53ChYh6gYzj12+9NS11uKK3ih
0XS4YrdCkUcOsTxqARjBVYAD7ZzjqOayNN8GtpGrDVbLwvpSXwLETPrlzIcs
CCfmhPJyefelZNt3/L/MNLylff0/zGWUUbaJ4I2xhp7litxwMuskDtNu+r4J
9wK1bnV9QsBpga6tY7V/NtZ5p7dnZZ0VtrEhwNpK9Mc8DPzZC2um6rZ3z3kG
g6UszbsE6xOypuOW2KYCqZPJ2gZ71JdWmsXsLw3Og6PLG8yTsrarKQXUqVP+
o9VHHQ9+ppyab/4b+v8Agg2m9dvVef8An+BRtvFWoroz6hdC1d7K3nk1C3SB
o2WRWwiAlztzgnJzkDPGRWX4iuNevNDkOr6PCnk3dpJaTOEj+czKCuFklI4P
3uOCePXo47bWY2vGXw/ov+mtuuQdTkIkO0JyDb/3QBj/ABNUI/D19HYvZf2D
pzwMqqBLrtzIUCkFQjNCSmCARtI5A9KcXFSTt27evcqMop3st/L/AD9Sa58Q
app9xqNheS6ebmKKCaC4WGUJiRymwxgszOCpwFPzZA+Ws2Dxf4iluobI2dgs
x1M2LyzK0ZAMPmBvLDNj1+/2AwMkrebQb+SxltJNA02RJZEleR9cuWlZkIKn
zTDvyMcc8VnXfgzUp7i2lg0yyh2XS3M2deunaVghQHcY8q3I+Yc8U4+z+1+n
l5+o4+zs7r8u3r3+RZl8U+IIdUi0n7Ppr3A1EWctyRIqFWi81GVMnBx1BY9M
fxZWxL4j1qGC+t3gie6sb1YLi6t7SSVFiZA6yeSH3n7wBAY468jiqt94Y1e7
hsIItL02CG2vDduRrFwZJmKsuTJ5O/d8wO7JPAFXP7F1MWa2qaLYxospm3xa
/dJIzkYLNIIg7Ej1J7egpe5b/hvLz9dBP2emi/Dz8/w2K3iGWK88GapNJJb3
Ud/pDXAeJP3TSIvLqDkjqmM8jZ6ioo/E2s2mm3XzWDfYb21tv+PdxvilEf8A
004YeZ15Bx0Ga0brSdTvdJXS5tA0r7Gq7RHHrM8fGMEErACc5OcnnPNU5vCl
zcbvN0CwO4R7seILsbjGAEY4i5YAD5jzx1pxcdntfy7+vbQIuHKlL9PLz8jX
sNU1TUGGoxGyGlCWaN4WRxOFjLLuDZ2kll+6VGAeuRWIfFnif+xbrWV0WEWJ
sXu4HmZECcBlBKyuZARn+FOQOmcjQi0jVINQe9i0PTUkeQysi63cCJnPVzF5
Ozd3zjOeevNVW8M3bW1xbHw/p/2ecMGhGvXQRQxywRRFhAcnO3GQSOhxUrlX
T8v8wj7NPVK3y2+//hxZPFuq2T3MF1bW09y0NrJbJbAjDTuU2kuwDYIBzlM9
OOtX7G61mRY7vWbEWslvciNXUIvmxOApyqySbcMVJ+Y/dB4qgfDV4zTtJoGn
y+fbrayCXXrpw0a/dGGiOCOoI5Byc5Jq9bWOtWtrLbpo2nMkwxI02t3ErsPT
e0Jbjtzx2py5ei/L/MmXLa0Uvw7epgeJbu913Ro9RVbBdPg1aKKKOSBmnGyc
Rlw+7CkkHjb909ea1z4n1D7GdaRbVtKW++yPbeW3ngeb5O/fuxndg7dvQ9c1
XuvC91eS3EkmgWCfaJRPKkPiC6iR5Bj5yiRBd2QDnGcjPWrCaHqEd+bxfD+l
iUyCZl/tq48tpAAN5j8nYX4HzEZyM5zTvGyX+Xl5/iXJwat/lt23/E0NO1HV
tUlW+t/sP9mGaWJoHRxMAhZNwfO0ksv3dowD1yKzrDWL3UYLs37RxXtgY7k2
YtHilhwzbhlmYSKVBUOuAcn6U9NH1OO+ku49C01HkkMrxrrdwImc9WMXk7N3
fOM55680/T9N1fTGdrfRtPZ3UIXn1y4mYKP4QXhJA9hxUaW0/T/MhqOtv0/z
7feZy69qlhqniGaW7gngW+gtLWJo2CxtKsYVi28gKN2WAHzHkEZxV278T6jp
Fxd6dfR2tzegW5tZoUaKJ/OkMah1LMVwwJPJyPQ0xtAvX+1h/D2lOl3EIp43
1q4ZJAAACVMONwCj5sbuOtO/sO/bT7qxl8PaVcQXYCz/AGnWriZ3A6Au8Jbj
qOeDyMGq9zS/l28vP1+8p8j3Xbt5efqZQlvtF8X67cTzaWLuSytSs0drIiOW
kZcmNWZnfsADlsKOKu2vifW3trme6S0gTT9RW3vC9sykwsqHeFEpCEb+cluO
cAjFMfwlcyyPJLoVpLI6opeXxJeO2FbcuCY8gg8gjpk+pqZdB1a3tNQhtNI0
6Nr9Nk7Ta1cThsrtLFXhILY4z34zmneLWu/y/wA/UcnCW++nbsl3NSH7XcW0
+urBDdXqRzpYJENgeEsCgJLEEtsU54GD0FTeGtVl1Wyne4uIpZ4pdjotpJbP
F8qna8bsxDc9c4IxioJI9eksDZHRdJW3MflbU1aVMLjGARACPwqOwtdb0xJF
ttG03Mjbnkm1qeV2OMDLvAWOOwzxWbWjX3bGLV4u+/qjH0vWNch0meSXULOa
ebVJ7eFWtZXf5XfIRBJ833RgZUIoJLHFOXxfrD6Ba38sMFmvmXEV1cvaPPHE
0blRuRJMoDg5bLAY981NJ4avJHZzoNgjGc3IMfiC6TZId25k2xDZnc2duAe/
QU2PwxeRRGKLRLSOMs7FE8R3iqd5ywIEWCCeSOnJ9TWl4dV+Xb1Nm6bd7dfL
z8/Qqafqj23jDWtL05re3ub2+WRZ5oC8GBAjMBhl3O2SQAegYn33fGdxqNp4
Zjezu44bk3NsjyiNsENIqnADAgEn1PGR3yM5vC904uAfD+n4nmSd8a/dDEif
dZcRfIRwBtxwAOgFWp9K1a6s5LS40exmhkEYIk165YjZgqQTDlWyAcggk8kk
0ny3i+1u3S3mS3HnUu3p/mKdV1228T2+jXN1pjeeqyxzJbMuVAbehUzEhzgF
eowHPO01L4LuNTurK/l1G8iuMX9xHHtiZSu2RgRku3y9MDjA7mqTeH9QeHyn
0a0YeetzubxFdl/MVdobd5W7gAd+1bOg6bPYS3sk1hBZ/aJPNKwahLcIzEks
drooTk5+Uc556Cpk48r/AOATUceSy8u3n5m1RRRWBzBRRRQAUUUUAFFFFABR
RRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFF
FABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUU
AFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQA
VBef8ex+o/nU9QXn/HsfqP50AVhT0/1if7wpgp6f6xP94UAZvgz/AJFa2/66
z/8Ao5636wPBn/IrW3/XWf8A9HPW/QAUUUUAFFFFABRRRQAUUUUAFFFFABRR
RQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFF
ABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUA
FFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAU
UUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRR
RQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFQXn
/HsfqP51PUF5/wAex+o/nQBWFPT/AFif7wpgp6f6xP8AeFAGb4M/5Fa2/wCu
s/8A6OepfEniNPDVpBcy6be3kcsyQf6L5WVd2CoDvderMBxn3xUXgz/kVrb/
AK6z/wDo56xPire2dt4YtYbnUYrGSXUbQxu0iKwCzoWZQ+Qdo5OQQO/FHVeq
/MOj9H+Rur4iuRDNJc+GtatzGYwEKQymTe4XK+VIw+XOWzjA55qzoOvWniKw
kvLJJ0iSeS3InjMbbkYqTtPI5HfB9QK43xZNP4d8HNenxRMwudVtZY7xpYo2
miYxAqWRVXbtVm+QDKjkkbs8tZawLq0EEPiSz0zR59U1IyXxkk8szedujUyR
TRFMoXYZbDY6Hihb2/rp/n94+l/66/5fce30VxGvXVzp3wfvrg+IJHuYdObZ
qiKIGlYDCsN2cbjgAjk5ypyQa5GbxTaabNqNp/wkd5eQz6dYTM41TBWWSQq7
GQBvJQhkLFANoIIAJFHVr+uv+Quif9dP8z2WivCbXxARrNrpknjdxANeEQWD
USRJbPbA5DyM8jJv+UNuxliRg7dt3SPEqQz6PNF4plu5m126sEhm1LerW4En
lhgT8/PlkO2W+YDdggUf1+X+a/EP6/P/AC/I9pqOe4htYjLcTRxRggF5GCjJ
OAMn1JA/GvLvCl0bt2vdY8axl3tJBqunK88L2zj7xkJnYW+xgw3IsYOeO1bv
xLitpvAKv9olFrHdWkhmS5dR5fnICzOGyRtJOSfRuoBoelv66gtWdxWdr2tW
3h3RLvVryO4kt7WMyOtvEZHIHoB/M4A6kgc15xqWrxZ1qP8Aty8t9Sto438O
JFqEjLeReWpjKLuIuS0gYNu3nkdOtU/GWpw3mm+LbTxNq02l6lBZj+z7Jb57
eOZDCDlVBCz7pN6kHdjaBx3mTfK2v6/4PddCorVJ/wBf8Ds+p7BbzLc20U6A
hZEDgHrgjNOkcRRPIQSFUsQOpxXiWp+K7c3UN5Y+IjbGyurBHSTUnAkhbyt5
SFWWMRYYkyOHJJYfKAprtbCzuV8SNon2jVJLNLkatFeNezOskJXaIS5fkB+d
n3So5BJybktXb+tv0/JkReib/r+n+Z1+lajFq+kWepQxyxxXcKTokoAdQwBA
YAnB59anluIYDGJpo4zK/lxh2A3tgnAz1OAePauB8V36ab4u05RfpJEogRNK
t9RktbhCZMeZHEp23CkcFGHAXjqRU/xIisvtPha41C7ltbOPVQJplvHt0RTF
JyWVlwcgAHOeSAeTk0bVurt+I+6fRX/A7uszXddtfD1gl5eJO8bzxQKIY9x3
OwUZ7AZPUkfngHy5fE8S+NNOuovEL28L6rcWl1bXWou8gULIFLwlhHEu5QFU
IWPyndkkVn6nr0MXhjUIJdWtdQnFzYul+usPNbXDC43YKuW+zvtG5kXIAGRw
uAlrb5f19wPS6PdKjjuIZZZYo5o3khIEiKwJQkZAI7cHNcR4S1/SSb+bVtYW
316BmXUra41JvJhO4fNFG7lVjO5NrAfxAE5yK526j0aHxD41gu9evdO1Ke6i
+xrFq0sUjs8UYUrH5ihhvOBngDjIA4P8gPWZbiGAxiaaOMyv5cYdgN7YJwM9
TgHj2qSvGLu90y/tNBk1TV5o7u01549Yxq0qR20hjlHyt5vyJlQEORxkcEsK
9mGMDByO3NHS/wDWyf6g97f1u1+gtFFFABRRRQAUUUUAFFFFABRRRQAUUUUA
FFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAU
UUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRR
RQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFF
ABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUA
FQXn/HsfqP51PUF5/wAex+o/nQBWFPT/AFif7wpgp6f6xP8AeFAGb4M/5Fa2
/wCus/8A6Oet+sDwZ/yK1t/11n/9HPW/QAUUUUAFFFFABRRRQAUUUUAFFFFA
BVGw0wWU1xO91Pd3E7DdLPs3BBnag2Ko2jJxxnk5Jq9RQAUUUUAFFFFABRRR
QAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFA
BRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAF
FFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUU
UUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRR
QAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFQXn/AB7H6j+dT1Bef8ex
+o/nQBWFPT/WJ/vCmCnp/rE/3hQBm+DP+RWtv+us/wD6Oet+sDwZ/wAitbf9
dZ//AEc9ReNdU1vRdGW/0SK1uJI5B5lrNEzNMueQjBhtbGcZDZOOlJu24JXO
korlPEni/wCweBDr+jrFczXFv51mkudrjYZCWAIOAisSM9sVoQ69a6bpFhN4
i1fTLa4ukBDuwtkkJ5wqu5PAI7mqtq12C+ifc26Kyte16y0LTmnub7TraVlb
7Ot9drbpK4Gcbjn9AfpXGL8SZLTwrY6zql3okMl7Y28kVr5xSTzpJCpbazf6
oDB9flfmpuFj0iiuZ0PXZhYahea5rfh6a1gkUx3dhIY41iZQVMu92Ck5BHzE
YI55rVn17SLfSU1STVbBLCTHl3UlyiwuT0w+cc03oC1NGiuU8F+Ll8R6Ysl7
caal5Lc3EcENrPvWWOJyu5CeXGMZYADnOBnFXPEl5rtjZXN7pf8AZ6w2cBnd
btGY3GASVVlYeXwPvENyegxym7K7Gld2Rv0VycviHVdSu4rbRIbWKaPT47+4
W9R2P7zOyEbSNpO18sc4wPlbPEMXiu/18248OLaKf7Oj1Cb7YjNkSZCQjaRt
J2Pl/mxgfK2eG9L36f8AB/yf9NCWu39bf5r+rnZUVxcPi3UPEBUeHfsURTTo
tQkF9Gz+Z5m7bENrLt+42X+bGR8pqS78XXs2h+GtZ0u1tvseqXFulx9pdt8S
ykDCqBgnJPJIAx0OeHZ3t52+/QL9f62udhRWB4kvNdsbK5vdL/s9YbOAzut2
jMbjAJKqysPL4H3iG5PQY5pS+IdV1K7ittEhtYpo9Pjv7hb1HY/vM7IRtI2k
7XyxzjA+Vs8Tf+vv/wAmO39fd/mjrKK5HWPGvkeBY9f0y3WWe4tRcwwynhFw
CxfHOFyBx1JA4zkdapyoPqKpqxNxaKKKQwooooAKKKKACiiigAooooAKKKKA
CiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK
KKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAoo
ooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiii
gAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKA
CiiigAooooAKgvP+PY/UfzqeoLz/AI9j9R/OgCsKen+sT/eFMFPT/WJ/vCgD
N8Gf8itbf9dZ/wD0c9S+IZLxEshaaVdX+LlJHFu8S7FU558x1zn2z0qLwZ/y
K1t/11n/APRz1v0dg6WPM5/COsafpHiSwt7R7yy8m4g0S2hkRTGLhcvu3sqh
UbgdwpOM5q9FZ61aamdQl8O3F9bX2lR2Ulm01uJbZ4y2Q2ZNhjcPk7WJ4GR6
d9RStpb+uv8AmO/9fd/keb6Z4e1zwxPbCfTJNfgbRY9PZreWIPbuhYsoErID
GwYc5z+7GR0rkrTwh4ntbCOFPCN2kv2PT4ZWS4tBve3n3sxPnc/IAATzxjgV
7rRTv73N/XX/ADF0t/XT/JHlMvhjWJ9X1S/Xw/fQWravHfi1gvo7aW4QweU5
V4pRtcMS/wAzAMO+TWnDoV7o2paPqumeHLqSzhN0JdOkvkluYpJdp8/dJIVL
EqykeYeHyCckV6HRQtNv60sD13ON8BwalpVlcWF54fu7FJb66uEdpLcxojyF
1BCSE5w2OARkH2ynjS+8TebDYaP4Rk1iwf5rtmv4bdZB2jG4kkf3uBkcc5Nd
nRR2XYO77nGyW2vWeovrUOk+fealp0VvPbRToFtZkLlSzMRuQeYwJXJ+XIU5
4q2Hh3U/CCw/2XZvqbSaVDYPtlSMRyxbisjbyPkPmNnblhgYU547yih63X9d
f8w/r8v8jzu78Euml6Xo9lYXAv7ewWzbW475rZI0/iBEcgkkII3BGXbk/eHN
aHiLSLqw0DQNJ0PR7q+gsLq2ciKWJSkULKeTI65YgcY984rtKKd9b+d/xuFu
/a36HGeM77xMZILHSPCEmr2Ljddlr+G3DjtH8xJIz97jBHHOTSyW2vWeovrU
Ok+fealp0VvPbRToFtZkLlSzMRuQeYwJXJ+XIU547KiptpYDzrVfh/qEXgWT
TNN1i/a5XTo7X7NGLcRTFP8AaeMsASWP3x1rv7SGS3tIoZbiW4kRQGmlChnP
qdoC5+gAqaiqbuKwUUUUhhRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAU
UUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRR
RQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFF
ABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUA
FFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAV
Bef8ex+o/nU9QXn/AB7H6j+dAFYU9P8AWJ/vCmCnp/rE/wB4UAZvgz/kVrb/
AK6z/wDo5636wPBn/IrW3/XWf/0c9b9ABRRRQAUUUUAFFFFABRRRQAUUUUAF
FFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUU
UUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRR
QAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFA
BRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAF
FFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAVB
ef8AHsfqP51PUF5/x7H6j+dAFYU9P9Yn+8KYKen+sT/eFAGb4M/5Fa2/66z/
APo56q+NtWvbCDSdP06cW11q1+lmLnaGMKEMzsoII3YUgZ4yc9qteDP+RWtv
+us//o56s+IdBg8Q6elvLNLbzQzJcW1zCRvglX7rjOQe4wRggkUmNFSPw22m
3llc2Or6klvDIXu4bu9kuFnXYwGTKWKkEg/KQDjkHAxDD450+R7d5bLUYLK7
V2sr14VaO62qWwiozPkqCVDKpYDjJ4q3a6VrMxVdb1i3u4FXHlWdm1t5hIwf
MJkfcPYbR656DItPA95b2djYSazHcWGlFn02OSzPmRttZI/NcSfvFRWIAAQn
Ayabv/X9fcJW/r+vv6lS5+J9q/h6fUbDSdS3tpst/Z/aYkRZhHgN/HkBSwJ6
ZGdpbip7/wCJ2k6LZWjavDLbXktuLia1ae3WSJDkBsGX5wcEhULNjqM8VQ/4
VnfPpmnadNr1u1vZ6XcablNPZXdZRjdkykAjavY9D6jG3B4Z1qzuob201yzj
u2tUtbvdp7NFMqEmNlTzcowDMCdzA56cUd/67/8AAB/1+H/BIx8RdJe8nghs
9Tlht7qG1muhbbYkaXbsPzEEqSwHyg+uNpBNbSviBLcWU019ol3HK2pyWFpE
jwAzsrOAoLS43AIc5IBPC7qjvvAWq3Y1dRr9qBqN9b3haTTizJ5O3aDiUAk+
WmSAP4sAZGLC+CtQj0u/0wajpVzZXd5JdGG+0ozL+8ZnZWHnDdhiCpG3G3v2
P6/L/gj/AK/P/gHT2d9Ndsm/Tbu2RoVl3z+WMMesZCuTuHfjHoTV2snQtKut
FsbXTzercWdtbJCgeJvN3DqS5c5XGAFxkY5Y1rU3boSr9QooopDCiiigAooo
oAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiig
AooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAC
iiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKK
KKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooo
oAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKgvP8Aj2P1
H86nqC8/49j9R/OgCsKen+sT/eFMFPT/AFif7woAzfBn/IrW3/XWf/0c9aOp
f8svx/pWd4M/5Fa2/wCus/8A6Oesr4kWkV5pNkkvmkLcBwg0576JyAfllhUE
sh55GMHac8V4+fU1Uy+pBu1+Xpf7S6GlH40a9FebCzV5LP8A4SXw3JLpr6VH
Ha29taPcJaTKWDqEALRlgUKsQCAuCQRVfQfDjXHibyfEunXN/P8A2PAkj3sM
k8HngsSAzAx7gpXkHqWxyWr85/s+CjKUp7dknf016dez77nYp3/r0/zPQLbV
P7Qaxn0+EXOnXMbu12H27MY2jaRk7st9NvvWjXhL6T9n8P6fa2+iazDdLo93
b3S2+nXSA3DBNmSqhWLbcFhkEABiRgVs3VqtrHqcFlpmoxW9zpdiJA1hcbbi
YS/MshK5YlXUP1YrkYJBFdNTKYXShJ722/vWu9ezurLVC53/AF8v8z2zTf8A
lr+H9aksZ7u4jma7svsrLNIiL5offGGIV8jpuGDjqM4riPhjbaZbNrTWtjb2
F5cTJNNaRWkkHkoV2oB5kcbMpKO2doALMB0yeTGmGXQCG0zUJ54dQv3gstV0
S5uoblXfKbyV3o5BXbKTxls55r77IqXssDTp66J9Lfa7a/Le/Q5KrvJvz/Rn
sl/qFrpdobq8lEUAZELEE8swVRx6kgfjWfo2vnV9U1qyNlJbHTLlbfc7qxly
ivuwOg+bgZzjrg8DF+IWmnV/A6JJpRuZI7i1ma2EPnsgEqb8KASxClgcA5Gf
WuHvLK3Fxreo2OgaqskerafJpu3SLpPLhQRBzGmwbAAjg4AyAB3UV66+Kz/r
bX8WZ/Zv/XU9rrEudfa38YWGgmwkKXdrLcC7MihQUKgqF6k/MMk4HTGeccXo
uh7/ABj9u1NteGtxX8rq6WMawSQsSUzceSCYxGwHltJkFcBeBWr4y0+2m8Xa
De6nptzfaTFb3UUyw2klyu9vLKh441Ysp2t1BXIHfFHZv+tP8w7o7qivIrjw
7ejTNJttXh1SLQPMu9lpa2SXr2oaQNbrJE0cvAjDAEKShIHFWr3R1tNQ0FrW
yv8AVJbaG3ijg1fTHmbYJciRLlVCwSgZJDEAgKCARQgelz0qy1C11FJXtJRK
sMzwOQCMOh2sOfQjFWa4j4d6Va6TDrdqukGwuv7RnLsLJoRJEZHMW2TaA4Cn
jaTtz2zXDafotrGdJL6Lrm8eILozSSWN4X+xt5mAzFc+W25CVJwxLFgfmoWt
vNL8bf5jatfyb/X/ACPcKwvEXii20HT9TlSF7y8sLL7a1pGQpMeSAdx4Ayre
pwDgHgHzKDS5bzTrO0v7LWrbw9DeX0Yt4dHMpj3S74GMEsLnZs3AMq/KSBxk
0ms+HbfTm1Upomq3klx4cW2sLqXTXuLhpv3qfO8aHY5QoPm2nbgHpgTK9rr+
tGxxS5rP+tUj2W1n+02cFxt2+bGr7c5xkZxU1eNSWF5b3GoQaFo+prbS6dYS
3URtJ4jd7JCZ03uAGkaNgDk7m5HUHGhe6bdra61P4W0m9tdCkjtfO06K1e0k
nKyE3HkxMFKkxYUkAbjwMmtJWvp/X/A8yI3sr/1/wTurTxA9z4v1DQW0+SEW
ltFcLcPIpEwdmHyqM4A29SQevGME7dedeErXS7T4i6nNo2h3em6fc6dCoJ0m
a0iMqu+4fMigHBX6+/Nei1P2V/XVj6v+uiCiiigAooooAKKKKACiiigAoooo
AKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigA
ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACi
iigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKK
KACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAoooo
AKKKKACoLz/j2P1H86nqC8/49j9R/OgCsKen+sT/AHhTBT0/1if7woAzfBn/
ACK1t/11n/8ARz1qXrWge3S5uUheV/LhVnCmRsZ2rnqcAnA9DWX4M/5Fa2/6
6z/+jnrH8fQyNq3hCa1itjfJq2yGSccIGhk3cjnHAOBjO0DI6jKvQp14eyqq
8W1p80NNq7XRP8jp5oLK3aJZ7kRNM/lxB3VS74J2rnqcAnA9DUv9nxf3n/Mf
4VwN74p1kapb6TdWekT3lvqxtTfGBzGrNbNLG8cZbIbBIb95x2+98sXh3xB4
ktPC/hm81HVdPez1GFke5mspGeKQxlo97edhgSDk4GeAMZyPOWSZc1f2S/4d
XLdSfc7+e2tLaCSe4n8qGJS8kkjhVRQMkkngADvUF9oGm6xY+Rc75YHKyK0c
pUgggqysuCCCAQQa4q48W67c+DLy8eHSLm4s7K6bVLKe1dEDKSqof3jYBAY4
IO4Dqu7I1YfFN/B4gtbK8W3sLGSJDbxtZSEXQ8kufKnD7FYEEeWy5wuQTnio
5Ll8XzKklb/g/wCQe0n37/p/mdJpGh2WiRyLaeexlILyXE7zSNjpl3JYgZOB
nitKuM8K+I/E2u3lvdXeiCDRby38+KY+UrRZAKDKzuZAQTzsjxjpzxb1HWdX
uvEN5ouiSWEE9laR3MjXsLyCYyFwqqFddoGw5b5uo4r0KdKFGChFWSv+tzO9
9TqKK860nxl4l8UX7w6Xa6VYwtpcN/C10JJ3LOWUowBQAZUjIPAAPO7CtXx5
4h1u2tW8N6F51wbCG8njfy2XdIWAjy00RUZRvnAfr93jnT+vz/yYf1+X+Z6P
RXCWXijxHc3XiKS9j0XTbbR2wUleSTdmEON8owEwSCSFbOSAONzc7q/jDxRP
ZajYmaC0ngk0+WK6FjJbtJHNPsI8szFlGVH3ipI3AqMg0dUvT8Q8z12iuFvP
FGux2+uXVq2myReH8LeQyW7q90yxrJIUPmfuhtbC5D8jrVrwz4g13X9e1SOa
PTrXTrGdFVFWSSaVHiV1yxKhCNwJ+VupXtuItdvX+vUHodhRXC+OfFur+Hzd
vpQsp/sVn9qmt2tnmfbk8uwdEiXC8ZLM3zYU7TmpN431+O91OVrXS4tP0/Ur
S1KZkklljm8vnd8oVh5mejemONxFr/XnYHod/c3VvZw+ddXEUEW5V3yuFGWO
AMnuSQB7mpJJEijaSR1REBZmY4AA6kmvKvGF9qHiXQE1RU0xdLttbhhiiltm
a5Gy5WMyCTdhCWBG3Z909ecV6LrQM8EFiASLuZYn9PLGWcH2KqV/4EKFqr/1
0/zB6O39dTSBBGRyKKwvEes3Gmy6XY2fkpeancm3imuELRxYRnJZQVLHCkAZ
GSetcvc+MvE0Or2+iJbaU14NUFhcXbCQRkPCZUdIsk/d6qX6rjPzblFq7f10
/wA0H9f19x6LRXL+Lta1nw74at7yzhsLu88+CCZpi8UZ3uqEqo3Hkt0LcZzl
sYOZqviHxbbag+kaVp1vqeoWlulxcSRQJHFJvZwiASXKtHwhy37z/dHQgHbR
3NvNNNDFPG8sDBZUVwWjJAIDDsSCDz2NS15Va6zeaJr3iKDS9KB1HUtWiRIE
WNhG5tFlckGSNXPytn51ySTnsdmDxL4nsLzSZfEsFhpthdSSwTAw5kDqpaM7
lmZUDgHj5sEbcncCADvKK828QeMPFGiaZLOP7Mnuray+2z20VjKzKhLYDkyh
YgFHUszMd21Pl5km8b6/He6nK1rpcWn6fqVpalMySSyxzeXzu+UKw8zPRvTH
G4i1dv63sD0PRaK5bTdT1/W3F/YSaXHpbTzweVPDIZk8sugfcHw3zqCU2rwf
vZqPw/rur6pdWtncS2H2m1M66skUDDYyttjCZkO3dy2Tu3Afw0LUHodbRXJN
revzePLzRYl0u20+1tYbszSCSWSRWZgVxlQhO08/NtxnDbsLzE/xD8RWiXcg
ttOu4jpNxqFrKsEsERMRTIVmctKuG4bZGGwMHByFfS/r+F/8mO2tvT8f+HPT
7i5t7SEzXM8cMQZV3yOFXJIAGT3JIA9zRcXNvaQma5njhiDKu+Rwq5JAAye5
JAHua8o8W69qF3pdxZ61BZO1udM1KH7JC7NH5lxtZeclyNvBAUndjbWxqHif
U7vwsuurDpF5plzewRR2VzbMJbcGdVzId7BpFP8ADhdrc5O3Bdvzt+X6i8/6
7/keiUV57pXjTxBc3lhJf22mR2tzq9zphhg8x5AYxIVYOSB1jxjbz1yvQSeF
PFmteINct4mu9Ie1NvJNeW1vbOZrKQMFWCR/NID8nkqM7Gwo6gWv9eV/yB6X
v/WtvzOwuLySKdkVVIGOo9qj/tCX+6n5H/GuV8U67f6X4otrcmG006Xywbqe
0eZJHZwpjLo4EJwRguCCT7YOTJ4s1P7DLrkKWb6TFfmze0MbC4wJfJ3792M7
sNs2dO+a/Osbi8zWKqKnVajzNL72ktt/y62OyMYWV0egf2hL/dT8j/jUUesC
WaWGOSB5YSBKitkoSMgMM8ZBB57GvLdR8QeKr/wre34uNN0/ydTFlsgjlkc4
uFTIk3pgdiNvIB+7nAsN4m1201+bT4rDRvtMmqRWU10odfMzb7w5XqTgdC3y
gBct94ZLE5q0/wB/qr9drWv08+g+WHb+tf8AI9P/ALQl/up+R/xq7byGWBXY
AE56fWvKJPGuopYWv2i60nT5Dc3dtPfXUbfZ98LEKoXzFKlxzyxxtPXt6H4T
uNQu/CunXOqLGl7NCJJY44miCFudu1mYgjODk9R26V7XD9bHTxMlianMrPTz
TSvt6mVZRSVkbNFFFfYHOFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABR
RRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFF
FABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUU
AFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQA
VBef8ex+o/nU9QXn/HsfqP50AVhT0/1if7wpgp6f6xP94UAZvgz/AJFa2/66
z/8Ao560NW0ax1uCKG+idhFIJYnimeKSNwCNyuhDKcEjg9CRWf4M/wCRWtv+
us//AKOet+gDBfwZoTrZKbWYfYpzcxMLuYMZTwXchsyMRxl9xwSOhNPt/CWi
W2jDSFs2fT1mSZIJp5JVRkYMu3ex2qCo+UYXrxya26KAMm78NaRe2uqW01of
K1Rg175crxmYhVXllIIG1QCAQDznqcxW3hPSLS7huY47t3h2mNJr6eWNSq7Q
3lu5XcAPvYz3zmtuijYNzI03wxpOkXLT2NvLGSzMsZuJHiiLEljHGzFI85P3
QOpFGq+GdK1m6juryCX7THG0Qmt7mSBzGSCUZo2UsuRnacj2rXooA4ebwQ17
41nvbq2gi0b+z47KFLPUJ4JAqFjhkjCgod2Nu4j5Rxzgb954V0a9ltpXtZIZ
LaHyImtLiS2Ii4/dny2XcnA+U5HtWzRR0/r+uodbmDH4N0GOPVYhZuYtVXbe
RPcysjjG3hS2EwMAbQMAADGBVZvh94ccymS2vJGljSKRpNSuXZlRtycmTOVP
IPUdiK6eigDBm8G6FcXK3E1rM8vlpFKTdzYuFT7omG7E2P8Appuq3p+gadpW
o39/aRzLcX7iS4L3Mkiuw4BCsxVeMDgDgAdAK06KAMHVvBuh63dz3N/azPLc
QC3n8q6liWaMZwrqjANjccZBxVQ/Dvw2YJ4Ggv2S4ljml3apdEu6cIxJkzkY
H5D0GOpoo2A5m78AeHL2W4eW1ukFzMJ5o4NQuIY5JRjEhRHCl8qDuxkkZzmu
hFtEJYpcMXiQohLk8HGc88n5RyefzqWigCjquj2Gt2YtdQg82IOsiEOyMjqc
qyspDKwPQgg1nN4M0NxZ5t7ndZ3BuYnF7OHMpGC7tvzI2OMuTxx04rfoo2Az
ta0LT/ENitlqUcsluJFlCxXEkJ3KcqcowPB569QD1AqHUPDOl6ndQXVzFcC4
gjMKzQXcsLshIJVmRgXXIBw2R19TWvRQBzp8DeHj9s/0OUfa5knkIu5gVkT7
jR4f92QMAbNuAAOnFXx4f0s6aunyW3nW6yrNieRpWaRWDKzOxLMQVHJJ6Y6V
p0UAYOreDdD1u7nub+1meW4gFvP5V1LEs0YzhXVGAbG44yDiqh+HfhswTwNB
fslxLHNLu1S6Jd04RiTJnIwPyHoMdTRRsBix+F9Ltb+XULW3lW4dzMYvtcqw
PLj77Rbim44BLbSc89al0bTpbZ7y/vIbaLUL6RXnFudyqFUKq7yql8AdSByT
2xWrRQBljw7pg1y41kwyte3EIglZriQo0Y6L5ZbZjr26knuaxm+GnhZ7dIGt
L0xRwtbov9qXWFibGYx+8+4cD5enHSutoosFzlrn4deGryXzbi3vnfy4os/2
pdDKxnKA4k52nke/PXmn3fgDw7ey3Mk1vej7VMLiZItSuY0eUYw5RZAu75V5
xngV01FAHMJ4B0CBIBbw3avbXLXkBfUblws7dXIMnzZ5znrlv7xzn+F/Cmqa
Tc2Jnf7LDZx7GWDWbq6juPl248mUBIlBww25IwADjOe3ooWgPU5zVvC9rquq
/bZ4Z5CAg2C7kWJwvI3Rhgjc/wB4Gqv/AAhenjU31AWLCZ5RO6C4cRNKAAJD
Fu2F+B8xXOQDnIrraK+frcO0KtSVR1ZpybejVtXe22xqqzStZHHR+BdNi0q6
0wWc7WlzL58qPeSuTJuDbgxcsp3AHII55qsnw40hL1bwW181wsyziR9UuGJk
UbQxzJyccc9uOld1RULhqir2rVNd/eWv4D9s30R5rffD6e1uLd9Fsy8S+c0i
S61dW8m+QoWYSoXJB2cqRjPPWu28O6fc6XoVvZ3dxJPMm4s8khkIyxIXc3LA
AgAnkgc81qUV6OCyunhJc8Zyk7W953637f11InNy3CiiivSICiiigAooooAK
KKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAoo
ooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiii
gAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKA
CiiigAooooAKKKKACiiigAooooAKgvP+PY/UfzqeoLz/AI9j9R/OgCsKen+s
T/eFMFPT/WJ/vCgDN8Gf8itbf9dZ/wD0c9b9YHgz/kVrb/rrP/6Oet+gAooo
oAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiig
AooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAC
iiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKK
KKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooo
oAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiig
AooooAKKKKACiiigAooooAKgvP8Aj2P1H86nqC8/49j9R/OgCsKen+sT/eFM
FPT/AFif7woAzfBn/IrW3/XWf/0c9b9YHgz/AJFa2/66z/8Ao5636ACiiigA
ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACi
iigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKK
KACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAoooo
AKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigA
ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACi
iigAooooAKKKKACiiigAqC8/49j9R/Op6gvP+PY/UfzoArCnp/rE/wB4UwU9
P9Yn+8KAM3wZ/wAitbf9dZ//AEc9b9YHgz/kVrb/AK6z/wDo5636ACiiigAo
oooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACii
igAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKK
ACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA
KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAo
oooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACii
igAooooAKKKKACiiigAqC8/49j9R/Op6gvP+PY/UfzoArCnp/rE/3hTBT0/1
if7woAzfBn/IrW3/AF1n/wDRz1v1geDP+RWtv+us/wD6Oet+gAooooAKKKKA
CiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK
KKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAoo
ooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiii
gAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKA
CiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK
KKKACiiigAooooAKgvP+PY/UfzqeoLz/AI9j9R/OgCsKen+sT/eFMFPT/WJ/
vCgDN8Gf8itbf9dZ/wD0c9b9YHgz/kVrb/rrP/6Oet+gAooooAKKKKACiiig
AooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAC
iiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKK
KKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooo
oAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiig
AooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAC
iiigAooooAKgvP8Aj2P1H86nqC8/49j9R/OgCsKen+sT/eFMFPT/AFif7woA
zfBn/IrW3/XWf/0c9b9YHgz/AJFa2/66z/8Ao5636ACiiigAooooAKKKKACi
iigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKK
KACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAoooo
AKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigA
ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACi
iigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKK
KACiiigAqC8/49j9R/Op6gvP+PY/UfzoArCnp/rE/wB4UwU9P9Yn+8KAM3wZ
/wAitbf9dZ//AEc9b9YHgz/kVrb/AK6z/wDo5636ACiiigAooooAKKKKACii
igAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKK
ACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA
KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAo
oooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACii
igAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKK
ACiiigAqC8/49j9R/Op6gvP+PY/UfzoArCnp/rE/3hTBT0/1if7woAzfBn/I
rW3/AF1n/wDRz1v1geDP+RWtv+us/wD6Oet+gAooooAKKKKACiiigAooooAK
KKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAoo
ooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiii
gAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKA
CiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK
KKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAoo
ooAKgvP+PY/UfzqeoLz/AI9j9R/OgCsKen+sT/eFUrjUrGzkEdzeW8LkZCyS
BSR64NWoJY5vLkidXQtwynINAFDwZ/yK1t/11n/9HPW/WLBbXVlCttbz2kcS
ZAVLVwOvP/LXucmpN2of8/lt/wCAr/8Ax2gDWorJ3ah/z+W3/gK//wAdo3ah
/wA/lt/4Cv8A/HaANaisndqH/P5bf+Ar/wDx2jdqH/P5bf8AgK//AMdoA1qK
yd2of8/lt/4Cv/8AHaN2of8AP5bf+Ar/APx2gDWorJ3ah/z+W3/gK/8A8do3
ah/z+W3/AICv/wDHaANaisndqH/P5bf+Ar//AB2jdqH/AD+W3/gK/wD8doA1
qKyd2of8/lt/4Cv/APHaN2of8/lt/wCAr/8Ax2gDWorJ3ah/z+W3/gK//wAd
o3ah/wA/lt/4Cv8A/HaANaisndqH/P5bf+Ar/wDx2jdqH/P5bf8AgK//AMdo
A1qKyd2of8/lt/4Cv/8AHaN2of8AP5bf+Ar/APx2gDWorJ3ah/z+W3/gK/8A
8do3ah/z+W3/AICv/wDHaANaisndqH/P5bf+Ar//AB2jdqH/AD+W3/gK/wD8
doA1qKyd2of8/lt/4Cv/APHaN2of8/lt/wCAr/8Ax2gDWorJ3ah/z+W3/gK/
/wAdo3ah/wA/lt/4Cv8A/HaANaisndqH/P5bf+Ar/wDx2jdqH/P5bf8AgK//
AMdoA1qKyd2of8/lt/4Cv/8AHaN2of8AP5bf+Ar/APx2gDWorJ3ah/z+W3/g
K/8A8do3ah/z+W3/AICv/wDHaANaisndqH/P5bf+Ar//AB2jdqH/AD+W3/gK
/wD8doA1qKyd2of8/lt/4Cv/APHaN2of8/lt/wCAr/8Ax2gDWorJ3ah/z+W3
/gK//wAdo3ah/wA/lt/4Cv8A/HaANaisndqH/P5bf+Ar/wDx2jdqH/P5bf8A
gK//AMdoA1qKyd2of8/lt/4Cv/8AHaN2of8AP5bf+Ar/APx2gDWorJ3ah/z+
W3/gK/8A8do3ah/z+W3/AICv/wDHaANaisndqH/P5bf+Ar//AB2jdqH/AD+W
3/gK/wD8doA1qKyd2of8/lt/4Cv/APHaN2of8/lt/wCAr/8Ax2gDWorJ3ah/
z+W3/gK//wAdo3ah/wA/lt/4Cv8A/HaANaisndqH/P5bf+Ar/wDx2jdqH/P5
bf8AgK//AMdoA1qKyd2of8/lt/4Cv/8AHaN2of8AP5bf+Ar/APx2gDWorJ3a
h/z+W3/gK/8A8do3ah/z+W3/AICv/wDHaANaisndqH/P5bf+Ar//AB2jdqH/
AD+W3/gK/wD8doA1qKyd2of8/lt/4Cv/APHaN2of8/lt/wCAr/8Ax2gDWorJ
3ah/z+W3/gK//wAdpC+oAqPtlvycf8er/wDx2gDXorJ3ah/z+W3/AICv/wDH
aN2of8/lt/4Cv/8AHaANaisgvqAKj7Zb8nH/AB6v/wDHaXdqH/P5bf8AgK//
AMdoA1qKyd2of8/lt/4Cv/8AHaQvqAKj7Zb8nH/Hq/8A8doA16Kyd2of8/lt
/wCAr/8Ax2jdqH/P5bf+Ar//AB2gDWorIL6gCo+2W/Jx/wAer/8Ax2l3ah/z
+W3/AICv/wDHaANaisndqH/P5bf+Ar//AB2kL6gCo+2W/Jx/x6v/APHaANei
sndqH/P5bf8AgK//AMdo3ah/z+W3/gK//wAdoA1qKyC+oAqPtlvycf8AHq//
AMdpd2of8/lt/wCAr/8Ax2gDWorJ3ah/z+W3/gK//wAdpC+oAqPtlvycf8er
/wDx2gDXorJ3ah/z+W3/AICv/wDHaN2of8/lt/4Cv/8AHaANaisndqH/AD+W
3/gK/wD8do3ah/z+W3/gK/8A8doA1qKyd2of8/lt/wCAr/8Ax2jdqH/P5bf+
Ar//AB2gDWorJ3ah/wA/lt/4Cv8A/HaN2of8/lt/4Cv/APHaANaisndqH/P5
bf8AgK//AMdo3ah/z+W3/gK//wAdoA1qKyd2of8AP5bf+Ar/APx2jdqH/P5b
f+Ar/wDx2gDWorJ3ah/z+W3/AICv/wDHaN2of8/lt/4Cv/8AHaANaisndqH/
AD+W3/gK/wD8do3ah/z+W3/gK/8A8doA1qKyd2of8/lt/wCAr/8Ax2jdqH/P
5bf+Ar//AB2gDWorJ3ah/wA/lt/4Cv8A/HaN2of8/lt/4Cv/APHaANaisndq
H/P5bf8AgK//AMdo3ah/z+W3/gK//wAdoA1qKyd2of8AP5bf+Ar/APx2jdqH
/P5bf+Ar/wDx2gDWorJ3ah/z+W3/AICv/wDHaN2of8/lt/4Cv/8AHaANaisn
dqH/AD+W3/gK/wD8do3ah/z+W3/gK/8A8doA1qKyd2of8/lt/wCAr/8Ax2jd
qH/P5bf+Ar//AB2gDWorJ3ah/wA/lt/4Cv8A/HaN2of8/lt/4Cv/APHaANai
sndqH/P5bf8AgK//AMdpN+obiv2y3yAD/wAer/8Ax2gDXorJ3ah/z+W3/gK/
/wAdo3ah/wA/lt/4Cv8A/HaANaisndqH/P5bf+Ar/wDx2jdqH/P5bf8AgK//
AMdoA1qKyd2of8/lt/4Cv/8AHaN2of8AP5bf+Ar/APx2gDWorJ3ah/z+W3/g
K/8A8do3ah/z+W3/AICv/wDHaANaoLsZgI9SP51Q3ah/z+W3/gK//wAdpD9v
YYa7tiPQ2r//AB2gAu9Ntr3y/PjDNG25W7j1/OrMaBGjVQAAwAAqpsvP+fi0
/wDARv8A47TkS93rtubQHPH+iN/8doAwtV1DXpfFN3p2ky6dGlvZx3O26t3c
yszyLt3K42D5Bztbr0PSiHxtpH9m2N1dSSwPc2y3LxpDJN5CngmRkUhFByNz
YB2n0NTanoepTeI7jUtP1WC0We2S1lV7QyuAru25G3gK3zn7ysOBwelU7jwh
JGTHpWorZ28tilhcJLB5zNEm7aUbcNr4d+WDA8cccpbf15/8AvS/9eX/AAS/
L4s0WHUzp73b/aFlSFtsEjIjuAUDOF2ru3DGSMngcg1Yt9f0661N9PhmkadC
y7vIkEbMv3lWQrsZh3UEkYPHBxl3XheFbbUUN8sMV3eWtwpZP9WIfKAXJbnP
ldeMZ6HHNPSPDtno/iC41GFbF45ZpZhI2jt9rUyEkgXAPK5Jx8uccZ71SV/6
9P8Agkt2Xn/VzsqKrR39tLIIxJtc9EkUoT9AwGas0mrAnfYKKKKQwooooAKK
KKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooo
oAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiig
AooooAKKKKACiiigApj/AH4/97+hp9Mf78f+9/Q0APooooAY/wB+P/e/oafT
H+/H/vf0NPoAKY/34/8Ae/oafTH+/H/vf0NAD6KKKAGP9+P/AHv6Gn0x/vx/
739DT6ACmP8Afj/3v6Gn0x/vx/739DQA+iiigBj/AH4/97+hqjBo9nqF5qE1
xGGcThQSqnjy0PcH1q8/34/97+hqCM3trPdGGC3kjmkEgLzFCPkVcYCH+760
0JmFqFv4Zt7lY5Q2ZMqGjKgHAOcAYJxu5IB7dwMbGmEHSdOwQf3SD/xyuF1r
w7qU2t6WXs2nS2EoVkLHBZQowRhe3JbHtXb6RYvpulWdrK++RSS57bm3MQPY
E4HsK8/CYivVm1VjZL8Hfbz01OmtSpwinB3ZzWveIYJfFA0O5uJreziVTM0K
ks7EZAyBwBkVh/bV0u/mnsLto/LRpdhI2vgj5SM49u/rV7xx4SvbjWk1zTrY
XZZQtxbkZJxwGA78cY9qyLTwreavdpjTZrWNhtkM0bRKo45AOPfjpXsxUEnG
Laclvo0n2seBWVf29lfun09D0LV9Xnh8GXWtWBhE0dkbuLzkLocJvwQCDyOO
tRReLdLinisLu7Jvw0UUxjtZRGksiqVBbBVN24bctz0ySDVrVNHa98L3Oi2s
6W4mtTarK8fmBFK7SdoIzx71nHwnJJaX0Ut+pku7q1uWdYMBTCIsgDcfveV6
8bu+OebS77f8H/I9fovn+n/BF07xtp17p1xeTQ3duIruS1WM2kzPKyswGxdg
ZiQpJVQSvOehqzJ4v0SL711Lxam8bFtKfLiG7LPhflxsYYbByMYyQKyr7wMb
6zktpbuzmjTUX1C2S5sPOjBcuXSVS+JB+8OMbCMA84qdfBv+hahb/aLSD7Zp
f9nbLOz8mKLmU71TecD9793Pbrzwun9dv8x6X8v+D/kaEHi3Rbi3up0u3CWo
RpN9vIjEOcIUVlBcMRhSoO48DNVV8Z2E2u6dpsFvev8AbElYyNZzoYmRlG1l
KfLndklsYG0nhgai1nwZFrIuxLdKBPaW8Cq8AdQ0MjSKzKThlJYArxwDzzwa
f4Um066025gl0m2a0MyvFZaYYIpI5NmcKJDtf92PmyR7U1a5Otv67GvDqEsn
iS804qnkw2kE6sAdxZ3lU55xjEY7etYFh4k1d9Wt/tTWL2N1qV1YRwxQOs0f
lGTDli5DDEfOFXG4VsW8Eq+M9RnMTiF7C2RZCp2lhJOSAemQCOPcetN0Xwvp
+jXF5dpb2z391PNK92tuqylZJC+wt1IGQOvYcCl5+RUuqXl+X+ZGvjTQ5LKC
7inuZYrgnyRFYzu8gABLKgQsVGRlgMAnBOeKjg8Z6bPrc1ipf7NHYpei+8t/
JKNuJJfbtAAXO7dgkkdVNQw+FLuwstGGm6pFFe6baNaebPamSOWNtucoHUg5
RSDu9eDnhreCU2S2y3x+xXGljTrlGizI4G8h1cEBTmQkgqR0xih+X9b/APAD
T+vVfpc0V8VaQ1k90ZbhER1j8uSzmSVmYZULEyB2zzjaDnB9DVeHxjYy67Pp
zw3UEUNkl41zcWs0Sqp3E7t6AIAFzknkkjqDVCy8Ey2NnCLabR7S9tp0ngns
tI8hGYIyHzUEnz5V2HBXGeKuXvhe41K4uXvdQhKX2m/YLxYrYqWxvIeMlzs5
kPBD9BzQ/L+tP8xLz/rX/ItDxbo/2Nrky3KqJFiET2UyzOzDICxFN7ZAJyFI
wD6HFGHxPPceCtY1yJYGktDeeQNjBWETOE3AnPIUZ6d+lV7LwXc6faQizuNG
s7y3nWaKaz0fyUchGRhKgl+fIc8grg/lWhB4ZkTwpqWiy3/myX/2ktc+Tt2m
YsSdue2715xQ+tv62HF7X76/j/wDN1Txld2ngJtWgtoW1YK8f2d87BLGGMme
c7QqOw55AHPNbJ8U6VDdRWdxcMtw3lq5WCRoo3cDaryBSiE5GAzAnI9RVK88
GQ3b6k4vHQ3tg1qFKApG7IEaUDPJKrGMZ/h9zQ/hS4N3cLHqSLp13NDPdQG2
zIzxqg+STdhVIjTIKseuCMjD0uT0X9dh174ttV1vT9NsZBLJLfG1nZoZNgAj
dmCSYCswZQCATjkEA1bh8WaLcHCXUmC6Ro720qrKXbYpjYqA6liBuUkcjnkV
QXwndjULYtqyNp1rfSXsVt9lw+ZBJuVpN/IBkYjCg9jnrUGgeCZfDqiOwudL
hVSiieHSlS5kiVwSksm/DkqMFtoOeetEel/6/r5jl1t/W/8AXQ19Y1C/TULP
S9K+zpd3KvK09zGzxxRptBO1SpYkuoA3DqT2wakPimKwjng12RI7uC7FoGtY
XYXDNH5iFEG5gSuflyTkYBORm/q2kz3lza31hdpaahah1SSSHzY2R8bkdQyk
j5VIwwIKjtkGlF4XcTWt1cagZrxL/wC33EnlbVkbymiCKufkUAjHLHjkkkmk
v6+//IH/AF/XqbGnalaatYpe2UpkgcsASjIQQSpBVgCCCCCCAQRVqs/R9L/s
m2nh87zfNup7nO3bjzJGfb1PTdjPfFaFABRRRQAUUUUAFFFFABRRRQAUwf65
v90f1p9MH+ub/dH9aAGXTvFZzyRjMixsyj1IHFefw3eqnxOI3sQIzZ+dkXKF
iu/H2nd1Ax/yzz+FejVmX2g2V7a3EJRk85GXKuwAJ77Qcdea2pVVTTvG9zKr
Tc7WlYmLXdzpCPBLHBdSRKweSPzFUkAn5QRnv3/wrlLLVNY1jR/DNsmpyWt3
f2D3c95HFEXYoqDAVlKjLSAnC9Bxit3S9M1WHQn0++1JlnDFYbq22s6x8Yzv
UgnqOQePeqtv4NittIsrCLWNTVrIFILkGESpGVCmPiPaVIA6qTkA54FYK7T/
AK7/APANtmc/Y+K9W1Kyj1wXPkwW8tjBLZIiFJTMI/MYkguMecNuCB8vOc1o
XWqa3pupXgvbl7e2m8xYprlrcQQqGBWRNvz7VTJbzeC20Dg1rL4Q06O5t2hk
uIbWHyT9iRl8mRov9WzZBbK4XowB2jOcVb1DQ4NReaSS4uEldY1jkQrmDYwc
FAVIzuCk5BB2jPAxVO3QRetLiC6s4Z7a5S5hkUFJo2DLIPUEcH8Kmqpptgmm
2K2ySyTYZnaWXG52ZizMdoAySSeAB6CrdD3EjlPEXj2z8NatDp15pOrSyXGP
s728KOs5OBhPnBJBIGMZ5HYgnqIXaWGOR4niZlDGNyCyEjocEjI9iR70PDFK
8byRo7RNvjLKCUbBGR6HBI+hNPpDCnR/6xPqKYzKiM7EBVBJJ7Co1kDXUalk
+WcAAOc/cz07nn8vegDzk+LNWJydUuf+/dv/APGqxtW8c+JGvrXSdI1OT7fc
HJeWGBliQdWP7r0rm/7V/wBr9azdFvg13rGos6+czLbpk8qg64/ECtacOaVj
GpPljc9NuvFkljBGJrqS9uVGGuGRVZz3wqgBR7D8c1Sj8V3ch3PBIqddxNch
p17BcXpaUyS7cAJEhdj+Arq5rixvLWPS4FnhvruVIVhnhaN9jH5mGRyAoPIr
ixuIxFGso04Pl0u7afedmFhhJYbnqyvN30vr9xpR+JlaPZIwZD1RxkfkazNb
8Ya7pUkOoWGrSyaRuCXFv5UTvAT0IZkJI+ucdO4q74g0mEIzBBkDjiuDtLmO
aa7s5JF+zOjQtk9Pf8Dz+Fb4XFLFNxUbW3PKc3CVmehL4t1R0V11W4KsMgiO
35H/AH6pf+Er1b/oJ3P/AH7t/wD41XnGlakyaVArtymU6+nP9atf2r/tfrVt
WdjsTvqd7/wlerf9BO5/792//wAao/4SvVv+gnc/9+7f/wCNVy+iR/2rJPJL
OILS2TfPKTjaKki1LT9SSePSZVjaLlRMFd5gM55PCjA4GM+p9BRlOap01eT1
t2Xn/V/K2pnKtGCcp6JdfP8Ar5HSf8JXq3/QTuf+/dv/APGqP+Er1b/oJ3P/
AH7t/wD41XBDWFlAkUgK3zAA9Aa0WuUW4nQWzlIpXjBN2AW2sVzjyzjpWlKj
Or8CKnUjD4mdZ/wlerf9BO5/792//wAao/4SvVv+gnc/9+7f/wCNVhWgtbuS
NPsl3HvYKX+1qwGTjp5YrFtL8XF5BCWIEkiocHnk4oqUZ03aasKFSM9Ys7f/
AISvVv8AoJ3P/fu3/wDjVH/CV6t/0E7n/v3b/wDxquXWO+Omx366XLNHJCky
RxXEm5lbHQ+RtJG7nBPQ+hrPttdtbu8ks/7Nu7WVEkLGS7D7WRScFfKU9Rjr
VLDVGm0the2he1zuP+Er1b/oJ3P/AH7t/wD41R/wlerf9BO5/wC/dv8A/Gq4
L+1f9r9aP7V/2v1rA0O9/wCEr1b/AKCdz/37t/8A41R/wlerf9BO5/792/8A
8arPsfEHh9ItOF5JaySJbv8Aa2S1bDp/DEBgZm/6aAqB3LVysmqxmVzFuWMs
dqs24gdgTgZPvgUAegW/iDXrppPJ1CXbGQrNJ5CfMQGwMQHPBHp1qf8AtXxH
/wBBEf8AfyL/AORq4yx1gRQyjd1kB/8AIUdeh+CEtNW0ueWeJJCJ9gYgEjgH
+tZ1KnIrlJXM/wDtXxH/ANBEf9/Iv/kaj+1fEf8A0ER/38i/+Rq17tLNvD1z
OlrGtwiNtKLySK4CPWWlkWOPLuxCqq8kk9ABUUK6rK6HOLjudR/aviP/AKCI
/wC/kX/yNR/aviP/AKCI/wC/kX/yNWGJNTa6a1XT7w3KrvaEQtvC+pGM4qL7
befYzefZp/soO0z+Wdmc4xu6da3JOh/tXxH/ANBEf9/Iv/kaj+1fEf8A0ER/
38i/+RqwhJqZuRbCwvDOV3iIQtuK5xnGM4zxmpZmu49PhvEinkjaNnlKxHEO
HZfmPb7p64oA2P7V8R/9BEf9/Iv/AJGo/tXxH/0ER/38i/8AkauV/t0f3v1o
/t0f3v1oEdV/aviP/oIj/v5F/wDI1H9q+I/+giP+/kX/AMjVyv8Abo/vfrR/
bo/vfrQB1X9q+I/+giP+/kX/AMjUf2r4j/6CI/7+Rf8AyNXK/wBuj+9+tH9u
j+9+tAHVf2r4j/6CI/7+Rf8AyNR/aviP/oIj/v5F/wDI1cr/AG6P7360f26P
7360AdS+reJFQlb7ewHCrJDk/TNsBVSPxVrE3k+RqFy7TbfLDJbr1UtyfKOO
AfWsSLXAZk+b+Id6x9P1PY1kd33VT/0Q9AHf/wBq+I/+giP+/kX/AMjUf2r4
j/6CI/7+Rf8AyNWX4Z1GO/8AENpayAOjlsqeQcKT/Su8mtdPi1JIDaQlHi3/
AHR8pyen5VzVsSqUrNFxg5HL/wBq+I/+giP+/kX/AMjUf2r4j/6CI/7+Rf8A
yNWRr+opYa3c28Y2RqwKD2I7VFNdSx2VtcozSLNC0zbV/wBWocpkn0yBz71v
CSlFSXUlqzsbn9q+I/8AoIj/AL+Rf/I1H9q+I/8AoIj/AL+Rf/I1c/Dd31xO
IILS4lmKCQRpEzMVPIbAHTkc+9ILy8NrJdC2uDbxtteXyzsU+hPQHkfnVCOh
/tXxH/0ER/38i/8Akaj+1fEf/QRH/fyL/wCRq5+4ur60jWS5tLmFHYqrSRMo
YjqASOtNu7+6sJBHeQTW8jDcFmQoSPXB7UAdF/aviP8A6CI/7+Rf/I1H9q+I
/wDoIj/v5F/8jVyv9uj+9+tH9uj+9+tAHVf2r4j/AOgiP+/kX/yNR/aviP8A
6CI/7+Rf/I1cr/bo/vfrR/bo/vfrQB1X9q+I/wDoIj/v5F/8jUf2r4j/AOgi
P+/kX/yNXK/26P7360f26P7360AdV/aviP8A6CI/7+Rf/I1H9q+I/wDoIj/v
5F/8jVyv9uj+9+tH9uj+9+tAHQt4k1yO4aCXUJ0kG0jaLdlYNnBB8kd1PbtU
lvrniG6t450v2WORQyeY0IYqehIFucce9cdcar5moRtu6iEf+Py1NZ60E0+0
Xd0t4x1/2BQB2H9q+I/+giP+/kX/AMjUf2r4j/6CI/7+Rf8AyNWDa3yTWdxf
3V19nsLbh5BjLN/dGe/T86qnxBHdWct5aTKkduNz27FWYpxyzc8+wx19uRRl
KXJTXM0rvyXn5+W5m60I6z0V7X7v+uux1H9q+I/+giP+/kX/AMjUf2r4j/6C
I/7+Rf8AyNXP2mofbI7nZMBLDGZVjx98D72D6gc/QGrEjXv2hre3hnuZoo1e
dYoi3lEjODjPT+efSg1Nj+1fEf8A0ER/38i/+RqP7V8R/wDQRH/fyL/5GrGk
kuhpsF9Ek00MkRkkZIyViAdl5I/3faq7Xt4lkt61tOtqxws5jIQn2bpQI6H+
1fEf/QRH/fyL/wCRqP7V8RHH/ExXj/ppF/8AI1Y0D3r3VlHPBPbx3kipFLJE
QrbiORnGeuadpEravPcwxzhHhiMigjO87goXrxksKANf+1fEf/QRH/fyL/5G
o/tXxH/0ER/38i/+RqyLKR7vSr6/M4jS1UEKRkyHIBA9MZGfqKiM95DKiXVr
eQ+YjPGDAcsAM5AOMj1PYc0DNz+1fERx/wATFeP+mkX/AMjUf2r4j/6CI/7+
Rf8AyNWSsq/2xY2D3JH2pYmDhM7TIoI4zz19ahknvAk08VtdSWsZJ8/yTt2g
kZJGQOh79jQBuf2r4j/6CI/7+Rf/ACNR/aviI4/4mK8f9NIv/kase2e6nsZ7
2RJoraOIypKYjtkwyqQD07/pVK51f7PcyQkyKUYriVNjD6rk4PtQI6X+1fEf
/QRH/fyL/wCRqiuNd8QWyq8l/IYy6oWiMDFSxwODAOMkCua/t0f3v1qK51kS
2+zd1li/9GpQBe1j4iappbRRJc3d1cuvmBP9GRVXJAJbyT1IbHHY1k/8LZ8R
/wDPtN/4F2//AMjVyGt3fm6tE+etnGP/ACJLVSAyXE6QxDdI7BVHqaaTbsgc
lFXZ3X/C2fEf/PtN/wCBdv8A/I1H/C2PERx/o0vH/T1b/wDyNUD+GdK0mW1t
9Uv2fUJsEWynag/3m6gfqfaud12H+zr42zQxxSLz+6csjofusNxJ55qU3K7i
rxWl1tf1/wAtCVUi2k3ZvWz3sdT/AMLZ8R/8+03/AIF2/wD8jUf8LZ8R/wDP
tN/4F2//AMjVzltoNzPaQ3kl1a29pJbtcNNKXIjQSGP5gqk5LDAAB69ucT2f
hqa9iV4tU0797cta2yl5P9IkCq2FOzAzuXG4rycHFMs3P+FseIjj/RpeP+nq
3/8Akaj/AIWz4j/59pv/AALt/wD5GrlNL06TU5btTdW9olpCZppLjfhVDKvR
FY5yw7VDqlpNpN81rM8bkKrpJE2UkRgGVlJxwQQelAHY/wDC2fEf/PtN/wCB
dv8A/I1H/C2PERx/o0vH/T1b/wDyNXBefR59AHe/8LZ8R/8APtN/4F2//wAj
Uf8AC2fEf/PtN/4F2/8A8jVwXn1sWmg319eWttA0LNdWpuo2LELtG7gnHXKl
frj60eYHS/8AC2fEf/PtN/4F2/8A8jUf8LZ8R/8APtN/4F2//wAjVyDWbRab
DezXMEazq7RRtuLvtYKcYUgck4yQPlPtmj59AHe/8LZ8R/8APtN/4F2//wAj
Uf8AC2fEf/PtN/4F2/8A8jVxr20yaRFqZaPyZZ3gVcnduVVY9sYww7+tVPPo
A74fFnxADl7ecL3K3NuT+X2aujtPGupX1hBeW2o3jJMo2IY7YNuLbNp/dY4b
g14959dF4ZvvJ0XT1z0k3f8Ak2aAPUhqviPHOogH/rpD/wDI1H9q+I/+giP+
/kX/AMjVh6PqaXusWltIcpLKFIz2r0PU7HRdPhBNqpdum6RgoAxkk54AyPzA
6mlKUYR5pPQcYynLljucx/aviP8A6CI/7+Rf/I1H9q+I/wDoIj/v5F/8jVo+
Lrew0zQory1hMTO6j5ic4I6EHpXL6de2V5bXEkt7cRPbxGWRUt1cbdwXg7xz
8w7U/MnW9jX/ALV8R/8AQRH/AH8i/wDkaj+1fEf/AEER/wB/Iv8A5Grn1vbq
W2lu4Le4ktIyQ04iO0fUjIHUd+9PSbUpI0kSwu2RyFRhCxDEjIAOOcg5oA3f
7V8R/wDQRH/fyL/5Go/tXxH/ANBEf9/Iv/kasCO5v5bx7OOzuXukGXhWJi6/
VcZHWlSfUJIRMlldNEX8sOImKls425x1zxigDe/tXxH/ANBEf9/Iv/kaj+1f
Ef8A0ER/38i/+RqwdTurnSL+SzvFKSoe4IDD1GQMj3qn/bo/vfrQM6r+1fEf
/QRH/fyL/wCRqP7V8R/9BEf9/Iv/AJGrlf7dH979aP7dH979aBHVf2r4j/6C
I/7+Rf8AyNR/aviP/oIj/v5F/wDI1cr/AG6P7360f26P7360AdV/aviP/oIj
/v5F/wDI1H9q+I/+giP+/kX/AMjVyv8Abo/vfrR/bo/vfrQB0M/iPXbaYRz3
8y7kLq0YgdSAQD1hBB+Ydu9R/wDCV6t/0E7n/v3b/wDxquV1HV/M8tt33YpP
/QoqowXs11OkFujSyucKiDJJ+lAHcf8ACV6t/wBBO5/792//AMapD4s1VQSd
UuAB3Mdv/wDGq5PVkn0W4S3upoTcFA7xRvuMWegbsD3xk1tfD6XTr/xDP9vE
crwwq9tFJyC2TubHcjC/TNFgNE+LtUG3Oqz/ADdPkt+f/IVO/wCEr1b/AKCd
z/37t/8A41Xd6nJp97p00F9HE1uUO7cowo9a8X02eEazPA77reFiVDc5GB8p
+jEj8MU4q7sgk7K51x8U6wqbzqV0F9TFb4/9FUn/AAlerf8AQTuf+/dv/wDG
qrwXdhqF80E1vNcjynYJD2YDgt6L6muT1Zxo+sR2sbgw3FnDdqofcIy6gsoP
cZJwfStpUbIyjVuztP8AhK9W/wCgnc/9+7f/AONUx/F2pRKZJNWnRR1ZktwP
z8quF/tX/a/WtK11O0077DqFzqF9FLPb3DxLaWqsYs+dbhvMMqnIILcKOwz3
rOFOU5csS51FCPNJnSL44u3YKuuszE4AH2Ykn/v1U/8Awlerf9BO5/792/8A
8arClOuWlq93Pq2t3mlXWmXXF4zrljDIqgoJHBGdpznjPbGaj8J6ZL4r1j7I
bswW0bR+cUX5yrCQnac8f6sDofvZ7VdSjyNWd01czoV1Wi2jfTxfqcm7Zq07
bTtOEtzg+n+qp3/CV6t/0E7n/v3b/wDxqsPxPpzaZ4q1K20zTzFYpNFFCIkw
pYwR/KP7zE545JOawZNQkhkaOVWjkQlWRwQVPoQelc6lFuyZ1yo1IRU5RaTO
6/4SvVv+gnc/9+7f/wCNUf8ACV6t/wBBO5/792//AMarkdHkTVdVt7J7xLbz
nVA7KzZJIAAA7898D3p+npNf6rDZhnWKS5W2M4QlVZjgfjwTjParsZXOr/4S
vVv+gnc/9+7f/wCNUf8ACV6t/wBBO5/792//AMarmrj7HZ6o1pd3OoWyqoyJ
rHbLuJ/ub+mOc5/Cql001vrUulq6yzJOYAUPDNnHFJajem52H/CV6t/0E7n/
AL92/wD8ao/4SvVv+gnc/wDfu3/+NVhppofxHDpf9op5EsTSpdBPlKqrEnGf
VGHXtmodM0+4v7zULaaYW5sY5GkLLnLqCdg6cna34AmgNTov+Er1b/oJ3P8A
37t//jVH/CWasDkapc/9+7f/AONVwX9q/wC1+tH9q/7X60CPO/tdx/z3l/77
NWLH5o5snLLKSc+jcis7cPWrNncCGcSY3RkbZUHUr6j3Fb4eahNN7GGJg502
o7noXhydbFId2AT8xz7/AORXoVuLTxVqVva3aGSzsbdpSAxUiVztQgjkEBWP
HrXmWn6bDcRiTf5yN92QHOf8K6nR31LQ0l+yKksUpBZXzngYGDXfmVHEVMK/
q6vPpqeFg8Xh6GJ/fytF76G94g0i3sNMuJ5NX1WaOKMlY5LgfgCQAx/OvGpb
c7kB6k5J/nXoOs6nqWpwtbS26xRsQThixOO1cdfokTshdQ2P3jZ4jX/GvOyj
CYjCUJ1MZpJvbTb5dz0cZicPiq0aeD1SW/8AXRGHfTyxRQokjpnc+AxHXA/p
VL7Xcf8APeX/AL7NNu7oXNy0g4Xoo9AKg3D1qG7u56SVlY9DhvVXwppOkL5r
Jelrm6kUFtwViApPoCMn6CoLxbTTbV5LjxRNdykZjhtW2n6E8/59elcUl/dR
wGBLqZYT1jWQhT+HSoNw9a0wVeWGhKKW7bvd9e/ey0RzYrCLEVFLmskkrWT+
7tfqWRdTKMLNKFHAG88CvXLnR542u7iC01O5c3DtsitWOQzscrxggcd+c5Aw
K8a3D1o3D1qqNedFtw3ZrVpKokme1adfXEd3bwPomqx7pFUvJbFQvI5PoK8u
0C6nbxHpimaQg3cQILnn5xWNuHrRuHrSq151WnN3HTpRpq0T2XwbJc/YP7M1
/RNVNqg3x3q2LzSRABR5aBo2AU457cfSo/FcOnm5Nxo9rqCqtnePcT3Nl5Lb
zEcZIRQe/XnJNePbh60bh61q8Urtpb+ZmqHmWftdx/z3l/77NH2u4/57y/8A
fZqtuHrRuHrXIdBZ+13H/PeX/vs0fa7j/nvL/wB9mq24etG4etAGpc3tyioF
uZhkKThyP+WaV7J8HdSdfCF8JJmeT7c2NzZIGxP/AK9eJttuFUh0A2rwXUEE
KF/iI/u549adB51rKJLe7aGQdGjnRT+YesMRSdWHKnYqEuV3Z9JQ3wt7Nnkw
Yxu3bjgAHjP4dfwr510vWbuy1W1uTqN1AIpA/mIolK47hGIVvoTg1VkjeaQy
S3Adz1ZpoyT+O+m/Zh/z0T/v5H/8XWeDwrwyave5VWftGd5beOdKtH1C3tDd
WkFx5Ei3P2GK4Pmpu3fuJZGVA28kbX4K8cHAibxtYL4fvrWOW9N7dwukjm0i
XzJDNv8ANMgYuoKgDy1+UH161xH2Yf8APRP+/kf/AMXR9mH/AD0T/v5H/wDF
11mZ2N54xstVvdfjubnU7W01G6S5hnhRZJU2bgEZC6gqQ3ZuCo61HaeNI7Zd
IiafUHhsrK7t5QT99pfN2tjdj+NM5/u98CuS+zD/AJ6J/wB/I/8A4uj7MP8A
non/AH8j/wDi6VtLf1tb8hi/b7z/AJ+5/wDv4aPt95/z9z/9/DSfZh/z0T/v
5H/8XR9mH/PRP+/kf/xdMQv2+8/5+5/+/ho+33n/AD9z/wDfw0n2Yf8APRP+
/kf/AMXR9mH/AD0T/v5H/wDF0AL9vvP+fuf/AL+Gj7fef8/c/wD38NJ9mH/P
RP8Av5H/APF0fZh/z0T/AL+R/wDxdAC/b7z/AJ+5/wDv4aPt95/z9z/9/DSf
Zh/z0T/v5H/8XR9mH/PRP+/kf/xdAEtvf3f2mL/Sp/vj/lofWrP2qdYcieQE
JFjDnj9w1Ulh8tg4kQlTkZlj/oxp3nRvviV14CAEnAbahQ9enXPNAHVfDTUJ
x8QtKM1zIUzJkPISP9U+K9yu7xpNTVwc4jwPzr5g+zYORKn/AH9j/wDi6nmk
urmNEnvpJUQYVXuEYL9MvxXBi8G68k1KxtTqKHQ7P4q6lK/iuAQzPFts0V0S
T+IM/Jx3IwfxqnZeMLQaXbaddzahGn9my2c80Sh2V2n81WVS67uAAckdT+PI
/Zh/z0T/AL+R/wDxdH2Yf89E/wC/kf8A8XXZThyQUP66/wCZk3d3O1vfF+l3
8V1p5udWtrKSC0WO5jjV5d8CbCGTzACrZJ+9wQOtR/8ACbRnwrBpsd9d29zb
wy2+Rp8Ev2hWZmBMrMJIidxBC7umRXHfZh/z0T/v5H/8XR9mH/PRP+/kf/xd
XcXY7k/EOJda1LUAt5Mk2rW19bxSsABHGXyp5O0kMoGMjj2rH8UeJjqk0P2L
VLuWFC5CPYQ2ezcR/wA8WIc8ckgdPeue+zD/AJ6J/wB/I/8A4uj7MP8Anon/
AH8j/wDi6Vv6+Vv0AX7fef8AP3P/AN/DR9vvP+fuf/v4aT7MP+eif9/I/wD4
uj7MP+eif9/I/wD4umAv2+8/5+5/+/ho+33n/P3P/wB/DSfZh/z0T/v5H/8A
F0fZh/z0T/v5H/8AF0AL9vvP+fuf/v4aPt95/wA/c/8A38NJ9mH/AD0T/v5H
/wDF0fZh/wA9E/7+R/8AxdAC/b7z/n7n/wC/ho+33n/P3P8A9/DSfZh/z0T/
AL+R/wDxdH2Yf89E/wC/kf8A8XQBoWt5cN5Ba4lJ82EZLn+9JVJ767GwC6mA
EaAASH+6KVZ0tfLyysVkRsKwPC5PUcc7v0qMwBsYljIACgiRBkDjOCwIoA9B
vrpbmDStFWaWK2trZLhpwCQZXUEOT7Z79/wrI1f7JYafJG/iOfULpwVCW7bU
wfXg5H5envXONJdNbi3a+cwDgRm4TaPw34qD7MP+eif9/I//AIutcJXlh6Hs
ku+t3rfq+7OXEYSNasqvNpppZdOz3Rp+H/EE+k+IdPv57i4eCC4R5UVtxZAf
mXBODkZGD61v+GvGdnpup3V/qMl49w94k6SiCO4JjDMWTEjAISSp3jJGOMVx
v2Yf89E/7+R//F0fZh/z0T/v5H/8XWV/6/r0Oqx2EXjmNJdM3SX5htrS8hlT
dwzzGXaQN2CPnTOf7vfApLjxlavZyXMU2om/m0+Gxe1cD7OmzYC4bfk5CZ27
RgseTjnkPsw/56J/38j/APi6Psw/56J/38j/APi6Nv69f8xt3d/6/rQ7e78b
WD3891b3WsA3+oQ3lyrBB9lVCSViO4hz8xALBRgYIOeMHRvEsumJqpa4uzJc
2vlW7K+dj+ajhjzxwh6VjfZh/wA9E/7+R/8AxdH2Yf8APRP+/kf/AMXQtNhH
Z3Xjy3uDepHBcwW89iYxEj8faHlSSRs54X5So6kAL71fuvH+lB7ZLMXwt4Wu
yqC1ih2LLB5aJ8rkuVOMux3Hr1rz37MP+eif9/I//i6Psw/56J/38j/+LpPV
WGnbX+ux1Efiy3bxbompSzXyWdjFaCZUAZnaJFDYXcAQSvUnoc47VaHje3ju
tO2Tag9ta2t7A4bALmYy7Dt3kdHTPPG3jOBXG/Zh/wA9E/7+R/8AxdH2Yf8A
PRP+/kf/AMXTev4/iJafh+B2cnjKwbTL1hc6t9uu9MhsjB8vkRvGY/mDb8kE
IT90YLHrnNUtX8QaTq2t3moPPrMYuLmeTZG6AKhT90MZPO/O7tt6c1zP2Yf8
9E/7+R//ABdH2Yf89E/7+R//ABdD11BaK39di1e348yP7Dd3/l+UnmefJz5m
0b8Y/h3Zx3xjNFjfXTXKK1zMRvj4MhP/AC0Wqv2Yf89E/wC/kf8A8XT4QttK
sjSJhWDH94p6EHACk9cUAV9RuJt1o3myZNvydx/56SV0HgC4ht9WutWv3aSH
TbczhGYnLZAX9TXPTwm7igaJ4t8aGNkeQIfvFgRkgfxfpS2Q1LT5WktpIELr
sYGeFgy9cEFiD0FZVoOcHGPUqDSldndJYaprUh1aO90xkmbzLie5UMyN/s98
AAADtiuR8TXkr6ttGp/azEgiMkaeWvGeBgnOM9ap3Q1S9k33E8TnAGPtMQAH
pgNiq39n3P8A0w/8CYv/AIqu+eKUqKpRjyrTrpp22OCjhJQqupKfNv0Sevd6
naprkMD6VZWHie1gNhYvFLdT280ltdF5WdoyhjZmADD7yYJXtgE2b/xrpOm2
TDQLa3lmj1Wa4tTcJN/o4MUQEkY3BfvqxVX3YwMiuB/s+5/6Yf8AgTF/8VR/
Z9z/ANMP/AmL/wCKrkev9edzuX9fdY3/AAv4gg00a5JqO25NzYGKKGdpSssh
ljbBKEMOFY5yOnWuj8IeNbZNZudW1bU0spjNboLfNysH2VAQURIT8zKAoAkJ
UgnO4mvPf7Puf+mH/gTF/wDFUf2fc/8ATD/wJi/+Kpi6HqXhnWorq2WKx1po
Le107UDdaaIZP3jFZSsxIXZjayDJIYbQoGDWP4h8WW194NtbDT7yxSJba3Rr
N/tYuI5UwHZRkwDJ3HcMMQxzznPKC719dKOlDVJhpx62g1FfJPOfub8deenW
qH9n3P8A0w/8CYv/AIqk1+n6/wCY79fX9CxLqwk02K1WygjmRsteLLN5rjng
guUxz2UHge+en0vxfDp3g+LZcyjW7a4EUK4bBtzIkxO7pw6EY64euQ/s+5/6
Yf8AgTF/8VR/Z9z/ANMP/AmL/wCKpp21FY7vVPE+jf2hrcGnXkn9nf2SLSwL
I4LuZklYY7cmTk+lX77x7p9/rGovf38t7p6a3bXNlC0bFRApfzNqkAAEFcqc
bj1ycmvNf7Puf+mH/gTF/wDFUf2fc/8ATD/wJi/+KoXT+utxvVW/rax3Wva1
Z6ro1lp974xa/uI7u6uHvFt5jhDGvlp8yqTll2+i59BXKXMdlFZySwa7JNOq
wFYfIddxZSZBuJwNhAGf4s5FUP7Puf8Aph/4Exf/ABVH9n3P/TD/AMCYv/iq
mwXI/tM//PaT/vo1uafcTJYWoWWQARA8Mev2msf+zrn/AKYf+BMX/wAVWhFI
kMcduJUJSHbvz8u7zPMx/TNUI3/A+oXH/Cb6P5tzIU+0qCHkOPxr33XPt8uo
q1vJcbEIYDymwrA9sRNkcA9ev0FfMSwFWDLKqkdCJY8j/wAfqbzLr/n+k/8A
AhP/AIun7rVpIXvJ3TPavifJeW/gieZ7qQLPeIYUYsHQDgnkAjOM4xgZ44ry
PSPED2Nrq0U8907XdkYIir52v5iNk5PAwp6etZ0gmlXbJdlx6NOh/wDZ6j+z
D/non/fyP/4uhu4RVjrbLxhaw6dp8ss+pC/0+1mtkgTBgn3lyHZtwK48w5G0
52jkZ4JvG/mLeKs9+Fl0WDT4xv4WRPL3H73Cna/PX5unJrkvsw/56J/38j/+
Lo+zD/non/fyP/4uk9b/ANd/8xrT+vT/ACOxn8Y2Oo2k9jd3Op20UttZg3MC
LJJ5sMexgVLruRsk53A5VePQg8YadaeFLjToHvRdzWzQsTbR/PJ5oYSGYsXA
2gDYBgEZ561x32Yf89E/7+R//F0fZh/z0T/v5H/8XRfqC0t5Gz4o15NU8Q3e
oafd3ohuXMpSYbDGxPKjDMCB68Z9BWP9vvP+fuf/AL+Gk+zD/non/fyP/wCL
o+zD/non/fyP/wCLpJW0AX7fef8AP3P/AN/DR9vvP+fuf/v4aT7MP+eif9/I
/wD4uj7MP+eif9/I/wD4umAv2+8/5+5/+/ho+33n/P3P/wB/DSfZh/z0T/v5
H/8AF0fZh/z0T/v5H/8AF0AL9vvP+fuf/v4aPt95/wA/c/8A38NJ9mH/AD0T
/v5H/wDF0fZh/wA9E/7+R/8AxdAFmO8uWtJS1xKSEbBLn+9HVnQPFGp+HdVT
ULObe6gqyS5ZXU9Qfy7VnMVggkQuhLLtADAnkqc8Ej+H171U3D1oA6LxLrVn
q2pnUdNW8tXucyXNvJJuRJSeSjZyQeuCBg5xxjGOt7co6utxKHU5Vg5BB9RV
XcPWjcPWgDo7/wAZaze2kNp9unS3ijCAb8s3uzdSf6VnWOq3FnciQyyOmCrK
WzkfjWbuHrRuHrTTcXdCaTVmd3oPjo6Hc3khtoryG7t2t5I5HK/KfccisDXP
EdzrV1bzMscH2e2S2QQAqNifdB5ycDjPsKw9w9aNw9a1nXc1sZwpKPUs/a7j
/nvL/wB9mu98M6l4S1HRra18T6hNp8tnBJBFNE8krSEyvKGMYgIAzKwz5mfk
6DOa853D1o3D1rOE5QfNF2Zc4RmrSV0elXHjaGDRbdINXnnubbdGECko4IIy
u4Ahec8j8K5Xw/4w1nw1qa32n3I3CRZHikUMkm0MMHuBh2HBHX2Fc/uHrRuH
rVTqym7vf0W127eiu7epz4bCQw9+Xr/Vj27TPi3owv8AUNQeC8V7yWNngmYb
YVC/MUIzufcSFOBwB06V5VreqC71i4mtLi4NuWxG0h2uwHALAHqe9Y24etG4
etc0aSjK/wDWp6tXGTqU+RpdL+dlZG/4Z1a30/xFZX2pXd6tvazJPtt0EjOV
YHbhnUAHB5yfoanl1HS5XuYf7W1tbeW6WRWES42bWyTF5mC4YgD5umfpXM7h
60bh61qch39v4r0RJ7Xfc6sP7NsxBY3T2ySsZC7MZHjMoA27iEXc2MAnOMVi
6Pr1tpHiJ9ReW7v44Vke2E4KGSUg7DIA/ABOThieK5rcPWjcPWjz/rUDvLTx
xY+TZGbT2tJbRbqJFs2d0aOWFlGTLIzZDnPXGCe/Ug8eRK1i0kNyji3mF86M
CZ5jA0MbYJHABBPuzn0rg9w9aNw9aHqO5Z+13H/PeX/vs0fa7j/nvL/32arb
h60bh60CP//Z

--0-1251658241-1260352649=:67012
Content-Type: image/pjpeg; name="correct output must be.jpg"
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename="correct output must be.jpg"

/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsL
DBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/
2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIy
MjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCAMABAADASIAAhEBAxEB/8QA
HwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUF
BAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkK
FhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1
dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXG
x8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEB
AQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAEC
AxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRom
JygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOE
hYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU
1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwDck0TTGnit
4tLsBJJklmt0wqjqenuKyM+H7qX7NZW+n4LELO8MLNKwPRQB8q9skHPXGOu5
4tjun0SS0sY2M06kSlPvGLK7lX1JHb0B71ztrYWX2GCKG2e4nCgCOGSfd7ZA
YBO3t/u12YalHFTftNIRdraXb7vXbol9/Q8vFVpYe3LfmktHrZeS0d3116bG
zYaVpF3ZpMNLseSQf9HTqCQc8deKg1CHw9pkqpc6VagGCWcsLVCAse3PbOfm
GOK6DSdNNjpkFu0aRsoJZEZmCkkkjLEk9ep6+3Ss6/0+4utb89tNaW1tbSWP
a7Ji6Mmw7VBPopB3YGSO3NU4qOkdjoi29ZGRL/ZcEMLS+E2WaacQx25t7fex
2ls537cYU/xZ9qnWLQG0ObVf7HtxFAkjyRG1j8xSmdykdMggjrj3qFdB1a5a
1SNb6wtIr9ZIVlmilmt0ELqxyS6lSxAAyxGT0GMbV7oJi8JX+m2KvLNLbTKp
dhulkcEkk8DJY57DnsKXRuxStdK/9XZmadb6NqEssLaBFaTxKrmKe3iyUbOG
BQsCOCOvatD+wdJ/6BVj/wCA6f4VVvPDlxDotz5fnale3CxRy/aFhZvKB5VF
KrHkAsRuGMnnNZUPh+5stNsvt2kvd2lu1yTbySwjyNz7o5CAQgwu4fLyuflF
EmlfTYSTfU3/AOwdJ/6BVj/4Dp/hR/YOk/8AQKsf/AdP8K5Sz8OXl5Z6DdyW
17PbLp0Ai+ym3LQSA5Lfvhlcgr8yEH5ee1d9c6fLPNDJHfXFusbZaOJYyso9
G3KTj/dI61Vl2E9OphyafocV59mk0qzVvJabcbZNu0EA9u2R+dVIBoV1aWc9
voUUjXaO8cItY1cbRyDnABzgdepFaniXR7u+jtjZIGfeYJssFxDINrkZ9ODj
2rNufDl+58QRpbr5DWksengOBuaYbpBj+H5wOvrU/Ipa21NEaDpJAP8AZNkP
Y26f4VXutO0SzmtI5NItC11N5KbbZOG2s3PthTVOfwtPJc3t6LFTe/bbWS2l
LLuVFEQkKnPy8K4I4zjvxTU8P3n9uW0v9klZo9Qlmm1HzUPmxMsgTvuO3cow
RxjjIofp/WgktL3/AKsa/wDYOk/9Aqx/8B0/wo/sHSf+gVY/+A6f4Vh2HhW6
a38htN+w3C2bxXN3vQ/bJjjbJ8pJbDAtucAjPA5OLlroeqyX0U93CyJdMLq7
RZVPlyJuCIOeTgx8jj9370X8ga8y9JoelRxO40ezcqCQi26Zb2GcD8zVbTLD
RtV0y3votFtoo50DqstvHuAPTOMj9al8M6ZPpmnXcZ0o2yK37lCkKTzYXrIY
2KMxPG7Iz3A6nCh8IXlzo8gu9L/0qLRo7e3WR0JS4UycqQxAPKkN79etHy/r
UaV+puw6XoU81xDFpti0lu4SUfZlG0lQwHTngjpU39g6T/0CrH/wHT/CsS88
L3ZGurbaYI5rx4ZRcReUpmQCPzIsnPLFX4ZdpzyeTU+l+Fyl5pjPp1wtrbLc
NsvBbgxuxjKFVh+QDKsRgcHnrii/kLpe5qf2DpP/AECrH/wHT/CoZ9L0K2kg
SXTbFWnk8qMfZlO5sFsdOOFP5VkWnhC+tNNtEsrdbO9k0ma3uZlcA+cQnl7m
BJOCGwRnA6dqgtvCPlw2UjaBdSGC8WWS3uUs/umNlYoI9q/e2E7sE7R1xT62
t/VxtW69/wAjT1C20mxu7e1j8OR3c86O6pBBCMKu3JJdlH8QrQXQdJKgnSbJ
SR0NumR+lQeItKnuNY025Swv7uCGKZHFjdCB1ZjHt58xCR8p4zWVrWk3aQa3
fPYNHZvZ3BjiaRSYZPK+aUgEj5+V4yRjP8bYm9le3cEr2VzUv9O0TTrb7RNp
FoyeYkeEtkJy7hR+rCrP9g6T/wBAqx/8B0/wrEi8PXUtvM9ppLWUbmzzE0iE
zMkwd5SQxB+XufmbHI6VZtPD91HrSyvpmy5W8lmk1Ten76Ft22Pg7zwUG0gK
NuQeBlvToLpe/wDVjS/sHSf+gVY/+A6f4Uf2DpP/AECrH/wHT/Cuam8G3K6L
okDafK8cULC8t7UW7OZiqgOfOBRsBSM5yMjHGa6PQ9Ca11LUb24tmEsrRrFN
MVaUoIowQSM4O5Tn1Iz6U1a9rA1bqO/sHSf+gVY/+A6f4Uf2DpP/AECrH/wH
T/CtzyPajyPanZE3Zh/2DpP/AECrH/wHT/Cj+wdJ/wCgVY/+A6f4VueR7UeR
7UWQXZh/2DpP/QKsf/AdP8KP7B0n/oFWP/gOn+Fbnke1Hke1FkF2Yf8AYOk/
9Aqx/wDAdP8ACj+wdJ/6BVj/AOA6f4VueR7UeR7UWQXZh/2DpP8A0CrH/wAB
0/wo/sHSf+gVY/8AgOn+Fbnke1Hke1FkF2Yf9g6T/wBAqx/8B0/wo/sHSf8A
oFWP/gOn+Fbnke1Hke1FkF2Yf9g6T/0CrH/wHT/Cj+wdJ/6BVj/4Dp/hW55H
tR5HtRZBdmH/AGDpP/QKsf8AwHT/AAo/sHSf+gVY/wDgOn+Fbnke1Hke1FkF
2Yf9g6T/ANAqx/8AAdP8KP7B0n/oFWP/AIDp/hW55HtR5HtRZBdmH/YOk/8A
QKsf/AdP8KP7B0n/AKBVj/4Dp/hW55HtR5HtRZBdmH/YOk/9Aqx/8B0/wo/s
HSf+gVY/+A6f4VueR7UeR7UWQXZh/wBg6T/0CrH/AMB0/wAKP7B0n/oFWP8A
4Dp/hW55HtR5HtRZBdmH/YOk/wDQKsf/AAHT/Cj+wdJ/6BVj/wCA6f4VueR7
UeR7UWQXZh/2DpP/AECrH/wHT/Cj+wdJ/wCgVY/+A6f4VueR7UeR7UWQXZh/
2DpP/QKsf/AdP8KP7B0n/oFWP/gOn+Fbnke1Hke1FkF2Yf8AYOk/9Aqx/wDA
dP8ACj+wdJ/6BVj/AOA6f4VueR7UeR7UWQXZh/2DpP8A0CrH/wAB0/wo/sHS
f+gVY/8AgOn+Fbnke1Hke1FkF2Yf9g6T/wBAqx/8B0/wo/sHSf8AoFWP/gOn
+Fbnke1Hke1FkF2Yf9g6T/0CrH/wHT/Cj+wdJ/6BVj/4Dp/hW55HtR5HtRZB
dmH/AGDpP/QKsf8AwHT/AAo/sHSf+gVY/wDgOn+Fbnke1Hke1FkF2Yf9g6T/
ANAqx/8AAdP8KP7B0n/oFWP/AIDp/hW55HtR5HtRZBdmH/YOk/8AQKsf/AdP
8KP7B0n/AKBVj/4Dp/hW55HtR5HtRZBdmH/YOk/9Aqx/8B0/wo/sHSf+gVY/
+A6f4VueR7UeR7UWQXZh/wBg6T/0CrH/AMB0/wAKP7B0n/oFWP8A4Dp/hW55
HtR5HtRZBdmH/YOk/wDQKsf/AAHT/Cj+wdJ/6BVj/wCA6f4VueR7UeR7UWQX
Zh/2DpP/AECrH/wHT/Cj+wdJ/wCgVY/+A6f4VueR7UeR7UWQXZh/2DpP/QKs
f/AdP8KP7B0n/oFWP/gOn+Fbnke1Hke1FkF2Yf8AYOk/9Aqx/wDAdP8ACj+w
dJ/6BVj/AOA6f4VueR7UeR7UWQXZh/2DpP8A0CrH/wAB0/wo/sHSf+gVY/8A
gOn+Fbnke1Hke1FkF2Yf9g6T/wBAqx/8B0/wo/sHSf8AoFWP/gOn+Fbnke1H
ke1FkF2Yf9g6T/0CrH/wHT/Cj+wdJ/6BVj/4Dp/hW55HtR5HtRZBdmH/AGDp
P/QKsf8AwHT/AAo/sHSf+gVY/wDgOn+Fbnke1Hke1FkF2Yf9g6T/ANAqx/8A
AdP8KP7B0n/oFWP/AIDp/hW55HtR5HtRZBdmH/YOk/8AQKsf/AdP8KP7B0n/
AKBVj/4Dp/hW55HtR5HtRZBdmH/YOk/9Aqx/8B0/wo/sHSf+gVY/+A6f4Vue
R7UeR7UWQXZh/wBg6T/0CrH/AMB0/wAKP7B0n/oFWP8A4Dp/hW55HtR5HtRZ
BdmH/YOk/wDQKsf/AAHT/Cj+wdJ/6BVj/wCA6f4VueR7UeR7UWQXZh/2DpP/
AECrH/wHT/Cj+wdJ/wCgVY/+A6f4VueR7UeR7UWQXZh/2DpP/QKsf/AdP8KP
7B0n/oFWP/gOn+Fbnke1Hke1FkF2Yf8AYOk/9Aqx/wDAdP8ACj+wdJ/6BVj/
AOA6f4VueR7UeR7UWQXZh/2DpP8A0CrH/wAB0/wo/sHSf+gVY/8AgOn+Fbnk
e1Hke1FkF2Yf9g6T/wBAqx/8B0/wo/sHSf8AoFWP/gOn+Fbnke1Hke1FkF2Y
f9g6T/0CrH/wHT/Cj+wdJ/6BVj/4Dp/hW55HtR5HtRZBdmH/AGDpP/QKsf8A
wHT/AAo/sHSf+gVY/wDgOn+Fbnke1Hke1FkF2YL6BpRMSLplkpkljj3fZk4D
OFz0960P+EJ0P/nh/wCQIP8A41VmeLb5B6YuIefT94tSXljf+QPLFzIRIhZE
kKs6BgWAORglcjqPqKmSRUWyl/whOh/88P8AyBB/8ao/4QnQ/wDnh/5Ag/8A
jVXfKj/6F7Wv/Bg//wAkUtnYaitlAtw85nEaiQ7ictjn9aiOpctDBtfDWlXN
+9o9jaosfnZeO2jDNskCDqpHOcninal4e8L6ZbySXHlK6xs6xMlsrPgdADHz
6Vp2kLvqUgRm3N9qwVPJ/frUd02s6dezNZPdRtMkIMiwvJuVfNyuRG+DlkPI
9actFcI6uxkjw9onBA0i4UOistpcwyuAzqgO37OOMsM8ir934P0W2sbi4jtk
Z4YnkCvbwlSVUnBxGD29adBpWpaldTXtwzh3aHfI8Eis5RYSxUEqFBeMfwZw
PTGNK+tLiPTbxneXb9nlzuJx9w0orS7CTV7I5OLw9pl9cXu+KO2W3uBAiW9t
ByPLjckl425y+OMdKP8AhFtMK3UiRXkkFpt+0SpBZHywRnJXyt233AxwfQ4L
qwvrnUtTFm842XnzCIkdYIME4+h/KrOjQaro93Ne/Zb+4vvLMVuWYiJQcZL8
7m/3cY49cFeCVSXtpRex66oQWGjOKTk7dCA+E9OiuI4LmG9tpJIvORZYLHcU
zjJUREr9GAPB9Dhsvh7TLG4stkUdytxcGB0uLaDgeXI4IKRrzlMc561Jqljq
Oo6pJfW1vqVs1wA06SOWAcAD5WByVx6gYxxxwI7WwvrbUtMF48533nyiUk9I
J8kZ+o/OiNWXtlHoOVCn9WlNpKVn0O4eCKUYkjVwOzDNMeW3iO1pEUjtmqup
3jxBYYiBJIcZPQDGST7Af0Hesa2Zb+8NnYWJ1G4A3M0uCMeuCdqj/OTXqxp7
ySPDvfQ6VJIZPuSK30NP2CuSt7+zuJWhWMWdwpK4GdmR2ZOn4jB/lWvbt50W
cMjKSrpu+6w6j/PUYNOUXHcV09jVbYoyxAHuai+0W2cecn51HYacl7KzSErA
hwSOrn0B7CtxdL0zyyosISB/ERlvzPNYyqWLULmaArDI5HqKqX2j6bqgQahp
9rdiMkoLiFZNpPXGQcVYvLIac32i0LG2z+8iY52+4Pp9akBBAI6GqTUkJqzE
2KO1GwU6iqJDySf4G/KjyT/cb8qdYaZps+lzXl5ptnczCe5JeaBHYhZnAGSD
0AAq8PDOnn/mAaN/35T/AON1i61jZUjP8k/3G/KjyT/cb8qt2uk+H7uPcmja
ZuGNyi1jOM/hU/8Awj2h/wDQF03/AMBI/wDCj2vkHszN8k/3G/KjyT/cb8q0
v+Ee0P8A6Aum/wDgJH/hR/wj2h/9AXTf/ASP/Cj2r7C9mjN8k/3G/KjyT/cb
8q0v+Ee0P/oC6b/4CR/4Uf8ACPaH/wBAXTf/AAEj/wAKPavsHs0Zvkn+435U
eSf7jflWl/wj2h/9AXTf/ASP/Cj/AIR7Q/8AoC6b/wCAkf8AhR7V9g9mjN8k
/wBxvyo8k/3G/KtL/hHtD/6Aum/+Akf+FH/CPaH/ANAXTf8AwEj/AMKPavsH
s0Zvkn+435UyW0SeF4ZoBJE6lXR1yrA9QQeorV/4R7Q/+gLpv/gJH/hR/wAI
9of/AEBdN/8AASP/AAo9r5D9n5maICoAEZAHAAFHkn+435Vpf8I9of8A0BdN
/wDASP8Awo/4R7Q/+gLpv/gJH/hR7V9hezRm+Sf7jflR5J/uN+VaX/CPaH/0
BdN/8BI/8KP+Ee0P/oC6b/4CR/4Ue1fYPZozfJP9xvyo8k/3G/KtL/hHtD/6
Aum/+Akf+FH/AAj2h/8AQF03/wABI/8ACj2r7B7NGb5J/uN+VHkn+435Vpf8
I9of/QF03/wEj/wo/wCEe0P/AKAum/8AgJH/AIUe1fYPZozfJP8Acb8qPJP9
xvyrS/4R7Q/+gLpv/gJH/hR/wj2h/wDQF03/AMBI/wDCj2r7B7NGb5J/uN+V
Hkn+435Vpf8ACPaH/wBAXTf/AAEj/wAKP+Ee0P8A6Aum/wDgJH/hR7V9g9mj
N8k/3G/KjyT/AHG/KtL/AIR7Q/8AoC6b/wCAkf8AhR/wj2h/9AXTf/ASP/Cj
2r7B7NGb5J/uN+VHkn+435Vpf8I9of8A0BdN/wDASP8Awo/4R7Q/+gLpv/gJ
H/hR7V9g9mjN8k/3G/KjyT/cb8q0v+Ee0P8A6Aum/wDgJH/hR/wj2h/9AXTf
/ASP/Cj2r7B7NGb5J/uN+VHkn+435Vpf8I9of/QF03/wEj/wo/4R7Q/+gLpv
/gJH/hR7V9g9mjN8k/3G/KjyT/cb8q0v+Ee0P/oC6b/4CR/4Uf8ACPaH/wBA
XTf/AAEj/wAKPavsHs0Zvkn+435UeSf7jflWl/wj2h/9AXTf/ASP/Cj/AIR7
Q/8AoC6b/wCAkf8AhR7V9g9mjN8k/wBxvyo8k/3G/KtL/hHtD/6Aum/+Akf+
FH/CPaH/ANAXTf8AwEj/AMKPavsHs0Zvkn+435UeSf7jflWl/wAI9of/AEBd
N/8AASP/AAo/4R7Q/wDoC6b/AOAkf+FHtX2D2aM3yT/cb8qPJP8Acb8q0v8A
hHtD/wCgLpv/AICR/wCFH/CPaH/0BdN/8BI/8KPavsHs0Zvkn+435UeSf7jf
lWl/wj2h/wDQF03/AMBI/wDCj/hHtD/6Aum/+Akf+FHtX2D2aM3yT/cb8qPJ
P9xvyrS/4R7Q/wDoC6b/AOAkf+FH/CPaH/0BdN/8BI/8KPavsHs0Zvkn+435
UeSf7jflWl/wj2h/9AXTf/ASP/Cj/hHtD/6Aum/+Akf+FHtX2D2aM3yT/cb8
qPJP9xvyrS/4R7Q/+gLpv/gJH/hR/wAI9of/AEBdN/8AASP/AAo9q+wezRm+
Sf7jflR5J/uN+VaX/CPaH/0BdN/8BI/8KP8AhHtD/wCgLpv/AICR/wCFHtX2
D2aM3yT/AHG/KjyT/cb8q0v+Ee0P/oC6b/4CR/4Uf8I9of8A0BdN/wDASP8A
wo9q+wezRm+Sf7jflR5J/uN+VaX/AAj2h/8AQF03/wABI/8ACj/hHtD/AOgL
pv8A4CR/4Ue1fYPZozfJP9xvyo8k/wBxvyrS/wCEe0P/AKAum/8AgJH/AIUf
8I9of/QF03/wEj/wo9q+wezRm+Sf7jflR5J/uN+VaX/CPaH/ANAXTf8AwEj/
AMKP+Ee0P/oC6b/4CR/4Ue1fYPZozfJP9xvyo8k/3G/KtL/hHtD/AOgLpv8A
4CR/4Uf8I9of/QF03/wEj/wo9q+wezRm+Sf7jflR5J/uN+VaX/CPaH/0BdN/
8BI/8KP+Ee0P/oC6b/4CR/4Ue1fYPZozfJP9xvyo8k/3G/KtL/hHtD/6Aum/
+Akf+FH/AAj2h/8AQF03/wABI/8ACj2r7B7NGb5J/uN+VHkn+435Vpf8I9of
/QF03/wEj/wo/wCEe0P/AKAum/8AgJH/AIUe1fYPZozfJP8Acb8qPJP9xvyr
S/4R7Q/+gLpv/gJH/hR/wj2h/wDQF03/AMBI/wDCj2r7B7NGb5J/uN+VHkn+
435Vpf8ACPaH/wBAXTf/AAEj/wAKP+Ee0P8A6Aum/wDgJH/hR7V9g9mjN8k/
3G/KjyT/AHG/KtL/AIR7Q/8AoC6b/wCAkf8AhR/wj2h/9AXTf/ASP/Cj2r7B
7NGb5J/uN+VHkn+435Vpf8I9of8A0BdN/wDASP8Awo/4R7Q/+gLpv/gJH/hR
7V9g9mjN8k/3G/KjyT/cb8q0v+Ee0P8A6Aum/wDgJH/hR/wj2h/9AXTf/ASP
/Cj2r7B7NGb5J/uN+VHkn+435Vpf8I9of/QF03/wEj/wqhoehaPL4f02STSN
PeR7WJmZrWMliUGSTjk0e1fYPZoZ5J/uN+VHkn+435Vdj0bw9NLLFHo+nM0R
2viyTAOM4ztwTyOlS/8ACPaH/wBAXTf/AAEj/wAKftH2BQT2Zm+Sf7jflR5J
/uN+VP0fQtHlspGk0jT3YXVwoLWsZOBM4A6dAAB+FX/+Ed0T/oC6b/4CR/4U
va+QezRm+Sf7jflSGPHUEfWtP/hHdE/6Aum/+Akf+FZKwRW17qEEEaRQR3IE
caKFVQYYiQAOnJJ/GqjUu7ClCyuSeUf7p/KjyT/cb8ql0rSNNvbJp7zTrO4n
a5uAZJoEdiBM4AyR2AA/Crv/AAj2h/8AQF03/wABI/8ACp9r5D9mZvkn+435
UeSf7jflWl/wj2h/9AXTf/ASP/Cj/hHtD/6Aum/+Akf+FHtX2D2aM3yT/cb8
qPJP9xvyrS/4R7Q/+gLpv/gJH/hR/wAI9of/AEBdN/8AASP/AAo9q+wezRm+
Sf7jflR5J/uN+VaX/CPaH/0BdN/8BI/8KP8AhHtD/wCgLpv/AICR/wCFHtX2
D2aM3yT/AHG/KjyT/cb8q0v+Ee0P/oC6b/4CR/4Uf8I9of8A0BdN/wDASP8A
wo9q+wezRm+Sf7jflR5J/uN+VaX/AAj2h/8AQF03/wABI/8ACj/hHtD/AOgL
pv8A4CR/4Ue1fYPZozfJP9xvyo8k/wBxvyrS/wCEe0P/AKAum/8AgJH/AIUf
8I9of/QF03/wEj/wo9q+wezRm+Sf7jflR5J/uN+VaX/CPaH/ANAXTf8AwEj/
AMKP+Ee0P/oC6b/4CR/4Ue1fYPZozfJP9xvyo8k/3G/KtL/hHtD/AOgLpv8A
4CR/4Uf8I9of/QF03/wEj/wo9q+wezRmNbh0KPHuUjBBGQarf2PY/wDQPg/7
8j/Ctz/hHtD/AOgLpv8A4CR/4Uf8I9of/QF03/wEj/wo9r5B7PzMP+x7H/oH
wf8Afkf4Uf2PY/8AQPg/78j/AArc/wCEe0P/AKAum/8AgJH/AIUf8I9of/QF
03/wEj/wo9r5D9n5mQ9hBJEsT2qNGv3UZAQPoKi/sex/6B8H/fkf4Vuf8I9o
f/QF03/wEj/wo/4R7Q/+gLpv/gJH/hR7XyD2fmYf9j2P/QPg/wC/I/wpV0mz
Rgy2MKsDkERAEfpW3/wj2h/9AXTf/ASP/Cj/AIR7Q/8AoC6b/wCAkf8AhR7X
yD2fmYF3oOm38olvNLtbiQDAea3Vzj0yRUH/AAimhf8AQB07/wABE/wq95/g
03Hlf2bp23f5fnfYF8vd6btuK2P+Ee0M/wDMF03/AMBI/wDCnKTW8RRafwyO
Z/4RTQv+gDp3/gIn+FT2uhaZp8pms9LtbaQjBeGBUOPTIFb/APwj2h/9AXTf
/ASP/Cquo6NpdpZ+fa6bZW8yzQ7ZIbdEYZlUHkD0JFJVPIpxdtzzH4ia/caD
qVtstzKlxbOq/NjB3rn+S16L4LudB/4Q8XWl3LnzIy1xKI8zCQDkFcHkdl59
s5ycPxV4cXxFp0axqhvLZi8Qc4EgIwyZ7Z4wexArm9Ask0u4dLXUFsrsjEtt
dERv+KMRnHZlJHoa7nCNajyqVmunc4Klf2FRScW0+q6EWv6h4FsNLurvR9W1
G71QHdHHJFIA7Z53FkHvzn86ueBNam1+2v7t4DEgkRQpOeQgBOfpisq+8O2d
zcm3tZUv712y0Vswc5PUuw+VB7n8ATxXd+HvD39haRHaKu6QkySuq4DOeuB6
DgD2ArSuoQp8vNzN/gRhasq15OHKifSL8/2fb70wCDvI55yc/rWtDfoWKxt7
kFSKwXV9HuJWmikOnzMZPMRCxgc/e3Ac7CecjoSc8dJhdWMkRnj1G08gjmRZ
02/nnivOaR3q5c1G+XyZxtDJ5bbz2HFMsCxs4DLw5jBORnBI7jjvWeSmrqIL
QFrAn9/c4wki/wByPP3s9Cw4AyASemseTVRRMirZTalJcXC31lbwQxHajoWJ
lOMgrk/d5HJ+nXOLVFFaN3IjHlVht1eDT/Bl5O0nlgS3ILAZIBnfOPfGce+K
5bRJ72/vNG1B7q3glmuFPlS3LvIU3/dCiPAYqDk7jn1AyK7I29neaHNY3M8M
bmWYr5jDKMZGKtjIz1BqvYaZb6XJ5lldaHC+MbltjkD0B87gVxQS53Kor9vL
vpb8enS12dE1JqPI7d/+AdC20anMAAP3MZOO/wAz1w/iG+1TS/FWtahpps/9
E0SG4lW5Rm8xUec7F2kbSefmOcY+6c8dVbShLqa4utTspWdEQCLEYUKWPd2z
979KklGkztM0xsJDNF5MpcofMj5+Rs9V+Y8Hjk+tC0NbrW/9ao4DUr3xI3/C
Qy2+swRRJqtikSG3kLRq/kHaCJhgfONwA+b5um7jYufEut2+o6iu/TGttOvL
W2kj8pxLP5qx52/OQh3OcZDZ6cYyd+aw8PXEk8k9rpUrzxiGZnSJjJGOisT1
UYHB4qjZaBoNprN1qbDS5ZnlR7ZjHGGtQsSR7UbOQMJnjHXFNaaf10J6aiXE
8urw2WmTyWk5ubiRrg2jEx/Z4nPBPqT5aMPUt6VleIgL6zvtUK5Rb+zs7Y8/
cS6j3kemXyPcItdTBFpFrO01u9pE7LtOyRQMbixwM4BLMSSOSetKkekJYx2W
6za2j27Y5JFcZUgg8k5IIByec89aFo0/6/q36gc/a+JdUmvobh/sJ0+fUZ9P
S1SNvtCGPeN5fdhs+WTt2DAbqccrB4g1STwt/bsk9kovVj+w2sVo0jxyOwCx
uTKodskKf9WAc5OBW5Ha6FFqcmpxw6Yl/Iu17pRGJWHHBfqRwO/YVAdJ8ME3
hNjoxN6c3X7qL9/zn5/73PPOeaVtP6/r/Ibavf8Ar+vzOC1fVrzWdKNzfwpF
dppGtQSKgAGUMa9AzgHjkBmwe5rdfxNrOlQ3NpdLp7zrBZPbSRo6xxefKYsS
ZbLbCM5G3d6LXSpZeH44FgS30pYVR4xGFjChHxvXHTDYGR3xzUssejziUSjT
5BNEIJA5jO+MZwh9V5PB45NP+vz/AMwvol6/p+hzlzr3iG3t7yIfYpZbC6Ed
1fQWbyIkRi8zd5Al3lgSoIV2OCDjnAi0jUdYbV9bmbV9OltPt9skSzxvGAjx
xHCEyHBKtwuOXOe+K3X0bwtLp8Wnyafor2ULl47ZoojGjHOSFxgHk8+9Tvaa
DJeNePDpjXTBQZ2EZc7SCvzdeCAR6YoWjE9jy6FGgtftHlW8NvqtqHFzbECW
6ga6j82S654cRyAZBYDMnIyFFy/04T6reaDpdhps9vBeXD2lhfLts1At4t5A
A4ZZJcgAY+Z+V6j0OHT/AA7bSXckFrpMT3gIuWRIlM+c53kfezk9fWmS6V4Y
n06LTpbHR5LGFt0Vs8cRiQ88qvQHk9B3NK2lv63/AE/qxXN71/62OCtTBdWy
asnmS6hb3OlxafNcAGdYHWLcMgnh9027BwcHk4rc8RAX1nfaoVyi39nZ2x5+
4l1HvI9Mvke4Ra6hrfRGvYb1o9NN3Anlwzny/MjX+6rdQOTwKckekJYx2W6z
a2j27Y5JFcZUgg8k5IIByec89aq+t/O/5f5fiStLIw4/FN2TYh47ffcazc2D
KFOfLjExBAz9792ue3J46VWk8UaxD4NPiMiylW6EP2S1jiIaAySBAJHaQK5G
4ZH7sZBGR1G+LDw6upNqQtdJF+zBjdBIvNJxjO/rnHHXpSJp3hyN7x0tNIVr
0EXTKkQM4Oc7/wC9nJ6561PT+v61/Ad1e/8AW5gx614tludO06S2sbG9uY7m
R5LqDcNsZj2kRxzsBneQR5h6Z/2TUi8aa/qc+lx6VpKStLp8F9coAjZEjEFV
LzRlQNp+YLJ1GQMc9XZWPh/TQgsLbSrUR7tggWNNu7G7GOmdq59cD0qO50rw
zeRW0V1Y6PPHajFuskcTCEccID93oOnpT/r8/wDgfcLozKvdRlg/tHXIFh8z
z4tNs3nJ8tAZFR3bpx5jHIB+YRryM8Y9he3Nv4kvFuY9OvbuTXY4GlWIhVIs
c7kBYlG+XB5OAWFdqItHGm/2czWcln5flmGWRXVl7htxO7PfOc1FBYeHrWJY
re20qGNGDqsaRKFYLsBAHfb8ufTihaf16f8AB+8dzm18T66sNlayvYR6rcX6
Wk8M1nJGtqGidx/y0YSnKjDKwDdPlPIrtr8n9r2Go6jJAj2Vpqkcs8MTGNvK
kiXeqZzjj7uTzkZ71tXfhnw3PBZWtvDpFrYwXZupbWOGIRzkxvGQyjA6MOSD
93Faq22hJBFAsWmLDFE0McYEYVI2xuQDspwMjocCjz/rb/hwurr+u/8AwDmd
N8YarGJZNdgt7aC1vPs10/lhGjVoldGKrLIF+Y7SNxzuU8cill8Va3a/a554
LMQ2ekDU5YBG4kYsZdsYbdhcBFycHkNxyMal1omkPZx6dYyaTY6Y0ivdW8MK
L5wUghQQwC8gZyDkcDHWtnzNN+0PP5ln5zoI2k3puZQSQpPUgEnj3ND/AK+7
/MSst/61/wAjkY9e8XDRjd3Onw26iRXa7+yLKFgKElhDFcuz4IAyHzhuF4rV
1PV4Gn0P7MLG+kkvVjYsuTEWt5JAV5yjEAdf4WPrUn/COeDhbm3Gj6B5LOJD
H9nh2lgCA2MYzgnn3outNs7rW7a8a905LWF/PaBI1Eks3ltGGeTdggI2Mbc8
DnAxQ/6/r+v8hefmYq+J9dWGytZXsI9VuL9LSeGazkjW1DRO4/5aMJTlRhlY
BunynkLNEvie104ajBp7X0eoy2q3qgL5ZiZmLwKzbg7eUBwSV5J3Ba0bvwz4
bngsrW3h0i1sYLs3UtrHDEI5yY3jIZRgdGHJB+7itiKPRoIraKJdPjjtebdE
8sCHgj5B/DwSOOxNC7/10/4P6g+39df+Ac4nifVX1WxO/TfsV5qk1gsARvPj
ESyZYtuwSTGDjaNoIHPWoW8c3cGi6Zfy21vI8+jXOozwplTviEZCrknAyzA5
z0rXvdE0W51iz1SB9OtryG6FxNMix+ZcARugVmBB/jzznpVy10/w7ZXUl1aW
ukwXEpYySxJEruW5bJHJzgZ9aSva39bf56lXXNfp/wAF/pY5uDxD4ra2sEuL
Sztp769SGGeaBShjaGRyQkdw+cFByXGQeg61fh8TXjO9s/2BLuxSd9RMztFE
gQ4jO75tgcEPk7sKDxmtKz0vw1p2PsNlo9riQSjyI4k+cAgNx3wzDPoT60aV
BBYzXl3dajZ3F7eSBpZY9sa7VG1FClmOAPUnJJPHQNk9v67mbp3im81ex1E6
f/YF5eQQF4IdO1cXW5+cB8om0ZHrz7darw+ItXvZbHTrS809b6Vbh57i50+W
NIzEUBj8ky53fvAd28jAyMgiuouJNNvLaS2uZbOeCVSskUroyuD1BB4IqhJp
HhiXTYtOksNGexhbfHbNFEYkbnkL0B5PbuaAOS1XxPr2qaFqDWEtnYKmgjUH
k8t5H3MJQRGwddv3AVbBx6HtbvNc1PSZJsQ6bcaitlYZuTA0fmGW4aPDfMx2
gcjk4JJ74rrj/ZTPIzGxLSRCFyWTLRjOFPqvJ46cmoIrHw9BCsMNtpUcSqqq
iLGFAVi6gAdgxLD0Jz1o6/15jb/r7v8AJ/eYI8Ra2s8mkySaaNRGprZLdmBx
DtMAmDeV5mS2Mrt39ec9qyL2+1DxhZ2Om+TpE18Lu8kC3Ss9lMkDNEAyZJck
ujdcDBbsAes1qxsdSsJ7eF9D3XEivP8AbrZbmOXaAAWQOuSMLgk8YqvYeHtA
g8PwaTqP9mamkcjzt9ojiKGVmLMyochRliAOw4yaVr7/ANbBddP63MDTfEV5
Z+Grp9MMcsemyWelpDcyBws/mCOUF05IAdAD7Zx2N1/EXiK0mu/tL6XLFp2o
W9pceXbyK06zGPDJmQ+WVEo4O/dj+GuiGn+HRKJRa6SJBGkQfZFkIhBRc+ik
AgdiBip3TSJPN3/YG851kk3FDvdcbWPqRtXB7YHpVX1u/wCtv+D94ltY5N/F
+qtrN7Db/Y/sAt7mW2ubiHykzAyq4JEzMy5LAsUQAgEbhVix8T6tqd5pHkR2
tvBfrczvFNC7TQxxNGvlsA4Ak+ZgeynjB2/Nt/2X4a+0TT/YtH86c7ppPLi3
SHIOWPUnIB59KsRx6PFcm5jGnpcEsxlUoGJbG45687Vz67R6VK2/r+v+G8xu
xyOkeJ/F2r6NJqUOjxCGeOOW1fy42CKXG4YFwTKQpJ6RHKkYycC1L4wuYtP1
O4SW0nW00UX8Uxt5IRJLmUEFGbcozGo2k5GTzWu+heEpGuWfS9DZro5uC0EJ
Mpzu+bj5ueee9SXGleGbuO2jubHR5ktk8uBZI4mES4xtUH7owAMCmF1e/wDX
Q4yW41VvFbNp99Fa/aNchWYPEzh82CtggOuV4PBzztPbB3v+El1GyfVP7Uk0
y1lgO+G3vC1rGIjIVV2ucyK2RjgKCCcEDIrans9Auo3juINLmSR1kdZFjYM6
gBWIPUgAAHsAKWytdC02a4msYdMtZblt07wCNGlOScsR948nr6mj+vwQr7X8
v1OX1jUYvFHw88QSyzaZKLe1mYf2VqrXKZERIDsFT/vkgg8VU8VQw3H9oS3S
qZLDQFudOZgCYp9z5dO4cFYhkc8gd67XUIdF1a2+zakmnXkG4N5Vz5ci5HQ4
bIzUK6b4bSO0jWz0hY7Jt9qoSICBs5yg/hOe4xR1/rsx30X9dU/0/E5DTY8a
5p2pNGo1m41q6trtwBvMCxyYRj12ALEwB4zg969GrPSLRo9Rk1BF05b6VAkl
yvliR1HQFupHA49qs/bbT/n7t/8Av6v+NPpYnqT0VB9ttP8An7t/+/q/40fb
bT/n7t/+/q/40gJ6Kg+22n/P3b/9/V/xo+22n/P3b/8Af1f8aAJ6Kg+22n/P
3b/9/V/xo+22n/P3b/8Af1f8aAJ6Kg+22n/P3b/9/V/xo+22n/P3b/8Af1f8
aAJ6Kg+22n/P3b/9/V/xo+22n/P3b/8Af1f8aAJ6Kg+22n/P3b/9/V/xo+22
n/P3b/8Af1f8aAJ6Kg+22n/P3b/9/V/xo+22n/P3b/8Af1f8aAJ6Kg+22n/P
3b/9/V/xo+22n/P3b/8Af1f8aAJ6Kg+22n/P3b/9/V/xo+22n/P3b/8Af1f8
aAJ6Kg+22n/P3b/9/V/xo+22n/P3b/8Af1f8aAJ6Kg+22n/P3b/9/V/xo+22
n/P3b/8Af1f8aAJ6Kg+22n/P3b/9/V/xo+22n/P3b/8Af1f8aAJ65nxveeKt
N0Q33hW1sry4gy01pcRO7yJ6x7WX5hz8vO7tyAG3/ttp/wA/dv8A9/V/xo+2
2n/P3b/9/V/xoGZ/hp9ek0SGXxIllHqUnzPDZqwSIHohJZtzDuRxzgZxkmki
5PhHT/sbQrcfYovLMykpnYOuCDj+Xv0rQ+22n/P3b/8Af1f8aoaHc28Xh/TY
5LiFJEtYlZWkUFSEGQRng0LQRg6NJ4l0rQL2a40+OSVZHMcTEBy2SWkY7gNg
wcADLdsDmtjwpqt9rGiRXN9amJyPllBG2YcjcADkHjnjHccHAt6j9l1HT5rP
+1BbCZSjSW80YcA9QCwIGR3xn0xU1vLp9rbx28E9rHDEoREWVcKB0HWtp1VN
O6V2zOFPltZ6Ir6Nk6bNtOD9rusf9/3rn9Y1ptF1K4i06XzJniae6twhk+z9
P3hx93Oc89OM8EVt6VPAmnyo9zDGxurhhukUHBmcg9ehBB/GnWVno2my3U1l
JbQzXcxnnkE4Jkc+pJPHJwBwMnA5rmnFyWh2UKsabbkr+XQm0UWp0qKWzuft
UU2ZDPnPmMep9umMdsc85rNnGNT1E+twp/8AIEVXtMtNF0aGaHTmtbeKaZp3
RJht3nAJAJ4HA4GAOwqnOVe8u5EYMjzAqwOQcRxjj8Qa1oqzSMK8uZtl/RgV
0o4GT9ouSB/22krAiW0Wy0zU5rC3vLi4cPNdSSETxyD5iF+UnC7W+XIAxj1r
e024ggszHLPEjiaYlXcA8yMR19iKckWjR3jXiLpy3TfenHlhz9W61LWodDJ/
t3Uo2t1dbN3voleFUDAQFmUKHOfnGGJ4C52Ed+Btdvg9zbNNZJJa+Y8t20TG
MooX7qb85yxB+bgqfXFaaWuhR28sCQ6YsMxzLGojCufcdD+NUdR0rT79IbYX
GkxWMQwIxChkQZ+YI+7CZHHC/wD1l/X9en4h/X9f1oV7jUruKSC8e3WS8W0i
iVFwq+bMwyMMw6bBwWGemR1rd0x7+SzDajHGk5Y4VF2/L2yAzAH6Mf6COaPR
7gyGYafKZECOXKNuUHIBz1Ge1SwS6dawLDby2cMScKkboqj6AUxFuioPttp/
z92//f1f8aPttp/z92//AH9X/GgCeioPttp/z92//f1f8aPttp/z92//AH9X
/GgCeioPttp/z92//f1f8aPttp/z92//AH9X/GgCeioPttp/z92//f1f8aPt
tp/z92//AH9X/GgCeioPttp/z92//f1f8aPttp/z92//AH9X/GgCeioPttp/
z92//f1f8aPttp/z92//AH9X/GgCeioPttp/z92//f1f8aPttp/z92//AH9X
/GgCeioPttp/z92//f1f8aPttp/z92//AH9X/GgCeioPttp/z92//f1f8aPt
tp/z92//AH9X/GgCeszXtUs9K0maa8mMaOpjULy7sRgBR3NXPttp/wA/dv8A
9/V/xqvdLpd5JBJPLaO8D74mZ0JRsYyM9DzTTV9QZxUEGsz+HItEl0oQFoxG
1w867EXO7JQc7/b15rv7YYtkHPAxz1/Gq6Np6dLm3/GVf8amF5aAYF3b/wDf
1f8AGrnU5+liYwUTnfGF94u05Lefw1ZWN9GzCOWCaNjIrE4DAhwCvIB/u9em
dulMt9/wj0Y1J7d73fCZjbKyx7vNU4UMScDpk9cZwM4Gh9ttP+fu3/7+r/jV
a/ubeWzMcdxE7l48Kjgnh1Pb6VmtynsZ/wBnuP8An2uP+/Tf4US20lxGI7iw
adB0WW2LD9RXQNeKGI3LwfWsq88W6dY6kunStcvdMiybLezmmCqxIBZkUhRl
T1I6Vp7RvoT7NdytHDcQxiOG0kijHRY7cqB+Qo8u7P8Ayxuf+/bf4Vop4hsn
u4rTzXWeUSGNJInQsIyAx5A4ywwe+cjIq59tX+8v50e0fYPZruYgF4vSG5/G
Jj/SoGsA83nPpStNnPmG0y354rovtq/3l/OqOqeJLHRoYZLySTE0nlRrDBJM
7vgnAVAT0Unp2pOb6oap+ZntFcuctb3BP/XJv8KT7Pcf8+0//fpv8K1H1+0i
0l9TlkeK1jiMzmWJ0ZUAySUI3A4HTGaVNds3cIZwhZxGnmqY/MYruwhbG/jJ
+XPQ+hp+0ltYXs1vcyvs9x/z7T/9+m/wo+z3H/PtP/36b/Ct/wC2r/eX86Pt
q/3l/On7SXYPZruYQjuwMCG6/wC/bf4Uuy8/55XX/ftv8KvL4k097SC6W4zF
PL5MZ2NlnyVxtxnqD24watQanHc28cyFgjqGAkRkYD3VgCD7EZpe0b6B7Ndz
H2Xn/PK6/wC/bf4UbLz/AJ5XX/ftv8K3Ptq/3l/Oj7av95fzo9o+wezXcw9l
5/zyuv8Av23+FGy8/wCeV1/37b/Ctz7av95fzrL/AOEt046vJpaNcvdRuqSe
XZzNGjFQwDSBdg4IPJ70e0fYPZruV9l5/wA8rr/v23+FGy8/55XX/ftv8K3P
tq/3l/Oj7av95fzo9o+wezXcw9l5/wA8rr/v23+FGy8/55XX/ftv8K2J9Tjt
4JJnLFY1LERoXYgeirkk+wGaItVt52kSKeN3jIEihhlCQCAw6g4IOD60e0fY
PZruY+y8/wCeV1/37b/CjZef88rr/v23+Fbn21f7y/nR9tX+8v50e0fYPZru
Yey8/wCeV1/37b/CjZef88rr/v23+Fbn21f7y/nWLb+NtKudU/s2P7f9r4JR
9NuEABJAYsyBQpIOCTg460e0e1g9mt7jdl5/zyuv+/bf4UbLz/nldf8Aftv8
K3Ptq/3l/Oq97rVrp9v591MI4t6R7sE/M7BVHHqSBR7R9g9mu5l7Lz/nldf9
+2/wo2Xn/PK6/wC/bf4VufbV/vL+dH21f7y/nR7R9g9mu5h7Lz/nldf9+2/w
o2Xn/PK6/wC/bf4VqXutWun2/n3Uwji3pHuwT8zsFUcepIFEmtWsV/BZPMBc
To8kaYPzKm3cc9BjcvX1o9o+wezXcy9l5/zyuv8Av23+FGy8/wCeV1/37b/C
tS51q1tJLaOeYI9zL5MQwTufaWxx04Unn0qx9tX+8v50e0fYPZruYey8/wCe
V1/37b/CjZef88rr/v23+Fbn21f7y/nR9tX+8v50e0fYPZruYey8/wCeV1/3
7b/CjZef88rr/v23+Fbn21f7y/nR9tX+8v50e0fYPZruYey8/wCeV1/37b/C
jZef88rr/v23+Fbn21f7y/nR9tX+8v50e0fYPZruYey8/wCeV1/37b/CjZef
88rr/v23+Fbn21f7y/nR9tX+8v50e0fYPZruYey8/wCeV1/37b/CjZef88rr
/v23+Fbn21f7y/nR9tX+8v50e0fYPZruYey8/wCeV1/37b/CjZef88rr/v23
+Fbn21f7y/nR9tX+8v50e0fYPZruYey8/wCeV1/37b/CjZef88rr/v23+Fbn
21f7y/nR9tX+8v50e0fYPZruYey8/wCeV1/37b/CjZef88rr/v23+Fbn21f7
y/nR9tX+8v50e0fYPZruYey8/wCeV1/37b/CjZef88rr/v23+Fbn21f7y/nR
9tX+8v50e0fYPZruYey8/wCeV1/37b/CjZef88rr/v23+Fbn21f7y/nR9tX+
8v50e0fYPZruYey8/wCeV1/37b/CjZef88rr/v23+Fbn21f7y/nR9tX+8v50
e0fYPZruYey8/wCeV1/37b/CjZef88rr/v23+Fbn21f7y/nR9tX+8v50e0fY
PZruYey8/wCeV1/37b/CjZef88rr/v23+Fbn21f7y/nR9tX+8v50e0fYPZru
Yey8/wCeV1/37b/CjZef88rr/v23+Fbn21f7y/nR9tX+8v50e0fYPZruYey8
/wCeV1/37b/CjZef88rr/v23+Fbn21f7y/nR9tX+8v50e0fYPZruYey8/wCe
V1/37b/CjZef88rr/v23+Fbn21f7y/nR9tX+8v50e0fYPZruYey8/wCeV1/3
7b/CjZef88rr/v23+Fbn21f7y/nR9tX+8v50e0fYPZruYey8/wCeV1/37b/C
jZef88rr/v23+Fbn21f7y/nR9tX+8v50e0fYPZruYey8/wCeV1/37b/CjZef
88rr/v23+Fbn21f7y/nR9tX+8v50e0fYPZruYey8/wCeV1/37b/CjZef88rr
/v23+Fbn21f7y/nR9tX+8v50e0fYPZruYey8/wCeV1/37b/CjZef88rr/v23
+Fbn21f7y/nR9tX+8v50e0fYPZruYey8/wCeV1/37b/CjZef88rr/v23+Fbn
21f7y/nR9tX+8v50e0fYPZruYey8/wCeV1/37b/CjZef88rr/v23+Fbn21f7
y/nR9tX+8v50e0fYPZruYey8/wCeV1/37b/CjZef88rr/v23+Fbn21f7y/nR
9tX+8v50e0fYPZruYey8/wCeV1/37b/CjZef88rr/v23+Fbn21f7y/nR9tX+
8v50e0fYPZruYey8/wCeV1/37b/CjZef88rr/v23+Fbn21f7y/nR9tX+8v50
e0fYPZruYey8/wCeV1/37b/CjZef88rr/v23+Fbn21f7y/nR9tX+8v50e0fY
PZruYey8/wCeV1/37b/CjZef88rr/v23+Fbn21f7y/nR9tX+8v50e0fYPZru
Yey8/wCeV1/37b/CjZef88rr/v23+Fbn21f7y/nR9tX+8v50e0fYPZruYey8
/wCeV1/37b/CjZef88rr/v23+Fbn21f7y/nR9tX+8v50e0fYPZruYey8/wCe
V1/37b/CjZef88rr/v23+Fbn21f7y/nR9tX+8v50e0fYPZruYey8/wCeV1/3
7b/CjZef88rr/v23+Fbn21f7y/nR9tX+8v50e0fYPZruYey8/wCeV1/37b/C
mmG5Y5a3uD9Ym/wre+2r/eX86Ptq/wB5fzo9pLsHs13MLy7v/njc/wDftv8A
Cjy7v/njc/8Aftv8K3ftq/3l/Oj7av8AeX86PaS7B7NdzC8u7/543P8A37b/
AAo8u7/543P/AH7b/Ct37av95fzo+2r/AHl/Oj2kuwezXcwvLu/+eNz/AN+2
/wAKPLu/+eNz/wB+2/wrd+2r/eX86Ptq/wB5fzo9pLsHs13MLy7v/njc/wDf
tv8ACjy7v/njc/8Aftv8K3ftq/3l/Oj7av8AeX86PaS7B7NdzC8u7/543P8A
37b/AAo8u7/543P/AH7b/Ct37av95fzo+2r/AHl/Oj2kuwezXcwvLu/+eNz/
AN+2/wAKPLu/+eNz/wB+2/wrd+2r/eX86Ptq/wB5fzo9pLsHs13MLy7v/njc
/wDftv8ACjy7v/njc/8Aftv8K3ftq/3l/Oj7av8AeX86PaS7B7NdzC8u7/54
3P8A37b/AAo8u7/543P/AH7b/Ct37av95fzo+2r/AHl/Oj2kuwezXcwvLu/+
eNz/AN+2/wAKPLu/+eNz/wB+2/wrd+2r/eX86Ptq/wB5fzo9pLsHs13MLy7v
/njc/wDftv8ACjy7v/njc/8Aftv8K3ftq/3l/Oj7av8AeX86PaS7B7NdzC8u
7/543P8A37b/AAo8u7/543P/AH7b/Ct37av95fzo+2r/AHl/Oj2kuwezXcwv
Lu/+eNz/AN+2/wAKPLu/+eNz/wB+2/wrd+2r/eX86Ptq/wB5fzo9pLsHs13M
Ly7v/njc/wDftv8ACjy7v/njc/8Aftv8K3ftq/3l/Oj7av8AeX86PaS7B7Nd
zC8u7/543P8A37b/AAo8u7/543P/AH7b/Ct37av95fzo+2r/AHl/Oj2kuwez
XcwvLu/+eNz/AN+2/wAKDFdHrBc/9+2/wrd+2r/eX86VbxSwG5eT60e0l2D2
a7mdIn7xvqa5iXSr248dT3MV5e2duthApaGOMpMRJKShLo3QEfdIPzfSuuaK
5LE/Y5eT/eT/AOKpPJuf+fOX/vpP/iqXMtGX0aPN5bXX2uHntobo3scWrrby
SqSFJlTyRluACB8ueMD0rY8ExXCWdz597e3GSjBLuzuoGjOOQDcO5bt907Rj
jrXYeTc/8+cv/fSf/FUeTc/8+cv/AH0n/wAVQmkOWv4kGyuX8aQzGPRpYmv4
lh1APJNY2xnkiXypBuCbH4yQPunrXX+Tc/8APnL/AN9J/wDFUeTc/wDPnL/3
0n/xVDa7iR5p4oS5vbG7jx4guUl0krY+Tbyp5k2HD+ciqoDEbOHUDk7RmjUd
Nup9UhnvYtWa1tdVhKCBp/kiNoASqxnJHmcEgcZbplq9L8m5/wCfOX/vpP8A
4qjybn/nzl/76T/4qhNJ3/re49fwf4qxBso2VP5Nz/z5y/8AfSf/ABVHk3P/
AD5y/wDfSf8AxVHMhWOLstMuo/FklqbWRdOtXlv4JSPkaSYY2g+oJmJHYOvr
XPCLxE39iG8vNUtI10+Bg62V1cMZwx8wSCJ1wcbP9aGU8++fVfJuf+fOX/vp
P/iqPJuf+fOX/vpP/iqSaVtdv6/r0G+vmeeTnxLbyStAl7ILGSS1jDBmFx5p
YpJ/tBMwjd2/ee9dvbW5gtYoTI8hjQKXc5ZsDGSe5q55Nz/z5y/99J/8VR5N
z/z5y/8AfSf/ABVNNJWE1d3INlcvp2l3y+KNdvvtV9DAbmNktljjEVwBBGM7
mQt1BHysBkfWuv8AJuf+fOX/AL6T/wCKo8m5/wCfOX/vpP8A4qi63uCPMNHX
Xm/tC8A1RRHHBdpayR3KjzAzmSAGZ2Lkr8uVAUnaQvFX7yK9P2C51P8AtoWF
0J55orEz+bDI23yUIi+dVCbgQPl3cnkivQPJuf8Anzl/76T/AOKo8m5/585f
++k/+KpXX9f16W9B9bnnM1lr8lpey3EmqfaodAUwrFK6g3JEwPCHa0gGzgZ5
wfQ1XuNO1Gy/4SZrBNVS+uJLeUP/AKRIrQlYhKU+YKXGHG1WDgDC44r07ybn
/nzl/wC+k/8AiqPJuf8Anzl/76T/AOKouv6+/wDryDX+vl/keZpHewQaY32v
WNR2zuq2wtNQtN2WTlpGLNhef9aSrAkZAFei7Kn8m5/585f++k/+Ko8m5/58
5f8AvpP/AIqnzImxBsrDitZx40v5xE4ibToESQqdpYSSkjPTIyOPcV0fk3P/
AD5y/wDfSf8AxVHk3P8Az5y/99J/8VQ2u4+ljzSwj102Mhsf7YGrjTpvtovf
M8o3WBs8rzPk+9ux5fyY69qV7S5uLCddPi1uWy8yxJTUVnaTzRcKXKiX58BQ
CcfL6d69K8m5/wCfOX/vpP8A4qjybn/nzl/76T/4qhNXuN/1/X9dTkPDgnXX
NUikF/Om4v8Aa7gXMaZLtiNY5fk4H8UfBGMgcZ6jZU/k3P8Az5y/99J/8VR5
Nz/z5y/99J/8VQpJJIVtbnNeMLK4vPDrQWwm81rm2IaFAzqBOhLAEEcAE8gj
jmsXV9G1201VJ7HUdQ1G5GmXqwPcRQhYpT5ewZSNBkkfxZ+79a7/AMm5/wCf
OX/vpP8A4qjybn/nzl/76T/4qldd/wCrWGnY8z0mzvnbSma41G7WPUVldbmx
uoTAPs8oJJndyRkqODtB6deZvA8l3dnSbhZtYm32Ba/kvTKYmc7PL2bxtJ+9
ynb72Sa9G8i5I/485f8AvpP/AIqoLHTDp1jBZWlhLHbwII408xTtUdBktk01
JXv/AFsK2lv63bDZRsqfybn/AJ85f++k/wDiqPJuf+fOX/vpP/iqOZBYg2Ub
Kn8m5/585f8AvpP/AIqjybn/AJ85f++k/wDiqOZBYg2UbKn8m5/585f++k/+
Ko8m5/585f8AvpP/AIqjmQWINlGyp/Juf+fOX/vpP/iqPJuf+fOX/vpP/iqO
ZBYg2UbKn8m5/wCfOX/vpP8A4qjybn/nzl/76T/4qjmQWINlGyp/Juf+fOX/
AL6T/wCKo8m5/wCfOX/vpP8A4qjmQWINlGyp/Juf+fOX/vpP/iqPJuf+fOX/
AL6T/wCKo5kFiDZRsqfybn/nzl/76T/4qjybn/nzl/76T/4qjmQWINlGyp/J
uf8Anzl/76T/AOKo8m5/585f++k/+Ko5kFiDZRsqfybn/nzl/wC+k/8AiqPJ
uf8Anzl/76T/AOKo5kFiDZRsqfybn/nzl/76T/4qjybn/nzl/wC+k/8AiqOZ
BYg2UbKn8m5/585f++k/+Ko8m5/585f++k/+Ko5kFiDZRsqfybn/AJ85f++k
/wDiqPJuf+fOX/vpP/iqOZBYg2UbKn8m5/585f8AvpP/AIqjybn/AJ85f++k
/wDiqOZBYg2UbKn8m5/585f++k/+Ko8m5/585f8AvpP/AIqjmQWINlGyp/Ju
f+fOX/vpP/iqPJuf+fOX/vpP/iqOZBYg2UbKn8m5/wCfOX/vpP8A4qjybn/n
zl/76T/4qjmQWINlGyp/Juf+fOX/AL6T/wCKo8m5/wCfOX/vpP8A4qjmQWIN
lGyp/Juf+fOX/vpP/iqPJuf+fOX/AL6T/wCKo5kFiDZRsqfybn/nzl/76T/4
qjybn/nzl/76T/4qjmQWINlGyp/Juf8Anzl/76T/AOKo8m5/585f++k/+Ko5
kFiDZRsqfybn/nzl/wC+k/8AiqPJuf8Anzl/76T/AOKo5kFiDZRsqfybn/nz
l/76T/4qjybn/nzl/wC+k/8AiqOZBYg2UbKn8m5/585f++k/+Ko8m5/585f+
+k/+Ko5kFiDZRsqfybn/AJ85f++k/wDiqPJuf+fOX/vpP/iqOZBYg2UbKn8m
5/585f8AvpP/AIqjybn/AJ85f++k/wDiqOZBYg2UbKn8m5/585f++k/+Ko8m
5/585f8AvpP/AIqjmQWINlGyp/Juf+fOX/vpP/iqPJuf+fOX/vpP/iqOZBYg
2UbKn8m5/wCfOX/vpP8A4qjybn/nzl/76T/4qjmQWINlGyp/Juf+fOX/AL6T
/wCKo8m5/wCfOX/vpP8A4qjmQWINlGyp/Juf+fOX/vpP/iqPJuf+fOX/AL6T
/wCKo5kFiDZRsqfybn/nzl/76T/4qjybn/nzl/76T/4qjmQWINlGyp/Juf8A
nzl/76T/AOKo8m5/585f++k/+Ko5kFiDZRsqfybn/nzl/wC+k/8AiqPJuf8A
nzl/76T/AOKo5kFiDZRsqfybn/nzl/76T/4qjybn/nzl/wC+k/8AiqOZBYg2
UbKn8m5/585f++k/+Ko8m5/585f++k/+Ko5kFiDZRsqfybn/AJ85f++k/wDi
qPJuf+fOX/vpP/iqOZBYg2UbKn8m5/585f8AvpP/AIqjybn/AJ85f++k/wDi
qOZBYg2UbKn8m5/585f++k/+Ko8m5/585f8AvpP/AIqjmQWINlGyp/Juf+fO
X/vpP/iqPJuf+fOX/vpP/iqOZBYg2UbKn8m5/wCfOX/vpP8A4qjybn/nzl/7
6T/4qjmQWINlGyp/Juf+fOX/AL6T/wCKo8m5/wCfOX/vpP8A4qjmQWINlGyp
/Juf+fOX/vpP/iqPJuf+fOX/AL6T/wCKo5kFiDZRsqfybn/nzl/76T/4qjyb
n/nzl/76T/4qjmQWINlGyp/Juf8Anzl/76T/AOKo8m5/585f++k/+Ko5kFiD
ZRsqfybn/nzl/wC+k/8AiqPJuf8Anzl/76T/AOKo5kFiDZRsqfybn/nzl/76
T/4qjybn/nzl/wC+k/8AiqOZBYg2UsafvF+oqbybn/nzl/76T/4qlWK5DA/Y
5eD/AHk/+Ko5kFjRMuCRmobq9S0tZLiTO2NSxA6n2HuelU5btVlcYbhiKw3v
HNxJFey3GRIZok+TynRXBXou4EZXIJ59TXHi6yw9J1Gv68zWlB1JcqOmtb9b
uJnCtGyuUdHxuVgehwSPf6EVP5vvXCy6ldtdNFp8sqTzncQNmwYAXccqT0x0
rpvti45DflWWAxSxdPninp16P0LxFF0ZcrNTzfeo7i9jtoTLKxCAgcKWOSQA
MDk8kVlXWqxWlpNcyLIUhjaRgoGcAZOOa5i41LUTdx390JmskumZLMmAlUEf
yvkHqHPTd2rTFV44eN+pyTrwg1zf15new3cdxBHNE+6ORQyt6g0/zfeuI0nU
ZXvYo7CV/sAUTPGyoAiyDcqgAZ7+uBiuk+2r6NVYWr9Ypqdmv66eRvUioOyd
yzqMzfZAiOyGSWKMspwcM6qcHtwTzR/Zemd9PtWPq0Skn8SKzru6DpCoDZNz
B1/66rWZ4j1SS2th5s7QWSo8tzMOCFXHyj65/SuiXLBOU3ZIxlJr4VdnRSaf
pES7pLGxRfVoUH9KcNM0pgCNPsyD0IhX/CvFU8VWd2YWl2w25clYPkVYhxtZ
vmO9u5DLgdMHnPpPhjVWvvDVtcoww28DaAF4dhwB0HHA7Cq+r1owVSasn0e/
zMo4qnOThF3a7bfI6H+y9L/6B1n/AN+F/wAKP7L0v/oHWf8A34X/AArzrTvE
WsXFvot1qer3NlbXFpA6XEVtE0U87E70mJQ7AfkC42A7iAScALo/ifULnxIt
uuum9lbUbuC403ZD/o0CM4ST5VDrjagyxIO/1xR7N3sauVrv+v60PRP7L0v/
AKB1n/34X/Cj+y9L/wCgdZ/9+F/wrzzxV4mvrDX7q3h182ckVhFPZ2ISFvtk
xeQbMMpds7VXCEEZrem8Z21p4htdEuVeO6uVyjebCRnaW+6H8wD5SNxTGR1p
KAOdv6/rudL/AGXpf/QOs/8Avwv+FH9l6X/0DrP/AL8L/hXJR+PrM4e4tr61
tntZbyO4miXZJDHty4wxYZDAgEA+w4q34d8YWniaGeSyYqYGAdTLDJjIyDmJ
3X14znjkdKaptic7bnRf2Xpf/QOs/wDvwv8AhR/Zel/9A6z/AO/C/wCFV/tM
n979KPtMn979KfsmL2pY/svS/wDoHWf/AH4X/Cj+y9L/AOgdZ/8Afhf8Kr/a
ZP736UfaZP736UeyYe1LH9l6X/0DrP8A78L/AIUf2Xpf/QOs/wDvwv8AhVf7
TJ/e/Sj7TJ/e/Sj2TD2pY/svS/8AoHWf/fhf8KP7L0v/AKB1n/34X/Cq/wBp
k/vfpR9pk/vfpR7Jh7Usf2Xpf/QOs/8Avwv+FH9l6X/0DrP/AL8L/hVf7TJ/
e/Sj7TJ/e/Sj2TD2pY/svS/+gdZ/9+F/wo/svS/+gdZ/9+F/wqv9pk/vfpR9
pk/vfpR7Jh7Usf2Xpf8A0DrP/vwv+FH9l6X/ANA6z/78L/hVf7TJ/e/Sj7TJ
/e/Sj2TD2pY/svS/+gdZ/wDfhf8ACj+y9L/6B1n/AN+F/wAKr/aZP736UfaZ
P736UeyYe1LH9l6X/wBA6z/78L/hR/Zel/8AQOs/+/C/4VX+0yf3v0o+0yf3
v0o9kw9qWP7L0v8A6B1n/wB+F/wo/svS/wDoHWf/AH4X/Cq/2mT+9+lH2mT+
9+lHsmHtSx/Zel/9A6z/AO/C/wCFH9l6X/0DrP8A78L/AIVX+0yf3v0o+0yf
3v0o9kw9qWP7L0v/AKB1n/34X/Cj+y9L/wCgdZ/9+F/wqv8AaZP736UfaZP7
36UeyYe1LH9l6X/0DrP/AL8L/hR/Zel/9A6z/wC/C/4VX+0yf3v0o+0yf3v0
o9kw9qWP7L0v/oHWf/fhf8KDpWnEYSzgiY8B4kCMvuCORVf7TJ/e/SnxXDmZ
Bu6sO1L2bH7QisTe3Wn208+oyrJJErkQpGByM91PNWPJn/6Cd5/3zF/8RWZY
3MiabZqAMC3i/wDQBU/2uX0WlyF3Lnkz/wDQTvP++Yv/AIimia4tbm3Rrhri
KZzGfMChlO0sCCoAI+UjGO/Wqv2uX0WoZ7lvMs2cDAuO3/XOSjkC5veb70eb
71mfbV9Go+2r6NRyDuafm+9Hm+9Zn21fRqPtq+jUcgXNPzfejzfesz7avo1H
21fRqOQLmn5vvR5vvWZ9tX0aj7avo1HIFzT833o833rM+2r6NR9tX0ajkC5p
+b70eb71mfbV9Go+2r6NRyBc0/N96PN96zPtq+jUfbV9Go5Auafm+9Hm+9Zn
21fRqPtq+jUcgXNPzfejzfesz7avo1H21fRqOQLmn5vvR5vvWZ9tX0aj7avo
1HIFzT833o833rM+2r6NR9tX0ajkC5p+b70eb71mfbV9Go+2r6NRyBc0/N96
PN96zPtq+jUfbV9Go5Auafm+9Hm+9Zn21fRqPtq+jUcgXNPzfejzfesz7avo
1H21fRqOQLmn5vvR5vvWZ9tX0aj7avo1HIFzT833o833rM+2r6NR9tX0ajkC
5p+b70eb71mfbV9Go+2r6NRyBc0/N96PN96zPtq+jUfbV9Go5Auafm+9Hm+9
Zn21fRqPtq+jUcgXNPzfejzfesz7avo1H21fRqOQLmn5vvXO6x450vQ9etdH
vFuPtN1EZIjGgYH72Fxndk7CBx1Iq/8AbV9GritZlht7y58QaxC8kVvJ9ljS
ELuVMFgBkjqOSc5+baBjO66cYK7qLT9SW30O20rxBa6t5ixB4pkwWil27tp6
MCpII6jIJ5BHWtLzfevNdS1K2HiWa0tEuLa9tIvtAmCrsIwuSvOT1AIIAOMZ
BCkdlb30jW0TXEeycoDIqHIDY5APpmlKC3QKRseb70eb71w3i3WPFVgsE3hy
zs72NmEcsM0beYrE4DAhwCvIz6demdu7p93diwhGpNC95tzKbZCse70UMScD
pk9euB0EcpVzaluo4YnllkWONAWZ3OAo9Saz/wDhJ9E/6DOn/wDgSn+NYPjC
4E3he6jAbLPEOf8ArqtULNrN9MVnS1vI7eJfOjW3EU0SjALKw+8B/wDrqZKw
1qdxa6laX0ZktLqG4RTtLQyBwD6ZFT+b71xehBLDXtWhXLII4CjD+JT5hB/I
iuh+2r6NVKN1cTZp+b70eb71x9tqfiFtZa3uIbMWafMZ1jbLr2AG7hv5e/Gd
37avo1HKFy7dXyWds88gYqnUKOeuKgm1Z7eIyz2F1HGCAWJjOMnHZ81x/ivV
74ebb2XmNthRxBHEGeVmcg+pwAueK5y48VeMruBoZ9P1Bo2xkfYsdDnsvtUv
RjR7B5vvR5vvXM6Lqk09vOtxN55imKrKoALKVVhnHGRuxxjp0pddvtWTSpJN
CS2e+T5liulJWQd1BDDB9CeOxxnIpRuriudL5vvUTXhExiSJ5GChjtK8A5x1
I9DXJ+FdV1+90v7X4ht7a2mlwYreCNlZF/29zHk+nbvycDSur54or6aC3M8i
xQgReeIN2XYff7evvjHehxBM1ZtUS2eMXEUsKucB2wVH1IJwMkDPuKteb71j
asITp9xbSW78ROsM0rhgWI6Ali31JGAAewqvp2o3k1rI9/FHG5c+WsWfuYGM
5PXOeeMjBwpJAi61XUfmdD5vvR5vvXj3g0x6To9prcWljSLSDSG+13GyM/bX
O0q+yNsttwxy21jvx6417LxlrlxGbKeK0tdSbUBaLLPDhEUw+bkxpM+W4IAE
ncHjpWnJrb+t7Ceh6V5vvR5vvXlreO9euIbO2sbO2nv55rxS8MauhWCTYNqv
NHknIJO44x909u3F9cTacGCC2vHiyBIvmLFIR3AYbgD6EZx1FJRurg3Z2Nvz
fejzfevNvCut+Pr3XLuHxHYaTZ6faMU8y3ikLXLYyDGTIRtwQSxH+zjO7b1O
q3e+yKKGAZ1BbONvPX35wMe9ChcTlYvt4gslKEO7RndmQIcJj1789sA1dgvY
rqBJoX3RuMqcYz+dchiJ7W7kmuJYniZgsanCxgH5eP4s9fxwOaTw7dtHd3S+
U/lsqksH+VT2UL75JzntVOmraEqbvqdp5vvR5vvXnWp6RoU3xA0qeXRbB5Jb
a6lldrWMs7hodrE45IycE8jNTW3i3Upb6KdxZmwmv5rFbVY2E6GPeN5fdhs+
WTt2jAPU45jl0u/61saeZ3/m+9Hm+9eUX/inU9R8JXTXhsnt9U0W6uYY7eNl
e3AQfKxLEP8AfALALgjpzx0Ona9frri2N55cFo0Q+yJ9mZmnARSW80PtGCT8
hUHjIJFPk1sJu39en+Z23m+9Hm+9cR401jxNp+jG98L21ndzw5aa1uYnZpE9
Y9rj5h/d5z25ADXvDl/rcmjRS+I0tI9Rk+Z4bNCEiHZSSzbmHcjjnAzjJOUL
mvqt3exS2f2De8jS4aIp+7ZO5d8fJjqCOp4wey6LdXs0c32ve0YlIgllTy5J
Ez1ZMcegPGRzgd2/bV9Gp0V2rSoMNywFVbS1hXIJoiZ5D/tH+dZF/ocl7eic
Xbwp5YjZUX5iMk8HPHX07VoNqUrMT5Npyc/69/8A43Sf2hL/AM8rT/v+/wD8
bpVcOq0OSpG6HCo4S5ouzM2Dw4LbUobmK4fyoixETjcRkEYDZ6cjrnp1rX8o
1F/aEv8AzytP+/7/APxuj+0Jf+eVp/3/AH/+N0UcNGinGnGybuE6rqO8nce9
sskbRyIGRgQysMgg9jWBL4Pgm1AOzQiwEvm/Y1h2jds29QcYyM9K3P7Ql/55
Wn/f9/8A43R/aEv/ADytP+/7/wDxunUw8atueN7amM6dOduboVbHQ7fTpmkt
/MAKBAhbIVR0A71f8o1F/aEv/PK0/wC/7/8Axuj+0Jf+eVp/3/f/AON06dH2
ceWEbI1lLmd2xLiMqID6XEP/AKMWud8ZaZca3YLZxsyx43ghSwZwwIVgOdpG
focHsa6CS7aYIJFgRVkWT93IzE7WDAcoO4Heo/OFW6DnZ7NNNeqM5SS03TTX
3nKWmm+IhY29nG0lqsYxve5+VB/sheT9D6cEV032GQaOLBNRvEk27TdhlaXO
ck5cMOee3APGMDEvnLR5y12VJSqK0jjo0I0tY3+epmTeGraW2t7JL69h02KO
OI2MbJ5cip03EqXGcDO1hnH1rR06yh0yCWKFpGWSeWc7yCd0jlyOB0yTinec
tHnLUcmtzbW1hqWUKavNqYaTzpYEgZSRtCqzMCOM5y57+lZ7eG7ZtZOo/bLz
BuPtRtgU8oy+X5e4/LuPy9t2PatLzlo85aXs0O7OP03w3Nc6n5V5b6mmkQWM
1mkV/PCzFZCo2p5RJ2hU+853cjnius0yzm06ExS6pe344Cm6EWUA7Aoi5/HJ
qTzlo85aFTsDbZa8yjzKq+ctHnLT5BalrzKPMqr5y0ectHIGpa8yjzKq+ctH
nLRyBqWvMo8yqvnLR5y0cgalrzKPMqr5y0ectHIGpa8yjzKq+ctHnLRyBqWv
Mo8yqvnLR5y0cgalrzKPMqr5y0ectHIGpa8yjzKq+ctHnLRyBqWvMo8yqvnL
R5y0cgalrzKPMqr5y0ectHIGpa8yjzKq+ctHnLRyBqWvMo8yqvnLR5y0cgal
rzKkgf8A0iP/AHh/OqPnLTo7kJIr9dpBpOGgIsWMWdNszj/l3i/9AFT+T7VT
gvZLa3igRbd0iQIrPI6kgDAyAh5wPWpP7Tm/55Wn/f8Af/43XPyy7HTdFjyf
aq13Fg2gx1uP/aclL/ac3/PK0/7/AL//ABuopr2aZ4G2Wg8qTzMec/PysuP9
X/tfpRyy7BdFjyjR5RqL+0Jf+eVp/wB/3/8AjdH9oS/88rT/AL/v/wDG6OWX
YV0S+UaPKNRf2hL/AM8rT/v+/wD8bo/tCX/nlaf9/wB//jdHLLsF0S+UaPKN
Rf2hL/zytP8Av+//AMbo/tCX/nlaf9/3/wDjdHLLsF0S+UaPKNRf2hL/AM8r
T/v+/wD8bo/tCX/nlaf9/wB//jdHLLsF0S+UaPKNRf2hL/zytP8Av+//AMbo
/tCX/nlaf9/3/wDjdHLLsF0S+UaPKNRf2hL/AM8rT/v+/wD8bo/tCX/nlaf9
/wB//jdHLLsF0S+UaPKNRf2hL/zytP8Av+//AMbo/tCX/nlaf9/3/wDjdHLL
sF0S+UaPKNRf2hL/AM8rT/v+/wD8bo/tCX/nlaf9/wB//jdHLLsF0S+UaPKN
Rf2hL/zytP8Av+//AMbo/tCX/nlaf9/3/wDjdHLLsF0S+UaPKNRf2hL/AM8r
T/v+/wD8bo/tCX/nlaf9/wB//jdHLLsF0S+UaPKNRf2hL/zytP8Av+//AMbo
/tCX/nlaf9/3/wDjdHLLsF0S+UaPKNRf2hL/AM8rT/v+/wD8bo/tCX/nlaf9
/wB//jdHLLsF0S+UaPKNRf2hL/zytP8Av+//AMbo/tCX/nlaf9/3/wDjdHLL
sF0S+UaPKNRf2hL/AM8rT/v+/wD8bo/tCX/nlaf9/wB//jdHLLsF0S+UaPKN
Rf2hL/zytP8Av+//AMbo/tCX/nlaf9/3/wDjdHLLsF0S+UaPKNRf2hL/AM8r
T/v+/wD8bo/tCX/nlaf9/wB//jdHLLsF0S+UaPKNRf2hL/zytP8Av+//AMbo
/tCX/nlaf9/3/wDjdHLLsF0S+UaPKNRf2hL/AM8rT/v+/wD8bo/tCX/nlaf9
/wB//jdHLLsF0S+UaPKNRf2hL/zytP8Av+//AMbo/tCX/nlaf9/3/wDjdHLL
sF0S+UaPKNRf2hL/AM8rT/v+/wD8bo/tCX/nlaf9/wB//jdHLLsF0S+UaPKN
Rf2hL/zytP8Av+//AMbo/tCX/nlaf9/3/wDjdHLLsF0S+UaqiG+hkuPIEWyV
w4JkKkfKo7A+lS/2hL/zytP+/wC//wAbo/tCX/nlaf8Af9//AI3Q4yfQLo5a
TwhqEniW81hrmI/aLYW6wlmIjGF5Bx6qTjHeuu8o1F/aEv8AzytP+/7/APxu
j+0Jf+eVp/3/AH/+N03zvdCSitiXyjR5RqL+0Jf+eVp/3/f/AON0f2hL/wA8
rT/v+/8A8bpcsuw7oq6zpcmpaVNaxsquxVlLdMqwbB9M4xms29sPEt5cm4/4
lkUhtzbnY7YKEYPGytz+0Jf+eVp/3/f/AON0f2hL/wA8rT/v+/8A8bqXTb3Q
1JIzNE0rUraa5uNTngkllSONRCOFVAQOcDnn9OtbHlGov7Ql/wCeVp/3/f8A
+N0f2hL/AM8rT/v+/wD8bqlGSVrBdEvlGjyjUX9oS/8APK0/7/v/APG6P7Ql
/wCeVp/3/f8A+N0csuwrogv9IhvopFkVizBDxIyglG3JkA84bnms6bwrZ3F3
cTNYRotxE0Dosw2qjPvbbtjVs4yoO7gGtj+0Jf8Anlaf9/3/APjdH9oS/wDP
K0/7/v8A/G6XJLsGgsdosRcruJdtzMzFixwBySc9AB+FSeUai/tCX/nlaf8A
f9//AI3R/aEv/PK0/wC/7/8Axunyy7BdEvlGqzQXKXUrpb288UsaKVlkK4Kl
j02nP3h+VSf2hL/zytP+/wC//wAbo/tCX/nlaf8Af9//AI3ScJPoNNIpXtjd
3kk8ptLZZJYTF/rzgHnDH93kkcdTjgelaXkn0qL+0Jf+eVp/3/f/AON0f2hL
/wA8rT/v+/8A8bpRpuN7LcHK+7EXTrdLP7GtvEtts8vyQgCbcY27emMdqy73
wvavpDafp1hpFvC7hnin08Swtj1jVkGenOe1av8AaEv/ADytP+/7/wDxuj+0
Jf8Anlaf9/3/APjdU4yfQLruZFj4Q06HQ4dMv7W21FEkaZvPt0KmRiWZghyF
GWOB2HGTW1HapDEkUSKkaKFVFGAoHQAdhTP7Ql/55Wn/AH/f/wCN0f2hL/zy
tP8Av+//AMbotLsK6JfKNRzWaXERilXchxkZI6c9qT+0Jf8Anlaf9/3/APjd
H9oS/wDPK0/7/v8A/G6LS7BdGRLoeoyCOP7VAyDIZ3jyyjHGPXPfJ496u6Xp
A0+3G8h7lwPOkGfmPPr6Zq1/aEv/ADytP+/7/wDxuj+0Jf8Anlaf9/3/APjd
O0uwkooVrOJp0naJDMilUkKjcoOMgHsDgZ+gqBNFsItRk1GOwtUvpF2vcrCo
kYccFsZI4H5VN/aEv/PK0/7/AL//ABuj+0Jf+eVp/wB/3/8AjdLll2HdFaLQ
NLgN0YtMs4zd5FyUgUednOd/HzdT19TTodE063v5L+DT7WK8kXa9wkKrIw44
LAZI4H5Cp/7Ql/55Wn/f9/8A43R/aEv/ADytP+/7/wDxujll2HddyXyjR5Rq
L+0Jf+eVp/3/AH/+N0f2hL/zytP+/wC//wAbo5ZdhXRL5Rp8MRE8Z/2h/Oq/
9oS/88rT/v8Av/8AG6VdSlVgfJtODn/Xv/8AG6OWXYLoo+GvDWlaloUN3dwy
yTvJKGYXMi9JGA4DADgCtb/hDNC/59Zv/Aub/wCLo8Gf8itbf9dZ/wD0c9b9
cpqYH/CGaF/z6zf+Bc3/AMXR/wAIZoX/AD6zf+Bc3/xdb9FAGB/whmhf8+s3
/gXN/wDF0f8ACGaF/wA+s3/gXN/8XW/RQBgf8IZoX/PrN/4Fzf8AxdH/AAhm
hf8APrN/4Fzf/F1v0UAYH/CGaF/z6zf+Bc3/AMXR/wAIZoX/AD6zf+Bc3/xd
b9FAGB/whmhf8+s3/gXN/wDF0f8ACGaF/wA+s3/gXN/8XW/RQBgf8IZoX/Pr
N/4Fzf8AxdH/AAhmhf8APrN/4Fzf/F1v0UAYH/CGaF/z6zf+Bc3/AMXR/wAI
ZoX/AD6zf+Bc3/xdb9FAGB/whmhf8+s3/gXN/wDF0f8ACGaF/wA+s3/gXN/8
XW/RQBgf8IZoX/PrN/4Fzf8AxdH/AAhmhf8APrN/4Fzf/F1v0UAYH/CGaF/z
6zf+Bc3/AMXR/wAIZoX/AD6zf+Bc3/xdb9FAGB/whmhf8+s3/gXN/wDF0f8A
CGaF/wA+s3/gXN/8XW/RQBgf8IZoX/PrN/4Fzf8AxdH/AAhmhf8APrN/4Fzf
/F1v0UAYH/CGaF/z6zf+Bc3/AMXR/wAIZoX/AD6zf+Bc3/xdb9FAGB/whmhf
8+s3/gXN/wDF0f8ACGaF/wA+s3/gXN/8XW/RQBgf8IZoX/PrN/4Fzf8AxdH/
AAhmhf8APrN/4Fzf/F1v0UAYH/CGaF/z6zf+Bc3/AMXR/wAIZoX/AD6zf+Bc
3/xdb9FAGB/whmhf8+s3/gXN/wDF0f8ACGaF/wA+s3/gXN/8XW/RQBgf8IZo
X/PrN/4Fzf8AxdH/AAhmhf8APrN/4Fzf/F1v0UAYH/CGaF/z6zf+Bc3/AMXR
/wAIZoX/AD6zf+Bc3/xdb9FAGB/whmhf8+s3/gXN/wDF0f8ACGaF/wA+s3/g
XN/8XW/RQBgf8IZoX/PrN/4Fzf8AxdH/AAhmhf8APrN/4Fzf/F1v0UAYH/CG
aF/z6zf+Bc3/AMXR/wAIZoX/AD6zf+Bc3/xdb9FAGB/whmhf8+s3/gXN/wDF
0f8ACGaF/wA+s3/gXN/8XW/RQBgf8IZoX/PrN/4Fzf8AxdH/AAhmhf8APrN/
4Fzf/F1v0UAYH/CGaF/z6zf+Bc3/AMXR/wAIZoX/AD6zf+Bc3/xdb9FAGB/w
hmhf8+s3/gXN/wDF0f8ACGaF/wA+s3/gXN/8XW/RQBgf8IZoX/PrN/4Fzf8A
xdH/AAhmhf8APrN/4Fzf/F1v0UAYH/CGaF/z6zf+Bc3/AMXR/wAIZoX/AD6z
f+Bc3/xdb9FAGB/whmhf8+s3/gXN/wDF0f8ACGaF/wA+s3/gXN/8XW/RQBgf
8IZoX/PrN/4Fzf8AxdH/AAhmhf8APrN/4Fzf/F1v0UAYH/CGaF/z6zf+Bc3/
AMXR/wAIZoX/AD6zf+Bc3/xdb9FAGB/whmhf8+s3/gXN/wDF0f8ACGaF/wA+
s3/gXN/8XW/RQBgf8IZoX/PrN/4Fzf8AxdH/AAhmhf8APrN/4Fzf/F1v0UAY
H/CGaF/z6zf+Bc3/AMXR/wAIZoX/AD6zf+Bc3/xdb9FAGB/whmhf8+s3/gXN
/wDF0f8ACGaF/wA+s3/gXN/8XW/RQBgf8IZoX/PrN/4Fzf8AxdH/AAhmhf8A
PrN/4Fzf/F1v0UAYH/CGaF/z6zf+Bc3/AMXR/wAIZoX/AD6zf+Bc3/xdb9FA
GB/whmhf8+s3/gXN/wDF0f8ACGaF/wA+s3/gXN/8XW/RQBgf8IZoX/PrN/4F
zf8AxdH/AAhmhf8APrN/4Fzf/F1v0UAYH/CGaF/z6zf+Bc3/AMXR/wAIZoX/
AD6zf+Bc3/xdb9FAGB/whmhf8+s3/gXN/wDF0f8ACGaF/wA+s3/gXN/8XW/R
QBgf8IZoX/PrN/4Fzf8AxdH/AAhmhf8APrN/4Fzf/F1v0UAYH/CGaF/z6zf+
Bc3/AMXR/wAIZoX/AD6zf+Bc3/xdb9FAGB/whmhf8+s3/gXN/wDF0f8ACGaF
/wA+s3/gXN/8XW/RQBgf8IZoX/PrN/4Fzf8AxdH/AAhmhf8APrN/4Fzf/F1v
0UAYH/CGaF/z6zf+Bc3/AMXR/wAIZoX/AD6zf+Bc3/xdb9FAGB/whmhf8+s3
/gXN/wDF0f8ACGaF/wA+s3/gXN/8XW/RQBgf8IZoX/PrN/4Fzf8AxdH/AAhm
hf8APrN/4Fzf/F1v0UAYH/CGaF/z6zf+Bc3/AMXR/wAIZoX/AD6zf+Bc3/xd
b9FAGB/whmhf8+s3/gXN/wDF0f8ACGaF/wA+s3/gXN/8XW/RQBgf8IZoX/Pr
N/4Fzf8AxdH/AAhmhf8APrN/4Fzf/F1v0UAYH/CGaF/z6zf+Bc3/AMXR/wAI
ZoX/AD6zf+Bc3/xdb9FAGB/whmhf8+s3/gXN/wDF0f8ACGaF/wA+s3/gXN/8
XW/RQBgf8IZoX/PrN/4Fzf8AxdH/AAhmhf8APrN/4Fzf/F1v0UAYH/CGaF/z
6zf+Bc3/AMXR/wAIZoX/AD6zf+Bc3/xdb9FAGB/whmhf8+s3/gXN/wDF0f8A
CGaF/wA+s3/gXN/8XW/RQBgf8IZoX/PrN/4Fzf8AxdH/AAhmhf8APrN/4Fzf
/F1v0UAYH/CGaF/z6zf+Bc3/AMXR/wAIZoX/AD6zf+Bc3/xdb9FAGB/whmhf
8+s3/gXN/wDF0f8ACGaF/wA+s3/gXN/8XW/RQBgf8IZoX/PrN/4Fzf8AxdH/
AAhmhf8APrN/4Fzf/F1v0UAYH/CGaF/z6zf+Bc3/AMXR/wAIZoX/AD6zf+Bc
3/xdb9FAGB/whmhf8+s3/gXN/wDF1Fc+D9EjhLLbTA5H/L3N/wDFV0lQXn/H
sfqP50Ac2PCWjf8APvN/4FS//FVYs/DelWd7DcQ27iRHypeeRwD9GYijVLbU
7poksrlLaJSHd/42IPA6YA9fXp0znSt/MxF523zMjdt6UAUfBn/IrW3/AF1n
/wDRz1p6lqH9nwKyWlxeTu22O3t9u9z1PLsqgAZOWIHbqQDmeDP+RWtv+us/
/o56k8U+K9J8IaO+patcpFHnbGhPzSv2VQMk++BwOaTdhos6Jrdtr1gbq2Sa
IpI0M0E67ZIZFOGRgCRkexIPUEir0NxDcBzBNHKEcxsUYNtYHBBx0IPauZ8B
apo+saJcXejXTXkct1JJcXPkvGsk7fMwUOAcAFQOOgHJINcHpV1baTY3EB1G
7itD4huItZddRlMlrCXl8pmO/dCrPt3SDaSOSe9PW9n2/wAl92oul13/AM/x
0+89iluIYDGJpo4zK/lxh2A3tgnAz1OAePai4nS2tpbiQOUiQuwRC7YAycKA
ST7AZrx7U5IJ7jTZbvV7mTw3ba+Es9SfUpEBia3Yt+/DgsFkyquWJ6qD1pk3
iq3h8V2d6PERtrY6nc2t5bXmpuzqgSUAyRFhFCu5QFGwsflO/JIpN6X/AK2X
+Y7f19/+R6zomr2+v6JZ6taJKlvdxCWNZQAwB9QCefxq/XltnqCxfs6pd2mr
NZvDpR23NvMqssi8BQ3OCW+XjnnjBrC1PXbeIa4IfGl24i0CG+ixqo+a7O75
hg8fwfu1wh3DKnIqpWUmu3/Bf6fkCTaXn/wF+p7fUcNxDcBzBNHKEcxsUYNt
YHBBx0IPavGdc8XxT6kuo2viI2r217YiSOXUnAkifyi5SFWWMQ4ckyOHySw+
UBTUuh3lhptjPC2rXEVlJr1xHqso1KUtbwlpTCzNvzCrttzINpbjJOc0Wf8A
Xy/zFfS/9df8j1GfXrS38SWmhMk5u7qCS4RhGfLCoQDljxn5ugyfXGRm0t7u
1WSw+y3I2QrN9oMf7pssRtDd2G3JHoR615dqM+hN4o8PW0fiueWzjsNQf7W2
pASMhKMAJwQxUbWAYNn92QWOGrkz43uLnToWPjeaGZ7DTNwS8iBWTzysw5HX
bh2z83qdvFJatL+uv+Q2tH/Xb/M+h6K8bvPEltZvq1gPEE8+n2uuRIyDV9kz
xNb7mRbhpF2ASKx5dR8pUHse58DfL4QM9vqB1OWSSaQO+om825Y7IzJuYZVd
qkKcZBPOck+zzf1smJ7pf11/yNXVPEFppOp6XYXEVy02pTGGFo4SUVgpb5n6
DgdM5PYYBI1q8ROsabcz+D9Rm1+STxF/aB+32N5qDKIZjHICpt2bEQV8ICFH
B75zWzomr3NxJoU+m6nd3XiKV3TW9MuLp2EWEbeWhJIhCyKoUqFyGA5zRsnf
o/8AL+mwe/8AXn/SR6rRXkr3Vrqfgy/vLXxHqx8SjSpXu9Pi1GVXhuFG4log
cwlXUqANqnOCGyKwvEHi2A6hNJp3jSe2jkttNlBi1EMrSGYrLtDlgMLgsFwP
l+bjcCfa5f66/wCQdL/10/zPd6K8UvPENrp1xrkkPi64dNO1mzS0ifVdw2OY
/OBJbMin95kMWVdpwFwa07e/vLnXbu6vvG0Wm3tvc3Cy6cqP5ggG7Y2xpmi2
bCj+aIscZJPzUr6X/rZf5jtrY9VlljgheaaRI4o1LO7nCqBySSegpyOsiK6M
GVhkMDkEeteAPrH2rwjZW7+I7y+utT8N3j3MT6izM0qbSgCA8H5ZF4GWAYNu
5rp31Sws7nw+1hro1Gz8mBUsYNclW5DmXDOg3kXK53KyN90JgelUlrb+uv8A
kJ6K/wDXT/M9ZooopAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQ
AUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAB
RRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFF
FFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUU
UAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAVBef8ex+o/nU9QX
n/HsfqP50AVhT0/1if7wpgp6f6xP94UAZvgz/kVrb/rrP/6Oet+sDwZ/yK1t
/wBdZ/8A0c9b9ABRRRQAUUUUAFFFFABRRRQAUUUUAZ2r6SdUW3MeoXlhNbyG
SOa1ZM5KlSCrqykYY9VOO2KfpelxaXDIqyyzzTSebPcTbd8z4A3NtAXOFA4A
GAOKvUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFF
ABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUA
FFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAU
UUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRR
RQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFF
ABUF5/x7H6j+dT1Bef8AHsfqP50AVhT0/wBYn+8KYKen+sT/AHhQBm+DP+RW
tv8ArrP/AOjnrfrA8Gf8itbf9dZ//Rz1v0AFFFFABRRRQAUUUUAFFFFABRRR
QAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFA
BRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAF
FFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUU
UUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRR
QAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFA
BUF5/wAex+o/nU9QXn/HsfqP50AVhT0/1if7wpgp6f6xP94UAZvgz/kVrb/r
rP8A+jnrfrA8Gf8AIrW3/XWf/wBHPW/QAUUUUAFFFFABRRRQAUUUUAFFFFAB
RRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFF
FFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUU
UAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQ
AUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAB
RRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFQ
Xn/HsfqP51PUF5/x7H6j+dAFYU9P9Yn+8KYKen+sT/eFAGb4M/5Fa2/66z/+
jnrfrA8Gf8itbf8AXWf/ANHPW/QAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQA
UUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABR
RRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFF
FABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUU
AFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQA
UUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFQXn/Hs
fqP51PUF5/x7H6j+dAFYU9P9Yn+8KYKen+sT/eFAGb4M/wCRWtv+us//AKOe
sr4mstv4ctrxr+6shFf2yPNBeyWwEbzIr7ijLkbSeT06jFavgz/kVrb/AK6z
/wDo56TxboF94isLe0tNQt7IRXMVwzTWrTbjG6uoGJEwMrz1yPSjqvVfmHR+
j/I5rw1rjW2seIv7MuNR17w9AIPsjRStdt57cPFHK5JcfcJJbauTkjmppviY
tybAaRpF1cvLqh0+5i8y3ZkIiL4VhNsLHjB3EDawODgHpPEehXHiDw7/AGab
2OGZmieSQwb4pNrBmV4y3KNggru6Hqe/OL4A1VL5r5ddsRcf2gmoxgaYwjWR
YfJK7fOyU24wMggjqaFvr/Wq/S/4fM6af1o/1sReDfFcsIOm6kNVvJp9WvLW
K+mVShdGdljzkfwqcbV2DpkdK7G81R7Tw7capLZywSQ27zG3mKllIBOCULL+
RNcrbeA9XtxYZ16xY2mrS6oSNNcb2k3ZT/X8Ab3557ehz1suYtGZdWIuiY9k
/wBltXw+eDtjBdsc+pqodL+X5IUnq301/N/oZNpo91faGl2+q3qapcwb/PSd
hGjMvQRZ2YGcfdz3znmtSS4nS7gLRSxxI4hdnZdsm4cMACTwwA5A6mufs7mW
yt0sYtR1E2CDYm7QrkzomOFEmNvHTJTOPfmr8mrwTQTwv9vMZ2+RjSLrdGRj
BYlTuOQD2/rXVOEnLa69Hp+H/AOWEoqK119Vq/6+Y3T/ABS9xBO9zp1wkgvH
tbeJNhaYgn5R8/UBSSThfQ1I/i6yiaKKS0v1uZLg2zW4h3PHJt3AMQSvIxgg
kHOegJGL5EC7zHdaijx3rXtq40S6zGzE7lfj51IYjjafeiWJJbqG9N1e/axd
rdTOdButrlU2Kqr/AAgKT1LHJz7Vp7Gm3qn9z/y/p+RPtZrZ/l5/8A3LTxXa
XU0Ef2S9iEs72xeWNQscqhiUJDc8KeVyvvViDXkuCWTT7/7OYWmiuBCGSZRj
7u0lsnOQCAT2rlUtcLAkl5dOkd+96wHh+7G4tnK9eB8zfp+NuN2j0iTSRqOp
raCBoIGTRLlZkGMLufbhsD0VScDnrlSoQ+yvwf8AkONaV9X+X+ZZvvGqx2t2
LbT7gXtq8KyQStEdokbbztkIB7YJByRxjmuojlLW6yyRvCSu5kfBZPY4JGfo
TXn8mnpL5ubq4jDwwxBIfDt0iJ5T71IHpknI/LFdBHeaMbhL240yeTUAoD3S
6HcKxOMHBMZIGOMZPHFTVoxt7if3Psu/ncdKrK/vv8V+hR0XWm1C/tL7UxqE
Avmb+z13bLcLgkKQGyzlcnLjHHy++vqrPd63YaUZZooJIpbiUwytGzbCqhdy
kEDL54I6DtkVj2f2a3ezilm1KWwsXL2sH9jXKspwQoZ9p3BQxAwB2znFWbnU
FuDbXKyXiahblwsv9h3RjZW6qUxnsv8AF1GenFVON53inbXo/O3T0v56ijL3
GpPXTqvn169DU8P3c11psqTS+ZLb3Etv5rclwjkAnHfGM+9VDb3Fh4gtDBd3
UyPDK96ksrOpAA2sAThCW7LgYzxxUVjqFtp1rDb2x1AqC7zNLo90zSuxJLZC
gD5jnoeOOOtZmnyXtvq73d5rmp3NvI5eS2Tw9PGG4wo3bSwUccf4mpVN80mt
Fr0ev4fP7hupG0U9de60/H5ff857We5+w6LqLXtz5msPsnQykqokRmXYp4Ur
gDjGRnOTzW0NcMbWMElnPJNdRv8ANEY9nmICWT5mBzkHH/1jjHtGs7e4tRI+
pSWdkzNaQDR7lShII+Ztp3bQSBwOvOTzUmoTaffWrQg6rCRci4ikj0q53R9N
wHyfxfOM/wC1+bnFSl8Lt6Pzt93/AABQlyx319Vr3+80bfxPazWcF41tcQ20
scsrSSGPESRnDFsOT19M++KwdY8XW2paTP8A2ddXFvPbSwSMIZI3MkbSBSMx
s35ZDdOMHm1GmjpFqkDR6sbe/wAr5a6XcjyVK4YL+77nLfjUVxM9/pT2V9f3
8rAIY5I9BuU+ZWDBnGDuOVHQqOT7YqEIRkpcr3Xf/J+n5CnObjbmXXt/wPU3
U8QIxuY20+/S6gVX+zGNS8iscKy7WIxnIOSMY5xVCPxvp0hRFtb1pmuTa+XH
GsmH27uWRint97PX0JGbeRw6hFcyXVzfteziNPMXQ7kRCNG3bDGQSVY53Zbn
6cVnXMN1FewT20t1Iz6hHcuV0G5RYdsRT7p6rwo2jnnrThQpv4l+fl5eop1p
rWL/AC8/P0OofxhZRSRwSWWoLdNcfZjbiEMyPt3DJBK4Ixg7u/scS/8ACUWo
iO61uVuhci1No/lrJ5hG4DJfZyOQd3PTrxXM3+8zWlzbm/lv31BLi4uP7GuF
jRVjZRhMZ2gYGNxPJOfS7J5MltdCRp57m8lD3JuPD9y8Lqq4VRHgEAYBzuJz
n8JdCnZOz/H/AC2389hqtO9r/l5+e+3kaOs3d0ND1WRJLi0kexNzFkgSRMFw
y9wMYXp/eOD3ptv4rhi04tNZXxa2khgmJ8snLgbX+/yDuHvz061RuBaSeHYt
Khm1NHS3a38+TR7p/kZcEY2g+mMk4wOtUZ7LzIbiJL+9RLgwPJnw/dH54goB
HoDtGR196qFODVpLr2fl+n4ilUlo4vp3Xb/M65NbjlvVhjs7t4DI0X2xUUxB
lzuB53AAgjOMZ71ljx9ojNPteSRY4XmVoiknmKvXCoxZev8AGF7+hqGyulsZ
JIYbi/8A7OeV5fJbQ7nzF3Hcyh9uNu4n+EnBxnoaqnf/AGJNo66hf/YzC0EO
7QLkuqHgBjj5sLwMBTkAnPIMRowvqn+P+W/4FurLSzX4f5/8E2l8W6eIbiW4
juLRIYo5gbhVTzEkJCkc8ZIx82Md+OaTT/EVrrEkc9m7BYZvIuIzIjAbxlTl
GZTyAOCeprAktkuLhpZr2/DfZYYYzFoV0pR4m3o/IIPzdRjkce9bK6qJbOaK
9lvpZXxsaLRLqNEI5B2lSSc8/e7DpRKjBL3U/wAf8vUUas2/ea/D/MqeKNcl
eyK6euoIkV7FDJdwbFjLbwGQknfjsSoxnjPUVrv4ktUm5t7k2nn/AGc3oVfJ
EmduD827G75c7cZ71zV1bh7S5sbS+vYrGW5+0rHLoF1I8bbw5UMNvy7gTyM8
4zUyxW4jks2uNRbS5bj7S9v/AGJc7w24OVV9vCFxnG0nkjNX7KHIlb8Htp5b
/gS6k+ZtP8V5+fp5nSJrcct6sMVneSQGRovtaIDEGXOQcHcBkEZ24zxmq8Ot
/wBpWa3ttBcRW0bLIszsmyaMkq2NrHoMnDYIIHFZ1ldjT5pI7a5vxYNM8whb
Q7kyKWO4qH2427ieqk4OM9DUWmmytLu9uLlbt2u4xHKttod1AknXLOMNljk8
jH+GXsoq7S/B/wBfoae1bdr/AIr+v1K1/qpuNX1A3661aQWd1BDC1nMqgFtv
DhWIIYnOSOnGQeDZ0/xNBpGnTjUruS4na+uUjEs0aMyo+OrsqgDI4BHXgVny
2ss0d6j6jdH7XLDK5/4R67yDHtx377Rn8ams4jZSLcxX14LwTTSbzoF15bJK
QzIU6/eAIIYdMc10OEHHla/B9l5d9zDnlzXX5ru/PtaxtX8kGseH21i2v7yO
M2/mW3kSNGVfnGQD85JwMHI44HPN29v7vTPC0t9NCJbyC18yRFxguF57jjOT
9Olc7qs9/fvam31vULTyPmOPDs8m9/XlcYHYY47knmrs99HdaTJp08+pSJLa
NDJKdGud7SEYL524A5Py4/GsHSdl2vtZ6L7kbxqLm17b3Wv4lhfFRjFrHdaT
fR3FzEHiXMOJWyAVT951+bOD2BParOmazcX+t6nYyWMkUVo6qspKY5UHBwxO
TnIwOnXniufnMtzaxxzX96JbdUFrJFoN2vkup5fGTuJHHPGM9iQdbQ8nWr6d
Z5mF0qySpLpk9uA6qq5V34xx93k+/FOdOCi3b8H3X6EwnNtJvt27f5nR0UUV
wnYFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRR
QAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFA
BRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAF
FFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABUF5/wAex+o/nU9QXn/HsfqP
50AVhT0/1if7wpgp6f6xP94UAZvgz/kVrb/rrP8A+jnrfrA8Gf8AIrW3/XWf
/wBHPW/QAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUU
UAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQ
AUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAB
RRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFF
FFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUU
UAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFQXn/HsfqP51PUF5/x7H6j+dAF
YU9P9Yn+8KYKen+sT/eFAGb4M/5Fa2/66z/+jnrQ1PW9J0VI21XVLKwWUkRm
6uEiDkdcbiM1n+DP+RWtv+us/wD6Oes74lmVfC0BgRHlGp2RRXcqrN9oTAJA
OB74P0NHVLu1+YdGbVp4o8P38cslnrumXEcRUSNDdxuELHaoJB4yeB6mtGC5
t7pXa3njmVHaNjG4YK6nDKcdCDwR2ri9f1PVrLQbi91LRdKec6lbW/lSOZo1
hZ4sMrGNS5DsSMhcHnJ24PPaBrOpaTYvofhzS1luZNR1GZQkUbJFFHcbcBGm
hHVx0bjHQ54Fq/68v0YW0v8A11/VHrVFc1qmuazpvw8utbm02CDV7eyaeS0l
mzGjqMkblzkcEgA89MjqMX/hMNat2v7e/fSYbhbO0u7d1imZU852QoVUlpmB
UbQoUsSBgdaOrX9f1oHS/wDXT/M7+ivMbfx14qlvYNPaw01ZzrB02SWdHiIU
wCVW8pXfB6kjfzgDCkkra07xtrpl0+XUYtN+yy6nc6ZKIEkDu0QkIlXLEICY
8bDu653dgef9dP8ANfeH9fn/AJM9EpskiQxPLK6pGgLMzHAUDqSewrifDviH
xbr7x3B0iK00y9tTPbXU0cbCBiAUyEuC0oIP92I8e/D/AIl/2ivg2MW13bxu
bu1ScvbswfMyDgBxgZ5IJORkcZzQ01p/XYFZnR2fiLRNRRXsdZ0+6R5fJVoL
pHBkwW2DB+9gE464FaVeQXVyzeL7Q32m6VFeaf4hVHubG32NOGs2dnYkk5bj
jJxgDLYyen8Oa34h8TyRPqOgqnh/ULUyrI3lqUDAFVJWdzIGBOTsj9xzwLVX
X9aJg9Hr/WrR1enaxpmsRySaXqNpfRxtsdrWdZQrehKk4NXa5uwtIZ/Gd3rc
JSOJrVbFCOPtDI7Mze4X7oP+92rLubjxJN8SNTs9O1Syit4tLhligubWSRNz
PIMnbKvOV5bHTAxxkq+3z/C/5pB38v8Agf5ncUV5XfeKfEeq+BptShv7CzmS
/tLVkhgYujeYiyfMsx+ViwK+sZH94EeoW6zLbxrcSRyThQJHjQorN3IUkkD2
yfqaqwElFFFIAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiig
AooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAC
iiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKK
KKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooo
oAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACoLz/
AI9j9R/Op6gvP+PY/UfzoArCnp/rE/3hTBT0/wBYn+8KAM3wZ/yK1t/11n/9
HPVvW/Dum+IoIYdSS4eOJxIiw3csPzAggny2XJBAIz0PIqp4M/5Fa2/66z/+
jnrfoAy9V8PadrelxabqCXEttGyOoW6lRiyfdJdWDMQcHknkA9Rms+PwH4eh
tUgjt7tBHcPcpKuoXAlSRxhysvmbxuzyAcE8kZrpKKAM270HTr3QpNFnhc2E
ieW8aTOhZepBdSGOe5zzk5zk1lTfD/w3cSNJNa3ckjRRQ7n1C4JCxkNHg+Zw
VIyCOck88nPT0Udbh5HLr8PfDi3iXYgvvPWYXAf+1LrmULtDn95y23jJ5I4N
Pg8A+Hrdrdo4L0G3umvIt2pXLBZm6vgyck85z1yfU56WigDDtvCGjWXnfZYb
mFZd+ES9mCRbySxiXfiInJ5QKeTU+r+HdN13T4rHUUuJLeJ1dVS7ljJZfuks
jAtg4PJPIB61q0UAcyvgDw6upLqPkXxulnW53tqdy2ZVG0MQZME7fl5HTjpV
iDwbolss6QQXMUcwceWl7OEi3klvKXfiInJ5QL1Ireoo8gOV0D4ceFPC9xcX
Gi6WbSe4hMEki3MxbYSCQCXJXoORg8VcvvB2i6jKJbmO8Mv2YWjvHfzxtJEM
4Vyrjf8AePLZPJreooDYwLnwZoV5Ney3FvcO16saz/6bMA3lkFCAHwrKVGGG
D155NbdvAltbxwRmQpGoRTJIzsQOOWYksfckk1JRQAUUUUAFFFFABRRRQAUU
UUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRR
QAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFA
BRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAF
FFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUU
UUAFFFFABRRRQAUUUUAFFFFABRRRQAVBef8AHsfqP51PUF5/x7H6j+dAFYU9
P9Yn+8KYKen+sT/eFAGb4M/5Fa2/66z/APo5636wPBn/ACK1t/11n/8ARz0/
xP4nt/CmnpqF7Z3k1nvCSzW4RhACQNzAsDjn+EHABoA3KKytf8Q2Ph3w9ca3
dl5LWBA+IQGZ89AoJAJOfWrem3jahp0F21rPa+cu4QzlC6g9M7GZenPBPWgC
1RUN3cx2VpNcyrI0cSF2EUbSMQPRVBJPsBWBa+N9OutIj1X7JfxWUlpFdJLL
CAreY5RYgQSPMzjj/aHPNAHS0VlaLrUmsC6Euj6npr20vlMl9Eq7+M7kKsys
vPUGtRiFUsc4AzwMmgBaKyvD+v2niTTnvrOO4jiWeSArcRGN9yMVPynkcjoc
H1AqLW/EceiLJI2nX95DAnm3MlqiMLdP7zBmBbgE4QMcDpyMj03Bam1RWFf+
KrSzMAt7W81Ey2/2s/YkVvLg/wCejbmGQc8KuWODhTg0l94rs7X7P9mtrvUv
Ot/tZ+xIr+XB/wA9DlhkHPCrlmwcKcGj+v6+5/c+wb/1/Xl96N6isC98WWdv
s+x2l5qebYXb/YVVvKgOdrncy5zg4VcscHANPv8AxZptjBpE4W5uYNVljitp
baEug342szcBRyOpyewODRbWwXNyisXW/EceiLJI2nX95DAnm3MlqiMLdP7z
BmBbgE4QMcDpyMsv/FVpZmAW9reaiZbf7WfsSK3lwf8APRtzDIOeFXLHBwpw
aLhY3aKyNV8S6bpHh465NK0tl5ayRmEbmlDDI2jvkc+wyTgA1rA5APrRYLi0
UUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRR
RQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFF
ABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUA
FFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAU
UUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABUF5/x7H6j+dT1Bef8A
HsfqP50AVhT0/wBYn+8KYKen+sT/AHhQBm+DP+RWtv8ArrP/AOjnpni+/wBJ
tbOzg1a8s7eG4ukTbdSqgkXPzD5jzwefrT/Bn/IrW3/XWf8A9HPW/Ste1w7n
jt7JPaeDtc0PWJRFa+HLS5t4LmdggujJERbYJIywjZlI7ttxWnPrem3l5BDq
uvS2GjvpMT6Zd2l+0EcswLLL86MA7r8mEOe/B5r0+inq73/rf8dQ/r8v8vxP
KDrE901naeOdUudE8zRo5oGW7exWa4JYSFnUqN6jy/3ZOBuJ2+nn0er6dceH
bGxufEpaCGw0wx2w1HykikFwRKNqMuWCjcS2SvByMDH0xRR9q/n/AJ/5/gHS
39dP8jxiTXZRc6zY2fisnSY9Whhlvp7l7gWtu1uNoLxyI6oZcLv3g5+8x+bO
oNQSyXQ7HWfFclx4fmNyTq8E0ttHJKCpjhNxvLbQpkw3mfMUwSSCD6nRQv6+
7+mDPN/hfcaI9i9vb60tzdxahfCFP7RLtNGZSd7IGxIcFTuIJ5yDzWh4+8c+
HNBiGiapqyWk9/GySFUaRoYiMMxCAkEjhc9+egNdxRSaukgWjbPPodV0vRNa
m1aVhb6XqGjWyad5qlTJ5ZkIiVTyXZZEIT7x9Mg4oeHR/wAIQIX1+RIDPoVr
DCH6tNEZC0Kj+J/3i4UcnnAOK9QopvW/n/wf8wWn4fhb/I8mt7G98MaZpi6f
qtvH4kn0eG0m0eS2Ny8xXcUYKsitGFLOpc5QDr0rR15bDwf4L8JaPqGpWsUl
ve2SlpZAgfy3UyMMn7o6k9sivSKKd9b+af3O4PVa9rfhY4fx5478N6JAujal
q8drLqEZV2RGkaKEjBbCAkEjhc9znoDVaHVdL0TWptWlYW+l6ho1smneapUy
eWZCIlU8l2WRCE+8fTIOPQaKm2jXf/gh/X5P9DyLWNL8RaX8LVguLCxkhttI
SImW9dJIWIG/EYiYE9F+/wBAcYyc+rWbXD2cLXUUUU5QeYkUhkVT6Biqkj3w
Knoqm7tsVgooopDCiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKK
KKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooo
oAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiig
AooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAC
iiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAqC8/wCP
Y/UfzqeoLz/j2P1H86AKwp6f6xP94UwU9P8AWJ/vCgDN8Gf8itbf9dZ//Rz1
v1geDP8AkVrb/rrP/wCjnrfoAKKKKACiiigAooooAKKKKACiiigAooooAKKK
KACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAoooo
AKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigA
ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACi
iigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKK
KACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACoLz/j2P1H
86nqC8/49j9R/OgCsKen+sT/AHhTBT0/1if7woAzfBn/ACK1t/11n/8ARz1J
4n8QHQLG3aG2N1fXlylpaQbtoeVs43Ng4UAEk4PAqPwZ/wAitbf9dZ//AEc9
R+MNCu9XttOu9OMR1DS71L23jmYqkpAIZCRnblWPODg4pP8Ar9RofDJ4ptL6
xjvTpl/bTylbiW1t5IGtwEYg7Wd94LBRnK49DnI0rbWtKvNQn0+11OynvYM+
dbxXCtJHg4O5Qcjn1qhb6hrOqgQtotzpClT5s13LC55HSMRSNk57ttx6HoOQ
t/DmsT6PoWk32g7X0MSebcrJC8d9H5TxlIwW3Zl3KWEgUdck8U23/X9dPxEv
6/rz+5HX3vjLw9ZadeXraxYypaW/2mRIblGfYfukDP8AESAPUkDvUsfirQHs
LK+bWtPjt73i3eS6jAlboVU5wSDwQM815jH4Q8Qjw5pOlw+G5baSLQb2xuG8
22CCaXbt+7ISclMkgfxDPfG3eeHbzULyO51Lw7q91aXWmx2clpBqgt2gaMsC
JFSdUdHD54LEYORzR3/rv/kvvB/1+H/BO8l1vSYL1bKbVLKO6eQRLA9wgcuQ
CFCk5zgg49CKzNP8d+GdRsry8j1mxjt7OcwTSTXMaqp3FQc7sBWIO0nrXC3H
hbVrZfEH2DwlIkl1qllcQNDNbfNHCULnc0gJ+ZHI3AElwSAS2NKHRdXg0q5t
ZNG1hLqHWJ720u9PubUMokd2DKJJNrDB2srj+LgHqD+vy/zf3D/r8/8AgHf2
2qadeyrFa39rPI0KzhIplYmNvuvgH7p7Hoat1j+H5NTj060tNVsyl1HaoZbi
MRrCz9CoUMSG7njbzwTWxTZKdwooopDCiiigAooooAKKKKACiiigAooooAKK
KKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooo
oAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiig
AooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAC
iiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKK
KKACiiigAooooAKKKKACiiigAooooAKgvP8Aj2P1H86nqC8/49j9R/OgCsKe
n+sT/eFMFPT/AFif7woAzfBn/IrW3/XWf/0c9al7NJDs2NjOc8fSsvwZ/wAi
tbf9dZ//AEc9VfHEmqx2Fp/ZJl8wzfvVt2iE7R458rzQULDg4bqAcEHFeTnb
qLATdKXLLTW9re8uppSSc1c0/tlx/wA9P0FH2y4/56foK89s9bu9eu47C21y
5sBHpcd3HcPbxCS5YllcyKylQEKruCgct1AxVXQ9Y8R+JNUVZ9VbTreTSYL1
YrS1j3q7M6n5pA+QduenQr0wS3wPPmSUnLENW396fXb+unWzOpKD2X9af5no
cuuLBf21jJcbbm5V3iTZncExu5xgY3Dr61Z+2XH/AD0/QV4rY6x4g0XwfpBs
tY3JNol3eKLi2RzG8YUjBGMjBOM5OSSSwwo3p9e16xTUIH1I3Mx06zukcW6A
xNJKUkESgfMcY2q24lsDnOK3qRzGLtHEt6tfFLW0rX20+9i9y17f1p/mer2U
0k2/e2cYxx9aWx1G01KOaS0l8xYZpLdztIxIjFWHI7EHnpXMeA/7TkXVJ76/
v7q2adVsvttskD+WFGWKCNGBLFh8w5CggDOTz3/CQeKJtDkvJL24eK1vb5Ly
XS4YBOiRyFUZYpQwaMAEEA7+Ryea+4yRzeCh7WfM7O7u/wCbq3rptr+hzVEu
Z272/A9SqjYazp2qXN7b2N3HPJYy+RchMkRyYB256EjPOOh4PIrmPiM73Xge
GW0vpYVlvLMiWFVy6tMgH3lPqD9QM8ZB5p7nVdD1nxLfW2rSlLfWNPhlR4Iy
bkOkCOXO0Y4bI2BMHPUcD1VrKz9Py/zM/s3/AK6nrVUJNb02PXIdFa7j/tKa
Fp0txkt5akAscdBk8ZxnnHQ1x+kar4q1XXf7Q+2adBpMeoS2c9pLcjcArMig
J5AZZThW5lIIPC8jFjxLb3N18R/DkNrfPZM1je7po41dwuYvu7wVB6clWGM8
dwLp5/5XDuv63O3ory+HxJ4o1SHTNKsru3FxO94qai0qW5u1gkCKyZhlTLKS
xAXnaSMCr91q3iKyk0q41O/P2JI4Y7y40byZYhOZdreasib/AC24G6PBUhsj
oQLW3mD0v5HoNFcT8N4LlNM1eWfUrm6L6rdqFnWPClZnBYbFU5PfJxxwBWBY
654sm/s1pvEEZe61250t1SxjVBGvm4cDk7xs+X5sAY3B8EkWtvNJ/fb/ADG1
a/k2vuv/AJHqtVNU1Sx0XTLjUdSuY7azt13yyueFH9T2AHJJwK84g8R+KNSS
y0azvohePcX8ZvZpI7d5fIm2qo/cSIW2nJAQZ2kjGDnK1pNWuJfE0upawJbi
LwqPPjs/La3dv3ysASm7G4FuoO4kdAAJb0uv60b/AEHFXlZ/1ql+p7JFKk8K
SxncjqGU4xkHkU+vLJvE+s+HUurOfUvPjFlp8ouHt0VbITStHI4A6qoAIDlu
RySKu6v4m1fwzNqunyakb6KOO0ePU7qOMG08+UxN5uwKpCgbxwOvORzWjWtl
3t/X9WIjdrU7a31zTLvWbrSLe8jlv7RFkuIUyTEGzjcegPHTOeh7itCuE0Cz
urL4paxHdarcakW0m2ZJbiOJWVfMl+X92qqRnJzjPNd3UrZP+t2h9Wv62TCi
iigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKK
KACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAoooo
AKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigA
ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACi
iigAooooAKKKKACiiigAooooAKKKKACoLz/j2P1H86nqC8/49j9R/OgCsKen
+sT/AHhTBT0/1if7woAzfBn/ACK1t/11n/8ARz1b1vQ7LXYIoL+ytLyFG3iO
6iWRQ3TIBB56/nVTwZ/yK1t/11n/APRz1m+OL+603U/C09vcX3ltqflS2trz
9oBicgMOpwVHUheSW6AjnxWGhiaTozvZ220e6Ki3HVdL/kaF34T06/gggvNN
065htxiGOaBXWLjHygjjgDp6U9fDNmmpNqS2Nit+y7WuhEBKRgDBfGcYA79q
xr7xnp9xNYRSW+uWuoRag0JsI1RWMiws4SVtxjKMpDD5+Tg/wtg8PePrnU9M
0eS88PX8dzqUDyxNG0AikKLuIXM24EjgBgD1JwASPHXDWBtb3rf4n11/E09r
JFpvh74cdyzeHdEZmOSTZRkk/wDfNQan8PNNu7KSOy0/SLS4YRr5psEkVkRl
IjdcAsnygYBHQc8U3UPHNjc+EW1B7HW7ezu7K4lM9r5Rmt0T5S3yuxDZYYIy
AeW2gHGpp/ii2udQ/s21tL64S3VFuLwtEVhLR7x5gL7+Rj5gpXJ69caR4fwq
d1KWn95/10E60iPwl4TTw0byTbYJLdbA6afa/ZoAF3YIj3N83zHLZOcD0q2P
BvhYKijw1o+1HMiD7DFhWOMsPl4PA59hWdoXxE0HxDrf9lWE2+V42lhkEsTr
Kq4ycI7MnUHEiqfbg1o6r4lj028ktINOvtSuIYRcTx2SxkwxnIDNvdc52thV
yx2nivXoUY0KahF6eZm9WzUvLK11C0ktL22hubaQYeGaMOjDryp4NZI8FeFF
haFfDGiiJmDMgsIsEjOCRt6jJ/M1mr8RNMuruW20rTtW1R47RL3dbWwVWibO
CrSMgPTp3PAyQwEWq/FHwzpVtaTtc+clxbLdgJLFGyxNnDbZHVmPB+VAzcdO
mddv6/rsI6VND0iPVP7UTS7JdQ27ftYt0EuMbcb8Zxjjr0p2paNpesxJFqum
2d9GjbkS6gWUKfUBgcGsOx8d2OqXV/Fp+mavcxWB/fzra7VH7veu1WId9w4A
VSehxggnI1P4mrDZX62Oj3f9p2U9tFNazPAxQTSbeSkxAPBG0kEErkYyQeQe
Z2V9o2l6nZR2V/ptnd2sZBSCeBZEUgYBCkYGASKjfw9osl5bXj6Pp7XVqqpb
zNbIXhVfuhGxlQO2OlZV342trITySaXqTQWYT+0Jo1iZbEsAxWTD5YqrAt5Y
cAHrUuleMLXW9Zu9OsNP1GQWcvlXF08IjiQlAyn52DMDnA2qex+6QSLcDXtd
K06yubm5tLC1t7i6YNcSxQqjTHnlyBljyevrWevg3wumzZ4b0dfLfzExYxDa
/HzD5eDwOfYVW8T+M7TwojTXthfSWsaB5bmMRrGmSQFzI6724Pypub25Gazf
ELSxqFzapY6o6Wt3FZz3P2bZFG8u0IfmIJUlgPlBPfG0gkWuwPTc1f8AhE/D
f2A2P/CP6V9jaTzjb/Yo/LL4xu24xuxxnrT73wv4f1Lyft+haZdeRGIovPtI
38tB0VcjgewrjfHPim4msI10hNYjhg1W3tpdQtfKWBm81VeNiW8zb1BKrjPB
JGRXb6zLIunmCF2Se6dbeNlOGUscFh7qu5v+A0LVX/rp/mD0ZFB4Z0C1leW3
0PTYZJIfId47SNS0eANhIHK4AGOmAKmtdD0mx0+XT7PS7K3spt3mW0NuiRvk
YOVAwcjg5puraxBo8MG+Ka4uLiTybe2g2mSZ8E4G4gcKCSSQAB1rBl+Iumwy
W9s+nat/aE121kbJbYNJFMF3BXYN5YyMEHcQQc5wGIN9ANrT/DHh/SLr7Tpu
haZZXG0r5ttaRxvg9RlQDitWsPXPFNr4c0WDU9Ss79Vmkjj8iGDzpI2cgANs
JUYJ9cHoMkgHK1n4k6P4eEaarBPa3Rj86W1kntllijyQGIMuHztJCoWb2ycU
BY7GivOrLxla6Jf+J7vVNUlubZtQhSxSaaOMYe3SQIhcoijGTyR05JJ52NF+
IOna9fWFvZWN8Y73zQlyWhMSvF99CVkJJHH3QwIOQSASAGdbRXHaj8RLTStL
XUrzRdWis9nmNM4gVVUkhcFpQHLYJCpubGMgZGZG+IWljULm1Sx1R0tbuKzn
ufs2yKN5doQ/MQSpLAfKCe+NpBItdgem51tFYC+KVmvvItdI1S6ty8kSXsEa
GFpEDblyXDLypXcyhc8bqXTPFMOqjTDFpt9Gb8TNtk8rNuImCt5gDnHJAwu4
gnnFC1A3qK55/F1t/wAJRN4ft9N1O5vII45ZnSALEkbEjducqGAx/DknsCQw
GXN8TdKtJbyK+07VLWW2s3vvKeKNpHiUgZ8tHZ0J3A/vAnGScYOC+lx2d7Ha
0V514m8YHUNFkjsP7U0u5guLCfMirGZoJZwoxgkgHDAg7W4wRgnOlrPiyzm0
ppJLfWrfT3u4YoNSsTGVnYyqBsZXJCE8FmCgrkAkkAn9fl/mI7OiuT074gaZ
qd5bww2Opxwz3ctmlzPbiOPzowxKkMd/IQnO3A6HByKk0nxtDrGqWdnBo2qJ
FeQPc293KIRFJCpA34EhcAllwCufmGQOcC1B6HQS3kcUhRlYkegpn9oRf3X/
ACH+Nc7rHiCK28SjSorO6u7kxpLJ5Bj/AHMbHaHYM6sRkHO0NjHPUZzpfF9l
DPlrW8NgLj7KdRVUMAl3bdv3t/3/AJd23bnvXwWMzzNKeJqU6drJtLRbJu3z
fTq+h1RpQtdnZ/2hF/df8h/jR/aEX91/yH+Nea3/AMQydFn1DSdE1KdIrtbV
pZ4kiQP5oQgq7q+eeOMAkA4wQHx+NNOs9Vuke3117u5vY7U2kkO5YZfJDbUw
dqjjk5wSSwJXLDNZznNm7LrpZX0te+um/UfsqZ6P/aEX91/yH+NWIpBLGHUE
A+tcAvjS1ltrZ7fTNRuLqdp1+xxrGJY/JbbIW3OE4OBwxzkYzzXW+GtTTWvD
tlqUdvNBFcx+ZGk23dtJ4J2sw5GD1784PFevkWZY/FYiUMTblSfbe6X+ZnVh
GK0NWiiivqjAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA
KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAo
oooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACii
igAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAqC8/49j9R
/Op6gvP+PY/UfzoArCnp/rE/3hTBT0/1if7woAzfBn/IrW3/AF1n/wDRz1R8
U+BofEVxBewaje2l9BOsyMbu4aHIUrgRJKgXg9UKnPc5Ob3gz/kVrb/rrP8A
+jnrfoA81l+EiST2dz/bt4bpbv7VeSvPdMZ/l2Kqfv8AKAKSAxLt0G7GQZLX
4TwR+H7XTbjXNQaa0mRre5gurmPZGMBlEZmZAzKXXcoXAbgevo1FAHntz8J7
BtM1mzstV1GD7dlYN95cvHbIwG9SgmAky29vmPVuQccw2/wlh/tm1v73Vppm
gjEfmRTXcdwVC4KCU3LbYySTtC5wcZ716RRQBwmj/DhtNdYLjxDqtxp8O5be
GK/u4XC5+VXZZ9pCjAG1E6D6FNS+GiyaodQ0fXNSsZZYfJuBNfXcwlAOVbcJ
0fcuWAyxXn7td5RQ9QPHIvAL2/jebStEvdZ0+0h0uKEXUwvmjdwzFtsiSxrk
BlIGSmWbC5zjoP8AhVUNhJbHQdb1CxjS3FvPHLd3TiUKcqw8uePawy3HK/Nw
o7+h0UdP68/8w6nnUPwseNddDeJNT3aiP3Esd1dLJCwTaDIfPIm4AzuA7gYG
AMwfBdxHIi+IDEjQwxpHCt0EjMT70wDcklevyk8HlSpr1iigDzif4UmSW5WP
xDfRWt+ii/gFxdHzHxtd0JuONwAGJBLjA7cVd0b4aW+l6lqc8uq38lrdSK0M
FvfXkDQhVCgM4uD5nygckD2wMAd1RQB5t4h+Eqazfzz2+u3kMUtobYLdz3Vy
8Wc7ijmccN8uVYMDt7Zqm/wfvZLa9jfxO/mXVxDOWC3eF8sDgqbs7idq/MxJ
XnBHG31Wihaf18wPLrv4Q3DQXFlY+JrmHT5LkXMcE7XUphO4OVGLlVILgnJU
uN33iea6lvAunST28kl7rDCJWJH9s3vLkAbgTMSvG4Y/2utdRRQBxmtfDmx1
KGB7PVNXtL62lEsFxJql3OFPRgQ0ucMpIO1lbB6isiT4Tb7mzvP7euvtiXn2
q7laa6PnYXYqp/pG5MLkbizNz12/LXpVFC0A4jxH8NNL1rS1t7dYFuxNHJ9t
1OOTUJQitu8sPJJvCkjlQ2MFuMsTUV98L9IfU0vtN0/QLbdCIbi3uNFjnhYg
5DxruXy25YE5IIxkHArvKKAPMz8HdP8AtV5cr/Y/mPdR3FqG0ZCkQVdjRyJu
2urLyQAmG+YY4A0bv4V+H9Q0iO2utO0mO7WdJmuLLTI4BgMMoFGTtK5HLMcn
PYAd3RQB5vrnwh0vUbu/fTotGsLe9tFt2jOjpI0DDd+8iYMuxjuGeCTtHPTF
J/g1FJbXsbTeH1lubiGZXTQQBCIwMoo87hW2jPPOW9ePVaKFoBwFn8MNI066
lLWOhXGmGZ5/Jl0SOS4UH5jGsuTlM5wNhYL8oPANO8P/AA/8KS3mp6qfDNmL
e9lU29veaeq+UqqASsboDHubccEdgeM4rvaKAOE/4VboZ8TXeoNpuh/2fPar
AlkukoDEwyfMDZK7iSc/J0Cjtzz8nwTWSygtxeaErRWT2XmjQRucMFAlY+dz
MNvD+54r1uilbp/XX/Md/wCv69Dym++DEV3cGSKfQLdTDbxlE0EYzE24sP3w
wXOQ3qvHvUl18G7d4bm1s5NBhtZboXMRl0ISTQgMGMYk80EoSCMEdGIzjGPU
qKYjy2L4P28CWjSDQZzb38l7Iq6GoM6Nn9xzLgINxwDkDC/3ec3wV4I02PUI
RN4c067Wdd2ofbvD89u0LbSco0ztETuOCsShcc8AAV7JRQtAep5p4h+G2j3+
o+XbadodnY5jLxxaUgmyp3HbIrADPAIKsOvXOKoD4V6Qt1LGINNOmS3P2kwt
pyGdOQ3lrNniPI6bScErnHT1qivm6+R4qpVlOOJaTbduXa7v36d9zZVI2s0e
QR/CrT/7DvLKZNIa7muvtEN1HpSqYhvD+XguSU424DD5Tiq6/CeM6ot5LJoJ
j+1JcNbx6HtQhU2GMDzThD94jn5ufavZ6KhZFjVe2K3/ALi6/PTboN1Yv7J4
Dq3w5srH7PbXlraTwyS3Fw09roE7gFipWMi3l8wBcvjJ244wSAa9Z8EaRb6b
oEcq6Pp2nXc+fO+xWogEiqzbCy9QdpztJO0sRmulor0sBl9bDT5qtXn0a2tu
733/AK8jOc1LZBRRRXqkBRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUU
UUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRR
QAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFA
BRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAF
QXn/AB7H6j+dT1Bef8ex+o/nQBWFPT/WJ/vCmCnp/rE/3hQBm+DP+RWtv+us
/wD6Oet+sDwZ/wAitbf9dZ//AEc9aGp63pOipG2q6pZWCykiM3VwkQcjrjcR
mgC/RVTT9U0/V7b7Tpt9a3tvuK+bbTLIuR1GVJGat0AFFRQXNvdK7W88cyo7
RsY3DBXU4ZTjoQeCO1S0AFFUG1vSVvnsm1SyF3GCXgNwnmKAMklc5HHP0q9v
XeE3DcQSBnkgdT+o/OnZobTW4tFFFIQUUUUAFFFFABRVeS+s4byGzluoEupg
TFC0gDyAcnavU49qLy+tNOtzcX11BawAgGSeQIoJ6cninZjs9ixRSKyuoZSG
UjIIOQRVa21PT7y5ntrW+tp57c7ZoopVZoznGGAORyD1osws9y1RVWPU7CW4
uII762ea2GZ41lUtEP8AaGcr+NWqVgaa3Ciiop7iC1j8y4mjhj3Bd0jBRknA
GT3JIFAiWiiigAooooAKKjkuIIYpZZZo0jhBMrswAQAZJY9uOee1PVldQykM
pGQQcgigBaKKKACiikLqHCFhuIJC55IHU/qPzoAWiop7iC1j8y4mjhj3Bd0j
BRknAGT3JIFS0AFFFIXVSoZgCxwoJ6nGePwBoAWiiigAoqIXEDXLWwmjM6qH
aIMNwUkgEjrg4PPtUtABRUZuIRcLbmWMTspdYyw3FQQCQOuASOfcVJQAUUUU
AFFRx3EMsssUcsbyRELIisCUJAIBHbgg/jUlABRRRQAUUUUAFFFFABRRRQAU
UUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRR
RQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFF
ABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUA
FFFFABUF5/x7H6j+dT1Bef8AHsfqP50AVhT0/wBYn+8KYKen+sT/AHhQBm+D
P+RWtv8ArrP/AOjnrO+JbtF4WgkSJ5mXU7IiNCAzkXCcDJAyfcge9aPgz/kV
rb/rrP8A+jnq3rfh3TfEUEMOpJcPHE4kRYbuWH5gQQT5bLkggEZ6HkUdU+zX
5h0fzOORNV0jVfEnip7SDRlvxa28Nvenzmd1O0yMkBbcx3bVRWLMQBkZrNk8
U+KtUvdPsvPttPuYNe+xSlrRwJVNsZF3RrOcDk5Xec/KflwQfRtR0PT9W0pd
NvopJrZSjLmZw4ZCCrCQHeGBAO7Ofesr/hX/AId3O32e98x5luDJ/aVzv81V
2hw3mZDbTgkHJHXNC38l/mn/AJ/f9x08/wDgW/yOR8IalqGhm2soItPj0q81
++skjWNt6HdK6sMEKqgpt2YPHO4dB3Oty6nZeDdRlWWOXUorORhJbxGMFwpw
VUsxH0yaqReAPD0AtxHBfD7PctdxZ1O5O2ZvvPzJyTz19T6nO15E1hpgg06P
7RJGAI1vLqQ7ued0hDseM8kGnHZL0/IqLtU5vO/4/wCRkaZo+kXfgO1sJI4p
NOntFZyxBDbl3Fyf72SW3evNXbkTRTQXzzxPCkyrH5cZBEbjaQzbiG+Yq2QB
938aw4vD99BKXi0DTY4y5kNuuuXIgLdc+T5Pl9efu9eetaBi19hchtJ05luf
9YG1qcgcY+UGD5P+A49etbS1d7/l/mated/u6/MxNG1zWY7cQT3lrNc3+rXF
rbySQPsh2NIWJHmfMMLhVBXHqamm8U67FqcGlLb6e1yNQ+xTzneqENF5qOqc
kcdQWPIxn5siVvD988VxE3h/TNk84uWX+3LnCShi2+P9z+7bJJymKH8P37ra
g6FYZtpjPG41+6DGQjBdmEWXOOMsTxx0q7wbu1+X+f8AW5s3Tcm7b37eduv4
fMis/FmrbrKW+jsvs0l/PYSCBH3s0YkPmLk/KDsxt+b13dhpW2rau+knWppd
KXT5bI3MSvvjMJIDKHfLBlwTkgKfQGs2HwvdwNAY9Ds8wXBuY8+IrsgSnq2D
FyTznPqfU09fDl4tvPbf8I9phtpkdGt21y5MSBs52IYdqdT90DGeKTUHt+n+
YpKm3pt8u/r2MnU/E3iCa1vrPzYraWGSyeO4Fo8JdJZdpGwylgMgfeIJGQVG
Qa7gaqsMwsZUuZb1Y8s8djMsLsFycPgqAfTcfTk1zDeFLlzIX0GydpUVHZ/E
V2xYK25eTFnKnkHqO1bkMniSCCOFNJ0sqihQX1eZ2IHqxgJJ9yc0qnK1Zfp2
RM+V2svxS7f8E5vwtc6jp6aPqN2LO6/4SJ83EqIwnSQozplycMihWXaFXbxg
nBz0V9mTxxpEcozClpcyx5HHm5jXP12s34E1StNJ1OxvDdW+gaUsmXZQdZnZ
IyxyxRDAVQk5ztAzk0+fTtZubOK2l0ixZYmLxyf29ciVSc5xIId44JHXpx0o
k05c3+X+fQJtSm5f5efn6IseD8toMsQBFul5cxW4HGIhKwUDHYDgY7Cm3FlC
+vWlxZpHEul28kAZQBudwoWIeoGM49dvvTUtdbiit4odF0uGK3QpFHDrE8ag
EYwVWAA+2c46jmsjTfBraRqw1Wy8L6Ul8CxEz65cyHLAgn5oTycnn3pWTbd/
y/zDS8pX39P8xllFG2ieCNsYae5YrccDLrJA7Tbvq+CfcCtW51fULAaYGurW
O1fzbWeae3Z2WdFbaxIcDaSvTHPAz82Qtrpuq2d895BoOlLM27BOsTsqbjlt
imAqmTydoGe9SXVprF7C8NzoOjyxvMk7K2qykF1KlT/qPVRx0Pfqacmm/wDh
v6/4INpvXb1Xn/n+BRtvFWoroz6hdC1d7K3nk1C3SBo2WRWwiAlztzgnJzkD
PGRWX4iuNevNDkOr6PCnk3dpJaTOEj+czKCuFklI4P3uOCePXo47bWY2vGXw
/ov+mtuuQdTkIkO0JyDb/wB0AY/xNUI/D19HYvZf2DpzwMqqBLrtzIUCkFQj
NCSmCARtI5A9KcXFSTt27evcqMop3st/L/P1JrnxBqmn3Go2F5Lp5uYooJoL
hYZQmJHKbDGCzM4KnAU/NkD5azYPF/iKW6hsjZ2CzHUzYvLMrRkAw+YG8sM2
PX7/AGAwMkrebQb+SxltJNA02RJZEleR9cuWlZkIKnzTDvyMcc8VnXfgzUp7
i2lg0yyh2XS3M2deunaVghQHcY8q3I+Yc8U4+z+1+nl5+o4+zs7r8u3r3+RZ
l8U+IIdUi0n7Ppr3A1EWctyRIqFWi81GVMnBx1BY9MfxZWxL4j1qGC+t3gie
6sb1YLi6t7SSVFiZA6yeSH3n7wBAY468jiqt94Y1e7hsIItL02CG2vDduRrF
wZJmKsuTJ5O/d8wO7JPAFXP7F1MWa2qaLYxospm3xa/dJIzkYLNIIg7Ej1J7
egpe5b/hvLz9dBP2emi/Dz8/w2K3iGWK88GapNJJb3Ud/pDXAeJP3TSIvLqD
kjqmM8jZ6ioo/E2s2mm3XzWDfYb21tv+PdxvilEf/TThh5nXkHHQZrRutJ1O
90ldLm0DSvsartEceszx8YwQSsAJzk5yec81Tm8KXNxu83QLA7hHux4guxuM
YARjiLlgAPmPPHWnFx2e1/Lv69tAi4cqUv08vPyNew1TVNQYajEbIaUJZo3h
ZHE4WMsu4NnaSWX7pUYB65FYh8WeJ/7FutZXRYRYmxe7geZkQJwGUErK5kBG
f4U5A6ZyNCLSNUg1B72LQ9NSR5DKyLrdwImc9XMXk7N3fOM55681VbwzdtbX
FsfD+n/Z5wwaEa9dBFDHLBFEWEByc7cZBI6HFSuVdPy/zCPs09UrfLb7/wDh
xZPFuq2T3MF1bW09y0NrJbJbAjDTuU2kuwDYIBzlM9OOtX7G61mRY7vWbEWs
lvciNXUIvmxOApyqySbcMVJ+Y/dB4qgfDV4zTtJoGny+fbrayCXXrpw0a/dG
GiOCOoI5Byc5Jq9bWOtWtrLbpo2nMkwxI02t3ErsPTe0Jbjtzx2py5ei/L/M
mXLa0Uvw7epgeJbu913Ro9RVbBdPg1aKKKOSBmnGycRlw+7CkkHjb909ea1z
4n1D7GdaRbVtKW++yPbeW3ngeb5O/fuxndg7dvQ9c1XuvC91eS3EkmgWCfaJ
RPKkPiC6iR5Bj5yiRBd2QDnGcjPWrCaHqEd+bxfD+liUyCZl/tq48tpAAN5j
8nYX4HzEZyM5zTvGyX+Xl5/iXJwat/lt23/E0NO1HVtUlW+t/sP9mGaWJoHR
xMAhZNwfO0ksv3dowD1yKzrDWL3UYLs37RxXtgY7k2YtHilhwzbhlmYSKVBU
OuAcn6U9NH1OO+ku49C01HkkMrxrrdwImc9WMXk7N3fOM55680/T9N1fTGdr
fRtPZ3UIXn1y4mYKP4QXhJA9hxUaW0/T/MhqOtv0/wA+33mcuvapYap4hmlu
4J4FvoLS1iaNgsbSrGFYtvICjdlgB8x5BGcVdu/E+o6RcXenX0drc3oFubWa
FGiifzpDGodSzFcMCTycj0NMbQL1/tYfw9pTpdxCKeN9auGSQAAAlTDjcAo+
bG7jrTv7Dv20+6sZfD2lXEF2As/2nWriZ3A6Au8JbjqOeDyMGq9zS/l28vP1
+8p8j3Xbt5efqZQlvtF8X67cTzaWLuSytSs0drIiOWkZcmNWZnfsADlsKOKu
2vifW3trme6S0gTT9RW3vC9sykwsqHeFEpCEb+cluOcAjFMfwlcyyPJLoVpL
I6opeXxJeO2FbcuCY8gg8gjpk+pqZdB1a3tNQhtNI06Nr9Nk7Ta1cThsrtLF
XhILY4z34zmneLWu/wAv8/UcnCW++nbsl3NSH7XcW0+urBDdXqRzpYJENgeE
sCgJLEEtsU54GD0FTeGtVl1Wyne4uIpZ4pdjotpJbPF8qna8bsxDc9c4Ixio
JI9eksDZHRdJW3MflbU1aVMLjGARACPwqOwtdb0xJFttG03Mjbnkm1qeV2OM
DLvAWOOwzxWbWjX3bGLV4u+/qjH0vWNch0meSXULOaebVJ7eFWtZXf5XfIRB
J833RgZUIoJLHFOXxfrD6Ba38sMFmvmXEV1cvaPPHE0blRuRJMoDg5bLAY98
1NJ4avJHZzoNgjGc3IMfiC6TZId25k2xDZnc2duAe/QU2PwxeRRGKLRLSOMs
7FE8R3iqd5ywIEWCCeSOnJ9TWl4dV+Xb1Nm6bd7dfLz8/Qqafqj23jDWtL05
re3ub2+WRZ5oC8GBAjMBhl3O2SQAegYn33fGdxqNp4Zjezu44bk3NsjyiNsE
NIqnADAgEn1PGR3yM5vC904uAfD+n4nmSd8a/dDEifdZcRfIRwBtxwAOgFWp
9K1a6s5LS40exmhkEYIk165YjZgqQTDlWyAcggk8kk0ny3i+1u3S3mS3HnUu
3p/mKdV1228T2+jXN1pjeeqyxzJbMuVAbehUzEhzgFeowHPO01L4LuNTurK/
l1G8iuMX9xHHtiZSu2RgRku3y9MDjA7mqTeH9QeHyn0a0YeetzubxFdl/MVd
obd5W7gAd+1bOg6bPYS3sk1hBZ/aJPNKwahLcIzEksdrooTk5+Uc556Cpk48
r/4BNRx5LLy7efmbVFFFYHMFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFA
BRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAF
FFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUU
UUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABUF5/wAex+o/nU9QXn/H
sfqP50AVhT0/1if7wpgp6f6xP94UAZvgz/kVrb/rrP8A+jnrfrA8Gf8AIrW3
/XWf/wBHPW/QAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQ
AUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAB
RRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFF
FFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUU
UAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQ
AUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFQXn/HsfqP51PUF5/x7H6j
+dAFYU9P9Yn+8KYKen+sT/eFAGb4M/5Fa2/66z/+jnqXxJ4jTw1aQXMum3t5
HLMkH+i+VlXdgqA73XqzAcZ98VF4M/5Fa2/66z/+jnrE+Kt7Z23hi1hudRis
ZJdRtDG7SIrALOhZlD5B2jk5BA78UdV6r8w6P0f5G6viK5EM0lz4a1q3MZjA
QpDKZN7hcr5UjD5c5bOMDnmrOg69aeIrCS8sknSJJ5LcieMxtuRipO08jkd8
H1ArjfFk0/h3wc16fFEzC51W1ljvGlijaaJjECpZFVdu1Wb5AMqOSRuzy1lr
AurQQQ+JLPTNHn1TUjJfGSTyzN526NTJFNEUyhdhlsNjoeKFvb+un+f3j6X/
AK6/5fce30VxGvXVzp3wfvrg+IJHuYdObZqiKIGlYDCsN2cbjgAjk5ypyQa5
GbxTaabNqNp/wkd5eQz6dYTM41TBWWSQq7GQBvJQhkLFANoIIAJFHVr+uv8A
kLon/XT/ADPZaK8JtfEBGs2umSeN3EA14RBYNRJEls9sDkPIzyMm/wCUNuxl
iRg7dt3SPEqQz6PNF4plu5m126sEhm1LerW4EnlhgT8/PlkO2W+YDdggUf1+
X+a/EP6/P/L8j2mo57iG1iMtxNHFGCAXkYKMk4AyfUkD8a8u8KXRu3a91jxr
GXe0kGq6crzwvbOPvGQmdhb7GDDcixg547Vu/EuK2m8Aq/2iUWsd1aSGZLl1
Hl+cgLM4bJG0k5J9G6gGh6W/rqC1Z3FZ2va1beHdEu9WvI7iS3tYzI628Rkc
gegH8zgDqSBzXnGpavFnWo/7cvLfUraON/DiRahIy3kXlqYyi7iLktIGDbt5
5HTrVPxlqcN5pvi208TatNpepQWY/s+yW+e3jmQwg5VQQs+6TepB3Y2gcd5k
3ytr+v8Ag910KitUn/X/AAOz6nsFvMtzbRToCFkQOAeuCM06RxFE8hBIVSxA
6nFeJan4rtzdQ3lj4iNsbK6sEdJNScCSFvK3lIVZYxFhiTI4cklh8oCmu1sL
O5XxI2ifaNUks0uRq0V417M6yQldohLl+QH52fdKjkEnJuS1dv62/T8mRF6J
v+v6f5nX6VqMWr6RZ6lDHLHFdwpOiSgB1DAEBgCcHn1qeW4hgMYmmjjMr+XG
HYDe2CcDPU4B49q4HxXfppvi7TlF+kkSiBE0q31GS1uEJkx5kcSnbcKRwUYc
BeOpFT/EiKy+0+FrjULuW1s49VAmmW8e3RFMUnJZWXByAAc55IB5OTRtW6u3
4j7p9Ff8Du6zNd1218PWCXl4k7xvPFAohj3Hc7BRnsBk9SR+eAfLl8TxL400
66i8QvbwvqtxaXVtdai7yBQsgUvCWEcS7lAVQhY/Kd2SRWfqevQxeGNQgl1a
11CcXNi6X66w81tcMLjdgq5b7O+0bmRcgAZHC4CWtvl/X3A9Lo90qOO4hlll
ijmjeSEgSIrAlCRkAjtwc1xHhLX9JJv5tW1hbfXoGZdStrjUm8mE7h80UbuV
WM7k2sB/EATnIrnbqPRofEPjWC716907Up7qL7GsWrSxSOzxRhSsfmKGG84G
eAOMgDg/yA9ZluIYDGJpo4zK/lxh2A3tgnAz1OAePapK8Yu73TL+00GTVNXm
ju7TXnj1jGrSpHbSGOUfK3m/ImVAQ5HGRwSwr2YYwMHI7c0dL/1sn+oPe39b
tfoLRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUU
UAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQ
AUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAB
RRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFF
FFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABUF5/x7H6j+dT1Bef8ex+o/nQ
BWFPT/WJ/vCmCnp/rE/3hQBm+DP+RWtv+us//o5636wPBn/IrW3/AF1n/wDR
z1v0AFFFFABRRRQAUUUUAFFFFABRRRQAVRsNMFlNcTvdT3dxOw3Sz7NwQZ2o
NiqNoyccZ5OSavUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQA
UUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABR
RRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFF
FABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUU
AFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQA
UUUUAFFFFABUF5/x7H6j+dT1Bef8ex+o/nQBWFPT/WJ/vCmCnp/rE/3hQBm+
DP8AkVrb/rrP/wCjnrfrA8Gf8itbf9dZ/wD0c9ReNdU1vRdGW/0SK1uJI5B5
lrNEzNMueQjBhtbGcZDZOOlJu24JXOkorlPEni/7B4EOv6OsVzNcW/nWaS52
uNhkJYAg4CKxIz2xWhDr1rpukWE3iLV9Mtri6QEO7C2SQnnCq7k8Ajuaq2rX
YL6J9zborK17XrLQtOae5vtOtpWVvs6312tukrgZxuOf0B+lcYvxJktPCtjr
OqXeiQyXtjbyRWvnFJPOkkKltrN/qgMH1+V+am4WPSKK5nQ9dmFhqF5rmt+H
prWCRTHd2EhjjWJlBUy73YKTkEfMRgjnmtWfXtIt9JTVJNVsEsJMeXdSXKLC
5PTD5xzTegLU0aK5TwX4uXxHpiyXtxpqXktzcRwQ2s+9ZY4nK7kJ5cYxlgAO
c4GcVc8SXmu2Nlc3ul/2esNnAZ3W7RmNxgElVZWHl8D7xDcnoMcpuyuxpXdk
b9FcnL4h1XUruK20SG1imj0+O/uFvUdj+8zshG0jaTtfLHOMD5WzxDF4rv8A
Xzbjw4top/s6PUJvtiM2RJkJCNpG0nY+X+bGB8rZ4b0vfp/wf8n/AE0Ja7f1
t/mv6udlRXFw+LdQ8QFR4d+xRFNOi1CQX0bP5nmbtsQ2su37jZf5sZHympLv
xdezaH4a1nS7W2+x6pcW6XH2l23xLKQMKoGCck8kgDHQ54dne3nb79Av1/ra
52FFYHiS812xsrm90v8As9YbOAzut2jMbjAJKqysPL4H3iG5PQY5pS+IdV1K
7ittEhtYpo9Pjv7hb1HY/vM7IRtI2k7XyxzjA+Vs8Tf+vv8A8mO39fd/mjrK
K5HWPGvkeBY9f0y3WWe4tRcwwynhFwCxfHOFyBx1JA4zkdapyoPqKpqxNxaK
KKQwooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKK
KACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAoooo
AKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigA
ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACi
iigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKgvP+PY/UfzqeoLz/j2
P1H86AKwp6f6xP8AeFMFPT/WJ/vCgDN8Gf8AIrW3/XWf/wBHPUviGS8RLIWm
lXV/i5SRxbvEuxVOefMdc59s9Ki8Gf8AIrW3/XWf/wBHPW/R2DpY8zn8I6xp
+keJLC3tHvLLybiDRLaGRFMYuFy+7eyqFRuB3Ck4zmr0VnrVpqZ1CXw7cX1t
faVHZSWbTW4ltnjLZDZk2GNw+TtYngZHp31FK2lv66/5jv8A193+R5vpnh7X
PDE9sJ9Mk1+BtFj09mt5Yg9u6FiygSsgMbBhznP7sZHSuStPCHie1sI4U8I3
aS/Y9PhlZLi0G97efezE+dz8gABPPGOBXutFO/vc39df8xdLf10/yR5TL4Y1
ifV9Uv18P30Fq2rx34tYL6O2luEMHlOVeKUbXDEv8zAMO+TWnDoV7o2paPqu
meHLqSzhN0JdOkvkluYpJdp8/dJIVLEqykeYeHyCckV6HRQtNv60sD13ON8B
walpVlcWF54fu7FJb66uEdpLcxojyF1BCSE5w2OARkH2ynjS+8TebDYaP4Rk
1iwf5rtmv4bdZB2jG4kkf3uBkcc5NdnRR2XYO77nGyW2vWeovrUOk+fealp0
VvPbRToFtZkLlSzMRuQeYwJXJ+XIU54q2Hh3U/CCw/2XZvqbSaVDYPtlSMRy
xbisjbyPkPmNnblhgYU547yih63X9df8w/r8v8jzu78Euml6Xo9lYXAv7ewW
zbW475rZI0/iBEcgkkII3BGXbk/eHNaHiLSLqw0DQNJ0PR7q+gsLq2ciKWJS
kULKeTI65YgcY984rtKKd9b+d/xuFu/a36HGeM77xMZILHSPCEmr2Ljddlr+
G3DjtH8xJIz97jBHHOTSyW2vWeovrUOk+fealp0VvPbRToFtZkLlSzMRuQeY
wJXJ+XIU547KiptpYDzrVfh/qEXgWTTNN1i/a5XTo7X7NGLcRTFP9p4ywBJY
/fHWu/tIZLe0ihluJbiRFAaaUKGc+p2gLn6ACpqKpu4rBRRRSGFFFFABRRRQ
AUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAB
RRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFF
FFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUU
UAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQ
AUUUUAFFFFABRRRQAUUUUAFFFFABUF5/x7H6j+dT1Bef8ex+o/nQBWFPT/WJ
/vCmCnp/rE/3hQBm+DP+RWtv+us//o5636wPBn/IrW3/AF1n/wDRz1v0AFFF
FABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUU
AFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQA
UUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABR
RRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFF
FABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUU
AFFFFABRRRQAUUUUAFFFFABUF5/x7H6j+dT1Bef8ex+o/nQBWFPT/WJ/vCmC
np/rE/3hQBm+DP8AkVrb/rrP/wCjnqr421a9sINJ0/TpxbXWrX6WYudoYwoQ
zOyggjdhSBnjJz2q14M/5Fa2/wCus/8A6OerPiHQYPEOnpbyzS280MyXFtcw
kb4JV+64zkHuMEYIJFJjRUj8Ntpt5ZXNjq+pJbwyF7uG7vZLhZ12MBkylipB
IPykA45BwMQw+OdPke3eWy1GCyu1drK9eFWjutqlsIqMz5KglQyqWA4yeKt2
ulazMVXW9Yt7uBVx5VnZtbeYSMHzCZH3D2G0euegyLTwPeW9nY2Emsx3FhpR
Z9Njksz5kbbWSPzXEn7xUViAAEJwMmm7/wBf19wlb+v6+/qVLn4n2r+Hp9Rs
NJ1Le2my39n9piRFmEeA38eQFLAnpkZ2luKnv/idpOi2Vo2rwy215Lbi4mtW
nt1kiQ5AbBl+cHBIVCzY6jPFUP8AhWd8+madp02vW7W9npdxpuU09ld1lGN2
TKQCNq9j0PqMbcHhnWrO6hvbTXLOO7a1S1u92ns0UyoSY2VPNyjAMwJ3MDnp
xR3/AK7/APAB/wBfh/wSMfEXSXvJ4IbPU5Ybe6htZroW22JGl27D8xBKksB8
oPrjaQTW0r4gS3FlNNfaJdxytqclhaRI8AM7KzgKC0uNwCHOSATwu6o77wFq
t2NXUa/agajfW94Wk04syeTt2g4lAJPlpkgD+LAGRiwvgrUI9Lv9MGo6Vc2V
3eSXRhvtKMy/vGZ2Vh5w3YYgqRtxt79j+vy/4I/6/P8A4B09nfTXbJv027tk
aFZd8/ljDHrGQrk7h34x6E1drJ0LSrrRbG1083q3FnbWyQoHibzdw6kuXOVx
gBcZGOWNa1N26Eq/UKKKKQwooooAKKKKACiiigAooooAKKKKACiiigAooooA
KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAo
oooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACii
igAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKK
ACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA
KKKKACiiigAooooAKKKKACoLz/j2P1H86nqC8/49j9R/OgCsKen+sT/eFMFP
T/WJ/vCgDN8Gf8itbf8AXWf/ANHPWjqX/LL8f6VneDP+RWtv+us//o565f4g
6brF1Ham81Gzl09bsyJbR+H5rvcADtSZVlbcuP4gg5AIxxXkZ7SVXL6kG7Xt
rZv7S6I0pfGjqqK8hm0zXZfsQ13TbE2D6cqW0EWhz3cdo4JBRY1l3RsVK4c4
4UD5SCDFpXhXXbvxKYdaEF1cf2XCskmpaXPdW/mDPy7jKIy4BHzA4yzYGSxP
55/ZdJRcpVlp2Tf3enXsdfO+39aHqVtqn9oNYz6fCLnTrmN3a7D7dmMbRtIy
d2W+m33rRr56bRNWt9Gs7aCxu4ZRplzDPFb6FeR/vWC4VmVtru23HmAYwMNu
GBWtNp2s2kWowWyMkFxp9n5v/Eju1W4kEn3HJclmIcBz8zMuQFyCK6amTUrr
kq/g/wCa2vy7JJ/iLnfb+tP8z37Tf+Wv4f1qSxnu7iOZruy+yss0iIvmh98Y
YhXyOm4YOOozivLvhx4dwNVe31m50jUJpEmurTT9Nit0RSCFCi4tg5TKvjsM
kZYgs3NP4YvbjwxLD9s8QvdR3141tBqWgG6jmBfIYloCySOCp81s4y2Mcivv
MkoqhgoUk72v0t9p9Py79DlqO8m/P9D3e/1C10u0N1eSiKAMiFiCeWYKo49S
QPxrP0bXzq+qa1ZGyktjplytvud1Yy5RX3YHQfNwM5x1weBxfjnwjqWoeDUN
xqus6i0c1vK1lJa2k5QeYu8gR2+5iqlumc8jBBIPGXPhyVJ9V1CybxR5sGpW
R08jRCn7tRGGkVBbDYVCsPlCghVDBsgH1V8Vn/W3/BM/s3PoCsS519rfxhYa
CbCQpd2stwLsyKFBQqCoXqT8wyTgdMZ5xwWleGZZvEBl1HUPE0XiCK7kK3sO
n24SSIk7GNwbfaU2MMxs3BBATgCpPF/hS4k8SaNcarq/iDUNNSG4SWSPT4Lk
ox2bUaKK3IZWwT8yEZUcg0dn/Wwd0eqUV4xH4S1O10zSrbXbrXZtAJuFjtEs
ILx7QF8weZEIHz8gYZAOwkKNozS6x4TulvNE+waj4gup7fyBFHqOkRTusQk4
Mdx5BWBwAWO/k/KGxigGeu2WoWuopK9pKJVhmeByARh0O1hz6EYqzXlvgPwd
Np6axbw6nrOk3IvphJ5Wm20SzR+Y3lsJGtsP8vOFYhc8BcgVxth4PAbTPtDe
LZFbWriO48yxmV/sbb+TIIRIFk3LuAYA72OAckC6ei/T/MbW/k/8/wDI+hKw
vEXii20HT9TlSF7y8sLL7a1pGQpMeSAdx4AyrepwDgHgHxxfBFtqem2tnqUP
i618PRXd3ELe2S6Yx4k3W7eRIjnZsLDcq9SN3JNSa54D0yyuNSmXSvEl3NLo
QXT7mRbqeZ7j94mHMWQuU8sbWwMcEDkVLva/9bNjives/wCtUj3a1n+02cFx
t2+bGr7c5xkZxU1eFT+FjFe36aJpniJYJLKzubqLzL6H7Wwcm4j3OwDOYiBt
J9QMHNW7jwatvaajP4T0/X7bQYkt2bT1uLu2kuG8zNxsikdSxMWF5HJ4Xmre
+n9f8DzIje2v9f8ABPT7TxA9z4v1DQW0+SEWltFcLcPIpEwdmHyqM4A29SQe
vGME7deTeDvCvh+w+INy2iaTrunad9jhkjLpf20bzK7Fg5fAYY2fK2VPOAea
9ZpdF/XVj6v+uiCiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKK
KACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAoooo
AKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigA
ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACi
iigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACoLz/j2P1H86nq
C8/49j9R/OgCsKen+sT/AHhTBT0/1if7woAzfBn/ACK1t/11n/8ARz1qXrWg
e3S5uUheV/LhVnCmRsZ2rnqcAnA9DWX4M/5Fa2/66z/+jnrH8fQyNq3hCa1i
tjfJq2yGSccIGhk3cjnHAOBjO0DI6jKvQp14eyqq8W1p80NNq7XRP8jp5oLK
3aJZ7kRNM/lxB3VS74J2rnqcAnA9DUv9nxf3n/Mf4VwN74p1kapb6TdWekT3
lvqxtTfGBzGrNbNLG8cZbIbBIb95x2+98sXh3xB4ktPC/hm81HVdPez1GFke
5mspGeKQxlo97edhgSDk4GeAMZyPOWSZc1f2S/4dXLdSfc7+e2tLaCSe4n8q
GJS8kkjhVRQMkkngADvUF9oGm6xY+Rc75YHKyK0cpUgggqysuCCCAQQa4q48
W67c+DLy8eHSLm4s7K6bVLKe1dEDKSqof3jYBAY4IO4Dqu7I1YfFN/B4gtbK
8W3sLGSJDbxtZSEXQ8kufKnD7FYEEeWy5wuQTnio5Ll8XzKklb/g/wCQe0n3
7/p/mdJpGh2WiRyLaeexlILyXE7zSNjpl3JYgZOBnitKuM8K+I/E2u3lvdXe
iCDRby38+KY+UrRZAKDKzuZAQTzsjxjpzxb1HWdXuvEN5ouiSWEE9laR3MjX
sLyCYyFwqqFddoGw5b5uo4r0KdKFGChFWSv+tzO99TqKK860nxl4l8UX7w6X
a6VYwtpcN/C10JJ3LOWUowBQAZUjIPAAPO7CtXx54h1u2tW8N6F51wbCG8nj
fy2XdIWAjy00RUZRvnAfr93jnT+vz/yYf1+X+Z6PRXCWXijxHc3XiKS9j0XT
bbR2wUleSTdmEON8owEwSCSFbOSAONzc7q/jDxRPZajYmaC0ngk0+WK6FjJb
tJHNPsI8szFlGVH3ipI3AqMg0dUvT8Q8z12iuFvPFGux2+uXVq2myReH8LeQ
yW7q90yxrJIUPmfuhtbC5D8jrVrwz4g13X9e1SOaPTrXTrGdFVFWSSaVHiV1
yxKhCNwJ+VupXtuItdvX+vUHodhRXC+OfFur+HzdvpQsp/sVn9qmt2tnmfbk
8uwdEiXC8ZLM3zYU7TmpN431+O91OVrXS4tP0/UrS1KZkklljm8vnd8oVh5m
ejemONxFr/XnYHod/c3VvZw+ddXEUEW5V3yuFGWOAMnuSQB7mpJJEijaSR1R
EBZmY4AA6kmvKvGF9qHiXQE1RU0xdLttbhhiiltma5Gy5WMyCTdhCWBG3Z90
9ecV6LrQM8EFiASLuZYn9PLGWcH2KqV/4EKFqr/10/zB6O39dTSBBGRyKKwv
Ees3Gmy6XY2fkpeancm3imuELRxYRnJZQVLHCkAZGSetcvc+MvE0Or2+iJba
U14NUFhcXbCQRkPCZUdIsk/d6qX6rjPzblFq7f10/wA0H9f19x6LRXL+Lta1
nw74at7yzhsLu88+CCZpi8UZ3uqEqo3Hkt0LcZzlsYOZqviHxbbag+kaVp1v
qeoWlulxcSRQJHFJvZwiASXKtHwhy37z/dHQgHbR3NvNNNDFPG8sDBZUVwWj
JAIDDsSCDz2NS15Va6zeaJr3iKDS9KB1HUtWiRIEWNhG5tFlckGSNXPytn51
ySTnsdmDxL4nsLzSZfEsFhpthdSSwTAw5kDqpaM7lmZUDgHj5sEbcncCADvK
K828QeMPFGiaZLOP7Mnuray+2z20VjKzKhLYDkyhYgFHUszMd21Pl5km8b6/
He6nK1rpcWn6fqVpalMySSyxzeXzu+UKw8zPRvTHG4i1dv63sD0PRaK5bTdT
1/W3F/YSaXHpbTzweVPDIZk8sugfcHw3zqCU2rwfvZqPw/rur6pdWtncS2H2
m1M66skUDDYyttjCZkO3dy2Tu3Afw0LUHodbRXJNrevzePLzRYl0u20+1tYb
szSCSWSRWZgVxlQhO08/NtxnDbsLzE/xD8RWiXcgttOu4jpNxqFrKsEsERMR
TIVmctKuG4bZGGwMHByFfS/r+F/8mO2tvT8f+HPT7i5t7SEzXM8cMQZV3yOF
XJIAGT3JIA9zRcXNvaQma5njhiDKu+Rwq5JAAye5JAHua8o8W69qF3pdxZ61
BZO1udM1KH7JC7NH5lxtZeclyNvBAUndjbWxqHifU7vwsuurDpF5plzewRR2
VzbMJbcGdVzId7BpFP8ADhdrc5O3Bdvzt+X6i8/67/keiUV57pXjTxBc3lhJ
f22mR2tzq9zphhg8x5AYxIVYOSB1jxjbz1yvQSeFPFmteINct4mu9Ie1NvJN
eW1vbOZrKQMFWCR/NID8nkqM7Gwo6gWv9eV/yB6Xv/WtvzOwuLySKdkVVIGO
o9qj/tCX+6n5H/GuV8U67f6X4otrcmG006Xywbqe0eZJHZwpjLo4EJwRguCC
T7YOTJ4s1P7DLrkKWb6TFfmze0MbC4wJfJ3792M7sNs2dO+a/Osbi8zWKqKn
VajzNL72ktt/y62OyMYWV0egf2hL/dT8j/jUUesCWaWGOSB5YSBKitkoSMgM
M8ZBB57GvLdR8QeKr/wre34uNN0/ydTFlsgjlkc4uFTIk3pgdiNvIB+7nAsN
4m1201+bT4rDRvtMmqRWU10odfMzb7w5XqTgdC3ygBct94ZLE5q0/wB/qr9d
rWv08+g+WHb+tf8AI9P/ALQl/up+R/xq7byGWBXYAE56fWvKJPGuopYWv2i6
0nT5Dc3dtPfXUbfZ98LEKoXzFKlxzyxxtPXt6H4TuNQu/CunXOqLGl7NCJJY
44miCFudu1mYgjODk9R26V7XD9bHTxMlianMrPTzTSvt6mVZRSVkbNFFFfYH
OFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQA
UUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABR
RRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFF
FABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAVBef8ex+o/nU9QXn/Hsf
qP50AVhT0/1if7wpgp6f6xP94UAZvgz/AJFa2/66z/8Ao560NW0ax1uCKG+i
dhFIJYnimeKSNwCNyuhDKcEjg9CRWf4M/wCRWtv+us//AKOet+gDBfwZoTrZ
KbWYfYpzcxMLuYMZTwXchsyMRxl9xwSOhNPt/CWiW2jDSFs2fT1mSZIJp5JV
RkYMu3ex2qCo+UYXrxya26KAMm78NaRe2uqW01ofK1Rg175crxmYhVXllIIG
1QCAQDznqcxW3hPSLS7huY47t3h2mNJr6eWNSq7Q3lu5XcAPvYz3zmtuijYN
zI03wxpOkXLT2NvLGSzMsZuJHiiLEljHGzFI85P3QOpFGq+GdK1m6juryCX7
THG0Qmt7mSBzGSCUZo2UsuRnacj2rXooA4ebwQ1741nvbq2gi0b+z47KFLPU
J4JAqFjhkjCgod2Nu4j5Rxzgb954V0a9ltpXtZIZLaHyImtLiS2Ii4/dny2X
cnA+U5HtWzRR0/r+uodbmDH4N0GOPVYhZuYtVXbeRPcysjjG3hS2EwMAbQMA
ADGBVZvh94ccymS2vJGljSKRpNSuXZlRtycmTOVPIPUdiK6eigDBm8G6FcXK
3E1rM8vlpFKTdzYuFT7omG7E2P8Appuq3p+gadpWo39/aRzLcX7iS4L3Mkiu
w4BCsxVeMDgDgAdAK06KAMHVvBuh63dz3N/azPLcQC3n8q6liWaMZwrqjANj
ccZBxVQ/Dvw2YJ4Ggv2S4ljml3apdEu6cIxJkzkYH5D0GOpoo2A5m78AeHL2
W4eW1ukFzMJ5o4NQuIY5JRjEhRHCl8qDuxkkZzmuhFtEJYpcMXiQohLk8HGc
88n5RyefzqWigCjquj2Gt2YtdQg82IOsiEOyMjqcqyspDKwPQgg1nN4M0NxZ
5t7ndZ3BuYnF7OHMpGC7tvzI2OMuTxx04rfoo2Azta0LT/ENitlqUcsluJFl
CxXEkJ3KcqcowPB569QD1AqHUPDOl6ndQXVzFcC4gjMKzQXcsLshIJVmRgXX
IBw2R19TWvRQBzp8DeHj9s/0OUfa5knkIu5gVkT7jR4f92QMAbNuAAOnFXx4
f0s6aunyW3nW6yrNieRpWaRWDKzOxLMQVHJJ6Y6Vp0UAYOreDdD1u7nub+1m
eW4gFvP5V1LEs0YzhXVGAbG44yDiqh+HfhswTwNBfslxLHNLu1S6Jd04RiTJ
nIwPyHoMdTRRsBix+F9Ltb+XULW3lW4dzMYvtcqwPLj77Rbim44BLbSc89al
0bTpbZ7y/vIbaLUL6RXnFudyqFUKq7yql8AdSByT2xWrRQBljw7pg1y41kwy
te3EIglZriQo0Y6L5ZbZjr26knuaxm+GnhZ7dIGtL0xRwtbov9qXWFibGYx+
8+4cD5enHSutoosFzlrn4deGryXzbi3vnfy4os/2pdDKxnKA4k52nke/PXmn
3fgDw7ey3Mk1vej7VMLiZItSuY0eUYw5RZAu75V5xngV01FAHMJ4B0CBIBbw
3avbXLXkBfUblws7dXIMnzZ5znrlv7xzn+F/CmqaTc2Jnf7LDZx7GWDWbq6j
uPl248mUBIlBww25IwADjOe3ooWgPU5zVvC9rquq/bZ4Z5CAg2C7kWJwvI3R
hgjc/wB4Gqv/AAhenjU31AWLCZ5RO6C4cRNKAAJDFu2F+B8xXOQDnIrraK+f
rcO0KtSVR1ZpybejVtXe22xqqzStZHHR+BdNi0q60wWc7WlzL58qPeSuTJuD
bgxcsp3AHII55qsnw40hL1bwW181wsyziR9UuGJkUbQxzJyccc9uOld1RULh
qir2rVNd/eWv4D9s30R5rffD6e1uLd9Fsy8S+c0iS61dW8m+QoWYSoXJB2cq
RjPPWu28O6fc6XoVvZ3dxJPMm4s8khkIyxIXc3LAAgAnkgc81qUV6OCyunhJ
c8Zyk7W953637f11InNy3CiiivSICiiigAooooAKKKKACiiigAooooAKKKKA
CiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK
KKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAoo
ooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiii
gAooooAKgvP+PY/UfzqeoLz/AI9j9R/OgCsKen+sT/eFMFPT/WJ/vCgDN8Gf
8itbf9dZ/wD0c9b9YHgz/kVrb/rrP/6Oet+gAooooAKKKKACiiigAooooAKK
KKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooo
oAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiig
AooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAC
iiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKK
KKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooo
oAKgvP8Aj2P1H86nqC8/49j9R/OgCsKen+sT/eFMFPT/AFif7woAzfBn/IrW
3/XWf/0c9b9YHgz/AJFa2/66z/8Ao5636ACiiigAooooAKKKKACiiigAoooo
AKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigA
ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACi
iigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKK
KACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAoooo
AKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigA
qC8/49j9R/Op6gvP+PY/UfzoArCnp/rE/wB4UwU9P9Yn+8KAM3wZ/wAitbf9
dZ//AEc9b9YHgz/kVrb/AK6z/wDo5636ACiiigAooooAKKKKACiiigAooooA
KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAo
oooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACii
igAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKK
ACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA
KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAq
C8/49j9R/Op6gvP+PY/UfzoArCnp/rE/3hTBT0/1if7woAzfBn/IrW3/AF1n
/wDRz1v1geDP+RWtv+us/wD6Oet+gAooooAKKKKACiiigAooooAKKKKACiii
gAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKA
CiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK
KKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAoo
ooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiii
gAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKgvP+
PY/UfzqeoLz/AI9j9R/OgCsKen+sT/eFMFPT/WJ/vCgDN8Gf8itbf9dZ/wD0
c9b9YHgz/kVrb/rrP/6Oet+gAooooAKKKKACiiigAooooAKKKKACiiigAooo
oAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiig
AooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAC
iiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKK
KKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooo
oAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKgvP8Aj2P1
H86nqC8/49j9R/OgCsKen+sT/eFMFPT/AFif7woAzfBn/IrW3/XWf/0c9b9Y
Hgz/AJFa2/66z/8Ao5636ACiiigAooooAKKKKACiiigAooooAKKKKACiiigA
ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACi
iigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKK
KACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAoooo
AKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigA
ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAqC8/49j9R/Op
6gvP+PY/UfzoArCnp/rE/wB4UwU9P9Yn+8KAM3wZ/wAitbf9dZ//AEc9b9YH
gz/kVrb/AK6z/wDo5636ACiiigAooooAKKKKACiiigAooooAKKKKACiiigAo
oooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACii
igAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKK
ACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA
KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAo
oooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAqC8/49j9R/Op6
gvP+PY/UfzoArCnp/rE/3hTBT0/1if7woAzfBn/IrW3/AF1n/wDRz1v1geDP
+RWtv+us/wD6Oet+gAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKA
CiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK
KKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAoo
ooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiii
gAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKA
CiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKgvP+PY/UfzqeoLz/
AI9j9R/OgCsKen+sT/eFUrjUrGzkEdzeW8LkZCySBSR64NWoJY5vLkidXQtw
ynINAFDwZ/yK1t/11n/9HPW/WLBbXVlCttbz2kcSZAVLVwOvP/LXucmpN2of
8/lt/wCAr/8Ax2gDWorJ3ah/z+W3/gK//wAdo3ah/wA/lt/4Cv8A/HaANais
ndqH/P5bf+Ar/wDx2jdqH/P5bf8AgK//AMdoA1qKyd2of8/lt/4Cv/8AHaN2
of8AP5bf+Ar/APx2gDWorJ3ah/z+W3/gK/8A8do3ah/z+W3/AICv/wDHaANa
isndqH/P5bf+Ar//AB2jdqH/AD+W3/gK/wD8doA1qKyd2of8/lt/4Cv/APHa
N2of8/lt/wCAr/8Ax2gDWorJ3ah/z+W3/gK//wAdo3ah/wA/lt/4Cv8A/HaA
NaisndqH/P5bf+Ar/wDx2jdqH/P5bf8AgK//AMdoA1qKyd2of8/lt/4Cv/8A
HaN2of8AP5bf+Ar/APx2gDWorJ3ah/z+W3/gK/8A8do3ah/z+W3/AICv/wDH
aANaisndqH/P5bf+Ar//AB2jdqH/AD+W3/gK/wD8doA1qKyd2of8/lt/4Cv/
APHaN2of8/lt/wCAr/8Ax2gDWorJ3ah/z+W3/gK//wAdo3ah/wA/lt/4Cv8A
/HaANaisndqH/P5bf+Ar/wDx2jdqH/P5bf8AgK//AMdoA1qKyd2of8/lt/4C
v/8AHaN2of8AP5bf+Ar/APx2gDWorJ3ah/z+W3/gK/8A8do3ah/z+W3/AICv
/wDHaANaisndqH/P5bf+Ar//AB2jdqH/AD+W3/gK/wD8doA1qKyd2of8/lt/
4Cv/APHaN2of8/lt/wCAr/8Ax2gDWorJ3ah/z+W3/gK//wAdo3ah/wA/lt/4
Cv8A/HaANaisndqH/P5bf+Ar/wDx2jdqH/P5bf8AgK//AMdoA1qKyd2of8/l
t/4Cv/8AHaN2of8AP5bf+Ar/APx2gDWorJ3ah/z+W3/gK/8A8do3ah/z+W3/
AICv/wDHaANaisndqH/P5bf+Ar//AB2jdqH/AD+W3/gK/wD8doA1qKyd2of8
/lt/4Cv/APHaN2of8/lt/wCAr/8Ax2gDWorJ3ah/z+W3/gK//wAdo3ah/wA/
lt/4Cv8A/HaANaisndqH/P5bf+Ar/wDx2jdqH/P5bf8AgK//AMdoA1qKyd2o
f8/lt/4Cv/8AHaN2of8AP5bf+Ar/APx2gDWorJ3ah/z+W3/gK/8A8do3ah/z
+W3/AICv/wDHaANaisndqH/P5bf+Ar//AB2jdqH/AD+W3/gK/wD8doA1qKyd
2of8/lt/4Cv/APHaN2of8/lt/wCAr/8Ax2gDWorJ3ah/z+W3/gK//wAdpC+o
AqPtlvycf8er/wDx2gDXorJ3ah/z+W3/AICv/wDHaN2of8/lt/4Cv/8AHaAN
aisgvqAKj7Zb8nH/AB6v/wDHaXdqH/P5bf8AgK//AMdoA1qKyd2of8/lt/4C
v/8AHaQvqAKj7Zb8nH/Hq/8A8doA16Kyd2of8/lt/wCAr/8Ax2jdqH/P5bf+
Ar//AB2gDWorIL6gCo+2W/Jx/wAer/8Ax2l3ah/z+W3/AICv/wDHaANaisnd
qH/P5bf+Ar//AB2kL6gCo+2W/Jx/x6v/APHaANeisndqH/P5bf8AgK//AMdo
3ah/z+W3/gK//wAdoA1qKyC+oAqPtlvycf8AHq//AMdpd2of8/lt/wCAr/8A
x2gDWorJ3ah/z+W3/gK//wAdpC+oAqPtlvycf8er/wDx2gDXorJ3ah/z+W3/
AICv/wDHaN2of8/lt/4Cv/8AHaANaisndqH/AD+W3/gK/wD8do3ah/z+W3/g
K/8A8doA1qKyd2of8/lt/wCAr/8Ax2jdqH/P5bf+Ar//AB2gDWorJ3ah/wA/
lt/4Cv8A/HaN2of8/lt/4Cv/APHaANaisndqH/P5bf8AgK//AMdo3ah/z+W3
/gK//wAdoA1qKyd2of8AP5bf+Ar/APx2jdqH/P5bf+Ar/wDx2gDWorJ3ah/z
+W3/AICv/wDHaN2of8/lt/4Cv/8AHaANaisndqH/AD+W3/gK/wD8do3ah/z+
W3/gK/8A8doA1qKyd2of8/lt/wCAr/8Ax2jdqH/P5bf+Ar//AB2gDWorJ3ah
/wA/lt/4Cv8A/HaN2of8/lt/4Cv/APHaANaisndqH/P5bf8AgK//AMdo3ah/
z+W3/gK//wAdoA1qKyd2of8AP5bf+Ar/APx2jdqH/P5bf+Ar/wDx2gDWorJ3
ah/z+W3/AICv/wDHaN2of8/lt/4Cv/8AHaANaisndqH/AD+W3/gK/wD8do3a
h/z+W3/gK/8A8doA1qKyd2of8/lt/wCAr/8Ax2jdqH/P5bf+Ar//AB2gDWor
J3ah/wA/lt/4Cv8A/HaN2of8/lt/4Cv/APHaANaisndqH/P5bf8AgK//AMdp
N+obiv2y3yAD/wAer/8Ax2gDXorJ3ah/z+W3/gK//wAdo3ah/wA/lt/4Cv8A
/HaANaisndqH/P5bf+Ar/wDx2jdqH/P5bf8AgK//AMdoA1qKyd2of8/lt/4C
v/8AHaN2of8AP5bf+Ar/APx2gDWorJ3ah/z+W3/gK/8A8do3ah/z+W3/AICv
/wDHaANaoLsZgI9SP51Q3ah/z+W3/gK//wAdpD9vYYa7tiPQ2r//AB2gAu9N
tr3y/PjDNG25W7j1/OrMaBGjVQAAwAAqpsvP+fi0/wDARv8A47TkS93rtubQ
HPH+iN/8doAwtV1DXpfFN3p2ky6dGlvZx3O26t3cyszyLt3K42D5Bztbr0PS
iHxtpH9m2N1dSSwPc2y3LxpDJN5CngmRkUhFByNzYB2n0NTanoepTeI7jUtP
1WC0We2S1lV7QyuAru25G3gK3zn7ysOBwelU7jwhJGTHpWorZ28tilhcJLB5
zNEm7aUbcNr4d+WDA8cccpbf15/8AvS/9eX/AAS/L4s0WHUzp73b/aFlSFts
EjIjuAUDOF2ru3DGSMngcg1Yt9f0661N9PhmkadCy7vIkEbMv3lWQrsZh3UE
kYPHBxl3XheFbbUUN8sMV3eWtwpZP9WIfKAXJbnPldeMZ6HHNPSPDtno/iC4
1GFbF45ZpZhI2jt9rUyEkgXAPK5Jx8uccZ71SV/69P8Agkt2Xn/VzsqKrR39
tLIIxJtc9EkUoT9AwGas0mrAnfYKKKKQwooooAKKKKACiiigAooooAKKKKAC
iiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKK
KKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigApj/
AH4/97+hp9Mf78f+9/Q0APooooAY/wB+P/e/oafTH+/H/vf0NPoAKY/34/8A
e/oafTH+/H/vf0NAD6KKKAGP9+P/AHv6Gn0x/vx/739DT6ACmP8Afj/3v6Gn
0x/vx/739DQA+iiigBj/AH4/97+hqjBo9nqF5qE1xGGcThQSqnjy0PcH1q8/
34/97+hqCM3trPdGGC3kjmkEgLzFCPkVcYCH+7600JmFqFv4Zt7lY5Q2ZMqG
jKgHAOcAYJxu5IB7dwMbGmEHSdOwQf3SD/xyuF1rw7qU2t6WXs2nS2EoVkLH
BZQowRhe3JbHtXb6RYvpulWdrK++RSS57bm3MQPYE4HsK8/CYivVm1VjZL8H
fbz01OmtSpwinB3ZzWveIYJfFA0O5uJreziVTM0Kks7EZAyBwBkVh/bV0u/m
nsLto/LRpdhI2vgj5SM49u/rV7xx4SvbjWk1zTrYXZZQtxbkZJxwGA78cY9q
yLTwreavdpjTZrWNhtkM0bRKo45AOPfjpXsxUEnGLaclvo0n2seBWVf29lfu
n09D0LV9Xnh8GXWtWBhE0dkbuLzkLocJvwQCDyOOtRReLdLinisLu7Jvw0UU
xjtZRGksiqVBbBVN24bctz0ySDVrVNHa98L3Oi2s6W4mtTarK8fmBFK7SdoI
zx71nHwnJJaX0Ut+pku7q1uWdYMBTCIsgDcfveV68bu+OebS77f8H/I9fovn
+n/BF07xtp17p1xeTQ3duIruS1WM2kzPKyswGxdgZiQpJVQSvOehqzJ4v0SL
711Lxam8bFtKfLiG7LPhflxsYYbByMYyQKyr7wMb6zktpbuzmjTUX1C2S5sP
OjBcuXSVS+JB+8OMbCMA84qdfBv+hahb/aLSD7Zpf9nbLOz8mKLmU71TecD9
793Pbrzwun9dv8x6X8v+D/kaEHi3Rbi3up0u3CWoRpN9vIjEOcIUVlBcMRhS
oO48DNVV8Z2E2u6dpsFvev8AbElYyNZzoYmRlG1lKfLndklsYG0nhgai1nwZ
FrIuxLdKBPaW8Cq8AdQ0MjSKzKThlJYArxwDzzwaf4Um066025gl0m2a0Myv
FZaYYIpI5NmcKJDtf92PmyR7U1a5Otv67GvDqEsniS804qnkw2kE6sAdxZ3l
U55xjEY7etYFh4k1d9Wt/tTWL2N1qV1YRwxQOs0flGTDli5DDEfOFXG4VsW8
Eq+M9RnMTiF7C2RZCp2lhJOSAemQCOPcetN0Xwvp+jXF5dpb2z391PNK92tu
qylZJC+wt1IGQOvYcCl5+RUuqXl+X+ZGvjTQ5LKC7inuZYrgnyRFYzu8gABL
KgQsVGRlgMAnBOeKjg8Z6bPrc1ipf7NHYpei+8t/JKNuJJfbtAAXO7dgkkdV
NQw+FLuwstGGm6pFFe6baNaebPamSOWNtucoHUg5RSDu9eDnhreCU2S2y3x+
xXGljTrlGizI4G8h1cEBTmQkgqR0xih+X9b/APADT+vVfpc0V8VaQ1k90Zbh
ER1j8uSzmSVmYZULEyB2zzjaDnB9DVeHxjYy67Ppzw3UEUNkl41zcWs0Sqp3
E7t6AIAFzknkkjqDVCy8Ey2NnCLabR7S9tp0ngnstI8hGYIyHzUEnz5V2HBX
GeKuXvhe41K4uXvdQhKX2m/YLxYrYqWxvIeMlzs5kPBD9BzQ/L+tP8xLz/rX
/ItDxbo/2Nrky3KqJFiET2UyzOzDICxFN7ZAJyFIwD6HFGHxPPceCtY1yJYG
ktDeeQNjBWETOE3AnPIUZ6d+lV7LwXc6faQizuNGs7y3nWaKaz0fyUchGRhK
gl+fIc8grg/lWhB4ZkTwpqWiy3/myX/2ktc+Tt2mYsSdue2715xQ+tv62HF7
X76/j/wDN1Txld2ngJtWgtoW1YK8f2d87BLGGMmec7QqOw55AHPNbJ8U6VDd
RWdxcMtw3lq5WCRoo3cDaryBSiE5GAzAnI9RVK88GQ3b6k4vHQ3tg1qFKApG
7IEaUDPJKrGMZ/h9zQ/hS4N3cLHqSLp13NDPdQG2zIzxqg+STdhVIjTIKseu
CMjD0uT0X9dh174ttV1vT9NsZBLJLfG1nZoZNgAjdmCSYCswZQCATjkEA1bh
8WaLcHCXUmC6Ro720qrKXbYpjYqA6liBuUkcjnkVQXwndjULYtqyNp1rfSXs
Vt9lw+ZBJuVpN/IBkYjCg9jnrUGgeCZfDqiOwudLhVSiieHSlS5kiVwSksm/
DkqMFtoOeetEel/6/r5jl1t/W/8AXQ19Y1C/TULPS9K+zpd3KvK09zGzxxRp
tBO1SpYkuoA3DqT2wakPimKwjng12RI7uC7FoGtYXYXDNH5iFEG5gSuflyTk
YBORm/q2kz3lza31hdpaahah1SSSHzY2R8bkdQykj5VIwwIKjtkGlF4XcTWt
1cagZrxL/wC33EnlbVkbymiCKufkUAjHLHjkkkmkv6+//IH/AF/XqbGnalaa
tYpe2UpkgcsASjIQQSpBVgCCCCCCAQRVqs/R9L/sm2nh87zfNup7nO3bjzJG
fb1PTdjPfFaFABRRRQAUUUUAFFFFABRRRQAUwf65v90f1p9MH+ub/dH9aAGX
TvFZzyRjMixsyj1IHFefw3eqnxOI3sQIzZ+dkXKFiu/H2nd1Ax/yzz+FejVm
X2g2V7a3EJRk85GXKuwAJ77Qcdea2pVVTTvG9zKrTc7WlYmLXdzpCPBLHBdS
RKweSPzFUkAn5QRnv3/wrlLLVNY1jR/DNsmpyWt3f2D3c95HFEXYoqDAVlKj
LSAnC9Bxit3S9M1WHQn0++1JlnDFYbq22s6x8YzvUgnqOQePeqtv4NittIsr
CLWNTVrIFILkGESpGVCmPiPaVIA6qTkA54FYK7T/AK7/APANtmc/Y+K9W1Ky
j1wXPkwW8tjBLZIiFJTMI/MYkguMecNuCB8vOc1oXWqa3pupXgvbl7e2m8xY
prlrcQQqGBWRNvz7VTJbzeC20Dg1rL4Q06O5t2hkuIbWHyT9iRl8mRov9WzZ
BbK4XowB2jOcVb1DQ4NReaSS4uEldY1jkQrmDYwcFAVIzuCk5BB2jPAxVO3Q
RetLiC6s4Z7a5S5hkUFJo2DLIPUEcH8Kmqpptgmm2K2ySyTYZnaWXG52ZizM
doAySSeAB6CrdD3EjlPEXj2z8NatDp15pOrSyXGPs728KOs5OBhPnBJBIGMZ
5HYgnqIXaWGOR4niZlDGNyCyEjocEjI9iR70PDFK8byRo7RNvjLKCUbBGR6H
BI+hNPpDCnR/6xPqKYzKiM7EBVBJJ7Co1kDXUalk+WcAAOc/cz07nn8vegDz
k+LNWJydUuf+/dv/APGqxtW8c+JGvrXSdI1OT7fcHJeWGBliQdWP7r0rm/7V
/wBr9azdFvg13rGos6+czLbpk8qg64/ECtacOaVjGpPljc9NuvFkljBGJrqS
9uVGGuGRVZz3wqgBR7D8c1Sj8V3ch3PBIqddxNchp17BcXpaUyS7cAJEhdj+
Arq5rixvLWPS4FnhvruVIVhnhaN9jH5mGRyAoPIrixuIxFGso04Pl0u7afed
mFhhJYbnqyvN30vr9xpR+JlaPZIwZD1RxkfkazNb8Ya7pUkOoWGrSyaRuCXF
v5UTvAT0IZkJI+ucdO4q74g0mEIzBBkDjiuDtLmOaa7s5JF+zOjQtk9Pf8Dz
+Fb4XFLFNxUbW3PKc3CVmehL4t1R0V11W4KsMgiO35H/AH6pf+Er1b/oJ3P/
AH7t/wD41XnGlakyaVArtymU6+nP9atf2r/tfrVtWdjsTvqd7/wlerf9BO5/
792//wAao/4SvVv+gnc/9+7f/wCNVy+iR/2rJPJLOILS2TfPKTjaKki1LT9S
SePSZVjaLlRMFd5gM55PCjA4GM+p9BRlOap01eT1t2Xn/V/K2pnKtGCcp6Jd
fP8Ar5HSf8JXq3/QTuf+/dv/APGqP+Er1b/oJ3P/AH7t/wD41XBDWFlAkUgK
3zAA9Aa0WuUW4nQWzlIpXjBN2AW2sVzjyzjpWlKjOr8CKnUjD4mdZ/wlerf9
BO5/792//wAao/4SvVv+gnc/9+7f/wCNVhWgtbuSNPsl3HvYKX+1qwGTjp5Y
rFtL8XF5BCWIEkiocHnk4oqUZ03aasKFSM9Ys7f/AISvVv8AoJ3P/fu3/wDj
VH/CV6t/0E7n/v3b/wDxquXWO+Omx366XLNHJCkyRxXEm5lbHQ+RtJG7nBPQ
+hrPttdtbu8ks/7Nu7WVEkLGS7D7WRScFfKU9RjrVLDVGm0the2he1zuP+Er
1b/oJ3P/AH7t/wD41R/wlerf9BO5/wC/dv8A/Gq4L+1f9r9aP7V/2v1rA0O9
/wCEr1b/AKCdz/37t/8A41R/wlerf9BO5/792/8A8arPsfEHh9ItOF5JaySJ
bv8Aa2S1bDp/DEBgZm/6aAqB3LVysmqxmVzFuWMsdqs24gdgTgZPvgUAegW/
iDXrppPJ1CXbGQrNJ5CfMQGwMQHPBHp1qf8AtXxH/wBBEf8AfyL/AORq4yx1
gRQyjd1kB/8AIUdeh+CEtNW0ueWeJJCJ9gYgEjgH+tZ1KnIrlJXM/wDtXxH/
ANBEf9/Iv/kaj+1fEf8A0ER/38i/+Rq17tLNvD1zOlrGtwiNtKLySK4CPWWl
kWOPLuxCqq8kk9ABUUK6rK6HOLjudR/aviP/AKCI/wC/kX/yNR/aviP/AKCI
/wC/kX/yNWGJNTa6a1XT7w3KrvaEQtvC+pGM4qL7befYzefZp/soO0z+Wdmc
4xu6da3JOh/tXxH/ANBEf9/Iv/kaj+1fEf8A0ER/38i/+RqwhJqZuRbCwvDO
V3iIQtuK5xnGM4zxmpZmu49PhvEinkjaNnlKxHEOHZfmPb7p64oA2P7V8R/9
BEf9/Iv/AJGo/tXxH/0ER/38i/8AkauV/t0f3v1o/t0f3v1oEdV/aviP/oIj
/v5F/wDI1H9q+I/+giP+/kX/AMjVyv8Abo/vfrR/bo/vfrQB1X9q+I/+giP+
/kX/AMjUf2r4j/6CI/7+Rf8AyNXK/wBuj+9+tH9uj+9+tAHVf2r4j/6CI/7+
Rf8AyNR/aviP/oIj/v5F/wDI1cr/AG6P7360f26P7360AdS+reJFQlb7ewHC
rJDk/TNsBVSPxVrE3k+RqFy7TbfLDJbr1UtyfKOOAfWsSLXAZk+b+Id6x9P1
PY1kd33VT/0Q9AHf/wBq+I/+giP+/kX/AMjUf2r4j/6CI/7+Rf8AyNWX4Z1G
O/8AENpayAOjlsqeQcKT/Su8mtdPi1JIDaQlHi3/AHR8pyen5VzVsSqUrNFx
g5HL/wBq+I/+giP+/kX/AMjUf2r4j/6CI/7+Rf8AyNWRr+opYa3c28Y2RqwK
D2I7VFNdSx2VtcozSLNC0zbV/wBWocpkn0yBz71vCSlFSXUlqzsbn9q+I/8A
oIj/AL+Rf/I1H9q+I/8AoIj/AL+Rf/I1c/Dd31xOIILS4lmKCQRpEzMVPIbA
HTkc+9ILy8NrJdC2uDbxtteXyzsU+hPQHkfnVCOh/tXxH/0ER/38i/8Akaj+
1fEf/QRH/fyL/wCRq5+4ur60jWS5tLmFHYqrSRMoYjqASOtNu7+6sJBHeQTW
8jDcFmQoSPXB7UAdF/aviP8A6CI/7+Rf/I1H9q+I/wDoIj/v5F/8jVyv9uj+
9+tH9uj+9+tAHVf2r4j/AOgiP+/kX/yNR/aviP8A6CI/7+Rf/I1cr/bo/vfr
R/bo/vfrQB1X9q+I/wDoIj/v5F/8jUf2r4j/AOgiP+/kX/yNXK/26P7360f2
6P7360AdV/aviP8A6CI/7+Rf/I1H9q+I/wDoIj/v5F/8jVyv9uj+9+tH9uj+
9+tAHQt4k1yO4aCXUJ0kG0jaLdlYNnBB8kd1PbtUlvrniG6t450v2WORQyeY
0IYqehIFucce9cdcar5moRtu6iEf+Py1NZ60E0+0Xd0t4x1/2BQB2H9q+I/+
giP+/kX/AMjUf2r4j/6CI/7+Rf8AyNWDa3yTWdxf3V19nsLbh5BjLN/dGe/T
86qnxBHdWct5aTKkduNz27FWYpxyzc8+wx19uRRlKXJTXM0rvyXn5+W5m60I
6z0V7X7v+uux1H9q+I/+giP+/kX/AMjUf2r4j/6CI/7+Rf8AyNXP2mofbI7n
ZMBLDGZVjx98D72D6gc/QGrEjXv2hre3hnuZoo1edYoi3lEjODjPT+efSg1N
j+1fEf8A0ER/38i/+RqP7V8R/wDQRH/fyL/5GrGkkuhpsF9Ek00MkRkkZIyV
iAdl5I/3faq7Xt4lkt61tOtqxws5jIQn2bpQI6H+1fEf/QRH/fyL/wCRqP7V
8RHH/ExXj/ppF/8AI1Y0D3r3VlHPBPbx3kipFLJEQrbiORnGeuadpEravPcw
xzhHhiMigjO87goXrxksKANf+1fEf/QRH/fyL/5Go/tXxH/0ER/38i/+RqyL
KR7vSr6/M4jS1UEKRkyHIBA9MZGfqKiM95DKiXVreQ+YjPGDAcsAM5AOMj1P
Yc0DNz+1fERx/wATFeP+mkX/AMjUf2r4j/6CI/7+Rf8AyNWSsq/2xY2D3JH2
pYmDhM7TIoI4zz19ahknvAk08VtdSWsZJ8/yTt2gkZJGQOh79jQBuf2r4j/6
CI/7+Rf/ACNR/aviI4/4mK8f9NIv/kase2e6nsZ72RJoraOIypKYjtkwyqQD
07/pVK51f7PcyQkyKUYriVNjD6rk4PtQI6X+1fEf/QRH/fyL/wCRqiuNd8QW
yq8l/IYy6oWiMDFSxwODAOMkCua/t0f3v1qK51kS2+zd1li/9GpQBe1j4iap
pbRRJc3d1cuvmBP9GRVXJAJbyT1IbHHY1k/8LZ8R/wDPtN/4F2//AMjVyGt3
fm6tE+etnGP/ACJLVSAyXE6QxDdI7BVHqaaTbsgclFXZ3X/C2fEf/PtN/wCB
dv8A/I1H/C2PERx/o0vH/T1b/wDyNUD+GdK0mW1t9Uv2fUJsEWynag/3m6gf
qfaud12H+zr42zQxxSLz+6csjofusNxJ55qU3K7irxWl1tf1/wAtCVUi2k3Z
vWz3sdT/AMLZ8R/8+03/AIF2/wD8jUf8LZ8R/wDPtN/4F2//AMjVzltoNzPa
Q3kl1a29pJbtcNNKXIjQSGP5gqk5LDAAB69ucT2fhqa9iV4tU0797cta2yl5
P9IkCq2FOzAzuXG4rycHFMs3P+FseIjj/RpeP+nq3/8Akaj/AIWz4j/59pv/
AALt/wD5GrlNL06TU5btTdW9olpCZppLjfhVDKvRFY5yw7VDqlpNpN81rM8b
kKrpJE2UkRgGVlJxwQQelAHY/wDC2fEf/PtN/wCBdv8A/I1H/C2PERx/o0vH
/T1b/wDyNXBefR59AHe/8LZ8R/8APtN/4F2//wAjUf8AC2fEf/PtN/4F2/8A
8jVwXn1sWmg319eWttA0LNdWpuo2LELtG7gnHXKlfrj60eYHS/8AC2fEf/Pt
N/4F2/8A8jUf8LZ8R/8APtN/4F2//wAjVyDWbRabDezXMEazq7RRtuLvtYKc
YUgck4yQPlPtmj59AHe/8LZ8R/8APtN/4F2//wAjUf8AC2fEf/PtN/4F2/8A
8jVxr20yaRFqZaPyZZ3gVcnduVVY9sYww7+tVPPoA74fFnxADl7ecL3K3NuT
+X2aujtPGupX1hBeW2o3jJMo2IY7YNuLbNp/dY4bg14959dF4ZvvJ0XT1z0k
3f8Ak2aAPUhqviPHOogH/rpD/wDI1H9q+I/+giP+/kX/AMjVh6PqaXusWltI
cpLKFIz2r0PU7HRdPhBNqpdum6RgoAxkk54AyPzA6mlKUYR5pPQcYynLljuc
x/aviP8A6CI/7+Rf/I1H9q+I/wDoIj/v5F/8jVo+Lrew0zQory1hMTO6j5ic
4I6EHpXL6de2V5bXEkt7cRPbxGWRUt1cbdwXg7xz8w7U/MnW9jX/ALV8R/8A
QRH/AH8i/wDkaj+1fEf/AEER/wB/Iv8A5Grn1vbqW2lu4Le4ktIyQ04iO0fU
jIHUd+9PSbUpI0kSwu2RyFRhCxDEjIAOOcg5oA3f7V8R/wDQRH/fyL/5Go/t
XxH/ANBEf9/Iv/kasCO5v5bx7OOzuXukGXhWJi6/VcZHWlSfUJIRMlldNEX8
sOImKls425x1zxigDe/tXxH/ANBEf9/Iv/kaj+1fEf8A0ER/38i/+RqwdTur
nSL+SzvFKSoe4IDD1GQMj3qn/bo/vfrQM6r+1fEf/QRH/fyL/wCRqP7V8R/9
BEf9/Iv/AJGrlf7dH979aP7dH979aBHVf2r4j/6CI/7+Rf8AyNR/aviP/oIj
/v5F/wDI1cr/AG6P7360f26P7360AdV/aviP/oIj/v5F/wDI1H9q+I/+giP+
/kX/AMjVyv8Abo/vfrR/bo/vfrQB0M/iPXbaYRz38y7kLq0YgdSAQD1hBB+Y
du9R/wDCV6t/0E7n/v3b/wDxquV1HV/M8tt33YpP/QoqowXs11OkFujSyucK
iDJJ+lAHcf8ACV6t/wBBO5/792//AMapD4s1VQSdUuAB3Mdv/wDGq5PVkn0W
4S3upoTcFA7xRvuMWegbsD3xk1tfD6XTr/xDP9vEcrwwq9tFJyC2TubHcjC/
TNFgNE+LtUG3Oqz/ADdPkt+f/IVO/wCEr1b/AKCdz/37t/8A41Xd6nJp97p0
0F9HE1uUO7cowo9a8X02eEazPA77reFiVDc5GB8p+jEj8MU4q7sgk7K51x8U
6wqbzqV0F9TFb4/9FUn/AAlerf8AQTuf+/dv/wDGqrwXdhqF80E1vNcjynYJ
D2YDgt6L6muT1Zxo+sR2sbgw3FnDdqofcIy6gsoPcZJwfStpUbIyjVuztP8A
hK9W/wCgnc/9+7f/AONUx/F2pRKZJNWnRR1ZktwPz8quF/tX/a/WtK11O007
7DqFzqF9FLPb3DxLaWqsYs+dbhvMMqnIILcKOwz3rOFOU5csS51FCPNJnSL4
4u3YKuuszE4AH2Ykn/v1U/8Awlerf9BO5/792/8A8arClOuWlq93Pq2t3mlX
WmXXF4zrljDIqgoJHBGdpznjPbGaj8J6ZL4r1j7IbswW0bR+cUX5yrCQnac8
f6sDofvZ7VdSjyNWd01czoV1Wi2jfTxfqcm7Zq07bTtOEtzg+n+qp3/CV6t/
0E7n/v3b/wDxqsPxPpzaZ4q1K20zTzFYpNFFCIkwpYwR/KP7zE545JOawZNQ
khkaOVWjkQlWRwQVPoQelc6lFuyZ1yo1IRU5RaTO6/4SvVv+gnc/9+7f/wCN
Uf8ACV6t/wBBO5/792//AMarkdHkTVdVt7J7xLbznVA7KzZJIAAA7898D3p+
npNf6rDZhnWKS5W2M4QlVZjgfjwTjParsZXOr/4SvVv+gnc/9+7f/wCNUf8A
CV6t/wBBO5/792//AMarmrj7HZ6o1pd3OoWyqoyJrHbLuJ/ub+mOc5/Cql00
1vrUulq6yzJOYAUPDNnHFJajem52H/CV6t/0E7n/AL92/wD8ao/4SvVv+gnc
/wDfu3/+NVhppofxHDpf9op5EsTSpdBPlKqrEnGfVGHXtmodM0+4v7zULaaY
W5sY5GkLLnLqCdg6cna34AmgNTov+Er1b/oJ3P8A37t//jVH/CWasDkapc/9
+7f/AONVwX9q/wC1+tH9q/7X60CPO/tdx/z3l/77NWLH5o5snLLKSc+jcis7
cPWrNncCGcSY3RkbZUHUr6j3Fb4eahNN7GGJg502o7noXhydbFId2AT8xz7/
AORXoVuLTxVqVva3aGSzsbdpSAxUiVztQgjkEBWPHrXmWn6bDcRiTf5yN92Q
HOf8K6nR31LQ0l+yKksUpBZXzngYGDXfmVHEVMK/q6vPpqeFg8Xh6GJ/fytF
76G94g0i3sNMuJ5NX1WaOKMlY5LgfgCQAx/OvGpbc7kB6k5J/nXoOs6nqWpw
tbS26xRsQThixOO1cdfokTshdQ2P3jZ4jX/GvOyjCYjCUJ1MZpJvbTb5dz0c
ZicPiq0aeD1SW/8AXRGHfTyxRQokjpnc+AxHXA/pVL7Xcf8APeX/AL7NNu7o
XNy0g4Xoo9AKg3D1qG7u56SVlY9DhvVXwppOkL5rJelrm6kUFtwViApPoCMn
6CoLxbTTbV5LjxRNdykZjhtW2n6E8/59elcUl/dRwGBLqZYT1jWQhT+HSoNw
9a0wVeWGhKKW7bvd9e/ey0RzYrCLEVFLmskkrWT+7tfqWRdTKMLNKFHAG88C
vXLnR542u7iC01O5c3DtsitWOQzscrxggcd+c5AwK8a3D1o3D1qqNedFtw3Z
rVpKokme1adfXEd3bwPomqx7pFUvJbFQvI5PoK8u0C6nbxHpimaQg3cQILnn
5xWNuHrRuHrSq151WnN3HTpRpq0T2XwbJc/YP7M1/RNVNqg3x3q2LzSRABR5
aBo2AU457cfSo/FcOnm5Nxo9rqCqtnePcT3Nl5LbzEcZIRQe/XnJNePbh60b
h61q8Urtpb+ZmqHmWftdx/z3l/77NH2u4/57y/8AfZqtuHrRuHrXIdBZ+13H
/PeX/vs0fa7j/nvL/wB9mq24etG4etAGpc3tyioFuZhkKThyP+WaV7J8HdSd
fCF8JJmeT7c2NzZIGxP/AK9eJttuFUh0A2rwXUEEKF/iI/u549adB51rKJLe
7aGQdGjnRT+YesMRSdWHKnYqEuV3Z9JQ3wt7NnkwYxu3bjgAHjP4dfwr510v
Wbuy1W1uTqN1AIpA/mIolK47hGIVvoTg1VkjeaQyS3Adz1ZpoyT+O+m/Zh/z
0T/v5H/8XWeDwrwyave5VWftGd5beOdKtH1C3tDdWkFx5Ei3P2GK4Pmpu3fu
JZGVA28kbX4K8cHAibxtYL4fvrWOW9N7dwukjm0iXzJDNv8ANMgYuoKgDy1+
UH161xH2Yf8APRP+/kf/AMXR9mH/AD0T/v5H/wDF11mZ2N54xstVvdfjubnU
7W01G6S5hnhRZJU2bgEZC6gqQ3ZuCo61HaeNI7ZdIiafUHhsrK7t5QT99pfN
2tjdj+NM5/u98CuS+zD/AJ6J/wB/I/8A4uj7MP8Anon/AH8j/wDi6VtLf1tb
8hi/b7z/AJ+5/wDv4aPt95/z9z/9/DSfZh/z0T/v5H/8XR9mH/PRP+/kf/xd
MQv2+8/5+5/+/ho+33n/AD9z/wDfw0n2Yf8APRP+/kf/AMXR9mH/AD0T/v5H
/wDF0AL9vvP+fuf/AL+Gj7fef8/c/wD38NJ9mH/PRP8Av5H/APF0fZh/z0T/
AL+R/wDxdAC/b7z/AJ+5/wDv4aPt95/z9z/9/DSfZh/z0T/v5H/8XR9mH/PR
P+/kf/xdAEtvf3f2mL/Sp/vj/lofWrP2qdYcieQEJFjDnj9w1Ulh8tg4kQlT
kZlj/oxp3nRvviV14CAEnAbahQ9enXPNAHVfDTUJx8QtKM1zIUzJkPISP9U+
K9yu7xpNTVwc4jwPzr5g+zYORKn/AH9j/wDi6nmkurmNEnvpJUQYVXuEYL9M
vxXBi8G68k1KxtTqKHQ7P4q6lK/iuAQzPFts0V0ST+IM/Jx3IwfxqnZeMLQa
XbaddzahGn9my2c80Sh2V2n81WVS67uAAckdT+PI/Zh/z0T/AL+R/wDxdH2Y
f89E/wC/kf8A8XXZThyQUP66/wCZk3d3O1vfF+l38V1p5udWtrKSC0WO5jjV
5d8CbCGTzACrZJ+9wQOtR/8ACbRnwrBpsd9d29zbwy2+Rp8Ev2hWZmBMrMJI
idxBC7umRXHfZh/z0T/v5H/8XR9mH/PRP+/kf/xdXcXY7k/EOJda1LUAt5Mk
2rW19bxSsABHGXyp5O0kMoGMjj2rH8UeJjqk0P2LVLuWFC5CPYQ2ezcR/wA8
WIc8ckgdPeue+zD/AJ6J/wB/I/8A4uj7MP8Anon/AH8j/wDi6Vv6+Vv0AX7f
ef8AP3P/AN/DR9vvP+fuf/v4aT7MP+eif9/I/wD4uj7MP+eif9/I/wD4umAv
2+8/5+5/+/ho+33n/P3P/wB/DSfZh/z0T/v5H/8AF0fZh/z0T/v5H/8AF0AL
9vvP+fuf/v4aPt95/wA/c/8A38NJ9mH/AD0T/v5H/wDF0fZh/wA9E/7+R/8A
xdAC/b7z/n7n/wC/ho+33n/P3P8A9/DSfZh/z0T/AL+R/wDxdH2Yf89E/wC/
kf8A8XQBoWt5cN5Ba4lJ82EZLn+9JVJ767GwC6mAEaAASH+6KVZ0tfLyysVk
RsKwPC5PUcc7v0qMwBsYljIACgiRBkDjOCwIoA9BvrpbmDStFWaWK2trZLhp
wCQZXUEOT7Z79/wrI1f7JYafJG/iOfULpwVCW7bUwfXg5H5envXONJdNbi3a
+cwDgRm4TaPw34qD7MP+eif9/I//AIutcJXlh6Hsku+t3rfq+7OXEYSNasqv
NpppZdOz3Rp+H/EE+k+IdPv57i4eCC4R5UVtxZAfmXBODkZGD61v+GvGdnpu
p3V/qMl49w94k6SiCO4JjDMWTEjAISSp3jJGOMVxv2Yf89E/7+R//F0fZh/z
0T/v5H/8XWV/6/r0Oqx2EXjmNJdM3SX5htrS8hlTdwzzGXaQN2CPnTOf7vfA
pLjxlavZyXMU2om/m0+Gxe1cD7OmzYC4bfk5CZ27RgseTjnkPsw/56J/38j/
APi6Psw/56J/38j/APi6Nv69f8xt3d/6/rQ7e78bWD3891b3WsA3+oQ3lyrB
B9lVCSViO4hz8xALBRgYIOeMHRvEsumJqpa4uzJc2vlW7K+dj+ajhjzxwh6V
jfZh/wA9E/7+R/8AxdH2Yf8APRP+/kf/AMXQtNhHZ3Xjy3uDepHBcwW89iYx
Ej8faHlSSRs54X5So6kAL71fuvH+lB7ZLMXwt4WuyqC1ih2LLB5aJ8rkuVOM
ux3Hr1rz37MP+eif9/I//i6Psw/56J/38j/+LpPVWGnbX+ux1Efiy3bxbomp
SzXyWdjFaCZUAZnaJFDYXcAQSvUnoc47VaHje3jutO2Tag9ta2t7A4bALmYy
7Dt3kdHTPPG3jOBXG/Zh/wA9E/7+R/8AxdH2Yf8APRP+/kf/AMXTev4/iJaf
h+B2cnjKwbTL1hc6t9uu9MhsjB8vkRvGY/mDb8kEIT90YLHrnNUtX8QaTq2t
3moPPrMYuLmeTZG6AKhT90MZPO/O7tt6c1zP2Yf89E/7+R//ABdH2Yf89E/7
+R//ABdD11BaK39di1e348yP7Dd3/l+UnmefJz5m0b8Y/h3Zx3xjNFjfXTXK
K1zMRvj4MhP/AC0Wqv2Yf89E/wC/kf8A8XT4QttKsjSJhWDH94p6EHACk9cU
AV9RuJt1o3myZNvydx/56SV0HgC4ht9WutWv3aSHTbczhGYnLZAX9TXPTwm7
igaJ4t8aGNkeQIfvFgRkgfxfpS2Q1LT5WktpIELrsYGeFgy9cEFiD0FZVoOc
HGPUqDSldndJYaprUh1aO90xkmbzLie5UMyN/s98AAADtiuR8TXkr6ttGp/a
zEgiMkaeWvGeBgnOM9ap3Q1S9k33E8TnAGPtMQAHpgNiq39n3P8A0w/8CYv/
AIqu+eKUqKpRjyrTrpp22OCjhJQqupKfNv0Sevd6naprkMD6VZWHie1gNhYv
FLdT280ltdF5WdoyhjZmADD7yYJXtgE2b/xrpOm2TDQLa3lmj1Wa4tTcJN/o
4MUQEkY3BfvqxVX3YwMiuB/s+5/6Yf8AgTF/8VR/Z9z/ANMP/AmL/wCKrkev
9edzuX9fdY3/AAv4gg00a5JqO25NzYGKKGdpSsshljbBKEMOFY5yOnWuj8Ie
NbZNZudW1bU0spjNboLfNysH2VAQURIT8zKAoAkJUgnO4mvPf7Puf+mH/gTF
/wDFUf2fc/8ATD/wJi/+Kpi6HqXhnWorq2WKx1poLe107UDdaaIZP3jFZSsx
IXZjayDJIYbQoGDWP4h8WW194NtbDT7yxSJba3RrN/tYuI5UwHZRkwDJ3HcM
MQxzznPKC719dKOlDVJhpx62g1FfJPOfub8deenWqH9n3P8A0w/8CYv/AIqk
1+n6/wCY79fX9CxLqwk02K1WygjmRsteLLN5rjngguUxz2UHge+en0vxfDp3
g+LZcyjW7a4EUK4bBtzIkxO7pw6EY64euQ/s+5/6Yf8AgTF/8VR/Z9z/ANMP
/AmL/wCKpp21FY7vVPE+jf2hrcGnXkn9nf2SLSwLI4LuZklYY7cmTk+lX77x
7p9/rGovf38t7p6a3bXNlC0bFRApfzNqkAAEFcqcbj1ycmvNf7Puf+mH/gTF
/wDFUf2fc/8ATD/wJi/+KoXT+utxvVW/rax3Wva1Z6ro1lp974xa/uI7u6uH
vFt5jhDGvlp8yqTll2+i59BXKXMdlFZySwa7JNOqwFYfIddxZSZBuJwNhAGf
4s5FUP7Puf8Aph/4Exf/ABVH9n3P/TD/AMCYv/iqmwXI/tM//PaT/vo1uafc
TJYWoWWQARA8Mev2msf+zrn/AKYf+BMX/wAVWhFIkMcduJUJSHbvz8u7zPMx
/TNUI3/A+oXH/Cb6P5tzIU+0qCHkOPxr33XPt8uoq1vJcbEIYDymwrA9sRNk
cA9ev0FfMSwFWDLKqkdCJY8j/wAfqbzLr/n+k/8AAhP/AIun7rVpIXvJ3TPa
vifJeW/gieZ7qQLPeIYUYsHQDgnkAjOM4xgZ44ryPSPED2Nrq0U8907XdkYI
ir52v5iNk5PAwp6etZ0gmlXbJdlx6NOh/wDZ6j+zD/non/fyP/4uhu4RVjrb
Lxhaw6dp8ss+pC/0+1mtkgTBgn3lyHZtwK48w5G052jkZ4JvG/mLeKs9+Fl0
WDT4xv4WRPL3H73Cna/PX5unJrkvsw/56J/38j/+Lo+zD/non/fyP/4uk9b/
ANd/8xrT+vT/ACOxn8Y2Oo2k9jd3Op20UttZg3MCLJJ5sMexgVLruRsk53A5
VePQg8YadaeFLjToHvRdzWzQsTbR/PJ5oYSGYsXA2gDYBgEZ561x32Yf89E/
7+R//F0fZh/z0T/v5H/8XRfqC0t5Gz4o15NU8Q3eoafd3ohuXMpSYbDGxPKj
DMCB68Z9BWP9vvP+fuf/AL+Gk+zD/non/fyP/wCLo+zD/non/fyP/wCLpJW0
AX7fef8AP3P/AN/DR9vvP+fuf/v4aT7MP+eif9/I/wD4uj7MP+eif9/I/wD4
umAv2+8/5+5/+/ho+33n/P3P/wB/DSfZh/z0T/v5H/8AF0fZh/z0T/v5H/8A
F0AL9vvP+fuf/v4aPt95/wA/c/8A38NJ9mH/AD0T/v5H/wDF0fZh/wA9E/7+
R/8AxdAFmO8uWtJS1xKSEbBLn+9HVnQPFGp+HdVTULObe6gqyS5ZXU9Qfy7V
nMVggkQuhLLtADAnkqc8Ej+H171U3D1oA6LxLrVnq2pnUdNW8tXucyXNvJJu
RJSeSjZyQeuCBg5xxjGOt7co6utxKHU5Vg5BB9RVXcPWjcPWgDo7/wAZaze2
kNp9unS3ijCAb8s3uzdSf6VnWOq3FnciQyyOmCrKWzkfjWbuHrRuHrTTcXdC
aTVmd3oPjo6Hc3khtoryG7t2t5I5HK/KfccisDXPEdzrV1bzMscH2e2S2QQA
qNifdB5ycDjPsKw9w9aNw9a1nXc1sZwpKPUs/a7j/nvL/wB9mu98M6l4S1HR
ra18T6hNp8tnBJBFNE8krSEyvKGMYgIAzKwz5mfk6DOa853D1o3D1rOE5QfN
F2Zc4RmrSV0elXHjaGDRbdINXnnubbdGECko4IIyu4Ahec8j8K5Xw/4w1nw1
qa32n3I3CRZHikUMkm0MMHuBh2HBHX2Fc/uHrRuHrVTqym7vf0W127eiu7ep
z4bCQw9+Xr/Vj27TPi3owv8AUNQeC8V7yWNngmYbYVC/MUIzufcSFOBwB06V
5VreqC71i4mtLi4NuWxG0h2uwHALAHqe9Y24etG4etc0aSjK/wDWp6tXGTqU
+RpdL+dlZG/4Z1a30/xFZX2pXd6tvazJPtt0EjOVYHbhnUAHB5yfoanl1HS5
XuYf7W1tbeW6WRWES42bWyTF5mC4YgD5umfpXM7h60bh61qch39v4r0RJ7Xf
c6sP7NsxBY3T2ySsZC7MZHjMoA27iEXc2MAnOMVi6Pr1tpHiJ9ReW7v44Vke
2E4KGSUg7DIA/ABOThieK5rcPWjcPWjz/rUDvLTxxY+TZGbT2tJbRbqJFs2d
0aOWFlGTLIzZDnPXGCe/Ug8eRK1i0kNyji3mF86MCZ5jA0MbYJHABBPuzn0r
g9w9aNw9aHqO5Z+13H/PeX/vs0fa7j/nvL/32arbh60bh60CP//Z

--0-1251658241-1260352649=:67012
Content-Type: text/plain; name="displayres.txt"
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename="displayres.txt"

PCVAIHBhZ2UgaW1wb3J0ID0gImphdmF4LnNlcnZsZXQuKiwgamF2YXguc2Vy
dmxldC5odHRwLiosamF2YS5pby4qLCBvcmcuYXBhY2hlLmx1Y2VuZS5hbmFs
eXNpcy4qLCBvcmcuYXBhY2hlLmx1Y2VuZS5hbmFseXNpcy5zdGFuZGFyZC4q
LG9yZy5hcGFjaGUubHVjZW5lLmRvY3VtZW50LiosIG9yZy5hcGFjaGUubHVj
ZW5lLmluZGV4LiosIG9yZy5hcGFjaGUubHVjZW5lLnNlYXJjaC4qLCBvcmcu
YXBhY2hlLmx1Y2VuZS5xdWVyeVBhcnNlci4qLG9yZy5hcGFjaGUubHVjZW5l
LmRlbW8uKixvcmcuYXBhY2hlLmx1Y2VuZS5zZWFyY2guaGlnaGxpZ2h0Lios
b3JnLmFwYWNoZS5sdWNlbmUuZGVtby5odG1sLiosIGphdmEubmV0LlVSTEVu
Y29kZXIsIGphdmEubmV0LioiICU+DQoNCg0KPCFET0NUWVBFIEhUTUwgUFVC
TElDICItLy9XM0MvL0RURCBIVE1MIDQuMDEgVHJhbnNpdGlvbmFsLy9FTiIN
CiJodHRwOi8vd3d3LnczLm9yZy9UUi9odG1sNC9sb29zZS5kdGQiPg0KDQo8
aHRtbD4NCiAgICA8aGVhZD4NCiAgICAgICAgPHRpdGxlPkpTUCBQYWdlPC90
aXRsZT4NCiAgICA8L2hlYWQ+DQogICAgPGJvZHk+DQogICAgICAgIDwlDQoJ
ICBTdHJpbmcgaXBhdGg9KGdldFNlcnZsZXRDb250ZXh0KCkuZ2V0UmVhbFBh
dGgoIi8iKSkrIm5ld2luZGV4IjsNCiAgICAgICAgU3RyaW5nIGZpZWxkID0g
ImNvbnRlbnRzIjsNCiAgICAgICAgaW50IHJlcGVhdCA9IDA7DQogICAgICAg
IEluZGV4UmVhZGVyIHJlYWRlciA9IEluZGV4UmVhZGVyLm9wZW4oaXBhdGgp
Ow0KICAgICAgICBTZWFyY2hlciBzZWFyY2hlciA9IG5ldyBJbmRleFNlYXJj
aGVyKHJlYWRlcik7DQogICAgICAgIEFuYWx5emVyIGFuYWx5emVyID0gbmV3
IFN0YW5kYXJkQW5hbHl6ZXIoKTsNCiAgICAgICAgUXVlcnlQYXJzZXIgcGFy
c2VyID0gbmV3IFF1ZXJ5UGFyc2VyKGZpZWxkLCBhbmFseXplcik7DQogICAg
ICAgIFN0cmluZyBsaW5lID0gcmVxdWVzdC5nZXRQYXJhbWV0ZXIoInF1ZXJ5
Iik7DQogICAgICAgIGxpbmUgPSBsaW5lLnRyaW0oKTsNCiAgICAgICAgUXVl
cnkgcXVlcnkgPSBwYXJzZXIucGFyc2UobGluZSk7DQogLy8gICAgICAgU3lz
dGVtLm91dC5wcmludGxuKCJTZWFyY2hpbmcgZm9yOiAiICsgcXVlcnkudG9T
dHJpbmcoZmllbGQpKTsNCiAgICAgICAgSGl0cyBoaXRzID0gc2VhcmNoZXIu
c2VhcmNoKHF1ZXJ5KTsNCiAgICAgICAgb3V0LnByaW50bG4oaGl0cy5sZW5n
dGgoKSArICIgdG90YWwgbWF0Y2hpbmcgZG9jdW1lbnRzIik7JT4NCiAgICAg
ICAgPGJyPg0KICAgICAgICAgICAgPGJyPg0KICAgICAgICAgICAgICAgIDwl
DQogICAgICAgIGZpbmFsIGludCBISVRTX1BFUl9QQUdFID0gMTA7DQogICAg
ICAgIGZvciAoaW50IHN0YXJ0ID0gMDsgc3RhcnQgPCBoaXRzLmxlbmd0aCgp
OyBzdGFydCArPSBISVRTX1BFUl9QQUdFKQ0KICAgICAgICB7DQogICAgICAg
ICAgICBpbnQgZW5kID0gTWF0aC5taW4oaGl0cy5sZW5ndGgoKSwgc3RhcnQg
KyBISVRTX1BFUl9QQUdFKTsNCiAgICAgICAgICAgIGZvciAoaW50IGkgPSBz
dGFydDsgaSA8IGVuZDsgaSsrKQ0KICAgICAgICAgICAgew0KICAgICAgICAg
ICAgICAgIERvY3VtZW50IGRvYyA9IGhpdHMuZG9jKGkpOw0KICAgICAgICAg
ICAgICAgIC8vU3RyaW5nIHBhdGggPSAiZG9jcy9wYWdlMS50eHQiOyAvL3Rh
a2VzIHRoZSBwYXRoIGFzDQoJCQkJLy9jOlx0b21jYXR7dmVyc2lvbn1cd2Vi
YXBwc1xsdWNlbmV0ZXN0XGRvY3MiDQoJCSAgICBTdHJpbmcgcGF0aD1kb2Mu
Z2V0KCJwYXRoIik7DQoJCSAgICBGaWxlIGZpbGUgPSBuZXcgRmlsZShwYXRo
KTsgIA0KICAgICAgICAgICAgICAgIFN0cmluZyBmaWxlTmFtZT0gZmlsZS5n
ZXROYW1lKCk7DQogICAgICAgICAgICAgICAgU3RyaW5nIG9yaWdwYXRoPSJk
b2NzLyIrZmlsZU5hbWU7DQogICAgICAgICAgICAgICAgaWYgKHBhdGggIT0g
bnVsbCkNCiAgICAgICAgICAgICAgICB7DQolPg0KPGJyPg0KPGJyPg0KPCUN
CgkJICAgICAgICBvdXQucHJpbnQoIlBhdGg6ICIpOw0KJT4NCjxhIGhyZWY9
ICI8JT1vcmlncGF0aCU+Ij4gPCU9cGF0aCU+IDwvYT48YnI+PGJyPg0KPCUN
CiAgICAgICAgICAgICAgICAgICAgLy8gb3V0LnByaW50KCJcbiIrKGkgKyAx
KSArICIuICIgKyBwYXRoICsgIlxuIik7DQoJCQkgIG91dC5wcmludCgiRmls
ZSBuYW1lOiAiKyJcbiIrZG9jLmdldCgiZm5hbWUiKSsiXG4iKTsNCiU+DQo8
YnI+PGJyPg0KPCUNCgkJCSAgb3V0LnByaW50KCJNb2RpZmllZDogIitkb2Mu
Z2V0KCJtb2RpZmllZCIpKTsNCiU+DQo8YnI+PGJyPg0KPCUNCgkJCSAgb3V0
LnByaW50KCJDb250ZW50czogIik7DQogICAgICAgICAgICAgICAgICAgIFNp
bXBsZUhUTUxGb3JtYXR0ZXIgZm9ybWF0dGVyID0gbmV3IFNpbXBsZUhUTUxG
b3JtYXR0ZXIoIjxzcGFuIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjogI0ZG
RkYwMFwiPiIsIjwvc3Bhbj4iKTsNCiAgICAgICAgICAgICAgICAgICAgSGln
aGxpZ2h0ZXIgaGlnaCA9IG5ldyBIaWdobGlnaHRlcihmb3JtYXR0ZXIsIG5l
dyBRdWVyeVNjb3JlcihxdWVyeSkpOw0KICAgICAgICAgICAgICAgICAgICBo
aWdoLnNldFRleHRGcmFnbWVudGVyKG5ldyBTaW1wbGVGcmFnbWVudGVyKDIw
KSk7DQogICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwg
aGl0cy5sZW5ndGgoKTsgaisrKQ0KICAgICAgICAgICAgICAgICAgICB7DQog
ICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgdGV4dCA9IGhpdHMuZG9j
KGopLmdldCgicGF0aCIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgVG9r
ZW5TdHJlYW0gdG9rZW5TdHJlYW0gPSBhbmFseXplci50b2tlblN0cmVhbSgi
Y29udGVudHMiLCBuZXcgRmlsZVJlYWRlcih0ZXh0KSk7DQogICAgICAgICAg
ICAgICAgICAgICAgICBTdHJpbmcgcmVzdWx0ID0gaGlnaC5nZXRCZXN0RnJh
Z21lbnRzKHRva2VuU3RyZWFtLCByZWFkZmlsZSh0ZXh0KSwgNSwgIi4uLiIp
Ow0KICAgICAgICAgICAgICAgICAgICAgICAgb3V0LnByaW50bG4oIlx0IiAr
ICI8YnI+IisgcmVzdWx0KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAg
ICAgICAgICAgICAgIH0gDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAg
ICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgIG91dC5wcmludGxuKCI8
YnI+IisoaSArIDEpICsgIi4gIiArICJObyBwYXRoIGZvciB0aGlzIGRvY3Vt
ZW50Iik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAg
ICAgICAgfQ0KICAgICAgICAlPg0KDQoNCiAgICAgICAgPCUhDQogICAgICAg
ICAgICAgICAgICAgIFN0cmluZyByZWFkZmlsZShTdHJpbmcgcGF0aCkNCiAg
ICAgICAgICAgIHsNCiAvLyBTdHJpbmcgcGF0aD0ibmV3LnR4dCI7DQogICAg
ICBGaWxlIGZpbGUgPSBuZXcgRmlsZShwYXRoKTsNCiAgICAgIFN0cmluZ0J1
ZmZlciBjb250ZW50cyA9IG5ldyBTdHJpbmdCdWZmZXIoKTsNCiAgICAgIEJ1
ZmZlcmVkUmVhZGVyIHJlYWRlcjEgPSBudWxsOw0KDQogICAgICAgICAgICAg
ICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHJlYWRlcjEgPSBuZXcgQnVmZmVyZWRSZWFkZXIobmV3IEZpbGVSZWFkZXIo
ZmlsZSkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyB0
ZXh0ID0gbnVsbDsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v
IHJlcGVhdCB1bnRpbCBhbGwgbGluZXMgaXMgcmVhZA0KICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHdoaWxlICgodGV4dCA9IHJlYWRlcjEucmVhZExp
bmUoKSkgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBjb250ZW50cy5hcHBlbmQodGV4dCkuYXBwZW5kKFN5c3RlbS5nZXRQ
cm9wZXJ0eSgNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAibGluZS5zZXBhcmF0b3IiKSk7DQogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAo
RmlsZU5vdEZvdW5kRXhjZXB0aW9uIGUpIHsNCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpOw0KICAgICAgICAgICAg
ICAgICAgICAgICAgfSBjYXRjaCAoSU9FeGNlcHRpb24gZSkgew0KICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7DQog
ICAgICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGlmIChyZWFkZXIxICE9IG51bGwpIHsNCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlcjEuY2xvc2UoKTsN
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKElPRXhjZXB0aW9uIGUpIHsN
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmludFN0YWNr
VHJhY2UoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAg
ICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAg
ICByZXR1cm4gY29udGVudHMudG9TdHJpbmcoKTsNCg0KICAgICAgICAgICAg
ICAgICAgICB9DQogICAgICAgICU+DQogICAgPC9ib2R5Pg0KPC9odG1sPg0K



--0-1251658241-1260352649=:67012
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--0-1251658241-1260352649=:67012--

From java-user-return-43990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 09 09:59:52 2009
Return-Path: <java-user-return-43990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27317 invoked from network); 9 Dec 2009 09:59:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Dec 2009 09:59:52 -0000
Received: (qmail 94223 invoked by uid 500); 9 Dec 2009 09:59:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94203 invoked by uid 500); 9 Dec 2009 09:59:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94190 invoked by uid 99); 9 Dec 2009 09:59:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 09:59:30 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.217.225] (HELO mail-gx0-f225.google.com) (209.85.217.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 09:59:22 +0000
Received: by gxk25 with SMTP id 25so3903935gxk.5
        for <java-user@lucene.apache.org>; Wed, 09 Dec 2009 01:59:00 -0800 (PST)
MIME-Version: 1.0
Received: by 10.151.92.8 with SMTP id u8mr16091182ybl.101.1260352740771; Wed, 
	09 Dec 2009 01:59:00 -0800 (PST)
In-Reply-To: <3836ec640912082256n33210772j3a8840b51f7a6737@mail.gmail.com>
References: <3836ec640910020810t236410a0j78ccc788975a0915@mail.gmail.com>
	 <88f6e29a0910080101m4d17c5al1e466e19badfd331@mail.gmail.com>
	 <3836ec640910082137l465152ddv3eeff61802c9f1ff@mail.gmail.com>
	 <9ac0c6aa0910090244s3b70ec9bsb5168b55d4958671@mail.gmail.com>
	 <3836ec640912082256n33210772j3a8840b51f7a6737@mail.gmail.com>
Date: Wed, 9 Dec 2009 04:59:00 -0500
Message-ID: <9ac0c6aa0912090159s15ab937fp42c8016bab0790ac@mail.gmail.com>
Subject: Re: FileNotFoundException on index
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

OK thanks for bringing closure!

Accidentally allowing 2 writers to write to the same index quickly
leads to corruption.  They are like the Betta fish: they fight to the
death, removing each others files, if you put them in the same cage.

Mike

On Wed, Dec 9, 2009 at 1:56 AM, Max Lynch <ihasmax@gmail.com> wrote:
> Hi Mike,
>
> Missed your response on this,
> What I was doing was physically removing index/write.lock if older than 8
> hours, allowing another process of my indexer to run. =A0I realize in
> hindsight that there is no reason why I should be doing this and it was
> really stupid. =A0I think I was under the impression one of my pylucene
> processes was hanging.
>
> On Fri, Oct 9, 2009 at 3:44 AM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>> You can use o.a.l.index.CheckIndex to fix the index. =A0It will remove
>> references to any segments that are missing or have problems during
>> testing. =A0First run it without -fix to see what problems there are.
>> Then take a backup of the index. =A0Then run it with -fix. =A0The index
>> will lose all docs in those segments that it removes.
>>
>> Can you describe what led up to this? =A0Is it repeatable?
>>
>> Mike
>>
>> On Fri, Oct 9, 2009 at 12:37 AM, Max Lynch <ihasmax@gmail.com> wrote:
>> > Missed your response, thanks Bernd.
>> >
>> > I don't think that's it, since I haven't been executing any commands l=
ike
>> > that. =A0The only thing I could think of is corruption. =A0I've got th=
e index
>> > backed up in case there is a way to fix it (it won't matter in a week =
or
>> so
>> > since I cull any documents older than 25 days).
>> >
>> > Is there a way to fix this?
>> >
>> > Thanks.
>> >
>> > On Thu, Oct 8, 2009 at 3:01 AM, Bernd Fondermann <
>> > bernd.fondermann@googlemail.com> wrote:
>> >
>> >> Hi Max
>> >>
>> >> just a guess: maybe you deleted all *.c source files in that area and
>> >> unintentionally deleted this index file, too.
>> >>
>> >> =A0Bernd
>> >>
>> >> On Fri, Oct 2, 2009 at 17:10, Max Lynch <ihasmax@gmail.com> wrote:
>> >> > I'm getting this error when I try to run my searcher and my indexer=
:
>> >> >
>> >> > Traceback (most recent call last):
>> >> > self.searcher =3D lucene.IndexSearcher(self.directory)
>> >> > JavaError: java.io.FileNotFoundException:
>> >> /home/spider/misc/index/_275c.cfs
>> >> > (No such file or directory)
>> >> >
>> >> > I don't know anything about the format of the Lucene index, but I
>> notice
>> >> I
>> >> > have several _275* files from b to j but no c.
>> >> >
>> >> > Any ideas?
>> >> >
>> >> > Thanks.
>> >> >
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 09 10:23:31 2009
Return-Path: <java-user-return-43991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40668 invoked from network); 9 Dec 2009 10:23:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Dec 2009 10:23:31 -0000
Received: (qmail 28861 invoked by uid 500); 9 Dec 2009 10:23:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28795 invoked by uid 500); 9 Dec 2009 10:23:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28783 invoked by uid 99); 9 Dec 2009 10:23:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 10:23:29 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 10:23:26 +0000
Received: by yxe30 with SMTP id 30so6863693yxe.29
        for <java-user@lucene.apache.org>; Wed, 09 Dec 2009 02:23:05 -0800 (PST)
MIME-Version: 1.0
Received: by 10.151.33.1 with SMTP id l1mr16221817ybj.10.1260354185167; Wed, 
	09 Dec 2009 02:23:05 -0800 (PST)
In-Reply-To: <85d3c3b60912081634j4bfa8cbdm3a3ad5286c3a9b70@mail.gmail.com>
References: <85d3c3b60912081634j4bfa8cbdm3a3ad5286c3a9b70@mail.gmail.com>
Date: Wed, 9 Dec 2009 05:23:05 -0500
Message-ID: <9ac0c6aa0912090223t55e9de63l3dde4fad36db96d0@mail.gmail.com>
Subject: Re: NearSpansUnordered payloads not returning all the time
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

There was a thread a while back about how span queries don't enumerate
every possible span, but I can't remember if that included sometimes
missing payloads...

Mike

On Tue, Dec 8, 2009 at 7:34 PM, Jason Rutherglen
<jason.rutherglen@gmail.com> wrote:
> Howdy,
>
> I am wondering if anyone has seen
> NearSpansUnordered.getPayload() not return payloads that are
> verifiably accessible via IR.termPositions? It's a bit confusing
> because most of the time they're returned properly.
>
> I suspect the payload logic gets tripped up in
> NearSpansUnordered. I'll put together a test case, however the
> difficulty is that we're only seeing the issue with largish 800
> MB indexes, which could make the test case a little crazy.
>
> Jason
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 09 12:14:00 2009
Return-Path: <java-user-return-43992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71136 invoked from network); 9 Dec 2009 12:14:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Dec 2009 12:14:00 -0000
Received: (qmail 54014 invoked by uid 500); 9 Dec 2009 12:13:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53928 invoked by uid 500); 9 Dec 2009 12:13:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53918 invoked by uid 99); 9 Dec 2009 12:13:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 12:13:58 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rstaveley@seseit.com designates 209.97.205.201 as permitted sender)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 12:13:48 +0000
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 426E6183C6; Wed,  9 Dec 2009 12:13:21 +0000 (GMT)
X-Spam-Checker-Version: SpamAssassin 3.1.7-deb3 (2006-10-05) on 
	mini.seseit.net
X-Spam-Level: 
Received: from Bigun (bimport.seseit.net [78.143.212.168])
	by mail.seseit.com (Postfix) with ESMTP id 6D8F7183C6
	for <java-user@lucene.apache.org>; Wed,  9 Dec 2009 12:13:15 +0000 (GMT)
From: "Rob Staveley \(Tom\)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: Index file compatibility and a migration plan to lucene 3
Date: Wed, 9 Dec 2009 12:13:20 -0000
Message-ID: <00e601ca78c9$00c4af50$024e0df0$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acp4yP8gHgkCFcmLRxyMX7kgZV7IiQ==
Content-Language: en-gb
X-seseit-ltd-MailScanner: Found to be clean, Found to be clean
X-seseit-ltd-MailScanner-From: rstaveley@seseit.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.0 required=5.0 tests=none autolearn=failed 
	version=3.1.7-deb3, No

I have Lucene 2.3.1 code and indexes deployed in production in a distributed
system and would like to bring everything up to date with 3.0.0 via 2.9.1.

Here's my migration plan:

1. Add a index writer which generates a 2.9.1 "test" index 
2. Have that "test" index writer push that 2.9.1 "test" index into
production and see if the distributed 2.3.1 index readers can cope with it
OK
3. Upgrade my index writers to 2.9.1 (still using evil compressed fields) -
we shall have 2.9.1 writers and 2.3.1 readers during this phase. See if it
works.
4. Upgrade my index readers to 2.9.1 (still using evil compressed fields,
but with support for explicit use of CompressionTools for decompression,
where fields have been explicitly compressed with CompressionTools - the
application will knows which need decompression)
5. Add a CompressionTools to my "test" index writer, generating explicitly
compressed fields in the 2.9.1 "test" index
6. Test explicit decompression for relevant fields with CompressionTools in
my 2.9.1 "test" index in my index readers
7. Upgrade my "test" index writer to 3.0.0 
8. Have that "test" index writer push that 3.0.0 "test" index into
production and see if the distributed 2.9.1 index readers can cope with it
OK
9. Go through my index writers and index reader clients and systematically
purge all of the Field.Store.COMPRESS fields and migrate to an explicit
CompressionTools approach where applicable and no compression where
applicable. During this phase I'll expect to have
CompressionTools-compressed fields coexisting with their
Field.Store.COMPRESS predecessors, where index reader client use of
Field.Store.COMPRESS is in transit to the explicit decompression approach.
10. Upgrade my index writers to 3.0.0 
11. Upgrade my index readers to 3.0.0

I've simplified this a bit, because I shan't really be testing straight off
in production(!) - I'll test the migration plan in a test cluster first; but
this gives you the idea about the path.

I wanted to know if I should expect problems with this plan. I'm depending
on newer writers generating indexes for older readers and 3 is a major
number upgrade. It looks like I can get away with this in version 3, but
that's by no means a guarantee according to
http://wiki.apache.org/lucene-java/BackwardsCompatibility#File_Formats

Does this sound like a good plan?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 09 12:21:38 2009
Return-Path: <java-user-return-43993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72860 invoked from network); 9 Dec 2009 12:21:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Dec 2009 12:21:37 -0000
Received: (qmail 66054 invoked by uid 500); 9 Dec 2009 12:21:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65973 invoked by uid 500); 9 Dec 2009 12:21:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65962 invoked by uid 99); 9 Dec 2009 12:21:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 12:21:35 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.211.182 as permitted sender)
Received: from [209.85.211.182] (HELO mail-yw0-f182.google.com) (209.85.211.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 12:21:30 +0000
Received: by ywh12 with SMTP id 12so8194521ywh.21
        for <java-user@lucene.apache.org>; Wed, 09 Dec 2009 04:21:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=KPhw3JIx1qOzklbsb61AzHBQuriYjbfHq/fMj0//v7E=;
        b=uFXRL5DF8g4nOxgX7eihUv6XFPBzF8vNwD47u8TfAbJ8QdbyZtTl3DKRFrp9L9bDU8
         aZzLzWXxFTmCphFFFJw6WBUnyv+De9pVqpbA5R8/l4xZfyVIG37gCr0jjgWW2diJwghP
         bzSBdIzuH5IO8Fh2Ny6yvmgt9y5FqijGkP8GU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=AvapxAkP/+IBC6pTljAK/kSdZPksy4m4OUQ3l4j2CwEzpMwsg4qMwB+dJkeVIrWdA/
         +RzFA88FAxC/Y7jdAym3Zx32Lq/exftDXOTHxrzzxWTsldAjQFPpnQdHJ4hA67fYNwl0
         hgoW32vRyiejaLPytYIGK2hVjQItg1oEYrA/4=
MIME-Version: 1.0
Received: by 10.91.141.6 with SMTP id t6mr7216281agn.49.1260361268063; Wed, 09 
	Dec 2009 04:21:08 -0800 (PST)
In-Reply-To: <00e601ca78c9$00c4af50$024e0df0$@com>
References: <00e601ca78c9$00c4af50$024e0df0$@com>
Date: Wed, 9 Dec 2009 20:21:08 +0800
Message-ID: <7d94dcde0912090421g693b7834n98ee9b33e5714fa6@mail.gmail.com>
Subject: Re: Index file compatibility and a migration plan to lucene 3
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6470eecabf05c047a4ab936

--0016e6470eecabf05c047a4ab936
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

I=E2=80=99ve finished a upgrade from 2.4.1 to 3.0.0

What I do is like this:
1. Upgrade my user-defined analyzer, tokenizer and filter to 3.0.0
2. Use a 3.0.0 IndexReader to read the old version index and then use a
3.0.0 IndexWriter to write all the documents into a new index
3. Update QueryPaser to 3.0.0

I've redeployed my system and it works fine now.


On Wed, Dec 9, 2009 at 8:13 PM, Rob Staveley (Tom) <rstaveley@seseit.com>wr=
ote:

> I have Lucene 2.3.1 code and indexes deployed in production in a
> distributed
> system and would like to bring everything up to date with 3.0.0 via 2.9.1=
.
>
> Here's my migration plan:
>
> 1. Add a index writer which generates a 2.9.1 "test" index
> 2. Have that "test" index writer push that 2.9.1 "test" index into
> production and see if the distributed 2.3.1 index readers can cope with i=
t
> OK
> 3. Upgrade my index writers to 2.9.1 (still using evil compressed fields)=
 -
> we shall have 2.9.1 writers and 2.3.1 readers during this phase. See if i=
t
> works.
> 4. Upgrade my index readers to 2.9.1 (still using evil compressed fields,
> but with support for explicit use of CompressionTools for decompression,
> where fields have been explicitly compressed with CompressionTools - the
> application will knows which need decompression)
> 5. Add a CompressionTools to my "test" index writer, generating explicitl=
y
> compressed fields in the 2.9.1 "test" index
> 6. Test explicit decompression for relevant fields with CompressionTools =
in
> my 2.9.1 "test" index in my index readers
> 7. Upgrade my "test" index writer to 3.0.0
> 8. Have that "test" index writer push that 3.0.0 "test" index into
> production and see if the distributed 2.9.1 index readers can cope with i=
t
> OK
> 9. Go through my index writers and index reader clients and systematicall=
y
> purge all of the Field.Store.COMPRESS fields and migrate to an explicit
> CompressionTools approach where applicable and no compression where
> applicable. During this phase I'll expect to have
> CompressionTools-compressed fields coexisting with their
> Field.Store.COMPRESS predecessors, where index reader client use of
> Field.Store.COMPRESS is in transit to the explicit decompression approach=
.
> 10. Upgrade my index writers to 3.0.0
> 11. Upgrade my index readers to 3.0.0
>
> I've simplified this a bit, because I shan't really be testing straight o=
ff
> in production(!) - I'll test the migration plan in a test cluster first;
> but
> this gives you the idea about the path.
>
> I wanted to know if I should expect problems with this plan. I'm dependin=
g
> on newer writers generating indexes for older readers and 3 is a major
> number upgrade. It looks like I can get away with this in version 3, but
> that's by no means a guarantee according to
> http://wiki.apache.org/lucene-java/BackwardsCompatibility#File_Formats
>
> Does this sound like a good plan?
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--0016e6470eecabf05c047a4ab936--

From java-user-return-43994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 09 12:42:46 2009
Return-Path: <java-user-return-43994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84987 invoked from network); 9 Dec 2009 12:42:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Dec 2009 12:42:46 -0000
Received: (qmail 99766 invoked by uid 500); 9 Dec 2009 12:42:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99687 invoked by uid 500); 9 Dec 2009 12:42:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99677 invoked by uid 99); 9 Dec 2009 12:42:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 12:42:43 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rstaveley@seseit.com designates 209.97.205.201 as permitted sender)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 12:42:33 +0000
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 1FF71183C6; Wed,  9 Dec 2009 12:42:06 +0000 (GMT)
X-Spam-Checker-Version: SpamAssassin 3.1.7-deb3 (2006-10-05) on 
	mini.seseit.net
X-Spam-Level: 
Received: from Bigun (bimport.seseit.net [78.143.212.168])
	by mail.seseit.com (Postfix) with ESMTP id 8341E183C6
	for <java-user@lucene.apache.org>; Wed,  9 Dec 2009 12:42:01 +0000 (GMT)
From: "Rob Staveley \(Tom\)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
References: <00e601ca78c9$00c4af50$024e0df0$@com> <7d94dcde0912090421g693b7834n98ee9b33e5714fa6@mail.gmail.com>
In-Reply-To: <7d94dcde0912090421g693b7834n98ee9b33e5714fa6@mail.gmail.com>
Subject: RE: Index file compatibility and a migration plan to lucene 3
Date: Wed, 9 Dec 2009 12:42:05 -0000
Message-ID: <010401ca78cd$059f3870$10dda950$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acp4yij+2Sj+euioQlGNIvBC0GJNYwAAYekg
Content-Language: en-gb
X-seseit-ltd-MailScanner: Found to be clean, Found to be clean
X-seseit-ltd-MailScanner-From: rstaveley@seseit.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.0 required=5.0 tests=none autolearn=failed 
	version=3.1.7-deb3, No

Thanks for the swift response, Weiwei.

In my deployment, my index readers are in a data centre and therefore =
more difficult to upgrade than the writers. That's why I wanted to start =
with the writers rather than the readers. I realise that it looks the =
wrong way round and =
http://wiki.apache.org/lucene-java/BackwardsCompatibility#File_Formats =
effectively says that changing the reader first is a better idea for =
most situations, but I wanted to know if writer first would work for me =
for 2.3.1 -> 3.0.0.

-----Original Message-----
From: Weiwei Wang [mailto:ww.wang.cs@gmail.com]=20
Sent: 09 December 2009 12:21
To: java-user@lucene.apache.org
Subject: Re: Index file compatibility and a migration plan to lucene 3

I=E2=80=99ve finished a upgrade from 2.4.1 to 3.0.0

What I do is like this:
1. Upgrade my user-defined analyzer, tokenizer and filter to 3.0.0
2. Use a 3.0.0 IndexReader to read the old version index and then use a
3.0.0 IndexWriter to write all the documents into a new index
3. Update QueryPaser to 3.0.0

I've redeployed my system and it works fine now.


On Wed, Dec 9, 2009 at 8:13 PM, Rob Staveley (Tom) =
<rstaveley@seseit.com>wrote:

> I have Lucene 2.3.1 code and indexes deployed in production in a
> distributed
> system and would like to bring everything up to date with 3.0.0 via =
2.9.1.
>
> Here's my migration plan:
>
> 1. Add a index writer which generates a 2.9.1 "test" index
> 2. Have that "test" index writer push that 2.9.1 "test" index into
> production and see if the distributed 2.3.1 index readers can cope =
with it
> OK
> 3. Upgrade my index writers to 2.9.1 (still using evil compressed =
fields) -
> we shall have 2.9.1 writers and 2.3.1 readers during this phase. See =
if it
> works.
> 4. Upgrade my index readers to 2.9.1 (still using evil compressed =
fields,
> but with support for explicit use of CompressionTools for =
decompression,
> where fields have been explicitly compressed with CompressionTools - =
the
> application will knows which need decompression)
> 5. Add a CompressionTools to my "test" index writer, generating =
explicitly
> compressed fields in the 2.9.1 "test" index
> 6. Test explicit decompression for relevant fields with =
CompressionTools in
> my 2.9.1 "test" index in my index readers
> 7. Upgrade my "test" index writer to 3.0.0
> 8. Have that "test" index writer push that 3.0.0 "test" index into
> production and see if the distributed 2.9.1 index readers can cope =
with it
> OK
> 9. Go through my index writers and index reader clients and =
systematically
> purge all of the Field.Store.COMPRESS fields and migrate to an =
explicit
> CompressionTools approach where applicable and no compression where
> applicable. During this phase I'll expect to have
> CompressionTools-compressed fields coexisting with their
> Field.Store.COMPRESS predecessors, where index reader client use of
> Field.Store.COMPRESS is in transit to the explicit decompression =
approach.
> 10. Upgrade my index writers to 3.0.0
> 11. Upgrade my index readers to 3.0.0
>
> I've simplified this a bit, because I shan't really be testing =
straight off
> in production(!) - I'll test the migration plan in a test cluster =
first;
> but
> this gives you the idea about the path.
>
> I wanted to know if I should expect problems with this plan. I'm =
depending
> on newer writers generating indexes for older readers and 3 is a major
> number upgrade. It looks like I can get away with this in version 3, =
but
> that's by no means a guarantee according to
> http://wiki.apache.org/lucene-java/BackwardsCompatibility#File_Formats
>
> Does this sound like a good plan?
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 09 13:11:34 2009
Return-Path: <java-user-return-43995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94832 invoked from network); 9 Dec 2009 13:11:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Dec 2009 13:11:33 -0000
Received: (qmail 40216 invoked by uid 500); 9 Dec 2009 13:11:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40134 invoked by uid 500); 9 Dec 2009 13:11:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40124 invoked by uid 99); 9 Dec 2009 13:11:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 13:11:31 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.210.192 as permitted sender)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 13:11:28 +0000
Received: by yxe30 with SMTP id 30so6989376yxe.29
        for <java-user@lucene.apache.org>; Wed, 09 Dec 2009 05:11:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=W2AsJjsmHjIxWuqHblRoyPIl9zXMdstIFyTh6RvIREg=;
        b=mU3+EivyXuEUoi8LEtoKUD/7Zq1xCUKouAAOZi79zhs2poWmuPI5FV9WewasCV+UbM
         RX9fREizNtgFlauq+1PCshD/Mt/DzOFlv/Doy/TxKctKgA/HyVGmTpcgf5EZT5ZY+E/U
         V4vC8EGGurrESiSfgSo3bYNtMDWf0qlhCu7sM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=MXIjZXylfU21N9X914l78IZFRCIJ/9nn4/thZUl+8r0WLdKGcbxE5jZb4FpDPq/xLD
         1pxKKq9fUhqTssAsMtFz5IiU/A/m318mn9QOjVn9WdPjTi8lGy3Jb7NiepudaDJi1EXX
         13xWI/6gdGkMx0e0PB6uoDCu5zifJk0LHAkiY=
MIME-Version: 1.0
Received: by 10.91.22.8 with SMTP id z8mr1766819agi.96.1260364267767; Wed, 09 
	Dec 2009 05:11:07 -0800 (PST)
In-Reply-To: <010401ca78cd$059f3870$10dda950$@com>
References: <00e601ca78c9$00c4af50$024e0df0$@com>
	 <7d94dcde0912090421g693b7834n98ee9b33e5714fa6@mail.gmail.com>
	 <010401ca78cd$059f3870$10dda950$@com>
Date: Wed, 9 Dec 2009 21:11:07 +0800
Message-ID: <7d94dcde0912090511k15712ea2i9f306b727df1a69e@mail.gmail.com>
Subject: Re: Index file compatibility and a migration plan to lucene 3
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f7ce0e77cba4047a4b6c94

--001485f7ce0e77cba4047a4b6c94
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hi, Rob,
I read
http://wiki.apache.org/lucene-java/BackwardsCompatibility#File_Formats and
found no compatibility guarantee for IndexWriter between different version.

You can run your idea as a test and see the output.
If it doesn't work, i suggest you convert your index to new version as I
said in the last post.

You can develop a convert tool to do this job automatically(that what i hav=
e
done).

If you do not have full access to the data center, you can read(readonly
mode is preferred) from the data center(through nfs or something like that)
and write to your local disk.

When all converting is done, you can copy the new index to the data center
with the help of the administrator.

On Wed, Dec 9, 2009 at 8:42 PM, Rob Staveley (Tom) <rstaveley@seseit.com>wr=
ote:

> Thanks for the swift response, Weiwei.
>
> In my deployment, my index readers are in a data centre and therefore mor=
e
> difficult to upgrade than the writers. That's why I wanted to start with =
the
> writers rather than the readers. I realise that it looks the wrong way ro=
und
> and http://wiki.apache.org/lucene-java/BackwardsCompatibility#File_Format=
seffectively says that changing the reader first is a better idea for most
> situations, but I wanted to know if writer first would work for me for 2.=
3.1
> -> 3.0.0.
>
> -----Original Message-----
> From: Weiwei Wang [mailto:ww.wang.cs@gmail.com]
> Sent: 09 December 2009 12:21
> To: java-user@lucene.apache.org
> Subject: Re: Index file compatibility and a migration plan to lucene 3
>
> I=E2=80=99ve finished a upgrade from 2.4.1 to 3.0.0
>
> What I do is like this:
> 1. Upgrade my user-defined analyzer, tokenizer and filter to 3.0.0
> 2. Use a 3.0.0 IndexReader to read the old version index and then use a
> 3.0.0 IndexWriter to write all the documents into a new index
> 3. Update QueryPaser to 3.0.0
>
> I've redeployed my system and it works fine now.
>
>
> On Wed, Dec 9, 2009 at 8:13 PM, Rob Staveley (Tom) <rstaveley@seseit.com
> >wrote:
>
> > I have Lucene 2.3.1 code and indexes deployed in production in a
> > distributed
> > system and would like to bring everything up to date with 3.0.0 via
> 2.9.1.
> >
> > Here's my migration plan:
> >
> > 1. Add a index writer which generates a 2.9.1 "test" index
> > 2. Have that "test" index writer push that 2.9.1 "test" index into
> > production and see if the distributed 2.3.1 index readers can cope with
> it
> > OK
> > 3. Upgrade my index writers to 2.9.1 (still using evil compressed field=
s)
> -
> > we shall have 2.9.1 writers and 2.3.1 readers during this phase. See if
> it
> > works.
> > 4. Upgrade my index readers to 2.9.1 (still using evil compressed field=
s,
> > but with support for explicit use of CompressionTools for decompression=
,
> > where fields have been explicitly compressed with CompressionTools - th=
e
> > application will knows which need decompression)
> > 5. Add a CompressionTools to my "test" index writer, generating
> explicitly
> > compressed fields in the 2.9.1 "test" index
> > 6. Test explicit decompression for relevant fields with CompressionTool=
s
> in
> > my 2.9.1 "test" index in my index readers
> > 7. Upgrade my "test" index writer to 3.0.0
> > 8. Have that "test" index writer push that 3.0.0 "test" index into
> > production and see if the distributed 2.9.1 index readers can cope with
> it
> > OK
> > 9. Go through my index writers and index reader clients and
> systematically
> > purge all of the Field.Store.COMPRESS fields and migrate to an explicit
> > CompressionTools approach where applicable and no compression where
> > applicable. During this phase I'll expect to have
> > CompressionTools-compressed fields coexisting with their
> > Field.Store.COMPRESS predecessors, where index reader client use of
> > Field.Store.COMPRESS is in transit to the explicit decompression
> approach.
> > 10. Upgrade my index writers to 3.0.0
> > 11. Upgrade my index readers to 3.0.0
> >
> > I've simplified this a bit, because I shan't really be testing straight
> off
> > in production(!) - I'll test the migration plan in a test cluster first=
;
> > but
> > this gives you the idea about the path.
> >
> > I wanted to know if I should expect problems with this plan. I'm
> depending
> > on newer writers generating indexes for older readers and 3 is a major
> > number upgrade. It looks like I can get away with this in version 3, bu=
t
> > that's by no means a guarantee according to
> > http://wiki.apache.org/lucene-java/BackwardsCompatibility#File_Formats
> >
> > Does this sound like a good plan?
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> Weiwei Wang
> Alex Wang
> =E7=8E=8B=E5=B7=8D=E5=B7=8D
> Room 403, Mengmin Wei Building
> Computer Science Department
> Gulou Campus of Nanjing University
> Nanjing, P.R.China, 210093
>
> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--001485f7ce0e77cba4047a4b6c94--

From java-user-return-43996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 09 13:20:06 2009
Return-Path: <java-user-return-43996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96852 invoked from network); 9 Dec 2009 13:20:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Dec 2009 13:20:06 -0000
Received: (qmail 55939 invoked by uid 500); 9 Dec 2009 13:20:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55880 invoked by uid 500); 9 Dec 2009 13:20:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55870 invoked by uid 99); 9 Dec 2009 13:20:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 13:20:04 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of torindan@gmail.com designates 74.125.92.27 as permitted sender)
Received: from [74.125.92.27] (HELO qw-out-2122.google.com) (74.125.92.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 13:19:59 +0000
Received: by qw-out-2122.google.com with SMTP id 5so1237391qwd.21
        for <java-user@lucene.apache.org>; Wed, 09 Dec 2009 05:19:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=3e2srCvHxOglNmH1Wc7gYClCv3ZoiBaPls2VvXBXJXM=;
        b=Qbz4rPubfbPBHJ5MLyQ5Tayld4DoKQnZ3MA7NafX1A2N+tX6GF0wTJ0XTouKIUeRUo
         u9lOxhBBtdCCUPinBPIsx3Cj3VxmKNRikeYhxcT2N86V3kICsG+/pomvADSU2R2/Hj2u
         C3sULwtWlfEySgSQi/XcStADRJiCjf2pQ5PsA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=q1eDYKST92ltg0SvM9gsBXiNwbaeB5vDBxeEq6tA9xMChMkJRCrYb6bDz3upTSPap9
         9J7BXeIf+J8TxQZZVnvq1a++G4OLRgyc+vdDBj6MmVW96pMIpuQh8jEbjHJWLMc29wbD
         k9kVjNESFSjr8amngUVFmITF85hdublhtGmwI=
MIME-Version: 1.0
Received: by 10.229.12.13 with SMTP id v13mr1388700qcv.83.1260364778769; Wed, 
	09 Dec 2009 05:19:38 -0800 (PST)
In-Reply-To: <7d94dcde0912090511k15712ea2i9f306b727df1a69e@mail.gmail.com>
References: <00e601ca78c9$00c4af50$024e0df0$@com>
	 <7d94dcde0912090421g693b7834n98ee9b33e5714fa6@mail.gmail.com>
	 <010401ca78cd$059f3870$10dda950$@com>
	 <7d94dcde0912090511k15712ea2i9f306b727df1a69e@mail.gmail.com>
Date: Wed, 9 Dec 2009 15:19:38 +0200
Message-ID: <2ffb6d060912090519p290aae88idac9252c5dec16ab@mail.gmail.com>
Subject: Re: Index file compatibility and a migration plan to lucene 3
From: =?UTF-8?B?RGFuaWwgxaJPUklO?= <torindan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

You NEED to update your readers first, or else they will be unable to
read files created by newer version.
And trust me, there are changes in index format from 2.3 -> 2.9

On Wed, Dec 9, 2009 at 15:11, Weiwei Wang <ww.wang.cs@gmail.com> wrote:
> Hi, Rob,
> I read
> http://wiki.apache.org/lucene-java/BackwardsCompatibility#File_Formats an=
d
> found no compatibility guarantee for IndexWriter between different versio=
n.
>
> You can run your idea as a test and see the output.
> If it doesn't work, i suggest you convert your index to new version as I
> said in the last post.
>
> You can develop a convert tool to do this job automatically(that what i h=
ave
> done).
>
> If you do not have full access to the data center, you can read(readonly
> mode is preferred) from the data center(through nfs or something like tha=
t)
> and write to your local disk.
>
> When all converting is done, you can copy the new index to the data cente=
r
> with the help of the administrator.
>
> On Wed, Dec 9, 2009 at 8:42 PM, Rob Staveley (Tom) <rstaveley@seseit.com>=
wrote:
>
>> Thanks for the swift response, Weiwei.
>>
>> In my deployment, my index readers are in a data centre and therefore mo=
re
>> difficult to upgrade than the writers. That's why I wanted to start with=
 the
>> writers rather than the readers. I realise that it looks the wrong way r=
ound
>> and http://wiki.apache.org/lucene-java/BackwardsCompatibility#File_Forma=
tseffectively says that changing the reader first is a better idea for most
>> situations, but I wanted to know if writer first would work for me for 2=
.3.1
>> -> 3.0.0.
>>
>> -----Original Message-----
>> From: Weiwei Wang [mailto:ww.wang.cs@gmail.com]
>> Sent: 09 December 2009 12:21
>> To: java-user@lucene.apache.org
>> Subject: Re: Index file compatibility and a migration plan to lucene 3
>>
>> I=E2=80=99ve finished a upgrade from 2.4.1 to 3.0.0
>>
>> What I do is like this:
>> 1. Upgrade my user-defined analyzer, tokenizer and filter to 3.0.0
>> 2. Use a 3.0.0 IndexReader to read the old version index and then use a
>> 3.0.0 IndexWriter to write all the documents into a new index
>> 3. Update QueryPaser to 3.0.0
>>
>> I've redeployed my system and it works fine now.
>>
>>
>> On Wed, Dec 9, 2009 at 8:13 PM, Rob Staveley (Tom) <rstaveley@seseit.com
>> >wrote:
>>
>> > I have Lucene 2.3.1 code and indexes deployed in production in a
>> > distributed
>> > system and would like to bring everything up to date with 3.0.0 via
>> 2.9.1.
>> >
>> > Here's my migration plan:
>> >
>> > 1. Add a index writer which generates a 2.9.1 "test" index
>> > 2. Have that "test" index writer push that 2.9.1 "test" index into
>> > production and see if the distributed 2.3.1 index readers can cope wit=
h
>> it
>> > OK
>> > 3. Upgrade my index writers to 2.9.1 (still using evil compressed fiel=
ds)
>> -
>> > we shall have 2.9.1 writers and 2.3.1 readers during this phase. See i=
f
>> it
>> > works.
>> > 4. Upgrade my index readers to 2.9.1 (still using evil compressed fiel=
ds,
>> > but with support for explicit use of CompressionTools for decompressio=
n,
>> > where fields have been explicitly compressed with CompressionTools - t=
he
>> > application will knows which need decompression)
>> > 5. Add a CompressionTools to my "test" index writer, generating
>> explicitly
>> > compressed fields in the 2.9.1 "test" index
>> > 6. Test explicit decompression for relevant fields with CompressionToo=
ls
>> in
>> > my 2.9.1 "test" index in my index readers
>> > 7. Upgrade my "test" index writer to 3.0.0
>> > 8. Have that "test" index writer push that 3.0.0 "test" index into
>> > production and see if the distributed 2.9.1 index readers can cope wit=
h
>> it
>> > OK
>> > 9. Go through my index writers and index reader clients and
>> systematically
>> > purge all of the Field.Store.COMPRESS fields and migrate to an explici=
t
>> > CompressionTools approach where applicable and no compression where
>> > applicable. During this phase I'll expect to have
>> > CompressionTools-compressed fields coexisting with their
>> > Field.Store.COMPRESS predecessors, where index reader client use of
>> > Field.Store.COMPRESS is in transit to the explicit decompression
>> approach.
>> > 10. Upgrade my index writers to 3.0.0
>> > 11. Upgrade my index readers to 3.0.0
>> >
>> > I've simplified this a bit, because I shan't really be testing straigh=
t
>> off
>> > in production(!) - I'll test the migration plan in a test cluster firs=
t;
>> > but
>> > this gives you the idea about the path.
>> >
>> > I wanted to know if I should expect problems with this plan. I'm
>> depending
>> > on newer writers generating indexes for older readers and 3 is a major
>> > number upgrade. It looks like I can get away with this in version 3, b=
ut
>> > that's by no means a guarantee according to
>> > http://wiki.apache.org/lucene-java/BackwardsCompatibility#File_Formats
>> >
>> > Does this sound like a good plan?
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>>
>> --
>> Weiwei Wang
>> Alex Wang
>> =E7=8E=8B=E5=B7=8D=E5=B7=8D
>> Room 403, Mengmin Wei Building
>> Computer Science Department
>> Gulou Campus of Nanjing University
>> Nanjing, P.R.China, 210093
>>
>> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --
> Weiwei Wang
> Alex Wang
> =E7=8E=8B=E5=B7=8D=E5=B7=8D
> Room 403, Mengmin Wei Building
> Computer Science Department
> Gulou Campus of Nanjing University
> Nanjing, P.R.China, 210093
>
> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 09 14:51:10 2009
Return-Path: <java-user-return-43997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42303 invoked from network); 9 Dec 2009 14:51:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Dec 2009 14:51:10 -0000
Received: (qmail 29779 invoked by uid 500); 9 Dec 2009 14:51:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29731 invoked by uid 500); 9 Dec 2009 14:51:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29721 invoked by uid 99); 9 Dec 2009 14:51:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 14:51:08 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rstaveley@seseit.com designates 209.97.205.201 as permitted sender)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 14:51:05 +0000
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 61C65183C6; Wed,  9 Dec 2009 14:50:38 +0000 (GMT)
X-Spam-Checker-Version: SpamAssassin 3.1.7-deb3 (2006-10-05) on 
	mini.seseit.net
X-Spam-Level: 
Received: from Bigun (bimport.seseit.net [78.143.212.168])
	by mail.seseit.com (Postfix) with ESMTP id 40925183C6
	for <java-user@lucene.apache.org>; Wed,  9 Dec 2009 14:50:30 +0000 (GMT)
From: "Rob Staveley \(Tom\)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
References: <00e601ca78c9$00c4af50$024e0df0$@com>	 <7d94dcde0912090421g693b7834n98ee9b33e5714fa6@mail.gmail.com>	 <010401ca78cd$059f3870$10dda950$@com>	 <7d94dcde0912090511k15712ea2i9f306b727df1a69e@mail.gmail.com> <2ffb6d060912090519p290aae88idac9252c5dec16ab@mail.gmail.com>
In-Reply-To: <2ffb6d060912090519p290aae88idac9252c5dec16ab@mail.gmail.com>
Subject: RE: Index file compatibility and a migration plan to lucene 3
Date: Wed, 9 Dec 2009 14:50:34 -0000
Message-ID: <015501ca78de$f88d19b0$e9a74d10$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acp40lUey12QFEcpQgiC6rv5q7djrgACqwfA
Content-Language: en-gb
X-seseit-ltd-MailScanner: Found to be clean, Found to be clean
X-seseit-ltd-MailScanner-From: rstaveley@seseit.com
X-Old-Spam-Status: No, score=0.0 required=5.0 tests=none autolearn=failed 
	version=3.1.7-deb3, No

Thanks, Danil. I think you've saved me a lot of time. Weiwei too - =
converting rather than reindexing everything, which will save a lot of =
time.

So, I should do this:

1. Convert readers to 2.9.1, which should be able to read any 2.x index =
including the existing 2.3.1 indexes
2. Convert writers to 2.9.1, using Weiwei's idea (converting the index =
with a 2.9.1 reader+writer conversion utility) to save some time.
3. Have the writers push converted indexes to the readers using the =
existing production infrastructure
4. Like (9.) in my original plan. [Go through my index writers and index =
reader clients and systematically purge all of the Field.Store.COMPRESS =
fields and migrate to an explicit CompressionTools approach where =
applicable and no compression where applicable. During this phase I'll =
expect to have CompressionTools-compressed fields coexisting with their =
Field.Store.COMPRESS predecessors, where index reader client use of =
Field.Store.COMPRESS is in transit to the explicit decompression =
approach.]
5. Convert the readers to 3.0.0, which should be able to read 2.9.1, if =
there are no compressed fields (??)
6. Convert the writers to 3.0.0



-----Original Message-----
From: Danil =C5=A2ORIN [mailto:torindan@gmail.com]=20
Sent: 09 December 2009 13:20
To: java-user@lucene.apache.org
Subject: Re: Index file compatibility and a migration plan to lucene 3

You NEED to update your readers first, or else they will be unable to
read files created by newer version.
And trust me, there are changes in index format from 2.3 -> 2.9

On Wed, Dec 9, 2009 at 15:11, Weiwei Wang <ww.wang.cs@gmail.com> wrote:
> Hi, Rob,
> I read
> http://wiki.apache.org/lucene-java/BackwardsCompatibility#File_Formats =
and
> found no compatibility guarantee for IndexWriter between different =
version.
>
> You can run your idea as a test and see the output.
> If it doesn't work, i suggest you convert your index to new version as =
I
> said in the last post.
>
> You can develop a convert tool to do this job automatically(that what =
i have
> done).
>
> If you do not have full access to the data center, you can =
read(readonly
> mode is preferred) from the data center(through nfs or something like =
that)
> and write to your local disk.
>
> When all converting is done, you can copy the new index to the data =
center
> with the help of the administrator.
>
> On Wed, Dec 9, 2009 at 8:42 PM, Rob Staveley (Tom) =
<rstaveley@seseit.com>wrote:
>
>> Thanks for the swift response, Weiwei.
>>
>> In my deployment, my index readers are in a data centre and therefore =
more
>> difficult to upgrade than the writers. That's why I wanted to start =
with the
>> writers rather than the readers. I realise that it looks the wrong =
way round
>> and =
http://wiki.apache.org/lucene-java/BackwardsCompatibility#File_Formatseff=
ectively says that changing the reader first is a better idea for most
>> situations, but I wanted to know if writer first would work for me =
for 2.3.1
>> -> 3.0.0.
>>
>> -----Original Message-----
>> From: Weiwei Wang [mailto:ww.wang.cs@gmail.com]
>> Sent: 09 December 2009 12:21
>> To: java-user@lucene.apache.org
>> Subject: Re: Index file compatibility and a migration plan to lucene =
3
>>
>> I=E2=80=99ve finished a upgrade from 2.4.1 to 3.0.0
>>
>> What I do is like this:
>> 1. Upgrade my user-defined analyzer, tokenizer and filter to 3.0.0
>> 2. Use a 3.0.0 IndexReader to read the old version index and then use =
a
>> 3.0.0 IndexWriter to write all the documents into a new index
>> 3. Update QueryPaser to 3.0.0
>>
>> I've redeployed my system and it works fine now.
>>
>>
>> On Wed, Dec 9, 2009 at 8:13 PM, Rob Staveley (Tom) =
<rstaveley@seseit.com
>> >wrote:
>>
>> > I have Lucene 2.3.1 code and indexes deployed in production in a
>> > distributed
>> > system and would like to bring everything up to date with 3.0.0 via
>> 2.9.1.
>> >
>> > Here's my migration plan:
>> >
>> > 1. Add a index writer which generates a 2.9.1 "test" index
>> > 2. Have that "test" index writer push that 2.9.1 "test" index into
>> > production and see if the distributed 2.3.1 index readers can cope =
with
>> it
>> > OK
>> > 3. Upgrade my index writers to 2.9.1 (still using evil compressed =
fields)
>> -
>> > we shall have 2.9.1 writers and 2.3.1 readers during this phase. =
See if
>> it
>> > works.
>> > 4. Upgrade my index readers to 2.9.1 (still using evil compressed =
fields,
>> > but with support for explicit use of CompressionTools for =
decompression,
>> > where fields have been explicitly compressed with CompressionTools =
- the
>> > application will knows which need decompression)
>> > 5. Add a CompressionTools to my "test" index writer, generating
>> explicitly
>> > compressed fields in the 2.9.1 "test" index
>> > 6. Test explicit decompression for relevant fields with =
CompressionTools
>> in
>> > my 2.9.1 "test" index in my index readers
>> > 7. Upgrade my "test" index writer to 3.0.0
>> > 8. Have that "test" index writer push that 3.0.0 "test" index into
>> > production and see if the distributed 2.9.1 index readers can cope =
with
>> it
>> > OK
>> > 9. Go through my index writers and index reader clients and
>> systematically
>> > purge all of the Field.Store.COMPRESS fields and migrate to an =
explicit
>> > CompressionTools approach where applicable and no compression where
>> > applicable. During this phase I'll expect to have
>> > CompressionTools-compressed fields coexisting with their
>> > Field.Store.COMPRESS predecessors, where index reader client use of
>> > Field.Store.COMPRESS is in transit to the explicit decompression
>> approach.
>> > 10. Upgrade my index writers to 3.0.0
>> > 11. Upgrade my index readers to 3.0.0
>> >
>> > I've simplified this a bit, because I shan't really be testing =
straight
>> off
>> > in production(!) - I'll test the migration plan in a test cluster =
first;
>> > but
>> > this gives you the idea about the path.
>> >
>> > I wanted to know if I should expect problems with this plan. I'm
>> depending
>> > on newer writers generating indexes for older readers and 3 is a =
major
>> > number upgrade. It looks like I can get away with this in version =
3, but
>> > that's by no means a guarantee according to
>> > =
http://wiki.apache.org/lucene-java/BackwardsCompatibility#File_Formats
>> >
>> > Does this sound like a good plan?
>> >
>> >
>> > =
---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>>
>> --
>> Weiwei Wang
>> Alex Wang
>> =E7=8E=8B=E5=B7=8D=E5=B7=8D
>> Room 403, Mengmin Wei Building
>> Computer Science Department
>> Gulou Campus of Nanjing University
>> Nanjing, P.R.China, 210093
>>
>> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --
> Weiwei Wang
> Alex Wang
> =E7=8E=8B=E5=B7=8D=E5=B7=8D
> Room 403, Mengmin Wei Building
> Computer Science Department
> Gulou Campus of Nanjing University
> Nanjing, P.R.China, 210093
>
> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 09 15:15:55 2009
Return-Path: <java-user-return-43998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52079 invoked from network); 9 Dec 2009 15:15:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Dec 2009 15:15:54 -0000
Received: (qmail 78485 invoked by uid 500); 9 Dec 2009 15:15:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78386 invoked by uid 500); 9 Dec 2009 15:15:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78376 invoked by uid 99); 9 Dec 2009 15:15:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 15:15:52 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of torindan@gmail.com designates 209.85.221.172 as permitted sender)
Received: from [209.85.221.172] (HELO mail-qy0-f172.google.com) (209.85.221.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 15:15:47 +0000
Received: by qyk2 with SMTP id 2so2851004qyk.21
        for <java-user@lucene.apache.org>; Wed, 09 Dec 2009 07:15:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=htQBTn/SswlDvFRUZojtPa9Q9LD0xedQa6VSJm9UqYY=;
        b=r6zAztJpR3dFkBH1+5uD9EYJFq3mw7Ra7LY8YyuSFGkBEl6kKUlEa/dztCPdzUX/hf
         8IotQhMPfaxZ+ZMYrQM/Rl8RBujuKc4Deel+kJ7O/vBxs/skaeMAIR9X9Y6CW5/GSabu
         ITWsC/sXOWd1Fj6KoeC9mvFz2RJFeNoGaO0dk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=uUMZts0tZfFySp782yT4rkN1yNNKnNKGxm/u+8ZnIEWW8BMsMZ5pRipwpUsRsh4Usp
         pwQ6YAorIkDeTuPc88PDEQQbmSkWBtuCvKivRi6QHifdP2pUk/imEr63/96tsobBKGyI
         Q0PgFCxz5dDYviqa2b8Utzz2ald8/QBf2MLa4=
MIME-Version: 1.0
Received: by 10.229.12.13 with SMTP id v13mr1463754qcv.83.1260371726197; Wed, 
	09 Dec 2009 07:15:26 -0800 (PST)
In-Reply-To: <015501ca78de$f88d19b0$e9a74d10$@com>
References: <00e601ca78c9$00c4af50$024e0df0$@com>
	 <7d94dcde0912090421g693b7834n98ee9b33e5714fa6@mail.gmail.com>
	 <010401ca78cd$059f3870$10dda950$@com>
	 <7d94dcde0912090511k15712ea2i9f306b727df1a69e@mail.gmail.com>
	 <2ffb6d060912090519p290aae88idac9252c5dec16ab@mail.gmail.com>
	 <015501ca78de$f88d19b0$e9a74d10$@com>
Date: Wed, 9 Dec 2009 17:15:25 +0200
Message-ID: <2ffb6d060912090715w72e97a85udecf34885e6a4b9@mail.gmail.com>
Subject: Re: Index file compatibility and a migration plan to lucene 3
From: =?UTF-8?B?RGFuaWwgxaJPUklO?= <torindan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

2nd point can be simply archived by an optimize (which will read old
segments and will create a new one)
But I'm not sure how it handles compressed fields.


On Wed, Dec 9, 2009 at 16:50, Rob Staveley (Tom) <rstaveley@seseit.com> wro=
te:
> Thanks, Danil. I think you've saved me a lot of time. Weiwei too - conver=
ting rather than reindexing everything, which will save a lot of time.
>
> So, I should do this:
>
> 1. Convert readers to 2.9.1, which should be able to read any 2.x index i=
ncluding the existing 2.3.1 indexes
> 2. Convert writers to 2.9.1, using Weiwei's idea (converting the index wi=
th a 2.9.1 reader+writer conversion utility) to save some time.
> 3. Have the writers push converted indexes to the readers using the exist=
ing production infrastructure
> 4. Like (9.) in my original plan. [Go through my index writers and index =
reader clients and systematically purge all of the Field.Store.COMPRESS fie=
lds and migrate to an explicit CompressionTools approach where applicable a=
nd no compression where applicable. During this phase I'll expect to have C=
ompressionTools-compressed fields coexisting with their Field.Store.COMPRES=
S predecessors, where index reader client use of Field.Store.COMPRESS is in=
 transit to the explicit decompression approach.]
> 5. Convert the readers to 3.0.0, which should be able to read 2.9.1, if t=
here are no compressed fields (??)
> 6. Convert the writers to 3.0.0
>
>
>
> -----Original Message-----
> From: Danil =C5=A2ORIN [mailto:torindan@gmail.com]
> Sent: 09 December 2009 13:20
> To: java-user@lucene.apache.org
> Subject: Re: Index file compatibility and a migration plan to lucene 3
>
> You NEED to update your readers first, or else they will be unable to
> read files created by newer version.
> And trust me, there are changes in index format from 2.3 -> 2.9
>
> On Wed, Dec 9, 2009 at 15:11, Weiwei Wang <ww.wang.cs@gmail.com> wrote:
>> Hi, Rob,
>> I read
>> http://wiki.apache.org/lucene-java/BackwardsCompatibility#File_Formats a=
nd
>> found no compatibility guarantee for IndexWriter between different versi=
on.
>>
>> You can run your idea as a test and see the output.
>> If it doesn't work, i suggest you convert your index to new version as I
>> said in the last post.
>>
>> You can develop a convert tool to do this job automatically(that what i =
have
>> done).
>>
>> If you do not have full access to the data center, you can read(readonly
>> mode is preferred) from the data center(through nfs or something like th=
at)
>> and write to your local disk.
>>
>> When all converting is done, you can copy the new index to the data cent=
er
>> with the help of the administrator.
>>
>> On Wed, Dec 9, 2009 at 8:42 PM, Rob Staveley (Tom) <rstaveley@seseit.com=
>wrote:
>>
>>> Thanks for the swift response, Weiwei.
>>>
>>> In my deployment, my index readers are in a data centre and therefore m=
ore
>>> difficult to upgrade than the writers. That's why I wanted to start wit=
h the
>>> writers rather than the readers. I realise that it looks the wrong way =
round
>>> and http://wiki.apache.org/lucene-java/BackwardsCompatibility#File_Form=
atseffectively says that changing the reader first is a better idea for mos=
t
>>> situations, but I wanted to know if writer first would work for me for =
2.3.1
>>> -> 3.0.0.
>>>
>>> -----Original Message-----
>>> From: Weiwei Wang [mailto:ww.wang.cs@gmail.com]
>>> Sent: 09 December 2009 12:21
>>> To: java-user@lucene.apache.org
>>> Subject: Re: Index file compatibility and a migration plan to lucene 3
>>>
>>> I=E2=80=99ve finished a upgrade from 2.4.1 to 3.0.0
>>>
>>> What I do is like this:
>>> 1. Upgrade my user-defined analyzer, tokenizer and filter to 3.0.0
>>> 2. Use a 3.0.0 IndexReader to read the old version index and then use a
>>> 3.0.0 IndexWriter to write all the documents into a new index
>>> 3. Update QueryPaser to 3.0.0
>>>
>>> I've redeployed my system and it works fine now.
>>>
>>>
>>> On Wed, Dec 9, 2009 at 8:13 PM, Rob Staveley (Tom) <rstaveley@seseit.co=
m
>>> >wrote:
>>>
>>> > I have Lucene 2.3.1 code and indexes deployed in production in a
>>> > distributed
>>> > system and would like to bring everything up to date with 3.0.0 via
>>> 2.9.1.
>>> >
>>> > Here's my migration plan:
>>> >
>>> > 1. Add a index writer which generates a 2.9.1 "test" index
>>> > 2. Have that "test" index writer push that 2.9.1 "test" index into
>>> > production and see if the distributed 2.3.1 index readers can cope wi=
th
>>> it
>>> > OK
>>> > 3. Upgrade my index writers to 2.9.1 (still using evil compressed fie=
lds)
>>> -
>>> > we shall have 2.9.1 writers and 2.3.1 readers during this phase. See =
if
>>> it
>>> > works.
>>> > 4. Upgrade my index readers to 2.9.1 (still using evil compressed fie=
lds,
>>> > but with support for explicit use of CompressionTools for decompressi=
on,
>>> > where fields have been explicitly compressed with CompressionTools - =
the
>>> > application will knows which need decompression)
>>> > 5. Add a CompressionTools to my "test" index writer, generating
>>> explicitly
>>> > compressed fields in the 2.9.1 "test" index
>>> > 6. Test explicit decompression for relevant fields with CompressionTo=
ols
>>> in
>>> > my 2.9.1 "test" index in my index readers
>>> > 7. Upgrade my "test" index writer to 3.0.0
>>> > 8. Have that "test" index writer push that 3.0.0 "test" index into
>>> > production and see if the distributed 2.9.1 index readers can cope wi=
th
>>> it
>>> > OK
>>> > 9. Go through my index writers and index reader clients and
>>> systematically
>>> > purge all of the Field.Store.COMPRESS fields and migrate to an explic=
it
>>> > CompressionTools approach where applicable and no compression where
>>> > applicable. During this phase I'll expect to have
>>> > CompressionTools-compressed fields coexisting with their
>>> > Field.Store.COMPRESS predecessors, where index reader client use of
>>> > Field.Store.COMPRESS is in transit to the explicit decompression
>>> approach.
>>> > 10. Upgrade my index writers to 3.0.0
>>> > 11. Upgrade my index readers to 3.0.0
>>> >
>>> > I've simplified this a bit, because I shan't really be testing straig=
ht
>>> off
>>> > in production(!) - I'll test the migration plan in a test cluster fir=
st;
>>> > but
>>> > this gives you the idea about the path.
>>> >
>>> > I wanted to know if I should expect problems with this plan. I'm
>>> depending
>>> > on newer writers generating indexes for older readers and 3 is a majo=
r
>>> > number upgrade. It looks like I can get away with this in version 3, =
but
>>> > that's by no means a guarantee according to
>>> > http://wiki.apache.org/lucene-java/BackwardsCompatibility#File_Format=
s
>>> >
>>> > Does this sound like a good plan?
>>> >
>>> >
>>> > ---------------------------------------------------------------------
>>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>> >
>>> >
>>>
>>>
>>> --
>>> Weiwei Wang
>>> Alex Wang
>>> =E7=8E=8B=E5=B7=8D=E5=B7=8D
>>> Room 403, Mengmin Wei Building
>>> Computer Science Department
>>> Gulou Campus of Nanjing University
>>> Nanjing, P.R.China, 210093
>>>
>>> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>> --
>> Weiwei Wang
>> Alex Wang
>> =E7=8E=8B=E5=B7=8D=E5=B7=8D
>> Room 403, Mengmin Wei Building
>> Computer Science Department
>> Gulou Campus of Nanjing University
>> Nanjing, P.R.China, 210093
>>
>> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-43999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 09 15:55:54 2009
Return-Path: <java-user-return-43999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66069 invoked from network); 9 Dec 2009 15:55:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Dec 2009 15:55:54 -0000
Received: (qmail 35064 invoked by uid 500); 9 Dec 2009 15:55:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34992 invoked by uid 500); 9 Dec 2009 15:55:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34982 invoked by uid 99); 9 Dec 2009 15:55:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 15:55:52 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rstaveley@seseit.com designates 209.97.205.201 as permitted sender)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 15:55:41 +0000
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 76C83183C6; Wed,  9 Dec 2009 15:55:13 +0000 (GMT)
X-Spam-Checker-Version: SpamAssassin 3.1.7-deb3 (2006-10-05) on 
	mini.seseit.net
X-Spam-Level: 
Received: from Bigun (bimport.seseit.net [78.143.212.168])
	by mail.seseit.com (Postfix) with ESMTP id 5AA18183C6
	for <java-user@lucene.apache.org>; Wed,  9 Dec 2009 15:55:00 +0000 (GMT)
From: "Rob Staveley \(Tom\)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
References: <00e601ca78c9$00c4af50$024e0df0$@com>	 <7d94dcde0912090421g693b7834n98ee9b33e5714fa6@mail.gmail.com>	 <010401ca78cd$059f3870$10dda950$@com>	 <7d94dcde0912090511k15712ea2i9f306b727df1a69e@mail.gmail.com>	 <2ffb6d060912090519p290aae88idac9252c5dec16ab@mail.gmail.com>	 <015501ca78de$f88d19b0$e9a74d10$@com> <2ffb6d060912090715w72e97a85udecf34885e6a4b9@mail.gmail.com>
In-Reply-To: <2ffb6d060912090715w72e97a85udecf34885e6a4b9@mail.gmail.com>
Subject: RE: Index file compatibility and a migration plan to lucene 3
Date: Wed, 9 Dec 2009 15:55:05 -0000
Message-ID: <018601ca78e7$fb6243a0$f226cae0$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acp44pAoBnteN1g5TOK8/DPO4T3mIwAAr6IQ
Content-Language: en-gb
X-seseit-ltd-MailScanner: Found to be clean, Found to be clean
X-seseit-ltd-MailScanner-From: rstaveley@seseit.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.0 required=5.0 tests=none autolearn=failed 
	version=3.1.7-deb3, No

COMPRESS is supported (only deprecated) in 2.9.1, so I'm expecting them =
to be supported =
http://lucene.apache.org/java/2_9_1/api/all/org/apache/lucene/document/Fi=
eld.Store.html#COMPRESS

I guess I should expect optimize() to increase the size of the index as =
compressed fields are expanded as it says in item 2 at =
http://lucene.apache.org/java/3_0_0/changes/Changes.html#3.0.0.changes_in=
_runtime_behavior=20

That must mean that 3.0.0 can read 2.9.1 indexes, but I'm wondering if I =
shouldn't simply upgrade the readers straight from 2.3.1 to 3.0.0 now =
with an immediate optimize handling the conversion. Can I safely assume =
that 3.0.0 is able to read 2.3.1?

Making code changes to the readers in production is tricky in my =
infrastructure and making one transition rather than two is very =
desirable.

-----Original Message-----
From: Danil =C5=A2ORIN [mailto:torindan@gmail.com]=20
Sent: 09 December 2009 15:15
To: java-user@lucene.apache.org
Subject: Re: Index file compatibility and a migration plan to lucene 3

2nd point can be simply archived by an optimize (which will read old
segments and will create a new one)
But I'm not sure how it handles compressed fields.


On Wed, Dec 9, 2009 at 16:50, Rob Staveley (Tom) <rstaveley@seseit.com> =
wrote:
> Thanks, Danil. I think you've saved me a lot of time. Weiwei too - =
converting rather than reindexing everything, which will save a lot of =
time.
>
> So, I should do this:
>
> 1. Convert readers to 2.9.1, which should be able to read any 2.x =
index including the existing 2.3.1 indexes
> 2. Convert writers to 2.9.1, using Weiwei's idea (converting the index =
with a 2.9.1 reader+writer conversion utility) to save some time.
> 3. Have the writers push converted indexes to the readers using the =
existing production infrastructure
> 4. Like (9.) in my original plan. [Go through my index writers and =
index reader clients and systematically purge all of the =
Field.Store.COMPRESS fields and migrate to an explicit CompressionTools =
approach where applicable and no compression where applicable. During =
this phase I'll expect to have CompressionTools-compressed fields =
coexisting with their Field.Store.COMPRESS predecessors, where index =
reader client use of Field.Store.COMPRESS is in transit to the explicit =
decompression approach.]
> 5. Convert the readers to 3.0.0, which should be able to read 2.9.1, =
if there are no compressed fields (??)
> 6. Convert the writers to 3.0.0
>
>
>
> -----Original Message-----
> From: Danil =C5=A2ORIN [mailto:torindan@gmail.com]
> Sent: 09 December 2009 13:20
> To: java-user@lucene.apache.org
> Subject: Re: Index file compatibility and a migration plan to lucene 3
>
> You NEED to update your readers first, or else they will be unable to
> read files created by newer version.
> And trust me, there are changes in index format from 2.3 -> 2.9
>
> On Wed, Dec 9, 2009 at 15:11, Weiwei Wang <ww.wang.cs@gmail.com> =
wrote:
>> Hi, Rob,
>> I read
>> =
http://wiki.apache.org/lucene-java/BackwardsCompatibility#File_Formats =
and
>> found no compatibility guarantee for IndexWriter between different =
version.
>>
>> You can run your idea as a test and see the output.
>> If it doesn't work, i suggest you convert your index to new version =
as I
>> said in the last post.
>>
>> You can develop a convert tool to do this job automatically(that what =
i have
>> done).
>>
>> If you do not have full access to the data center, you can =
read(readonly
>> mode is preferred) from the data center(through nfs or something like =
that)
>> and write to your local disk.
>>
>> When all converting is done, you can copy the new index to the data =
center
>> with the help of the administrator.
>>
>> On Wed, Dec 9, 2009 at 8:42 PM, Rob Staveley (Tom) =
<rstaveley@seseit.com>wrote:
>>
>>> Thanks for the swift response, Weiwei.
>>>
>>> In my deployment, my index readers are in a data centre and =
therefore more
>>> difficult to upgrade than the writers. That's why I wanted to start =
with the
>>> writers rather than the readers. I realise that it looks the wrong =
way round
>>> and =
http://wiki.apache.org/lucene-java/BackwardsCompatibility#File_Formatseff=
ectively says that changing the reader first is a better idea for most
>>> situations, but I wanted to know if writer first would work for me =
for 2.3.1
>>> -> 3.0.0.
>>>
>>> -----Original Message-----
>>> From: Weiwei Wang [mailto:ww.wang.cs@gmail.com]
>>> Sent: 09 December 2009 12:21
>>> To: java-user@lucene.apache.org
>>> Subject: Re: Index file compatibility and a migration plan to lucene =
3
>>>
>>> I=E2=80=99ve finished a upgrade from 2.4.1 to 3.0.0
>>>
>>> What I do is like this:
>>> 1. Upgrade my user-defined analyzer, tokenizer and filter to 3.0.0
>>> 2. Use a 3.0.0 IndexReader to read the old version index and then =
use a
>>> 3.0.0 IndexWriter to write all the documents into a new index
>>> 3. Update QueryPaser to 3.0.0
>>>
>>> I've redeployed my system and it works fine now.
>>>
>>>
>>> On Wed, Dec 9, 2009 at 8:13 PM, Rob Staveley (Tom) =
<rstaveley@seseit.com
>>> >wrote:
>>>
>>> > I have Lucene 2.3.1 code and indexes deployed in production in a
>>> > distributed
>>> > system and would like to bring everything up to date with 3.0.0 =
via
>>> 2.9.1.
>>> >
>>> > Here's my migration plan:
>>> >
>>> > 1. Add a index writer which generates a 2.9.1 "test" index
>>> > 2. Have that "test" index writer push that 2.9.1 "test" index into
>>> > production and see if the distributed 2.3.1 index readers can cope =
with
>>> it
>>> > OK
>>> > 3. Upgrade my index writers to 2.9.1 (still using evil compressed =
fields)
>>> -
>>> > we shall have 2.9.1 writers and 2.3.1 readers during this phase. =
See if
>>> it
>>> > works.
>>> > 4. Upgrade my index readers to 2.9.1 (still using evil compressed =
fields,
>>> > but with support for explicit use of CompressionTools for =
decompression,
>>> > where fields have been explicitly compressed with CompressionTools =
- the
>>> > application will knows which need decompression)
>>> > 5. Add a CompressionTools to my "test" index writer, generating
>>> explicitly
>>> > compressed fields in the 2.9.1 "test" index
>>> > 6. Test explicit decompression for relevant fields with =
CompressionTools
>>> in
>>> > my 2.9.1 "test" index in my index readers
>>> > 7. Upgrade my "test" index writer to 3.0.0
>>> > 8. Have that "test" index writer push that 3.0.0 "test" index into
>>> > production and see if the distributed 2.9.1 index readers can cope =
with
>>> it
>>> > OK
>>> > 9. Go through my index writers and index reader clients and
>>> systematically
>>> > purge all of the Field.Store.COMPRESS fields and migrate to an =
explicit
>>> > CompressionTools approach where applicable and no compression =
where
>>> > applicable. During this phase I'll expect to have
>>> > CompressionTools-compressed fields coexisting with their
>>> > Field.Store.COMPRESS predecessors, where index reader client use =
of
>>> > Field.Store.COMPRESS is in transit to the explicit decompression
>>> approach.
>>> > 10. Upgrade my index writers to 3.0.0
>>> > 11. Upgrade my index readers to 3.0.0
>>> >
>>> > I've simplified this a bit, because I shan't really be testing =
straight
>>> off
>>> > in production(!) - I'll test the migration plan in a test cluster =
first;
>>> > but
>>> > this gives you the idea about the path.
>>> >
>>> > I wanted to know if I should expect problems with this plan. I'm
>>> depending
>>> > on newer writers generating indexes for older readers and 3 is a =
major
>>> > number upgrade. It looks like I can get away with this in version =
3, but
>>> > that's by no means a guarantee according to
>>> > =
http://wiki.apache.org/lucene-java/BackwardsCompatibility#File_Formats
>>> >
>>> > Does this sound like a good plan?
>>> >
>>> >
>>> > =
---------------------------------------------------------------------
>>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>> >
>>> >
>>>
>>>
>>> --
>>> Weiwei Wang
>>> Alex Wang
>>> =E7=8E=8B=E5=B7=8D=E5=B7=8D
>>> Room 403, Mengmin Wei Building
>>> Computer Science Department
>>> Gulou Campus of Nanjing University
>>> Nanjing, P.R.China, 210093
>>>
>>> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>>>
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>> --
>> Weiwei Wang
>> Alex Wang
>> =E7=8E=8B=E5=B7=8D=E5=B7=8D
>> Room 403, Mengmin Wei Building
>> Computer Science Department
>> Gulou Campus of Nanjing University
>> Nanjing, P.R.China, 210093
>>
>> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 09 16:03:30 2009
Return-Path: <java-user-return-44000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68084 invoked from network); 9 Dec 2009 16:03:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Dec 2009 16:03:30 -0000
Received: (qmail 44873 invoked by uid 500); 9 Dec 2009 16:03:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44792 invoked by uid 500); 9 Dec 2009 16:03:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44782 invoked by uid 99); 9 Dec 2009 16:03:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 16:03:28 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of torindan@gmail.com designates 209.85.221.172 as permitted sender)
Received: from [209.85.221.172] (HELO mail-qy0-f172.google.com) (209.85.221.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 16:03:18 +0000
Received: by qyk2 with SMTP id 2so2876237qyk.21
        for <java-user@lucene.apache.org>; Wed, 09 Dec 2009 08:02:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=AVSikK5nXjURwAAPuvlOksBcWd9Xm2fNJGNcSf3UVlw=;
        b=hM/G5ro/JqkcESu7O37VkxybLdxcW+2ysLrHAoISE53OBLAfN7uN1UYcYiCpbaEEin
         iFejQzSaw9Qr0ntZ7Ct1OLN3HiNtuQUrLRrsX3Hc4jLgjUMRc6n1Nfrv1ThCoySS4wBx
         icVyDCrvdLvifSmNY0ljuPLRTPpc9jAKtGMt8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=hzzAHT+lwFENlAb2jCF3iKu8ZllJTJXezoC7EOxLEv5yhe7TMVX8+FY+aB4sFUTGpY
         ejNVm02tSNgzD/BOflYtxvp7eIXHb08650irOHeHtbdVcWlapNZRCoCg0kjoIMr/tthP
         PdSa+D9BwQsQ3iecohSEEsOntBaTuZCwOYkUs=
MIME-Version: 1.0
Received: by 10.229.50.136 with SMTP id z8mr1469173qcf.78.1260374577579; Wed, 
	09 Dec 2009 08:02:57 -0800 (PST)
In-Reply-To: <018601ca78e7$fb6243a0$f226cae0$@com>
References: <00e601ca78c9$00c4af50$024e0df0$@com>
	 <7d94dcde0912090421g693b7834n98ee9b33e5714fa6@mail.gmail.com>
	 <010401ca78cd$059f3870$10dda950$@com>
	 <7d94dcde0912090511k15712ea2i9f306b727df1a69e@mail.gmail.com>
	 <2ffb6d060912090519p290aae88idac9252c5dec16ab@mail.gmail.com>
	 <015501ca78de$f88d19b0$e9a74d10$@com>
	 <2ffb6d060912090715w72e97a85udecf34885e6a4b9@mail.gmail.com>
	 <018601ca78e7$fb6243a0$f226cae0$@com>
Date: Wed, 9 Dec 2009 18:02:57 +0200
Message-ID: <2ffb6d060912090802s5796bf34ja2f419a2faa6f906@mail.gmail.com>
Subject: Re: Index file compatibility and a migration plan to lucene 3
From: =?UTF-8?B?RGFuaWwgxaJPUklO?= <torindan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

There are a LOT of deprecated stuff in 2.9.1 (but it's still there)
and your code should run as it is
(however there are some changes in behavior, so read carefully CHANGES.txt)

In 3.0 this old stuff is removed.
Your production readers may not even start (which I guess is more
painful than 2 step transition)

The safest way is to upgrade to 2.9.1, fix ALL deprecation warnings,
and only then move on to 3.0.

Don't you have a playground to properly test your changes before
deploying to production ?

On Wed, Dec 9, 2009 at 17:55, Rob Staveley (Tom) <rstaveley@seseit.com> wro=
te:
> COMPRESS is supported (only deprecated) in 2.9.1, so I'm expecting them t=
o be supported http://lucene.apache.org/java/2_9_1/api/all/org/apache/lucen=
e/document/Field.Store.html#COMPRESS
>
> I guess I should expect optimize() to increase the size of the index as c=
ompressed fields are expanded as it says in item 2 at http://lucene.apache.=
org/java/3_0_0/changes/Changes.html#3.0.0.changes_in_runtime_behavior
>
> That must mean that 3.0.0 can read 2.9.1 indexes, but I'm wondering if I =
shouldn't simply upgrade the readers straight from 2.3.1 to 3.0.0 now with =
an immediate optimize handling the conversion. Can I safely assume that 3.0=
.0 is able to read 2.3.1?
>
> Making code changes to the readers in production is tricky in my infrastr=
ucture and making one transition rather than two is very desirable.
>
> -----Original Message-----
> From: Danil =C5=A2ORIN [mailto:torindan@gmail.com]
> Sent: 09 December 2009 15:15
> To: java-user@lucene.apache.org
> Subject: Re: Index file compatibility and a migration plan to lucene 3
>
> 2nd point can be simply archived by an optimize (which will read old
> segments and will create a new one)
> But I'm not sure how it handles compressed fields.
>
>
> On Wed, Dec 9, 2009 at 16:50, Rob Staveley (Tom) <rstaveley@seseit.com> w=
rote:
>> Thanks, Danil. I think you've saved me a lot of time. Weiwei too - conve=
rting rather than reindexing everything, which will save a lot of time.
>>
>> So, I should do this:
>>
>> 1. Convert readers to 2.9.1, which should be able to read any 2.x index =
including the existing 2.3.1 indexes
>> 2. Convert writers to 2.9.1, using Weiwei's idea (converting the index w=
ith a 2.9.1 reader+writer conversion utility) to save some time.
>> 3. Have the writers push converted indexes to the readers using the exis=
ting production infrastructure
>> 4. Like (9.) in my original plan. [Go through my index writers and index=
 reader clients and systematically purge all of the Field.Store.COMPRESS fi=
elds and migrate to an explicit CompressionTools approach where applicable =
and no compression where applicable. During this phase I'll expect to have =
CompressionTools-compressed fields coexisting with their Field.Store.COMPRE=
SS predecessors, where index reader client use of Field.Store.COMPRESS is i=
n transit to the explicit decompression approach.]
>> 5. Convert the readers to 3.0.0, which should be able to read 2.9.1, if =
there are no compressed fields (??)
>> 6. Convert the writers to 3.0.0
>>
>>
>>
>> -----Original Message-----
>> From: Danil =C5=A2ORIN [mailto:torindan@gmail.com]
>> Sent: 09 December 2009 13:20
>> To: java-user@lucene.apache.org
>> Subject: Re: Index file compatibility and a migration plan to lucene 3
>>
>> You NEED to update your readers first, or else they will be unable to
>> read files created by newer version.
>> And trust me, there are changes in index format from 2.3 -> 2.9
>>
>> On Wed, Dec 9, 2009 at 15:11, Weiwei Wang <ww.wang.cs@gmail.com> wrote:
>>> Hi, Rob,
>>> I read
>>> http://wiki.apache.org/lucene-java/BackwardsCompatibility#File_Formats =
and
>>> found no compatibility guarantee for IndexWriter between different vers=
ion.
>>>
>>> You can run your idea as a test and see the output.
>>> If it doesn't work, i suggest you convert your index to new version as =
I
>>> said in the last post.
>>>
>>> You can develop a convert tool to do this job automatically(that what i=
 have
>>> done).
>>>
>>> If you do not have full access to the data center, you can read(readonl=
y
>>> mode is preferred) from the data center(through nfs or something like t=
hat)
>>> and write to your local disk.
>>>
>>> When all converting is done, you can copy the new index to the data cen=
ter
>>> with the help of the administrator.
>>>
>>> On Wed, Dec 9, 2009 at 8:42 PM, Rob Staveley (Tom) <rstaveley@seseit.co=
m>wrote:
>>>
>>>> Thanks for the swift response, Weiwei.
>>>>
>>>> In my deployment, my index readers are in a data centre and therefore =
more
>>>> difficult to upgrade than the writers. That's why I wanted to start wi=
th the
>>>> writers rather than the readers. I realise that it looks the wrong way=
 round
>>>> and http://wiki.apache.org/lucene-java/BackwardsCompatibility#File_For=
matseffectively says that changing the reader first is a better idea for mo=
st
>>>> situations, but I wanted to know if writer first would work for me for=
 2.3.1
>>>> -> 3.0.0.
>>>>
>>>> -----Original Message-----
>>>> From: Weiwei Wang [mailto:ww.wang.cs@gmail.com]
>>>> Sent: 09 December 2009 12:21
>>>> To: java-user@lucene.apache.org
>>>> Subject: Re: Index file compatibility and a migration plan to lucene 3
>>>>
>>>> I=E2=80=99ve finished a upgrade from 2.4.1 to 3.0.0
>>>>
>>>> What I do is like this:
>>>> 1. Upgrade my user-defined analyzer, tokenizer and filter to 3.0.0
>>>> 2. Use a 3.0.0 IndexReader to read the old version index and then use =
a
>>>> 3.0.0 IndexWriter to write all the documents into a new index
>>>> 3. Update QueryPaser to 3.0.0
>>>>
>>>> I've redeployed my system and it works fine now.
>>>>
>>>>
>>>> On Wed, Dec 9, 2009 at 8:13 PM, Rob Staveley (Tom) <rstaveley@seseit.c=
om
>>>> >wrote:
>>>>
>>>> > I have Lucene 2.3.1 code and indexes deployed in production in a
>>>> > distributed
>>>> > system and would like to bring everything up to date with 3.0.0 via
>>>> 2.9.1.
>>>> >
>>>> > Here's my migration plan:
>>>> >
>>>> > 1. Add a index writer which generates a 2.9.1 "test" index
>>>> > 2. Have that "test" index writer push that 2.9.1 "test" index into
>>>> > production and see if the distributed 2.3.1 index readers can cope w=
ith
>>>> it
>>>> > OK
>>>> > 3. Upgrade my index writers to 2.9.1 (still using evil compressed fi=
elds)
>>>> -
>>>> > we shall have 2.9.1 writers and 2.3.1 readers during this phase. See=
 if
>>>> it
>>>> > works.
>>>> > 4. Upgrade my index readers to 2.9.1 (still using evil compressed fi=
elds,
>>>> > but with support for explicit use of CompressionTools for decompress=
ion,
>>>> > where fields have been explicitly compressed with CompressionTools -=
 the
>>>> > application will knows which need decompression)
>>>> > 5. Add a CompressionTools to my "test" index writer, generating
>>>> explicitly
>>>> > compressed fields in the 2.9.1 "test" index
>>>> > 6. Test explicit decompression for relevant fields with CompressionT=
ools
>>>> in
>>>> > my 2.9.1 "test" index in my index readers
>>>> > 7. Upgrade my "test" index writer to 3.0.0
>>>> > 8. Have that "test" index writer push that 3.0.0 "test" index into
>>>> > production and see if the distributed 2.9.1 index readers can cope w=
ith
>>>> it
>>>> > OK
>>>> > 9. Go through my index writers and index reader clients and
>>>> systematically
>>>> > purge all of the Field.Store.COMPRESS fields and migrate to an expli=
cit
>>>> > CompressionTools approach where applicable and no compression where
>>>> > applicable. During this phase I'll expect to have
>>>> > CompressionTools-compressed fields coexisting with their
>>>> > Field.Store.COMPRESS predecessors, where index reader client use of
>>>> > Field.Store.COMPRESS is in transit to the explicit decompression
>>>> approach.
>>>> > 10. Upgrade my index writers to 3.0.0
>>>> > 11. Upgrade my index readers to 3.0.0
>>>> >
>>>> > I've simplified this a bit, because I shan't really be testing strai=
ght
>>>> off
>>>> > in production(!) - I'll test the migration plan in a test cluster fi=
rst;
>>>> > but
>>>> > this gives you the idea about the path.
>>>> >
>>>> > I wanted to know if I should expect problems with this plan. I'm
>>>> depending
>>>> > on newer writers generating indexes for older readers and 3 is a maj=
or
>>>> > number upgrade. It looks like I can get away with this in version 3,=
 but
>>>> > that's by no means a guarantee according to
>>>> > http://wiki.apache.org/lucene-java/BackwardsCompatibility#File_Forma=
ts
>>>> >
>>>> > Does this sound like a good plan?
>>>> >
>>>> >
>>>> > --------------------------------------------------------------------=
-
>>>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>>> >
>>>> >
>>>>
>>>>
>>>> --
>>>> Weiwei Wang
>>>> Alex Wang
>>>> =E7=8E=8B=E5=B7=8D=E5=B7=8D
>>>> Room 403, Mengmin Wei Building
>>>> Computer Science Department
>>>> Gulou Campus of Nanjing University
>>>> Nanjing, P.R.China, 210093
>>>>
>>>> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>>
>>> --
>>> Weiwei Wang
>>> Alex Wang
>>> =E7=8E=8B=E5=B7=8D=E5=B7=8D
>>> Room 403, Mengmin Wei Building
>>> Computer Science Department
>>> Gulou Campus of Nanjing University
>>> Nanjing, P.R.China, 210093
>>>
>>> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 09 16:11:31 2009
Return-Path: <java-user-return-44001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70950 invoked from network); 9 Dec 2009 16:11:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Dec 2009 16:11:31 -0000
Received: (qmail 60893 invoked by uid 500); 9 Dec 2009 16:11:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60802 invoked by uid 500); 9 Dec 2009 16:11:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60792 invoked by uid 99); 9 Dec 2009 16:11:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 16:11:28 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rstaveley@seseit.com designates 209.97.205.201 as permitted sender)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 16:11:25 +0000
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 43D34183C6; Wed,  9 Dec 2009 16:10:58 +0000 (GMT)
X-Spam-Checker-Version: SpamAssassin 3.1.7-deb3 (2006-10-05) on 
	mini.seseit.net
X-Spam-Level: 
Received: from Bigun (bimport.seseit.net [78.143.212.168])
	by mail.seseit.com (Postfix) with ESMTP id 1988E183C6
	for <java-user@lucene.apache.org>; Wed,  9 Dec 2009 16:10:50 +0000 (GMT)
From: "Rob Staveley \(Tom\)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
References: <00e601ca78c9$00c4af50$024e0df0$@com>	 <7d94dcde0912090421g693b7834n98ee9b33e5714fa6@mail.gmail.com>	 <010401ca78cd$059f3870$10dda950$@com>	 <7d94dcde0912090511k15712ea2i9f306b727df1a69e@mail.gmail.com>	 <2ffb6d060912090519p290aae88idac9252c5dec16ab@mail.gmail.com>	 <015501ca78de$f88d19b0$e9a74d10$@com>	 <2ffb6d060912090715w72e97a85udecf34885e6a4b9@mail.gmail.com>	 <018601ca78e7$fb6243a0$f226cae0$@com> <2ffb6d060912090802s5796bf34ja2f419a2faa6f906@mail.gmail.com>
In-Reply-To: <2ffb6d060912090802s5796bf34ja2f419a2faa6f906@mail.gmail.com>
Subject: RE: Index file compatibility and a migration plan to lucene 3
Date: Wed, 9 Dec 2009 16:10:56 -0000
Message-ID: <01a501ca78ea$32168ee0$9643aca0$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acp46SqLfafH4gLmTDC40TNatpOMNQAAIDiQ
Content-Language: en-gb
X-seseit-ltd-MailScanner: Found to be clean, Found to be clean
X-seseit-ltd-MailScanner-From: rstaveley@seseit.com
X-Old-Spam-Status: No, score=0.0 required=5.0 tests=none autolearn=failed 
	version=3.1.7-deb3, No

> Don't you have a playground to properly test your changes

Yes, I'll be doing a practice run in a DEV cluster. It is the practice =
run that I'm planning at this point.=20

Many thanks for your pointers, Danil.=20

-----Original Message-----
From: Danil =C5=A2ORIN [mailto:torindan@gmail.com]=20
Sent: 09 December 2009 16:03
To: java-user@lucene.apache.org
Subject: Re: Index file compatibility and a migration plan to lucene 3

There are a LOT of deprecated stuff in 2.9.1 (but it's still there)
and your code should run as it is
(however there are some changes in behavior, so read carefully =
CHANGES.txt)

In 3.0 this old stuff is removed.
Your production readers may not even start (which I guess is more
painful than 2 step transition)

The safest way is to upgrade to 2.9.1, fix ALL deprecation warnings,
and only then move on to 3.0.

Don't you have a playground to properly test your changes before
deploying to production ?

On Wed, Dec 9, 2009 at 17:55, Rob Staveley (Tom) <rstaveley@seseit.com> =
wrote:
> COMPRESS is supported (only deprecated) in 2.9.1, so I'm expecting =
them to be supported =
http://lucene.apache.org/java/2_9_1/api/all/org/apache/lucene/document/Fi=
eld.Store.html#COMPRESS
>
> I guess I should expect optimize() to increase the size of the index =
as compressed fields are expanded as it says in item 2 at =
http://lucene.apache.org/java/3_0_0/changes/Changes.html#3.0.0.changes_in=
_runtime_behavior
>
> That must mean that 3.0.0 can read 2.9.1 indexes, but I'm wondering if =
I shouldn't simply upgrade the readers straight from 2.3.1 to 3.0.0 now =
with an immediate optimize handling the conversion. Can I safely assume =
that 3.0.0 is able to read 2.3.1?
>
> Making code changes to the readers in production is tricky in my =
infrastructure and making one transition rather than two is very =
desirable.
>
> -----Original Message-----
> From: Danil =C5=A2ORIN [mailto:torindan@gmail.com]
> Sent: 09 December 2009 15:15
> To: java-user@lucene.apache.org
> Subject: Re: Index file compatibility and a migration plan to lucene 3
>
> 2nd point can be simply archived by an optimize (which will read old
> segments and will create a new one)
> But I'm not sure how it handles compressed fields.
>
>
> On Wed, Dec 9, 2009 at 16:50, Rob Staveley (Tom) =
<rstaveley@seseit.com> wrote:
>> Thanks, Danil. I think you've saved me a lot of time. Weiwei too - =
converting rather than reindexing everything, which will save a lot of =
time.
>>
>> So, I should do this:
>>
>> 1. Convert readers to 2.9.1, which should be able to read any 2.x =
index including the existing 2.3.1 indexes
>> 2. Convert writers to 2.9.1, using Weiwei's idea (converting the =
index with a 2.9.1 reader+writer conversion utility) to save some time.
>> 3. Have the writers push converted indexes to the readers using the =
existing production infrastructure
>> 4. Like (9.) in my original plan. [Go through my index writers and =
index reader clients and systematically purge all of the =
Field.Store.COMPRESS fields and migrate to an explicit CompressionTools =
approach where applicable and no compression where applicable. During =
this phase I'll expect to have CompressionTools-compressed fields =
coexisting with their Field.Store.COMPRESS predecessors, where index =
reader client use of Field.Store.COMPRESS is in transit to the explicit =
decompression approach.]
>> 5. Convert the readers to 3.0.0, which should be able to read 2.9.1, =
if there are no compressed fields (??)
>> 6. Convert the writers to 3.0.0
>>
>>
>>
>> -----Original Message-----
>> From: Danil =C5=A2ORIN [mailto:torindan@gmail.com]
>> Sent: 09 December 2009 13:20
>> To: java-user@lucene.apache.org
>> Subject: Re: Index file compatibility and a migration plan to lucene =
3
>>
>> You NEED to update your readers first, or else they will be unable to
>> read files created by newer version.
>> And trust me, there are changes in index format from 2.3 -> 2.9
>>
>> On Wed, Dec 9, 2009 at 15:11, Weiwei Wang <ww.wang.cs@gmail.com> =
wrote:
>>> Hi, Rob,
>>> I read
>>> =
http://wiki.apache.org/lucene-java/BackwardsCompatibility#File_Formats =
and
>>> found no compatibility guarantee for IndexWriter between different =
version.
>>>
>>> You can run your idea as a test and see the output.
>>> If it doesn't work, i suggest you convert your index to new version =
as I
>>> said in the last post.
>>>
>>> You can develop a convert tool to do this job automatically(that =
what i have
>>> done).
>>>
>>> If you do not have full access to the data center, you can =
read(readonly
>>> mode is preferred) from the data center(through nfs or something =
like that)
>>> and write to your local disk.
>>>
>>> When all converting is done, you can copy the new index to the data =
center
>>> with the help of the administrator.
>>>
>>> On Wed, Dec 9, 2009 at 8:42 PM, Rob Staveley (Tom) =
<rstaveley@seseit.com>wrote:
>>>
>>>> Thanks for the swift response, Weiwei.
>>>>
>>>> In my deployment, my index readers are in a data centre and =
therefore more
>>>> difficult to upgrade than the writers. That's why I wanted to start =
with the
>>>> writers rather than the readers. I realise that it looks the wrong =
way round
>>>> and =
http://wiki.apache.org/lucene-java/BackwardsCompatibility#File_Formatseff=
ectively says that changing the reader first is a better idea for most
>>>> situations, but I wanted to know if writer first would work for me =
for 2.3.1
>>>> -> 3.0.0.
>>>>
>>>> -----Original Message-----
>>>> From: Weiwei Wang [mailto:ww.wang.cs@gmail.com]
>>>> Sent: 09 December 2009 12:21
>>>> To: java-user@lucene.apache.org
>>>> Subject: Re: Index file compatibility and a migration plan to =
lucene 3
>>>>
>>>> I=E2=80=99ve finished a upgrade from 2.4.1 to 3.0.0
>>>>
>>>> What I do is like this:
>>>> 1. Upgrade my user-defined analyzer, tokenizer and filter to 3.0.0
>>>> 2. Use a 3.0.0 IndexReader to read the old version index and then =
use a
>>>> 3.0.0 IndexWriter to write all the documents into a new index
>>>> 3. Update QueryPaser to 3.0.0
>>>>
>>>> I've redeployed my system and it works fine now.
>>>>
>>>>
>>>> On Wed, Dec 9, 2009 at 8:13 PM, Rob Staveley (Tom) =
<rstaveley@seseit.com
>>>> >wrote:
>>>>
>>>> > I have Lucene 2.3.1 code and indexes deployed in production in a
>>>> > distributed
>>>> > system and would like to bring everything up to date with 3.0.0 =
via
>>>> 2.9.1.
>>>> >
>>>> > Here's my migration plan:
>>>> >
>>>> > 1. Add a index writer which generates a 2.9.1 "test" index
>>>> > 2. Have that "test" index writer push that 2.9.1 "test" index =
into
>>>> > production and see if the distributed 2.3.1 index readers can =
cope with
>>>> it
>>>> > OK
>>>> > 3. Upgrade my index writers to 2.9.1 (still using evil compressed =
fields)
>>>> -
>>>> > we shall have 2.9.1 writers and 2.3.1 readers during this phase. =
See if
>>>> it
>>>> > works.
>>>> > 4. Upgrade my index readers to 2.9.1 (still using evil compressed =
fields,
>>>> > but with support for explicit use of CompressionTools for =
decompression,
>>>> > where fields have been explicitly compressed with =
CompressionTools - the
>>>> > application will knows which need decompression)
>>>> > 5. Add a CompressionTools to my "test" index writer, generating
>>>> explicitly
>>>> > compressed fields in the 2.9.1 "test" index
>>>> > 6. Test explicit decompression for relevant fields with =
CompressionTools
>>>> in
>>>> > my 2.9.1 "test" index in my index readers
>>>> > 7. Upgrade my "test" index writer to 3.0.0
>>>> > 8. Have that "test" index writer push that 3.0.0 "test" index =
into
>>>> > production and see if the distributed 2.9.1 index readers can =
cope with
>>>> it
>>>> > OK
>>>> > 9. Go through my index writers and index reader clients and
>>>> systematically
>>>> > purge all of the Field.Store.COMPRESS fields and migrate to an =
explicit
>>>> > CompressionTools approach where applicable and no compression =
where
>>>> > applicable. During this phase I'll expect to have
>>>> > CompressionTools-compressed fields coexisting with their
>>>> > Field.Store.COMPRESS predecessors, where index reader client use =
of
>>>> > Field.Store.COMPRESS is in transit to the explicit decompression
>>>> approach.
>>>> > 10. Upgrade my index writers to 3.0.0
>>>> > 11. Upgrade my index readers to 3.0.0
>>>> >
>>>> > I've simplified this a bit, because I shan't really be testing =
straight
>>>> off
>>>> > in production(!) - I'll test the migration plan in a test cluster =
first;
>>>> > but
>>>> > this gives you the idea about the path.
>>>> >
>>>> > I wanted to know if I should expect problems with this plan. I'm
>>>> depending
>>>> > on newer writers generating indexes for older readers and 3 is a =
major
>>>> > number upgrade. It looks like I can get away with this in version =
3, but
>>>> > that's by no means a guarantee according to
>>>> > =
http://wiki.apache.org/lucene-java/BackwardsCompatibility#File_Formats
>>>> >
>>>> > Does this sound like a good plan?
>>>> >
>>>> >
>>>> > =
---------------------------------------------------------------------
>>>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>>> >
>>>> >
>>>>
>>>>
>>>> --
>>>> Weiwei Wang
>>>> Alex Wang
>>>> =E7=8E=8B=E5=B7=8D=E5=B7=8D
>>>> Room 403, Mengmin Wei Building
>>>> Computer Science Department
>>>> Gulou Campus of Nanjing University
>>>> Nanjing, P.R.China, 210093
>>>>
>>>> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>>>>
>>>>
>>>> =
---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>>
>>> --
>>> Weiwei Wang
>>> Alex Wang
>>> =E7=8E=8B=E5=B7=8D=E5=B7=8D
>>> Room 403, Mengmin Wei Building
>>> Computer Science Department
>>> Gulou Campus of Nanjing University
>>> Nanjing, P.R.China, 210093
>>>
>>> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 09 16:25:43 2009
Return-Path: <java-user-return-44002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73750 invoked from network); 9 Dec 2009 16:25:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Dec 2009 16:25:43 -0000
Received: (qmail 75754 invoked by uid 500); 9 Dec 2009 16:25:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75672 invoked by uid 500); 9 Dec 2009 16:25:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75659 invoked by uid 99); 9 Dec 2009 16:25:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 16:25:41 +0000
X-ASF-Spam-Status: No, hits=-2.8 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.160.46 as permitted sender)
Received: from [209.85.160.46] (HELO mail-pw0-f46.google.com) (209.85.160.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 16:25:39 +0000
Received: by pwj16 with SMTP id 16so1960105pwj.5
        for <java-user@lucene.apache.org>; Wed, 09 Dec 2009 08:25:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=dMBHu2bJtMOTCS9ZZlGvJKjCoUnAY+0+fUdAAGu6vkQ=;
        b=dMSDLEctBmo93kOkreQqhFs2fK4Uk/7j2K5el67Fp9aYS6k470KYVH8OVxdqETr9KF
         fXDVYGr/FikpR04xrzRsf7WGLpmDrp0SopdpBDsEtO7yEq77lWXNScLqXwRKMxbuaQXC
         fhssljeoDrNeFEFSbMMRbaNmNqPDxObMTKMKQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=TkLR6sW8C4MeCoK6i1T4i1JkAlvPRG2XinH/lCnNTWJXTcXHqdyRmQjT9NNuvIA+lv
         VoZG5AryNCzJILx+k3ksVL8xo5KeaJdyNGl5DYZleKtw2kBpaadj9sARjyAukS2Osufs
         wTjzwph6sddQ4LqxmIf7EfOtHAO3kcXHgUigU=
MIME-Version: 1.0
Received: by 10.141.22.19 with SMTP id z19mr329630rvi.123.1260375918451; Wed, 
	09 Dec 2009 08:25:18 -0800 (PST)
In-Reply-To: <9ac0c6aa0912090223t55e9de63l3dde4fad36db96d0@mail.gmail.com>
References: <85d3c3b60912081634j4bfa8cbdm3a3ad5286c3a9b70@mail.gmail.com>
	 <9ac0c6aa0912090223t55e9de63l3dde4fad36db96d0@mail.gmail.com>
Date: Wed, 9 Dec 2009 08:25:18 -0800
Message-ID: <85d3c3b60912090825k39da2c37q2d507a5dce21ade0@mail.gmail.com>
Subject: Re: NearSpansUnordered payloads not returning all the time
From: Jason Rutherglen <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Right we're getting the spans, however it's just the payloads that are
missing, randomly...

On Wed, Dec 9, 2009 at 2:23 AM, Michael McCandless
<lucene@mikemccandless.com> wrote:
> There was a thread a while back about how span queries don't enumerate
> every possible span, but I can't remember if that included sometimes
> missing payloads...
>
> Mike
>
> On Tue, Dec 8, 2009 at 7:34 PM, Jason Rutherglen
> <jason.rutherglen@gmail.com> wrote:
>> Howdy,
>>
>> I am wondering if anyone has seen
>> NearSpansUnordered.getPayload() not return payloads that are
>> verifiably accessible via IR.termPositions? It's a bit confusing
>> because most of the time they're returned properly.
>>
>> I suspect the payload logic gets tripped up in
>> NearSpansUnordered. I'll put together a test case, however the
>> difficulty is that we're only seeing the issue with largish 800
>> MB indexes, which could make the test case a little crazy.
>>
>> Jason
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 09 17:55:45 2009
Return-Path: <java-user-return-44003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14871 invoked from network); 9 Dec 2009 17:55:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Dec 2009 17:55:45 -0000
Received: (qmail 61863 invoked by uid 500); 9 Dec 2009 17:55:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61781 invoked by uid 500); 9 Dec 2009 17:55:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61770 invoked by uid 99); 9 Dec 2009 17:55:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 17:55:42 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [91.121.16.47] (HELO ns23917.ovh.net) (91.121.16.47)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 17:55:31 +0000
Received: (qmail 28205 invoked by uid 508); 9 Dec 2009 18:01:20 -0000
Received: from unknown (HELO spotter-dclnx) (88.182.17.109)
  by ns23917.ovh.net with AES256-SHA encrypted SMTP; 9 Dec 2009 18:01:20 -0000
Received: from techno by spotter-dclnx with local (Exim 4.69)
	(envelope-from <dcausse@spotter.com>)
	id 1NIQkM-0004Oa-Ai
	for java-user@lucene.apache.org; Wed, 09 Dec 2009 18:54:42 +0100
Date: Wed, 9 Dec 2009 18:54:42 +0100
From: David Causse <dcausse@spotter.com>
To: java-user@lucene.apache.org
Subject: Re: index reader for multiple indexes
Message-ID: <20091209175442.GF4942@spotter-dclnx>
Mail-Followup-To: David Causse <dcausse@spotter.com>,
	java-user@lucene.apache.org
References: <25716741.post@talk.nabble.com>
 <DA6C7B02E59442FFB178186535E7D0FF@VEGA>
 <25726159.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <25726159.post@talk.nabble.com>
User-Agent: Mutt/1.5.20 (2009-06-14)
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, Oct 02, 2009 at 11:40:09PM -0700, m.harig wrote:
> 
> Thanks Uwe Schindler ,
> 
>       If i use an IndexReader[] to use MultiReader  , will it be thread
> safe? because i've to reopen my IndexReader to check whether my index is
> updated or not . In this case how do i handle it? please suggest me

Hi,

AFAIK readers are cloned when they are used inside MultiReader, so I
guess reopening a single reader outside MultiReader has no effect and
reopen on MultiReader reopen all the readers.

So I think there is no way to reopen one specific reader inside a
MultiReader without a new instance of the MultiReader.

IMHO the easy way is to use MultiReader as a normal reader (with
default constructor MultiReader(IndexReader... readers) ), forget the
original readers and use reopen on the MultiReader. It should be
thread-safe.
You should check the sources for more complicated usage.

> 
> 
> 
> Uwe Schindler wrote:
> > 
> > Use MultiReader which is an IndexReader on top of various
> > Sub-IndexReaders.
> > 
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> > 
> >> -----Original Message-----
> >> From: m.harig [mailto:m.harig@gmail.com]
> >> Sent: Friday, October 02, 2009 6:52 PM
> >> To: java-user@lucene.apache.org
> >> Subject: index reader for multiple indexes
> >> 
> >> 
> >> hello all ,
> >> 
> >>        am merging more than one indexes to search a document , how do i
> >> use
> >> IndexReader here to open multiple indexes? (since IndexReader will open
> >> one
> >> directory at a time) could any1 please suggest me?
> >> 
> >> 
> >> --
> >> View this message in context: http://www.nabble.com/index-reader-for-
> >> multiple-indexes-tp25716741p25716741.html
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >> 
> >> 
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> > 
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> > 
> > 
> 
> -- 
> View this message in context: http://www.nabble.com/index-reader-for-multiple-indexes-tp25716741p25726159.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

-- 
David Causse
Spotter
http://www.spotter.com/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 09 18:48:46 2009
Return-Path: <java-user-return-44004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53542 invoked from network); 9 Dec 2009 18:48:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Dec 2009 18:48:46 -0000
Received: (qmail 81130 invoked by uid 500); 9 Dec 2009 18:48:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81047 invoked by uid 500); 9 Dec 2009 18:48:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80906 invoked by uid 99); 9 Dec 2009 18:48:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 18:48:43 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jdfennell@gmail.com designates 74.125.92.24 as permitted sender)
Received: from [74.125.92.24] (HELO qw-out-2122.google.com) (74.125.92.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 18:48:41 +0000
Received: by qw-out-2122.google.com with SMTP id 5so1302334qwd.21
        for <java-user@lucene.apache.org>; Wed, 09 Dec 2009 10:48:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:from:date:message-id
         :subject:to:content-type;
        bh=2WwMdoI1Ll5Zyf1/cgTCgTvRdaTjN369jvSyt/CsN3c=;
        b=d+JklaeKoIlgUH2sp7iHtTGoklpB6pM3fEWwyf7iQELL4XtafxPxEMDD/vv2e8byIy
         r4wcAJi6TkUOVXXGe0IvmPq2f9CqKq6ywE7rcyN5B54otOCaqWdS9gk1nvWGMblSZt7o
         7fDxaPVlo3lMBqzQg56TN+BYTlxpCgXG2hmyQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=L04ww7NrKY40lA6ElNYqDU6z/bIwlXPVr+iHA4zKkXS07DTZH2UsiNV0ALM6wVNoAP
         HVlz8bq72YzVDTu4troNcdCgQZJexOUJOYY73YxxMy/AsHwy2HBbHSu1zA+2zWttdcPR
         nM5myaQwTtXqUIFFpQd7Rf51nu/kbavRrO6o8=
MIME-Version: 1.0
Received: by 10.224.91.196 with SMTP id o4mr5737383qam.233.1260384500146; Wed, 
	09 Dec 2009 10:48:20 -0800 (PST)
From: Jason Fennell <jdfennell@gmail.com>
Date: Wed, 9 Dec 2009 10:48:00 -0800
Message-ID: <9fad81fd0912091048y8bf5fc1qe9bd408a99220eae@mail.gmail.com>
Subject: MatchAllDocsQuery and InstantiatedIndex on Lucene 2.9.1
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000feaf0b1ce697501047a502277

--000feaf0b1ce697501047a502277
Content-Type: text/plain; charset=ISO-8859-1

I'm trying to upgrade our application from Lucene 2.4.1 to Lucene 2.9.1.
I've been using an InstantiatedIndex to do a bunch of unit testing, but am
running into a some problems with Lucene 2.9.1.
In particular, when I try to run a MatchAllDocsQuery on my InstantiatedIndex
(which worked fine on 2.4.1) a NullPointerException is raised.  I think I
tracked down the problem in the Lucene source.

In the 2.9.1 MatchAllDocsQuery, the MatchAllScorer retrieves termDocs from
the IndexReader passed to it with

reader.termDocs(null)

which I assume is supposed to return all termDocs.  However, tracing this
call down

IndexReader.termDocs(term) calls InstantiatedTermDocs.seek(
term) calls InstantiatedIndex.findTerm(term)

which is implemented as

InstantiatedTerm findTerm(Term term) {
    return findTerm(term.field(), term.text());
}

which, since term is null, results in a NullPointerException.  This seems to
me like an bug either in the MatchAllDocsQuery implementation (the version
in 2.4.1 did not use termDocs, so did not pass through this null), or a bug
in the implementation of InstantiatedIndex.

Any suggestions on what I can do about this?  I definitely can't get rid of
the MatchAllDocsQuery and don't really want to move back to a slow
RAMDirectory.

--000feaf0b1ce697501047a502277--

From java-user-return-44005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 09 18:59:00 2009
Return-Path: <java-user-return-44005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58950 invoked from network); 9 Dec 2009 18:59:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Dec 2009 18:59:00 -0000
Received: (qmail 98056 invoked by uid 500); 9 Dec 2009 18:58:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97977 invoked by uid 500); 9 Dec 2009 18:58:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97967 invoked by uid 99); 9 Dec 2009 18:58:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 18:58:57 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ihasmax@gmail.com designates 209.85.216.199 as permitted sender)
Received: from [209.85.216.199] (HELO mail-px0-f199.google.com) (209.85.216.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 18:58:55 +0000
Received: by pxi37 with SMTP id 37so3050972pxi.20
        for <java-user@lucene.apache.org>; Wed, 09 Dec 2009 10:58:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=qsEP8dYE7MrOSaIz1BDSJftj1u5cCbm1ohvOiVekSpE=;
        b=hvqTj3qYdg5hNJKbrBaMziCFnclILxlqHdhRpmBSKvo67AIpzeXKAlbVqt2gaMO8g6
         HAHnDoqujDeYeGNJW1t11BStOPO1n0/8IJgsZs5eAxxPEpO/zArsuhc6jRZFi5JQlj7W
         DOW3EXXsfQcXC6sVI7hlzWXDV7rQgksi08diM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=uw+e8FBEeE5xFBUCxDlD+YS8H/E57gohu1VdC7BkFzRa3KNiSN7gVDB28Q5lPc4AdV
         KAor1FPeO2Q8INQKPD8uI8jVMuHxQJdgon4TS6fhxSNAxkHbcHCEMlElU59VHwK1WGlQ
         RjDMx4sDfO2D/EcJtQN6lbciDJMk2kEQ+q+n0=
MIME-Version: 1.0
Received: by 10.141.88.8 with SMTP id q8mr450042rvl.203.1260385115213; Wed, 09 
	Dec 2009 10:58:35 -0800 (PST)
Date: Wed, 9 Dec 2009 12:58:35 -0600
Message-ID: <3836ec640912091058o6366d748vfb04ce855edad19b@mail.gmail.com>
Subject: Converting HitCollector to Collector
From: Max Lynch <ihasmax@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd13862128eee047a504791

--000e0cd13862128eee047a504791
Content-Type: text/plain; charset=ISO-8859-1

Hi,
I have a HitCollector that processes all hits from a query.  I want all
hits, not the top N hits.  I am converting my HitCollector to a Collector
for Lucene 3.0.0, and I'm a little confused by the new interface.

I assume that I can implement by new Collector much like the code on the API
Docs:

 Searcher searcher = new IndexSearcher(indexReader);
 final BitSet bits = new BitSet(indexReader.maxDoc());
 searcher.search(query, new Collector() {
   private int docBase;

   *// ignore scorer*
   public void setScorer(Scorer scorer) {
   }

   *// accept docs out of order (for a BitSet it doesn't matter)*
   public boolean acceptsDocsOutOfOrder() {
     return true;
   }

   public void collect(int doc) {
     bits.set(doc + docBase);
   }

   public void setNextReader(IndexReader reader, int docBase) {
     this.docBase = docBase;
   }
 });


But I'm confused what the docBasing is (I need to get fields from each
document from my index searcher).  Do I need to use the doc base or
setNextReader?  Also, what is the purpose of acceptsDocsOutOfOrder?  I
see the docs note on it but I'm not sure how I could apply that or if
I should care about it.

Thanks,
Max

--000e0cd13862128eee047a504791--

From java-user-return-44006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 09 21:17:46 2009
Return-Path: <java-user-return-44006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9928 invoked from network); 9 Dec 2009 21:17:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Dec 2009 21:17:46 -0000
Received: (qmail 21262 invoked by uid 500); 9 Dec 2009 21:17:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21193 invoked by uid 500); 9 Dec 2009 21:17:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21183 invoked by uid 99); 9 Dec 2009 21:17:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 21:17:44 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.211.182] (HELO mail-yw0-f182.google.com) (209.85.211.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 21:17:41 +0000
Received: by ywh12 with SMTP id 12so8723307ywh.21
        for <java-user@lucene.apache.org>; Wed, 09 Dec 2009 13:17:20 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.120.10 with SMTP id s10mr8888862ybc.12.1260393440215; Wed, 
	09 Dec 2009 13:17:20 -0800 (PST)
In-Reply-To: <85d3c3b60912090825k39da2c37q2d507a5dce21ade0@mail.gmail.com>
References: <85d3c3b60912081634j4bfa8cbdm3a3ad5286c3a9b70@mail.gmail.com>
	 <9ac0c6aa0912090223t55e9de63l3dde4fad36db96d0@mail.gmail.com>
	 <85d3c3b60912090825k39da2c37q2d507a5dce21ade0@mail.gmail.com>
Date: Wed, 9 Dec 2009 16:17:20 -0500
Message-ID: <9ac0c6aa0912091317v242bb434uf748a9b508f7fb0b@mail.gmail.com>
Subject: Re: NearSpansUnordered payloads not returning all the time
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

That sounds familiar... try to track down the last thread maybe?

I think it was this: if the payload was already retrieved for a prior
span then the current span won't be able to retrieve it, so even
though you know a payload falls within the span you're looking at, you
won't get it back, if it already fell on a prior span.

Mike

On Wed, Dec 9, 2009 at 11:25 AM, Jason Rutherglen
<jason.rutherglen@gmail.com> wrote:
> Right we're getting the spans, however it's just the payloads that are
> missing, randomly...
>
> On Wed, Dec 9, 2009 at 2:23 AM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>> There was a thread a while back about how span queries don't enumerate
>> every possible span, but I can't remember if that included sometimes
>> missing payloads...
>>
>> Mike
>>
>> On Tue, Dec 8, 2009 at 7:34 PM, Jason Rutherglen
>> <jason.rutherglen@gmail.com> wrote:
>>> Howdy,
>>>
>>> I am wondering if anyone has seen
>>> NearSpansUnordered.getPayload() not return payloads that are
>>> verifiably accessible via IR.termPositions? It's a bit confusing
>>> because most of the time they're returned properly.
>>>
>>> I suspect the payload logic gets tripped up in
>>> NearSpansUnordered. I'll put together a test case, however the
>>> difficulty is that we're only seeing the issue with largish 800
>>> MB indexes, which could make the test case a little crazy.
>>>
>>> Jason
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 09 21:57:11 2009
Return-Path: <java-user-return-44007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36628 invoked from network); 9 Dec 2009 21:57:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Dec 2009 21:57:11 -0000
Received: (qmail 95576 invoked by uid 500); 9 Dec 2009 21:57:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95499 invoked by uid 500); 9 Dec 2009 21:57:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95489 invoked by uid 99); 9 Dec 2009 21:57:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 21:57:09 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.160.46 as permitted sender)
Received: from [209.85.160.46] (HELO mail-pw0-f46.google.com) (209.85.160.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 21:56:59 +0000
Received: by pwj16 with SMTP id 16so2215162pwj.5
        for <java-user@lucene.apache.org>; Wed, 09 Dec 2009 13:56:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=CLqtpQAN/cGFZHJLBfi6uo+rP/ej/D+I59/6S0JS6lU=;
        b=VOSJ2fJmAOJcD0NPgCPjq2RwvylTO0iFLvOeTCgQrnR46851MgnpPvm+m17WLD3SG/
         CDrSaa4jIdK3l0B9AhkaYKrCVn5i56Rs963qTh0t7cILNYSg97KMXRjeXU2xrqho3fOy
         72qT7b7pVbQvZr3YMSX1kMbZHubKiSmapvG2c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=hhXoOpgsqyWtnwUQDP/pa7et9X6Kus3GeSPxhYe51kbfPhykeAbVaKEoOIGip7nkbV
         wxoEaE8uyKz0epL/AjfqjxULoZgfiSqe+ldrmHI20y7Mn/UEAJI9wlH2Kg3hHb0WKSh8
         iqSnHiMDCLN2MbEwmHXlAUKUE5jcJdivcshZk=
MIME-Version: 1.0
Received: by 10.141.213.30 with SMTP id p30mr594317rvq.162.1260395798178; Wed, 
	09 Dec 2009 13:56:38 -0800 (PST)
In-Reply-To: <9ac0c6aa0912091317v242bb434uf748a9b508f7fb0b@mail.gmail.com>
References: <85d3c3b60912081634j4bfa8cbdm3a3ad5286c3a9b70@mail.gmail.com>
	 <9ac0c6aa0912090223t55e9de63l3dde4fad36db96d0@mail.gmail.com>
	 <85d3c3b60912090825k39da2c37q2d507a5dce21ade0@mail.gmail.com>
	 <9ac0c6aa0912091317v242bb434uf748a9b508f7fb0b@mail.gmail.com>
Date: Wed, 9 Dec 2009 13:56:38 -0800
Message-ID: <85d3c3b60912091356t6c260c43gcaf0ede53d7a8f98@mail.gmail.com>
Subject: Re: NearSpansUnordered payloads not returning all the time
From: Jason Rutherglen <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Mike,

Is this the thread?

http://www.lucidimagination.com/search/document/1e87d488a904b89f/spannearquery_s_spans_payloads#8103efdc9705a763

Maybe we need a recommended workaround for this?

Jason

On Wed, Dec 9, 2009 at 1:17 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
> That sounds familiar... try to track down the last thread maybe?
>
> I think it was this: if the payload was already retrieved for a prior
> span then the current span won't be able to retrieve it, so even
> though you know a payload falls within the span you're looking at, you
> won't get it back, if it already fell on a prior span.
>
> Mike
>
> On Wed, Dec 9, 2009 at 11:25 AM, Jason Rutherglen
> <jason.rutherglen@gmail.com> wrote:
>> Right we're getting the spans, however it's just the payloads that are
>> missing, randomly...
>>
>> On Wed, Dec 9, 2009 at 2:23 AM, Michael McCandless
>> <lucene@mikemccandless.com> wrote:
>>> There was a thread a while back about how span queries don't enumerate
>>> every possible span, but I can't remember if that included sometimes
>>> missing payloads...
>>>
>>> Mike
>>>
>>> On Tue, Dec 8, 2009 at 7:34 PM, Jason Rutherglen
>>> <jason.rutherglen@gmail.com> wrote:
>>>> Howdy,
>>>>
>>>> I am wondering if anyone has seen
>>>> NearSpansUnordered.getPayload() not return payloads that are
>>>> verifiably accessible via IR.termPositions? It's a bit confusing
>>>> because most of the time they're returned properly.
>>>>
>>>> I suspect the payload logic gets tripped up in
>>>> NearSpansUnordered. I'll put together a test case, however the
>>>> difficulty is that we're only seeing the issue with largish 800
>>>> MB indexes, which could make the test case a little crazy.
>>>>
>>>> Jason
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 09 21:58:32 2009
Return-Path: <java-user-return-44008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37059 invoked from network); 9 Dec 2009 21:58:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Dec 2009 21:58:32 -0000
Received: (qmail 2187 invoked by uid 500); 9 Dec 2009 21:58:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2118 invoked by uid 500); 9 Dec 2009 21:58:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2108 invoked by uid 99); 9 Dec 2009 21:58:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 21:58:30 +0000
X-ASF-Spam-Status: No, hits=-0.6 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of moonwatcher32329@gmail.com designates 209.85.218.222 as permitted sender)
Received: from [209.85.218.222] (HELO mail-bw0-f222.google.com) (209.85.218.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 21:58:27 +0000
Received: by bwz22 with SMTP id 22so250284bwz.5
        for <java-user@lucene.apache.org>; Wed, 09 Dec 2009 13:58:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=fdsbY8I5ViL2yIYbl4TQtVcwdg2jQkTsw6tEH8nHEp4=;
        b=FDfq+uKp6DGybtSevz0z5GI5hhF02r7sBhXI/b7v4GKFyaLrT0MVyj8+Qbr+hXe8cN
         l/2oPPSSn6857mPZH16ZUWF+aFzGcp04p3OZva/pnWnWKzZlPG+VfY7CClPgVz/kyk4A
         OuHwt4fcn3mJOWyTNVGU39orLMqb4JkBEmy+A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=iLpcU+KaKpakbV4fcfJLod9JVp4k/DVKPI6qKLR2OFrHHA5C0lNtkL0qssosgeJDlR
         8Lzuhs8AQR0rtAl6SPQHETP2dpAwAo0trP8cmRjmSRVKj2g/Uk1jNCSwFM07VwdPKvmz
         2StIAYTJ7jW2NfbmBuVoJ02V+EENl7QLqJ7bI=
MIME-Version: 1.0
Received: by 10.204.34.88 with SMTP id k24mr1813165bkd.209.1260395885523; Wed, 
	09 Dec 2009 13:58:05 -0800 (PST)
In-Reply-To: <9ac0c6aa0912080243g4f7fab20q73b228cf1426a4ae@mail.gmail.com>
References: <17022a310912071327x6be7f6afjf45e0ab69269e47c@mail.gmail.com>
	 <359a92830912071337o3ed869dbv68576b704666b8df@mail.gmail.com>
	 <17022a310912071348m85926b0vbc0687e6085e79b5@mail.gmail.com>
	 <660086cb0912071638h6c6e10e1u4899889bc9a4ed74@mail.gmail.com>
	 <9ac0c6aa0912080236j5d3a87d1jbce8558fba738765@mail.gmail.com>
	 <9ac0c6aa0912080243g4f7fab20q73b228cf1426a4ae@mail.gmail.com>
Date: Wed, 9 Dec 2009 16:58:05 -0500
Message-ID: <17022a310912091358y20f4eebbt7bcd0253cb8add04@mail.gmail.com>
Subject: Re: heap memory issues when sorting by a string field
From: TCK <moonwatcher32329@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00032555ae9a08742b047a52c9ea

--00032555ae9a08742b047a52c9ea
Content-Type: text/plain; charset=ISO-8859-1

Thanks Mike for opening this jira ticket and for your patch. Explicitly
removing the entry from the WHM definitely does reduce the number of GC
cycles taken to free the huge StringIndex objects that get created when
doing a sort by a string field.

But I'm still trying to figure out why it is necessary for lucene to load
into memory the sorted-by field of every single document in the index (which
is what makes the StringIndex objects so big) on the first query. Why isn't
it sufficient to load the field values for only the documents that match the
given search criteria? Perhaps by using an order-maintenance data structure
(Dietz&Sleator, or Bender et al) coupled with a balanced search tree,
instead of the simple lookup and order arrays currently used in StringIndex,
we can dynamically grow it as needed by successive queries rather than
loading everything on the first query.

Apologies if this is a naive question... I'm a newbie to the lucene code and
can't wait for the new lucene book to come out:-)

-TCK




On Tue, Dec 8, 2009 at 5:43 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> I've opened LUCENE-2135.
>
> Mike
>
> On Tue, Dec 8, 2009 at 5:36 AM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
> > This is a rather disturbing implementation detail of WeakHashMap, that
> > it needs the one extra step (invoking one of its methods) for its weak
> > keys to be reclaimable.
> >
> > Maybe on IndexReader.close(), Lucene should go and evict all entries
> > in the FieldCache associated with that reader.  Ie, step through the
> > sub-readers, and if they are truly closed as well (not shared w/ other
> > readers), evict.  I'll open an issue.
> >
> > Even in TCK's code fragment, it's not until the final line is done
> > executing, that the cache key even loses all hard references, because
> > it's that line that assigns to sSearcher, replacing the strong
> > reference to the old searcher.  Inserting sSearcher = null prior to
> > that would drop the hard reference sooner, but because of this impl
> > detail of WeakHashMap, something would still have to touch it (eg, a
> > warmup query that hits the field cache) before it's reclaimable.
> >
> > Mike
> >
> > On Mon, Dec 7, 2009 at 7:38 PM, Tom Hill <solr-list@worldware.com>
> wrote:
> >> Hi -
> >>
> >> If I understand correctly, WeakHashMap does not free the memory for the
> >> value (cached data) when the key is nulled, or even when the key is
> garbage
> >> collected.
> >>
> >> It requires one more step: a method on WeakHashMap must be called to
> allow
> >> it to release its hard reference to the cached data. It appears that
> most
> >> methods in WeakHashMap end up calling expungeStaleEntries, which will
> clear
> >> the hard reference. But you have to call some method on the map, before
> the
> >> memory is eligible for garbage collection.
> >>
> >> So it requires four stages to free the cached data. Null the key; A GC
> to
> >> release the weak reference to the key; A call to some method on the map;
> >> Then the next GC cycle should free the value.
> >>
> >> So it seems possible that you could end up with double memory usage for
> a
> >> time. If you don't have a GC between the time that you close the old
> reader,
> >> and you start to load the field cache entry for the next reader, then
> the
> >> key may still be hanging around uncollected.
> >>
> >> At that point, it may run a GC when you allocate the new cache, but
> that's
> >> only the first GC. It can't free the cached data until after the next
> call
> >> to expungeStaleEntries, so for a while you have both caches around.
> >>
> >> This extra usage could cause things to move into tenured space. Could
> this
> >> be causing your problem?
> >>
> >> Workaround would be to cause some method to be called on the
> WeakHashMap.
> >> You don't want to call get(), since that will try to populate the cache.
> >> Maybe if you tried putting a small value to the cache, and doing a GC,
> and
> >> see if your memory drops then.
> >>
> >>
> >> Tom
> >>
> >>
> >>
> >> On Mon, Dec 7, 2009 at 1:48 PM, TCK <moonwatcher32329@gmail.com> wrote:
> >>
> >>> Thanks for the response. But I'm definitely calling close() on the old
> >>> reader and opening a new one (not using reopen). Also, to simplify the
> >>> analysis, I did my test with a single-threaded requester to eliminate
> any
> >>> concurrency issues.
> >>>
> >>> I'm doing:
> >>> sSearcher.getIndexReader().close();
> >>> sSearcher.close(); // this actually seems to be a no-op
> >>> IndexReader newIndexReader = IndexReader.open(newDirectory);
> >>> sSearcher = new IndexSearcher(newIndexReader);
> >>>
> >>> Btw, isn't it bad practice anyway to have an unbounded cache? Are there
> any
> >>> plans to replace the HashMaps used for the innerCaches with an actual
> >>> size-bounded cache with some eviction policy (perhaps EhCache or
> something)
> >>> ?
> >>>
> >>> Thanks again,
> >>> TCK
> >>>
> >>>
> >>>
> >>>
> >>> On Mon, Dec 7, 2009 at 4:37 PM, Erick Erickson <
> erickerickson@gmail.com
> >>> >wrote:
> >>>
> >>> > What this sounds like is that you're not really closing your
> >>> > readers even though you think you are. Sorting indeed uses up
> >>> > significant memory when it populates internal caches and keeps
> >>> > it around for later use (which is one of the reasons that warming
> >>> > queries matter). But if you really do close the reader, I'm pretty
> >>> > sure the memory should be GC-able.
> >>> >
> >>> > One thing that trips people up is IndexReader.reopen(). If it
> >>> > returns a reader different than the original, you *must* close the
> >>> > old one. If you don't, the old reader is still hanging around and
> >>> > memory won't be returne.... An example from the Javadocs...
> >>> >
> >>> >  IndexReader reader = ...
> >>> >  ...
> >>> >  IndexReader new = r.reopen();
> >>> >  if (new != reader) {
> >>> >   ...     // reader was reopened
> >>> >   reader.close();
> >>> >  }
> >>> >  reader = new;
> >>> >  ...
> >>> >
> >>> >
> >>> > If this is irrelevant, could you post your close/open
> >>> >
> >>> > code?
> >>> >
> >>> > HTH
> >>> >
> >>> > Erick
> >>> >
> >>> >
> >>> > On Mon, Dec 7, 2009 at 4:27 PM, TCK <moonwatcher32329@gmail.com>
> wrote:
> >>> >
> >>> > > Hi,
> >>> > > I'm having heap memory issues when I do lucene queries involving
> >>> sorting
> >>> > by
> >>> > > a string field. Such queries seem to load a lot of data in to the
> heap.
> >>> > > Moreover lucene seems to hold on to references to this data even
> after
> >>> > the
> >>> > > index reader has been closed and a full GC has been run. Some of
> the
> >>> > > consequences of this are that in my generational heap configuration
> a
> >>> lot
> >>> > > of
> >>> > > memory gets promoted to tenured space each time I close the old
> index
> >>> > > reader
> >>> > > and after opening and querying using a new one, and the tenured
> space
> >>> > > eventually gets fragmented causing a lot of promotion failures
> >>> resulting
> >>> > in
> >>> > > jvm hangs while the jvm does stop-the-world GCs.
> >>> > >
> >>> > > Does anyone know any workarounds to avoid these memory issues when
> >>> doing
> >>> > > such lucene queries?
> >>> > >
> >>> > > My profiling showed that even after a full GC lucene is holding on
> to a
> >>> > lot
> >>> > > of references to field value data notably via the
> >>> > > FieldCacheImpl/ExtendedFieldCacheImpl. I noticed that the
> WeakHashMap
> >>> > > readerCaches are using unbounded HashMaps as the innerCaches and I
> used
> >>> > > reflection to replace these innerCaches with dummy empty HashMaps,
> but
> >>> > > still
> >>> > > I'm seeing the same behavior. I wondered if anyone has gone through
> >>> these
> >>> > > same issues before and would offer any advice.
> >>> > >
> >>> > > Thanks a lot,
> >>> > > TCK
> >>> > >
> >>> >
> >>>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00032555ae9a08742b047a52c9ea--

From java-user-return-44009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 09 22:23:13 2009
Return-Path: <java-user-return-44009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50439 invoked from network); 9 Dec 2009 22:23:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Dec 2009 22:23:13 -0000
Received: (qmail 32801 invoked by uid 500); 9 Dec 2009 22:23:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32729 invoked by uid 500); 9 Dec 2009 22:23:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32719 invoked by uid 99); 9 Dec 2009 22:23:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 22:23:10 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 22:23:08 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 4ABA1D36003
	for <java-user@lucene.apache.org>; Wed,  9 Dec 2009 23:22:46 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id ja1daw1DW6bs for <java-user@lucene.apache.org>;
	Wed,  9 Dec 2009 23:22:36 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 0F3C1D36001
	for <java-user@lucene.apache.org>; Wed,  9 Dec 2009 23:22:36 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <9fad81fd0912091048y8bf5fc1qe9bd408a99220eae@mail.gmail.com>
Subject: RE: MatchAllDocsQuery and InstantiatedIndex on Lucene 2.9.1
Date: Wed, 9 Dec 2009 23:22:33 +0100
Message-ID: <467107581D194DA996B89CCA45E93D31@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <9fad81fd0912091048y8bf5fc1qe9bd408a99220eae@mail.gmail.com>
Thread-index: Acp5AEDxYc5nTGr2QPidS1KQVoOxSgAHa2HQ
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579

This is a bug in InstantiatedIndex. The termDoc(null) was added to get all
documents. This was never implemented in Instantiated Index. Can you open an
issue?

There maybe other queries fail because of this (e.g.
FieldCacheRangeFilter,...).

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Jason Fennell [mailto:jdfennell@gmail.com]
> Sent: Wednesday, December 09, 2009 7:48 PM
> To: java-user@lucene.apache.org
> Subject: MatchAllDocsQuery and InstantiatedIndex on Lucene 2.9.1
> 
> I'm trying to upgrade our application from Lucene 2.4.1 to Lucene 2.9.1.
> I've been using an InstantiatedIndex to do a bunch of unit testing, but am
> running into a some problems with Lucene 2.9.1.
> In particular, when I try to run a MatchAllDocsQuery on my
> InstantiatedIndex
> (which worked fine on 2.4.1) a NullPointerException is raised.  I think I
> tracked down the problem in the Lucene source.
> 
> In the 2.9.1 MatchAllDocsQuery, the MatchAllScorer retrieves termDocs from
> the IndexReader passed to it with
> 
> reader.termDocs(null)
> 
> which I assume is supposed to return all termDocs.  However, tracing this
> call down
> 
> IndexReader.termDocs(term) calls InstantiatedTermDocs.seek(
> term) calls InstantiatedIndex.findTerm(term)
> 
> which is implemented as
> 
> InstantiatedTerm findTerm(Term term) {
>     return findTerm(term.field(), term.text());
> }
> 
> which, since term is null, results in a NullPointerException.  This seems
> to
> me like an bug either in the MatchAllDocsQuery implementation (the version
> in 2.4.1 did not use termDocs, so did not pass through this null), or a
> bug
> in the implementation of InstantiatedIndex.
> 
> Any suggestions on what I can do about this?  I definitely can't get rid
> of
> the MatchAllDocsQuery and don't really want to move back to a slow
> RAMDirectory.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 09 22:26:04 2009
Return-Path: <java-user-return-44010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52001 invoked from network); 9 Dec 2009 22:26:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Dec 2009 22:26:03 -0000
Received: (qmail 41405 invoked by uid 500); 9 Dec 2009 22:26:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41328 invoked by uid 500); 9 Dec 2009 22:26:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41318 invoked by uid 99); 9 Dec 2009 22:26:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 22:26:01 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.217.216] (HELO mail-gx0-f216.google.com) (209.85.217.216)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 22:25:51 +0000
Received: by gxk8 with SMTP id 8so6568768gxk.11
        for <java-user@lucene.apache.org>; Wed, 09 Dec 2009 14:25:29 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.173.7 with SMTP id v7mr17517397ybe.9.1260397529799; Wed, 
	09 Dec 2009 14:25:29 -0800 (PST)
In-Reply-To: <85d3c3b60912091356t6c260c43gcaf0ede53d7a8f98@mail.gmail.com>
References: <85d3c3b60912081634j4bfa8cbdm3a3ad5286c3a9b70@mail.gmail.com>
	 <9ac0c6aa0912090223t55e9de63l3dde4fad36db96d0@mail.gmail.com>
	 <85d3c3b60912090825k39da2c37q2d507a5dce21ade0@mail.gmail.com>
	 <9ac0c6aa0912091317v242bb434uf748a9b508f7fb0b@mail.gmail.com>
	 <85d3c3b60912091356t6c260c43gcaf0ede53d7a8f98@mail.gmail.com>
Date: Wed, 9 Dec 2009 17:25:29 -0500
Message-ID: <9ac0c6aa0912091425i6f6b51f3p9b8be471a952336d@mail.gmail.com>
Subject: Re: NearSpansUnordered payloads not returning all the time
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, you found it!  Is that what you're hitting?

I don't know of a workaround though... this is just how SpanQuery
currently works...

Mike

On Wed, Dec 9, 2009 at 4:56 PM, Jason Rutherglen
<jason.rutherglen@gmail.com> wrote:
> Mike,
>
> Is this the thread?
>
> http://www.lucidimagination.com/search/document/1e87d488a904b89f/spannearquery_s_spans_payloads#8103efdc9705a763
>
> Maybe we need a recommended workaround for this?
>
> Jason
>
> On Wed, Dec 9, 2009 at 1:17 PM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>> That sounds familiar... try to track down the last thread maybe?
>>
>> I think it was this: if the payload was already retrieved for a prior
>> span then the current span won't be able to retrieve it, so even
>> though you know a payload falls within the span you're looking at, you
>> won't get it back, if it already fell on a prior span.
>>
>> Mike
>>
>> On Wed, Dec 9, 2009 at 11:25 AM, Jason Rutherglen
>> <jason.rutherglen@gmail.com> wrote:
>>> Right we're getting the spans, however it's just the payloads that are
>>> missing, randomly...
>>>
>>> On Wed, Dec 9, 2009 at 2:23 AM, Michael McCandless
>>> <lucene@mikemccandless.com> wrote:
>>>> There was a thread a while back about how span queries don't enumerate
>>>> every possible span, but I can't remember if that included sometimes
>>>> missing payloads...
>>>>
>>>> Mike
>>>>
>>>> On Tue, Dec 8, 2009 at 7:34 PM, Jason Rutherglen
>>>> <jason.rutherglen@gmail.com> wrote:
>>>>> Howdy,
>>>>>
>>>>> I am wondering if anyone has seen
>>>>> NearSpansUnordered.getPayload() not return payloads that are
>>>>> verifiably accessible via IR.termPositions? It's a bit confusing
>>>>> because most of the time they're returned properly.
>>>>>
>>>>> I suspect the payload logic gets tripped up in
>>>>> NearSpansUnordered. I'll put together a test case, however the
>>>>> difficulty is that we're only seeing the issue with largish 800
>>>>> MB indexes, which could make the test case a little crazy.
>>>>>
>>>>> Jason
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 09 22:44:46 2009
Return-Path: <java-user-return-44011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57781 invoked from network); 9 Dec 2009 22:44:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Dec 2009 22:44:46 -0000
Received: (qmail 55226 invoked by uid 500); 9 Dec 2009 22:44:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55145 invoked by uid 500); 9 Dec 2009 22:44:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55135 invoked by uid 99); 9 Dec 2009 22:44:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 22:44:43 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.211.182] (HELO mail-yw0-f182.google.com) (209.85.211.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 22:44:34 +0000
Received: by ywh12 with SMTP id 12so8800891ywh.21
        for <java-user@lucene.apache.org>; Wed, 09 Dec 2009 14:44:13 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.44.2 with SMTP id r2mr3613928ybr.77.1260398652685; Wed, 09 
	Dec 2009 14:44:12 -0800 (PST)
In-Reply-To: <17022a310912091358y20f4eebbt7bcd0253cb8add04@mail.gmail.com>
References: <17022a310912071327x6be7f6afjf45e0ab69269e47c@mail.gmail.com>
	 <359a92830912071337o3ed869dbv68576b704666b8df@mail.gmail.com>
	 <17022a310912071348m85926b0vbc0687e6085e79b5@mail.gmail.com>
	 <660086cb0912071638h6c6e10e1u4899889bc9a4ed74@mail.gmail.com>
	 <9ac0c6aa0912080236j5d3a87d1jbce8558fba738765@mail.gmail.com>
	 <9ac0c6aa0912080243g4f7fab20q73b228cf1426a4ae@mail.gmail.com>
	 <17022a310912091358y20f4eebbt7bcd0253cb8add04@mail.gmail.com>
Date: Wed, 9 Dec 2009 17:44:12 -0500
Message-ID: <9ac0c6aa0912091444g4dc0b0f9n19485948aee01d49@mail.gmail.com>
Subject: Re: heap memory issues when sorting by a string field
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

It's not that it's "necessary" -- this is just how Lucene's sorting
has always worked ;)  But, it's just software!  You could whip up a
patch...

I'm not familiar with the order-maintenance problem & solutions
offhand, but it certainly sounds interesting.

One issue is that loading only certain values on demand (from disk)
can be costly, eg it requires multiple disk head seeks (though, SSDs
will help here, though it's still maybe several order of magnitudes
slower than RAM (as long as the RAM isn't swapped out).

I think Lucene could cut back on the RAM usage by more compactly
representing the values.  Making separate String per value is alot of
overhead...

Mike

On Wed, Dec 9, 2009 at 4:58 PM, TCK <moonwatcher32329@gmail.com> wrote:
> Thanks Mike for opening this jira ticket and for your patch. Explicitly
> removing the entry from the WHM definitely does reduce the number of GC
> cycles taken to free the huge StringIndex objects that get created when
> doing a sort by a string field.
>
> But I'm still trying to figure out why it is necessary for lucene to load
> into memory the sorted-by field of every single document in the index (wh=
ich
> is what makes the StringIndex objects so big) on the first query. Why isn=
't
> it sufficient to load the field values for only the documents that match =
the
> given search criteria? Perhaps by using an order-maintenance data structu=
re
> (Dietz&Sleator, or Bender et al) coupled with a balanced search tree,
> instead of the simple lookup and order arrays currently used in StringInd=
ex,
> we can dynamically grow it as needed by successive queries rather than
> loading everything on the first query.
>
> Apologies if this is a naive question... I'm a newbie to the lucene code =
and
> can't wait for the new lucene book to come out:-)
>
> -TCK
>
>
>
>
> On Tue, Dec 8, 2009 at 5:43 AM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>> I've opened LUCENE-2135.
>>
>> Mike
>>
>> On Tue, Dec 8, 2009 at 5:36 AM, Michael McCandless
>> <lucene@mikemccandless.com> wrote:
>> > This is a rather disturbing implementation detail of WeakHashMap, that
>> > it needs the one extra step (invoking one of its methods) for its weak
>> > keys to be reclaimable.
>> >
>> > Maybe on IndexReader.close(), Lucene should go and evict all entries
>> > in the FieldCache associated with that reader. =A0Ie, step through the
>> > sub-readers, and if they are truly closed as well (not shared w/ other
>> > readers), evict. =A0I'll open an issue.
>> >
>> > Even in TCK's code fragment, it's not until the final line is done
>> > executing, that the cache key even loses all hard references, because
>> > it's that line that assigns to sSearcher, replacing the strong
>> > reference to the old searcher. =A0Inserting sSearcher =3D null prior t=
o
>> > that would drop the hard reference sooner, but because of this impl
>> > detail of WeakHashMap, something would still have to touch it (eg, a
>> > warmup query that hits the field cache) before it's reclaimable.
>> >
>> > Mike
>> >
>> > On Mon, Dec 7, 2009 at 7:38 PM, Tom Hill <solr-list@worldware.com>
>> wrote:
>> >> Hi -
>> >>
>> >> If I understand correctly, WeakHashMap does not free the memory for t=
he
>> >> value (cached data) when the key is nulled, or even when the key is
>> garbage
>> >> collected.
>> >>
>> >> It requires one more step: a method on WeakHashMap must be called to
>> allow
>> >> it to release its hard reference to the cached data. It appears that
>> most
>> >> methods in WeakHashMap end up calling expungeStaleEntries, which will
>> clear
>> >> the hard reference. But you have to call some method on the map, befo=
re
>> the
>> >> memory is eligible for garbage collection.
>> >>
>> >> So it requires four stages to free the cached data. Null the key; A G=
C
>> to
>> >> release the weak reference to the key; A call to some method on the m=
ap;
>> >> Then the next GC cycle should free the value.
>> >>
>> >> So it seems possible that you could end up with double memory usage f=
or
>> a
>> >> time. If you don't have a GC between the time that you close the old
>> reader,
>> >> and you start to load the field cache entry for the next reader, then
>> the
>> >> key may still be hanging around uncollected.
>> >>
>> >> At that point, it may run a GC when you allocate the new cache, but
>> that's
>> >> only the first GC. It can't free the cached data until after the next
>> call
>> >> to expungeStaleEntries, so for a while you have both caches around.
>> >>
>> >> This extra usage could cause things to move into tenured space. Could
>> this
>> >> be causing your problem?
>> >>
>> >> Workaround would be to cause some method to be called on the
>> WeakHashMap.
>> >> You don't want to call get(), since that will try to populate the cac=
he.
>> >> Maybe if you tried putting a small value to the cache, and doing a GC=
,
>> and
>> >> see if your memory drops then.
>> >>
>> >>
>> >> Tom
>> >>
>> >>
>> >>
>> >> On Mon, Dec 7, 2009 at 1:48 PM, TCK <moonwatcher32329@gmail.com> wrot=
e:
>> >>
>> >>> Thanks for the response. But I'm definitely calling close() on the o=
ld
>> >>> reader and opening a new one (not using reopen). Also, to simplify t=
he
>> >>> analysis, I did my test with a single-threaded requester to eliminat=
e
>> any
>> >>> concurrency issues.
>> >>>
>> >>> I'm doing:
>> >>> sSearcher.getIndexReader().close();
>> >>> sSearcher.close(); // this actually seems to be a no-op
>> >>> IndexReader newIndexReader =3D IndexReader.open(newDirectory);
>> >>> sSearcher =3D new IndexSearcher(newIndexReader);
>> >>>
>> >>> Btw, isn't it bad practice anyway to have an unbounded cache? Are th=
ere
>> any
>> >>> plans to replace the HashMaps used for the innerCaches with an actua=
l
>> >>> size-bounded cache with some eviction policy (perhaps EhCache or
>> something)
>> >>> ?
>> >>>
>> >>> Thanks again,
>> >>> TCK
>> >>>
>> >>>
>> >>>
>> >>>
>> >>> On Mon, Dec 7, 2009 at 4:37 PM, Erick Erickson <
>> erickerickson@gmail.com
>> >>> >wrote:
>> >>>
>> >>> > What this sounds like is that you're not really closing your
>> >>> > readers even though you think you are. Sorting indeed uses up
>> >>> > significant memory when it populates internal caches and keeps
>> >>> > it around for later use (which is one of the reasons that warming
>> >>> > queries matter). But if you really do close the reader, I'm pretty
>> >>> > sure the memory should be GC-able.
>> >>> >
>> >>> > One thing that trips people up is IndexReader.reopen(). If it
>> >>> > returns a reader different than the original, you *must* close the
>> >>> > old one. If you don't, the old reader is still hanging around and
>> >>> > memory won't be returne.... An example from the Javadocs...
>> >>> >
>> >>> > =A0IndexReader reader =3D ...
>> >>> > =A0...
>> >>> > =A0IndexReader new =3D r.reopen();
>> >>> > =A0if (new !=3D reader) {
>> >>> > =A0 ... =A0 =A0 // reader was reopened
>> >>> > =A0 reader.close();
>> >>> > =A0}
>> >>> > =A0reader =3D new;
>> >>> > =A0...
>> >>> >
>> >>> >
>> >>> > If this is irrelevant, could you post your close/open
>> >>> >
>> >>> > code?
>> >>> >
>> >>> > HTH
>> >>> >
>> >>> > Erick
>> >>> >
>> >>> >
>> >>> > On Mon, Dec 7, 2009 at 4:27 PM, TCK <moonwatcher32329@gmail.com>
>> wrote:
>> >>> >
>> >>> > > Hi,
>> >>> > > I'm having heap memory issues when I do lucene queries involving
>> >>> sorting
>> >>> > by
>> >>> > > a string field. Such queries seem to load a lot of data in to th=
e
>> heap.
>> >>> > > Moreover lucene seems to hold on to references to this data even
>> after
>> >>> > the
>> >>> > > index reader has been closed and a full GC has been run. Some of
>> the
>> >>> > > consequences of this are that in my generational heap configurat=
ion
>> a
>> >>> lot
>> >>> > > of
>> >>> > > memory gets promoted to tenured space each time I close the old
>> index
>> >>> > > reader
>> >>> > > and after opening and querying using a new one, and the tenured
>> space
>> >>> > > eventually gets fragmented causing a lot of promotion failures
>> >>> resulting
>> >>> > in
>> >>> > > jvm hangs while the jvm does stop-the-world GCs.
>> >>> > >
>> >>> > > Does anyone know any workarounds to avoid these memory issues wh=
en
>> >>> doing
>> >>> > > such lucene queries?
>> >>> > >
>> >>> > > My profiling showed that even after a full GC lucene is holding =
on
>> to a
>> >>> > lot
>> >>> > > of references to field value data notably via the
>> >>> > > FieldCacheImpl/ExtendedFieldCacheImpl. I noticed that the
>> WeakHashMap
>> >>> > > readerCaches are using unbounded HashMaps as the innerCaches and=
 I
>> used
>> >>> > > reflection to replace these innerCaches with dummy empty HashMap=
s,
>> but
>> >>> > > still
>> >>> > > I'm seeing the same behavior. I wondered if anyone has gone thro=
ugh
>> >>> these
>> >>> > > same issues before and would offer any advice.
>> >>> > >
>> >>> > > Thanks a lot,
>> >>> > > TCK
>> >>> > >
>> >>> >
>> >>>
>> >>
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 09 23:46:33 2009
Return-Path: <java-user-return-44012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71097 invoked from network); 9 Dec 2009 23:46:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 9 Dec 2009 23:46:33 -0000
Received: (qmail 21073 invoked by uid 500); 9 Dec 2009 23:46:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21001 invoked by uid 500); 9 Dec 2009 23:46:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20991 invoked by uid 99); 9 Dec 2009 23:46:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 23:46:31 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Dec 2009 23:46:28 +0000
Received: from SBMAILBOX1.sb.statsbiblioteket.dk ([10.150.5.1]) by
 sbexch03.sb.statsbiblioteket.dk ([10.150.5.3]) with mapi; Thu, 10 Dec 2009
 00:46:05 +0100
From: Toke Eskildsen <te@statsbiblioteket.dk>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 10 Dec 2009 00:46:04 +0100
Subject: RE: heap memory issues when sorting by a string field
Thread-Topic: heap memory issues when sorting by a string field
Thread-Index: Acp5GsuR8L7XY20zSeuIaF6eFhojfQADNilj
Message-ID: <2E6A89A648463A4EBF093A9062C16683013484F9F742@SBMAILBOX1.sb.statsbiblioteket.dk>
References: <17022a310912071327x6be7f6afjf45e0ab69269e47c@mail.gmail.com>
	 <359a92830912071337o3ed869dbv68576b704666b8df@mail.gmail.com>
	 <17022a310912071348m85926b0vbc0687e6085e79b5@mail.gmail.com>
	 <660086cb0912071638h6c6e10e1u4899889bc9a4ed74@mail.gmail.com>
	 <9ac0c6aa0912080236j5d3a87d1jbce8558fba738765@mail.gmail.com>
	 <9ac0c6aa0912080243g4f7fab20q73b228cf1426a4ae@mail.gmail.com>,<17022a310912091358y20f4eebbt7bcd0253cb8add04@mail.gmail.com>
In-Reply-To: <17022a310912091358y20f4eebbt7bcd0253cb8add04@mail.gmail.com>
Accept-Language: en-US, da-DK
Content-Language: en-GB
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US, da-DK
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

Thanks for the heads-up, TCK. The Dietz & Sleator article I found at=20
http://www.cs.cmu.edu/~sleator/papers/maintaining-order.pdf
looks very interesting.

String sorting in Lucene is indeed fairly expensive and we've experimented =
with
two solutions to this, none of which are golden bullets.

1) Store the order, not the content.

Like the Lucene default sorter, we fetch all the terms for the sort field o=
n first
sort. The docIDs are mapped to the terms and an complete sort is performed=
=20
(by using a custom Collator: We want to avoid using CollationKeys as they
take too much memory. But that's another story). When the sort is finished,
we have an integer-array where each entry is the relative position for a gi=
ven
document (referenced by docID). We then de-reference the loaded terms
so that the memory is freed.

Determining the order of two documents after the initial build is extremely
simple: order[docIDa] - order[docIDb] (or maybe it was the other way=20
around, I forget).

Cons: Large temporarily memory overhead upon initial sort, though not as=20
much as using CollationKeys. Slower initial sort than Lucene build-in.
Pros: Very fast subsequent sorts, very low memory-overhead when running.
Joker: This approach could be used to perform a post-processing on a=20
generated index and storing the orders as a file along with the index, then=
=20
pushing the complete package to searchers. This would lower the memory
requirements for the searchers significantly.


2) As above, but use a multipass order builder.

For the first sort, the order must be calculated: A sliding window sorter i=
s created=20
with a buffer of a fixed size. The window slides through all terms for the =
sort field=20
and extracts the top X. The order-array is updated for the documents that h=
as=20
one of these terms. The sliding is repeated multiple times, where terms ord=
ered=20
before the last term of the previous iteration are ignored.

Cons: _Very_ slow (too slow in the current implementation) order build.
Pros: Same as above.
Joker: The buffer size determines memory use vs. order build time.


The multipass approach looks promising, but requires more work to get to a
usable state. Right now it takes minutes to build the order-array for half =
a=20
million documents, with a buffer size requiring 5 iterations. If I ever get=
 it to
work, I'll be sure to share it.

Regards,
Toke Eskildsen

________________________________________
From: TCK [moonwatcher32329@gmail.com]
Sent: 09 December 2009 22:58
To: java-user@lucene.apache.org
Subject: Re: heap memory issues when sorting by a string field

Thanks Mike for opening this jira ticket and for your patch. Explicitly
removing the entry from the WHM definitely does reduce the number of GC
cycles taken to free the huge StringIndex objects that get created when
doing a sort by a string field.

But I'm still trying to figure out why it is necessary for lucene to load
into memory the sorted-by field of every single document in the index (whic=
h
is what makes the StringIndex objects so big) on the first query. Why isn't
it sufficient to load the field values for only the documents that match th=
e
given search criteria? Perhaps by using an order-maintenance data structure
(Dietz&Sleator, or Bender et al) coupled with a balanced search tree,
instead of the simple lookup and order arrays currently used in StringIndex=
,
we can dynamically grow it as needed by successive queries rather than
loading everything on the first query.

Apologies if this is a naive question... I'm a newbie to the lucene code an=
d
can't wait for the new lucene book to come out:-)

-TCK




On Tue, Dec 8, 2009 at 5:43 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> I've opened LUCENE-2135.
>
> Mike
>
> On Tue, Dec 8, 2009 at 5:36 AM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
> > This is a rather disturbing implementation detail of WeakHashMap, that
> > it needs the one extra step (invoking one of its methods) for its weak
> > keys to be reclaimable.
> >
> > Maybe on IndexReader.close(), Lucene should go and evict all entries
> > in the FieldCache associated with that reader.  Ie, step through the
> > sub-readers, and if they are truly closed as well (not shared w/ other
> > readers), evict.  I'll open an issue.
> >
> > Even in TCK's code fragment, it's not until the final line is done
> > executing, that the cache key even loses all hard references, because
> > it's that line that assigns to sSearcher, replacing the strong
> > reference to the old searcher.  Inserting sSearcher =3D null prior to
> > that would drop the hard reference sooner, but because of this impl
> > detail of WeakHashMap, something would still have to touch it (eg, a
> > warmup query that hits the field cache) before it's reclaimable.
> >
> > Mike
> >
> > On Mon, Dec 7, 2009 at 7:38 PM, Tom Hill <solr-list@worldware.com>
> wrote:
> >> Hi -
> >>
> >> If I understand correctly, WeakHashMap does not free the memory for th=
e
> >> value (cached data) when the key is nulled, or even when the key is
> garbage
> >> collected.
> >>
> >> It requires one more step: a method on WeakHashMap must be called to
> allow
> >> it to release its hard reference to the cached data. It appears that
> most
> >> methods in WeakHashMap end up calling expungeStaleEntries, which will
> clear
> >> the hard reference. But you have to call some method on the map, befor=
e
> the
> >> memory is eligible for garbage collection.
> >>
> >> So it requires four stages to free the cached data. Null the key; A GC
> to
> >> release the weak reference to the key; A call to some method on the ma=
p;
> >> Then the next GC cycle should free the value.
> >>
> >> So it seems possible that you could end up with double memory usage fo=
r
> a
> >> time. If you don't have a GC between the time that you close the old
> reader,
> >> and you start to load the field cache entry for the next reader, then
> the
> >> key may still be hanging around uncollected.
> >>
> >> At that point, it may run a GC when you allocate the new cache, but
> that's
> >> only the first GC. It can't free the cached data until after the next
> call
> >> to expungeStaleEntries, so for a while you have both caches around.
> >>
> >> This extra usage could cause things to move into tenured space. Could
> this
> >> be causing your problem?
> >>
> >> Workaround would be to cause some method to be called on the
> WeakHashMap.
> >> You don't want to call get(), since that will try to populate the cach=
e.
> >> Maybe if you tried putting a small value to the cache, and doing a GC,
> and
> >> see if your memory drops then.
> >>
> >>
> >> Tom
> >>
> >>
> >>
> >> On Mon, Dec 7, 2009 at 1:48 PM, TCK <moonwatcher32329@gmail.com> wrote=
:
> >>
> >>> Thanks for the response. But I'm definitely calling close() on the ol=
d
> >>> reader and opening a new one (not using reopen). Also, to simplify th=
e
> >>> analysis, I did my test with a single-threaded requester to eliminate
> any
> >>> concurrency issues.
> >>>
> >>> I'm doing:
> >>> sSearcher.getIndexReader().close();
> >>> sSearcher.close(); // this actually seems to be a no-op
> >>> IndexReader newIndexReader =3D IndexReader.open(newDirectory);
> >>> sSearcher =3D new IndexSearcher(newIndexReader);
> >>>
> >>> Btw, isn't it bad practice anyway to have an unbounded cache? Are the=
re
> any
> >>> plans to replace the HashMaps used for the innerCaches with an actual
> >>> size-bounded cache with some eviction policy (perhaps EhCache or
> something)
> >>> ?
> >>>
> >>> Thanks again,
> >>> TCK
> >>>
> >>>
> >>>
> >>>
> >>> On Mon, Dec 7, 2009 at 4:37 PM, Erick Erickson <
> erickerickson@gmail.com
> >>> >wrote:
> >>>
> >>> > What this sounds like is that you're not really closing your
> >>> > readers even though you think you are. Sorting indeed uses up
> >>> > significant memory when it populates internal caches and keeps
> >>> > it around for later use (which is one of the reasons that warming
> >>> > queries matter). But if you really do close the reader, I'm pretty
> >>> > sure the memory should be GC-able.
> >>> >
> >>> > One thing that trips people up is IndexReader.reopen(). If it
> >>> > returns a reader different than the original, you *must* close the
> >>> > old one. If you don't, the old reader is still hanging around and
> >>> > memory won't be returne.... An example from the Javadocs...
> >>> >
> >>> >  IndexReader reader =3D ...
> >>> >  ...
> >>> >  IndexReader new =3D r.reopen();
> >>> >  if (new !=3D reader) {
> >>> >   ...     // reader was reopened
> >>> >   reader.close();
> >>> >  }
> >>> >  reader =3D new;
> >>> >  ...
> >>> >
> >>> >
> >>> > If this is irrelevant, could you post your close/open
> >>> >
> >>> > code?
> >>> >
> >>> > HTH
> >>> >
> >>> > Erick
> >>> >
> >>> >
> >>> > On Mon, Dec 7, 2009 at 4:27 PM, TCK <moonwatcher32329@gmail.com>
> wrote:
> >>> >
> >>> > > Hi,
> >>> > > I'm having heap memory issues when I do lucene queries involving
> >>> sorting
> >>> > by
> >>> > > a string field. Such queries seem to load a lot of data in to the
> heap.
> >>> > > Moreover lucene seems to hold on to references to this data even
> after
> >>> > the
> >>> > > index reader has been closed and a full GC has been run. Some of
> the
> >>> > > consequences of this are that in my generational heap configurati=
on
> a
> >>> lot
> >>> > > of
> >>> > > memory gets promoted to tenured space each time I close the old
> index
> >>> > > reader
> >>> > > and after opening and querying using a new one, and the tenured
> space
> >>> > > eventually gets fragmented causing a lot of promotion failures
> >>> resulting
> >>> > in
> >>> > > jvm hangs while the jvm does stop-the-world GCs.
> >>> > >
> >>> > > Does anyone know any workarounds to avoid these memory issues whe=
n
> >>> doing
> >>> > > such lucene queries?
> >>> > >
> >>> > > My profiling showed that even after a full GC lucene is holding o=
n
> to a
> >>> > lot
> >>> > > of references to field value data notably via the
> >>> > > FieldCacheImpl/ExtendedFieldCacheImpl. I noticed that the
> WeakHashMap
> >>> > > readerCaches are using unbounded HashMaps as the innerCaches and =
I
> used
> >>> > > reflection to replace these innerCaches with dummy empty HashMaps=
,
> but
> >>> > > still
> >>> > > I'm seeing the same behavior. I wondered if anyone has gone throu=
gh
> >>> these
> >>> > > same issues before and would offer any advice.
> >>> > >
> >>> > > Thanks a lot,
> >>> > > TCK
> >>> > >
> >>> >
> >>>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 10 06:52:32 2009
Return-Path: <java-user-return-44013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12581 invoked from network); 10 Dec 2009 06:52:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Dec 2009 06:52:32 -0000
Received: (qmail 94333 invoked by uid 500); 10 Dec 2009 06:52:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94219 invoked by uid 500); 10 Dec 2009 06:52:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94209 invoked by uid 99); 10 Dec 2009 06:52:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 06:52:26 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of serera@gmail.com designates 209.85.219.225 as permitted sender)
Received: from [209.85.219.225] (HELO mail-ew0-f225.google.com) (209.85.219.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 06:52:18 +0000
Received: by ewy25 with SMTP id 25so6723876ewy.5
        for <java-user@lucene.apache.org>; Wed, 09 Dec 2009 22:51:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=NGYsW0dhwyToAncZHmbIqPK4gQL1Ljg7Qq50w9qEg5A=;
        b=b1+Iq9RSwU6pOXRhsBRfxEBWFh2s3X/LeXOz1GO67wOtIO0GHT/wSfuWSDnZtmIxAP
         rhWyxFd4oeoo68NNspjzBAVnwevu84qWPOO9hMDXwNSL0Un6kCqqtb/dj1JiCHyu3BLy
         y+KpWieY8/oe1Ux+IyKRto26+hDr5v5pcAohU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=wVs2h7JMR9x7hU3jsa0+mdtJeeuwdOwnhv/mt8LN9DmNZ/yCpcCxGXER3lybUnvH/3
         uS2Dx6zZ7tnMktoOhkNe92UXeHqVXe5CJbCMUHwrLZjvQdSUd+rmvb/6c10sX0rh05z8
         l14Wip9gz/yf+yj6vsugO7F9ixYLH+YnIlEuo=
MIME-Version: 1.0
Received: by 10.216.93.17 with SMTP id k17mr3855214wef.31.1260427918092; Wed, 
	09 Dec 2009 22:51:58 -0800 (PST)
In-Reply-To: <3836ec640912091058o6366d748vfb04ce855edad19b@mail.gmail.com>
References: <3836ec640912091058o6366d748vfb04ce855edad19b@mail.gmail.com>
Date: Thu, 10 Dec 2009 08:51:58 +0200
Message-ID: <786fde50912092251q40069259qea3bb5dd2a2736bf@mail.gmail.com>
Subject: Re: Converting HitCollector to Collector
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d7e33a52ac4f047a5a3ebb
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d7e33a52ac4f047a5a3ebb
Content-Type: text/plain; charset=ISO-8859-1

Hi Max,

In 3.0.0 (actually in 2.9.0 already), Lucene moved to execute its searches
one sub-reader at a time. As a consequence, absolute docIDs are not passed
to the collect method anymore, but instead the relative docIDs of that
reader. An example, suppose you have 2 segments, with 6 documents total,
each segment has 3. Prior to 2.9, collect would receive doc IDs 0 .. 5.
Starting w/ 2.9, collect receives 0, 1, 2 and then 0, 1, 2 again from the
second segment reader. setNextReader passes the docBase for that reader, so
you can re-base the IDs passed to collect. Your implementation is correct,
by that you always add the docBase to the passed in doc. For the first
reader, docBase would be 0. For the second - 3.
BTW, some collectors may not care at all about doc IDs, for example a
Collector who simply keeps track of the max score.

As for the out-of-order, again, your implementation is right by returning
true. Using this method, the Collector declares whether it cares about the
documents passed to its collect() to be in-order or out of order. For the
example above, I could pass the documents as 0, 1, 2 or 1, 0, 2 if I have an
implementation of a query that can perform better that way. Lucene has such
query, BooleanQuery which uses BooleanScorer or BooleanScorer2. BQ performs
better if allowed to pass documents out-of-order - it uses BooleanScorer for
that.

Hope that helps,
Shai

On Wed, Dec 9, 2009 at 8:58 PM, Max Lynch <ihasmax@gmail.com> wrote:

> Hi,
> I have a HitCollector that processes all hits from a query.  I want all
> hits, not the top N hits.  I am converting my HitCollector to a Collector
> for Lucene 3.0.0, and I'm a little confused by the new interface.
>
> I assume that I can implement by new Collector much like the code on the
> API
> Docs:
>
>  Searcher searcher = new IndexSearcher(indexReader);
>  final BitSet bits = new BitSet(indexReader.maxDoc());
>  searcher.search(query, new Collector() {
>   private int docBase;
>
>   *// ignore scorer*
>   public void setScorer(Scorer scorer) {
>   }
>
>   *// accept docs out of order (for a BitSet it doesn't matter)*
>   public boolean acceptsDocsOutOfOrder() {
>     return true;
>   }
>
>   public void collect(int doc) {
>     bits.set(doc + docBase);
>   }
>
>   public void setNextReader(IndexReader reader, int docBase) {
>     this.docBase = docBase;
>   }
>  });
>
>
> But I'm confused what the docBasing is (I need to get fields from each
> document from my index searcher).  Do I need to use the doc base or
> setNextReader?  Also, what is the purpose of acceptsDocsOutOfOrder?  I
> see the docs note on it but I'm not sure how I could apply that or if
> I should care about it.
>
> Thanks,
> Max
>

--0016e6d7e33a52ac4f047a5a3ebb--

From java-user-return-44014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 10 07:06:28 2009
Return-Path: <java-user-return-44014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15397 invoked from network); 10 Dec 2009 07:06:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Dec 2009 07:06:28 -0000
Received: (qmail 10578 invoked by uid 500); 10 Dec 2009 07:06:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10499 invoked by uid 500); 10 Dec 2009 07:06:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10489 invoked by uid 99); 10 Dec 2009 07:06:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 07:06:24 +0000
X-ASF-Spam-Status: No, hits=-2.4 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [202.86.5.91] (HELO smtp104.mail.in.yahoo.com) (202.86.5.91)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 10 Dec 2009 07:06:21 +0000
Received: (qmail 54143 invoked from network); 10 Dec 2009 07:05:56 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=vLsLDacWwgcbx2RQYsMTyTKagUGu9x73uUHbBEKDfudovzaXxhSPQTUbqYyEpM4mdqmdTMNlhMe3+XYd2wZ64fdPA44kKXL/sa3lX32a5l56Ifu2WtBqe30w5CWgEyxo3r6HBrb0CyGaLOFsH14rvaoRbFMFXCOoYoxQCYIgMPE=  ;
Received: from  (emailgane@203.98.194.130 with login)
        by smtp104.mail.in.yahoo.com with SMTP; 10 Dec 2009 12:35:53 +0530 IST
X-Yahoo-SMTP: JObyHkuswBBrNSLZp.Ycd7Boqpr_GQ--
X-YMail-OSG: zgFYYAsVM1k3YoBuiU7PhGkUqGIY_.VFuJQyw9PR5om3Up2FH.KZmJUavcGrIy7lQ45BAa.v1dyZT2G2YlwXSXRAz5ILyYqQT5Wd626NEy63pQWWBbm2WziQrVC.uba9Ek0G32NRqdMwWTyPWTxh5AipfAmdMPK9SqzBXoBbklBlfOgQsIAK9w6CNKlkFAF1VwwAajV9IDTPdloLzpOHyjK0cZzezwW7gL.IvDbvsg435mZOAg1oCg--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <006301ca7967$36242010$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <17022a310912071327x6be7f6afjf45e0ab69269e47c@mail.gmail.com> <359a92830912071337o3ed869dbv68576b704666b8df@mail.gmail.com> <17022a310912071348m85926b0vbc0687e6085e79b5@mail.gmail.com> <660086cb0912071638h6c6e10e1u4899889bc9a4ed74@mail.gmail.com> <9ac0c6aa0912080236j5d3a87d1jbce8558fba738765@mail.gmail.com> <9ac0c6aa0912080243g4f7fab20q73b228cf1426a4ae@mail.gmail.com>,<17022a310912091358y20f4eebbt7bcd0253cb8add04@mail.gmail.com> <2E6A89A648463A4EBF093A9062C16683013484F9F742@SBMAILBOX1.sb.statsbiblioteket.dk>
Subject: Re: heap memory issues when sorting by a string field
Date: Thu, 10 Dec 2009 12:35:49 +0530
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_NextPart_000_0061_01CA7995.4DE54700"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138

------=_NextPart_000_0061_01CA7995.4DE54700
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

I think, This problem will happen for all sorted fields. I am sorting on =
integer field.

I ran small test and found after closing all the Database, the =
WeekHashMap and int[] are not released. Please find the profiler =
screenshot attached.

Is there any way to release this memory / How to fix it externally with =
2.9.1 ?=20

If we reopen the DB multiple times whether these objects will be =
accumulated / All readers are referenced to single cache? =20

Regards
Ganesh


----- Original Message -----=20
From: "Toke Eskildsen" <te@statsbiblioteket.dk>
To: <java-user@lucene.apache.org>
Sent: Thursday, December 10, 2009 5:16 AM
Subject: RE: heap memory issues when sorting by a string field


Thanks for the heads-up, TCK. The Dietz & Sleator article I found at=20
http://www.cs.cmu.edu/~sleator/papers/maintaining-order.pdf
looks very interesting.

String sorting in Lucene is indeed fairly expensive and we've =
experimented with
two solutions to this, none of which are golden bullets.

1) Store the order, not the content.

Like the Lucene default sorter, we fetch all the terms for the sort =
field on first
sort. The docIDs are mapped to the terms and an complete sort is =
performed=20
(by using a custom Collator: We want to avoid using CollationKeys as =
they
take too much memory. But that's another story). When the sort is =
finished,
we have an integer-array where each entry is the relative position for a =
given
document (referenced by docID). We then de-reference the loaded terms
so that the memory is freed.

Determining the order of two documents after the initial build is =
extremely
simple: order[docIDa] - order[docIDb] (or maybe it was the other way=20
around, I forget).

Cons: Large temporarily memory overhead upon initial sort, though not as =

much as using CollationKeys. Slower initial sort than Lucene build-in.
Pros: Very fast subsequent sorts, very low memory-overhead when running.
Joker: This approach could be used to perform a post-processing on a=20
generated index and storing the orders as a file along with the index, =
then=20
pushing the complete package to searchers. This would lower the memory
requirements for the searchers significantly.


2) As above, but use a multipass order builder.

For the first sort, the order must be calculated: A sliding window =
sorter is created=20
with a buffer of a fixed size. The window slides through all terms for =
the sort field=20
and extracts the top X. The order-array is updated for the documents =
that has=20
one of these terms. The sliding is repeated multiple times, where terms =
ordered=20
before the last term of the previous iteration are ignored.

Cons: _Very_ slow (too slow in the current implementation) order build.
Pros: Same as above.
Joker: The buffer size determines memory use vs. order build time.


The multipass approach looks promising, but requires more work to get to =
a
usable state. Right now it takes minutes to build the order-array for =
half a=20
million documents, with a buffer size requiring 5 iterations. If I ever =
get it to
work, I'll be sure to share it.

Regards,
Toke Eskildsen

________________________________________
From: TCK [moonwatcher32329@gmail.com]
Sent: 09 December 2009 22:58
To: java-user@lucene.apache.org
Subject: Re: heap memory issues when sorting by a string field

Thanks Mike for opening this jira ticket and for your patch. Explicitly
removing the entry from the WHM definitely does reduce the number of GC
cycles taken to free the huge StringIndex objects that get created when
doing a sort by a string field.

But I'm still trying to figure out why it is necessary for lucene to =
load
into memory the sorted-by field of every single document in the index =
(which
is what makes the StringIndex objects so big) on the first query. Why =
isn't
it sufficient to load the field values for only the documents that match =
the
given search criteria? Perhaps by using an order-maintenance data =
structure
(Dietz&Sleator, or Bender et al) coupled with a balanced search tree,
instead of the simple lookup and order arrays currently used in =
StringIndex,
we can dynamically grow it as needed by successive queries rather than
loading everything on the first query.

Apologies if this is a naive question... I'm a newbie to the lucene code =
and
can't wait for the new lucene book to come out:-)

-TCK




On Tue, Dec 8, 2009 at 5:43 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> I've opened LUCENE-2135.
>
> Mike
>
> On Tue, Dec 8, 2009 at 5:36 AM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
> > This is a rather disturbing implementation detail of WeakHashMap, =
that
> > it needs the one extra step (invoking one of its methods) for its =
weak
> > keys to be reclaimable.
> >
> > Maybe on IndexReader.close(), Lucene should go and evict all entries
> > in the FieldCache associated with that reader.  Ie, step through the
> > sub-readers, and if they are truly closed as well (not shared w/ =
other
> > readers), evict.  I'll open an issue.
> >
> > Even in TCK's code fragment, it's not until the final line is done
> > executing, that the cache key even loses all hard references, =
because
> > it's that line that assigns to sSearcher, replacing the strong
> > reference to the old searcher.  Inserting sSearcher =3D null prior =
to
> > that would drop the hard reference sooner, but because of this impl
> > detail of WeakHashMap, something would still have to touch it (eg, a
> > warmup query that hits the field cache) before it's reclaimable.
> >
> > Mike
> >
> > On Mon, Dec 7, 2009 at 7:38 PM, Tom Hill <solr-list@worldware.com>
> wrote:
> >> Hi -
> >>
> >> If I understand correctly, WeakHashMap does not free the memory for =
the
> >> value (cached data) when the key is nulled, or even when the key is
> garbage
> >> collected.
> >>
> >> It requires one more step: a method on WeakHashMap must be called =
to
> allow
> >> it to release its hard reference to the cached data. It appears =
that
> most
> >> methods in WeakHashMap end up calling expungeStaleEntries, which =
will
> clear
> >> the hard reference. But you have to call some method on the map, =
before
> the
> >> memory is eligible for garbage collection.
> >>
> >> So it requires four stages to free the cached data. Null the key; A =
GC
> to
> >> release the weak reference to the key; A call to some method on the =
map;
> >> Then the next GC cycle should free the value.
> >>
> >> So it seems possible that you could end up with double memory usage =
for
> a
> >> time. If you don't have a GC between the time that you close the =
old
> reader,
> >> and you start to load the field cache entry for the next reader, =
then
> the
> >> key may still be hanging around uncollected.
> >>
> >> At that point, it may run a GC when you allocate the new cache, but
> that's
> >> only the first GC. It can't free the cached data until after the =
next
> call
> >> to expungeStaleEntries, so for a while you have both caches around.
> >>
> >> This extra usage could cause things to move into tenured space. =
Could
> this
> >> be causing your problem?
> >>
> >> Workaround would be to cause some method to be called on the
> WeakHashMap.
> >> You don't want to call get(), since that will try to populate the =
cache.
> >> Maybe if you tried putting a small value to the cache, and doing a =
GC,
> and
> >> see if your memory drops then.
> >>
> >>
> >> Tom
> >>
> >>
> >>
> >> On Mon, Dec 7, 2009 at 1:48 PM, TCK <moonwatcher32329@gmail.com> =
wrote:
> >>
> >>> Thanks for the response. But I'm definitely calling close() on the =
old
> >>> reader and opening a new one (not using reopen). Also, to simplify =
the
> >>> analysis, I did my test with a single-threaded requester to =
eliminate
> any
> >>> concurrency issues.
> >>>
> >>> I'm doing:
> >>> sSearcher.getIndexReader().close();
> >>> sSearcher.close(); // this actually seems to be a no-op
> >>> IndexReader newIndexReader =3D IndexReader.open(newDirectory);
> >>> sSearcher =3D new IndexSearcher(newIndexReader);
> >>>
> >>> Btw, isn't it bad practice anyway to have an unbounded cache? Are =
there
> any
> >>> plans to replace the HashMaps used for the innerCaches with an =
actual
> >>> size-bounded cache with some eviction policy (perhaps EhCache or
> something)
> >>> ?
> >>>
> >>> Thanks again,
> >>> TCK
> >>>
> >>>
> >>>
> >>>
> >>> On Mon, Dec 7, 2009 at 4:37 PM, Erick Erickson <
> erickerickson@gmail.com
> >>> >wrote:
> >>>
> >>> > What this sounds like is that you're not really closing your
> >>> > readers even though you think you are. Sorting indeed uses up
> >>> > significant memory when it populates internal caches and keeps
> >>> > it around for later use (which is one of the reasons that =
warming
> >>> > queries matter). But if you really do close the reader, I'm =
pretty
> >>> > sure the memory should be GC-able.
> >>> >
> >>> > One thing that trips people up is IndexReader.reopen(). If it
> >>> > returns a reader different than the original, you *must* close =
the
> >>> > old one. If you don't, the old reader is still hanging around =
and
> >>> > memory won't be returne.... An example from the Javadocs...
> >>> >
> >>> >  IndexReader reader =3D ...
> >>> >  ...
> >>> >  IndexReader new =3D r.reopen();
> >>> >  if (new !=3D reader) {
> >>> >   ...     // reader was reopened
> >>> >   reader.close();
> >>> >  }
> >>> >  reader =3D new;
> >>> >  ...
> >>> >
> >>> >
> >>> > If this is irrelevant, could you post your close/open
> >>> >
> >>> > code?
> >>> >
> >>> > HTH
> >>> >
> >>> > Erick
> >>> >
> >>> >
> >>> > On Mon, Dec 7, 2009 at 4:27 PM, TCK <moonwatcher32329@gmail.com>
> wrote:
> >>> >
> >>> > > Hi,
> >>> > > I'm having heap memory issues when I do lucene queries =
involving
> >>> sorting
> >>> > by
> >>> > > a string field. Such queries seem to load a lot of data in to =
the
> heap.
> >>> > > Moreover lucene seems to hold on to references to this data =
even
> after
> >>> > the
> >>> > > index reader has been closed and a full GC has been run. Some =
of
> the
> >>> > > consequences of this are that in my generational heap =
configuration
> a
> >>> lot
> >>> > > of
> >>> > > memory gets promoted to tenured space each time I close the =
old
> index
> >>> > > reader
> >>> > > and after opening and querying using a new one, and the =
tenured
> space
> >>> > > eventually gets fragmented causing a lot of promotion failures
> >>> resulting
> >>> > in
> >>> > > jvm hangs while the jvm does stop-the-world GCs.
> >>> > >
> >>> > > Does anyone know any workarounds to avoid these memory issues =
when
> >>> doing
> >>> > > such lucene queries?
> >>> > >
> >>> > > My profiling showed that even after a full GC lucene is =
holding on
> to a
> >>> > lot
> >>> > > of references to field value data notably via the
> >>> > > FieldCacheImpl/ExtendedFieldCacheImpl. I noticed that the
> WeakHashMap
> >>> > > readerCaches are using unbounded HashMaps as the innerCaches =
and I
> used
> >>> > > reflection to replace these innerCaches with dummy empty =
HashMaps,
> but
> >>> > > still
> >>> > > I'm seeing the same behavior. I wondered if anyone has gone =
through
> >>> these
> >>> > > same issues before and would offer any advice.
> >>> > >
> >>> > > Thanks a lot,
> >>> > > TCK
> >>> > >
> >>> >
> >>>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


------=_NextPart_000_0061_01CA7995.4DE54700
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------=_NextPart_000_0061_01CA7995.4DE54700--

Send instant messages to your online friends http://in.messenger.yahoo.com 

From java-user-return-44015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 10 08:15:55 2009
Return-Path: <java-user-return-44015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29877 invoked from network); 10 Dec 2009 08:15:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Dec 2009 08:15:54 -0000
Received: (qmail 76564 invoked by uid 500); 10 Dec 2009 08:15:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76463 invoked by uid 500); 10 Dec 2009 08:15:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76453 invoked by uid 99); 10 Dec 2009 08:15:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 08:15:52 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rstaveley@seseit.com designates 209.97.205.201 as permitted sender)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 08:15:42 +0000
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 268E9183CA; Thu, 10 Dec 2009 08:15:15 +0000 (GMT)
X-Spam-Checker-Version: SpamAssassin 3.1.7-deb3 (2006-10-05) on 
	mini.seseit.net
X-Spam-Level: 
Received: from Bigun (bimport.seseit.net [78.143.212.168])
	by mail.seseit.com (Postfix) with ESMTP id 0B4C6183CA
	for <java-user@lucene.apache.org>; Thu, 10 Dec 2009 08:15:07 +0000 (GMT)
From: "Rob Staveley \(Tom\)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: IndexWriter.MaxFieldLength.UNLIMITED at what price?
Date: Thu, 10 Dec 2009 08:15:16 -0000
Message-ID: <037501ca7970$e8cbd150$ba6373f0$@com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0376_01CA7970.E8CBD150"
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acp5cObg2tH36j8URXaTqFsyyNMapA==
Content-Language: en-gb
X-seseit-ltd-MailScanner: Found to be clean, Found to be clean
X-seseit-ltd-MailScanner-From: rstaveley@seseit.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.0 required=5.0 tests=HTML_MESSAGE autolearn=failed 
	version=3.1.7-deb3, No

------=_NextPart_000_0376_01CA7970.E8CBD150
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

I was wondering where I might read about the cost of using
IndexWriter.MaxFieldLength.UNLIMITED versus
IndexWriter.MaxFieldLength.LIMITED.

 

Are thee any consequences over and above the obvious one that you are going
to analyse more content in your IndexWriter when you have more than 10,000
characters in a StringBuffer?


------=_NextPart_000_0376_01CA7970.E8CBD150--


From java-user-return-44016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 10 10:04:00 2009
Return-Path: <java-user-return-44016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80169 invoked from network); 10 Dec 2009 10:04:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Dec 2009 10:04:00 -0000
Received: (qmail 47685 invoked by uid 500); 10 Dec 2009 10:03:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47626 invoked by uid 500); 10 Dec 2009 10:03:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47616 invoked by uid 99); 10 Dec 2009 10:03:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 10:03:57 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.211.184] (HELO mail-yw0-f184.google.com) (209.85.211.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 10:03:49 +0000
Received: by ywh14 with SMTP id 14so8647035ywh.20
        for <java-user@lucene.apache.org>; Thu, 10 Dec 2009 02:03:28 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.44.2 with SMTP id r2mr4431734ybr.77.1260439408247; Thu, 10 
	Dec 2009 02:03:28 -0800 (PST)
In-Reply-To: <037501ca7970$e8cbd150$ba6373f0$@com>
References: <037501ca7970$e8cbd150$ba6373f0$@com>
Date: Thu, 10 Dec 2009 05:03:28 -0500
Message-ID: <9ac0c6aa0912100203u76788c00qdf954427673101ec@mail.gmail.com>
Subject: Re: IndexWriter.MaxFieldLength.UNLIMITED at what price?
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

LIMITED is basically an insurance policy, protecting you from
accidentally indexing an immense document, leading to OOME.

It also protects you in case your analyzer is accidentally letting in
bogus terms (say, if you indexed a large exe file, or there was a
large base64-encoded attachment on an email message that you didn't
decode).

But, LIMITED is very bad for the user experience.  Users will
eventually catch on that your search engine is "buggy", and lose
trust.

I'd recommend always using UNLIMITED unless you're in a domain where
there are risks of getting massive docs.  And even then I'd first try
to create other mechanisms to try to not index such documents...

Mike

On Thu, Dec 10, 2009 at 3:15 AM, Rob Staveley (Tom)
<rstaveley@seseit.com> wrote:
> I was wondering where I might read about the cost of using
> IndexWriter.MaxFieldLength.UNLIMITED versus
> IndexWriter.MaxFieldLength.LIMITED.
>
>
>
> Are thee any consequences over and above the obvious one that you are going
> to analyse more content in your IndexWriter when you have more than 10,000
> characters in a StringBuffer?
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 10 10:46:25 2009
Return-Path: <java-user-return-44017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5581 invoked from network); 10 Dec 2009 10:46:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Dec 2009 10:46:25 -0000
Received: (qmail 8937 invoked by uid 500); 10 Dec 2009 10:46:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8852 invoked by uid 500); 10 Dec 2009 10:46:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8829 invoked by uid 99); 10 Dec 2009 10:46:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 10:46:21 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.216] (HELO mail-gx0-f216.google.com) (209.85.217.216)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 10:46:18 +0000
Received: by gxk8 with SMTP id 8so6983627gxk.11
        for <java-user@lucene.apache.org>; Thu, 10 Dec 2009 02:45:56 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.35.18 with SMTP id i18mr18345220ybi.153.1260441955282; 
	Thu, 10 Dec 2009 02:45:55 -0800 (PST)
In-Reply-To: <2E6A89A648463A4EBF093A9062C16683013484F9F742@SBMAILBOX1.sb.statsbiblioteket.dk>
References: <17022a310912071327x6be7f6afjf45e0ab69269e47c@mail.gmail.com>
	 <359a92830912071337o3ed869dbv68576b704666b8df@mail.gmail.com>
	 <17022a310912071348m85926b0vbc0687e6085e79b5@mail.gmail.com>
	 <660086cb0912071638h6c6e10e1u4899889bc9a4ed74@mail.gmail.com>
	 <9ac0c6aa0912080236j5d3a87d1jbce8558fba738765@mail.gmail.com>
	 <9ac0c6aa0912080243g4f7fab20q73b228cf1426a4ae@mail.gmail.com>
	 <17022a310912091358y20f4eebbt7bcd0253cb8add04@mail.gmail.com>
	 <2E6A89A648463A4EBF093A9062C16683013484F9F742@SBMAILBOX1.sb.statsbiblioteket.dk>
Date: Thu, 10 Dec 2009 05:45:55 -0500
Message-ID: <9ac0c6aa0912100245n4e3902etfed6b26dd80a2f2d@mail.gmail.com>
Subject: Re: heap memory issues when sorting by a string field
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

The big challenge w/ a global sort ords is handling reopen, ie, for
apps that need to frequently reopen their index.

If you have a static index, then this approach is a good one -- you
make a one time investment, after indexing, to compute your global
ords, store them on disk.

Then at searching you load the ords in, and you can make a
FieldComparator that taps into it (just has to re-base the per-segment
docIDs).  No String values are needed...

Also, once we've done
https://issues.apache.org/jira/browse/LUCENE-1990 (anyone out there
wanna take a stab?  Nice self-contained utility API needed for
Lucene....), that ord array can be very compact for cases where the
number of unique Strings is smallish.  No reason to spend a full 4
bytes per document...

Mike

On Wed, Dec 9, 2009 at 6:46 PM, Toke Eskildsen <te@statsbiblioteket.dk> wro=
te:
> Thanks for the heads-up, TCK. The Dietz & Sleator article I found at
> http://www.cs.cmu.edu/~sleator/papers/maintaining-order.pdf
> looks very interesting.
>
> String sorting in Lucene is indeed fairly expensive and we've experimente=
d with
> two solutions to this, none of which are golden bullets.
>
> 1) Store the order, not the content.
>
> Like the Lucene default sorter, we fetch all the terms for the sort field=
 on first
> sort. The docIDs are mapped to the terms and an complete sort is performe=
d
> (by using a custom Collator: We want to avoid using CollationKeys as they
> take too much memory. But that's another story). When the sort is finishe=
d,
> we have an integer-array where each entry is the relative position for a =
given
> document (referenced by docID). We then de-reference the loaded terms
> so that the memory is freed.
>
> Determining the order of two documents after the initial build is extreme=
ly
> simple: order[docIDa] - order[docIDb] (or maybe it was the other way
> around, I forget).
>
> Cons: Large temporarily memory overhead upon initial sort, though not as
> much as using CollationKeys. Slower initial sort than Lucene build-in.
> Pros: Very fast subsequent sorts, very low memory-overhead when running.
> Joker: This approach could be used to perform a post-processing on a
> generated index and storing the orders as a file along with the index, th=
en
> pushing the complete package to searchers. This would lower the memory
> requirements for the searchers significantly.
>
>
> 2) As above, but use a multipass order builder.
>
> For the first sort, the order must be calculated: A sliding window sorter=
 is created
> with a buffer of a fixed size. The window slides through all terms for th=
e sort field
> and extracts the top X. The order-array is updated for the documents that=
 has
> one of these terms. The sliding is repeated multiple times, where terms o=
rdered
> before the last term of the previous iteration are ignored.
>
> Cons: _Very_ slow (too slow in the current implementation) order build.
> Pros: Same as above.
> Joker: The buffer size determines memory use vs. order build time.
>
>
> The multipass approach looks promising, but requires more work to get to =
a
> usable state. Right now it takes minutes to build the order-array for hal=
f a
> million documents, with a buffer size requiring 5 iterations. If I ever g=
et it to
> work, I'll be sure to share it.
>
> Regards,
> Toke Eskildsen
>
> ________________________________________
> From: TCK [moonwatcher32329@gmail.com]
> Sent: 09 December 2009 22:58
> To: java-user@lucene.apache.org
> Subject: Re: heap memory issues when sorting by a string field
>
> Thanks Mike for opening this jira ticket and for your patch. Explicitly
> removing the entry from the WHM definitely does reduce the number of GC
> cycles taken to free the huge StringIndex objects that get created when
> doing a sort by a string field.
>
> But I'm still trying to figure out why it is necessary for lucene to load
> into memory the sorted-by field of every single document in the index (wh=
ich
> is what makes the StringIndex objects so big) on the first query. Why isn=
't
> it sufficient to load the field values for only the documents that match =
the
> given search criteria? Perhaps by using an order-maintenance data structu=
re
> (Dietz&Sleator, or Bender et al) coupled with a balanced search tree,
> instead of the simple lookup and order arrays currently used in StringInd=
ex,
> we can dynamically grow it as needed by successive queries rather than
> loading everything on the first query.
>
> Apologies if this is a naive question... I'm a newbie to the lucene code =
and
> can't wait for the new lucene book to come out:-)
>
> -TCK
>
>
>
>
> On Tue, Dec 8, 2009 at 5:43 AM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>> I've opened LUCENE-2135.
>>
>> Mike
>>
>> On Tue, Dec 8, 2009 at 5:36 AM, Michael McCandless
>> <lucene@mikemccandless.com> wrote:
>> > This is a rather disturbing implementation detail of WeakHashMap, that
>> > it needs the one extra step (invoking one of its methods) for its weak
>> > keys to be reclaimable.
>> >
>> > Maybe on IndexReader.close(), Lucene should go and evict all entries
>> > in the FieldCache associated with that reader. =A0Ie, step through the
>> > sub-readers, and if they are truly closed as well (not shared w/ other
>> > readers), evict. =A0I'll open an issue.
>> >
>> > Even in TCK's code fragment, it's not until the final line is done
>> > executing, that the cache key even loses all hard references, because
>> > it's that line that assigns to sSearcher, replacing the strong
>> > reference to the old searcher. =A0Inserting sSearcher =3D null prior t=
o
>> > that would drop the hard reference sooner, but because of this impl
>> > detail of WeakHashMap, something would still have to touch it (eg, a
>> > warmup query that hits the field cache) before it's reclaimable.
>> >
>> > Mike
>> >
>> > On Mon, Dec 7, 2009 at 7:38 PM, Tom Hill <solr-list@worldware.com>
>> wrote:
>> >> Hi -
>> >>
>> >> If I understand correctly, WeakHashMap does not free the memory for t=
he
>> >> value (cached data) when the key is nulled, or even when the key is
>> garbage
>> >> collected.
>> >>
>> >> It requires one more step: a method on WeakHashMap must be called to
>> allow
>> >> it to release its hard reference to the cached data. It appears that
>> most
>> >> methods in WeakHashMap end up calling expungeStaleEntries, which will
>> clear
>> >> the hard reference. But you have to call some method on the map, befo=
re
>> the
>> >> memory is eligible for garbage collection.
>> >>
>> >> So it requires four stages to free the cached data. Null the key; A G=
C
>> to
>> >> release the weak reference to the key; A call to some method on the m=
ap;
>> >> Then the next GC cycle should free the value.
>> >>
>> >> So it seems possible that you could end up with double memory usage f=
or
>> a
>> >> time. If you don't have a GC between the time that you close the old
>> reader,
>> >> and you start to load the field cache entry for the next reader, then
>> the
>> >> key may still be hanging around uncollected.
>> >>
>> >> At that point, it may run a GC when you allocate the new cache, but
>> that's
>> >> only the first GC. It can't free the cached data until after the next
>> call
>> >> to expungeStaleEntries, so for a while you have both caches around.
>> >>
>> >> This extra usage could cause things to move into tenured space. Could
>> this
>> >> be causing your problem?
>> >>
>> >> Workaround would be to cause some method to be called on the
>> WeakHashMap.
>> >> You don't want to call get(), since that will try to populate the cac=
he.
>> >> Maybe if you tried putting a small value to the cache, and doing a GC=
,
>> and
>> >> see if your memory drops then.
>> >>
>> >>
>> >> Tom
>> >>
>> >>
>> >>
>> >> On Mon, Dec 7, 2009 at 1:48 PM, TCK <moonwatcher32329@gmail.com> wrot=
e:
>> >>
>> >>> Thanks for the response. But I'm definitely calling close() on the o=
ld
>> >>> reader and opening a new one (not using reopen). Also, to simplify t=
he
>> >>> analysis, I did my test with a single-threaded requester to eliminat=
e
>> any
>> >>> concurrency issues.
>> >>>
>> >>> I'm doing:
>> >>> sSearcher.getIndexReader().close();
>> >>> sSearcher.close(); // this actually seems to be a no-op
>> >>> IndexReader newIndexReader =3D IndexReader.open(newDirectory);
>> >>> sSearcher =3D new IndexSearcher(newIndexReader);
>> >>>
>> >>> Btw, isn't it bad practice anyway to have an unbounded cache? Are th=
ere
>> any
>> >>> plans to replace the HashMaps used for the innerCaches with an actua=
l
>> >>> size-bounded cache with some eviction policy (perhaps EhCache or
>> something)
>> >>> ?
>> >>>
>> >>> Thanks again,
>> >>> TCK
>> >>>
>> >>>
>> >>>
>> >>>
>> >>> On Mon, Dec 7, 2009 at 4:37 PM, Erick Erickson <
>> erickerickson@gmail.com
>> >>> >wrote:
>> >>>
>> >>> > What this sounds like is that you're not really closing your
>> >>> > readers even though you think you are. Sorting indeed uses up
>> >>> > significant memory when it populates internal caches and keeps
>> >>> > it around for later use (which is one of the reasons that warming
>> >>> > queries matter). But if you really do close the reader, I'm pretty
>> >>> > sure the memory should be GC-able.
>> >>> >
>> >>> > One thing that trips people up is IndexReader.reopen(). If it
>> >>> > returns a reader different than the original, you *must* close the
>> >>> > old one. If you don't, the old reader is still hanging around and
>> >>> > memory won't be returne.... An example from the Javadocs...
>> >>> >
>> >>> > =A0IndexReader reader =3D ...
>> >>> > =A0...
>> >>> > =A0IndexReader new =3D r.reopen();
>> >>> > =A0if (new !=3D reader) {
>> >>> > =A0 ... =A0 =A0 // reader was reopened
>> >>> > =A0 reader.close();
>> >>> > =A0}
>> >>> > =A0reader =3D new;
>> >>> > =A0...
>> >>> >
>> >>> >
>> >>> > If this is irrelevant, could you post your close/open
>> >>> >
>> >>> > code?
>> >>> >
>> >>> > HTH
>> >>> >
>> >>> > Erick
>> >>> >
>> >>> >
>> >>> > On Mon, Dec 7, 2009 at 4:27 PM, TCK <moonwatcher32329@gmail.com>
>> wrote:
>> >>> >
>> >>> > > Hi,
>> >>> > > I'm having heap memory issues when I do lucene queries involving
>> >>> sorting
>> >>> > by
>> >>> > > a string field. Such queries seem to load a lot of data in to th=
e
>> heap.
>> >>> > > Moreover lucene seems to hold on to references to this data even
>> after
>> >>> > the
>> >>> > > index reader has been closed and a full GC has been run. Some of
>> the
>> >>> > > consequences of this are that in my generational heap configurat=
ion
>> a
>> >>> lot
>> >>> > > of
>> >>> > > memory gets promoted to tenured space each time I close the old
>> index
>> >>> > > reader
>> >>> > > and after opening and querying using a new one, and the tenured
>> space
>> >>> > > eventually gets fragmented causing a lot of promotion failures
>> >>> resulting
>> >>> > in
>> >>> > > jvm hangs while the jvm does stop-the-world GCs.
>> >>> > >
>> >>> > > Does anyone know any workarounds to avoid these memory issues wh=
en
>> >>> doing
>> >>> > > such lucene queries?
>> >>> > >
>> >>> > > My profiling showed that even after a full GC lucene is holding =
on
>> to a
>> >>> > lot
>> >>> > > of references to field value data notably via the
>> >>> > > FieldCacheImpl/ExtendedFieldCacheImpl. I noticed that the
>> WeakHashMap
>> >>> > > readerCaches are using unbounded HashMaps as the innerCaches and=
 I
>> used
>> >>> > > reflection to replace these innerCaches with dummy empty HashMap=
s,
>> but
>> >>> > > still
>> >>> > > I'm seeing the same behavior. I wondered if anyone has gone thro=
ugh
>> >>> these
>> >>> > > same issues before and would offer any advice.
>> >>> > >
>> >>> > > Thanks a lot,
>> >>> > > TCK
>> >>> > >
>> >>> >
>> >>>
>> >>
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 10 10:52:06 2009
Return-Path: <java-user-return-44018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7889 invoked from network); 10 Dec 2009 10:52:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Dec 2009 10:52:06 -0000
Received: (qmail 18135 invoked by uid 500); 10 Dec 2009 10:52:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18036 invoked by uid 500); 10 Dec 2009 10:52:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18026 invoked by uid 99); 10 Dec 2009 10:52:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 10:52:03 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 10:51:54 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NIgcP-0002tW-QR
	for java-user@lucene.apache.org; Thu, 10 Dec 2009 02:51:33 -0800
Message-ID: <26725335.post@talk.nabble.com>
Date: Thu, 10 Dec 2009 02:51:33 -0800 (PST)
From: kanayo <richies4all@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem searching field with % as value
In-Reply-To: <8c4e68610912080918r1b77afb0t70715111e0338dd8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: richies4all@gmail.com
References: <26696184.post@talk.nabble.com> <359a92830912080820yed97137n2bc1ed9c4e79a120@mail.gmail.com> <26696993.post@talk.nabble.com> <8c4e68610912080918r1b77afb0t70715111e0338dd8@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

Thanks Ian for your reply. What i did was to put a check in my indexing such
that when the stirng to index is just % it stores it un_analyzed else then
analyze and i then use the TermQuery to search for it and it is now working.

Thanks a lot for your tip.

Cheers.



Ian Lea wrote:
> 
> If you store the field unanalyzed it will be indexed as is.  You can
> then search for it via a TermQuery, or use QueryParser with
> PerFieldAnalyzerWrapper specifying KeywordAnalyzer for the field
> containing this character.
> 
> Another approach is to replace the % with something easier to work
> with.  You could do this yourself or, I think, with MappingCharFilter.
> 
> Personally I'd probably replace "%" with "percent" somewhere in my
> code with a simple string replacement.
> 
> 
> --
> Ian.
> 
> 
> 
> On Tue, Dec 8, 2009 at 5:02 PM, kanayo <richies4all@gmail.com> wrote:
>>
>> Thanks for your reply Erick.
>>
>> In Luke, its also not working. I tried to retrieving values from the
>> field
>> by specifying the field as the search field and then specify % as the
>> search
>> parameter which using StandardAnalyzer but nothing is displayed. Also
>> while
>> Luke shows the query details for other search values, it dosent show
>> query
>> details for search value of %.
>>
>> I think it is not Tokenized in the index. Is there anything else i can do
>> to
>> be able to retrieve values from fields comprising of just %?
>>
>> Thanks for your assistance.
>>
>>
>> Erick Erickson wrote:
>>>
>>> Try printing out query.toString() to see what's actually being
>>> sent to the searcher.
>>>
>>> You can try the same thing in Luke, specifying StandardAnalyzer
>>> to parse queries.
>>>
>>> Are you sure you're specifying the fields in the query and not just the
>>> '%'? That would go against your default field.
>>>
>>> When you say that you can see the fields in luke, are you storing the
>>> field?
>>> Because what you may be seeing is the *stored* value rather than the
>>> *tokens*.
>>> Make sure you're looking at the tokens in Luke..
>>>
>>> If none of that helps, could you post a code snippet or two (index and
>>> query)?
>>>
>>> Best
>>> Erick
>>>
>>> On Tue, Dec 8, 2009 at 11:04 AM, kanayo <richies4all@gmail.com> wrote:
>>>
>>>>
>>>> Hi,
>>>>
>>>> I am a newbie to lucene. I am using Standard Analyzer in my lucene
>>>> project.
>>>> I am indexing some fields which may contain only "%" as a field value
>>>> and
>>>> it
>>>> indexes fine and i can view the value against the field in the index
>>>> using
>>>> Luke.
>>>>
>>>> However when i try to retrieve the same field using indexsearcher and
>>>> passing "%" as a query parameter nothing is retrieved. It is simply
>>>> being
>>>> ignored. I have also tried to escape the "%" while searching but still
>>>> no
>>>> results.
>>>>
>>>> Is there anything am not doing right?
>>>>
>>>> Thanks in advance for your assistance.
>>>>
>>>>
>>>> --
>>>> View this message in context:
>>>> http://old.nabble.com/Problem-searching-field-with---as-value-tp26696184p26696184.html
>>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>>
>>
>> --
>> View this message in context:
>> http://old.nabble.com/Problem-searching-field-with---as-value-tp26696184p26696993.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://old.nabble.com/Problem-searching-field-with---as-value-tp26696184p26725335.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 10 10:52:16 2009
Return-Path: <java-user-return-44019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7955 invoked from network); 10 Dec 2009 10:52:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Dec 2009 10:52:16 -0000
Received: (qmail 19834 invoked by uid 500); 10 Dec 2009 10:52:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19773 invoked by uid 500); 10 Dec 2009 10:52:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19763 invoked by uid 99); 10 Dec 2009 10:52:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 10:52:13 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 10:52:06 +0000
Received: by yxe30 with SMTP id 30so8099588yxe.29
        for <java-user@lucene.apache.org>; Thu, 10 Dec 2009 02:51:44 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.25.30 with SMTP id 30mr18456794yby.83.1260442304202; Thu, 
	10 Dec 2009 02:51:44 -0800 (PST)
In-Reply-To: <006301ca7967$36242010$710bc30a@sv.us.sonicwall.com>
References: <17022a310912071327x6be7f6afjf45e0ab69269e47c@mail.gmail.com>
	 <359a92830912071337o3ed869dbv68576b704666b8df@mail.gmail.com>
	 <17022a310912071348m85926b0vbc0687e6085e79b5@mail.gmail.com>
	 <660086cb0912071638h6c6e10e1u4899889bc9a4ed74@mail.gmail.com>
	 <9ac0c6aa0912080236j5d3a87d1jbce8558fba738765@mail.gmail.com>
	 <9ac0c6aa0912080243g4f7fab20q73b228cf1426a4ae@mail.gmail.com>
	 <17022a310912091358y20f4eebbt7bcd0253cb8add04@mail.gmail.com>
	 <2E6A89A648463A4EBF093A9062C16683013484F9F742@SBMAILBOX1.sb.statsbiblioteket.dk>
	 <006301ca7967$36242010$710bc30a@sv.us.sonicwall.com>
Date: Thu, 10 Dec 2009 05:51:44 -0500
Message-ID: <9ac0c6aa0912100251l359f1d09la29835ccd13227f8@mail.gmail.com>
Subject: Re: heap memory issues when sorting by a string field
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Dec 10, 2009 at 2:05 AM, Ganesh <emailgane@yahoo.co.in> wrote:
> I think, This problem will happen for all sorted fields. I am sorting on integer field.

Integer field should take much less RAM than String, today, for
sorting.  And there's no efficiency gained by doing this globally (per
segment is just fine).

> I ran small test and found after closing all the Database, the WeekHashMap and int[] are not released. Please find the profiler screenshot attached.
>
> Is there any way to release this memory / How to fix it externally with 2.9.1 ?

GC will "eventually" reclaim it, but there is this issue in progress:

    https://issues.apache.org/jira/browse/LUCENE-2135

to improve the immediacy, ie, on closing your reader, the FieldCache
entries will be reclaimed.  (There's also an exciting LUCENE-2133 in
progress, with a good improvement to FieldCache, that'll fix the issue
even better).

> If we reopen the DB multiple times whether these objects will be accumulated / All readers are referenced to single cache?

They'll be GCd, as long as your app doesn't hold references to the old
readers.  They're stored in a WeakHashMap, keyed by the IndexReader.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 10 10:58:18 2009
Return-Path: <java-user-return-44020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9129 invoked from network); 10 Dec 2009 10:58:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Dec 2009 10:58:17 -0000
Received: (qmail 27191 invoked by uid 500); 10 Dec 2009 10:58:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27126 invoked by uid 500); 10 Dec 2009 10:58:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27116 invoked by uid 99); 10 Dec 2009 10:58:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 10:58:15 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rstaveley@seseit.com designates 209.97.205.201 as permitted sender)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 10:58:13 +0000
Received: by mail.seseit.com (Postfix, from userid 65534)
	id BD454183CA; Thu, 10 Dec 2009 10:57:45 +0000 (GMT)
X-Spam-Checker-Version: SpamAssassin 3.1.7-deb3 (2006-10-05) on 
	mini.seseit.net
X-Spam-Level: 
Received: from Bigun (bimport.seseit.net [78.143.212.168])
	by mail.seseit.com (Postfix) with ESMTP id 31D9E183CA
	for <java-user@lucene.apache.org>; Thu, 10 Dec 2009 10:57:41 +0000 (GMT)
From: "Rob Staveley \(Tom\)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
References: <037501ca7970$e8cbd150$ba6373f0$@com> <9ac0c6aa0912100203u76788c00qdf954427673101ec@mail.gmail.com>
In-Reply-To: <9ac0c6aa0912100203u76788c00qdf954427673101ec@mail.gmail.com>
Subject: RE: IndexWriter.MaxFieldLength.UNLIMITED at what price?
Date: Thu, 10 Dec 2009 10:57:49 -0000
Message-ID: <03cc01ca7987$9ef0fda0$dcd2f8e0$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acp5gBw8yc1GWjxnSCWTk/UlUZAjuQABrCDQ
Content-Language: en-gb
X-seseit-ltd-MailScanner: Found to be clean, Found to be clean
X-seseit-ltd-MailScanner-From: rstaveley@seseit.com
X-Old-Spam-Status: No, score=0.0 required=5.0 tests=none autolearn=failed 
	version=3.1.7-deb3, No

Many thanks, Mike. UNLIMITED is right for me then. Happily, it is a
reasonably controlled environment.

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com] 
Sent: 10 December 2009 10:03
To: java-user@lucene.apache.org
Subject: Re: IndexWriter.MaxFieldLength.UNLIMITED at what price?

LIMITED is basically an insurance policy, protecting you from
accidentally indexing an immense document, leading to OOME.

It also protects you in case your analyzer is accidentally letting in
bogus terms (say, if you indexed a large exe file, or there was a
large base64-encoded attachment on an email message that you didn't
decode).

But, LIMITED is very bad for the user experience.  Users will
eventually catch on that your search engine is "buggy", and lose
trust.

I'd recommend always using UNLIMITED unless you're in a domain where
there are risks of getting massive docs.  And even then I'd first try
to create other mechanisms to try to not index such documents...

Mike

On Thu, Dec 10, 2009 at 3:15 AM, Rob Staveley (Tom)
<rstaveley@seseit.com> wrote:
> I was wondering where I might read about the cost of using
> IndexWriter.MaxFieldLength.UNLIMITED versus
> IndexWriter.MaxFieldLength.LIMITED.
>
>
>
> Are thee any consequences over and above the obvious one that you are
going
> to analyse more content in your IndexWriter when you have more than 10,000
> characters in a StringBuffer?
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 10 13:47:28 2009
Return-Path: <java-user-return-44021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77174 invoked from network); 10 Dec 2009 13:47:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Dec 2009 13:47:27 -0000
Received: (qmail 36044 invoked by uid 500); 10 Dec 2009 13:47:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35968 invoked by uid 500); 10 Dec 2009 13:47:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35958 invoked by uid 99); 10 Dec 2009 13:47:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 13:47:25 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 13:47:22 +0000
Received: from [172.18.225.244] (172.18.225.244) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.1.393.1; Thu, 10 Dec 2009 14:47:00 +0100
Subject: Re: heap memory issues when sorting by a string field
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <9ac0c6aa0912100245n4e3902etfed6b26dd80a2f2d@mail.gmail.com>
References: <17022a310912071327x6be7f6afjf45e0ab69269e47c@mail.gmail.com>
	 <359a92830912071337o3ed869dbv68576b704666b8df@mail.gmail.com>
	 <17022a310912071348m85926b0vbc0687e6085e79b5@mail.gmail.com>
	 <660086cb0912071638h6c6e10e1u4899889bc9a4ed74@mail.gmail.com>
	 <9ac0c6aa0912080236j5d3a87d1jbce8558fba738765@mail.gmail.com>
	 <9ac0c6aa0912080243g4f7fab20q73b228cf1426a4ae@mail.gmail.com>
	 <17022a310912091358y20f4eebbt7bcd0253cb8add04@mail.gmail.com>
	 <2E6A89A648463A4EBF093A9062C16683013484F9F742@SBMAILBOX1.sb.statsbiblioteket.dk>
	 <9ac0c6aa0912100245n4e3902etfed6b26dd80a2f2d@mail.gmail.com>
Content-Type: text/plain; charset="UTF-8"
Organization: Statsbiblioteket
Date: Thu, 10 Dec 2009 13:38:20 +0100
Message-ID: <1260448700.6735.2952.camel@pc286>
MIME-Version: 1.0
X-Mailer: Evolution 2.28.1 
Content-Transfer-Encoding: 8bit

Regarding LUCENE-1990, I've been experimenting a bit with packed
positive integer arrays. I'd love to take a look at it, but I simply do
not have the time before next year.

My approach was to pack the bits rights after each other, but it does
represent certain challenges. Going for smallest possible size means
that some numbers will be divided between array-entries: Storing a three
40 bit values in longs means that the first 24 bits of the second value
will be stored in one long, with the remaining 16 bits in another. The
problem here is performance.

Ive created an implementation that avoids conditionals in the getter by
using 9 shifts, two ors, one and a mask, but it takes more time than I
thought: More than a second for 100 million lookups in an array of 1
million values on my desktop machine. That's simply too slow. I'll try
with 3 masks, 3 shifts and 3 ors instead, but I fear that it won't help
much.

A hybrid approach would be to allow only 1, 2, 4, 8, 16, 32 or 64 bits
for the values, as that would ensure that there is no spanning of
array-elements. We have a danish proverb regarding that: "A good
compromise leaves no one satisfied".


...Most probably reinventing the wheel here and definitely moving
outside Lucene territory.

- Toke

On Thu, 2009-12-10 at 11:45 +0100, Michael McCandless wrote:
> The big challenge w/ a global sort ords is handling reopen, ie, for
> apps that need to frequently reopen their index.
> 
> If you have a static index, then this approach is a good one -- you
> make a one time investment, after indexing, to compute your global
> ords, store them on disk.
> 
> Then at searching you load the ords in, and you can make a
> FieldComparator that taps into it (just has to re-base the per-segment
> docIDs).  No String values are needed...
> 
> Also, once we've done
> https://issues.apache.org/jira/browse/LUCENE-1990 (anyone out there
> wanna take a stab?  Nice self-contained utility API needed for
> Lucene....), that ord array can be very compact for cases where the
> number of unique Strings is smallish.  No reason to spend a full 4
> bytes per document...
> 
> Mike
> 
> On Wed, Dec 9, 2009 at 6:46 PM, Toke Eskildsen <te@statsbiblioteket.dk> wrote:
> > Thanks for the heads-up, TCK. The Dietz & Sleator article I found at
> > http://www.cs.cmu.edu/~sleator/papers/maintaining-order.pdf
> > looks very interesting.
> >
> > String sorting in Lucene is indeed fairly expensive and we've experimented with
> > two solutions to this, none of which are golden bullets.
> >
> > 1) Store the order, not the content.
> >
> > Like the Lucene default sorter, we fetch all the terms for the sort field on first
> > sort. The docIDs are mapped to the terms and an complete sort is performed
> > (by using a custom Collator: We want to avoid using CollationKeys as they
> > take too much memory. But that's another story). When the sort is finished,
> > we have an integer-array where each entry is the relative position for a given
> > document (referenced by docID). We then de-reference the loaded terms
> > so that the memory is freed.
> >
> > Determining the order of two documents after the initial build is extremely
> > simple: order[docIDa] - order[docIDb] (or maybe it was the other way
> > around, I forget).
> >
> > Cons: Large temporarily memory overhead upon initial sort, though not as
> > much as using CollationKeys. Slower initial sort than Lucene build-in.
> > Pros: Very fast subsequent sorts, very low memory-overhead when running.
> > Joker: This approach could be used to perform a post-processing on a
> > generated index and storing the orders as a file along with the index, then
> > pushing the complete package to searchers. This would lower the memory
> > requirements for the searchers significantly.
> >
> >
> > 2) As above, but use a multipass order builder.
> >
> > For the first sort, the order must be calculated: A sliding window sorter is created
> > with a buffer of a fixed size. The window slides through all terms for the sort field
> > and extracts the top X. The order-array is updated for the documents that has
> > one of these terms. The sliding is repeated multiple times, where terms ordered
> > before the last term of the previous iteration are ignored.
> >
> > Cons: _Very_ slow (too slow in the current implementation) order build.
> > Pros: Same as above.
> > Joker: The buffer size determines memory use vs. order build time.
> >
> >
> > The multipass approach looks promising, but requires more work to get to a
> > usable state. Right now it takes minutes to build the order-array for half a
> > million documents, with a buffer size requiring 5 iterations. If I ever get it to
> > work, I'll be sure to share it.
> >
> > Regards,
> > Toke Eskildsen
> >
> > ________________________________________
> > From: TCK [moonwatcher32329@gmail.com]
> > Sent: 09 December 2009 22:58
> > To: java-user@lucene.apache.org
> > Subject: Re: heap memory issues when sorting by a string field
> >
> > Thanks Mike for opening this jira ticket and for your patch. Explicitly
> > removing the entry from the WHM definitely does reduce the number of GC
> > cycles taken to free the huge StringIndex objects that get created when
> > doing a sort by a string field.
> >
> > But I'm still trying to figure out why it is necessary for lucene to load
> > into memory the sorted-by field of every single document in the index (which
> > is what makes the StringIndex objects so big) on the first query. Why isn't
> > it sufficient to load the field values for only the documents that match the
> > given search criteria? Perhaps by using an order-maintenance data structure
> > (Dietz&Sleator, or Bender et al) coupled with a balanced search tree,
> > instead of the simple lookup and order arrays currently used in StringIndex,
> > we can dynamically grow it as needed by successive queries rather than
> > loading everything on the first query.
> >
> > Apologies if this is a naive question... I'm a newbie to the lucene code and
> > can't wait for the new lucene book to come out:-)
> >
> > -TCK
> >
> >
> >
> >
> > On Tue, Dec 8, 2009 at 5:43 AM, Michael McCandless <
> > lucene@mikemccandless.com> wrote:
> >
> >> I've opened LUCENE-2135.
> >>
> >> Mike
> >>
> >> On Tue, Dec 8, 2009 at 5:36 AM, Michael McCandless
> >> <lucene@mikemccandless.com> wrote:
> >> > This is a rather disturbing implementation detail of WeakHashMap, that
> >> > it needs the one extra step (invoking one of its methods) for its weak
> >> > keys to be reclaimable.
> >> >
> >> > Maybe on IndexReader.close(), Lucene should go and evict all entries
> >> > in the FieldCache associated with that reader.  Ie, step through the
> >> > sub-readers, and if they are truly closed as well (not shared w/ other
> >> > readers), evict.  I'll open an issue.
> >> >
> >> > Even in TCK's code fragment, it's not until the final line is done
> >> > executing, that the cache key even loses all hard references, because
> >> > it's that line that assigns to sSearcher, replacing the strong
> >> > reference to the old searcher.  Inserting sSearcher = null prior to
> >> > that would drop the hard reference sooner, but because of this impl
> >> > detail of WeakHashMap, something would still have to touch it (eg, a
> >> > warmup query that hits the field cache) before it's reclaimable.
> >> >
> >> > Mike
> >> >
> >> > On Mon, Dec 7, 2009 at 7:38 PM, Tom Hill <solr-list@worldware.com>
> >> wrote:
> >> >> Hi -
> >> >>
> >> >> If I understand correctly, WeakHashMap does not free the memory for the
> >> >> value (cached data) when the key is nulled, or even when the key is
> >> garbage
> >> >> collected.
> >> >>
> >> >> It requires one more step: a method on WeakHashMap must be called to
> >> allow
> >> >> it to release its hard reference to the cached data. It appears that
> >> most
> >> >> methods in WeakHashMap end up calling expungeStaleEntries, which will
> >> clear
> >> >> the hard reference. But you have to call some method on the map, before
> >> the
> >> >> memory is eligible for garbage collection.
> >> >>
> >> >> So it requires four stages to free the cached data. Null the key; A GC
> >> to
> >> >> release the weak reference to the key; A call to some method on the map;
> >> >> Then the next GC cycle should free the value.
> >> >>
> >> >> So it seems possible that you could end up with double memory usage for
> >> a
> >> >> time. If you don't have a GC between the time that you close the old
> >> reader,
> >> >> and you start to load the field cache entry for the next reader, then
> >> the
> >> >> key may still be hanging around uncollected.
> >> >>
> >> >> At that point, it may run a GC when you allocate the new cache, but
> >> that's
> >> >> only the first GC. It can't free the cached data until after the next
> >> call
> >> >> to expungeStaleEntries, so for a while you have both caches around.
> >> >>
> >> >> This extra usage could cause things to move into tenured space. Could
> >> this
> >> >> be causing your problem?
> >> >>
> >> >> Workaround would be to cause some method to be called on the
> >> WeakHashMap.
> >> >> You don't want to call get(), since that will try to populate the cache.
> >> >> Maybe if you tried putting a small value to the cache, and doing a GC,
> >> and
> >> >> see if your memory drops then.
> >> >>
> >> >>
> >> >> Tom
> >> >>
> >> >>
> >> >>
> >> >> On Mon, Dec 7, 2009 at 1:48 PM, TCK <moonwatcher32329@gmail.com> wrote:
> >> >>
> >> >>> Thanks for the response. But I'm definitely calling close() on the old
> >> >>> reader and opening a new one (not using reopen). Also, to simplify the
> >> >>> analysis, I did my test with a single-threaded requester to eliminate
> >> any
> >> >>> concurrency issues.
> >> >>>
> >> >>> I'm doing:
> >> >>> sSearcher.getIndexReader().close();
> >> >>> sSearcher.close(); // this actually seems to be a no-op
> >> >>> IndexReader newIndexReader = IndexReader.open(newDirectory);
> >> >>> sSearcher = new IndexSearcher(newIndexReader);
> >> >>>
> >> >>> Btw, isn't it bad practice anyway to have an unbounded cache? Are there
> >> any
> >> >>> plans to replace the HashMaps used for the innerCaches with an actual
> >> >>> size-bounded cache with some eviction policy (perhaps EhCache or
> >> something)
> >> >>> ?
> >> >>>
> >> >>> Thanks again,
> >> >>> TCK
> >> >>>
> >> >>>
> >> >>>
> >> >>>
> >> >>> On Mon, Dec 7, 2009 at 4:37 PM, Erick Erickson <
> >> erickerickson@gmail.com
> >> >>> >wrote:
> >> >>>
> >> >>> > What this sounds like is that you're not really closing your
> >> >>> > readers even though you think you are. Sorting indeed uses up
> >> >>> > significant memory when it populates internal caches and keeps
> >> >>> > it around for later use (which is one of the reasons that warming
> >> >>> > queries matter). But if you really do close the reader, I'm pretty
> >> >>> > sure the memory should be GC-able.
> >> >>> >
> >> >>> > One thing that trips people up is IndexReader.reopen(). If it
> >> >>> > returns a reader different than the original, you *must* close the
> >> >>> > old one. If you don't, the old reader is still hanging around and
> >> >>> > memory won't be returne.... An example from the Javadocs...
> >> >>> >
> >> >>> >  IndexReader reader = ...
> >> >>> >  ...
> >> >>> >  IndexReader new = r.reopen();
> >> >>> >  if (new != reader) {
> >> >>> >   ...     // reader was reopened
> >> >>> >   reader.close();
> >> >>> >  }
> >> >>> >  reader = new;
> >> >>> >  ...
> >> >>> >
> >> >>> >
> >> >>> > If this is irrelevant, could you post your close/open
> >> >>> >
> >> >>> > code?
> >> >>> >
> >> >>> > HTH
> >> >>> >
> >> >>> > Erick
> >> >>> >
> >> >>> >
> >> >>> > On Mon, Dec 7, 2009 at 4:27 PM, TCK <moonwatcher32329@gmail.com>
> >> wrote:
> >> >>> >
> >> >>> > > Hi,
> >> >>> > > I'm having heap memory issues when I do lucene queries involving
> >> >>> sorting
> >> >>> > by
> >> >>> > > a string field. Such queries seem to load a lot of data in to the
> >> heap.
> >> >>> > > Moreover lucene seems to hold on to references to this data even
> >> after
> >> >>> > the
> >> >>> > > index reader has been closed and a full GC has been run. Some of
> >> the
> >> >>> > > consequences of this are that in my generational heap configuration
> >> a
> >> >>> lot
> >> >>> > > of
> >> >>> > > memory gets promoted to tenured space each time I close the old
> >> index
> >> >>> > > reader
> >> >>> > > and after opening and querying using a new one, and the tenured
> >> space
> >> >>> > > eventually gets fragmented causing a lot of promotion failures
> >> >>> resulting
> >> >>> > in
> >> >>> > > jvm hangs while the jvm does stop-the-world GCs.
> >> >>> > >
> >> >>> > > Does anyone know any workarounds to avoid these memory issues when
> >> >>> doing
> >> >>> > > such lucene queries?
> >> >>> > >
> >> >>> > > My profiling showed that even after a full GC lucene is holding on
> >> to a
> >> >>> > lot
> >> >>> > > of references to field value data notably via the
> >> >>> > > FieldCacheImpl/ExtendedFieldCacheImpl. I noticed that the
> >> WeakHashMap
> >> >>> > > readerCaches are using unbounded HashMaps as the innerCaches and I
> >> used
> >> >>> > > reflection to replace these innerCaches with dummy empty HashMaps,
> >> but
> >> >>> > > still
> >> >>> > > I'm seeing the same behavior. I wondered if anyone has gone through
> >> >>> these
> >> >>> > > same issues before and would offer any advice.
> >> >>> > >
> >> >>> > > Thanks a lot,
> >> >>> > > TCK
> >> >>> > >
> >> >>> >
> >> >>>
> >> >>
> >> >
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 10 14:13:32 2009
Return-Path: <java-user-return-44022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93359 invoked from network); 10 Dec 2009 14:13:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Dec 2009 14:13:32 -0000
Received: (qmail 68787 invoked by uid 500); 10 Dec 2009 14:13:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68712 invoked by uid 500); 10 Dec 2009 14:13:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68702 invoked by uid 99); 10 Dec 2009 14:13:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 14:13:29 +0000
X-ASF-Spam-Status: No, hits=-0.3 required=5.0
	tests=BAYES_00,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 14:13:27 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NIjlS-00044B-J4
	for java-user@lucene.apache.org; Thu, 10 Dec 2009 06:13:06 -0800
Message-ID: <26727888.post@talk.nabble.com>
Date: Thu, 10 Dec 2009 06:13:06 -0800 (PST)
From: Konstantyn Smirnov <injecteer@yahoo.com>
To: java-user@lucene.apache.org
Subject: TermEnum.skipTo in 3.0.0 replacement
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: injecteer@yahoo.com


Hi all

in the Lucene 2.3.2 there was a method in TermEnum skipTo( term )

In the 3.0.0 it's missing...

Are there any other way to skip terms?

-----
Konstantyn Smirnov, CTO 
http://www.poiradar.ru www.poiradar.ru 
http://www.poiradar.com.ua www.poiradar.com.ua 
http://www.poiradar.com www.poiradar.com 
http://www.poiradar.de www.poiradar.de 
-- 
View this message in context: http://old.nabble.com/TermEnum.skipTo-in-3.0.0-replacement-tp26727888p26727888.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 10 14:23:39 2009
Return-Path: <java-user-return-44023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99651 invoked from network); 10 Dec 2009 14:23:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Dec 2009 14:23:39 -0000
Received: (qmail 77300 invoked by uid 500); 10 Dec 2009 14:23:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77208 invoked by uid 500); 10 Dec 2009 14:23:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77198 invoked by uid 99); 10 Dec 2009 14:23:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 14:23:36 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.220.224 as permitted sender)
Received: from [209.85.220.224] (HELO mail-fx0-f224.google.com) (209.85.220.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 14:23:33 +0000
Received: by fxm24 with SMTP id 24so7531491fxm.11
        for <java-user@lucene.apache.org>; Thu, 10 Dec 2009 06:23:12 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=1nVSSITHYZx2ahZn/IIvXhcEQ9YG3QT2FHbXuuhGmK4=;
        b=Kc9A75Ii4sa8TOEM7O6WmRfH+ZKJzOU8RQaKm8U9v6DyF2JYu1InoV5wKmzpdBG8/G
         C89Vi5vDK9yg7FOAbEKJ8QF8LP+jieONmvCXk4kkffNMcbaAo45DMew79O8eBD29Xzdm
         OAEtfJUXIwBIwWWRbfRvqy2sx7iYYWt+RVAUQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=ldSUoknh2TAKHH8bLzTd9ffJfZdZgC5hxYf6nHJ80SdqGzpwRP5U7QuTlrApf4K3gh
         T2pJuGeagNW/fpDA6BwtJY+MNygDlrP+VjyzzCO/f/VCBlmSVfvnUnHZCH+c+2LOV3RK
         cFD8+jVHs/RoNNVSPjoVVc7zV5qyvg256wUC0=
MIME-Version: 1.0
Received: by 10.223.110.32 with SMTP id l32mr3344247fap.90.1260454992089; Thu, 
	10 Dec 2009 06:23:12 -0800 (PST)
In-Reply-To: <26727888.post@talk.nabble.com>
References: <26727888.post@talk.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 10 Dec 2009 14:22:52 +0000
Message-ID: <8c4e68610912100622jb5a0de7te6a539ee21aeec8d@mail.gmail.com>
Subject: Re: TermEnum.skipTo in 3.0.0 replacement
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

>From the 2.9.1 javadocs:

"Deprecated. This method is not performant and will be removed in
Lucene 3.0. Use IndexReader.terms(Term) to create a new TermEnum
positioned at a given term."

It is recommended to upgrade to 2.9.1, fix all the deprecations (see
the javadocs) and then upgrade, with a recompile, to 3.0.


--
Ian.


On Thu, Dec 10, 2009 at 2:13 PM, Konstantyn Smirnov <injecteer@yahoo.com> wrote:
>
> Hi all
>
> in the Lucene 2.3.2 there was a method in TermEnum skipTo( term )
>
> In the 3.0.0 it's missing...
>
> Are there any other way to skip terms?
>
> -----
> Konstantyn Smirnov, CTO
> http://www.poiradar.ru www.poiradar.ru
> http://www.poiradar.com.ua www.poiradar.com.ua
> http://www.poiradar.com www.poiradar.com
> http://www.poiradar.de www.poiradar.de
> --

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 10 14:24:10 2009
Return-Path: <java-user-return-44024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99958 invoked from network); 10 Dec 2009 14:24:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Dec 2009 14:24:10 -0000
Received: (qmail 79075 invoked by uid 500); 10 Dec 2009 14:24:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78993 invoked by uid 500); 10 Dec 2009 14:24:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78983 invoked by uid 99); 10 Dec 2009 14:24:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 14:24:08 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.219.225 as permitted sender)
Received: from [209.85.219.225] (HELO mail-ew0-f225.google.com) (209.85.219.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 14:24:05 +0000
Received: by ewy25 with SMTP id 25so7120565ewy.5
        for <java-user@lucene.apache.org>; Thu, 10 Dec 2009 06:23:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=uxMDHZ3n5LKhWFi6DNt01YEd70qk2QPIPtH+H/G7/T0=;
        b=i/KcmMbYLzv3EmvND9o6QfqnXCLICJ08c3u78unIAugYu2/m1OVpjPNYpaCkq9bMZT
         PILmeT1c1C8Tg9hOBJHv+QkLkXU2l2EKCp1M0FhOwLFaF6G26XrP0wwHnd1L8j2W82bG
         Rg6OykPYLxTj1FSEm9SXn3+IVyHcVVutHfvro=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=xuhp666VXYjM8OHl5JeBmtC76qvxhROqOTEhmS6NRaOhV6kvTVJZCoIor8FALJmWS9
         qeEL6saRV/nHYUXa989xivu866NtjdexSg3PNMk17YAm0HYrLZcSEcrv+J2/OTLsoi0M
         6uDrZtHebPfbT4Gnaxkr2BpggrZiSRDtTg1+Y=
MIME-Version: 1.0
Received: by 10.216.85.14 with SMTP id t14mr3688203wee.222.1260455024316; Thu, 
	10 Dec 2009 06:23:44 -0800 (PST)
In-Reply-To: <26727888.post@talk.nabble.com>
References: <26727888.post@talk.nabble.com>
Date: Thu, 10 Dec 2009 09:23:44 -0500
Message-ID: <359a92830912100623k603f4e2bvec33d8d618c566c4@mail.gmail.com>
Subject: Re: TermEnum.skipTo in 3.0.0 replacement
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d64109fad349047a608db7

--0016e6d64109fad349047a608db7
Content-Type: text/plain; charset=ISO-8859-1

An easy way to find this kind of thing is to go to the 2.9.1 documentation
and see where the deprecation alert sends you. FOr instance this is from
TermEnum.skipTo(Term target)....

 *Deprecated.* *This method is not performant and will be removed in Lucene
3.0. Use IndexReader.terms(Term)<http://lucene.apache.org/java/2_9_1/api/all/org/apache/lucene/index/IndexReader.html#terms(org.apache.lucene.index.Term)>
to
create a new TermEnum positioned at a given term.*

On Thu, Dec 10, 2009 at 9:13 AM, Konstantyn Smirnov <injecteer@yahoo.com>wrote:

>
> Hi all
>
> in the Lucene 2.3.2 there was a method in TermEnum skipTo( term )
>
> In the 3.0.0 it's missing...
>
> Are there any other way to skip terms?
>
> -----
> Konstantyn Smirnov, CTO
> http://www.poiradar.ru www.poiradar.ru
> http://www.poiradar.com.ua www.poiradar.com.ua
> http://www.poiradar.com www.poiradar.com
> http://www.poiradar.de www.poiradar.de
> --
> View this message in context:
> http://old.nabble.com/TermEnum.skipTo-in-3.0.0-replacement-tp26727888p26727888.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6d64109fad349047a608db7--

From java-user-return-44025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 10 14:24:23 2009
Return-Path: <java-user-return-44025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 284 invoked from network); 10 Dec 2009 14:24:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Dec 2009 14:24:22 -0000
Received: (qmail 80844 invoked by uid 500); 10 Dec 2009 14:24:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80782 invoked by uid 500); 10 Dec 2009 14:24:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80772 invoked by uid 99); 10 Dec 2009 14:24:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 14:24:20 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 14:24:10 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id DE0BCD36004
	for <java-user@lucene.apache.org>; Thu, 10 Dec 2009 15:23:48 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id xfNgNTmkJ-Vg for <java-user@lucene.apache.org>;
	Thu, 10 Dec 2009 15:23:39 +0100 (CET)
Received: from VEGA (unknown [134.102.249.75])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id CDA21D36001
	for <java-user@lucene.apache.org>; Thu, 10 Dec 2009 15:23:38 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <26727888.post@talk.nabble.com>
Subject: RE: TermEnum.skipTo in 3.0.0 replacement
Date: Thu, 10 Dec 2009 15:23:37 +0100
Message-ID: <F5703BA2ED5B4E95A348033587BAC841@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <26727888.post@talk.nabble.com>
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
Thread-index: Acp5owCWHj6UQT1FQmGSmdrpmYIt5AAARmwQ
X-Virus-Checked: Checked by ClamAV on apache.org

This method was always a linear scan and very slow (because it was never
implemented correctly). If you want to skip, close the termenum and retrieve
a new one with IndexReader.terms(Term seekTo) [internally e.g.
NumericRangeQuery does this, look into source code]. See also the
deprecation message in 2.9.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Konstantyn Smirnov [mailto:injecteer@yahoo.com]
> Sent: Thursday, December 10, 2009 3:13 PM
> To: java-user@lucene.apache.org
> Subject: TermEnum.skipTo in 3.0.0 replacement
> 
> 
> Hi all
> 
> in the Lucene 2.3.2 there was a method in TermEnum skipTo( term )
> 
> In the 3.0.0 it's missing...
> 
> Are there any other way to skip terms?
> 
> -----
> Konstantyn Smirnov, CTO
> http://www.poiradar.ru www.poiradar.ru
> http://www.poiradar.com.ua www.poiradar.com.ua
> http://www.poiradar.com www.poiradar.com
> http://www.poiradar.de www.poiradar.de
> --
> View this message in context: http://old.nabble.com/TermEnum.skipTo-in-
> 3.0.0-replacement-tp26727888p26727888.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 10 15:01:18 2009
Return-Path: <java-user-return-44026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14823 invoked from network); 10 Dec 2009 15:01:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Dec 2009 15:01:18 -0000
Received: (qmail 30633 invoked by uid 500); 10 Dec 2009 15:01:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30551 invoked by uid 500); 10 Dec 2009 15:01:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30541 invoked by uid 99); 10 Dec 2009 15:01:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 15:01:16 +0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 15:01:07 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NIkVa-0008TE-Tg
	for java-user@lucene.apache.org; Thu, 10 Dec 2009 07:00:46 -0800
Message-ID: <26728668.post@talk.nabble.com>
Date: Thu, 10 Dec 2009 07:00:46 -0800 (PST)
From: Konstantyn Smirnov <injecteer@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: TermEnum.skipTo in 3.0.0 replacement
In-Reply-To: <8c4e68610912100622jb5a0de7te6a539ee21aeec8d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: injecteer@yahoo.com
References: <26727888.post@talk.nabble.com> <8c4e68610912100622jb5a0de7te6a539ee21aeec8d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


thanks guys! :)

another question, what is faster indexReader.terms( t ) or 10 times
termEnum.next() ?

-----
Konstantyn Smirnov, CTO 
http://www.poiradar.ru www.poiradar.ru 
http://www.poiradar.com.ua www.poiradar.com.ua 
http://www.poiradar.com www.poiradar.com 
http://www.poiradar.de www.poiradar.de 
-- 
View this message in context: http://old.nabble.com/TermEnum.skipTo-in-3.0.0-replacement-tp26727888p26728668.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 10 15:35:09 2009
Return-Path: <java-user-return-44027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29727 invoked from network); 10 Dec 2009 15:35:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Dec 2009 15:35:09 -0000
Received: (qmail 99460 invoked by uid 500); 10 Dec 2009 15:35:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99386 invoked by uid 500); 10 Dec 2009 15:35:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99376 invoked by uid 99); 10 Dec 2009 15:35:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 15:35:06 +0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of roman.baeriswyl@comparis.ch designates 77.109.144.6 as permitted sender)
Received: from [77.109.144.6] (HELO mimas.comparis.ch) (77.109.144.6)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 15:34:55 +0000
Received: from mimas.comparis.ch ([192.168.1.161]) by mimas.comparis.ch
 ([192.168.1.161]) with mapi; Thu, 10 Dec 2009 16:34:34 +0100
From: comparis.ch - Roman Baeriswyl <roman.baeriswyl@comparis.ch>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Date: Thu, 10 Dec 2009 16:34:33 +0100
Subject: "IN" Query for NumericFields
Thread-Topic: "IN" Query for NumericFields
Thread-Index: Acp5rYtt4o7cl7fqRCmu8gchWXpwVgAAGcIgAAAT+uA=
Message-ID: <F48EBC643BB1F344A84D2724AD7397C40EC6C22240@mimas.comparis.ch>
Accept-Language: de-DE, de-CH
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I do have some indices where I need to get results based on a fixed number =
list (not a range)
Let's say I have a field named "CategoryID" and I now need all results wher=
e "CategoryID" is 1,3 or 7.

In Lucene 2.4 I created a QueryParser which looked like: "CategoryID:(1 3 7=
)". But the Query Parser won't work with NumericFields...

How can I achieve the same for NumericFields?

Btw I'm using Lucene.net.

Thanks for Help
//Roman

comparis.ch auf Twitter folgen: http://twitter.com/comparis

Ein Freund auf Facebook werden: http://www.facebook.com/comparis.ch

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 10 15:40:33 2009
Return-Path: <java-user-return-44028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31499 invoked from network); 10 Dec 2009 15:40:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Dec 2009 15:40:33 -0000
Received: (qmail 12031 invoked by uid 500); 10 Dec 2009 15:40:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11951 invoked by uid 500); 10 Dec 2009 15:40:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11941 invoked by uid 99); 10 Dec 2009 15:40:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 15:40:30 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of shashi.mit@gmail.com designates 209.85.220.224 as permitted sender)
Received: from [209.85.220.224] (HELO mail-fx0-f224.google.com) (209.85.220.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 15:40:19 +0000
Received: by fxm24 with SMTP id 24so7619026fxm.11
        for <java-user@lucene.apache.org>; Thu, 10 Dec 2009 07:39:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:received:in-reply-to
         :references:from:date:x-google-sender-auth:message-id:subject:to
         :content-type;
        bh=LFWK0CmQgi9LvUESqON9HXsLlmjtMuoEuA3/T687KWM=;
        b=lpXZTD1lLmKgpl4zGfG7235uVomID0fq9EWAox8FIp2HKIr6JhWAlADiC0k8w2r8ib
         GdpsfDBbigL2NdJ5bVsA4oI0cs6kLU4r3eggF/O6fiK8+joUb25etrAyWtqbQ5b9FrfO
         JDTKllBwZf1biQ3oOG0jQF+8UWIWCiIE+nK1o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:in-reply-to:references:from:date
         :x-google-sender-auth:message-id:subject:to:content-type;
        b=AHhyPECCTSOmQBL/15IzhoGSKnY28aW82MMsJGc0dtB1V3jGtV5DnZx6cLYOz4IW6K
         VeIAfi2DZDaASau2jgXg5aym5b7bDzrS4zMXdFLPhLhpHg3o4e6VGsxAZVeQ8GQHL7XO
         bfgZV4yDhcSu3CkWAYGEUCKauh+C9RDL8j+O8=
MIME-Version: 1.0
Sender: shashi.mit@gmail.com
Received: by 10.216.88.78 with SMTP id z56mr34849wee.37.1260459598824; Thu, 10 
	Dec 2009 07:39:58 -0800 (PST)
In-Reply-To: <F48EBC643BB1F344A84D2724AD7397C40EC6C22240@mimas.comparis.ch>
References: <F48EBC643BB1F344A84D2724AD7397C40EC6C22240@mimas.comparis.ch>
From: Shashi Kant <skant@sloan.mit.edu>
Date: Thu, 10 Dec 2009 10:39:37 -0500
X-Google-Sender-Auth: 8c261a02a658ef9b
Message-ID: <4d19a3630912100739v5d1c833dk4d00c69d246a98fa@mail.gmail.com>
Subject: Re: "IN" Query for NumericFields
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d9a23ba444ba047a619e7f
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d9a23ba444ba047a619e7f
Content-Type: text/plain; charset=ISO-8859-1

Have you looked at BooleanQuery? Create individual TermQuery and OR them
using BooleanQuery.

On Thu, Dec 10, 2009 at 10:34 AM, comparis.ch - Roman Baeriswyl <
roman.baeriswyl@comparis.ch> wrote:

> Hi,
>
> I do have some indices where I need to get results based on a fixed number
> list (not a range)
> Let's say I have a field named "CategoryID" and I now need all results
> where "CategoryID" is 1,3 or 7.
>
> In Lucene 2.4 I created a QueryParser which looked like: "CategoryID:(1 3
> 7)". But the Query Parser won't work with NumericFields...
>
> How can I achieve the same for NumericFields?
>
> Btw I'm using Lucene.net.
>
> Thanks for Help
> //Roman
>
> comparis.ch auf Twitter folgen: http://twitter.com/comparis
>
> Ein Freund auf Facebook werden: http://www.facebook.com/comparis.ch
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6d9a23ba444ba047a619e7f--

From java-user-return-44029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 10 15:41:15 2009
Return-Path: <java-user-return-44029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31674 invoked from network); 10 Dec 2009 15:41:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Dec 2009 15:41:15 -0000
Received: (qmail 14314 invoked by uid 500); 10 Dec 2009 15:41:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14248 invoked by uid 500); 10 Dec 2009 15:41:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14238 invoked by uid 99); 10 Dec 2009 15:41:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 15:41:12 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 15:41:01 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 573AED36004
	for <java-user@lucene.apache.org>; Thu, 10 Dec 2009 16:40:41 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 7OM7eGCeR0Bb for <java-user@lucene.apache.org>;
	Thu, 10 Dec 2009 16:40:29 +0100 (CET)
Received: from VEGA (unknown [134.102.249.75])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id CD8A8D36001
	for <java-user@lucene.apache.org>; Thu, 10 Dec 2009 16:40:29 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <F48EBC643BB1F344A84D2724AD7397C40EC6C22240@mimas.comparis.ch>
Subject: RE: "IN" Query for NumericFields
Date: Thu, 10 Dec 2009 16:40:28 +0100
Message-ID: <A3A4AA2812E1449FB9B40B5CF6FB1733@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <F48EBC643BB1F344A84D2724AD7397C40EC6C22240@mimas.comparis.ch>
Thread-Index: Acp5rYtt4o7cl7fqRCmu8gchWXpwVgAAGcIgAAAT+uAAACWP4A==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

You can override QP's newTermQuery method. Look into the list archives and
search for both keywords. There it is also explained how to use
NumericRangeQuery with QP.

The ideal solution to hit exact terms are to use NumericRangeQuery with
upper lower bound indentical and inclusive.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: comparis.ch - Roman Baeriswyl [mailto:roman.baeriswyl@comparis.ch]
> Sent: Thursday, December 10, 2009 4:35 PM
> To: 'java-user@lucene.apache.org'
> Subject: "IN" Query for NumericFields
> 
> Hi,
> 
> I do have some indices where I need to get results based on a fixed number
> list (not a range)
> Let's say I have a field named "CategoryID" and I now need all results
> where "CategoryID" is 1,3 or 7.
> 
> In Lucene 2.4 I created a QueryParser which looked like: "CategoryID:(1 3
> 7)". But the Query Parser won't work with NumericFields...
> 
> How can I achieve the same for NumericFields?
> 
> Btw I'm using Lucene.net.
> 
> Thanks for Help
> //Roman
> 
> comparis.ch auf Twitter folgen: http://twitter.com/comparis
> 
> Ein Freund auf Facebook werden: http://www.facebook.com/comparis.ch
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 10 16:26:47 2009
Return-Path: <java-user-return-44030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48665 invoked from network); 10 Dec 2009 16:26:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Dec 2009 16:26:47 -0000
Received: (qmail 9199 invoked by uid 500); 10 Dec 2009 16:26:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9101 invoked by uid 500); 10 Dec 2009 16:26:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9059 invoked by uid 99); 10 Dec 2009 16:26:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 16:26:41 +0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of roman.baeriswyl@comparis.ch designates 77.109.144.6 as permitted sender)
Received: from [77.109.144.6] (HELO mimas.comparis.ch) (77.109.144.6)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 16:26:29 +0000
Received: from mimas.comparis.ch ([192.168.1.161]) by mimas.comparis.ch
 ([192.168.1.161]) with mapi; Thu, 10 Dec 2009 17:26:08 +0100
From: comparis.ch - Roman Baeriswyl <roman.baeriswyl@comparis.ch>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Date: Thu, 10 Dec 2009 17:24:15 +0100
Subject: RE: "IN" Query for NumericFields
Thread-Topic: "IN" Query for NumericFields
Thread-Index: Acp5rxzZqJSNbIcQSmOK8VjOYG5qdwABat+g
Message-ID: <F48EBC643BB1F344A84D2724AD7397C40EC6C22241@mimas.comparis.ch>
References: <F48EBC643BB1F344A84D2724AD7397C40EC6C22240@mimas.comparis.ch>
 <4d19a3630912100739v5d1c833dk4d00c69d246a98fa@mail.gmail.com>
In-Reply-To: <4d19a3630912100739v5d1c833dk4d00c69d246a98fa@mail.gmail.com>
Accept-Language: de-DE, de-CH
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

I tried

Query q =3D new BooleanQuery();
((BooleanQuery)q).Add(NumericRangeQuery.NewLongRange("CategoryID", 1, 1, tr=
ue, true), BooleanClause.Occur.MUST);
((BooleanQuery)q).Add(NumericRangeQuery.NewLongRange("CategoryID", 3, 3, tr=
ue, true), BooleanClause.Occur.MUST);
((BooleanQuery)q).Add(NumericRangeQuery.NewLongRange("CategoryID", 7, 7, tr=
ue, true), BooleanClause.Occur.MUST);

But that seems to mach all Documents in my Index.

-----Original Message-----
From: shashi.mit@gmail.com [mailto:shashi.mit@gmail.com] On Behalf Of Shash=
i Kant
Sent: Donnerstag, 10. Dezember 2009 16:40
To: java-user@lucene.apache.org
Subject: Re: "IN" Query for NumericFields

Have you looked at BooleanQuery? Create individual TermQuery and OR them
using BooleanQuery.

On Thu, Dec 10, 2009 at 10:34 AM, comparis.ch - Roman Baeriswyl <
roman.baeriswyl@comparis.ch> wrote:

> Hi,
>
> I do have some indices where I need to get results based on a fixed numbe=
r
> list (not a range)
> Let's say I have a field named "CategoryID" and I now need all results
> where "CategoryID" is 1,3 or 7.
>
> In Lucene 2.4 I created a QueryParser which looked like: "CategoryID:(1 3
> 7)". But the Query Parser won't work with NumericFields...
>
> How can I achieve the same for NumericFields?
>
> Btw I'm using Lucene.net.
>
> Thanks for Help
> //Roman
>
> comparis.ch auf Twitter folgen: http://twitter.com/comparis
>
> Ein Freund auf Facebook werden: http://www.facebook.com/comparis.ch
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

comparis.ch auf Twitter folgen: http://twitter.com/comparis

Ein Freund auf Facebook werden: http://www.facebook.com/comparis.ch

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 10 18:03:52 2009
Return-Path: <java-user-return-44031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4995 invoked from network); 10 Dec 2009 18:03:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Dec 2009 18:03:52 -0000
Received: (qmail 74240 invoked by uid 500); 10 Dec 2009 18:03:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74156 invoked by uid 500); 10 Dec 2009 18:03:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74146 invoked by uid 99); 10 Dec 2009 18:03:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 18:03:49 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 18:03:38 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id DE120D36005
	for <java-user@lucene.apache.org>; Thu, 10 Dec 2009 19:03:17 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id hkIQamU5KwOc for <java-user@lucene.apache.org>;
	Thu, 10 Dec 2009 19:03:06 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 39F4AD36001
	for <java-user@lucene.apache.org>; Thu, 10 Dec 2009 19:03:06 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <F48EBC643BB1F344A84D2724AD7397C40EC6C22240@mimas.comparis.ch> <4d19a3630912100739v5d1c833dk4d00c69d246a98fa@mail.gmail.com> <F48EBC643BB1F344A84D2724AD7397C40EC6C22241@mimas.comparis.ch>
Subject: RE: "IN" Query for NumericFields
Date: Thu, 10 Dec 2009 19:03:05 +0100
Message-ID: <0BD98686910A41E9AD92D0F0A1E9F364@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Acp5rxzZqJSNbIcQSmOK8VjOYG5qdwABat+gAAOOrTA=
In-Reply-To: <F48EBC643BB1F344A84D2724AD7397C40EC6C22241@mimas.comparis.ch>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

Cannot be :-) Is the precstep identical?

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: comparis.ch - Roman Baeriswyl [mailto:roman.baeriswyl@comparis.ch]
> Sent: Thursday, December 10, 2009 5:24 PM
> To: 'java-user@lucene.apache.org'
> Subject: RE: "IN" Query for NumericFields
> 
> I tried
> 
> Query q = new BooleanQuery();
> ((BooleanQuery)q).Add(NumericRangeQuery.NewLongRange("CategoryID", 1, 1,
> true, true), BooleanClause.Occur.MUST);
> ((BooleanQuery)q).Add(NumericRangeQuery.NewLongRange("CategoryID", 3, 3,
> true, true), BooleanClause.Occur.MUST);
> ((BooleanQuery)q).Add(NumericRangeQuery.NewLongRange("CategoryID", 7, 7,
> true, true), BooleanClause.Occur.MUST);
> 
> But that seems to mach all Documents in my Index.
> 
> -----Original Message-----
> From: shashi.mit@gmail.com [mailto:shashi.mit@gmail.com] On Behalf Of
> Shashi Kant
> Sent: Donnerstag, 10. Dezember 2009 16:40
> To: java-user@lucene.apache.org
> Subject: Re: "IN" Query for NumericFields
> 
> Have you looked at BooleanQuery? Create individual TermQuery and OR them
> using BooleanQuery.
> 
> On Thu, Dec 10, 2009 at 10:34 AM, comparis.ch - Roman Baeriswyl <
> roman.baeriswyl@comparis.ch> wrote:
> 
> > Hi,
> >
> > I do have some indices where I need to get results based on a fixed
> number
> > list (not a range)
> > Let's say I have a field named "CategoryID" and I now need all results
> > where "CategoryID" is 1,3 or 7.
> >
> > In Lucene 2.4 I created a QueryParser which looked like: "CategoryID:(1
> 3
> > 7)". But the Query Parser won't work with NumericFields...
> >
> > How can I achieve the same for NumericFields?
> >
> > Btw I'm using Lucene.net.
> >
> > Thanks for Help
> > //Roman
> >
> > comparis.ch auf Twitter folgen: http://twitter.com/comparis
> >
> > Ein Freund auf Facebook werden: http://www.facebook.com/comparis.ch
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> comparis.ch auf Twitter folgen: http://twitter.com/comparis
> 
> Ein Freund auf Facebook werden: http://www.facebook.com/comparis.ch
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 10 18:15:19 2009
Return-Path: <java-user-return-44032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12179 invoked from network); 10 Dec 2009 18:15:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Dec 2009 18:15:19 -0000
Received: (qmail 93992 invoked by uid 500); 10 Dec 2009 18:15:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93905 invoked by uid 500); 10 Dec 2009 18:15:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93895 invoked by uid 99); 10 Dec 2009 18:15:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 18:15:17 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 18:15:14 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 0CBF7D36004
	for <java-user@lucene.apache.org>; Thu, 10 Dec 2009 19:14:50 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id G7vBtkdEcZHG for <java-user@lucene.apache.org>;
	Thu, 10 Dec 2009 19:14:38 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 3992ED36001
	for <java-user@lucene.apache.org>; Thu, 10 Dec 2009 19:14:37 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <F48EBC643BB1F344A84D2724AD7397C40EC6C22240@mimas.comparis.ch> <4d19a3630912100739v5d1c833dk4d00c69d246a98fa@mail.gmail.com> <F48EBC643BB1F344A84D2724AD7397C40EC6C22241@mimas.comparis.ch> <0BD98686910A41E9AD92D0F0A1E9F364@VEGA>
Subject: RE: "IN" Query for NumericFields
Date: Thu, 10 Dec 2009 19:14:36 +0100
Message-ID: <FA85D93E762847E3B7E1C3A19E84FD4F@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <0BD98686910A41E9AD92D0F0A1E9F364@VEGA>
Thread-Index: Acp5rxzZqJSNbIcQSmOK8VjOYG5qdwABat+gAAOOrTAAAFesgA==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579

Sorry, if you have an IN query, it must be BooleanClause.Occur.SHOULD, as
the CategoryID can be 1, or 3 or 7. You query should not match any doc (I
verified this).

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Uwe Schindler [mailto:uwe@thetaphi.de]
> Sent: Thursday, December 10, 2009 7:03 PM
> To: java-user@lucene.apache.org
> Subject: RE: "IN" Query for NumericFields
> 
> Cannot be :-) Is the precstep identical?
> 
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
> 
> 
> > -----Original Message-----
> > From: comparis.ch - Roman Baeriswyl [mailto:roman.baeriswyl@comparis.ch]
> > Sent: Thursday, December 10, 2009 5:24 PM
> > To: 'java-user@lucene.apache.org'
> > Subject: RE: "IN" Query for NumericFields
> >
> > I tried
> >
> > Query q = new BooleanQuery();
> > ((BooleanQuery)q).Add(NumericRangeQuery.NewLongRange("CategoryID", 1, 1,
> > true, true), BooleanClause.Occur.MUST);
> > ((BooleanQuery)q).Add(NumericRangeQuery.NewLongRange("CategoryID", 3, 3,
> > true, true), BooleanClause.Occur.MUST);
> > ((BooleanQuery)q).Add(NumericRangeQuery.NewLongRange("CategoryID", 7, 7,
> > true, true), BooleanClause.Occur.MUST);
> >
> > But that seems to mach all Documents in my Index.
> >
> > -----Original Message-----
> > From: shashi.mit@gmail.com [mailto:shashi.mit@gmail.com] On Behalf Of
> > Shashi Kant
> > Sent: Donnerstag, 10. Dezember 2009 16:40
> > To: java-user@lucene.apache.org
> > Subject: Re: "IN" Query for NumericFields
> >
> > Have you looked at BooleanQuery? Create individual TermQuery and OR them
> > using BooleanQuery.
> >
> > On Thu, Dec 10, 2009 at 10:34 AM, comparis.ch - Roman Baeriswyl <
> > roman.baeriswyl@comparis.ch> wrote:
> >
> > > Hi,
> > >
> > > I do have some indices where I need to get results based on a fixed
> > number
> > > list (not a range)
> > > Let's say I have a field named "CategoryID" and I now need all results
> > > where "CategoryID" is 1,3 or 7.
> > >
> > > In Lucene 2.4 I created a QueryParser which looked like:
> "CategoryID:(1
> > 3
> > > 7)". But the Query Parser won't work with NumericFields...
> > >
> > > How can I achieve the same for NumericFields?
> > >
> > > Btw I'm using Lucene.net.
> > >
> > > Thanks for Help
> > > //Roman
> > >
> > > comparis.ch auf Twitter folgen: http://twitter.com/comparis
> > >
> > > Ein Freund auf Facebook werden: http://www.facebook.com/comparis.ch
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> > comparis.ch auf Twitter folgen: http://twitter.com/comparis
> >
> > Ein Freund auf Facebook werden: http://www.facebook.com/comparis.ch
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 10 18:51:39 2009
Return-Path: <java-user-return-44033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37230 invoked from network); 10 Dec 2009 18:51:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Dec 2009 18:51:39 -0000
Received: (qmail 50577 invoked by uid 500); 10 Dec 2009 18:51:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50499 invoked by uid 500); 10 Dec 2009 18:51:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50489 invoked by uid 99); 10 Dec 2009 18:51:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 18:51:36 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 18:51:32 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.14.2/8.14.2) with ESMTP id nBAIoSkW027883
	for <java-user@lucene.apache.org>; Thu, 10 Dec 2009 13:50:30 -0500 (EST)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <4B2142F4.6070801@informatics.jax.org>
Date: Thu, 10 Dec 2009 13:50:28 -0500
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: "IN" Query for NumericFields
References: <F48EBC643BB1F344A84D2724AD7397C40EC6C22240@mimas.comparis.ch> <4d19a3630912100739v5d1c833dk4d00c69d246a98fa@mail.gmail.com> <F48EBC643BB1F344A84D2724AD7397C40EC6C22241@mimas.comparis.ch> <0BD98686910A41E9AD92D0F0A1E9F364@VEGA> <FA85D93E762847E3B7E1C3A19E84FD4F@VEGA>
In-Reply-To: <FA85D93E762847E3B7E1C3A19E84FD4F@VEGA>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

I suspect he's running the query through an analyzer that is dropping 
out single digit numerics, which would basically be a query that pulls 
back everything from the indexes.. or at least I think so.

Uwe Schindler wrote:
> Sorry, if you have an IN query, it must be BooleanClause.Occur.SHOULD, as
> the CategoryID can be 1, or 3 or 7. You query should not match any doc (I
> verified this).
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>   
>> -----Original Message-----
>> From: Uwe Schindler [mailto:uwe@thetaphi.de]
>> Sent: Thursday, December 10, 2009 7:03 PM
>> To: java-user@lucene.apache.org
>> Subject: RE: "IN" Query for NumericFields
>>
>> Cannot be :-) Is the precstep identical?
>>
>> -----
>> Uwe Schindler
>> H.-H.-Meier-Allee 63, D-28213 Bremen
>> http://www.thetaphi.de
>> eMail: uwe@thetaphi.de
>>
>>
>>     
>>> -----Original Message-----
>>> From: comparis.ch - Roman Baeriswyl [mailto:roman.baeriswyl@comparis.ch]
>>> Sent: Thursday, December 10, 2009 5:24 PM
>>> To: 'java-user@lucene.apache.org'
>>> Subject: RE: "IN" Query for NumericFields
>>>
>>> I tried
>>>
>>> Query q = new BooleanQuery();
>>> ((BooleanQuery)q).Add(NumericRangeQuery.NewLongRange("CategoryID", 1, 1,
>>> true, true), BooleanClause.Occur.MUST);
>>> ((BooleanQuery)q).Add(NumericRangeQuery.NewLongRange("CategoryID", 3, 3,
>>> true, true), BooleanClause.Occur.MUST);
>>> ((BooleanQuery)q).Add(NumericRangeQuery.NewLongRange("CategoryID", 7, 7,
>>> true, true), BooleanClause.Occur.MUST);
>>>
>>> But that seems to mach all Documents in my Index.
>>>
>>> -----Original Message-----
>>> From: shashi.mit@gmail.com [mailto:shashi.mit@gmail.com] On Behalf Of
>>> Shashi Kant
>>> Sent: Donnerstag, 10. Dezember 2009 16:40
>>> To: java-user@lucene.apache.org
>>> Subject: Re: "IN" Query for NumericFields
>>>
>>> Have you looked at BooleanQuery? Create individual TermQuery and OR them
>>> using BooleanQuery.
>>>
>>> On Thu, Dec 10, 2009 at 10:34 AM, comparis.ch - Roman Baeriswyl <
>>> roman.baeriswyl@comparis.ch> wrote:
>>>
>>>       
>>>> Hi,
>>>>
>>>> I do have some indices where I need to get results based on a fixed
>>>>         
>>> number
>>>       
>>>> list (not a range)
>>>> Let's say I have a field named "CategoryID" and I now need all results
>>>> where "CategoryID" is 1,3 or 7.
>>>>
>>>> In Lucene 2.4 I created a QueryParser which looked like:
>>>>         
>> "CategoryID:(1
>>     
>>> 3
>>>       
>>>> 7)". But the Query Parser won't work with NumericFields...
>>>>
>>>> How can I achieve the same for NumericFields?
>>>>
>>>> Btw I'm using Lucene.net.
>>>>
>>>> Thanks for Help
>>>> //Roman
>>>>
>>>> comparis.ch auf Twitter folgen: http://twitter.com/comparis
>>>>
>>>> Ein Freund auf Facebook werden: http://www.facebook.com/comparis.ch
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>         
>>> comparis.ch auf Twitter folgen: http://twitter.com/comparis
>>>
>>> Ein Freund auf Facebook werden: http://www.facebook.com/comparis.ch
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>       
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>     
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 10 20:20:40 2009
Return-Path: <java-user-return-44034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72701 invoked from network); 10 Dec 2009 20:20:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Dec 2009 20:20:40 -0000
Received: (qmail 93196 invoked by uid 500); 10 Dec 2009 20:20:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93122 invoked by uid 500); 10 Dec 2009 20:20:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93112 invoked by uid 99); 10 Dec 2009 20:20:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 20:20:38 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of karl.wettin@gmail.com designates 74.125.78.27 as permitted sender)
Received: from [74.125.78.27] (HELO ey-out-2122.google.com) (74.125.78.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 20:20:28 +0000
Received: by ey-out-2122.google.com with SMTP id 22so134219eye.3
        for <java-user@lucene.apache.org>; Thu, 10 Dec 2009 12:20:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=BrZpFIWO3xem8rW1GTILaFYhmcBdqIu+5KMCU0xrYNI=;
        b=BDNfeutLY/cp0nr+fqcIUhglMXlgU0/EIZvRHF3Dq6f174O+BHxtrE/ebGP5ok2y5R
         RcnFgmQSJbRtNZCyjgYcyQaFWimsUy0nxqAkapIioqnGfPEIHf8aiv6qckG0cv/W+c+X
         7dYmsy5HIVLEkNvIiVnr2ndrwYEQ4MtqKwTXo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=M8V7Nczv0gHVnrK+E/u1bsAyanGqWE1JyefkB1lZSVAMEvoyc8YzHzBBwFY3gHIetL
         eE2T7Zl0vQoAt5HbTledWAIuCcuCEz8zudg1ueYekHDNOiZVO/KNROoMbnLGSGOQ1qAj
         +ygLRZXg5elV0cogTk4T1m6jpzL5k2ZCrEZaE=
Received: by 10.213.15.4 with SMTP id i4mr3225626eba.80.1260476407364;
        Thu, 10 Dec 2009 12:20:07 -0800 (PST)
Received: from ?192.168.1.201? (c-8f8170d5.029-18-6d6c6d2.cust.bredbandsbolaget.se [213.112.129.143])
        by mx.google.com with ESMTPS id 28sm8399202eye.9.2009.12.10.12.20.05
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 10 Dec 2009 12:20:05 -0800 (PST)
Message-Id: <3041A220-35A4-4E91-83B5-D68A6523D9D6@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <467107581D194DA996B89CCA45E93D31@VEGA>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v936)
Subject: Re: MatchAllDocsQuery and InstantiatedIndex on Lucene 2.9.1
Date: Thu, 10 Dec 2009 21:20:04 +0100
References: <9fad81fd0912091048y8bf5fc1qe9bd408a99220eae@mail.gmail.com> <467107581D194DA996B89CCA45E93D31@VEGA>
X-Mailer: Apple Mail (2.936)
X-Virus-Checked: Checked by ClamAV on apache.org

https://issues.apache.org/jira/browse/LUCENE-2144

9 dec 2009 kl. 23.22 skrev Uwe Schindler:

> This is a bug in InstantiatedIndex. The termDoc(null) was added to  
> get all
> documents. This was never implemented in Instantiated Index. Can you  
> open an
> issue?
>
> There maybe other queries fail because of this (e.g.
> FieldCacheRangeFilter,...).
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>> -----Original Message-----
>> From: Jason Fennell [mailto:jdfennell@gmail.com]
>> Sent: Wednesday, December 09, 2009 7:48 PM
>> To: java-user@lucene.apache.org
>> Subject: MatchAllDocsQuery and InstantiatedIndex on Lucene 2.9.1
>>
>> I'm trying to upgrade our application from Lucene 2.4.1 to Lucene  
>> 2.9.1.
>> I've been using an InstantiatedIndex to do a bunch of unit testing,  
>> but am
>> running into a some problems with Lucene 2.9.1.
>> In particular, when I try to run a MatchAllDocsQuery on my
>> InstantiatedIndex
>> (which worked fine on 2.4.1) a NullPointerException is raised.  I  
>> think I
>> tracked down the problem in the Lucene source.
>>
>> In the 2.9.1 MatchAllDocsQuery, the MatchAllScorer retrieves  
>> termDocs from
>> the IndexReader passed to it with
>>
>> reader.termDocs(null)
>>
>> which I assume is supposed to return all termDocs.  However,  
>> tracing this
>> call down
>>
>> IndexReader.termDocs(term) calls InstantiatedTermDocs.seek(
>> term) calls InstantiatedIndex.findTerm(term)
>>
>> which is implemented as
>>
>> InstantiatedTerm findTerm(Term term) {
>>    return findTerm(term.field(), term.text());
>> }
>>
>> which, since term is null, results in a NullPointerException.  This  
>> seems
>> to
>> me like an bug either in the MatchAllDocsQuery implementation (the  
>> version
>> in 2.4.1 did not use termDocs, so did not pass through this null),  
>> or a
>> bug
>> in the implementation of InstantiatedIndex.
>>
>> Any suggestions on what I can do about this?  I definitely can't  
>> get rid
>> of
>> the MatchAllDocsQuery and don't really want to move back to a slow
>> RAMDirectory.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 10 20:40:41 2009
Return-Path: <java-user-return-44035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79919 invoked from network); 10 Dec 2009 20:40:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Dec 2009 20:40:41 -0000
Received: (qmail 22859 invoked by uid 500); 10 Dec 2009 20:40:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22779 invoked by uid 500); 10 Dec 2009 20:40:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22769 invoked by uid 99); 10 Dec 2009 20:40:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 20:40:38 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jdfennell@gmail.com designates 209.85.221.188 as permitted sender)
Received: from [209.85.221.188] (HELO mail-qy0-f188.google.com) (209.85.221.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Dec 2009 20:40:36 +0000
Received: by qyk26 with SMTP id 26so102479qyk.5
        for <java-user@lucene.apache.org>; Thu, 10 Dec 2009 12:40:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=Fe+A73ID+abHRlrd6dsZ4WTl9/fI7iDrCkI77uB3Kmo=;
        b=fusQ0FqLzy3JjeRdAJX0etLzgbNzwvknKoK4QGl1bCIuCjtjgq90/leN5WGEkpfWks
         5tLg6THxpsUI5d/S7vT5LgOPUmGU6M4irwX1jNecNzELu3TcdRiuqrtX0k+yXBq5rPce
         BsRFYChLVuH0DEEVwVAj7bE5TQB5WhCR/F0ro=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=Z0f6kPNjFlgVOoU6UnI1M1ZisNKxx6Z5emVPqgklZLchJCBej1eile3D3Sq1IGtmpO
         FXpoASIYsl66qCslL4wy2Fr7qGg0Q8uAw3SbAuK0mWnPiYeaGgy+sXqR/UjgnQQ7AhLk
         CTgkEHi/7e//ziXoM2ImrxRW1igNvOD1CggKM=
MIME-Version: 1.0
Received: by 10.224.14.81 with SMTP id f17mr304270qaa.124.1260477615283; Thu, 
	10 Dec 2009 12:40:15 -0800 (PST)
In-Reply-To: <3041A220-35A4-4E91-83B5-D68A6523D9D6@gmail.com>
References: <9fad81fd0912091048y8bf5fc1qe9bd408a99220eae@mail.gmail.com> 
	<467107581D194DA996B89CCA45E93D31@VEGA> <3041A220-35A4-4E91-83B5-D68A6523D9D6@gmail.com>
From: Jason Fennell <jdfennell@gmail.com>
Date: Thu, 10 Dec 2009 12:39:55 -0800
Message-ID: <9fad81fd0912101239p72bc2097udc879ff105d2b45d@mail.gmail.com>
Subject: Re: MatchAllDocsQuery and InstantiatedIndex on Lucene 2.9.1
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485ecd28c819e77047a65d0a5

--001485ecd28c819e77047a65d0a5
Content-Type: text/plain; charset=ISO-8859-1

Thanks for the fast reply & patch!

On Thu, Dec 10, 2009 at 12:20 PM, Karl Wettin <karl.wettin@gmail.com> wrote:

> https://issues.apache.org/jira/browse/LUCENE-2144
>
> 9 dec 2009 kl. 23.22 skrev Uwe Schindler:
>
>
>  This is a bug in InstantiatedIndex. The termDoc(null) was added to get all
>> documents. This was never implemented in Instantiated Index. Can you open
>> an
>> issue?
>>
>> There maybe other queries fail because of this (e.g.
>> FieldCacheRangeFilter,...).
>>
>> -----
>> Uwe Schindler
>> H.-H.-Meier-Allee 63, D-28213 Bremen
>> http://www.thetaphi.de
>> eMail: uwe@thetaphi.de
>>
>>  -----Original Message-----
>>> From: Jason Fennell [mailto:jdfennell@gmail.com]
>>> Sent: Wednesday, December 09, 2009 7:48 PM
>>> To: java-user@lucene.apache.org
>>> Subject: MatchAllDocsQuery and InstantiatedIndex on Lucene 2.9.1
>>>
>>> I'm trying to upgrade our application from Lucene 2.4.1 to Lucene 2.9.1.
>>> I've been using an InstantiatedIndex to do a bunch of unit testing, but
>>> am
>>> running into a some problems with Lucene 2.9.1.
>>> In particular, when I try to run a MatchAllDocsQuery on my
>>> InstantiatedIndex
>>> (which worked fine on 2.4.1) a NullPointerException is raised.  I think I
>>> tracked down the problem in the Lucene source.
>>>
>>> In the 2.9.1 MatchAllDocsQuery, the MatchAllScorer retrieves termDocs
>>> from
>>> the IndexReader passed to it with
>>>
>>> reader.termDocs(null)
>>>
>>> which I assume is supposed to return all termDocs.  However, tracing this
>>> call down
>>>
>>> IndexReader.termDocs(term) calls InstantiatedTermDocs.seek(
>>> term) calls InstantiatedIndex.findTerm(term)
>>>
>>> which is implemented as
>>>
>>> InstantiatedTerm findTerm(Term term) {
>>>   return findTerm(term.field(), term.text());
>>> }
>>>
>>> which, since term is null, results in a NullPointerException.  This seems
>>> to
>>> me like an bug either in the MatchAllDocsQuery implementation (the
>>> version
>>> in 2.4.1 did not use termDocs, so did not pass through this null), or a
>>> bug
>>> in the implementation of InstantiatedIndex.
>>>
>>> Any suggestions on what I can do about this?  I definitely can't get rid
>>> of
>>> the MatchAllDocsQuery and don't really want to move back to a slow
>>> RAMDirectory.
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001485ecd28c819e77047a65d0a5--

From java-user-return-44036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 11 01:56:53 2009
Return-Path: <java-user-return-44036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7305 invoked from network); 11 Dec 2009 01:56:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Dec 2009 01:56:53 -0000
Received: (qmail 5465 invoked by uid 500); 11 Dec 2009 01:56:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5371 invoked by uid 500); 11 Dec 2009 01:56:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5361 invoked by uid 99); 11 Dec 2009 01:56:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Dec 2009 01:56:50 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nigelspleen@gmail.com designates 209.85.218.222 as permitted sender)
Received: from [209.85.218.222] (HELO mail-bw0-f222.google.com) (209.85.218.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Dec 2009 01:56:48 +0000
Received: by bwz22 with SMTP id 22so340410bwz.5
        for <java-user@lucene.apache.org>; Thu, 10 Dec 2009 17:56:27 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=v5HyuBrXULLg0o0OmO1QBq+8Cwei4dl1ifVymY2nmJ8=;
        b=hOsnPvAlu3i0ymERet0GRo5OyiL8yodwOpvjJ3f+40oJG2kAN3OrMvdTSi6RpO4cu9
         8XeMql3YBTOs57v06EAFpxOdKABkMivnutuVTBuWhZJjfjlJ+FApsDzU2cIArXN4a6rQ
         s77kfoVMJlSFuA6bCxN29VGoyYt/+xNKrs8Q4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=CYbQ/cCm27Er4cEj5MAXeRLDZfwIZ+WCC55gge47bQ0FHUf2rM6IkfMPZ3aXRVPZGV
         rxCmW+uG8Iq+1Iw3xcNaDMl1QaeIJIW+iO+C3wpOf2SOu0+BcnQiOOAeKFlJj1wFIAJL
         n7Iirdl0zIvBhEnWQIH25YCB11bdn2K3NzDgQ=
MIME-Version: 1.0
Received: by 10.204.2.211 with SMTP id 19mr414956bkk.6.1260496586910; Thu, 10 
	Dec 2009 17:56:26 -0800 (PST)
In-Reply-To: <01a501ca78ea$32168ee0$9643aca0$@com>
References: <00e601ca78c9$00c4af50$024e0df0$@com>
	 <7d94dcde0912090421g693b7834n98ee9b33e5714fa6@mail.gmail.com>
	 <010401ca78cd$059f3870$10dda950$@com>
	 <7d94dcde0912090511k15712ea2i9f306b727df1a69e@mail.gmail.com>
	 <2ffb6d060912090519p290aae88idac9252c5dec16ab@mail.gmail.com>
	 <015501ca78de$f88d19b0$e9a74d10$@com>
	 <2ffb6d060912090715w72e97a85udecf34885e6a4b9@mail.gmail.com>
	 <018601ca78e7$fb6243a0$f226cae0$@com>
	 <2ffb6d060912090802s5796bf34ja2f419a2faa6f906@mail.gmail.com>
	 <01a501ca78ea$32168ee0$9643aca0$@com>
Date: Thu, 10 Dec 2009 20:56:26 -0500
Message-ID: <843920a30912101756xc659e54w6dfa16b5e57e3d1c@mail.gmail.com>
Subject: Re: Index file compatibility and a migration plan to lucene 3
From: Nigel <nigelspleen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd1d6ea4dabc2047a6a3b4e

--000e0cd1d6ea4dabc2047a6a3b4e
Content-Type: text/plain; charset=ISO-8859-1

I have a follow-up question to this thread on Field.Store.COMPRESS in 2.9.1
and beyond.  I'm getting a bit confused between the changes in 2.9.1 and 3.0
so I want to make sure I know what's going on.  We also use old-style
compressed fields and are about to upgrade to 2.9.1.

Is the following accurate?

1) Indexes created in 2.4 with compressed fields can be read by 2.9.1.  New
docs can be added in 2.9.1 using compressed fields, if you don't mind the
deprecation warnings.  Merges and optimizes done in 2.9.1 will preserve the
compressed fields in the same format.

2) Indexes created in 2.x with compressed fields can be read by 3.0.  New
docs cannot by added in 3.0 using compressed fields, since that
functionality has been removed (use CompressionTools instead).  The first
time a merge or optimize is performed on an old-format index in 3.0, the
compressed fields will all be uncompressed (i.e. converted to the new
format).

Did I get that right?

Thanks,
Chris

--000e0cd1d6ea4dabc2047a6a3b4e--

From java-user-return-44037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 11 05:31:23 2009
Return-Path: <java-user-return-44037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60566 invoked from network); 11 Dec 2009 05:31:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Dec 2009 05:31:23 -0000
Received: (qmail 24006 invoked by uid 500); 11 Dec 2009 05:31:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23875 invoked by uid 500); 11 Dec 2009 05:31:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23865 invoked by uid 99); 11 Dec 2009 05:31:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Dec 2009 05:31:17 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.210.192 as permitted sender)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Dec 2009 05:31:08 +0000
Received: by yxe30 with SMTP id 30so610953yxe.29
        for <java-user@lucene.apache.org>; Thu, 10 Dec 2009 21:30:48 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=5FYxBiZfWuRHBrInBCCdXA9YUful/uOSzb2AltvFjm8=;
        b=F2nr7PTzjI/fmGwf48DUQvZeoZZGK0CQOsPQCzmgbN/QyN4uXruMmUxQWA7ZIpU9EO
         n9Fei+llDDTm9B10g5R/OmR5PsswIYuWUd+miLpIZEDArGOjTusdzVJ9zomvNRXTQ44U
         znB/SrjJGvYqNzQNChpla8N2tEdVQoKYIs+iQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=G939KYM+32+q5ohKW3Har2WRRlaEzIZQoamla7e5a5eqhtmHpOeBJZxRFijGVoRNGx
         1wNuBt9KPKWchuBWBvyupb7pn8R7SwpVzm6NsN/JtNcTL9sF/avpQS99/P3ci73BZzxK
         vhE+gZSgfY9gliBl2V6Wl2XR/DBv0jeirMf5U=
MIME-Version: 1.0
Received: by 10.91.63.26 with SMTP id q26mr1168027agk.46.1260509443325; Thu, 
	10 Dec 2009 21:30:43 -0800 (PST)
Date: Fri, 11 Dec 2009 13:30:43 +0800
Message-ID: <7d94dcde0912102130u214d4a87r18b97575e223b521@mail.gmail.com>
Subject: Recover special terms from StandardTokenizer
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f647249afedb047a6d393e
X-Virus-Checked: Checked by ClamAV on apache.org

--001485f647249afedb047a6d393e
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hi, all,
     I designed a ftp search engine based on Lucene. I did a few
modifications to the StandardTokenizer.
My problem is:
  C++ is tokenized as c from StandardTokenizer and I want to recover it fro=
m
the TokenStream from StandardTokenizer

What should I do?

--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--001485f647249afedb047a6d393e--

From java-user-return-44038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 11 07:53:27 2009
Return-Path: <java-user-return-44038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22065 invoked from network); 11 Dec 2009 07:53:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Dec 2009 07:53:26 -0000
Received: (qmail 28935 invoked by uid 500); 11 Dec 2009 07:53:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28851 invoked by uid 500); 11 Dec 2009 07:53:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28841 invoked by uid 99); 11 Dec 2009 07:53:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Dec 2009 07:53:23 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of akaris@gmail.com designates 209.85.211.200 as permitted sender)
Received: from [209.85.211.200] (HELO mail-yw0-f200.google.com) (209.85.211.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Dec 2009 07:53:21 +0000
Received: by ywh38 with SMTP id 38so602074ywh.6
        for <java-user@lucene.apache.org>; Thu, 10 Dec 2009 23:53:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:from:date:message-id
         :subject:to:content-type;
        bh=yiL39qvJmTXfsPb0WO5rtlTICAuI2QDSLvWFSUImx3M=;
        b=CwLps1R3zdXjr/NulDtNi2fLSdHDpgIW/EbuAVQ+NKai2AIUy3nmGSbknacdQQlYn2
         1ERWhkPPHUDA++oMFiJ8BJFxdT5NetleTBD/m5GrHVTJlh9rzllB5hiEjhKic61umbOn
         Ao8BDWhxAryaOyV3etxGWzyKXflQ8h0cAgxuE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=R2V2EjBwDkEzzTFm6ty2gG4nlye2p0w5n/04xoGCYaewvnhbUptHP3G5CDh+mPfBib
         UsB+gR5S+LqgOmSoXFD4dSNTcvNBnNuQCQKQD+at0tB5+qcblSoSdUlq50AXzzo5gcGK
         uacOl+Gud4Q3YkExiQwGxpEy4YB4olCbo4s3M=
MIME-Version: 1.0
Received: by 10.101.10.2 with SMTP id n2mr1767823ani.10.1260517980350; Thu, 10 
	Dec 2009 23:53:00 -0800 (PST)
From: Michel Nadeau <akaris@gmail.com>
Date: Fri, 11 Dec 2009 02:52:40 -0500
Message-ID: <962c93f60912102352k5ecac41coaafd897517dc3907@mail.gmail.com>
Subject: Returns nothing when sorting
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d27c7f73aa95047a6f36ee

--0016e6d27c7f73aa95047a6f36ee
Content-Type: text/plain; charset=ISO-8859-1

Hi !

I have a quite small Lucene 3.0.0 index with around 400,000 documents in it.

I'm trying to sort my results like this :

TopDocs td;
td = searcher.search(q, cluCF, 10, cluSort);
ScoreDoc[] hits = td.scoreDocs;

My cluCF is a ChainedFilter containing at least one filter, and cluSort is a
float type.

I'm not sure where to start - my Lucene application is a Java Web Server
(multithread), and when querying it with sorting, it just returns nothing;
no error, no crash, but no results. If I do the same query/filter without
sorting, I get results.

Anything I could try?

Thanks,

- Mike
akaris@gmail.com

--0016e6d27c7f73aa95047a6f36ee--

From java-user-return-44039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 11 08:08:14 2009
Return-Path: <java-user-return-44039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27204 invoked from network); 11 Dec 2009 08:08:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Dec 2009 08:08:13 -0000
Received: (qmail 52254 invoked by uid 500); 11 Dec 2009 08:08:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52148 invoked by uid 500); 11 Dec 2009 08:08:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52138 invoked by uid 99); 11 Dec 2009 08:08:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Dec 2009 08:08:11 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Dec 2009 08:08:09 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 0C926D36004
	for <java-user@lucene.apache.org>; Fri, 11 Dec 2009 09:07:47 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 8iFRG-2UUVTU for <java-user@lucene.apache.org>;
	Fri, 11 Dec 2009 09:07:38 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 53A71D36007
	for <java-user@lucene.apache.org>; Fri, 11 Dec 2009 09:07:38 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <00e601ca78c9$00c4af50$024e0df0$@com> <7d94dcde0912090421g693b7834n98ee9b33e5714fa6@mail.gmail.com> <010401ca78cd$059f3870$10dda950$@com> <7d94dcde0912090511k15712ea2i9f306b727df1a69e@mail.gmail.com> <2ffb6d060912090519p290aae88idac9252c5dec16ab@mail.gmail.com> <015501ca78de$f88d19b0$e9a74d10$@com> <2ffb6d060912090715w72e97a85udecf34885e6a4b9@mail.gmail.com> <018601ca78e7$fb6243a0$f226cae0$@com> <2ffb6d060912090802s5796bf34ja2f419a2faa6f906@mail.gmail.com> <01a501ca78ea$32168ee0$9643aca0$@com> <843920a30912101756xc659e54w6dfa16b5e57e3d1c@mail.gmail.com>
Subject: RE: Index file compatibility and a migration plan to lucene 3
Date: Fri, 11 Dec 2009 09:07:11 +0100
Message-ID: <EBC76F02E233492B848AA629F6C14C6E@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <843920a30912101756xc659e54w6dfa16b5e57e3d1c@mail.gmail.com>
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
Thread-index: Acp6BUEnBYfYtMahSvOQOqNyzSKHywAM6r6g

Exactly.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Nigel [mailto:nigelspleen@gmail.com]
> Sent: Friday, December 11, 2009 2:56 AM
> To: java-user@lucene.apache.org
> Subject: Re: Index file compatibility and a migration plan to lucene 3
> 
> I have a follow-up question to this thread on Field.Store.COMPRESS in
> 2.9.1
> and beyond.  I'm getting a bit confused between the changes in 2.9.1 and
> 3.0
> so I want to make sure I know what's going on.  We also use old-style
> compressed fields and are about to upgrade to 2.9.1.
> 
> Is the following accurate?
> 
> 1) Indexes created in 2.4 with compressed fields can be read by 2.9.1.
> New
> docs can be added in 2.9.1 using compressed fields, if you don't mind the
> deprecation warnings.  Merges and optimizes done in 2.9.1 will preserve
> the
> compressed fields in the same format.
> 
> 2) Indexes created in 2.x with compressed fields can be read by 3.0.  New
> docs cannot by added in 3.0 using compressed fields, since that
> functionality has been removed (use CompressionTools instead).  The first
> time a merge or optimize is performed on an old-format index in 3.0, the
> compressed fields will all be uncompressed (i.e. converted to the new
> format).
> 
> Did I get that right?
> 
> Thanks,
> Chris


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 11 08:11:20 2009
Return-Path: <java-user-return-44040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27991 invoked from network); 11 Dec 2009 08:11:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Dec 2009 08:11:20 -0000
Received: (qmail 58849 invoked by uid 500); 11 Dec 2009 08:11:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58806 invoked by uid 500); 11 Dec 2009 08:11:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58796 invoked by uid 99); 11 Dec 2009 08:11:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Dec 2009 08:11:18 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of akaris@gmail.com designates 209.85.211.200 as permitted sender)
Received: from [209.85.211.200] (HELO mail-yw0-f200.google.com) (209.85.211.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Dec 2009 08:11:16 +0000
Received: by ywh38 with SMTP id 38so610374ywh.6
        for <java-user@lucene.apache.org>; Fri, 11 Dec 2009 00:10:55 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=YJU43kb3IQn8Zi+h8wEnXb2k0xltpuE4h5Dlv3hTgsk=;
        b=RRDX7/gIztV+Wuv5Vn/mrx1Ou1I9wfaDIQbmoCIxij60HUBsjwvppnMGq211KpwFvK
         Ws55254K7Ex4PvoyUEQAvIQaKGn031tjVsTL1IMmAkvyFjMHGzPY5Ymoj5qxuKIdc52K
         wC+CE3LXaXgh3PRrOLAtlmvszqaVV1gpAK28s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=bjAZoSJiJE3Hs6VS+is4g8lE6VGqobILHYdrYKjn76rsWAmqy5DhmV/RC1g5emhXKl
         dqSaSQyhbVBlM3nV8CQFzityt4V8eoJiFv+dNCFNMMyTf4Xs9+JTbLLPQv947m6hRR6J
         GW8STmkXTER735MalbBY0pc4/NY9DNwgAPpfE=
MIME-Version: 1.0
Received: by 10.101.156.1 with SMTP id i1mr1718916ano.66.1260519055066; Fri, 
	11 Dec 2009 00:10:55 -0800 (PST)
In-Reply-To: <962c93f60912102352k5ecac41coaafd897517dc3907@mail.gmail.com>
References: <962c93f60912102352k5ecac41coaafd897517dc3907@mail.gmail.com>
From: Michel Nadeau <akaris@gmail.com>
Date: Fri, 11 Dec 2009 03:10:35 -0500
Message-ID: <962c93f60912110010t34d3d503qd9689023e0c11f78@mail.gmail.com>
Subject: Re: Returns nothing when sorting
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d27bdb828795047a6f7643

--0016e6d27bdb828795047a6f7643
Content-Type: text/plain; charset=ISO-8859-1

By the way the same search + filter combination but with a sort on another
field (string) works. It seems only the float sort isn't working. The float
sort is working correctly in other conditions though.

I'm very puzzled !

- Mike
akaris@gmail.com


On Fri, Dec 11, 2009 at 2:52 AM, Michel Nadeau <akaris@gmail.com> wrote:

> Hi !
>
> I have a quite small Lucene 3.0.0 index with around 400,000 documents in
> it.
>
> I'm trying to sort my results like this :
>
> TopDocs td;
> td = searcher.search(q, cluCF, 10, cluSort);
> ScoreDoc[] hits = td.scoreDocs;
>
> My cluCF is a ChainedFilter containing at least one filter, and cluSort is
> a float type.
>
> I'm not sure where to start - my Lucene application is a Java Web Server
> (multithread), and when querying it with sorting, it just returns nothing;
> no error, no crash, but no results. If I do the same query/filter without
> sorting, I get results.
>
> Anything I could try?
>
> Thanks,
>
> - Mike
> akaris@gmail.com
>

--0016e6d27bdb828795047a6f7643--

From java-user-return-44041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 11 09:10:08 2009
Return-Path: <java-user-return-44041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39640 invoked from network); 11 Dec 2009 09:10:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Dec 2009 09:10:07 -0000
Received: (qmail 99984 invoked by uid 500); 11 Dec 2009 09:10:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99898 invoked by uid 500); 11 Dec 2009 09:10:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99888 invoked by uid 99); 11 Dec 2009 09:10:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Dec 2009 09:10:05 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.222.176 as permitted sender)
Received: from [209.85.222.176] (HELO mail-pz0-f176.google.com) (209.85.222.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Dec 2009 09:10:01 +0000
Received: by pzk6 with SMTP id 6so521383pzk.29
        for <java-user@lucene.apache.org>; Fri, 11 Dec 2009 01:09:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=+Ea08Rv/u0N9mtb8BCMGP8fIIKuNzaM2OCR6U5xDX1c=;
        b=LnJSrM6rLtT4feiyTTYGoJ8UKf1MlOYXU4nfqTRuETH64hnsmDAvTQl86m2x+QXvZb
         2lgR6lO93yQ3rhBU77ODTxM0cszMyU78TH/ShbLkZ8AuRu2uGbpSpyhR/PF4niUA/T7B
         lJwUBB15Shfizc5AGlKC29mRqzIQWkLmItLqQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=CTCqHhYaJMNJukvcbOUfmAUHqaEF+M2+ndBdE0AfJP7BTwJuAZ4rwYmdFEUSwLPN3d
         GZ3SNasFzVH5zUiEFRG8VDWB9Ez6XNyGbI15JQ91wfzXZjkxR1mbclWHKgIRfspa0Wgk
         hHOmU4zn5n2AFz2nclrH8sS9bM0okgDPHulNI=
MIME-Version: 1.0
Received: by 10.115.84.8 with SMTP id m8mr611518wal.144.1260522579443; Fri, 11 
	Dec 2009 01:09:39 -0800 (PST)
In-Reply-To: <7d94dcde0912102130u214d4a87r18b97575e223b521@mail.gmail.com>
References: <7d94dcde0912102130u214d4a87r18b97575e223b521@mail.gmail.com>
From: Anshum <anshumg@gmail.com>
Date: Fri, 11 Dec 2009 14:39:19 +0530
Message-ID: <867513fe0912110109i71d6491am10934c77190b2029@mail.gmail.com>
Subject: Re: Recover special terms from StandardTokenizer
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64e575e9441fc047a704835

--0016e64e575e9441fc047a704835
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

How about getting the original token stream and then converting c++ to
cplusplus or anyother such transform. Or perhaps you might look at
using/extending(in the non java sense) some other tokenized!

--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Fri, Dec 11, 2009 at 11:00 AM, Weiwei Wang <ww.wang.cs@gmail.com> wrote:

> Hi, all,
>     I designed a ftp search engine based on Lucene. I did a few
> modifications to the StandardTokenizer.
> My problem is:
>  C++ is tokenized as c from StandardTokenizer and I want to recover it fr=
om
> the TokenStream from StandardTokenizer
>
> What should I do?
>
> --
> Weiwei Wang
> Alex Wang
> =E7=8E=8B=E5=B7=8D=E5=B7=8D
> Room 403, Mengmin Wei Building
> Computer Science Department
> Gulou Campus of Nanjing University
> Nanjing, P.R.China, 210093
>
> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>

--0016e64e575e9441fc047a704835--

From java-user-return-44042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 11 11:59:48 2009
Return-Path: <java-user-return-44042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20682 invoked from network); 11 Dec 2009 11:59:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Dec 2009 11:59:47 -0000
Received: (qmail 37677 invoked by uid 500); 11 Dec 2009 11:59:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37632 invoked by uid 500); 11 Dec 2009 11:59:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37622 invoked by uid 99); 11 Dec 2009 11:59:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Dec 2009 11:59:45 +0000
X-ASF-Spam-Status: No, hits=-2.5 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 59.106.19.174 is neither permitted nor denied by domain of koji@r.email.ne.jp)
Received: from [59.106.19.174] (HELO www724.sakura.ne.jp) (59.106.19.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Dec 2009 11:59:40 +0000
Received: from koji-sekiguchi-no-macbook.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	(authenticated bits=0)
	by www724.sakura.ne.jp (8.14.3/8.14.3) with ESMTP id nBBBxINn083017
	for <java-user@lucene.apache.org>; Fri, 11 Dec 2009 20:59:18 +0900 (JST)
	(envelope-from koji@r.email.ne.jp)
Message-ID: <4B223416.2060701@r.email.ne.jp>
Date: Fri, 11 Dec 2009 20:59:18 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.23 (Macintosh/20090812)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Recover special terms from StandardTokenizer
References: <7d94dcde0912102130u214d4a87r18b97575e223b521@mail.gmail.com> <867513fe0912110109i71d6491am10934c77190b2029@mail.gmail.com>
In-Reply-To: <867513fe0912110109i71d6491am10934c77190b2029@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit

MappingCharFilter can be used to convert c++ to cplusplus.

Koji

-- 
http://www.rondhuit.com/en/


Anshum wrote:
> How about getting the original token stream and then converting c++ to
> cplusplus or anyother such transform. Or perhaps you might look at
> using/extending(in the non java sense) some other tokenized!
>
> --
> Anshum Gupta
> Naukri Labs!
> http://ai-cafe.blogspot.com
>
> The facts expressed here belong to everybody, the opinions to me. The
> distinction is yours to draw............
>
>
> On Fri, Dec 11, 2009 at 11:00 AM, Weiwei Wang <ww.wang.cs@gmail.com> wrote:
>
>   
>> Hi, all,
>>     I designed a ftp search engine based on Lucene. I did a few
>> modifications to the StandardTokenizer.
>> My problem is:
>>  C++ is tokenized as c from StandardTokenizer and I want to recover it from
>> the TokenStream from StandardTokenizer
>>
>> What should I do?
>>
>> --
>> Weiwei Wang
>> Alex Wang
>> 
>> Room 403, Mengmin Wei Building
>> Computer Science Department
>> Gulou Campus of Nanjing University
>> Nanjing, P.R.China, 210093
>>
>> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>>
>>     
>
>   



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 11 13:31:08 2009
Return-Path: <java-user-return-44043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64711 invoked from network); 11 Dec 2009 13:31:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Dec 2009 13:31:08 -0000
Received: (qmail 63868 invoked by uid 500); 11 Dec 2009 13:31:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63791 invoked by uid 500); 11 Dec 2009 13:31:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63781 invoked by uid 99); 11 Dec 2009 13:31:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Dec 2009 13:31:05 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Dec 2009 13:30:55 +0000
Received: from [172.18.225.244] (172.18.225.244) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.1.393.1; Fri, 11 Dec 2009 14:30:34 +0100
Subject: Re: heap memory issues when sorting by a string field
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <9ac0c6aa0912100245n4e3902etfed6b26dd80a2f2d@mail.gmail.com>
References: <17022a310912071327x6be7f6afjf45e0ab69269e47c@mail.gmail.com>
	 <359a92830912071337o3ed869dbv68576b704666b8df@mail.gmail.com>
	 <17022a310912071348m85926b0vbc0687e6085e79b5@mail.gmail.com>
	 <660086cb0912071638h6c6e10e1u4899889bc9a4ed74@mail.gmail.com>
	 <9ac0c6aa0912080236j5d3a87d1jbce8558fba738765@mail.gmail.com>
	 <9ac0c6aa0912080243g4f7fab20q73b228cf1426a4ae@mail.gmail.com>
	 <17022a310912091358y20f4eebbt7bcd0253cb8add04@mail.gmail.com>
	 <2E6A89A648463A4EBF093A9062C16683013484F9F742@SBMAILBOX1.sb.statsbiblioteket.dk>
	 <9ac0c6aa0912100245n4e3902etfed6b26dd80a2f2d@mail.gmail.com>
Content-Type: text/plain; charset="UTF-8"
Organization: Statsbiblioteket
Date: Fri, 11 Dec 2009 14:30:39 +0100
Message-ID: <1260538239.5731.99.camel@pc286>
MIME-Version: 1.0
X-Mailer: Evolution 2.28.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I've spend the last day working on a multipass order builder, where the
order is defined by a Collator and stored in an int-array. Compromising
a bit on the "minimal memory at all cost"-approach resulted in a fair
boost in speed, but it's still very slow for the first sorted search,
compared to Lucene's build-in Collator-based sorter.

One test-corpus was 2.9M documents (16GB index), sorting on title (2.1M
unique terms). The machine was a fairly new Xeon-something using SSDs.
Lucene 2.4 was used.

Memory-usage for the multipass order builder on first sort was
approximately
2.9M (#documents) * 4 bytes (int) + 
2.1M (#unique terms) * 4 bytes (int) +
50MB (size of the sliding window) +
2.9M (#documents) * 4 bytes (int)
= 12MB + 9MB + 50MB + 12MB ~= 100MB (rounded up).

The 50MB buffer required 3 passes through the terms, which took 47
seconds.
Lowering the buffer to 10MB resulted in 2 minutes build-time.
Upping to 500MB (all terms in memory) meant 31 seconds.

After that, only the order-array was remembered, which took
2.9M (#documents) * 4 bytes (int) = 12MB.

Performing subsequent sorted searches gave the following results:
"hest" (top 10 out of 1295 hits): 6-13ms
"bog" (top 10 out of 2446835 hits): 600-620ms


For comparison, Lucene's build-in sorter took only 8.5 seconds for first
sort search, with subsequent sorted search times
"hest" (top 10 out of 1295 hits): 9-18ms
"bog" (top 10 out of 2446835 hits): 2000-2900ms


Disclaimer: This was just a quick test. I have not checked properly how
the numbers change when the corpus is scaled up, how it works on
spinning drives and so on. All this is very much at the experimental
stage.

I'll continue a bit on this road, as some of our setups used nightly
batch-runs to update the index and thus fit well into the tradeoffs
outlined above. Regrettably we're also looking at 5-minute updates for a
larger index (10M documents-range), where the multipass approach is too
expensive.

- Toke

On Thu, 2009-12-10 at 11:45 +0100, Michael McCandless wrote:
> The big challenge w/ a global sort ords is handling reopen, ie, for
> apps that need to frequently reopen their index.
> 
> If you have a static index, then this approach is a good one -- you
> make a one time investment, after indexing, to compute your global
> ords, store them on disk.
> 
> Then at searching you load the ords in, and you can make a
> FieldComparator that taps into it (just has to re-base the per-segment
> docIDs).  No String values are needed...
> 
> Also, once we've done
> https://issues.apache.org/jira/browse/LUCENE-1990 (anyone out there
> wanna take a stab?  Nice self-contained utility API needed for
> Lucene....), that ord array can be very compact for cases where the
> number of unique Strings is smallish.  No reason to spend a full 4
> bytes per document...
> 
> Mike
> 
> On Wed, Dec 9, 2009 at 6:46 PM, Toke Eskildsen <te@statsbiblioteket.dk> wrote:
> > Thanks for the heads-up, TCK. The Dietz & Sleator article I found at
> > http://www.cs.cmu.edu/~sleator/papers/maintaining-order.pdf
> > looks very interesting.
> >
> > String sorting in Lucene is indeed fairly expensive and we've experimented with
> > two solutions to this, none of which are golden bullets.
> >
> > 1) Store the order, not the content.
> >
> > Like the Lucene default sorter, we fetch all the terms for the sort field on first
> > sort. The docIDs are mapped to the terms and an complete sort is performed
> > (by using a custom Collator: We want to avoid using CollationKeys as they
> > take too much memory. But that's another story). When the sort is finished,
> > we have an integer-array where each entry is the relative position for a given
> > document (referenced by docID). We then de-reference the loaded terms
> > so that the memory is freed.
> >
> > Determining the order of two documents after the initial build is extremely
> > simple: order[docIDa] - order[docIDb] (or maybe it was the other way
> > around, I forget).
> >
> > Cons: Large temporarily memory overhead upon initial sort, though not as
> > much as using CollationKeys. Slower initial sort than Lucene build-in.
> > Pros: Very fast subsequent sorts, very low memory-overhead when running.
> > Joker: This approach could be used to perform a post-processing on a
> > generated index and storing the orders as a file along with the index, then
> > pushing the complete package to searchers. This would lower the memory
> > requirements for the searchers significantly.
> >
> >
> > 2) As above, but use a multipass order builder.
> >
> > For the first sort, the order must be calculated: A sliding window sorter is created
> > with a buffer of a fixed size. The window slides through all terms for the sort field
> > and extracts the top X. The order-array is updated for the documents that has
> > one of these terms. The sliding is repeated multiple times, where terms ordered
> > before the last term of the previous iteration are ignored.
> >
> > Cons: _Very_ slow (too slow in the current implementation) order build.
> > Pros: Same as above.
> > Joker: The buffer size determines memory use vs. order build time.
> >
> >
> > The multipass approach looks promising, but requires more work to get to a
> > usable state. Right now it takes minutes to build the order-array for half a
> > million documents, with a buffer size requiring 5 iterations. If I ever get it to
> > work, I'll be sure to share it.
> >
> > Regards,
> > Toke Eskildsen
> >
> > ________________________________________
> > From: TCK [moonwatcher32329@gmail.com]
> > Sent: 09 December 2009 22:58
> > To: java-user@lucene.apache.org
> > Subject: Re: heap memory issues when sorting by a string field
> >
> > Thanks Mike for opening this jira ticket and for your patch. Explicitly
> > removing the entry from the WHM definitely does reduce the number of GC
> > cycles taken to free the huge StringIndex objects that get created when
> > doing a sort by a string field.
> >
> > But I'm still trying to figure out why it is necessary for lucene to load
> > into memory the sorted-by field of every single document in the index (which
> > is what makes the StringIndex objects so big) on the first query. Why isn't
> > it sufficient to load the field values for only the documents that match the
> > given search criteria? Perhaps by using an order-maintenance data structure
> > (Dietz&Sleator, or Bender et al) coupled with a balanced search tree,
> > instead of the simple lookup and order arrays currently used in StringIndex,
> > we can dynamically grow it as needed by successive queries rather than
> > loading everything on the first query.
> >
> > Apologies if this is a naive question... I'm a newbie to the lucene code and
> > can't wait for the new lucene book to come out:-)
> >
> > -TCK
> >
> >
> >
> >
> > On Tue, Dec 8, 2009 at 5:43 AM, Michael McCandless <
> > lucene@mikemccandless.com> wrote:
> >
> >> I've opened LUCENE-2135.
> >>
> >> Mike
> >>
> >> On Tue, Dec 8, 2009 at 5:36 AM, Michael McCandless
> >> <lucene@mikemccandless.com> wrote:
> >> > This is a rather disturbing implementation detail of WeakHashMap, that
> >> > it needs the one extra step (invoking one of its methods) for its weak
> >> > keys to be reclaimable.
> >> >
> >> > Maybe on IndexReader.close(), Lucene should go and evict all entries
> >> > in the FieldCache associated with that reader.  Ie, step through the
> >> > sub-readers, and if they are truly closed as well (not shared w/ other
> >> > readers), evict.  I'll open an issue.
> >> >
> >> > Even in TCK's code fragment, it's not until the final line is done
> >> > executing, that the cache key even loses all hard references, because
> >> > it's that line that assigns to sSearcher, replacing the strong
> >> > reference to the old searcher.  Inserting sSearcher = null prior to
> >> > that would drop the hard reference sooner, but because of this impl
> >> > detail of WeakHashMap, something would still have to touch it (eg, a
> >> > warmup query that hits the field cache) before it's reclaimable.
> >> >
> >> > Mike
> >> >
> >> > On Mon, Dec 7, 2009 at 7:38 PM, Tom Hill <solr-list@worldware.com>
> >> wrote:
> >> >> Hi -
> >> >>
> >> >> If I understand correctly, WeakHashMap does not free the memory for the
> >> >> value (cached data) when the key is nulled, or even when the key is
> >> garbage
> >> >> collected.
> >> >>
> >> >> It requires one more step: a method on WeakHashMap must be called to
> >> allow
> >> >> it to release its hard reference to the cached data. It appears that
> >> most
> >> >> methods in WeakHashMap end up calling expungeStaleEntries, which will
> >> clear
> >> >> the hard reference. But you have to call some method on the map, before
> >> the
> >> >> memory is eligible for garbage collection.
> >> >>
> >> >> So it requires four stages to free the cached data. Null the key; A GC
> >> to
> >> >> release the weak reference to the key; A call to some method on the map;
> >> >> Then the next GC cycle should free the value.
> >> >>
> >> >> So it seems possible that you could end up with double memory usage for
> >> a
> >> >> time. If you don't have a GC between the time that you close the old
> >> reader,
> >> >> and you start to load the field cache entry for the next reader, then
> >> the
> >> >> key may still be hanging around uncollected.
> >> >>
> >> >> At that point, it may run a GC when you allocate the new cache, but
> >> that's
> >> >> only the first GC. It can't free the cached data until after the next
> >> call
> >> >> to expungeStaleEntries, so for a while you have both caches around.
> >> >>
> >> >> This extra usage could cause things to move into tenured space. Could
> >> this
> >> >> be causing your problem?
> >> >>
> >> >> Workaround would be to cause some method to be called on the
> >> WeakHashMap.
> >> >> You don't want to call get(), since that will try to populate the cache.
> >> >> Maybe if you tried putting a small value to the cache, and doing a GC,
> >> and
> >> >> see if your memory drops then.
> >> >>
> >> >>
> >> >> Tom
> >> >>
> >> >>
> >> >>
> >> >> On Mon, Dec 7, 2009 at 1:48 PM, TCK <moonwatcher32329@gmail.com> wrote:
> >> >>
> >> >>> Thanks for the response. But I'm definitely calling close() on the old
> >> >>> reader and opening a new one (not using reopen). Also, to simplify the
> >> >>> analysis, I did my test with a single-threaded requester to eliminate
> >> any
> >> >>> concurrency issues.
> >> >>>
> >> >>> I'm doing:
> >> >>> sSearcher.getIndexReader().close();
> >> >>> sSearcher.close(); // this actually seems to be a no-op
> >> >>> IndexReader newIndexReader = IndexReader.open(newDirectory);
> >> >>> sSearcher = new IndexSearcher(newIndexReader);
> >> >>>
> >> >>> Btw, isn't it bad practice anyway to have an unbounded cache? Are there
> >> any
> >> >>> plans to replace the HashMaps used for the innerCaches with an actual
> >> >>> size-bounded cache with some eviction policy (perhaps EhCache or
> >> something)
> >> >>> ?
> >> >>>
> >> >>> Thanks again,
> >> >>> TCK
> >> >>>
> >> >>>
> >> >>>
> >> >>>
> >> >>> On Mon, Dec 7, 2009 at 4:37 PM, Erick Erickson <
> >> erickerickson@gmail.com
> >> >>> >wrote:
> >> >>>
> >> >>> > What this sounds like is that you're not really closing your
> >> >>> > readers even though you think you are. Sorting indeed uses up
> >> >>> > significant memory when it populates internal caches and keeps
> >> >>> > it around for later use (which is one of the reasons that warming
> >> >>> > queries matter). But if you really do close the reader, I'm pretty
> >> >>> > sure the memory should be GC-able.
> >> >>> >
> >> >>> > One thing that trips people up is IndexReader.reopen(). If it
> >> >>> > returns a reader different than the original, you *must* close the
> >> >>> > old one. If you don't, the old reader is still hanging around and
> >> >>> > memory won't be returne.... An example from the Javadocs...
> >> >>> >
> >> >>> >  IndexReader reader = ...
> >> >>> >  ...
> >> >>> >  IndexReader new = r.reopen();
> >> >>> >  if (new != reader) {
> >> >>> >   ...     // reader was reopened
> >> >>> >   reader.close();
> >> >>> >  }
> >> >>> >  reader = new;
> >> >>> >  ...
> >> >>> >
> >> >>> >
> >> >>> > If this is irrelevant, could you post your close/open
> >> >>> >
> >> >>> > code?
> >> >>> >
> >> >>> > HTH
> >> >>> >
> >> >>> > Erick
> >> >>> >
> >> >>> >
> >> >>> > On Mon, Dec 7, 2009 at 4:27 PM, TCK <moonwatcher32329@gmail.com>
> >> wrote:
> >> >>> >
> >> >>> > > Hi,
> >> >>> > > I'm having heap memory issues when I do lucene queries involving
> >> >>> sorting
> >> >>> > by
> >> >>> > > a string field. Such queries seem to load a lot of data in to the
> >> heap.
> >> >>> > > Moreover lucene seems to hold on to references to this data even
> >> after
> >> >>> > the
> >> >>> > > index reader has been closed and a full GC has been run. Some of
> >> the
> >> >>> > > consequences of this are that in my generational heap configuration
> >> a
> >> >>> lot
> >> >>> > > of
> >> >>> > > memory gets promoted to tenured space each time I close the old
> >> index
> >> >>> > > reader
> >> >>> > > and after opening and querying using a new one, and the tenured
> >> space
> >> >>> > > eventually gets fragmented causing a lot of promotion failures
> >> >>> resulting
> >> >>> > in
> >> >>> > > jvm hangs while the jvm does stop-the-world GCs.
> >> >>> > >
> >> >>> > > Does anyone know any workarounds to avoid these memory issues when
> >> >>> doing
> >> >>> > > such lucene queries?
> >> >>> > >
> >> >>> > > My profiling showed that even after a full GC lucene is holding on
> >> to a
> >> >>> > lot
> >> >>> > > of references to field value data notably via the
> >> >>> > > FieldCacheImpl/ExtendedFieldCacheImpl. I noticed that the
> >> WeakHashMap
> >> >>> > > readerCaches are using unbounded HashMaps as the innerCaches and I
> >> used
> >> >>> > > reflection to replace these innerCaches with dummy empty HashMaps,
> >> but
> >> >>> > > still
> >> >>> > > I'm seeing the same behavior. I wondered if anyone has gone through
> >> >>> these
> >> >>> > > same issues before and would offer any advice.
> >> >>> > >
> >> >>> > > Thanks a lot,
> >> >>> > > TCK
> >> >>> > >
> >> >>> >
> >> >>>
> >> >>
> >> >
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 11 13:43:49 2009
Return-Path: <java-user-return-44044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72589 invoked from network); 11 Dec 2009 13:43:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Dec 2009 13:43:49 -0000
Received: (qmail 84253 invoked by uid 500); 11 Dec 2009 13:43:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84162 invoked by uid 500); 11 Dec 2009 13:43:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84145 invoked by uid 99); 11 Dec 2009 13:43:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Dec 2009 13:43:47 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.210.192 as permitted sender)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Dec 2009 13:43:42 +0000
Received: by yxe30 with SMTP id 30so915284yxe.29
        for <java-user@lucene.apache.org>; Fri, 11 Dec 2009 05:43:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=dwWJBPoU1ykki7UfYtbWfGAF+TvyDU+ULHuVE9Q+Q6o=;
        b=gbs5UgjZlhSRaVReD3pnjDV05/RtxBYZJ6OC+ROq9hk8wIEDfAL3ZX0P8tFjI7vKyy
         X2tfzWSc/0FtDRq2r2K8PTQTRNh21Sx/2FxyMsF4sWoX62n0r2ItwkkLpY7BJ0YSAfK4
         UoJiJf4kQINwq9r6fG5axC96bhqMIh+S4Qghk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=akwWRJUgwlNkAYBa+SMP4bZFCNXQDM3MwK4TQg5+oOGhA5tVEx9fb+oEVJ+Fode1d1
         m3SlAlZU7pEAS31hufvy6sKr5GPuBNFwy59dlmE1n4GKAa9WG/9MMGMYNcWOWhewIWyp
         kcNN/r5QOj+vYWfQNwyURrvKs84jSQK77oz8s=
MIME-Version: 1.0
Received: by 10.91.27.8 with SMTP id e8mr1656627agj.8.1260539001792; Fri, 11 
	Dec 2009 05:43:21 -0800 (PST)
In-Reply-To: <4B223416.2060701@r.email.ne.jp>
References: <7d94dcde0912102130u214d4a87r18b97575e223b521@mail.gmail.com>
	 <867513fe0912110109i71d6491am10934c77190b2029@mail.gmail.com>
	 <4B223416.2060701@r.email.ne.jp>
Date: Fri, 11 Dec 2009 21:43:21 +0800
Message-ID: <7d94dcde0912110543y63729d5eo14e6be2b992121b@mail.gmail.com>
Subject: Re: Recover special terms from StandardTokenizer
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f7d7806d6ad0047a741b49

--001485f7d7806d6ad0047a741b49
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Thanks, Koji

On Fri, Dec 11, 2009 at 7:59 PM, Koji Sekiguchi <koji@r.email.ne.jp> wrote:

> MappingCharFilter can be used to convert c++ to cplusplus.
>
> Koji
>
> --
> http://www.rondhuit.com/en/
>
>
>
> Anshum wrote:
>
>> How about getting the original token stream and then converting c++ to
>> cplusplus or anyother such transform. Or perhaps you might look at
>> using/extending(in the non java sense) some other tokenized!
>>
>> --
>> Anshum Gupta
>> Naukri Labs!
>> http://ai-cafe.blogspot.com
>>
>> The facts expressed here belong to everybody, the opinions to me. The
>> distinction is yours to draw............
>>
>>
>> On Fri, Dec 11, 2009 at 11:00 AM, Weiwei Wang <ww.wang.cs@gmail.com>
>> wrote:
>>
>>
>>
>>> Hi, all,
>>>    I designed a ftp search engine based on Lucene. I did a few
>>> modifications to the StandardTokenizer.
>>> My problem is:
>>>  C++ is tokenized as c from StandardTokenizer and I want to recover it
>>> from
>>> the TokenStream from StandardTokenizer
>>>
>>> What should I do?
>>>
>>> --
>>> Weiwei Wang
>>> Alex Wang
>>> =E7=8E=8B=E5=B7=8D=E5=B7=8D
>>> Room 403, Mengmin Wei Building
>>> Computer Science Department
>>> Gulou Campus of Nanjing University
>>> Nanjing, P.R.China, 210093
>>>
>>> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>>>
>>>
>>>
>>
>>
>>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--001485f7d7806d6ad0047a741b49--

From java-user-return-44045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 11 13:53:59 2009
Return-Path: <java-user-return-44045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80914 invoked from network); 11 Dec 2009 13:53:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Dec 2009 13:53:59 -0000
Received: (qmail 14736 invoked by uid 500); 11 Dec 2009 13:53:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14682 invoked by uid 500); 11 Dec 2009 13:53:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14672 invoked by uid 99); 11 Dec 2009 13:53:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Dec 2009 13:53:56 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.211.200] (HELO mail-yw0-f200.google.com) (209.85.211.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Dec 2009 13:53:45 +0000
Received: by ywh38 with SMTP id 38so815429ywh.6
        for <java-user@lucene.apache.org>; Fri, 11 Dec 2009 05:53:23 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.125.3 with SMTP id x3mr2503111ybc.28.1260539601182; Fri, 
	11 Dec 2009 05:53:21 -0800 (PST)
In-Reply-To: <1260538239.5731.99.camel@pc286>
References: <17022a310912071327x6be7f6afjf45e0ab69269e47c@mail.gmail.com>
	 <359a92830912071337o3ed869dbv68576b704666b8df@mail.gmail.com>
	 <17022a310912071348m85926b0vbc0687e6085e79b5@mail.gmail.com>
	 <660086cb0912071638h6c6e10e1u4899889bc9a4ed74@mail.gmail.com>
	 <9ac0c6aa0912080236j5d3a87d1jbce8558fba738765@mail.gmail.com>
	 <9ac0c6aa0912080243g4f7fab20q73b228cf1426a4ae@mail.gmail.com>
	 <17022a310912091358y20f4eebbt7bcd0253cb8add04@mail.gmail.com>
	 <2E6A89A648463A4EBF093A9062C16683013484F9F742@SBMAILBOX1.sb.statsbiblioteket.dk>
	 <9ac0c6aa0912100245n4e3902etfed6b26dd80a2f2d@mail.gmail.com>
	 <1260538239.5731.99.camel@pc286>
Date: Fri, 11 Dec 2009 08:53:21 -0500
Message-ID: <9ac0c6aa0912110553u5e494988w14964467e6ce62fd@mail.gmail.com>
Subject: Re: heap memory issues when sorting by a string field
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org, te@statsbiblioteket.dk
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

How long does Lucene take to build the ords for the toplevel reader?

You should be able to just time FieldCache.getStringIndex(topLevelReader).

I think your 8.5 seconds for first Lucene search was with the
StringIndex computed per segment?

Mike

On Fri, Dec 11, 2009 at 8:30 AM, Toke Eskildsen <te@statsbiblioteket.dk> wr=
ote:
> I've spend the last day working on a multipass order builder, where the
> order is defined by a Collator and stored in an int-array. Compromising
> a bit on the "minimal memory at all cost"-approach resulted in a fair
> boost in speed, but it's still very slow for the first sorted search,
> compared to Lucene's build-in Collator-based sorter.
>
> One test-corpus was 2.9M documents (16GB index), sorting on title (2.1M
> unique terms). The machine was a fairly new Xeon-something using SSDs.
> Lucene 2.4 was used.
>
> Memory-usage for the multipass order builder on first sort was
> approximately
> 2.9M (#documents) * 4 bytes (int) +
> 2.1M (#unique terms) * 4 bytes (int) +
> 50MB (size of the sliding window) +
> 2.9M (#documents) * 4 bytes (int)
> =3D 12MB + 9MB + 50MB + 12MB ~=3D 100MB (rounded up).
>
> The 50MB buffer required 3 passes through the terms, which took 47
> seconds.
> Lowering the buffer to 10MB resulted in 2 minutes build-time.
> Upping to 500MB (all terms in memory) meant 31 seconds.
>
> After that, only the order-array was remembered, which took
> 2.9M (#documents) * 4 bytes (int) =3D 12MB.
>
> Performing subsequent sorted searches gave the following results:
> "hest" (top 10 out of 1295 hits): 6-13ms
> "bog" (top 10 out of 2446835 hits): 600-620ms
>
>
> For comparison, Lucene's build-in sorter took only 8.5 seconds for first
> sort search, with subsequent sorted search times
> "hest" (top 10 out of 1295 hits): 9-18ms
> "bog" (top 10 out of 2446835 hits): 2000-2900ms
>
>
> Disclaimer: This was just a quick test. I have not checked properly how
> the numbers change when the corpus is scaled up, how it works on
> spinning drives and so on. All this is very much at the experimental
> stage.
>
> I'll continue a bit on this road, as some of our setups used nightly
> batch-runs to update the index and thus fit well into the tradeoffs
> outlined above. Regrettably we're also looking at 5-minute updates for a
> larger index (10M documents-range), where the multipass approach is too
> expensive.
>
> - Toke
>
> On Thu, 2009-12-10 at 11:45 +0100, Michael McCandless wrote:
>> The big challenge w/ a global sort ords is handling reopen, ie, for
>> apps that need to frequently reopen their index.
>>
>> If you have a static index, then this approach is a good one -- you
>> make a one time investment, after indexing, to compute your global
>> ords, store them on disk.
>>
>> Then at searching you load the ords in, and you can make a
>> FieldComparator that taps into it (just has to re-base the per-segment
>> docIDs). =A0No String values are needed...
>>
>> Also, once we've done
>> https://issues.apache.org/jira/browse/LUCENE-1990 (anyone out there
>> wanna take a stab? =A0Nice self-contained utility API needed for
>> Lucene....), that ord array can be very compact for cases where the
>> number of unique Strings is smallish. =A0No reason to spend a full 4
>> bytes per document...
>>
>> Mike
>>
>> On Wed, Dec 9, 2009 at 6:46 PM, Toke Eskildsen <te@statsbiblioteket.dk> =
wrote:
>> > Thanks for the heads-up, TCK. The Dietz & Sleator article I found at
>> > http://www.cs.cmu.edu/~sleator/papers/maintaining-order.pdf
>> > looks very interesting.
>> >
>> > String sorting in Lucene is indeed fairly expensive and we've experime=
nted with
>> > two solutions to this, none of which are golden bullets.
>> >
>> > 1) Store the order, not the content.
>> >
>> > Like the Lucene default sorter, we fetch all the terms for the sort fi=
eld on first
>> > sort. The docIDs are mapped to the terms and an complete sort is perfo=
rmed
>> > (by using a custom Collator: We want to avoid using CollationKeys as t=
hey
>> > take too much memory. But that's another story). When the sort is fini=
shed,
>> > we have an integer-array where each entry is the relative position for=
 a given
>> > document (referenced by docID). We then de-reference the loaded terms
>> > so that the memory is freed.
>> >
>> > Determining the order of two documents after the initial build is extr=
emely
>> > simple: order[docIDa] - order[docIDb] (or maybe it was the other way
>> > around, I forget).
>> >
>> > Cons: Large temporarily memory overhead upon initial sort, though not =
as
>> > much as using CollationKeys. Slower initial sort than Lucene build-in.
>> > Pros: Very fast subsequent sorts, very low memory-overhead when runnin=
g.
>> > Joker: This approach could be used to perform a post-processing on a
>> > generated index and storing the orders as a file along with the index,=
 then
>> > pushing the complete package to searchers. This would lower the memory
>> > requirements for the searchers significantly.
>> >
>> >
>> > 2) As above, but use a multipass order builder.
>> >
>> > For the first sort, the order must be calculated: A sliding window sor=
ter is created
>> > with a buffer of a fixed size. The window slides through all terms for=
 the sort field
>> > and extracts the top X. The order-array is updated for the documents t=
hat has
>> > one of these terms. The sliding is repeated multiple times, where term=
s ordered
>> > before the last term of the previous iteration are ignored.
>> >
>> > Cons: _Very_ slow (too slow in the current implementation) order build=
.
>> > Pros: Same as above.
>> > Joker: The buffer size determines memory use vs. order build time.
>> >
>> >
>> > The multipass approach looks promising, but requires more work to get =
to a
>> > usable state. Right now it takes minutes to build the order-array for =
half a
>> > million documents, with a buffer size requiring 5 iterations. If I eve=
r get it to
>> > work, I'll be sure to share it.
>> >
>> > Regards,
>> > Toke Eskildsen
>> >
>> > ________________________________________
>> > From: TCK [moonwatcher32329@gmail.com]
>> > Sent: 09 December 2009 22:58
>> > To: java-user@lucene.apache.org
>> > Subject: Re: heap memory issues when sorting by a string field
>> >
>> > Thanks Mike for opening this jira ticket and for your patch. Explicitl=
y
>> > removing the entry from the WHM definitely does reduce the number of G=
C
>> > cycles taken to free the huge StringIndex objects that get created whe=
n
>> > doing a sort by a string field.
>> >
>> > But I'm still trying to figure out why it is necessary for lucene to l=
oad
>> > into memory the sorted-by field of every single document in the index =
(which
>> > is what makes the StringIndex objects so big) on the first query. Why =
isn't
>> > it sufficient to load the field values for only the documents that mat=
ch the
>> > given search criteria? Perhaps by using an order-maintenance data stru=
cture
>> > (Dietz&Sleator, or Bender et al) coupled with a balanced search tree,
>> > instead of the simple lookup and order arrays currently used in String=
Index,
>> > we can dynamically grow it as needed by successive queries rather than
>> > loading everything on the first query.
>> >
>> > Apologies if this is a naive question... I'm a newbie to the lucene co=
de and
>> > can't wait for the new lucene book to come out:-)
>> >
>> > -TCK
>> >
>> >
>> >
>> >
>> > On Tue, Dec 8, 2009 at 5:43 AM, Michael McCandless <
>> > lucene@mikemccandless.com> wrote:
>> >
>> >> I've opened LUCENE-2135.
>> >>
>> >> Mike
>> >>
>> >> On Tue, Dec 8, 2009 at 5:36 AM, Michael McCandless
>> >> <lucene@mikemccandless.com> wrote:
>> >> > This is a rather disturbing implementation detail of WeakHashMap, t=
hat
>> >> > it needs the one extra step (invoking one of its methods) for its w=
eak
>> >> > keys to be reclaimable.
>> >> >
>> >> > Maybe on IndexReader.close(), Lucene should go and evict all entrie=
s
>> >> > in the FieldCache associated with that reader. =A0Ie, step through =
the
>> >> > sub-readers, and if they are truly closed as well (not shared w/ ot=
her
>> >> > readers), evict. =A0I'll open an issue.
>> >> >
>> >> > Even in TCK's code fragment, it's not until the final line is done
>> >> > executing, that the cache key even loses all hard references, becau=
se
>> >> > it's that line that assigns to sSearcher, replacing the strong
>> >> > reference to the old searcher. =A0Inserting sSearcher =3D null prio=
r to
>> >> > that would drop the hard reference sooner, but because of this impl
>> >> > detail of WeakHashMap, something would still have to touch it (eg, =
a
>> >> > warmup query that hits the field cache) before it's reclaimable.
>> >> >
>> >> > Mike
>> >> >
>> >> > On Mon, Dec 7, 2009 at 7:38 PM, Tom Hill <solr-list@worldware.com>
>> >> wrote:
>> >> >> Hi -
>> >> >>
>> >> >> If I understand correctly, WeakHashMap does not free the memory fo=
r the
>> >> >> value (cached data) when the key is nulled, or even when the key i=
s
>> >> garbage
>> >> >> collected.
>> >> >>
>> >> >> It requires one more step: a method on WeakHashMap must be called =
to
>> >> allow
>> >> >> it to release its hard reference to the cached data. It appears th=
at
>> >> most
>> >> >> methods in WeakHashMap end up calling expungeStaleEntries, which w=
ill
>> >> clear
>> >> >> the hard reference. But you have to call some method on the map, b=
efore
>> >> the
>> >> >> memory is eligible for garbage collection.
>> >> >>
>> >> >> So it requires four stages to free the cached data. Null the key; =
A GC
>> >> to
>> >> >> release the weak reference to the key; A call to some method on th=
e map;
>> >> >> Then the next GC cycle should free the value.
>> >> >>
>> >> >> So it seems possible that you could end up with double memory usag=
e for
>> >> a
>> >> >> time. If you don't have a GC between the time that you close the o=
ld
>> >> reader,
>> >> >> and you start to load the field cache entry for the next reader, t=
hen
>> >> the
>> >> >> key may still be hanging around uncollected.
>> >> >>
>> >> >> At that point, it may run a GC when you allocate the new cache, bu=
t
>> >> that's
>> >> >> only the first GC. It can't free the cached data until after the n=
ext
>> >> call
>> >> >> to expungeStaleEntries, so for a while you have both caches around=
.
>> >> >>
>> >> >> This extra usage could cause things to move into tenured space. Co=
uld
>> >> this
>> >> >> be causing your problem?
>> >> >>
>> >> >> Workaround would be to cause some method to be called on the
>> >> WeakHashMap.
>> >> >> You don't want to call get(), since that will try to populate the =
cache.
>> >> >> Maybe if you tried putting a small value to the cache, and doing a=
 GC,
>> >> and
>> >> >> see if your memory drops then.
>> >> >>
>> >> >>
>> >> >> Tom
>> >> >>
>> >> >>
>> >> >>
>> >> >> On Mon, Dec 7, 2009 at 1:48 PM, TCK <moonwatcher32329@gmail.com> w=
rote:
>> >> >>
>> >> >>> Thanks for the response. But I'm definitely calling close() on th=
e old
>> >> >>> reader and opening a new one (not using reopen). Also, to simplif=
y the
>> >> >>> analysis, I did my test with a single-threaded requester to elimi=
nate
>> >> any
>> >> >>> concurrency issues.
>> >> >>>
>> >> >>> I'm doing:
>> >> >>> sSearcher.getIndexReader().close();
>> >> >>> sSearcher.close(); // this actually seems to be a no-op
>> >> >>> IndexReader newIndexReader =3D IndexReader.open(newDirectory);
>> >> >>> sSearcher =3D new IndexSearcher(newIndexReader);
>> >> >>>
>> >> >>> Btw, isn't it bad practice anyway to have an unbounded cache? Are=
 there
>> >> any
>> >> >>> plans to replace the HashMaps used for the innerCaches with an ac=
tual
>> >> >>> size-bounded cache with some eviction policy (perhaps EhCache or
>> >> something)
>> >> >>> ?
>> >> >>>
>> >> >>> Thanks again,
>> >> >>> TCK
>> >> >>>
>> >> >>>
>> >> >>>
>> >> >>>
>> >> >>> On Mon, Dec 7, 2009 at 4:37 PM, Erick Erickson <
>> >> erickerickson@gmail.com
>> >> >>> >wrote:
>> >> >>>
>> >> >>> > What this sounds like is that you're not really closing your
>> >> >>> > readers even though you think you are. Sorting indeed uses up
>> >> >>> > significant memory when it populates internal caches and keeps
>> >> >>> > it around for later use (which is one of the reasons that warmi=
ng
>> >> >>> > queries matter). But if you really do close the reader, I'm pre=
tty
>> >> >>> > sure the memory should be GC-able.
>> >> >>> >
>> >> >>> > One thing that trips people up is IndexReader.reopen(). If it
>> >> >>> > returns a reader different than the original, you *must* close =
the
>> >> >>> > old one. If you don't, the old reader is still hanging around a=
nd
>> >> >>> > memory won't be returne.... An example from the Javadocs...
>> >> >>> >
>> >> >>> > =A0IndexReader reader =3D ...
>> >> >>> > =A0...
>> >> >>> > =A0IndexReader new =3D r.reopen();
>> >> >>> > =A0if (new !=3D reader) {
>> >> >>> > =A0 ... =A0 =A0 // reader was reopened
>> >> >>> > =A0 reader.close();
>> >> >>> > =A0}
>> >> >>> > =A0reader =3D new;
>> >> >>> > =A0...
>> >> >>> >
>> >> >>> >
>> >> >>> > If this is irrelevant, could you post your close/open
>> >> >>> >
>> >> >>> > code?
>> >> >>> >
>> >> >>> > HTH
>> >> >>> >
>> >> >>> > Erick
>> >> >>> >
>> >> >>> >
>> >> >>> > On Mon, Dec 7, 2009 at 4:27 PM, TCK <moonwatcher32329@gmail.com=
>
>> >> wrote:
>> >> >>> >
>> >> >>> > > Hi,
>> >> >>> > > I'm having heap memory issues when I do lucene queries involv=
ing
>> >> >>> sorting
>> >> >>> > by
>> >> >>> > > a string field. Such queries seem to load a lot of data in to=
 the
>> >> heap.
>> >> >>> > > Moreover lucene seems to hold on to references to this data e=
ven
>> >> after
>> >> >>> > the
>> >> >>> > > index reader has been closed and a full GC has been run. Some=
 of
>> >> the
>> >> >>> > > consequences of this are that in my generational heap configu=
ration
>> >> a
>> >> >>> lot
>> >> >>> > > of
>> >> >>> > > memory gets promoted to tenured space each time I close the o=
ld
>> >> index
>> >> >>> > > reader
>> >> >>> > > and after opening and querying using a new one, and the tenur=
ed
>> >> space
>> >> >>> > > eventually gets fragmented causing a lot of promotion failure=
s
>> >> >>> resulting
>> >> >>> > in
>> >> >>> > > jvm hangs while the jvm does stop-the-world GCs.
>> >> >>> > >
>> >> >>> > > Does anyone know any workarounds to avoid these memory issues=
 when
>> >> >>> doing
>> >> >>> > > such lucene queries?
>> >> >>> > >
>> >> >>> > > My profiling showed that even after a full GC lucene is holdi=
ng on
>> >> to a
>> >> >>> > lot
>> >> >>> > > of references to field value data notably via the
>> >> >>> > > FieldCacheImpl/ExtendedFieldCacheImpl. I noticed that the
>> >> WeakHashMap
>> >> >>> > > readerCaches are using unbounded HashMaps as the innerCaches =
and I
>> >> used
>> >> >>> > > reflection to replace these innerCaches with dummy empty Hash=
Maps,
>> >> but
>> >> >>> > > still
>> >> >>> > > I'm seeing the same behavior. I wondered if anyone has gone t=
hrough
>> >> >>> these
>> >> >>> > > same issues before and would offer any advice.
>> >> >>> > >
>> >> >>> > > Thanks a lot,
>> >> >>> > > TCK
>> >> >>> > >
>> >> >>> >
>> >> >>>
>> >> >>
>> >> >
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 11 14:13:09 2009
Return-Path: <java-user-return-44046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92108 invoked from network); 11 Dec 2009 14:13:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Dec 2009 14:13:09 -0000
Received: (qmail 42459 invoked by uid 500); 11 Dec 2009 14:13:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42399 invoked by uid 500); 11 Dec 2009 14:13:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42389 invoked by uid 99); 11 Dec 2009 14:13:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Dec 2009 14:13:06 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.220.209 as permitted sender)
Received: from [209.85.220.209] (HELO mail-fx0-f209.google.com) (209.85.220.209)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Dec 2009 14:12:58 +0000
Received: by fxm2 with SMTP id 2so454540fxm.5
        for <java-user@lucene.apache.org>; Fri, 11 Dec 2009 06:12:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=oXNfuL1LzWfW7R24R6UyBvTGpTdEUegOYmGQzDHU66s=;
        b=tM2KK1l5UOfDaDSUkuQKjrcIGJ9qBVNiXUU0Co13OItB+MsxCS50KF3/CpeP8TSsFH
         +TfpL0JE/OlY8BYk3TE7aLMo/UioSZbLwvWXfQrvtNp0JplE32Vh7PhGTEB56PyCyoom
         x547tBsfTunRTjAkx6Twl4oClXHBpXJuiuAfQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=iUgLh5RTybbOJj265828DZVWM48HBoe3wHs6O/cyPfTa/TeTeKgWHuXBjxyemmI1be
         J0lFAuuJqqCYgEddPgf4N75cGpW/iy3IJmc31rN8mpSlejG06t4YFt4kj1biYs2kfuil
         zTfBSVsWNOJF2fst/jkxbQIR2yFIq3xaa717o=
MIME-Version: 1.0
Received: by 10.223.103.25 with SMTP id i25mr1495428fao.64.1260540758605; Fri, 
	11 Dec 2009 06:12:38 -0800 (PST)
In-Reply-To: <962c93f60912110010t34d3d503qd9689023e0c11f78@mail.gmail.com>
References: <962c93f60912102352k5ecac41coaafd897517dc3907@mail.gmail.com> 
	<962c93f60912110010t34d3d503qd9689023e0c11f78@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 11 Dec 2009 14:12:18 +0000
Message-ID: <8c4e68610912110612wb073979nc19bf8f38944e8ab@mail.gmail.com>
Subject: Re: Returns nothing when sorting
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi


Sounds very odd.  I suggest you break it down into the smallest
self-contained program/test case that demonstrates the problem.  If
that doesn't help you find the problem, post it here.


--
Ian.


On Fri, Dec 11, 2009 at 8:10 AM, Michel Nadeau <akaris@gmail.com> wrote:
> By the way the same search + filter combination but with a sort on another
> field (string) works. It seems only the float sort isn't working. The float
> sort is working correctly in other conditions though.
>
> I'm very puzzled !
>
> - Mike
> akaris@gmail.com
>
>
> On Fri, Dec 11, 2009 at 2:52 AM, Michel Nadeau <akaris@gmail.com> wrote:
>
>> Hi !
>>
>> I have a quite small Lucene 3.0.0 index with around 400,000 documents in
>> it.
>>
>> I'm trying to sort my results like this :
>>
>> TopDocs td;
>> td = searcher.search(q, cluCF, 10, cluSort);
>> ScoreDoc[] hits = td.scoreDocs;
>>
>> My cluCF is a ChainedFilter containing at least one filter, and cluSort is
>> a float type.
>>
>> I'm not sure where to start - my Lucene application is a Java Web Server
>> (multithread), and when querying it with sorting, it just returns nothing;
>> no error, no crash, but no results. If I do the same query/filter without
>> sorting, I get results.
>>
>> Anything I could try?
>>
>> Thanks,
>>
>> - Mike
>> akaris@gmail.com
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 11 17:10:21 2009
Return-Path: <java-user-return-44047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84316 invoked from network); 11 Dec 2009 17:10:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Dec 2009 17:10:21 -0000
Received: (qmail 81727 invoked by uid 500); 11 Dec 2009 17:10:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81651 invoked by uid 500); 11 Dec 2009 17:10:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81640 invoked by uid 99); 11 Dec 2009 17:10:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Dec 2009 17:10:17 +0000
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Dec 2009 17:10:08 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NJ900-0008Bs-B7
	for java-user@lucene.apache.org; Fri, 11 Dec 2009 09:09:48 -0800
Message-ID: <26748041.post@talk.nabble.com>
Date: Fri, 11 Dec 2009 09:09:48 -0800 (PST)
From: maxSchlein <m_schlein@hotmail.com>
To: java-user@lucene.apache.org
Subject: Lucene Analyzer that can handle C++ vs C#
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: m_schlein@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Can someone please point me in the right direction.

We are creating an application that needs to beable to search on C++ and get
back doc's that have C++ in it.  The StandardAnalyzer does not seem to index
the "+", so a search for "C++" will bring back docs that contain, C++, C,
C#, etc.....  The WhiteSpaceAnalyzer will index the "+", but if we have the
term "C++." that is, if C++ is at the end of a sentence, it will index
"C++." so a search for "C++" will not return the doc.  I have heard of maybe
a CustomAnalyzer; however, it seems like there would actually need to be a
CustomFilter/CustomTokenizer, I looked at:
     - StandardAnalyzer.java
     - StandardFilter.java
     - StandardTokenizer.java
     - StandardTokenizerImpl.java
     - StandardTokenizerImpl.jflex

I would guess that the StandardTokenizer is where the changes would need to
be made to allow the "+" character, but I am unclear as to how.

Any and all help is greatly appreciated.

Going thru all the documents, stripping out "+" for the word "plus" is not
really an option for us. 
-- 
View this message in context: http://old.nabble.com/Lucene-Analyzer-that-can-handle-C%2B%2B-vs-C--tp26748041p26748041.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 11 17:19:59 2009
Return-Path: <java-user-return-44048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90433 invoked from network); 11 Dec 2009 17:19:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Dec 2009 17:19:59 -0000
Received: (qmail 2704 invoked by uid 500); 11 Dec 2009 17:19:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2627 invoked by uid 500); 11 Dec 2009 17:19:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2617 invoked by uid 99); 11 Dec 2009 17:19:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Dec 2009 17:19:57 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [140.203.201.101] (HELO mx2.nuigalway.ie) (140.203.201.101)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Dec 2009 17:19:54 +0000
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: ApoEANMNIksKhJ0L/2dsb2JhbADWM4QrBA
X-IronPort-AV: E=Sophos;i="4.47,383,1257120000"; 
   d="scan'208";a="9035044"
Received: from unknown (HELO EVS1.ac.nuigalway.ie) ([10.132.157.11])
  by mx2.nuigalway.ie with ESMTP; 11 Dec 2009 17:19:29 +0000
Received: from EVS1.ac.nuigalway.ie ([10.132.157.14]) by EVS1.ac.nuigalway.ie with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 11 Dec 2009 17:19:29 +0000
Received: from [10.2.18.102] ([140.203.154.11]) by EVS1.ac.nuigalway.ie over TLS secured channel with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 11 Dec 2009 17:19:29 +0000
Message-ID: <4B227F20.7080005@deri.org>
Date: Fri, 11 Dec 2009 17:19:28 +0000
From: Renaud Delbru <renaud.delbru@deri.org>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.1.7pre) Gecko/20091209 Lightning/1.0pre Shredder/3.0.1pre
MIME-Version: 1.0
To: java-user@lucene.apache.org
CC: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: IndexingChain and TermHash
References: <4AF45CF0.2020105@deri.org>	 <9ac0c6aa0911061009r771021a3i55f849209353fa2c@mail.gmail.com>	 <4AF46C19.2090306@deri.org>	 <9ac0c6aa0911140522o31b05ff6idd6ec1ffd303b423@mail.gmail.com>	 <4B014579.9080807@deri.org> <9ac0c6aa0911160501k682c79gdb3be8111c4c6f9f@mail.gmail.com>
In-Reply-To: <9ac0c6aa0911160501k682c79gdb3be8111c4c6f9f@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 11 Dec 2009 17:19:29.0152 (UTC) FILETIME=[18AA9800:01CA7A86]

Hi Michael,

I am reporting my experience with the codec interface. I have 
successfully implemented my own encoding, which is a kind of simplified 
tree-based encoding (similarly to what you can find in XML IR). You can 
have more information about my project (siren) on [1]. The basic idea is 
to encode a term with three different identifiers, doc id, tuple id, and 
cell id, instead of only the doc id. Each term therefore belongs to a 
tree leaf and are tagged with the leaf path (doc id, tuple id, cell id).

I have converted the siren project to use my new encoding, all the unit 
tests are passing, which is good news (which means, no problem with the 
skip lists, term enumeration or posting list reading).

For my use case, I had to "hijack" the normal use of the payload 
interface. Indeed, the codec is receiving only the following 
information: doc id, position, and payload. In order to pass the tuple 
id and cell id to my codec, I had to encode them into a payload in my 
analyzer, then decode them in my codec (in the 
StandardPositionsConsumer) to encode it into the index (and not encoding 
them as payload as in the standard codec). Then, in the 
StandardPositionProducer, I had to decode them from the index and 
re-encode them into the payload interface in order to made the segment 
merger working properly.
So, my remark here is about a potential improvement for the codec 
interface. I don't know if it can be done easily and if it is worth it, 
but maybe an interface (optional parameter) that allow to pass 
additional information from the analyzers (e.g., certain attributes) 
directly into the codec can be handy (and without passing them using the 
payload features as I have done it).

Another minor problem is that in the current 1458 branch, the 
IndexReader.open method that accepts the Codecs object is private. So, 
for the moment, I am obliged to first open an IndexWriter with my 
codecs, and then use the IndexWriter.getReader to get an IndexReader.

Otherwise, congratulation for this very nice feature and piece of work. 
This is something I wanted for a long time (I am doing research in the 
domain of inverted index data structure), and this feature opens a wide 
range of new possibilities.

I am planning to implement variants of my current codecs in a short term 
period, and more complex one (with other skip list methods) in a medium 
term period. I will continue to follow the advancement of 1458, test it, 
and continue to report you my feedbacks and experiences with it.

Thanks,
Best Regards

[1] http://siren.sindice.com
-- 
Renaud Delbru

On 16/11/09 13:01, Michael McCandless wrote:
> Yes, the branch is here:
>
>      https://svn.apache.org/repos/asf/lucene/java/branches/flex_1458
>
> Mark (Miller) periodically re-sync's it to trunk.
>
> All tests should pass, and if you create a new Codec, please share the
> experience!
>
> There are not yet many Codecs in existence... the branch has the
> "standard" codec (closest to Lucene's current index format, but makes
> some compelling improvements to the terms dict), a "pulsing" codec
> (which inlines low-freq terms into the terms dict), an intblock codec
> (an abstract base for building int-block codecs).  There's also the
> PForDelta codec, attached to LUCENE-1410, which subclasses the
> intblock codec and uses PForDelta encoding.  It's probably best to
> peek at these example codecs for inspiration on how to build yours.
>
> Mike
>
> On Mon, Nov 16, 2009 at 7:28 AM, Renaud Delbru<renaud.delbru@deri.org>  wrote:
>    
>> Hi Michael,
>>
>> I see there is already a huge amount of work already done in LUCENE-1458. Is
>> there a way to checkout the corresponding branch, and start to use it ? At
>> least, to see if I can extend it and create my own Codec.
>> I have started on my side to abstract the indexing chain of Lucene 2.9, in
>> order to be able to plug my own chain, but I have the impression that you've
>> done something similar already (with the codec abstraction). Would be a pity
>> to lose my time doing something less convenient that your appraoch.
>>
>> Thanks.
>> --
>> Renaud Delbru
>>
>> On 14/11/09 13:22, Michael McCandless wrote:
>>      
>>> On Fri, Nov 6, 2009 at 1:34 PM, Renaud Delbru<renaud.delbru@deri.org>
>>>   wrote:
>>>
>>>        
>>>> Hi Michael,
>>>>
>>>> Thanks for the quick fix. I have tested it (indexing multiple documents +
>>>> searching), and it seems to work.
>>>>
>>>> On 06/11/09 18:09, Michael McCandless wrote:
>>>>
>>>>          
>>>>> To be honest, you are sort of forging new territory here :)
>>>>>
>>>>>
>>>>>            
>>>> I think so too, not an easy task ;o). I have seen that you have tried to
>>>> make modular the indexing chain of Lucene (DocumentsWriter). I still try
>>>> to
>>>> have a good understanding of the default indexing, but I would like to
>>>> see
>>>> how it is easy (or difficult) to modify the format of the postings. From
>>>> my
>>>> current understanding, it seems that only the consumer at the end of this
>>>> chain (FreqProxTermsWriter and its consumer FormatPostingsFieldsWriter)
>>>> has
>>>> to be changed to a certain extend.
>>>>
>>>>          
>>> Right, those two classes do the writing of the postings, currently.
>>>
>>> But with flexible indexing (LUCENE-1458), still in progress, we hope
>>> to make it more easily pluggable, the codec that actually reads&
>>> writes the postings.
>>>
>>> Mike
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>        
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>      
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>    


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 11 17:21:30 2009
Return-Path: <java-user-return-44049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90801 invoked from network); 11 Dec 2009 17:21:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Dec 2009 17:21:29 -0000
Received: (qmail 4783 invoked by uid 500); 11 Dec 2009 17:21:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4682 invoked by uid 500); 11 Dec 2009 17:21:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4671 invoked by uid 99); 11 Dec 2009 17:21:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Dec 2009 17:21:27 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rstaveley@seseit.com designates 209.97.205.201 as permitted sender)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Dec 2009 17:21:18 +0000
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 67D4F183C6; Fri, 11 Dec 2009 17:20:50 +0000 (GMT)
X-Spam-Checker-Version: SpamAssassin 3.1.7-deb3 (2006-10-05) on 
	mini.seseit.net
X-Spam-Level: 
Received: from Bigun (bimport.seseit.net [78.143.212.168])
	by mail.seseit.com (Postfix) with ESMTP id D9480183C6
	for <java-user@lucene.apache.org>; Fri, 11 Dec 2009 17:20:43 +0000 (GMT)
From: "Rob Staveley \(Tom\)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: Lucene 3.0.0 writer with a Lucene 2.3.1 index
Date: Fri, 11 Dec 2009 17:20:56 -0000
Message-ID: <07c601ca7a86$4de99340$e9bcb9c0$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acp6hkvFrgUvDtBcTve1/rQYNBc1ZA==
Content-Language: en-gb
X-seseit-ltd-MailScanner: Found to be clean, Found to be clean
X-seseit-ltd-MailScanner-From: rstaveley@seseit.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.0 required=5.0 tests=none autolearn=failed 
	version=3.1.7-deb3, No

I'm upgrading from 2.3.1 to 3.0.0. I have 3.0.0 index readers ready to go
into production and writers in the process of upgrading to 3.0.0.

I think understand the implications of
http://wiki.apache.org/lucene-java/BackwardsCompatibility#File_Formats for
the upgrade, but I'd love it if someone could validate my following
assumptions.

  1. My 2.3.1 indexes have compressed fields in them, which the 3.0.0
readers work nicely with, as expected. I should assume that my 3.0.0 readers
will continue to handle 2.3.1 indexes OK.

  2. Presumably Lucene all future 3.x index readers will continue to handle
compressed fields and we should only anticipate Lucene 4.x choking on them.

I was naively expecting my index directories to grow when my 3.0.0 index
writer merged the 2.3.1 indexes and/or optimize()'d them converting them to
3.0.0. However, I don't see that. Presumably that means that....

  3. Documents added to existing 2.3.1 indexes will be added conforming to
3.0.0, but existing documents in the index will continue to have compressed
content and old documents can coexist happily with the new ones, and my
indexes will become a mixture of 2.3.1 and 3.0.0.

  4. I should use
http://lucene.apache.org/java/2_9_1/api/all/org/apache/lucene/util/Version.h
tml#LUCENE_23 for the StandardAnalyzer and QueryParser in mixed indexes in
3.0.0 if I want to handle analysis consistently, or go for LUCENE_CURRENT if
I want to handle the new content "better" (bearing in mind that the new
content will eventually replace the old content anyhow).

  5. I should use
http://lucene.apache.org/java/3_0_0/api/all/org/apache/lucene/analysis/StopF
ilter.html#StopFilter%28boolean,%20org.apache.lucene.analysis.TokenStream,%2
0java.util.Set%29 with enablePositionIncrements=false in mixed indexes in
3.0.0 if I want to handle analysis consistently, or go for
enablePositionIncrements=true if I want to handle the new content "better"
(bearing in mind that the new content will eventually replace the old
content anyhow).


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 11 18:05:26 2009
Return-Path: <java-user-return-44050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16017 invoked from network); 11 Dec 2009 18:05:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Dec 2009 18:05:25 -0000
Received: (qmail 67637 invoked by uid 500); 11 Dec 2009 18:05:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67556 invoked by uid 500); 11 Dec 2009 18:05:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67544 invoked by uid 99); 11 Dec 2009 18:05:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Dec 2009 18:05:23 +0000
X-ASF-Spam-Status: No, hits=-2.2 required=5.0
	tests=AWL,BAYES_00,RCVD_IN_SORBS_WEB
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.49.16] (HELO web52906.mail.re2.yahoo.com) (206.190.49.16)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 11 Dec 2009 18:05:21 +0000
Received: (qmail 16898 invoked by uid 60001); 11 Dec 2009 18:05:00 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1260554699; bh=wGMSk/PGwv7tll3K11IeFM++wMB5M8tCNmifytZ5JJw=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=L/Jx0fd1p+PdfMx7ppfVJPgi2tMWohzMEOb0X1SxJtEZKJ/jIP1ZaH6tnUwagtK7WZMy5ZUAFnegnMc70vQM6zMxy5OndJdFXL0AXZM4ZSzj0GEUuscmvFx3Ww8DyFp0EjgRaEOxtzAaFAVKy3VHRSRe+0Lh2TP9XQn0Gqc5Vts=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=l1ISHahcpcUkWW1UDoKXBrbLnsFM0QE+/gpvpfq5FTgWpBgiGsf4MaqB5N87c4tmEpqGNhoWLlkgE4buZGQ+VYWBAnBK6ftppxyYzEYoKZ3+6Irzkf2GxohnZkOXkoIil64zK6jJtFZ2fIgRwCwNGjAx47yZavdGX51SsA2vJZ8=;
Message-ID: <982928.16882.qm@web52906.mail.re2.yahoo.com>
X-YMail-OSG: pGrToXMVM1mnfhf0qn26Bkfrj7BdPqpkg9yrI8jgGPDa59ga4miHDWJpFM5LndI6Kgh9BsoSBjXRkOvSr2ec0H5Y2GDdQOpDlIClgKtmpiDDrPoFKfzNH1susqf76iF92Y8M6YXRCeY1avrnxoUSgyvJYrLHv3MsuwlBZa1Jh8gkMGtiauR9PNpLM35S1A67b7dsj6SqwDaysdTPeSEME9GGzqA_XRXLv5LAGCyWzjhjUCZVslWKZbo5zyuKEj_p_lw9kr9j3z0IiEP_mbNEAqMV3XkcyDWqn_PPo1XLaZv_II75nZpNPolebuX7BLjVTH.nPx6VEkgL4Q--
Received: from [78.168.191.220] by web52906.mail.re2.yahoo.com via HTTP; Fri, 11 Dec 2009 10:04:59 PST
X-Mailer: YahooMailClassic/9.0.19 YahooMailWebService/0.8.100.260964
Date: Fri, 11 Dec 2009 10:04:59 -0800 (PST)
From: AHMET ARSLAN <iorixxx@yahoo.com>
Subject: Re: Lucene Analyzer that can handle C++ vs C#
To: java-user@lucene.apache.org
In-Reply-To: <26748041.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

=0A> Can someone please point me in the right direction.=0A> =0A> We are cr=
eating an application that needs to beable to=0A> search on C++ and get=0A>=
 back doc's that have C++ in it.=A0 The StandardAnalyzer=0A> does not seem =
to index=0A> the "+", so a search for "C++" will bring back docs that=0A> c=
ontain, C++, C,=0A> C#, etc.....=A0 The WhiteSpaceAnalyzer will index the=
=0A> "+", but if we have the=0A> term "C++." that is, if C++ is at the end =
of a sentence, it=0A> will index=0A> "C++." so a search for "C++" will not =
return the doc.=A0=0A> I have heard of maybe=0A> a CustomAnalyzer; however,=
 it seems like there would=0A> actually need to be a=0A> CustomFilter/Custo=
mTokenizer, I looked at:=0A> =A0 =A0=A0=A0- StandardAnalyzer.java=0A> =A0 =
=A0=A0=A0- StandardFilter.java=0A> =A0 =A0=A0=A0- StandardTokenizer.java=0A=
> =A0 =A0=A0=A0- StandardTokenizerImpl.java=0A> =A0 =A0=A0=A0- StandardToke=
nizerImpl.jflex=0A> =0A> I would guess that the StandardTokenizer is where =
the=0A> changes would need to=0A> be made to allow the "+" character, but I=
 am unclear as to=0A> how.=0A> =0A> Any and all help is greatly appreciated=
.=0A=0AOne option is to modify StandardTokenizerImpl.jflex and generate Cus=
tomTokenizerImpl.java so that it will recognize C++ and C# as one token. Yo=
u need to write a new Tokenizer that uses that CustomTokenizerImpl.java.=0A=
=0AOther option can be to extend CharTokenizer. Modify the source code of L=
etterTokenizer : =0A=0A @Override=0A  protected boolean isTokenChar(char c)=
 {=0A    return Character.isLetter(c) || c=3D=3D'+' || c=3D=3D'#';=0A  }=0A=
=0AHope this helps.=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 11 18:31:28 2009
Return-Path: <java-user-return-44051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33801 invoked from network); 11 Dec 2009 18:31:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Dec 2009 18:31:28 -0000
Received: (qmail 9230 invoked by uid 500); 11 Dec 2009 18:31:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9174 invoked by uid 500); 11 Dec 2009 18:31:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9164 invoked by uid 99); 11 Dec 2009 18:31:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Dec 2009 18:31:26 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anshumg@gmail.com designates 209.85.160.46 as permitted sender)
Received: from [209.85.160.46] (HELO mail-pw0-f46.google.com) (209.85.160.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Dec 2009 18:31:17 +0000
Received: by pwj16 with SMTP id 16so851374pwj.5
        for <java-user@lucene.apache.org>; Fri, 11 Dec 2009 10:30:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=XHLnbIH60/ixia48iUq0B/OAqydtW6KKMtcU54zr2gk=;
        b=pKSf5HaeylREfrtvGdsY0RTSx+e2Pf8dvR0R/RiC7NPXmO5nFUK1wnEE/ebH0E0QTi
         Tuk1oWlPrbECS8cSU2xtl4AXiswuGKeXRaGQ8d/j9xgppcpWQSKZLJ6KJZCFJW2CsRcn
         wxxo4BJPQj3yUgFcht/p0l3TMm/MCbKQ7AKm8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=TxM9i96GQ5spq/xvxpqa34tZ2rhrafYLTFMrDkzFOivrvq2CvWi4t20V6vjQ27yZfx
         N5T17qGUiIa/pRN7NUR2RWqetHDz231NdH/T0hjEZVcAsEEWlGS97V85nWWKGi8AQM8B
         FiSkyKb4l41SHyBs2NQZ2UBZmNqfl4Ohm4aw8=
MIME-Version: 1.0
Received: by 10.115.134.5 with SMTP id l5mr1036869wan.70.1260556256106; Fri, 
	11 Dec 2009 10:30:56 -0800 (PST)
In-Reply-To: <07c601ca7a86$4de99340$e9bcb9c0$@com>
References: <07c601ca7a86$4de99340$e9bcb9c0$@com>
From: Anshum <anshumg@gmail.com>
Date: Sat, 12 Dec 2009 00:00:36 +0530
Message-ID: <867513fe0912111030t25fc4e1fud989d3ed5a1eef76@mail.gmail.com>
Subject: Re: Lucene 3.0.0 writer with a Lucene 2.3.1 index
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e648d0b6dd57eb047a781faf
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e648d0b6dd57eb047a781faf
Content-Type: text/plain; charset=ISO-8859-1

Hi Tom,
Pt 3: As per my knowledge, it wouldn't be a 'mixture' of 2 index types.
Rather, as soon as you optimize (or do a IndexWriter operation on the
current index), it would expand the index to a non compressed format. I read
it somewhere in the release notes that on doing so, a growth in the index
size should be anticipated and handled.

--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Fri, Dec 11, 2009 at 10:50 PM, Rob Staveley (Tom)
<rstaveley@seseit.com>wrote:

> I'm upgrading from 2.3.1 to 3.0.0. I have 3.0.0 index readers ready to go
> into production and writers in the process of upgrading to 3.0.0.
>
> I think understand the implications of
> http://wiki.apache.org/lucene-java/BackwardsCompatibility#File_Formats for
> the upgrade, but I'd love it if someone could validate my following
> assumptions.
>
>  1. My 2.3.1 indexes have compressed fields in them, which the 3.0.0
> readers work nicely with, as expected. I should assume that my 3.0.0
> readers
> will continue to handle 2.3.1 indexes OK.
>
>  2. Presumably Lucene all future 3.x index readers will continue to handle
> compressed fields and we should only anticipate Lucene 4.x choking on them.
>
> I was naively expecting my index directories to grow when my 3.0.0 index
> writer merged the 2.3.1 indexes and/or optimize()'d them converting them to
> 3.0.0. However, I don't see that. Presumably that means that....
>
>  3. Documents added to existing 2.3.1 indexes will be added conforming to
> 3.0.0, but existing documents in the index will continue to have compressed
> content and old documents can coexist happily with the new ones, and my
> indexes will become a mixture of 2.3.1 and 3.0.0.
>
>  4. I should use
>
> http://lucene.apache.org/java/2_9_1/api/all/org/apache/lucene/util/Version.h
> tml#LUCENE_23 for the StandardAnalyzer and QueryParser in mixed indexes in
> 3.0.0 if I want to handle analysis consistently, or go for LUCENE_CURRENT
> if
> I want to handle the new content "better" (bearing in mind that the new
> content will eventually replace the old content anyhow).
>
>  5. I should use
>
> http://lucene.apache.org/java/3_0_0/api/all/org/apache/lucene/analysis/StopF
>
> ilter.html#StopFilter%28boolean,%20org.apache.lucene.analysis.TokenStream,%2
> 0java.util.Set%29 with enablePositionIncrements=false in mixed indexes in
> 3.0.0 if I want to handle analysis consistently, or go for
> enablePositionIncrements=true if I want to handle the new content "better"
> (bearing in mind that the new content will eventually replace the old
> content anyhow).
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e648d0b6dd57eb047a781faf--

From java-user-return-44052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 11 18:44:06 2009
Return-Path: <java-user-return-44052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44416 invoked from network); 11 Dec 2009 18:44:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Dec 2009 18:44:06 -0000
Received: (qmail 31143 invoked by uid 500); 11 Dec 2009 18:44:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31048 invoked by uid 500); 11 Dec 2009 18:44:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31037 invoked by uid 99); 11 Dec 2009 18:44:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Dec 2009 18:44:03 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Dec 2009 18:43:53 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id E8C0ED36001
	for <java-user@lucene.apache.org>; Fri, 11 Dec 2009 19:43:31 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id ijgx15vnCrJT for <java-user@lucene.apache.org>;
	Fri, 11 Dec 2009 19:43:22 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id C4EB9D36004
	for <java-user@lucene.apache.org>; Fri, 11 Dec 2009 19:43:21 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <07c601ca7a86$4de99340$e9bcb9c0$@com> <867513fe0912111030t25fc4e1fud989d3ed5a1eef76@mail.gmail.com>
Subject: RE: Lucene 3.0.0 writer with a Lucene 2.3.1 index
Date: Fri, 11 Dec 2009 19:43:20 +0100
Message-ID: <750496711578437DA29D9735C6B92BD2@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <867513fe0912111030t25fc4e1fud989d3ed5a1eef76@mail.gmail.com>
Thread-Index: Acp6kC6m4vW7v3RMS0+8QYSe7yMokQAARGHQ
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

The index *should* grow after merging/optimizing, but it will only do this,
if the fields you had compressed were not bigger then without compression.
One of the tests showed: A string field with 80 ascii chars needed
compressed about 250 bytes, which is 3 times (as chars are UTF-8 encoded)
the uncompressed size. So it was always a bad idea to compress only short
fields, compression for say fields<1024 chars is simply waste of time and
disk space.

So maybe you hit bthis issue: Some fields were so small that the compressed
representation were larger than uncompressed. And others the other way
round. This leads to o/o change.

By the way, if your index was already optimized in 2.3 and you try to
optimize it in 3.0, it will be a no-op, as optimization needs at least two
segments to merge.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Anshum [mailto:anshumg@gmail.com]
> Sent: Friday, December 11, 2009 7:31 PM
> To: java-user@lucene.apache.org
> Subject: Re: Lucene 3.0.0 writer with a Lucene 2.3.1 index
> 
> Hi Tom,
> Pt 3: As per my knowledge, it wouldn't be a 'mixture' of 2 index types.
> Rather, as soon as you optimize (or do a IndexWriter operation on the
> current index), it would expand the index to a non compressed format. I
> read
> it somewhere in the release notes that on doing so, a growth in the index
> size should be anticipated and handled.
> 
> --
> Anshum Gupta
> Naukri Labs!
> http://ai-cafe.blogspot.com
> 
> The facts expressed here belong to everybody, the opinions to me. The
> distinction is yours to draw............
> 
> 
> On Fri, Dec 11, 2009 at 10:50 PM, Rob Staveley (Tom)
> <rstaveley@seseit.com>wrote:
> 
> > I'm upgrading from 2.3.1 to 3.0.0. I have 3.0.0 index readers ready to
> go
> > into production and writers in the process of upgrading to 3.0.0.
> >
> > I think understand the implications of
> > http://wiki.apache.org/lucene-java/BackwardsCompatibility#File_Formats
> for
> > the upgrade, but I'd love it if someone could validate my following
> > assumptions.
> >
> >  1. My 2.3.1 indexes have compressed fields in them, which the 3.0.0
> > readers work nicely with, as expected. I should assume that my 3.0.0
> > readers
> > will continue to handle 2.3.1 indexes OK.
> >
> >  2. Presumably Lucene all future 3.x index readers will continue to
> handle
> > compressed fields and we should only anticipate Lucene 4.x choking on
> them.
> >
> > I was naively expecting my index directories to grow when my 3.0.0 index
> > writer merged the 2.3.1 indexes and/or optimize()'d them converting them
> to
> > 3.0.0. However, I don't see that. Presumably that means that....
> >
> >  3. Documents added to existing 2.3.1 indexes will be added conforming
> to
> > 3.0.0, but existing documents in the index will continue to have
> compressed
> > content and old documents can coexist happily with the new ones, and my
> > indexes will become a mixture of 2.3.1 and 3.0.0.
> >
> >  4. I should use
> >
> >
> http://lucene.apache.org/java/2_9_1/api/all/org/apache/lucene/util/Version
> .h
> > tml#LUCENE_23 for the StandardAnalyzer and QueryParser in mixed indexes
> in
> > 3.0.0 if I want to handle analysis consistently, or go for
> LUCENE_CURRENT
> > if
> > I want to handle the new content "better" (bearing in mind that the new
> > content will eventually replace the old content anyhow).
> >
> >  5. I should use
> >
> >
> http://lucene.apache.org/java/3_0_0/api/all/org/apache/lucene/analysis/Sto
> pF
> >
> >
> ilter.html#StopFilter%28boolean,%20org.apache.lucene.analysis.TokenStream,
> %2
> > 0java.util.Set%29 with enablePositionIncrements=false in mixed indexes
> in
> > 3.0.0 if I want to handle analysis consistently, or go for
> > enablePositionIncrements=true if I want to handle the new content
> "better"
> > (bearing in mind that the new content will eventually replace the old
> > content anyhow).
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 11 23:58:17 2009
Return-Path: <java-user-return-44053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54524 invoked from network); 11 Dec 2009 23:58:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Dec 2009 23:58:17 -0000
Received: (qmail 10006 invoked by uid 500); 11 Dec 2009 23:58:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9911 invoked by uid 500); 11 Dec 2009 23:58:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9901 invoked by uid 99); 11 Dec 2009 23:58:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Dec 2009 23:58:14 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 209.85.211.200 as permitted sender)
Received: from [209.85.211.200] (HELO mail-yw0-f200.google.com) (209.85.211.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Dec 2009 23:58:12 +0000
Received: by ywh38 with SMTP id 38so1381769ywh.6
        for <java-user@lucene.apache.org>; Fri, 11 Dec 2009 15:57:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=PZ666vPt+7BpzHE8jf8D+7uqJEKeA25QkzDchnoGkh8=;
        b=v5vRflGapjNELk27pCIfL9A6RjD6K6xHypD4WjcHIJ+UDXht642BfzAiYH6B9p5Dio
         9dTJ+9nPWgRGimLjZgfS03QyJY2jLY2tOA9JtpPqqJ13gRGcvHpM6qczOngo3+DxLG/4
         7WJ182/xXWztyt1aKW1J0ymn5f+In90tHyD4M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=HR/y+C4eGOvcLnHzP7r8onEfSC2By3S62NCt4SjU2CR5lnmL39wwbKOySgilG4rHzR
         LtIFXwciMcpOx0MyQIx3QJ30TYOdWJQlVOWezygg+0ZWVRqiWZ1NP67dZfuhkYI9X7qr
         GJogs43vnds/s3IXAWx/1HMx7dA5Vq8T92G0M=
Received: by 10.150.48.40 with SMTP id v40mr3558539ybv.142.1260575871569;
        Fri, 11 Dec 2009 15:57:51 -0800 (PST)
Received: from ?192.168.1.100? (c-71-202-137-93.hsd1.ca.comcast.net [71.202.137.93])
        by mx.google.com with ESMTPS id 4sm899494ywg.43.2009.12.11.15.57.50
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 11 Dec 2009 15:57:50 -0800 (PST)
Message-ID: <4B22DC73.9030502@gmail.com>
Date: Fri, 11 Dec 2009 15:57:39 -0800
From: Chris Lu <chris.lu@gmail.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1.5) Gecko/20091204 Thunderbird/3.0
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene Analyzer that can handle C++ vs C#
References: <26748041.post@talk.nabble.com>
In-Reply-To: <26748041.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

What we did in DBSight is to provide a reserved list of words for every 
Lucene Analyzer.
This way you can handle any special characters like C++ and C#.

Any common analyzers usually are not suitable for these special words.

--
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes: http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got 2.6 Million Euro funding!


On 12/11/2009 9:09 AM, maxSchlein wrote:
> Can someone please point me in the right direction.
>
> We are creating an application that needs to beable to search on C++ and get
> back doc's that have C++ in it.  The StandardAnalyzer does not seem to index
> the "+", so a search for "C++" will bring back docs that contain, C++, C,
> C#, etc.....  The WhiteSpaceAnalyzer will index the "+", but if we have the
> term "C++." that is, if C++ is at the end of a sentence, it will index
> "C++." so a search for "C++" will not return the doc.  I have heard of maybe
> a CustomAnalyzer; however, it seems like there would actually need to be a
> CustomFilter/CustomTokenizer, I looked at:
>       - StandardAnalyzer.java
>       - StandardFilter.java
>       - StandardTokenizer.java
>       - StandardTokenizerImpl.java
>       - StandardTokenizerImpl.jflex
>
> I would guess that the StandardTokenizer is where the changes would need to
> be made to allow the "+" character, but I am unclear as to how.
>
> Any and all help is greatly appreciated.
>
> Going thru all the documents, stripping out "+" for the word "plus" is not
> really an option for us.
>    

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 12 01:46:40 2009
Return-Path: <java-user-return-44054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2574 invoked from network); 12 Dec 2009 01:46:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Dec 2009 01:46:39 -0000
Received: (qmail 79365 invoked by uid 500); 12 Dec 2009 01:46:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79287 invoked by uid 500); 12 Dec 2009 01:46:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79277 invoked by uid 99); 12 Dec 2009 01:46:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Dec 2009 01:46:37 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.216.171 as permitted sender)
Received: from [209.85.216.171] (HELO mail-px0-f171.google.com) (209.85.216.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Dec 2009 01:46:27 +0000
Received: by pxi1 with SMTP id 1so1548192pxi.29
        for <java-user@lucene.apache.org>; Fri, 11 Dec 2009 17:46:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:mime-version
         :content-class:from:subject:date:importance:x-priority:to
         :content-transfer-encoding:content-type;
        bh=YkZLVC29wsGftcqU/3pI11eActB6qmRKxZ6ff8NzJmo=;
        b=IE+ggK355dJdoKd/Lf6tp7XWnKNV/qPPxUpWFQfmQzr+OVwKmc4VTc41GzVahYzHe1
         64AMQ0lRCVWgZrmW4vwlpV7LxN/F280lXTB2KVJNAmOG76DSlVy4I2WBLZOrE1vFDqYz
         7cFSiRmXsDC5t48oGu0dTmNbGyi9WURP91PBg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:mime-version:content-class:from:subject:date:importance
         :x-priority:to:content-transfer-encoding:content-type;
        b=fft1v2Gn1MqWJ6mnQwI0tHyfuoeDXmI9tJjeJvyKLml0VVy0BZOsCPWP/c1yoHa0fj
         odbtzos9EhoQi7UIgGqgf2pbs/P3Gb++ZpOEQ5G7Q4VBt8MMvw8ymX3hziAMziuEz+c2
         7j9bzRfCqZXlAJuFtvd38RDozpwEyeOInNXsk=
Received: by 10.142.247.40 with SMTP id u40mr1226650wfh.178.1260582366454;
        Fri, 11 Dec 2009 17:46:06 -0800 (PST)
Received: from Inbox ([117.136.19.137])
        by mx.google.com with ESMTPS id 22sm2229718pzk.6.2009.12.11.17.45.58
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 11 Dec 2009 17:46:05 -0800 (PST)
Message-ID: <4b22f5dd.9613f30a.0b47.ffffc8da@mx.google.com>
MIME-Version: 1.0
content-class: 
From: =?utf-8?Q?=E7=8E=8B=E5=B7=8D=E5=B7=8D?= <ww.wang.cs@gmail.com>
Subject: =?utf-8?Q?=E7=AD=94=E5=A4=8D:_Lucene_Analyzer_that_can_handle_C++_vs_C#?=
Date: Sat, 12 Dec 2009 09:45:45 +0800
Importance: normal
X-Priority: 3
To: <java-user@lucene.apache.org>
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain; charset="utf-8"
X-Virus-Checked: Checked by ClamAV on apache.org

Mappingcharfilter may bring you some ideas

----- =E5=8E=9F=E5=A7=8B=E9=82=AE=E4=BB=B6 -----
=E5=8F=91=E4=BB=B6=E4=BA=BA: maxSchlein <m_schlein@hotmail.com>
=E5=8F=91=E9=80=81=E6=97=B6=E9=97=B4: 2009=E5=B9=B412=E6=9C=8812=E6=97=A5 =
=E6=98=9F=E6=9C=9F=E5=85=AD 1:09
=E6=94=B6=E4=BB=B6=E4=BA=BA: java-user@lucene.apache.org
=E4=B8=BB=E9=A2=98: Lucene Analyzer that can handle C++ vs C#


Can someone please point me in the right direction.

We are creating an application that needs to beable to search on C++ and ge=
t
back doc's that have C++ in it.  The StandardAnalyzer does not seem to inde=
x
the "+", so a search for "C++" will bring back docs that contain, C++, C,
C#, etc.....  The WhiteSpaceAnalyzer will index the "+", but if we have the
term "C++." that is, if C++ is at the end of a sentence, it will index
"C++." so a search for "C++" will not return the doc.  I have heard of mayb=
e
a CustomAnalyzer; however, it seems like there would actually need to be a
CustomFilter/CustomTokenizer, I looked at:
     - StandardAnalyzer.java
     - StandardFilter.java
     - StandardTokenizer.java
     - StandardTokenizerImpl.java
     - StandardTokenizerImpl.jflex

I would guess that the StandardTokenizer is where the changes would need to
be made to allow the "+" character, but I am unclear as to how.

Any and all help is greatly appreciated.

Going thru all the documents, stripping out "+" for the word "plus" is not
really an option for us.=20
--=20
View this message in context: http://old.nabble.com/Lucene-Analyzer-that-ca=
n-handle-C%2B%2B-vs-C--tp26748041p26748041.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 12 10:44:37 2009
Return-Path: <java-user-return-44055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74460 invoked from network); 12 Dec 2009 10:44:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Dec 2009 10:44:36 -0000
Received: (qmail 77841 invoked by uid 500); 12 Dec 2009 10:44:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77763 invoked by uid 500); 12 Dec 2009 10:44:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77752 invoked by uid 99); 12 Dec 2009 10:44:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Dec 2009 10:44:33 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rstaveley@seseit.com designates 209.97.205.201 as permitted sender)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Dec 2009 10:44:30 +0000
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 6361D183CA; Sat, 12 Dec 2009 10:44:03 +0000 (GMT)
X-Spam-Checker-Version: SpamAssassin 3.1.7-deb3 (2006-10-05) on 
	mini.seseit.net
X-Spam-Level: 
Received: from Bigun (bimport.seseit.net [78.143.212.168])
	by mail.seseit.com (Postfix) with ESMTP id 41D8F183CA
	for <java-user@lucene.apache.org>; Sat, 12 Dec 2009 10:43:56 +0000 (GMT)
From: "Rob Staveley \(Tom\)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
References: <07c601ca7a86$4de99340$e9bcb9c0$@com> <867513fe0912111030t25fc4e1fud989d3ed5a1eef76@mail.gmail.com> <750496711578437DA29D9735C6B92BD2@VEGA>
In-Reply-To: <750496711578437DA29D9735C6B92BD2@VEGA>
Subject: RE: Lucene 3.0.0 writer with a Lucene 2.3.1 index
Date: Sat, 12 Dec 2009 10:43:54 -0000
Message-ID: <00d501ca7b18$023f12c0$06bd3840$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acp6kC6m4vW7v3RMS0+8QYSe7yMokQAARGHQACDB+IA=
Content-Language: en-gb
X-seseit-ltd-MailScanner: Found to be clean, Found to be clean
X-seseit-ltd-MailScanner-From: rstaveley@seseit.com
X-Old-Spam-Status: No, score=0.0 required=5.0 tests=none autolearn=failed 
	version=3.1.7-deb3, No

Thanks for picking up on this Anshum and Uwe.

I used the following approach to convert by 2.3 index (which yes, was
optimised already) to 3.0... 

   Using 3.0 Lucene, I created a new empty index with my IndexWriter. I
opened my 2.3 index with an IndexReader. I added the 2.3 index with
writer.addIndexes(reader) and then optimized and committed. I assume that
counts as 2 segments being optimized, despite the fact that my new segment
would have been empty. Of my 3 indexes I noticed a small growth in the index
which has no compressed fields and a very small shrink in the two indexes
which did have compressed fields.

So, it looks like it wasn't a no-op, but looks like I was compressing <1K
fields, as Uwe suspected. Typically these were synopsis fields with
3-sentence extracts from the texts being indexed. I hadn't realised that the
threshold was as high as 1K to pay dividends. I would have been better off
not compressing those fields.

It looks like I'll benefit from Lucene 3 stopping me from abusing
compression! 8-)

Many thanks!

-----Original Message-----
From: Uwe Schindler [mailto:uwe@thetaphi.de] 
Sent: 11 December 2009 18:43
To: java-user@lucene.apache.org
Subject: RE: Lucene 3.0.0 writer with a Lucene 2.3.1 index

The index *should* grow after merging/optimizing, but it will only do this,
if the fields you had compressed were not bigger then without compression.
One of the tests showed: A string field with 80 ascii chars needed
compressed about 250 bytes, which is 3 times (as chars are UTF-8 encoded)
the uncompressed size. So it was always a bad idea to compress only short
fields, compression for say fields<1024 chars is simply waste of time and
disk space.

So maybe you hit bthis issue: Some fields were so small that the compressed
representation were larger than uncompressed. And others the other way
round. This leads to o/o change.

By the way, if your index was already optimized in 2.3 and you try to
optimize it in 3.0, it will be a no-op, as optimization needs at least two
segments to merge.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Anshum [mailto:anshumg@gmail.com]
> Sent: Friday, December 11, 2009 7:31 PM
> To: java-user@lucene.apache.org
> Subject: Re: Lucene 3.0.0 writer with a Lucene 2.3.1 index
> 
> Hi Tom,
> Pt 3: As per my knowledge, it wouldn't be a 'mixture' of 2 index types.
> Rather, as soon as you optimize (or do a IndexWriter operation on the
> current index), it would expand the index to a non compressed format. I
> read
> it somewhere in the release notes that on doing so, a growth in the index
> size should be anticipated and handled.
> 
> --
> Anshum Gupta
> Naukri Labs!
> http://ai-cafe.blogspot.com
> 
> The facts expressed here belong to everybody, the opinions to me. The
> distinction is yours to draw............
> 
> 
> On Fri, Dec 11, 2009 at 10:50 PM, Rob Staveley (Tom)
> <rstaveley@seseit.com>wrote:
> 
> > I'm upgrading from 2.3.1 to 3.0.0. I have 3.0.0 index readers ready to
> go
> > into production and writers in the process of upgrading to 3.0.0.
> >
> > I think understand the implications of
> > http://wiki.apache.org/lucene-java/BackwardsCompatibility#File_Formats
> for
> > the upgrade, but I'd love it if someone could validate my following
> > assumptions.
> >
> >  1. My 2.3.1 indexes have compressed fields in them, which the 3.0.0
> > readers work nicely with, as expected. I should assume that my 3.0.0
> > readers
> > will continue to handle 2.3.1 indexes OK.
> >
> >  2. Presumably Lucene all future 3.x index readers will continue to
> handle
> > compressed fields and we should only anticipate Lucene 4.x choking on
> them.
> >
> > I was naively expecting my index directories to grow when my 3.0.0 index
> > writer merged the 2.3.1 indexes and/or optimize()'d them converting them
> to
> > 3.0.0. However, I don't see that. Presumably that means that....
> >
> >  3. Documents added to existing 2.3.1 indexes will be added conforming
> to
> > 3.0.0, but existing documents in the index will continue to have
> compressed
> > content and old documents can coexist happily with the new ones, and my
> > indexes will become a mixture of 2.3.1 and 3.0.0.
> >
> >  4. I should use
> >
> >
> http://lucene.apache.org/java/2_9_1/api/all/org/apache/lucene/util/Version
> .h
> > tml#LUCENE_23 for the StandardAnalyzer and QueryParser in mixed indexes
> in
> > 3.0.0 if I want to handle analysis consistently, or go for
> LUCENE_CURRENT
> > if
> > I want to handle the new content "better" (bearing in mind that the new
> > content will eventually replace the old content anyhow).
> >
> >  5. I should use
> >
> >
> http://lucene.apache.org/java/3_0_0/api/all/org/apache/lucene/analysis/Sto
> pF
> >
> >
> ilter.html#StopFilter%28boolean,%20org.apache.lucene.analysis.TokenStream,
> %2
> > 0java.util.Set%29 with enablePositionIncrements=false in mixed indexes
> in
> > 3.0.0 if I want to handle analysis consistently, or go for
> > enablePositionIncrements=true if I want to handle the new content
> "better"
> > (bearing in mind that the new content will eventually replace the old
> > content anyhow).
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 12 12:25:44 2009
Return-Path: <java-user-return-44056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91286 invoked from network); 12 Dec 2009 12:25:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Dec 2009 12:25:44 -0000
Received: (qmail 21819 invoked by uid 500); 12 Dec 2009 12:25:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21755 invoked by uid 500); 12 Dec 2009 12:25:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21745 invoked by uid 99); 12 Dec 2009 12:25:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Dec 2009 12:25:41 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.210.192 as permitted sender)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Dec 2009 12:25:37 +0000
Received: by yxe30 with SMTP id 30so1839315yxe.29
        for <java-user@lucene.apache.org>; Sat, 12 Dec 2009 04:25:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=VQvLCl0ahJ14S8bd40Wc6BfWEr6w27+PuvO0rKWDWEU=;
        b=SfrxPZJAGYb4l606fRG01EmEK2KCH0uy+a95mzNCD8atA6eS5gzIbvWXferMYyGqQK
         kwwyjwIcpISirCUZjYQOst0OsQFsur+OWOA4w0Df9pTQu5OsoHkk1olyILxKNVCCI7WM
         Y3PwbOqL87bFPZe8rhCZOOhmxnDlVEOK9kJuo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=NNAEgwzjdrHUX7KhR88lpnjGFiSXAYfoVcG1zc+kROqltdeTo7pcYJ05crUlOOY6Yx
         RSBvgcTPFAMlukG0g+tpA7N3V/+4HvJJKMoZ9RctA4i0icNNuPNrRBrkc+J0Ka3q24df
         eC3iqth0MReetoH+eG5o5LknTWakAL0Y60uuo=
MIME-Version: 1.0
Received: by 10.91.50.26 with SMTP id c26mr2758638agk.77.1260620716628; Sat, 
	12 Dec 2009 04:25:16 -0800 (PST)
Date: Sat, 12 Dec 2009 20:25:16 +0800
Message-ID: <7d94dcde0912120425ue632fc7s3d244765c57d2624@mail.gmail.com>
Subject: Index Update
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f87bae02db8d047a8722d3

--001485f87bae02db8d047a8722d3
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hi, all,
     I need to update my index everyday so as to keep pace with times.
Current I have two copy of indexes, one is used to provide search service,
the other is used to do updating. Once the updating process is done, I writ=
e
all the updated documents to the index which provide search service.

I want to use only one copy of index,  and do updating searching on the sam=
e
index? Does the updating process will effect the search result when the
updating process is running?

--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--001485f87bae02db8d047a8722d3--

From java-user-return-44057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 12 13:54:12 2009
Return-Path: <java-user-return-44057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21798 invoked from network); 12 Dec 2009 13:54:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Dec 2009 13:54:12 -0000
Received: (qmail 60252 invoked by uid 500); 12 Dec 2009 13:54:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60163 invoked by uid 500); 12 Dec 2009 13:54:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60153 invoked by uid 99); 12 Dec 2009 13:54:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Dec 2009 13:54:10 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.217.225 as permitted sender)
Received: from [209.85.217.225] (HELO mail-gx0-f225.google.com) (209.85.217.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Dec 2009 13:54:01 +0000
Received: by gxk25 with SMTP id 25so1931658gxk.5
        for <java-user@lucene.apache.org>; Sat, 12 Dec 2009 05:53:40 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=yw25RHY5xcSFlqvfFeQohZdrJct168f5auHzu3eWZR8=;
        b=T+uqC64Ru8IcXWdHoqaVWbpDLVRqxQdsFGm1+fMcDO+UtRqBV1D3LzFWcaxpg+DxoY
         U26LLkc6SHNVsomW850z5TNXqC9lulH1FWtTK9A+Jdagnji2ocwEAHW/JpR5wOcBRNpM
         snTwF7r9cV29eWohvyNeyvGkeTr9H3ez2WFdk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=MGrXDN/IavwQb6+4reRIaV6qckPuXJQNIb/D7ku72ptcwlCA+nx9nhQkSqnn9+RiqD
         ciCr/qBVDplcPBi0x+aEGoBUQPXpwJgRSzrw2RZKCDaoplH5IavLNFFmFmKXSCUzcDMj
         87Mz6nMxlzpRxXJ27j053PYyO/vL/BwKh9k5U=
MIME-Version: 1.0
Received: by 10.91.54.13 with SMTP id g13mr948420agk.119.1260626020083; Sat, 
	12 Dec 2009 05:53:40 -0800 (PST)
Date: Sat, 12 Dec 2009 21:53:40 +0800
Message-ID: <7d94dcde0912120553x62dbf417m16886c115e39415b@mail.gmail.com>
Subject: Tell me the difference
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f911fc1f277f047a885e3a
X-Virus-Checked: Checked by ClamAV on apache.org

--001485f911fc1f277f047a885e3a
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hi, all,
     Suppose I want to index this string NashQ/c++.test and i used the
following procedure to do the processing.
NormalizeCharMap RECOVERY_MAP =3D new NormalizeCharMap();
RECOVERY_MAP.add("c++","cplusplus$");
CharFilter filter =3D new LowercaseCharFilter(reader);//LowercaseCharFilter=
,
see the source code at the bottome
filter =3D new MappingCharFilter(RECOVERY_MAP,filter);
StandardTokenizer tokenStream =3D new StandardTokenizer(Version.LUCENE_30,
filter);
tokenStream.setMaxTokenLength(maxTokenLength);
TokenStream result =3D new StandardFilter(tokenStream);
//result =3D new LowerCaseFilter(result);
result =3D new StopFilter(enableStopPositionIncrements, result, stopSet);
result =3D new SnowballFilter(result, STEMMER);

When i search this index with keyword nashq, nothing is returned, but if I
uncomment resut=3Dnew LowerCaseFilter(result); it will works fine?

Does anybody here know what's going on? It seems my LowercaseCharFilter has
already done this job.

//code for LowercaseCharFilter
package analysis;

import java.io.IOException;
import java.io.Reader;

import org.apache.lucene.analysis.BaseCharFilter;
import org.apache.lucene.analysis.CharReader;
import org.apache.lucene.analysis.CharStream;


public class LowercaseCharFilter extends BaseCharFilter
{

    public LowercaseCharFilter(CharStream in)
    {
    super(in);
    }

    public LowercaseCharFilter(Reader in)
    {
    super(CharReader.get(in));
    }
    @Override
    public int read() throws IOException
    {
    return Character.toLowerCase(input.read());
    }
    @Override
    public int read(char[] cbuf, int off, int len) throws IOException {
    int ret =3D input.read(cbuf, off, len);
    if(ret!=3D-1)
    {
        for(int i=3Doff; i<off+ret; i++)
        cbuf[i] =3D Character.toLowerCase(cbuf[i]);
    }
    return ret;
    }
}

--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--001485f911fc1f277f047a885e3a--

From java-user-return-44058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 12 14:07:45 2009
Return-Path: <java-user-return-44058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26994 invoked from network); 12 Dec 2009 14:07:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Dec 2009 14:07:45 -0000
Received: (qmail 65820 invoked by uid 500); 12 Dec 2009 14:07:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65729 invoked by uid 500); 12 Dec 2009 14:07:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65719 invoked by uid 99); 12 Dec 2009 14:07:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Dec 2009 14:07:42 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Dec 2009 14:07:37 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 684EDD36004
	for <java-user@lucene.apache.org>; Sat, 12 Dec 2009 15:07:13 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Zh0CrzMFcl7M for <java-user@lucene.apache.org>;
	Sat, 12 Dec 2009 15:07:03 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 2B17FD36001
	for <java-user@lucene.apache.org>; Sat, 12 Dec 2009 15:07:03 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <7d94dcde0912120425ue632fc7s3d244765c57d2624@mail.gmail.com>
Subject: RE: Index Update
Date: Sat, 12 Dec 2009 15:07:02 +0100
Message-ID: <88FB1CAEBD7D49CE9B40D323CC816311@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-2022-jp"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <7d94dcde0912120425ue632fc7s3d244765c57d2624@mail.gmail.com>
Thread-index: Acp7JkKc8rB4dD+eQRe7yqLujPGJogADfJyw
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579

No. As long as you not commit or close the IndexWriter and reopen the
IndexReader on the search side, nothing happens on the search side.

Copying like you do is absolutely not needed.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Weiwei Wang [mailto:ww.wang.cs@gmail.com]
> Sent: Saturday, December 12, 2009 1:25 PM
> To: java-user@lucene.apache.org
> Subject: Index Update
> 
> Hi, all,
>      I need to update my index everyday so as to keep pace with times.
> Current I have two copy of indexes, one is used to provide search service,
> the other is used to do updating. Once the updating process is done, I
> write
> all the updated documents to the index which provide search service.
> 
> I want to use only one copy of index,  and do updating searching on the
> same
> index? Does the updating process will effect the search result when the
> updating process is running?
> 
> --
> Weiwei Wang
> Alex Wang
> $B2&V[V[(B
> Room 403, Mengmin Wei Building
> Computer Science Department
> Gulou Campus of Nanjing University
> Nanjing, P.R.China, 210093
> 
> Homepage: http://cs.nju.edu.cn/rl/weiweiwang


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 12 14:09:05 2009
Return-Path: <java-user-return-44059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27568 invoked from network); 12 Dec 2009 14:09:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Dec 2009 14:09:05 -0000
Received: (qmail 67817 invoked by uid 500); 12 Dec 2009 14:09:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67719 invoked by uid 500); 12 Dec 2009 14:09:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67708 invoked by uid 99); 12 Dec 2009 14:09:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Dec 2009 14:09:03 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.210.192 as permitted sender)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Dec 2009 14:08:53 +0000
Received: by yxe30 with SMTP id 30so1885675yxe.29
        for <java-user@lucene.apache.org>; Sat, 12 Dec 2009 06:08:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=hqZeINMBo0Puy+4TcSthkGTXXYTYb8pzxXbAvMHBw5Q=;
        b=NlHF8ujZXDNApKmZ5pmdh1HmkF+ff//BsFblugIT7SuNM6RKPNfk/czLnqUTxxTXAT
         a9u0UlMYjHMnE1VTBPmaFMXfvr1/TYFSdqCZMAaSHKBQh0oxb14mAVV/XPiDiCVHxOIJ
         keVpjkuEhdO+H114hT67q+kjeAEA9/vFGupKM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=lsFs5NOzTsfDi7hdlBWY9PnrLPImDaGEVDwCBB4lCPBENVYAYuguFdkwJerzChSR2V
         1EL6aMUQwoFEnfhb/3LjIN0IuD3vBrvS5COPdQC4bi89j9SGrkSdTxaHTE57RMdmKPT3
         hUxuzQz32c2iCmEQMDnhKiPG53V27hYn4vAgA=
MIME-Version: 1.0
Received: by 10.90.48.12 with SMTP id v12mr2828116agv.38.1260626909727; Sat, 
	12 Dec 2009 06:08:29 -0800 (PST)
In-Reply-To: <88FB1CAEBD7D49CE9B40D323CC816311@VEGA>
References: <7d94dcde0912120425ue632fc7s3d244765c57d2624@mail.gmail.com>
	 <88FB1CAEBD7D49CE9B40D323CC816311@VEGA>
Date: Sat, 12 Dec 2009 22:08:28 +0800
Message-ID: <7d94dcde0912120608x7bde51f3l97d0b9fafa6a5245@mail.gmail.com>
Subject: Re: Index Update
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636164b3326a9ba047a88939c
X-Virus-Checked: Checked by ClamAV on apache.org

--001636164b3326a9ba047a88939c
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Gotcha, tThanks, Uwe

2009/12/12 Uwe Schindler <uwe@thetaphi.de>

> No. As long as you not commit or close the IndexWriter and reopen the
> IndexReader on the search side, nothing happens on the search side.
>
> Copying like you do is absolutely not needed.
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
> > -----Original Message-----
> > From: Weiwei Wang [mailto:ww.wang.cs@gmail.com]
> > Sent: Saturday, December 12, 2009 1:25 PM
> > To: java-user@lucene.apache.org
> > Subject: Index Update
> >
> > Hi, all,
> >      I need to update my index everyday so as to keep pace with times.
> > Current I have two copy of indexes, one is used to provide search
> service,
> > the other is used to do updating. Once the updating process is done, I
> > write
> > all the updated documents to the index which provide search service.
> >
> > I want to use only one copy of index,  and do updating searching on the
> > same
> > index? Does the updating process will effect the search result when the
> > updating process is running?
> >
> > --
> > Weiwei Wang
> > Alex Wang
> > =E7=8E=8B=E5=B7=8D=E5=B7=8D
> > Room 403, Mengmin Wei Building
> > Computer Science Department
> > Gulou Campus of Nanjing University
> > Nanjing, P.R.China, 210093
> >
> > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--001636164b3326a9ba047a88939c--

From java-user-return-44060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 13 02:34:47 2009
Return-Path: <java-user-return-44060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70688 invoked from network); 13 Dec 2009 02:34:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Dec 2009 02:34:47 -0000
Received: (qmail 55724 invoked by uid 500); 13 Dec 2009 02:34:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55606 invoked by uid 500); 13 Dec 2009 02:34:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55568 invoked by uid 99); 13 Dec 2009 02:34:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Dec 2009 02:34:41 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.211.185 as permitted sender)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Dec 2009 02:34:32 +0000
Received: by ywh15 with SMTP id 15so2101962ywh.5
        for <java-user@lucene.apache.org>; Sat, 12 Dec 2009 18:34:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=mxkRZjnaEyBK3e2W9799uqjGwI3eWlTEw/6Sm6GMwKA=;
        b=ZreM52AuiaSgFrJ+xQM3Rik5Oni05kbiBWkNTlbrXaPgXYooLLlkRaX9GoxECGuZov
         /abGTycHfRI4xESNs0ItGuuY+hHU9SBZCv0ln28q5bDfeB8PzIlJGUVTWs32u9f4tA0x
         BKUV+fuL6UYqsheyBYnMgGEUeauZGEV4krEt0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=tiG2TKyaPEkivHm/ArT6tLRozNogeU+6Ccr3jS5R/ZMSoTfG/8bTxhzLT2MRVlyp/a
         xH+EZ+JapJoJwdpRotT8ARUJgx7fsVzgnZzINVtiw/J8QnIbgo94/Zx4V4/OQ3uYXtLq
         9sajc7dVdqPMO0Gx/KGWvyctp/AYtg37dAWNU=
MIME-Version: 1.0
Received: by 10.91.50.26 with SMTP id c26mr3265786agk.77.1260671650348; Sat, 
	12 Dec 2009 18:34:10 -0800 (PST)
In-Reply-To: <7d94dcde0912110543y63729d5eo14e6be2b992121b@mail.gmail.com>
References: <7d94dcde0912102130u214d4a87r18b97575e223b521@mail.gmail.com>
	 <867513fe0912110109i71d6491am10934c77190b2029@mail.gmail.com>
	 <4B223416.2060701@r.email.ne.jp>
	 <7d94dcde0912110543y63729d5eo14e6be2b992121b@mail.gmail.com>
Date: Sun, 13 Dec 2009 10:34:10 +0800
Message-ID: <7d94dcde0912121834l14d3b3acmff09dbcf5e7114d1@mail.gmail.com>
Subject: Re: Recover special terms from StandardTokenizer
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f87baee5c451047a92fd15
X-Virus-Checked: Checked by ClamAV on apache.org

--001485f87baee5c451047a92fd15
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Thanks, Koji, I followed your advice and change my analyzer as shown below:
NormalizeCharMap RECOVERY_MAP =3D new NormalizeCharMap();
RECOVERY_MAP.add("c++","cplusplus$");
CharFilter filter =3D new LowercaseCharFilter(reader);
filter =3D new MappingCharFilter(RECOVERY_MAP,filter);
StandardTokenizer tokenStream =3D new StandardTokenizer(Version.LUCENE_30,
filter);
tokenStream.setMaxTokenLength(maxTokenLength);
TokenStream result =3D new StandardFilter(tokenStream);
result =3D new LowerCaseFilter(result);
result =3D new StopFilter(enableStopPositionIncrements, result, stopSet);
result =3D new SnowballFilter(result, STEMMER);

I use the same analyzer in the search side. As you know, this analyzer can
token c++ as cplusplus, for this reason, it seems I can search c++ with the
same analyzer because it is also tokenized as cplusplus.

I tested it on as string c++c++, however, when i search c++ on the built
index, nothing is returned.

 I do not know what's wrong with my code. Waiting for your replay




On Fri, Dec 11, 2009 at 9:43 PM, Weiwei Wang <ww.wang.cs@gmail.com> wrote:

> Thanks, Koji
>
>
> On Fri, Dec 11, 2009 at 7:59 PM, Koji Sekiguchi <koji@r.email.ne.jp>wrote=
:
>
>> MappingCharFilter can be used to convert c++ to cplusplus.
>>
>> Koji
>>
>> --
>> http://www.rondhuit.com/en/
>>
>>
>>
>> Anshum wrote:
>>
>>> How about getting the original token stream and then converting c++ to
>>> cplusplus or anyother such transform. Or perhaps you might look at
>>> using/extending(in the non java sense) some other tokenized!
>>>
>>> --
>>> Anshum Gupta
>>> Naukri Labs!
>>> http://ai-cafe.blogspot.com
>>>
>>> The facts expressed here belong to everybody, the opinions to me. The
>>> distinction is yours to draw............
>>>
>>>
>>> On Fri, Dec 11, 2009 at 11:00 AM, Weiwei Wang <ww.wang.cs@gmail.com>
>>> wrote:
>>>
>>>
>>>
>>>> Hi, all,
>>>>    I designed a ftp search engine based on Lucene. I did a few
>>>> modifications to the StandardTokenizer.
>>>> My problem is:
>>>>  C++ is tokenized as c from StandardTokenizer and I want to recover it
>>>> from
>>>> the TokenStream from StandardTokenizer
>>>>
>>>> What should I do?
>>>>
>>>> --
>>>> Weiwei Wang
>>>> Alex Wang
>>>> =E7=8E=8B=E5=B7=8D=E5=B7=8D
>>>> Room 403, Mengmin Wei Building
>>>> Computer Science Department
>>>> Gulou Campus of Nanjing University
>>>> Nanjing, P.R.China, 210093
>>>>
>>>> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>>>>
>>>>
>>>>
>>>
>>>
>>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --
> Weiwei Wang
> Alex Wang
> =E7=8E=8B=E5=B7=8D=E5=B7=8D
> Room 403, Mengmin Wei Building
> Computer Science Department
> Gulou Campus of Nanjing University
> Nanjing, P.R.China, 210093
>
> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>



--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--001485f87baee5c451047a92fd15--

From java-user-return-44061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 13 03:13:13 2009
Return-Path: <java-user-return-44061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77717 invoked from network); 13 Dec 2009 03:13:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Dec 2009 03:13:13 -0000
Received: (qmail 73878 invoked by uid 500); 13 Dec 2009 03:13:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73771 invoked by uid 500); 13 Dec 2009 03:13:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73760 invoked by uid 99); 13 Dec 2009 03:13:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Dec 2009 03:13:10 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.210.192 as permitted sender)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Dec 2009 03:13:05 +0000
Received: by yxe30 with SMTP id 30so2249115yxe.29
        for <java-user@lucene.apache.org>; Sat, 12 Dec 2009 19:12:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=lEkeNzYZpKeFGzAEGRQ77D74QKMZR6r5PKcAh79MWGY=;
        b=AufuBfCYgqq39w1jvbCi/VtLEdhuIv0GG8YeL305D/c5va3fPlbfwqsPT+NlOhVJKp
         t9Gzom4S8Uk56SQOXPwFJtyQSi5n7lhLwebDfctI1V3CtV1ihNSALk2ALPpy63jr4ON6
         +6hTOkQK+Ud9TIxVvNNq0AhdV14VykE5TFecQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=hXHN+JHZRyUxb97fg9NKeHrDpkJ882YvEBpr2W2FyABmsFANWxpbb5q8bgzG9MwtsN
         e3gr9KsLqPXF+TvyadpKeMnXIeAraghMC4E9BK7PebHZ6yP5Rv0+ndpAM2U+tECtv6G4
         Pg+8OhukSFQs8HrraUsL2m7Q0mfTv57kSmlXE=
MIME-Version: 1.0
Received: by 10.91.51.28 with SMTP id d28mr3131084agk.120.1260673964140; Sat, 
	12 Dec 2009 19:12:44 -0800 (PST)
In-Reply-To: <7d94dcde0912121834l14d3b3acmff09dbcf5e7114d1@mail.gmail.com>
References: <7d94dcde0912102130u214d4a87r18b97575e223b521@mail.gmail.com>
	 <867513fe0912110109i71d6491am10934c77190b2029@mail.gmail.com>
	 <4B223416.2060701@r.email.ne.jp>
	 <7d94dcde0912110543y63729d5eo14e6be2b992121b@mail.gmail.com>
	 <7d94dcde0912121834l14d3b3acmff09dbcf5e7114d1@mail.gmail.com>
Date: Sun, 13 Dec 2009 11:12:44 +0800
Message-ID: <7d94dcde0912121912r4496b28cv261089aa1ba94f79@mail.gmail.com>
Subject: Re: Recover special terms from StandardTokenizer
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f64732cf6973047a9387f0

--001485f64732cf6973047a9387f0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

I use Luke to check the result and find only c exists as a term, no
cplusplus found in the index

On Sun, Dec 13, 2009 at 10:34 AM, Weiwei Wang <ww.wang.cs@gmail.com> wrote:

> Thanks, Koji, I followed your advice and change my analyzer as shown belo=
w:
> NormalizeCharMap RECOVERY_MAP =3D new NormalizeCharMap();
> RECOVERY_MAP.add("c++","cplusplus$");
> CharFilter filter =3D new LowercaseCharFilter(reader);
> filter =3D new MappingCharFilter(RECOVERY_MAP,filter);
> StandardTokenizer tokenStream =3D new StandardTokenizer(Version.LUCENE_30=
,
> filter);
> tokenStream.setMaxTokenLength(maxTokenLength);
> TokenStream result =3D new StandardFilter(tokenStream);
> result =3D new LowerCaseFilter(result);
> result =3D new StopFilter(enableStopPositionIncrements, result, stopSet);
> result =3D new SnowballFilter(result, STEMMER);
>
> I use the same analyzer in the search side. As you know, this analyzer ca=
n
> token c++ as cplusplus, for this reason, it seems I can search c++ with
> the same analyzer because it is also tokenized as cplusplus.
>
> I tested it on as string c++c++, however, when i search c++ on the built
> index, nothing is returned.
>
>  I do not know what's wrong with my code. Waiting for your replay
>
>
>
>
>
> On Fri, Dec 11, 2009 at 9:43 PM, Weiwei Wang <ww.wang.cs@gmail.com> wrote=
:
>
>> Thanks, Koji
>>
>>
>> On Fri, Dec 11, 2009 at 7:59 PM, Koji Sekiguchi <koji@r.email.ne.jp>wrot=
e:
>>
>>> MappingCharFilter can be used to convert c++ to cplusplus.
>>>
>>> Koji
>>>
>>> --
>>> http://www.rondhuit.com/en/
>>>
>>>
>>>
>>> Anshum wrote:
>>>
>>>> How about getting the original token stream and then converting c++ to
>>>> cplusplus or anyother such transform. Or perhaps you might look at
>>>> using/extending(in the non java sense) some other tokenized!
>>>>
>>>> --
>>>> Anshum Gupta
>>>> Naukri Labs!
>>>> http://ai-cafe.blogspot.com
>>>>
>>>> The facts expressed here belong to everybody, the opinions to me. The
>>>> distinction is yours to draw............
>>>>
>>>>
>>>> On Fri, Dec 11, 2009 at 11:00 AM, Weiwei Wang <ww.wang.cs@gmail.com>
>>>> wrote:
>>>>
>>>>
>>>>
>>>>> Hi, all,
>>>>>    I designed a ftp search engine based on Lucene. I did a few
>>>>> modifications to the StandardTokenizer.
>>>>> My problem is:
>>>>>  C++ is tokenized as c from StandardTokenizer and I want to recover i=
t
>>>>> from
>>>>> the TokenStream from StandardTokenizer
>>>>>
>>>>> What should I do?
>>>>>
>>>>> --
>>>>> Weiwei Wang
>>>>> Alex Wang
>>>>> =E7=8E=8B=E5=B7=8D=E5=B7=8D
>>>>> Room 403, Mengmin Wei Building
>>>>> Computer Science Department
>>>>> Gulou Campus of Nanjing University
>>>>> Nanjing, P.R.China, 210093
>>>>>
>>>>> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>>>>>
>>>>>
>>>>>
>>>>
>>>>
>>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>> --
>> Weiwei Wang
>> Alex Wang
>> =E7=8E=8B=E5=B7=8D=E5=B7=8D
>> Room 403, Mengmin Wei Building
>> Computer Science Department
>> Gulou Campus of Nanjing University
>> Nanjing, P.R.China, 210093
>>
>> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>>
>
>
>
> --
> Weiwei Wang
> Alex Wang
> =E7=8E=8B=E5=B7=8D=E5=B7=8D
> Room 403, Mengmin Wei Building
> Computer Science Department
> Gulou Campus of Nanjing University
> Nanjing, P.R.China, 210093
>
> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>



--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--001485f64732cf6973047a9387f0--

From java-user-return-44062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 13 03:19:18 2009
Return-Path: <java-user-return-44062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78130 invoked from network); 13 Dec 2009 03:19:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Dec 2009 03:19:18 -0000
Received: (qmail 75904 invoked by uid 500); 13 Dec 2009 03:19:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75741 invoked by uid 500); 13 Dec 2009 03:19:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75731 invoked by uid 99); 13 Dec 2009 03:19:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Dec 2009 03:19:15 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.219.225 as permitted sender)
Received: from [209.85.219.225] (HELO mail-ew0-f225.google.com) (209.85.219.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Dec 2009 03:19:11 +0000
Received: by ewy25 with SMTP id 25so2117748ewy.5
        for <java-user@lucene.apache.org>; Sat, 12 Dec 2009 19:18:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=OE+oPOIUtZYrTqJUP0F0AborOt3a9/MPNC81BewTG+Y=;
        b=pnu8BsLbQC9mClmz3Lr8AFD5eK/7rk4p3JOWg9ZbzkiRuxFII9UAOAH19nIxUtQseL
         vo/oPR2ZjGyC9wqiwwauBbNhQXK60h2WW+HNKLZDuMObDEyWvjzs5ijnsB1FKxQNBydQ
         AVcyvbD5VY6mIxjJrFKGTe0BBAizYSavoAi64=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=sE+oXrY+/oK8lko4KWXC+XfnefnsgAoFaaEM74iAM4vQo8psJWtfDHmf2du0aOtcEv
         /BISjuFfOxXRjGaWqSRIj8BqeXTQXyVi/CsQtzlm/YKwrKudKsXcMKHmgFYalp0rTii+
         idiC0HdThmdDpOEEaumyPwFBYiIJ9c0sD/sng=
MIME-Version: 1.0
Received: by 10.216.90.209 with SMTP id e59mr1258949wef.193.1260674329886; 
	Sat, 12 Dec 2009 19:18:49 -0800 (PST)
In-Reply-To: <7d94dcde0912120608x7bde51f3l97d0b9fafa6a5245@mail.gmail.com>
References: <7d94dcde0912120425ue632fc7s3d244765c57d2624@mail.gmail.com>
	 <88FB1CAEBD7D49CE9B40D323CC816311@VEGA>
	 <7d94dcde0912120608x7bde51f3l97d0b9fafa6a5245@mail.gmail.com>
Date: Sat, 12 Dec 2009 22:18:49 -0500
Message-ID: <359a92830912121918j5e7c4a9cs87be4f60465dbb33@mail.gmail.com>
Subject: Re: Index Update
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d7e3639c4201047a939d94

--0016e6d7e3639c4201047a939d94
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Quick addition. Even if you commit/close your indexwriter, you
*still* won't see the changes in your search unless you repoen the
indexreader. But you have to do both (in the order above) to
see all the changes you've added via your indexwriter.....

but there's no reason to hold off on committing changes in
your indexwriter for a long time and risk losing the changes
should your program abort.....

HTH
Erick

On Sat, Dec 12, 2009 at 9:08 AM, Weiwei Wang <ww.wang.cs@gmail.com> wrote:

> Gotcha, tThanks, Uwe
>
> 2009/12/12 Uwe Schindler <uwe@thetaphi.de>
>
> > No. As long as you not commit or close the IndexWriter and reopen the
> > IndexReader on the search side, nothing happens on the search side.
> >
> > Copying like you do is absolutely not needed.
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> > > -----Original Message-----
> > > From: Weiwei Wang [mailto:ww.wang.cs@gmail.com]
> > > Sent: Saturday, December 12, 2009 1:25 PM
> > > To: java-user@lucene.apache.org
> > > Subject: Index Update
> > >
> > > Hi, all,
> > >      I need to update my index everyday so as to keep pace with times=
.
> > > Current I have two copy of indexes, one is used to provide search
> > service,
> > > the other is used to do updating. Once the updating process is done, =
I
> > > write
> > > all the updated documents to the index which provide search service.
> > >
> > > I want to use only one copy of index,  and do updating searching on t=
he
> > > same
> > > index? Does the updating process will effect the search result when t=
he
> > > updating process is running?
> > >
> > > --
> > > Weiwei Wang
> > > Alex Wang
> > > =E7=8E=8B=E5=B7=8D=E5=B7=8D
> > > Room 403, Mengmin Wei Building
> > > Computer Science Department
> > > Gulou Campus of Nanjing University
> > > Nanjing, P.R.China, 210093
> > >
> > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> Weiwei Wang
> Alex Wang
> =E7=8E=8B=E5=B7=8D=E5=B7=8D
> Room 403, Mengmin Wei Building
> Computer Science Department
> Gulou Campus of Nanjing University
> Nanjing, P.R.China, 210093
>
> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>

--0016e6d7e3639c4201047a939d94--

From java-user-return-44063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 13 03:24:57 2009
Return-Path: <java-user-return-44063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78680 invoked from network); 13 Dec 2009 03:24:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Dec 2009 03:24:57 -0000
Received: (qmail 80850 invoked by uid 500); 13 Dec 2009 03:24:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80734 invoked by uid 500); 13 Dec 2009 03:24:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80724 invoked by uid 99); 13 Dec 2009 03:24:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Dec 2009 03:24:51 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.210.192 as permitted sender)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Dec 2009 03:24:47 +0000
Received: by yxe30 with SMTP id 30so2253555yxe.29
        for <java-user@lucene.apache.org>; Sat, 12 Dec 2009 19:24:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=eDwdVWWWDdtWU7zoQq6OKfRP7086Ek0oyPNtPp6gJsk=;
        b=mAw9HVGB4Eg+MrPdr4YHWnq6eLbsnjZghyV3vq1OUCP6lViHli4fUkGeqRlR3uqOBe
         6VaNgqObP9zj2MFljHNmrKrmvoZx2pyenLFLAOeBwzWRqWVizW4sX9W3paDb/ejv+k9X
         hFm+7AwZQNry/vdVj0tk1g/wcIlkbXoy4ufRg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=pApzb76ParUeUuWigUd0g2hcrACp3ZwS5H+82l3HNUC4K2exhrVlzwE3bEMY5YUj3I
         8hKoBJ+QXlcK6On06Vuix7UaQ6TNWDEmG/l9sEOtq5KTvc9cCs1uEMdJpSc017cSx7I3
         rebkLn9sNeRIvcYBds5UQai1BkYk9wWaOVmUw=
MIME-Version: 1.0
Received: by 10.91.161.26 with SMTP id n26mr529975ago.88.1260674664287; Sat, 
	12 Dec 2009 19:24:24 -0800 (PST)
In-Reply-To: <359a92830912121918j5e7c4a9cs87be4f60465dbb33@mail.gmail.com>
References: <7d94dcde0912120425ue632fc7s3d244765c57d2624@mail.gmail.com>
	 <88FB1CAEBD7D49CE9B40D323CC816311@VEGA>
	 <7d94dcde0912120608x7bde51f3l97d0b9fafa6a5245@mail.gmail.com>
	 <359a92830912121918j5e7c4a9cs87be4f60465dbb33@mail.gmail.com>
Date: Sun, 13 Dec 2009 11:24:24 +0800
Message-ID: <7d94dcde0912121924m4653c03bwe5222f0c7b36f49d@mail.gmail.com>
Subject: Re: Index Update
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f9a8108ad08a047a93b13b

--001485f9a8108ad08a047a93b13b
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

What I'm doing now is to indexing all file paths in a bunch of ftp servers.

For ftp server administrator, he can add, delete or rename the files. So as
to keep pace with times, i need to do updating very often.

the process should be:
1. delete the old documents
2. add the new crawled ones
3. if error happend in process 2, rollback is performed
4. finish

I used two indexed mainly to do rollback, otherwise the logic may be
confused and not very clear.


Currently, i'm thinking how to do this job with only one copy of index.


On Sun, Dec 13, 2009 at 11:18 AM, Erick Erickson <erickerickson@gmail.com>w=
rote:

> Quick addition. Even if you commit/close your indexwriter, you
> *still* won't see the changes in your search unless you repoen the
> indexreader. But you have to do both (in the order above) to
> see all the changes you've added via your indexwriter.....
>
> but there's no reason to hold off on committing changes in
> your indexwriter for a long time and risk losing the changes
> should your program abort.....
>
> HTH
> Erick
>
> On Sat, Dec 12, 2009 at 9:08 AM, Weiwei Wang <ww.wang.cs@gmail.com> wrote=
:
>
> > Gotcha, tThanks, Uwe
> >
> > 2009/12/12 Uwe Schindler <uwe@thetaphi.de>
> >
> > > No. As long as you not commit or close the IndexWriter and reopen the
> > > IndexReader on the search side, nothing happens on the search side.
> > >
> > > Copying like you do is absolutely not needed.
> > >
> > > -----
> > > Uwe Schindler
> > > H.-H.-Meier-Allee 63, D-28213 Bremen
> > > http://www.thetaphi.de
> > > eMail: uwe@thetaphi.de
> > >
> > > > -----Original Message-----
> > > > From: Weiwei Wang [mailto:ww.wang.cs@gmail.com]
> > > > Sent: Saturday, December 12, 2009 1:25 PM
> > > > To: java-user@lucene.apache.org
> > > > Subject: Index Update
> > > >
> > > > Hi, all,
> > > >      I need to update my index everyday so as to keep pace with
> times.
> > > > Current I have two copy of indexes, one is used to provide search
> > > service,
> > > > the other is used to do updating. Once the updating process is done=
,
> I
> > > > write
> > > > all the updated documents to the index which provide search service=
.
> > > >
> > > > I want to use only one copy of index,  and do updating searching on
> the
> > > > same
> > > > index? Does the updating process will effect the search result when
> the
> > > > updating process is running?
> > > >
> > > > --
> > > > Weiwei Wang
> > > > Alex Wang
> > > > =E7=8E=8B=E5=B7=8D=E5=B7=8D
> > > > Room 403, Mengmin Wei Building
> > > > Computer Science Department
> > > > Gulou Campus of Nanjing University
> > > > Nanjing, P.R.China, 210093
> > > >
> > > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > --
> > Weiwei Wang
> > Alex Wang
> > =E7=8E=8B=E5=B7=8D=E5=B7=8D
> > Room 403, Mengmin Wei Building
> > Computer Science Department
> > Gulou Campus of Nanjing University
> > Nanjing, P.R.China, 210093
> >
> > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> >
>



--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--001485f9a8108ad08a047a93b13b--

From java-user-return-44064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 13 10:43:11 2009
Return-Path: <java-user-return-44064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76252 invoked from network); 13 Dec 2009 10:43:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Dec 2009 10:43:11 -0000
Received: (qmail 99184 invoked by uid 500); 13 Dec 2009 10:43:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99113 invoked by uid 500); 13 Dec 2009 10:43:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99103 invoked by uid 99); 13 Dec 2009 10:43:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Dec 2009 10:43:07 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.211.185 as permitted sender)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Dec 2009 10:42:57 +0000
Received: by ywh15 with SMTP id 15so2232343ywh.5
        for <java-user@lucene.apache.org>; Sun, 13 Dec 2009 02:42:36 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=7VlKo2W5NQuES1TVZ6YIysAnYyRoQhHiIrl/gmrY72U=;
        b=L7ABrsKN2LUCRYGU8PP7cqI2R50vQPQ/Q979Y8hINO3zIX8jweuXFnySlzHy4YV04n
         /Wi87V06n+njzAndQYYjoJ4Go92F+0dLNiFMpepKKgNvbQ4zWyYNXn//tqoENkwr/OvN
         rots39BW7uNl267F+q19ujb0tbCM9huqb4xbs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=RvAQns54ZhHNQjrNMckK2ARA5Hc1iVfTY3VNEOcKUwsG4dgsOWZdgpRJ/lRRC3ACUY
         6hmp4xP4rBgWsWZIEVA3pKPV2l33fT/7BIdXVHLZ1N02PbktYXjo3QrKN9LGaUxr0xcb
         swnWNhuCiAz/ypbNmWQGbiL8wDDS1JhsP5Di8=
MIME-Version: 1.0
Received: by 10.90.24.26 with SMTP id 26mr3581480agx.37.1260700956305; Sun, 13 
	Dec 2009 02:42:36 -0800 (PST)
In-Reply-To: <7d94dcde0912121912r4496b28cv261089aa1ba94f79@mail.gmail.com>
References: <7d94dcde0912102130u214d4a87r18b97575e223b521@mail.gmail.com>
	 <867513fe0912110109i71d6491am10934c77190b2029@mail.gmail.com>
	 <4B223416.2060701@r.email.ne.jp>
	 <7d94dcde0912110543y63729d5eo14e6be2b992121b@mail.gmail.com>
	 <7d94dcde0912121834l14d3b3acmff09dbcf5e7114d1@mail.gmail.com>
	 <7d94dcde0912121912r4496b28cv261089aa1ba94f79@mail.gmail.com>
Date: Sun, 13 Dec 2009 18:42:36 +0800
Message-ID: <7d94dcde0912130242q38a50c5frcf8b0124fcaf4a91@mail.gmail.com>
Subject: Re: Recover special terms from StandardTokenizer
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016361648edab2c43047a99d074
X-Virus-Checked: Checked by ClamAV on apache.org

--0016361648edab2c43047a99d074
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Problem solved. Now another problem comes.


As I want to use Highlighter in my system, the token offset is incorrect
after the MappingCharFilter is used.

Koji, do you known how to fix the offset problem?

On Sun, Dec 13, 2009 at 11:12 AM, Weiwei Wang <ww.wang.cs@gmail.com> wrote:

> I use Luke to check the result and find only c exists as a term, no
> cplusplus found in the index
>
>
> On Sun, Dec 13, 2009 at 10:34 AM, Weiwei Wang <ww.wang.cs@gmail.com>wrote=
:
>
>> Thanks, Koji, I followed your advice and change my analyzer as shown
>> below:
>> NormalizeCharMap RECOVERY_MAP =3D new NormalizeCharMap();
>> RECOVERY_MAP.add("c++","cplusplus$");
>> CharFilter filter =3D new LowercaseCharFilter(reader);
>> filter =3D new MappingCharFilter(RECOVERY_MAP,filter);
>> StandardTokenizer tokenStream =3D new StandardTokenizer(Version.LUCENE_3=
0,
>> filter);
>> tokenStream.setMaxTokenLength(maxTokenLength);
>> TokenStream result =3D new StandardFilter(tokenStream);
>> result =3D new LowerCaseFilter(result);
>> result =3D new StopFilter(enableStopPositionIncrements, result, stopSet)=
;
>> result =3D new SnowballFilter(result, STEMMER);
>>
>> I use the same analyzer in the search side. As you know, this analyzer c=
an
>> token c++ as cplusplus, for this reason, it seems I can search c++ with
>> the same analyzer because it is also tokenized as cplusplus.
>>
>> I tested it on as string c++c++, however, when i search c++ on the built
>> index, nothing is returned.
>>
>>  I do not know what's wrong with my code. Waiting for your replay
>>
>>
>>
>>
>>
>> On Fri, Dec 11, 2009 at 9:43 PM, Weiwei Wang <ww.wang.cs@gmail.com>wrote=
:
>>
>>> Thanks, Koji
>>>
>>>
>>> On Fri, Dec 11, 2009 at 7:59 PM, Koji Sekiguchi <koji@r.email.ne.jp>wro=
te:
>>>
>>>> MappingCharFilter can be used to convert c++ to cplusplus.
>>>>
>>>> Koji
>>>>
>>>> --
>>>> http://www.rondhuit.com/en/
>>>>
>>>>
>>>>
>>>> Anshum wrote:
>>>>
>>>>> How about getting the original token stream and then converting c++ t=
o
>>>>> cplusplus or anyother such transform. Or perhaps you might look at
>>>>> using/extending(in the non java sense) some other tokenized!
>>>>>
>>>>> --
>>>>> Anshum Gupta
>>>>> Naukri Labs!
>>>>> http://ai-cafe.blogspot.com
>>>>>
>>>>> The facts expressed here belong to everybody, the opinions to me. The
>>>>> distinction is yours to draw............
>>>>>
>>>>>
>>>>> On Fri, Dec 11, 2009 at 11:00 AM, Weiwei Wang <ww.wang.cs@gmail.com>
>>>>> wrote:
>>>>>
>>>>>
>>>>>
>>>>>> Hi, all,
>>>>>>    I designed a ftp search engine based on Lucene. I did a few
>>>>>> modifications to the StandardTokenizer.
>>>>>> My problem is:
>>>>>>  C++ is tokenized as c from StandardTokenizer and I want to recover =
it
>>>>>> from
>>>>>> the TokenStream from StandardTokenizer
>>>>>>
>>>>>> What should I do?
>>>>>>
>>>>>> --
>>>>>> Weiwei Wang
>>>>>> Alex Wang
>>>>>> =E7=8E=8B=E5=B7=8D=E5=B7=8D
>>>>>> Room 403, Mengmin Wei Building
>>>>>> Computer Science Department
>>>>>> Gulou Campus of Nanjing University
>>>>>> Nanjing, P.R.China, 210093
>>>>>>
>>>>>> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>>
>>>>>
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>>
>>> --
>>> Weiwei Wang
>>> Alex Wang
>>> =E7=8E=8B=E5=B7=8D=E5=B7=8D
>>> Room 403, Mengmin Wei Building
>>> Computer Science Department
>>> Gulou Campus of Nanjing University
>>> Nanjing, P.R.China, 210093
>>>
>>> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>>>
>>
>>
>>
>> --
>> Weiwei Wang
>> Alex Wang
>> =E7=8E=8B=E5=B7=8D=E5=B7=8D
>> Room 403, Mengmin Wei Building
>> Computer Science Department
>> Gulou Campus of Nanjing University
>> Nanjing, P.R.China, 210093
>>
>> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>>
>
>
>
> --
> Weiwei Wang
> Alex Wang
> =E7=8E=8B=E5=B7=8D=E5=B7=8D
> Room 403, Mengmin Wei Building
> Computer Science Department
> Gulou Campus of Nanjing University
> Nanjing, P.R.China, 210093
>
> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>



--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--0016361648edab2c43047a99d074--

From java-user-return-44065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 13 10:47:30 2009
Return-Path: <java-user-return-44065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77105 invoked from network); 13 Dec 2009 10:47:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Dec 2009 10:47:29 -0000
Received: (qmail 4188 invoked by uid 500); 13 Dec 2009 10:47:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4104 invoked by uid 500); 13 Dec 2009 10:47:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4094 invoked by uid 99); 13 Dec 2009 10:47:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Dec 2009 10:47:27 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Dec 2009 10:47:17 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id F1CA6D36005
	for <java-user@lucene.apache.org>; Sun, 13 Dec 2009 11:46:56 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 2QnDavVyb2C2 for <java-user@lucene.apache.org>;
	Sun, 13 Dec 2009 11:46:46 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 5A361D36004
	for <java-user@lucene.apache.org>; Sun, 13 Dec 2009 11:46:46 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <7d94dcde0912102130u214d4a87r18b97575e223b521@mail.gmail.com> <867513fe0912110109i71d6491am10934c77190b2029@mail.gmail.com> <4B223416.2060701@r.email.ne.jp> <7d94dcde0912110543y63729d5eo14e6be2b992121b@mail.gmail.com> <7d94dcde0912121834l14d3b3acmff09dbcf5e7114d1@mail.gmail.com> <7d94dcde0912121912r4496b28cv261089aa1ba94f79@mail.gmail.com> <7d94dcde0912130242q38a50c5frcf8b0124fcaf4a91@mail.gmail.com>
Subject: RE: Recover special terms from StandardTokenizer
Date: Sun, 13 Dec 2009 11:46:46 +0100
Message-ID: <8321DA8EE5DF498A838FC1696CB5E359@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-2022-jp"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <7d94dcde0912130242q38a50c5frcf8b0124fcaf4a91@mail.gmail.com>
Thread-Index: Acp74Rq+OwqRksEoTSueuFBTiReTEQAAC/eA
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

MappingCharFilter preserves the offsets in the stream *before* filtering. So
if you store the original string (without c++ replaced) in a stored field
you can highlight using the given offstes. The highlighter must use again
the same analyzer or use FastVectorHighlighter.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Weiwei Wang [mailto:ww.wang.cs@gmail.com]
> Sent: Sunday, December 13, 2009 11:43 AM
> To: java-user@lucene.apache.org
> Subject: Re: Recover special terms from StandardTokenizer
> 
> Problem solved. Now another problem comes.
> 
> 
> As I want to use Highlighter in my system, the token offset is incorrect
> after the MappingCharFilter is used.
> 
> Koji, do you known how to fix the offset problem?
> 
> On Sun, Dec 13, 2009 at 11:12 AM, Weiwei Wang <ww.wang.cs@gmail.com>
> wrote:
> 
> > I use Luke to check the result and find only c exists as a term, no
> > cplusplus found in the index
> >
> >
> > On Sun, Dec 13, 2009 at 10:34 AM, Weiwei Wang
> <ww.wang.cs@gmail.com>wrote:
> >
> >> Thanks, Koji, I followed your advice and change my analyzer as shown
> >> below:
> >> NormalizeCharMap RECOVERY_MAP = new NormalizeCharMap();
> >> RECOVERY_MAP.add("c++","cplusplus$");
> >> CharFilter filter = new LowercaseCharFilter(reader);
> >> filter = new MappingCharFilter(RECOVERY_MAP,filter);
> >> StandardTokenizer tokenStream = new
> StandardTokenizer(Version.LUCENE_30,
> >> filter);
> >> tokenStream.setMaxTokenLength(maxTokenLength);
> >> TokenStream result = new StandardFilter(tokenStream);
> >> result = new LowerCaseFilter(result);
> >> result = new StopFilter(enableStopPositionIncrements, result, stopSet);
> >> result = new SnowballFilter(result, STEMMER);
> >>
> >> I use the same analyzer in the search side. As you know, this analyzer
> can
> >> token c++ as cplusplus, for this reason, it seems I can search c++ with
> >> the same analyzer because it is also tokenized as cplusplus.
> >>
> >> I tested it on as string c++c++, however, when i search c++ on the
> built
> >> index, nothing is returned.
> >>
> >>  I do not know what's wrong with my code. Waiting for your replay
> >>
> >>
> >>
> >>
> >>
> >> On Fri, Dec 11, 2009 at 9:43 PM, Weiwei Wang
> <ww.wang.cs@gmail.com>wrote:
> >>
> >>> Thanks, Koji
> >>>
> >>>
> >>> On Fri, Dec 11, 2009 at 7:59 PM, Koji Sekiguchi
> <koji@r.email.ne.jp>wrote:
> >>>
> >>>> MappingCharFilter can be used to convert c++ to cplusplus.
> >>>>
> >>>> Koji
> >>>>
> >>>> --
> >>>> http://www.rondhuit.com/en/
> >>>>
> >>>>
> >>>>
> >>>> Anshum wrote:
> >>>>
> >>>>> How about getting the original token stream and then converting c++
> to
> >>>>> cplusplus or anyother such transform. Or perhaps you might look at
> >>>>> using/extending(in the non java sense) some other tokenized!
> >>>>>
> >>>>> --
> >>>>> Anshum Gupta
> >>>>> Naukri Labs!
> >>>>> http://ai-cafe.blogspot.com
> >>>>>
> >>>>> The facts expressed here belong to everybody, the opinions to me.
> The
> >>>>> distinction is yours to draw............
> >>>>>
> >>>>>
> >>>>> On Fri, Dec 11, 2009 at 11:00 AM, Weiwei Wang <ww.wang.cs@gmail.com>
> >>>>> wrote:
> >>>>>
> >>>>>
> >>>>>
> >>>>>> Hi, all,
> >>>>>>    I designed a ftp search engine based on Lucene. I did a few
> >>>>>> modifications to the StandardTokenizer.
> >>>>>> My problem is:
> >>>>>>  C++ is tokenized as c from StandardTokenizer and I want to recover
> it
> >>>>>> from
> >>>>>> the TokenStream from StandardTokenizer
> >>>>>>
> >>>>>> What should I do?
> >>>>>>
> >>>>>> --
> >>>>>> Weiwei Wang
> >>>>>> Alex Wang
> >>>>>> $B2&V[V[(B
> >>>>>> Room 403, Mengmin Wei Building
> >>>>>> Computer Science Department
> >>>>>> Gulou Campus of Nanjing University
> >>>>>> Nanjing, P.R.China, 210093
> >>>>>>
> >>>>>> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>
> >>>>
> >>>>
> >>>> ---------------------------------------------------------------------
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>>
> >>>
> >>> --
> >>> Weiwei Wang
> >>> Alex Wang
> >>> $B2&V[V[(B
> >>> Room 403, Mengmin Wei Building
> >>> Computer Science Department
> >>> Gulou Campus of Nanjing University
> >>> Nanjing, P.R.China, 210093
> >>>
> >>> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> >>>
> >>
> >>
> >>
> >> --
> >> Weiwei Wang
> >> Alex Wang
> >> $B2&V[V[(B
> >> Room 403, Mengmin Wei Building
> >> Computer Science Department
> >> Gulou Campus of Nanjing University
> >> Nanjing, P.R.China, 210093
> >>
> >> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> >>
> >
> >
> >
> > --
> > Weiwei Wang
> > Alex Wang
> > $B2&V[V[(B
> > Room 403, Mengmin Wei Building
> > Computer Science Department
> > Gulou Campus of Nanjing University
> > Nanjing, P.R.China, 210093
> >
> > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> >
> 
> 
> 
> --
> Weiwei Wang
> Alex Wang
> $B2&V[V[(B
> Room 403, Mengmin Wei Building
> Computer Science Department
> Gulou Campus of Nanjing University
> Nanjing, P.R.China, 210093
> 
> Homepage: http://cs.nju.edu.cn/rl/weiweiwang


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 13 11:23:07 2009
Return-Path: <java-user-return-44066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82541 invoked from network); 13 Dec 2009 11:23:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Dec 2009 11:23:07 -0000
Received: (qmail 17510 invoked by uid 500); 13 Dec 2009 11:23:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17431 invoked by uid 500); 13 Dec 2009 11:23:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17421 invoked by uid 99); 13 Dec 2009 11:23:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Dec 2009 11:23:05 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.211.185 as permitted sender)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Dec 2009 11:22:54 +0000
Received: by ywh15 with SMTP id 15so2242434ywh.5
        for <java-user@lucene.apache.org>; Sun, 13 Dec 2009 03:22:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=igD2OhcGWB6WtbyXluwPrjm2y3MJSvGJyC0/sJ0AYu0=;
        b=k3hqjXv65zKedrTbADkrB9QnvSjPVwyXpnco61G8oHTkMxMpsDdgjpCB/lEGiIEPDz
         21Eub5WM0P7ugEftBjkACifQ0LClzswt4W585pgwW/319by3EqYENIkZ1Tyz/hAKJCTD
         b6Qcfj6Sn/z6OLqpix5xZ1I47v6/dNRbc3TfI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=qCfc1c5ihu6FeVKNzQGdQ1mNlNY5zVJ4iupBTsdgF1H6ZuRuV+L5V726vLUmT2mP5C
         0i3zOA2/vfPgszoZfn62UGY6q6Bm8Y05lmYZjPbgkRflOredvN5w+ErNNkaljlrElc3d
         qgT+T/+XXEhxEUEMJkdIHUbvI+LAwRuB+OByY=
MIME-Version: 1.0
Received: by 10.91.51.28 with SMTP id d28mr3381750agk.120.1260703352390; Sun, 
	13 Dec 2009 03:22:32 -0800 (PST)
In-Reply-To: <8321DA8EE5DF498A838FC1696CB5E359@VEGA>
References: <7d94dcde0912102130u214d4a87r18b97575e223b521@mail.gmail.com>
	 <867513fe0912110109i71d6491am10934c77190b2029@mail.gmail.com>
	 <4B223416.2060701@r.email.ne.jp>
	 <7d94dcde0912110543y63729d5eo14e6be2b992121b@mail.gmail.com>
	 <7d94dcde0912121834l14d3b3acmff09dbcf5e7114d1@mail.gmail.com>
	 <7d94dcde0912121912r4496b28cv261089aa1ba94f79@mail.gmail.com>
	 <7d94dcde0912130242q38a50c5frcf8b0124fcaf4a91@mail.gmail.com>
	 <8321DA8EE5DF498A838FC1696CB5E359@VEGA>
Date: Sun, 13 Dec 2009 19:22:32 +0800
Message-ID: <7d94dcde0912130322l73284a1ay3b8345c3eefdf10f@mail.gmail.com>
Subject: Re: Recover special terms from StandardTokenizer
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f647327c984a047a9a5fa0
X-Virus-Checked: Checked by ClamAV on apache.org

--001485f647327c984a047a9a5fa0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

thanks, Uwe.
Maybe i was not very clear. My situation is like this:
Analyzer:
   NormalizeCharMap RECOVERY_MAP =3D new NormalizeCharMap();
   RECOVERY_MAP.add("c++","cplusplus$");
    CharFilter filter =3D new LowercaseCharFilter(reader);
    filter =3D new RosaMappingCharFilter(RECOVERY_MAP,filter);
    StandardTokenizer tokenStream =3D new StandardTokenizer(Version.LUCENE_=
30,
filter);
    tokenStream.setMaxTokenLength(maxTokenLength);
    TokenStream result =3D new StandardFilter(tokenStream);
    result =3D getStopFilter(result);
    result =3D new SnowballFilter(result, STEMMER);
Analyze c++c++, return
(0,9)  [cplusplus]
(10,19)  [cplusplus]
the two numbers in th**e brackets are offsets.

So in the searching process when i want to hight the search keyword c++ wit=
h
the same analyzer, exception will be thrown because the string i stored are
c++c++ not cpluspluscplusplus(actually, i should not change the original
string when storing them, otherwise it will confuse the users).

I hope the analyzer can give result like this
(0,3) [cplusplus]
(3,6) [cplusplus]
then the Hilighter will works fine.

So how can I achieve this result?

2009/12/13 Uwe Schindler <uwe@thetaphi.de>

> MappingCharFilter preserves the offsets in the stream *before* filtering.
> So
> if you store the original string (without c++ replaced) in a stored field
> you can highlight using the given offstes. The highlighter must use again
> the same analyzer or use FastVectorHighlighter.
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
> > -----Original Message-----
> > From: Weiwei Wang [mailto:ww.wang.cs@gmail.com]
> > Sent: Sunday, December 13, 2009 11:43 AM
> > To: java-user@lucene.apache.org
> > Subject: Re: Recover special terms from StandardTokenizer
> >
> > Problem solved. Now another problem comes.
> >
> >
> > As I want to use Highlighter in my system, the token offset is incorrec=
t
> > after the MappingCharFilter is used.
> >
> > Koji, do you known how to fix the offset problem?
> >
> > On Sun, Dec 13, 2009 at 11:12 AM, Weiwei Wang <ww.wang.cs@gmail.com>
> > wrote:
> >
> > > I use Luke to check the result and find only c exists as a term, no
> > > cplusplus found in the index
> > >
> > >
> > > On Sun, Dec 13, 2009 at 10:34 AM, Weiwei Wang
> > <ww.wang.cs@gmail.com>wrote:
> > >
> > >> Thanks, Koji, I followed your advice and change my analyzer as shown
> > >> below:
> > >> NormalizeCharMap RECOVERY_MAP =3D new NormalizeCharMap();
> > >> RECOVERY_MAP.add("c++","cplusplus$");
> > >> CharFilter filter =3D new LowercaseCharFilter(reader);
> > >> filter =3D new MappingCharFilter(RECOVERY_MAP,filter);
> > >> StandardTokenizer tokenStream =3D new
> > StandardTokenizer(Version.LUCENE_30,
> > >> filter);
> > >> tokenStream.setMaxTokenLength(maxTokenLength);
> > >> TokenStream result =3D new StandardFilter(tokenStream);
> > >> result =3D new LowerCaseFilter(result);
> > >> result =3D new StopFilter(enableStopPositionIncrements, result,
> stopSet);
> > >> result =3D new SnowballFilter(result, STEMMER);
> > >>
> > >> I use the same analyzer in the search side. As you know, this analyz=
er
> > can
> > >> token c++ as cplusplus, for this reason, it seems I can search c++
> with
> > >> the same analyzer because it is also tokenized as cplusplus.
> > >>
> > >> I tested it on as string c++c++, however, when i search c++ on the
> > built
> > >> index, nothing is returned.
> > >>
> > >>  I do not know what's wrong with my code. Waiting for your replay
> > >>
> > >>
> > >>
> > >>
> > >>
> > >> On Fri, Dec 11, 2009 at 9:43 PM, Weiwei Wang
> > <ww.wang.cs@gmail.com>wrote:
> > >>
> > >>> Thanks, Koji
> > >>>
> > >>>
> > >>> On Fri, Dec 11, 2009 at 7:59 PM, Koji Sekiguchi
> > <koji@r.email.ne.jp>wrote:
> > >>>
> > >>>> MappingCharFilter can be used to convert c++ to cplusplus.
> > >>>>
> > >>>> Koji
> > >>>>
> > >>>> --
> > >>>> http://www.rondhuit.com/en/
> > >>>>
> > >>>>
> > >>>>
> > >>>> Anshum wrote:
> > >>>>
> > >>>>> How about getting the original token stream and then converting c=
++
> > to
> > >>>>> cplusplus or anyother such transform. Or perhaps you might look a=
t
> > >>>>> using/extending(in the non java sense) some other tokenized!
> > >>>>>
> > >>>>> --
> > >>>>> Anshum Gupta
> > >>>>> Naukri Labs!
> > >>>>> http://ai-cafe.blogspot.com
> > >>>>>
> > >>>>> The facts expressed here belong to everybody, the opinions to me.
> > The
> > >>>>> distinction is yours to draw............
> > >>>>>
> > >>>>>
> > >>>>> On Fri, Dec 11, 2009 at 11:00 AM, Weiwei Wang <
> ww.wang.cs@gmail.com>
> > >>>>> wrote:
> > >>>>>
> > >>>>>
> > >>>>>
> > >>>>>> Hi, all,
> > >>>>>>    I designed a ftp search engine based on Lucene. I did a few
> > >>>>>> modifications to the StandardTokenizer.
> > >>>>>> My problem is:
> > >>>>>>  C++ is tokenized as c from StandardTokenizer and I want to
> recover
> > it
> > >>>>>> from
> > >>>>>> the TokenStream from StandardTokenizer
> > >>>>>>
> > >>>>>> What should I do?
> > >>>>>>
> > >>>>>> --
> > >>>>>> Weiwei Wang
> > >>>>>> Alex Wang
> > >>>>>> =E7=8E=8B=E5=B7=8D=E5=B7=8D
> > >>>>>> Room 403, Mengmin Wei Building
> > >>>>>> Computer Science Department
> > >>>>>> Gulou Campus of Nanjing University
> > >>>>>> Nanjing, P.R.China, 210093
> > >>>>>>
> > >>>>>> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > >>>>>>
> > >>>>>>
> > >>>>>>
> > >>>>>
> > >>>>>
> > >>>>>
> > >>>>
> > >>>>
> > >>>>
> > >>>>
> ---------------------------------------------------------------------
> > >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>>>
> > >>>>
> > >>>
> > >>>
> > >>> --
> > >>> Weiwei Wang
> > >>> Alex Wang
> > >>> =E7=8E=8B=E5=B7=8D=E5=B7=8D
> > >>> Room 403, Mengmin Wei Building
> > >>> Computer Science Department
> > >>> Gulou Campus of Nanjing University
> > >>> Nanjing, P.R.China, 210093
> > >>>
> > >>> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > >>>
> > >>
> > >>
> > >>
> > >> --
> > >> Weiwei Wang
> > >> Alex Wang
> > >> =E7=8E=8B=E5=B7=8D=E5=B7=8D
> > >> Room 403, Mengmin Wei Building
> > >> Computer Science Department
> > >> Gulou Campus of Nanjing University
> > >> Nanjing, P.R.China, 210093
> > >>
> > >> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > >>
> > >
> > >
> > >
> > > --
> > > Weiwei Wang
> > > Alex Wang
> > > =E7=8E=8B=E5=B7=8D=E5=B7=8D
> > > Room 403, Mengmin Wei Building
> > > Computer Science Department
> > > Gulou Campus of Nanjing University
> > > Nanjing, P.R.China, 210093
> > >
> > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > >
> >
> >
> >
> > --
> > Weiwei Wang
> > Alex Wang
> > =E7=8E=8B=E5=B7=8D=E5=B7=8D
> > Room 403, Mengmin Wei Building
> > Computer Science Department
> > Gulou Campus of Nanjing University
> > Nanjing, P.R.China, 210093
> >
> > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--001485f647327c984a047a9a5fa0--

From java-user-return-44067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 13 11:29:14 2009
Return-Path: <java-user-return-44067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83820 invoked from network); 13 Dec 2009 11:29:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Dec 2009 11:29:14 -0000
Received: (qmail 21552 invoked by uid 500); 13 Dec 2009 11:29:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21446 invoked by uid 500); 13 Dec 2009 11:29:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21436 invoked by uid 99); 13 Dec 2009 11:29:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Dec 2009 11:29:12 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Dec 2009 11:29:02 +0000
Received: by ywh15 with SMTP id 15so2243871ywh.5
        for <java-user@lucene.apache.org>; Sun, 13 Dec 2009 03:28:39 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.48.6 with SMTP id v6mr5437262ybv.131.1260703719419; Sun, 
	13 Dec 2009 03:28:39 -0800 (PST)
In-Reply-To: <7d94dcde0912121924m4653c03bwe5222f0c7b36f49d@mail.gmail.com>
References: <7d94dcde0912120425ue632fc7s3d244765c57d2624@mail.gmail.com>
	 <88FB1CAEBD7D49CE9B40D323CC816311@VEGA>
	 <7d94dcde0912120608x7bde51f3l97d0b9fafa6a5245@mail.gmail.com>
	 <359a92830912121918j5e7c4a9cs87be4f60465dbb33@mail.gmail.com>
	 <7d94dcde0912121924m4653c03bwe5222f0c7b36f49d@mail.gmail.com>
Date: Sun, 13 Dec 2009 06:28:39 -0500
Message-ID: <9ac0c6aa0912130328rabb6296w3f5c686e865a72f2@mail.gmail.com>
Subject: Re: Index Update
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

IndexWriter is transactional: if you do the deletes & adds during a
single IndexWriter session (ie, no commit in between), then simply
call IndexWriter.rollback to get back to your starting index, if
anything goes wrong.  If nothing goes wrong, call IndexWriter.commit.

Outside readers, even newly opened ones, will see either the starting
state, or the finished state, and nothing in between.

Mike

On Sat, Dec 12, 2009 at 10:24 PM, Weiwei Wang <ww.wang.cs@gmail.com> wrote:
> What I'm doing now is to indexing all file paths in a bunch of ftp server=
s.
>
> For ftp server administrator, he can add, delete or rename the files. So =
as
> to keep pace with times, i need to do updating very often.
>
> the process should be:
> 1. delete the old documents
> 2. add the new crawled ones
> 3. if error happend in process 2, rollback is performed
> 4. finish
>
> I used two indexed mainly to do rollback, otherwise the logic may be
> confused and not very clear.
>
>
> Currently, i'm thinking how to do this job with only one copy of index.
>
>
> On Sun, Dec 13, 2009 at 11:18 AM, Erick Erickson <erickerickson@gmail.com=
>wrote:
>
>> Quick addition. Even if you commit/close your indexwriter, you
>> *still* won't see the changes in your search unless you repoen the
>> indexreader. But you have to do both (in the order above) to
>> see all the changes you've added via your indexwriter.....
>>
>> but there's no reason to hold off on committing changes in
>> your indexwriter for a long time and risk losing the changes
>> should your program abort.....
>>
>> HTH
>> Erick
>>
>> On Sat, Dec 12, 2009 at 9:08 AM, Weiwei Wang <ww.wang.cs@gmail.com> wrot=
e:
>>
>> > Gotcha, tThanks, Uwe
>> >
>> > 2009/12/12 Uwe Schindler <uwe@thetaphi.de>
>> >
>> > > No. As long as you not commit or close the IndexWriter and reopen th=
e
>> > > IndexReader on the search side, nothing happens on the search side.
>> > >
>> > > Copying like you do is absolutely not needed.
>> > >
>> > > -----
>> > > Uwe Schindler
>> > > H.-H.-Meier-Allee 63, D-28213 Bremen
>> > > http://www.thetaphi.de
>> > > eMail: uwe@thetaphi.de
>> > >
>> > > > -----Original Message-----
>> > > > From: Weiwei Wang [mailto:ww.wang.cs@gmail.com]
>> > > > Sent: Saturday, December 12, 2009 1:25 PM
>> > > > To: java-user@lucene.apache.org
>> > > > Subject: Index Update
>> > > >
>> > > > Hi, all,
>> > > > =C2=A0 =C2=A0 =C2=A0I need to update my index everyday so as to ke=
ep pace with
>> times.
>> > > > Current I have two copy of indexes, one is used to provide search
>> > > service,
>> > > > the other is used to do updating. Once the updating process is don=
e,
>> I
>> > > > write
>> > > > all the updated documents to the index which provide search servic=
e.
>> > > >
>> > > > I want to use only one copy of index, =C2=A0and do updating search=
ing on
>> the
>> > > > same
>> > > > index? Does the updating process will effect the search result whe=
n
>> the
>> > > > updating process is running?
>> > > >
>> > > > --
>> > > > Weiwei Wang
>> > > > Alex Wang
>> > > > =E7=8E=8B=E5=B7=8D=E5=B7=8D
>> > > > Room 403, Mengmin Wei Building
>> > > > Computer Science Department
>> > > > Gulou Campus of Nanjing University
>> > > > Nanjing, P.R.China, 210093
>> > > >
>> > > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>> > >
>> > >
>> > > --------------------------------------------------------------------=
-
>> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > > For additional commands, e-mail: java-user-help@lucene.apache.org
>> > >
>> > >
>> >
>> >
>> > --
>> > Weiwei Wang
>> > Alex Wang
>> > =E7=8E=8B=E5=B7=8D=E5=B7=8D
>> > Room 403, Mengmin Wei Building
>> > Computer Science Department
>> > Gulou Campus of Nanjing University
>> > Nanjing, P.R.China, 210093
>> >
>> > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>> >
>>
>
>
>
> --
> Weiwei Wang
> Alex Wang
> =E7=8E=8B=E5=B7=8D=E5=B7=8D
> Room 403, Mengmin Wei Building
> Computer Science Department
> Gulou Campus of Nanjing University
> Nanjing, P.R.China, 210093
>
> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 13 11:31:23 2009
Return-Path: <java-user-return-44068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84233 invoked from network); 13 Dec 2009 11:31:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Dec 2009 11:31:23 -0000
Received: (qmail 23622 invoked by uid 500); 13 Dec 2009 11:31:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23521 invoked by uid 500); 13 Dec 2009 11:31:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23511 invoked by uid 99); 13 Dec 2009 11:31:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Dec 2009 11:31:21 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.217.225 as permitted sender)
Received: from [209.85.217.225] (HELO mail-gx0-f225.google.com) (209.85.217.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Dec 2009 11:31:10 +0000
Received: by gxk25 with SMTP id 25so2393650gxk.5
        for <java-user@lucene.apache.org>; Sun, 13 Dec 2009 03:30:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=vXAxopSTg7FuF+IDqVBF6GGQJfdmWaYJsJUSSVJ11Dw=;
        b=UGpCAdB7WyUEn4ekL/SOQ+DYPr6IMCBavZ4phWXJ6IoqJrT1XnmLAsn8YpES4pjviX
         kYF07L0cYaYadA0AzlRkeGA10VUik48XS2XB2OPLdyTBQWpJcW1EjhXfttBqNsLEbLyv
         kEw+ETOQzcoYtFRFjQd6l93KXjb0CkueekFnc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=fvyRjcZLovciDtm4sJlIBk+c0uqFJLbYhjdIr7C+HzoUUIbceph3i67EzkmREfiNiC
         9Lpcs5Otsf/BeDvkHRvtPxx8RZWWuvf72cX8zRbJYMVAMddd6D9n/a4V5yclpgk5vTK4
         LTXkIuIaF/rOyEtFCAExoaC4esDsFOWi/p0KM=
MIME-Version: 1.0
Received: by 10.90.179.13 with SMTP id b13mr3583540agf.11.1260703849732; Sun, 
	13 Dec 2009 03:30:49 -0800 (PST)
In-Reply-To: <9ac0c6aa0912130328rabb6296w3f5c686e865a72f2@mail.gmail.com>
References: <7d94dcde0912120425ue632fc7s3d244765c57d2624@mail.gmail.com>
	 <88FB1CAEBD7D49CE9B40D323CC816311@VEGA>
	 <7d94dcde0912120608x7bde51f3l97d0b9fafa6a5245@mail.gmail.com>
	 <359a92830912121918j5e7c4a9cs87be4f60465dbb33@mail.gmail.com>
	 <7d94dcde0912121924m4653c03bwe5222f0c7b36f49d@mail.gmail.com>
	 <9ac0c6aa0912130328rabb6296w3f5c686e865a72f2@mail.gmail.com>
Date: Sun, 13 Dec 2009 19:30:49 +0800
Message-ID: <7d94dcde0912130330w79d769a6ke411b6324e558248@mail.gmail.com>
Subject: Re: Index Update
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016362849c6215d00047a9a7d2b
X-Virus-Checked: Checked by ClamAV on apache.org

--0016362849c6215d00047a9a7d2b
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

gotcha, thanks, Mike

On Sun, Dec 13, 2009 at 7:28 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> IndexWriter is transactional: if you do the deletes & adds during a
> single IndexWriter session (ie, no commit in between), then simply
> call IndexWriter.rollback to get back to your starting index, if
> anything goes wrong.  If nothing goes wrong, call IndexWriter.commit.
>
> Outside readers, even newly opened ones, will see either the starting
> state, or the finished state, and nothing in between.
>
> Mike
>
> On Sat, Dec 12, 2009 at 10:24 PM, Weiwei Wang <ww.wang.cs@gmail.com>
> wrote:
> > What I'm doing now is to indexing all file paths in a bunch of ftp
> servers.
> >
> > For ftp server administrator, he can add, delete or rename the files. S=
o
> as
> > to keep pace with times, i need to do updating very often.
> >
> > the process should be:
> > 1. delete the old documents
> > 2. add the new crawled ones
> > 3. if error happend in process 2, rollback is performed
> > 4. finish
> >
> > I used two indexed mainly to do rollback, otherwise the logic may be
> > confused and not very clear.
> >
> >
> > Currently, i'm thinking how to do this job with only one copy of index.
> >
> >
> > On Sun, Dec 13, 2009 at 11:18 AM, Erick Erickson <
> erickerickson@gmail.com>wrote:
> >
> >> Quick addition. Even if you commit/close your indexwriter, you
> >> *still* won't see the changes in your search unless you repoen the
> >> indexreader. But you have to do both (in the order above) to
> >> see all the changes you've added via your indexwriter.....
> >>
> >> but there's no reason to hold off on committing changes in
> >> your indexwriter for a long time and risk losing the changes
> >> should your program abort.....
> >>
> >> HTH
> >> Erick
> >>
> >> On Sat, Dec 12, 2009 at 9:08 AM, Weiwei Wang <ww.wang.cs@gmail.com>
> wrote:
> >>
> >> > Gotcha, tThanks, Uwe
> >> >
> >> > 2009/12/12 Uwe Schindler <uwe@thetaphi.de>
> >> >
> >> > > No. As long as you not commit or close the IndexWriter and reopen
> the
> >> > > IndexReader on the search side, nothing happens on the search side=
.
> >> > >
> >> > > Copying like you do is absolutely not needed.
> >> > >
> >> > > -----
> >> > > Uwe Schindler
> >> > > H.-H.-Meier-Allee 63, D-28213 Bremen
> >> > > http://www.thetaphi.de
> >> > > eMail: uwe@thetaphi.de
> >> > >
> >> > > > -----Original Message-----
> >> > > > From: Weiwei Wang [mailto:ww.wang.cs@gmail.com]
> >> > > > Sent: Saturday, December 12, 2009 1:25 PM
> >> > > > To: java-user@lucene.apache.org
> >> > > > Subject: Index Update
> >> > > >
> >> > > > Hi, all,
> >> > > >      I need to update my index everyday so as to keep pace with
> >> times.
> >> > > > Current I have two copy of indexes, one is used to provide searc=
h
> >> > > service,
> >> > > > the other is used to do updating. Once the updating process is
> done,
> >> I
> >> > > > write
> >> > > > all the updated documents to the index which provide search
> service.
> >> > > >
> >> > > > I want to use only one copy of index,  and do updating searching
> on
> >> the
> >> > > > same
> >> > > > index? Does the updating process will effect the search result
> when
> >> the
> >> > > > updating process is running?
> >> > > >
> >> > > > --
> >> > > > Weiwei Wang
> >> > > > Alex Wang
> >> > > > =E7=8E=8B=E5=B7=8D=E5=B7=8D
> >> > > > Room 403, Mengmin Wei Building
> >> > > > Computer Science Department
> >> > > > Gulou Campus of Nanjing University
> >> > > > Nanjing, P.R.China, 210093
> >> > > >
> >> > > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> >> > >
> >> > >
> >> > >
> ---------------------------------------------------------------------
> >> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> > >
> >> > >
> >> >
> >> >
> >> > --
> >> > Weiwei Wang
> >> > Alex Wang
> >> > =E7=8E=8B=E5=B7=8D=E5=B7=8D
> >> > Room 403, Mengmin Wei Building
> >> > Computer Science Department
> >> > Gulou Campus of Nanjing University
> >> > Nanjing, P.R.China, 210093
> >> >
> >> > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> >> >
> >>
> >
> >
> >
> > --
> > Weiwei Wang
> > Alex Wang
> > =E7=8E=8B=E5=B7=8D=E5=B7=8D
> > Room 403, Mengmin Wei Building
> > Computer Science Department
> > Gulou Campus of Nanjing University
> > Nanjing, P.R.China, 210093
> >
> > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--0016362849c6215d00047a9a7d2b--

From java-user-return-44069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 13 11:43:42 2009
Return-Path: <java-user-return-44069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86779 invoked from network); 13 Dec 2009 11:43:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Dec 2009 11:43:41 -0000
Received: (qmail 32546 invoked by uid 500); 13 Dec 2009 11:43:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32462 invoked by uid 500); 13 Dec 2009 11:43:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32452 invoked by uid 99); 13 Dec 2009 11:43:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Dec 2009 11:43:39 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Dec 2009 11:43:29 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 209C4D36005
	for <java-user@lucene.apache.org>; Sun, 13 Dec 2009 12:43:09 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id pVmd-w5XnLoj for <java-user@lucene.apache.org>;
	Sun, 13 Dec 2009 12:43:00 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 28A35D36004
	for <java-user@lucene.apache.org>; Sun, 13 Dec 2009 12:43:00 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <7d94dcde0912102130u214d4a87r18b97575e223b521@mail.gmail.com> <867513fe0912110109i71d6491am10934c77190b2029@mail.gmail.com> <4B223416.2060701@r.email.ne.jp> <7d94dcde0912110543y63729d5eo14e6be2b992121b@mail.gmail.com> <7d94dcde0912121834l14d3b3acmff09dbcf5e7114d1@mail.gmail.com> <7d94dcde0912121912r4496b28cv261089aa1ba94f79@mail.gmail.com> <7d94dcde0912130242q38a50c5frcf8b0124fcaf4a91@mail.gmail.com> <8321DA8EE5DF498A838FC1696CB5E359@VEGA> <7d94dcde0912130322l73284a1ay3b8345c3eefdf10f@mail.gmail.com>
Subject: RE: Recover special terms from StandardTokenizer
Date: Sun, 13 Dec 2009 12:42:59 +0100
Message-ID: <3E2DC705894D4E199EED0A9F45BF8EA2@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-2022-jp"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <7d94dcde0912130322l73284a1ay3b8345c3eefdf10f@mail.gmail.com>
Thread-Index: Acp75rJyWxLSbk6QSfy8rs2VfXTQNQAAjZWg
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

I think your problem is theLowercaseCharFilter that does not pass
correctOffset() to the underying CharFilter. Does it work better without
your LowerCaseCharFilter (which is duplicate because there is already a
LowerCaseFilter in the Tokenizer chain).

As you are only looking for "c++", just also add a mapping for "C++" and you
are done, why lowercasing all because of one char?

And what's RosaMappingCharFilter? A pink one? *g*

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Weiwei Wang [mailto:ww.wang.cs@gmail.com]
> Sent: Sunday, December 13, 2009 12:23 PM
> To: java-user@lucene.apache.org
> Subject: Re: Recover special terms from StandardTokenizer
> 
> thanks, Uwe.
> Maybe i was not very clear. My situation is like this:
> Analyzer:
>    NormalizeCharMap RECOVERY_MAP = new NormalizeCharMap();
>    RECOVERY_MAP.add("c++","cplusplus$");
>     CharFilter filter = new LowercaseCharFilter(reader);
>     filter = new RosaMappingCharFilter(RECOVERY_MAP,filter);
>     StandardTokenizer tokenStream = new
> StandardTokenizer(Version.LUCENE_30,
> filter);
>     tokenStream.setMaxTokenLength(maxTokenLength);
>     TokenStream result = new StandardFilter(tokenStream);
>     result = getStopFilter(result);
>     result = new SnowballFilter(result, STEMMER);
> Analyze c++c++, return
> (0,9)  [cplusplus]
> (10,19)  [cplusplus]
> the two numbers in th**e brackets are offsets.
> 
> So in the searching process when i want to hight the search keyword c++
> with
> the same analyzer, exception will be thrown because the string i stored
> are
> c++c++ not cpluspluscplusplus(actually, i should not change the original
> string when storing them, otherwise it will confuse the users).
> 
> I hope the analyzer can give result like this
> (0,3) [cplusplus]
> (3,6) [cplusplus]
> then the Hilighter will works fine.
> 
> So how can I achieve this result?
> 
> 2009/12/13 Uwe Schindler <uwe@thetaphi.de>
> 
> > MappingCharFilter preserves the offsets in the stream *before*
> filtering.
> > So
> > if you store the original string (without c++ replaced) in a stored
> field
> > you can highlight using the given offstes. The highlighter must use
> again
> > the same analyzer or use FastVectorHighlighter.
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> > > -----Original Message-----
> > > From: Weiwei Wang [mailto:ww.wang.cs@gmail.com]
> > > Sent: Sunday, December 13, 2009 11:43 AM
> > > To: java-user@lucene.apache.org
> > > Subject: Re: Recover special terms from StandardTokenizer
> > >
> > > Problem solved. Now another problem comes.
> > >
> > >
> > > As I want to use Highlighter in my system, the token offset is
> incorrect
> > > after the MappingCharFilter is used.
> > >
> > > Koji, do you known how to fix the offset problem?
> > >
> > > On Sun, Dec 13, 2009 at 11:12 AM, Weiwei Wang <ww.wang.cs@gmail.com>
> > > wrote:
> > >
> > > > I use Luke to check the result and find only c exists as a term, no
> > > > cplusplus found in the index
> > > >
> > > >
> > > > On Sun, Dec 13, 2009 at 10:34 AM, Weiwei Wang
> > > <ww.wang.cs@gmail.com>wrote:
> > > >
> > > >> Thanks, Koji, I followed your advice and change my analyzer as
> shown
> > > >> below:
> > > >> NormalizeCharMap RECOVERY_MAP = new NormalizeCharMap();
> > > >> RECOVERY_MAP.add("c++","cplusplus$");
> > > >> CharFilter filter = new LowercaseCharFilter(reader);
> > > >> filter = new MappingCharFilter(RECOVERY_MAP,filter);
> > > >> StandardTokenizer tokenStream = new
> > > StandardTokenizer(Version.LUCENE_30,
> > > >> filter);
> > > >> tokenStream.setMaxTokenLength(maxTokenLength);
> > > >> TokenStream result = new StandardFilter(tokenStream);
> > > >> result = new LowerCaseFilter(result);
> > > >> result = new StopFilter(enableStopPositionIncrements, result,
> > stopSet);
> > > >> result = new SnowballFilter(result, STEMMER);
> > > >>
> > > >> I use the same analyzer in the search side. As you know, this
> analyzer
> > > can
> > > >> token c++ as cplusplus, for this reason, it seems I can search c++
> > with
> > > >> the same analyzer because it is also tokenized as cplusplus.
> > > >>
> > > >> I tested it on as string c++c++, however, when i search c++ on the
> > > built
> > > >> index, nothing is returned.
> > > >>
> > > >>  I do not know what's wrong with my code. Waiting for your replay
> > > >>
> > > >>
> > > >>
> > > >>
> > > >>
> > > >> On Fri, Dec 11, 2009 at 9:43 PM, Weiwei Wang
> > > <ww.wang.cs@gmail.com>wrote:
> > > >>
> > > >>> Thanks, Koji
> > > >>>
> > > >>>
> > > >>> On Fri, Dec 11, 2009 at 7:59 PM, Koji Sekiguchi
> > > <koji@r.email.ne.jp>wrote:
> > > >>>
> > > >>>> MappingCharFilter can be used to convert c++ to cplusplus.
> > > >>>>
> > > >>>> Koji
> > > >>>>
> > > >>>> --
> > > >>>> http://www.rondhuit.com/en/
> > > >>>>
> > > >>>>
> > > >>>>
> > > >>>> Anshum wrote:
> > > >>>>
> > > >>>>> How about getting the original token stream and then converting
> c++
> > > to
> > > >>>>> cplusplus or anyother such transform. Or perhaps you might look
> at
> > > >>>>> using/extending(in the non java sense) some other tokenized!
> > > >>>>>
> > > >>>>> --
> > > >>>>> Anshum Gupta
> > > >>>>> Naukri Labs!
> > > >>>>> http://ai-cafe.blogspot.com
> > > >>>>>
> > > >>>>> The facts expressed here belong to everybody, the opinions to
> me.
> > > The
> > > >>>>> distinction is yours to draw............
> > > >>>>>
> > > >>>>>
> > > >>>>> On Fri, Dec 11, 2009 at 11:00 AM, Weiwei Wang <
> > ww.wang.cs@gmail.com>
> > > >>>>> wrote:
> > > >>>>>
> > > >>>>>
> > > >>>>>
> > > >>>>>> Hi, all,
> > > >>>>>>    I designed a ftp search engine based on Lucene. I did a few
> > > >>>>>> modifications to the StandardTokenizer.
> > > >>>>>> My problem is:
> > > >>>>>>  C++ is tokenized as c from StandardTokenizer and I want to
> > recover
> > > it
> > > >>>>>> from
> > > >>>>>> the TokenStream from StandardTokenizer
> > > >>>>>>
> > > >>>>>> What should I do?
> > > >>>>>>
> > > >>>>>> --
> > > >>>>>> Weiwei Wang
> > > >>>>>> Alex Wang
> > > >>>>>> $B2&V[V[(B
> > > >>>>>> Room 403, Mengmin Wei Building
> > > >>>>>> Computer Science Department
> > > >>>>>> Gulou Campus of Nanjing University
> > > >>>>>> Nanjing, P.R.China, 210093
> > > >>>>>>
> > > >>>>>> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > > >>>>>>
> > > >>>>>>
> > > >>>>>>
> > > >>>>>
> > > >>>>>
> > > >>>>>
> > > >>>>
> > > >>>>
> > > >>>>
> > > >>>>
> > ---------------------------------------------------------------------
> > > >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >>>>
> > > >>>>
> > > >>>
> > > >>>
> > > >>> --
> > > >>> Weiwei Wang
> > > >>> Alex Wang
> > > >>> $B2&V[V[(B
> > > >>> Room 403, Mengmin Wei Building
> > > >>> Computer Science Department
> > > >>> Gulou Campus of Nanjing University
> > > >>> Nanjing, P.R.China, 210093
> > > >>>
> > > >>> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > > >>>
> > > >>
> > > >>
> > > >>
> > > >> --
> > > >> Weiwei Wang
> > > >> Alex Wang
> > > >> $B2&V[V[(B
> > > >> Room 403, Mengmin Wei Building
> > > >> Computer Science Department
> > > >> Gulou Campus of Nanjing University
> > > >> Nanjing, P.R.China, 210093
> > > >>
> > > >> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > > >>
> > > >
> > > >
> > > >
> > > > --
> > > > Weiwei Wang
> > > > Alex Wang
> > > > $B2&V[V[(B
> > > > Room 403, Mengmin Wei Building
> > > > Computer Science Department
> > > > Gulou Campus of Nanjing University
> > > > Nanjing, P.R.China, 210093
> > > >
> > > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > > >
> > >
> > >
> > >
> > > --
> > > Weiwei Wang
> > > Alex Wang
> > > $B2&V[V[(B
> > > Room 403, Mengmin Wei Building
> > > Computer Science Department
> > > Gulou Campus of Nanjing University
> > > Nanjing, P.R.China, 210093
> > >
> > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> 
> --
> Weiwei Wang
> Alex Wang
> $B2&V[V[(B
> Room 403, Mengmin Wei Building
> Computer Science Department
> Gulou Campus of Nanjing University
> Nanjing, P.R.China, 210093
> 
> Homepage: http://cs.nju.edu.cn/rl/weiweiwang


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 13 11:51:08 2009
Return-Path: <java-user-return-44070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88489 invoked from network); 13 Dec 2009 11:51:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Dec 2009 11:51:08 -0000
Received: (qmail 37942 invoked by uid 500); 13 Dec 2009 11:51:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37862 invoked by uid 500); 13 Dec 2009 11:51:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37852 invoked by uid 99); 13 Dec 2009 11:51:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Dec 2009 11:51:05 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.211.185 as permitted sender)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Dec 2009 11:50:54 +0000
Received: by ywh15 with SMTP id 15so2249563ywh.5
        for <java-user@lucene.apache.org>; Sun, 13 Dec 2009 03:50:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=NPUvnbGBkSwd0YIljS9TF5R9D+qzcJC0Yhsk4WNGqYU=;
        b=XjvCJRncTM4NevMH9y/xWdlzplzkMBD6a7zX0olWUpeAHauej51gDk/w4gKm7iaSCO
         yFBtuDvc9ioDcqJsfffRHi1FdNBKaxa95kc5ApazBJsg7MhyqbQNaf73asLYopO3VL7O
         DimVpvHJtRI282s5I282eXZf5JWOnuVTnR3eM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=RtZJA+1i4l6TXz2UMwMmqIdgA8eSr9TI8WID00VprBBb7PPe6IgjgMTG9ZlP//e+4T
         a/kwsJ4QrR3erMjtPUjG1Bl3ZGkgKlG7Z5xEQSMEyK5j7TeycCpPKzIG/EdjcFq3kvzI
         pVxXx8qFkedA6a1fKyyTLXvxRyuhCJzu1DVwo=
MIME-Version: 1.0
Received: by 10.90.43.5 with SMTP id q5mr1241560agq.32.1260705032735; Sun, 13 
	Dec 2009 03:50:32 -0800 (PST)
In-Reply-To: <3E2DC705894D4E199EED0A9F45BF8EA2@VEGA>
References: <7d94dcde0912102130u214d4a87r18b97575e223b521@mail.gmail.com>
	 <867513fe0912110109i71d6491am10934c77190b2029@mail.gmail.com>
	 <4B223416.2060701@r.email.ne.jp>
	 <7d94dcde0912110543y63729d5eo14e6be2b992121b@mail.gmail.com>
	 <7d94dcde0912121834l14d3b3acmff09dbcf5e7114d1@mail.gmail.com>
	 <7d94dcde0912121912r4496b28cv261089aa1ba94f79@mail.gmail.com>
	 <7d94dcde0912130242q38a50c5frcf8b0124fcaf4a91@mail.gmail.com>
	 <8321DA8EE5DF498A838FC1696CB5E359@VEGA>
	 <7d94dcde0912130322l73284a1ay3b8345c3eefdf10f@mail.gmail.com>
	 <3E2DC705894D4E199EED0A9F45BF8EA2@VEGA>
Date: Sun, 13 Dec 2009 19:50:32 +0800
Message-ID: <7d94dcde0912130350u7ace7489i20a7f9f28a6de917@mail.gmail.com>
Subject: Re: Recover special terms from StandardTokenizer
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163630f68fa49aa3047a9ac3cf
X-Virus-Checked: Checked by ClamAV on apache.org

--00163630f68fa49aa3047a9ac3cf
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

LowercaseCharFilter is necessary, as in the MappingCharFilter we need to
provide a NormalizeCharMap. We lowercase the stream so as we only provide
lowercase maps in the NormalizeCharMap, e.g. we provide map
(c++-->cplusplus) instead of (c++-->cplusplus) and (C++-->cplusplus).

C++ is only an example we want to fix, in the future we may add more such
special terms

the code for LowercaseCharFilter is as follows:
package analysis;

import java.io.IOException;
import java.io.Reader;

import org.apache.lucene.analysis.BaseCharFilter;
import org.apache.lucene.analysis.CharReader;
import org.apache.lucene.analysis.CharStream;


public class LowercaseCharFilter extends BaseCharFilter
{

    public LowercaseCharFilter(CharStream in)
    {
    super(in);
    }

    public LowercaseCharFilter(Reader in)
    {
    super(CharReader.get(in));
    }
    @Override
    public int read() throws IOException
    {
    return Character.toLowerCase(input.read());
    }
    @Override
    public int read(char[] cbuf, int off, int len) throws IOException {
    int ret =3D input.read(cbuf, off, len);
    if(ret!=3D-1)
    {
        for(int i=3Doff; i<off+ret; i++)
        cbuf[i] =3D Character.toLowerCase(cbuf[i]);
    }
    return ret;
    }
}


Currently RosaMappingCharFilter is inherited from MappingCharFilter and
nothing is changed(i was planning to override addOffCorrectMap to fix my
problem, but it didn't work)


2009/12/13 Uwe Schindler <uwe@thetaphi.de>

> I think your problem is theLowercaseCharFilter that does not pass
> correctOffset() to the underying CharFilter. Does it work better without
> your LowerCaseCharFilter (which is duplicate because there is already a
> LowerCaseFilter in the Tokenizer chain).
>
> As you are only looking for "c++", just also add a mapping for "C++" and
> you
> are done, why lowercasing all because of one char?
>
> And what's RosaMappingCharFilter? A pink one? *g*
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
> > -----Original Message-----
> > From: Weiwei Wang [mailto:ww.wang.cs@gmail.com]
> > Sent: Sunday, December 13, 2009 12:23 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: Recover special terms from StandardTokenizer
> >
> > thanks, Uwe.
> > Maybe i was not very clear. My situation is like this:
> > Analyzer:
> >    NormalizeCharMap RECOVERY_MAP =3D new NormalizeCharMap();
> >    RECOVERY_MAP.add("c++","cplusplus$");
> >     CharFilter filter =3D new LowercaseCharFilter(reader);
> >     filter =3D new RosaMappingCharFilter(RECOVERY_MAP,filter);
> >     StandardTokenizer tokenStream =3D new
> > StandardTokenizer(Version.LUCENE_30,
> > filter);
> >     tokenStream.setMaxTokenLength(maxTokenLength);
> >     TokenStream result =3D new StandardFilter(tokenStream);
> >     result =3D getStopFilter(result);
> >     result =3D new SnowballFilter(result, STEMMER);
> > Analyze c++c++, return
> > (0,9)  [cplusplus]
> > (10,19)  [cplusplus]
> > the two numbers in th**e brackets are offsets.
> >
> > So in the searching process when i want to hight the search keyword c++
> > with
> > the same analyzer, exception will be thrown because the string i stored
> > are
> > c++c++ not cpluspluscplusplus(actually, i should not change the origina=
l
> > string when storing them, otherwise it will confuse the users).
> >
> > I hope the analyzer can give result like this
> > (0,3) [cplusplus]
> > (3,6) [cplusplus]
> > then the Hilighter will works fine.
> >
> > So how can I achieve this result?
> >
> > 2009/12/13 Uwe Schindler <uwe@thetaphi.de>
> >
> > > MappingCharFilter preserves the offsets in the stream *before*
> > filtering.
> > > So
> > > if you store the original string (without c++ replaced) in a stored
> > field
> > > you can highlight using the given offstes. The highlighter must use
> > again
> > > the same analyzer or use FastVectorHighlighter.
> > >
> > > -----
> > > Uwe Schindler
> > > H.-H.-Meier-Allee 63, D-28213 Bremen
> > > http://www.thetaphi.de
> > > eMail: uwe@thetaphi.de
> > >
> > > > -----Original Message-----
> > > > From: Weiwei Wang [mailto:ww.wang.cs@gmail.com]
> > > > Sent: Sunday, December 13, 2009 11:43 AM
> > > > To: java-user@lucene.apache.org
> > > > Subject: Re: Recover special terms from StandardTokenizer
> > > >
> > > > Problem solved. Now another problem comes.
> > > >
> > > >
> > > > As I want to use Highlighter in my system, the token offset is
> > incorrect
> > > > after the MappingCharFilter is used.
> > > >
> > > > Koji, do you known how to fix the offset problem?
> > > >
> > > > On Sun, Dec 13, 2009 at 11:12 AM, Weiwei Wang <ww.wang.cs@gmail.com=
>
> > > > wrote:
> > > >
> > > > > I use Luke to check the result and find only c exists as a term, =
no
> > > > > cplusplus found in the index
> > > > >
> > > > >
> > > > > On Sun, Dec 13, 2009 at 10:34 AM, Weiwei Wang
> > > > <ww.wang.cs@gmail.com>wrote:
> > > > >
> > > > >> Thanks, Koji, I followed your advice and change my analyzer as
> > shown
> > > > >> below:
> > > > >> NormalizeCharMap RECOVERY_MAP =3D new NormalizeCharMap();
> > > > >> RECOVERY_MAP.add("c++","cplusplus$");
> > > > >> CharFilter filter =3D new LowercaseCharFilter(reader);
> > > > >> filter =3D new MappingCharFilter(RECOVERY_MAP,filter);
> > > > >> StandardTokenizer tokenStream =3D new
> > > > StandardTokenizer(Version.LUCENE_30,
> > > > >> filter);
> > > > >> tokenStream.setMaxTokenLength(maxTokenLength);
> > > > >> TokenStream result =3D new StandardFilter(tokenStream);
> > > > >> result =3D new LowerCaseFilter(result);
> > > > >> result =3D new StopFilter(enableStopPositionIncrements, result,
> > > stopSet);
> > > > >> result =3D new SnowballFilter(result, STEMMER);
> > > > >>
> > > > >> I use the same analyzer in the search side. As you know, this
> > analyzer
> > > > can
> > > > >> token c++ as cplusplus, for this reason, it seems I can search c=
++
> > > with
> > > > >> the same analyzer because it is also tokenized as cplusplus.
> > > > >>
> > > > >> I tested it on as string c++c++, however, when i search c++ on t=
he
> > > > built
> > > > >> index, nothing is returned.
> > > > >>
> > > > >>  I do not know what's wrong with my code. Waiting for your repla=
y
> > > > >>
> > > > >>
> > > > >>
> > > > >>
> > > > >>
> > > > >> On Fri, Dec 11, 2009 at 9:43 PM, Weiwei Wang
> > > > <ww.wang.cs@gmail.com>wrote:
> > > > >>
> > > > >>> Thanks, Koji
> > > > >>>
> > > > >>>
> > > > >>> On Fri, Dec 11, 2009 at 7:59 PM, Koji Sekiguchi
> > > > <koji@r.email.ne.jp>wrote:
> > > > >>>
> > > > >>>> MappingCharFilter can be used to convert c++ to cplusplus.
> > > > >>>>
> > > > >>>> Koji
> > > > >>>>
> > > > >>>> --
> > > > >>>> http://www.rondhuit.com/en/
> > > > >>>>
> > > > >>>>
> > > > >>>>
> > > > >>>> Anshum wrote:
> > > > >>>>
> > > > >>>>> How about getting the original token stream and then converti=
ng
> > c++
> > > > to
> > > > >>>>> cplusplus or anyother such transform. Or perhaps you might lo=
ok
> > at
> > > > >>>>> using/extending(in the non java sense) some other tokenized!
> > > > >>>>>
> > > > >>>>> --
> > > > >>>>> Anshum Gupta
> > > > >>>>> Naukri Labs!
> > > > >>>>> http://ai-cafe.blogspot.com
> > > > >>>>>
> > > > >>>>> The facts expressed here belong to everybody, the opinions to
> > me.
> > > > The
> > > > >>>>> distinction is yours to draw............
> > > > >>>>>
> > > > >>>>>
> > > > >>>>> On Fri, Dec 11, 2009 at 11:00 AM, Weiwei Wang <
> > > ww.wang.cs@gmail.com>
> > > > >>>>> wrote:
> > > > >>>>>
> > > > >>>>>
> > > > >>>>>
> > > > >>>>>> Hi, all,
> > > > >>>>>>    I designed a ftp search engine based on Lucene. I did a f=
ew
> > > > >>>>>> modifications to the StandardTokenizer.
> > > > >>>>>> My problem is:
> > > > >>>>>>  C++ is tokenized as c from StandardTokenizer and I want to
> > > recover
> > > > it
> > > > >>>>>> from
> > > > >>>>>> the TokenStream from StandardTokenizer
> > > > >>>>>>
> > > > >>>>>> What should I do?
> > > > >>>>>>
> > > > >>>>>> --
> > > > >>>>>> Weiwei Wang
> > > > >>>>>> Alex Wang
> > > > >>>>>> =E7=8E=8B=E5=B7=8D=E5=B7=8D
> > > > >>>>>> Room 403, Mengmin Wei Building
> > > > >>>>>> Computer Science Department
> > > > >>>>>> Gulou Campus of Nanjing University
> > > > >>>>>> Nanjing, P.R.China, 210093
> > > > >>>>>>
> > > > >>>>>> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > > > >>>>>>
> > > > >>>>>>
> > > > >>>>>>
> > > > >>>>>
> > > > >>>>>
> > > > >>>>>
> > > > >>>>
> > > > >>>>
> > > > >>>>
> > > > >>>>
> > > ---------------------------------------------------------------------
> > > > >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.or=
g
> > > > >>>> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > > > >>>>
> > > > >>>>
> > > > >>>
> > > > >>>
> > > > >>> --
> > > > >>> Weiwei Wang
> > > > >>> Alex Wang
> > > > >>> =E7=8E=8B=E5=B7=8D=E5=B7=8D
> > > > >>> Room 403, Mengmin Wei Building
> > > > >>> Computer Science Department
> > > > >>> Gulou Campus of Nanjing University
> > > > >>> Nanjing, P.R.China, 210093
> > > > >>>
> > > > >>> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > > > >>>
> > > > >>
> > > > >>
> > > > >>
> > > > >> --
> > > > >> Weiwei Wang
> > > > >> Alex Wang
> > > > >> =E7=8E=8B=E5=B7=8D=E5=B7=8D
> > > > >> Room 403, Mengmin Wei Building
> > > > >> Computer Science Department
> > > > >> Gulou Campus of Nanjing University
> > > > >> Nanjing, P.R.China, 210093
> > > > >>
> > > > >> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > > > >>
> > > > >
> > > > >
> > > > >
> > > > > --
> > > > > Weiwei Wang
> > > > > Alex Wang
> > > > > =E7=8E=8B=E5=B7=8D=E5=B7=8D
> > > > > Room 403, Mengmin Wei Building
> > > > > Computer Science Department
> > > > > Gulou Campus of Nanjing University
> > > > > Nanjing, P.R.China, 210093
> > > > >
> > > > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > > > >
> > > >
> > > >
> > > >
> > > > --
> > > > Weiwei Wang
> > > > Alex Wang
> > > > =E7=8E=8B=E5=B7=8D=E5=B7=8D
> > > > Room 403, Mengmin Wei Building
> > > > Computer Science Department
> > > > Gulou Campus of Nanjing University
> > > > Nanjing, P.R.China, 210093
> > > >
> > > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > --
> > Weiwei Wang
> > Alex Wang
> > =E7=8E=8B=E5=B7=8D=E5=B7=8D
> > Room 403, Mengmin Wei Building
> > Computer Science Department
> > Gulou Campus of Nanjing University
> > Nanjing, P.R.China, 210093
> >
> > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--00163630f68fa49aa3047a9ac3cf--

From java-user-return-44071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 13 12:10:48 2009
Return-Path: <java-user-return-44071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94254 invoked from network); 13 Dec 2009 12:10:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Dec 2009 12:10:48 -0000
Received: (qmail 50362 invoked by uid 500); 13 Dec 2009 12:10:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50269 invoked by uid 500); 13 Dec 2009 12:10:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50259 invoked by uid 99); 13 Dec 2009 12:10:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Dec 2009 12:10:46 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Dec 2009 12:10:38 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 58AC6D36005
	for <java-user@lucene.apache.org>; Sun, 13 Dec 2009 13:10:16 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Kosyg6EA12ru for <java-user@lucene.apache.org>;
	Sun, 13 Dec 2009 13:10:05 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 82FABD36004
	for <java-user@lucene.apache.org>; Sun, 13 Dec 2009 13:10:03 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <7d94dcde0912102130u214d4a87r18b97575e223b521@mail.gmail.com> <867513fe0912110109i71d6491am10934c77190b2029@mail.gmail.com> <4B223416.2060701@r.email.ne.jp> <7d94dcde0912110543y63729d5eo14e6be2b992121b@mail.gmail.com> <7d94dcde0912121834l14d3b3acmff09dbcf5e7114d1@mail.gmail.com> <7d94dcde0912121912r4496b28cv261089aa1ba94f79@mail.gmail.com> <7d94dcde0912130242q38a50c5frcf8b0124fcaf4a91@mail.gmail.com> <8321DA8EE5DF498A838FC1696CB5E359@VEGA> <7d94dcde0912130322l73284a1ay3b8345c3eefdf10f@mail.gmail.com> <3E2DC705894D4E199EED0A9F45BF8EA2@VEGA> <7d94dcde0912130350u7ace7489i20a7f9f28a6de917@mail.gmail.com>
Subject: RE: Recover special terms from StandardTokenizer
Date: Sun, 13 Dec 2009 13:10:03 +0100
Message-ID: <19A1BCCC31934B8E88AA34C2DA38F139@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-2022-jp"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Acp76pehgyHn23VpR+Wy43XR4RkLqAAAna6w
In-Reply-To: <7d94dcde0912130350u7ace7489i20a7f9f28a6de917@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579

MappingCharFilter definitely preserves the offsets from the original reader.
Yo can verify that for your case with Lucene$B!G(Bs testcase
TestMappingCharFilter in the source distribution @
/src/test/org/apache/lucene/analysis/TestMappingCharFilter.java:
 
public void test2to4() throws Exception {
 CharStream cs = new MappingCharFilter( normMap, new StringReader( "ll" ) );
 TokenStream ts = new WhitespaceTokenizer( cs );
 assertTokenStreamContents(ts, new String[]{"llll"}, new int[]{0}, new int[]
{2});
}

So there is everything correct. I tried this test also with StandrdTokenizer
instead of WhiteSpaceTokenizer - it works and asserts the correct offsets.
You should debug through the incrementToken()/CharFilter calls and verify
where your offsets change.

I cannot help more.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Weiwei Wang [mailto:ww.wang.cs@gmail.com]
> Sent: Sunday, December 13, 2009 12:51 PM
> To: java-user@lucene.apache.org
> Subject: Re: Recover special terms from StandardTokenizer
> 
> LowercaseCharFilter is necessary, as in the MappingCharFilter we need to
> provide a NormalizeCharMap. We lowercase the stream so as we only provide
> lowercase maps in the NormalizeCharMap, e.g. we provide map
> (c++-->cplusplus) instead of (c++-->cplusplus) and (C++-->cplusplus).
> 
> C++ is only an example we want to fix, in the future we may add more such
> special terms
> 
> the code for LowercaseCharFilter is as follows:
> package analysis;
> 
> import java.io.IOException;
> import java.io.Reader;
> 
> import org.apache.lucene.analysis.BaseCharFilter;
> import org.apache.lucene.analysis.CharReader;
> import org.apache.lucene.analysis.CharStream;
> 
> 
> public class LowercaseCharFilter extends BaseCharFilter
> {
> 
>     public LowercaseCharFilter(CharStream in)
>     {
>     super(in);
>     }
> 
>     public LowercaseCharFilter(Reader in)
>     {
>     super(CharReader.get(in));
>     }
>     @Override
>     public int read() throws IOException
>     {
>     return Character.toLowerCase(input.read());
>     }
>     @Override
>     public int read(char[] cbuf, int off, int len) throws IOException {
>     int ret = input.read(cbuf, off, len);
>     if(ret!=-1)
>     {
>         for(int i=off; i<off+ret; i++)
>         cbuf[i] = Character.toLowerCase(cbuf[i]);
>     }
>     return ret;
>     }
> }
> 
> 
> Currently RosaMappingCharFilter is inherited from MappingCharFilter and
> nothing is changed(i was planning to override addOffCorrectMap to fix my
> problem, but it didn't work)
> 
> 
> 2009/12/13 Uwe Schindler <uwe@thetaphi.de>
> 
> > I think your problem is theLowercaseCharFilter that does not pass
> > correctOffset() to the underying CharFilter. Does it work better without
> > your LowerCaseCharFilter (which is duplicate because there is already a
> > LowerCaseFilter in the Tokenizer chain).
> >
> > As you are only looking for "c++", just also add a mapping for "C++" and
> > you
> > are done, why lowercasing all because of one char?
> >
> > And what's RosaMappingCharFilter? A pink one? *g*
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> > > -----Original Message-----
> > > From: Weiwei Wang [mailto:ww.wang.cs@gmail.com]
> > > Sent: Sunday, December 13, 2009 12:23 PM
> > > To: java-user@lucene.apache.org
> > > Subject: Re: Recover special terms from StandardTokenizer
> > >
> > > thanks, Uwe.
> > > Maybe i was not very clear. My situation is like this:
> > > Analyzer:
> > >    NormalizeCharMap RECOVERY_MAP = new NormalizeCharMap();
> > >    RECOVERY_MAP.add("c++","cplusplus$");
> > >     CharFilter filter = new LowercaseCharFilter(reader);
> > >     filter = new RosaMappingCharFilter(RECOVERY_MAP,filter);
> > >     StandardTokenizer tokenStream = new
> > > StandardTokenizer(Version.LUCENE_30,
> > > filter);
> > >     tokenStream.setMaxTokenLength(maxTokenLength);
> > >     TokenStream result = new StandardFilter(tokenStream);
> > >     result = getStopFilter(result);
> > >     result = new SnowballFilter(result, STEMMER);
> > > Analyze c++c++, return
> > > (0,9)  [cplusplus]
> > > (10,19)  [cplusplus]
> > > the two numbers in th**e brackets are offsets.
> > >
> > > So in the searching process when i want to hight the search keyword
> c++
> > > with
> > > the same analyzer, exception will be thrown because the string i
> stored
> > > are
> > > c++c++ not cpluspluscplusplus(actually, i should not change the
> original
> > > string when storing them, otherwise it will confuse the users).
> > >
> > > I hope the analyzer can give result like this
> > > (0,3) [cplusplus]
> > > (3,6) [cplusplus]
> > > then the Hilighter will works fine.
> > >
> > > So how can I achieve this result?
> > >
> > > 2009/12/13 Uwe Schindler <uwe@thetaphi.de>
> > >
> > > > MappingCharFilter preserves the offsets in the stream *before*
> > > filtering.
> > > > So
> > > > if you store the original string (without c++ replaced) in a stored
> > > field
> > > > you can highlight using the given offstes. The highlighter must use
> > > again
> > > > the same analyzer or use FastVectorHighlighter.
> > > >
> > > > -----
> > > > Uwe Schindler
> > > > H.-H.-Meier-Allee 63, D-28213 Bremen
> > > > http://www.thetaphi.de
> > > > eMail: uwe@thetaphi.de
> > > >
> > > > > -----Original Message-----
> > > > > From: Weiwei Wang [mailto:ww.wang.cs@gmail.com]
> > > > > Sent: Sunday, December 13, 2009 11:43 AM
> > > > > To: java-user@lucene.apache.org
> > > > > Subject: Re: Recover special terms from StandardTokenizer
> > > > >
> > > > > Problem solved. Now another problem comes.
> > > > >
> > > > >
> > > > > As I want to use Highlighter in my system, the token offset is
> > > incorrect
> > > > > after the MappingCharFilter is used.
> > > > >
> > > > > Koji, do you known how to fix the offset problem?
> > > > >
> > > > > On Sun, Dec 13, 2009 at 11:12 AM, Weiwei Wang
> <ww.wang.cs@gmail.com>
> > > > > wrote:
> > > > >
> > > > > > I use Luke to check the result and find only c exists as a term,
> no
> > > > > > cplusplus found in the index
> > > > > >
> > > > > >
> > > > > > On Sun, Dec 13, 2009 at 10:34 AM, Weiwei Wang
> > > > > <ww.wang.cs@gmail.com>wrote:
> > > > > >
> > > > > >> Thanks, Koji, I followed your advice and change my analyzer as
> > > shown
> > > > > >> below:
> > > > > >> NormalizeCharMap RECOVERY_MAP = new NormalizeCharMap();
> > > > > >> RECOVERY_MAP.add("c++","cplusplus$");
> > > > > >> CharFilter filter = new LowercaseCharFilter(reader);
> > > > > >> filter = new MappingCharFilter(RECOVERY_MAP,filter);
> > > > > >> StandardTokenizer tokenStream = new
> > > > > StandardTokenizer(Version.LUCENE_30,
> > > > > >> filter);
> > > > > >> tokenStream.setMaxTokenLength(maxTokenLength);
> > > > > >> TokenStream result = new StandardFilter(tokenStream);
> > > > > >> result = new LowerCaseFilter(result);
> > > > > >> result = new StopFilter(enableStopPositionIncrements, result,
> > > > stopSet);
> > > > > >> result = new SnowballFilter(result, STEMMER);
> > > > > >>
> > > > > >> I use the same analyzer in the search side. As you know, this
> > > analyzer
> > > > > can
> > > > > >> token c++ as cplusplus, for this reason, it seems I can search
> c++
> > > > with
> > > > > >> the same analyzer because it is also tokenized as cplusplus.
> > > > > >>
> > > > > >> I tested it on as string c++c++, however, when i search c++ on
> the
> > > > > built
> > > > > >> index, nothing is returned.
> > > > > >>
> > > > > >>  I do not know what's wrong with my code. Waiting for your
> replay
> > > > > >>
> > > > > >>
> > > > > >>
> > > > > >>
> > > > > >>
> > > > > >> On Fri, Dec 11, 2009 at 9:43 PM, Weiwei Wang
> > > > > <ww.wang.cs@gmail.com>wrote:
> > > > > >>
> > > > > >>> Thanks, Koji
> > > > > >>>
> > > > > >>>
> > > > > >>> On Fri, Dec 11, 2009 at 7:59 PM, Koji Sekiguchi
> > > > > <koji@r.email.ne.jp>wrote:
> > > > > >>>
> > > > > >>>> MappingCharFilter can be used to convert c++ to cplusplus.
> > > > > >>>>
> > > > > >>>> Koji
> > > > > >>>>
> > > > > >>>> --
> > > > > >>>> http://www.rondhuit.com/en/
> > > > > >>>>
> > > > > >>>>
> > > > > >>>>
> > > > > >>>> Anshum wrote:
> > > > > >>>>
> > > > > >>>>> How about getting the original token stream and then
> converting
> > > c++
> > > > > to
> > > > > >>>>> cplusplus or anyother such transform. Or perhaps you might
> look
> > > at
> > > > > >>>>> using/extending(in the non java sense) some other tokenized!
> > > > > >>>>>
> > > > > >>>>> --
> > > > > >>>>> Anshum Gupta
> > > > > >>>>> Naukri Labs!
> > > > > >>>>> http://ai-cafe.blogspot.com
> > > > > >>>>>
> > > > > >>>>> The facts expressed here belong to everybody, the opinions
> to
> > > me.
> > > > > The
> > > > > >>>>> distinction is yours to draw............
> > > > > >>>>>
> > > > > >>>>>
> > > > > >>>>> On Fri, Dec 11, 2009 at 11:00 AM, Weiwei Wang <
> > > > ww.wang.cs@gmail.com>
> > > > > >>>>> wrote:
> > > > > >>>>>
> > > > > >>>>>
> > > > > >>>>>
> > > > > >>>>>> Hi, all,
> > > > > >>>>>>    I designed a ftp search engine based on Lucene. I did a
> few
> > > > > >>>>>> modifications to the StandardTokenizer.
> > > > > >>>>>> My problem is:
> > > > > >>>>>>  C++ is tokenized as c from StandardTokenizer and I want to
> > > > recover
> > > > > it
> > > > > >>>>>> from
> > > > > >>>>>> the TokenStream from StandardTokenizer
> > > > > >>>>>>
> > > > > >>>>>> What should I do?
> > > > > >>>>>>
> > > > > >>>>>> --
> > > > > >>>>>> Weiwei Wang
> > > > > >>>>>> Alex Wang
> > > > > >>>>>> $B2&V[V[(B
> > > > > >>>>>> Room 403, Mengmin Wei Building
> > > > > >>>>>> Computer Science Department
> > > > > >>>>>> Gulou Campus of Nanjing University
> > > > > >>>>>> Nanjing, P.R.China, 210093
> > > > > >>>>>>
> > > > > >>>>>> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > > > > >>>>>>
> > > > > >>>>>>
> > > > > >>>>>>
> > > > > >>>>>
> > > > > >>>>>
> > > > > >>>>>
> > > > > >>>>
> > > > > >>>>
> > > > > >>>>
> > > > > >>>>
> > > > --------------------------------------------------------------------
> -
> > > > > >>>> To unsubscribe, e-mail: java-user-
> unsubscribe@lucene.apache.org
> > > > > >>>> For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> > > > > >>>>
> > > > > >>>>
> > > > > >>>
> > > > > >>>
> > > > > >>> --
> > > > > >>> Weiwei Wang
> > > > > >>> Alex Wang
> > > > > >>> $B2&V[V[(B
> > > > > >>> Room 403, Mengmin Wei Building
> > > > > >>> Computer Science Department
> > > > > >>> Gulou Campus of Nanjing University
> > > > > >>> Nanjing, P.R.China, 210093
> > > > > >>>
> > > > > >>> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > > > > >>>
> > > > > >>
> > > > > >>
> > > > > >>
> > > > > >> --
> > > > > >> Weiwei Wang
> > > > > >> Alex Wang
> > > > > >> $B2&V[V[(B
> > > > > >> Room 403, Mengmin Wei Building
> > > > > >> Computer Science Department
> > > > > >> Gulou Campus of Nanjing University
> > > > > >> Nanjing, P.R.China, 210093
> > > > > >>
> > > > > >> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > > > > >>
> > > > > >
> > > > > >
> > > > > >
> > > > > > --
> > > > > > Weiwei Wang
> > > > > > Alex Wang
> > > > > > $B2&V[V[(B
> > > > > > Room 403, Mengmin Wei Building
> > > > > > Computer Science Department
> > > > > > Gulou Campus of Nanjing University
> > > > > > Nanjing, P.R.China, 210093
> > > > > >
> > > > > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > > > > >
> > > > >
> > > > >
> > > > >
> > > > > --
> > > > > Weiwei Wang
> > > > > Alex Wang
> > > > > $B2&V[V[(B
> > > > > Room 403, Mengmin Wei Building
> > > > > Computer Science Department
> > > > > Gulou Campus of Nanjing University
> > > > > Nanjing, P.R.China, 210093
> > > > >
> > > > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > > >
> > > >
> > > > --------------------------------------------------------------------
> -
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> > >
> > > --
> > > Weiwei Wang
> > > Alex Wang
> > > $B2&V[V[(B
> > > Room 403, Mengmin Wei Building
> > > Computer Science Department
> > > Gulou Campus of Nanjing University
> > > Nanjing, P.R.China, 210093
> > >
> > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> 
> --
> Weiwei Wang
> Alex Wang
> $B2&V[V[(B
> Room 403, Mengmin Wei Building
> Computer Science Department
> Gulou Campus of Nanjing University
> Nanjing, P.R.China, 210093
> 
> Homepage: http://cs.nju.edu.cn/rl/weiweiwang


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 13 13:38:38 2009
Return-Path: <java-user-return-44072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40861 invoked from network); 13 Dec 2009 13:38:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Dec 2009 13:38:38 -0000
Received: (qmail 638 invoked by uid 500); 13 Dec 2009 13:38:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 548 invoked by uid 500); 13 Dec 2009 13:38:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 538 invoked by uid 99); 13 Dec 2009 13:38:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Dec 2009 13:38:35 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.210.192 as permitted sender)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Dec 2009 13:38:24 +0000
Received: by yxe30 with SMTP id 30so2454862yxe.29
        for <java-user@lucene.apache.org>; Sun, 13 Dec 2009 05:38:03 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=o2F1WxHv+aqVCOl64UKpOYwToSLvPvMH0voRVn+GDB8=;
        b=X+Y3VXuqSEW2HDR5KBNxVIEMgDiXD8geqbgjoMNh+sraTDv10NtGc7C2jIq+tDfp0a
         vcr/WmDrFnB9iy4BA2kHXp69l5vBOZjmjVa8cAJxOrrT1eVw8U+ys5fhjkg90xBOh6Ll
         OyLgYRrhS9t4+SClQJQBQcrppQPcdgqDG4iaE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Jefv+3qLFAimbmeFQZE8eCsqOWA7vs1sKHiHDupthhEH9rAt/lFhaIaTcx+GkbyKZn
         hKt+4Ss6amnSJV6ZL4wBVaHHghCyEq3Q2DBWdTuemq5XRgqHazDtRWmox3iETNOTo721
         u8qN14sTlD/WYOfFUoV7sryxo7bGqoJiLUe0M=
MIME-Version: 1.0
Received: by 10.91.161.26 with SMTP id n26mr841505ago.88.1260711482921; Sun, 
	13 Dec 2009 05:38:02 -0800 (PST)
In-Reply-To: <19A1BCCC31934B8E88AA34C2DA38F139@VEGA>
References: <7d94dcde0912102130u214d4a87r18b97575e223b521@mail.gmail.com>
	 <7d94dcde0912110543y63729d5eo14e6be2b992121b@mail.gmail.com>
	 <7d94dcde0912121834l14d3b3acmff09dbcf5e7114d1@mail.gmail.com>
	 <7d94dcde0912121912r4496b28cv261089aa1ba94f79@mail.gmail.com>
	 <7d94dcde0912130242q38a50c5frcf8b0124fcaf4a91@mail.gmail.com>
	 <8321DA8EE5DF498A838FC1696CB5E359@VEGA>
	 <7d94dcde0912130322l73284a1ay3b8345c3eefdf10f@mail.gmail.com>
	 <3E2DC705894D4E199EED0A9F45BF8EA2@VEGA>
	 <7d94dcde0912130350u7ace7489i20a7f9f28a6de917@mail.gmail.com>
	 <19A1BCCC31934B8E88AA34C2DA38F139@VEGA>
Date: Sun, 13 Dec 2009 21:38:02 +0800
Message-ID: <7d94dcde0912130538h59411aa0xe1daecc4d84debb8@mail.gmail.com>
Subject: Re: Recover special terms from StandardTokenizer
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f9a8101a957b047a9c44dc
X-Virus-Checked: Checked by ClamAV on apache.org

--001485f9a8101a957b047a9c44dc
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Thank you very much, Uwe, I found the problem.

2009/12/13 Uwe Schindler <uwe@thetaphi.de>

> MappingCharFilter definitely preserves the offsets from the original
> reader.
> Yo can verify that for your case with Lucene=E2=80=99s testcase
> TestMappingCharFilter in the source distribution @
> /src/test/org/apache/lucene/analysis/TestMappingCharFilter.java:
>
> public void test2to4() throws Exception {
>  CharStream cs =3D new MappingCharFilter( normMap, new StringReader( "ll"=
 )
> );
>  TokenStream ts =3D new WhitespaceTokenizer( cs );
>  assertTokenStreamContents(ts, new String[]{"llll"}, new int[]{0}, new
> int[]
> {2});
> }
>
> So there is everything correct. I tried this test also with
> StandrdTokenizer
> instead of WhiteSpaceTokenizer - it works and asserts the correct offsets=
.
> You should debug through the incrementToken()/CharFilter calls and verify
> where your offsets change.
>
> I cannot help more.
>
> Uwe
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
> > -----Original Message-----
> > From: Weiwei Wang [mailto:ww.wang.cs@gmail.com]
> > Sent: Sunday, December 13, 2009 12:51 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: Recover special terms from StandardTokenizer
> >
> > LowercaseCharFilter is necessary, as in the MappingCharFilter we need t=
o
> > provide a NormalizeCharMap. We lowercase the stream so as we only provi=
de
> > lowercase maps in the NormalizeCharMap, e.g. we provide map
> > (c++-->cplusplus) instead of (c++-->cplusplus) and (C++-->cplusplus).
> >
> > C++ is only an example we want to fix, in the future we may add more su=
ch
> > special terms
> >
> > the code for LowercaseCharFilter is as follows:
> > package analysis;
> >
> > import java.io.IOException;
> > import java.io.Reader;
> >
> > import org.apache.lucene.analysis.BaseCharFilter;
> > import org.apache.lucene.analysis.CharReader;
> > import org.apache.lucene.analysis.CharStream;
> >
> >
> > public class LowercaseCharFilter extends BaseCharFilter
> > {
> >
> >     public LowercaseCharFilter(CharStream in)
> >     {
> >     super(in);
> >     }
> >
> >     public LowercaseCharFilter(Reader in)
> >     {
> >     super(CharReader.get(in));
> >     }
> >     @Override
> >     public int read() throws IOException
> >     {
> >     return Character.toLowerCase(input.read());
> >     }
> >     @Override
> >     public int read(char[] cbuf, int off, int len) throws IOException {
> >     int ret =3D input.read(cbuf, off, len);
> >     if(ret!=3D-1)
> >     {
> >         for(int i=3Doff; i<off+ret; i++)
> >         cbuf[i] =3D Character.toLowerCase(cbuf[i]);
> >     }
> >     return ret;
> >     }
> > }
> >
> >
> > Currently RosaMappingCharFilter is inherited from MappingCharFilter and
> > nothing is changed(i was planning to override addOffCorrectMap to fix m=
y
> > problem, but it didn't work)
> >
> >
> > 2009/12/13 Uwe Schindler <uwe@thetaphi.de>
> >
> > > I think your problem is theLowercaseCharFilter that does not pass
> > > correctOffset() to the underying CharFilter. Does it work better
> without
> > > your LowerCaseCharFilter (which is duplicate because there is already=
 a
> > > LowerCaseFilter in the Tokenizer chain).
> > >
> > > As you are only looking for "c++", just also add a mapping for "C++"
> and
> > > you
> > > are done, why lowercasing all because of one char?
> > >
> > > And what's RosaMappingCharFilter? A pink one? *g*
> > >
> > > -----
> > > Uwe Schindler
> > > H.-H.-Meier-Allee 63, D-28213 Bremen
> > > http://www.thetaphi.de
> > > eMail: uwe@thetaphi.de
> > >
> > > > -----Original Message-----
> > > > From: Weiwei Wang [mailto:ww.wang.cs@gmail.com]
> > > > Sent: Sunday, December 13, 2009 12:23 PM
> > > > To: java-user@lucene.apache.org
> > > > Subject: Re: Recover special terms from StandardTokenizer
> > > >
> > > > thanks, Uwe.
> > > > Maybe i was not very clear. My situation is like this:
> > > > Analyzer:
> > > >    NormalizeCharMap RECOVERY_MAP =3D new NormalizeCharMap();
> > > >    RECOVERY_MAP.add("c++","cplusplus$");
> > > >     CharFilter filter =3D new LowercaseCharFilter(reader);
> > > >     filter =3D new RosaMappingCharFilter(RECOVERY_MAP,filter);
> > > >     StandardTokenizer tokenStream =3D new
> > > > StandardTokenizer(Version.LUCENE_30,
> > > > filter);
> > > >     tokenStream.setMaxTokenLength(maxTokenLength);
> > > >     TokenStream result =3D new StandardFilter(tokenStream);
> > > >     result =3D getStopFilter(result);
> > > >     result =3D new SnowballFilter(result, STEMMER);
> > > > Analyze c++c++, return
> > > > (0,9)  [cplusplus]
> > > > (10,19)  [cplusplus]
> > > > the two numbers in th**e brackets are offsets.
> > > >
> > > > So in the searching process when i want to hight the search keyword
> > c++
> > > > with
> > > > the same analyzer, exception will be thrown because the string i
> > stored
> > > > are
> > > > c++c++ not cpluspluscplusplus(actually, i should not change the
> > original
> > > > string when storing them, otherwise it will confuse the users).
> > > >
> > > > I hope the analyzer can give result like this
> > > > (0,3) [cplusplus]
> > > > (3,6) [cplusplus]
> > > > then the Hilighter will works fine.
> > > >
> > > > So how can I achieve this result?
> > > >
> > > > 2009/12/13 Uwe Schindler <uwe@thetaphi.de>
> > > >
> > > > > MappingCharFilter preserves the offsets in the stream *before*
> > > > filtering.
> > > > > So
> > > > > if you store the original string (without c++ replaced) in a stor=
ed
> > > > field
> > > > > you can highlight using the given offstes. The highlighter must u=
se
> > > > again
> > > > > the same analyzer or use FastVectorHighlighter.
> > > > >
> > > > > -----
> > > > > Uwe Schindler
> > > > > H.-H.-Meier-Allee 63, D-28213 Bremen
> > > > > http://www.thetaphi.de
> > > > > eMail: uwe@thetaphi.de
> > > > >
> > > > > > -----Original Message-----
> > > > > > From: Weiwei Wang [mailto:ww.wang.cs@gmail.com]
> > > > > > Sent: Sunday, December 13, 2009 11:43 AM
> > > > > > To: java-user@lucene.apache.org
> > > > > > Subject: Re: Recover special terms from StandardTokenizer
> > > > > >
> > > > > > Problem solved. Now another problem comes.
> > > > > >
> > > > > >
> > > > > > As I want to use Highlighter in my system, the token offset is
> > > > incorrect
> > > > > > after the MappingCharFilter is used.
> > > > > >
> > > > > > Koji, do you known how to fix the offset problem?
> > > > > >
> > > > > > On Sun, Dec 13, 2009 at 11:12 AM, Weiwei Wang
> > <ww.wang.cs@gmail.com>
> > > > > > wrote:
> > > > > >
> > > > > > > I use Luke to check the result and find only c exists as a
> term,
> > no
> > > > > > > cplusplus found in the index
> > > > > > >
> > > > > > >
> > > > > > > On Sun, Dec 13, 2009 at 10:34 AM, Weiwei Wang
> > > > > > <ww.wang.cs@gmail.com>wrote:
> > > > > > >
> > > > > > >> Thanks, Koji, I followed your advice and change my analyzer =
as
> > > > shown
> > > > > > >> below:
> > > > > > >> NormalizeCharMap RECOVERY_MAP =3D new NormalizeCharMap();
> > > > > > >> RECOVERY_MAP.add("c++","cplusplus$");
> > > > > > >> CharFilter filter =3D new LowercaseCharFilter(reader);
> > > > > > >> filter =3D new MappingCharFilter(RECOVERY_MAP,filter);
> > > > > > >> StandardTokenizer tokenStream =3D new
> > > > > > StandardTokenizer(Version.LUCENE_30,
> > > > > > >> filter);
> > > > > > >> tokenStream.setMaxTokenLength(maxTokenLength);
> > > > > > >> TokenStream result =3D new StandardFilter(tokenStream);
> > > > > > >> result =3D new LowerCaseFilter(result);
> > > > > > >> result =3D new StopFilter(enableStopPositionIncrements, resu=
lt,
> > > > > stopSet);
> > > > > > >> result =3D new SnowballFilter(result, STEMMER);
> > > > > > >>
> > > > > > >> I use the same analyzer in the search side. As you know, thi=
s
> > > > analyzer
> > > > > > can
> > > > > > >> token c++ as cplusplus, for this reason, it seems I can sear=
ch
> > c++
> > > > > with
> > > > > > >> the same analyzer because it is also tokenized as cplusplus.
> > > > > > >>
> > > > > > >> I tested it on as string c++c++, however, when i search c++ =
on
> > the
> > > > > > built
> > > > > > >> index, nothing is returned.
> > > > > > >>
> > > > > > >>  I do not know what's wrong with my code. Waiting for your
> > replay
> > > > > > >>
> > > > > > >>
> > > > > > >>
> > > > > > >>
> > > > > > >>
> > > > > > >> On Fri, Dec 11, 2009 at 9:43 PM, Weiwei Wang
> > > > > > <ww.wang.cs@gmail.com>wrote:
> > > > > > >>
> > > > > > >>> Thanks, Koji
> > > > > > >>>
> > > > > > >>>
> > > > > > >>> On Fri, Dec 11, 2009 at 7:59 PM, Koji Sekiguchi
> > > > > > <koji@r.email.ne.jp>wrote:
> > > > > > >>>
> > > > > > >>>> MappingCharFilter can be used to convert c++ to cplusplus.
> > > > > > >>>>
> > > > > > >>>> Koji
> > > > > > >>>>
> > > > > > >>>> --
> > > > > > >>>> http://www.rondhuit.com/en/
> > > > > > >>>>
> > > > > > >>>>
> > > > > > >>>>
> > > > > > >>>> Anshum wrote:
> > > > > > >>>>
> > > > > > >>>>> How about getting the original token stream and then
> > converting
> > > > c++
> > > > > > to
> > > > > > >>>>> cplusplus or anyother such transform. Or perhaps you migh=
t
> > look
> > > > at
> > > > > > >>>>> using/extending(in the non java sense) some other
> tokenized!
> > > > > > >>>>>
> > > > > > >>>>> --
> > > > > > >>>>> Anshum Gupta
> > > > > > >>>>> Naukri Labs!
> > > > > > >>>>> http://ai-cafe.blogspot.com
> > > > > > >>>>>
> > > > > > >>>>> The facts expressed here belong to everybody, the opinion=
s
> > to
> > > > me.
> > > > > > The
> > > > > > >>>>> distinction is yours to draw............
> > > > > > >>>>>
> > > > > > >>>>>
> > > > > > >>>>> On Fri, Dec 11, 2009 at 11:00 AM, Weiwei Wang <
> > > > > ww.wang.cs@gmail.com>
> > > > > > >>>>> wrote:
> > > > > > >>>>>
> > > > > > >>>>>
> > > > > > >>>>>
> > > > > > >>>>>> Hi, all,
> > > > > > >>>>>>    I designed a ftp search engine based on Lucene. I did=
 a
> > few
> > > > > > >>>>>> modifications to the StandardTokenizer.
> > > > > > >>>>>> My problem is:
> > > > > > >>>>>>  C++ is tokenized as c from StandardTokenizer and I want
> to
> > > > > recover
> > > > > > it
> > > > > > >>>>>> from
> > > > > > >>>>>> the TokenStream from StandardTokenizer
> > > > > > >>>>>>
> > > > > > >>>>>> What should I do?
> > > > > > >>>>>>
> > > > > > >>>>>> --
> > > > > > >>>>>> Weiwei Wang
> > > > > > >>>>>> Alex Wang
> > > > > > >>>>>> =E7=8E=8B=E5=B7=8D=E5=B7=8D
> > > > > > >>>>>> Room 403, Mengmin Wei Building
> > > > > > >>>>>> Computer Science Department
> > > > > > >>>>>> Gulou Campus of Nanjing University
> > > > > > >>>>>> Nanjing, P.R.China, 210093
> > > > > > >>>>>>
> > > > > > >>>>>> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > > > > > >>>>>>
> > > > > > >>>>>>
> > > > > > >>>>>>
> > > > > > >>>>>
> > > > > > >>>>>
> > > > > > >>>>>
> > > > > > >>>>
> > > > > > >>>>
> > > > > > >>>>
> > > > > > >>>>
> > > > >
> --------------------------------------------------------------------
> > -
> > > > > > >>>> To unsubscribe, e-mail: java-user-
> > unsubscribe@lucene.apache.org
> > > > > > >>>> For additional commands, e-mail:
> > > java-user-help@lucene.apache.org
> > > > > > >>>>
> > > > > > >>>>
> > > > > > >>>
> > > > > > >>>
> > > > > > >>> --
> > > > > > >>> Weiwei Wang
> > > > > > >>> Alex Wang
> > > > > > >>> =E7=8E=8B=E5=B7=8D=E5=B7=8D
> > > > > > >>> Room 403, Mengmin Wei Building
> > > > > > >>> Computer Science Department
> > > > > > >>> Gulou Campus of Nanjing University
> > > > > > >>> Nanjing, P.R.China, 210093
> > > > > > >>>
> > > > > > >>> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > > > > > >>>
> > > > > > >>
> > > > > > >>
> > > > > > >>
> > > > > > >> --
> > > > > > >> Weiwei Wang
> > > > > > >> Alex Wang
> > > > > > >> =E7=8E=8B=E5=B7=8D=E5=B7=8D
> > > > > > >> Room 403, Mengmin Wei Building
> > > > > > >> Computer Science Department
> > > > > > >> Gulou Campus of Nanjing University
> > > > > > >> Nanjing, P.R.China, 210093
> > > > > > >>
> > > > > > >> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > > > > > >>
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > > --
> > > > > > > Weiwei Wang
> > > > > > > Alex Wang
> > > > > > > =E7=8E=8B=E5=B7=8D=E5=B7=8D
> > > > > > > Room 403, Mengmin Wei Building
> > > > > > > Computer Science Department
> > > > > > > Gulou Campus of Nanjing University
> > > > > > > Nanjing, P.R.China, 210093
> > > > > > >
> > > > > > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > > --
> > > > > > Weiwei Wang
> > > > > > Alex Wang
> > > > > > =E7=8E=8B=E5=B7=8D=E5=B7=8D
> > > > > > Room 403, Mengmin Wei Building
> > > > > > Computer Science Department
> > > > > > Gulou Campus of Nanjing University
> > > > > > Nanjing, P.R.China, 210093
> > > > > >
> > > > > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > > > >
> > > > >
> > > > >
> --------------------------------------------------------------------
> > -
> > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > > >
> > > > >
> > > >
> > > >
> > > > --
> > > > Weiwei Wang
> > > > Alex Wang
> > > > =E7=8E=8B=E5=B7=8D=E5=B7=8D
> > > > Room 403, Mengmin Wei Building
> > > > Computer Science Department
> > > > Gulou Campus of Nanjing University
> > > > Nanjing, P.R.China, 210093
> > > >
> > > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > --
> > Weiwei Wang
> > Alex Wang
> > =E7=8E=8B=E5=B7=8D=E5=B7=8D
> > Room 403, Mengmin Wei Building
> > Computer Science Department
> > Gulou Campus of Nanjing University
> > Nanjing, P.R.China, 210093
> >
> > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--001485f9a8101a957b047a9c44dc--

From java-user-return-44073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 13 13:46:55 2009
Return-Path: <java-user-return-44073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46861 invoked from network); 13 Dec 2009 13:46:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Dec 2009 13:46:55 -0000
Received: (qmail 6764 invoked by uid 500); 13 Dec 2009 13:46:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6658 invoked by uid 500); 13 Dec 2009 13:46:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6648 invoked by uid 99); 13 Dec 2009 13:46:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Dec 2009 13:46:52 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.211.185 as permitted sender)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Dec 2009 13:46:49 +0000
Received: by ywh15 with SMTP id 15so2284843ywh.5
        for <java-user@lucene.apache.org>; Sun, 13 Dec 2009 05:46:28 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=uLjl0fo/nEeWbAyM8uFURpYrMN5v1U4fGqJS6kgSW8g=;
        b=alnoySjy0P4J9Z0gEBi1HP3dWYbifFeiru038gWsp74dO/rzmTxnPAVRMxC0tp7c9c
         yi6PxVbFgUNyVFyyF0f5Y8CMM89I1GyRCkhCIZSDsVBCIVOH/LHcXhoOgM04M4mGCMjQ
         PW/SxRya6lmF6yvwET6rUhdtRZG44+j674Ioc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Z8c7BGrKvWwcFFnLymnEo458voIhKlcGdd519SQmPjI3lenFbrP114eHXAaJgMdqTU
         a6nMoSE23FWCRYwfGm7/hiHB6ZTdN1VbDUS0SKYp1HD4zFK2Lkf/LOchSuCn9bKl4Tz2
         guHS01SBZzZpMc+3qw8hlEps+4F7LhorCSKWY=
MIME-Version: 1.0
Received: by 10.91.32.19 with SMTP id k19mr3667034agj.30.1260711987885; Sun, 
	13 Dec 2009 05:46:27 -0800 (PST)
In-Reply-To: <7d94dcde0912130538h59411aa0xe1daecc4d84debb8@mail.gmail.com>
References: <7d94dcde0912102130u214d4a87r18b97575e223b521@mail.gmail.com>
	 <7d94dcde0912121834l14d3b3acmff09dbcf5e7114d1@mail.gmail.com>
	 <7d94dcde0912121912r4496b28cv261089aa1ba94f79@mail.gmail.com>
	 <7d94dcde0912130242q38a50c5frcf8b0124fcaf4a91@mail.gmail.com>
	 <8321DA8EE5DF498A838FC1696CB5E359@VEGA>
	 <7d94dcde0912130322l73284a1ay3b8345c3eefdf10f@mail.gmail.com>
	 <3E2DC705894D4E199EED0A9F45BF8EA2@VEGA>
	 <7d94dcde0912130350u7ace7489i20a7f9f28a6de917@mail.gmail.com>
	 <19A1BCCC31934B8E88AA34C2DA38F139@VEGA>
	 <7d94dcde0912130538h59411aa0xe1daecc4d84debb8@mail.gmail.com>
Date: Sun, 13 Dec 2009 21:46:27 +0800
Message-ID: <7d94dcde0912130546t4f15a4f3jd74a20a617581d1a@mail.gmail.com>
Subject: Re: Recover special terms from StandardTokenizer
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f7c5ae33b8fb047a9c627a

--001485f7c5ae33b8fb047a9c627a
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Another problem

how to deal with c++c++ or c++abc using MappingCharFilter

i use a NormalizeMap("c++","cplusplus"), the analyzed result will be
cpluspluscplusplus or cplusplusabc wich is not what i want

if i use a NormalizeMap("c++","cplusplus$"), the offset will not be correct=
.



On Sun, Dec 13, 2009 at 9:38 PM, Weiwei Wang <ww.wang.cs@gmail.com> wrote:

> Thank you very much, Uwe, I found the problem.
>
>
> 2009/12/13 Uwe Schindler <uwe@thetaphi.de>
>
>> MappingCharFilter definitely preserves the offsets from the original
>> reader.
>> Yo can verify that for your case with Lucene=E2=80=99s testcase
>> TestMappingCharFilter in the source distribution @
>> /src/test/org/apache/lucene/analysis/TestMappingCharFilter.java:
>>
>> public void test2to4() throws Exception {
>>  CharStream cs =3D new MappingCharFilter( normMap, new StringReader( "ll=
" )
>> );
>>  TokenStream ts =3D new WhitespaceTokenizer( cs );
>>  assertTokenStreamContents(ts, new String[]{"llll"}, new int[]{0}, new
>> int[]
>> {2});
>> }
>>
>> So there is everything correct. I tried this test also with
>> StandrdTokenizer
>> instead of WhiteSpaceTokenizer - it works and asserts the correct offset=
s.
>> You should debug through the incrementToken()/CharFilter calls and verif=
y
>> where your offsets change.
>>
>> I cannot help more.
>>
>> Uwe
>>
>> -----
>> Uwe Schindler
>> H.-H.-Meier-Allee 63, D-28213 Bremen
>> http://www.thetaphi.de
>> eMail: uwe@thetaphi.de
>>
>> > -----Original Message-----
>> > From: Weiwei Wang [mailto:ww.wang.cs@gmail.com]
>> > Sent: Sunday, December 13, 2009 12:51 PM
>> > To: java-user@lucene.apache.org
>> > Subject: Re: Recover special terms from StandardTokenizer
>> >
>> > LowercaseCharFilter is necessary, as in the MappingCharFilter we need =
to
>> > provide a NormalizeCharMap. We lowercase the stream so as we only
>> provide
>> > lowercase maps in the NormalizeCharMap, e.g. we provide map
>> > (c++-->cplusplus) instead of (c++-->cplusplus) and (C++-->cplusplus).
>> >
>> > C++ is only an example we want to fix, in the future we may add more
>> such
>> > special terms
>> >
>> > the code for LowercaseCharFilter is as follows:
>> > package analysis;
>> >
>> > import java.io.IOException;
>> > import java.io.Reader;
>> >
>> > import org.apache.lucene.analysis.BaseCharFilter;
>> > import org.apache.lucene.analysis.CharReader;
>> > import org.apache.lucene.analysis.CharStream;
>> >
>> >
>> > public class LowercaseCharFilter extends BaseCharFilter
>> > {
>> >
>> >     public LowercaseCharFilter(CharStream in)
>> >     {
>> >     super(in);
>> >     }
>> >
>> >     public LowercaseCharFilter(Reader in)
>> >     {
>> >     super(CharReader.get(in));
>> >     }
>> >     @Override
>> >     public int read() throws IOException
>> >     {
>> >     return Character.toLowerCase(input.read());
>> >     }
>> >     @Override
>> >     public int read(char[] cbuf, int off, int len) throws IOException =
{
>> >     int ret =3D input.read(cbuf, off, len);
>> >     if(ret!=3D-1)
>> >     {
>> >         for(int i=3Doff; i<off+ret; i++)
>> >         cbuf[i] =3D Character.toLowerCase(cbuf[i]);
>> >     }
>> >     return ret;
>> >     }
>> > }
>> >
>> >
>> > Currently RosaMappingCharFilter is inherited from MappingCharFilter an=
d
>> > nothing is changed(i was planning to override addOffCorrectMap to fix =
my
>> > problem, but it didn't work)
>> >
>> >
>> > 2009/12/13 Uwe Schindler <uwe@thetaphi.de>
>> >
>> > > I think your problem is theLowercaseCharFilter that does not pass
>> > > correctOffset() to the underying CharFilter. Does it work better
>> without
>> > > your LowerCaseCharFilter (which is duplicate because there is alread=
y
>> a
>> > > LowerCaseFilter in the Tokenizer chain).
>> > >
>> > > As you are only looking for "c++", just also add a mapping for "C++"
>> and
>> > > you
>> > > are done, why lowercasing all because of one char?
>> > >
>> > > And what's RosaMappingCharFilter? A pink one? *g*
>> > >
>> > > -----
>> > > Uwe Schindler
>> > > H.-H.-Meier-Allee 63, D-28213 Bremen
>> > > http://www.thetaphi.de
>> > > eMail: uwe@thetaphi.de
>> > >
>> > > > -----Original Message-----
>> > > > From: Weiwei Wang [mailto:ww.wang.cs@gmail.com]
>> > > > Sent: Sunday, December 13, 2009 12:23 PM
>> > > > To: java-user@lucene.apache.org
>> > > > Subject: Re: Recover special terms from StandardTokenizer
>> > > >
>> > > > thanks, Uwe.
>> > > > Maybe i was not very clear. My situation is like this:
>> > > > Analyzer:
>> > > >    NormalizeCharMap RECOVERY_MAP =3D new NormalizeCharMap();
>> > > >    RECOVERY_MAP.add("c++","cplusplus$");
>> > > >     CharFilter filter =3D new LowercaseCharFilter(reader);
>> > > >     filter =3D new RosaMappingCharFilter(RECOVERY_MAP,filter);
>> > > >     StandardTokenizer tokenStream =3D new
>> > > > StandardTokenizer(Version.LUCENE_30,
>> > > > filter);
>> > > >     tokenStream.setMaxTokenLength(maxTokenLength);
>> > > >     TokenStream result =3D new StandardFilter(tokenStream);
>> > > >     result =3D getStopFilter(result);
>> > > >     result =3D new SnowballFilter(result, STEMMER);
>> > > > Analyze c++c++, return
>> > > > (0,9)  [cplusplus]
>> > > > (10,19)  [cplusplus]
>> > > > the two numbers in th**e brackets are offsets.
>> > > >
>> > > > So in the searching process when i want to hight the search keywor=
d
>> > c++
>> > > > with
>> > > > the same analyzer, exception will be thrown because the string i
>> > stored
>> > > > are
>> > > > c++c++ not cpluspluscplusplus(actually, i should not change the
>> > original
>> > > > string when storing them, otherwise it will confuse the users).
>> > > >
>> > > > I hope the analyzer can give result like this
>> > > > (0,3) [cplusplus]
>> > > > (3,6) [cplusplus]
>> > > > then the Hilighter will works fine.
>> > > >
>> > > > So how can I achieve this result?
>> > > >
>> > > > 2009/12/13 Uwe Schindler <uwe@thetaphi.de>
>> > > >
>> > > > > MappingCharFilter preserves the offsets in the stream *before*
>> > > > filtering.
>> > > > > So
>> > > > > if you store the original string (without c++ replaced) in a
>> stored
>> > > > field
>> > > > > you can highlight using the given offstes. The highlighter must
>> use
>> > > > again
>> > > > > the same analyzer or use FastVectorHighlighter.
>> > > > >
>> > > > > -----
>> > > > > Uwe Schindler
>> > > > > H.-H.-Meier-Allee 63, D-28213 Bremen
>> > > > > http://www.thetaphi.de
>> > > > > eMail: uwe@thetaphi.de
>> > > > >
>> > > > > > -----Original Message-----
>> > > > > > From: Weiwei Wang [mailto:ww.wang.cs@gmail.com]
>> > > > > > Sent: Sunday, December 13, 2009 11:43 AM
>> > > > > > To: java-user@lucene.apache.org
>> > > > > > Subject: Re: Recover special terms from StandardTokenizer
>> > > > > >
>> > > > > > Problem solved. Now another problem comes.
>> > > > > >
>> > > > > >
>> > > > > > As I want to use Highlighter in my system, the token offset is
>> > > > incorrect
>> > > > > > after the MappingCharFilter is used.
>> > > > > >
>> > > > > > Koji, do you known how to fix the offset problem?
>> > > > > >
>> > > > > > On Sun, Dec 13, 2009 at 11:12 AM, Weiwei Wang
>> > <ww.wang.cs@gmail.com>
>> > > > > > wrote:
>> > > > > >
>> > > > > > > I use Luke to check the result and find only c exists as a
>> term,
>> > no
>> > > > > > > cplusplus found in the index
>> > > > > > >
>> > > > > > >
>> > > > > > > On Sun, Dec 13, 2009 at 10:34 AM, Weiwei Wang
>> > > > > > <ww.wang.cs@gmail.com>wrote:
>> > > > > > >
>> > > > > > >> Thanks, Koji, I followed your advice and change my analyzer
>> as
>> > > > shown
>> > > > > > >> below:
>> > > > > > >> NormalizeCharMap RECOVERY_MAP =3D new NormalizeCharMap();
>> > > > > > >> RECOVERY_MAP.add("c++","cplusplus$");
>> > > > > > >> CharFilter filter =3D new LowercaseCharFilter(reader);
>> > > > > > >> filter =3D new MappingCharFilter(RECOVERY_MAP,filter);
>> > > > > > >> StandardTokenizer tokenStream =3D new
>> > > > > > StandardTokenizer(Version.LUCENE_30,
>> > > > > > >> filter);
>> > > > > > >> tokenStream.setMaxTokenLength(maxTokenLength);
>> > > > > > >> TokenStream result =3D new StandardFilter(tokenStream);
>> > > > > > >> result =3D new LowerCaseFilter(result);
>> > > > > > >> result =3D new StopFilter(enableStopPositionIncrements, res=
ult,
>> > > > > stopSet);
>> > > > > > >> result =3D new SnowballFilter(result, STEMMER);
>> > > > > > >>
>> > > > > > >> I use the same analyzer in the search side. As you know, th=
is
>> > > > analyzer
>> > > > > > can
>> > > > > > >> token c++ as cplusplus, for this reason, it seems I can
>> search
>> > c++
>> > > > > with
>> > > > > > >> the same analyzer because it is also tokenized as cplusplus=
.
>> > > > > > >>
>> > > > > > >> I tested it on as string c++c++, however, when i search c++
>> on
>> > the
>> > > > > > built
>> > > > > > >> index, nothing is returned.
>> > > > > > >>
>> > > > > > >>  I do not know what's wrong with my code. Waiting for your
>> > replay
>> > > > > > >>
>> > > > > > >>
>> > > > > > >>
>> > > > > > >>
>> > > > > > >>
>> > > > > > >> On Fri, Dec 11, 2009 at 9:43 PM, Weiwei Wang
>> > > > > > <ww.wang.cs@gmail.com>wrote:
>> > > > > > >>
>> > > > > > >>> Thanks, Koji
>> > > > > > >>>
>> > > > > > >>>
>> > > > > > >>> On Fri, Dec 11, 2009 at 7:59 PM, Koji Sekiguchi
>> > > > > > <koji@r.email.ne.jp>wrote:
>> > > > > > >>>
>> > > > > > >>>> MappingCharFilter can be used to convert c++ to cplusplus=
.
>> > > > > > >>>>
>> > > > > > >>>> Koji
>> > > > > > >>>>
>> > > > > > >>>> --
>> > > > > > >>>> http://www.rondhuit.com/en/
>> > > > > > >>>>
>> > > > > > >>>>
>> > > > > > >>>>
>> > > > > > >>>> Anshum wrote:
>> > > > > > >>>>
>> > > > > > >>>>> How about getting the original token stream and then
>> > converting
>> > > > c++
>> > > > > > to
>> > > > > > >>>>> cplusplus or anyother such transform. Or perhaps you mig=
ht
>> > look
>> > > > at
>> > > > > > >>>>> using/extending(in the non java sense) some other
>> tokenized!
>> > > > > > >>>>>
>> > > > > > >>>>> --
>> > > > > > >>>>> Anshum Gupta
>> > > > > > >>>>> Naukri Labs!
>> > > > > > >>>>> http://ai-cafe.blogspot.com
>> > > > > > >>>>>
>> > > > > > >>>>> The facts expressed here belong to everybody, the opinio=
ns
>> > to
>> > > > me.
>> > > > > > The
>> > > > > > >>>>> distinction is yours to draw............
>> > > > > > >>>>>
>> > > > > > >>>>>
>> > > > > > >>>>> On Fri, Dec 11, 2009 at 11:00 AM, Weiwei Wang <
>> > > > > ww.wang.cs@gmail.com>
>> > > > > > >>>>> wrote:
>> > > > > > >>>>>
>> > > > > > >>>>>
>> > > > > > >>>>>
>> > > > > > >>>>>> Hi, all,
>> > > > > > >>>>>>    I designed a ftp search engine based on Lucene. I di=
d
>> a
>> > few
>> > > > > > >>>>>> modifications to the StandardTokenizer.
>> > > > > > >>>>>> My problem is:
>> > > > > > >>>>>>  C++ is tokenized as c from StandardTokenizer and I wan=
t
>> to
>> > > > > recover
>> > > > > > it
>> > > > > > >>>>>> from
>> > > > > > >>>>>> the TokenStream from StandardTokenizer
>> > > > > > >>>>>>
>> > > > > > >>>>>> What should I do?
>> > > > > > >>>>>>
>> > > > > > >>>>>> --
>> > > > > > >>>>>> Weiwei Wang
>> > > > > > >>>>>> Alex Wang
>> > > > > > >>>>>> =E7=8E=8B=E5=B7=8D=E5=B7=8D
>> > > > > > >>>>>> Room 403, Mengmin Wei Building
>> > > > > > >>>>>> Computer Science Department
>> > > > > > >>>>>> Gulou Campus of Nanjing University
>> > > > > > >>>>>> Nanjing, P.R.China, 210093
>> > > > > > >>>>>>
>> > > > > > >>>>>> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>> > > > > > >>>>>>
>> > > > > > >>>>>>
>> > > > > > >>>>>>
>> > > > > > >>>>>
>> > > > > > >>>>>
>> > > > > > >>>>>
>> > > > > > >>>>
>> > > > > > >>>>
>> > > > > > >>>>
>> > > > > > >>>>
>> > > > >
>> --------------------------------------------------------------------
>> > -
>> > > > > > >>>> To unsubscribe, e-mail: java-user-
>> > unsubscribe@lucene.apache.org
>> > > > > > >>>> For additional commands, e-mail:
>> > > java-user-help@lucene.apache.org
>> > > > > > >>>>
>> > > > > > >>>>
>> > > > > > >>>
>> > > > > > >>>
>> > > > > > >>> --
>> > > > > > >>> Weiwei Wang
>> > > > > > >>> Alex Wang
>> > > > > > >>> =E7=8E=8B=E5=B7=8D=E5=B7=8D
>> > > > > > >>> Room 403, Mengmin Wei Building
>> > > > > > >>> Computer Science Department
>> > > > > > >>> Gulou Campus of Nanjing University
>> > > > > > >>> Nanjing, P.R.China, 210093
>> > > > > > >>>
>> > > > > > >>> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>> > > > > > >>>
>> > > > > > >>
>> > > > > > >>
>> > > > > > >>
>> > > > > > >> --
>> > > > > > >> Weiwei Wang
>> > > > > > >> Alex Wang
>> > > > > > >> =E7=8E=8B=E5=B7=8D=E5=B7=8D
>> > > > > > >> Room 403, Mengmin Wei Building
>> > > > > > >> Computer Science Department
>> > > > > > >> Gulou Campus of Nanjing University
>> > > > > > >> Nanjing, P.R.China, 210093
>> > > > > > >>
>> > > > > > >> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>> > > > > > >>
>> > > > > > >
>> > > > > > >
>> > > > > > >
>> > > > > > > --
>> > > > > > > Weiwei Wang
>> > > > > > > Alex Wang
>> > > > > > > =E7=8E=8B=E5=B7=8D=E5=B7=8D
>> > > > > > > Room 403, Mengmin Wei Building
>> > > > > > > Computer Science Department
>> > > > > > > Gulou Campus of Nanjing University
>> > > > > > > Nanjing, P.R.China, 210093
>> > > > > > >
>> > > > > > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>> > > > > > >
>> > > > > >
>> > > > > >
>> > > > > >
>> > > > > > --
>> > > > > > Weiwei Wang
>> > > > > > Alex Wang
>> > > > > > =E7=8E=8B=E5=B7=8D=E5=B7=8D
>> > > > > > Room 403, Mengmin Wei Building
>> > > > > > Computer Science Department
>> > > > > > Gulou Campus of Nanjing University
>> > > > > > Nanjing, P.R.China, 210093
>> > > > > >
>> > > > > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>> > > > >
>> > > > >
>> > > > >
>> --------------------------------------------------------------------
>> > -
>> > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > > > > For additional commands, e-mail: java-user-help@lucene.apache.or=
g
>> > > > >
>> > > > >
>> > > >
>> > > >
>> > > > --
>> > > > Weiwei Wang
>> > > > Alex Wang
>> > > > =E7=8E=8B=E5=B7=8D=E5=B7=8D
>> > > > Room 403, Mengmin Wei Building
>> > > > Computer Science Department
>> > > > Gulou Campus of Nanjing University
>> > > > Nanjing, P.R.China, 210093
>> > > >
>> > > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>> > >
>> > >
>> > > --------------------------------------------------------------------=
-
>> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > > For additional commands, e-mail: java-user-help@lucene.apache.org
>> > >
>> > >
>> >
>> >
>> > --
>> > Weiwei Wang
>> > Alex Wang
>> > =E7=8E=8B=E5=B7=8D=E5=B7=8D
>> > Room 403, Mengmin Wei Building
>> > Computer Science Department
>> > Gulou Campus of Nanjing University
>> > Nanjing, P.R.China, 210093
>> >
>> > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --
> Weiwei Wang
> Alex Wang
> =E7=8E=8B=E5=B7=8D=E5=B7=8D
> Room 403, Mengmin Wei Building
> Computer Science Department
> Gulou Campus of Nanjing University
> Nanjing, P.R.China, 210093
>
> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>



--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--001485f7c5ae33b8fb047a9c627a--

From java-user-return-44074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 13 17:04:49 2009
Return-Path: <java-user-return-44074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47121 invoked from network); 13 Dec 2009 17:04:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Dec 2009 17:04:49 -0000
Received: (qmail 64125 invoked by uid 500); 13 Dec 2009 17:04:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64025 invoked by uid 500); 13 Dec 2009 17:04:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64015 invoked by uid 99); 13 Dec 2009 17:04:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Dec 2009 17:04:46 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 59.106.19.174 is neither permitted nor denied by domain of koji@r.email.ne.jp)
Received: from [59.106.19.174] (HELO www724.sakura.ne.jp) (59.106.19.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Dec 2009 17:04:37 +0000
Received: from koji-sekiguchi-no-macbook.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	(authenticated bits=0)
	by www724.sakura.ne.jp (8.14.3/8.14.3) with ESMTP id nBDH4Elc053708
	for <java-user@lucene.apache.org>; Mon, 14 Dec 2009 02:04:14 +0900 (JST)
	(envelope-from koji@r.email.ne.jp)
Message-ID: <4B251E8E.8040809@r.email.ne.jp>
Date: Mon, 14 Dec 2009 02:04:14 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.23 (Macintosh/20090812)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Looking for a MappingCharFilter that accepts regular expressions
References: <4B1D6A14.8020304@fastmail.fm>
In-Reply-To: <4B1D6A14.8020304@fastmail.fm>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Paul Taylor wrote:
> I want my search to treat 'No. 1' and 'No.1' the same, because in our 
> context its one token I want 'No. 1' to become 'No.1',  I need to do 
> this before tokenizing because the tokenizer would split one value 
> into two terms and one into just one term. I already use a 
> NormalizeMapFilter to map &' to 'and' but I think it only takes 
> literal text and I need to
>
> 1. be case insensitive (but lowercasefilter is only applied after 
> tokenizing)
>
> 2. cope with all numbers e.g no. 109
>
> So I was going to subclass BaseCharFilter and do my matches with a 
> regular expression like ([Nn]+[Oo]+\\.) ([0-9]+) but I'm struggling to 
> understand the offset methods you have to do once you get a match. Has 
> anyone already got a regular expression Charfilter OR am I approaching 
> this all wrong
>
> thanks Paul
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
Hi Paul,

I've written a patch for this kind of purpose. See:

https://issues.apache.org/jira/browse/SOLR-1653

Koji

-- 
http://www.rondhuit.com/en/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 13 17:15:49 2009
Return-Path: <java-user-return-44075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53866 invoked from network); 13 Dec 2009 17:15:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Dec 2009 17:15:49 -0000
Received: (qmail 82935 invoked by uid 500); 13 Dec 2009 17:15:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82844 invoked by uid 500); 13 Dec 2009 17:15:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82834 invoked by uid 99); 13 Dec 2009 17:15:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Dec 2009 17:15:47 +0000
X-ASF-Spam-Status: No, hits=-2.5 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 59.106.19.174 is neither permitted nor denied by domain of koji@r.email.ne.jp)
Received: from [59.106.19.174] (HELO www724.sakura.ne.jp) (59.106.19.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Dec 2009 17:15:44 +0000
Received: from koji-sekiguchi-no-macbook.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	(authenticated bits=0)
	by www724.sakura.ne.jp (8.14.3/8.14.3) with ESMTP id nBDHFM5t055171
	for <java-user@lucene.apache.org>; Mon, 14 Dec 2009 02:15:22 +0900 (JST)
	(envelope-from koji@r.email.ne.jp)
Message-ID: <4B25212A.4050902@r.email.ne.jp>
Date: Mon, 14 Dec 2009 02:15:22 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.23 (Macintosh/20090812)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Looking for a MappingCharFilter that accepts regular expressions
References: <4B1D6A14.8020304@fastmail.fm> <4B251E8E.8040809@r.email.ne.jp>
In-Reply-To: <4B251E8E.8040809@r.email.ne.jp>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Koji Sekiguchi wrote:
> Paul Taylor wrote:
>> I want my search to treat 'No. 1' and 'No.1' the same, because in our 
>> context its one token I want 'No. 1' to become 'No.1',  I need to do 
>> this before tokenizing because the tokenizer would split one value 
>> into two terms and one into just one term. I already use a 
>> NormalizeMapFilter to map &' to 'and' but I think it only takes 
>> literal text and I need to
>>
>> 1. be case insensitive (but lowercasefilter is only applied after 
>> tokenizing)
>>
>> 2. cope with all numbers e.g no. 109
>>
>> So I was going to subclass BaseCharFilter and do my matches with a 
>> regular expression like ([Nn]+[Oo]+\\.) ([0-9]+) but I'm struggling 
>> to understand the offset methods you have to do once you get a match. 
>> Has anyone already got a regular expression Charfilter OR am I 
>> approaching this all wrong
>>
>> thanks Paul
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> Hi Paul,
>
> I've written a patch for this kind of purpose. See:
>
> https://issues.apache.org/jira/browse/SOLR-1653
>
> Koji
>
Oops. I thought this is solr-user list, but it was java-user. :-D

Koji

-- 
http://www.rondhuit.com/en/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 14 03:15:01 2009
Return-Path: <java-user-return-44076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37469 invoked from network); 14 Dec 2009 03:15:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Dec 2009 03:15:01 -0000
Received: (qmail 88277 invoked by uid 500); 14 Dec 2009 03:14:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88144 invoked by uid 500); 14 Dec 2009 03:14:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88123 invoked by uid 99); 14 Dec 2009 03:14:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Dec 2009 03:14:55 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.217.225 as permitted sender)
Received: from [209.85.217.225] (HELO mail-gx0-f225.google.com) (209.85.217.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Dec 2009 03:14:45 +0000
Received: by gxk25 with SMTP id 25so2804056gxk.5
        for <java-user@lucene.apache.org>; Sun, 13 Dec 2009 19:14:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=tky6wOBbyBDdfs2D7MPbNpQ5nzPUWWvDqjW1VmEPQ90=;
        b=lkQJpcDeyQ0qJ6EdzRn5SpHbuhm+gc7Gnvzrtjeo4Ljs2tOrm9B/aXEhJRNPVIWlWy
         AFQIc3QG8jfZEwUJaxrRrT5YM0UMoJdro5OxQKgu2JHVis6PctxH93zkU7TvOuhDhzBa
         Cqd8X7VPl6N2pgV/pojTgfuXf5VuH+YCwcwX8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=FZTmGHXF1nT5NBcDio2e9QXp3VDAfKaTbZr7kQATvjS3UsOErBwo+vsRsp47hjhg91
         eMN3qQoIsV0CL7TJRjnHVD9cxTTsl7a8LFbI0DRfnReBlgR6uA0EhKqKE6WVNa2FfMHz
         YV+eFS/Q7TDVhtGDoBFFa2gNxDTZmeouwuLlI=
MIME-Version: 1.0
Received: by 10.90.9.35 with SMTP id 35mr4131407agi.74.1260760464878; Sun, 13 
	Dec 2009 19:14:24 -0800 (PST)
In-Reply-To: <4B25212A.4050902@r.email.ne.jp>
References: <4B1D6A14.8020304@fastmail.fm> <4B251E8E.8040809@r.email.ne.jp>
	 <4B25212A.4050902@r.email.ne.jp>
Date: Mon, 14 Dec 2009 11:14:24 +0800
Message-ID: <7d94dcde0912131914w6980bd3avb75475ecb64698ff@mail.gmail.com>
Subject: Re: Looking for a MappingCharFilter that accepts regular expressions
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636164481a7ee29047aa7ab96
X-Virus-Checked: Checked by ClamAV on apache.org

--001636164481a7ee29047aa7ab96
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

I need the source file not the patch file, where can i download it?

On Mon, Dec 14, 2009 at 1:15 AM, Koji Sekiguchi <koji@r.email.ne.jp> wrote:

> Koji Sekiguchi wrote:
>
>> Paul Taylor wrote:
>>
>>> I want my search to treat 'No. 1' and 'No.1' the same, because in our
>>> context its one token I want 'No. 1' to become 'No.1',  I need to do th=
is
>>> before tokenizing because the tokenizer would split one value into two =
terms
>>> and one into just one term. I already use a NormalizeMapFilter to map &=
' to
>>> 'and' but I think it only takes literal text and I need to
>>>
>>> 1. be case insensitive (but lowercasefilter is only applied after
>>> tokenizing)
>>>
>>> 2. cope with all numbers e.g no. 109
>>>
>>> So I was going to subclass BaseCharFilter and do my matches with a
>>> regular expression like ([Nn]+[Oo]+\\.) ([0-9]+) but I'm struggling to
>>> understand the offset methods you have to do once you get a match. Has
>>> anyone already got a regular expression Charfilter OR am I approaching =
this
>>> all wrong
>>>
>>> thanks Paul
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>  Hi Paul,
>>
>> I've written a patch for this kind of purpose. See:
>>
>> https://issues.apache.org/jira/browse/SOLR-1653
>>
>> Koji
>>
>>  Oops. I thought this is solr-user list, but it was java-user. :-D
>
>
> Koji
>
> --
> http://www.rondhuit.com/en/
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--001636164481a7ee29047aa7ab96--

From java-user-return-44077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 14 03:44:15 2009
Return-Path: <java-user-return-44077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57879 invoked from network); 14 Dec 2009 03:44:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Dec 2009 03:44:15 -0000
Received: (qmail 1945 invoked by uid 500); 14 Dec 2009 03:44:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1804 invoked by uid 500); 14 Dec 2009 03:44:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1794 invoked by uid 99); 14 Dec 2009 03:44:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Dec 2009 03:44:12 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.211.185 as permitted sender)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Dec 2009 03:44:07 +0000
Received: by ywh15 with SMTP id 15so2662636ywh.5
        for <java-user@lucene.apache.org>; Sun, 13 Dec 2009 19:43:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=lkF2P2ZzGIFyU2nHbw4ts/IWXjyCwS/nTF+nMw7EBGI=;
        b=OEh+1RQb5RDXXDbOQPPiyde/5E0ZE2lQj+ntNEvJm/lPSFB8NHY/hU2JakJAjax7b1
         hecczIsNZWUY2jmZp+lnXU0754Uh/fxKSsyeqXGtswuCYoe5zaMAgeMqvChWmN3PKbFB
         6nqem1EDZS/4Ics39/gE+WGmQ11QHvOjExtWs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=lXq9WiMwI4GJPKwk3mWabiX2M/T7w0ZJuiYjcYRKqdzCWeeRJDOdV4xEKVyF3WxED1
         TgE5lcBFAEP+zDofrM7lXiXqk5VVZpX5kyItTKZ7eu4tnz4BWOqUkabLP4DaDy2Ve4AU
         GKlGrS2E4GcdjQB0iW4VSd04PwFoDtakWForg=
MIME-Version: 1.0
Received: by 10.91.106.5 with SMTP id i5mr4226386agm.75.1260762227029; Sun, 13 
	Dec 2009 19:43:47 -0800 (PST)
In-Reply-To: <7d94dcde0912131914w6980bd3avb75475ecb64698ff@mail.gmail.com>
References: <4B1D6A14.8020304@fastmail.fm> <4B251E8E.8040809@r.email.ne.jp>
	 <4B25212A.4050902@r.email.ne.jp>
	 <7d94dcde0912131914w6980bd3avb75475ecb64698ff@mail.gmail.com>
Date: Mon, 14 Dec 2009 11:43:46 +0800
Message-ID: <7d94dcde0912131943m5c04332fr7c0d90e0652fbc1@mail.gmail.com>
Subject: Re: Looking for a MappingCharFilter that accepts regular expressions
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016367f92e6b0387a047aa81461

--0016367f92e6b0387a047aa81461
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

All solr souce downloaded, and I found PatternReplaceCharFilter is very
useful for my project.

Thanks

On Mon, Dec 14, 2009 at 11:14 AM, Weiwei Wang <ww.wang.cs@gmail.com> wrote:

> I need the source file not the patch file, where can i download it?
>
>
> On Mon, Dec 14, 2009 at 1:15 AM, Koji Sekiguchi <koji@r.email.ne.jp>wrote=
:
>
>> Koji Sekiguchi wrote:
>>
>>> Paul Taylor wrote:
>>>
>>>> I want my search to treat 'No. 1' and 'No.1' the same, because in our
>>>> context its one token I want 'No. 1' to become 'No.1',  I need to do t=
his
>>>> before tokenizing because the tokenizer would split one value into two=
 terms
>>>> and one into just one term. I already use a NormalizeMapFilter to map =
&' to
>>>> 'and' but I think it only takes literal text and I need to
>>>>
>>>> 1. be case insensitive (but lowercasefilter is only applied after
>>>> tokenizing)
>>>>
>>>> 2. cope with all numbers e.g no. 109
>>>>
>>>> So I was going to subclass BaseCharFilter and do my matches with a
>>>> regular expression like ([Nn]+[Oo]+\\.) ([0-9]+) but I'm struggling to
>>>> understand the offset methods you have to do once you get a match. Has
>>>> anyone already got a regular expression Charfilter OR am I approaching=
 this
>>>> all wrong
>>>>
>>>> thanks Paul
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>  Hi Paul,
>>>
>>> I've written a patch for this kind of purpose. See:
>>>
>>> https://issues.apache.org/jira/browse/SOLR-1653
>>>
>>> Koji
>>>
>>>  Oops. I thought this is solr-user list, but it was java-user. :-D
>>
>>
>> Koji
>>
>> --
>> http://www.rondhuit.com/en/
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --
> Weiwei Wang
> Alex Wang
> =E7=8E=8B=E5=B7=8D=E5=B7=8D
> Room 403, Mengmin Wei Building
> Computer Science Department
> Gulou Campus of Nanjing University
> Nanjing, P.R.China, 210093
>
> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>



--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--0016367f92e6b0387a047aa81461--

From java-user-return-44078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 14 05:01:50 2009
Return-Path: <java-user-return-44078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5562 invoked from network); 14 Dec 2009 05:01:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Dec 2009 05:01:50 -0000
Received: (qmail 53392 invoked by uid 500); 14 Dec 2009 05:01:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53302 invoked by uid 500); 14 Dec 2009 05:01:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53291 invoked by uid 99); 14 Dec 2009 05:01:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Dec 2009 05:01:47 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.217.225 as permitted sender)
Received: from [209.85.217.225] (HELO mail-gx0-f225.google.com) (209.85.217.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Dec 2009 05:01:37 +0000
Received: by gxk25 with SMTP id 25so2859862gxk.5
        for <java-user@lucene.apache.org>; Sun, 13 Dec 2009 21:01:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=TO19KKkZuCIzk/JJcwdMq2+VpiWcAKdqCza9GgyBO9w=;
        b=X7AE5PBT7F0n60swMnAQOvoJH0dCuUkTVEiY9iAxerkusRsBM/XtyNdzhlwA+AY+4n
         XTUTteAubfm+CyMzKhcjpsKnkEXLhopdAXXG2nwb5MsgOn/K+tC/jLiAWpLqUNh2zDWy
         nwZp/juVVK4OTg7GwVfyUt0AdyIWmItC7TSG8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=pp/piRhPDTS1LlZnE9vcSSY5Bv5Rtb+XlnzsD7mCugwM7zMn55BwK94znIQctADXM6
         jxV6cDJ9m5G3pwZYE8njD6IzoXRGK5uWBez6TG4e7lJdEb9Nx0pO+njqNAOI+ONc7Hyu
         LIABjhdNAhB+ewu4wB21jAkPKZFnTN3V86/RI=
MIME-Version: 1.0
Received: by 10.90.18.32 with SMTP id 32mr785646agr.21.1260766875703; Sun, 13 
	Dec 2009 21:01:15 -0800 (PST)
Date: Mon, 14 Dec 2009 13:01:15 +0800
Message-ID: <7d94dcde0912132101t38b80c11i5b2df6113e8009c1@mail.gmail.com>
Subject: Offset Problem
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016362839ecc55be0047aa9296b
X-Virus-Checked: Checked by ClamAV on apache.org

--0016362839ecc55be0047aa9296b
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

The offset is incorrect for PatternReplaceCharFilter so the hilighting
result is wrong.

How to fix it?

On Mon, Dec 14, 2009 at 11:43 AM, Weiwei Wang <ww.wang.cs@gmail.com> wrote:

> All solr souce downloaded, and I found PatternReplaceCharFilter is very
> useful for my project.
>
> Thanks
>
>
> On Mon, Dec 14, 2009 at 11:14 AM, Weiwei Wang <ww.wang.cs@gmail.com>wrote=
:
>
>> I need the source file not the patch file, where can i download it?
>>
>>
>> On Mon, Dec 14, 2009 at 1:15 AM, Koji Sekiguchi <koji@r.email.ne.jp>wrot=
e:
>>
>>> Koji Sekiguchi wrote:
>>>
>>>> Paul Taylor wrote:
>>>>
>>>>> I want my search to treat 'No. 1' and 'No.1' the same, because in our
>>>>> context its one token I want 'No. 1' to become 'No.1',  I need to do =
this
>>>>> before tokenizing because the tokenizer would split one value into tw=
o terms
>>>>> and one into just one term. I already use a NormalizeMapFilter to map=
 &' to
>>>>> 'and' but I think it only takes literal text and I need to
>>>>>
>>>>> 1. be case insensitive (but lowercasefilter is only applied after
>>>>> tokenizing)
>>>>>
>>>>> 2. cope with all numbers e.g no. 109
>>>>>
>>>>> So I was going to subclass BaseCharFilter and do my matches with a
>>>>> regular expression like ([Nn]+[Oo]+\\.) ([0-9]+) but I'm struggling t=
o
>>>>> understand the offset methods you have to do once you get a match. Ha=
s
>>>>> anyone already got a regular expression Charfilter OR am I approachin=
g this
>>>>> all wrong
>>>>>
>>>>> thanks Paul
>>>>>
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>  Hi Paul,
>>>>
>>>> I've written a patch for this kind of purpose. See:
>>>>
>>>> https://issues.apache.org/jira/browse/SOLR-1653
>>>>
>>>> Koji
>>>>
>>>>  Oops. I thought this is solr-user list, but it was java-user. :-D
>>>
>>>
>>> Koji
>>>
>>> --
>>> http://www.rondhuit.com/en/
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>> --
>> Weiwei Wang
>> Alex Wang
>> =E7=8E=8B=E5=B7=8D=E5=B7=8D
>> Room 403, Mengmin Wei Building
>> Computer Science Department
>> Gulou Campus of Nanjing University
>> Nanjing, P.R.China, 210093
>>
>> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>>
>
>
>
> --
> Weiwei Wang
> Alex Wang
> =E7=8E=8B=E5=B7=8D=E5=B7=8D
> Room 403, Mengmin Wei Building
> Computer Science Department
> Gulou Campus of Nanjing University
> Nanjing, P.R.China, 210093
>
> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>



--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--0016362839ecc55be0047aa9296b--

From java-user-return-44079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 14 05:11:29 2009
Return-Path: <java-user-return-44079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10758 invoked from network); 14 Dec 2009 05:11:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Dec 2009 05:11:29 -0000
Received: (qmail 72203 invoked by uid 500); 14 Dec 2009 05:11:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72116 invoked by uid 500); 14 Dec 2009 05:11:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72105 invoked by uid 99); 14 Dec 2009 05:11:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Dec 2009 05:11:25 +0000
X-ASF-Spam-Status: No, hits=-2.8 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.216.171 as permitted sender)
Received: from [209.85.216.171] (HELO mail-px0-f171.google.com) (209.85.216.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Dec 2009 05:11:23 +0000
Received: by pxi1 with SMTP id 1so2452083pxi.29
        for <java-user@lucene.apache.org>; Sun, 13 Dec 2009 21:11:02 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=CeyCZTmZyjIPXgYuNnnVGZNBlLdRB3E+4WzvBc9HaZg=;
        b=xlrZBbcQMcqXv73q7mTVwCIpZA8ssj/Px6PZ11JFac0Tjca0w3aqNKhJCAHEpuU/U9
         xGJt8IDhbOtIziEuvqoazjqTSSKsr86iPab1NV7Jh0qF3Q8M1kWHpsJRV5AtHYlcNPOU
         JjB4zrNpQrUfpyXMnuc+GcCgw0Cb45O71bcMU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=YcjU5wcNUfDIzhrk08FmfxCJQxcuLcGQLnUhA2zh/758P0XudfbYcfYVvu+cTSUM2W
         9uVQrk8w/yN7F0GEc68v3ppxLoLxAHh2GOfQqiwvtqT7k/tXbqV8w+qjXryZNbh+ZMG5
         mzTA/p3s1e9B0MYE+dsZNqNRaPTkpjLWlFvp0=
MIME-Version: 1.0
Received: by 10.141.100.8 with SMTP id c8mr3013437rvm.189.1260767462305; Sun, 
	13 Dec 2009 21:11:02 -0800 (PST)
Date: Sun, 13 Dec 2009 21:11:02 -0800
Message-ID: <85d3c3b60912132111k241e61b2uaf5f545177e5d65c@mail.gmail.com>
Subject: CJKAnalyzer phrase slop?
From: Jason Rutherglen <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Does CJK support phrase slop? (I'm assuming no)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 14 05:33:15 2009
Return-Path: <java-user-return-44080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26788 invoked from network); 14 Dec 2009 05:33:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Dec 2009 05:33:15 -0000
Received: (qmail 90557 invoked by uid 500); 14 Dec 2009 05:33:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90350 invoked by uid 500); 14 Dec 2009 05:33:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90340 invoked by uid 99); 14 Dec 2009 05:33:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Dec 2009 05:33:09 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.211.185 as permitted sender)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Dec 2009 05:33:00 +0000
Received: by ywh15 with SMTP id 15so2716473ywh.5
        for <java-user@lucene.apache.org>; Sun, 13 Dec 2009 21:32:40 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=ua0UO4JcV5sxeZoKtQLVvOUaRewecMG2GL6r2Ta6tyo=;
        b=ocPpv9s8KPac038Po4WpoQWj1SbMw779Ajg6kCk8Ca448P/ByBILheKhNwUFN6Q2V5
         2VztxcNolCKX1Z5fE/FI3g9UHwLFB3WtNPFXikdAchXhubJzk5zM6MBb2epA7cA08kec
         69fnpbxPpOyuadBm47o9sQ6hLgVHO2XkJlfpY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=K1u1akSFXv4pRAxY2ffgwxfsBS05vH4r2j/GbSTYg6sPxSe1VLrlb1wjBSBtyOOUZG
         KqXu6QR8ww1MO/c3iKmZZXTknYt+NCSjCXm2QkkWZ+73OcV68FZmGoO1zJBOZboAgokx
         TTEjYsvw8KNQh9Sb8EwCV7jvYM1sK8+Pk2R9c=
MIME-Version: 1.0
Received: by 10.90.40.17 with SMTP id n17mr4334213agn.16.1260768759842; Sun, 
	13 Dec 2009 21:32:39 -0800 (PST)
Date: Mon, 14 Dec 2009 13:32:39 +0800
Message-ID: <7d94dcde0912132132p4d425ecav316dd5296f98dfa2@mail.gmail.com>
Subject: Problem in MappingCharFilter and PatternReplaceCharFilter
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f90b6e1309a7047aa99a1b
X-Virus-Checked: Checked by ClamAV on apache.org

--001485f90b6e1309a7047aa99a1b
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hi, guys,


1. how to deal with c++c++ or c++abc using MappingCharFilter

i use a NormalizeMap("c++","cplusplus"), the analyzed result will be
cpluspluscplusplus or cplusplusabc wich is not what i want

if i use a NormalizeMap("c++","cplusplus$"), the offset will not be correct=
.

2. I use PatternReplaceCharFilter to filter season07 or something like this
into season 07, the pattern i use is shown below
    String pattern =3D "([\\p{Alpha}]+)(\\d+)";
    String replace =3D "1,{ },2";
 the offset is not correct for Highlighting

--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--001485f90b6e1309a7047aa99a1b--

From java-user-return-44081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 14 05:37:39 2009
Return-Path: <java-user-return-44081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30494 invoked from network); 14 Dec 2009 05:37:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Dec 2009 05:37:39 -0000
Received: (qmail 95958 invoked by uid 500); 14 Dec 2009 05:37:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95843 invoked by uid 500); 14 Dec 2009 05:37:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95833 invoked by uid 99); 14 Dec 2009 05:37:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Dec 2009 05:37:36 +0000
X-ASF-Spam-Status: No, hits=-1.3 required=5.0
	tests=AWL,BAYES_50,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.104.17.195] (HELO web94816.mail.in2.yahoo.com) (203.104.17.195)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 14 Dec 2009 05:37:34 +0000
Received: (qmail 23958 invoked by uid 60001); 14 Dec 2009 05:37:11 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1260769031; bh=OTCUaPgrF8IS1zwgMftrH9DIsKP4Znwm9rev8E04PUA=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=3xNg7XD0Uk9PPPtwvqvImuVJlJ1aKWI/stLQG2EQjCSGEvANHIRUXdwui51/grSJC0dc2bRBINYCrq7IXbzC4FqH9yLomzExQjKUsTR3zXVdWUIohOhPdIlIY1WiQx63thrOzHkP9BIP9rviAg9lFbivwtxMhEZAEFtD6TZiUO8=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=T3zm9gd8Pc6WtX6k4gF6/2vyaDA8p+OatVWQpainWbpgEZJKTLIMwRUf2of92Idhcgy7tph/gZEZSo3NHSJDcm90J7XT0R6fbULvYPkLKsAEI74MynVhqLyK4/wukDCoztVkMJQpvU9C1qxW8vf9CQoycQ3PcI1ndMtmexF4oa4=;
Message-ID: <409596.23923.qm@web94816.mail.in2.yahoo.com>
X-YMail-OSG: BaWSj3IVM1kKIwDD8j81AsxO6kmDET95gxgf1PyE6hYXcPQg.Qfug1HwliwQrMKQ5GTeCU0ClIg1eWJI5FjtaeDRnH.6HBtIR72lH4RNmHiybkUHQZpX8O639rEPEE5wNq1v5x1SezCRm8BBERst9Lll4nRpVacm6F6CUAJd3uKgi0ugX4rNam5Q8hEVRNJF6o3wZDw76ACHGYuvAc2i7_Efvi3c88uK_o3pPEeOWe3N1ZsM9Y7cM2Bd6F7y2RhGHAdK2g.36F8G8evC1rn0Y2JGS5k9YQ--
Received: from [209.73.190.213] by web94816.mail.in2.yahoo.com via HTTP; Mon, 14 Dec 2009 11:07:11 IST
X-Mailer: YahooMailClassic/9.0.19 YahooMailWebService/0.8.100.260964
Date: Mon, 14 Dec 2009 11:07:11 +0530 (IST)
From: DHIVYA M <dhivyakrishnan87@yahoo.com>
Subject: How to do ranking in lucene?
To: java user <java-user@lucene.apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-988520483-1260769031=:23923"

--0-988520483-1260769031=:23923
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi all,
=A0
Am using lucene 2.3.1.
Can anyone suggest me how to implement ranking in lucene? If its available =
how is it done?
=A0
Thanks in advance,
Dhivya=0A=0A=0A      The INTERNET now has a personality. YOURS! See your Ya=
hoo! Homepage. http://in.yahoo.com/
--0-988520483-1260769031=:23923--

From java-user-return-44082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 14 05:39:47 2009
Return-Path: <java-user-return-44082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31912 invoked from network); 14 Dec 2009 05:39:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Dec 2009 05:39:47 -0000
Received: (qmail 98523 invoked by uid 500); 14 Dec 2009 05:39:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98359 invoked by uid 500); 14 Dec 2009 05:39:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98349 invoked by uid 99); 14 Dec 2009 05:39:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Dec 2009 05:39:42 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.211.185 as permitted sender)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Dec 2009 05:39:31 +0000
Received: by ywh15 with SMTP id 15so2719361ywh.5
        for <java-user@lucene.apache.org>; Sun, 13 Dec 2009 21:39:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=EeeFzBM7Y4NpNviqMNAIaNY7QGvSsdSnALLDoScqkoM=;
        b=QFeZOuKqTKytHQ3LNhQ8h3qPo2C7NBJDlzcFS2f81VJ7Ow4IU3Hwj7OIxtGn5uKCeB
         YuAHfoedp75B5nYU/MbfGOrZgWUG7aO33UhWrwX3ySyibQ8b5ALACX8s0fGQA6nK+FlN
         xbfRi333p4ecRUexz7GeG/rLeNPx/pbZs4RrQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=dKHQVrY/XxrIDZIApKa9UbUu6EP1zzf+Vq/4n4hQcaRaqnWfkpRmoA8Co17EcT+9S8
         ogETy2C2179PMOYE39iShgD3dFf0TsMchxyqoM7eM6lQa+L/i5g0JkMQ4P1NGXDxkS9A
         aEynkNH8qDK3AHCWgMOSifKvjaeKRRvU1/4+M=
MIME-Version: 1.0
Received: by 10.90.205.17 with SMTP id c17mr4298985agg.34.1260769151077; Sun, 
	13 Dec 2009 21:39:11 -0800 (PST)
In-Reply-To: <409596.23923.qm@web94816.mail.in2.yahoo.com>
References: <409596.23923.qm@web94816.mail.in2.yahoo.com>
Date: Mon, 14 Dec 2009 13:39:11 +0800
Message-ID: <7d94dcde0912132139m6a08ec06u6997d4ae0188fed0@mail.gmail.com>
Subject: Re: How to do ranking in lucene?
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163631054d64d8bf047aa9b144
X-Virus-Checked: Checked by ClamAV on apache.org

--00163631054d64d8bf047aa9b144
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

it's alread done.
You can read this book for more information:
http://www-nlp.stanford.edu/IR-book/

On Mon, Dec 14, 2009 at 1:37 PM, DHIVYA M <dhivyakrishnan87@yahoo.com>wrote=
:

> Hi all,
>
> Am using lucene 2.3.1.
> Can anyone suggest me how to implement ranking in lucene? If its availabl=
e
> how is it done?
>
> Thanks in advance,
> Dhivya
>
>
>      The INTERNET now has a personality. YOURS! See your Yahoo! Homepage.
> http://in.yahoo.com/




--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--00163631054d64d8bf047aa9b144--

From java-user-return-44083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 14 12:55:38 2009
Return-Path: <java-user-return-44083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25780 invoked from network); 14 Dec 2009 12:55:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Dec 2009 12:55:37 -0000
Received: (qmail 96663 invoked by uid 500); 14 Dec 2009 12:55:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96579 invoked by uid 500); 14 Dec 2009 12:55:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96569 invoked by uid 99); 14 Dec 2009 12:55:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Dec 2009 12:55:33 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [81.187.40.70] (HELO fluffy.torchbox.com) (81.187.40.70)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Dec 2009 12:55:25 +0000
Received: from adsl.internal.torchbox.com ([192.168.1.3] helo=grenache.internal.torchbox.com)
	by fluffy.torchbox.com with esmtps (TLS1.0:DHE_RSA_AES_256_CBC_SHA1:32)
	(Exim 4.69)
	(envelope-from <nick@torchbox.com>)
	id 1NKAS8-0001Sb-7F
	for java-user@lucene.apache.org; Mon, 14 Dec 2009 12:55:04 +0000
Date: Mon, 14 Dec 2009 12:55:01 +0000 (GMT)
From: Nick Burch <nick@torchbox.com>
X-X-Sender: nick@grenache
To: java-user@lucene.apache.org
Subject: SnowballAnalyzer and StopAnalyzer.ENGLISH_STOP_WORDS_SET ?
Message-ID: <alpine.LFD.2.00.0912141251040.3524@grenache>
User-Agent: Alpine 2.00 (LFD 1167 2008-08-23)
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; format=flowed; charset=US-ASCII
X-Spam-Score: -1.9 (-)
Organization: Torchbox Ltd, Registered Company #3983354, Unit 9, Southill Business Park, OX7 3EW, UK
X-Virus-Checked: Checked by ClamAV on apache.org

Hi All

I'm upgrading my code from 2.4 to 2.9, and I've hit an issue with 
deprecations.

My old code was:
 	new SnowballAnalyzer("English", StopAnalyzer.ENGLISH_STOP_WORDS);

Looking at the JavaDocs, I'd expected that the new format would be:
 	new SnowballAnalyzer(Version.LUCENE_CURRENT, "English", StopAnalyzer.ENGLISH_STOP_WORDS_SET);

However, while StopAnalyzer has depcrecated ENGLISH_STOP_WORDS in favour 
of ENGLISH_STOP_WORDS_SET, and while SnowballAnalyzer seems to use a Set 
based stopwords list internally, there doesn't seem to be a constructor 
for SnowballAnalyzer that takes a set, only a String[] one

Has anyone hit this before? Am I safe to make a patch to SnowballAnalyzer 
to create a matching constructor taking Set rather than String[] so I can 
use the non deprecated stopwords from StopAnalyzer, or am I barking up the 
wrong tree here?

Thanks
Nick

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 14 13:20:05 2009
Return-Path: <java-user-return-44084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40571 invoked from network); 14 Dec 2009 13:20:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Dec 2009 13:20:05 -0000
Received: (qmail 42088 invoked by uid 500); 14 Dec 2009 13:20:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41993 invoked by uid 500); 14 Dec 2009 13:20:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41983 invoked by uid 99); 14 Dec 2009 13:20:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Dec 2009 13:20:02 +0000
X-ASF-Spam-Status: No, hits=-2.5 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 59.106.19.174 is neither permitted nor denied by domain of koji@r.email.ne.jp)
Received: from [59.106.19.174] (HELO www724.sakura.ne.jp) (59.106.19.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Dec 2009 13:19:59 +0000
Received: from koji-sekiguchi-no-macbook.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	(authenticated bits=0)
	by www724.sakura.ne.jp (8.14.3/8.14.3) with ESMTP id nBEDJcCB065286
	for <java-user@lucene.apache.org>; Mon, 14 Dec 2009 22:19:38 +0900 (JST)
	(envelope-from koji@r.email.ne.jp)
Message-ID: <4B263B6A.7030401@r.email.ne.jp>
Date: Mon, 14 Dec 2009 22:19:38 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.23 (Macintosh/20090812)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Offset Problem
References: <7d94dcde0912132101t38b80c11i5b2df6113e8009c1@mail.gmail.com>
In-Reply-To: <7d94dcde0912132101t38b80c11i5b2df6113e8009c1@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit

Weiwei Wang wrote:
> The offset is incorrect for PatternReplaceCharFilter so the hilighting
> result is wrong.
>
> How to fix it?
>
>   
As I noted in the comment of the source, if you produce a phrase from a term
and try to highlight a term in the produced phrase, the highlighted snippet
will be undesirable. This is the feature, unfortunately. But if you try to
highlight whole the produced phrase, the snippet will be desirable.

Koji

-- 
http://www.rondhuit.com/en/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 14 13:29:16 2009
Return-Path: <java-user-return-44085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45312 invoked from network); 14 Dec 2009 13:29:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Dec 2009 13:29:16 -0000
Received: (qmail 51727 invoked by uid 500); 14 Dec 2009 13:29:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51644 invoked by uid 500); 14 Dec 2009 13:29:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51634 invoked by uid 99); 14 Dec 2009 13:29:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Dec 2009 13:29:13 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.217.225 as permitted sender)
Received: from [209.85.217.225] (HELO mail-gx0-f225.google.com) (209.85.217.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Dec 2009 13:29:03 +0000
Received: by gxk25 with SMTP id 25so3144211gxk.5
        for <java-user@lucene.apache.org>; Mon, 14 Dec 2009 05:28:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=oOfbRMVTNFJuDFsPvxoBQBOJucxQMxBEkjRl0UJryms=;
        b=QOxLY2XMeHTPEV+/5L3G3YUTvTMVe2P8BrfoebOP93ANrXnxQgCsXAi1ZW0mIoi/Jl
         30fHJ3tv2WhQdALcjbf6zm38PIFmlj/dtl4OMpFjTqCfu5s3Y5jrm/Wg/qBmf2gHwIH7
         tShNtP+WfBRVZ1OcG3dVZhqYcoGqlIaqNRcfU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=cMirZrT1Sbgp2S8g/326GyoVSeeuxlQartERtexcVIdV0fMYdnSiyHwWCdqyM/KBsM
         tI3q5HeGc37i3inyh1kr1/HOdO4KUmZeKHDfEKQFM+HwSTJVMzQm/1jmNq2wU+0urB/5
         X+FDgkCDKvc1MTSbqkSmCICCJF0jSqxJrNxcA=
MIME-Version: 1.0
Received: by 10.91.161.26 with SMTP id n26mr1918972ago.88.1260797322178; Mon, 
	14 Dec 2009 05:28:42 -0800 (PST)
In-Reply-To: <alpine.LFD.2.00.0912141251040.3524@grenache>
References: <alpine.LFD.2.00.0912141251040.3524@grenache>
Date: Mon, 14 Dec 2009 21:28:42 +0800
Message-ID: <7d94dcde0912140528n2de2ba28w9fa480aa7fbfcabd@mail.gmail.com>
Subject: Re: SnowballAnalyzer and StopAnalyzer.ENGLISH_STOP_WORDS_SET ?
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f9a81085e685047ab040c5
X-Virus-Checked: Checked by ClamAV on apache.org

--001485f9a81085e685047ab040c5
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

you can construct your own analyser as SnowballAnalyzer does and as a resul=
t
you can adapt to the new Lucene version(now 3.0.0)
http://lucene.apache.org/java/3_0_0/api/contrib-snowball/org/apache/lucene/=
analysis/snowball/SnowballAnalyzer.html


On Mon, Dec 14, 2009 at 8:55 PM, Nick Burch <nick@torchbox.com> wrote:

> Hi All
>
> I'm upgrading my code from 2.4 to 2.9, and I've hit an issue with
> deprecations.
>
> My old code was:
>        new SnowballAnalyzer("English", StopAnalyzer.ENGLISH_STOP_WORDS);
>
> Looking at the JavaDocs, I'd expected that the new format would be:
>        new SnowballAnalyzer(Version.LUCENE_CURRENT, "English",
> StopAnalyzer.ENGLISH_STOP_WORDS_SET);
>
> However, while StopAnalyzer has depcrecated ENGLISH_STOP_WORDS in favour =
of
> ENGLISH_STOP_WORDS_SET, and while SnowballAnalyzer seems to use a Set bas=
ed
> stopwords list internally, there doesn't seem to be a constructor for
> SnowballAnalyzer that takes a set, only a String[] one
>
> Has anyone hit this before? Am I safe to make a patch to SnowballAnalyzer
> to create a matching constructor taking Set rather than String[] so I can
> use the non deprecated stopwords from StopAnalyzer, or am I barking up th=
e
> wrong tree here?
>
> Thanks
> Nick
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--001485f9a81085e685047ab040c5--

From java-user-return-44086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 14 13:30:17 2009
Return-Path: <java-user-return-44086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46038 invoked from network); 14 Dec 2009 13:30:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Dec 2009 13:30:17 -0000
Received: (qmail 55220 invoked by uid 500); 14 Dec 2009 13:30:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55120 invoked by uid 500); 14 Dec 2009 13:30:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55110 invoked by uid 99); 14 Dec 2009 13:30:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Dec 2009 13:30:14 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.211.185 as permitted sender)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Dec 2009 13:30:12 +0000
Received: by ywh15 with SMTP id 15so2977568ywh.5
        for <java-user@lucene.apache.org>; Mon, 14 Dec 2009 05:29:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=fG6lUXgE/hNSB+nGo/wgfbLM3OgUWTenQco1e3eDG9g=;
        b=MFH04rl3jQgDtmpsat+Ggv4RyJp5eCAY+kw8TKQrdAPWnOdxAQ0oySzrY3USvn/OxP
         zR7g3CsOzpSP+wOCWzSY0QVxmteRAMXbLevE22vzZH6BepS9Uv6nnkWOb/BsWIuhJ16i
         EJyzDwfVt8B6ax910QIrI6W/QXmdI1+U1zXz0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=PdMhmq1iijPDh3VMFudmD8g8XQhfgEI546dEX/VVOR1ZPi5EM+wCID5InPaPau022m
         0qEVLvurQaVbPMUrEJ5Hmf0Xzk4LP98GknwuamZz7KoXCVfrUClXit/UHNJoFKbMPuck
         /svV8k+VMnV+Sq2UIRvujfcWtIW1M06ftkAP0=
MIME-Version: 1.0
Received: by 10.91.189.1 with SMTP id r1mr660650agp.109.1260797391975; Mon, 14 
	Dec 2009 05:29:51 -0800 (PST)
In-Reply-To: <4B263B6A.7030401@r.email.ne.jp>
References: <7d94dcde0912132101t38b80c11i5b2df6113e8009c1@mail.gmail.com>
	 <4B263B6A.7030401@r.email.ne.jp>
Date: Mon, 14 Dec 2009 21:29:51 +0800
Message-ID: <7d94dcde0912140529n11d04110wd610be5ee4994697@mail.gmail.com>
Subject: Re: Offset Problem
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64602d6aeb91c047ab0448d

--0016e64602d6aeb91c047ab0448d
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

got it, thanks, Koji

On Mon, Dec 14, 2009 at 9:19 PM, Koji Sekiguchi <koji@r.email.ne.jp> wrote:

> Weiwei Wang wrote:
>
>> The offset is incorrect for PatternReplaceCharFilter so the hilighting
>> result is wrong.
>>
>> How to fix it?
>>
>>
>>
> As I noted in the comment of the source, if you produce a phrase from a
> term
> and try to highlight a term in the produced phrase, the highlighted snipp=
et
> will be undesirable. This is the feature, unfortunately. But if you try t=
o
> highlight whole the produced phrase, the snippet will be desirable.
>
>
> Koji
>
> --
> http://www.rondhuit.com/en/
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--0016e64602d6aeb91c047ab0448d--

From java-user-return-44087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 14 14:10:04 2009
Return-Path: <java-user-return-44087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75303 invoked from network); 14 Dec 2009 14:10:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Dec 2009 14:10:04 -0000
Received: (qmail 7510 invoked by uid 500); 14 Dec 2009 14:10:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7410 invoked by uid 500); 14 Dec 2009 14:10:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7400 invoked by uid 99); 14 Dec 2009 14:10:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Dec 2009 14:10:02 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Dec 2009 14:09:52 +0000
Received: from [172.18.225.244] (172.18.225.244) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.1.393.1; Mon, 14 Dec 2009 15:09:31 +0100
Subject: Re: heap memory issues when sorting by a string field
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
CC: Michael McCandless <lucene@mikemccandless.com>
In-Reply-To: <9ac0c6aa0912110553u5e494988w14964467e6ce62fd@mail.gmail.com>
References: <17022a310912071327x6be7f6afjf45e0ab69269e47c@mail.gmail.com>
	 <359a92830912071337o3ed869dbv68576b704666b8df@mail.gmail.com>
	 <17022a310912071348m85926b0vbc0687e6085e79b5@mail.gmail.com>
	 <660086cb0912071638h6c6e10e1u4899889bc9a4ed74@mail.gmail.com>
	 <9ac0c6aa0912080236j5d3a87d1jbce8558fba738765@mail.gmail.com>
	 <9ac0c6aa0912080243g4f7fab20q73b228cf1426a4ae@mail.gmail.com>
	 <17022a310912091358y20f4eebbt7bcd0253cb8add04@mail.gmail.com>
	 <2E6A89A648463A4EBF093A9062C16683013484F9F742@SBMAILBOX1.sb.statsbiblioteket.dk>
	 <9ac0c6aa0912100245n4e3902etfed6b26dd80a2f2d@mail.gmail.com>
	 <1260538239.5731.99.camel@pc286>
	 <9ac0c6aa0912110553u5e494988w14964467e6ce62fd@mail.gmail.com>
Content-Type: text/plain; charset="UTF-8"
Organization: Statsbiblioteket
Date: Mon, 14 Dec 2009 15:09:41 +0100
Message-ID: <1260799781.5731.4174.camel@pc286>
MIME-Version: 1.0
X-Mailer: Evolution 2.28.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, 2009-12-11 at 14:53 +0100, Michael McCandless wrote:
> How long does Lucene take to build the ords for the toplevel reader?
> 
> You should be able to just time FieldCache.getStringIndex(topLevelReader).
>
> I think your 8.5 seconds for first Lucene search was with the
> StringIndex computed per segment?

Cold disk-cache (directly after reboot):
[2009-12-14 14:44:10,914] Requesting StringIndex for field sort_title
[2009-12-14 14:44:20,326] Got StringIndex of length 2916008 in 9
seconds, 412 ms

Warm disk-cache (3 minutes after first test):
[2009-12-14 14:44:10,914] Requesting StringIndex for field sort_title
[2009-12-14 14:44:20,326] Got StringIndex of length 2916008 in 8
seconds, 414 ms

The response time for the first sorted search was about 8,5 seconds, but
that was after 6 non-sorted searches without the use of explicit field
cache, so some amount of warm-up was performed.

Caveat: I must stress that this is very much ad hoc testing.


----------------- FieldCache test code

    // Meant for testing
    private FieldCache.StringIndex getStringIndex(
            IndexReader reader, String field) {
        log.info("Requesting StringIndex for field " + field);
        Profiler profiler = new Profiler();
        FieldCache.StringIndex stringIndex;
        try {
            stringIndex = FieldCache.DEFAULT.getStringIndex(reader,
field);
        } catch (IOException e) {
            log.error("Could not retrieve StringIndex", e);
            return null;
        }
        log.info("Got StringIndex of length " + stringIndex.order.length
                 + " in " + profiler.getSpendTime());
        return stringIndex;
    }

----------------- Lucene 2.4 index

ls -l index/sb/20091201-115941/lucene/

-rw-rw-r-- 1 summatst summatst 12840211452 Dec  2 11:21 _0.cfx
-rw-rw-r-- 1 summatst summatst   361027455 Dec  2 11:19 _32.cfs
-rw-rw-r-- 1 summatst summatst   373374178 Dec  2 11:19 _65.cfs
-rw-rw-r-- 1 summatst summatst   438076782 Dec  2 11:21 _98.cfs
-rw-rw-r-- 1 summatst summatst   463141239 Dec  2 11:19 _cb.cfs
-rw-rw-r-- 1 summatst summatst  1862427706 Dec  2 11:19 _rm.cfs
-rw-rw-r-- 1 summatst summatst         203 Dec  2 11:21 segments_3
-rw-rw-r-- 1 summatst summatst          20 Dec  2 11:18 segments.gen

-----------------

Regards,
Toke Eskildsen


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 14 14:40:18 2009
Return-Path: <java-user-return-44088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91848 invoked from network); 14 Dec 2009 14:40:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Dec 2009 14:40:18 -0000
Received: (qmail 40158 invoked by uid 500); 14 Dec 2009 14:40:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40095 invoked by uid 500); 14 Dec 2009 14:40:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40085 invoked by uid 99); 14 Dec 2009 14:40:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Dec 2009 14:40:16 +0000
X-ASF-Spam-Status: No, hits=-4.2 required=5.0
	tests=AWL,BAYES_00,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.106.221.19] (HELO mail204.messagelabs.com) (194.106.221.19)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Dec 2009 14:40:13 +0000
X-VirusChecked: Checked
X-Env-Sender: wzzelfzzel@abas.de
X-Msg-Ref: server-7.tower-204.messagelabs.com!1260801590!18768371!1
X-StarScan-Version: 6.2.4; banners=-,-,-
X-Originating-IP: [212.202.226.202]
Received: (qmail 20075 invoked from network); 14 Dec 2009 14:39:50 -0000
Received: from gate.abas.de (HELO gate.abas.de) (212.202.226.202)
  by server-7.tower-204.messagelabs.com with DHE-RSA-AES256-SHA encrypted SMTP; 14 Dec 2009 14:39:50 -0000
Received: from gate.abas.de (localhost [127.0.0.1])
	by gate.abas.de (8.14.3/8.14.3) with ESMTP id nBEEdoR2030251
	for <java-user@lucene.apache.org>; Mon, 14 Dec 2009 15:39:50 +0100 (CET)
Received: (from localhost) by gate.abas.de (MSCAN) id 3/gate.abas.de/smtp-gw/mscan; Mon Dec 14 15:39:50 2009
From: Stefan Trcek <wzzelfzzel@abas.de>
To: java-user@lucene.apache.org
Date: Mon, 14 Dec 2009 15:39:34 +0100
User-Agent: KMail/1.9.10
MIME-Version: 1.0
Content-Disposition: inline
Subject: NGramTokenizer stops working after about 1000 terms
Content-Type: Multipart/Mixed;
  boundary="Boundary-00=_n4kJL//JJ4o0qNU"
Message-ID: <200912141539.35382.wzzelfzzel@abas.de>
X-ABAS-MAIL-MARK: added by mailmarker.abas.de

--Boundary-00=_n4kJL//JJ4o0qNU
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello

For a source code (git repo) search engine I choose to use an ngram 
analyzer for substring search (something like "git blame").

This worked fine except it didn't find some strings. I tracked it down 
to the analyzer. When the ngram analyzer yielded about 1000 terms it 
stopped yielding more terms, seem to be at most (1024 - ngram_length) 
terms. When I use StandardAnalyzer it works as expected.
Is this a bug or did I miss a limit?

Tested with lucene-2.9.1 and 3.0, this is the core routine I use:

public static class NGramAnalyzer5 extends Analyzer {
    public TokenStream tokenStream(String fieldName, Reader reader) {
        return new NGramTokenizer(reader, 5, 5);
    }
}

public static String[] analyzeString(Analyzer analyzer,
            String fieldName, String string) throws IOException {
    List<String> output = new ArrayList<String>();
    TokenStream tokenStream = analyzer.tokenStream(fieldName,
            new StringReader(string));
    TermAttribute termAtt = (TermAttribute)tokenStream.addAttribute(
            TermAttribute.class);
    tokenStream.reset();
    while (tokenStream.incrementToken()) {
        output.add(termAtt.term());
    }
    tokenStream.end();
    tokenStream.close();
    return output.toArray(new String[0]);
}  

The complete example is attached. "in.txt" must be in "." and is plain 
ASCII.

Stefan

--Boundary-00=_n4kJL//JJ4o0qNU
Content-Type: text/x-java;
  charset="iso 8859-15";
  name="AnalyzeString.java"
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
	filename="AnalyzeString.java"

import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.IOException;
import java.io.Reader;
import java.io.StringReader;
import java.util.ArrayList;
import java.util.List;

import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.TokenStream;
import org.apache.lucene.analysis.ngram.NGramTokenizer;
import org.apache.lucene.analysis.tokenattributes.TermAttribute;


public class AnalyzeString {

    public static class NGramAnalyzer5 extends Analyzer {

        public NGramAnalyzer5() {
            super();
        }

        @Override
        public TokenStream tokenStream(String fieldName, Reader reader) {
            return new NGramTokenizer(reader, 4, 4);
        }

    }

    public static String[] analyzeString(Analyzer analyzer, String fieldName, String string) throws IOException {
        List<String> output = new ArrayList<String>();
        TokenStream tokenStream = analyzer.tokenStream(fieldName, new StringReader(string));
        TermAttribute termAtt = (TermAttribute)tokenStream.addAttribute(TermAttribute.class);
        // 3.0.0: TermAttribute termAtt = tokenStream.addAttribute(TermAttribute.class);
        tokenStream.reset();
        while (tokenStream.incrementToken()) {
            output.add(termAtt.term());
        }
        tokenStream.end();
        tokenStream.close();
        return output.toArray(new String[0]);
    }  

    public static void main(String[] args) throws IOException {
        BufferedReader in = new BufferedReader(new FileReader(new File("in.txt")));
        StringBuilder b = new StringBuilder();
        String line;
        while ((line = in.readLine()) != null) {
            b.append(line);
        }
        String[] result = analyzeString(new NGramAnalyzer5(), "", b.toString());
        for (String s: result) {
            System.out.println(s);
        }
    }

}

--Boundary-00=_n4kJL//JJ4o0qNU
Content-Type: text/plain;
  charset="iso 8859-15";
  name="in.txt"
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
	filename="in.txt"

Applications that build their search capabilities upon Lucene may support
documents in various formats HTML, XML, PDF, Word
just to name a few. Lucene does not care about the Parsing of these and other
document formats, and it is the responsibility of the application using Lucene
to use an appropriate Parser to convert the original format into plain text
before passing that plain text to Lucene.
Plain text passed to Lucene for indexing goes through a process generally
called tokenization namely breaking of the input text into small indexing
elements Tokens. The way input text is broken into tokens very much dictates
further capabilities of search upon that text. For instance, sentences
beginnings and endings can be identified to provide for more accurate
phrase and proximity searches (though sentence identification is not
provided by Lucene).
Analysis is one of the main causes of performance degradation during indexing.
Simply put, the more you analyze the slower the indexing (in most cases).
Perhaps your application would be just fine using the simple
WhitespaceTokenizer combined with a StopFilter. The contrib/benchmark
library can be useful for testing out the speed of the analysis process.
 Applications usually do not invoke analysis Lucene does it for them:

    * At indexing, as a consequence of addDocument(doc), the Analyzer in effect for indexing is invoked for each indexed field of the added document.
    * At search, as a consequence of QueryParser.parse(queryText), the QueryParser may invoke the Analyzer in effect. Note that for some queries analysis does not take place, e.g. wildcard queries.

However an application might invoke Analysis of any text for testing or for any other purpose, something like:

      Analyzer analyzer = new StandardAnalyzer(); // or any other analyzer
      TokenStream ts = analyzer.tokenStream("myfield",new StringReader("some text goes here"));
      Token t = ts.next();
      while (t!=null) {
        System.out.println("token: "+t));
        t = ts.next();
      }

 Selecting the "correct" analyzer is crucial for search quality,
and can also affect indexing and search performance. The "correct" analyzer
differs between applications. Lucene java's wiki page AnalysisParalysis
provides some data on "analyzing your analyzer". Here are some rules of thumb:

   1. Test test test... (did we say test?)
   2. Beware of over analysis might hurt indexing performance.
   3. Start with same analyzer for indexing and search, otherwise searches would not find what they are supposed to...
   4. In some cases a different analyzer is required for indexing and search, for instance:
          * Certain searches require more stop words to be filtered. (I.e. more than those that were filtered at indexing.)
          * Query expansion by synonyms, acronyms, auto spell correction, etc.
      This might sometimes require a modified analyzer see the next section on how to do that.

Implementing your own Analyzer

Creating your own Analyzer is straightforward. It usually involves either
wrapping an existing Tokenizer and set of TokenFilters to create a new Analyzer
or creating both the Analyzer and a Tokenizer or TokenFilter. Before pursuing
this approach, you may find it worthwhile to explore the contrib/analyzers
library and/or ask on the java-user@lucene.apache.org mailing list first to
see if what you need already exists. If you are still committed to creating
your own Analyzer or TokenStream derivation (Tokenizer or TokenFilter) have a
look at the source code of any one of the many samples located in this package.

The following sections discuss some aspects of implementing your own analyzer. 


--Boundary-00=_n4kJL//JJ4o0qNU
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--Boundary-00=_n4kJL//JJ4o0qNU--

From java-user-return-44089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 14 17:21:30 2009
Return-Path: <java-user-return-44089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63921 invoked from network); 14 Dec 2009 17:21:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Dec 2009 17:21:30 -0000
Received: (qmail 49297 invoked by uid 500); 14 Dec 2009 17:21:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49236 invoked by uid 500); 14 Dec 2009 17:21:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49153 invoked by uid 99); 14 Dec 2009 17:21:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Dec 2009 17:21:27 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.78.24 as permitted sender)
Received: from [74.125.78.24] (HELO ey-out-2122.google.com) (74.125.78.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Dec 2009 17:21:25 +0000
Received: by ey-out-2122.google.com with SMTP id 22so1003829eye.3
        for <java-user@lucene.apache.org>; Mon, 14 Dec 2009 09:21:03 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=XRtyIKGzS72LbBRfBaYB1xpTqSFi17B9GeB2931Iy7U=;
        b=oMMwTSS08xJdYZT7NgVLWFm2TaWKhbWn/p0Orunif0sasMoRw32k52enu6Ve7IET65
         CvT6eh87boOPaFRp94I3JM5NG2XwEIdLlQErc89exXKf3/TJQihudLam1ujJbJWBC9bW
         dagOOjnAa+i1T7iSUpBSPM3bian5llJ4Cj2Go=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=RACG6NudiIi1IP7/yoyeX6S4QU6KZRSvWAHBJJ00eTwW92yZINs3l9dp6PBvsmA7nV
         4Kr5yKIgLw3EY7xsKfhPj3m1z1Wi8NmcBseKvFPe7F6L4GhwhKXDx+PBLA4nTC7WYCCi
         o51jtajSsCkVISsbPE2NIVTAxp363q0X0ulNs=
MIME-Version: 1.0
Received: by 10.216.86.16 with SMTP id v16mr2022700wee.162.1260811263843; Mon, 
	14 Dec 2009 09:21:03 -0800 (PST)
In-Reply-To: <409596.23923.qm@web94816.mail.in2.yahoo.com>
References: <409596.23923.qm@web94816.mail.in2.yahoo.com>
Date: Mon, 14 Dec 2009 12:21:03 -0500
Message-ID: <359a92830912140921g3c44a83cqcc6d1c96d2e70d0b@mail.gmail.com>
Subject: Re: How to do ranking in lucene?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d588b9829ed1047ab37fcf

--0016e6d588b9829ed1047ab37fcf
Content-Type: text/plain; charset=ISO-8859-1

I really don't understand the question. Ranking is what Lucene *does*.
Here is a link explaining how Lucene ranks documents:
http://lucene.apache.org/java/2_4_0/scoring.html

<http://lucene.apache.org/java/2_4_0/scoring.html>If this isn't relevant,
you need to explain what about the current
ranking isn't working for you and what you want handled differently....

Best
Erick

On Mon, Dec 14, 2009 at 12:37 AM, DHIVYA M <dhivyakrishnan87@yahoo.com>wrote:

> Hi all,
>
> Am using lucene 2.3.1.
> Can anyone suggest me how to implement ranking in lucene? If its available
> how is it done?
>
> Thanks in advance,
> Dhivya
>
>
>      The INTERNET now has a personality. YOURS! See your Yahoo! Homepage.
> http://in.yahoo.com/

--0016e6d588b9829ed1047ab37fcf--

From java-user-return-44090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 14 17:34:59 2009
Return-Path: <java-user-return-44090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73041 invoked from network); 14 Dec 2009 17:34:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Dec 2009 17:34:59 -0000
Received: (qmail 75221 invoked by uid 500); 14 Dec 2009 17:34:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75141 invoked by uid 500); 14 Dec 2009 17:34:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75131 invoked by uid 99); 14 Dec 2009 17:34:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Dec 2009 17:34:56 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.78.24 as permitted sender)
Received: from [74.125.78.24] (HELO ey-out-2122.google.com) (74.125.78.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Dec 2009 17:34:54 +0000
Received: by ey-out-2122.google.com with SMTP id 22so1007259eye.3
        for <java-user@lucene.apache.org>; Mon, 14 Dec 2009 09:34:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=GQDTUQqIpPW6ihOxWueT8jVMSIqmR/i+3NHTCPN1r2M=;
        b=cYJW2nP1YwPpeEAM/IjIDD7xUXZiTjC1E4CsFlnh+w3iMK4u9g0CxBh4r0XACnXZOn
         jrGBEYFcPgqJadjQYAoHylSBfi200pWRigyRD7MqgDbxSM+2/JNJi4UsjyZfVDWjcxab
         0o7QZtkFpeWLjf41IdEh7TMAPpT1oHp62Wkf4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=cDQsHuRlbZTw1AUmoi08Wu3PAeM2RoERpuNfjiVS+QoOgiEf6XQ2r3zoIizG27CaPG
         TQltwKyFXOlRmmezhKLmY+iEekpCqC1ElmyXDEta8FFjiwbbkPxUI/Os8xv8lI3wo8HN
         vvi97ohSvz7lmAHjoed68JwSdWrysTGSyF4f8=
MIME-Version: 1.0
Received: by 10.216.85.138 with SMTP id u10mr1946859wee.185.1260812073209; 
	Mon, 14 Dec 2009 09:34:33 -0800 (PST)
In-Reply-To: <alpine.LFD.2.00.0912141251040.3524@grenache>
References: <alpine.LFD.2.00.0912141251040.3524@grenache>
Date: Mon, 14 Dec 2009 12:34:33 -0500
Message-ID: <359a92830912140934w57766d7esf44d856311afc71b@mail.gmail.com>
Subject: Re: SnowballAnalyzer and StopAnalyzer.ENGLISH_STOP_WORDS_SET ?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6dab6fbc09809047ab3af43

--0016e6dab6fbc09809047ab3af43
Content-Type: text/plain; charset=ISO-8859-1

Hmmm, that does seem a little confusing... Have you tried using
ENGLISH_STOP_WORDS_SET.toArray()?

WARNING: I haven't tried this myself and don't have access to
a test bed....

Erick

On Mon, Dec 14, 2009 at 7:55 AM, Nick Burch <nick@torchbox.com> wrote:

> Hi All
>
> I'm upgrading my code from 2.4 to 2.9, and I've hit an issue with
> deprecations.
>
> My old code was:
>        new SnowballAnalyzer("English", StopAnalyzer.ENGLISH_STOP_WORDS);
>
> Looking at the JavaDocs, I'd expected that the new format would be:
>        new SnowballAnalyzer(Version.LUCENE_CURRENT, "English",
> StopAnalyzer.ENGLISH_STOP_WORDS_SET);
>
> However, while StopAnalyzer has depcrecated ENGLISH_STOP_WORDS in favour of
> ENGLISH_STOP_WORDS_SET, and while SnowballAnalyzer seems to use a Set based
> stopwords list internally, there doesn't seem to be a constructor for
> SnowballAnalyzer that takes a set, only a String[] one
>
> Has anyone hit this before? Am I safe to make a patch to SnowballAnalyzer
> to create a matching constructor taking Set rather than String[] so I can
> use the non deprecated stopwords from StopAnalyzer, or am I barking up the
> wrong tree here?
>
> Thanks
> Nick
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6dab6fbc09809047ab3af43--

From java-user-return-44091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 14 17:41:36 2009
Return-Path: <java-user-return-44091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79528 invoked from network); 14 Dec 2009 17:41:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Dec 2009 17:41:36 -0000
Received: (qmail 91695 invoked by uid 500); 14 Dec 2009 17:41:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91596 invoked by uid 500); 14 Dec 2009 17:41:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91585 invoked by uid 99); 14 Dec 2009 17:41:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Dec 2009 17:41:33 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Dec 2009 17:41:23 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id D9A94D36004
	for <java-user@lucene.apache.org>; Mon, 14 Dec 2009 18:41:03 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id K3Opn76DhLul for <java-user@lucene.apache.org>;
	Mon, 14 Dec 2009 18:40:53 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id CBC3DD36002
	for <java-user@lucene.apache.org>; Mon, 14 Dec 2009 18:40:52 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <alpine.LFD.2.00.0912141251040.3524@grenache> <359a92830912140934w57766d7esf44d856311afc71b@mail.gmail.com>
Subject: RE: SnowballAnalyzer and StopAnalyzer.ENGLISH_STOP_WORDS_SET ?
Date: Mon, 14 Dec 2009 18:40:51 +0100
Message-ID: <940EDF3949C643B8B8B8E2DCD19C1567@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <359a92830912140934w57766d7esf44d856311afc71b@mail.gmail.com>
Thread-Index: Acp848bo0zgEICl5Rji5n3o1YalZvwAAKEEQ
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

Can you open an issue? This is a problem in SnowballAnalyzer missing to add
the set ctor.

In 2.9.1 you can only use it with the deprecated array and in 3.0 there it
breaks :-)
But you can always copy the set into an array using size() and Iterable.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Monday, December 14, 2009 6:35 PM
> To: java-user@lucene.apache.org
> Subject: Re: SnowballAnalyzer and StopAnalyzer.ENGLISH_STOP_WORDS_SET ?
> 
> Hmmm, that does seem a little confusing... Have you tried using
> ENGLISH_STOP_WORDS_SET.toArray()?
> 
> WARNING: I haven't tried this myself and don't have access to
> a test bed....
> 
> Erick
> 
> On Mon, Dec 14, 2009 at 7:55 AM, Nick Burch <nick@torchbox.com> wrote:
> 
> > Hi All
> >
> > I'm upgrading my code from 2.4 to 2.9, and I've hit an issue with
> > deprecations.
> >
> > My old code was:
> >        new SnowballAnalyzer("English", StopAnalyzer.ENGLISH_STOP_WORDS);
> >
> > Looking at the JavaDocs, I'd expected that the new format would be:
> >        new SnowballAnalyzer(Version.LUCENE_CURRENT, "English",
> > StopAnalyzer.ENGLISH_STOP_WORDS_SET);
> >
> > However, while StopAnalyzer has depcrecated ENGLISH_STOP_WORDS in favour
> of
> > ENGLISH_STOP_WORDS_SET, and while SnowballAnalyzer seems to use a Set
> based
> > stopwords list internally, there doesn't seem to be a constructor for
> > SnowballAnalyzer that takes a set, only a String[] one
> >
> > Has anyone hit this before? Am I safe to make a patch to
> SnowballAnalyzer
> > to create a matching constructor taking Set rather than String[] so I
> can
> > use the non deprecated stopwords from StopAnalyzer, or am I barking up
> the
> > wrong tree here?
> >
> > Thanks
> > Nick
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 14 21:37:46 2009
Return-Path: <java-user-return-44092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 818 invoked from network); 14 Dec 2009 21:37:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Dec 2009 21:37:46 -0000
Received: (qmail 93382 invoked by uid 500); 14 Dec 2009 21:37:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93277 invoked by uid 500); 14 Dec 2009 21:37:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93267 invoked by uid 99); 14 Dec 2009 21:37:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Dec 2009 21:37:42 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of akaris@gmail.com designates 209.85.211.185 as permitted sender)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Dec 2009 21:37:40 +0000
Received: by ywh15 with SMTP id 15so3502724ywh.5
        for <java-user@lucene.apache.org>; Mon, 14 Dec 2009 13:37:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:from:date:message-id
         :subject:to:content-type;
        bh=WSVwM+AVhdjcaEomPOKzI1t1265hMzESMA35kL462Uw=;
        b=SPiP0qtA4uE2auhy7iH3VpRZLqLmEw9ClQ6Ly2hNCyxoPjfqsIvEhTXT3UNFCtb5Y+
         M3P3Q8xCJl5HGCXxQpUW+F2lvkLD4pWyQF0iHyZJr3uBU1jxub0eztWsUr3nAFmeda/w
         PQENRWW4/lgMWaaXsUxaIKJPS/2MmKwIhQrXs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=Re2pirGdPzi97XrbvjvxgkPi006lOV4VaG0Owo+Qe273llOyy41GUlOs2FexBUquaj
         jbcLtGPevzedSC+Wydrh3rwKJlwSJ1cWIUFB4zoYI1CfDIpiovJpFriX1fWeQT/Z9Odz
         jsZgLD6IJtAJY573nhUsgSaHY7YSkQX/gAM9E=
MIME-Version: 1.0
Received: by 10.101.181.21 with SMTP id i21mr7903551anp.141.1260826639278; 
	Mon, 14 Dec 2009 13:37:19 -0800 (PST)
From: Michel Nadeau <akaris@gmail.com>
Date: Mon, 14 Dec 2009 16:36:59 -0500
Message-ID: <962c93f60912141336q173c3626l175892d82dedae85@mail.gmail.com>
Subject: Lower/Uppercase problem when searching in a not-analyzed field
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d261d5f5212d047ab713c3

--0016e6d261d5f5212d047ab713c3
Content-Type: text/plain; charset=ISO-8859-1

Hi !

My Lucene 3.0.0 index contains a field "DOMAIN" that contains an Internet
domain name - like

* www.DomainName.com
* www.domainname.com
* www.DomainName.com/path/to/document/doc.html?a=2

This field is indexed like this -

doc.add(new Field("DOMAIN", sValue, Field.Store.YES,
Field.Index.NOT_ANALYZED));

When I search in this field, my search query looks like this:

DOMAIN:www.DomainName*

My problem is that it seems it never returns domains with uppercase letters.

For example, I display all documents (using ConstantScoreQuery), and see
this domain name: www.BidClerk.com
...So I know it's there - and so I search for: DOMAIN:www.BidC* - well it
will *never* be found !

But whatever all-lowecase domain will be found, all the time.

My guess is that the problem is the analyzer I'm using - a StandadAnalyzer:

QueryParser parser = new QueryParser(Version.LUCENE_CURRENT, "content", new
StandardAnalyzer(Version.LUCENE_CURRENT));
q = parser.parse(QUERY);

So here are my questions:
* Should I use a KeywordAnalyzer instead?
* If I have domains like WWW.ASK.COM, www.ask.com, www.Ask.com,
WwW.AsK.CoM- and I search for "DOMAIN:
www.ask.com" ; will they all be found whatever the case?

Thanks!

- Mike
akaris@gmail.com

--0016e6d261d5f5212d047ab713c3--

From java-user-return-44093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 14 23:35:00 2009
Return-Path: <java-user-return-44093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66155 invoked from network); 14 Dec 2009 23:35:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Dec 2009 23:35:00 -0000
Received: (qmail 52321 invoked by uid 500); 14 Dec 2009 23:34:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52254 invoked by uid 500); 14 Dec 2009 23:34:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52232 invoked by uid 99); 14 Dec 2009 23:34:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Dec 2009 23:34:57 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of savvas.andreas.moysidis@googlemail.com designates 209.85.218.222 as permitted sender)
Received: from [209.85.218.222] (HELO mail-bw0-f222.google.com) (209.85.218.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Dec 2009 23:34:54 +0000
Received: by bwz22 with SMTP id 22so2656386bwz.5
        for <java-user@lucene.apache.org>; Mon, 14 Dec 2009 15:34:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=W5rf6AuZdew3L/9dk+rVv+XAR4SgyPM+DzMb/0KgvDw=;
        b=VbA6+rutPr6Kd/Jq3tbK5oBngaLEdCeFfFdhD6TihqMwppk5jkN7h1hRbpLrjDgKZf
         rtql9XNNf9SoXe/wAvcoIrGinGR4rB2s872Fz5bQ+sW++SyU3K4bMV6nO+HXYXir1j06
         ofu8Tw8gNpvdW6lv09bvuLmfnO7zcyv+14r2g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=mN/wMQFNJfFEw7aVpIDX0r/KZFqroc8JPw9ubSF4TUGGZX3G6vRud3paxhj7CnpGJN
         gOi+T7VZQ/6Q4v9f8ykywoRWaDbBxxWuQ0pn4YJS6hYmGe6/xLyveEPC2kQdbhvHpPir
         Yoll2HT9j1SI/sWxJ//BP+vB+KPfgqV0/CAk0=
MIME-Version: 1.0
Received: by 10.204.174.197 with SMTP id u5mr1336910bkz.50.1260833672790; Mon, 
	14 Dec 2009 15:34:32 -0800 (PST)
In-Reply-To: <962c93f60912141336q173c3626l175892d82dedae85@mail.gmail.com>
References: <962c93f60912141336q173c3626l175892d82dedae85@mail.gmail.com>
Date: Mon, 14 Dec 2009 23:34:32 +0000
Message-ID: <eac5aec20912141534k45664635o97314b020918b78a@mail.gmail.com>
Subject: Re: Lower/Uppercase problem when searching in a not-analyzed field
From: Savvas-Andreas Moysidis <savvas.andreas.moysidis@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00032555567a300414047ab8b78b

--00032555567a300414047ab8b78b
Content-Type: text/plain; charset=ISO-8859-1

Hi,

my guess would also be that the StandardAnalyzer lowercases your terms while
you have indexed them as they are without lowercasing.
One idea would be to use the PerFieldAnalyzerWrapper and map a
KeywordAnalyzer (which basically doesn't tokenise your stream at all) to any
fields you want not analyzed.

Remember that when indexing you don't need to specify
Field.Index.NOT_ANALYZED to those fields anymore and that you need to
specify the same analyzer to the QueryParser when searching.


savvas.

2009/12/14 Michel Nadeau <akaris@gmail.com>

> Hi !
>
> My Lucene 3.0.0 index contains a field "DOMAIN" that contains an Internet
> domain name - like
>
> * www.DomainName.com
> * www.domainname.com
> * www.DomainName.com/path/to/document/doc.html?a=2
>
> This field is indexed like this -
>
> doc.add(new Field("DOMAIN", sValue, Field.Store.YES,
> Field.Index.NOT_ANALYZED));
>
> When I search in this field, my search query looks like this:
>
> DOMAIN:www.DomainName*
>
> My problem is that it seems it never returns domains with uppercase
> letters.
>
> For example, I display all documents (using ConstantScoreQuery), and see
> this domain name: www.BidClerk.com
> ...So I know it's there - and so I search for: DOMAIN:www.BidC* - well it
> will *never* be found !
>
> But whatever all-lowecase domain will be found, all the time.
>
> My guess is that the problem is the analyzer I'm using - a StandadAnalyzer:
>
> QueryParser parser = new QueryParser(Version.LUCENE_CURRENT, "content", new
> StandardAnalyzer(Version.LUCENE_CURRENT));
> q = parser.parse(QUERY);
>
> So here are my questions:
> * Should I use a KeywordAnalyzer instead?
> * If I have domains like WWW.ASK.COM, www.ask.com, www.Ask.com,
> WwW.AsK.CoM- and I search for "DOMAIN:
> www.ask.com" ; will they all be found whatever the case?
>
> Thanks!
>
> - Mike
> akaris@gmail.com
>

--00032555567a300414047ab8b78b--

From java-user-return-44094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 14 23:36:13 2009
Return-Path: <java-user-return-44094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66520 invoked from network); 14 Dec 2009 23:36:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Dec 2009 23:36:13 -0000
Received: (qmail 55138 invoked by uid 500); 14 Dec 2009 23:36:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55048 invoked by uid 500); 14 Dec 2009 23:36:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55038 invoked by uid 99); 14 Dec 2009 23:36:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Dec 2009 23:36:11 +0000
X-ASF-Spam-Status: No, hits=-3.8 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.65.145.75] (HELO p02c12o142.mxlogic.net) (208.65.145.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Dec 2009 23:36:09 +0000
Received: from unknown [67.132.206.99] (EHLO donkey.hmsonline.com)
	by p02c12o142.mxlogic.net(mxl_mta-6.4.0-2)
	with ESMTP id 3dbc62b4.0.121823.00-003.247704.p02c12o142.mxlogic.net (envelope-from <jplater@healthmarketscience.com>);
	Mon, 14 Dec 2009 16:35:48 -0700 (MST)
X-MXL-Hash: 4b26cbd4487ed3ae-468179f83a5a23ee29a5bb80f6113ab265a193a7
Received: from pwex01.zoo.hmsonline.com ([10.67.88.109])
	by donkey.hmsonline.com (8.13.1/8.13.1) with ESMTP id nBENZlfk013818
	for <java-user@lucene.apache.org>; Mon, 14 Dec 2009 18:35:47 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lower/Uppercase problem when searching in a not-analyzed field
Date: Mon, 14 Dec 2009 18:35:47 -0500
Message-ID: <67B9FB634299E5469D36BF5B3537F0240EDF65@pwex01.zoo.hmsonline.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lower/Uppercase problem when searching in a not-analyzed field
Thread-Index: Acp9Ba1v6boaLvhDSOSky0HFV8/JAgAD7R/X
References: <962c93f60912141336q173c3626l175892d82dedae85@mail.gmail.com>
From: "Jeff Plater" <jplater@healthmarketscience.com>
To: <java-user@lucene.apache.org>
X-Spam: [F=0.2000000000; CM=0.500; S=0.200(2009113001)]
X-MAIL-FROM: <jplater@healthmarketscience.com>
X-SOURCE-IP: [67.132.206.99]
X-AnalysisOut: [v=1.0 c=1 a=nVh4yX3EuFMA:10 a=xdWuvbPJTlx+8X/s3BW2YQ==:17 ]
X-AnalysisOut: [a=pGLkceISAAAA:8 a=mV9VRH-2AAAA:8 a=E4mmlI9lAAAA:8 a=0by8a]
X-AnalysisOut: [Va9AAAA:8 a=SaT-V5p6AAAA:8 a=zoqXRwuV3iIlIpBltyQA:9 a=SNyM]
X-AnalysisOut: [5jcxHUKpsDjCl1J6uDOB_1IA:4 a=pni9oSkO4TkA:10 a=MSl-tDqOz04]
X-AnalysisOut: [A:10]

The issue is that you are using an analyzer on the search query and not =
at index time.  The StandardAnalyzer that you are using at search time =
is lowercasing the query before searching against the index.  You have a =
few options that I can think of:

1 - use a different analyzer at search time (one that doesn't effect =
case - if there is one or create one yourself)
2 - analyze the field at index time (optionally storing the original =
field in a non-analyzed state - if you want the original Domain)

The KeywordAnalyzer probably isn't what you want because if you use it =
at search time you won't be able to use wildcard searching (unless you =
don't care about wildcard searching).


-Jeff


-----Original Message-----
From: Michel Nadeau [mailto:akaris@gmail.com]
Sent: Mon 12/14/2009 4:36 PM
To: java-user@lucene.apache.org
Subject: Lower/Uppercase problem when searching in a not-analyzed field
=20
Hi !

My Lucene 3.0.0 index contains a field "DOMAIN" that contains an =
Internet
domain name - like

* www.DomainName.com
* www.domainname.com
* www.DomainName.com/path/to/document/doc.html?a=3D2

This field is indexed like this -

doc.add(new Field("DOMAIN", sValue, Field.Store.YES,
Field.Index.NOT_ANALYZED));

When I search in this field, my search query looks like this:

DOMAIN:www.DomainName*

My problem is that it seems it never returns domains with uppercase =
letters.

For example, I display all documents (using ConstantScoreQuery), and see
this domain name: www.BidClerk.com
...So I know it's there - and so I search for: DOMAIN:www.BidC* - well =
it
will *never* be found !

But whatever all-lowecase domain will be found, all the time.

My guess is that the problem is the analyzer I'm using - a =
StandadAnalyzer:

QueryParser parser =3D new QueryParser(Version.LUCENE_CURRENT, =
"content", new
StandardAnalyzer(Version.LUCENE_CURRENT));
q =3D parser.parse(QUERY);

So here are my questions:
* Should I use a KeywordAnalyzer instead?
* If I have domains like WWW.ASK.COM, www.ask.com, www.Ask.com,
WwW.AsK.CoM- and I search for "DOMAIN:
www.ask.com" ; will they all be found whatever the case?

Thanks!

- Mike
akaris@gmail.com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 15 04:24:19 2009
Return-Path: <java-user-return-44095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79447 invoked from network); 15 Dec 2009 04:24:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Dec 2009 04:24:19 -0000
Received: (qmail 69143 invoked by uid 500); 15 Dec 2009 04:24:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69058 invoked by uid 500); 15 Dec 2009 04:24:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69048 invoked by uid 99); 15 Dec 2009 04:24:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 04:24:13 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of azlist1@gmail.com designates 209.85.216.171 as permitted sender)
Received: from [209.85.216.171] (HELO mail-px0-f171.google.com) (209.85.216.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 04:24:05 +0000
Received: by pxi1 with SMTP id 1so3179427pxi.29
        for <java-user@lucene.apache.org>; Mon, 14 Dec 2009 20:23:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=tO9CjB/CWwSz0pdljSgprrIKX6v4DMaxZspyGxegzRE=;
        b=ivvLZ+V+6L68hJzljjtzMrHXKECeBBc5O7rhbkapPPwe5N4PKSNJq8KHSLbnXHvx/h
         9/QJmjieqGUgkqQK6qbmw24Wg7P51y6OEa7LBlGNmuQHznzDUuozkVGG5G+O8jPwPOCh
         dLLa8oO+1iZa+oxZOsU/0QsRA1/v7fsaKZeXo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=vjlO26MlCsxRlOLY49pbbxEUCFlJE518WZvuaiPmFOCiPp2VHMDWblf9qP9Olc7e5J
         sIeXt5T0pzHTvyTABoN0XvkN4tWkySGlUjRRS1PBT1auzXC3V/xa6ePKVzCc0ikRcik/
         eeu+oCqJ2CnacSBi8QSs2Bg9QUw8GTH8zXHAY=
MIME-Version: 1.0
Received: by 10.141.90.9 with SMTP id s9mr4001928rvl.126.1260851023800; Mon, 
	14 Dec 2009 20:23:43 -0800 (PST)
Date: Tue, 15 Dec 2009 05:23:43 +0100
Message-ID: <76c1202b0912142023i683e2596mf99b1f7def49b233@mail.gmail.com>
Subject: Document category identification in query
From: Alex <azlist1@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd1111463694d047abcc113
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd1111463694d047abcc113
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I am trying to expand user queries to figure out potential document
categories implied in the query.
I wanted to know what was the best way to figure out the document category
that is the most relevant to the query.

Let me explain further:
I have created categories that are applied to documents I want to index.
Some example categories are :

Hotel
Restaurant
Fast Food
Chinese Restaurant
Church
Bank
Gas station


I also am trying to create category aliases such as Chinese food can also be
named Chinese restaurant with the same category unique ID.


The documents I index have 1 primary category and 1...N  secondary
categories such as :

McDonalds will be categorized under Fast food as a primary category but also
under Restaurant as secondary category.
The London Pub at the corner of my street will be categorized as Pub as
primary category and also as Bar, Food and Beverages, Restaurant, and Fast
Food (since then also have takeaway burgers ;).

This all gives me a set of categories that are quite clearly identified, as
well as a set of category aliases even though I'm aware that I can't figure
out all the possible aliases of all my categories. At least I have the most
obvious ones.


Now with all this, I wanted to know, with the help of Lucene (or any other
efficient method),  how I could figure out the most relevant category (if
any) behind a user query.


For example :

If my user looks for :
"Chang's chinese restaurant" the obvious category should be "Chinese
Restaurant"
but if my user looks for
"chines restauran"  (misspelled) the category should also be "Chinese
Restaurant" (such as google is capable of doing)
OR
"chinese bistro" should probably also return me the category "Chinese
Restaurant" since bistro is a very similar concept to "Retaurant" ...


Once the category is identified I can then query the index for documents
that match that category the best.


What is the proper way to identify the most relevant category in a user
query based on the above ?
Should I consider any other better approach ?


Any help appreciated.


Many thanks

Alex.

--000e0cd1111463694d047abcc113--

From java-user-return-44096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 15 04:51:07 2009
Return-Path: <java-user-return-44096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88748 invoked from network); 15 Dec 2009 04:51:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Dec 2009 04:51:06 -0000
Received: (qmail 85057 invoked by uid 500); 15 Dec 2009 04:51:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84910 invoked by uid 500); 15 Dec 2009 04:51:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84890 invoked by uid 99); 15 Dec 2009 04:51:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 04:51:01 +0000
X-ASF-Spam-Status: No, hits=-1.9 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.249.82.150] (HELO uptecs.net) (72.249.82.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 04:50:54 +0000
Received: from wanyin.its.unimelb.edu.au (wanyin.its.unimelb.edu.au [128.250.18.111])
	(Authenticated sender: jacob)
	by uptecs.net (Postfix) with ESMTPA id A2EE87C137
	for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 04:50:22 +0000 (UTC)
Message-Id: <F200C531-20F1-4613-82C2-5F9F22A966F3@unimelb.edu.au>
From: Jacob Rhoden <jrhoden@unimelb.edu.au>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=Apple-Mail-50--922420500
Mime-Version: 1.0 (Apple Message framework v936)
Subject: Hopfully simple question constructing BooleanQuery
Date: Tue, 15 Dec 2009 15:50:20 +1100
X-Mailer: Apple Mail (2.936)

--Apple-Mail-50--922420500
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit

Assume I have the following rather simple example that works fine:

	BooleanQuery bq = new BooleanQuery();
	bq.add(new PrefixQuery(new  
Term("heading",word)),BooleanClause.Occur.SHOULD);
	bq.add(new PrefixQuery(new  
Term("attribute",word)),BooleanClause.Occur.SHOULD);

Now I add the following and I assume its doing what it should be  
doing, not what I expect it should be doing:

	BooleanQuery bq = new BooleanQuery();
	bq.add(new PrefixQuery(new  
Term("heading",word)),BooleanClause.Occur.SHOULD);
	bq.add(new PrefixQuery(new  
Term("attribute",word)),BooleanClause.Occur.SHOULD);
	if(subjectId.length()>0)
		bq.add(new PrefixQuery(new  
Term("subject_id",subjectId)),BooleanClause.Occur.MUST);

This appears to be pulling out ALL records where "heading" matches or  
"attribute" matches plus all records where "subject_id" matches.

How do I make it return documents that match "heading" or "attribute"   
within the "subject_id" subset?

Kind regards,
Jacob Rhoden

____________________________________
Information Technology Services,
The University of Melbourne

Email: jrhoden@unimelb.edu.au
Phone: +61 3 8344 2884
Mobile: +61 4 1095 7575


--Apple-Mail-50--922420500--

From java-user-return-44097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 15 05:25:53 2009
Return-Path: <java-user-return-44097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98977 invoked from network); 15 Dec 2009 05:25:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Dec 2009 05:25:53 -0000
Received: (qmail 4676 invoked by uid 500); 15 Dec 2009 05:25:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3926 invoked by uid 500); 15 Dec 2009 05:25:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3898 invoked by uid 99); 15 Dec 2009 05:25:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 05:25:46 +0000
X-ASF-Spam-Status: No, hits=-1.0 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of moonwatcher32329@gmail.com designates 209.85.218.222 as permitted sender)
Received: from [209.85.218.222] (HELO mail-bw0-f222.google.com) (209.85.218.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 05:25:44 +0000
Received: by bwz22 with SMTP id 22so2772417bwz.5
        for <java-user@lucene.apache.org>; Mon, 14 Dec 2009 21:25:23 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=xu0UtlQa8wAuoQY3J7iinxzs1wZwo0sN1t/12Sj9cOI=;
        b=adCDyWSgljfdoH2BvPpdb61J3dnchTYNdjS6se/o20WrOyuaYA8H4M7GTnjYMiQj5X
         vrkOWBjAgXSoYxBu3vtnzxWcOHmG7Ta0+bbdoAHtHvMAOG4aiUnFIzqjuNFZ3CgjQN8k
         eqCngWDWg4EMztG4xY4LRBzx4M5sLT4Lvsm9Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=GCxSBeWmRxa8yttFHZcLJr/Wx5YgaszvcEZ/ij0HxjLB59zD5OGcHzWl5TONHVq+pb
         nL82JI5fktMUy8a5I3jyrbgtThiPOOSgh/hFTBN7LoPK6cIl76y6lTm14EC3s2yHJLt6
         jb8amRnlNauUI5DH7ZfWdKUS0G5IG+nQy1wTU=
MIME-Version: 1.0
Received: by 10.204.155.82 with SMTP id r18mr3265609bkw.180.1260854723262; 
	Mon, 14 Dec 2009 21:25:23 -0800 (PST)
In-Reply-To: <F200C531-20F1-4613-82C2-5F9F22A966F3@unimelb.edu.au>
References: <F200C531-20F1-4613-82C2-5F9F22A966F3@unimelb.edu.au>
Date: Tue, 15 Dec 2009 00:25:23 -0500
Message-ID: <17022a310912142125m37435de6g2d7d45a986d700c3@mail.gmail.com>
Subject: Re: Hopfully simple question constructing BooleanQuery
From: TCK <moonwatcher32329@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175ccf7ae4b92c047abd9dbe

--0015175ccf7ae4b92c047abd9dbe
Content-Type: text/plain; charset=ISO-8859-1

How about the following?

BooleanQuery bq1 = new BooleanQuery();
bq1.add(new PrefixQuery(new
Term("heading",word)),BooleanClause.Occur.SHOULD);
bq1.add(new PrefixQuery(new
Term("attribute",word)),BooleanClause.Occur.SHOULD);

BooleanQuery bq = new BooleanQuery();
bq.add(bq1, BooleanClause.Occur.MUST);
if(subjectId.length()>0)
    bq.add(new PrefixQuery(new Term("subject_id",subjectId)),
BooleanClause.Occur.MUST);

I think bq should now be your desired query.

-TCK



On Mon, Dec 14, 2009 at 11:50 PM, Jacob Rhoden <jrhoden@unimelb.edu.au>wrote:

> Assume I have the following rather simple example that works fine:
>
>        BooleanQuery bq = new BooleanQuery();
>        bq.add(new PrefixQuery(new
> Term("heading",word)),BooleanClause.Occur.SHOULD);
>        bq.add(new PrefixQuery(new
> Term("attribute",word)),BooleanClause.Occur.SHOULD);
>
> Now I add the following and I assume its doing what it should be doing, not
> what I expect it should be doing:
>
>        BooleanQuery bq = new BooleanQuery();
>        bq.add(new PrefixQuery(new
> Term("heading",word)),BooleanClause.Occur.SHOULD);
>        bq.add(new PrefixQuery(new
> Term("attribute",word)),BooleanClause.Occur.SHOULD);
>        if(subjectId.length()>0)
>                bq.add(new PrefixQuery(new
> Term("subject_id",subjectId)),BooleanClause.Occur.MUST);
>
> This appears to be pulling out ALL records where "heading" matches or
> "attribute" matches plus all records where "subject_id" matches.
>
> How do I make it return documents that match "heading" or "attribute"
>  within the "subject_id" subset?
>
> Kind regards,
> Jacob Rhoden
>
> ____________________________________
> Information Technology Services,
> The University of Melbourne
>
> Email: jrhoden@unimelb.edu.au
> Phone: +61 3 8344 2884
> Mobile: +61 4 1095 7575
>
>

--0015175ccf7ae4b92c047abd9dbe--

From java-user-return-44098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 15 05:31:26 2009
Return-Path: <java-user-return-44098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1759 invoked from network); 15 Dec 2009 05:31:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Dec 2009 05:31:26 -0000
Received: (qmail 8255 invoked by uid 500); 15 Dec 2009 05:31:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8045 invoked by uid 500); 15 Dec 2009 05:31:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8033 invoked by uid 99); 15 Dec 2009 05:31:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 05:31:21 +0000
X-ASF-Spam-Status: No, hits=-2.1 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.249.82.150] (HELO uptecs.net) (72.249.82.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 05:31:19 +0000
Received: from wanyin.its.unimelb.edu.au (wanyin.its.unimelb.edu.au [128.250.18.111])
	(Authenticated sender: jacob)
	by uptecs.net (Postfix) with ESMTPA id C5A367C137
	for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 05:30:57 +0000 (UTC)
Message-Id: <C240C3D6-046E-4FD1-8930-B540C3872953@unimelb.edu.au>
From: Jacob Rhoden <jrhoden@unimelb.edu.au>
To: java-user@lucene.apache.org
In-Reply-To: <17022a310912142125m37435de6g2d7d45a986d700c3@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v936)
Subject: Re: Hopfully simple question constructing BooleanQuery
Date: Tue, 15 Dec 2009 16:30:56 +1100
References: <F200C531-20F1-4613-82C2-5F9F22A966F3@unimelb.edu.au> <17022a310912142125m37435de6g2d7d45a986d700c3@mail.gmail.com>
X-Mailer: Apple Mail (2.936)

Exactly what I was trying to do. Thanks.

On 15/12/2009, at 4:25 PM, TCK wrote:

> How about the following?
>
> BooleanQuery bq1 = new BooleanQuery();
> bq1.add(new PrefixQuery(new
> Term("heading",word)),BooleanClause.Occur.SHOULD);
> bq1.add(new PrefixQuery(new
> Term("attribute",word)),BooleanClause.Occur.SHOULD);
>
> BooleanQuery bq = new BooleanQuery();
> bq.add(bq1, BooleanClause.Occur.MUST);
> if(subjectId.length()>0)
>    bq.add(new PrefixQuery(new Term("subject_id",subjectId)),
> BooleanClause.Occur.MUST);
>
> I think bq should now be your desired query.
>
> -TCK


____________________________________
Information Technology Services,
The University of Melbourne

Email: jrhoden@unimelb.edu.au
Phone: +61 3 8344 2884
Mobile: +61 4 1095 7575


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 15 07:09:19 2009
Return-Path: <java-user-return-44099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56957 invoked from network); 15 Dec 2009 07:09:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Dec 2009 07:09:19 -0000
Received: (qmail 84674 invoked by uid 500); 15 Dec 2009 07:09:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84585 invoked by uid 500); 15 Dec 2009 07:09:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84575 invoked by uid 99); 15 Dec 2009 07:09:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 07:09:15 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.210.192 as permitted sender)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 07:09:07 +0000
Received: by yxe30 with SMTP id 30so4207415yxe.29
        for <java-user@lucene.apache.org>; Mon, 14 Dec 2009 23:08:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=KmY9yH723PhEwhqPghde3CVzI2Yx97MSFXI9pmPSb5A=;
        b=EyM6CDPwAhWFyqujK9umWIPaqunbmgI9mdvhB4K0d9dGnMzbZp7VR+UUd2GLCsfIR1
         jvpaBqMLZuFHRNrgju9/njhzPqZn4geUqk4SG7TqrVtskskJKgFKvukZ4iWU+SqSh+KX
         nU1HZd8m0LPkgVj+sHeblzuJXeKS3SNYHO0Gs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=sND0RsYy90eQNTzix1rOW6mSSrMsGN/fII9h8orjQwt2vbn1Rput7rEIF94cuBhl9N
         RrGkpP+TETtzpBIsPqEpGXztUfBjjDTI5yZKFajzfwT0mx3j2VI4SFca5eizZCLppnqF
         Rp/zSvEmSOnu8XCYHStiJ+BtbfDDWH8kRkTfE=
MIME-Version: 1.0
Received: by 10.91.21.10 with SMTP id y10mr1956658agi.113.1260860925949; Mon, 
	14 Dec 2009 23:08:45 -0800 (PST)
Date: Tue, 15 Dec 2009 15:08:45 +0800
Message-ID: <7d94dcde0912142308n20407e83k1f753a3985958322@mail.gmail.com>
Subject: Search correction
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e641db1e9a3760047abf0f22
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e641db1e9a3760047abf0f22
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hi, all,
     Most of us should have some experience about inputing an incorrection
keyword in google or some other search engine. When this happens, google ca=
n
celverly suggest you another query keyword(not google suggestion).
    e.g. you intend to search for redhat, instead you type rdehat, the
google will tell you  Did you mean:
*redhat*<http://www.google.com/search?hl=3Den&newwindow=3D1&ei=3D0DUnS98JzY=
aQBbSTyfgM&sa=3DX&oi=3Dspell&resnum=3D0&ct=3Dresult&cd=3D1&ved=3D0CAYQBSgA&=
q=3Dredhat&spell=3D1>


How can i implement this feature in my own system?

--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--0016e641db1e9a3760047abf0f22--

From java-user-return-44100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 15 07:33:24 2009
Return-Path: <java-user-return-44100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62147 invoked from network); 15 Dec 2009 07:33:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Dec 2009 07:33:24 -0000
Received: (qmail 6674 invoked by uid 500); 15 Dec 2009 07:33:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6614 invoked by uid 500); 15 Dec 2009 07:33:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6604 invoked by uid 99); 15 Dec 2009 07:33:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 07:33:22 +0000
X-ASF-Spam-Status: No, hits=-3.6 required=5.0
	tests=BAYES_00,RCVD_IN_DNSWL_LOW
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.25 as permitted sender)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 07:33:19 +0000
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by gateway1.messagingengine.com (Postfix) with ESMTP id 93F96C7EDF
	for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 02:32:58 -0500 (EST)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by compute1.internal (MEProxy); Tue, 15 Dec 2009 02:32:58 -0500
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding; s=smtpout; bh=R57Y+f6lZEufFxlJEW61CMZtvIg=; b=HrZXIndnXA5B2+UUAhVeXXNy3mSBuvSC0kFysax8rXr03ygBjcT63vkUqU4xwENsAUmXBND6h+gstC27gnZULq6t53vA9wwiLF6iht8Rjc8jdYe84OyMwguOoVOEE+Hfr24Zi6VM325r+RG/UeyjOBx7q/ks6/9CKLKh1xvhnLc=
X-Sasl-enc: KhwNugIErphLuI4CqbaClYp3F7/RITaj7uKWOnf7fVJt 1260862378
Received: from macbook.lan (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPA id E0CF237F77
	for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 02:32:57 -0500 (EST)
Message-ID: <4B273BB8.6010101@fastmail.fm>
Date: Tue, 15 Dec 2009 07:33:12 +0000
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Thunderbird 2.0.0.23 (Macintosh/20090812)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Looking for a MappingCharFilter that accepts regular expressions
References: <4B1D6A14.8020304@fastmail.fm> <4B251E8E.8040809@r.email.ne.jp> <4B25212A.4050902@r.email.ne.jp>
In-Reply-To: <4B25212A.4050902@r.email.ne.jp>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Koji Sekiguchi wrote:
> Koji Sekiguchi wrote:
>> Paul Taylor wrote:
>>> I want my search to treat 'No. 1' and 'No.1' the same, because in 
>>> our context its one token I want 'No. 1' to become 'No.1',  I need 
>>> to do this before tokenizing because the tokenizer would split one 
>>> value into two terms and one into just one term. I already use a 
>>> NormalizeMapFilter to map &' to 'and' but I think it only takes 
>>> literal text and I need to
>>>
>>> 1. be case insensitive (but lowercasefilter is only applied after 
>>> tokenizing)
>>>
>>> 2. cope with all numbers e.g no. 109
>>>
>>> So I was going to subclass BaseCharFilter and do my matches with a 
>>> regular expression like ([Nn]+[Oo]+\\.) ([0-9]+) but I'm struggling 
>>> to understand the offset methods you have to do once you get a 
>>> match. Has anyone already got a regular expression Charfilter OR am 
>>> I approaching this all wrong
>>>
>>> thanks Paul
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>> Hi Paul,
>>
>> I've written a patch for this kind of purpose. See:
>>
>> https://issues.apache.org/jira/browse/SOLR-1653
>>
>> Koji
>>
> Oops. I thought this is solr-user list, but it was java-user. :-D
>
> Koji
>
Hi Koji

Just saw your post, could you send me a link to just the

PatternReplaceCharFilter.java

file, please

Paul




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 15 07:49:52 2009
Return-Path: <java-user-return-44101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65918 invoked from network); 15 Dec 2009 07:49:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Dec 2009 07:49:52 -0000
Received: (qmail 21449 invoked by uid 500); 15 Dec 2009 07:49:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21374 invoked by uid 500); 15 Dec 2009 07:49:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21364 invoked by uid 99); 15 Dec 2009 07:49:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 07:49:50 +0000
X-ASF-Spam-Status: No, hits=-3.6 required=5.0
	tests=BAYES_00,RCVD_IN_DNSWL_LOW
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.25 as permitted sender)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 07:49:46 +0000
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by gateway1.messagingengine.com (Postfix) with ESMTP id AD580C52F2
	for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 02:49:22 -0500 (EST)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by compute1.internal (MEProxy); Tue, 15 Dec 2009 02:49:22 -0500
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding; s=smtpout; bh=hPB0aI+DbY7qZI1/r58KPwH26kc=; b=AGi04XckKb0sEKV/vfrO7i+a+Ptg2nC/TAtdIIh/SQqo1yl64cpP3FPNvRkoIQ74qJ1tc/5VKpgs7G2a5GHHix1aKyuziUsq1V6Ge+SuK8CcRmbq1qv4EB3w39Paqs0JpgYk53You4TfWnUimOhJR0vwVV1LfzPL4C7FjTXzTzc=
X-Sasl-enc: lfiF7cWsofqsshVlnHmZ5aKfEAC5oVVRn2S9ZHPmYIv4 1260863146
Received: from macbook.lan (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPA id 5004D37F9C
	for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 02:45:46 -0500 (EST)
Message-ID: <4B273EB8.4060509@fastmail.fm>
Date: Tue, 15 Dec 2009 07:46:00 +0000
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Thunderbird 2.0.0.23 (Macintosh/20090812)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Looking for a MappingCharFilter that accepts regular expressions
References: <4B1D6A14.8020304@fastmail.fm> <4B251E8E.8040809@r.email.ne.jp> <4B25212A.4050902@r.email.ne.jp> <4B273BB8.6010101@fastmail.fm>
In-Reply-To: <4B273BB8.6010101@fastmail.fm>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Paul Taylor wrote:
> Koji Sekiguchi wrote:
>> Koji Sekiguchi wrote:
>>> Paul Taylor wrote:
>>>> I want my search to treat 'No. 1' and 'No.1' the same, because in 
>>>> our context its one token I want 'No. 1' to become 'No.1',  I need 
>>>> to do this before tokenizing because the tokenizer would split one 
>>>> value into two terms and one into just one term. I already use a 
>>>> NormalizeMapFilter to map &' to 'and' but I think it only takes 
>>>> literal text and I need to
>>>>
>>>> 1. be case insensitive (but lowercasefilter is only applied after 
>>>> tokenizing)
>>>>
>>>> 2. cope with all numbers e.g no. 109
>>>>
>>>> So I was going to subclass BaseCharFilter and do my matches with a 
>>>> regular expression like ([Nn]+[Oo]+\\.) ([0-9]+) but I'm struggling 
>>>> to understand the offset methods you have to do once you get a 
>>>> match. Has anyone already got a regular expression Charfilter OR am 
>>>> I approaching this all wrong
>>>>
>>>> thanks Paul
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
CharStream.Found it at 
http://svn.apache.org/viewvc/lucene/solr/trunk/src/java/org/apache/solr/analysis/PatternReplaceFilter.java?revision=804726&view=markup, 
BTW why not ad this to the Lucene coebase rather than solr code base.

Unfortunately it doesn't address my problem because it is a tokenfilter 
that works on a tokenstream, but Im trying to write a CharFilter to be 
applied before the text is tokenized , but I'm struggling with 
implementing CharStream.correctOffset()


Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 15 09:02:13 2009
Return-Path: <java-user-return-44102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84419 invoked from network); 15 Dec 2009 09:02:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Dec 2009 09:02:12 -0000
Received: (qmail 890 invoked by uid 500); 15 Dec 2009 09:02:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 796 invoked by uid 500); 15 Dec 2009 09:02:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 786 invoked by uid 99); 15 Dec 2009 09:02:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 09:02:10 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.217.225 as permitted sender)
Received: from [209.85.217.225] (HELO mail-gx0-f225.google.com) (209.85.217.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 09:02:06 +0000
Received: by gxk25 with SMTP id 25so4127990gxk.5
        for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 01:01:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=uQS6vwffQW0Gz3TsgGlHGpPMdU77LcqwkSslM6x48b4=;
        b=ujAPeDo4ZumUk85mRyvFJyVt3KUuEUc2C84qYTK101AfkWK+t9fVPHWS6cQx2+31B1
         gjW2I5lIs6rAYnVIn2o6OK1K3iSK9E0XBExvjOlJEygmoSVMViWiTS/oIx3ZZIASaRY7
         ZHd95AENAa+k+qWn+8oiQ2FhxlE2Hyi/3Vdfo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=gNl30AMacPr5Q4V5B2ferzzGK8Z+h+Pk0egtW2eBjnDTWT/JUe9lss8NVmf2kaWZtc
         lUVj0RvPwT4gC7z61Gu0CQy/TLOxtv0uuynUt5fO5lWwQ6yPzpt3Wj9WWf65/YlJx5jx
         iWzMtOi529N9eOBsTJRR8PLZhL247oHrvKEpo=
MIME-Version: 1.0
Received: by 10.91.19.15 with SMTP id w15mr2213229agi.12.1260867703776; Tue, 
	15 Dec 2009 01:01:43 -0800 (PST)
Date: Tue, 15 Dec 2009 17:01:43 +0800
Message-ID: <7d94dcde0912150101l32d57396rf1c7f6a0acdbb53e@mail.gmail.com>
Subject: I need to implement a TokenFilter to break season07
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f94df097ab22047ac0a351

--001485f94df097ab22047ac0a351
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hi, all
     I currently need a TokenFilter to break  token season07 into two token=
s
season 07

I tried PatternReplaceCharFilter to replace "season07" with "season 07",
however, the offset is not correct for Highlighting. For this reason, I wan=
t
to implement a TokenFilter, but I do not know how to deal with the offset.
My implemtation is currently following EdgeNGramTokenFilter:
public final class AlphaNumberTokenFilter extends TokenFilter
{

    private char[] curTermBuffer;

    private int curTermLength;

    private int currentOffset;

    private int baseOffset;


    private TermAttribute termAtt;

    private OffsetAttribute offsetAtt;

    protected AlphaNumberTokenFilter(TokenStream input)
    {
    super(input);
    this.termAtt =3D addAttribute(TermAttribute.class);
    this.offsetAtt =3D addAttribute(OffsetAttribute.class);
    }

    @Override
    public final boolean incrementToken() throws IOException
    {
    while (true)
    {
        if (curTermBuffer =3D=3D null)
        {
        if (!input.incrementToken())
        {
            return false;
        }
        else
        {
            curTermBuffer =3D (char[]) termAtt.termBuffer().clone();
            curTermLength =3D termAtt.termLength();
            currentOffset =3D 0;
            baseOffset =3D offsetAtt.startOffset();
        }
        }
        if (currentOffset < curTermLength)
        {

        for(int i=3DcurrentOffset;i<curTermLength-1;i++)
        {

if(Character.isLetter(curTermBuffer[i])&&Character.isDigit(curTermBuffer[i+=
1]))
            {
            int start =3D currentOffset;
            int end =3D i+1;
            offsetAtt.setOffset(baseOffset+start, baseOffset+end);
            termAtt.setTermBuffer(curTermBuffer,start,end-start);
            currentOffset=3Di+1;
            return true;
            }
        }
        if(currentOffset<curTermLength)
        {
                int start =3D currentOffset;
            int end =3D curTermLength;
            offsetAtt.setOffset(baseOffset+start, baseOffset+end);
            termAtt.setTermBuffer(curTermBuffer,start,end-start);
            currentOffset=3DcurTermLength;
            return true;
        }
        }
        curTermBuffer =3D null;
    }
    }

    @Override
    public void reset() throws IOException
    {
    super.reset();
    curTermBuffer =3D null;
    }
}

--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--001485f94df097ab22047ac0a351--

From java-user-return-44103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 15 10:05:22 2009
Return-Path: <java-user-return-44103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22720 invoked from network); 15 Dec 2009 10:05:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Dec 2009 10:05:22 -0000
Received: (qmail 826 invoked by uid 500); 15 Dec 2009 10:05:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 749 invoked by uid 500); 15 Dec 2009 10:05:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 739 invoked by uid 99); 15 Dec 2009 10:05:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 10:05:19 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 10:05:17 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NKUH3-0005wf-3C
	for java-user@lucene.apache.org; Tue, 15 Dec 2009 02:04:57 -0800
Message-ID: <26792364.post@talk.nabble.com>
Date: Tue, 15 Dec 2009 02:04:57 -0800 (PST)
From: kdev <v.verroios@di.uoa.gr>
To: java-user@lucene.apache.org
Subject: Re: Scoring formula - Average number of terms in IDF
In-Reply-To: <26282578.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: v.verroios@di.uoa.gr
References: <26282578.post@talk.nabble.com>


any ideas please?
-- 
View this message in context: http://old.nabble.com/Scoring-formula---Average-number-of-terms-in-IDF-tp26282578p26792364.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 15 10:13:50 2009
Return-Path: <java-user-return-44104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28386 invoked from network); 15 Dec 2009 10:13:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Dec 2009 10:13:49 -0000
Received: (qmail 17332 invoked by uid 500); 15 Dec 2009 10:13:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17245 invoked by uid 500); 15 Dec 2009 10:13:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17226 invoked by uid 99); 15 Dec 2009 10:13:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 10:13:47 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.were@gmail.com designates 209.85.211.185 as permitted sender)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 10:13:43 +0000
Received: by ywh15 with SMTP id 15so4007148ywh.5
        for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 02:13:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=RFsInhS1DubarL+eXsVZcEc2V3bi8ZsICvGaRarI0ko=;
        b=Bwb5QjMUEcSaIwzit2vnP5obqt1d+lnOq1Lw5/nWWxLVDm8ZljWZd+91lZ5CyrkBVe
         KnZ5cBxTHy/kx7S3CCs5x8ZYxf3lhDtw5kxI2cDjPPg0EEpUVXIE7nXL8mMHDj0NNPkl
         k8wyJAvMs8Yq40z1vR5FgTCbLrCNbulXPAkSo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        b=CWJdgT36U+x8/o5FzrSK0+REsjrRYpvfY14sr1k/Ep8cGHNAQWyKjgOL+ynAChMoqj
         3ib+7dk9OF2ioHZ7ylPz3ae89sCYe8gdFrj6K6LMW/n+lwr47V4etrFUYfEeonIN3EUB
         FGGVADPpISGabSWTrzSM24iyeblX2BdXR/RIU=
MIME-Version: 1.0
Received: by 10.101.151.37 with SMTP id d37mr8902980ano.184.1260872002174; 
	Tue, 15 Dec 2009 02:13:22 -0800 (PST)
Reply-To: chris@chriswere.com
In-Reply-To: <7d94dcde0912142308n20407e83k1f753a3985958322@mail.gmail.com>
References: <7d94dcde0912142308n20407e83k1f753a3985958322@mail.gmail.com>
From: Chris Were <chris.were@gmail.com>
Date: Tue, 15 Dec 2009 20:43:02 +1030
Message-ID: <35bb42690912150213v5639d771x95e4579ebcb6539c@mail.gmail.com>
Subject: Re: Search correction
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c92584cc0b37047ac1a3ff

--001636c92584cc0b37047ac1a3ff
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

I recall reading Google does it based on statistical analysis of what words
users type. For example if I search for "googl" and then my next search is
for "google" that is stored. Next time someone types "googl", "google" is
suggested.

Sorry, I don't have a source to link you to on that though.

Cheers,
Chris

On Tue, Dec 15, 2009 at 5:38 PM, Weiwei Wang <ww.wang.cs@gmail.com> wrote:

> Hi, all,
>     Most of us should have some experience about inputing an incorrection
> keyword in google or some other search engine. When this happens, google
> can
> celverly suggest you another query keyword(not google suggestion).
>    e.g. you intend to search for redhat, instead you type rdehat, the
> google will tell you  Did you mean:
> *redhat*<
> http://www.google.com/search?hl=3Den&newwindow=3D1&ei=3D0DUnS98JzYaQBbSTy=
fgM&sa=3DX&oi=3Dspell&resnum=3D0&ct=3Dresult&cd=3D1&ved=3D0CAYQBSgA&q=3Dred=
hat&spell=3D1
> >
>
>
> How can i implement this feature in my own system?
>
> --
> Weiwei Wang
> Alex Wang
> =E7=8E=8B=E5=B7=8D=E5=B7=8D
> Room 403, Mengmin Wei Building
> Computer Science Department
> Gulou Campus of Nanjing University
> Nanjing, P.R.China, 210093
>
> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>



--=20

twitter: @tahpot
web: http://blog.chriswere.com/

--001636c92584cc0b37047ac1a3ff--

From java-user-return-44105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 15 11:17:36 2009
Return-Path: <java-user-return-44105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51890 invoked from network); 15 Dec 2009 11:17:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Dec 2009 11:17:36 -0000
Received: (qmail 4212 invoked by uid 500); 15 Dec 2009 11:17:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4117 invoked by uid 500); 15 Dec 2009 11:17:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4107 invoked by uid 99); 15 Dec 2009 11:17:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 11:17:33 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 59.106.19.174 is neither permitted nor denied by domain of koji@r.email.ne.jp)
Received: from [59.106.19.174] (HELO www724.sakura.ne.jp) (59.106.19.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 11:17:23 +0000
Received: from koji-sekiguchi-no-macbook.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	(authenticated bits=0)
	by www724.sakura.ne.jp (8.14.3/8.14.3) with ESMTP id nBFBH00j098029
	for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 20:17:00 +0900 (JST)
	(envelope-from koji@r.email.ne.jp)
Message-ID: <4B27702C.40206@r.email.ne.jp>
Date: Tue, 15 Dec 2009 20:17:00 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.23 (Macintosh/20090812)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: I need to implement a TokenFilter to break season07
References: <7d94dcde0912150101l32d57396rf1c7f6a0acdbb53e@mail.gmail.com>
In-Reply-To: <7d94dcde0912150101l32d57396rf1c7f6a0acdbb53e@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Weiwei Wang wrote:
> Hi, all
>      I currently need a TokenFilter to break  token season07 into two tokens
> season 07
>
>   
I'd recommend you to refer WordDelimiterFilter in Solr.

Koji

-- 
http://www.rondhuit.com/en/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 15 11:23:23 2009
Return-Path: <java-user-return-44106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53460 invoked from network); 15 Dec 2009 11:23:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Dec 2009 11:23:23 -0000
Received: (qmail 13068 invoked by uid 500); 15 Dec 2009 11:23:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12981 invoked by uid 500); 15 Dec 2009 11:23:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12971 invoked by uid 99); 15 Dec 2009 11:23:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 11:23:20 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 11:23:10 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id E6EB6D36004
	for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 12:22:50 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Dwc-ruRn0XEd for <java-user@lucene.apache.org>;
	Tue, 15 Dec 2009 12:22:40 +0100 (CET)
Received: from VEGA (unknown [134.102.249.75])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id D029CD36003
	for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 12:22:36 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <7d94dcde0912150101l32d57396rf1c7f6a0acdbb53e@mail.gmail.com> <4B27702C.40206@r.email.ne.jp>
Subject: RE: I need to implement a TokenFilter to break season07
Date: Tue, 15 Dec 2009 12:22:35 +0100
Message-ID: <72805DA9E3F74DD5B8E9D8A4F817D90B@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <4B27702C.40206@r.email.ne.jp>
Thread-Index: Acp9eDo7qKqGGH7cQcCP60OK2otI0QAAHaRw
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

And if you do it yourself, don't forget to call clearAttributes() whenever
you produce new tokens (else you may have bugs in the token increments). In
the old token api its Token.clear()... Just a warning!

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Koji Sekiguchi [mailto:koji@r.email.ne.jp]
> Sent: Tuesday, December 15, 2009 12:17 PM
> To: java-user@lucene.apache.org
> Subject: Re: I need to implement a TokenFilter to break season07
> 
> Weiwei Wang wrote:
> > Hi, all
> >      I currently need a TokenFilter to break  token season07 into two
> tokens
> > season 07
> >
> >
> I'd recommend you to refer WordDelimiterFilter in Solr.
> 
> Koji
> 
> --
> http://www.rondhuit.com/en/
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 15 11:23:33 2009
Return-Path: <java-user-return-44107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53543 invoked from network); 15 Dec 2009 11:23:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Dec 2009 11:23:33 -0000
Received: (qmail 14818 invoked by uid 500); 15 Dec 2009 11:23:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14739 invoked by uid 500); 15 Dec 2009 11:23:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14729 invoked by uid 99); 15 Dec 2009 11:23:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 11:23:30 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [84.234.17.142] (HELO pluto.adsl24.co.uk) (84.234.17.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 11:23:28 +0000
Received: from home.gagravarr.org ([78.32.69.200] helo=pattertwig.gagravarr.org)
	by pluto.adsl24.co.uk with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.69)
	(envelope-from <nick@torchbox.com>)
	id 1NKVUg-0003Hr-3Y
	for java-user@lucene.apache.org; Tue, 15 Dec 2009 11:23:06 +0000
Received: from localhost ([127.0.0.1] ident=nick)
	by pattertwig.gagravarr.org with esmtp (Exim 4.69)
	(envelope-from <nick@torchbox.com>)
	id 1NKVUg-0002Q4-Is
	for java-user@lucene.apache.org; Tue, 15 Dec 2009 11:23:06 +0000
Date: Tue, 15 Dec 2009 11:23:06 +0000 (GMT)
From: Nick Burch <nick@torchbox.com>
X-X-Sender: nick@pattertwig.cipe
To: java-user@lucene.apache.org
Subject: RE: SnowballAnalyzer and StopAnalyzer.ENGLISH_STOP_WORDS_SET ?
In-Reply-To: <940EDF3949C643B8B8B8E2DCD19C1567@VEGA>
Message-ID: <alpine.DEB.2.00.0912151120430.28260@pattertwig.cipe>
References: <alpine.LFD.2.00.0912141251040.3524@grenache> <359a92830912140934w57766d7esf44d856311afc71b@mail.gmail.com> <940EDF3949C643B8B8B8E2DCD19C1567@VEGA>
User-Agent: Alpine 2.00 (DEB 1167 2008-08-23)
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - pluto.adsl24.co.uk
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - torchbox.com

On Mon, 14 Dec 2009, Uwe Schindler wrote:
> Can you open an issue? This is a problem in SnowballAnalyzer missing to 
> add the set ctor.

Sure, I have done - http://issues.apache.org/jira/browse/LUCENE-2165

Nick

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 15 11:26:47 2009
Return-Path: <java-user-return-44108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54618 invoked from network); 15 Dec 2009 11:26:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Dec 2009 11:26:47 -0000
Received: (qmail 24827 invoked by uid 500); 15 Dec 2009 11:26:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24758 invoked by uid 500); 15 Dec 2009 11:26:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24748 invoked by uid 99); 15 Dec 2009 11:26:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 11:26:45 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 11:26:42 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 03197D36004
	for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 12:26:20 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 3eKGnwfvzqcw for <java-user@lucene.apache.org>;
	Tue, 15 Dec 2009 12:26:10 +0100 (CET)
Received: from VEGA (unknown [134.102.249.75])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id C00EBD36003
	for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 12:26:09 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <alpine.LFD.2.00.0912141251040.3524@grenache> <359a92830912140934w57766d7esf44d856311afc71b@mail.gmail.com> <940EDF3949C643B8B8B8E2DCD19C1567@VEGA> <alpine.DEB.2.00.0912151120430.28260@pattertwig.cipe>
Subject: RE: SnowballAnalyzer and StopAnalyzer.ENGLISH_STOP_WORDS_SET ?
Date: Tue, 15 Dec 2009 12:26:08 +0100
Message-ID: <AAAA58EECC6B48A7807AF7561C97649C@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <alpine.DEB.2.00.0912151120430.28260@pattertwig.cipe>
Thread-Index: Acp9eQ07n5yP9vZUT/WiNyErOQ0y7QAAENbg
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579

Have seen it! It is easy to implement. Thanks!

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Nick Burch [mailto:nick@torchbox.com]
> Sent: Tuesday, December 15, 2009 12:23 PM
> To: java-user@lucene.apache.org
> Subject: RE: SnowballAnalyzer and StopAnalyzer.ENGLISH_STOP_WORDS_SET ?
> 
> On Mon, 14 Dec 2009, Uwe Schindler wrote:
> > Can you open an issue? This is a problem in SnowballAnalyzer missing to
> > add the set ctor.
> 
> Sure, I have done - http://issues.apache.org/jira/browse/LUCENE-2165
> 
> Nick
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 15 11:30:54 2009
Return-Path: <java-user-return-44109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55662 invoked from network); 15 Dec 2009 11:30:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Dec 2009 11:30:54 -0000
Received: (qmail 31390 invoked by uid 500); 15 Dec 2009 11:30:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31299 invoked by uid 500); 15 Dec 2009 11:30:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31289 invoked by uid 99); 15 Dec 2009 11:30:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 11:30:52 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 11:30:42 +0000
Received: by fg-out-1718.google.com with SMTP id 16so331863fgg.5
        for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 03:30:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=oTKJjjqN1Jm9tHntp/5Iz4ySpMRWWv5gDxiYF5VSCYM=;
        b=NVwFH8fqnapRen3R6i3TSk7k1jshlvjq1SaS+M2CNU8TMMEgUHWIOW/UZICPQWQs9I
         tZJsUVBQZ7Dv01D7fxOTaZzJ/p/wioYkIppWHBkwBFVv6iUshjpvotkDGd9fongjNkRz
         mWGd24RRI0+sfjl8ECL6qHmWCsuWrYTjmJRD4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=McssYlzdqAS8G5nq7HND8OdV6pegYCHVuy1Wn2EvAaLoBvmNxEocXTyox7evDLuJIs
         U1AFDQnF6UgqU4MRQBFdkTLi7VA6mVfV9D426SL80y5w/F4bYkTxAnE2AZg5RHcUcPdJ
         hEsk3QFSdVe3S1wNLR3s4krdn34iwLmD0oFX8=
MIME-Version: 1.0
Received: by 10.239.193.137 with SMTP id j9mr684642hbi.186.1260876622254; Tue, 
	15 Dec 2009 03:30:22 -0800 (PST)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <7d94dcde0912142308n20407e83k1f753a3985958322@mail.gmail.com>
References: <7d94dcde0912142308n20407e83k1f753a3985958322@mail.gmail.com>
Date: Tue, 15 Dec 2009 12:30:22 +0100
Message-ID: <f18c9dde0912150330v37a8cbdexcf3ea377433598ec@mail.gmail.com>
Subject: Re: Search correction
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Weiwei,
Lucene Contrib offers a Spellchecker package that might help you with
your application. The spellchecker takes a dictionary of terms (build
from your search index or from some other text resource) and builds a
suggestion index from those terms. Internally terms are indexed as
ngrams. You can pass in a possibly missspelled term and a distance
measurement function to build up a suggestion array from the
suggestion index.
I have no comparison how good it works with chinese text though.
simon

On Tue, Dec 15, 2009 at 8:08 AM, Weiwei Wang <ww.wang.cs@gmail.com> wrote:
> Hi, all,
> =C2=A0 =C2=A0 Most of us should have some experience about inputing an in=
correction
> keyword in google or some other search engine. When this happens, google =
can
> celverly suggest you another query keyword(not google suggestion).
> =C2=A0 =C2=A0e.g. you intend to search for redhat, instead you type rdeha=
t, the
> google will tell you =C2=A0Did you mean:
> *redhat*<http://www.google.com/search?hl=3Den&newwindow=3D1&ei=3D0DUnS98J=
zYaQBbSTyfgM&sa=3DX&oi=3Dspell&resnum=3D0&ct=3Dresult&cd=3D1&ved=3D0CAYQBSg=
A&q=3Dredhat&spell=3D1>
>
>
> How can i implement this feature in my own system?
>
> --
> Weiwei Wang
> Alex Wang
> =E7=8E=8B=E5=B7=8D=E5=B7=8D
> Room 403, Mengmin Wei Building
> Computer Science Department
> Gulou Campus of Nanjing University
> Nanjing, P.R.China, 210093
>
> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 15 11:34:05 2009
Return-Path: <java-user-return-44110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56321 invoked from network); 15 Dec 2009 11:34:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Dec 2009 11:34:04 -0000
Received: (qmail 37378 invoked by uid 500); 15 Dec 2009 11:34:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37320 invoked by uid 500); 15 Dec 2009 11:34:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37310 invoked by uid 99); 15 Dec 2009 11:34:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 11:34:02 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [202.86.5.92] (HELO smtp105.mail.in.yahoo.com) (202.86.5.92)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 15 Dec 2009 11:33:52 +0000
Received: (qmail 85034 invoked from network); 15 Dec 2009 11:33:29 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:x-mimeole;
  b=ANXl3VPazEvz4qTBmmxCtGUvTLqHNOy3Mb5jqA4YW011YpK93mo/YbpCAhcDGiRhnPMHscW3TtG7MziwUy6VVo5O662deDV0pd0yaE47JfhC6zSV3stkufXXJL/SR3Oq7OOQGoVpO5WaEUIfySV4Ikwmq8YhBKFfO5E9cPezWC0=  ;
Received: from  (emailgane@203.98.194.130 with login)
        by smtp105.mail.in.yahoo.com with SMTP; 15 Dec 2009 17:03:28 +0530 IST
X-Yahoo-SMTP: JObyHkuswBBrNSLZp.Ycd7Boqpr_GQ--
X-YMail-OSG: zAVN.cQVM1lCTI7ogkvyZmFu0Y2lEGU0pRSUeBTGRwtOVdTiDFcem3Qb.RtHkgkJxEbiSowHrfA8DBQXTYMxUnvQRQP7ukyQpE8FF4cD5Mjg92DmvBBojSD9M0oPRcbpJ9X_k6EnLDX0PxAcCP0k2nro85_a2p8HK9.Pd6HSyRjFQHsjIXMJxsfT9AJsUZMmryqBMV1ECnvgOgzCBOzXAldbLnx_.aBmqJ7aCn5yogLs
X-Yahoo-Newman-Property: ymail-3
Message-ID: <002f01ca7d7a$6ca671d0$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <26748041.post@talk.nabble.com> <4B22DC73.9030502@gmail.com>
Subject: Re: Lucene Analyzer that can handle C++ vs C#
Date: Tue, 15 Dec 2009 17:03:19 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
x-mimeole: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

How about KeywordAnalyzer? It will treat C++ and C# as single term.=20

Regards
Ganesh

----- Original Message -----=20
From: "Chris Lu" <chris.lu@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Saturday, December 12, 2009 5:27 AM
Subject: Re: Lucene Analyzer that can handle C++ vs C#


> What we did in DBSight is to provide a reserved list of words for =
every=20
> Lucene Analyzer.
> This way you can handle any special characters like C++ and C#.
>=20
> Any common analyzers usually are not suitable for these special words.
>=20
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes: =
http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database_Search_i=
n_3_minutes
> DBSight customer, a shopping comparison site, (anonymous per request) =
got 2.6 Million Euro funding!
>=20
>=20
> On 12/11/2009 9:09 AM, maxSchlein wrote:
>> Can someone please point me in the right direction.
>>
>> We are creating an application that needs to beable to search on C++ =
and get
>> back doc's that have C++ in it.  The StandardAnalyzer does not seem =
to index
>> the "+", so a search for "C++" will bring back docs that contain, =
C++, C,
>> C#, etc.....  The WhiteSpaceAnalyzer will index the "+", but if we =
have the
>> term "C++." that is, if C++ is at the end of a sentence, it will =
index
>> "C++." so a search for "C++" will not return the doc.  I have heard =
of maybe
>> a CustomAnalyzer; however, it seems like there would actually need to =
be a
>> CustomFilter/CustomTokenizer, I looked at:
>>       - StandardAnalyzer.java
>>       - StandardFilter.java
>>       - StandardTokenizer.java
>>       - StandardTokenizerImpl.java
>>       - StandardTokenizerImpl.jflex
>>
>> I would guess that the StandardTokenizer is where the changes would =
need to
>> be made to allow the "+" character, but I am unclear as to how.
>>
>> Any and all help is greatly appreciated.
>>
>> Going thru all the documents, stripping out "+" for the word "plus" =
is not
>> really an option for us.
>>   =20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 15 12:25:41 2009
Return-Path: <java-user-return-44111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70667 invoked from network); 15 Dec 2009 12:25:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Dec 2009 12:25:41 -0000
Received: (qmail 3073 invoked by uid 500); 15 Dec 2009 12:25:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2984 invoked by uid 500); 15 Dec 2009 12:25:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2974 invoked by uid 99); 15 Dec 2009 12:25:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 12:25:38 +0000
X-ASF-Spam-Status: No, hits=-3.6 required=5.0
	tests=BAYES_00,RCVD_IN_DNSWL_LOW
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.25 as permitted sender)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 12:25:35 +0000
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by gateway1.messagingengine.com (Postfix) with ESMTP id 3E7D0C6720
	for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 07:25:15 -0500 (EST)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by compute1.internal (MEProxy); Tue, 15 Dec 2009 07:25:15 -0500
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding; s=smtpout; bh=vKXEgkUAdzE56UEF1y2u4xQF9v4=; b=QBlUCNrHLfqDLoIDbaJiKsrJHZIo0fTRTanjSaAzRoXbpiT0bZ3VaXKTplRtLKrhT/8zq2xVDZt3q7ol37RVxt+LgY7dObeYF3bNbV4OzU2xlw5D1MwXLe1NsW4bQwJG6S7HwzQcNgyWFqfPf/ESLSTEfxcPy9uvIhLq6WPELGo=
X-Sasl-enc: ygWTm8b3mJmOclQkf7u2Ydeu/D9TKBtOGE3jmRfgGgXv 1260879914
Received: from macbook.lan (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPA id 7EADF4AF3E7
	for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 07:25:14 -0500 (EST)
Message-ID: <4B278039.3060408@fastmail.fm>
Date: Tue, 15 Dec 2009 12:25:29 +0000
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Thunderbird 2.0.0.23 (Macintosh/20090812)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: I need to implement a TokenFilter to break season07
References: <7d94dcde0912150101l32d57396rf1c7f6a0acdbb53e@mail.gmail.com> <4B27702C.40206@r.email.ne.jp> <72805DA9E3F74DD5B8E9D8A4F817D90B@VEGA>
In-Reply-To: <72805DA9E3F74DD5B8E9D8A4F817D90B@VEGA>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Uwe Schindler wrote:
> And if you do it yourself, don't forget to call clearAttributes() whenever
> you produce new tokens (else you may have bugs in the token increments). In
> the old token api its Token.clear()... Just a warning!

This comment has worried me, is this ok or am i meant to call 
clearAttributes() somewhere


public class StripLeadingZeroFilter extends TokenFilter {
    /**
     * Construct filtering <i>in</i>.
     */
    public StripLeadingZeroFilter(TokenStream in) {
        super(in);
        termAtt = (TermAttribute) addAttribute(TermAttribute.class);
    }

    private TermAttribute termAtt;

    /**
     *
     * <p>Removes zeroes if first char in token
     */
    public final boolean incrementToken() throws java.io.IOException {
        if (!input.incrementToken()) {
            return false;
        }

        char[] buffer = termAtt.termBuffer();
        final int bufferLength = termAtt.termLength();

        if (buffer[0] == '0') {
            for (int i = 1; i < bufferLength; i++) {
                char c = buffer[i];
                buffer[i - 1] = c;
            }
            termAtt.setTermLength(bufferLength - 1);
            return true;
        } else {
            return true;
        }
    }

}


thanks Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 15 12:32:39 2009
Return-Path: <java-user-return-44112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73128 invoked from network); 15 Dec 2009 12:32:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Dec 2009 12:32:39 -0000
Received: (qmail 14947 invoked by uid 500); 15 Dec 2009 12:32:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14867 invoked by uid 500); 15 Dec 2009 12:32:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14857 invoked by uid 99); 15 Dec 2009 12:32:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 12:32:36 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.217.225 as permitted sender)
Received: from [209.85.217.225] (HELO mail-gx0-f225.google.com) (209.85.217.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 12:32:27 +0000
Received: by gxk25 with SMTP id 25so4259615gxk.5
        for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 04:32:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=xpNpmOyCRcFQ5LqFasvcFRCcG/BhXfC844OamexFUyQ=;
        b=YRIL5opTzU7Uagkbzl4HxgQLlqq/Su97FiyL+YuRbfC48DXDF1JSg6vVyL30RppOLS
         puXfi2J9rynLHeE4ZbPaQdP2COkzf/5Rr3sonkvxMqI0jSH6inBIzp1SgscBS/fGX1s/
         B3EVf5Y5ylWEJQV6Z8Wlig636350ke53n2ayA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=wjGMz3opGE4+C8xmf12PQax7+N1zbnh/0sfm6DZNvlcg298fQzeUQI2OLV1HBSSj/a
         4uAUbjLIoKi4gm7WDRhlAE0wfeh8lrx6ld26gu7oUmqYoe2wqTK6+UHPLA6L1wASBvI6
         Ujr4+Xu9AB/NnkQ5KiEy3/W8KWsksyNJVbGVA=
MIME-Version: 1.0
Received: by 10.90.253.16 with SMTP id a16mr1220254agi.3.1260880326489; Tue, 
	15 Dec 2009 04:32:06 -0800 (PST)
In-Reply-To: <f18c9dde0912150330v37a8cbdexcf3ea377433598ec@mail.gmail.com>
References: <7d94dcde0912142308n20407e83k1f753a3985958322@mail.gmail.com>
	 <f18c9dde0912150330v37a8cbdexcf3ea377433598ec@mail.gmail.com>
Date: Tue, 15 Dec 2009 20:32:06 +0800
Message-ID: <7d94dcde0912150432k48ca1b01k1f76e17875631a41@mail.gmail.com>
Subject: Re: Search correction
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org, simon.willnauer@gmail.com
Content-Type: multipart/alternative; boundary=001636284e4af6f97b047ac393e8
X-Virus-Checked: Checked by ClamAV on apache.org

--001636284e4af6f97b047ac393e8
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Thanks Simon, i used a similar approach as SpellChecker to do search
suggestion.
I'll try that in search correction.

On Tue, Dec 15, 2009 at 7:30 PM, Simon Willnauer <
simon.willnauer@googlemail.com> wrote:

> Weiwei,
> Lucene Contrib offers a Spellchecker package that might help you with
> your application. The spellchecker takes a dictionary of terms (build
> from your search index or from some other text resource) and builds a
> suggestion index from those terms. Internally terms are indexed as
> ngrams. You can pass in a possibly missspelled term and a distance
> measurement function to build up a suggestion array from the
> suggestion index.
> I have no comparison how good it works with chinese text though.
> simon
>
> On Tue, Dec 15, 2009 at 8:08 AM, Weiwei Wang <ww.wang.cs@gmail.com> wrote=
:
> > Hi, all,
> >     Most of us should have some experience about inputing an incorrecti=
on
> > keyword in google or some other search engine. When this happens, googl=
e
> can
> > celverly suggest you another query keyword(not google suggestion).
> >    e.g. you intend to search for redhat, instead you type rdehat, the
> > google will tell you  Did you mean:
> > *redhat*<
> http://www.google.com/search?hl=3Den&newwindow=3D1&ei=3D0DUnS98JzYaQBbSTy=
fgM&sa=3DX&oi=3Dspell&resnum=3D0&ct=3Dresult&cd=3D1&ved=3D0CAYQBSgA&q=3Dred=
hat&spell=3D1
> >
> >
> >
> > How can i implement this feature in my own system?
> >
> > --
> > Weiwei Wang
> > Alex Wang
> > =E7=8E=8B=E5=B7=8D=E5=B7=8D
> > Room 403, Mengmin Wei Building
> > Computer Science Department
> > Gulou Campus of Nanjing University
> > Nanjing, P.R.China, 210093
> >
> > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--001636284e4af6f97b047ac393e8--

From java-user-return-44113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 15 12:34:27 2009
Return-Path: <java-user-return-44113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73475 invoked from network); 15 Dec 2009 12:34:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Dec 2009 12:34:27 -0000
Received: (qmail 20459 invoked by uid 500); 15 Dec 2009 12:34:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20382 invoked by uid 500); 15 Dec 2009 12:34:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20372 invoked by uid 99); 15 Dec 2009 12:34:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 12:34:25 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.217.225 as permitted sender)
Received: from [209.85.217.225] (HELO mail-gx0-f225.google.com) (209.85.217.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 12:34:15 +0000
Received: by gxk25 with SMTP id 25so4260954gxk.5
        for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 04:33:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=5FgCxqTqPk6ztU4x7Hth1WYtTM6abF7wMK1VO8QvcaM=;
        b=f2Spzzg8cZXQj/y1LROxaSzj+Rpof1D0c3coFTPz/lh0AX++YtIqW4DRY3phY8vJkn
         caefhCJqyulsHzmriXVInaEz5PjN1mHILJwohwdQzX7cLlVt8f5C831suxJxyXH0qHaj
         xka0cY6ilVKn106FOLgCgYFo+LScOTWsVk7WA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=H9fKFe4HmoEnvU2VLLlbUPGfE4PvGKIIdOd6u5Y85Yby1imJ0XFWba5lHTtZg4XE3A
         4dZ6iqmDArs6hpXFAkOXDEbS42ixgPP42DjLhpFYEfz5jyI+TKqXjIW6o7Sj6ZMtLX48
         m9yg8RFLl8wH/5NH2roYuk6tZkMvwW6ki8oH8=
MIME-Version: 1.0
Received: by 10.90.18.32 with SMTP id 32mr2756397agr.21.1260880434291; Tue, 15 
	Dec 2009 04:33:54 -0800 (PST)
In-Reply-To: <002f01ca7d7a$6ca671d0$710bc30a@sv.us.sonicwall.com>
References: <26748041.post@talk.nabble.com> <4B22DC73.9030502@gmail.com>
	 <002f01ca7d7a$6ca671d0$710bc30a@sv.us.sonicwall.com>
Date: Tue, 15 Dec 2009 20:33:54 +0800
Message-ID: <7d94dcde0912150433q3a1d3914iaee98d13ac2230a5@mail.gmail.com>
Subject: Re: Lucene Analyzer that can handle C++ vs C#
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016362839ec63f9a0047ac39a8d
X-Virus-Checked: Checked by ClamAV on apache.org

--0016362839ec63f9a0047ac39a8d
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

KeywordAnalyzer can not handle a whole complete sentence.

On Tue, Dec 15, 2009 at 7:33 PM, Ganesh <emailgane@yahoo.co.in> wrote:

> How about KeywordAnalyzer? It will treat C++ and C# as single term.
>
> Regards
> Ganesh
>
> ----- Original Message -----
> From: "Chris Lu" <chris.lu@gmail.com>
> To: <java-user@lucene.apache.org>
> Sent: Saturday, December 12, 2009 5:27 AM
> Subject: Re: Lucene Analyzer that can handle C++ vs C#
>
>
> > What we did in DBSight is to provide a reserved list of words for every
> > Lucene Analyzer.
> > This way you can handle any special characters like C++ and C#.
> >
> > Any common analyzers usually are not suitable for these special words.
> >
> > --
> > Chris Lu
> > -------------------------
> > Instant Scalable Full-Text Search On Any Database/Application
> > site: http://www.dbsight.net
> > demo: http://search.dbsight.com
> > Lucene Database Search in 3 minutes:
> http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database_Search_i=
n_3_minutes
> > DBSight customer, a shopping comparison site, (anonymous per request) g=
ot
> 2.6 Million Euro funding!
> >
> >
> > On 12/11/2009 9:09 AM, maxSchlein wrote:
> >> Can someone please point me in the right direction.
> >>
> >> We are creating an application that needs to beable to search on C++ a=
nd
> get
> >> back doc's that have C++ in it.  The StandardAnalyzer does not seem to
> index
> >> the "+", so a search for "C++" will bring back docs that contain, C++,
> C,
> >> C#, etc.....  The WhiteSpaceAnalyzer will index the "+", but if we hav=
e
> the
> >> term "C++." that is, if C++ is at the end of a sentence, it will index
> >> "C++." so a search for "C++" will not return the doc.  I have heard of
> maybe
> >> a CustomAnalyzer; however, it seems like there would actually need to =
be
> a
> >> CustomFilter/CustomTokenizer, I looked at:
> >>       - StandardAnalyzer.java
> >>       - StandardFilter.java
> >>       - StandardTokenizer.java
> >>       - StandardTokenizerImpl.java
> >>       - StandardTokenizerImpl.jflex
> >>
> >> I would guess that the StandardTokenizer is where the changes would ne=
ed
> to
> >> be made to allow the "+" character, but I am unclear as to how.
> >>
> >> Any and all help is greatly appreciated.
> >>
> >> Going thru all the documents, stripping out "+" for the word "plus" is
> not
> >> really an option for us.
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> Send instant messages to your online friends http://in.messenger.yahoo.co=
m
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--0016362839ec63f9a0047ac39a8d--

From java-user-return-44114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 15 12:47:59 2009
Return-Path: <java-user-return-44114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83279 invoked from network); 15 Dec 2009 12:47:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Dec 2009 12:47:59 -0000
Received: (qmail 46341 invoked by uid 500); 15 Dec 2009 12:47:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46257 invoked by uid 500); 15 Dec 2009 12:47:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46247 invoked by uid 99); 15 Dec 2009 12:47:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 12:47:57 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 12:47:55 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id A670AD36004;
	Tue, 15 Dec 2009 13:47:33 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id DtFRDjGYzehI; Tue, 15 Dec 2009 13:47:31 +0100 (CET)
Received: from VEGA (unknown [134.102.249.75])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 3FF12D36003;
	Tue, 15 Dec 2009 13:47:31 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>,
	<paul_t100@fastmail.fm>
References: <7d94dcde0912150101l32d57396rf1c7f6a0acdbb53e@mail.gmail.com> <4B27702C.40206@r.email.ne.jp> <72805DA9E3F74DD5B8E9D8A4F817D90B@VEGA> <4B278039.3060408@fastmail.fm>
Subject: RE: I need to implement a TokenFilter to break season07
Date: Tue, 15 Dec 2009 13:47:30 +0100
Message-ID: <DC0ACA0456F4442794C790EB751BA360@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <4B278039.3060408@fastmail.fm>
Thread-Index: Acp9gb0UJW2EWFaVSYCnN57aidpTYwAAsj4Q
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579

> > And if you do it yourself, don't forget to call clearAttributes()
> whenever
> > you produce new tokens (else you may have bugs in the token increments).
> In
> > the old token api its Token.clear()... Just a warning!
> 
> This comment has worried me, is this ok or am i meant to call
> clearAttributes() somewhere

Your filter is fine. As noted, you should call clearAttributes, when you
produce new tokens, but you are only modifying existing ones. The example
Weiwei was mendtioning was to split a Token into two. So for the second
generated token you must really initialize all attributes to default values.

This is why the warning.


> public class StripLeadingZeroFilter extends TokenFilter {
>     /**
>      * Construct filtering <i>in</i>.
>      */
>     public StripLeadingZeroFilter(TokenStream in) {
>         super(in);
>         termAtt = (TermAttribute) addAttribute(TermAttribute.class);
>     }
> 
>     private TermAttribute termAtt;
> 
>     /**
>      *
>      * <p>Removes zeroes if first char in token
>      */
>     public final boolean incrementToken() throws java.io.IOException {
>         if (!input.incrementToken()) {
>             return false;
>         }
> 
>         char[] buffer = termAtt.termBuffer();
>         final int bufferLength = termAtt.termLength();
> 
>         if (buffer[0] == '0') {
>             for (int i = 1; i < bufferLength; i++) {
>                 char c = buffer[i];
>                 buffer[i - 1] = c;
>             }
>             termAtt.setTermLength(bufferLength - 1);
>             return true;
>         } else {
>             return true;
>         }
>     }
> 
> }
> 
> 
> thanks Paul
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 15 12:48:34 2009
Return-Path: <java-user-return-44115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83445 invoked from network); 15 Dec 2009 12:48:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Dec 2009 12:48:34 -0000
Received: (qmail 48136 invoked by uid 500); 15 Dec 2009 12:48:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48053 invoked by uid 500); 15 Dec 2009 12:48:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48043 invoked by uid 99); 15 Dec 2009 12:48:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 12:48:31 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.217.225 as permitted sender)
Received: from [209.85.217.225] (HELO mail-gx0-f225.google.com) (209.85.217.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 12:48:27 +0000
Received: by gxk25 with SMTP id 25so4272143gxk.5
        for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 04:48:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=VEX5pbspdr3LetVFcwWGeyyTAakD0ggrj25/1JMW/Sg=;
        b=TYeuXU7bwW3VUr3+LCDHAfJALnOFskXTQyxj5y5fvHGP5lEIQTqCUSojITtrIibpR4
         +00WoceRZRARb0F6dCVH+SYx+G1c9W800w2M/0FmRUJlBCyqYSziS3rsBXhBn6ufxvg8
         ZrVN6fuW03cSIUu9BV5EPhepQ9mAlvYbNgqVA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=QVRd1UH2LlPKapPKTtwsMem57I6zPjYyJSRrzFhCy0qnp5kMG2TD7TtjHHpkXRKo3F
         Gvw6Kvqu/uMnBG+IgDhUM218Wvh6uBBKUwQgXQ/RUYCKLsWdB1vGAxEseVIRFzl99MGR
         FtGe1FIWtvsE05uD1/w03nREO/awRAtW/D9qU=
MIME-Version: 1.0
Received: by 10.90.38.8 with SMTP id l8mr6263708agl.86.1260881286706; Tue, 15 
	Dec 2009 04:48:06 -0800 (PST)
In-Reply-To: <4B27702C.40206@r.email.ne.jp>
References: <7d94dcde0912150101l32d57396rf1c7f6a0acdbb53e@mail.gmail.com>
	 <4B27702C.40206@r.email.ne.jp>
Date: Tue, 15 Dec 2009 20:48:06 +0800
Message-ID: <7d94dcde0912150448q39b9aab7x6a290098f0b529c3@mail.gmail.com>
Subject: Re: I need to implement a TokenFilter to break season07
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163616415f32c6a2047ac3cd8c

--00163616415f32c6a2047ac3cd8c
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

WordDelimiterFilter is implemented in an old version where nextToken is
called

On Tue, Dec 15, 2009 at 7:17 PM, Koji Sekiguchi <koji@r.email.ne.jp> wrote:

> Weiwei Wang wrote:
>
>> Hi, all
>>     I currently need a TokenFilter to break  token season07 into two
>> tokens
>> season 07
>>
>>
>>
> I'd recommend you to refer WordDelimiterFilter in Solr.
>
> Koji
>
> --
> http://www.rondhuit.com/en/
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--00163616415f32c6a2047ac3cd8c--

From java-user-return-44116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 15 13:26:41 2009
Return-Path: <java-user-return-44116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99973 invoked from network); 15 Dec 2009 13:26:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Dec 2009 13:26:41 -0000
Received: (qmail 9151 invoked by uid 500); 15 Dec 2009 13:26:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9075 invoked by uid 500); 15 Dec 2009 13:26:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9065 invoked by uid 99); 15 Dec 2009 13:26:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 13:26:37 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.217.225 as permitted sender)
Received: from [209.85.217.225] (HELO mail-gx0-f225.google.com) (209.85.217.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 13:26:28 +0000
Received: by gxk25 with SMTP id 25so4304128gxk.5
        for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 05:26:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=bZvw+YQYn2+PB0g3kksZvAX9/E6PVyKzd8wX2FNsXdg=;
        b=fS0DBkj9NUcF75sSyms6EvJ78dFbqGocCz98vPzovp0evJShA18OJ6W+ajWaRE/eva
         yotfKzw5Y90AsDX27F03lTmIpJ25h4maXVp4iKe6wvAFbLmLuMj3e1C0npQMm3yHtlkW
         oZMB3XNJHgJKaS1fAmhvwalw2tOnRsuxIjUSs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=UenHDq07HjiWHIxqaq2Pg2bEo6Dn4DTLcWIAqsY6DTCd51fNT5LUVe5eyy7gmTrSi8
         fznGfugGhlX8ycBDkxTK7WmswuSY+6/3lgz07t76svO1gcyMer7D7g4Y4fArb3wnHO+4
         OtgjHfdeVk4FnXUnB45Z6SzeiRVNukJobadHQ=
MIME-Version: 1.0
Received: by 10.91.106.5 with SMTP id i5mr6389973agm.75.1260883565784; Tue, 15 
	Dec 2009 05:26:05 -0800 (PST)
Date: Tue, 15 Dec 2009 21:26:05 +0800
Message-ID: <7d94dcde0912150526hdc3f9cev7a7368d4df5f06f8@mail.gmail.com>
Subject: How to do alias(Pinyin) search in Lucene
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016367f92e60aaf30047ac4551b
X-Virus-Checked: Checked by ClamAV on apache.org

--0016367f92e60aaf30047ac4551b
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

Hi, guys,
     I'm implementing a search engine based on Lucene for Chinese. So I wan=
t
to support pinyin search as Google China do.

e.g.
    =A1=B0=D6=D0=B9=FA=A1=B1  means Chinese in English
    this word's pinyin input is "zhongguo"
The feature i want to implement is when user type zhongguo the results will
include documents containing "=D6=D0=B9=FA" or even Chinese

Anybody here know how to achieve this?

--=20
Weiwei Wang
Alex Wang
=CD=F5=CE=A1=CE=A1
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--0016367f92e60aaf30047ac4551b--

From java-user-return-44117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 15 13:41:47 2009
Return-Path: <java-user-return-44117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11875 invoked from network); 15 Dec 2009 13:41:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Dec 2009 13:41:47 -0000
Received: (qmail 39205 invoked by uid 500); 15 Dec 2009 13:41:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38912 invoked by uid 500); 15 Dec 2009 13:41:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38902 invoked by uid 99); 15 Dec 2009 13:41:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 13:41:43 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.160.46 as permitted sender)
Received: from [209.85.160.46] (HELO mail-pw0-f46.google.com) (209.85.160.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 13:41:34 +0000
Received: by pwj16 with SMTP id 16so3045366pwj.5
        for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 05:41:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=efNv7iMOt7/USlWtTrpqg//2URrVPEagFQqN1J94fmw=;
        b=ITYnWoVl0IIhaKWG9MzCKoT0snU5LZ2f8mehtjFH9MXUelW5oCCWIUMp4IA/wP+vvW
         ykTKBnGYCyzP1RFoCW44co0kWnUTuwNqiGzVi2RDaV4IsHpJzobWD6AtGVaZeyD5iR5/
         Lq2oX7xVujMfqsMhaD3VpybjNbuIY6kRduL2Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=pyTZmbAPGPjUHHb147qp3rGLNq9+6TTZMiXttIzMn5PGIXP5TFunKN0SZq9p9i5WoE
         /s44ruQ4SITmbEwFvEg7QP4grvX4QMh4KDCCdekVixUmYLFLlTYuMtkE/I0zb9fkbB+l
         c6D3EIDkbZqN2KJBSHZBdyv8BkzPBPtxRE1oQ=
MIME-Version: 1.0
Received: by 10.114.242.2 with SMTP id p2mr4209333wah.153.1260884473116; Tue, 
	15 Dec 2009 05:41:13 -0800 (PST)
In-Reply-To: <7d94dcde0912150526hdc3f9cev7a7368d4df5f06f8@mail.gmail.com>
References: <7d94dcde0912150526hdc3f9cev7a7368d4df5f06f8@mail.gmail.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Tue, 15 Dec 2009 08:40:53 -0500
Message-ID: <8f0ad1f30912150540i4d380bc2o43c9c5b079b923d7@mail.gmail.com>
Subject: Re: How to do alias(Pinyin) search in Lucene
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6493f981f7763047ac48b36
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6493f981f7763047ac48b36
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

there is an icu transform tokenfilter in the patch here:
http://issues.apache.org/jira/browse/LUCENE-1488

    Transliterator pinyin =3D Transliterator.getInstance("Han-Latin");
    Tokenizer tokenizer =3D new KeywordTokenizer(new StringReader("=E4=B8=
=AD=E5=9B=BD"));
    ICUTransformFilter filter =3D new ICUTransformFilter(tokenizer, pinyin)=
;
    assertTokenStreamContents(filter, new String[] { "zh=C5=8Dng gu=C3=B3" =
} );

note it will add tone marks and insert space between syllables by default
if you do not want this, you need to do some cleanup.

    Transliterator pinyin =3D Transliterator.getInstance("Han-Latin; NFD;
[[:NonspacingMark:][:Space:]] Remove");
    Tokenizer tokenizer =3D new KeywordTokenizer(new StringReader("=E4=B8=
=AD=E5=9B=BD"));
    ICUTransformFilter filter =3D new ICUTransformFilter(tokenizer, pinyin)=
;
    assertTokenStreamContents(filter, new String[] { "zhongguo" } );


2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>

> Hi, guys,
>     I'm implementing a search engine based on Lucene for Chinese. So I wa=
nt
> to support pinyin search as Google China do.
>
> e.g.
>    =E2=80=9C=E4=B8=AD=E5=9B=BD=E2=80=9D  means Chinese in English
>    this word's pinyin input is "zhongguo"
> The feature i want to implement is when user type zhongguo the results wi=
ll
> include documents containing "=E4=B8=AD=E5=9B=BD" or even Chinese
>
> Anybody here know how to achieve this?
>
> --
> Weiwei Wang
> Alex Wang
> =E7=8E=8B=E5=B7=8D=E5=B7=8D
> Room 403, Mengmin Wei Building
> Computer Science Department
> Gulou Campus of Nanjing University
> Nanjing, P.R.China, 210093
>
> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>



--=20
Robert Muir
rcmuir@gmail.com

--0016e6493f981f7763047ac48b36--

From java-user-return-44118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 15 13:49:51 2009
Return-Path: <java-user-return-44118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15472 invoked from network); 15 Dec 2009 13:49:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Dec 2009 13:49:51 -0000
Received: (qmail 46644 invoked by uid 500); 15 Dec 2009 13:49:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46558 invoked by uid 500); 15 Dec 2009 13:49:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46548 invoked by uid 99); 15 Dec 2009 13:49:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 13:49:49 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.217.225 as permitted sender)
Received: from [209.85.217.225] (HELO mail-gx0-f225.google.com) (209.85.217.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 13:49:46 +0000
Received: by gxk25 with SMTP id 25so4325280gxk.5
        for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 05:49:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=a7tJHkcdPKgNtyZAX/eOrtEyt1kYeaorgGq8oEX38rU=;
        b=jrAkNxp50nDu+wZaU2pKzQ/4UVT71yoeRMVuuKAFkvxE9f8pDjtaenvIFuiSsHxyue
         xIeusOknpP1xcQxZGMV5Hd8GJP8n22GzabMkjVmrTsXHMSOwNPOmklX+Dk/s43LPzQoX
         Lk+qLtsBkg/9CpJlklDRmZQLlGgGcVcBVJrC8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=IUodvvpqBDxrSLNZh61pV4F2nPf4njLxqRLr9LgiJuPRkk1Y7jihhiqUUUJr6FCB4y
         xYwQbGA+WqCSW7zn3hHWQJ0fU/bBwbUmpNgPbuuAje1zX2+T4Xlj8XGV/jgnhCIaCwXo
         O0ZfGgwFHYmXOpuAvnIBsM4iRQiHUIc4GgBOY=
MIME-Version: 1.0
Received: by 10.91.106.5 with SMTP id i5mr6420563agm.75.1260884965901; Tue, 15 
	Dec 2009 05:49:25 -0800 (PST)
In-Reply-To: <8f0ad1f30912150540i4d380bc2o43c9c5b079b923d7@mail.gmail.com>
References: <7d94dcde0912150526hdc3f9cev7a7368d4df5f06f8@mail.gmail.com>
	 <8f0ad1f30912150540i4d380bc2o43c9c5b079b923d7@mail.gmail.com>
Date: Tue, 15 Dec 2009 21:49:25 +0800
Message-ID: <7d94dcde0912150549t361a55c9va6a7cc785e062858@mail.gmail.com>
Subject: Re: How to do alias(Pinyin) search in Lucene
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016367f92e67ec494047ac4a8c4

--0016367f92e67ec494047ac4a8c4
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

where can i find the source code?

On Tue, Dec 15, 2009 at 9:40 PM, Robert Muir <rcmuir@gmail.com> wrote:

> there is an icu transform tokenfilter in the patch here:
> http://issues.apache.org/jira/browse/LUCENE-1488
>
>    Transliterator pinyin =3D Transliterator.getInstance("Han-Latin");
>    Tokenizer tokenizer =3D new KeywordTokenizer(new StringReader("=D6=D0=
=B9=FA"));
>    ICUTransformFilter filter =3D new ICUTransformFilter(tokenizer, pinyin=
);
>    assertTokenStreamContents(filter, new String[] { "zh=A8=ADng gu=A8=AE"=
 } );
>
> note it will add tone marks and insert space between syllables by default
> if you do not want this, you need to do some cleanup.
>
>    Transliterator pinyin =3D Transliterator.getInstance("Han-Latin; NFD;
> [[:NonspacingMark:][:Space:]] Remove");
>    Tokenizer tokenizer =3D new KeywordTokenizer(new StringReader("=D6=D0=
=B9=FA"));
>    ICUTransformFilter filter =3D new ICUTransformFilter(tokenizer, pinyin=
);
>    assertTokenStreamContents(filter, new String[] { "zhongguo" } );
>
>
> 2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>
>
> > Hi, guys,
> >     I'm implementing a search engine based on Lucene for Chinese. So I
> want
> > to support pinyin search as Google China do.
> >
> > e.g.
> >    =A1=B0=D6=D0=B9=FA=A1=B1  means Chinese in English
> >    this word's pinyin input is "zhongguo"
> > The feature i want to implement is when user type zhongguo the results
> will
> > include documents containing "=D6=D0=B9=FA" or even Chinese
> >
> > Anybody here know how to achieve this?
> >
> > --
> > Weiwei Wang
> > Alex Wang
> > =CD=F5=CE=A1=CE=A1
> > Room 403, Mengmin Wei Building
> > Computer Science Department
> > Gulou Campus of Nanjing University
> > Nanjing, P.R.China, 210093
> >
> > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> >
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>



--=20
Weiwei Wang
Alex Wang
=CD=F5=CE=A1=CE=A1
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--0016367f92e67ec494047ac4a8c4--

From java-user-return-44119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 15 13:52:39 2009
Return-Path: <java-user-return-44119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16422 invoked from network); 15 Dec 2009 13:52:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Dec 2009 13:52:39 -0000
Received: (qmail 49995 invoked by uid 500); 15 Dec 2009 13:52:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49916 invoked by uid 500); 15 Dec 2009 13:52:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49906 invoked by uid 99); 15 Dec 2009 13:52:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 13:52:37 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.216.171 as permitted sender)
Received: from [209.85.216.171] (HELO mail-px0-f171.google.com) (209.85.216.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 13:52:35 +0000
Received: by pxi1 with SMTP id 1so3461618pxi.29
        for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 05:52:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=KgbNku7BaADsita1uNBZ25VCk37j9WzDjvSAhBoEYbY=;
        b=adCQcH+ar2jllpY5y8a6ThOJtmMYJN5DBWIfyyjCkLxr01ZvkLk54EB64hD1k0x3rT
         ZHENw1nqFepcm17ObAAWUucAehDrkjJXWfHEedUGOQ7yMtpq/eriMuifTDNj//Us1YOg
         r9ZEphjmZbEVvJ9HXoZ+GDpEhe+B+HByx4c6w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=NAYLjN72GLNB9rJ7ikbokziZF2LnIxRBBPjnLsLX26jorqlw/QKERukNonl0Uob56b
         1+UKlcfcE/r8CqsjIQukjpq9M2BgL2LNXYV75Sxj+2z/ux8GmV9LNbRncI4GZLLbmaCY
         blZ/ykculsIp3kKnjMk2g1i5wTj7bAdCA+5Wo=
MIME-Version: 1.0
Received: by 10.114.187.7 with SMTP id k7mr4293340waf.106.1260885135116; Tue, 
	15 Dec 2009 05:52:15 -0800 (PST)
In-Reply-To: <7d94dcde0912150549t361a55c9va6a7cc785e062858@mail.gmail.com>
References: <7d94dcde0912150526hdc3f9cev7a7368d4df5f06f8@mail.gmail.com> 
	<8f0ad1f30912150540i4d380bc2o43c9c5b079b923d7@mail.gmail.com> 
	<7d94dcde0912150549t361a55c9va6a7cc785e062858@mail.gmail.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Tue, 15 Dec 2009 08:51:55 -0500
Message-ID: <8f0ad1f30912150551v13fb0959vf3d011b2b969ea09@mail.gmail.com>
Subject: Re: How to do alias(Pinyin) search in Lucene
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64ca8a694c9d9047ac4b2ce

--0016e64ca8a694c9d9047ac4b2ce
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

look at the latest patch file attached to the issue, it should work with
lucene 2.9 or greater (I think)

2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>

> where can i find the source code?
>
> On Tue, Dec 15, 2009 at 9:40 PM, Robert Muir <rcmuir@gmail.com> wrote:
>
> > there is an icu transform tokenfilter in the patch here:
> > http://issues.apache.org/jira/browse/LUCENE-1488
> >
> >    Transliterator pinyin =3D Transliterator.getInstance("Han-Latin");
> >    Tokenizer tokenizer =3D new KeywordTokenizer(new StringReader("=E4=
=B8=AD=E5=9B=BD"));
> >    ICUTransformFilter filter =3D new ICUTransformFilter(tokenizer, piny=
in);
> >    assertTokenStreamContents(filter, new String[] { "zh=C5=8Dng gu=C3=
=B3" } );
> >
> > note it will add tone marks and insert space between syllables by defau=
lt
> > if you do not want this, you need to do some cleanup.
> >
> >    Transliterator pinyin =3D Transliterator.getInstance("Han-Latin; NFD=
;
> > [[:NonspacingMark:][:Space:]] Remove");
> >    Tokenizer tokenizer =3D new KeywordTokenizer(new StringReader("=E4=
=B8=AD=E5=9B=BD"));
> >    ICUTransformFilter filter =3D new ICUTransformFilter(tokenizer, piny=
in);
> >    assertTokenStreamContents(filter, new String[] { "zhongguo" } );
> >
> >
> > 2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>
> >
> > > Hi, guys,
> > >     I'm implementing a search engine based on Lucene for Chinese. So =
I
> > want
> > > to support pinyin search as Google China do.
> > >
> > > e.g.
> > >    =E2=80=9C=E4=B8=AD=E5=9B=BD=E2=80=9D  means Chinese in English
> > >    this word's pinyin input is "zhongguo"
> > > The feature i want to implement is when user type zhongguo the result=
s
> > will
> > > include documents containing "=E4=B8=AD=E5=9B=BD" or even Chinese
> > >
> > > Anybody here know how to achieve this?
> > >
> > > --
> > > Weiwei Wang
> > > Alex Wang
> > > =E7=8E=8B=E5=B7=8D=E5=B7=8D
> > > Room 403, Mengmin Wei Building
> > > Computer Science Department
> > > Gulou Campus of Nanjing University
> > > Nanjing, P.R.China, 210093
> > >
> > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > >
> >
> >
> >
> > --
> > Robert Muir
> > rcmuir@gmail.com
> >
>
>
>
> --
> Weiwei Wang
> Alex Wang
> =E7=8E=8B=E5=B7=8D=E5=B7=8D
> Room 403, Mengmin Wei Building
> Computer Science Department
> Gulou Campus of Nanjing University
> Nanjing, P.R.China, 210093
>
> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>



--=20
Robert Muir
rcmuir@gmail.com

--0016e64ca8a694c9d9047ac4b2ce--

From java-user-return-44120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 15 14:14:13 2009
Return-Path: <java-user-return-44120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30524 invoked from network); 15 Dec 2009 14:14:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Dec 2009 14:14:13 -0000
Received: (qmail 91995 invoked by uid 500); 15 Dec 2009 14:14:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91913 invoked by uid 500); 15 Dec 2009 14:14:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91903 invoked by uid 99); 15 Dec 2009 14:14:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 14:14:09 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.211.185 as permitted sender)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 14:14:00 +0000
Received: by ywh15 with SMTP id 15so4189107ywh.5
        for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 06:13:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=H8SJT04H6bvF0997EiZKBwYgu3MJvpUe0CVOksAhq4U=;
        b=sHKMf0Tr1AnKrdHPJ1sbrS2/nQ022y0dtvxK+WckX0swe5owP2gKVqf7YIzssl3XgQ
         gHfTHzBokVM0vdSYXCZhpkuWqXVK07eSbxM0E5afFv2NExAq3xBMJAnZuW3mhm0vpcX/
         Y/WKmpzg5a+0F7WmKg6iB5vrKvnd4kWZdMRbU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=NJ1QP/1Daj/WRRDrQqwBJtemdBoF/YThcWEkqfFn3hwwCKwhCcGaTfu3CBB1GHt612
         OdaGB80s1mQbbQWYtc+uNGGI6iMBxMMufw4SNCUOt5uZvkZurC4XL3KkiBkesq3I2MAj
         Zw9Ld3Gx6cloSWOPFwCJCpA2eWx5VrbKUe+C8=
MIME-Version: 1.0
Received: by 10.91.21.10 with SMTP id y10mr2389897agi.113.1260886419025; Tue, 
	15 Dec 2009 06:13:39 -0800 (PST)
In-Reply-To: <8f0ad1f30912150551v13fb0959vf3d011b2b969ea09@mail.gmail.com>
References: <7d94dcde0912150526hdc3f9cev7a7368d4df5f06f8@mail.gmail.com>
	 <8f0ad1f30912150540i4d380bc2o43c9c5b079b923d7@mail.gmail.com>
	 <7d94dcde0912150549t361a55c9va6a7cc785e062858@mail.gmail.com>
	 <8f0ad1f30912150551v13fb0959vf3d011b2b969ea09@mail.gmail.com>
Date: Tue, 15 Dec 2009 22:13:38 +0800
Message-ID: <7d94dcde0912150613x509e04f1s6c3927cf61d210c4@mail.gmail.com>
Subject: Re: How to do alias(Pinyin) search in Lucene
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e641db1e1baee1047ac4ff30
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e641db1e1baee1047ac4ff30
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Yes, i found the patch file LUCENE-1488.patch and there's no icu directory
in my dowloaded contrib directory.

I'm a rookie guy using patch, i'm currently in the contrib dir, could
anybody tell me how to execute this patch command to generate the relevant
dir and souce files?

On Tue, Dec 15, 2009 at 9:51 PM, Robert Muir <rcmuir@gmail.com> wrote:

> look at the latest patch file attached to the issue, it should work with
> lucene 2.9 or greater (I think)
>
> 2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>
>
> > where can i find the source code?
> >
> > On Tue, Dec 15, 2009 at 9:40 PM, Robert Muir <rcmuir@gmail.com> wrote:
> >
> > > there is an icu transform tokenfilter in the patch here:
> > > http://issues.apache.org/jira/browse/LUCENE-1488
> > >
> > >    Transliterator pinyin =3D Transliterator.getInstance("Han-Latin");
> > >    Tokenizer tokenizer =3D new KeywordTokenizer(new StringReader("=E4=
=B8=AD=E5=9B=BD"));
> > >    ICUTransformFilter filter =3D new ICUTransformFilter(tokenizer,
> pinyin);
> > >    assertTokenStreamContents(filter, new String[] { "zh=C5=8Dng gu=C3=
=B3" } );
> > >
> > > note it will add tone marks and insert space between syllables by
> default
> > > if you do not want this, you need to do some cleanup.
> > >
> > >    Transliterator pinyin =3D Transliterator.getInstance("Han-Latin; N=
FD;
> > > [[:NonspacingMark:][:Space:]] Remove");
> > >    Tokenizer tokenizer =3D new KeywordTokenizer(new StringReader("=E4=
=B8=AD=E5=9B=BD"));
> > >    ICUTransformFilter filter =3D new ICUTransformFilter(tokenizer,
> pinyin);
> > >    assertTokenStreamContents(filter, new String[] { "zhongguo" } );
> > >
> > >
> > > 2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>
> > >
> > > > Hi, guys,
> > > >     I'm implementing a search engine based on Lucene for Chinese. S=
o
> I
> > > want
> > > > to support pinyin search as Google China do.
> > > >
> > > > e.g.
> > > >    =E2=80=9C=E4=B8=AD=E5=9B=BD=E2=80=9D  means Chinese in English
> > > >    this word's pinyin input is "zhongguo"
> > > > The feature i want to implement is when user type zhongguo the
> results
> > > will
> > > > include documents containing "=E4=B8=AD=E5=9B=BD" or even Chinese
> > > >
> > > > Anybody here know how to achieve this?
> > > >
> > > > --
> > > > Weiwei Wang
> > > > Alex Wang
> > > > =E7=8E=8B=E5=B7=8D=E5=B7=8D
> > > > Room 403, Mengmin Wei Building
> > > > Computer Science Department
> > > > Gulou Campus of Nanjing University
> > > > Nanjing, P.R.China, 210093
> > > >
> > > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > > >
> > >
> > >
> > >
> > > --
> > > Robert Muir
> > > rcmuir@gmail.com
> > >
> >
> >
> >
> > --
> > Weiwei Wang
> > Alex Wang
> > =E7=8E=8B=E5=B7=8D=E5=B7=8D
> > Room 403, Mengmin Wei Building
> > Computer Science Department
> > Gulou Campus of Nanjing University
> > Nanjing, P.R.China, 210093
> >
> > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> >
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>



--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--0016e641db1e1baee1047ac4ff30--

From java-user-return-44121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 15 14:20:33 2009
Return-Path: <java-user-return-44121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34860 invoked from network); 15 Dec 2009 14:20:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Dec 2009 14:20:33 -0000
Received: (qmail 4202 invoked by uid 500); 15 Dec 2009 14:20:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4109 invoked by uid 500); 15 Dec 2009 14:20:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4099 invoked by uid 99); 15 Dec 2009 14:20:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 14:20:29 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.216.171 as permitted sender)
Received: from [209.85.216.171] (HELO mail-px0-f171.google.com) (209.85.216.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 14:20:25 +0000
Received: by pxi1 with SMTP id 1so3477255pxi.29
        for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 06:20:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=Lhpz4JUUlMXwhk+7U8WpUsMmtbUqxeFfYTXHlJZeVJ0=;
        b=qc6QmvOHtI50YQ2gXmA8sRFWhZaVH/bWz7uhV7tCFMJ2evtkDP4ONkdbexc1T4xHI7
         9HCgTTdJdagJ4sBSaRDHdEdrw9A+1ewq6dCwHOWDKm8nbwwttKxdeH5zLZn8t2BiTTYm
         ccxjtj2uWBO7kVnQdwLEkJbM7yUCX0YA1Ek1g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=cUnG3xl3g/5i+hp+5IYqsclZVmVV6cOgZB74H4Z/OxL9wW5dakcwnuj0j4MBo5PO+M
         Vx/eQ0qfckxp8N8JogbyrbyKxUoKdYCcccCEmsn3y4anWK7L7iRAGSRnoI6VHDsxaGaX
         Zh87Hk8GJFzYR4wR0lgt3S5g7wlLYzShaZH0k=
MIME-Version: 1.0
Received: by 10.114.187.7 with SMTP id k7mr4311979waf.106.1260886805097; Tue, 
	15 Dec 2009 06:20:05 -0800 (PST)
In-Reply-To: <7d94dcde0912150613x509e04f1s6c3927cf61d210c4@mail.gmail.com>
References: <7d94dcde0912150526hdc3f9cev7a7368d4df5f06f8@mail.gmail.com> 
	<8f0ad1f30912150540i4d380bc2o43c9c5b079b923d7@mail.gmail.com> 
	<7d94dcde0912150549t361a55c9va6a7cc785e062858@mail.gmail.com> 
	<8f0ad1f30912150551v13fb0959vf3d011b2b969ea09@mail.gmail.com> 
	<7d94dcde0912150613x509e04f1s6c3927cf61d210c4@mail.gmail.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Tue, 15 Dec 2009 09:19:45 -0500
Message-ID: <8f0ad1f30912150619r40cfe55aj702dfbce86dbeb8@mail.gmail.com>
Subject: Re: How to do alias(Pinyin) search in Lucene
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64ca8a61eac5f047ac51698

--0016e64ca8a61eac5f047ac51698
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

 if you have lucene 2.9 or 3.0 source code, just run patch -p0 <
/path/to/LUCENE-XXYY.patch from the lucene source code root directory... it
should create the necessary directory and files.
then run 'ant' , in this case it should create a lucene-icu jar file in the
build directory.

the patch doesnt include the icu dependency itself so you need to get that
jar file from www.icu-project.org and have it in your classpath also

sorry for the trouble, hope to integrate some of this soon for a future
release.

On Tue, Dec 15, 2009 at 9:13 AM, Weiwei Wang <ww.wang.cs@gmail.com> wrote:

> Yes, i found the patch file LUCENE-1488.patch and there's no icu director=
y
> in my dowloaded contrib directory.
>
> I'm a rookie guy using patch, i'm currently in the contrib dir, could
> anybody tell me how to execute this patch command to generate the relevan=
t
> dir and souce files?
>
> On Tue, Dec 15, 2009 at 9:51 PM, Robert Muir <rcmuir@gmail.com> wrote:
>
> > look at the latest patch file attached to the issue, it should work wit=
h
> > lucene 2.9 or greater (I think)
> >
> > 2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>
> >
> > > where can i find the source code?
> > >
> > > On Tue, Dec 15, 2009 at 9:40 PM, Robert Muir <rcmuir@gmail.com> wrote=
:
> > >
> > > > there is an icu transform tokenfilter in the patch here:
> > > > http://issues.apache.org/jira/browse/LUCENE-1488
> > > >
> > > >    Transliterator pinyin =3D Transliterator.getInstance("Han-Latin"=
);
> > > >    Tokenizer tokenizer =3D new KeywordTokenizer(new
> StringReader("=E4=B8=AD=E5=9B=BD"));
> > > >    ICUTransformFilter filter =3D new ICUTransformFilter(tokenizer,
> > pinyin);
> > > >    assertTokenStreamContents(filter, new String[] { "zh=C5=8Dng gu=
=C3=B3" } );
> > > >
> > > > note it will add tone marks and insert space between syllables by
> > default
> > > > if you do not want this, you need to do some cleanup.
> > > >
> > > >    Transliterator pinyin =3D Transliterator.getInstance("Han-Latin;
> NFD;
> > > > [[:NonspacingMark:][:Space:]] Remove");
> > > >    Tokenizer tokenizer =3D new KeywordTokenizer(new
> StringReader("=E4=B8=AD=E5=9B=BD"));
> > > >    ICUTransformFilter filter =3D new ICUTransformFilter(tokenizer,
> > pinyin);
> > > >    assertTokenStreamContents(filter, new String[] { "zhongguo" } );
> > > >
> > > >
> > > > 2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>
> > > >
> > > > > Hi, guys,
> > > > >     I'm implementing a search engine based on Lucene for Chinese.
> So
> > I
> > > > want
> > > > > to support pinyin search as Google China do.
> > > > >
> > > > > e.g.
> > > > >    =E2=80=9C=E4=B8=AD=E5=9B=BD=E2=80=9D  means Chinese in English
> > > > >    this word's pinyin input is "zhongguo"
> > > > > The feature i want to implement is when user type zhongguo the
> > results
> > > > will
> > > > > include documents containing "=E4=B8=AD=E5=9B=BD" or even Chinese
> > > > >
> > > > > Anybody here know how to achieve this?
> > > > >
> > > > > --
> > > > > Weiwei Wang
> > > > > Alex Wang
> > > > > =E7=8E=8B=E5=B7=8D=E5=B7=8D
> > > > > Room 403, Mengmin Wei Building
> > > > > Computer Science Department
> > > > > Gulou Campus of Nanjing University
> > > > > Nanjing, P.R.China, 210093
> > > > >
> > > > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > > > >
> > > >
> > > >
> > > >
> > > > --
> > > > Robert Muir
> > > > rcmuir@gmail.com
> > > >
> > >
> > >
> > >
> > > --
> > > Weiwei Wang
> > > Alex Wang
> > > =E7=8E=8B=E5=B7=8D=E5=B7=8D
> > > Room 403, Mengmin Wei Building
> > > Computer Science Department
> > > Gulou Campus of Nanjing University
> > > Nanjing, P.R.China, 210093
> > >
> > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > >
> >
> >
> >
> > --
> > Robert Muir
> > rcmuir@gmail.com
> >
>
>
>
> --
> Weiwei Wang
> Alex Wang
> =E7=8E=8B=E5=B7=8D=E5=B7=8D
> Room 403, Mengmin Wei Building
> Computer Science Department
> Gulou Campus of Nanjing University
> Nanjing, P.R.China, 210093
>
> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>



--=20
Robert Muir
rcmuir@gmail.com

--0016e64ca8a61eac5f047ac51698--

From java-user-return-44122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 15 14:22:04 2009
Return-Path: <java-user-return-44122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35769 invoked from network); 15 Dec 2009 14:22:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Dec 2009 14:22:04 -0000
Received: (qmail 10936 invoked by uid 500); 15 Dec 2009 14:22:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10864 invoked by uid 500); 15 Dec 2009 14:22:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10854 invoked by uid 99); 15 Dec 2009 14:22:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 14:22:01 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 59.106.19.174 is neither permitted nor denied by domain of koji@r.email.ne.jp)
Received: from [59.106.19.174] (HELO www724.sakura.ne.jp) (59.106.19.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 14:21:57 +0000
Received: from koji-sekiguchi-no-macbook.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	(authenticated bits=0)
	by www724.sakura.ne.jp (8.14.3/8.14.3) with ESMTP id nBFELZm5033333
	for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 23:21:35 +0900 (JST)
	(envelope-from koji@r.email.ne.jp)
Message-ID: <4B279B6F.6090309@r.email.ne.jp>
Date: Tue, 15 Dec 2009 23:21:35 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.23 (Macintosh/20090812)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Looking for a MappingCharFilter that accepts regular expressions
References: <4B1D6A14.8020304@fastmail.fm> <4B251E8E.8040809@r.email.ne.jp> <4B25212A.4050902@r.email.ne.jp> <4B273BB8.6010101@fastmail.fm> <4B273EB8.4060509@fastmail.fm>
In-Reply-To: <4B273EB8.4060509@fastmail.fm>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Paul Taylor wrote:
> CharStream.Found it at 
> http://svn.apache.org/viewvc/lucene/solr/trunk/src/java/org/apache/solr/analysis/PatternReplaceFilter.java?revision=804726&view=markup, 
> BTW why not ad this to the Lucene coebase rather than solr code base.
>
> Unfortunately it doesn't address my problem because it is a 
> tokenfilter that works on a tokenstream, but Im trying to write a 
> CharFilter to be applied before the text is tokenized , but I'm 
> struggling with implementing CharStream.correctOffset()
>
>
> Paul
I said PatternReplace*Char*Filter, not TokenFilter (as you mentioned).
I've just committed PatternReplaceCharFilter in Solr trunk.

Koji

-- 
http://www.rondhuit.com/en/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 15 14:23:08 2009
Return-Path: <java-user-return-44123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36382 invoked from network); 15 Dec 2009 14:23:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Dec 2009 14:23:08 -0000
Received: (qmail 12971 invoked by uid 500); 15 Dec 2009 14:23:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12891 invoked by uid 500); 15 Dec 2009 14:23:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12881 invoked by uid 99); 15 Dec 2009 14:23:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 14:23:06 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.219.225 as permitted sender)
Received: from [209.85.219.225] (HELO mail-ew0-f225.google.com) (209.85.219.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 14:22:56 +0000
Received: by ewy25 with SMTP id 25so4682433ewy.5
        for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 06:22:36 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=XByYfrOsGZoF3LzbroWYoAFPS0qYDJC5sdK0lN3q2Sc=;
        b=BDhfH5HnLLULqYbsUjtXFIdt0b0V18KVA2TIQV9uowlYWiqOzUEGoGCRGFraqeGS0X
         MG4b0twqD6r6BLXMWrSJqCu9pOhO4wE1a8znpj8J7We4v3DKeTttPt15+V3VFutngva9
         LJotgN2+56YyiZi/WbXJh0YNn9uHI+Yre1oLc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=DAFex/wQzN/lXqqhzrcqwLH6BE2yn30ftD/BDXvE5uKAgyAROvlsrSdfzFpy7DaWw8
         /+/17NMttrvSjFwvxFNajPjSDVQbIUi+loTBVgMnooI+N8KYzEYWgzB5nynn86Yf6/RJ
         jYq+mm3S3GZOjL7T3uHMtLQ5a0ZwlY7ItemTM=
MIME-Version: 1.0
Received: by 10.216.87.67 with SMTP id x45mr2652820wee.18.1260886955899; Tue, 
	15 Dec 2009 06:22:35 -0800 (PST)
In-Reply-To: <7d94dcde0912150613x509e04f1s6c3927cf61d210c4@mail.gmail.com>
References: <7d94dcde0912150526hdc3f9cev7a7368d4df5f06f8@mail.gmail.com>
	 <8f0ad1f30912150540i4d380bc2o43c9c5b079b923d7@mail.gmail.com>
	 <7d94dcde0912150549t361a55c9va6a7cc785e062858@mail.gmail.com>
	 <8f0ad1f30912150551v13fb0959vf3d011b2b969ea09@mail.gmail.com>
	 <7d94dcde0912150613x509e04f1s6c3927cf61d210c4@mail.gmail.com>
Date: Tue, 15 Dec 2009 09:22:35 -0500
Message-ID: <359a92830912150622q25627299r617ff184eb45dae0@mail.gmail.com>
Subject: Re: How to do alias(Pinyin) search in Lucene
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d99ead1bbcf7047ac51f6c
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d99ead1bbcf7047ac51f6c
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

If you're using an IDE, there should be an "apply patch" somewhere. In
Eclipse, you right-click on the project>>team>>apply patch.

In IntelliJ, it's something like Version Control>>(subversion???)>>apply
patch....

Or do as Robert suggests from the command line...

HTH
Erick

On Tue, Dec 15, 2009 at 9:13 AM, Weiwei Wang <ww.wang.cs@gmail.com> wrote:

> Yes, i found the patch file LUCENE-1488.patch and there's no icu director=
y
> in my dowloaded contrib directory.
>
> I'm a rookie guy using patch, i'm currently in the contrib dir, could
> anybody tell me how to execute this patch command to generate the relevan=
t
> dir and souce files?
>
> On Tue, Dec 15, 2009 at 9:51 PM, Robert Muir <rcmuir@gmail.com> wrote:
>
> > look at the latest patch file attached to the issue, it should work wit=
h
> > lucene 2.9 or greater (I think)
> >
> > 2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>
> >
> > > where can i find the source code?
> > >
> > > On Tue, Dec 15, 2009 at 9:40 PM, Robert Muir <rcmuir@gmail.com> wrote=
:
> > >
> > > > there is an icu transform tokenfilter in the patch here:
> > > > http://issues.apache.org/jira/browse/LUCENE-1488
> > > >
> > > >    Transliterator pinyin =3D Transliterator.getInstance("Han-Latin"=
);
> > > >    Tokenizer tokenizer =3D new KeywordTokenizer(new
> StringReader("=D6=D0=B9=FA"));
> > > >    ICUTransformFilter filter =3D new ICUTransformFilter(tokenizer,
> > pinyin);
> > > >    assertTokenStreamContents(filter, new String[] { "zh=A8=ADng gu=
=A8=AE" } );
> > > >
> > > > note it will add tone marks and insert space between syllables by
> > default
> > > > if you do not want this, you need to do some cleanup.
> > > >
> > > >    Transliterator pinyin =3D Transliterator.getInstance("Han-Latin;
> NFD;
> > > > [[:NonspacingMark:][:Space:]] Remove");
> > > >    Tokenizer tokenizer =3D new KeywordTokenizer(new
> StringReader("=D6=D0=B9=FA"));
> > > >    ICUTransformFilter filter =3D new ICUTransformFilter(tokenizer,
> > pinyin);
> > > >    assertTokenStreamContents(filter, new String[] { "zhongguo" } );
> > > >
> > > >
> > > > 2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>
> > > >
> > > > > Hi, guys,
> > > > >     I'm implementing a search engine based on Lucene for Chinese.
> So
> > I
> > > > want
> > > > > to support pinyin search as Google China do.
> > > > >
> > > > > e.g.
> > > > >    =A1=B0=D6=D0=B9=FA=A1=B1  means Chinese in English
> > > > >    this word's pinyin input is "zhongguo"
> > > > > The feature i want to implement is when user type zhongguo the
> > results
> > > > will
> > > > > include documents containing "=D6=D0=B9=FA" or even Chinese
> > > > >
> > > > > Anybody here know how to achieve this?
> > > > >
> > > > > --
> > > > > Weiwei Wang
> > > > > Alex Wang
> > > > > =CD=F5=CE=A1=CE=A1
> > > > > Room 403, Mengmin Wei Building
> > > > > Computer Science Department
> > > > > Gulou Campus of Nanjing University
> > > > > Nanjing, P.R.China, 210093
> > > > >
> > > > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > > > >
> > > >
> > > >
> > > >
> > > > --
> > > > Robert Muir
> > > > rcmuir@gmail.com
> > > >
> > >
> > >
> > >
> > > --
> > > Weiwei Wang
> > > Alex Wang
> > > =CD=F5=CE=A1=CE=A1
> > > Room 403, Mengmin Wei Building
> > > Computer Science Department
> > > Gulou Campus of Nanjing University
> > > Nanjing, P.R.China, 210093
> > >
> > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > >
> >
> >
> >
> > --
> > Robert Muir
> > rcmuir@gmail.com
> >
>
>
>
> --
> Weiwei Wang
> Alex Wang
> =CD=F5=CE=A1=CE=A1
> Room 403, Mengmin Wei Building
> Computer Science Department
> Gulou Campus of Nanjing University
> Nanjing, P.R.China, 210093
>
> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>

--0016e6d99ead1bbcf7047ac51f6c--

From java-user-return-44124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 15 14:23:45 2009
Return-Path: <java-user-return-44124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36821 invoked from network); 15 Dec 2009 14:23:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Dec 2009 14:23:45 -0000
Received: (qmail 15239 invoked by uid 500); 15 Dec 2009 14:23:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15173 invoked by uid 500); 15 Dec 2009 14:23:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15163 invoked by uid 99); 15 Dec 2009 14:23:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 14:23:42 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.210.192 as permitted sender)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 14:23:32 +0000
Received: by yxe30 with SMTP id 30so4518082yxe.29
        for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 06:23:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=ouxXnKOOVBl8JMzHfMWsvb9elskC3M1kXIAHNGdhtG4=;
        b=EQdGpyIVSACDcMrm32GNnGKOQy5NW4DAZr1kMYwm9uLAanb4yzT1BLuNrIUVSqyPyZ
         MS2sNM6hys7UcZweHTkLYkaJinBDQkP9EBo8hwWxte9ttzK6cKi0UzVf+hKXXCaLizkO
         +t/AQ6m0/BkZfPT0O50TvSiJRKmfu8KLztMtI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=gTsScUkZCW7oSgqCTq0fTM+TFLD5DGnguDcXRzOqkH9VKvdi26qKIGePhOs4rEN/QT
         5vErfOSWRFt/BzHhLcP3QYPf9NBQ1LMMFWJKZrc0ShgAJ4qC913XmYsQhhynf92QCO1Q
         NvzBUsOC7gZtjyswKH1Fz7MyT4EniFZCRVRxI=
MIME-Version: 1.0
Received: by 10.90.41.31 with SMTP id o31mr6375921ago.80.1260886989029; Tue, 
	15 Dec 2009 06:23:09 -0800 (PST)
In-Reply-To: <8f0ad1f30912150619r40cfe55aj702dfbce86dbeb8@mail.gmail.com>
References: <7d94dcde0912150526hdc3f9cev7a7368d4df5f06f8@mail.gmail.com>
	 <8f0ad1f30912150540i4d380bc2o43c9c5b079b923d7@mail.gmail.com>
	 <7d94dcde0912150549t361a55c9va6a7cc785e062858@mail.gmail.com>
	 <8f0ad1f30912150551v13fb0959vf3d011b2b969ea09@mail.gmail.com>
	 <7d94dcde0912150613x509e04f1s6c3927cf61d210c4@mail.gmail.com>
	 <8f0ad1f30912150619r40cfe55aj702dfbce86dbeb8@mail.gmail.com>
Date: Tue, 15 Dec 2009 22:23:08 +0800
Message-ID: <7d94dcde0912150623w5fcb8914o2e13a2bb0ea707a9@mail.gmail.com>
Subject: Re: How to do alias(Pinyin) search in Lucene
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016361e7c2816110e047ac521cd
X-Virus-Checked: Checked by ClamAV on apache.org

--0016361e7c2816110e047ac521cd
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

got it, thanks, Robert

On Tue, Dec 15, 2009 at 10:19 PM, Robert Muir <rcmuir@gmail.com> wrote:

>  if you have lucene 2.9 or 3.0 source code, just run patch -p0 <
> /path/to/LUCENE-XXYY.patch from the lucene source code root directory... =
it
> should create the necessary directory and files.
> then run 'ant' , in this case it should create a lucene-icu jar file in t=
he
> build directory.
>
> the patch doesnt include the icu dependency itself so you need to get tha=
t
> jar file from www.icu-project.org and have it in your classpath also
>
> sorry for the trouble, hope to integrate some of this soon for a future
> release.
>
> On Tue, Dec 15, 2009 at 9:13 AM, Weiwei Wang <ww.wang.cs@gmail.com> wrote=
:
>
> > Yes, i found the patch file LUCENE-1488.patch and there's no icu
> directory
> > in my dowloaded contrib directory.
> >
> > I'm a rookie guy using patch, i'm currently in the contrib dir, could
> > anybody tell me how to execute this patch command to generate the
> relevant
> > dir and souce files?
> >
> > On Tue, Dec 15, 2009 at 9:51 PM, Robert Muir <rcmuir@gmail.com> wrote:
> >
> > > look at the latest patch file attached to the issue, it should work
> with
> > > lucene 2.9 or greater (I think)
> > >
> > > 2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>
> > >
> > > > where can i find the source code?
> > > >
> > > > On Tue, Dec 15, 2009 at 9:40 PM, Robert Muir <rcmuir@gmail.com>
> wrote:
> > > >
> > > > > there is an icu transform tokenfilter in the patch here:
> > > > > http://issues.apache.org/jira/browse/LUCENE-1488
> > > > >
> > > > >    Transliterator pinyin =3D Transliterator.getInstance("Han-Lati=
n");
> > > > >    Tokenizer tokenizer =3D new KeywordTokenizer(new
> > StringReader("=D6=D0=B9=FA"));
> > > > >    ICUTransformFilter filter =3D new ICUTransformFilter(tokenizer=
,
> > > pinyin);
> > > > >    assertTokenStreamContents(filter, new String[] { "zh=A8=ADng g=
u=A8=AE" }
> );
> > > > >
> > > > > note it will add tone marks and insert space between syllables by
> > > default
> > > > > if you do not want this, you need to do some cleanup.
> > > > >
> > > > >    Transliterator pinyin =3D Transliterator.getInstance("Han-Lati=
n;
> > NFD;
> > > > > [[:NonspacingMark:][:Space:]] Remove");
> > > > >    Tokenizer tokenizer =3D new KeywordTokenizer(new
> > StringReader("=D6=D0=B9=FA"));
> > > > >    ICUTransformFilter filter =3D new ICUTransformFilter(tokenizer=
,
> > > pinyin);
> > > > >    assertTokenStreamContents(filter, new String[] { "zhongguo" } =
);
> > > > >
> > > > >
> > > > > 2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>
> > > > >
> > > > > > Hi, guys,
> > > > > >     I'm implementing a search engine based on Lucene for Chines=
e.
> > So
> > > I
> > > > > want
> > > > > > to support pinyin search as Google China do.
> > > > > >
> > > > > > e.g.
> > > > > >    =A1=B0=D6=D0=B9=FA=A1=B1  means Chinese in English
> > > > > >    this word's pinyin input is "zhongguo"
> > > > > > The feature i want to implement is when user type zhongguo the
> > > results
> > > > > will
> > > > > > include documents containing "=D6=D0=B9=FA" or even Chinese
> > > > > >
> > > > > > Anybody here know how to achieve this?
> > > > > >
> > > > > > --
> > > > > > Weiwei Wang
> > > > > > Alex Wang
> > > > > > =CD=F5=CE=A1=CE=A1
> > > > > > Room 403, Mengmin Wei Building
> > > > > > Computer Science Department
> > > > > > Gulou Campus of Nanjing University
> > > > > > Nanjing, P.R.China, 210093
> > > > > >
> > > > > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > > > > >
> > > > >
> > > > >
> > > > >
> > > > > --
> > > > > Robert Muir
> > > > > rcmuir@gmail.com
> > > > >
> > > >
> > > >
> > > >
> > > > --
> > > > Weiwei Wang
> > > > Alex Wang
> > > > =CD=F5=CE=A1=CE=A1
> > > > Room 403, Mengmin Wei Building
> > > > Computer Science Department
> > > > Gulou Campus of Nanjing University
> > > > Nanjing, P.R.China, 210093
> > > >
> > > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > > >
> > >
> > >
> > >
> > > --
> > > Robert Muir
> > > rcmuir@gmail.com
> > >
> >
> >
> >
> > --
> > Weiwei Wang
> > Alex Wang
> > =CD=F5=CE=A1=CE=A1
> > Room 403, Mengmin Wei Building
> > Computer Science Department
> > Gulou Campus of Nanjing University
> > Nanjing, P.R.China, 210093
> >
> > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> >
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>



--=20
Weiwei Wang
Alex Wang
=CD=F5=CE=A1=CE=A1
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--0016361e7c2816110e047ac521cd--

From java-user-return-44125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 15 16:07:46 2009
Return-Path: <java-user-return-44125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79170 invoked from network); 15 Dec 2009 16:07:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Dec 2009 16:07:45 -0000
Received: (qmail 801 invoked by uid 500); 15 Dec 2009 16:07:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 716 invoked by uid 500); 15 Dec 2009 16:07:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 706 invoked by uid 99); 15 Dec 2009 16:07:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 16:07:42 +0000
X-ASF-Spam-Status: No, hits=3.3 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 16:07:33 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NKZvc-0007sR-7G
	for java-user@lucene.apache.org; Tue, 15 Dec 2009 08:07:12 -0800
Message-ID: <26796228.post@talk.nabble.com>
Date: Tue, 15 Dec 2009 08:07:12 -0800 (PST)
From: eddiec <tw_e@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: matching products with suggest feature
In-Reply-To: <1bcb7c7f0802130854s1c5a0bacjc377e9f64225089c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3929_16488994.1260893232219"
X-Nabble-From: tw_e@hotmail.com
References: <1bcb7c7f0802130854s1c5a0bacjc377e9f64225089c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3929_16488994.1260893232219
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


I haven't used Lucene are read the Lucene book in quite a while since I
handed over my university thesis quite a few years ago. However I'm
currently building an ecommerce site from an asp skeleton, the current
search and recommendation algorithms are built on limited SQL searches but
I'd like to migrate these to a much more relevant search result producing
index based search. I'd be more keen to go with an out of the box product
but funds are limited and I've already played with all the usual toys like
sphider and found these much to limited and the ecommerce search solutions
very expensive. Since My days of working with Lucene is there any toys to
accomplish this goal floating around the net that integrate with the Lucene
library.

-----
Eddie Crozier AgriEngineering.co.uk -  http://www.agriengineering.co.uk
Vintage Tractor Parts 
-- 
View this message in context: http://old.nabble.com/matching-products-with-suggest-feature-tp15462672p26796228.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

------=_Part_3929_16488994.1260893232219--


From java-user-return-44126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 15 20:31:48 2009
Return-Path: <java-user-return-44126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14593 invoked from network); 15 Dec 2009 20:31:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Dec 2009 20:31:48 -0000
Received: (qmail 34746 invoked by uid 500); 15 Dec 2009 20:31:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34695 invoked by uid 500); 15 Dec 2009 20:31:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34685 invoked by uid 99); 15 Dec 2009 20:31:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 20:31:45 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of akaris@gmail.com designates 209.85.211.185 as permitted sender)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 20:31:42 +0000
Received: by ywh15 with SMTP id 15so299714ywh.5
        for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 12:31:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:from:date:message-id
         :subject:to:content-type;
        bh=KB7Z4oR2nfVvWgcxVat1u0amWp0bKhbJAsutj/nq6L0=;
        b=MK1ZsjvFedkstzsN2kcokCdwvMvIuDQJfwH1aF6OnkAo62y3H+t7vFt+xR+YAfDANt
         nOJmwNv7S/M/mHRFTd90ipaZsOG3BP1FJrhjcVos0R08Kp1fBKbNXuPl3c3GsfV1/6RE
         Ccu4AYCLtR7jfqRw+lAykjGdk7sROtwYoTB8Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=pod/11ufy3s0DrpkgIl7gjwxNK7Rlxh6aAaspzLcpJ2Ncw02aFlhsFUPKa+EVM+oSM
         iijDDkJIth9EQSjg+ZWda3iskYUvd9OS/8OvJzCLp4ITpbhBVrouWY2tXqwo63D+KmtD
         nhr2m7dTO8weDMNO9XBFNkY3v/ITqpH6wMAGY=
MIME-Version: 1.0
Received: by 10.101.152.16 with SMTP id e16mr1592035ano.180.1260909082084; 
	Tue, 15 Dec 2009 12:31:22 -0800 (PST)
From: Michel Nadeau <akaris@gmail.com>
Date: Tue, 15 Dec 2009 15:31:02 -0500
Message-ID: <962c93f60912151231v3ffb2c18ga0e4637bf5828759@mail.gmail.com>
Subject: Tokenized fields in Lucene 3.0.0
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c92801ee8534047aca4579

--001636c92801ee8534047aca4579
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I just realized that since I upgraded from Lucene 2.x to 3.0.0 (and removed
all deprecated things), searches like that don't work anymore:

test AND blue
test NOT blue
(test AND blue) OR red
etc.

Before 3.0.0, I was inserting my fields like this:

doc.add(new Field("content", sValues[j], Field.Store.YES,
Field.Index.TOKENIZED));

Now I do:

doc.add(new Field("content", sValues[j], Field.Store.YES,
Field.Index.ANALYZED));

My Index writer is opened like this:

writer = new IndexWriter(idx, new StandardAnalyzer(Version.LUCENE_CURRENT),
true, MaxFieldLength.UNLIMITED);

What is the equivalent of tokenized!?

Thanks,

- Mike
akaris@gmail.com

--001636c92801ee8534047aca4579--

From java-user-return-44127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 15 20:38:02 2009
Return-Path: <java-user-return-44127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16687 invoked from network); 15 Dec 2009 20:38:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Dec 2009 20:38:02 -0000
Received: (qmail 44133 invoked by uid 500); 15 Dec 2009 20:38:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44049 invoked by uid 500); 15 Dec 2009 20:38:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44039 invoked by uid 99); 15 Dec 2009 20:38:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 20:37:59 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.221.203 as permitted sender)
Received: from [209.85.221.203] (HELO mail-qy0-f203.google.com) (209.85.221.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 20:37:57 +0000
Received: by qyk41 with SMTP id 41so128594qyk.29
        for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 12:37:36 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :x-enigmail-version:content-type:content-transfer-encoding;
        bh=TXTvYuSyS8mTPwVypvnUBVdi27Xc63ZEUzVx3LajHco=;
        b=R5v2+XpleFx+ly6cZhSmGB2QoVmSgHD8eaT13zi/hVbbXFrr6q+QC42vNH5TesSVk5
         gRnZMrieTHMAxFOKNUO/SEsaCkk2CWfmVmKzF0MH9G3UhHq2OHpRHX+aOza9GAZy2K0S
         d/aX0s6MqWiah7JM3UuvXUYJyrZ+io55aqqBM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:x-enigmail-version:content-type
         :content-transfer-encoding;
        b=L+tZ3N2jAH0cTZPO4R/qsS2Vkdf+bcFjTeKipGyyTfTIocM3x3l0AqrcjUwZoNkZZQ
         RKWbiIVG3uGZKDZD0Ue814qG39D9oNnhNM/QEaqxnwHSuQA7waCdjSt+OkqD+1ObUi5O
         X7eQhEPUMm08uQOgyBIGA7aXl2wQnqJzDRWTw=
Received: by 10.224.45.34 with SMTP id c34mr42402qaf.15.1260909456815;
        Tue, 15 Dec 2009 12:37:36 -0800 (PST)
Received: from ?192.168.1.101? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 5sm504362qwg.58.2009.12.15.12.37.35
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 15 Dec 2009 12:37:35 -0800 (PST)
Message-ID: <4B27F386.9060708@gmail.com>
Date: Tue, 15 Dec 2009 15:37:26 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.23 (X11/20090817)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Tokenized fields in Lucene 3.0.0
References: <962c93f60912151231v3ffb2c18ga0e4637bf5828759@mail.gmail.com>
In-Reply-To: <962c93f60912151231v3ffb2c18ga0e4637bf5828759@mail.gmail.com>
X-Enigmail-Version: 0.96.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Any more info to share?

In 2.9, Tokenized literally == Analyzed.

    /** @deprecated this has been renamed to {@link #ANALYZED} */
    public static final Index TOKENIZED = ANALYZED;

Michel Nadeau wrote:
> Hi,
>
> I just realized that since I upgraded from Lucene 2.x to 3.0.0 (and removed
> all deprecated things), searches like that don't work anymore:
>
> test AND blue
> test NOT blue
> (test AND blue) OR red
> etc.
>
> Before 3.0.0, I was inserting my fields like this:
>
> doc.add(new Field("content", sValues[j], Field.Store.YES,
> Field.Index.TOKENIZED));
>
> Now I do:
>
> doc.add(new Field("content", sValues[j], Field.Store.YES,
> Field.Index.ANALYZED));
>
> My Index writer is opened like this:
>
> writer = new IndexWriter(idx, new StandardAnalyzer(Version.LUCENE_CURRENT),
> true, MaxFieldLength.UNLIMITED);
>
> What is the equivalent of tokenized!?
>
> Thanks,
>
> - Mike
> akaris@gmail.com
>
>   


-- 
- Mark

http://www.lucidimagination.com




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 15 20:49:41 2009
Return-Path: <java-user-return-44128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19346 invoked from network); 15 Dec 2009 20:49:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Dec 2009 20:49:40 -0000
Received: (qmail 56038 invoked by uid 500); 15 Dec 2009 20:49:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55954 invoked by uid 500); 15 Dec 2009 20:49:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55942 invoked by uid 99); 15 Dec 2009 20:49:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 20:49:38 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of akaris@gmail.com designates 209.85.210.192 as permitted sender)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 20:49:29 +0000
Received: by yxe30 with SMTP id 30so325889yxe.29
        for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 12:49:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=AuS+36Q1Wwy1HTDj5nuYAy0CzuQC7WmC7u5GeGbQZ+k=;
        b=ZWRq0SqupfTQdDEuW24uI0T1LMoO9Ozrfd5CfzGGPPCdmHKVkt5HQ/oFZ8sPkhG5dg
         3SqdW8VS5kY/H3sMwnFJ8DsGe6KaR6Ow4ODXFyaMijE6OzhBQmA9O56Td/4tf3M2toFL
         NOUwzqWdHeIs2ICIro7sfJkKTpsi3r7gUkqpA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=clgHbIB8+UnC2ohQNlmmOhp7T1l6DRMg/Puu7ILzEYwg5dSoqwh0fFA5WZk67pv0gk
         qWEuz1ib0rNqYuuwVNh+h591OaKTRMct7bOlGrs26sAchFE4nmN2ePirrAUr7aEqcW7X
         /gCuYS6l5MiI3fNC+fe8sGNrnuBBuhHoAhGZ4=
MIME-Version: 1.0
Received: by 10.101.134.25 with SMTP id l25mr57456ann.98.1260910148106; Tue, 
	15 Dec 2009 12:49:08 -0800 (PST)
In-Reply-To: <4B27F386.9060708@gmail.com>
References: <962c93f60912151231v3ffb2c18ga0e4637bf5828759@mail.gmail.com> 
	<4B27F386.9060708@gmail.com>
From: Michel Nadeau <akaris@gmail.com>
Date: Tue, 15 Dec 2009 15:48:48 -0500
Message-ID: <962c93f60912151248w7f522dbdmd2fcd3687f3c587@mail.gmail.com>
Subject: Re: Tokenized fields in Lucene 3.0.0
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c9274d78bc21047aca85ee
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c9274d78bc21047aca85ee
Content-Type: text/plain; charset=ISO-8859-1

I search like this -

IndexReader   reader   = IndexReader.open(idx, true);
IndexSearcher searcher = new IndexSearcher(reader);
QueryParser   parser   = new QueryParser(Version.LUCENE_CURRENT, "content",
cluStdAn); // StandardAnalyzer
q = parser.parse(QUERY);
TopDocs td = searcher.search(q, cluCF, md, cluSort);

Any idea? I know it worked before... maybe it's not because of TOKENIZED vs
ANALYZED - maybe it's something else, but really I don't see; I'm using the
same analyzer to index and to search.

- Mike
akaris@gmail.com


On Tue, Dec 15, 2009 at 3:37 PM, Mark Miller <markrmiller@gmail.com> wrote:

> Any more info to share?
>
> In 2.9, Tokenized literally == Analyzed.
>
>    /** @deprecated this has been renamed to {@link #ANALYZED} */
>    public static final Index TOKENIZED = ANALYZED;
>
> Michel Nadeau wrote:
> > Hi,
> >
> > I just realized that since I upgraded from Lucene 2.x to 3.0.0 (and
> removed
> > all deprecated things), searches like that don't work anymore:
> >
> > test AND blue
> > test NOT blue
> > (test AND blue) OR red
> > etc.
> >
> > Before 3.0.0, I was inserting my fields like this:
> >
> > doc.add(new Field("content", sValues[j], Field.Store.YES,
> > Field.Index.TOKENIZED));
> >
> > Now I do:
> >
> > doc.add(new Field("content", sValues[j], Field.Store.YES,
> > Field.Index.ANALYZED));
> >
> > My Index writer is opened like this:
> >
> > writer = new IndexWriter(idx, new
> StandardAnalyzer(Version.LUCENE_CURRENT),
> > true, MaxFieldLength.UNLIMITED);
> >
> > What is the equivalent of tokenized!?
> >
> > Thanks,
> >
> > - Mike
> > akaris@gmail.com
> >
> >
>
>
> --
> - Mark
>
> http://www.lucidimagination.com
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636c9274d78bc21047aca85ee--

From java-user-return-44129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 15 21:31:57 2009
Return-Path: <java-user-return-44129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37472 invoked from network); 15 Dec 2009 21:31:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Dec 2009 21:31:56 -0000
Received: (qmail 42174 invoked by uid 500); 15 Dec 2009 21:31:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42135 invoked by uid 500); 15 Dec 2009 21:31:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42123 invoked by uid 99); 15 Dec 2009 21:31:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 21:31:53 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of akaris@gmail.com designates 209.85.210.192 as permitted sender)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 21:31:44 +0000
Received: by yxe30 with SMTP id 30so370270yxe.29
        for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 13:31:23 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=KejZsJoSugwiYK4bgRaEUQg4N3JshJFZIqWhGT944Cs=;
        b=bO8ebeyhe1wv3yJ2b1MkfkVyP6R8z+ji3wnFzfqhFd9zwi+aKj7zHAxCtehQvgFoif
         rcJb3MUVFu7TnNwVSTA0K/uL1dCe67uDCEo3Gg5GPfJ05PbJfpEqOHcUMp9igEwbZMxo
         qu7UaVneXtihIru4jgQXTRpnNQWxJW+nYB0FQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=Iacq1xMtrhtIiPzlSPum8Jjb3dkv0sZ+59u5d37vR7Bk4bYbsEeAmSoaQbqHZKCwhd
         2ZQr8cfTL2FMrexwv1NAG+/WYvBveL7zUbEqLGnKTB680Y0AEBiVa3W0LkANIFSyEQZZ
         zVZHzSf//4LRVT33DEJBYImXhlLu924G5/px8=
MIME-Version: 1.0
Received: by 10.100.35.16 with SMTP id i16mr169746ani.47.1260912683234; Tue, 
	15 Dec 2009 13:31:23 -0800 (PST)
In-Reply-To: <962c93f60912151248w7f522dbdmd2fcd3687f3c587@mail.gmail.com>
References: <962c93f60912151231v3ffb2c18ga0e4637bf5828759@mail.gmail.com> 
	<4B27F386.9060708@gmail.com> <962c93f60912151248w7f522dbdmd2fcd3687f3c587@mail.gmail.com>
From: Michel Nadeau <akaris@gmail.com>
Date: Tue, 15 Dec 2009 16:31:03 -0500
Message-ID: <962c93f60912151331u6ff7aa7br9154f380ddd7ab70@mail.gmail.com>
Subject: Re: Tokenized fields in Lucene 3.0.0
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6464d2693b4b6047acb1caa
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6464d2693b4b6047acb1caa
Content-Type: text/plain; charset=ISO-8859-1

Forget it - I found the problem. There was an escaping problem on the
search-client side.

Sorry about that.

- Mike
akaris@gmail.com


On Tue, Dec 15, 2009 at 3:48 PM, Michel Nadeau <akaris@gmail.com> wrote:

> I search like this -
>
> IndexReader   reader   = IndexReader.open(idx, true);
> IndexSearcher searcher = new IndexSearcher(reader);
> QueryParser   parser   = new QueryParser(Version.LUCENE_CURRENT, "content",
> cluStdAn); // StandardAnalyzer
> q = parser.parse(QUERY);
> TopDocs td = searcher.search(q, cluCF, md, cluSort);
>
> Any idea? I know it worked before... maybe it's not because of TOKENIZED vs
> ANALYZED - maybe it's something else, but really I don't see; I'm using the
> same analyzer to index and to search.
>
> - Mike
> akaris@gmail.com
>
>
>
> On Tue, Dec 15, 2009 at 3:37 PM, Mark Miller <markrmiller@gmail.com>wrote:
>
>> Any more info to share?
>>
>> In 2.9, Tokenized literally == Analyzed.
>>
>>    /** @deprecated this has been renamed to {@link #ANALYZED} */
>>    public static final Index TOKENIZED = ANALYZED;
>>
>> Michel Nadeau wrote:
>> > Hi,
>> >
>> > I just realized that since I upgraded from Lucene 2.x to 3.0.0 (and
>> removed
>> > all deprecated things), searches like that don't work anymore:
>> >
>> > test AND blue
>> > test NOT blue
>> > (test AND blue) OR red
>> > etc.
>> >
>> > Before 3.0.0, I was inserting my fields like this:
>> >
>> > doc.add(new Field("content", sValues[j], Field.Store.YES,
>> > Field.Index.TOKENIZED));
>> >
>> > Now I do:
>> >
>> > doc.add(new Field("content", sValues[j], Field.Store.YES,
>> > Field.Index.ANALYZED));
>> >
>> > My Index writer is opened like this:
>> >
>> > writer = new IndexWriter(idx, new
>> StandardAnalyzer(Version.LUCENE_CURRENT),
>> > true, MaxFieldLength.UNLIMITED);
>> >
>> > What is the equivalent of tokenized!?
>> >
>> > Thanks,
>> >
>> > - Mike
>> > akaris@gmail.com
>> >
>> >
>>
>>
>> --
>> - Mark
>>
>> http://www.lucidimagination.com
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

--0016e6464d2693b4b6047acb1caa--

From java-user-return-44130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 15 21:42:48 2009
Return-Path: <java-user-return-44130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46554 invoked from network); 15 Dec 2009 21:42:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Dec 2009 21:42:47 -0000
Received: (qmail 58571 invoked by uid 500); 15 Dec 2009 21:42:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58485 invoked by uid 500); 15 Dec 2009 21:42:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58467 invoked by uid 99); 15 Dec 2009 21:42:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 21:42:45 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.219.225 as permitted sender)
Received: from [209.85.219.225] (HELO mail-ew0-f225.google.com) (209.85.219.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Dec 2009 21:42:35 +0000
Received: by ewy25 with SMTP id 25so389871ewy.5
        for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 13:42:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=4G90d4HjgHRgi8wrpjVsOJCV2vK7GVl0wwmAokAkfio=;
        b=QcY0j2uYKZO5O9m//4w4gH4zgDAJXtzykKO4NqQD4wPgm78c8FdFiCfm9tsgYfEpSJ
         pvdjclwSie+AaktEJxnEoKKzqK23qy3dcvvpMX91FjMsU5vOyeapDHKVkNlE0/sTQK1Q
         GGf/h+6rQtsBbjKmn71wao47fSBZ/F/vvdO0U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=kUqgGSzslsRMcrxbcuTX0d4JlK/LousoJxvMJOPUt9b7NCt6rxIfSinahMQAEGcifv
         q3bkI4OXdFTc+qu+ciiS2TitBl1uWZtawQtWMzx4cUkG9JzxomFmJCkgRDBDYDRRoQ+e
         aHlCHLWTDRbJkhZqKTuwgnk6OSmdudD7UbyKc=
MIME-Version: 1.0
Received: by 10.216.87.5 with SMTP id x5mr45715wee.75.1260913335524; Tue, 15 
	Dec 2009 13:42:15 -0800 (PST)
In-Reply-To: <962c93f60912151331u6ff7aa7br9154f380ddd7ab70@mail.gmail.com>
References: <962c93f60912151231v3ffb2c18ga0e4637bf5828759@mail.gmail.com>
	 <4B27F386.9060708@gmail.com>
	 <962c93f60912151248w7f522dbdmd2fcd3687f3c587@mail.gmail.com>
	 <962c93f60912151331u6ff7aa7br9154f380ddd7ab70@mail.gmail.com>
Date: Tue, 15 Dec 2009 16:42:15 -0500
Message-ID: <359a92830912151342r780306afqa95c2cd4df2b583a@mail.gmail.com>
Subject: Re: Tokenized fields in Lucene 3.0.0
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6db2d7b74dc63047acb43b7
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6db2d7b74dc63047acb43b7
Content-Type: text/plain; charset=ISO-8859-1

Thanks for bringing closure, this was scaring me <G>...

On Tue, Dec 15, 2009 at 4:31 PM, Michel Nadeau <akaris@gmail.com> wrote:

> Forget it - I found the problem. There was an escaping problem on the
> search-client side.
>
> Sorry about that.
>
> - Mike
> akaris@gmail.com
>
>
> On Tue, Dec 15, 2009 at 3:48 PM, Michel Nadeau <akaris@gmail.com> wrote:
>
> > I search like this -
> >
> > IndexReader   reader   = IndexReader.open(idx, true);
> > IndexSearcher searcher = new IndexSearcher(reader);
> > QueryParser   parser   = new QueryParser(Version.LUCENE_CURRENT,
> "content",
> > cluStdAn); // StandardAnalyzer
> > q = parser.parse(QUERY);
> > TopDocs td = searcher.search(q, cluCF, md, cluSort);
> >
> > Any idea? I know it worked before... maybe it's not because of TOKENIZED
> vs
> > ANALYZED - maybe it's something else, but really I don't see; I'm using
> the
> > same analyzer to index and to search.
> >
> > - Mike
> > akaris@gmail.com
> >
> >
> >
> > On Tue, Dec 15, 2009 at 3:37 PM, Mark Miller <markrmiller@gmail.com
> >wrote:
> >
> >> Any more info to share?
> >>
> >> In 2.9, Tokenized literally == Analyzed.
> >>
> >>    /** @deprecated this has been renamed to {@link #ANALYZED} */
> >>    public static final Index TOKENIZED = ANALYZED;
> >>
> >> Michel Nadeau wrote:
> >> > Hi,
> >> >
> >> > I just realized that since I upgraded from Lucene 2.x to 3.0.0 (and
> >> removed
> >> > all deprecated things), searches like that don't work anymore:
> >> >
> >> > test AND blue
> >> > test NOT blue
> >> > (test AND blue) OR red
> >> > etc.
> >> >
> >> > Before 3.0.0, I was inserting my fields like this:
> >> >
> >> > doc.add(new Field("content", sValues[j], Field.Store.YES,
> >> > Field.Index.TOKENIZED));
> >> >
> >> > Now I do:
> >> >
> >> > doc.add(new Field("content", sValues[j], Field.Store.YES,
> >> > Field.Index.ANALYZED));
> >> >
> >> > My Index writer is opened like this:
> >> >
> >> > writer = new IndexWriter(idx, new
> >> StandardAnalyzer(Version.LUCENE_CURRENT),
> >> > true, MaxFieldLength.UNLIMITED);
> >> >
> >> > What is the equivalent of tokenized!?
> >> >
> >> > Thanks,
> >> >
> >> > - Mike
> >> > akaris@gmail.com
> >> >
> >> >
> >>
> >>
> >> --
> >> - Mark
> >>
> >> http://www.lucidimagination.com
> >>
> >>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>

--0016e6db2d7b74dc63047acb43b7--

From java-user-return-44131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 16 01:28:25 2009
Return-Path: <java-user-return-44131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51360 invoked from network); 16 Dec 2009 01:28:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Dec 2009 01:28:25 -0000
Received: (qmail 32356 invoked by uid 500); 16 Dec 2009 01:28:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32271 invoked by uid 500); 16 Dec 2009 01:28:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32261 invoked by uid 99); 16 Dec 2009 01:28:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Dec 2009 01:28:22 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.217.225 as permitted sender)
Received: from [209.85.217.225] (HELO mail-gx0-f225.google.com) (209.85.217.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Dec 2009 01:28:12 +0000
Received: by gxk25 with SMTP id 25so547810gxk.5
        for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 17:27:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:mime-version
         :content-class:from:subject:date:importance:x-priority:to
         :content-transfer-encoding:content-type;
        bh=7VUt9aSJ3vWPmpnF3UDCUEcFyHz2npxOLpzfdDkPtFI=;
        b=fzFB1N40MXfLK9RpDC0CoiFvvpRGAGhmMZ/V7XDIxrou3w04A9Pj17wsDx1N9WfJaC
         /ChjUtjHAFn80IfjW5nM9w3Qqm9JccGa/oT0BK+P46z0eKZAGHxgZtDhoJvcjDCB1tus
         MPceU2ECyOxTgSYrL6lov/BWtGLNinlr+Ikpc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:mime-version:content-class:from:subject:date:importance
         :x-priority:to:content-transfer-encoding:content-type;
        b=HtLQbDCLah92tZWysuPr69fradeAqtMhTLd7QgoniUewz0lmeJ5G37K7pKGScyT8cM
         HNzRrkAfFGU/hr+z9jxDUWPTWWdO/RzJZ6L4wkU0BTKH+xeukGZgymkMYcOfqHxqUiJn
         XfbXPPYUAi4K39Eqc55IkXUc9+YFvdwiMw1P4=
Received: by 10.90.62.35 with SMTP id k35mr430161aga.93.1260926871875;
        Tue, 15 Dec 2009 17:27:51 -0800 (PST)
Received: from Inbox ([117.136.19.133])
        by mx.google.com with ESMTPS id 13sm198097gxk.1.2009.12.15.17.27.46
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 15 Dec 2009 17:27:50 -0800 (PST)
Message-ID: <4b283796.0d0bca0a.4865.15c1@mx.google.com>
MIME-Version: 1.0
content-class: 
From: =?utf-8?Q?=E7=8E=8B=E5=B7=8D=E5=B7=8D?= <ww.wang.cs@gmail.com>
Subject: =?utf-8?Q?=E7=AD=94=E5=A4=8D:_Re:_Tokenized_fields_in_Lucene_3.0.0?=
Date: Wed, 16 Dec 2009 09:27:26 +0800
Importance: normal
X-Priority: 3
To: <java-user@lucene.apache.org>
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain; charset="utf-8"
X-Virus-Checked: Checked by ClamAV on apache.org

Check your field typo first

----- =E5=8E=9F=E5=A7=8B=E9=82=AE=E4=BB=B6 -----
=E5=8F=91=E4=BB=B6=E4=BA=BA: Michel Nadeau <akaris@gmail.com>
=E5=8F=91=E9=80=81=E6=97=B6=E9=97=B4: 2009=E5=B9=B412=E6=9C=8816=E6=97=A5 =
=E6=98=9F=E6=9C=9F=E4=B8=89 4:48
=E6=94=B6=E4=BB=B6=E4=BA=BA: java-user@lucene.apache.org
=E4=B8=BB=E9=A2=98: Re: Tokenized fields in Lucene 3.0.0

I search like this -

IndexReader   reader   =3D IndexReader.open(idx, true);
IndexSearcher searcher =3D new IndexSearcher(reader);
QueryParser   parser   =3D new QueryParser(Version.LUCENE_CURRENT, "content=
",
cluStdAn); // StandardAnalyzer
q =3D parser.parse(QUERY);
TopDocs td =3D searcher.search(q, cluCF, md, cluSort);

Any idea? I know it worked before... maybe it's not because of TOKENIZED vs
ANALYZED - maybe it's something else, but really I don't see; I'm using the
same analyzer to index and to search.

- Mike
akaris@gmail.com


On Tue, Dec 15, 2009 at 3:37 PM, Mark Miller <markrmiller@gmail.com> wrote:

> Any more info to share?
>
> In 2.9, Tokenized literally =3D=3D Analyzed.
>
>    /** @deprecated this has been renamed to {@link #ANALYZED} */
>    public static final Index TOKENIZED =3D ANALYZED;
>
> Michel Nadeau wrote:
> > Hi,
> >
> > I just realized that since I upgraded from Lucene 2.x to 3.0.0 (and
> removed
> > all deprecated things), searches like that don't work anymore:
> >
> > test AND blue
> > test NOT blue
> > (test AND blue) OR red
> > etc.
> >
> > Before 3.0.0, I was inserting my fields like this:
> >
> > doc.add(new Field("content", sValues[j], Field.Store.YES,
> > Field.Index.TOKENIZED));
> >
> > Now I do:
> >
> > doc.add(new Field("content", sValues[j], Field.Store.YES,
> > Field.Index.ANALYZED));
> >
> > My Index writer is opened like this:
> >
> > writer =3D new IndexWriter(idx, new
> StandardAnalyzer(Version.LUCENE_CURRENT),
> > true, MaxFieldLength.UNLIMITED);
> >
> > What is the equivalent of tokenized!?
> >
> > Thanks,
> >
> > - Mike
> > akaris@gmail.com
> >
> >
>
>
> --
> - Mark
>
> http://www.lucidimagination.com
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 16 01:48:13 2009
Return-Path: <java-user-return-44132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60608 invoked from network); 16 Dec 2009 01:48:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Dec 2009 01:48:12 -0000
Received: (qmail 47402 invoked by uid 500); 16 Dec 2009 01:48:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47312 invoked by uid 500); 16 Dec 2009 01:48:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47302 invoked by uid 99); 16 Dec 2009 01:48:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Dec 2009 01:48:10 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of azlist1@gmail.com designates 209.85.160.46 as permitted sender)
Received: from [209.85.160.46] (HELO mail-pw0-f46.google.com) (209.85.160.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Dec 2009 01:48:08 +0000
Received: by pwj16 with SMTP id 16so355572pwj.5
        for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 17:47:48 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=/c3G6NUiXUQA4FSVb2slGoWtD2k9vViBzS9kLp+p2s4=;
        b=tETJM8Ic/H5HO1TfsZGyqppAPFbgHc1c8BLDiguTl0ql6N400Q6B5aA1h4WZmXeVj6
         d/AQ9b8KcLI1Nt68yFHbesEzYSBh1Vm4ZjnTld/0junPPfmGzOsLOeX6BWKKZm2GtVK4
         +gvN8UuOEHD2veLnVhJc/HbhqWnhesMv16lro=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=wL8gwQAlOQ31MLNl7H1AA6EUNu4bwWEbcI5y8NzZOS2YN8Enf9BWcTzutsQiVNbDuH
         5vadrixYva8LkgZl2kDI47EQ9YVM49Q0faz4bVwyQjezzyn2KkHSFnfywJrvj9Kkr6sa
         vHtcCo9kaxpQVTqcm3i2mFd+rmVvPqJS8TKmM=
MIME-Version: 1.0
Received: by 10.141.214.33 with SMTP id r33mr234458rvq.190.1260928068327; Tue, 
	15 Dec 2009 17:47:48 -0800 (PST)
In-Reply-To: <76c1202b0912142023i683e2596mf99b1f7def49b233@mail.gmail.com>
References: <76c1202b0912142023i683e2596mf99b1f7def49b233@mail.gmail.com>
Date: Wed, 16 Dec 2009 02:47:48 +0100
Message-ID: <76c1202b0912151747n19021b03n998154d3843d43f7@mail.gmail.com>
Subject: Re: Document category identification in query
From: Alex <azlist1@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd17aae99985e047aceb13c

--000e0cd17aae99985e047aceb13c
Content-Type: text/plain; charset=ISO-8859-1

Can anybody help me or maybe point me to relevant resources I could learn
from ?

Thanks.

--000e0cd17aae99985e047aceb13c--

From java-user-return-44133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 16 02:08:47 2009
Return-Path: <java-user-return-44133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70291 invoked from network); 16 Dec 2009 02:08:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Dec 2009 02:08:46 -0000
Received: (qmail 66043 invoked by uid 500); 16 Dec 2009 02:08:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65951 invoked by uid 500); 16 Dec 2009 02:08:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65941 invoked by uid 99); 16 Dec 2009 02:08:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Dec 2009 02:08:44 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.211.185 as permitted sender)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Dec 2009 02:08:42 +0000
Received: by ywh15 with SMTP id 15so583729ywh.5
        for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 18:08:21 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=D0gYGn0sP8Ei2Gz515qcSVnPACJni5dEQyTKQj/yjqc=;
        b=eQuhJzOKsBVpH64xVCcy8IK0y5iIR76AFHsRIgypvMO/1zVyqu+SjPE1KtXO/0yajw
         /1WvYQDRqfDeHNMPlf/p1HGMrN2c5QF9XumZOxFzsWxckKL5lfqJuzgowUWAWJpjNJeh
         aPBL6e9lbLmtv6iEftyzrUAIey5DmZr/B/Ux0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Yt2T1sI6xqYPBQZC4gOKSFL9bYUkMPhgygi6GKKFZQ8hU6Mb7G7dSu8DORAjRAUrFo
         /jphVH3ExUGvjRnlSuQ8CsSvDO9bRZIT1iGxdimjLZbfV9g+LWIYpq3xKA6x9Lmy3ik9
         P5Zs+gESE0bOJapFkzbDuK1jGUi33WKpczoRs=
MIME-Version: 1.0
Received: by 10.90.11.30 with SMTP id 30mr543960agk.42.1260929301112; Tue, 15 
	Dec 2009 18:08:21 -0800 (PST)
In-Reply-To: <76c1202b0912151747n19021b03n998154d3843d43f7@mail.gmail.com>
References: <76c1202b0912142023i683e2596mf99b1f7def49b233@mail.gmail.com>
	 <76c1202b0912151747n19021b03n998154d3843d43f7@mail.gmail.com>
Date: Wed, 16 Dec 2009 10:08:20 +0800
Message-ID: <7d94dcde0912151808t2b07d482u9dd590db96f6c81a@mail.gmail.com>
Subject: Re: Document category identification in query
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163616421f1465f8047acefb1d

--00163616421f1465f8047acefb1d
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

I think you can do this with search suggestion like algorithms.

First, you should categorize the search log, e.g. Thai Restaurant or Chines=
e
Restaurant or KFC should be assigned categories including Restaurant.

When user is typing, figure out from the search log which keyword is neares=
t
to the input and take that keyword's categories as the user input's
category.


BTW, I do not understand why you need to know the category of user input

On Wed, Dec 16, 2009 at 9:47 AM, Alex <azlist1@gmail.com> wrote:

> Can anybody help me or maybe point me to relevant resources I could learn
> from ?
>
> Thanks.
>



--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--00163616421f1465f8047acefb1d--

From java-user-return-44134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 16 02:37:10 2009
Return-Path: <java-user-return-44134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83772 invoked from network); 16 Dec 2009 02:37:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Dec 2009 02:37:10 -0000
Received: (qmail 81391 invoked by uid 500); 16 Dec 2009 02:37:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81285 invoked by uid 500); 16 Dec 2009 02:37:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81275 invoked by uid 99); 16 Dec 2009 02:37:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Dec 2009 02:37:07 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of liufeipekingu@gmail.com designates 209.85.223.195 as permitted sender)
Received: from [209.85.223.195] (HELO mail-iw0-f195.google.com) (209.85.223.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Dec 2009 02:37:05 +0000
Received: by iwn33 with SMTP id 33so400639iwn.29
        for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 18:36:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=6KR8vz5ev3yPLl9y4PSaYju42RM/Ajik+vWqFt0Yt7I=;
        b=X0pEJHoXB4VUHaYmQrW/5MFw5+FCPKVZX6Mut7tPWvBSVTxaXdUIVRjCNxEHYystRj
         0NLTGPnvdqkdcR7lzrpCaP2wEgjSywgUK/0WmbpRSsDJ00O3K674JalMnr3xIUorZic/
         NwABo5ow97jqa2RuxCOKr4VGmJkiybzaJsfKE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=xJY6ztbEfF2O/II/BcPGgQ1EEMve1JKWn1/43Z8DVW73ZndxJUde81t952P1kaFz/A
         J4vTnVcJ9HNdJxvNfS3mn2Fmt4NZVX9fWHwQOti6GEF3DNfjBpmmOHQ2nPFbwBM91fJC
         XYkeWm5poH9DPDh8rJe1hG8wWXl0AgwRYWevg=
MIME-Version: 1.0
Received: by 10.231.153.69 with SMTP id j5mr367750ibw.33.1260931004599; Tue, 
	15 Dec 2009 18:36:44 -0800 (PST)
In-Reply-To: <76c1202b0912142023i683e2596mf99b1f7def49b233@mail.gmail.com>
References: <76c1202b0912142023i683e2596mf99b1f7def49b233@mail.gmail.com>
Date: Wed, 16 Dec 2009 10:36:44 +0800
Message-ID: <204599e80912151836o50378447wfb4a9b65ae0460ea@mail.gmail.com>
Subject: Re: Document category identification in query
From: fei liu <liufeipekingu@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636d33c7c9d8fdc047acf600a

--001636d33c7c9d8fdc047acf600a
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

Query classification is an interesting question and there are many papers
discussed this. For more infomation, you could refe these papers, "A
taxonomy of web search", "Understanding user goal in web search", "Our
winning solution to query classification in KDDCUP 2005".

In your question, i think you can do this by two steps. First, use query to
retrieve document, then use the category information of retrieveled
documents to classify the query using algorithm such as KNN. Second, use th=
e
query and query classification information to retrieve documents again.

2009/12/15 Alex <azlist1@gmail.com>

> Hi,
>
> I am trying to expand user queries to figure out potential document
> categories implied in the query.
> I wanted to know what was the best way to figure out the document categor=
y
> that is the most relevant to the query.
>
> Let me explain further:
> I have created categories that are applied to documents I want to index.
> Some example categories are :
>
> Hotel
> Restaurant
> Fast Food
> Chinese Restaurant
> Church
> Bank
> Gas station
>
>
> I also am trying to create category aliases such as Chinese food can also
> be
> named Chinese restaurant with the same category unique ID.
>
>
> The documents I index have 1 primary category and 1...N  secondary
> categories such as :
>
> McDonalds will be categorized under Fast food as a primary category but
> also
> under Restaurant as secondary category.
> The London Pub at the corner of my street will be categorized as Pub as
> primary category and also as Bar, Food and Beverages, Restaurant, and Fas=
t
> Food (since then also have takeaway burgers ;).
>
> This all gives me a set of categories that are quite clearly identified, =
as
> well as a set of category aliases even though I'm aware that I can't figu=
re
> out all the possible aliases of all my categories. At least I have the mo=
st
> obvious ones.
>
>
> Now with all this, I wanted to know, with the help of Lucene (or any othe=
r
> efficient method),  how I could figure out the most relevant category (if
> any) behind a user query.
>
>
> For example :
>
> If my user looks for :
> "Chang's chinese restaurant" the obvious category should be "Chinese
> Restaurant"
> but if my user looks for
> "chines restauran"  (misspelled) the category should also be "Chinese
> Restaurant" (such as google is capable of doing)
> OR
> "chinese bistro" should probably also return me the category "Chinese
> Restaurant" since bistro is a very similar concept to "Retaurant" ...
>
>
> Once the category is identified I can then query the index for documents
> that match that category the best.
>
>
> What is the proper way to identify the most relevant category in a user
> query based on the above ?
> Should I consider any other better approach ?
>
>
> Any help appreciated.
>
>
> Many thanks
>
> Alex.
>



--=20
-------------------------
Liu Fei=A3=A8=C1=F5=B7=C9=A3=A9
Institute of Software
School of Electronics Engineering & Computer Science
Peking University
Beijing, 100871, PRC.

--001636d33c7c9d8fdc047acf600a--

From java-user-return-44135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 16 03:19:38 2009
Return-Path: <java-user-return-44135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92208 invoked from network); 16 Dec 2009 03:19:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Dec 2009 03:19:38 -0000
Received: (qmail 11846 invoked by uid 500); 16 Dec 2009 03:19:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10428 invoked by uid 500); 16 Dec 2009 03:19:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10032 invoked by uid 99); 16 Dec 2009 03:19:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Dec 2009 03:19:32 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.211.185 as permitted sender)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Dec 2009 03:19:29 +0000
Received: by ywh15 with SMTP id 15so632179ywh.5
        for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 19:19:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=UBSMAiiyWh7NjbEB9H9PftKgTNDQNj8g2HOZv8wqfTA=;
        b=rKXtuM5fC1KQ/PzFJRUjS6PesRLkHGRY9nWZEc6J5uvriWwHNEo84rcG9jdomlWYSg
         vai1l9e6X0r/BDfJ8R3NFgMkWi9ivLpxQyzJbQqB7FTyBjqN9gM3ojtrJScDkgfmCWQ1
         X03SKFNAhSIRYDKiHm/67dRfZuV8Shoo1E+3I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=dD5/cWfgVewHbf8YvIbRxqVJEMO4wt5rZg8sn87gf0MArgiLJ1kC7DvRVNBD7gT5J5
         1h8AJkGzeJf2H6PWwzN6MhI1k7Q1uCGcVdWg7mb6yFtKvhnxUnilexdIrDTx1uQuFnB6
         u88D+GmktwSbDk1wQQCNec/EDtjUD/mz3AAAI=
MIME-Version: 1.0
Received: by 10.91.183.4 with SMTP id k4mr595772agp.41.1260933548506; Tue, 15 
	Dec 2009 19:19:08 -0800 (PST)
In-Reply-To: <7d94dcde0912150623w5fcb8914o2e13a2bb0ea707a9@mail.gmail.com>
References: <7d94dcde0912150526hdc3f9cev7a7368d4df5f06f8@mail.gmail.com>
	 <8f0ad1f30912150540i4d380bc2o43c9c5b079b923d7@mail.gmail.com>
	 <7d94dcde0912150549t361a55c9va6a7cc785e062858@mail.gmail.com>
	 <8f0ad1f30912150551v13fb0959vf3d011b2b969ea09@mail.gmail.com>
	 <7d94dcde0912150613x509e04f1s6c3927cf61d210c4@mail.gmail.com>
	 <8f0ad1f30912150619r40cfe55aj702dfbce86dbeb8@mail.gmail.com>
	 <7d94dcde0912150623w5fcb8914o2e13a2bb0ea707a9@mail.gmail.com>
Date: Wed, 16 Dec 2009 11:19:08 +0800
Message-ID: <7d94dcde0912151919s5ec0fa40m968a94ff9d760529@mail.gmail.com>
Subject: Re: How to do alias(Pinyin) search in Lucene
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64655243e80f9047acff8c0

--0016e64655243e80f9047acff8c0
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

Finally, i make it run, however, it works so slow

2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>

> got it, thanks, Robert
>
>
> On Tue, Dec 15, 2009 at 10:19 PM, Robert Muir <rcmuir@gmail.com> wrote:
>
>>  if you have lucene 2.9 or 3.0 source code, just run patch -p0 <
>> /path/to/LUCENE-XXYY.patch from the lucene source code root directory...
>> it
>> should create the necessary directory and files.
>> then run 'ant' , in this case it should create a lucene-icu jar file in
>> the
>> build directory.
>>
>> the patch doesnt include the icu dependency itself so you need to get th=
at
>> jar file from www.icu-project.org and have it in your classpath also
>>
>> sorry for the trouble, hope to integrate some of this soon for a future
>> release.
>>
>> On Tue, Dec 15, 2009 at 9:13 AM, Weiwei Wang <ww.wang.cs@gmail.com>
>> wrote:
>>
>> > Yes, i found the patch file LUCENE-1488.patch and there's no icu
>> directory
>> > in my dowloaded contrib directory.
>> >
>> > I'm a rookie guy using patch, i'm currently in the contrib dir, could
>> > anybody tell me how to execute this patch command to generate the
>> relevant
>> > dir and souce files?
>> >
>> > On Tue, Dec 15, 2009 at 9:51 PM, Robert Muir <rcmuir@gmail.com> wrote:
>> >
>> > > look at the latest patch file attached to the issue, it should work
>> with
>> > > lucene 2.9 or greater (I think)
>> > >
>> > > 2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>
>> > >
>> > > > where can i find the source code?
>> > > >
>> > > > On Tue, Dec 15, 2009 at 9:40 PM, Robert Muir <rcmuir@gmail.com>
>> wrote:
>> > > >
>> > > > > there is an icu transform tokenfilter in the patch here:
>> > > > > http://issues.apache.org/jira/browse/LUCENE-1488
>> > > > >
>> > > > >    Transliterator pinyin =3D
>> Transliterator.getInstance("Han-Latin");
>> > > > >    Tokenizer tokenizer =3D new KeywordTokenizer(new
>> > StringReader("=D6=D0=B9=FA"));
>> > > > >    ICUTransformFilter filter =3D new ICUTransformFilter(tokenize=
r,
>> > > pinyin);
>> > > > >    assertTokenStreamContents(filter, new String[] { "zh=A8=ADng =
gu=A8=AE" }
>> );
>> > > > >
>> > > > > note it will add tone marks and insert space between syllables b=
y
>> > > default
>> > > > > if you do not want this, you need to do some cleanup.
>> > > > >
>> > > > >    Transliterator pinyin =3D Transliterator.getInstance("Han-Lat=
in;
>> > NFD;
>> > > > > [[:NonspacingMark:][:Space:]] Remove");
>> > > > >    Tokenizer tokenizer =3D new KeywordTokenizer(new
>> > StringReader("=D6=D0=B9=FA"));
>> > > > >    ICUTransformFilter filter =3D new ICUTransformFilter(tokenize=
r,
>> > > pinyin);
>> > > > >    assertTokenStreamContents(filter, new String[] { "zhongguo" }
>> );
>> > > > >
>> > > > >
>> > > > > 2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>
>> > > > >
>> > > > > > Hi, guys,
>> > > > > >     I'm implementing a search engine based on Lucene for
>> Chinese.
>> > So
>> > > I
>> > > > > want
>> > > > > > to support pinyin search as Google China do.
>> > > > > >
>> > > > > > e.g.
>> > > > > >    =A1=B0=D6=D0=B9=FA=A1=B1  means Chinese in English
>> > > > > >    this word's pinyin input is "zhongguo"
>> > > > > > The feature i want to implement is when user type zhongguo the
>> > > results
>> > > > > will
>> > > > > > include documents containing "=D6=D0=B9=FA" or even Chinese
>> > > > > >
>> > > > > > Anybody here know how to achieve this?
>> > > > > >
>> > > > > > --
>> > > > > > Weiwei Wang
>> > > > > > Alex Wang
>> > > > > > =CD=F5=CE=A1=CE=A1
>> > > > > > Room 403, Mengmin Wei Building
>> > > > > > Computer Science Department
>> > > > > > Gulou Campus of Nanjing University
>> > > > > > Nanjing, P.R.China, 210093
>> > > > > >
>> > > > > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>> > > > > >
>> > > > >
>> > > > >
>> > > > >
>> > > > > --
>> > > > > Robert Muir
>> > > > > rcmuir@gmail.com
>> > > > >
>> > > >
>> > > >
>> > > >
>> > > > --
>> > > > Weiwei Wang
>> > > > Alex Wang
>> > > > =CD=F5=CE=A1=CE=A1
>> > > > Room 403, Mengmin Wei Building
>> > > > Computer Science Department
>> > > > Gulou Campus of Nanjing University
>> > > > Nanjing, P.R.China, 210093
>> > > >
>> > > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>> > > >
>> > >
>> > >
>> > >
>> > > --
>> > > Robert Muir
>> > > rcmuir@gmail.com
>> > >
>> >
>> >
>> >
>> > --
>> > Weiwei Wang
>> > Alex Wang
>> > =CD=F5=CE=A1=CE=A1
>> > Room 403, Mengmin Wei Building
>> > Computer Science Department
>> > Gulou Campus of Nanjing University
>> > Nanjing, P.R.China, 210093
>> >
>> > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>> >
>>
>>
>>
>> --
>> Robert Muir
>> rcmuir@gmail.com
>>
>
>
>
> --
> Weiwei Wang
> Alex Wang
> =CD=F5=CE=A1=CE=A1
> Room 403, Mengmin Wei Building
> Computer Science Department
> Gulou Campus of Nanjing University
> Nanjing, P.R.China, 210093
>
> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>



--=20
Weiwei Wang
Alex Wang
=CD=F5=CE=A1=CE=A1
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--0016e64655243e80f9047acff8c0--

From java-user-return-44136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 16 03:36:07 2009
Return-Path: <java-user-return-44136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98157 invoked from network); 16 Dec 2009 03:36:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Dec 2009 03:36:07 -0000
Received: (qmail 23286 invoked by uid 500); 16 Dec 2009 03:36:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23139 invoked by uid 500); 16 Dec 2009 03:36:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23124 invoked by uid 99); 16 Dec 2009 03:36:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Dec 2009 03:36:01 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.160.46 as permitted sender)
Received: from [209.85.160.46] (HELO mail-pw0-f46.google.com) (209.85.160.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Dec 2009 03:35:50 +0000
Received: by pwj16 with SMTP id 16so410261pwj.5
        for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 19:35:28 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=lhHHgkKNoedGeBnu+FoD6ez3hHtsKlidroktuOcX+d8=;
        b=H0+sSJGPIGH42cqxEy/+02ih8l5OqfuvwrhxxCejmO7axAzzGRqOc0d4Br4blOStTm
         0RJxbUaRdLtxl9xJy+g4BHqrNXDMv6Sz7VX7uxu1pqTMXZRumsCN7Tzd2HFStNWQwuCr
         tdFY+IvUIeW4lXPcdXV/mD9n23u/Qu4oluJes=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=GYvgXYfQXhRa+hGT3Ln+ssjl5kJTgCKlHto5FfstFZLRRJemmuZkYXahnSXg2WwZV/
         LOR8OkbQAwgSwneuKmo75vax9PmnnH5eUBTqYE//E5fbKQlwy3CRSD4QK664vK7MGO+X
         12PJOoGr5PP8I1bpNCRgSXL1EexVhWgxj6vNo=
MIME-Version: 1.0
Received: by 10.114.237.28 with SMTP id k28mr315961wah.98.1260934528358; Tue, 
	15 Dec 2009 19:35:28 -0800 (PST)
In-Reply-To: <7d94dcde0912151919s5ec0fa40m968a94ff9d760529@mail.gmail.com>
References: <7d94dcde0912150526hdc3f9cev7a7368d4df5f06f8@mail.gmail.com> 
	<8f0ad1f30912150540i4d380bc2o43c9c5b079b923d7@mail.gmail.com> 
	<7d94dcde0912150549t361a55c9va6a7cc785e062858@mail.gmail.com> 
	<8f0ad1f30912150551v13fb0959vf3d011b2b969ea09@mail.gmail.com> 
	<7d94dcde0912150613x509e04f1s6c3927cf61d210c4@mail.gmail.com> 
	<8f0ad1f30912150619r40cfe55aj702dfbce86dbeb8@mail.gmail.com> 
	<7d94dcde0912150623w5fcb8914o2e13a2bb0ea707a9@mail.gmail.com> 
	<7d94dcde0912151919s5ec0fa40m968a94ff9d760529@mail.gmail.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Tue, 15 Dec 2009 22:35:08 -0500
Message-ID: <8f0ad1f30912151935v787891an719e280e2d5a3e49@mail.gmail.com>
Subject: Re: How to do alias(Pinyin) search in Lucene
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64b9332a5db23047ad032f0
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64b9332a5db23047ad032f0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

hello, this was mainly to show you a quick-and-dirty way to solve the
problem.

if you have a lot of text, here are some ways to optimize:
1. the 'cleanup' step I showed you, is extremely inefficient way to remove
the space and diacritics.
For your case perhaps you can use more efficient ways to avoid the
normalization (NFD), such as asciifoldingfilter to remove the diacritics.
2. if most of your text is not chinese, you can use a filter in your spec t=
o
ensure that it only operates on chinese text... i think something like this
should work: instead of Transliterator.getInstance("Han-Latin") it would be
Transliterator.getInstance("[:Ideographic:] Han-Latin"). Such a thing canno=
t
be automatically determined (see the comments in the code) because this is =
a
composite transform, it calls the Han-SpacedHan to add the space.
3. if you really care about speed, you can take the rules yourself from CLD=
R
and customize them to your needs (for example, remove diacritics from the
rules and/or do not call Han-SpacedHan which adds the spaces. This would
also probably automatically fix #2 above. The rules are based on this XML
file: http://unicode.org/repos/cldr/trunk/common/transforms/Han-Latin.xml,
but you need to preprocess it to be plain text to work as a custom
transform: see here for more details
http://userguide.icu-project.org/transforms/general



2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>

> Finally, i make it run, however, it works so slow
>
> 2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>
>
> > got it, thanks, Robert
> >
> >
> > On Tue, Dec 15, 2009 at 10:19 PM, Robert Muir <rcmuir@gmail.com> wrote:
> >
> >>  if you have lucene 2.9 or 3.0 source code, just run patch -p0 <
> >> /path/to/LUCENE-XXYY.patch from the lucene source code root directory.=
..
> >> it
> >> should create the necessary directory and files.
> >> then run 'ant' , in this case it should create a lucene-icu jar file i=
n
> >> the
> >> build directory.
> >>
> >> the patch doesnt include the icu dependency itself so you need to get
> that
> >> jar file from www.icu-project.org and have it in your classpath also
> >>
> >> sorry for the trouble, hope to integrate some of this soon for a futur=
e
> >> release.
> >>
> >> On Tue, Dec 15, 2009 at 9:13 AM, Weiwei Wang <ww.wang.cs@gmail.com>
> >> wrote:
> >>
> >> > Yes, i found the patch file LUCENE-1488.patch and there's no icu
> >> directory
> >> > in my dowloaded contrib directory.
> >> >
> >> > I'm a rookie guy using patch, i'm currently in the contrib dir, coul=
d
> >> > anybody tell me how to execute this patch command to generate the
> >> relevant
> >> > dir and souce files?
> >> >
> >> > On Tue, Dec 15, 2009 at 9:51 PM, Robert Muir <rcmuir@gmail.com>
> wrote:
> >> >
> >> > > look at the latest patch file attached to the issue, it should wor=
k
> >> with
> >> > > lucene 2.9 or greater (I think)
> >> > >
> >> > > 2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>
> >> > >
> >> > > > where can i find the source code?
> >> > > >
> >> > > > On Tue, Dec 15, 2009 at 9:40 PM, Robert Muir <rcmuir@gmail.com>
> >> wrote:
> >> > > >
> >> > > > > there is an icu transform tokenfilter in the patch here:
> >> > > > > http://issues.apache.org/jira/browse/LUCENE-1488
> >> > > > >
> >> > > > >    Transliterator pinyin =3D
> >> Transliterator.getInstance("Han-Latin");
> >> > > > >    Tokenizer tokenizer =3D new KeywordTokenizer(new
> >> > StringReader("=E4=B8=AD=E5=9B=BD"));
> >> > > > >    ICUTransformFilter filter =3D new ICUTransformFilter(tokeni=
zer,
> >> > > pinyin);
> >> > > > >    assertTokenStreamContents(filter, new String[] { "zh=C5=8Dn=
g gu=C3=B3"
> }
> >> );
> >> > > > >
> >> > > > > note it will add tone marks and insert space between syllables
> by
> >> > > default
> >> > > > > if you do not want this, you need to do some cleanup.
> >> > > > >
> >> > > > >    Transliterator pinyin =3D
> Transliterator.getInstance("Han-Latin;
> >> > NFD;
> >> > > > > [[:NonspacingMark:][:Space:]] Remove");
> >> > > > >    Tokenizer tokenizer =3D new KeywordTokenizer(new
> >> > StringReader("=E4=B8=AD=E5=9B=BD"));
> >> > > > >    ICUTransformFilter filter =3D new ICUTransformFilter(tokeni=
zer,
> >> > > pinyin);
> >> > > > >    assertTokenStreamContents(filter, new String[] { "zhongguo"=
 }
> >> );
> >> > > > >
> >> > > > >
> >> > > > > 2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>
> >> > > > >
> >> > > > > > Hi, guys,
> >> > > > > >     I'm implementing a search engine based on Lucene for
> >> Chinese.
> >> > So
> >> > > I
> >> > > > > want
> >> > > > > > to support pinyin search as Google China do.
> >> > > > > >
> >> > > > > > e.g.
> >> > > > > >    =E2=80=9C=E4=B8=AD=E5=9B=BD=E2=80=9D  means Chinese in En=
glish
> >> > > > > >    this word's pinyin input is "zhongguo"
> >> > > > > > The feature i want to implement is when user type zhongguo t=
he
> >> > > results
> >> > > > > will
> >> > > > > > include documents containing "=E4=B8=AD=E5=9B=BD" or even Ch=
inese
> >> > > > > >
> >> > > > > > Anybody here know how to achieve this?
> >> > > > > >
> >> > > > > > --
> >> > > > > > Weiwei Wang
> >> > > > > > Alex Wang
> >> > > > > > =E7=8E=8B=E5=B7=8D=E5=B7=8D
> >> > > > > > Room 403, Mengmin Wei Building
> >> > > > > > Computer Science Department
> >> > > > > > Gulou Campus of Nanjing University
> >> > > > > > Nanjing, P.R.China, 210093
> >> > > > > >
> >> > > > > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> >> > > > > >
> >> > > > >
> >> > > > >
> >> > > > >
> >> > > > > --
> >> > > > > Robert Muir
> >> > > > > rcmuir@gmail.com
> >> > > > >
> >> > > >
> >> > > >
> >> > > >
> >> > > > --
> >> > > > Weiwei Wang
> >> > > > Alex Wang
> >> > > > =E7=8E=8B=E5=B7=8D=E5=B7=8D
> >> > > > Room 403, Mengmin Wei Building
> >> > > > Computer Science Department
> >> > > > Gulou Campus of Nanjing University
> >> > > > Nanjing, P.R.China, 210093
> >> > > >
> >> > > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> >> > > >
> >> > >
> >> > >
> >> > >
> >> > > --
> >> > > Robert Muir
> >> > > rcmuir@gmail.com
> >> > >
> >> >
> >> >
> >> >
> >> > --
> >> > Weiwei Wang
> >> > Alex Wang
> >> > =E7=8E=8B=E5=B7=8D=E5=B7=8D
> >> > Room 403, Mengmin Wei Building
> >> > Computer Science Department
> >> > Gulou Campus of Nanjing University
> >> > Nanjing, P.R.China, 210093
> >> >
> >> > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> >> >
> >>
> >>
> >>
> >> --
> >> Robert Muir
> >> rcmuir@gmail.com
> >>
> >
> >
> >
> > --
> > Weiwei Wang
> > Alex Wang
> > =E7=8E=8B=E5=B7=8D=E5=B7=8D
> > Room 403, Mengmin Wei Building
> > Computer Science Department
> > Gulou Campus of Nanjing University
> > Nanjing, P.R.China, 210093
> >
> > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> >
>
>
>
> --
> Weiwei Wang
> Alex Wang
> =E7=8E=8B=E5=B7=8D=E5=B7=8D
> Room 403, Mengmin Wei Building
> Computer Science Department
> Gulou Campus of Nanjing University
> Nanjing, P.R.China, 210093
>
> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>



--=20
Robert Muir
rcmuir@gmail.com

--0016e64b9332a5db23047ad032f0--

From java-user-return-44137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 16 03:54:10 2009
Return-Path: <java-user-return-44137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2152 invoked from network); 16 Dec 2009 03:54:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Dec 2009 03:54:10 -0000
Received: (qmail 34877 invoked by uid 500); 16 Dec 2009 03:54:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34697 invoked by uid 500); 16 Dec 2009 03:54:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34687 invoked by uid 99); 16 Dec 2009 03:54:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Dec 2009 03:54:04 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.222.176 as permitted sender)
Received: from [209.85.222.176] (HELO mail-pz0-f176.google.com) (209.85.222.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Dec 2009 03:54:00 +0000
Received: by pzk6 with SMTP id 6so383471pzk.29
        for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 19:53:40 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=Mnb91A5AXQQY7xgtKVoP1QBE89G9Zgm2QRwIJ9RiGBk=;
        b=Evxu8DKO+7Y+SLyKtZnQSo84E2RbZ6Jk5eWnsF1Uhlprfd1GeUh4cPAD3mownvFgia
         SaFKrnxvgXkqBwSbTkeOt80lj6vnJHNp9e70mXHSAhBE5qxPz1y4JiOfcwljvOhpExo8
         e96+GysrtTcGkbT5VshWKPpVlK/wPUP+I/Ji4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=pAFYBrpjkwN1p8O4g+JAvSXM/1hXLETHj9C6JDx7kQwf0HAtPKPtIKnb0EriqgAdBg
         KNSjFZX3Bbg+VKPMSDue7CvGOzqDJ6PMsdiUpSifLl2hKA5UFy5B9Hm7Wpf8WjFHJazQ
         +YwSZDKtLlJHlmLClvK+vNSsuIGXEAKfZ+T9M=
MIME-Version: 1.0
Received: by 10.115.101.15 with SMTP id d15mr301503wam.200.1260935620087; Tue, 
	15 Dec 2009 19:53:40 -0800 (PST)
In-Reply-To: <7d94dcde0912151919s5ec0fa40m968a94ff9d760529@mail.gmail.com>
References: <7d94dcde0912150526hdc3f9cev7a7368d4df5f06f8@mail.gmail.com> 
	<8f0ad1f30912150540i4d380bc2o43c9c5b079b923d7@mail.gmail.com> 
	<7d94dcde0912150549t361a55c9va6a7cc785e062858@mail.gmail.com> 
	<8f0ad1f30912150551v13fb0959vf3d011b2b969ea09@mail.gmail.com> 
	<7d94dcde0912150613x509e04f1s6c3927cf61d210c4@mail.gmail.com> 
	<8f0ad1f30912150619r40cfe55aj702dfbce86dbeb8@mail.gmail.com> 
	<7d94dcde0912150623w5fcb8914o2e13a2bb0ea707a9@mail.gmail.com> 
	<7d94dcde0912151919s5ec0fa40m968a94ff9d760529@mail.gmail.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Tue, 15 Dec 2009 22:53:20 -0500
Message-ID: <8f0ad1f30912151953y17c175e7n20ff02428e5eacad@mail.gmail.com>
Subject: Re: How to do alias(Pinyin) search in Lucene
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64dca14b84e9f047ad0733a

--0016e64dca14b84e9f047ad0733a
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hi, just one more thought for you.

I think even more important than anything I said before, you should ensure
you implement reusableTokenStream in your analyzer.
this becomes a necessity if you are using expensive objects like this.

2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>

> Finally, i make it run, however, it works so slow
>
> 2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>
>
> > got it, thanks, Robert
> >
> >
> > On Tue, Dec 15, 2009 at 10:19 PM, Robert Muir <rcmuir@gmail.com> wrote:
> >
> >>  if you have lucene 2.9 or 3.0 source code, just run patch -p0 <
> >> /path/to/LUCENE-XXYY.patch from the lucene source code root directory.=
..
> >> it
> >> should create the necessary directory and files.
> >> then run 'ant' , in this case it should create a lucene-icu jar file i=
n
> >> the
> >> build directory.
> >>
> >> the patch doesnt include the icu dependency itself so you need to get
> that
> >> jar file from www.icu-project.org and have it in your classpath also
> >>
> >> sorry for the trouble, hope to integrate some of this soon for a futur=
e
> >> release.
> >>
> >> On Tue, Dec 15, 2009 at 9:13 AM, Weiwei Wang <ww.wang.cs@gmail.com>
> >> wrote:
> >>
> >> > Yes, i found the patch file LUCENE-1488.patch and there's no icu
> >> directory
> >> > in my dowloaded contrib directory.
> >> >
> >> > I'm a rookie guy using patch, i'm currently in the contrib dir, coul=
d
> >> > anybody tell me how to execute this patch command to generate the
> >> relevant
> >> > dir and souce files?
> >> >
> >> > On Tue, Dec 15, 2009 at 9:51 PM, Robert Muir <rcmuir@gmail.com>
> wrote:
> >> >
> >> > > look at the latest patch file attached to the issue, it should wor=
k
> >> with
> >> > > lucene 2.9 or greater (I think)
> >> > >
> >> > > 2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>
> >> > >
> >> > > > where can i find the source code?
> >> > > >
> >> > > > On Tue, Dec 15, 2009 at 9:40 PM, Robert Muir <rcmuir@gmail.com>
> >> wrote:
> >> > > >
> >> > > > > there is an icu transform tokenfilter in the patch here:
> >> > > > > http://issues.apache.org/jira/browse/LUCENE-1488
> >> > > > >
> >> > > > >    Transliterator pinyin =3D
> >> Transliterator.getInstance("Han-Latin");
> >> > > > >    Tokenizer tokenizer =3D new KeywordTokenizer(new
> >> > StringReader("=E4=B8=AD=E5=9B=BD"));
> >> > > > >    ICUTransformFilter filter =3D new ICUTransformFilter(tokeni=
zer,
> >> > > pinyin);
> >> > > > >    assertTokenStreamContents(filter, new String[] { "zh=C5=8Dn=
g gu=C3=B3"
> }
> >> );
> >> > > > >
> >> > > > > note it will add tone marks and insert space between syllables
> by
> >> > > default
> >> > > > > if you do not want this, you need to do some cleanup.
> >> > > > >
> >> > > > >    Transliterator pinyin =3D
> Transliterator.getInstance("Han-Latin;
> >> > NFD;
> >> > > > > [[:NonspacingMark:][:Space:]] Remove");
> >> > > > >    Tokenizer tokenizer =3D new KeywordTokenizer(new
> >> > StringReader("=E4=B8=AD=E5=9B=BD"));
> >> > > > >    ICUTransformFilter filter =3D new ICUTransformFilter(tokeni=
zer,
> >> > > pinyin);
> >> > > > >    assertTokenStreamContents(filter, new String[] { "zhongguo"=
 }
> >> );
> >> > > > >
> >> > > > >
> >> > > > > 2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>
> >> > > > >
> >> > > > > > Hi, guys,
> >> > > > > >     I'm implementing a search engine based on Lucene for
> >> Chinese.
> >> > So
> >> > > I
> >> > > > > want
> >> > > > > > to support pinyin search as Google China do.
> >> > > > > >
> >> > > > > > e.g.
> >> > > > > >    =E2=80=9C=E4=B8=AD=E5=9B=BD=E2=80=9D  means Chinese in En=
glish
> >> > > > > >    this word's pinyin input is "zhongguo"
> >> > > > > > The feature i want to implement is when user type zhongguo t=
he
> >> > > results
> >> > > > > will
> >> > > > > > include documents containing "=E4=B8=AD=E5=9B=BD" or even Ch=
inese
> >> > > > > >
> >> > > > > > Anybody here know how to achieve this?
> >> > > > > >
> >> > > > > > --
> >> > > > > > Weiwei Wang
> >> > > > > > Alex Wang
> >> > > > > > =E7=8E=8B=E5=B7=8D=E5=B7=8D
> >> > > > > > Room 403, Mengmin Wei Building
> >> > > > > > Computer Science Department
> >> > > > > > Gulou Campus of Nanjing University
> >> > > > > > Nanjing, P.R.China, 210093
> >> > > > > >
> >> > > > > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> >> > > > > >
> >> > > > >
> >> > > > >
> >> > > > >
> >> > > > > --
> >> > > > > Robert Muir
> >> > > > > rcmuir@gmail.com
> >> > > > >
> >> > > >
> >> > > >
> >> > > >
> >> > > > --
> >> > > > Weiwei Wang
> >> > > > Alex Wang
> >> > > > =E7=8E=8B=E5=B7=8D=E5=B7=8D
> >> > > > Room 403, Mengmin Wei Building
> >> > > > Computer Science Department
> >> > > > Gulou Campus of Nanjing University
> >> > > > Nanjing, P.R.China, 210093
> >> > > >
> >> > > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> >> > > >
> >> > >
> >> > >
> >> > >
> >> > > --
> >> > > Robert Muir
> >> > > rcmuir@gmail.com
> >> > >
> >> >
> >> >
> >> >
> >> > --
> >> > Weiwei Wang
> >> > Alex Wang
> >> > =E7=8E=8B=E5=B7=8D=E5=B7=8D
> >> > Room 403, Mengmin Wei Building
> >> > Computer Science Department
> >> > Gulou Campus of Nanjing University
> >> > Nanjing, P.R.China, 210093
> >> >
> >> > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> >> >
> >>
> >>
> >>
> >> --
> >> Robert Muir
> >> rcmuir@gmail.com
> >>
> >
> >
> >
> > --
> > Weiwei Wang
> > Alex Wang
> > =E7=8E=8B=E5=B7=8D=E5=B7=8D
> > Room 403, Mengmin Wei Building
> > Computer Science Department
> > Gulou Campus of Nanjing University
> > Nanjing, P.R.China, 210093
> >
> > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> >
>
>
>
> --
> Weiwei Wang
> Alex Wang
> =E7=8E=8B=E5=B7=8D=E5=B7=8D
> Room 403, Mengmin Wei Building
> Computer Science Department
> Gulou Campus of Nanjing University
> Nanjing, P.R.China, 210093
>
> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>



--=20
Robert Muir
rcmuir@gmail.com

--0016e64dca14b84e9f047ad0733a--

From java-user-return-44138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 16 04:43:46 2009
Return-Path: <java-user-return-44138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16298 invoked from network); 16 Dec 2009 04:43:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Dec 2009 04:43:46 -0000
Received: (qmail 68156 invoked by uid 500); 16 Dec 2009 04:43:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67953 invoked by uid 500); 16 Dec 2009 04:43:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67943 invoked by uid 99); 16 Dec 2009 04:43:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Dec 2009 04:43:41 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.210.192 as permitted sender)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Dec 2009 04:43:36 +0000
Received: by yxe30 with SMTP id 30so710825yxe.29
        for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 20:43:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=tyt9EdJ2eDOqKHScwwqYlFFidhgGmD6Sr3vicGZnAO0=;
        b=Vmmp0Tkiw1N4IytL1wFuy6Bi8M2B5tnEmVjotQW6ug+lGt7TKZNdhUDZNnRZcPcXhb
         8dIwXZx/FxSUXzjWcDpWgPm1hU/s6qxaqq9QQl/de7w2yKZXMD08phUtzGyljIGIQ4fd
         +d0YR1QvMAeqc/HQ5ZLGlS7yz2mL1U9pMoqe4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=uapYDfn8J6H9P5E9akDCYztwQlFoCIpu8W/ywapOfGmptSKJV7Sslvam2PNV4ROp52
         7JSTkZxrsNo0Y8Jh2tqLDkOQFw4osQjF2azmW9qGmJ8n3UK82kO5Up8IkwOaEjTBr+2T
         DnCIU3SYbwWkLg6Mstkh544vkeeeEgiVhnBis=
MIME-Version: 1.0
Received: by 10.90.17.2 with SMTP id 2mr540278agq.116.1260938595926; Tue, 15 
	Dec 2009 20:43:15 -0800 (PST)
In-Reply-To: <8f0ad1f30912151953y17c175e7n20ff02428e5eacad@mail.gmail.com>
References: <7d94dcde0912150526hdc3f9cev7a7368d4df5f06f8@mail.gmail.com>
	 <8f0ad1f30912150540i4d380bc2o43c9c5b079b923d7@mail.gmail.com>
	 <7d94dcde0912150549t361a55c9va6a7cc785e062858@mail.gmail.com>
	 <8f0ad1f30912150551v13fb0959vf3d011b2b969ea09@mail.gmail.com>
	 <7d94dcde0912150613x509e04f1s6c3927cf61d210c4@mail.gmail.com>
	 <8f0ad1f30912150619r40cfe55aj702dfbce86dbeb8@mail.gmail.com>
	 <7d94dcde0912150623w5fcb8914o2e13a2bb0ea707a9@mail.gmail.com>
	 <7d94dcde0912151919s5ec0fa40m968a94ff9d760529@mail.gmail.com>
	 <8f0ad1f30912151953y17c175e7n20ff02428e5eacad@mail.gmail.com>
Date: Wed, 16 Dec 2009 12:43:15 +0800
Message-ID: <7d94dcde0912152043v76e1affdt86dec284494f7555@mail.gmail.com>
Subject: Re: How to do alias(Pinyin) search in Lucene
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636283a1e18029d047ad125d3

--001636283a1e18029d047ad125d3
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

Thanks Robert, a lot is learned from you:-)

On Wed, Dec 16, 2009 at 11:53 AM, Robert Muir <rcmuir@gmail.com> wrote:

> Hi, just one more thought for you.
>
> I think even more important than anything I said before, you should ensur=
e
> you implement reusableTokenStream in your analyzer.
> this becomes a necessity if you are using expensive objects like this.
>
> 2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>
>
> > Finally, i make it run, however, it works so slow
> >
> > 2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>
> >
> > > got it, thanks, Robert
> > >
> > >
> > > On Tue, Dec 15, 2009 at 10:19 PM, Robert Muir <rcmuir@gmail.com>
> wrote:
> > >
> > >>  if you have lucene 2.9 or 3.0 source code, just run patch -p0 <
> > >> /path/to/LUCENE-XXYY.patch from the lucene source code root
> directory...
> > >> it
> > >> should create the necessary directory and files.
> > >> then run 'ant' , in this case it should create a lucene-icu jar file
> in
> > >> the
> > >> build directory.
> > >>
> > >> the patch doesnt include the icu dependency itself so you need to ge=
t
> > that
> > >> jar file from www.icu-project.org and have it in your classpath also
> > >>
> > >> sorry for the trouble, hope to integrate some of this soon for a
> future
> > >> release.
> > >>
> > >> On Tue, Dec 15, 2009 at 9:13 AM, Weiwei Wang <ww.wang.cs@gmail.com>
> > >> wrote:
> > >>
> > >> > Yes, i found the patch file LUCENE-1488.patch and there's no icu
> > >> directory
> > >> > in my dowloaded contrib directory.
> > >> >
> > >> > I'm a rookie guy using patch, i'm currently in the contrib dir,
> could
> > >> > anybody tell me how to execute this patch command to generate the
> > >> relevant
> > >> > dir and souce files?
> > >> >
> > >> > On Tue, Dec 15, 2009 at 9:51 PM, Robert Muir <rcmuir@gmail.com>
> > wrote:
> > >> >
> > >> > > look at the latest patch file attached to the issue, it should
> work
> > >> with
> > >> > > lucene 2.9 or greater (I think)
> > >> > >
> > >> > > 2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>
> > >> > >
> > >> > > > where can i find the source code?
> > >> > > >
> > >> > > > On Tue, Dec 15, 2009 at 9:40 PM, Robert Muir <rcmuir@gmail.com=
>
> > >> wrote:
> > >> > > >
> > >> > > > > there is an icu transform tokenfilter in the patch here:
> > >> > > > > http://issues.apache.org/jira/browse/LUCENE-1488
> > >> > > > >
> > >> > > > >    Transliterator pinyin =3D
> > >> Transliterator.getInstance("Han-Latin");
> > >> > > > >    Tokenizer tokenizer =3D new KeywordTokenizer(new
> > >> > StringReader("=D6=D0=B9=FA"));
> > >> > > > >    ICUTransformFilter filter =3D new
> ICUTransformFilter(tokenizer,
> > >> > > pinyin);
> > >> > > > >    assertTokenStreamContents(filter, new String[] { "zh=A8=
=ADng
> gu=A8=AE"
> > }
> > >> );
> > >> > > > >
> > >> > > > > note it will add tone marks and insert space between syllabl=
es
> > by
> > >> > > default
> > >> > > > > if you do not want this, you need to do some cleanup.
> > >> > > > >
> > >> > > > >    Transliterator pinyin =3D
> > Transliterator.getInstance("Han-Latin;
> > >> > NFD;
> > >> > > > > [[:NonspacingMark:][:Space:]] Remove");
> > >> > > > >    Tokenizer tokenizer =3D new KeywordTokenizer(new
> > >> > StringReader("=D6=D0=B9=FA"));
> > >> > > > >    ICUTransformFilter filter =3D new
> ICUTransformFilter(tokenizer,
> > >> > > pinyin);
> > >> > > > >    assertTokenStreamContents(filter, new String[] { "zhonggu=
o"
> }
> > >> );
> > >> > > > >
> > >> > > > >
> > >> > > > > 2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>
> > >> > > > >
> > >> > > > > > Hi, guys,
> > >> > > > > >     I'm implementing a search engine based on Lucene for
> > >> Chinese.
> > >> > So
> > >> > > I
> > >> > > > > want
> > >> > > > > > to support pinyin search as Google China do.
> > >> > > > > >
> > >> > > > > > e.g.
> > >> > > > > >    =A1=B0=D6=D0=B9=FA=A1=B1  means Chinese in English
> > >> > > > > >    this word's pinyin input is "zhongguo"
> > >> > > > > > The feature i want to implement is when user type zhongguo
> the
> > >> > > results
> > >> > > > > will
> > >> > > > > > include documents containing "=D6=D0=B9=FA" or even Chines=
e
> > >> > > > > >
> > >> > > > > > Anybody here know how to achieve this?
> > >> > > > > >
> > >> > > > > > --
> > >> > > > > > Weiwei Wang
> > >> > > > > > Alex Wang
> > >> > > > > > =CD=F5=CE=A1=CE=A1
> > >> > > > > > Room 403, Mengmin Wei Building
> > >> > > > > > Computer Science Department
> > >> > > > > > Gulou Campus of Nanjing University
> > >> > > > > > Nanjing, P.R.China, 210093
> > >> > > > > >
> > >> > > > > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > >> > > > > >
> > >> > > > >
> > >> > > > >
> > >> > > > >
> > >> > > > > --
> > >> > > > > Robert Muir
> > >> > > > > rcmuir@gmail.com
> > >> > > > >
> > >> > > >
> > >> > > >
> > >> > > >
> > >> > > > --
> > >> > > > Weiwei Wang
> > >> > > > Alex Wang
> > >> > > > =CD=F5=CE=A1=CE=A1
> > >> > > > Room 403, Mengmin Wei Building
> > >> > > > Computer Science Department
> > >> > > > Gulou Campus of Nanjing University
> > >> > > > Nanjing, P.R.China, 210093
> > >> > > >
> > >> > > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > >> > > >
> > >> > >
> > >> > >
> > >> > >
> > >> > > --
> > >> > > Robert Muir
> > >> > > rcmuir@gmail.com
> > >> > >
> > >> >
> > >> >
> > >> >
> > >> > --
> > >> > Weiwei Wang
> > >> > Alex Wang
> > >> > =CD=F5=CE=A1=CE=A1
> > >> > Room 403, Mengmin Wei Building
> > >> > Computer Science Department
> > >> > Gulou Campus of Nanjing University
> > >> > Nanjing, P.R.China, 210093
> > >> >
> > >> > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > >> >
> > >>
> > >>
> > >>
> > >> --
> > >> Robert Muir
> > >> rcmuir@gmail.com
> > >>
> > >
> > >
> > >
> > > --
> > > Weiwei Wang
> > > Alex Wang
> > > =CD=F5=CE=A1=CE=A1
> > > Room 403, Mengmin Wei Building
> > > Computer Science Department
> > > Gulou Campus of Nanjing University
> > > Nanjing, P.R.China, 210093
> > >
> > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > >
> >
> >
> >
> > --
> > Weiwei Wang
> > Alex Wang
> > =CD=F5=CE=A1=CE=A1
> > Room 403, Mengmin Wei Building
> > Computer Science Department
> > Gulou Campus of Nanjing University
> > Nanjing, P.R.China, 210093
> >
> > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> >
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>



--=20
Weiwei Wang
Alex Wang
=CD=F5=CE=A1=CE=A1
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--001636283a1e18029d047ad125d3--

From java-user-return-44139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 16 05:46:20 2009
Return-Path: <java-user-return-44139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39889 invoked from network); 16 Dec 2009 05:46:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Dec 2009 05:46:20 -0000
Received: (qmail 20504 invoked by uid 500); 16 Dec 2009 05:46:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20344 invoked by uid 500); 16 Dec 2009 05:46:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20334 invoked by uid 99); 16 Dec 2009 05:46:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Dec 2009 05:46:15 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.211.185 as permitted sender)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Dec 2009 05:46:11 +0000
Received: by ywh15 with SMTP id 15so716629ywh.5
        for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 21:45:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=IhQvP+vBHdPqkRFNajY6K9b6Y8zHmGL+5A7F7PH5s6E=;
        b=ZGVc5ykwnP0S+3eIs4DAvWdhZJHmf76NTkaeRhgLKhwTHVGxHGzPIyL2u8bIZ4hV0n
         +azl2bRVe7/TyLNnDmz/hZHwHHCQz+IDLZu4bMFQ7WS77xoWe2Lb9tFWG8XvTH7OcmZe
         CcTJ269Qa4y5Ps8AJE1HB7W3KP4pRX4p3Aic4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=gmirvpRtXvzNGKoGz2i9jP62FSjjIQX9ya/t05xGbtSx0Sdmu4ZWOAu42RaugAO5SE
         K3hwKzBz4PegHB5bEUA/MZjUV6NT1Yj042V2i0Du2zY46kEqez/yt/r/5ecenaV5tbmp
         kJy3Nbj3JXd4ttH5b5LLcxfP7bvVu533PFXTo=
MIME-Version: 1.0
Received: by 10.91.181.18 with SMTP id i18mr669177agp.38.1260942350964; Tue, 
	15 Dec 2009 21:45:50 -0800 (PST)
Date: Wed, 16 Dec 2009 13:45:50 +0800
Message-ID: <7d94dcde0912152145y6069482bm5c043052032ab0b1@mail.gmail.com>
Subject: Regex Help
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f91f20e957b7047ad20414

--001485f91f20e957b7047ad20414
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

I want to split this parsed result string: name:"zhong guo" name:friend
server:172.16.65.79

into

name:"zhong guo"
name:friend
server:172.16.65.79

how can I write a regular pattern to do that?

I'm not familiar with regex and tried a few patterns which didn't work

--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--001485f91f20e957b7047ad20414--

From java-user-return-44140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 16 07:03:18 2009
Return-Path: <java-user-return-44140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74589 invoked from network); 16 Dec 2009 07:03:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Dec 2009 07:03:18 -0000
Received: (qmail 82676 invoked by uid 500); 16 Dec 2009 07:03:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82578 invoked by uid 500); 16 Dec 2009 07:03:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82568 invoked by uid 99); 16 Dec 2009 07:03:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Dec 2009 07:03:12 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ghazal.gharooni@gmail.com designates 209.85.223.195 as permitted sender)
Received: from [209.85.223.195] (HELO mail-iw0-f195.google.com) (209.85.223.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Dec 2009 07:03:04 +0000
Received: by iwn33 with SMTP id 33so511742iwn.29
        for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 23:02:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=ip8gh9bfYVlfJyJvDkK5z2C4DlXeCbIaDnQvl+PVdF0=;
        b=eZvldNEy+B7wG9rOwuj+DQXX6oOXENzrLEogEBEoNfJdDNA6TTnVPuDDY7+KQykqVV
         fASSBuDNY2Eo3uEdghHafsbRc+b4aOebOfvFczDNeKU7ezLST94l8UOu7IFWRR88JboH
         RKf7iGR2iB0d2wZzHXTjxQXOxqYfJmQNI09ZQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=B53U/v+1fRMcWqWG9VUoUxFD2rMgqcUSm96YOaDLVSLAas181gzE74JiynHSwgLBcJ
         KR0fQd6uw6lDSsYh68eIHhTyq9CAE1lk1rPa8Boup3YZbL0LntbmTrbVnrMEeFpqLuWE
         YEmTMhqu9nZ8QLaP70Cb2TM5RzrfGfOA2sVms=
MIME-Version: 1.0
Received: by 10.231.170.201 with SMTP id e9mr662469ibz.16.1260946963303; Tue, 
	15 Dec 2009 23:02:43 -0800 (PST)
In-Reply-To: <7d94dcde0912152145y6069482bm5c043052032ab0b1@mail.gmail.com>
References: <7d94dcde0912152145y6069482bm5c043052032ab0b1@mail.gmail.com>
Date: Tue, 15 Dec 2009 23:02:43 -0800
Message-ID: <671e7270912152302t6dc8b80ch40c38166f58774b3@mail.gmail.com>
Subject: Re: Regex Help
From: Ghazal Gharooni <ghazal.gharooni@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,
Why don't you use String Tokenizer for splitting the result?


On Tue, Dec 15, 2009 at 9:45 PM, Weiwei Wang <ww.wang.cs@gmail.com> wrote:
> I want to split this parsed result string: name:"zhong guo" name:friend
> server:172.16.65.79
>
> into
>
> name:"zhong guo"
> name:friend
> server:172.16.65.79
>
> how can I write a regular pattern to do that?
>
> I'm not familiar with regex and tried a few patterns which didn't work
>
> --
> Weiwei Wang
> Alex Wang
> =E7=8E=8B=E5=B7=8D=E5=B7=8D
> Room 403, Mengmin Wei Building
> Computer Science Department
> Gulou Campus of Nanjing University
> Nanjing, P.R.China, 210093
>
> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 16 07:05:05 2009
Return-Path: <java-user-return-44141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75315 invoked from network); 16 Dec 2009 07:05:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Dec 2009 07:05:05 -0000
Received: (qmail 88460 invoked by uid 500); 16 Dec 2009 07:05:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88401 invoked by uid 500); 16 Dec 2009 07:05:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88391 invoked by uid 99); 16 Dec 2009 07:05:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Dec 2009 07:05:02 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.210.192 as permitted sender)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Dec 2009 07:05:00 +0000
Received: by yxe30 with SMTP id 30so792823yxe.29
        for <java-user@lucene.apache.org>; Tue, 15 Dec 2009 23:04:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=HL7W4q6EfMdf93zajZ0eM3OamZe0PdruIsLygk6sOpY=;
        b=Ofcs0y8vKpE84IayRLRxUoO+i4wJbkf3ATmQRjSjnvcgQkqbuJZN0zsfwJFvDTXq22
         7xJv53RDO6Mg0+ctS+ImPjlYXSfYF/CXF8MJ/Zbwy+00moAZ42t3qiGk0BgO8ruAUfuZ
         h3tt/ZY6WTWW/Kh5qJ1l28Hy3hsvb4Jo14jDo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=MvPPscJNK56Yup2BfVYNjTJONLxFRPsFBlkFFzzfzNcz/IuKpJjBqUSQzkb+6IciCi
         YqtUwOTymN5juGuaZWLfwMdQCirtWz9GC8sjMFW64KW5yQitVzCF896LY7oTxwbDlh2Y
         5lt/PHJGpdv4wj1qjPmLqdbs1SIRPN5PD4H3w=
MIME-Version: 1.0
Received: by 10.91.152.20 with SMTP id e20mr703206ago.92.1260947079287; Tue, 
	15 Dec 2009 23:04:39 -0800 (PST)
In-Reply-To: <671e7270912152302t6dc8b80ch40c38166f58774b3@mail.gmail.com>
References: <7d94dcde0912152145y6069482bm5c043052032ab0b1@mail.gmail.com>
	 <671e7270912152302t6dc8b80ch40c38166f58774b3@mail.gmail.com>
Date: Wed, 16 Dec 2009 15:04:39 +0800
Message-ID: <7d94dcde0912152304k5d935544ife4f697de6b8d83c@mail.gmail.com>
Subject: Re: Regex Help
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64712d4bdd5db047ad31ed7

--0016e64712d4bdd5db047ad31ed7
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Same reason, i do not know which delimiter regex to use:-(

On Wed, Dec 16, 2009 at 3:02 PM, Ghazal Gharooni
<ghazal.gharooni@gmail.com>wrote:

> Hello,
> Why don't you use String Tokenizer for splitting the result?
>
>
> On Tue, Dec 15, 2009 at 9:45 PM, Weiwei Wang <ww.wang.cs@gmail.com> wrote=
:
> > I want to split this parsed result string: name:"zhong guo" name:friend
> > server:172.16.65.79
> >
> > into
> >
> > name:"zhong guo"
> > name:friend
> > server:172.16.65.79
> >
> > how can I write a regular pattern to do that?
> >
> > I'm not familiar with regex and tried a few patterns which didn't work
> >
> > --
> > Weiwei Wang
> > Alex Wang
> > =E7=8E=8B=E5=B7=8D=E5=B7=8D
> > Room 403, Mengmin Wei Building
> > Computer Science Department
> > Gulou Campus of Nanjing University
> > Nanjing, P.R.China, 210093
> >
> > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--0016e64712d4bdd5db047ad31ed7--

From java-user-return-44142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 16 10:31:50 2009
Return-Path: <java-user-return-44142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76856 invoked from network); 16 Dec 2009 10:31:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Dec 2009 10:31:50 -0000
Received: (qmail 22532 invoked by uid 500); 16 Dec 2009 10:31:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22454 invoked by uid 500); 16 Dec 2009 10:31:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22444 invoked by uid 99); 16 Dec 2009 10:31:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Dec 2009 10:31:47 +0000
X-ASF-Spam-Status: No, hits=-1.9 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ghazal.gharooni@gmail.com designates 209.85.223.195 as permitted sender)
Received: from [209.85.223.195] (HELO mail-iw0-f195.google.com) (209.85.223.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Dec 2009 10:31:45 +0000
Received: by iwn33 with SMTP id 33so591215iwn.29
        for <java-user@lucene.apache.org>; Wed, 16 Dec 2009 02:31:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=twDlZb3Fu9gEtU1mKso9gz59pz7lOEWVMPPm5yUtZ4E=;
        b=vDrlHS/IhPl87TE204cIKpVnW41nfkYA23iFwDbj/aoIj/Gxz0keX50CjSrGGxnwvM
         vuf148GqaT57UBSfXSrnikf9KrlxZw65lLA8P+jRVB5+nzJMdN1b9OZqP7jJu9+2wUuQ
         afqGAYiWyKXBRRUVmWffY1r/8XY42JDQo+fqI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=wzVMhxMwsIw0s+1PJNfM9r4WA0sSptmmj9nXBzk1jBb/7vJAJQLvHs4JR+6giciZme
         8ECvOHqOYpuyi4c23dMxlEiYIJ/61daLAKzb2UhHMoWsQw91z1hYYwjFYod42V0W5ViE
         LE4tRTNpV/dbbApFI3dsqYrXZX/EyfvMl7Xo4=
MIME-Version: 1.0
Received: by 10.231.6.79 with SMTP id 15mr819745iby.36.1260959484890; Wed, 16 
	Dec 2009 02:31:24 -0800 (PST)
In-Reply-To: <7d94dcde0912152304k5d935544ife4f697de6b8d83c@mail.gmail.com>
References: <7d94dcde0912152145y6069482bm5c043052032ab0b1@mail.gmail.com>
	 <671e7270912152302t6dc8b80ch40c38166f58774b3@mail.gmail.com>
	 <7d94dcde0912152304k5d935544ife4f697de6b8d83c@mail.gmail.com>
Date: Wed, 16 Dec 2009 02:31:24 -0800
Message-ID: <671e7270912160231s7b65e171sf17510b306f6a40c@mail.gmail.com>
Subject: Re: Regex Help
From: Ghazal Gharooni <ghazal.gharooni@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Is it what you want?

StringTokenizer stk =3D new StringTokenizer("name:'zhong-guo'
name:friend server:172.16.65.79"," ", false);
        for (int i =3D 0; i <=3D stk.countTokens()+1; i++) {
            result.add(stk.nextToken());

        }


On Tue, Dec 15, 2009 at 11:04 PM, Weiwei Wang <ww.wang.cs@gmail.com> wrote:
> Same reason, i do not know which delimiter regex to use:-(
>
> On Wed, Dec 16, 2009 at 3:02 PM, Ghazal Gharooni
> <ghazal.gharooni@gmail.com>wrote:
>
>> Hello,
>> Why don't you use String Tokenizer for splitting the result?
>>
>>
>> On Tue, Dec 15, 2009 at 9:45 PM, Weiwei Wang <ww.wang.cs@gmail.com> wrot=
e:
>> > I want to split this parsed result string: name:"zhong guo" name:frien=
d
>> > server:172.16.65.79
>> >
>> > into
>> >
>> > name:"zhong guo"
>> > name:friend
>> > server:172.16.65.79
>> >
>> > how can I write a regular pattern to do that?
>> >
>> > I'm not familiar with regex and tried a few patterns which didn't work
>> >
>> > --
>> > Weiwei Wang
>> > Alex Wang
>> > =E7=8E=8B=E5=B7=8D=E5=B7=8D
>> > Room 403, Mengmin Wei Building
>> > Computer Science Department
>> > Gulou Campus of Nanjing University
>> > Nanjing, P.R.China, 210093
>> >
>> > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --
> Weiwei Wang
> Alex Wang
> =E7=8E=8B=E5=B7=8D=E5=B7=8D
> Room 403, Mengmin Wei Building
> Computer Science Department
> Gulou Campus of Nanjing University
> Nanjing, P.R.China, 210093
>
> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 16 10:57:31 2009
Return-Path: <java-user-return-44143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88599 invoked from network); 16 Dec 2009 10:57:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Dec 2009 10:57:31 -0000
Received: (qmail 58301 invoked by uid 500); 16 Dec 2009 10:57:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58221 invoked by uid 500); 16 Dec 2009 10:57:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58211 invoked by uid 99); 16 Dec 2009 10:57:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Dec 2009 10:57:28 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Dec 2009 10:57:20 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NKrYx-0005j2-6x
	for java-user@lucene.apache.org; Wed, 16 Dec 2009 02:56:59 -0800
Message-ID: <26809386.post@talk.nabble.com>
Date: Wed, 16 Dec 2009 02:56:59 -0800 (PST)
From: PeterJohn <frndlydude@gmail.com>
To: java-user@lucene.apache.org
Subject: Get Hits for a single document
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: frndlydude@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

Can any one suggest me the best way to get a word hits(occurances) in single
document. I have found it through Termfrequency, but that is not efficient.

Example : If search string is "sir please", I would like to get sir hits and
please hits for a single document.

Thanks,

Regards,
PeterJohn.
-- 
View this message in context: http://old.nabble.com/Get-Hits-for-a-single-document-tp26809386p26809386.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 16 14:05:48 2009
Return-Path: <java-user-return-44144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81600 invoked from network); 16 Dec 2009 14:05:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Dec 2009 14:05:48 -0000
Received: (qmail 43634 invoked by uid 500); 16 Dec 2009 14:05:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43346 invoked by uid 500); 16 Dec 2009 14:05:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43336 invoked by uid 99); 16 Dec 2009 14:05:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Dec 2009 14:05:44 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.219.225 as permitted sender)
Received: from [209.85.219.225] (HELO mail-ew0-f225.google.com) (209.85.219.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Dec 2009 14:05:40 +0000
Received: by ewy25 with SMTP id 25so1187943ewy.5
        for <java-user@lucene.apache.org>; Wed, 16 Dec 2009 06:05:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=j49Yy0wWAtw3r/kgXDqhMVkx8BK0QmZR+24XrxE0raM=;
        b=AUD/GbbhxnrxfU5/BVLJ7nx3kiD9T/ilcYC3JPHyJBKaKaLGZczpnBI2kWhlW0nhIo
         weoG3qTWByW9z0bnP8+Cmf00OKyl/ENFMsywql9pAarhLE9lvbo9e13i0ZkhNQ2bkDhN
         BT81Q0gc6PzANtVogFEFn2S2/qMponNODvfuw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=YS8N1ftN8QA2tcP+qbnT5tuJjiM1sgkQk475c484YEO9bGxx/y6SXOY5c6yIiKZluZ
         UP0a2eXOc0qByfhGfOXAiDq3Y6DK0QC95P1cqKACdYVboiHZKPdn+o3WctVHGXC/CVwC
         TG7dAaG9eqLb8+vTHBLVOLWc4SXydbvz8vqUg=
MIME-Version: 1.0
Received: by 10.216.86.137 with SMTP id w9mr382408wee.104.1260972317924; Wed, 
	16 Dec 2009 06:05:17 -0800 (PST)
In-Reply-To: <7d94dcde0912152043v76e1affdt86dec284494f7555@mail.gmail.com>
References: <7d94dcde0912150526hdc3f9cev7a7368d4df5f06f8@mail.gmail.com>
	 <8f0ad1f30912150540i4d380bc2o43c9c5b079b923d7@mail.gmail.com>
	 <7d94dcde0912150549t361a55c9va6a7cc785e062858@mail.gmail.com>
	 <8f0ad1f30912150551v13fb0959vf3d011b2b969ea09@mail.gmail.com>
	 <7d94dcde0912150613x509e04f1s6c3927cf61d210c4@mail.gmail.com>
	 <8f0ad1f30912150619r40cfe55aj702dfbce86dbeb8@mail.gmail.com>
	 <7d94dcde0912150623w5fcb8914o2e13a2bb0ea707a9@mail.gmail.com>
	 <7d94dcde0912151919s5ec0fa40m968a94ff9d760529@mail.gmail.com>
	 <8f0ad1f30912151953y17c175e7n20ff02428e5eacad@mail.gmail.com>
	 <7d94dcde0912152043v76e1affdt86dec284494f7555@mail.gmail.com>
Date: Wed, 16 Dec 2009 09:05:17 -0500
Message-ID: <359a92830912160605o4adf5d59r4f39fb8b88b43e66@mail.gmail.com>
Subject: Re: How to do alias(Pinyin) search in Lucene
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d7f07e14dda5047ad8ffc6

--0016e6d7f07e14dda5047ad8ffc6
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

If your queries are still slow, make sure you're not measuring
the *first* query on a newly opened searcher. There are
other tips here that might be useful. These are general searching
tips complimentary to Robert's suggestions..

http://wiki.apache.org/lucene-java/ImproveSearchingSpeed

<http://wiki.apache.org/lucene-java/ImproveSearchingSpeed>HTH
Erick

2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>

> Thanks Robert, a lot is learned from you:-)
>
> On Wed, Dec 16, 2009 at 11:53 AM, Robert Muir <rcmuir@gmail.com> wrote:
>
> > Hi, just one more thought for you.
> >
> > I think even more important than anything I said before, you should
> ensure
> > you implement reusableTokenStream in your analyzer.
> > this becomes a necessity if you are using expensive objects like this.
> >
> > 2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>
> >
> > > Finally, i make it run, however, it works so slow
> > >
> > > 2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>
> > >
> > > > got it, thanks, Robert
> > > >
> > > >
> > > > On Tue, Dec 15, 2009 at 10:19 PM, Robert Muir <rcmuir@gmail.com>
> > wrote:
> > > >
> > > >>  if you have lucene 2.9 or 3.0 source code, just run patch -p0 <
> > > >> /path/to/LUCENE-XXYY.patch from the lucene source code root
> > directory...
> > > >> it
> > > >> should create the necessary directory and files.
> > > >> then run 'ant' , in this case it should create a lucene-icu jar fi=
le
> > in
> > > >> the
> > > >> build directory.
> > > >>
> > > >> the patch doesnt include the icu dependency itself so you need to
> get
> > > that
> > > >> jar file from www.icu-project.org and have it in your classpath
> also
> > > >>
> > > >> sorry for the trouble, hope to integrate some of this soon for a
> > future
> > > >> release.
> > > >>
> > > >> On Tue, Dec 15, 2009 at 9:13 AM, Weiwei Wang <ww.wang.cs@gmail.com=
>
> > > >> wrote:
> > > >>
> > > >> > Yes, i found the patch file LUCENE-1488.patch and there's no icu
> > > >> directory
> > > >> > in my dowloaded contrib directory.
> > > >> >
> > > >> > I'm a rookie guy using patch, i'm currently in the contrib dir,
> > could
> > > >> > anybody tell me how to execute this patch command to generate th=
e
> > > >> relevant
> > > >> > dir and souce files?
> > > >> >
> > > >> > On Tue, Dec 15, 2009 at 9:51 PM, Robert Muir <rcmuir@gmail.com>
> > > wrote:
> > > >> >
> > > >> > > look at the latest patch file attached to the issue, it should
> > work
> > > >> with
> > > >> > > lucene 2.9 or greater (I think)
> > > >> > >
> > > >> > > 2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>
> > > >> > >
> > > >> > > > where can i find the source code?
> > > >> > > >
> > > >> > > > On Tue, Dec 15, 2009 at 9:40 PM, Robert Muir <
> rcmuir@gmail.com>
> > > >> wrote:
> > > >> > > >
> > > >> > > > > there is an icu transform tokenfilter in the patch here:
> > > >> > > > > http://issues.apache.org/jira/browse/LUCENE-1488
> > > >> > > > >
> > > >> > > > >    Transliterator pinyin =3D
> > > >> Transliterator.getInstance("Han-Latin");
> > > >> > > > >    Tokenizer tokenizer =3D new KeywordTokenizer(new
> > > >> > StringReader("=D6=D0=B9=FA"));
> > > >> > > > >    ICUTransformFilter filter =3D new
> > ICUTransformFilter(tokenizer,
> > > >> > > pinyin);
> > > >> > > > >    assertTokenStreamContents(filter, new String[] { "zh=A8=
=ADng
> > gu=A8=AE"
> > > }
> > > >> );
> > > >> > > > >
> > > >> > > > > note it will add tone marks and insert space between
> syllables
> > > by
> > > >> > > default
> > > >> > > > > if you do not want this, you need to do some cleanup.
> > > >> > > > >
> > > >> > > > >    Transliterator pinyin =3D
> > > Transliterator.getInstance("Han-Latin;
> > > >> > NFD;
> > > >> > > > > [[:NonspacingMark:][:Space:]] Remove");
> > > >> > > > >    Tokenizer tokenizer =3D new KeywordTokenizer(new
> > > >> > StringReader("=D6=D0=B9=FA"));
> > > >> > > > >    ICUTransformFilter filter =3D new
> > ICUTransformFilter(tokenizer,
> > > >> > > pinyin);
> > > >> > > > >    assertTokenStreamContents(filter, new String[] {
> "zhongguo"
> > }
> > > >> );
> > > >> > > > >
> > > >> > > > >
> > > >> > > > > 2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>
> > > >> > > > >
> > > >> > > > > > Hi, guys,
> > > >> > > > > >     I'm implementing a search engine based on Lucene for
> > > >> Chinese.
> > > >> > So
> > > >> > > I
> > > >> > > > > want
> > > >> > > > > > to support pinyin search as Google China do.
> > > >> > > > > >
> > > >> > > > > > e.g.
> > > >> > > > > >    =A1=B0=D6=D0=B9=FA=A1=B1  means Chinese in English
> > > >> > > > > >    this word's pinyin input is "zhongguo"
> > > >> > > > > > The feature i want to implement is when user type zhongg=
uo
> > the
> > > >> > > results
> > > >> > > > > will
> > > >> > > > > > include documents containing "=D6=D0=B9=FA" or even Chin=
ese
> > > >> > > > > >
> > > >> > > > > > Anybody here know how to achieve this?
> > > >> > > > > >
> > > >> > > > > > --
> > > >> > > > > > Weiwei Wang
> > > >> > > > > > Alex Wang
> > > >> > > > > > =CD=F5=CE=A1=CE=A1
> > > >> > > > > > Room 403, Mengmin Wei Building
> > > >> > > > > > Computer Science Department
> > > >> > > > > > Gulou Campus of Nanjing University
> > > >> > > > > > Nanjing, P.R.China, 210093
> > > >> > > > > >
> > > >> > > > > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > > >> > > > > >
> > > >> > > > >
> > > >> > > > >
> > > >> > > > >
> > > >> > > > > --
> > > >> > > > > Robert Muir
> > > >> > > > > rcmuir@gmail.com
> > > >> > > > >
> > > >> > > >
> > > >> > > >
> > > >> > > >
> > > >> > > > --
> > > >> > > > Weiwei Wang
> > > >> > > > Alex Wang
> > > >> > > > =CD=F5=CE=A1=CE=A1
> > > >> > > > Room 403, Mengmin Wei Building
> > > >> > > > Computer Science Department
> > > >> > > > Gulou Campus of Nanjing University
> > > >> > > > Nanjing, P.R.China, 210093
> > > >> > > >
> > > >> > > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > > >> > > >
> > > >> > >
> > > >> > >
> > > >> > >
> > > >> > > --
> > > >> > > Robert Muir
> > > >> > > rcmuir@gmail.com
> > > >> > >
> > > >> >
> > > >> >
> > > >> >
> > > >> > --
> > > >> > Weiwei Wang
> > > >> > Alex Wang
> > > >> > =CD=F5=CE=A1=CE=A1
> > > >> > Room 403, Mengmin Wei Building
> > > >> > Computer Science Department
> > > >> > Gulou Campus of Nanjing University
> > > >> > Nanjing, P.R.China, 210093
> > > >> >
> > > >> > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > > >> >
> > > >>
> > > >>
> > > >>
> > > >> --
> > > >> Robert Muir
> > > >> rcmuir@gmail.com
> > > >>
> > > >
> > > >
> > > >
> > > > --
> > > > Weiwei Wang
> > > > Alex Wang
> > > > =CD=F5=CE=A1=CE=A1
> > > > Room 403, Mengmin Wei Building
> > > > Computer Science Department
> > > > Gulou Campus of Nanjing University
> > > > Nanjing, P.R.China, 210093
> > > >
> > > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > > >
> > >
> > >
> > >
> > > --
> > > Weiwei Wang
> > > Alex Wang
> > > =CD=F5=CE=A1=CE=A1
> > > Room 403, Mengmin Wei Building
> > > Computer Science Department
> > > Gulou Campus of Nanjing University
> > > Nanjing, P.R.China, 210093
> > >
> > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > >
> >
> >
> >
> > --
> > Robert Muir
> > rcmuir@gmail.com
> >
>
>
>
> --
> Weiwei Wang
> Alex Wang
> =CD=F5=CE=A1=CE=A1
> Room 403, Mengmin Wei Building
> Computer Science Department
> Gulou Campus of Nanjing University
> Nanjing, P.R.China, 210093
>
> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>

--0016e6d7f07e14dda5047ad8ffc6--

From java-user-return-44145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 16 14:29:25 2009
Return-Path: <java-user-return-44145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93962 invoked from network); 16 Dec 2009 14:29:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Dec 2009 14:29:25 -0000
Received: (qmail 82732 invoked by uid 500); 16 Dec 2009 14:29:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82665 invoked by uid 500); 16 Dec 2009 14:29:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82655 invoked by uid 99); 16 Dec 2009 14:29:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Dec 2009 14:29:22 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.211.185 as permitted sender)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Dec 2009 14:29:18 +0000
Received: by ywh15 with SMTP id 15so1033849ywh.5
        for <java-user@lucene.apache.org>; Wed, 16 Dec 2009 06:28:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=KHAVNkPxLqNvBRksurDqWQuK88D2tpUVwPHF6VKeVUk=;
        b=pceZstc1pIl3rnsfc63dlpYrfz7nXszLw/yz4dxIt/xxO+SaqrKubPbJsmmFIgnyCz
         PVRMFDYYhIyAHJhtf2zy9+hlwDb4fqoQmhUVR4HZ2WdA6fEMvKdlH5pUSppx+x2axOze
         It0Lw3ZIYkomqn3P5a+WWrj/g47fofpAXQdSQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=YS6ITwypzjKxMSEz0kEZ15ik6JaWF0w+Yf4CnCZ4TACTTc2LKYbfm+RyaiPBEd0Evb
         CGhMUpsMhWo4BxerQwRx6x+1Mrn+kElLxdTAyzPoO4ueVpj44bgzR38sF8+ldAbLCDL0
         YS+//jzZ+SuAvlKKQWFdrPuD370tbnaBAmSFs=
MIME-Version: 1.0
Received: by 10.90.210.11 with SMTP id i11mr1113889agg.94.1260973736330; Wed, 
	16 Dec 2009 06:28:56 -0800 (PST)
In-Reply-To: <359a92830912160605o4adf5d59r4f39fb8b88b43e66@mail.gmail.com>
References: <7d94dcde0912150526hdc3f9cev7a7368d4df5f06f8@mail.gmail.com>
	 <7d94dcde0912150549t361a55c9va6a7cc785e062858@mail.gmail.com>
	 <8f0ad1f30912150551v13fb0959vf3d011b2b969ea09@mail.gmail.com>
	 <7d94dcde0912150613x509e04f1s6c3927cf61d210c4@mail.gmail.com>
	 <8f0ad1f30912150619r40cfe55aj702dfbce86dbeb8@mail.gmail.com>
	 <7d94dcde0912150623w5fcb8914o2e13a2bb0ea707a9@mail.gmail.com>
	 <7d94dcde0912151919s5ec0fa40m968a94ff9d760529@mail.gmail.com>
	 <8f0ad1f30912151953y17c175e7n20ff02428e5eacad@mail.gmail.com>
	 <7d94dcde0912152043v76e1affdt86dec284494f7555@mail.gmail.com>
	 <359a92830912160605o4adf5d59r4f39fb8b88b43e66@mail.gmail.com>
Date: Wed, 16 Dec 2009 22:28:56 +0800
Message-ID: <7d94dcde0912160628p228eb22ex1d06604a6ac713c1@mail.gmail.com>
Subject: Re: How to do alias(Pinyin) search in Lucene
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364ed88aa0171b047ad9538f

--0016364ed88aa0171b047ad9538f
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

Thanks Erick, I''ll take a carefull study of that

2009/12/16 Erick Erickson <erickerickson@gmail.com>

> If your queries are still slow, make sure you're not measuring
> the *first* query on a newly opened searcher. There are
> other tips here that might be useful. These are general searching
> tips complimentary to Robert's suggestions..
>
> http://wiki.apache.org/lucene-java/ImproveSearchingSpeed
>
> <http://wiki.apache.org/lucene-java/ImproveSearchingSpeed>HTH
> Erick
>
> 2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>
>
> > Thanks Robert, a lot is learned from you:-)
> >
> > On Wed, Dec 16, 2009 at 11:53 AM, Robert Muir <rcmuir@gmail.com> wrote:
> >
> > > Hi, just one more thought for you.
> > >
> > > I think even more important than anything I said before, you should
> > ensure
> > > you implement reusableTokenStream in your analyzer.
> > > this becomes a necessity if you are using expensive objects like this=
.
> > >
> > > 2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>
> > >
> > > > Finally, i make it run, however, it works so slow
> > > >
> > > > 2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>
> > > >
> > > > > got it, thanks, Robert
> > > > >
> > > > >
> > > > > On Tue, Dec 15, 2009 at 10:19 PM, Robert Muir <rcmuir@gmail.com>
> > > wrote:
> > > > >
> > > > >>  if you have lucene 2.9 or 3.0 source code, just run patch -p0 <
> > > > >> /path/to/LUCENE-XXYY.patch from the lucene source code root
> > > directory...
> > > > >> it
> > > > >> should create the necessary directory and files.
> > > > >> then run 'ant' , in this case it should create a lucene-icu jar
> file
> > > in
> > > > >> the
> > > > >> build directory.
> > > > >>
> > > > >> the patch doesnt include the icu dependency itself so you need t=
o
> > get
> > > > that
> > > > >> jar file from www.icu-project.org and have it in your classpath
> > also
> > > > >>
> > > > >> sorry for the trouble, hope to integrate some of this soon for a
> > > future
> > > > >> release.
> > > > >>
> > > > >> On Tue, Dec 15, 2009 at 9:13 AM, Weiwei Wang <
> ww.wang.cs@gmail.com>
> > > > >> wrote:
> > > > >>
> > > > >> > Yes, i found the patch file LUCENE-1488.patch and there's no i=
cu
> > > > >> directory
> > > > >> > in my dowloaded contrib directory.
> > > > >> >
> > > > >> > I'm a rookie guy using patch, i'm currently in the contrib dir=
,
> > > could
> > > > >> > anybody tell me how to execute this patch command to generate
> the
> > > > >> relevant
> > > > >> > dir and souce files?
> > > > >> >
> > > > >> > On Tue, Dec 15, 2009 at 9:51 PM, Robert Muir <rcmuir@gmail.com=
>
> > > > wrote:
> > > > >> >
> > > > >> > > look at the latest patch file attached to the issue, it shou=
ld
> > > work
> > > > >> with
> > > > >> > > lucene 2.9 or greater (I think)
> > > > >> > >
> > > > >> > > 2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>
> > > > >> > >
> > > > >> > > > where can i find the source code?
> > > > >> > > >
> > > > >> > > > On Tue, Dec 15, 2009 at 9:40 PM, Robert Muir <
> > rcmuir@gmail.com>
> > > > >> wrote:
> > > > >> > > >
> > > > >> > > > > there is an icu transform tokenfilter in the patch here:
> > > > >> > > > > http://issues.apache.org/jira/browse/LUCENE-1488
> > > > >> > > > >
> > > > >> > > > >    Transliterator pinyin =3D
> > > > >> Transliterator.getInstance("Han-Latin");
> > > > >> > > > >    Tokenizer tokenizer =3D new KeywordTokenizer(new
> > > > >> > StringReader("=D6=D0=B9=FA"));
> > > > >> > > > >    ICUTransformFilter filter =3D new
> > > ICUTransformFilter(tokenizer,
> > > > >> > > pinyin);
> > > > >> > > > >    assertTokenStreamContents(filter, new String[] { "zh=
=A8=ADng
> > > gu=A8=AE"
> > > > }
> > > > >> );
> > > > >> > > > >
> > > > >> > > > > note it will add tone marks and insert space between
> > syllables
> > > > by
> > > > >> > > default
> > > > >> > > > > if you do not want this, you need to do some cleanup.
> > > > >> > > > >
> > > > >> > > > >    Transliterator pinyin =3D
> > > > Transliterator.getInstance("Han-Latin;
> > > > >> > NFD;
> > > > >> > > > > [[:NonspacingMark:][:Space:]] Remove");
> > > > >> > > > >    Tokenizer tokenizer =3D new KeywordTokenizer(new
> > > > >> > StringReader("=D6=D0=B9=FA"));
> > > > >> > > > >    ICUTransformFilter filter =3D new
> > > ICUTransformFilter(tokenizer,
> > > > >> > > pinyin);
> > > > >> > > > >    assertTokenStreamContents(filter, new String[] {
> > "zhongguo"
> > > }
> > > > >> );
> > > > >> > > > >
> > > > >> > > > >
> > > > >> > > > > 2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>
> > > > >> > > > >
> > > > >> > > > > > Hi, guys,
> > > > >> > > > > >     I'm implementing a search engine based on Lucene f=
or
> > > > >> Chinese.
> > > > >> > So
> > > > >> > > I
> > > > >> > > > > want
> > > > >> > > > > > to support pinyin search as Google China do.
> > > > >> > > > > >
> > > > >> > > > > > e.g.
> > > > >> > > > > >    =A1=B0=D6=D0=B9=FA=A1=B1  means Chinese in English
> > > > >> > > > > >    this word's pinyin input is "zhongguo"
> > > > >> > > > > > The feature i want to implement is when user type
> zhongguo
> > > the
> > > > >> > > results
> > > > >> > > > > will
> > > > >> > > > > > include documents containing "=D6=D0=B9=FA" or even Ch=
inese
> > > > >> > > > > >
> > > > >> > > > > > Anybody here know how to achieve this?
> > > > >> > > > > >
> > > > >> > > > > > --
> > > > >> > > > > > Weiwei Wang
> > > > >> > > > > > Alex Wang
> > > > >> > > > > > =CD=F5=CE=A1=CE=A1
> > > > >> > > > > > Room 403, Mengmin Wei Building
> > > > >> > > > > > Computer Science Department
> > > > >> > > > > > Gulou Campus of Nanjing University
> > > > >> > > > > > Nanjing, P.R.China, 210093
> > > > >> > > > > >
> > > > >> > > > > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > > > >> > > > > >
> > > > >> > > > >
> > > > >> > > > >
> > > > >> > > > >
> > > > >> > > > > --
> > > > >> > > > > Robert Muir
> > > > >> > > > > rcmuir@gmail.com
> > > > >> > > > >
> > > > >> > > >
> > > > >> > > >
> > > > >> > > >
> > > > >> > > > --
> > > > >> > > > Weiwei Wang
> > > > >> > > > Alex Wang
> > > > >> > > > =CD=F5=CE=A1=CE=A1
> > > > >> > > > Room 403, Mengmin Wei Building
> > > > >> > > > Computer Science Department
> > > > >> > > > Gulou Campus of Nanjing University
> > > > >> > > > Nanjing, P.R.China, 210093
> > > > >> > > >
> > > > >> > > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > > > >> > > >
> > > > >> > >
> > > > >> > >
> > > > >> > >
> > > > >> > > --
> > > > >> > > Robert Muir
> > > > >> > > rcmuir@gmail.com
> > > > >> > >
> > > > >> >
> > > > >> >
> > > > >> >
> > > > >> > --
> > > > >> > Weiwei Wang
> > > > >> > Alex Wang
> > > > >> > =CD=F5=CE=A1=CE=A1
> > > > >> > Room 403, Mengmin Wei Building
> > > > >> > Computer Science Department
> > > > >> > Gulou Campus of Nanjing University
> > > > >> > Nanjing, P.R.China, 210093
> > > > >> >
> > > > >> > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > > > >> >
> > > > >>
> > > > >>
> > > > >>
> > > > >> --
> > > > >> Robert Muir
> > > > >> rcmuir@gmail.com
> > > > >>
> > > > >
> > > > >
> > > > >
> > > > > --
> > > > > Weiwei Wang
> > > > > Alex Wang
> > > > > =CD=F5=CE=A1=CE=A1
> > > > > Room 403, Mengmin Wei Building
> > > > > Computer Science Department
> > > > > Gulou Campus of Nanjing University
> > > > > Nanjing, P.R.China, 210093
> > > > >
> > > > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > > > >
> > > >
> > > >
> > > >
> > > > --
> > > > Weiwei Wang
> > > > Alex Wang
> > > > =CD=F5=CE=A1=CE=A1
> > > > Room 403, Mengmin Wei Building
> > > > Computer Science Department
> > > > Gulou Campus of Nanjing University
> > > > Nanjing, P.R.China, 210093
> > > >
> > > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> > > >
> > >
> > >
> > >
> > > --
> > > Robert Muir
> > > rcmuir@gmail.com
> > >
> >
> >
> >
> > --
> > Weiwei Wang
> > Alex Wang
> > =CD=F5=CE=A1=CE=A1
> > Room 403, Mengmin Wei Building
> > Computer Science Department
> > Gulou Campus of Nanjing University
> > Nanjing, P.R.China, 210093
> >
> > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> >
>



--=20
Weiwei Wang
Alex Wang
=CD=F5=CE=A1=CE=A1
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--0016364ed88aa0171b047ad9538f--

From java-user-return-44146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 16 15:27:13 2009
Return-Path: <java-user-return-44146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20326 invoked from network); 16 Dec 2009 15:27:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Dec 2009 15:27:13 -0000
Received: (qmail 17230 invoked by uid 500); 16 Dec 2009 15:27:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17148 invoked by uid 500); 16 Dec 2009 15:27:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17138 invoked by uid 99); 16 Dec 2009 15:27:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Dec 2009 15:27:10 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of richard.marr@gmail.com designates 209.85.218.222 as permitted sender)
Received: from [209.85.218.222] (HELO mail-bw0-f222.google.com) (209.85.218.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Dec 2009 15:27:00 +0000
Received: by bwz22 with SMTP id 22so833537bwz.5
        for <java-user@lucene.apache.org>; Wed, 16 Dec 2009 07:26:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=JxjI2XkvWdXJQZBfOtANhqaG42n9RV2c7+x7BM4aOM4=;
        b=MH0MMyHmElNNMZeWc3n3u4DVG6yruhIqM3jDsDKQCypqHz0sZcab3Ud/TOK3+A/zD1
         8zoqG2Rn12mdX5dcK0+tXZft3l7gqURgHyGGdqfsgWuFp20TAPURFdE+6mH1XzI8IKlE
         nSqa+c4oNTCA4cMlRw2dXz92OZq+WwZ7dvaP8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=f3A1qdxmxYleM/3mNWvzlXZ8bPB+nQ7x1KD/2COHeI+nHqd9Qwrs/6w0uWcfV8LXxf
         tFRv4DaW3bG4UysB2EGm+JOukzjSF2tWfd5ymLofFLkqsGuCEEFatHDrLkW0kVVHEnV9
         PQukSX53My6w1szYTXLldcfZgJ1MDb24bAD44=
MIME-Version: 1.0
Received: by 10.204.24.70 with SMTP id u6mr631262bkb.26.1260977199708; Wed, 16 
	Dec 2009 07:26:39 -0800 (PST)
Date: Wed, 16 Dec 2009 15:26:39 +0000
Message-ID: <dba8f29c0912160726o25ea9d8as20952cf369bbacc3@mail.gmail.com>
Subject: London search technology group on Meetup
From: Richard Marr <richard.marr@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

Following on from the various social events Ren=E9 Kriegler and I have
organised in London, I've now created a group on Meetup.com so that
people can subscribe to event notifications.

If you think you might be interested in coming along some time then
just sign up and you'll get a notification by email when there's an
event happening.

http://www.meetup.com/london-search-social/

Cheers,

Rich

Richard Marr
Pixsta Ltd.
http://www.empora.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 17 06:48:58 2009
Return-Path: <java-user-return-44147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29562 invoked from network); 17 Dec 2009 06:48:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Dec 2009 06:48:58 -0000
Received: (qmail 83659 invoked by uid 500); 17 Dec 2009 06:48:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83433 invoked by uid 500); 17 Dec 2009 06:48:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83419 invoked by uid 99); 17 Dec 2009 06:48:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Dec 2009 06:48:51 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [202.86.5.89] (HELO smtp102.mail.in.yahoo.com) (202.86.5.89)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 17 Dec 2009 06:48:40 +0000
Received: (qmail 99504 invoked from network); 17 Dec 2009 06:48:18 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:x-mimeole;
  b=ZhRNGOXXrq2Ff7fXCmP6pB25mPr19ICwBop3mpLBenPkS57URD6p/pxBVtT3NHUstQmSx5fEXeal0L2kx68Y9nOSjFT9ZOGiy9AreYTQvM0vbJiIeDGGaSTCJuZuXQ1yUngGLPq/QTSHEMTEuM8QBkZ8H8+8iWkESlph3bZ6JGk=  ;
Received: from  (emailgane@203.98.194.130 with login)
        by smtp102.mail.in.yahoo.com with SMTP; 17 Dec 2009 12:18:18 +0530 IST
X-Yahoo-SMTP: JObyHkuswBBrNSLZp.Ycd7Boqpr_GQ--
X-YMail-OSG: tg29244VM1nt9BcPKKPMQJPvmmIhzcpxSBlizGXy9N1hz1UAaBp5xB0iALCwNJx.3m0sH6wxSmkrwnnZ0Lfdi1iLMwVe5CmORypC.vxle8w45DCPm8qIxj6Izk9Klj6enwsliQ8bnsTtsMpPHBpSfKgaUGlG7sd04FQUuZ3Ea4RBIy0nQMXmnshVSdZOFpIzrnpFHsqg
X-Yahoo-Newman-Property: ymail-3
Message-ID: <008701ca7ee4$e3598ae0$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
Subject: External sort
Date: Thu, 17 Dec 2009 12:18:02 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
x-mimeole: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Hello all,

We are facing serious issues related to Sorting in production =
environment. I know this issues has been discussed in this group. I am =
using v2.9.1 I am having multiple shards and i need to do only date time =
sorting. Sorting consumes 50% of RAM.

Is anyone has attempted to use external sorting?

Is there any way to index the records in sorted order. Sort and Merge =
the records at indexing time and pull the records sorted by doc id?=20

Any other ideas.... I need to do sort with less memory. Performance is =
not the concern.

Regards
Ganesh


 
Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 17 09:58:42 2009
Return-Path: <java-user-return-44148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85354 invoked from network); 17 Dec 2009 09:58:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Dec 2009 09:58:42 -0000
Received: (qmail 70403 invoked by uid 500); 17 Dec 2009 09:58:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70297 invoked by uid 500); 17 Dec 2009 09:58:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70287 invoked by uid 99); 17 Dec 2009 09:58:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Dec 2009 09:58:39 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Dec 2009 09:58:30 +0000
Received: by yxe30 with SMTP id 30so2100162yxe.29
        for <java-user@lucene.apache.org>; Thu, 17 Dec 2009 01:58:09 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.24.2 with SMTP id 2mr3588373ybx.172.1261043889257; Thu, 17 
	Dec 2009 01:58:09 -0800 (PST)
In-Reply-To: <008701ca7ee4$e3598ae0$710bc30a@sv.us.sonicwall.com>
References: <008701ca7ee4$e3598ae0$710bc30a@sv.us.sonicwall.com>
Date: Thu, 17 Dec 2009 04:58:09 -0500
Message-ID: <9ac0c6aa0912170158lb56ea90n5360b4063fd84e20@mail.gmail.com>
Subject: Re: External sort
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

There was a recent thread on neat algos that can compute the global
order in multiple passes to keep RAM usage low.

Mike

On Thu, Dec 17, 2009 at 1:48 AM, Ganesh <emailgane@yahoo.co.in> wrote:
> Hello all,
>
> We are facing serious issues related to Sorting in production environment. I know this issues has been discussed in this group. I am using v2.9.1 I am having multiple shards and i need to do only date time sorting. Sorting consumes 50% of RAM.
>
> Is anyone has attempted to use external sorting?
>
> Is there any way to index the records in sorted order. Sort and Merge the records at indexing time and pull the records sorted by doc id?
>
> Any other ideas.... I need to do sort with less memory. Performance is not the concern.
>
> Regards
> Ganesh
>
>
>
> Send instant messages to your online friends http://in.messenger.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 17 10:34:47 2009
Return-Path: <java-user-return-44149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1795 invoked from network); 17 Dec 2009 10:34:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Dec 2009 10:34:47 -0000
Received: (qmail 24438 invoked by uid 500); 17 Dec 2009 10:34:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24368 invoked by uid 500); 17 Dec 2009 10:34:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24358 invoked by uid 99); 17 Dec 2009 10:34:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Dec 2009 10:34:44 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Dec 2009 10:34:35 +0000
Received: by yxe30 with SMTP id 30so2125782yxe.29
        for <java-user@lucene.apache.org>; Thu, 17 Dec 2009 02:34:14 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.25.30 with SMTP id 30mr3704092yby.83.1261046054017; Thu, 
	17 Dec 2009 02:34:14 -0800 (PST)
In-Reply-To: <1260799781.5731.4174.camel@pc286>
References: <17022a310912071327x6be7f6afjf45e0ab69269e47c@mail.gmail.com>
	 <660086cb0912071638h6c6e10e1u4899889bc9a4ed74@mail.gmail.com>
	 <9ac0c6aa0912080236j5d3a87d1jbce8558fba738765@mail.gmail.com>
	 <9ac0c6aa0912080243g4f7fab20q73b228cf1426a4ae@mail.gmail.com>
	 <17022a310912091358y20f4eebbt7bcd0253cb8add04@mail.gmail.com>
	 <2E6A89A648463A4EBF093A9062C16683013484F9F742@SBMAILBOX1.sb.statsbiblioteket.dk>
	 <9ac0c6aa0912100245n4e3902etfed6b26dd80a2f2d@mail.gmail.com>
	 <1260538239.5731.99.camel@pc286>
	 <9ac0c6aa0912110553u5e494988w14964467e6ce62fd@mail.gmail.com>
	 <1260799781.5731.4174.camel@pc286>
Date: Thu, 17 Dec 2009 05:34:13 -0500
Message-ID: <9ac0c6aa0912170234v606f58f4se75b6f02e46342cc@mail.gmail.com>
Subject: Re: heap memory issues when sorting by a string field
From: Michael McCandless <lucene@mikemccandless.com>
To: te@statsbiblioteket.dk
Cc: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

I think this'd make a nice contribution -- eg it could be bundled up
as a FieldComparator impl, eg LowMemoryStringComparator, that would
compute the global ords in multiple passes with limited RAM usage.

It'd give users the space/time tradeoff...

Mike

On Mon, Dec 14, 2009 at 9:09 AM, Toke Eskildsen <te@statsbiblioteket.dk> wr=
ote:
> On Fri, 2009-12-11 at 14:53 +0100, Michael McCandless wrote:
>> How long does Lucene take to build the ords for the toplevel reader?
>>
>> You should be able to just time FieldCache.getStringIndex(topLevelReader=
).
>>
>> I think your 8.5 seconds for first Lucene search was with the
>> StringIndex computed per segment?
>
> Cold disk-cache (directly after reboot):
> [2009-12-14 14:44:10,914] Requesting StringIndex for field sort_title
> [2009-12-14 14:44:20,326] Got StringIndex of length 2916008 in 9
> seconds, 412 ms
>
> Warm disk-cache (3 minutes after first test):
> [2009-12-14 14:44:10,914] Requesting StringIndex for field sort_title
> [2009-12-14 14:44:20,326] Got StringIndex of length 2916008 in 8
> seconds, 414 ms
>
> The response time for the first sorted search was about 8,5 seconds, but
> that was after 6 non-sorted searches without the use of explicit field
> cache, so some amount of warm-up was performed.
>
> Caveat: I must stress that this is very much ad hoc testing.
>
>
> ----------------- FieldCache test code
>
> =A0 =A0// Meant for testing
> =A0 =A0private FieldCache.StringIndex getStringIndex(
> =A0 =A0 =A0 =A0 =A0 =A0IndexReader reader, String field) {
> =A0 =A0 =A0 =A0log.info("Requesting StringIndex for field " + field);
> =A0 =A0 =A0 =A0Profiler profiler =3D new Profiler();
> =A0 =A0 =A0 =A0FieldCache.StringIndex stringIndex;
> =A0 =A0 =A0 =A0try {
> =A0 =A0 =A0 =A0 =A0 =A0stringIndex =3D FieldCache.DEFAULT.getStringIndex(=
reader,
> field);
> =A0 =A0 =A0 =A0} catch (IOException e) {
> =A0 =A0 =A0 =A0 =A0 =A0log.error("Could not retrieve StringIndex", e);
> =A0 =A0 =A0 =A0 =A0 =A0return null;
> =A0 =A0 =A0 =A0}
> =A0 =A0 =A0 =A0log.info("Got StringIndex of length " + stringIndex.order.=
length
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 + " in " + profiler.getSpendTime());
> =A0 =A0 =A0 =A0return stringIndex;
> =A0 =A0}
>
> ----------------- Lucene 2.4 index
>
> ls -l index/sb/20091201-115941/lucene/
>
> -rw-rw-r-- 1 summatst summatst 12840211452 Dec =A02 11:21 _0.cfx
> -rw-rw-r-- 1 summatst summatst =A0 361027455 Dec =A02 11:19 _32.cfs
> -rw-rw-r-- 1 summatst summatst =A0 373374178 Dec =A02 11:19 _65.cfs
> -rw-rw-r-- 1 summatst summatst =A0 438076782 Dec =A02 11:21 _98.cfs
> -rw-rw-r-- 1 summatst summatst =A0 463141239 Dec =A02 11:19 _cb.cfs
> -rw-rw-r-- 1 summatst summatst =A01862427706 Dec =A02 11:19 _rm.cfs
> -rw-rw-r-- 1 summatst summatst =A0 =A0 =A0 =A0 203 Dec =A02 11:21 segment=
s_3
> -rw-rw-r-- 1 summatst summatst =A0 =A0 =A0 =A0 =A020 Dec =A02 11:18 segme=
nts.gen
>
> -----------------
>
> Regards,
> Toke Eskildsen
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 17 12:37:56 2009
Return-Path: <java-user-return-44150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56442 invoked from network); 17 Dec 2009 12:37:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Dec 2009 12:37:56 -0000
Received: (qmail 6758 invoked by uid 500); 17 Dec 2009 12:37:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6684 invoked by uid 500); 17 Dec 2009 12:37:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6674 invoked by uid 99); 17 Dec 2009 12:37:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Dec 2009 12:37:53 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Dec 2009 12:37:46 +0000
Received: from [172.18.225.244] (172.18.225.244) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.1.393.1; Thu, 17 Dec 2009 13:37:25 +0100
Subject: Re: External sort
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <008701ca7ee4$e3598ae0$710bc30a@sv.us.sonicwall.com>
References: <008701ca7ee4$e3598ae0$710bc30a@sv.us.sonicwall.com>
Content-Type: text/plain; charset="UTF-8"
Organization: Statsbiblioteket
Date: Thu, 17 Dec 2009 13:37:40 +0100
Message-ID: <1261053460.5731.4560.camel@pc286>
MIME-Version: 1.0
X-Mailer: Evolution 2.28.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, 2009-12-17 at 07:48 +0100, Ganesh wrote:
> I am using v2.9.1 I am having multiple shards and i need to do only 
> date time sorting. Sorting consumes 50% of RAM.

I'm guessing that your date-times are representable in 32 bits (signed
seconds since epoch or such - that'll work until 2038)? If so, it should
be possible to do very efficient sorting, both memory- and
performance-wise.

Make your own sorter by implementing SortComparatorSource.

The SortComparatorSource returns a ScoreDocComparator which contains an
array of longs, in which the first 32 bits designates the order of the
document at the given index (docID) and the last 32 bits holds the date
time.

The ScoreDocComparator's methods are trivial:
  public int compare (ScoreDoc i, ScoreDoc j) {
    return order[i.doc] - order[j.doc];
    // Or is it the other way? I always mix them up
  }
  public Comparable sortValue (ScoreDoc i) {
    return Integer.valueOf((int)(order[i.doc] & 0xFFFFFFFF));
  }
  public int sortType(){
    return SortField.CUSTOM;
  }

Now, for generating the order-array, we do something like this in the
SortComparatorSource:

  TermDocs termDocs = reader.termDocs();
  // inverted[docID] == datetime | docID
  long[] inverted = new long[reader.maxDoc];
  TermEnum termEnum = reader.terms(new Term(fieldname, ""));

  do {
    Term term = termEnum.term();
    if (term == null || !fieldname.equals(term.field())) {
      break;
    }
    long dateTime = (long)stringDateTimeToInt(term.text()) << 32;
    termDocs.seek(termEnum);
    while (termDocs.next()) {
      inverted[termDocs.doc()] = dateTime | termDocs.doc();
    }
  } while (termEnum.next());
  termEnum.close();

  // inverted[order] == datetime | docID
  Arrays.sort(inverted); // works for date time 1970+

  // order[docID] == order | datetime
  long[] order = new long[inverted.length];
  for (long o = 0 ; o < inverted.length ; o++) {
    int docID = (int)(inverted[o] & 0xFFFFFFFF);
    order[docID] = (o << 32) | (inverted[o] >>> 32);
  }

It would be nice to avoid the extra array needed for reordering, but I'm
fresh out of ideas. Still, the memory-overhead is just
  8 bytes (long) * 2 (arrays) * maxDoc
and performance should high as Arrays.sort(long[]) is fast and
everything runs without taxing the garbage collector.


Caveat lector: I haven't implemented the stuff above, so it's just an
idea written in not-so-pseudo code.

Regards,
Toke Eskildsen



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 17 14:16:14 2009
Return-Path: <java-user-return-44151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9761 invoked from network); 17 Dec 2009 14:16:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Dec 2009 14:16:14 -0000
Received: (qmail 81121 invoked by uid 500); 17 Dec 2009 14:16:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81031 invoked by uid 500); 17 Dec 2009 14:16:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81021 invoked by uid 99); 17 Dec 2009 14:16:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Dec 2009 14:16:12 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Dec 2009 14:16:03 +0000
Received: by yxe30 with SMTP id 30so2313466yxe.29
        for <java-user@lucene.apache.org>; Thu, 17 Dec 2009 06:15:41 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.37.7 with SMTP id k7mr4056895ybk.79.1261059337702; Thu, 17 
	Dec 2009 06:15:37 -0800 (PST)
In-Reply-To: <26792364.post@talk.nabble.com>
References: <26282578.post@talk.nabble.com> <26792364.post@talk.nabble.com>
Date: Thu, 17 Dec 2009 09:15:37 -0500
Message-ID: <9ac0c6aa0912170615k2cd09402pbf654a1be5f95972@mail.gmail.com>
Subject: Re: Scoring formula - Average number of terms in IDF
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

There have been some discussions, here:

    https://issues.apache.org/jira/browse/LUCENE-2091

about how Lucene could track avg field/doc length, but they are just
brainstorming type discussions now.

You could always do something approximate outside of Lucene?  EG, make
a TokenFilter that counts how many tokens are produced for each
field/doc, aggregate & store that yourself, and use it in your
similarity impl?

Mike

On Tue, Dec 15, 2009 at 5:04 AM, kdev <v.verroios@di.uoa.gr> wrote:
>
> any ideas please?
> --
> View this message in context: http://old.nabble.com/Scoring-formula---Average-number-of-terms-in-IDF-tp26282578p26792364.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 17 14:35:16 2009
Return-Path: <java-user-return-44152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19657 invoked from network); 17 Dec 2009 14:35:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Dec 2009 14:35:16 -0000
Received: (qmail 18733 invoked by uid 500); 17 Dec 2009 14:35:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18680 invoked by uid 500); 17 Dec 2009 14:35:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18670 invoked by uid 99); 17 Dec 2009 14:35:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Dec 2009 14:35:13 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [202.86.5.89] (HELO smtp102.mail.in.yahoo.com) (202.86.5.89)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 17 Dec 2009 14:35:02 +0000
Received: (qmail 88979 invoked from network); 17 Dec 2009 14:34:39 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:x-mimeole;
  b=SMeuVVSXyK3/yOYVNzLZqPbO3QJwY1E12Rn9iTSJh9htj5bbVhEat8XJ5Tf4cc4hCgkksPs6KgqTsFqr/vw855jmUGcesufn0ksTotxnzrWPQrfmjPOyu0pcDOZGNRpluqPrAxdWoWrD/1GLyys8fiTQT+EyuLta9eYr1WviURQ=  ;
Received: from  (emailgane@203.98.194.130 with login)
        by smtp102.mail.in.yahoo.com with SMTP; 17 Dec 2009 20:04:38 +0530 IST
X-Yahoo-SMTP: JObyHkuswBBrNSLZp.Ycd7Boqpr_GQ--
X-YMail-OSG: oYUyASYVM1m4l4UUZiUjvPKUxKOnrk6sWf0ztahPZxOB8grOXiLaqtS6EpK2vvQpVaVHnhGw109cRdGb46bNjOLWhVYb8pj9Zn8mw73bghMVujzwf2J6LxZnBvlDCgAJJ_ShmTnXQ0JefTfR_8Hlb03CXfsz.pl9Kn2JqA_HoI29eId1wx5KhB3mqCFubxiR2qM7f5pRh229N3LaSz.OqxQ_uvBjEAUDVZi1WykMBuQ-
X-Yahoo-Newman-Property: ymail-3
Message-ID: <190c01ca7f26$19359ff0$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>, <te@statsbiblioteket.dk>
References: <008701ca7ee4$e3598ae0$710bc30a@sv.us.sonicwall.com> <1261053460.5731.4560.camel@pc286>
Subject: Re: External sort
Date: Thu, 17 Dec 2009 20:04:50 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
x-mimeole: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Toke. I worried to use  long[] inverted =3D new =
long[reader.maxDoc]; as the memory consumption will be high for millions =
of document.

Any idea of building external sort cache? =20

Regards
Ganesh
=20
----- Original Message -----=20
From: "Toke Eskildsen" <te@statsbiblioteket.dk>
To: <java-user@lucene.apache.org>
Sent: Thursday, December 17, 2009 6:07 PM
Subject: Re: External sort


> On Thu, 2009-12-17 at 07:48 +0100, Ganesh wrote:
>> I am using v2.9.1 I am having multiple shards and i need to do only=20
>> date time sorting. Sorting consumes 50% of RAM.
>=20
> I'm guessing that your date-times are representable in 32 bits (signed
> seconds since epoch or such - that'll work until 2038)? If so, it =
should
> be possible to do very efficient sorting, both memory- and
> performance-wise.
>=20
> Make your own sorter by implementing SortComparatorSource.
>=20
> The SortComparatorSource returns a ScoreDocComparator which contains =
an
> array of longs, in which the first 32 bits designates the order of the
> document at the given index (docID) and the last 32 bits holds the =
date
> time.
>=20
> The ScoreDocComparator's methods are trivial:
>  public int compare (ScoreDoc i, ScoreDoc j) {
>    return order[i.doc] - order[j.doc];
>    // Or is it the other way? I always mix them up
>  }
>  public Comparable sortValue (ScoreDoc i) {
>    return Integer.valueOf((int)(order[i.doc] & 0xFFFFFFFF));
>  }
>  public int sortType(){
>    return SortField.CUSTOM;
>  }
>=20
> Now, for generating the order-array, we do something like this in the
> SortComparatorSource:
>=20
>  TermDocs termDocs =3D reader.termDocs();
>  // inverted[docID] =3D=3D datetime | docID
>  long[] inverted =3D new long[reader.maxDoc];
>  TermEnum termEnum =3D reader.terms(new Term(fieldname, ""));
>=20
>  do {
>    Term term =3D termEnum.term();
>    if (term =3D=3D null || !fieldname.equals(term.field())) {
>      break;
>    }
>    long dateTime =3D (long)stringDateTimeToInt(term.text()) << 32;
>    termDocs.seek(termEnum);
>    while (termDocs.next()) {
>      inverted[termDocs.doc()] =3D dateTime | termDocs.doc();
>    }
>  } while (termEnum.next());
>  termEnum.close();
>=20
>  // inverted[order] =3D=3D datetime | docID
>  Arrays.sort(inverted); // works for date time 1970+
>=20
>  // order[docID] =3D=3D order | datetime
>  long[] order =3D new long[inverted.length];
>  for (long o =3D 0 ; o < inverted.length ; o++) {
>    int docID =3D (int)(inverted[o] & 0xFFFFFFFF);
>    order[docID] =3D (o << 32) | (inverted[o] >>> 32);
>  }
>=20
> It would be nice to avoid the extra array needed for reordering, but =
I'm
> fresh out of ideas. Still, the memory-overhead is just
>  8 bytes (long) * 2 (arrays) * maxDoc
> and performance should high as Arrays.sort(long[]) is fast and
> everything runs without taxing the garbage collector.
>=20
>=20
> Caveat lector: I haven't implemented the stuff above, so it's just an
> idea written in not-so-pseudo code.
>=20
> Regards,
> Toke Eskildsen
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 17 14:42:05 2009
Return-Path: <java-user-return-44153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22672 invoked from network); 17 Dec 2009 14:42:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Dec 2009 14:42:05 -0000
Received: (qmail 39552 invoked by uid 500); 17 Dec 2009 14:42:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39484 invoked by uid 500); 17 Dec 2009 14:42:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39474 invoked by uid 99); 17 Dec 2009 14:42:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Dec 2009 14:42:03 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Dec 2009 14:42:01 +0000
Received: from [172.18.225.244] (172.18.225.244) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.1.393.1; Thu, 17 Dec 2009 15:41:39 +0100
Subject: Re: External sort
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: Ganesh <emailgane@yahoo.co.in>
CC: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <190c01ca7f26$19359ff0$710bc30a@sv.us.sonicwall.com>
References: <008701ca7ee4$e3598ae0$710bc30a@sv.us.sonicwall.com>
	 <1261053460.5731.4560.camel@pc286>
	 <190c01ca7f26$19359ff0$710bc30a@sv.us.sonicwall.com>
Content-Type: text/plain; charset="UTF-8"
Organization: Statsbiblioteket
Date: Thu, 17 Dec 2009 15:41:54 +0100
Message-ID: <1261060914.5731.4582.camel@pc286>
MIME-Version: 1.0
X-Mailer: Evolution 2.28.1 
Content-Transfer-Encoding: 7bit

On Thu, 2009-12-17 at 15:34 +0100, Ganesh wrote:
> Thanks Toke. I worried to use  long[] inverted = new long[reader.maxDoc]; 
> as the memory consumption will be high for millions of document.

Well, how many documents do you have? 10 million? That's just 160MB in
overhead, of which the 80MB are temporary on the first search.

> Any idea of building external sort cache?  

You could dump the order-array on disk (huge performance hit on
conventional harddisks), but it's hard to avoid the temporary
inverse-array upon first search. Of course, you could generate it on
index build and thus have a memory-hit of virtual 0.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 17 15:51:14 2009
Return-Path: <java-user-return-44154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49998 invoked from network); 17 Dec 2009 15:51:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Dec 2009 15:51:14 -0000
Received: (qmail 85142 invoked by uid 500); 17 Dec 2009 15:51:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85073 invoked by uid 500); 17 Dec 2009 15:51:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85063 invoked by uid 99); 17 Dec 2009 15:51:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Dec 2009 15:51:12 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Dec 2009 15:51:03 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NLIck-00046z-AB
	for java-user@lucene.apache.org; Thu, 17 Dec 2009 07:50:42 -0800
Message-ID: <26830145.post@talk.nabble.com>
Date: Thu, 17 Dec 2009 07:50:42 -0800 (PST)
From: kdev <v.verroios@di.uoa.gr>
To: java-user@lucene.apache.org
Subject: Re: Scoring formula - Average number of terms in IDF
In-Reply-To: <9ac0c6aa0912170615k2cd09402pbf654a1be5f95972@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: v.verroios@di.uoa.gr
References: <26282578.post@talk.nabble.com> <26792364.post@talk.nabble.com> <9ac0c6aa0912170615k2cd09402pbf654a1be5f95972@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


If I follow your approach, and produce the avg(outside of Lucene) while I 'm
building the index(due to performance reasons I can't wait for all the
documents to arrive before indexing them) for a collection, the avg will be
ready only when all the documents of the collection are indexed. 
Lucene states that the new similarity class must be set in
IndexWriter.setSimilarity(), and be used while I build the index, and in
this time the avg isn't ready yet. Is there a way to overcome this? And if
not calculating the score while the index is being created, and only when
searching the index, what will the consequence in performance be?

(Mike thank you about your response)  


Michael McCandless-2 wrote:
> 
> There have been some discussions, here:
> 
>     https://issues.apache.org/jira/browse/LUCENE-2091
> 
> about how Lucene could track avg field/doc length, but they are just
> brainstorming type discussions now.
> 
> You could always do something approximate outside of Lucene?  EG, make
> a TokenFilter that counts how many tokens are produced for each
> field/doc, aggregate & store that yourself, and use it in your
> similarity impl?
> 
> Mike
> 
> On Tue, Dec 15, 2009 at 5:04 AM, kdev <v.verroios@di.uoa.gr> wrote:
>>
>> any ideas please?
>> --
>> View this message in context:
>> http://old.nabble.com/Scoring-formula---Average-number-of-terms-in-IDF-tp26282578p26792364.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

-- 
View this message in context: http://old.nabble.com/Scoring-formula---Average-number-of-terms-in-IDF-tp26282578p26830145.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 17 16:03:42 2009
Return-Path: <java-user-return-44155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56066 invoked from network); 17 Dec 2009 16:03:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Dec 2009 16:03:42 -0000
Received: (qmail 2554 invoked by uid 500); 17 Dec 2009 16:03:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2476 invoked by uid 500); 17 Dec 2009 16:03:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2466 invoked by uid 99); 17 Dec 2009 16:03:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Dec 2009 16:03:39 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Dec 2009 16:03:33 +0000
Received: from SBMAILBOX1.sb.statsbiblioteket.dk ([10.150.5.1]) by
 sbexch03.sb.statsbiblioteket.dk ([10.150.5.3]) with mapi; Thu, 17 Dec 2009
 17:03:11 +0100
From: Toke Eskildsen <te@statsbiblioteket.dk>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>, Toke
 Eskildsen <te@statsbiblioteket.dk>
Date: Thu, 17 Dec 2009 17:03:11 +0100
Subject: RE: External sort
Thread-Topic: External sort
Thread-Index: Acp/Fd/N+YTyKGUwT9mcPjJiKcGqOAAGWBJx
Message-ID: <2E6A89A648463A4EBF093A9062C16683013998E5AE30@SBMAILBOX1.sb.statsbiblioteket.dk>
References: <008701ca7ee4$e3598ae0$710bc30a@sv.us.sonicwall.com>,<1261053460.5731.4560.camel@pc286>
In-Reply-To: <1261053460.5731.4560.camel@pc286>
Accept-Language: en-US, da-DK
Content-Language: en-GB
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US, da-DK
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

Sigh... Forest for the trees, Toke.

The date time represented as an integer _is_ the order and at the same time=
 a global external representation. No need to jump through all the hoops I =
made. I had my mind full of a more general solution to the memory problem w=
ith sort.


Instead of the order-array being a long[] with order and datetime, it shoul=
d be just an int[] with datetime. The FieldCacheImpl does this for INT-sort=
s , so there's no need for extra code if you just store the datetime as an =
integer (something like Integer.toString(datetimeAsInt) for the field-value=
) and use SortField(fieldname, SortField.INT) to sort with.

If you cannot store the datetime as an integer (e.g. if you don't control t=
he indexing), you can use the FieldCacheImpl with a custom int-parser that =
translates your datetime representation to int.

The internal representation takes 4 bytes/document. If you need to go lower=
 than that, I'll say you have a very uncommon setup.

It can be done by making custom code and storing the order-array on disk, b=
ut access-speed would suffer tremendously for searches with millions of hit=
s. An alternative would be to reduce the granularity of the datetime and us=
e SortField.SHORT or ShortField.BYTE. A third alternative would be to count=
 the number of unique datetime-values and make a compressed representation,=
 but that would make the creation of the order-array more complex.=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 17 16:07:30 2009
Return-Path: <java-user-return-44156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57124 invoked from network); 17 Dec 2009 16:07:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Dec 2009 16:07:30 -0000
Received: (qmail 7162 invoked by uid 500); 17 Dec 2009 16:07:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7086 invoked by uid 500); 17 Dec 2009 16:07:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7076 invoked by uid 99); 17 Dec 2009 16:07:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Dec 2009 16:07:27 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Dec 2009 16:07:24 +0000
Received: by ywh15 with SMTP id 15so2319102ywh.5
        for <java-user@lucene.apache.org>; Thu, 17 Dec 2009 08:07:03 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.37.7 with SMTP id k7mr4303656ybk.79.1261066022821; Thu, 17 
	Dec 2009 08:07:02 -0800 (PST)
In-Reply-To: <26830145.post@talk.nabble.com>
References: <26282578.post@talk.nabble.com> <26792364.post@talk.nabble.com>
	 <9ac0c6aa0912170615k2cd09402pbf654a1be5f95972@mail.gmail.com>
	 <26830145.post@talk.nabble.com>
Date: Thu, 17 Dec 2009 11:07:02 -0500
Message-ID: <9ac0c6aa0912170807x40542ef0n5d527478197f20d9@mail.gmail.com>
Subject: Re: Scoring formula - Average number of terms in IDF
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

IndexWriter uses Similarity.lengthNorm to create a norm (boost for the
field, per document) based on the length of the field... it doesn't
invoke the other methods on Similarity.

Are you saying you need to know the avg across the whole corpus before
computing that boost?

Mike

On Thu, Dec 17, 2009 at 10:50 AM, kdev <v.verroios@di.uoa.gr> wrote:
>
> If I follow your approach, and produce the avg(outside of Lucene) while I=
 'm
> building the index(due to performance reasons I can't wait for all the
> documents to arrive before indexing them) for a collection, the avg will =
be
> ready only when all the documents of the collection are indexed.
> Lucene states that the new similarity class must be set in
> IndexWriter.setSimilarity(), and be used while I build the index, and in
> this time the avg isn't ready yet. Is there a way to overcome this? And i=
f
> not calculating the score while the index is being created, and only when
> searching the index, what will the consequence in performance be?
>
> (Mike thank you about your response)
>
>
> Michael McCandless-2 wrote:
>>
>> There have been some discussions, here:
>>
>> =A0 =A0 https://issues.apache.org/jira/browse/LUCENE-2091
>>
>> about how Lucene could track avg field/doc length, but they are just
>> brainstorming type discussions now.
>>
>> You could always do something approximate outside of Lucene? =A0EG, make
>> a TokenFilter that counts how many tokens are produced for each
>> field/doc, aggregate & store that yourself, and use it in your
>> similarity impl?
>>
>> Mike
>>
>> On Tue, Dec 15, 2009 at 5:04 AM, kdev <v.verroios@di.uoa.gr> wrote:
>>>
>>> any ideas please?
>>> --
>>> View this message in context:
>>> http://old.nabble.com/Scoring-formula---Average-number-of-terms-in-IDF-=
tp26282578p26792364.html
>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> --
> View this message in context: http://old.nabble.com/Scoring-formula---Ave=
rage-number-of-terms-in-IDF-tp26282578p26830145.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 17 17:33:39 2009
Return-Path: <java-user-return-44157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1045 invoked from network); 17 Dec 2009 17:33:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 17 Dec 2009 17:33:39 -0000
Received: (qmail 91061 invoked by uid 500); 17 Dec 2009 17:33:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90993 invoked by uid 500); 17 Dec 2009 17:33:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90983 invoked by uid 99); 17 Dec 2009 17:33:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Dec 2009 17:33:36 +0000
X-ASF-Spam-Status: No, hits=-2.5 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [68.116.39.62] (HELO rectangular.com) (68.116.39.62)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Dec 2009 17:33:34 +0000
Received: from marvin by rectangular.com with local (Exim 4.63)
	(envelope-from <marvin@rectangular.com>)
	id 1NLKDv-0005Yx-DC; Thu, 17 Dec 2009 09:33:11 -0800
Date: Thu, 17 Dec 2009 09:33:11 -0800
To: java-user@lucene.apache.org
Cc: Toke Eskildsen <te@statsbiblioteket.dk>
Subject: Re: External sort
Message-ID: <20091217173311.GA21324@rectangular.com>
References: <1261053460.5731.4560.camel@pc286> <2E6A89A648463A4EBF093A9062C16683013998E5AE30@SBMAILBOX1.sb.statsbiblioteket.dk>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <2E6A89A648463A4EBF093A9062C16683013998E5AE30@SBMAILBOX1.sb.statsbiblioteket.dk>
User-Agent: Mutt/1.5.13 (2006-08-11)
From: Marvin Humphrey <marvin@rectangular.com>

On Thu, Dec 17, 2009 at 05:03:11PM +0100, Toke Eskildsen wrote:

> A third alternative would be to count the number of unique datetime-values
> and make a compressed representation, but that would make the creation of
> the order-array more complex.

This is what we're doing in Lucy/KinoSearch, though we prepare the ordinal
arrays at index time and mmap them at search time.

The provisional implementation has a problem, though.  We use a hash set to
perform uniquing, but when there are a lot of unique values, the memory
requirements of the SortWriter go very high.

Assume that we're sorting string data rather than date time values (so the
memory occupied by all those unique values is significant).  What algorithms
would you consider for performing the uniquing?

Marvin Humphrey


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 18 01:51:24 2009
Return-Path: <java-user-return-44158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72667 invoked from network); 18 Dec 2009 01:51:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Dec 2009 01:51:24 -0000
Received: (qmail 52433 invoked by uid 500); 18 Dec 2009 01:51:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52320 invoked by uid 500); 18 Dec 2009 01:51:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52309 invoked by uid 99); 18 Dec 2009 01:51:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Dec 2009 01:51:21 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of tangfulin@gmail.com designates 209.85.160.46 as permitted sender)
Received: from [209.85.160.46] (HELO mail-pw0-f46.google.com) (209.85.160.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Dec 2009 01:51:10 +0000
Received: by pwj16 with SMTP id 16so1947659pwj.5
        for <java-user@lucene.apache.org>; Thu, 17 Dec 2009 17:50:49 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=VneUYtL1L69BxZxVkP/DcuE6s2skSUaitEnPZFb/qA0=;
        b=v6L0NiC2LYOhNe87rQqSyas0LnwJBPUe4VDTTYl+IwvHEyucXtfjOZtWhNnKJP0dvO
         BM999o2QaR+jjhiDO3OBi/N4KfMWCi9LGdjMLhwvHH0B6EjEspzeIjSHqJPaM2FV03Wy
         /k8RVTP9MtHU4KtUM/4fBlCqphB33QpK9A6qc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=lTYF0DO7Ztf42PINiYl7sb1Kij7Z1bU0BWorgJtnlYsVAPmLPGPnsZPf0ssWvdevUN
         jDKCzRvUntp+TSzwBiprBWQwB/64hI/f4BNtu3a7Xf87NMXS/7kK1VckMcAJ0tBazD3W
         KDFk5sZY76E0JpzZMBeCnhxAAEmkbczHrlUkY=
MIME-Version: 1.0
Received: by 10.115.66.29 with SMTP id t29mr2193105wak.187.1261101049283; Thu, 
	17 Dec 2009 17:50:49 -0800 (PST)
In-Reply-To: <7d94dcde0912160628p228eb22ex1d06604a6ac713c1@mail.gmail.com>
References: <7d94dcde0912150526hdc3f9cev7a7368d4df5f06f8@mail.gmail.com>
	 <8f0ad1f30912150551v13fb0959vf3d011b2b969ea09@mail.gmail.com>
	 <7d94dcde0912150613x509e04f1s6c3927cf61d210c4@mail.gmail.com>
	 <8f0ad1f30912150619r40cfe55aj702dfbce86dbeb8@mail.gmail.com>
	 <7d94dcde0912150623w5fcb8914o2e13a2bb0ea707a9@mail.gmail.com>
	 <7d94dcde0912151919s5ec0fa40m968a94ff9d760529@mail.gmail.com>
	 <8f0ad1f30912151953y17c175e7n20ff02428e5eacad@mail.gmail.com>
	 <7d94dcde0912152043v76e1affdt86dec284494f7555@mail.gmail.com>
	 <359a92830912160605o4adf5d59r4f39fb8b88b43e66@mail.gmail.com>
	 <7d94dcde0912160628p228eb22ex1d06604a6ac713c1@mail.gmail.com>
Date: Fri, 18 Dec 2009 09:50:48 +0800
Message-ID: <99912d2d0912171750y67745937i30a835ba6451a9a3@mail.gmail.com>
Subject: Re: How to do alias(Pinyin) search in Lucene
From: fulin tang <tangfulin@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

another way to do this: pinyin4j

you can trans all Chinese words to pinyin form first, and index the
pinyin form as a field, then you can search on them

see: http://www.slideshare.net/tangfl/ss-2364878

in which we implement a pinyin search for our music search

2009/12/16 Weiwei Wang <ww.wang.cs@gmail.com>:
> Thanks Erick, I''ll take a carefull study of that
>
> 2009/12/16 Erick Erickson <erickerickson@gmail.com>
>
>> If your queries are still slow, make sure you're not measuring
>> the *first* query on a newly opened searcher. There are
>> other tips here that might be useful. These are general searching
>> tips complimentary to Robert's suggestions..
>>
>> http://wiki.apache.org/lucene-java/ImproveSearchingSpeed
>>
>> <http://wiki.apache.org/lucene-java/ImproveSearchingSpeed>HTH
>> Erick
>>
>> 2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>
>>
>> > Thanks Robert, a lot is learned from you:-)
>> >
>> > On Wed, Dec 16, 2009 at 11:53 AM, Robert Muir <rcmuir@gmail.com> wrote=
:
>> >
>> > > Hi, just one more thought for you.
>> > >
>> > > I think even more important than anything I said before, you should
>> > ensure
>> > > you implement reusableTokenStream in your analyzer.
>> > > this becomes a necessity if you are using expensive objects like thi=
s.
>> > >
>> > > 2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>
>> > >
>> > > > Finally, i make it run, however, it works so slow
>> > > >
>> > > > 2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>
>> > > >
>> > > > > got it, thanks, Robert
>> > > > >
>> > > > >
>> > > > > On Tue, Dec 15, 2009 at 10:19 PM, Robert Muir <rcmuir@gmail.com>
>> > > wrote:
>> > > > >
>> > > > >> =C2=A0if you have lucene 2.9 or 3.0 source code, just run patch=
 -p0 <
>> > > > >> /path/to/LUCENE-XXYY.patch from the lucene source code root
>> > > directory...
>> > > > >> it
>> > > > >> should create the necessary directory and files.
>> > > > >> then run 'ant' , in this case it should create a lucene-icu jar
>> file
>> > > in
>> > > > >> the
>> > > > >> build directory.
>> > > > >>
>> > > > >> the patch doesnt include the icu dependency itself so you need =
to
>> > get
>> > > > that
>> > > > >> jar file from www.icu-project.org and have it in your classpath
>> > also
>> > > > >>
>> > > > >> sorry for the trouble, hope to integrate some of this soon for =
a
>> > > future
>> > > > >> release.
>> > > > >>
>> > > > >> On Tue, Dec 15, 2009 at 9:13 AM, Weiwei Wang <
>> ww.wang.cs@gmail.com>
>> > > > >> wrote:
>> > > > >>
>> > > > >> > Yes, i found the patch file LUCENE-1488.patch and there's no =
icu
>> > > > >> directory
>> > > > >> > in my dowloaded contrib directory.
>> > > > >> >
>> > > > >> > I'm a rookie guy using patch, i'm currently in the contrib di=
r,
>> > > could
>> > > > >> > anybody tell me how to execute this patch command to generate
>> the
>> > > > >> relevant
>> > > > >> > dir and souce files?
>> > > > >> >
>> > > > >> > On Tue, Dec 15, 2009 at 9:51 PM, Robert Muir <rcmuir@gmail.co=
m>
>> > > > wrote:
>> > > > >> >
>> > > > >> > > look at the latest patch file attached to the issue, it sho=
uld
>> > > work
>> > > > >> with
>> > > > >> > > lucene 2.9 or greater (I think)
>> > > > >> > >
>> > > > >> > > 2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>
>> > > > >> > >
>> > > > >> > > > where can i find the source code?
>> > > > >> > > >
>> > > > >> > > > On Tue, Dec 15, 2009 at 9:40 PM, Robert Muir <
>> > rcmuir@gmail.com>
>> > > > >> wrote:
>> > > > >> > > >
>> > > > >> > > > > there is an icu transform tokenfilter in the patch here=
:
>> > > > >> > > > > http://issues.apache.org/jira/browse/LUCENE-1488
>> > > > >> > > > >
>> > > > >> > > > > =C2=A0 =C2=A0Transliterator pinyin =3D
>> > > > >> Transliterator.getInstance("Han-Latin");
>> > > > >> > > > > =C2=A0 =C2=A0Tokenizer tokenizer =3D new KeywordTokeniz=
er(new
>> > > > >> > StringReader("=E4=B8=AD=E5=9B=BD"));
>> > > > >> > > > > =C2=A0 =C2=A0ICUTransformFilter filter =3D new
>> > > ICUTransformFilter(tokenizer,
>> > > > >> > > pinyin);
>> > > > >> > > > > =C2=A0 =C2=A0assertTokenStreamContents(filter, new Stri=
ng[] { "zh=C5=8Dng
>> > > gu=C3=B3"
>> > > > }
>> > > > >> );
>> > > > >> > > > >
>> > > > >> > > > > note it will add tone marks and insert space between
>> > syllables
>> > > > by
>> > > > >> > > default
>> > > > >> > > > > if you do not want this, you need to do some cleanup.
>> > > > >> > > > >
>> > > > >> > > > > =C2=A0 =C2=A0Transliterator pinyin =3D
>> > > > Transliterator.getInstance("Han-Latin;
>> > > > >> > NFD;
>> > > > >> > > > > [[:NonspacingMark:][:Space:]] Remove");
>> > > > >> > > > > =C2=A0 =C2=A0Tokenizer tokenizer =3D new KeywordTokeniz=
er(new
>> > > > >> > StringReader("=E4=B8=AD=E5=9B=BD"));
>> > > > >> > > > > =C2=A0 =C2=A0ICUTransformFilter filter =3D new
>> > > ICUTransformFilter(tokenizer,
>> > > > >> > > pinyin);
>> > > > >> > > > > =C2=A0 =C2=A0assertTokenStreamContents(filter, new Stri=
ng[] {
>> > "zhongguo"
>> > > }
>> > > > >> );
>> > > > >> > > > >
>> > > > >> > > > >
>> > > > >> > > > > 2009/12/15 Weiwei Wang <ww.wang.cs@gmail.com>
>> > > > >> > > > >
>> > > > >> > > > > > Hi, guys,
>> > > > >> > > > > > =C2=A0 =C2=A0 I'm implementing a search engine based =
on Lucene for
>> > > > >> Chinese.
>> > > > >> > So
>> > > > >> > > I
>> > > > >> > > > > want
>> > > > >> > > > > > to support pinyin search as Google China do.
>> > > > >> > > > > >
>> > > > >> > > > > > e.g.
>> > > > >> > > > > > =C2=A0 =C2=A0=E2=80=9C=E4=B8=AD=E5=9B=BD=E2=80=9D =C2=
=A0means Chinese in English
>> > > > >> > > > > > =C2=A0 =C2=A0this word's pinyin input is "zhongguo"
>> > > > >> > > > > > The feature i want to implement is when user type
>> zhongguo
>> > > the
>> > > > >> > > results
>> > > > >> > > > > will
>> > > > >> > > > > > include documents containing "=E4=B8=AD=E5=9B=BD" or =
even Chinese
>> > > > >> > > > > >
>> > > > >> > > > > > Anybody here know how to achieve this?
>> > > > >> > > > > >
>> > > > >> > > > > > --
>> > > > >> > > > > > Weiwei Wang
>> > > > >> > > > > > Alex Wang
>> > > > >> > > > > > =E7=8E=8B=E5=B7=8D=E5=B7=8D
>> > > > >> > > > > > Room 403, Mengmin Wei Building
>> > > > >> > > > > > Computer Science Department
>> > > > >> > > > > > Gulou Campus of Nanjing University
>> > > > >> > > > > > Nanjing, P.R.China, 210093
>> > > > >> > > > > >
>> > > > >> > > > > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>> > > > >> > > > > >
>> > > > >> > > > >
>> > > > >> > > > >
>> > > > >> > > > >
>> > > > >> > > > > --
>> > > > >> > > > > Robert Muir
>> > > > >> > > > > rcmuir@gmail.com
>> > > > >> > > > >
>> > > > >> > > >
>> > > > >> > > >
>> > > > >> > > >
>> > > > >> > > > --
>> > > > >> > > > Weiwei Wang
>> > > > >> > > > Alex Wang
>> > > > >> > > > =E7=8E=8B=E5=B7=8D=E5=B7=8D
>> > > > >> > > > Room 403, Mengmin Wei Building
>> > > > >> > > > Computer Science Department
>> > > > >> > > > Gulou Campus of Nanjing University
>> > > > >> > > > Nanjing, P.R.China, 210093
>> > > > >> > > >
>> > > > >> > > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>> > > > >> > > >
>> > > > >> > >
>> > > > >> > >
>> > > > >> > >
>> > > > >> > > --
>> > > > >> > > Robert Muir
>> > > > >> > > rcmuir@gmail.com
>> > > > >> > >
>> > > > >> >
>> > > > >> >
>> > > > >> >
>> > > > >> > --
>> > > > >> > Weiwei Wang
>> > > > >> > Alex Wang
>> > > > >> > =E7=8E=8B=E5=B7=8D=E5=B7=8D
>> > > > >> > Room 403, Mengmin Wei Building
>> > > > >> > Computer Science Department
>> > > > >> > Gulou Campus of Nanjing University
>> > > > >> > Nanjing, P.R.China, 210093
>> > > > >> >
>> > > > >> > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>> > > > >> >
>> > > > >>
>> > > > >>
>> > > > >>
>> > > > >> --
>> > > > >> Robert Muir
>> > > > >> rcmuir@gmail.com
>> > > > >>
>> > > > >
>> > > > >
>> > > > >
>> > > > > --
>> > > > > Weiwei Wang
>> > > > > Alex Wang
>> > > > > =E7=8E=8B=E5=B7=8D=E5=B7=8D
>> > > > > Room 403, Mengmin Wei Building
>> > > > > Computer Science Department
>> > > > > Gulou Campus of Nanjing University
>> > > > > Nanjing, P.R.China, 210093
>> > > > >
>> > > > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>> > > > >
>> > > >
>> > > >
>> > > >
>> > > > --
>> > > > Weiwei Wang
>> > > > Alex Wang
>> > > > =E7=8E=8B=E5=B7=8D=E5=B7=8D
>> > > > Room 403, Mengmin Wei Building
>> > > > Computer Science Department
>> > > > Gulou Campus of Nanjing University
>> > > > Nanjing, P.R.China, 210093
>> > > >
>> > > > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>> > > >
>> > >
>> > >
>> > >
>> > > --
>> > > Robert Muir
>> > > rcmuir@gmail.com
>> > >
>> >
>> >
>> >
>> > --
>> > Weiwei Wang
>> > Alex Wang
>> > =E7=8E=8B=E5=B7=8D=E5=B7=8D
>> > Room 403, Mengmin Wei Building
>> > Computer Science Department
>> > Gulou Campus of Nanjing University
>> > Nanjing, P.R.China, 210093
>> >
>> > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>> >
>>
>
>
>
> --
> Weiwei Wang
> Alex Wang
> =E7=8E=8B=E5=B7=8D=E5=B7=8D
> Room 403, Mengmin Wei Building
> Computer Science Department
> Gulou Campus of Nanjing University
> Nanjing, P.R.China, 210093
>
> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>



--=20
=E6=A2=A6=E7=9A=84=E5=BC=80=E5=A7=8B=E6=8C=A3=E6=89=8E=E4=BA=8E=E5=9F=8E=E5=
=B8=82=E7=9A=84=E8=BE=B9=E7=BC=98
=E5=BF=83=E7=9A=84=E8=BF=9C=E6=96=B9=E6=89=A7=E7=9D=80=E5=9C=A8=E8=84=9A=E6=
=AD=A5=E7=9A=84=E7=9E=AC=E9=97=B4
=E6=88=91=E7=9A=84=E5=AE=BF=E5=91=BD=E5=9F=8B=E8=97=8F=E4=BA=86=E5=AF=82=E5=
=AF=9E=E7=9A=84=E6=B0=B8=E8=BF=9C

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 18 02:28:45 2009
Return-Path: <java-user-return-44159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93300 invoked from network); 18 Dec 2009 02:28:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Dec 2009 02:28:44 -0000
Received: (qmail 79930 invoked by uid 500); 18 Dec 2009 02:28:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79832 invoked by uid 500); 18 Dec 2009 02:28:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79822 invoked by uid 99); 18 Dec 2009 02:28:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Dec 2009 02:28:42 +0000
X-ASF-Spam-Status: No, hits=-2.5 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [68.116.39.62] (HELO rectangular.com) (68.116.39.62)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Dec 2009 02:28:35 +0000
Received: from marvin by rectangular.com with local (Exim 4.63)
	(envelope-from <marvin@rectangular.com>)
	id 1NLSZh-0005ux-MG; Thu, 17 Dec 2009 18:28:13 -0800
Date: Thu, 17 Dec 2009 18:28:13 -0800
To: java-user@lucene.apache.org
Subject: Re: External sort
Message-ID: <20091218022813.GB22367@rectangular.com>
References: <1261053460.5731.4560.camel@pc286> <2E6A89A648463A4EBF093A9062C16683013998E5AE30@SBMAILBOX1.sb.statsbiblioteket.dk> <20091217173311.GA21324@rectangular.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20091217173311.GA21324@rectangular.com>
User-Agent: Mutt/1.5.13 (2006-08-11)
From: Marvin Humphrey <marvin@rectangular.com>

On Thu, Dec 17, 2009 at 09:33:11AM -0800, Marvin Humphrey wrote:
> On Thu, Dec 17, 2009 at 05:03:11PM +0100, Toke Eskildsen wrote:
> 
> > A third alternative would be to count the number of unique datetime-values
> > and make a compressed representation, but that would make the creation of
> > the order-array more complex.
> 
> This is what we're doing in Lucy/KinoSearch, though we prepare the ordinal
> arrays at index time and mmap them at search time.
> 
> The provisional implementation has a problem, though.  We use a hash set to
> perform uniquing, but when there are a lot of unique values, the memory
> requirements of the SortWriter go very high.
> 
> Assume that we're sorting string data rather than date time values (so the
> memory occupied by all those unique values is significant).  What algorithms
> would you consider for performing the uniquing?

I have received private replies which have helped to shape the following design:

Instead of storing an object in memory for each unique value, we'll serialize
values to a file and store 64-bit file pointer offsets.  The memory cost as we
add documents will be...

   sizeof(int64_t) * number_of_documents_in_segment * number_of_sortable_fields

When it comes time to finish the segment, we'll loop through the fields one at
a time.  On each loop, we'll create a sorted array of document numbers using
the values we find at the file pointers.  There will be an awful lot of file
seeking and deserialization costs during the sort to achieve the comparisons,
but that's the price we pay for a scalable and general algorithm.

There will be only one file in which we store all serialized values for all
fields.  We'd probably get better locality with one file per field, but we
have to be conservative about file descriptors.

As an optimization for fields with low cardinality, we'll keep a 32-element
LRU[1] for each field in which we cache unique values.  That way, we won't
spend a whole lot of IO e.g. writing "yes" and "no" over and over.

Once we have the sorted array of document numbers, we can use it to create the
compressed ords array and the final stack of unique values.  To perform the
final uniquing, we'll have to compare each doc's value to the last and
determine whether the value has actually changed.  That means yet more seeking
and deserialization costs we don't have with the pure hash set uniquing we use
now -- but it can't be helped since we will often have multiple copies of the
same value serialized at different places within the temp values file.

Thoughts, improvements?  Hopefully this gives the original poster some ideas
about how you might go about sorting externally within Lucene as well...

Marvin Humphrey

[1] For now it will actually be a faked up LRU: a hash table that we empty
every time it grows to 32 elements.  If and when we get around to writing a
real LRU class for Lucy, we'll use that instead.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 18 06:44:19 2009
Return-Path: <java-user-return-44160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78369 invoked from network); 18 Dec 2009 06:44:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Dec 2009 06:44:19 -0000
Received: (qmail 73815 invoked by uid 500); 18 Dec 2009 06:44:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73649 invoked by uid 500); 18 Dec 2009 06:44:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73639 invoked by uid 99); 18 Dec 2009 06:44:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Dec 2009 06:44:14 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Dec 2009 06:44:06 +0000
Received: from SBMAILBOX1.sb.statsbiblioteket.dk ([10.150.5.1]) by
 sbexch03.sb.statsbiblioteket.dk ([10.150.5.3]) with mapi; Fri, 18 Dec 2009
 07:43:44 +0100
From: Toke Eskildsen <te@statsbiblioteket.dk>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 18 Dec 2009 07:42:25 +0100
Subject: RE: External sort
Thread-Topic: External sort
Thread-Index: Acp/PwvDma9Jl4WvRUKH8k1ipZinZQAbjaAB
Message-ID: <2E6A89A648463A4EBF093A9062C16683013998E5AE35@SBMAILBOX1.sb.statsbiblioteket.dk>
References: <1261053460.5731.4560.camel@pc286>
 <2E6A89A648463A4EBF093A9062C16683013998E5AE30@SBMAILBOX1.sb.statsbiblioteket.dk>,<20091217173311.GA21324@rectangular.com>
In-Reply-To: <20091217173311.GA21324@rectangular.com>
Accept-Language: en-US, da-DK
Content-Language: en-GB
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US, da-DK
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

(reposted to the list as I originally sent my reply to only Marvin by mista=
ke)

From: Marvin Humphrey [marvin@rectangular.com]
> We use a hash set to perform uniquing, but when there are a lot of unique
> values, the memory requirements of the SortWriter go very high.
>
> Assume that we're sorting string data rather than date time values (so th=
e
> memory occupied by all those unique values is significant).  What algorit=
hms
> would you consider for performing the uniquing?

We do have a structure that is comparable to the above: An ordered list of
Strings, where updates to a Lucene index requires updates to the list. We d=
o
this by having a long[] with collator-sorted offsets into a file with all t=
he Strings
in insertion order.

When a new String is considered, existence is checked in O(log(n)) by
binary search. If it is new, it is appended to the file and the offset inse=
rted
into the offset-array (arrayCopy). That is only usable for a relatively sma=
ll
amount of inserts, due to the arrayCopy. SSDs are very helpful for
String lookup performance here.

For building the initial list, we use the terms for a given field, so we kn=
ow that
they are unique: We Append them all in a file and keep track of the offsets=
,
then sort the offset-list based on what they're pointing at. By using cachi=
ng
and mergesort (heapsort _kills_ performance in this scenario, as there is n=
o
locality), it performs fairly well.
(I'm lying a little about our setup, for sake of brevity)
Memory usage excl. caching is 8 bytes * #Strings + housekeeping.

By adding another level of indirection and storing the offsets as a file an=
d
sort a list of pointers to the offsets (argh), memory requirements can be
dropped to 4 bytes * # Strings. That doubles the number of seeks, so I
would only recommend it with SSDs and in tight spots.

We do have some code for duplicate reduction (long story): When the list
is sorted, step through the offsets and compare the Strings for the entries
at position x and x+1. If the Strings are equal, set offset[x+1] =3D x.
When the iteration has finished, the offsets only points to unique Strings
and the Strings-file contains some non-referenced entries, that can be
cleaned up by writing a new Strings-file.


Somewhat related, I'm experimenting with a sliding-window approach to
sorting Lucene terms, which might be usable in your scenario. It is a fairl=
y
clean trade-off between memory and processing time. It is outlined in the
thread "heap memory issues when sorting by a string field" and it should
be fairly straight-forward to adapt the algorithm to remove duplicates.
The main requirement is that it is possible to iterate over the Strings
multiple times.


In general, I find that the memory-killer in these cases tend to be all the
wrapping and not the data themselves. A String has 38+ bytes of
overhead and if you're mainly using ASCII, Java's 2-byte char sure
means a lot of always-0-bits in memory. I don't know if it is feasible, but
making something like
class LittleString {
  private byte[] utf8;
  LittleString(String s) {
    utf8 =3D s.getBytes("utf-8");
  }
  public int hashCode() {
    ...generate from utf8
  }
  public String toString() {
    return new String(utf8, "utf-8");
  }
  public boolean equals(Object o) {
    if (!(o instanceof LittleString) return false;
    return Arrays.equals(utf8, ((LittleString)o).utf8);
  }
}
and storing that in your HashSet instead of the Strings directly ought
to cut a fair amount of your memory usage. I don't know how much
it would cost in performance though and the HashSet structure itself
isn't free.

Regards,
Toke Eskildsen=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 18 10:13:23 2009
Return-Path: <java-user-return-44161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38988 invoked from network); 18 Dec 2009 10:13:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Dec 2009 10:13:22 -0000
Received: (qmail 8339 invoked by uid 500); 18 Dec 2009 10:13:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8250 invoked by uid 500); 18 Dec 2009 10:13:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8240 invoked by uid 99); 18 Dec 2009 10:13:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Dec 2009 10:13:19 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Dec 2009 10:13:10 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NLZpJ-0005Tt-P5
	for java-user@lucene.apache.org; Fri, 18 Dec 2009 02:12:49 -0800
Message-ID: <26841521.post@talk.nabble.com>
Date: Fri, 18 Dec 2009 02:12:49 -0800 (PST)
From: kdev <v.verroios@di.uoa.gr>
To: java-user@lucene.apache.org
Subject: Re: Scoring formula - Average number of terms in IDF
In-Reply-To: <9ac0c6aa0912170807x40542ef0n5d527478197f20d9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: v.verroios@di.uoa.gr
References: <26282578.post@talk.nabble.com> <26792364.post@talk.nabble.com> <9ac0c6aa0912170615k2cd09402pbf654a1be5f95972@mail.gmail.com> <26830145.post@talk.nabble.com> <9ac0c6aa0912170807x40542ef0n5d527478197f20d9@mail.gmail.com>


The avg is used only in the idf method of the Similarity class. So I guess
there is workaround for what I want to do. Can you give me a reference, on
lucene doc, on how a IndexWriter uses the provided Similarity class?

Thanks again for your time and your help.


Michael McCandless-2 wrote:
> 
> IndexWriter uses Similarity.lengthNorm to create a norm (boost for the
> field, per document) based on the length of the field... it doesn't
> invoke the other methods on Similarity.
> 
> Are you saying you need to know the avg across the whole corpus before
> computing that boost?
> 
> Mike
> 
> On Thu, Dec 17, 2009 at 10:50 AM, kdev <v.verroios@di.uoa.gr> wrote:
>>
>> If I follow your approach, and produce the avg(outside of Lucene) while I
>> 'm
>> building the index(due to performance reasons I can't wait for all the
>> documents to arrive before indexing them) for a collection, the avg will
>> be
>> ready only when all the documents of the collection are indexed.
>> Lucene states that the new similarity class must be set in
>> IndexWriter.setSimilarity(), and be used while I build the index, and in
>> this time the avg isn't ready yet. Is there a way to overcome this? And
>> if
>> not calculating the score while the index is being created, and only when
>> searching the index, what will the consequence in performance be?
>>
>> (Mike thank you about your response)
>>
>>
>> Michael McCandless-2 wrote:
>>>
>>> There have been some discussions, here:
>>>
>>>     https://issues.apache.org/jira/browse/LUCENE-2091
>>>
>>> about how Lucene could track avg field/doc length, but they are just
>>> brainstorming type discussions now.
>>>
>>> You could always do something approximate outside of Lucene?  EG, make
>>> a TokenFilter that counts how many tokens are produced for each
>>> field/doc, aggregate & store that yourself, and use it in your
>>> similarity impl?
>>>
>>> Mike
>>>
>>> On Tue, Dec 15, 2009 at 5:04 AM, kdev <v.verroios@di.uoa.gr> wrote:
>>>>
>>>> any ideas please?
>>>> --
>>>> View this message in context:
>>>> http://old.nabble.com/Scoring-formula---Average-number-of-terms-in-IDF-tp26282578p26792364.html
>>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> --
>> View this message in context:
>> http://old.nabble.com/Scoring-formula---Average-number-of-terms-in-IDF-tp26282578p26830145.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

-- 
View this message in context: http://old.nabble.com/Scoring-formula---Average-number-of-terms-in-IDF-tp26282578p26841521.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 18 11:47:53 2009
Return-Path: <java-user-return-44162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83513 invoked from network); 18 Dec 2009 11:47:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Dec 2009 11:47:53 -0000
Received: (qmail 13064 invoked by uid 500); 18 Dec 2009 11:47:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12994 invoked by uid 500); 18 Dec 2009 11:47:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12984 invoked by uid 99); 18 Dec 2009 11:47:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Dec 2009 11:47:50 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [202.86.5.93] (HELO smtp106.mail.in.yahoo.com) (202.86.5.93)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 18 Dec 2009 11:47:40 +0000
Received: (qmail 81185 invoked from network); 18 Dec 2009 11:47:18 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:x-mimeole;
  b=yu3LekysU3xHdeVErotjXKpmMss50/zDqu/pyzGH8TESsLidWp5CGpbCshOJzd3wZC0mRaCq2/6q2ioeNJrtdMkRVMhB5chvn5tPJLfaZQRZTMG9NgRRfQmmpSbREa6ztzKla4Ubw5vpcmZ5eWAdc5XU4XqdcqHLS4o1Ak3YJbY=  ;
Received: from  (emailgane@203.98.194.130 with login)
        by smtp106.mail.in.yahoo.com with SMTP; 18 Dec 2009 17:17:16 +0530 IST
X-Yahoo-SMTP: JObyHkuswBBrNSLZp.Ycd7Boqpr_GQ--
X-YMail-OSG: MpXRPfkVM1kE5xPm.L7QpVm_gRF6mXg.gRgkK1LivJB9fW635HiOYqwf9XeOOxekNtW2Lh4eHsZ_PHYeOr9Iz2P0di5jeckSo9NxyyRZVYe4gMsHMmf3X2fvT8FNpk0USYIj6cEyRajgBwnZs_IUamlZ7iIZ8BuDYOrE1c3Y1xt8PR9s_zLRjMacux_veVqpYQV4JJudwVlQAl6kRyfhw51mZcA3YtD04sqZHp0rpGwz3Wvq.bAYUV_Vl00v3Ro1n1Ma8pwGp1G8d6o-
X-Yahoo-Newman-Property: ymail-3
Message-ID: <193201ca7fd7$d8baafd0$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>, "Toke Eskildsen" <te@statsbiblioteket.dk>
References: <008701ca7ee4$e3598ae0$710bc30a@sv.us.sonicwall.com>,<1261053460.5731.4560.camel@pc286> <2E6A89A648463A4EBF093A9062C16683013998E5AE30@SBMAILBOX1.sb.statsbiblioteket.dk>
Subject: Re: External sort
Date: Fri, 18 Dec 2009 17:17:12 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
x-mimeole: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for all your ideas. I was expecting the sorting related fix in =
3.0 but hopefully it would be great, if it is get in to 3.1.

I am using Integer for datetime. As the data grows, I am hitting the =
upper limit. As my application is part of the product, used in different =
environment, We cannot request all customers to increase the memory. We =
need to run in less and find some other way out.

One option most of them in the group discussed about using EHcache.=20

Let consider the below data get indexed. unique_id is the id generated =
for every record.
unique_id,  field1,  field2,  date_time

In Ehcache, Consider I am storing
unique_id, date_time

How could i merge the results from Lucene and Ehcache? Do I need to =
fetch all the search results and compare it against the EHcache results =
and decide (using FieldComparatorSource). Could some one help me how to =
go about with it. Consider the data is static and there will be updates, =
modification but the uniqueid and date_time is not going to change. I =
cannot use docid from lucene as it is changing after updates.

(future thought / research) One more thought, Is there any way to write =
the index in sorted order, May be while merging. Assign docid by sorting =
the selected field. This way we could achieve the sorting by zero RAM =
utilization. Mostly the sorted field is fixed for all application. Just =
some interest to know these things....

Regards
Ganesh

----- Original Message -----=20
From: "Toke Eskildsen" <te@statsbiblioteket.dk>
To: <java-user@lucene.apache.org>; "Toke Eskildsen" =
<te@statsbiblioteket.dk>
Sent: Thursday, December 17, 2009 9:33 PM
Subject: RE: External sort


Sigh... Forest for the trees, Toke.

The date time represented as an integer _is_ the order and at the same =
time a global external representation. No need to jump through all the =
hoops I made. I had my mind full of a more general solution to the =
memory problem with sort.


Instead of the order-array being a long[] with order and datetime, it =
should be just an int[] with datetime. The FieldCacheImpl does this for =
INT-sorts , so there's no need for extra code if you just store the =
datetime as an integer (something like Integer.toString(datetimeAsInt) =
for the field-value) and use SortField(fieldname, SortField.INT) to sort =
with.

If you cannot store the datetime as an integer (e.g. if you don't =
control the indexing), you can use the FieldCacheImpl with a custom =
int-parser that translates your datetime representation to int.

The internal representation takes 4 bytes/document. If you need to go =
lower than that, I'll say you have a very uncommon setup.

It can be done by making custom code and storing the order-array on =
disk, but access-speed would suffer tremendously for searches with =
millions of hits. An alternative would be to reduce the granularity of =
the datetime and use SortField.SHORT or ShortField.BYTE. A third =
alternative would be to count the number of unique datetime-values and =
make a compressed representation, but that would make the creation of =
the order-array more complex.
---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 18 11:59:24 2009
Return-Path: <java-user-return-44163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88179 invoked from network); 18 Dec 2009 11:59:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Dec 2009 11:59:24 -0000
Received: (qmail 24024 invoked by uid 500); 18 Dec 2009 11:59:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23945 invoked by uid 500); 18 Dec 2009 11:59:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23935 invoked by uid 99); 18 Dec 2009 11:59:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Dec 2009 11:59:22 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Dec 2009 11:59:13 +0000
Received: by ywh15 with SMTP id 15so3163263ywh.5
        for <java-user@lucene.apache.org>; Fri, 18 Dec 2009 03:58:51 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.120.8 with SMTP id s8mr6036062ybc.185.1261137531346; Fri, 
	18 Dec 2009 03:58:51 -0800 (PST)
In-Reply-To: <26841521.post@talk.nabble.com>
References: <26282578.post@talk.nabble.com> <26792364.post@talk.nabble.com>
	 <9ac0c6aa0912170615k2cd09402pbf654a1be5f95972@mail.gmail.com>
	 <26830145.post@talk.nabble.com>
	 <9ac0c6aa0912170807x40542ef0n5d527478197f20d9@mail.gmail.com>
	 <26841521.post@talk.nabble.com>
Date: Fri, 18 Dec 2009 06:58:51 -0500
Message-ID: <9ac0c6aa0912180358g57b73a2bo15b8ee6c9e006884@mail.gmail.com>
Subject: Re: Scoring formula - Average number of terms in IDF
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

I'm not sure this specific detail (how IW uses Similarity) is
documented -- best "documentation" is the source code ;)

Have a look at oal.index.NormsWriterPerField.  That's where the
default indexing chain asks Similarity to create the norm.

Mike

On Fri, Dec 18, 2009 at 5:12 AM, kdev <v.verroios@di.uoa.gr> wrote:
>
> The avg is used only in the idf method of the Similarity class. So I gues=
s
> there is workaround for what I want to do. Can you give me a reference, o=
n
> lucene doc, on how a IndexWriter uses the provided Similarity class?
>
> Thanks again for your time and your help.
>
>
> Michael McCandless-2 wrote:
>>
>> IndexWriter uses Similarity.lengthNorm to create a norm (boost for the
>> field, per document) based on the length of the field... it doesn't
>> invoke the other methods on Similarity.
>>
>> Are you saying you need to know the avg across the whole corpus before
>> computing that boost?
>>
>> Mike
>>
>> On Thu, Dec 17, 2009 at 10:50 AM, kdev <v.verroios@di.uoa.gr> wrote:
>>>
>>> If I follow your approach, and produce the avg(outside of Lucene) while=
 I
>>> 'm
>>> building the index(due to performance reasons I can't wait for all the
>>> documents to arrive before indexing them) for a collection, the avg wil=
l
>>> be
>>> ready only when all the documents of the collection are indexed.
>>> Lucene states that the new similarity class must be set in
>>> IndexWriter.setSimilarity(), and be used while I build the index, and i=
n
>>> this time the avg isn't ready yet. Is there a way to overcome this? And
>>> if
>>> not calculating the score while the index is being created, and only wh=
en
>>> searching the index, what will the consequence in performance be?
>>>
>>> (Mike thank you about your response)
>>>
>>>
>>> Michael McCandless-2 wrote:
>>>>
>>>> There have been some discussions, here:
>>>>
>>>> =A0 =A0 https://issues.apache.org/jira/browse/LUCENE-2091
>>>>
>>>> about how Lucene could track avg field/doc length, but they are just
>>>> brainstorming type discussions now.
>>>>
>>>> You could always do something approximate outside of Lucene? =A0EG, ma=
ke
>>>> a TokenFilter that counts how many tokens are produced for each
>>>> field/doc, aggregate & store that yourself, and use it in your
>>>> similarity impl?
>>>>
>>>> Mike
>>>>
>>>> On Tue, Dec 15, 2009 at 5:04 AM, kdev <v.verroios@di.uoa.gr> wrote:
>>>>>
>>>>> any ideas please?
>>>>> --
>>>>> View this message in context:
>>>>> http://old.nabble.com/Scoring-formula---Average-number-of-terms-in-ID=
F-tp26282578p26792364.html
>>>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> --
>>> View this message in context:
>>> http://old.nabble.com/Scoring-formula---Average-number-of-terms-in-IDF-=
tp26282578p26830145.html
>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> --
> View this message in context: http://old.nabble.com/Scoring-formula---Ave=
rage-number-of-terms-in-IDF-tp26282578p26841521.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 18 13:40:42 2009
Return-Path: <java-user-return-44164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24057 invoked from network); 18 Dec 2009 13:40:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Dec 2009 13:40:41 -0000
Received: (qmail 66897 invoked by uid 500); 18 Dec 2009 13:40:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66811 invoked by uid 500); 18 Dec 2009 13:40:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66801 invoked by uid 99); 18 Dec 2009 13:40:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Dec 2009 13:40:39 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Dec 2009 13:40:31 +0000
Received: from [172.18.225.244] (172.18.225.244) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.1.393.1; Fri, 18 Dec 2009 14:40:10 +0100
Subject: Re: External sort
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <193201ca7fd7$d8baafd0$710bc30a@sv.us.sonicwall.com>
References: <008701ca7ee4$e3598ae0$710bc30a@sv.us.sonicwall.com>
	 ,<1261053460.5731.4560.camel@pc286>
	 <2E6A89A648463A4EBF093A9062C16683013998E5AE30@SBMAILBOX1.sb.statsbiblioteket.dk>
	 <193201ca7fd7$d8baafd0$710bc30a@sv.us.sonicwall.com>
Content-Type: text/plain; charset="UTF-8"
Organization: Statsbiblioteket
Date: Fri, 18 Dec 2009 14:40:28 +0100
Message-ID: <1261143628.5731.4682.camel@pc286>
MIME-Version: 1.0
X-Mailer: Evolution 2.28.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, 2009-12-18 at 12:47 +0100, Ganesh wrote:
> I am using Integer for datetime. As the data grows, I am hitting the 
> upper limit.

Could you give us some numbers? Document count, index size in GB, amount
of RAM available for Lucene?

> One option most of them in the group discussed about using EHcache. 
> 
> Let consider the below data get indexed. unique_id is the id 
> generated for every record. unique_id,  field1,  field2,  date_time
> 
> In Ehcache, Consider I am storing
> unique_id, date_time
> 
> How could i merge the results from Lucene and Ehcache? Do I need to 
> fetch all the search results and compare it against the EHcache
> results and decide (using FieldComparatorSource).

As you are storing the date_time in the index, you don't win anything by
caching the values externally: Reading the unique_id needed for lookup
in the Ehcache takes just as long as reading the date_time directly.

> (future thought / research) One more thought, Is there any way to 
> write the index in sorted order, May be while merging. Assign docid
> by sorting the selected field.

You cannot control the docID that way, but Lucene keeps documents in
index order, so you could do this by sorting your data before index
build.

You're touching on a recurring theme here, as coordination with external
data-handling could be done very efficiently if Lucene provided a
persistent id as a first-class attribute for documents. The problem is
that it would require a lot of changes to the API and that it would mean
an additional non-optional overhead for all Lucene users. I haven't kept
track on enough threads on the developer-list, so a better solution to
the problem might have been found.

Regards,
Toke Eskildsen


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 18 14:09:24 2009
Return-Path: <java-user-return-44165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36620 invoked from network); 18 Dec 2009 14:09:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Dec 2009 14:09:24 -0000
Received: (qmail 7470 invoked by uid 500); 18 Dec 2009 14:09:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7374 invoked by uid 500); 18 Dec 2009 14:09:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7364 invoked by uid 99); 18 Dec 2009 14:09:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Dec 2009 14:09:22 +0000
X-ASF-Spam-Status: No, hits=-2.1 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.221.203] (HELO mail-qy0-f203.google.com) (209.85.221.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Dec 2009 14:09:13 +0000
Received: by qyk41 with SMTP id 41so1504407qyk.29
        for <java-user@lucene.apache.org>; Fri, 18 Dec 2009 06:08:53 -0800 (PST)
Received: by 10.229.59.203 with SMTP id m11mr1080684qch.94.1261145333181;
        Fri, 18 Dec 2009 06:08:53 -0800 (PST)
Received: from ?192.168.0.101? ([206.80.251.146])
        by mx.google.com with ESMTPS id 21sm2289208qyk.4.2009.12.18.06.08.52
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 18 Dec 2009 06:08:52 -0800 (PST)
Message-ID: <4B2B8CF6.4080004@polymtl.ca>
Date: Fri, 18 Dec 2009 09:08:54 -0500
From: "=?ISO-8859-1?Q?Fran=E7ois_Eric?=" <francois.eric@jarca.ca>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Query joining 2 indexes
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit

Hello,

I have a performance problem and would need expert advice on how to go 
about fixing it:

I currently have 2 indexes: Daily and Hourly.  The Daily index contains 
about 1,000,000 documents and my Hourly index approximately: 24,000,000 
documents.  My Daily index contains many fields and some of them are IDs 
to my Hourly Index.
What I want to do is fetch data in one request (if possible).
Right now I do it in many requests:
1- Get the matching Daily documents (say it returns 500 documents)
2- For each of these documents, locate the Hourly Index Id and fetch it.

Therefore I make 501 requests to lucene.  This causes some performance 
issues I guess because of the overhead to  making a request to Lucene.

Is it possible to do this in 1 request?  I'm thinking no because I'm not 
sure what the result set would be but maybe I'm missing something.

If not I guess it would be possible to build a query with my 500 hourly 
ids and make a OR between them to make it in 2 requests....but then I 
have to find the matching documents.  Will this overflow if I have 50000 
ids in my query?

Anyway, I just want advice on how one would address this situation.

Thank you very much,

Franois

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 18 14:52:53 2009
Return-Path: <java-user-return-44166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55899 invoked from network); 18 Dec 2009 14:52:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Dec 2009 14:52:53 -0000
Received: (qmail 62357 invoked by uid 500); 18 Dec 2009 14:52:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62282 invoked by uid 500); 18 Dec 2009 14:52:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62272 invoked by uid 99); 18 Dec 2009 14:52:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Dec 2009 14:52:50 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.219.225 as permitted sender)
Received: from [209.85.219.225] (HELO mail-ew0-f225.google.com) (209.85.219.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Dec 2009 14:52:44 +0000
Received: by ewy25 with SMTP id 25so3817190ewy.5
        for <java-user@lucene.apache.org>; Fri, 18 Dec 2009 06:52:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=yWNzP2AMex54MSE7SZPkxgL3R0v7w40MYohbD13bDTE=;
        b=bVxRTU0l6je1+Vt16lGl5gyPrpytBdEeVgATq+RM/tyKCCbGLC4apzl8W2CPl5IAWI
         JwBhf2voRGjZOrydpf2YDW82wHZ+jLkSwAaQX8hjvVfvwS8U/lF5Iy0yHwam6aosdqOi
         tNxYlBorAyhzhw6476XAVTkpNJT/6rioxBokY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=vhzQ1BhFH0l5YJG/lvgr7WVpudiZO1Z3Ioil4TkOdti8h9DlQt3P59y1tSGxgPxHl7
         qKdCsMexQyP5KHOWiHsebmovVD4u3OoVLIxmKUuF1IBBCZ47gf+WvjEWJFSyKg9ApTSV
         w1qhqNdX2APFAX31vpJ8+L7Q2XeedZl3qtQDI=
MIME-Version: 1.0
Received: by 10.216.91.66 with SMTP id g44mr1429400wef.121.1261147942475; Fri, 
	18 Dec 2009 06:52:22 -0800 (PST)
In-Reply-To: <4B2B8CF6.4080004@polymtl.ca>
References: <4B2B8CF6.4080004@polymtl.ca>
Date: Fri, 18 Dec 2009 09:52:22 -0500
Message-ID: <359a92830912180652p40ab2c50y6e3601b2fc00b1e2@mail.gmail.com>
Subject: Re: Query joining 2 indexes
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d63f531ed822047b01e376

--0016e6d63f531ed822047b01e376
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Well, making a large OR clause is definitely more efficient than making
N different requests, but you would have to search the results. It doesn't
sound very performant.

Could you go to 50,000 ids? yes, but you have to fiddle with
setMaxClauseCount
because Lucene defaults to a max of 1,024.

There's no way I know of to emulate a DB join. Usually, whenever I try
the answer is to flatten my data but I don't see a good way to do that
in this case.

Hmmm, what do you think would happen if you opened an IndexReader
into your Hourly index straight from your Daily query? Something like:

IndexReader irHourly =3D <open index reader to Hourly>.
for (each hit in Daily) {
    for (each id in this Hourly doc) {
         Document doc irHourly.doc(<id in hit>);
         addToResponse(doc); // your method here.....
    }
}


You *probably* want to keep the Hourly reader open between requests, but
since the above isn't searching, you *might* be able to open it each time.
I'd
go for keeping it open between requests if at all possible.

And here's a wild and crazy idea. Remember that Lucene documents don't
require that *any* fields be in common. It might make your management
easier if you *combined* the indexes. Crudely, prefix each Daily field with
"D_" and each hourly field with "H_" and put 'em all in the same index. I'm
not claiming that's a good solution in your case, but I thought I'd mention
it
as a possibility. You still can't do joins on them though.....

Erick



On Fri, Dec 18, 2009 at 9:08 AM, Fran=E7ois Eric <francois.eric@jarca.ca>wr=
ote:

> Hello,
>
> I have a performance problem and would need expert advice on how to go
> about fixing it:
>
> I currently have 2 indexes: Daily and Hourly.  The Daily index contains
> about 1,000,000 documents and my Hourly index approximately: 24,000,000
> documents.  My Daily index contains many fields and some of them are IDs =
to
> my Hourly Index.
> What I want to do is fetch data in one request (if possible).
> Right now I do it in many requests:
> 1- Get the matching Daily documents (say it returns 500 documents)
> 2- For each of these documents, locate the Hourly Index Id and fetch it.
>
> Therefore I make 501 requests to lucene.  This causes some performance
> issues I guess because of the overhead to  making a request to Lucene.
>
> Is it possible to do this in 1 request?  I'm thinking no because I'm not
> sure what the result set would be but maybe I'm missing something.
>
> If not I guess it would be possible to build a query with my 500 hourly i=
ds
> and make a OR between them to make it in 2 requests....but then I have to
> find the matching documents.  Will this overflow if I have 50000 ids in m=
y
> query?
>
> Anyway, I just want advice on how one would address this situation.
>
> Thank you very much,
>
> Fran=E7ois
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6d63f531ed822047b01e376--

From java-user-return-44167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 18 16:43:20 2009
Return-Path: <java-user-return-44167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89449 invoked from network); 18 Dec 2009 16:43:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Dec 2009 16:43:19 -0000
Received: (qmail 60720 invoked by uid 500); 18 Dec 2009 16:43:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60630 invoked by uid 500); 18 Dec 2009 16:43:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60619 invoked by uid 99); 18 Dec 2009 16:43:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Dec 2009 16:43:17 +0000
X-ASF-Spam-Status: No, hits=0.1 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Dec 2009 16:43:09 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NLfuj-0002by-4V
	for java-user@lucene.apache.org; Fri, 18 Dec 2009 08:42:49 -0800
Message-ID: <26846129.post@talk.nabble.com>
Date: Fri, 18 Dec 2009 08:42:49 -0800 (PST)
From: frer <francois.eric@polymtl.ca>
To: java-user@lucene.apache.org
Subject: Re: Query joining 2 indexes
In-Reply-To: <359a92830912180652p40ab2c50y6e3601b2fc00b1e2@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: francois.eric@polymtl.ca
References: <4B2B8CF6.4080004@polymtl.ca> <359a92830912180652p40ab2c50y6e3601b2fc00b1e2@mail.gmail.com>


Thanks for your answer,

I didn't think that using:          Document doc irHourly.doc(<id in hit>);
would be much faster than using the searcher. I will try that.

I have one question though: what is the <id in hit> you reffer to.  Since I
have searched in the daily index, what is the corresponding hit on the
hourly index if i haven't searched in the hourly index yet?

Thanks for your help,

Francois

PS: Concerning your idea to merge the hourly and daily index, I did think
about that but the quantity of info I have is already way too large in both
indexes (about 100 fields in each) to repeat that information so many times=
.=20
My Index is already of 10GB.



Erick Erickson wrote:
>=20
> Well, making a large OR clause is definitely more efficient than making
> N different requests, but you would have to search the results. It doesn'=
t
> sound very performant.
>=20
> Could you go to 50,000 ids? yes, but you have to fiddle with
> setMaxClauseCount
> because Lucene defaults to a max of 1,024.
>=20
> There's no way I know of to emulate a DB join. Usually, whenever I try
> the answer is to flatten my data but I don't see a good way to do that
> in this case.
>=20
> Hmmm, what do you think would happen if you opened an IndexReader
> into your Hourly index straight from your Daily query? Something like:
>=20
> IndexReader irHourly =3D <open index reader to Hourly>.
> for (each hit in Daily) {
>     for (each id in this Hourly doc) {
>          Document doc irHourly.doc(<id in hit>);
>          addToResponse(doc); // your method here.....
>     }
> }
>=20
>=20
> You *probably* want to keep the Hourly reader open between requests, but
> since the above isn't searching, you *might* be able to open it each time=
.
> I'd
> go for keeping it open between requests if at all possible.
>=20
> And here's a wild and crazy idea. Remember that Lucene documents don't
> require that *any* fields be in common. It might make your management
> easier if you *combined* the indexes. Crudely, prefix each Daily field
> with
> "D_" and each hourly field with "H_" and put 'em all in the same index.
> I'm
> not claiming that's a good solution in your case, but I thought I'd
> mention
> it
> as a possibility. You still can't do joins on them though.....
>=20
> Erick
>=20
>=20
>=20
> On Fri, Dec 18, 2009 at 9:08 AM, Fran=C3=A7ois Eric
> <francois.eric@jarca.ca>wrote:
>=20
>> Hello,
>>
>> I have a performance problem and would need expert advice on how to go
>> about fixing it:
>>
>> I currently have 2 indexes: Daily and Hourly.  The Daily index contains
>> about 1,000,000 documents and my Hourly index approximately: 24,000,000
>> documents.  My Daily index contains many fields and some of them are IDs
>> to
>> my Hourly Index.
>> What I want to do is fetch data in one request (if possible).
>> Right now I do it in many requests:
>> 1- Get the matching Daily documents (say it returns 500 documents)
>> 2- For each of these documents, locate the Hourly Index Id and fetch it.
>>
>> Therefore I make 501 requests to lucene.  This causes some performance
>> issues I guess because of the overhead to  making a request to Lucene.
>>
>> Is it possible to do this in 1 request?  I'm thinking no because I'm not
>> sure what the result set would be but maybe I'm missing something.
>>
>> If not I guess it would be possible to build a query with my 500 hourly
>> ids
>> and make a OR between them to make it in 2 requests....but then I have t=
o
>> find the matching documents.  Will this overflow if I have 50000 ids in
>> my
>> query?
>>
>> Anyway, I just want advice on how one would address this situation.
>>
>> Thank you very much,
>>
>> Fran=C3=A7ois
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>=20
>=20

--=20
View this message in context: http://old.nabble.com/Query-joining-2-indexes=
-tp26843980p26846129.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 18 17:40:35 2009
Return-Path: <java-user-return-44168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11730 invoked from network); 18 Dec 2009 17:40:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Dec 2009 17:40:35 -0000
Received: (qmail 70883 invoked by uid 500); 18 Dec 2009 17:40:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70804 invoked by uid 500); 18 Dec 2009 17:40:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70784 invoked by uid 99); 18 Dec 2009 17:40:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Dec 2009 17:40:33 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.219.225 as permitted sender)
Received: from [209.85.219.225] (HELO mail-ew0-f225.google.com) (209.85.219.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Dec 2009 17:40:23 +0000
Received: by ewy25 with SMTP id 25so4007820ewy.5
        for <java-user@lucene.apache.org>; Fri, 18 Dec 2009 09:40:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=kXVVgHMmIFGWEDNiWKx8YsQjzvePV5U1IhlfSxlM1Zs=;
        b=PQAKtRS05febkkcIawCGE58gJ2qaDSjTnvum6Obhbwh6At9PbelYi2Vf5z4Op5dBjs
         wqtjxmpOaPyvaH+V1/vM+HqrDeIQYS9jkZRg8CWQBgzJ+4R/tTYxwbnbOzxw+sr1v6Vb
         QgoYMX/mnBuCkfgXrZtu2VtTo57rArGwXzya4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=sQi+3uo+CLPbkOwMNIOtDnPcAxjwHQu3Zr5wdTrtEdpdLx7N3AETkpiwG8sk9KbWoU
         6F80IUzB7H7wl7F8VyJtngOtFCm6e9GKiGk/BXF6gNZOEJeaZOfj6mXp1+Ljj6cF5ziz
         zPbJeSu6Mdp+MFwHiaC408z//NA/xFuQgnJOc=
MIME-Version: 1.0
Received: by 10.216.86.83 with SMTP id v61mr1569777wee.80.1261158001456; Fri, 
	18 Dec 2009 09:40:01 -0800 (PST)
In-Reply-To: <26846129.post@talk.nabble.com>
References: <4B2B8CF6.4080004@polymtl.ca>
	 <359a92830912180652p40ab2c50y6e3601b2fc00b1e2@mail.gmail.com>
	 <26846129.post@talk.nabble.com>
Date: Fri, 18 Dec 2009 12:40:01 -0500
Message-ID: <359a92830912180940t5d30962csfb5bbd7d680b7b9a@mail.gmail.com>
Subject: Re: Query joining 2 indexes
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d77d12aeb859047b043a16

--0016e6d77d12aeb859047b043a16
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

>From your original post...

<<<My Daily index contains many fields and some of them are IDs to my Hourl=
y
Index>>>


So it's just the IDs to your hourly index contained in each Daily document.
Problem here is that this ID is probably NOT the Lucene ID, so my original
idea needs some refinement. Assuming that your IDs to the hourly index
are contained in your daily document, you should be able to use TermDocs
to get the Hourly documents efficiently.

Note to self: Engage brain.

FWIW
Erick

On Fri, Dec 18, 2009 at 11:42 AM, frer <francois.eric@polymtl.ca> wrote:

>
> Thanks for your answer,
>
> I didn't think that using:          Document doc irHourly.doc(<id in hit>=
);
> would be much faster than using the searcher. I will try that.
>
> I have one question though: what is the <id in hit> you reffer to.  Since=
 I
> have searched in the daily index, what is the corresponding hit on the
> hourly index if i haven't searched in the hourly index yet?
>
> Thanks for your help,
>
> Francois
>
> PS: Concerning your idea to merge the hourly and daily index, I did think
> about that but the quantity of info I have is already way too large in bo=
th
> indexes (about 100 fields in each) to repeat that information so many
> times.
> My Index is already of 10GB.
>
>
>
> Erick Erickson wrote:
> >
> > Well, making a large OR clause is definitely more efficient than making
> > N different requests, but you would have to search the results. It
> doesn't
> > sound very performant.
> >
> > Could you go to 50,000 ids? yes, but you have to fiddle with
> > setMaxClauseCount
> > because Lucene defaults to a max of 1,024.
> >
> > There's no way I know of to emulate a DB join. Usually, whenever I try
> > the answer is to flatten my data but I don't see a good way to do that
> > in this case.
> >
> > Hmmm, what do you think would happen if you opened an IndexReader
> > into your Hourly index straight from your Daily query? Something like:
> >
> > IndexReader irHourly =3D <open index reader to Hourly>.
> > for (each hit in Daily) {
> >     for (each id in this Hourly doc) {
> >          Document doc irHourly.doc(<id in hit>);
> >          addToResponse(doc); // your method here.....
> >     }
> > }
> >
> >
> > You *probably* want to keep the Hourly reader open between requests, bu=
t
> > since the above isn't searching, you *might* be able to open it each
> time.
> > I'd
> > go for keeping it open between requests if at all possible.
> >
> > And here's a wild and crazy idea. Remember that Lucene documents don't
> > require that *any* fields be in common. It might make your management
> > easier if you *combined* the indexes. Crudely, prefix each Daily field
> > with
> > "D_" and each hourly field with "H_" and put 'em all in the same index.
> > I'm
> > not claiming that's a good solution in your case, but I thought I'd
> > mention
> > it
> > as a possibility. You still can't do joins on them though.....
> >
> > Erick
> >
> >
> >
> > On Fri, Dec 18, 2009 at 9:08 AM, Fran=E7ois Eric
> > <francois.eric@jarca.ca>wrote:
> >
> >> Hello,
> >>
> >> I have a performance problem and would need expert advice on how to go
> >> about fixing it:
> >>
> >> I currently have 2 indexes: Daily and Hourly.  The Daily index contain=
s
> >> about 1,000,000 documents and my Hourly index approximately: 24,000,00=
0
> >> documents.  My Daily index contains many fields and some of them are I=
Ds
> >> to
> >> my Hourly Index.
> >> What I want to do is fetch data in one request (if possible).
> >> Right now I do it in many requests:
> >> 1- Get the matching Daily documents (say it returns 500 documents)
> >> 2- For each of these documents, locate the Hourly Index Id and fetch i=
t.
> >>
> >> Therefore I make 501 requests to lucene.  This causes some performance
> >> issues I guess because of the overhead to  making a request to Lucene.
> >>
> >> Is it possible to do this in 1 request?  I'm thinking no because I'm n=
ot
> >> sure what the result set would be but maybe I'm missing something.
> >>
> >> If not I guess it would be possible to build a query with my 500 hourl=
y
> >> ids
> >> and make a OR between them to make it in 2 requests....but then I have
> to
> >> find the matching documents.  Will this overflow if I have 50000 ids i=
n
> >> my
> >> query?
> >>
> >> Anyway, I just want advice on how one would address this situation.
> >>
> >> Thank you very much,
> >>
> >> Fran=E7ois
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
>
> --
> View this message in context:
> http://old.nabble.com/Query-joining-2-indexes-tp26843980p26846129.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6d77d12aeb859047b043a16--

From java-user-return-44169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 18 17:41:10 2009
Return-Path: <java-user-return-44169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12630 invoked from network); 18 Dec 2009 17:41:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Dec 2009 17:41:09 -0000
Received: (qmail 73711 invoked by uid 500); 18 Dec 2009 17:41:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73644 invoked by uid 500); 18 Dec 2009 17:41:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73634 invoked by uid 99); 18 Dec 2009 17:41:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Dec 2009 17:41:07 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of prabin.meitei@gmail.com designates 209.85.160.46 as permitted sender)
Received: from [209.85.160.46] (HELO mail-pw0-f46.google.com) (209.85.160.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Dec 2009 17:40:59 +0000
Received: by pwj16 with SMTP id 16so2394195pwj.5
        for <java-user@lucene.apache.org>; Fri, 18 Dec 2009 09:40:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=O81oCDOLj9M8fjMOCGTV2m+Dvc1iDk9kkP1rFdhFhhM=;
        b=M+yvYlCd7Zveij0IWCVZeiPHvmUZSAuTeCR8JoDvQwAVJ83KO/lZXoVkezBZqF+ZTz
         jJLorE4WLZLpmljvWRNwPOzPWJ89JqL4eaJeROmFEzVZnWtCM9Dd36yUUafDwporf0vR
         KSi9wqAF22ZIxKtazg0/Y+VOkKjzway+cWdh8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=KrOjVBc7JXzvCxLwyGfvwFRmx9pPSAYseW4dw6VtrLT3NoTJFQ3BXW7vOgPQ1i2kWi
         ld9N8dSEDnNomz3dS4J0ojZKneNOxRLh1MRUQi6E4ZNzftwnkH6NjLOa57VPDe4kZSBp
         OdgXMidIvnRGaSas7G8ornVtgDjExWswVifxg=
MIME-Version: 1.0
Received: by 10.114.236.22 with SMTP id j22mr2730305wah.217.1261158038222; 
	Fri, 18 Dec 2009 09:40:38 -0800 (PST)
Date: Fri, 18 Dec 2009 23:10:38 +0530
Message-ID: <295da8fe0912180940j14fe0772y83050ccbc6636863@mail.gmail.com>
Subject: document with different index time boost returns same score
From: prabin meitei <prabin.meitei@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64b96e2dfba77047b043ce0
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64b96e2dfba77047b043ce0
Content-Type: text/plain; charset=ISO-8859-1

Hi,
   I have an index in which documents are inserted with different boost
during indexing.
eg.
doc1 has boost 5.64
doc2 has boost 5.25
doc3 has boost 5.10
doc4 has boost 4.8
doc5 has boost 4.4
doc6 has boost 4.0
and so on... some documents even having boost only 1.0

when i search the index for a term which occur only once in these documents
i expected that the final scores of the search hit will differ according to
the document boost set during indexing.
But surprisingly i found that doc1, doc2 and doc3 have same score (even the
raw score) and doc4 and doc5 have same score.

I even tried changing index time boost to 564, 525, 510 .. and so on for
doc1, doc2 doc3 and so on... but it still returned same result.

Can anyone explain what is happening? why the scores are same even when the
index time boost was different. Is there any other way to implement my
expected result.
any help will be highly appreciated.

Prabin

--0016e64b96e2dfba77047b043ce0--

From java-user-return-44170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 18 18:26:44 2009
Return-Path: <java-user-return-44170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40515 invoked from network); 18 Dec 2009 18:26:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Dec 2009 18:26:43 -0000
Received: (qmail 39532 invoked by uid 500); 18 Dec 2009 18:26:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39450 invoked by uid 500); 18 Dec 2009 18:26:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39440 invoked by uid 99); 18 Dec 2009 18:26:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Dec 2009 18:26:41 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Dec 2009 18:26:33 +0000
Received: by ywh15 with SMTP id 15so3538499ywh.5
        for <java-user@lucene.apache.org>; Fri, 18 Dec 2009 10:26:12 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.25.30 with SMTP id 30mr6991020yby.83.1261160772115; Fri, 
	18 Dec 2009 10:26:12 -0800 (PST)
In-Reply-To: <295da8fe0912180940j14fe0772y83050ccbc6636863@mail.gmail.com>
References: <295da8fe0912180940j14fe0772y83050ccbc6636863@mail.gmail.com>
Date: Fri, 18 Dec 2009 13:26:12 -0500
Message-ID: <9ac0c6aa0912181026m5d4f394fh82fe5ba9457279d4@mail.gmail.com>
Subject: Re: document with different index time boost returns same score
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

The boost is stored in the index using a single byte, ie, heavily
quantized... that may explain what you are seeing?

If you make the boosts wildly different do you then see a score difference?

Mike

On Fri, Dec 18, 2009 at 12:40 PM, prabin meitei <prabin.meitei@gmail.com> w=
rote:
> Hi,
> =A0 I have an index in which documents are inserted with different boost
> during indexing.
> eg.
> doc1 has boost 5.64
> doc2 has boost 5.25
> doc3 has boost 5.10
> doc4 has boost 4.8
> doc5 has boost 4.4
> doc6 has boost 4.0
> and so on... some documents even having boost only 1.0
>
> when i search the index for a term which occur only once in these documen=
ts
> i expected that the final scores of the search hit will differ according =
to
> the document boost set during indexing.
> But surprisingly i found that doc1, doc2 and doc3 have same score (even t=
he
> raw score) and doc4 and doc5 have same score.
>
> I even tried changing index time boost to 564, 525, 510 .. and so on for
> doc1, doc2 doc3 and so on... but it still returned same result.
>
> Can anyone explain what is happening? why the scores are same even when t=
he
> index time boost was different. Is there any other way to implement my
> expected result.
> any help will be highly appreciated.
>
> Prabin
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 18 19:25:53 2009
Return-Path: <java-user-return-44171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70398 invoked from network); 18 Dec 2009 19:25:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Dec 2009 19:25:53 -0000
Received: (qmail 47181 invoked by uid 500); 18 Dec 2009 19:25:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47106 invoked by uid 500); 18 Dec 2009 19:25:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47096 invoked by uid 99); 18 Dec 2009 19:25:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Dec 2009 19:25:51 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Dec 2009 19:25:42 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NLiS1-00071u-2c
	for java-user@lucene.apache.org; Fri, 18 Dec 2009 11:25:21 -0800
Message-ID: <26848434.post@talk.nabble.com>
Date: Fri, 18 Dec 2009 11:25:21 -0800 (PST)
From: frer <francois.eric@polymtl.ca>
To: java-user@lucene.apache.org
Subject: Re: Query joining 2 indexes
In-Reply-To: <359a92830912180940t5d30962csfb5bbd7d680b7b9a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: francois.eric@polymtl.ca
References: <4B2B8CF6.4080004@polymtl.ca> <359a92830912180652p40ab2c50y6e3601b2fc00b1e2@mail.gmail.com> <26846129.post@talk.nabble.com> <359a92830912180940t5d30962csfb5bbd7d680b7b9a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hey Erick,

Ok that's what I thought.  Unfortunately doing that will pretty much take
the same time as what I was doing (at least I think it will)

What I ended up doing is fetching them all with a big query.  I obviously
needed to change the MaxClauseCount but in my case this is an acceptable
solution... unless you (or anyone else) has a better idea.

Here is my resulting code:

            QueryParser parser =3D new QueryParser("ID", new
StandardAnalyzer());
            StringBuffer idQueryBuffer =3D new StringBuffer();
            Iterator<String> i =3D hourlyIds.iterator();
            while(i.hasNext()) {
                String id =3D i.next();
                idQueryBuffer.append(id).append(" ");
            }
            Query query =3D parser.parse(idQueryBuffer.toString());

            BooleanQuery booleanQuery =3D new BooleanQuery();
            booleanQuery.add(query, BooleanClause.Occur.MUST);
           =20
            TopDocs countDocs =3D searcher.search(booleanQuery, null, 1);


Thanks a lot for your help Erick and happy holidays to everyone,

Fran=C3=A7ois



Erick Erickson wrote:
>=20
> From your original post...
>=20
> <<<My Daily index contains many fields and some of them are IDs to my
> Hourly
> Index>>>
>=20
>=20
> So it's just the IDs to your hourly index contained in each Daily
> document.
> Problem here is that this ID is probably NOT the Lucene ID, so my origina=
l
> idea needs some refinement. Assuming that your IDs to the hourly index
> are contained in your daily document, you should be able to use TermDocs
> to get the Hourly documents efficiently.
>=20
> Note to self: Engage brain.
>=20
> FWIW
> Erick
>=20
> On Fri, Dec 18, 2009 at 11:42 AM, frer <francois.eric@polymtl.ca> wrote:
>=20
>>
>> Thanks for your answer,
>>
>> I didn't think that using:          Document doc irHourly.doc(<id in
>> hit>);
>> would be much faster than using the searcher. I will try that.
>>
>> I have one question though: what is the <id in hit> you reffer to.  Sinc=
e
>> I
>> have searched in the daily index, what is the corresponding hit on the
>> hourly index if i haven't searched in the hourly index yet?
>>
>> Thanks for your help,
>>
>> Francois
>>
>> PS: Concerning your idea to merge the hourly and daily index, I did thin=
k
>> about that but the quantity of info I have is already way too large in
>> both
>> indexes (about 100 fields in each) to repeat that information so many
>> times.
>> My Index is already of 10GB.
>>
>>
>>
>> Erick Erickson wrote:
>> >
>> > Well, making a large OR clause is definitely more efficient than makin=
g
>> > N different requests, but you would have to search the results. It
>> doesn't
>> > sound very performant.
>> >
>> > Could you go to 50,000 ids? yes, but you have to fiddle with
>> > setMaxClauseCount
>> > because Lucene defaults to a max of 1,024.
>> >
>> > There's no way I know of to emulate a DB join. Usually, whenever I try
>> > the answer is to flatten my data but I don't see a good way to do that
>> > in this case.
>> >
>> > Hmmm, what do you think would happen if you opened an IndexReader
>> > into your Hourly index straight from your Daily query? Something like:
>> >
>> > IndexReader irHourly =3D <open index reader to Hourly>.
>> > for (each hit in Daily) {
>> >     for (each id in this Hourly doc) {
>> >          Document doc irHourly.doc(<id in hit>);
>> >          addToResponse(doc); // your method here.....
>> >     }
>> > }
>> >
>> >
>> > You *probably* want to keep the Hourly reader open between requests,
>> but
>> > since the above isn't searching, you *might* be able to open it each
>> time.
>> > I'd
>> > go for keeping it open between requests if at all possible.
>> >
>> > And here's a wild and crazy idea. Remember that Lucene documents don't
>> > require that *any* fields be in common. It might make your management
>> > easier if you *combined* the indexes. Crudely, prefix each Daily field
>> > with
>> > "D_" and each hourly field with "H_" and put 'em all in the same index=
.
>> > I'm
>> > not claiming that's a good solution in your case, but I thought I'd
>> > mention
>> > it
>> > as a possibility. You still can't do joins on them though.....
>> >
>> > Erick
>> >
>> >
>> >
>> > On Fri, Dec 18, 2009 at 9:08 AM, Fran=C3=A7ois Eric
>> > <francois.eric@jarca.ca>wrote:
>> >
>> >> Hello,
>> >>
>> >> I have a performance problem and would need expert advice on how to g=
o
>> >> about fixing it:
>> >>
>> >> I currently have 2 indexes: Daily and Hourly.  The Daily index
>> contains
>> >> about 1,000,000 documents and my Hourly index approximately:
>> 24,000,000
>> >> documents.  My Daily index contains many fields and some of them are
>> IDs
>> >> to
>> >> my Hourly Index.
>> >> What I want to do is fetch data in one request (if possible).
>> >> Right now I do it in many requests:
>> >> 1- Get the matching Daily documents (say it returns 500 documents)
>> >> 2- For each of these documents, locate the Hourly Index Id and fetch
>> it.
>> >>
>> >> Therefore I make 501 requests to lucene.  This causes some performanc=
e
>> >> issues I guess because of the overhead to  making a request to Lucene=
.
>> >>
>> >> Is it possible to do this in 1 request?  I'm thinking no because I'm
>> not
>> >> sure what the result set would be but maybe I'm missing something.
>> >>
>> >> If not I guess it would be possible to build a query with my 500
>> hourly
>> >> ids
>> >> and make a OR between them to make it in 2 requests....but then I hav=
e
>> to
>> >> find the matching documents.  Will this overflow if I have 50000 ids
>> in
>> >> my
>> >> query?
>> >>
>> >> Anyway, I just want advice on how one would address this situation.
>> >>
>> >> Thank you very much,
>> >>
>> >> Fran=C3=A7ois
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>> >
>>
>> --
>> View this message in context:
>> http://old.nabble.com/Query-joining-2-indexes-tp26843980p26846129.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>=20
>=20

--=20
View this message in context: http://old.nabble.com/Query-joining-2-indexes=
-tp26843980p26848434.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 18 19:29:42 2009
Return-Path: <java-user-return-44172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71325 invoked from network); 18 Dec 2009 19:29:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Dec 2009 19:29:42 -0000
Received: (qmail 54541 invoked by uid 500); 18 Dec 2009 19:29:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54465 invoked by uid 500); 18 Dec 2009 19:29:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54455 invoked by uid 99); 18 Dec 2009 19:29:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Dec 2009 19:29:40 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Dec 2009 19:29:31 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NLiVi-0007If-Sy
	for java-user@lucene.apache.org; Fri, 18 Dec 2009 11:29:10 -0800
Message-ID: <26848479.post@talk.nabble.com>
Date: Fri, 18 Dec 2009 11:29:10 -0800 (PST)
From: frer <francois.eric@polymtl.ca>
To: java-user@lucene.apache.org
Subject: Re: Query joining 2 indexes
In-Reply-To: <4B2B8CF6.4080004@polymtl.ca>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: francois.eric@polymtl.ca
References: <4B2B8CF6.4080004@polymtl.ca>
X-Virus-Checked: Checked by ClamAV on apache.org


Just re-read my post and I don't think it was clear.

The algorithm I ended up doing is:

for all daily data=20
        gather hourly ids in a set
        build map with placeholders for hourly values

    get hourly documents from set

    for all daily data
        insert hourly data from documents fetched in placeholders

So the method I showed below is the one to "get hourly documents from set"

Fran=C3=A7ois



Fran=C3=A7ois Eric wrote:
>=20
> Hello,
>=20
> I have a performance problem and would need expert advice on how to go=20
> about fixing it:
>=20
> I currently have 2 indexes: Daily and Hourly.  The Daily index contains=
=20
> about 1,000,000 documents and my Hourly index approximately: 24,000,000=
=20
> documents.  My Daily index contains many fields and some of them are IDs=
=20
> to my Hourly Index.
> What I want to do is fetch data in one request (if possible).
> Right now I do it in many requests:
> 1- Get the matching Daily documents (say it returns 500 documents)
> 2- For each of these documents, locate the Hourly Index Id and fetch it.
>=20
> Therefore I make 501 requests to lucene.  This causes some performance=20
> issues I guess because of the overhead to  making a request to Lucene.
>=20
> Is it possible to do this in 1 request?  I'm thinking no because I'm not=
=20
> sure what the result set would be but maybe I'm missing something.
>=20
> If not I guess it would be possible to build a query with my 500 hourly=
=20
> ids and make a OR between them to make it in 2 requests....but then I=20
> have to find the matching documents.  Will this overflow if I have 50000=
=20
> ids in my query?
>=20
> Anyway, I just want advice on how one would address this situation.
>=20
> Thank you very much,
>=20
> Fran=C3=A7ois
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://old.nabble.com/Query-joining-2-indexes=
-tp26843980p26848479.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 18 21:14:33 2009
Return-Path: <java-user-return-44173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6870 invoked from network); 18 Dec 2009 21:14:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Dec 2009 21:14:33 -0000
Received: (qmail 70587 invoked by uid 500); 18 Dec 2009 21:14:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70500 invoked by uid 500); 18 Dec 2009 21:14:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70490 invoked by uid 99); 18 Dec 2009 21:14:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Dec 2009 21:14:31 +0000
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Dec 2009 21:14:22 +0000
Received: by yxe30 with SMTP id 30so3963246yxe.29
        for <java-user@lucene.apache.org>; Fri, 18 Dec 2009 13:14:00 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.70.15 with SMTP id s15mr7088704yba.212.1261169274777; Fri, 
	18 Dec 2009 12:47:54 -0800 (PST)
In-Reply-To: <9ac0c6aa0912181026m5d4f394fh82fe5ba9457279d4@mail.gmail.com>
References: <295da8fe0912180940j14fe0772y83050ccbc6636863@mail.gmail.com>
	 <9ac0c6aa0912181026m5d4f394fh82fe5ba9457279d4@mail.gmail.com>
Date: Fri, 18 Dec 2009 12:47:54 -0800
Message-ID: <660086cb0912181247r3eb673a7q98262e7ea8d33fd6@mail.gmail.com>
Subject: Re: document with different index time boost returns same score
From: Tom Hill <solr-list@worldware.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd609d69fefe3047b06daea
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd609d69fefe3047b06daea
Content-Type: text/plain; charset=ISO-8859-1

The docBoost, IIRC, is stored in a single byte, which combines the doc
boost, the field boost, and the length norm.
(
http://lucene.apache.org/java/2_4_1/api/core/org/apache/lucene/search/Similarity.html#formula_norm
)

Are the lengths of your documents the same? If not, this could be affecting
your scoring.

You can run luke (http://code.google.com/p/luke/) , and look at the values
for fieldNorm. It's on the documents tab.

Does the ordering look like it is based on these numbers? Then length
difference are probably what's happening to you.

Tom




On Fri, Dec 18, 2009 at 10:26 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> The boost is stored in the index using a single byte, ie, heavily
> quantized... that may explain what you are seeing?
>
> If you make the boosts wildly different do you then see a score difference?
>
> Mike
>
> On Fri, Dec 18, 2009 at 12:40 PM, prabin meitei <prabin.meitei@gmail.com>
> wrote:
> > Hi,
> >   I have an index in which documents are inserted with different boost
> > during indexing.
> > eg.
> > doc1 has boost 5.64
> > doc2 has boost 5.25
> > doc3 has boost 5.10
> > doc4 has boost 4.8
> > doc5 has boost 4.4
> > doc6 has boost 4.0
> > and so on... some documents even having boost only 1.0
> >
> > when i search the index for a term which occur only once in these
> documents
> > i expected that the final scores of the search hit will differ according
> to
> > the document boost set during indexing.
> > But surprisingly i found that doc1, doc2 and doc3 have same score (even
> the
> > raw score) and doc4 and doc5 have same score.
> >
> > I even tried changing index time boost to 564, 525, 510 .. and so on for
> > doc1, doc2 doc3 and so on... but it still returned same result.
> >
> > Can anyone explain what is happening? why the scores are same even when
> the
> > index time boost was different. Is there any other way to implement my
> > expected result.
> > any help will be highly appreciated.
> >
> > Prabin
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd609d69fefe3047b06daea--

From java-user-return-44174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 18 21:40:35 2009
Return-Path: <java-user-return-44174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22513 invoked from network); 18 Dec 2009 21:40:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Dec 2009 21:40:34 -0000
Received: (qmail 8978 invoked by uid 500); 18 Dec 2009 21:40:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8904 invoked by uid 500); 18 Dec 2009 21:40:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8890 invoked by uid 99); 18 Dec 2009 21:40:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Dec 2009 21:40:32 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [64.202.165.39] (HELO smtpauth14.prod.mesa1.secureserver.net) (64.202.165.39)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 18 Dec 2009 21:40:22 +0000
Received: (qmail 24406 invoked from network); 18 Dec 2009 21:39:59 -0000
Received: from unknown (81.219.54.251)
  by smtpauth14.prod.mesa1.secureserver.net (64.202.165.39) with ESMTP; 18 Dec 2009 21:39:58 -0000
Message-ID: <4B2BF6A4.2030704@getopt.org>
Date: Fri, 18 Dec 2009 22:39:48 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1.5) Gecko/20091204 Lightning/1.0b2pre Thunderbird/3.0
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: document with different index time boost returns same score
References: <295da8fe0912180940j14fe0772y83050ccbc6636863@mail.gmail.com>	 <9ac0c6aa0912181026m5d4f394fh82fe5ba9457279d4@mail.gmail.com> <660086cb0912181247r3eb673a7q98262e7ea8d33fd6@mail.gmail.com>
In-Reply-To: <660086cb0912181247r3eb673a7q98262e7ea8d33fd6@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On 2009-12-18 21:47, Tom Hill wrote:
> The docBoost, IIRC, is stored in a single byte, which combines the doc
> boost, the field boost, and the length norm.
> (
> http://lucene.apache.org/java/2_4_1/api/core/org/apache/lucene/search/Similarity.html#formula_norm
> )
>
> Are the lengths of your documents the same? If not, this could be affecting
> your scoring.
>
> You can run luke (http://code.google.com/p/luke/) , and look at the values
> for fieldNorm. It's on the documents tab.

There's a little widget in Luke to set the value of norm - just display 
the dialog, it shows you the rounding error that this encoding causes 
(and what input values effectively come out the same, once encoded).


-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 19 06:47:13 2009
Return-Path: <java-user-return-44175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23029 invoked from network); 19 Dec 2009 06:47:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Dec 2009 06:47:13 -0000
Received: (qmail 44728 invoked by uid 500); 19 Dec 2009 06:47:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43913 invoked by uid 500); 19 Dec 2009 06:47:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43548 invoked by uid 99); 19 Dec 2009 06:47:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Dec 2009 06:47:08 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of prabin.meitei@gmail.com designates 209.85.216.202 as permitted sender)
Received: from [209.85.216.202] (HELO mail-px0-f202.google.com) (209.85.216.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Dec 2009 06:46:59 +0000
Received: by pxi40 with SMTP id 40so2695588pxi.21
        for <java-user@lucene.apache.org>; Fri, 18 Dec 2009 22:46:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=VskCy9w0cNwi+m81mGzCHeaiJRW7q9lG7QbATOuVtMc=;
        b=iuzEXZSMzhoFSSEpagqYOazuTLuyUvYd4tWDFOztHQ2jRhOTt5bkdBCC5tBgbbARsO
         AhQDxFs6+dH0uridlpD6bJ0H9HS0Xm1eo2jjzddBnoFsO+uUu/WMdqZ9WpAkIw+gryyp
         8cz5+GAbMXBvZW68aF/kgKi8tCREqiEtZf6f8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=tTQMI7fmmUm8LJWZmVH0qvWYcDyzThc+ncJJbFLNvJ5qyD84c9sIePKGyGMLmlFORF
         JKhLNYThBploSTXCY6c8TIh5p2AvXZEYXnolBOF1BvKH+8xgA3O4sCvwMPdCTMR7iFtx
         8Md/zgaSrCd2G2yLjMyRJ9pUCGCWXkO6bmC2I=
MIME-Version: 1.0
Received: by 10.115.84.21 with SMTP id m21mr3210358wal.109.1261205199163; Fri, 
	18 Dec 2009 22:46:39 -0800 (PST)
In-Reply-To: <4B2BF6A4.2030704@getopt.org>
References: <295da8fe0912180940j14fe0772y83050ccbc6636863@mail.gmail.com>
	 <9ac0c6aa0912181026m5d4f394fh82fe5ba9457279d4@mail.gmail.com>
	 <660086cb0912181247r3eb673a7q98262e7ea8d33fd6@mail.gmail.com>
	 <4B2BF6A4.2030704@getopt.org>
Date: Sat, 19 Dec 2009 12:16:39 +0530
Message-ID: <295da8fe0912182246r75c4319ahc176a82add62e7c9@mail.gmail.com>
Subject: Re: document with different index time boost returns same score
From: prabin meitei <prabin.meitei@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64ccdf8e290cf047b0f37fb

--0016e64ccdf8e290cf047b0f37fb
Content-Type: text/plain; charset=ISO-8859-1

Thanks to all for the replies. I checked with luke and documents with
different index time boosting (not much different) has same fieldNorm. I
think that is causing the search hits to have same score.
As Andrzej suggested i checked the rounding error caused by encoding. The
result really surprises me.
like 7.9 rounding to 7.0, 8.0 rounding to 8.0 and even 9.4 rounding to 8.0
etc..

Prabin


On Sat, Dec 19, 2009 at 3:09 AM, Andrzej Bialecki <ab@getopt.org> wrote:

> On 2009-12-18 21:47, Tom Hill wrote:
>
>> The docBoost, IIRC, is stored in a single byte, which combines the doc
>> boost, the field boost, and the length norm.
>> (
>>
>> http://lucene.apache.org/java/2_4_1/api/core/org/apache/lucene/search/Similarity.html#formula_norm
>> )
>>
>> Are the lengths of your documents the same? If not, this could be
>> affecting
>> your scoring.
>>
>> You can run luke (http://code.google.com/p/luke/) , and look at the
>> values
>> for fieldNorm. It's on the documents tab.
>>
>
> There's a little widget in Luke to set the value of norm - just display the
> dialog, it shows you the rounding error that this encoding causes (and what
> input values effectively come out the same, once encoded).
>
>
> --
> Best regards,
> Andrzej Bialecki     <><
>  ___. ___ ___ ___ _ _   __________________________________
> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> http://www.sigram.com  Contact: info at sigram dot com
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e64ccdf8e290cf047b0f37fb--

From java-user-return-44176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 19 13:07:58 2009
Return-Path: <java-user-return-44176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21156 invoked from network); 19 Dec 2009 13:07:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Dec 2009 13:07:57 -0000
Received: (qmail 74775 invoked by uid 500); 19 Dec 2009 13:07:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74686 invoked by uid 500); 19 Dec 2009 13:07:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74676 invoked by uid 99); 19 Dec 2009 13:07:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Dec 2009 13:07:54 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of elias3@gmail.com designates 209.85.220.210 as permitted sender)
Received: from [209.85.220.210] (HELO mail-fx0-f210.google.com) (209.85.220.210)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Dec 2009 13:07:45 +0000
Received: by fxm2 with SMTP id 2so3730659fxm.5
        for <java-user@lucene.apache.org>; Sat, 19 Dec 2009 05:07:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:subject:date
         :message-id:mime-version:content-type:content-transfer-encoding
         :x-mailer:thread-index:x-mimeole;
        bh=+kM+BfM/eAutjxYDB6s1V4ChQLmX0CqZoC+eaMxs8P0=;
        b=Q6eBslvvz/s3iN16Ke8uB9GXhUnCIlZr6/X/AZ8bAvRlHCzE0mrxJMVn7gA+67foWl
         RnBiMC7y3ruHjuxZBd+fPJCpNQ4fXOKoYv1lmtFj3cfUoULewdSbMBJHswlfQzHObo7U
         T9qgmZ2S+xBjYziaH/fjAKrKlMUsPPH3F9gdI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:subject:date:message-id:mime-version:content-type
         :content-transfer-encoding:x-mailer:thread-index:x-mimeole;
        b=mLB1l1phYeC4bu8ozSrT6BkBWCL51AZon166qBSGXqIO/Ru2zNPn/aM3NexDUU+XxP
         LDrd6Buw9/ZuDtDfAcgQjDFMIwNzf+cTm7ZPNLjbyKXtlsNca8nSKuKvUJrMwQztFA4S
         lP1Z4yU/DnW9QVNPkylfjtL4Z0D0kcAazapeo=
Received: by 10.103.79.17 with SMTP id g17mr1359206mul.9.1261228045155;
        Sat, 19 Dec 2009 05:07:25 -0800 (PST)
Received: from elias (bzq-79-183-57-228.red.bezeqint.net [79.183.57.228])
        by mx.google.com with ESMTPS id u9sm10728445muf.54.2009.12.19.05.07.22
        (version=SSLv3 cipher=RC4-MD5);
        Sat, 19 Dec 2009 05:07:24 -0800 (PST)
From: "Elias Khsheibun" <elias3@gmail.com>
To: <java-user@lucene.apache.org>
Subject: Payloads
Date: Sat, 19 Dec 2009 15:07:16 +0200
Message-ID: <C632C269723741169AC73C069170B98E@elias>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcqArC8NDPqmAe6DSRCDKt8lo7yYug==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I need to add a query operator '!' such that when it precedes a word or a
phrase in the query, that term will contribute twice its weight if it is
positioned in an even offset of the document. The position of a phrase is
determined by the offset of its first word. 

I guess it involves payloads...

Elias.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 19 16:41:13 2009
Return-Path: <java-user-return-44177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69545 invoked from network); 19 Dec 2009 16:41:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Dec 2009 16:41:12 -0000
Received: (qmail 52599 invoked by uid 500); 19 Dec 2009 16:41:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52523 invoked by uid 500); 19 Dec 2009 16:41:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52513 invoked by uid 99); 19 Dec 2009 16:41:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Dec 2009 16:41:10 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.49.13] (HELO web52903.mail.re2.yahoo.com) (206.190.49.13)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 19 Dec 2009 16:41:01 +0000
Received: (qmail 14236 invoked by uid 60001); 19 Dec 2009 16:40:39 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1261240839; bh=n1PWdtIHhc8Sp7+WdqmZwy0MtbKTJ7LanrS9diE9mpg=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=y48M4ZTw7tMhZQUHhhKYzx5L/XVnGqRUxHUapLGGcaPaaZ7Ue9Syry6WyPOLKEolOmHKcyZm5S9yvtx2exNL42CXM4qOiqP7YL3lBb4+5xAA7HbnYm5pzctBVcA2MIe309OCm8l7PnWCF/F9FeAByrjxiJyK8Vd5x7s9QDwFuYI=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=teG7zgnAUXkxfQtdmoinqwhGMq8y/fkX9X+Ch98EWr+B1lP/5B5dZc1xSNW4RZrpUCQnNhjp6VfHhu2VyzpYy8CDzgOZ0xVmu0qPAQTLXlMvIwUPx+Ytsu8xqQm8G4XcqH9aVA8ArdQqPti1NcZ8pm7OYCPtI1Jn1dYtR4rZMs0=;
Message-ID: <748957.11707.qm@web52903.mail.re2.yahoo.com>
X-YMail-OSG: SBWv0ykVM1kxk7FjGXpbLX3eokvlroVvB9TaskvHVpnGC1Y8pOTUCNvI9G2XFbeknoeBoQNnItrarYPZ9BC.sXkURoObX2xhCbtdNQh6jif6vy00lx7tFdKe56K36AowaSeee3svCQtjnG0IvabOlXALo1IH2qMTPabx36uYo6rNDX8NoO08aJx7jWeS15fKwsw9UcdSjvoMObqmN3yc_aBGZp5n4_Rf.UKCSTASqZkcWy_i05XhKNjN6vxdnkr1bJJDUVR9dtbKD1gdvoWVqZeYcfRp20fHzimTZdvhKnGIsP0PEV8Oe6SbkgrF.YCmCfnZuVHmM4jlvSdxkZpg0kiQcmpTQAbAXHMUfC1tWnOMi74Fk_r5pyz2Lu1wmbvHHJInT_r_jBn3P312ZDmPcD_sDl_H7X2pDqBBVMEZx45SpVaY5ERw.rzxRjooX0WfkX86r946JpVPNlhKw2D9I0SgjH7njHexSQg-
Received: from [78.168.191.220] by web52903.mail.re2.yahoo.com via HTTP; Sat, 19 Dec 2009 08:40:39 PST
X-Mailer: YahooMailClassic/9.0.19 YahooMailWebService/0.8.100.260964
Date: Sat, 19 Dec 2009 08:40:39 -0800 (PST)
From: AHMET ARSLAN <iorixxx@yahoo.com>
Subject: Re: Payloads
To: java-user@lucene.apache.org
In-Reply-To: <C632C269723741169AC73C069170B98E@elias>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

> Hi,
> 
> I need to add a query operator '!' such that when it
> precedes a word or a
> phrase in the query, that term will contribute twice its
> weight if it is
> positioned in an even offset of the document. The position
> of a phrase is
> determined by the offset of its first word. 
> 
> I guess it involves payloads...
> 
> Elias.

'!' is already a query operator. It is equivalent of NOT. So you cannot use it. Why not use carat operator?  Like singleterm^2 "some phrase"^2

[Boosting a Term] http://lucene.apache.org/java/3_0_0/queryparsersyntax.html



      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 19 16:44:39 2009
Return-Path: <java-user-return-44178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70319 invoked from network); 19 Dec 2009 16:44:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Dec 2009 16:44:39 -0000
Received: (qmail 56136 invoked by uid 500); 19 Dec 2009 16:44:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56059 invoked by uid 500); 19 Dec 2009 16:44:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56049 invoked by uid 99); 19 Dec 2009 16:44:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Dec 2009 16:44:37 +0000
X-ASF-Spam-Status: No, hits=-1.4 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of elias3@gmail.com designates 209.85.220.210 as permitted sender)
Received: from [209.85.220.210] (HELO mail-fx0-f210.google.com) (209.85.220.210)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Dec 2009 16:44:29 +0000
Received: by fxm2 with SMTP id 2so3822991fxm.5
        for <java-user@lucene.apache.org>; Sat, 19 Dec 2009 08:44:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:references:subject
         :date:message-id:mime-version:content-type:content-transfer-encoding
         :x-mailer:in-reply-to:thread-index:x-mimeole;
        bh=erqzUHjC5ulPfgmwuWjugyGb6suK+EFhzu6E7AGpZhw=;
        b=XJTaoWjuUDQ7qV781WegXi1qcQKzorI1qEnXNFGKgO1UyIBecOpPCTWmLk+bAHYggl
         i5DWf9GgxiSVZwwSxamwtjjfhy5hazwEOG4cR+0pmxDfE0o3Vva+IHyKzgUxDlTFlIRm
         YdS2HJnycb0MktlCRheqo4NTcDdMAzsl8RjtI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:references:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:x-mailer:in-reply-to
         :thread-index:x-mimeole;
        b=VroH96rrz9012BH0dK+PqfjCEzr8qAdtMWMZ6OUUebrnZ5/FxOW6nVH1r2H4S3x4ro
         z1Tbrxb2S8aWTSARxcXI5rSBLzZhtbR+YYqfkHj1m4zHlccvInlPAZx609eIdo1ymvQZ
         x8gE6MagODoWzKrU8pQ/NISxkSKN08hR/+vs0=
Received: by 10.103.67.35 with SMTP id u35mr2400658muk.6.1261241047659;
        Sat, 19 Dec 2009 08:44:07 -0800 (PST)
Received: from elias (bzq-79-183-57-228.red.bezeqint.net [79.183.57.228])
        by mx.google.com with ESMTPS id i7sm5477806mue.46.2009.12.19.08.44.06
        (version=SSLv3 cipher=RC4-MD5);
        Sat, 19 Dec 2009 08:44:07 -0800 (PST)
From: "Elias Khsheibun" <elias3@gmail.com>
To: <java-user@lucene.apache.org>
References: <C632C269723741169AC73C069170B98E@elias> <748957.11707.qm@web52903.mail.re2.yahoo.com>
Subject: RE: Payloads
Date: Sat, 19 Dec 2009 18:44:00 +0200
Message-ID: <6035361667AD47638B40BF66ED0961E8@elias>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <748957.11707.qm@web52903.mail.re2.yahoo.com>
Thread-Index: AcqAyhLDQfDjv+5eREehxFF2SeNzSQAAEgaQ
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579

I want to override the operator - it is for a project purpose.

-----Original Message-----
From: AHMET ARSLAN [mailto:iorixxx@yahoo.com] 
Sent: Saturday, December 19, 2009 6:41 PM
To: java-user@lucene.apache.org
Subject: Re: Payloads

> Hi,
> 
> I need to add a query operator '!' such that when it
> precedes a word or a
> phrase in the query, that term will contribute twice its
> weight if it is
> positioned in an even offset of the document. The position
> of a phrase is
> determined by the offset of its first word. 
> 
> I guess it involves payloads...
> 
> Elias.

'!' is already a query operator. It is equivalent of NOT. So you cannot use
it. Why not use carat operator?  Like singleterm^2 "some phrase"^2

[Boosting a Term] http://lucene.apache.org/java/3_0_0/queryparsersyntax.html



      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 19 16:48:53 2009
Return-Path: <java-user-return-44179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70708 invoked from network); 19 Dec 2009 16:48:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Dec 2009 16:48:53 -0000
Received: (qmail 58387 invoked by uid 500); 19 Dec 2009 16:48:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58292 invoked by uid 500); 19 Dec 2009 16:48:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58282 invoked by uid 99); 19 Dec 2009 16:48:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Dec 2009 16:48:50 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.49.18] (HELO web52908.mail.re2.yahoo.com) (206.190.49.18)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 19 Dec 2009 16:48:41 +0000
Received: (qmail 57699 invoked by uid 60001); 19 Dec 2009 16:48:20 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1261241300; bh=bPiBW653e9mLEY6AwI/nQzhXFKMZS+7TktcU0PkiLxU=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=bnVesyGBj/rC4eiiMMmjZVnhwGr1KWPi/ZCa7Lc7OB8ZgLMeDS00u0kdEZqLEf/vcqiGZ8CXmayYkrmt9IAzPjujC1CmMk8cOYXjkYH7qNWmv3pCZF1odgOaVqmTUR+h5MS8vBKzXfDeIlHrzGoktEygWXUFhQS0rFkb6XYB6OE=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=U0eRhzAgCBXlC5aNMcIkUBoNBwYo1Ycun/xhYDnwmvw7/GtddP/CFl7RFKWx9y7A9ax7jiO/3gKpysXjZZlZFt0MHBQr0ziQtJ3+vS3BAon5pZXqcY21FXHXXC5bETxJmwyyy2+40w876zSeM6OHcn+1DZl95CHnSyS8r97cEOg=;
Message-ID: <390212.56340.qm@web52908.mail.re2.yahoo.com>
X-YMail-OSG: clDzD_gVM1mhHKgQyB1OasDppAg7_uTX8lzVdXClCPAuKniJdX.n8fFmhSZ_UWYBvlY4_sNBR_sFw1rKLt07oxe8MpshHjd0i0EDkwPbDXUL_skeNRLRkgeOZ1fPmYgdY7GTca48t6NQtKKNARdf8YniqFLm.9COUdJuFPeSavCTN7RQqoIe3p4kMs7SEIQMhkltLvFSHfxzhxB.2HtFMWHMmjsfdzGUGmP9N3ZcZYM5ZF5GeBULwS0NxehezmgTQhtP02cqkUfWK9cuscy32kwTwchYIq6w2m9tu9qy.2KuPs20TVR08FH5
Received: from [78.168.191.220] by web52908.mail.re2.yahoo.com via HTTP; Sat, 19 Dec 2009 08:48:20 PST
X-Mailer: YahooMailClassic/9.0.19 YahooMailWebService/0.8.100.260964
Date: Sat, 19 Dec 2009 08:48:20 -0800 (PST)
From: AHMET ARSLAN <iorixxx@yahoo.com>
Subject: RE: Payloads
To: java-user@lucene.apache.org
In-Reply-To: <6035361667AD47638B40BF66ED0961E8@elias>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

> I want to override the operator - it
> is for a project purpose.

Can you explain your requirements more? What do you mean by "an even offset of the document"?


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 19 16:54:49 2009
Return-Path: <java-user-return-44180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71172 invoked from network); 19 Dec 2009 16:54:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Dec 2009 16:54:49 -0000
Received: (qmail 64014 invoked by uid 500); 19 Dec 2009 16:54:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63927 invoked by uid 500); 19 Dec 2009 16:54:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63913 invoked by uid 99); 19 Dec 2009 16:54:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Dec 2009 16:54:46 +0000
X-ASF-Spam-Status: No, hits=-2.0 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of elias3@gmail.com designates 72.14.220.154 as permitted sender)
Received: from [72.14.220.154] (HELO fg-out-1718.google.com) (72.14.220.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Dec 2009 16:54:38 +0000
Received: by fg-out-1718.google.com with SMTP id 16so1978062fgg.5
        for <java-user@lucene.apache.org>; Sat, 19 Dec 2009 08:54:17 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:references:subject
         :date:message-id:mime-version:content-type:content-transfer-encoding
         :x-mailer:in-reply-to:thread-index:x-mimeole;
        bh=7XujmJ7T3ahUTyKRVQMo5TskYQQ5vksUSBoNPU9xMeI=;
        b=TGWHLAGBnRIoGM0GE/E3wzaWJzHV85ZRAP6W0m4B0hq3GmJB9nkRRkoQdBDmiIfMzO
         kkDTFiAHrVvQ/uJyRulS2GDlkTBqJIzq+8RuNH+/v13VMPdRUF/h7rnystzm7NdwrS1v
         5+LRRhotFReQ6PJxT6/UgrpgMbFy5HWGdLTWo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:references:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:x-mailer:in-reply-to
         :thread-index:x-mimeole;
        b=m40eYwRHGaROgFWyTsGmce3CJLOPURrS27/guZ3CBJdWzIFmppRqwLVTXo5Y1BkEuD
         h1JSfbSLfwCHvWSBz3GWa39lIx8te7eAcq0RScHhjAyUqyO8Rixd5I99q2maHMj9S+Vf
         yrMFyzlIUHim02geSr48q78+WoVeVOHi9fJJ0=
Received: by 10.103.81.14 with SMTP id i14mr2499386mul.75.1261241657420;
        Sat, 19 Dec 2009 08:54:17 -0800 (PST)
Received: from elias (bzq-79-183-57-228.red.bezeqint.net [79.183.57.228])
        by mx.google.com with ESMTPS id y6sm8643388mug.1.2009.12.19.08.54.15
        (version=SSLv3 cipher=RC4-MD5);
        Sat, 19 Dec 2009 08:54:17 -0800 (PST)
From: "Elias Khsheibun" <elias3@gmail.com>
To: <java-user@lucene.apache.org>
References: <6035361667AD47638B40BF66ED0961E8@elias> <390212.56340.qm@web52908.mail.re2.yahoo.com>
Subject: RE: Payloads
Date: Sat, 19 Dec 2009 18:54:09 +0200
Message-ID: <F27F61C5C1734FFF9562E1482C98FA68@elias>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <390212.56340.qm@web52908.mail.re2.yahoo.com>
Thread-Index: AcqAyyWKJlT2rERGT3qmIOZ9+JUsMgAAF3vg
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579

Let's say I have a document that contains the following text:

"Graph Algorithms is one of the most important topics in computer science"

And a query "!Graph Algorithms" then the term Graph in the query should have
a double weight because the offset of Graph is 0 (and it is even) - we apply
this doubling of weight only if a '!' operator precedes the term and if its
offset from the document is even.


-----Original Message-----
From: AHMET ARSLAN [mailto:iorixxx@yahoo.com] 
Sent: Saturday, December 19, 2009 6:48 PM
To: java-user@lucene.apache.org
Subject: RE: Payloads

> I want to override the operator - it
> is for a project purpose.

Can you explain your requirements more? What do you mean by "an even offset
of the document"?


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 19 17:01:02 2009
Return-Path: <java-user-return-44181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72423 invoked from network); 19 Dec 2009 17:01:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Dec 2009 17:01:02 -0000
Received: (qmail 68865 invoked by uid 500); 19 Dec 2009 17:00:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68770 invoked by uid 500); 19 Dec 2009 17:00:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68760 invoked by uid 99); 19 Dec 2009 17:00:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Dec 2009 17:00:59 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Dec 2009 17:00:49 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 48665D3600B
	for <java-user@lucene.apache.org>; Sat, 19 Dec 2009 18:00:25 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id XOzZOPXhyg5l for <java-user@lucene.apache.org>;
	Sat, 19 Dec 2009 18:00:11 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id D34E6D3600A
	for <java-user@lucene.apache.org>; Sat, 19 Dec 2009 18:00:10 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <6035361667AD47638B40BF66ED0961E8@elias> <390212.56340.qm@web52908.mail.re2.yahoo.com> <F27F61C5C1734FFF9562E1482C98FA68@elias>
Subject: RE: Payloads
Date: Sat, 19 Dec 2009 18:00:08 +0100
Message-ID: <CA902F341ECF4063B015901E14DE7D3F@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <F27F61C5C1734FFF9562E1482C98FA68@elias>
Thread-Index: AcqAyyWKJlT2rERGT3qmIOZ9+JUsMgAAF3vgAABHFiA=
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579

Just a question, how big is this university course about Lucene? You are the
third asking for the same :-)

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Elias Khsheibun [mailto:elias3@gmail.com]
> Sent: Saturday, December 19, 2009 5:54 PM
> To: java-user@lucene.apache.org
> Subject: RE: Payloads
> 
> Let's say I have a document that contains the following text:
> 
> "Graph Algorithms is one of the most important topics in computer science"
> 
> And a query "!Graph Algorithms" then the term Graph in the query should
> have
> a double weight because the offset of Graph is 0 (and it is even) - we
> apply
> this doubling of weight only if a '!' operator precedes the term and if
> its
> offset from the document is even.
> 
> 
> -----Original Message-----
> From: AHMET ARSLAN [mailto:iorixxx@yahoo.com]
> Sent: Saturday, December 19, 2009 6:48 PM
> To: java-user@lucene.apache.org
> Subject: RE: Payloads
> 
> > I want to override the operator - it
> > is for a project purpose.
> 
> Can you explain your requirements more? What do you mean by "an even
> offset
> of the document"?
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 19 17:05:12 2009
Return-Path: <java-user-return-44182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73235 invoked from network); 19 Dec 2009 17:05:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Dec 2009 17:05:12 -0000
Received: (qmail 73069 invoked by uid 500); 19 Dec 2009 17:05:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72984 invoked by uid 500); 19 Dec 2009 17:05:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72974 invoked by uid 99); 19 Dec 2009 17:05:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Dec 2009 17:05:09 +0000
X-ASF-Spam-Status: No, hits=-2.2 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of elias3@gmail.com designates 209.85.220.210 as permitted sender)
Received: from [209.85.220.210] (HELO mail-fx0-f210.google.com) (209.85.220.210)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Dec 2009 17:04:59 +0000
Received: by fxm2 with SMTP id 2so3832012fxm.5
        for <java-user@lucene.apache.org>; Sat, 19 Dec 2009 09:04:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:references:subject
         :date:message-id:mime-version:content-type:content-transfer-encoding
         :x-mailer:in-reply-to:thread-index:x-mimeole;
        bh=amuQuAgj1qqt755a5wyOCRGZYDZA3FeWDgL97TB8DNc=;
        b=Zt4NBQbhBDNj7YFuPf3MO13Ngz11UZ/GzIUsprcp9v582xr8tYHagHeGMsvzsVR/t2
         JU4TNKrYkMfXBT17wPDbzTmtUW5UKpGF/LbS8AZ77sQmX6a8UrlOpoS3hsGtkDTaCH0/
         JE4ZMQYz8ZJLFI5wBqhp7Pae15TbFXEDRqtro=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:references:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:x-mailer:in-reply-to
         :thread-index:x-mimeole;
        b=bFGKvd2dagtwlOa/bImbvH5cLtR2rjttdF5Sc9QtoC6YOQ7oysy6iy18xkklob3xTZ
         h/axIHWZ+JtkEdQ44KOaXmBESIHlMLQqTWu+IA4AVWJfA8E967RAUnbVxg4m6/ldMgTp
         Gm1Q3WlEEnPCKATxfcq7jAlrx1pbIS+xW89uY=
Received: by 10.103.37.32 with SMTP id p32mr2384843muj.131.1261242277944;
        Sat, 19 Dec 2009 09:04:37 -0800 (PST)
Received: from elias (bzq-79-183-57-228.red.bezeqint.net [79.183.57.228])
        by mx.google.com with ESMTPS id y6sm8711467mug.31.2009.12.19.09.04.36
        (version=SSLv3 cipher=RC4-MD5);
        Sat, 19 Dec 2009 09:04:37 -0800 (PST)
From: "Elias Khsheibun" <elias3@gmail.com>
To: <java-user@lucene.apache.org>
References: <6035361667AD47638B40BF66ED0961E8@elias> <390212.56340.qm@web52908.mail.re2.yahoo.com> <F27F61C5C1734FFF9562E1482C98FA68@elias> <CA902F341ECF4063B015901E14DE7D3F@VEGA>
Subject: RE: Payloads
Date: Sat, 19 Dec 2009 19:04:30 +0200
Message-ID: <4503F0C001BD4579B58D826B6A9D9F03@elias>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <CA902F341ECF4063B015901E14DE7D3F@VEGA>
Thread-Index: AcqAyyWKJlT2rERGT3qmIOZ9+JUsMgAAF3vgAABHFiAAABmngA==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579

About 60 students I think, if you have given some answers I would be
grateful if you could link me to them or quote them again.

-----Original Message-----
From: Uwe Schindler [mailto:uwe@thetaphi.de] 
Sent: Saturday, December 19, 2009 7:00 PM
To: java-user@lucene.apache.org
Subject: RE: Payloads

Just a question, how big is this university course about Lucene? You are the
third asking for the same :-)

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Elias Khsheibun [mailto:elias3@gmail.com]
> Sent: Saturday, December 19, 2009 5:54 PM
> To: java-user@lucene.apache.org
> Subject: RE: Payloads
> 
> Let's say I have a document that contains the following text:
> 
> "Graph Algorithms is one of the most important topics in computer science"
> 
> And a query "!Graph Algorithms" then the term Graph in the query should
> have
> a double weight because the offset of Graph is 0 (and it is even) - we
> apply
> this doubling of weight only if a '!' operator precedes the term and if
> its
> offset from the document is even.
> 
> 
> -----Original Message-----
> From: AHMET ARSLAN [mailto:iorixxx@yahoo.com]
> Sent: Saturday, December 19, 2009 6:48 PM
> To: java-user@lucene.apache.org
> Subject: RE: Payloads
> 
> > I want to override the operator - it
> > is for a project purpose.
> 
> Can you explain your requirements more? What do you mean by "an even
> offset
> of the document"?
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 19 17:49:11 2009
Return-Path: <java-user-return-44183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88109 invoked from network); 19 Dec 2009 17:49:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Dec 2009 17:49:11 -0000
Received: (qmail 92695 invoked by uid 500); 19 Dec 2009 17:49:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92620 invoked by uid 500); 19 Dec 2009 17:49:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92610 invoked by uid 99); 19 Dec 2009 17:49:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Dec 2009 17:49:08 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Dec 2009 17:48:59 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NM3Pz-0007Lo-3e
	for java-user@lucene.apache.org; Sat, 19 Dec 2009 09:48:39 -0800
Message-ID: <26857120.post@talk.nabble.com>
Date: Sat, 19 Dec 2009 09:48:39 -0800 (PST)
From: TorAtle <toratlelav@gmail.com>
To: java-user@lucene.apache.org
Subject: Wildcard searches and document boost
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: toratlelav@gmail.com


I have indexed a number of geotagged locations and want the results sorted by
relevance.

For instance, when searching for "wash*" I want "Washington" (the city) to
appear before "Washington Park", so I have boosted the "Washington"
document. Unfortunately, when using WildcardQuery, the score is always 1.0.

Luke says my query has been rewritten to "ConstantScore(myField:wash*), so
that sort of explains what's going on. But why? And short of sorting the
result, what is the solution to my problem?

Best regards,
Tor Atle
-- 
View this message in context: http://old.nabble.com/Wildcard-searches-and-document-boost-tp26857120p26857120.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 19 17:52:03 2009
Return-Path: <java-user-return-44184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89026 invoked from network); 19 Dec 2009 17:52:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Dec 2009 17:52:02 -0000
Received: (qmail 95821 invoked by uid 500); 19 Dec 2009 17:52:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95732 invoked by uid 500); 19 Dec 2009 17:52:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95722 invoked by uid 99); 19 Dec 2009 17:52:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Dec 2009 17:52:00 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Dec 2009 17:51:50 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 6DAFCD3600B
	for <java-user@lucene.apache.org>; Sat, 19 Dec 2009 18:51:29 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id xZvA-jkQxfaP for <java-user@lucene.apache.org>;
	Sat, 19 Dec 2009 18:51:19 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 1DE7FD3600A
	for <java-user@lucene.apache.org>; Sat, 19 Dec 2009 18:51:19 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <26857120.post@talk.nabble.com>
Subject: RE: Wildcard searches and document boost
Date: Sat, 19 Dec 2009 18:51:17 +0100
Message-ID: <51CBC660910748FBAB91476A951A1AEA@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcqA05dmr/EYgohgS0KQPZEZ4kK74QAAC7UA
In-Reply-To: <26857120.post@talk.nabble.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579

WildcardQuery is a subclass of MultiTermQuery, read the javadocs about MTQ,
than you might understand whats going on and what you can do.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: TorAtle [mailto:toratlelav@gmail.com]
> Sent: Saturday, December 19, 2009 6:49 PM
> To: java-user@lucene.apache.org
> Subject: Wildcard searches and document boost
> 
> 
> I have indexed a number of geotagged locations and want the results sorted
> by
> relevance.
> 
> For instance, when searching for "wash*" I want "Washington" (the city) to
> appear before "Washington Park", so I have boosted the "Washington"
> document. Unfortunately, when using WildcardQuery, the score is always
> 1.0.
> 
> Luke says my query has been rewritten to "ConstantScore(myField:wash*), so
> that sort of explains what's going on. But why? And short of sorting the
> result, what is the solution to my problem?
> 
> Best regards,
> Tor Atle
> --
> View this message in context: http://old.nabble.com/Wildcard-searches-and-
> document-boost-tp26857120p26857120.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 19 18:34:52 2009
Return-Path: <java-user-return-44185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8123 invoked from network); 19 Dec 2009 18:34:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Dec 2009 18:34:51 -0000
Received: (qmail 19462 invoked by uid 500); 19 Dec 2009 18:34:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19375 invoked by uid 500); 19 Dec 2009 18:34:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19365 invoked by uid 99); 19 Dec 2009 18:34:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Dec 2009 18:34:49 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.49.18] (HELO web52908.mail.re2.yahoo.com) (206.190.49.18)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 19 Dec 2009 18:34:39 +0000
Received: (qmail 8089 invoked by uid 60001); 19 Dec 2009 18:34:18 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1261247658; bh=wJuyJOFwA5nMFwFjkJhwT+VDjH6U/nenIO524OCpI0Y=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=JmxLhC5FNb1rSwWItWn5TeKgvw18qVRcGjTS8OKRfT5ZqULblW1ZZ1kn0fkeUfYCopvptUOJdtXLq0McmJokDR44QFkW2vtHaLDxkbzAa2UlwEWAG+3Rlj5+tFIzZi9FLD+9Dgj4RNmXtTQnIuNT5uypI2TwwDQYRJCZGcBnD6Q=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=B/xIlrKOaj+PlB04DqyCVxy+D8k+NJC91ED02VGHGc1T45kfTHzK+57/I8z0bD1xz47bKEX5U/5Hzxz7mUKuXm0WBkR32eLX2wmZ0bQPbNEheWU6O2S6ANuiR25U029HJ2DlvUjdij9naweidbyycggFTuNqgSbkYa2OPGmohg4=;
Message-ID: <99640.7797.qm@web52908.mail.re2.yahoo.com>
X-YMail-OSG: 2AYaFvgVM1kCMff0vIEQi.N45g38.vsLeGGRcP0h_EqHqnNR_.RrzrVDSP035EejnCm1vQhhVebMxnz7RmI9ied54St_NWZ4uJadCgGj.8LIGEIFtBGVIQj89Pa5WAUqkmnE52WOPgHYOAxxByjkOHd0Kao95w2iQrZ9BuM.AebDAid3aH_Wrc1aR_9d0JbmrkgNdyd52hMujU5sGsJNdmlxtC7HVm6gnHiuTLk.fgY9eWVyYNa5gHLmmk_azCcqouFg9lH1P5S6ARHYeEQ6uFip8HllyGuPdoqNI8O921Atf4BUbxmhc0JOgw--
Received: from [78.168.191.220] by web52908.mail.re2.yahoo.com via HTTP; Sat, 19 Dec 2009 10:34:18 PST
X-Mailer: YahooMailClassic/9.0.19 YahooMailWebService/0.8.100.260964
Date: Sat, 19 Dec 2009 10:34:18 -0800 (PST)
From: AHMET ARSLAN <iorixxx@yahoo.com>
Subject: RE: Payloads
To: java-user@lucene.apache.org
In-Reply-To: <F27F61C5C1734FFF9562E1482C98FA68@elias>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org


> Let's say I have a document that
> contains the following text:
> 
> "Graph Algorithms is one of the most important topics in
> computer science"
> 
> And a query "!Graph Algorithms" then the term Graph in the
> query should have
> a double weight because the offset of Graph is 0 (and it is
> even) - we apply
> this doubling of weight only if a '!' operator precedes the
> term and if its
> offset from the document is even.

I modified the TokenOffsetPayloadTokenFilter and created TermPositionPayloadTokenFilter.

Index time you can use WhitespaceTokenizer + TermPositionPayloadTokenFilter to assign payload values of 2.0f to the tokens that have an even term position.

Modifying the QueryParser to change the meaning of ! operator is very troublesome.
If you can convert your query "!Graph Algorithms" to "Graph|2.0 Algorithms" you can use DelimitedPayloadTokenFilter to set payload of marked term. 

Additionally you need to everride QueryParser to return PayloadTermQuery
and scorePayload method of DefaultSimilarity.
By doing so payloads will be included in score calculation.


public class PayloadAnalyzer extends Analyzer {

    public TokenStream tokenStream(String fieldName, Reader reader) {
        TokenStream result = new WhitespaceTokenizer(reader);
        result = new DelimitedPayloadTokenFilter(result, '|', new FloatEncoder());
        return result;
    }

    public static void main(String[] args) throws ParseException {
        QueryParser qp = new QueryParser(Version.LUCENE_29, "f", new PayloadAnalyzer());
        System.out.println(qp.parse("Graph|2.0 Algorithms").toString());
    }

}
public class TermPositionPayloadTokenFilter extends TokenFilter {

    protected PayloadAttribute payAtt;
    protected PositionIncrementAttribute posIncrAtt;

    private static final Payload evenPayload = new Payload(PayloadHelper.encodeFloat(2.0f));

    private int termPosition = 0;

    public TermPositionPayloadTokenFilter(TokenStream input) {
        super(input);
        payAtt = (PayloadAttribute) addAttribute(PayloadAttribute.class);
        posIncrAtt = (PositionIncrementAttribute) addAttribute(PositionIncrementAttribute.class);
    }

    public final boolean incrementToken() throws IOException {
        if (input.incrementToken()) {
            if ((termPosition % 2) == 0)
                payAtt.setPayload(evenPayload);
            termPosition += posIncrAtt.getPositionIncrement();
            return true;
        } else {
            return false;
        }
    }

    public static void main(String[] args) throws IOException {
        String test = "Graph Algorithms is one of the most important topics in computer science";
        TokenStream tokenStream = new TermPositionPayloadTokenFilter(new WhitespaceTokenizer(new StringReader(test)));
        TermAttribute termAtt = (TermAttribute) tokenStream.getAttribute(TermAttribute.class);
        PayloadAttribute payloadAtt = (PayloadAttribute) tokenStream.getAttribute(PayloadAttribute.class);

        while (tokenStream.incrementToken()) {
            System.out.print(termAtt.term());
            Payload payload = payloadAtt.getPayload();
            if (payload != null)
                System.out.println(" Payload = " + PayloadHelper.decodeFloat(payload.toByteArray()));
            else
                System.out.println(" Payload is null.");
        }
    }
}


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 19 18:44:14 2009
Return-Path: <java-user-return-44186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15868 invoked from network); 19 Dec 2009 18:44:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Dec 2009 18:44:14 -0000
Received: (qmail 23482 invoked by uid 500); 19 Dec 2009 18:44:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23403 invoked by uid 500); 19 Dec 2009 18:44:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23393 invoked by uid 99); 19 Dec 2009 18:44:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Dec 2009 18:44:11 +0000
X-ASF-Spam-Status: No, hits=-2.4 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.49.15] (HELO web52905.mail.re2.yahoo.com) (206.190.49.15)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 19 Dec 2009 18:44:03 +0000
Received: (qmail 65397 invoked by uid 60001); 19 Dec 2009 18:43:41 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1261248221; bh=jA+DI8mp+y4ip6ygQ1B4T9o7UOEJM2xtlW9tzDppxZU=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=0ivd+eSo9d0cELsHw+HXma0e9/U+I+5qNqwJLDJbFj3vXQnGYYbR2PKklJpdzY80UGYQ9Wa82rH7/qt9uAVoui8+8dK6AfYkkD6IGWq9cTAgWvI8PUIxOArZg1t+b4wFnbOIq3xZ6Cy+fBn6nw13VRpRwVVefJJl5zp7x94BC4I=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=3t+Tx5pCUrwvw/y0uxzFcK4B3VOyjS3aRIRYhIJ9dAvHJgJZX1yU3T1/2GRVxY9EnO1ogE9mP+MRmVAlXejoH87wWu0ng6xrD7lRFvQOjTHnbXQ2GPyEcCsfgVxe5nHFTGuaHLNkuUv1BKtDCMfZLGR3WbAxCcZIfW/A82y+8d0=;
Message-ID: <890073.65322.qm@web52905.mail.re2.yahoo.com>
X-YMail-OSG: lcph2xkVM1kR.q8V_5B2QbXystn6mnCS0QcjXYpPSm6fy4ySPlvC1Lcf6o0durgt3EHUCK9hsxb.Y_hCYbxqdGH3bvMZdXmvpNu_CEJOLzPCkPUrxYxIMPVcXet3MFkjfhuhl3eLb5UV4PG6gq6udgHYJjvc75IJ8Iiq3Pu5LcDiSvJlAKUPRezE6uIJNcxLjeh5s26XhS4OZdpZzeNOU506wu3fLA2J5u.QVh_RwwIludhHYNQJuHoZu25aj6yNTqqAK19ixfrhdzROsuu57g--
Received: from [78.168.191.220] by web52905.mail.re2.yahoo.com via HTTP; Sat, 19 Dec 2009 10:43:41 PST
X-Mailer: YahooMailClassic/9.0.19 YahooMailWebService/0.8.100.260964
Date: Sat, 19 Dec 2009 10:43:41 -0800 (PST)
From: AHMET ARSLAN <iorixxx@yahoo.com>
Subject: Re: Wildcard searches and document boost
To: java-user@lucene.apache.org
In-Reply-To: <26857120.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

> For instance, when searching for "wash*" I want
> "Washington" (the city) to
> appear before "Washington Park", so I have boosted the
> "Washington"
> document. Unfortunately, when using WildcardQuery, the
> score is always 1.0.
> 
> Luke says my query has been rewritten to
> "ConstantScore(myField:wash*), so
> that sort of explains what's going on. But why? And short
> of sorting the
> result, what is the solution to my problem?

You need to change multiTermRewriteMethod of QueryParser.
qp.setMultiTermRewriteMethod(MultiTermQuery.SCORING_BOOLEAN_QUERY_REWRITE);


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 19 20:53:43 2009
Return-Path: <java-user-return-44187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35346 invoked from network); 19 Dec 2009 20:53:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Dec 2009 20:53:43 -0000
Received: (qmail 80200 invoked by uid 500); 19 Dec 2009 20:53:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80116 invoked by uid 500); 19 Dec 2009 20:53:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80106 invoked by uid 99); 19 Dec 2009 20:53:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Dec 2009 20:53:41 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of elias3@gmail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Dec 2009 20:53:31 +0000
Received: by fg-out-1718.google.com with SMTP id 16so2021083fgg.5
        for <java-user@lucene.apache.org>; Sat, 19 Dec 2009 12:53:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:references:subject
         :date:message-id:mime-version:content-type:content-transfer-encoding
         :x-mailer:in-reply-to:thread-index:x-mimeole;
        bh=nzRxd/p1/xVFnhZkcPZBxS5qwpXqBQw4Df/glZhJpQQ=;
        b=D/SWclVAKQOiUtbmRDrBf7xZCncPiOqUo2hHSsreBtxFjS7lVePPi2fGvIQyRY0fDW
         mcFmLfHRykLt7Vqy7hOT/wC47xaZjV/k+q2jFEDM3dLDTGrBxJaGSwtZCQcQfaVfM7br
         5iI9eCjlpjmtHsjTv7m2vHQZR3PvhzHoGI8Sw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:references:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:x-mailer:in-reply-to
         :thread-index:x-mimeole;
        b=cB/sEdZhSXNSuMeD3PGB8xqHhVdf7t3yKE2Jyongec1Y3wGAxwsqaAHVIHidXPK4Jl
         nqaO2Z8nJJ5Qn36kG6ck/fPzT700uPSsOMt+VzFcXoajtT90dPULtJQ41nZxcF4KZPGJ
         jwva+FSxTrJ+t1CjQugcs+uBwgZ0+xMPFtbKE=
Received: by 10.102.211.28 with SMTP id j28mr2446766mug.125.1261255991143;
        Sat, 19 Dec 2009 12:53:11 -0800 (PST)
Received: from elias ([132.69.226.57])
        by mx.google.com with ESMTPS id j10sm3290539muh.55.2009.12.19.12.53.09
        (version=SSLv3 cipher=RC4-MD5);
        Sat, 19 Dec 2009 12:53:10 -0800 (PST)
From: "Elias Khsheibun" <elias3@gmail.com>
To: <java-user@lucene.apache.org>
References: <F27F61C5C1734FFF9562E1482C98FA68@elias> <99640.7797.qm@web52908.mail.re2.yahoo.com>
Subject: RE: Payloads
Date: Sat, 19 Dec 2009 22:53:06 +0200
Message-ID: <18D4C3144AAD4B3DBECCCA84E25A9019@elias>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <99640.7797.qm@web52908.mail.re2.yahoo.com>
Thread-Index: AcqA2fMzHeGozNWIQwSN3lrO7HFI4gAEtbwQ
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

If I need to override the QueryParser to return PayloadTermQuery, what
function for PayloadFunction should I use in the constructor (If you can
show me an example).

In your code I didn't see an indexer, will this work with the regular
IndexWriter but with the new Analyzer that you overloaded ?

-----Original Message-----
From: AHMET ARSLAN [mailto:iorixxx@yahoo.com] 
Sent: Saturday, December 19, 2009 8:34 PM
To: java-user@lucene.apache.org
Subject: RE: Payloads

> Let's say I have a document that
> contains the following text:
> 
> "Graph Algorithms is one of the most important topics in computer 
> science"
> 
> And a query "!Graph Algorithms" then the term Graph in the query 
> should have a double weight because the offset of Graph is 0 (and it 
> is
> even) - we apply
> this doubling of weight only if a '!' operator precedes the term and 
> if its offset from the document is even.

I modified the TokenOffsetPayloadTokenFilter and created
TermPositionPayloadTokenFilter.

Index time you can use WhitespaceTokenizer + TermPositionPayloadTokenFilter
to assign payload values of 2.0f to the tokens that have an even term
position.

Modifying the QueryParser to change the meaning of ! operator is very
troublesome.
If you can convert your query "!Graph Algorithms" to "Graph|2.0 Algorithms"
you can use DelimitedPayloadTokenFilter to set payload of marked term. 

Additionally you need to everride QueryParser to return PayloadTermQuery and
scorePayload method of DefaultSimilarity.
By doing so payloads will be included in score calculation.


public class PayloadAnalyzer extends Analyzer {

    public TokenStream tokenStream(String fieldName, Reader reader) {
        TokenStream result = new WhitespaceTokenizer(reader);
        result = new DelimitedPayloadTokenFilter(result, '|', new
FloatEncoder());
        return result;
    }

    public static void main(String[] args) throws ParseException {
        QueryParser qp = new QueryParser(Version.LUCENE_29, "f", new
PayloadAnalyzer());
        System.out.println(qp.parse("Graph|2.0 Algorithms").toString());
    }

}
public class TermPositionPayloadTokenFilter extends TokenFilter {

    protected PayloadAttribute payAtt;
    protected PositionIncrementAttribute posIncrAtt;

    private static final Payload evenPayload = new
Payload(PayloadHelper.encodeFloat(2.0f));

    private int termPosition = 0;

    public TermPositionPayloadTokenFilter(TokenStream input) {
        super(input);
        payAtt = (PayloadAttribute) addAttribute(PayloadAttribute.class);
        posIncrAtt = (PositionIncrementAttribute)
addAttribute(PositionIncrementAttribute.class);
    }

    public final boolean incrementToken() throws IOException {
        if (input.incrementToken()) {
            if ((termPosition % 2) == 0)
                payAtt.setPayload(evenPayload);
            termPosition += posIncrAtt.getPositionIncrement();
            return true;
        } else {
            return false;
        }
    }

    public static void main(String[] args) throws IOException {
        String test = "Graph Algorithms is one of the most important topics
in computer science";
        TokenStream tokenStream = new TermPositionPayloadTokenFilter(new
WhitespaceTokenizer(new StringReader(test)));
        TermAttribute termAtt = (TermAttribute)
tokenStream.getAttribute(TermAttribute.class);
        PayloadAttribute payloadAtt = (PayloadAttribute)
tokenStream.getAttribute(PayloadAttribute.class);

        while (tokenStream.incrementToken()) {
            System.out.print(termAtt.term());
            Payload payload = payloadAtt.getPayload();
            if (payload != null)
                System.out.println(" Payload = " +
PayloadHelper.decodeFloat(payload.toByteArray()));
            else
                System.out.println(" Payload is null.");
        }
    }
}


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 19 21:19:06 2009
Return-Path: <java-user-return-44188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45037 invoked from network); 19 Dec 2009 21:19:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Dec 2009 21:19:06 -0000
Received: (qmail 96459 invoked by uid 500); 19 Dec 2009 21:19:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96361 invoked by uid 500); 19 Dec 2009 21:19:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96351 invoked by uid 99); 19 Dec 2009 21:19:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Dec 2009 21:19:03 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.49.11] (HELO web52901.mail.re2.yahoo.com) (206.190.49.11)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 19 Dec 2009 21:18:54 +0000
Received: (qmail 2869 invoked by uid 60001); 19 Dec 2009 21:18:32 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1261257512; bh=b+VyT9akZ7gqnIjDcw41MNLitxIsgA4dALuVrxNQjtQ=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=PyR3rYmE7IPtQIK5q8NcheZXt1NEM9ID7yqZZOjzAH4OdTGRJ+JhqMI36CX+mkHYMmGSJ5jfptnUcaFPWlDobrxju5uHTPMAR05RACljzeBO/8jjglhSTvI3k2Edux7tt8a0jSUtzxqofUkKqNf9y4qW9B4Jjsg/tlwgoiUw4rM=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=H/xUxSf87YG+2VrFEF9RYk2pRirmAsygEk0y+13tvb25tDQO4wgIIycz2DI7HP83yGHj8zNrf5UC49DhLZLX1+YQqbCaD36AAtx/rjHgUgJ+6oxEZDGlEL6Gzs+tsKvLSfYbdyQXaoOB5hdR9tatubAtaU0XgvJeI6em6jAZcGM=;
Message-ID: <807070.2130.qm@web52901.mail.re2.yahoo.com>
X-YMail-OSG: TBJK8GwVM1nLr5Xu5scQ7P_3RdFV8gFdb6khjw9ge99s3TA2xzm1CHvIocg3cusccJK_GP4e9oBpWeim1NLETd1b0h7EX8rlyVAq2SdXa7HjoE1gYw9KemtIgj6dk1H_s2PnF55OoIW4OLA6lae07EdgurPnCAOPl42ehiJEbQXiybt5pugOJKcsfo1G6p7t2iE.JEerVE2AztdXZ1pOJ4XbpJmikcWRMCoTKmETYlpCWZd3ANjsHydKg2Z5JuEdtVt73sk1EgfdQDLrjO7mYw7LqgVb5qZ8os_21YvPn4NS1qDI7HfkHlNBXA--
Received: from [78.168.191.220] by web52901.mail.re2.yahoo.com via HTTP; Sat, 19 Dec 2009 13:18:32 PST
X-Mailer: YahooMailClassic/9.0.19 YahooMailWebService/0.8.100.260964
Date: Sat, 19 Dec 2009 13:18:32 -0800 (PST)
From: AHMET ARSLAN <iorixxx@yahoo.com>
Subject: RE: Payloads
To: java-user@lucene.apache.org
In-Reply-To: <18D4C3144AAD4B3DBECCCA84E25A9019@elias>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org


> If I need to override the QueryParser
> to return PayloadTermQuery, what
> function for PayloadFunction should I use in the
> constructor (If you can
> show me an example).

I am not sure about that. Maybe custom one.

> In your code I didn't see an indexer, will this work with
> the regular
> IndexWriter but with the new Analyzer that you overloaded

No, at index time [IndexWriter] you are going to use a new analyzer that uses WhitespaceTokenizer  + TermPositionPayloadTokenFilter.

PayloadAnalyzer will be used at query time. [QueryParser]

You need to setSimilarity(new CustomSimilarity) of both indexer and searcher.


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 19 22:45:16 2009
Return-Path: <java-user-return-44189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83040 invoked from network); 19 Dec 2009 22:45:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 19 Dec 2009 22:45:16 -0000
Received: (qmail 46355 invoked by uid 500); 19 Dec 2009 22:45:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46274 invoked by uid 500); 19 Dec 2009 22:45:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46264 invoked by uid 99); 19 Dec 2009 22:45:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Dec 2009 22:45:13 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of elias3@gmail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Dec 2009 22:45:05 +0000
Received: by fg-out-1718.google.com with SMTP id 16so2038229fgg.5
        for <java-user@lucene.apache.org>; Sat, 19 Dec 2009 14:44:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:references:subject
         :date:message-id:mime-version:content-type:content-transfer-encoding
         :x-mailer:in-reply-to:thread-index:x-mimeole;
        bh=WGnA5xZsB6QznyCVP0IV+JrZgTZqnfqp8HHGoGRX3Qk=;
        b=s3IJODykDDDU+kcnEKmZplQRv7i+w6bQVcj8rQj+2A+RdVHGot9l+XiRAN9+3AoONa
         lxKNVwJlQyLfzRYOjLJfmwDqPWciM8oxBCzVFXGjyTznKangt238pgeVFF0Cn7t/SwDq
         1K7n2BUppIh3C1l33Ylu7BxGxP3MldMTQN2Ro=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:references:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:x-mailer:in-reply-to
         :thread-index:x-mimeole;
        b=cWtAu/hoIt0f6mmFJqCzyZYi1oUB59M8LyTvc0dXz56uf2AAnJJCbZ7N0JugR1pw2O
         oYRsKGdPfPULgYZ+PE9SUy0jl5mIuCkJ6L0/jdVSgCNcZiiTQKNL0582Q0/bkZt63uVg
         HO303ojLdueYPY0waDkfJ/01T38+Jloa3O0zc=
Received: by 10.103.67.31 with SMTP id u31mr2348514muk.71.1261262684211;
        Sat, 19 Dec 2009 14:44:44 -0800 (PST)
Received: from elias ([132.69.226.57])
        by mx.google.com with ESMTPS id j10sm2561261mue.30.2009.12.19.14.44.40
        (version=SSLv3 cipher=RC4-MD5);
        Sat, 19 Dec 2009 14:44:43 -0800 (PST)
From: "Elias Khsheibun" <elias3@gmail.com>
To: <java-user@lucene.apache.org>
References: <18D4C3144AAD4B3DBECCCA84E25A9019@elias> <807070.2130.qm@web52901.mail.re2.yahoo.com>
Subject: RE: Payloads
Date: Sun, 20 Dec 2009 00:44:37 +0200
Message-ID: <FAB835DF7C4040B1B0A2F1412D4A1E81@elias>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <807070.2130.qm@web52901.mail.re2.yahoo.com>
Thread-Index: AcqA8OU9U+iUiOtmQVGd40UEawP2SgACyqhQ
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579

What do you mean by a custom one - please explain. I must use a
PayloadTermQuery ?

And for the TermPositionPayloadTokenFilter there is a method that is not
used - incrementToken (only used in the main method) ... I didn't see in the
code the place that examines if the query term is at an even offset of the
document I can see it is only called from the main method - but how should
this work all together ?

Thank you.


> If I need to override the QueryParser
> to return PayloadTermQuery, what
> function for PayloadFunction should I use in the constructor (If you 
> can show me an example).

I am not sure about that. Maybe custom one.

> In your code I didn't see an indexer, will this work with the regular 
> IndexWriter but with the new Analyzer that you overloaded

No, at index time [IndexWriter] you are going to use a new analyzer that
uses WhitespaceTokenizer  + TermPositionPayloadTokenFilter.

PayloadAnalyzer will be used at query time. [QueryParser]

You need to setSimilarity(new CustomSimilarity) of both indexer and
searcher.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 20 12:59:57 2009
Return-Path: <java-user-return-44190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77759 invoked from network); 20 Dec 2009 12:59:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Dec 2009 12:59:57 -0000
Received: (qmail 95123 invoked by uid 500); 20 Dec 2009 12:59:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95041 invoked by uid 500); 20 Dec 2009 12:59:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95031 invoked by uid 99); 20 Dec 2009 12:59:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Dec 2009 12:59:53 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Dec 2009 12:59:44 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NMLNb-00063X-LD
	for java-user@lucene.apache.org; Sun, 20 Dec 2009 04:59:23 -0800
Message-ID: <26863215.post@talk.nabble.com>
Date: Sun, 20 Dec 2009 04:59:23 -0800 (PST)
From: maximd <maximd@softlibsw.com>
To: java-user@lucene.apache.org
Subject: Different similarity for different types of fields
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: maximd@softlibsw.com


Hello,
In my scenario I want to categorize document fields by field types and treat
each field type differently in the meaning of score calculation. To be more
specific, I want to categorize the fields to important fields and
less-important fields, my query will contain both important fields and
less-important ones but I want to boost those documents containing high
coverage of important fields. In addition, for important fields I want to
provide special idf function. Obviously I'll boost an important fields with
the boost factor, but I'm wondering if I could also rewrite Similarity.coord
and Similarity.idf to better reflect my situation. Unfortunately, I don't
see how just implementing custom Similarity would help as there is no
relevant information about field there. Is there any other approach I could
use? Is it possible to have 2 similarities (both for indexing and searching)
so I'll split my search to first search in important fields and then search
in less important fields and combine the results?

Thanks in advance,
Maxim
-- 
View this message in context: http://old.nabble.com/Different-similarity-for-different-types-of-fields-tp26863215p26863215.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 20 13:51:22 2009
Return-Path: <java-user-return-44191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93059 invoked from network); 20 Dec 2009 13:51:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Dec 2009 13:51:22 -0000
Received: (qmail 8961 invoked by uid 500); 20 Dec 2009 13:51:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8866 invoked by uid 500); 20 Dec 2009 13:51:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8856 invoked by uid 99); 20 Dec 2009 13:51:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Dec 2009 13:51:19 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of elias3@gmail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Dec 2009 13:51:09 +0000
Received: by fg-out-1718.google.com with SMTP id e21so1754966fga.5
        for <java-user@lucene.apache.org>; Sun, 20 Dec 2009 05:50:49 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:references:subject
         :date:message-id:mime-version:content-type:content-transfer-encoding
         :x-mailer:in-reply-to:thread-index:x-mimeole;
        bh=dJOjWyGBwINIhOIJdbwZj3GDSUM60T1wcEkXcFh6XCc=;
        b=C2x1z1k6qITuuC/2yjsKcNqZpoiX6v50CFqKCWD9TmaheDcOsZaQzwKqaG52Im9mor
         PgdKg1ECrWLXHNF8z4VEddM1HKALNRx7O5vpQLJvfIRHY79iep/dI8pivmT21d1iycCD
         aE4W2QBklYo+Mq4b/vHW5wKWDnrKxemwNKuO8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:references:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:x-mailer:in-reply-to
         :thread-index:x-mimeole;
        b=uLZvgJ7npcNEKg3BX6vrX01eSIWd1u9WZAYYOdMesEpgYRrkpjvzHkiA+oLMGD1QRU
         MCea2cnB6Z5i5BAot7XL5gPwx/lz0FBefw4LLSzI0Ht2dbfx7dkdymAk5bQkM2hV2eoe
         7AY32M88dN530yrbTROBsUnjGOTPctJgAClkM=
Received: by 10.102.182.6 with SMTP id e6mr2336931muf.4.1261317048945;
        Sun, 20 Dec 2009 05:50:48 -0800 (PST)
Received: from elias ([132.69.226.57])
        by mx.google.com with ESMTPS id e9sm10164766muf.23.2009.12.20.05.50.45
        (version=SSLv3 cipher=RC4-MD5);
        Sun, 20 Dec 2009 05:50:48 -0800 (PST)
From: "Elias Khsheibun" <elias3@gmail.com>
To: <java-user@lucene.apache.org>
References: <18D4C3144AAD4B3DBECCCA84E25A9019@elias> <807070.2130.qm@web52901.mail.re2.yahoo.com>
Subject: RE: Payloads
Date: Sun, 20 Dec 2009 15:50:42 +0200
Message-ID: <4F3FB638DB9E4CF286B27113F9E99C85@elias>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <807070.2130.qm@web52901.mail.re2.yahoo.com>
Thread-Index: AcqA8OU9U+iUiOtmQVGd40UEawP2SgAib2aQ
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org


I'm trying to run queries now, the problem is - the scoring of the
BoostingTermQuery is always giving a double weight to even terms, and not if
the query itself contains the term, here is the code that I'm using:


public class DocumentAnalyzer extends Analyzer {

	@Override
	public TokenStream tokenStream(String fieldName, Reader reader) {
		TokenStream result = new WhitespaceTokenizer(reader);
		result = new TermPositionPayloadTokenFilter(result);
		
		return result;
	}
	
}


public class TermPositionPayloadTokenFilter extends TokenFilter {

    protected PayloadAttribute payAtt;
    protected PositionIncrementAttribute posIncrAtt;

    private static final Payload evenPayload = new
Payload(PayloadHelper.encodeFloat(2.0f));

    private int termPosition = 0;

    public TermPositionPayloadTokenFilter(TokenStream input) {
        super(input);
        payAtt = (PayloadAttribute) addAttribute(PayloadAttribute.class);
        posIncrAtt = (PositionIncrementAttribute)
addAttribute(PositionIncrementAttribute.class);
    }

    @Override
    public final boolean incrementToken() throws IOException {
        if (input.incrementToken()) {
            if ((termPosition % 2) == 0)
                payAtt.setPayload(evenPayload);
            termPosition += posIncrAtt.getPositionIncrement();
            return true;
        } else {
            return false;
        }
    }

}



public class BoostingSimilarity extends DefaultSimilarity {
	public float scorePayload(String fieldName, byte[] payload, int
offset, int length) {
	if (payload != null)
	return PayloadHelper.decodeFloat(payload, offset);
	
	else
	return 1.0F;
	}
}

And this is a test I've written, if you look at the scores, then you will
notice that the BoostingTermQuery is always giving a double weight to even
terms no matter if they appear in the query or no (this is my current
problem now):

public class PayloadsTest extends TestCase {
	Directory dir;
	IndexWriter writer;
	DocumentAnalyzer analyzer;
	protected void setUp() throws Exception {
	super.setUp();
	dir = new RAMDirectory();
	analyzer = new DocumentAnalyzer();
	writer = new IndexWriter(dir, analyzer,
IndexWriter.MaxFieldLength.UNLIMITED);
	}
	protected void tearDown() throws Exception {
	super.tearDown();
	writer.close();
	}
	void addDoc(String title, String contents) throws IOException {
	Document doc = new Document();
	doc.add(new Field("title",
	title,
	Field.Store.YES,
	Field.Index.NO));
	
	doc.add(new Field("contents",
			contents,
			Field.Store.NO,
			Field.Index.ANALYZED));
	
	writer.addDocument(doc);
	}
	
	public void testBoostingTermQuery() throws Throwable {
	addDoc("Hurricane warning", "A hurricane warning was issued at 6 AM
for the outer great banks");
	addDoc("Warning label maker", "The warning label maker is a
delightful toy for your precocious six year old's warning needs");
	addDoc("Tornado warning", "There is a tornado warning for Worcester
county until 6 PM today");
	writer.commit();
	IndexSearcher searcher = new IndexSearcher(dir);
	searcher.setSimilarity(new BoostingSimilarity());
	Term warning = new Term("contents", "tornado");
	Query query1 = new TermQuery(warning);
	System.out.println("\nTermQuery results:");
	
	ScoreDoc [] hits = searcher.search(query1, 10).scoreDocs;
	 for (int i = 0; i < hits.length; i++) {
	      Document hitDoc = searcher.doc(hits[i].doc);
	      System.out.println(hitDoc.get("title"));
	 }
	Query query2 = new BoostingTermQuery(warning);
	System.out.println("\nBoostingTermQuery results:");
	
	ScoreDoc [] hits2 = searcher.search(query2, 10).scoreDocs;
	for (int i = 0; i < hits2.length; i++) {
	      Document hitDoc = searcher.doc(hits2[i].doc);
	      System.out.println(hitDoc.get("title"));
	 }
	}
	}


-----Original Message-----
From: AHMET ARSLAN [mailto:iorixxx@yahoo.com] 
Sent: Saturday, December 19, 2009 11:19 PM
To: java-user@lucene.apache.org
Subject: RE: Payloads


> If I need to override the QueryParser
> to return PayloadTermQuery, what
> function for PayloadFunction should I use in the
> constructor (If you can
> show me an example).

I am not sure about that. Maybe custom one.

> In your code I didn't see an indexer, will this work with
> the regular
> IndexWriter but with the new Analyzer that you overloaded

No, at index time [IndexWriter] you are going to use a new analyzer that
uses WhitespaceTokenizer  + TermPositionPayloadTokenFilter.

PayloadAnalyzer will be used at query time. [QueryParser]

You need to setSimilarity(new CustomSimilarity) of both indexer and
searcher.


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 20 15:07:04 2009
Return-Path: <java-user-return-44192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14904 invoked from network); 20 Dec 2009 15:07:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Dec 2009 15:07:04 -0000
Received: (qmail 42786 invoked by uid 500); 20 Dec 2009 15:07:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42683 invoked by uid 500); 20 Dec 2009 15:07:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42673 invoked by uid 99); 20 Dec 2009 15:07:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Dec 2009 15:07:02 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Dec 2009 15:06:51 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 92FA8D3600B
	for <java-user@lucene.apache.org>; Sun, 20 Dec 2009 16:06:30 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 7QMaoS5YMpGD for <java-user@lucene.apache.org>;
	Sun, 20 Dec 2009 16:06:21 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 690FED36002
	for <java-user@lucene.apache.org>; Sun, 20 Dec 2009 16:06:21 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <18D4C3144AAD4B3DBECCCA84E25A9019@elias> <807070.2130.qm@web52901.mail.re2.yahoo.com> <4F3FB638DB9E4CF286B27113F9E99C85@elias>
Subject: RE: Payloads
Date: Sun, 20 Dec 2009 16:06:20 +0100
Message-ID: <8EC4871E99A1412F9641BEB0E1F6500C@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcqA8OU9U+iUiOtmQVGd40UEawP2SgAib2aQAALJTYA=
In-Reply-To: <4F3FB638DB9E4CF286B27113F9E99C85@elias>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

The problem was solved in #lucene irc channel already. The behaviour of
PayloadTermQuery was correct if you compare scores of a document with an
even and no-even match in the *same* query.

In general: You cannot compare scores on different queries or different
indexes.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Elias Khsheibun [mailto:elias3@gmail.com]
> Sent: Sunday, December 20, 2009 2:51 PM
> To: java-user@lucene.apache.org
> Subject: RE: Payloads
> 
> 
> I'm trying to run queries now, the problem is - the scoring of the
> BoostingTermQuery is always giving a double weight to even terms, and not
> if
> the query itself contains the term, here is the code that I'm using:
> 
> 
> public class DocumentAnalyzer extends Analyzer {
> 
> 	@Override
> 	public TokenStream tokenStream(String fieldName, Reader reader) {
> 		TokenStream result = new WhitespaceTokenizer(reader);
> 		result = new TermPositionPayloadTokenFilter(result);
> 
> 		return result;
> 	}
> 
> }
> 
> 
> public class TermPositionPayloadTokenFilter extends TokenFilter {
> 
>     protected PayloadAttribute payAtt;
>     protected PositionIncrementAttribute posIncrAtt;
> 
>     private static final Payload evenPayload = new
> Payload(PayloadHelper.encodeFloat(2.0f));
> 
>     private int termPosition = 0;
> 
>     public TermPositionPayloadTokenFilter(TokenStream input) {
>         super(input);
>         payAtt = (PayloadAttribute) addAttribute(PayloadAttribute.class);
>         posIncrAtt = (PositionIncrementAttribute)
> addAttribute(PositionIncrementAttribute.class);
>     }
> 
>     @Override
>     public final boolean incrementToken() throws IOException {
>         if (input.incrementToken()) {
>             if ((termPosition % 2) == 0)
>                 payAtt.setPayload(evenPayload);
>             termPosition += posIncrAtt.getPositionIncrement();
>             return true;
>         } else {
>             return false;
>         }
>     }
> 
> }
> 
> 
> 
> public class BoostingSimilarity extends DefaultSimilarity {
> 	public float scorePayload(String fieldName, byte[] payload, int
> offset, int length) {
> 	if (payload != null)
> 	return PayloadHelper.decodeFloat(payload, offset);
> 
> 	else
> 	return 1.0F;
> 	}
> }
> 
> And this is a test I've written, if you look at the scores, then you will
> notice that the BoostingTermQuery is always giving a double weight to even
> terms no matter if they appear in the query or no (this is my current
> problem now):
> 
> public class PayloadsTest extends TestCase {
> 	Directory dir;
> 	IndexWriter writer;
> 	DocumentAnalyzer analyzer;
> 	protected void setUp() throws Exception {
> 	super.setUp();
> 	dir = new RAMDirectory();
> 	analyzer = new DocumentAnalyzer();
> 	writer = new IndexWriter(dir, analyzer,
> IndexWriter.MaxFieldLength.UNLIMITED);
> 	}
> 	protected void tearDown() throws Exception {
> 	super.tearDown();
> 	writer.close();
> 	}
> 	void addDoc(String title, String contents) throws IOException {
> 	Document doc = new Document();
> 	doc.add(new Field("title",
> 	title,
> 	Field.Store.YES,
> 	Field.Index.NO));
> 
> 	doc.add(new Field("contents",
> 			contents,
> 			Field.Store.NO,
> 			Field.Index.ANALYZED));
> 
> 	writer.addDocument(doc);
> 	}
> 
> 	public void testBoostingTermQuery() throws Throwable {
> 	addDoc("Hurricane warning", "A hurricane warning was issued at 6 AM
> for the outer great banks");
> 	addDoc("Warning label maker", "The warning label maker is a
> delightful toy for your precocious six year old's warning needs");
> 	addDoc("Tornado warning", "There is a tornado warning for Worcester
> county until 6 PM today");
> 	writer.commit();
> 	IndexSearcher searcher = new IndexSearcher(dir);
> 	searcher.setSimilarity(new BoostingSimilarity());
> 	Term warning = new Term("contents", "tornado");
> 	Query query1 = new TermQuery(warning);
> 	System.out.println("\nTermQuery results:");
> 
> 	ScoreDoc [] hits = searcher.search(query1, 10).scoreDocs;
> 	 for (int i = 0; i < hits.length; i++) {
> 	      Document hitDoc = searcher.doc(hits[i].doc);
> 	      System.out.println(hitDoc.get("title"));
> 	 }
> 	Query query2 = new BoostingTermQuery(warning);
> 	System.out.println("\nBoostingTermQuery results:");
> 
> 	ScoreDoc [] hits2 = searcher.search(query2, 10).scoreDocs;
> 	for (int i = 0; i < hits2.length; i++) {
> 	      Document hitDoc = searcher.doc(hits2[i].doc);
> 	      System.out.println(hitDoc.get("title"));
> 	 }
> 	}
> 	}
> 
> 
> -----Original Message-----
> From: AHMET ARSLAN [mailto:iorixxx@yahoo.com]
> Sent: Saturday, December 19, 2009 11:19 PM
> To: java-user@lucene.apache.org
> Subject: RE: Payloads
> 
> 
> > If I need to override the QueryParser
> > to return PayloadTermQuery, what
> > function for PayloadFunction should I use in the
> > constructor (If you can
> > show me an example).
> 
> I am not sure about that. Maybe custom one.
> 
> > In your code I didn't see an indexer, will this work with
> > the regular
> > IndexWriter but with the new Analyzer that you overloaded
> 
> No, at index time [IndexWriter] you are going to use a new analyzer that
> uses WhitespaceTokenizer  + TermPositionPayloadTokenFilter.
> 
> PayloadAnalyzer will be used at query time. [QueryParser]
> 
> You need to setSimilarity(new CustomSimilarity) of both indexer and
> searcher.
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 20 16:20:31 2009
Return-Path: <java-user-return-44193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28088 invoked from network); 20 Dec 2009 16:20:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Dec 2009 16:20:30 -0000
Received: (qmail 74460 invoked by uid 500); 20 Dec 2009 16:20:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74364 invoked by uid 500); 20 Dec 2009 16:20:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74354 invoked by uid 99); 20 Dec 2009 16:20:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Dec 2009 16:20:28 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Dec 2009 16:20:19 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NMOVi-0003DF-S7
	for java-user@lucene.apache.org; Sun, 20 Dec 2009 08:19:58 -0800
Message-ID: <26864799.post@talk.nabble.com>
Date: Sun, 20 Dec 2009 08:19:58 -0800 (PST)
From: TorAtle <toratlelav@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Wildcard searches and document boost
In-Reply-To: <890073.65322.qm@web52905.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: toratlelav@gmail.com
References: <26857120.post@talk.nabble.com> <890073.65322.qm@web52905.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


> You need to change multiTermRewriteMethod of QueryParser.
> qp.setMultiTermRewriteMethod(MultiTermQuery.SCORING_BOOLEAN_QUERY_REWRITE);

Thanks. So the normal way of doing this is setting the rewrite method to
scoring, and if BooleanQuery.TooManyClauses is catched then switch back to
constant score method?

Tor Atle
-- 
View this message in context: http://old.nabble.com/Wildcard-searches-and-document-boost-tp26857120p26864799.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 20 16:24:52 2009
Return-Path: <java-user-return-44194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42929 invoked from network); 20 Dec 2009 16:24:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Dec 2009 16:24:52 -0000
Received: (qmail 79818 invoked by uid 500); 20 Dec 2009 16:24:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79725 invoked by uid 500); 20 Dec 2009 16:24:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79715 invoked by uid 99); 20 Dec 2009 16:24:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Dec 2009 16:24:50 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Dec 2009 16:24:40 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 606AFD3600B
	for <java-user@lucene.apache.org>; Sun, 20 Dec 2009 17:24:20 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id kpIBLk+WjfzF for <java-user@lucene.apache.org>;
	Sun, 20 Dec 2009 17:24:10 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 26CB9D36002
	for <java-user@lucene.apache.org>; Sun, 20 Dec 2009 17:24:10 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <26857120.post@talk.nabble.com> <890073.65322.qm@web52905.mail.re2.yahoo.com> <26864799.post@talk.nabble.com>
Subject: RE: Wildcard searches and document boost
Date: Sun, 20 Dec 2009 17:24:08 +0100
Message-ID: <CBE41BF24107475DBD4AC5230CBFC9BA@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <26864799.post@talk.nabble.com>
Thread-Index: AcqBkF7YiTJvjN2hS52XxDu1V3pdDAAAHgRA
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

That would be an option.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: TorAtle [mailto:toratlelav@gmail.com]
> Sent: Sunday, December 20, 2009 5:20 PM
> To: java-user@lucene.apache.org
> Subject: Re: Wildcard searches and document boost
> 
> 
> > You need to change multiTermRewriteMethod of QueryParser.
> >
> qp.setMultiTermRewriteMethod(MultiTermQuery.SCORING_BOOLEAN_QUERY_REWRITE)
> ;
> 
> Thanks. So the normal way of doing this is setting the rewrite method to
> scoring, and if BooleanQuery.TooManyClauses is catched then switch back to
> constant score method?
> 
> Tor Atle
> --
> View this message in context: http://old.nabble.com/Wildcard-searches-and-
> document-boost-tp26857120p26864799.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 20 18:50:40 2009
Return-Path: <java-user-return-44195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94686 invoked from network); 20 Dec 2009 18:50:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 20 Dec 2009 18:50:40 -0000
Received: (qmail 51796 invoked by uid 500); 20 Dec 2009 18:50:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51696 invoked by uid 500); 20 Dec 2009 18:50:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51686 invoked by uid 99); 20 Dec 2009 18:50:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Dec 2009 18:50:38 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of azlist1@gmail.com designates 209.85.222.176 as permitted sender)
Received: from [209.85.222.176] (HELO mail-pz0-f176.google.com) (209.85.222.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Dec 2009 18:50:29 +0000
Received: by pzk6 with SMTP id 6so3345056pzk.29
        for <java-user@lucene.apache.org>; Sun, 20 Dec 2009 10:50:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=Vv/mFiNL4TmUKISpzBrdw+M5SG6M3oW0n0FHdWQqpMI=;
        b=OZnoJ8V2vNySFUyflPSv26LbK9YXF2b6nfDdoe+73mcZwWakgOgyj1XgN91U1xvEqw
         gowCvELXb9D+gEdCSiDh2l0KE7OWnm73yYqIIHvaYeLnwYMxOESfpZZz9IpQbljRxCm3
         956N2KkFQSYeIHuxBZsT4UKzu7exxh138AoZo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=qXEv/8MR+fsSjT8wM2V1AYVrUfWKt7H7WRFfXJ+kjsLNHz068beQH+iUNwLeAT0m0s
         2SByH2wzukV+amcn8yFsW6vy4JXvIPPHY+QN7P/P1j6Ok+wiQGjU2qk479R/RzDN/a9O
         rkDXh3eZ57n/JyvHb98KiWCEBKS1lSuf6Pbko=
MIME-Version: 1.0
Received: by 10.141.89.20 with SMTP id r20mr4350181rvl.250.1261335007984; Sun, 
	20 Dec 2009 10:50:07 -0800 (PST)
In-Reply-To: <204599e80912151836o50378447wfb4a9b65ae0460ea@mail.gmail.com>
References: <76c1202b0912142023i683e2596mf99b1f7def49b233@mail.gmail.com>
	 <204599e80912151836o50378447wfb4a9b65ae0460ea@mail.gmail.com>
Date: Sun, 20 Dec 2009 19:50:07 +0100
Message-ID: <76c1202b0912201050w149ecaacj14a032a406eebe4e@mail.gmail.com>
Subject: Re: Document category identification in query
From: Alex <azlist1@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd13a0a17fe36047b2d71c0
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd13a0a17fe36047b2d71c0
Content-Type: text/plain; charset=ISO-8859-1

Hi !

Many thanks to both of you for your suggestions and answers!

What Weiwei Wang suggests is a part of the solution I am willing to
implement. I will definitely use the suggest-as-you-type approach in the
query form as it will allow for pre-emptive disambiguation and I believe,
will give very satisfying results.

However, search users are wild beasts and I can't count on them to always
use the given suggestions. All I can count on is very erratic, sparse and
ambiguous queries :) So I need an almost fool proof solution.

To answer your question :
"BTW, I do not understand why you need to know the category of user input"
I am trying to understand the user intent behind the query to filter out
results based on a given category of locations. If a user queries "Fast Food
in Nanjing" I don't want to return all the documents that contain the words
"Fast" and "Food" and "Nanjing". I use a custom algorithm to figure out the
intended location first. Then using the Spatial contrib I filter out the
results based on a given area that was identified earlier. Finally I sort
the results according to distance from the location point / centroid found
earlier.

 Identifying the category allows me two things :

1) Filter out irrelevant results : I dont want my resultset to include a
Supermarket in "Nanjing" where the "food" is fresh and service is "fast"
just because the query words were included in the description of the
location. Since I am using custom, distance based, sorting of the results, I
can't afford to have the supermarket be the top result because it is the
closest to the location centroid identified earlier. The user intent was
clearly "fast food" and not a supermarket !

2) Understand user intent to provide targetted advertizing.

3) Understanding the category of location a user is looking for also allows
to calculate more accurately the bounding box  = the maximum distance at
which the location should be located to be relevant to the user. A user
looking for Pizza in New York is expecting to have his results within a
radius of a maximum of 1 or 2 miles. If he is looking for a Theme Park he
will probably be willing to go further away to find it. So identifying the
category of the location the user is looking for lets me calculate the
didstance radius more acurately.




Fei Liu

Thanks a lot for the papers you pointed me to. I cam accross them earlier in
my research and re-reading them gave me new insights. However I believe that
the Two steps approach you are recomending is not very viable under heavy
load as it requires two passes on the index.
I believe however that Identifying the dominant category(ies) of the
resultset when no category could be clearly identified using the query
alone, can be very valuable if sent back to the user as an information and a
category link !

Now what I think I will do to pre-emptively identify the location
category(ies) implied in the query :

1 - use my own custom category set and index their names using the synonym
analyzer provided with Lucene and also use some sort of normalization such
as stemmin. maybe also using snowball analyzer.
2 - break the query into Shingles (word based grams) and analyze each
shingle using the analyzers that were used in (1). then query Lucene with
these analyzed shingles against the category index built earlier.

Hopefully the category with the highest Lucene score should be the one
intended by the user....

Later on, I also intend to use some sort of training based approach using
search queries that would have been tagged with the relevant location
categories.

What do you guys think ?

Would this be a viable approach ?

Thanks for all !


Cheers

Alex

--000e0cd13a0a17fe36047b2d71c0--

From java-user-return-44196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 21 08:47:42 2009
Return-Path: <java-user-return-44196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10638 invoked from network); 21 Dec 2009 08:47:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Dec 2009 08:47:42 -0000
Received: (qmail 35888 invoked by uid 500); 21 Dec 2009 08:47:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35817 invoked by uid 500); 21 Dec 2009 08:47:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35807 invoked by uid 99); 21 Dec 2009 08:47:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Dec 2009 08:47:39 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of thienthanhomenh@gmail.com designates 209.85.221.203 as permitted sender)
Received: from [209.85.221.203] (HELO mail-qy0-f203.google.com) (209.85.221.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Dec 2009 08:47:31 +0000
Received: by qyk41 with SMTP id 41so2524135qyk.29
        for <java-user@lucene.apache.org>; Mon, 21 Dec 2009 00:47:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:from:date:message-id
         :subject:to:content-type;
        bh=nCqG/Suleu0sQobBzXkGPmT28p4LkWyAhevEx+q0vNw=;
        b=xu9YSw41sBqDhNZt5+yvcoNMBAtCziULQDGuYqBgOtYRwXl5qVmoVA9ICHIKDlZPj6
         7TWvHb9XywJS6axZhW5RHDa+QRNjjZ0/Kz4N4+veBMSpn8MvD7EGS/ZREBASYZLOONd3
         A3ueiHALB/b1gT0fN2fM0Ctf+BGkN79W+Ahds=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=S7hzXGugi5eNaKoNbeSlUe46I1wW4OcGVjwPE7oF4dtMzt6/TFykI64yTRVhUN0//7
         jfjEFbWND1hqaGxjpJGGCKPq2K+g3ZQV0bWVowoJA8oZwv7pRJ7Tbkzp/pOKWXOTBO2S
         sEro1dym7h+vzjNnuHaM08RMA3qxoIUvdpigE=
MIME-Version: 1.0
Received: by 10.224.83.136 with SMTP id f8mr3707309qal.86.1261385230185; Mon, 
	21 Dec 2009 00:47:10 -0800 (PST)
From: Phan The Dai <thienthanhomenh@gmail.com>
Date: Mon, 21 Dec 2009 17:46:50 +0900
Message-ID: <3b23ce090912210046k66949d11qdaca612801625651@mail.gmail.com>
Subject: Search for "similar documents" with a query as another document ?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000feaee0fac91f56c047b3922f9
X-Virus-Checked: Checked by ClamAV on apache.org

--000feaee0fac91f56c047b3922f9
Content-Type: text/plain; charset=ISO-8859-1

Dear everyone,
I am beginner of Java Lucene, please help me for the following question of
my research:

Now, I have a SET of text documents that indexed by Lucene.
If I have another text document as a query,
my mission is that finding in the SET what are tops of similar documents
with this query.
How to create this query that is a document including several terms?
What kind of Class Query, or QueryParser I should use?

I am reading some answers from forums, but have not yet seen clear solutions
utilizing Java Lucene.
I am grateful for your ideas.

Regards

--000feaee0fac91f56c047b3922f9--

From java-user-return-44197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 21 08:56:17 2009
Return-Path: <java-user-return-44197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12194 invoked from network); 21 Dec 2009 08:56:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Dec 2009 08:56:17 -0000
Received: (qmail 43739 invoked by uid 500); 21 Dec 2009 08:56:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43649 invoked by uid 500); 21 Dec 2009 08:56:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43639 invoked by uid 99); 21 Dec 2009 08:56:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Dec 2009 08:56:15 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pcdinh@gmail.com designates 209.85.160.46 as permitted sender)
Received: from [209.85.160.46] (HELO mail-pw0-f46.google.com) (209.85.160.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Dec 2009 08:56:05 +0000
Received: by pwj16 with SMTP id 16so3532207pwj.5
        for <java-user@lucene.apache.org>; Mon, 21 Dec 2009 00:55:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=/tlYY2C+S4T0dAQYHljYyjqYvULdeuqNmYWprNFzaMQ=;
        b=lNSJLCygnHfemLeRLYUAz9ffMVJJBOWNAJSwYsWGW0Vx062xbWBKewv/Sk2aUigUxS
         rwfWFZ8CmKFuygn29mU+6faRQvF9CJH2SXey7eX7GxdEicvlhf7tdRVXhoR+S+DXHoY3
         MROcmprZIUYOJsRGQ2RdAsIt2/chC/cwbZ8F0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=nO+XKHoeLLRnk7lpvDW1bPXJ5yGXQ0iigLYlI25gO1reIPTnCG+hJRUJXcENnToUp9
         /BmAvQLehUJeutCTB4YYl6rPWWn/TEo9Ic81eI4DwSgZB4vZkNsFbCoyEqa9GTBIZOnN
         BG3pOAGCWPUV4HYZ3QwXMQNAKl/9E782puv9I=
MIME-Version: 1.0
Received: by 10.142.5.27 with SMTP id 27mr4665127wfe.59.1261385744544; Mon, 21 
	Dec 2009 00:55:44 -0800 (PST)
In-Reply-To: <3b23ce090912210046k66949d11qdaca612801625651@mail.gmail.com>
References: <3b23ce090912210046k66949d11qdaca612801625651@mail.gmail.com>
Date: Mon, 21 Dec 2009 15:55:44 +0700
Message-ID: <27ff0e30912210055p723f4499i23d6bff419a2b70f@mail.gmail.com>
Subject: Re: Search for "similar documents" with a query as another document ?
From: Dinh <pcdinh@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00504502b6193a72cb047b394195
X-Virus-Checked: Checked by ClamAV on apache.org

--00504502b6193a72cb047b394195
Content-Type: text/plain; charset=ISO-8859-1

Have you taken a look at MoreLikeThis

http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/search/similar/MoreLikeThis.html

Regards,

Dinh

my mission is that finding in the SET what are tops of similar documents
> with this query.
>


-- 
Spica Framework: http://code.google.com/p/spica
http://www.twitter.com/pcdinh
http://groups.google.com/group/phpvietnam

--00504502b6193a72cb047b394195--

From java-user-return-44198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 21 09:13:52 2009
Return-Path: <java-user-return-44198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15513 invoked from network); 21 Dec 2009 09:13:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Dec 2009 09:13:52 -0000
Received: (qmail 51519 invoked by uid 500); 21 Dec 2009 09:13:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51425 invoked by uid 500); 21 Dec 2009 09:13:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51415 invoked by uid 99); 21 Dec 2009 09:13:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Dec 2009 09:13:50 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of thienthanhomenh@gmail.com designates 74.125.92.24 as permitted sender)
Received: from [74.125.92.24] (HELO qw-out-2122.google.com) (74.125.92.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Dec 2009 09:13:40 +0000
Received: by qw-out-2122.google.com with SMTP id 5so843645qwd.53
        for <java-user@lucene.apache.org>; Mon, 21 Dec 2009 01:13:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=FDBrcA8pyxveNzY1HMiOGWbHDW0O8EV1eGK53QGUG5A=;
        b=LZztjlgtJjfZeX/yj015LvlkVO/LUIp7ke3Jsl1J51oZ7XVKr/4Uodl5/R0eUZsaAn
         t6Rgg2gWdML0zivhNpElHGglRSN4/bW9wvdeWc2b2RD7QNJzyal9h1ysKpcs0ujkVyzU
         nsagvigCEBxemfrWhZgbHU/nD7/tc/CXaDLN4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=D9TR0zB14k1RLGaPaYzilw635beHx9RTDe03IMxRdWU9Hs1nv9OmlJzL4l/suDktPt
         3ngmLq1Zv0odbIFcoogrWNT31Zgbhx6Fl4tSFAfsaSDWn5uNHf3kca+b14WA47tdWgq0
         onKPoiUtUDEjgqheJGEJgV39vhnp8ERMdxTLc=
MIME-Version: 1.0
Received: by 10.224.26.200 with SMTP id f8mr3717409qac.156.1261386799088; Mon, 
	21 Dec 2009 01:13:19 -0800 (PST)
In-Reply-To: <27ff0e30912210055p723f4499i23d6bff419a2b70f@mail.gmail.com>
References: <3b23ce090912210046k66949d11qdaca612801625651@mail.gmail.com> 
	<27ff0e30912210055p723f4499i23d6bff419a2b70f@mail.gmail.com>
From: Phan The Dai <thienthanhomenh@gmail.com>
Date: Mon, 21 Dec 2009 18:12:59 +0900
Message-ID: <3b23ce090912210112v6784be56wc75930a041fbac97@mail.gmail.com>
Subject: Re: Search for "similar documents" with a query as another document ?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00c09f99e560158428047b398067
X-Virus-Checked: Checked by ClamAV on apache.org

--00c09f99e560158428047b398067
Content-Type: text/plain; charset=ISO-8859-1

Hello Dinh,
Thank you very much for your answer,

Before examize deeply Class "MoreLikeThis", I have got one more issue:
To work with my idea,
I need implementing a Vector Space Model by using Lucene Library.
so that I can compare every document in the SET of Docs
with a query (or include several terms, long as text document).

"MoreLikeThis" can do it with the same mechanism?
If not, please show me how to implement a Lucene query that including many
terms.

Again, thank you much!


On Mon, Dec 21, 2009 at 5:55 PM, Dinh <pcdinh@gmail.com> wrote:

> Have you taken a look at MoreLikeThis
>
>
> http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/search/similar/MoreLikeThis.html
>
> Regards,
>
> Dinh
>
> my mission is that finding in the SET what are tops of similar documents
> > with this query.
> >
>
>
> --
> Spica Framework: http://code.google.com/p/spica
> http://www.twitter.com/pcdinh
> http://groups.google.com/group/phpvietnam
>

--00c09f99e560158428047b398067--

From java-user-return-44199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 21 10:36:32 2009
Return-Path: <java-user-return-44199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57048 invoked from network); 21 Dec 2009 10:36:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Dec 2009 10:36:32 -0000
Received: (qmail 23026 invoked by uid 500); 21 Dec 2009 10:36:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22944 invoked by uid 500); 21 Dec 2009 10:36:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22934 invoked by uid 99); 21 Dec 2009 10:36:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Dec 2009 10:36:29 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.210.192 as permitted sender)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Dec 2009 10:36:19 +0000
Received: by yxe30 with SMTP id 30so5800124yxe.29
        for <java-user@lucene.apache.org>; Mon, 21 Dec 2009 02:35:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=4rVaGDBdUS12z6KuFed63hZLG2w/FoQaP3o6uYs22Rk=;
        b=cTO+AOL9q7Pdngd18kEiUGc1KAYXk3B3evl+sxv7M2ObxzjOMz+TlgL3IRlq/dOkmL
         bgFObt+f4FqnabDGsw92QT1/KuXcGW4bNjRtNqcP5S9jJM4gKU/KixQH7/oL1N8XR/6q
         yxwG8RNu+NFa3SClHkW9hLsYHbqQf77C/NsT4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=HK2NF6MXbNGOauM+rNzfk8VbSz55hZTvk1b09sRMW6JZW8aws7z4XEQFL47uy5/OaE
         KTn73t54qOK5MvOv+OOCtoA6AbnlbCZG27YObj1R5mEmvHFw8CS9juRvl4hbtG1KXVSP
         xU4AIosecQNajgcWjghbANtnfpwK+bQr50GbU=
MIME-Version: 1.0
Received: by 10.91.161.21 with SMTP id n21mr5293259ago.39.1261391758599; Mon, 
	21 Dec 2009 02:35:58 -0800 (PST)
In-Reply-To: <3b23ce090912210112v6784be56wc75930a041fbac97@mail.gmail.com>
References: <3b23ce090912210046k66949d11qdaca612801625651@mail.gmail.com>
	 <27ff0e30912210055p723f4499i23d6bff419a2b70f@mail.gmail.com>
	 <3b23ce090912210112v6784be56wc75930a041fbac97@mail.gmail.com>
Date: Mon, 21 Dec 2009 18:35:57 +0800
Message-ID: <7d94dcde0912210235y69b74777md773c570b8a2ac55@mail.gmail.com>
Subject: Re: Search for "similar documents" with a query as another document ?
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f546d6b1a764047b3aa702

--001485f546d6b1a764047b3aa702
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Please read the book Lucene in action to get your answer.

I remember that the author gives an example on TermFreqVector and a book
like this example

On Mon, Dec 21, 2009 at 5:12 PM, Phan The Dai <thienthanhomenh@gmail.com>wr=
ote:

> Hello Dinh,
> Thank you very much for your answer,
>
> Before examize deeply Class "MoreLikeThis", I have got one more issue:
> To work with my idea,
> I need implementing a Vector Space Model by using Lucene Library.
> so that I can compare every document in the SET of Docs
> with a query (or include several terms, long as text document).
>
> "MoreLikeThis" can do it with the same mechanism?
> If not, please show me how to implement a Lucene query that including man=
y
> terms.
>
> Again, thank you much!
>
>
> On Mon, Dec 21, 2009 at 5:55 PM, Dinh <pcdinh@gmail.com> wrote:
>
> > Have you taken a look at MoreLikeThis
> >
> >
> >
> http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/search/similar/=
MoreLikeThis.html
> >
> > Regards,
> >
> > Dinh
> >
> > my mission is that finding in the SET what are tops of similar document=
s
> > > with this query.
> > >
> >
> >
> > --
> > Spica Framework: http://code.google.com/p/spica
> > http://www.twitter.com/pcdinh
> > http://groups.google.com/group/phpvietnam
> >
>



--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--001485f546d6b1a764047b3aa702--

From java-user-return-44200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 21 12:26:38 2009
Return-Path: <java-user-return-44200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84371 invoked from network); 21 Dec 2009 12:26:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Dec 2009 12:26:38 -0000
Received: (qmail 44660 invoked by uid 500); 21 Dec 2009 12:26:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44611 invoked by uid 500); 21 Dec 2009 12:26:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44601 invoked by uid 99); 21 Dec 2009 12:26:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Dec 2009 12:26:35 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of antonv.kirillov@gmail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Dec 2009 12:26:27 +0000
Received: by fg-out-1718.google.com with SMTP id 16so2398802fgg.5
        for <java-user@lucene.apache.org>; Mon, 21 Dec 2009 04:26:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=3IBbjw3GeQxrU7Oa2/l658KWnlpTJf8gYXO2st9VTnY=;
        b=gf49TOHPC+DhZYx7IoLLYfvxu61YRIcL6J3VZfYFlQrAuGyE+00lNIgiFlmiwB0Eri
         H7Uv80IaU2k2w3DKC7inOuxM+nIZJHlHyC03+cQoP+7ZKCOw2/4tMVfP01Mu1uIY1or8
         SA/SiaBFC8iJaMrOhuCO1g5k7Ta18S6dEsxqw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=rrBWTIhR7kUo1Ow92E/6u0z3dybHGvd+4qNuJeEmb+Eng7UD3xJtC3gXggD9RyOAyX
         UhQZ0+D+AL9pwVc7BeQWT/SfWjegoq9GDWdGjeQMN0Hck/xVpQVNzgQq7vGV/6ldNoPl
         A4/KYhGiqaHGMIInaUIPkxhl5eDTJlRrCAVNs=
MIME-Version: 1.0
Received: by 10.86.22.12 with SMTP id 12mr9347246fgv.69.1261398367269; Mon, 21 
	Dec 2009 04:26:07 -0800 (PST)
Date: Mon, 21 Dec 2009 15:26:07 +0300
Message-ID: <9a76536b0912210426x7ad12c4aub6457de5750c7221@mail.gmail.com>
Subject: Lucene' results paging
From: =?UTF-8?B?0JDQvdGC0L7QvSDQmtC40YDQuNC70LvQvtCy?= <antonv.kirillov@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, All! I have some problems with Lucene's search process and it's
results, so I hope You could help me.

First one: how should I split results by pages? Now I get search
results in such way:

TopDocs topDocs = is.search(finalQuery, 100000) //For example

and after that I get the needed results in such way:

//for example startPage = 20, endPage = 40
for(int j=startPage; j<stopPage; j++){

doc[j-startPage] = is.doc(topDocs.scoreDocs[j].doc);
}

I think this is a bad approach. How should I optimize my code to make
search faster? Is there any possibility to set start and stop pages in
search methods?

The second one:
After the search is completed and the results are not sorted are all
the results stored in search engine? I mean when I set the max number
of docs in method search(finalQuery, 10) equal 10. would Lucene find
all relevant docs, then sort them by relevance and select first ten
after that? Or does Lucene store some specific information in indices
which allows select first 10 most relevant docs without sorting all
million (for example) relevant pages?

Thanks in advance.
-- 
Anton Kirillov

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 21 13:23:12 2009
Return-Path: <java-user-return-44201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7146 invoked from network); 21 Dec 2009 13:23:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Dec 2009 13:23:12 -0000
Received: (qmail 24565 invoked by uid 500); 21 Dec 2009 13:23:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24484 invoked by uid 500); 21 Dec 2009 13:23:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24474 invoked by uid 99); 21 Dec 2009 13:23:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Dec 2009 13:23:10 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of liufeipekingu@gmail.com designates 209.85.223.195 as permitted sender)
Received: from [209.85.223.195] (HELO mail-iw0-f195.google.com) (209.85.223.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Dec 2009 13:23:02 +0000
Received: by iwn33 with SMTP id 33so3619655iwn.29
        for <java-user@lucene.apache.org>; Mon, 21 Dec 2009 05:22:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=8VsQi+F+VO9uh7Rg+RuJ67PGiL+Jd9Kbp/h5wPC1wBE=;
        b=yHQ+4AD5V4nmUmKruIj8kBkG90bwZoMiaHOKL48sY9CzIzROi9IcylN4drYzOr5FIf
         Akb9NpVepZMNakEcdA6xeeC3swPFNO8p3CbBILQZzCKAAWAXTy+fS0xlP+kLAvKJge3+
         gSL2x+T6A3j9YlY1l/9Vw3PBLMZG4WJALph4o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=hgzcvFNI7eI+5sPB3wSWKsQluI5WilZh9ASoylA5dZenFjYTYFl5pJqkjA3g+dpDXg
         rdVSgwlcDj8AqZMXx6FtcXbtQ1ncjF9DK+kHCvYdNT0yGQilM1VOBXmz/UvVIbVKHGxn
         vrdxSABcp7UTQNOj2VGNA/8Eh5sQtn3VHmxh0=
MIME-Version: 1.0
Received: by 10.231.143.12 with SMTP id s12mr4003536ibu.38.1261401760850; Mon, 
	21 Dec 2009 05:22:40 -0800 (PST)
In-Reply-To: <76c1202b0912201050w149ecaacj14a032a406eebe4e@mail.gmail.com>
References: <76c1202b0912142023i683e2596mf99b1f7def49b233@mail.gmail.com>
	 <204599e80912151836o50378447wfb4a9b65ae0460ea@mail.gmail.com>
	 <76c1202b0912201050w149ecaacj14a032a406eebe4e@mail.gmail.com>
Date: Mon, 21 Dec 2009 21:22:40 +0800
Message-ID: <204599e80912210522y26358728te2010be2685e1554@mail.gmail.com>
Subject: Re: Document category identification in query
From: fei liu <liufeipekingu@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e65ae5d6dfe379047b3cfbae
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e65ae5d6dfe379047b3cfbae
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

that's a good idea. This approad will work.

Supposing someone submit a query "nice rice restaurant", I think he/she
wants to find a chinese restaurant. But you will find the category of
"restaurant" retrieved with higher score than "chinese restaurant".
Usually you may find no category retrieved by your approach, because users'
query doesn't share the same words with your categories' name.
But you could have a try. If you have interesting results, let me know.
Thanks!

That's my opinion.

2009/12/21 Alex <azlist1@gmail.com>

> Hi !
>
> Many thanks to both of you for your suggestions and answers!
>
> What Weiwei Wang suggests is a part of the solution I am willing to
> implement. I will definitely use the suggest-as-you-type approach in the
> query form as it will allow for pre-emptive disambiguation and I believe,
> will give very satisfying results.
>
> However, search users are wild beasts and I can't count on them to always
> use the given suggestions. All I can count on is very erratic, sparse and
> ambiguous queries :) So I need an almost fool proof solution.
>
> To answer your question :
> "BTW, I do not understand why you need to know the category of user input=
"
> I am trying to understand the user intent behind the query to filter out
> results based on a given category of locations. If a user queries "Fast
> Food
> in Nanjing" I don't want to return all the documents that contain the wor=
ds
> "Fast" and "Food" and "Nanjing". I use a custom algorithm to figure out t=
he
> intended location first. Then using the Spatial contrib I filter out the
> results based on a given area that was identified earlier. Finally I sort
> the results according to distance from the location point / centroid foun=
d
> earlier.
>
>  Identifying the category allows me two things :
>
> 1) Filter out irrelevant results : I dont want my resultset to include a
> Supermarket in "Nanjing" where the "food" is fresh and service is "fast"
> just because the query words were included in the description of the
> location. Since I am using custom, distance based, sorting of the results=
,
> I
> can't afford to have the supermarket be the top result because it is the
> closest to the location centroid identified earlier. The user intent was
> clearly "fast food" and not a supermarket !
>
> 2) Understand user intent to provide targetted advertizing.
>
> 3) Understanding the category of location a user is looking for also allo=
ws
> to calculate more accurately the bounding box  =3D the maximum distance a=
t
> which the location should be located to be relevant to the user. A user
> looking for Pizza in New York is expecting to have his results within a
> radius of a maximum of 1 or 2 miles. If he is looking for a Theme Park he
> will probably be willing to go further away to find it. So identifying th=
e
> category of the location the user is looking for lets me calculate the
> didstance radius more acurately.
>
>
>
>
> Fei Liu
>
> Thanks a lot for the papers you pointed me to. I cam accross them earlier
> in
> my research and re-reading them gave me new insights. However I believe
> that
> the Two steps approach you are recomending is not very viable under heavy
> load as it requires two passes on the index.
> I believe however that Identifying the dominant category(ies) of the
> resultset when no category could be clearly identified using the query
> alone, can be very valuable if sent back to the user as an information an=
d
> a
> category link !
>
> Now what I think I will do to pre-emptively identify the location
> category(ies) implied in the query :
>
> 1 - use my own custom category set and index their names using the synony=
m
> analyzer provided with Lucene and also use some sort of normalization suc=
h
> as stemmin. maybe also using snowball analyzer.
> 2 - break the query into Shingles (word based grams) and analyze each
> shingle using the analyzers that were used in (1). then query Lucene with
> these analyzed shingles against the category index built earlier.
>
> Hopefully the category with the highest Lucene score should be the one
> intended by the user....
>
> Later on, I also intend to use some sort of training based approach using
> search queries that would have been tagged with the relevant location
> categories.
>
> What do you guys think ?
>
> Would this be a viable approach ?
>
> Thanks for all !
>
>
> Cheers
>
> Alex
>



--=20
-------------------------
Liu Fei=A3=A8=C1=F5=B7=C9=A3=A9
Institute of Software
School of Electronics Engineering & Computer Science
Peking University
Beijing, 100871, PRC.

--0016e65ae5d6dfe379047b3cfbae--

From java-user-return-44202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 21 13:30:16 2009
Return-Path: <java-user-return-44202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10427 invoked from network); 21 Dec 2009 13:30:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Dec 2009 13:30:16 -0000
Received: (qmail 35526 invoked by uid 500); 21 Dec 2009 13:30:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35452 invoked by uid 500); 21 Dec 2009 13:30:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35442 invoked by uid 99); 21 Dec 2009 13:30:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Dec 2009 13:30:13 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.210.192 as permitted sender)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Dec 2009 13:30:03 +0000
Received: by yxe30 with SMTP id 30so5922127yxe.29
        for <java-user@lucene.apache.org>; Mon, 21 Dec 2009 05:29:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=WjdNV7F5sixnHAGuqH0zp4N8VLotlJa6KK0HEaQYBBc=;
        b=pm0E3te6lSI+CAnvTn7LxjpVLf+CJrjRu6ZRDxNMCzCvDe+aXjh7tBfSD5Nj1U7wco
         +KVHo3QdrzHuJW3sfM4TvUfMgO9tOZmBzElURribN+OvH7aqbuaGjY9XD3CpIGJSMb3o
         L5KzQ1yIkMbhtrP8RgN3wXENTmxIILaniq1Y8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=KSxvFugU/Vo7hSrViaYRVhl0tMukOLRebXp90W3tPNOpWuV6hancKPCg9CbXh5VPhE
         DfotV0cA5abWEwsdNfhq3x7j14cWOfkfdYKVXf+PUQ5zYbBBT9j67xXuZ3PI/VdGtbGT
         22ZYoHmfzukd9PX+oQgrMp3Lqs1v6jCtlFt+0=
MIME-Version: 1.0
Received: by 10.91.79.18 with SMTP id g18mr5682328agl.67.1261402179290; Mon, 
	21 Dec 2009 05:29:39 -0800 (PST)
In-Reply-To: <204599e80912210522y26358728te2010be2685e1554@mail.gmail.com>
References: <76c1202b0912142023i683e2596mf99b1f7def49b233@mail.gmail.com>
	 <204599e80912151836o50378447wfb4a9b65ae0460ea@mail.gmail.com>
	 <76c1202b0912201050w149ecaacj14a032a406eebe4e@mail.gmail.com>
	 <204599e80912210522y26358728te2010be2685e1554@mail.gmail.com>
Date: Mon, 21 Dec 2009 21:29:39 +0800
Message-ID: <7d94dcde0912210529n5f9e8e84t2b64083f21491f03@mail.gmail.com>
Subject: Re: Document category identification in query
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e647123ed0c7db047b3d1475
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e647123ed0c7db047b3d1475
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

Your search service sounds very interesting. I once also thought about a
similar application for shopping.

2009/12/21 fei liu <liufeipekingu@gmail.com>

> that's a good idea. This approad will work.
>
> Supposing someone submit a query "nice rice restaurant", I think he/she
> wants to find a chinese restaurant. But you will find the category of
> "restaurant" retrieved with higher score than "chinese restaurant".
> Usually you may find no category retrieved by your approach, because user=
s'
> query doesn't share the same words with your categories' name.
> But you could have a try. If you have interesting results, let me know.
> Thanks!
>
> That's my opinion.
>
> 2009/12/21 Alex <azlist1@gmail.com>
>
> > Hi !
> >
> > Many thanks to both of you for your suggestions and answers!
> >
> > What Weiwei Wang suggests is a part of the solution I am willing to
> > implement. I will definitely use the suggest-as-you-type approach in th=
e
> > query form as it will allow for pre-emptive disambiguation and I believ=
e,
> > will give very satisfying results.
> >
> > However, search users are wild beasts and I can't count on them to alwa=
ys
> > use the given suggestions. All I can count on is very erratic, sparse a=
nd
> > ambiguous queries :) So I need an almost fool proof solution.
> >
> > To answer your question :
> > "BTW, I do not understand why you need to know the category of user
> input"
> > I am trying to understand the user intent behind the query to filter ou=
t
> > results based on a given category of locations. If a user queries "Fast
> > Food
> > in Nanjing" I don't want to return all the documents that contain the
> words
> > "Fast" and "Food" and "Nanjing". I use a custom algorithm to figure out
> the
> > intended location first. Then using the Spatial contrib I filter out th=
e
> > results based on a given area that was identified earlier. Finally I so=
rt
> > the results according to distance from the location point / centroid
> found
> > earlier.
> >
> >  Identifying the category allows me two things :
> >
> > 1) Filter out irrelevant results : I dont want my resultset to include =
a
> > Supermarket in "Nanjing" where the "food" is fresh and service is "fast=
"
> > just because the query words were included in the description of the
> > location. Since I am using custom, distance based, sorting of the
> results,
> > I
> > can't afford to have the supermarket be the top result because it is th=
e
> > closest to the location centroid identified earlier. The user intent wa=
s
> > clearly "fast food" and not a supermarket !
> >
> > 2) Understand user intent to provide targetted advertizing.
> >
> > 3) Understanding the category of location a user is looking for also
> allows
> > to calculate more accurately the bounding box  =3D the maximum distance=
 at
> > which the location should be located to be relevant to the user. A user
> > looking for Pizza in New York is expecting to have his results within a
> > radius of a maximum of 1 or 2 miles. If he is looking for a Theme Park =
he
> > will probably be willing to go further away to find it. So identifying
> the
> > category of the location the user is looking for lets me calculate the
> > didstance radius more acurately.
> >
> >
> >
> >
> > Fei Liu
> >
> > Thanks a lot for the papers you pointed me to. I cam accross them earli=
er
> > in
> > my research and re-reading them gave me new insights. However I believe
> > that
> > the Two steps approach you are recomending is not very viable under hea=
vy
> > load as it requires two passes on the index.
> > I believe however that Identifying the dominant category(ies) of the
> > resultset when no category could be clearly identified using the query
> > alone, can be very valuable if sent back to the user as an information
> and
> > a
> > category link !
> >
> > Now what I think I will do to pre-emptively identify the location
> > category(ies) implied in the query :
> >
> > 1 - use my own custom category set and index their names using the
> synonym
> > analyzer provided with Lucene and also use some sort of normalization
> such
> > as stemmin. maybe also using snowball analyzer.
> > 2 - break the query into Shingles (word based grams) and analyze each
> > shingle using the analyzers that were used in (1). then query Lucene wi=
th
> > these analyzed shingles against the category index built earlier.
> >
> > Hopefully the category with the highest Lucene score should be the one
> > intended by the user....
> >
> > Later on, I also intend to use some sort of training based approach usi=
ng
> > search queries that would have been tagged with the relevant location
> > categories.
> >
> > What do you guys think ?
> >
> > Would this be a viable approach ?
> >
> > Thanks for all !
> >
> >
> > Cheers
> >
> > Alex
> >
>
>
>
> --
> -------------------------
> Liu Fei=A3=A8=C1=F5=B7=C9=A3=A9
> Institute of Software
> School of Electronics Engineering & Computer Science
> Peking University
> Beijing, 100871, PRC.
>



--=20
Weiwei Wang
Alex Wang
=CD=F5=CE=A1=CE=A1
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--0016e647123ed0c7db047b3d1475--

From java-user-return-44203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 21 15:52:41 2009
Return-Path: <java-user-return-44203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65494 invoked from network); 21 Dec 2009 15:52:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Dec 2009 15:52:41 -0000
Received: (qmail 13644 invoked by uid 500); 21 Dec 2009 15:52:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13576 invoked by uid 500); 21 Dec 2009 15:52:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13566 invoked by uid 99); 21 Dec 2009 15:52:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Dec 2009 15:52:38 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.220.212 as permitted sender)
Received: from [209.85.220.212] (HELO mail-fx0-f212.google.com) (209.85.220.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Dec 2009 15:52:30 +0000
Received: by fxm4 with SMTP id 4so4625169fxm.12
        for <java-user@lucene.apache.org>; Mon, 21 Dec 2009 07:52:09 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=k8OnyLuycC+5SnbVmykDiH4Rwh9zb/0NqUVIOdsHuvo=;
        b=e4Ajy+QH3oLdouuV6D9Jc2kIuPPleq8NUhI0UbUH5Q8Hde9dcoqfwVg2yqfUWSlKWb
         L5COrdREqQ89BRY9Pnmmxpx5FeaSLQ8JD6rmBTUGYMco3crcgIEsgN+QIFgx+d/DoHPz
         cv9u/AZVGVcQRAyQTPl6cwN64lLiyKQtVC2D0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=odKfRVh//DlUfqye8PicKKzfp7LfwdelVBQm9INYStWOYB6IwdzQ1usFwXKtVuxUJv
         xjrrRUm8IXw5rzbguh6p0VbX8Pyk8F7kw4sIM34NhoQng9Egb+LQZ3pz6UlRsL26C91a
         6Qd9+jedXEuRXgoT5+ER0mldXpPNbIM/1DJ7s=
MIME-Version: 1.0
Received: by 10.223.20.85 with SMTP id e21mr5239380fab.25.1261410729085; Mon, 
	21 Dec 2009 07:52:09 -0800 (PST)
In-Reply-To: <9a76536b0912210426x7ad12c4aub6457de5750c7221@mail.gmail.com>
References: <9a76536b0912210426x7ad12c4aub6457de5750c7221@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 21 Dec 2009 15:51:49 +0000
Message-ID: <8c4e68610912210751pd2f602fn71f2447b3ebeafc7@mail.gmail.com>
Subject: Re: Lucene' results paging
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi


The standard approach to paging is just to do the search again and
pick out the docs you want, along the lines you outline.  You cannot
pass start/end info to any search methods.

When you set max doc to, say, 10, lucene will find the 10 highest
scoring docs and return them.  There is no point in passing a number
higher than you need.  So if you are displaying 10 hits per page, call
search(query, 10) for the first page, ..., 20 for the second and pick
out the last 10, and so on.

An alternative approach is for you to cache the search results
yourself.  That way you can avoid any subsequent searches.  But that
has it's own overhead and complexity, and most people most of the time
don't get much past the first page.


http://wiki.apache.org/lucene-java/LuceneFAQ#How_do_I_implement_paging.2C_i=
.e._showing_result_from_1-10.2C_11-20_etc.3F

--
Ian.


On Mon, Dec 21, 2009 at 12:26 PM, =D0=90=D0=BD=D1=82=D0=BE=D0=BD =D0=9A=D0=
=B8=D1=80=D0=B8=D0=BB=D0=BB=D0=BE=D0=B2
<antonv.kirillov@gmail.com> wrote:
> Hi, All! I have some problems with Lucene's search process and it's
> results, so I hope You could help me.
>
> First one: how should I split results by pages? Now I get search
> results in such way:
>
> TopDocs topDocs =3D is.search(finalQuery, 100000) //For example
>
> and after that I get the needed results in such way:
>
> //for example startPage =3D 20, endPage =3D 40
> for(int j=3DstartPage; j<stopPage; j++){
>
> doc[j-startPage] =3D is.doc(topDocs.scoreDocs[j].doc);
> }
>
> I think this is a bad approach. How should I optimize my code to make
> search faster? Is there any possibility to set start and stop pages in
> search methods?
>
> The second one:
> After the search is completed and the results are not sorted are all
> the results stored in search engine? I mean when I set the max number
> of docs in method search(finalQuery, 10) equal 10. would Lucene find
> all relevant docs, then sort them by relevance and select first ten
> after that? Or does Lucene store some specific information in indices
> which allows select first 10 most relevant docs without sorting all
> million (for example) relevant pages?
>
> Thanks in advance.
> --
> Anton Kirillov
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 21 17:52:05 2009
Return-Path: <java-user-return-44204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14282 invoked from network); 21 Dec 2009 17:52:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Dec 2009 17:52:05 -0000
Received: (qmail 7166 invoked by uid 500); 21 Dec 2009 17:52:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7102 invoked by uid 500); 21 Dec 2009 17:52:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7092 invoked by uid 99); 21 Dec 2009 17:52:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Dec 2009 17:52:02 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of elias3@gmail.com designates 72.14.220.157 as permitted sender)
Received: from [72.14.220.157] (HELO fg-out-1718.google.com) (72.14.220.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Dec 2009 17:51:53 +0000
Received: by fg-out-1718.google.com with SMTP id 16so15187fgg.5
        for <java-user@lucene.apache.org>; Mon, 21 Dec 2009 09:51:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:subject:date
         :message-id:mime-version:content-type:content-transfer-encoding
         :x-mailer:thread-index:x-mimeole;
        bh=rOHqL31PTYxdgFz1kooBr4jFDaFM/pZMKMhmSsxPAYU=;
        b=ISE4Y2egGfLDMmLYbhQucKke7eZ3Q0hCLXB4yyA5whTeIviu8WcAcSl9h19vph753x
         xmL0MxVWK33Ma2EWrdXZXtwKH1nLYw4xJaOtR9AmTHH4C3TOiclm/S9kRIHJTg2otA8U
         F7VD7I9VRmSuHggnSiPUEPK3Afkvtn44wM0XI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:subject:date:message-id:mime-version:content-type
         :content-transfer-encoding:x-mailer:thread-index:x-mimeole;
        b=NBwejq5RQirKDe1AQACvs7f8ibfvORb0/xJyZmoe9r8eupEn3MtOCBtqCRpCcS1Pvb
         cienc+zxIyVcbzDD1gJ6b3RUe20Oc07Yr5lGybbzSV6U8DRAhWWaX4qKhmbRMhFPguog
         Uk4qE+gGXovIzdVHPQ4/TNglADWRb64FKGiyU=
Received: by 10.103.67.31 with SMTP id u31mr3218330muk.71.1261417893196;
        Mon, 21 Dec 2009 09:51:33 -0800 (PST)
Received: from elias ([132.69.226.57])
        by mx.google.com with ESMTPS id w5sm1320997mue.22.2009.12.21.09.51.31
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 21 Dec 2009 09:51:32 -0800 (PST)
From: "Elias Khsheibun" <elias3@gmail.com>
To: <java-user@lucene.apache.org>
Subject: PayloadNearQuery
Date: Mon, 21 Dec 2009 19:51:25 +0200
Message-ID: <7031CC2E98874551A9D989CA7B9C6778@elias>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcqCZja4lkCoAEx0Qc2123YeWGnzkg==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

I want to have the effect of handling the first term of a phrase query as a
PayloadTermQuery and for the others just normal handling ... how can I do
that ?



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 21 18:52:04 2009
Return-Path: <java-user-return-44205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50566 invoked from network); 21 Dec 2009 18:52:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Dec 2009 18:52:04 -0000
Received: (qmail 80792 invoked by uid 500); 21 Dec 2009 18:52:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80710 invoked by uid 500); 21 Dec 2009 18:52:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80700 invoked by uid 99); 21 Dec 2009 18:52:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Dec 2009 18:52:01 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of elias3@gmail.com designates 209.85.220.212 as permitted sender)
Received: from [209.85.220.212] (HELO mail-fx0-f212.google.com) (209.85.220.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Dec 2009 18:51:52 +0000
Received: by fxm4 with SMTP id 4so4814088fxm.12
        for <java-user@lucene.apache.org>; Mon, 21 Dec 2009 10:51:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:references:subject
         :date:message-id:mime-version:content-type:content-transfer-encoding
         :x-mailer:in-reply-to:thread-index:x-mimeole;
        bh=0O7P7vkBinCDHg9zAO92LjRgALwUuPJKV3Pmdy1zQi4=;
        b=GnQg1sCMYJak4wYBr0aXHpFwnyj5OEx258+Qk/+rp9Xk/rCkFViU/7WsSzrXN2ZG1T
         RQNxaYXka8uH/UxASZFZ0h+3eWHWUnXnXZaYT1AV5h8xvXI9slHgSfpl2ssjAZqPGrBK
         7oa/e/uBOzfkMlfA9pgTTQlSbmp2eUdUfTxk0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:references:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:x-mailer:in-reply-to
         :thread-index:x-mimeole;
        b=IQF5PpYY+qCTTm3mmGAu5L6dseR/KxJ3BZDLiyKL0Xs/6kA2VxiGf9KtigqdEaflY+
         7hiiAuOOCAIx0KWJX9bYuUM4qQkHCTm2u5AHGt+DlN7mGKTsSaZyrYBZBTxhPkgEo0gh
         XZAHRtXUJZZhLIdAEEo93yKVc/hlxCvfTo5+E=
Received: by 10.103.81.14 with SMTP id i14mr3724154mul.75.1261421491973;
        Mon, 21 Dec 2009 10:51:31 -0800 (PST)
Received: from elias ([132.69.226.57])
        by mx.google.com with ESMTPS id s11sm2561475mue.49.2009.12.21.10.51.28
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 21 Dec 2009 10:51:30 -0800 (PST)
From: "Elias Khsheibun" <elias3@gmail.com>
To: <java-user@lucene.apache.org>
References: <F27F61C5C1734FFF9562E1482C98FA68@elias> <99640.7797.qm@web52908.mail.re2.yahoo.com>
Subject: RE: Payloads
Date: Mon, 21 Dec 2009 20:51:21 +0200
Message-ID: <8E218400DE95486C819AB99C83684761@elias>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <99640.7797.qm@web52908.mail.re2.yahoo.com>
Thread-Index: AcqA2fMzHeGozNWIQwSN3lrO7HFI4gBkaOAg
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you, I managed to do that for terms - but for a phrase like the
example below ("!Graph Algorithms") I'm still don't know how to do it... 

-----Original Message-----
From: AHMET ARSLAN [mailto:iorixxx@yahoo.com] 
Sent: Saturday, December 19, 2009 8:34 PM
To: java-user@lucene.apache.org
Subject: RE: Payloads


> Let's say I have a document that
> contains the following text:
> 
> "Graph Algorithms is one of the most important topics in computer 
> science"
> 
> And a query "!Graph Algorithms" then the term Graph in the query 
> should have a double weight because the offset of Graph is 0 (and it 
> is
> even) - we apply
> this doubling of weight only if a '!' operator precedes the term and 
> if its offset from the document is even.

I modified the TokenOffsetPayloadTokenFilter and created
TermPositionPayloadTokenFilter.

Index time you can use WhitespaceTokenizer + TermPositionPayloadTokenFilter
to assign payload values of 2.0f to the tokens that have an even term
position.

Modifying the QueryParser to change the meaning of ! operator is very
troublesome.
If you can convert your query "!Graph Algorithms" to "Graph|2.0 Algorithms"
you can use DelimitedPayloadTokenFilter to set payload of marked term. 

Additionally you need to everride QueryParser to return PayloadTermQuery and
scorePayload method of DefaultSimilarity.
By doing so payloads will be included in score calculation.


public class PayloadAnalyzer extends Analyzer {

    public TokenStream tokenStream(String fieldName, Reader reader) {
        TokenStream result = new WhitespaceTokenizer(reader);
        result = new DelimitedPayloadTokenFilter(result, '|', new
FloatEncoder());
        return result;
    }

    public static void main(String[] args) throws ParseException {
        QueryParser qp = new QueryParser(Version.LUCENE_29, "f", new
PayloadAnalyzer());
        System.out.println(qp.parse("Graph|2.0 Algorithms").toString());
    }

}
public class TermPositionPayloadTokenFilter extends TokenFilter {

    protected PayloadAttribute payAtt;
    protected PositionIncrementAttribute posIncrAtt;

    private static final Payload evenPayload = new
Payload(PayloadHelper.encodeFloat(2.0f));

    private int termPosition = 0;

    public TermPositionPayloadTokenFilter(TokenStream input) {
        super(input);
        payAtt = (PayloadAttribute) addAttribute(PayloadAttribute.class);
        posIncrAtt = (PositionIncrementAttribute)
addAttribute(PositionIncrementAttribute.class);
    }

    public final boolean incrementToken() throws IOException {
        if (input.incrementToken()) {
            if ((termPosition % 2) == 0)
                payAtt.setPayload(evenPayload);
            termPosition += posIncrAtt.getPositionIncrement();
            return true;
        } else {
            return false;
        }
    }

    public static void main(String[] args) throws IOException {
        String test = "Graph Algorithms is one of the most important topics
in computer science";
        TokenStream tokenStream = new TermPositionPayloadTokenFilter(new
WhitespaceTokenizer(new StringReader(test)));
        TermAttribute termAtt = (TermAttribute)
tokenStream.getAttribute(TermAttribute.class);
        PayloadAttribute payloadAtt = (PayloadAttribute)
tokenStream.getAttribute(PayloadAttribute.class);

        while (tokenStream.incrementToken()) {
            System.out.print(termAtt.term());
            Payload payload = payloadAtt.getPayload();
            if (payload != null)
                System.out.println(" Payload = " +
PayloadHelper.decodeFloat(payload.toByteArray()));
            else
                System.out.println(" Payload is null.");
        }
    }
}


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 21 19:45:31 2009
Return-Path: <java-user-return-44206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68633 invoked from network); 21 Dec 2009 19:45:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Dec 2009 19:45:30 -0000
Received: (qmail 66309 invoked by uid 500); 21 Dec 2009 19:45:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66236 invoked by uid 500); 21 Dec 2009 19:45:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66226 invoked by uid 99); 21 Dec 2009 19:45:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Dec 2009 19:45:28 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Dec 2009 19:45:18 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 850E7D36003
	for <java-user@lucene.apache.org>; Mon, 21 Dec 2009 20:44:58 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id zvdfNc5JxheE for <java-user@lucene.apache.org>;
	Mon, 21 Dec 2009 20:44:45 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 3899AD36002
	for <java-user@lucene.apache.org>; Mon, 21 Dec 2009 20:44:44 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <7031CC2E98874551A9D989CA7B9C6778@elias>
Subject: RE: PayloadNearQuery
Date: Mon, 21 Dec 2009 20:44:43 +0100
Message-ID: <487455807D664E60B3EE204521ECDBFD@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <7031CC2E98874551A9D989CA7B9C6778@elias>
Thread-Index: AcqCZja4lkCoAEx0Qc2123YeWGnzkgAD52Gg
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

It is as you describe:

PayloadTermQuery is a subclass of SpanQuery. So create a SpanNearQuery with
slop=0 and order=true and add first the PayloadNearQuery, then the rest of
the phrase terms as SpanTermQuery in order of appearance.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Elias Khsheibun [mailto:elias3@gmail.com]
> Sent: Monday, December 21, 2009 6:51 PM
> To: java-user@lucene.apache.org
> Subject: PayloadNearQuery
> 
> I want to have the effect of handling the first term of a phrase query as
> a
> PayloadTermQuery and for the others just normal handling ... how can I do
> that ?
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 21 20:02:25 2009
Return-Path: <java-user-return-44207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75729 invoked from network); 21 Dec 2009 20:02:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Dec 2009 20:02:25 -0000
Received: (qmail 93495 invoked by uid 500); 21 Dec 2009 20:02:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93402 invoked by uid 500); 21 Dec 2009 20:02:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93392 invoked by uid 99); 21 Dec 2009 20:02:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Dec 2009 20:02:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of elias3@gmail.com designates 209.85.220.212 as permitted sender)
Received: from [209.85.220.212] (HELO mail-fx0-f212.google.com) (209.85.220.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Dec 2009 20:02:12 +0000
Received: by fxm4 with SMTP id 4so4877614fxm.12
        for <java-user@lucene.apache.org>; Mon, 21 Dec 2009 12:01:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:references:subject
         :date:message-id:mime-version:content-type:content-transfer-encoding
         :x-mailer:in-reply-to:thread-index:x-mimeole;
        bh=x1sFoIVD+7gpHHVoob/6EbK7vJq9GMCUE7hkIXmOHok=;
        b=a2yKe1EUfO7xn5rjnzSQYL8OeEcP8LmNW/Uo/if4QXYgNytInajkxd3CsHFZ6YgFqK
         zmP6Rzu5ztP8OO4jX172CxXUlpdonOzDz/rLL9JUZ11zlhV5gfRwHPnoN5BN0spq65VR
         jO8PfTvIHzuKcoFN71Tq/7GFiTiuAiCUgnnVo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:references:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:x-mailer:in-reply-to
         :thread-index:x-mimeole;
        b=WghovYWLScivOSgWHJ7Ks13QF3bQo4Ztm55G5t2MLvtYcJZoNAsYAhxLz6v6NkguWF
         FuDygCdCCGYhikGBuXlpEMR1U8T4q1TXMdeya7BzBUIvdryiyUCOPiuWAGWpfZJQZL8Q
         hi2iVAkwKUxQwGGGll6OHBKBWIcmbR1IiQmrA=
Received: by 10.103.7.24 with SMTP id k24mr109223mui.9.1261425711353;
        Mon, 21 Dec 2009 12:01:51 -0800 (PST)
Received: from elias ([132.69.226.57])
        by mx.google.com with ESMTPS id 14sm6810197muo.34.2009.12.21.12.01.48
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 21 Dec 2009 12:01:50 -0800 (PST)
From: "Elias Khsheibun" <elias3@gmail.com>
To: <java-user@lucene.apache.org>
References: <7031CC2E98874551A9D989CA7B9C6778@elias> <487455807D664E60B3EE204521ECDBFD@VEGA>
Subject: RE: PayloadNearQuery
Date: Mon, 21 Dec 2009 22:01:42 +0200
Message-ID: <6A27536AC8104C808FA9621F40E72C21@elias>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <487455807D664E60B3EE204521ECDBFD@VEGA>
Thread-Index: AcqCZja4lkCoAEx0Qc2123YeWGnzkgAD52GgAACRYlA=
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

How can I add the first the PayloadNearQuery, I only add clauses.. (It is
only one term I did the following code - this code doesn't provide the
needed effect).

SpanTermQuery [] spanTerms = new SpanTermQuery[terms.length];

spanTerms[0] = new PayloadTermQuery(new Term(field,terms[0]),new
AveragePayloadFunction());
				
for (int i=1 ; i<terms.length ; i++)
{
	spanTerms[i] = new SpanTermQuery(new Term(field,terms[i]));
}

SpanNearQuery x = new SpanNearQuery(spanTerms, 0, true);	 

-----Original Message-----
From: Uwe Schindler [mailto:uwe@thetaphi.de] 
Sent: Monday, December 21, 2009 9:45 PM
To: java-user@lucene.apache.org
Subject: RE: PayloadNearQuery

It is as you describe:

PayloadTermQuery is a subclass of SpanQuery. So create a SpanNearQuery with
slop=0 and order=true and add first the PayloadNearQuery, then the rest of
the phrase terms as SpanTermQuery in order of appearance.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Elias Khsheibun [mailto:elias3@gmail.com]
> Sent: Monday, December 21, 2009 6:51 PM
> To: java-user@lucene.apache.org
> Subject: PayloadNearQuery
> 
> I want to have the effect of handling the first term of a phrase query 
> as a PayloadTermQuery and for the others just normal handling ... how 
> can I do that ?
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 21 21:06:06 2009
Return-Path: <java-user-return-44208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93341 invoked from network); 21 Dec 2009 21:06:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Dec 2009 21:06:06 -0000
Received: (qmail 64204 invoked by uid 500); 21 Dec 2009 21:06:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64106 invoked by uid 500); 21 Dec 2009 21:06:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64096 invoked by uid 99); 21 Dec 2009 21:06:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Dec 2009 21:06:03 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gsiasf@gmail.com designates 209.85.211.185 as permitted sender)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Dec 2009 21:05:53 +0000
Received: by ywh15 with SMTP id 15so5805339ywh.5
        for <java-user@lucene.apache.org>; Mon, 21 Dec 2009 13:05:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:content-type:mime-version
         :subject:from:in-reply-to:date:content-transfer-encoding:message-id
         :references:to:x-mailer;
        bh=KDiFE3e4cn41Wz5AUhoapjsKmKq+uJxvjNFBtA8XFvQ=;
        b=QN9UfLCQ7lb/Q76GEHCwhd2YvQfB/AZvCDCAGxFDic7dBh/MLbXB8cLlg32O7Uk0+G
         f0yeBjyViYMTBEdJW5rRKvD8hHhBxg8BhGgXltsn93mvvCBZZc1TkAL1Xik9iVgFASLH
         ElCjHf0GLY1R4iabKoeJwKEYPw50pFPm31dIo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=vb+h012wqSo8NPkjByOt19D0I3D/x9Avtp54/qfRaN/yCiY+ZV1md3lCSjDM5bBLc2
         K8sRuxjbbM0535fSNbD5XTbT3N4QDld+izF1JiHv1+s+wWIDLY8L7igY79EZkqDWAFbE
         6lj1bRdDzukij2WUlScfyW0IZLW2gzU8cSvGQ=
Received: by 10.150.17.37 with SMTP id 37mr11856953ybq.285.1261429532592;
        Mon, 21 Dec 2009 13:05:32 -0800 (PST)
Received: from ?192.168.1.104? (cpe-071-071-234-029.carolina.res.rr.com [71.71.234.29])
        by mx.google.com with ESMTPS id 23sm2516196yxe.36.2009.12.21.13.05.31
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 21 Dec 2009 13:05:32 -0800 (PST)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1077)
Subject: Re: PayloadNearQuery
From: Grant Ingersoll <gsiasf@gmail.com>
In-Reply-To: <487455807D664E60B3EE204521ECDBFD@VEGA>
Date: Mon, 21 Dec 2009 16:05:30 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <760794D6-79C3-405B-88FF-A63D26D4113A@gmail.com>
References: <7031CC2E98874551A9D989CA7B9C6778@elias> <487455807D664E60B3EE204521ECDBFD@VEGA>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1077)
X-Virus-Checked: Checked by ClamAV on apache.org

I don't think that will work, as I don't believe that the SpanQueries =
delegate scoring to the subclauses.  Instead, they just rely on =
iterating the spans.

-Grant

On Dec 21, 2009, at 2:44 PM, Uwe Schindler wrote:

> It is as you describe:
>=20
> PayloadTermQuery is a subclass of SpanQuery. So create a SpanNearQuery =
with
> slop=3D0 and order=3Dtrue and add first the PayloadNearQuery, then the =
rest of
> the phrase terms as SpanTermQuery in order of appearance.
>=20
> Uwe
>=20
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>=20
>> -----Original Message-----
>> From: Elias Khsheibun [mailto:elias3@gmail.com]
>> Sent: Monday, December 21, 2009 6:51 PM
>> To: java-user@lucene.apache.org
>> Subject: PayloadNearQuery
>>=20
>> I want to have the effect of handling the first term of a phrase =
query as
>> a
>> PayloadTermQuery and for the others just normal handling ... how can =
I do
>> that ?
>>=20
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 21 21:18:46 2009
Return-Path: <java-user-return-44209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97125 invoked from network); 21 Dec 2009 21:18:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Dec 2009 21:18:46 -0000
Received: (qmail 81942 invoked by uid 500); 21 Dec 2009 21:18:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81868 invoked by uid 500); 21 Dec 2009 21:18:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81858 invoked by uid 99); 21 Dec 2009 21:18:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Dec 2009 21:18:44 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Dec 2009 21:18:34 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 45DF2D36004
	for <java-user@lucene.apache.org>; Mon, 21 Dec 2009 22:18:14 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id x+McqUmMMvZ4 for <java-user@lucene.apache.org>;
	Mon, 21 Dec 2009 22:18:04 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 42CAAD36002
	for <java-user@lucene.apache.org>; Mon, 21 Dec 2009 22:18:04 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <7031CC2E98874551A9D989CA7B9C6778@elias> <487455807D664E60B3EE204521ECDBFD@VEGA> <760794D6-79C3-405B-88FF-A63D26D4113A@gmail.com>
Subject: RE: PayloadNearQuery
Date: Mon, 21 Dec 2009 22:18:03 +0100
Message-ID: <A04F0B978EB746FF8501C598258BBAD9@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <760794D6-79C3-405B-88FF-A63D26D4113A@gmail.com>
Thread-Index: AcqCgXIX6aO4xOb9QYOPpDY89S1W9gAAYzwQ
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

Then I have no other idea how to solve this. It seems that Elias has already
noticed that behaviour.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Grant Ingersoll [mailto:gsiasf@gmail.com]
> Sent: Monday, December 21, 2009 10:05 PM
> To: java-user@lucene.apache.org
> Subject: Re: PayloadNearQuery
> 
> I don't think that will work, as I don't believe that the SpanQueries
> delegate scoring to the subclauses.  Instead, they just rely on iterating
> the spans.
> 
> -Grant
> 
> On Dec 21, 2009, at 2:44 PM, Uwe Schindler wrote:
> 
> > It is as you describe:
> >
> > PayloadTermQuery is a subclass of SpanQuery. So create a SpanNearQuery
> with
> > slop=0 and order=true and add first the PayloadNearQuery, then the rest
> of
> > the phrase terms as SpanTermQuery in order of appearance.
> >
> > Uwe
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> >> -----Original Message-----
> >> From: Elias Khsheibun [mailto:elias3@gmail.com]
> >> Sent: Monday, December 21, 2009 6:51 PM
> >> To: java-user@lucene.apache.org
> >> Subject: PayloadNearQuery
> >>
> >> I want to have the effect of handling the first term of a phrase query
> as
> >> a
> >> PayloadTermQuery and for the others just normal handling ... how can I
> do
> >> that ?
> >>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 21 21:48:35 2009
Return-Path: <java-user-return-44210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12512 invoked from network); 21 Dec 2009 21:48:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Dec 2009 21:48:35 -0000
Received: (qmail 9787 invoked by uid 500); 21 Dec 2009 21:48:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9689 invoked by uid 500); 21 Dec 2009 21:48:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9679 invoked by uid 99); 21 Dec 2009 21:48:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Dec 2009 21:48:32 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of elias3@gmail.com designates 209.85.220.212 as permitted sender)
Received: from [209.85.220.212] (HELO mail-fx0-f212.google.com) (209.85.220.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Dec 2009 21:48:22 +0000
Received: by fxm4 with SMTP id 4so4959085fxm.12
        for <java-user@lucene.apache.org>; Mon, 21 Dec 2009 13:48:02 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:references:subject
         :date:message-id:mime-version:content-type:content-transfer-encoding
         :x-mailer:in-reply-to:thread-index:x-mimeole;
        bh=4oQpJEGqDxb09/bMT0ZDmcI/+nqbbr0VNMqk3u+g7mo=;
        b=f3PCxzdhw/Pq/tVxNlGNF7H5TeklUX+nvio6PySFG+tcyeoU3qkha95KNTGhZKbMdt
         WfJYjEzKPxb22vRztyqWi84TiG0/9Sfpxl6T1w+SOFZ621d+sd5MQEK+ShB/OFADCNdV
         RMaki7ymksxQoilrY9Uww1fnxy9pDVHINLA+E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:references:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:x-mailer:in-reply-to
         :thread-index:x-mimeole;
        b=KjTXP6WP6wHrdoCalTw6rJiEa/Thhsz6a7sJOQyeDflmIsKjvFU6wz2sTwe7NhqNkp
         dOmBh6G4lFqkdwU3aCuRVOEtrPmHkAtcxuDDeDvaiP2cWbZ3c3MHS+Ccrw6yWR1WDl23
         RIfFAgBFNJ6TQ9qLgf/ZunFByg4ghhtIYJE4M=
Received: by 10.102.95.4 with SMTP id s4mr3816140mub.47.1261432082137;
        Mon, 21 Dec 2009 13:48:02 -0800 (PST)
Received: from elias ([132.69.226.57])
        by mx.google.com with ESMTPS id g1sm18277343muf.14.2009.12.21.13.48.00
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 21 Dec 2009 13:48:01 -0800 (PST)
From: "Elias Khsheibun" <elias3@gmail.com>
To: <java-user@lucene.apache.org>
References: <7031CC2E98874551A9D989CA7B9C6778@elias> <487455807D664E60B3EE204521ECDBFD@VEGA> <760794D6-79C3-405B-88FF-A63D26D4113A@gmail.com> <A04F0B978EB746FF8501C598258BBAD9@VEGA>
Subject: RE: PayloadNearQuery
Date: Mon, 21 Dec 2009 23:47:53 +0200
Message-ID: <DF2B4F821EEF40ED831FBAEF8F6D0524@elias>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <A04F0B978EB746FF8501C598258BBAD9@VEGA>
Thread-Index: AcqCgXIX6aO4xOb9QYOPpDY89S1W9gAAYzwQAAD/jJA=
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

You are right, that is the behavior that I'm getting, any other ideas then ?

-----Original Message-----
From: Uwe Schindler [mailto:uwe@thetaphi.de] 
Sent: Monday, December 21, 2009 11:18 PM
To: java-user@lucene.apache.org
Subject: RE: PayloadNearQuery

Then I have no other idea how to solve this. It seems that Elias has already
noticed that behaviour.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Grant Ingersoll [mailto:gsiasf@gmail.com]
> Sent: Monday, December 21, 2009 10:05 PM
> To: java-user@lucene.apache.org
> Subject: Re: PayloadNearQuery
> 
> I don't think that will work, as I don't believe that the SpanQueries 
> delegate scoring to the subclauses.  Instead, they just rely on 
> iterating the spans.
> 
> -Grant
> 
> On Dec 21, 2009, at 2:44 PM, Uwe Schindler wrote:
> 
> > It is as you describe:
> >
> > PayloadTermQuery is a subclass of SpanQuery. So create a 
> > SpanNearQuery
> with
> > slop=0 and order=true and add first the PayloadNearQuery, then the 
> > rest
> of
> > the phrase terms as SpanTermQuery in order of appearance.
> >
> > Uwe
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> >> -----Original Message-----
> >> From: Elias Khsheibun [mailto:elias3@gmail.com]
> >> Sent: Monday, December 21, 2009 6:51 PM
> >> To: java-user@lucene.apache.org
> >> Subject: PayloadNearQuery
> >>
> >> I want to have the effect of handling the first term of a phrase 
> >> query
> as
> >> a
> >> PayloadTermQuery and for the others just normal handling ... how 
> >> can I
> do
> >> that ?
> >>
> >>
> >>
> >> -------------------------------------------------------------------
> >> -- To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> > --------------------------------------------------------------------
> > - To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 21 22:01:48 2009
Return-Path: <java-user-return-44211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19773 invoked from network); 21 Dec 2009 22:01:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 21 Dec 2009 22:01:47 -0000
Received: (qmail 29258 invoked by uid 500); 21 Dec 2009 22:01:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29183 invoked by uid 500); 21 Dec 2009 22:01:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29173 invoked by uid 99); 21 Dec 2009 22:01:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Dec 2009 22:01:45 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ctignor@thinkmap.com designates 74.125.92.25 as permitted sender)
Received: from [74.125.92.25] (HELO qw-out-2122.google.com) (74.125.92.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Dec 2009 22:01:37 +0000
Received: by qw-out-2122.google.com with SMTP id 3so11478qwe.53
        for <java-user@lucene.apache.org>; Mon, 21 Dec 2009 14:01:16 -0800 (PST)
MIME-Version: 1.0
Received: by 10.229.59.227 with SMTP id m35mr697384qch.93.1261432876620; Mon, 
	21 Dec 2009 14:01:16 -0800 (PST)
Date: Mon, 21 Dec 2009 17:01:16 -0500
Message-ID: <6f287d1b0912211401xab31ba5wc7733ca25da880a4@mail.gmail.com>
Subject: minimum range for SpanQueries
From: Christopher Tignor <ctignor@thinkmap.com>
To: java-user <java-user@lucene.apache.org>
Content-Type: multipart/alternative; boundary=00235479130884dd2d047b443a93
X-Virus-Checked: Checked by ClamAV on apache.org

--00235479130884dd2d047b443a93
Content-Type: text/plain; charset=ISO-8859-1

Is there are way to implement a minimum range for a SpanQuery or combination
thereof?

For example, using:

"The boy said hello to the boy"

I'd like to use a SpanNearQuery consisting of the terms "The" and "boy" that
returns one span including the entire sentence but not a span for the first
two words.
Thus, I'd like to specify a minimum range of at least 1 and a maximum of
say, 5 here.

I note that using a SpanNotQuery consisting of two SpanNearQueries with the
same terms and these above ranges does not work as the desired longer
SpanResult will include the shorter one and get weeded out.

thanks -

C>T>

-- 
TH!NKMAP

Christopher Tignor | Senior Software Architect
155 Spring Street NY, NY 10012
p.212-285-8600 x385 f.212-285-8999

--00235479130884dd2d047b443a93--

From java-user-return-44212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 22 02:16:55 2009
Return-Path: <java-user-return-44212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15952 invoked from network); 22 Dec 2009 02:16:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Dec 2009 02:16:55 -0000
Received: (qmail 8255 invoked by uid 500); 22 Dec 2009 02:16:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7475 invoked by uid 500); 22 Dec 2009 02:16:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7450 invoked by uid 99); 22 Dec 2009 02:16:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Dec 2009 02:16:24 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of john.wang@gmail.com designates 209.85.222.176 as permitted sender)
Received: from [209.85.222.176] (HELO mail-pz0-f176.google.com) (209.85.222.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Dec 2009 02:16:16 +0000
Received: by pzk6 with SMTP id 6so4141415pzk.29
        for <multiple recipients>; Mon, 21 Dec 2009 18:15:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=tmhyJ7OTZlBCxNnzAlKaj53q1rawNGRxMPlngPlgUxM=;
        b=fcE8NrVZwPaiF07I+zxXpI6nSrdIf3Q8Q8OBhgzB3XdD8CjHZHDLM2g+FdIeraym0F
         PwblnzebTV+9nbp4+noIJ0uFpB20FJrLS5AiVNNBo8afDe9BFvoBjEYvmykyzPLJS+IB
         56PjoX8hrhwDmerVMLJgA8CkKrposevarYMY8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=GlODfTExqsLeHqMO1YWq1+FvwN2Yop42O1Mnk7GZkvvqZsJjGjXYhpNXegicwUojb3
         vJpJY4J6yItinCzvaq+FYQ+eVxUR9LEsZ23hZCipY/jnrEi++Pfq+K8XJZLV2oQsjN1P
         uDy3KybmRSvfgRl/QlzMr+1X2GGH+dSq4360k=
MIME-Version: 1.0
Received: by 10.114.250.36 with SMTP id x36mr5446589wah.21.1261448154859; Mon, 
	21 Dec 2009 18:15:54 -0800 (PST)
In-Reply-To: <8837fb770912211121k5b9e1c43va785ca9ed8b3cf0f@mail.gmail.com>
References: <8837fb770912211121k5b9e1c43va785ca9ed8b3cf0f@mail.gmail.com>
Date: Mon, 21 Dec 2009 18:15:54 -0800
Message-ID: <8837fb770912211815n3f022e9fx1e7e2495800fc93f@mail.gmail.com>
Subject: Fwd: 3.0 api change
From: John Wang <john.wang@gmail.com>
To: java-user@lucene.apache.org, java-dev@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016367f93082c48d5047b47c94f
X-Virus-Checked: Checked by ClamAV on apache.org

--0016367f93082c48d5047b47c94f
Content-Type: text/plain; charset=ISO-8859-1

Any comments?
Did we just unintentionally remove getFieldComparatorSource in 3.0.0?

-John

---------- Forwarded message ----------
From: John Wang <john.wang@gmail.com>
Date: Mon, Dec 21, 2009 at 11:21 AM
Subject: 3.0 api change
To: Lucene Users List <lucene-user@jakarta.apache.org>,
lucene-dev@jakarta.apache.org


Hi guys:

    I noticed SortField.getComparatorSource was removed (replaced by
getComparator) and it is not documented in CHANGES.TXT. This api was
introduced in 2.9.0.

    Is this intentional?

Thanks

-John

--0016367f93082c48d5047b47c94f--

From java-user-return-44213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 22 12:02:28 2009
Return-Path: <java-user-return-44213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6646 invoked from network); 22 Dec 2009 12:02:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Dec 2009 12:02:28 -0000
Received: (qmail 48949 invoked by uid 500); 22 Dec 2009 12:00:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48908 invoked by uid 500); 22 Dec 2009 12:00:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48897 invoked by uid 99); 22 Dec 2009 12:00:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Dec 2009 12:00:32 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Dec 2009 12:00:22 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NN3PG-0004g1-Di
	for java-user@lucene.apache.org; Tue, 22 Dec 2009 04:00:02 -0800
Message-ID: <26887263.post@talk.nabble.com>
Date: Tue, 22 Dec 2009 04:00:02 -0800 (PST)
From: TejKiran <tejkiransharma@gmail.com>
To: java-user@lucene.apache.org
Subject: Cannot overwrite "_0.fdt" file
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: tejkiransharma@gmail.com


Hi,
I am indexing some data and then searching on indexed data to find then
doing some action on that.
while i close the application, i am deleting these indexed data from
TempIndex folder like here "20091019237559". and for deleting i am
maintaining list of which file/folder created in current running application
because i can run multiple instance of my program.
i am getting following exception , when it could be occurred and how it can
be solved.

---------------------------------------------------------------------------------------------------- 
Cannot overwrite: ..\Temp\TempIndex\20091019237559\_0.fdtStacktrace
java.io.IOException: Cannot overwrite:
..\Temp\TempIndex\20091019237559\_0.fdt	at
org.apache.lucene.store.FSDirectory.createOutput(Unknown Source)	at
org.apache.lucene.index.FieldsWriter.<init>(Unknown Source)	at
org.apache.lucene.index.StoredFieldsWriter.initFieldsWriter(Unknown Source)
at org.apache.lucene.index.StoredFieldsWriter.finishDocument(Unknown Source)
at org.apache.lucene.index.StoredFieldsWriter$PerDoc.finish(Unknown Source)
at org.apache.lucene.index.DocumentsWriter$WaitQueue.writeDocument(Unknown
Source)	at org.apache.lucene.index.DocumentsWriter$WaitQueue.add(Unknown
Source)	at org.apache.lucene.index.DocumentsWriter.finishDocument(Unknown
Source)	at org.apache.lucene.index.DocumentsWriter.updateDocument(Unknown
Source)	at org.apache.lucene.index.DocumentsWriter.addDocument(Unknown
Source)	at org.apache.lucene.index.IndexWriter.addDocument(Unknown Source)
at org.apache.lucene.index.IndexWriter.addDocument(Unknown Source)	
----------------------------------------------------------------------------------------------------

Thanks in advance

Tej Kiran Sharma
-- 
View this message in context: http://old.nabble.com/Cannot-overwrite-%22_0.fdt%22-file-tp26887263p26887263.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 22 12:06:04 2009
Return-Path: <java-user-return-44214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8367 invoked from network); 22 Dec 2009 12:06:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Dec 2009 12:06:04 -0000
Received: (qmail 65397 invoked by uid 500); 22 Dec 2009 12:05:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65358 invoked by uid 500); 22 Dec 2009 12:05:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65348 invoked by uid 99); 22 Dec 2009 12:05:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Dec 2009 12:05:43 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of antonv.kirillov@gmail.com designates 72.14.220.152 as permitted sender)
Received: from [72.14.220.152] (HELO fg-out-1718.google.com) (72.14.220.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Dec 2009 12:05:35 +0000
Received: by fg-out-1718.google.com with SMTP id 16so266776fgg.5
        for <java-user@lucene.apache.org>; Tue, 22 Dec 2009 04:05:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=I9+omdfuEoXA48RYEHTyBRAgjogKLndTeIgS6ihPMqI=;
        b=B1RUmlbIpK4v0vUk+zCj81BcBoX2vBb+49LXQ8FP0g1F8TK3zKddXCPME33t75Qdiq
         CryfRESsOqk2J2Zt9z/x1MqcF6WNZvbGtuSyZPmzR4J+3CxDPB5tESWV+nsrqnh0mr2K
         MdUodZ0GDD0kY3NgROL3yHtWcvpA0gbX4IuIM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=gDxoHq/eAoXodEsha9O5E+R5bR1HIIiSimolikKzZ30XBWNMvLWNqi5H7nfcooP3ed
         Oyh2sDU/nU5EpfbX1ORkGc+AXdiDu8Atnw4gynNcQeW28OgKwYlltXwUtDb5Z75lHVrQ
         1QhDwOx5GsnRExlbumWJmzKzU5BJu91fgSRts=
MIME-Version: 1.0
Received: by 10.87.42.37 with SMTP id u37mr700358fgj.68.1261483515408; Tue, 22 
	Dec 2009 04:05:15 -0800 (PST)
In-Reply-To: <8c4e68610912210751pd2f602fn71f2447b3ebeafc7@mail.gmail.com>
References: <9a76536b0912210426x7ad12c4aub6457de5750c7221@mail.gmail.com>
	 <8c4e68610912210751pd2f602fn71f2447b3ebeafc7@mail.gmail.com>
Date: Tue, 22 Dec 2009 15:05:15 +0300
Message-ID: <9a76536b0912220405i295390f2j94bbf482a957467f@mail.gmail.com>
Subject: Re: Lucene' results paging
From: =?UTF-8?B?0JDQvdGC0L7QvSDQmtC40YDQuNC70LvQvtCy?= <antonv.kirillov@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=KOI8-R
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for your answer. But how should I get the total nubmer of
search results in this case?

On Mon, Dec 21, 2009 at 6:51 PM, Ian Lea <ian.lea@gmail.com> wrote:
> Hi
>
>
> The standard approach to paging is just to do the search again and
> pick out the docs you want, along the lines you outline. =9AYou cannot
> pass start/end info to any search methods.
>
> When you set max doc to, say, 10, lucene will find the 10 highest
> scoring docs and return them. =9AThere is no point in passing a number
> higher than you need. =9ASo if you are displaying 10 hits per page, call
> search(query, 10) for the first page, ..., 20 for the second and pick
> out the last 10, and so on.
>
> An alternative approach is for you to cache the search results
> yourself. =9AThat way you can avoid any subsequent searches. =9ABut that
> has it's own overhead and complexity, and most people most of the time
> don't get much past the first page.
>
>
> http://wiki.apache.org/lucene-java/LuceneFAQ#How_do_I_implement_paging.2C=
_i.e._showing_result_from_1-10.2C_11-20_etc.3F
>
> --
> Ian.
>
>
> On Mon, Dec 21, 2009 at 12:26 PM, =E1=CE=D4=CF=CE =EB=C9=D2=C9=CC=CC=CF=
=D7
> <antonv.kirillov@gmail.com> wrote:
>> Hi, All! I have some problems with Lucene's search process and it's
>> results, so I hope You could help me.
>>
>> First one: how should I split results by pages? Now I get search
>> results in such way:
>>
>> TopDocs topDocs =3D is.search(finalQuery, 100000) //For example
>>
>> and after that I get the needed results in such way:
>>
>> //for example startPage =3D 20, endPage =3D 40
>> for(int j=3DstartPage; j<stopPage; j++){
>>
>> doc[j-startPage] =3D is.doc(topDocs.scoreDocs[j].doc);
>> }
>>
>> I think this is a bad approach. How should I optimize my code to make
>> search faster? Is there any possibility to set start and stop pages in
>> search methods?
>>
>> The second one:
>> After the search is completed and the results are not sorted are all
>> the results stored in search engine? I mean when I set the max number
>> of docs in method search(finalQuery, 10) equal 10. would Lucene find
>> all relevant docs, then sort them by relevance and select first ten
>> after that? Or does Lucene store some specific information in indices
>> which allows select first 10 most relevant docs without sorting all
>> million (for example) relevant pages?
>>
>> Thanks in advance.
>> --
>> Anton Kirillov
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
=F3 =D5=D7=C1=D6=C5=CE=C9=C5=CD, =EB=C9=D2=C9=CC=CC=CF=D7 =E1=CE=D4=CF=CE

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 22 12:30:29 2009
Return-Path: <java-user-return-44215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12593 invoked from network); 22 Dec 2009 12:30:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Dec 2009 12:30:29 -0000
Received: (qmail 92383 invoked by uid 500); 22 Dec 2009 12:30:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92337 invoked by uid 500); 22 Dec 2009 12:30:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92327 invoked by uid 99); 22 Dec 2009 12:30:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Dec 2009 12:30:27 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Dec 2009 12:30:15 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 5C295D3600D
	for <java-user@lucene.apache.org>; Tue, 22 Dec 2009 13:29:51 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id oJXljhZPV6ni for <java-user@lucene.apache.org>;
	Tue, 22 Dec 2009 13:29:41 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 41160D36002
	for <java-user@lucene.apache.org>; Tue, 22 Dec 2009 13:29:41 +0100 (CET)
thread-index: AcqC/ymew8GwaS67SrSJmCiIYUPFxgAAzqYA
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <9a76536b0912210426x7ad12c4aub6457de5750c7221@mail.gmail.com> <8c4e68610912210751pd2f602fn71f2447b3ebeafc7@mail.gmail.com> <9a76536b0912220405i295390f2j94bbf482a957467f@mail.gmail.com>
Subject: RE: Lucene' results paging
Date: Tue, 22 Dec 2009 13:29:41 +0100
Message-ID: <70374D82CB7843279AF1181DBB652191@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="KOI8-R"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <9a76536b0912220405i295390f2j94bbf482a957467f@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579

Ist inside TopDocs class as a getter method.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: =E1=CE=D4=CF=CE =EB=C9=D2=C9=CC=CC=CF=D7 =
[mailto:antonv.kirillov@gmail.com]
> Sent: Tuesday, December 22, 2009 1:05 PM
> To: java-user@lucene.apache.org
> Subject: Re: Lucene' results paging
>=20
> Thanks for your answer. But how should I get the total nubmer of
> search results in this case?
>=20
> On Mon, Dec 21, 2009 at 6:51 PM, Ian Lea <ian.lea@gmail.com> wrote:
> > Hi
> >
> >
> > The standard approach to paging is just to do the search again and
> > pick out the docs you want, along the lines you outline. =9AYou =
cannot
> > pass start/end info to any search methods.
> >
> > When you set max doc to, say, 10, lucene will find the 10 highest
> > scoring docs and return them. =9AThere is no point in passing a =
number
> > higher than you need. =9ASo if you are displaying 10 hits per page, =
call
> > search(query, 10) for the first page, ..., 20 for the second and =
pick
> > out the last 10, and so on.
> >
> > An alternative approach is for you to cache the search results
> > yourself. =9AThat way you can avoid any subsequent searches. =9ABut =
that
> > has it's own overhead and complexity, and most people most of the =
time
> > don't get much past the first page.
> >
> >
> > http://wiki.apache.org/lucene-
> =
java/LuceneFAQ#How_do_I_implement_paging.2C_i.e._showing_result_from_1-
> 10.2C_11-20_etc.3F
> >
> > --
> > Ian.
> >
> >
> > On Mon, Dec 21, 2009 at 12:26 PM, =E1=CE=D4=CF=CE =
=EB=C9=D2=C9=CC=CC=CF=D7
> > <antonv.kirillov@gmail.com> wrote:
> >> Hi, All! I have some problems with Lucene's search process and it's
> >> results, so I hope You could help me.
> >>
> >> First one: how should I split results by pages? Now I get search
> >> results in such way:
> >>
> >> TopDocs topDocs =3D is.search(finalQuery, 100000) //For example
> >>
> >> and after that I get the needed results in such way:
> >>
> >> //for example startPage =3D 20, endPage =3D 40
> >> for(int j=3DstartPage; j<stopPage; j++){
> >>
> >> doc[j-startPage] =3D is.doc(topDocs.scoreDocs[j].doc);
> >> }
> >>
> >> I think this is a bad approach. How should I optimize my code to =
make
> >> search faster? Is there any possibility to set start and stop pages =
in
> >> search methods?
> >>
> >> The second one:
> >> After the search is completed and the results are not sorted are =
all
> >> the results stored in search engine? I mean when I set the max =
number
> >> of docs in method search(finalQuery, 10) equal 10. would Lucene =
find
> >> all relevant docs, then sort them by relevance and select first ten
> >> after that? Or does Lucene store some specific information in =
indices
> >> which allows select first 10 most relevant docs without sorting all
> >> million (for example) relevant pages?
> >>
> >> Thanks in advance.
> >> --
> >> Anton Kirillov
> >>
> >> =
---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
>=20
>=20
> --
> =F3 =D5=D7=C1=D6=C5=CE=C9=C5=CD, =EB=C9=D2=C9=CC=CC=CF=D7 =
=E1=CE=D4=CF=CE
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 22 14:03:05 2009
Return-Path: <java-user-return-44216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50790 invoked from network); 22 Dec 2009 14:03:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Dec 2009 14:03:05 -0000
Received: (qmail 92639 invoked by uid 500); 22 Dec 2009 14:02:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92594 invoked by uid 500); 22 Dec 2009 14:02:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92576 invoked by uid 99); 22 Dec 2009 14:02:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Dec 2009 14:02:39 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Dec 2009 14:02:30 +0000
Received: by ywh15 with SMTP id 15so6431243ywh.5
        for <java-user@lucene.apache.org>; Tue, 22 Dec 2009 06:02:08 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.165.7 with SMTP id n7mr13573908ybe.72.1261490528362; Tue, 
	22 Dec 2009 06:02:08 -0800 (PST)
In-Reply-To: <26887263.post@talk.nabble.com>
References: <26887263.post@talk.nabble.com>
Date: Tue, 22 Dec 2009 09:02:08 -0500
Message-ID: <9ac0c6aa0912220602q29709275ncd1a61e9d9ddaf00@mail.gmail.com>
Subject: Re: Cannot overwrite "_0.fdt" file
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Likely you still have an old IndexWriter open on the index, when you
are attempting to use a new IndexWriter?

Try turning on IndexWriter.setInfoStream, and look for confirmation
that all opened writers get closed?

Mike

On Tue, Dec 22, 2009 at 7:00 AM, TejKiran <tejkiransharma@gmail.com> wrote:
>
> Hi,
> I am indexing some data and then searching on indexed data to find then
> doing some action on that.
> while i close the application, i am deleting these indexed data from
> TempIndex folder like here "20091019237559". and for deleting i am
> maintaining list of which file/folder created in current running applicat=
ion
> because i can run multiple instance of my program.
> i am getting following exception , when it could be occurred and how it c=
an
> be solved.
>
> -------------------------------------------------------------------------=
---------------------------
> Cannot overwrite: ..\Temp\TempIndex\20091019237559\_0.fdtStacktrace
> java.io.IOException: Cannot overwrite:
> ..\Temp\TempIndex\20091019237559\_0.fdt at
> org.apache.lucene.store.FSDirectory.createOutput(Unknown Source) =A0 =A0 =
=A0 =A0at
> org.apache.lucene.index.FieldsWriter.<init>(Unknown Source) =A0 =A0 at
> org.apache.lucene.index.StoredFieldsWriter.initFieldsWriter(Unknown Sourc=
e)
> at org.apache.lucene.index.StoredFieldsWriter.finishDocument(Unknown Sour=
ce)
> at org.apache.lucene.index.StoredFieldsWriter$PerDoc.finish(Unknown Sourc=
e)
> at org.apache.lucene.index.DocumentsWriter$WaitQueue.writeDocument(Unknow=
n
> Source) at org.apache.lucene.index.DocumentsWriter$WaitQueue.add(Unknown
> Source) at org.apache.lucene.index.DocumentsWriter.finishDocument(Unknown
> Source) at org.apache.lucene.index.DocumentsWriter.updateDocument(Unknown
> Source) at org.apache.lucene.index.DocumentsWriter.addDocument(Unknown
> Source) at org.apache.lucene.index.IndexWriter.addDocument(Unknown Source=
)
> at org.apache.lucene.index.IndexWriter.addDocument(Unknown Source)
> -------------------------------------------------------------------------=
---------------------------
>
> Thanks in advance
>
> Tej Kiran Sharma
> --
> View this message in context: http://old.nabble.com/Cannot-overwrite-%22_=
0.fdt%22-file-tp26887263p26887263.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 22 14:23:21 2009
Return-Path: <java-user-return-44217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58361 invoked from network); 22 Dec 2009 14:23:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Dec 2009 14:23:21 -0000
Received: (qmail 10759 invoked by uid 500); 22 Dec 2009 14:23:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10729 invoked by uid 500); 22 Dec 2009 14:23:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10719 invoked by uid 99); 22 Dec 2009 14:23:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Dec 2009 14:23:01 +0000
X-ASF-Spam-Status: No, hits=-2.2 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gsiasf@gmail.com designates 209.85.211.185 as permitted sender)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Dec 2009 14:22:50 +0000
Received: by ywh15 with SMTP id 15so6449645ywh.5
        for <java-user@lucene.apache.org>; Tue, 22 Dec 2009 06:22:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:content-type:mime-version
         :subject:from:in-reply-to:date:content-transfer-encoding:message-id
         :references:to:x-mailer;
        bh=zIt3Tct13C6+KmS9a69h3b6cWM5bPvCLK4Vp0J+qVik=;
        b=bWJWHw3krnvVRf+4+x1oecpY6nUnGHABRtbO+UPbOjDHO3nP/rEvfINDvlhYNy3NAU
         0ufDXTijmrGal8se1IB4xB4rgjxd5ZyN8q4w6pbbioxT2HbhfDaDIETgCZVTDy6o/ys+
         cVTiwDI0WgruHPFFo7MpmUhx6CeKxFhhjv2pA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=VyHNfCrufMpylJPTGNhGk0xlyyv8/MIHGZf4PY+JIZgnuuT4CIqpEx2ctBMf7n40UA
         M/ZIEUMjHocz+oNYcqBPT+EtJ7LiSWIdrSCWKS09FY5/7KPfDkfhsFaK+Oc0WDFEyS8G
         A3DjMUW9yRWIM/ytl0x5PfWHv+GbMagw+/g5U=
Received: by 10.151.88.42 with SMTP id q42mr3827143ybl.75.1261491750245;
        Tue, 22 Dec 2009 06:22:30 -0800 (PST)
Received: from ?10.0.0.77? (adsl-065-013-152-164.sip.rdu.bellsouth.net [65.13.152.164])
        by mx.google.com with ESMTPS id 7sm2804088yxd.26.2009.12.22.06.22.29
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 22 Dec 2009 06:22:29 -0800 (PST)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1077)
Subject: Re: PayloadNearQuery
From: Grant Ingersoll <gsiasf@gmail.com>
In-Reply-To: <DF2B4F821EEF40ED831FBAEF8F6D0524@elias>
Date: Tue, 22 Dec 2009 09:22:28 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <C056BB28-8678-41C5-AF2D-1868B61B145C@gmail.com>
References: <7031CC2E98874551A9D989CA7B9C6778@elias> <487455807D664E60B3EE204521ECDBFD@VEGA> <760794D6-79C3-405B-88FF-A63D26D4113A@gmail.com> <A04F0B978EB746FF8501C598258BBAD9@VEGA> <DF2B4F821EEF40ED831FBAEF8F6D0524@elias>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1077)

What is the problem you are trying to solve?  Is this something to do =
with weighting the head of a noun phrase?  My guess is you will have to =
write your own PayloadQuery.

-Grant

On Dec 21, 2009, at 4:47 PM, Elias Khsheibun wrote:

> You are right, that is the behavior that I'm getting, any other ideas =
then ?
>=20
> -----Original Message-----
> From: Uwe Schindler [mailto:uwe@thetaphi.de]=20
> Sent: Monday, December 21, 2009 11:18 PM
> To: java-user@lucene.apache.org
> Subject: RE: PayloadNearQuery
>=20
> Then I have no other idea how to solve this. It seems that Elias has =
already
> noticed that behaviour.
>=20
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>=20
>> -----Original Message-----
>> From: Grant Ingersoll [mailto:gsiasf@gmail.com]
>> Sent: Monday, December 21, 2009 10:05 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: PayloadNearQuery
>>=20
>> I don't think that will work, as I don't believe that the SpanQueries=20=

>> delegate scoring to the subclauses.  Instead, they just rely on=20
>> iterating the spans.
>>=20
>> -Grant
>>=20
>> On Dec 21, 2009, at 2:44 PM, Uwe Schindler wrote:
>>=20
>>> It is as you describe:
>>>=20
>>> PayloadTermQuery is a subclass of SpanQuery. So create a=20
>>> SpanNearQuery
>> with
>>> slop=3D0 and order=3Dtrue and add first the PayloadNearQuery, then =
the=20
>>> rest
>> of
>>> the phrase terms as SpanTermQuery in order of appearance.
>>>=20
>>> Uwe
>>>=20
>>> -----
>>> Uwe Schindler
>>> H.-H.-Meier-Allee 63, D-28213 Bremen http://www.thetaphi.de
>>> eMail: uwe@thetaphi.de
>>>=20
>>>> -----Original Message-----
>>>> From: Elias Khsheibun [mailto:elias3@gmail.com]
>>>> Sent: Monday, December 21, 2009 6:51 PM
>>>> To: java-user@lucene.apache.org
>>>> Subject: PayloadNearQuery
>>>>=20
>>>> I want to have the effect of handling the first term of a phrase=20
>>>> query
>> as
>>>> a
>>>> PayloadTermQuery and for the others just normal handling ... how=20
>>>> can I
>> do
>>>> that ?
>>>>=20
>>>>=20
>>>>=20
>>>> -------------------------------------------------------------------
>>>> -- To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>=20
>>>=20
>>>=20
>>> --------------------------------------------------------------------
>>> - To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>=20
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 22 22:20:20 2009
Return-Path: <java-user-return-44218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36117 invoked from network); 22 Dec 2009 22:20:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Dec 2009 22:20:19 -0000
Received: (qmail 62083 invoked by uid 500); 22 Dec 2009 22:19:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61877 invoked by uid 500); 22 Dec 2009 22:19:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61795 invoked by uid 99); 22 Dec 2009 22:19:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Dec 2009 22:19:48 +0000
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED
X-Spam-Check-By: apache.org
Received-SPF: unknown (nike.apache.org: error in processing during lookup of siraj@jobdiva.com)
Received: from [64.18.2.167] (HELO exprod7og107.obsmtp.com) (64.18.2.167)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 22 Dec 2009 22:19:37 +0000
Received: from source ([64.147.106.2]) (using TLSv1) by exprod7ob107.postini.com ([64.18.6.12]) with SMTP
	ID DSNKSzFF47crZd8olHtezDouzXW1KCIoDuKx@postini.com; Tue, 22 Dec 2009 14:19:17 PST
Received: from [10.10.1.79] (12.111.23.142) by mail.jobdiva.com (10.10.30.148)
 with Microsoft SMTP Server (TLS) id 8.1.393.1; Tue, 22 Dec 2009 17:19:44
 -0500
Message-ID: <4B3145D5.2040708@jobdiva.com>
Date: Tue, 22 Dec 2009 17:19:01 -0500
From: Siraj Haider <siraj@jobdiva.com>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Lucene going non-responsive under heavy load
Content-Type: text/plain; charset="ISO-8859-1"; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello guys,
We have a dilemma on a few of our lucene machines.  We have a tomcat 
running our servlets for searching and indexing on each of these 
machines.  Its a live index where documents are being added to index 
while online searches are also being served at the same time.  Indexing 
happens every 5 minutes and if there are new documents added, the index 
gets reopend.  For most of the times the performance is very good, but 
under heavy load of searches, the machine goes non-responsive.  We can 
still telnet to machine and see that cpu-wise its not bad, but I/O seems 
to be a problem.  Is there anything we might be doing to cause it or 
anything that we can do to avoid it.  I know I did not provide a lot of 
information about how we are indexing and searching but I will answer 
any question anyone might have.

thanks in advance
-siraj

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 22 22:29:11 2009
Return-Path: <java-user-return-44219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41320 invoked from network); 22 Dec 2009 22:29:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Dec 2009 22:29:10 -0000
Received: (qmail 72535 invoked by uid 500); 22 Dec 2009 22:28:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72504 invoked by uid 500); 22 Dec 2009 22:28:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72494 invoked by uid 99); 22 Dec 2009 22:28:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Dec 2009 22:28:57 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Dec 2009 22:28:50 +0000
Received: by ywh15 with SMTP id 15so6917343ywh.5
        for <java-user@lucene.apache.org>; Tue, 22 Dec 2009 14:28:29 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.105.27 with SMTP id d27mr14290617ybc.195.1261520907514; 
	Tue, 22 Dec 2009 14:28:27 -0800 (PST)
In-Reply-To: <4B3145D5.2040708@jobdiva.com>
References: <4B3145D5.2040708@jobdiva.com>
Date: Tue, 22 Dec 2009 17:28:27 -0500
Message-ID: <9ac0c6aa0912221428u55362375q5bb236c4646d53d9@mail.gmail.com>
Subject: Re: Lucene going non-responsive under heavy load
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Is it possible a large merge is running?

You can turn on IndexWriter.setInfoStream to see more details about
what IW is doing, including merging.

Mike

On Tue, Dec 22, 2009 at 5:19 PM, Siraj Haider <siraj@jobdiva.com> wrote:
> Hello guys,
> We have a dilemma on a few of our lucene machines. =A0We have a tomcat ru=
nning
> our servlets for searching and indexing on each of these machines. =A0Its=
 a
> live index where documents are being added to index while online searches
> are also being served at the same time. =A0Indexing happens every 5 minut=
es
> and if there are new documents added, the index gets reopend. =A0For most=
 of
> the times the performance is very good, but under heavy load of searches,
> the machine goes non-responsive. =A0We can still telnet to machine and se=
e
> that cpu-wise its not bad, but I/O seems to be a problem. =A0Is there any=
thing
> we might be doing to cause it or anything that we can do to avoid it. =A0=
I
> know I did not provide a lot of information about how we are indexing and
> searching but I will answer any question anyone might have.
>
> thanks in advance
> -siraj
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 22 22:30:31 2009
Return-Path: <java-user-return-44220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42112 invoked from network); 22 Dec 2009 22:30:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Dec 2009 22:30:31 -0000
Received: (qmail 76911 invoked by uid 500); 22 Dec 2009 22:30:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76880 invoked by uid 500); 22 Dec 2009 22:30:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76870 invoked by uid 99); 22 Dec 2009 22:30:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Dec 2009 22:30:18 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Dec 2009 22:30:08 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id C8DB045F32F
	for <java-user@lucene.apache.org>; Tue, 22 Dec 2009 23:29:47 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id MUIxXLb68pcy for <java-user@lucene.apache.org>;
	Tue, 22 Dec 2009 23:29:36 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 1999145F344
	for <java-user@lucene.apache.org>; Tue, 22 Dec 2009 23:29:36 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <4B3145D5.2040708@jobdiva.com>
Subject: RE: Lucene going non-responsive under heavy load
Date: Tue, 22 Dec 2009 23:29:35 +0100
Message-ID: <9AF96C3A32064421A29AAAA5143D07DE@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <4B3145D5.2040708@jobdiva.com>
Thread-Index: AcqDVPaGvxOHgmzZRX6HpegQOZRAiwAAFP9w
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

If it suddenly gets unresponsive, you may have a GC (garbage collector)
problem. Can you post your Java options, Java VM version, max heap and so
on. Maybe you are doing some strange things.

For us the best GC to use (we have Java 1.5) was the "Parallel New GC" /
"The Concurrent Low Pause Collector", here are some of our options that
helped solving the problem: -XX:+UseConcMarkSweepGC -XX:+UseParNewGC. You
may also read Mark Millers Blog post:

http://www.lucidimagination.com/blog/2009/09/19/java-garbage-collection-boot
-camp-draft/

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Siraj Haider [mailto:siraj@jobdiva.com]
> Sent: Tuesday, December 22, 2009 11:19 PM
> To: java-user@lucene.apache.org
> Subject: Lucene going non-responsive under heavy load
> 
> Hello guys,
> We have a dilemma on a few of our lucene machines.  We have a tomcat
> running our servlets for searching and indexing on each of these
> machines.  Its a live index where documents are being added to index
> while online searches are also being served at the same time.  Indexing
> happens every 5 minutes and if there are new documents added, the index
> gets reopend.  For most of the times the performance is very good, but
> under heavy load of searches, the machine goes non-responsive.  We can
> still telnet to machine and see that cpu-wise its not bad, but I/O seems
> to be a problem.  Is there anything we might be doing to cause it or
> anything that we can do to avoid it.  I know I did not provide a lot of
> information about how we are indexing and searching but I will answer
> any question anyone might have.
> 
> thanks in advance
> -siraj
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 22 22:58:45 2009
Return-Path: <java-user-return-44221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52667 invoked from network); 22 Dec 2009 22:58:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Dec 2009 22:58:45 -0000
Received: (qmail 4721 invoked by uid 500); 22 Dec 2009 22:58:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4648 invoked by uid 500); 22 Dec 2009 22:58:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4638 invoked by uid 99); 22 Dec 2009 22:58:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Dec 2009 22:58:43 +0000
X-ASF-Spam-Status: No, hits=-1.8 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED
X-Spam-Check-By: apache.org
Received-SPF: unknown (nike.apache.org: error in processing during lookup of siraj@jobdiva.com)
Received: from [64.18.2.18] (HELO exprod7og120.obsmtp.com) (64.18.2.18)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 22 Dec 2009 22:58:32 +0000
Received: from source ([64.147.106.2]) (using TLSv1) by exprod7ob120.postini.com ([64.18.6.12]) with SMTP
	ID DSNKSzFPA1HOPeK9v0DJpdy3851ihToPJkGH@postini.com; Tue, 22 Dec 2009 14:58:12 PST
Received: from [10.10.1.79] (12.111.23.142) by mail.jobdiva.com (10.10.30.148)
 with Microsoft SMTP Server (TLS) id 8.1.393.1; Tue, 22 Dec 2009 17:58:38
 -0500
Message-ID: <4B314EF3.8080604@jobdiva.com>
Date: Tue, 22 Dec 2009 17:57:55 -0500
From: Siraj Haider <siraj@jobdiva.com>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Re: Lucene going non-responsive under heavy load
References: <4B3145D5.2040708@jobdiva.com> <9ac0c6aa0912221428u55362375q5bb236c4646d53d9@mail.gmail.com>
In-Reply-To: <9ac0c6aa0912221428u55362375q5bb236c4646d53d9@mail.gmail.com>
Content-Type: multipart/alternative;
	boundary="------------050902010005020001070805"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------050902010005020001070805
Content-Type: text/plain; charset="ISO-8859-1"; format=flowed
Content-Transfer-Encoding: 7bit

Hi Mike,
You are right, sometimes there is an implicit merge running when the 
machine goes non-responsive.  How can we avoid running those merges 
during the day and how can we minimize the effect it will have on searches?

-siraj

Michael McCandless wrote:
> Is it possible a large merge is running?
>
> You can turn on IndexWriter.setInfoStream to see more details about
> what IW is doing, including merging.
>
> Mike
>
> On Tue, Dec 22, 2009 at 5:19 PM, Siraj Haider <siraj@jobdiva.com> wrote:
>   
>> Hello guys,
>> We have a dilemma on a few of our lucene machines.  We have a tomcat running
>> our servlets for searching and indexing on each of these machines.  Its a
>> live index where documents are being added to index while online searches
>> are also being served at the same time.  Indexing happens every 5 minutes
>> and if there are new documents added, the index gets reopend.  For most of
>> the times the performance is very good, but under heavy load of searches,
>> the machine goes non-responsive.  We can still telnet to machine and see
>> that cpu-wise its not bad, but I/O seems to be a problem.  Is there anything
>> we might be doing to cause it or anything that we can do to avoid it.  I
>> know I did not provide a lot of information about how we are indexing and
>> searching but I will answer any question anyone might have.
>>
>> thanks in advance
>> -siraj
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


--------------050902010005020001070805--

From java-user-return-44222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 22 23:02:40 2009
Return-Path: <java-user-return-44222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54839 invoked from network); 22 Dec 2009 23:02:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Dec 2009 23:02:40 -0000
Received: (qmail 10126 invoked by uid 500); 22 Dec 2009 23:02:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10029 invoked by uid 500); 22 Dec 2009 23:02:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10019 invoked by uid 99); 22 Dec 2009 23:02:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Dec 2009 23:02:37 +0000
X-ASF-Spam-Status: No, hits=-1.8 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED
X-Spam-Check-By: apache.org
Received-SPF: unknown (nike.apache.org: error in processing during lookup of siraj@jobdiva.com)
Received: from [64.18.2.157] (HELO exprod7og102.obsmtp.com) (64.18.2.157)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 22 Dec 2009 23:02:27 +0000
Received: from source ([64.147.106.2]) (using TLSv1) by exprod7ob102.postini.com ([64.18.6.12]) with SMTP
	ID DSNKSzFP7WrC8tkCh49HMlCYa4CtTbi5jgLR@postini.com; Tue, 22 Dec 2009 15:02:06 PST
Received: from [10.10.1.79] (12.111.23.142) by mail.jobdiva.com (10.10.30.148)
 with Microsoft SMTP Server (TLS) id 8.1.393.1; Tue, 22 Dec 2009 18:00:52
 -0500
Message-ID: <4B314F79.1050909@jobdiva.com>
Date: Tue, 22 Dec 2009 18:00:09 -0500
From: Siraj Haider <siraj@jobdiva.com>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Re: Lucene going non-responsive under heavy load
References: <4B3145D5.2040708@jobdiva.com> <9AF96C3A32064421A29AAAA5143D07DE@VEGA>
In-Reply-To: <9AF96C3A32064421A29AAAA5143D07DE@VEGA>
Content-Type: multipart/alternative;
	boundary="------------010706050202070707010904"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------010706050202070707010904
Content-Type: text/plain; charset="ISO-8859-1"; format=flowed
Content-Transfer-Encoding: 7bit

Hi Uwe,
Following are the info:
Java VM: "1.6.0_05"
Java Options:  -server -Xms512m -Xmx2048m
We are not using any specific GC.

regards
-siraj

Uwe Schindler wrote:
> If it suddenly gets unresponsive, you may have a GC (garbage collector)
> problem. Can you post your Java options, Java VM version, max heap and so
> on. Maybe you are doing some strange things.
>
> For us the best GC to use (we have Java 1.5) was the "Parallel New GC" /
> "The Concurrent Low Pause Collector", here are some of our options that
> helped solving the problem: -XX:+UseConcMarkSweepGC -XX:+UseParNewGC. You
> may also read Mark Millers Blog post:
>
> http://www.lucidimagination.com/blog/2009/09/19/java-garbage-collection-boot
> -camp-draft/
>
> Uwe
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>   
>> -----Original Message-----
>> From: Siraj Haider [mailto:siraj@jobdiva.com]
>> Sent: Tuesday, December 22, 2009 11:19 PM
>> To: java-user@lucene.apache.org
>> Subject: Lucene going non-responsive under heavy load
>>
>> Hello guys,
>> We have a dilemma on a few of our lucene machines.  We have a tomcat
>> running our servlets for searching and indexing on each of these
>> machines.  Its a live index where documents are being added to index
>> while online searches are also being served at the same time.  Indexing
>> happens every 5 minutes and if there are new documents added, the index
>> gets reopend.  For most of the times the performance is very good, but
>> under heavy load of searches, the machine goes non-responsive.  We can
>> still telnet to machine and see that cpu-wise its not bad, but I/O seems
>> to be a problem.  Is there anything we might be doing to cause it or
>> anything that we can do to avoid it.  I know I did not provide a lot of
>> information about how we are indexing and searching but I will answer
>> any question anyone might have.
>>
>> thanks in advance
>> -siraj
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>     
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


--------------010706050202070707010904--

From java-user-return-44223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 22 23:45:17 2009
Return-Path: <java-user-return-44223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60511 invoked from network); 22 Dec 2009 23:45:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 22 Dec 2009 23:45:17 -0000
Received: (qmail 24541 invoked by uid 500); 22 Dec 2009 23:45:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24446 invoked by uid 500); 22 Dec 2009 23:45:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24436 invoked by uid 99); 22 Dec 2009 23:45:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Dec 2009 23:45:15 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.211.185] (HELO mail-yw0-f185.google.com) (209.85.211.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Dec 2009 23:45:06 +0000
Received: by ywh15 with SMTP id 15so6970130ywh.5
        for <java-user@lucene.apache.org>; Tue, 22 Dec 2009 15:44:45 -0800 (PST)
MIME-Version: 1.0
Received: by 10.151.95.1 with SMTP id x1mr14240241ybl.221.1261525485061; Tue, 
	22 Dec 2009 15:44:45 -0800 (PST)
In-Reply-To: <4B314EF3.8080604@jobdiva.com>
References: <4B3145D5.2040708@jobdiva.com>
	 <9ac0c6aa0912221428u55362375q5bb236c4646d53d9@mail.gmail.com>
	 <4B314EF3.8080604@jobdiva.com>
Date: Tue, 22 Dec 2009 18:44:45 -0500
Message-ID: <9ac0c6aa0912221544t4d739ea9sf4bdda59bc82b071@mail.gmail.com>
Subject: Re: Lucene going non-responsive under heavy load
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

A merge shouldn't make the machine completely non-responsive, just,
slower to run searches / index documents.

What kind of machine / IO system is this?

You can set maxMergeDocs to limit how large the merge is allowed to
be.  But, be careful, since if you set this too small you'll wind up
with way too many segments over time, which'll slow down search and
risk file handle exhaustion.  Likewise, increase mergeFactor.  You
could also try decreasing the merge thread priority in
ConcurrentMergeScheduler... though that risk starvation of the merge
thread if your CPUs are really saturated doing indexing/searching.
Another thing to try is the BalancedSegmentMergePolicy (in
contrib/misc); it also tries to avoid big merges.

Also, how are you opening new readers?  Can you share more how you are
using Lucene?

Mike

On Tue, Dec 22, 2009 at 5:57 PM, Siraj Haider <siraj@jobdiva.com> wrote:
> Hi Mike,
> You are right, sometimes there is an implicit merge running when the mach=
ine
> goes non-responsive. =A0How can we avoid running those merges during the =
day
> and how can we minimize the effect it will have on searches?
>
> -siraj
>
> Michael McCandless wrote:
>>
>> Is it possible a large merge is running?
>>
>> You can turn on IndexWriter.setInfoStream to see more details about
>> what IW is doing, including merging.
>>
>> Mike
>>
>> On Tue, Dec 22, 2009 at 5:19 PM, Siraj Haider <siraj@jobdiva.com> wrote:
>>
>>>
>>> Hello guys,
>>> We have a dilemma on a few of our lucene machines. =A0We have a tomcat
>>> running
>>> our servlets for searching and indexing on each of these machines. =A0I=
ts a
>>> live index where documents are being added to index while online search=
es
>>> are also being served at the same time. =A0Indexing happens every 5 min=
utes
>>> and if there are new documents added, the index gets reopend. =A0For mo=
st
>>> of
>>> the times the performance is very good, but under heavy load of searche=
s,
>>> the machine goes non-responsive. =A0We can still telnet to machine and =
see
>>> that cpu-wise its not bad, but I/O seems to be a problem. =A0Is there
>>> anything
>>> we might be doing to cause it or anything that we can do to avoid it. =
=A0I
>>> know I did not provide a lot of information about how we are indexing a=
nd
>>> searching but I will answer any question anyone might have.
>>>
>>> thanks in advance
>>> -siraj
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 23 01:04:46 2009
Return-Path: <java-user-return-44224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86314 invoked from network); 23 Dec 2009 01:04:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Dec 2009 01:04:46 -0000
Received: (qmail 71264 invoked by uid 500); 23 Dec 2009 01:04:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71185 invoked by uid 500); 23 Dec 2009 01:04:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71175 invoked by uid 99); 23 Dec 2009 01:04:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Dec 2009 01:04:44 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Dec 2009 01:04:35 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NNFeA-0006HC-HD
	for java-user@lucene.apache.org; Tue, 22 Dec 2009 17:04:14 -0800
Message-ID: <26896711.post@talk.nabble.com>
Date: Tue, 22 Dec 2009 17:04:14 -0800 (PST)
From: syedfa <fayyazuddin@gmail.com>
To: java-user@lucene.apache.org
Subject: Need help with XML Query Parser example in Lucene 3.0
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fayyazuddin@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Dear fellow Java developers:

I am trying to run the XML Query Parser example that comes with Lucene 3.0
source distribution.  I have the application structured identical to the one
you download, and I am trying to run it in eclipse.  When I launch the
application, fill out the form that appears on index.jsp, and then submit it
to search the index, I get the following error 505:

javax.servlet.ServletException: Error processing query

org.apache.lucene.xmlparser.webdemo.FormBasedXmlQueryDemo.doPost(FormBasedXmlQueryDemo.java:124)
	javax.servlet.http.HttpServlet.service(HttpServlet.java:710)
	javax.servlet.http.HttpServlet.service(HttpServlet.java:803)


root cause 

java.lang.NullPointerException

org.apache.lucene.xmlparser.webdemo.FormBasedXmlQueryDemo.doPost(FormBasedXmlQueryDemo.java:107)
	javax.servlet.http.HttpServlet.service(HttpServlet.java:710)
	javax.servlet.http.HttpServlet.service(HttpServlet.java:803)


I absolutely have no idea why this is happening, as I even structured the
package of the servlet in eclipse identical to the way it is in the example. 
I have attached my entire servlet, "FormBasedXmlQueryDemo" below:

public class FormBasedXmlQueryDemo extends HttpServlet {
	private static final long serialVersionUID = 1L;
    
	private QueryTemplateManager queryTemplateManager;
	private CorePlusExtensionsParser xmlParser;
	private IndexSearcher searcher;
	private Analyzer analyzer = new
StandardAnalyzer(org.apache.lucene.util.Version.LUCENE_CURRENT);
	
    public FormBasedXmlQueryDemo() {
        super();
        // TODO Auto-generated constructor stub
    }

    @Override
	public void init(ServletConfig config) throws ServletException {
		// TODO Auto-generated method stub
		super.init(config);
		
		try{
			
			openExampleIndex();
			
			String xslFile=config.getInitParameter("xslFile");
			String defaultStandardQueryParserField =
config.getInitParameter("defaultStandardQueryParserField");
			queryTemplateManager = new
QueryTemplateManager(getServletContext().getResourceAsStream("/WEB-INF/" +
xslFile));
			xmlParser = new CorePlusExtensionsParser(defaultStandardQueryParserField,
analyzer);
			
		}catch(Exception e){
			throw new ServletException("Error loading query template", e);
		}
	}

	protected void doGet(HttpServletRequest request, HttpServletResponse
response) throws ServletException, IOException {

	}

	@Override
	protected void doPost(HttpServletRequest request, HttpServletResponse
response) throws ServletException, IOException {
		// TODO Auto-generated method stub
		
		Properties completedFormFields = new Properties();
		Enumeration pNames = request.getParameterNames();
		
		while (pNames.hasMoreElements()){
			
			String propName = (String) pNames.nextElement();
			String value = request.getParameter(propName);
			
			if ((value != null) && (value.trim().length()>0)){
				completedFormFields.setProperty(propName, value);
			}
		}
		
		try{
			org.w3c.dom.Document xmlQuery =
queryTemplateManager.getQueryAsDOM(completedFormFields);			
			Query query = xmlParser.getQuery(xmlQuery.getDocumentElement());
			TopDocs topDocs = searcher.search(query, 10);
			
			if (topDocs != null) {
				ScoreDoc[] sd = topDocs.scoreDocs;
				Document[] results = new Document[sd.length];
				
				for(int i = 0; i < results.length; i++){
					
					results[i] = searcher.doc(sd[i].doc);
					request.setAttribute("results", results);
				}
			}
			
			RequestDispatcher dispatcher =
getServletContext().getRequestDispatcher("/index.jsp");
			dispatcher.forward(request, response);
		}
		catch(Exception e){
			throw new ServletException("Error processing query", e);
		}
	}
	
	private void openExampleIndex() throws CorruptIndexException, IOException {
		
		
		RAMDirectory rd = new RAMDirectory();
		IndexWriter writer = new IndexWriter(rd, analyzer,
IndexWriter.MaxFieldLength.LIMITED);
		InputStream dataIn =
getServletContext().getResourceAsStream("/WEB-INF/data.tsv");
		BufferedReader br = new BufferedReader(new InputStreamReader(dataIn));
		String line = br.readLine();
		
		while (line != null){
			
			line = line.trim();
			if (line.length() > 0){
				
				StringTokenizer st = new StringTokenizer(line, "\t");
				Document doc = new Document();
				doc.add(new Field("location",st.nextToken(),Field.Store.YES,
						Field.Index.ANALYZED_NO_NORMS));
				doc.add(new Field("salary",st.nextToken(),Field.Store.YES,
						Field.Index.ANALYZED_NO_NORMS));
				doc.add(new Field("type",st.nextToken(),Field.Store.YES,
						Field.Index.ANALYZED_NO_NORMS));
				doc.add(new Field("description",st.nextToken(),Field.Store.YES,
						Field.Index.ANALYZED));
				writer.addDocument(doc);
			}
			
			line = br.readLine();
		}
		
		writer.close();
	}

}



When I was tracing through the code, it appears that it was throwing the
exception just as it tried to process the line:

TopDocs topDocs = searcher.search(query, 10);

Does anyone know where I am going wrong?  

Thanks in advance to all who reply.
-- 
View this message in context: http://old.nabble.com/Need-help-with-XML-Query-Parser-example-in-Lucene-3.0-tp26896711p26896711.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 23 05:03:35 2009
Return-Path: <java-user-return-44225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79627 invoked from network); 23 Dec 2009 05:03:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Dec 2009 05:03:34 -0000
Received: (qmail 8470 invoked by uid 500); 23 Dec 2009 05:03:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8326 invoked by uid 500); 23 Dec 2009 05:03:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8316 invoked by uid 99); 23 Dec 2009 05:03:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Dec 2009 05:03:31 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Dec 2009 05:03:21 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NNJNE-0004pm-G0
	for java-user@lucene.apache.org; Tue, 22 Dec 2009 21:03:00 -0800
Message-ID: <26897607.post@talk.nabble.com>
Date: Tue, 22 Dec 2009 21:03:00 -0800 (PST)
From: syedfa <fayyazuddin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Need help with XML Query Parser example in Lucene 3.0
In-Reply-To: <26896711.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fayyazuddin@gmail.com
References: <26896711.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I have found an error in the web.xml file, however, this DID NOT fix the
problem.  Inside the web.xml file, there is the following snippet:

<init-param>
			<description>
			Default field used in standard Lucene QueryParser used in UserQuery
tag</description>
			<param-name>defaultStandardQueryParserField</param-name>
			<param-value>jobDescription</param-value>
</init-param>

the <param-value> here should be IMHO "description", as neither the
query.xsl file, nor index.jsp file contain any tags/values called
"jobDescription", only "description".  I hope the contributors to the Lucene
project take note of this, or please show me the error of my ways.  Having
said that, as I mentioned earlier, despite making this correction, I am
still getting the above "NullPointerException".  Can anyone see where I am
going wrong?

Thanks again to all who reply.
Sincerely;
Fayyaz

syedfa wrote:
> 
> Dear fellow Java developers:
> 
> I am trying to run the XML Query Parser example that comes with Lucene 3.0
> source distribution.  I have the application structured identical to the
> one you download, and I am trying to run it in eclipse.  When I launch the
> application, fill out the form that appears on index.jsp, and then submit
> it to search the index, I get the following error 505:
> 
> javax.servlet.ServletException: Error processing query
> 
> org.apache.lucene.xmlparser.webdemo.FormBasedXmlQueryDemo.doPost(FormBasedXmlQueryDemo.java:124)
> 	javax.servlet.http.HttpServlet.service(HttpServlet.java:710)
> 	javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
> 
> 
> root cause 
> 
> java.lang.NullPointerException
> 
> org.apache.lucene.xmlparser.webdemo.FormBasedXmlQueryDemo.doPost(FormBasedXmlQueryDemo.java:107)
> 	javax.servlet.http.HttpServlet.service(HttpServlet.java:710)
> 	javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
> 
> 
> I absolutely have no idea why this is happening, as I even structured the
> package of the servlet in eclipse identical to the way it is in the
> example.  I have attached my entire servlet, "FormBasedXmlQueryDemo"
> below:
> 
> public class FormBasedXmlQueryDemo extends HttpServlet {
> 	private static final long serialVersionUID = 1L;
>     
> 	private QueryTemplateManager queryTemplateManager;
> 	private CorePlusExtensionsParser xmlParser;
> 	private IndexSearcher searcher;
> 	private Analyzer analyzer = new
> StandardAnalyzer(org.apache.lucene.util.Version.LUCENE_CURRENT);
> 	
>     public FormBasedXmlQueryDemo() {
>         super();
>         // TODO Auto-generated constructor stub
>     }
> 
>     @Override
> 	public void init(ServletConfig config) throws ServletException {
> 		// TODO Auto-generated method stub
> 		super.init(config);
> 		
> 		try{
> 			
> 			openExampleIndex();
> 			
> 			String xslFile=config.getInitParameter("xslFile");
> 			String defaultStandardQueryParserField =
> config.getInitParameter("defaultStandardQueryParserField");
> 			queryTemplateManager = new
> QueryTemplateManager(getServletContext().getResourceAsStream("/WEB-INF/" +
> xslFile));
> 			xmlParser = new
> CorePlusExtensionsParser(defaultStandardQueryParserField, analyzer);
> 			
> 		}catch(Exception e){
> 			throw new ServletException("Error loading query template", e);
> 		}
> 	}
> 
> 	protected void doGet(HttpServletRequest request, HttpServletResponse
> response) throws ServletException, IOException {
> 
> 	}
> 
> 	@Override
> 	protected void doPost(HttpServletRequest request, HttpServletResponse
> response) throws ServletException, IOException {
> 		// TODO Auto-generated method stub
> 		
> 		Properties completedFormFields = new Properties();
> 		Enumeration pNames = request.getParameterNames();
> 		
> 		while (pNames.hasMoreElements()){
> 			
> 			String propName = (String) pNames.nextElement();
> 			String value = request.getParameter(propName);
> 			
> 			if ((value != null) && (value.trim().length()>0)){
> 				completedFormFields.setProperty(propName, value);
> 			}
> 		}
> 		
> 		try{
> 			org.w3c.dom.Document xmlQuery =
> queryTemplateManager.getQueryAsDOM(completedFormFields);			
> 			Query query = xmlParser.getQuery(xmlQuery.getDocumentElement());
> 			TopDocs topDocs = searcher.search(query, 10);
> 			
> 			if (topDocs != null) {
> 				ScoreDoc[] sd = topDocs.scoreDocs;
> 				Document[] results = new Document[sd.length];
> 				
> 				for(int i = 0; i < results.length; i++){
> 					
> 					results[i] = searcher.doc(sd[i].doc);
> 					request.setAttribute("results", results);
> 				}
> 			}
> 			
> 			RequestDispatcher dispatcher =
> getServletContext().getRequestDispatcher("/index.jsp");
> 			dispatcher.forward(request, response);
> 		}
> 		catch(Exception e){
> 			throw new ServletException("Error processing query", e);
> 		}
> 	}
> 	
> 	private void openExampleIndex() throws CorruptIndexException, IOException
> {
> 		
> 		
> 		RAMDirectory rd = new RAMDirectory();
> 		IndexWriter writer = new IndexWriter(rd, analyzer,
> IndexWriter.MaxFieldLength.LIMITED);
> 		InputStream dataIn =
> getServletContext().getResourceAsStream("/WEB-INF/data.tsv");
> 		BufferedReader br = new BufferedReader(new InputStreamReader(dataIn));
> 		String line = br.readLine();
> 		
> 		while (line != null){
> 			
> 			line = line.trim();
> 			if (line.length() > 0){
> 				
> 				StringTokenizer st = new StringTokenizer(line, "\t");
> 				Document doc = new Document();
> 				doc.add(new Field("location",st.nextToken(),Field.Store.YES,
> 						Field.Index.ANALYZED_NO_NORMS));
> 				doc.add(new Field("salary",st.nextToken(),Field.Store.YES,
> 						Field.Index.ANALYZED_NO_NORMS));
> 				doc.add(new Field("type",st.nextToken(),Field.Store.YES,
> 						Field.Index.ANALYZED_NO_NORMS));
> 				doc.add(new Field("description",st.nextToken(),Field.Store.YES,
> 						Field.Index.ANALYZED));
> 				writer.addDocument(doc);
> 			}
> 			
> 			line = br.readLine();
> 		}
> 		
> 		writer.close();
> 	}
> 
> }
> 
> 
> 
> When I was tracing through the code, it appears that it was throwing the
> exception just as it tried to process the line:
> 
> TopDocs topDocs = searcher.search(query, 10);
> 
> Does anyone know where I am going wrong?  
> 
> Thanks in advance to all who reply.
> 

-- 
View this message in context: http://old.nabble.com/Need-help-with-XML-Query-Parser-example-in-Lucene-3.0-tp26896711p26897607.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 23 05:28:44 2009
Return-Path: <java-user-return-44226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90432 invoked from network); 23 Dec 2009 05:28:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Dec 2009 05:28:44 -0000
Received: (qmail 27507 invoked by uid 500); 23 Dec 2009 05:28:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27337 invoked by uid 500); 23 Dec 2009 05:28:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27326 invoked by uid 99); 23 Dec 2009 05:28:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Dec 2009 05:28:41 +0000
X-ASF-Spam-Status: No, hits=-1.2 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE,MIME_QP_LONG_LINE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shakti_purohit@persistent.co.in designates 202.54.11.87 as permitted sender)
Received: from [202.54.11.87] (HELO bmapps.persistent.co.in) (202.54.11.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Dec 2009 05:28:35 +0000
X-AuditID: 0a4e0006-b7bbaae0000070a7-f0-4b31aa6c8dbd
Received: from puneexchange.persistent.co.in ( [10.78.0.1])
	by  (Symantec Mail Security) with SMTP id C3.A6.28839.C6AA13B4; Wed, 23 Dec 2009 10:58:12 +0530 (IST)
Received: from Exchange.persistent.co.in ([fe80::ad8a:d553:ef93:bfdd]) by CAS1
 ([10.77.224.46]) with mapi; Wed, 23 Dec 2009 10:58:12 +0530
From: Shakti Purohit <shakti_purohit@persistent.co.in>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 23 Dec 2009 10:57:26 +0530
Subject: Lucene Index size v/s available memory 
Thread-Topic: Lucene Index size v/s available memory 
Thread-Index: AcqDkJ0Bg+/LbnBUTx651LO0PVPoBQ==
Message-ID: <4BA5307AF084A04E83875ECC173BC77BA23669E56C@EXCHANGE.persistent.co.in>
Accept-Language: en-US, en-IN
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US, en-IN
Content-Type: multipart/alternative;
	boundary="_000_4BA5307AF084A04E83875ECC173BC77BA23669E56CEXCHANGEpersi_"
MIME-Version: 1.0
X-Brightmail-Tracker: AAAAAQAAAZE=

--_000_4BA5307AF084A04E83875ECC173BC77BA23669E56CEXCHANGEpersi_
Content-Type: text/plain; charset="us-ascii"
content-transfer-encoding: quoted-printable

We are required to find out how much percentage/part of lucene index needs t=
o be in memory for acceptable search response time. The index size we have i=
s around 100 GB while the available memory is 24 GB. Since we do not have th=
e option of loading whole of the index in memory we wanted to know what mini=
mum part of lucene index be loaded in memory so that response time is not af=
fected.
Does the index consist of any files or hierarchy such that loading only this=
 file/information in memory and not whole of the index would suffice for fas=
ter response time.

The other question I have is how many queries per second lucene can support?=
 We are interested in finding out throughput of the system.

Thanks,
Shakti

DISCLAIMER=0A=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=0A=
This e-mail may contain privileged and confidential information which is the=
 property of Persistent Systems Ltd. It is intended only for the use of the=
 individual or entity to which it is addressed. If you are not the intended=
 recipient, you are not authorized to read, retain, copy, print, distribute=
 or use this message. If you have received this communication in error, plea=
se notify the sender and delete all copies of this message. Persistent Syste=
ms Ltd. does not accept any liability for virus infected mails.

--_000_4BA5307AF084A04E83875ECC173BC77BA23669E56CEXCHANGEpersi_--

From java-user-return-44227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 23 10:00:25 2009
Return-Path: <java-user-return-44227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98856 invoked from network); 23 Dec 2009 10:00:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Dec 2009 10:00:24 -0000
Received: (qmail 21941 invoked by uid 500); 23 Dec 2009 10:00:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21573 invoked by uid 500); 23 Dec 2009 10:00:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21343 invoked by uid 99); 23 Dec 2009 10:00:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Dec 2009 10:00:21 +0000
X-ASF-Spam-Status: No, hits=3.0 required=10.0
	tests=MIME_QP_LONG_LINE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [87.248.110.140] (HELO n23.bullet.mail.ukl.yahoo.com) (87.248.110.140)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 23 Dec 2009 10:00:10 +0000
Received: from [217.146.182.179] by n23.bullet.mail.ukl.yahoo.com with NNFMP; 23 Dec 2009 09:59:48 -0000
Received: from [87.248.110.206] by t5.bullet.ukl.yahoo.com with NNFMP; 23 Dec 2009 09:59:48 -0000
Received: from [127.0.0.1] by omp236.mail.ukl.yahoo.com with NNFMP; 23 Dec 2009 09:59:48 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 322345.96125.bm@omp236.mail.ukl.yahoo.com
Received: (qmail 46091 invoked by uid 60001); 23 Dec 2009 09:59:48 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1261562388; bh=C9wKkzxVVZ4aK1nCQAln91jRp/1NMP1HxbjOTn+SEwU=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=na8yOV5D0/IVOT8FkYFo7bl4hecg34B+SbRjplc3lIm9h1rIbFEq0zZoe0lPD03uqZSjpAQamZQEKWlYjH9QZs2Mj2B0Se9FAA90gIWYO+56i/Y497yxke6xvxas6WztKAdhJxYostqaqD9DjI6XVcO/TTwYvtR8OxWtti+GAa4=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=OERiU8/hhdvmfZTER1GsANTnAubduX8VW/DrqudLft4lQkeV/8Yp51lGU9+U8r3LLBYqKGREOjAhmq5akXR/MV2QAtVAANl1/nQICFq5019r9vR7OlgzwKFJhXPdQwtj1O6g+32Iwy7outBiO75hM4a1WmvKjiJVWnAN++37EcY=;
Message-ID: <75327.45819.qm@web24706.mail.ird.yahoo.com>
X-YMail-OSG: gPVLx6MVM1kejqQPKp1DIWgf1LWh_uaHtDU11zTCoZ.Es3DJpsA8IPHwQLc.Sza5C7dwDTqatk8lYmiBFQ3VblDmKaAG70Y.R5x05UZVMHOXrPItSR7L4eAS2Rg.i1CX3lCxqnbceUlNQYlRBtSQPxsqnr7Tc19u105R.0dXZR1Dz0rVEQpejrlqEEo61fbq659QGfkFeTzfznkpk0QdO3G72thd0ahvo1AozdxH4_Pl398fwKAvzJi8Gt7j7eBeAZ30US.iRgm_B3_bOChpIUeqG8Ynd5QSrUmsXACzY5J6gM2bfeiLeGFi_5W5FD0JKg--
Received: from [193.36.230.96] by web24706.mail.ird.yahoo.com via HTTP; Wed, 23 Dec 2009 09:59:48 GMT
X-Mailer: YahooMailRC/240.3 YahooMailWebService/0.8.100.260964
References: <26896711.post@talk.nabble.com> <26897607.post@talk.nabble.com>
Date: Wed, 23 Dec 2009 09:59:48 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Need help with XML Query Parser example in Lucene 3.0
To: java-user@lucene.apache.org
In-Reply-To: <26897607.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Fayyaz,=0A=0A>>I have found an error in the web.xml file,=0A=0AGood job!=
  I found an error in your code so that makes us even :)=0A=0AIt looks like=
 you removed the line in the "openExampleIndex" method which opens the sear=
cher. =0AThat explains your null pointer.=0A=0AThe problem you found in the=
 web.xml isn't actually an error but is potentially misleading. In the "Use=
rQuery" tag in the XSL there is a "fieldName" tag which is set to "descript=
ion". The "jobDescription" default fieldname passed to the XML parser would=
 only be in effect for any <UserQuery> tags that didn't specify a fieldName=
..=0A=0ABTW, in the source distribution there are full "DTDdocs" for the XML=
 syntax in contrib\xml-query-parser\docs=0A=0ACheers=0AMark=0A=0A=0A----- O=
riginal Message ----=0AFrom: syedfa <fayyazuddin@gmail.com>=0ATo: java-user=
@lucene.apache.org=0ASent: Wed, 23 December, 2009 5:03:00=0ASubject: Re: Ne=
ed help with XML Query Parser example in Lucene 3.0=0A=0A=0AI have found an=
 error in the web.xml file, however, this DID NOT fix the=0Aproblem.  Insid=
e the web.xml file, there is the following snippet:=0A=0A<init-param>=0A   =
         <description>=0A            Default field used in standard Lucene =
QueryParser used in UserQuery=0Atag</description>=0A            <param-name=
>defaultStandardQueryParserField</param-name>=0A            <param-value>jo=
bDescription</param-value>=0A</init-param>=0A=0Athe <param-value> here shou=
ld be IMHO "description", as neither the=0Aquery.xsl file, nor index.jsp fi=
le contain any tags/values called=0A"jobDescription", only "description".  =
I hope the contributors to the Lucene=0Aproject take note of this, or pleas=
e show me the error of my ways.  Having=0Asaid that, as I mentioned earlier=
, despite making this correction, I am=0Astill getting the above "NullPoint=
erException".  Can anyone see where I am=0Agoing wrong?=0A=0AThanks again t=
o all who reply.=0ASincerely;=0AFayyaz=0A=0Asyedfa wrote:=0A> =0A> Dear fel=
low Java developers:=0A> =0A> I am trying to run the XML Query Parser examp=
le that comes with Lucene 3.0=0A> source distribution.  I have the applicat=
ion structured identical to the=0A> one you download, and I am trying to ru=
n it in eclipse.  When I launch the=0A> application, fill out the form that=
 appears on index.jsp, and then submit=0A> it to search the index, I get th=
e following error 505:=0A> =0A> javax.servlet.ServletException: Error proce=
ssing query=0A> =0A> org.apache.lucene.xmlparser.webdemo.FormBasedXmlQueryD=
emo.doPost(FormBasedXmlQueryDemo.java:124)=0A>     javax.servlet.http.HttpS=
ervlet.service(HttpServlet.java:710)=0A>     javax.servlet.http.HttpServlet=
..service(HttpServlet.java:803)=0A> =0A> =0A> root cause =0A> =0A> java.lang=
..NullPointerException=0A> =0A> org.apache.lucene.xmlparser.webdemo.FormBase=
dXmlQueryDemo.doPost(FormBasedXmlQueryDemo.java:107)=0A>     javax.servlet.=
http.HttpServlet.service(HttpServlet.java:710)=0A>     javax.servlet.http.H=
ttpServlet.service(HttpServlet.java:803)=0A> =0A> =0A> I absolutely have no=
 idea why this is happening, as I even structured the=0A> package of the se=
rvlet in eclipse identical to the way it is in the=0A> example.  I have att=
ached my entire servlet, "FormBasedXmlQueryDemo"=0A> below:=0A> =0A> public=
 class FormBasedXmlQueryDemo extends HttpServlet {=0A>     private static f=
inal long serialVersionUID =3D 1L;=0A>    =0A>     private QueryTemplateMan=
ager queryTemplateManager;=0A>     private CorePlusExtensionsParser xmlPars=
er;=0A>     private IndexSearcher searcher;=0A>     private Analyzer analyz=
er =3D new=0A> StandardAnalyzer(org.apache.lucene.util.Version.LUCENE_CURRE=
NT);=0A>     =0A>     public FormBasedXmlQueryDemo() {=0A>         super();=
=0A>         // TODO Auto-generated constructor stub=0A>     }=0A> =0A>    =
 @Override=0A>     public void init(ServletConfig config) throws ServletExc=
eption {=0A>         // TODO Auto-generated method stub=0A>         super.i=
nit(config);=0A>         =0A>         try{=0A>             =0A>            =
 openExampleIndex();=0A>             =0A>             String xslFile=3Dconf=
ig.getInitParameter("xslFile");=0A>             String defaultStandardQuery=
ParserField =3D=0A> config.getInitParameter("defaultStandardQueryParserFiel=
d");=0A>             queryTemplateManager =3D new=0A> QueryTemplateManager(=
getServletContext().getResourceAsStream("/WEB-INF/" +=0A> xslFile));=0A>   =
          xmlParser =3D new=0A> CorePlusExtensionsParser(defaultStandardQue=
ryParserField, analyzer);=0A>             =0A>         }catch(Exception e){=
=0A>             throw new ServletException("Error loading query template",=
 e);=0A>         }=0A>     }=0A> =0A>     protected void doGet(HttpServletR=
equest request, HttpServletResponse=0A> response) throws ServletException, =
IOException {=0A> =0A>     }=0A> =0A>     @Override=0A>     protected void =
doPost(HttpServletRequest request, HttpServletResponse=0A> response) throws=
 ServletException, IOException {=0A>         // TODO Auto-generated method =
stub=0A>         =0A>         Properties completedFormFields =3D new Proper=
ties();=0A>         Enumeration pNames =3D request.getParameterNames();=0A>=
         =0A>         while (pNames.hasMoreElements()){=0A>             =0A=
>             String propName =3D (String) pNames.nextElement();=0A>       =
      String value =3D request.getParameter(propName);=0A>             =0A>=
             if ((value !=3D null) && (value.trim().length()>0)){=0A>      =
           completedFormFields.setProperty(propName, value);=0A>           =
  }=0A>         }=0A>         =0A>         try{=0A>             org.w3c.dom=
..Document xmlQuery =3D=0A> queryTemplateManager.getQueryAsDOM(completedForm=
Fields);            =0A>             Query query =3D xmlParser.getQuery(xml=
Query.getDocumentElement());=0A>             TopDocs topDocs =3D searcher.s=
earch(query, 10);=0A>             =0A>             if (topDocs !=3D null) {=
=0A>                 ScoreDoc[] sd =3D topDocs.scoreDocs;=0A>              =
   Document[] results =3D new Document[sd.length];=0A>                 =0A>=
                 for(int i =3D 0; i < results.length; i++){=0A>            =
         =0A>                     results[i] =3D searcher.doc(sd[i].doc);=
=0A>                     request.setAttribute("results", results);=0A>     =
            }=0A>             }=0A>             =0A>             RequestDis=
patcher dispatcher =3D=0A> getServletContext().getRequestDispatcher("/index=
..jsp");=0A>             dispatcher.forward(request, response);=0A>         =
}=0A>         catch(Exception e){=0A>             throw new ServletExceptio=
n("Error processing query", e);=0A>         }=0A>     }=0A>     =0A>     pr=
ivate void openExampleIndex() throws CorruptIndexException, IOException=0A>=
 {=0A>         =0A>         =0A>         RAMDirectory rd =3D new RAMDirecto=
ry();=0A>         IndexWriter writer =3D new IndexWriter(rd, analyzer,=0A> =
IndexWriter.MaxFieldLength.LIMITED);=0A>         InputStream dataIn =3D=0A>=
 getServletContext().getResourceAsStream("/WEB-INF/data.tsv");=0A>         =
BufferedReader br =3D new BufferedReader(new InputStreamReader(dataIn));=0A=
>         String line =3D br.readLine();=0A>         =0A>         while (li=
ne !=3D null){=0A>             =0A>             line =3D line.trim();=0A>  =
           if (line.length() > 0){=0A>                 =0A>                =
 StringTokenizer st =3D new StringTokenizer(line, "\t");=0A>               =
  Document doc =3D new Document();=0A>                 doc.add(new Field("l=
ocation",st.nextToken(),Field.Store.YES,=0A>                         Field.=
Index.ANALYZED_NO_NORMS));=0A>                 doc.add(new Field("salary",s=
t.nextToken(),Field.Store.YES,=0A>                         Field.Index.ANAL=
YZED_NO_NORMS));=0A>                 doc.add(new Field("type",st.nextToken(=
),Field.Store.YES,=0A>                         Field.Index.ANALYZED_NO_NORM=
S));=0A>                 doc.add(new Field("description",st.nextToken(),Fie=
ld.Store.YES,=0A>                         Field.Index.ANALYZED));=0A>      =
           writer.addDocument(doc);=0A>             }=0A>             =0A> =
            line =3D br.readLine();=0A>         }=0A>         =0A>         =
writer.close();=0A>     }=0A> =0A> }=0A> =0A> =0A> =0A> When I was tracing =
through the code, it appears that it was throwing the=0A> exception just as=
 it tried to process the line:=0A> =0A> TopDocs topDocs =3D searcher.search=
(query, 10);=0A> =0A> Does anyone know where I am going wrong?  =0A> =0A> T=
hanks in advance to all who reply.=0A> =0A=0A-- =0AView this message in con=
text: http://old.nabble.com/Need-help-with-XML-Query-Parser-example-in-Luce=
ne-3.0-tp26896711p26897607.html=0ASent from the Lucene - Java Users mailing=
 list archive at Nabble.com.=0A=0A=0A--------------------------------------=
-------------------------------=0ATo unsubscribe, e-mail: java-user-unsubsc=
ribe@lucene.apache.org=0AFor additional commands, e-mail: java-user-help@lu=
cene.apache.org=0A=0A=0A      


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 23 10:24:03 2009
Return-Path: <java-user-return-44228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11586 invoked from network); 23 Dec 2009 10:24:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Dec 2009 10:24:03 -0000
Received: (qmail 45959 invoked by uid 500); 23 Dec 2009 10:24:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45894 invoked by uid 500); 23 Dec 2009 10:24:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45884 invoked by uid 99); 23 Dec 2009 10:24:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Dec 2009 10:24:00 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.220.224 as permitted sender)
Received: from [209.85.220.224] (HELO mail-fx0-f224.google.com) (209.85.220.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Dec 2009 10:23:54 +0000
Received: by fxm24 with SMTP id 24so2697929fxm.11
        for <java-user@lucene.apache.org>; Wed, 23 Dec 2009 02:23:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=kCUVPpVdctEhzX0AAz6QU0qpkCn0ZujMSCPh9fEnjTw=;
        b=ajY6S5OxOOz4W8l+eRwPBEO3L36BZxEnWkKW6pVrutxHPzb44dAzolyGD6ulFgMb0Q
         0CM+I3rN1kfCr4EGl6QJOd7/x7QAFly6JHfABLwSO+0ufdIB0W3jqHRSUSd4kpOk+UXU
         p3ygzW7cfGiQUEYP3v4EKGw/LseQgTP/ehwnk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=wOkurTPX8BttATfuEwWhduA0L3/VOUnmX4OVaeVlWdm0CZcqMq2V9UpiEr7d7gfMuC
         92dBkiDzWJxY50oF1v1TvCYw79pgaDAGEzhLMXSLsmGoSEEKQ95S039ZRidNUOkZRMUY
         goxKIATBpO+Yc5MM7Vd9zeyyU5tlMvmmvSpBY=
MIME-Version: 1.0
Received: by 10.223.97.132 with SMTP id l4mr4306830fan.100.1261563812188; Wed, 
	23 Dec 2009 02:23:32 -0800 (PST)
In-Reply-To: <4BA5307AF084A04E83875ECC173BC77BA23669E56C@EXCHANGE.persistent.co.in>
References: <4BA5307AF084A04E83875ECC173BC77BA23669E56C@EXCHANGE.persistent.co.in>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 23 Dec 2009 10:23:12 +0000
Message-ID: <8c4e68610912230223g23fdfaaat9ec5228d1203e9ce@mail.gmail.com>
Subject: Re: Lucene Index size v/s available memory
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi


24Gb RAM for a 100Gb index is likely to be plenty.  You don't have a
huge amount of control over what lucene loads in memory, but take a
look at termInfosIndexDivisor in IndexReader.  And I believe that
omitting field norms (Field.setOmitNorms) may help too.  Googling for
"lucene memory usage" or equivalent will find you some info.

Are you using lucene sorting?  That can use a lot of memory - see
recent threads on this list.


How many queries per second?  Loads ...  Try it out yourself with your
searches on your index on your hardware.  And read
http://wiki.apache.org/lucene-java/ImproveSearchingSpeed

Good luck.


--
Ian.


On Wed, Dec 23, 2009 at 5:27 AM, Shakti Purohit
<shakti_purohit@persistent.co.in> wrote:
> We are required to find out how much percentage/part of lucene index need=
s to be in memory for acceptable search response time. The index size we ha=
ve is around 100 GB while the available memory is 24 GB. Since we do not ha=
ve the option of loading whole of the index in memory we wanted to know wha=
t minimum part of lucene index be loaded in memory so that response time is=
 not affected.
> Does the index consist of any files or hierarchy such that loading only t=
his file/information in memory and not whole of the index would suffice for=
 faster response time.
>
> The other question I have is how many queries per second lucene can suppo=
rt? We are interested in finding out throughput of the system.
>
> Thanks,
> Shakti
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 23 13:36:41 2009
Return-Path: <java-user-return-44229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98434 invoked from network); 23 Dec 2009 13:36:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Dec 2009 13:36:41 -0000
Received: (qmail 22839 invoked by uid 500); 23 Dec 2009 13:36:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22747 invoked by uid 500); 23 Dec 2009 13:36:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22737 invoked by uid 99); 23 Dec 2009 13:36:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Dec 2009 13:36:39 +0000
X-ASF-Spam-Status: No, hits=-1.5 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of developer.inbox@gmail.com designates 209.85.160.46 as permitted sender)
Received: from [209.85.160.46] (HELO mail-pw0-f46.google.com) (209.85.160.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Dec 2009 13:36:32 +0000
Received: by pwj16 with SMTP id 16so4974764pwj.5
        for <java-user@lucene.apache.org>; Wed, 23 Dec 2009 05:36:12 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:from:date:message-id
         :subject:to:content-type;
        bh=7mL0hLY46s9ysK7bzhTjMtJ8YwMyoCJg77r6elcYEqs=;
        b=xJLDRORKSfs08Vi7DzEY+s53Tuzzsjnye8G2RvEYuYBfD6Oq9aCmZTLRb60TaFBGUu
         Kg8kNLtCcXyLyifCZZ+QmV1XFJLkYJWiXuRvmGjMdZDg42X9ZEcyuvvBP/SasPXaO8hi
         aMrv9pKD9nMS6sgNm3APQ408Y+o8meFpWkmgc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=hswvQm3MAQFGff3m43oAxnrvsNLI2kOLW8Wt5uXp22mvJaY0ot5QuGD3xYgD20Kkjz
         Fab1e7I8IN0hE1mUNzegc3rdYMwBBdUdm169iqboZrbaar08l/aI9eVr4z57Rldemg3A
         559GkxbGT1CLH5hMcrHFxwe0LgSdHuuPcS5zw=
MIME-Version: 1.0
Received: by 10.142.8.34 with SMTP id 34mr6777116wfh.305.1261575372171; Wed, 
	23 Dec 2009 05:36:12 -0800 (PST)
From: Shahid Faiz <developer.inbox@gmail.com>
Date: Wed, 23 Dec 2009 18:35:52 +0500
Message-ID: <21a6d2d30912230535u58d1b3cag573ce9aa3033e096@mail.gmail.com>
Subject: solution for parent-child relationship
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00504502b146ea6a0e047b656755

--00504502b146ea6a0e047b656755
Content-Type: text/plain; charset=ISO-8859-1

Hi,

Following are details of my problem and possible solutions which I can think
of. Please suggest which should I choose, or is there any other approach
better than these.

I want to index blog posts and their comments, in my database posts and
comments are stored in two different tables. Currently I am indexing posts
only and search works perfectly fine, but now I want to index comments as
well. From now on when user will search any word, all posts will be
displayed which meet search criteria including posts and only those comments
which meet the specified criteria along with posts. All paging is done on
posts, comments are not considered while calculating page contents.

e.g.

POST =>          Google launched Chrome Browser
COMMENT =>  Microsoft IE also has tab browsing.

Now searching (microsoft AND IE), should also display this post with along
with above comment.

One solution is: I should index both posts+comments in one lucene index and
search that index. But as i have to display 10 posts (not including
comments) per page so it gets complicated while finding records to be
displayed on any given page. I think, I can solve this problem by creating
two queries one to search posts and one to search comments only and then can
join them using OR operator.

Second solution could be: I can store comments in different index, and on
search first I will execute query on comments index and use result of
comments search to search blog posts.

Thanks in advance.

- deve

--00504502b146ea6a0e047b656755--

From java-user-return-44230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 23 13:46:14 2009
Return-Path: <java-user-return-44230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6105 invoked from network); 23 Dec 2009 13:46:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Dec 2009 13:46:14 -0000
Received: (qmail 33380 invoked by uid 500); 23 Dec 2009 13:46:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33287 invoked by uid 500); 23 Dec 2009 13:46:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33277 invoked by uid 99); 23 Dec 2009 13:46:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Dec 2009 13:46:12 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of vaijanath.rao@corp.aol.com designates 205.188.105.145 as permitted sender)
Received: from [205.188.105.145] (HELO imr-da03.mx.aol.com) (205.188.105.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Dec 2009 13:46:04 +0000
Received: from AOLDTCMEH01.ad.office.aol.com (aoldtcmeh01.office.aol.com [10.180.121.20])
	by imr-da03.mx.aol.com (8.14.1/8.14.1) with ESMTP id nBNDjcvK019994
	for <java-user@lucene.apache.org>; Wed, 23 Dec 2009 08:45:38 -0500
Received: from EVSMTC04.ad.office.aol.com ([10.178.121.24]) by AOLDTCMEH01.ad.office.aol.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 23 Dec 2009 08:45:38 -0500
Received: from EVSE1A01.ad.office.aol.com ([10.146.190.230]) by EVSMTC04.ad.office.aol.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 23 Dec 2009 08:45:38 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: solution for parent-child relationship
Date: Wed, 23 Dec 2009 19:15:35 +0530
Message-ID: <4994C2F19CAF5641BFC1F4832A7EE2E3461191@EVSE1A01.ad.office.aol.com>
In-Reply-To: <21a6d2d30912230535u58d1b3cag573ce9aa3033e096@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: solution for parent-child relationship
Thread-Index: AcqD1P2khtrcn1DPSLebmn7iyC1GkwAAM89Q
References: <21a6d2d30912230535u58d1b3cag573ce9aa3033e096@mail.gmail.com>
From: "Rao, Vaijanath" <vaijanath.rao@corp.aol.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 23 Dec 2009 13:45:38.0558 (UTC) FILETIME=[35FE51E0:01CA83D6]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Shahid,

This is just one of the ways to get it.

You can have an id to your post and comment for every post get's an
subID so for example

Post 1 get id 2566 and comment 1 in that post get id 2566-64. You can
use various methods to get this ID.  Then you can write your own Hit
Collector in which you can collect the results and display the top-10 or
all unique posts.

--Thanks and Regards
Vaijanath N. Rao

-----Original Message-----
From: Shahid Faiz [mailto:developer.inbox@gmail.com]=20
Sent: Wednesday, December 23, 2009 7:06 PM
To: java-user@lucene.apache.org
Subject: solution for parent-child relationship

Hi,

Following are details of my problem and possible solutions which I can
think of. Please suggest which should I choose, or is there any other
approach better than these.

I want to index blog posts and their comments, in my database posts and
comments are stored in two different tables. Currently I am indexing
posts only and search works perfectly fine, but now I want to index
comments as well. From now on when user will search any word, all posts
will be displayed which meet search criteria including posts and only
those comments which meet the specified criteria along with posts. All
paging is done on posts, comments are not considered while calculating
page contents.

e.g.

POST =3D>          Google launched Chrome Browser
COMMENT =3D>  Microsoft IE also has tab browsing.

Now searching (microsoft AND IE), should also display this post with
along with above comment.

One solution is: I should index both posts+comments in one lucene index
and search that index. But as i have to display 10 posts (not including
comments) per page so it gets complicated while finding records to be
displayed on any given page. I think, I can solve this problem by
creating two queries one to search posts and one to search comments only
and then can join them using OR operator.

Second solution could be: I can store comments in different index, and
on search first I will execute query on comments index and use result of
comments search to search blog posts.

Thanks in advance.

- deve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 23 14:13:11 2009
Return-Path: <java-user-return-44231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22445 invoked from network); 23 Dec 2009 14:13:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Dec 2009 14:13:11 -0000
Received: (qmail 72271 invoked by uid 500); 23 Dec 2009 14:13:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72199 invoked by uid 500); 23 Dec 2009 14:13:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72189 invoked by uid 99); 23 Dec 2009 14:13:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Dec 2009 14:13:09 +0000
X-ASF-Spam-Status: No, hits=-6.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE,RCVD_IN_DNSWL_MED
X-Spam-Check-By: apache.org
Received-SPF: unknown (athena.apache.org: error in processing during lookup of siraj@jobdiva.com)
Received: from [64.18.2.28] (HELO exprod7og125.obsmtp.com) (64.18.2.28)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 23 Dec 2009 14:13:00 +0000
Received: from source ([64.147.106.2]) (using TLSv1) by exprod7ob125.postini.com ([64.18.6.12]) with SMTP
	ID DSNKSzIlVzEkGVvqERz65swH9orRpslGXW2g@postini.com; Wed, 23 Dec 2009 06:12:40 PST
Received: from [10.10.1.79] (12.111.23.142) by mail.jobdiva.com (10.10.30.148)
 with Microsoft SMTP Server (TLS) id 8.1.393.1; Wed, 23 Dec 2009 09:12:48
 -0500
Message-ID: <4B322536.5050108@jobdiva.com>
Date: Wed, 23 Dec 2009 09:12:06 -0500
From: Siraj Haider <siraj@jobdiva.com>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Re: Lucene going non-responsive under heavy load
References: <4B3145D5.2040708@jobdiva.com>	 <9ac0c6aa0912221428u55362375q5bb236c4646d53d9@mail.gmail.com>	 <4B314EF3.8080604@jobdiva.com> <9ac0c6aa0912221544t4d739ea9sf4bdda59bc82b071@mail.gmail.com>
In-Reply-To: <9ac0c6aa0912221544t4d739ea9sf4bdda59bc82b071@mail.gmail.com>
Content-Type: multipart/alternative;
	boundary="------------000500050205080201020904"

--------------000500050205080201020904
Content-Type: text/plain; charset="ISO-8859-1"; format=flowed
Content-Transfer-Encoding: 7bit

We have dual cpu intel xeon machines running "Red Hat Enterprise Linux 
ES release 3 (Taroon Update 6)".  We have 4GB memory on these machines 
with 2GB allocated to tomcat.
After modifying the index we open a new one, warm it up, make it live 
and then close the old one.

-siraj

Michael McCandless wrote:
> A merge shouldn't make the machine completely non-responsive, just,
> slower to run searches / index documents.
>
> What kind of machine / IO system is this?
>
> You can set maxMergeDocs to limit how large the merge is allowed to
> be.  But, be careful, since if you set this too small you'll wind up
> with way too many segments over time, which'll slow down search and
> risk file handle exhaustion.  Likewise, increase mergeFactor.  You
> could also try decreasing the merge thread priority in
> ConcurrentMergeScheduler... though that risk starvation of the merge
> thread if your CPUs are really saturated doing indexing/searching.
> Another thing to try is the BalancedSegmentMergePolicy (in
> contrib/misc); it also tries to avoid big merges.
>
> Also, how are you opening new readers?  Can you share more how you are
> using Lucene?
>
> Mike
>
> On Tue, Dec 22, 2009 at 5:57 PM, Siraj Haider <siraj@jobdiva.com> wrote:
>   
>> Hi Mike,
>> You are right, sometimes there is an implicit merge running when the machine
>> goes non-responsive.  How can we avoid running those merges during the day
>> and how can we minimize the effect it will have on searches?
>>
>> -siraj
>>
>> Michael McCandless wrote:
>>     
>>> Is it possible a large merge is running?
>>>
>>> You can turn on IndexWriter.setInfoStream to see more details about
>>> what IW is doing, including merging.
>>>
>>> Mike
>>>
>>> On Tue, Dec 22, 2009 at 5:19 PM, Siraj Haider <siraj@jobdiva.com> wrote:
>>>
>>>       
>>>> Hello guys,
>>>> We have a dilemma on a few of our lucene machines.  We have a tomcat
>>>> running
>>>> our servlets for searching and indexing on each of these machines.  Its a
>>>> live index where documents are being added to index while online searches
>>>> are also being served at the same time.  Indexing happens every 5 minutes
>>>> and if there are new documents added, the index gets reopend.  For most
>>>> of
>>>> the times the performance is very good, but under heavy load of searches,
>>>> the machine goes non-responsive.  We can still telnet to machine and see
>>>> that cpu-wise its not bad, but I/O seems to be a problem.  Is there
>>>> anything
>>>> we might be doing to cause it or anything that we can do to avoid it.  I
>>>> know I did not provide a lot of information about how we are indexing and
>>>> searching but I will answer any question anyone might have.
>>>>
>>>> thanks in advance
>>>> -siraj
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>         
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>       
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


--------------000500050205080201020904--

From java-user-return-44232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 23 14:37:37 2009
Return-Path: <java-user-return-44232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35116 invoked from network); 23 Dec 2009 14:37:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Dec 2009 14:37:37 -0000
Received: (qmail 99461 invoked by uid 500); 23 Dec 2009 14:37:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99397 invoked by uid 500); 23 Dec 2009 14:37:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99387 invoked by uid 99); 23 Dec 2009 14:37:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Dec 2009 14:37:35 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Dec 2009 14:37:26 +0000
Received: by yxe30 with SMTP id 30so8222891yxe.29
        for <java-user@lucene.apache.org>; Wed, 23 Dec 2009 06:37:05 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.105.27 with SMTP id d27mr15562173ybc.195.1261579023972; 
	Wed, 23 Dec 2009 06:37:03 -0800 (PST)
In-Reply-To: <4B322536.5050108@jobdiva.com>
References: <4B3145D5.2040708@jobdiva.com>
	 <9ac0c6aa0912221428u55362375q5bb236c4646d53d9@mail.gmail.com>
	 <4B314EF3.8080604@jobdiva.com>
	 <9ac0c6aa0912221544t4d739ea9sf4bdda59bc82b071@mail.gmail.com>
	 <4B322536.5050108@jobdiva.com>
Date: Wed, 23 Dec 2009 09:37:03 -0500
Message-ID: <9ac0c6aa0912230637o739f6e02gc6969b9e9bf406dc@mail.gmail.com>
Subject: Re: Lucene going non-responsive under heavy load
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Are you using IndexReader.reopen to open a new reader, from an
existing one?  That's much more efficient than opening a new reader.

I think a good next step is to run with IndexWriter.setInfoStream on,
and run your JRE with verbose GC, to see more details.

Mike

On Wed, Dec 23, 2009 at 9:12 AM, Siraj Haider <siraj@jobdiva.com> wrote:
> We have dual cpu intel xeon machines running "Red Hat Enterprise Linux ES
> release 3 (Taroon Update 6)". =A0We have 4GB memory on these machines wit=
h 2GB
> allocated to tomcat.
> After modifying the index we open a new one, warm it up, make it live and
> then close the old one.
>
> -siraj
>
> Michael McCandless wrote:
>>
>> A merge shouldn't make the machine completely non-responsive, just,
>> slower to run searches / index documents.
>>
>> What kind of machine / IO system is this?
>>
>> You can set maxMergeDocs to limit how large the merge is allowed to
>> be. =A0But, be careful, since if you set this too small you'll wind up
>> with way too many segments over time, which'll slow down search and
>> risk file handle exhaustion. =A0Likewise, increase mergeFactor. =A0You
>> could also try decreasing the merge thread priority in
>> ConcurrentMergeScheduler... though that risk starvation of the merge
>> thread if your CPUs are really saturated doing indexing/searching.
>> Another thing to try is the BalancedSegmentMergePolicy (in
>> contrib/misc); it also tries to avoid big merges.
>>
>> Also, how are you opening new readers? =A0Can you share more how you are
>> using Lucene?
>>
>> Mike
>>
>> On Tue, Dec 22, 2009 at 5:57 PM, Siraj Haider <siraj@jobdiva.com> wrote:
>>
>>>
>>> Hi Mike,
>>> You are right, sometimes there is an implicit merge running when the
>>> machine
>>> goes non-responsive. =A0How can we avoid running those merges during th=
e
>>> day
>>> and how can we minimize the effect it will have on searches?
>>>
>>> -siraj
>>>
>>> Michael McCandless wrote:
>>>
>>>>
>>>> Is it possible a large merge is running?
>>>>
>>>> You can turn on IndexWriter.setInfoStream to see more details about
>>>> what IW is doing, including merging.
>>>>
>>>> Mike
>>>>
>>>> On Tue, Dec 22, 2009 at 5:19 PM, Siraj Haider <siraj@jobdiva.com> wrot=
e:
>>>>
>>>>
>>>>>
>>>>> Hello guys,
>>>>> We have a dilemma on a few of our lucene machines. =A0We have a tomca=
t
>>>>> running
>>>>> our servlets for searching and indexing on each of these machines. =
=A0Its
>>>>> a
>>>>> live index where documents are being added to index while online
>>>>> searches
>>>>> are also being served at the same time. =A0Indexing happens every 5
>>>>> minutes
>>>>> and if there are new documents added, the index gets reopend. =A0For =
most
>>>>> of
>>>>> the times the performance is very good, but under heavy load of
>>>>> searches,
>>>>> the machine goes non-responsive. =A0We can still telnet to machine an=
d
>>>>> see
>>>>> that cpu-wise its not bad, but I/O seems to be a problem. =A0Is there
>>>>> anything
>>>>> we might be doing to cause it or anything that we can do to avoid it.
>>>>> =A0I
>>>>> know I did not provide a lot of information about how we are indexing
>>>>> and
>>>>> searching but I will answer any question anyone might have.
>>>>>
>>>>> thanks in advance
>>>>> -siraj
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 23 14:56:19 2009
Return-Path: <java-user-return-44233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44308 invoked from network); 23 Dec 2009 14:56:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Dec 2009 14:56:18 -0000
Received: (qmail 26614 invoked by uid 500); 23 Dec 2009 14:56:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26543 invoked by uid 500); 23 Dec 2009 14:56:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26533 invoked by uid 99); 23 Dec 2009 14:56:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Dec 2009 14:56:16 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Dec 2009 14:56:06 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 01C83D36005
	for <java-user@lucene.apache.org>; Wed, 23 Dec 2009 15:55:46 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id mxi9Ph1ojRrn for <java-user@lucene.apache.org>;
	Wed, 23 Dec 2009 15:55:36 +0100 (CET)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 790FCD36002
	for <java-user@lucene.apache.org>; Wed, 23 Dec 2009 15:55:36 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <4B3145D5.2040708@jobdiva.com> <9AF96C3A32064421A29AAAA5143D07DE@VEGA> <4B314F79.1050909@jobdiva.com>
Subject: RE: Lucene going non-responsive under heavy load
Date: Wed, 23 Dec 2009 15:55:35 +0100
Message-ID: <C033AA7917E34F3CAC8D0CF0B3291E99@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <4B314F79.1050909@jobdiva.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
Thread-Index: AcqDWuGtszIi/EX7Q/uCRR1PtpeMfAAhPL6Q
X-Virus-Checked: Checked by ClamAV on apache.org

You behaviour sounds really like a GC issue. I would switch the GC to
verbose and see what's happening (like Mark in his blog post).

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Siraj Haider [mailto:siraj@jobdiva.com]
> Sent: Wednesday, December 23, 2009 12:00 AM
> To: java-user@lucene.apache.org
> Subject: Re: Lucene going non-responsive under heavy load
> 
> Hi Uwe,
> Following are the info:
> Java VM: "1.6.0_05"
> Java Options:  -server -Xms512m -Xmx2048m
> We are not using any specific GC.
> 
> regards
> -siraj
> 
> Uwe Schindler wrote:
> > If it suddenly gets unresponsive, you may have a GC (garbage collector)
> > problem. Can you post your Java options, Java VM version, max heap and
> so
> > on. Maybe you are doing some strange things.
> >
> > For us the best GC to use (we have Java 1.5) was the "Parallel New GC" /
> > "The Concurrent Low Pause Collector", here are some of our options that
> > helped solving the problem: -XX:+UseConcMarkSweepGC -XX:+UseParNewGC.
> You
> > may also read Mark Millers Blog post:
> >
> > http://www.lucidimagination.com/blog/2009/09/19/java-garbage-collection-
> boot
> > -camp-draft/
> >
> > Uwe
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> >
> >> -----Original Message-----
> >> From: Siraj Haider [mailto:siraj@jobdiva.com]
> >> Sent: Tuesday, December 22, 2009 11:19 PM
> >> To: java-user@lucene.apache.org
> >> Subject: Lucene going non-responsive under heavy load
> >>
> >> Hello guys,
> >> We have a dilemma on a few of our lucene machines.  We have a tomcat
> >> running our servlets for searching and indexing on each of these
> >> machines.  Its a live index where documents are being added to index
> >> while online searches are also being served at the same time.  Indexing
> >> happens every 5 minutes and if there are new documents added, the index
> >> gets reopend.  For most of the times the performance is very good, but
> >> under heavy load of searches, the machine goes non-responsive.  We can
> >> still telnet to machine and see that cpu-wise its not bad, but I/O
> seems
> >> to be a problem.  Is there anything we might be doing to cause it or
> >> anything that we can do to avoid it.  I know I did not provide a lot of
> >> information about how we are indexing and searching but I will answer
> >> any question anyone might have.
> >>
> >> thanks in advance
> >> -siraj
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 23 15:30:11 2009
Return-Path: <java-user-return-44234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56325 invoked from network); 23 Dec 2009 15:30:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Dec 2009 15:30:11 -0000
Received: (qmail 66784 invoked by uid 500); 23 Dec 2009 15:30:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66695 invoked by uid 500); 23 Dec 2009 15:30:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66685 invoked by uid 99); 23 Dec 2009 15:30:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Dec 2009 15:30:09 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.219.225 as permitted sender)
Received: from [209.85.219.225] (HELO mail-ew0-f225.google.com) (209.85.219.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Dec 2009 15:30:00 +0000
Received: by ewy25 with SMTP id 25so8969253ewy.5
        for <java-user@lucene.apache.org>; Wed, 23 Dec 2009 07:29:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=9G7xyhHWHNV0rqkWwe8LBWmBb3gxWmF4eWLtHzxGKGM=;
        b=mYjUTn+hbytx6Y28AJ7KoXXnZmZYSezPE2JKEIHKDcULSliTh//yHeJ1dDhj39cs67
         Un32XdR9lOrPAYl6wgURI0MxPpg+7azb0+/z9gEPJ+Tak3W3TnDEp/vOUMbO+UUVuThG
         x9PbSZbTYWgaWtiPGz2ljWJE+ANig/peJCjZM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=EG4w9nmMx9A8pKcFXGxjX2+Ns0L5a7syUrIDlscv/GlHhQL059xEgnM7WV4oMUUg65
         0xa/wxEpa35Q9Q8XtNAML8fgU+Joswx0EEAa/EADJwh7CZ4Z0Zf2vuYohtYEI31cGM15
         nK84JZVUN9gZTwelausgZpJLhKtYshPAAy4ek=
MIME-Version: 1.0
Received: by 10.216.87.143 with SMTP id y15mr3664954wee.39.1261582179755; Wed, 
	23 Dec 2009 07:29:39 -0800 (PST)
In-Reply-To: <4BA5307AF084A04E83875ECC173BC77BA23669E56C@EXCHANGE.persistent.co.in>
References: <4BA5307AF084A04E83875ECC173BC77BA23669E56C@EXCHANGE.persistent.co.in>
Date: Wed, 23 Dec 2009 10:29:39 -0500
Message-ID: <359a92830912230729g2bcf7dacjda2a266a60a20701@mail.gmail.com>
Subject: Re: Lucene Index size v/s available memory
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d77e32ade63a047b66fdf9
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d77e32ade63a047b66fdf9
Content-Type: text/plain; charset=ISO-8859-1

The size of your index isn't a very useful number without knowing a
significant amount about the structure of your index. Depending upon what's
stored, what's indexed and what kind of searching you're doing (e.g.
sorting?) it varies. About all we can say is that you'll probably need less
than 100G. Here are a few rough ideas to try to pin this down:

1> turn off all storage and index a representative sample and extrapolate
the eventual size. This will be a rough measure of the amount of your index
relevant to searching. Do note that the size of the index will *not* grow
linearly, it'll grow very quickly for a while then the rate of increase will
decline.

2> As Ian said, think about turning of norms if you won't need them. See the
"Norms" section at
http://www.lucidimagination.com/Community/Hear-from-the-Experts/Articles/Scaling-Lucene-and-Solr

3> Try some searches and use one of the many measurement tools to see how
much memory is being used currently.


As far as how many queries/second, there's no possible way we can answer
that based on the information you've provided, you have to measure. You can
always copy the index to N machines and put a load balancer in front of them
for instance.

SOLR is always an option here as well.

Erick




On Wed, Dec 23, 2009 at 12:27 AM, Shakti Purohit <
shakti_purohit@persistent.co.in> wrote:

> We are required to find out how much percentage/part of lucene index needs
> to be in memory for acceptable search response time. The index size we have
> is around 100 GB while the available memory is 24 GB. Since we do not have
> the option of loading whole of the index in memory we wanted to know what
> minimum part of lucene index be loaded in memory so that response time is
> not affected.
> Does the index consist of any files or hierarchy such that loading only
> this file/information in memory and not whole of the index would suffice for
> faster response time.
>
> The other question I have is how many queries per second lucene can
> support? We are interested in finding out throughput of the system.
>
> Thanks,
> Shakti
>
> DISCLAIMER
> ==========
> This e-mail may contain privileged and confidential information which is
> the property of Persistent Systems Ltd. It is intended only for the use of
> the individual or entity to which it is addressed. If you are not the
> intended recipient, you are not authorized to read, retain, copy, print,
> distribute or use this message. If you have received this communication in
> error, please notify the sender and delete all copies of this message.
> Persistent Systems Ltd. does not accept any liability for virus infected
> mails.
>

--0016e6d77e32ade63a047b66fdf9--

From java-user-return-44235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 23 15:46:11 2009
Return-Path: <java-user-return-44235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62340 invoked from network); 23 Dec 2009 15:46:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Dec 2009 15:46:11 -0000
Received: (qmail 81489 invoked by uid 500); 23 Dec 2009 15:46:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81406 invoked by uid 500); 23 Dec 2009 15:46:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81396 invoked by uid 99); 23 Dec 2009 15:46:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Dec 2009 15:46:09 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.78.26 as permitted sender)
Received: from [74.125.78.26] (HELO ey-out-2122.google.com) (74.125.78.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Dec 2009 15:46:01 +0000
Received: by ey-out-2122.google.com with SMTP id 4so143535eyf.5
        for <java-user@lucene.apache.org>; Wed, 23 Dec 2009 07:45:40 -0800 (PST)
MIME-Version: 1.0
Received: by 10.216.87.143 with SMTP id y15mr3671290wee.39.1261583140319; Wed, 
	23 Dec 2009 07:45:40 -0800 (PST)
In-Reply-To: <21a6d2d30912230535u58d1b3cag573ce9aa3033e096@mail.gmail.com>
References: <21a6d2d30912230535u58d1b3cag573ce9aa3033e096@mail.gmail.com>
Date: Wed, 23 Dec 2009 10:45:40 -0500
Message-ID: <359a92830912230745i499f0835s82151d3c6d3235a6@mail.gmail.com>
Subject: Re: solution for parent-child relationship
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d77e32eef278047b67366a

--0016e6d77e32eef278047b67366a
Content-Type: text/plain; charset=ISO-8859-1

Ya just gotta stop thinking like a database guy, man <G>. Lucene searches
lots and lots of text very well. It doesn't do joins worth a darn. The
moment
you star thinking in terms of sub-queries, you're probably starting down the
wrong track.

Here's a possibility. Index each post and all associated comments as a
single
document, with the post and all comments put in the same field. Something
like
doc.add("text", <original post text>);
doc.add("text", <first comment>);
doc.add("text", <second comment>);
add the document to the index.....

Now, all you need to do is search the "text" field and you get everything.
If
you set the position increment gap to something other than 1 (see the docs),
you can distinguish between the individual calls to doc.add(), see
getPositionIncrementGap.

In general, when indexing anything database-related, the advice is to
flatten
then data as you put it into a Lucene index. Think about making all the data
available as the result of a single query. This leads to data replication,
which
goes against all your database instincts, but....

HTH
Erick


On Wed, Dec 23, 2009 at 8:35 AM, Shahid Faiz <developer.inbox@gmail.com>wrote:

> Hi,
>
> Following are details of my problem and possible solutions which I can
> think
> of. Please suggest which should I choose, or is there any other approach
> better than these.
>
> I want to index blog posts and their comments, in my database posts and
> comments are stored in two different tables. Currently I am indexing posts
> only and search works perfectly fine, but now I want to index comments as
> well. From now on when user will search any word, all posts will be
> displayed which meet search criteria including posts and only those
> comments
> which meet the specified criteria along with posts. All paging is done on
> posts, comments are not considered while calculating page contents.
>
> e.g.
>
> POST =>          Google launched Chrome Browser
> COMMENT =>  Microsoft IE also has tab browsing.
>
> Now searching (microsoft AND IE), should also display this post with along
> with above comment.
>
> One solution is: I should index both posts+comments in one lucene index and
> search that index. But as i have to display 10 posts (not including
> comments) per page so it gets complicated while finding records to be
> displayed on any given page. I think, I can solve this problem by creating
> two queries one to search posts and one to search comments only and then
> can
> join them using OR operator.
>
> Second solution could be: I can store comments in different index, and on
> search first I will execute query on comments index and use result of
> comments search to search blog posts.
>
> Thanks in advance.
>
> - deve
>

--0016e6d77e32eef278047b67366a--

From java-user-return-44236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 23 16:41:54 2009
Return-Path: <java-user-return-44236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81848 invoked from network); 23 Dec 2009 16:41:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Dec 2009 16:41:54 -0000
Received: (qmail 62725 invoked by uid 500); 23 Dec 2009 16:41:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62641 invoked by uid 500); 23 Dec 2009 16:41:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62631 invoked by uid 99); 23 Dec 2009 16:41:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Dec 2009 16:41:52 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of developer.inbox@gmail.com designates 209.85.222.173 as permitted sender)
Received: from [209.85.222.173] (HELO mail-pz0-f173.google.com) (209.85.222.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Dec 2009 16:41:43 +0000
Received: by pzk3 with SMTP id 3so2045101pzk.20
        for <java-user@lucene.apache.org>; Wed, 23 Dec 2009 08:41:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=OV6P/YL92HaQOMTVHpP2NolSJxuOUl5Rb8nk/9Rytm4=;
        b=xbc9edVk0T8QTEyNOA23sX0HEWUUzSUO/+4q7hoH3TisX91AE5BNJNHMq48ED0mRgW
         0W+oOCx0bcSbJrzFqDwqcT2tY+sNl4dYr5eV9dD6eKoG4gpjn/eo7qPMOb/lXMqCWhQ1
         yXB616CXLOepj7z+8u6BxXQMq6+tcAi0+Zfi8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=r+1V4lSoPuJBsyNsF/AGA3tnsVPeRt1fy3recbeuMkhhA8tzl1SR6FyX0Xih7LTxbC
         IMI/hrPXCNzVJG3hvPFfVXzyXutVS2XBVgCidOH2NxQI8+z9aYa4rlJcg4HARP039DjN
         1e9+MrUybTT2/BACujNiBNT9AWTf0I0SDFPs8=
MIME-Version: 1.0
Received: by 10.142.247.6 with SMTP id u6mr6823597wfh.181.1261586482239; Wed, 
	23 Dec 2009 08:41:22 -0800 (PST)
In-Reply-To: <359a92830912230745i499f0835s82151d3c6d3235a6@mail.gmail.com>
References: <21a6d2d30912230535u58d1b3cag573ce9aa3033e096@mail.gmail.com> 
	<359a92830912230745i499f0835s82151d3c6d3235a6@mail.gmail.com>
From: Deve <developer.inbox@gmail.com>
Date: Wed, 23 Dec 2009 21:41:02 +0500
Message-ID: <21a6d2d30912230841v7166df26h9d2922dbabcaabeb@mail.gmail.com>
Subject: Re: solution for parent-child relationship
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00504502c5fc2099d0047b67fef1
X-Virus-Checked: Checked by ClamAV on apache.org

--00504502c5fc2099d0047b67fef1
Content-Type: text/plain; charset=ISO-8859-1

@Erick, you are right i will have to stop thinking in terms of databases,
thats why i wanted to discuss this.

i don't get how can i use getPositionIncrementGap, could you provide little
more details.

thanks,

On Wed, Dec 23, 2009 at 8:45 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> Ya just gotta stop thinking like a database guy, man <G>. Lucene searches
> lots and lots of text very well. It doesn't do joins worth a darn. The
> moment
> you star thinking in terms of sub-queries, you're probably starting down
> the
> wrong track.
>
> Here's a possibility. Index each post and all associated comments as a
> single
> document, with the post and all comments put in the same field. Something
> like
> doc.add("text", <original post text>);
> doc.add("text", <first comment>);
> doc.add("text", <second comment>);
> add the document to the index.....
>
> Now, all you need to do is search the "text" field and you get everything.
> If
> you set the position increment gap to something other than 1 (see the
> docs),
> you can distinguish between the individual calls to doc.add(), see
> getPositionIncrementGap.
>
> In general, when indexing anything database-related, the advice is to
> flatten
> then data as you put it into a Lucene index. Think about making all the
> data
> available as the result of a single query. This leads to data replication,
> which
> goes against all your database instincts, but....
>
> HTH
> Erick
>
>
> On Wed, Dec 23, 2009 at 8:35 AM, Shahid Faiz <developer.inbox@gmail.com
> >wrote:
>
> > Hi,
> >
> > Following are details of my problem and possible solutions which I can
> > think
> > of. Please suggest which should I choose, or is there any other approach
> > better than these.
> >
> > I want to index blog posts and their comments, in my database posts and
> > comments are stored in two different tables. Currently I am indexing
> posts
> > only and search works perfectly fine, but now I want to index comments as
> > well. From now on when user will search any word, all posts will be
> > displayed which meet search criteria including posts and only those
> > comments
> > which meet the specified criteria along with posts. All paging is done on
> > posts, comments are not considered while calculating page contents.
> >
> > e.g.
> >
> > POST =>          Google launched Chrome Browser
> > COMMENT =>  Microsoft IE also has tab browsing.
> >
> > Now searching (microsoft AND IE), should also display this post with
> along
> > with above comment.
> >
> > One solution is: I should index both posts+comments in one lucene index
> and
> > search that index. But as i have to display 10 posts (not including
> > comments) per page so it gets complicated while finding records to be
> > displayed on any given page. I think, I can solve this problem by
> creating
> > two queries one to search posts and one to search comments only and then
> > can
> > join them using OR operator.
> >
> > Second solution could be: I can store comments in different index, and on
> > search first I will execute query on comments index and use result of
> > comments search to search blog posts.
> >
> > Thanks in advance.
> >
> > - deve
> >
>

--00504502c5fc2099d0047b67fef1--

From java-user-return-44237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 23 17:05:08 2009
Return-Path: <java-user-return-44237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90639 invoked from network); 23 Dec 2009 17:05:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Dec 2009 17:05:08 -0000
Received: (qmail 88012 invoked by uid 500); 23 Dec 2009 17:05:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87934 invoked by uid 500); 23 Dec 2009 17:05:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87924 invoked by uid 99); 23 Dec 2009 17:05:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Dec 2009 17:05:05 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mario-fa@infonet.com.br designates 200.241.52.11 as permitted sender)
Received: from [200.241.52.11] (HELO estancia.infonet.com.br) (200.241.52.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Dec 2009 17:04:55 +0000
Received: (qmail 21984 invoked from network); 23 Dec 2009 16:53:19 -0000
Received: by simscan 1.4.0 ppid: 21773, pid: 21869, t: 3.6149s
         scanners: clamav: 0.95.2/m:51/d:9721 spam: 3.2.5
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on
	estancia.infonet.com.br
X-Spam-Level: 
Received: from ip-189-97-62-87.user.vivozap.com.br (HELO titanium) (Usuario-Autenticado:mario-fa@[189.97.62.87])
          (envelope-sender <mario-fa@infonet.com.br>)
          by 200.241.52.11 (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 23 Dec 2009 16:53:15 -0000
From: =?iso-8859-1?B?TeFyaW8gQW5kcuk=?= <mario-fa@infonet.com.br>
To: <java-user@lucene.apache.org>
Subject: spellchecker
Date: Wed, 23 Dec 2009 15:04:20 -0200
Message-ID: <005301ca83f1$fac0d960$f0428c20$@com.br>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0054_01CA83E1.37380960"
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcqD8fglag8aCQ3iRiSSC9lQWO5LsQ==
Content-Language: pt-br
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.0 required=8.0 tests=BAYES_00,
	DYN_RDNS_SHORT_HELO_HTML,HTML_MESSAGE,RDNS_DYNAMIC autolearn=no version=3.2.5

------=_NextPart_000_0054_01CA83E1.37380960
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hello friends,

I=92m new here and in the lucene Project. I=92m trying use the =
"spellchecker"
according to the exemple below:

=20

// To index a file containing words:

  spellchecker.indexDictionary(new PlainTextDictionary(new
File("myfile.txt")));

  String[] suggestions =3D spellchecker.suggestSimilar("misspelt", 5);

=20

But my question is: How Can I write (layout) the file (myfile.txt) ?

=20

---------------------------------------------------------------------

M=E1rio Andr=E9

Instituto Federal de Educa=E7=E3o, Ci=EAncia e Tecnologia de Sergipe - =
IFS

Mestrando em MCC - Universidade Federal de Alagoas - UFAL

http://www.marioandre.com.br/

Skype: mario-fa

-------------------------------------------------------------------------=
---
----------

=20


------=_NextPart_000_0054_01CA83E1.37380960--


From java-user-return-44238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 23 17:39:07 2009
Return-Path: <java-user-return-44238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10101 invoked from network); 23 Dec 2009 17:39:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Dec 2009 17:39:07 -0000
Received: (qmail 23027 invoked by uid 500); 23 Dec 2009 17:39:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22945 invoked by uid 500); 23 Dec 2009 17:39:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22935 invoked by uid 99); 23 Dec 2009 17:39:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Dec 2009 17:39:04 +0000
X-ASF-Spam-Status: No, hits=-2.5 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.220.224 as permitted sender)
Received: from [209.85.220.224] (HELO mail-fx0-f224.google.com) (209.85.220.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Dec 2009 17:38:54 +0000
Received: by fxm24 with SMTP id 24so3077507fxm.11
        for <java-user@lucene.apache.org>; Wed, 23 Dec 2009 09:38:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:reply-to:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=RRHPh8Xav2XGq7VbiDBflZtI28apwh97QNegIEACPHU=;
        b=SyyANAI7hC5XOHQ4QTv1fckbxEzxS6s+99hQpyglJKRKvoN/IxYDBWwxj5THEQcm2d
         uU1OW385abvRVX8dQiiagSURGgZCYjRKeUisICPaEoGW9Eo4mG+jBvtbhcbF9mdUkvtb
         91USJIRJNwLkZzZepJT2UoERNLHc4knhFf7Do=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=fUxJt6MoLz0bA/BFAyAu+OO/1PgW7/MOBRN70DnZSHwN1BEAtbwSTIrOezzvPHH/i1
         Y4Igc3KK1mhwCHmeNWo73aw+8gASoE3yA+UpKJOLhvQQ1LWvDXaf+tEOETxXHqQy2nNI
         OJR6LhOXqdRMvZ3hlTZx2IcsNqKecIOqEwmfQ=
MIME-Version: 1.0
Received: by 10.239.196.130 with SMTP id v2mr1074296hbi.207.1261589912707; 
	Wed, 23 Dec 2009 09:38:32 -0800 (PST)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <005301ca83f1$fac0d960$f0428c20$@com.br>
References: <005301ca83f1$fac0d960$f0428c20$@com.br>
Date: Wed, 23 Dec 2009 18:38:32 +0100
Message-ID: <f18c9dde0912230938v6eee548cy61498aa56a5417c6@mail.gmail.com>
Subject: Re: spellchecker
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hi mario,

PlainTextDictionary expects a text file with one word per line like:

hello
world
foo
bar

simon

2009/12/23 M=C3=A1rio Andr=C3=A9 <mario-fa@infonet.com.br>:
> Hello friends,
>
> I=E2=80=99m new here and in the lucene Project. I=E2=80=99m trying use th=
e "spellchecker"
> according to the exemple below:
>
>
>
> // To index a file containing words:
>
> =C2=A0spellchecker.indexDictionary(new PlainTextDictionary(new
> File("myfile.txt")));
>
> =C2=A0String[] suggestions =3D spellchecker.suggestSimilar("misspelt", 5)=
;
>
>
>
> But my question is: How Can I write (layout) the file (myfile.txt) ?
>
>
>
> ---------------------------------------------------------------------
>
> M=C3=A1rio Andr=C3=A9
>
> Instituto Federal de Educa=C3=A7=C3=A3o, Ci=C3=AAncia e Tecnologia de Ser=
gipe - IFS
>
> Mestrando em MCC - Universidade Federal de Alagoas - UFAL
>
> http://www.marioandre.com.br/
>
> Skype: mario-fa
>
> -------------------------------------------------------------------------=
---
> ----------
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 23 19:23:24 2009
Return-Path: <java-user-return-44239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72637 invoked from network); 23 Dec 2009 19:23:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Dec 2009 19:23:24 -0000
Received: (qmail 30936 invoked by uid 500); 23 Dec 2009 19:23:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30861 invoked by uid 500); 23 Dec 2009 19:23:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30851 invoked by uid 99); 23 Dec 2009 19:23:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Dec 2009 19:23:21 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Dec 2009 19:23:12 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NNWnL-0008Ns-2X
	for java-user@lucene.apache.org; Wed, 23 Dec 2009 11:22:51 -0800
Message-ID: <26906269.post@talk.nabble.com>
Date: Wed, 23 Dec 2009 11:22:51 -0800 (PST)
From: syedfa <fayyazuddin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Need help with XML Query Parser example in Lucene 3.0
In-Reply-To: <75327.45819.qm@web24706.mail.ird.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fayyazuddin@gmail.com
References: <26896711.post@talk.nabble.com> <26897607.post@talk.nabble.com> <75327.45819.qm@web24706.mail.ird.yahoo.com>


Thanks very much for your kind reply, and for pointing out my mistake.  I
made the correction, (I can't believe I left that line out!)  This was a
total oversight on my part.  Having said that, after making the change, I
re-ran the application, but now I'm getting no results to appear.  I've
tried entering "java" for the job description field, and I've tried entering
"lucene" also, while arbitrarily choosing "permanent", and selecting the
various locations (north, south, east, west).  Any reason why that would be? 
I walked through the code, and found that in the following block:

TopDocs topDocs = searcher.search(query, 10);			
			if (topDocs != null) {
				ScoreDoc[] sd = topDocs.scoreDocs;
				Document[] results = new Document[sd.length];
				
				for(int i = 0; i < results.length; i++){
					
					results[i] = searcher.doc(sd[i].doc);
					request.setAttribute("results", results);
				}
			}


In the above code block, when I create my TopDocs object, using the debugger
in eclipse, I see that the value of totalHits is 0, and scoreDocs has a
value of ScoreDoc[0].  Because of this, my Document[] results array is
created with a zero index, and therefore nothing gets returned to the user. 
I can't see why this is, since I'm using "java", "lucene", "HTML" as
keywords in the search field.

Can you see where I'm going wrong?

Thanks again for your help.  I truly appreciate it.

Fayyaz


markharw00d wrote:
> 
> Hi Fayyaz,
> 
>>>I have found an error in the web.xml file,
> 
> Good job!  I found an error in your code so that makes us even :)
> 
> It looks like you removed the line in the "openExampleIndex" method which
> opens the searcher. 
> That explains your null pointer.
> 
> The problem you found in the web.xml isn't actually an error but is
> potentially misleading. In the "UserQuery" tag in the XSL there is a
> "fieldName" tag which is set to "description". The "jobDescription"
> default fieldname passed to the XML parser would only be in effect for any
> <UserQuery> tags that didn't specify a fieldName..
> 
> BTW, in the source distribution there are full "DTDdocs" for the XML
> syntax in contrib\xml-query-parser\docs
> 
> Cheers
> Mark
> 
> 
> ----- Original Message ----
> From: syedfa <fayyazuddin@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Wed, 23 December, 2009 5:03:00
> Subject: Re: Need help with XML Query Parser example in Lucene 3.0
> 
> 
> I have found an error in the web.xml file, however, this DID NOT fix the
> problem.  Inside the web.xml file, there is the following snippet:
> 
> <init-param>
>             <description>
>             Default field used in standard Lucene QueryParser used in
> UserQuery
> tag</description>
>             <param-name>defaultStandardQueryParserField</param-name>
>             <param-value>jobDescription</param-value>
> </init-param>
> 
> the <param-value> here should be IMHO "description", as neither the
> query.xsl file, nor index.jsp file contain any tags/values called
> "jobDescription", only "description".  I hope the contributors to the
> Lucene
> project take note of this, or please show me the error of my ways.  Having
> said that, as I mentioned earlier, despite making this correction, I am
> still getting the above "NullPointerException".  Can anyone see where I am
> going wrong?
> 
> Thanks again to all who reply.
> Sincerely;
> Fayyaz
> 
> syedfa wrote:
>> 
>> Dear fellow Java developers:
>> 
>> I am trying to run the XML Query Parser example that comes with Lucene
>> 3.0
>> source distribution.  I have the application structured identical to the
>> one you download, and I am trying to run it in eclipse.  When I launch
>> the
>> application, fill out the form that appears on index.jsp, and then submit
>> it to search the index, I get the following error 505:
>> 
>> javax.servlet.ServletException: Error processing query
>> 
>> org.apache.lucene.xmlparser.webdemo.FormBasedXmlQueryDemo.doPost(FormBasedXmlQueryDemo.java:124)
>>     javax.servlet.http.HttpServlet.service(HttpServlet.java:710)
>>     javax.servlet.http.HttpServlet..service(HttpServlet.java:803)
>> 
>> 
>> root cause 
>> 
>> java.lang..NullPointerException
>> 
>> org.apache.lucene.xmlparser.webdemo.FormBasedXmlQueryDemo.doPost(FormBasedXmlQueryDemo.java:107)
>>     javax.servlet.http.HttpServlet.service(HttpServlet.java:710)
>>     javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
>> 
>> 
>> I absolutely have no idea why this is happening, as I even structured the
>> package of the servlet in eclipse identical to the way it is in the
>> example.  I have attached my entire servlet, "FormBasedXmlQueryDemo"
>> below:
>> 
>> public class FormBasedXmlQueryDemo extends HttpServlet {
>>     private static final long serialVersionUID = 1L;
>>    
>>     private QueryTemplateManager queryTemplateManager;
>>     private CorePlusExtensionsParser xmlParser;
>>     private IndexSearcher searcher;
>>     private Analyzer analyzer = new
>> StandardAnalyzer(org.apache.lucene.util.Version.LUCENE_CURRENT);
>>     
>>     public FormBasedXmlQueryDemo() {
>>         super();
>>         // TODO Auto-generated constructor stub
>>     }
>> 
>>     @Override
>>     public void init(ServletConfig config) throws ServletException {
>>         // TODO Auto-generated method stub
>>         super.init(config);
>>         
>>         try{
>>             
>>             openExampleIndex();
>>             
>>             String xslFile=config.getInitParameter("xslFile");
>>             String defaultStandardQueryParserField =
>> config.getInitParameter("defaultStandardQueryParserField");
>>             queryTemplateManager = new
>> QueryTemplateManager(getServletContext().getResourceAsStream("/WEB-INF/"
>> +
>> xslFile));
>>             xmlParser = new
>> CorePlusExtensionsParser(defaultStandardQueryParserField, analyzer);
>>             
>>         }catch(Exception e){
>>             throw new ServletException("Error loading query template",
>> e);
>>         }
>>     }
>> 
>>     protected void doGet(HttpServletRequest request, HttpServletResponse
>> response) throws ServletException, IOException {
>> 
>>     }
>> 
>>     @Override
>>     protected void doPost(HttpServletRequest request, HttpServletResponse
>> response) throws ServletException, IOException {
>>         // TODO Auto-generated method stub
>>         
>>         Properties completedFormFields = new Properties();
>>         Enumeration pNames = request.getParameterNames();
>>         
>>         while (pNames.hasMoreElements()){
>>             
>>             String propName = (String) pNames.nextElement();
>>             String value = request.getParameter(propName);
>>             
>>             if ((value != null) && (value.trim().length()>0)){
>>                 completedFormFields.setProperty(propName, value);
>>             }
>>         }
>>         
>>         try{
>>             org.w3c.dom..Document xmlQuery =
>> queryTemplateManager.getQueryAsDOM(completedFormFields);            
>>             Query query =
>> xmlParser.getQuery(xmlQuery.getDocumentElement());
>>             TopDocs topDocs = searcher.search(query, 10);
>>             
>>             if (topDocs != null) {
>>                 ScoreDoc[] sd = topDocs.scoreDocs;
>>                 Document[] results = new Document[sd.length];
>>                 
>>                 for(int i = 0; i < results.length; i++){
>>                     
>>                     results[i] = searcher.doc(sd[i].doc);
>>                     request.setAttribute("results", results);
>>                 }
>>             }
>>             
>>             RequestDispatcher dispatcher =
>> getServletContext().getRequestDispatcher("/index..jsp");
>>             dispatcher.forward(request, response);
>>         }
>>         catch(Exception e){
>>             throw new ServletException("Error processing query", e);
>>         }
>>     }
>>     
>>     private void openExampleIndex() throws CorruptIndexException,
>> IOException
>> {
>>         
>>         
>>         RAMDirectory rd = new RAMDirectory();
>>         IndexWriter writer = new IndexWriter(rd, analyzer,
>> IndexWriter.MaxFieldLength.LIMITED);
>>         InputStream dataIn =
>> getServletContext().getResourceAsStream("/WEB-INF/data.tsv");
>>         BufferedReader br = new BufferedReader(new
>> InputStreamReader(dataIn));
>>         String line = br.readLine();
>>         
>>         while (line != null){
>>             
>>             line = line.trim();
>>             if (line.length() > 0){
>>                 
>>                 StringTokenizer st = new StringTokenizer(line, "\t");
>>                 Document doc = new Document();
>>                 doc.add(new
>> Field("location",st.nextToken(),Field.Store.YES,
>>                         Field.Index.ANALYZED_NO_NORMS));
>>                 doc.add(new
>> Field("salary",st.nextToken(),Field.Store.YES,
>>                         Field.Index.ANALYZED_NO_NORMS));
>>                 doc.add(new Field("type",st.nextToken(),Field.Store.YES,
>>                         Field.Index.ANALYZED_NO_NORMS));
>>                 doc.add(new
>> Field("description",st.nextToken(),Field.Store.YES,
>>                         Field.Index.ANALYZED));
>>                 writer.addDocument(doc);
>>             }
>>             
>>             line = br.readLine();
>>         }
>>         
>>         writer.close();
>>     }
>> 
>> }
>> 
>> 
>> 
>> When I was tracing through the code, it appears that it was throwing the
>> exception just as it tried to process the line:
>> 
>> TopDocs topDocs = searcher.search(query, 10);
>> 
>> Does anyone know where I am going wrong?  
>> 
>> Thanks in advance to all who reply.
>> 
> 
> -- 
> View this message in context:
> http://old.nabble.com/Need-help-with-XML-Query-Parser-example-in-Lucene-3.0-tp26896711p26897607.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://old.nabble.com/Need-help-with-XML-Query-Parser-example-in-Lucene-3.0-tp26896711p26906269.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 23 19:34:14 2009
Return-Path: <java-user-return-44240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76971 invoked from network); 23 Dec 2009 19:34:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Dec 2009 19:34:14 -0000
Received: (qmail 44571 invoked by uid 500); 23 Dec 2009 19:34:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44471 invoked by uid 500); 23 Dec 2009 19:34:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44461 invoked by uid 99); 23 Dec 2009 19:34:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Dec 2009 19:34:11 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Dec 2009 19:34:02 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NNWxp-0000nS-EB
	for java-user@lucene.apache.org; Wed, 23 Dec 2009 11:33:41 -0800
Message-ID: <26906400.post@talk.nabble.com>
Date: Wed, 23 Dec 2009 11:33:41 -0800 (PST)
From: syedfa <fayyazuddin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Need help with XML Query Parser example in Lucene 3.0
In-Reply-To: <26906269.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fayyazuddin@gmail.com
References: <26896711.post@talk.nabble.com> <26897607.post@talk.nabble.com> <75327.45819.qm@web24706.mail.ird.yahoo.com> <26906269.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Ignore the previous message, I realized that I just needed to choose the
right combination to get a result!

Thanks again for your time and patience.
Take care.
Sincerely;
Fayyaz



syedfa wrote:
> 
> Thanks very much for your kind reply, and for pointing out my mistake.  I
> made the correction, (I can't believe I left that line out!)  This was a
> total oversight on my part.  Having said that, after making the change, I
> re-ran the application, but now I'm getting no results to appear.  I've
> tried entering "java" for the job description field, and I've tried
> entering "lucene" also, while arbitrarily choosing "permanent", and
> selecting the various locations (north, south, east, west).  Any reason
> why that would be?  I walked through the code, and found that in the
> following block:
> 
> TopDocs topDocs = searcher.search(query, 10);			
> 			if (topDocs != null) {
> 				ScoreDoc[] sd = topDocs.scoreDocs;
> 				Document[] results = new Document[sd.length];
> 				
> 				for(int i = 0; i < results.length; i++){
> 					
> 					results[i] = searcher.doc(sd[i].doc);
> 					request.setAttribute("results", results);
> 				}
> 			}
> 
> 
> In the above code block, when I create my TopDocs object, using the
> debugger in eclipse, I see that the value of totalHits is 0, and scoreDocs
> has a value of ScoreDoc[0].  Because of this, my Document[] results array
> is created with a zero index, and therefore nothing gets returned to the
> user.  I can't see why this is, since I'm using "java", "lucene", "HTML"
> as keywords in the search field.
> 
> Can you see where I'm going wrong?
> 
> Thanks again for your help.  I truly appreciate it.
> 
> Fayyaz
> 
> 
> markharw00d wrote:
>> 
>> Hi Fayyaz,
>> 
>>>>I have found an error in the web.xml file,
>> 
>> Good job!  I found an error in your code so that makes us even :)
>> 
>> It looks like you removed the line in the "openExampleIndex" method which
>> opens the searcher. 
>> That explains your null pointer.
>> 
>> The problem you found in the web.xml isn't actually an error but is
>> potentially misleading. In the "UserQuery" tag in the XSL there is a
>> "fieldName" tag which is set to "description". The "jobDescription"
>> default fieldname passed to the XML parser would only be in effect for
>> any <UserQuery> tags that didn't specify a fieldName..
>> 
>> BTW, in the source distribution there are full "DTDdocs" for the XML
>> syntax in contrib\xml-query-parser\docs
>> 
>> Cheers
>> Mark
>> 
>> 
>> ----- Original Message ----
>> From: syedfa <fayyazuddin@gmail.com>
>> To: java-user@lucene.apache.org
>> Sent: Wed, 23 December, 2009 5:03:00
>> Subject: Re: Need help with XML Query Parser example in Lucene 3.0
>> 
>> 
>> I have found an error in the web.xml file, however, this DID NOT fix the
>> problem.  Inside the web.xml file, there is the following snippet:
>> 
>> <init-param>
>>             <description>
>>             Default field used in standard Lucene QueryParser used in
>> UserQuery
>> tag</description>
>>             <param-name>defaultStandardQueryParserField</param-name>
>>             <param-value>jobDescription</param-value>
>> </init-param>
>> 
>> the <param-value> here should be IMHO "description", as neither the
>> query.xsl file, nor index.jsp file contain any tags/values called
>> "jobDescription", only "description".  I hope the contributors to the
>> Lucene
>> project take note of this, or please show me the error of my ways. 
>> Having
>> said that, as I mentioned earlier, despite making this correction, I am
>> still getting the above "NullPointerException".  Can anyone see where I
>> am
>> going wrong?
>> 
>> Thanks again to all who reply.
>> Sincerely;
>> Fayyaz
>> 
>> syedfa wrote:
>>> 
>>> Dear fellow Java developers:
>>> 
>>> I am trying to run the XML Query Parser example that comes with Lucene
>>> 3.0
>>> source distribution.  I have the application structured identical to the
>>> one you download, and I am trying to run it in eclipse.  When I launch
>>> the
>>> application, fill out the form that appears on index.jsp, and then
>>> submit
>>> it to search the index, I get the following error 505:
>>> 
>>> javax.servlet.ServletException: Error processing query
>>> 
>>> org.apache.lucene.xmlparser.webdemo.FormBasedXmlQueryDemo.doPost(FormBasedXmlQueryDemo.java:124)
>>>     javax.servlet.http.HttpServlet.service(HttpServlet.java:710)
>>>     javax.servlet.http.HttpServlet..service(HttpServlet.java:803)
>>> 
>>> 
>>> root cause 
>>> 
>>> java.lang..NullPointerException
>>> 
>>> org.apache.lucene.xmlparser.webdemo.FormBasedXmlQueryDemo.doPost(FormBasedXmlQueryDemo.java:107)
>>>     javax.servlet.http.HttpServlet.service(HttpServlet.java:710)
>>>     javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
>>> 
>>> 
>>> I absolutely have no idea why this is happening, as I even structured
>>> the
>>> package of the servlet in eclipse identical to the way it is in the
>>> example.  I have attached my entire servlet, "FormBasedXmlQueryDemo"
>>> below:
>>> 
>>> public class FormBasedXmlQueryDemo extends HttpServlet {
>>>     private static final long serialVersionUID = 1L;
>>>    
>>>     private QueryTemplateManager queryTemplateManager;
>>>     private CorePlusExtensionsParser xmlParser;
>>>     private IndexSearcher searcher;
>>>     private Analyzer analyzer = new
>>> StandardAnalyzer(org.apache.lucene.util.Version.LUCENE_CURRENT);
>>>     
>>>     public FormBasedXmlQueryDemo() {
>>>         super();
>>>         // TODO Auto-generated constructor stub
>>>     }
>>> 
>>>     @Override
>>>     public void init(ServletConfig config) throws ServletException {
>>>         // TODO Auto-generated method stub
>>>         super.init(config);
>>>         
>>>         try{
>>>             
>>>             openExampleIndex();
>>>             
>>>             String xslFile=config.getInitParameter("xslFile");
>>>             String defaultStandardQueryParserField =
>>> config.getInitParameter("defaultStandardQueryParserField");
>>>             queryTemplateManager = new
>>> QueryTemplateManager(getServletContext().getResourceAsStream("/WEB-INF/"
>>> +
>>> xslFile));
>>>             xmlParser = new
>>> CorePlusExtensionsParser(defaultStandardQueryParserField, analyzer);
>>>             
>>>         }catch(Exception e){
>>>             throw new ServletException("Error loading query template",
>>> e);
>>>         }
>>>     }
>>> 
>>>     protected void doGet(HttpServletRequest request, HttpServletResponse
>>> response) throws ServletException, IOException {
>>> 
>>>     }
>>> 
>>>     @Override
>>>     protected void doPost(HttpServletRequest request,
>>> HttpServletResponse
>>> response) throws ServletException, IOException {
>>>         // TODO Auto-generated method stub
>>>         
>>>         Properties completedFormFields = new Properties();
>>>         Enumeration pNames = request.getParameterNames();
>>>         
>>>         while (pNames.hasMoreElements()){
>>>             
>>>             String propName = (String) pNames.nextElement();
>>>             String value = request.getParameter(propName);
>>>             
>>>             if ((value != null) && (value.trim().length()>0)){
>>>                 completedFormFields.setProperty(propName, value);
>>>             }
>>>         }
>>>         
>>>         try{
>>>             org.w3c.dom..Document xmlQuery =
>>> queryTemplateManager.getQueryAsDOM(completedFormFields);            
>>>             Query query =
>>> xmlParser.getQuery(xmlQuery.getDocumentElement());
>>>             TopDocs topDocs = searcher.search(query, 10);
>>>             
>>>             if (topDocs != null) {
>>>                 ScoreDoc[] sd = topDocs.scoreDocs;
>>>                 Document[] results = new Document[sd.length];
>>>                 
>>>                 for(int i = 0; i < results.length; i++){
>>>                     
>>>                     results[i] = searcher.doc(sd[i].doc);
>>>                     request.setAttribute("results", results);
>>>                 }
>>>             }
>>>             
>>>             RequestDispatcher dispatcher =
>>> getServletContext().getRequestDispatcher("/index..jsp");
>>>             dispatcher.forward(request, response);
>>>         }
>>>         catch(Exception e){
>>>             throw new ServletException("Error processing query", e);
>>>         }
>>>     }
>>>     
>>>     private void openExampleIndex() throws CorruptIndexException,
>>> IOException
>>> {
>>>         
>>>         
>>>         RAMDirectory rd = new RAMDirectory();
>>>         IndexWriter writer = new IndexWriter(rd, analyzer,
>>> IndexWriter.MaxFieldLength.LIMITED);
>>>         InputStream dataIn =
>>> getServletContext().getResourceAsStream("/WEB-INF/data.tsv");
>>>         BufferedReader br = new BufferedReader(new
>>> InputStreamReader(dataIn));
>>>         String line = br.readLine();
>>>         
>>>         while (line != null){
>>>             
>>>             line = line.trim();
>>>             if (line.length() > 0){
>>>                 
>>>                 StringTokenizer st = new StringTokenizer(line, "\t");
>>>                 Document doc = new Document();
>>>                 doc.add(new
>>> Field("location",st.nextToken(),Field.Store.YES,
>>>                         Field.Index.ANALYZED_NO_NORMS));
>>>                 doc.add(new
>>> Field("salary",st.nextToken(),Field.Store.YES,
>>>                         Field.Index.ANALYZED_NO_NORMS));
>>>                 doc.add(new Field("type",st.nextToken(),Field.Store.YES,
>>>                         Field.Index.ANALYZED_NO_NORMS));
>>>                 doc.add(new
>>> Field("description",st.nextToken(),Field.Store.YES,
>>>                         Field.Index.ANALYZED));
>>>                 writer.addDocument(doc);
>>>             }
>>>             
>>>             line = br.readLine();
>>>         }
>>>         
>>>         writer.close();
>>>     }
>>> 
>>> }
>>> 
>>> 
>>> 
>>> When I was tracing through the code, it appears that it was throwing the
>>> exception just as it tried to process the line:
>>> 
>>> TopDocs topDocs = searcher.search(query, 10);
>>> 
>>> Does anyone know where I am going wrong?  
>>> 
>>> Thanks in advance to all who reply.
>>> 
>> 
>> -- 
>> View this message in context:
>> http://old.nabble.com/Need-help-with-XML-Query-Parser-example-in-Lucene-3.0-tp26896711p26897607.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>> 
>> 
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>> 
>> 
> 
> 

-- 
View this message in context: http://old.nabble.com/Need-help-with-XML-Query-Parser-example-in-Lucene-3.0-tp26896711p26906400.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 23 19:51:14 2009
Return-Path: <java-user-return-44241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84200 invoked from network); 23 Dec 2009 19:51:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Dec 2009 19:51:14 -0000
Received: (qmail 64500 invoked by uid 500); 23 Dec 2009 19:51:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64414 invoked by uid 500); 23 Dec 2009 19:51:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64403 invoked by uid 99); 23 Dec 2009 19:51:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Dec 2009 19:51:11 +0000
X-ASF-Spam-Status: No, hits=-0.4 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mario-fa@infonet.com.br designates 200.241.52.11 as permitted sender)
Received: from [200.241.52.11] (HELO estancia.infonet.com.br) (200.241.52.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Dec 2009 19:51:01 +0000
Received: (qmail 20917 invoked from network); 23 Dec 2009 19:39:24 -0000
Received: by simscan 1.4.0 ppid: 20667, pid: 20855, t: 1.3794s
         scanners: clamav: 0.95.2/m:51/d:9721 spam: 3.2.5
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on
	estancia.infonet.com.br
X-Spam-Level: 
Received: from ip-189-97-62-87.user.vivozap.com.br (HELO titanium) (Usuario-Autenticado:mario-fa@[189.97.62.87])
          (envelope-sender <mario-fa@infonet.com.br>)
          by 200.241.52.11 (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 23 Dec 2009 19:39:23 -0000
From: =?UTF-8?B?TcOhcmlvIEFuZHLDqQ==?= <mario-fa@infonet.com.br>
To: <java-user@lucene.apache.org>,
	<simon.willnauer@gmail.com>
References: <005301ca83f1$fac0d960$f0428c20$@com.br> <f18c9dde0912230938v6eee548cy61498aa56a5417c6@mail.gmail.com>
In-Reply-To: <f18c9dde0912230938v6eee548cy61498aa56a5417c6@mail.gmail.com>
Subject: RES: spellchecker
Date: Wed, 23 Dec 2009 17:50:28 -0200
Message-ID: <008d01ca8409$300841a0$9018c4e0$@com.br>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcqD9UYcjKR4YQH5Qlm3RO5E5VmUEwAE+KTg
Content-Language: pt-br
X-Old-Spam-Status: No, score=-2.5 required=8.0 tests=BAYES_00,RDNS_DYNAMIC
	autolearn=no version=3.2.5

Thanks!

---------------------------------------------------------------------
M=C3=A1rio Andr=C3=A9
Instituto Federal de Educa=C3=A7=C3=A3o, Ci=C3=AAncia e Tecnologia de =
Sergipe - IFS
Mestrando em MCC - Universidade Federal de Alagoas - UFAL
http://www.marioandre.com.br/
Skype: mario-fa
-------------------------------------------------------------------------=
-------------


-----Mensagem original-----
De: Simon Willnauer [mailto:simon.willnauer@googlemail.com]=20
Enviada em: quarta-feira, 23 de dezembro de 2009 15:39
Para: java-user@lucene.apache.org
Assunto: Re: spellchecker

Hi mario,

PlainTextDictionary expects a text file with one word per line like:

hello
world
foo
bar

simon

2009/12/23 M=C3=A1rio Andr=C3=A9 <mario-fa@infonet.com.br>:
> Hello friends,
>
> I=E2=80=99m new here and in the lucene Project. I=E2=80=99m trying use =
the "spellchecker"
> according to the exemple below:
>
>
>
> // To index a file containing words:
>
>  spellchecker.indexDictionary(new PlainTextDictionary(new
> File("myfile.txt")));
>
>  String[] suggestions =3D spellchecker.suggestSimilar("misspelt", 5);
>
>
>
> But my question is: How Can I write (layout) the file (myfile.txt) ?
>
>
>
> ---------------------------------------------------------------------
>
> M=C3=A1rio Andr=C3=A9
>
> Instituto Federal de Educa=C3=A7=C3=A3o, Ci=C3=AAncia e Tecnologia de =
Sergipe - IFS
>
> Mestrando em MCC - Universidade Federal de Alagoas - UFAL
>
> http://www.marioandre.com.br/
>
> Skype: mario-fa
>
> =
-------------------------------------------------------------------------=
---
> ----------
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 23 19:53:45 2009
Return-Path: <java-user-return-44242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84999 invoked from network); 23 Dec 2009 19:53:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 23 Dec 2009 19:53:45 -0000
Received: (qmail 68553 invoked by uid 500); 23 Dec 2009 19:53:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68459 invoked by uid 500); 23 Dec 2009 19:53:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68449 invoked by uid 99); 23 Dec 2009 19:53:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Dec 2009 19:53:43 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.219.225 as permitted sender)
Received: from [209.85.219.225] (HELO mail-ew0-f225.google.com) (209.85.219.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Dec 2009 19:53:33 +0000
Received: by ewy25 with SMTP id 25so9257754ewy.5
        for <java-user@lucene.apache.org>; Wed, 23 Dec 2009 11:53:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=it6x2SGOo1LIcS2V7S+NSHZ5TdHBVKM4hlXxl5AMgjA=;
        b=NDu8NgIOYEeze+fZYtlZdGwQNHwjwmTVzfUO2WZSyXr3VczNdM1Z2Yo233vTA15Qcu
         LtF2ndqa7mHr8vjcdINAzsl0EG2HZNDXSw59Wz4PyNh1vx8yPkRnKwdOq7bTGNrR8k6A
         lQSgUGZwby5uuoRq6tuc8hu+j/d/pNXtyvd6g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=JFHngrxYzWEz+m2qp0ljmirqfcJ6jzjq7b6Lfc5OK2tRCaj9XPjihC5Z5dlVGqgCFu
         2lC9TVxyNf0us2MogrCgUhlsZt7AeOiVkx6S1Y3fF2Um7Q6DOBR7gGtPA250UMO7t9ik
         CSwwch16Bd1zYdC6qMN4YpNGxbDKhZkWlycUU=
MIME-Version: 1.0
Received: by 10.216.90.78 with SMTP id d56mr3552011wef.126.1261597993141; Wed, 
	23 Dec 2009 11:53:13 -0800 (PST)
In-Reply-To: <21a6d2d30912230841v7166df26h9d2922dbabcaabeb@mail.gmail.com>
References: <21a6d2d30912230535u58d1b3cag573ce9aa3033e096@mail.gmail.com>
	 <359a92830912230745i499f0835s82151d3c6d3235a6@mail.gmail.com>
	 <21a6d2d30912230841v7166df26h9d2922dbabcaabeb@mail.gmail.com>
Date: Wed, 23 Dec 2009 14:53:13 -0500
Message-ID: <359a92830912231153s1049f75bueb661ddfc20fce22@mail.gmail.com>
Subject: Re: solution for parent-child relationship
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d7856d3b065d047b6aac25
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d7856d3b065d047b6aac25
Content-Type: text/plain; charset=ISO-8859-1

First, if you don't need to distinguish between posts and comments,
you don't care about the increment gap. But if you do...

It's kind of arcane, but here's the general idea. You override your Analyzer
of choice and implement getPositionIncrementGap. Say your
getPositionIncrementGap
returns 100. When you do something like this:

doc.add(new Field("text", "post text here", Field.Store.NO,
Field.Index.ANALYZED);
doc.add(new Field("text", "commentone one", Field.Store.NO,
Field.Index.ANALYZED);
doc.add(new Field("text", "commenttwo two", Field.Store.NO,
Field.Index.ANALYZED);

then the offsets of your tokens in the field "text" are as follows (note,
may be off by one or so).
1 - post
2 - text
3 - here
104 - commentone
105 - one
206 - commenttwo
207 - two


If your getPositionIncrementGap returned 1, the positions would be 1, 2, 3,
4, 5, 6, 7....

Now, you can use the offsets of the tokens to determine what comment you go
the hit
in. By putting an increment of, say,  100 you have the advantage of NOT
hitting on any
phrase query across post/comment/comment boundaries (i.e. "here commentone"
would NOT hit) and when executing any of the "near" queries anything < 100
won't
match either. But all of your posts and comments are in the same document,
so you
can search/display them in one query.

You can get creative with this. Say you implemented your
getPositionIncrementGap
to always return an even, say, 10,000 boundary (assuming no comment was more
than, 10,000 words). Then the offset tells you exactly which comment you're
in,
or whether it's the original post, it's just a modulo operation.

Another possibility is to *store* (but not index) meta data with each
document that
contains information about your doc, like the offset of each comment. This
could
even be a POJO with the necessary serialization. You'd still want to put an
increment
gap in there to keep from inappropriately matching across boundaries.....

Another thing that's hard to feel good about is that documents do NOT have
to have the same fields. It's really tempting to think of "documents" as
being
"just like tables", but they're not. There's no penalty that I know of for
having
different documents have different fields. Theoretically, you could have a
Lucene
index in which no document had any field in common with any other document.
So putting meta-data in your index is do-able, although do NOT use Lucene
document IDs in your meta-data, they can change on you.....

But do remember that a hybrid solution may be best if you absolutely require
database-like capabilities and can't think of a way to use a Lucene index
efficiently. My personal tendency is to use a hybrid solution last, when
neither
a Lucene index nor a database is adequate just on a "less complex is better"
perspective...

HTH
Erick

On Wed, Dec 23, 2009 at 11:41 AM, Deve <developer.inbox@gmail.com> wrote:

> @Erick, you are right i will have to stop thinking in terms of databases,
> thats why i wanted to discuss this.
>
> i don't get how can i use getPositionIncrementGap, could you provide little
> more details.
>
> thanks,
>
> On Wed, Dec 23, 2009 at 8:45 PM, Erick Erickson <erickerickson@gmail.com
> >wrote:
>
> > Ya just gotta stop thinking like a database guy, man <G>. Lucene searches
> > lots and lots of text very well. It doesn't do joins worth a darn. The
> > moment
> > you star thinking in terms of sub-queries, you're probably starting down
> > the
> > wrong track.
> >
> > Here's a possibility. Index each post and all associated comments as a
> > single
> > document, with the post and all comments put in the same field. Something
> > like
> > doc.add("text", <original post text>);
> > doc.add("text", <first comment>);
> > doc.add("text", <second comment>);
> > add the document to the index.....
> >
> > Now, all you need to do is search the "text" field and you get
> everything.
> > If
> > you set the position increment gap to something other than 1 (see the
> > docs),
> > you can distinguish between the individual calls to doc.add(), see
> > getPositionIncrementGap.
> >
> > In general, when indexing anything database-related, the advice is to
> > flatten
> > then data as you put it into a Lucene index. Think about making all the
> > data
> > available as the result of a single query. This leads to data
> replication,
> > which
> > goes against all your database instincts, but....
> >
> > HTH
> > Erick
> >
> >
> > On Wed, Dec 23, 2009 at 8:35 AM, Shahid Faiz <developer.inbox@gmail.com
> > >wrote:
> >
> > > Hi,
> > >
> > > Following are details of my problem and possible solutions which I can
> > > think
> > > of. Please suggest which should I choose, or is there any other
> approach
> > > better than these.
> > >
> > > I want to index blog posts and their comments, in my database posts and
> > > comments are stored in two different tables. Currently I am indexing
> > posts
> > > only and search works perfectly fine, but now I want to index comments
> as
> > > well. From now on when user will search any word, all posts will be
> > > displayed which meet search criteria including posts and only those
> > > comments
> > > which meet the specified criteria along with posts. All paging is done
> on
> > > posts, comments are not considered while calculating page contents.
> > >
> > > e.g.
> > >
> > > POST =>          Google launched Chrome Browser
> > > COMMENT =>  Microsoft IE also has tab browsing.
> > >
> > > Now searching (microsoft AND IE), should also display this post with
> > along
> > > with above comment.
> > >
> > > One solution is: I should index both posts+comments in one lucene index
> > and
> > > search that index. But as i have to display 10 posts (not including
> > > comments) per page so it gets complicated while finding records to be
> > > displayed on any given page. I think, I can solve this problem by
> > creating
> > > two queries one to search posts and one to search comments only and
> then
> > > can
> > > join them using OR operator.
> > >
> > > Second solution could be: I can store comments in different index, and
> on
> > > search first I will execute query on comments index and use result of
> > > comments search to search blog posts.
> > >
> > > Thanks in advance.
> > >
> > > - deve
> > >
> >
>

--0016e6d7856d3b065d047b6aac25--

From java-user-return-44243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 24 03:42:29 2009
Return-Path: <java-user-return-44243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56682 invoked from network); 24 Dec 2009 03:42:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Dec 2009 03:42:29 -0000
Received: (qmail 37070 invoked by uid 500); 24 Dec 2009 03:42:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36976 invoked by uid 500); 24 Dec 2009 03:42:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36966 invoked by uid 99); 24 Dec 2009 03:42:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Dec 2009 03:42:26 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.210.192 as permitted sender)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Dec 2009 03:42:17 +0000
Received: by yxe30 with SMTP id 30so8904082yxe.29
        for <java-user@lucene.apache.org>; Wed, 23 Dec 2009 19:41:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=ZtIEqJ9M+SEE/dyOB5+9SBlsQMdj5L5JYupcEwMrOY4=;
        b=hYj5y8WgI25ZJHWxOeVHdNd27LRnpS9/5coay6avyp582CeD74gmALgn9Ogm2XkDNO
         GEzWKpdsvoIi8aFsCufB68TXBtuQ5z6ditDAPQTmT9kISX4tDufU/KZFbkknuVd039XU
         9M3TGLbWjxoGUkRv1Xto3LRmuaHs5qXbnF2mg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=pRUHosUoq7Jo36XI1RcMhUqmDRVpQvcm5NENJQQaovevoddmcSoNs0xocMlkkObQvk
         DzADk7clY9QMu/IqF4u1T3ocm/KXs8oS7YqDteFoq6tolFhDF6PJ93lc72Nd7Of95JAw
         9kCmJ12aBrxXfrgQraQzUrAAQhaT47XMz70b0=
MIME-Version: 1.0
Received: by 10.91.178.19 with SMTP id f19mr2360162agp.33.1261626116073; Wed, 
	23 Dec 2009 19:41:56 -0800 (PST)
Date: Thu, 24 Dec 2009 11:41:56 +0800
Message-ID: <7d94dcde0912231941x34c88c86l43ce802853be3c00@mail.gmail.com>
Subject: How to get a apache public license
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64714107cea23047b713864
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64714107cea23047b713864
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Merry Christamas, guys,

I haven't taken part in any open source activties and currently I want to
make my project open source under apache public license? What should i do?
Apply for a license? and where to apply?

--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--0016e64714107cea23047b713864--

From java-user-return-44244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 24 04:32:22 2009
Return-Path: <java-user-return-44244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61843 invoked from network); 24 Dec 2009 04:32:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Dec 2009 04:32:22 -0000
Received: (qmail 45526 invoked by uid 500); 24 Dec 2009 04:32:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45373 invoked by uid 500); 24 Dec 2009 04:32:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45363 invoked by uid 99); 24 Dec 2009 04:32:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Dec 2009 04:32:19 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.6.114.40] (HELO web1108.biz.mail.sk1.yahoo.com) (74.6.114.40)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 24 Dec 2009 04:32:09 +0000
Received: (qmail 25834 invoked by uid 60001); 24 Dec 2009 04:31:46 -0000
Message-ID: <225281.24177.qm@web1108.biz.mail.sk1.yahoo.com>
X-YMail-OSG: U43Q3H0VM1nLBXsSnvtxymUPztUzcJ.pF14tvtJ_YnOAWgWIzZooXc3GTCwh7L8VqZuFcirNPKM_qLdAMy1oguzQl1zygY4xqfPCfjJDZrBLApSBXXPUwKb.f.kpnc4U6gMw9PLjPHg0YppAkSPVeGMNN7YccRH7HAb5sDKG8LWP.Gted._8SLL387UvBn0UpTlW29AMVMg2dz5SosTYtO1g6UeL1wuIm8Uvtjwc1PRjYoSGeSFCArZBQdiNnf7R8k7Cb_vOuyMR_m72D3mzl_2SmG1peBXNNtmqelj1XehurBnmSzezEXTIJb22dvQei1BWZ2ezri_3CsqB0NLysjKms3vLQ7qw4BSE8gsR9_A5UVTBw6Q3TcO0.QMEaQDhtM5OahQJmT0StxSQnDdx8p6TuePNuV4lEwmIdo0UKALUgTKbY3Li5McuJ6.tdEF0K_woi8VpR3sIiC9libDN7oTMu9lCigzRuY2r.RGQFaoEIrNL1JNiS_O4
Received: from [97.116.10.32] by web1108.biz.mail.sk1.yahoo.com via HTTP; Wed, 23 Dec 2009 20:31:46 PST
X-Mailer: YahooMailRC/240.3 YahooMailWebService/0.8.100.260964
References: <7d94dcde0912231941x34c88c86l43ce802853be3c00@mail.gmail.com>
Date: Wed, 23 Dec 2009 20:31:46 -0800 (PST)
From: N Hira <nhira@cognocys.com>
Subject: Re: How to get a apache public license
To: java-user@lucene.apache.org
In-Reply-To: <7d94dcde0912231941x34c88c86l43ce802853be3c00@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

To you as well, Weiwei Wang.=0A=0AYou can theoretically release your projec=
t under a license that is very similar to the Apache license at any time, p=
resuming you are licensing rights related to your project.  To create a pro=
ject that is maintained by the Apache Software Foundation, you should proba=
bly start with the Incubator project:  http://incubator.apache.org/=0A=0APu=
t briefly, this is what the Incubator does:=0A...=0A=0AWHEREAS, the Board o=
f Directors deems it to be in the best interests=0Aof the Foundation and co=
nsistent with the Foundation's purpose to=0Aestablish a Project Management =
Committee charged with accepting new=0Aproducts into the Foundation, provid=
ing guidance and support to help=0Aeach new product engender their own coll=
aborative community,=0Aeducating new developers in the philosophy and guide=
lines for=0Acollaborative development as defined by the members of the=0AFo=
undation, and proposing to the board the promotion of such products=0Ato in=
dependent PMC status once their community has reached maturity.=0A...=0ARES=
OLVED, that the Apache Incubator PMC be and hereby is=0Aresponsible for the=
 acceptance and oversight of new products=0Asubmitted or proposed to become=
 part of the Foundation; and be it=0Afurther=0ARESOLVED, that the Apache In=
cubator PMC is responsible for=0Aproviding guidance and ensuring that subpr=
ojects under its purview=0Adevelop products according to the Foundation's p=
hilosophy and=0Aguidelines for collaborative development; and be it further=
=0ARESOLVED,=0Athat the Apache Incubator PMC is responsible for regularly e=
valuating=0Aproducts under its purview and making the determination in each=
 case=0Aof whether the product should be abandoned, continue to receive=0Ag=
uidance and support, or proposed to the board for promotion to full=0Aproje=
ct status as part of an existing or new Foundation PMC; and be=0Ait further=
=0A...=0A=0ASource:  http://incubator.apache.org/official/resolution.html=
=0A=0ABest of luck!=0A=0A-h=0A=0A=0A=0A----- Original Message ----=0AFrom: =
Weiwei Wang <ww.wang.cs@gmail.com>=0ATo: java-user@lucene.apache.org=0ASent=
: Wed, December 23, 2009 9:41:56 PM=0ASubject: How to get a apache public l=
icense=0A=0AMerry Christamas, guys,=0A=0AI haven't taken part in any open s=
ource activties and currently I want to=0Amake my project open source under=
 apache public license? What should i do?=0AApply for a license? and where =
to apply?=0A=0A-- =0AWeiwei Wang=0AAlex Wang=0A=E7=8E=8B=E5=B7=8D=E5=B7=8D=
=0ARoom 403, Mengmin Wei Building=0AComputer Science Department=0AGulou Cam=
pus of Nanjing University=0ANanjing, P.R.China, 210093=0A=0AHomepage: http:=
//cs.nju.edu.cn/rl/weiweiwang=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 24 04:33:09 2009
Return-Path: <java-user-return-44245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61949 invoked from network); 24 Dec 2009 04:33:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Dec 2009 04:33:09 -0000
Received: (qmail 47236 invoked by uid 500); 24 Dec 2009 04:33:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47146 invoked by uid 500); 24 Dec 2009 04:33:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47136 invoked by uid 99); 24 Dec 2009 04:33:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Dec 2009 04:33:06 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tsuraan@gmail.com designates 209.85.221.203 as permitted sender)
Received: from [209.85.221.203] (HELO mail-qy0-f203.google.com) (209.85.221.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Dec 2009 04:32:59 +0000
Received: by qyk41 with SMTP id 41so3777813qyk.29
        for <java-user@lucene.apache.org>; Wed, 23 Dec 2009 20:32:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=U+71awSZJ4icIx079qUA/XNtAB/0e1t7/kZ+yJB8pNk=;
        b=rXU7SjO1UMgx8veQ1US6gyJ7stb78jbEX3zbtN7+hECeMJCtIM53P5HKpJL+mjIb6C
         4L6pHSeHUjbM7kHCyw5w6To6TxRZHYeLQy4HwR9bMAHA45eMRqSQr3E72LUJz3JTeUYh
         9LFSG/8jSGWdaszrlWbWJas1YBTrLhUStxp7s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Mo304xkAhd0DQYjqF745Dm2BQe3qkhSFUYWDUrJnzWNaNsD+MhReHNhiHq/RiPCVM7
         EzA1uRirPKC+qc6Efvll5SNiOPApfc9Atr4sErpo/C4qgmbZAgZErJ7Szn4zPi9KMHTp
         WJ8dLStVXwK+BksxaFtTQ3C/A6kxizKGfgVeE=
MIME-Version: 1.0
Received: by 10.229.9.83 with SMTP id k19mr4847607qck.47.1261629158641; Wed, 
	23 Dec 2009 20:32:38 -0800 (PST)
In-Reply-To: <9ac0c6aa0906100540q41d1aa4fq2910521623b2edc3@mail.gmail.com>
References: <20090610122347.GB5557@kopfschmerz.zuhause>
	 <9ac0c6aa0906100540q41d1aa4fq2910521623b2edc3@mail.gmail.com>
Date: Wed, 23 Dec 2009 22:32:38 -0600
Message-ID: <84fb38e30912232032v75ba4616p92ce5eeaff626092@mail.gmail.com>
Subject: Re: Lucene memory usage
From: tsuraan <tsuraan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

> This (very large number of unique terms) is a problem for Lucene currently.
>
> There are some simple improvements we could make to the terms dict
> format to not require so much RAM per term in the terms index...
> LUCENE-1458 (flexible indexing) has these improvements, but
> unfortunately tied in w/ lots of other changes.  Maybe we should break
> out a separate issue for this... this'd be a great contained
> improvement, if anyone out there has "the itch" :)

Resurrecting an old thread, but it's a concern that I have as well, so
I thought I'd add on to this.

It looks like issue 1458 was resolved on dec. 3, but I couldn't figure
out what the resolution was.  Does lucene 3.0 have a more
memory-friendly replacement to reading the entire .tii file into RAM?
If not, would just mmap'ing the .tii file and skipping around in the
mmap be a better solution than essentially reading the entire file and
keeping it in arrays on the heap?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 24 05:50:45 2009
Return-Path: <java-user-return-44246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84516 invoked from network); 24 Dec 2009 05:50:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Dec 2009 05:50:45 -0000
Received: (qmail 61473 invoked by uid 500); 24 Dec 2009 05:50:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61328 invoked by uid 500); 24 Dec 2009 05:50:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61318 invoked by uid 99); 24 Dec 2009 05:50:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Dec 2009 05:50:41 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jake.mannix@gmail.com designates 209.85.216.186 as permitted sender)
Received: from [209.85.216.186] (HELO mail-px0-f186.google.com) (209.85.216.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Dec 2009 05:50:32 +0000
Received: by pxi16 with SMTP id 16so1886253pxi.20
        for <java-user@lucene.apache.org>; Wed, 23 Dec 2009 21:50:12 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=Othx8Fo2LoyhUF8l9cs39Fj93Xs+hX0WPW+pglsbqFw=;
        b=GH4bT3piOI7KbpBVAaYdUEcHmPQpPEMV2ToMgErkGKW0uhx+7tF0SpRBJ7bUBDjcH3
         lBD+Us3FcrkeRBGM4l/u3NWdJ9zoLsU5jZYGObSk2+J7JPBhZ4t8R/u5lgcUYWLCWrmE
         zg3hnYCMw8I7xn0GiPwpKmesNvDdj/k1QBJ4A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=q7l13FyN3BIh1Fymd6ejQeZ4oLo3pNjHe3vaSAfxWFK/k7IYC7tGDSxP/FqhnSXqP3
         ERO2JqVglYofO5Ch1d2nmt5ykoA34Z4Ln4UQb88w1K7P40DBrY/4adOAmaZUHjcrxM7u
         c9SQud4Y+7zu5Hk52VT1ni2THeW8TQSvgliFQ=
MIME-Version: 1.0
Received: by 10.142.66.15 with SMTP id o15mr7444521wfa.145.1261633812031; Wed, 
	23 Dec 2009 21:50:12 -0800 (PST)
In-Reply-To: <7d94dcde0912231941x34c88c86l43ce802853be3c00@mail.gmail.com>
References: <7d94dcde0912231941x34c88c86l43ce802853be3c00@mail.gmail.com>
Date: Wed, 23 Dec 2009 21:50:12 -0800
Message-ID: <4b124c310912232150qc0bde9ey794ffca8c8eae986@mail.gmail.com>
Subject: Re: How to get a apache public license
From: Jake Mannix <jake.mannix@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636e90a2133f6cd047b730377

--001636e90a2133f6cd047b730377
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Merry Christmas to you, Weiwei.

  If you want to release your software under *exactly* the Apache License
(version 2.0 is the most current form of it), you may do so very easily -
just read the appendix at the end of this page:
http://www.apache.org/licenses/LICENSE-2.0

  In particular, note that becoming an "Apache Software Foundation" project
(via the Incubator process, as mentioned by Hira) is different than
releasing your code as Apache licensed.  Being an ASF project requires
applying, generating a community around your project, and is a large
undertaking.  Releasing your project as Apache licensed you may do without
asking anyone for permission or asking for any help - if you own the
copyright and patent rights to the work, you may release it under the Apach=
e
license by putting the code somewhere for people to get (sourceforge,
google-code, github, your own server, wherever), and include the
above-mentioned license file.

  -jake

On Wed, Dec 23, 2009 at 7:41 PM, Weiwei Wang <ww.wang.cs@gmail.com> wrote:

> Merry Christamas, guys,
>
> I haven't taken part in any open source activties and currently I want to
> make my project open source under apache public license? What should i do=
?
> Apply for a license? and where to apply?
>
> --
> Weiwei Wang
> Alex Wang
> =E7=8E=8B=E5=B7=8D=E5=B7=8D
> Room 403, Mengmin Wei Building
> Computer Science Department
> Gulou Campus of Nanjing University
> Nanjing, P.R.China, 210093
>
> Homepage: http://cs.nju.edu.cn/rl/weiweiwang
>

--001636e90a2133f6cd047b730377--

From java-user-return-44247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 24 08:39:34 2009
Return-Path: <java-user-return-44247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30119 invoked from network); 24 Dec 2009 08:39:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Dec 2009 08:39:34 -0000
Received: (qmail 27845 invoked by uid 500); 24 Dec 2009 08:39:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27753 invoked by uid 500); 24 Dec 2009 08:39:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27741 invoked by uid 99); 24 Dec 2009 08:39:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Dec 2009 08:39:30 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.210.192 as permitted sender)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Dec 2009 08:39:21 +0000
Received: by yxe30 with SMTP id 30so9079374yxe.29
        for <java-user@lucene.apache.org>; Thu, 24 Dec 2009 00:39:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=RQy7FdEm6Dg1jUyr47MPYZrMrIQsqR2A1C3cNkFtvvw=;
        b=DGeOFHAsoXw8ymQQOW4g2ez+PjUi9qa7pAlFQZS4VKIjrXt4fz+RtAICLeT6LTX7ZV
         +LXjDsJhia3AmK3mHZVSQzWQPOzBC9VteS/FB5txFk3ftbPupXgpXLwErDxitcmZ/Ch1
         gpAfdQQwauCeWYvzCbr7y2erXtWT3DLcEjhxE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=sTlrcDWsTiUg+dfQgHCWi7T5k3DfS3YIc/N58uEaTwcGiDEIMD2nQ6aX72EB9X7qkq
         FO1MjzbMJzkE4/EvgCITykpQ1pXPBLisv2AczO9KBuLK3Zk6R5qnCJf6QJTf5/mDGPr6
         zp3OKRIRzGXW2oZKyriiZuOFN6Eg3eZwDwn5w=
MIME-Version: 1.0
Received: by 10.91.178.19 with SMTP id f19mr2580560agp.33.1261643938362; Thu, 
	24 Dec 2009 00:38:58 -0800 (PST)
In-Reply-To: <4b124c310912232150qc0bde9ey794ffca8c8eae986@mail.gmail.com>
References: <7d94dcde0912231941x34c88c86l43ce802853be3c00@mail.gmail.com>
	 <4b124c310912232150qc0bde9ey794ffca8c8eae986@mail.gmail.com>
Date: Thu, 24 Dec 2009 16:38:58 +0800
Message-ID: <7d94dcde0912240038v146b9414oc81a56081ac67b44@mail.gmail.com>
Subject: Re: How to get a apache public license
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6471410c77425047b755e9f

--0016e6471410c77425047b755e9f
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Thanks Jake Mannix and N Hira. I'm planning to releasing my code as Apache
licensed.

I have read http://www.apache.org/licenses/LICENSE-2.0 and replace my own
identifying information with the boilerplate notice.

Aren't you guys on a holiday? (You guys are really hard-working), in China,
we don't have Christmas holiday but Spring Festival Holiday.

Happy Christmas Eve:-)

On Thu, Dec 24, 2009 at 1:50 PM, Jake Mannix <jake.mannix@gmail.com> wrote:

> Merry Christmas to you, Weiwei.
>
>  If you want to release your software under *exactly* the Apache License
> (version 2.0 is the most current form of it), you may do so very easily -
> just read the appendix at the end of this page:
> http://www.apache.org/licenses/LICENSE-2.0
>
>  In particular, note that becoming an "Apache Software Foundation" projec=
t
> (via the Incubator process, as mentioned by Hira) is different than
> releasing your code as Apache licensed.  Being an ASF project requires
> applying, generating a community around your project, and is a large
> undertaking.  Releasing your project as Apache licensed you may do withou=
t
> asking anyone for permission or asking for any help - if you own the
> copyright and patent rights to the work, you may release it under the
> Apache
> license by putting the code somewhere for people to get (sourceforge,
> google-code, github, your own server, wherever), and include the
> above-mentioned license file.
>
>  -jake
>
> On Wed, Dec 23, 2009 at 7:41 PM, Weiwei Wang <ww.wang.cs@gmail.com> wrote=
:
>
> > Merry Christamas, guys,
> >
> > I haven't taken part in any open source activties and currently I want =
to
> > make my project open source under apache public license? What should i
> do?
> > Apply for a license? and where to apply?
> >
> > --
> > Weiwei Wang
> > Alex Wang
> > =E7=8E=8B=E5=B7=8D=E5=B7=8D
> > Room 403, Mengmin Wei Building
> > Computer Science Department
> > Gulou Campus of Nanjing University
> > Nanjing, P.R.China, 210093
> >
> > Homepage: http://cs.nju.edu.cn/rl/weiweiwang
> >
>



--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--0016e6471410c77425047b755e9f--

From java-user-return-44248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 24 17:05:41 2009
Return-Path: <java-user-return-44248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60991 invoked from network); 24 Dec 2009 17:05:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Dec 2009 17:05:41 -0000
Received: (qmail 14360 invoked by uid 500); 24 Dec 2009 17:05:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14254 invoked by uid 500); 24 Dec 2009 17:05:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14244 invoked by uid 99); 24 Dec 2009 17:05:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Dec 2009 17:05:38 +0000
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Dec 2009 17:05:30 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NNr7d-00071E-1S
	for java-user@lucene.apache.org; Thu, 24 Dec 2009 09:05:09 -0800
Message-ID: <26915539.post@talk.nabble.com>
Date: Thu, 24 Dec 2009 09:05:09 -0800 (PST)
From: maxSchlein <m_schlein@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Analyzer that can handle C++ vs C#
In-Reply-To: <26748041.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: m_schlein@hotmail.com
References: <26748041.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Here is the solution.  I used a CustomAnalyzer that calls CustomFilter. =20

Easy enough, but now if I want to use the current version of lucene, 3.0
these methods are no longer there.  TokenStream.next() or
TokenStream.next(Token).  In 2.9.0 these methods were deprecated as are
Token.setTermText() and Token.termText().  The newer versions say to use,
incrementToken() and AttributeSource APIs.  But I cannot find much help
using these in this way.  Any help again is appreciated.

Merry Christmas too.

public class CustomAnalyzer extends Analyzer
{
    @Override
    public TokenStream tokenStream(final String fieldName, final Reader
reader)
    {
        TokenStream ts =3D new WhitespaceTokenizer(reader);
        ts =3D new StopFilter(false, ts, StopAnalyzer.ENGLISH_STOP_WORDS_SE=
T);
        ts =3D new LowerCaseFilter(ts);
        ts =3D new CustomFilter(ts);

        return ts;
    }

}

public class CustomFilter extends TokenFilter
{
    protected CustomFilter(TokenStream tokenStream)
    {
        super(tokenStream);
    }
    @Override
    public Token next(final Token reusableToken) throws IOException
    {
        Token nextToken =3D input.next(reusableToken);
       =20
        if(nextToken !=3D null)
        {
          =20
nextToken.setTermText(nextToken.termText().replaceAll(":|,|\\(|\\)|=E2=80=
=9C|~|;|&|\\.",""));
        }
        return nextToken;
    }
}



maxSchlein wrote:
>=20
> Can someone please point me in the right direction.
>=20
> We are creating an application that needs to beable to search on C++ and
> get
> back doc's that have C++ in it.  The StandardAnalyzer does not seem to
> index
> the "+", so a search for "C++" will bring back docs that contain, C++, C,
> C#, etc.....  The WhiteSpaceAnalyzer will index the "+", but if we have
> the
> term "C++." that is, if C++ is at the end of a sentence, it will index
> "C++." so a search for "C++" will not return the doc.  I have heard of
> maybe
> a CustomAnalyzer; however, it seems like there would actually need to be =
a
> CustomFilter/CustomTokenizer, I looked at:
>      - StandardAnalyzer.java
>      - StandardFilter.java
>      - StandardTokenizer.java
>      - StandardTokenizerImpl.java
>      - StandardTokenizerImpl.jflex
>=20
> I would guess that the StandardTokenizer is where the changes would need
> to
> be made to allow the "+" character, but I am unclear as to how.
>=20
> Any and all help is greatly appreciated.
>=20
> Going thru all the documents, stripping out "+" for the word "plus" is no=
t
> really an option for us.=20
>=20

--=20
View this message in context: http://old.nabble.com/Lucene-Analyzer-that-ca=
n-handle-C%2B%2B-vs-C--tp26748041p26915539.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 24 17:10:37 2009
Return-Path: <java-user-return-44249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61580 invoked from network); 24 Dec 2009 17:10:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Dec 2009 17:10:37 -0000
Received: (qmail 17753 invoked by uid 500); 24 Dec 2009 17:10:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17661 invoked by uid 500); 24 Dec 2009 17:10:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17651 invoked by uid 99); 24 Dec 2009 17:10:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Dec 2009 17:10:35 +0000
X-ASF-Spam-Status: No, hits=1.6 required=5.0
	tests=AWL,BAYES_00,FORGED_HOTMAIL_RCVD2
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Dec 2009 17:10:26 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NNrCP-0007JK-7w
	for java-user@lucene.apache.org; Thu, 24 Dec 2009 09:10:05 -0800
Message-ID: <26915600.post@talk.nabble.com>
Date: Thu, 24 Dec 2009 09:10:05 -0800 (PST)
From: maxSchlein <m_schlein@hotmail.com>
To: java-user@lucene.apache.org
Subject: help customfilter with incrementToken() and AttributeSource APIs
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: m_schlein@hotmail.com


In the current version of lucene, 3.0 the following methods are no longer
available. =20
   - TokenStream.next()=20
   - TokenStream.next(Token). =20
   - Token.setTermText()=20
   - Token.termText(). =20

The newer versions says to use, incrementToken() and AttributeSource APIs.=
=20
But I cannot find much help using these in this way.  Any help again is
appreciated.  If anyone has a basic example, or can point me to something
useful that would be awesome.  Thanx.

Merry Christmas too.

public class CustomAnalyzer extends Analyzer
{
    @Override
    public TokenStream tokenStream(final String fieldName, final Reader
reader)
    {
        TokenStream ts =3D new WhitespaceTokenizer(reader);
        ts =3D new StopFilter(false, ts, StopAnalyzer.ENGLISH_STOP_WORDS_SE=
T);
        ts =3D new LowerCaseFilter(ts);
        ts =3D new CustomFilter(ts);

        return ts;
    }

}

public class CustomFilter extends TokenFilter
{
    protected CustomFilter(TokenStream tokenStream)
    {
        super(tokenStream);
    }
    @Override
    public Token next(final Token reusableToken) throws IOException
    {
        Token nextToken =3D input.next(reusableToken);
       =20
        if(nextToken !=3D null)
        {
          =20
nextToken.setTermText(nextToken.termText().replaceAll(":|,|\\(|\\)|=E2=80=
=9C|~|;|&|\\.",""));
        }
        return nextToken;
    }
}
--=20
View this message in context: http://old.nabble.com/help-customfilter-with-=
incrementToken%28%29-and-AttributeSource-APIs-tp26915600p26915600.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 24 18:16:22 2009
Return-Path: <java-user-return-44250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86525 invoked from network); 24 Dec 2009 18:16:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Dec 2009 18:16:22 -0000
Received: (qmail 61826 invoked by uid 500); 24 Dec 2009 18:16:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61758 invoked by uid 500); 24 Dec 2009 18:16:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61747 invoked by uid 99); 24 Dec 2009 18:16:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Dec 2009 18:16:19 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of digydigy@gmail.com designates 74.125.78.27 as permitted sender)
Received: from [74.125.78.27] (HELO ey-out-2122.google.com) (74.125.78.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Dec 2009 18:16:09 +0000
Received: by ey-out-2122.google.com with SMTP id 9so862277eyd.3
        for <java-user@lucene.apache.org>; Thu, 24 Dec 2009 10:15:48 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:references
         :in-reply-to:subject:date:message-id:mime-version:content-type
         :content-transfer-encoding:x-mailer:content-language:thread-index;
        bh=sRJ9ywFWFK+EMF6q8FGAOLKLhxkt/Zse2mw7bm3JcxU=;
        b=CsZRKaZw60AZ6S4z7Rx2pLfUFLDno8BgiLFaeo8B7sUE0K+DmigjzB2OeSXEAgGBAy
         ABPEs/ZUt69hTA1Ha1oft4isbDS0g6oBuCeZWNxigC4UEukmjU4fgjJ/fjrY1RepyjKY
         6nmxDCfvkucqykVoqKNyNNAA3Sgk0GV3fIflQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:x-mailer:content-language
         :thread-index;
        b=OZlWTZvwe1SUqZFN7dObmJtDiJF3kgriLjtM6759NDq0MjzxozBIdzRX50ovH9MX/B
         sN36FHeU8zPzy2tazeu8nxip3t97rW0Jz/0PRIvIpmZ1Y6yJOVRSyjukP5mNuLq6xDir
         NYg5PJV2eiIkCbacoZMKQGdYNMefuVu4WJjc0=
Received: by 10.213.25.78 with SMTP id y14mr4601360ebb.42.1261678548212;
        Thu, 24 Dec 2009 10:15:48 -0800 (PST)
Received: from NEWPC ([81.213.206.230])
        by mx.google.com with ESMTPS id 28sm17441462eyg.28.2009.12.24.10.15.46
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 24 Dec 2009 10:15:47 -0800 (PST)
From: "Digy" <digydigy@gmail.com>
To: <java-user@lucene.apache.org>
References: <26915600.post@talk.nabble.com>
In-Reply-To: <26915600.post@talk.nabble.com>
Subject: RE: help customfilter with incrementToken() and AttributeSource APIs
Date: Thu, 24 Dec 2009 20:15:27 +0200
Message-ID: <002101ca84c5$12ec24d0$38c46e70$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Content-Language: tr
Thread-Index: AcqEvALZCvnnZ6IITUq/5GEf3RWspgACN2hA

The source code for LowerCaseFilter or StopFilter can be a good starting =
point.
DIGY

-----Original Message-----
From: maxSchlein [mailto:m_schlein@hotmail.com]=20
Sent: Thursday, December 24, 2009 7:10 PM
To: java-user@lucene.apache.org
Subject: help customfilter with incrementToken() and AttributeSource =
APIs


In the current version of lucene, 3.0 the following methods are no =
longer
available. =20
   - TokenStream.next()=20
   - TokenStream.next(Token). =20
   - Token.setTermText()=20
   - Token.termText(). =20

The newer versions says to use, incrementToken() and AttributeSource =
APIs.=20
But I cannot find much help using these in this way.  Any help again is
appreciated.  If anyone has a basic example, or can point me to =
something
useful that would be awesome.  Thanx.

Merry Christmas too.

public class CustomAnalyzer extends Analyzer
{
    @Override
    public TokenStream tokenStream(final String fieldName, final Reader
reader)
    {
        TokenStream ts =3D new WhitespaceTokenizer(reader);
        ts =3D new StopFilter(false, ts, =
StopAnalyzer.ENGLISH_STOP_WORDS_SET);
        ts =3D new LowerCaseFilter(ts);
        ts =3D new CustomFilter(ts);

        return ts;
    }

}

public class CustomFilter extends TokenFilter
{
    protected CustomFilter(TokenStream tokenStream)
    {
        super(tokenStream);
    }
    @Override
    public Token next(final Token reusableToken) throws IOException
    {
        Token nextToken =3D input.next(reusableToken);
       =20
        if(nextToken !=3D null)
        {
          =20
nextToken.setTermText(nextToken.termText().replaceAll(":|,|\\(|\\)|=E2=80=
=9C|~|;|&|\\.",""));
        }
        return nextToken;
    }
}
--=20
View this message in context: =
http://old.nabble.com/help-customfilter-with-incrementToken%28%29-and-Att=
ributeSource-APIs-tp26915600p26915600.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 24 20:13:50 2009
Return-Path: <java-user-return-44251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16025 invoked from network); 24 Dec 2009 20:13:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Dec 2009 20:13:50 -0000
Received: (qmail 18886 invoked by uid 500); 24 Dec 2009 20:13:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18809 invoked by uid 500); 24 Dec 2009 20:13:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18799 invoked by uid 99); 24 Dec 2009 20:13:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Dec 2009 20:13:48 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.49.18] (HELO web52908.mail.re2.yahoo.com) (206.190.49.18)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 24 Dec 2009 20:13:38 +0000
Received: (qmail 91969 invoked by uid 60001); 24 Dec 2009 20:13:16 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1261685596; bh=AMhQAtLi52aF412E7zIvD3RxQeamPutOag6AFF9FikI=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=3nHZbm0G+n0YPex9wsPb4wqdnx67/a68/1XFbRi/I8ot/u/b9kDIKqD0pAe9lb9bXtypPh3s92RYoDIxzi/EZ2FcNqaHuP4GwaGguKCb9/PBD8olWihdnjHviv/ShQK9hrAfyYZXYS4W4koNieKxdpF40IQqWd44mfFVx9sFdJw=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=AZ1EdwrxjrsD8AtAbXGPLTLH6xYjLc+Chk7cReOcmUJqKURRDxiyKraX/ph2M/M80eOL5e1aPGr3q8YTbig8uicNuBRGFhMW1S3l6H6gGijXTQirUrbvwPoFa0+ND2b04pQBwCPTOYN0wppdl+8T1/skEGZh3MyW41xFTs85mOI=;
Message-ID: <625164.91184.qm@web52908.mail.re2.yahoo.com>
X-YMail-OSG: eMui0TwVM1n1ZPXBR3umIbmR7BtgpO658mFPerIPNfek.IpXPtaw3e3fk.Qm0AZwUojIZUMwMTYaarDabfB05A1R5dnpF7xHLoilR4MXCCyXq.pBNBDaRjiIZ6bd5Oy1c.PrAPDbqKCkDbkH0k6NvjeolItw1xa_zPeixH1XLEZQcj.s3SrLrrQfDJD.fmzjqkZW2GZy3pqRYit5pMP9ZNT07VnMQ0j8FBm_cMaAKTxzVYs6SbTUO2C608J3IRWD_5MlD5eVVHBphjGOrojFXKobK4mTzEqE6v9UdotL13BtAuqEfzoM_r5zMVsdKikwHGTt4gnz1ACoygpOs5t63A--
Received: from [78.168.191.220] by web52908.mail.re2.yahoo.com via HTTP; Thu, 24 Dec 2009 12:13:16 PST
X-Mailer: YahooMailClassic/9.0.20 YahooMailWebService/0.8.100.260964
Date: Thu, 24 Dec 2009 12:13:16 -0800 (PST)
From: AHMET ARSLAN <iorixxx@yahoo.com>
Subject: Re: Lucene Analyzer that can handle C++ vs C#
To: java-user@lucene.apache.org
In-Reply-To: <26915539.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

=0A> public class CustomFilter extends TokenFilter=0A> {=0A> =C2=A0 =C2=A0 =
protected CustomFilter(TokenStream=0A> tokenStream)=0A> =C2=A0 =C2=A0 {=0A>=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 super(tokenStream);=0A> =C2=A0 =C2=A0 }=0A> =
=C2=A0 =C2=A0 @Override=0A> =C2=A0 =C2=A0 public Token next(final Token reu=
sableToken)=0A> throws IOException=0A> =C2=A0 =C2=A0 {=0A> =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 Token nextToken =3D=0A> input.next(reusableToken);=0A> =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =0A> =C2=A0 =C2=A0 =C2=A0 =C2=A0 if(nextToken !=3D nu=
ll)=0A> =C2=A0 =C2=A0 =C2=A0 =C2=A0 {=0A> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0=C2=A0=C2=A0=0A> nextToken.setTermText(nextToken.termText().replaceAll("=
:|,|\\(|\\)|=E2=80=9C|~|;|&|\\.",""));=0A> =C2=A0 =C2=A0 =C2=A0 =C2=A0 }=0A=
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 return nextToken;=0A> =C2=A0 =C2=A0 }=0A> }=
=0A=0AHere is the the one that uses new token stream api: =0A=0Apublic fina=
l class CustomFilter extends TokenFilter {=0A=0A   private final TermAttrib=
ute termAtt;=0A=0A    public CustomFilter(TokenStream in, FastZemberek zemb=
erek) {=0A        super(in);=0A        termAtt =3D (TermAttribute) addAttri=
bute(TermAttribute.class);=0A    }=0A    =0A    public final boolean increm=
entToken() throws IOException {=0A        if (input.incrementToken()) {=0A =
           String term =3D termAtt.term();=0A            String s =3D term.=
replaceAll(":|,|\\(|\\)|=E2=80=9C|~|;|&|\\.","");=0A            if (s !=3D =
null && !s.equals(term))=0A                termAtt.setTermBuffer(s);=0A    =
        return true;=0A        } else {=0A            return false;=0A     =
   }=0A    }=0A}=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 24 20:46:05 2009
Return-Path: <java-user-return-44252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19307 invoked from network); 24 Dec 2009 20:46:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 24 Dec 2009 20:46:05 -0000
Received: (qmail 34336 invoked by uid 500); 24 Dec 2009 20:46:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34254 invoked by uid 500); 24 Dec 2009 20:46:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34244 invoked by uid 99); 24 Dec 2009 20:46:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Dec 2009 20:46:03 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Dec 2009 20:45:53 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 8164945F3BD
	for <java-user@lucene.apache.org>; Thu, 24 Dec 2009 21:45:32 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 3yqxEeUF9X3f for <java-user@lucene.apache.org>;
	Thu, 24 Dec 2009 21:45:29 +0100 (CET)
Received: from VEGA (dslb-088-065-099-207.pools.arcor-ip.net [88.65.99.207])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 1B41945F2C2
	for <java-user@lucene.apache.org>; Thu, 24 Dec 2009 21:45:29 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <26915539.post@talk.nabble.com> <625164.91184.qm@web52908.mail.re2.yahoo.com>
Subject: RE: Lucene Analyzer that can handle C++ vs C#
Date: Thu, 24 Dec 2009 21:45:28 +0100
Message-ID: <9D5C71007E054CB389F5BD190D536700@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
In-Reply-To: <625164.91184.qm@web52908.mail.re2.yahoo.com>
Thread-Index: AcqE1aJXlN0jGpn5Qs+bSZ/FF1qtZQAA+4bA
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

> Here is the the one that uses new token stream api:
> 
> public final class CustomFilter extends TokenFilter {
> 
>    private final TermAttribute termAtt;
> 
>     public CustomFilter(TokenStream in, FastZemberek zemberek) {
>         super(in);
>         termAtt = (TermAttribute) addAttribute(TermAttribute.class);
>     }
> 
>     public final boolean incrementToken() throws IOException {
>         if (input.incrementToken()) {
>             String term = termAtt.term();
>             String s = term.replaceAll(":|,|\\(|\\)|"|~|;|&|\\.","");
>             if (s != null && !s.equals(term))
>                 termAtt.setTermBuffer(s);
>             return true;
>         } else {
>             return false;
>         }
>     }
> }
> 

As a note: As you are using Lucene 3.0 with Java 5, the casts of
addAttribute() can be removed, they were only be needed for Java 1.4
compatibility in Lucene 2.9! 3.0 uses generics, so the line in the ctor is
in Lucene 3.0:

termAtt = addAttribute(TermAttribute.class);

And it can even be shorter without the ctor at all, just use:

private final TermAttribute termAtt = addAttribute(TermAttribute.class);

(in the declaration and remove the ctor).

Happy Xmas,
Uwe



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 25 00:34:53 2009
Return-Path: <java-user-return-44253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68698 invoked from network); 25 Dec 2009 00:34:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Dec 2009 00:34:52 -0000
Received: (qmail 5957 invoked by uid 500); 25 Dec 2009 00:34:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5881 invoked by uid 500); 25 Dec 2009 00:34:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5871 invoked by uid 99); 25 Dec 2009 00:34:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Dec 2009 00:34:50 +0000
X-ASF-Spam-Status: No, hits=0.3 required=5.0
	tests=AWL,BAYES_00,FORGED_HOTMAIL_RCVD2
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Dec 2009 00:34:40 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NNy8J-00037I-Te
	for java-user@lucene.apache.org; Thu, 24 Dec 2009 16:34:19 -0800
Message-ID: <26918236.post@talk.nabble.com>
Date: Thu, 24 Dec 2009 16:34:19 -0800 (PST)
From: maxSchlein <m_schlein@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Analyzer that can handle C++ vs C#
In-Reply-To: <625164.91184.qm@web52908.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: m_schlein@hotmail.com
References: <26748041.post@talk.nabble.com> <26915539.post@talk.nabble.com> <625164.91184.qm@web52908.mail.re2.yahoo.com>


That is awesome, just one thing, and forgive me if i sound ignorant.  What =
is
"FastZemberek zemberek"?

Ahmet Arslan wrote:
>=20
>=20
>> public class CustomFilter extends TokenFilter
>> {
>> =C2=A0 =C2=A0 protected CustomFilter(TokenStream
>> tokenStream)
>> =C2=A0 =C2=A0 {
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 super(tokenStream);
>> =C2=A0 =C2=A0 }
>> =C2=A0 =C2=A0 @Override
>> =C2=A0 =C2=A0 public Token next(final Token reusableToken)
>> throws IOException
>> =C2=A0 =C2=A0 {
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 Token nextToken =3D
>> input.next(reusableToken);
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0=20
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 if(nextToken !=3D null)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 {
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=C2=A0=C2=A0
>> nextToken.setTermText(nextToken.termText().replaceAll(":|,|\\(|\\)|=E2=
=80=9C|~|;|&|\\.",""));
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 }
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 return nextToken;
>> =C2=A0 =C2=A0 }
>> }
>=20
> Here is the the one that uses new token stream api:=20
>=20
> public final class CustomFilter extends TokenFilter {
>=20
>    private final TermAttribute termAtt;
>=20
>     public CustomFilter(TokenStream in, FastZemberek zemberek) {
>         super(in);
>         termAtt =3D (TermAttribute) addAttribute(TermAttribute.class);
>     }
>    =20
>     public final boolean incrementToken() throws IOException {
>         if (input.incrementToken()) {
>             String term =3D termAtt.term();
>             String s =3D term.replaceAll(":|,|\\(|\\)|=E2=80=9C|~|;|&|\\.=
","");
>             if (s !=3D null && !s.equals(term))
>                 termAtt.setTermBuffer(s);
>             return true;
>         } else {
>             return false;
>         }
>     }
> }
>=20
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://old.nabble.com/Lucene-Analyzer-that-ca=
n-handle-C%2B%2B-vs-C--tp26748041p26918236.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 25 00:40:16 2009
Return-Path: <java-user-return-44254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75459 invoked from network); 25 Dec 2009 00:40:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Dec 2009 00:40:16 -0000
Received: (qmail 9482 invoked by uid 500); 25 Dec 2009 00:40:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9394 invoked by uid 500); 25 Dec 2009 00:40:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9384 invoked by uid 99); 25 Dec 2009 00:40:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Dec 2009 00:40:13 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.49.18] (HELO web52908.mail.re2.yahoo.com) (206.190.49.18)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 25 Dec 2009 00:40:04 +0000
Received: (qmail 33348 invoked by uid 60001); 25 Dec 2009 00:39:43 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1261701583; bh=TZAuDADhFucjap76nuACRC+RFNcJ2mt5FlMn/KO0JNk=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=cF8OnI1oDJ6SPxcAP/nhYBkbmCPxTG2WTv4ZPJHe6/tz2m9axsbn3gJDM30f1idZXeEh+m+AJtu4zZgrz9//iRh7hMs2Q4u7Jaqf8VBaqRdPFXVgpRa6tISjW0av3rxMJG/rbkPiMV9gOXSWmtwyrvEuQmabYgrKWVBAGo2QjTk=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=Kc651YNa3aqbnLmVSFNaXcnuOQinGtBtZAVBk0KO7T3dQyrOQU5XbBEwUiyJ4TjmgFlUfWeNhS3zfoIrs6O/pUzn0dd3W2ijF6E5Q3IbZ8oWm9VIO+bsTvFQEg0uzFeWPAZoo/xzuId0zvgF7lx3Ckiw/BwNR7Zrt6gNjYdPONo=;
Message-ID: <246727.21178.qm@web52908.mail.re2.yahoo.com>
X-YMail-OSG: 4s.naVUVM1l4UTtmCpDDXvF7AoryGcvgQAMS3zSyHL3.BHh0zDbylPBv.GJbh5IJZnbut526UZjPcZP3VbUzfX2yaW6ZTx4JgyNqw8nTv85iOSSMorBK.lgpCr6Kg.OWh9jg2hxgWXN.w9mZtJKNogiemalGrBGK78NH2yZtiwzfN4phJhVUHGpRzOn5V8CXeQR4ykpfND4rLegtS0DBIj1UVlYMj4811BXkluNnLwr3UKWoDEUJ2WZyWxRvd.X3CTOiX_gJszE0Avhlh9x5pqAXq25N_HKvCueAJvRHBx8ENTlDNiBkgcad
Received: from [78.168.191.220] by web52908.mail.re2.yahoo.com via HTTP; Thu, 24 Dec 2009 16:39:43 PST
X-Mailer: YahooMailClassic/9.0.20 YahooMailWebService/0.8.100.260964
Date: Thu, 24 Dec 2009 16:39:43 -0800 (PST)
From: AHMET ARSLAN <iorixxx@yahoo.com>
Subject: Re: Lucene Analyzer that can handle C++ vs C#
To: java-user@lucene.apache.org
In-Reply-To: <26918236.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

=0A> =0A> That is awesome, just one thing, and forgive me if i sound=0A> ig=
norant.=A0 What is=0A> "FastZemberek zemberek"?=0A=0AOh, it's just a copy-p=
aste accident, delete it :)=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 25 11:36:59 2009
Return-Path: <java-user-return-44255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11901 invoked from network); 25 Dec 2009 11:36:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Dec 2009 11:36:59 -0000
Received: (qmail 63933 invoked by uid 500); 25 Dec 2009 11:36:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63840 invoked by uid 500); 25 Dec 2009 11:36:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63830 invoked by uid 99); 25 Dec 2009 11:36:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Dec 2009 11:36:55 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Dec 2009 11:36:48 +0000
Received: by yxe30 with SMTP id 30so9943350yxe.29
        for <java-user@lucene.apache.org>; Fri, 25 Dec 2009 03:36:26 -0800 (PST)
MIME-Version: 1.0
Received: by 10.151.20.8 with SMTP id x8mr18834205ybi.163.1261740985955; Fri, 
	25 Dec 2009 03:36:25 -0800 (PST)
In-Reply-To: <84fb38e30912232032v75ba4616p92ce5eeaff626092@mail.gmail.com>
References: <20090610122347.GB5557@kopfschmerz.zuhause>
	 <9ac0c6aa0906100540q41d1aa4fq2910521623b2edc3@mail.gmail.com>
	 <84fb38e30912232032v75ba4616p92ce5eeaff626092@mail.gmail.com>
Date: Fri, 25 Dec 2009 06:36:25 -0500
Message-ID: <9ac0c6aa0912250336m1c649cv6c883bddd2f43c02@mail.gmail.com>
Subject: Re: Lucene memory usage
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Sorry, LUCENE-1458 is "continuing" under LUCENE-2111 (ie, flexible
indexing is not yet committed).  I've just added a comment to
LUCENE-1458 to that effect.

Lucene, even with flexible indexing, loads the terms index entirely
into RAM (it's just that the terms index in flexible indexing has less
RAM overhead per indexed term).

With flexible indexing one could create a codec that would use mmap
for the terms index, and I agree it's tempting to explore that.  Lucy
(loose C port of Lucene -- http://lucene.apache.org/lucy) is taking
exactly that approach, not only for terms dict but also for all other
RAM resident data structures in Lucene (deleted docs, field norms,
field/sort cache).

The problem is, with mmap, you're more likely to hit page faults when
looking up a term, especially if the machine doesn't have enough RAM,
which can add substantially to the net latency of the search.  This
might not be a problem for certain apps, but it would be a problem in
general for Lucene.  Lucene loads the terms index into RAM so lookups
are fast.  (Of course the OS can also swap out process RAM, though it
usually does so less "eagerly" than mapped pages).

Have you tried setting the termInfosIndexDivisor when opening the
IndexReader?  EG a setting of 2 would load every 256th term (instead
of every 128th term) into RAM, halving RAM usage, with the downside
being that looking up a term will generally take longer since it'll
require more scanning.

Mike

On Wed, Dec 23, 2009 at 11:32 PM, tsuraan <tsuraan@gmail.com> wrote:
>> This (very large number of unique terms) is a problem for Lucene current=
ly.
>>
>> There are some simple improvements we could make to the terms dict
>> format to not require so much RAM per term in the terms index...
>> LUCENE-1458 (flexible indexing) has these improvements, but
>> unfortunately tied in w/ lots of other changes. =A0Maybe we should break
>> out a separate issue for this... this'd be a great contained
>> improvement, if anyone out there has "the itch" :)
>
> Resurrecting an old thread, but it's a concern that I have as well, so
> I thought I'd add on to this.
>
> It looks like issue 1458 was resolved on dec. 3, but I couldn't figure
> out what the resolution was. =A0Does lucene 3.0 have a more
> memory-friendly replacement to reading the entire .tii file into RAM?
> If not, would just mmap'ing the .tii file and skipping around in the
> mmap be a better solution than essentially reading the entire file and
> keeping it in arrays on the heap?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 25 21:47:09 2009
Return-Path: <java-user-return-44256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34892 invoked from network); 25 Dec 2009 21:47:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Dec 2009 21:47:09 -0000
Received: (qmail 22791 invoked by uid 500); 25 Dec 2009 21:47:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22709 invoked by uid 500); 25 Dec 2009 21:47:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22699 invoked by uid 99); 25 Dec 2009 21:47:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Dec 2009 21:47:06 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of elias3@gmail.com designates 209.85.220.210 as permitted sender)
Received: from [209.85.220.210] (HELO mail-fx0-f210.google.com) (209.85.220.210)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Dec 2009 21:46:57 +0000
Received: by fxm2 with SMTP id 2so8277479fxm.5
        for <java-user@lucene.apache.org>; Fri, 25 Dec 2009 13:46:37 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:subject:date
         :message-id:mime-version:content-type:content-transfer-encoding
         :x-mailer:x-mimeole:thread-index;
        bh=QQxZuSbIjojwh2VOBffo0JocRFfU1kLJVInT6j0P3kM=;
        b=uVrodgNKO/i3w1h0TIMhvvul5MXIk6+X/DfymQp9Rq6lXyjwVG+AEFfFjpP25wtxvP
         YaduSKSrXBUpe/mc9BzhxdwPy9ZikIpc1NbklS3LevHoLUr2wwGb/b78qJZRyr79nwpp
         cgVn3Jfqjf9h4w/4XklOrp5jQSSxOhSP1SfpE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:subject:date:message-id:mime-version:content-type
         :content-transfer-encoding:x-mailer:x-mimeole:thread-index;
        b=FAPeMLdfW7Tds/1tRd/7DahcaZEfUJoW3FrMX1bxTjVhi0qGd2DPqhNlBZcKizvVAr
         eQ5gbk346zVB5GUO4uy6O+Jz1jQRBHaCeA3TOoxmVCqWvhHywcmwXZAsAJresTU4yyxB
         L3F4NI9k6qinhkiI3P8m+5Jwb5yp0PAnrcu60=
Received: by 10.102.214.22 with SMTP id m22mr4547752mug.54.1261777597405;
        Fri, 25 Dec 2009 13:46:37 -0800 (PST)
Received: from elias ([132.69.226.57])
        by mx.google.com with ESMTPS id e10sm28409367muf.13.2009.12.25.13.46.36
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 25 Dec 2009 13:46:37 -0800 (PST)
From: "Elias Khsheibun" <elias3@gmail.com>
To: <java-user@lucene.apache.org>
Subject: BooleanScorer
Date: Fri, 25 Dec 2009 23:46:28 +0200
Message-ID: <E51D1E28002244CA9D692AF2726BE216@elias>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
Thread-index: AcqFq7Z5zgCbQzg+QHiAX/je9kEuEw==
X-Virus-Checked: Checked by ClamAV on apache.org

When I write the following query:

"Computer AND Science" - the code that is in BooleanScorer2 is invoked, and
when I write "Computer OR Science" the code in BooleanScorer is invoked. How
can I make the OR (the conjunctive query) to use the BooleanScorer2 and not
BooleanScorer, which is the new implementation.


Elias.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 25 22:14:59 2009
Return-Path: <java-user-return-44257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42854 invoked from network); 25 Dec 2009 22:14:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 25 Dec 2009 22:14:59 -0000
Received: (qmail 28834 invoked by uid 500); 25 Dec 2009 22:14:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28752 invoked by uid 500); 25 Dec 2009 22:14:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28742 invoked by uid 99); 25 Dec 2009 22:14:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Dec 2009 22:14:56 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of tsuraan@gmail.com designates 74.125.92.26 as permitted sender)
Received: from [74.125.92.26] (HELO qw-out-2122.google.com) (74.125.92.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Dec 2009 22:14:48 +0000
Received: by qw-out-2122.google.com with SMTP id 5so364244qwi.53
        for <java-user@lucene.apache.org>; Fri, 25 Dec 2009 14:14:28 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=FNACl1eRLOnkRjYnn8ct4bG4WJs4c2S++MyduwsoKJw=;
        b=HIKIIOYsQYnHP+eRCrlAulc/ceWQcJorMUyFUW437zfuMMuDNy0TKZOH8Irr0DRpKl
         shbrg4Ck8zHL4gbtKEbnitjS4fx92XoZMlvaxWSOPPbVNlyKeCu5xlrcz+bL3+4yNUWQ
         /zk8uy3TaoczoGuLAUeOB2WqmTDrrlOC7VaXU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=w/CYXXxHjxuEWjRCaamOJHAxs1FqF2+H/Hmx8iWkgLNoHOR1X7k1W1MZ+fwA/oExuR
         56G37Z/H1yTOIqBBlOxg1FCvKh/PPRiPsk2czNte26FyRzqAo+r3Lfat+d6f2SRNW1aP
         rBVtokGXWcfMI5a9kdkx/NH06rmliWCgdL0hs=
MIME-Version: 1.0
Received: by 10.229.15.203 with SMTP id l11mr5564504qca.43.1261779267965; Fri, 
	25 Dec 2009 14:14:27 -0800 (PST)
In-Reply-To: <9ac0c6aa0912250336m1c649cv6c883bddd2f43c02@mail.gmail.com>
References: <20090610122347.GB5557@kopfschmerz.zuhause>
	 <9ac0c6aa0906100540q41d1aa4fq2910521623b2edc3@mail.gmail.com>
	 <84fb38e30912232032v75ba4616p92ce5eeaff626092@mail.gmail.com>
	 <9ac0c6aa0912250336m1c649cv6c883bddd2f43c02@mail.gmail.com>
Date: Fri, 25 Dec 2009 16:14:27 -0600
Message-ID: <84fb38e30912251414v438c9a86h6b05ebeb8f91a705@mail.gmail.com>
Subject: Re: Lucene memory usage
From: tsuraan <tsuraan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

> Have you tried setting the termInfosIndexDivisor when opening the
> IndexReader?  EG a setting of 2 would load every 256th term (instead
> of every 128th term) into RAM, halving RAM usage, with the downside
> being that looking up a term will generally take longer since it'll
> require more scanning.

The problem that I have with doing this is I don't know how to get an
estimate of how much RAM a given index will need.  I'm generally
searching on a few dozen indices of different sizes and compositions;
if I run out of RAM, I can increment a universal index divisor and
re-open all my indices, but I don't know of a more elegant way to
handle memory limitations.  Is there a call that I could do prior to
the index being read to determine what divisor would be reasonable?
For example, suppose I want to constrain Lucene to using 1GB per
million lucene documents in an index.  Is there a nice way to do that?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 26 13:51:39 2009
Return-Path: <java-user-return-44258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49004 invoked from network); 26 Dec 2009 13:51:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Dec 2009 13:51:39 -0000
Received: (qmail 50777 invoked by uid 500); 26 Dec 2009 13:51:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50707 invoked by uid 500); 26 Dec 2009 13:51:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50697 invoked by uid 99); 26 Dec 2009 13:51:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Dec 2009 13:51:36 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [64.202.165.37] (HELO smtpauth13.prod.mesa1.secureserver.net) (64.202.165.37)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 26 Dec 2009 13:51:26 +0000
Received: (qmail 21135 invoked from network); 26 Dec 2009 13:51:03 -0000
Received: from unknown (213.158.199.142)
  by smtpauth13.prod.mesa1.secureserver.net (64.202.165.37) with ESMTP; 26 Dec 2009 13:51:02 -0000
Message-ID: <4B3614BD.2070103@getopt.org>
Date: Sat, 26 Dec 2009 14:50:53 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1.5) Gecko/20091204 Lightning/1.0b2pre Thunderbird/3.0
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: [ANN] Luke 1.0.0 for Lucene 3.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

I'm happy to announce that Luke 1.0.0 was released, and is available for 
download here:

	http://code.google.com/p/luke

This version of Luke uses Lucene 3.0 jars. There were only minor changes 
in the code (and none in functionality) related to the changes in API 
between Lucene 2.9.1 and 3.0.

Your feedback is welcome - please use the Google Issue tracker to report 
issues.

Merry Christmas!


-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 26 13:53:32 2009
Return-Path: <java-user-return-44259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49540 invoked from network); 26 Dec 2009 13:53:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Dec 2009 13:53:32 -0000
Received: (qmail 52665 invoked by uid 500); 26 Dec 2009 13:53:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52583 invoked by uid 500); 26 Dec 2009 13:53:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52573 invoked by uid 99); 26 Dec 2009 13:53:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Dec 2009 13:53:30 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.217.225 as permitted sender)
Received: from [209.85.217.225] (HELO mail-gx0-f225.google.com) (209.85.217.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Dec 2009 13:53:20 +0000
Received: by gxk25 with SMTP id 25so2385041gxk.5
        for <java-user@lucene.apache.org>; Sat, 26 Dec 2009 05:52:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=Egt7akGO6vwWXAP6yheltxk2lWtngZK+RJWMM4hO4cA=;
        b=kUe4AkPaMsnT9JFfRs4mXZdpkd6L9ftabRfc3r8fqT6nm506d3cZyyDx6PR/xkPLTN
         z5s/CqsfP0YjlpCWjQ3pLESSbtzmPQbCWuifenPiDJZYKvAaD8/MChJ8W71paEdv41W/
         xMCsGaKfpszAATogORkDuQC+c/NuF5Zy3/plg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=jrr+nx+cqWEU8X2PiUtPOLdrCQMVBlrAxO5JMI2xYzxLvd71QBI9n5tVuyOJGm5FwO
         TFRmvneJXG5zUGQT5rxMnxMCZraRpYee9i2iMglxtt0KN8bJVjHy1RGaE60D/E29MvTm
         heFhJ5+JcFff632oSTnowNBRuCqTEE3sF9sTM=
MIME-Version: 1.0
Received: by 10.91.94.10 with SMTP id w10mr1568847agl.26.1261835579547; Sat, 
	26 Dec 2009 05:52:59 -0800 (PST)
In-Reply-To: <4B3614BD.2070103@getopt.org>
References: <4B3614BD.2070103@getopt.org>
Date: Sat, 26 Dec 2009 21:52:59 +0800
Message-ID: <7d94dcde0912260552t118c2224j4564646f1dc5164e@mail.gmail.com>
Subject: Re: [ANN] Luke 1.0.0 for Lucene 3.0
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64606747be067047ba1fdff

--0016e64606747be067047ba1fdff
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hard working boy:-)
Merry  Christmas too~

On Sat, Dec 26, 2009 at 9:50 PM, Andrzej Bialecki <ab@getopt.org> wrote:

> Hi all,
>
> I'm happy to announce that Luke 1.0.0 was released, and is available for
> download here:
>
>        http://code.google.com/p/luke
>
> This version of Luke uses Lucene 3.0 jars. There were only minor changes =
in
> the code (and none in functionality) related to the changes in API betwee=
n
> Lucene 2.9.1 and 3.0.
>
> Your feedback is welcome - please use the Google Issue tracker to report
> issues.
>
> Merry Christmas!
>
>
> --
> Best regards,
> Andrzej Bialecki     <><
>  ___. ___ ___ ___ _ _   __________________________________
> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> http://www.sigram.com  Contact: info at sigram dot com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Weiwei Wang
Alex Wang
=E7=8E=8B=E5=B7=8D=E5=B7=8D
Room 403, Mengmin Wei Building
Computer Science Department
Gulou Campus of Nanjing University
Nanjing, P.R.China, 210093

Homepage: http://cs.nju.edu.cn/rl/weiweiwang

--0016e64606747be067047ba1fdff--

From java-user-return-44260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 26 14:35:44 2009
Return-Path: <java-user-return-44260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61476 invoked from network); 26 Dec 2009 14:35:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Dec 2009 14:35:44 -0000
Received: (qmail 73982 invoked by uid 500); 26 Dec 2009 14:35:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73877 invoked by uid 500); 26 Dec 2009 14:35:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73867 invoked by uid 99); 26 Dec 2009 14:35:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Dec 2009 14:35:41 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Dec 2009 14:35:31 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 11CD9D36007
	for <java-user@lucene.apache.org>; Sat, 26 Dec 2009 15:35:06 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id K5GCg5bNrbFB for <java-user@lucene.apache.org>;
	Sat, 26 Dec 2009 15:34:57 +0100 (CET)
Received: from VEGA (dslb-088-065-099-245.pools.arcor-ip.net [88.65.99.245])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 53AA445F2E4
	for <java-user@lucene.apache.org>; Sat, 26 Dec 2009 15:34:57 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <4B3614BD.2070103@getopt.org>
Subject: RE: [ANN] Luke 1.0.0 for Lucene 3.0
Date: Sat, 26 Dec 2009 15:34:58 +0100
Message-ID: <22D8BC04B68441A3B47EE85E5F364BE8@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <4B3614BD.2070103@getopt.org>
Thread-Index: AcqGMpWceViLwfzYSVysh2lkuBWSDwABcYeQ
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579

Hi Andrzej,

Cool! The only thing I found that is not working is the analysis tool,
because no analyzer in lucene has a zero-arg ctor anymore. So you should use
reflection to find a one-arg ctor with o.a.l.util.Version and use it
preferably and if not existent fall back to the zero-arg ctor.

I'll open an issue.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Andrzej Bialecki [mailto:ab@getopt.org]
> Sent: Saturday, December 26, 2009 2:51 PM
> To: java-user@lucene.apache.org
> Subject: [ANN] Luke 1.0.0 for Lucene 3.0
> 
> Hi all,
> 
> I'm happy to announce that Luke 1.0.0 was released, and is available for
> download here:
> 
> 	http://code.google.com/p/luke
> 
> This version of Luke uses Lucene 3.0 jars. There were only minor changes
> in the code (and none in functionality) related to the changes in API
> between Lucene 2.9.1 and 3.0.
> 
> Your feedback is welcome - please use the Google Issue tracker to report
> issues.
> 
> Merry Christmas!
> 
> 
> --
> Best regards,
> Andrzej Bialecki     <><
>   ___. ___ ___ ___ _ _   __________________________________
> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> http://www.sigram.com  Contact: info at sigram dot com
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 26 17:46:05 2009
Return-Path: <java-user-return-44261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96253 invoked from network); 26 Dec 2009 17:46:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 26 Dec 2009 17:46:05 -0000
Received: (qmail 44753 invoked by uid 500); 26 Dec 2009 17:46:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44670 invoked by uid 500); 26 Dec 2009 17:46:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44660 invoked by uid 99); 26 Dec 2009 17:46:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Dec 2009 17:46:03 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [72.167.82.90] (HELO p3plsmtpa01-10.prod.phx3.secureserver.net) (72.167.82.90)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 26 Dec 2009 17:45:53 +0000
Received: (qmail 5328 invoked from network); 26 Dec 2009 17:45:30 -0000
Received: from unknown (213.158.199.132)
  by p3plsmtpa01-10.prod.phx3.secureserver.net (72.167.82.90) with ESMTP; 26 Dec 2009 17:45:28 -0000
Message-ID: <4B364BB1.1040507@getopt.org>
Date: Sat, 26 Dec 2009 18:45:21 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1.5) Gecko/20091204 Lightning/1.0b2pre Thunderbird/3.0
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: [ANN] Luke 1.0.0 for Lucene 3.0
References: <4B3614BD.2070103@getopt.org> <22D8BC04B68441A3B47EE85E5F364BE8@VEGA>
In-Reply-To: <22D8BC04B68441A3B47EE85E5F364BE8@VEGA>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On 2009-12-26 15:34, Uwe Schindler wrote:
> Hi Andrzej,
>
> Cool! The only thing I found that is not working is the analysis tool,
> because no analyzer in lucene has a zero-arg ctor anymore. So you should use
> reflection to find a one-arg ctor with o.a.l.util.Version and use it
> preferably and if not existent fall back to the zero-arg ctor.
 >
 > I'll open an issue.

Indeed - thanks!

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 27 11:38:18 2009
Return-Path: <java-user-return-44262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13431 invoked from network); 27 Dec 2009 11:38:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 27 Dec 2009 11:38:18 -0000
Received: (qmail 93275 invoked by uid 500); 27 Dec 2009 11:38:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92560 invoked by uid 500); 27 Dec 2009 11:38:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92473 invoked by uid 99); 27 Dec 2009 11:38:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Dec 2009 11:38:14 +0000
X-ASF-Spam-Status: No, hits=-2.5 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 209.85.160.46 as permitted sender)
Received: from [209.85.160.46] (HELO mail-pw0-f46.google.com) (209.85.160.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Dec 2009 11:38:07 +0000
Received: by pwi11 with SMTP id 11so1607777pwi.5
        for <multiple recipients>; Sun, 27 Dec 2009 03:37:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=1vEVmqgobu0UEj+Q5NFGZIV/2xwPymXprMjfIRCauHY=;
        b=OIEK4XNQfeqMRPB8brMGJpQhM+u8GulVBqYIWWSymzD/AbEFED1DYFRARPy4fqmCmt
         kEGZVnbNAnoqP3F7ca++oeE1oAbTkmnCSgePWv95vjjGBdwHxKAKwPuawOVfJIgPdd6e
         QsttU6gSc3SRRRITCSR984ywzeyKPCq7WHGAg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=osQ7hpD8k++xDhXuP11GZx+nbk8asZuZzOY6PWNifnruhBIZHbg1xgico1YUF1OTAX
         Hl6hpX5jrwvet60Jviwnx3E88qxsHacTFX8gKXiQjLRcLa3W6VxtryEV4Pe1kSTet/JJ
         PMHwXiHTT3b4vs7bwI0UOv6B78Vbugrhp3JrE=
MIME-Version: 1.0
Received: by 10.115.84.32 with SMTP id m32mr9912793wal.140.1261913867478; Sun, 
	27 Dec 2009 03:37:47 -0800 (PST)
Date: Sun, 27 Dec 2009 03:37:47 -0800
Message-ID: <8837fb770912270337vbdc63c7k8089e2096c914a72@mail.gmail.com>
Subject: TermDocs.close
From: John Wang <john.wang@gmail.com>
To: java-user@lucene.apache.org, java-dev@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64cc880cee87f047bb4372e

--0016e64cc880cee87f047bb4372e
Content-Type: text/plain; charset=ISO-8859-1

Hi:

  I see TermDocs.close not being called when created with TermQuery:
TermQuery creates it and passes to TermScorer, and is never closed.

  I see TermDocs.close actually closes the input stream.

  Is it safe not closing TermDocs?

Thanks

-John

--0016e64cc880cee87f047bb4372e--

From java-user-return-44263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 27 12:11:38 2009
Return-Path: <java-user-return-44263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18282 invoked from network); 27 Dec 2009 12:11:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 27 Dec 2009 12:11:37 -0000
Received: (qmail 859 invoked by uid 500); 27 Dec 2009 12:11:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 694 invoked by uid 500); 27 Dec 2009 12:11:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 673 invoked by uid 99); 27 Dec 2009 12:11:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Dec 2009 12:11:34 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Dec 2009 12:11:26 +0000
Received: by yxe30 with SMTP id 30so11056480yxe.29
        for <multiple recipients>; Sun, 27 Dec 2009 04:11:04 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.76.30 with SMTP id y30mr21240295yba.104.1261915864841; 
	Sun, 27 Dec 2009 04:11:04 -0800 (PST)
In-Reply-To: <8837fb770912270337vbdc63c7k8089e2096c914a72@mail.gmail.com>
References: <8837fb770912270337vbdc63c7k8089e2096c914a72@mail.gmail.com>
Date: Sun, 27 Dec 2009 07:11:04 -0500
Message-ID: <9ac0c6aa0912270411n776790c9n6e172d8f9faf2f34@mail.gmail.com>
Subject: Re: TermDocs.close
From: Michael McCandless <lucene@mikemccandless.com>
To: java-dev@lucene.apache.org
Cc: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

It's confusing... but it is in fact safe not closing it (for Lucene's
core IndexReader impls) -- because the IndexInputs that
SegmentTermDocs/Positions use are clones, their close methods are a
no-op.

Mike

On Sun, Dec 27, 2009 at 6:37 AM, John Wang <john.wang@gmail.com> wrote:
> Hi:
> =A0=A0I see TermDocs.close not being called when created with TermQuery:
> TermQuery creates it and passes to TermScorer, and is never closed.
> =A0=A0I see TermDocs.close actually closes the input stream.
> =A0=A0Is it safe not closing TermDocs?
> Thanks
> -John

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 27 12:19:41 2009
Return-Path: <java-user-return-44264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19644 invoked from network); 27 Dec 2009 12:19:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 27 Dec 2009 12:19:41 -0000
Received: (qmail 5303 invoked by uid 500); 27 Dec 2009 12:19:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5227 invoked by uid 500); 27 Dec 2009 12:19:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5217 invoked by uid 99); 27 Dec 2009 12:19:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Dec 2009 12:19:39 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.217.225] (HELO mail-gx0-f225.google.com) (209.85.217.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Dec 2009 12:19:32 +0000
Received: by gxk25 with SMTP id 25so2789477gxk.5
        for <java-user@lucene.apache.org>; Sun, 27 Dec 2009 04:19:11 -0800 (PST)
MIME-Version: 1.0
Received: by 10.151.25.9 with SMTP id c9mr20186641ybj.1.1261916350848; Sun, 27 
	Dec 2009 04:19:10 -0800 (PST)
In-Reply-To: <E51D1E28002244CA9D692AF2726BE216@elias>
References: <E51D1E28002244CA9D692AF2726BE216@elias>
Date: Sun, 27 Dec 2009 07:19:10 -0500
Message-ID: <9ac0c6aa0912270419p3839ac8fs82db1b0871dd74a8@mail.gmail.com>
Subject: Re: BooleanScorer
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

BooleanQuery uses BooleanScorer when possible because that gives
better performance than BooleanScorer2.

If you really want to force it, you'd need to create the weight/scorer
yourself, passing "true" for scoreDocsInOrder.  Alternatively, you
could make your collector, for example wrapping another collector,
that returns "false" for acceptsDocsOutOfOrder.

But: why do you need/want to do this?

Mike

On Fri, Dec 25, 2009 at 4:46 PM, Elias Khsheibun <elias3@gmail.com> wrote:
> When I write the following query:
>
> "Computer AND Science" - the code that is in BooleanScorer2 is invoked, and
> when I write "Computer OR Science" the code in BooleanScorer is invoked. How
> can I make the OR (the conjunctive query) to use the BooleanScorer2 and not
> BooleanScorer, which is the new implementation.
>
>
> Elias.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 27 20:50:03 2009
Return-Path: <java-user-return-44265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42149 invoked from network); 27 Dec 2009 20:50:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 27 Dec 2009 20:50:02 -0000
Received: (qmail 27432 invoked by uid 500); 27 Dec 2009 20:50:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27347 invoked by uid 500); 27 Dec 2009 20:50:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27337 invoked by uid 99); 27 Dec 2009 20:50:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Dec 2009 20:50:00 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aseldawy@gmail.com designates 209.85.218.222 as permitted sender)
Received: from [209.85.218.222] (HELO mail-bw0-f222.google.com) (209.85.218.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Dec 2009 20:49:52 +0000
Received: by bwz22 with SMTP id 22so6469405bwz.5
        for <java-user@lucene.apache.org>; Sun, 27 Dec 2009 12:49:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:from:date:message-id
         :subject:to:content-type;
        bh=6VlhoCqBnRKjy03/N/BKqlmCrHgKd1QQ7NQ3T0Ca/ag=;
        b=s+ZqjwUbu2DwY+kTrBi4E8hZsDq5cxXyqi0BtlnQExY488YYB8H69pM8e/mwSh8ToV
         Diwdt+u6wsRdAvIHuUiDPvdO2VJgjbeg38fjOC6FKUyYLoRx5VPV5DmEOL3qE33yTtTx
         CLVDyP0ft8lk46ApFe9t4XiqwVKDGOul9Nnv8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=CqS9HK94niGjJfMwLOMV6FcD+s4UE2Q8JZMurLH3/6AqsPxGGmq4VIm3Sm7zIFLZws
         zX1bklKSE9dl+42gFicoXEQwh9kK0ataZw6rj/laXi9WBF6/0qadzX8AmtCf4F74H2Pd
         kxcLqw/hOVg4J0sfApdgByzanBE8cWO4N0LGM=
MIME-Version: 1.0
Received: by 10.204.157.26 with SMTP id z26mr501655bkw.124.1261946972144; Sun, 
	27 Dec 2009 12:49:32 -0800 (PST)
From: Ahmed El-dawy <aseldawy@gmail.com>
Date: Sun, 27 Dec 2009 22:49:12 +0200
Message-ID: <e5de07e90912271249g25a0f8e4u49c3fb03d3ecd458@mail.gmail.com>
Subject: Using the new tokenizer API from a jar file
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175d0a4c0005e7047bbbed38
X-Virus-Checked: Checked by ClamAV on apache.org

--0015175d0a4c0005e7047bbbed38
Content-Type: text/plain; charset=UTF-8

Hello all,
  I've built a tokenizer which uses the new tokenizer API (the one with the
Decorator Pattern). I built a new AttributeReader called GlossAttribute and
GlossAttributeImpl. I packaged it into a jar file and it's working very
fine.
I tried to use it with solr and the problems began. It's always telling me
that it cannot find the class GlossAttributeImpl. I think the problem is
that my jar file is added to the class path at run time not from the command
line. Do you have a good solution or workaround?

-- 
regards,
Ahmed Saad

--0015175d0a4c0005e7047bbbed38--

From java-user-return-44266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 27 21:23:55 2009
Return-Path: <java-user-return-44266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49918 invoked from network); 27 Dec 2009 21:23:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 27 Dec 2009 21:23:55 -0000
Received: (qmail 59533 invoked by uid 500); 27 Dec 2009 21:23:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59451 invoked by uid 500); 27 Dec 2009 21:23:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59441 invoked by uid 99); 27 Dec 2009 21:23:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Dec 2009 21:23:53 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Dec 2009 21:23:42 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id DAFD4D36009
	for <java-user@lucene.apache.org>; Sun, 27 Dec 2009 22:23:18 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Hkqkhj8hLHcw for <java-user@lucene.apache.org>;
	Sun, 27 Dec 2009 22:23:09 +0100 (CET)
Received: from VEGA (dslb-092-074-067-174.pools.arcor-ip.net [92.74.67.174])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id C9648D36008
	for <java-user@lucene.apache.org>; Sun, 27 Dec 2009 22:23:08 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <e5de07e90912271249g25a0f8e4u49c3fb03d3ecd458@mail.gmail.com>
Subject: RE: Using the new tokenizer API from a jar file
Date: Sun, 27 Dec 2009 22:23:11 +0100
Message-ID: <41812C8A432F4FE3A13E71A4708D7C2C@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <e5de07e90912271249g25a0f8e4u49c3fb03d3ecd458@mail.gmail.com>
Thread-Index: AcqHNjRdRtWfY3NnRJ6nEra2NzUG0gABD3DA
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579

Where did you place the jar file inside Solr on which servlet container? I
suspect some strange classloader problems. As the attributes are loaded by
lucene, the impl should be available from classes inside lucene-core.jar
file and placed in the same classpath of the lucene-core.jar classloader.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Ahmed El-dawy [mailto:aseldawy@gmail.com]
> Sent: Sunday, December 27, 2009 9:49 PM
> To: java-user@lucene.apache.org
> Subject: Using the new tokenizer API from a jar file
> 
> Hello all,
>   I've built a tokenizer which uses the new tokenizer API (the one with
> the
> Decorator Pattern). I built a new AttributeReader called GlossAttribute
> and
> GlossAttributeImpl. I packaged it into a jar file and it's working very
> fine.
> I tried to use it with solr and the problems began. It's always telling me
> that it cannot find the class GlossAttributeImpl. I think the problem is
> that my jar file is added to the class path at run time not from the
> command
> line. Do you have a good solution or workaround?
> 
> --
> regards,
> Ahmed Saad


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 27 22:48:46 2009
Return-Path: <java-user-return-44267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78271 invoked from network); 27 Dec 2009 22:48:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 27 Dec 2009 22:48:46 -0000
Received: (qmail 88538 invoked by uid 500); 27 Dec 2009 22:48:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88441 invoked by uid 500); 27 Dec 2009 22:48:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88431 invoked by uid 99); 27 Dec 2009 22:48:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Dec 2009 22:48:43 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Dec 2009 22:48:34 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NP1uH-0006ZC-TJ
	for java-user@lucene.apache.org; Sun, 27 Dec 2009 14:48:13 -0800
Message-ID: <26937880.post@talk.nabble.com>
Date: Sun, 27 Dec 2009 14:48:13 -0800 (PST)
From: syedfa <fayyazuddin@gmail.com>
To: java-user@lucene.apache.org
Subject: Basic question about indexing certain words
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fayyazuddin@gmail.com


Dear fellow Java developers:

I have a very basic question about indexing text using Lucene.  I am
indexing a large amount of text, that includes names that contain certain
punctuation (eg. "Jane Doe-Smith", "Sa'eed", etc.)  Will the punctuation
throw off the indexer in any way, such that it breaks up the tokens when
they shouldn't be, or will the indexer simply treat the punctuation inside
the names as any other character, and the presence of the punctuation will
not in any way hinder a user's ability to search for that name?  Are there
any precautions that I should take to avoid any problems?  

I hope this question is clear and makes sense. 

Thanks in advance to all who reply.

-- 
View this message in context: http://old.nabble.com/Basic-question-about-indexing-certain-words-tp26937880p26937880.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 27 23:12:45 2009
Return-Path: <java-user-return-44268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83371 invoked from network); 27 Dec 2009 23:12:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 27 Dec 2009 23:12:45 -0000
Received: (qmail 7093 invoked by uid 500); 27 Dec 2009 23:12:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7012 invoked by uid 500); 27 Dec 2009 23:12:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7002 invoked by uid 99); 27 Dec 2009 23:12:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Dec 2009 23:12:43 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.219.225 as permitted sender)
Received: from [209.85.219.225] (HELO mail-ew0-f225.google.com) (209.85.219.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Dec 2009 23:12:33 +0000
Received: by ewy25 with SMTP id 25so12195365ewy.5
        for <java-user@lucene.apache.org>; Sun, 27 Dec 2009 15:12:12 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=XjTSQ1/XjKXq6NL8BrjdnvqmTyK92+W7DRO6AUsrlFI=;
        b=nmQc0JxeFIGNAw85DZTqNOYXQj/0GSYtAaXw2eyblvjlScaye+bmZ0S8iNrS+vwLHE
         T+NwZAtsLfsswdCk+SwF+0X0iE06jufvlzNMMboXRTQn+pR0Yi/tzB7DForRl6uhrUzo
         56+EhDJVhMuKXPwFOZJf5oipj/s6xDbgtmFIA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=tkPp12b8NlUuOdsQ7gBAZW2U9JPKzQ4l6/91DkIBf9Q9jgwFMCJtefqp+um1cEfAxl
         cKctfXLvT07l5R0/7pZbb7Y+mtTB1czMIb7MQvazTxEFd9CklIgwSGxGaW607gh3G+TR
         Ei20f9FlN28XWgqE1r/vfUJxjMojDudllZEpI=
MIME-Version: 1.0
Received: by 10.216.88.83 with SMTP id z61mr5058339wee.140.1261955532185; Sun, 
	27 Dec 2009 15:12:12 -0800 (PST)
In-Reply-To: <26937880.post@talk.nabble.com>
References: <26937880.post@talk.nabble.com>
Date: Sun, 27 Dec 2009 18:12:12 -0500
Message-ID: <359a92830912271512mbd09a30pf2aeaa7a0a3da07f@mail.gmail.com>
Subject: Re: Basic question about indexing certain words
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d6417737df13047bbdebe2

--0016e6d6417737df13047bbdebe2
Content-Type: text/plain; charset=ISO-8859-1

It depends completely on what analyzer you use. Conceptually, an Analyzer
is composed of a Tokenizer followed by any number of Filters. So the
input stream is broken up by the Tokenizer, then each token has one or
more Filters applied (e.g. LowerCaseFilter, StopWordFilter)..

The reason I'm not answering your question directly is that I can't. If you
choose, say, a WhitespaceAnalyzer, which is built from a
WhitespaceTokenizer,
then your hyphens and apostrophes will pass through as-is, and your tokens
(the minimal searchable unit) will be "Jane" "Doe-Smith" and "Sa'eed",
capitals
and all.

If you choose StandardAnalyzer, built on StandardTokenizer and several
filters
your tokens would be "jane" "doe" "smith" "sa" "eed" (note lower-casing as
well).

You can build your own Analyzers to process text however you please. Lucene
In Action has quite a thorough explanation of this process, you'll save
yourself
a bunch of time by reading those sections. You can get the second edition
of that book in electronic form from Manning through their early access
program.

Until you understand this process well, I'd recommend that you be very, very
sure that you use the *same* analyzer for both indexing and searching or
your
results will be...surprising.

Think about getting a copy of Luke to examine your indexes, that tool makes
it
easy to see the effects of various Analyzers. Google Lucene Luke....

Finally, you can easily use *different* analyzers for different fields
within a
document, see PerFieldAnalyzerWrapper.

HTH
Erick

On Sun, Dec 27, 2009 at 5:48 PM, syedfa <fayyazuddin@gmail.com> wrote:

>
> Dear fellow Java developers:
>
> I have a very basic question about indexing text using Lucene.  I am
> indexing a large amount of text, that includes names that contain certain
> punctuation (eg. "Jane Doe-Smith", "Sa'eed", etc.)  Will the punctuation
> throw off the indexer in any way, such that it breaks up the tokens when
> they shouldn't be, or will the indexer simply treat the punctuation inside
> the names as any other character, and the presence of the punctuation will
> not in any way hinder a user's ability to search for that name?  Are there
> any precautions that I should take to avoid any problems?
>
> I hope this question is clear and makes sense.
>
> Thanks in advance to all who reply.
>
> --
> View this message in context:
> http://old.nabble.com/Basic-question-about-indexing-certain-words-tp26937880p26937880.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6d6417737df13047bbdebe2--

From java-user-return-44269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 27 23:20:18 2009
Return-Path: <java-user-return-44269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84649 invoked from network); 27 Dec 2009 23:20:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 27 Dec 2009 23:20:18 -0000
Received: (qmail 11776 invoked by uid 500); 27 Dec 2009 23:20:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11681 invoked by uid 500); 27 Dec 2009 23:20:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11671 invoked by uid 99); 27 Dec 2009 23:20:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Dec 2009 23:20:15 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Dec 2009 23:20:06 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NP2On-0000ME-3y
	for java-user@lucene.apache.org; Sun, 27 Dec 2009 15:19:45 -0800
Message-ID: <26938117.post@talk.nabble.com>
Date: Sun, 27 Dec 2009 15:19:45 -0800 (PST)
From: syedfa <fayyazuddin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Basic question about indexing certain words
In-Reply-To: <359a92830912271512mbd09a30pf2aeaa7a0a3da07f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fayyazuddin@gmail.com
References: <26937880.post@talk.nabble.com> <359a92830912271512mbd09a30pf2aeaa7a0a3da07f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks very much for such a detailed reply, I didn't realize that there was
so much to this subject.  I understand the issue a bit better now!

Take care.


Erick Erickson wrote:
> 
> It depends completely on what analyzer you use. Conceptually, an Analyzer
> is composed of a Tokenizer followed by any number of Filters. So the
> input stream is broken up by the Tokenizer, then each token has one or
> more Filters applied (e.g. LowerCaseFilter, StopWordFilter)..
> 
> The reason I'm not answering your question directly is that I can't. If
> you
> choose, say, a WhitespaceAnalyzer, which is built from a
> WhitespaceTokenizer,
> then your hyphens and apostrophes will pass through as-is, and your tokens
> (the minimal searchable unit) will be "Jane" "Doe-Smith" and "Sa'eed",
> capitals
> and all.
> 
> If you choose StandardAnalyzer, built on StandardTokenizer and several
> filters
> your tokens would be "jane" "doe" "smith" "sa" "eed" (note lower-casing as
> well).
> 
> You can build your own Analyzers to process text however you please.
> Lucene
> In Action has quite a thorough explanation of this process, you'll save
> yourself
> a bunch of time by reading those sections. You can get the second edition
> of that book in electronic form from Manning through their early access
> program.
> 
> Until you understand this process well, I'd recommend that you be very,
> very
> sure that you use the *same* analyzer for both indexing and searching or
> your
> results will be...surprising.
> 
> Think about getting a copy of Luke to examine your indexes, that tool
> makes
> it
> easy to see the effects of various Analyzers. Google Lucene Luke....
> 
> Finally, you can easily use *different* analyzers for different fields
> within a
> document, see PerFieldAnalyzerWrapper.
> 
> HTH
> Erick
> 
> On Sun, Dec 27, 2009 at 5:48 PM, syedfa <fayyazuddin@gmail.com> wrote:
> 
>>
>> Dear fellow Java developers:
>>
>> I have a very basic question about indexing text using Lucene.  I am
>> indexing a large amount of text, that includes names that contain certain
>> punctuation (eg. "Jane Doe-Smith", "Sa'eed", etc.)  Will the punctuation
>> throw off the indexer in any way, such that it breaks up the tokens when
>> they shouldn't be, or will the indexer simply treat the punctuation
>> inside
>> the names as any other character, and the presence of the punctuation
>> will
>> not in any way hinder a user's ability to search for that name?  Are
>> there
>> any precautions that I should take to avoid any problems?
>>
>> I hope this question is clear and makes sense.
>>
>> Thanks in advance to all who reply.
>>
>> --
>> View this message in context:
>> http://old.nabble.com/Basic-question-about-indexing-certain-words-tp26937880p26937880.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://old.nabble.com/Basic-question-about-indexing-certain-words-tp26937880p26938117.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 28 03:27:10 2009
Return-Path: <java-user-return-44270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44382 invoked from network); 28 Dec 2009 03:27:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Dec 2009 03:27:09 -0000
Received: (qmail 86209 invoked by uid 500); 28 Dec 2009 03:27:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86063 invoked by uid 500); 28 Dec 2009 03:27:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86053 invoked by uid 99); 28 Dec 2009 03:27:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Dec 2009 03:27:06 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Dec 2009 03:26:58 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 65C1771C895; Sun, 27 Dec 2009 19:26:37 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 6256071C888
	for <java-user@lucene.apache.org>; Sun, 27 Dec 2009 19:26:37 -0800 (PST)
Date: Sun, 27 Dec 2009 19:26:37 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Using the new tokenizer API from a jar file
In-Reply-To: <e5de07e90912271249g25a0f8e4u49c3fb03d3ecd458@mail.gmail.com>
Message-ID: <Pine.LNX.4.64.0912271923370.12519@radix.cryptio.net>
References: <e5de07e90912271249g25a0f8e4u49c3fb03d3ecd458@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I tried to use it with solr and the problems began. It's always telling me
: that it cannot find the class GlossAttributeImpl. I think the problem is
: that my jar file is added to the class path at run time not from the command
: line. Do you have a good solution or workaround?

You're likely to get mmore helpful answers from other people in the Solr 
User community (solr-user@lucene.a.o)

As long as you put your jar in the "lib" directory under your solr home 
(or refrence it using a <lib/> directive in your solrconfig.xml) Solr's 
plugin loader will take care of hte classloading for you.

if you are confident you have your jar in the correct place, please email 
solr-user with the ClassNotFound stack trace from your solr logs, as well 
as hierarchy  of files from your solr home (ie: the output of "find .")


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 28 06:42:41 2009
Return-Path: <java-user-return-44271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1678 invoked from network); 28 Dec 2009 06:42:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Dec 2009 06:42:41 -0000
Received: (qmail 47547 invoked by uid 500); 28 Dec 2009 06:42:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47378 invoked by uid 500); 28 Dec 2009 06:42:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47368 invoked by uid 99); 28 Dec 2009 06:42:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Dec 2009 06:42:33 +0000
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.221.203] (HELO mail-qy0-f203.google.com) (209.85.221.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Dec 2009 06:42:24 +0000
Received: by qyk41 with SMTP id 41so4809464qyk.29
        for <java-user@lucene.apache.org>; Sun, 27 Dec 2009 22:42:03 -0800 (PST)
Received: by 10.224.39.70 with SMTP id f6mr7320966qae.341.1261982523021;
        Sun, 27 Dec 2009 22:42:03 -0800 (PST)
Received: from ?192.168.2.171? (c-66-31-203-104.hsd1.ma.comcast.net [66.31.203.104])
        by mx.google.com with ESMTPS id 8sm30933810qwj.13.2009.12.27.22.42.01
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sun, 27 Dec 2009 22:42:02 -0800 (PST)
Sender: Ben Jiang <ben@nexiwave.com>
Message-ID: <4B385338.9000707@gmail.com>
Date: Mon, 28 Dec 2009 01:42:00 -0500
From: Ben Jiang <ben.jiang@gmail.com>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: SpanScorer example with lucene 3.0.0
Content-Type: multipart/alternative;
 boundary="------------010706030005030905090507"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------010706030005030905090507
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi, there,

first of all, thanks for the awesome work!

We have migrated to lucene 3.0. We are very tempted to use SpanQuery, as 
it seems to favor document ranking based on proximity (eg, within a 
document, the distance of the matches is important to the document 
ranking, or even the most important factor). I have tried with Surround 
query parser to create SpanQuery. It did give the right document matches.

My problem is with the highlighter package. If I used the default 
QueryScorer does not give any hits with the query, even though there 
were matching documents.

I did ton of searches and it seemed that the highlighter package should 
have worked with SpanQuery before (2.4.0).

My questions:

    * is QueryScorer the right scorer? Should I use SpanScorer?
    * If SpanScorer is the right class, there is no example about how to
      use SpanScorer. Can someone point an example?

This seems to be quite some changes since 2.9.0. The old SpanScorer from 
highlighter package has been moved to the lucene core. I would 
appreciate if someone can help out here.


Thanks in advance

Ben

--------------010706030005030905090507--

From java-user-return-44272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 28 07:36:22 2009
Return-Path: <java-user-return-44272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10094 invoked from network); 28 Dec 2009 07:36:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Dec 2009 07:36:22 -0000
Received: (qmail 64516 invoked by uid 500); 28 Dec 2009 07:36:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64437 invoked by uid 500); 28 Dec 2009 07:36:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64427 invoked by uid 99); 28 Dec 2009 07:36:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Dec 2009 07:36:19 +0000
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=MIME_BASE64_BLANKS,MIME_BASE64_TEXT,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [125.35.5.175] (HELO mailgate1.ufsoft.com.cn) (125.35.5.175)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 28 Dec 2009 07:36:10 +0000
X-MAILFROM: <liujb@ufida.com.cn>
X-RCPTTO: <java-user@lucene.apache.org>
X-FROMIP: 172.16.3.5
X-EQManager-Scaned: 1
X-Received:unknown,172.16.3.5,20091228151744
Received: from unknown (HELO dev.ufida.com.cn) (172.16.3.5)
  by localhost with SMTP; 28 Dec 2009 07:17:44 -0000
X-scanvirus: By EQAVSE AntiVirus Engine
X-scanresult: CLEAN
X-MAILFROM: <liujb@ufida.com.cn>
X-RCPTTO: <java-user@lucene.apache.org>
X-FROMIP: 20.1.78.46
X-EQManager-Scaned: 1
X-EQAUTHUSER: liujb
X-Received:unknown,20.1.78.46,20091228143530
Received: from unknown (HELO owindliujb) (liujb@20.1.78.46)
  by localhost with SMTP; 28 Dec 2009 06:35:30 -0000
Message-ID: <00e801ca8790$4ca2ab90$1b4f010a@ufsoft.com.cn>
From: "liujb" <liujb@ufida.com.cn>
To: <java-user@lucene.apache.org>
References: <4B385338.9000707@gmail.com>
Subject: Re: SpanScorer example with lucene 3.0.0
Date: Mon, 28 Dec 2009 15:35:16 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="ISO-8859-1"
Content-Transfer-Encoding: base64
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3350
X-Virus-Checked: Checked by ClamAV on apache.org

b2gsbXkgZ29kLA0KDQpRdWVyeSBQYXJzZXIgU3ludGF4IA0KDQpDQU5OT1QgdXNlIGEgKiBvciA/
IHN5bWJvbCBhcyB0aGUgZmlyc3QgY2hhcmFjdGVyIG9mIGEgc2VhcmNoLg0KDQp0aGF0J3MgbWVh
biBJIGNhbid0IHdyaW50ZSBhIHNlYXJjaCBzdHJpbmcgbGlrZSAnKnRlc3QnLiB0aGlzIHdpbGwg
YmUgY2F1c2UgYSBncmVhdCByZXN0cmljdGlvbiB0byB1c2UgbHVjZW5jZS4NCmJ1dCAsdGhhdCdz
IGEgcmVhbGx5IGEgaW1wb3J0YW50IHNlYXJjaCBzY2VuZS4NCg0KY2FuIHlvdSBnaXZlIG1lIHNv
bWUgYWR2aWNlIG9uIHRoaXMgcHJvYmxlbS4NCg0KdGtzLg0KDQoNCi0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tDQpvd2luZA0K





From java-user-return-44273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 28 07:47:07 2009
Return-Path: <java-user-return-44273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11259 invoked from network); 28 Dec 2009 07:47:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Dec 2009 07:47:07 -0000
Received: (qmail 72632 invoked by uid 500); 28 Dec 2009 07:47:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72551 invoked by uid 500); 28 Dec 2009 07:47:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72541 invoked by uid 99); 28 Dec 2009 07:47:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Dec 2009 07:47:04 +0000
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=MIME_BASE64_BLANKS,MIME_BASE64_TEXT,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [125.35.5.175] (HELO mailgate1.ufsoft.com.cn) (125.35.5.175)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 28 Dec 2009 07:46:55 +0000
X-MAILFROM: <liujb@ufida.com.cn>
X-RCPTTO: <java-user@lucene.apache.org>
X-FROMIP: 172.16.3.5
X-EQManager-Scaned: 1
X-Received:unknown,172.16.3.5,20091228152841
Received: from unknown (HELO dev.ufida.com.cn) (172.16.3.5)
  by localhost with SMTP; 28 Dec 2009 07:28:41 -0000
X-scanvirus: By EQAVSE AntiVirus Engine
X-scanresult: CLEAN
X-MAILFROM: <liujb@ufida.com.cn>
X-RCPTTO: <java-user@lucene.apache.org>
X-FROMIP: 20.1.78.46
X-EQManager-Scaned: 1
X-EQAUTHUSER: liujb
X-Received:unknown,20.1.78.46,20091228144627
Received: from unknown (HELO owindliujb) (liujb@20.1.78.46)
  by localhost with SMTP; 28 Dec 2009 06:46:27 -0000
Message-ID: <010301ca8791$d361cc50$1b4f010a@ufsoft.com.cn>
From: "liujb" <liujb@ufida.com.cn>
To: <java-user@lucene.apache.org>
References: <4B385338.9000707@gmail.com> <00e801ca8790$4ca2ab90$1b4f010a@ufsoft.com.cn>
Subject: CANNOT use a * or ? symbol as the first character of a search.
Date: Mon, 28 Dec 2009 15:46:11 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="ISO-8859-1"
Content-Transfer-Encoding: base64
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3350
X-Virus-Checked: Checked by ClamAV on apache.org

b2gsbXkgZ29kLA0KDQpRdWVyeSBQYXJzZXIgU3ludGF4IA0KDQpDQU5OT1QgdXNlIGEgKiBvciA/
IHN5bWJvbCBhcyB0aGUgZmlyc3QgY2hhcmFjdGVyIG9mIGEgc2VhcmNoLg0KDQp0aGF0J3MgbWVh
biBJIGNhbid0IHdyaW50ZSBhIHNlYXJjaCBzdHJpbmcgbGlrZSAnKnRlc3QnLiB0aGlzIHdpbGwg
YmUgY2F1c2UgYSBncmVhdCByZXN0cmljdGlvbiB0byB1c2UgbHVjZW5jZS4NCmJ1dCAsdGhhdCdz
IGEgcmVhbGx5IGEgaW1wb3J0YW50IHNlYXJjaCBzY2VuZS4NCg0KY2FuIHlvdSBnaXZlIG1lIHNv
bWUgYWR2aWNlIG9uIHRoaXMgcHJvYmxlbS4NCg0KdGtzLg0KDQoNCm93aW5kLg0K





From java-user-return-44274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 28 08:20:30 2009
Return-Path: <java-user-return-44274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17779 invoked from network); 28 Dec 2009 08:20:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Dec 2009 08:20:30 -0000
Received: (qmail 89547 invoked by uid 500); 28 Dec 2009 08:20:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89460 invoked by uid 500); 28 Dec 2009 08:20:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89442 invoked by uid 99); 28 Dec 2009 08:20:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Dec 2009 08:20:27 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Dec 2009 08:20:17 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id F2FA6D3600A;
	Mon, 28 Dec 2009 09:19:54 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id u6gOVgyO6+z0; Mon, 28 Dec 2009 09:19:44 +0100 (CET)
Received: from VEGA (dslb-088-065-082-074.pools.arcor-ip.net [88.65.82.74])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 3C46ED36009;
	Mon, 28 Dec 2009 09:19:44 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
Cc: <solr-user@lucene.apache.org>
References: <e5de07e90912271249g25a0f8e4u49c3fb03d3ecd458@mail.gmail.com> <Pine.LNX.4.64.0912271923370.12519@radix.cryptio.net>
Subject: RE: Using the new tokenizer API from a jar file
Date: Mon, 28 Dec 2009 09:19:47 +0100
Message-ID: <7054C18D96924AA187F6D3A3FBDFC8DB@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <Pine.LNX.4.64.0912271923370.12519@radix.cryptio.net>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
Thread-Index: AcqHbarJn86+HVz7RZuAx5ofMqPihAAJqrgg

The question on this list was ok,as it shows a minor problem of using the
new TokenStream API with Solr.

His plugin was loaded correctly, because if Lucene says, that it cannot find
the *Impl class, it was able to load the interface class before -> the JAR
file is "visible" to the JVM.

The problem is the following and has to do with classloaders:

1. We have different class loaders for different places in Solr. Solr uses
for plugins a SolrResourceLoader that searches for JAR files in the local
lib folder before handling over to the webapp's classloader.

2. Initially, the lucene JAR is loaded by the Webapp's class loader

3. If a AttributeImpl is placed into a jar file e.g. in the plugin folder of
solr (the lib folder where solr loads all resources, stop words,...), the
loading mechanism inside AttributeSource.DEFAULT_ATTRIBUTE_FACTORY is unable
to locate the class file, because Class.forName() always uses the class'
classloader and not the global/thread one's. So AttributeSource will only
find the class file if it is in the *same* directory as the lucene-core.jar
file (WEB-INF/lib) and so accessible by the webapp's class loader.

A good introduction about the problem is this one:
http://www.theserverside.com/tt/articles/content/dm_classForname/DynLoad.pdf

The problem is here described for the JVM extensions folder but also applies
to solr, because it has another classloader for plugins.

A solution to fix this would be in lucene to use the thread's context class
loader in AttributeSource.DEFAULT_ATTRIBUTE_FACTORY, but I strongly
discourage this, as it would break the whole AttributeSource functionality
if you add two different attributes with same class names from different
class loaders to the AttributeSource.

The only solution to the problem is placing the JAR file inside the
WEB-INF/lib folder where lucene-core.jar is. Plugins in Solr cannot define
own attribute implementations. Alternatively he could try to force preload
the class by calling Class.forName in his plugin initialization code on the
Impl class. But I am not sure if this works (as Java handles classes from
different classloaders different).

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
> Sent: Monday, December 28, 2009 4:27 AM
> To: java-user@lucene.apache.org
> Subject: Re: Using the new tokenizer API from a jar file
> 
> 
> : I tried to use it with solr and the problems began. It's always telling
> me
> : that it cannot find the class GlossAttributeImpl. I think the problem is
> : that my jar file is added to the class path at run time not from the
> command
> : line. Do you have a good solution or workaround?
> 
> You're likely to get mmore helpful answers from other people in the Solr
> User community (solr-user@lucene.a.o)
> 
> As long as you put your jar in the "lib" directory under your solr home
> (or refrence it using a <lib/> directive in your solrconfig.xml) Solr's
> plugin loader will take care of hte classloading for you.
> 
> if you are confident you have your jar in the correct place, please email
> solr-user with the ClassNotFound stack trace from your solr logs, as well
> as hierarchy  of files from your solr home (ie: the output of "find .")
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 28 08:49:48 2009
Return-Path: <java-user-return-44275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24138 invoked from network); 28 Dec 2009 08:49:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Dec 2009 08:49:47 -0000
Received: (qmail 6382 invoked by uid 500); 28 Dec 2009 08:49:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6309 invoked by uid 500); 28 Dec 2009 08:49:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6299 invoked by uid 99); 28 Dec 2009 08:49:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Dec 2009 08:49:45 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shashi.mit@gmail.com designates 74.125.78.24 as permitted sender)
Received: from [74.125.78.24] (HELO ey-out-2122.google.com) (74.125.78.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Dec 2009 08:49:38 +0000
Received: by ey-out-2122.google.com with SMTP id 4so819765eyf.5
        for <java-user@lucene.apache.org>; Mon, 28 Dec 2009 00:49:17 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:received:in-reply-to
         :references:from:date:x-google-sender-auth:message-id:subject:to
         :content-type:content-transfer-encoding;
        bh=uetxuRtvv4DG54hLfoYTACynsTibKxptgSpOK03+NE4=;
        b=q1MYEFQktC3cJH/ArfQKE06M8mK/djkNmYGrvbDFvC885LBTaUQfMZORtOryzYElFG
         QXLnHkOqkJpXtEw0ZzjgzIokfbji/zdGBgr392u5ZHGwYHxD4/YGNY4pmvwIK3ZFfdmG
         qLRhecK1iJvAN3mdc0Eo6rmBBaKxLHtqx53MI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:in-reply-to:references:from:date
         :x-google-sender-auth:message-id:subject:to:content-type
         :content-transfer-encoding;
        b=VjekydL2Rq1Y24G7s53q0qf+8IQg3Op8JWMgfnRdbiqycQR18IAcNqE56TN9FNRxkH
         ztFM+7Wqz9VGhDtzszAweG6537vpd9EKYh0KWpx70KF453zjL6Vhm3G3sHGD3xgzxdvo
         +A4zypnR5y2NZtaFTxzaFzM4RtBLGs1yQ6YtM=
MIME-Version: 1.0
Sender: shashi.mit@gmail.com
Received: by 10.216.86.137 with SMTP id w9mr759824wee.104.1261990157144; Mon, 
	28 Dec 2009 00:49:17 -0800 (PST)
In-Reply-To: <010301ca8791$d361cc50$1b4f010a@ufsoft.com.cn>
References: <4B385338.9000707@gmail.com> <00e801ca8790$4ca2ab90$1b4f010a@ufsoft.com.cn> 
	<010301ca8791$d361cc50$1b4f010a@ufsoft.com.cn>
From: Shashi Kant <skant@sloan.mit.edu>
Date: Mon, 28 Dec 2009 03:48:57 -0500
X-Google-Sender-Auth: 4e0b9bf59f051b55
Message-ID: <4d19a3630912280048h5ffe86eegc4a81c71f3fee2d1@mail.gmail.com>
Subject: Re: CANNOT use a * or ? symbol as the first character of a search.
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

You can enable that by

QueryParser.setAllowLeadingWildcard(=A0true=A0)


On Mon, Dec 28, 2009 at 2:46 AM, liujb <liujb@ufida.com.cn> wrote:
>
> oh,my god,
>
> Query Parser Syntax
>
> CANNOT use a * or ? symbol as the first character of a search.
>
> that's mean I can't wrinte a search string like '*test'. this will be cau=
se a great restriction to use lucence.
> but ,that's a really a important search scene.
>
> can you give me some advice on this problem.
>
> tks.
>
>
> owind.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 28 09:03:00 2009
Return-Path: <java-user-return-44276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26974 invoked from network); 28 Dec 2009 09:03:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Dec 2009 09:03:00 -0000
Received: (qmail 18060 invoked by uid 500); 28 Dec 2009 09:02:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17987 invoked by uid 500); 28 Dec 2009 09:02:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17977 invoked by uid 99); 28 Dec 2009 09:02:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Dec 2009 09:02:57 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anshumg@gmail.com designates 209.85.216.186 as permitted sender)
Received: from [209.85.216.186] (HELO mail-px0-f186.google.com) (209.85.216.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Dec 2009 09:02:49 +0000
Received: by pxi16 with SMTP id 16so3462060pxi.20
        for <java-user@lucene.apache.org>; Mon, 28 Dec 2009 01:02:28 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type;
        bh=hlqsDyn2HEUjk50kkYtpfDpUk8Dfgg/U5nsoxGOVIp4=;
        b=dDozn1n22ky9uaNVCtuLWMCgmeF/CrlA2YizyzOr9EIKzpeXhZkHwHgATQnJIoM4h3
         Nbk4sZcNuMV6oaNS10j9kQAO3YgJV13Qn+5bPXNBhi1OYBHu5k4Rjvug9rNmcZd6kwJL
         Dh3b2Eib4/4HqC0TXPRHN3nLuqsdven3d/4zM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=g6kUKdLzD9V/mLLDc1nNeavVvsIswjE+aP8+cRv2JkX2pfS0rapGlMAsixX9tAzzlX
         L6bxUOEjux/9yHbpqDPmNCF16VJE3SA20P8U7nN2m+hWIRkrPy2FlLX9F4r3zHUFucKv
         eup0JW7oqcEP+VW4B03BShi5BERHn5lWwucbI=
MIME-Version: 1.0
Received: by 10.114.236.22 with SMTP id j22mr10464880wah.217.1261990948216; 
	Mon, 28 Dec 2009 01:02:28 -0800 (PST)
In-Reply-To: <010301ca8791$d361cc50$1b4f010a@ufsoft.com.cn>
References: <4B385338.9000707@gmail.com> <00e801ca8790$4ca2ab90$1b4f010a@ufsoft.com.cn> 
	<010301ca8791$d361cc50$1b4f010a@ufsoft.com.cn>
From: Anshum <anshumg@gmail.com>
Date: Mon, 28 Dec 2009 14:32:08 +0530
Message-ID: <867513fe0912280102h34c08156s8c1d62df0c971d83@mail.gmail.com>
Subject: Re: CANNOT use a * or ? symbol as the first character of a search.
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64b96e22da2da047bc62a31
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64b96e22da2da047bc62a31
Content-Type: text/plain; charset=ISO-8859-1

Hi,
Don't worry! there always are ways!
Is prefix query is what you are trying to run? They would run but would be
highly unoptimized as lucene stores terms in a lexically sorted manner in
its index. <term>* like query terms are allowed by the parser/searcher
though.
Possible solution for this would be:
Index flipped terms (using an appropriate analyzer) i.e. cat is also indexed
as tac. You may then query on ta* instead of at*.
Does that solve your issues/concern?

--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Mon, Dec 28, 2009 at 1:16 PM, liujb <liujb@ufida.com.cn> wrote:

> oh,my god,
>
> Query Parser Syntax
>
> CANNOT use a * or ? symbol as the first character of a search.
>
> that's mean I can't wrinte a search string like '*test'. this will be cause
> a great restriction to use lucence.
> but ,that's a really a important search scene.
>
> can you give me some advice on this problem.
>
> tks.
>
>
> owind.
>

--0016e64b96e22da2da047bc62a31--

From java-user-return-44277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 28 10:03:06 2009
Return-Path: <java-user-return-44277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45950 invoked from network); 28 Dec 2009 10:03:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Dec 2009 10:03:06 -0000
Received: (qmail 53159 invoked by uid 500); 28 Dec 2009 10:03:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53074 invoked by uid 500); 28 Dec 2009 10:03:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53056 invoked by uid 99); 28 Dec 2009 10:03:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Dec 2009 10:03:04 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Dec 2009 10:02:53 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 22489D36009;
	Mon, 28 Dec 2009 11:02:32 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 4JovLsTWa9Gv; Mon, 28 Dec 2009 11:02:23 +0100 (CET)
Received: from VEGA (dslb-088-065-108-010.pools.arcor-ip.net [88.65.108.10])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 327E6D36008;
	Mon, 28 Dec 2009 11:02:23 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
Cc: <solr-user@lucene.apache.org>
References: <e5de07e90912271249g25a0f8e4u49c3fb03d3ecd458@mail.gmail.com> <Pine.LNX.4.64.0912271923370.12519@radix.cryptio.net> <7054C18D96924AA187F6D3A3FBDFC8DB@VEGA>
Subject: RE: Using the new tokenizer API from a jar file
Date: Mon, 28 Dec 2009 11:02:26 +0100
Message-ID: <6B18B9E94727414D87F8F7E91EBC5F90@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <7054C18D96924AA187F6D3A3FBDFC8DB@VEGA>
Thread-Index: AcqHbarJn86+HVz7RZuAx5ofMqPihAAJqrggAAQSV/A=
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579

I opened https://issues.apache.org/jira/browse/LUCENE-2182 about this
problem and already have a fix.

This is really a bug. The solution is simple because you have to load the
IMPL class using the same classloader as the passed in interface. The
default for Class.forName is the classloader of AttributeSource.class, which
is the wrong one.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Uwe Schindler [mailto:uwe@thetaphi.de]
> Sent: Monday, December 28, 2009 9:20 AM
> To: java-user@lucene.apache.org
> Cc: solr-user@lucene.apache.org
> Subject: RE: Using the new tokenizer API from a jar file
> 
> The question on this list was ok,as it shows a minor problem of using the
> new TokenStream API with Solr.
> 
> His plugin was loaded correctly, because if Lucene says, that it cannot
> find
> the *Impl class, it was able to load the interface class before -> the JAR
> file is "visible" to the JVM.
> 
> The problem is the following and has to do with classloaders:
> 
> 1. We have different class loaders for different places in Solr. Solr uses
> for plugins a SolrResourceLoader that searches for JAR files in the local
> lib folder before handling over to the webapp's classloader.
> 
> 2. Initially, the lucene JAR is loaded by the Webapp's class loader
> 
> 3. If a AttributeImpl is placed into a jar file e.g. in the plugin folder
> of
> solr (the lib folder where solr loads all resources, stop words,...), the
> loading mechanism inside AttributeSource.DEFAULT_ATTRIBUTE_FACTORY is
> unable
> to locate the class file, because Class.forName() always uses the class'
> classloader and not the global/thread one's. So AttributeSource will only
> find the class file if it is in the *same* directory as the lucene-
> core.jar
> file (WEB-INF/lib) and so accessible by the webapp's class loader.
> 
> A good introduction about the problem is this one:
> http://www.theserverside.com/tt/articles/content/dm_classForname/DynLoad.p
> df
> 
> The problem is here described for the JVM extensions folder but also
> applies
> to solr, because it has another classloader for plugins.
> 
> A solution to fix this would be in lucene to use the thread's context
> class
> loader in AttributeSource.DEFAULT_ATTRIBUTE_FACTORY, but I strongly
> discourage this, as it would break the whole AttributeSource functionality
> if you add two different attributes with same class names from different
> class loaders to the AttributeSource.
> 
> The only solution to the problem is placing the JAR file inside the
> WEB-INF/lib folder where lucene-core.jar is. Plugins in Solr cannot define
> own attribute implementations. Alternatively he could try to force preload
> the class by calling Class.forName in his plugin initialization code on
> the
> Impl class. But I am not sure if this works (as Java handles classes from
> different classloaders different).
> 
> Uwe
> 
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
> 
> > -----Original Message-----
> > From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
> > Sent: Monday, December 28, 2009 4:27 AM
> > To: java-user@lucene.apache.org
> > Subject: Re: Using the new tokenizer API from a jar file
> >
> >
> > : I tried to use it with solr and the problems began. It's always
> telling
> > me
> > : that it cannot find the class GlossAttributeImpl. I think the problem
> is
> > : that my jar file is added to the class path at run time not from the
> > command
> > : line. Do you have a good solution or workaround?
> >
> > You're likely to get mmore helpful answers from other people in the Solr
> > User community (solr-user@lucene.a.o)
> >
> > As long as you put your jar in the "lib" directory under your solr home
> > (or refrence it using a <lib/> directive in your solrconfig.xml) Solr's
> > plugin loader will take care of hte classloading for you.
> >
> > if you are confident you have your jar in the correct place, please
> email
> > solr-user with the ClassNotFound stack trace from your solr logs, as
> well
> > as hierarchy  of files from your solr home (ie: the output of "find .")
> >
> >
> > -Hoss
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 28 10:15:15 2009
Return-Path: <java-user-return-44278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50512 invoked from network); 28 Dec 2009 10:15:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Dec 2009 10:15:15 -0000
Received: (qmail 60971 invoked by uid 500); 28 Dec 2009 10:15:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60881 invoked by uid 500); 28 Dec 2009 10:15:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60871 invoked by uid 99); 28 Dec 2009 10:15:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Dec 2009 10:15:12 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gudumba.smith@gmail.com designates 209.85.220.210 as permitted sender)
Received: from [209.85.220.210] (HELO mail-fx0-f210.google.com) (209.85.220.210)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Dec 2009 10:15:06 +0000
Received: by fxm2 with SMTP id 2so9225869fxm.5
        for <java-user@lucene.apache.org>; Mon, 28 Dec 2009 02:14:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=uf9woEZdtPiS4iHEXTdoGNyE0Pmad0yxtL00ulBf858=;
        b=w53C3TwaMFVynJTA7rPro5Xx3FKpdxxQSwtQsFQcTs1OHG5zp3J5zLOKIu6t764UlM
         +V51DKYKDLjh0m6/c5onHhWo53Rav2KR2WV4XpVuukO5PVzDoV1PfJN5YHMQXA/OWF/n
         7YbiS7UxmXaAFyJQmsG7/dYRMN16a6C+xDGXI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=DMtIvNRS5AWMS/Yku1q9kdJr2kmJaDSfZA7K8BpYY1iwrjwk2Zc+S39pF1gthARxIG
         o3hvHb4Me+OeGxuULGOJ0OYv701bH8vww+VK+8DxLEZp3AAl33oiHxjMup6xMUq+FaYw
         0rbXmIU0R8fTwtRJVuzOH/mV7/iCfPA8Dq980=
MIME-Version: 1.0
Received: by 10.103.78.7 with SMTP id f7mr2570322mul.12.1261995284771; Mon, 28 
	Dec 2009 02:14:44 -0800 (PST)
Date: Mon, 28 Dec 2009 11:14:44 +0100
Message-ID: <171c79530912280214q2b42e6e9h948942d7ce69210f@mail.gmail.com>
Subject: relation among Terms included in Query
From: gudumba l <gudumba.smith@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Hello All,
            I have observed extractTerms() in the class
org.apache.lucene.search.Query which returns set of terms extracted
from user input query. Is there any chance of getting the
connecting-operator between all those terms. for example.. Term1 OR
Term2 AND Term3 ..    or  Term1 AND Term2 AND Term3 , etc..
Thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 28 16:08:56 2009
Return-Path: <java-user-return-44279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39136 invoked from network); 28 Dec 2009 16:08:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Dec 2009 16:08:56 -0000
Received: (qmail 90222 invoked by uid 500); 28 Dec 2009 16:08:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90163 invoked by uid 500); 28 Dec 2009 16:08:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90153 invoked by uid 99); 28 Dec 2009 16:08:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Dec 2009 16:08:53 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.49.17] (HELO web52907.mail.re2.yahoo.com) (206.190.49.17)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 28 Dec 2009 16:08:44 +0000
Received: (qmail 15019 invoked by uid 60001); 28 Dec 2009 16:08:23 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1262016502; bh=S72y486QnAQow1DwU7YHE+yvPO07mLli3BfI0Nh8eqY=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=Dz7V5p57gSZCuS0MEff4LJwsULBcdAmRyU+vwRa1/sT7DWb5MOFJP+cnBZvVSTxm9ZFJYYd94vkwJzymtQcVy1z6qruloU6viUDB4NnEALLT38tRFXZC9bwtUXg5xrWp0RD8Fp36IjhOuLGH9Crw/szzJFQUa1SaokOXvqeOrtg=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=z8QlP4nvkvsv1QUcjWFMlsWkHDkwu/0U8Jt0fBPRU0qDimuajzGgdD19pZjDyZrg7WzppG+bqHRCDImHl5Yoob+RI9wOl0jD/7+nawU9b5WKPkrV1b0/pTWDGzDFHXsNgzmpvnwePKfGB/LakHPi134rtCugYooAze0cgc1Djzg=;
Message-ID: <953233.14971.qm@web52907.mail.re2.yahoo.com>
X-YMail-OSG: sGymwvYVM1l.Y3NX9r1faXlNL5JDjujQUCPXGcZEePXupx17JjSq7Ts13cp4ai96LXtcNsMuJ0eJFet8kJxP5RXNRSBPNyA_Jhq4PltcwbdMoFD0QbSoflGQ0DCW7JtYsgMu8AuriSq0smqL8f3bfFAJyW5NdY.7vfxdlutuJ2SYMEWPhnLMXf0zBWi4Ksg8jCppV6Ktf4tLS8T8zhrTtm3_wigS2LJPOi1bwxIBhoxrWNhEe27fxA0jWmfnYc.9yZAKxsbuDcVtqlP9ANIzUZJpvf4EzP50WHi_.b22uJTZ.bp4OHV_xYvsdaAtDrZRmlvY.c7YzhvSrVigcyNesQ--
Received: from [193.140.16.46] by web52907.mail.re2.yahoo.com via HTTP; Mon, 28 Dec 2009 08:08:22 PST
X-Mailer: YahooMailClassic/9.0.20 YahooMailWebService/0.8.100.260964
Date: Mon, 28 Dec 2009 08:08:22 -0800 (PST)
From: AHMET ARSLAN <iorixxx@yahoo.com>
Subject: Re: relation among Terms included in Query
To: java-user@lucene.apache.org
In-Reply-To: <171c79530912280214q2b42e6e9h948942d7ce69210f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

> Hello All,=0A> =A0 =A0 =A0 =A0 =A0 =A0 I have observed=0A> extractTerms()=
 in the class=0A> org.apache.lucene.search.Query which returns set of terms=
=0A> extracted=0A> from user input query. Is there any chance of getting th=
e=0A> connecting-operator between all those terms. for example..=0A> Term1 =
OR=0A> Term2 AND Term3 ..=A0 =A0 or=A0 Term1 AND Term2=0A> AND Term3 , etc.=
.=0A> Thanks.=0A=0AYou can extract org.apache.lucene.search.BooleanClause f=
rom BooleanQuery. Something like: =0A=0A=0A if (contents instanceof Boolean=
Query) {=0A=0ABooleanQuery bq =3D (BooleanQuery) contents;=0ABooleanClause[=
] bclauses =3D bq.getClauses();=0A          =0A            for (int i =3D 0=
; i < bclauses.length; i++) {=0A                =0A                Query qc=
 =3D bclauses[i].getQuery();=0A               =0A                =0A       =
         if (bclauses[i].getOccur().equals(BooleanClause.Occur.MUST_NOT)) {=
=0A                 // NOT=0A                    =0A                }=0A   =
             else if (bclauses[i].getOccur().equals(BooleanClause.Occur.MUS=
T)) {=0A                // AND=0A                    =0A                }=
=0A                else if (bclauses[i].getOccur().equals(BooleanClause.Occ=
ur.SHOULD)) {=0A                // OR=0A                    =0A            =
    }=0A           }=0A} =0A=0AHope this helps.=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 28 18:09:16 2009
Return-Path: <java-user-return-44280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73389 invoked from network); 28 Dec 2009 18:09:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Dec 2009 18:09:16 -0000
Received: (qmail 8960 invoked by uid 500); 28 Dec 2009 18:09:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8872 invoked by uid 500); 28 Dec 2009 18:09:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8862 invoked by uid 99); 28 Dec 2009 18:09:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Dec 2009 18:09:13 +0000
X-ASF-Spam-Status: No, hits=-1.7 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of leonidms@gmail.com designates 209.85.210.192 as permitted sender)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Dec 2009 18:09:06 +0000
Received: by yxe30 with SMTP id 30so11991695yxe.29
        for <java-user@lucene.apache.org>; Mon, 28 Dec 2009 10:08:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=jJksF0oMYMs4tyeOF3WZ7liriEa0Uo477IeGzfTXg4s=;
        b=VY8Fm7sr/RxKsB3tbjEyG3DkpJHMIFKs4oiB9ZHMnTFEt8Aiw5GMNSCuUuevlJ6b6I
         kItml6cIxP6NABUumf0uNGEf94LKqxp44a/oBqmkzEUnEtctYowXCVrnVMVI44JPf6kl
         FfHpKhfI2Ksjm7dSYRySj0PEyVekcjn4MdBro=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=k0D50bpJvRVcK8frAhqCqt2/j9VPcbuza8qJzSeU7jKYsacP7ZAATsn7zO63N9bUvK
         BzcfWg5dMDWIKUQTgUkdyUCwYF3xtfOC/Pxoz4PFmoggykzDNzs67ALYtjQDGLOZVHK8
         gWCLO6KlZ0XV1QFNUZXPChR4YISnzRSDqXopY=
MIME-Version: 1.0
Received: by 10.101.21.13 with SMTP id y13mr24347064ani.72.1262023725947; Mon, 
	28 Dec 2009 10:08:45 -0800 (PST)
Date: Mon, 28 Dec 2009 20:08:45 +0200
Message-ID: <dcd377ca0912281008t572f6f25r16f042371ef581db@mail.gmail.com>
Subject: Multi-value (complex) field indexing
From: "Leonid M." <leonidms@gmail.com>
To: java-user <java-user@lucene.apache.org>
Content-Type: multipart/alternative; boundary=00504501764ae21dcf047bcdcba5

--00504501764ae21dcf047bcdcba5
Content-Type: text/plain; charset=UTF-8

*Problem description*

   - I have a complex multi-value field. So, each value consist from several
   rows.
   - Each rows consists from several cells/items


I want to be able to match those issues, which have a *row* with cellA="AAA"
and cellB="BBB". Having a search by all the table (meaning - any row
cellA="AAA" and any row cellB="BBB") is something I understand and hopefully
could easily implement by having different FieldIndexers for each column.

*Example:*
*
*
*Field value:*
*Row 1: [AAA] [BBB] [XXX]*
*Row 2: [CCC] [BBB] [XXX]
*
I would like to run [CCC][BBB] query to look for rows containing these
values and in this case I will get empty result set, since no such field is
present.

*Question*
Is there any option to index / look for particular row only?

I understand that I could make each row to be a separate document, but it
doesn't sit me (it's 3rd party system and I have no access for new document
creation, all I could do - to extend system's indexing mechanism).

So, could I somehow index multiple rows within one document and construct
Lucene search against some particular *row*?

--
Best regards,
Leonids Malovs

--00504501764ae21dcf047bcdcba5--

From java-user-return-44281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 28 18:13:12 2009
Return-Path: <java-user-return-44281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75089 invoked from network); 28 Dec 2009 18:13:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Dec 2009 18:13:12 -0000
Received: (qmail 14947 invoked by uid 500); 28 Dec 2009 18:13:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14863 invoked by uid 500); 28 Dec 2009 18:13:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14853 invoked by uid 99); 28 Dec 2009 18:13:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Dec 2009 18:13:10 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Dec 2009 18:13:00 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id B18BF24007
	for <java-user@lucene.apache.org>; Mon, 28 Dec 2009 20:12:39 +0200 (EET)
Message-ID: <4B38F517.6040104@sirma.bg>
Date: Mon, 28 Dec 2009 20:12:39 +0200
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: LUCENE MAIL LIST <java-user@lucene.apache.org>
Subject: Compressing field content with Lucene 3.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Guys,

Could you give me advice how to deal with Lucene 3.0 with 2.4 indexes 
that contain compressed data.

Our case is following - we have code like this:

Field.Store fieldStored = storedFieldsSet.contains(fieldName) ? 
(fieldValue.length() >= COMPRESS_THRESHOLD ? Field.Store.COMPRESS : 
Field.Store.YES) : Field.Store.NO;
Field.Index fieldIndexed = indexedFieldsSet.contains(fieldName) ? 
Field.Index.ANALYZED : Field.Index.NO;
doc.add(new Field(fieldName, fieldValue, fieldStored, fieldIndexed));

So for one and the same field some values are compressed in the indexes 
other values are not.
Reading Lucene documentation I understand that all the values for some 
field should be either compressed or not compressed OR we should somehow 
keep which values for which fields are compressed. If this is so it 
would be very difficult to migrate our system to Lucene 3.0 without need 
of re indexing.
If I am not right could you tell me please:
1. How to read these indexes (created with the code above with Lucene 
2.4) with Lucene 3.0? I mean when fetching field values how to know when 
to use CompressionTools.decompressString(..) and when to skip it?
2. Is there possibility in Lucene 3.0 again to compress values of some 
docs for certain field and for other docs the values for the same field 
not to be compressed?

Cheers,
Ivan


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 28 20:22:50 2009
Return-Path: <java-user-return-44282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15559 invoked from network); 28 Dec 2009 20:22:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Dec 2009 20:22:50 -0000
Received: (qmail 37704 invoked by uid 500); 28 Dec 2009 20:22:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37628 invoked by uid 500); 28 Dec 2009 20:22:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37618 invoked by uid 99); 28 Dec 2009 20:22:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Dec 2009 20:22:47 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Dec 2009 20:22:36 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 9DB22D3600A
	for <java-user@lucene.apache.org>; Mon, 28 Dec 2009 21:22:14 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 4VRnLyCO5f9p for <java-user@lucene.apache.org>;
	Mon, 28 Dec 2009 21:22:03 +0100 (CET)
Received: from VEGA (dslb-088-065-079-136.pools.arcor-ip.net [88.65.79.136])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 32899D36001
	for <java-user@lucene.apache.org>; Mon, 28 Dec 2009 21:22:03 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <4B38F517.6040104@sirma.bg>
Subject: RE: Compressing field content with Lucene 3.0
Date: Mon, 28 Dec 2009 21:22:02 +0100
Message-ID: <53A0B41C09A5421CB7FC5723D25781BA@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <4B38F517.6040104@sirma.bg>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
Thread-index: AcqH6XE2uUvVMsyESemG8HZSAyaHlwAEa+wQ

If it is a 2.4 index, you can read it without any problems. It is only no
longer possible to add fields with Field.Store.COMPRESS. Nothing more
changed.

If you want to add field with some compression, you have to compress
yourself e.g. to a byte[]. You can then add this byte[] as a binary stored
field. How you deal with this is in your responsibility.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Ivan Vasilev [mailto:ivasilev@sirma.bg]
> Sent: Monday, December 28, 2009 7:13 PM
> To: LUCENE MAIL LIST
> Subject: Compressing field content with Lucene 3.0
> 
> Hi Guys,
> 
> Could you give me advice how to deal with Lucene 3.0 with 2.4 indexes
> that contain compressed data.
> 
> Our case is following - we have code like this:
> 
> Field.Store fieldStored = storedFieldsSet.contains(fieldName) ?
> (fieldValue.length() >= COMPRESS_THRESHOLD ? Field.Store.COMPRESS :
> Field.Store.YES) : Field.Store.NO;
> Field.Index fieldIndexed = indexedFieldsSet.contains(fieldName) ?
> Field.Index.ANALYZED : Field.Index.NO;
> doc.add(new Field(fieldName, fieldValue, fieldStored, fieldIndexed));
> 
> So for one and the same field some values are compressed in the indexes
> other values are not.
> Reading Lucene documentation I understand that all the values for some
> field should be either compressed or not compressed OR we should somehow
> keep which values for which fields are compressed. If this is so it
> would be very difficult to migrate our system to Lucene 3.0 without need
> of re indexing.
> If I am not right could you tell me please:
> 1. How to read these indexes (created with the code above with Lucene
> 2.4) with Lucene 3.0? I mean when fetching field values how to know when
> to use CompressionTools.decompressString(..) and when to skip it?
> 2. Is there possibility in Lucene 3.0 again to compress values of some
> docs for certain field and for other docs the values for the same field
> not to be compressed?
> 
> Cheers,
> Ivan
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 28 20:51:52 2009
Return-Path: <java-user-return-44283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20679 invoked from network); 28 Dec 2009 20:51:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Dec 2009 20:51:52 -0000
Received: (qmail 59366 invoked by uid 500); 28 Dec 2009 20:51:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59288 invoked by uid 500); 28 Dec 2009 20:51:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59278 invoked by uid 99); 28 Dec 2009 20:51:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Dec 2009 20:51:50 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.219.225 as permitted sender)
Received: from [209.85.219.225] (HELO mail-ew0-f225.google.com) (209.85.219.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Dec 2009 20:51:43 +0000
Received: by ewy25 with SMTP id 25so13068100ewy.5
        for <java-user@lucene.apache.org>; Mon, 28 Dec 2009 12:51:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=pCIU3XKOEwzuqcYseBhoBGkmwMTA5fcQpLasHHNUkSk=;
        b=xinDHrsIKgTP7fOoYgei6pIrqaAkyBUpi7aiGzvOY9OSd31+w5VOgEInUMHV7MChGm
         bfdkBKcb08VIicgoEpCugpKhOwZWgIdQ0pM/xHnzLPGilNfPJYgtriKK5DrfQVkvL7/s
         DfSknCRtKlsMmgrT11p8FDXBAEvWFfLbRqWGo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=R7kNiBlIEY/zlHjis8Xp8e8Wxis3OHt8QMvSpZ4uQ9PQtz7JnLTHzjX2jtLtR+TBaM
         Ww/7bEfsnS/6UgGuxC0yeqVSWJGMyygTF0IqCTlqDE4Xcv8Gy2Nv72kkB2aGCKMVpu2C
         4LkPAcdhq6F5YHIfi/i+DTDZr6Z7djn6YWmN8=
MIME-Version: 1.0
Received: by 10.216.86.72 with SMTP id v50mr6014211wee.184.1262033482124; Mon, 
	28 Dec 2009 12:51:22 -0800 (PST)
In-Reply-To: <dcd377ca0912281008t572f6f25r16f042371ef581db@mail.gmail.com>
References: <dcd377ca0912281008t572f6f25r16f042371ef581db@mail.gmail.com>
Date: Mon, 28 Dec 2009 15:51:22 -0500
Message-ID: <359a92830912281251s5ac1ac8dn6ef65040f32354b7@mail.gmail.com>
Subject: Re: Multi-value (complex) field indexing
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6dab18e658fc2047bd011a5

--0016e6dab18e658fc2047bd011a5
Content-Type: text/plain; charset=ISO-8859-1

I'm not following entirely here, but multi-valued fields are supported.
Something like (bad pseudo-code here)
doc = new Document
doc.add(new Field("rows", <row1 text", stored, indexed));
doc.add(new Field("rows", <row2 text", stored, indexed));
indexWriter.addDocument(doc);

If your analyzer implements getPositionIncrementGap, you can keep your
rows separate (search the mail archives for getPositionIncrementGap for
more explanation).

Then, if you're searching with a proximity (or phrase) less than your
increment
gap, you'll only get matches within a row. You wouldn't get a search
"against
a particular row" if, by that phrase, you meant "only look in row 2". If you

mean "only match the document if the phrase is in a *some* row in the doc",
it should work.

The SpanNear query should work, as should regular phrase queries.

If this is off base, could you provide some more examples?

HTH
Erick



On Mon, Dec 28, 2009 at 1:08 PM, Leonid M. <leonidms@gmail.com> wrote:

> *Problem description*
>
>   - I have a complex multi-value field. So, each value consist from several
>   rows.
>   - Each rows consists from several cells/items
>
>
> I want to be able to match those issues, which have a *row* with
> cellA="AAA"
> and cellB="BBB". Having a search by all the table (meaning - any row
> cellA="AAA" and any row cellB="BBB") is something I understand and
> hopefully
> could easily implement by having different FieldIndexers for each column.
>
> *Example:*
> *
> *
> *Field value:*
> *Row 1: [AAA] [BBB] [XXX]*
> *Row 2: [CCC] [BBB] [XXX]
> *
> I would like to run [CCC][BBB] query to look for rows containing these
> values and in this case I will get empty result set, since no such field is
> present.
>
> *Question*
> Is there any option to index / look for particular row only?
>
> I understand that I could make each row to be a separate document, but it
> doesn't sit me (it's 3rd party system and I have no access for new document
> creation, all I could do - to extend system's indexing mechanism).
>
> So, could I somehow index multiple rows within one document and construct
> Lucene search against some particular *row*?
>
> --
> Best regards,
> Leonids Malovs
>

--0016e6dab18e658fc2047bd011a5--

From java-user-return-44284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 28 23:19:11 2009
Return-Path: <java-user-return-44284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65292 invoked from network); 28 Dec 2009 23:19:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 28 Dec 2009 23:19:11 -0000
Received: (qmail 80403 invoked by uid 500); 28 Dec 2009 23:19:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80329 invoked by uid 500); 28 Dec 2009 23:19:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80319 invoked by uid 99); 28 Dec 2009 23:19:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Dec 2009 23:19:09 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gudumba.smith@gmail.com designates 209.85.220.210 as permitted sender)
Received: from [209.85.220.210] (HELO mail-fx0-f210.google.com) (209.85.220.210)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Dec 2009 23:19:01 +0000
Received: by fxm2 with SMTP id 2so9680258fxm.5
        for <java-user@lucene.apache.org>; Mon, 28 Dec 2009 15:18:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=ItT42MoBNDt5wJkRfWa7srWjDwWGBfFdPrT39femc6M=;
        b=ItdNGneJKsQR4II3YCqFbTIV3fwC2OO/6L3lzz/sjtQoyul2ExHZzaWwknWdHJIofg
         +YqulNdQcN14KtH5tmVar9hjJgJY7RFrFadpsh/FFgewjp0KqARXJE2aDpl73n8CRHUS
         Z72ipJTxjK602Uep36N/JTj/E1fYEV3d2ksLo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=WeNXepKZidJjvES0idQlg8gdb2yry66g/EFOv2i7IPqi226U2hMCvEZB8Ht2eVyUn6
         iYE2vqgnySMU9UPWQg/6IcEMQ91KepWhTIfrsXOrhSVSf5JaRqKBQOXPWriME9fepVMJ
         DF4c8ResFBGsIyge4XTShm57+lECthex0qh3A=
MIME-Version: 1.0
Received: by 10.102.188.16 with SMTP id l16mr7935541muf.136.1262042321221; 
	Mon, 28 Dec 2009 15:18:41 -0800 (PST)
In-Reply-To: <953233.14971.qm@web52907.mail.re2.yahoo.com>
References: <171c79530912280214q2b42e6e9h948942d7ce69210f@mail.gmail.com>
	 <953233.14971.qm@web52907.mail.re2.yahoo.com>
Date: Tue, 29 Dec 2009 00:18:41 +0100
Message-ID: <171c79530912281518g1e5e9074l34169339e806a81c@mail.gmail.com>
Subject: Re: relation among Terms included in Query
From: Smith G <gudumba.smith@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
        Thank you very much.. that should help.. meanwhile I run cases
and write again if I get stuck once more in the same context.
Thanks

2009/12/28 AHMET ARSLAN <iorixxx@yahoo.com>:
>> Hello All,
>> =A0 =A0 =A0 =A0 =A0 =A0 I have observed
>> extractTerms() in the class
>> org.apache.lucene.search.Query which returns set of terms
>> extracted
>> from user input query. Is there any chance of getting the
>> connecting-operator between all those terms. for example..
>> Term1 OR
>> Term2 AND Term3 ..=A0 =A0 or=A0 Term1 AND Term2
>> AND Term3 , etc..
>> Thanks.
>
> You can extract org.apache.lucene.search.BooleanClause from BooleanQuery.=
 Something like:
>
>
> =A0if (contents instanceof BooleanQuery) {
>
> BooleanQuery bq =3D (BooleanQuery) contents;
> BooleanClause[] bclauses =3D bq.getClauses();
>
> =A0 =A0 =A0 =A0 =A0 =A0for (int i =3D 0; i < bclauses.length; i++) {
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Query qc =3D bclauses[i].getQuery();
>
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0if (bclauses[i].getOccur().equals(BooleanC=
lause.Occur.MUST_NOT)) {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 // NOT
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0else if (bclauses[i].getOccur().equals(Boo=
leanClause.Occur.MUST)) {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0// AND
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0else if (bclauses[i].getOccur().equals(Boo=
leanClause.Occur.SHOULD)) {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0// OR
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
> =A0 =A0 =A0 =A0 =A0 }
> }
>
> Hope this helps.
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 29 02:22:13 2009
Return-Path: <java-user-return-44285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22133 invoked from network); 29 Dec 2009 02:22:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Dec 2009 02:22:12 -0000
Received: (qmail 86539 invoked by uid 500); 29 Dec 2009 02:22:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86461 invoked by uid 500); 29 Dec 2009 02:22:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86451 invoked by uid 99); 29 Dec 2009 02:22:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Dec 2009 02:22:10 +0000
X-ASF-Spam-Status: No, hits=4.6 required=10.0
	tests=HTML_MESSAGE,MSGID_MULTIPLE_AT,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [213.251.189.42] (HELO 42.mail-out.ovh.net) (213.251.189.42)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 29 Dec 2009 02:21:59 +0000
Received: (qmail 25629 invoked by uid 503); 29 Dec 2009 02:21:52 -0000
Received: from b6.ovh.net (HELO mail414.ha.ovh.net) (213.186.33.56)
  by 42.mail-out.ovh.net with SMTP; 29 Dec 2009 02:21:52 -0000
Received: from b0.ovh.net (HELO queueout) (213.186.33.50)
	by b0.ovh.net with SMTP; 29 Dec 2009 02:21:38 -0000
Received: from pha75-12-82-245-86-19.fbx.proxad.net (HELO pagnol) (paul.giraudon@jamespot.com@82.245.86.19)
  by ns0.ovh.net with SMTP; 29 Dec 2009 02:21:36 -0000
From: "Paul chez Jamespot" <paul.giraudon@jamespot.com>
To: <java-user@lucene.apache.org>
Subject: Bug on doc parameter in CustomScoreQuery.customScore()
Date: Tue, 29 Dec 2009 03:21:31 +0100
Message-ID: <000d01ca882d$a2e2aa30$e8a7fe90$@giraudon@jamespot.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_000E_01CA8836.04A71230"
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcqILaKiShF3wXYwSXm+F+Gjvsv0LQ==
Content-Language: fr
X-Ovh-Tracer-Id: 7471190307793594801
X-Ovh-Remote: 82.245.86.19 (pha75-12-82-245-86-19.fbx.proxad.net)
X-Ovh-Local: 213.186.33.20 (ns0.ovh.net)
X-Spam-Check: DONE|U 0.5/N
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_000E_01CA8836.04A71230
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hello,

 

I'm trying to use the doc parameter to build a customScore, but the 'doc'
value seems to be different from the global 'docId' when the index is not
optimized.

 

 

Basically, I create a DateScoreQuery passing the IndexReader and the field
containing the timestamp (as long)

And I use the FieldCache to access the timestamp value.

 

 

public class DateScoreQuery extends CustomScoreQuery {

      private IndexReader ir;

      private String fld;

 

      public DateScoreQuery(Query subQuery,  IndexReader indexReader, String
fieldTimeStamp) {

            super(subQuery);

            ir = indexReader;

            fld=fieldTimeStamp;

      }

 

      public float customScore(int doc, float subQueryScore, float
valSrcScore) {

 

            long[] timeStamps;

            try {

timeStamps = FieldCache.DEFAULT.getLongs(ir, fld);

}catch(IOException e){.}

            long docTimeStamp = timeStamps[doc];

            return subQueryScore * timeRatio(docTimeStamp);

        }

.

}

 

When the index is not optimized, customScore(doc) is never called for high
values doc.

Instead, when I debug, I can see doc values looping  through cycles.

 

 

After index optimization, returned values seemed to be correct.

 

 

Paul Giraudon

 


------=_NextPart_000_000E_01CA8836.04A71230--


From java-user-return-44286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 29 08:56:09 2009
Return-Path: <java-user-return-44286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11827 invoked from network); 29 Dec 2009 08:56:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Dec 2009 08:56:09 -0000
Received: (qmail 21904 invoked by uid 500); 29 Dec 2009 08:56:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21814 invoked by uid 500); 29 Dec 2009 08:56:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21804 invoked by uid 99); 29 Dec 2009 08:56:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Dec 2009 08:56:06 +0000
X-ASF-Spam-Status: No, hits=-2.2 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of leonidms@gmail.com designates 209.85.217.225 as permitted sender)
Received: from [209.85.217.225] (HELO mail-gx0-f225.google.com) (209.85.217.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Dec 2009 08:55:59 +0000
Received: by gxk25 with SMTP id 25so4117671gxk.5
        for <java-user@lucene.apache.org>; Tue, 29 Dec 2009 00:55:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=1omP/NsUcJ3HVRH9NK15ii4hBeuIqv6ol8LC+uNQY/A=;
        b=CvoA4v+eKOLgcGoRK0vCNPNCPNOdS67Gtu+j+2y5fUaJC/TDW21AY2jL/akmaA4c8l
         RQGUVp1YJgVSIi1qpNn4JqX7OX84Vue1J+Jlm67ta5quI45V4nLl0HMyT95WCnR+kgff
         fYIbtYa2rAiMzpM4tpMDj3uL+lcEL4pFRTRNM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=KDHPqu07avRiHvCgnffqO4MXRgOLyfXCjSsTJturZjgZ6iOxKm/ImD/UzS5HD7BdBH
         ptlmRsA9cLWvBSqs4D33HxY84s59jsBzVqDNw/xoX5vqWci+fuTRjjFCpobnN7ZPYmrx
         Bj1vo9msYI+NF31L4vMbkWnVY7h/RuoO9jTrw=
MIME-Version: 1.0
Received: by 10.100.35.1 with SMTP id i1mr24504922ani.132.1262076938466; Tue, 
	29 Dec 2009 00:55:38 -0800 (PST)
In-Reply-To: <359a92830912281251s5ac1ac8dn6ef65040f32354b7@mail.gmail.com>
References: <dcd377ca0912281008t572f6f25r16f042371ef581db@mail.gmail.com>
	 <359a92830912281251s5ac1ac8dn6ef65040f32354b7@mail.gmail.com>
Date: Tue, 29 Dec 2009 10:55:38 +0200
Message-ID: <dcd377ca0912290055j4258e398v51a91cce3e936864@mail.gmail.com>
Subject: Re: Multi-value (complex) field indexing
From: "Leonid M." <leonidms@gmail.com>
To: java-user <java-user@lucene.apache.org>
Content-Type: multipart/alternative; boundary=0016e645f8ae98b65e047bda2f88

--0016e645f8ae98b65e047bda2f88
Content-Type: text/plain; charset=UTF-8

You got me, thanks a lot.
This is exactly I was trying to ask (meaning find this values within the row
number 2).

I'm afraid I'm not be able to proceed because I have no access to analyzer
configuration (the system - JIRA 4.0) uses the hardcoded pre-configured set
of default analyzers.

Thanks a lot, you provided clear and brief answer to my question.
--
Best regards,
Leonids Maslovs



On Mon, Dec 28, 2009 at 10:51 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> I'm not following entirely here, but multi-valued fields are supported.
> Something like (bad pseudo-code here)
> doc = new Document
> doc.add(new Field("rows", <row1 text", stored, indexed));
> doc.add(new Field("rows", <row2 text", stored, indexed));
> indexWriter.addDocument(doc);
>
> If your analyzer implements getPositionIncrementGap, you can keep your
> rows separate (search the mail archives for getPositionIncrementGap for
> more explanation).
>
> Then, if you're searching with a proximity (or phrase) less than your
> increment
> gap, you'll only get matches within a row. You wouldn't get a search
> "against
> a particular row" if, by that phrase, you meant "only look in row 2". If
> you
>
> mean "only match the document if the phrase is in a *some* row in the doc",
> it should work.
>
> The SpanNear query should work, as should regular phrase queries.
>
> If this is off base, could you provide some more examples?
>
> HTH
> Erick
>
>
>
> On Mon, Dec 28, 2009 at 1:08 PM, Leonid M. <leonidms@gmail.com> wrote:
>
> > *Problem description*
> >
> >   - I have a complex multi-value field. So, each value consist from
> several
> >   rows.
> >   - Each rows consists from several cells/items
> >
> >
> > I want to be able to match those issues, which have a *row* with
> > cellA="AAA"
> > and cellB="BBB". Having a search by all the table (meaning - any row
> > cellA="AAA" and any row cellB="BBB") is something I understand and
> > hopefully
> > could easily implement by having different FieldIndexers for each column.
> >
> > *Example:*
> > *
> > *
> > *Field value:*
> > *Row 1: [AAA] [BBB] [XXX]*
> > *Row 2: [CCC] [BBB] [XXX]
> > *
> > I would like to run [CCC][BBB] query to look for rows containing these
> > values and in this case I will get empty result set, since no such field
> is
> > present.
> >
> > *Question*
> > Is there any option to index / look for particular row only?
> >
> > I understand that I could make each row to be a separate document, but it
> > doesn't sit me (it's 3rd party system and I have no access for new
> document
> > creation, all I could do - to extend system's indexing mechanism).
> >
> > So, could I somehow index multiple rows within one document and construct
> > Lucene search against some particular *row*?
> >
> > --
> > Best regards,
> > Leonids Malovs
> >
>

--0016e645f8ae98b65e047bda2f88--

From java-user-return-44287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 29 10:50:53 2009
Return-Path: <java-user-return-44287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62293 invoked from network); 29 Dec 2009 10:50:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Dec 2009 10:50:53 -0000
Received: (qmail 86597 invoked by uid 500); 29 Dec 2009 10:50:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86511 invoked by uid 500); 29 Dec 2009 10:50:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86501 invoked by uid 99); 29 Dec 2009 10:50:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Dec 2009 10:50:51 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Dec 2009 10:50:39 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id 2E62F24008
	for <java-user@lucene.apache.org>; Tue, 29 Dec 2009 12:50:17 +0200 (EET)
Message-ID: <4B39DEE9.20007@sirma.bg>
Date: Tue, 29 Dec 2009 12:50:17 +0200
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Compressing field content with Lucene 3.0
References: <4B38F517.6040104@sirma.bg> <53A0B41C09A5421CB7FC5723D25781BA@VEGA>
In-Reply-To: <53A0B41C09A5421CB7FC5723D25781BA@VEGA>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

10x Uwe for your answer,

It is good news that data compressed with Field.Store.COMPRESS with 2.4 
will be retrieved properly from 3.0.

 From your answer I understand that in 3.0 there is no API way to 
compress some of the values of some field and not to compress other 
values for the same field. We should choose either to compress all of 
the values of that field (and keep them as bin values) or not to 
compress any of values for that field?

Cheers,
Ivan


Uwe Schindler wrote:
> If it is a 2.4 index, you can read it without any problems. It is only no
> longer possible to add fields with Field.Store.COMPRESS. Nothing more
> changed.
>
> If you want to add field with some compression, you have to compress
> yourself e.g. to a byte[]. You can then add this byte[] as a binary stored
> field. How you deal with this is in your responsibility.
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>   
>> -----Original Message-----
>> From: Ivan Vasilev [mailto:ivasilev@sirma.bg]
>> Sent: Monday, December 28, 2009 7:13 PM
>> To: LUCENE MAIL LIST
>> Subject: Compressing field content with Lucene 3.0
>>
>> Hi Guys,
>>
>> Could you give me advice how to deal with Lucene 3.0 with 2.4 indexes
>> that contain compressed data.
>>
>> Our case is following - we have code like this:
>>
>> Field.Store fieldStored = storedFieldsSet.contains(fieldName) ?
>> (fieldValue.length() >= COMPRESS_THRESHOLD ? Field.Store.COMPRESS :
>> Field.Store.YES) : Field.Store.NO;
>> Field.Index fieldIndexed = indexedFieldsSet.contains(fieldName) ?
>> Field.Index.ANALYZED : Field.Index.NO;
>> doc.add(new Field(fieldName, fieldValue, fieldStored, fieldIndexed));
>>
>> So for one and the same field some values are compressed in the indexes
>> other values are not.
>> Reading Lucene documentation I understand that all the values for some
>> field should be either compressed or not compressed OR we should somehow
>> keep which values for which fields are compressed. If this is so it
>> would be very difficult to migrate our system to Lucene 3.0 without need
>> of re indexing.
>> If I am not right could you tell me please:
>> 1. How to read these indexes (created with the code above with Lucene
>> 2.4) with Lucene 3.0? I mean when fetching field values how to know when
>> to use CompressionTools.decompressString(..) and when to skip it?
>> 2. Is there possibility in Lucene 3.0 again to compress values of some
>> docs for certain field and for other docs the values for the same field
>> not to be compressed?
>>
>> Cheers,
>> Ivan
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>     
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> __________ NOD32 3990 (20090406) Information __________
>
> This message was checked by NOD32 antivirus system.
> http://www.eset.com
>
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 29 10:57:54 2009
Return-Path: <java-user-return-44288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64872 invoked from network); 29 Dec 2009 10:57:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Dec 2009 10:57:54 -0000
Received: (qmail 90226 invoked by uid 500); 29 Dec 2009 10:57:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90174 invoked by uid 500); 29 Dec 2009 10:57:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90020 invoked by uid 99); 29 Dec 2009 10:57:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Dec 2009 10:57:52 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Dec 2009 10:57:40 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 8E381D36008
	for <java-user@lucene.apache.org>; Tue, 29 Dec 2009 11:57:17 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id FyvnreduFFGD for <java-user@lucene.apache.org>;
	Tue, 29 Dec 2009 11:57:06 +0100 (CET)
Received: from VEGA (dslb-088-065-104-104.pools.arcor-ip.net [88.65.104.104])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id B57ADD36001
	for <java-user@lucene.apache.org>; Tue, 29 Dec 2009 11:57:05 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <4B38F517.6040104@sirma.bg> <53A0B41C09A5421CB7FC5723D25781BA@VEGA> <4B39DEE9.20007@sirma.bg>
Subject: RE: Compressing field content with Lucene 3.0
Date: Tue, 29 Dec 2009 11:57:04 +0100
Message-ID: <3B0C179806B24717831FFDC546296886@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <4B39DEE9.20007@sirma.bg>
Thread-Index: AcqIdNhN76osKmlYSQmpAQX+kE3KQQAAIUDA
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579

It is still open to you how you handle it. On my projects I normally only
store string fields. If I compress them, they are binary. So I use a similar
approach like you to compress only large fields and store the others as
string fields like before.

When I retrieve the contents of the documents I use
Document.getField("name") and then use the Fieldable.isBinary() to detect if
it was stored binary (and therefore compressed) or if it is string.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Ivan Vasilev [mailto:ivasilev@sirma.bg]
> Sent: Tuesday, December 29, 2009 11:50 AM
> To: java-user@lucene.apache.org
> Subject: Re: Compressing field content with Lucene 3.0
> 
> 10x Uwe for your answer,
> 
> It is good news that data compressed with Field.Store.COMPRESS with 2.4
> will be retrieved properly from 3.0.
> 
>  From your answer I understand that in 3.0 there is no API way to
> compress some of the values of some field and not to compress other
> values for the same field. We should choose either to compress all of
> the values of that field (and keep them as bin values) or not to
> compress any of values for that field?
> 
> Cheers,
> Ivan
> 
> 
> Uwe Schindler wrote:
> > If it is a 2.4 index, you can read it without any problems. It is only
> no
> > longer possible to add fields with Field.Store.COMPRESS. Nothing more
> > changed.
> >
> > If you want to add field with some compression, you have to compress
> > yourself e.g. to a byte[]. You can then add this byte[] as a binary
> stored
> > field. How you deal with this is in your responsibility.
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> >
> >> -----Original Message-----
> >> From: Ivan Vasilev [mailto:ivasilev@sirma.bg]
> >> Sent: Monday, December 28, 2009 7:13 PM
> >> To: LUCENE MAIL LIST
> >> Subject: Compressing field content with Lucene 3.0
> >>
> >> Hi Guys,
> >>
> >> Could you give me advice how to deal with Lucene 3.0 with 2.4 indexes
> >> that contain compressed data.
> >>
> >> Our case is following - we have code like this:
> >>
> >> Field.Store fieldStored = storedFieldsSet.contains(fieldName) ?
> >> (fieldValue.length() >= COMPRESS_THRESHOLD ? Field.Store.COMPRESS :
> >> Field.Store.YES) : Field.Store.NO;
> >> Field.Index fieldIndexed = indexedFieldsSet.contains(fieldName) ?
> >> Field.Index.ANALYZED : Field.Index.NO;
> >> doc.add(new Field(fieldName, fieldValue, fieldStored, fieldIndexed));
> >>
> >> So for one and the same field some values are compressed in the indexes
> >> other values are not.
> >> Reading Lucene documentation I understand that all the values for some
> >> field should be either compressed or not compressed OR we should
> somehow
> >> keep which values for which fields are compressed. If this is so it
> >> would be very difficult to migrate our system to Lucene 3.0 without
> need
> >> of re indexing.
> >> If I am not right could you tell me please:
> >> 1. How to read these indexes (created with the code above with Lucene
> >> 2.4) with Lucene 3.0? I mean when fetching field values how to know
> when
> >> to use CompressionTools.decompressString(..) and when to skip it?
> >> 2. Is there possibility in Lucene 3.0 again to compress values of some
> >> docs for certain field and for other docs the values for the same field
> >> not to be compressed?
> >>
> >> Cheers,
> >> Ivan
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > __________ NOD32 3990 (20090406) Information __________
> >
> > This message was checked by NOD32 antivirus system.
> > http://www.eset.com
> >
> >
> >
> >
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 29 11:20:02 2009
Return-Path: <java-user-return-44289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68698 invoked from network); 29 Dec 2009 11:20:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Dec 2009 11:20:01 -0000
Received: (qmail 2492 invoked by uid 500); 29 Dec 2009 11:19:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2414 invoked by uid 500); 29 Dec 2009 11:19:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2404 invoked by uid 99); 29 Dec 2009 11:19:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Dec 2009 11:19:59 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Dec 2009 11:19:48 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id 5113524005
	for <java-user@lucene.apache.org>; Tue, 29 Dec 2009 13:19:26 +0200 (EET)
Message-ID: <4B39E5BE.3070709@sirma.bg>
Date: Tue, 29 Dec 2009 13:19:26 +0200
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Compressing field content with Lucene 3.0
References: <4B38F517.6040104@sirma.bg> <53A0B41C09A5421CB7FC5723D25781BA@VEGA> <4B39DEE9.20007@sirma.bg> <3B0C179806B24717831FFDC546296886@VEGA>
In-Reply-To: <3B0C179806B24717831FFDC546296886@VEGA>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

10x Uwe,

That is fine :)

Cheers,
Ivan

Uwe Schindler wrote:
> It is still open to you how you handle it. On my projects I normally only
> store string fields. If I compress them, they are binary. So I use a similar
> approach like you to compress only large fields and store the others as
> string fields like before.
>
> When I retrieve the contents of the documents I use
> Document.getField("name") and then use the Fieldable.isBinary() to detect if
> it was stored binary (and therefore compressed) or if it is string.
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>   
>> -----Original Message-----
>> From: Ivan Vasilev [mailto:ivasilev@sirma.bg]
>> Sent: Tuesday, December 29, 2009 11:50 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: Compressing field content with Lucene 3.0
>>
>> 10x Uwe for your answer,
>>
>> It is good news that data compressed with Field.Store.COMPRESS with 2.4
>> will be retrieved properly from 3.0.
>>
>>  From your answer I understand that in 3.0 there is no API way to
>> compress some of the values of some field and not to compress other
>> values for the same field. We should choose either to compress all of
>> the values of that field (and keep them as bin values) or not to
>> compress any of values for that field?
>>
>> Cheers,
>> Ivan
>>
>>
>> Uwe Schindler wrote:
>>     
>>> If it is a 2.4 index, you can read it without any problems. It is only
>>>       
>> no
>>     
>>> longer possible to add fields with Field.Store.COMPRESS. Nothing more
>>> changed.
>>>
>>> If you want to add field with some compression, you have to compress
>>> yourself e.g. to a byte[]. You can then add this byte[] as a binary
>>>       
>> stored
>>     
>>> field. How you deal with this is in your responsibility.
>>>
>>> -----
>>> Uwe Schindler
>>> H.-H.-Meier-Allee 63, D-28213 Bremen
>>> http://www.thetaphi.de
>>> eMail: uwe@thetaphi.de
>>>
>>>
>>>       
>>>> -----Original Message-----
>>>> From: Ivan Vasilev [mailto:ivasilev@sirma.bg]
>>>> Sent: Monday, December 28, 2009 7:13 PM
>>>> To: LUCENE MAIL LIST
>>>> Subject: Compressing field content with Lucene 3.0
>>>>
>>>> Hi Guys,
>>>>
>>>> Could you give me advice how to deal with Lucene 3.0 with 2.4 indexes
>>>> that contain compressed data.
>>>>
>>>> Our case is following - we have code like this:
>>>>
>>>> Field.Store fieldStored = storedFieldsSet.contains(fieldName) ?
>>>> (fieldValue.length() >= COMPRESS_THRESHOLD ? Field.Store.COMPRESS :
>>>> Field.Store.YES) : Field.Store.NO;
>>>> Field.Index fieldIndexed = indexedFieldsSet.contains(fieldName) ?
>>>> Field.Index.ANALYZED : Field.Index.NO;
>>>> doc.add(new Field(fieldName, fieldValue, fieldStored, fieldIndexed));
>>>>
>>>> So for one and the same field some values are compressed in the indexes
>>>> other values are not.
>>>> Reading Lucene documentation I understand that all the values for some
>>>> field should be either compressed or not compressed OR we should
>>>>         
>> somehow
>>     
>>>> keep which values for which fields are compressed. If this is so it
>>>> would be very difficult to migrate our system to Lucene 3.0 without
>>>>         
>> need
>>     
>>>> of re indexing.
>>>> If I am not right could you tell me please:
>>>> 1. How to read these indexes (created with the code above with Lucene
>>>> 2.4) with Lucene 3.0? I mean when fetching field values how to know
>>>>         
>> when
>>     
>>>> to use CompressionTools.decompressString(..) and when to skip it?
>>>> 2. Is there possibility in Lucene 3.0 again to compress values of some
>>>> docs for certain field and for other docs the values for the same field
>>>> not to be compressed?
>>>>
>>>> Cheers,
>>>> Ivan
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>         
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>> __________ NOD32 3990 (20090406) Information __________
>>>
>>> This message was checked by NOD32 antivirus system.
>>> http://www.eset.com
>>>
>>>
>>>
>>>
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>     
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> __________ NOD32 3990 (20090406) Information __________
>
> This message was checked by NOD32 antivirus system.
> http://www.eset.com
>
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 29 11:37:05 2009
Return-Path: <java-user-return-44290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70510 invoked from network); 29 Dec 2009 11:37:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Dec 2009 11:37:05 -0000
Received: (qmail 9743 invoked by uid 500); 29 Dec 2009 11:37:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9662 invoked by uid 500); 29 Dec 2009 11:37:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9652 invoked by uid 99); 29 Dec 2009 11:37:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Dec 2009 11:37:03 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Dec 2009 11:36:52 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 2E642D36008
	for <java-user@lucene.apache.org>; Tue, 29 Dec 2009 12:36:32 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id aOmvbCi4BgmB for <java-user@lucene.apache.org>;
	Tue, 29 Dec 2009 12:36:20 +0100 (CET)
Received: from VEGA (dslb-088-065-104-104.pools.arcor-ip.net [88.65.104.104])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 925D6D36001
	for <java-user@lucene.apache.org>; Tue, 29 Dec 2009 12:36:18 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <4B38F517.6040104@sirma.bg> <53A0B41C09A5421CB7FC5723D25781BA@VEGA> <4B39DEE9.20007@sirma.bg> <3B0C179806B24717831FFDC546296886@VEGA> <4B39E5BE.3070709@sirma.bg>
Subject: RE: Compressing field content with Lucene 3.0
Date: Tue, 29 Dec 2009 12:36:14 +0100
Message-ID: <8A6EBB78392A4C3893F910DCCF2AD5BF@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <4B39E5BE.3070709@sirma.bg>
Thread-Index: AcqIeOhnOTB+ezYTTFqC4KfSKyl65wAAfCEQ
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

I forgot:

For old 2.4 indexes this would also work, as the compressed fields appear as
uncompressed. So the detection with binary/string also works here.

Please note, as soon as you optimize or update old indexes, compressed
fields get automatically decompressed. But there is nothing to do from your
side!

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Ivan Vasilev [mailto:ivasilev@sirma.bg]
> Sent: Tuesday, December 29, 2009 12:19 PM
> To: java-user@lucene.apache.org
> Subject: Re: Compressing field content with Lucene 3.0
> 
> 10x Uwe,
> 
> That is fine :)
> 
> Cheers,
> Ivan
> 
> Uwe Schindler wrote:
> > It is still open to you how you handle it. On my projects I normally
> only
> > store string fields. If I compress them, they are binary. So I use a
> similar
> > approach like you to compress only large fields and store the others as
> > string fields like before.
> >
> > When I retrieve the contents of the documents I use
> > Document.getField("name") and then use the Fieldable.isBinary() to
> detect if
> > it was stored binary (and therefore compressed) or if it is string.
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> >
> >> -----Original Message-----
> >> From: Ivan Vasilev [mailto:ivasilev@sirma.bg]
> >> Sent: Tuesday, December 29, 2009 11:50 AM
> >> To: java-user@lucene.apache.org
> >> Subject: Re: Compressing field content with Lucene 3.0
> >>
> >> 10x Uwe for your answer,
> >>
> >> It is good news that data compressed with Field.Store.COMPRESS with 2.4
> >> will be retrieved properly from 3.0.
> >>
> >>  From your answer I understand that in 3.0 there is no API way to
> >> compress some of the values of some field and not to compress other
> >> values for the same field. We should choose either to compress all of
> >> the values of that field (and keep them as bin values) or not to
> >> compress any of values for that field?
> >>
> >> Cheers,
> >> Ivan
> >>
> >>
> >> Uwe Schindler wrote:
> >>
> >>> If it is a 2.4 index, you can read it without any problems. It is only
> >>>
> >> no
> >>
> >>> longer possible to add fields with Field.Store.COMPRESS. Nothing more
> >>> changed.
> >>>
> >>> If you want to add field with some compression, you have to compress
> >>> yourself e.g. to a byte[]. You can then add this byte[] as a binary
> >>>
> >> stored
> >>
> >>> field. How you deal with this is in your responsibility.
> >>>
> >>> -----
> >>> Uwe Schindler
> >>> H.-H.-Meier-Allee 63, D-28213 Bremen
> >>> http://www.thetaphi.de
> >>> eMail: uwe@thetaphi.de
> >>>
> >>>
> >>>
> >>>> -----Original Message-----
> >>>> From: Ivan Vasilev [mailto:ivasilev@sirma.bg]
> >>>> Sent: Monday, December 28, 2009 7:13 PM
> >>>> To: LUCENE MAIL LIST
> >>>> Subject: Compressing field content with Lucene 3.0
> >>>>
> >>>> Hi Guys,
> >>>>
> >>>> Could you give me advice how to deal with Lucene 3.0 with 2.4 indexes
> >>>> that contain compressed data.
> >>>>
> >>>> Our case is following - we have code like this:
> >>>>
> >>>> Field.Store fieldStored = storedFieldsSet.contains(fieldName) ?
> >>>> (fieldValue.length() >= COMPRESS_THRESHOLD ? Field.Store.COMPRESS :
> >>>> Field.Store.YES) : Field.Store.NO;
> >>>> Field.Index fieldIndexed = indexedFieldsSet.contains(fieldName) ?
> >>>> Field.Index.ANALYZED : Field.Index.NO;
> >>>> doc.add(new Field(fieldName, fieldValue, fieldStored, fieldIndexed));
> >>>>
> >>>> So for one and the same field some values are compressed in the
> indexes
> >>>> other values are not.
> >>>> Reading Lucene documentation I understand that all the values for
> some
> >>>> field should be either compressed or not compressed OR we should
> >>>>
> >> somehow
> >>
> >>>> keep which values for which fields are compressed. If this is so it
> >>>> would be very difficult to migrate our system to Lucene 3.0 without
> >>>>
> >> need
> >>
> >>>> of re indexing.
> >>>> If I am not right could you tell me please:
> >>>> 1. How to read these indexes (created with the code above with Lucene
> >>>> 2.4) with Lucene 3.0? I mean when fetching field values how to know
> >>>>
> >> when
> >>
> >>>> to use CompressionTools.decompressString(..) and when to skip it?
> >>>> 2. Is there possibility in Lucene 3.0 again to compress values of
> some
> >>>> docs for certain field and for other docs the values for the same
> field
> >>>> not to be compressed?
> >>>>
> >>>> Cheers,
> >>>> Ivan
> >>>>
> >>>>
> >>>> ---------------------------------------------------------------------
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>>
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>> __________ NOD32 3990 (20090406) Information __________
> >>>
> >>> This message was checked by NOD32 antivirus system.
> >>> http://www.eset.com
> >>>
> >>>
> >>>
> >>>
> >>>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > __________ NOD32 3990 (20090406) Information __________
> >
> > This message was checked by NOD32 antivirus system.
> > http://www.eset.com
> >
> >
> >
> >
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 29 12:16:57 2009
Return-Path: <java-user-return-44291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76709 invoked from network); 29 Dec 2009 12:16:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Dec 2009 12:16:57 -0000
Received: (qmail 32011 invoked by uid 500); 29 Dec 2009 12:16:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31918 invoked by uid 500); 29 Dec 2009 12:16:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31908 invoked by uid 99); 29 Dec 2009 12:16:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Dec 2009 12:16:54 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Dec 2009 12:16:43 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id 372E624005
	for <java-user@lucene.apache.org>; Tue, 29 Dec 2009 14:16:20 +0200 (EET)
Message-ID: <4B39F314.8070208@sirma.bg>
Date: Tue, 29 Dec 2009 14:16:20 +0200
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Compressing field content with Lucene 3.0
References: <4B38F517.6040104@sirma.bg> <53A0B41C09A5421CB7FC5723D25781BA@VEGA> <4B39DEE9.20007@sirma.bg> <3B0C179806B24717831FFDC546296886@VEGA> <4B39E5BE.3070709@sirma.bg> <8A6EBB78392A4C3893F910DCCF2AD5BF@VEGA>
In-Reply-To: <8A6EBB78392A4C3893F910DCCF2AD5BF@VEGA>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

OK 10x for the advises Uwe :)

Cheers,
Ivan

Uwe Schindler wrote:
> I forgot:
>
> For old 2.4 indexes this would also work, as the compressed fields appear as
> uncompressed. So the detection with binary/string also works here.
>
> Please note, as soon as you optimize or update old indexes, compressed
> fields get automatically decompressed. But there is nothing to do from your
> side!
>
> Uwe
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>   
>> -----Original Message-----
>> From: Ivan Vasilev [mailto:ivasilev@sirma.bg]
>> Sent: Tuesday, December 29, 2009 12:19 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: Compressing field content with Lucene 3.0
>>
>> 10x Uwe,
>>
>> That is fine :)
>>
>> Cheers,
>> Ivan
>>
>> Uwe Schindler wrote:
>>     
>>> It is still open to you how you handle it. On my projects I normally
>>>       
>> only
>>     
>>> store string fields. If I compress them, they are binary. So I use a
>>>       
>> similar
>>     
>>> approach like you to compress only large fields and store the others as
>>> string fields like before.
>>>
>>> When I retrieve the contents of the documents I use
>>> Document.getField("name") and then use the Fieldable.isBinary() to
>>>       
>> detect if
>>     
>>> it was stored binary (and therefore compressed) or if it is string.
>>>
>>> -----
>>> Uwe Schindler
>>> H.-H.-Meier-Allee 63, D-28213 Bremen
>>> http://www.thetaphi.de
>>> eMail: uwe@thetaphi.de
>>>
>>>
>>>       
>>>> -----Original Message-----
>>>> From: Ivan Vasilev [mailto:ivasilev@sirma.bg]
>>>> Sent: Tuesday, December 29, 2009 11:50 AM
>>>> To: java-user@lucene.apache.org
>>>> Subject: Re: Compressing field content with Lucene 3.0
>>>>
>>>> 10x Uwe for your answer,
>>>>
>>>> It is good news that data compressed with Field.Store.COMPRESS with 2.4
>>>> will be retrieved properly from 3.0.
>>>>
>>>>  From your answer I understand that in 3.0 there is no API way to
>>>> compress some of the values of some field and not to compress other
>>>> values for the same field. We should choose either to compress all of
>>>> the values of that field (and keep them as bin values) or not to
>>>> compress any of values for that field?
>>>>
>>>> Cheers,
>>>> Ivan
>>>>
>>>>
>>>> Uwe Schindler wrote:
>>>>
>>>>         
>>>>> If it is a 2.4 index, you can read it without any problems. It is only
>>>>>
>>>>>           
>>>> no
>>>>
>>>>         
>>>>> longer possible to add fields with Field.Store.COMPRESS. Nothing more
>>>>> changed.
>>>>>
>>>>> If you want to add field with some compression, you have to compress
>>>>> yourself e.g. to a byte[]. You can then add this byte[] as a binary
>>>>>
>>>>>           
>>>> stored
>>>>
>>>>         
>>>>> field. How you deal with this is in your responsibility.
>>>>>
>>>>> -----
>>>>> Uwe Schindler
>>>>> H.-H.-Meier-Allee 63, D-28213 Bremen
>>>>> http://www.thetaphi.de
>>>>> eMail: uwe@thetaphi.de
>>>>>
>>>>>
>>>>>
>>>>>           
>>>>>> -----Original Message-----
>>>>>> From: Ivan Vasilev [mailto:ivasilev@sirma.bg]
>>>>>> Sent: Monday, December 28, 2009 7:13 PM
>>>>>> To: LUCENE MAIL LIST
>>>>>> Subject: Compressing field content with Lucene 3.0
>>>>>>
>>>>>> Hi Guys,
>>>>>>
>>>>>> Could you give me advice how to deal with Lucene 3.0 with 2.4 indexes
>>>>>> that contain compressed data.
>>>>>>
>>>>>> Our case is following - we have code like this:
>>>>>>
>>>>>> Field.Store fieldStored = storedFieldsSet.contains(fieldName) ?
>>>>>> (fieldValue.length() >= COMPRESS_THRESHOLD ? Field.Store.COMPRESS :
>>>>>> Field.Store.YES) : Field.Store.NO;
>>>>>> Field.Index fieldIndexed = indexedFieldsSet.contains(fieldName) ?
>>>>>> Field.Index.ANALYZED : Field.Index.NO;
>>>>>> doc.add(new Field(fieldName, fieldValue, fieldStored, fieldIndexed));
>>>>>>
>>>>>> So for one and the same field some values are compressed in the
>>>>>>             
>> indexes
>>     
>>>>>> other values are not.
>>>>>> Reading Lucene documentation I understand that all the values for
>>>>>>             
>> some
>>     
>>>>>> field should be either compressed or not compressed OR we should
>>>>>>
>>>>>>             
>>>> somehow
>>>>
>>>>         
>>>>>> keep which values for which fields are compressed. If this is so it
>>>>>> would be very difficult to migrate our system to Lucene 3.0 without
>>>>>>
>>>>>>             
>>>> need
>>>>
>>>>         
>>>>>> of re indexing.
>>>>>> If I am not right could you tell me please:
>>>>>> 1. How to read these indexes (created with the code above with Lucene
>>>>>> 2.4) with Lucene 3.0? I mean when fetching field values how to know
>>>>>>
>>>>>>             
>>>> when
>>>>
>>>>         
>>>>>> to use CompressionTools.decompressString(..) and when to skip it?
>>>>>> 2. Is there possibility in Lucene 3.0 again to compress values of
>>>>>>             
>> some
>>     
>>>>>> docs for certain field and for other docs the values for the same
>>>>>>             
>> field
>>     
>>>>>> not to be compressed?
>>>>>>
>>>>>> Cheers,
>>>>>> Ivan
>>>>>>
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>             
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>> __________ NOD32 3990 (20090406) Information __________
>>>>>
>>>>> This message was checked by NOD32 antivirus system.
>>>>> http://www.eset.com
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>           
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>         
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>> __________ NOD32 3990 (20090406) Information __________
>>>
>>> This message was checked by NOD32 antivirus system.
>>> http://www.eset.com
>>>
>>>
>>>
>>>
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>     
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> __________ NOD32 3990 (20090406) Information __________
>
> This message was checked by NOD32 antivirus system.
> http://www.eset.com
>
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 29 19:29:32 2009
Return-Path: <java-user-return-44292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68473 invoked from network); 29 Dec 2009 19:29:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Dec 2009 19:29:31 -0000
Received: (qmail 86798 invoked by uid 500); 29 Dec 2009 19:29:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86728 invoked by uid 500); 29 Dec 2009 19:29:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86718 invoked by uid 99); 29 Dec 2009 19:29:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Dec 2009 19:29:29 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Dec 2009 19:29:20 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NPhkZ-0002gj-J3
	for java-user@lucene.apache.org; Tue, 29 Dec 2009 11:28:59 -0800
Message-ID: <26958815.post@talk.nabble.com>
Date: Tue, 29 Dec 2009 11:28:59 -0800 (PST)
From: lucene-newbie123 <tks423@gmail.com>
To: java-user@lucene.apache.org
Subject: Result of query not what I expect
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: tks423@gmail.com


Hi,

I am creating an index successfully and the field called "note" that I am
searching against has the term "background". But when I run the query it
returns some completely unrelated term for the first hit. Here is the code:

<code>
       List<EmployeeNote> employeeNotes =
employeeDAO.getAllEmployeeNotes(clientId);
    	
  	   //indexDir is the directory that hosts Lucene's index files
   	   File   indexDir = new File("C:\\luceneIndex");
   	   Analyzer luceneAnalyzer = new
StandardAnalyzer(Version.LUCENE_CURRENT);
   	   IndexWriter indexWriter = new
IndexWriter(indexDir,luceneAnalyzer,true,MaxFieldLength.UNLIMITED);
       Query query = null;
       Document doc = new Document();
       IndexSearcher searcher = null;          
       TopDocs hits = null;
       
    	try {            
            
            for(EmployeeNote employeeNote : employeeNotes){
                        	
            	doc.add(new Field("id", employeeNote.getId().toString(), 
            			Field.Store.YES, Field.Index.NOT_ANALYZED));
            	doc.add(new Field("note", employeeNote.getNote(), 
            			Field.Store.YES, Field.Index.ANALYZED));
            	
            	indexWriter.addDocument(doc); 
            }
        	
        	indexWriter.optimize();
        	indexWriter.close();
        	
            IndexReader reader =
IndexReader.open(FSDirectory.open(indexDir), true); // only searching, so
read-only=true

            searcher = new IndexSearcher(reader);            
        	
            QueryParser qp = new QueryParser("note", luceneAnalyzer);
			query = qp.parse("note:(+background)"); 
			hits = searcher.search(query, 50);
            
			Document docx = searcher.doc(hits.scoreDocs[0].doc); //test to see what
first hit is                     
            String doctitle = docx.get("note");            
            System.out.println("Here is the note: " + doctitle);
</code>
-- 
View this message in context: http://old.nabble.com/Result-of-query-not-what-I-expect-tp26958815p26958815.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 29 20:27:24 2009
Return-Path: <java-user-return-44293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81624 invoked from network); 29 Dec 2009 20:27:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Dec 2009 20:27:24 -0000
Received: (qmail 40233 invoked by uid 500); 29 Dec 2009 20:27:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40148 invoked by uid 500); 29 Dec 2009 20:27:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40138 invoked by uid 99); 29 Dec 2009 20:27:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Dec 2009 20:27:21 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Dec 2009 20:27:11 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 0579071C9AD; Tue, 29 Dec 2009 12:26:50 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id E999D71C900
	for <java-user@lucene.apache.org>; Tue, 29 Dec 2009 12:26:50 -0800 (PST)
Date: Tue, 29 Dec 2009 12:26:50 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: CANNOT use a * or ? symbol as the first character of a search.
In-Reply-To: <010301ca8791$d361cc50$1b4f010a@ufsoft.com.cn>
Message-ID: <Pine.LNX.4.64.0912291225480.18780@radix.cryptio.net>
References: <4B385338.9000707@gmail.com> <00e801ca8790$4ca2ab90$1b4f010a@ufsoft.com.cn>
 <010301ca8791$d361cc50$1b4f010a@ufsoft.com.cn>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII


: References: <4B385338.9000707@gmail.com>
:     <00e801ca8790$4ca2ab90$1b4f010a@ufsoft.com.cn>
: Subject: CANNOT use a * or ? symbol as the first character of a search.

http://people.apache.org/~hossman/#threadhijack
Thread Hijacking on Mailing Lists

When starting a new discussion on a mailing list, please do not reply to 
an existing message, instead start a fresh email.  Even if you change the 
subject line of your email, other mail headers still track which thread 
you replied to and your question is "hidden" in that thread and gets less 
attention.   It makes following discussions in the mailing list archives 
particularly difficult.
See Also:  http://en.wikipedia.org/wiki/User:DonDiego/Thread_hijacking




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 29 21:23:24 2009
Return-Path: <java-user-return-44294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93398 invoked from network); 29 Dec 2009 21:23:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Dec 2009 21:23:23 -0000
Received: (qmail 75511 invoked by uid 500); 29 Dec 2009 21:23:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74819 invoked by uid 500); 29 Dec 2009 21:23:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74064 invoked by uid 99); 29 Dec 2009 21:19:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Dec 2009 21:19:09 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.220.210 as permitted sender)
Received: from [209.85.220.210] (HELO mail-fx0-f210.google.com) (209.85.220.210)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Dec 2009 21:18:59 +0000
Received: by fxm2 with SMTP id 2so10301486fxm.5
        for <java-user@lucene.apache.org>; Tue, 29 Dec 2009 13:18:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=w2sx3Y2BvJRp3uAsLhswXoQOJE7yOzmXx5Zvsy8yKZ0=;
        b=WBkqIM9vZqwB6+hli0jytITvs+mP4J2rNvHh/UkQEhQ4Nal+dOKAgXFIBW4qRhBC1b
         XTphC08UKSP8NxYDHIgJMY1y7ftFczo3+spLZHphwMjATGjFpVjYBwe0wpZVhr4gJJx9
         Ir3KOpsZ0WNc/M/vMwl76MXwAebZQUxNdwP6w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=ciP6/7+HRjIuXtCyZPaal9GwfkT6Cd/jxqa5r/l+F37zvPtRBWZayYkY3OFuuYRYx+
         los/U7zhks8dUqySYE30On5tQgfbX6jR759rX2AZjIngrjvnjyMmO3x1x7ZEEBqg1zJr
         RwQClvogVYHZwMLWNdroqNzIorMxzFnp97RlQ=
MIME-Version: 1.0
Received: by 10.223.143.12 with SMTP id s12mr5833681fau.30.1262121518360; Tue, 
	29 Dec 2009 13:18:38 -0800 (PST)
In-Reply-To: <26958815.post@talk.nabble.com>
References: <26958815.post@talk.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 29 Dec 2009 21:18:18 +0000
Message-ID: <8c4e68610912291318i78876268w709a324af5cf1a76@mail.gmail.com>
Subject: Re: Result of query not what I expect
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi


You need to move the Document doc =3D new Document(); line to inside
your for loop.  The code as it stands is adding data to a single
document instance that is being added to the index for each note, with
ever increasing amounts of data.

Or look at reusing Field instances with setValue() calls. That would
be more efficient but is a bit more complex - for your simple program
probably best to create a new Document for each note.

Tip: Luke is invaluable for seeing what an index holds, and a lot more.


--
Ian.


On Tue, Dec 29, 2009 at 7:28 PM, lucene-newbie123 <tks423@gmail.com> wrote:
>
> Hi,
>
> I am creating an index successfully and the field called "note" that I am
> searching against has the term "background". But when I run the query it
> returns some completely unrelated term for the first hit. Here is the cod=
e:
>
> <code>
> =A0 =A0 =A0 List<EmployeeNote> employeeNotes =3D
> employeeDAO.getAllEmployeeNotes(clientId);
>
> =A0 =A0 =A0 =A0 =A0 //indexDir is the directory that hosts Lucene's index=
 files
> =A0 =A0 =A0 =A0 =A0 File =A0 indexDir =3D new File("C:\\luceneIndex");
> =A0 =A0 =A0 =A0 =A0 Analyzer luceneAnalyzer =3D new
> StandardAnalyzer(Version.LUCENE_CURRENT);
> =A0 =A0 =A0 =A0 =A0 IndexWriter indexWriter =3D new
> IndexWriter(indexDir,luceneAnalyzer,true,MaxFieldLength.UNLIMITED);
> =A0 =A0 =A0 Query query =3D null;
> =A0 =A0 =A0 Document doc =3D new Document();
> =A0 =A0 =A0 IndexSearcher searcher =3D null;
> =A0 =A0 =A0 TopDocs hits =3D null;
>
> =A0 =A0 =A0 =A0try {
>
> =A0 =A0 =A0 =A0 =A0 =A0for(EmployeeNote employeeNote : employeeNotes){
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0doc.add(new Field("id", employeeNote.getId=
().toString(),
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Field.Stor=
e.YES, Field.Index.NOT_ANALYZED));
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0doc.add(new Field("note", employeeNote.get=
Note(),
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Field.Stor=
e.YES, Field.Index.ANALYZED));
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0indexWriter.addDocument(doc);
> =A0 =A0 =A0 =A0 =A0 =A0}
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0indexWriter.optimize();
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0indexWriter.close();
>
> =A0 =A0 =A0 =A0 =A0 =A0IndexReader reader =3D
> IndexReader.open(FSDirectory.open(indexDir), true); // only searching, so
> read-only=3Dtrue
>
> =A0 =A0 =A0 =A0 =A0 =A0searcher =3D new IndexSearcher(reader);
>
> =A0 =A0 =A0 =A0 =A0 =A0QueryParser qp =3D new QueryParser("note", luceneA=
nalyzer);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0query =3D qp.parse("note:(=
+background)");
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0hits =3D searcher.search(q=
uery, 50);
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Document docx =3D searcher=
.doc(hits.scoreDocs[0].doc); //test to see what
> first hit is
> =A0 =A0 =A0 =A0 =A0 =A0String doctitle =3D docx.get("note");
> =A0 =A0 =A0 =A0 =A0 =A0System.out.println("Here is the note: " + doctitle=
);
> </code>
> --
> View this message in context: http://old.nabble.com/Result-of-query-not-w=
hat-I-expect-tp26958815p26958815.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 29 21:31:50 2009
Return-Path: <java-user-return-44295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97539 invoked from network); 29 Dec 2009 21:31:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 29 Dec 2009 21:31:49 -0000
Received: (qmail 91621 invoked by uid 500); 29 Dec 2009 21:31:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91537 invoked by uid 500); 29 Dec 2009 21:31:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91527 invoked by uid 99); 29 Dec 2009 21:31:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Dec 2009 21:31:47 +0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Dec 2009 21:31:37 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 5EA44D36008
	for <java-user@lucene.apache.org>; Tue, 29 Dec 2009 22:31:17 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 43OcjrMSrelk for <java-user@lucene.apache.org>;
	Tue, 29 Dec 2009 22:31:07 +0100 (CET)
Received: from VEGA (dslb-088-065-104-104.pools.arcor-ip.net [88.65.104.104])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 9E0E3D36001
	for <java-user@lucene.apache.org>; Tue, 29 Dec 2009 22:31:06 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <26958815.post@talk.nabble.com> <8c4e68610912291318i78876268w709a324af5cf1a76@mail.gmail.com>
Subject: RE: Result of query not what I expect
Date: Tue, 29 Dec 2009 22:31:04 +0100
Message-ID: <A006420164FF4B3B868C0206AD4EE5F6@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <8c4e68610912291318i78876268w709a324af5cf1a76@mail.gmail.com>
Thread-Index: AcqIzTFIpszI4tpaQ1WuVb9jBvDODQAAPQSw
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

Alternatively use doc.getFields().clear() on each iteration.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Ian Lea [mailto:ian.lea@gmail.com]
> Sent: Tuesday, December 29, 2009 10:18 PM
> To: java-user@lucene.apache.org
> Subject: Re: Result of query not what I expect
>=20
> Hi
>=20
>=20
> You need to move the Document doc =3D new Document(); line to inside
> your for loop.  The code as it stands is adding data to a single
> document instance that is being added to the index for each note, with
> ever increasing amounts of data.
>=20
> Or look at reusing Field instances with setValue() calls. That would
> be more efficient but is a bit more complex - for your simple program
> probably best to create a new Document for each note.
>=20
> Tip: Luke is invaluable for seeing what an index holds, and a lot =
more.
>=20
>=20
> --
> Ian.
>=20
>=20
> On Tue, Dec 29, 2009 at 7:28 PM, lucene-newbie123 <tks423@gmail.com>
> wrote:
> >
> > Hi,
> >
> > I am creating an index successfully and the field called "note" that =
I
> am
> > searching against has the term "background". But when I run the =
query it
> > returns some completely unrelated term for the first hit. Here is =
the
> code:
> >
> > <code>
> > =A0 =A0 =A0 List<EmployeeNote> employeeNotes =3D
> > employeeDAO.getAllEmployeeNotes(clientId);
> >
> > =A0 =A0 =A0 =A0 =A0 //indexDir is the directory that hosts Lucene's =
index files
> > =A0 =A0 =A0 =A0 =A0 File =A0 indexDir =3D new =
File("C:\\luceneIndex");
> > =A0 =A0 =A0 =A0 =A0 Analyzer luceneAnalyzer =3D new
> > StandardAnalyzer(Version.LUCENE_CURRENT);
> > =A0 =A0 =A0 =A0 =A0 IndexWriter indexWriter =3D new
> > IndexWriter(indexDir,luceneAnalyzer,true,MaxFieldLength.UNLIMITED);
> > =A0 =A0 =A0 Query query =3D null;
> > =A0 =A0 =A0 Document doc =3D new Document();
> > =A0 =A0 =A0 IndexSearcher searcher =3D null;
> > =A0 =A0 =A0 TopDocs hits =3D null;
> >
> > =A0 =A0 =A0 =A0try {
> >
> > =A0 =A0 =A0 =A0 =A0 =A0for(EmployeeNote employeeNote : =
employeeNotes){
> >
> > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0doc.add(new Field("id", =
employeeNote.getId().toString(),
> > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0Field.Store.YES,
> Field.Index.NOT_ANALYZED));
> > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0doc.add(new Field("note", =
employeeNote.getNote(),
> > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0Field.Store.YES, Field.Index.ANALYZED));
> >
> > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0indexWriter.addDocument(doc);
> > =A0 =A0 =A0 =A0 =A0 =A0}
> >
> > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0indexWriter.optimize();
> > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0indexWriter.close();
> >
> > =A0 =A0 =A0 =A0 =A0 =A0IndexReader reader =3D
> > IndexReader.open(FSDirectory.open(indexDir), true); // only =
searching,
> so
> > read-only=3Dtrue
> >
> > =A0 =A0 =A0 =A0 =A0 =A0searcher =3D new IndexSearcher(reader);
> >
> > =A0 =A0 =A0 =A0 =A0 =A0QueryParser qp =3D new QueryParser("note", =
luceneAnalyzer);
> > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0query =3D =
qp.parse("note:(+background)");
> > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0hits =3D =
searcher.search(query, 50);
> >
> > =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Document docx =3D
> searcher.doc(hits.scoreDocs[0].doc); //test to see what
> > first hit is
> > =A0 =A0 =A0 =A0 =A0 =A0String doctitle =3D docx.get("note");
> > =A0 =A0 =A0 =A0 =A0 =A0System.out.println("Here is the note: " + =
doctitle);
> > </code>
> > --
> > View this message in context: =
http://old.nabble.com/Result-of-query-not-
> what-I-expect-tp26958815p26958815.html
> > Sent from the Lucene - Java Users mailing list archive at =
Nabble.com.
> >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 30 10:57:16 2009
Return-Path: <java-user-return-44296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32821 invoked from network); 30 Dec 2009 10:57:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Dec 2009 10:57:16 -0000
Received: (qmail 60525 invoked by uid 500); 30 Dec 2009 10:57:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59826 invoked by uid 500); 30 Dec 2009 10:57:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59760 invoked by uid 99); 30 Dec 2009 10:57:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Dec 2009 10:57:11 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aseldawy@gmail.com designates 209.85.218.222 as permitted sender)
Received: from [209.85.218.222] (HELO mail-bw0-f222.google.com) (209.85.218.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Dec 2009 10:57:01 +0000
Received: by bwz22 with SMTP id 22so7610692bwz.5
        for <multiple recipients>; Wed, 30 Dec 2009 02:56:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:cc:content-type;
        bh=FdzNKfaBhl5j+6nwFxx47bDXD3LZIFI9jq3UHO7QXrU=;
        b=CEjLXvDKSsecHNRNyDgY8A19VD668w/fstNhyaIziLUdndK5y+dzJ3jz7oyA/J1ezM
         yfnkKEwzSTMUr/ya4H6b+3r7LbQAnuZ1ccO0qtJWxS6hp6fzRVSIvGI/+7VOwYOdDZ/9
         Ki78uEjG4Ker0Q7k3xnz67wDuUqNgDj6HryYE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :cc:content-type;
        b=Nk40czajHXICuORHrYCYyset3urp+6LDkf0kKUib1DS8KlpuyuBxhv6drc4T1U3OwI
         nGT4I2lSuMJL+ylO3Jef95PZ3M6XIEtLP9bV/RWw5K9oEBVZ4z1ldcKboDpkAmiO9NP6
         9VUl5/iSdDx0C83ZvxqQGJEVs3X3qLI9Dtqjk=
MIME-Version: 1.0
Received: by 10.204.2.73 with SMTP id 9mr4123660bki.159.1262170599172; Wed, 30 
	Dec 2009 02:56:39 -0800 (PST)
In-Reply-To: <6B18B9E94727414D87F8F7E91EBC5F90@VEGA>
References: <e5de07e90912271249g25a0f8e4u49c3fb03d3ecd458@mail.gmail.com> 
	<Pine.LNX.4.64.0912271923370.12519@radix.cryptio.net> <7054C18D96924AA187F6D3A3FBDFC8DB@VEGA> 
	<6B18B9E94727414D87F8F7E91EBC5F90@VEGA>
From: Ahmed El-dawy <aseldawy@gmail.com>
Date: Wed, 30 Dec 2009 12:56:19 +0200
Message-ID: <e5de07e90912300256h4bca5993wf1349c71833152d6@mail.gmail.com>
Subject: Re: Using the new tokenizer API from a jar file
To: java-user@lucene.apache.org
Cc: solr-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174c458035abcb047beffe41

--0015174c458035abcb047beffe41
Content-Type: text/plain; charset=UTF-8

Thanks all for your interest, especially Uwe. I asked this question on
solr-user at the beginning but I got no reply. That's why I re-asked the
question at java-user.
Thanks for your efforts. I will try it now.

On Mon, Dec 28, 2009 at 12:02 PM, Uwe Schindler <uwe@thetaphi.de> wrote:

> I opened https://issues.apache.org/jira/browse/LUCENE-2182 about this
> problem and already have a fix.
>
> This is really a bug. The solution is simple because you have to load the
> IMPL class using the same classloader as the passed in interface. The
> default for Class.forName is the classloader of AttributeSource.class,
> which
> is the wrong one.
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
> > -----Original Message-----
> > From: Uwe Schindler [mailto:uwe@thetaphi.de]
> > Sent: Monday, December 28, 2009 9:20 AM
> > To: java-user@lucene.apache.org
> > Cc: solr-user@lucene.apache.org
> > Subject: RE: Using the new tokenizer API from a jar file
> >
> > The question on this list was ok,as it shows a minor problem of using the
> > new TokenStream API with Solr.
> >
> > His plugin was loaded correctly, because if Lucene says, that it cannot
> > find
> > the *Impl class, it was able to load the interface class before -> the
> JAR
> > file is "visible" to the JVM.
> >
> > The problem is the following and has to do with classloaders:
> >
> > 1. We have different class loaders for different places in Solr. Solr
> uses
> > for plugins a SolrResourceLoader that searches for JAR files in the local
> > lib folder before handling over to the webapp's classloader.
> >
> > 2. Initially, the lucene JAR is loaded by the Webapp's class loader
> >
> > 3. If a AttributeImpl is placed into a jar file e.g. in the plugin folder
> > of
> > solr (the lib folder where solr loads all resources, stop words,...), the
> > loading mechanism inside AttributeSource.DEFAULT_ATTRIBUTE_FACTORY is
> > unable
> > to locate the class file, because Class.forName() always uses the class'
> > classloader and not the global/thread one's. So AttributeSource will only
> > find the class file if it is in the *same* directory as the lucene-
> > core.jar
> > file (WEB-INF/lib) and so accessible by the webapp's class loader.
> >
> > A good introduction about the problem is this one:
> >
> http://www.theserverside.com/tt/articles/content/dm_classForname/DynLoad.p
> > df
> >
> > The problem is here described for the JVM extensions folder but also
> > applies
> > to solr, because it has another classloader for plugins.
> >
> > A solution to fix this would be in lucene to use the thread's context
> > class
> > loader in AttributeSource.DEFAULT_ATTRIBUTE_FACTORY, but I strongly
> > discourage this, as it would break the whole AttributeSource
> functionality
> > if you add two different attributes with same class names from different
> > class loaders to the AttributeSource.
> >
> > The only solution to the problem is placing the JAR file inside the
> > WEB-INF/lib folder where lucene-core.jar is. Plugins in Solr cannot
> define
> > own attribute implementations. Alternatively he could try to force
> preload
> > the class by calling Class.forName in his plugin initialization code on
> > the
> > Impl class. But I am not sure if this works (as Java handles classes from
> > different classloaders different).
> >
> > Uwe
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> > > -----Original Message-----
> > > From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
> > > Sent: Monday, December 28, 2009 4:27 AM
> > > To: java-user@lucene.apache.org
> > > Subject: Re: Using the new tokenizer API from a jar file
> > >
> > >
> > > : I tried to use it with solr and the problems began. It's always
> > telling
> > > me
> > > : that it cannot find the class GlossAttributeImpl. I think the problem
> > is
> > > : that my jar file is added to the class path at run time not from the
> > > command
> > > : line. Do you have a good solution or workaround?
> > >
> > > You're likely to get mmore helpful answers from other people in the
> Solr
> > > User community (solr-user@lucene.a.o)
> > >
> > > As long as you put your jar in the "lib" directory under your solr home
> > > (or refrence it using a <lib/> directive in your solrconfig.xml) Solr's
> > > plugin loader will take care of hte classloading for you.
> > >
> > > if you are confident you have your jar in the correct place, please
> > email
> > > solr-user with the ClassNotFound stack trace from your solr logs, as
> > well
> > > as hierarchy  of files from your solr home (ie: the output of "find .")
> > >
> > >
> > > -Hoss
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
regards,
Ahmed Saad

--0015174c458035abcb047beffe41--

From java-user-return-44297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 30 15:19:22 2009
Return-Path: <java-user-return-44297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17137 invoked from network); 30 Dec 2009 15:19:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Dec 2009 15:19:22 -0000
Received: (qmail 56347 invoked by uid 500); 30 Dec 2009 15:19:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56273 invoked by uid 500); 30 Dec 2009 15:19:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56263 invoked by uid 99); 30 Dec 2009 15:19:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Dec 2009 15:19:19 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jasontesser@gmail.com designates 209.85.223.195 as permitted sender)
Received: from [209.85.223.195] (HELO mail-iw0-f195.google.com) (209.85.223.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Dec 2009 15:19:11 +0000
Received: by iwn33 with SMTP id 33so425204iwn.29
        for <java-user@lucene.apache.org>; Wed, 30 Dec 2009 07:18:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=8r6PJXz7uk7ysSW2SqhFrfB4lQer60dIZk3N8EmCPic=;
        b=pxMWxFha+xX6BCTQMGOUBNr9uzlmbimu9AxCdmclj7sDEo2/+HFGIZBGFTTaTEHrlV
         U2lvqBRGEhgE9RnqwF+ms3uEHHgAXgcpw6wkaxwMojXQ72EzT4yj0Xyhr/6EguICmOqm
         6RpfiutDBSl2/CC4i8SdCUALmODQmMqtkc6Lg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=Mvefb5AWeL4DtaSrYOwoyi9sO83zD+/AJW/ReO1QNd6JqwMKSS9iNjK0KatFQkmg7I
         4pOijfs7I+VHijCDJeWFRJh0pnxDcDNRdm1zW+3FIRw6g+gHue5UMIunGoqupzdLFRfL
         cw0tGOI3fwtMWOEg9djZTxeaa+VMiEp7TTme8=
MIME-Version: 1.0
Received: by 10.231.125.28 with SMTP id w28mr1350441ibr.50.1262186330220; Wed, 
	30 Dec 2009 07:18:50 -0800 (PST)
Date: Wed, 30 Dec 2009 10:18:50 -0500
Message-ID: <98bbb46a0912300718uc699bf0x43728366d9dbdae6@mail.gmail.com>
Subject: Question about many fields within a single index
From: Jason Tesser <jasontesser@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

I have a situation where I might have 1000 different types of Lucene
Documents each with 10 or so fields with different names that get
indexed.

I am wondering if this is bad to do within Lucene.  I end up with
10,000 fields within the index although any given document has only 10
or so.

I was hoping not to have to have many indexes under the covers if I
can avoid it but I don't want performance to suffer either.

Any thoughts?

Thanks,
Jason Tesser
dotCMS Lead Development Manager
1-305-858-1422

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 30 16:34:23 2009
Return-Path: <java-user-return-44298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36635 invoked from network); 30 Dec 2009 16:34:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Dec 2009 16:34:23 -0000
Received: (qmail 28891 invoked by uid 500); 30 Dec 2009 16:34:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28822 invoked by uid 500); 30 Dec 2009 16:34:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28812 invoked by uid 99); 30 Dec 2009 16:34:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Dec 2009 16:34:20 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.219.225 as permitted sender)
Received: from [209.85.219.225] (HELO mail-ew0-f225.google.com) (209.85.219.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Dec 2009 16:34:12 +0000
Received: by ewy25 with SMTP id 25so14922733ewy.5
        for <java-user@lucene.apache.org>; Wed, 30 Dec 2009 08:33:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=pxCd9/t1ywl9xRt1k9DXdBV+sCFonVfr/Cey6KUxy3g=;
        b=CRBo2FoZ5wHaZpAZcoK5KlYgNLMgKxyKe5Z/bKaSUPlIaypC9L7pKO/udFdmdUWmqq
         vJb/IWAZaGqQQdOU+JhmNBUm8PIcfGtk78dLQVf8vjrA6zBzgl5M+8w3znKrxCfKF1iS
         hImFMYtIecSIfJeGvIa7hh1/vQzFS1yA9Sfic=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=FDuWnIjs+xIAiPxg4TWoMiTj7xmQUvmPdPINa0kTBM6+H2HvNFLEdvgmZxSFVCpD9J
         GPsLc2WlsNeWmIt6YPK5e0rodohAy6FxJ6bXfrC008Nxkjz1f0aSre8SNyVrTzj8cBsw
         gXDKWcLvVr+/bl4yjMDQgSTaiDNKRjYvTAC60=
MIME-Version: 1.0
Received: by 10.216.86.72 with SMTP id v50mr6878032wee.184.1262190831830; Wed, 
	30 Dec 2009 08:33:51 -0800 (PST)
In-Reply-To: <dcd377ca0912290055j4258e398v51a91cce3e936864@mail.gmail.com>
References: <dcd377ca0912281008t572f6f25r16f042371ef581db@mail.gmail.com>
	 <359a92830912281251s5ac1ac8dn6ef65040f32354b7@mail.gmail.com>
	 <dcd377ca0912290055j4258e398v51a91cce3e936864@mail.gmail.com>
Date: Wed, 30 Dec 2009 11:33:51 -0500
Message-ID: <359a92830912300833y460308e8te913b808e9e96b22@mail.gmail.com>
Subject: Re: Multi-value (complex) field indexing
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6dab18e2b88a0047bf4b413
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6dab18e2b88a0047bf4b413
Content-Type: text/plain; charset=ISO-8859-1

You'll have one problem if you can't return a different increment gap,
you'll
match across rows.

Say you index row 1 with "aaa" "bbb" "ccc", then row two with
"ddd", "eee", "fff". Just adding multiple rows to a single document,
that document would match the phrase "ccc ddd".

I don't understand why you are able to index things but "have no
access to analyzer configuration", unless you're talking about an
index that's already been built. If you are indexing documents, it
seems to me that you *have* to be able to derive from one of the
standard analyzers and override getPositionIncrementGap,
that's all there is to providing a different value here.....

FWIW
Erick

On Tue, Dec 29, 2009 at 3:55 AM, Leonid M. <leonidms@gmail.com> wrote:

> You got me, thanks a lot.
> This is exactly I was trying to ask (meaning find this values within the
> row
> number 2).
>
> I'm afraid I'm not be able to proceed because I have no access to analyzer
> configuration (the system - JIRA 4.0) uses the hardcoded pre-configured set
> of default analyzers.
>
> Thanks a lot, you provided clear and brief answer to my question.
> --
> Best regards,
> Leonids Maslovs
>
>
>
> On Mon, Dec 28, 2009 at 10:51 PM, Erick Erickson <erickerickson@gmail.com
> >wrote:
>
> > I'm not following entirely here, but multi-valued fields are supported.
> > Something like (bad pseudo-code here)
> > doc = new Document
> > doc.add(new Field("rows", <row1 text", stored, indexed));
> > doc.add(new Field("rows", <row2 text", stored, indexed));
> > indexWriter.addDocument(doc);
> >
> > If your analyzer implements getPositionIncrementGap, you can keep your
> > rows separate (search the mail archives for getPositionIncrementGap for
> > more explanation).
> >
> > Then, if you're searching with a proximity (or phrase) less than your
> > increment
> > gap, you'll only get matches within a row. You wouldn't get a search
> > "against
> > a particular row" if, by that phrase, you meant "only look in row 2". If
> > you
> >
> > mean "only match the document if the phrase is in a *some* row in the
> doc",
> > it should work.
> >
> > The SpanNear query should work, as should regular phrase queries.
> >
> > If this is off base, could you provide some more examples?
> >
> > HTH
> > Erick
> >
> >
> >
> > On Mon, Dec 28, 2009 at 1:08 PM, Leonid M. <leonidms@gmail.com> wrote:
> >
> > > *Problem description*
> > >
> > >   - I have a complex multi-value field. So, each value consist from
> > several
> > >   rows.
> > >   - Each rows consists from several cells/items
> > >
> > >
> > > I want to be able to match those issues, which have a *row* with
> > > cellA="AAA"
> > > and cellB="BBB". Having a search by all the table (meaning - any row
> > > cellA="AAA" and any row cellB="BBB") is something I understand and
> > > hopefully
> > > could easily implement by having different FieldIndexers for each
> column.
> > >
> > > *Example:*
> > > *
> > > *
> > > *Field value:*
> > > *Row 1: [AAA] [BBB] [XXX]*
> > > *Row 2: [CCC] [BBB] [XXX]
> > > *
> > > I would like to run [CCC][BBB] query to look for rows containing these
> > > values and in this case I will get empty result set, since no such
> field
> > is
> > > present.
> > >
> > > *Question*
> > > Is there any option to index / look for particular row only?
> > >
> > > I understand that I could make each row to be a separate document, but
> it
> > > doesn't sit me (it's 3rd party system and I have no access for new
> > document
> > > creation, all I could do - to extend system's indexing mechanism).
> > >
> > > So, could I somehow index multiple rows within one document and
> construct
> > > Lucene search against some particular *row*?
> > >
> > > --
> > > Best regards,
> > > Leonids Malovs
> > >
> >
>

--0016e6dab18e2b88a0047bf4b413--

From java-user-return-44299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 30 16:47:12 2009
Return-Path: <java-user-return-44299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40819 invoked from network); 30 Dec 2009 16:47:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Dec 2009 16:47:12 -0000
Received: (qmail 42435 invoked by uid 500); 30 Dec 2009 16:47:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42342 invoked by uid 500); 30 Dec 2009 16:47:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42332 invoked by uid 99); 30 Dec 2009 16:47:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Dec 2009 16:47:09 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Dec 2009 16:47:00 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NQ1h2-0001DM-4o
	for java-user@lucene.apache.org; Wed, 30 Dec 2009 08:46:40 -0800
Message-ID: <26969517.post@talk.nabble.com>
Date: Wed, 30 Dec 2009 08:46:40 -0800 (PST)
From: Mohsen Saboorian <mohsens@gmail.com>
To: java-user@lucene.apache.org
Subject: Highlighter doesn't highlight wildcard queries after updating to
 2.9.1/3.0.0
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mohsens@gmail.com


After updating to 2.9.x or 3.0, highlighter doesn't work on wildcard queries
like "abc*". I thought that it would be because of scoring, so I also set
myIndexSearcher.setDefaultFieldSortScoring(true, true) before searching.
I tested with both QueryScorer and QueryTermScorer.

In my custom highlightTerm(String originalText, TokenGroup tokenGroup)
method, tokenGroup.getTotalScore() is always <= 0 for these queries.

Mohsen
-- 
View this message in context: http://old.nabble.com/Highlighter-doesn%27t-highlight-wildcard-queries-after-updating-to-2.9.1-3.0.0-tp26969517p26969517.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 30 16:51:30 2009
Return-Path: <java-user-return-44300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41741 invoked from network); 30 Dec 2009 16:51:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Dec 2009 16:51:30 -0000
Received: (qmail 52411 invoked by uid 500); 30 Dec 2009 16:51:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52316 invoked by uid 500); 30 Dec 2009 16:51:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52306 invoked by uid 99); 30 Dec 2009 16:51:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Dec 2009 16:51:28 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 209.85.221.203 as permitted sender)
Received: from [209.85.221.203] (HELO mail-qy0-f203.google.com) (209.85.221.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Dec 2009 16:51:18 +0000
Received: by qyk41 with SMTP id 41so5714942qyk.29
        for <java-user@lucene.apache.org>; Wed, 30 Dec 2009 08:50:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :x-enigmail-version:content-type:content-transfer-encoding;
        bh=eKFimhH07WFVDJTntoIqPR2nU20GJAJ12gPJ60ZzixE=;
        b=BPjedp1tIfyC0vZj04covP/lyI2VdBlinG3sEdZXVEj25dBLOIH1FkcJ4T2RV8RDBk
         CKQ2UxRfNM/GlWgjBF41gTaqIx+ACDXhrrhaD0JmS4vukeHhS1dRAjMSqgHNI8bsHJlf
         NuvXQ1RErfnEdSQiyAx3b81xFf7DwBHI9CP/A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:x-enigmail-version:content-type
         :content-transfer-encoding;
        b=ZVP3z1sCXDqiJCalpYxHcVTRQDx4WJJvq+hrxiZFBkhtgxuZ17LFzi0dVyyOyniu5K
         P9CYsfGBs2yLmDmYmgeSxHu9MpSuKQrBLUEqqL/Fx0+NN1KgMk8M0USRz3ryRi6J/wfe
         dGhrNCPMePvAMukF+AL+pm7YlODGrooMjWcTc=
Received: by 10.224.110.5 with SMTP id l5mr8804756qap.10.1262191857914;
        Wed, 30 Dec 2009 08:50:57 -0800 (PST)
Received: from ?192.168.1.102? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 6sm37177697qwd.26.2009.12.30.08.50.56
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 30 Dec 2009 08:50:56 -0800 (PST)
Message-ID: <4B3B84C0.3040001@gmail.com>
Date: Wed, 30 Dec 2009 11:50:08 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.23 (X11/20090817)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Highlighter doesn't highlight wildcard queries after updating
 to 2.9.1/3.0.0
References: <26969517.post@talk.nabble.com>
In-Reply-To: <26969517.post@talk.nabble.com>
X-Enigmail-Version: 0.96.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Mohsen Saboorian wrote:
> After updating to 2.9.x or 3.0, highlighter doesn't work on wildcard queries
> like "abc*". I thought that it would be because of scoring, so I also set
> myIndexSearcher.setDefaultFieldSortScoring(true, true) before searching.
> I tested with both QueryScorer and QueryTermScorer.
>
> In my custom highlightTerm(String originalText, TokenGroup tokenGroup)
> method, tokenGroup.getTotalScore() is always <= 0 for these queries.
>
> Mohsen
>   
Can you boil the issue down to a unit test?

-- 
- Mark

http://www.lucidimagination.com




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 30 16:56:45 2009
Return-Path: <java-user-return-44301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43402 invoked from network); 30 Dec 2009 16:56:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Dec 2009 16:56:45 -0000
Received: (qmail 63858 invoked by uid 500); 30 Dec 2009 16:56:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63782 invoked by uid 500); 30 Dec 2009 16:56:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63772 invoked by uid 99); 30 Dec 2009 16:56:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Dec 2009 16:56:43 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.219.225 as permitted sender)
Received: from [209.85.219.225] (HELO mail-ew0-f225.google.com) (209.85.219.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Dec 2009 16:56:36 +0000
Received: by ewy25 with SMTP id 25so14946145ewy.5
        for <java-user@lucene.apache.org>; Wed, 30 Dec 2009 08:56:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=Z0qedclJ0Ovz9nUJJVz+Pyq3WlIP30oGiYUK7ViEj9w=;
        b=jcz/YVOyY1duKNMEdzqmI2nHnabOCQmdf56OcO0bupj7wJ36kDnlv/cPV28kQ9PKYE
         lQxGT3jNfD+InH+HgMmMBc3e2RfcGFQCDgVD3YpGV08W1VpH0YOGGajbHrF1NfuBCuHX
         BZtZ26LBsZCdllq6vHiy1f9CUL7Vvrl0HiyWY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=FWUvzGFkshRnyZqp9DtCCnUkdafY6jfR8EQZ38Q+IWuqzVA9Ij2MZISW9yq8DOlGP6
         6vCmQxDYpgMjJdUxQCYMGD+KJ5slxppkT0O2dENKh6qVkVUqBKSqhdumibOXyvo/00cX
         nsb6mGiJkcRhlJBI1nbLZQPOcX0eYoukZk5aQ=
MIME-Version: 1.0
Received: by 10.216.87.143 with SMTP id y15mr6483555wee.39.1262192174645; Wed, 
	30 Dec 2009 08:56:14 -0800 (PST)
In-Reply-To: <98bbb46a0912300718uc699bf0x43728366d9dbdae6@mail.gmail.com>
References: <98bbb46a0912300718uc699bf0x43728366d9dbdae6@mail.gmail.com>
Date: Wed, 30 Dec 2009 11:56:14 -0500
Message-ID: <359a92830912300856n4007dc59hca1cf086657d653e@mail.gmail.com>
Subject: Re: Question about many fields within a single index
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d77e32354205047bf50497

--0016e6d77e32354205047bf50497
Content-Type: text/plain; charset=ISO-8859-1

As far as I know, no problem. There's no penalty that I
know of for having this kind of setup. Of course your
mileage may vary, and a relevant question is "why do
you care?" That is, if your total index is 100M in size,
pretty much no matter how Lucene implements the internal
data structures you won't notice any performance issues.

If your index is 100M *documents* and 1T in size, you care
very much about internal efficiency. So a few more details
would probably generate more useful answers <G>....

But "more useful answers" probably will boil down to
"spin up a test index and see", since there are so many
variables to search performance.

I would imagine, though, that you'd see some non-typical
search response times due to cache loading. In
a more "usual" setup, I'd expect the first query or two
that caused caches to load up to be anomalously
long, hence the notion of "warmup queries". I suspect
instead, that you'll see little bumps in search
time since it'll take a lot more queries to hit every field
that can be cached. Those bumps should be shorter though,
since presumably the fields won't contain as many terms.
But without more details, that's just a guess.

I guess about all I'm saying here is that there's no
reason not to go ahead and see...

HTH
Erick@NotEntirelyHelpful.org

On Wed, Dec 30, 2009 at 10:18 AM, Jason Tesser <jasontesser@gmail.com>wrote:

> I have a situation where I might have 1000 different types of Lucene
> Documents each with 10 or so fields with different names that get
> indexed.
>
> I am wondering if this is bad to do within Lucene.  I end up with
> 10,000 fields within the index although any given document has only 10
> or so.
>
> I was hoping not to have to have many indexes under the covers if I
> can avoid it but I don't want performance to suffer either.
>
> Any thoughts?
>
> Thanks,
> Jason Tesser
> dotCMS Lead Development Manager
> 1-305-858-1422
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6d77e32354205047bf50497--

From java-user-return-44302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 30 17:03:44 2009
Return-Path: <java-user-return-44302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44941 invoked from network); 30 Dec 2009 17:03:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Dec 2009 17:03:43 -0000
Received: (qmail 68979 invoked by uid 500); 30 Dec 2009 17:03:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68873 invoked by uid 500); 30 Dec 2009 17:03:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68858 invoked by uid 99); 30 Dec 2009 17:03:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Dec 2009 17:03:41 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=AWL,BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of leonidms@gmail.com designates 209.85.219.225 as permitted sender)
Received: from [209.85.219.225] (HELO mail-ew0-f225.google.com) (209.85.219.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Dec 2009 17:02:50 +0000
Received: by ewy25 with SMTP id 25so14952670ewy.5
        for <java-user@lucene.apache.org>; Wed, 30 Dec 2009 09:02:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=NEkVECFA0wHXlbv4dxPTUyyV07tAtsxvlT/ZIuhClUY=;
        b=jHDRkHLUXhqPiEqbfKxLHwb9GDgkAfaWrovflkTx5fL+kMMFICiG6L0xQJVclwjeXU
         vq2evt7EMsGQ0WarcpXnH9iwu3D/h0lyoxYJkRccBJr5TeQEiLOS1lHZ1NamAnVXamAC
         o5Shduh/lNEriR6fye5IYIkWynIZUaK/GQfVs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=sbSZBaeQ/NOCvwrA6U0S7cQAjIQzM1VhMl5WaAHBuaHPEbGfTFovkSeqRAff5DjFrO
         y8R8oaSbsiHQ54YwxQrlLcABHOVBq+PLlM2uFj7zU2xLF/B4CdlBiPiXodAhqLuOmLJn
         jtEeJz0ObOK5QHcLnnf2dtrDFYN9QeHEzCnfw=
MIME-Version: 1.0
Received: by 10.216.93.18 with SMTP id k18mr808098wef.218.1262192549655; Wed, 
	30 Dec 2009 09:02:29 -0800 (PST)
In-Reply-To: <359a92830912300833y460308e8te913b808e9e96b22@mail.gmail.com>
References: <dcd377ca0912281008t572f6f25r16f042371ef581db@mail.gmail.com>
	 <359a92830912281251s5ac1ac8dn6ef65040f32354b7@mail.gmail.com>
	 <dcd377ca0912290055j4258e398v51a91cce3e936864@mail.gmail.com>
	 <359a92830912300833y460308e8te913b808e9e96b22@mail.gmail.com>
Date: Wed, 30 Dec 2009 19:02:29 +0200
Message-ID: <dcd377ca0912300902n456ad4c3p507060a8de721493@mail.gmail.com>
Subject: Re: Multi-value (complex) field indexing
From: "Leonid M." <leonidms@gmail.com>
To: java-user <java-user@lucene.apache.org>
Content-Type: multipart/alternative; boundary=0016e6d976208f7677047bf51ae2

--0016e6d976208f7677047bf51ae2
Content-Type: text/plain; charset=UTF-8

* Yes, I understand the first part about two rows and querying.

* The problem is - I'm not the one creating those Analyzers and storing
documents into indexes. All I could say - "add this field to document", it's
as simple as this.


Luckily the system is built using Pico and OSGi, so I will try to replace
system Indexer.
Currently it seems to me that having a document per row is simpler solution,
am I wright? (no need for tuning analyzers and creating Span/Phrase queries,
which as far I understand could be inefficient)

Thanks a lot for Your feedback and input. You obviously have made the big
picture more clear for me.

btw, Happy New Year (it's coming, ho-ho-ho)
--
Best regards,
Leonids Maslovs



On Wed, Dec 30, 2009 at 6:33 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> Say you index row 1 with "aaa" "bbb" "ccc", then row two with
>

--0016e6d976208f7677047bf51ae2--

From java-user-return-44303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 30 17:18:57 2009
Return-Path: <java-user-return-44303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51750 invoked from network); 30 Dec 2009 17:18:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Dec 2009 17:18:57 -0000
Received: (qmail 88577 invoked by uid 500); 30 Dec 2009 17:18:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88519 invoked by uid 500); 30 Dec 2009 17:18:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88509 invoked by uid 99); 30 Dec 2009 17:18:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Dec 2009 17:18:54 +0000
X-ASF-Spam-Status: No, hits=-0.2 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mario-fa@infonet.com.br designates 200.241.52.11 as permitted sender)
Received: from [200.241.52.11] (HELO estancia.infonet.com.br) (200.241.52.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Dec 2009 17:18:47 +0000
Received: (qmail 11114 invoked from network); 30 Dec 2009 17:06:52 -0000
Received: by simscan 1.4.0 ppid: 10859, pid: 11059, t: 2.1733s
         scanners: clamav: 0.95.2/m:51/d:9721 spam: 3.2.5
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on
	estancia.infonet.com.br
X-Spam-Level: 
Received: from unknown (HELO titanium) (Usuario-Autenticado:mario-fa@[187.90.71.224])
          (envelope-sender <mario-fa@infonet.com.br>)
          by 200.241.52.11 (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 30 Dec 2009 17:06:49 -0000
From: =?iso-8859-1?B?TeFyaW8gQW5kcuk=?= <mario-fa@infonet.com.br>
To: <java-user@lucene.apache.org>
References: <98bbb46a0912300718uc699bf0x43728366d9dbdae6@mail.gmail.com>
In-Reply-To: <98bbb46a0912300718uc699bf0x43728366d9dbdae6@mail.gmail.com>
Subject: Question about TokenStream lucene 3.0
Date: Wed, 30 Dec 2009 15:18:15 -0200
Message-ID: <002901ca8974$152f6640$3f8e32c0$@com.br>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
thread-index: AcqJYeA2iuUyxQm5RUSjALF1dtTyJgAEJTUQ
Content-Language: pt-br
X-Old-Spam-Status: No, score=-2.5 required=8.0 tests=BAYES_00,RDNS_NONE
	autolearn=no version=3.2.5

Hi,
I have the method below:

    public final TokenStream tokenStream(String fieldName, Reader =
reader)
    {
        TokenStream result =3D new LowerCaseTokenizer(reader);
        result =3D new StopFilter(true, result, stopWords, true);
        result =3D new PorterStemFilter(result);
        return result;       =20
    }

Using PorterStemFilter and removing the stopwords, but how can I use
TokenStream in release 3.0 (print the result this method).

I tried to use:

    public static void main(String[] args) throws IOException,
ParseException=20
    {
      StringReader sr =3D new StringReader("The man is very good. He =
talked
about many thigs");
      PorterStemAnalyzer ps =3D new PorterStemAnalyzer();
      TokenStream tokenstream =3D ps.tokenStream(null, sr);

      //Tokenizer token =3D (Tokenizer) ps.tokenStream(null, sr);
      while(tokenstream.incrementToken())
      {
          ????????
      }
     =20
    }

Thanks.

---------------------------------------------------------------------
M=E1rio Andr=E9
Instituto Federal de Educa=E7=E3o, Ci=EAncia e Tecnologia de Sergipe - =
IFS
Mestrando em MCC - Universidade Federal de Alagoas - UFAL
http://www.marioandre.com.br/
Skype: mario-fa
-------------------------------------------------------------------------=
---
----------




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 30 17:23:38 2009
Return-Path: <java-user-return-44304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53507 invoked from network); 30 Dec 2009 17:23:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Dec 2009 17:23:38 -0000
Received: (qmail 98921 invoked by uid 500); 30 Dec 2009 17:23:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98840 invoked by uid 500); 30 Dec 2009 17:23:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98830 invoked by uid 99); 30 Dec 2009 17:23:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Dec 2009 17:23:35 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Dec 2009 17:23:25 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NQ2GG-00049g-Rg
	for java-user@lucene.apache.org; Wed, 30 Dec 2009 09:23:04 -0800
Message-ID: <26969989.post@talk.nabble.com>
Date: Wed, 30 Dec 2009 09:23:04 -0800 (PST)
From: Mohsen Saboorian <mohsens@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Highlighter doesn't highlight wildcard queries after updating
 to 2.9.1/3.0.0
In-Reply-To: <4B3B84C0.3040001@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mohsens@gmail.com
References: <26969517.post@talk.nabble.com> <4B3B84C0.3040001@gmail.com>


Yes I can (though I need some time, since I have my nested custom analyzers
and filter). I'll try to write a test scenario to reproduce this issue.

For now, can you tell me if these steps are correct for instantiating and
using highlighter:

IndexSearcher is = new IndexSearcher(indexReader);
QueryParser parser = new QueryParser(Version.LUCENE_CURRENT, "myfield",
analyzer);

// allow search terms like "*foo" with leading star
parser.setAllowLeadingWildcard(true);
query = parser.parse(q);
BooleanQuery.setMaxClauseCount(maxClauseCount);
query = query.rewrite(indexReader);
is.setDefaultFieldSortScoring(true, true);

// 
// search code
// 


// highlightFormatter is a custom impl, which adds a  around matched term
Highlighter highlighter = new Highlighter(highlightFormatter, new
QueryScorer(query));

TokenStream tokenStream = analyzer.tokenStream("myfield", new
StringReader("text to search in"));
String resultStr = highlighter.getBestFragments(tokenStream, "text to search
in", 100, "...");


Mohsen


markrmiller wrote:
> 
> Mohsen Saboorian wrote:
>> After updating to 2.9.x or 3.0, highlighter doesn't work on wildcard
>> queries
>> like "abc*". I thought that it would be because of scoring, so I also set
>> myIndexSearcher.setDefaultFieldSortScoring(true, true) before searching.
>> I tested with both QueryScorer and QueryTermScorer.
>>
>> In my custom highlightTerm(String originalText, TokenGroup tokenGroup)
>> method, tokenGroup.getTotalScore() is always <= 0 for these queries.
>>
>> Mohsen
>>   
> Can you boil the issue down to a unit test?
> 
> -- 
> - Mark
> 
> http://www.lucidimagination.com
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://old.nabble.com/Highlighter-doesn%27t-highlight-wildcard-queries-after-updating-to-2.9.1-3.0.0-tp26969517p26969989.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 30 17:26:23 2009
Return-Path: <java-user-return-44305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54522 invoked from network); 30 Dec 2009 17:26:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Dec 2009 17:26:23 -0000
Received: (qmail 3591 invoked by uid 500); 30 Dec 2009 17:26:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3512 invoked by uid 500); 30 Dec 2009 17:26:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3502 invoked by uid 99); 30 Dec 2009 17:26:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Dec 2009 17:26:21 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.49.14] (HELO web52904.mail.re2.yahoo.com) (206.190.49.14)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 30 Dec 2009 17:26:11 +0000
Received: (qmail 93997 invoked by uid 60001); 30 Dec 2009 17:25:48 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1262193948; bh=1NJ5C0Kp3xuDBQ5PLslj5s+ypoGxGo4xAkJjqXoPZEo=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=KKqjcSmHb1GPu2KrucGsjHYdiZMiu8VXr695HzgJboGPKtoG3ap+oPR2N1f8/2K16kaHC6zObddLey2pc/iknZ8uKKMALG79gebexryW/1TLS7x+KEUWVIu8p2w0ERCjNfScxWh5+W7WuE/8O0rYdoqR8BNOuHELlfaL1QrOBjM=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=N/xTW9KEhPh97IkqOntij8ErfO9uUSC1kQHiEhi8/uRYm9kpbsCtej5TYufOVEyLQnkeacyE1Q5ubl5FjuP+uHsdD59VOc5+XT+kYejRTTXt3b4VKKi6LU2BNgUBATA5rN8AVUMKZ2COo79GtjmdOfr/1TbvXfz7xIoOOL+gUiw=;
Message-ID: <799588.93247.qm@web52904.mail.re2.yahoo.com>
X-YMail-OSG: CAuiBGsVM1k2_rgT.M.QiFIK3zC9hMYsKQnBG5PZci2cp8fJKCe8JscSSzSo.pp0.iUU1I73tHf0moQbxoo1cMXwGH5rYgKSurjPaRa0l6ftOcgwGfVw9PnwCXFiTrXe1GI5CngpSkp_4cOmgIo.jhDj7TQzuLlS81wDwXMOaIGVSRp6ebn_8yyscvhPm38kmSJe3UmbPuTQHBpHgP7rtPgszP2Y01Fv.xN4xFFKqovDJxXHHFMCD1Kbx9JND0qHyor4lx5Tf6dws85oxkuh63M1xBsjqno2K1_s_uLA09lB1pvaCtGcB4g9HQ--
Received: from [78.168.186.124] by web52904.mail.re2.yahoo.com via HTTP; Wed, 30 Dec 2009 09:25:48 PST
X-Mailer: YahooMailClassic/9.0.20 YahooMailWebService/0.8.100.260964
Date: Wed, 30 Dec 2009 09:25:48 -0800 (PST)
From: AHMET ARSLAN <iorixxx@yahoo.com>
Subject: Re: Question about TokenStream lucene 3.0
To: java-user@lucene.apache.org
In-Reply-To: <002901ca8974$152f6640$3f8e32c0$@com.br>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

=0A> Using PorterStemFilter and removing the stopwords, but how=0A> can I u=
se=0A> TokenStream in release 3.0 (print the result this method).=0A> =0A> =
I tried to use:=0A> =0A> =A0 =A0 public static void main(String[] args) thr=
ows=0A> IOException,=0A> ParseException =0A> =A0 =A0 {=0A> =A0 =A0 =A0 Stri=
ngReader sr =3D new=0A> StringReader("The man is very good. He talked=0A> a=
bout many thigs");=0A> =A0 =A0 =A0 PorterStemAnalyzer ps =3D new=0A> Porter=
StemAnalyzer();=0A> =A0 =A0 =A0 TokenStream tokenstream =3D=0A> ps.tokenStr=
eam(null, sr);=0A> =0A> =A0 =A0 =A0 //Tokenizer token =3D (Tokenizer)=0A> p=
s.tokenStream(null, sr);=0A> =A0 =A0 =A0 while(tokenstream.incrementToken()=
)=0A> =A0 =A0 =A0 {=0A> =A0 =A0 =A0 =A0 =A0 ????????=0A> =A0 =A0 =A0 }=0A> =
=A0 =A0 =A0 =0A> =A0 =A0 }=0A> =0A> Thanks.=0A=0AYou can use this method to=
 display:=0A=0A   public static void displayTokenStream(TokenStream tokenSt=
ream) throws IOException {=0A=0A        TermAttribute termAtt =3D (TermAttr=
ibute) tokenStream.getAttribute(TermAttribute.class);=0A        TypeAttribu=
te typeAtt =3D (TypeAttribute) tokenStream.getAttribute(TypeAttribute.class=
);=0A=0A        while (tokenStream.incrementToken()) {=0A            System=
.out.print(termAtt.term());=0A            System.out.print(' ');=0A        =
    System.out.println(typeAtt.type());=0A        }=0A    }=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 30 17:41:24 2009
Return-Path: <java-user-return-44306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62902 invoked from network); 30 Dec 2009 17:41:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Dec 2009 17:41:24 -0000
Received: (qmail 27181 invoked by uid 500); 30 Dec 2009 17:41:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27099 invoked by uid 500); 30 Dec 2009 17:41:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27089 invoked by uid 99); 30 Dec 2009 17:41:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Dec 2009 17:41:22 +0000
X-ASF-Spam-Status: No, hits=-0.8 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mario-fa@infonet.com.br designates 200.241.52.11 as permitted sender)
Received: from [200.241.52.11] (HELO estancia.infonet.com.br) (200.241.52.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Dec 2009 17:41:11 +0000
Received: (qmail 12009 invoked from network); 30 Dec 2009 17:29:17 -0000
Received: by simscan 1.4.0 ppid: 11613, pid: 11827, t: 2.4885s
         scanners: clamav: 0.95.2/m:51/d:9721 spam: 3.2.5
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on
	estancia.infonet.com.br
X-Spam-Level: 
Received: from unknown (HELO titanium) (Usuario-Autenticado:mario-fa@[187.90.71.224])
          (envelope-sender <mario-fa@infonet.com.br>)
          by 200.241.52.11 (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 30 Dec 2009 17:29:15 -0000
From: =?iso-8859-1?B?TeFyaW8gQW5kcuk=?= <mario-fa@infonet.com.br>
To: <java-user@lucene.apache.org>
References: <002901ca8974$152f6640$3f8e32c0$@com.br> <799588.93247.qm@web52904.mail.re2.yahoo.com>
In-Reply-To: <799588.93247.qm@web52904.mail.re2.yahoo.com>
Subject: RES: Question about TokenStream lucene 3.0
Date: Wed, 30 Dec 2009 15:40:41 -0200
Message-ID: <002d01ca8977$36f5ea80$a4e1bf80$@com.br>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
thread-index: AcqJc5sbe70+fOBTRoiHxrYOcXgEKgAA4bDw
Content-Language: pt-br
X-Old-Spam-Status: No, score=-2.5 required=8.0 tests=BAYES_00,RDNS_NONE
	autolearn=no version=3.2.5

System.out.println(typeAtt.type()); ??? And this typeAtt?

Thanks!

---------------------------------------------------------------------
M=E1rio Andr=E9
Instituto Federal de Educa=E7=E3o, Ci=EAncia e Tecnologia de Sergipe - =
IFS
Mestrando em MCC - Universidade Federal de Alagoas - UFAL
http://www.marioandre.com.br/
Skype: mario-fa
-------------------------------------------------------------------------=
---
----------


-----Mensagem original-----
De: AHMET ARSLAN [mailto:iorixxx@yahoo.com]=20
Enviada em: quarta-feira, 30 de dezembro de 2009 15:26
Para: java-user@lucene.apache.org
Assunto: Re: Question about TokenStream lucene 3.0


> Using PorterStemFilter and removing the stopwords, but how
> can I use
> TokenStream in release 3.0 (print the result this method).
>=20
> I tried to use:
>=20
> =A0 =A0 public static void main(String[] args) throws
> IOException,
> ParseException=20
> =A0 =A0 {
> =A0 =A0 =A0 StringReader sr =3D new
> StringReader("The man is very good. He talked
> about many thigs");
> =A0 =A0 =A0 PorterStemAnalyzer ps =3D new
> PorterStemAnalyzer();
> =A0 =A0 =A0 TokenStream tokenstream =3D
> ps.tokenStream(null, sr);
>=20
> =A0 =A0 =A0 //Tokenizer token =3D (Tokenizer)
> ps.tokenStream(null, sr);
> =A0 =A0 =A0 while(tokenstream.incrementToken())
> =A0 =A0 =A0 {
> =A0 =A0 =A0 =A0 =A0 ????????
> =A0 =A0 =A0 }
> =A0 =A0 =A0=20
> =A0 =A0 }
>=20
> Thanks.

You can use this method to display:

   public static void displayTokenStream(TokenStream tokenStream) throws
IOException {

        TermAttribute termAtt =3D (TermAttribute)
tokenStream.getAttribute(TermAttribute.class);
        TypeAttribute typeAtt =3D (TypeAttribute)
tokenStream.getAttribute(TypeAttribute.class);

        while (tokenStream.incrementToken()) {
            System.out.print(termAtt.term());
            System.out.print(' ');
            System.out.println(typeAtt.type());
        }
    }


     =20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 30 17:55:31 2009
Return-Path: <java-user-return-44307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73028 invoked from network); 30 Dec 2009 17:55:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Dec 2009 17:55:31 -0000
Received: (qmail 48543 invoked by uid 500); 30 Dec 2009 17:55:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48470 invoked by uid 500); 30 Dec 2009 17:55:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48460 invoked by uid 99); 30 Dec 2009 17:55:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Dec 2009 17:55:29 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ihasmax@gmail.com designates 209.85.216.186 as permitted sender)
Received: from [209.85.216.186] (HELO mail-px0-f186.google.com) (209.85.216.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Dec 2009 17:55:22 +0000
Received: by pxi16 with SMTP id 16so4843455pxi.20
        for <java-user@lucene.apache.org>; Wed, 30 Dec 2009 09:55:02 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=Uts222RTXQIIzIxf7J84+Lw6E9ILLrpEwan6ZzCcUFc=;
        b=K/zWKP1Mt8sgFMbFpTSWZVZlRx+CatBzYZGBzQ2KUZs0pZ3/E+lBlukAnbchGEKw13
         p1slgwveR3S1Di3AqDvymXZCMcYjn9OO3X9hHHc8Bfzf40nR523Mgwzpy3tCotd3cFBz
         /xEg3tuXudhzMl+xHlfWX9SyL6ARJ4ECZCEkg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=DFJU7KzQnAkQEaU3VMf3n5JThPU1evtE3gblMwFJ4bzAg9mXyQ8D2ZY+GVCXEC7CHT
         KzEOeFTn9BqD8zN86MtigZdJ7bl9BJmYqI9ANPRY2Cd4NIlnKBbMZTB27CSJ7nT9DNU1
         c+OxSVTGBgIhX2MIJKASI3FSIYRQ+mV4Nvpg8=
MIME-Version: 1.0
Received: by 10.141.14.6 with SMTP id r6mr13069028rvi.214.1262195702005; Wed, 
	30 Dec 2009 09:55:02 -0800 (PST)
In-Reply-To: <786fde50908112031y1f73f86fnc4cb7b990a048113@mail.gmail.com>
References: <3836ec640908112020x1b0c7c6bg9ed453bcb287966a@mail.gmail.com>
	 <786fde50908112031y1f73f86fnc4cb7b990a048113@mail.gmail.com>
Date: Wed, 30 Dec 2009 11:55:01 -0600
Message-ID: <3836ec640912300955u2536c401gd476b47e6fe8524a@mail.gmail.com>
Subject: Re: Different Analyzers
From: Max Lynch <ihasmax@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd11252748289047bf5d65f

--000e0cd11252748289047bf5d65f
Content-Type: text/plain; charset=ISO-8859-1

> I just want to see if it's safe to use two different analyzers for the
> following situation:
>
> I have an index that I want to preserve case with so I can do
> case-sensitive
> searches with my WhitespaceAnalyzer.  However, I also want to do case
> insensitive searches.

you should also make sure the data is indexed twice, once w/ the original
> case and once w/o. It's like putting a TokenFilter after
> WhitespaceTokenizer
> which returns two tokens - lowercased and the original, both in the same
> position (set posIncr to 0).
>

I finally got around to really needing this, and I'm just a little confused
by the implementation.  Should I physically use two different indexes (one
with StandardAnalyzer, one with WhitespaceAnalyzer?), two separate fields (I
don't think that's possible?), or could you explain your idea a little
more?  Should I implement my own WhitespaceTokenizer with the TokenFilter?

Thanks.

--000e0cd11252748289047bf5d65f--

From java-user-return-44308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 30 18:20:08 2009
Return-Path: <java-user-return-44308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87458 invoked from network); 30 Dec 2009 18:20:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Dec 2009 18:20:08 -0000
Received: (qmail 86365 invoked by uid 500); 30 Dec 2009 18:20:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86271 invoked by uid 500); 30 Dec 2009 18:20:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86261 invoked by uid 99); 30 Dec 2009 18:20:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Dec 2009 18:20:06 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [140.203.201.100] (HELO mx1.nuigalway.ie) (140.203.201.100)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Dec 2009 18:19:57 +0000
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: AnQBANsoO0sKhJ0L/2dsb2JhbAAIy1AJi1CCSIFpBA
X-IronPort-AV: E=Sophos;i="4.47,476,1257120000"; 
   d="scan'208";a="116719479"
Received: from unknown (HELO EVS1.ac.nuigalway.ie) ([10.132.157.11])
  by mx1.nuigalway.ie with ESMTP; 30 Dec 2009 18:19:37 +0000
Received: from EVS1.ac.nuigalway.ie ([10.132.157.14]) by EVS1.ac.nuigalway.ie with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 30 Dec 2009 18:19:36 +0000
Received: from [192.168.0.14] ([10.132.157.22]) by EVS1.ac.nuigalway.ie over TLS secured channel with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 30 Dec 2009 18:19:36 +0000
Message-ID: <4B3B99AC.2040207@deri.org>
Date: Wed, 30 Dec 2009 19:19:24 +0100
From: Renaud Delbru <renaud.delbru@deri.org>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.1.8pre) Gecko/20091225 Lightning/1.0pre Shredder/3.0.1pre
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Question about many fields within a single index
References: <98bbb46a0912300718uc699bf0x43728366d9dbdae6@mail.gmail.com>
In-Reply-To: <98bbb46a0912300718uc699bf0x43728366d9dbdae6@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 30 Dec 2009 18:19:36.0779 (UTC) FILETIME=[A4D409B0:01CA897C]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

just sharing some personal experiences in this domain,

We performed some benchmarks in a similar setup (indexing millions of 
documents with thousands of fields) to measure the impact of large 
number of fields on a Lucene index.
We observed that more you have fields, more the dictionary will become 
large. In fact, Lucene is creating term index by concatenating the field 
name with the terms associated to this field. In the worst case scenario 
(when terms occur in every field), you can have M fields * N terms 
entries in the dictionary.
As a consequence, a term lookup in the dictionary will take longer. This 
can have a significant impact when the cache is cold. When the cache is 
warm (when parts of the dictionary are in memory), the time overhead is 
not significant, even null.

If, in your data collection, the majority of the terms are locals to one 
field (i.e., when a term occurs only in one single field, like for 
example the timestamp of the document), your dictionary will not grow 
that much and therefore you will probably not notice the increase in 
time of dictionary lookups.

And, as erick explained previously, its depends also of the size of your 
index, and of your use case. If it is relatively small, the overhead 
will be imperceptible. However, if your index is large (millions of 
documents), you will probably notice the overhead the first time the 
query is executed (cold-cache).

I haven't tested with Lucene 3.0, but I have read somewhere (correct me 
if I am wrong) that this new version includes some optimisations for 
dictionary lookups, which should minimize the overhead.
-- 
Renaud Delbru

On 30/12/09 16:18, Jason Tesser wrote:
> I have a situation where I might have 1000 different types of Lucene
> Documents each with 10 or so fields with different names that get
> indexed.
>
> I am wondering if this is bad to do within Lucene.  I end up with
> 10,000 fields within the index although any given document has only 10
> or so.
>
> I was hoping not to have to have many indexes under the covers if I
> can avoid it but I don't want performance to suffer either.
>
> Any thoughts?
>
> Thanks,
> Jason Tesser
> dotCMS Lead Development Manager
> 1-305-858-1422
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>    


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 30 18:32:46 2009
Return-Path: <java-user-return-44309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94962 invoked from network); 30 Dec 2009 18:32:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Dec 2009 18:32:46 -0000
Received: (qmail 3701 invoked by uid 500); 30 Dec 2009 18:32:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3615 invoked by uid 500); 30 Dec 2009 18:32:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3605 invoked by uid 99); 30 Dec 2009 18:32:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Dec 2009 18:32:44 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Dec 2009 18:32:33 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 5AED945F3A9
	for <java-user@lucene.apache.org>; Wed, 30 Dec 2009 19:32:10 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 2zVNrnXFOBbw for <java-user@lucene.apache.org>;
	Wed, 30 Dec 2009 19:32:00 +0100 (CET)
Received: from VEGA (dslb-088-065-111-032.pools.arcor-ip.net [88.65.111.32])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id AE26645F3A3
	for <java-user@lucene.apache.org>; Wed, 30 Dec 2009 19:31:59 +0100 (CET)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <e5de07e90912271249g25a0f8e4u49c3fb03d3ecd458@mail.gmail.com> <Pine.LNX.4.64.0912271923370.12519@radix.cryptio.net> <7054C18D96924AA187F6D3A3FBDFC8DB@VEGA> <6B18B9E94727414D87F8F7E91EBC5F90@VEGA> <e5de07e90912300256h4bca5993wf1349c71833152d6@mail.gmail.com>
Subject: RE: Using the new tokenizer API from a jar file
Date: Wed, 30 Dec 2009 19:31:59 +0100
Message-ID: <B118C2248D6F44058427E261C7A76D10@VEGA>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <e5de07e90912300256h4bca5993wf1349c71833152d6@mail.gmail.com>
Thread-Index: AcqJPuLTkEW9iNT4RHKU/ZCNGEhLVgAPz//A
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579

That would be good, if you could test it!

Please checkout Lucene 2.9 branch from svn
(http://svn.apache.org/repos/asf/lucene/java/branches/lucene_2_9), compile
the whole package (at least lucene-core.jar) and then replace the lucene jar
files in solr's lib folder.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Ahmed El-dawy [mailto:aseldawy@gmail.com]
> Sent: Wednesday, December 30, 2009 11:56 AM
> To: java-user@lucene.apache.org
> Cc: solr-user@lucene.apache.org
> Subject: Re: Using the new tokenizer API from a jar file
> 
> Thanks all for your interest, especially Uwe. I asked this question on
> solr-user at the beginning but I got no reply. That's why I re-asked the
> question at java-user.
> Thanks for your efforts. I will try it now.
> 
> On Mon, Dec 28, 2009 at 12:02 PM, Uwe Schindler <uwe@thetaphi.de> wrote:
> 
> > I opened https://issues.apache.org/jira/browse/LUCENE-2182 about this
> > problem and already have a fix.
> >
> > This is really a bug. The solution is simple because you have to load
> the
> > IMPL class using the same classloader as the passed in interface. The
> > default for Class.forName is the classloader of AttributeSource.class,
> > which
> > is the wrong one.
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> > > -----Original Message-----
> > > From: Uwe Schindler [mailto:uwe@thetaphi.de]
> > > Sent: Monday, December 28, 2009 9:20 AM
> > > To: java-user@lucene.apache.org
> > > Cc: solr-user@lucene.apache.org
> > > Subject: RE: Using the new tokenizer API from a jar file
> > >
> > > The question on this list was ok,as it shows a minor problem of using
> the
> > > new TokenStream API with Solr.
> > >
> > > His plugin was loaded correctly, because if Lucene says, that it
> cannot
> > > find
> > > the *Impl class, it was able to load the interface class before -> the
> > JAR
> > > file is "visible" to the JVM.
> > >
> > > The problem is the following and has to do with classloaders:
> > >
> > > 1. We have different class loaders for different places in Solr. Solr
> > uses
> > > for plugins a SolrResourceLoader that searches for JAR files in the
> local
> > > lib folder before handling over to the webapp's classloader.
> > >
> > > 2. Initially, the lucene JAR is loaded by the Webapp's class loader
> > >
> > > 3. If a AttributeImpl is placed into a jar file e.g. in the plugin
> folder
> > > of
> > > solr (the lib folder where solr loads all resources, stop words,...),
> the
> > > loading mechanism inside AttributeSource.DEFAULT_ATTRIBUTE_FACTORY is
> > > unable
> > > to locate the class file, because Class.forName() always uses the
> class'
> > > classloader and not the global/thread one's. So AttributeSource will
> only
> > > find the class file if it is in the *same* directory as the lucene-
> > > core.jar
> > > file (WEB-INF/lib) and so accessible by the webapp's class loader.
> > >
> > > A good introduction about the problem is this one:
> > >
> >
> http://www.theserverside.com/tt/articles/content/dm_classForname/DynLoad.p
> > > df
> > >
> > > The problem is here described for the JVM extensions folder but also
> > > applies
> > > to solr, because it has another classloader for plugins.
> > >
> > > A solution to fix this would be in lucene to use the thread's context
> > > class
> > > loader in AttributeSource.DEFAULT_ATTRIBUTE_FACTORY, but I strongly
> > > discourage this, as it would break the whole AttributeSource
> > functionality
> > > if you add two different attributes with same class names from
> different
> > > class loaders to the AttributeSource.
> > >
> > > The only solution to the problem is placing the JAR file inside the
> > > WEB-INF/lib folder where lucene-core.jar is. Plugins in Solr cannot
> > define
> > > own attribute implementations. Alternatively he could try to force
> > preload
> > > the class by calling Class.forName in his plugin initialization code
> on
> > > the
> > > Impl class. But I am not sure if this works (as Java handles classes
> from
> > > different classloaders different).
> > >
> > > Uwe
> > >
> > > -----
> > > Uwe Schindler
> > > H.-H.-Meier-Allee 63, D-28213 Bremen
> > > http://www.thetaphi.de
> > > eMail: uwe@thetaphi.de
> > >
> > > > -----Original Message-----
> > > > From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
> > > > Sent: Monday, December 28, 2009 4:27 AM
> > > > To: java-user@lucene.apache.org
> > > > Subject: Re: Using the new tokenizer API from a jar file
> > > >
> > > >
> > > > : I tried to use it with solr and the problems began. It's always
> > > telling
> > > > me
> > > > : that it cannot find the class GlossAttributeImpl. I think the
> problem
> > > is
> > > > : that my jar file is added to the class path at run time not from
> the
> > > > command
> > > > : line. Do you have a good solution or workaround?
> > > >
> > > > You're likely to get mmore helpful answers from other people in the
> > Solr
> > > > User community (solr-user@lucene.a.o)
> > > >
> > > > As long as you put your jar in the "lib" directory under your solr
> home
> > > > (or refrence it using a <lib/> directive in your solrconfig.xml)
> Solr's
> > > > plugin loader will take care of hte classloading for you.
> > > >
> > > > if you are confident you have your jar in the correct place, please
> > > email
> > > > solr-user with the ClassNotFound stack trace from your solr logs, as
> > > well
> > > > as hierarchy  of files from your solr home (ie: the output of "find
> .")
> > > >
> > > >
> > > > -Hoss
> > > >
> > > >
> > > > --------------------------------------------------------------------
> -
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> 
> --
> regards,
> Ahmed Saad


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 30 19:36:49 2009
Return-Path: <java-user-return-44310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23292 invoked from network); 30 Dec 2009 19:36:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Dec 2009 19:36:49 -0000
Received: (qmail 68514 invoked by uid 500); 30 Dec 2009 19:36:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68421 invoked by uid 500); 30 Dec 2009 19:36:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68411 invoked by uid 99); 30 Dec 2009 19:36:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Dec 2009 19:36:46 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.49.17] (HELO web52907.mail.re2.yahoo.com) (206.190.49.17)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 30 Dec 2009 19:36:37 +0000
Received: (qmail 18081 invoked by uid 60001); 30 Dec 2009 19:36:15 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1262201775; bh=Dj6bZ/brqlXEXqdAMYIKvxMs/p5KighqNmLBN6nifSY=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=icz/XZs2j+iPqrJFeLAR4UVjSqCIKBoE6qI9V3VmPnRPxt6JOjZuZKU1yyatKjHkXlTZ9cZsYfTF5hYtsGSo/OEGUWBL7DE4ILwdg4KC+hvV/i+WwcI9GDHmrGEUx/jLJUbtiMKlrWsXJoPL7DYRc3gtt3IOe8Jr3IYC/W6qbJQ=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=m5IMFrpsswuTSpbd64VZNTc10dit11C5HEg+93Yg1eEs9rh/bKbPAjyyuTs6Jhv6O4NqWEk2tc+glth5/LFA6f5wd6zaroTz7TOo80ko4sa74xMI54e4nXPn25NvZg9NiiKMH0B50cg7Mr2QAhOY5O4fM69T30+zRtS53zCC57w=;
Message-ID: <82052.17369.qm@web52907.mail.re2.yahoo.com>
X-YMail-OSG: B.v0wYcVM1lrcvB6kDmxNAxd3SZDbsYjFg12erL9X71dIam_ZVwgZ0sENoCXQwd2qEpc7XxaZHvpC_CjLeWBz5kZZkKILEJAG58Gcd65UXQiBI75G.6s11Dldm43B6KAOpxLH8Xh2pZlVhLqGISHOLD8D9heCJkk247OPo8wwIk9Lrzu.sotfRD7AllQcDP27B6M.LUcNRG0PEE6BZYxLR3chUZ4wmTeNj3mtcdPJhfp.I9g6z736iYIUu.eTa86QfwFiyErBfUnbf_YavtrvbaAv6VkD4WCHYw_JA5KQ4GIhcsLawEryWUhOaoJjKYsWFvMtyzKZDT9540p5IDAEA--
Received: from [78.168.186.124] by web52907.mail.re2.yahoo.com via HTTP; Wed, 30 Dec 2009 11:36:15 PST
X-Mailer: YahooMailClassic/9.0.20 YahooMailWebService/0.8.100.260964
Date: Wed, 30 Dec 2009 11:36:15 -0800 (PST)
From: AHMET ARSLAN <iorixxx@yahoo.com>
Subject: Re: RES: Question about TokenStream lucene 3.0
To: java-user@lucene.apache.org
In-Reply-To: <002d01ca8977$36f5ea80$a4e1bf80$@com.br>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org


> System.out.println(typeAtt.type());
> ??? And this typeAtt?
> 
> Thanks!
> 

Yes. You can add the other attributes if you want. By the way i forget to remove (TermAttribute) and TypeAttribute). You don't need them in 3.0.0.

TermAttribute termAtt = tokenStream.getAttribute(TermAttribute.class);
TypeAttribute typeAtt = tokenStream.getAttribute(TypeAttribute.class);


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 30 20:29:07 2009
Return-Path: <java-user-return-44311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35836 invoked from network); 30 Dec 2009 20:29:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Dec 2009 20:29:07 -0000
Received: (qmail 8794 invoked by uid 500); 30 Dec 2009 20:29:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6902 invoked by uid 500); 30 Dec 2009 20:28:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6051 invoked by uid 99); 30 Dec 2009 20:28:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Dec 2009 20:28:55 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of kumaravel.kandasami@gmail.com designates 209.85.210.192 as permitted sender)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Dec 2009 20:22:20 +0000
Received: by yxe30 with SMTP id 30so14030409yxe.29
        for <java-user@lucene.apache.org>; Wed, 30 Dec 2009 12:21:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=V6htMkGf877PfuECML/srIqWQEe+2tpZw03xLO1eP4M=;
        b=pQthfvta2CAS0HvHDcFnEQvuLj9Y/qnLGZgxWdJWiUDw3jsFWIupoejeFq1gduZRYt
         lhaXMwLzKGu2iOkOXCDPmWBU2X7R++muJ/PhP5DcpfpY0g/83tKgZxv9pgu6WOuCcAWy
         GAhyi7/6CsC8tlSZF4JznaSy7FQcuJuth7i9A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=S45HoxpiOYXaO4LvBDL1WKdRKo4YXB2IdLCrBHs0AtUTxAgMKP8Dfw4KtVyz6QEBGS
         EiTTogUa/CskyUeLTG0inyJtLhDi5ZdkCAmgbVlrCeNhiDScuzyWgEEiP53/nCqP93jw
         mD5VuSmd4KSbJZSSeimHIQrvm+znGnafDEaWw=
MIME-Version: 1.0
Received: by 10.101.106.33 with SMTP id i33mr27727442anm.45.1262204519503; 
	Wed, 30 Dec 2009 12:21:59 -0800 (PST)
Date: Wed, 30 Dec 2009 14:21:59 -0600
Message-ID: <29a597d20912301221k55f33b8w4029faf283cb8a14@mail.gmail.com>
Subject: Lucene 2.9: IOException from IndexReader.reopen() - Real time search
From: Kumaravel Kandasami <kumaravel.kandasami@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5c01004d7eb047bf7e4b2
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c5c01004d7eb047bf7e4b2
Content-Type: text/plain; charset=ISO-8859-1

I am getting IOException when I am doing a "Real-time" search, i.e. I am
creating a Index using the Index Writer and also opening the Index using
Index Reader (writer.getReader()) to make sure the document does not exist
prior adding to the Index file.

The code works perfect fine multiple time indexed across couple of GB data,
however, on a TB it fails with the exception listed below.
Any suggestions appreciated. Thanks. Kumar

Code Snippet:

   IndexReader reader2 = reader.reopen();//get

                    if (reader2 != reader) {

                        reader.close();
                        reader = reader2;
                        searcher = new IndexSearcher(reader);
                        reader2 = null;
                    }


Exception:

Exception in thread "main" java.io.IOException: directory
'/Users/Kumar/Dev/Cust/index/values' exists and is a directory, but cannot
be listed: list() returned null
        at org.apache.lucene.store.FSDirectory.listAll(FSDirectory.java:516)
        at org.apache.lucene.store.FSDirectory.listAll(FSDirectory.java:531)
        at
org.apache.lucene.index.IndexFileDeleter.refresh(IndexFileDeleter.java:307)
        at
org.apache.lucene.index.IndexWriter.doFlushInternal(IndexWriter.java:4300)
        at
org.apache.lucene.index.IndexWriter.doFlush(IndexWriter.java:4192)
        at org.apache.lucene.index.IndexWriter.flush(IndexWriter.java:4183)
        at
org.apache.lucene.index.IndexWriter.getReader(IndexWriter.java:470)
        at
org.apache.lucene.index.IndexWriter.getReader(IndexWriter.java:444)
        at
org.apache.lucene.index.DirectoryReader.doReopen(DirectoryReader.java:384)
        at
org.apache.lucene.index.DirectoryReader.reopen(DirectoryReader.java:348)

Kumar    _/|\_
www.saisk.com
kumar@saisk.com
"making a profound difference with knowledge and creativity..."

--001636c5c01004d7eb047bf7e4b2--

From java-user-return-44312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 30 22:09:17 2009
Return-Path: <java-user-return-44312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72145 invoked from network); 30 Dec 2009 22:09:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Dec 2009 22:09:17 -0000
Received: (qmail 80253 invoked by uid 500); 30 Dec 2009 22:09:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80184 invoked by uid 500); 30 Dec 2009 22:09:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80174 invoked by uid 99); 30 Dec 2009 22:09:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Dec 2009 22:09:14 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of tsuraan@gmail.com designates 209.85.221.203 as permitted sender)
Received: from [209.85.221.203] (HELO mail-qy0-f203.google.com) (209.85.221.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Dec 2009 22:09:02 +0000
Received: by qyk41 with SMTP id 41so5813454qyk.29
        for <java-user@lucene.apache.org>; Wed, 30 Dec 2009 14:08:40 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=VyKSpI+/7traJLCVp01IMQONgP/N8p+VqaHV0wGlkf8=;
        b=JSORGpgdqNJZDioD6UTrfharc0A/AlOEEUspCsbPMc3NnTS7MBKfnGYaTQQsU/kB61
         L75JevmDSwIoXV1C1xGIl79eCxS2nm0+k7b/EGOIzXuqJEE+Ap/hWF5QtpnCfoysFC1g
         a3OiBz6naKjmTcsPKPFkwfeM+E/Nk8dX6tEsw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=SWRQuvND1DHM+tSn4sgDPJWthm0WsPIJWdFqqc5C1IgNiSQgbMVVkWwHoDH3CHZyzb
         Es/e4SqcFomVlRe6AgLFTbxS9qyNuo8wREK5xf19U5wJfgxHMJRte6SgDyta9mmHyK0a
         iaibPLFqKJkf1OxpzIacHDIj6GzgPlX6msA9c=
MIME-Version: 1.0
Received: by 10.229.116.140 with SMTP id m12mr7587205qcq.54.1262210920483; 
	Wed, 30 Dec 2009 14:08:40 -0800 (PST)
Date: Wed, 30 Dec 2009 16:08:40 -0600
Message-ID: <84fb38e30912301408x9cc6e14leb6b5490db8ad640@mail.gmail.com>
Subject: Copy and augment an indexed Document
From: tsuraan <tsuraan@gmail.com>
To: java-user <java-user@lucene.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Suppose I have a (useful) document stored in a Lucene index, and I
have a variant that I'd also like to be able to search.  This variant
has the exact same data as the original document, but with some extra
fields.  I'd like to be able to use an IndexReader to get the document
that I stored, use the document's add method to put my extra fields
in, and then add that document to the index using an IndexWriter.
This doesn't seem to work, in general.  Non-stored fields of the
original document are not in the variant document.  This makes sense
from an OO point of view (how would that document object possibly have
the non-stored data of the original doc), but is there some
lower-level way to do what I want to do?

It's somewhat expensive to completely re-create my document, as it
relies on data parsed from (often large) pdf and MS Office files.  I'd
like to be able to use the already-stored terms that are in my index
and associated with my existing document.  Can I iterate through the
terms of my index and add references to my newly-added document?  Is
there any utility to make this work nicely?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 30 22:21:46 2009
Return-Path: <java-user-return-44313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77009 invoked from network); 30 Dec 2009 22:21:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Dec 2009 22:21:45 -0000
Received: (qmail 87258 invoked by uid 500); 30 Dec 2009 22:21:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87133 invoked by uid 500); 30 Dec 2009 22:21:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87106 invoked by uid 99); 30 Dec 2009 22:21:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Dec 2009 22:21:13 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.78.27 as permitted sender)
Received: from [74.125.78.27] (HELO ey-out-2122.google.com) (74.125.78.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Dec 2009 22:20:21 +0000
Received: by ey-out-2122.google.com with SMTP id 9so2034173eyd.3
        for <java-user@lucene.apache.org>; Wed, 30 Dec 2009 14:20:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=w6MyTf47pFqlcTc6XBbGivXZnAdOs6miBZJTU9jY/kI=;
        b=R1kCDUW8pqiMe0A6P5eCuvuvc2a10CNQrG0/p8htfBKC1Yorb+aEc+1QrEqaI+91bm
         HYxbxfguGqLP68p21pOEJvSesZCCPBX9SteG8Ez4x1C1ik+aUfi0xEFAjF1qyAfeC2V+
         A96y7iHsP5pwf70cx7Yn5m8A0RYJiBwhliu/A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=nhMlP/IQP5bvC2E6YdOfJbnaxgiqByjrK4WjFtUGvV8bjJ5lFUXk+LFHCb5KgC59QN
         tz2/d5kTIr+4LOnLYiR+t432DXTpu2uXNK6yMS5DFofOLiT3OfY5psHGJgVb+NB+I+Sf
         mCU+uyLeNtCA4akN191DnFXzrvl2hgp1h2af4=
MIME-Version: 1.0
Received: by 10.216.89.70 with SMTP id b48mr2836215wef.160.1262211601387; Wed, 
	30 Dec 2009 14:20:01 -0800 (PST)
In-Reply-To: <3836ec640912300955u2536c401gd476b47e6fe8524a@mail.gmail.com>
References: <3836ec640908112020x1b0c7c6bg9ed453bcb287966a@mail.gmail.com>
	 <786fde50908112031y1f73f86fnc4cb7b990a048113@mail.gmail.com>
	 <3836ec640912300955u2536c401gd476b47e6fe8524a@mail.gmail.com>
Date: Wed, 30 Dec 2009 17:20:01 -0500
Message-ID: <359a92830912301420q76aa0d09la4b64c9319d923f8@mail.gmail.com>
Subject: Re: Different Analyzers
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d9a32721d14e047bf98aa0
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d9a32721d14e047bf98aa0
Content-Type: text/plain; charset=ISO-8859-1

See PerFieldAnalyzerWrapper for an easy way to implement two fields
in the same document processed with different analyzers. So basically
you're copying the input to two fields that handle things slightly
differently.

As far as re-implementing stuff, no real re-implementing is necessary,
just create your Analyzers from pre-existing parts, it's much simpler
than it sounds. Just derive a class from Analyzer and override
tokenStream (or, possibly, reusableTokenStream). Then you have to
send you input to both fields (see above).

SynonymAnalyzer in Lucene In Action has an example, and I'm sure
if you look in the mail archives you'll find other examples.....

Alternatively, if one of the "regular" analyzers works for you *except*
for lower-casing, just use that one for your mixed-case field and
lower-case your input and send it to your lower-case field.

Be careful to do the same steps when querying <G>.

Also, TeeSinkTokenFilter might give you some joy, but I confess I haven't
looked at it very thoroughly.

HTH
Erick

On Wed, Dec 30, 2009 at 12:55 PM, Max Lynch <ihasmax@gmail.com> wrote:

> > I just want to see if it's safe to use two different analyzers for the
> > following situation:
> >
> > I have an index that I want to preserve case with so I can do
> > case-sensitive
> > searches with my WhitespaceAnalyzer.  However, I also want to do case
> > insensitive searches.
>
> you should also make sure the data is indexed twice, once w/ the original
> > case and once w/o. It's like putting a TokenFilter after
> > WhitespaceTokenizer
> > which returns two tokens - lowercased and the original, both in the same
> > position (set posIncr to 0).
> >
>
> I finally got around to really needing this, and I'm just a little confused
> by the implementation.  Should I physically use two different indexes (one
> with StandardAnalyzer, one with WhitespaceAnalyzer?), two separate fields
> (I
> don't think that's possible?), or could you explain your idea a little
> more?  Should I implement my own WhitespaceTokenizer with the TokenFilter?
>
> Thanks.
>

--0016e6d9a32721d14e047bf98aa0--

From java-user-return-44314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 30 23:36:30 2009
Return-Path: <java-user-return-44314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96574 invoked from network); 30 Dec 2009 23:36:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 30 Dec 2009 23:36:30 -0000
Received: (qmail 38617 invoked by uid 500); 30 Dec 2009 23:36:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38532 invoked by uid 500); 30 Dec 2009 23:36:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38519 invoked by uid 99); 30 Dec 2009 23:36:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Dec 2009 23:36:26 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ihasmax@gmail.com designates 209.85.160.46 as permitted sender)
Received: from [209.85.160.46] (HELO mail-pw0-f46.google.com) (209.85.160.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Dec 2009 23:36:18 +0000
Received: by pwi11 with SMTP id 11so3503571pwi.5
        for <java-user@lucene.apache.org>; Wed, 30 Dec 2009 15:35:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=yTxRgPZ3ICtQJIZ6bupo4bWzKJuwdjsXxEMN1D7crgI=;
        b=rIRlFHdrVHtEGUnNO43R/K5nIM6mITtbX8XHTIpZ3AInHSwfNih5Ei3G0ljOM9ndiZ
         zzfYbpxCElZKL6FMFrkUjqBeajOJBwG6a61ANorN9itkL67FLxd3EekQAIuW/KB2dJ1A
         TpSiopqtH9eqvtMu6Iwp9ACr32rOouOfSqRV0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=mIR6Mmuh4B1A843ihOwrWY1c9/TYBLTWsNxGBT4wMha10RLxAshuyYXXv3L8pykN+f
         gBkaGznvnkCXPAeW73qmB/5UctwyhpwdKiXlERz/C5lGCz/8L2QixhWmlHS+C0aMwrkq
         Jt9E5ODhYl9vVM0LtRgQnXJ/AqOnuSBu24xqU=
MIME-Version: 1.0
Received: by 10.141.88.14 with SMTP id q14mr13231204rvl.272.1262216157174; 
	Wed, 30 Dec 2009 15:35:57 -0800 (PST)
In-Reply-To: <359a92830912301420q76aa0d09la4b64c9319d923f8@mail.gmail.com>
References: <3836ec640908112020x1b0c7c6bg9ed453bcb287966a@mail.gmail.com>
	 <786fde50908112031y1f73f86fnc4cb7b990a048113@mail.gmail.com>
	 <3836ec640912300955u2536c401gd476b47e6fe8524a@mail.gmail.com>
	 <359a92830912301420q76aa0d09la4b64c9319d923f8@mail.gmail.com>
Date: Wed, 30 Dec 2009 17:35:57 -0600
Message-ID: <3836ec640912301535s7b299bebm5851333cee28c6fa@mail.gmail.com>
Subject: Re: Different Analyzers
From: Max Lynch <ihasmax@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd13a72ad9e06047bfa995f
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd13a72ad9e06047bfa995f
Content-Type: text/plain; charset=ISO-8859-1

> Alternatively, if one of the "regular" analyzers works for you *except*
> for lower-casing, just use that one for your mixed-case field and
> lower-case your input and send it to your lower-case field.
>
> Be careful to do the same steps when querying <G>.
>

Thanks Erick, I didn't think about this.  It seems the most simple solution
for now.

-max

--000e0cd13a72ad9e06047bfa995f--

From java-user-return-44315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 31 01:09:28 2009
Return-Path: <java-user-return-44315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18067 invoked from network); 31 Dec 2009 01:09:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Dec 2009 01:09:28 -0000
Received: (qmail 89349 invoked by uid 500); 31 Dec 2009 01:09:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89192 invoked by uid 500); 31 Dec 2009 01:09:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89182 invoked by uid 99); 31 Dec 2009 01:09:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Dec 2009 01:09:25 +0000
X-ASF-Spam-Status: No, hits=-2.4 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gsiasf@gmail.com designates 209.85.217.225 as permitted sender)
Received: from [209.85.217.225] (HELO mail-gx0-f225.google.com) (209.85.217.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Dec 2009 01:09:17 +0000
Received: by gxk25 with SMTP id 25so5682300gxk.5
        for <java-user@lucene.apache.org>; Wed, 30 Dec 2009 17:08:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:content-type:mime-version
         :subject:from:in-reply-to:date:content-transfer-encoding:message-id
         :references:to:x-mailer;
        bh=DbDZHsDY++1qrova09WkKe/qHJV1IuJlTCllmw08NIw=;
        b=Tx1HqbB3s5gVp0EPlD5SmcRfx09GGVTPLrCl8HoY3bFvZpP6h6OGhDRAkdoMhzzA9Q
         iBTkHq4q2hKg4poZQmvvQ8z0nEazq9SiB8Bo2rHS7ZPRLevNX5DxmckoIRwGJ6p2/4YO
         gIEoqEPN1WteS0KKiUPSx1KgHJylaSxd/yJkE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=wg629KYestpVtlemajqFmWiO+Gki3z91n+jXOMxw9uW+5qGDL6Wfol1SarrIMCETOl
         2rtB5o4N8Y33SNV5O1kYDxWM8mFMemNwG7GG3MBPe9fnDsxfVBt7NUo6by9mzXGxvwDp
         OAt5kjN/zO5tViXKD4Sp5EVBNvaAtEb0uTaP0=
Received: by 10.100.56.12 with SMTP id e12mr2603464ana.106.1262221736315;
        Wed, 30 Dec 2009 17:08:56 -0800 (PST)
Received: from ?10.0.0.15? (adsl-065-013-152-164.sip.rdu.bellsouth.net [65.13.152.164])
        by mx.google.com with ESMTPS id 6sm4922502ywc.39.2009.12.30.17.08.55
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 30 Dec 2009 17:08:55 -0800 (PST)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1077)
Subject: Re: Copy and augment an indexed Document
From: Grant Ingersoll <gsiasf@gmail.com>
In-Reply-To: <84fb38e30912301408x9cc6e14leb6b5490db8ad640@mail.gmail.com>
Date: Wed, 30 Dec 2009 20:08:55 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <822D33FC-2611-443E-85B8-71D0A3C3E023@gmail.com>
References: <84fb38e30912301408x9cc6e14leb6b5490db8ad640@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1077)


On Dec 30, 2009, at 5:08 PM, tsuraan wrote:

> Suppose I have a (useful) document stored in a Lucene index, and I
> have a variant that I'd also like to be able to search.  This variant
> has the exact same data as the original document, but with some extra
> fields.  I'd like to be able to use an IndexReader to get the document
> that I stored, use the document's add method to put my extra fields
> in, and then add that document to the index using an IndexWriter.
> This doesn't seem to work, in general.  Non-stored fields of the
> original document are not in the variant document.  This makes sense
> from an OO point of view (how would that document object possibly have
> the non-stored data of the original doc), but is there some
> lower-level way to do what I want to do?
>=20
> It's somewhat expensive to completely re-create my document, as it
> relies on data parsed from (often large) pdf and MS Office files.  I'd
> like to be able to use the already-stored terms that are in my index
> and associated with my existing document.  Can I iterate through the
> terms of my index and add references to my newly-added document?  Is
> there any utility to make this work nicely

I don't think there is a way to do this without recreating docs just yet =
although I believe there is some work being done on modifiable docs.  =
Can you store all your fields?  That is probably cheaper than reparsing.

-Grant=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 31 01:20:15 2009
Return-Path: <java-user-return-44316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19296 invoked from network); 31 Dec 2009 01:20:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Dec 2009 01:20:15 -0000
Received: (qmail 95703 invoked by uid 500); 31 Dec 2009 01:20:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95625 invoked by uid 500); 31 Dec 2009 01:20:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95615 invoked by uid 99); 31 Dec 2009 01:20:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Dec 2009 01:20:13 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.78.26 as permitted sender)
Received: from [74.125.78.26] (HELO ey-out-2122.google.com) (74.125.78.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Dec 2009 01:20:05 +0000
Received: by ey-out-2122.google.com with SMTP id 9so2061084eyd.3
        for <java-user@lucene.apache.org>; Wed, 30 Dec 2009 17:19:45 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=HiWVFTWCVMNH6eoRt1sfwYOUEETaPokQRtAkO37EkCk=;
        b=x97BPWD3BhzhNHJaX1LCsQ6l/9mJIHcEd8antlOo1WjIuQRa8G1U3d1LQ2vHfurKBA
         pe57majpQZibclTYXDuikmaHlCEayX418S1HJ8T3TY4rHGi8BIf2Rtb4OnLNhlt3JENC
         tBJoJj39KvQYq4eKAcV4xsCb+qsxBAzI8UT40=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=mhuE4stYtHlMaKI/IxDMhfES3xzKvJcl4JJoSrFTsDPlCGBRyre/11lqAME7x2WVvQ
         ccx+6NgrMVv5x7Fnc4yOqe6Ruu6qRz+uDmWioAmGyJgBJQJFfpstm1JlauF2eHwSDcK2
         VpN6PQ5fVccEJIlLnpWpTLKu4Ftx3LzYQHxuY=
MIME-Version: 1.0
Received: by 10.216.88.201 with SMTP id a51mr6760036wef.154.1262222384957; 
	Wed, 30 Dec 2009 17:19:44 -0800 (PST)
In-Reply-To: <84fb38e30912301408x9cc6e14leb6b5490db8ad640@mail.gmail.com>
References: <84fb38e30912301408x9cc6e14leb6b5490db8ad640@mail.gmail.com>
Date: Wed, 30 Dec 2009 20:19:44 -0500
Message-ID: <359a92830912301719x23055fecp7110b5334c263151@mail.gmail.com>
Subject: Re: Copy and augment an indexed Document
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d7e491e20889047bfc0c9c
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d7e491e20889047bfc0c9c
Content-Type: text/plain; charset=ISO-8859-1

It is possible to reconstruct a document from the terms, but
it's a lossy process. Luke does this (you can see from the
UI, and the code is available). There's no utility that I know
of to make this easy.

It's an open question whether this is more or less work than
re-parsing the document (I infer that you have the originals
available). Before trying to reconstruct the document I'd
ask how often you need to do this. The gremlins coming out
of the woodwork from reconstruction would consume a lot
of resources. For instance, could you guarantee term positions
when you re-indexed the reconstructed document?
What about stemmed words? How about synonyms?
And are you willing to spend the time tracking down the
bugs?

As I said, I wouldn't go there until forced....

FWIW
Erick

On Wed, Dec 30, 2009 at 5:08 PM, tsuraan <tsuraan@gmail.com> wrote:

> Suppose I have a (useful) document stored in a Lucene index, and I
> have a variant that I'd also like to be able to search.  This variant
> has the exact same data as the original document, but with some extra
> fields.  I'd like to be able to use an IndexReader to get the document
> that I stored, use the document's add method to put my extra fields
> in, and then add that document to the index using an IndexWriter.
> This doesn't seem to work, in general.  Non-stored fields of the
> original document are not in the variant document.  This makes sense
> from an OO point of view (how would that document object possibly have
> the non-stored data of the original doc), but is there some
> lower-level way to do what I want to do?
>
> It's somewhat expensive to completely re-create my document, as it
> relies on data parsed from (often large) pdf and MS Office files.  I'd
> like to be able to use the already-stored terms that are in my index
> and associated with my existing document.  Can I iterate through the
> terms of my index and add references to my newly-added document?  Is
> there any utility to make this work nicely?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6d7e491e20889047bfc0c9c--

From java-user-return-44317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 31 02:20:53 2009
Return-Path: <java-user-return-44317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40132 invoked from network); 31 Dec 2009 02:20:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Dec 2009 02:20:53 -0000
Received: (qmail 22388 invoked by uid 500); 31 Dec 2009 02:20:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22307 invoked by uid 500); 31 Dec 2009 02:20:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22297 invoked by uid 99); 31 Dec 2009 02:20:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Dec 2009 02:20:50 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=AWL,BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tsuraan@gmail.com designates 209.85.221.203 as permitted sender)
Received: from [209.85.221.203] (HELO mail-qy0-f203.google.com) (209.85.221.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Dec 2009 02:20:44 +0000
Received: by qyk41 with SMTP id 41so5875100qyk.29
        for <java-user@lucene.apache.org>; Wed, 30 Dec 2009 18:20:23 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=CVX6rCFIPVKdAWrZd1sXivUM7EjI0IggmmJge7Znuic=;
        b=jCMyAp7+39NSmsHiAMkrcYJ+3NbeUuGuIuMGfD7HrgnvcwUYZm1mnZSgu1Tf5ey+8i
         jgVK+tHj2w6AEwLvY8EMLPWcMJFHj7MBxwYqNZ+YHRsABFhNvA7DQEEdamsd8OzKzwHr
         hrFfSrcsdFIW68jdb3HptIx2iHoyHB3E3fpD8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=XWMXFOQ/iSkkIv7W2OuYzB/2hWOEGlV9WwhQzdp+Qcq5rx1cR1Rvt5rYuokIz1Su73
         G+Rs/cqz3ov/oBfDXWOquitG8JlN7kSAk/yFNhUImrzID2eMggWcibaVjAsTduT15g4d
         Rz1/Cv4f9O/bteOmoAgvgwP/+e1N7VtBy4eAk=
MIME-Version: 1.0
Received: by 10.229.92.203 with SMTP id s11mr7763093qcm.19.1262226023041; Wed, 
	30 Dec 2009 18:20:23 -0800 (PST)
In-Reply-To: <359a92830912301719x23055fecp7110b5334c263151@mail.gmail.com>
References: <84fb38e30912301408x9cc6e14leb6b5490db8ad640@mail.gmail.com>
	 <359a92830912301719x23055fecp7110b5334c263151@mail.gmail.com>
Date: Wed, 30 Dec 2009 20:20:23 -0600
Message-ID: <84fb38e30912301820t38bd3223q10b624f0496f8fb7@mail.gmail.com>
Subject: Re: Copy and augment an indexed Document
From: tsuraan <tsuraan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

> It's an open question whether this is more or less work than
> re-parsing the document (I infer that you have the originals
> available). Before trying to reconstruct the document I'd
> ask how often you need to do this. The gremlins coming out
> of the woodwork from reconstruction would consume a lot
> of resources. For instance, could you guarantee term positions
> when you re-indexed the reconstructed document?
> What about stemmed words? How about synonyms?
> And are you willing to spend the time tracking down the
> bugs?

Well, that does sound like a ton of fun.  It's not terrible for me to
create new documents; the biggest issue is that they can be a bit on
the large side, and I thought that if I could use what's already
stored in the index rather than having to make lucene re-analyze it,
maybe things could be faster/easier.  It sounds like that isn't the
case :)

> As I said, I wouldn't go there until forced....

Yeah, that works.  I'll stick with feeding documents in the good old
fashioned way.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 31 03:45:14 2009
Return-Path: <java-user-return-44318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63072 invoked from network); 31 Dec 2009 03:45:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Dec 2009 03:45:13 -0000
Received: (qmail 65619 invoked by uid 500); 31 Dec 2009 03:45:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65528 invoked by uid 500); 31 Dec 2009 03:45:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65518 invoked by uid 99); 31 Dec 2009 03:45:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Dec 2009 03:45:09 +0000
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.211.184] (HELO mail-yw0-f184.google.com) (209.85.211.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Dec 2009 03:45:00 +0000
Received: by ywh14 with SMTP id 14so11785176ywh.20
        for <java-user@lucene.apache.org>; Wed, 30 Dec 2009 19:44:39 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.249.42 with SMTP id w42mr27788676ybh.80.1262231079145; 
	Wed, 30 Dec 2009 19:44:39 -0800 (PST)
In-Reply-To: <4B3B99AC.2040207@deri.org>
References: <98bbb46a0912300718uc699bf0x43728366d9dbdae6@mail.gmail.com>
	 <4B3B99AC.2040207@deri.org>
Date: Wed, 30 Dec 2009 19:44:39 -0800
Message-ID: <660086cb0912301944q42229082od7ae99b636b19bc@mail.gmail.com>
Subject: Re: Question about many fields within a single index
From: Tom Hill <solr-list@worldware.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd5cc4618d1ca047bfe1395
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd5cc4618d1ca047bfe1395
Content-Type: text/plain; charset=ISO-8859-1

Hi -

One thing to consider is field norms. If your fields aren't analyzed, this
doesn't apply to you.

But if you do have norms, I believe that it's one by per field with norms x
number of documents. It doesn't matter if the field occurs in a document or
not, it's nTotalFields x nDocs.

So, an index with 10,000 documents, with one field each, same field for all
docs:

-rw-r--r--   1 tom   wheel   10004 Dec 30 18:54 _0.nrm

a 10,000 doc index, where each doc has one of 100 different field names, but
still only one field per doc:

-rw-r--r--   1 tom   wheel  1000004 Dec 30 18:55 _0.nrm

As you can see, your total space for norms goes up linearly with the number
of fields.

Tom

On Wed, Dec 30, 2009 at 10:19 AM, Renaud Delbru <renaud.delbru@deri.org>wrote:

> Hi,
>
> just sharing some personal experiences in this domain,
>
> We performed some benchmarks in a similar setup (indexing millions of
> documents with thousands of fields) to measure the impact of large number of
> fields on a Lucene index.
> We observed that more you have fields, more the dictionary will become
> large. In fact, Lucene is creating term index by concatenating the field
> name with the terms associated to this field. In the worst case scenario
> (when terms occur in every field), you can have M fields * N terms entries
> in the dictionary.
> As a consequence, a term lookup in the dictionary will take longer. This
> can have a significant impact when the cache is cold. When the cache is warm
> (when parts of the dictionary are in memory), the time overhead is not
> significant, even null.
>
> If, in your data collection, the majority of the terms are locals to one
> field (i.e., when a term occurs only in one single field, like for example
> the timestamp of the document), your dictionary will not grow that much and
> therefore you will probably not notice the increase in time of dictionary
> lookups.
>
> And, as erick explained previously, its depends also of the size of your
> index, and of your use case. If it is relatively small, the overhead will be
> imperceptible. However, if your index is large (millions of documents), you
> will probably notice the overhead the first time the query is executed
> (cold-cache).
>
> I haven't tested with Lucene 3.0, but I have read somewhere (correct me if
> I am wrong) that this new version includes some optimisations for dictionary
> lookups, which should minimize the overhead.
> --
> Renaud Delbru
>
>
> On 30/12/09 16:18, Jason Tesser wrote:
>
>> I have a situation where I might have 1000 different types of Lucene
>> Documents each with 10 or so fields with different names that get
>> indexed.
>>
>> I am wondering if this is bad to do within Lucene.  I end up with
>> 10,000 fields within the index although any given document has only 10
>> or so.
>>
>> I was hoping not to have to have many indexes under the covers if I
>> can avoid it but I don't want performance to suffer either.
>>
>> Any thoughts?
>>
>> Thanks,
>> Jason Tesser
>> dotCMS Lead Development Manager
>> 1-305-858-1422
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd5cc4618d1ca047bfe1395--

From java-user-return-44319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 31 04:09:20 2009
Return-Path: <java-user-return-44319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67452 invoked from network); 31 Dec 2009 04:09:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Dec 2009 04:09:20 -0000
Received: (qmail 77749 invoked by uid 500); 31 Dec 2009 04:09:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77646 invoked by uid 500); 31 Dec 2009 04:09:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77633 invoked by uid 99); 31 Dec 2009 04:09:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Dec 2009 04:09:13 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Dec 2009 04:09:04 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1NQCL5-0000An-Rt
	for java-user@lucene.apache.org; Wed, 30 Dec 2009 20:08:43 -0800
Message-ID: <26975248.post@talk.nabble.com>
Date: Wed, 30 Dec 2009 20:08:43 -0800 (PST)
From: syedfa <fayyazuddin@gmail.com>
To: java-user@lucene.apache.org
Subject: Need help with XML Query Parser for search form
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fayyazuddin@gmail.com


Dear fellow Java developers:

I am setting up an advanced search page that is very similar to google's and
yahoo's.  I have four text fields with the following labels:

                  With all of the words:
                With the exact phrase:
 With at least on one of the words:
                     Without the words:


In the XML Query parser example in Lucene 3.0, I set up the demo
application, which has a single text field that takes user input.  Looking
at the example application, I believe that the XSL code to reflect the query
for the first text field would look like this:

	<!--My example  -->
	<xsl:if test="allWords">
		<Clause occurs="must">
			<UserQuery fieldName="allWords"><xsl:value-of
select="allWords"/></UserQuery>
		</Clause>
	</xsl:if>

However, I am not sure how to construct the XSL blocks for the other three
text fields.  I am guessing that for the last text field, it would be:

	<!-- My Example -->
	<xsl:if test="withoutWords">
		<Clause occurs="mustnot">
			<UserQuery fieldName="withoutWords"><xsl:value-of
select="withoutWords"/></UserQuery>
		</Clause>
	</xsl:if>

Is this correct?  If not, what should it be?  For the middle two text
fields, how would I construct my XSL structure?  

Another question I have is the value, "should" for the "clause" attribute. 
What does this mean exactly, and when is it supposed to be used?  I have
read the documentation in the source package, and I am still unclear, so if
someone could elaborate further, I would greatly appreciate it.

Thanks in advance to all who reply.

Sincerely;
Fayyaz
-- 
View this message in context: http://old.nabble.com/Need-help-with-XML-Query-Parser-for-search-form-tp26975248p26975248.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 31 11:10:25 2009
Return-Path: <java-user-return-44320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79377 invoked from network); 31 Dec 2009 11:10:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Dec 2009 11:10:25 -0000
Received: (qmail 64523 invoked by uid 500); 31 Dec 2009 11:10:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64458 invoked by uid 500); 31 Dec 2009 11:10:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64448 invoked by uid 99); 31 Dec 2009 11:10:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Dec 2009 11:10:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jasontesser@gmail.com designates 209.85.223.195 as permitted sender)
Received: from [209.85.223.195] (HELO mail-iw0-f195.google.com) (209.85.223.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Dec 2009 11:10:15 +0000
Received: by iwn33 with SMTP id 33so921540iwn.29
        for <java-user@lucene.apache.org>; Thu, 31 Dec 2009 03:09:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=v4GygJbfS0HNP8ZZHrwwjBf1Esrv9/niY3QRI28Vaec=;
        b=ehzUk9+fCj7TqFobgVu5rsgK6Mn3T2wDWtmQz4jIRJVOqkVbKcWRbXzdabdYkk3l6Q
         t6MGn7k1DxV/eREtQ59MQImE0Zf7Sts/GT8VahlqYVSbXZfdzzsJ+jP/lhy/7MWzsF9y
         ebHa5orhctyUpZUItyA2HxJcnsNFZKTuYptsQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=C60z0ojGwesa8o8zcyxyluhn9SyjtOlXT1QNDrBSDsNj4e84KX8pFjeIgcXhPLJ/Fc
         0ucbE/YzaRwfue2XCxaqEFWrA5yvMTYMSKXiwXCo4eJHPJ6LVzchmp6eNZe8bYPVSQBI
         2NpwkUE0IHPpaSMTXOLPKKIu+4mBZa/erls/Q=
MIME-Version: 1.0
Received: by 10.231.147.78 with SMTP id k14mr1353346ibv.11.1262257794041; Thu, 
	31 Dec 2009 03:09:54 -0800 (PST)
In-Reply-To: <660086cb0912301944q42229082od7ae99b636b19bc@mail.gmail.com>
References: <98bbb46a0912300718uc699bf0x43728366d9dbdae6@mail.gmail.com>
	 <4B3B99AC.2040207@deri.org>
	 <660086cb0912301944q42229082od7ae99b636b19bc@mail.gmail.com>
Date: Thu, 31 Dec 2009 06:09:54 -0500
Message-ID: <98bbb46a0912310309o6575af29ue029b799ef0d2f48@mail.gmail.com>
Subject: Re: Question about many fields within a single index
From: Jason Tesser <jasontesser@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

right we do analyze a number of fields.  We use the WHiteSpace
whenever we have a text field. So maybe 5 on average per guy. Can be
more of course.

Thanks,
Jason Tesser
dotCMS Lead Development Manager
1-305-858-1422



On Wed, Dec 30, 2009 at 10:44 PM, Tom Hill <solr-list@worldware.com> wrote:
> Hi -
>
> One thing to consider is field norms. If your fields aren't analyzed, thi=
s
> doesn't apply to you.
>
> But if you do have norms, I believe that it's one by per field with norms=
 x
> number of documents. It doesn't matter if the field occurs in a document =
or
> not, it's nTotalFields x nDocs.
>
> So, an index with 10,000 documents, with one field each, same field for a=
ll
> docs:
>
> -rw-r--r-- =A0 1 tom =A0 wheel =A0 10004 Dec 30 18:54 _0.nrm
>
> a 10,000 doc index, where each doc has one of 100 different field names, =
but
> still only one field per doc:
>
> -rw-r--r-- =A0 1 tom =A0 wheel =A01000004 Dec 30 18:55 _0.nrm
>
> As you can see, your total space for norms goes up linearly with the numb=
er
> of fields.
>
> Tom
>
> On Wed, Dec 30, 2009 at 10:19 AM, Renaud Delbru <renaud.delbru@deri.org>w=
rote:
>
>> Hi,
>>
>> just sharing some personal experiences in this domain,
>>
>> We performed some benchmarks in a similar setup (indexing millions of
>> documents with thousands of fields) to measure the impact of large numbe=
r of
>> fields on a Lucene index.
>> We observed that more you have fields, more the dictionary will become
>> large. In fact, Lucene is creating term index by concatenating the field
>> name with the terms associated to this field. In the worst case scenario
>> (when terms occur in every field), you can have M fields * N terms entri=
es
>> in the dictionary.
>> As a consequence, a term lookup in the dictionary will take longer. This
>> can have a significant impact when the cache is cold. When the cache is =
warm
>> (when parts of the dictionary are in memory), the time overhead is not
>> significant, even null.
>>
>> If, in your data collection, the majority of the terms are locals to one
>> field (i.e., when a term occurs only in one single field, like for examp=
le
>> the timestamp of the document), your dictionary will not grow that much =
and
>> therefore you will probably not notice the increase in time of dictionar=
y
>> lookups.
>>
>> And, as erick explained previously, its depends also of the size of your
>> index, and of your use case. If it is relatively small, the overhead wil=
l be
>> imperceptible. However, if your index is large (millions of documents), =
you
>> will probably notice the overhead the first time the query is executed
>> (cold-cache).
>>
>> I haven't tested with Lucene 3.0, but I have read somewhere (correct me =
if
>> I am wrong) that this new version includes some optimisations for dictio=
nary
>> lookups, which should minimize the overhead.
>> --
>> Renaud Delbru
>>
>>
>> On 30/12/09 16:18, Jason Tesser wrote:
>>
>>> I have a situation where I might have 1000 different types of Lucene
>>> Documents each with 10 or so fields with different names that get
>>> indexed.
>>>
>>> I am wondering if this is bad to do within Lucene. =A0I end up with
>>> 10,000 fields within the index although any given document has only 10
>>> or so.
>>>
>>> I was hoping not to have to have many indexes under the covers if I
>>> can avoid it but I don't want performance to suffer either.
>>>
>>> Any thoughts?
>>>
>>> Thanks,
>>> Jason Tesser
>>> dotCMS Lead Development Manager
>>> 1-305-858-1422
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 31 12:45:39 2009
Return-Path: <java-user-return-44321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3425 invoked from network); 31 Dec 2009 12:45:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Dec 2009 12:45:39 -0000
Received: (qmail 31105 invoked by uid 500); 31 Dec 2009 12:45:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31040 invoked by uid 500); 31 Dec 2009 12:45:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31028 invoked by uid 99); 31 Dec 2009 12:45:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Dec 2009 12:45:36 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.85.210.192] (HELO mail-yx0-f192.google.com) (209.85.210.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Dec 2009 12:45:28 +0000
Received: by yxe30 with SMTP id 30so14592876yxe.29
        for <java-user@lucene.apache.org>; Thu, 31 Dec 2009 04:45:07 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.130.39 with SMTP id c39mr27830098ybd.338.1262263506494; 
	Thu, 31 Dec 2009 04:45:06 -0800 (PST)
In-Reply-To: <29a597d20912301221k55f33b8w4029faf283cb8a14@mail.gmail.com>
References: <29a597d20912301221k55f33b8w4029faf283cb8a14@mail.gmail.com>
Date: Thu, 31 Dec 2009 07:45:06 -0500
Message-ID: <9ac0c6aa0912310445lf8abb6ah7a2893f891e92642@mail.gmail.com>
Subject: Re: Lucene 2.9: IOException from IndexReader.reopen() - Real time 
	search
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

It sounds like you may be running out of file descriptors -- how many
segments are in your index?

The reopen logic looks correct (you are closing the old reader).  Is
there anything else that may be holding files open?

Have you changed any of IW's settings, eg mergeFactor?

Mike

On Wed, Dec 30, 2009 at 3:21 PM, Kumaravel Kandasami
<kumaravel.kandasami@gmail.com> wrote:
> I am getting IOException when I am doing a "Real-time" search, i.e. I am
> creating a Index using the Index Writer and also opening the Index using
> Index Reader (writer.getReader()) to make sure the document does not exis=
t
> prior adding to the Index file.
>
> The code works perfect fine multiple time indexed across couple of GB dat=
a,
> however, on a TB it fails with the exception listed below.
> Any suggestions appreciated. Thanks. Kumar
>
> Code Snippet:
>
> =A0 IndexReader reader2 =3D reader.reopen();//get
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0if (reader2 !=3D reader) {
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0reader.close();
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0reader =3D reader2;
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0searcher =3D new IndexSear=
cher(reader);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0reader2 =3D null;
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
>
>
> Exception:
>
> Exception in thread "main" java.io.IOException: directory
> '/Users/Kumar/Dev/Cust/index/values' exists and is a directory, but canno=
t
> be listed: list() returned null
> =A0 =A0 =A0 =A0at org.apache.lucene.store.FSDirectory.listAll(FSDirectory=
.java:516)
> =A0 =A0 =A0 =A0at org.apache.lucene.store.FSDirectory.listAll(FSDirectory=
.java:531)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.IndexFileDeleter.refresh(IndexFileDeleter.java:30=
7)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.IndexWriter.doFlushInternal(IndexWriter.java:4300=
)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.IndexWriter.doFlush(IndexWriter.java:4192)
> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.flush(IndexWriter.j=
ava:4183)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.IndexWriter.getReader(IndexWriter.java:470)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.IndexWriter.getReader(IndexWriter.java:444)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.DirectoryReader.doReopen(DirectoryReader.java:384=
)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.DirectoryReader.reopen(DirectoryReader.java:348)
>
> Kumar =A0 =A0_/|\_
> www.saisk.com
> kumar@saisk.com
> "making a profound difference with knowledge and creativity..."
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-44322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 31 17:12:23 2009
Return-Path: <java-user-return-44322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71673 invoked from network); 31 Dec 2009 17:12:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Dec 2009 17:12:23 -0000
Received: (qmail 18045 invoked by uid 500); 31 Dec 2009 17:12:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17956 invoked by uid 500); 31 Dec 2009 17:12:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17946 invoked by uid 99); 31 Dec 2009 17:12:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Dec 2009 17:12:21 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kumaravel.kandasami@gmail.com designates 209.85.211.184 as permitted sender)
Received: from [209.85.211.184] (HELO mail-yw0-f184.google.com) (209.85.211.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Dec 2009 17:12:12 +0000
Received: by ywh14 with SMTP id 14so12137354ywh.20
        for <java-user@lucene.apache.org>; Thu, 31 Dec 2009 09:11:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=84wayjP1a+8Ij+p2Gsr8B0tmDOO4SoZMDEBtHpVsUt0=;
        b=QEiG4nKkx4xWRJeYvzvQGXxwlvHAtB9dgeghMH32Sw2L0EebS+HgJqZvnYq0r1h9QY
         3DkSD5iAjrE19ntojp+mQYzcBenTBpCvkrOgYEuceMQMxCqMttL9sjan6NRcChBFm1C8
         /Cx1+qUpMVsBAW4gA+ZUml/bW+LQXPSXTMswQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=mxj9ASl7YH7JPpd73smnlImNJ7b877ourJ53QQe6mmJJG5tTvCPBunvQlPAbbC98Og
         CDfw7ynemQkOO3z4cBiHqMFJEPWWoH6JqjahaqdekfSrWhWDuzQhGk4ij3wNi1pnLmWO
         buvb/lPKSJ/y38Tii10b1k/n5fogJU2211gfw=
MIME-Version: 1.0
Received: by 10.101.138.13 with SMTP id q13mr13221317ann.123.1262279511000; 
	Thu, 31 Dec 2009 09:11:51 -0800 (PST)
In-Reply-To: <9ac0c6aa0912310445lf8abb6ah7a2893f891e92642@mail.gmail.com>
References: <29a597d20912301221k55f33b8w4029faf283cb8a14@mail.gmail.com>
	 <9ac0c6aa0912310445lf8abb6ah7a2893f891e92642@mail.gmail.com>
Date: Thu, 31 Dec 2009 11:11:50 -0600
Message-ID: <29a597d20912310911n4788f6ect679e7dd6810e318a@mail.gmail.com>
Subject: Re: Lucene 2.9: IOException from IndexReader.reopen() - Real time 
	search
From: Kumaravel Kandasami <kumaravel.kandasami@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e68aa890dc47fd047c095971

--0016e68aa890dc47fd047c095971
Content-Type: text/plain; charset=ISO-8859-1

Thanks Mike.

I think it is something to do with the merge factor.
Modified the code to do optimize in the finally block the following error
message was thrown.

Code Snippet:
        nameWriter.optimize(); // errors here
        nameWriter.close();
        valueWriter.optimize(); //I am using multiple writers
simultaneously. Writing to different directory.
        valueWriter.close()


Index Directory Files:
_1o.cfs
_1p.cfs
_1q.cfs
_1r.cfs
_1s.cfs
_1t.fnm
segments_1
segments.gen
write.lock


Exception in thread "main" java.io.IOException: background merge hit
exception: _1o:c55 _1p:c1 _1q:c1 _1r:c1 _1s:c1 into _1t [optimize]
[mergeDocStores]
        at
org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2854)
        at
org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2789)
        at
org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2759)
        at
com.hli.vis.index.VisualSoftIndexWriter.commitChanges(VSIndexWriter.java:46)
        at com.hli.vis.index.Main.main(Main.java:39)
Caused by: java.io.FileNotFoundException:
/Users/Kumar/Dev/Cust/index/names/_1t.fdx (Too many open files)
        at java.io.RandomAccessFile.open(Native Method)
        at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
        at
org.apache.lucene.store.SimpleFSDirectory$SimpleFSIndexOutput.<init>(SimpleFSDirectory.java:186)
        at
org.apache.lucene.store.NIOFSDirectory.createOutput(NIOFSDirectory.java:76)
        at org.apache.lucene.index.FieldsWriter.<init>(FieldsWriter.java:82)
        at
org.apache.lucene.index.SegmentMerger.mergeFields(SegmentMerger.java:334)
        at
org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:153)
        at
org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:5029)
        at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:4614)
        at
org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(ConcurrentMergeScheduler.java:235)
        at
org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:291)
Java Result: 1


Kumar    _/|\_
www.saisk.com
kumar@saisk.com
"making a profound difference with knowledge and creativity..."


On Thu, Dec 31, 2009 at 6:45 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> It sounds like you may be running out of file descriptors -- how many
> segments are in your index?
>
> The reopen logic looks correct (you are closing the old reader).  Is
> there anything else that may be holding files open?
>
> Have you changed any of IW's settings, eg mergeFactor?
>
> Mike
>
> On Wed, Dec 30, 2009 at 3:21 PM, Kumaravel Kandasami
> <kumaravel.kandasami@gmail.com> wrote:
> > I am getting IOException when I am doing a "Real-time" search, i.e. I am
> > creating a Index using the Index Writer and also opening the Index using
> > Index Reader (writer.getReader()) to make sure the document does not
> exist
> > prior adding to the Index file.
> >
> > The code works perfect fine multiple time indexed across couple of GB
> data,
> > however, on a TB it fails with the exception listed below.
> > Any suggestions appreciated. Thanks. Kumar
> >
> > Code Snippet:
> >
> >   IndexReader reader2 = reader.reopen();//get
> >
> >                    if (reader2 != reader) {
> >
> >                        reader.close();
> >                        reader = reader2;
> >                        searcher = new IndexSearcher(reader);
> >                        reader2 = null;
> >                    }
> >
> >
> > Exception:
> >
> > Exception in thread "main" java.io.IOException: directory
> > '/Users/Kumar/Dev/Cust/index/values' exists and is a directory, but
> cannot
> > be listed: list() returned null
> >        at
> org.apache.lucene.store.FSDirectory.listAll(FSDirectory.java:516)
> >        at
> org.apache.lucene.store.FSDirectory.listAll(FSDirectory.java:531)
> >        at
> >
> org.apache.lucene.index.IndexFileDeleter.refresh(IndexFileDeleter.java:307)
> >        at
> >
> org.apache.lucene.index.IndexWriter.doFlushInternal(IndexWriter.java:4300)
> >        at
> > org.apache.lucene.index.IndexWriter.doFlush(IndexWriter.java:4192)
> >        at
> org.apache.lucene.index.IndexWriter.flush(IndexWriter.java:4183)
> >        at
> > org.apache.lucene.index.IndexWriter.getReader(IndexWriter.java:470)
> >        at
> > org.apache.lucene.index.IndexWriter.getReader(IndexWriter.java:444)
> >        at
> >
> org.apache.lucene.index.DirectoryReader.doReopen(DirectoryReader.java:384)
> >        at
> > org.apache.lucene.index.DirectoryReader.reopen(DirectoryReader.java:348)
> >
> > Kumar    _/|\_
> > www.saisk.com
> > kumar@saisk.com
> > "making a profound difference with knowledge and creativity..."
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e68aa890dc47fd047c095971--

From java-user-return-44323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 31 17:35:07 2009
Return-Path: <java-user-return-44323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80601 invoked from network); 31 Dec 2009 17:35:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 31 Dec 2009 17:35:07 -0000
Received: (qmail 46187 invoked by uid 500); 31 Dec 2009 17:35:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46117 invoked by uid 500); 31 Dec 2009 17:35:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46107 invoked by uid 99); 31 Dec 2009 17:35:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Dec 2009 17:35:05 +0000
X-ASF-Spam-Status: No, hits=-2.6 required=5.0
	tests=BAYES_00,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kumaravel.kandasami@gmail.com designates 209.85.217.225 as permitted sender)
Received: from [209.85.217.225] (HELO mail-gx0-f225.google.com) (209.85.217.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Dec 2009 17:34:56 +0000
Received: by gxk25 with SMTP id 25so6174316gxk.5
        for <java-user@lucene.apache.org>; Thu, 31 Dec 2009 09:34:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=AEL0jyj2KjXjx1hhqNd8XlGU1CGXR8LfTlB0toi0WKw=;
        b=F2PZj8lAOUmdTin7Ey4snqV8NZGff8NCv94xe3sW/XDjBjeoGRwR7ssUYacdakhqOJ
         9EAs0fUjvSee1k3kYE3l6tfmFwDhKis0/MaALAQStix6TW7HmwyFSYCOn/DmDlcdqYz9
         nOM3pWgDWRF4IXRgFmtJ1eIl3N0UxV5PJ5boI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=SSsnt9iO4rprg8NyU2MhfzFDxn6gwIijEj7rR03zt2TXAB1ZdOkhqG6WeQiMOi1AxR
         OXKTP/+jfRlc8CtmLNp68purIAM2w3jRceG5iZZt01jpTj3e09vD1/HGTlAqYyd6eixD
         /J/2dj22aFCy78etECithC4ejiIsmLiVlu6C8=
MIME-Version: 1.0
Received: by 10.100.70.9 with SMTP id s9mr2547417ana.160.1262280875546; Thu, 
	31 Dec 2009 09:34:35 -0800 (PST)
In-Reply-To: <29a597d20912310911n4788f6ect679e7dd6810e318a@mail.gmail.com>
References: <29a597d20912301221k55f33b8w4029faf283cb8a14@mail.gmail.com>
	 <9ac0c6aa0912310445lf8abb6ah7a2893f891e92642@mail.gmail.com>
	 <29a597d20912310911n4788f6ect679e7dd6810e318a@mail.gmail.com>
Date: Thu, 31 Dec 2009 11:34:35 -0600
Message-ID: <29a597d20912310934l1c5d9309i9232d7b3f8afc366@mail.gmail.com>
Subject: Re: Lucene 2.9: IOException from IndexReader.reopen() - Real time 
	search
From: Kumaravel Kandasami <kumaravel.kandasami@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00148537d6e331998b047c09ab9d

--00148537d6e331998b047c09ab9d
Content-Type: text/plain; charset=ISO-8859-1

Identified the problem.

reader.close() was not getting called in a specific logic flow.



Thank You.

Kumar    _/|\_
www.saisk.com
kumar@saisk.com
"making a profound difference with knowledge and creativity..."


On Thu, Dec 31, 2009 at 11:11 AM, Kumaravel Kandasami <
kumaravel.kandasami@gmail.com> wrote:

> Thanks Mike.
>
> I think it is something to do with the merge factor.
> Modified the code to do optimize in the finally block the following error
> message was thrown.
>
> Code Snippet:
>         nameWriter.optimize(); // errors here
>         nameWriter.close();
>         valueWriter.optimize(); //I am using multiple writers
> simultaneously. Writing to different directory.
>         valueWriter.close()
>
>
> Index Directory Files:
> _1o.cfs
> _1p.cfs
> _1q.cfs
> _1r.cfs
> _1s.cfs
> _1t.fnm
> segments_1
> segments.gen
> write.lock
>
>
> Exception in thread "main" java.io.IOException: background merge hit
> exception: _1o:c55 _1p:c1 _1q:c1 _1r:c1 _1s:c1 into _1t [optimize]
> [mergeDocStores]
>         at
> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2854)
>         at
> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2789)
>         at
> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2759)
>         at
> com.hli.vis.index.VisualSoftIndexWriter.commitChanges(VSIndexWriter.java:46)
>         at com.hli.vis.index.Main.main(Main.java:39)
> Caused by: java.io.FileNotFoundException:
> /Users/Kumar/Dev/Cust/index/names/_1t.fdx (Too many open files)
>         at java.io.RandomAccessFile.open(Native Method)
>         at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
>         at
> org.apache.lucene.store.SimpleFSDirectory$SimpleFSIndexOutput.<init>(SimpleFSDirectory.java:186)
>         at
> org.apache.lucene.store.NIOFSDirectory.createOutput(NIOFSDirectory.java:76)
>         at
> org.apache.lucene.index.FieldsWriter.<init>(FieldsWriter.java:82)
>         at
> org.apache.lucene.index.SegmentMerger.mergeFields(SegmentMerger.java:334)
>         at
> org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:153)
>         at
> org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:5029)
>         at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:4614)
>         at
> org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(ConcurrentMergeScheduler.java:235)
>         at
> org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:291)
> Java Result: 1
>
>
>
> Kumar    _/|\_
> www.saisk.com
> kumar@saisk.com
> "making a profound difference with knowledge and creativity..."
>
>
> On Thu, Dec 31, 2009 at 6:45 AM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>> It sounds like you may be running out of file descriptors -- how many
>> segments are in your index?
>>
>> The reopen logic looks correct (you are closing the old reader).  Is
>> there anything else that may be holding files open?
>>
>> Have you changed any of IW's settings, eg mergeFactor?
>>
>> Mike
>>
>> On Wed, Dec 30, 2009 at 3:21 PM, Kumaravel Kandasami
>> <kumaravel.kandasami@gmail.com> wrote:
>> > I am getting IOException when I am doing a "Real-time" search, i.e. I am
>> > creating a Index using the Index Writer and also opening the Index using
>> > Index Reader (writer.getReader()) to make sure the document does not
>> exist
>> > prior adding to the Index file.
>> >
>> > The code works perfect fine multiple time indexed across couple of GB
>> data,
>> > however, on a TB it fails with the exception listed below.
>> > Any suggestions appreciated. Thanks. Kumar
>> >
>> > Code Snippet:
>> >
>> >   IndexReader reader2 = reader.reopen();//get
>> >
>> >                    if (reader2 != reader) {
>> >
>> >                        reader.close();
>> >                        reader = reader2;
>> >                        searcher = new IndexSearcher(reader);
>> >                        reader2 = null;
>> >                    }
>> >
>> >
>> > Exception:
>> >
>> > Exception in thread "main" java.io.IOException: directory
>> > '/Users/Kumar/Dev/Cust/index/values' exists and is a directory, but
>> cannot
>> > be listed: list() returned null
>> >        at
>> org.apache.lucene.store.FSDirectory.listAll(FSDirectory.java:516)
>> >        at
>> org.apache.lucene.store.FSDirectory.listAll(FSDirectory.java:531)
>> >        at
>> >
>> org.apache.lucene.index.IndexFileDeleter.refresh(IndexFileDeleter.java:307)
>> >        at
>> >
>> org.apache.lucene.index.IndexWriter.doFlushInternal(IndexWriter.java:4300)
>> >        at
>> > org.apache.lucene.index.IndexWriter.doFlush(IndexWriter.java:4192)
>> >        at
>> org.apache.lucene.index.IndexWriter.flush(IndexWriter.java:4183)
>> >        at
>> > org.apache.lucene.index.IndexWriter.getReader(IndexWriter.java:470)
>> >        at
>> > org.apache.lucene.index.IndexWriter.getReader(IndexWriter.java:444)
>> >        at
>> >
>> org.apache.lucene.index.DirectoryReader.doReopen(DirectoryReader.java:384)
>> >        at
>> > org.apache.lucene.index.DirectoryReader.reopen(DirectoryReader.java:348)
>> >
>> > Kumar    _/|\_
>> > www.saisk.com
>> > kumar@saisk.com
>> > "making a profound difference with knowledge and creativity..."
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

--00148537d6e331998b047c09ab9d--

