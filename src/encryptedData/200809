From java-user-return-35826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 01 07:26:22 2008
Return-Path: <java-user-return-35826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69626 invoked from network); 1 Sep 2008 07:26:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Sep 2008 07:26:22 -0000
Received: (qmail 28287 invoked by uid 500); 1 Sep 2008 07:26:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28256 invoked by uid 500); 1 Sep 2008 07:26:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28244 invoked by uid 99); 1 Sep 2008 07:26:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Sep 2008 00:26:13 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of leonidms@gmail.com designates 209.85.200.173 as permitted sender)
Received: from [209.85.200.173] (HELO wf-out-1314.google.com) (209.85.200.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Sep 2008 07:25:15 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2276044wfc.20
        for <java-user@lucene.apache.org>; Mon, 01 Sep 2008 00:25:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=HM7YyNfXbyFozN/fxZvakc8DTIw9r97n7IGO4NPNDL0=;
        b=i1jOsMnTFhHeDsqyBaBZE1Ir1VYqBqNcnDue1q5UWhNasUPSDF29r6ft/SvlPaRufZ
         XY2E3WKSSqrbGoDf4lzUjQCEGypmP4BjViHCUfdmVoJRgONTcqOUdyTCtZqgRgXhpvIg
         5I4aPqCzZ7cDx7MWdERfRULB5+cxBdr61xhWA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=Glw7E1c74TLEnZ79/nnOswY7fqg2vgm898fOfq8WzocAX47SWpOXUUFneKcO/7WAlw
         bF/2SFBXI8rSB7Dbm2aZtvxeL7CQibMu7C+LuUFD6rMDj3X2vwAW/AW9V0Bxd65OzyJp
         /QOIl3TUQKJp2yNAo6cZxXxrbMuEtNvwdar20=
Received: by 10.143.32.7 with SMTP id k7mr1985398wfj.305.1220253936294;
        Mon, 01 Sep 2008 00:25:36 -0700 (PDT)
Received: by 10.143.41.4 with HTTP; Mon, 1 Sep 2008 00:25:36 -0700 (PDT)
Message-ID: <dcd377ca0809010025s1281eff7r5716c444de2fb671@mail.gmail.com>
Date: Mon, 1 Sep 2008 10:25:36 +0300
From: "Leonid Maslov" <leonidms@gmail.com>
To: java-user@lucene.apache.org
Subject: Newbie question: using Lucene to index hierarchical information.
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6439_16148661.1220253936288"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6439_16148661.1220253936288
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

First of all, sorry for my poor English. It's not my native language.

I'm trying to use Lucene to index hierarchical kind of information: I have
structured html and pdf/word documents and I want to index them in ways to
perform search in titles, text, paragraphs or tables only, or any
combinations of items mentioned above. At the moment I see 3 possible
solutions:

   - Create the set of all possible fields, like: contents, title, heading,
   table etc... And index the data in all them accordingly. Possible impacts:
   - a big count of fields
      - data duplication (because I need to make search looking in the
      paragraphs to look inside all the inner elements, so every outer element
      indexed will contain all the inner element content as well)
   - Create the hierarchy of the fields, like "title", "paragraph/title",
   "paragraph/title/subparagraph/table". Possible impacts:
      - count of fields remains the same
      - soft set of fields (not consistent)
      - I'm not sure about the ways I could process required information and
      perform search.
      - Performance issues?
      - Use one field for content and just add location prefix to content.
   For example "contents:*paragraph/heading:*token1 token2". *
   paragraph/heading:* here is used as additional information prefix. So, I
   (possibly?) could reuse PrefixQuery functionality or smth. Impacts:
      - Strong set of index fields (small)
      - Additional information processing - all the queries I'll use will
      have to work as PrefixQuery
      - Performance issues?


So, have anyone tried to make things work like that? Or am I trying to use
wrench to hammer in nails? I assume Lucene wasn't thought to be used like
that, but it's worth trying (at least asking).
Any results / suggestions are welcome!

-- 
Bests regards,
Leonid Maslov!
Adrienne Gusoff  - "Opportunity knocked. My doorman threw him out."

------=_Part_6439_16148661.1220253936288--

From java-user-return-35827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 01 07:27:02 2008
Return-Path: <java-user-return-35827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70073 invoked from network); 1 Sep 2008 07:27:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Sep 2008 07:27:02 -0000
Received: (qmail 30539 invoked by uid 500); 1 Sep 2008 07:26:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30283 invoked by uid 500); 1 Sep 2008 07:26:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30272 invoked by uid 99); 1 Sep 2008 07:26:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Sep 2008 00:26:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.71] (HELO mx01.mailboxcop.com) (206.125.223.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Sep 2008 07:25:55 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx01.mailboxcop.com (8.13.8/8.13.8) with ESMTP id m817QJZl031847
	for <java-user@lucene.apache.org>; Mon, 1 Sep 2008 02:26:19 -0500
Received: (qmail 16205 invoked by uid 0); 1 Sep 2008 02:26:19 -0500
Date: 1 Sep 2008 02:26:19 -0500
Message-ID: <20080901072619.16204.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Newbie question: using Lucene to index hierarchical information.
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.43
X-Bayes-Prob: 0.0043 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 6.00] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 268479001 - 1f45b51b79f7
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=268479001&m=1f45b51b79f7&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=268479001&m=1f45b51b79f7&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=268479001&m=1f45b51b79f7&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.3
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY

Tom Roberts is out of the office till 2nd September 2008.

LUX reopens on 1st September 2008



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 01 07:27:35 2008
Return-Path: <java-user-return-35828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70530 invoked from network); 1 Sep 2008 07:27:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Sep 2008 07:27:35 -0000
Received: (qmail 33122 invoked by uid 500); 1 Sep 2008 07:27:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33097 invoked by uid 500); 1 Sep 2008 07:27:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33086 invoked by uid 99); 1 Sep 2008 07:27:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Sep 2008 00:27:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.74] (HELO mx04.mailboxcop.com) (206.125.223.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Sep 2008 07:26:28 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx04.mailboxcop.com (8.13.8/8.13.8) with ESMTP id m817QwgN012579
	for <java-user@lucene.apache.org>; Mon, 1 Sep 2008 02:26:58 -0500
Received: (qmail 17826 invoked by uid 0); 1 Sep 2008 02:26:58 -0500
Date: 1 Sep 2008 02:26:58 -0500
Message-ID: <20080901072658.17824.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: Newbie question: using Lucene to index hierarchical information.
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.00
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 6.00] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 268479114 - a38ffd4cf457 (trained as not-spam)
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=268479114&m=a38ffd4cf457&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=268479114&m=a38ffd4cf457&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=268479114&m=a38ffd4cf457&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.6
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY

Tom Roberts is out of the office till 2nd September 2008.

LUX reopens on 1st September 2008



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 01 08:29:57 2008
Return-Path: <java-user-return-35829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2671 invoked from network); 1 Sep 2008 08:29:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Sep 2008 08:29:57 -0000
Received: (qmail 5804 invoked by uid 500); 1 Sep 2008 08:29:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5765 invoked by uid 500); 1 Sep 2008 08:29:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5754 invoked by uid 99); 1 Sep 2008 08:29:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Sep 2008 01:29:48 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Sep 2008 08:28:50 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Ka4ml-0000T4-HU
	for java-user@lucene.apache.org; Mon, 01 Sep 2008 01:29:19 -0700
Message-ID: <19250290.post@talk.nabble.com>
Date: Mon, 1 Sep 2008 01:29:19 -0700 (PDT)
From: "Karsten F." <karsten-lucene@fiz-technik.de>
To: java-user@lucene.apache.org
Subject: Re: Index types
In-Reply-To: <19179175.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: karsten-lucene@fiz-technik.de
References: <19177298.post@talk.nabble.com> <19178616.post@talk.nabble.com> <19179175.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi John,

I am not sure about the way Solr implements range query.
But it looks like, that Solr is using 
org.apache.lucene.search.ConstantScoreRangeQuery
which itself is using
org.apache.lucene.search.RangeFilter

So Solr do not rewrite the query to a large Boolean SHOULD, but it is
reading all terms for the "range"-Field.
This could be slow. 
If the RangeFilter is used many time a CachingWrapperFilter would speed up
the search.
You also could (try to) read the terms from memory instead of hard disk.
Because a timestamp is only a long = 64bit, a appropriate solution would
also to store the timestamps in main memory for a fast RangeFilter
implementation.

Best regards
   Karsten


John Patterson wrote:
> 
> 
> Does Solr's range impementation use the large Boolean SHOULD queries?
> 

-- 
View this message in context: http://www.nabble.com/Index-types-tp19177298p19250290.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 01 10:07:24 2008
Return-Path: <java-user-return-35830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53057 invoked from network); 1 Sep 2008 10:07:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Sep 2008 10:07:23 -0000
Received: (qmail 25867 invoked by uid 500); 1 Sep 2008 10:07:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25818 invoked by uid 500); 1 Sep 2008 10:07:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25807 invoked by uid 99); 1 Sep 2008 10:07:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Sep 2008 03:07:11 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of akshay.ukey@gmail.com designates 74.125.78.26 as permitted sender)
Received: from [74.125.78.26] (HELO ey-out-2122.google.com) (74.125.78.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Sep 2008 10:06:14 +0000
Received: by ey-out-2122.google.com with SMTP id 6so731827eyi.53
        for <java-user@lucene.apache.org>; Mon, 01 Sep 2008 03:06:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=hZv6oCIxU1vt9H7Mq45rizXAoFEglkf4zsXP765vvGQ=;
        b=Z7Rd3XnRU/EGssMHF+brjkFxqGSDZXaq9tGllJLvtBcEwJodwIgMvi7SCcqaUKbebY
         w1bryQt5JBHmFqpfpSFyF0B8VfKGydTDmlDuee0u5khDxBT5FAnzrrYpxNNLVj/cioDc
         Idx+rGy/3eov/U158fSYrM5YwdAGdefqAjois=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=bwvo+Clor5ca7MAsr7Y3nq/pU7uRw0mwHnWen4FGLLauugTC5I3T9dV5/OqPJlviiL
         7O6HEBAVThmN6Nzo7hNPzO7hhRe5g7jBipR7RzFgDNe3GkgvyOReJToqt/c97vIbZrtg
         maOALufJQAJdlSE7DNvwUYr8PNJJeCj6ALUZU=
Received: by 10.210.39.2 with SMTP id m2mr6273174ebm.97.1220263603283;
        Mon, 01 Sep 2008 03:06:43 -0700 (PDT)
Received: by 10.210.105.16 with HTTP; Mon, 1 Sep 2008 03:06:43 -0700 (PDT)
Message-ID: <36a9c1920809010306y4cb4722cx176a19798c7f8700@mail.gmail.com>
Date: Mon, 1 Sep 2008 15:36:43 +0530
From: Akshay <akshay.ukey@gmail.com>
To: java-user@lucene.apache.org
Subject: getTimestamp method in IndexCommit
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_35149_11382943.1220263603264"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_35149_11382943.1220263603264
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

We need a feature for time based cleanup of IndexCommits. Would it be
possible to add a method to IndexCommit class to get the timestamp of an
index commit?

Thanks.

-- 
Regards,
Akshay Ukey.

------=_Part_35149_11382943.1220263603264--

From java-user-return-35831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 01 11:49:16 2008
Return-Path: <java-user-return-35831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94764 invoked from network); 1 Sep 2008 11:49:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Sep 2008 11:49:16 -0000
Received: (qmail 10411 invoked by uid 500); 1 Sep 2008 11:49:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10376 invoked by uid 500); 1 Sep 2008 11:49:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10365 invoked by uid 99); 1 Sep 2008 11:49:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Sep 2008 04:49:06 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Sep 2008 11:48:07 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Ka7tc-00086O-Od
	for java-user@lucene.apache.org; Mon, 01 Sep 2008 04:48:36 -0700
Message-ID: <19253386.post@talk.nabble.com>
Date: Mon, 1 Sep 2008 04:48:36 -0700 (PDT)
From: gaz77 <gareth.cole@bit10.net>
To: java-user@lucene.apache.org
Subject: Re: Confused with NGRAM results
In-Reply-To: <194691.2866.qm@web50306.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: gareth.cole@bit10.net
References: <19202310.post@talk.nabble.com> <194691.2866.qm@web50306.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Otis,

The original message text is:



> Hi,
> 
> I'd appreciate if someone could explain the results I'm getting.
> 
> I've written a simple custom analyzer that applies the NGramTokenFilter to
> the token stream during indexing. It's never applied during searching. The
> purpose of this is to match sub-words.
> 
> Without the ngram filter, if I searched on the word 'postcode' it returns
> 2 documents. If I searched on 'code' it returns 6 documents (with no
> overlap on the postcode results).
> 
> If I apply the ngram filter with min 1 and max 10, searching 'postcode'
> returns the same 2 docs, while searching 'code' returns 9 docs. This
> sort-of feels right.
> 
> The problem comes when I set the min ngram size to 3, and the max to 5.
> Searching 'postcode' returns no results (as expected), but searching
> 'code' only returns 2 docs (the 2 normally returned by a 'postcode'
> search).
> 
> This last result for 'code' just doesn't seem correct - it should be
> returning at least the 6 docs from the original search.
> 
> I'd really appreciate some advice on what is going on with the ngram
> filter.
> 
> Thanks
> 



Otis Gospodnetic wrote:
> 
> This actually sounds bugish to me, but you removed the text from your
> original email, so I don't know what context this was in.
> 
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> 
> 
> 
> ----- Original Message ----
>> From: gaz77 <gareth.cole@bit10.net>
>> To: java-user@lucene.apache.org
>> Sent: Friday, August 29, 2008 12:50:46 AM
>> Subject: Re: Confused with NGRAM results
>> 
>> 
>> Thanks for the pointer.
>> 
>> I've gone into this in some depth, using the AnalyzerUtils class from the
>> lucene in action book.
>> 
>> It seems that the NGramTokenFilter is only processing part of the string
>> that goes in. It stops tokenising the words part way through. That's why
>> the
>> documents weren't found in results.
>> 
>> I've had a look at the source code, and I think it's because the next()
>> function returns null when it hits a token smaller than the min ngram
>> size.
>> For example, if I set the minimum to 3, then a 2-character token will
>> cause
>> it to return null.
>> 
>> I'm not sure if this is by design or a bug. either way, at least I know
>> what's causing it now.
>> 
>> Cheers
>> 
>> 
>> 
>> -- 
>> View this message in context: 
>> http://www.nabble.com/Confused-with-NGRAM-results-tp19202310p19210665.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Confused-with-NGRAM-results-tp19202310p19253386.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 01 13:17:22 2008
Return-Path: <java-user-return-35832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44498 invoked from network); 1 Sep 2008 13:17:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Sep 2008 13:17:22 -0000
Received: (qmail 7320 invoked by uid 500); 1 Sep 2008 13:17:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6995 invoked by uid 500); 1 Sep 2008 13:17:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6984 invoked by uid 99); 1 Sep 2008 13:17:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Sep 2008 06:17:13 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Sep 2008 13:16:12 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Ka9Gs-0003IC-Cx
	for java-user@lucene.apache.org; Mon, 01 Sep 2008 06:16:42 -0700
Message-ID: <19254591.post@talk.nabble.com>
Date: Mon, 1 Sep 2008 06:16:42 -0700 (PDT)
From: davood <dave.fet@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MoreLikeThis return no results
In-Reply-To: <834486.5819.qm@web26005.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: dave.fet@gmail.com
References: <20080830060619.21464.qmail@secure3.apollohosting.com> <834486.5819.qm@web26005.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I enabled the TermVector for  required fields using following piece of code,
Field titleField = new Field("title", title, Field.Store.NO,
Field.Index.TOKENIZED, TermVector.YES);
and then re-indexed it. But again it shows no result. 
I checked the stored documents and they TermVector exists and si correct but
morelikethis return no result for a given document id.

What am I missing? 


mark harwood wrote:
> 
> MoreLikeThis needs to find the terms in your doc. It tries to do this by
> using TermFreqVectors which are stored in the index if you choose to add
> them at  index-time. If you haven't done this then it will fall back to
> reanalysing the content of the document usings an analyser (despite what
> the javadocs for the setAnalyzer method  say about not needing to set an
> analyzer when MoreLiking an existing document).
> 
> So your options are probably to re-index with term vectors turned on or
> set an appropriate choice of analyzer.
> 
> Cheers,
> Mark
> (only 3 days to go until Tom Roberts is back in the office! ) 
> 

-- 
View this message in context: http://www.nabble.com/Re%3A-MoreLikeThis-return-no-results-tp19230763p19254591.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 01 13:56:38 2008
Return-Path: <java-user-return-35833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66006 invoked from network); 1 Sep 2008 13:56:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Sep 2008 13:56:37 -0000
Received: (qmail 75287 invoked by uid 500); 1 Sep 2008 13:56:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74771 invoked by uid 500); 1 Sep 2008 13:56:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74760 invoked by uid 99); 1 Sep 2008 13:56:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Sep 2008 06:56:27 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of leonidms@gmail.com designates 209.85.200.173 as permitted sender)
Received: from [209.85.200.173] (HELO wf-out-1314.google.com) (209.85.200.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Sep 2008 13:55:30 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2434270wfc.20
        for <java-user@lucene.apache.org>; Mon, 01 Sep 2008 06:55:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=8jBXgP52p9CXnAc2e6Rx7+O4SJIBauAGVo8hjd0bJk4=;
        b=PkIR2z8zmZkmO2r17duzQI5463BWvawybH7O810U88LFRb9KJk8iGDw5mFQlubeuF4
         wVmLqEoZh6ngV71ybx7FWXJwKvB0QWWc15bfLD82/F/AHWo2nAs/8sLGI/cZ8U4Shu6Q
         /GCZxKtxe/3stzyO45IywHfzyI4Ii4iJ4OJyM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=LQH1+eABn4YL0fM9C6AFptK0dCUyo/tyKkTyE5EGl1c8/Myqli7qk0iBu6OLpJNf2O
         4Ai8DptSRWK40Lrrv/OmnaKmKAIp8AVsqfauD45FW6XvS7EkDX6uFMoQOHUEGWmsiQ5k
         c1H7Jg2QlnhoP+VlBiXLad13v9/DdrQUrUiLk=
Received: by 10.142.212.19 with SMTP id k19mr2117101wfg.142.1220277351188;
        Mon, 01 Sep 2008 06:55:51 -0700 (PDT)
Received: by 10.143.41.4 with HTTP; Mon, 1 Sep 2008 06:55:51 -0700 (PDT)
Message-ID: <dcd377ca0809010655y2a9a1bc0i3fe9e2a81d34f1e8@mail.gmail.com>
Date: Mon, 1 Sep 2008 16:55:51 +0300
From: "Leonid Maslov" <leonidms@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Newbie question: using Lucene to index hierarchical information.
In-Reply-To: <dcd377ca0809010025s1281eff7r5716c444de2fb671@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11453_21023714.1220277351178"
References: <dcd377ca0809010025s1281eff7r5716c444de2fb671@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11453_21023714.1220277351178
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Any comments, suggestions? Maybe I should rephrase my original message or
describe it in detail?
I really would like to get any response if possible.

Thanks a lot in advance!

On Mon, Sep 1, 2008 at 10:25 AM, Leonid Maslov <leonidms@gmail.com> wrote:

> Hi all,
>
> First of all, sorry for my poor English. It's not my native language.
>
> I'm trying to use Lucene to index hierarchical kind of information: I have
> structured html and pdf/word documents and I want to index them in ways to
> perform search in titles, text, paragraphs or tables only, or any
> combinations of items mentioned above. At the moment I see 3 possible
> solutions:
>
>    - Create the set of all possible fields, like: contents, title,
>    heading, table etc... And index the data in all them accordingly. Possible
>    impacts:
>    - a big count of fields
>       - data duplication (because I need to make search looking in the
>       paragraphs to look inside all the inner elements, so every outer element
>       indexed will contain all the inner element content as well)
>    - Create the hierarchy of the fields, like "title", "paragraph/title",
>    "paragraph/title/subparagraph/table". Possible impacts:
>       - count of fields remains the same
>       - soft set of fields (not consistent)
>       - I'm not sure about the ways I could process required information
>       and perform search.
>       - Performance issues?
>       - Use one field for content and just add location prefix to content.
>    For example "contents:*paragraph/heading:*token1 token2". *
>    paragraph/heading:* here is used as additional information prefix. So,
>    I (possibly?) could reuse PrefixQuery functionality or smth. Impacts:
>       - Strong set of index fields (small)
>       - Additional information processing - all the queries I'll use will
>       have to work as PrefixQuery
>       - Performance issues?
>
>
> So, have anyone tried to make things work like that? Or am I trying to use
> wrench to hammer in nails? I assume Lucene wasn't thought to be used like
> that, but it's worth trying (at least asking).
> Any results / suggestions are welcome!
>
> --
> Bests regards,
> Leonid Maslov!
> Adrienne Gusoff  - "Opportunity knocked. My doorman threw him out."
>



-- 
Bests regards,
Leonid Maslov!
Adrienne Gusoff  - "Opportunity knocked. My doorman threw him out."

------=_Part_11453_21023714.1220277351178--

From java-user-return-35834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 01 14:07:31 2008
Return-Path: <java-user-return-35834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71392 invoked from network); 1 Sep 2008 14:07:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Sep 2008 14:07:31 -0000
Received: (qmail 99833 invoked by uid 500); 1 Sep 2008 14:07:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99800 invoked by uid 500); 1 Sep 2008 14:07:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99789 invoked by uid 99); 1 Sep 2008 14:07:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Sep 2008 07:07:22 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.225 as permitted sender)
Received: from [209.85.198.225] (HELO rv-out-0506.google.com) (209.85.198.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Sep 2008 14:06:25 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2368320rvb.5
        for <java-user@lucene.apache.org>; Mon, 01 Sep 2008 07:06:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=Ii+8MZJNiYvL4o6OCzNPj1iNRDXAuBL3baPCUv0fX7M=;
        b=mr2K512B+KHU2zfaJacWOT8H7/rHBMTrdKCuDLxk2b39k60bDczoa7C+p4Z1C1infv
         +ljVYBC3e2L0ic8Nqz26EIB3BLenJ6aDZNFTJo455iQMSXmLkI3GPfW6ILLLmnGdkeSX
         xrmLyQomxp29H0HbNKRu9rrKPm5eJAM+Akwuk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=N9MDRFKwZSNmbgrmLq9kNR2GKT2G+tF0xw4IcC1UefIygTAD71KWKZ4npxzk2QJn1G
         X0Eqf0nMLQ9KG3c1Qf66FQ9Wti1IXTh+agnFTfE0fG+w6D5IoouGuE6QND6FCSy0Zc9X
         fPj3as++k2pNFUyjf6p/kcOIyRI9HKNcua4DI=
Received: by 10.140.132.3 with SMTP id f3mr3490951rvd.71.1220278016346;
        Mon, 01 Sep 2008 07:06:56 -0700 (PDT)
Received: by 10.141.176.5 with HTTP; Mon, 1 Sep 2008 07:06:56 -0700 (PDT)
Message-ID: <1bcb7c7f0809010706t27a0bb20o6798ff4dc084c689@mail.gmail.com>
Date: Mon, 1 Sep 2008 17:06:56 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: lucene based tagging structure
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_57679_17174579.1220278016342"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_57679_17174579.1220278016342
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

Recently I developed an interest in making a lucene based structure for
tagging. As we all know lucene's update is not real-time and one has to
delete a document prior to updating it.

I have been googling for different approaches to a lucene based tagging
structure, and I stumbled upon

http://blogs.sun.com/basler/entry/lucene_search_engine_web_crawlers

Quote:

Updating Indexes in Lucene for Tagging:
One thing to keep in mind is that Lucene doesn't allow an index to be
updated, the specific index has to be deleted then re-created.  When adding
a new tag to an item or updating a document index you have to be able to
access all the data that was originally in the index before re-creating it.
This sounds straightforward but there is on caveat.  If you index items
using an approach that doesn't allow retrieval of all the data in the index,
you will have to read the data from a persistent store so the index can be
completely re-created.  You can get in this state when you create a
org.apache.lucene.document.Field for the documents index utilizing the
"UnStore" method or "Text" method with a Reader.  When using these methods,
the data can't be retrieve via the exposed APIs.  This really isn't a big
deal once you factor it in to your approach. Our tagging requirement came
after the initial implementation was completed and it caused some problems
that made us have to re-think our index scheme.


Any ideas on the approach or different approaches.

Best Regards,
-C.B.

------=_Part_57679_17174579.1220278016342--

From java-user-return-35835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 01 14:44:16 2008
Return-Path: <java-user-return-35835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89787 invoked from network); 1 Sep 2008 14:44:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Sep 2008 14:44:16 -0000
Received: (qmail 56419 invoked by uid 500); 1 Sep 2008 14:44:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56393 invoked by uid 500); 1 Sep 2008 14:44:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56382 invoked by uid 99); 1 Sep 2008 14:44:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Sep 2008 07:44:06 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=SPF_PASS,URIBL_GREY,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of marcelo.ochoa@gmail.com designates 74.125.46.31 as permitted sender)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Sep 2008 14:43:06 +0000
Received: by yw-out-2324.google.com with SMTP id 3so182708ywj.5
        for <java-user@lucene.apache.org>; Mon, 01 Sep 2008 07:43:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=eDH/gKg0aNTjDKB7MN79Qf/Yu4tAi9uDKb9KGuxIF9w=;
        b=Iuqm/wx7nOvpncGj6mIMgDQ927gLHvJdgivJosYCPvWjKS/iJaTTM9WheUG8qd6wod
         p8azOEwg1/EKPzk5ofdvaqyrZZpkiZtF6AqMATowJti/syxlnkMnV9TvyevIDZLLStWW
         LYtB97MsnlfgZAhytt/zOYeYcEIPd2tj1LHmE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=SHKVyvyAiZx8Pj0g8RfA2RweX/BrpX0RTpMtAVgHsAYzh/J5X2k6RikA3K9Ku1cqQc
         uTB1fTC0Fme+2Vd4lSZToeIszth/OB7n89URnDkEkQn/PJErnIZ7NThHLc6TinyQrzQe
         NV6uhZ1hIG5BtMAE4f9x2TDhaoISR2p3600uo=
Received: by 10.151.143.3 with SMTP id v3mr8761483ybn.159.1220280215415;
        Mon, 01 Sep 2008 07:43:35 -0700 (PDT)
Received: by 10.151.110.3 with HTTP; Mon, 1 Sep 2008 07:43:35 -0700 (PDT)
Message-ID: <126142c0809010743r51111faai54cff1ebe6ec0763@mail.gmail.com>
Date: Mon, 1 Sep 2008 11:43:35 -0300
From: "Marcelo Ochoa" <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MoreLikeThis return no results
In-Reply-To: <19254591.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20080830060619.21464.qmail@secure3.apollohosting.com>
	 <834486.5819.qm@web26005.mail.ukl.yahoo.com>
	 <19254591.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Dave:
  MoreLikeThis object has two parameters which controls his functionality:
        mlt.setMinTermFreq(minTermFreq.intValue());
        mlt.setMinDocFreq(minDocFreq.intValue());
  By default MinTermFreq is 2, so if your document has no terms with
freq greater than 2 will return a query with no terms which returns 0
hits.
  Try setting it to 1.
  Best regards, Marcelo.
On Mon, Sep 1, 2008 at 10:16 AM, davood <dave.fet@gmail.com> wrote:
>
> Hi,
>
> I enabled the TermVector for  required fields using following piece of code,
> Field titleField = new Field("title", title, Field.Store.NO,
> Field.Index.TOKENIZED, TermVector.YES);
> and then re-indexed it. But again it shows no result.
> I checked the stored documents and they TermVector exists and si correct but
> morelikethis return no result for a given document id.
>
> What am I missing?
>
>
> mark harwood wrote:
>>
>> MoreLikeThis needs to find the terms in your doc. It tries to do this by
>> using TermFreqVectors which are stored in the index if you choose to add
>> them at  index-time. If you haven't done this then it will fall back to
>> reanalysing the content of the document usings an analyser (despite what
>> the javadocs for the setAnalyzer method  say about not needing to set an
>> analyzer when MoreLiking an existing document).
>>
>> So your options are probably to re-index with term vectors turned on or
>> set an appropriate choice of analyzer.
>>
>> Cheers,
>> Mark
>> (only 3 days to go until Tom Roberts is back in the office! )
>>
>
> --
> View this message in context: http://www.nabble.com/Re%3A-MoreLikeThis-return-no-results-tp19230763p19254591.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
Marcelo F. Ochoa
http://marceloochoa.blogspot.com/
http://marcelo.ochoa.googlepages.com/home
______________
Do you Know DBPrism? Look @ DB Prism's Web Site
http://www.dbprism.com.ar/index.html
More info?
Chapter 17 of the book "Programming the Oracle Database using Java &
Web Services"
http://www.amazon.com/gp/product/1555583296/
Chapter 21 of the book "Professional XML Databases" - Wrox Press
http://www.amazon.com/gp/product/1861003587/
Chapter 8 of the book "Oracle & Open Source" - O'Reilly
http://www.oreilly.com/catalog/oracleopen/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 01 14:52:54 2008
Return-Path: <java-user-return-35836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94258 invoked from network); 1 Sep 2008 14:52:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Sep 2008 14:52:54 -0000
Received: (qmail 62713 invoked by uid 500); 1 Sep 2008 14:52:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62679 invoked by uid 500); 1 Sep 2008 14:52:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62668 invoked by uid 99); 1 Sep 2008 14:52:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Sep 2008 07:52:45 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.212] (HELO web26001.mail.ukl.yahoo.com) (217.12.10.212)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 01 Sep 2008 14:51:45 +0000
Received: (qmail 10229 invoked by uid 60001); 1 Sep 2008 14:52:13 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=FQYJQ9kRtheg4FHDj2p4viiGp3XlL8FpAtb2TQzLfnwSY6TT/yV28U0jRIS1MNa4pJ5Dp+j0ti44ibRYVSARV2rBncJuthL1iKjR7qd+LzUKB1Js/7tav/v8DDTaJYtnKrXfAwCvcP4nvWZ5aKS446qXB9qkawJBWhgOvjrSmto=;
X-YMail-OSG: Nfmpgj0VM1kyXVrGievBeTJPENl4_jVM9eIIKTjK1O6LDk0zdbGpszvPDUi7yTXG6Ok5hf7whOXw_Fb6DPock_HlPK0cQmqYTuL3ab2qxyDPd.k9dQcREjfoiww_pEdNpbQL8LQB5zWiT9D4.RwykbOW
Received: from [62.189.26.100] by web26001.mail.ukl.yahoo.com via HTTP; Mon, 01 Sep 2008 14:52:12 GMT
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Mon, 1 Sep 2008 14:52:12 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: MoreLikeThis return no results
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <995682.9897.qm@web26001.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

MoreLikeThis essentially shortlists a large list of terms (found in example=
 text or an existing doc) and uses them in a query.=0ATo see what terms hav=
e been shortlisted try calling query.rewrite(reader) and then call toString=
() or extractTerms.=0A=0AIf this reveals no terms try using a debugger whic=
h should help you step through MLT's shortlisting logic and reveal the issu=
e (e.g. can't find TermVector or all terms are greater than chosen doc freq=
uency setting).=0A=0A=0A=0A=0A----- Original Message ----=0AFrom: davood <d=
ave.fet@gmail.com>=0ATo: java-user@lucene.apache.org=0ASent: Monday, 1 Sept=
ember, 2008 14:16:42=0ASubject: Re: MoreLikeThis return no results=0A=0A=0A=
Hi,=0A=0AI enabled the TermVector for  required fields using following piec=
e of code,=0AField titleField =3D new Field("title", title, Field.Store.NO,=
=0AField.Index.TOKENIZED, TermVector.YES);=0Aand then re-indexed it. But ag=
ain it shows no result. =0AI checked the stored documents and they TermVect=
or exists and si correct but=0Amorelikethis return no result for a given do=
cument id.=0A=0AWhat am I missing? =0A=0A=0Amark harwood wrote:=0A> =0A> Mo=
reLikeThis needs to find the terms in your doc. It tries to do this by=0A> =
using TermFreqVectors which are stored in the index if you choose to add=0A=
> them at  index-time. If you haven't done this then it will fall back to=
=0A> reanalysing the content of the document usings an analyser (despite wh=
at=0A> the javadocs for the setAnalyzer method  say about not needing to se=
t an=0A> analyzer when MoreLiking an existing document).=0A> =0A> So your o=
ptions are probably to re-index with term vectors turned on or=0A> set an a=
ppropriate choice of analyzer.=0A> =0A> Cheers,=0A> Mark=0A> (only 3 days t=
o go until Tom Roberts is back in the office! ) =0A> =0A=0A-- =0AView this =
message in context: http://www.nabble.com/Re%3A-MoreLikeThis-return-no-resu=
lts-tp19230763p19254591.html=0ASent from the Lucene - Java Users mailing li=
st archive at Nabble.com.=0A=0A=0A-----------------------------------------=
----------------------------=0ATo unsubscribe, e-mail: java-user-unsubscrib=
e@lucene.apache.org=0AFor additional commands, e-mail: java-user-help@lucen=
e.apache.org=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 01 15:00:51 2008
Return-Path: <java-user-return-35837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2508 invoked from network); 1 Sep 2008 15:00:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Sep 2008 15:00:50 -0000
Received: (qmail 73405 invoked by uid 500); 1 Sep 2008 15:00:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73365 invoked by uid 500); 1 Sep 2008 15:00:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73354 invoked by uid 99); 1 Sep 2008 15:00:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Sep 2008 08:00:42 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Sep 2008 14:59:44 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KaAt4-0007C8-KM
	for java-user@lucene.apache.org; Mon, 01 Sep 2008 08:00:14 -0700
Message-ID: <19256118.post@talk.nabble.com>
Date: Mon, 1 Sep 2008 08:00:14 -0700 (PDT)
From: davood <dave.fet@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MoreLikeThis return no results
In-Reply-To: <995682.9897.qm@web26001.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: dave.fet@gmail.com
References: <20080830060619.21464.qmail@secure3.apollohosting.com> <995682.9897.qm@web26001.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks so much for hints, now it works correctly, the problem was with
mlt.setMinTermFreq.

Many thanks.

-- 
View this message in context: http://www.nabble.com/Re%3A-MoreLikeThis-return-no-results-tp19230763p19256118.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 01 20:30:22 2008
Return-Path: <java-user-return-35838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87529 invoked from network); 1 Sep 2008 20:30:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Sep 2008 20:30:22 -0000
Received: (qmail 87516 invoked by uid 500); 1 Sep 2008 20:30:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87480 invoked by uid 500); 1 Sep 2008 20:30:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87468 invoked by uid 99); 1 Sep 2008 20:30:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Sep 2008 13:30:13 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markus.lux@gmail.com designates 209.85.200.170 as permitted sender)
Received: from [209.85.200.170] (HELO wf-out-1314.google.com) (209.85.200.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Sep 2008 20:29:16 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2584605wfc.20
        for <java-user@lucene.apache.org>; Mon, 01 Sep 2008 13:29:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=p/CYHdWK3SSWumeqOkUz6HQyOaV39q+JT58NoUTe8ZQ=;
        b=pzNOmOvlfAjwCjGBb2tgRScm6UDZRZuKf/jYulHeTfWVxIttUjd6nCwXfPZkE7Me5S
         CAPFzTCtBk1av4d345aUo44k7XHnqYON+ykfI7mHltKYppOgAAt+uNbenPpaX8toImkP
         VAhtmZNASoxn/YQYXVlPAh9LSzRaMyAOHSrmk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=gKRH1ZawVhg800I9eCpN/DrAwvCcgIPGClTlratlJTE2kGFObced8LeGvSbE/rKXEw
         9aOHsn4Ru548jZMObejS8vfC9jyw1dlU6+l3Sb3lC8LbQLAF2HbeEvWr1qh6IwsFKB75
         Q9yYZTN6qebFu+i37N+tnfQvMnrpOjWnrGvh4=
Received: by 10.142.207.8 with SMTP id e8mr2230432wfg.281.1220300977212;
        Mon, 01 Sep 2008 13:29:37 -0700 (PDT)
Received: by 10.142.109.19 with HTTP; Mon, 1 Sep 2008 13:29:36 -0700 (PDT)
Message-ID: <8064f4bd0809011329j271c0818x5af80c8a5d5fce60@mail.gmail.com>
Date: Mon, 1 Sep 2008 22:29:36 +0200
From: "Markus Lux" <markus.lux@gmail.com>
To: java-user@lucene.apache.org
Subject: Injecting additional tokens
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4742_22095245.1220300977209"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4742_22095245.1220300977209
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

Assume I have a String "z-4". That would be properly indexed by my Analyzer,
so I'd find the belonging document if I search for "z-4". Now I also want to
find that document if I search for "z4".
Now my approach would be to inject an additional token "z4" at indexing
time. There may also be several other characters that could be deleted in a
new token.
How could I manage that? Is there any predefined Tokenizer/Filter for this?
Or am I wrong and there is a better way to get this done?

Thanks.

-- 
Markus

------=_Part_4742_22095245.1220300977209--

From java-user-return-35839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 01 20:57:41 2008
Return-Path: <java-user-return-35839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1724 invoked from network); 1 Sep 2008 20:57:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Sep 2008 20:57:41 -0000
Received: (qmail 15734 invoked by uid 500); 1 Sep 2008 20:57:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15698 invoked by uid 500); 1 Sep 2008 20:57:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15686 invoked by uid 99); 1 Sep 2008 20:57:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Sep 2008 13:57:33 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of raymond.balmes@gmail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Sep 2008 20:56:35 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1367277fgb.27
        for <java-user@lucene.apache.org>; Mon, 01 Sep 2008 13:56:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=NVoragBllq5ssUQ9jyvNvqdM/8iDjOv5Scp1ivFggLM=;
        b=gnkofKtW45ReZipYq+HWO6o7/Hj6i0PwvLB8eZeSyZeGAc2NJi4cOwtWtAy22WceKr
         VNx8QaEvLw1q3FaYrQ/4wq/RmdZpbZMXpbR3hy3wPdTKd5XD2CLC/YxtZQGKtc7aP1ZU
         giaG4TE6o9yvhRFFlROfVb1MBRY1hSj+vbWh0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Dapc9k60NUBqVsvfLkHnhfqSnsl/IbSIJ2rvI53YHdOZngyDHmqC2bVC574l/XgVP5
         EkC6dn6mqyc5j8hESqLnKv6Y402URKytXHgmk/2QLnPRW5gr3LHbpW8Da7CFdRIA23FW
         Lq0wrQ5/GFLTAGWHBLc1MnCuWsNSRgDCYMl6U=
Received: by 10.103.170.13 with SMTP id x13mr4689558muo.27.1220302608506;
        Mon, 01 Sep 2008 13:56:48 -0700 (PDT)
Received: by 10.103.214.9 with HTTP; Mon, 1 Sep 2008 13:56:48 -0700 (PDT)
Message-ID: <4014d98b0809011356p338274b9td45fc163b06fd522@mail.gmail.com>
Date: Mon, 1 Sep 2008 22:56:48 +0200
From: "=?ISO-8859-1?Q?Raymond_Balm=E8s?=" <raymond.balmes@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Injecting additional tokens
In-Reply-To: <8064f4bd0809011329j271c0818x5af80c8a5d5fce60@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_57162_23788635.1220302608485"
References: <8064f4bd0809011329j271c0818x5af80c8a5d5fce60@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_57162_23788635.1220302608485
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Is my subscription working... I got no reply on my previous question.
Sorry the disturbance.

On Mon, Sep 1, 2008 at 10:29 PM, Markus Lux <markus.lux@gmail.com> wrote:

> Hi,
>
> Assume I have a String "z-4". That would be properly indexed by my
> Analyzer,
> so I'd find the belonging document if I search for "z-4". Now I also want
> to
> find that document if I search for "z4".
> Now my approach would be to inject an additional token "z4" at indexing
> time. There may also be several other characters that could be deleted in a
> new token.
> How could I manage that? Is there any predefined Tokenizer/Filter for this?
> Or am I wrong and there is a better way to get this done?
>
> Thanks.
>
> --
> Markus
>

------=_Part_57162_23788635.1220302608485--

From java-user-return-35840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 02 08:18:04 2008
Return-Path: <java-user-return-35840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53034 invoked from network); 2 Sep 2008 08:18:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Sep 2008 08:18:03 -0000
Received: (qmail 97283 invoked by uid 500); 2 Sep 2008 08:17:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97251 invoked by uid 500); 2 Sep 2008 08:17:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97240 invoked by uid 99); 2 Sep 2008 08:17:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 01:17:54 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 08:16:55 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KaR4n-0005QJ-Me
	for java-user@lucene.apache.org; Tue, 02 Sep 2008 01:17:25 -0700
Message-ID: <19265968.post@talk.nabble.com>
Date: Tue, 2 Sep 2008 01:17:25 -0700 (PDT)
From: "Karsten F." <karsten-lucene@fiz-technik.de>
To: java-user@lucene.apache.org
Subject: Re: Injecting additional tokens
In-Reply-To: <8064f4bd0809011329j271c0818x5af80c8a5d5fce60@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: karsten-lucene@fiz-technik.de
References: <8064f4bd0809011329j271c0818x5af80c8a5d5fce60@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Markus,

hopefully someone will tell you the predefined Filter for this.

I only want to agree, that filter is the correct place for this, and that
you should be aware of the Token positions (after your filter you must have
two Tokens on the same position).

I think "WordDelimitierFilter" is a good starting point, if you have to
write this filter by your own.

best regards
  Karsten




Markus Lux wrote:
> 
> Hi,
> 
> Assume I have a String "z-4". That would be properly indexed by my
> Analyzer,
> so I'd find the belonging document if I search for "z-4". Now I also want
> to
> find that document if I search for "z4".
> Now my approach would be to inject an additional token "z4" at indexing
> time. There may also be several other characters that could be deleted in
> a
> new token.
> How could I manage that? Is there any predefined Tokenizer/Filter for
> this?
> Or am I wrong and there is a better way to get this done?
> 
> Thanks.
> 
> -- 
> Markus
> 
> 

-- 
View this message in context: http://www.nabble.com/Injecting-additional-tokens-tp19260304p19265968.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 02 08:24:13 2008
Return-Path: <java-user-return-35841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55530 invoked from network); 2 Sep 2008 08:24:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Sep 2008 08:24:13 -0000
Received: (qmail 6586 invoked by uid 500); 2 Sep 2008 08:24:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6544 invoked by uid 500); 2 Sep 2008 08:24:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6533 invoked by uid 99); 2 Sep 2008 08:24:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 01:24:04 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 209.85.200.174 as permitted sender)
Received: from [209.85.200.174] (HELO wf-out-1314.google.com) (209.85.200.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 08:23:05 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2857677wfc.20
        for <java-user@lucene.apache.org>; Tue, 02 Sep 2008 01:23:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=21xTaQsugOjyk/aFeN//xW9B4RwOEW+a7QmO8VroTfY=;
        b=RIqYB6Qe9p+zz7KQc+HUYiJVuITgRbhy3XjNsXMKZN+ggaGSmTeyGvxJjJKgld+ufs
         aRpOFumYObmbsr92MRWQuuy9KvUCJJzhQw4pGrNZRcYVDpH00LR+lgB9iFV5evXffh35
         9aw8HpSKKBws51bbgeRV+hkt/HUPUcglUhlR4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=ZQzrhSFlO6EUYorfGv9YsnXfxNwML9VyLlQPZZlUzqv6wMXKXii/a1/bTM113ZZSWE
         bI0mxGKP2tMVk0L5IsB+nngb+LJ6MF+ElHsRrqHiaeOAFYNj4ZBcOGMZJhPTmOMnUsKK
         PAQ7KJ9cPTxVJQYq/73bHk+3KmWD5enj2K6oQ=
Received: by 10.142.86.7 with SMTP id j7mr2451608wfb.78.1220343806867;
        Tue, 02 Sep 2008 01:23:26 -0700 (PDT)
Received: by 10.142.111.8 with HTTP; Tue, 2 Sep 2008 01:23:26 -0700 (PDT)
Message-ID: <6e3ae6310809020123k4ce4aeb8hbeedd51ca9073262@mail.gmail.com>
Date: Tue, 2 Sep 2008 01:23:26 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: search for empty field?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2713_20542979.1220343806853"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2713_20542979.1220343806853
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Is it possible to query for documents that have empty values for a field?

Say need to find documents with category empty, I tried negative query:
 -category:*
But it returns 0 document. I think "category:*" is basically match all, so
this "-category:*" doesn't work.

Thanks!

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!

------=_Part_2713_20542979.1220343806853--

From java-user-return-35842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 02 08:27:15 2008
Return-Path: <java-user-return-35842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57821 invoked from network); 2 Sep 2008 08:27:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Sep 2008 08:27:14 -0000
Received: (qmail 14680 invoked by uid 500); 2 Sep 2008 08:27:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14632 invoked by uid 500); 2 Sep 2008 08:27:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14607 invoked by uid 99); 2 Sep 2008 08:27:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 01:27:06 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.242] (HELO an-out-0708.google.com) (209.85.132.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 08:26:07 +0000
Received: by an-out-0708.google.com with SMTP id c37so325166anc.49
        for <java-user@lucene.apache.org>; Tue, 02 Sep 2008 01:26:17 -0700 (PDT)
Received: by 10.100.215.5 with SMTP id n5mr357906ang.88.1220343977839;
        Tue, 02 Sep 2008 01:26:17 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id h40sm10771315wxd.33.2008.09.02.01.26.16
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 02 Sep 2008 01:26:17 -0700 (PDT)
Message-Id: <64338149-209B-4033-A120-122DF1D95913@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <36a9c1920809010306y4cb4722cx176a19798c7f8700@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: getTimestamp method in IndexCommit
Date: Tue, 2 Sep 2008 04:26:15 -0400
References: <36a9c1920809010306y4cb4722cx176a19798c7f8700@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Are you thinking this would just fallback to Directory.fileModified on  
the segments_N file for that commit?

You could actually do that without any API change, because IndexCommit  
exposes a getSegmentsFileName().

Mike

Akshay wrote:

> Hi,
>
> We need a feature for time based cleanup of IndexCommits. Would it be
> possible to add a method to IndexCommit class to get the timestamp  
> of an
> index commit?
>
> Thanks.
>
> -- 
> Regards,
> Akshay Ukey.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 02 08:27:40 2008
Return-Path: <java-user-return-35843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58003 invoked from network); 2 Sep 2008 08:27:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Sep 2008 08:27:40 -0000
Received: (qmail 16273 invoked by uid 500); 2 Sep 2008 08:27:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16242 invoked by uid 500); 2 Sep 2008 08:27:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16231 invoked by uid 99); 2 Sep 2008 08:27:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 01:27:31 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.82.239] (HELO wx-out-0506.google.com) (66.249.82.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 08:26:31 +0000
Received: by wx-out-0506.google.com with SMTP id h29so854535wxd.20
        for <java-user@lucene.apache.org>; Tue, 02 Sep 2008 01:27:01 -0700 (PDT)
Received: by 10.70.10.3 with SMTP id 3mr9186695wxj.62.1220344021177;
        Tue, 02 Sep 2008 01:27:01 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id h40sm10771315wxd.33.2008.09.02.01.26.59
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 02 Sep 2008 01:27:00 -0700 (PDT)
Message-Id: <E6C16DF2-B83A-4341-91C7-BAD10D80DBEA@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <19220927.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: reusing Document with multiple fields in lucene 2.3
Date: Tue, 2 Sep 2008 04:26:59 -0400
References: <19220927.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

Maybe the complexity caused by reuse in this case (a pool of Field  
instances) may not be offset by the performance gains of avoiding GC?   
You could code up a quick test and see what performance gains it gives  
you?

Reuse works very well when your documents are extremely regular.

Mike

Juyal wrote:

>
> Hello all!
> I have a document structure such that each document can have  
> multiple and
> variable number of fields of a given name. For example:
> - Document-1 has two fields with the name "fld1" and three fields  
> with the
> name "fld2";
> - Document-2 has five fields with the name "fld1" and one field with  
> the
> name "fld2".
>
> If a document has a fixed number of fields then it's easy to reuse the
> field instances by setting them to different values before writing  
> the doc,
> but I can't think of any way in which I can reuse the document or  
> field
> instances in this case (where the number of fields varies from  
> document to
> document). One possibility is to maintain a pool of fields, create a  
> new
> instance for each document and add the already-existing fields to  
> the new
> doc after setting them to an appropriate value. But this would require
> significant additions to the code.
>
> Has anyone else faced such a situation? I'd be glad if someone could  
> give
> any pointers for this situation! Thanks in anticipation!
>
> - Gunjan
> -- 
> View this message in context: http://www.nabble.com/reusing-Document-with-multiple-fields-in-lucene-2.3-tp19220927p19220927.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 02 08:47:14 2008
Return-Path: <java-user-return-35844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66260 invoked from network); 2 Sep 2008 08:47:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Sep 2008 08:47:14 -0000
Received: (qmail 32127 invoked by uid 500); 2 Sep 2008 08:47:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32086 invoked by uid 500); 2 Sep 2008 08:47:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32075 invoked by uid 99); 2 Sep 2008 08:47:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 01:47:05 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 08:46:06 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KaRX2-0006N4-D4
	for java-user@lucene.apache.org; Tue, 02 Sep 2008 01:46:36 -0700
Message-ID: <19266355.post@talk.nabble.com>
Date: Tue, 2 Sep 2008 01:46:36 -0700 (PDT)
From: "Karsten F." <karsten-lucene@fiz-technik.de>
To: java-user@lucene.apache.org
Subject: Re: Newbie question: using Lucene to index hierarchical
 information.
In-Reply-To: <dcd377ca0809010655y2a9a1bc0i3fe9e2a81d34f1e8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: karsten-lucene@fiz-technik.de
References: <dcd377ca0809010025s1281eff7r5716c444de2fb671@mail.gmail.com> <dcd377ca0809010655y2a9a1bc0i3fe9e2a81d34f1e8@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Leonid,

what kind of query is your use case?

Comlex scenario:
You need all the hierarchical structure information in one query. This means
you want to search with xpath in a real xml-Database. (like: All Documents
with a subtitle XY which contains directly after this subtitle a table with
the same column like ...)

Normal scenario:
You want to search for only one part of your hierarchical information like
'Document with word xy in title' and 'Documents with word xy in table'.

I am not familiar with lucene use in xml-Databases, but I can advice for
"normal scenario":

Take a look to the xml-aware search in xtf (
http://xtf.wiki.sourceforge.net/tagRef_textIndexer_PreFilter#toctagRef_textIndexer_PreFilter7
).
The idea is to use one lucene-document for each section with only two
fields: "text" and "sectionType".
But to collect all hits belonging to one hierarchical information (e.g. one
html-File) and compress this to one representative hit in lucene.

Best regards
  Karsten


leonardinius wrote:
> 
> Any comments, suggestions? Maybe I should rephrase my original message or
> describe it in detail?
> I really would like to get any response if possible.
> 
> Thanks a lot in advance!
> 
> On Mon, Sep 1, 2008 at 10:25 AM, Leonid Maslov <leonidms@gmail.com> wrote:
> 
>> Hi all,
>>
>> First of all, sorry for my poor English. It's not my native language.
>>
>> I'm trying to use Lucene to index hierarchical kind of information: I
>> have
>> structured html and pdf/word documents and I want to index them in ways
>> to
>> perform search in titles, text, paragraphs or tables only, or any
>> combinations of items mentioned above. At the moment I see 3 possible
>> solutions:
>>
>>    - Create the set of all possible fields, like: contents, title,
>>    heading, table etc... And index the data in all them accordingly.
>> Possible
>>    impacts:
>>    - a big count of fields
>>       - data duplication (because I need to make search looking in the
>>       paragraphs to look inside all the inner elements, so every outer
>> element
>>       indexed will contain all the inner element content as well)
>>    - Create the hierarchy of the fields, like "title", "paragraph/title",
>>    "paragraph/title/subparagraph/table". Possible impacts:
>>       - count of fields remains the same
>>       - soft set of fields (not consistent)
>>       - I'm not sure about the ways I could process required information
>>       and perform search.
>>       - Performance issues?
>>       - Use one field for content and just add location prefix to
>> content.
>>    For example "contents:*paragraph/heading:*token1 token2". *
>>    paragraph/heading:* here is used as additional information prefix. So,
>>    I (possibly?) could reuse PrefixQuery functionality or smth. Impacts:
>>       - Strong set of index fields (small)
>>       - Additional information processing - all the queries I'll use will
>>       have to work as PrefixQuery
>>       - Performance issues?
>>
>>
>> So, have anyone tried to make things work like that? Or am I trying to
>> use
>> wrench to hammer in nails? I assume Lucene wasn't thought to be used like
>> that, but it's worth trying (at least asking).
>> Any results / suggestions are welcome!
>>
>> --
>> Bests regards,
>> Leonid Maslov!
>> Adrienne Gusoff  - "Opportunity knocked. My doorman threw him out."
>>
> 
> 
> 
> -- 
> Bests regards,
> Leonid Maslov!
> Adrienne Gusoff  - "Opportunity knocked. My doorman threw him out."
> 
> 

-- 
View this message in context: http://www.nabble.com/Newbie-question%3A-using-Lucene-to-index-hierarchical-information.-tp19250038p19266355.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 02 09:37:05 2008
Return-Path: <java-user-return-35845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89041 invoked from network); 2 Sep 2008 09:37:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Sep 2008 09:37:04 -0000
Received: (qmail 75541 invoked by uid 500); 2 Sep 2008 09:36:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75506 invoked by uid 500); 2 Sep 2008 09:36:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75495 invoked by uid 99); 2 Sep 2008 09:36:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 02:36:53 -0700
X-ASF-Spam-Status: No, hits=4.2 required=10.0
	tests=DEAR_SOMETHING,HTML_MESSAGE,NORMAL_HTTP_TO_IP,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of leonidms@gmail.com designates 209.85.200.175 as permitted sender)
Received: from [209.85.200.175] (HELO wf-out-1314.google.com) (209.85.200.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 09:35:56 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2886448wfc.20
        for <java-user@lucene.apache.org>; Tue, 02 Sep 2008 02:36:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=7BZCFLJVpxaGOP3zLAAZSnAoIWgTHDmlAGT7enq5mgc=;
        b=cqIpf9QiaoChRBUmZQS8m3JP2xRIV6fIN0WKoosGCuoSf/5qgLUOCe6e5JpC3JIJv7
         2pxet6b64aGpgVFhyjIxlrVa1bmpG2AavoLlSMNngoABr3EEQBiSGPl5woBTDFZBJyJR
         uplALeR2R9dz2xe/tcJEXFAVIgTLuI0f/FtSE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=tTPoqD7z3pz0top6QVkb8lxI+GnFVJ2Emsuy1kRmFxtZRRskNQQX80Nqe8WuxaR8Y6
         0MogDoXvc1GlV7gAemp41jjHFD25orbXmmZdyOMGyV+ZFgUowO84G/9Omzosj1hB3qNa
         PphsPh+XXTFqSS+1XR07KvB2MMYEhF2nrb6nE=
Received: by 10.142.158.3 with SMTP id g3mr2453803wfe.347.1220348186761;
        Tue, 02 Sep 2008 02:36:26 -0700 (PDT)
Received: by 10.143.41.4 with HTTP; Tue, 2 Sep 2008 02:36:26 -0700 (PDT)
Message-ID: <dcd377ca0809020236l24f79c70y91bbf10a6d40bf5e@mail.gmail.com>
Date: Tue, 2 Sep 2008 12:36:26 +0300
From: "Leonid Maslov" <leonidms@gmail.com>
To: java-user@lucene.apache.org
Subject: Test. Please ignore that. Fwd: How to send mail to java user
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3052_30523104.1220348186756"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3052_30523104.1220348186756
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

---------- Forwarded message ----------
From: Sankari Palanisamy <sankari.p@amshuhu.com>
Date: Tue, Sep 2, 2008 at 12:32 PM
Subject: Re: How to send mail to java user
To: Leonid Maslov <leonidms@gmail.com>


Hi,
  Thanks for u'r response..
 Still i am getting following message
Further what to do.

Thanks&Regards
  Sankari.P
----------------------------------------------------------------
This is an automatically generated Delivery Status Notification

Delivery to the following recipient failed permanently:

    java-user@lucene.apache.org

Technical details of permanent failure:
Google tried to deliver your message, but it was rejected by the recipient
domain. We recommend contacting the other email provider for further
information about the cause of this error. The error that the other server
returned was: 552 552 spam score (5.4) exceeded threshold (state 18).

  ----- Original message -----

Received: by 10.140.144.6 with SMTP id r6mr3987792rvd.293.1220347734713;
       Tue, 02 Sep 2008 02:28:54 -0700 (PDT)
Received: by 10.141.163.3 with HTTP; Tue, 2 Sep 2008 02:28:53 -0700 (PDT)
Message-ID: <d07c2d230809020228w7d74e786uc617c043e991d670@mail.gmail.com>
Date: Tue, 2 Sep 2008 14:58:53 +0530
From: "Sankari Palanisamy" <sankari.p@amshuhu.com>
To: java-user@lucene.apache.org
Subject: Resource is out of sync with the file system
MIME-Version: 1.0
Content-Type: multipart/alternative;
       boundary="----=_Part_2204_26978616.1220347733729"

------=_Part_2204_26978616.1220347733729
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Dear sir,
  I am new to lucene..And i integerate lucene with my application.I search
text with my table.Its working..But after sometimes while i try to build my
application
it shows following error..


On Tue, Sep 2, 2008 at 2:56 PM, Leonid Maslov <leonidms@gmail.com> wrote:

> Hi Sankari,
>
> I'm writing to java-user@lucene.apache.org e-mail address in order to
> deliver email to lucene-user email-list.
> Hope I have helped You a little. Do not hesitate to contact me if the
> problem remains.
>
>
>
> On Tue, Sep 2, 2008 at 12:19 PM, Sankari Palanisamy <sankari.p@amshuhu.com
> > wrote:
>
>> Dear sir,
>>   I have subscribed with mailing list..Then i mtrying to post my question
>> to java-user-help.But its always not delievering..
>> How to post my question..
>> Thanks in advance
>> Sankari.p
>>
>
>
>
> --
> Bests regards,
> Leonid Maslov!
> George Carlin  - "In comic strips, the person on the right always speaks
> first."
>




-- 
Bests regards,
Leonid Maslov!
Adrienne Gusoff  - "Opportunity knocked. My doorman threw him out."

------=_Part_3052_30523104.1220348186756--

From java-user-return-35846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 02 15:31:53 2008
Return-Path: <java-user-return-35846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31694 invoked from network); 2 Sep 2008 15:31:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Sep 2008 15:31:53 -0000
Received: (qmail 53226 invoked by uid 500); 2 Sep 2008 15:31:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52997 invoked by uid 500); 2 Sep 2008 15:31:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52979 invoked by uid 99); 2 Sep 2008 15:31:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 08:31:33 -0700
X-ASF-Spam-Status: No, hits=4.2 required=10.0
	tests=DEAR_SOMETHING,HTML_MESSAGE,NORMAL_HTTP_TO_IP,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of raymond.balmes@gmail.com designates 209.85.134.184 as permitted sender)
Received: from [209.85.134.184] (HELO mu-out-0910.google.com) (209.85.134.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 15:30:34 +0000
Received: by mu-out-0910.google.com with SMTP id i10so2309031mue.5
        for <java-user@lucene.apache.org>; Tue, 02 Sep 2008 08:31:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Fhc8jhoq0EeTUMDwtcZOGD/ozO6RhQPe+A1t/McBEpg=;
        b=ofrkod9MnS49oG5jA2M5D/y1147R/sGg5o6Fvwt+bgiwryX0401B54v961cdowDU16
         Y6GzsVxFPFuP5fnNggX52Bp4cnT6YEWBd4K5MtRT9TfZMqmBSbS5/K2ko+oqH37Qob2y
         6m5w8MWl+9O2SnrG1EcyBrCZUGIbcZo1QJ0Y0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=M9disib4zcXb9J7OX/QTVrVeRhEAnkXa9uUsf7metSF1GBRNP8hMmzG+nKXsd4PMZ2
         ucF4PW7bUlMBdbyKZfAC9ixVvqq7Is2P7fsZfATst47/4zLiwaJfBA9zAgwZDJc1tLma
         2av7qkJSuKMOvAMYj4BezhXljGLgs1j97saC0=
Received: by 10.103.244.10 with SMTP id w10mr5416150mur.67.1220369463736;
        Tue, 02 Sep 2008 08:31:03 -0700 (PDT)
Received: by 10.103.214.9 with HTTP; Tue, 2 Sep 2008 08:31:03 -0700 (PDT)
Message-ID: <4014d98b0809020831r5a9acb3bw9c9b6799596b9efc@mail.gmail.com>
Date: Tue, 2 Sep 2008 17:31:03 +0200
From: "=?ISO-8859-1?Q?Raymond_Balm=E8s?=" <raymond.balmes@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Test. Please ignore that. Fwd: How to send mail to java user
In-Reply-To: <dcd377ca0809020236l24f79c70y91bbf10a6d40bf5e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10350_7765997.1220369463700"
References: <dcd377ca0809020236l24f79c70y91bbf10a6d40bf5e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10350_7765997.1220369463700
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm getting plenty of message but do you receive mine... please someone give
me reply

On Tue, Sep 2, 2008 at 11:36 AM, Leonid Maslov <leonidms@gmail.com> wrote:

> ---------- Forwarded message ----------
> From: Sankari Palanisamy <sankari.p@amshuhu.com>
> Date: Tue, Sep 2, 2008 at 12:32 PM
> Subject: Re: How to send mail to java user
> To: Leonid Maslov <leonidms@gmail.com>
>
>
> Hi,
>  Thanks for u'r response..
>  Still i am getting following message
> Further what to do.
>
> Thanks&Regards
>  Sankari.P
> ----------------------------------------------------------------
> This is an automatically generated Delivery Status Notification
>
> Delivery to the following recipient failed permanently:
>
>    java-user@lucene.apache.org
>
> Technical details of permanent failure:
> Google tried to deliver your message, but it was rejected by the recipient
> domain. We recommend contacting the other email provider for further
> information about the cause of this error. The error that the other server
> returned was: 552 552 spam score (5.4) exceeded threshold (state 18).
>
>  ----- Original message -----
>
> Received: by 10.140.144.6 with SMTP id r6mr3987792rvd.293.1220347734713;
>       Tue, 02 Sep 2008 02:28:54 -0700 (PDT)
> Received: by 10.141.163.3 with HTTP; Tue, 2 Sep 2008 02:28:53 -0700 (PDT)
> Message-ID: <d07c2d230809020228w7d74e786uc617c043e991d670@mail.gmail.com>
> Date: Tue, 2 Sep 2008 14:58:53 +0530
> From: "Sankari Palanisamy" <sankari.p@amshuhu.com>
> To: java-user@lucene.apache.org
> Subject: Resource is out of sync with the file system
> MIME-Version: 1.0
> Content-Type: multipart/alternative;
>       boundary="----=_Part_2204_26978616.1220347733729"
>
> ------=_Part_2204_26978616.1220347733729
> Content-Type: text/plain; charset=ISO-8859-1
> Content-Transfer-Encoding: 7bit
> Content-Disposition: inline
>
> Dear sir,
>  I am new to lucene..And i integerate lucene with my application.I search
> text with my table.Its working..But after sometimes while i try to build my
> application
> it shows following error..
>
>
> On Tue, Sep 2, 2008 at 2:56 PM, Leonid Maslov <leonidms@gmail.com> wrote:
>
> > Hi Sankari,
> >
> > I'm writing to java-user@lucene.apache.org e-mail address in order to
> > deliver email to lucene-user email-list.
> > Hope I have helped You a little. Do not hesitate to contact me if the
> > problem remains.
> >
> >
> >
> > On Tue, Sep 2, 2008 at 12:19 PM, Sankari Palanisamy <
> sankari.p@amshuhu.com
> > > wrote:
> >
> >> Dear sir,
> >>   I have subscribed with mailing list..Then i mtrying to post my
> question
> >> to java-user-help.But its always not delievering..
> >> How to post my question..
> >> Thanks in advance
> >> Sankari.p
> >>
> >
> >
> >
> > --
> > Bests regards,
> > Leonid Maslov!
> > George Carlin  - "In comic strips, the person on the right always speaks
> > first."
> >
>
>
>
>
> --
> Bests regards,
> Leonid Maslov!
> Adrienne Gusoff  - "Opportunity knocked. My doorman threw him out."
>

------=_Part_10350_7765997.1220369463700--

From java-user-return-35847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 02 16:46:45 2008
Return-Path: <java-user-return-35847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74905 invoked from network); 2 Sep 2008 16:46:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Sep 2008 16:46:45 -0000
Received: (qmail 76639 invoked by uid 500); 2 Sep 2008 16:46:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76610 invoked by uid 500); 2 Sep 2008 16:46:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76599 invoked by uid 99); 2 Sep 2008 16:46:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 09:46:36 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.177.177] (HELO web27401.mail.ukl.yahoo.com) (217.146.177.177)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 02 Sep 2008 16:45:35 +0000
Received: (qmail 75586 invoked by uid 60001); 2 Sep 2008 16:45:54 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.fr;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=FCe5sPXI1RD8m4ALBUvW5Vpm2A2TTp2T0WuCaXIt7fiLmFsOpa8LGDNOqreOonVrtFsn7ZDQ07n5YRfgmO94a6znmr5tEy61setO8DJlXXF0aXnrJea0vHR2uocMqutpuUux0Sj6qQ5IoxZ6rltwPRZ+SFlqmwI8zl5y87BbMdA=;
X-YMail-OSG: lZO_KvYVM1ke7.o9CK5YH9n90C2vIF98GsV74Ys26NuBBPEY99bjV6qD32b9kA5PLKvvXvGuo7TeZYyb8lmWRSs6PU0aRQUdipRRu8LZVw--
Received: from [212.234.8.113] by web27401.mail.ukl.yahoo.com via HTTP; Tue, 02 Sep 2008 16:45:54 GMT
X-Mailer: YahooMailRC/1042.48 YahooMailWebService/0.7.218.2
Date: Tue, 2 Sep 2008 16:45:54 +0000 (GMT)
From: Nabil BOUZERNA <nabilnfi@yahoo.fr>
Subject: Hits document offset information
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-514232430-1220373954=:75417"
Message-ID: <309926.75417.qm@web27401.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-514232430-1220373954=:75417
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

Hi All,=0A=0AI have following problem. =0A=0AAll threads similar to my prob=
lem are former so I try a new post.=0A =0AWhen I execute a search (Lucene C=
ore 2.3.2) I receive the list of document Hits. =0AThen, I call current hig=
hlighter (2.3.2) to get the best fragments  : getBestFragments(tokenStream,=
 texte,1,"...");=0A=0ANow, I would like to to access to the best fragments =
offsetsfrom each document (hits.doc(i)). =0A=0AAny recommendations to obtai=
n offsets ? =0A=0AThanks,=0A=0ANabil=0A=0A=0A      
--0-514232430-1220373954=:75417--

From java-user-return-35848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 02 17:05:32 2008
Return-Path: <java-user-return-35848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90327 invoked from network); 2 Sep 2008 17:05:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Sep 2008 17:05:31 -0000
Received: (qmail 2466 invoked by uid 500); 2 Sep 2008 17:05:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2431 invoked by uid 500); 2 Sep 2008 17:05:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2419 invoked by uid 99); 2 Sep 2008 17:05:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 10:05:23 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.177.178] (HELO web27402.mail.ukl.yahoo.com) (217.146.177.178)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 02 Sep 2008 17:04:22 +0000
Received: (qmail 70738 invoked by uid 60001); 2 Sep 2008 17:04:50 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.fr;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=M/vDP343sRwd3GzUAZ5Nca6xbBbv5L1y5Ez7uHRIR5BSWZngxLrZDWkeoxyAIEOwXJSx8Yym1isf+pQxFg/z/kzEW5FFK/gBcaY347+2YT4vNqF5eT/6SA0fs0c0jUcGyGInSClTSdT1EJ+zjDFLduzgjYJtVbZXAJm/Cikt4iU=;
X-YMail-OSG: XHq95xkVM1lWfyepZkZ5VVo9lXeOz_XnvD4W0YEz0AkT51bPjIjTaFMxM_Hz8GC9dLf5zd2XwCy626NzkoB8ngIwRHUW0XgyQPet4bOGlGU4Sb5X5j0LW5_LGSGjl_CH1jg-
Received: from [212.234.8.113] by web27402.mail.ukl.yahoo.com via HTTP; Tue, 02 Sep 2008 17:04:50 GMT
X-Mailer: YahooMailRC/1042.48 YahooMailWebService/0.7.218.2
Date: Tue, 2 Sep 2008 17:04:50 +0000 (GMT)
From: Nabil BOUZERNA <nabilnfi@yahoo.fr>
Subject: Hits document offset information
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-2093319879-1220375090=:70129"
Message-ID: <70204.70129.qm@web27402.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-2093319879-1220375090=:70129
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

Hi All,=0A=0AI have following problem. =0A=0AAll threads similar to my prob=
lem are former so I try a new post.=0A =0AWhen I execute a search (Lucene C=
ore 2.3.2) I receive the list of document Hits. =0AThen, I call current hig=
hlighter (2.3.2) to get the best fragments  : getBestFragments(tokenStream,=
 texte,1,"...");=0A=0ANow, I would like to to access to the best fragments =
offsetsfrom each document (hits.doc(i)). =0A=0AAny recommendations to obtai=
n offsets ? =0A=0AThanks,=0A=0ANabil=0A=0A=0A      
--0-2093319879-1220375090=:70129--

From java-user-return-35849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 02 17:06:45 2008
Return-Path: <java-user-return-35849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90967 invoked from network); 2 Sep 2008 17:06:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Sep 2008 17:06:45 -0000
Received: (qmail 4869 invoked by uid 500); 2 Sep 2008 17:06:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4839 invoked by uid 500); 2 Sep 2008 17:06:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4828 invoked by uid 99); 2 Sep 2008 17:06:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 10:06:37 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of andre.rubin@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 17:05:39 +0000
Received: by gxk6 with SMTP id 6so5450676gxk.5
        for <java-user@lucene.apache.org>; Tue, 02 Sep 2008 10:06:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=d8e6wefvVp1SAAJ6sofeUFXYL9Ipny6MYvighenzjb8=;
        b=UEOy6sclseX4va3u80Fo8MjTsQKhCdLgQJMJdXd96HDHKGF9hML5PB5JeAQunutarJ
         L7c1qFsmH7qKALwnKcu9Z8PUl+h/vu8z3vCWPt58/8RyYNUu95qS3uRolDgnmm1O+tzP
         r7OOn6cWUXWQczSBx8+M8QBq/RxXio4tgdLRI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=oRq1/kv3Wq1FexcdGVNZItXKsG9k+/OxphD6to3V9Od5Zm7TTzPKWCG/fq8JFHf7+S
         0B/DD4eGVPQxRlPcSwmPoaIj5PQtJTq1oWo7b98g0dYmKD+JEpet/P0wRjqaiXNoEzMx
         RcFt5lnI/zQHM+5HwRMNInMFD3B/X6RVVfJB0=
Received: by 10.151.45.2 with SMTP id x2mr10836545ybj.76.1220375169215;
        Tue, 02 Sep 2008 10:06:09 -0700 (PDT)
Received: by 10.151.47.9 with HTTP; Tue, 2 Sep 2008 10:06:09 -0700 (PDT)
Message-ID: <efd1bd310809021006y6b3c358asfe1ae3425e3b3baf@mail.gmail.com>
Date: Tue, 2 Sep 2008 10:06:09 -0700
From: "Andre Rubin" <andre.rubin@gmail.com>
To: java-user@lucene.apache.org
Subject: Performance, yet again
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6883_25316174.1220375169182"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6883_25316174.1220375169182
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

Most of our queries are very simple, of the type:

Query query = new PrefixQuery(new Term(LABEL_FIELD, prefix));
Hits hits = searcher.search(query, new Sort(new SortField(LABEL_FIELD)))

Which sometimes result in 10, 20, sometimes 40 thousand hits.

I get good performance if hits.length is 20.000 or less (less than 0.5
seconds). I However, if it is 40.000 or more, querying takes over a second,
up to 2.5 seconds. Point in check here is that this solution is not scaling.
Any ideas I can try?

I already exhausted the ideas from http://wiki.apache.org/lucene
-java/ImproveSearchingSpeed

I was reading about TopDocs and TopFieldDocs. Is this search method (using
TopDocs) preferred over Hits? Also, there's no constructor for them without
a Filter, can I just pass null?

Is it possible to pre-sort the index, so I don't have to every time I
perform a query?

Any other ideas?


Thanks,


Andre

------=_Part_6883_25316174.1220375169182--

From java-user-return-35850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 02 17:17:31 2008
Return-Path: <java-user-return-35850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95540 invoked from network); 2 Sep 2008 17:17:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Sep 2008 17:17:31 -0000
Received: (qmail 21378 invoked by uid 500); 2 Sep 2008 17:17:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21302 invoked by uid 500); 2 Sep 2008 17:17:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21285 invoked by uid 99); 2 Sep 2008 17:17:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 10:17:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.132.243 as permitted sender)
Received: from [209.85.132.243] (HELO an-out-0708.google.com) (209.85.132.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 17:16:22 +0000
Received: by an-out-0708.google.com with SMTP id c37so360768anc.49
        for <java-user@lucene.apache.org>; Tue, 02 Sep 2008 10:16:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=tCOu3T8j/+ECwnDEAOFeUWzN6dGKItVH9KJfgDbslmI=;
        b=B7YNeDmtrvFmy29dRpfGPbZuGC61DkX5pjiZrjzlH8p+ctUUe6io18+kyI9fSrt5U+
         YfuaBtZEK7qRH1/clUKTPBvZRNg+HJtOL3wbfhzJGu9il1NVlMFj0GnWvUprnZW/lSnZ
         6RguuFuRkgjiTTRv6RbAi82xtBXN9vXhn0OM4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=gBaawKWQEcRUfzhb5N6tPj9FONWwbP9DtNxoxOAObkBJff3xdZHeSF/GazPA/hoTyM
         MsXdJzDNAX+X/HmGeI+xH7Jiprx5875JpD35VFxVBm/DQNIq/QVAr2+gK/RjlEmX9ZzT
         5EgMVRzCdfLNCvJpKCYvassXTD+GEZ1wz+cBs=
Received: by 10.100.110.16 with SMTP id i16mr7719469anc.40.1220375813199;
        Tue, 02 Sep 2008 10:16:53 -0700 (PDT)
Received: from ?192.168.1.109? ( [68.198.57.217])
        by mx.google.com with ESMTPS id c13sm14376023anc.32.2008.09.02.10.16.52
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 02 Sep 2008 10:16:52 -0700 (PDT)
Message-ID: <48BD7503.4020402@gmail.com>
Date: Tue, 02 Sep 2008 13:16:51 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.16 (X11/20080724)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Performance, yet again
References: <efd1bd310809021006y6b3c358asfe1ae3425e3b3baf@mail.gmail.com>
In-Reply-To: <efd1bd310809021006y6b3c358asfe1ae3425e3b3baf@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Andre Rubin wrote:
> Hi all,
>
> Most of our queries are very simple, of the type:
>
> Query query = new PrefixQuery(new Term(LABEL_FIELD, prefix));
> Hits hits = searcher.search(query, new Sort(new SortField(LABEL_FIELD)))
>   
You might want to check out solrs ConstantScorePrefixQuery and compare 
performance.
> Which sometimes result in 10, 20, sometimes 40 thousand hits.
>
> I get good performance if hits.length is 20.000 or less (less than 0.5
> seconds). I However, if it is 40.000 or more, querying takes over a second,
> up to 2.5 seconds. Point in check here is that this solution is not scaling.
> Any ideas I can try?
>
> I already exhausted the ideas from http://wiki.apache.org/lucene
> -java/ImproveSearchingSpeed
>
> I was reading about TopDocs and TopFieldDocs. Is this search method (using
> TopDocs) preferred over Hits? Also, there's no constructor for them without
> a Filter, can I just pass null?
>   
It is preferred over Hits. Hits has been deprecated and you should 
really migrate away from it.
> Is it possible to pre-sort the index, so I don't have to every time I
> perform a query?
>
> Any other ideas?
>   
I think in general, sorting and prefix query can be slower operations in 
Lucene (though sorting is generally pretty fast after the field caches 
are loaded). You might try the first couple suggestions there though, 
and others may fill on other steps you can take as well.

- Mark


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 02 17:38:45 2008
Return-Path: <java-user-return-35851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7833 invoked from network); 2 Sep 2008 17:38:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Sep 2008 17:38:45 -0000
Received: (qmail 51470 invoked by uid 500); 2 Sep 2008 17:38:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51442 invoked by uid 500); 2 Sep 2008 17:38:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51431 invoked by uid 99); 2 Sep 2008 17:38:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 10:38:36 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of andre.rubin@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 17:37:39 +0000
Received: by gxk6 with SMTP id 6so5474266gxk.5
        for <java-user@lucene.apache.org>; Tue, 02 Sep 2008 10:37:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=mhcbtvfvc/A9MyU25XgBEEw/g+mXzSjDG8PDOAotWhg=;
        b=Y3NjVjoPODgL1FJ0W+c4UQ//oh7Onzs9RYpVVlV+G67pTZ1dma9FTUgz9sKWBeqTes
         KEOPcB564BUBUw6cRBcfFokZDCOmu327g3SMmnSQT6t+B14q7gWkr2SKTFpjGVIXkNUe
         a5qo3W/sN9S2NRkg2oBTFW2G9OZw79hIzP/rs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=r/kKAXZmldpS8lUrpPeXH0LHvsnEBoHFy0s1TrXWW42/XhIx2jFwmeXTgnmCZ7y+S8
         pm/tmrpvSTvDkgAP/szUj7ZSmPrknxQJlMAKLaRWor1fR+cad5mCc7yjF8It7FtegHyp
         j0V+Zjp+sMFn3vtI940Wdt60U/ZMK/olElRcA=
Received: by 10.151.41.21 with SMTP id t21mr10823538ybj.212.1220377029105;
        Tue, 02 Sep 2008 10:37:09 -0700 (PDT)
Received: by 10.151.47.9 with HTTP; Tue, 2 Sep 2008 10:37:09 -0700 (PDT)
Message-ID: <efd1bd310809021037w2cf5acb2nf16e186e0353183c@mail.gmail.com>
Date: Tue, 2 Sep 2008 10:37:09 -0700
From: "Andre Rubin" <andre.rubin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Performance, yet again
In-Reply-To: <48BD7503.4020402@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7152_20868519.1220377029110"
References: <efd1bd310809021006y6b3c358asfe1ae3425e3b3baf@mail.gmail.com>
	 <48BD7503.4020402@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7152_20868519.1220377029110
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On Tue, Sep 2, 2008 at 10:16 AM, Mark Miller <markrmiller@gmail.com> wrote:

> Andre Rubin wrote:
>
>> Hi all,
>>
>> Most of our queries are very simple, of the type:
>>
>> Query query = new PrefixQuery(new Term(LABEL_FIELD, prefix));
>> Hits hits = searcher.search(query, new Sort(new SortField(LABEL_FIELD)))
>>
>>
> You might want to check out solrs ConstantScorePrefixQuery and compare
> performance.


I'm not familiar with Solrs. It is not standard Lucene, is it?


>
>  Which sometimes result in 10, 20, sometimes 40 thousand hits.
>>
>> I get good performance if hits.length is 20.000 or less (less than 0.5
>> seconds). I However, if it is 40.000 or more, querying takes over a
>> second,
>> up to 2.5 seconds. Point in check here is that this solution is not
>> scaling.
>> Any ideas I can try?
>>
>> I already exhausted the ideas from http://wiki.apache.org/lucene
>> -java/ImproveSearchingSpeed
>>
>> I was reading about TopDocs and TopFieldDocs. Is this search method (using
>> TopDocs) preferred over Hits? Also, there's no constructor for them
>> without
>> a Filter, can I just pass null?
>>
>>
> It is preferred over Hits. Hits has been deprecated and you should really
> migrate away from it.


I was trying, before, to use it, but it doesn't seem as straightfoward as
Hits. Is there an example code, somewhere?


>  Is it possible to pre-sort the index, so I don't have to every time I
>> perform a query?
>>
>> Any other ideas?
>>
>>
> I think in general, sorting and prefix query can be slower operations in
> Lucene (though sorting is generally pretty fast after the field caches are
> loaded). You might try the first couple suggestions there though, and others
> may fill on other steps you can take as well.
>
> - Mark
>


Thanks, Mark.


Andre

------=_Part_7152_20868519.1220377029110--

From java-user-return-35852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 02 17:42:12 2008
Return-Path: <java-user-return-35852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9814 invoked from network); 2 Sep 2008 17:42:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Sep 2008 17:42:11 -0000
Received: (qmail 58073 invoked by uid 500); 2 Sep 2008 17:42:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57733 invoked by uid 500); 2 Sep 2008 17:42:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57722 invoked by uid 99); 2 Sep 2008 17:42:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 10:42:03 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 17:41:04 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 0677671C5C5; Tue,  2 Sep 2008 10:41:05 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id DE8F471C5B5
	for <java-user@lucene.apache.org>; Tue,  2 Sep 2008 10:41:04 -0700 (PDT)
Date: Tue, 2 Sep 2008 10:41:04 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Injecting additional tokens
In-Reply-To: <4014d98b0809011356p338274b9td45fc163b06fd522@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0809021036170.5494@radix.cryptio.net>
References: <8064f4bd0809011329j271c0818x5af80c8a5d5fce60@mail.gmail.com>
 <4014d98b0809011356p338274b9td45fc163b06fd522@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Is my subscription working... I got no reply on my previous question.
: Sorry the disturbance.

1) if you see your message show up in one of the archives, that' a pretty 
good indication that your post made it to the list...
http://www.nabble.com/forum/Search.jtp?query=Raymond+Balm%C3%A8s&local=y&forum=44

2) People answer questions on the Lucene lists voluntarily ... they do it 
because they want to help and they enjoy it.  but since it's not a paid 
support service, that means there is no garuntee of how long it will take 
someone to reply to any given post.  it's not that unusually for messages 
to go unanswered for  few days -- particularly when it's a 3 day holiday 
in the US.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 02 17:44:53 2008
Return-Path: <java-user-return-35853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11010 invoked from network); 2 Sep 2008 17:44:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Sep 2008 17:44:52 -0000
Received: (qmail 61901 invoked by uid 500); 2 Sep 2008 17:44:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61860 invoked by uid 500); 2 Sep 2008 17:44:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61846 invoked by uid 99); 2 Sep 2008 17:44:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 10:44:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 17:43:46 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 27E6271C855; Tue,  2 Sep 2008 10:43:47 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 247F271C830
	for <java-user@lucene.apache.org>; Tue,  2 Sep 2008 10:43:47 -0700 (PDT)
Date: Tue, 2 Sep 2008 10:43:47 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Beginner: Specific indexing
In-Reply-To: <4014d98b0808301202k46a05677l3bb5fd6e8c9b124@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0809021041280.5494@radix.cryptio.net>
References: <4014d98b0808301202k46a05677l3bb5fd6e8c9b124@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

I may be missunderstanding your question, but i wouldn't attempt to tackle 
this with a TokenFilter unless you want both the "tag" and the numbers to 
appear in the same field.  i think what you want to do is first parse 
whatever file format you are dealing with, then build Documents based on 
the individual Fields.

a TokenFilter comes into play when you are Analyzing individual Field 
values.

but since i have very little understanding of your problem, and what you 
are trying to achieve, i may be way off base.

: <tag> <#1> <#2>
: 
: <tag> is a fixed list of words
: <#x> are small numbers <100
: 
: My idea is to simply build a TokenFilter that will look for those... do I
: have it right ?
: 
: Some side questions:
: what if I want to index <tag> <#1> <#2> as keywords ?
: what if I also want to give full text search on the select documents ?


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 02 17:45:23 2008
Return-Path: <java-user-return-35854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11460 invoked from network); 2 Sep 2008 17:45:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Sep 2008 17:45:23 -0000
Received: (qmail 64952 invoked by uid 500); 2 Sep 2008 17:45:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64927 invoked by uid 500); 2 Sep 2008 17:45:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64916 invoked by uid 99); 2 Sep 2008 17:45:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 10:45:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.132.242 as permitted sender)
Received: from [209.85.132.242] (HELO an-out-0708.google.com) (209.85.132.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 17:44:16 +0000
Received: by an-out-0708.google.com with SMTP id c37so362908anc.49
        for <java-user@lucene.apache.org>; Tue, 02 Sep 2008 10:44:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=p2V92/jSwqsfWK4mT4wCVYp+/916k83SL4UwIbzvuFY=;
        b=LvCm6elLcn75SQhNcEN/77dA0pzFjQl7yF0pngLBqT8EQXUqO5atrO6peSjA+beyR6
         ThzuOVMuCpu1xpeP3L8dx89/RqCrhSkd0H4UFiBvc8j7r4sdr+TkRp3nsNRpOz7T8DHz
         0AoYibmesWhp01RsgOVBu3V+hdlGLVwNYVwm4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=NdS4ZDyGom6UifZ/dxbxN94GAh9IVossZ6BCzwx11zIEIYC1uIvKrrraCvPzohzP/e
         wwFQt4x5SCZ/99BfZJJF5I7zmW1zQ3ppC5jOTeHJgRd0Ub6wz/9naBDFkGxozUeR97bd
         VyJBZDFkSksREXY1CLPEse3rfc9GhMWjQ6wBw=
Received: by 10.100.228.13 with SMTP id a13mr7752476anh.70.1220377486551;
        Tue, 02 Sep 2008 10:44:46 -0700 (PDT)
Received: from ?192.168.1.109? ( [68.198.57.217])
        by mx.google.com with ESMTPS id b12sm13703774ana.14.2008.09.02.10.44.45
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 02 Sep 2008 10:44:45 -0700 (PDT)
Message-ID: <48BD7B8C.4020106@gmail.com>
Date: Tue, 02 Sep 2008 13:44:44 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.16 (X11/20080724)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Performance, yet again
References: <efd1bd310809021006y6b3c358asfe1ae3425e3b3baf@mail.gmail.com>	 <48BD7503.4020402@gmail.com> <efd1bd310809021037w2cf5acb2nf16e186e0353183c@mail.gmail.com>
In-Reply-To: <efd1bd310809021037w2cf5acb2nf16e186e0353183c@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Andre Rubin wrote:
> On Tue, Sep 2, 2008 at 10:16 AM, Mark Miller <markrmiller@gmail.com> wrote:
>
>   
>> Andre Rubin wrote:
>>
>>     
>>> Hi all,
>>>
>>> Most of our queries are very simple, of the type:
>>>
>>> Query query = new PrefixQuery(new Term(LABEL_FIELD, prefix));
>>> Hits hits = searcher.search(query, new Sort(new SortField(LABEL_FIELD)))
>>>
>>>
>>>       
>> You might want to check out solrs ConstantScorePrefixQuery and compare
>> performance.
>>     
>
>
> I'm not familiar with Solrs. It is not standard Lucene, is it?
>   
Sorry about that. Solr is a search server that is a sub project of the 
Lucene Apache project. You can just copy the Query from solrs source 
code and use it with Lucene.  ConstantScorePrefixQuery may be faster for 
you than PrefixQuery and it doesn't have MaxClause exceptions issues 
when your prefix matches too many terms in the index. Please report back 
the speed difference if you can.

http://lucene.apache.org/solr/
>
>   
>>  Which sometimes result in 10, 20, sometimes 40 thousand hits.
>>     
>>> I get good performance if hits.length is 20.000 or less (less than 0.5
>>> seconds). I However, if it is 40.000 or more, querying takes over a
>>> second,
>>> up to 2.5 seconds. Point in check here is that this solution is not
>>> scaling.
>>> Any ideas I can try?
>>>
>>> I already exhausted the ideas from http://wiki.apache.org/lucene
>>> -java/ImproveSearchingSpeed
>>>
>>> I was reading about TopDocs and TopFieldDocs. Is this search method (using
>>> TopDocs) preferred over Hits? Also, there's no constructor for them
>>> without
>>> a Filter, can I just pass null?
>>>
>>>
>>>       
>> It is preferred over Hits. Hits has been deprecated and you should really
>> migrate away from it.
>>     
>
>
> I was trying, before, to use it, but it doesn't seem as straightfoward as
> Hits. Is there an example code, somewhere?
>   
I think work was done on this when Hits was deprecated. Anyone know?
>
>   
>>  Is it possible to pre-sort the index, so I don't have to every time I
>>     
>>> perform a query?
>>>
>>> Any other ideas?
>>>
>>>
>>>       
>> I think in general, sorting and prefix query can be slower operations in
>> Lucene (though sorting is generally pretty fast after the field caches are
>> loaded). You might try the first couple suggestions there though, and others
>> may fill on other steps you can take as well.
>>
>> - Mark
>>
>>     
>
>
> Thanks, Mark.
>
>
> Andre
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 02 17:50:46 2008
Return-Path: <java-user-return-35855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14828 invoked from network); 2 Sep 2008 17:50:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Sep 2008 17:50:46 -0000
Received: (qmail 72096 invoked by uid 500); 2 Sep 2008 17:50:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72068 invoked by uid 500); 2 Sep 2008 17:50:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72056 invoked by uid 99); 2 Sep 2008 17:50:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 10:50:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 17:49:39 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 7297971C657; Tue,  2 Sep 2008 10:50:10 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 6D03771C639
	for <java-user@lucene.apache.org>; Tue,  2 Sep 2008 10:50:10 -0700 (PDT)
Date: Tue, 2 Sep 2008 10:50:10 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: Question: Lucene MoreLikeThis score values all the same:
In-Reply-To: <8d2a9c130808251321y23880d47v19a1504dffaea9a2@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0809021045100.5494@radix.cryptio.net>
References: <8d2a9c130808251321y23880d47v19a1504dffaea9a2@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: 1. Looking at the hits, they have the same score. I'd expect them to be
: different, based on their relevance to the source document. Any ideas?
	...
: This is my output. I can paste my source code in too if needed.

The output of arbitrary "secret" code isn't really a very useful for the 
purposes of debugging ... since we have no idea what your code does, we 
can't really begin to guess why it produces the output that it does.

Off the cuff, based on your choice of wording and the fact, i suspect 
you are using the "Hits" class which attempts to normalize scores -- which 
could explain a big part of your confusion.

In general: when you want to understand why a Document scores they way it 
does against a query: use explain().



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 02 18:05:33 2008
Return-Path: <java-user-return-35856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23008 invoked from network); 2 Sep 2008 18:05:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Sep 2008 18:05:33 -0000
Received: (qmail 90526 invoked by uid 500); 2 Sep 2008 18:05:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90499 invoked by uid 500); 2 Sep 2008 18:05:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90488 invoked by uid 99); 2 Sep 2008 18:05:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 11:05:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 18:04:27 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id B470371C53C; Tue,  2 Sep 2008 11:04:57 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id B167471C4A5
	for <java-user@lucene.apache.org>; Tue,  2 Sep 2008 11:04:57 -0700 (PDT)
Date: Tue, 2 Sep 2008 11:04:57 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Performance, yet again
In-Reply-To: <efd1bd310809021037w2cf5acb2nf16e186e0353183c@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0809021101000.5494@radix.cryptio.net>
References: <efd1bd310809021006y6b3c358asfe1ae3425e3b3baf@mail.gmail.com> 
 <48BD7503.4020402@gmail.com> <efd1bd310809021037w2cf5acb2nf16e186e0353183c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I was trying, before, to use it, but it doesn't seem as straightfoward as
: Hits. Is there an example code, somewhere?

"SearchFiles.java" in the Lucene demo was updated to use TopDocCollector 
when Hits was deprecated.

: >  Is it possible to pre-sort the index, so I don't have to every time I
: >> perform a query?

Sorting by document order is very fast, so if you only care about one sort 
order and you cna add your docs in that order, that's one thing that can 
help ... otherwise just reuse the same IndexReader as much as possible so 
your don't waste the FieldCache.

(if you have the luxury of adding docs in a set order that you search byu, 
odds are you aren't upating your index on the fly, so you should be ableto 
reuse an IndexReader and it's FieldCaches for a while)




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 02 18:14:06 2008
Return-Path: <java-user-return-35857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25398 invoked from network); 2 Sep 2008 18:14:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Sep 2008 18:14:06 -0000
Received: (qmail 4539 invoked by uid 500); 2 Sep 2008 18:13:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3554 invoked by uid 500); 2 Sep 2008 18:13:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3543 invoked by uid 99); 2 Sep 2008 18:13:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 11:13:57 -0700
X-ASF-Spam-Status: No, hits=4.2 required=10.0
	tests=DEAR_SOMETHING,HTML_MESSAGE,NORMAL_HTTP_TO_IP,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of leonidms@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 18:12:59 +0000
Received: by yx-out-2324.google.com with SMTP id 3so1104992yxj.5
        for <java-user@lucene.apache.org>; Tue, 02 Sep 2008 11:13:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=uScEVpOw5jj5ZkgN56gQ35hIYB2dSHwS/7oeESILFDY=;
        b=jTIfZkHJ0JncfMtfLuoaPMYPHocpiKEON0Tn6H0PNCO0gltvy4xGonsw35xzn5JJ+L
         +mMQObT29cMJTsa4ZOMTsuTXTHZ19W8GTnhqsCK9uSp+GD9sTMn9HCeGkNuyw6xvOfni
         xLtzP4EhPp2t4o/tlcwaxSw3XQC/Mw2dceaFI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=P1E5ADoMfgF7JDOENIwkiuCptyEMk0Ku5COOOwa3Gwj5nZ74h2DaFkpNnEhAi/qbDv
         mYkEeeNzXsF/VN+mtZB5DRmTjBi0YYK/447O+coB/iFr13/OM2zwpDaz5ic7V4a/SPPt
         5LSs4CWYeuBEt+1F8p9cUP6EQB0e2/p8YqUpI=
Received: by 10.142.170.6 with SMTP id s6mr2657607wfe.102.1220379208950;
        Tue, 02 Sep 2008 11:13:28 -0700 (PDT)
Received: by 10.143.41.4 with HTTP; Tue, 2 Sep 2008 11:13:28 -0700 (PDT)
Message-ID: <dcd377ca0809021113p451a6f00g23c6a72cdb8cb95a@mail.gmail.com>
Date: Tue, 2 Sep 2008 21:13:28 +0300
From: "Leonid Maslov" <leonidms@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Test. Please ignore that. Fwd: How to send mail to java user
In-Reply-To: <4014d98b0809020831r5a9acb3bw9c9b6799596b9efc@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14130_25529958.1220379208933"
References: <dcd377ca0809020236l24f79c70y91bbf10a6d40bf5e@mail.gmail.com>
	 <4014d98b0809020831r5a9acb3bw9c9b6799596b9efc@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14130_25529958.1220379208933
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

KzEuIEkndmUgZ290CgpPbiBUdWUsIFNlcCAyLCAyMDA4IGF0IDY6MzEgUE0sIFJheW1vbmQgQmFs
bcOocyA8cmF5bW9uZC5iYWxtZXNAZ21haWwuY29tPndyb3RlOgoKPiBJJ20gZ2V0dGluZyBwbGVu
dHkgb2YgbWVzc2FnZSBidXQgZG8geW91IHJlY2VpdmUgbWluZS4uLiBwbGVhc2Ugc29tZW9uZQo+
IGdpdmUKPiBtZSByZXBseQo+Cj4gT24gVHVlLCBTZXAgMiwgMjAwOCBhdCAxMTozNiBBTSwgTGVv
bmlkIE1hc2xvdiA8bGVvbmlkbXNAZ21haWwuY29tPiB3cm90ZToKPgo+ID4gLS0tLS0tLS0tLSBG
b3J3YXJkZWQgbWVzc2FnZSAtLS0tLS0tLS0tCj4gPiBGcm9tOiBTYW5rYXJpIFBhbGFuaXNhbXkg
PHNhbmthcmkucEBhbXNodWh1LmNvbT4KPiA+IERhdGU6IFR1ZSwgU2VwIDIsIDIwMDggYXQgMTI6
MzIgUE0KPiA+IFN1YmplY3Q6IFJlOiBIb3cgdG8gc2VuZCBtYWlsIHRvIGphdmEgdXNlcgo+ID4g
VG86IExlb25pZCBNYXNsb3YgPGxlb25pZG1zQGdtYWlsLmNvbT4KPiA+Cj4gPgo+ID4gSGksCj4g
PiAgVGhhbmtzIGZvciB1J3IgcmVzcG9uc2UuLgo+ID4gIFN0aWxsIGkgYW0gZ2V0dGluZyBmb2xs
b3dpbmcgbWVzc2FnZQo+ID4gRnVydGhlciB3aGF0IHRvIGRvLgo+ID4KPiA+IFRoYW5rcyZSZWdh
cmRzCj4gPiAgU2Fua2FyaS5QCj4gPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gPiBUaGlzIGlzIGFuIGF1dG9tYXRpY2Fs
bHkgZ2VuZXJhdGVkIERlbGl2ZXJ5IFN0YXR1cyBOb3RpZmljYXRpb24KPiA+Cj4gPiBEZWxpdmVy
eSB0byB0aGUgZm9sbG93aW5nIHJlY2lwaWVudCBmYWlsZWQgcGVybWFuZW50bHk6Cj4gPgo+ID4g
ICAgamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnCj4gPgo+ID4gVGVjaG5pY2FsIGRldGFpbHMg
b2YgcGVybWFuZW50IGZhaWx1cmU6Cj4gPiBHb29nbGUgdHJpZWQgdG8gZGVsaXZlciB5b3VyIG1l
c3NhZ2UsIGJ1dCBpdCB3YXMgcmVqZWN0ZWQgYnkgdGhlCj4gcmVjaXBpZW50Cj4gPiBkb21haW4u
IFdlIHJlY29tbWVuZCBjb250YWN0aW5nIHRoZSBvdGhlciBlbWFpbCBwcm92aWRlciBmb3IgZnVy
dGhlcgo+ID4gaW5mb3JtYXRpb24gYWJvdXQgdGhlIGNhdXNlIG9mIHRoaXMgZXJyb3IuIFRoZSBl
cnJvciB0aGF0IHRoZSBvdGhlcgo+IHNlcnZlcgo+ID4gcmV0dXJuZWQgd2FzOiA1NTIgNTUyIHNw
YW0gc2NvcmUgKDUuNCkgZXhjZWVkZWQgdGhyZXNob2xkIChzdGF0ZSAxOCkuCj4gPgo+ID4gIC0t
LS0tIE9yaWdpbmFsIG1lc3NhZ2UgLS0tLS0KPiA+Cj4gPiBSZWNlaXZlZDogYnkgMTAuMTQwLjE0
NC42IHdpdGggU01UUCBpZCByNm1yMzk4Nzc5MnJ2ZC4yOTMuMTIyMDM0NzczNDcxMzsKPiA+ICAg
ICAgIFR1ZSwgMDIgU2VwIDIwMDggMDI6Mjg6NTQgLTA3MDAgKFBEVCkKPiA+IFJlY2VpdmVkOiBi
eSAxMC4xNDEuMTYzLjMgd2l0aCBIVFRQOyBUdWUsIDIgU2VwIDIwMDggMDI6Mjg6NTMgLTA3MDAK
PiAoUERUKQo+ID4gTWVzc2FnZS1JRDogPGQwN2MyZDIzMDgwOTAyMDIyOHc3ZDc0ZTc4NnVjNjE3
YzA0M2U5OTFkNjcwQG1haWwuZ21haWwuY29tCj4gPgo+ID4gRGF0ZTogVHVlLCAyIFNlcCAyMDA4
IDE0OjU4OjUzICswNTMwCj4gPiBGcm9tOiAiU2Fua2FyaSBQYWxhbmlzYW15IiA8c2Fua2FyaS5w
QGFtc2h1aHUuY29tPgo+ID4gVG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZwo+ID4gU3Vi
amVjdDogUmVzb3VyY2UgaXMgb3V0IG9mIHN5bmMgd2l0aCB0aGUgZmlsZSBzeXN0ZW0KPiA+IE1J
TUUtVmVyc2lvbjogMS4wCj4gPiBDb250ZW50LVR5cGU6IG11bHRpcGFydC9hbHRlcm5hdGl2ZTsK
PiA+ICAgICAgIGJvdW5kYXJ5PSItLS0tPV9QYXJ0XzIyMDRfMjY5Nzg2MTYuMTIyMDM0NzczMzcy
OSIKPiA+Cj4gPiAtLS0tLS09X1BhcnRfMjIwNF8yNjk3ODYxNi4xMjIwMzQ3NzMzNzI5Cj4gPiBD
b250ZW50LVR5cGU6IHRleHQvcGxhaW47IGNoYXJzZXQ9SVNPLTg4NTktMQo+ID4gQ29udGVudC1U
cmFuc2Zlci1FbmNvZGluZzogN2JpdAo+ID4gQ29udGVudC1EaXNwb3NpdGlvbjogaW5saW5lCj4g
Pgo+ID4gRGVhciBzaXIsCj4gPiAgSSBhbSBuZXcgdG8gbHVjZW5lLi5BbmQgaSBpbnRlZ2VyYXRl
IGx1Y2VuZSB3aXRoIG15IGFwcGxpY2F0aW9uLkkgc2VhcmNoCj4gPiB0ZXh0IHdpdGggbXkgdGFi
bGUuSXRzIHdvcmtpbmcuLkJ1dCBhZnRlciBzb21ldGltZXMgd2hpbGUgaSB0cnkgdG8gYnVpbGQK
PiBteQo+ID4gYXBwbGljYXRpb24KPiA+IGl0IHNob3dzIGZvbGxvd2luZyBlcnJvci4uCj4gPgo+
ID4KPiA+IE9uIFR1ZSwgU2VwIDIsIDIwMDggYXQgMjo1NiBQTSwgTGVvbmlkIE1hc2xvdiA8bGVv
bmlkbXNAZ21haWwuY29tPgo+IHdyb3RlOgo+ID4KPiA+ID4gSGkgU2Fua2FyaSwKPiA+ID4KPiA+
ID4gSSdtIHdyaXRpbmcgdG8gamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnIGUtbWFpbCBhZGRy
ZXNzIGluIG9yZGVyIHRvCj4gPiA+IGRlbGl2ZXIgZW1haWwgdG8gbHVjZW5lLXVzZXIgZW1haWwt
bGlzdC4KPiA+ID4gSG9wZSBJIGhhdmUgaGVscGVkIFlvdSBhIGxpdHRsZS4gRG8gbm90IGhlc2l0
YXRlIHRvIGNvbnRhY3QgbWUgaWYgdGhlCj4gPiA+IHByb2JsZW0gcmVtYWlucy4KPiA+ID4KPiA+
ID4KPiA+ID4KPiA+ID4gT24gVHVlLCBTZXAgMiwgMjAwOCBhdCAxMjoxOSBQTSwgU2Fua2FyaSBQ
YWxhbmlzYW15IDwKPiA+IHNhbmthcmkucEBhbXNodWh1LmNvbQo+ID4gPiA+IHdyb3RlOgo+ID4g
Pgo+ID4gPj4gRGVhciBzaXIsCj4gPiA+PiAgIEkgaGF2ZSBzdWJzY3JpYmVkIHdpdGggbWFpbGlu
ZyBsaXN0Li5UaGVuIGkgbXRyeWluZyB0byBwb3N0IG15Cj4gPiBxdWVzdGlvbgo+ID4gPj4gdG8g
amF2YS11c2VyLWhlbHAuQnV0IGl0cyBhbHdheXMgbm90IGRlbGlldmVyaW5nLi4KPiA+ID4+IEhv
dyB0byBwb3N0IG15IHF1ZXN0aW9uLi4KPiA+ID4+IFRoYW5rcyBpbiBhZHZhbmNlCj4gPiA+PiBT
YW5rYXJpLnAKPiA+ID4+Cj4gPiA+Cj4gPiA+Cj4gPiA+Cj4gPiA+IC0tCj4gPiA+IEJlc3RzIHJl
Z2FyZHMsCj4gPiA+IExlb25pZCBNYXNsb3YhCj4gPiA+IEdlb3JnZSBDYXJsaW4gIC0gIkluIGNv
bWljIHN0cmlwcywgdGhlIHBlcnNvbiBvbiB0aGUgcmlnaHQgYWx3YXlzCj4gc3BlYWtzCj4gPiA+
IGZpcnN0LiIKPiA+ID4KPiA+Cj4gPgo+ID4KPiA+Cj4gPiAtLQo+ID4gQmVzdHMgcmVnYXJkcywK
PiA+IExlb25pZCBNYXNsb3YhCj4gPiBBZHJpZW5uZSBHdXNvZmYgIC0gIk9wcG9ydHVuaXR5IGtu
b2NrZWQuIE15IGRvb3JtYW4gdGhyZXcgaGltIG91dC4iCj4gPgo+CgoKCi0tIApCZXN0cyByZWdh
cmRzLApMZW9uaWQgTWFzbG92IQpBZHJpZW5uZSBHdXNvZmYgIC0gIk9wcG9ydHVuaXR5IGtub2Nr
ZWQuIE15IGRvb3JtYW4gdGhyZXcgaGltIG91dC4iCg==
------=_Part_14130_25529958.1220379208933--

From java-user-return-35858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 02 18:20:29 2008
Return-Path: <java-user-return-35858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35210 invoked from network); 2 Sep 2008 18:20:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Sep 2008 18:20:29 -0000
Received: (qmail 23146 invoked by uid 500); 2 Sep 2008 18:20:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23117 invoked by uid 500); 2 Sep 2008 18:20:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23106 invoked by uid 99); 2 Sep 2008 18:20:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 11:20:21 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of andre.rubin@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 18:19:23 +0000
Received: by gxk6 with SMTP id 6so5510114gxk.5
        for <java-user@lucene.apache.org>; Tue, 02 Sep 2008 11:18:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=9uzFUChPdt0Oph3PQ34Wphz8+Qcb2eB3Ouic0PkRg0E=;
        b=ijU+CHl3Ky886HXk8D3BmhPyBKKQUK4wmgGLWRdKDxYf+Zu75XijxJrCBDdiQv5CRk
         3d/92BIDiVW3h/orCq4S5WMbTyNAXsOobiKsv8iN9ZSas3nxBYeFhcauPtKz5G4bFG3c
         EYx42KqJaJdYdozQ2henLSxCgMZXpf9/eT5MM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=vT8Fo7Zjbq9kmsjtBMfu+Rpvfwq1uvZGSS+9sl9WHv3b6CmV7D/3UTUyQfHpHiEXAv
         NxtFWjn82h1F8Zw5F0jpOfTNpCV7OQ4KDHfk1a8mR8gx9rIt1jueyN0hISYuoEeryNwb
         Hz7Wly32RSByr87lOI63D4JWZamaSxrviYbBU=
Received: by 10.150.98.18 with SMTP id v18mr10906101ybb.94.1220379533275;
        Tue, 02 Sep 2008 11:18:53 -0700 (PDT)
Received: by 10.151.47.9 with HTTP; Tue, 2 Sep 2008 11:18:53 -0700 (PDT)
Message-ID: <efd1bd310809021118v44216037x2b2b8635fa572a9b@mail.gmail.com>
Date: Tue, 2 Sep 2008 11:18:53 -0700
From: "Andre Rubin" <andre.rubin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Performance, yet again
In-Reply-To: <48BD7B8C.4020106@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7562_30133206.1220379533280"
References: <efd1bd310809021006y6b3c358asfe1ae3425e3b3baf@mail.gmail.com>
	 <48BD7503.4020402@gmail.com>
	 <efd1bd310809021037w2cf5acb2nf16e186e0353183c@mail.gmail.com>
	 <48BD7B8C.4020106@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7562_30133206.1220379533280
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I've tested ConstantScorePrefixQuery and it hit right in the head. It's now
mind-boggling fast! Even a query that has 200.000 matches was under 0.5
seconds!

Thanks! :))


Andre


On Tue, Sep 2, 2008 at 10:44 AM, Mark Miller <markrmiller@gmail.com> wrote:

> Andre Rubin wrote:
>
>> On Tue, Sep 2, 2008 at 10:16 AM, Mark Miller <markrmiller@gmail.com>
>> wrote:
>>
>>
>>
>>> Andre Rubin wrote:
>>>
>>>
>>>
>>>> Hi all,
>>>>
>>>> Most of our queries are very simple, of the type:
>>>>
>>>> Query query = new PrefixQuery(new Term(LABEL_FIELD, prefix));
>>>> Hits hits = searcher.search(query, new Sort(new SortField(LABEL_FIELD)))
>>>>
>>>>
>>>>
>>>>
>>> You might want to check out solrs ConstantScorePrefixQuery and compare
>>> performance.
>>>
>>>
>>
>>
>> I'm not familiar with Solrs. It is not standard Lucene, is it?
>>
>>
> Sorry about that. Solr is a search server that is a sub project of the
> Lucene Apache project. You can just copy the Query from solrs source code
> and use it with Lucene.  ConstantScorePrefixQuery may be faster for you than
> PrefixQuery and it doesn't have MaxClause exceptions issues when your prefix
> matches too many terms in the index. Please report back the speed difference
> if you can.
>
> http://lucene.apache.org/solr/
>
>>
>>
>>
>>>  Which sometimes result in 10, 20, sometimes 40 thousand hits.
>>>
>>>
>>>> I get good performance if hits.length is 20.000 or less (less than 0.5
>>>> seconds). I However, if it is 40.000 or more, querying takes over a
>>>> second,
>>>> up to 2.5 seconds. Point in check here is that this solution is not
>>>> scaling.
>>>> Any ideas I can try?
>>>>
>>>> I already exhausted the ideas from http://wiki.apache.org/lucene
>>>> -java/ImproveSearchingSpeed
>>>>
>>>> I was reading about TopDocs and TopFieldDocs. Is this search method
>>>> (using
>>>> TopDocs) preferred over Hits? Also, there's no constructor for them
>>>> without
>>>> a Filter, can I just pass null?
>>>>
>>>>
>>>>
>>>>
>>> It is preferred over Hits. Hits has been deprecated and you should really
>>> migrate away from it.
>>>
>>>
>>
>>
>> I was trying, before, to use it, but it doesn't seem as straightfoward as
>> Hits. Is there an example code, somewhere?
>>
>>
> I think work was done on this when Hits was deprecated. Anyone know?
>
>>
>>
>>
>>>  Is it possible to pre-sort the index, so I don't have to every time I
>>>
>>>
>>>> perform a query?
>>>>
>>>> Any other ideas?
>>>>
>>>>
>>>>
>>>>
>>> I think in general, sorting and prefix query can be slower operations in
>>> Lucene (though sorting is generally pretty fast after the field caches
>>> are
>>> loaded). You might try the first couple suggestions there though, and
>>> others
>>> may fill on other steps you can take as well.
>>>
>>> - Mark
>>>
>>>
>>>
>>
>>
>> Thanks, Mark.
>>
>>
>> Andre
>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_7562_30133206.1220379533280--

From java-user-return-35859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 02 19:50:57 2008
Return-Path: <java-user-return-35859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93929 invoked from network); 2 Sep 2008 19:50:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Sep 2008 19:50:56 -0000
Received: (qmail 21491 invoked by uid 500); 2 Sep 2008 19:50:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21239 invoked by uid 500); 2 Sep 2008 19:50:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21228 invoked by uid 99); 2 Sep 2008 19:50:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 12:50:47 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of raymond.balmes@gmail.com designates 209.85.134.186 as permitted sender)
Received: from [209.85.134.186] (HELO mu-out-0910.google.com) (209.85.134.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 19:49:49 +0000
Received: by mu-out-0910.google.com with SMTP id i10so2383641mue.5
        for <java-user@lucene.apache.org>; Tue, 02 Sep 2008 12:50:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=tN1lb0zQdV93vtha5O2X06A6Uh6akCv1a+3CipTXmwk=;
        b=dw9EdqFA+JyklgmSvcVJ77AF2bkKyGLk6vp1LD3acejz5SzBz1vB0tXyDlvPlcvQ03
         w9eZqgaaZJJMjpOr2hhasyc2HzIcX7Y3Qk98Xt2P42/SsghAGaYDwCJstGz8TOLOPTmW
         82lQkhzMFomARd4GuOpyOnjgfNaqiQpD0Juhg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=hkn9uhetXXHfmmaPQWA3j/CWjLTzGKV8K3JoRMGA0RSVbf2K0AbHHQg7wq1Oxv3hws
         vdc+yw8WELGMvKsA+7ploxxomLi1OIN0+lLr9nptlByx0BjDlYGaE5xZvjeS2ciqBvMl
         6MFqDON8ZId7zp+vcfro8z4SuuKHwttBjuId4=
Received: by 10.103.199.16 with SMTP id b16mr5675009muq.5.1220385001796;
        Tue, 02 Sep 2008 12:50:01 -0700 (PDT)
Received: by 10.103.214.9 with HTTP; Tue, 2 Sep 2008 12:50:01 -0700 (PDT)
Message-ID: <4014d98b0809021250j7a774a82xf2974a026d36a8e7@mail.gmail.com>
Date: Tue, 2 Sep 2008 21:50:01 +0200
From: "=?ISO-8859-1?Q?Raymond_Balm=E8s?=" <raymond.balmes@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Beginner: Specific indexing
In-Reply-To: <Pine.LNX.4.62.0809021041280.5494@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15197_13849568.1220385001778"
References: <4014d98b0808301202k46a05677l3bb5fd6e8c9b124@mail.gmail.com>
	 <Pine.LNX.4.62.0809021041280.5494@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15197_13849568.1220385001778
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

OK, not clear enough.

I have documents in which I'm looking for 3 consecutive elements :
<string1> <#1> <#2> (string1 is a predefined list)

I want to disregard those without this sequence and reverse index those with
these markers... it looks to me that parsing won't do the job since my
documents are unstructured and do not have a specific grammar. The triplets
are to be found in the body of the document (if any)

At this moment I have the impression that I need to have a double pass on
the document stream :
1. pass 1 extract the triplets (with TokenFilter ???)  - if there are no
triplets disregard the document
2. pass 2 index the document stream with keywords for the found triplets and
text (standardanalyzer) for the actual body.

additionnal issue, I'm finding that the numbers might be in Roman
notation... any idea how tocheck if a token could be roman number or just
another random stream

-Ray-


On Tue, Sep 2, 2008 at 7:43 PM, Chris Hostetter <hossman_lucene@fucit.org>wrote:

> I may be missunderstanding your question, but i wouldn't attempt to tackle
> this with a TokenFilter unless you want both the "tag" and the numbers to
> appear in the same field.  i think what you want to do is first parse
> whatever file format you are dealing with, then build Documents based on
> the individual Fields.
>
> a TokenFilter comes into play when you are Analyzing individual Field
> values.
>
> but since i have very little understanding of your problem, and what you
> are trying to achieve, i may be way off base.
>
> : <tag> <#1> <#2>
> :
> : <tag> is a fixed list of words
> : <#x> are small numbers <100
> :
> : My idea is to simply build a TokenFilter that will look for those... do I
> : have it right ?
> :
> : Some side questions:
> : what if I want to index <tag> <#1> <#2> as keywords ?
> : what if I also want to give full text search on the select documents ?
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_15197_13849568.1220385001778--

From java-user-return-35860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 02 19:54:17 2008
Return-Path: <java-user-return-35860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96711 invoked from network); 2 Sep 2008 19:54:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Sep 2008 19:54:17 -0000
Received: (qmail 29025 invoked by uid 500); 2 Sep 2008 19:54:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28911 invoked by uid 500); 2 Sep 2008 19:54:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28900 invoked by uid 99); 2 Sep 2008 19:54:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 12:54:08 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 19:53:09 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KabwZ-0005kf-Fv
	for java-user@lucene.apache.org; Tue, 02 Sep 2008 12:53:39 -0700
Message-ID: <19276999.post@talk.nabble.com>
Date: Tue, 2 Sep 2008 12:53:39 -0700 (PDT)
From: Andy33 <clever_one3@yahoo.com>
To: java-user@lucene.apache.org
Subject: Lucene Memory Leak
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: clever_one3@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


I have a memory leak in my lucene search code. I am able to run a few queries
fine, but I eventually run out of memory. Please note that I do close and
set to null the ivIndexSearcher object elsewhere. Here is the code I am
using... 


private synchronized Hits doQuery(String field, String queryStr, Sort
sortOrder, String indexDirectory) throws Exception
    {
	Directory directory = null;
	
	try
	{
	    Analyzer analyzer = new StandardAnalyzer();
	    
	    directory = FSDirectory.getDirectory(indexDirectory);
	    
	    //search the index
	    ivIndexSearcher = new IndexSearcher(directory);
	       
	    QueryParser parser = new QueryParser(field, analyzer);
	    Query query = parser.parse(queryStr);
	    Hits results = ivIndexSearcher.search(query, sortOrder);
	    
	    return results;
	}	
	finally
	{	   
	    if(null != directory)
	    {
		directory.close();
	    }
	    directory = null;
	}
    }
-- 
View this message in context: http://www.nabble.com/Lucene-Memory-Leak-tp19276999p19276999.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 02 19:58:25 2008
Return-Path: <java-user-return-35861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 363 invoked from network); 2 Sep 2008 19:58:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Sep 2008 19:58:24 -0000
Received: (qmail 38662 invoked by uid 500); 2 Sep 2008 19:58:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38633 invoked by uid 500); 2 Sep 2008 19:58:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38622 invoked by uid 99); 2 Sep 2008 19:58:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 12:58:16 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 19:57:17 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Kac0Z-0005ri-Gt
	for java-user@lucene.apache.org; Tue, 02 Sep 2008 12:57:47 -0700
Message-ID: <19277001.post@talk.nabble.com>
Date: Tue, 2 Sep 2008 12:57:47 -0700 (PDT)
From: Andy33 <clever_one3@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Memory Leak
In-Reply-To: <19276999.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: clever_one3@yahoo.com
References: <19276999.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org



-- 
View this message in context: http://www.nabble.com/Lucene-Memory-Leak-tp19276999p19277001.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 02 19:59:31 2008
Return-Path: <java-user-return-35862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1562 invoked from network); 2 Sep 2008 19:59:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Sep 2008 19:59:31 -0000
Received: (qmail 41539 invoked by uid 500); 2 Sep 2008 19:59:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41503 invoked by uid 500); 2 Sep 2008 19:59:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41492 invoked by uid 99); 2 Sep 2008 19:59:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 12:59:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.132.250 as permitted sender)
Received: from [209.85.132.250] (HELO an-out-0708.google.com) (209.85.132.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 19:58:23 +0000
Received: by an-out-0708.google.com with SMTP id c37so373720anc.49
        for <java-user@lucene.apache.org>; Tue, 02 Sep 2008 12:58:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=3hOR6Y06yhuHcdP2vAtmY44OPHi6gi6k7SITYH/33ug=;
        b=w2B9KbqLKr9LOdlaks8bdhwf1HfUQ4dQnjXAhrt2ka+6uyg+LuZo3b/yHI6yvPMDaT
         U5bL7eFq/GoGEB6o+y3NbEiX0T4sGmMgVLTzEvl8ryuALtHyq7cpb30H5YQS3UcVODAm
         uOCWcyz9hvxtkEbCZLvbsQzzaiqwbVPb8pr9o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=ciCPHWc/BoRLdci6Oct9FvC0H1T5FqJ8nIRi6eOO6MOj27FmL13I6qtygzCEfTOUg5
         e/JptiLO8xIHhVqukefasOzVLqvZ9GjeI49vU/06qpM9GaTfchmaCvbY2aAMBTX2TwKH
         1FVtmf5B4LEQ+GA8Yn0CnwqXCrtC3fTMOakjk=
Received: by 10.100.214.19 with SMTP id m19mr8041059ang.1.1220385533750;
        Tue, 02 Sep 2008 12:58:53 -0700 (PDT)
Received: from ?192.168.1.109? ( [68.198.57.217])
        by mx.google.com with ESMTPS id c1sm14740819ana.26.2008.09.02.12.58.52
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 02 Sep 2008 12:58:53 -0700 (PDT)
Message-ID: <48BD9AFD.1020306@gmail.com>
Date: Tue, 02 Sep 2008 15:58:53 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.16 (X11/20080724)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene Memory Leak
References: <19276999.post@talk.nabble.com>
In-Reply-To: <19276999.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

You should really close the IndexSearcher rather than the directory.

Andy33 wrote:
> I have a memory leak in my lucene search code. I am able to run a few queries
> fine, but I eventually run out of memory. Please note that I do close and
> set to null the ivIndexSearcher object elsewhere. Here is the code I am
> using... 
>
>
> private synchronized Hits doQuery(String field, String queryStr, Sort
> sortOrder, String indexDirectory) throws Exception
>     {
> 	Directory directory = null;
> 	
> 	try
> 	{
> 	    Analyzer analyzer = new StandardAnalyzer();
> 	    
> 	    directory = FSDirectory.getDirectory(indexDirectory);
> 	    
> 	    //search the index
> 	    ivIndexSearcher = new IndexSearcher(directory);
> 	       
> 	    QueryParser parser = new QueryParser(field, analyzer);
> 	    Query query = parser.parse(queryStr);
> 	    Hits results = ivIndexSearcher.search(query, sortOrder);
> 	    
> 	    return results;
> 	}	
> 	finally
> 	{	   
> 	    if(null != directory)
> 	    {
> 		directory.close();
> 	    }
> 	    directory = null;
> 	}
>     }
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 02 20:46:09 2008
Return-Path: <java-user-return-35863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28172 invoked from network); 2 Sep 2008 20:46:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Sep 2008 20:46:09 -0000
Received: (qmail 13832 invoked by uid 500); 2 Sep 2008 20:45:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13800 invoked by uid 500); 2 Sep 2008 20:45:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13784 invoked by uid 99); 2 Sep 2008 20:45:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 13:45:53 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 20:44:54 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Kacke-0007X4-O5
	for java-user@lucene.apache.org; Tue, 02 Sep 2008 13:45:24 -0700
Message-ID: <19278017.post@talk.nabble.com>
Date: Tue, 2 Sep 2008 13:45:24 -0700 (PDT)
From: Andy33 <clever_one3@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Memory Leak
In-Reply-To: <48BD9AFD.1020306@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: clever_one3@yahoo.com
References: <19276999.post@talk.nabble.com> <48BD9AFD.1020306@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


As stated in my original message, I am closing the IndexSearcher elsewhere. I
don't close it in the method I copied because otherwise I lose access to the
Hits that come back. 



You should really close the IndexSearcher rather than the directory.

Andy33 wrote:
> I have a memory leak in my lucene search code. I am able to run a few
> queries
> fine, but I eventually run out of memory. Please note that I do close and
> set to null the ivIndexSearcher object elsewhere. Here is the code I am
> using... 

-- 
View this message in context: http://www.nabble.com/Lucene-Memory-Leak-tp19276999p19278017.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 03 00:59:57 2008
Return-Path: <java-user-return-35864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28256 invoked from network); 3 Sep 2008 00:59:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Sep 2008 00:59:57 -0000
Received: (qmail 20871 invoked by uid 500); 3 Sep 2008 00:59:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20836 invoked by uid 500); 3 Sep 2008 00:59:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20825 invoked by uid 99); 3 Sep 2008 00:59:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 17:59:47 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a4.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 00:58:48 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a4.g.dreamhost.com (Postfix) with ESMTP id 494CD3B9F0
	for <java-user@lucene.apache.org>; Tue,  2 Sep 2008 17:59:25 -0700 (PDT)
Message-Id: <AD60C727-F6C9-4FD0-B445-F2CC4148E915@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <19276999.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Lucene Memory Leak
Date: Tue, 2 Sep 2008 20:58:46 -0400
References: <19276999.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

Closing the directory seems a bit strange, why are you doing that  
(other than it is a public method), especially since you say you are  
keeping the IndexSearcher around?  Also, you probably shouldn't open a  
new searcher every time.  Are your queries on different directories  
every time?

What testing have you done to date that lead you to believe this  
section of code is the cause of the problem?

-Grant

On Sep 2, 2008, at 3:53 PM, Andy33 wrote:

>
> I have a memory leak in my lucene search code. I am able to run a  
> few queries
> fine, but I eventually run out of memory. Please note that I do  
> close and
> set to null the ivIndexSearcher object elsewhere. Here is the code I  
> am
> using...
>
>
> private synchronized Hits doQuery(String field, String queryStr, Sort
> sortOrder, String indexDirectory) throws Exception
>    {
> 	Directory directory = null;
> 	
> 	try
> 	{
> 	    Analyzer analyzer = new StandardAnalyzer();
> 	
> 	    directory = FSDirectory.getDirectory(indexDirectory);
> 	
> 	    //search the index
> 	    ivIndexSearcher = new IndexSearcher(directory);
> 	
> 	    QueryParser parser = new QueryParser(field, analyzer);
> 	    Query query = parser.parse(queryStr);
> 	    Hits results = ivIndexSearcher.search(query, sortOrder);
> 	
> 	    return results;
> 	}	
> 	finally
> 	{	
> 	    if(null != directory)
> 	    {
> 		directory.close();
> 	    }
> 	    directory = null;
> 	}
>    }
> -- 
> View this message in context: http://www.nabble.com/Lucene-Memory-Leak-tp19276999p19276999.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 03 01:13:24 2008
Return-Path: <java-user-return-35865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41993 invoked from network); 3 Sep 2008 01:13:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Sep 2008 01:13:23 -0000
Received: (qmail 35987 invoked by uid 500); 3 Sep 2008 01:13:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35957 invoked by uid 500); 3 Sep 2008 01:13:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35945 invoked by uid 99); 3 Sep 2008 01:13:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Sep 2008 18:13:12 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of need4spd@gmail.com designates 209.85.128.185 as permitted sender)
Received: from [209.85.128.185] (HELO fk-out-0910.google.com) (209.85.128.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 01:12:12 +0000
Received: by fk-out-0910.google.com with SMTP id 18so2021654fkq.5
        for <java-user@lucene.apache.org>; Tue, 02 Sep 2008 18:12:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=GeZTGY/q4zsd+59ZInQNNlXh7Oguc2P1GuxUWKsZRZw=;
        b=OpHiVvNw4AytvfKbqUpWWtZwb5pApWOT2oJbOjd7dkxGea1pQttfxW+ek96v1GvQaJ
         Jmdobc4DxZ2+w6QpbxyR9DemWMgBil7rPwrh8/FlycLYjK74wmnrGso4XevdC5ne4S1F
         hHk9A6yMWK/aQrMQjcNyYdcZAJp/dLDj6dSp0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=bpy9zRD6NNi4puoG91du8pkAqtEo89VFtdJCMPPLVwGmWYsh3tqjhFoWz6oxr+NB3K
         fRHiOEncYJsTHbQFddAOflrsxcNfSUQyhzHnqscD7DjHklglJ06onRi6NILKxz4Zb/qv
         F+5f+sW1aNFihn6MtwXNvYitLaw5gNOWnHJDw=
Received: by 10.180.245.15 with SMTP id s15mr6488220bkh.103.1220404351974;
        Tue, 02 Sep 2008 18:12:31 -0700 (PDT)
Received: by 10.181.7.9 with HTTP; Tue, 2 Sep 2008 18:12:31 -0700 (PDT)
Message-ID: <a823853a0809021812r4e8c3972g32531c311af21609@mail.gmail.com>
Date: Wed, 3 Sep 2008 10:12:31 +0900
From: "=?EUC-KR?B?wOW/67yu?=" <need4spd@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Memory Leak
In-Reply-To: <19276999.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15646_27250688.1220404351970"
References: <19276999.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15646_27250688.1220404351970
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: base64
Content-Disposition: inline

SSB0aGluayB3aGVuIHlvdXIgZG9RdWVyeSBtZXRob2QgaXMgcnVuLCBEaXJlY3RvcnkgYW5kIEFu
YWx5emVyIGNsYXNzZXMgYXJlCm5ldyBjcmVhdGUgZXZlcnkgdGltZS4KSWYgaW5kZXggZmlsZSdz
IHNpemUgaXMgdmVyeSBsYXJnZSB0aGVuIGNyZWF0ZSBuZXcgRGlyZWN0b3J5IGluc3RhbmNlIGlz
CnByZXNzdXJlIHRvIGp2bSBhbmQgaXQgdGFrZXMgbG9uZyB0aW1lIGZvciBjcmVhdGUgbmV3IERp
cmVjdG9yeSBpbnN0YW5jZS4KSSBzdWdnZXN0IHRoYXQgbW9kaWZ5IHRoZSBjb2RlICwgQW5hbHl6
ZXIgY2xhc3MgYW5kIERpcmVjdG9yeSBjbGFzcyB0aGF0CnNpbmdsZXRvbmUgcGF0dGVybi4KKElm
IHlvdSBjYW4uLi4uU2VhcmNoIENsYXNzLHRvbykKCgoyMDA4LzkvMywgQW5keTMzIDxjbGV2ZXJf
b25lM0B5YWhvby5jb20+Ogo+Cj4KPiBJIGhhdmUgYSBtZW1vcnkgbGVhayBpbiBteSBsdWNlbmUg
c2VhcmNoIGNvZGUuIEkgYW0gYWJsZSB0byBydW4gYSBmZXcKPiBxdWVyaWVzCj4gZmluZSwgYnV0
IEkgZXZlbnR1YWxseSBydW4gb3V0IG9mIG1lbW9yeS4gUGxlYXNlIG5vdGUgdGhhdCBJIGRvIGNs
b3NlIGFuZAo+IHNldCB0byBudWxsIHRoZSBpdkluZGV4U2VhcmNoZXIgb2JqZWN0IGVsc2V3aGVy
ZS4gSGVyZSBpcyB0aGUgY29kZSBJIGFtCj4gdXNpbmcuLi4KPgo+Cj4gcHJpdmF0ZSBzeW5jaHJv
bml6ZWQgSGl0cyBkb1F1ZXJ5KFN0cmluZyBmaWVsZCwgU3RyaW5nIHF1ZXJ5U3RyLCBTb3J0Cj4g
c29ydE9yZGVyLCBTdHJpbmcgaW5kZXhEaXJlY3RvcnkpIHRocm93cyBFeGNlcHRpb24KPiAgICB7
Cj4gICAgICAgIERpcmVjdG9yeSBkaXJlY3RvcnkgPSBudWxsOwo+Cj4gICAgICAgIHRyeQo+ICAg
ICAgICB7Cj4gICAgICAgICAgICBBbmFseXplciBhbmFseXplciA9IG5ldyBTdGFuZGFyZEFuYWx5
emVyKCk7Cj4KPiAgICAgICAgICAgIGRpcmVjdG9yeSA9IEZTRGlyZWN0b3J5LmdldERpcmVjdG9y
eShpbmRleERpcmVjdG9yeSk7Cj4KPiAgICAgICAgICAgIC8vc2VhcmNoIHRoZSBpbmRleAo+ICAg
ICAgICAgICAgaXZJbmRleFNlYXJjaGVyID0gbmV3IEluZGV4U2VhcmNoZXIoZGlyZWN0b3J5KTsK
Pgo+ICAgICAgICAgICAgUXVlcnlQYXJzZXIgcGFyc2VyID0gbmV3IFF1ZXJ5UGFyc2VyKGZpZWxk
LCBhbmFseXplcik7Cj4gICAgICAgICAgICBRdWVyeSBxdWVyeSA9IHBhcnNlci5wYXJzZShxdWVy
eVN0cik7Cj4gICAgICAgICAgICBIaXRzIHJlc3VsdHMgPSBpdkluZGV4U2VhcmNoZXIuc2VhcmNo
KHF1ZXJ5LCBzb3J0T3JkZXIpOwo+Cj4gICAgICAgICAgICByZXR1cm4gcmVzdWx0czsKPiAgICAg
ICAgfQo+ICAgICAgICBmaW5hbGx5Cj4gICAgICAgIHsKPiAgICAgICAgICAgIGlmKG51bGwgIT0g
ZGlyZWN0b3J5KQo+ICAgICAgICAgICAgewo+ICAgICAgICAgICAgICAgIGRpcmVjdG9yeS5jbG9z
ZSgpOwo+ICAgICAgICAgICAgfQo+ICAgICAgICAgICAgZGlyZWN0b3J5ID0gbnVsbDsKPiAgICAg
ICAgfQo+ICAgIH0KPiAtLQo+IFZpZXcgdGhpcyBtZXNzYWdlIGluIGNvbnRleHQ6Cj4gaHR0cDov
L3d3dy5uYWJibGUuY29tL0x1Y2VuZS1NZW1vcnktTGVhay10cDE5Mjc2OTk5cDE5Mjc2OTk5Lmh0
bWwKPiBTZW50IGZyb20gdGhlIEx1Y2VuZSAtIEphdmEgVXNlcnMgbWFpbGluZyBsaXN0IGFyY2hp
dmUgYXQgTmFiYmxlLmNvbS4KPgo+Cj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gVG8gdW5zdWJzY3JpYmUsIGUt
bWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gRm9yIGFkZGl0
aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcK
Pgo+CgoKLS0gCkRFVr/rvcQKaHR0cDovL2RldnlvbmdzaWsudGlzdG9yeS5jb20K
------=_Part_15646_27250688.1220404351970--

From java-user-return-35866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 03 07:44:23 2008
Return-Path: <java-user-return-35866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18793 invoked from network); 3 Sep 2008 07:44:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Sep 2008 07:44:23 -0000
Received: (qmail 13687 invoked by uid 500); 3 Sep 2008 07:44:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13373 invoked by uid 500); 3 Sep 2008 07:44:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13362 invoked by uid 99); 3 Sep 2008 07:44:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 00:44:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of noble.paul@gmail.com designates 74.125.78.25 as permitted sender)
Received: from [74.125.78.25] (HELO ey-out-2122.google.com) (74.125.78.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 07:43:16 +0000
Received: by ey-out-2122.google.com with SMTP id 6so1194195eyi.53
        for <java-user@lucene.apache.org>; Wed, 03 Sep 2008 00:43:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=vnMQjNfXsY5g11JptMZxhEcrrIukCTPwPTobpOO3bsE=;
        b=BMSG+15ng/rss1bpH8JmAz30kCgj4nL+v4E4w7NiTS/tiyLWUZlkQ6s+S+KemD4/9W
         mJxxXoQvODiX8HqeN4BgtbQjdDulK1O7NlxsqlcJbfSWZzh0jNplyQFmLwkQzEfcWQ/T
         C3jGSxll7BATHD/rLUUet1aLkdUiCWOd1F7f8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=MAyYgRjsaX08d0mDbmzUWtSm/8X2lpFvlozZgIPmqCJLADJya0wY0knDTC2IYJ+Rmi
         JV8v6rsIr5C5/MhAYjxyDlMecX6I/v4ZNsKaaTflFwP7akCrUn3E8Ag191AWIuPt0Z4s
         2+7bfEENNS3n84cVOMrW6XOTHo/wwrRlHmI08=
Received: by 10.210.45.14 with SMTP id s14mr9677756ebs.52.1220427808758;
        Wed, 03 Sep 2008 00:43:28 -0700 (PDT)
Received: by 10.210.60.3 with HTTP; Wed, 3 Sep 2008 00:43:28 -0700 (PDT)
Message-ID: <5e76b0ad0809030043q742e959qbd96cc6747918d6d@mail.gmail.com>
Date: Wed, 3 Sep 2008 13:13:28 +0530
From: "=?UTF-8?B?Tm9ibGUgUGF1bCDgtKg=?= =?UTF-8?B?4LWL4LSs4LS/4LSz4LWN4oCNIOCkqOCli+CkrOCljeCks+CljQ==?=" <noble.paul@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: getTimestamp method in IndexCommit
In-Reply-To: <64338149-209B-4033-A120-122DF1D95913@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <36a9c1920809010306y4cb4722cx176a19798c7f8700@mail.gmail.com>
	 <64338149-209B-4033-A120-122DF1D95913@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, Sep 2, 2008 at 1:56 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
>
> Are you thinking this would just fallback to Directory.fileModified on the
> segments_N file for that commit?
>
> You could actually do that without any API change, because IndexCommit
> exposes a getSegmentsFileName().
If it is a RAMDirectory how can we get the lastmodified?
Isn't it a lot of overhead to read the file modified time everytime
the timestamp is tobe obtained?
>
> Mike
>
> Akshay wrote:
>
>> Hi,
>>
>> We need a feature for time based cleanup of IndexCommits. Would it be
>> possible to add a method to IndexCommit class to get the timestamp of an
>> index commit?
>>
>> Thanks.
>>
>> --
>> Regards,
>> Akshay Ukey.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
--Noble Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 03 08:37:07 2008
Return-Path: <java-user-return-35867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43267 invoked from network); 3 Sep 2008 08:37:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Sep 2008 08:37:07 -0000
Received: (qmail 66945 invoked by uid 500); 3 Sep 2008 08:36:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66914 invoked by uid 500); 3 Sep 2008 08:36:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66903 invoked by uid 99); 3 Sep 2008 08:36:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 01:36:59 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.236] (HELO wr-out-0506.google.com) (64.233.184.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 08:36:00 +0000
Received: by wr-out-0506.google.com with SMTP id c30so2817145wra.21
        for <java-user@lucene.apache.org>; Wed, 03 Sep 2008 01:36:28 -0700 (PDT)
Received: by 10.90.53.5 with SMTP id b5mr11026795aga.19.1220430988394;
        Wed, 03 Sep 2008 01:36:28 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id 38sm12677379aga.4.2008.09.03.01.36.27
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 03 Sep 2008 01:36:27 -0700 (PDT)
Message-Id: <E4D0F226-7C86-473D-AEF5-AB374EB83A8D@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <5e76b0ad0809030043q742e959qbd96cc6747918d6d@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: getTimestamp method in IndexCommit
Date: Wed, 3 Sep 2008 04:36:26 -0400
References: <36a9c1920809010306y4cb4722cx176a19798c7f8700@mail.gmail.com> <64338149-209B-4033-A120-122DF1D95913@mikemccandless.com> <5e76b0ad0809030043q742e959qbd96cc6747918d6d@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Noble Paul =E0=B4=A8=E0=B5=8B=E0=B4=AC=E0=B4=BF=E0=B4=B3=E0=B5=8D=E2=80=8D=
 =E0=A4=A8=E0=A5=8B=E0=A4=AC=E0=A5=8D=E0=A4=B3=E0=A5=8D wrote:

> On Tue, Sep 2, 2008 at 1:56 PM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>>
>> Are you thinking this would just fallback to Directory.fileModified =20=

>> on the
>> segments_N file for that commit?
>>
>> You could actually do that without any API change, because =20
>> IndexCommit
>> exposes a getSegmentsFileName().
> If it is a RAMDirectory how can we get the lastmodified?

RAMDirectory will report the System.currentTimeMillis() when the file =20=

was last changed.  Is that not sufficient?

> Isn't it a lot of overhead to read the file modified time everytime
> the timestamp is tobe obtained?

I would think this method does not need to be super fast -- how =20
frequently are you planning to call it?

Note that the segments_N file has no other means of extracting a =20
timestamp for itself; it does not store a timestamp internally or =20
anything.

Mike=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 03 10:19:02 2008
Return-Path: <java-user-return-35868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96023 invoked from network); 3 Sep 2008 10:19:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Sep 2008 10:19:02 -0000
Received: (qmail 89453 invoked by uid 500); 3 Sep 2008 10:18:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89402 invoked by uid 500); 3 Sep 2008 10:18:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89391 invoked by uid 99); 3 Sep 2008 10:18:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 03:18:50 -0700
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Jon.Loken@bipsolutions.com designates 85.119.2.190 as permitted sender)
Received: from [85.119.2.190] (HELO cluster-f.mailcontrol.com) (85.119.2.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 10:17:50 +0000
Received: from mailx02.virtual-email.net ([213.228.203.171])
	by rly31f.srv.mailcontrol.com (MailControl) with ESMTP id m83AAFX1005428
	for <java-user@lucene.apache.org>; Wed, 3 Sep 2008 11:18:06 +0100
Received: from mailx10.virtual-email.net ([213.228.203.166]) by mailx02.virtual-email.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 3 Sep 2008 11:17:42 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: concise definition of Lucene score?
Date: Wed, 3 Sep 2008 11:17:41 +0100
Message-ID: <73C3337877023246872FB2E97FD1636C02FA80B8@mailx10.virtual-email.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: concise definition of Lucene score?
Thread-Index: AckNrkxlF+mKypn/QWKJND3UFalPAg==
From: "Jon Loken" <Jon.Loken@bipsolutions.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 03 Sep 2008 10:17:42.0700 (UTC) FILETIME=[4D2C76C0:01C90DAE]
X-Scanned-By: MailControl A-08-50-13 (www.mailcontrol.com) on 10.70.0.141
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,=20

I have attempted to find a concise definition of how the Lucene score is
calculated, something that can be understood by most people.=20

The information I found is accurate, but not particularly concise.=20
http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/apac
he/lucene/search/Similarity.html

If there is no boosting or sorting involved, how is a default sort
calculated?

Many thanks,=20
Jon


BiP Solutions Limited is a company registered in Scotland with Company Numb=
er SC086146 and VAT number 383030966 and having its registered office at Pa=
rk House, 300 Glasgow Road, Shawfield, Glasgow, G73 1SQ *******************=
*********************************************************
This e-mail (and any attachment) is intended only for the attention of the =
addressee(s). Its unauthorised use, disclosure, storage or copying is not p=
ermitted. If you are not the intended recipient, please destroyall copies a=
nd inform the sender by return e-mail.
This e-mail (whether you are the sender or the recipient) may be monitored,=
 recorded and retained by BiP Solutions Ltd.
E-mail monitoring/ blocking software may be used, and e-mail content may be=
 read at any time. You have a responsibility to ensure laws are not broken =
when composing or forwarding e-mails and their contents.
****************************************************************************

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 03 14:38:06 2008
Return-Path: <java-user-return-35869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35808 invoked from network); 3 Sep 2008 14:38:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Sep 2008 14:38:06 -0000
Received: (qmail 78382 invoked by uid 500); 3 Sep 2008 14:37:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78174 invoked by uid 500); 3 Sep 2008 14:37:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78163 invoked by uid 99); 3 Sep 2008 14:37:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 07:37:57 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a3.g.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 14:36:57 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a3.g.dreamhost.com (Postfix) with ESMTP id 50C0A15D4ED
	for <java-user@lucene.apache.org>; Wed,  3 Sep 2008 07:37:32 -0700 (PDT)
Message-Id: <C7C80584-2862-42D2-9D63-FE01140C0CFE@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <73C3337877023246872FB2E97FD1636C02FA80B8@mailx10.virtual-email.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: concise definition of Lucene score?
Date: Wed, 3 Sep 2008 10:36:53 -0400
References: <73C3337877023246872FB2E97FD1636C02FA80B8@mailx10.virtual-email.net>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

What's not concise about a complex math formula?  :-)

The basic Term Vector approach to IR, that Lucene more or less  
implements, says that the score for a document given a query is the  
cosine of the angle formed between the query vector and the document  
vector.

I like to draw a standard x-y axis graph and then draw two vectors,  
one being the query and the other the document and then draw in the  
angle between them (w/ their tails at the same point).  The score is  
the cosine of that angle (more or less).  That is usually sufficient  
for "most people".  People who like math can read the formula.

-Grant

On Sep 3, 2008, at 6:17 AM, Jon Loken wrote:

> Hi all,
>
> I have attempted to find a concise definition of how the Lucene  
> score is
> calculated, something that can be understood by most people.
>
> The information I found is accurate, but not particularly concise.
> http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/apac
> he/lucene/search/Similarity.html
>
> If there is no boosting or sorting involved, how is a default sort
> calculated?
>
> Many thanks,
> Jon
>
>
> BiP Solutions Limited is a company registered in Scotland with  
> Company Number SC086146 and VAT number 383030966 and having its  
> registered office at Park House, 300 Glasgow Road, Shawfield,  
> Glasgow, G73 1SQ  
> ****************************************************************************
> This e-mail (and any attachment) is intended only for the attention  
> of the addressee(s). Its unauthorised use, disclosure, storage or  
> copying is not permitted. If you are not the intended recipient,  
> please destroyall copies and inform the sender by return e-mail.
> This e-mail (whether you are the sender or the recipient) may be  
> monitored, recorded and retained by BiP Solutions Ltd.
> E-mail monitoring/ blocking software may be used, and e-mail content  
> may be read at any time. You have a responsibility to ensure laws  
> are not broken when composing or forwarding e-mails and their  
> contents.
> ****************************************************************************
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 03 16:07:36 2008
Return-Path: <java-user-return-35870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89970 invoked from network); 3 Sep 2008 16:07:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Sep 2008 16:07:36 -0000
Received: (qmail 68882 invoked by uid 500); 3 Sep 2008 16:07:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68608 invoked by uid 500); 3 Sep 2008 16:07:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68597 invoked by uid 99); 3 Sep 2008 16:07:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 09:07:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.12.216.205] (HELO theronge.com) (69.12.216.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 16:06:29 +0000
Received: from [10.96.51.14] (unknown [72.36.94.29])
	(Authenticated sender: mronge)
	by theronge.com (Postfix) with ESMTP id DE79364422
	for <java-user@lucene.apache.org>; Wed,  3 Sep 2008 09:06:58 -0700 (PDT)
Message-Id: <C3B38B83-B744-45A8-A365-CE75BD5B6BE0@theronge.com>
From: Matt Ronge <mronge@theronge.com>
To: java-user@lucene.apache.org
In-Reply-To: <200808302201.16379.paul.elschot@xs4all.nl>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Pre-filtering for expensive query
Date: Wed, 3 Sep 2008 11:06:57 -0500
References: <4EC81374-F485-4A2D-A178-8838235AE6C1@theronge.com> <4D3C512C-16EF-411F-9894-CA1E3195917F@gmail.com> <8EC08D17-5CC9-4CEC-8368-9A8A2AE6EAC8@theronge.com> <200808302201.16379.paul.elschot@xs4all.nl>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


On Aug 30, 2008, at 3:01 PM, Paul Elschot wrote:

> Op Saturday 30 August 2008 18:19:09 schreef Matt Ronge:
>> On Aug 30, 2008, at 4:43 AM, Karl Wettin wrote:
>>> Can you tell us a bit more about what you custom query does?
>>> Perhaps you can build the "candidate filter" and reuse it over and
>>> over again?
>>
>> I cannot reuse it. The candidate filter would be constructed by first
>> running a boolean query with a number of SHOULD clauses. So then I
>> know what docs atleast contain the terms I'm looking for. Once I have
>> this set, I will look at the ordering of the matches (it's a bit more
>> sophisticated than just a phrase query) and find the final matches.
>
> Sounds like you may want to take a look at SpanNearQuery.

I'm going to take a second look at SpanNearQuery. I need it to support  
optional tokens, so I'm guessing I'll need to create a subclass to do  
that.

>
>> Since my boolean clauses are different for each query I can't reuse
>> the filter.
>
> With (a variation of) SpanNearQuery you may end up not needing
> any filtering at all, because it already uses skipTo() where possible.
>
> In case you are looking for documents that contain partial phrases
> from an input query that has more than 2 words, have a look at Nutch.

I poked around in the Nutch docs and Javadocs, what should I look at  
in Nutch? What does it do exactly, is it the trick that Doug Cutting  
mentioned where you concat neighboring terms together like "Hello  
world" becomes the token hello.world?

Thanks for everyones help so far, I really appreciate it,
--
Matt

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 03 17:01:08 2008
Return-Path: <java-user-return-35871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19229 invoked from network); 3 Sep 2008 17:01:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Sep 2008 17:01:08 -0000
Received: (qmail 82553 invoked by uid 500); 3 Sep 2008 17:01:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82319 invoked by uid 500); 3 Sep 2008 17:00:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82302 invoked by uid 99); 3 Sep 2008 17:00:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 10:00:59 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a9.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 17:00:00 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a9.g.dreamhost.com (Postfix) with ESMTP id 959261FC17
	for <java-user@lucene.apache.org>; Wed,  3 Sep 2008 10:01:08 -0700 (PDT)
Message-Id: <0D9CD1D3-444C-4372-B9B5-ED84D48341C1@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <48B99C0C.3070909@getopt.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Pre-filtering for expensive query
Date: Wed, 3 Sep 2008 13:00:29 -0400
References: <4EC81374-F485-4A2D-A178-8838235AE6C1@theronge.com> <48B99C0C.3070909@getopt.org>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


On Aug 30, 2008, at 3:14 PM, Andrzej Bialecki wrote:

> Matt Ronge wrote:
>> Hi all,
>> I am working on implementing a new Query, Weight and Scorer that is  
>> expensive to run. I'd like to limit the number of documents I run  
>> this query on by first building a candidate set of documents with a  
>> boolean query. Once I have that candidate set, I was hoping I could  
>> build a filter off of it, and issue that along with my expensive  
>> query. However, after reading the code I see that filtering is done  
>> during the search, and not before hand. So my initial boolean query  
>> won't help in limiting the number of documents scored by my  
>> expensive query.
>> Has anyone done any work into restricting the set of docs that a  
>> query operates on?
>> Or should I just implement something myself in a custom scorer?
>
> I think you can use a FilteredQuery in a BooleanClause. This may be  
> faster than the filtering code in the Searcher, because the  
> evaluation is done during scoring and not afterwards. FilteredQuery  
> internally makes


FYI, not sure if this is exactly what you are talking about Andrzej,  
but IndexSearcher no longer filters after scoring.  This was changed  
in https://issues.apache.org/jira/browse/LUCENE-584

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 03 17:31:41 2008
Return-Path: <java-user-return-35872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31383 invoked from network); 3 Sep 2008 17:31:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Sep 2008 17:31:40 -0000
Received: (qmail 30676 invoked by uid 500); 3 Sep 2008 17:31:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30648 invoked by uid 500); 3 Sep 2008 17:31:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30637 invoked by uid 99); 3 Sep 2008 17:31:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 10:31:31 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 17:30:32 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KawC6-0008DU-Db
	for java-user@lucene.apache.org; Wed, 03 Sep 2008 10:31:02 -0700
Message-ID: <19294053.post@talk.nabble.com>
Date: Wed, 3 Sep 2008 10:31:02 -0700 (PDT)
From: Andy33 <clever_one3@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Memory Leak
In-Reply-To: <a823853a0809021812r4e8c3972g32531c311af21609@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: clever_one3@yahoo.com
References: <19276999.post@talk.nabble.com> <a823853a0809021812r4e8c3972g32531c311af21609@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I took your advice and created Singletons for the Directory, Analyzer, and
IndexSearcher classes. I also undid the closing of the Directory and
IndexSearcher. This seemed to fix my memory leak problem. However, I don't
like the fact that I am leaving open the IndexSearcher for the entire life
of a web application. When I close the IndexSearcher, the underlying
IndexReader is also closed. It looks like the only way I can reopen the
IndexSearcher is to reopen the IndexReader and create a new IndexSearcher.
This leads me back to my original problem.=20

Is there a better way to handle this rather than keeping the IndexSeacher
open for the life of the application?



=EC=9E=A5=EC=9A=A9=EC=84=9D wrote:
>=20
> I think when your doQuery method is run, Directory and Analyzer classes
> are
> new create every time.
> If index file's size is very large then create new Directory instance is
> pressure to jvm and it takes long time for create new Directory instance.
> I suggest that modify the code , Analyzer class and Directory class that
> singletone pattern.
> (If you can....Search Class,too)
>=20

--=20
View this message in context: http://www.nabble.com/Lucene-Memory-Leak-tp19=
276999p19294053.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 03 17:44:37 2008
Return-Path: <java-user-return-35873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39186 invoked from network); 3 Sep 2008 17:44:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Sep 2008 17:44:36 -0000
Received: (qmail 60856 invoked by uid 500); 3 Sep 2008 17:44:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60824 invoked by uid 500); 3 Sep 2008 17:44:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60813 invoked by uid 99); 3 Sep 2008 17:44:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 10:44:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.26] (HELO smtp-vbr6.xs4all.nl) (194.109.24.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 17:43:29 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr6.xs4all.nl (8.13.8/8.13.8) with ESMTP id m83HhSQD083780
	for <java-user@lucene.apache.org>; Wed, 3 Sep 2008 19:43:28 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Pre-filtering for expensive query
Date: Wed, 3 Sep 2008 19:43:30 +0200
User-Agent: KMail/1.9.9
References: <4EC81374-F485-4A2D-A178-8838235AE6C1@theronge.com> <200808302201.16379.paul.elschot@xs4all.nl> <C3B38B83-B744-45A8-A365-CE75BD5B6BE0@theronge.com>
In-Reply-To: <C3B38B83-B744-45A8-A365-CE75BD5B6BE0@theronge.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200809031943.30355.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Op Wednesday 03 September 2008 18:06:57 schreef Matt Ronge:
> On Aug 30, 2008, at 3:01 PM, Paul Elschot wrote:
> > Op Saturday 30 August 2008 18:19:09 schreef Matt Ronge:
> >> On Aug 30, 2008, at 4:43 AM, Karl Wettin wrote:
> >>> Can you tell us a bit more about what you custom query does?
> >>> Perhaps you can build the "candidate filter" and reuse it over
> >>> and over again?
> >>
> >> I cannot reuse it. The candidate filter would be constructed by
> >> first running a boolean query with a number of SHOULD clauses. So
> >> then I know what docs atleast contain the terms I'm looking for.
> >> Once I have this set, I will look at the ordering of the matches
> >> (it's a bit more sophisticated than just a phrase query) and find
> >> the final matches.
> >
> > Sounds like you may want to take a look at SpanNearQuery.
>
> I'm going to take a second look at SpanNearQuery. I need it to
> support optional tokens, so I'm guessing I'll need to create a
> subclass to do that.

SpanNearQuery was not designed for optional tokens.
This can be tricky so make sure your specs are good. I know
only of this article for optional tokens and proximity:
Kunihiko Sadakane and Hiroshi Imai.  Fast algorithms for k -word 
proximity search. IEICE Trans. Fundamentals, E84-A(9), September 2001.

>
> >> Since my boolean clauses are different for each query I can't
> >> reuse the filter.
> >
> > With (a variation of) SpanNearQuery you may end up not needing
> > any filtering at all, because it already uses skipTo() where
> > possible.
> >
> > In case you are looking for documents that contain partial phrases
> > from an input query that has more than 2 words, have a look at
> > Nutch.
>
> I poked around in the Nutch docs and Javadocs, what should I look at
> in Nutch? What does it do exactly, is it the trick that Doug Cutting 
> mentioned where you concat neighboring terms together like "Hello
> world" becomes the token hello.world?

That is an optimization for combinations of high frequency terms,
which is built into nutch iirc. But I don't know the details, so please
ask on a nutch list.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 03 17:57:12 2008
Return-Path: <java-user-return-35874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48951 invoked from network); 3 Sep 2008 17:57:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Sep 2008 17:57:12 -0000
Received: (qmail 92601 invoked by uid 500); 3 Sep 2008 17:57:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92274 invoked by uid 500); 3 Sep 2008 17:57:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92263 invoked by uid 99); 3 Sep 2008 17:57:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 10:57:03 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 74.125.44.30 as permitted sender)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 17:56:02 +0000
Received: by yx-out-2324.google.com with SMTP id 3so1362130yxj.5
        for <java-user@lucene.apache.org>; Wed, 03 Sep 2008 10:56:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:reply-to
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=MCGDbrlYxa60SIzvDzfqCkvEdQUSq9FmKZ8lnFqJoio=;
        b=PuEHchf0mf9yfB1jO/ZRkDjnH0vQ6UI8DSBRoVgSj66hoxBT4PJuU5+YX/xrj6Hd04
         MAz0rROCJzEKNKYgosPOoXuYTim2z5DV49lFaqGHxri3xx7NqyCMDdxGyojCVsxgf/08
         ZCs68i0IDZWRZr4wfeK7cMTM3e8i1egrancZg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=message-id:date:from:reply-to:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=Y8nIRJB8bayn5VAEf3Js0H056glMuC42EvPksO2/pgPWAD0UvywegY4B21hE+xAiC3
         hXIPBxGB8AqvtiEJ3k7+4Zyfy7afLzSRZpHgDbOe4l3v87/lrnnEApeYPKArSkJUZvPy
         yZGnN2nFPs6kKixsm8KQgxF6Bw3uGwDwAs4Lg=
Received: by 10.114.56.4 with SMTP id e4mr7953007waa.0.1220464592281;
        Wed, 03 Sep 2008 10:56:32 -0700 (PDT)
Received: by 10.115.19.12 with HTTP; Wed, 3 Sep 2008 10:56:32 -0700 (PDT)
Message-ID: <f18c9dde0809031056w2028751cvfb7e0c8310c60871@mail.gmail.com>
Date: Wed, 3 Sep 2008 19:56:32 +0200
From: "Simon Willnauer" <simon.willnauer@googlemail.com>
Reply-To: simon.willnauer@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Lucene Memory Leak
In-Reply-To: <19294053.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <19276999.post@talk.nabble.com>
	 <a823853a0809021812r4e8c3972g32531c311af21609@mail.gmail.com>
	 <19294053.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

SWYgeW91IGFyZSBsb29raW5nIGZvciBhIHJlYXNvbmFibGUgcGVyZm9ybWFuY2UgeW91IHNob3Vs
ZCBub3QgY2xvc2UKeW91ciBJbmRleFNlYXJjaGVyIGlmIG5vdCBuZWNlc3NhcnkuIEl0IGlzIGFj
dHVhbGx5IGJlc3QgcHJhY3RpY2UgdG8KbGVhdmUgYW4gSW5kZXhTZWFyY2hlciBpbnN0YW5jZSBv
cGVuIGFuIGV2ZW4gc2hhcmUgaXQgYmV0d2VlbiB0aHJlYWRzCi8gcmVxdWVzdHMgb2YgeW91ciB3
ZWJhcHBsaWNhdGlvbi4gVGhlIHNlYXJjaGVyIHdpbGwgbm90IHBvbGx1dGUgeW91cgptZW1vcnku
IEp1c3Qga2VlcCB0aGUgc2VhcmNoZXIgb3BlbiB0byB1dGlsaXplIHRoZSBsdWNlbmUgaW50ZXJu
YWxzCmxpa2UgY2FjaGVzIGFuZCByZW9wZW4gdGhlIHNlYXJjaGVyIG9ubHkgaWYgcmVhbGx5IHJl
cXVpcmVkIHRoaXMgd2lsbAptb3N0IGxpa2VseSBnaXZlIHlvdSB0aGUgYmVzdCBwZXJmb3JtYW5j
ZS4KCnJlZ2FyZHMgc2ltb24KCk9uIFdlZCwgU2VwIDMsIDIwMDggYXQgNzozMSBQTSwgQW5keTMz
IDxjbGV2ZXJfb25lM0B5YWhvby5jb20+IHdyb3RlOgo+Cj4gSSB0b29rIHlvdXIgYWR2aWNlIGFu
ZCBjcmVhdGVkIFNpbmdsZXRvbnMgZm9yIHRoZSBEaXJlY3RvcnksIEFuYWx5emVyLCBhbmQKPiBJ
bmRleFNlYXJjaGVyIGNsYXNzZXMuIEkgYWxzbyB1bmRpZCB0aGUgY2xvc2luZyBvZiB0aGUgRGly
ZWN0b3J5IGFuZAo+IEluZGV4U2VhcmNoZXIuIFRoaXMgc2VlbWVkIHRvIGZpeCBteSBtZW1vcnkg
bGVhayBwcm9ibGVtLiBIb3dldmVyLCBJIGRvbid0Cj4gbGlrZSB0aGUgZmFjdCB0aGF0IEkgYW0g
bGVhdmluZyBvcGVuIHRoZSBJbmRleFNlYXJjaGVyIGZvciB0aGUgZW50aXJlIGxpZmUKPiBvZiBh
IHdlYiBhcHBsaWNhdGlvbi4gV2hlbiBJIGNsb3NlIHRoZSBJbmRleFNlYXJjaGVyLCB0aGUgdW5k
ZXJseWluZwo+IEluZGV4UmVhZGVyIGlzIGFsc28gY2xvc2VkLiBJdCBsb29rcyBsaWtlIHRoZSBv
bmx5IHdheSBJIGNhbiByZW9wZW4gdGhlCj4gSW5kZXhTZWFyY2hlciBpcyB0byByZW9wZW4gdGhl
IEluZGV4UmVhZGVyIGFuZCBjcmVhdGUgYSBuZXcgSW5kZXhTZWFyY2hlci4KPiBUaGlzIGxlYWRz
IG1lIGJhY2sgdG8gbXkgb3JpZ2luYWwgcHJvYmxlbS4KPgo+IElzIHRoZXJlIGEgYmV0dGVyIHdh
eSB0byBoYW5kbGUgdGhpcyByYXRoZXIgdGhhbiBrZWVwaW5nIHRoZSBJbmRleFNlYWNoZXIKPiBv
cGVuIGZvciB0aGUgbGlmZSBvZiB0aGUgYXBwbGljYXRpb24/Cj4KPgo+Cj4g7J6l7Jqp7ISdIHdy
b3RlOgo+Pgo+PiBJIHRoaW5rIHdoZW4geW91ciBkb1F1ZXJ5IG1ldGhvZCBpcyBydW4sIERpcmVj
dG9yeSBhbmQgQW5hbHl6ZXIgY2xhc3Nlcwo+PiBhcmUKPj4gbmV3IGNyZWF0ZSBldmVyeSB0aW1l
Lgo+PiBJZiBpbmRleCBmaWxlJ3Mgc2l6ZSBpcyB2ZXJ5IGxhcmdlIHRoZW4gY3JlYXRlIG5ldyBE
aXJlY3RvcnkgaW5zdGFuY2UgaXMKPj4gcHJlc3N1cmUgdG8ganZtIGFuZCBpdCB0YWtlcyBsb25n
IHRpbWUgZm9yIGNyZWF0ZSBuZXcgRGlyZWN0b3J5IGluc3RhbmNlLgo+PiBJIHN1Z2dlc3QgdGhh
dCBtb2RpZnkgdGhlIGNvZGUgLCBBbmFseXplciBjbGFzcyBhbmQgRGlyZWN0b3J5IGNsYXNzIHRo
YXQKPj4gc2luZ2xldG9uZSBwYXR0ZXJuLgo+PiAoSWYgeW91IGNhbi4uLi5TZWFyY2ggQ2xhc3Ms
dG9vKQo+Pgo+Cj4gLS0KPiBWaWV3IHRoaXMgbWVzc2FnZSBpbiBjb250ZXh0OiBodHRwOi8vd3d3
Lm5hYmJsZS5jb20vTHVjZW5lLU1lbW9yeS1MZWFrLXRwMTkyNzY5OTlwMTkyOTQwNTMuaHRtbAo+
IFNlbnQgZnJvbSB0aGUgTHVjZW5lIC0gSmF2YSBVc2VycyBtYWlsaW5nIGxpc3QgYXJjaGl2ZSBh
dCBOYWJibGUuY29tLgo+Cj4KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiBUbyB1bnN1YnNjcmliZSwgZS1tYWls
OiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPiBGb3IgYWRkaXRpb25h
bCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+Cj4K


From java-user-return-35875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 03 18:15:15 2008
Return-Path: <java-user-return-35875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56971 invoked from network); 3 Sep 2008 18:15:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Sep 2008 18:15:15 -0000
Received: (qmail 27987 invoked by uid 500); 3 Sep 2008 18:15:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27963 invoked by uid 500); 3 Sep 2008 18:15:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27952 invoked by uid 99); 3 Sep 2008 18:15:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 11:15:06 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 18:14:09 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id F163871EE84; Wed,  3 Sep 2008 11:13:59 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 07BAD71EE83
	for <java-user@lucene.apache.org>; Wed,  3 Sep 2008 11:13:58 -0700 (PDT)
Date: Wed, 3 Sep 2008 11:13:58 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: concise definition of Lucene score?
In-Reply-To: <73C3337877023246872FB2E97FD1636C02FA80B8@mailx10.virtual-email.net>
Message-ID: <Pine.LNX.4.62.0809031109320.27383@radix.cryptio.net>
References: <73C3337877023246872FB2E97FD1636C02FA80B8@mailx10.virtual-email.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I have attempted to find a concise definition of how the Lucene score is
: calculated, something that can be understood by most people. 

The answer tends to vary based on exactly what type of query you are 
talking about ... TermQuery?  PhraseQuery?  BooleanQuery contianing a mix?

I'm going to take a shot in the dark and guess that if you feel like the 
explanation on the Similarity docs is too verbose, then perhaps what you 
are looking for isn't an definition, but a simple example.

the explain() method can be used to show exactly what hte score 
calculation is for a given query and a given document.  while it won't 
always show you the *full* picture of what types of scores might be 
produced by the query (ie if a doc matches all clauses of a BooleanQuery, 
it won't show you that there would be a coordFactor if it had only matched 
one) it is the most straight forward way to get a simple understanding of 
"why is this the score?" for any concrete example.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 03 18:50:32 2008
Return-Path: <java-user-return-35876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89439 invoked from network); 3 Sep 2008 18:50:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Sep 2008 18:50:32 -0000
Received: (qmail 81145 invoked by uid 500); 3 Sep 2008 18:50:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81113 invoked by uid 500); 3 Sep 2008 18:50:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81101 invoked by uid 99); 3 Sep 2008 18:50:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 11:50:23 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 18:49:23 +0000
Received: by fg-out-1718.google.com with SMTP id l27so248990fgb.27
        for <java-user@lucene.apache.org>; Wed, 03 Sep 2008 11:49:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=SovJJFWxeNKOYYMZO3XmPkodfwNKDyk2eyAdngCMXp0=;
        b=Iqv/6kGz6SFCdMV8xWMyr/6S1JExYoHQXqmZ/f1Rb6xAfJicJOWXam1MQ9CydJJ9PB
         MJ1SdVyLa/msNc3wMTHqdQ9ITCGULGIW0Vxo6gqeD7OtMw5U9Rb72kGEtBhaCQ2KdsQY
         T904w34U7Xt0VnO9gktEXoBorUSN5QznCXtl8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=R7JPxVLJpspZGpgvTcPenM9Arn0r3qUYf7hZ2uvTCsncG4zq+LoNDeiy0Gk+UdZhnO
         DBl2iPLhybvBtJmnBSSWVCo8LZeDaa4v8w6IyIefexaw77NMukcGsLb8PvlJ/0q15NO+
         iAm2W+HeydLb0WGAKbV8MkCSZmAPcg9bk3TV4=
Received: by 10.86.82.6 with SMTP id f6mr6919133fgb.38.1220467775906;
        Wed, 03 Sep 2008 11:49:35 -0700 (PDT)
Received: by 10.86.76.4 with HTTP; Wed, 3 Sep 2008 11:49:35 -0700 (PDT)
Message-ID: <359a92830809031149y28e25784wf7a58ac3533b7c16@mail.gmail.com>
Date: Wed, 3 Sep 2008 14:49:35 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: search for empty field?
In-Reply-To: <6e3ae6310809020123k4ce4aeb8hbeedd51ca9073262@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18826_16247800.1220467775902"
References: <6e3ae6310809020123k4ce4aeb8hbeedd51ca9073262@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_18826_16247800.1220467775902
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This has been discussed multiple times, so looking at the
searchable archive will give you more detailed info. But as
I remember, the consensus suggestion was to index some
"impossible" value for those documents that lack a field.
For instance, say your field was "sometimes". I document
that had nothing to index for that field could get a value of
"ZZZZZZZZZZZZZ".

Now your query is simple sometimes:ZZZZZZZZZZZZZ


Best
Erick

On Tue, Sep 2, 2008 at 4:23 AM, Chris Lu <chris.lu@gmail.com> wrote:

> Is it possible to query for documents that have empty values for a field?
>
> Say need to find documents with category empty, I tried negative query:
>  -category:*
> But it returns 0 document. I think "category:*" is basically match all, so
> this "-category:*" doesn't work.
>
> Thanks!
>
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
>
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> DBSight customer, a shopping comparison site, (anonymous per request) got
> 2.6 Million Euro funding!
>

------=_Part_18826_16247800.1220467775902--

From java-user-return-35877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 03 19:11:59 2008
Return-Path: <java-user-return-35877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4169 invoked from network); 3 Sep 2008 19:11:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Sep 2008 19:11:59 -0000
Received: (qmail 13898 invoked by uid 500); 3 Sep 2008 19:11:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13869 invoked by uid 500); 3 Sep 2008 19:11:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13858 invoked by uid 99); 3 Sep 2008 19:11:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 12:11:50 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 19:10:51 +0000
Received: by yx-out-2324.google.com with SMTP id 3so1379721yxj.5
        for <java-user@lucene.apache.org>; Wed, 03 Sep 2008 12:11:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=HGh/PJjDi/vzZyQQvSVYU5tHcn71aKpDfkXMFy7Ngrw=;
        b=VPqLjdn8wohVQM5BhiuZOLte7NbY5WnsYK/eNPlM05oa1YP29OVnWb+q3xJCnpxQ1t
         spbWDoWt/9q4xP3K+gUYope+0oQfevtdpEFEsnNcnYwhWpdGgP37F/zG+mf2j4wSAf1W
         zB7pDgWc89Yjaux0MWP2Uj9MqS+vSeKImOa84=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=koZ7fhjLeg2U0b9aaRQvA4rW5NaRDJd77G9Xl4q7CGsxRD0d41ybRo4z+Wtjgdkflr
         d07hXEdQ3VwVTzPk50OgBYzyUOzI2pJIL400VQ0Y0fYqpwcEDWk2/JLEi8ZUE4FM0bfP
         HS00jm2aqh5Pl2LYUrD2uAcuu8zBDGiH+WTeA=
Received: by 10.142.194.1 with SMTP id r1mr3179631wff.192.1220469064094;
        Wed, 03 Sep 2008 12:11:04 -0700 (PDT)
Received: by 10.142.111.8 with HTTP; Wed, 3 Sep 2008 12:11:04 -0700 (PDT)
Message-ID: <6e3ae6310809031211s7fcb0a74w7686c813cfafa38b@mail.gmail.com>
Date: Wed, 3 Sep 2008 12:11:04 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: search for empty field?
In-Reply-To: <359a92830809031149y28e25784wf7a58ac3533b7c16@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24015_15634141.1220469064097"
References: <6e3ae6310809020123k4ce4aeb8hbeedd51ca9073262@mail.gmail.com>
	 <359a92830809031149y28e25784wf7a58ac3533b7c16@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24015_15634141.1220469064097
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks Erick for reminding me of this!
I only need to validate a index and make sure the content are correctly
retrieved and index doesn't have empty fields.
So I'd better simply go through all document by id and check them directly.

Thanks!

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!

On Wed, Sep 3, 2008 at 11:49 AM, Erick Erickson <erickerickson@gmail.com>wrote:

> This has been discussed multiple times, so looking at the
> searchable archive will give you more detailed info. But as
> I remember, the consensus suggestion was to index some
> "impossible" value for those documents that lack a field.
> For instance, say your field was "sometimes". I document
> that had nothing to index for that field could get a value of
> "ZZZZZZZZZZZZZ".
>
> Now your query is simple sometimes:ZZZZZZZZZZZZZ
>
>
> Best
> Erick
>
> On Tue, Sep 2, 2008 at 4:23 AM, Chris Lu <chris.lu@gmail.com> wrote:
>
> > Is it possible to query for documents that have empty values for a field?
> >
> > Say need to find documents with category empty, I tried negative query:
> >  -category:*
> > But it returns 0 document. I think "category:*" is basically match all,
> so
> > this "-category:*" doesn't work.
> >
> > Thanks!
> >
> > --
> > Chris Lu
> > -------------------------
> > Instant Scalable Full-Text Search On Any Database/Application
> > site: http://www.dbsight.net
> > demo: http://search.dbsight.com
> > Lucene Database Search in 3 minutes:
> >
> >
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> > DBSight customer, a shopping comparison site, (anonymous per request) got
> > 2.6 Million Euro funding!
> >
>

------=_Part_24015_15634141.1220469064097--

From java-user-return-35878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 03 19:19:04 2008
Return-Path: <java-user-return-35878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6177 invoked from network); 3 Sep 2008 19:19:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Sep 2008 19:19:03 -0000
Received: (qmail 21174 invoked by uid 500); 3 Sep 2008 19:18:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21139 invoked by uid 500); 3 Sep 2008 19:18:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21128 invoked by uid 99); 3 Sep 2008 19:18:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 12:18:54 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 19:17:54 +0000
Received: by fg-out-1718.google.com with SMTP id l27so254326fgb.27
        for <java-user@lucene.apache.org>; Wed, 03 Sep 2008 12:18:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=ZhDtgKvqih7RYbizdee+L5vEwMn9MXMwkc0yMGe19nI=;
        b=rXlIgI6pfCGi8A17drL6mRrE7cxLqxMN13jRxQ7DtXwd6aSRiEPAknWUQf1Vr+0VN2
         3lv+/3YyjE1SZxO9s4A1+GzaInrqsq7ukVJlIuNulQxLVQ2GLXNfU1C2lBIG9z6pP5rn
         Exyd+tKiUCRDuwRnZgYeQWoNSGpocEW5NVEYQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=lRCXdAH2XhxecHtCyyEF8mMhAhpZ6x0Mqs1qlgfEDHqOSMGXkcAtX6ueIVyIdNHvHs
         ZIU/W+GWiO3NIwfNzd9xkwNTwhoEoLlnrdEsX4w45ZgBcZm9uGx2Pw/w0/MhEfYpKshP
         RBeAFVJQh30TEfxarm0F/viOpkQ2UVJgDXoqw=
Received: by 10.86.27.19 with SMTP id a19mr6957020fga.37.1220469483125;
        Wed, 03 Sep 2008 12:18:03 -0700 (PDT)
Received: by 10.86.76.4 with HTTP; Wed, 3 Sep 2008 12:18:03 -0700 (PDT)
Message-ID: <359a92830809031218h5eda68a9reef8cdad6ce35977@mail.gmail.com>
Date: Wed, 3 Sep 2008 15:18:03 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: search for empty field?
In-Reply-To: <6e3ae6310809031211s7fcb0a74w7686c813cfafa38b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19165_19493325.1220469483120"
References: <6e3ae6310809020123k4ce4aeb8hbeedd51ca9073262@mail.gmail.com>
	 <359a92830809031149y28e25784wf7a58ac3533b7c16@mail.gmail.com>
	 <6e3ae6310809031211s7fcb0a74w7686c813cfafa38b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19165_19493325.1220469483120
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Oh.. I wonder if TermDocs/TermEnum would work for you
instead.....

Would it work to just create a document validator at index
time that threw an exception if all required fields weren't
present? Or is that outside your control?

Best
Erick

On Wed, Sep 3, 2008 at 3:11 PM, Chris Lu <chris.lu@gmail.com> wrote:

> Thanks Erick for reminding me of this!
> I only need to validate a index and make sure the content are correctly
> retrieved and index doesn't have empty fields.
> So I'd better simply go through all document by id and check them directly.
>
> Thanks!
>
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
>
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> DBSight customer, a shopping comparison site, (anonymous per request) got
> 2.6 Million Euro funding!
>
> On Wed, Sep 3, 2008 at 11:49 AM, Erick Erickson <erickerickson@gmail.com
> >wrote:
>
> > This has been discussed multiple times, so looking at the
> > searchable archive will give you more detailed info. But as
> > I remember, the consensus suggestion was to index some
> > "impossible" value for those documents that lack a field.
> > For instance, say your field was "sometimes". I document
> > that had nothing to index for that field could get a value of
> > "ZZZZZZZZZZZZZ".
> >
> > Now your query is simple sometimes:ZZZZZZZZZZZZZ
> >
> >
> > Best
> > Erick
> >
> > On Tue, Sep 2, 2008 at 4:23 AM, Chris Lu <chris.lu@gmail.com> wrote:
> >
> > > Is it possible to query for documents that have empty values for a
> field?
> > >
> > > Say need to find documents with category empty, I tried negative query:
> > >  -category:*
> > > But it returns 0 document. I think "category:*" is basically match all,
> > so
> > > this "-category:*" doesn't work.
> > >
> > > Thanks!
> > >
> > > --
> > > Chris Lu
> > > -------------------------
> > > Instant Scalable Full-Text Search On Any Database/Application
> > > site: http://www.dbsight.net
> > > demo: http://search.dbsight.com
> > > Lucene Database Search in 3 minutes:
> > >
> > >
> >
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> > > DBSight customer, a shopping comparison site, (anonymous per request)
> got
> > > 2.6 Million Euro funding!
> > >
> >
>

------=_Part_19165_19493325.1220469483120--

From java-user-return-35879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 03 19:21:02 2008
Return-Path: <java-user-return-35879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7344 invoked from network); 3 Sep 2008 19:21:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Sep 2008 19:21:02 -0000
Received: (qmail 24329 invoked by uid 500); 3 Sep 2008 19:20:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24295 invoked by uid 500); 3 Sep 2008 19:20:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24284 invoked by uid 99); 3 Sep 2008 19:20:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 12:20:53 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 19:19:51 +0000
Received: by gxk6 with SMTP id 6so5998141gxk.5
        for <java-user@lucene.apache.org>; Wed, 03 Sep 2008 12:20:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=kX1240xzaCOKN9JjvM+H5RLE3nK83WTWo1t2HaeDXQM=;
        b=eoyIYkL8iYoLW1Uqo6rjZmBSUj8pUHufpsWmHlCjwBNJRLPf4d9VYdBZQ9y6F/Nkj8
         Q9o6P2/jdRU/fkhDiZTPL9MXU+Cw5cp1N6TIuh/QhPcRzQqTG/1rcmYxpkTAplg1/aup
         YWfrvNZ+SF6xnlAyffXg3bdfj6+Vwh/OLhnpw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=EValIuo0rc5uBCnmu3vmKc16dLAP95aMr6EbpGcu/ynZQfSNff1GrXtbjmWcvch0VA
         7qUuq7lYE+5MD17TT8MUcDT7TzKsbpmxzlAm+1LGEzBo9JNziFUqHRFNXG+v41Mzl0Of
         AXVMcy6Y+N2VpZ9+xnEDDlXmC73+w7jf/eDFQ=
Received: by 10.150.95.15 with SMTP id s15mr12910288ybb.210.1220469622006;
        Wed, 03 Sep 2008 12:20:22 -0700 (PDT)
Received: by 10.151.118.7 with HTTP; Wed, 3 Sep 2008 12:20:21 -0700 (PDT)
Message-ID: <85d3c3b60809031220t206bdf42m3026d4fbb6f7d3dd@mail.gmail.com>
Date: Wed, 3 Sep 2008 15:20:21 -0400
From: "Jason Rutherglen" <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org, java-dev@lucene.apache.org
Subject: Realtime Search for Social Networks Collaboration
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hello all,

I don't mean this to sound like a solicitation.  I've been working on
realtime search and created some Lucene patches etc.  I am wondering
if there are social networks (or anyone else) out there who would be
interested in collaborating with Apache on realtime search to get it
to the point it can be used in production.  It is a challenging
problem that only Google has solved and made to scale.  I've been
working on the problem for a while and though a lot has been
completed, there is still a lot more to do and collaboration amongst
the most probable users (social networks) seems like a good thing to
try to do at this point.  I guess I'm saying it seems like a hard
enough problem that perhaps it's best to work together on it rather
than each company try to complete their own.  However I could be
wrong.

Realtime search benefits social networks by providing a scalable
searchable alternative to large Mysql implementations.  Mysql I have
heard is difficult to scale at a certain point.  Apparently Google has
created things like BigTable (a large database) and an online service
called GData (which Google has not published any whitepapers on the
technology underneath) to address scaling large database systems.
BigTable does not offer search.   GData does and is used by all of
Google's web services instead of something like Mysql (this is at
least how I understand it).  Social networks usually grow and so
scaling is continually an issue.  It is possible to build a realtime
search system that scales linearly, something that I have heard
becomes difficult with Mysql.  There is an article that discusses some
of these issues
http://acmqueue.com/modules.php?name=Content&pa=showpage&pid=337  I
don't think the current GData implementation is perfect and there is a
lot that can be improved on.  It might be helpful to figure out
together what helpful things can be added.

If this sounds like something of interest to anyone feel free to send
your input.

Take care,
Jason

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 03 19:32:20 2008
Return-Path: <java-user-return-35880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15625 invoked from network); 3 Sep 2008 19:32:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Sep 2008 19:32:19 -0000
Received: (qmail 38882 invoked by uid 500); 3 Sep 2008 19:32:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38855 invoked by uid 500); 3 Sep 2008 19:32:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38844 invoked by uid 99); 3 Sep 2008 19:32:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 12:32:11 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 209.85.200.173 as permitted sender)
Received: from [209.85.200.173] (HELO wf-out-1314.google.com) (209.85.200.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 19:31:12 +0000
Received: by wf-out-1314.google.com with SMTP id 28so3688296wfc.20
        for <java-user@lucene.apache.org>; Wed, 03 Sep 2008 12:31:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=UsbJjbZdCKglG5k2HZuj+4ELqjw+HcXZistvo3v2uiw=;
        b=guIyjWFs1cQ3DgOLWjRf1i3SBt+nQVjxWFWlnXYtKz3xTGpHH604k7HMDgTir6mHFe
         kCPFf8Aszx/96wocNjUtzVljnceCN5yosgIGkr5dXAMx26e4toT8kghfVpGKw/8CaOQ6
         1Vh81VlSQxGYbYGTCL1+fwfv7iWqokuiq32Pk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=p/saWs8y86j9X0JLsM+OzfyHCXHOPhoRcXpIXWM5Bxtw6+J9CvRxadSGqqlzQrRAWb
         J8GuTjkpKXzX9n2i4PrYPbfNV75ern4AkLS72Q4tw4kqDJCt3il/IjbDJvlRmu2CyVNQ
         W4K2DiNqp7DI/BKQ3UvGE8eVQQfXTYsexheHs=
Received: by 10.143.42.3 with SMTP id u3mr3186876wfj.148.1220470292718;
        Wed, 03 Sep 2008 12:31:32 -0700 (PDT)
Received: by 10.142.111.8 with HTTP; Wed, 3 Sep 2008 12:31:32 -0700 (PDT)
Message-ID: <6e3ae6310809031231g3f57fa60u57bc98ec439f4112@mail.gmail.com>
Date: Wed, 3 Sep 2008 12:31:32 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: search for empty field?
In-Reply-To: <359a92830809031218h5eda68a9reef8cdad6ce35977@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24470_5914448.1220470292707"
References: <6e3ae6310809020123k4ce4aeb8hbeedd51ca9073262@mail.gmail.com>
	 <359a92830809031149y28e25784wf7a58ac3533b7c16@mail.gmail.com>
	 <6e3ae6310809031211s7fcb0a74w7686c813cfafa38b@mail.gmail.com>
	 <359a92830809031218h5eda68a9reef8cdad6ce35977@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24470_5914448.1220470292707
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I was kind of waiting for a more efficient solution based on
TermDocs/TermEnum, but I feel since the term is not there at all, the only
thing we can do is to do some deduction.
I can copy the bitmap of all the deleted docs, and go through all
the TermDocs/TermEnum, and set the bit if there is a term there. then all
the unset bits are documents with empty fields.

This should be kind of efficient.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!

On Wed, Sep 3, 2008 at 12:18 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> Oh.. I wonder if TermDocs/TermEnum would work for you
> instead.....
>
> Would it work to just create a document validator at index
> time that threw an exception if all required fields weren't
> present? Or is that outside your control?
>
> Best
> Erick
>
> On Wed, Sep 3, 2008 at 3:11 PM, Chris Lu <chris.lu@gmail.com> wrote:
>
> > Thanks Erick for reminding me of this!
> > I only need to validate a index and make sure the content are correctly
> > retrieved and index doesn't have empty fields.
> > So I'd better simply go through all document by id and check them
> directly.
> >
> > Thanks!
> >
> > --
> > Chris Lu
> > -------------------------
> > Instant Scalable Full-Text Search On Any Database/Application
> > site: http://www.dbsight.net
> > demo: http://search.dbsight.com
> > Lucene Database Search in 3 minutes:
> >
> >
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> > DBSight customer, a shopping comparison site, (anonymous per request) got
> > 2.6 Million Euro funding!
> >
> > On Wed, Sep 3, 2008 at 11:49 AM, Erick Erickson <erickerickson@gmail.com
> > >wrote:
> >
> > > This has been discussed multiple times, so looking at the
> > > searchable archive will give you more detailed info. But as
> > > I remember, the consensus suggestion was to index some
> > > "impossible" value for those documents that lack a field.
> > > For instance, say your field was "sometimes". I document
> > > that had nothing to index for that field could get a value of
> > > "ZZZZZZZZZZZZZ".
> > >
> > > Now your query is simple sometimes:ZZZZZZZZZZZZZ
> > >
> > >
> > > Best
> > > Erick
> > >
> > > On Tue, Sep 2, 2008 at 4:23 AM, Chris Lu <chris.lu@gmail.com> wrote:
> > >
> > > > Is it possible to query for documents that have empty values for a
> > field?
> > > >
> > > > Say need to find documents with category empty, I tried negative
> query:
> > > >  -category:*
> > > > But it returns 0 document. I think "category:*" is basically match
> all,
> > > so
> > > > this "-category:*" doesn't work.
> > > >
> > > > Thanks!
> > > >
> > > > --
> > > > Chris Lu
> > > > -------------------------
> > > > Instant Scalable Full-Text Search On Any Database/Application
> > > > site: http://www.dbsight.net
> > > > demo: http://search.dbsight.com
> > > > Lucene Database Search in 3 minutes:
> > > >
> > > >
> > >
> >
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> > > > DBSight customer, a shopping comparison site, (anonymous per request)
> > got
> > > > 2.6 Million Euro funding!
> > > >
> > >
> >
>

------=_Part_24470_5914448.1220470292707--

From java-user-return-35881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 03 19:53:06 2008
Return-Path: <java-user-return-35881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30185 invoked from network); 3 Sep 2008 19:53:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Sep 2008 19:53:06 -0000
Received: (qmail 66789 invoked by uid 500); 3 Sep 2008 19:52:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66764 invoked by uid 500); 3 Sep 2008 19:52:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66753 invoked by uid 99); 3 Sep 2008 19:52:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 12:52:57 -0700
X-ASF-Spam-Status: No, hits=3.1 required=10.0
	tests=HTML_MESSAGE,MIME_HTML_MOSTLY,MPART_ALT_DIFF,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tmoreira@liferay.com designates 208.70.128.103 as permitted sender)
Received: from [208.70.128.103] (HELO smtp-gw77.mailanyone.net) (208.70.128.103)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 19:51:58 +0000
Received: from mailanyone.net
	by smtp-gw77.mailanyone.net with esmtpa (MailAnyone extSMTP liferay.com.192874)
	id 1KayOy-0006wI-HS
	for java-user@lucene.apache.org; Wed, 03 Sep 2008 14:52:28 -0500
Received: from 127.0.0.1
        (MailAnyone web AccountID 253596)
        by webmail.fusemail.com with HTTP;
        Wed, 3 Sep 2008 14:52:27 -0500 (CDT)
Message-ID: <1220471547.v2.mailanyonewebmail-253596@fuse49>
Date: Wed, 3 Sep 2008 14:52:27 -0500 (CDT)
Subject: Similarity percentage between two Strings
From: "Thiago Moreira" <tmoreira@liferay.com>
To: java-user@lucene.apache.org
Reply-To: tmoreira@liferay.com
User-Agent: MailAnyone W
MIME-Version: 1.0
Content-Type: multipart/mixed;charset=utf-8;
     boundary="----=_20080903145227_83447"
X-Priority: 3
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

------=_20080903145227_83447
Content-Type: multipart/alternative;
	boundary="----=_20080903145227_89508"

------=_20080903145227_89508
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: 8bit

------=_20080903145227_89508
Content-Type: text/html; charset="utf-8"
Content-Transfer-Encoding: 8bit


<div class="PrivateMsgDiv"><!--{12204714257610}-->




<div class="bodyclass" style="color: rgb(0, 0, 0);">
<br>
&nbsp;&nbsp;&nbsp; Hey all,<br>
<br>
&nbsp;&nbsp;&nbsp; I want to know how much two Strings are similar! The thing is: I'm
processing an email box and I want to group all messages that have the
subject similar, makes sense?? I looked on the documentation but I
didn't find how to accomplish this. It's not necessary add the messages
or the subjects on some kind of index. I'm using 2.3.2 version of
Lucene.<br>
<br>
&nbsp;&nbsp;&nbsp; Anyone has some idea?<br>
<br>
&nbsp;&nbsp;&nbsp; Thanks in advance.<br>
<div class="moz-signature">-- <br>
<hr align="center" color="silver" noshade="noshade" size="2" width="100%">
<span style="font-size: 11pt; font-family: Arial; color: rgb(95, 95, 95);">Thiago
Moreira<br>
Software Engineer</span><br>
<span style="font-size: 11pt; font-family: Arial; color: rgb(65, 107, 169);" lang="EN-US"><a href="mailto:tmoreira@liferay.com" _fcksavedurl="mailto:tmoreira@liferay.com" target="_new"><span style="color: rgb(65, 107, 169); text-decoration: none;" lang="EN-US">tmoreira@liferay.com</span></a></span><br>
<a href="http://www.liferay.com" _fcksavedurl="http://www.liferay.com" target="_new"><span style="font-size: 11pt; font-family: Arial; color: rgb(65, 107, 169);" lang="EN-US">Liferay, Inc.</span></a><br>
<span style="font-size: 11pt; font-family: Arial; color: rgb(65, 107, 169);" lang="EN-US">Enterprise. Open Source. For Life.</span><br>
</div>
</div>


<!--{12204714257611}-->
</div>
------=_20080903145227_89508--

------=_20080903145227_83447
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------=_20080903145227_83447--


From java-user-return-35882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 03 20:30:40 2008
Return-Path: <java-user-return-35882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58335 invoked from network); 3 Sep 2008 20:30:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Sep 2008 20:30:40 -0000
Received: (qmail 18658 invoked by uid 500); 3 Sep 2008 20:30:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18635 invoked by uid 500); 3 Sep 2008 20:30:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18624 invoked by uid 99); 3 Sep 2008 20:30:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 13:30:31 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [68.142.206.160] (HELO n21.bullet.mail.mud.yahoo.com) (68.142.206.160)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 03 Sep 2008 20:29:32 +0000
Received: from [209.191.108.96] by n21.bullet.mail.mud.yahoo.com with NNFMP; 03 Sep 2008 20:28:38 -0000
Received: from [68.142.201.252] by t3.bullet.mud.yahoo.com with NNFMP; 03 Sep 2008 20:28:42 -0000
Received: from [127.0.0.1] by omp413.mail.mud.yahoo.com with NNFMP; 03 Sep 2008 20:28:42 -0000
X-Yahoo-Newman-Id: 323677.61945.bm@omp413.mail.mud.yahoo.com
Received: (qmail 26237 invoked from network); 3 Sep 2008 20:28:42 -0000
Received: from unknown (HELO ?192.168.1.100?) (nhira@cognocys.com@75.168.29.95 with plain)
  by smtp119.plus.mail.mud.yahoo.com with SMTP; 3 Sep 2008 20:28:41 -0000
X-YMail-OSG: Y8su5dwVM1kjXwcXDq98ZTIqHS1THXqjm182wRi9nODAFSFpq31B4wpGKtWeafHL24Xe08ej35ytFl8iHxOdFlJAj9j27ACBYRF1omIkToO2IfXFasmPspsUw_x.KEcBPqAc16aORc8r8ES6.0fIv6Tt
X-Yahoo-Newman-Property: ymail-3
In-Reply-To: <1220471547.v2.mailanyonewebmail-253596@fuse49>
References: <1220471547.v2.mailanyonewebmail-253596@fuse49>
Mime-Version: 1.0 (Apple Message framework v753.1)
X-Priority: 3
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <AD20DC10-16EE-4341-95C4-8EAB7F75D739@cognocys.com>
Content-Transfer-Encoding: 7bit
From: "N. Hira" <nhira@cognocys.com>
Subject: Re: Similarity percentage between two Strings
Date: Wed, 3 Sep 2008 15:28:39 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753.1)
X-Virus-Checked: Checked by ClamAV on apache.org

I don't know how much of this is a Lucene problem, but -- as I'm sure  
you will inevitably hear from others on the list -- it depends on  
what your definition of "similar" is.

By similar, do you mean:
1.  Identical, except for variations in case (upper/lower)
2.  Allow 1., but also allow prefixes/suffixes (e.g., "FW:  " or "...  
(summary")
3.  Allow 1., 2. and permit some new terms ... how many?
4.  Allow all of the above and allow some changes to terms using  
stemming (E.g., "Google releases Chrome" is similar to "Google  
announces the release of its new Chrome web browser")
....

I'm sure you see where this is going.  So ... how do you define similar?

Good luck!

-h
----------------------------------------------------------------------
Hira, N.R.
Cognocys, Inc.

On 03-Sep-2008, at 2:52 PM, Thiago Moreira wrote:

>
>     Hey all,
>
>     I want to know how much two Strings are similar! The thing is:  
> I'm processing an email box and I want to group all messages that  
> have the subject similar, makes sense?? I looked on the  
> documentation but I didn't find how to accomplish this. It's not  
> necessary add the messages or the subjects on some kind of index.  
> I'm using 2.3.2 version of Lucene.
>
>     Anyone has some idea?
>
>     Thanks in advance.
> -- 
> Thiago Moreira
> Software Engineer
> tmoreira@liferay.com
> Liferay, Inc.
> Enterprise. Open Source. For Life.
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 03 20:57:16 2008
Return-Path: <java-user-return-35883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79561 invoked from network); 3 Sep 2008 20:57:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Sep 2008 20:57:16 -0000
Received: (qmail 58325 invoked by uid 500); 3 Sep 2008 20:57:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58297 invoked by uid 500); 3 Sep 2008 20:57:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58286 invoked by uid 99); 3 Sep 2008 20:57:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 13:57:07 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.198.226 as permitted sender)
Received: from [209.85.198.226] (HELO rv-out-0506.google.com) (209.85.198.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 20:56:08 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3596802rvb.5
        for <java-user@lucene.apache.org>; Wed, 03 Sep 2008 13:56:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=Dm5GLFLJcFTy68/9VlbaPPbNjDD8o7vA1tYiiL1rT/4=;
        b=InW1bL/ch1hwgxyr01WG6xs9YbvBVrLiyMh/cHlIQ+99GlqRjVPDEzNeYzaB8hruHi
         K4enxIWfC+Ar37+oqbbA8vCxE+QeVKzEyXTp6V4gaFlmoEg5/VkyAhGp/CzcP0JSgmRm
         KjZa/0zvozYosdbaSBWggTLZoPhDjhOS666AA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=cPNp/fhTf1yIv1rJRBMfO94DQnZwCDKHXhhwc1nJi4jzf6w4avYSLZqBmnIoU5xymm
         Nv3z3eDIaLuIjqtEs8FS3BKkoUhGO6lobxY9NdNUexTniooqkmDqUfUqOMrRsQGiq8Zi
         TX1eKKT052zwaa5/d9dvS5ZxJ08RDCd+yRiJs=
Received: by 10.140.139.3 with SMTP id m3mr5218519rvd.44.1220475390043;
        Wed, 03 Sep 2008 13:56:30 -0700 (PDT)
Received: by 10.140.192.19 with HTTP; Wed, 3 Sep 2008 13:56:30 -0700 (PDT)
Message-ID: <c68e39170809031356r11eb387apff24a9411d183b31@mail.gmail.com>
Date: Wed, 3 Sep 2008 16:56:30 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org, java-dev@lucene.apache.org
Subject: Re: Realtime Search for Social Networks Collaboration
In-Reply-To: <85d3c3b60809031220t206bdf42m3026d4fbb6f7d3dd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <85d3c3b60809031220t206bdf42m3026d4fbb6f7d3dd@mail.gmail.com>
X-Google-Sender-Auth: 31bd21d4c6684952
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Sep 3, 2008 at 3:20 PM, Jason Rutherglen
<jason.rutherglen@gmail.com> wrote:
> I am wondering
> if there are social networks (or anyone else) out there who would be
> interested in collaborating with Apache on realtime search to get it
> to the point it can be used in production.

Good timing Jason, I think you'll find some other people right here
at Apache (solr-dev) that want to collaborate in this area:

http://www.nabble.com/solr2%3A-Onward-and-Upward-td19224805.html

I've looked at your wiki briefly, and all the high level goals/features seem
to really be synergistic with where we are going with Solr2.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 03 21:10:19 2008
Return-Path: <java-user-return-35884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87859 invoked from network); 3 Sep 2008 21:10:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Sep 2008 21:10:19 -0000
Received: (qmail 79653 invoked by uid 500); 3 Sep 2008 21:10:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79628 invoked by uid 500); 3 Sep 2008 21:10:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79617 invoked by uid 99); 3 Sep 2008 21:10:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 14:10:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.27] (HELO smtp-vbr7.xs4all.nl) (194.109.24.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 21:09:11 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr7.xs4all.nl (8.13.8/8.13.8) with ESMTP id m83L9BUv029978
	for <java-user@lucene.apache.org>; Wed, 3 Sep 2008 23:09:11 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Pre-filtering for expensive query
Date: Wed, 3 Sep 2008 23:09:15 +0200
User-Agent: KMail/1.9.9
References: <4EC81374-F485-4A2D-A178-8838235AE6C1@theronge.com> <200808301313.20821.paul.elschot@xs4all.nl> <2C396FF4-74E1-4E62-8408-36C4C9DA8DAA@theronge.com>
In-Reply-To: <2C396FF4-74E1-4E62-8408-36C4C9DA8DAA@theronge.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200809032309.15553.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Op Saturday 30 August 2008 18:22:50 schreef Matt Ronge:
> On Aug 30, 2008, at 6:13 AM, Paul Elschot wrote:
> > Op Saturday 30 August 2008 03:34:01 schreef Matt Ronge:
> >> Hi all,
> >>
> >> I am working on implementing a new Query, Weight and Scorer that
> >> is expensive to run. I'd like to limit the number of documents I
> >> run this query on by first building a candidate set of documents
> >> with a boolean query. Once I have that candidate set, I was hoping
> >> I could build a filter off of it, and issue that along with my
> >> expensive query. However, after reading the code I see that
> >> filtering is done during the search, and not before hand.
> >
> > Correct. I suppose you mean the filtering code in IndexSearcher?
>
> Yes, that's exactly what I mean.

As Grant pointed out, this code was recently changed
by LUCENE-584.
I was referring to the (current trunk) code including this
change that uses skipTo() on a DocIdSetIterator obtained
from the Filter. Sorry for any confusion on this.

Regards,
Paul Elschot



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 03 22:11:13 2008
Return-Path: <java-user-return-35885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34394 invoked from network); 3 Sep 2008 22:11:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Sep 2008 22:11:12 -0000
Received: (qmail 74927 invoked by uid 500); 3 Sep 2008 22:11:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74898 invoked by uid 500); 3 Sep 2008 22:11:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74887 invoked by uid 99); 3 Sep 2008 22:11:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 15:11:04 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.12.216.205] (HELO theronge.com) (69.12.216.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 22:10:05 +0000
Received: from [10.96.51.14] (unknown [72.36.94.29])
	(Authenticated sender: mronge)
	by theronge.com (Postfix) with ESMTP id 5F06864475
	for <java-user@lucene.apache.org>; Wed,  3 Sep 2008 15:10:04 -0700 (PDT)
Message-Id: <6B48D002-B866-4489-A458-7B142D6C3C87@theronge.com>
From: Matt Ronge <mronge@theronge.com>
To: java-user@lucene.apache.org
In-Reply-To: <200809032309.15553.paul.elschot@xs4all.nl>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Pre-filtering for expensive query
Date: Wed, 3 Sep 2008 17:10:02 -0500
References: <4EC81374-F485-4A2D-A178-8838235AE6C1@theronge.com> <200808301313.20821.paul.elschot@xs4all.nl> <2C396FF4-74E1-4E62-8408-36C4C9DA8DAA@theronge.com> <200809032309.15553.paul.elschot@xs4all.nl>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


On Sep 3, 2008, at 4:09 PM, Paul Elschot wrote:

> Op Saturday 30 August 2008 18:22:50 schreef Matt Ronge:
>> On Aug 30, 2008, at 6:13 AM, Paul Elschot wrote:
>>> Op Saturday 30 August 2008 03:34:01 schreef Matt Ronge:
>>>> Hi all,
>>>>
>>>> I am working on implementing a new Query, Weight and Scorer that
>>>> is expensive to run. I'd like to limit the number of documents I
>>>> run this query on by first building a candidate set of documents
>>>> with a boolean query. Once I have that candidate set, I was hoping
>>>> I could build a filter off of it, and issue that along with my
>>>> expensive query. However, after reading the code I see that
>>>> filtering is done during the search, and not before hand.
>>>
>>> Correct. I suppose you mean the filtering code in IndexSearcher?
>>
>> Yes, that's exactly what I mean.
>
> As Grant pointed out, this code was recently changed
> by LUCENE-584.
> I was referring to the (current trunk) code including this
> change that uses skipTo() on a DocIdSetIterator obtained
> from the Filter. Sorry for any confusion on this.

That clears things up alot :)
I kept looking at the code trying to figure out how it didn't filter  
after scoring. I'll download the latest code and look.

Thanks,
--
Matt

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 03 22:51:21 2008
Return-Path: <java-user-return-35886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64189 invoked from network); 3 Sep 2008 22:51:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Sep 2008 22:51:21 -0000
Received: (qmail 23395 invoked by uid 500); 3 Sep 2008 22:51:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23332 invoked by uid 500); 3 Sep 2008 22:51:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23310 invoked by uid 99); 3 Sep 2008 22:51:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 15:51:06 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 22:50:05 +0000
Received: by yx-out-2324.google.com with SMTP id 3so1428372yxj.5
        for <java-user@lucene.apache.org>; Wed, 03 Sep 2008 15:50:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:cc:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=YgyjHfAdpivs7tee04bzCqTVCpWE4wRwcxh67FnpcZ0=;
        b=mUOpuXv3aIOXJDYPc/F8Gx8ydUwbZ5Gx2CNnAqkxDOjLfz02jOgD4VquakYJ1ZQOxx
         UD+9XXl1jmZe1do9jOMhx1vXIJ4MHz1Hxl1NAis/caFYzAQqe1Cme97rYYqqbjT4+IIQ
         gzrN4gF5fPZ6Np1JEoOHx0m3Va4xtEzr42IXw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:cc:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=Cw0LNMBPx1LRrZo8zmfYO+1Z7MUhYAVPWS1cHOlQhQ/nrUpJXaPhoAhViyrSYSHpLu
         FQVTFE1ZLQFK9/yTj1JsSYJmbCOxJS2zn4+zUqcHaY+m8Cy5JGiQ70pDd4K6xFX+Uho0
         UT5U1CXaV0q8pMkbeM9Y39AnHsPOQoEnLvHKU=
Received: by 10.150.219.18 with SMTP id r18mr13260991ybg.114.1220482234887;
        Wed, 03 Sep 2008 15:50:34 -0700 (PDT)
Received: by 10.151.118.7 with HTTP; Wed, 3 Sep 2008 15:50:34 -0700 (PDT)
Message-ID: <85d3c3b60809031550jc4d6edeu999ab0c7858129f2@mail.gmail.com>
Date: Wed, 3 Sep 2008 18:50:34 -0400
From: "Jason Rutherglen" <jason.rutherglen@gmail.com>
To: solr-dev@lucene.apache.org, solr-user@lucene.apache.org
Subject: Re: Realtime Search for Social Networks Collaboration
Cc: java-user@lucene.apache.org, java-dev@lucene.apache.org
In-Reply-To: <c68e39170809031356r11eb387apff24a9411d183b31@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <85d3c3b60809031220t206bdf42m3026d4fbb6f7d3dd@mail.gmail.com>
	 <c68e39170809031356r11eb387apff24a9411d183b31@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Yonik,

The SOLR 2 list looks good.  The question is, who is going to do the
work?  I tried to simplify the scope of Ocean as much as possible to
make it possible (and slowly at that over time) for me to eventually
finish what is mentioned on the wiki.  I think SOLR is very cool and
was   major step forward when it came out.  I also think it's got a
lot of things now which makes integration difficult to do properly.  I
did try to integrate and received a lukewarm response and so decided
to just move ahead separately until folks have time to collaborate.
We probably should try to integrate SOLR and Ocean somehow however we
may want to simply reduce the scope a bit and figure what is needed
most, with the main use case being social networks.

I think the problem with integration with SOLR is it was designed with
a different problem set in mind than Ocean, originally the CNET
shopping application.  Facets were important, realtime was not needed
because pricing doesn't change very often.  I designed Ocean for
social networks and actually further into the future realtime
messaging based mobile applications.

SOLR needs to be backward compatible and support it's existing user
base.  How do you plan on doing this for a SOLR 2 if the architecture
is changed dramatically?  SOLR solves a problem set that is very
common making SOLR very useful in many situations.  However I wanted
Ocean to be like GData.  So I wanted the scalability of Google which
SOLR doesn't quite have yet, and the realtime, and then I figured the
other stuff could be added later, stuff people seem to spend a lot of
time on in the SOLR community currently (spellchecker, db imports,
many others).  I did use some of the SOLR terminology in building
Ocean, like snapshots!  But most of it is a digression.  I tried to
use schemas, but they just make the system harder to use.  For
distributed search I prefer serialized objects as this enables things
like SpanQueries and payloads without writing request handlers and
such.  Also there is no need to write new request handlers and deploy
(an expensive operation for systems that are in the 100s of servers)
them as any new classes are simply dynamically loaded by the server
from the client.

A lot is now outlined on the wiki site
http://wiki.apache.org/lucene-java/OceanRealtimeSearch now and there
will be a lot more javadocs in the forthcoming patch.  The latest code
is also available all the time at
http://oceansearch.googlecode.com/svn/trunk/trunk/oceanlucene

I do welcome more discussion and if there are Solr developers who wish
to work on Ocean feel free to drop me a line.  Most of all though I
think it would be useful for social networks interested in realtime
search to get involved as it may be something that is difficult for
one company to have enough resources to implement to a production
level.  I think this is where open source collaboration is
particularly useful.

Cheers,

Jason Rutherglen
jason.rutherglen@gmail.com

On Wed, Sep 3, 2008 at 4:56 PM, Yonik Seeley <yonik@apache.org> wrote:
> On Wed, Sep 3, 2008 at 3:20 PM, Jason Rutherglen
> <jason.rutherglen@gmail.com> wrote:
>> I am wondering
>> if there are social networks (or anyone else) out there who would be
>> interested in collaborating with Apache on realtime search to get it
>> to the point it can be used in production.
>
> Good timing Jason, I think you'll find some other people right here
> at Apache (solr-dev) that want to collaborate in this area:
>
> http://www.nabble.com/solr2%3A-Onward-and-Upward-td19224805.html
>
> I've looked at your wiki briefly, and all the high level goals/features seem
> to really be synergistic with where we are going with Solr2.
>
> -Yonik
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-dev-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 03 22:59:36 2008
Return-Path: <java-user-return-35887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72226 invoked from network); 3 Sep 2008 22:59:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Sep 2008 22:59:36 -0000
Received: (qmail 37876 invoked by uid 500); 3 Sep 2008 22:59:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37847 invoked by uid 500); 3 Sep 2008 22:59:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37836 invoked by uid 99); 3 Sep 2008 22:59:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 15:59:28 -0700
X-ASF-Spam-Status: No, hits=3.1 required=10.0
	tests=HTML_MESSAGE,MIME_HTML_MOSTLY,MPART_ALT_DIFF,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tmoreira@liferay.com designates 208.70.128.105 as permitted sender)
Received: from [208.70.128.105] (HELO smtp-gw79.mailanyone.net) (208.70.128.105)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 22:58:28 +0000
Received: from mailanyone.net
	by smtp-gw79.mailanyone.net with esmtpa (MailAnyone extSMTP liferay.com.192874)
	id 1Kb1JQ-0002oO-PP
	for java-user@lucene.apache.org; Wed, 03 Sep 2008 17:58:57 -0500
Received: from 127.0.0.1
        (MailAnyone web AccountID 253596)
        by webmail.fusemail.com with HTTP;
        Wed, 3 Sep 2008 17:58:55 -0500 (CDT)
Message-ID: <1220482735.v2.mailanyonewebmail-253596@fuse49>
Date: Wed, 3 Sep 2008 17:58:55 -0500 (CDT)
Subject: Re: Similarity percentage between two Strings
From: "Thiago Moreira" <tmoreira@liferay.com>
To: java-user@lucene.apache.org
Reply-To: tmoreira@liferay.com
User-Agent: MailAnyone W
MIME-Version: 1.0
Content-Type: multipart/mixed;charset=utf-8;
     boundary="----=_20080903175855_83472"
X-Priority: 3
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

------=_20080903175855_83472
Content-Type: multipart/alternative;
	boundary="----=_20080903175855_12689"

------=_20080903175855_12689
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: 8bit

------=_20080903175855_12689
Content-Type: text/html; charset="utf-8"
Content-Transfer-Encoding: 8bit


<div class="PrivateMsgDiv"><!--{12204825972380}-->



  
  

<div class="bodyclass" style="color: rgb(0, 0, 0);">
<br>
&nbsp;&nbsp;&nbsp; Well, the similar definition that I'm looking for is the number 2,
maybe the number 3, but to start the number 2 is enough. If you guys
think that is not a Lucene problem what else tool can I use to
implement this requirement??<br>
<br>
&nbsp;&nbsp;&nbsp; Thanks<br>
<div class="moz-signature">
<hr align="center" color="silver" noshade="noshade" size="2" width="100%"><span style="font-size: 11pt; font-family: Arial; color: rgb(95, 95, 95);">Thiago
Moreira<br>
Software Engineer</span><br>
<span style="font-size: 11pt; font-family: Arial; color: rgb(65, 107, 169);" lang="EN-US"><a href="mailto:tmoreira@liferay.com" _fcksavedurl="mailto:tmoreira@liferay.com" target="_new"><span style="color: rgb(65, 107, 169); text-decoration: none;" lang="EN-US">tmoreira@liferay.com</span></a></span><br>
<a href="http://www.liferay.com" _fcksavedurl="http://www.liferay.com" target="_new"><span style="font-size: 11pt; font-family: Arial; color: rgb(65, 107, 169);" lang="EN-US">Liferay, Inc.</span></a><br>
<span style="font-size: 11pt; font-family: Arial; color: rgb(65, 107, 169);" lang="EN-US">Enterprise. Open Source. For Life.</span><br>
</div>
<br>
<br>
N. Hira wrote:
<blockquote cite="mid:AD20DC10-16EE-4341-95C4-8EAB7F75D739@cognocys.com" type="cite">I don't know how much of this is a Lucene problem, but --
as I'm sure you will inevitably hear from others on the list -- it
depends on what your definition of "similar" is.
  <br>
  <br>
By similar, do you mean:
  <br>
1.&nbsp; Identical, except for variations in case (upper/lower)
  <br>
2.&nbsp; Allow 1., but also allow prefixes/suffixes (e.g., "FW:&nbsp; " or "...
(summary")
  <br>
3.&nbsp; Allow 1., 2. and permit some new terms ... how many?
  <br>
4.&nbsp; Allow all of the above and allow some changes to terms using
stemming (E.g., "Google releases Chrome" is similar to "Google
announces the release of its new Chrome web browser")
  <br>
....
  <br>
  <br>
I'm sure you see where this is going.&nbsp; So ... how do you define
similar?
  <br>
  <br>
Good luck!
  <br>
  <br>
-h
  <br>
----------------------------------------------------------------------
  <br>
Hira, N.R.
  <br>
Cognocys, Inc.
  <br>
  <br>
On 03-Sep-2008, at 2:52 PM, Thiago Moreira wrote:
  <br>
  <br>
  <blockquote type="cite"><br>
&nbsp;&nbsp;&nbsp; Hey all,
    <br>
    <br>
&nbsp;&nbsp;&nbsp; I want to know how much two Strings are similar! The thing is: I'm
processing an email box and I want to group all messages that have the
subject similar, makes sense?? I looked on the documentation but I
didn't find how to accomplish this. It's not necessary add the messages
or the subjects on some kind of index. I'm using 2.3.2 version of
Lucene.
    <br>
    <br>
&nbsp;&nbsp;&nbsp; Anyone has some idea?
    <br>
    <br>
&nbsp;&nbsp;&nbsp; Thanks in advance.
    <br>
--&nbsp;<br>
Thiago Moreira
    <br>
Software Engineer
    <br>
<a class="moz-txt-link-abbreviated" href="mailto:tmoreira@liferay.com" _fcksavedurl="mailto:tmoreira@liferay.com" target="_new">tmoreira@liferay.com</a>
    <br>
Liferay, Inc.
    <br>
Enterprise. Open Source. For Life.
    <br>
---------------------------------------------------------------------
    <br>
To unsubscribe, e-mail: <a class="moz-txt-link-abbreviated" href="mailto:java-user-unsubscribe@lucene.apache.org" _fcksavedurl="mailto:java-user-unsubscribe@lucene.apache.org" target="_new">java-user-unsubscribe@lucene.apache.org</a>
    <br>
For additional commands, e-mail: <a class="moz-txt-link-abbreviated" href="mailto:java-user-help@lucene.apache.org" _fcksavedurl="mailto:java-user-help@lucene.apache.org" target="_new">java-user-help@lucene.apache.org</a>
    <br>
  </blockquote>
  <br>
  <br>
  <br>
---------------------------------------------------------------------
  <br>
To unsubscribe, e-mail: <a class="moz-txt-link-abbreviated" href="mailto:java-user-unsubscribe@lucene.apache.org" _fcksavedurl="mailto:java-user-unsubscribe@lucene.apache.org" target="_new">java-user-unsubscribe@lucene.apache.org</a>
  <br>
For additional commands, e-mail: <a class="moz-txt-link-abbreviated" href="mailto:java-user-help@lucene.apache.org" _fcksavedurl="mailto:java-user-help@lucene.apache.org" target="_new">java-user-help@lucene.apache.org</a>
  <br>
  <br>
  <br>
</blockquote>
</div>


<!--{12204825972381}-->
</div>
------=_20080903175855_12689--

------=_20080903175855_83472
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------=_20080903175855_83472--


From java-user-return-35888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 03 23:32:57 2008
Return-Path: <java-user-return-35888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98185 invoked from network); 3 Sep 2008 23:32:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Sep 2008 23:32:57 -0000
Received: (qmail 59838 invoked by uid 500); 3 Sep 2008 23:32:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59811 invoked by uid 500); 3 Sep 2008 23:32:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59800 invoked by uid 99); 3 Sep 2008 23:32:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 16:32:48 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [68.142.206.160] (HELO n21.bullet.mail.mud.yahoo.com) (68.142.206.160)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 03 Sep 2008 23:31:48 +0000
Received: from [68.142.200.225] by n21.bullet.mail.mud.yahoo.com with NNFMP; 03 Sep 2008 23:30:57 -0000
Received: from [68.142.201.248] by t6.bullet.mud.yahoo.com with NNFMP; 03 Sep 2008 23:31:01 -0000
Received: from [127.0.0.1] by omp409.mail.mud.yahoo.com with NNFMP; 03 Sep 2008 23:31:01 -0000
X-Yahoo-Newman-Id: 531389.59284.bm@omp409.mail.mud.yahoo.com
Received: (qmail 26695 invoked from network); 3 Sep 2008 23:31:01 -0000
Received: from unknown (HELO ?192.168.1.100?) (nhira@cognocys.com@75.168.29.95 with plain)
  by smtp128.plus.mail.mud.yahoo.com with SMTP; 3 Sep 2008 23:31:01 -0000
X-YMail-OSG: Wa4YTTEVM1kjNAf6DcDUhyFcCmkmNTlihI8vh1xm79kd_c7S.J73R9VpQTcB8Ax_gHMInKhxjN7oFFX2KIGsn4l11aiw.z1yVZ8hx2P6ep_r2YRQTavWz429eFCADRr_jSuARZxU23kWey7CaHS6wyxP
X-Yahoo-Newman-Property: ymail-3
In-Reply-To: <1220482735.v2.mailanyonewebmail-253596@fuse49>
References: <1220482735.v2.mailanyonewebmail-253596@fuse49>
Mime-Version: 1.0 (Apple Message framework v753.1)
X-Priority: 3
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <13739F5E-91A2-4CAF-966C-FDB7A7CC9508@cognocys.com>
Content-Transfer-Encoding: 7bit
From: "N. Hira" <nhira@cognocys.com>
Subject: Re: Similarity percentage between two Strings
Date: Wed, 3 Sep 2008 18:30:46 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753.1)
X-Virus-Checked: Checked by ClamAV on apache.org

More details may change my opinion (not quite sure how others feel  
yet), but with the way you've described it so far, it seems like all  
you need is a basic string matcher:

For every message:
	- if <blah>message.subject<blah> is found in the pool, then this  
message is "similar to" the message in the pool
	- if no such message could be found, then this message add it to the  
pool and wait to find more like it

Please describe the problem in greater detail if this seems too  
simplistic.

-h

On 03-Sep-2008, at 5:58 PM, Thiago Moreira wrote:

>
>     Well, the similar definition that I'm looking for is the number  
> 2, maybe the number 3, but to start the number 2 is enough. If you  
> guys think that is not a Lucene problem what else tool can I use to  
> implement this requirement??
>
>     Thanks
> Thiago Moreira
> Software Engineer
> tmoreira@liferay.com
> Liferay, Inc.
> Enterprise. Open Source. For Life.
>
>
> N. Hira wrote:
>>
>> I don't know how much of this is a Lucene problem, but -- as I'm  
>> sure you will inevitably hear from others on the list -- it  
>> depends on what your definition of "similar" is.
>>
>> By similar, do you mean:
>> 1.  Identical, except for variations in case (upper/lower)
>> 2.  Allow 1., but also allow prefixes/suffixes (e.g., "FW:  " or  
>> "... (summary")
>> 3.  Allow 1., 2. and permit some new terms ... how many?
>> 4.  Allow all of the above and allow some changes to terms using  
>> stemming (E.g., "Google releases Chrome" is similar to "Google  
>> announces the release of its new Chrome web browser")
>> ....
>>
>> I'm sure you see where this is going.  So ... how do you define  
>> similar?
>>
>> Good luck!
>>
>> -h
>> --------------------------------------------------------------------- 
>> -
>> Hira, N.R.
>> Cognocys, Inc.
>>
>> On 03-Sep-2008, at 2:52 PM, Thiago Moreira wrote:
>>
>>>
>>>     Hey all,
>>>
>>>     I want to know how much two Strings are similar! The thing  
>>> is: I'm processing an email box and I want to group all messages  
>>> that have the subject similar, makes sense?? I looked on the  
>>> documentation but I didn't find how to accomplish this. It's not  
>>> necessary add the messages or the subjects on some kind of index.  
>>> I'm using 2.3.2 version of Lucene.
>>>
>>>     Anyone has some idea?
>>>
>>>     Thanks in advance.
>>> -- 
>>> Thiago Moreira
>>> Software Engineer
>>> tmoreira@liferay.com
>>> Liferay, Inc.
>>> Enterprise. Open Source. For Life.
>>>





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 01:05:24 2008
Return-Path: <java-user-return-35889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75814 invoked from network); 4 Sep 2008 01:05:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 01:05:24 -0000
Received: (qmail 42053 invoked by uid 500); 4 Sep 2008 01:05:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42030 invoked by uid 500); 4 Sep 2008 01:05:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42004 invoked by uid 99); 4 Sep 2008 01:05:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 18:05:15 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of need4spd@gmail.com designates 209.85.128.190 as permitted sender)
Received: from [209.85.128.190] (HELO fk-out-0910.google.com) (209.85.128.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 01:04:15 +0000
Received: by fk-out-0910.google.com with SMTP id 18so2380636fkq.5
        for <java-user@lucene.apache.org>; Wed, 03 Sep 2008 18:04:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=vBqdU5kIO43heOuCM2f3hJUoJtEqangIm2t2/nUbcuo=;
        b=o03xwFoBg+2O/Gt7kZfBZNLfiJPm5DERbkDUdqeg6PTRLCAk5A7BJWC6BqymrlzUhT
         hiwMLVsGrDkEHDN1vFRo/q47ocNDTkQr8dySNNUxWqhwWhh2k/D1X9HXveS2PxgZ+VWV
         vSAzk03hWmMFqKifcMBv1uKsSbOZvODGyT1gM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=fMRpwCD1kXjG90sxqpQbVkvbn16mdJIRItHdqcs4lybtJQHOLgFsLfoyGcNGIbIbDN
         9R3rRA71YEP+2f0OJ3iqburk3pQ21rpWLU4otiluBbgaYRMFyuz4ES7kYKEQ2XhKcu84
         nWmAQEbBi6GbqGrNWwjbdL9PH8HaZeY8m7iR0=
Received: by 10.180.234.10 with SMTP id g10mr7485254bkh.16.1220490275019;
        Wed, 03 Sep 2008 18:04:35 -0700 (PDT)
Received: by 10.181.7.9 with HTTP; Wed, 3 Sep 2008 18:04:33 -0700 (PDT)
Message-ID: <a823853a0809031804q38058d0ekcedc5f5d45f04307@mail.gmail.com>
Date: Thu, 4 Sep 2008 10:04:33 +0900
From: "=?EUC-KR?B?wOW/67yu?=" <need4spd@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Memory Leak
In-Reply-To: <19294053.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_22168_2986510.1220490273977"
References: <19276999.post@talk.nabble.com>
	 <a823853a0809021812r4e8c3972g32531c311af21609@mail.gmail.com>
	 <19294053.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_22168_2986510.1220490273977
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: base64
Content-Disposition: inline

SW4gZmFjdCwgSSB0aGluayB0aGF0IHRoZSBpbXBvcnRhbnQgcmVhc29ucyBhcmUgRGlyZWN0b3J5
IGNsYXNzIGFuZCBBbmFseXplcgpjbGFzcy4KSWYgeW91IGRvbid0IHdhbnQgSW5kZXhTZWFyY2hl
ciBjbGFzcyBrZWVwIG9wZW4gZm9yIHRoZSBlbnRpcmUgbGlmZSBvZiBhIHdlYgphcHBsaWNhdGlv
biwgeW91IGNhbiBkbyBpdC4KSSB0aGluayBJdCB3aWxsIG5vdCBjYXVzZSBtZW1vcnkgbGVhayBw
cm9ibGVtLgpCdXQsIERpcmVjdG9yeSBhbmQgQW5hbHl6ZXIgY2xhc3NlcyBjYW4gY2F1c2UgdGhl
IHByb2JsZW0gaWYgdGhleSBuZXcKY3JlYXRlZCBieSBtZXRob2QgY2FsbCBldmVyeSB0aW1lLiBJ
IHRoaW5rLi4uCk9ubHkga2VlcCB0d28gY2xhc3NlcyBEaXJlY3RvcnkgYW5kIEFuYWx5emVyIGJ5
IHNpbmdsdG9uIGFuZCBkbyB0ZXN0LiA6KQoKCgoKMjAwOC85LzQsIEFuZHkzMyA8Y2xldmVyX29u
ZTNAeWFob28uY29tPjoKPgo+Cj4gSSB0b29rIHlvdXIgYWR2aWNlIGFuZCBjcmVhdGVkIFNpbmds
ZXRvbnMgZm9yIHRoZSBEaXJlY3RvcnksIEFuYWx5emVyLCBhbmQKPiBJbmRleFNlYXJjaGVyIGNs
YXNzZXMuIEkgYWxzbyB1bmRpZCB0aGUgY2xvc2luZyBvZiB0aGUgRGlyZWN0b3J5IGFuZAo+IElu
ZGV4U2VhcmNoZXIuIFRoaXMgc2VlbWVkIHRvIGZpeCBteSBtZW1vcnkgbGVhayBwcm9ibGVtLiBI
b3dldmVyLCBJIGRvbid0Cj4gbGlrZSB0aGUgZmFjdCB0aGF0IEkgYW0gbGVhdmluZyBvcGVuIHRo
ZSBJbmRleFNlYXJjaGVyIGZvciB0aGUgZW50aXJlIGxpZmUKPiBvZiBhIHdlYiBhcHBsaWNhdGlv
bi4gV2hlbiBJIGNsb3NlIHRoZSBJbmRleFNlYXJjaGVyLCB0aGUgdW5kZXJseWluZwo+IEluZGV4
UmVhZGVyIGlzIGFsc28gY2xvc2VkLiBJdCBsb29rcyBsaWtlIHRoZSBvbmx5IHdheSBJIGNhbiBy
ZW9wZW4gdGhlCj4gSW5kZXhTZWFyY2hlciBpcyB0byByZW9wZW4gdGhlIEluZGV4UmVhZGVyIGFu
ZCBjcmVhdGUgYSBuZXcgSW5kZXhTZWFyY2hlci4KPiBUaGlzIGxlYWRzIG1lIGJhY2sgdG8gbXkg
b3JpZ2luYWwgcHJvYmxlbS4KPgo+IElzIHRoZXJlIGEgYmV0dGVyIHdheSB0byBoYW5kbGUgdGhp
cyByYXRoZXIgdGhhbiBrZWVwaW5nIHRoZSBJbmRleFNlYWNoZXIKPiBvcGVuIGZvciB0aGUgbGlm
ZSBvZiB0aGUgYXBwbGljYXRpb24/Cj4KPgo+Cj4gwOW/67yuIHdyb3RlOgo+ID4KPiA+IEkgdGhp
bmsgd2hlbiB5b3VyIGRvUXVlcnkgbWV0aG9kIGlzIHJ1biwgRGlyZWN0b3J5IGFuZCBBbmFseXpl
ciBjbGFzc2VzCj4gPiBhcmUKPiA+IG5ldyBjcmVhdGUgZXZlcnkgdGltZS4KPiA+IElmIGluZGV4
IGZpbGUncyBzaXplIGlzIHZlcnkgbGFyZ2UgdGhlbiBjcmVhdGUgbmV3IERpcmVjdG9yeSBpbnN0
YW5jZSBpcwo+ID4gcHJlc3N1cmUgdG8ganZtIGFuZCBpdCB0YWtlcyBsb25nIHRpbWUgZm9yIGNy
ZWF0ZSBuZXcgRGlyZWN0b3J5IGluc3RhbmNlLgo+ID4gSSBzdWdnZXN0IHRoYXQgbW9kaWZ5IHRo
ZSBjb2RlICwgQW5hbHl6ZXIgY2xhc3MgYW5kIERpcmVjdG9yeSBjbGFzcyB0aGF0Cj4gPiBzaW5n
bGV0b25lIHBhdHRlcm4uCj4gPiAoSWYgeW91IGNhbi4uLi5TZWFyY2ggQ2xhc3MsdG9vKQo+ID4K
Pgo+IC0tCj4gVmlldyB0aGlzIG1lc3NhZ2UgaW4gY29udGV4dDoKPiBodHRwOi8vd3d3Lm5hYmJs
ZS5jb20vTHVjZW5lLU1lbW9yeS1MZWFrLXRwMTkyNzY5OTlwMTkyOTQwNTMuaHRtbAo+IFNlbnQg
ZnJvbSB0aGUgTHVjZW5lIC0gSmF2YSBVc2VycyBtYWlsaW5nIGxpc3QgYXJjaGl2ZSBhdCBOYWJi
bGUuY29tLgo+Cj4KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZh
LXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPiBGb3IgYWRkaXRpb25hbCBjb21t
YW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+Cj4KCgotLSAK
REVWv+u9xApodHRwOi8vZGV2eW9uZ3Npay50aXN0b3J5LmNvbQo=
------=_Part_22168_2986510.1220490273977--

From java-user-return-35890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 01:20:42 2008
Return-Path: <java-user-return-35890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91714 invoked from network); 4 Sep 2008 01:20:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 01:20:42 -0000
Received: (qmail 51040 invoked by uid 500); 4 Sep 2008 01:20:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51013 invoked by uid 500); 4 Sep 2008 01:20:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51000 invoked by uid 99); 4 Sep 2008 01:20:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 18:20:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 01:19:35 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 7DA2271C78C; Wed,  3 Sep 2008 18:20:05 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 5E4B671C781
	for <java-user@lucene.apache.org>; Wed,  3 Sep 2008 18:20:05 -0700 (PDT)
Date: Wed, 3 Sep 2008 18:20:05 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Re: search for empty field?
In-Reply-To: <6e3ae6310809020123k4ce4aeb8hbeedd51ca9073262@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0809031817530.15609@radix.cryptio.net>
References: <6e3ae6310809020123k4ce4aeb8hbeedd51ca9073262@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org




I don't think << category:* >> does what you think it does.

category:[* TO *] will find all docs that have any indexed tokens in the 
category field, so combining that as a prohibited clause with a 
mandatory MatchAllDocsQuery will give you all docs that don't have 
anything indexed in the category field....

                *:* -category:[* TO *]

(although i can't remember if *:* is a Solr extension of part of hte core 
QueryParser)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 05:17:17 2008
Return-Path: <java-user-return-35891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49770 invoked from network); 4 Sep 2008 05:17:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 05:17:17 -0000
Received: (qmail 25664 invoked by uid 500); 4 Sep 2008 05:17:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25633 invoked by uid 500); 4 Sep 2008 05:17:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25622 invoked by uid 99); 4 Sep 2008 05:17:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 22:17:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of noble.paul@gmail.com designates 74.125.78.27 as permitted sender)
Received: from [74.125.78.27] (HELO ey-out-2122.google.com) (74.125.78.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 05:16:11 +0000
Received: by ey-out-2122.google.com with SMTP id 6so1398119eyi.53
        for <java-user@lucene.apache.org>; Wed, 03 Sep 2008 22:16:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=T4Nn61Nt/fMA+pZp7z5Xy+15LJTiNleGINYwuVlSfDc=;
        b=DTUeWi8UdT47C081sy3sNTTxFP2DelhEOUDQaWNAwRTX70Fqdel9gvWoSqfu5CwN0C
         9gqiCJg5Xk3HyoafiDPc0/2UwlHaIjIgTF2vkSJFfz0buiPdkF1Wou5b3RV0B3gWzCl+
         8qPOckCY5lT9m97qIBUUCpZSCbxiLxXPId/NY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=gbbtwU+Udb6RaUm8OL2pS1EqMNWZtrwqO3leLwXlcuZKUk9KFzKyrkxieXYWnxfWzY
         UEWbTiBe6zae9FuIjcODNclFW+u5O2u33D1mJ2euci9z74Hfg3lZwgi+a9gv2dNvaBEU
         izxrcF967MbDbn+VnQUjzS17n4w8gyjcXUYVU=
Received: by 10.210.43.10 with SMTP id q10mr2805590ebq.120.1220505401274;
        Wed, 03 Sep 2008 22:16:41 -0700 (PDT)
Received: by 10.210.60.3 with HTTP; Wed, 3 Sep 2008 22:16:41 -0700 (PDT)
Message-ID: <5e76b0ad0809032216v759b914aj476f4f668bbe074c@mail.gmail.com>
Date: Thu, 4 Sep 2008 10:46:41 +0530
From: "=?UTF-8?B?Tm9ibGUgUGF1bCDgtKg=?= =?UTF-8?B?4LWL4LSs4LS/4LSz4LWN4oCNIOCkqOCli+CkrOCljeCks+CljQ==?=" <noble.paul@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: getTimestamp method in IndexCommit
In-Reply-To: <E4D0F226-7C86-473D-AEF5-AB374EB83A8D@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <36a9c1920809010306y4cb4722cx176a19798c7f8700@mail.gmail.com>
	 <64338149-209B-4033-A120-122DF1D95913@mikemccandless.com>
	 <5e76b0ad0809030043q742e959qbd96cc6747918d6d@mail.gmail.com>
	 <E4D0F226-7C86-473D-AEF5-AB374EB83A8D@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

T24gV2VkLCBTZXAgMywgMjAwOCBhdCAyOjA2IFBNLCBNaWNoYWVsIE1jQ2FuZGxlc3MKPGx1Y2Vu
ZUBtaWtlbWNjYW5kbGVzcy5jb20+IHdyb3RlOgo+Cj4gTm9ibGUgUGF1bCDgtKjgtYvgtKzgtL/g
tLPgtY3igI0g4KSo4KWL4KSs4KWN4KSz4KWNIHdyb3RlOgo+Cj4+IE9uIFR1ZSwgU2VwIDIsIDIw
MDggYXQgMTo1NiBQTSwgTWljaGFlbCBNY0NhbmRsZXNzCj4+IDxsdWNlbmVAbWlrZW1jY2FuZGxl
c3MuY29tPiB3cm90ZToKPj4+Cj4+PiBBcmUgeW91IHRoaW5raW5nIHRoaXMgd291bGQganVzdCBm
YWxsYmFjayB0byBEaXJlY3RvcnkuZmlsZU1vZGlmaWVkIG9uCj4+PiB0aGUKPj4+IHNlZ21lbnRz
X04gZmlsZSBmb3IgdGhhdCBjb21taXQ/Cj4+Pgo+Pj4gWW91IGNvdWxkIGFjdHVhbGx5IGRvIHRo
YXQgd2l0aG91dCBhbnkgQVBJIGNoYW5nZSwgYmVjYXVzZSBJbmRleENvbW1pdAo+Pj4gZXhwb3Nl
cyBhIGdldFNlZ21lbnRzRmlsZU5hbWUoKS4KPj4KPj4gSWYgaXQgaXMgYSBSQU1EaXJlY3Rvcnkg
aG93IGNhbiB3ZSBnZXQgdGhlIGxhc3Rtb2RpZmllZD8KPgo+IFJBTURpcmVjdG9yeSB3aWxsIHJl
cG9ydCB0aGUgU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCkgd2hlbiB0aGUgZmlsZSB3YXMKPiBs
YXN0IGNoYW5nZWQuICBJcyB0aGF0IG5vdCBzdWZmaWNpZW50Pwo+Cj4+IElzbid0IGl0IGEgbG90
IG9mIG92ZXJoZWFkIHRvIHJlYWQgdGhlIGZpbGUgbW9kaWZpZWQgdGltZSBldmVyeXRpbWUKPj4g
dGhlIHRpbWVzdGFtcCBpcyB0b2JlIG9idGFpbmVkPwo+Cj4gSSB3b3VsZCB0aGluayB0aGlzIG1l
dGhvZCBkb2VzIG5vdCBuZWVkIHRvIGJlIHN1cGVyIGZhc3QgLS0gaG93IGZyZXF1ZW50bHkKPiBh
cmUgeW91IHBsYW5uaW5nIHRvIGNhbGwgaXQ/Ck9ubHkgZHVyaW5nIGEgb25Db21taXQoKSBvciBh
IG9uSW5pdCgpLiBTbyBpZiB0aGUgY29tbWl0IHBvaW50IGlzCnBhc3NlZCBvdmVyIG11bHRpcGxl
IHRpbWVzIGl0IHdvdWxkIGNhbGwgdGhpcyBhcyBtYW55IHRpbWVzLk5vdCBhIGJpZwpkZWFsIGlu
IHRlcm1zIG9mIHBlcmZvcm1hbmNlLiBCdXQgaXQgaXMgc3RpbGwgc29tZSAzLTQgbGluZXMgb2Yg
Y29kZQp3aGljaCBjb3VsZCB2ZXJ5IHdlbGwgYmUgYWRkZWQgdG8gdGhlIEFQSSBhbmQgZXhwb3Nl
ZCBhcyBhIG1ldGhvZApnZXRUaW1lc3RhbXAoKQoKPgo+IE5vdGUgdGhhdCB0aGUgc2VnbWVudHNf
TiBmaWxlIGhhcyBubyBvdGhlciBtZWFucyBvZiBleHRyYWN0aW5nIGEgdGltZXN0YW1wCj4gZm9y
IGl0c2VsZjsgaXQgZG9lcyBub3Qgc3RvcmUgYSB0aW1lc3RhbXAgaW50ZXJuYWxseSBvciBhbnl0
aGluZy4KPgo+IE1pa2UKPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBq
YXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPiBGb3IgYWRkaXRpb25hbCBj
b21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+Cj4KCgoK
LS0gCi0tTm9ibGUgUGF1bAo=


From java-user-return-35892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 05:23:11 2008
Return-Path: <java-user-return-35892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55315 invoked from network); 4 Sep 2008 05:23:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 05:23:11 -0000
Received: (qmail 28963 invoked by uid 500); 4 Sep 2008 05:23:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28937 invoked by uid 500); 4 Sep 2008 05:23:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28926 invoked by uid 99); 4 Sep 2008 05:23:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Sep 2008 22:23:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of noble.paul@gmail.com designates 74.125.78.25 as permitted sender)
Received: from [74.125.78.25] (HELO ey-out-2122.google.com) (74.125.78.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 05:22:04 +0000
Received: by ey-out-2122.google.com with SMTP id 6so1398902eyi.53
        for <java-user@lucene.apache.org>; Wed, 03 Sep 2008 22:22:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=b4ZvgKrGOOFb4a1bvZXX6hAiqTjGSO9f2wxvq170Vl8=;
        b=biriX8v1Ehi+qhpDskHGPlIBZyTctRaPpWIkwHxah0mZjhNOCEpnE+liRA+wo0kZr9
         kECz2T4W8aFuVZ1tMUXl9eft1J1bN8YdcKH5JelsOoBjnH+rdXxnJP/aTFv6PkPTdwGj
         q/SkvwrDoijnm3uKSIv+H769BIVn1kZ+p/Wfk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=O2FzCGdNp0zsiwv55FClzEdBl22G4A3x2Sji2r5otIu2mK2E0OGx7J2NZaW9upjQKa
         b8uSXwUVYC6b0Wbhyyb3kGOxn/c3XEf79yaySA/rvkzU8P9cEE6moyHHpk8+n/Yqtw/b
         YzqN14L4GlLcMeL15NkysbsTFdSXVtQULIWCk=
Received: by 10.210.86.10 with SMTP id j10mr11315302ebb.42.1220505737348;
        Wed, 03 Sep 2008 22:22:17 -0700 (PDT)
Received: by 10.210.60.3 with HTTP; Wed, 3 Sep 2008 22:22:17 -0700 (PDT)
Message-ID: <5e76b0ad0809032222l6bdbe192r8fc521bfd8f5f9ee@mail.gmail.com>
Date: Thu, 4 Sep 2008 10:52:17 +0530
From: "=?UTF-8?B?Tm9ibGUgUGF1bCDgtKg=?= =?UTF-8?B?4LWL4LSs4LS/4LSz4LWN4oCNIOCkqOCli+CkrOCljeCks+CljQ==?=" <noble.paul@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How can we know if 2 lucene indexes are same?
In-Reply-To: <C7CBD3C0-F1AD-42B3-91A5-1B3262B44EED@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <5e76b0ad0808290235w45f762e3i2a476e8fe132dfb4@mail.gmail.com>
	 <C7CBD3C0-F1AD-42B3-91A5-1B3262B44EED@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

VGhlIHVzZSBjYXNlIGlzIGFzIGZvbGxvd3MKCkkgaGF2ZSB0d28gaW5kZXhlcyAuIE9uZSBhdCB0
aGUgbWFzdGVyIGFuZCBvbmUgYXQgdGhlIHNsYXZlLiBUaGUgdXNlcgpvY2Nhc2lvbmFsbHkga2Vl
cHMgY29tbWl0dGluZyBvbiB0aGUgbWFzdGVyIGFuZCB0aGUgZGVsdGEgaXMKcmVwbGljYXRlZCBl
dmVyeXRpbWUuIEJ1dCB3aGVuIHRoZSBvcHRpbWl6ZSBoYXBwZW5zIHRoZSB0cmFuc2ZlciBzaXpl
CmNhbiBiZSByZWFsbHkgbGFyZ2UuIFNvIEkgYW0gdGhpbmtpbmcgb2YgIGRvaW5nIHRoZSBvcHRp
bWl6ZQpzZXBhcmF0ZWx5IG9uIG1hc3RlciBhbmQgc2xhdmUgLgoKU28gZmFyLCBzbyBnb29kLiBC
dXQgaG93IGNhbiBJIHJlYWxseSBrbm93IHRoYXQgYWZ0ZXIgdGhlIG9wdGltaXplIHRoZQppbmRl
eGVzIGFyZSBpbmRlZWQgdGhlIHNhbWUgb3Igbm8gZG9jdW1lbnRzIGdvdCBhZGRlZCBpbiBiZXR3
ZWVuLj8KCgoKT24gRnJpLCBBdWcgMjksIDIwMDggYXQgMzoxMyBQTSwgS2FybCBXZXR0aW4gPGth
cmwud2V0dGluQGdtYWlsLmNvbT4gd3JvdGU6Cj4KPiAyOSBhdWcgMjAwOCBrbC4gMTEuMzUgc2ty
ZXYgTm9ibGUgUGF1bCDgtKjgtYvgtKzgtL/gtLPgtY3igI0g4KSo4KWL4KSs4KWN4KSz4KWNOgo+
Cj4+IGhpLAo+PiBJIHdpc2ggdG8ga25vdyBpZiB0aGUgY29udGVudHMgb2YgdHdvIGluZGV4ZXMg
aGF2ZSBzYW1lIGRhdGEuCj4+IHdpbGwgYWxsIHRoZSBmaWxlcyBiZSBleGFjdGx5IHNhbWUgaWYg
SSBwdXQgc2FtZSBzZXQgb2YgZG9jdW1lbnRzIHRvIGJvdGg/Cj4KPiBJZiB5b3UgaW5zZXJ0IHRo
ZSBkb2N1bWVudHMgaW4gdGhlIHNhbWUgb3JkZXIgd2l0aCB0aGUgc2FtZSBzZXR0aW5ncyBhbmQK
PiBib3RoIGluZGljZXMgYXJlIG9wdGltaXplZCwgdGhlbiB0aGUgZmlsZXMgb3VnaHQgdG8gYmUg
aWRlbnRpdGljYWwuIEknbQo+IGhvd2V2ZXIgbm90IHN1cmUuCj4KPiBUaGUgaW5zdGFudGlhdGVk
IGluZGV4IGNvbnRyaWIgbW9kdWxlIGNvbnRhaW5zIGEgdGVzdCB0aGF0IGFzc2VydCB0d28gaW5k
ZXgKPiByZWFkZXJzIGFyZSBpZGVudGljYWwuIFlvdSBjb3VsZCB1c2UgdGhpcyB0byBiZSByZWFs
bHkgc3VyZSwgYnV0IGl0IGl0IGEKPiByYXRoZXIgbG9uZyBydW5uaW5nIHByb2Nlc3MgZm9yIGEg
bGFyZ2UgaW5kZXg6Cj4KPiBodHRwOi8vc3ZuLmFwYWNoZS5vcmcvcmVwb3MvYXNmL2x1Y2VuZS9q
YXZhL3RydW5rL2NvbnRyaWIvaW5zdGFudGlhdGVkL3NyYy90ZXN0L29yZy9hcGFjaGUvbHVjZW5l
L3N0b3JlL2luc3RhbnRpYXRlZC9UZXN0SW5kaWNlc0VxdWFscy5qYXZhCj4KPgo+IFBlcmhhcHMg
eW91IHNob3VsZCBleHBsYWluIHdoeSB5b3UgbmVlZCB0byBkbyB0aGlzLgo+Cj4KPiAgICAgICAg
ICBrYXJsCj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2Vy
LXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMs
IGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcKPgo+CgoKCi0tIAotLU5v
YmxlIFBhdWwK


From java-user-return-35893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 07:18:40 2008
Return-Path: <java-user-return-35893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14840 invoked from network); 4 Sep 2008 07:18:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 07:18:39 -0000
Received: (qmail 28200 invoked by uid 500); 4 Sep 2008 07:18:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28172 invoked by uid 500); 4 Sep 2008 07:18:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28161 invoked by uid 99); 4 Sep 2008 07:18:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 00:18:31 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.litwan@wyona.com designates 195.226.6.75 as permitted sender)
Received: from [195.226.6.75] (HELO server1.example.com) (195.226.6.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 07:17:32 +0000
Received: from [192.168.1.56] (unknown [195.226.6.66])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by server1.example.com (Postfix) with ESMTP id A30CE10C9FE
	for <java-user@lucene.apache.org>; Thu,  4 Sep 2008 09:26:28 +0200 (CEST)
Message-ID: <48BF8B87.8030104@wyona.com>
Date: Thu, 04 Sep 2008 09:17:27 +0200
From: simon litwan <simon.litwan@wyona.com>
User-Agent: Thunderbird 2.0.0.16 (X11/20080724)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: delete/reset the index
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

hi all

i would like to delete the the index to allow to start reindexing from 
scratch.
is there a way to delete all entries in a index?

any hint is very appreciated.

simon

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 07:26:37 2008
Return-Path: <java-user-return-35894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19581 invoked from network); 4 Sep 2008 07:26:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 07:26:37 -0000
Received: (qmail 34801 invoked by uid 500); 4 Sep 2008 07:26:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34763 invoked by uid 500); 4 Sep 2008 07:26:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34752 invoked by uid 99); 4 Sep 2008 07:26:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 00:26:29 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yeshuangming@gmail.com designates 209.85.217.30 as permitted sender)
Received: from [209.85.217.30] (HELO mail-gx0-f30.google.com) (209.85.217.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 07:25:31 +0000
Received: by gxk11 with SMTP id 11so2910998gxk.5
        for <java-user@lucene.apache.org>; Thu, 04 Sep 2008 00:26:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=9JefBWVllx7XSEr0MGhmCCZ3o9S/h0dU+fnAAxcH4zE=;
        b=OPwa8RTc+5MtdBCbTx0OlwnQcV56uUWA5QWk3vUb5hONJs3S9KgY1hGg/RUdlVdUyK
         c/VBbGBwXtFS3FEdBy7zZ2hV+9x7IPqRTqqDloCxKBHLFXy2vFFtm6u1kf4w/czXQuz/
         36AEcljjAI/aMMnBKBYu5a+mBH08AsV0GgWsY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Jy9HduP2+PCtfva6DD9/D/Mc5nP7fVcLPggyF8JQ5qUQXjqV0eN8cSqI0mnMUDvJ7v
         VRG8rIkqXWySPKimGyFpXgJ4e5JiDJ8MzcPwQIp330kp5uG/Ty8mMxGWABPtIbdgG8+j
         e8i8ya4DXCLCr7RjMtx7Y78c5nc0+P41Ak77s=
Received: by 10.150.217.14 with SMTP id p14mr13943241ybg.56.1220513161524;
        Thu, 04 Sep 2008 00:26:01 -0700 (PDT)
Received: by 10.151.84.5 with HTTP; Thu, 4 Sep 2008 00:26:01 -0700 (PDT)
Message-ID: <9233ccac0809040026v17e7bac9k5d10e4f4b97891d6@mail.gmail.com>
Date: Thu, 4 Sep 2008 15:26:01 +0800
From: "=?GB2312?B?0rbLq8P3?=" <yeshuangming@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: delete/reset the index
In-Reply-To: <48BF8B87.8030104@wyona.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28508_27760120.1220513161512"
References: <48BF8B87.8030104@wyona.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_28508_27760120.1220513161512
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Delete the index Directory in File System, I think this is the simpliest!!!

2008/9/4 simon litwan <simon.litwan@wyona.com>

> hi all
>
> i would like to delete the the index to allow to start reindexing from
> scratch.
> is there a way to delete all entries in a index?
>
> any hint is very appreciated.
>
> simon
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_28508_27760120.1220513161512--

From java-user-return-35895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 08:20:47 2008
Return-Path: <java-user-return-35895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44002 invoked from network); 4 Sep 2008 08:20:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 08:20:47 -0000
Received: (qmail 95080 invoked by uid 500); 4 Sep 2008 08:20:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95040 invoked by uid 500); 4 Sep 2008 08:20:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95029 invoked by uid 99); 4 Sep 2008 08:20:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 01:20:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.132.243 as permitted sender)
Received: from [209.85.132.243] (HELO an-out-0708.google.com) (209.85.132.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 08:19:40 +0000
Received: by an-out-0708.google.com with SMTP id c37so498598anc.49
        for <java-user@lucene.apache.org>; Thu, 04 Sep 2008 01:20:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=09+nBCw41oZ7Vc1xV7yluAIkotDj4fScajPmtVwY51g=;
        b=vfzrKkcDmm/NyeIH1Gtp6Qgq8AacuK5d9ZDgbQVm9bMJ4c66O480BFAMScvLST6W2+
         rqHBe0p+itvIicynYgjUB5l7alsad9Bp9e03X6mFWCt8PGTqxt/SvOdcBThLPg0ivegP
         nlNvomwJ+vku0ZOT9AnrbxztIdcXYDpGjg95w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=hATNQk4E2yDbb5k1oyD0Ng0UwdbpaHu+Z3hDKkiM3+4WRr8hYCZCHWDQtCrtb6n4l1
         9mVZg9fNbpzl8zfFPwyFGD+BnJNdVlqXCjJW2kYj2F3pKfOnpcgiqIGluNa0dMiYQmJU
         y9apr5VDhEBscP32MtZn9idHVS2pmmDCwKxzg=
Received: by 10.100.132.2 with SMTP id f2mr10307699and.141.1220516411284;
        Thu, 04 Sep 2008 01:20:11 -0700 (PDT)
Received: by 10.100.132.7 with HTTP; Thu, 4 Sep 2008 01:20:11 -0700 (PDT)
Message-ID: <8c4e68610809040120l26bc49f0s89af049d81e2b4f7@mail.gmail.com>
Date: Thu, 4 Sep 2008 09:20:11 +0100
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org, tmoreira@liferay.com
Subject: Re: Similarity percentage between two Strings
In-Reply-To: <1220482735.v2.mailanyonewebmail-253596@fuse49>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1220482735.v2.mailanyonewebmail-253596@fuse49>
X-Virus-Checked: Checked by ClamAV on apache.org

Googling for "java string similarity" throws up some stuff you might
find useful.


--
Ian.


On Wed, Sep 3, 2008 at 11:58 PM, Thiago Moreira <tmoreira@liferay.com> wrote:
>
>     Well, the similar definition that I'm looking for is the number 2, maybe
> the number 3, but to start the number 2 is enough. If you guys think that is
> not a Lucene problem what else tool can I use to implement this
> requirement??
>
>     Thanks
> ________________________________
> Thiago Moreira
> Software Engineer
> tmoreira@liferay.com
> Liferay, Inc.
> Enterprise. Open Source. For Life.
>
>
> N. Hira wrote:
>
> I don't know how much of this is a Lucene problem, but -- as I'm sure you
> will inevitably hear from others on the list -- it depends on what your
> definition of "similar" is.
>
> By similar, do you mean:
> 1.  Identical, except for variations in case (upper/lower)
> 2.  Allow 1., but also allow prefixes/suffixes (e.g., "FW:  " or "...
> (summary")
> 3.  Allow 1., 2. and permit some new terms ... how many?
> 4.  Allow all of the above and allow some changes to terms using stemming
> (E.g., "Google releases Chrome" is similar to "Google announces the release
> of its new Chrome web browser")
> ....
>
> I'm sure you see where this is going.  So ... how do you define similar?
>
> Good luck!
>
> -h
> ----------------------------------------------------------------------
> Hira, N.R.
> Cognocys, Inc.
>
> On 03-Sep-2008, at 2:52 PM, Thiago Moreira wrote:
>
>
>     Hey all,
>
>     I want to know how much two Strings are similar! The thing is: I'm
> processing an email box and I want to group all messages that have the
> subject similar, makes sense?? I looked on the documentation but I didn't
> find how to accomplish this. It's not necessary add the messages or the
> subjects on some kind of index. I'm using 2.3.2 version of Lucene.
>
>     Anyone has some idea?
>
>     Thanks in advance.
> --
> Thiago Moreira
> Software Engineer
> tmoreira@liferay.com
> Liferay, Inc.
> Enterprise. Open Source. For Life.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 08:22:09 2008
Return-Path: <java-user-return-35896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44809 invoked from network); 4 Sep 2008 08:22:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 08:22:09 -0000
Received: (qmail 97393 invoked by uid 500); 4 Sep 2008 08:22:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97009 invoked by uid 500); 4 Sep 2008 08:22:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96998 invoked by uid 99); 4 Sep 2008 08:22:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 01:22:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 08:21:00 +0000
Received: from [192.168.0.220] ([81.219.54.251])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id m848KW505468
	for <java-user@lucene.apache.org>; Thu, 4 Sep 2008 03:20:32 -0500
Message-ID: <48BF9A35.60400@getopt.org>
Date: Thu, 04 Sep 2008 10:20:05 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Pre-filtering for expensive query
References: <4EC81374-F485-4A2D-A178-8838235AE6C1@theronge.com> <48B99C0C.3070909@getopt.org> <0D9CD1D3-444C-4372-B9B5-ED84D48341C1@apache.org>
In-Reply-To: <0D9CD1D3-444C-4372-B9B5-ED84D48341C1@apache.org>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Grant Ingersoll wrote:
> 
> On Aug 30, 2008, at 3:14 PM, Andrzej Bialecki wrote:

>>
>> I think you can use a FilteredQuery in a BooleanClause. This may be 
>> faster than the filtering code in the Searcher, because the evaluation 
>> is done during scoring and not afterwards. FilteredQuery internally makes
> 
> 
> FYI, not sure if this is exactly what you are talking about Andrzej, but 
> IndexSearcher no longer filters after scoring.  This was changed in 
> https://issues.apache.org/jira/browse/LUCENE-584

Ah, indeed - I was working with 2.3.0 release ... then there should be 
no visible performance difference if using the trunk version of 
IndexSearcher.

The only difference now between the IndexSearcher method and 
ConjunctionScorer would be when the supplied filter would match many 
documents. IndexSearcher always runs skipTo on the filter first, so 
potentially it would stop at many docIds that aren't matching in the 
scorer - whereas the ConjunctionScorer tries to order sub-scorers so 
that "sparse" scorers are checked first.

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 08:47:23 2008
Return-Path: <java-user-return-35897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56846 invoked from network); 4 Sep 2008 08:47:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 08:47:23 -0000
Received: (qmail 21689 invoked by uid 500); 4 Sep 2008 08:47:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21661 invoked by uid 500); 4 Sep 2008 08:47:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21650 invoked by uid 99); 4 Sep 2008 08:47:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 01:47:14 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 08:46:15 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KbAUH-0006TT-6i
	for java-user@lucene.apache.org; Thu, 04 Sep 2008 01:46:45 -0700
Message-ID: <19306087.post@talk.nabble.com>
Date: Thu, 4 Sep 2008 01:46:45 -0700 (PDT)
From: bogdan71 <bogdan.pisai@gmail.com>
To: java-user@lucene.apache.org
Subject: QueryParser vs. BooleanQuery
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: bogdan.pisai@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


  Hello,

  I am experiencing a strange behaviour when trying to query the same thing
via
BooleanQuery vs. via the know-it-all QueryParser class. Precisely, the index
contains
the document:
   "12,Visual C++,4.2" with the field layout: ID,name,version(thus, "12" is
the ID field, "Visual C++"
is the name field and "4.2" is the version field). 
  The search string is "Visual C++" for the name field.

  The following test, using QueryParser, goes fine:

public final void testUsingQueryParser()
	{
		IndexSearcher recordSearcher;
		Query q;
		QueryParser parser = new QueryParser("name", new StandardAnalyzer());
		try
		{
		       q = parser.parse("name:visual +name:c++");
		    
		        Directory directory =
FSDirectory.getDirectory(<some_path_to_index>); 
			recordSearcher = new IndexSearcher(directory);	
			
			Hits h = recordSearcher.search(q);
			
			assertEquals(1, h.length());
			assertEquals(12, Integer.parseInt(h.doc(0).get("ID")));
		}
		catch(Exception exn)
		{
			fail("Exception occurred.");
		}
	}

  But this one, using a BooleanQuery, fails.

public final void testUsingTermQuery()
	{
		IndexSearcher recordSearcher;
		BooleanQuery bq = new BooleanQuery();
		
		bq.add(new TermQuery(new Term("name", "visual")),
BooleanClause.Occur.SHOULD);
		bq.add(new TermQuery(new Term("name", "c++")), BooleanClause.Occur.MUST);
		
		try
		{   
		        Directory directory =
FSDirectory.getDirectory(<some_path_to_index>); 
			recordSearcher = new IndexSearcher(directory);	
			
			Hits h = recordSearcher.search(bq);
			
			assertEquals(1, h.length());   // fails, saying it expects 0 !!!
			assertEquals(12, Integer.parseInt(h.doc(0).get("ID")));
		}
		catch(Exception exn)
		{
			fail("Eexception occurred.");
		}	
	}

   Rewriting the BooleanQuery and taking toString() yields the same String
given to QueryParser.parse() in the first test. I am using Lucene 2.3.0. Can
somebody explain the difference ?
-- 
View this message in context: http://www.nabble.com/QueryParser-vs.-BooleanQuery-tp19306087p19306087.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 09:10:21 2008
Return-Path: <java-user-return-35898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67682 invoked from network); 4 Sep 2008 09:10:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 09:10:21 -0000
Received: (qmail 64865 invoked by uid 500); 4 Sep 2008 09:10:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64837 invoked by uid 500); 4 Sep 2008 09:10:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64820 invoked by uid 99); 4 Sep 2008 09:10:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 02:10:12 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yeshuangming@gmail.com designates 209.85.217.30 as permitted sender)
Received: from [209.85.217.30] (HELO mail-gx0-f30.google.com) (209.85.217.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 09:09:14 +0000
Received: by gxk11 with SMTP id 11so2935918gxk.5
        for <java-user@lucene.apache.org>; Thu, 04 Sep 2008 02:08:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=8WfY9kYIeB9ZwuKv14G1zo45eSGo5JOIPE6ufAvc67U=;
        b=M1GJ5FDgjrh21yeo2DRFTgsipcCc7K+wcRSeyIQCMTVdaqQzo10BLMs3htwWbWY1ME
         yMEC6KRkF3nN42qHjwU4by79oiRG60rMek+R/XCF5SlMZXE8gFvdRcNN99G8mpwCbAe5
         +7GCBqhZX/Y6PQo44RH8qsOvQbsSeqa3fD+mw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=lcDtg1e5lEdz67xe4amuvsh94CP2SAxfK2pDw9FWO+NqvHZAXEf8w39JVYOhRX64b3
         1Fw7Ith7nRCmU5gDfL0r6EXGHmj/tAW2O+LxcAXjzB62HdqV5x4a2bZld/gTgAQggCZt
         n2I8bfWgYIpTh1pgO++zn717CFwlW0zHU+QRA=
Received: by 10.151.147.16 with SMTP id z16mr14066177ybn.169.1220519324323;
        Thu, 04 Sep 2008 02:08:44 -0700 (PDT)
Received: by 10.151.84.5 with HTTP; Thu, 4 Sep 2008 02:08:44 -0700 (PDT)
Message-ID: <9233ccac0809040208k6c5117desd698944b888d000e@mail.gmail.com>
Date: Thu, 4 Sep 2008 17:08:44 +0800
From: "=?GB2312?B?0rbLq8P3?=" <yeshuangming@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How can we know if 2 lucene indexes are same?
In-Reply-To: <5e76b0ad0809032222l6bdbe192r8fc521bfd8f5f9ee@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_29208_4934877.1220519324310"
References: <5e76b0ad0808290235w45f762e3i2a476e8fe132dfb4@mail.gmail.com>
	 <C7CBD3C0-F1AD-42B3-91A5-1B3262B44EED@gmail.com>
	 <5e76b0ad0809032222l6bdbe192r8fc521bfd8f5f9ee@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_29208_4934877.1220519324310
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

Tm8gZG9jdW1lbnRzIGNhbiBhZGRlZCBpbnRvIGluZGV4IHdoZW4gdGhlIGluZGV4IGlzIG9wdGlt
aXppbmcsICBvcgpvcHRpbWl6aW5nIGNhbid0IHJ1biBkdXJsaW5nIGRvY3VtZW50cyBhZGRpbmcg
dG8gdGhlIGluZGV4LgpTbywgd2l0aG91dCBvdGhlciBlcnJvciwgSSB0aGluayB3ZSBjYW4gYmVs
ZWl2ZSB0aGUgdHdvIGluZGV4IGFyZSBpbmRlZWQgdGhlCnNhbWUuCgo6KQoKMjAwOC85LzQgTm9i
bGUgUGF1bCDgtKjgtYvgtKzgtL/gtLPgtY3igI0g4KSo4KWL4KSs4KWN4KSz4KWNIDxub2JsZS5w
YXVsQGdtYWlsLmNvbT4KCj4gVGhlIHVzZSBjYXNlIGlzIGFzIGZvbGxvd3MKPgo+IEkgaGF2ZSB0
d28gaW5kZXhlcyAuIE9uZSBhdCB0aGUgbWFzdGVyIGFuZCBvbmUgYXQgdGhlIHNsYXZlLiBUaGUg
dXNlcgo+IG9jY2FzaW9uYWxseSBrZWVwcyBjb21taXR0aW5nIG9uIHRoZSBtYXN0ZXIgYW5kIHRo
ZSBkZWx0YSBpcwo+IHJlcGxpY2F0ZWQgZXZlcnl0aW1lLiBCdXQgd2hlbiB0aGUgb3B0aW1pemUg
aGFwcGVucyB0aGUgdHJhbnNmZXIgc2l6ZQo+IGNhbiBiZSByZWFsbHkgbGFyZ2UuIFNvIEkgYW0g
dGhpbmtpbmcgb2YgIGRvaW5nIHRoZSBvcHRpbWl6ZQo+IHNlcGFyYXRlbHkgb24gbWFzdGVyIGFu
ZCBzbGF2ZSAuCj4KPiBTbyBmYXIsIHNvIGdvb2QuIEJ1dCBob3cgY2FuIEkgcmVhbGx5IGtub3cg
dGhhdCBhZnRlciB0aGUgb3B0aW1pemUgdGhlCj4gaW5kZXhlcyBhcmUgaW5kZWVkIHRoZSBzYW1l
IG9yIG5vIGRvY3VtZW50cyBnb3QgYWRkZWQgaW4gYmV0d2Vlbi4/Cj4KPgo+Cj4gT24gRnJpLCBB
dWcgMjksIDIwMDggYXQgMzoxMyBQTSwgS2FybCBXZXR0aW4gPGthcmwud2V0dGluQGdtYWlsLmNv
bT4KPiB3cm90ZToKPiA+Cj4gPiAyOSBhdWcgMjAwOCBrbC4gMTEuMzUgc2tyZXYgTm9ibGUgUGF1
bCDgtKjgtYvgtKzgtL/gtLPgtY3igI0g4KSo4KWL4KSs4KWN4KSz4KWNOgo+ID4KPiA+PiBoaSwK
PiA+PiBJIHdpc2ggdG8ga25vdyBpZiB0aGUgY29udGVudHMgb2YgdHdvIGluZGV4ZXMgaGF2ZSBz
YW1lIGRhdGEuCj4gPj4gd2lsbCBhbGwgdGhlIGZpbGVzIGJlIGV4YWN0bHkgc2FtZSBpZiBJIHB1
dCBzYW1lIHNldCBvZiBkb2N1bWVudHMgdG8KPiBib3RoPwo+ID4KPiA+IElmIHlvdSBpbnNlcnQg
dGhlIGRvY3VtZW50cyBpbiB0aGUgc2FtZSBvcmRlciB3aXRoIHRoZSBzYW1lIHNldHRpbmdzIGFu
ZAo+ID4gYm90aCBpbmRpY2VzIGFyZSBvcHRpbWl6ZWQsIHRoZW4gdGhlIGZpbGVzIG91Z2h0IHRv
IGJlIGlkZW50aXRpY2FsLiBJJ20KPiA+IGhvd2V2ZXIgbm90IHN1cmUuCj4gPgo+ID4gVGhlIGlu
c3RhbnRpYXRlZCBpbmRleCBjb250cmliIG1vZHVsZSBjb250YWlucyBhIHRlc3QgdGhhdCBhc3Nl
cnQgdHdvCj4gaW5kZXgKPiA+IHJlYWRlcnMgYXJlIGlkZW50aWNhbC4gWW91IGNvdWxkIHVzZSB0
aGlzIHRvIGJlIHJlYWxseSBzdXJlLCBidXQgaXQgaXQgYQo+ID4gcmF0aGVyIGxvbmcgcnVubmlu
ZyBwcm9jZXNzIGZvciBhIGxhcmdlIGluZGV4Ogo+ID4KPiA+Cj4gaHR0cDovL3N2bi5hcGFjaGUu
b3JnL3JlcG9zL2FzZi9sdWNlbmUvamF2YS90cnVuay9jb250cmliL2luc3RhbnRpYXRlZC9zcmMv
dGVzdC9vcmcvYXBhY2hlL2x1Y2VuZS9zdG9yZS9pbnN0YW50aWF0ZWQvVGVzdEluZGljZXNFcXVh
bHMuamF2YQo+ID4KPiA+Cj4gPiBQZXJoYXBzIHlvdSBzaG91bGQgZXhwbGFpbiB3aHkgeW91IG5l
ZWQgdG8gZG8gdGhpcy4KPiA+Cj4gPgo+ID4gICAgICAgICAga2FybAo+ID4gLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
Cj4gPiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5l
LmFwYWNoZS5vcmcKPiA+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNl
ci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4gPgo+ID4KPgo+Cj4KPiAtLQo+IC0tTm9ibGUgUGF1
bAo+Cg==
------=_Part_29208_4934877.1220519324310--

From java-user-return-35899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 09:14:14 2008
Return-Path: <java-user-return-35899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68574 invoked from network); 4 Sep 2008 09:14:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 09:14:14 -0000
Received: (qmail 72768 invoked by uid 500); 4 Sep 2008 09:13:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72742 invoked by uid 500); 4 Sep 2008 09:13:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72728 invoked by uid 99); 4 Sep 2008 09:13:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 02:13:54 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.132.248 as permitted sender)
Received: from [209.85.132.248] (HELO an-out-0708.google.com) (209.85.132.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 09:12:54 +0000
Received: by an-out-0708.google.com with SMTP id c37so501715anc.49
        for <java-user@lucene.apache.org>; Thu, 04 Sep 2008 02:13:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=5VqPYvboI784WPNRiUqbdU2dC22HRgpKA5jQSqUvg7c=;
        b=PC1WFGrf/twpIT/oPbsesEEt2oHSiVa2TvIETOA8TNBeIsHI4BMbHaScT0Jh+QJb03
         L1DJJe87EYBBbUqezSqNZ9dZxa0M4khlZpTYYBIHB78qZwG7BHtopmoJoYA9eBwviLno
         ABv5WL2cityRlaSu8h6EuM3F/g9pZ+4DdvkGk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=NvgNpR3s7/HLCE83gmRHM5aEh6mikQ5TSbtTytWGHM4CBPbIU3h6xNheiNXQtDunch
         sv9srWKlNcoN9+fX0ORbj+TzQqO0qKPYnfDudKis81Aa13fbcz02x+8CKReI/vhaTNGi
         /8J7DizIrg9IfdjiLM2ZPHW36115ucz38PaEk=
Received: by 10.100.247.14 with SMTP id u14mr1754868anh.88.1220519603231;
        Thu, 04 Sep 2008 02:13:23 -0700 (PDT)
Received: by 10.100.132.7 with HTTP; Thu, 4 Sep 2008 02:13:23 -0700 (PDT)
Message-ID: <8c4e68610809040213k247c38e8q205521817ff31b51@mail.gmail.com>
Date: Thu, 4 Sep 2008 10:13:23 +0100
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: QueryParser vs. BooleanQuery
In-Reply-To: <19306087.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <19306087.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Have a look at the index with Luke to see what has actually been
indexed. StandardAnalyzer may well be removing the pluses, or you may
need to escape them.  And watch out for case - Visual != visual in
term query land.


--
Ian.


On Thu, Sep 4, 2008 at 9:46 AM, bogdan71 <bogdan.pisai@gmail.com> wrote:
>
>  Hello,
>
>  I am experiencing a strange behaviour when trying to query the same thing
> via
> BooleanQuery vs. via the know-it-all QueryParser class. Precisely, the index
> contains
> the document:
>   "12,Visual C++,4.2" with the field layout: ID,name,version(thus, "12" is
> the ID field, "Visual C++"
> is the name field and "4.2" is the version field).
>  The search string is "Visual C++" for the name field.
>
>  The following test, using QueryParser, goes fine:
>
> public final void testUsingQueryParser()
>        {
>                IndexSearcher recordSearcher;
>                Query q;
>                QueryParser parser = new QueryParser("name", new StandardAnalyzer());
>                try
>                {
>                       q = parser.parse("name:visual +name:c++");
>
>                        Directory directory =
> FSDirectory.getDirectory(<some_path_to_index>);
>                        recordSearcher = new IndexSearcher(directory);
>
>                        Hits h = recordSearcher.search(q);
>
>                        assertEquals(1, h.length());
>                        assertEquals(12, Integer.parseInt(h.doc(0).get("ID")));
>                }
>                catch(Exception exn)
>                {
>                        fail("Exception occurred.");
>                }
>        }
>
>  But this one, using a BooleanQuery, fails.
>
> public final void testUsingTermQuery()
>        {
>                IndexSearcher recordSearcher;
>                BooleanQuery bq = new BooleanQuery();
>
>                bq.add(new TermQuery(new Term("name", "visual")),
> BooleanClause.Occur.SHOULD);
>                bq.add(new TermQuery(new Term("name", "c++")), BooleanClause.Occur.MUST);
>
>                try
>                {
>                        Directory directory =
> FSDirectory.getDirectory(<some_path_to_index>);
>                        recordSearcher = new IndexSearcher(directory);
>
>                        Hits h = recordSearcher.search(bq);
>
>                        assertEquals(1, h.length());   // fails, saying it expects 0 !!!
>                        assertEquals(12, Integer.parseInt(h.doc(0).get("ID")));
>                }
>                catch(Exception exn)
>                {
>                        fail("Eexception occurred.");
>                }
>        }
>
>   Rewriting the BooleanQuery and taking toString() yields the same String
> given to QueryParser.parse() in the first test. I am using Lucene 2.3.0. Can
> somebody explain the difference ?
> --
> View this message in context: http://www.nabble.com/QueryParser-vs.-BooleanQuery-tp19306087p19306087.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 09:16:02 2008
Return-Path: <java-user-return-35900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69020 invoked from network); 4 Sep 2008 09:16:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 09:16:01 -0000
Received: (qmail 86638 invoked by uid 500); 4 Sep 2008 09:15:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86611 invoked by uid 500); 4 Sep 2008 09:15:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86600 invoked by uid 99); 4 Sep 2008 09:15:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 02:15:52 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.246] (HELO an-out-0708.google.com) (209.85.132.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 09:14:54 +0000
Received: by an-out-0708.google.com with SMTP id c37so501830anc.49
        for <java-user@lucene.apache.org>; Thu, 04 Sep 2008 02:15:23 -0700 (PDT)
Received: by 10.100.4.1 with SMTP id 1mr10364726and.149.1220519723817;
        Thu, 04 Sep 2008 02:15:23 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id i12sm15456960wxd.4.2008.09.04.02.15.22
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 04 Sep 2008 02:15:22 -0700 (PDT)
Message-Id: <0490D451-CA4B-42DA-85FF-13AF1FA8B096@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <48BF8B87.8030104@wyona.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: delete/reset the index
Date: Thu, 4 Sep 2008 05:15:21 -0400
References: <48BF8B87.8030104@wyona.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


If you're on Windows, the safest way to do this in general, if there  
is any possibility that readers are still using the index, is to  
create a new IndexWriter with create=true.  Windows does not let you  
remove open files.  IndexWriter will gracefully handle failed deletes  
by retrying them over time...

Mike

simon litwan wrote:

> hi all
>
> i would like to delete the the index to allow to start reindexing  
> from scratch.
> is there a way to delete all entries in a index?
>
> any hint is very appreciated.
>
> simon
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 09:21:22 2008
Return-Path: <java-user-return-35901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70578 invoked from network); 4 Sep 2008 09:21:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 09:21:21 -0000
Received: (qmail 89511 invoked by uid 500); 4 Sep 2008 09:21:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89481 invoked by uid 500); 4 Sep 2008 09:21:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89470 invoked by uid 99); 4 Sep 2008 09:21:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 02:21:13 -0700
X-ASF-Spam-Status: No, hits=3.0 required=10.0
	tests=MIME_QP_LONG_LINE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.246.245] (HELO ag-out-0708.google.com) (72.14.246.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 09:20:13 +0000
Received: by ag-out-0708.google.com with SMTP id 23so6960948agd.11
        for <java-user@lucene.apache.org>; Thu, 04 Sep 2008 02:20:42 -0700 (PDT)
Received: by 10.101.71.9 with SMTP id y9mr10392194ank.145.1220520041955;
        Thu, 04 Sep 2008 02:20:41 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id h13sm15431771wxd.37.2008.09.04.02.20.41
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 04 Sep 2008 02:20:41 -0700 (PDT)
Message-Id: <54A87861-7A1E-409D-B8E8-CF0F5284E0BF@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <9233ccac0809040208k6c5117desd698944b888d000e@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: How can we know if 2 lucene indexes are same?
Date: Thu, 4 Sep 2008 05:20:40 -0400
References: <5e76b0ad0808290235w45f762e3i2a476e8fe132dfb4@mail.gmail.com> <C7CBD3C0-F1AD-42B3-91A5-1B3262B44EED@gmail.com> <5e76b0ad0809032222l6bdbe192r8fc521bfd8f5f9ee@mail.gmail.com> <9233ccac0809040208k6c5117desd698944b888d000e@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Actually, as of 2.3, this is no longer true: merges and optimizing run =20=

in the background, and allow add/update/delete documents to run at the =20=

same time.

I think it's probably best to use application logic (outside of =20
Lucene) to keep track of what updates happened to the master while the =20=

slave was optimizing.

Mike

=E5=8F=B6=E5=8F=8C=E6=98=8E wrote:

> No documents can added into index when the index is optimizing,  or
> optimizing can't run durling documents adding to the index.
> So, without other error, I think we can beleive the two index are =20
> indeed the
> same.
>
> :)
>
> 2008/9/4 Noble Paul =E0=B4=A8=E0=B5=8B=E0=B4=AC=E0=B4=BF=E0=B4=B3=E0=B5=8D=
=E2=80=8D =E0=A4=A8=E0=A5=8B=E0=A4=AC=E0=A5=8D=E0=A4=B3=E0=A5=8D =20
> <noble.paul@gmail.com>
>
>> The use case is as follows
>>
>> I have two indexes . One at the master and one at the slave. The user
>> occasionally keeps committing on the master and the delta is
>> replicated everytime. But when the optimize happens the transfer size
>> can be really large. So I am thinking of  doing the optimize
>> separately on master and slave .
>>
>> So far, so good. But how can I really know that after the optimize =20=

>> the
>> indexes are indeed the same or no documents got added in between.?
>>
>>
>>
>> On Fri, Aug 29, 2008 at 3:13 PM, Karl Wettin <karl.wettin@gmail.com>
>> wrote:
>>>
>>> 29 aug 2008 kl. 11.35 skrev Noble Paul =E0=B4=A8=E0=B5=8B=E0=B4=AC=E0=B4=
=BF=E0=B4=B3=E0=B5=8D=E2=80=8D =20
>>> =E0=A4=A8=E0=A5=8B=E0=A4=AC=E0=A5=8D=E0=A4=B3=E0=A5=8D:
>>>
>>>> hi,
>>>> I wish to know if the contents of two indexes have same data.
>>>> will all the files be exactly same if I put same set of documents =20=

>>>> to
>> both?
>>>
>>> If you insert the documents in the same order with the same =20
>>> settings and
>>> both indices are optimized, then the files ought to be =20
>>> identitical. I'm
>>> however not sure.
>>>
>>> The instantiated index contrib module contains a test that assert =20=

>>> two
>> index
>>> readers are identical. You could use this to be really sure, but =20
>>> it it a
>>> rather long running process for a large index:
>>>
>>>
>> =
http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/instantiated/src=
/test/org/apache/lucene/store/instantiated/TestIndicesEquals.java
>>>
>>>
>>> Perhaps you should explain why you need to do this.
>>>
>>>
>>>         karl
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>>
>> --
>> --Noble Paul
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 09:25:39 2008
Return-Path: <java-user-return-35902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73014 invoked from network); 4 Sep 2008 09:25:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 09:25:39 -0000
Received: (qmail 95633 invoked by uid 500); 4 Sep 2008 09:25:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95597 invoked by uid 500); 4 Sep 2008 09:25:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95586 invoked by uid 99); 4 Sep 2008 09:25:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 02:25:30 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.246.250] (HELO ag-out-0708.google.com) (72.14.246.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 09:24:31 +0000
Received: by ag-out-0708.google.com with SMTP id 23so6964799agd.11
        for <java-user@lucene.apache.org>; Thu, 04 Sep 2008 02:25:01 -0700 (PDT)
Received: by 10.100.194.5 with SMTP id r5mr10471275anf.2.1220520301209;
        Thu, 04 Sep 2008 02:25:01 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id b32sm18153075ana.34.2008.09.04.02.25.00
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 04 Sep 2008 02:25:00 -0700 (PDT)
Message-Id: <02273594-9E7A-4536-92B3-47F9954ADD6F@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <5e76b0ad0809032216v759b914aj476f4f668bbe074c@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: getTimestamp method in IndexCommit
Date: Thu, 4 Sep 2008 05:24:59 -0400
References: <36a9c1920809010306y4cb4722cx176a19798c7f8700@mail.gmail.com> <64338149-209B-4033-A120-122DF1D95913@mikemccandless.com> <5e76b0ad0809030043q742e959qbd96cc6747918d6d@mail.gmail.com> <E4D0F226-7C86-473D-AEF5-AB374EB83A8D@mikemccandless.com> <5e76b0ad0809032216v759b914aj476f4f668bbe074c@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Noble Paul =E0=B4=A8=E0=B5=8B=E0=B4=AC=E0=B4=BF=E0=B4=B3=E0=B5=8D=E2=80=8D=
 =E0=A4=A8=E0=A5=8B=E0=A4=AC=E0=A5=8D=E0=A4=B3=E0=A5=8D wrote:

> On Wed, Sep 3, 2008 at 2:06 PM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>>
>> Noble Paul =E0=B4=A8=E0=B5=8B=E0=B4=AC=E0=B4=BF=E0=B4=B3=E0=B5=8D=E2=80=
=8D =E0=A4=A8=E0=A5=8B=E0=A4=AC=E0=A5=8D=E0=A4=B3=E0=A5=8D wrote:
>>
>>> On Tue, Sep 2, 2008 at 1:56 PM, Michael McCandless
>>> <lucene@mikemccandless.com> wrote:
>>>>
>>>> Are you thinking this would just fallback to =20
>>>> Directory.fileModified on
>>>> the
>>>> segments_N file for that commit?
>>>>
>>>> You could actually do that without any API change, because =20
>>>> IndexCommit
>>>> exposes a getSegmentsFileName().
>>>
>>> If it is a RAMDirectory how can we get the lastmodified?
>>
>> RAMDirectory will report the System.currentTimeMillis() when the =20
>> file was
>> last changed.  Is that not sufficient?
>>
>>> Isn't it a lot of overhead to read the file modified time everytime
>>> the timestamp is tobe obtained?
>>
>> I would think this method does not need to be super fast -- how =20
>> frequently
>> are you planning to call it?
> Only during a onCommit() or a onInit(). So if the commit point is
> passed over multiple times it would call this as many times.Not a big
> deal in terms of performance. But it is still some 3-4 lines of code
> which could very well be added to the API and exposed as a method
> getTimestamp()

OK I'll commit this -- it's trivial.  It's simply convenience for =20
calling Directory.fileModified.

>>
>> Note that the segments_N file has no other means of extracting a =20
>> timestamp
>> for itself; it does not store a timestamp internally or anything.
>>
>> Mike
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> --=20
> --Noble Paul


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 09:46:38 2008
Return-Path: <java-user-return-35903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85162 invoked from network); 4 Sep 2008 09:46:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 09:46:37 -0000
Received: (qmail 31102 invoked by uid 500); 4 Sep 2008 09:46:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30971 invoked by uid 500); 4 Sep 2008 09:46:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30922 invoked by uid 99); 4 Sep 2008 09:46:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 02:46:25 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of noble.paul@gmail.com designates 66.249.90.180 as permitted sender)
Received: from [66.249.90.180] (HELO ik-out-1112.google.com) (66.249.90.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 09:45:27 +0000
Received: by ik-out-1112.google.com with SMTP id c28so1632508ika.5
        for <java-user@lucene.apache.org>; Thu, 04 Sep 2008 02:45:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=mis+DODHunAb/wDyVp8UwLSaC0KHQLsbqEefNn9GEFk=;
        b=vuQ3jdawoou45dlpSKjX97PVzIgkEjQYzmXLy7bHlHJLxwDnGFeZT2YWBnEqgKR8Kd
         ZmUgBmWQ1ce2JJwAqHKfPTpfd4LHnYKFYG5s4vUJlEmWPe9+D2hv5mBpMUVtCf7IBiUa
         XSFWIlTkiIhQl5Cx07wYmGIu6yjENqHu8QfIU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=Mq6bd4+XbjnNmC2xZ170AiaXdEnIi8s2CVKxosauwhdCsMn0VxrTcLttSlBSyfr6EZ
         j9dRi3nnOcpEq7kot0bspgPGGjLS07Xa2cvjefeFyawgckfUI5RXNBjJI74KW/HBqof9
         EALlCrHnUjdzfvgLdYF8pyNJsYXaE95/vLpTs=
Received: by 10.210.80.2 with SMTP id d2mr1246273ebb.147.1220521540315;
        Thu, 04 Sep 2008 02:45:40 -0700 (PDT)
Received: by 10.210.60.3 with HTTP; Thu, 4 Sep 2008 02:45:40 -0700 (PDT)
Message-ID: <5e76b0ad0809040245l356695ebxeca4e6ff88ac5ad4@mail.gmail.com>
Date: Thu, 4 Sep 2008 15:15:40 +0530
From: "=?UTF-8?B?Tm9ibGUgUGF1bCDgtKg=?= =?UTF-8?B?4LWL4LSs4LS/4LSz4LWN4oCNIOCkqOCli+CkrOCljeCks+CljQ==?=" <noble.paul@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: getTimestamp method in IndexCommit
In-Reply-To: <02273594-9E7A-4536-92B3-47F9954ADD6F@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <36a9c1920809010306y4cb4722cx176a19798c7f8700@mail.gmail.com>
	 <64338149-209B-4033-A120-122DF1D95913@mikemccandless.com>
	 <5e76b0ad0809030043q742e959qbd96cc6747918d6d@mail.gmail.com>
	 <E4D0F226-7C86-473D-AEF5-AB374EB83A8D@mikemccandless.com>
	 <5e76b0ad0809032216v759b914aj476f4f668bbe074c@mail.gmail.com>
	 <02273594-9E7A-4536-92B3-47F9954ADD6F@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

WU9VIEFSRSBGQVNUCnRoYW5rcy4KCi0tTm9ibGUKCk9uIFRodSwgU2VwIDQsIDIwMDggYXQgMjo1
NCBQTSwgTWljaGFlbCBNY0NhbmRsZXNzCjxsdWNlbmVAbWlrZW1jY2FuZGxlc3MuY29tPiB3cm90
ZToKPgo+IE5vYmxlIFBhdWwg4LSo4LWL4LSs4LS/4LSz4LWN4oCNIOCkqOCli+CkrOCljeCks+Cl
jSB3cm90ZToKPgo+PiBPbiBXZWQsIFNlcCAzLCAyMDA4IGF0IDI6MDYgUE0sIE1pY2hhZWwgTWND
YW5kbGVzcwo+PiA8bHVjZW5lQG1pa2VtY2NhbmRsZXNzLmNvbT4gd3JvdGU6Cj4+Pgo+Pj4gTm9i
bGUgUGF1bCDgtKjgtYvgtKzgtL/gtLPgtY3igI0g4KSo4KWL4KSs4KWN4KSz4KWNIHdyb3RlOgo+
Pj4KPj4+PiBPbiBUdWUsIFNlcCAyLCAyMDA4IGF0IDE6NTYgUE0sIE1pY2hhZWwgTWNDYW5kbGVz
cwo+Pj4+IDxsdWNlbmVAbWlrZW1jY2FuZGxlc3MuY29tPiB3cm90ZToKPj4+Pj4KPj4+Pj4gQXJl
IHlvdSB0aGlua2luZyB0aGlzIHdvdWxkIGp1c3QgZmFsbGJhY2sgdG8gRGlyZWN0b3J5LmZpbGVN
b2RpZmllZCBvbgo+Pj4+PiB0aGUKPj4+Pj4gc2VnbWVudHNfTiBmaWxlIGZvciB0aGF0IGNvbW1p
dD8KPj4+Pj4KPj4+Pj4gWW91IGNvdWxkIGFjdHVhbGx5IGRvIHRoYXQgd2l0aG91dCBhbnkgQVBJ
IGNoYW5nZSwgYmVjYXVzZSBJbmRleENvbW1pdAo+Pj4+PiBleHBvc2VzIGEgZ2V0U2VnbWVudHNG
aWxlTmFtZSgpLgo+Pj4+Cj4+Pj4gSWYgaXQgaXMgYSBSQU1EaXJlY3RvcnkgaG93IGNhbiB3ZSBn
ZXQgdGhlIGxhc3Rtb2RpZmllZD8KPj4+Cj4+PiBSQU1EaXJlY3Rvcnkgd2lsbCByZXBvcnQgdGhl
IFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpIHdoZW4gdGhlIGZpbGUgd2FzCj4+PiBsYXN0IGNo
YW5nZWQuICBJcyB0aGF0IG5vdCBzdWZmaWNpZW50Pwo+Pj4KPj4+PiBJc24ndCBpdCBhIGxvdCBv
ZiBvdmVyaGVhZCB0byByZWFkIHRoZSBmaWxlIG1vZGlmaWVkIHRpbWUgZXZlcnl0aW1lCj4+Pj4g
dGhlIHRpbWVzdGFtcCBpcyB0b2JlIG9idGFpbmVkPwo+Pj4KPj4+IEkgd291bGQgdGhpbmsgdGhp
cyBtZXRob2QgZG9lcyBub3QgbmVlZCB0byBiZSBzdXBlciBmYXN0IC0tIGhvdwo+Pj4gZnJlcXVl
bnRseQo+Pj4gYXJlIHlvdSBwbGFubmluZyB0byBjYWxsIGl0Pwo+Pgo+PiBPbmx5IGR1cmluZyBh
IG9uQ29tbWl0KCkgb3IgYSBvbkluaXQoKS4gU28gaWYgdGhlIGNvbW1pdCBwb2ludCBpcwo+PiBw
YXNzZWQgb3ZlciBtdWx0aXBsZSB0aW1lcyBpdCB3b3VsZCBjYWxsIHRoaXMgYXMgbWFueSB0aW1l
cy5Ob3QgYSBiaWcKPj4gZGVhbCBpbiB0ZXJtcyBvZiBwZXJmb3JtYW5jZS4gQnV0IGl0IGlzIHN0
aWxsIHNvbWUgMy00IGxpbmVzIG9mIGNvZGUKPj4gd2hpY2ggY291bGQgdmVyeSB3ZWxsIGJlIGFk
ZGVkIHRvIHRoZSBBUEkgYW5kIGV4cG9zZWQgYXMgYSBtZXRob2QKPj4gZ2V0VGltZXN0YW1wKCkK
Pgo+IE9LIEknbGwgY29tbWl0IHRoaXMgLS0gaXQncyB0cml2aWFsLiAgSXQncyBzaW1wbHkgY29u
dmVuaWVuY2UgZm9yIGNhbGxpbmcKPiBEaXJlY3RvcnkuZmlsZU1vZGlmaWVkLgo+Cj4+Pgo+Pj4g
Tm90ZSB0aGF0IHRoZSBzZWdtZW50c19OIGZpbGUgaGFzIG5vIG90aGVyIG1lYW5zIG9mIGV4dHJh
Y3RpbmcgYQo+Pj4gdGltZXN0YW1wCj4+PiBmb3IgaXRzZWxmOyBpdCBkb2VzIG5vdCBzdG9yZSBh
IHRpbWVzdGFtcCBpbnRlcm5hbGx5IG9yIGFueXRoaW5nLgo+Pj4KPj4+IE1pa2UKPj4+IC0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLQo+Pj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJl
QGx1Y2VuZS5hcGFjaGUub3JnCj4+PiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBq
YXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+Pj4KPj4+Cj4+Cj4+Cj4+Cj4+IC0tCj4+
IC0tTm9ibGUgUGF1bAo+Cj4KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiBUbyB1bnN1YnNjcmliZSwgZS1tYWls
OiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPiBGb3IgYWRkaXRpb25h
bCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+Cj4K
CgoKLS0gCi0tTm9ibGUgUGF1bAo=


From java-user-return-35904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 09:56:34 2008
Return-Path: <java-user-return-35904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90786 invoked from network); 4 Sep 2008 09:56:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 09:56:34 -0000
Received: (qmail 41174 invoked by uid 500); 4 Sep 2008 09:56:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41138 invoked by uid 500); 4 Sep 2008 09:56:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41127 invoked by uid 99); 4 Sep 2008 09:56:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 02:56:25 -0700
X-ASF-Spam-Status: No, hits=3.0 required=10.0
	tests=MIME_QP_LONG_LINE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.240] (HELO an-out-0708.google.com) (209.85.132.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 09:55:27 +0000
Received: by an-out-0708.google.com with SMTP id c37so504209anc.49
        for <java-user@lucene.apache.org>; Thu, 04 Sep 2008 02:55:57 -0700 (PDT)
Received: by 10.100.128.20 with SMTP id a20mr10435628and.153.1220522157129;
        Thu, 04 Sep 2008 02:55:57 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id d35sm19244608and.8.2008.09.04.02.55.56
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 04 Sep 2008 02:55:56 -0700 (PDT)
Message-Id: <E7148C89-DD77-4EC0-8117-92CAE0385356@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <5e76b0ad0809040245l356695ebxeca4e6ff88ac5ad4@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: getTimestamp method in IndexCommit
Date: Thu, 4 Sep 2008 05:55:55 -0400
References: <36a9c1920809010306y4cb4722cx176a19798c7f8700@mail.gmail.com> <64338149-209B-4033-A120-122DF1D95913@mikemccandless.com> <5e76b0ad0809030043q742e959qbd96cc6747918d6d@mail.gmail.com> <E4D0F226-7C86-473D-AEF5-AB374EB83A8D@mikemccandless.com> <5e76b0ad0809032216v759b914aj476f4f668bbe074c@mail.gmail.com> <02273594-9E7A-4536-92B3-47F9954ADD6F@mikemccandless.com> <5e76b0ad0809040245l356695ebxeca4e6ff88ac5ad4@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks for raising it!

It's through requests like this that Lucene's API improves.

Mike

Noble Paul =E0=B4=A8=E0=B5=8B=E0=B4=AC=E0=B4=BF=E0=B4=B3=E0=B5=8D=E2=80=8D=
 =E0=A4=A8=E0=A5=8B=E0=A4=AC=E0=A5=8D=E0=A4=B3=E0=A5=8D wrote:

> YOU ARE FAST
> thanks.
>
> --Noble
>
> On Thu, Sep 4, 2008 at 2:54 PM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>>
>> Noble Paul =E0=B4=A8=E0=B5=8B=E0=B4=AC=E0=B4=BF=E0=B4=B3=E0=B5=8D=E2=80=
=8D =E0=A4=A8=E0=A5=8B=E0=A4=AC=E0=A5=8D=E0=A4=B3=E0=A5=8D wrote:
>>
>>> On Wed, Sep 3, 2008 at 2:06 PM, Michael McCandless
>>> <lucene@mikemccandless.com> wrote:
>>>>
>>>> Noble Paul =E0=B4=A8=E0=B5=8B=E0=B4=AC=E0=B4=BF=E0=B4=B3=E0=B5=8D=E2=80=
=8D =E0=A4=A8=E0=A5=8B=E0=A4=AC=E0=A5=8D=E0=A4=B3=E0=A5=8D wrote:
>>>>
>>>>> On Tue, Sep 2, 2008 at 1:56 PM, Michael McCandless
>>>>> <lucene@mikemccandless.com> wrote:
>>>>>>
>>>>>> Are you thinking this would just fallback to =20
>>>>>> Directory.fileModified on
>>>>>> the
>>>>>> segments_N file for that commit?
>>>>>>
>>>>>> You could actually do that without any API change, because =20
>>>>>> IndexCommit
>>>>>> exposes a getSegmentsFileName().
>>>>>
>>>>> If it is a RAMDirectory how can we get the lastmodified?
>>>>
>>>> RAMDirectory will report the System.currentTimeMillis() when the =20=

>>>> file was
>>>> last changed.  Is that not sufficient?
>>>>
>>>>> Isn't it a lot of overhead to read the file modified time =20
>>>>> everytime
>>>>> the timestamp is tobe obtained?
>>>>
>>>> I would think this method does not need to be super fast -- how
>>>> frequently
>>>> are you planning to call it?
>>>
>>> Only during a onCommit() or a onInit(). So if the commit point is
>>> passed over multiple times it would call this as many times.Not a =20=

>>> big
>>> deal in terms of performance. But it is still some 3-4 lines of code
>>> which could very well be added to the API and exposed as a method
>>> getTimestamp()
>>
>> OK I'll commit this -- it's trivial.  It's simply convenience for =20
>> calling
>> Directory.fileModified.
>>
>>>>
>>>> Note that the segments_N file has no other means of extracting a
>>>> timestamp
>>>> for itself; it does not store a timestamp internally or anything.
>>>>
>>>> Mike
>>>> =
---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>>
>>>
>>> --
>>> --Noble Paul
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> --=20
> --Noble Paul


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 10:30:24 2008
Return-Path: <java-user-return-35905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3185 invoked from network); 4 Sep 2008 10:30:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 10:30:23 -0000
Received: (qmail 78935 invoked by uid 500); 4 Sep 2008 10:30:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78893 invoked by uid 500); 4 Sep 2008 10:30:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78882 invoked by uid 99); 4 Sep 2008 10:30:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 03:30:11 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yeshuangming@gmail.com designates 209.85.217.30 as permitted sender)
Received: from [209.85.217.30] (HELO mail-gx0-f30.google.com) (209.85.217.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 10:29:13 +0000
Received: by gxk11 with SMTP id 11so2962953gxk.5
        for <java-user@lucene.apache.org>; Thu, 04 Sep 2008 03:29:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=WI0tMF0Eh7AVTFzngDkFT63mow3hZl2R7KhdZ6Voh7Y=;
        b=Cj3+DLDFQN3DFOcQo7A1MMtLYyWzPOrD6s4FBm/YAqysJNOC9zowi3xRdsLzfC+Fei
         v/tp5tReww4zyA/MPyCK1+lJmhn/IBCVmlJ2gIN6nbjOnNy+XPVXjHGaxWQwE8TsLJzo
         COwxfuEsdsmLjidmwvG4UtgqL+xyudSAtEoA8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=N9MliVOutpO0K6nPN1woJeEKqqvqnKKpblh59AIWF4g3vFYynIBGkQLBpwkoDW86UZ
         It8TI/IxfaOHV3E0by28Z0fd3gyCxOmCFT8TYjPQ/gMxkf7S4qvUIgVTX96cH0xDoAct
         Tw2Jh3PQVvN3ZhO4ZGfoAHLmtV/7259+7CDVQ=
Received: by 10.151.153.14 with SMTP id f14mr11784762ybo.84.1220524184263;
        Thu, 04 Sep 2008 03:29:44 -0700 (PDT)
Received: by 10.151.84.5 with HTTP; Thu, 4 Sep 2008 03:29:44 -0700 (PDT)
Message-ID: <9233ccac0809040329v27f5190biea4ea8c8241e7ca@mail.gmail.com>
Date: Thu, 4 Sep 2008 18:29:44 +0800
From: "=?GB2312?B?0rbLq8P3?=" <yeshuangming@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: delete/reset the index
In-Reply-To: <0490D451-CA4B-42DA-85FF-13AF1FA8B096@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_29816_25921692.1220524184258"
References: <48BF8B87.8030104@wyona.com>
	 <0490D451-CA4B-42DA-85FF-13AF1FA8B096@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_29816_25921692.1220524184258
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Agree with Michael McCandless!!  By that way,it is handling gracefully.

2008/9/4 Michael McCandless <lucene@mikemccandless.com>

>
> If you're on Windows, the safest way to do this in general, if there is any
> possibility that readers are still using the index, is to create a new
> IndexWriter with create=true.  Windows does not let you remove open files.
>  IndexWriter will gracefully handle failed deletes by retrying them over
> time...
>
> Mike
>
>
> simon litwan wrote:
>
>  hi all
>>
>> i would like to delete the the index to allow to start reindexing from
>> scratch.
>> is there a way to delete all entries in a index?
>>
>> any hint is very appreciated.
>>
>> simon
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_29816_25921692.1220524184258--

From java-user-return-35906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 12:39:15 2008
Return-Path: <java-user-return-35906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66369 invoked from network); 4 Sep 2008 12:39:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 12:39:15 -0000
Received: (qmail 14431 invoked by uid 500); 4 Sep 2008 12:39:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14333 invoked by uid 500); 4 Sep 2008 12:39:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14274 invoked by uid 99); 4 Sep 2008 12:39:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 05:39:01 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.231 as permitted sender)
Received: from [209.85.198.231] (HELO rv-out-0506.google.com) (209.85.198.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 12:38:03 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3961538rvb.5
        for <java-user@lucene.apache.org>; Thu, 04 Sep 2008 05:38:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=UKwlc4zqwxAMkDTTetHdu/QbCPxNq2N8PCc+6Pzelbg=;
        b=NWc/OAOrsOggzO1cvNlKrTrLIv6XBSaRLasp9cwAja0mFyzFFvcMcR0vM0xA14/TgE
         o7jLtkzgkxtgtaBr5zzCEqYOkCzN2PdqA/ToXLtJ7exI4oadaJXvm64P6qHjmMwg0hFy
         3g6relN8T8RdIaRRrj8kW+4juoHq+/WeKD/e0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=dMS1hNC2rwL2D0rZ4RUjue/JdJiDOy3DUcCP0O1kbtvRfLJnNnB9il8jSpqj8cc2jG
         e+QcQF9Cx79g+2Y5qSKlfFZC+C7BqGHpPkx0Yl4OLvuDI0e7/BZTvvzev3c6eGS0DexA
         37BQt0j5fP/dFL1BI0PY85L9Z1Dr6ou3IOH6c=
Received: by 10.140.164.1 with SMTP id m1mr5633466rve.266.1220531914588;
        Thu, 04 Sep 2008 05:38:34 -0700 (PDT)
Received: by 10.141.176.5 with HTTP; Thu, 4 Sep 2008 05:38:34 -0700 (PDT)
Message-ID: <1bcb7c7f0809040538s681fb81aud4e3e2aa19435caf@mail.gmail.com>
Date: Thu, 4 Sep 2008 15:38:34 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: string similarity measures
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_49785_3071652.1220531914589"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_49785_3071652.1220531914589
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,
This came up before but - if we were to make a swear word filter, string
edit distances are no good. for example words like `shot` is confused with
`shit`. there is also problem with words like hitchcock. appearently i need
something like soundex or double metaphone. the thing is - these are
language specific, and i am not operating in english.

I need a fuzzy like curse word filter for turkish, simply.

Best regards,
-C.B.

------=_Part_49785_3071652.1220531914589--

From java-user-return-35907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 13:09:15 2008
Return-Path: <java-user-return-35907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79229 invoked from network); 4 Sep 2008 13:09:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 13:09:14 -0000
Received: (qmail 54991 invoked by uid 500); 4 Sep 2008 13:09:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54359 invoked by uid 500); 4 Sep 2008 13:09:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54348 invoked by uid 99); 4 Sep 2008 13:09:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 06:09:05 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.224 as permitted sender)
Received: from [209.85.198.224] (HELO rv-out-0506.google.com) (209.85.198.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 13:08:05 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3972643rvb.5
        for <java-user@lucene.apache.org>; Thu, 04 Sep 2008 06:08:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=AgMKzOkDRfSZ/rH4F3qqR/iTTOfkeUkQgG3w9sf0mlw=;
        b=wFq1c1DejrLOQp1ssAxpVyo6OARvXufhyR9Rf+HYYUKl0wGhO9hjZlYSKepqsodAMU
         yfNN5SK/eNNWwI/JbiZz2TMWJL9nj3jeRu63ewNQ1ZBmepKlUws0htl8WyulWvawGWMQ
         x5WaNnYPf70gkIGFOz20PQXY5On0PR7FQLlm4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=t3YeWPauyzK+MJd8yO4IzJ+Vzu7EcUMwO4Ynj0cLgtJ/Xp/Dm8bj6u6E3W+zT0arn0
         u+BANaXi7N4mULOi7mzxAGcZ+pDl3DHuasJD/akpUU6nDClfaTVehEYfyCaIKTjIOvUj
         NUB8ucuc6E/wBTUXDp3TWuvKDUiaxT+mOi30E=
Received: by 10.141.5.17 with SMTP id h17mr5695270rvi.8.1220533706606;
        Thu, 04 Sep 2008 06:08:26 -0700 (PDT)
Received: by 10.141.176.5 with HTTP; Thu, 4 Sep 2008 06:08:26 -0700 (PDT)
Message-ID: <1bcb7c7f0809040608m6224438bh28af3a8eca21827f@mail.gmail.com>
Date: Thu, 4 Sep 2008 16:08:26 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Realtime Search for Social Networks Collaboration
In-Reply-To: <85d3c3b60809031220t206bdf42m3026d4fbb6f7d3dd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_50091_7699892.1220533706606"
References: <85d3c3b60809031220t206bdf42m3026d4fbb6f7d3dd@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_50091_7699892.1220533706606
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello Jason,
I have been trying to do this for a long time on my own. keep up the good
work.

What I tried was a document cache using apache collections. and before a
indexwrite/delete i would sync the cache with index.

I am waiting for lucene 2.4 to proceed. (query by delete)

Best.

On Wed, Sep 3, 2008 at 10:20 PM, Jason Rutherglen <
jason.rutherglen@gmail.com> wrote:

> Hello all,
>
> I don't mean this to sound like a solicitation.  I've been working on
> realtime search and created some Lucene patches etc.  I am wondering
> if there are social networks (or anyone else) out there who would be
> interested in collaborating with Apache on realtime search to get it
> to the point it can be used in production.  It is a challenging
> problem that only Google has solved and made to scale.  I've been
> working on the problem for a while and though a lot has been
> completed, there is still a lot more to do and collaboration amongst
> the most probable users (social networks) seems like a good thing to
> try to do at this point.  I guess I'm saying it seems like a hard
> enough problem that perhaps it's best to work together on it rather
> than each company try to complete their own.  However I could be
> wrong.
>
> Realtime search benefits social networks by providing a scalable
> searchable alternative to large Mysql implementations.  Mysql I have
> heard is difficult to scale at a certain point.  Apparently Google has
> created things like BigTable (a large database) and an online service
> called GData (which Google has not published any whitepapers on the
> technology underneath) to address scaling large database systems.
> BigTable does not offer search.   GData does and is used by all of
> Google's web services instead of something like Mysql (this is at
> least how I understand it).  Social networks usually grow and so
> scaling is continually an issue.  It is possible to build a realtime
> search system that scales linearly, something that I have heard
> becomes difficult with Mysql.  There is an article that discusses some
> of these issues
> http://acmqueue.com/modules.php?name=Content&pa=showpage&pid=337  I
> don't think the current GData implementation is perfect and there is a
> lot that can be improved on.  It might be helpful to figure out
> together what helpful things can be added.
>
> If this sounds like something of interest to anyone feel free to send
> your input.
>
> Take care,
> Jason
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_50091_7699892.1220533706606--

From java-user-return-35908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 13:13:36 2008
Return-Path: <java-user-return-35908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80885 invoked from network); 4 Sep 2008 13:13:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 13:13:35 -0000
Received: (qmail 63075 invoked by uid 500); 4 Sep 2008 13:13:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63047 invoked by uid 500); 4 Sep 2008 13:13:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63036 invoked by uid 99); 4 Sep 2008 13:13:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 06:13:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 74.125.78.24 as permitted sender)
Received: from [74.125.78.24] (HELO ey-out-2122.google.com) (74.125.78.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 13:12:28 +0000
Received: by ey-out-2122.google.com with SMTP id 6so1475338eyi.53
        for <java-user@lucene.apache.org>; Thu, 04 Sep 2008 06:12:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=G8bHKiaPbwhEYk8//ildjO1LIi1ZCY8/gJ1wMeKq5aQ=;
        b=VrFj0qK4W6dIe2DSCUPWdO0tnHl8g0khj9l6qHPvk4iyk0CzlrAUcAy7nP8SameVYJ
         ltL98b9xoWI/60lo6g8h+5HaURjbgAzvz0wC7A54jIMKWhh5FpbFQC2lvJ5nbNFI25gR
         g84snkAK/n4S+4oSsLxhZrBJZ7Sd7IxTNvkdY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=LYqIppU8nNuwzEtU9DCGBKEDdW3aKJk0tvr7cfZpaqD/OYQY15oAU1ffoh3LHrX2Wn
         INt4xqttlWKIkfbwPlzwR/Cg7gDIv69uAOfV8zVkFUJSDGLHpvcC1M0i6x/uH8/4iBdh
         TGDKyCPIWMg9HKPtqNEL8spTQe4vlezJpSyHY=
Received: by 10.210.23.3 with SMTP id 3mr11870204ebw.188.1220533961167;
        Thu, 04 Sep 2008 06:12:41 -0700 (PDT)
Received: from kodapan.lan ( [83.249.107.81])
        by mx.google.com with ESMTPS id f6sm57290789nfh.12.2008.09.04.06.12.37
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 04 Sep 2008 06:12:38 -0700 (PDT)
Message-Id: <B23B5A00-EA22-42EC-BEF8-7F102474776F@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <1bcb7c7f0809040538s681fb81aud4e3e2aa19435caf@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: string similarity measures
Date: Thu, 4 Sep 2008 15:12:36 +0200
References: <1bcb7c7f0809040538s681fb81aud4e3e2aa19435caf@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


4 sep 2008 kl. 14.38 skrev Cam Bazz:

> Hello,
> This came up before but - if we were to make a swear word filter,  
> string
> edit distances are no good. for example words like `shot` is  
> confused with
> `shit`. there is also problem with words like hitchcock. appearently  
> i need
> something like soundex or double metaphone. the thing is - these are
> language specific, and i am not operating in english.
>
> I need a fuzzy like curse word filter for turkish, simply.

You probably need to make a large list of words. I would try to learn  
from the users that do swear, perhaps even trust my users to report  
each other. I would probably also look at storing in what context the  
word is used, perhaps by adding the surrounding words (ngrams,  
shingles, markov chains). Compare "go to hell" and "when hell frezes  
over". The first is rather derogatory while the second doen't have to  
be bad at all.

I'm thinking Hidden Markov Models and Neural Networks.


           karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 13:19:34 2008
Return-Path: <java-user-return-35909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84691 invoked from network); 4 Sep 2008 13:19:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 13:19:33 -0000
Received: (qmail 72714 invoked by uid 500); 4 Sep 2008 13:19:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72685 invoked by uid 500); 4 Sep 2008 13:19:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72674 invoked by uid 99); 4 Sep 2008 13:19:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 06:19:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 13:18:26 +0000
Received: by nf-out-0910.google.com with SMTP id g16so652767nfd.15
        for <java-user@lucene.apache.org>; Thu, 04 Sep 2008 06:18:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:x-priority:date:references:x-mailer;
        bh=QtdnQiX1nuy7J/aXtbfe/h/+llrq7XUiAnJRrzNEZ10=;
        b=Bv8PeOsZFQhIbpdjRpCL+cY80NjrFeDbLxJiJe8H4pI6/YnG1C5IrFZLNbsH57dcly
         hvXNxt11VB+PFc6xZwwm57j7AghkXfJglP10dbw0KN3vshGxaWKbOfOxtEDwn0vng/Dq
         gWyDNkcdpdNcAgLJ94g0qgq+XtyJeHEevYSY0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:x-priority:date
         :references:x-mailer;
        b=C/nXVhpTPB2JVoddTP0ZKdspFy1A16bKD7HuH4h31sBkrAEuWgGMS5zwgzY4qTzYxP
         /f42LJ/L35rLUNwzj8sNrgf2uJXOQ1A/JpBT6IdgroEEN5jLCesyl0qbF2R8gc+Wf/WK
         xjtJFHpiSsc20YrW8GN83b3+EfTaNYEK7fnK4=
Received: by 10.187.168.15 with SMTP id v15mr2382545fao.100.1220534318425;
        Thu, 04 Sep 2008 06:18:38 -0700 (PDT)
Received: from kodapan.lan ( [83.249.107.81])
        by mx.google.com with ESMTPS id 34sm50846869nfu.24.2008.09.04.06.18.34
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 04 Sep 2008 06:18:35 -0700 (PDT)
Message-Id: <09416F9F-1379-454F-888A-419D6EA2822C@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <1220482735.v2.mailanyonewebmail-253596@fuse49>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Similarity percentage between two Strings
X-Priority: 3
Date: Thu, 4 Sep 2008 15:18:32 +0200
References: <1220482735.v2.mailanyonewebmail-253596@fuse49>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

I would create 1-5 ngram sized shingles and measure the distance using  
Tanimoto coefficient. That would probably work out just fine. You  
might want to add more weight the greater the size of the shingle.

There are shingle filters in lucene/java/contrib/analyzers and there  
is a Tanimoto distance in lucene/mahout/.

Feel free to report back on how well it works.


      karl

4 sep 2008 kl. 00.58 skrev Thiago Moreira:

>
>     Well, the similar definition that I'm looking for is the number  
> 2, maybe the number 3, but to start the number 2 is enough. If you  
> guys think that is not a Lucene problem what else tool can I use to  
> implement this requirement??
>
>     Thanks
> Thiago Moreira
> Software Engineer
> tmoreira@liferay.com
> Liferay, Inc.
> Enterprise. Open Source. For Life.
>
>
> N. Hira wrote:
>>
>> I don't know how much of this is a Lucene problem, but -- as I'm  
>> sure you will inevitably hear from others on the list -- it depends  
>> on what your definition of "similar" is.
>>
>> By similar, do you mean:
>> 1.  Identical, except for variations in case (upper/lower)
>> 2.  Allow 1., but also allow prefixes/suffixes (e.g., "FW:  " or  
>> "... (summary")
>> 3.  Allow 1., 2. and permit some new terms ... how many?
>> 4.  Allow all of the above and allow some changes to terms using  
>> stemming (E.g., "Google releases Chrome" is similar to "Google  
>> announces the release of its new Chrome web browser")
>> ....
>>
>> I'm sure you see where this is going.  So ... how do you define  
>> similar?
>>
>> Good luck!
>>
>> -h
>> ----------------------------------------------------------------------
>> Hira, N.R.
>> Cognocys, Inc.
>>
>> On 03-Sep-2008, at 2:52 PM, Thiago Moreira wrote:
>>
>>>
>>>     Hey all,
>>>
>>>     I want to know how much two Strings are similar! The thing is:  
>>> I'm processing an email box and I want to group all messages that  
>>> have the subject similar, makes sense?? I looked on the  
>>> documentation but I didn't find how to accomplish this. It's not  
>>> necessary add the messages or the subjects on some kind of index.  
>>> I'm using 2.3.2 version of Lucene.
>>>
>>>     Anyone has some idea?
>>>
>>>     Thanks in advance.
>>> -- 
>>> Thiago Moreira
>>> Software Engineer
>>> tmoreira@liferay.com
>>> Liferay, Inc.
>>> Enterprise. Open Source. For Life.
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 13:31:38 2008
Return-Path: <java-user-return-35910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93838 invoked from network); 4 Sep 2008 13:31:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 13:31:36 -0000
Received: (qmail 6079 invoked by uid 500); 4 Sep 2008 13:31:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6056 invoked by uid 500); 4 Sep 2008 13:31:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6045 invoked by uid 99); 4 Sep 2008 13:31:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 06:31:27 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yeshuangming@gmail.com designates 209.85.217.30 as permitted sender)
Received: from [209.85.217.30] (HELO mail-gx0-f30.google.com) (209.85.217.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 13:30:29 +0000
Received: by gxk11 with SMTP id 11so3059733gxk.5
        for <java-user@lucene.apache.org>; Thu, 04 Sep 2008 06:29:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=mtcS9gVYR6kfD8Y6UWCg1o7SwimP88ZOPA7DxwjOAEI=;
        b=cTjJpNUe6J74teAKg6Ao/dPKImbvS7nvkGkGnAk347J1XQjK/TTCO7RH0q96QkSGCr
         EId9g7DeH0qsgob6elePV0TAQRwMKb9AotF0eQ81dj1Tv9jE8IwazpMBNlJgLJzhhYvQ
         LMdOSnINZz0yv66iDOE/RRGLkckXczxQT78Vo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=l+B2cHCjxFx6JDG8Jegl5mBkINbHW2hjKjUqKbfquOD6JHd/oYVPEHEb6QLyYUpz1G
         VTT2b7it9HWAZ+CsKAD/+wW+BqxNbHPpD3RH48rFAhQfdkQpJme61QqCyC6nGzNUwNXB
         1Z538UQPJyjnRp87RiFOtJBGKoPpHMxsGJwg0=
Received: by 10.150.227.9 with SMTP id z9mr11249729ybg.74.1220534999776;
        Thu, 04 Sep 2008 06:29:59 -0700 (PDT)
Received: by 10.151.84.5 with HTTP; Thu, 4 Sep 2008 06:29:59 -0700 (PDT)
Message-ID: <9233ccac0809040629x43b63503wa1196bedd9791747@mail.gmail.com>
Date: Thu, 4 Sep 2008 21:29:59 +0800
From: "=?GB2312?B?0rbLq8P3?=" <yeshuangming@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How can we know if 2 lucene indexes are same?
In-Reply-To: <54A87861-7A1E-409D-B8E8-CF0F5284E0BF@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30769_29142841.1220534999756"
References: <5e76b0ad0808290235w45f762e3i2a476e8fe132dfb4@mail.gmail.com>
	 <C7CBD3C0-F1AD-42B3-91A5-1B3262B44EED@gmail.com>
	 <5e76b0ad0809032222l6bdbe192r8fc521bfd8f5f9ee@mail.gmail.com>
	 <9233ccac0809040208k6c5117desd698944b888d000e@mail.gmail.com>
	 <54A87861-7A1E-409D-B8E8-CF0F5284E0BF@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_30769_29142841.1220534999756
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

SSBkb24ndCBhZ3JlZWQgd2l0aCBNaWNoYWVsIE1jQ2FuZGxlc3MuIDopCgpJIGtvbncgdGhhdCBh
ZnRlciAyLjMsIGFkZCBhbmQgZGVsZXRlIGNhbiBydW4gaW4gb25lIEluZGV4V3JpdGVyIGF0IG9u
ZQp0aW1lLCBhbmQgYWxzbyBsdWNlbmUgaGFzIGEgdXBkYXRlIG1ldGhvZCB3aGljaCBkZWxldGUg
ZG9jdW1lbnRzIGJ5IHRlcm0KdGhlbiBhZGQgdGhlIG5ldyBkb2N1bWVudC4KCkluIG15IHRlc3Qs
IGVpdGhlciBMb2NrT2J0YWluRmFpbGVkRXhjZXB0aW9uIHdpdGggdGhyZWFkIHNsZWVwIHNlbnRl
bmNlOgoKb3JnLmFwYWNoZS5sdWNlbmUuc3RvcmUuTG9ja09idGFpbkZhaWxlZEV4Y2VwdGlvbjog
TG9jayBvYnRhaW4gdGltZWQgb3V0OgpTaW1wbGVGU0xvY2tARTpcaW5kZXhcd3JpdGUubG9jawog
YXQgb3JnLmFwYWNoZS5sdWNlbmUuc3RvcmUuTG9jay5vYnRhaW4oTG9jay5qYXZhOjg1KQogYXQK
b3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguRGlyZWN0b3J5SW5kZXhSZWFkZXIuYWNxdWlyZVdyaXRl
TG9jayhEaXJlY3RvcnlJbmRleFJlYWRlci5qYXZhOjI5OCkKIGF0IG9yZy5hcGFjaGUubHVjZW5l
LmluZGV4LkluZGV4UmVhZGVyLmRlbGV0ZURvY3VtZW50KEluZGV4UmVhZGVyLmphdmE6NzUwKQog
YXQKb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguSW5kZXhSZWFkZXIuZGVsZXRlRG9jdW1lbnRzKElu
ZGV4UmVhZGVyLmphdmE6Nzg2KQogYXQgb3JnLnRlc3QuSW5kZXhUaHJlYWQucnVuKEluZGV4VGhy
ZWFkLmphdmE6MzMpCgpvciBTdGFsZVJlYWRlckV4Y2VwdGlvbiB3aXRob3V0IHRocmVhZCBzbGVl
cCBzZW50ZW5jZToKCm9yZy5hcGFjaGUubHVjZW5lLmluZGV4LlN0YWxlUmVhZGVyRXhjZXB0aW9u
OiBJbmRleFJlYWRlciBvdXQgb2YgZGF0ZSBhbmQgbm8KbG9uZ2VyIHZhbGlkIGZvciBkZWxldGUs
IHVuZGVsZXRlLCBvciBzZXROb3JtIG9wZXJhdGlvbnMKIGF0Cm9yZy5hcGFjaGUubHVjZW5lLmlu
ZGV4LkRpcmVjdG9yeUluZGV4UmVhZGVyLmFjcXVpcmVXcml0ZUxvY2soRGlyZWN0b3J5SW5kZXhS
ZWFkZXIuamF2YTozMDgpCiBhdCBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5JbmRleFJlYWRlci5k
ZWxldGVEb2N1bWVudChJbmRleFJlYWRlci5qYXZhOjc1MCkKIGF0Cm9yZy5hcGFjaGUubHVjZW5l
LmluZGV4LkluZGV4UmVhZGVyLmRlbGV0ZURvY3VtZW50cyhJbmRleFJlYWRlci5qYXZhOjc4NikK
IGF0IG9yZy50ZXN0LkluZGV4VGhyZWFkLnJ1bihJbmRleFRocmVhZC5qYXZhOjMxKQoKTXkgdGVz
dCBjb2RlOgoKCnB1YmxpYyBjbGFzcyBNYWluIHsKCiBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihT
dHJpbmdbXSBhcmdzKSB0aHJvd3MgSU9FeGNlcHRpb24gewogIERpcmVjdG9yeSBkaXJlY3Rvcnkg
PSBGU0RpcmVjdG9yeS5nZXREaXJlY3RvcnkoImU6L2luZGV4Iik7CiAgSW5kZXhXcml0ZXIgd3Jp
dGVyID0gbmV3IEluZGV4V3JpdGVyKGRpcmVjdG9yeSwgbnVsbCwgZmFsc2UpOwogIERvY3VtZW50
IGRvY3VtZW50ID0gbmV3IERvY3VtZW50KCk7CiAgZG9jdW1lbnQuYWRkKG5ldyBGaWVsZCgiYmJi
IiwgImJiYiIsIFN0b3JlLllFUywgSW5kZXguVU5fVE9LRU5JWkVEKSk7CiAgd3JpdGVyLmFkZERv
Y3VtZW50KGRvY3VtZW50KTsKCiAgVGhyZWFkIHQgPSBuZXcgSW5kZXhUaHJlYWQoKTsKICB0LnN0
YXJ0KCk7CgogIHRyeSB7CiAgIFRocmVhZC5zbGVlcCgxMDAwKTsKICB9IGNhdGNoIChJbnRlcnJ1
cHRlZEV4Y2VwdGlvbiBlKSB7CiAgIC8vIFRPRE8gQXV0by1nZW5lcmF0ZWQgY2F0Y2ggYmxvY2sK
ICAgZS5wcmludFN0YWNrVHJhY2UoKTsKICB9CgogIHdyaXRlci5vcHRpbWl6ZSgpOwogIHdyaXRl
ci5jbG9zZSgpOwogIFN5c3RlbS5vdXQucHJpbnRsbigib3V0Iik7CiB9Cn0KCnB1YmxpYyBjbGFz
cyBJbmRleFRocmVhZCBleHRlbmRzIFRocmVhZCB7CgogQE92ZXJyaWRlCiBwdWJsaWMgdm9pZCBy
dW4oKSB7CiAgRGlyZWN0b3J5IGRpcmVjdG9yeTsKICB0cnkgewogICB0cnkgewogICAgVGhyZWFk
LnNsZWVwKDEwKTsKICAgfSBjYXRjaCAoSW50ZXJydXB0ZWRFeGNlcHRpb24gZSkgewogICAgLy8g
VE9ETyBBdXRvLWdlbmVyYXRlZCBjYXRjaCBibG9jawogICAgZS5wcmludFN0YWNrVHJhY2UoKTsK
ICAgfQoKICAgZGlyZWN0b3J5ID0gRlNEaXJlY3RvcnkuZ2V0RGlyZWN0b3J5KCJlOi9pbmRleCIp
OwogICBTeXN0ZW0ub3V0LnByaW50bG4oInRocmVhZCBiZWdpbiIpOwogICAvL0luZGV4V3JpdGVy
IHJlYWRlciA9IG5ldyBJbmRleFdyaXRlcihkaXJlY3RvcnksIG51bGwsIGZhbHNlKTsKICAgSW5k
ZXhSZWFkZXIgcmVhZGVyID0gSW5kZXhSZWFkZXIub3BlbihkaXJlY3RvcnkpOwogICBUZXJtIHRl
cm0gPSBuZXcgVGVybSgiYmJiIiwgImJiYiIpOwogICByZWFkZXIuZGVsZXRlRG9jdW1lbnRzKHRl
cm0pOwogICByZWFkZXIuY2xvc2UoKTsKICAgU3lzdGVtLm91dC5wcmludGxuKCJ0aHJlYWQgZW5k
Iik7CiAgfSBjYXRjaCAoSU9FeGNlcHRpb24gZSkgewogICAvLyBUT0RPIEF1dG8tZ2VuZXJhdGVk
IGNhdGNoIGJsb2NrCiAgIGUucHJpbnRTdGFja1RyYWNlKCk7CiAgfQogfQp9CgoKCjIwMDgvOS80
LCBNaWNoYWVsIE1jQ2FuZGxlc3MgPGx1Y2VuZUBtaWtlbWNjYW5kbGVzcy5jb20+Ogo+Cj4KPiBB
Y3R1YWxseSwgYXMgb2YgMi4zLCB0aGlzIGlzIG5vIGxvbmdlciB0cnVlOiBtZXJnZXMgYW5kIG9w
dGltaXppbmcgcnVuIGluCj4gdGhlIGJhY2tncm91bmQsIGFuZCBhbGxvdyBhZGQvdXBkYXRlL2Rl
bGV0ZSBkb2N1bWVudHMgdG8gcnVuIGF0IHRoZSBzYW1lCj4gdGltZS4KPgo+IEkgdGhpbmsgaXQn
cyBwcm9iYWJseSBiZXN0IHRvIHVzZSBhcHBsaWNhdGlvbiBsb2dpYyAob3V0c2lkZSBvZiBMdWNl
bmUpIHRvCj4ga2VlcCB0cmFjayBvZiB3aGF0IHVwZGF0ZXMgaGFwcGVuZWQgdG8gdGhlIG1hc3Rl
ciB3aGlsZSB0aGUgc2xhdmUgd2FzCj4gb3B0aW1pemluZy4KPgo+IE1pa2UKPgo+IOWPtuWPjOaY
jiB3cm90ZToKPgo+IE5vIGRvY3VtZW50cyBjYW4gYWRkZWQgaW50byBpbmRleCB3aGVuIHRoZSBp
bmRleCBpcyBvcHRpbWl6aW5nLCAgb3IKPj4gb3B0aW1pemluZyBjYW4ndCBydW4gZHVybGluZyBk
b2N1bWVudHMgYWRkaW5nIHRvIHRoZSBpbmRleC4KPj4gU28sIHdpdGhvdXQgb3RoZXIgZXJyb3Is
IEkgdGhpbmsgd2UgY2FuIGJlbGVpdmUgdGhlIHR3byBpbmRleCBhcmUgaW5kZWVkCj4+IHRoZQo+
PiBzYW1lLgo+Pgo+PiA6KQo+Pgo+PiAyMDA4LzkvNCBOb2JsZSBQYXVsIOC0qOC1i+C0rOC0v+C0
s+C1jeKAjSDgpKjgpYvgpKzgpY3gpLPgpY0gPG5vYmxlLnBhdWxAZ21haWwuY29tPgo+Pgo+PiBU
aGUgdXNlIGNhc2UgaXMgYXMgZm9sbG93cwo+Pj4KPj4+IEkgaGF2ZSB0d28gaW5kZXhlcyAuIE9u
ZSBhdCB0aGUgbWFzdGVyIGFuZCBvbmUgYXQgdGhlIHNsYXZlLiBUaGUgdXNlcgo+Pj4gb2NjYXNp
b25hbGx5IGtlZXBzIGNvbW1pdHRpbmcgb24gdGhlIG1hc3RlciBhbmQgdGhlIGRlbHRhIGlzCj4+
PiByZXBsaWNhdGVkIGV2ZXJ5dGltZS4gQnV0IHdoZW4gdGhlIG9wdGltaXplIGhhcHBlbnMgdGhl
IHRyYW5zZmVyIHNpemUKPj4+IGNhbiBiZSByZWFsbHkgbGFyZ2UuIFNvIEkgYW0gdGhpbmtpbmcg
b2YgIGRvaW5nIHRoZSBvcHRpbWl6ZQo+Pj4gc2VwYXJhdGVseSBvbiBtYXN0ZXIgYW5kIHNsYXZl
IC4KPj4+Cj4+PiBTbyBmYXIsIHNvIGdvb2QuIEJ1dCBob3cgY2FuIEkgcmVhbGx5IGtub3cgdGhh
dCBhZnRlciB0aGUgb3B0aW1pemUgdGhlCj4+PiBpbmRleGVzIGFyZSBpbmRlZWQgdGhlIHNhbWUg
b3Igbm8gZG9jdW1lbnRzIGdvdCBhZGRlZCBpbiBiZXR3ZWVuLj8KPj4+Cj4+Pgo+Pj4KPj4+IE9u
IEZyaSwgQXVnIDI5LCAyMDA4IGF0IDM6MTMgUE0sIEthcmwgV2V0dGluIDxrYXJsLndldHRpbkBn
bWFpbC5jb20+Cj4+PiB3cm90ZToKPj4+Cj4+Pj4KPj4+PiAyOSBhdWcgMjAwOCBrbC4gMTEuMzUg
c2tyZXYgTm9ibGUgUGF1bCDgtKjgtYvgtKzgtL/gtLPgtY3igI0g4KSo4KWL4KSs4KWN4KSz4KWN
Ogo+Pj4+Cj4+Pj4gaGksCj4+Pj4+IEkgd2lzaCB0byBrbm93IGlmIHRoZSBjb250ZW50cyBvZiB0
d28gaW5kZXhlcyBoYXZlIHNhbWUgZGF0YS4KPj4+Pj4gd2lsbCBhbGwgdGhlIGZpbGVzIGJlIGV4
YWN0bHkgc2FtZSBpZiBJIHB1dCBzYW1lIHNldCBvZiBkb2N1bWVudHMgdG8KPj4+Pj4KPj4+PiBi
b3RoPwo+Pj4KPj4+Pgo+Pj4+IElmIHlvdSBpbnNlcnQgdGhlIGRvY3VtZW50cyBpbiB0aGUgc2Ft
ZSBvcmRlciB3aXRoIHRoZSBzYW1lIHNldHRpbmdzIGFuZAo+Pj4+IGJvdGggaW5kaWNlcyBhcmUg
b3B0aW1pemVkLCB0aGVuIHRoZSBmaWxlcyBvdWdodCB0byBiZSBpZGVudGl0aWNhbC4gSSdtCj4+
Pj4gaG93ZXZlciBub3Qgc3VyZS4KPj4+Pgo+Pj4+IFRoZSBpbnN0YW50aWF0ZWQgaW5kZXggY29u
dHJpYiBtb2R1bGUgY29udGFpbnMgYSB0ZXN0IHRoYXQgYXNzZXJ0IHR3bwo+Pj4+Cj4+PiBpbmRl
eAo+Pj4KPj4+PiByZWFkZXJzIGFyZSBpZGVudGljYWwuIFlvdSBjb3VsZCB1c2UgdGhpcyB0byBi
ZSByZWFsbHkgc3VyZSwgYnV0IGl0IGl0IGEKPj4+PiByYXRoZXIgbG9uZyBydW5uaW5nIHByb2Nl
c3MgZm9yIGEgbGFyZ2UgaW5kZXg6Cj4+Pj4KPj4+Pgo+Pj4+Cj4+PiBodHRwOi8vc3ZuLmFwYWNo
ZS5vcmcvcmVwb3MvYXNmL2x1Y2VuZS9qYXZhL3RydW5rL2NvbnRyaWIvaW5zdGFudGlhdGVkL3Ny
Yy90ZXN0L29yZy9hcGFjaGUvbHVjZW5lL3N0b3JlL2luc3RhbnRpYXRlZC9UZXN0SW5kaWNlc0Vx
dWFscy5qYXZhCj4+Pgo+Pj4+Cj4+Pj4KPj4+PiBQZXJoYXBzIHlvdSBzaG91bGQgZXhwbGFpbiB3
aHkgeW91IG5lZWQgdG8gZG8gdGhpcy4KPj4+Pgo+Pj4+Cj4+Pj4gICAgICAgIGthcmwKPj4+PiAt
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0KPj4+PiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJz
Y3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPj4+PiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1t
YWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+Pj4+Cj4+Pj4KPj4+Pgo+Pj4K
Pj4+Cj4+PiAtLQo+Pj4gLS1Ob2JsZSBQYXVsCj4+Pgo+Pj4KPgo+IC0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+IFRv
IHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hl
Lm9yZwo+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1
Y2VuZS5hcGFjaGUub3JnCj4KPgo=
------=_Part_30769_29142841.1220534999756--

From java-user-return-35911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 13:54:51 2008
Return-Path: <java-user-return-35911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14447 invoked from network); 4 Sep 2008 13:54:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 13:54:51 -0000
Received: (qmail 46217 invoked by uid 500); 4 Sep 2008 13:54:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45867 invoked by uid 500); 4 Sep 2008 13:54:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45855 invoked by uid 99); 4 Sep 2008 13:54:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 06:54:42 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.226 as permitted sender)
Received: from [209.85.198.226] (HELO rv-out-0506.google.com) (209.85.198.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 13:53:44 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3990446rvb.5
        for <java-user@lucene.apache.org>; Thu, 04 Sep 2008 06:54:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=tUsbLq+0iijsK51tZOWUppDQyOFQw0NlfetkhF1nNTY=;
        b=RE4ddEVqfm8i37BykLCTQsAewFGSsw8icvywQmP2OxM3MjSTMwjdSqmS2X0Ew2d31F
         rLQla//KvKd9MrKjK9yx3r4LyGVOidYsIIalKmkk4PL0b+3FaouQtnxBIass1QDVKBW6
         KtAq7tkyvAnI/MaAD3BOjg4cKZYf17daXKUn8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=O4j6Iz5BYuxI2DF+b/5yPALeTJzRvmWVMY+HiuGvBa1wIJ5UzCWwBa0CKU74zZQRaC
         VEx2CC9GFMzF84fN7I7dSwi0+XDX/gXQagDwdJahUOKLQmFlGpfzGmXDJ+DY5+YsZIUu
         lk7PSJSBA7qUWx2iogCAeilatyRYCk2lhn0FM=
Received: by 10.141.206.13 with SMTP id i13mr5689466rvq.211.1220536455014;
        Thu, 04 Sep 2008 06:54:15 -0700 (PDT)
Received: by 10.141.176.5 with HTTP; Thu, 4 Sep 2008 06:54:14 -0700 (PDT)
Message-ID: <1bcb7c7f0809040654u577fd444g2f3dea32c4f1adcd@mail.gmail.com>
Date: Thu, 4 Sep 2008 16:54:14 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: string similarity measures
In-Reply-To: <B23B5A00-EA22-42EC-BEF8-7F102474776F@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_50646_9892424.1220536454996"
References: <1bcb7c7f0809040538s681fb81aud4e3e2aa19435caf@mail.gmail.com>
	 <B23B5A00-EA22-42EC-BEF8-7F102474776F@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_50646_9892424.1220536454996
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

yes, I already have a system for users reporting words. they fall on an
operator screen and if operator approves, or if 3 other people marked it as
curse, then it is filtered.
in the other thread you wrote:

>I would create 1-5 ngram sized shingles and measure the distance using
Tanimoto coefficient. That would probably work out just fine. ?>You might
want to add more weight the greater the size of the shingle.
>
>There are shingle filters in lucene/java/contrib/analyzers and there is a
Tanimoto distance in lucene/mahout/.

would that apply to my case? tanimoto coefficient over shingles?

Best,


On Thu, Sep 4, 2008 at 4:12 PM, Karl Wettin <karl.wettin@gmail.com> wrote:

>
> 4 sep 2008 kl. 14.38 skrev Cam Bazz:
>
>
>  Hello,
>> This came up before but - if we were to make a swear word filter, string
>> edit distances are no good. for example words like `shot` is confused with
>> `shit`. there is also problem with words like hitchcock. appearently i
>> need
>> something like soundex or double metaphone. the thing is - these are
>> language specific, and i am not operating in english.
>>
>> I need a fuzzy like curse word filter for turkish, simply.
>>
>
> You probably need to make a large list of words. I would try to learn from
> the users that do swear, perhaps even trust my users to report each other. I
> would probably also look at storing in what context the word is used,
> perhaps by adding the surrounding words (ngrams, shingles, markov chains).
> Compare "go to hell" and "when hell frezes over". The first is rather
> derogatory while the second doen't have to be bad at all.
>
> I'm thinking Hidden Markov Models and Neural Networks.
>
>
>          karl
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_50646_9892424.1220536454996--

From java-user-return-35912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 14:03:31 2008
Return-Path: <java-user-return-35912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23668 invoked from network); 4 Sep 2008 14:03:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 14:03:31 -0000
Received: (qmail 58024 invoked by uid 500); 4 Sep 2008 14:03:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57995 invoked by uid 500); 4 Sep 2008 14:03:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57982 invoked by uid 99); 4 Sep 2008 14:03:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 07:03:21 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 74.125.78.24 as permitted sender)
Received: from [74.125.78.24] (HELO ey-out-2122.google.com) (74.125.78.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 14:02:23 +0000
Received: by ey-out-2122.google.com with SMTP id 6so1484308eyi.53
        for <java-user@lucene.apache.org>; Thu, 04 Sep 2008 07:02:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=JcAdTdCpOO75Bvtpnx0yEM3bMIfNQKDzhQheMFCcXNI=;
        b=v4z4igYYKuOyJoMcDmBx6vhZdfQb8HLOQQ3kfIZ0EuS3D2VueBDmcD1rPHAAvZ1sKZ
         iEXBtlShP+GOe30DqilI6p4rN9t3Hcpw7oEtETezPAe/vlbrTfnEDRqMvD/rcImpdwJr
         5krMm7tctlYBnxc3fCzMjyCLN1Zt2D/ektk8o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=YKrhruMm+x9H9ZKo+GdVVztZa2BUeQTkwVoraC41FAezh25lRz2K7RY2YABCJ5vJ6Z
         LWIj23lMKPdjgbgHLIljyittYYR0x02eS4oaRnVyugE/Q8LXXumEW6HAkDQvq3nGYCel
         iuIYoNCpdb7F6KDvONEwwqDo/JZ8hiSoPBWhA=
Received: by 10.210.109.20 with SMTP id h20mr3479703ebc.129.1220536956193;
        Thu, 04 Sep 2008 07:02:36 -0700 (PDT)
Received: from kodapan.lan ( [83.249.107.81])
        by mx.google.com with ESMTPS id c9sm8634579nfi.26.2008.09.04.07.02.34
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 04 Sep 2008 07:02:35 -0700 (PDT)
Message-Id: <3FAE8009-EFEA-4345-BE78-E889E0A678CF@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <1bcb7c7f0809040654u577fd444g2f3dea32c4f1adcd@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: string similarity measures
Date: Thu, 4 Sep 2008 16:02:33 +0200
References: <1bcb7c7f0809040538s681fb81aud4e3e2aa19435caf@mail.gmail.com> <B23B5A00-EA22-42EC-BEF8-7F102474776F@gmail.com> <1bcb7c7f0809040654u577fd444g2f3dea32c4f1adcd@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


4 sep 2008 kl. 15.54 skrev Cam Bazz:

> yes, I already have a system for users reporting words. they fall on  
> an
> operator screen and if operator approves, or if 3 other people  
> marked it as
> curse, then it is filtered.
> in the other thread you wrote:
>
>> I would create 1-5 ngram sized shingles and measure the distance  
>> using
> Tanimoto coefficient. That would probably work out just fine. ?>You  
> might
> want to add more weight the greater the size of the shingle.
>>
>> There are shingle filters in lucene/java/contrib/analyzers and  
>> there is a
> Tanimoto distance in lucene/mahout/.
>
> would that apply to my case? tanimoto coefficient over shingles?

Not really, no.


      karl


>
>
> Best,
>
>
> On Thu, Sep 4, 2008 at 4:12 PM, Karl Wettin <karl.wettin@gmail.com>  
> wrote:
>
>>
>> 4 sep 2008 kl. 14.38 skrev Cam Bazz:
>>
>>
>> Hello,
>>> This came up before but - if we were to make a swear word filter,  
>>> string
>>> edit distances are no good. for example words like `shot` is  
>>> confused with
>>> `shit`. there is also problem with words like hitchcock.  
>>> appearently i
>>> need
>>> something like soundex or double metaphone. the thing is - these are
>>> language specific, and i am not operating in english.
>>>
>>> I need a fuzzy like curse word filter for turkish, simply.
>>>
>>
>> You probably need to make a large list of words. I would try to  
>> learn from
>> the users that do swear, perhaps even trust my users to report each  
>> other. I
>> would probably also look at storing in what context the word is used,
>> perhaps by adding the surrounding words (ngrams, shingles, markov  
>> chains).
>> Compare "go to hell" and "when hell frezes over". The first is rather
>> derogatory while the second doen't have to be bad at all.
>>
>> I'm thinking Hidden Markov Models and Neural Networks.
>>
>>
>>         karl
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 14:07:31 2008
Return-Path: <java-user-return-35913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26455 invoked from network); 4 Sep 2008 14:07:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 14:07:30 -0000
Received: (qmail 65209 invoked by uid 500); 4 Sep 2008 14:07:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65181 invoked by uid 500); 4 Sep 2008 14:07:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65170 invoked by uid 99); 4 Sep 2008 14:07:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 07:07:21 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.92.24] (HELO qw-out-2122.google.com) (74.125.92.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 14:06:22 +0000
Received: by qw-out-2122.google.com with SMTP id 5so289744qwi.53
        for <java-user@lucene.apache.org>; Thu, 04 Sep 2008 07:06:51 -0700 (PDT)
Received: by 10.214.10.4 with SMTP id 4mr9157681qaj.60.1220537211482;
        Thu, 04 Sep 2008 07:06:51 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id i39sm4711932wxd.30.2008.09.04.07.06.45
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 04 Sep 2008 07:06:48 -0700 (PDT)
Message-Id: <58B46075-2634-4E55-8463-C2FF56E312FD@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <9233ccac0809040629x43b63503wa1196bedd9791747@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: How can we know if 2 lucene indexes are same?
Date: Thu, 4 Sep 2008 10:06:39 -0400
References: <5e76b0ad0808290235w45f762e3i2a476e8fe132dfb4@mail.gmail.com> <C7CBD3C0-F1AD-42B3-91A5-1B3262B44EED@gmail.com> <5e76b0ad0809032222l6bdbe192r8fc521bfd8f5f9ee@mail.gmail.com> <9233ccac0809040208k6c5117desd698944b888d000e@mail.gmail.com> <54A87861-7A1E-409D-B8E8-CF0F5284E0BF@mikemccandless.com> <9233ccac0809040629x43b63503wa1196bedd9791747@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Sorry, I should have said: you must always use the same writer, ie as =20=

of 2.3, while IndexWriter.optimize (or normal segment merging) is =20
running, under one thread, another thread can use that *same* writer =20
to add/delete/update documents, and both are free to make changes to =20
the index.

Before 2.3, optimize() was fully synchronized and blocked add/update/=20
delete documents from changing the index until the optimize() call =20
completed.

So, your test is expected to fail: you're not allowed to open 2 =20
"writers" on a single index at the same time, where "writer" includes =20=

an IndexReader that deletes documents; so those exceptions =20
(LockObtainFailed, StaleReader) are expected.

Mike

=E5=8F=B6=E5=8F=8C=E6=98=8E wrote:

> I don't agreed with Michael McCandless. :)
>
> I konw that after 2.3, add and delete can run in one IndexWriter at =20=

> one
> time, and also lucene has a update method which delete documents by =20=

> term
> then add the new document.
>
> In my test, either LockObtainFailedException with thread sleep =20
> sentence:
>
> org.apache.lucene.store.LockObtainFailedException: Lock obtain timed =20=

> out:
> SimpleFSLock@E:\index\write.lock
> at org.apache.lucene.store.Lock.obtain(Lock.java:85)
> at
> org=20
> .apache=20
> .lucene=20
> .index=20
> .DirectoryIndexReader.acquireWriteLock(DirectoryIndexReader.java:298)
> at =20
> org.apache.lucene.index.IndexReader.deleteDocument(IndexReader.java:=20=

> 750)
> at
> org.apache.lucene.index.IndexReader.deleteDocuments(IndexReader.java:=20=

> 786)
> at org.test.IndexThread.run(IndexThread.java:33)
>
> or StaleReaderException without thread sleep sentence:
>
> org.apache.lucene.index.StaleReaderException: IndexReader out of =20
> date and no
> longer valid for delete, undelete, or setNorm operations
> at
> org=20
> .apache=20
> .lucene=20
> .index=20
> .DirectoryIndexReader.acquireWriteLock(DirectoryIndexReader.java:308)
> at =20
> org.apache.lucene.index.IndexReader.deleteDocument(IndexReader.java:=20=

> 750)
> at
> org.apache.lucene.index.IndexReader.deleteDocuments(IndexReader.java:=20=

> 786)
> at org.test.IndexThread.run(IndexThread.java:31)
>
> My test code:
>
>
> public class Main {
>
> public static void main(String[] args) throws IOException {
>  Directory directory =3D FSDirectory.getDirectory("e:/index");
>  IndexWriter writer =3D new IndexWriter(directory, null, false);
>  Document document =3D new Document();
>  document.add(new Field("bbb", "bbb", Store.YES, Index.UN_TOKENIZED));
>  writer.addDocument(document);
>
>  Thread t =3D new IndexThread();
>  t.start();
>
>  try {
>   Thread.sleep(1000);
>  } catch (InterruptedException e) {
>   // TODO Auto-generated catch block
>   e.printStackTrace();
>  }
>
>  writer.optimize();
>  writer.close();
>  System.out.println("out");
> }
> }
>
> public class IndexThread extends Thread {
>
> @Override
> public void run() {
>  Directory directory;
>  try {
>   try {
>    Thread.sleep(10);
>   } catch (InterruptedException e) {
>    // TODO Auto-generated catch block
>    e.printStackTrace();
>   }
>
>   directory =3D FSDirectory.getDirectory("e:/index");
>   System.out.println("thread begin");
>   //IndexWriter reader =3D new IndexWriter(directory, null, false);
>   IndexReader reader =3D IndexReader.open(directory);
>   Term term =3D new Term("bbb", "bbb");
>   reader.deleteDocuments(term);
>   reader.close();
>   System.out.println("thread end");
>  } catch (IOException e) {
>   // TODO Auto-generated catch block
>   e.printStackTrace();
>  }
> }
> }
>
>
>
> 2008/9/4, Michael McCandless <lucene@mikemccandless.com>:
>>
>>
>> Actually, as of 2.3, this is no longer true: merges and optimizing =20=

>> run in
>> the background, and allow add/update/delete documents to run at the =20=

>> same
>> time.
>>
>> I think it's probably best to use application logic (outside of =20
>> Lucene) to
>> keep track of what updates happened to the master while the slave was
>> optimizing.
>>
>> Mike
>>
>> =E5=8F=B6=E5=8F=8C=E6=98=8E wrote:
>>
>> No documents can added into index when the index is optimizing,  or
>>> optimizing can't run durling documents adding to the index.
>>> So, without other error, I think we can beleive the two index are =20=

>>> indeed
>>> the
>>> same.
>>>
>>> :)
>>>
>>> 2008/9/4 Noble Paul =E0=B4=A8=E0=B5=8B=E0=B4=AC=E0=B4=BF=E0=B4=B3=E0=B5=
=8D=E2=80=8D =E0=A4=A8=E0=A5=8B=E0=A4=AC=E0=A5=8D=E0=A4=B3=E0=A5=8D =20
>>> <noble.paul@gmail.com>
>>>
>>> The use case is as follows
>>>>
>>>> I have two indexes . One at the master and one at the slave. The =20=

>>>> user
>>>> occasionally keeps committing on the master and the delta is
>>>> replicated everytime. But when the optimize happens the transfer =20=

>>>> size
>>>> can be really large. So I am thinking of  doing the optimize
>>>> separately on master and slave .
>>>>
>>>> So far, so good. But how can I really know that after the =20
>>>> optimize the
>>>> indexes are indeed the same or no documents got added in between.?
>>>>
>>>>
>>>>
>>>> On Fri, Aug 29, 2008 at 3:13 PM, Karl Wettin =20
>>>> <karl.wettin@gmail.com>
>>>> wrote:
>>>>
>>>>>
>>>>> 29 aug 2008 kl. 11.35 skrev Noble Paul =E0=B4=A8=E0=B5=8B=E0=B4=AC=E0=
=B4=BF=E0=B4=B3=E0=B5=8D=E2=80=8D =20
>>>>> =E0=A4=A8=E0=A5=8B=E0=A4=AC=E0=A5=8D=E0=A4=B3=E0=A5=8D:
>>>>>
>>>>> hi,
>>>>>> I wish to know if the contents of two indexes have same data.
>>>>>> will all the files be exactly same if I put same set of =20
>>>>>> documents to
>>>>>>
>>>>> both?
>>>>
>>>>>
>>>>> If you insert the documents in the same order with the same =20
>>>>> settings and
>>>>> both indices are optimized, then the files ought to be =20
>>>>> identitical. I'm
>>>>> however not sure.
>>>>>
>>>>> The instantiated index contrib module contains a test that =20
>>>>> assert two
>>>>>
>>>> index
>>>>
>>>>> readers are identical. You could use this to be really sure, but =20=

>>>>> it it a
>>>>> rather long running process for a large index:
>>>>>
>>>>>
>>>>>
>>>> =
http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/instantiated/src=
/test/org/apache/lucene/store/instantiated/TestIndicesEquals.java
>>>>
>>>>>
>>>>>
>>>>> Perhaps you should explain why you need to do this.
>>>>>
>>>>>
>>>>>       karl
>>>>> =
---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>
>>>>
>>>> --
>>>> --Noble Paul
>>>>
>>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 14:07:56 2008
Return-Path: <java-user-return-35914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26656 invoked from network); 4 Sep 2008 14:07:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 14:07:55 -0000
Received: (qmail 67174 invoked by uid 500); 4 Sep 2008 14:07:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67143 invoked by uid 500); 4 Sep 2008 14:07:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67132 invoked by uid 99); 4 Sep 2008 14:07:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 07:07:47 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.227 as permitted sender)
Received: from [209.85.198.227] (HELO rv-out-0506.google.com) (209.85.198.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 14:06:48 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3995779rvb.5
        for <java-user@lucene.apache.org>; Thu, 04 Sep 2008 07:07:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=8zJNrZEY0p3jY/NBJfIFZCDE8howWVXCKKZj6E6X91I=;
        b=KZaMnc2ZIG3WjgIsZgcgX23TVZh1KjH/XxgFik/q9DrSnfv8BCO57k35F4UskQlBsB
         4PtsOYe8Zu6ahsCYG5/TIkSuCcS9Q22SnEM1P0X4asulPTQVQF3bpo5oOv5dAQ+cw/H/
         uIb19+3IF8Ke5i80KJE6u51lFoW0l1e0llHVY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=gqTJ6DSioBaIkL6C747ntCY35d5IoafMbsRhritCh0GoAFSztGlj99hTccvQX6H0Op
         7LteswabUDeMdJ8SBmgN7H6hAUosLoUVBzu/6hv7KMlx8/+JXHlOUFSYkkFcVRQ941AZ
         L6sL8+FJZr0o4zR105rwFeuFLN0ODjBYXNFDY=
Received: by 10.141.53.20 with SMTP id f20mr5715174rvk.128.1220537229858;
        Thu, 04 Sep 2008 07:07:09 -0700 (PDT)
Received: by 10.141.176.5 with HTTP; Thu, 4 Sep 2008 07:07:09 -0700 (PDT)
Message-ID: <1bcb7c7f0809040707k758b5a44o788fc288f98e059f@mail.gmail.com>
Date: Thu, 4 Sep 2008 17:07:09 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: string similarity measures
In-Reply-To: <3FAE8009-EFEA-4345-BE78-E889E0A678CF@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_50780_3492005.1220537229840"
References: <1bcb7c7f0809040538s681fb81aud4e3e2aa19435caf@mail.gmail.com>
	 <B23B5A00-EA22-42EC-BEF8-7F102474776F@gmail.com>
	 <1bcb7c7f0809040654u577fd444g2f3dea32c4f1adcd@mail.gmail.com>
	 <3FAE8009-EFEA-4345-BE78-E889E0A678CF@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_50780_3492005.1220537229840
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

let me rephrase the problem. I already have a set of bad words. I want to
avoid people inputting typos of the bad words.
for example 'shit' is banned, but someone may enter sh1t.

how can i flag those phonetically similar bad words to the marked bad words?

Best.

On Thu, Sep 4, 2008 at 5:02 PM, Karl Wettin <karl.wettin@gmail.com> wrote:

>
> 4 sep 2008 kl. 15.54 skrev Cam Bazz:
>
>  yes, I already have a system for users reporting words. they fall on an
>> operator screen and if operator approves, or if 3 other people marked it
>> as
>> curse, then it is filtered.
>> in the other thread you wrote:
>>
>>  I would create 1-5 ngram sized shingles and measure the distance using
>>>
>> Tanimoto coefficient. That would probably work out just fine. ?>You might
>> want to add more weight the greater the size of the shingle.
>>
>>>
>>> There are shingle filters in lucene/java/contrib/analyzers and there is a
>>>
>> Tanimoto distance in lucene/mahout/.
>>
>> would that apply to my case? tanimoto coefficient over shingles?
>>
>
> Not really, no.
>
>
>     karl
>
>
>
>
>>
>> Best,
>>
>>
>> On Thu, Sep 4, 2008 at 4:12 PM, Karl Wettin <karl.wettin@gmail.com>
>> wrote:
>>
>>
>>> 4 sep 2008 kl. 14.38 skrev Cam Bazz:
>>>
>>>
>>> Hello,
>>>
>>>> This came up before but - if we were to make a swear word filter, string
>>>> edit distances are no good. for example words like `shot` is confused
>>>> with
>>>> `shit`. there is also problem with words like hitchcock. appearently i
>>>> need
>>>> something like soundex or double metaphone. the thing is - these are
>>>> language specific, and i am not operating in english.
>>>>
>>>> I need a fuzzy like curse word filter for turkish, simply.
>>>>
>>>>
>>> You probably need to make a large list of words. I would try to learn
>>> from
>>> the users that do swear, perhaps even trust my users to report each
>>> other. I
>>> would probably also look at storing in what context the word is used,
>>> perhaps by adding the surrounding words (ngrams, shingles, markov
>>> chains).
>>> Compare "go to hell" and "when hell frezes over". The first is rather
>>> derogatory while the second doen't have to be bad at all.
>>>
>>> I'm thinking Hidden Markov Models and Neural Networks.
>>>
>>>
>>>        karl
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_50780_3492005.1220537229840--

From java-user-return-35915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 14:29:01 2008
Return-Path: <java-user-return-35915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36726 invoked from network); 4 Sep 2008 14:29:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 14:29:00 -0000
Received: (qmail 9820 invoked by uid 500); 4 Sep 2008 14:28:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9790 invoked by uid 500); 4 Sep 2008 14:28:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9779 invoked by uid 99); 4 Sep 2008 14:28:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 07:28:52 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 14:27:54 +0000
Received: by py-out-1112.google.com with SMTP id z74so1886008pyg.9
        for <java-user@lucene.apache.org>; Thu, 04 Sep 2008 07:28:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=ZrCe7MQcdbjfN3J0fF827pDQXEpUnMzqMCDxaaN0+5U=;
        b=qcR6aW1Dm2kDHmHwsBEKOAzDi/MdJpziAWx8usJMXbImdFamqkgU4A1Vwk/L8Sv0AF
         JA4f4HaugooVMRrsXt/lmaL9QjB4flUIfruzqDkTa/FiUA+fDaJCD5pAF5QYDFILlKfV
         QItfHGW0N0h4jJTcA8iLTJmP4/rkChxK9Z++w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=hZYMUO64Xl/NalA1wEqtM2oN6+OawTIiDvFRpBmSdGWfBM2tc/tBaEZrUTvlgHwKdD
         D59oL6d8Jojre5bneFDF7HmTo/+jorGrtGuybcctRk4tXhjUS7PrHoNHQ57SyMoUVuy4
         ttRnjmZYD7y00UPWl4OG+OiBp7OYUEso4VVYg=
Received: by 10.141.161.6 with SMTP id n6mr5736758rvo.155.1220538503931;
        Thu, 04 Sep 2008 07:28:23 -0700 (PDT)
Received: by 10.141.176.5 with HTTP; Thu, 4 Sep 2008 07:28:23 -0700 (PDT)
Message-ID: <1bcb7c7f0809040728s69ca8379he784af672ce1088c@mail.gmail.com>
Date: Thu, 4 Sep 2008 17:28:23 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: lucene ram buffering
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_50955_17206699.1220538503892"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_50955_17206699.1220538503892
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hello,
I was reading the performance optimization guides then I found :
writer.setRAMBufferSizeMB()

combined with: writer.setMaxBufferedDocs(IndexWriter.DISABLE_AUTO_FLUSH);

this can be used to flush automatically so if the ram buffer size is over a
certain limit it will flush.

now the question: i would like to manage all flushes myself. yet, i still
need a large ram buffer (for search performance)

how can I set ram buffer size to a large value, yet dont use auto flush. I
just want to flush every 32 documents added - and manage that myself.

if the ram buffer size is high, but we have a small number of documents,
does lucene try to write the entire contents of the ram buffer - thus
resulting in a higher flush time?

usually in oodbms systems, you use a larger ram buffer for search, and a
smaller ram buffer for write optimization. the reason being is a smaller ram
buffer is writable to disk faster.

is that the case with lucene?

Best.
-C.B.

------=_Part_50955_17206699.1220538503892--

From java-user-return-35916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 14:30:07 2008
Return-Path: <java-user-return-35916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37022 invoked from network); 4 Sep 2008 14:30:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 14:30:07 -0000
Received: (qmail 12431 invoked by uid 500); 4 Sep 2008 14:29:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12406 invoked by uid 500); 4 Sep 2008 14:29:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12395 invoked by uid 99); 4 Sep 2008 14:29:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 07:29:58 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yeshuangming@gmail.com designates 209.85.217.30 as permitted sender)
Received: from [209.85.217.30] (HELO mail-gx0-f30.google.com) (209.85.217.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 14:28:59 +0000
Received: by gxk11 with SMTP id 11so3110429gxk.5
        for <java-user@lucene.apache.org>; Thu, 04 Sep 2008 07:29:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=mamdKKH2BPP9siD/wWf+D03CmkfvTsdgJVtuv3Sz/6M=;
        b=KevFK/5wJk+VNsy5Cu7ewT8n61MLQzlmaU4CC5ut7291XNnfKgbOJKp2EDe7a3Q1Pf
         vBiL4a1i8i2bvg0xq1sQ+iiuXP2lnh+RnCzU8XTTwMWMOFTGgGNDWqxtdzTtX3WTo4/m
         0Ugc9bCS5h5nbO9B6usCOB1/fZ4yxWXYXs03I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=V/27KwOSZT0QchKccYMfq7rr7hUSsEtLgsThs9tpGcr6Q4X0ZNnAdWRkTBgiYNYLM/
         nN4mJjeiaFlL0yBRazmLo61APnuEdm+55luAwH40YbuaJ2GqLKUBcb8FAa5z4QN8eJa/
         vMofIqEosYcKofkKcl7//FG85pjTzCB1lLJlA=
Received: by 10.150.52.10 with SMTP id z10mr14527029ybz.130.1220538569415;
        Thu, 04 Sep 2008 07:29:29 -0700 (PDT)
Received: by 10.151.84.5 with HTTP; Thu, 4 Sep 2008 07:29:29 -0700 (PDT)
Message-ID: <9233ccac0809040729v6ff55cd7re3a57b7e91a23a5c@mail.gmail.com>
Date: Thu, 4 Sep 2008 22:29:29 +0800
From: "=?GB2312?B?0rbLq8P3?=" <yeshuangming@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How can we know if 2 lucene indexes are same?
In-Reply-To: <58B46075-2634-4E55-8463-C2FF56E312FD@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_31570_20175832.1220538569417"
References: <5e76b0ad0808290235w45f762e3i2a476e8fe132dfb4@mail.gmail.com>
	 <C7CBD3C0-F1AD-42B3-91A5-1B3262B44EED@gmail.com>
	 <5e76b0ad0809032222l6bdbe192r8fc521bfd8f5f9ee@mail.gmail.com>
	 <9233ccac0809040208k6c5117desd698944b888d000e@mail.gmail.com>
	 <54A87861-7A1E-409D-B8E8-CF0F5284E0BF@mikemccandless.com>
	 <9233ccac0809040629x43b63503wa1196bedd9791747@mail.gmail.com>
	 <58B46075-2634-4E55-8463-C2FF56E312FD@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_31570_20175832.1220538569417
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

SSBzZWUgbm93LCB0aGFua3MgTWljaGFlbCBNY0NhbmRsZXNzLCBnb29kIGV4cGxhaW4hIQoKMjAw
OC85LzQsIE1pY2hhZWwgTWNDYW5kbGVzcyA8bHVjZW5lQG1pa2VtY2NhbmRsZXNzLmNvbT46Cj4K
Pgo+IFNvcnJ5LCBJIHNob3VsZCBoYXZlIHNhaWQ6IHlvdSBtdXN0IGFsd2F5cyB1c2UgdGhlIHNh
bWUgd3JpdGVyLCBpZSBhcyBvZgo+IDIuMywgd2hpbGUgSW5kZXhXcml0ZXIub3B0aW1pemUgKG9y
IG5vcm1hbCBzZWdtZW50IG1lcmdpbmcpIGlzIHJ1bm5pbmcsCj4gdW5kZXIgb25lIHRocmVhZCwg
YW5vdGhlciB0aHJlYWQgY2FuIHVzZSB0aGF0ICpzYW1lKiB3cml0ZXIgdG8KPiBhZGQvZGVsZXRl
L3VwZGF0ZSBkb2N1bWVudHMsIGFuZCBib3RoIGFyZSBmcmVlIHRvIG1ha2UgY2hhbmdlcyB0byB0
aGUgaW5kZXguCj4KPiBCZWZvcmUgMi4zLCBvcHRpbWl6ZSgpIHdhcyBmdWxseSBzeW5jaHJvbml6
ZWQgYW5kIGJsb2NrZWQgYWRkL3VwZGF0ZS9kZWxldGUKPiBkb2N1bWVudHMgZnJvbSBjaGFuZ2lu
ZyB0aGUgaW5kZXggdW50aWwgdGhlIG9wdGltaXplKCkgY2FsbCBjb21wbGV0ZWQuCj4KPiBTbywg
eW91ciB0ZXN0IGlzIGV4cGVjdGVkIHRvIGZhaWw6IHlvdSdyZSBub3QgYWxsb3dlZCB0byBvcGVu
IDIgIndyaXRlcnMiCj4gb24gYSBzaW5nbGUgaW5kZXggYXQgdGhlIHNhbWUgdGltZSwgd2hlcmUg
IndyaXRlciIgaW5jbHVkZXMgYW4gSW5kZXhSZWFkZXIKPiB0aGF0IGRlbGV0ZXMgZG9jdW1lbnRz
OyBzbyB0aG9zZSBleGNlcHRpb25zIChMb2NrT2J0YWluRmFpbGVkLCBTdGFsZVJlYWRlcikKPiBh
cmUgZXhwZWN0ZWQuCj4KPiBNaWtlCj4KPiDlj7blj4zmmI4gd3JvdGU6Cj4KPiBJIGRvbid0IGFn
cmVlZCB3aXRoIE1pY2hhZWwgTWNDYW5kbGVzcy4gOikKPj4KPj4gSSBrb253IHRoYXQgYWZ0ZXIg
Mi4zLCBhZGQgYW5kIGRlbGV0ZSBjYW4gcnVuIGluIG9uZSBJbmRleFdyaXRlciBhdCBvbmUKPj4g
dGltZSwgYW5kIGFsc28gbHVjZW5lIGhhcyBhIHVwZGF0ZSBtZXRob2Qgd2hpY2ggZGVsZXRlIGRv
Y3VtZW50cyBieSB0ZXJtCj4+IHRoZW4gYWRkIHRoZSBuZXcgZG9jdW1lbnQuCj4+Cj4+IEluIG15
IHRlc3QsIGVpdGhlciBMb2NrT2J0YWluRmFpbGVkRXhjZXB0aW9uIHdpdGggdGhyZWFkIHNsZWVw
IHNlbnRlbmNlOgo+Pgo+PiBvcmcuYXBhY2hlLmx1Y2VuZS5zdG9yZS5Mb2NrT2J0YWluRmFpbGVk
RXhjZXB0aW9uOiBMb2NrIG9idGFpbiB0aW1lZCBvdXQ6Cj4+IFNpbXBsZUZTTG9ja0BFOlxpbmRl
eFx3cml0ZS5sb2NrCj4+IGF0IG9yZy5hcGFjaGUubHVjZW5lLnN0b3JlLkxvY2sub2J0YWluKExv
Y2suamF2YTo4NSkKPj4gYXQKPj4KPj4gb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguRGlyZWN0b3J5
SW5kZXhSZWFkZXIuYWNxdWlyZVdyaXRlTG9jayhEaXJlY3RvcnlJbmRleFJlYWRlci5qYXZhOjI5
OCkKPj4gYXQKPj4gb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguSW5kZXhSZWFkZXIuZGVsZXRlRG9j
dW1lbnQoSW5kZXhSZWFkZXIuamF2YTo3NTApCj4+IGF0Cj4+IG9yZy5hcGFjaGUubHVjZW5lLmlu
ZGV4LkluZGV4UmVhZGVyLmRlbGV0ZURvY3VtZW50cyhJbmRleFJlYWRlci5qYXZhOjc4NikKPj4g
YXQgb3JnLnRlc3QuSW5kZXhUaHJlYWQucnVuKEluZGV4VGhyZWFkLmphdmE6MzMpCj4+Cj4+IG9y
IFN0YWxlUmVhZGVyRXhjZXB0aW9uIHdpdGhvdXQgdGhyZWFkIHNsZWVwIHNlbnRlbmNlOgo+Pgo+
PiBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5TdGFsZVJlYWRlckV4Y2VwdGlvbjogSW5kZXhSZWFk
ZXIgb3V0IG9mIGRhdGUgYW5kCj4+IG5vCj4+IGxvbmdlciB2YWxpZCBmb3IgZGVsZXRlLCB1bmRl
bGV0ZSwgb3Igc2V0Tm9ybSBvcGVyYXRpb25zCj4+IGF0Cj4+Cj4+IG9yZy5hcGFjaGUubHVjZW5l
LmluZGV4LkRpcmVjdG9yeUluZGV4UmVhZGVyLmFjcXVpcmVXcml0ZUxvY2soRGlyZWN0b3J5SW5k
ZXhSZWFkZXIuamF2YTozMDgpCj4+IGF0Cj4+IG9yZy5hcGFjaGUubHVjZW5lLmluZGV4LkluZGV4
UmVhZGVyLmRlbGV0ZURvY3VtZW50KEluZGV4UmVhZGVyLmphdmE6NzUwKQo+PiBhdAo+PiBvcmcu
YXBhY2hlLmx1Y2VuZS5pbmRleC5JbmRleFJlYWRlci5kZWxldGVEb2N1bWVudHMoSW5kZXhSZWFk
ZXIuamF2YTo3ODYpCj4+IGF0IG9yZy50ZXN0LkluZGV4VGhyZWFkLnJ1bihJbmRleFRocmVhZC5q
YXZhOjMxKQo+Pgo+PiBNeSB0ZXN0IGNvZGU6Cj4+Cj4+Cj4+IHB1YmxpYyBjbGFzcyBNYWluIHsK
Pj4KPj4gcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykgdGhyb3dzIElPRXhj
ZXB0aW9uIHsKPj4gIERpcmVjdG9yeSBkaXJlY3RvcnkgPSBGU0RpcmVjdG9yeS5nZXREaXJlY3Rv
cnkoImU6L2luZGV4Iik7Cj4+ICBJbmRleFdyaXRlciB3cml0ZXIgPSBuZXcgSW5kZXhXcml0ZXIo
ZGlyZWN0b3J5LCBudWxsLCBmYWxzZSk7Cj4+ICBEb2N1bWVudCBkb2N1bWVudCA9IG5ldyBEb2N1
bWVudCgpOwo+PiAgZG9jdW1lbnQuYWRkKG5ldyBGaWVsZCgiYmJiIiwgImJiYiIsIFN0b3JlLllF
UywgSW5kZXguVU5fVE9LRU5JWkVEKSk7Cj4+ICB3cml0ZXIuYWRkRG9jdW1lbnQoZG9jdW1lbnQp
Owo+Pgo+PiAgVGhyZWFkIHQgPSBuZXcgSW5kZXhUaHJlYWQoKTsKPj4gIHQuc3RhcnQoKTsKPj4K
Pj4gIHRyeSB7Cj4+ICBUaHJlYWQuc2xlZXAoMTAwMCk7Cj4+ICB9IGNhdGNoIChJbnRlcnJ1cHRl
ZEV4Y2VwdGlvbiBlKSB7Cj4+ICAvLyBUT0RPIEF1dG8tZ2VuZXJhdGVkIGNhdGNoIGJsb2NrCj4+
ICBlLnByaW50U3RhY2tUcmFjZSgpOwo+PiAgfQo+Pgo+PiAgd3JpdGVyLm9wdGltaXplKCk7Cj4+
ICB3cml0ZXIuY2xvc2UoKTsKPj4gIFN5c3RlbS5vdXQucHJpbnRsbigib3V0Iik7Cj4+IH0KPj4g
fQo+Pgo+PiBwdWJsaWMgY2xhc3MgSW5kZXhUaHJlYWQgZXh0ZW5kcyBUaHJlYWQgewo+Pgo+PiBA
T3ZlcnJpZGUKPj4gcHVibGljIHZvaWQgcnVuKCkgewo+PiAgRGlyZWN0b3J5IGRpcmVjdG9yeTsK
Pj4gIHRyeSB7Cj4+ICB0cnkgewo+PiAgIFRocmVhZC5zbGVlcCgxMCk7Cj4+ICB9IGNhdGNoIChJ
bnRlcnJ1cHRlZEV4Y2VwdGlvbiBlKSB7Cj4+ICAgLy8gVE9ETyBBdXRvLWdlbmVyYXRlZCBjYXRj
aCBibG9jawo+PiAgIGUucHJpbnRTdGFja1RyYWNlKCk7Cj4+ICB9Cj4+Cj4+ICBkaXJlY3Rvcnkg
PSBGU0RpcmVjdG9yeS5nZXREaXJlY3RvcnkoImU6L2luZGV4Iik7Cj4+ICBTeXN0ZW0ub3V0LnBy
aW50bG4oInRocmVhZCBiZWdpbiIpOwo+PiAgLy9JbmRleFdyaXRlciByZWFkZXIgPSBuZXcgSW5k
ZXhXcml0ZXIoZGlyZWN0b3J5LCBudWxsLCBmYWxzZSk7Cj4+ICBJbmRleFJlYWRlciByZWFkZXIg
PSBJbmRleFJlYWRlci5vcGVuKGRpcmVjdG9yeSk7Cj4+ICBUZXJtIHRlcm0gPSBuZXcgVGVybSgi
YmJiIiwgImJiYiIpOwo+PiAgcmVhZGVyLmRlbGV0ZURvY3VtZW50cyh0ZXJtKTsKPj4gIHJlYWRl
ci5jbG9zZSgpOwo+PiAgU3lzdGVtLm91dC5wcmludGxuKCJ0aHJlYWQgZW5kIik7Cj4+ICB9IGNh
dGNoIChJT0V4Y2VwdGlvbiBlKSB7Cj4+ICAvLyBUT0RPIEF1dG8tZ2VuZXJhdGVkIGNhdGNoIGJs
b2NrCj4+ICBlLnByaW50U3RhY2tUcmFjZSgpOwo+PiAgfQo+PiB9Cj4+IH0KPj4KPj4KPj4KPj4g
MjAwOC85LzQsIE1pY2hhZWwgTWNDYW5kbGVzcyA8bHVjZW5lQG1pa2VtY2NhbmRsZXNzLmNvbT46
Cj4+Cj4+Pgo+Pj4KPj4+IEFjdHVhbGx5LCBhcyBvZiAyLjMsIHRoaXMgaXMgbm8gbG9uZ2VyIHRy
dWU6IG1lcmdlcyBhbmQgb3B0aW1pemluZyBydW4gaW4KPj4+IHRoZSBiYWNrZ3JvdW5kLCBhbmQg
YWxsb3cgYWRkL3VwZGF0ZS9kZWxldGUgZG9jdW1lbnRzIHRvIHJ1biBhdCB0aGUgc2FtZQo+Pj4g
dGltZS4KPj4+Cj4+PiBJIHRoaW5rIGl0J3MgcHJvYmFibHkgYmVzdCB0byB1c2UgYXBwbGljYXRp
b24gbG9naWMgKG91dHNpZGUgb2YgTHVjZW5lKQo+Pj4gdG8KPj4+IGtlZXAgdHJhY2sgb2Ygd2hh
dCB1cGRhdGVzIGhhcHBlbmVkIHRvIHRoZSBtYXN0ZXIgd2hpbGUgdGhlIHNsYXZlIHdhcwo+Pj4g
b3B0aW1pemluZy4KPj4+Cj4+PiBNaWtlCj4+Pgo+Pj4g5Y+25Y+M5piOIHdyb3RlOgo+Pj4KPj4+
IE5vIGRvY3VtZW50cyBjYW4gYWRkZWQgaW50byBpbmRleCB3aGVuIHRoZSBpbmRleCBpcyBvcHRp
bWl6aW5nLCAgb3IKPj4+Cj4+Pj4gb3B0aW1pemluZyBjYW4ndCBydW4gZHVybGluZyBkb2N1bWVu
dHMgYWRkaW5nIHRvIHRoZSBpbmRleC4KPj4+PiBTbywgd2l0aG91dCBvdGhlciBlcnJvciwgSSB0
aGluayB3ZSBjYW4gYmVsZWl2ZSB0aGUgdHdvIGluZGV4IGFyZSBpbmRlZWQKPj4+PiB0aGUKPj4+
PiBzYW1lLgo+Pj4+Cj4+Pj4gOikKPj4+Pgo+Pj4+IDIwMDgvOS80IE5vYmxlIFBhdWwg4LSo4LWL
4LSs4LS/4LSz4LWN4oCNIOCkqOCli+CkrOCljeCks+CljSA8bm9ibGUucGF1bEBnbWFpbC5jb20+
Cj4+Pj4KPj4+PiBUaGUgdXNlIGNhc2UgaXMgYXMgZm9sbG93cwo+Pj4+Cj4+Pj4+Cj4+Pj4+IEkg
aGF2ZSB0d28gaW5kZXhlcyAuIE9uZSBhdCB0aGUgbWFzdGVyIGFuZCBvbmUgYXQgdGhlIHNsYXZl
LiBUaGUgdXNlcgo+Pj4+PiBvY2Nhc2lvbmFsbHkga2VlcHMgY29tbWl0dGluZyBvbiB0aGUgbWFz
dGVyIGFuZCB0aGUgZGVsdGEgaXMKPj4+Pj4gcmVwbGljYXRlZCBldmVyeXRpbWUuIEJ1dCB3aGVu
IHRoZSBvcHRpbWl6ZSBoYXBwZW5zIHRoZSB0cmFuc2ZlciBzaXplCj4+Pj4+IGNhbiBiZSByZWFs
bHkgbGFyZ2UuIFNvIEkgYW0gdGhpbmtpbmcgb2YgIGRvaW5nIHRoZSBvcHRpbWl6ZQo+Pj4+PiBz
ZXBhcmF0ZWx5IG9uIG1hc3RlciBhbmQgc2xhdmUgLgo+Pj4+Pgo+Pj4+PiBTbyBmYXIsIHNvIGdv
b2QuIEJ1dCBob3cgY2FuIEkgcmVhbGx5IGtub3cgdGhhdCBhZnRlciB0aGUgb3B0aW1pemUgdGhl
Cj4+Pj4+IGluZGV4ZXMgYXJlIGluZGVlZCB0aGUgc2FtZSBvciBubyBkb2N1bWVudHMgZ290IGFk
ZGVkIGluIGJldHdlZW4uPwo+Pj4+Pgo+Pj4+Pgo+Pj4+Pgo+Pj4+PiBPbiBGcmksIEF1ZyAyOSwg
MjAwOCBhdCAzOjEzIFBNLCBLYXJsIFdldHRpbiA8a2FybC53ZXR0aW5AZ21haWwuY29tPgo+Pj4+
PiB3cm90ZToKPj4+Pj4KPj4+Pj4KPj4+Pj4+IDI5IGF1ZyAyMDA4IGtsLiAxMS4zNSBza3JldiBO
b2JsZSBQYXVsIOC0qOC1i+C0rOC0v+C0s+C1jeKAjSDgpKjgpYvgpKzgpY3gpLPgpY06Cj4+Pj4+
Pgo+Pj4+Pj4gaGksCj4+Pj4+Pgo+Pj4+Pj4+IEkgd2lzaCB0byBrbm93IGlmIHRoZSBjb250ZW50
cyBvZiB0d28gaW5kZXhlcyBoYXZlIHNhbWUgZGF0YS4KPj4+Pj4+PiB3aWxsIGFsbCB0aGUgZmls
ZXMgYmUgZXhhY3RseSBzYW1lIGlmIEkgcHV0IHNhbWUgc2V0IG9mIGRvY3VtZW50cyB0bwo+Pj4+
Pj4+Cj4+Pj4+Pj4gYm90aD8KPj4+Pj4+Cj4+Pj4+Cj4+Pj4+Cj4+Pj4+PiBJZiB5b3UgaW5zZXJ0
IHRoZSBkb2N1bWVudHMgaW4gdGhlIHNhbWUgb3JkZXIgd2l0aCB0aGUgc2FtZSBzZXR0aW5ncwo+
Pj4+Pj4gYW5kCj4+Pj4+PiBib3RoIGluZGljZXMgYXJlIG9wdGltaXplZCwgdGhlbiB0aGUgZmls
ZXMgb3VnaHQgdG8gYmUgaWRlbnRpdGljYWwuCj4+Pj4+PiBJJ20KPj4+Pj4+IGhvd2V2ZXIgbm90
IHN1cmUuCj4+Pj4+Pgo+Pj4+Pj4gVGhlIGluc3RhbnRpYXRlZCBpbmRleCBjb250cmliIG1vZHVs
ZSBjb250YWlucyBhIHRlc3QgdGhhdCBhc3NlcnQgdHdvCj4+Pj4+Pgo+Pj4+Pj4gaW5kZXgKPj4+
Pj4KPj4+Pj4gcmVhZGVycyBhcmUgaWRlbnRpY2FsLiBZb3UgY291bGQgdXNlIHRoaXMgdG8gYmUg
cmVhbGx5IHN1cmUsIGJ1dCBpdCBpdAo+Pj4+Pj4gYQo+Pj4+Pj4gcmF0aGVyIGxvbmcgcnVubmlu
ZyBwcm9jZXNzIGZvciBhIGxhcmdlIGluZGV4Ogo+Pj4+Pj4KPj4+Pj4+Cj4+Pj4+Pgo+Pj4+Pj4K
Pj4+Pj4gaHR0cDovL3N2bi5hcGFjaGUub3JnL3JlcG9zL2FzZi9sdWNlbmUvamF2YS90cnVuay9j
b250cmliL2luc3RhbnRpYXRlZC9zcmMvdGVzdC9vcmcvYXBhY2hlL2x1Y2VuZS9zdG9yZS9pbnN0
YW50aWF0ZWQvVGVzdEluZGljZXNFcXVhbHMuamF2YQo+Pj4+Pgo+Pj4+Pgo+Pj4+Pj4KPj4+Pj4+
IFBlcmhhcHMgeW91IHNob3VsZCBleHBsYWluIHdoeSB5b3UgbmVlZCB0byBkbyB0aGlzLgo+Pj4+
Pj4KPj4+Pj4+Cj4+Pj4+PiAgICAgIGthcmwKPj4+Pj4+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+Pj4+Pj4gVG8g
dW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUu
b3JnCj4+Pj4+PiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVs
cEBsdWNlbmUuYXBhY2hlLm9yZwo+Pj4+Pj4KPj4+Pj4+Cj4+Pj4+Pgo+Pj4+Pj4KPj4+Pj4KPj4+
Pj4gLS0KPj4+Pj4gLS1Ob2JsZSBQYXVsCj4+Pj4+Cj4+Pj4+Cj4+Pj4+Cj4+PiAtLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0KPj4+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNl
bmUuYXBhY2hlLm9yZwo+Pj4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11
c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcKPj4+Cj4+Pgo+Pj4KPgo+IC0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+
IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBh
Y2hlLm9yZwo+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxw
QGx1Y2VuZS5hcGFjaGUub3JnCj4KPgo=
------=_Part_31570_20175832.1220538569417--

From java-user-return-35917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 14:46:27 2008
Return-Path: <java-user-return-35917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46946 invoked from network); 4 Sep 2008 14:46:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 14:46:27 -0000
Received: (qmail 48015 invoked by uid 500); 4 Sep 2008 14:46:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47840 invoked by uid 500); 4 Sep 2008 14:46:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47826 invoked by uid 99); 4 Sep 2008 14:46:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 07:46:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 14:45:16 +0000
Received: by gxk6 with SMTP id 6so6256656gxk.5
        for <java-user@lucene.apache.org>; Thu, 04 Sep 2008 07:44:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=b7vxDFNXRPKEreelUrv8OKINFARy1R3WYS8J4ThTe7w=;
        b=mgIPktmUMVyaXLLMlpfH8c1YMpBW7w4We1u8FPLuzGbE8C9koWjaMQiS8XdbWIdtON
         51wA6toAbgJw9mUGT0ukB9e4YNoBQ0JqFE4s6Qn8iYs8ZRE94yqSqgMeRR2WEE9n8yNV
         86NPMlCpZFFEOG3x2fF7V5Xr8cogZRg6gv65c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=tfD/+3F71uZ08Yq4XXlzOI5XE32EXbKQ78eKdIcBXI/3mnEDf4QhNEyOZKI6ldAsZe
         du4L659wdnJi5dJcPD/IDmufCYY+HcGcHK57kKe/y6xKSMiX44VOeSSl5oueTfGwhr2I
         U8zx898FiZjf1fIfziRyrhQMk1QAHcKHc8cIM=
Received: by 10.150.58.5 with SMTP id g5mr14594547yba.27.1220539486890;
        Thu, 04 Sep 2008 07:44:46 -0700 (PDT)
Received: by 10.151.118.7 with HTTP; Thu, 4 Sep 2008 07:44:46 -0700 (PDT)
Message-ID: <85d3c3b60809040744j3b384f17t858d536905326117@mail.gmail.com>
Date: Thu, 4 Sep 2008 10:44:46 -0400
From: "Jason Rutherglen" <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Realtime Search for Social Networks Collaboration
In-Reply-To: <1bcb7c7f0809040608m6224438bh28af3a8eca21827f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <85d3c3b60809031220t206bdf42m3026d4fbb6f7d3dd@mail.gmail.com>
	 <1bcb7c7f0809040608m6224438bh28af3a8eca21827f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Cam,

Thanks!  It has not been easy, probably has taken 3 years or so to get
this far.  At first I thought the new reopen code would be the
solution.  I used it, but then needed to modify it to do a clone
instead of reference the old deleted docs.  Then as I iterated,
realized that just using reopen on a ramdirectory would not be quite
fast enough because of the merging.  Then started using
InstantiatedIndex which provides an in memory version of the document,
without the overhead of merging during the transaction.  There are
other complexities as well.  The basic code works if you are
interested in trying it out.

Take care,
Jason

On Thu, Sep 4, 2008 at 9:08 AM, Cam Bazz <cambazz@gmail.com> wrote:
> Hello Jason,
> I have been trying to do this for a long time on my own. keep up the good
> work.
>
> What I tried was a document cache using apache collections. and before a
> indexwrite/delete i would sync the cache with index.
>
> I am waiting for lucene 2.4 to proceed. (query by delete)
>
> Best.
>
> On Wed, Sep 3, 2008 at 10:20 PM, Jason Rutherglen <
> jason.rutherglen@gmail.com> wrote:
>
>> Hello all,
>>
>> I don't mean this to sound like a solicitation.  I've been working on
>> realtime search and created some Lucene patches etc.  I am wondering
>> if there are social networks (or anyone else) out there who would be
>> interested in collaborating with Apache on realtime search to get it
>> to the point it can be used in production.  It is a challenging
>> problem that only Google has solved and made to scale.  I've been
>> working on the problem for a while and though a lot has been
>> completed, there is still a lot more to do and collaboration amongst
>> the most probable users (social networks) seems like a good thing to
>> try to do at this point.  I guess I'm saying it seems like a hard
>> enough problem that perhaps it's best to work together on it rather
>> than each company try to complete their own.  However I could be
>> wrong.
>>
>> Realtime search benefits social networks by providing a scalable
>> searchable alternative to large Mysql implementations.  Mysql I have
>> heard is difficult to scale at a certain point.  Apparently Google has
>> created things like BigTable (a large database) and an online service
>> called GData (which Google has not published any whitepapers on the
>> technology underneath) to address scaling large database systems.
>> BigTable does not offer search.   GData does and is used by all of
>> Google's web services instead of something like Mysql (this is at
>> least how I understand it).  Social networks usually grow and so
>> scaling is continually an issue.  It is possible to build a realtime
>> search system that scales linearly, something that I have heard
>> becomes difficult with Mysql.  There is an article that discusses some
>> of these issues
>> http://acmqueue.com/modules.php?name=Content&pa=showpage&pid=337  I
>> don't think the current GData implementation is perfect and there is a
>> lot that can be improved on.  It might be helpful to figure out
>> together what helpful things can be added.
>>
>> If this sounds like something of interest to anyone feel free to send
>> your input.
>>
>> Take care,
>> Jason
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 14:54:08 2008
Return-Path: <java-user-return-35918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51504 invoked from network); 4 Sep 2008 14:54:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 14:54:08 -0000
Received: (qmail 64274 invoked by uid 500); 4 Sep 2008 14:53:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64240 invoked by uid 500); 4 Sep 2008 14:53:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64229 invoked by uid 99); 4 Sep 2008 14:53:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 07:53:59 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [82.227.122.98] (HELO mail.garambrogne.net) (82.227.122.98)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 14:53:01 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.garambrogne.net (Postfix) with ESMTP id CCC3738E392
	for <java-user@lucene.apache.org>; Thu,  4 Sep 2008 16:55:26 +0200 (CEST)
Received: from mail.garambrogne.net ([127.0.0.1])
	by localhost (localhost.localdomain [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id MvQJx16yhFmP for <java-user@lucene.apache.org>;
	Thu,  4 Sep 2008 16:55:25 +0200 (CEST)
Received: by mail.garambrogne.net (Postfix, from userid 33)
	id 8485C38E393; Thu,  4 Sep 2008 16:55:25 +0200 (CEST)
To: java-user@lucene.apache.org
Subject: Re: string similarity measures
MIME-Version: 1.0
Date: Thu, 4 Sep 2008 16:55:25 +0200
From: mathieu <mathieu@garambrogne.net>
Organization: Garambrogne
In-Reply-To: <1bcb7c7f0809040707k758b5a44o788fc288f98e059f@mail.gmail.com>
References: <1bcb7c7f0809040707k758b5a44o788fc288f98e059f@mail.gmail.com>
Message-ID: <4653625a269ab46313b45d381b517de9@localhost>
X-Sender: mathieu@garambrogne.net
User-Agent: RoundCube Webmail/0.1b
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org


I submitted a patch to handle Aspell phonetic rules. You can find it in JIRA.

On Thu, 4 Sep 2008 17:07:09 +0300, "Cam Bazz" <cambazz@gmail.com> wrote:
> let me rephrase the problem. I already have a set of bad words. I want to
> avoid people inputting typos of the bad words.
> for example 'shit' is banned, but someone may enter sh1t.
> 
> how can i flag those phonetically similar bad words to the marked bad
> words?
> 
> Best.
> 
> On Thu, Sep 4, 2008 at 5:02 PM, Karl Wettin <karl.wettin@gmail.com> wrote:
> 
>>
>> 4 sep 2008 kl. 15.54 skrev Cam Bazz:
>>
>>  yes, I already have a system for users reporting words. they fall on an
>>> operator screen and if operator approves, or if 3 other people marked
> it
>>> as
>>> curse, then it is filtered.
>>> in the other thread you wrote:
>>>
>>>  I would create 1-5 ngram sized shingles and measure the distance using
>>>>
>>> Tanimoto coefficient. That would probably work out just fine. ?>You
> might
>>> want to add more weight the greater the size of the shingle.
>>>
>>>>
>>>> There are shingle filters in lucene/java/contrib/analyzers and there
> is a
>>>>
>>> Tanimoto distance in lucene/mahout/.
>>>
>>> would that apply to my case? tanimoto coefficient over shingles?
>>>
>>
>> Not really, no.
>>
>>
>>     karl
>>
>>
>>
>>
>>>
>>> Best,
>>>
>>>
>>> On Thu, Sep 4, 2008 at 4:12 PM, Karl Wettin <karl.wettin@gmail.com>
>>> wrote:
>>>
>>>
>>>> 4 sep 2008 kl. 14.38 skrev Cam Bazz:
>>>>
>>>>
>>>> Hello,
>>>>
>>>>> This came up before but - if we were to make a swear word filter,
> string
>>>>> edit distances are no good. for example words like `shot` is confused
>>>>> with
>>>>> `shit`. there is also problem with words like hitchcock. appearently
> i
>>>>> need
>>>>> something like soundex or double metaphone. the thing is - these are
>>>>> language specific, and i am not operating in english.
>>>>>
>>>>> I need a fuzzy like curse word filter for turkish, simply.
>>>>>
>>>>>
>>>> You probably need to make a large list of words. I would try to learn
>>>> from
>>>> the users that do swear, perhaps even trust my users to report each
>>>> other. I
>>>> would probably also look at storing in what context the word is used,
>>>> perhaps by adding the surrounding words (ngrams, shingles, markov
>>>> chains).
>>>> Compare "go to hell" and "when hell frezes over". The first is rather
>>>> derogatory while the second doen't have to be bad at all.
>>>>
>>>> I'm thinking Hidden Markov Models and Neural Networks.
>>>>
>>>>
>>>>        karl
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 15:58:58 2008
Return-Path: <java-user-return-35919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49778 invoked from network); 4 Sep 2008 15:58:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 15:58:58 -0000
Received: (qmail 61483 invoked by uid 500); 4 Sep 2008 15:58:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61455 invoked by uid 500); 4 Sep 2008 15:58:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61438 invoked by uid 99); 4 Sep 2008 15:58:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 08:58:48 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.236 as permitted sender)
Received: from [209.85.198.236] (HELO rv-out-0506.google.com) (209.85.198.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 15:57:50 +0000
Received: by rv-out-0506.google.com with SMTP id f6so12272rvb.5
        for <java-user@lucene.apache.org>; Thu, 04 Sep 2008 08:58:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=OvUh8j9Am4lxgO+ps3s/Bm6mRioRojGJKllFd8JV59U=;
        b=Cq5cBxvcASdMe7DaJsmcZtCaHu2n/JP15wDqzGb7lG+DYeMWAQRWUNNcHGs+BgPy4c
         5n1SLxuNi4h/UDerXmQL5AzX4w4oIeYoi06CUTdV+nKecjYtJEvO2jDd8kRMaOH73l4N
         DHLz9cszLL6S3vqlXsv+yACvo4yVRkWm6k4Rg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=jnBPmFSRultpB1wN8jN4zQdKKQHH7hG7vikAb3DcNdmc4NE6eVIg6yHh1qmBW4xrV0
         1Qskk3Ks6AxDztTq1CWFG7R8VNE92pwqSu7bsNqctZJijVQdsjkYQP1Jf0zhIfE0ysOb
         T955jN6aeg+RsEdRVbXXwaVX1eabauA6jrwRM=
Received: by 10.141.86.14 with SMTP id o14mr5814774rvl.227.1220543901348;
        Thu, 04 Sep 2008 08:58:21 -0700 (PDT)
Received: by 10.141.176.5 with HTTP; Thu, 4 Sep 2008 08:58:21 -0700 (PDT)
Message-ID: <1bcb7c7f0809040858s419b7008q3c4ec13a9da0e6a2@mail.gmail.com>
Date: Thu, 4 Sep 2008 18:58:21 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: ramdisks
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_52737_25516732.1220543901357"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_52737_25516732.1220543901357
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hello,
anyone using ramdisks for storage? there is ramsam and there is also fusion
io. but they are kinda expensive. any other alternatives I wonder?

Best.

------=_Part_52737_25516732.1220543901357--

From java-user-return-35920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 16:23:47 2008
Return-Path: <java-user-return-35920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60753 invoked from network); 4 Sep 2008 16:23:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 16:23:46 -0000
Received: (qmail 3036 invoked by uid 500); 4 Sep 2008 16:23:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3008 invoked by uid 500); 4 Sep 2008 16:23:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2997 invoked by uid 99); 4 Sep 2008 16:23:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 09:23:38 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ypavlidis@me.dium.com designates 199.117.103.143 as permitted sender)
Received: from [199.117.103.143] (HELO mail2.getmedium.com) (199.117.103.143)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 16:22:36 +0000
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C90EAA.76C9E5C7"
Subject: PhraseQuery issues - differences with SpanNearQuery
Date: Thu, 4 Sep 2008 10:22:45 -0600
Message-ID: <74DFE4F68173F94787693F06E792A8F377261F@exch1.ad.getmedium.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: PhraseQuery issues - differences with SpanNearQuery
thread-index: AckOqnbE/RqlEJSBQe+YMFjQC9pOpw==
From: "Yannis Pavlidis" <ypavlidis@me.dium.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C90EAA.76C9E5C7
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,

I am having an issue when using the PhraseQuery which is best =
illustrated with this example:

I have created 2 documents to emulate URLs. One with a URL of: =
"http://www.airballoon.com" and title "air balloon" and the second one =
with URL
"http://www.balloonair.com" and title: "balloon air".

Test1 (PhraseQuery)
=3D=3D=3D=3D=3D=3D
Now when I use the phrase query with - title: "air balloon" ~2
I get back:

url: "http://www.airballoon.com" - score: 1.0
url: "http://www.balloonair.com" - score: 0.57

Test2 (PhraseQuery)
=3D=3D=3D=3D=3D=3D
Now when I use the phrase query with - title: "balloon air" ~2
I get back:
url: "http://www.balloonair.com" - score: 1.0
url: "http://www.airballoon.com" - score: 0.57

Test3 (PhraseQuery)
=3D=3D=3D=3D=3D=3D
Now when I use the phrase query with - title: "air balloon" ~2 title: =
"balloon air" ~2
I get back:
url: "http://www.airballoon.com" - score: 1.0
url: "http://www.balloonair.com" - score: 1.0

Test4 (SpanNearQuery)
=3D=3D=3D=3D=3D=3D=3D
spanNear([title:air, title:balloon], 2, false)
I get back:
url: "http://www.airballoon.com" - score: 1.0
url: "http://www.balloonair.com" - score: 1.0

I would have expected that Test1, Test2 would actually return both URLs =
with score of 1.0 since I am setting the slop to 2. It seems though that =
lucene really favors and absolute exact match.

Is it safe to assume that for what I am looking for (basically score the =
docs the same regardless on when someone is searching for "air balloon" =
or "balloon air") it would be better to use the SpanNearQuery rather =
than the PhraseQuery?

Any input would be appreciated.=20

Thanks in advance,

Yannis.

------_=_NextPart_001_01C90EAA.76C9E5C7--

From java-user-return-35921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 18:40:00 2008
Return-Path: <java-user-return-35921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50207 invoked from network); 4 Sep 2008 18:40:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 18:40:00 -0000
Received: (qmail 80597 invoked by uid 500); 4 Sep 2008 18:39:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80549 invoked by uid 500); 4 Sep 2008 18:39:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80538 invoked by uid 99); 4 Sep 2008 18:39:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 11:39:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.184.230 as permitted sender)
Received: from [64.233.184.230] (HELO wr-out-0506.google.com) (64.233.184.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 18:38:49 +0000
Received: by wr-out-0506.google.com with SMTP id c30so100289wra.21
        for <java-user@lucene.apache.org>; Thu, 04 Sep 2008 11:39:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=nZeE/7zSfWWtcMTiU4AR4nCjGIE95hCl4Y2C0+A+tvQ=;
        b=VM8GLDkhaLCPsjylWD7eeLGNNZ81cfZJY3WqY6WqnSzWmaCgfHJNGx7zZOGKvOblLt
         VX1zI6QoQDenQ9/OnIcIdn4HlgPjZKzpmIdv9y9cbz8iPex8eeOJNLmvIiIwCz69imTW
         UD6EBfQ7+UFJdp2wM21C9wIrFUWAm/XaD+KN0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=HG9tnF9dKoQAgUmkpgkI2eRFv4ZlXy8JVBQQPzqvwLZS+nmgHdMIkFuqVPfA22/2po
         kgvDQlN4DUn3S50U1dCqYMS4itbDEuFZqCQtLp6VR+zQrcQpIwMn14FhkITfPzSx7Hbk
         m4NrX3VCzkx+lf0W6B93Z31qPaxe3SzSmc1hM=
Received: by 10.90.89.14 with SMTP id m14mr10186032agb.60.1220553542710;
        Thu, 04 Sep 2008 11:39:02 -0700 (PDT)
Received: from ?192.168.1.109? ( [68.198.57.217])
        by mx.google.com with ESMTPS id 18sm16205802agb.12.2008.09.04.11.39.01
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 04 Sep 2008 11:39:02 -0700 (PDT)
Message-ID: <48C02B51.1080908@gmail.com>
Date: Thu, 04 Sep 2008 14:39:13 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.16 (X11/20080724)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: PhraseQuery issues - differences with SpanNearQuery
References: <74DFE4F68173F94787693F06E792A8F377261F@exch1.ad.getmedium.com>
In-Reply-To: <74DFE4F68173F94787693F06E792A8F377261F@exch1.ad.getmedium.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Sounds like its more in line with what you are looking for. If I 
remember correctly, the phrase query factors in the edit distance in 
scoring, but the NearSpanQuery will just use the combined idf for each 
of the terms in it, so distance shouldnt matter with spans (I'm sure 
Paul will correct me if I am wrong).

- Mark

Yannis Pavlidis wrote:
> Hi,
>
> I am having an issue when using the PhraseQuery which is best illustrated with this example:
>
> I have created 2 documents to emulate URLs. One with a URL of: "http://www.airballoon.com" and title "air balloon" and the second one with URL
> "http://www.balloonair.com" and title: "balloon air".
>
> Test1 (PhraseQuery)
> ======
> Now when I use the phrase query with - title: "air balloon" ~2
> I get back:
>
> url: "http://www.airballoon.com" - score: 1.0
> url: "http://www.balloonair.com" - score: 0.57
>
> Test2 (PhraseQuery)
> ======
> Now when I use the phrase query with - title: "balloon air" ~2
> I get back:
> url: "http://www.balloonair.com" - score: 1.0
> url: "http://www.airballoon.com" - score: 0.57
>
> Test3 (PhraseQuery)
> ======
> Now when I use the phrase query with - title: "air balloon" ~2 title: "balloon air" ~2
> I get back:
> url: "http://www.airballoon.com" - score: 1.0
> url: "http://www.balloonair.com" - score: 1.0
>
> Test4 (SpanNearQuery)
> =======
> spanNear([title:air, title:balloon], 2, false)
> I get back:
> url: "http://www.airballoon.com" - score: 1.0
> url: "http://www.balloonair.com" - score: 1.0
>
> I would have expected that Test1, Test2 would actually return both URLs with score of 1.0 since I am setting the slop to 2. It seems though that lucene really favors and absolute exact match.
>
> Is it safe to assume that for what I am looking for (basically score the docs the same regardless on when someone is searching for "air balloon" or "balloon air") it would be better to use the SpanNearQuery rather than the PhraseQuery?
>
> Any input would be appreciated. 
>
> Thanks in advance,
>
> Yannis.
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 19:31:05 2008
Return-Path: <java-user-return-35922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85941 invoked from network); 4 Sep 2008 19:31:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 19:31:05 -0000
Received: (qmail 64064 invoked by uid 500); 4 Sep 2008 19:30:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64022 invoked by uid 500); 4 Sep 2008 19:30:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64011 invoked by uid 99); 4 Sep 2008 19:30:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 12:30:55 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of leonidms@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 19:29:55 +0000
Received: by yx-out-2324.google.com with SMTP id 3so60808yxj.5
        for <java-user@lucene.apache.org>; Thu, 04 Sep 2008 12:30:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Q/t7nxtUBe3fqufTYFx4lYHHvfiQA3Wm3nN2hP5tSBE=;
        b=RxZvgqlkAiKFLzuMnNQVW4qCotBZVbI9FBTCT1bCXW32vwE1WxYUEsFVsnQq/KsMli
         L0Tbnd3n077rIAca20uzLYOnYFciyw6r3pQVR5JzuihO+tjx8vTlmqZ2gLKrSMPhdVb3
         cH474OWOyWcumGDkOE4W0/dvs4bgXpTQSxPUE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=MS29YU9g/VuKn6bZPJgTVD/efG2EYpgun/93ZMctPg0YIlC01SwQn+n8FRN0DU+B45
         YS7g5R0Qg7yH0bZEXXd8N8NoPANE+jFsa+T3mIGcohozMrq5HaMXej9fZCQIg8Hv+gaT
         PJrjsXL6/e0ZNsq1IRVW4IPFixWqfuQDJb1UA=
Received: by 10.142.179.7 with SMTP id b7mr3705557wff.128.1220556607714;
        Thu, 04 Sep 2008 12:30:07 -0700 (PDT)
Received: by 10.143.41.4 with HTTP; Thu, 4 Sep 2008 12:30:07 -0700 (PDT)
Message-ID: <dcd377ca0809041230i5b1be63fl7c3b8e8118e2c9db@mail.gmail.com>
Date: Thu, 4 Sep 2008 22:30:07 +0300
From: "Leonid Maslov" <leonidms@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Newbie question: using Lucene to index hierarchical information.
In-Reply-To: <19266355.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_61614_25576434.1220556607711"
References: <dcd377ca0809010025s1281eff7r5716c444de2fb671@mail.gmail.com>
	 <dcd377ca0809010655y2a9a1bc0i3fe9e2a81d34f1e8@mail.gmail.com>
	 <19266355.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_61614_25576434.1220556607711
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,
Thanks a lot for such a quick reply.

Both scenario sounds very well for me. I would like to do my best and try to
implement any of them (as the proof of the concept) and then incrementally
improve, retest, investigate and rewrite then :)

So, from the soap opera to the question part then:

   - How to implement those things (a and b) on the Lucene and Lucene
   contribs codebase?
      - I looked at the
      http://xtf.wiki.sourceforge.net/tagRef_textIndexer_PreFilter#toctagRef_textIndexer_PreFilter7
and
      didn't like that (too big, to heavy, ready-to use solution instead of
      toolkit). And I didn't understood how to implement "Normal
scenario" on top
      of that?
   - Any suggestions how could I begin implementing these things? Gently
   moving from "Normal" scenario to some more advanced "Complex"? What should I
   afraid off and possible impacts if any?

Have anybody tried to use Lucene to analyse things like that? What would be
possible solutions to store indexed data and perform queries on that? If
Lucene isn't the right tool for this job, maybe some other toolkit would
more useful(possibly on top of the Lucene)

Thanks in advance for any suggestions and comments. I would appreciate any
ideas and directions to look into.


On Tue, Sep 2, 2008 at 11:46 AM, Karsten F.
<karsten-lucene@fiz-technik.de>wrote:

>
> Hi Leonid,
>
> what kind of query is your use case?
>
> Comlex scenario:
> You need all the hierarchical structure information in one query. This
> means
> you want to search with xpath in a real xml-Database. (like: All Documents
> with a subtitle XY which contains directly after this subtitle a table with
> the same column like ...)
>
> Normal scenario:
> You want to search for only one part of your hierarchical information like
> 'Document with word xy in title' and 'Documents with word xy in table'.
>
> I am not familiar with lucene use in xml-Databases, but I can advice for
> "normal scenario":
>
> Take a look to the xml-aware search in xtf (
>
> http://xtf.wiki.sourceforge.net/tagRef_textIndexer_PreFilter#toctagRef_textIndexer_PreFilter7
> ).
> The idea is to use one lucene-document for each section with only two
> fields: "text" and "sectionType".
> But to collect all hits belonging to one hierarchical information (e.g. one
> html-File) and compress this to one representative hit in lucene.
>
> Best regards
>  Karsten
>
>
> leonardinius wrote:
> >
> > Any comments, suggestions? Maybe I should rephrase my original message or
> > describe it in detail?
> > I really would like to get any response if possible.
> >
> > Thanks a lot in advance!
> >
> > On Mon, Sep 1, 2008 at 10:25 AM, Leonid Maslov <leonidms@gmail.com>
> wrote:
> >
> >> Hi all,
> >>
> >> First of all, sorry for my poor English. It's not my native language.
> >>
> >> I'm trying to use Lucene to index hierarchical kind of information: I
> >> have
> >> structured html and pdf/word documents and I want to index them in ways
> >> to
> >> perform search in titles, text, paragraphs or tables only, or any
> >> combinations of items mentioned above. At the moment I see 3 possible
> >> solutions:
> >>
> >>    - Create the set of all possible fields, like: contents, title,
> >>    heading, table etc... And index the data in all them accordingly.
> >> Possible
> >>    impacts:
> >>    - a big count of fields
> >>       - data duplication (because I need to make search looking in the
> >>       paragraphs to look inside all the inner elements, so every outer
> >> element
> >>       indexed will contain all the inner element content as well)
> >>    - Create the hierarchy of the fields, like "title",
> "paragraph/title",
> >>    "paragraph/title/subparagraph/table". Possible impacts:
> >>       - count of fields remains the same
> >>       - soft set of fields (not consistent)
> >>       - I'm not sure about the ways I could process required information
> >>       and perform search.
> >>       - Performance issues?
> >>       - Use one field for content and just add location prefix to
> >> content.
> >>    For example "contents:*paragraph/heading:*token1 token2". *
> >>    paragraph/heading:* here is used as additional information prefix.
> So,
> >>    I (possibly?) could reuse PrefixQuery functionality or smth. Impacts:
> >>       - Strong set of index fields (small)
> >>       - Additional information processing - all the queries I'll use
> will
> >>       have to work as PrefixQuery
> >>       - Performance issues?
> >>
> >>
> >> So, have anyone tried to make things work like that? Or am I trying to
> >> use
> >> wrench to hammer in nails? I assume Lucene wasn't thought to be used
> like
> >> that, but it's worth trying (at least asking).
> >> Any results / suggestions are welcome!
> >>
> >> --
> >> Bests regards,
> >> Leonid Maslov!
> >> Adrienne Gusoff  - "Opportunity knocked. My doorman threw him out."
> >>
> >
> >
> >
> > --
> > Bests regards,
> > Leonid Maslov!
> > Adrienne Gusoff  - "Opportunity knocked. My doorman threw him out."
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Newbie-question%3A-using-Lucene-to-index-hierarchical-information.-tp19250038p19266355.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Bests regards,
Leonid Maslov!
Princess Margaret  - "I have as much privacy as a goldfish in a bowl."

------=_Part_61614_25576434.1220556607711--

From java-user-return-35923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 21:14:26 2008
Return-Path: <java-user-return-35923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50011 invoked from network); 4 Sep 2008 21:14:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 21:14:26 -0000
Received: (qmail 36166 invoked by uid 500); 4 Sep 2008 21:14:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36141 invoked by uid 500); 4 Sep 2008 21:14:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36130 invoked by uid 99); 4 Sep 2008 21:14:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 14:14:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [76.13.13.74] (HELO n4b.bullet.mail.ac4.yahoo.com) (76.13.13.74)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 04 Sep 2008 21:13:17 +0000
Received: from [76.13.13.25] by n4.bullet.mail.ac4.yahoo.com with NNFMP; 04 Sep 2008 21:12:30 -0000
Received: from [76.13.10.180] by t4.bullet.mail.ac4.yahoo.com with NNFMP; 04 Sep 2008 21:12:30 -0000
Received: from [127.0.0.1] by omp121.mail.ac4.yahoo.com with NNFMP; 04 Sep 2008 21:12:30 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 253938.7347.bm@omp121.mail.ac4.yahoo.com
Received: (qmail 73678 invoked by uid 60001); 4 Sep 2008 21:12:29 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=b8vRM6VmyUVuvqYdQv0opmQTWqvxslptwNOhnkpsEFmOdSk/3TetpV49qDS+j3eS9PPs2HD+q/jmXpPqvY/bB7FRXZ+awHjMY8KpBsl+vMlHjtkyFO5K3L7QZ4C4UO7kLSGhrWuyPh45tv8wwLT3tXTSaZxi8T5Ld5PlkGG3KH0=;
X-YMail-OSG: W6BWQicVM1lqk6kGYSNebEC_A2KQdcf2pVskdevJ63CaVBSho0_OnvkoPS6U1BqovWLxB94KpPxQZ4WZ6vynm6OXGa.KjXW..XdIcWsL56ZVxIURiMolRxe9SUVi3ArDKg--
Received: from [76.119.234.184] by web45213.mail.sp1.yahoo.com via HTTP; Thu, 04 Sep 2008 14:12:27 PDT
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Thu, 4 Sep 2008 14:12:27 -0700 (PDT)
From: Justin Grunau <jjmg01@yahoo.com>
Subject: Lucene debug logging?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <309434.73225.qm@web45213.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Is there a way to turn on debug logging / trace logging for Lucene?



      


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 21:21:54 2008
Return-Path: <java-user-return-35924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53167 invoked from network); 4 Sep 2008 21:21:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 21:21:54 -0000
Received: (qmail 47636 invoked by uid 500); 4 Sep 2008 21:21:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46765 invoked by uid 500); 4 Sep 2008 21:21:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46754 invoked by uid 99); 4 Sep 2008 21:21:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 14:21:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [76.13.13.72] (HELO n2b.bullet.mail.ac4.yahoo.com) (76.13.13.72)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 04 Sep 2008 21:20:45 +0000
Received: from [76.13.13.26] by n2.bullet.mail.ac4.yahoo.com with NNFMP; 04 Sep 2008 21:19:57 -0000
Received: from [76.13.10.167] by t3.bullet.mail.ac4.yahoo.com with NNFMP; 04 Sep 2008 21:19:57 -0000
Received: from [127.0.0.1] by omp108.mail.ac4.yahoo.com with NNFMP; 04 Sep 2008 21:19:57 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 762082.94479.bm@omp108.mail.ac4.yahoo.com
Received: (qmail 37766 invoked by uid 60001); 4 Sep 2008 21:19:56 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=tc5gy+6/+BitklKyjMrUvfmNbGVxAPYnTv3poK/M+9WU3LX6Y1V6VcbhC9jIc3LVgbc3xuvhLrwUZVUVTRIPoEF11WsRSXuaWq9O2DFS3Yx+GgybLOJPnXETPx4ls62YIGe9mSDrIMY862H0zNAdd6HhtCoosN3UZWsS7fwOXtw=;
X-YMail-OSG: oBn2UegVM1mOYf1GoP1ijzndujx6kWXSyNUI492NssiZoYVA8fv_JH5LNXTQBeW4JED5QewtITon_lkyRj6oPR0t9QUfEHhfSke2D6LNgJsrTS6LunI0ky.kEndrLzJoVQ--
Received: from [76.119.234.184] by web45215.mail.sp1.yahoo.com via HTTP; Thu, 04 Sep 2008 14:19:56 PDT
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Thu, 4 Sep 2008 14:19:56 -0700 (PDT)
From: Justin Grunau <jjmg01@yahoo.com>
Subject: Problem with lucene search starting to return 0 hits when a few seconds earlier it was returning hundreds
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <858644.37668.qm@web45215.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

We have some code that uses lucene which has been working perfectly well for several months.

Recently, a QA team in our organization has set up a server with a much larger data set than we have ever tested with in the past:  the resulting lucene index is about 3G in size.

On this particular server, the same lucene code which has been reliable in the past is now exhibiting erratic behavior.  The first time you do a search, it returns the correct number of hits.  The second time you do a search, it may or may not return the correct set.  By the third time you do a search, it will return 0 hits even for a search that was returning hundreds of hits only a few seconds earlier.  All subsequent searches will return 0 hits until you stop and restart the java process.

A snippet of the relevant code follows:

                    // getReader() returns the singleton IndexReader object
                final IndexReader reader = getReader();

                    // ANALYZER is another singleton
                final QueryParser queryParser = new QueryParser("text", ANALYZER);
                queryParser.setDefaultOperator(spec.getDefaultOp());
                final Query query = queryParser.parse(spec.getSearchText()).rewrite(
                        reader);
                final IndexSearcher searcher = new IndexSearcher(reader);

                final Hits hits = searcher.search(query, new CachingWrapperFilter(
                        new QueryWrapperFilter(visibilityFilter)));
                total = hits.length();



I understand that Lucene should be able to handle very large datasets, so I'd be surprised if this were an actual Lucene bug.  I'm hoping it's just that I'm doing something "wrong" which has gone unnoticed so far for several months because we've never had an index this large.

We're using lucene verison 2.2.0.

Thanks!

Justin Grunau



      


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 21:36:26 2008
Return-Path: <java-user-return-35925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63322 invoked from network); 4 Sep 2008 21:36:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 21:36:25 -0000
Received: (qmail 64463 invoked by uid 500); 4 Sep 2008 21:36:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64428 invoked by uid 500); 4 Sep 2008 21:36:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64417 invoked by uid 99); 4 Sep 2008 21:36:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 14:36:15 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of leonidms@gmail.com designates 209.85.200.171 as permitted sender)
Received: from [209.85.200.171] (HELO wf-out-1314.google.com) (209.85.200.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 21:35:17 +0000
Received: by wf-out-1314.google.com with SMTP id 28so140416wfc.20
        for <java-user@lucene.apache.org>; Thu, 04 Sep 2008 14:35:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=UaSUjfV37iRxLQLJ0VSSD1rC3hEwfuo8M2dlFlVJYtA=;
        b=e8gWJsgaCNb4JrAxsDcbyh1m/1D7D7bJE4aBkHy1Rp0h8ez6Zub6Sx7SF8CqSgP8YO
         gpfB+ET8P47Bm9BOVsc0QyrJ318pg3rPpHRq/bPmmVx1JrUuMJZWg1O1ofMEzUNdQsXg
         IBvaPHSyx36DsVcxV5wy2IDMydDkzINtbjUY4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=dLFeqHLhtyDW2XIz8Q/ctJ/itIuI34RZpx81ESdc/+6vFk9L/ELzXSWQjMGCBXrBjj
         uxs84Yx/FL4hHHUNMD+QzJ1GwEsdhXuMAYzpwYbllH3P3o9tNhrrX7arl4ezkdhEPTK/
         1rIErqGpUYuX0lJ21+nfd6SZrGFnSeEPal6WM=
Received: by 10.142.166.1 with SMTP id o1mr3740312wfe.345.1220564147518;
        Thu, 04 Sep 2008 14:35:47 -0700 (PDT)
Received: by 10.143.41.4 with HTTP; Thu, 4 Sep 2008 14:35:47 -0700 (PDT)
Message-ID: <dcd377ca0809041435x83b8fie2c649c3bb956b1e@mail.gmail.com>
Date: Fri, 5 Sep 2008 00:35:47 +0300
From: "Leonid M." <leonidms@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem with lucene search starting to return 0 hits when a few seconds earlier it was returning hundreds
In-Reply-To: <858644.37668.qm@web45215.mail.sp1.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_63882_13864871.1220564147518"
References: <858644.37668.qm@web45215.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_63882_13864871.1220564147518
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

* And what's about visibility filter? * Are you sure no one else accesses
IndexReader and modifies index? See reader.maxDocs() to be confident.

On Fri, Sep 5, 2008 at 12:19 AM, Justin Grunau <jjmg01@yahoo.com> wrote:

> We have some code that uses lucene which has been working perfectly well
> for several months.
>
> Recently, a QA team in our organization has set up a server with a much
> larger data set than we have ever tested with in the past:  the resulting
> lucene index is about 3G in size.
>
> On this particular server, the same lucene code which has been reliable in
> the past is now exhibiting erratic behavior.  The first time you do a
> search, it returns the correct number of hits.  The second time you do a
> search, it may or may not return the correct set.  By the third time you do
> a search, it will return 0 hits even for a search that was returning
> hundreds of hits only a few seconds earlier.  All subsequent searches will
> return 0 hits until you stop and restart the java process.
>
> A snippet of the relevant code follows:
>
>                    // getReader() returns the singleton IndexReader object
>                final IndexReader reader = getReader();
>
>                    // ANALYZER is another singleton
>                final QueryParser queryParser = new QueryParser("text",
> ANALYZER);
>                queryParser.setDefaultOperator(spec.getDefaultOp());
>                final Query query =
> queryParser.parse(spec.getSearchText()).rewrite(
>                        reader);
>                final IndexSearcher searcher = new IndexSearcher(reader);
>
>                final Hits hits = searcher.search(query, new
> CachingWrapperFilter(
>                        new QueryWrapperFilter(visibilityFilter)));
>                total = hits.length();
>
>
>
> I understand that Lucene should be able to handle very large datasets, so
> I'd be surprised if this were an actual Lucene bug.  I'm hoping it's just
> that I'm doing something "wrong" which has gone unnoticed so far for several
> months because we've never had an index this large.
>
> We're using lucene verison 2.2.0.
>
> Thanks!
>
> Justin Grunau
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
 Bests regards,
 Leonid Maslov!
 Personal blog: http://leonardinius.blogspot.com/

Random thought:
Princess Margaret  - "I have as much privacy as a goldfish in a bowl."

------=_Part_63882_13864871.1220564147518--

From java-user-return-35926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 21:47:39 2008
Return-Path: <java-user-return-35926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72725 invoked from network); 4 Sep 2008 21:47:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 21:47:39 -0000
Received: (qmail 79355 invoked by uid 500); 4 Sep 2008 21:47:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79314 invoked by uid 500); 4 Sep 2008 21:47:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79302 invoked by uid 99); 4 Sep 2008 21:47:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 14:47:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [76.13.13.74] (HELO n4b.bullet.mail.ac4.yahoo.com) (76.13.13.74)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 04 Sep 2008 21:46:29 +0000
Received: from [76.13.13.25] by n4.bullet.mail.ac4.yahoo.com with NNFMP; 04 Sep 2008 21:46:58 -0000
Received: from [76.13.10.173] by t4.bullet.mail.ac4.yahoo.com with NNFMP; 04 Sep 2008 21:46:58 -0000
Received: from [127.0.0.1] by omp114.mail.ac4.yahoo.com with NNFMP; 04 Sep 2008 21:46:58 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 702466.86035.bm@omp114.mail.ac4.yahoo.com
Received: (qmail 57945 invoked by uid 60001); 4 Sep 2008 21:46:58 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=QSB97f5/SkDrabzjhuOPMwScREPGiwI+Zt5p47hdeojE+ZlRC1/skZgX5y8SftRtQEQvUCSSKsqfOOdPb7cLf2sZC8h5fbSExFZ3w/Ux8oTxhMfEZ4x7RtBCWwMmcBQcCG+2zWqsbxLUpVctR6FfAdH0ltmMzvzHK99gp6HSYB0=;
X-YMail-OSG: sqQiVg4VM1nfJH8xEHi78Pye3tRfg8KTrMeaC0pLn31IxCWkrwQsWl3J1Ns06Oux3Q--
Received: from [76.119.234.184] by web45215.mail.sp1.yahoo.com via HTTP; Thu, 04 Sep 2008 14:46:58 PDT
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Thu, 4 Sep 2008 14:46:58 -0700 (PDT)
From: Justin Grunau <jjmg01@yahoo.com>
Subject: Re: Problem with lucene search starting to return 0 hits when a few seconds earlier it was returning hundreds
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <62568.57815.qm@web45215.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry, I forgot to include the visibility filters:

                final BooleanQuery visibilityFilter = new BooleanQuery();
                visibilityFilter.add(new TermQuery(new Term("isPublic", "true")),
                        Occur.SHOULD);
                visibilityFilter.add(new TermQuery(new Term("reader", user.getId())),
                        Occur.SHOULD);


These visibility filters ensure that a user only sees files which he or she has access to see.

I am pretty certain nobody else has modified the index in the meantime, but why is that important?  We have several other servers -- whose only difference is a smaller data set -- with dozens of concurrent users, and the index on those servers gets modified and read concurrently all the time, but none of these other servers have ever exhibited this bug.



----- Original Message ----
From: Leonid M. <leonidms@gmail.com>
To: java-user@lucene.apache.org
Sent: Thursday, September 4, 2008 5:35:47 PM
Subject: Re: Problem with lucene search starting to return 0 hits when a few seconds earlier it was returning hundreds

* And what's about visibility filter? * Are you sure no one else accesses
IndexReader and modifies index? See reader.maxDocs() to be confident.

On Fri, Sep 5, 2008 at 12:19 AM, Justin Grunau <jjmg01@yahoo.com> wrote:

> We have some code that uses lucene which has been working perfectly well
> for several months.
>
> Recently, a QA team in our organization has set up a server with a much
> larger data set than we have ever tested with in the past:  the resulting
> lucene index is about 3G in size.
>
> On this particular server, the same lucene code which has been reliable in
> the past is now exhibiting erratic behavior.  The first time you do a
> search, it returns the correct number of hits.  The second time you do a
> search, it may or may not return the correct set.  By the third time you do
> a search, it will return 0 hits even for a search that was returning
> hundreds of hits only a few seconds earlier.  All subsequent searches will
> return 0 hits until you stop and restart the java process.
>
> A snippet of the relevant code follows:
>
>                    // getReader() returns the singleton IndexReader object
>                final IndexReader reader = getReader();
>
>                    // ANALYZER is another singleton
>                final QueryParser queryParser = new QueryParser("text",
> ANALYZER);
>                queryParser.setDefaultOperator(spec.getDefaultOp());
>                final Query query =
> queryParser.parse(spec.getSearchText()).rewrite(
>                        reader);
>                final IndexSearcher searcher = new IndexSearcher(reader);
>
>                final Hits hits = searcher.search(query, new
> CachingWrapperFilter(
>                        new QueryWrapperFilter(visibilityFilter)));
>                total = hits.length();
>
>
>
> I understand that Lucene should be able to handle very large datasets, so
> I'd be surprised if this were an actual Lucene bug.  I'm hoping it's just
> that I'm doing something "wrong" which has gone unnoticed so far for several
> months because we've never had an index this large.
>
> We're using lucene verison 2.2.0.
>
> Thanks!
>
> Justin Grunau
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Bests regards,
Leonid Maslov!
Personal blog: http://leonardinius.blogspot.com/

Random thought:
Princess Margaret  - "I have as much privacy as a goldfish in a bowl."



      


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 22:09:59 2008
Return-Path: <java-user-return-35927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90999 invoked from network); 4 Sep 2008 22:09:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 22:09:59 -0000
Received: (qmail 7897 invoked by uid 500); 4 Sep 2008 22:09:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7138 invoked by uid 500); 4 Sep 2008 22:09:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7124 invoked by uid 99); 4 Sep 2008 22:09:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 15:09:49 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.29.23 as permitted sender)
Received: from [80.67.29.23] (HELO smtprelay09.ispgateway.de) (80.67.29.23)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 22:08:48 +0000
Received: from [91.37.241.72] (helo=p5b25f148.dip.t-dialin.net)
	by smtprelay09.ispgateway.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.68)
	(envelope-from <lucenelist2007@danielnaber.de>)
	id 1KbN0u-000485-Qj
	for java-user@lucene.apache.org; Fri, 05 Sep 2008 00:09:16 +0200
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Lucene debug logging?
Date: Fri, 5 Sep 2008 00:10:56 +0200
User-Agent: KMail/1.9.6 (enterprise 20070904.708012)
References: <309434.73225.qm@web45213.mail.sp1.yahoo.com>
In-Reply-To: <309434.73225.qm@web45213.mail.sp1.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200809050010.56875@danielnaber.de>
X-Df-Sender: 695637
X-Virus-Checked: Checked by ClamAV on apache.org

On Donnerstag, 4. September 2008, Justin Grunau wrote:

> Is there a way to turn on debug logging / trace logging for Lucene?

You can use IndexWriter's setInfoStream(). Besides that, Lucene doesn't do 
any logging AFAIK. Are you experiencing any problems that you want to 
diagnose with debugging?

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 22:10:07 2008
Return-Path: <java-user-return-35928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91111 invoked from network); 4 Sep 2008 22:10:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 22:10:07 -0000
Received: (qmail 8748 invoked by uid 500); 4 Sep 2008 22:09:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8720 invoked by uid 500); 4 Sep 2008 22:09:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8709 invoked by uid 99); 4 Sep 2008 22:09:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 15:09:56 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.242] (HELO an-out-0708.google.com) (209.85.132.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 22:08:58 +0000
Received: by an-out-0708.google.com with SMTP id c37so29269anc.49
        for <java-user@lucene.apache.org>; Thu, 04 Sep 2008 15:09:26 -0700 (PDT)
Received: by 10.100.173.18 with SMTP id v18mr11683986ane.122.1220566166581;
        Thu, 04 Sep 2008 15:09:26 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id d34sm21049458and.3.2008.09.04.15.09.25
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 04 Sep 2008 15:09:26 -0700 (PDT)
Message-Id: <5615BFD1-F106-461D-A2C5-40E0EC4774F9@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <309434.73225.qm@web45213.mail.sp1.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Lucene debug logging?
Date: Thu, 4 Sep 2008 18:09:24 -0400
References: <309434.73225.qm@web45213.mail.sp1.yahoo.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


For IndexWriter there's setInfoStream, which logs details about when  
flushing & merging is happening.

Mike

Justin Grunau wrote:

> Is there a way to turn on debug logging / trace logging for Lucene?
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 22:37:55 2008
Return-Path: <java-user-return-35929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14425 invoked from network); 4 Sep 2008 22:37:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 22:37:54 -0000
Received: (qmail 67498 invoked by uid 500); 4 Sep 2008 22:37:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67472 invoked by uid 500); 4 Sep 2008 22:37:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67461 invoked by uid 99); 4 Sep 2008 22:37:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 15:37:44 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of leonidms@gmail.com designates 209.85.200.169 as permitted sender)
Received: from [209.85.200.169] (HELO wf-out-1314.google.com) (209.85.200.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 22:36:46 +0000
Received: by wf-out-1314.google.com with SMTP id 28so164866wfc.20
        for <java-user@lucene.apache.org>; Thu, 04 Sep 2008 15:37:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=eDW9j57XGOmNiUDXbpVypcXIs1SpZn3uQ7sKR2eeaPQ=;
        b=ivS9f72cIueXe9F10giO79m0+9w8I3JhXqcMZ+UAa+M3SWO3ToUHoH7SkE0z9ddzvG
         ZOSlYXjE3iGqlmny6B33X5FYGpBkaamkMovs3N34L/IL+yqIFoI6I6dTA7zzRrRvdLlr
         qrFDcllDMkux2umF6g+AA5nKrwy2rWgahCJZ0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=C62MHL5vyRm3BMCs7kXa+cNuqfSrOhF9aLo0ZLyq2urXAQITHp2L/fygo9KgYwZSEg
         NSwW2xaIe+vmlleo9A8s9QdsG+6wCMQZScV29wcOFYcEt4g8rqa07m6/vbDjSuGfhQt/
         wCLu14ocYedN5I9XMrDqgjzyEgmeV873NVBEI=
Received: by 10.142.223.20 with SMTP id v20mr3774600wfg.76.1220567836260;
        Thu, 04 Sep 2008 15:37:16 -0700 (PDT)
Received: by 10.143.41.4 with HTTP; Thu, 4 Sep 2008 15:37:16 -0700 (PDT)
Message-ID: <dcd377ca0809041537u6aed064ctaa41cb4fec9cfa62@mail.gmail.com>
Date: Fri, 5 Sep 2008 01:37:16 +0300
From: "Leonid M." <leonidms@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem with lucene search starting to return 0 hits when a few seconds earlier it was returning hundreds
In-Reply-To: <62568.57815.qm@web45215.mail.sp1.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_64338_16521290.1220567836257"
References: <62568.57815.qm@web45215.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_64338_16521290.1220567836257
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Anyway it is worth trying (to ensure docs aren't removed between searches).What
if running MatchAllDocsQuery or smth similar? Still getting different hits
count on query rerun?

PS. I'm kinda newbie with Lucene and Lucene API. So don't take my notes too
seriously :)

On Fri, Sep 5, 2008 at 12:46 AM, Justin Grunau <jjmg01@yahoo.com> wrote:

> Sorry, I forgot to include the visibility filters:
>
>                final BooleanQuery visibilityFilter = new BooleanQuery();
>                visibilityFilter.add(new TermQuery(new Term("isPublic",
> "true")),
>                        Occur.SHOULD);
>                visibilityFilter.add(new TermQuery(new Term("reader",
> user.getId())),
>                        Occur.SHOULD);
>
>
> These visibility filters ensure that a user only sees files which he or she
> has access to see.
>
> I am pretty certain nobody else has modified the index in the meantime, but
> why is that important?  We have several other servers -- whose only
> difference is a smaller data set -- with dozens of concurrent users, and the
> index on those servers gets modified and read concurrently all the time, but
> none of these other servers have ever exhibited this bug.
>
>
>
> ----- Original Message ----
> From: Leonid M. <leonidms@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Thursday, September 4, 2008 5:35:47 PM
> Subject: Re: Problem with lucene search starting to return 0 hits when a
> few seconds earlier it was returning hundreds
>
> * And what's about visibility filter? * Are you sure no one else accesses
> IndexReader and modifies index? See reader.maxDocs() to be confident.
>
> On Fri, Sep 5, 2008 at 12:19 AM, Justin Grunau <jjmg01@yahoo.com> wrote:
>
> > We have some code that uses lucene which has been working perfectly well
> > for several months.
> >
> > Recently, a QA team in our organization has set up a server with a much
> > larger data set than we have ever tested with in the past:  the resulting
> > lucene index is about 3G in size.
> >
> > On this particular server, the same lucene code which has been reliable
> in
> > the past is now exhibiting erratic behavior.  The first time you do a
> > search, it returns the correct number of hits.  The second time you do a
> > search, it may or may not return the correct set.  By the third time you
> do
> > a search, it will return 0 hits even for a search that was returning
> > hundreds of hits only a few seconds earlier.  All subsequent searches
> will
> > return 0 hits until you stop and restart the java process.
> >
> > A snippet of the relevant code follows:
> >
> >                    // getReader() returns the singleton IndexReader
> object
> >                final IndexReader reader = getReader();
> >
> >                    // ANALYZER is another singleton
> >                final QueryParser queryParser = new QueryParser("text",
> > ANALYZER);
> >                queryParser.setDefaultOperator(spec.getDefaultOp());
> >                final Query query =
> > queryParser.parse(spec.getSearchText()).rewrite(
> >                        reader);
> >                final IndexSearcher searcher = new IndexSearcher(reader);
> >
> >                final Hits hits = searcher.search(query, new
> > CachingWrapperFilter(
> >                        new QueryWrapperFilter(visibilityFilter)));
> >                total = hits.length();
> >
> >
> >
> > I understand that Lucene should be able to handle very large datasets, so
> > I'd be surprised if this were an actual Lucene bug.  I'm hoping it's just
> > that I'm doing something "wrong" which has gone unnoticed so far for
> several
> > months because we've never had an index this large.
> >
> > We're using lucene verison 2.2.0.
> >
> > Thanks!
> >
> > Justin Grunau
> >
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> Bests regards,
> Leonid Maslov!
> Personal blog: http://leonardinius.blogspot.com/
>
> Random thought:
> Princess Margaret  - "I have as much privacy as a goldfish in a bowl."
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Bests regards,
Leonid Maslov!
Personal blog: http://leonardinius.blogspot.com/

Random thought:
John Belushi  - "I owe it all to little chocolate donuts."

------=_Part_64338_16521290.1220567836257--

From java-user-return-35930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 23:01:45 2008
Return-Path: <java-user-return-35930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34499 invoked from network); 4 Sep 2008 23:01:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 23:01:44 -0000
Received: (qmail 94448 invoked by uid 500); 4 Sep 2008 23:01:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94408 invoked by uid 500); 4 Sep 2008 23:01:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94397 invoked by uid 99); 4 Sep 2008 23:01:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 16:01:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [76.13.13.64] (HELO n1a.bullet.mail.ac4.yahoo.com) (76.13.13.64)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 04 Sep 2008 23:00:33 +0000
Received: from [76.13.13.25] by n1.bullet.mail.ac4.yahoo.com with NNFMP; 04 Sep 2008 23:01:03 -0000
Received: from [76.13.10.180] by t4.bullet.mail.ac4.yahoo.com with NNFMP; 04 Sep 2008 23:01:03 -0000
Received: from [127.0.0.1] by omp121.mail.ac4.yahoo.com with NNFMP; 04 Sep 2008 23:01:03 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 178777.58613.bm@omp121.mail.ac4.yahoo.com
Received: (qmail 3282 invoked by uid 60001); 4 Sep 2008 23:01:02 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=z4JXXmLC+6rYspJ4T9BGFTB7mMit3UKNhCW6dDt8EPsTgTi/j0ItkhtuT50eX+X202ew6iRarsfDnQ65NHRtjjO1npRbX5SzEYXvpOFBKs4tfci+ZbZ3mxB65QEPvq1EocsvQe2KVxXKVyU9WYuVJhm4YJHPZ6na7p0n3a/ubYo=;
X-YMail-OSG: BqCJmnoVM1lasSavRSX_uzXCR6ZMX1.g_uqn.vnkPoPTCIvC18aT4YFIM_EEmW0fl_eIVHf8dPxVbuUxwJnzLzsJoFzfLV4QDW5BKKTMSrAGkd.JA8HFHxmqmx63ZWJuoLLxe7Uqjlme2G.8djnpz_c-
Received: from [76.119.234.184] by web45203.mail.sp1.yahoo.com via HTTP; Thu, 04 Sep 2008 16:01:01 PDT
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Thu, 4 Sep 2008 16:01:01 -0700 (PDT)
From: Justin Grunau <jjmg01@yahoo.com>
Subject: Re: Lucene debug logging?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <207497.1782.qm@web45203.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Daniel, yes, please see my "Problem with lucene search starting to return 0 hits when a few seconds earlier it was returning hundreds" thread.



----- Original Message ----
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Sent: Thursday, September 4, 2008 6:10:56 PM
Subject: Re: Lucene debug logging?

On Donnerstag, 4. September 2008, Justin Grunau wrote:

> Is there a way to turn on debug logging / trace logging for Lucene?

You can use IndexWriter's setInfoStream(). Besides that, Lucene doesn't do 
any logging AFAIK. Are you experiencing any problems that you want to 
diagnose with debugging?

Regards
Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


      


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 04 23:22:10 2008
Return-Path: <java-user-return-35931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45881 invoked from network); 4 Sep 2008 23:22:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2008 23:22:10 -0000
Received: (qmail 10912 invoked by uid 500); 4 Sep 2008 23:22:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10878 invoked by uid 500); 4 Sep 2008 23:22:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10867 invoked by uid 99); 4 Sep 2008 23:22:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 16:22:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.31] (HELO smtp-vbr11.xs4all.nl) (194.109.24.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 23:21:00 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr11.xs4all.nl (8.13.8/8.13.8) with ESMTP id m84NLTjq037499
	for <java-user@lucene.apache.org>; Fri, 5 Sep 2008 01:21:30 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: PhraseQuery issues - differences with SpanNearQuery
Date: Fri, 5 Sep 2008 01:21:35 +0200
User-Agent: KMail/1.9.9
References: <74DFE4F68173F94787693F06E792A8F377261F@exch1.ad.getmedium.com> <48C02B51.1080908@gmail.com>
In-Reply-To: <48C02B51.1080908@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200809050121.35458.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Op Thursday 04 September 2008 20:39:13 schreef Mark Miller:
> Sounds like its more in line with what you are looking for. If I
> remember correctly, the phrase query factors in the edit distance in
> scoring, but the NearSpanQuery will just use the combined idf for
> each of the terms in it, so distance shouldnt matter with spans (I'm
> sure Paul will correct me if I am wrong).

SpanScorer will use the similarity slop factor for each matching
span size to adjust the effective frequency.
The span size is the difference in position between the first
and last matching term, and idf is not used for scoring Spans.
The reason why idf is not used could be that there is no basic
score value associated with inner spans; only top level spans
are scored by SpanScorer.
For more details, please consult the SpanScorer code.

Regards,
Paul Elschot

>
> - Mark
>
> Yannis Pavlidis wrote:
> > Hi,
> >
> > I am having an issue when using the PhraseQuery which is best
> > illustrated with this example:
> >
> > I have created 2 documents to emulate URLs. One with a URL of:
> > "http://www.airballoon.com" and title "air balloon" and the second
> > one with URL "http://www.balloonair.com" and title: "balloon air".
> >
> > Test1 (PhraseQuery)
> > ======
> > Now when I use the phrase query with - title: "air balloon" ~2
> > I get back:
> >
> > url: "http://www.airballoon.com" - score: 1.0
> > url: "http://www.balloonair.com" - score: 0.57
> >
> > Test2 (PhraseQuery)
> > ======
> > Now when I use the phrase query with - title: "balloon air" ~2
> > I get back:
> > url: "http://www.balloonair.com" - score: 1.0
> > url: "http://www.airballoon.com" - score: 0.57
> >
> > Test3 (PhraseQuery)
> > ======
> > Now when I use the phrase query with - title: "air balloon" ~2
> > title: "balloon air" ~2 I get back:
> > url: "http://www.airballoon.com" - score: 1.0
> > url: "http://www.balloonair.com" - score: 1.0
> >
> > Test4 (SpanNearQuery)
> > =======
> > spanNear([title:air, title:balloon], 2, false)
> > I get back:
> > url: "http://www.airballoon.com" - score: 1.0
> > url: "http://www.balloonair.com" - score: 1.0
> >
> > I would have expected that Test1, Test2 would actually return both
> > URLs with score of 1.0 since I am setting the slop to 2. It seems
> > though that lucene really favors and absolute exact match.
> >
> > Is it safe to assume that for what I am looking for (basically
> > score the docs the same regardless on when someone is searching for
> > "air balloon" or "balloon air") it would be better to use the
> > SpanNearQuery rather than the PhraseQuery?
> >
> > Any input would be appreciated.
> >
> > Thanks in advance,
> >
> > Yannis.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 05 03:30:40 2008
Return-Path: <java-user-return-35932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28580 invoked from network); 5 Sep 2008 03:30:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2008 03:30:40 -0000
Received: (qmail 54213 invoked by uid 500); 5 Sep 2008 03:30:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54184 invoked by uid 500); 5 Sep 2008 03:30:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54169 invoked by uid 99); 5 Sep 2008 03:30:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 20:30:30 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yeshuangming@gmail.com designates 209.85.217.30 as permitted sender)
Received: from [209.85.217.30] (HELO mail-gx0-f30.google.com) (209.85.217.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 03:29:30 +0000
Received: by gxk11 with SMTP id 11so3396078gxk.5
        for <java-user@lucene.apache.org>; Thu, 04 Sep 2008 20:30:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Ifgd1DTzsT5b9S0P5ULlEWIH31x/J0IzSNuvMlRIFpI=;
        b=n6oZMdeV3sj4J5PvkdbBMjomnQlj/cSXDWS5wAFz8onqFgb5fCgnlvbfeBgYRoqwrn
         iNHKbRI9lU4RPrQy62uXIT2EnS0/kb9EHjw/379Z/2JAMEno3CqdgIy9dyDOsiwB/5qk
         IGzpjqlmvV9/ak/Fk5spvKWUKlZY/cRd6K7Mg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=WwkE8oBtFhzaG4Rvnhkdsx/DaQuB4PWy7pV8axLttEE0mze9+5FBp8cmk+4qdVWUES
         jmFDMQBOgBCDhLA+letyeYxdkMdRNvgiD6xTTvtAcajXgV5obsacJDcTkfuuJ8HyIbI3
         w/j1F2tWSCVfoUfe+7KNhfEbuSYqFEYbYOymU=
Received: by 10.150.146.1 with SMTP id t1mr11208313ybd.183.1220585401123;
        Thu, 04 Sep 2008 20:30:01 -0700 (PDT)
Received: by 10.151.84.5 with HTTP; Thu, 4 Sep 2008 20:30:01 -0700 (PDT)
Message-ID: <9233ccac0809042030g5e19c6f4m989720dbd836164c@mail.gmail.com>
Date: Fri, 5 Sep 2008 11:30:01 +0800
From: "=?GB2312?B?0rbLq8P3?=" <yeshuangming@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: QueryParser vs. BooleanQuery
In-Reply-To: <8c4e68610809040213k247c38e8q205521817ff31b51@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_38045_29453323.1220585401099"
References: <19306087.post@talk.nabble.com>
	 <8c4e68610809040213k247c38e8q205521817ff31b51@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_38045_29453323.1220585401099
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Indeed, StandardAnalyzer removing the pluses, so analyse 'c++' to 'c'.
QueryParser include Term that been analysed.
And BooleanQuery include Term that hasn't been analysed.
I think this is the difference between they.



2008/9/4 Ian Lea <ian.lea@gmail.com>

> Have a look at the index with Luke to see what has actually been
> indexed. StandardAnalyzer may well be removing the pluses, or you may
> need to escape them.  And watch out for case - Visual != visual in
> term query land.
>
>
> --
> Ian.
>
>
> On Thu, Sep 4, 2008 at 9:46 AM, bogdan71 <bogdan.pisai@gmail.com> wrote:
> >
> >  Hello,
> >
> >  I am experiencing a strange behaviour when trying to query the same
> thing
> > via
> > BooleanQuery vs. via the know-it-all QueryParser class. Precisely, the
> index
> > contains
> > the document:
> >   "12,Visual C++,4.2" with the field layout: ID,name,version(thus, "12"
> is
> > the ID field, "Visual C++"
> > is the name field and "4.2" is the version field).
> >  The search string is "Visual C++" for the name field.
> >
> >  The following test, using QueryParser, goes fine:
> >
> > public final void testUsingQueryParser()
> >        {
> >                IndexSearcher recordSearcher;
> >                Query q;
> >                QueryParser parser = new QueryParser("name", new
> StandardAnalyzer());
> >                try
> >                {
> >                       q = parser.parse("name:visual +name:c++");
> >
> >                        Directory directory =
> > FSDirectory.getDirectory(<some_path_to_index>);
> >                        recordSearcher = new IndexSearcher(directory);
> >
> >                        Hits h = recordSearcher.search(q);
> >
> >                        assertEquals(1, h.length());
> >                        assertEquals(12,
> Integer.parseInt(h.doc(0).get("ID")));
> >                }
> >                catch(Exception exn)
> >                {
> >                        fail("Exception occurred.");
> >                }
> >        }
> >
> >  But this one, using a BooleanQuery, fails.
> >
> > public final void testUsingTermQuery()
> >        {
> >                IndexSearcher recordSearcher;
> >                BooleanQuery bq = new BooleanQuery();
> >
> >                bq.add(new TermQuery(new Term("name", "visual")),
> > BooleanClause.Occur.SHOULD);
> >                bq.add(new TermQuery(new Term("name", "c++")),
> BooleanClause.Occur.MUST);
> >
> >                try
> >                {
> >                        Directory directory =
> > FSDirectory.getDirectory(<some_path_to_index>);
> >                        recordSearcher = new IndexSearcher(directory);
> >
> >                        Hits h = recordSearcher.search(bq);
> >
> >                        assertEquals(1, h.length());   // fails, saying it
> expects 0 !!!
> >                        assertEquals(12,
> Integer.parseInt(h.doc(0).get("ID")));
> >                }
> >                catch(Exception exn)
> >                {
> >                        fail("Eexception occurred.");
> >                }
> >        }
> >
> >   Rewriting the BooleanQuery and taking toString() yields the same String
> > given to QueryParser.parse() in the first test. I am using Lucene 2.3.0.Can
> > somebody explain the difference ?
> > --
> > View this message in context:
> http://www.nabble.com/QueryParser-vs.-BooleanQuery-tp19306087p19306087.html
> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_38045_29453323.1220585401099--

From java-user-return-35933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 05 04:48:48 2008
Return-Path: <java-user-return-35933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68609 invoked from network); 5 Sep 2008 04:48:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2008 04:48:48 -0000
Received: (qmail 99597 invoked by uid 500); 5 Sep 2008 04:48:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99571 invoked by uid 500); 5 Sep 2008 04:48:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99560 invoked by uid 99); 5 Sep 2008 04:48:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 21:48:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 04:47:40 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id B0A9971C337; Thu,  4 Sep 2008 21:48:11 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id AB79271C325
	for <java-user@lucene.apache.org>; Thu,  4 Sep 2008 21:48:11 -0700 (PDT)
Date: Thu, 4 Sep 2008 21:48:11 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Beginner: Specific indexing
In-Reply-To: <4014d98b0809021250j7a774a82xf2974a026d36a8e7@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0809042143540.5350@radix.cryptio.net>
References: <4014d98b0808301202k46a05677l3bb5fd6e8c9b124@mail.gmail.com> 
 <Pine.LNX.4.62.0809021041280.5494@radix.cryptio.net>
 <4014d98b0809021250j7a774a82xf2974a026d36a8e7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


Honestly: your problem doesn't sound like a Lucene problem to me at all 
... i would write custom code to cehck your files for the pattern you are 
looking for.  if you find it *then* construct a Document object, and add 
your 3 fields.  I probably wouldn't even use an analyzer.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 05 05:00:58 2008
Return-Path: <java-user-return-35934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74687 invoked from network); 5 Sep 2008 05:00:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2008 05:00:58 -0000
Received: (qmail 4082 invoked by uid 500); 5 Sep 2008 05:00:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4052 invoked by uid 500); 5 Sep 2008 05:00:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4038 invoked by uid 99); 5 Sep 2008 05:00:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 22:00:49 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=RCVD_BAD_ID,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 04:59:51 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id m854wCp4016290
	for <java-user@lucene.apache.org>; Fri, 5 Sep 2008 07:58:12 +0300
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz.teamw.com with ESMTP
	 id m!ku_40a; 5 Sep 2008 07:57:00 +0300
Message-ID: <48C0BC57.9050405@teamware.com>
Date: Fri, 05 Sep 2008 14:57:59 +1000
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: Lucene User <java-user@lucene.apache.org>
Subject: Javadoc wording in IndexWriter.addIndexesNoOptimize()
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Fri, 05 Sep 2008 07:58:12 +0300 (EEST)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

The Javadoc for this method has the following comment:

"This requires this index not be among those to be added, and the upper bound* 
of those segment doc counts not exceed maxMergeDocs. "

What does the second part of that mean, which is especially confusing given that 
MAX_MERGE_DOCS is deprecated.

Thanks
Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 05 05:06:15 2008
Return-Path: <java-user-return-35935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76142 invoked from network); 5 Sep 2008 05:06:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2008 05:06:14 -0000
Received: (qmail 6748 invoked by uid 500); 5 Sep 2008 05:06:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6711 invoked by uid 500); 5 Sep 2008 05:06:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6700 invoked by uid 99); 5 Sep 2008 05:06:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 22:06:06 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 05:05:09 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id B5E5E71C325; Thu,  4 Sep 2008 22:05:40 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id B269A71C0D3
	for <java-user@lucene.apache.org>; Thu,  4 Sep 2008 22:05:40 -0700 (PDT)
Date: Thu, 4 Sep 2008 22:05:40 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Hits document offset information
In-Reply-To: <70204.70129.qm@web27402.mail.ukl.yahoo.com>
Message-ID: <Pine.LNX.4.62.0809042201200.5350@radix.cryptio.net>
References: <70204.70129.qm@web27402.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org



: Now, I would like to to access to the best fragments offsetsfrom each 
: document (hits.doc(i)).

I seem to recall that the recomended method for doing this is to subclass 
your favorite Formatter and record the information from each TokenGroup 
before delegating to the super class.

but there may be an easier way.

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 05 05:36:13 2008
Return-Path: <java-user-return-35936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89205 invoked from network); 5 Sep 2008 05:36:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2008 05:36:13 -0000
Received: (qmail 23675 invoked by uid 500); 5 Sep 2008 05:36:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23647 invoked by uid 500); 5 Sep 2008 05:36:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23636 invoked by uid 99); 5 Sep 2008 05:36:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 22:36:05 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=RCVD_BAD_ID,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 05:35:07 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id m855ZO7V017739
	for <java-user@lucene.apache.org>; Fri, 5 Sep 2008 08:35:24 +0300
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz.teamw.com with ESMTP
	 id m-kvfr%n; 5 Sep 2008 08:35:00 +0300
Message-ID: <48C0C508.7040506@teamware.com>
Date: Fri, 05 Sep 2008 15:35:04 +1000
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: Lucene User <java-user@lucene.apache.org>
Subject: Merging indexes - which is best option?
X-TWG-MDN: never
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Fri, 05 Sep 2008 08:35:24 +0300 (EEST)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

I am creating several temporary batches of indexes to separate indices and 
periodically will merge those batches to a set of master indices.  I'm using 
IndexWriter#addIndexesNoOptimise(), but problem that gives me is that the master 
may already contain the index for that document and I get a duplicate.

Duplicates are prevented in the temporary index, because when adding Documents, 
I call IndexWriter#deleteDocuments(Term) with my UID, before I add the Document.

I have two choices

a) merge indexes then clean up any duplicates in the master (or vice versa). 
Probably IndexWriter.deleteDocuments(Term[]) would suit here with all the UIDs 
of the incoming documents.

b) iterate through the Documents in the temporary index and add them to the master

b sounds worse as it seems an IndexWriter's Analyzer cannot be null and I guess 
there's a penalty in assembling the Document from the reader.

Any views?
Antony







---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 05 06:53:19 2008
Return-Path: <java-user-return-35937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34088 invoked from network); 5 Sep 2008 06:53:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2008 06:53:18 -0000
Received: (qmail 90569 invoked by uid 500); 5 Sep 2008 06:53:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90539 invoked by uid 500); 5 Sep 2008 06:53:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90517 invoked by uid 99); 5 Sep 2008 06:53:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Sep 2008 23:53:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of noble.paul@gmail.com designates 74.125.78.27 as permitted sender)
Received: from [74.125.78.27] (HELO ey-out-2122.google.com) (74.125.78.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 06:52:17 +0000
Received: by ey-out-2122.google.com with SMTP id 6so148225eyi.53
        for <java-user@lucene.apache.org>; Thu, 04 Sep 2008 23:52:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=GplcbNwFTGYkVd8pKj6cGBPfgAdeYtKkDqvBA2vGOgg=;
        b=ioroATJnZGK5l05PFwM93xG//G0UKsiuqkH3Advc2fgr8uUUlLuAFY8cXGe/nsLDiR
         9c3M+pqfnk9uEb3SWmn0zw+6loWqg0tskKWBaxazpm2S36d5lh6kXK62RRjUCmyd9QPU
         8Di+Xhyu0NxqX6QdOyr6CfEuyCl5uA0OVgtok=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=dvqkLcv6BEkwiqh0xix7V02HtbBNZh1vZU5QFo8Xf6ThvGLvxWTSzIWG4lj46YDwzA
         Ot3NuqzxVhHVPFkm9M0vXU1xDtDRKeI6w+DdGGuwT0Oitv79vF29e0YSkJzaQnbOq5wg
         BGs6HjXm4PGHPrugZSS1Ry8IM8hvRdvHiPc30=
Received: by 10.210.131.6 with SMTP id e6mr13253100ebd.10.1220597567443;
        Thu, 04 Sep 2008 23:52:47 -0700 (PDT)
Received: by 10.210.60.3 with HTTP; Thu, 4 Sep 2008 23:52:47 -0700 (PDT)
Message-ID: <5e76b0ad0809042352q2b6f30c3v56f3efd3e88fca10@mail.gmail.com>
Date: Fri, 5 Sep 2008 12:22:47 +0530
From: "=?UTF-8?B?Tm9ibGUgUGF1bCDgtKg=?= =?UTF-8?B?4LWL4LSs4LS/4LSz4LWN4oCNIOCkqOCli+CkrOCljeCks+CljQ==?=" <noble.paul@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How can we know if 2 lucene indexes are same?
In-Reply-To: <58B46075-2634-4E55-8463-C2FF56E312FD@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <5e76b0ad0808290235w45f762e3i2a476e8fe132dfb4@mail.gmail.com>
	 <C7CBD3C0-F1AD-42B3-91A5-1B3262B44EED@gmail.com>
	 <5e76b0ad0809032222l6bdbe192r8fc521bfd8f5f9ee@mail.gmail.com>
	 <9233ccac0809040208k6c5117desd698944b888d000e@mail.gmail.com>
	 <54A87861-7A1E-409D-B8E8-CF0F5284E0BF@mikemccandless.com>
	 <9233ccac0809040629x43b63503wa1196bedd9791747@mail.gmail.com>
	 <58B46075-2634-4E55-8463-C2FF56E312FD@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

SSBhbSBub3QgdXNpbmcgdGhlIHNhbWUgaW5kZXggd2l0aCBkaWZmZXJlbnQgd3JpdGVycy4gVGhl
c2UgYXJlIHR3bwpzZXBhcmF0ZSBpbmRleGVzIGJvdGggaGF2ZSB0aGVpciBvd24gcmVhZGVyL3dy
aXRlcgoKSSBqdXN0IHdhbnRlZCB0byBtaW5pbWl6ZSB0aGUgbmV0d29yayBsb2FkIGJ5IGF2b2lk
aW5nIHRoZSBkb3dubG9hZCBvZgphbiBvcHRpbWl6ZWQgaW5kZXggaWYgdGhlIGNvbnRlbnRzIGFy
ZSBpbmRlZWQgc2FtZS4KLS1ub2JsZQoKT24gVGh1LCBTZXAgNCwgMjAwOCBhdCA3OjM2IFBNLCBN
aWNoYWVsIE1jQ2FuZGxlc3MKPGx1Y2VuZUBtaWtlbWNjYW5kbGVzcy5jb20+IHdyb3RlOgo+Cj4g
U29ycnksIEkgc2hvdWxkIGhhdmUgc2FpZDogeW91IG11c3QgYWx3YXlzIHVzZSB0aGUgc2FtZSB3
cml0ZXIsIGllIGFzIG9mCj4gMi4zLCB3aGlsZSBJbmRleFdyaXRlci5vcHRpbWl6ZSAob3Igbm9y
bWFsIHNlZ21lbnQgbWVyZ2luZykgaXMgcnVubmluZywKPiB1bmRlciBvbmUgdGhyZWFkLCBhbm90
aGVyIHRocmVhZCBjYW4gdXNlIHRoYXQgKnNhbWUqIHdyaXRlciB0bwo+IGFkZC9kZWxldGUvdXBk
YXRlIGRvY3VtZW50cywgYW5kIGJvdGggYXJlIGZyZWUgdG8gbWFrZSBjaGFuZ2VzIHRvIHRoZSBp
bmRleC4KPgo+IEJlZm9yZSAyLjMsIG9wdGltaXplKCkgd2FzIGZ1bGx5IHN5bmNocm9uaXplZCBh
bmQgYmxvY2tlZCBhZGQvdXBkYXRlL2RlbGV0ZQo+IGRvY3VtZW50cyBmcm9tIGNoYW5naW5nIHRo
ZSBpbmRleCB1bnRpbCB0aGUgb3B0aW1pemUoKSBjYWxsIGNvbXBsZXRlZC4KPgo+IFNvLCB5b3Vy
IHRlc3QgaXMgZXhwZWN0ZWQgdG8gZmFpbDogeW91J3JlIG5vdCBhbGxvd2VkIHRvIG9wZW4gMiAi
d3JpdGVycyIgb24KPiBhIHNpbmdsZSBpbmRleCBhdCB0aGUgc2FtZSB0aW1lLCB3aGVyZSAid3Jp
dGVyIiBpbmNsdWRlcyBhbiBJbmRleFJlYWRlciB0aGF0Cj4gZGVsZXRlcyBkb2N1bWVudHM7IHNv
IHRob3NlIGV4Y2VwdGlvbnMgKExvY2tPYnRhaW5GYWlsZWQsIFN0YWxlUmVhZGVyKSBhcmUKPiBl
eHBlY3RlZC4KPgo+IE1pa2UKPgo+IOWPtuWPjOaYjiB3cm90ZToKPgo+PiBJIGRvbid0IGFncmVl
ZCB3aXRoIE1pY2hhZWwgTWNDYW5kbGVzcy4gOikKPj4KPj4gSSBrb253IHRoYXQgYWZ0ZXIgMi4z
LCBhZGQgYW5kIGRlbGV0ZSBjYW4gcnVuIGluIG9uZSBJbmRleFdyaXRlciBhdCBvbmUKPj4gdGlt
ZSwgYW5kIGFsc28gbHVjZW5lIGhhcyBhIHVwZGF0ZSBtZXRob2Qgd2hpY2ggZGVsZXRlIGRvY3Vt
ZW50cyBieSB0ZXJtCj4+IHRoZW4gYWRkIHRoZSBuZXcgZG9jdW1lbnQuCj4+Cj4+IEluIG15IHRl
c3QsIGVpdGhlciBMb2NrT2J0YWluRmFpbGVkRXhjZXB0aW9uIHdpdGggdGhyZWFkIHNsZWVwIHNl
bnRlbmNlOgo+Pgo+PiBvcmcuYXBhY2hlLmx1Y2VuZS5zdG9yZS5Mb2NrT2J0YWluRmFpbGVkRXhj
ZXB0aW9uOiBMb2NrIG9idGFpbiB0aW1lZCBvdXQ6Cj4+IFNpbXBsZUZTTG9ja0BFOlxpbmRleFx3
cml0ZS5sb2NrCj4+IGF0IG9yZy5hcGFjaGUubHVjZW5lLnN0b3JlLkxvY2sub2J0YWluKExvY2su
amF2YTo4NSkKPj4gYXQKPj4KPj4gb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguRGlyZWN0b3J5SW5k
ZXhSZWFkZXIuYWNxdWlyZVdyaXRlTG9jayhEaXJlY3RvcnlJbmRleFJlYWRlci5qYXZhOjI5OCkK
Pj4gYXQKPj4gb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguSW5kZXhSZWFkZXIuZGVsZXRlRG9jdW1l
bnQoSW5kZXhSZWFkZXIuamF2YTo3NTApCj4+IGF0Cj4+IG9yZy5hcGFjaGUubHVjZW5lLmluZGV4
LkluZGV4UmVhZGVyLmRlbGV0ZURvY3VtZW50cyhJbmRleFJlYWRlci5qYXZhOjc4NikKPj4gYXQg
b3JnLnRlc3QuSW5kZXhUaHJlYWQucnVuKEluZGV4VGhyZWFkLmphdmE6MzMpCj4+Cj4+IG9yIFN0
YWxlUmVhZGVyRXhjZXB0aW9uIHdpdGhvdXQgdGhyZWFkIHNsZWVwIHNlbnRlbmNlOgo+Pgo+PiBv
cmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5TdGFsZVJlYWRlckV4Y2VwdGlvbjogSW5kZXhSZWFkZXIg
b3V0IG9mIGRhdGUgYW5kCj4+IG5vCj4+IGxvbmdlciB2YWxpZCBmb3IgZGVsZXRlLCB1bmRlbGV0
ZSwgb3Igc2V0Tm9ybSBvcGVyYXRpb25zCj4+IGF0Cj4+Cj4+IG9yZy5hcGFjaGUubHVjZW5lLmlu
ZGV4LkRpcmVjdG9yeUluZGV4UmVhZGVyLmFjcXVpcmVXcml0ZUxvY2soRGlyZWN0b3J5SW5kZXhS
ZWFkZXIuamF2YTozMDgpCj4+IGF0Cj4+IG9yZy5hcGFjaGUubHVjZW5lLmluZGV4LkluZGV4UmVh
ZGVyLmRlbGV0ZURvY3VtZW50KEluZGV4UmVhZGVyLmphdmE6NzUwKQo+PiBhdAo+PiBvcmcuYXBh
Y2hlLmx1Y2VuZS5pbmRleC5JbmRleFJlYWRlci5kZWxldGVEb2N1bWVudHMoSW5kZXhSZWFkZXIu
amF2YTo3ODYpCj4+IGF0IG9yZy50ZXN0LkluZGV4VGhyZWFkLnJ1bihJbmRleFRocmVhZC5qYXZh
OjMxKQo+Pgo+PiBNeSB0ZXN0IGNvZGU6Cj4+Cj4+Cj4+IHB1YmxpYyBjbGFzcyBNYWluIHsKPj4K
Pj4gcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykgdGhyb3dzIElPRXhjZXB0
aW9uIHsKPj4gIERpcmVjdG9yeSBkaXJlY3RvcnkgPSBGU0RpcmVjdG9yeS5nZXREaXJlY3Rvcnko
ImU6L2luZGV4Iik7Cj4+ICBJbmRleFdyaXRlciB3cml0ZXIgPSBuZXcgSW5kZXhXcml0ZXIoZGly
ZWN0b3J5LCBudWxsLCBmYWxzZSk7Cj4+ICBEb2N1bWVudCBkb2N1bWVudCA9IG5ldyBEb2N1bWVu
dCgpOwo+PiAgZG9jdW1lbnQuYWRkKG5ldyBGaWVsZCgiYmJiIiwgImJiYiIsIFN0b3JlLllFUywg
SW5kZXguVU5fVE9LRU5JWkVEKSk7Cj4+ICB3cml0ZXIuYWRkRG9jdW1lbnQoZG9jdW1lbnQpOwo+
Pgo+PiAgVGhyZWFkIHQgPSBuZXcgSW5kZXhUaHJlYWQoKTsKPj4gIHQuc3RhcnQoKTsKPj4KPj4g
IHRyeSB7Cj4+ICBUaHJlYWQuc2xlZXAoMTAwMCk7Cj4+ICB9IGNhdGNoIChJbnRlcnJ1cHRlZEV4
Y2VwdGlvbiBlKSB7Cj4+ICAvLyBUT0RPIEF1dG8tZ2VuZXJhdGVkIGNhdGNoIGJsb2NrCj4+ICBl
LnByaW50U3RhY2tUcmFjZSgpOwo+PiAgfQo+Pgo+PiAgd3JpdGVyLm9wdGltaXplKCk7Cj4+ICB3
cml0ZXIuY2xvc2UoKTsKPj4gIFN5c3RlbS5vdXQucHJpbnRsbigib3V0Iik7Cj4+IH0KPj4gfQo+
Pgo+PiBwdWJsaWMgY2xhc3MgSW5kZXhUaHJlYWQgZXh0ZW5kcyBUaHJlYWQgewo+Pgo+PiBAT3Zl
cnJpZGUKPj4gcHVibGljIHZvaWQgcnVuKCkgewo+PiAgRGlyZWN0b3J5IGRpcmVjdG9yeTsKPj4g
IHRyeSB7Cj4+ICB0cnkgewo+PiAgIFRocmVhZC5zbGVlcCgxMCk7Cj4+ICB9IGNhdGNoIChJbnRl
cnJ1cHRlZEV4Y2VwdGlvbiBlKSB7Cj4+ICAgLy8gVE9ETyBBdXRvLWdlbmVyYXRlZCBjYXRjaCBi
bG9jawo+PiAgIGUucHJpbnRTdGFja1RyYWNlKCk7Cj4+ICB9Cj4+Cj4+ICBkaXJlY3RvcnkgPSBG
U0RpcmVjdG9yeS5nZXREaXJlY3RvcnkoImU6L2luZGV4Iik7Cj4+ICBTeXN0ZW0ub3V0LnByaW50
bG4oInRocmVhZCBiZWdpbiIpOwo+PiAgLy9JbmRleFdyaXRlciByZWFkZXIgPSBuZXcgSW5kZXhX
cml0ZXIoZGlyZWN0b3J5LCBudWxsLCBmYWxzZSk7Cj4+ICBJbmRleFJlYWRlciByZWFkZXIgPSBJ
bmRleFJlYWRlci5vcGVuKGRpcmVjdG9yeSk7Cj4+ICBUZXJtIHRlcm0gPSBuZXcgVGVybSgiYmJi
IiwgImJiYiIpOwo+PiAgcmVhZGVyLmRlbGV0ZURvY3VtZW50cyh0ZXJtKTsKPj4gIHJlYWRlci5j
bG9zZSgpOwo+PiAgU3lzdGVtLm91dC5wcmludGxuKCJ0aHJlYWQgZW5kIik7Cj4+ICB9IGNhdGNo
IChJT0V4Y2VwdGlvbiBlKSB7Cj4+ICAvLyBUT0RPIEF1dG8tZ2VuZXJhdGVkIGNhdGNoIGJsb2Nr
Cj4+ICBlLnByaW50U3RhY2tUcmFjZSgpOwo+PiAgfQo+PiB9Cj4+IH0KPj4KPj4KPj4KPj4gMjAw
OC85LzQsIE1pY2hhZWwgTWNDYW5kbGVzcyA8bHVjZW5lQG1pa2VtY2NhbmRsZXNzLmNvbT46Cj4+
Pgo+Pj4KPj4+IEFjdHVhbGx5LCBhcyBvZiAyLjMsIHRoaXMgaXMgbm8gbG9uZ2VyIHRydWU6IG1l
cmdlcyBhbmQgb3B0aW1pemluZyBydW4gaW4KPj4+IHRoZSBiYWNrZ3JvdW5kLCBhbmQgYWxsb3cg
YWRkL3VwZGF0ZS9kZWxldGUgZG9jdW1lbnRzIHRvIHJ1biBhdCB0aGUgc2FtZQo+Pj4gdGltZS4K
Pj4+Cj4+PiBJIHRoaW5rIGl0J3MgcHJvYmFibHkgYmVzdCB0byB1c2UgYXBwbGljYXRpb24gbG9n
aWMgKG91dHNpZGUgb2YgTHVjZW5lKQo+Pj4gdG8KPj4+IGtlZXAgdHJhY2sgb2Ygd2hhdCB1cGRh
dGVzIGhhcHBlbmVkIHRvIHRoZSBtYXN0ZXIgd2hpbGUgdGhlIHNsYXZlIHdhcwo+Pj4gb3B0aW1p
emluZy4KPj4+Cj4+PiBNaWtlCj4+Pgo+Pj4g5Y+25Y+M5piOIHdyb3RlOgo+Pj4KPj4+IE5vIGRv
Y3VtZW50cyBjYW4gYWRkZWQgaW50byBpbmRleCB3aGVuIHRoZSBpbmRleCBpcyBvcHRpbWl6aW5n
LCAgb3IKPj4+Pgo+Pj4+IG9wdGltaXppbmcgY2FuJ3QgcnVuIGR1cmxpbmcgZG9jdW1lbnRzIGFk
ZGluZyB0byB0aGUgaW5kZXguCj4+Pj4gU28sIHdpdGhvdXQgb3RoZXIgZXJyb3IsIEkgdGhpbmsg
d2UgY2FuIGJlbGVpdmUgdGhlIHR3byBpbmRleCBhcmUgaW5kZWVkCj4+Pj4gdGhlCj4+Pj4gc2Ft
ZS4KPj4+Pgo+Pj4+IDopCj4+Pj4KPj4+PiAyMDA4LzkvNCBOb2JsZSBQYXVsIOC0qOC1i+C0rOC0
v+C0s+C1jeKAjSDgpKjgpYvgpKzgpY3gpLPgpY0gPG5vYmxlLnBhdWxAZ21haWwuY29tPgo+Pj4+
Cj4+Pj4gVGhlIHVzZSBjYXNlIGlzIGFzIGZvbGxvd3MKPj4+Pj4KPj4+Pj4gSSBoYXZlIHR3byBp
bmRleGVzIC4gT25lIGF0IHRoZSBtYXN0ZXIgYW5kIG9uZSBhdCB0aGUgc2xhdmUuIFRoZSB1c2Vy
Cj4+Pj4+IG9jY2FzaW9uYWxseSBrZWVwcyBjb21taXR0aW5nIG9uIHRoZSBtYXN0ZXIgYW5kIHRo
ZSBkZWx0YSBpcwo+Pj4+PiByZXBsaWNhdGVkIGV2ZXJ5dGltZS4gQnV0IHdoZW4gdGhlIG9wdGlt
aXplIGhhcHBlbnMgdGhlIHRyYW5zZmVyIHNpemUKPj4+Pj4gY2FuIGJlIHJlYWxseSBsYXJnZS4g
U28gSSBhbSB0aGlua2luZyBvZiAgZG9pbmcgdGhlIG9wdGltaXplCj4+Pj4+IHNlcGFyYXRlbHkg
b24gbWFzdGVyIGFuZCBzbGF2ZSAuCj4+Pj4+Cj4+Pj4+IFNvIGZhciwgc28gZ29vZC4gQnV0IGhv
dyBjYW4gSSByZWFsbHkga25vdyB0aGF0IGFmdGVyIHRoZSBvcHRpbWl6ZSB0aGUKPj4+Pj4gaW5k
ZXhlcyBhcmUgaW5kZWVkIHRoZSBzYW1lIG9yIG5vIGRvY3VtZW50cyBnb3QgYWRkZWQgaW4gYmV0
d2Vlbi4/Cj4+Pj4+Cj4+Pj4+Cj4+Pj4+Cj4+Pj4+IE9uIEZyaSwgQXVnIDI5LCAyMDA4IGF0IDM6
MTMgUE0sIEthcmwgV2V0dGluIDxrYXJsLndldHRpbkBnbWFpbC5jb20+Cj4+Pj4+IHdyb3RlOgo+
Pj4+Pgo+Pj4+Pj4KPj4+Pj4+IDI5IGF1ZyAyMDA4IGtsLiAxMS4zNSBza3JldiBOb2JsZSBQYXVs
IOC0qOC1i+C0rOC0v+C0s+C1jeKAjSDgpKjgpYvgpKzgpY3gpLPgpY06Cj4+Pj4+Pgo+Pj4+Pj4g
aGksCj4+Pj4+Pj4KPj4+Pj4+PiBJIHdpc2ggdG8ga25vdyBpZiB0aGUgY29udGVudHMgb2YgdHdv
IGluZGV4ZXMgaGF2ZSBzYW1lIGRhdGEuCj4+Pj4+Pj4gd2lsbCBhbGwgdGhlIGZpbGVzIGJlIGV4
YWN0bHkgc2FtZSBpZiBJIHB1dCBzYW1lIHNldCBvZiBkb2N1bWVudHMgdG8KPj4+Pj4+Pgo+Pj4+
Pj4gYm90aD8KPj4+Pj4KPj4+Pj4+Cj4+Pj4+PiBJZiB5b3UgaW5zZXJ0IHRoZSBkb2N1bWVudHMg
aW4gdGhlIHNhbWUgb3JkZXIgd2l0aCB0aGUgc2FtZSBzZXR0aW5ncwo+Pj4+Pj4gYW5kCj4+Pj4+
PiBib3RoIGluZGljZXMgYXJlIG9wdGltaXplZCwgdGhlbiB0aGUgZmlsZXMgb3VnaHQgdG8gYmUg
aWRlbnRpdGljYWwuCj4+Pj4+PiBJJ20KPj4+Pj4+IGhvd2V2ZXIgbm90IHN1cmUuCj4+Pj4+Pgo+
Pj4+Pj4gVGhlIGluc3RhbnRpYXRlZCBpbmRleCBjb250cmliIG1vZHVsZSBjb250YWlucyBhIHRl
c3QgdGhhdCBhc3NlcnQgdHdvCj4+Pj4+Pgo+Pj4+PiBpbmRleAo+Pj4+Pgo+Pj4+Pj4gcmVhZGVy
cyBhcmUgaWRlbnRpY2FsLiBZb3UgY291bGQgdXNlIHRoaXMgdG8gYmUgcmVhbGx5IHN1cmUsIGJ1
dCBpdCBpdAo+Pj4+Pj4gYQo+Pj4+Pj4gcmF0aGVyIGxvbmcgcnVubmluZyBwcm9jZXNzIGZvciBh
IGxhcmdlIGluZGV4Ogo+Pj4+Pj4KPj4+Pj4+Cj4+Pj4+Pgo+Pj4+Pgo+Pj4+PiBodHRwOi8vc3Zu
LmFwYWNoZS5vcmcvcmVwb3MvYXNmL2x1Y2VuZS9qYXZhL3RydW5rL2NvbnRyaWIvaW5zdGFudGlh
dGVkL3NyYy90ZXN0L29yZy9hcGFjaGUvbHVjZW5lL3N0b3JlL2luc3RhbnRpYXRlZC9UZXN0SW5k
aWNlc0VxdWFscy5qYXZhCj4+Pj4+Cj4+Pj4+Pgo+Pj4+Pj4KPj4+Pj4+IFBlcmhhcHMgeW91IHNo
b3VsZCBleHBsYWluIHdoeSB5b3UgbmVlZCB0byBkbyB0aGlzLgo+Pj4+Pj4KPj4+Pj4+Cj4+Pj4+
PiAgICAgIGthcmwKPj4+Pj4+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+Pj4+Pj4gVG8gdW5zdWJzY3JpYmUsIGUt
bWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4+Pj4+PiBGb3Ig
YWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hl
Lm9yZwo+Pj4+Pj4KPj4+Pj4+Cj4+Pj4+Pgo+Pj4+Pgo+Pj4+Pgo+Pj4+PiAtLQo+Pj4+PiAtLU5v
YmxlIFBhdWwKPj4+Pj4KPj4+Pj4KPj4+Cj4+PiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPj4+IFRvIHVuc3Vic2Ny
aWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+Pj4g
Rm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFw
YWNoZS5vcmcKPj4+Cj4+Pgo+Cj4KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiBUbyB1bnN1YnNjcmliZSwgZS1t
YWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPiBGb3IgYWRkaXRp
b25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+
Cj4KCgoKLS0gCi0tTm9ibGUgUGF1bAo=


From java-user-return-35938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 05 07:01:15 2008
Return-Path: <java-user-return-35938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39178 invoked from network); 5 Sep 2008 07:01:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2008 07:01:15 -0000
Received: (qmail 99438 invoked by uid 500); 5 Sep 2008 07:01:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99405 invoked by uid 500); 5 Sep 2008 07:01:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99394 invoked by uid 99); 5 Sep 2008 07:01:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 00:01:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 07:00:09 +0000
Received: from [172.18.249.244] (172.18.249.244) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.1.291.1; Fri, 5 Sep 2008 09:00:38 +0200
Subject: Re: ramdisks
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <1bcb7c7f0809040858s419b7008q3c4ec13a9da0e6a2@mail.gmail.com>
References: <1bcb7c7f0809040858s419b7008q3c4ec13a9da0e6a2@mail.gmail.com>
Content-Type: text/plain
Organization: Statsbiblioteket
Date: Fri, 5 Sep 2008 09:00:37 +0200
Message-ID: <1220598037.7526.50.camel@PC990.sb.statsbiblioteket.dk>
MIME-Version: 1.0
X-Mailer: Evolution 2.22.3.1 (2.22.3.1-1.fc9) 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, 2008-09-04 at 17:58 +0200, Cam Bazz wrote:
> anyone using ramdisks for storage? there is ramsam and there is also fusion
> io. but they are kinda expensive. any other alternatives I wonder?

We've done some comparisons of RAM (Lucene RAMDirectory) vs. Flash-SSD
vs. conventional harddrives. We've seen significant improvements for
Flash-SSDs over harddrives, but less for RAM over Flash-SSDs.

For our setup (Linux, Flash-SSDs, 4 core Xeon, simple searches, 37GB
index, 10M documents, ~70 fields), the CPU seems to be the bottleneck.
Testing with a commodity Flash-SSD might be worth trying before going
all-out with the RAM-based systems.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 05 07:10:51 2008
Return-Path: <java-user-return-35939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43411 invoked from network); 5 Sep 2008 07:10:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2008 07:10:51 -0000
Received: (qmail 7920 invoked by uid 500); 5 Sep 2008 07:10:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7882 invoked by uid 500); 5 Sep 2008 07:10:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7871 invoked by uid 99); 5 Sep 2008 07:10:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 00:10:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.litwan@wyona.com designates 195.226.6.75 as permitted sender)
Received: from [195.226.6.75] (HELO server1.example.com) (195.226.6.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 07:09:43 +0000
Received: from [192.168.1.56] (unknown [195.226.6.66])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by server1.example.com (Postfix) with ESMTP id 19FD710C9B4
	for <java-user@lucene.apache.org>; Fri,  5 Sep 2008 09:18:42 +0200 (CEST)
Message-ID: <48C0DB32.2050704@wyona.com>
Date: Fri, 05 Sep 2008 09:09:38 +0200
From: simon litwan <simon.litwan@wyona.com>
User-Agent: Thunderbird 2.0.0.16 (X11/20080724)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: delete/reset the index
References: <48BF8B87.8030104@wyona.com>	 <0490D451-CA4B-42DA-85FF-13AF1FA8B096@mikemccandless.com> <9233ccac0809040329v27f5190biea4ea8c8241e7ca@mail.gmail.com>
In-Reply-To: <9233ccac0809040329v27f5190biea4ea8c8241e7ca@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

 schrieb:
> Agree with Michael McCandless!!  By that way,it is handling gracefully.
>   
thanks for your hints. both of you :)
will try how you suggested.

simon
> 2008/9/4 Michael McCandless <lucene@mikemccandless.com>
>
>   
>> If you're on Windows, the safest way to do this in general, if there is any
>> possibility that readers are still using the index, is to create a new
>> IndexWriter with create=true.  Windows does not let you remove open files.
>>  IndexWriter will gracefully handle failed deletes by retrying them over
>> time...
>>
>> Mike
>>
>>
>> simon litwan wrote:
>>
>>  hi all
>>     
>>> i would like to delete the the index to allow to start reindexing from
>>> scratch.
>>> is there a way to delete all entries in a index?
>>>
>>> any hint is very appreciated.
>>>
>>> simon
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 05 07:34:00 2008
Return-Path: <java-user-return-35940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53387 invoked from network); 5 Sep 2008 07:34:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2008 07:34:00 -0000
Received: (qmail 31669 invoked by uid 500); 5 Sep 2008 07:33:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31487 invoked by uid 500); 5 Sep 2008 07:33:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31476 invoked by uid 99); 5 Sep 2008 07:33:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 00:33:50 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yeshuangming@gmail.com designates 209.85.217.30 as permitted sender)
Received: from [209.85.217.30] (HELO mail-gx0-f30.google.com) (209.85.217.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 07:32:51 +0000
Received: by gxk11 with SMTP id 11so3439572gxk.5
        for <java-user@lucene.apache.org>; Fri, 05 Sep 2008 00:33:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=5OA1FUU+eyx4fbpiyEyqLK61S5Ktku4divwIiuU1iN0=;
        b=twiaQ7pb+wNoHAgAHSE5j56u91wvESPj/0rIxGEJTMPK0kypPIFvBJzF+JWGld/IsF
         AARd5JZc6TD9rRFgUisUfWMQcIfHrmLe7WnlKygMbLgsquCerqbMnTFyeUqJXxh1L24T
         kLClSZLnCQ3GJQjFwfuS734HjWZD8R1UjVq3Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=n7K12By/I5f/dDz/czLEvEtGuZQD7CO6OJ6buKQKFp0idxTaE+McD85YAIshrTvfBf
         YvZXNyLZUk9legJeF1gpOgZoFvdpE15T+ajT1fFaBk3idpI/ml+zowl14ziWq5gfxHiO
         AyHRVFMz+sL6nhMVrlGY+G/MTA0aBC3YWCJUE=
Received: by 10.151.155.12 with SMTP id h12mr15929300ybo.136.1220600001924;
        Fri, 05 Sep 2008 00:33:21 -0700 (PDT)
Received: by 10.151.84.5 with HTTP; Fri, 5 Sep 2008 00:33:21 -0700 (PDT)
Message-ID: <9233ccac0809050033l231cf0d7y9a5a3a3abe6764fb@mail.gmail.com>
Date: Fri, 5 Sep 2008 15:33:21 +0800
From: "=?GB2312?B?0rbLq8P3?=" <yeshuangming@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How can we know if 2 lucene indexes are same?
In-Reply-To: <5e76b0ad0809042352q2b6f30c3v56f3efd3e88fca10@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_39276_23640138.1220600001919"
References: <5e76b0ad0808290235w45f762e3i2a476e8fe132dfb4@mail.gmail.com>
	 <C7CBD3C0-F1AD-42B3-91A5-1B3262B44EED@gmail.com>
	 <5e76b0ad0809032222l6bdbe192r8fc521bfd8f5f9ee@mail.gmail.com>
	 <9233ccac0809040208k6c5117desd698944b888d000e@mail.gmail.com>
	 <54A87861-7A1E-409D-B8E8-CF0F5284E0BF@mikemccandless.com>
	 <9233ccac0809040629x43b63503wa1196bedd9791747@mail.gmail.com>
	 <58B46075-2634-4E55-8463-C2FF56E312FD@mikemccandless.com>
	 <5e76b0ad0809042352q2b6f30c3v56f3efd3e88fca10@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_39276_23640138.1220600001919
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

RG8geW91IHVzZSBpbmRleCBhdCB0aGUgc2xhdmUgYXMgYSBiYWNrdXAgZm9yIGluZGV4IGF0IHRo
ZSBtYXN0ZXI/PwpBbmQgaW4gY2FzZSB0aGUgbWFzdGVyIGJyZWFrIGRvd24sIHlvdSBjYW4gdHVy
biB0aGUgcXVlcnkgdG8gdGhlIHNsYXZlPz8KCldoZW4gYWRkIGEgRG9jdW1lbnQgdG8gbWFzdGVy
LCBhbHNvIGFkZCBpdCB0byB0aGUgc2xhdmU/CgpTb3JyeSwgSSBkb24ndCBjbGVhciBhYm91dCB3
aGF0IHlvdXIgcHJvYmxlbSwgY2FuIHlvdSBzaG93IG1vcmUgZGV0YWlsIGFib3V0CndoYXQgZG8g
eW91IHdvcnJ5IGFib3V0PwoKMjAwOC85LzUgTm9ibGUgUGF1bCDgtKjgtYvgtKzgtL/gtLPgtY3i
gI0g4KSo4KWL4KSs4KWN4KSz4KWNIDxub2JsZS5wYXVsQGdtYWlsLmNvbT4KCj4gSSBhbSBub3Qg
dXNpbmcgdGhlIHNhbWUgaW5kZXggd2l0aCBkaWZmZXJlbnQgd3JpdGVycy4gVGhlc2UgYXJlIHR3
bwo+IHNlcGFyYXRlIGluZGV4ZXMgYm90aCBoYXZlIHRoZWlyIG93biByZWFkZXIvd3JpdGVyCj4K
PiBJIGp1c3Qgd2FudGVkIHRvIG1pbmltaXplIHRoZSBuZXR3b3JrIGxvYWQgYnkgYXZvaWRpbmcg
dGhlIGRvd25sb2FkIG9mCj4gYW4gb3B0aW1pemVkIGluZGV4IGlmIHRoZSBjb250ZW50cyBhcmUg
aW5kZWVkIHNhbWUuCj4gLS1ub2JsZQo+Cj4gT24gVGh1LCBTZXAgNCwgMjAwOCBhdCA3OjM2IFBN
LCBNaWNoYWVsIE1jQ2FuZGxlc3MKPiA8bHVjZW5lQG1pa2VtY2NhbmRsZXNzLmNvbT4gd3JvdGU6
Cj4gPgo+ID4gU29ycnksIEkgc2hvdWxkIGhhdmUgc2FpZDogeW91IG11c3QgYWx3YXlzIHVzZSB0
aGUgc2FtZSB3cml0ZXIsIGllIGFzIG9mCj4gPiAyLjMsIHdoaWxlIEluZGV4V3JpdGVyLm9wdGlt
aXplIChvciBub3JtYWwgc2VnbWVudCBtZXJnaW5nKSBpcyBydW5uaW5nLAo+ID4gdW5kZXIgb25l
IHRocmVhZCwgYW5vdGhlciB0aHJlYWQgY2FuIHVzZSB0aGF0ICpzYW1lKiB3cml0ZXIgdG8KPiA+
IGFkZC9kZWxldGUvdXBkYXRlIGRvY3VtZW50cywgYW5kIGJvdGggYXJlIGZyZWUgdG8gbWFrZSBj
aGFuZ2VzIHRvIHRoZQo+IGluZGV4Lgo+ID4KPiA+IEJlZm9yZSAyLjMsIG9wdGltaXplKCkgd2Fz
IGZ1bGx5IHN5bmNocm9uaXplZCBhbmQgYmxvY2tlZAo+IGFkZC91cGRhdGUvZGVsZXRlCj4gPiBk
b2N1bWVudHMgZnJvbSBjaGFuZ2luZyB0aGUgaW5kZXggdW50aWwgdGhlIG9wdGltaXplKCkgY2Fs
bCBjb21wbGV0ZWQuCj4gPgo+ID4gU28sIHlvdXIgdGVzdCBpcyBleHBlY3RlZCB0byBmYWlsOiB5
b3UncmUgbm90IGFsbG93ZWQgdG8gb3BlbiAyICJ3cml0ZXJzIgo+IG9uCj4gPiBhIHNpbmdsZSBp
bmRleCBhdCB0aGUgc2FtZSB0aW1lLCB3aGVyZSAid3JpdGVyIiBpbmNsdWRlcyBhbiBJbmRleFJl
YWRlcgo+IHRoYXQKPiA+IGRlbGV0ZXMgZG9jdW1lbnRzOyBzbyB0aG9zZSBleGNlcHRpb25zIChM
b2NrT2J0YWluRmFpbGVkLCBTdGFsZVJlYWRlcikKPiBhcmUKPiA+IGV4cGVjdGVkLgo+ID4KPiA+
IE1pa2UKPiA+Cj4gPiDlj7blj4zmmI4gd3JvdGU6Cj4gPgo+ID4+IEkgZG9uJ3QgYWdyZWVkIHdp
dGggTWljaGFlbCBNY0NhbmRsZXNzLiA6KQo+ID4+Cj4gPj4gSSBrb253IHRoYXQgYWZ0ZXIgMi4z
LCBhZGQgYW5kIGRlbGV0ZSBjYW4gcnVuIGluIG9uZSBJbmRleFdyaXRlciBhdCBvbmUKPiA+PiB0
aW1lLCBhbmQgYWxzbyBsdWNlbmUgaGFzIGEgdXBkYXRlIG1ldGhvZCB3aGljaCBkZWxldGUgZG9j
dW1lbnRzIGJ5IHRlcm0KPiA+PiB0aGVuIGFkZCB0aGUgbmV3IGRvY3VtZW50Lgo+ID4+Cj4gPj4g
SW4gbXkgdGVzdCwgZWl0aGVyIExvY2tPYnRhaW5GYWlsZWRFeGNlcHRpb24gd2l0aCB0aHJlYWQg
c2xlZXAgc2VudGVuY2U6Cj4gPj4KPiA+PiBvcmcuYXBhY2hlLmx1Y2VuZS5zdG9yZS5Mb2NrT2J0
YWluRmFpbGVkRXhjZXB0aW9uOiBMb2NrIG9idGFpbiB0aW1lZAo+IG91dDoKPiA+PiBTaW1wbGVG
U0xvY2tARTpcaW5kZXhcd3JpdGUubG9jawo+ID4+IGF0IG9yZy5hcGFjaGUubHVjZW5lLnN0b3Jl
LkxvY2sub2J0YWluKExvY2suamF2YTo4NSkKPiA+PiBhdAo+ID4+Cj4gPj4KPiBvcmcuYXBhY2hl
Lmx1Y2VuZS5pbmRleC5EaXJlY3RvcnlJbmRleFJlYWRlci5hY3F1aXJlV3JpdGVMb2NrKERpcmVj
dG9yeUluZGV4UmVhZGVyLmphdmE6Mjk4KQo+ID4+IGF0Cj4gPj4gb3JnLmFwYWNoZS5sdWNlbmUu
aW5kZXguSW5kZXhSZWFkZXIuZGVsZXRlRG9jdW1lbnQoSW5kZXhSZWFkZXIuamF2YTo3NTApCj4g
Pj4gYXQKPiA+Pgo+IG9yZy5hcGFjaGUubHVjZW5lLmluZGV4LkluZGV4UmVhZGVyLmRlbGV0ZURv
Y3VtZW50cyhJbmRleFJlYWRlci5qYXZhOjc4NikKPiA+PiBhdCBvcmcudGVzdC5JbmRleFRocmVh
ZC5ydW4oSW5kZXhUaHJlYWQuamF2YTozMykKPiA+Pgo+ID4+IG9yIFN0YWxlUmVhZGVyRXhjZXB0
aW9uIHdpdGhvdXQgdGhyZWFkIHNsZWVwIHNlbnRlbmNlOgo+ID4+Cj4gPj4gb3JnLmFwYWNoZS5s
dWNlbmUuaW5kZXguU3RhbGVSZWFkZXJFeGNlcHRpb246IEluZGV4UmVhZGVyIG91dCBvZiBkYXRl
Cj4gYW5kCj4gPj4gbm8KPiA+PiBsb25nZXIgdmFsaWQgZm9yIGRlbGV0ZSwgdW5kZWxldGUsIG9y
IHNldE5vcm0gb3BlcmF0aW9ucwo+ID4+IGF0Cj4gPj4KPiA+Pgo+IG9yZy5hcGFjaGUubHVjZW5l
LmluZGV4LkRpcmVjdG9yeUluZGV4UmVhZGVyLmFjcXVpcmVXcml0ZUxvY2soRGlyZWN0b3J5SW5k
ZXhSZWFkZXIuamF2YTozMDgpCj4gPj4gYXQKPiA+PiBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5J
bmRleFJlYWRlci5kZWxldGVEb2N1bWVudChJbmRleFJlYWRlci5qYXZhOjc1MCkKPiA+PiBhdAo+
ID4+Cj4gb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguSW5kZXhSZWFkZXIuZGVsZXRlRG9jdW1lbnRz
KEluZGV4UmVhZGVyLmphdmE6Nzg2KQo+ID4+IGF0IG9yZy50ZXN0LkluZGV4VGhyZWFkLnJ1bihJ
bmRleFRocmVhZC5qYXZhOjMxKQo+ID4+Cj4gPj4gTXkgdGVzdCBjb2RlOgo+ID4+Cj4gPj4KPiA+
PiBwdWJsaWMgY2xhc3MgTWFpbiB7Cj4gPj4KPiA+PiBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihT
dHJpbmdbXSBhcmdzKSB0aHJvd3MgSU9FeGNlcHRpb24gewo+ID4+ICBEaXJlY3RvcnkgZGlyZWN0
b3J5ID0gRlNEaXJlY3RvcnkuZ2V0RGlyZWN0b3J5KCJlOi9pbmRleCIpOwo+ID4+ICBJbmRleFdy
aXRlciB3cml0ZXIgPSBuZXcgSW5kZXhXcml0ZXIoZGlyZWN0b3J5LCBudWxsLCBmYWxzZSk7Cj4g
Pj4gIERvY3VtZW50IGRvY3VtZW50ID0gbmV3IERvY3VtZW50KCk7Cj4gPj4gIGRvY3VtZW50LmFk
ZChuZXcgRmllbGQoImJiYiIsICJiYmIiLCBTdG9yZS5ZRVMsIEluZGV4LlVOX1RPS0VOSVpFRCkp
Owo+ID4+ICB3cml0ZXIuYWRkRG9jdW1lbnQoZG9jdW1lbnQpOwo+ID4+Cj4gPj4gIFRocmVhZCB0
ID0gbmV3IEluZGV4VGhyZWFkKCk7Cj4gPj4gIHQuc3RhcnQoKTsKPiA+Pgo+ID4+ICB0cnkgewo+
ID4+ICBUaHJlYWQuc2xlZXAoMTAwMCk7Cj4gPj4gIH0gY2F0Y2ggKEludGVycnVwdGVkRXhjZXB0
aW9uIGUpIHsKPiA+PiAgLy8gVE9ETyBBdXRvLWdlbmVyYXRlZCBjYXRjaCBibG9jawo+ID4+ICBl
LnByaW50U3RhY2tUcmFjZSgpOwo+ID4+ICB9Cj4gPj4KPiA+PiAgd3JpdGVyLm9wdGltaXplKCk7
Cj4gPj4gIHdyaXRlci5jbG9zZSgpOwo+ID4+ICBTeXN0ZW0ub3V0LnByaW50bG4oIm91dCIpOwo+
ID4+IH0KPiA+PiB9Cj4gPj4KPiA+PiBwdWJsaWMgY2xhc3MgSW5kZXhUaHJlYWQgZXh0ZW5kcyBU
aHJlYWQgewo+ID4+Cj4gPj4gQE92ZXJyaWRlCj4gPj4gcHVibGljIHZvaWQgcnVuKCkgewo+ID4+
ICBEaXJlY3RvcnkgZGlyZWN0b3J5Owo+ID4+ICB0cnkgewo+ID4+ICB0cnkgewo+ID4+ICAgVGhy
ZWFkLnNsZWVwKDEwKTsKPiA+PiAgfSBjYXRjaCAoSW50ZXJydXB0ZWRFeGNlcHRpb24gZSkgewo+
ID4+ICAgLy8gVE9ETyBBdXRvLWdlbmVyYXRlZCBjYXRjaCBibG9jawo+ID4+ICAgZS5wcmludFN0
YWNrVHJhY2UoKTsKPiA+PiAgfQo+ID4+Cj4gPj4gIGRpcmVjdG9yeSA9IEZTRGlyZWN0b3J5Lmdl
dERpcmVjdG9yeSgiZTovaW5kZXgiKTsKPiA+PiAgU3lzdGVtLm91dC5wcmludGxuKCJ0aHJlYWQg
YmVnaW4iKTsKPiA+PiAgLy9JbmRleFdyaXRlciByZWFkZXIgPSBuZXcgSW5kZXhXcml0ZXIoZGly
ZWN0b3J5LCBudWxsLCBmYWxzZSk7Cj4gPj4gIEluZGV4UmVhZGVyIHJlYWRlciA9IEluZGV4UmVh
ZGVyLm9wZW4oZGlyZWN0b3J5KTsKPiA+PiAgVGVybSB0ZXJtID0gbmV3IFRlcm0oImJiYiIsICJi
YmIiKTsKPiA+PiAgcmVhZGVyLmRlbGV0ZURvY3VtZW50cyh0ZXJtKTsKPiA+PiAgcmVhZGVyLmNs
b3NlKCk7Cj4gPj4gIFN5c3RlbS5vdXQucHJpbnRsbigidGhyZWFkIGVuZCIpOwo+ID4+ICB9IGNh
dGNoIChJT0V4Y2VwdGlvbiBlKSB7Cj4gPj4gIC8vIFRPRE8gQXV0by1nZW5lcmF0ZWQgY2F0Y2gg
YmxvY2sKPiA+PiAgZS5wcmludFN0YWNrVHJhY2UoKTsKPiA+PiAgfQo+ID4+IH0KPiA+PiB9Cj4g
Pj4KPiA+Pgo+ID4+Cj4gPj4gMjAwOC85LzQsIE1pY2hhZWwgTWNDYW5kbGVzcyA8bHVjZW5lQG1p
a2VtY2NhbmRsZXNzLmNvbT46Cj4gPj4+Cj4gPj4+Cj4gPj4+IEFjdHVhbGx5LCBhcyBvZiAyLjMs
IHRoaXMgaXMgbm8gbG9uZ2VyIHRydWU6IG1lcmdlcyBhbmQgb3B0aW1pemluZyBydW4KPiBpbgo+
ID4+PiB0aGUgYmFja2dyb3VuZCwgYW5kIGFsbG93IGFkZC91cGRhdGUvZGVsZXRlIGRvY3VtZW50
cyB0byBydW4gYXQgdGhlCj4gc2FtZQo+ID4+PiB0aW1lLgo+ID4+Pgo+ID4+PiBJIHRoaW5rIGl0
J3MgcHJvYmFibHkgYmVzdCB0byB1c2UgYXBwbGljYXRpb24gbG9naWMgKG91dHNpZGUgb2YgTHVj
ZW5lKQo+ID4+PiB0bwo+ID4+PiBrZWVwIHRyYWNrIG9mIHdoYXQgdXBkYXRlcyBoYXBwZW5lZCB0
byB0aGUgbWFzdGVyIHdoaWxlIHRoZSBzbGF2ZSB3YXMKPiA+Pj4gb3B0aW1pemluZy4KPiA+Pj4K
PiA+Pj4gTWlrZQo+ID4+Pgo+ID4+PiDlj7blj4zmmI4gd3JvdGU6Cj4gPj4+Cj4gPj4+IE5vIGRv
Y3VtZW50cyBjYW4gYWRkZWQgaW50byBpbmRleCB3aGVuIHRoZSBpbmRleCBpcyBvcHRpbWl6aW5n
LCAgb3IKPiA+Pj4+Cj4gPj4+PiBvcHRpbWl6aW5nIGNhbid0IHJ1biBkdXJsaW5nIGRvY3VtZW50
cyBhZGRpbmcgdG8gdGhlIGluZGV4Lgo+ID4+Pj4gU28sIHdpdGhvdXQgb3RoZXIgZXJyb3IsIEkg
dGhpbmsgd2UgY2FuIGJlbGVpdmUgdGhlIHR3byBpbmRleCBhcmUKPiBpbmRlZWQKPiA+Pj4+IHRo
ZQo+ID4+Pj4gc2FtZS4KPiA+Pj4+Cj4gPj4+PiA6KQo+ID4+Pj4KPiA+Pj4+IDIwMDgvOS80IE5v
YmxlIFBhdWwg4LSo4LWL4LSs4LS/4LSz4LWN4oCNIOCkqOCli+CkrOCljeCks+CljSA8bm9ibGUu
cGF1bEBnbWFpbC5jb20+Cj4gPj4+Pgo+ID4+Pj4gVGhlIHVzZSBjYXNlIGlzIGFzIGZvbGxvd3MK
PiA+Pj4+Pgo+ID4+Pj4+IEkgaGF2ZSB0d28gaW5kZXhlcyAuIE9uZSBhdCB0aGUgbWFzdGVyIGFu
ZCBvbmUgYXQgdGhlIHNsYXZlLiBUaGUgdXNlcgo+ID4+Pj4+IG9jY2FzaW9uYWxseSBrZWVwcyBj
b21taXR0aW5nIG9uIHRoZSBtYXN0ZXIgYW5kIHRoZSBkZWx0YSBpcwo+ID4+Pj4+IHJlcGxpY2F0
ZWQgZXZlcnl0aW1lLiBCdXQgd2hlbiB0aGUgb3B0aW1pemUgaGFwcGVucyB0aGUgdHJhbnNmZXIg
c2l6ZQo+ID4+Pj4+IGNhbiBiZSByZWFsbHkgbGFyZ2UuIFNvIEkgYW0gdGhpbmtpbmcgb2YgIGRv
aW5nIHRoZSBvcHRpbWl6ZQo+ID4+Pj4+IHNlcGFyYXRlbHkgb24gbWFzdGVyIGFuZCBzbGF2ZSAu
Cj4gPj4+Pj4KPiA+Pj4+PiBTbyBmYXIsIHNvIGdvb2QuIEJ1dCBob3cgY2FuIEkgcmVhbGx5IGtu
b3cgdGhhdCBhZnRlciB0aGUgb3B0aW1pemUKPiB0aGUKPiA+Pj4+PiBpbmRleGVzIGFyZSBpbmRl
ZWQgdGhlIHNhbWUgb3Igbm8gZG9jdW1lbnRzIGdvdCBhZGRlZCBpbiBiZXR3ZWVuLj8KPiA+Pj4+
Pgo+ID4+Pj4+Cj4gPj4+Pj4KPiA+Pj4+PiBPbiBGcmksIEF1ZyAyOSwgMjAwOCBhdCAzOjEzIFBN
LCBLYXJsIFdldHRpbiA8a2FybC53ZXR0aW5AZ21haWwuY29tPgo+ID4+Pj4+IHdyb3RlOgo+ID4+
Pj4+Cj4gPj4+Pj4+Cj4gPj4+Pj4+IDI5IGF1ZyAyMDA4IGtsLiAxMS4zNSBza3JldiBOb2JsZSBQ
YXVsIOC0qOC1i+C0rOC0v+C0s+C1jeKAjSDgpKjgpYvgpKzgpY3gpLPgpY06Cj4gPj4+Pj4+Cj4g
Pj4+Pj4+IGhpLAo+ID4+Pj4+Pj4KPiA+Pj4+Pj4+IEkgd2lzaCB0byBrbm93IGlmIHRoZSBjb250
ZW50cyBvZiB0d28gaW5kZXhlcyBoYXZlIHNhbWUgZGF0YS4KPiA+Pj4+Pj4+IHdpbGwgYWxsIHRo
ZSBmaWxlcyBiZSBleGFjdGx5IHNhbWUgaWYgSSBwdXQgc2FtZSBzZXQgb2YgZG9jdW1lbnRzCj4g
dG8KPiA+Pj4+Pj4+Cj4gPj4+Pj4+IGJvdGg/Cj4gPj4+Pj4KPiA+Pj4+Pj4KPiA+Pj4+Pj4gSWYg
eW91IGluc2VydCB0aGUgZG9jdW1lbnRzIGluIHRoZSBzYW1lIG9yZGVyIHdpdGggdGhlIHNhbWUg
c2V0dGluZ3MKPiA+Pj4+Pj4gYW5kCj4gPj4+Pj4+IGJvdGggaW5kaWNlcyBhcmUgb3B0aW1pemVk
LCB0aGVuIHRoZSBmaWxlcyBvdWdodCB0byBiZSBpZGVudGl0aWNhbC4KPiA+Pj4+Pj4gSSdtCj4g
Pj4+Pj4+IGhvd2V2ZXIgbm90IHN1cmUuCj4gPj4+Pj4+Cj4gPj4+Pj4+IFRoZSBpbnN0YW50aWF0
ZWQgaW5kZXggY29udHJpYiBtb2R1bGUgY29udGFpbnMgYSB0ZXN0IHRoYXQgYXNzZXJ0Cj4gdHdv
Cj4gPj4+Pj4+Cj4gPj4+Pj4gaW5kZXgKPiA+Pj4+Pgo+ID4+Pj4+PiByZWFkZXJzIGFyZSBpZGVu
dGljYWwuIFlvdSBjb3VsZCB1c2UgdGhpcyB0byBiZSByZWFsbHkgc3VyZSwgYnV0IGl0Cj4gaXQK
PiA+Pj4+Pj4gYQo+ID4+Pj4+PiByYXRoZXIgbG9uZyBydW5uaW5nIHByb2Nlc3MgZm9yIGEgbGFy
Z2UgaW5kZXg6Cj4gPj4+Pj4+Cj4gPj4+Pj4+Cj4gPj4+Pj4+Cj4gPj4+Pj4KPiA+Pj4+Pgo+IGh0
dHA6Ly9zdm4uYXBhY2hlLm9yZy9yZXBvcy9hc2YvbHVjZW5lL2phdmEvdHJ1bmsvY29udHJpYi9p
bnN0YW50aWF0ZWQvc3JjL3Rlc3Qvb3JnL2FwYWNoZS9sdWNlbmUvc3RvcmUvaW5zdGFudGlhdGVk
L1Rlc3RJbmRpY2VzRXF1YWxzLmphdmEKPiA+Pj4+Pgo+ID4+Pj4+Pgo+ID4+Pj4+Pgo+ID4+Pj4+
PiBQZXJoYXBzIHlvdSBzaG91bGQgZXhwbGFpbiB3aHkgeW91IG5lZWQgdG8gZG8gdGhpcy4KPiA+
Pj4+Pj4KPiA+Pj4+Pj4KPiA+Pj4+Pj4gICAgICBrYXJsCj4gPj4+Pj4+Cj4gLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
Cj4gPj4+Pj4+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBs
dWNlbmUuYXBhY2hlLm9yZwo+ID4+Pj4+PiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWls
OiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+ID4+Pj4+Pgo+ID4+Pj4+Pgo+ID4+
Pj4+Pgo+ID4+Pj4+Cj4gPj4+Pj4KPiA+Pj4+PiAtLQo+ID4+Pj4+IC0tTm9ibGUgUGF1bAo+ID4+
Pj4+Cj4gPj4+Pj4KPiA+Pj4KPiA+Pj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gPj4+IFRvIHVuc3Vic2NyaWJl
LCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+ID4+PiBG
b3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBh
Y2hlLm9yZwo+ID4+Pgo+ID4+Pgo+ID4KPiA+Cj4gPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiA+IFRvIHVuc3Vi
c2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+
ID4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5l
LmFwYWNoZS5vcmcKPiA+Cj4gPgo+Cj4KPgo+IC0tCj4gLS1Ob2JsZSBQYXVsCj4K
------=_Part_39276_23640138.1220600001919--

From java-user-return-35941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 05 08:33:53 2008
Return-Path: <java-user-return-35941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80204 invoked from network); 5 Sep 2008 08:33:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2008 08:33:53 -0000
Received: (qmail 405 invoked by uid 500); 5 Sep 2008 08:33:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 371 invoked by uid 500); 5 Sep 2008 08:33:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 360 invoked by uid 99); 5 Sep 2008 08:33:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 01:33:44 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.224 as permitted sender)
Received: from [209.85.198.224] (HELO rv-out-0506.google.com) (209.85.198.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 08:32:46 +0000
Received: by rv-out-0506.google.com with SMTP id f6so373875rvb.5
        for <java-user@lucene.apache.org>; Fri, 05 Sep 2008 01:33:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=0pmU1c+5jPrH/5xVj+7VegY1SMfcAzPHnHmVRAeATck=;
        b=mVObKUd8ZLWj2ELNKZHD1hVfBJKsnPcT9jrhkTvztP7ysxahiT+W1i5itGY+XRDKHq
         ZsaS2/KZWFGtpeE0r9iwca728lMX3ZOxN6dVq0/J/D3V8gYu+4PyD9s1qZbbcPg4XOg6
         G0n421JWEmkbJcqaEeWlm+q4r2bUxRRkNKreU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=XprCSM6ZZqig3CnDWhrC5WIguB1IC8Eg0qBPWBjh3CFFGrYks/CqHu87IK17OFbCGn
         QOYSBQDGcY5pc5yY71CfOBKIuQmTIYsAnI0LLJhHWfGfsTSzPWlR0U40YsRGjcKB4X8o
         OGby4XPyyqkL1PwCTXYM3lHLu3RxAZfHNjEEI=
Received: by 10.141.35.21 with SMTP id n21mr6422257rvj.115.1220603587730;
        Fri, 05 Sep 2008 01:33:07 -0700 (PDT)
Received: by 10.141.176.5 with HTTP; Fri, 5 Sep 2008 01:33:07 -0700 (PDT)
Message-ID: <1bcb7c7f0809050133k53e4ada4hdef2f35e33751dd@mail.gmail.com>
Date: Fri, 5 Sep 2008 11:33:07 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org, te@statsbiblioteket.dk
Subject: Re: ramdisks
In-Reply-To: <1220598037.7526.50.camel@PC990.sb.statsbiblioteket.dk>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_63913_3608884.1220603587727"
References: <1bcb7c7f0809040858s419b7008q3c4ec13a9da0e6a2@mail.gmail.com>
	 <1220598037.7526.50.camel@PC990.sb.statsbiblioteket.dk>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_63913_3608884.1220603587727
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

> On Thu, 2008-09-04 at 17:58 +0200, Cam Bazz wrote:
> > anyone using ramdisks for storage? there is ramsam and there is also
> fusion
> > io. but they are kinda expensive. any other alternatives I wonder?
>
> We've done some comparisons of RAM (Lucene RAMDirectory) vs. Flash-SSD
> vs. conventional harddrives. We've seen significant improvements for
> Flash-SSDs over harddrives, but less for RAM over Flash-SSDs.
>
> For our setup (Linux, Flash-SSDs, 4 core Xeon, simple searches, 37GB
> index, 10M documents, ~70 fields), the CPU seems to be the bottleneck.
> Testing with a commodity Flash-SSD might be worth trying before going
> all-out with the RAM-based systems.
>

I have done similar test with ram vs. disk, and IO was the bottleneck. What
flash ssd did you try with?

Best.

------=_Part_63913_3608884.1220603587727--

From java-user-return-35942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 05 09:01:11 2008
Return-Path: <java-user-return-35942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96903 invoked from network); 5 Sep 2008 09:01:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2008 09:01:11 -0000
Received: (qmail 31716 invoked by uid 500); 5 Sep 2008 09:01:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31682 invoked by uid 500); 5 Sep 2008 09:01:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31671 invoked by uid 99); 5 Sep 2008 09:01:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 02:01:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 09:00:04 +0000
Received: from [172.18.249.244] (172.18.249.244) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.1.291.1; Fri, 5 Sep 2008 11:00:34 +0200
Subject: Re: ramdisks
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <1bcb7c7f0809050133k53e4ada4hdef2f35e33751dd@mail.gmail.com>
References: <1bcb7c7f0809040858s419b7008q3c4ec13a9da0e6a2@mail.gmail.com>
	 <1220598037.7526.50.camel@PC990.sb.statsbiblioteket.dk>
	 <1bcb7c7f0809050133k53e4ada4hdef2f35e33751dd@mail.gmail.com>
Content-Type: text/plain
Organization: Statsbiblioteket
Date: Fri, 5 Sep 2008 11:00:33 +0200
Message-ID: <1220605233.7526.65.camel@PC990.sb.statsbiblioteket.dk>
MIME-Version: 1.0
X-Mailer: Evolution 2.22.3.1 (2.22.3.1-1.fc9) 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, 2008-09-05 at 10:33 +0200, Cam Bazz wrote:

[RAM vs. Flash-SSD vs. harddrives]

> I have done similar test with ram vs. disk, and IO was the bottleneck.
> What flash ssd did you try with?

For disks (as in conventional 10.000/15.000 RPM harddrives), IO is
clearly the bottleneck for us also.

As for Flash-SSDs, we've tried 2 * MTRON 6000 32GB RAID 0, 2 * SanDisk
5000 32GB RAID 0 and SanDisk something (64GB model) both as single drive
and 4 drives in RAID 0.

However, the performance-observation only goes for querying the indexes.
For building, we haven't performed any substantial tests for RAM and for
Flash-SSDs vs. harddrives, only the newest SanDisk gave any noticeable
increase.

One important observation with regard to updating is that our setup with
SSDs requires a lot less warmup-time as compared to conventional
harddisks. This allows for shorter delays before new content is visible.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 05 09:20:34 2008
Return-Path: <java-user-return-35943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4119 invoked from network); 5 Sep 2008 09:20:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2008 09:20:33 -0000
Received: (qmail 54508 invoked by uid 500); 5 Sep 2008 09:20:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54478 invoked by uid 500); 5 Sep 2008 09:20:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54433 invoked by uid 99); 5 Sep 2008 09:20:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 02:20:26 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shalinmangar@gmail.com designates 209.85.200.168 as permitted sender)
Received: from [209.85.200.168] (HELO wf-out-1314.google.com) (209.85.200.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 09:19:28 +0000
Received: by wf-out-1314.google.com with SMTP id 28so423633wfc.20
        for <java-user@lucene.apache.org>; Fri, 05 Sep 2008 02:19:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=y7W24r0MFsFcCdvrehm2yUJ4G4sIyOxrH3dDZ/6JG78=;
        b=Iq75UGa2SVsajcQRVZvxlAZpgBWqQ5sCMeZO/9kIl0jYSmlfSyQIGUOUgwVEWZ0FFJ
         ToVZ0T44xh8TTWd53B+Te7WXKcH0m3A4N/JsTfrM5A6euu9rIDjQnyoDRh8KytzBEF++
         WaCNomtqWJ7lerCfMJhCAqwtzG3dn+6YU3s5w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=bLIzslOjD5OG5M+2w9dsb9Gl23YGfQV6ivGqs0egadhPjVyplYvk7eKLlbnwbhaAJB
         SuzO3Pub76k2ufY47xdO9QFgZ38sQzq5uwT1qhqEBCJQbHekmpI9C4vDWifZcJF01cZ2
         xFK1ZDOj7pfHgKtZeaEp0h1OJJsX+wbway3+A=
Received: by 10.142.239.11 with SMTP id m11mr3965049wfh.283.1220606389976;
        Fri, 05 Sep 2008 02:19:49 -0700 (PDT)
Received: by 10.142.223.15 with HTTP; Fri, 5 Sep 2008 02:19:49 -0700 (PDT)
Message-ID: <69de18140809050219o59168d19kae2f179758ebd464@mail.gmail.com>
Date: Fri, 5 Sep 2008 14:49:49 +0530
From: "Shalin Shekhar Mangar" <shalinmangar@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How can we know if 2 lucene indexes are same?
In-Reply-To: <9233ccac0809050033l231cf0d7y9a5a3a3abe6764fb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_35662_7094124.1220606389959"
References: <5e76b0ad0808290235w45f762e3i2a476e8fe132dfb4@mail.gmail.com>
	 <C7CBD3C0-F1AD-42B3-91A5-1B3262B44EED@gmail.com>
	 <5e76b0ad0809032222l6bdbe192r8fc521bfd8f5f9ee@mail.gmail.com>
	 <9233ccac0809040208k6c5117desd698944b888d000e@mail.gmail.com>
	 <54A87861-7A1E-409D-B8E8-CF0F5284E0BF@mikemccandless.com>
	 <9233ccac0809040629x43b63503wa1196bedd9791747@mail.gmail.com>
	 <58B46075-2634-4E55-8463-C2FF56E312FD@mikemccandless.com>
	 <5e76b0ad0809042352q2b6f30c3v56f3efd3e88fca10@mail.gmail.com>
	 <9233ccac0809050033l231cf0d7y9a5a3a3abe6764fb@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_35662_7094124.1220606389959
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

TGV0IG1lIHRyeSB0byBleHBsYWluLgoKSSBoYXZlIGEgbWFzdGVyIHdoZXJlIGluZGV4aW5nIGlz
IGRvbmUuIEkgaGF2ZSBtdWx0aXBsZSBzbGF2ZXMgZm9yIHF1ZXJ5aW5nLgoKSWYgSSBjb21taXQr
b3B0aW1pemUgb24gdGhlIG1hc3RlciBhbmQgdGhlbiByc3luYyB0aGUgaW5kZXgsIHRoZSBkYXRh
CnRyYW5zZmVycmVkIG9uIHRoZSBuZXR3b3JrIGlzIGh1Z2UuIEFuIGFsdGVybmF0ZSB3YXkgaXMg
dG8gY29tbWl0IG9uIG1hc3RlciwKdHJhbnNmZXIgdGhlIGRlbHRhIHRvIHRoZSBzbGF2ZSBhbmQg
aXNzdWUgYW4gb3B0aW1pemUgb24gdGhlIHNsYXZlLiBUaGlzIGlzCnZlcnkgZmFzdCBiZWNhdXNl
IGxlc3MgZGF0YSBpcyB0cmFuc2ZlcnJlZCBvbiB0aGUgbmV0d29yay4KCkhvd2V2ZXIsIHdlIG5l
ZWQgdG8gZW5zdXJlIHRoYXQgdGhlIGluZGV4IG9uIHRoZSBzbGF2ZSBpcyBhY3R1YWxseSBpbiBz
eW5jCndpdGggdGhlIG1hc3Rlci4gU28gdGhhdCBvbiBhbm90aGVyIGNvbW1pdCwgd2UgY2FuIGJs
aW5kbHkgdHJhbnNmZXIgdGhlCmRlbHRhIHRvIHRoZSBzbGF2ZS4KCk9uIEZyaSwgU2VwIDUsIDIw
MDggYXQgMTowMyBQTSwg5Y+25Y+M5piOIDx5ZXNodWFuZ21pbmdAZ21haWwuY29tPiB3cm90ZToK
Cj4gRG8geW91IHVzZSBpbmRleCBhdCB0aGUgc2xhdmUgYXMgYSBiYWNrdXAgZm9yIGluZGV4IGF0
IHRoZSBtYXN0ZXI/Pwo+IEFuZCBpbiBjYXNlIHRoZSBtYXN0ZXIgYnJlYWsgZG93biwgeW91IGNh
biB0dXJuIHRoZSBxdWVyeSB0byB0aGUgc2xhdmU/Pwo+Cj4gV2hlbiBhZGQgYSBEb2N1bWVudCB0
byBtYXN0ZXIsIGFsc28gYWRkIGl0IHRvIHRoZSBzbGF2ZT8KPgo+IFNvcnJ5LCBJIGRvbid0IGNs
ZWFyIGFib3V0IHdoYXQgeW91ciBwcm9ibGVtLCBjYW4geW91IHNob3cgbW9yZSBkZXRhaWwKPiBh
Ym91dAo+IHdoYXQgZG8geW91IHdvcnJ5IGFib3V0Pwo+Cj4gMjAwOC85LzUgTm9ibGUgUGF1bCDg
tKjgtYvgtKzgtL/gtLPgtY3igI0g4KSo4KWL4KSs4KWN4KSz4KWNIDxub2JsZS5wYXVsQGdtYWls
LmNvbT4KPgo+ID4gSSBhbSBub3QgdXNpbmcgdGhlIHNhbWUgaW5kZXggd2l0aCBkaWZmZXJlbnQg
d3JpdGVycy4gVGhlc2UgYXJlIHR3bwo+ID4gc2VwYXJhdGUgaW5kZXhlcyBib3RoIGhhdmUgdGhl
aXIgb3duIHJlYWRlci93cml0ZXIKPiA+Cj4gPiBJIGp1c3Qgd2FudGVkIHRvIG1pbmltaXplIHRo
ZSBuZXR3b3JrIGxvYWQgYnkgYXZvaWRpbmcgdGhlIGRvd25sb2FkIG9mCj4gPiBhbiBvcHRpbWl6
ZWQgaW5kZXggaWYgdGhlIGNvbnRlbnRzIGFyZSBpbmRlZWQgc2FtZS4KPiA+IC0tbm9ibGUKPiA+
Cj4gPiBPbiBUaHUsIFNlcCA0LCAyMDA4IGF0IDc6MzYgUE0sIE1pY2hhZWwgTWNDYW5kbGVzcwo+
ID4gPGx1Y2VuZUBtaWtlbWNjYW5kbGVzcy5jb20+IHdyb3RlOgo+ID4gPgo+ID4gPiBTb3JyeSwg
SSBzaG91bGQgaGF2ZSBzYWlkOiB5b3UgbXVzdCBhbHdheXMgdXNlIHRoZSBzYW1lIHdyaXRlciwg
aWUgYXMKPiBvZgo+ID4gPiAyLjMsIHdoaWxlIEluZGV4V3JpdGVyLm9wdGltaXplIChvciBub3Jt
YWwgc2VnbWVudCBtZXJnaW5nKSBpcyBydW5uaW5nLAo+ID4gPiB1bmRlciBvbmUgdGhyZWFkLCBh
bm90aGVyIHRocmVhZCBjYW4gdXNlIHRoYXQgKnNhbWUqIHdyaXRlciB0bwo+ID4gPiBhZGQvZGVs
ZXRlL3VwZGF0ZSBkb2N1bWVudHMsIGFuZCBib3RoIGFyZSBmcmVlIHRvIG1ha2UgY2hhbmdlcyB0
byB0aGUKPiA+IGluZGV4Lgo+ID4gPgo+ID4gPiBCZWZvcmUgMi4zLCBvcHRpbWl6ZSgpIHdhcyBm
dWxseSBzeW5jaHJvbml6ZWQgYW5kIGJsb2NrZWQKPiA+IGFkZC91cGRhdGUvZGVsZXRlCj4gPiA+
IGRvY3VtZW50cyBmcm9tIGNoYW5naW5nIHRoZSBpbmRleCB1bnRpbCB0aGUgb3B0aW1pemUoKSBj
YWxsIGNvbXBsZXRlZC4KPiA+ID4KPiA+ID4gU28sIHlvdXIgdGVzdCBpcyBleHBlY3RlZCB0byBm
YWlsOiB5b3UncmUgbm90IGFsbG93ZWQgdG8gb3BlbiAyCj4gIndyaXRlcnMiCj4gPiBvbgo+ID4g
PiBhIHNpbmdsZSBpbmRleCBhdCB0aGUgc2FtZSB0aW1lLCB3aGVyZSAid3JpdGVyIiBpbmNsdWRl
cyBhbiBJbmRleFJlYWRlcgo+ID4gdGhhdAo+ID4gPiBkZWxldGVzIGRvY3VtZW50czsgc28gdGhv
c2UgZXhjZXB0aW9ucyAoTG9ja09idGFpbkZhaWxlZCwgU3RhbGVSZWFkZXIpCj4gPiBhcmUKPiA+
ID4gZXhwZWN0ZWQuCj4gPiA+Cj4gPiA+IE1pa2UKPiA+ID4KPiA+ID4g5Y+25Y+M5piOIHdyb3Rl
Ogo+ID4gPgo+ID4gPj4gSSBkb24ndCBhZ3JlZWQgd2l0aCBNaWNoYWVsIE1jQ2FuZGxlc3MuIDop
Cj4gPiA+Pgo+ID4gPj4gSSBrb253IHRoYXQgYWZ0ZXIgMi4zLCBhZGQgYW5kIGRlbGV0ZSBjYW4g
cnVuIGluIG9uZSBJbmRleFdyaXRlciBhdAo+IG9uZQo+ID4gPj4gdGltZSwgYW5kIGFsc28gbHVj
ZW5lIGhhcyBhIHVwZGF0ZSBtZXRob2Qgd2hpY2ggZGVsZXRlIGRvY3VtZW50cyBieQo+IHRlcm0K
PiA+ID4+IHRoZW4gYWRkIHRoZSBuZXcgZG9jdW1lbnQuCj4gPiA+Pgo+ID4gPj4gSW4gbXkgdGVz
dCwgZWl0aGVyIExvY2tPYnRhaW5GYWlsZWRFeGNlcHRpb24gd2l0aCB0aHJlYWQgc2xlZXAKPiBz
ZW50ZW5jZToKPiA+ID4+Cj4gPiA+PiBvcmcuYXBhY2hlLmx1Y2VuZS5zdG9yZS5Mb2NrT2J0YWlu
RmFpbGVkRXhjZXB0aW9uOiBMb2NrIG9idGFpbiB0aW1lZAo+ID4gb3V0Ogo+ID4gPj4gU2ltcGxl
RlNMb2NrQEU6XGluZGV4XHdyaXRlLmxvY2sKPiA+ID4+IGF0IG9yZy5hcGFjaGUubHVjZW5lLnN0
b3JlLkxvY2sub2J0YWluKExvY2suamF2YTo4NSkKPiA+ID4+IGF0Cj4gPiA+Pgo+ID4gPj4KPiA+
Cj4gb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguRGlyZWN0b3J5SW5kZXhSZWFkZXIuYWNxdWlyZVdy
aXRlTG9jayhEaXJlY3RvcnlJbmRleFJlYWRlci5qYXZhOjI5OCkKPiA+ID4+IGF0Cj4gPiA+Pgo+
IG9yZy5hcGFjaGUubHVjZW5lLmluZGV4LkluZGV4UmVhZGVyLmRlbGV0ZURvY3VtZW50KEluZGV4
UmVhZGVyLmphdmE6NzUwKQo+ID4gPj4gYXQKPiA+ID4+Cj4gPiBvcmcuYXBhY2hlLmx1Y2VuZS5p
bmRleC5JbmRleFJlYWRlci5kZWxldGVEb2N1bWVudHMoSW5kZXhSZWFkZXIuamF2YTo3ODYpCj4g
PiA+PiBhdCBvcmcudGVzdC5JbmRleFRocmVhZC5ydW4oSW5kZXhUaHJlYWQuamF2YTozMykKPiA+
ID4+Cj4gPiA+PiBvciBTdGFsZVJlYWRlckV4Y2VwdGlvbiB3aXRob3V0IHRocmVhZCBzbGVlcCBz
ZW50ZW5jZToKPiA+ID4+Cj4gPiA+PiBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5TdGFsZVJlYWRl
ckV4Y2VwdGlvbjogSW5kZXhSZWFkZXIgb3V0IG9mIGRhdGUKPiA+IGFuZAo+ID4gPj4gbm8KPiA+
ID4+IGxvbmdlciB2YWxpZCBmb3IgZGVsZXRlLCB1bmRlbGV0ZSwgb3Igc2V0Tm9ybSBvcGVyYXRp
b25zCj4gPiA+PiBhdAo+ID4gPj4KPiA+ID4+Cj4gPgo+IG9yZy5hcGFjaGUubHVjZW5lLmluZGV4
LkRpcmVjdG9yeUluZGV4UmVhZGVyLmFjcXVpcmVXcml0ZUxvY2soRGlyZWN0b3J5SW5kZXhSZWFk
ZXIuamF2YTozMDgpCj4gPiA+PiBhdAo+ID4gPj4KPiBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5J
bmRleFJlYWRlci5kZWxldGVEb2N1bWVudChJbmRleFJlYWRlci5qYXZhOjc1MCkKPiA+ID4+IGF0
Cj4gPiA+Pgo+ID4gb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguSW5kZXhSZWFkZXIuZGVsZXRlRG9j
dW1lbnRzKEluZGV4UmVhZGVyLmphdmE6Nzg2KQo+ID4gPj4gYXQgb3JnLnRlc3QuSW5kZXhUaHJl
YWQucnVuKEluZGV4VGhyZWFkLmphdmE6MzEpCj4gPiA+Pgo+ID4gPj4gTXkgdGVzdCBjb2RlOgo+
ID4gPj4KPiA+ID4+Cj4gPiA+PiBwdWJsaWMgY2xhc3MgTWFpbiB7Cj4gPiA+Pgo+ID4gPj4gcHVi
bGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykgdGhyb3dzIElPRXhjZXB0aW9uIHsK
PiA+ID4+ICBEaXJlY3RvcnkgZGlyZWN0b3J5ID0gRlNEaXJlY3RvcnkuZ2V0RGlyZWN0b3J5KCJl
Oi9pbmRleCIpOwo+ID4gPj4gIEluZGV4V3JpdGVyIHdyaXRlciA9IG5ldyBJbmRleFdyaXRlcihk
aXJlY3RvcnksIG51bGwsIGZhbHNlKTsKPiA+ID4+ICBEb2N1bWVudCBkb2N1bWVudCA9IG5ldyBE
b2N1bWVudCgpOwo+ID4gPj4gIGRvY3VtZW50LmFkZChuZXcgRmllbGQoImJiYiIsICJiYmIiLCBT
dG9yZS5ZRVMsIEluZGV4LlVOX1RPS0VOSVpFRCkpOwo+ID4gPj4gIHdyaXRlci5hZGREb2N1bWVu
dChkb2N1bWVudCk7Cj4gPiA+Pgo+ID4gPj4gIFRocmVhZCB0ID0gbmV3IEluZGV4VGhyZWFkKCk7
Cj4gPiA+PiAgdC5zdGFydCgpOwo+ID4gPj4KPiA+ID4+ICB0cnkgewo+ID4gPj4gIFRocmVhZC5z
bGVlcCgxMDAwKTsKPiA+ID4+ICB9IGNhdGNoIChJbnRlcnJ1cHRlZEV4Y2VwdGlvbiBlKSB7Cj4g
PiA+PiAgLy8gVE9ETyBBdXRvLWdlbmVyYXRlZCBjYXRjaCBibG9jawo+ID4gPj4gIGUucHJpbnRT
dGFja1RyYWNlKCk7Cj4gPiA+PiAgfQo+ID4gPj4KPiA+ID4+ICB3cml0ZXIub3B0aW1pemUoKTsK
PiA+ID4+ICB3cml0ZXIuY2xvc2UoKTsKPiA+ID4+ICBTeXN0ZW0ub3V0LnByaW50bG4oIm91dCIp
Owo+ID4gPj4gfQo+ID4gPj4gfQo+ID4gPj4KPiA+ID4+IHB1YmxpYyBjbGFzcyBJbmRleFRocmVh
ZCBleHRlbmRzIFRocmVhZCB7Cj4gPiA+Pgo+ID4gPj4gQE92ZXJyaWRlCj4gPiA+PiBwdWJsaWMg
dm9pZCBydW4oKSB7Cj4gPiA+PiAgRGlyZWN0b3J5IGRpcmVjdG9yeTsKPiA+ID4+ICB0cnkgewo+
ID4gPj4gIHRyeSB7Cj4gPiA+PiAgIFRocmVhZC5zbGVlcCgxMCk7Cj4gPiA+PiAgfSBjYXRjaCAo
SW50ZXJydXB0ZWRFeGNlcHRpb24gZSkgewo+ID4gPj4gICAvLyBUT0RPIEF1dG8tZ2VuZXJhdGVk
IGNhdGNoIGJsb2NrCj4gPiA+PiAgIGUucHJpbnRTdGFja1RyYWNlKCk7Cj4gPiA+PiAgfQo+ID4g
Pj4KPiA+ID4+ICBkaXJlY3RvcnkgPSBGU0RpcmVjdG9yeS5nZXREaXJlY3RvcnkoImU6L2luZGV4
Iik7Cj4gPiA+PiAgU3lzdGVtLm91dC5wcmludGxuKCJ0aHJlYWQgYmVnaW4iKTsKPiA+ID4+ICAv
L0luZGV4V3JpdGVyIHJlYWRlciA9IG5ldyBJbmRleFdyaXRlcihkaXJlY3RvcnksIG51bGwsIGZh
bHNlKTsKPiA+ID4+ICBJbmRleFJlYWRlciByZWFkZXIgPSBJbmRleFJlYWRlci5vcGVuKGRpcmVj
dG9yeSk7Cj4gPiA+PiAgVGVybSB0ZXJtID0gbmV3IFRlcm0oImJiYiIsICJiYmIiKTsKPiA+ID4+
ICByZWFkZXIuZGVsZXRlRG9jdW1lbnRzKHRlcm0pOwo+ID4gPj4gIHJlYWRlci5jbG9zZSgpOwo+
ID4gPj4gIFN5c3RlbS5vdXQucHJpbnRsbigidGhyZWFkIGVuZCIpOwo+ID4gPj4gIH0gY2F0Y2gg
KElPRXhjZXB0aW9uIGUpIHsKPiA+ID4+ICAvLyBUT0RPIEF1dG8tZ2VuZXJhdGVkIGNhdGNoIGJs
b2NrCj4gPiA+PiAgZS5wcmludFN0YWNrVHJhY2UoKTsKPiA+ID4+ICB9Cj4gPiA+PiB9Cj4gPiA+
PiB9Cj4gPiA+Pgo+ID4gPj4KPiA+ID4+Cj4gPiA+PiAyMDA4LzkvNCwgTWljaGFlbCBNY0NhbmRs
ZXNzIDxsdWNlbmVAbWlrZW1jY2FuZGxlc3MuY29tPjoKPiA+ID4+Pgo+ID4gPj4+Cj4gPiA+Pj4g
QWN0dWFsbHksIGFzIG9mIDIuMywgdGhpcyBpcyBubyBsb25nZXIgdHJ1ZTogbWVyZ2VzIGFuZCBv
cHRpbWl6aW5nCj4gcnVuCj4gPiBpbgo+ID4gPj4+IHRoZSBiYWNrZ3JvdW5kLCBhbmQgYWxsb3cg
YWRkL3VwZGF0ZS9kZWxldGUgZG9jdW1lbnRzIHRvIHJ1biBhdCB0aGUKPiA+IHNhbWUKPiA+ID4+
PiB0aW1lLgo+ID4gPj4+Cj4gPiA+Pj4gSSB0aGluayBpdCdzIHByb2JhYmx5IGJlc3QgdG8gdXNl
IGFwcGxpY2F0aW9uIGxvZ2ljIChvdXRzaWRlIG9mCj4gTHVjZW5lKQo+ID4gPj4+IHRvCj4gPiA+
Pj4ga2VlcCB0cmFjayBvZiB3aGF0IHVwZGF0ZXMgaGFwcGVuZWQgdG8gdGhlIG1hc3RlciB3aGls
ZSB0aGUgc2xhdmUgd2FzCj4gPiA+Pj4gb3B0aW1pemluZy4KPiA+ID4+Pgo+ID4gPj4+IE1pa2UK
PiA+ID4+Pgo+ID4gPj4+IOWPtuWPjOaYjiB3cm90ZToKPiA+ID4+Pgo+ID4gPj4+IE5vIGRvY3Vt
ZW50cyBjYW4gYWRkZWQgaW50byBpbmRleCB3aGVuIHRoZSBpbmRleCBpcyBvcHRpbWl6aW5nLCAg
b3IKPiA+ID4+Pj4KPiA+ID4+Pj4gb3B0aW1pemluZyBjYW4ndCBydW4gZHVybGluZyBkb2N1bWVu
dHMgYWRkaW5nIHRvIHRoZSBpbmRleC4KPiA+ID4+Pj4gU28sIHdpdGhvdXQgb3RoZXIgZXJyb3Is
IEkgdGhpbmsgd2UgY2FuIGJlbGVpdmUgdGhlIHR3byBpbmRleCBhcmUKPiA+IGluZGVlZAo+ID4g
Pj4+PiB0aGUKPiA+ID4+Pj4gc2FtZS4KPiA+ID4+Pj4KPiA+ID4+Pj4gOikKPiA+ID4+Pj4KPiA+
ID4+Pj4gMjAwOC85LzQgTm9ibGUgUGF1bCDgtKjgtYvgtKzgtL/gtLPgtY3igI0g4KSo4KWL4KSs
4KWN4KSz4KWNIDxub2JsZS5wYXVsQGdtYWlsLmNvbT4KPiA+ID4+Pj4KPiA+ID4+Pj4gVGhlIHVz
ZSBjYXNlIGlzIGFzIGZvbGxvd3MKPiA+ID4+Pj4+Cj4gPiA+Pj4+PiBJIGhhdmUgdHdvIGluZGV4
ZXMgLiBPbmUgYXQgdGhlIG1hc3RlciBhbmQgb25lIGF0IHRoZSBzbGF2ZS4gVGhlCj4gdXNlcgo+
ID4gPj4+Pj4gb2NjYXNpb25hbGx5IGtlZXBzIGNvbW1pdHRpbmcgb24gdGhlIG1hc3RlciBhbmQg
dGhlIGRlbHRhIGlzCj4gPiA+Pj4+PiByZXBsaWNhdGVkIGV2ZXJ5dGltZS4gQnV0IHdoZW4gdGhl
IG9wdGltaXplIGhhcHBlbnMgdGhlIHRyYW5zZmVyCj4gc2l6ZQo+ID4gPj4+Pj4gY2FuIGJlIHJl
YWxseSBsYXJnZS4gU28gSSBhbSB0aGlua2luZyBvZiAgZG9pbmcgdGhlIG9wdGltaXplCj4gPiA+
Pj4+PiBzZXBhcmF0ZWx5IG9uIG1hc3RlciBhbmQgc2xhdmUgLgo+ID4gPj4+Pj4KPiA+ID4+Pj4+
IFNvIGZhciwgc28gZ29vZC4gQnV0IGhvdyBjYW4gSSByZWFsbHkga25vdyB0aGF0IGFmdGVyIHRo
ZSBvcHRpbWl6ZQo+ID4gdGhlCj4gPiA+Pj4+PiBpbmRleGVzIGFyZSBpbmRlZWQgdGhlIHNhbWUg
b3Igbm8gZG9jdW1lbnRzIGdvdCBhZGRlZCBpbiBiZXR3ZWVuLj8KPiA+ID4+Pj4+Cj4gPiA+Pj4+
Pgo+ID4gPj4+Pj4KPiA+ID4+Pj4+IE9uIEZyaSwgQXVnIDI5LCAyMDA4IGF0IDM6MTMgUE0sIEth
cmwgV2V0dGluIDwKPiBrYXJsLndldHRpbkBnbWFpbC5jb20+Cj4gPiA+Pj4+PiB3cm90ZToKPiA+
ID4+Pj4+Cj4gPiA+Pj4+Pj4KPiA+ID4+Pj4+PiAyOSBhdWcgMjAwOCBrbC4gMTEuMzUgc2tyZXYg
Tm9ibGUgUGF1bCDgtKjgtYvgtKzgtL/gtLPgtY3igI0g4KSo4KWL4KSs4KWN4KSz4KWNOgo+ID4g
Pj4+Pj4+Cj4gPiA+Pj4+Pj4gaGksCj4gPiA+Pj4+Pj4+Cj4gPiA+Pj4+Pj4+IEkgd2lzaCB0byBr
bm93IGlmIHRoZSBjb250ZW50cyBvZiB0d28gaW5kZXhlcyBoYXZlIHNhbWUgZGF0YS4KPiA+ID4+
Pj4+Pj4gd2lsbCBhbGwgdGhlIGZpbGVzIGJlIGV4YWN0bHkgc2FtZSBpZiBJIHB1dCBzYW1lIHNl
dCBvZiBkb2N1bWVudHMKPiA+IHRvCj4gPiA+Pj4+Pj4+Cj4gPiA+Pj4+Pj4gYm90aD8KPiA+ID4+
Pj4+Cj4gPiA+Pj4+Pj4KPiA+ID4+Pj4+PiBJZiB5b3UgaW5zZXJ0IHRoZSBkb2N1bWVudHMgaW4g
dGhlIHNhbWUgb3JkZXIgd2l0aCB0aGUgc2FtZQo+IHNldHRpbmdzCj4gPiA+Pj4+Pj4gYW5kCj4g
PiA+Pj4+Pj4gYm90aCBpbmRpY2VzIGFyZSBvcHRpbWl6ZWQsIHRoZW4gdGhlIGZpbGVzIG91Z2h0
IHRvIGJlCj4gaWRlbnRpdGljYWwuCj4gPiA+Pj4+Pj4gSSdtCj4gPiA+Pj4+Pj4gaG93ZXZlciBu
b3Qgc3VyZS4KPiA+ID4+Pj4+Pgo+ID4gPj4+Pj4+IFRoZSBpbnN0YW50aWF0ZWQgaW5kZXggY29u
dHJpYiBtb2R1bGUgY29udGFpbnMgYSB0ZXN0IHRoYXQgYXNzZXJ0Cj4gPiB0d28KPiA+ID4+Pj4+
Pgo+ID4gPj4+Pj4gaW5kZXgKPiA+ID4+Pj4+Cj4gPiA+Pj4+Pj4gcmVhZGVycyBhcmUgaWRlbnRp
Y2FsLiBZb3UgY291bGQgdXNlIHRoaXMgdG8gYmUgcmVhbGx5IHN1cmUsIGJ1dAo+IGl0Cj4gPiBp
dAo+ID4gPj4+Pj4+IGEKPiA+ID4+Pj4+PiByYXRoZXIgbG9uZyBydW5uaW5nIHByb2Nlc3MgZm9y
IGEgbGFyZ2UgaW5kZXg6Cj4gPiA+Pj4+Pj4KPiA+ID4+Pj4+Pgo+ID4gPj4+Pj4+Cj4gPiA+Pj4+
Pgo+ID4gPj4+Pj4KPiA+Cj4gaHR0cDovL3N2bi5hcGFjaGUub3JnL3JlcG9zL2FzZi9sdWNlbmUv
amF2YS90cnVuay9jb250cmliL2luc3RhbnRpYXRlZC9zcmMvdGVzdC9vcmcvYXBhY2hlL2x1Y2Vu
ZS9zdG9yZS9pbnN0YW50aWF0ZWQvVGVzdEluZGljZXNFcXVhbHMuamF2YQo+ID4gPj4+Pj4KPiA+
ID4+Pj4+Pgo+ID4gPj4+Pj4+Cj4gPiA+Pj4+Pj4gUGVyaGFwcyB5b3Ugc2hvdWxkIGV4cGxhaW4g
d2h5IHlvdSBuZWVkIHRvIGRvIHRoaXMuCj4gPiA+Pj4+Pj4KPiA+ID4+Pj4+Pgo+ID4gPj4+Pj4+
ICAgICAga2FybAo+ID4gPj4+Pj4+Cj4gPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiA+ID4+Pj4+PiBUbyB1bnN1
YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcK
PiA+ID4+Pj4+PiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVs
cEBsdWNlbmUuYXBhY2hlLm9yZwo+ID4gPj4+Pj4+Cj4gPiA+Pj4+Pj4KPiA+ID4+Pj4+Pgo+ID4g
Pj4+Pj4KPiA+ID4+Pj4+Cj4gPiA+Pj4+PiAtLQo+ID4gPj4+Pj4gLS1Ob2JsZSBQYXVsCj4gPiA+
Pj4+Pgo+ID4gPj4+Pj4KPiA+ID4+Pgo+ID4gPj4+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+ID4gPj4+IFRvIHVu
c3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9y
Zwo+ID4gPj4+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxw
QGx1Y2VuZS5hcGFjaGUub3JnCj4gPiA+Pj4KPiA+ID4+Pgo+ID4gPgo+ID4gPgo+ID4gPiAtLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0KPiA+ID4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2Ny
aWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gPiA+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1h
aWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4gPiA+Cj4gPiA+Cj4gPgo+ID4K
PiA+Cj4gPiAtLQo+ID4gLS1Ob2JsZSBQYXVsCj4gPgo+CgoKCi0tIApSZWdhcmRzLApTaGFsaW4g
U2hla2hhciBNYW5nYXIuCg==
------=_Part_35662_7094124.1220606389959--

From java-user-return-35944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 05 10:11:44 2008
Return-Path: <java-user-return-35944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29057 invoked from network); 5 Sep 2008 10:11:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2008 10:11:43 -0000
Received: (qmail 16442 invoked by uid 500); 5 Sep 2008 10:11:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16411 invoked by uid 500); 5 Sep 2008 10:11:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16400 invoked by uid 99); 5 Sep 2008 10:11:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 03:11:32 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.82.237] (HELO wx-out-0506.google.com) (66.249.82.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 10:10:33 +0000
Received: by wx-out-0506.google.com with SMTP id h29so97561wxd.20
        for <java-user@lucene.apache.org>; Fri, 05 Sep 2008 03:11:03 -0700 (PDT)
Received: by 10.70.80.6 with SMTP id d6mr14100905wxb.53.1220609463087;
        Fri, 05 Sep 2008 03:11:03 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id h38sm4396702wxd.13.2008.09.05.03.11.02
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 05 Sep 2008 03:11:02 -0700 (PDT)
Message-Id: <DA73AABB-F475-45C9-8CA9-A48F84CB3A94@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <48C0BC57.9050405@teamware.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Javadoc wording in IndexWriter.addIndexesNoOptimize()
Date: Fri, 5 Sep 2008 06:11:01 -0400
References: <48C0BC57.9050405@teamware.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


IndexWriter.{set,get}MaxMergeDocs isn't deprecated, but it is a  
convenience method for the corresponding calls on the MergePolicy.

Sorry, that javadoc is now false -- we decided that check (2nd point  
in the javadoc) was overly pedantic so it was removed (this was  
LUCENE-1254), but I forgot to fix that javadoc in 2.3.

This has already been fixed on the trunk so it'll be fixed in 2.4.

Sorry for the confusion,

Mike

Antony Bowesman wrote:

> The Javadoc for this method has the following comment:
>
> "This requires this index not be among those to be added, and the  
> upper bound* of those segment doc counts not exceed maxMergeDocs. "
>
> What does the second part of that mean, which is especially  
> confusing given that MAX_MERGE_DOCS is deprecated.
>
> Thanks
> Antony
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 05 12:34:09 2008
Return-Path: <java-user-return-35945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90509 invoked from network); 5 Sep 2008 12:34:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2008 12:34:09 -0000
Received: (qmail 83416 invoked by uid 500); 5 Sep 2008 12:34:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82725 invoked by uid 500); 5 Sep 2008 12:34:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82714 invoked by uid 99); 5 Sep 2008 12:34:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 05:34:01 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 12:33:02 +0000
Received: by yx-out-2324.google.com with SMTP id 3so225235yxj.5
        for <java-user@lucene.apache.org>; Fri, 05 Sep 2008 05:33:14 -0700 (PDT)
Received: by 10.150.202.9 with SMTP id z9mr11265779ybf.54.1220617994240;
        Fri, 05 Sep 2008 05:33:14 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id 58sm187114rnw.7.2008.09.05.05.33.13
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 05 Sep 2008 05:33:13 -0700 (PDT)
Message-Id: <3A375886-95E2-46F3-9A59-7BA56B1C88B2@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <69de18140809050219o59168d19kae2f179758ebd464@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: How can we know if 2 lucene indexes are same?
Date: Fri, 5 Sep 2008 08:33:11 -0400
References: <5e76b0ad0808290235w45f762e3i2a476e8fe132dfb4@mail.gmail.com> <C7CBD3C0-F1AD-42B3-91A5-1B3262B44EED@gmail.com> <5e76b0ad0809032222l6bdbe192r8fc521bfd8f5f9ee@mail.gmail.com> <9233ccac0809040208k6c5117desd698944b888d000e@mail.gmail.com> <54A87861-7A1E-409D-B8E8-CF0F5284E0BF@mikemccandless.com> <9233ccac0809040629x43b63503wa1196bedd9791747@mail.gmail.com> <58B46075-2634-4E55-8463-C2FF56E312FD@mikemccandless.com> <5e76b0ad0809042352q2b6f30c3v56f3efd3e88fca10@mail.gmail.com> <9233ccac0809050033l231cf0d7y9a5a3a3abe6764fb@mail.gmail.com> <69de18140809050219o59168d19kae2f179758ebd464@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Shalin Shekhar Mangar wrote:

> Let me try to explain.
>
> I have a master where indexing is done. I have multiple slaves for  
> querying.
>
> If I commit+optimize on the master and then rsync the index, the data
> transferred on the network is huge. An alternate way is to commit on  
> master,
> transfer the delta to the slave and issue an optimize on the slave.  
> This is
> very fast because less data is transferred on the network.

Large segment merges will also send huge traffic.  You may just want  
to send all updates (document adds/deletes) to all slaves directly?   
It'd be nice if you could somehow NOT sync the effects of segment  
merging, but do sync doc add/deletes... not sure how to do that.

> However, we need to ensure that the index on the slave is actually  
> in sync
> with the master. So that on another commit, we can blindly transfer  
> the
> delta to the slave.

I assume your app ensures that no deltas arrive to the slave while  
it's running optimize?  So then the question becomes (I think) "if two  
indices are identical to begin with, and I separately run optimize on  
each, will the resulting two optimized indices be identical?".

By "in sync" you also require the final segment name (after optimize)  
is identical right?

I think the answer is yes, but I'm not certain unless I think more  
about it.  Also this behavior is not "promised" in Lucene's API.

Merges for optimize are now allowed to run concurrently (by default,  
with ConcurrentMergeScheduler), except for the final (< mergeFactor  
segments) merge, which waits until others have finished.  So if there  
are 7 obvious merges necessary to optimize, 3 will run concurrently,  
while 4 wait.  Those 4 then run as the merges finish over time, which  
may happen in different orders for each index and so different merges  
may run.  Then the final merge will run and I *think* the net number  
of merges that ran should always be the same and so the final segment  
name should be the same.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 05 12:50:38 2008
Return-Path: <java-user-return-35946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95519 invoked from network); 5 Sep 2008 12:50:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2008 12:50:38 -0000
Received: (qmail 3937 invoked by uid 500); 5 Sep 2008 12:50:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3441 invoked by uid 500); 5 Sep 2008 12:50:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3428 invoked by uid 99); 5 Sep 2008 12:50:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 05:50:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 12:49:31 +0000
Received: by yx-out-2324.google.com with SMTP id 3so228581yxj.5
        for <java-user@lucene.apache.org>; Fri, 05 Sep 2008 05:50:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=zIkii3RXvbiY95x+rlyKnCRriaRDQ3kYMLmV5bMOAp4=;
        b=QLEDZj8MY7ifNaJh+ANwGmCLkWcPEbM2v2k6+zTpGVo0q0QPRzPN0U6Ucei4uzXQPF
         lnd4bEHOE+KJCrlfFLAkklOWpIZ5AJsAGF3RBnheZOfJIlxky4HEY15f34/CuoSJWv+G
         5O7fySLF3v0Kew3tstAK0freOSYEaIyboDcJ8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=C/NSqNf6hFGqsPJZCuw2mYuIymKwsy2hvfWmcwngUfijHvLLAXEe7SNYHxta+TyaHs
         wEOxCVrAn4xUE+z3smofJvG6QH9UbQuDxTmh8uliKpfu6mY1uF/D/AqtZUNxDd7MVfDP
         LNncRLP5bZgr99L8LkkJN2qoovJhMPF2uCwWM=
Received: by 10.151.45.2 with SMTP id x2mr16431759ybj.76.1220619002384;
        Fri, 05 Sep 2008 05:50:02 -0700 (PDT)
Received: by 10.151.118.7 with HTTP; Fri, 5 Sep 2008 05:50:02 -0700 (PDT)
Message-ID: <85d3c3b60809050550v2f48df5aj290914ec5e30dd80@mail.gmail.com>
Date: Fri, 5 Sep 2008 08:50:02 -0400
From: "Jason Rutherglen" <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How can we know if 2 lucene indexes are same?
In-Reply-To: <3A375886-95E2-46F3-9A59-7BA56B1C88B2@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <5e76b0ad0808290235w45f762e3i2a476e8fe132dfb4@mail.gmail.com>
	 <5e76b0ad0809032222l6bdbe192r8fc521bfd8f5f9ee@mail.gmail.com>
	 <9233ccac0809040208k6c5117desd698944b888d000e@mail.gmail.com>
	 <54A87861-7A1E-409D-B8E8-CF0F5284E0BF@mikemccandless.com>
	 <9233ccac0809040629x43b63503wa1196bedd9791747@mail.gmail.com>
	 <58B46075-2634-4E55-8463-C2FF56E312FD@mikemccandless.com>
	 <5e76b0ad0809042352q2b6f30c3v56f3efd3e88fca10@mail.gmail.com>
	 <9233ccac0809050033l231cf0d7y9a5a3a3abe6764fb@mail.gmail.com>
	 <69de18140809050219o59168d19kae2f179758ebd464@mail.gmail.com>
	 <3A375886-95E2-46F3-9A59-7BA56B1C88B2@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

In Ocean I had to use a transaction log and execute everything that
way like SQL database replication.  Then let each node handle it's own
merging process.  Syncing the indexes is used to get a new node up to
speed, otherwise it's avoided for the reasons mentioned in the
previous email.

On Fri, Sep 5, 2008 at 8:33 AM, Michael McCandless
<lucene@mikemccandless.com> wrote:
>
> Shalin Shekhar Mangar wrote:
>
>> Let me try to explain.
>>
>> I have a master where indexing is done. I have multiple slaves for
>> querying.
>>
>> If I commit+optimize on the master and then rsync the index, the data
>> transferred on the network is huge. An alternate way is to commit on
>> master,
>> transfer the delta to the slave and issue an optimize on the slave. This
>> is
>> very fast because less data is transferred on the network.
>
> Large segment merges will also send huge traffic.  You may just want to send
> all updates (document adds/deletes) to all slaves directly?  It'd be nice if
> you could somehow NOT sync the effects of segment merging, but do sync doc
> add/deletes... not sure how to do that.
>
>> However, we need to ensure that the index on the slave is actually in sync
>> with the master. So that on another commit, we can blindly transfer the
>> delta to the slave.
>
> I assume your app ensures that no deltas arrive to the slave while it's
> running optimize?  So then the question becomes (I think) "if two indices
> are identical to begin with, and I separately run optimize on each, will the
> resulting two optimized indices be identical?".
>
> By "in sync" you also require the final segment name (after optimize) is
> identical right?
>
> I think the answer is yes, but I'm not certain unless I think more about it.
>  Also this behavior is not "promised" in Lucene's API.
>
> Merges for optimize are now allowed to run concurrently (by default, with
> ConcurrentMergeScheduler), except for the final (< mergeFactor segments)
> merge, which waits until others have finished.  So if there are 7 obvious
> merges necessary to optimize, 3 will run concurrently, while 4 wait.  Those
> 4 then run as the merges finish over time, which may happen in different
> orders for each index and so different merges may run.  Then the final merge
> will run and I *think* the net number of merges that ran should always be
> the same and so the final segment name should be the same.
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 05 12:52:33 2008
Return-Path: <java-user-return-35947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95879 invoked from network); 5 Sep 2008 12:52:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2008 12:52:33 -0000
Received: (qmail 5968 invoked by uid 500); 5 Sep 2008 12:52:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5937 invoked by uid 500); 5 Sep 2008 12:52:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5926 invoked by uid 99); 5 Sep 2008 12:52:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 05:52:25 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 12:51:24 +0000
Received: from [172.18.249.244] (172.18.249.244) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.1.291.1; Fri, 5 Sep 2008 14:51:32 +0200
Subject: Re: ramdisks
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <1220605233.7526.65.camel@PC990.sb.statsbiblioteket.dk>
References: <1bcb7c7f0809040858s419b7008q3c4ec13a9da0e6a2@mail.gmail.com>
	 <1220598037.7526.50.camel@PC990.sb.statsbiblioteket.dk>
	 <1bcb7c7f0809050133k53e4ada4hdef2f35e33751dd@mail.gmail.com>
	 <1220605233.7526.65.camel@PC990.sb.statsbiblioteket.dk>
Content-Type: text/plain
Organization: Statsbiblioteket
Date: Fri, 5 Sep 2008 14:51:31 +0200
Message-ID: <1220619091.7526.97.camel@PC990.sb.statsbiblioteket.dk>
MIME-Version: 1.0
X-Mailer: Evolution 2.22.3.1 (2.22.3.1-1.fc9) 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, 2008-09-05 at 11:00 +0200, Toke Eskildsen wrote:
> As for Flash-SSDs, we've tried 2 * MTRON 6000 32GB RAID 0, 2 * SanDisk
> 5000 32GB RAID 0 and SanDisk something (64GB model) both as single drive
> and 4 drives in RAID 0.

Update:

The "SanDisk something" turned out to be a Samsung MCCOE64G5MPP-0VA00,
when I asked our hardware-department. My apologies to the list and to
Samsung.

By coincidence (or not. I'm not the one that picked the SSD), it's the
drive recommended in
http://www.tomshardware.com/reviews/flash-ssd-hard-drive,2000.html
which seems a relevant read for this thread.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 05 12:53:42 2008
Return-Path: <java-user-return-35948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96375 invoked from network); 5 Sep 2008 12:53:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2008 12:53:42 -0000
Received: (qmail 8240 invoked by uid 500); 5 Sep 2008 12:53:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8214 invoked by uid 500); 5 Sep 2008 12:53:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8203 invoked by uid 99); 5 Sep 2008 12:53:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 05:53:34 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of raymond.balmes@gmail.com designates 216.239.58.188 as permitted sender)
Received: from [216.239.58.188] (HELO gv-out-0910.google.com) (216.239.58.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 12:52:36 +0000
Received: by gv-out-0910.google.com with SMTP id p33so14169gvf.23
        for <java-user@lucene.apache.org>; Fri, 05 Sep 2008 05:52:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=1Uw1ZtoeiK0Mb5avUvIvNIu/8H23bExbz5tV7JOsTaw=;
        b=hzJ9jzGCsBna1kOddvIVytiqHRJe7WZ38aj7u48XzuTTtbHlHKvnUmyiRCNPzPgolK
         hkBW3AvZa6+uPgKPSkeL4PYCEqYhHb5y6deG1+Pwc8iH4aW3hRXcH3QBWNYg2R5oKVi0
         m70hamUtByThwwE37VMQoPhPgS32XX7xEUFgU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=RKBLFnj2qW04fqTF1UF7JiednmIF3ffvE+NkShZ4pBCzI6SLCWXmN/kWTCVwZ/Jrxv
         RC3CVumQff7weLPoDR3lw/AULRqsO8U03SI9JbgfuStD18eGlAfeYNjBk4WvoW3xHBlU
         pz4OfLYqSUELPQcPgaEVV4GvcP/KsuMuOWmBA=
Received: by 10.103.243.9 with SMTP id v9mr7921526mur.44.1220619179092;
        Fri, 05 Sep 2008 05:52:59 -0700 (PDT)
Received: by 10.103.214.9 with HTTP; Fri, 5 Sep 2008 05:52:58 -0700 (PDT)
Message-ID: <4014d98b0809050552u6a5966d8jbd175c0709d4a1c@mail.gmail.com>
Date: Fri, 5 Sep 2008 14:52:59 +0200
From: "=?ISO-8859-1?Q?Raymond_Balm=E8s?=" <raymond.balmes@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Beginner: Specific indexing
In-Reply-To: <Pine.LNX.4.62.0809042143540.5350@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_33849_4650316.1220619179056"
References: <4014d98b0808301202k46a05677l3bb5fd6e8c9b124@mail.gmail.com>
	 <Pine.LNX.4.62.0809021041280.5494@radix.cryptio.net>
	 <4014d98b0809021250j7a774a82xf2974a026d36a8e7@mail.gmail.com>
	 <Pine.LNX.4.62.0809042143540.5350@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_33849_4650316.1220619179056
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I understand your point, I did not say it was a Lucene problem but was
rather checking if I my intended design was correct... basically not.
Since I thought that I would first break my stream in token to do my special
filter, I thought I could do it in one step...

Interesting if you are not going to use an analyser... what then ? I'm
thinking of using javacc, because I oversimplified somewhat the 3 field
string structure, so I need a kind of small grammar for that.

Thx anyway, preventing me for doing odd things.




On Fri, Sep 5, 2008 at 6:48 AM, Chris Hostetter <hossman_lucene@fucit.org>wrote:

>
> Honestly: your problem doesn't sound like a Lucene problem to me at all
> ... i would write custom code to cehck your files for the pattern you are
> looking for.  if you find it *then* construct a Document object, and add
> your 3 fields.  I probably wouldn't even use an analyzer.
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_33849_4650316.1220619179056--

From java-user-return-35949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 05 13:01:43 2008
Return-Path: <java-user-return-35949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99410 invoked from network); 5 Sep 2008 13:01:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2008 13:01:43 -0000
Received: (qmail 27980 invoked by uid 500); 5 Sep 2008 13:01:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27956 invoked by uid 500); 5 Sep 2008 13:01:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27945 invoked by uid 99); 5 Sep 2008 13:01:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 06:01:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of noble.paul@gmail.com designates 74.125.78.27 as permitted sender)
Received: from [74.125.78.27] (HELO ey-out-2122.google.com) (74.125.78.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 13:00:36 +0000
Received: by ey-out-2122.google.com with SMTP id 6so207009eyi.53
        for <java-user@lucene.apache.org>; Fri, 05 Sep 2008 06:00:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=fqfJ+yzpv5uG0FtM8vPeF99o3X4vABa6SvVqLBZen5o=;
        b=uUeL2AJRckHqrpWMb4Yk76aJN0dgKffPd9C3D1Kq4SvXmhKRmv57VTJOjBcPYDQG/l
         m+yI4tIoCox35Z0uvGsAZ+hITKdmO65p/OteZaozMYo7uIaSs+nYqIjJQ3PdvpbqlsJS
         qZ76ePqdjoqgDvwhkEUB2DieMr+0w0pbkCEg0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=CaT30n4hx0+WWg8RWlMmmgAuumLjZlemKBg8J3GYiMv8bxTUuBHGazcMaZOkKoW+MI
         +Tpn6D/inkLmwf3EvALk9XZkgEAbgL6rOhSTHMX7gJuQ2tGeitrMxAOcN/R4KF0A0av5
         lw/LaTJp2aaJPFaDEfa8L/ku9kdtv5qLpRXEc=
Received: by 10.210.119.5 with SMTP id r5mr13699598ebc.98.1220619648569;
        Fri, 05 Sep 2008 06:00:48 -0700 (PDT)
Received: by 10.210.60.3 with HTTP; Fri, 5 Sep 2008 06:00:48 -0700 (PDT)
Message-ID: <5e76b0ad0809050600q7ed3bcd8pabda8acc32056229@mail.gmail.com>
Date: Fri, 5 Sep 2008 18:30:48 +0530
From: "=?UTF-8?B?Tm9ibGUgUGF1bCDgtKg=?= =?UTF-8?B?4LWL4LSs4LS/4LSz4LWN4oCNIOCkqOCli+CkrOCljeCks+CljQ==?=" <noble.paul@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How can we know if 2 lucene indexes are same?
In-Reply-To: <85d3c3b60809050550v2f48df5aj290914ec5e30dd80@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <5e76b0ad0808290235w45f762e3i2a476e8fe132dfb4@mail.gmail.com>
	 <9233ccac0809040208k6c5117desd698944b888d000e@mail.gmail.com>
	 <54A87861-7A1E-409D-B8E8-CF0F5284E0BF@mikemccandless.com>
	 <9233ccac0809040629x43b63503wa1196bedd9791747@mail.gmail.com>
	 <58B46075-2634-4E55-8463-C2FF56E312FD@mikemccandless.com>
	 <5e76b0ad0809042352q2b6f30c3v56f3efd3e88fca10@mail.gmail.com>
	 <9233ccac0809050033l231cf0d7y9a5a3a3abe6764fb@mail.gmail.com>
	 <69de18140809050219o59168d19kae2f179758ebd464@mail.gmail.com>
	 <3A375886-95E2-46F3-9A59-7BA56B1C88B2@mikemccandless.com>
	 <85d3c3b60809050550v2f48df5aj290914ec5e30dd80@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, Sep 5, 2008 at 6:20 PM, Jason Rutherglen
<jason.rutherglen@gmail.com> wrote:
> In Ocean I had to use a transaction log and execute everything that
> way like SQL database replication.  Then let each node handle it's own
> merging process.  Syncing the indexes is used to get a new node up to
> speed, otherwise it's avoided for the reasons mentioned in the
> previous email.
Propagating the logs is OK but most of Solr users may not need that
feature. They usually update the master in one indexing operation in
which they may add millions of docs and they may commit after that.
Just think about the cost of indexing that many documents on each
slave . It may slow down the responses from live slaves.
Anyway we have not ruled out that approach . That can be added as
another option and we are anyway planning to do that too
>
> On Fri, Sep 5, 2008 at 8:33 AM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>>
>> Shalin Shekhar Mangar wrote:
>>
>>> Let me try to explain.
>>>
>>> I have a master where indexing is done. I have multiple slaves for
>>> querying.
>>>
>>> If I commit+optimize on the master and then rsync the index, the data
>>> transferred on the network is huge. An alternate way is to commit on
>>> master,
>>> transfer the delta to the slave and issue an optimize on the slave. This
>>> is
>>> very fast because less data is transferred on the network.
>>
>> Large segment merges will also send huge traffic.  You may just want to send
>> all updates (document adds/deletes) to all slaves directly?  It'd be nice if
>> you could somehow NOT sync the effects of segment merging, but do sync doc
>> add/deletes... not sure how to do that.
>>
>>> However, we need to ensure that the index on the slave is actually in sync
>>> with the master. So that on another commit, we can blindly transfer the
>>> delta to the slave.
>>
>> I assume your app ensures that no deltas arrive to the slave while it's
>> running optimize?  So then the question becomes (I think) "if two indices
>> are identical to begin with, and I separately run optimize on each, will the
>> resulting two optimized indices be identical?".
>>
>> By "in sync" you also require the final segment name (after optimize) is
>> identical right?
>>
>> I think the answer is yes, but I'm not certain unless I think more about it.
>>  Also this behavior is not "promised" in Lucene's API.
>>
>> Merges for optimize are now allowed to run concurrently (by default, with
>> ConcurrentMergeScheduler), except for the final (< mergeFactor segments)
>> merge, which waits until others have finished.  So if there are 7 obvious
>> merges necessary to optimize, 3 will run concurrently, while 4 wait.  Those
>> 4 then run as the merges finish over time, which may happen in different
>> orders for each index and so different merges may run.  Then the final merge
>> will run and I *think* the net number of merges that ran should always be
>> the same and so the final segment name should be the same.
>>
>> Mike
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
--Noble Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 05 13:19:00 2008
Return-Path: <java-user-return-35950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9098 invoked from network); 5 Sep 2008 13:19:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2008 13:19:00 -0000
Received: (qmail 53326 invoked by uid 500); 5 Sep 2008 13:18:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53297 invoked by uid 500); 5 Sep 2008 13:18:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53282 invoked by uid 99); 5 Sep 2008 13:18:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 06:18:51 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yeshuangming@gmail.com designates 209.85.217.30 as permitted sender)
Received: from [209.85.217.30] (HELO mail-gx0-f30.google.com) (209.85.217.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 13:17:53 +0000
Received: by gxk11 with SMTP id 11so18055gxk.5
        for <java-user@lucene.apache.org>; Fri, 05 Sep 2008 06:17:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=ljbbDYnBZUWnMVwWJHIAYxf/N37DN12N/Gdti8YFRg8=;
        b=R9i1xks+QzURLT+1pLexscEpvyYDR2UYAbU/A5WXDAOiY6BCzrvXzPMldX7wc1RyoS
         05vAlvXQ900n42Tx3uC8jCegaptIu1OgvrE7DbG2J3yqfYXfIcnDUjr21/+Qnhn2Pxke
         H7Ew9k4fVUobWLy9M7NDGF8aSGqkQya8IkRHc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Cbko/YCQZqF+cXYviTMWnmdgR2YorX8Awth7T2diJBMR1lco+3Z/8lKhmkMfo0Pnp4
         0MLUEUc0qLhsJttc9UmVzkF6fP8ilRc/DMCK8IAKbKgEbsPkYnCqcEXtVdJBCsDFreTq
         my8KA8L1DqFdiCLmtE1OGzWBdkqqNwaiDFgps=
Received: by 10.151.145.11 with SMTP id x11mr16440113ybn.104.1220620644327;
        Fri, 05 Sep 2008 06:17:24 -0700 (PDT)
Received: by 10.151.84.5 with HTTP; Fri, 5 Sep 2008 06:17:24 -0700 (PDT)
Message-ID: <9233ccac0809050617j2c917476m774d7cbb77adf206@mail.gmail.com>
Date: Fri, 5 Sep 2008 21:17:24 +0800
From: "=?GB2312?B?0rbLq8P3?=" <yeshuangming@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How can we know if 2 lucene indexes are same?
In-Reply-To: <3A375886-95E2-46F3-9A59-7BA56B1C88B2@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_42019_29855048.1220620644321"
References: <5e76b0ad0808290235w45f762e3i2a476e8fe132dfb4@mail.gmail.com>
	 <5e76b0ad0809032222l6bdbe192r8fc521bfd8f5f9ee@mail.gmail.com>
	 <9233ccac0809040208k6c5117desd698944b888d000e@mail.gmail.com>
	 <54A87861-7A1E-409D-B8E8-CF0F5284E0BF@mikemccandless.com>
	 <9233ccac0809040629x43b63503wa1196bedd9791747@mail.gmail.com>
	 <58B46075-2634-4E55-8463-C2FF56E312FD@mikemccandless.com>
	 <5e76b0ad0809042352q2b6f30c3v56f3efd3e88fca10@mail.gmail.com>
	 <9233ccac0809050033l231cf0d7y9a5a3a3abe6764fb@mail.gmail.com>
	 <69de18140809050219o59168d19kae2f179758ebd464@mail.gmail.com>
	 <3A375886-95E2-46F3-9A59-7BA56B1C88B2@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_42019_29855048.1220620644321
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

There is more and more complex, actually I hava a small index system can
config multiple index server for query,

In my opinion,  because  index update operating is synchronized between
different Thread that update the index, so

for indexing new data : can process data that want to index at the master,
when get the documents, add the documents to the index at the master and add
them to every slave,

for deleting data : delete at the master and every slaves at the same time,

I think we can believe  the index is indeed the same at the master and at
all slaves except other unexpected error in individual node.

And i hear about there is some frame to sync data between computers, but
just hear about.

Sorry for my englist. :)




2008/9/5, Michael McCandless <lucene@mikemccandless.com>:
>
>
> Shalin Shekhar Mangar wrote:
>
> Let me try to explain.
>>
>> I have a master where indexing is done. I have multiple slaves for
>> querying.
>>
>> If I commit+optimize on the master and then rsync the index, the data
>> transferred on the network is huge. An alternate way is to commit on
>> master,
>> transfer the delta to the slave and issue an optimize on the slave. This
>> is
>> very fast because less data is transferred on the network.
>>
>
> Large segment merges will also send huge traffic.  You may just want to
> send all updates (document adds/deletes) to all slaves directly?  It'd be
> nice if you could somehow NOT sync the effects of segment merging, but do
> sync doc add/deletes... not sure how to do that.
>
> However, we need to ensure that the index on the slave is actually in sync
>> with the master. So that on another commit, we can blindly transfer the
>> delta to the slave.
>>
>
> I assume your app ensures that no deltas arrive to the slave while it's
> running optimize?  So then the question becomes (I think) "if two indices
> are identical to begin with, and I separately run optimize on each, will the
> resulting two optimized indices be identical?".
>
> By "in sync" you also require the final segment name (after optimize) is
> identical right?
>
> I think the answer is yes, but I'm not certain unless I think more about
> it.  Also this behavior is not "promised" in Lucene's API.
>
> Merges for optimize are now allowed to run concurrently (by default, with
> ConcurrentMergeScheduler), except for the final (< mergeFactor segments)
> merge, which waits until others have finished.  So if there are 7 obvious
> merges necessary to optimize, 3 will run concurrently, while 4 wait.  Those
> 4 then run as the merges finish over time, which may happen in different
> orders for each index and so different merges may run.  Then the final merge
> will run and I *think* the net number of merges that ran should always be
> the same and so the final segment name should be the same.
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_42019_29855048.1220620644321--

From java-user-return-35951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 05 13:20:18 2008
Return-Path: <java-user-return-35951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9398 invoked from network); 5 Sep 2008 13:20:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2008 13:20:16 -0000
Received: (qmail 57712 invoked by uid 500); 5 Sep 2008 13:20:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57688 invoked by uid 500); 5 Sep 2008 13:20:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57677 invoked by uid 99); 5 Sep 2008 13:20:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 06:20:07 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shalinmangar@gmail.com designates 209.85.200.175 as permitted sender)
Received: from [209.85.200.175] (HELO wf-out-1314.google.com) (209.85.200.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 13:19:09 +0000
Received: by wf-out-1314.google.com with SMTP id 28so513243wfc.20
        for <java-user@lucene.apache.org>; Fri, 05 Sep 2008 06:19:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=lNS8JFnkR+Kp4WU7tHn9s7pigOtIDRJISGJwksX5a/E=;
        b=v6jwRqB42kiAcVNK9ximhhrIm/jUQ6zsCIZG3tLw9X8O6Y8yNqAD4dpiDpdcHZUPwY
         7vRZEX5c4wqCGQ4zxlvd/wwi9H0vNwM54yfKqv3S6TiM52dfhwpnW68wKd5e4UWF6Mf6
         kdKeVwKeEml6l7CIeNdYTP6sF3Jm+emSAHV+I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=QOuTWpVDN7reF2jQYQNUS6ALeRZE0WfhyTRd2ydyRYY9dPu+nh+CpXrJjMTRYr95wG
         cRQg+5sA/6YRNS4VBseKrox8LOrOQdppIugd8Rym2Q7Zw2QmRCMR8u4ivvS0TJtuHlAl
         q8gPj41tFjoL7MOxy590oXTLEW/4ORNmzNgk8=
Received: by 10.142.140.14 with SMTP id n14mr4052805wfd.164.1220620770801;
        Fri, 05 Sep 2008 06:19:30 -0700 (PDT)
Received: by 10.142.223.15 with HTTP; Fri, 5 Sep 2008 06:19:30 -0700 (PDT)
Message-ID: <69de18140809050619u30ff07a8qbdc5a27ef90280bb@mail.gmail.com>
Date: Fri, 5 Sep 2008 18:49:30 +0530
From: "Shalin Shekhar Mangar" <shalinmangar@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How can we know if 2 lucene indexes are same?
In-Reply-To: <3A375886-95E2-46F3-9A59-7BA56B1C88B2@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_37515_2261409.1220620770805"
References: <5e76b0ad0808290235w45f762e3i2a476e8fe132dfb4@mail.gmail.com>
	 <5e76b0ad0809032222l6bdbe192r8fc521bfd8f5f9ee@mail.gmail.com>
	 <9233ccac0809040208k6c5117desd698944b888d000e@mail.gmail.com>
	 <54A87861-7A1E-409D-B8E8-CF0F5284E0BF@mikemccandless.com>
	 <9233ccac0809040629x43b63503wa1196bedd9791747@mail.gmail.com>
	 <58B46075-2634-4E55-8463-C2FF56E312FD@mikemccandless.com>
	 <5e76b0ad0809042352q2b6f30c3v56f3efd3e88fca10@mail.gmail.com>
	 <9233ccac0809050033l231cf0d7y9a5a3a3abe6764fb@mail.gmail.com>
	 <69de18140809050219o59168d19kae2f179758ebd464@mail.gmail.com>
	 <3A375886-95E2-46F3-9A59-7BA56B1C88B2@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_37515_2261409.1220620770805
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On Fri, Sep 5, 2008 at 6:03 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> Large segment merges will also send huge traffic.  You may just want to
> send all updates (document adds/deletes) to all slaves directly?  It'd be
> nice if you could somehow NOT sync the effects of segment merging, but do
> sync doc add/deletes... not sure how to do that.
>

As Noble said, that is another option we can consider.

I assume your app ensures that no deltas arrive to the slave while it's
> running optimize?  So then the question becomes (I think) "if two indices
> are identical to begin with, and I separately run optimize on each, will the
> resulting two optimized indices be identical?".


Yes


> By "in sync" you also require the final segment name (after optimize) is
> identical right?


Yes

I think the answer is yes, but I'm not certain unless I think more about it.
>  Also this behavior is not "promised" in Lucene's API.
>
> Merges for optimize are now allowed to run concurrently (by default, with
> ConcurrentMergeScheduler), except for the final (< mergeFactor segments)
> merge, which waits until others have finished.  So if there are 7 obvious
> merges necessary to optimize, 3 will run concurrently, while 4 wait.  Those
> 4 then run as the merges finish over time, which may happen in different
> orders for each index and so different merges may run.  Then the final merge
> will run and I *think* the net number of merges that ran should always be
> the same and so the final segment name should be the same.


Thanks for the explanation Mike. The core problem is to make sure both
indices are in sync. The log replication helps us because we compare the
master and slave index with a reference point (log position). If it becomes
possible for us to specify a version number during a commit, we can use the
master's version number on the slave. This can help us compare the two
indices. Not sure if that API change will be generally useful. Thoughts?



-- 
Regards,
Shalin Shekhar Mangar.

------=_Part_37515_2261409.1220620770805--

From java-user-return-35952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 05 13:24:04 2008
Return-Path: <java-user-return-35952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11990 invoked from network); 5 Sep 2008 13:24:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2008 13:24:04 -0000
Received: (qmail 64457 invoked by uid 500); 5 Sep 2008 13:23:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63601 invoked by uid 500); 5 Sep 2008 13:23:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63590 invoked by uid 99); 5 Sep 2008 13:23:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 06:23:55 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 13:22:56 +0000
Received: by fg-out-1718.google.com with SMTP id l27so777826fgb.27
        for <java-user@lucene.apache.org>; Fri, 05 Sep 2008 06:23:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=IFj1FQEISRBmzQLXy908JF6Gj0OFfOXZWcS5m6m4Hr0=;
        b=HOLySOANTq8xc3cn2AmayCdue7TMunfykNY1A3rPMHYamj6IFv7I8R5xg0rXL1W+ti
         NdcgmY36k1jviMvemYNyJWv/uw1LY/WzUfJgHg4rbOzWG9IvEkoWDUIAt5L22pm1+J9n
         kgShbmgtdC+1N82g5nsWhtEg2lST7OqfgIvwQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=CNWTqyfAHxnObPI6AOQLr3OVb1ugtWFh0Al1CfFDGd/GUuicHBdQMqCFeOpgfftQTe
         iGNX5R0KEcSI4LzSxb3hFC+XUTcng8Rjf0HBvpqvqaAi1dKYiLd/+n8h0jW8ywdi+8ru
         vhk+dYmupbZlzFJTNSGdwGvEV7o+iEgBGiTmo=
Received: by 10.86.68.1 with SMTP id q1mr8801542fga.2.1220620988419;
        Fri, 05 Sep 2008 06:23:08 -0700 (PDT)
Received: by 10.86.76.4 with HTTP; Fri, 5 Sep 2008 06:23:07 -0700 (PDT)
Message-ID: <359a92830809050623q5357da05j305b1c56f1699653@mail.gmail.com>
Date: Fri, 5 Sep 2008 09:23:07 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem with lucene search starting to return 0 hits when a few seconds earlier it was returning hundreds
In-Reply-To: <62568.57815.qm@web45215.mail.sp1.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_34501_8169622.1220620988368"
References: <62568.57815.qm@web45215.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_34501_8169622.1220620988368
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I've been tracking this list for a year or more, and this is the
first I've ever heard of such a thing. Which leads me to wonder
what *else* changed besides your index size. Classpath?
jar files? Some sysadmin modified your search box? Is the
program throwing an exception that you're masking somewhere
in the code? Is it possible that you're getting an Out Of
Memory exception?

Folks have routinely used MUCH larger indexes than 3G without
anything like this happening.

So, here's what I'd do.
1> verify your index. Look at it in, say Luke.
2> Log your queries. It's possible you're not
     querying what you think you are.
3> You should very easily be able to create a small,
     stupid program on your personal machine that will
     open this index and fire off the queries in question
     and see if your problem is environmental or programmatic.
     If you run it in an IDE, you should be able to break
     on exceptions if there are any.
4> Assuming that <2> exhibits the problem, start paring
     back your code. Take out one thing at a time until
     you don't see the problem.
5> really take a look at any code changes that are
     coincident with this anomaly. Are you totally sure
     that the only thing that's changed is the index?
6> why are you bothering to make everything final? Are
    your code snippets part of a class that's instantiated
    for each query? Note that this is more curiosity than
    thinking that it's the source of your problem <G>.


Best
Erick



On Thu, Sep 4, 2008 at 5:46 PM, Justin Grunau <jjmg01@yahoo.com> wrote:

> Sorry, I forgot to include the visibility filters:
>
>                final BooleanQuery visibilityFilter = new BooleanQuery();
>                visibilityFilter.add(new TermQuery(new Term("isPublic",
> "true")),
>                        Occur.SHOULD);
>                visibilityFilter.add(new TermQuery(new Term("reader",
> user.getId())),
>                        Occur.SHOULD);
>
>
> These visibility filters ensure that a user only sees files which he or she
> has access to see.
>
> I am pretty certain nobody else has modified the index in the meantime, but
> why is that important?  We have several other servers -- whose only
> difference is a smaller data set -- with dozens of concurrent users, and the
> index on those servers gets modified and read concurrently all the time, but
> none of these other servers have ever exhibited this bug.
>
>
>
> ----- Original Message ----
> From: Leonid M. <leonidms@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Thursday, September 4, 2008 5:35:47 PM
> Subject: Re: Problem with lucene search starting to return 0 hits when a
> few seconds earlier it was returning hundreds
>
> * And what's about visibility filter? * Are you sure no one else accesses
> IndexReader and modifies index? See reader.maxDocs() to be confident.
>
> On Fri, Sep 5, 2008 at 12:19 AM, Justin Grunau <jjmg01@yahoo.com> wrote:
>
> > We have some code that uses lucene which has been working perfectly well
> > for several months.
> >
> > Recently, a QA team in our organization has set up a server with a much
> > larger data set than we have ever tested with in the past:  the resulting
> > lucene index is about 3G in size.
> >
> > On this particular server, the same lucene code which has been reliable
> in
> > the past is now exhibiting erratic behavior.  The first time you do a
> > search, it returns the correct number of hits.  The second time you do a
> > search, it may or may not return the correct set.  By the third time you
> do
> > a search, it will return 0 hits even for a search that was returning
> > hundreds of hits only a few seconds earlier.  All subsequent searches
> will
> > return 0 hits until you stop and restart the java process.
> >
> > A snippet of the relevant code follows:
> >
> >                    // getReader() returns the singleton IndexReader
> object
> >                final IndexReader reader = getReader();
> >
> >                    // ANALYZER is another singleton
> >                final QueryParser queryParser = new QueryParser("text",
> > ANALYZER);
> >                queryParser.setDefaultOperator(spec.getDefaultOp());
> >                final Query query =
> > queryParser.parse(spec.getSearchText()).rewrite(
> >                        reader);
> >                final IndexSearcher searcher = new IndexSearcher(reader);
> >
> >                final Hits hits = searcher.search(query, new
> > CachingWrapperFilter(
> >                        new QueryWrapperFilter(visibilityFilter)));
> >                total = hits.length();
> >
> >
> >
> > I understand that Lucene should be able to handle very large datasets, so
> > I'd be surprised if this were an actual Lucene bug.  I'm hoping it's just
> > that I'm doing something "wrong" which has gone unnoticed so far for
> several
> > months because we've never had an index this large.
> >
> > We're using lucene verison 2.2.0.
> >
> > Thanks!
> >
> > Justin Grunau
> >
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> Bests regards,
> Leonid Maslov!
> Personal blog: http://leonardinius.blogspot.com/
>
> Random thought:
> Princess Margaret  - "I have as much privacy as a goldfish in a bowl."
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_34501_8169622.1220620988368--

From java-user-return-35953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 05 13:33:44 2008
Return-Path: <java-user-return-35953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18091 invoked from network); 5 Sep 2008 13:33:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2008 13:33:44 -0000
Received: (qmail 79986 invoked by uid 500); 5 Sep 2008 13:33:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79828 invoked by uid 500); 5 Sep 2008 13:33:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79817 invoked by uid 99); 5 Sep 2008 13:33:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 06:33:35 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yeshuangming@gmail.com designates 209.85.217.30 as permitted sender)
Received: from [209.85.217.30] (HELO mail-gx0-f30.google.com) (209.85.217.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 13:32:36 +0000
Received: by gxk11 with SMTP id 11so33732gxk.5
        for <java-user@lucene.apache.org>; Fri, 05 Sep 2008 06:32:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=d4TWo/gwfyBwgoN5OgleauaCibtWP0xQ8IbF17YBxv0=;
        b=lOtsVmbeiTuaSAx6dwP23S+kTGaRlxoKIHBpn0XRiwmTD64Pq5ie7lJjClY/TV+kGE
         qrH9ANj5KT2hLdWxpFktvCUpma6egoZoh0cWrBZEcQsDq5NqsrmzEd83h1LOWcvMlP8s
         wFS8T7ezkY1EdS9nhrbeuKtIIpC7SlADT0B8k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=qpA7YCIpeMXBH1NMkYAAU23bddz1lL0j5+u6LUT+5o1WVln5T9QKkxfEIMnu9gd+b9
         2k6Ygtg8YhJMQi0UHRC0M23geGNxfLewmhluL4+c2PTGlaeyQELVG9WaQVhlrshiZO4X
         84OLXOBn/5OyDYEMVD586L6A0XVUXsDIgkCm8=
Received: by 10.151.156.7 with SMTP id i7mr16448237ybo.115.1220621526698;
        Fri, 05 Sep 2008 06:32:06 -0700 (PDT)
Received: by 10.151.84.5 with HTTP; Fri, 5 Sep 2008 06:32:06 -0700 (PDT)
Message-ID: <9233ccac0809050632u3a20d2c2y3055585f7318ad7c@mail.gmail.com>
Date: Fri, 5 Sep 2008 21:32:06 +0800
From: "=?GB2312?B?0rbLq8P3?=" <yeshuangming@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How can we know if 2 lucene indexes are same?
In-Reply-To: <9233ccac0809050617j2c917476m774d7cbb77adf206@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_42249_8447697.1220621526677"
References: <5e76b0ad0808290235w45f762e3i2a476e8fe132dfb4@mail.gmail.com>
	 <9233ccac0809040208k6c5117desd698944b888d000e@mail.gmail.com>
	 <54A87861-7A1E-409D-B8E8-CF0F5284E0BF@mikemccandless.com>
	 <9233ccac0809040629x43b63503wa1196bedd9791747@mail.gmail.com>
	 <58B46075-2634-4E55-8463-C2FF56E312FD@mikemccandless.com>
	 <5e76b0ad0809042352q2b6f30c3v56f3efd3e88fca10@mail.gmail.com>
	 <9233ccac0809050033l231cf0d7y9a5a3a3abe6764fb@mail.gmail.com>
	 <69de18140809050219o59168d19kae2f179758ebd464@mail.gmail.com>
	 <3A375886-95E2-46F3-9A59-7BA56B1C88B2@mikemccandless.com>
	 <9233ccac0809050617j2c917476m774d7cbb77adf206@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_42249_8447697.1220621526677
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: base64
Content-Disposition: inline

SnVzdCB0aGluayBhYm91dCB0aGUgY29zdCBvZiBpbmRleGluZyB0aGF0IG1hbnkgZG9jdW1lbnRz
IG9uIGVhY2gKc2xhdmUgLiBJdCBtYXkgc2xvdyBkb3duIHRoZSByZXNwb25zZXMgZnJvbSBsaXZl
IHNsYXZlcy4KCkkgdGhpbmsgdGhlcmUgbXVzdCBiZSBzb21ldGhpbmcgbGlrZSBzZWFyY2ggc2Vy
dmljZSBhdCB0aGUgc2xhdmVzIGluY3VkZSBhCkluZGV4U2VhcmNoZXIgb3Igb3RoZXIgZXF1YWxz
IG9iamVjdCwgYW5kIGluZGV4aW5nIHRoYXQgbWFueSBkb2N1bWVudHMgYnkgYQpJbmRleFdyaXRl
ciAsIGlzbid0IHRoZSBJbmRleFNlYXJjaGVyIGFmZmVjdGVkIGJ5IHRoZSBpbmRleGluZyBwcm9j
ZXNzPwpBZnRlciB0aGUgaW5kZXhpbmcsIHJlb3BlbiB0aGUgSW5kZXhTZWFyY2hlciB0byBsb2Fk
IHRoZSBuZXcgZGF0YS4KCgoKCjIwMDgvOS81LCDStsurw/cgPHllc2h1YW5nbWluZ0BnbWFpbC5j
b20+Ogo+Cj4gVGhlcmUgaXMgbW9yZSBhbmQgbW9yZSBjb21wbGV4LCBhY3R1YWxseSBJIGhhdmEg
YSBzbWFsbCBpbmRleCBzeXN0ZW0gY2FuCj4gY29uZmlnIG11bHRpcGxlIGluZGV4IHNlcnZlciBm
b3IgcXVlcnksCj4KPiBJbiBteSBvcGluaW9uLCAgYmVjYXVzZSAgaW5kZXggdXBkYXRlIG9wZXJh
dGluZyBpcyBzeW5jaHJvbml6ZWQgYmV0d2Vlbgo+IGRpZmZlcmVudCBUaHJlYWQgdGhhdCB1cGRh
dGUgdGhlIGluZGV4LCBzbwo+Cj4gZm9yIGluZGV4aW5nIG5ldyBkYXRhIDogY2FuIHByb2Nlc3Mg
ZGF0YSB0aGF0IHdhbnQgdG8gaW5kZXggYXQgdGhlIG1hc3RlciwKPiB3aGVuIGdldCB0aGUgZG9j
dW1lbnRzLCBhZGQgdGhlIGRvY3VtZW50cyB0byB0aGUgaW5kZXggYXQgdGhlIG1hc3RlciBhbmQg
YWRkCj4gdGhlbSB0byBldmVyeSBzbGF2ZSwKPgo+IGZvciBkZWxldGluZyBkYXRhIDogZGVsZXRl
IGF0IHRoZSBtYXN0ZXIgYW5kIGV2ZXJ5IHNsYXZlcyBhdCB0aGUgc2FtZSB0aW1lLAo+Cj4gSSB0
aGluayB3ZSBjYW4gYmVsaWV2ZSAgdGhlIGluZGV4IGlzIGluZGVlZCB0aGUgc2FtZSBhdCB0aGUg
bWFzdGVyIGFuZCBhdAo+IGFsbCBzbGF2ZXMgZXhjZXB0IG90aGVyIHVuZXhwZWN0ZWQgZXJyb3Ig
aW4gaW5kaXZpZHVhbCBub2RlLgo+Cj4gQW5kIGkgaGVhciBhYm91dCB0aGVyZSBpcyBzb21lIGZy
YW1lIHRvIHN5bmMgZGF0YSBiZXR3ZWVuIGNvbXB1dGVycywgYnV0Cj4ganVzdCBoZWFyIGFib3V0
Lgo+Cj4gU29ycnkgZm9yIG15IGVuZ2xpc3QuIDopCj4KPgo+Cj4KPiAyMDA4LzkvNSwgTWljaGFl
bCBNY0NhbmRsZXNzIDxsdWNlbmVAbWlrZW1jY2FuZGxlc3MuY29tPjoKPj4KPj4KPj4gU2hhbGlu
IFNoZWtoYXIgTWFuZ2FyIHdyb3RlOgo+Pgo+PiBMZXQgbWUgdHJ5IHRvIGV4cGxhaW4uCj4+Pgo+
Pj4gSSBoYXZlIGEgbWFzdGVyIHdoZXJlIGluZGV4aW5nIGlzIGRvbmUuIEkgaGF2ZSBtdWx0aXBs
ZSBzbGF2ZXMgZm9yCj4+PiBxdWVyeWluZy4KPj4+Cj4+PiBJZiBJIGNvbW1pdCtvcHRpbWl6ZSBv
biB0aGUgbWFzdGVyIGFuZCB0aGVuIHJzeW5jIHRoZSBpbmRleCwgdGhlIGRhdGEKPj4+IHRyYW5z
ZmVycmVkIG9uIHRoZSBuZXR3b3JrIGlzIGh1Z2UuIEFuIGFsdGVybmF0ZSB3YXkgaXMgdG8gY29t
bWl0IG9uCj4+PiBtYXN0ZXIsCj4+PiB0cmFuc2ZlciB0aGUgZGVsdGEgdG8gdGhlIHNsYXZlIGFu
ZCBpc3N1ZSBhbiBvcHRpbWl6ZSBvbiB0aGUgc2xhdmUuIFRoaXMKPj4+IGlzCj4+PiB2ZXJ5IGZh
c3QgYmVjYXVzZSBsZXNzIGRhdGEgaXMgdHJhbnNmZXJyZWQgb24gdGhlIG5ldHdvcmsuCj4+Pgo+
Pgo+PiBMYXJnZSBzZWdtZW50IG1lcmdlcyB3aWxsIGFsc28gc2VuZCBodWdlIHRyYWZmaWMuICBZ
b3UgbWF5IGp1c3Qgd2FudCB0bwo+PiBzZW5kIGFsbCB1cGRhdGVzIChkb2N1bWVudCBhZGRzL2Rl
bGV0ZXMpIHRvIGFsbCBzbGF2ZXMgZGlyZWN0bHk/ICBJdCdkIGJlCj4+IG5pY2UgaWYgeW91IGNv
dWxkIHNvbWVob3cgTk9UIHN5bmMgdGhlIGVmZmVjdHMgb2Ygc2VnbWVudCBtZXJnaW5nLCBidXQg
ZG8KPj4gc3luYyBkb2MgYWRkL2RlbGV0ZXMuLi4gbm90IHN1cmUgaG93IHRvIGRvIHRoYXQuCj4+
Cj4+IEhvd2V2ZXIsIHdlIG5lZWQgdG8gZW5zdXJlIHRoYXQgdGhlIGluZGV4IG9uIHRoZSBzbGF2
ZSBpcyBhY3R1YWxseSBpbiBzeW5jCj4+PiB3aXRoIHRoZSBtYXN0ZXIuIFNvIHRoYXQgb24gYW5v
dGhlciBjb21taXQsIHdlIGNhbiBibGluZGx5IHRyYW5zZmVyIHRoZQo+Pj4gZGVsdGEgdG8gdGhl
IHNsYXZlLgo+Pj4KPj4KPj4gSSBhc3N1bWUgeW91ciBhcHAgZW5zdXJlcyB0aGF0IG5vIGRlbHRh
cyBhcnJpdmUgdG8gdGhlIHNsYXZlIHdoaWxlIGl0J3MKPj4gcnVubmluZyBvcHRpbWl6ZT8gIFNv
IHRoZW4gdGhlIHF1ZXN0aW9uIGJlY29tZXMgKEkgdGhpbmspICJpZiB0d28gaW5kaWNlcwo+PiBh
cmUgaWRlbnRpY2FsIHRvIGJlZ2luIHdpdGgsIGFuZCBJIHNlcGFyYXRlbHkgcnVuIG9wdGltaXpl
IG9uIGVhY2gsIHdpbGwgdGhlCj4+IHJlc3VsdGluZyB0d28gb3B0aW1pemVkIGluZGljZXMgYmUg
aWRlbnRpY2FsPyIuCj4+Cj4+IEJ5ICJpbiBzeW5jIiB5b3UgYWxzbyByZXF1aXJlIHRoZSBmaW5h
bCBzZWdtZW50IG5hbWUgKGFmdGVyIG9wdGltaXplKSBpcwo+PiBpZGVudGljYWwgcmlnaHQ/Cj4+
Cj4+IEkgdGhpbmsgdGhlIGFuc3dlciBpcyB5ZXMsIGJ1dCBJJ20gbm90IGNlcnRhaW4gdW5sZXNz
IEkgdGhpbmsgbW9yZSBhYm91dAo+PiBpdC4gIEFsc28gdGhpcyBiZWhhdmlvciBpcyBub3QgInBy
b21pc2VkIiBpbiBMdWNlbmUncyBBUEkuCj4+Cj4+IE1lcmdlcyBmb3Igb3B0aW1pemUgYXJlIG5v
dyBhbGxvd2VkIHRvIHJ1biBjb25jdXJyZW50bHkgKGJ5IGRlZmF1bHQsIHdpdGgKPj4gQ29uY3Vy
cmVudE1lcmdlU2NoZWR1bGVyKSwgZXhjZXB0IGZvciB0aGUgZmluYWwgKDwgbWVyZ2VGYWN0b3Ig
c2VnbWVudHMpCj4+IG1lcmdlLCB3aGljaCB3YWl0cyB1bnRpbCBvdGhlcnMgaGF2ZSBmaW5pc2hl
ZC4gIFNvIGlmIHRoZXJlIGFyZSA3IG9idmlvdXMKPj4gbWVyZ2VzIG5lY2Vzc2FyeSB0byBvcHRp
bWl6ZSwgMyB3aWxsIHJ1biBjb25jdXJyZW50bHksIHdoaWxlIDQgd2FpdC4gIFRob3NlCj4+IDQg
dGhlbiBydW4gYXMgdGhlIG1lcmdlcyBmaW5pc2ggb3ZlciB0aW1lLCB3aGljaCBtYXkgaGFwcGVu
IGluIGRpZmZlcmVudAo+PiBvcmRlcnMgZm9yIGVhY2ggaW5kZXggYW5kIHNvIGRpZmZlcmVudCBt
ZXJnZXMgbWF5IHJ1bi4gIFRoZW4gdGhlIGZpbmFsIG1lcmdlCj4+IHdpbGwgcnVuIGFuZCBJICp0
aGluayogdGhlIG5ldCBudW1iZXIgb2YgbWVyZ2VzIHRoYXQgcmFuIHNob3VsZCBhbHdheXMgYmUK
Pj4gdGhlIHNhbWUgYW5kIHNvIHRoZSBmaW5hbCBzZWdtZW50IG5hbWUgc2hvdWxkIGJlIHRoZSBz
YW1lLgo+Pgo+PiBNaWtlCj4+Cj4+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+PiBUbyB1bnN1YnNjcmliZSwgZS1t
YWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPj4gRm9yIGFkZGl0
aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcK
Pj4KPj4KPgo=
------=_Part_42249_8447697.1220621526677--

From java-user-return-35954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 05 13:58:26 2008
Return-Path: <java-user-return-35954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27484 invoked from network); 5 Sep 2008 13:58:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2008 13:58:26 -0000
Received: (qmail 28450 invoked by uid 500); 5 Sep 2008 13:58:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28399 invoked by uid 500); 5 Sep 2008 13:58:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28359 invoked by uid 99); 5 Sep 2008 13:58:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 06:58:16 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yeshuangming@gmail.com designates 209.85.217.30 as permitted sender)
Received: from [209.85.217.30] (HELO mail-gx0-f30.google.com) (209.85.217.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 13:57:19 +0000
Received: by gxk11 with SMTP id 11so60622gxk.5
        for <java-user@lucene.apache.org>; Fri, 05 Sep 2008 06:57:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=fu0bzzph+SlAeri/JgHDmtDdWzVaYl14TIeoYtxolOA=;
        b=N8FKzk0a73Ak1EoV0OUBP5mi+hnnXJXt7UMcJJ2cNsvc8IzK5pRhiCzlO/YsUFOOPp
         tn2UHxjhoggOh244Q84ofMwE4ZvORiDUS3SVxtwnrYtflpHKno6X9PximXy9EN/NZcTq
         rH7EFXLkRRliI/1CrlS423Zu6h4XOt1NDpsKE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=wJoeGWIa0LdmXVVL6D0MBQMUE19CMcVmCOmUQ5JfPls5y0k78ofsE74ClK4wI2utIw
         GsG7dBsD02H5WicXeW10gOXLPWJtpdTT4JeIVKqJrNrkC145wxtxlb9psKnSusuzp528
         zPBpSVV+Emr/Hgh7EsJWlp7vLz9Py+JSMx/IM=
Received: by 10.151.111.1 with SMTP id o1mr1437029ybm.187.1220623070149;
        Fri, 05 Sep 2008 06:57:50 -0700 (PDT)
Received: by 10.151.84.5 with HTTP; Fri, 5 Sep 2008 06:57:50 -0700 (PDT)
Message-ID: <9233ccac0809050657w3ad578bapdd9c1d425db100b5@mail.gmail.com>
Date: Fri, 5 Sep 2008 21:57:50 +0800
From: "=?GB2312?B?0rbLq8P3?=" <yeshuangming@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene ram buffering
In-Reply-To: <1bcb7c7f0809040728s69ca8379he784af672ce1088c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_42533_28455895.1220623070151"
References: <1bcb7c7f0809040728s69ca8379he784af672ce1088c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_42533_28455895.1220623070151
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

IndexWriter.setRAMBufferSizeMB() Determines the amount of RAM that may be
used for buffering added documents before they are flushed as a new Segment.
Does it related to IndexSearcher?

And IndexSearcher hasn't setRAMBufferSizeMB() method, mean we can't control
the amount of RAM that may be used for searching.


2008/9/4, Cam Bazz <cambazz@gmail.com>:
>
> hello,
> I was reading the performance optimization guides then I found :
> writer.setRAMBufferSizeMB()
>
> combined with: writer.setMaxBufferedDocs(IndexWriter.DISABLE_AUTO_FLUSH);
>
> this can be used to flush automatically so if the ram buffer size is over a
> certain limit it will flush.
>
> now the question: i would like to manage all flushes myself. yet, i still
> need a large ram buffer (for search performance)
>
> how can I set ram buffer size to a large value, yet dont use auto flush. I
> just want to flush every 32 documents added - and manage that myself.
>
> if the ram buffer size is high, but we have a small number of documents,
> does lucene try to write the entire contents of the ram buffer - thus
> resulting in a higher flush time?
>
> usually in oodbms systems, you use a larger ram buffer for search, and a
> smaller ram buffer for write optimization. the reason being is a smaller
> ram
> buffer is writable to disk faster.
>
> is that the case with lucene?
>
> Best.
> -C.B.
>

------=_Part_42533_28455895.1220623070151--

From java-user-return-35955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 05 14:58:15 2008
Return-Path: <java-user-return-35955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53146 invoked from network); 5 Sep 2008 14:58:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2008 14:58:15 -0000
Received: (qmail 42649 invoked by uid 500); 5 Sep 2008 14:58:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42617 invoked by uid 500); 5 Sep 2008 14:58:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42605 invoked by uid 99); 5 Sep 2008 14:58:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 07:58:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.178.242 as permitted sender)
Received: from [64.233.178.242] (HELO hs-out-0708.google.com) (64.233.178.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 14:57:07 +0000
Received: by hs-out-0708.google.com with SMTP id 4so83846hsl.5
        for <java-user@lucene.apache.org>; Fri, 05 Sep 2008 07:57:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=gdJoKyASMfeKB4zd4RrQGmngD0RQfluV7BWPm1SnphU=;
        b=aUzCIHvYpoQxfqIa1J9qqyWlc1aM4o9EJ0b+rKRRon27olo+HMGTSbNUE2FeKq1ngh
         zUFECFqto7G4Wl+O/ei1W60Wa0TBemi/+o6nRkfImWV3V/bI/VOO+pZrRgDtDU4jXdWF
         w6bPWjXkBW91y7NJpXx03ERXfvcwbNO99nv/8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=g1mH7S5r0+OcPT+dMYgpgb0mRSIfbAopJjQDR7JTOJTlnWMSGfaMwJr0C8IndBZ2Hw
         GOhlgpJtbj4wPm70AUKMhn7aAVd7xH5QDLwgmxB97j2su4SGf1fk51dlNgh2fSLfer2u
         n8RutBft2W3IPyKXkDqSn0xR426PzWvw+u84A=
Received: by 10.100.205.15 with SMTP id c15mr12635217ang.134.1220626657225;
        Fri, 05 Sep 2008 07:57:37 -0700 (PDT)
Received: from ?192.168.1.109? ( [68.198.57.217])
        by mx.google.com with ESMTPS id c4sm517201anc.28.2008.09.05.07.57.35
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 05 Sep 2008 07:57:36 -0700 (PDT)
Message-ID: <48C148DE.7060205@gmail.com>
Date: Fri, 05 Sep 2008 10:57:34 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.16 (X11/20080725)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: PhraseQuery issues - differences with SpanNearQuery
References: <74DFE4F68173F94787693F06E792A8F377261F@exch1.ad.getmedium.com> <48C02B51.1080908@gmail.com> <200809050121.35458.paul.elschot@xs4all.nl>
In-Reply-To: <200809050121.35458.paul.elschot@xs4all.nl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Paul Elschot wrote:
> Op Thursday 04 September 2008 20:39:13 schreef Mark Miller:
>   
>> Sounds like its more in line with what you are looking for. If I
>> remember correctly, the phrase query factors in the edit distance in
>> scoring, but the NearSpanQuery will just use the combined idf for
>> each of the terms in it, so distance shouldnt matter with spans (I'm
>> sure Paul will correct me if I am wrong).
>>     
>
> SpanScorer will use the similarity slop factor for each matching
> span size to adjust the effective frequency.
> The span size is the difference in position between the first
> and last matching term, and idf is not used for scoring Spans.
> The reason why idf is not used could be that there is no basic
> score value associated with inner spans; only top level spans
> are scored by SpanScorer.
> For more details, please consult the SpanScorer code.
>
> Regards,
> Paul Elschot
>   
Right, my fault, its the query normalization in the weight which uses 
idf (by pulling from each clause in the span). So its kind of factored 
into the score, but not in the way I implied. Sorry, my bad on the info.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 05 15:01:43 2008
Return-Path: <java-user-return-35956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67972 invoked from network); 5 Sep 2008 15:01:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2008 15:01:43 -0000
Received: (qmail 47581 invoked by uid 500); 5 Sep 2008 15:01:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47546 invoked by uid 500); 5 Sep 2008 15:01:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47532 invoked by uid 99); 5 Sep 2008 15:01:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 08:01:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.132.243 as permitted sender)
Received: from [209.85.132.243] (HELO an-out-0708.google.com) (209.85.132.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 15:00:35 +0000
Received: by an-out-0708.google.com with SMTP id c37so80842anc.49
        for <java-user@lucene.apache.org>; Fri, 05 Sep 2008 08:00:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=FQMrvWuWqgFwn9fjuFGcHWlzhomN+X2gwdzLtYx4IJ4=;
        b=mTgIx+CO70issBc8f++BYXm6i1179VjdVmdRKTHTwWh85J3KzoXylABR6DvNl45McW
         GZCJ6FjpEaBZWp0E7YgGMPvjSfxRpHqtdrgRNJygNPRSmP80UA0RUiUWo/lSQQOwuPaS
         tkr/K4G/+kJGVIBAteYkpAg/Wp2LfN702Ktn8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=iqFi0Y+2IWdUVIsozj2HpHuty+MTPBYr+iwOTB5/KtvIYJ5ccWwjT34rLnnBlVAJ9t
         UCopJ056UJ08ma8gm6cLIzaEnC2HkRVO+WvWyIXTxyMTBo/PVvuBEVT3dfCeG1c9Gnf8
         Z9C5c1GaZb1PXfrunz5SNwYQ4Lu5DSsJwsJEE=
Received: by 10.100.209.5 with SMTP id h5mr10128493ang.18.1220626847681;
        Fri, 05 Sep 2008 08:00:47 -0700 (PDT)
Received: from ?192.168.1.109? ( [68.198.57.217])
        by mx.google.com with ESMTPS id c2sm540753ana.10.2008.09.05.08.00.46
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 05 Sep 2008 08:00:46 -0700 (PDT)
Message-ID: <48C1499D.2040208@gmail.com>
Date: Fri, 05 Sep 2008 11:00:45 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.16 (X11/20080725)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: PhraseQuery issues - differences with SpanNearQuery
References: <74DFE4F68173F94787693F06E792A8F377261F@exch1.ad.getmedium.com> <48C02B51.1080908@gmail.com> <200809050121.35458.paul.elschot@xs4all.nl>
In-Reply-To: <200809050121.35458.paul.elschot@xs4all.nl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


> SpanScorer will use the similarity slop factor for each matching
> span size to adjust the effective frequency.
>
>
> Regards,
> Paul Elschot
>   
You have pointed this out to me before. One day I will remember <g> 
Every time I look things over again I miss it, and I couldn't find that 
email in the archives. Its done here if original questioner is intersted:

SpanScorer

  protected boolean setFreqCurrentDoc() throws IOException {
    if (! more) {
      return false;
    }
    doc = spans.doc();
    freq = 0.0f;
    while (more && doc == spans.doc()) {
      int matchLength = spans.end() - spans.start();
      freq += getSimilarity().sloppyFreq(matchLength);
      more = spans.next();
    }
    return more || (freq != 0);
  }

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 05 15:44:33 2008
Return-Path: <java-user-return-35957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88718 invoked from network); 5 Sep 2008 15:44:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2008 15:44:33 -0000
Received: (qmail 8954 invoked by uid 500); 5 Sep 2008 15:44:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8917 invoked by uid 500); 5 Sep 2008 15:44:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8906 invoked by uid 99); 5 Sep 2008 15:44:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 08:44:23 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 15:43:25 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KbdTY-0004tU-0U
	for java-user@lucene.apache.org; Fri, 05 Sep 2008 08:43:56 -0700
Message-ID: <19333985.post@talk.nabble.com>
Date: Fri, 5 Sep 2008 08:43:56 -0700 (PDT)
From: Andy33 <clever_one3@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Memory Leak
In-Reply-To: <a823853a0809031804q38058d0ekcedc5f5d45f04307@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: clever_one3@yahoo.com
References: <19276999.post@talk.nabble.com> <a823853a0809021812r4e8c3972g32531c311af21609@mail.gmail.com> <19294053.post@talk.nabble.com> <a823853a0809031804q38058d0ekcedc5f5d45f04307@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


If I don't keep the IndexSearcher as a Singleton and instead open and close=
 a
new one each time, I have a large memory leak (probably due to the large
queries I am doing). After watching the memory a while, I still believe I
have a small memory leak even when the Directory, Analyzer, and
IndexSearcher are Singletons. My free memory slowly becomes smaller after
each query. Any ideas on what that may be due to?

Here's my updated code...

private synchronized Hits doQuery(String field, String queryStr, Sort
sortOrder, String indexDirectory) throws Exception
    {
=09Directory directory =3D null;
=09Query query =3D null;
=09QueryParser parser =3D null;
=09
=09try
=09{
=09    directory =3D DirectorySingleton.getInstance(indexDirectory);
=09    ivIndexSearcher =3D (IndexSearcher)
SearcherSingleton.getInstance(directory);
=09      =20
=09    //search the index
=09    parser =3D new QueryParser(field, AnalyzerSingleton.getInstance());
=09    query =3D parser.parse(queryStr);
=09
=09    return ivIndexSearcher.search(query, sortOrder);
=09}
=09finally
=09{=09  =20
=09    if(null !=3D directory)
=09    {
=09=09directory.close();
=09    }
=09   =20
=09    directory =3D null;
=09    parser =3D null;
=09    query =3D null;  =20
=09}
    }


--------------
Example Singleton

public class SearcherSingleton
{
    private static volatile HashMap<Directory, Searcher> cvSearches =3D new
HashMap<Directory, Searcher>();
   =20
   =20
    protected SearcherSingleton()
    {
=09
    }
   =20
 =20
    public static Searcher getInstance(Directory directory) throws
IOException
    {
=09if(!cvSearches.containsKey(directory))
=09{
=09    synchronized(SearcherSingleton.class)
=09    {
=09=09if(!cvSearches.containsKey(directory))
=09=09{
=09=09    cvSearches.put(directory, new IndexSearcher(directory));
=09=09}
=09    }
=09}
=09
=09return cvSearches.get(directory);
    }
   =20
}



=EC=9E=A5=EC=9A=A9=EC=84=9D wrote:
>=20
> In fact, I think that the important reasons are Directory class and
> Analyzer
> class.
> If you don't want IndexSearcher class keep open for the entire life of a
> web
> application, you can do it.
> I think It will not cause memory leak problem.
> But, Directory and Analyzer classes can cause the problem if they new
> created by method call every time. I think...
> Only keep two classes Directory and Analyzer by singlton and do test. :)
>=20
>=20

--=20
View this message in context: http://www.nabble.com/Lucene-Memory-Leak-tp19=
276999p19333985.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 05 16:17:12 2008
Return-Path: <java-user-return-35958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98164 invoked from network); 5 Sep 2008 16:17:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2008 16:17:12 -0000
Received: (qmail 66740 invoked by uid 500); 5 Sep 2008 16:17:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66517 invoked by uid 500); 5 Sep 2008 16:17:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66506 invoked by uid 99); 5 Sep 2008 16:17:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 09:17:02 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 209.85.200.175 as permitted sender)
Received: from [209.85.200.175] (HELO wf-out-1314.google.com) (209.85.200.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 16:16:01 +0000
Received: by wf-out-1314.google.com with SMTP id 28so579190wfc.20
        for <java-user@lucene.apache.org>; Fri, 05 Sep 2008 09:16:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=2GImo6JTVR4KhkzdZpfmph7E3kIpQogOEkQt+ReCGNY=;
        b=Ra94wNgGf58JNDLYZDIIZFZ12fiQvRVN8a/o32q6g2LCuFZPx+Zswxgm2Lj5gax2FO
         dtNrE8xLYLFBt4VAeVEx/2VIcJbJH0toM7T1hSwws65BaCDCCUU46WqVZm8Le4eyDIBX
         +N8XNOaoaBWn4UMkB46gMigVAVZs/zE7LeRHE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=l6qaoNfrRIR3gQWc7BcMvrKRwbW63FweT6YCf89v9ONfj6wXSW4IHWENwYg7FhwO8h
         /cJ1KwDlZAxz3GC+zDcGNsBhis7csBhn/MnLOKRgbUdmudMqIMVF2BdABrmSIETL5VEw
         /6mDUaKr3u6uK0R5OnIcRyQ4An0hDcm7Obokg=
Received: by 10.142.229.4 with SMTP id b4mr4123743wfh.143.1220631392769;
        Fri, 05 Sep 2008 09:16:32 -0700 (PDT)
Received: by 10.142.111.8 with HTTP; Fri, 5 Sep 2008 09:16:32 -0700 (PDT)
Message-ID: <6e3ae6310809050916y51dd4218jed9f9f7d5193671@mail.gmail.com>
Date: Fri, 5 Sep 2008 09:16:32 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Memory Leak
In-Reply-To: <19333985.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_61243_32756988.1220631392772"
References: <19276999.post@talk.nabble.com>
	 <a823853a0809021812r4e8c3972g32531c311af21609@mail.gmail.com>
	 <19294053.post@talk.nabble.com>
	 <a823853a0809031804q38058d0ekcedc5f5d45f04307@mail.gmail.com>
	 <19333985.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_61243_32756988.1220631392772
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: base64
Content-Disposition: inline

QXJlIHlvdSB1c2luZyBSQU1EaXJlY3Rvcnk/CgpJIGFtIGFjdHVhbGx5IGFsc28gZGVhbGluZyB3
aXRoIGEgbWVtb3J5IGxlYWsuIE15IGNhc2UgaXMgb25seSBwYXJ0aWN1bGFyIHRvClJBTURpcmVj
dG9yeS4KCmh0dHA6Ly9tYXJrbWFpbC5vcmcvbWVzc2FnZS9kZmdjbm5qZ2xuZTN3eW5wCkhvd2V2
ZXIsIHRoaXMgUkFNRGlyZWN0b3J5IGNhc2UgaXMgbm90IGFzIHNpbXBsZSBhcyBzZXR0aW5nIHNl
YXJjaGVyPW51bGwsCmJlY2F1c2UgSSBmb3VuZCBzb21lIHJlZmVyZW5jZSB0byBSQU1EaXJlY3Rv
cnkgaXMgaGVsZCBieSBzb21lIFRocmVhZExvY2FsCnZhcmlhYmxlcy4oYnV0IEkgbmVlZCB0byBy
ZXVzZSB0aHJlYWQgYWxzbykuCgpIZXJlIGlzIHRoZSByZWZlcmVuY2UgdHJlZToKb3JnLmFwYWNo
ZS5sdWNlbmUuc3RvcmUuUkFNRGlyZWN0b3J5CiAgfC0gZGlyZWN0b3J5IG9mIG9yZy5hcGFjaGUu
bHVjZW5lLnN0b3JlLlJBTUZpbGUKICAgICAgfC0gZmlsZSBvZiBvcmcuYXBhY2hlLmx1Y2VuZS5z
dG9yZS5SQU1JbnB1dFN0cmVhbQogICAgICAgICAgfC0gYmFzZSBvZiBvcmcuYXBhY2hlLmx1Y2Vu
ZS5pbmRleC5Db21wb3VuZEZpbGVSZWFkZXIkQ1NJbmRleElucHV0CiAgICAgICAgICAgICAgfC0g
aW5wdXQgb2Ygb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguU2VnbWVudFRlcm1FbnVtCiAgICAgICAg
ICAgICAgICAgIHwtIHZhbHVlIG9mIGphdmEubGFuZy5UaHJlYWRMb2NhbCRUaHJlYWRMb2NhbE1h
cCRFbnRyeQoKCkkgYW0gdHJ5aW5nIHRvIHRyYWNrIGl0IGRvd24gbm93LiBJZiBhbnlvbmUga25v
d3MgYWJvdXQgaXQsIHBsZWFzZSBsZXQgbWUKa25vdy4KCi0tIApDaHJpcyBMdQotLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tCkluc3RhbnQgU2NhbGFibGUgRnVsbC1UZXh0IFNlYXJjaCBPbiBBbnkg
RGF0YWJhc2UvQXBwbGljYXRpb24Kc2l0ZTogaHR0cDovL3d3dy5kYnNpZ2h0Lm5ldApkZW1vOiBo
dHRwOi8vc2VhcmNoLmRic2lnaHQuY29tCkx1Y2VuZSBEYXRhYmFzZSBTZWFyY2ggaW4gMyBtaW51
dGVzOgpodHRwOi8vd2lraS5kYnNpZ2h0LmNvbS9pbmRleC5waHA/dGl0bGU9Q3JlYXRlX0x1Y2Vu
ZV9EYXRhYmFzZV9TZWFyY2hfaW5fM19taW51dGVzCkRCU2lnaHQgY3VzdG9tZXIsIGEgc2hvcHBp
bmcgY29tcGFyaXNvbiBzaXRlLCAoYW5vbnltb3VzIHBlciByZXF1ZXN0KSBnb3QKMi42IE1pbGxp
b24gRXVybyBmdW5kaW5nIQoKCk9uIEZyaSwgU2VwIDUsIDIwMDggYXQgODo0MyBBTSwgQW5keTMz
IDxjbGV2ZXJfb25lM0B5YWhvby5jb20+IHdyb3RlOgoKPgo+IElmIEkgZG9uJ3Qga2VlcCB0aGUg
SW5kZXhTZWFyY2hlciBhcyBhIFNpbmdsZXRvbiBhbmQgaW5zdGVhZCBvcGVuIGFuZCBjbG9zZQo+
IGEKPiBuZXcgb25lIGVhY2ggdGltZSwgSSBoYXZlIGEgbGFyZ2UgbWVtb3J5IGxlYWsgKHByb2Jh
Ymx5IGR1ZSB0byB0aGUgbGFyZ2UKPiBxdWVyaWVzIEkgYW0gZG9pbmcpLiBBZnRlciB3YXRjaGlu
ZyB0aGUgbWVtb3J5IGEgd2hpbGUsIEkgc3RpbGwgYmVsaWV2ZSBJCj4gaGF2ZSBhIHNtYWxsIG1l
bW9yeSBsZWFrIGV2ZW4gd2hlbiB0aGUgRGlyZWN0b3J5LCBBbmFseXplciwgYW5kCj4gSW5kZXhT
ZWFyY2hlciBhcmUgU2luZ2xldG9ucy4gTXkgZnJlZSBtZW1vcnkgc2xvd2x5IGJlY29tZXMgc21h
bGxlciBhZnRlcgo+IGVhY2ggcXVlcnkuIEFueSBpZGVhcyBvbiB3aGF0IHRoYXQgbWF5IGJlIGR1
ZSB0bz8KPgo+IEhlcmUncyBteSB1cGRhdGVkIGNvZGUuLi4KPgo+IHByaXZhdGUgc3luY2hyb25p
emVkIEhpdHMgZG9RdWVyeShTdHJpbmcgZmllbGQsIFN0cmluZyBxdWVyeVN0ciwgU29ydAo+IHNv
cnRPcmRlciwgU3RyaW5nIGluZGV4RGlyZWN0b3J5KSB0aHJvd3MgRXhjZXB0aW9uCj4gICAgewo+
ICAgICAgICBEaXJlY3RvcnkgZGlyZWN0b3J5ID0gbnVsbDsKPiAgICAgICAgIFF1ZXJ5IHF1ZXJ5
ID0gbnVsbDsKPiAgICAgICAgUXVlcnlQYXJzZXIgcGFyc2VyID0gbnVsbDsKPgo+ICAgICAgICB0
cnkKPiAgICAgICAgewo+ICAgICAgICAgICAgZGlyZWN0b3J5ID0gRGlyZWN0b3J5U2luZ2xldG9u
LmdldEluc3RhbmNlKGluZGV4RGlyZWN0b3J5KTsKPiAgICAgICAgICAgIGl2SW5kZXhTZWFyY2hl
ciA9IChJbmRleFNlYXJjaGVyKQo+IFNlYXJjaGVyU2luZ2xldG9uLmdldEluc3RhbmNlKGRpcmVj
dG9yeSk7Cj4KPiAgICAgICAgICAgIC8vc2VhcmNoIHRoZSBpbmRleAo+ICAgICAgICAgICAgcGFy
c2VyID0gbmV3IFF1ZXJ5UGFyc2VyKGZpZWxkLAo+IEFuYWx5emVyU2luZ2xldG9uLmdldEluc3Rh
bmNlKCkpOwo+ICAgICAgICAgICAgcXVlcnkgPSBwYXJzZXIucGFyc2UocXVlcnlTdHIpOwo+Cj4g
ICAgICAgICAgICByZXR1cm4gaXZJbmRleFNlYXJjaGVyLnNlYXJjaChxdWVyeSwgc29ydE9yZGVy
KTsKPiAgICAgICAgIH0KPiAgICAgICAgZmluYWxseQo+ICAgICAgICB7Cj4gICAgICAgICAgICBp
ZihudWxsICE9IGRpcmVjdG9yeSkKPiAgICAgICAgICAgIHsKPiAgICAgICAgICAgICAgICBkaXJl
Y3RvcnkuY2xvc2UoKTsKPiAgICAgICAgICAgIH0KPgo+ICAgICAgICAgICAgZGlyZWN0b3J5ID0g
bnVsbDsKPiAgICAgICAgICAgICBwYXJzZXIgPSBudWxsOwo+ICAgICAgICAgICAgcXVlcnkgPSBu
dWxsOwo+ICAgICAgICB9Cj4gICAgfQo+Cj4KPiAtLS0tLS0tLS0tLS0tLQo+IEV4YW1wbGUgU2lu
Z2xldG9uCj4KPiBwdWJsaWMgY2xhc3MgU2VhcmNoZXJTaW5nbGV0b24KPiB7Cj4gICAgcHJpdmF0
ZSBzdGF0aWMgdm9sYXRpbGUgSGFzaE1hcDxEaXJlY3RvcnksIFNlYXJjaGVyPiBjdlNlYXJjaGVz
ID0gbmV3Cj4gSGFzaE1hcDxEaXJlY3RvcnksIFNlYXJjaGVyPigpOwo+Cj4KPiAgICBwcm90ZWN0
ZWQgU2VhcmNoZXJTaW5nbGV0b24oKQo+ICAgIHsKPgo+ICAgIH0KPgo+Cj4gICAgcHVibGljIHN0
YXRpYyBTZWFyY2hlciBnZXRJbnN0YW5jZShEaXJlY3RvcnkgZGlyZWN0b3J5KSB0aHJvd3MKPiBJ
T0V4Y2VwdGlvbgo+ICAgIHsKPiAgICAgICAgaWYoIWN2U2VhcmNoZXMuY29udGFpbnNLZXkoZGly
ZWN0b3J5KSkKPiAgICAgICAgewo+ICAgICAgICAgICAgc3luY2hyb25pemVkKFNlYXJjaGVyU2lu
Z2xldG9uLmNsYXNzKQo+ICAgICAgICAgICAgewo+ICAgICAgICAgICAgICAgIGlmKCFjdlNlYXJj
aGVzLmNvbnRhaW5zS2V5KGRpcmVjdG9yeSkpCj4gICAgICAgICAgICAgICAgewo+ICAgICAgICAg
ICAgICAgICAgICBjdlNlYXJjaGVzLnB1dChkaXJlY3RvcnksIG5ldyBJbmRleFNlYXJjaGVyKGRp
cmVjdG9yeSkpOwo+ICAgICAgICAgICAgICAgIH0KPiAgICAgICAgICAgIH0KPiAgICAgICAgfQo+
Cj4gICAgICAgIHJldHVybiBjdlNlYXJjaGVzLmdldChkaXJlY3RvcnkpOwo+ICAgICB9Cj4KPiB9
Cj4KPgo+Cj4gwOW/67yuIHdyb3RlOgo+ID4KPiA+IEluIGZhY3QsIEkgdGhpbmsgdGhhdCB0aGUg
aW1wb3J0YW50IHJlYXNvbnMgYXJlIERpcmVjdG9yeSBjbGFzcyBhbmQKPiA+IEFuYWx5emVyCj4g
PiBjbGFzcy4KPiA+IElmIHlvdSBkb24ndCB3YW50IEluZGV4U2VhcmNoZXIgY2xhc3Mga2VlcCBv
cGVuIGZvciB0aGUgZW50aXJlIGxpZmUgb2YgYQo+ID4gd2ViCj4gPiBhcHBsaWNhdGlvbiwgeW91
IGNhbiBkbyBpdC4KPiA+IEkgdGhpbmsgSXQgd2lsbCBub3QgY2F1c2UgbWVtb3J5IGxlYWsgcHJv
YmxlbS4KPiA+IEJ1dCwgRGlyZWN0b3J5IGFuZCBBbmFseXplciBjbGFzc2VzIGNhbiBjYXVzZSB0
aGUgcHJvYmxlbSBpZiB0aGV5IG5ldwo+ID4gY3JlYXRlZCBieSBtZXRob2QgY2FsbCBldmVyeSB0
aW1lLiBJIHRoaW5rLi4uCj4gPiBPbmx5IGtlZXAgdHdvIGNsYXNzZXMgRGlyZWN0b3J5IGFuZCBB
bmFseXplciBieSBzaW5nbHRvbiBhbmQgZG8gdGVzdC4gOikKPiA+Cj4gPgo+Cj4gLS0KPiBWaWV3
IHRoaXMgbWVzc2FnZSBpbiBjb250ZXh0Ogo+IGh0dHA6Ly93d3cubmFiYmxlLmNvbS9MdWNlbmUt
TWVtb3J5LUxlYWstdHAxOTI3Njk5OXAxOTMzMzk4NS5odG1sCj4gU2VudCBmcm9tIHRoZSBMdWNl
bmUgLSBKYXZhIFVzZXJzIG1haWxpbmcgbGlzdCBhcmNoaXZlIGF0IE5hYmJsZS5jb20uCj4KPgo+
IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLQo+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNj
cmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6
IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4KPgo=
------=_Part_61243_32756988.1220631392772--

From java-user-return-35959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 05 16:24:36 2008
Return-Path: <java-user-return-35959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2386 invoked from network); 5 Sep 2008 16:24:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2008 16:24:36 -0000
Received: (qmail 84759 invoked by uid 500); 5 Sep 2008 16:24:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84731 invoked by uid 500); 5 Sep 2008 16:24:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84720 invoked by uid 99); 5 Sep 2008 16:24:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 09:24:27 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 16:23:28 +0000
Received: by gxk6 with SMTP id 6so199146gxk.5
        for <java-user@lucene.apache.org>; Fri, 05 Sep 2008 09:22:58 -0700 (PDT)
Received: by 10.151.147.16 with SMTP id z16mr16731395ybn.128.1220631778060;
        Fri, 05 Sep 2008 09:22:58 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id s30sm510419elf.9.2008.09.05.09.22.44
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 05 Sep 2008 09:22:51 -0700 (PDT)
Message-Id: <7250DE29-E4A0-4924-8070-0DA2308193D3@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <69de18140809050619u30ff07a8qbdc5a27ef90280bb@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: How can we know if 2 lucene indexes are same?
Date: Fri, 5 Sep 2008 12:22:37 -0400
References: <5e76b0ad0808290235w45f762e3i2a476e8fe132dfb4@mail.gmail.com> <5e76b0ad0809032222l6bdbe192r8fc521bfd8f5f9ee@mail.gmail.com> <9233ccac0809040208k6c5117desd698944b888d000e@mail.gmail.com> <54A87861-7A1E-409D-B8E8-CF0F5284E0BF@mikemccandless.com> <9233ccac0809040629x43b63503wa1196bedd9791747@mail.gmail.com> <58B46075-2634-4E55-8463-C2FF56E312FD@mikemccandless.com> <5e76b0ad0809042352q2b6f30c3v56f3efd3e88fca10@mail.gmail.com> <9233ccac0809050033l231cf0d7y9a5a3a3abe6764fb@mail.gmail.com> <69de18140809050219o59168d19kae2f179758ebd464@mail.gmail.com> <3A375886-95E2-46F3-9A59-7BA56B1C88B2@mikemccandless.com> <69de18140809050619u30ff07a8qbdc5a27ef90280bb@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Shalin Shekhar Mangar wrote:

> On Fri, Sep 5, 2008 at 6:03 PM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>>
>> Large segment merges will also send huge traffic.  You may just  
>> want to
>> send all updates (document adds/deletes) to all slaves directly?   
>> It'd be
>> nice if you could somehow NOT sync the effects of segment merging,  
>> but do
>> sync doc add/deletes... not sure how to do that.
>>
>
> As Noble said, that is another option we can consider.

Well this is certainly a nice challenging problem :)

> Thanks for the explanation Mike. The core problem is to make sure both
> indices are in sync. The log replication helps us because we compare  
> the
> master and slave index with a reference point (log position). If it  
> becomes
> possible for us to specify a version number during a commit, we can  
> use the
> master's version number on the slave. This can help us compare the two
> indices. Not sure if that API change will be generally useful.  
> Thoughts?

I think this could be a generally useful feature?

So you're thinking IndexWriter.commit() would take an optional opaque  
argument (maybe a String for generality?) that's recorded into the  
segments_N and could then later be retrieved by IndexReader and  
IndexWriter?

After a merge completes, should it just carry forward whatever was  
stored on the last segments_N?

We should call it something other than version, which already exists  
-- maybe "commitDetails", "commitComment", "commitUserData" or  
something?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 05 16:52:52 2008
Return-Path: <java-user-return-35960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13143 invoked from network); 5 Sep 2008 16:52:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2008 16:52:52 -0000
Received: (qmail 20952 invoked by uid 500); 5 Sep 2008 16:52:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20923 invoked by uid 500); 5 Sep 2008 16:52:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20912 invoked by uid 99); 5 Sep 2008 16:52:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 09:52:43 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shalinmangar@gmail.com designates 74.125.44.30 as permitted sender)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 16:51:45 +0000
Received: by yx-out-2324.google.com with SMTP id 3so285234yxj.5
        for <java-user@lucene.apache.org>; Fri, 05 Sep 2008 09:51:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=+43Sb9iEikYUIbjm1cAaUPTDrITXDordW06tT9w76Gw=;
        b=AuSh212ARNt6eroh1Etl3Uz7QuSft2cKC5TvmFIx5d83TStCDf3wE9hIHioUeYncHH
         TQOtujtJuGpzHOTkOVBCVpyS7nlWNgiph9Y0EKjxW8n6sbfk+9R/shyxN5WrOhp5D+6L
         ff2hdZPQ+vt/ucwt//NZkdujm73LpWTvb+WDE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=PdxCqMEnatwNZYIpQAiPVXeuPErGJ+Fp9FAz6QlZIo1cUo6FQOu24bQc5fDFsPxHDN
         QXTxZrjD0K9bPSZFv9J68P4SiMANsgNJoSlz7mpNXk0JB5mqjVId2PsNVyD4U6gUqx9z
         1raw0NUR2RDBI8EXmvwQ3LtSZinap/GWsknCE=
Received: by 10.142.222.21 with SMTP id u21mr4125225wfg.318.1220633518194;
        Fri, 05 Sep 2008 09:51:58 -0700 (PDT)
Received: by 10.142.223.15 with HTTP; Fri, 5 Sep 2008 09:51:58 -0700 (PDT)
Message-ID: <69de18140809050951o7c760ca7ma444d5811a1f393f@mail.gmail.com>
Date: Fri, 5 Sep 2008 22:21:58 +0530
From: "Shalin Shekhar Mangar" <shalinmangar@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How can we know if 2 lucene indexes are same?
In-Reply-To: <7250DE29-E4A0-4924-8070-0DA2308193D3@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_39905_11055049.1220633518187"
References: <5e76b0ad0808290235w45f762e3i2a476e8fe132dfb4@mail.gmail.com>
	 <54A87861-7A1E-409D-B8E8-CF0F5284E0BF@mikemccandless.com>
	 <9233ccac0809040629x43b63503wa1196bedd9791747@mail.gmail.com>
	 <58B46075-2634-4E55-8463-C2FF56E312FD@mikemccandless.com>
	 <5e76b0ad0809042352q2b6f30c3v56f3efd3e88fca10@mail.gmail.com>
	 <9233ccac0809050033l231cf0d7y9a5a3a3abe6764fb@mail.gmail.com>
	 <69de18140809050219o59168d19kae2f179758ebd464@mail.gmail.com>
	 <3A375886-95E2-46F3-9A59-7BA56B1C88B2@mikemccandless.com>
	 <69de18140809050619u30ff07a8qbdc5a27ef90280bb@mail.gmail.com>
	 <7250DE29-E4A0-4924-8070-0DA2308193D3@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_39905_11055049.1220633518187
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On Fri, Sep 5, 2008 at 9:52 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> Well this is certainly a nice challenging problem :)


Yes it is :-)

I think this could be a generally useful feature?
>
> So you're thinking IndexWriter.commit() would take an optional opaque
> argument (maybe a String for generality?) that's recorded into the
> segments_N and could then later be retrieved by IndexReader and IndexWriter?
>
> After a merge completes, should it just carry forward whatever was stored
> on the last segments_N?
>
> We should call it something other than version, which already exists --
> maybe "commitDetails", "commitComment", "commitUserData" or something?
>
>
Thinking more on this, we may not need to modify the index format at all for
this use-case. This is easily achieved in the current system by adding a
dummy document which Solr can read/write -- not very elegant but it can work
:-)

Using the version came to my mind because I didn't see it as very useful by
itself. It is just the current time stamp as a long, incremented for every
commit.

-- 
Regards,
Shalin Shekhar Mangar.

------=_Part_39905_11055049.1220633518187--

From java-user-return-35961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 05 16:55:47 2008
Return-Path: <java-user-return-35961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15196 invoked from network); 5 Sep 2008 16:55:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2008 16:55:47 -0000
Received: (qmail 32311 invoked by uid 500); 5 Sep 2008 16:55:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32287 invoked by uid 500); 5 Sep 2008 16:55:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32276 invoked by uid 99); 5 Sep 2008 16:55:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 09:55:38 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 16:54:38 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KbeaT-0007od-A0
	for java-user@lucene.apache.org; Fri, 05 Sep 2008 09:55:09 -0700
Message-ID: <19335403.post@talk.nabble.com>
Date: Fri, 5 Sep 2008 09:55:09 -0700 (PDT)
From: Andy33 <clever_one3@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Memory Leak
In-Reply-To: <6e3ae6310809050916y51dd4218jed9f9f7d5193671@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: clever_one3@yahoo.com
References: <19276999.post@talk.nabble.com> <a823853a0809021812r4e8c3972g32531c311af21609@mail.gmail.com> <19294053.post@talk.nabble.com> <a823853a0809031804q38058d0ekcedc5f5d45f04307@mail.gmail.com> <19333985.post@talk.nabble.com> <6e3ae6310809050916y51dd4218jed9f9f7d5193671@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


No, I am using FSDirectory. Unfortunately, my indexes are over 2 GB in size
and I don't have a server that has that much free memory just for the
indexes.

If you figure out anything, let me know just in case it helps my case as
well. Thanks.



chrislusf wrote:
> 
> Are you using RAMDirectory?
> 
> I am actually also dealing with a memory leak. My case is only particular
> to
> RAMDirectory.
> 
> http://markmail.org/message/dfgcnnjglne3wynp
> However, this RAMDirectory case is not as simple as setting searcher=null,
> because I found some reference to RAMDirectory is held by some ThreadLocal
> variables.(but I need to reuse thread also).
> 
> Here is the reference tree:
> org.apache.lucene.store.RAMDirectory
>   |- directory of org.apache.lucene.store.RAMFile
>       |- file of org.apache.lucene.store.RAMInputStream
>           |- base of
> org.apache.lucene.index.CompoundFileReader$CSIndexInput
>               |- input of org.apache.lucene.index.SegmentTermEnum
>                   |- value of java.lang.ThreadLocal$ThreadLocalMap$Entry
> 
> 
> I am trying to track it down now. If anyone knows about it, please let me
> know.
> 
> -- 
> Chris Lu
> 
> 
-- 
View this message in context: http://www.nabble.com/Lucene-Memory-Leak-tp19276999p19335403.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 05 17:47:29 2008
Return-Path: <java-user-return-35962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35367 invoked from network); 5 Sep 2008 17:47:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2008 17:47:29 -0000
Received: (qmail 6579 invoked by uid 500); 5 Sep 2008 17:47:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6552 invoked by uid 500); 5 Sep 2008 17:47:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6535 invoked by uid 99); 5 Sep 2008 17:47:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 10:47:20 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 17:46:22 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id E02E071C5B2; Fri,  5 Sep 2008 10:46:13 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id DB02671C57D
	for <java-user@lucene.apache.org>; Fri,  5 Sep 2008 10:46:13 -0700 (PDT)
Date: Fri, 5 Sep 2008 10:46:13 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Beginner: Specific indexing
In-Reply-To: <4014d98b0809050552u6a5966d8jbd175c0709d4a1c@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0809051037410.12113@radix.cryptio.net>
References: <4014d98b0808301202k46a05677l3bb5fd6e8c9b124@mail.gmail.com> 
 <Pine.LNX.4.62.0809021041280.5494@radix.cryptio.net> 
 <4014d98b0809021250j7a774a82xf2974a026d36a8e7@mail.gmail.com> 
 <Pine.LNX.4.62.0809042143540.5350@radix.cryptio.net>
 <4014d98b0809050552u6a5966d8jbd175c0709d4a1c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Interesting if you are not going to use an analyser... what then ? I'm
: thinking of using javacc, because I oversimplified somewhat the 3 field
: string structure, so I need a kind of small grammar for that.

Well, the specifics of "what else" is in your files is going to be the 
biggest factor in deciding how to find the bits of info you need.  

Let me try to put in perspective for you how your question sounded to me, 
as someone unfamiliar with your specific problem.  the question sounded 
equivilent to if someone had asked;


"I have a bunch of XML files, some of these XML files contain syntax that 
loks like this...
   <property name="${keyword}" min="${x}" max="${y}" />
where ${x} and ${y} are small numbers, and ${keyword} is from a fixed list 
of words.  My idea is to simply build a TokenFilter that will look for 
those... do I have it right ?"

...and i would say: "Not really.  Use an XML parser to parse your XML and 
extract your structured data, then add them to your Lucene Document."

You're files may not be XML, but the basic premise is the same; use 
whatever code makes the most sense to parse whatever file format you are 
dealing with given what you know aboutthe files (not just the parts you 
want, but the other parts as well)


Where an Analyzer might make sense is if you want to do processing on 
those bits of data after you find them ... stemming your keywords, or 
mapping them to synonyms, etc...


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 05 18:50:12 2008
Return-Path: <java-user-return-35963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73742 invoked from network); 5 Sep 2008 18:50:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2008 18:50:12 -0000
Received: (qmail 79499 invoked by uid 500); 5 Sep 2008 18:50:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79471 invoked by uid 500); 5 Sep 2008 18:50:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79460 invoked by uid 99); 5 Sep 2008 18:50:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 11:50:03 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.30] (HELO smtp-vbr10.xs4all.nl) (194.109.24.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 18:49:05 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr10.xs4all.nl (8.13.8/8.13.8) with ESMTP id m85In5Tl094244
	for <java-user@lucene.apache.org>; Fri, 5 Sep 2008 20:49:05 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: PhraseQuery issues - differences with SpanNearQuery
Date: Fri, 5 Sep 2008 20:49:04 +0200
User-Agent: KMail/1.9.9
References: <74DFE4F68173F94787693F06E792A8F377261F@exch1.ad.getmedium.com> <200809050121.35458.paul.elschot@xs4all.nl> <48C148DE.7060205@gmail.com>
In-Reply-To: <48C148DE.7060205@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200809052049.04739.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Op Friday 05 September 2008 16:57:34 schreef Mark Miller:
> Paul Elschot wrote:
> > Op Thursday 04 September 2008 20:39:13 schreef Mark Miller:
> >> Sounds like its more in line with what you are looking for. If I
> >> remember correctly, the phrase query factors in the edit distance
> >> in scoring, but the NearSpanQuery will just use the combined idf
> >> for each of the terms in it, so distance shouldnt matter with
> >> spans (I'm sure Paul will correct me if I am wrong).
> >
> > SpanScorer will use the similarity slop factor for each matching
> > span size to adjust the effective frequency.
> > The span size is the difference in position between the first
> > and last matching term, and idf is not used for scoring Spans.
> > The reason why idf is not used could be that there is no basic
> > score value associated with inner spans; only top level spans
> > are scored by SpanScorer.
> > For more details, please consult the SpanScorer code.
> >
> > Regards,
> > Paul Elschot
>
> Right, my fault, its the query normalization in the weight which uses
> idf (by pulling from each clause in the span). So its kind of
> factored into the score, but not in the way I implied. Sorry, my bad
> on the info.

Well, I had missed the phrase idf over all the SpanQuery terms
as used from the SpanWeight.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 05 18:58:32 2008
Return-Path: <java-user-return-35964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77707 invoked from network); 5 Sep 2008 18:58:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2008 18:58:32 -0000
Received: (qmail 86606 invoked by uid 500); 5 Sep 2008 18:58:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86579 invoked by uid 500); 5 Sep 2008 18:58:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86568 invoked by uid 99); 5 Sep 2008 18:58:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 11:58:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [87.248.110.178] (HELO n45.bullet.mail.ukl.yahoo.com) (87.248.110.178)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 05 Sep 2008 18:57:23 +0000
Received: from [217.146.182.180] by n45.bullet.mail.ukl.yahoo.com with NNFMP; 05 Sep 2008 18:57:52 -0000
Received: from [87.248.110.114] by t6.bullet.ukl.yahoo.com with NNFMP; 05 Sep 2008 18:57:52 -0000
Received: from [127.0.0.1] by omp219.mail.ukl.yahoo.com with NNFMP; 05 Sep 2008 18:57:52 -0000
X-Yahoo-Newman-Id: 197512.98766.bm@omp219.mail.ukl.yahoo.com
Received: (qmail 48664 invoked from network); 5 Sep 2008 18:57:52 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=Qn/+lLpYZLQX0/bm+IAPeiKIJsqNbNWKv6YCyGpGNyc0D9NMzy/a1LT+0xyAajx/vw9hT7DxZBvcJmWPuloGpvILcI/meDjwzHzt0fxdd/DANz3lvxOjhkGiAKx+4MQNzXFMdCDIp9otrQgKUTBsMJUwnEPSJTMuk7mXjUFzJlI=  ;
Received: from unknown (HELO ?192.168.2.4?) (markharw00d@194.106.34.5 with plain)
  by smtp124.mail.ukl.yahoo.com with SMTP; 5 Sep 2008 18:57:51 -0000
X-YMail-OSG: Q764ku0VM1lM_urGu9PLDdTJiSDNFpl9cbSxUWTPkOY09kwxFFa71zq77dh9AcHwtzc8sDAzS5W7K7tRH9Jws9JgpiEFujvViSchv.hbLBw73WGL7zy6H.C4BRh5iPbbzII-
X-Yahoo-Newman-Property: ymail-3
Message-ID: <48C18126.1040902@yahoo.co.uk>
Date: Fri, 05 Sep 2008 19:57:42 +0100
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How can we know if 2 lucene indexes are same?
References: <5e76b0ad0808290235w45f762e3i2a476e8fe132dfb4@mail.gmail.com>	 <54A87861-7A1E-409D-B8E8-CF0F5284E0BF@mikemccandless.com>	 <9233ccac0809040629x43b63503wa1196bedd9791747@mail.gmail.com>	 <58B46075-2634-4E55-8463-C2FF56E312FD@mikemccandless.com>	 <5e76b0ad0809042352q2b6f30c3v56f3efd3e88fca10@mail.gmail.com>	 <9233ccac0809050033l231cf0d7y9a5a3a3abe6764fb@mail.gmail.com>	 <69de18140809050219o59168d19kae2f179758ebd464@mail.gmail.com>	 <3A375886-95E2-46F3-9A59-7BA56B1C88B2@mikemccandless.com>	 <69de18140809050619u30ff07a8qbdc5a27ef90280bb@mail.gmail.com>	 <7250DE29-E4A0-4924-8070-0DA2308193D3@mikemccandless.com> <69de18140809050951o7c760ca7ma444d5811a1f393f@mail.gmail.com>
In-Reply-To: <69de18140809050951o7c760ca7ma444d5811a1f393f@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


>
> I think this could be a generally useful feature?
>   
+1. I could definitely use a "commitUserData" option for the same reasons.

> Thinking more on this, we may not need to modify the index format at all for
> this use-case. This is easily achieved in the current system by adding a
> dummy document which Solr can read/write -- not very elegant but it can work
>   

I thought about this but was uncomfortable with the idea of adding an 
extra doc - some use cases that become troublesome for any application 
logic are:
1) IndexReader.numDocs/IndexReader.maxDoc will give "incorrect" values
2) Any queries of the type "all documents *without* a value for field X 
return the commit.userdata document.

I was toying with the idea of maintaining my own commit.userdata file 
which I would manage in my framework when calling IndexWriter.commit but 
this does not feel as clean as Lucene core code holding the user data in 
the segments file.

Cheers
Mark


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 05 20:30:38 2008
Return-Path: <java-user-return-35965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32338 invoked from network); 5 Sep 2008 20:30:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2008 20:30:38 -0000
Received: (qmail 95264 invoked by uid 500); 5 Sep 2008 20:30:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95235 invoked by uid 500); 5 Sep 2008 20:30:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95224 invoked by uid 99); 5 Sep 2008 20:30:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 13:30:29 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of raymond.balmes@gmail.com designates 209.85.134.186 as permitted sender)
Received: from [209.85.134.186] (HELO mu-out-0910.google.com) (209.85.134.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 20:29:31 +0000
Received: by mu-out-0910.google.com with SMTP id i10so460008mue.5
        for <java-user@lucene.apache.org>; Fri, 05 Sep 2008 13:29:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=BIMP+MtS7kQvS0MQXS6dAY63mfLwZhxErnmD0hhFF+M=;
        b=enx01oVCBYNjt3IsXkbY9B5/VJ7kw0cTO7anr6gebD0Ydo7fMvhtN6cvl+UxDJqDqD
         ux2QhXCTAoxrOVCr6S7RSZmkl5JGhVcN60TaVA0eV8gMAj9MMZxNzH9ekDh3ppjMTC4v
         jmMZZ+NmxdNTdnk2Lzx2K5xjtpEnjW8o6llR4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=co+RqP6oS9hqiGEoASXHy6gLkCyLbi/Km33+yAAeLkZ6+3PSWpZoFVhwd47da0q46e
         xI+V981gCsn5ZQ6ZK/u5r4rODJEw3WjuTy/7VGcmkk8TNAAAKTlyDnzOiBsYE+NlYR1O
         yEHtO1/qOUGcFexL8VKOETstPbSiDx0HvJJxw=
Received: by 10.103.214.13 with SMTP id r13mr8263239muq.4.1220646582559;
        Fri, 05 Sep 2008 13:29:42 -0700 (PDT)
Received: by 10.103.214.9 with HTTP; Fri, 5 Sep 2008 13:29:42 -0700 (PDT)
Message-ID: <4014d98b0809051329w55f06384k4e5f5eb6b2722f3f@mail.gmail.com>
Date: Fri, 5 Sep 2008 22:29:42 +0200
From: "=?ISO-8859-1?Q?Raymond_Balm=E8s?=" <raymond.balmes@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Beginner: Specific indexing
In-Reply-To: <Pine.LNX.4.62.0809051037410.12113@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_40763_14091140.1220646582544"
References: <4014d98b0808301202k46a05677l3bb5fd6e8c9b124@mail.gmail.com>
	 <Pine.LNX.4.62.0809021041280.5494@radix.cryptio.net>
	 <4014d98b0809021250j7a774a82xf2974a026d36a8e7@mail.gmail.com>
	 <Pine.LNX.4.62.0809042143540.5350@radix.cryptio.net>
	 <4014d98b0809050552u6a5966d8jbd175c0709d4a1c@mail.gmail.com>
	 <Pine.LNX.4.62.0809051037410.12113@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_40763_14091140.1220646582544
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I think I'm getting you. But the files I'm  going to parse have many formats
: PDF, HTML, Word.
they don't have a particular structure, memos if you will. But the ones I'm
interested in will have the triplets I described

Yes building a TokenFilter as you suggest should do the job.
I guess my initial idea was to use lucene to give me the Token stream so I
can run this specific filter on them.
But I want to do two contradictory things on the same token stream
+ low-band filter which only will gives the "triplets" (actually I do want
to add synonyms to the keywords too, you  are bringing up a good point, but
I could handle it in the query maybe)
+ high-band filter which indexes the text as normal/general text
(StarndarAnalyzer from lucene)

I just have to pass the token stream twice.
Thx a lot, for helping me to clarify my ideas.


On Fri, Sep 5, 2008 at 7:46 PM, Chris Hostetter <hossman_lucene@fucit.org>wrote:

>
> : Interesting if you are not going to use an analyser... what then ? I'm
> : thinking of using javacc, because I oversimplified somewhat the 3 field
> : string structure, so I need a kind of small grammar for that.
>
> Well, the specifics of "what else" is in your files is going to be the
> biggest factor in deciding how to find the bits of info you need.
>
> Let me try to put in perspective for you how your question sounded to me,
> as someone unfamiliar with your specific problem.  the question sounded
> equivilent to if someone had asked;
>
>
> "I have a bunch of XML files, some of these XML files contain syntax that
> loks like this...
>   <property name="${keyword}" min="${x}" max="${y}" />
> where ${x} and ${y} are small numbers, and ${keyword} is from a fixed list
> of words.  My idea is to simply build a TokenFilter that will look for
> those... do I have it right ?"
>
> ...and i would say: "Not really.  Use an XML parser to parse your XML and
> extract your structured data, then add them to your Lucene Document."
>
> You're files may not be XML, but the basic premise is the same; use
> whatever code makes the most sense to parse whatever file format you are
> dealing with given what you know aboutthe files (not just the parts you
> want, but the other parts as well)
>
>
> Where an Analyzer might make sense is if you want to do processing on
> those bits of data after you find them ... stemming your keywords, or
> mapping them to synonyms, etc...
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_40763_14091140.1220646582544--

From java-user-return-35966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 05 22:45:09 2008
Return-Path: <java-user-return-35966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94508 invoked from network); 5 Sep 2008 22:45:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2008 22:45:09 -0000
Received: (qmail 43912 invoked by uid 500); 5 Sep 2008 22:44:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43882 invoked by uid 500); 5 Sep 2008 22:44:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43871 invoked by uid 99); 5 Sep 2008 22:44:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 15:44:59 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ravish.web@gmail.com designates 72.14.204.235 as permitted sender)
Received: from [72.14.204.235] (HELO qb-out-0506.google.com) (72.14.204.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 22:44:01 +0000
Received: by qb-out-0506.google.com with SMTP id e6so1033050qbe.27
        for <java-user@lucene.apache.org>; Fri, 05 Sep 2008 15:44:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=I8hZUghIafnJlEfaxiv9jPHFvKPyfSGcxbsPLWc7bqY=;
        b=bWUkKdWc76NFeuZBfNn1nxAhBsVqOoDpf68esf9yLa9O2Vg6zOIO+wI/O92N0zk0Dp
         MIoeVhfw212OdfGFepPpIdawhIsEEwHmcicY/UxuzNuya6Y89GJ8DdZ6rAB3/MyCw0Q3
         vmqMmwAt2fZKFDpiQ3bCdGrnV1EV7n6sC0TAs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=mur7rzLFMoAyDMggZcwCDW/q1bTsHFeCpzPQVj1e+CeUe+8iPgmqV4W8NDIXSHbTLj
         hQtmkVp1DR2rO24xSGadVPIrHKGn6hxOGEzk70/VILJWzZWLYpnKwnTm5Rq8zU3nN9LF
         4WxyDe6mNxcOfYU1xVoCs90YGpv+KjdyUiLqA=
Received: by 10.180.241.3 with SMTP id o3mr9611824bkh.29.1220654670830;
        Fri, 05 Sep 2008 15:44:30 -0700 (PDT)
Received: by 10.181.6.6 with HTTP; Fri, 5 Sep 2008 15:44:30 -0700 (PDT)
Message-ID: <d0d0398e0809051544r4bd183bbu5444247845b86e7f@mail.gmail.com>
Date: Fri, 5 Sep 2008 15:44:30 -0700
From: "Ravindra Sharma" <ravish.web@gmail.com>
To: java-user@lucene.apache.org
Subject: Somewhat complex scoring/boosting
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_44133_2134493.1220654670836"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_44133_2134493.1220654670836
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Folks,

I have somewhat complex scoring/boosting requirement.

Say I have 3 text fields A, B, C and a Numeric field called D.
Say My query is "testrank".

Scoring should be based on following:

Query matches
1. text fields A, B and C, & Highest value of D (highest boost/rank)
2. A and B, & Highest value of D (2nd highest)
3. A and C, & Highest value of D (3rd highest)
4. B and C, & Highest value of D (4th highest)
5. B, & Highest value of D (5th highest)
6. C, & Highest value of D (6th highest)

i). If I use the standard query, it will be query (with boost) something
like this:

query = (A:testrank AND B:testrank AND C:testrank)^10 OR (A:testrank AND
B:testrank)^9 OR (A:testrank AND C:testrank)^8 OR (B:testrank AND
C:testrank)^7 OR (A:testrank)^6 OR (B:testrank)^5 OR (C:testrank)^4
sort = by Score (primary), Field D (Secondary)

Also, I do need to override Similarity such that tf, idf etc doesn't
interfere; and all docs should score purely based on boost values, I have
specified. That way seconday sort can be effective.

This will be a poor query so I would like to avoid it.

ii). I have never used DisjunctionMaxQuery (or Solr qt=DisMax) and at first
glance, it appeared just like what I need (with tiebreaker = 0). However it
is not. If I understand it correctly #1, #2 and #3 will score equally
because it just score based on highest boost (which is A for #1, #2 and #3).

This will not work.

iii) Wondering, Do I have to write a custom Query (custom score) like
DisjunctionMaxQuery which scores based on sum of matching fields instead of
just taking highest. Wondering, if I could override the scoring of
DisjustionMaxQuery such that it takes sum of scores from sub-queries.

If anyone has any clever suggestion, I will really really appreciate.

Thanks,
Ravi

P.S. - Posted the same question on solr-user as well.

------=_Part_44133_2134493.1220654670836--

From java-user-return-35967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 06 00:00:09 2008
Return-Path: <java-user-return-35967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33081 invoked from network); 6 Sep 2008 00:00:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Sep 2008 00:00:09 -0000
Received: (qmail 98958 invoked by uid 500); 6 Sep 2008 00:00:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98928 invoked by uid 500); 6 Sep 2008 00:00:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98917 invoked by uid 99); 6 Sep 2008 00:00:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 17:00:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ravish.web@gmail.com designates 72.14.204.239 as permitted sender)
Received: from [72.14.204.239] (HELO qb-out-0506.google.com) (72.14.204.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 23:59:02 +0000
Received: by qb-out-0506.google.com with SMTP id e6so1067287qbe.27
        for <java-user@lucene.apache.org>; Fri, 05 Sep 2008 16:59:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=j37z+CUpRCteSS1C5tCj4ijebKLmeFhTOlXtmchpoJM=;
        b=MD+t/Xa+PvhNpPbvbkKKOfHHu2OinbPSm60sBafEgQGzoGOPUlogOAXAOLa5VvcDrf
         aLXr2A/S7sj7OatGTwwcRFYnVN8pkx1dAxPdmWPelGb+/XjDGgksglqqp19n2UuoeUZy
         1OhGIQ47Bl16kQYquoM5dAn4d0kQFScZOCD0c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=oTGAASzd2hoeBNYf0IocJf2g/JyAnBYk8YdYrWd7A72sfaaFqODtDs2bUEY6P+IEs3
         PTJ8wAapd7ubi7uZGCbWkz8Mt6r7va43Wn9LtleK4kz90l+HotCssV2lxo+fkNMYW25f
         ysJP1TqlA91IZgELvGmF0KzYLz2AfJvSNQUCg=
Received: by 10.180.236.14 with SMTP id j14mr9619916bkh.36.1220659172802;
        Fri, 05 Sep 2008 16:59:32 -0700 (PDT)
Received: by 10.181.6.6 with HTTP; Fri, 5 Sep 2008 16:59:32 -0700 (PDT)
Message-ID: <d0d0398e0809051659l1b4f4b9cx7df533841806cee@mail.gmail.com>
Date: Fri, 5 Sep 2008 16:59:32 -0700
From: "Ravindra Sharma" <ravish.web@gmail.com>
To: java-user@lucene.apache.org
Subject: Custom scoring example ...
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_44670_1986881.1220659172805"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_44670_1986881.1220659172805
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I am looking for an example if anyone has done any custom scoring with
Lucene.

I need to implement a Query similar to DisjunctionMaxQuery, the only
difference would
be it should score based on sum of score of sub queries' scores instead of
max.

Any custom scoring example will help.

(On one hand, DisjunctionMaxQuery itself is an example :-). It is too
professional :-)

Thanks,
Ravi

------=_Part_44670_1986881.1220659172805--

From java-user-return-35968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 06 01:09:35 2008
Return-Path: <java-user-return-35968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88859 invoked from network); 6 Sep 2008 01:09:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Sep 2008 01:09:35 -0000
Received: (qmail 43921 invoked by uid 500); 6 Sep 2008 01:09:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43887 invoked by uid 500); 6 Sep 2008 01:09:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43876 invoked by uid 99); 6 Sep 2008 01:09:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 18:09:25 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.125.208] (HELO n10.bullet.mail.mud.yahoo.com) (209.191.125.208)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 06 Sep 2008 01:08:25 +0000
Received: from [68.142.200.221] by n10.bullet.mail.mud.yahoo.com with NNFMP; 06 Sep 2008 01:07:36 -0000
Received: from [68.142.201.65] by t9.bullet.mud.yahoo.com with NNFMP; 06 Sep 2008 01:07:36 -0000
Received: from [127.0.0.1] by omp417.mail.mud.yahoo.com with NNFMP; 06 Sep 2008 01:07:36 -0000
X-Yahoo-Newman-Id: 740933.28887.bm@omp417.mail.mud.yahoo.com
Received: (qmail 279 invoked from network); 6 Sep 2008 01:07:36 -0000
Received: from unknown (HELO ?192.168.1.100?) (nhira@cognocys.com@75.168.29.95 with plain)
  by smtp117.plus.mail.mud.yahoo.com with SMTP; 6 Sep 2008 01:07:36 -0000
X-YMail-OSG: eE.6I.4VM1lHvLMXNZBqm7lBa1Gfa.39D.XbS_LmuVtrUgiJgg8c0P9T_6t7k.Mm874w2pzTr9relfvlzp2kDD_ufSgBYa2TckRPa4bg2p0JaY08hRGgKCukcvixKR99v4HaHyq1S._isS6ydPaCGKP0
X-Yahoo-Newman-Property: ymail-3
Mime-Version: 1.0 (Apple Message framework v753.1)
In-Reply-To: <19333985.post@talk.nabble.com>
References: <19276999.post@talk.nabble.com> <a823853a0809021812r4e8c3972g32531c311af21609@mail.gmail.com> <19294053.post@talk.nabble.com> <a823853a0809031804q38058d0ekcedc5f5d45f04307@mail.gmail.com> <19333985.post@talk.nabble.com>
Content-Type: text/plain; charset=UTF-8; delsp=yes; format=flowed
Message-Id: <A986124C-C3A9-4362-952B-8010FE8D248B@cognocys.com>
Content-Transfer-Encoding: quoted-printable
From: "N. Hira" <nhira@cognocys.com>
Subject: Re: Lucene Memory Leak
Date: Fri, 5 Sep 2008 20:07:34 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753.1)
X-Virus-Checked: Checked by ClamAV on apache.org

I'm not an expert, so please take this with a grain of salt, but if =20
you return the Hits object, you are inadvertently "holding on" to =20
that IndexSearcher, right?

According to the FAQ (http://wiki.apache.org/lucene-java/=20
ImproveSearchingSpeed), iterating over all Hits will result in =20
additional queries.  Further, I don't think that you should call =20
Directory.close() because it doesn't really do anything if the =20
Searcher is still out there ...

If I was in your place, I would try to iterate over the first N =20
(100?) results and return the results back to the caller in some =20
wrapper object, leaving the Searcher and the Directory open, at least =20=

for a test.

If you really need to go against the recommended best practice and =20
close the IndexSearcher, then I would strongly suggest some kind of =20
scheduler that closes, re-opens, and warms up IndexSearchers on some =20
kind of timer.

Good luck!

-h
----------------------------------------------------------------------
Hira, N.R.
Cognocys, Inc.
(773) 251-7453


On 05-Sep-2008, at 10:43 AM, Andy33 wrote:

>
> If I don't keep the IndexSearcher as a Singleton and instead open =20
> and close a
> new one each time, I have a large memory leak (probably due to the =20
> large
> queries I am doing). After watching the memory a while, I still =20
> believe I
> have a small memory leak even when the Directory, Analyzer, and
> IndexSearcher are Singletons. My free memory slowly becomes smaller =20=

> after
> each query. Any ideas on what that may be due to?
>
> Here's my updated code...
>
> private synchronized Hits doQuery(String field, String queryStr, Sort
> sortOrder, String indexDirectory) throws Exception
>     {
> 	Directory directory =3D null;
> 	Query query =3D null;
> 	QueryParser parser =3D null;
> =09
> 	try
> 	{
> 	    directory =3D =
DirectorySingleton.getInstance(indexDirectory);
> 	    ivIndexSearcher =3D (IndexSearcher)
> SearcherSingleton.getInstance(directory);
> =09
> 	    //search the index
> 	    parser =3D new QueryParser(field, =
AnalyzerSingleton.getInstance());
> 	    query =3D parser.parse(queryStr);
> =09
> 	    return ivIndexSearcher.search(query, sortOrder);
> 	}
> 	finally
> 	{=09
> 	    if(null !=3D directory)
> 	    {
> 		directory.close();
> 	    }
> =09
> 	    directory =3D null;
> 	    parser =3D null;
> 	    query =3D null;
> 	}
>     }
>
>
> --------------
> Example Singleton
>
> public class SearcherSingleton
> {
>     private static volatile HashMap<Directory, Searcher> cvSearches =20=

> =3D new
> HashMap<Directory, Searcher>();
>
>
>     protected SearcherSingleton()
>     {
> =09
>     }
>
>
>     public static Searcher getInstance(Directory directory) throws
> IOException
>     {
> 	if(!cvSearches.containsKey(directory))
> 	{
> 	    synchronized(SearcherSingleton.class)
> 	    {
> 		if(!cvSearches.containsKey(directory))
> 		{
> 		    cvSearches.put(directory, new =
IndexSearcher(directory));
> 		}
> 	    }
> 	}
> =09
> 	return cvSearches.get(directory);
>     }
>
> }
>
>
>
> =EC=9E=A5=EC=9A=A9=EC=84=9D wrote:
>>
>> In fact, I think that the important reasons are Directory class and
>> Analyzer
>> class.
>> If you don't want IndexSearcher class keep open for the entire =20
>> life of a
>> web
>> application, you can do it.
>> I think It will not cause memory leak problem.
>> But, Directory and Analyzer classes can cause the problem if they new
>> created by method call every time. I think...
>> Only keep two classes Directory and Analyzer by singlton and do =20
>> test. :)
>>
>>
>





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 06 01:59:27 2008
Return-Path: <java-user-return-35969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35574 invoked from network); 6 Sep 2008 01:59:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Sep 2008 01:59:27 -0000
Received: (qmail 65180 invoked by uid 500); 6 Sep 2008 01:59:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65133 invoked by uid 500); 6 Sep 2008 01:59:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65122 invoked by uid 99); 6 Sep 2008 01:59:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Sep 2008 18:59:18 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yeshuangming@gmail.com designates 209.85.217.30 as permitted sender)
Received: from [209.85.217.30] (HELO mail-gx0-f30.google.com) (209.85.217.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Sep 2008 01:58:20 +0000
Received: by gxk11 with SMTP id 11so597096gxk.5
        for <java-user@lucene.apache.org>; Fri, 05 Sep 2008 18:57:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=x6Jyi2YHy+3MtalOQPWsU9ZkSvgVHZiBgBkzlP0f3fk=;
        b=TaQ95qvTX1JMPaF3asZK/Pjw7jmp5Zs3DbRYWcf1jLSpIpFJ54jwqMchIATI+4tQDB
         S/C2ufmY/WvdIMFZRm/lMn8tJAh5meia4Uu64E6NQaIpBTUASiclQlDobsMJfxU5mgHS
         31F02KzsVXF4cadW4Dpbm5ie6jzCC1IpPlMqk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=jTGOJJ3PfHzIpbLfLcZQiZq3Cgi/vWZF8IDhUU276kceQMrnuNqG8NHU6xxaTiP/iS
         iLBMV8RZSxBkvbYv3Py1g9naowHOn7ajIvKEtiJk/zBzX6fC5lq11pxzcMbZjTbobSE6
         uCEQjLj7tKJOB1gVKcelBNhDM27qIGoMl4+oU=
Received: by 10.151.113.11 with SMTP id q11mr17406613ybm.249.1220666270500;
        Fri, 05 Sep 2008 18:57:50 -0700 (PDT)
Received: by 10.151.84.5 with HTTP; Fri, 5 Sep 2008 18:57:50 -0700 (PDT)
Message-ID: <9233ccac0809051857r1dbace13s717a1006001cd87c@mail.gmail.com>
Date: Sat, 6 Sep 2008 09:57:50 +0800
From: "=?GB2312?B?0rbLq8P3?=" <yeshuangming@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Memory Leak
In-Reply-To: <A986124C-C3A9-4362-952B-8010FE8D248B@cognocys.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_48328_23627041.1220666270504"
References: <19276999.post@talk.nabble.com>
	 <a823853a0809021812r4e8c3972g32531c311af21609@mail.gmail.com>
	 <19294053.post@talk.nabble.com>
	 <a823853a0809031804q38058d0ekcedc5f5d45f04307@mail.gmail.com>
	 <19333985.post@talk.nabble.com>
	 <A986124C-C3A9-4362-952B-8010FE8D248B@cognocys.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_48328_23627041.1220666270504
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: base64
Content-Disposition: inline

SW4gbXkgb3BpbmlvbiwgZG8gbm8gbmVlZCB0byBjbG9zZSB0aGUgRGlyZWN0b3J5LCBhbmQga2Vl
cCBhbGwgRGlyZWN0b3J5IGFuZAphbGwgSW5kZXhTZWFyY2hlciBvcGVuLgoKcmV0dXJuIGl2SW5k
ZXhTZWFyY2hlci5zZWFyY2gocXVlcnksIHNvcnRPcmRlcik7ICAoIEkgdGhpbmspIGlzIGFsc28g
cmV0dXJuCnRoZSBoaXRzIGdldHRlZCBmcm1vIEluZGV4U2VhcmNoZXIsIHNvIGl0IGlzIGl0ZXJh
dGUgb3ZlciB0aGUgZmlyc3QgTiwgbm8KcHJvYmxlbS4KCkluIGFkZGl0aW9uLCBob3cgbXVjaCBp
bmRleCBEaXJlY3RvcnkgZG8geW91IGhhdmU/ICBpcyB0aGVyZSBhIGxhcmdlIG51bWJlcgpvZiBk
YXRhIGluIG9uZSBEb2N1bWVudD8KCjIwMDgvOS82LCBOLiBIaXJhIDxuaGlyYUBjb2dub2N5cy5j
b20+Ogo+Cj4gSSdtIG5vdCBhbiBleHBlcnQsIHNvIHBsZWFzZSB0YWtlIHRoaXMgd2l0aCBhIGdy
YWluIG9mIHNhbHQsIGJ1dCBpZiB5b3UKPiByZXR1cm4gdGhlIEhpdHMgb2JqZWN0LCB5b3UgYXJl
IGluYWR2ZXJ0ZW50bHkgImhvbGRpbmcgb24iIHRvIHRoYXQKPiBJbmRleFNlYXJjaGVyLCByaWdo
dD8KPgo+IEFjY29yZGluZyB0byB0aGUgRkFRIChodHRwOi8vd2lraS5hcGFjaGUub3JnL2x1Y2Vu
ZS1qYXZhL0ltcHJvdmVTZWFyY2hpbmdTcGVlZCksCj4gaXRlcmF0aW5nIG92ZXIgYWxsIEhpdHMg
d2lsbCByZXN1bHQgaW4gYWRkaXRpb25hbCBxdWVyaWVzLiAgRnVydGhlciwgSSBkb24ndAo+IHRo
aW5rIHRoYXQgeW91IHNob3VsZCBjYWxsIERpcmVjdG9yeS5jbG9zZSgpIGJlY2F1c2UgaXQgZG9l
c24ndCByZWFsbHkgZG8KPiBhbnl0aGluZyBpZiB0aGUgU2VhcmNoZXIgaXMgc3RpbGwgb3V0IHRo
ZXJlIC4uLgo+Cj4gSWYgSSB3YXMgaW4geW91ciBwbGFjZSwgSSB3b3VsZCB0cnkgdG8gaXRlcmF0
ZSBvdmVyIHRoZSBmaXJzdCBOICgxMDA/KQo+IHJlc3VsdHMgYW5kIHJldHVybiB0aGUgcmVzdWx0
cyBiYWNrIHRvIHRoZSBjYWxsZXIgaW4gc29tZSB3cmFwcGVyIG9iamVjdCwKPiBsZWF2aW5nIHRo
ZSBTZWFyY2hlciBhbmQgdGhlIERpcmVjdG9yeSBvcGVuLCBhdCBsZWFzdCBmb3IgYSB0ZXN0Lgo+
Cj4gSWYgeW91IHJlYWxseSBuZWVkIHRvIGdvIGFnYWluc3QgdGhlIHJlY29tbWVuZGVkIGJlc3Qg
cHJhY3RpY2UgYW5kIGNsb3NlCj4gdGhlIEluZGV4U2VhcmNoZXIsIHRoZW4gSSB3b3VsZCBzdHJv
bmdseSBzdWdnZXN0IHNvbWUga2luZCBvZiBzY2hlZHVsZXIgdGhhdAo+IGNsb3NlcywgcmUtb3Bl
bnMsIGFuZCB3YXJtcyB1cCBJbmRleFNlYXJjaGVycyBvbiBzb21lIGtpbmQgb2YgdGltZXIuCj4K
PiBHb29kIGx1Y2shCj4KPiAtaAo+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiBIaXJhLCBOLlIuCj4gQ29nbm9j
eXMsIEluYy4KPiAoNzczKSAyNTEtNzQ1Mwo+Cj4KPiBPbiAwNS1TZXAtMjAwOCwgYXQgMTA6NDMg
QU0sIEFuZHkzMyB3cm90ZToKPgo+Cj4+IElmIEkgZG9uJ3Qga2VlcCB0aGUgSW5kZXhTZWFyY2hl
ciBhcyBhIFNpbmdsZXRvbiBhbmQgaW5zdGVhZCBvcGVuIGFuZAo+PiBjbG9zZSBhCj4+IG5ldyBv
bmUgZWFjaCB0aW1lLCBJIGhhdmUgYSBsYXJnZSBtZW1vcnkgbGVhayAocHJvYmFibHkgZHVlIHRv
IHRoZSBsYXJnZQo+PiBxdWVyaWVzIEkgYW0gZG9pbmcpLiBBZnRlciB3YXRjaGluZyB0aGUgbWVt
b3J5IGEgd2hpbGUsIEkgc3RpbGwgYmVsaWV2ZSBJCj4+IGhhdmUgYSBzbWFsbCBtZW1vcnkgbGVh
ayBldmVuIHdoZW4gdGhlIERpcmVjdG9yeSwgQW5hbHl6ZXIsIGFuZAo+PiBJbmRleFNlYXJjaGVy
IGFyZSBTaW5nbGV0b25zLiBNeSBmcmVlIG1lbW9yeSBzbG93bHkgYmVjb21lcyBzbWFsbGVyIGFm
dGVyCj4+IGVhY2ggcXVlcnkuIEFueSBpZGVhcyBvbiB3aGF0IHRoYXQgbWF5IGJlIGR1ZSB0bz8K
Pj4KPj4gSGVyZSdzIG15IHVwZGF0ZWQgY29kZS4uLgo+Pgo+PiBwcml2YXRlIHN5bmNocm9uaXpl
ZCBIaXRzIGRvUXVlcnkoU3RyaW5nIGZpZWxkLCBTdHJpbmcgcXVlcnlTdHIsIFNvcnQKPj4gc29y
dE9yZGVyLCBTdHJpbmcgaW5kZXhEaXJlY3RvcnkpIHRocm93cyBFeGNlcHRpb24KPj4gICAgewo+
PiAgICAgICAgRGlyZWN0b3J5IGRpcmVjdG9yeSA9IG51bGw7Cj4+ICAgICAgICBRdWVyeSBxdWVy
eSA9IG51bGw7Cj4+ICAgICAgICBRdWVyeVBhcnNlciBwYXJzZXIgPSBudWxsOwo+Pgo+PiAgICAg
ICAgdHJ5Cj4+ICAgICAgICB7Cj4+ICAgICAgICAgICAgZGlyZWN0b3J5ID0gRGlyZWN0b3J5U2lu
Z2xldG9uLmdldEluc3RhbmNlKGluZGV4RGlyZWN0b3J5KTsKPj4gICAgICAgICAgICBpdkluZGV4
U2VhcmNoZXIgPSAoSW5kZXhTZWFyY2hlcikKPj4gU2VhcmNoZXJTaW5nbGV0b24uZ2V0SW5zdGFu
Y2UoZGlyZWN0b3J5KTsKPj4KPj4gICAgICAgICAgICAvL3NlYXJjaCB0aGUgaW5kZXgKPj4gICAg
ICAgICAgICBwYXJzZXIgPSBuZXcgUXVlcnlQYXJzZXIoZmllbGQsCj4+IEFuYWx5emVyU2luZ2xl
dG9uLmdldEluc3RhbmNlKCkpOwo+PiAgICAgICAgICAgIHF1ZXJ5ID0gcGFyc2VyLnBhcnNlKHF1
ZXJ5U3RyKTsKPj4KPj4gICAgICAgICAgICByZXR1cm4gaXZJbmRleFNlYXJjaGVyLnNlYXJjaChx
dWVyeSwgc29ydE9yZGVyKTsKPj4gICAgICAgIH0KPj4gICAgICAgIGZpbmFsbHkKPj4gICAgICAg
IHsKPj4gICAgICAgICAgICBpZihudWxsICE9IGRpcmVjdG9yeSkKPj4gICAgICAgICAgICB7Cj4+
ICAgICAgICAgICAgICAgIGRpcmVjdG9yeS5jbG9zZSgpOwo+PiAgICAgICAgICAgIH0KPj4KPj4g
ICAgICAgICAgICBkaXJlY3RvcnkgPSBudWxsOwo+PiAgICAgICAgICAgIHBhcnNlciA9IG51bGw7
Cj4+ICAgICAgICAgICAgcXVlcnkgPSBudWxsOwo+PiAgICAgICAgfQo+PiAgICB9Cj4+Cj4+Cj4+
IC0tLS0tLS0tLS0tLS0tCj4+IEV4YW1wbGUgU2luZ2xldG9uCj4+Cj4+IHB1YmxpYyBjbGFzcyBT
ZWFyY2hlclNpbmdsZXRvbgo+PiB7Cj4+ICAgIHByaXZhdGUgc3RhdGljIHZvbGF0aWxlIEhhc2hN
YXA8RGlyZWN0b3J5LCBTZWFyY2hlcj4gY3ZTZWFyY2hlcyA9IG5ldwo+PiBIYXNoTWFwPERpcmVj
dG9yeSwgU2VhcmNoZXI+KCk7Cj4+Cj4+Cj4+ICAgIHByb3RlY3RlZCBTZWFyY2hlclNpbmdsZXRv
bigpCj4+ICAgIHsKPj4KPj4gICAgfQo+Pgo+Pgo+PiAgICBwdWJsaWMgc3RhdGljIFNlYXJjaGVy
IGdldEluc3RhbmNlKERpcmVjdG9yeSBkaXJlY3RvcnkpIHRocm93cwo+PiBJT0V4Y2VwdGlvbgo+
PiAgICB7Cj4+ICAgICAgICBpZighY3ZTZWFyY2hlcy5jb250YWluc0tleShkaXJlY3RvcnkpKQo+
PiAgICAgICAgewo+PiAgICAgICAgICAgIHN5bmNocm9uaXplZChTZWFyY2hlclNpbmdsZXRvbi5j
bGFzcykKPj4gICAgICAgICAgICB7Cj4+ICAgICAgICAgICAgICAgIGlmKCFjdlNlYXJjaGVzLmNv
bnRhaW5zS2V5KGRpcmVjdG9yeSkpCj4+ICAgICAgICAgICAgICAgIHsKPj4gICAgICAgICAgICAg
ICAgICAgIGN2U2VhcmNoZXMucHV0KGRpcmVjdG9yeSwgbmV3Cj4+IEluZGV4U2VhcmNoZXIoZGly
ZWN0b3J5KSk7Cj4+ICAgICAgICAgICAgICAgIH0KPj4gICAgICAgICAgICB9Cj4+ICAgICAgICB9
Cj4+Cj4+ICAgICAgICByZXR1cm4gY3ZTZWFyY2hlcy5nZXQoZGlyZWN0b3J5KTsKPj4gICAgfQo+
Pgo+PiB9Cj4+Cj4+Cj4+Cj4+IMDlv+u8riB3cm90ZToKPj4KPj4+Cj4+PiBJbiBmYWN0LCBJIHRo
aW5rIHRoYXQgdGhlIGltcG9ydGFudCByZWFzb25zIGFyZSBEaXJlY3RvcnkgY2xhc3MgYW5kCj4+
PiBBbmFseXplcgo+Pj4gY2xhc3MuCj4+PiBJZiB5b3UgZG9uJ3Qgd2FudCBJbmRleFNlYXJjaGVy
IGNsYXNzIGtlZXAgb3BlbiBmb3IgdGhlIGVudGlyZSBsaWZlIG9mIGEKPj4+IHdlYgo+Pj4gYXBw
bGljYXRpb24sIHlvdSBjYW4gZG8gaXQuCj4+PiBJIHRoaW5rIEl0IHdpbGwgbm90IGNhdXNlIG1l
bW9yeSBsZWFrIHByb2JsZW0uCj4+PiBCdXQsIERpcmVjdG9yeSBhbmQgQW5hbHl6ZXIgY2xhc3Nl
cyBjYW4gY2F1c2UgdGhlIHByb2JsZW0gaWYgdGhleSBuZXcKPj4+IGNyZWF0ZWQgYnkgbWV0aG9k
IGNhbGwgZXZlcnkgdGltZS4gSSB0aGluay4uLgo+Pj4gT25seSBrZWVwIHR3byBjbGFzc2VzIERp
cmVjdG9yeSBhbmQgQW5hbHl6ZXIgYnkgc2luZ2x0b24gYW5kIGRvIHRlc3QuIDopCj4+Pgo+Pj4K
Pj4+Cj4+Cj4KPgo+Cj4KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBq
YXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPiBGb3IgYWRkaXRpb25hbCBj
b21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+Cj4K
------=_Part_48328_23627041.1220666270504--

From java-user-return-35970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 06 09:21:27 2008
Return-Path: <java-user-return-35970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7703 invoked from network); 6 Sep 2008 09:21:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Sep 2008 09:21:24 -0000
Received: (qmail 73524 invoked by uid 500); 6 Sep 2008 09:21:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73485 invoked by uid 500); 6 Sep 2008 09:21:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73474 invoked by uid 99); 6 Sep 2008 09:21:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Sep 2008 02:21:15 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of beerbal@gmail.com designates 209.85.200.171 as permitted sender)
Received: from [209.85.200.171] (HELO wf-out-1314.google.com) (209.85.200.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Sep 2008 09:20:17 +0000
Received: by wf-out-1314.google.com with SMTP id 28so937128wfc.20
        for <java-user@lucene.apache.org>; Sat, 06 Sep 2008 02:20:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=iSyMqvDjJk5LyWV5wOVoMK56H6CbxQgQ9p+183VkSRo=;
        b=xvEON1Ta6z5P0+2wfmmeulxXqhWa7K+tvaADkehgb+wUToeQnXVPmBE2fejHiDyZGp
         Fyl6bz7UUBqlrU8ob7RrXzbuXLsEVOmM47WzIZsYzf6V1ZFExJtUX1vvw9NTDrRDTe6V
         MNoLe6VDrj5IhFsTsocqw+zrjl51Sry7D42ko=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=hbUNe4TuMPat28uBAoyLEA5kGjihSe+urpJOg2Ijoy/3c2x2HNxhqsWx7Ybh9EdCEL
         c2uHj9wApRLp/uElgep1XIwlDkuKzZygbMFS9GChqQe0KQibCNWtxl82uVV66IWkNGoT
         2WsyE3JB0CkzySjOmYy2S2+ril5rKlhKN9r38=
Received: by 10.142.210.4 with SMTP id i4mr4411790wfg.240.1220692839433;
        Sat, 06 Sep 2008 02:20:39 -0700 (PDT)
Received: by 10.142.162.7 with HTTP; Sat, 6 Sep 2008 02:20:39 -0700 (PDT)
Message-ID: <aa12778e0809060220i585866dai40b6126e1e65053e@mail.gmail.com>
Date: Sat, 6 Sep 2008 14:50:39 +0530
From: beerbal@gmail.com
To: java-user@lucene.apache.org
Subject: Help in searching mutliple indices
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_65229_22941633.1220692839448"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_65229_22941633.1220692839448
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

I am a newbie user of Lucene Java. I am trying to use Lucene to enable in
search in my application. I am stuck a little in actual Search. I'm facing a
design issue and want help from experts here.

Here is my scenario:
* I have 7-8 tables in the database and I create a separate index for each
table. Index is created in the filesystem. (The fact that there is one index
per table is not under my control and I have to use that as an input)
* Fields in the indices may or may not be the same
* When I search I need to search in all indices

I tried looking at MultiSearcher. But, since the fields in indices are not
the same, I can't make use of one query and give it to the multi searcher. I
need to construct a separate MultiFieldQueryParser for each of my searchers.

If I create an array of searchers myself and call 'search' method on each of
them, I am left with having to merge the results properly (based on score).
But in this case, since the results from each searcher is normalized for
search in that index, merging is not a stright-forward operation and I'll
have to rely on some sort of a HitCollector since I need raw scores which'll
help me in merging the results.

Have people hit this problem before? Is there any other approach I can take?
Any pointers will greatly help me.

Thanks a lot for your time,
Beerbal

------=_Part_65229_22941633.1220692839448--

From java-user-return-35971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 06 09:53:42 2008
Return-Path: <java-user-return-35971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18071 invoked from network); 6 Sep 2008 09:53:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Sep 2008 09:53:42 -0000
Received: (qmail 90414 invoked by uid 500); 6 Sep 2008 09:53:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90392 invoked by uid 500); 6 Sep 2008 09:53:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90381 invoked by uid 99); 6 Sep 2008 09:53:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Sep 2008 02:53:33 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of beerbal@gmail.com designates 209.85.200.168 as permitted sender)
Received: from [209.85.200.168] (HELO wf-out-1314.google.com) (209.85.200.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Sep 2008 09:52:36 +0000
Received: by wf-out-1314.google.com with SMTP id 28so947184wfc.20
        for <java-user@lucene.apache.org>; Sat, 06 Sep 2008 02:53:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=3gzCu9XuaG/hcOv7/KpZTou6JdQ61bxD7fJ9Xmah4g8=;
        b=vzMuv3y7YlW6MGdJHNPvdyVY2iZRJ8dk57UOogtbu/wIM6rcw3GKPShE+bge9G3jMM
         jtMnZroCHJfgzoyM1v+RveqIFfR8LhbtoV1/qXtZIzJzouM29xVAs12Jmr886W5VAZHK
         U76ei24k93Q6F3LWxnpoMyu1S8uEsPJxL1HrM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=nNv4QInkiKKvBswHO+TzBg6fZtet7BcwdO5s7+R+NqYn1LstZqqARuiIEntK92MJLf
         2eM37Mj+SNtbEUeoYkQQgRiqiybIxgrqK2kp2iRn1D0W6NgJj+z9CKB8rZDktiK+jEmE
         aWU5CKAyP297mezm4oGngYN/0xQzS2qSf0qss=
Received: by 10.142.139.19 with SMTP id m19mr4420120wfd.154.1220694787896;
        Sat, 06 Sep 2008 02:53:07 -0700 (PDT)
Received: by 10.142.162.7 with HTTP; Sat, 6 Sep 2008 02:53:07 -0700 (PDT)
Message-ID: <aa12778e0809060253h22708712n1b2edeaf21a65133@mail.gmail.com>
Date: Sat, 6 Sep 2008 15:23:07 +0530
From: beerbal@gmail.com
To: java-user@lucene.apache.org
Subject: Searching in multiple indices
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_65482_6135668.1220694787899"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_65482_6135668.1220694787899
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

I am a newbie user of Lucene Java. I am trying to use Lucene to enable in
search in my application. I am stuck a little in actual Search. I'm facing a
design issue and want help from experts here.

Here is my scenario:
* I have 7-8 tables in the database and I create a separate index for each
table. Index is created in the filesystem. (The fact that there is one index
per table is not under my control and I have to use that as an input)
* Fields in the indices may or may not be the same
* When I search I need to search in all indices

I tried looking at MultiSearcher. But, since the fields in indices are not
the same, I can't make use of one query and give it to the multi searcher. I
need to construct a separate MultiFieldQueryParser for each of my searchers.

If I create an array of searchers myself and call 'search' method on each of
them, I am left with having to merge the results properly (based on score).
But in this case, since the results from each searcher is normalized for
search in that index, merging is not a stright-forward operation and I'll
have to rely on some sort of a HitCollector since I need raw scores which'll
help me in merging the results.

Have people hit this problem before? Is there any other approach I can take?
Any pointers will greatly help me.

Thanks a lot for your time,
Beerbal

------=_Part_65482_6135668.1220694787899--

From java-user-return-35972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 06 10:15:05 2008
Return-Path: <java-user-return-35972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23319 invoked from network); 6 Sep 2008 10:15:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Sep 2008 10:15:04 -0000
Received: (qmail 1216 invoked by uid 500); 6 Sep 2008 10:14:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1161 invoked by uid 500); 6 Sep 2008 10:14:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1150 invoked by uid 99); 6 Sep 2008 10:14:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Sep 2008 03:14:52 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.229] (HELO wr-out-0506.google.com) (64.233.184.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Sep 2008 10:13:53 +0000
Received: by wr-out-0506.google.com with SMTP id c30so953072wra.21
        for <java-user@lucene.apache.org>; Sat, 06 Sep 2008 03:14:22 -0700 (PDT)
Received: by 10.70.19.20 with SMTP id 20mr15686557wxs.54.1220696062737;
        Sat, 06 Sep 2008 03:14:22 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id p60sm1661825hsa.8.2008.09.06.03.14.21
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 06 Sep 2008 03:14:22 -0700 (PDT)
Message-Id: <AF3E0B5C-ACE6-44F2-AACD-825C07B4656A@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <48C18126.1040902@yahoo.co.uk>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: How can we know if 2 lucene indexes are same?
Date: Sat, 6 Sep 2008 06:14:20 -0400
References: <5e76b0ad0808290235w45f762e3i2a476e8fe132dfb4@mail.gmail.com>	 <54A87861-7A1E-409D-B8E8-CF0F5284E0BF@mikemccandless.com>	 <9233ccac0809040629x43b63503wa1196bedd9791747@mail.gmail.com>	 <58B46075-2634-4E55-8463-C2FF56E312FD@mikemccandless.com>	 <5e76b0ad0809042352q2b6f30c3v56f3efd3e88fca10@mail.gmail.com>	 <9233ccac0809050033l231cf0d7y9a5a3a3abe6764fb@mail.gmail.com>	 <69de18140809050219o59168d19kae2f179758ebd464@mail.gmail.com>	 <3A375886-95E2-46F3-9A59-7BA56B1C88B2@mikemccandless.com>	 <69de18140809050619u30ff07a8qbdc5a27ef90280bb@mail.gmail.com>	 <7250DE29-E4A0-4924-8070-0DA2308193D3@mikemccandless.com> <69de18140809050951o7c760ca7ma444d5811a1f393f@mail.gmail.com> <48C18126.1040902@yahoo.co.uk>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


I think this may also be useful for a reader to have richer logic as  
to whether it's time to reopen.  It's a way for the writer to do some  
minimal communication to the readers on what changes were just  
committed.

Ie we have the static IndexReader.getVersion method, that opens the  
latest segments_N in the index and returns its version; we'd add  
something like static IndexReader.getLatestCommitUserData which  
IndexReader could consult to see if it should reopen.

In 3.0, when IndexWriter hardwires autoCommit to false, then every  
commit is explicitly done by application code (vs now where merges,  
optimize, may do commits as well), then the application would have  
total control on what userData to put into the commit.

I think this is compelling?  It's a tiny change to the index format.

Mike

markharw00d wrote:

>
>>
>> I think this could be a generally useful feature?
>>
> +1. I could definitely use a "commitUserData" option for the same  
> reasons.
>
>> Thinking more on this, we may not need to modify the index format  
>> at all for
>> this use-case. This is easily achieved in the current system by  
>> adding a
>> dummy document which Solr can read/write -- not very elegant but it  
>> can work
>>
>
> I thought about this but was uncomfortable with the idea of adding  
> an extra doc - some use cases that become troublesome for any  
> application logic are:
> 1) IndexReader.numDocs/IndexReader.maxDoc will give "incorrect" values
> 2) Any queries of the type "all documents *without* a value for  
> field X return the commit.userdata document.
>
> I was toying with the idea of maintaining my own commit.userdata  
> file which I would manage in my framework when calling  
> IndexWriter.commit but this does not feel as clean as Lucene core  
> code holding the user data in the segments file.
>
> Cheers
> Mark
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 06 12:53:40 2008
Return-Path: <java-user-return-35973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83583 invoked from network); 6 Sep 2008 12:53:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Sep 2008 12:53:39 -0000
Received: (qmail 70111 invoked by uid 500); 6 Sep 2008 12:53:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70083 invoked by uid 500); 6 Sep 2008 12:53:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70072 invoked by uid 99); 6 Sep 2008 12:53:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Sep 2008 05:53:29 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shalinmangar@gmail.com designates 209.85.200.168 as permitted sender)
Received: from [209.85.200.168] (HELO wf-out-1314.google.com) (209.85.200.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Sep 2008 12:52:32 +0000
Received: by wf-out-1314.google.com with SMTP id 28so1004915wfc.20
        for <java-user@lucene.apache.org>; Sat, 06 Sep 2008 05:53:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=lXIyJqGOHGF5bVIadt/0nYwR7aQs7eeYBsOVCOsXtAs=;
        b=SnNJcrAXFT56rRy45WCAs1mSY/RHS+HwfQG/Qd7dAV7NIXY8iEkCz7oWUeHmDNAPrt
         Rj/0jKuxumzLUx2mdW3JbrM1P02+R44A19Gu0ag7eaCQlKPnSFMbeXtFbDAxDjT4/bIx
         6WoQBGk4ucFKSB92YysyY/YQLab39GD3ps3E8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=r7naaGFgtBfetPB/TCvhwiKJMUXrYxd8Z+8g9hQnIBb0M+7+2EgnXhsNupppEMGID2
         eueQh0OFCL3BzXdJ9J89jKOIC4UyF3CyCIhbdmK565CBmBW+iqksknwQwTZgToXZriYd
         v3811OOY2BHf5tSWh5s67FAjHJIwITNMYnspY=
Received: by 10.142.222.4 with SMTP id u4mr4469198wfg.329.1220705583658;
        Sat, 06 Sep 2008 05:53:03 -0700 (PDT)
Received: by 10.142.223.15 with HTTP; Sat, 6 Sep 2008 05:53:03 -0700 (PDT)
Message-ID: <69de18140809060553o31641b7andd24c0828de3ac46@mail.gmail.com>
Date: Sat, 6 Sep 2008 18:23:03 +0530
From: "Shalin Shekhar Mangar" <shalinmangar@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How can we know if 2 lucene indexes are same?
In-Reply-To: <AF3E0B5C-ACE6-44F2-AACD-825C07B4656A@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_45118_20495971.1220705583666"
References: <5e76b0ad0808290235w45f762e3i2a476e8fe132dfb4@mail.gmail.com>
	 <5e76b0ad0809042352q2b6f30c3v56f3efd3e88fca10@mail.gmail.com>
	 <9233ccac0809050033l231cf0d7y9a5a3a3abe6764fb@mail.gmail.com>
	 <69de18140809050219o59168d19kae2f179758ebd464@mail.gmail.com>
	 <3A375886-95E2-46F3-9A59-7BA56B1C88B2@mikemccandless.com>
	 <69de18140809050619u30ff07a8qbdc5a27ef90280bb@mail.gmail.com>
	 <7250DE29-E4A0-4924-8070-0DA2308193D3@mikemccandless.com>
	 <69de18140809050951o7c760ca7ma444d5811a1f393f@mail.gmail.com>
	 <48C18126.1040902@yahoo.co.uk>
	 <AF3E0B5C-ACE6-44F2-AACD-825C07B4656A@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_45118_20495971.1220705583666
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Sounds good. If other people find it useful, I'm all for it. I just didn't
want to burden you guys to change the index format only for my use-case :-)

On Sat, Sep 6, 2008 at 3:44 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> I think this may also be useful for a reader to have richer logic as to
> whether it's time to reopen.  It's a way for the writer to do some minimal
> communication to the readers on what changes were just committed.
>
> Ie we have the static IndexReader.getVersion method, that opens the latest
> segments_N in the index and returns its version; we'd add something like
> static IndexReader.getLatestCommitUserData which IndexReader could consult
> to see if it should reopen.
>
> In 3.0, when IndexWriter hardwires autoCommit to false, then every commit
> is explicitly done by application code (vs now where merges, optimize, may
> do commits as well), then the application would have total control on what
> userData to put into the commit.
>
> I think this is compelling?  It's a tiny change to the index format.
>
> Mike
>
>
> markharw00d wrote:
>
>
>>
>>> I think this could be a generally useful feature?
>>>
>>>  +1. I could definitely use a "commitUserData" option for the same
>> reasons.
>>
>>  Thinking more on this, we may not need to modify the index format at all
>>> for
>>> this use-case. This is easily achieved in the current system by adding a
>>> dummy document which Solr can read/write -- not very elegant but it can
>>> work
>>>
>>>
>> I thought about this but was uncomfortable with the idea of adding an
>> extra doc - some use cases that become troublesome for any application logic
>> are:
>> 1) IndexReader.numDocs/IndexReader.maxDoc will give "incorrect" values
>> 2) Any queries of the type "all documents *without* a value for field X
>> return the commit.userdata document.
>>
>> I was toying with the idea of maintaining my own commit.userdata file
>> which I would manage in my framework when calling IndexWriter.commit but
>> this does not feel as clean as Lucene core code holding the user data in the
>> segments file.
>>
>> Cheers
>> Mark
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,
Shalin Shekhar Mangar.

------=_Part_45118_20495971.1220705583666--

From java-user-return-35974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 06 13:36:16 2008
Return-Path: <java-user-return-35974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96656 invoked from network); 6 Sep 2008 13:36:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Sep 2008 13:36:16 -0000
Received: (qmail 6983 invoked by uid 500); 6 Sep 2008 13:36:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6953 invoked by uid 500); 6 Sep 2008 13:36:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6942 invoked by uid 99); 6 Sep 2008 13:36:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Sep 2008 06:36:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yeshuangming@gmail.com designates 209.85.217.30 as permitted sender)
Received: from [209.85.217.30] (HELO mail-gx0-f30.google.com) (209.85.217.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Sep 2008 13:35:09 +0000
Received: by gxk11 with SMTP id 11so713539gxk.5
        for <java-user@lucene.apache.org>; Sat, 06 Sep 2008 06:35:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=PLD8UjwtEaF4qWpi6xsMBuPsyT/7YQBQrZzi+RKKmr8=;
        b=e0swyrPa9ehUqjdRe1hLAM/+QalnnIXdD2rB4GsYaZpSqmf9EVqpDP/X7tgOYmp0qj
         h6saDdB1nuWOZYTntFJmXPItk/VNBdh9gBWseVPNfvCjHYeYiXh/dfOvP+4hMEb6UpvR
         +rfKVLOTfhjwVDQQY4jnlsH8OABAq2gPLG3vw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=HRawTnxdn3w1Pq2KaTuoGczXDlzr1OfuEdWhC0QnvxFEa9c6/47HPU9Ajz6Cp2wXSF
         ZzClTyMwkRn4p86qScnfJQMWIydN6iODxLE8GJYsYrfa665obqIxjgFo2pTDDxKxA7mh
         8BRlvhP9DeesHF+SW+p9qDfZpiTrqOiuG4CBc=
Received: by 10.151.156.6 with SMTP id i6mr18173786ybo.73.1220708139658;
        Sat, 06 Sep 2008 06:35:39 -0700 (PDT)
Received: by 10.151.84.5 with HTTP; Sat, 6 Sep 2008 06:35:39 -0700 (PDT)
Message-ID: <9233ccac0809060635s517f2859ma1e524129b33561d@mail.gmail.com>
Date: Sat, 6 Sep 2008 21:35:39 +0800
From: "=?UTF-8?B?5Y+25Y+M5piO?=" <yeshuangming@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching in multiple indices
In-Reply-To: <aa12778e0809060253h22708712n1b2edeaf21a65133@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <aa12778e0809060253h22708712n1b2edeaf21a65133@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

SW4gbXkgb3BpbmlvbiwgeW91IGNhbiB1c2UgTXVsdGlTZWFyY2hlciwgb3IgaWYgdGhlcmUgaXNu
J3QgaHVnZSBkYXRhCmluIGluZGV4LCB5b3UgY2FuIHB1dCB0aGVtIGluIG9uZSBpbmRleCwgbm8g
bWF0dGVyIHRoZSBmaWVsZHMgaW4KaW5kaWNlcyBhcmUgbm90IHRoZSBzYW1lLiBZb3UgY2FuIGdl
dCBEb2NvdW1lbnQgbWF0Y2ggeW91ciBxdWVyeSwgYnV0CkkgdGhpbmssIHlvdSB3aWxsIHRoaW5r
IGFib3V0IHRoZSBxdWVyeSB0aGF0IHlvdSB3YW50IHRvIHB1dCBpbnRvIHRoZQpJbmRleFNlYXJj
aGVyLgoKMjAwOC85LzYsIGJlZXJiYWxAZ21haWwuY29tIDxiZWVyYmFsQGdtYWlsLmNvbT46Cj4g
SGVsbG8sCj4KPiBJIGFtIGEgbmV3YmllIHVzZXIgb2YgTHVjZW5lIEphdmEuIEkgYW0gdHJ5aW5n
IHRvIHVzZSBMdWNlbmUgdG8gZW5hYmxlIGluCj4gc2VhcmNoIGluIG15IGFwcGxpY2F0aW9uLiBJ
IGFtIHN0dWNrIGEgbGl0dGxlIGluIGFjdHVhbCBTZWFyY2guIEknbSBmYWNpbmcgYQo+IGRlc2ln
biBpc3N1ZSBhbmQgd2FudCBoZWxwIGZyb20gZXhwZXJ0cyBoZXJlLgo+Cj4gSGVyZSBpcyBteSBz
Y2VuYXJpbzoKPiAqIEkgaGF2ZSA3LTggdGFibGVzIGluIHRoZSBkYXRhYmFzZSBhbmQgSSBjcmVh
dGUgYSBzZXBhcmF0ZSBpbmRleCBmb3IgZWFjaAo+IHRhYmxlLiBJbmRleCBpcyBjcmVhdGVkIGlu
IHRoZSBmaWxlc3lzdGVtLiAoVGhlIGZhY3QgdGhhdCB0aGVyZSBpcyBvbmUgaW5kZXgKPiBwZXIg
dGFibGUgaXMgbm90IHVuZGVyIG15IGNvbnRyb2wgYW5kIEkgaGF2ZSB0byB1c2UgdGhhdCBhcyBh
biBpbnB1dCkKPiAqIEZpZWxkcyBpbiB0aGUgaW5kaWNlcyBtYXkgb3IgbWF5IG5vdCBiZSB0aGUg
c2FtZQo+ICogV2hlbiBJIHNlYXJjaCBJIG5lZWQgdG8gc2VhcmNoIGluIGFsbCBpbmRpY2VzCj4K
PiBJIHRyaWVkIGxvb2tpbmcgYXQgTXVsdGlTZWFyY2hlci4gQnV0LCBzaW5jZSB0aGUgZmllbGRz
IGluIGluZGljZXMgYXJlIG5vdAo+IHRoZSBzYW1lLCBJIGNhbid0IG1ha2UgdXNlIG9mIG9uZSBx
dWVyeSBhbmQgZ2l2ZSBpdCB0byB0aGUgbXVsdGkgc2VhcmNoZXIuIEkKPiBuZWVkIHRvIGNvbnN0
cnVjdCBhIHNlcGFyYXRlIE11bHRpRmllbGRRdWVyeVBhcnNlciBmb3IgZWFjaCBvZiBteSBzZWFy
Y2hlcnMuCj4KPiBJZiBJIGNyZWF0ZSBhbiBhcnJheSBvZiBzZWFyY2hlcnMgbXlzZWxmIGFuZCBj
YWxsICdzZWFyY2gnIG1ldGhvZCBvbiBlYWNoIG9mCj4gdGhlbSwgSSBhbSBsZWZ0IHdpdGggaGF2
aW5nIHRvIG1lcmdlIHRoZSByZXN1bHRzIHByb3Blcmx5IChiYXNlZCBvbiBzY29yZSkuCj4gQnV0
IGluIHRoaXMgY2FzZSwgc2luY2UgdGhlIHJlc3VsdHMgZnJvbSBlYWNoIHNlYXJjaGVyIGlzIG5v
cm1hbGl6ZWQgZm9yCj4gc2VhcmNoIGluIHRoYXQgaW5kZXgsIG1lcmdpbmcgaXMgbm90IGEgc3Ry
aWdodC1mb3J3YXJkIG9wZXJhdGlvbiBhbmQgSSdsbAo+IGhhdmUgdG8gcmVseSBvbiBzb21lIHNv
cnQgb2YgYSBIaXRDb2xsZWN0b3Igc2luY2UgSSBuZWVkIHJhdyBzY29yZXMgd2hpY2gnbGwKPiBo
ZWxwIG1lIGluIG1lcmdpbmcgdGhlIHJlc3VsdHMuCj4KPiBIYXZlIHBlb3BsZSBoaXQgdGhpcyBw
cm9ibGVtIGJlZm9yZT8gSXMgdGhlcmUgYW55IG90aGVyIGFwcHJvYWNoIEkgY2FuIHRha2U/Cj4g
QW55IHBvaW50ZXJzIHdpbGwgZ3JlYXRseSBoZWxwIG1lLgo+Cj4gVGhhbmtzIGEgbG90IGZvciB5
b3VyIHRpbWUsCj4gQmVlcmJhbAo+CgoKLS0gClNvcnJ5IGZvciBteSBlbmdsaXN0ISEK5piOCg==


From java-user-return-35975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 06 23:16:43 2008
Return-Path: <java-user-return-35975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72824 invoked from network); 6 Sep 2008 23:16:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Sep 2008 23:16:43 -0000
Received: (qmail 94901 invoked by uid 500); 6 Sep 2008 23:16:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94866 invoked by uid 500); 6 Sep 2008 23:16:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94855 invoked by uid 99); 6 Sep 2008 23:16:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Sep 2008 16:16:32 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.227 as permitted sender)
Received: from [209.85.198.227] (HELO rv-out-0506.google.com) (209.85.198.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Sep 2008 23:15:35 +0000
Received: by rv-out-0506.google.com with SMTP id f6so996760rvb.5
        for <java-user@lucene.apache.org>; Sat, 06 Sep 2008 16:15:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=702ASuSxeEf3PSkRXWnQNm7WZabAqVyabHKHPKV/vpc=;
        b=CMhYT6okzmqzAlthABEK8eBT5qn2OL+LgUR7U2hkRnk0lLvqmdtN2EYLLUBMF9xh8l
         TnWJ4oZDMiuqD8uwvPCsryodNxZkU6Shi4NvN6LXi8BLw1X9+rQrhEAQQW4klTCLjoNd
         sXw2JBV3rQtv5pKwhME1A4XibW2+d3ly/urOQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=uF4TaS8zBABG1VdtavqccjviNJfFWLa5gGsCi5a8MRLzGOTRCMOshUy8Z4BeUhqSSn
         Sv5MAjPa61PnbiTd55O63wri3h2rQFqPEclIUuc6MucD8dxUixl6bmO64FYGaqnQWCcT
         LSlANcw+FDW0vLavOrqprxZ5e7BCodK40bohY=
Received: by 10.141.76.21 with SMTP id d21mr7735176rvl.270.1220742956962;
        Sat, 06 Sep 2008 16:15:56 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Sat, 6 Sep 2008 16:15:56 -0700 (PDT)
Message-ID: <359a92830809061615u184ceccbwc552ea5d21a5e3ca@mail.gmail.com>
Date: Sat, 6 Sep 2008 19:15:56 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Help in searching mutliple indices
In-Reply-To: <aa12778e0809060220i585866dai40b6126e1e65053e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_46481_1591368.1220742956774"
References: <aa12778e0809060220i585866dai40b6126e1e65053e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_46481_1591368.1220742956774
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, what is the higher-level task you're trying to accomplish? I have
real trouble understanding why you're using Lucene at all. Especially
because scoring will be irrelevant *between* searches, since they're
going at completely different "documents". That is, there is no relation
between the score from a hit on table A and the score on table B.

IMO, Lucene should *not* be used to try to emulate a database. The
very fact that you've got a separate index for each table implies that
you're going to try to do some database-like operations. I'd just use
the database.

Often, Lucene is used to index de-normalized abstractions of the
database in order to enable vastly improved search behavior. But that's
explicitly prohibited by your design it seems to me.

Of course I could be completely off base, if so could you elaborate
on what the high-level objective is?

I'd really go back to the givens of the problem. That is, why on earth
are you required to have one index per table? It's much easier to
revisit this sort of constraint than support a poor design into the
indefinite future <G>.

Best
Erick

On Sat, Sep 6, 2008 at 5:20 AM, <beerbal@gmail.com> wrote:

> Hello,
>
> I am a newbie user of Lucene Java. I am trying to use Lucene to enable in
> search in my application. I am stuck a little in actual Search. I'm facing
> a
> design issue and want help from experts here.
>
> Here is my scenario:
> * I have 7-8 tables in the database and I create a separate index for each
> table. Index is created in the filesystem. (The fact that there is one
> index
> per table is not under my control and I have to use that as an input)
> * Fields in the indices may or may not be the same
> * When I search I need to search in all indices
>
> I tried looking at MultiSearcher. But, since the fields in indices are not
> the same, I can't make use of one query and give it to the multi searcher.
> I
> need to construct a separate MultiFieldQueryParser for each of my
> searchers.
>
> If I create an array of searchers myself and call 'search' method on each
> of
> them, I am left with having to merge the results properly (based on score).
> But in this case, since the results from each searcher is normalized for
> search in that index, merging is not a stright-forward operation and I'll
> have to rely on some sort of a HitCollector since I need raw scores
> which'll
> help me in merging the results.
>
> Have people hit this problem before? Is there any other approach I can
> take?
> Any pointers will greatly help me.
>
> Thanks a lot for your time,
> Beerbal
>

------=_Part_46481_1591368.1220742956774--

From java-user-return-35976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 07 01:38:57 2008
Return-Path: <java-user-return-35976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71776 invoked from network); 7 Sep 2008 01:38:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Sep 2008 01:38:57 -0000
Received: (qmail 45932 invoked by uid 500); 7 Sep 2008 01:38:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45903 invoked by uid 500); 7 Sep 2008 01:38:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45889 invoked by uid 99); 7 Sep 2008 01:38:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Sep 2008 18:38:53 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of beerbal@gmail.com designates 209.85.200.175 as permitted sender)
Received: from [209.85.200.175] (HELO wf-out-1314.google.com) (209.85.200.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Sep 2008 01:37:53 +0000
Received: by wf-out-1314.google.com with SMTP id 28so1261426wfc.20
        for <java-user@lucene.apache.org>; Sat, 06 Sep 2008 18:38:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=CSfjyBtAvh+mIW5/sR7nvt3AVzc8iJCOAjth8UxEIfk=;
        b=Su3lmBFy0MpSxkkIG96pmJjcDU0wGjpw/s/fTNmBOb9Gf4A2lBkCI4GjZQp3EOjeGW
         hzKYiZxtPYF4R5eixrPyG6YU1FNQ293CRtMMem8dh5osRPLsH2Z4/sPjrwd0/Z0CGu7W
         joAIJlYWF8r2CVeUAO6jbPqMNgrFf+fQzsuVA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=lcccE/TY2ZwF+SyayOw7iPwi6M/OPo21pEPZHK3mrKiIXvrzXIakmN7XUsvUjx6rXH
         TRxYmlSG3EkdefSZPYlj69W1DX+Vyh7YXS8uIAhL+j3T+I3c4/0mQLrG7FFeJuUKwFPh
         aaPv5HFltiaiyqpRhND/OCTTpj99QgahS6nvE=
Received: by 10.143.12.19 with SMTP id p19mr4663345wfi.171.1220751504743;
        Sat, 06 Sep 2008 18:38:24 -0700 (PDT)
Received: by 10.142.162.7 with HTTP; Sat, 6 Sep 2008 18:38:24 -0700 (PDT)
Message-ID: <aa12778e0809061838p628c3048m9d63e88eba6c81b6@mail.gmail.com>
Date: Sun, 7 Sep 2008 07:08:24 +0530
From: beerbal@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Help in searching mutliple indices
In-Reply-To: <359a92830809061615u184ceccbwc552ea5d21a5e3ca@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <aa12778e0809060220i585866dai40b6126e1e65053e@mail.gmail.com>
	 <359a92830809061615u184ceccbwc552ea5d21a5e3ca@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

The main reason behind having one index per table is that the tables
grow to be very big and we want to keep updating the index as the
table gets modified (may be at specified intervals). So, if table A
changes (row modified, added or deleted) we want this change to be
reflected in the index and we want this change to be localized for
that index.

Task I am trying to achieve, is to have my application search enabled.
Tables represent model elements like User, Community, Blog etc etc.
When I search for something, say 'foobar', I need to return all the
elements (user, community, blog etc etc) which match the criteria. For
this purpose, I need to search in all indices. You are completely
right about scoring between searches losing relevance. Thats why I am
trying to get de-normalized scores and do the merge of search results
based on that raw-score. Is there any glaringly wrong in the approach?

Thanks,
Beerbal

On 9/7/08, Erick Erickson <erickerickson@gmail.com> wrote:
> Well, what is the higher-level task you're trying to accomplish? I have
> real trouble understanding why you're using Lucene at all. Especially
> because scoring will be irrelevant *between* searches, since they're
> going at completely different "documents". That is, there is no relation
> between the score from a hit on table A and the score on table B.
>
> IMO, Lucene should *not* be used to try to emulate a database. The
> very fact that you've got a separate index for each table implies that
> you're going to try to do some database-like operations. I'd just use
> the database.
>
> Often, Lucene is used to index de-normalized abstractions of the
> database in order to enable vastly improved search behavior. But that's
> explicitly prohibited by your design it seems to me.
>
> Of course I could be completely off base, if so could you elaborate
> on what the high-level objective is?
>
> I'd really go back to the givens of the problem. That is, why on earth
> are you required to have one index per table? It's much easier to
> revisit this sort of constraint than support a poor design into the
> indefinite future <G>.
>
> Best
> Erick
>
> On Sat, Sep 6, 2008 at 5:20 AM, <beerbal@gmail.com> wrote:
>
>> Hello,
>>
>> I am a newbie user of Lucene Java. I am trying to use Lucene to enable in
>> search in my application. I am stuck a little in actual Search. I'm facing
>> a
>> design issue and want help from experts here.
>>
>> Here is my scenario:
>> * I have 7-8 tables in the database and I create a separate index for each
>> table. Index is created in the filesystem. (The fact that there is one
>> index
>> per table is not under my control and I have to use that as an input)
>> * Fields in the indices may or may not be the same
>> * When I search I need to search in all indices
>>
>> I tried looking at MultiSearcher. But, since the fields in indices are not
>> the same, I can't make use of one query and give it to the multi searcher.
>> I
>> need to construct a separate MultiFieldQueryParser for each of my
>> searchers.
>>
>> If I create an array of searchers myself and call 'search' method on each
>> of
>> them, I am left with having to merge the results properly (based on
>> score).
>> But in this case, since the results from each searcher is normalized for
>> search in that index, merging is not a stright-forward operation and I'll
>> have to rely on some sort of a HitCollector since I need raw scores
>> which'll
>> help me in merging the results.
>>
>> Have people hit this problem before? Is there any other approach I can
>> take?
>> Any pointers will greatly help me.
>>
>> Thanks a lot for your time,
>> Beerbal
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 07 01:55:15 2008
Return-Path: <java-user-return-35977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85336 invoked from network); 7 Sep 2008 01:55:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Sep 2008 01:55:15 -0000
Received: (qmail 53573 invoked by uid 500); 7 Sep 2008 01:55:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53539 invoked by uid 500); 7 Sep 2008 01:55:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53528 invoked by uid 99); 7 Sep 2008 01:55:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Sep 2008 18:55:06 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yeshuangming@gmail.com designates 209.85.217.30 as permitted sender)
Received: from [209.85.217.30] (HELO mail-gx0-f30.google.com) (209.85.217.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Sep 2008 01:54:08 +0000
Received: by gxk11 with SMTP id 11so1053140gxk.5
        for <java-user@lucene.apache.org>; Sat, 06 Sep 2008 18:54:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=9M1UbAPxvV662YMRb8zTstikxWyb897emFGzGy4jqk0=;
        b=Qkl1TPuWdTHG5kKt7E5ZVk+Cgz8uLuICFAL2zM1eg2l4bg1TkbsuyC3g2QWoJwZRog
         xJwX9BwMe0bLjYmYqy+8ygcCUH2xlio4z3hHOAf85hq0weE1lt6j/Or9Wft2sEdUhbxm
         R3mR8Bk2ex2GsMko5s7QxIwwyVuozbvhFLmwE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=KDPRKPMr2Dob3Brqatpl4iF1J6HjpbgGEiAzXGjIjp9ppiuhqIEHLPDtmHULtYNLFV
         T+EqQ69M2m9C+fOTkX2MJMxX0QiOyBQnlp3rzB6XpcuIYf7J2aOi6xFcKlTA1le3bxt7
         rmu4N8u/4lkN5v35ezU6JEUjZ/wzZs71UHvzQ=
Received: by 10.150.204.12 with SMTP id b12mr14587971ybg.160.1220752478489;
        Sat, 06 Sep 2008 18:54:38 -0700 (PDT)
Received: by 10.151.84.5 with HTTP; Sat, 6 Sep 2008 18:54:38 -0700 (PDT)
Message-ID: <9233ccac0809061854r3a519182i20180eebeb5398e0@mail.gmail.com>
Date: Sun, 7 Sep 2008 09:54:38 +0800
From: "=?UTF-8?B?5Y+25Y+M5piO?=" <yeshuangming@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem with lucene search starting to return 0 hits when a few seconds earlier it was returning hundreds
In-Reply-To: <359a92830809050623q5357da05j305b1c56f1699653@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_54540_21208578.1220752478457"
References: <62568.57815.qm@web45215.mail.sp1.yahoo.com>
	 <359a92830809050623q5357da05j305b1c56f1699653@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_54540_21208578.1220752478457
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

IEhhdmUgeW91IGlnbm9yZSBhbnkgRXhjZXB0aW9uIGR1cmluZyBxdWVyeT8gIG1ha2Ugc3VyZSBv
ZiBpdC4KCjIwMDgvOS81LCBFcmljayBFcmlja3NvbiA8ZXJpY2tlcmlja3NvbkBnbWFpbC5jb20+
Ogo+Cj4gSSd2ZSBiZWVuIHRyYWNraW5nIHRoaXMgbGlzdCBmb3IgYSB5ZWFyIG9yIG1vcmUsIGFu
ZCB0aGlzIGlzIHRoZQo+IGZpcnN0IEkndmUgZXZlciBoZWFyZCBvZiBzdWNoIGEgdGhpbmcuIFdo
aWNoIGxlYWRzIG1lIHRvIHdvbmRlcgo+IHdoYXQgKmVsc2UqIGNoYW5nZWQgYmVzaWRlcyB5b3Vy
IGluZGV4IHNpemUuIENsYXNzcGF0aD8KPiBqYXIgZmlsZXM/IFNvbWUgc3lzYWRtaW4gbW9kaWZp
ZWQgeW91ciBzZWFyY2ggYm94PyBJcyB0aGUKPiBwcm9ncmFtIHRocm93aW5nIGFuIGV4Y2VwdGlv
biB0aGF0IHlvdSdyZSBtYXNraW5nIHNvbWV3aGVyZQo+IGluIHRoZSBjb2RlPyBJcyBpdCBwb3Nz
aWJsZSB0aGF0IHlvdSdyZSBnZXR0aW5nIGFuIE91dCBPZgo+IE1lbW9yeSBleGNlcHRpb24/Cj4K
PiBGb2xrcyBoYXZlIHJvdXRpbmVseSB1c2VkIE1VQ0ggbGFyZ2VyIGluZGV4ZXMgdGhhbiAzRyB3
aXRob3V0Cj4gYW55dGhpbmcgbGlrZSB0aGlzIGhhcHBlbmluZy4KPgo+IFNvLCBoZXJlJ3Mgd2hh
dCBJJ2QgZG8uCj4gMT4gdmVyaWZ5IHlvdXIgaW5kZXguIExvb2sgYXQgaXQgaW4sIHNheSBMdWtl
Lgo+IDI+IExvZyB5b3VyIHF1ZXJpZXMuIEl0J3MgcG9zc2libGUgeW91J3JlIG5vdAo+ICAgICBx
dWVyeWluZyB3aGF0IHlvdSB0aGluayB5b3UgYXJlLgo+IDM+IFlvdSBzaG91bGQgdmVyeSBlYXNp
bHkgYmUgYWJsZSB0byBjcmVhdGUgYSBzbWFsbCwKPiAgICAgc3R1cGlkIHByb2dyYW0gb24geW91
ciBwZXJzb25hbCBtYWNoaW5lIHRoYXQgd2lsbAo+ICAgICBvcGVuIHRoaXMgaW5kZXggYW5kIGZp
cmUgb2ZmIHRoZSBxdWVyaWVzIGluIHF1ZXN0aW9uCj4gICAgIGFuZCBzZWUgaWYgeW91ciBwcm9i
bGVtIGlzIGVudmlyb25tZW50YWwgb3IgcHJvZ3JhbW1hdGljLgo+ICAgICBJZiB5b3UgcnVuIGl0
IGluIGFuIElERSwgeW91IHNob3VsZCBiZSBhYmxlIHRvIGJyZWFrCj4gICAgIG9uIGV4Y2VwdGlv
bnMgaWYgdGhlcmUgYXJlIGFueS4KPiA0PiBBc3N1bWluZyB0aGF0IDwyPiBleGhpYml0cyB0aGUg
cHJvYmxlbSwgc3RhcnQgcGFyaW5nCj4gICAgIGJhY2sgeW91ciBjb2RlLiBUYWtlIG91dCBvbmUg
dGhpbmcgYXQgYSB0aW1lIHVudGlsCj4gICAgIHlvdSBkb24ndCBzZWUgdGhlIHByb2JsZW0uCj4g
NT4gcmVhbGx5IHRha2UgYSBsb29rIGF0IGFueSBjb2RlIGNoYW5nZXMgdGhhdCBhcmUKPiAgICAg
Y29pbmNpZGVudCB3aXRoIHRoaXMgYW5vbWFseS4gQXJlIHlvdSB0b3RhbGx5IHN1cmUKPiAgICAg
dGhhdCB0aGUgb25seSB0aGluZyB0aGF0J3MgY2hhbmdlZCBpcyB0aGUgaW5kZXg/Cj4gNj4gd2h5
IGFyZSB5b3UgYm90aGVyaW5nIHRvIG1ha2UgZXZlcnl0aGluZyBmaW5hbD8gQXJlCj4gICAgeW91
ciBjb2RlIHNuaXBwZXRzIHBhcnQgb2YgYSBjbGFzcyB0aGF0J3MgaW5zdGFudGlhdGVkCj4gICAg
Zm9yIGVhY2ggcXVlcnk/IE5vdGUgdGhhdCB0aGlzIGlzIG1vcmUgY3VyaW9zaXR5IHRoYW4KPiAg
ICB0aGlua2luZyB0aGF0IGl0J3MgdGhlIHNvdXJjZSBvZiB5b3VyIHByb2JsZW0gPEc+Lgo+Cj4K
PiBCZXN0Cj4gRXJpY2sKPgo+Cj4KPiBPbiBUaHUsIFNlcCA0LCAyMDA4IGF0IDU6NDYgUE0sIEp1
c3RpbiBHcnVuYXUgPGpqbWcwMUB5YWhvby5jb20+IHdyb3RlOgo+Cj4gPiBTb3JyeSwgSSBmb3Jn
b3QgdG8gaW5jbHVkZSB0aGUgdmlzaWJpbGl0eSBmaWx0ZXJzOgo+ID4KPiA+ICAgICAgICAgICAg
ICAgIGZpbmFsIEJvb2xlYW5RdWVyeSB2aXNpYmlsaXR5RmlsdGVyID0gbmV3IEJvb2xlYW5RdWVy
eSgpOwo+ID4gICAgICAgICAgICAgICAgdmlzaWJpbGl0eUZpbHRlci5hZGQobmV3IFRlcm1RdWVy
eShuZXcgVGVybSgiaXNQdWJsaWMiLAo+ID4gInRydWUiKSksCj4gPiAgICAgICAgICAgICAgICAg
ICAgICAgIE9jY3VyLlNIT1VMRCk7Cj4gPiAgICAgICAgICAgICAgICB2aXNpYmlsaXR5RmlsdGVy
LmFkZChuZXcgVGVybVF1ZXJ5KG5ldyBUZXJtKCJyZWFkZXIiLAo+ID4gdXNlci5nZXRJZCgpKSks
Cj4gPiAgICAgICAgICAgICAgICAgICAgICAgIE9jY3VyLlNIT1VMRCk7Cj4gPgo+ID4KPiA+IFRo
ZXNlIHZpc2liaWxpdHkgZmlsdGVycyBlbnN1cmUgdGhhdCBhIHVzZXIgb25seSBzZWVzIGZpbGVz
IHdoaWNoIGhlIG9yCj4gc2hlCj4gPiBoYXMgYWNjZXNzIHRvIHNlZS4KPiA+Cj4gPiBJIGFtIHBy
ZXR0eSBjZXJ0YWluIG5vYm9keSBlbHNlIGhhcyBtb2RpZmllZCB0aGUgaW5kZXggaW4gdGhlIG1l
YW50aW1lLAo+IGJ1dAo+ID4gd2h5IGlzIHRoYXQgaW1wb3J0YW50PyAgV2UgaGF2ZSBzZXZlcmFs
IG90aGVyIHNlcnZlcnMgLS0gd2hvc2Ugb25seQo+ID4gZGlmZmVyZW5jZSBpcyBhIHNtYWxsZXIg
ZGF0YSBzZXQgLS0gd2l0aCBkb3plbnMgb2YgY29uY3VycmVudCB1c2VycywgYW5kCj4gdGhlCj4g
PiBpbmRleCBvbiB0aG9zZSBzZXJ2ZXJzIGdldHMgbW9kaWZpZWQgYW5kIHJlYWQgY29uY3VycmVu
dGx5IGFsbCB0aGUgdGltZSwKPiBidXQKPiA+IG5vbmUgb2YgdGhlc2Ugb3RoZXIgc2VydmVycyBo
YXZlIGV2ZXIgZXhoaWJpdGVkIHRoaXMgYnVnLgo+ID4KPiA+Cj4gPgo+ID4gLS0tLS0gT3JpZ2lu
YWwgTWVzc2FnZSAtLS0tCj4gPiBGcm9tOiBMZW9uaWQgTS4gPGxlb25pZG1zQGdtYWlsLmNvbT4K
PiA+IFRvOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcKPiA+IFNlbnQ6IFRodXJzZGF5LCBT
ZXB0ZW1iZXIgNCwgMjAwOCA1OjM1OjQ3IFBNCj4gPiBTdWJqZWN0OiBSZTogUHJvYmxlbSB3aXRo
IGx1Y2VuZSBzZWFyY2ggc3RhcnRpbmcgdG8gcmV0dXJuIDAgaGl0cyB3aGVuIGEKPiA+IGZldyBz
ZWNvbmRzIGVhcmxpZXIgaXQgd2FzIHJldHVybmluZyBodW5kcmVkcwo+ID4KPiA+ICogQW5kIHdo
YXQncyBhYm91dCB2aXNpYmlsaXR5IGZpbHRlcj8gKiBBcmUgeW91IHN1cmUgbm8gb25lIGVsc2Ug
YWNjZXNzZXMKPiA+IEluZGV4UmVhZGVyIGFuZCBtb2RpZmllcyBpbmRleD8gU2VlIHJlYWRlci5t
YXhEb2NzKCkgdG8gYmUgY29uZmlkZW50Lgo+ID4KPiA+IE9uIEZyaSwgU2VwIDUsIDIwMDggYXQg
MTI6MTkgQU0sIEp1c3RpbiBHcnVuYXUgPGpqbWcwMUB5YWhvby5jb20+IHdyb3RlOgo+ID4KPiA+
ID4gV2UgaGF2ZSBzb21lIGNvZGUgdGhhdCB1c2VzIGx1Y2VuZSB3aGljaCBoYXMgYmVlbiB3b3Jr
aW5nIHBlcmZlY3RseQo+IHdlbGwKPiA+ID4gZm9yIHNldmVyYWwgbW9udGhzLgo+ID4gPgo+ID4g
PiBSZWNlbnRseSwgYSBRQSB0ZWFtIGluIG91ciBvcmdhbml6YXRpb24gaGFzIHNldCB1cCBhIHNl
cnZlciB3aXRoIGEgbXVjaAo+ID4gPiBsYXJnZXIgZGF0YSBzZXQgdGhhbiB3ZSBoYXZlIGV2ZXIg
dGVzdGVkIHdpdGggaW4gdGhlIHBhc3Q6ICB0aGUKPiByZXN1bHRpbmcKPiA+ID4gbHVjZW5lIGlu
ZGV4IGlzIGFib3V0IDNHIGluIHNpemUuCj4gPiA+Cj4gPiA+IE9uIHRoaXMgcGFydGljdWxhciBz
ZXJ2ZXIsIHRoZSBzYW1lIGx1Y2VuZSBjb2RlIHdoaWNoIGhhcyBiZWVuIHJlbGlhYmxlCj4gPiBp
bgo+ID4gPiB0aGUgcGFzdCBpcyBub3cgZXhoaWJpdGluZyBlcnJhdGljIGJlaGF2aW9yLiAgVGhl
IGZpcnN0IHRpbWUgeW91IGRvIGEKPiA+ID4gc2VhcmNoLCBpdCByZXR1cm5zIHRoZSBjb3JyZWN0
IG51bWJlciBvZiBoaXRzLiAgVGhlIHNlY29uZCB0aW1lIHlvdSBkbwo+IGEKPiA+ID4gc2VhcmNo
LCBpdCBtYXkgb3IgbWF5IG5vdCByZXR1cm4gdGhlIGNvcnJlY3Qgc2V0LiAgQnkgdGhlIHRoaXJk
IHRpbWUKPiB5b3UKPiA+IGRvCj4gPiA+IGEgc2VhcmNoLCBpdCB3aWxsIHJldHVybiAwIGhpdHMg
ZXZlbiBmb3IgYSBzZWFyY2ggdGhhdCB3YXMgcmV0dXJuaW5nCj4gPiA+IGh1bmRyZWRzIG9mIGhp
dHMgb25seSBhIGZldyBzZWNvbmRzIGVhcmxpZXIuICBBbGwgc3Vic2VxdWVudCBzZWFyY2hlcwo+
ID4gd2lsbAo+ID4gPiByZXR1cm4gMCBoaXRzIHVudGlsIHlvdSBzdG9wIGFuZCByZXN0YXJ0IHRo
ZSBqYXZhIHByb2Nlc3MuCj4gPiA+Cj4gPiA+IEEgc25pcHBldCBvZiB0aGUgcmVsZXZhbnQgY29k
ZSBmb2xsb3dzOgo+ID4gPgo+ID4gPiAgICAgICAgICAgICAgICAgICAgLy8gZ2V0UmVhZGVyKCkg
cmV0dXJucyB0aGUgc2luZ2xldG9uIEluZGV4UmVhZGVyCj4gPiBvYmplY3QKPiA+ID4gICAgICAg
ICAgICAgICAgZmluYWwgSW5kZXhSZWFkZXIgcmVhZGVyID0gZ2V0UmVhZGVyKCk7Cj4gPiA+Cj4g
PiA+ICAgICAgICAgICAgICAgICAgICAvLyBBTkFMWVpFUiBpcyBhbm90aGVyIHNpbmdsZXRvbgo+
ID4gPiAgICAgICAgICAgICAgICBmaW5hbCBRdWVyeVBhcnNlciBxdWVyeVBhcnNlciA9IG5ldyBR
dWVyeVBhcnNlcigidGV4dCIsCj4gPiA+IEFOQUxZWkVSKTsKPiA+ID4gICAgICAgICAgICAgICAg
cXVlcnlQYXJzZXIuc2V0RGVmYXVsdE9wZXJhdG9yKHNwZWMuZ2V0RGVmYXVsdE9wKCkpOwo+ID4g
PiAgICAgICAgICAgICAgICBmaW5hbCBRdWVyeSBxdWVyeSA9Cj4gPiA+IHF1ZXJ5UGFyc2VyLnBh
cnNlKHNwZWMuZ2V0U2VhcmNoVGV4dCgpKS5yZXdyaXRlKAo+ID4gPiAgICAgICAgICAgICAgICAg
ICAgICAgIHJlYWRlcik7Cj4gPiA+ICAgICAgICAgICAgICAgIGZpbmFsIEluZGV4U2VhcmNoZXIg
c2VhcmNoZXIgPSBuZXcKPiBJbmRleFNlYXJjaGVyKHJlYWRlcik7Cj4gPiA+Cj4gPiA+ICAgICAg
ICAgICAgICAgIGZpbmFsIEhpdHMgaGl0cyA9IHNlYXJjaGVyLnNlYXJjaChxdWVyeSwgbmV3Cj4g
PiA+IENhY2hpbmdXcmFwcGVyRmlsdGVyKAo+ID4gPiAgICAgICAgICAgICAgICAgICAgICAgIG5l
dyBRdWVyeVdyYXBwZXJGaWx0ZXIodmlzaWJpbGl0eUZpbHRlcikpKTsKPiA+ID4gICAgICAgICAg
ICAgICAgdG90YWwgPSBoaXRzLmxlbmd0aCgpOwo+ID4gPgo+ID4gPgo+ID4gPgo+ID4gPiBJIHVu
ZGVyc3RhbmQgdGhhdCBMdWNlbmUgc2hvdWxkIGJlIGFibGUgdG8gaGFuZGxlIHZlcnkgbGFyZ2Ug
ZGF0YXNldHMsCj4gc28KPiA+ID4gSSdkIGJlIHN1cnByaXNlZCBpZiB0aGlzIHdlcmUgYW4gYWN0
dWFsIEx1Y2VuZSBidWcuICBJJ20gaG9waW5nIGl0J3MKPiBqdXN0Cj4gPiA+IHRoYXQgSSdtIGRv
aW5nIHNvbWV0aGluZyAid3JvbmciIHdoaWNoIGhhcyBnb25lIHVubm90aWNlZCBzbyBmYXIgZm9y
Cj4gPiBzZXZlcmFsCj4gPiA+IG1vbnRocyBiZWNhdXNlIHdlJ3ZlIG5ldmVyIGhhZCBhbiBpbmRl
eCB0aGlzIGxhcmdlLgo+ID4gPgo+ID4gPiBXZSdyZSB1c2luZyBsdWNlbmUgdmVyaXNvbiAyLjIu
MC4KPiA+ID4KPiA+ID4gVGhhbmtzIQo+ID4gPgo+ID4gPiBKdXN0aW4gR3J1bmF1Cj4gPiA+Cj4g
PiA+Cj4gPiA+Cj4gPiA+Cj4gPiA+Cj4gPiA+Cj4gPiA+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+ID4gPiBUbyB1
bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5v
cmcKPiA+ID4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBA
bHVjZW5lLmFwYWNoZS5vcmcKPiA+ID4KPiA+ID4KPiA+Cj4gPgo+ID4gLS0KPiA+IEJlc3RzIHJl
Z2FyZHMsCj4gPiBMZW9uaWQgTWFzbG92IQo+ID4gUGVyc29uYWwgYmxvZzogaHR0cDovL2xlb25h
cmRpbml1cy5ibG9nc3BvdC5jb20vCj4gPgo+ID4gUmFuZG9tIHRob3VnaHQ6Cj4gPiBQcmluY2Vz
cyBNYXJnYXJldCAgLSAiSSBoYXZlIGFzIG11Y2ggcHJpdmFjeSBhcyBhIGdvbGRmaXNoIGluIGEg
Ym93bC4iCj4gPgo+ID4KPiA+Cj4gPgo+ID4KPiA+Cj4gPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiA+IFRvIHVu
c3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9y
Zwo+ID4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVj
ZW5lLmFwYWNoZS5vcmcKPiA+Cj4gPgo+CgoKCi0tIApTb3JyeSBmb3IgbXkgZW5nbGlzdCEhIOaY
jgo=
------=_Part_54540_21208578.1220752478457--

From java-user-return-35978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 07 05:36:05 2008
Return-Path: <java-user-return-35978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93761 invoked from network); 7 Sep 2008 05:36:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Sep 2008 05:36:05 -0000
Received: (qmail 11336 invoked by uid 500); 7 Sep 2008 05:35:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10854 invoked by uid 500); 7 Sep 2008 05:35:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10843 invoked by uid 99); 7 Sep 2008 05:35:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Sep 2008 22:35:55 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 209.85.200.171 as permitted sender)
Received: from [209.85.200.171] (HELO wf-out-1314.google.com) (209.85.200.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Sep 2008 05:34:56 +0000
Received: by wf-out-1314.google.com with SMTP id 28so1325629wfc.20
        for <java-user@lucene.apache.org>; Sat, 06 Sep 2008 22:35:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=gI24irvHGOwcj3qvy0urzFfcsDHeD9T2ROEUxEdMroE=;
        b=nXf9jMrzUMoxbrnKt3D9iPuQeDvwcA2rsdUkD4tsB+Mj00Cbp/rISIm3PCIIUoZjUr
         dijiZ8qakfyHAVZ84Eiw40WYmijStVJoV1NxvpZYfHBRN2up8qJAbvLZgCJ07iw7ssFm
         sj3ef3BiGitgP3Joih1u6J5OLIbDugP1r7P4Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=DxfR4iOoV+XkU6dgEP7lgYoaPI7K2xbNfEdVY/ihmCZ43RlPl0yO2lhpC2eRuZdfgi
         1eo34wrgiz/fEdMSFA7Ewfcnt7lnOausfW8FY8ezN5tA7CT5v9AuhYViyJZCbNGyjh0r
         O+4CDjXEdXlvF4Yz8JW7cn4qpimAJcxfTDN9w=
Received: by 10.142.223.4 with SMTP id v4mr4716208wfg.48.1220765716890;
        Sat, 06 Sep 2008 22:35:16 -0700 (PDT)
Received: by 10.142.111.8 with HTTP; Sat, 6 Sep 2008 22:35:16 -0700 (PDT)
Message-ID: <6e3ae6310809062235y24ecc40k2ef7b97bafc56641@mail.gmail.com>
Date: Sat, 6 Sep 2008 22:35:16 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: memory leak during Lucene Search
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_82239_13605864.1220765716873"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_82239_13605864.1220765716873
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Unless my understanding is wrong, there is a memory leak for Lucene search
from Lucene-1195.(svn r659602, May23,2008)

This patch brings in a ThreadLocal cache to TermInfosReader.

It's usually recommended to keep the reader open, and reuse it when
possible. In a common J2EE application, the http requests are usually
handled by different threads. But since the cache is ThreadLocal, the cache
are not really usable by other threads. What's worse, the cache can not be
cleared by another thread!

This leak is not so obvious usually. But my case is using RAMDirectory,
having several hundred megabytes. So one un-released resource is obvious to
me.

Here is the reference tree:
org.apache.lucene.store.RAMDirectory
  |- directory of org.apache.lucene.store.RAMFile
      |- file of org.apache.lucene.store.RAMInputStream
          |- base of org.apache.lucene.index.CompoundFileReader$CSIndexInput
              |- input of org.apache.lucene.index.SegmentTermEnum
                  |- value of java.lang.ThreadLocal$ThreadLocalMap$Entry


After I switched back to svn revision 659601, right before this patch is
checked in, the memory leak is gone.
Although my case is RAMDirectory, I believe this will affect disk based
index also.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!

------=_Part_82239_13605864.1220765716873--

From java-user-return-35979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 07 06:09:24 2008
Return-Path: <java-user-return-35979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7297 invoked from network); 7 Sep 2008 06:09:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Sep 2008 06:09:24 -0000
Received: (qmail 22141 invoked by uid 500); 7 Sep 2008 06:09:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22109 invoked by uid 500); 7 Sep 2008 06:09:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22098 invoked by uid 99); 7 Sep 2008 06:09:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Sep 2008 23:09:16 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sdzhouxinxin@gmail.com designates 72.14.204.226 as permitted sender)
Received: from [72.14.204.226] (HELO qb-out-0506.google.com) (72.14.204.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Sep 2008 06:08:18 +0000
Received: by qb-out-0506.google.com with SMTP id e6so1876096qbe.27
        for <java-user@lucene.apache.org>; Sat, 06 Sep 2008 23:08:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=E5W/vHun4lCVfh/7ZjbU/zRAac8MXLwO4GL3dW382wg=;
        b=JAmy70//rgVbdzvNvcDRKRTZU829bAtY0gBgKCwpMyflFQt4hMtGXRmKdrjWBmeVnz
         7C4Nz6STbUElonNwekbl8AUPoBDQF5N2q6TOMeqMnF4myn6n6tPvDnkmIQwaC+i+z+yT
         dIzoTknevj4S3QC/y4NlprtiJ2AEgIlykDWPM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=qcRusJGP89SpgrMlGfqHjzusoVyuZH3Tq5lBSWEwkDI9QnBvuPS5ALKmsFNo1A3RI1
         TigXGe5hoR+uQt4pgy2y3TrmfMaLmT5xWzV5m07WCudhsloDpauy+OD69TkgZkE8opIH
         0koA/kwwwcHFYiW3HPQg3qTB5hRxRPYTEavnk=
Received: by 10.86.52.6 with SMTP id z6mr10162531fgz.18.1220767719272;
        Sat, 06 Sep 2008 23:08:39 -0700 (PDT)
Received: by 10.86.29.4 with HTTP; Sat, 6 Sep 2008 23:08:39 -0700 (PDT)
Message-ID: <b07cb2360809062308w418325aap8f8d5c7cafc480c5@mail.gmail.com>
Date: Sun, 7 Sep 2008 14:08:39 +0800
From: "xinxin zhou" <sdzhouxinxin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching in multiple indices
In-Reply-To: <9233ccac0809060635s517f2859ma1e524129b33561d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_55411_11554949.1220767719256"
References: <aa12778e0809060253h22708712n1b2edeaf21a65133@mail.gmail.com>
	 <9233ccac0809060635s517f2859ma1e524129b33561d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_55411_11554949.1220767719256
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: base64
Content-Disposition: inline

MjAwOC85LzYg0rbLq8P3IDx5ZXNodWFuZ21pbmdAZ21haWwuY29tPgoKPiBJbiBteSBvcGluaW9u
LCB5b3UgY2FuIHVzZSBNdWx0aVNlYXJjaGVyLCBvciBpZiB0aGVyZSBpc24ndCBodWdlIGRhdGEK
PiBpbiBpbmRleCwgeW91IGNhbiBwdXQgdGhlbSBpbiBvbmUgaW5kZXgsIG5vIG1hdHRlciB0aGUg
ZmllbGRzIGluCj4gaW5kaWNlcyBhcmUgbm90IHRoZSBzYW1lLiBZb3UgY2FuIGdldCBEb2NvdW1l
bnQgbWF0Y2ggeW91ciBxdWVyeSwgYnV0Cj4gSSB0aGluaywgeW91IHdpbGwgdGhpbmsgYWJvdXQg
dGhlIHF1ZXJ5IHRoYXQgeW91IHdhbnQgdG8gcHV0IGludG8gdGhlCj4gSW5kZXhTZWFyY2hlci4K
Pgo+Cj4KPgpJIHRoaW5rINK2y6vD9yBpcyByaWdodKGjCkJvb2xlYW5RdWVyeSBhbmQgTXVsdGlG
aWVsZFF1ZXJ5IG1heSBoZWxwoaMK
------=_Part_55411_11554949.1220767719256--

From java-user-return-35980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 08 02:10:45 2008
Return-Path: <java-user-return-35980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14223 invoked from network); 8 Sep 2008 02:10:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Sep 2008 02:10:45 -0000
Received: (qmail 26593 invoked by uid 500); 8 Sep 2008 02:10:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26554 invoked by uid 500); 8 Sep 2008 02:10:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26543 invoked by uid 99); 8 Sep 2008 02:10:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Sep 2008 19:10:35 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of need4spd@gmail.com designates 209.85.128.189 as permitted sender)
Received: from [209.85.128.189] (HELO fk-out-0910.google.com) (209.85.128.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Sep 2008 02:09:35 +0000
Received: by fk-out-0910.google.com with SMTP id 18so957363fkq.5
        for <java-user@lucene.apache.org>; Sun, 07 Sep 2008 19:10:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=4955BRct/g37KvLh9lkiCdx9gknhiQ3JQS9l0RPZQpY=;
        b=OcA6Tw2T94aFalRNnFLe+2Qm83jHFdGedg3JJodcYYbvmx2cVQIrAduJksdA92nvny
         +a0E3w4knWw2xMU8syhpaGKWW9Xox6Jt/JTMLPHZX9jfcyoXl4svZb6FL8ZdPqw22krk
         O/WwmYgGOpoEU+tv6Z5bOcGtWP4Z2Z4nW5GSc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=c8/Q7Sy3ykhNrfcF5lcX2iud/LwTmfT7489Nx8ZaZMkscky7rXn663cAnjRdPsgXhv
         4u+Gpf0Qvn1tdd1RveRzq99IJ7myv+EuBtnyqw6yx0SbNlAgsKnC+JCc3HQtQCVJb5KU
         OjcjPkAWDSlSKHlGQkyMLPBhOGKInJ/IKR5J4=
Received: by 10.180.246.2 with SMTP id t2mr10592471bkh.25.1220839805028;
        Sun, 07 Sep 2008 19:10:05 -0700 (PDT)
Received: by 10.180.247.13 with HTTP; Sun, 7 Sep 2008 19:10:04 -0700 (PDT)
Message-ID: <a823853a0809071910p55e75b61t24573a6832e070f7@mail.gmail.com>
Date: Mon, 8 Sep 2008 11:10:04 +0900
From: "=?EUC-KR?B?wOW/67yu?=" <need4spd@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Memory Leak
In-Reply-To: <19333985.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_832_16774351.1220839804974"
References: <19276999.post@talk.nabble.com>
	 <a823853a0809021812r4e8c3972g32531c311af21609@mail.gmail.com>
	 <19294053.post@talk.nabble.com>
	 <a823853a0809031804q38058d0ekcedc5f5d45f04307@mail.gmail.com>
	 <19333985.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_832_16774351.1220839804974
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: base64
Content-Disposition: inline

SGkuLiA6KQoKSSBzYXcgeW91ciBjb2RlLgpZb3VyIGZyZWUgbWVtb3J5IHNsb3dseSBiZWNvbWVz
IHNtYWxsZXIgYW5kIHN0YXJ0IGdjPyBvciBvdXQgb2YgbWVtb3J5CmV4Y2VwdGlvbj8KCkRlY2xh
cmUgdmFyaWFibGUgaW4gbWV0aG9kIHVzZSBqdm0ncyBtZW1vcnkgc21hbGwsIGFuZCBhZnRlciBm
aW5pc2ggdGhlCm1ldGhvZCBpdCBiZWNvbWVzIHRhcmdldCBvZiBnYy4KKGV4YW1wbGUgLAogICAg
ICAgRGlyZWN0b3J5IGRpcmVjdG9yeSA9IG51bGw7CiAgICAgICBRdWVyeSBxdWVyeSA9IG51bGw7
CiAgICAgICBRdWVyeVBhcnNlciBwYXJzZXIgPSBudWxsOwopCgpUaGF0J3MganVzdCBhIGd1ZXNz
Li46LSkKCgoyMDA4LzkvNiwgQW5keTMzIDxjbGV2ZXJfb25lM0B5YWhvby5jb20+Ogo+Cj4KPiBJ
ZiBJIGRvbid0IGtlZXAgdGhlIEluZGV4U2VhcmNoZXIgYXMgYSBTaW5nbGV0b24gYW5kIGluc3Rl
YWQgb3BlbiBhbmQgY2xvc2UKPiBhCj4gbmV3IG9uZSBlYWNoIHRpbWUsIEkgaGF2ZSBhIGxhcmdl
IG1lbW9yeSBsZWFrIChwcm9iYWJseSBkdWUgdG8gdGhlIGxhcmdlCj4gcXVlcmllcyBJIGFtIGRv
aW5nKS4gQWZ0ZXIgd2F0Y2hpbmcgdGhlIG1lbW9yeSBhIHdoaWxlLCBJIHN0aWxsIGJlbGlldmUg
SQo+IGhhdmUgYSBzbWFsbCBtZW1vcnkgbGVhayBldmVuIHdoZW4gdGhlIERpcmVjdG9yeSwgQW5h
bHl6ZXIsIGFuZAo+IEluZGV4U2VhcmNoZXIgYXJlIFNpbmdsZXRvbnMuIE15IGZyZWUgbWVtb3J5
IHNsb3dseSBiZWNvbWVzIHNtYWxsZXIgYWZ0ZXIKPiBlYWNoIHF1ZXJ5LiBBbnkgaWRlYXMgb24g
d2hhdCB0aGF0IG1heSBiZSBkdWUgdG8/Cj4KPiBIZXJlJ3MgbXkgdXBkYXRlZCBjb2RlLi4uCj4K
PiBwcml2YXRlIHN5bmNocm9uaXplZCBIaXRzIGRvUXVlcnkoU3RyaW5nIGZpZWxkLCBTdHJpbmcg
cXVlcnlTdHIsIFNvcnQKPiBzb3J0T3JkZXIsIFN0cmluZyBpbmRleERpcmVjdG9yeSkgdGhyb3dz
IEV4Y2VwdGlvbgo+ICAgIHsKPiAgICAgICAgRGlyZWN0b3J5IGRpcmVjdG9yeSA9IG51bGw7Cj4g
ICAgICAgIFF1ZXJ5IHF1ZXJ5ID0gbnVsbDsKPiAgICAgICAgUXVlcnlQYXJzZXIgcGFyc2VyID0g
bnVsbDsKPgo+ICAgICAgICB0cnkKPiAgICAgICAgewo+ICAgICAgICAgICAgZGlyZWN0b3J5ID0g
RGlyZWN0b3J5U2luZ2xldG9uLmdldEluc3RhbmNlKGluZGV4RGlyZWN0b3J5KTsKPiAgICAgICAg
ICAgIGl2SW5kZXhTZWFyY2hlciA9IChJbmRleFNlYXJjaGVyKQo+IFNlYXJjaGVyU2luZ2xldG9u
LmdldEluc3RhbmNlKGRpcmVjdG9yeSk7Cj4KPiAgICAgICAgICAgIC8vc2VhcmNoIHRoZSBpbmRl
eAo+ICAgICAgICAgICAgcGFyc2VyID0gbmV3IFF1ZXJ5UGFyc2VyKGZpZWxkLAo+IEFuYWx5emVy
U2luZ2xldG9uLmdldEluc3RhbmNlKCkpOwo+ICAgICAgICAgICAgcXVlcnkgPSBwYXJzZXIucGFy
c2UocXVlcnlTdHIpOwo+Cj4gICAgICAgICAgICByZXR1cm4gaXZJbmRleFNlYXJjaGVyLnNlYXJj
aChxdWVyeSwgc29ydE9yZGVyKTsKPiAgICAgICAgfQo+ICAgICAgICBmaW5hbGx5Cj4gICAgICAg
IHsKPiAgICAgICAgICAgIGlmKG51bGwgIT0gZGlyZWN0b3J5KQo+ICAgICAgICAgICAgewo+ICAg
ICAgICAgICAgICAgIGRpcmVjdG9yeS5jbG9zZSgpOwo+ICAgICAgICAgICAgfQo+Cj4gICAgICAg
ICAgICBkaXJlY3RvcnkgPSBudWxsOwo+ICAgICAgICAgICAgcGFyc2VyID0gbnVsbDsKPiAgICAg
ICAgICAgIHF1ZXJ5ID0gbnVsbDsKPiAgICAgICAgfQo+ICAgIH0KPgo+Cj4gLS0tLS0tLS0tLS0t
LS0KPiBFeGFtcGxlIFNpbmdsZXRvbgo+Cj4gcHVibGljIGNsYXNzIFNlYXJjaGVyU2luZ2xldG9u
Cj4gewo+ICAgIHByaXZhdGUgc3RhdGljIHZvbGF0aWxlIEhhc2hNYXA8RGlyZWN0b3J5LCBTZWFy
Y2hlcj4gY3ZTZWFyY2hlcyA9IG5ldwo+IEhhc2hNYXA8RGlyZWN0b3J5LCBTZWFyY2hlcj4oKTsK
Pgo+Cj4gICAgcHJvdGVjdGVkIFNlYXJjaGVyU2luZ2xldG9uKCkKPiAgICB7Cj4KPiAgICB9Cj4K
Pgo+ICAgIHB1YmxpYyBzdGF0aWMgU2VhcmNoZXIgZ2V0SW5zdGFuY2UoRGlyZWN0b3J5IGRpcmVj
dG9yeSkgdGhyb3dzCj4gSU9FeGNlcHRpb24KPiAgICB7Cj4gICAgICAgIGlmKCFjdlNlYXJjaGVz
LmNvbnRhaW5zS2V5KGRpcmVjdG9yeSkpCj4gICAgICAgIHsKPiAgICAgICAgICAgIHN5bmNocm9u
aXplZChTZWFyY2hlclNpbmdsZXRvbi5jbGFzcykKPiAgICAgICAgICAgIHsKPiAgICAgICAgICAg
ICAgICBpZighY3ZTZWFyY2hlcy5jb250YWluc0tleShkaXJlY3RvcnkpKQo+ICAgICAgICAgICAg
ICAgIHsKPiAgICAgICAgICAgICAgICAgICAgY3ZTZWFyY2hlcy5wdXQoZGlyZWN0b3J5LCBuZXcg
SW5kZXhTZWFyY2hlcihkaXJlY3RvcnkpKTsKPiAgICAgICAgICAgICAgICB9Cj4gICAgICAgICAg
ICB9Cj4gICAgICAgIH0KPgo+ICAgICAgICByZXR1cm4gY3ZTZWFyY2hlcy5nZXQoZGlyZWN0b3J5
KTsKPiAgICB9Cj4KPiB9Cj4KPgo+Cj4gwOW/67yuIHdyb3RlOgo+ID4KPiA+IEluIGZhY3QsIEkg
dGhpbmsgdGhhdCB0aGUgaW1wb3J0YW50IHJlYXNvbnMgYXJlIERpcmVjdG9yeSBjbGFzcyBhbmQK
PiA+IEFuYWx5emVyCj4gPiBjbGFzcy4KPiA+IElmIHlvdSBkb24ndCB3YW50IEluZGV4U2VhcmNo
ZXIgY2xhc3Mga2VlcCBvcGVuIGZvciB0aGUgZW50aXJlIGxpZmUgb2YgYQo+ID4gd2ViCj4gPiBh
cHBsaWNhdGlvbiwgeW91IGNhbiBkbyBpdC4KPiA+IEkgdGhpbmsgSXQgd2lsbCBub3QgY2F1c2Ug
bWVtb3J5IGxlYWsgcHJvYmxlbS4KPiA+IEJ1dCwgRGlyZWN0b3J5IGFuZCBBbmFseXplciBjbGFz
c2VzIGNhbiBjYXVzZSB0aGUgcHJvYmxlbSBpZiB0aGV5IG5ldwo+ID4gY3JlYXRlZCBieSBtZXRo
b2QgY2FsbCBldmVyeSB0aW1lLiBJIHRoaW5rLi4uCj4gPiBPbmx5IGtlZXAgdHdvIGNsYXNzZXMg
RGlyZWN0b3J5IGFuZCBBbmFseXplciBieSBzaW5nbHRvbiBhbmQgZG8gdGVzdC4gOikKPiA+Cj4g
Pgo+Cj4gLS0KPiBWaWV3IHRoaXMgbWVzc2FnZSBpbiBjb250ZXh0Ogo+IGh0dHA6Ly93d3cubmFi
YmxlLmNvbS9MdWNlbmUtTWVtb3J5LUxlYWstdHAxOTI3Njk5OXAxOTMzMzk4NS5odG1sCj4gU2Vu
dCBmcm9tIHRoZSBMdWNlbmUgLSBKYXZhIFVzZXJzIG1haWxpbmcgbGlzdCBhcmNoaXZlIGF0IE5h
YmJsZS5jb20uCj4KPgo+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGph
dmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+IEZvciBhZGRpdGlvbmFsIGNv
bW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4KPgoKCi0t
IApERVa/673ECmh0dHA6Ly9kZXZ5b25nc2lrLnRpc3RvcnkuY29tCg==
------=_Part_832_16774351.1220839804974--

From java-user-return-35981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 08 04:44:11 2008
Return-Path: <java-user-return-35981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5002 invoked from network); 8 Sep 2008 04:44:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Sep 2008 04:44:11 -0000
Received: (qmail 1591 invoked by uid 500); 8 Sep 2008 04:44:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1561 invoked by uid 500); 8 Sep 2008 04:44:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1550 invoked by uid 99); 8 Sep 2008 04:44:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Sep 2008 21:44:02 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.239] (HELO wr-out-0506.google.com) (64.233.184.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Sep 2008 04:43:02 +0000
Received: by wr-out-0506.google.com with SMTP id c30so1630281wra.21
        for <java-user@lucene.apache.org>; Sun, 07 Sep 2008 21:43:32 -0700 (PDT)
Received: by 10.90.92.14 with SMTP id p14mr18563045agb.26.1220849012416;
        Sun, 07 Sep 2008 21:43:32 -0700 (PDT)
Received: by 10.90.71.13 with HTTP; Sun, 7 Sep 2008 21:43:32 -0700 (PDT)
Message-ID: <7e536b1f0809072143h79730af3u40c019e837d87d99@mail.gmail.com>
Date: Mon, 8 Sep 2008 06:43:32 +0200
From: "Marcus Herou" <marcus.herou@tailsweep.com>
To: java-user@lucene.apache.org, solr-user@lucene.apache.org
Subject: Haloe (Lucene package) released!
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_104781_10809684.1220849012409"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_104781_10809684.1220849012409
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi guys.

Glad to announce that I finally managed to move this package out of the
company code and released it to the OS community. The package contains some
neat classes which we use for instance when indexing and searching through
some hundred thousands of blogs and the ShardedSolrDocumentIndexer will be
used frequently now when we will index the entire Blogosphere.

Check it out at http://dev.tailsweep.com

Kindly

//Marcus

------=_Part_104781_10809684.1220849012409--

From java-user-return-35982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 08 17:29:04 2008
Return-Path: <java-user-return-35982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50873 invoked from network); 8 Sep 2008 17:29:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Sep 2008 17:29:04 -0000
Received: (qmail 32725 invoked by uid 500); 8 Sep 2008 17:28:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32689 invoked by uid 500); 8 Sep 2008 17:28:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32678 invoked by uid 99); 8 Sep 2008 17:28:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Sep 2008 10:28:54 -0700
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [65.113.40.141] (HELO smtp-outbound-1.vmware.com) (65.113.40.141)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Sep 2008 17:27:56 +0000
Received: from mailhost2.vmware.com (mailhost2.vmware.com [10.16.64.160])
	by smtp-outbound-1.vmware.com (Postfix) with ESMTP id 03F4F678E
	for <java-user@lucene.apache.org>; Mon,  8 Sep 2008 10:28:27 -0700 (PDT)
Received: from pa-excaht04.vmware.com (pa-excaht04.vmware.com [10.113.81.155])
	by mailhost2.vmware.com (Postfix) with ESMTP id DDB998E5C5
	for <java-user@lucene.apache.org>; Mon,  8 Sep 2008 10:28:26 -0700 (PDT)
Received: from pa-excaht11.vmware.com (10.113.81.197) by
 pa-excaht04.vmware.com (10.113.81.155) with Microsoft SMTP Server (TLS) id
 8.1.263.0; Mon, 8 Sep 2008 10:28:26 -0700
Received: from PA-EXMBX14.vmware.com ([10.113.81.216]) by
 pa-excaht11.vmware.com ([10.113.81.197]) with mapi; Mon, 8 Sep 2008 10:28:26
 -0700
From: Joseph Kovacic <jkovacic@vmware.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Date: Mon, 8 Sep 2008 10:28:26 -0700
Subject: C++ Bindings for Lucene?
Thread-Topic: C++ Bindings for Lucene?
Thread-Index: AckR2Exm/20uCF7ySkuBYNsMI3feYA==
Message-ID: <09B97D2C4B49DF409E2D018999AC6FE115B434976A@PA-EXMBX14.vmware.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_09B97D2C4B49DF409E2D018999AC6FE115B434976APAEXMBX14vmwa_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_09B97D2C4B49DF409E2D018999AC6FE115B434976APAEXMBX14vmwa_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hello Everyone,

I apologize if this question has been answered before or exists somewhere i=
n the documents, but I was unable to find it. Our company uses the standard=
 Java implementation of Lucene. I am writing a program in C++ and was wonde=
ring if there are any C++ bindings to search a Java Lucene Index? Alternati=
vely, does CLucene work properly when accessing a Java Lucene Index? Also, =
if there are any C++ Lucene Search coding examples you are aware of, I woul=
d greatly appreciate it.

Thank you very much,
Joe

--_000_09B97D2C4B49DF409E2D018999AC6FE115B434976APAEXMBX14vmwa_--

From java-user-return-35983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 08 17:42:48 2008
Return-Path: <java-user-return-35983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60273 invoked from network); 8 Sep 2008 17:42:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Sep 2008 17:42:48 -0000
Received: (qmail 60177 invoked by uid 500); 8 Sep 2008 17:42:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60148 invoked by uid 500); 8 Sep 2008 17:42:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60137 invoked by uid 99); 8 Sep 2008 17:42:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Sep 2008 10:42:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of petite_abeille@mac.com designates 17.148.16.86 as permitted sender)
Received: from [17.148.16.86] (HELO asmtpout011.mac.com) (17.148.16.86)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Sep 2008 17:41:38 +0000
MIME-version: 1.0
Content-type: text/plain; charset=WINDOWS-1252; format=flowed; delsp=yes
Received: from [192.168.1.3] ([89.217.19.110])
 by asmtp011.mac.com (Sun Java(tm) System Messaging Server 6.3-7.03 (built Aug
 7 2008; 32bit)) with ESMTPSA id <0K6W009HL0ZWPR05@asmtp011.mac.com> for
 java-user@lucene.apache.org; Mon, 08 Sep 2008 10:38:23 -0700 (PDT)
Message-id: <9BD56F35-2521-4A6A-BDF5-9D363E2764E7@mac.com>
From: Petite Abeille <petite_abeille@mac.com>
To: java-user@lucene.apache.org
In-reply-to: <7e536b1f0809072143h79730af3u40c019e837d87d99@mail.gmail.com>
Content-transfer-encoding: quoted-printable
Subject: Re: Haloe (Lucene package) released!
Date: Mon, 08 Sep 2008 19:38:19 +0200
References: <7e536b1f0809072143h79730af3u40c019e837d87d99@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


On Sep 8, 2008, at 6:43 AM, Marcus Herou wrote:

> the ShardedSolrDocumentIndexer will be
> used frequently now when we will index the entire Blogosphere.

Yes, you will indeed need all the help you can muster! :)

blogosphere, noun
An poisonous environment of methane, self-satisfaction and other hot =20
gasses.
=93The only creatures that can survive in the blogosphere are low-order =20=

molds, able to feed off the waste of others.=94

http://www.eod.com/devil/archive/blogosphere.html

--
PA.
http://alt.textdrive.com/nanoki/




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 08 17:50:35 2008
Return-Path: <java-user-return-35984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66123 invoked from network); 8 Sep 2008 17:50:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Sep 2008 17:50:35 -0000
Received: (qmail 77681 invoked by uid 500); 8 Sep 2008 17:50:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77642 invoked by uid 500); 8 Sep 2008 17:50:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77631 invoked by uid 99); 8 Sep 2008 17:50:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Sep 2008 10:50:25 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=FUZZY_CPILL,HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Sep 2008 17:49:24 +0000
Received: by gxk6 with SMTP id 6so1569781gxk.5
        for <java-user@lucene.apache.org>; Mon, 08 Sep 2008 10:49:54 -0700 (PDT)
Received: by 10.151.111.1 with SMTP id o1mr6688024ybm.187.1220896193236;
        Mon, 08 Sep 2008 10:49:53 -0700 (PDT)
Received: by 10.151.141.17 with HTTP; Mon, 8 Sep 2008 10:49:53 -0700 (PDT)
Message-ID: <7e536b1f0809081049g7527a7f6t7882b0c374a050ca@mail.gmail.com>
Date: Mon, 8 Sep 2008 19:49:53 +0200
From: "Marcus Herou" <marcus.herou@tailsweep.com>
To: java-user@lucene.apache.org
Subject: Re: Haloe (Lucene package) released!
In-Reply-To: <9BD56F35-2521-4A6A-BDF5-9D363E2764E7@mac.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5541_22182703.1220896193234"
References: <7e536b1f0809072143h79730af3u40c019e837d87d99@mail.gmail.com>
	 <9BD56F35-2521-4A6A-BDF5-9D363E2764E7@mac.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5541_22182703.1220896193234
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

:) Whoof so much high quality info and at the same time a huge amount of
useless data, splogs and spam.

/M

On Mon, Sep 8, 2008 at 7:38 PM, Petite Abeille <petite_abeille@mac.com>wrote:

>
> On Sep 8, 2008, at 6:43 AM, Marcus Herou wrote:
>
>  the ShardedSolrDocumentIndexer will be
>> used frequently now when we will index the entire Blogosphere.
>>
>
> Yes, you will indeed need all the help you can muster! :)
>
> blogosphere, noun
> An poisonous environment of methane, self-satisfaction and other hot
> gasses.
> "The only creatures that can survive in the blogosphere are low-order
> molds, able to feed off the waste of others."
>
> http://www.eod.com/devil/archive/blogosphere.html
>
> --
> PA.
> http://alt.textdrive.com/nanoki/
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Marcus Herou CTO and co-founder Tailsweep AB
+46702561312
marcus.herou@tailsweep.com
http://www.tailsweep.com/
http://blogg.tailsweep.com/

------=_Part_5541_22182703.1220896193234--

From java-user-return-35985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 08 18:34:56 2008
Return-Path: <java-user-return-35985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97907 invoked from network); 8 Sep 2008 18:34:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Sep 2008 18:34:56 -0000
Received: (qmail 65133 invoked by uid 500); 8 Sep 2008 18:34:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65094 invoked by uid 500); 8 Sep 2008 18:34:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65074 invoked by uid 99); 8 Sep 2008 18:34:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Sep 2008 11:34:36 -0700
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of petite_abeille@mac.com designates 17.148.16.86 as permitted sender)
Received: from [17.148.16.86] (HELO asmtpout011.mac.com) (17.148.16.86)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Sep 2008 18:33:34 +0000
MIME-version: 1.0
Content-type: text/plain; charset=WINDOWS-1252; format=flowed; delsp=yes
Received: from [192.168.1.3] ([89.217.19.110])
 by asmtp011.mac.com (Sun Java(tm) System Messaging Server 6.3-7.03 (built Aug
 7 2008; 32bit)) with ESMTPSA id <0K6W00LT83KRLIM0@asmtp011.mac.com> for
 java-user@lucene.apache.org; Mon, 08 Sep 2008 11:34:05 -0700 (PDT)
Message-id: <2D00B7AE-6732-43E0-8FF4-0267DADA882C@mac.com>
From: Petite Abeille <petite_abeille@mac.com>
To: java-user@lucene.apache.org
In-reply-to: <7e536b1f0809081049g7527a7f6t7882b0c374a050ca@mail.gmail.com>
Content-transfer-encoding: quoted-printable
Subject: Re: Haloe (Lucene package) released!
Date: Mon, 08 Sep 2008 20:34:02 +0200
References: <7e536b1f0809072143h79730af3u40c019e837d87d99@mail.gmail.com>
 <9BD56F35-2521-4A6A-BDF5-9D363E2764E7@mac.com>
 <7e536b1f0809081049g7527a7f6t7882b0c374a050ca@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


On Sep 8, 2008, at 7:49 PM, Marcus Herou wrote:

> :) Whoof so much high quality info and at the same time a huge =20
> amount of useless data, splogs and spam.

Incidentally, if you search needs are humbler and do not require the =20
full fire power of mighty Lucene, SQLite provides a very handy Full =20
Text Search (FTS) module:

http://www.sqlite.org/cvstrac/wiki?p=3DFtsUsage

Rather straightforward to use as well:

(1) Create a table

     create virtual table document using fts3
     (
         name,
         content,
         tokenize porter
     )

(2) Populate it

     insert into document( name, content ) values( %s, %s )

(3) Search it

     select      document.name as name,
                 snippet( document, '<i>', '</i>', '=85' ) as extract
     from        document
     where       document.content match %s

Here is an example of FTS at work:

http://svr225.stepx.com:3388/search?q=3Dblog

Cheers,

--
PA.
http://alt.textdrive.com/nanoki/







---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 08 20:08:13 2008
Return-Path: <java-user-return-35986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77069 invoked from network); 8 Sep 2008 20:08:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Sep 2008 20:08:13 -0000
Received: (qmail 2702 invoked by uid 500); 8 Sep 2008 20:08:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2664 invoked by uid 500); 8 Sep 2008 20:08:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2651 invoked by uid 99); 8 Sep 2008 20:08:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Sep 2008 13:08:03 -0700
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sunyuant@cn.ibm.com designates 202.81.18.172 as permitted sender)
Received: from [202.81.18.172] (HELO e23smtp03.au.ibm.com) (202.81.18.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Sep 2008 20:07:03 +0000
Received: from d23relay03.au.ibm.com (d23relay03.au.ibm.com [202.81.18.234])
	by e23smtp03.au.ibm.com (8.13.1/8.13.1) with ESMTP id m88K05Zv025696
	for <java-user@lucene.apache.org>; Tue, 9 Sep 2008 06:00:05 +1000
Received: from d23av01.au.ibm.com (d23av01.au.ibm.com [9.190.234.96])
	by d23relay03.au.ibm.com (8.13.8/8.13.8/NCO v9.0) with ESMTP id m88K0xEQ4407368
	for <java-user@lucene.apache.org>; Tue, 9 Sep 2008 06:01:14 +1000
Received: from d23av01.au.ibm.com (loopback [127.0.0.1])
	by d23av01.au.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id m88K0xjG011151
	for <java-user@lucene.apache.org>; Tue, 9 Sep 2008 06:00:59 +1000
Received: from d23m0018.cn.ibm.com (d23m0018.cn.ibm.com [9.181.32.113])
	by d23av01.au.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id m88K0wm5011148
	for <java-user@lucene.apache.org>; Tue, 9 Sep 2008 06:00:58 +1000
Subject: Yuan Tao Sun is out of the office.
From: Yuan Tao Sun <sunyuant@cn.ibm.com>
To: java-user@lucene.apache.org
Message-ID: <OFFB7CFD8D.3B6C6180-ON482574BE.006E1234-482574BE.006E1234@cn.ibm.com>
Date: Tue, 9 Sep 2008 04:02:16 +0800
X-MIMETrack: Serialize by Router on d23m0018/23/M/IBM(Release 7.0.2FP2HF300 | September
 14, 2007) at 09/09/2008 04:02:17
MIME-Version: 1.0
Content-type: multipart/alternative; 
	Boundary="0__=C7BBFE2DDFFD94A48f9e8a93df938690918cC7BBFE2DDFFD94A4"
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

--0__=C7BBFE2DDFFD94A48f9e8a93df938690918cC7BBFE2DDFFD94A4
Content-type: text/plain; charset=US-ASCII

I will be out of the office starting  2008-09-09 and will not return until
2008-09-10.

You can reach me directly by calling 13764128588
--0__=C7BBFE2DDFFD94A48f9e8a93df938690918cC7BBFE2DDFFD94A4--


From java-user-return-35987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 08 20:09:19 2008
Return-Path: <java-user-return-35987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77440 invoked from network); 8 Sep 2008 20:09:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Sep 2008 20:09:19 -0000
Received: (qmail 5441 invoked by uid 500); 8 Sep 2008 20:09:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5409 invoked by uid 500); 8 Sep 2008 20:09:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5398 invoked by uid 99); 8 Sep 2008 20:09:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Sep 2008 13:09:10 -0700
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=FUZZY_CPILL,HTML_MESSAGE,SPF_NEUTRAL,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Sep 2008 20:08:09 +0000
Received: by gxk6 with SMTP id 6so1892577gxk.5
        for <java-user@lucene.apache.org>; Mon, 08 Sep 2008 13:08:37 -0700 (PDT)
Received: by 10.150.133.18 with SMTP id g18mr21993271ybd.3.1220904517730;
        Mon, 08 Sep 2008 13:08:37 -0700 (PDT)
Received: by 10.151.141.17 with HTTP; Mon, 8 Sep 2008 13:08:37 -0700 (PDT)
Message-ID: <7e536b1f0809081308l18b169d4t556e94cdd1dd46f@mail.gmail.com>
Date: Mon, 8 Sep 2008 22:08:37 +0200
From: "Marcus Herou" <marcus.herou@tailsweep.com>
To: java-user@lucene.apache.org
Subject: Re: Haloe (Lucene package) released!
In-Reply-To: <2D00B7AE-6732-43E0-8FF4-0267DADA882C@mac.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8216_28912164.1220904517669"
References: <7e536b1f0809072143h79730af3u40c019e837d87d99@mail.gmail.com>
	 <9BD56F35-2521-4A6A-BDF5-9D363E2764E7@mac.com>
	 <7e536b1f0809081049g7527a7f6t7882b0c374a050ca@mail.gmail.com>
	 <2D00B7AE-6732-43E0-8FF4-0267DADA882C@mac.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8216_28912164.1220904517669
Content-Type: text/plain; charset=WINDOWS-1252
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Cool. Since this project is about indexing documents (java.util.Map) in
general perhaps a SqliteDocumentIndexer could be implemented.
I am as well thinking of using HBase as an indexing system since it is
sorted by nature. And perhaps add BitMap indexing with for example FastBit.

There is no end to the possibilities, just lack of resources :)

Kindly

//Marcus

On Mon, Sep 8, 2008 at 8:34 PM, Petite Abeille <petite_abeille@mac.com>wrot=
e:

>
> On Sep 8, 2008, at 7:49 PM, Marcus Herou wrote:
>
>  :) Whoof so much high quality info and at the same time a huge amount of
>> useless data, splogs and spam.
>>
>
> Incidentally, if you search needs are humbler and do not require the full
> fire power of mighty Lucene, SQLite provides a very handy Full Text Searc=
h
> (FTS) module:
>
> http://www.sqlite.org/cvstrac/wiki?p=3DFtsUsage
>
> Rather straightforward to use as well:
>
> (1) Create a table
>
>    create virtual table document using fts3
>    (
>        name,
>        content,
>        tokenize porter
>    )
>
> (2) Populate it
>
>    insert into document( name, content ) values( %s, %s )
>
> (3) Search it
>
>    select      document.name as name,
>                snippet( document, '<i>', '</i>', '=85' ) as extract
>    from        document
>    where       document.content match %s
>
> Here is an example of FTS at work:
>
> http://svr225.stepx.com:3388/search?q=3Dblog
>
> Cheers,
>
>
> --
> PA.
> http://alt.textdrive.com/nanoki/
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Marcus Herou CTO and co-founder Tailsweep AB
+46702561312
marcus.herou@tailsweep.com
http://www.tailsweep.com/
http://blogg.tailsweep.com/

------=_Part_8216_28912164.1220904517669--

From java-user-return-35988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 08 20:39:42 2008
Return-Path: <java-user-return-35988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96485 invoked from network); 8 Sep 2008 20:39:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Sep 2008 20:39:42 -0000
Received: (qmail 43087 invoked by uid 500); 8 Sep 2008 20:39:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43062 invoked by uid 500); 8 Sep 2008 20:39:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43047 invoked by uid 99); 8 Sep 2008 20:39:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Sep 2008 13:39:32 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Sep 2008 20:38:33 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KcnVo-0000x1-ME
	for java-user@lucene.apache.org; Mon, 08 Sep 2008 13:39:04 -0700
Message-ID: <19380709.post@talk.nabble.com>
Date: Mon, 8 Sep 2008 13:39:04 -0700 (PDT)
From: "Karsten F." <karsten-lucene@fiz-technik.de>
To: java-user@lucene.apache.org
Subject: Re: Merging indexes - which is best option?
In-Reply-To: <48C0C508.7040506@teamware.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: karsten-lucene@fiz-technik.de
References: <48C0C508.7040506@teamware.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Antony,

I decided first to delete all duplicates from master(iW) and then to insert
all temporary indices(other).
Any other opinions?

Best regards
  Karsten

<code>
    public static synchronized void merge(IndexWriter iW, Directory[] other,
final String uniqueID_FieldName) throws IOException{
        final Term firstFieldTerm = new Term(uniqueID_FieldName, "");
        boolean rollback = true;
        try {
            Term[] possibleDuplicates;
            for(Directory toAddDir : other){
                IndexReader toAddIR = IndexReader.open(toAddDir);
                try{
                    int indexSize = toAddIR.numDocs();
                    possibleDuplicates = new Term[indexSize];

                    int cnt = 0;
                    TermEnum possibleDuplicateTerms =
toAddIR.terms(firstFieldTerm);
                    Term possibleDuplicateTerm =
possibleDuplicateTerms.term();
                    while(true){
                        if(possibleDuplicateTerm == null){
                            break;
                        }
                        if(possibleDuplicateTerm.field() !=
uniqueID_FieldName){
                            assert
!possibleDuplicateTerm.field().equals(uniqueID_FieldName);
                            break;
                        }
                        //assert: 
                        if(moreThenOneDocument(toAddIR,
possibleDuplicateTerm)){
                        	System.out.println( "please use then unique id
unique! " + possibleDuplicateTerm);
                        }
                        assert cnt < indexSize : "please don't use more then
one unique id for each document";
                        possibleDuplicates[cnt++]=possibleDuplicateTerm;
                        possibleDuplicateTerms.next();
                        possibleDuplicateTerm =
possibleDuplicateTerms.term();
                    }
                    if( indexSize != cnt ){
                        possibleDuplicates =
Arrays.copyOf(possibleDuplicates, cnt);
                        System.out.println("log: " + indexSize  + " != " +
cnt);
                    }
                } finally {
                    toAddIR.close();
                }
                iW.deleteDocuments(possibleDuplicates);
            }
            iW.addIndexes(other);
            rollback = false;
        } finally {
            if(rollback){
                iW.abort();
            } else {
                iW.flush();
            }
        }
    }
    public static boolean moreThenOneDocument(IndexReader iR, Term term)
throws IOException{
    	TermDocs tDoc = iR.termDocs(term);
    	if(tDoc.next()){
    		if(tDoc.next()){
    			return true;
    		}
    	}
    	return false;
    }
</code>

Antony Bowesman wrote:
> 
> I am creating several temporary batches of indexes to separate indices and 
> periodically will merge those batches to a set of master indices.  I'm
> using 
> IndexWriter#addIndexesNoOptimise(), but problem that gives me is that the
> master 
> may already contain the index for that document and I get a duplicate.
> 
> Duplicates are prevented in the temporary index, because when adding
> Documents, 
> I call IndexWriter#deleteDocuments(Term) with my UID, before I add the
> Document.
> 
> I have two choices
> 
> a) merge indexes then clean up any duplicates in the master (or vice
> versa). 
> Probably IndexWriter.deleteDocuments(Term[]) would suit here with all the
> UIDs 
> of the incoming documents.
> 
> b) iterate through the Documents in the temporary index and add them to
> the master
> 
> b sounds worse as it seems an IndexWriter's Analyzer cannot be null and I
> guess 
> there's a penalty in assembling the Document from the reader.
> 
> Any views?
> Antony
> 

-- 
View this message in context: http://www.nabble.com/Merging-indexes---which-is-best-option--tp19325185p19380709.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 08 21:26:46 2008
Return-Path: <java-user-return-35989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21905 invoked from network); 8 Sep 2008 21:26:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Sep 2008 21:26:46 -0000
Received: (qmail 5414 invoked by uid 500); 8 Sep 2008 21:26:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5390 invoked by uid 500); 8 Sep 2008 21:26:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5379 invoked by uid 99); 8 Sep 2008 21:26:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Sep 2008 14:26:36 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Sep 2008 21:25:37 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KcoFM-0002uC-Gp
	for java-user@lucene.apache.org; Mon, 08 Sep 2008 14:26:08 -0700
Message-ID: <19381593.post@talk.nabble.com>
Date: Mon, 8 Sep 2008 14:26:08 -0700 (PDT)
From: "Karsten F." <karsten-lucene@fiz-technik.de>
To: java-user@lucene.apache.org
Subject: Re: Newbie question: using Lucene to index hierarchical
 information.
In-Reply-To: <dcd377ca0809041230i5b1be63fl7c3b8e8118e2c9db@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: karsten-lucene@fiz-technik.de
References: <dcd377ca0809010025s1281eff7r5716c444de2fb671@mail.gmail.com> <dcd377ca0809010655y2a9a1bc0i3fe9e2a81d34f1e8@mail.gmail.com> <19266355.post@talk.nabble.com> <dcd377ca0809041230i5b1be63fl7c3b8e8118e2c9db@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Leonid,

do you really need the "Complex scenario"?
what kind of query is your use case?

If you really need xpath please look for xml-Databases.

Otherwise you can possible use xtf out of the box, because "indexing of
large structured documents" is exactly the use case for which xtf was
developed (TEI documents, but html is less complex then TEI). 
Again the main idea:
1. Use xml-Elements (with its descendants) to divide the structured document
into sections.
2. index each section as lucene document (field "text") with an extra field
"section type"
3. after all sections of one structured document insert one (terminal)
lucene document with the other metadata of the structured document (e.g.
creation date, title, ..)

the document from point 3 is the representative of the structured document
(and the representative is the unit of retrieval, because the user search
for a document not for a section)
If you search e.g. for 
sectionType:table text:words inside section
you have hits with the lucene documents belonging to the sections.

Possible for your use case it would be enough to insert a stored lucene
field "document key".
In xtf the lucene document-number of each hit is incremented until the
representative is reached.

This is a rough description, but source code of xtf is very readable.

best regards

  Karsten



leonardinius wrote:
> 
> Hi all,
> Thanks a lot for such a quick reply.
> 
> Both scenario sounds very well for me. I would like to do my best and try
> to
> implement any of them (as the proof of the concept) and then incrementally
> improve, retest, investigate and rewrite then :)
> 
> So, from the soap opera to the question part then:
> 
>    - How to implement those things (a and b) on the Lucene and Lucene
>    contribs codebase?
>       - I looked at the
>      
> http://xtf.wiki.sourceforge.net/tagRef_textIndexer_PreFilter#toctagRef_textIndexer_PreFilter7
> and
>       didn't like that (too big, to heavy, ready-to use solution instead
> of
>       toolkit). And I didn't understood how to implement "Normal
> scenario" on top
>       of that?
>    - Any suggestions how could I begin implementing these things? Gently
>    moving from "Normal" scenario to some more advanced "Complex"? What
> should I
>    afraid off and possible impacts if any?
> 
> Have anybody tried to use Lucene to analyse things like that? What would
> be
> possible solutions to store indexed data and perform queries on that? If
> Lucene isn't the right tool for this job, maybe some other toolkit would
> more useful(possibly on top of the Lucene)
> 
> Thanks in advance for any suggestions and comments. I would appreciate any
> ideas and directions to look into.
> 
> 
> On Tue, Sep 2, 2008 at 11:46 AM, Karsten F.
> <karsten-lucene@fiz-technik.de>wrote:
> 
>> Take a look to the xml-aware search in xtf (
>>
>> http://xtf.wiki.sourceforge.net/tagRef_textIndexer_PreFilter#toctagRef_textIndexer_PreFilter7
>> ).
>> The idea is to use one lucene-document for each section with only two
>> fields: "text" and "sectionType".
>> But to collect all hits belonging to one hierarchical information (e.g.
>> one
>> html-File) and compress this to one representative hit in lucene.
>>
>> Best regards
>>  Karsten
>>
> 

-- 
View this message in context: http://www.nabble.com/Newbie-question%3A-using-Lucene-to-index-hierarchical-information.-tp19250038p19381593.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 08 22:28:08 2008
Return-Path: <java-user-return-35990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62455 invoked from network); 8 Sep 2008 22:28:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Sep 2008 22:28:08 -0000
Received: (qmail 80647 invoked by uid 500); 8 Sep 2008 22:28:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80616 invoked by uid 500); 8 Sep 2008 22:28:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80605 invoked by uid 99); 8 Sep 2008 22:28:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Sep 2008 15:28:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Sep 2008 22:27:02 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id B748F71C3AF; Mon,  8 Sep 2008 15:27:03 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id B3A2271C394
	for <java-user@lucene.apache.org>; Mon,  8 Sep 2008 15:27:03 -0700 (PDT)
Date: Mon, 8 Sep 2008 15:27:03 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Beginner: Specific indexing
In-Reply-To: <4014d98b0809051329w55f06384k4e5f5eb6b2722f3f@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0809081521470.16629@radix.cryptio.net>
References: <4014d98b0808301202k46a05677l3bb5fd6e8c9b124@mail.gmail.com> 
 <Pine.LNX.4.62.0809021041280.5494@radix.cryptio.net> 
 <4014d98b0809021250j7a774a82xf2974a026d36a8e7@mail.gmail.com> 
 <Pine.LNX.4.62.0809042143540.5350@radix.cryptio.net> 
 <4014d98b0809050552u6a5966d8jbd175c0709d4a1c@mail.gmail.com> 
 <Pine.LNX.4.62.0809051037410.12113@radix.cryptio.net>
 <4014d98b0809051329w55f06384k4e5f5eb6b2722f3f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I think I'm getting you. But the files I'm  going to parse have many formats
: : PDF, HTML, Word.
: they don't have a particular structure, memos if you will. But the ones I'm
: interested in will have the triplets I described

Ahhhh...  see this is something i completley didn't realize.  "Lucene" as 
a library really doesn't provide any sort of mechanism for doing text 
extraction from unknown file formats ... With some small exceptions (like 
the HTMLStripTokenizer in Solr) the TokenStream concept is much more about 
finding "Tokens" from a stream of plain text -- not about finding "Text" 
in arbitrary (possibly binary) files.

You'll probably wantto check out the Tika subproject...
    http://incubator.apache.org/tika/
...or some of the various "How do i index _____ documents?" FAQs...
    http://wiki.apache.org/lucene-java/LuceneFAQ


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 09 00:38:26 2008
Return-Path: <java-user-return-35991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66821 invoked from network); 9 Sep 2008 00:38:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Sep 2008 00:38:26 -0000
Received: (qmail 83580 invoked by uid 500); 9 Sep 2008 00:38:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83556 invoked by uid 500); 9 Sep 2008 00:38:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83545 invoked by uid 99); 9 Sep 2008 00:38:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Sep 2008 17:38:17 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of need4spd@gmail.com designates 209.85.128.189 as permitted sender)
Received: from [209.85.128.189] (HELO fk-out-0910.google.com) (209.85.128.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 00:37:17 +0000
Received: by fk-out-0910.google.com with SMTP id 18so1336150fkq.5
        for <java-user@lucene.apache.org>; Mon, 08 Sep 2008 17:37:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=3GjVy62Bc8XMS7dMti3wzrigLBGfcZHwSAVilh9PL7Q=;
        b=hFuV7JvOmYaMxe6qtDiayHwUGJV567SFCzOBhb6axVKdptTnDCzC00fVJc1rpJbbh9
         0ELSt+KCvMeBBpjzTWtX21VhQnT3wrbEpLKNIUErlH0synGh2U8mlzaoOgxRR+EKXdhF
         iYSyHXQZcxkQQoGUyaBkKprzNS7yJ/O118hHQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=XOqSbdEGok4bArKDGzOBL3FYAiGdQpdbzirPD2kNhBGE/jYQ3fz7mt7cTUpJex9Hq9
         IhpeXpOyd0ttZuABK8ZVokO+S29GUc4XHCCf5m18C1Uvp3ATltDeZGy4H4MbVOGhYeDL
         ANKwEBWT6VDitH8UOimk9+IycbsndNV6W+RB4=
Received: by 10.180.225.16 with SMTP id x16mr11380651bkg.91.1220920657243;
        Mon, 08 Sep 2008 17:37:37 -0700 (PDT)
Received: by 10.180.247.13 with HTTP; Mon, 8 Sep 2008 17:37:37 -0700 (PDT)
Message-ID: <a823853a0809081737w2bbe5c1ag840d91cf5781081a@mail.gmail.com>
Date: Tue, 9 Sep 2008 09:37:37 +0900
From: "=?EUC-KR?B?wOW/67yu?=" <need4spd@gmail.com>
To: java-user@lucene.apache.org
Subject: Incremental Indexing.
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5115_9947761.1220920657223"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5115_9947761.1220920657223
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: base64
Content-Disposition: inline

SGl+LgpJIGhhdmEgYSBxdWVzdGlvbiBhYm91dCBsdWNlbmUgaW5jcmVtZW50YWwgaW5kZXhpbmcu
CgpJIHdhbnQgdG8gZG8gaW5jcmVtZW50YWwgaW5kZXhpbmcgbXkgZ29vZHMgZGF0YS4KRm9yIGV4
YW1wbGUsIEkgaGF2ZSA0IHByb2R1Y3RzIGRhdGFzIHdpdGgKIkdPT0RfSUQiLCJOQU1FIiwiUFJJ
Q0UiLCJDUkVBVEVEQVRFIiwiVVBEQVRFREFURSIgY29sdW5tcy4KCjEsIGlwb2QsIDMwMDAwLCAy
MDA4LTExLTEwOjExOjAwLCAyMDA4LTExLTEwOjExOjAwCjIsIGphdmEgYm9vaywgMjAwMDAsIDIw
MDgtMTEtMTA6MTE6MDAsIDIwMDgtMTEtMTA6MTE6MDAKMywgY2FsZW5kYXIsIDEwMDAwLCAyMDA4
LTExLTEwOjExOjAwLCAyMDA4LTExLTEwOjExOjAwCjQsIGx1Y2VuZSBib29rLCA1MDAwLCAyMDA4
LTExLTEwOjExOjAwLCAyMDA4LTExLTEwOjExOjAwCgpJZiBJIHdpbGwgSW5kZXhpbmcgdGhlc2Ug
ZGF0YXMsIHRoZXkgd2lsbCBoYXZlIGEgdW5pcXVlIGRvY2lkLgoKQW5kIEkgdXBkYXRlIG9uZSBv
ZiB0aGVtIHRoYXQgaGFzIGdvb2RfaWQgIjEiLCBwcmljZSBjb2x1bm0gMzAwMDAgdG8gMzUwMDAK
YW5kIFVQREFURURBVEUgY29sdW5tIDIwMDgtMTEtMTA6MTE6MDAgdG8gMjAwOC0xMS0xMDoxMjow
MC4KCkluIHRoaXMgY2FzZSAsIEkgd2FudCB1cGRhdGUgbXkgaW5kZXggd2l0aCBuZXcgZGF0YSBn
b29kX2lkICIxIi4KCkluIGJvb2ssIElmIEkgd2FudCB0byB1cGRhdGUgbXkgaW5kZXggdGhlbiBJ
IHNob3VsZCBkZWxldGUgdGFyZ2V0IGRhdGEgZnJvbQppbmRleCBhbmQgYWRkIGRhdGEgdG8gaW5k
ZXguCklmIHRoZSB0YXJnZXQgZGF0YSBpcyBvbmUsIEkgdGhpbmsgSXQgaXMgbm8gbWF0dGVyIGZv
ciBtZSwgYW5kIGFwcGxpY2F0aW9ucy4KQnV0IGlmIHRoZSB0YXJnZXQgZGF0YXMgYXJlIG92ZXIg
MzAwMCAob3IgbW9yZSkgLCB0aGlzIGFwcGxjYXRpb25zIG11c3QgZG8Kam9iIGRlbGV0ZSBkYXRh
IGFuZCBhZGQgZGF0YSBlYWNoIDMwMDAob3IgbW9yZSkgdGltZXMuCkkgd29ycmllZCBhYm91dCBJ
dCB3aWxsIGJlIHByb2JsZW0gdG8gbXkgYXBwbGljYXRpb25zLgpPciBJcyB0aGlzIGpvYiBubyBt
YXR0ZXI/CgpJIG5lZWQgeW91ciBoZWxwcy4uIDotKQoKbWFueSB0aGFua3MuCkphbmcuCgotLSAK
REVWv+u9xApodHRwOi8vZGV2eW9uZ3Npay50aXN0b3J5LmNvbQo=
------=_Part_5115_9947761.1220920657223--

From java-user-return-35992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 09 01:07:55 2008
Return-Path: <java-user-return-35992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96750 invoked from network); 9 Sep 2008 01:07:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Sep 2008 01:07:55 -0000
Received: (qmail 8814 invoked by uid 500); 9 Sep 2008 01:07:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8776 invoked by uid 500); 9 Sep 2008 01:07:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8765 invoked by uid 99); 9 Sep 2008 01:07:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Sep 2008 18:07:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 01:06:47 +0000
Received: by gxk6 with SMTP id 6so2354063gxk.5
        for <java-user@lucene.apache.org>; Mon, 08 Sep 2008 18:06:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=bcReP+nqA3lvfxtbS/6N0hOF2tCd/CCyZFXclG7jkhI=;
        b=bpF+yF5Gkd931kpjY5kO0W51j+V4ri+VNoS2egYO3KFGiggXjJx2khRvxAiI+bQBe+
         t6BXZOFgQQXUkoonhGAIpzbfdxDYKfEhgrdMUrzAAGmtsOt3o1WXORY3u5JR4eMdbxu6
         2VJ1ibRP/oUriailDEX7bEc+FXV2b9i8qkQFQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=S53VWRAJtNo1SFEtmHoteaocO5v388rstC8QhEoz+5QdaP2+oaK0qtxpSnOdfqopc/
         dABIsuD24iRYeSdM0V5mtz98hoDxy3lWQwu9WiVOvQxEySNYpw3bPSUu4VD+ETNp0cWw
         goy0wS0uM48TJ1c6Vnkb9RfuuHRpEaMixAbkQ=
Received: by 10.150.57.5 with SMTP id f5mr22423580yba.60.1220922378649;
        Mon, 08 Sep 2008 18:06:18 -0700 (PDT)
Received: by 10.151.118.7 with HTTP; Mon, 8 Sep 2008 18:06:18 -0700 (PDT)
Message-ID: <85d3c3b60809081806j526483e3s52eede2bfb98b34c@mail.gmail.com>
Date: Mon, 8 Sep 2008 21:06:18 -0400
From: "Jason Rutherglen" <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Incremental Indexing.
In-Reply-To: <a823853a0809081737w2bbe5c1ag840d91cf5781081a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <a823853a0809081737w2bbe5c1ag840d91cf5781081a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

SGkgSmFuZywKCkkndmUgYmVlbiB3b3JraW5nIG9uIFRhZyBJbmRleCB0byBhZGRyZXNzIHRoaXMg
aXNzdWUuICBJdCBzZWVtcyBsaWtlIGEKcG9wdWxhciBmZWF0dXJlIGFuZCBJIGhhdmUgbm90IGhh
ZCB0aW1lIHRvIGZ1bGx5IGltcGxlbWVudCBpdCB5ZXQuCmh0dHA6Ly9pc3N1ZXMuYXBhY2hlLm9y
Zy9qaXJhL2Jyb3dzZS9MVUNFTkUtMTI5MiAgVG8gYmUgdGVjaG5pY2FsIGl0CmhhbmRsZXMgVU5f
VE9LRU5JWkVEIGZpZWxkcyAoZGlkIHRoaXMgbmFtZSBjaGFuZ2Ugbm93PykgYW5kIHNvbWUKc3Bl
Y2lhbGl6ZWQgdGhpbmdzIHRvIGFsbG93IHVwZGF0aW5nIG9mIHBhcnRzIG9mIHRoZSBpbnZlcnRl
ZCBpbmRleC4KSWYgeW91J3JlIGludGVyZXN0ZWQgaW4gd29ya2luZyBvbiBpdCwgZmVlbCBmcmVl
IHRvIGxldCBtZSBrbm93LgoKQ2hlZXJzLApKYXNvbgoKMjAwOC85LzggwOW/67yuIDxuZWVkNHNw
ZEBnbWFpbC5jb20+Ogo+IEhpfi4KPiBJIGhhdmEgYSBxdWVzdGlvbiBhYm91dCBsdWNlbmUgaW5j
cmVtZW50YWwgaW5kZXhpbmcuCj4KPiBJIHdhbnQgdG8gZG8gaW5jcmVtZW50YWwgaW5kZXhpbmcg
bXkgZ29vZHMgZGF0YS4KPiBGb3IgZXhhbXBsZSwgSSBoYXZlIDQgcHJvZHVjdHMgZGF0YXMgd2l0
aAo+ICJHT09EX0lEIiwiTkFNRSIsIlBSSUNFIiwiQ1JFQVRFREFURSIsIlVQREFURURBVEUiIGNv
bHVubXMuCj4KPiAxLCBpcG9kLCAzMDAwMCwgMjAwOC0xMS0xMDoxMTowMCwgMjAwOC0xMS0xMDox
MTowMAo+IDIsIGphdmEgYm9vaywgMjAwMDAsIDIwMDgtMTEtMTA6MTE6MDAsIDIwMDgtMTEtMTA6
MTE6MDAKPiAzLCBjYWxlbmRhciwgMTAwMDAsIDIwMDgtMTEtMTA6MTE6MDAsIDIwMDgtMTEtMTA6
MTE6MDAKPiA0LCBsdWNlbmUgYm9vaywgNTAwMCwgMjAwOC0xMS0xMDoxMTowMCwgMjAwOC0xMS0x
MDoxMTowMAo+Cj4gSWYgSSB3aWxsIEluZGV4aW5nIHRoZXNlIGRhdGFzLCB0aGV5IHdpbGwgaGF2
ZSBhIHVuaXF1ZSBkb2NpZC4KPgo+IEFuZCBJIHVwZGF0ZSBvbmUgb2YgdGhlbSB0aGF0IGhhcyBn
b29kX2lkICIxIiwgcHJpY2UgY29sdW5tIDMwMDAwIHRvIDM1MDAwCj4gYW5kIFVQREFURURBVEUg
Y29sdW5tIDIwMDgtMTEtMTA6MTE6MDAgdG8gMjAwOC0xMS0xMDoxMjowMC4KPgo+IEluIHRoaXMg
Y2FzZSAsIEkgd2FudCB1cGRhdGUgbXkgaW5kZXggd2l0aCBuZXcgZGF0YSBnb29kX2lkICIxIi4K
Pgo+IEluIGJvb2ssIElmIEkgd2FudCB0byB1cGRhdGUgbXkgaW5kZXggdGhlbiBJIHNob3VsZCBk
ZWxldGUgdGFyZ2V0IGRhdGEgZnJvbQo+IGluZGV4IGFuZCBhZGQgZGF0YSB0byBpbmRleC4KPiBJ
ZiB0aGUgdGFyZ2V0IGRhdGEgaXMgb25lLCBJIHRoaW5rIEl0IGlzIG5vIG1hdHRlciBmb3IgbWUs
IGFuZCBhcHBsaWNhdGlvbnMuCj4gQnV0IGlmIHRoZSB0YXJnZXQgZGF0YXMgYXJlIG92ZXIgMzAw
MCAob3IgbW9yZSkgLCB0aGlzIGFwcGxjYXRpb25zIG11c3QgZG8KPiBqb2IgZGVsZXRlIGRhdGEg
YW5kIGFkZCBkYXRhIGVhY2ggMzAwMChvciBtb3JlKSB0aW1lcy4KPiBJIHdvcnJpZWQgYWJvdXQg
SXQgd2lsbCBiZSBwcm9ibGVtIHRvIG15IGFwcGxpY2F0aW9ucy4KPiBPciBJcyB0aGlzIGpvYiBu
byBtYXR0ZXI/Cj4KPiBJIG5lZWQgeW91ciBoZWxwcy4uIDotKQo+Cj4gbWFueSB0aGFua3MuCj4g
SmFuZy4KPgo+IC0tCj4gREVWv+u9xAo+IGh0dHA6Ly9kZXZ5b25nc2lrLnRpc3RvcnkuY29tCj4K


From java-user-return-35993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 09 04:31:52 2008
Return-Path: <java-user-return-35993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51836 invoked from network); 9 Sep 2008 04:31:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Sep 2008 04:31:51 -0000
Received: (qmail 23375 invoked by uid 500); 9 Sep 2008 04:31:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23339 invoked by uid 500); 9 Sep 2008 04:31:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23328 invoked by uid 99); 9 Sep 2008 04:31:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Sep 2008 21:31:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.242] (HELO web50309.mail.re2.yahoo.com) (206.190.38.242)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 09 Sep 2008 04:30:42 +0000
Received: (qmail 62204 invoked by uid 60001); 9 Sep 2008 04:31:12 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=sXLcsWMmrOE4x8a1jWGTM1iGMenDOdLQLjv2/lkEDstxUJZoRoMG27PCBUzdlZ0LtPlSHXzGOuxGs3Z3Do2Zo39w6OaMQR5aPduz8eDuVJvTplhZzhgzKtlLuBzGX9gUaKo3ksTjDHfxrX3WBuO684F/v21SVcWqENP+1svi04s=;
X-YMail-OSG: ysWUSYMVM1nheVKs5mnWGi1sadJLiSs8uqGr0MubKwbn2wFgTWcRNuAYi7LUT9pFrUthKLGf3PFuiTDZWVoKLRvyt98_gS2onYGKi2fFqr6NmFvWVPJIT4aYl999.n9u.N1Cn_dXz2rWVi4uESHwXks-
Received: from [72.227.164.48] by web50309.mail.re2.yahoo.com via HTTP; Mon, 08 Sep 2008 21:31:12 PDT
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Mon, 8 Sep 2008 21:31:12 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: C++ Bindings for Lucene?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <703566.61669.qm@web50309.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Joe,

CLucene is slightly behind Java Lucene, but I believe CLucene developers are working on 2.3.2 port.  I think that's the only C++ option.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Joseph Kovacic <jkovacic@vmware.com>
> To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
> Sent: Monday, September 8, 2008 1:28:26 PM
> Subject: C++ Bindings for Lucene?
> 
> Hello Everyone,
> 
> I apologize if this question has been answered before or exists somewhere in the 
> documents, but I was unable to find it. Our company uses the standard Java 
> implementation of Lucene. I am writing a program in C++ and was wondering if 
> there are any C++ bindings to search a Java Lucene Index? Alternatively, does 
> CLucene work properly when accessing a Java Lucene Index? Also, if there are any 
> C++ Lucene Search coding examples you are aware of, I would greatly appreciate 
> it.
> 
> Thank you very much,
> Joe


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 09 05:10:05 2008
Return-Path: <java-user-return-35994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72312 invoked from network); 9 Sep 2008 05:10:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Sep 2008 05:10:05 -0000
Received: (qmail 57103 invoked by uid 500); 9 Sep 2008 05:09:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57071 invoked by uid 500); 9 Sep 2008 05:09:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57060 invoked by uid 99); 9 Sep 2008 05:09:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Sep 2008 22:09:56 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 05:08:56 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KcvTi-0007eX-TT
	for java-user@lucene.apache.org; Mon, 08 Sep 2008 22:09:26 -0700
Message-ID: <19385951.post@talk.nabble.com>
Date: Mon, 8 Sep 2008 22:09:26 -0700 (PDT)
From: VikramIyer <vikram85.iyer@gmail.com>
To: java-user@lucene.apache.org
Subject: Web Application Indexing Error
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: vikram85.iyer@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

   Web application consists of one Servlet that calls a Java class with
lucene libraries(imports) which performs the task of indexing. However upon
class invocation from the doPost() in the servlet I get this error 

exception

          javax.servlet.ServletException: Servlet execution threw an
exception

cause
          java.lang.NoClassDefFoundError:
org/apache/lucene/document/Fieldable  
                com.luceneweb.WebIndexer.doPost(WebIndexer.java:45)
	javax.servlet.http.HttpServlet.service(HttpServlet.java:763)
	javax.servlet.http.HttpServlet.service(HttpServlet.java:856)

I have the lucene-core-2.3.2.jar configured in my build path.Not sure if any
other jar's are missing
-- 
View this message in context: http://www.nabble.com/Web-Application-Indexing-Error-tp19385951p19385951.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 09 05:54:49 2008
Return-Path: <java-user-return-35995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93518 invoked from network); 9 Sep 2008 05:54:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Sep 2008 05:54:49 -0000
Received: (qmail 92488 invoked by uid 500); 9 Sep 2008 05:54:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92454 invoked by uid 500); 9 Sep 2008 05:54:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92443 invoked by uid 99); 9 Sep 2008 05:54:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Sep 2008 22:54:38 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of alexander.aristov@gmail.com designates 209.85.200.172 as permitted sender)
Received: from [209.85.200.172] (HELO wf-out-1314.google.com) (209.85.200.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 05:53:38 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2279516wfc.20
        for <java-user@lucene.apache.org>; Mon, 08 Sep 2008 22:54:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=QavoJICIoZSDmMAEilWiBJE3t4JMkSmx5GX4rmnoRqs=;
        b=TFWSxCjhx+jMLU7NC0uw3zceYFqRyagBMrIx3axIS3RIFD1S9975o+7+l81n3ZrSPM
         QXmbZfuLfVV9IRYFgL0nGEsYcn+vAWQP0uk1dm/410q9kNrItiYI1ypwt7SXqZJ7gtB9
         Kwnd2RuHHoCt+kUPGeBz0JXTpU2QjnWCr3pnk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=ruX1Z8Y/VkeKySYQSVnolvz8rnfNNZkOTC2r4ay09O5vWyXu/rEHpHkkNgNnwcpzWx
         r6t3OJTARriDX/2ZT4bA52sjKhr3mEm2r+4VJxoAYdzEpCQx8/Shz0pcdOwMhOd0CaZO
         JKlJN5XrmGcv6f0ulNSSCk+Gh16MHvzFT8g4c=
Received: by 10.142.135.16 with SMTP id i16mr5604933wfd.144.1220939640318;
        Mon, 08 Sep 2008 22:54:00 -0700 (PDT)
Received: by 10.142.252.20 with HTTP; Mon, 8 Sep 2008 22:54:00 -0700 (PDT)
Message-ID: <11975c90809082254s3bc85028p7635aa2a867ed45d@mail.gmail.com>
Date: Tue, 9 Sep 2008 09:54:00 +0400
From: "Alexander Aristov" <alexander.aristov@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Web Application Indexing Error
In-Reply-To: <19385951.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8172_22580335.1220939640309"
References: <19385951.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8172_22580335.1220939640309
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi

Build path and classpath at runtime are different matters. Where do you run
your servlet, in which container.

Mainly all servlet containers should add all libraries located under
WEB-INF/lib, so you must place your lucene jar files there.

Alex

2008/9/9 VikramIyer <vikram85.iyer@gmail.com>

>
> Hi,
>
>   Web application consists of one Servlet that calls a Java class with
> lucene libraries(imports) which performs the task of indexing. However upon
> class invocation from the doPost() in the servlet I get this error
>
> exception
>
>          javax.servlet.ServletException: Servlet execution threw an
> exception
>
> cause
>          java.lang.NoClassDefFoundError:
> org/apache/lucene/document/Fieldable
>                com.luceneweb.WebIndexer.doPost(WebIndexer.java:45)
>        javax.servlet.http.HttpServlet.service(HttpServlet.java:763)
>        javax.servlet.http.HttpServlet.service(HttpServlet.java:856)
>
> I have the lucene-core-2.3.2.jar configured in my build path.Not sure if
> any
> other jar's are missing
> --
> View this message in context:
> http://www.nabble.com/Web-Application-Indexing-Error-tp19385951p19385951.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Best Regards
Alexander Aristov

------=_Part_8172_22580335.1220939640309--

From java-user-return-35996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 09 06:13:14 2008
Return-Path: <java-user-return-35996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1360 invoked from network); 9 Sep 2008 06:13:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Sep 2008 06:13:13 -0000
Received: (qmail 5135 invoked by uid 500); 9 Sep 2008 06:13:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5109 invoked by uid 500); 9 Sep 2008 06:13:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5098 invoked by uid 99); 9 Sep 2008 06:13:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Sep 2008 23:13:04 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 06:12:06 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id m896CTSC030305
	for <java-user@lucene.apache.org>; Tue, 9 Sep 2008 09:12:29 +0300
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz.teamw.com with ESMTP
	 id m3oz3w3c; 9 Sep 2008 09:12:00 +0300
Message-ID: <48C613B7.7040201@teamware.com>
Date: Tue, 09 Sep 2008 16:12:07 +1000
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Merging indexes - which is best option?
References: <48C0C508.7040506@teamware.com> <19380709.post@talk.nabble.com>
In-Reply-To: <19380709.post@talk.nabble.com>
X-TWG-MDN: never
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Tue, 09 Sep 2008 09:12:29 +0300 (EEST)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Karsten,

> I decided first to delete all duplicates from master(iW) and then to insert
> all temporary indices(other).

I reached the same conclusion.  As your code shows, it's a simple enough 
solution.  You had a good point with the iW.abort() in the rollback case.

Antony




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 09 08:43:11 2008
Return-Path: <java-user-return-35997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73114 invoked from network); 9 Sep 2008 08:43:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Sep 2008 08:43:10 -0000
Received: (qmail 41767 invoked by uid 500); 9 Sep 2008 08:43:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41741 invoked by uid 500); 9 Sep 2008 08:43:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41730 invoked by uid 99); 9 Sep 2008 08:43:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 01:43:01 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [85.158.137.83] (HELO mail140.messagelabs.com) (85.158.137.83)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 09 Sep 2008 08:42:02 +0000
X-VirusChecked: Checked
X-Env-Sender: ulrich.vachon@vidal.fr
X-Msg-Ref: server-8.tower-140.messagelabs.com!1220949748!9757570!1
X-StarScan-Version: 5.5.12.14.2; banners=-,-,-
X-Originating-IP: [217.109.82.230]
Received: (qmail 27649 invoked from network); 9 Sep 2008 08:42:28 -0000
Received: from unknown (HELO localhost.localdomain) (217.109.82.230)
  by server-8.tower-140.messagelabs.com with SMTP; 9 Sep 2008 08:42:28 -0000
Received: from srv-exch01.france.groupe.intra (srv-exch01.france.groupe.intra [172.16.50.5])
	by localhost.localdomain (Postfix) with ESMTP id 2C10137E95
	for <java-user@lucene.apache.org>; Tue,  9 Sep 2008 10:48:45 +0200 (CEST)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: Scoring
Date: Tue, 9 Sep 2008 10:42:28 +0200
Message-ID: <B652D70ACFDB7F42B79D1997ACBFBFE1142053@srv-exch01.france.groupe.intra>
In-Reply-To: <48C613B7.7040201@teamware.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Scoring
Thread-Index: AckSQyJmo/wlqCJ3QA6NvJcFUYqDKwAFGJmQ
From: "Ulrich Vachon" <ulrich.vachon@vidal.fr>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

It is possible to have the score of each term composing the query like:
 - query =3D "foo bar"

I would like to have the score for "foo" and "bar". Actually the score =
is based on results reached by the full query " foo bar".

Regards,
Ulrich

-----Message d'origine-----
De : Antony Bowesman [mailto:adb@teamware.com]=20
Envoy=E9 : mardi 9 septembre 2008 08:12
=C0 : java-user@lucene.apache.org
Objet : Re: Merging indexes - which is best option?

Thanks Karsten,

> I decided first to delete all duplicates from master(iW) and then to=20
> insert all temporary indices(other).

I reached the same conclusion.  As your code shows, it's a simple enough =
solution.  You had a good point with the iW.abort() in the rollback =
case.

Antony




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


______________________________________________________________________
Cet e-mail a =E9t=E9 scann=E9 par MessageLabs Email Security System.
Pour plus d'informations, visitez http://www.messagelabs.com/email =
______________________________________________________________________

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 09 08:52:44 2008
Return-Path: <java-user-return-35998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77992 invoked from network); 9 Sep 2008 08:52:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Sep 2008 08:52:44 -0000
Received: (qmail 51858 invoked by uid 500); 9 Sep 2008 08:52:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51823 invoked by uid 500); 9 Sep 2008 08:52:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51812 invoked by uid 99); 9 Sep 2008 08:52:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 01:52:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.132.240 as permitted sender)
Received: from [209.85.132.240] (HELO an-out-0708.google.com) (209.85.132.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 08:51:35 +0000
Received: by an-out-0708.google.com with SMTP id c37so331150anc.49
        for <java-user@lucene.apache.org>; Tue, 09 Sep 2008 01:52:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=znAFMoEED2/Uo0QaOg1ARu5uVHLDBu0E0y5WHvaqlA8=;
        b=TnanZM1mmpi7BBrMqq1Y/2c3VDhzcHX71SDl+UmMOgnZ1KLYJQxKbnEdO5d+dxeeh9
         Vn509uCYA4IyvnSQ3Y6CjmVaz95z3ZUJVX0qpvJsGyUIFxbwRW8co+7snUtVIn1HYmei
         nexFLW2/cI8+Y1WaiJooy9iSwa2gZmy1KjMbA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=a1m9IsRwXBUhu01i3X6dCMjHQ6gO45Atsdg5LbXgeoBcTkubH46UnkqvLIVheK/0Ej
         SRwqDPNbPSlmJ0qQkfYQaOUb7M0G1K8gVLbFLhhYwqGdI8Oo7ku/+jFmnJHglz5b8P0b
         anLr7rjitbrwtJNGIZTlQctVe3mR7opsmcUSY=
Received: by 10.100.121.12 with SMTP id t12mr16851792anc.132.1220950326372;
        Tue, 09 Sep 2008 01:52:06 -0700 (PDT)
Received: by 10.100.132.7 with HTTP; Tue, 9 Sep 2008 01:52:06 -0700 (PDT)
Message-ID: <8c4e68610809090152j737e2cfdw211d3a4e14c31602@mail.gmail.com>
Date: Tue, 9 Sep 2008 09:52:06 +0100
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Incremental Indexing.
In-Reply-To: <a823853a0809081737w2bbe5c1ag840d91cf5781081a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <a823853a0809081737w2bbe5c1ag840d91cf5781081a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

U3VjaCBpbmNyZW1lbnRhbCBpbmRleGluZyBpcyBzdGFuZGFyZCBwcmFjdGljZSBhbmQgdW5saWtl
bHkgdG8gY2F1c2UgYQpwcm9ibGVtLCBwYXJ0aWN1bGFybHkgaWYgeW91IGFyZSBvbmx5IHdvcmtp
bmcgd2l0aCBhIGZldyB0aG91c2FuZApkb2N1bWVudHMuICBJbnN0ZWFkIG9mIGRlbGV0ZS9hZGQg
eW91IGNvdWxkIHVzZQpJbmRleFdyaXRlci51cGRhdGVEb2N1bWVudCgpLgoKCi0tCklhbi4KCgoy
MDA4LzkvOSDA5b/rvK4gPG5lZWQ0c3BkQGdtYWlsLmNvbT46Cj4gSGl+Lgo+IEkgaGF2YSBhIHF1
ZXN0aW9uIGFib3V0IGx1Y2VuZSBpbmNyZW1lbnRhbCBpbmRleGluZy4KPgo+IEkgd2FudCB0byBk
byBpbmNyZW1lbnRhbCBpbmRleGluZyBteSBnb29kcyBkYXRhLgo+IEZvciBleGFtcGxlLCBJIGhh
dmUgNCBwcm9kdWN0cyBkYXRhcyB3aXRoCj4gIkdPT0RfSUQiLCJOQU1FIiwiUFJJQ0UiLCJDUkVB
VEVEQVRFIiwiVVBEQVRFREFURSIgY29sdW5tcy4KPgo+IDEsIGlwb2QsIDMwMDAwLCAyMDA4LTEx
LTEwOjExOjAwLCAyMDA4LTExLTEwOjExOjAwCj4gMiwgamF2YSBib29rLCAyMDAwMCwgMjAwOC0x
MS0xMDoxMTowMCwgMjAwOC0xMS0xMDoxMTowMAo+IDMsIGNhbGVuZGFyLCAxMDAwMCwgMjAwOC0x
MS0xMDoxMTowMCwgMjAwOC0xMS0xMDoxMTowMAo+IDQsIGx1Y2VuZSBib29rLCA1MDAwLCAyMDA4
LTExLTEwOjExOjAwLCAyMDA4LTExLTEwOjExOjAwCj4KPiBJZiBJIHdpbGwgSW5kZXhpbmcgdGhl
c2UgZGF0YXMsIHRoZXkgd2lsbCBoYXZlIGEgdW5pcXVlIGRvY2lkLgo+Cj4gQW5kIEkgdXBkYXRl
IG9uZSBvZiB0aGVtIHRoYXQgaGFzIGdvb2RfaWQgIjEiLCBwcmljZSBjb2x1bm0gMzAwMDAgdG8g
MzUwMDAKPiBhbmQgVVBEQVRFREFURSBjb2x1bm0gMjAwOC0xMS0xMDoxMTowMCB0byAyMDA4LTEx
LTEwOjEyOjAwLgo+Cj4gSW4gdGhpcyBjYXNlICwgSSB3YW50IHVwZGF0ZSBteSBpbmRleCB3aXRo
IG5ldyBkYXRhIGdvb2RfaWQgIjEiLgo+Cj4gSW4gYm9vaywgSWYgSSB3YW50IHRvIHVwZGF0ZSBt
eSBpbmRleCB0aGVuIEkgc2hvdWxkIGRlbGV0ZSB0YXJnZXQgZGF0YSBmcm9tCj4gaW5kZXggYW5k
IGFkZCBkYXRhIHRvIGluZGV4Lgo+IElmIHRoZSB0YXJnZXQgZGF0YSBpcyBvbmUsIEkgdGhpbmsg
SXQgaXMgbm8gbWF0dGVyIGZvciBtZSwgYW5kIGFwcGxpY2F0aW9ucy4KPiBCdXQgaWYgdGhlIHRh
cmdldCBkYXRhcyBhcmUgb3ZlciAzMDAwIChvciBtb3JlKSAsIHRoaXMgYXBwbGNhdGlvbnMgbXVz
dCBkbwo+IGpvYiBkZWxldGUgZGF0YSBhbmQgYWRkIGRhdGEgZWFjaCAzMDAwKG9yIG1vcmUpIHRp
bWVzLgo+IEkgd29ycmllZCBhYm91dCBJdCB3aWxsIGJlIHByb2JsZW0gdG8gbXkgYXBwbGljYXRp
b25zLgo+IE9yIElzIHRoaXMgam9iIG5vIG1hdHRlcj8KPgo+IEkgbmVlZCB5b3VyIGhlbHBzLi4g
Oi0pCj4KPiBtYW55IHRoYW5rcy4KPiBKYW5nLgo+Cj4gLS0KPiBERVa/673ECj4gaHR0cDovL2Rl
dnlvbmdzaWsudGlzdG9yeS5jb20KPgo=


From java-user-return-35999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 09 10:22:34 2008
Return-Path: <java-user-return-35999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18469 invoked from network); 9 Sep 2008 10:22:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Sep 2008 10:22:34 -0000
Received: (qmail 34014 invoked by uid 500); 9 Sep 2008 10:22:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33944 invoked by uid 500); 9 Sep 2008 10:22:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33923 invoked by uid 99); 9 Sep 2008 10:22:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 03:22:22 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yeshuangming@gmail.com designates 209.85.217.30 as permitted sender)
Received: from [209.85.217.30] (HELO mail-gx0-f30.google.com) (209.85.217.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 10:21:22 +0000
Received: by gxk11 with SMTP id 11so3799741gxk.5
        for <java-user@lucene.apache.org>; Tue, 09 Sep 2008 03:20:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=eG8oAk9EOJkbHJWpglR8Rr6kuq7PNOjA1sEtPry57Ok=;
        b=ghJVwdow+DaBpDKOo1YcWSe1raCqrYuCBJwki4qf68TX7mJsnybzO1Ii5+DC9elEH0
         TaBrF2UfSHbXBTUKmrtw/Z5phGFc4BjZYRmk1gJAxy6sVbqZMyE4bunL5QMYEm4oyWHQ
         gKXAHt7I2Bc3o3f9Xn+5CV8eitzKjBHGb9TK4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=mSSfyC+ldRTd29yzuY4pdEubDsCCey+0zdzClzHEmhnCcXtIkjlFatscSAic3Epiz7
         eHz4ZMvVHDAgGdUmlxw6eQADXOvaFNTcQYS428M6VTyikvviFMXVEcMTpOYOdGfwRn4L
         eN/M77/AXY4Mb6FnNuSWB1BhPMrFvmkztz9sU=
Received: by 10.150.212.14 with SMTP id k14mr23158677ybg.89.1220955653172;
        Tue, 09 Sep 2008 03:20:53 -0700 (PDT)
Received: by 10.151.100.9 with HTTP; Tue, 9 Sep 2008 03:20:53 -0700 (PDT)
Message-ID: <9233ccac0809090320p17d5b77bw8b96a59e0c5c824f@mail.gmail.com>
Date: Tue, 9 Sep 2008 18:20:53 +0800
From: "=?UTF-8?B?5Y+25Y+M5piO?=" <yeshuangming@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Web Application Indexing Error
In-Reply-To: <11975c90809082254s3bc85028p7635aa2a867ed45d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_70569_5150879.1220955653148"
References: <19385951.post@talk.nabble.com>
	 <11975c90809082254s3bc85028p7635aa2a867ed45d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_70569_5150879.1220955653148
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

dXNlIGNsYXNzcGF0aO+8gQoKMjAwOC85LzkgQWxleGFuZGVyIEFyaXN0b3YgPGFsZXhhbmRlci5h
cmlzdG92QGdtYWlsLmNvbT4KCj4gSGkKPgo+IEJ1aWxkIHBhdGggYW5kIGNsYXNzcGF0aCBhdCBy
dW50aW1lIGFyZSBkaWZmZXJlbnQgbWF0dGVycy4gV2hlcmUgZG8geW91IHJ1bgo+IHlvdXIgc2Vy
dmxldCwgaW4gd2hpY2ggY29udGFpbmVyLgo+Cj4gTWFpbmx5IGFsbCBzZXJ2bGV0IGNvbnRhaW5l
cnMgc2hvdWxkIGFkZCBhbGwgbGlicmFyaWVzIGxvY2F0ZWQgdW5kZXIKPiBXRUItSU5GL2xpYiwg
c28geW91IG11c3QgcGxhY2UgeW91ciBsdWNlbmUgamFyIGZpbGVzIHRoZXJlLgo+Cj4gQWxleAo+
Cj4gMjAwOC85LzkgVmlrcmFtSXllciA8dmlrcmFtODUuaXllckBnbWFpbC5jb20+Cj4KPiA+Cj4g
PiBIaSwKPiA+Cj4gPiAgIFdlYiBhcHBsaWNhdGlvbiBjb25zaXN0cyBvZiBvbmUgU2VydmxldCB0
aGF0IGNhbGxzIGEgSmF2YSBjbGFzcyB3aXRoCj4gPiBsdWNlbmUgbGlicmFyaWVzKGltcG9ydHMp
IHdoaWNoIHBlcmZvcm1zIHRoZSB0YXNrIG9mIGluZGV4aW5nLiBIb3dldmVyCj4gdXBvbgo+ID4g
Y2xhc3MgaW52b2NhdGlvbiBmcm9tIHRoZSBkb1Bvc3QoKSBpbiB0aGUgc2VydmxldCBJIGdldCB0
aGlzIGVycm9yCj4gPgo+ID4gZXhjZXB0aW9uCj4gPgo+ID4gICAgICAgICAgamF2YXguc2Vydmxl
dC5TZXJ2bGV0RXhjZXB0aW9uOiBTZXJ2bGV0IGV4ZWN1dGlvbiB0aHJldyBhbgo+ID4gZXhjZXB0
aW9uCj4gPgo+ID4gY2F1c2UKPiA+ICAgICAgICAgIGphdmEubGFuZy5Ob0NsYXNzRGVmRm91bmRF
cnJvcjoKPiA+IG9yZy9hcGFjaGUvbHVjZW5lL2RvY3VtZW50L0ZpZWxkYWJsZQo+ID4gICAgICAg
ICAgICAgICAgY29tLmx1Y2VuZXdlYi5XZWJJbmRleGVyLmRvUG9zdChXZWJJbmRleGVyLmphdmE6
NDUpCj4gPiAgICAgICAgamF2YXguc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0LnNlcnZpY2UoSHR0
cFNlcnZsZXQuamF2YTo3NjMpCj4gPiAgICAgICAgamF2YXguc2VydmxldC5odHRwLkh0dHBTZXJ2
bGV0LnNlcnZpY2UoSHR0cFNlcnZsZXQuamF2YTo4NTYpCj4gPgo+ID4gSSBoYXZlIHRoZSBsdWNl
bmUtY29yZS0yLjMuMi5qYXIgY29uZmlndXJlZCBpbiBteSBidWlsZCBwYXRoLk5vdCBzdXJlIGlm
Cj4gPiBhbnkKPiA+IG90aGVyIGphcidzIGFyZSBtaXNzaW5nCj4gPiAtLQo+ID4gVmlldyB0aGlz
IG1lc3NhZ2UgaW4gY29udGV4dDoKPiA+Cj4gaHR0cDovL3d3dy5uYWJibGUuY29tL1dlYi1BcHBs
aWNhdGlvbi1JbmRleGluZy1FcnJvci10cDE5Mzg1OTUxcDE5Mzg1OTUxLmh0bWwKPiA+IFNlbnQg
ZnJvbSB0aGUgTHVjZW5lIC0gSmF2YSBVc2VycyBtYWlsaW5nIGxpc3QgYXJjaGl2ZSBhdCBOYWJi
bGUuY29tLgo+ID4KPiA+Cj4gPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiA+IFRvIHVuc3Vic2NyaWJlLCBlLW1h
aWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+ID4gRm9yIGFkZGl0
aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcK
PiA+Cj4gPgo+Cj4KPiAtLQo+IEJlc3QgUmVnYXJkcwo+IEFsZXhhbmRlciBBcmlzdG92Cj4KCgoK
LS0gClNvcnJ5IGZvciBteSBlbmdsaXNoISEg5piOCg==
------=_Part_70569_5150879.1220955653148--

From java-user-return-36000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 09 11:11:06 2008
Return-Path: <java-user-return-36000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43053 invoked from network); 9 Sep 2008 11:11:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Sep 2008 11:11:05 -0000
Received: (qmail 84917 invoked by uid 500); 9 Sep 2008 11:10:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84875 invoked by uid 500); 9 Sep 2008 11:10:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84864 invoked by uid 99); 9 Sep 2008 11:10:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 04:10:54 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 11:09:56 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Kd174-0002dw-Or
	for java-user@lucene.apache.org; Tue, 09 Sep 2008 04:10:26 -0700
Message-ID: <19390096.post@talk.nabble.com>
Date: Tue, 9 Sep 2008 04:10:26 -0700 (PDT)
From: lilalfyalien <amy@oxfordcc.co.uk>
To: java-user@lucene.apache.org
Subject: Building Relationships between documents?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: amy@oxfordcc.co.uk
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I think I have a very easy question to answer (I am a Lucene beginner and
like it very much!): I have built lucene documents and indexes from a
dataset from a relational database. I have the table Entities and the table
Products. Each product has one entity and Entities therefore can have
multiple products. I want my user to be able to search Entity-level
attributes but get the product level data back. Is the only way to do this
to put all the Entity level data in the same document as the product or can
you establish relationships between documents using queries? 

Thanks you for reading this and thansk for any help in advance!

Lilalfyalien
-- 
View this message in context: http://www.nabble.com/Building-Relationships-between-documents--tp19390096p19390096.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 09 13:11:42 2008
Return-Path: <java-user-return-36001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7679 invoked from network); 9 Sep 2008 13:11:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Sep 2008 13:11:42 -0000
Received: (qmail 39513 invoked by uid 500); 9 Sep 2008 13:11:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39479 invoked by uid 500); 9 Sep 2008 13:11:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39460 invoked by uid 99); 9 Sep 2008 13:11:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 06:11:29 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of raymond.balmes@gmail.com designates 74.125.46.31 as permitted sender)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 13:10:30 +0000
Received: by yw-out-2324.google.com with SMTP id 3so198312ywj.5
        for <java-user@lucene.apache.org>; Tue, 09 Sep 2008 06:11:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=B0c+F4Tzj8kvTUoZvLURRTIjnDZxiyReRSRtb6z6hpE=;
        b=RRjnT0E1vPPrQyUIpEJeaHA7CLi+aGS7yanRdNzoQlUhtBSBwWnc40Ni9LfaQOM3pA
         PJwWx/jDd3ItYU6SnOD3I+z0qNKb0vQ5BD1xHwvm6hqTBNZ5zAYzLwas4IKF/IuTfUTw
         IN6ddekuwe7VDFDG+bNiIcJXjWtpljpgXnDVI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=dyMzxeJMS1di9R2fdwDyvmHLOU/dfkNpAXhEE3FfC80IqmPJR70U0r4DVItL0dosxB
         pOE3FZ0FossiI+zeuwHl2LVHPVwuYRKE2rfYB1Qhp0K8SunKV8ha5swcXQ9girG8PFBt
         i74xCHFPukAUemmrcasqGMguwHHTW1mpsRQmk=
Received: by 10.103.221.5 with SMTP id y5mr11226051muq.34.1220965861074;
        Tue, 09 Sep 2008 06:11:01 -0700 (PDT)
Received: by 10.103.214.9 with HTTP; Tue, 9 Sep 2008 06:11:01 -0700 (PDT)
Message-ID: <4014d98b0809090611w57186248gd94a525080d62700@mail.gmail.com>
Date: Tue, 9 Sep 2008 15:11:01 +0200
From: "=?ISO-8859-1?Q?Raymond_Balm=E8s?=" <raymond.balmes@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Beginner: Specific indexing
In-Reply-To: <Pine.LNX.4.62.0809081521470.16629@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_22604_16524275.1220965861065"
References: <4014d98b0808301202k46a05677l3bb5fd6e8c9b124@mail.gmail.com>
	 <Pine.LNX.4.62.0809021041280.5494@radix.cryptio.net>
	 <4014d98b0809021250j7a774a82xf2974a026d36a8e7@mail.gmail.com>
	 <Pine.LNX.4.62.0809042143540.5350@radix.cryptio.net>
	 <4014d98b0809050552u6a5966d8jbd175c0709d4a1c@mail.gmail.com>
	 <Pine.LNX.4.62.0809051037410.12113@radix.cryptio.net>
	 <4014d98b0809051329w55f06384k4e5f5eb6b2722f3f@mail.gmail.com>
	 <Pine.LNX.4.62.0809081521470.16629@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_22604_16524275.1220965861065
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well that is well explained in "Lucene in Action" if you want to search
files you have to build a file parser and there is a good example given. So
not really my problem.

But I thought I could go thru the token stream only once, where I have to go
twice 1. for detecting my triplets , 2. for indexing the text.

-Raymond-

On Tue, Sep 9, 2008 at 12:27 AM, Chris Hostetter
<hossman_lucene@fucit.org>wrote:

>
> : I think I'm getting you. But the files I'm  going to parse have many
> formats
> : : PDF, HTML, Word.
> : they don't have a particular structure, memos if you will. But the ones
> I'm
> : interested in will have the triplets I described
>
> Ahhhh...  see this is something i completley didn't realize.  "Lucene" as
> a library really doesn't provide any sort of mechanism for doing text
> extraction from unknown file formats ... With some small exceptions (like
> the HTMLStripTokenizer in Solr) the TokenStream concept is much more about
> finding "Tokens" from a stream of plain text -- not about finding "Text"
> in arbitrary (possibly binary) files.
>
> You'll probably wantto check out the Tika subproject...
>    http://incubator.apache.org/tika/
> ...or some of the various "How do i index _____ documents?" FAQs...
>    http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_22604_16524275.1220965861065--

From java-user-return-36002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 09 13:20:29 2008
Return-Path: <java-user-return-36002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10102 invoked from network); 9 Sep 2008 13:20:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Sep 2008 13:20:29 -0000
Received: (qmail 52501 invoked by uid 500); 9 Sep 2008 13:20:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52324 invoked by uid 500); 9 Sep 2008 13:20:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52313 invoked by uid 99); 9 Sep 2008 13:20:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 06:20:19 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 13:19:19 +0000
Received: by gxk6 with SMTP id 6so3381001gxk.5
        for <java-user@lucene.apache.org>; Tue, 09 Sep 2008 06:18:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=nWNjhtT8qCwCmhvlMwtnfi46VfB1Z7fIUfV6xXUiwfQ=;
        b=DCtedNC/Q6Oqlbyz5vKaPVCwr+cqHGnDCGlGq99igw61iQ0gUzFoKHOWvafglLcGjk
         q98lXi3gQGA+FfN+zUzKjQeEy+TLxyO3i9j1YBvbDWfTxYM8FlPLkhoon6vOozfa6UOk
         0QR9nXBf9TIVvuC1VcAG5G5pXjxn0SiyiADO8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=boHTEbL5fl5jExmwwFdnJ72zSmE3z82Maw0NyTO0d72gqu/jqkOVQ4TFbfDOYlHN/Q
         kEsvbTIatdH2iedAUF5RkH+efZHt3QlREfcMY6DBXtbM96/Sv6KL5KD+izjOG6EkJE+h
         yRNm2Y6bRAPQs9bQlYNXKQYMle+uaIB5OYIQk=
Received: by 10.142.170.3 with SMTP id s3mr5755799wfe.252.1220966329958;
        Tue, 09 Sep 2008 06:18:49 -0700 (PDT)
Received: by 10.142.111.8 with HTTP; Tue, 9 Sep 2008 06:18:49 -0700 (PDT)
Message-ID: <6e3ae6310809090618v7d7d9b57safcbb099f6237aaa@mail.gmail.com>
Date: Tue, 9 Sep 2008 06:18:49 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Building Relationships between documents?
In-Reply-To: <19390096.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_122748_18882232.1220966329945"
References: <19390096.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_122748_18882232.1220966329945
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

If you want to do it in just one search, yes, you have to put the Entities
attributes into the documents.
But you can search twice. The second time using values from the first
search, say entitiy_id, to search the products.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!

On Tue, Sep 9, 2008 at 4:10 AM, lilalfyalien <amy@oxfordcc.co.uk> wrote:

>
> Hi,
>
> I think I have a very easy question to answer (I am a Lucene beginner and
> like it very much!): I have built lucene documents and indexes from a
> dataset from a relational database. I have the table Entities and the table
> Products. Each product has one entity and Entities therefore can have
> multiple products. I want my user to be able to search Entity-level
> attributes but get the product level data back. Is the only way to do this
> to put all the Entity level data in the same document as the product or can
> you establish relationships between documents using queries?
>
> Thanks you for reading this and thansk for any help in advance!
>
> Lilalfyalien
> --
> View this message in context:
> http://www.nabble.com/Building-Relationships-between-documents--tp19390096p19390096.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_122748_18882232.1220966329945--

From java-user-return-36003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 09 13:23:46 2008
Return-Path: <java-user-return-36003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11411 invoked from network); 9 Sep 2008 13:23:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Sep 2008 13:23:46 -0000
Received: (qmail 54861 invoked by uid 500); 9 Sep 2008 13:23:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54828 invoked by uid 500); 9 Sep 2008 13:23:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54816 invoked by uid 99); 9 Sep 2008 13:23:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 06:23:38 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 131.246.120.220 is neither permitted nor denied by domain of christian.reuschling@gmail.com)
Received: from [131.246.120.220] (HELO mailgw1.uni-kl.de) (131.246.120.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 13:22:39 +0000
Received: from dfki.uni-kl.de (dfki-1002.dfki.uni-kl.de [131.246.195.2])
	by mailgw1.uni-kl.de (8.13.8/8.13.8/Debian-3) with ESMTP id m89DN7XR007962
	for <java-user@lucene.apache.org>; Tue, 9 Sep 2008 15:23:07 +0200
Received: from serv-4100.kl.dfki.de (serv-4100.kl.dfki.de [192.168.41.180])
	by dfki.uni-kl.de (8.13.8+Sun/8.11.4) with ESMTP id m89DN797001506
	for <java-user@lucene.apache.org>; Tue, 9 Sep 2008 15:23:07 +0200 (CEST)
Received: from [192.168.41.166] (pc-4176.kl.dfki.de [192.168.41.166])
	by serv-4100.kl.dfki.de (8.13.8+Sun/8.13.8) with ESMTP id m89DN7vI008094
	for <java-user@lucene.apache.org>; Tue, 9 Sep 2008 15:23:07 +0200 (CEST)
Message-ID: <48C678BB.2080800@gmail.com>
Date: Tue, 09 Sep 2008 15:23:07 +0200
From: Christian Reuschling <christian.reuschling@gmail.com>
User-Agent: Thunderbird 2.0.0.16 (X11/20080720)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: which version of lucene do you recommend
X-Enigmail-Version: 0.95.7
OpenPGP: id=AF96660F;
	url=hkp://wwwkeys.eu.pgp.net
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

in the past, I made really good experiences with the svn versions of lucene -
I never had problems, and everything feeled stable.

Currently, I get unexpected exceptions from time to time:

java.lang.RuntimeException: after flush: fdx size mismatch: 1 docs vs 0 length in bytes of _3g6n.fdx
	at org.apache.lucene.index.StoredFieldsWriter.closeDocStore(StoredFieldsWriter.java:94)
	at org.apache.lucene.index.DocFieldConsumers.closeDocStore(DocFieldConsumers.java:83)
	at org.apache.lucene.index.DocFieldProcessor.closeDocStore(DocFieldProcessor.java:47)
	at org.apache.lucene.index.DocumentsWriter.closeDocStore(DocumentsWriter.java:367)
	at org.apache.lucene.index.DocumentsWriter.flush(DocumentsWriter.java:567)
	at org.apache.lucene.index.IndexWriter.doFlush(IndexWriter.java:3618)
	at org.apache.lucene.index.IndexWriter.flush(IndexWriter.java:3527)
	at org.apache.lucene.index.IndexWriter.closeInternal(IndexWriter.java:1709)
	at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1674)
	at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1648)

I'm not shure how I should proceed now. Yesterday I switched to the new svn build, but no
change. Can you recommend the svn version, or would you say I should switch back to the
release?


Thanks in advance

Christian


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 09 13:30:18 2008
Return-Path: <java-user-return-36004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14551 invoked from network); 9 Sep 2008 13:30:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Sep 2008 13:30:18 -0000
Received: (qmail 63539 invoked by uid 500); 9 Sep 2008 13:30:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63294 invoked by uid 500); 9 Sep 2008 13:30:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63283 invoked by uid 99); 9 Sep 2008 13:30:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 06:30:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 13:29:11 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Beginner: Specific indexing
Date: Tue, 9 Sep 2008 09:29:38 -0400
Message-ID: <9294E20AED46934EA459020706463F94EF37F6@SUEXCL-02.ad.syr.edu>
In-Reply-To: <4014d98b0809090611w57186248gd94a525080d62700@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Beginner: Specific indexing
Thread-Index: AckSfZ4/WtjhcXCIT5Gc6nFDm7Ai0QAAXrwA
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Raymond,

Check out SinkTokenizer/TeeTokenFilter:
<http://lucene.apache.org/java/2_3_2/api/org/apache/lucene/analysis/TeeTo=
kenFilter.html>

Look at the unit tests for usage hints:
<http://svn.apache.org/viewvc/lucene/java/trunk/src/test/org/apache/lucen=
e/analysis/TeeSinkTokenTest.java?revision=3D687357&view=3Dmarkup>

Steve

On 09/09/2008 at 9:11 AM, Raymond Balm=E8s wrote:
> Well that is well explained in "Lucene in Action" if you want
> to search files you have to build a file parser and there is a good
> example given. So not really my problem.
>=20
> But I thought I could go thru the token stream only once,
> where I have to go twice 1. for detecting my triplets ,
> 2. for indexing the text.
>=20
> -Raymond-
>=20
> On Tue, Sep 9, 2008 at 12:27 AM, Chris Hostetter
> <hossman_lucene@fucit.org>wrote:
>=20
> >=20
> > > I think I'm getting you. But the files I'm  going to
> parse have many
> > formats
> > > > PDF, HTML, Word.
> > > they don't have a particular structure, memos if you
> will. But the ones
> > I'm
> > > interested in will have the triplets I described
> >=20
> > Ahhhh...  see this is something i completley didn't realize.  =
"Lucene"
> > as a library really doesn't provide any sort of mechanism for doing
> > text extraction from unknown file formats ... With some small
> > exceptions (like the HTMLStripTokenizer in Solr) the TokenStream
> > concept is much more about finding "Tokens" from a stream of plain =
text
> > -- not about finding "Text" in arbitrary (possibly binary) files.
> >=20
> > You'll probably wantto check out the Tika subproject...
> >    http://incubator.apache.org/tika/ ...or some of the various "How =
do
> >    i index _____ documents?" FAQs...
> >    http://wiki.apache.org/lucene-java/LuceneFAQ
> >=20
> >=20
> > -Hoss

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 09 13:34:08 2008
Return-Path: <java-user-return-36005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16080 invoked from network); 9 Sep 2008 13:34:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Sep 2008 13:34:08 -0000
Received: (qmail 67201 invoked by uid 500); 9 Sep 2008 13:33:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67167 invoked by uid 500); 9 Sep 2008 13:33:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67156 invoked by uid 99); 9 Sep 2008 13:33:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 06:33:59 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 13:33:00 +0000
Received: by gxk6 with SMTP id 6so3427902gxk.5
        for <java-user@lucene.apache.org>; Tue, 09 Sep 2008 06:33:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=ZJDk+/ch/RZrSxASdawKNVDgqlDfBOuNVmP6PuRgnaI=;
        b=xdYbPKzbZoWY5Lbjbj63F5yqNexfsVWLbkzxdE7Wq4ND+wp9KeTzWt8Sv+F0U6AHIJ
         dzCEOdkigHNb7C9t5HZR3KmDFS4Ip7ChpWuQroKifgyHxeJr0Cbg7mitpC3k4TkloiME
         qK49D0lEJGpwRpuyDAF5hWUp6QAhGv1am4R38=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=KTr8ThtQdOBN73v9KILlGx6IMdrbyNzqW9Qg3z/BCDhBEvgY4mCyc+9Nz7bupaDPx3
         /D7d9s3fjjyZswmT6wZbifR5nJx0rTbf2zJUrlsL6negOwPBkchkH4zQX96oQGKDgM/s
         oZ3nSD73cq/nNneTLhcffayaDoQr6+qdr8Byg=
Received: by 10.86.71.1 with SMTP id t1mr3821fga.36.1220967210222;
        Tue, 09 Sep 2008 06:33:30 -0700 (PDT)
Received: by 10.86.76.4 with HTTP; Tue, 9 Sep 2008 06:33:30 -0700 (PDT)
Message-ID: <359a92830809090633s3a6fe5f2i72f7df83d15249e5@mail.gmail.com>
Date: Tue, 9 Sep 2008 09:33:30 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Building Relationships between documents?
In-Reply-To: <19390096.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_60266_24700779.1220967210219"
References: <19390096.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_60266_24700779.1220967210219
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You must get your head out of the RDBMS world when
using lucene <G>. There's nothing in Lucene that
expresses relationships like a db. The usual solution is
to de-normalize your database at index time so you can
do reasonably simple searches that express your desired
relationship...

Best
Erick

On Tue, Sep 9, 2008 at 7:10 AM, lilalfyalien <amy@oxfordcc.co.uk> wrote:

>
> Hi,
>
> I think I have a very easy question to answer (I am a Lucene beginner and
> like it very much!): I have built lucene documents and indexes from a
> dataset from a relational database. I have the table Entities and the table
> Products. Each product has one entity and Entities therefore can have
> multiple products. I want my user to be able to search Entity-level
> attributes but get the product level data back. Is the only way to do this
> to put all the Entity level data in the same document as the product or can
> you establish relationships between documents using queries?
>
> Thanks you for reading this and thansk for any help in advance!
>
> Lilalfyalien
> --
> View this message in context:
> http://www.nabble.com/Building-Relationships-between-documents--tp19390096p19390096.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_60266_24700779.1220967210219--

From java-user-return-36006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 09 13:46:54 2008
Return-Path: <java-user-return-36006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21621 invoked from network); 9 Sep 2008 13:46:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Sep 2008 13:46:54 -0000
Received: (qmail 93439 invoked by uid 500); 9 Sep 2008 13:46:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93409 invoked by uid 500); 9 Sep 2008 13:46:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93398 invoked by uid 99); 9 Sep 2008 13:46:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 06:46:44 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 13:45:46 +0000
Received: by gxk6 with SMTP id 6so3465121gxk.5
        for <java-user@lucene.apache.org>; Tue, 09 Sep 2008 06:45:16 -0700 (PDT)
Received: by 10.151.14.5 with SMTP id r5mr23476794ybi.70.1220967915527;
        Tue, 09 Sep 2008 06:45:15 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id n26sm1880717ele.6.2008.09.09.06.45.14
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 09 Sep 2008 06:45:14 -0700 (PDT)
Message-Id: <15F4AD1C-7BCE-4233-B6A9-CE27A34047D7@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <48C678BB.2080800@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: which version of lucene do you recommend
Date: Tue, 9 Sep 2008 09:45:13 -0400
References: <48C678BB.2080800@gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


We try very hard to keep Lucene's trunk usable, but, sneaky things do  
slip in from time to time so you certainly have to do your own  
testing.  And if you hit problems, be sure to raise them!

Which exact JRE version are you using?  It could be you are hitting  
the Sun JRE bug described here:

      https://issues.apache.org/jira/browse/LUCENE-1282

in which case you either have to downgrade or upgrade your JRE.

Mike

Christian Reuschling wrote:

> in the past, I made really good experiences with the svn versions of  
> lucene -
> I never had problems, and everything feeled stable.
>
> Currently, I get unexpected exceptions from time to time:
>
> java.lang.RuntimeException: after flush: fdx size mismatch: 1 docs  
> vs 0 length in bytes of _3g6n.fdx
> 	at  
> org 
> .apache 
> .lucene 
> .index.StoredFieldsWriter.closeDocStore(StoredFieldsWriter.java:94)
> 	at  
> org 
> .apache 
> .lucene.index.DocFieldConsumers.closeDocStore(DocFieldConsumers.java: 
> 83)
> 	at  
> org 
> .apache 
> .lucene.index.DocFieldProcessor.closeDocStore(DocFieldProcessor.java: 
> 47)
> 	at  
> org 
> .apache 
> .lucene.index.DocumentsWriter.closeDocStore(DocumentsWriter.java:367)
> 	at  
> org.apache.lucene.index.DocumentsWriter.flush(DocumentsWriter.java: 
> 567)
> 	at org.apache.lucene.index.IndexWriter.doFlush(IndexWriter.java:3618)
> 	at org.apache.lucene.index.IndexWriter.flush(IndexWriter.java:3527)
> 	at  
> org.apache.lucene.index.IndexWriter.closeInternal(IndexWriter.java: 
> 1709)
> 	at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1674)
> 	at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1648)
>
> I'm not shure how I should proceed now. Yesterday I switched to the  
> new svn build, but no
> change. Can you recommend the svn version, or would you say I should  
> switch back to the
> release?
>
>
> Thanks in advance
>
> Christian
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 09 15:55:40 2008
Return-Path: <java-user-return-36007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90779 invoked from network); 9 Sep 2008 15:55:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Sep 2008 15:55:39 -0000
Received: (qmail 85575 invoked by uid 500); 9 Sep 2008 15:55:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85471 invoked by uid 500); 9 Sep 2008 15:55:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85459 invoked by uid 99); 9 Sep 2008 15:55:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 08:55:30 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of fromboise@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 09 Sep 2008 15:54:31 +0000
Received: (qmail invoked by alias); 09 Sep 2008 15:54:00 -0000
Received: from xdsldf075.osnanet.de (HELO elgeilo) [89.166.159.75]
  by mail.gmx.net (mp023) with SMTP; 09 Sep 2008 17:54:00 +0200
X-Authenticated: #6059999
X-Provags-ID: V01U2FsdGVkX1/Kofkq1yTKLeX/qUx2VpCUnRPHvnTT6/VvMQ8Rax
	4Jh8gCcnetVay/
Message-ID: <007001c91294$51ad9540$6a7ba8c0@elgeilo>
From: "Marie-Christine Plogmann" <fromboise@gmx.de>
To: <java-user@lucene.apache.org>
Subject: Lucene Index
Date: Tue, 9 Sep 2008 17:54:18 +0200
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_006D_01C912A5.14B32B80"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3350
X-Y-GMX-Trusted: 0
X-FuHaFi: 0.77,0.77
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_006D_01C912A5.14B32B80
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi all,
I am currently using a (slightly modified) version of the IndexFiles =
demo class of Lucene to index a corpus. As I understand it, the index =
lists for each term the documents it occurs in.
My question is now, if this is in terms of frequency counts (the term =
occurs x times within the document) or just in terms of binary features =
(occurs/ occurs not)?

Thank you in advance!

Marie

------=_NextPart_000_006D_01C912A5.14B32B80--


From java-user-return-36008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 09 16:35:49 2008
Return-Path: <java-user-return-36008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13909 invoked from network); 9 Sep 2008 16:35:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Sep 2008 16:35:49 -0000
Received: (qmail 50828 invoked by uid 500); 9 Sep 2008 16:35:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50799 invoked by uid 500); 9 Sep 2008 16:35:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50788 invoked by uid 99); 9 Sep 2008 16:35:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 09:35:39 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=DATE_IN_PAST_06_12,RCVD_IN_DNSWL_LOW,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 16:34:38 +0000
Received: from root by ciao.gmane.org with local (Exim 4.43)
	id 1Kd6BC-0004ff-Mn
	for java-user@lucene.apache.org; Tue, 09 Sep 2008 16:35:02 +0000
Received: from home.schibsted.no ([80.91.33.33])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Tue, 09 Sep 2008 16:35:02 +0000
Received: from mick by home.schibsted.no with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Tue, 09 Sep 2008 16:35:02 +0000
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Mck <mick@semb.wever.org>
Subject:  Replacing FAST functionality at sesam.no - ShingleFilter+ exact
	matching
Date:  Tue, 09 Sep 2008 09:31:56 +0200
Lines: 106
Message-ID:  <1220941046.8075.14.camel@localhost>
Mime-Version:  1.0
Content-Type:  multipart/signed; micalg=pgp-sha1; protocol="application/pgp-signature"; boundary="=-tErjgaGKY0DGUk8790yG"
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: home.schibsted.no
X-Mailer: Evolution 2.22.3.1 
Sender: news <news@ger.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org

--=-tErjgaGKY0DGUk8790yG
Content-Type: text/plain
Content-Transfer-Encoding: quoted-printable

-- original post was on solr's user list. --
-- i've reposted here as it's centered on the ShingleFilter which comes fro=
m lucene --


*ShortVersion*
 is there a way to make the ShingleFilter perform exact matching via
inserting ^ $ begin/end markers?


*LongVersion*
At sesam.no we want to replace a FAST (fast.no) Query Matching Server
with a Solr index.

The index we are trying to replace is not a regular index, but specially
configured to perform phrases (and sub-phrases) matches against several
large lists (like an index with only a 'title' field).

I'm not sure of a correct, or logical, name for the behaviour we are
after, but it is like a combination between Shingles and exact matching.

Our test list has 9 entries:
 "abcd efgh ijkl", "abcd efgh", "efgh ijkl", "abcd", "efgh", "ijkl", "ijkl =
efgh", "efgh abcd", and "ijkl efgh abcd".

The query behaviour we are looking for is like:
   (i've included ^$ to denote the exact matching)

Original Query   --> Filtered Query
 abcd            -->  ^abcd$
"abcd efgh"      --> (^abcd$ ^"abcd efgh"$ ^efgh$)
"abcd efgh ijkl" --> (^abcd$ ^"abcd efgh"$ ^"abcd efgh ijkl"$ ^efgh$ ^"efgh=
 ijkl"$ ^ijkl$)

I'm using a trunk build of Solr, and using the example/solr for the solr
home. I'm using trunk builds of lucene libraries as well.

Editing schema.xml so to put these entries in as type=3D"string" and using
defaultOperator=3D"OR" gives the expected exact matching functionality
given queries are quoted, eg /solr/select/?q=3D"abcd efgh ijkl"
  ( I've noticed that this exact matching can also be achieved with
TextField and using KeywordTokenizer at index time. )

So then i change type=3D"string" to type=3D"shingleString" along with

> <fieldType name=3D"shingleString" class=3D"solr.StrField" positionIncreme=
ntGap=3D"100" omitNorms=3D"true" >
>       <analyzer type=3D"index">
>         <tokenizer class=3D"solr.WhitespaceTokenizerFactory"/>
>       </analyzer>
>       <analyzer type=3D"query">
>         <tokenizer class=3D"solr.WhitespaceTokenizerFactory"/>
>         <filter class=3D"solr.ShingleFilterFactory" outputUnigrams=3D"tru=
e" outputUnigramIfNoNgram=3D"true" maxShingleSize=3D"99" />
>       </analyzer>
> </fieldType>

I never get any hits with quoted queries.
Without quotes i only get the unigrams.

I get the same outcomes using fieldType@class=3D"solr.TextField" and in
the index analyzer tokenizer@class=3D"solr.KeywordTokenizerFactory".

Debugging ShingleFilter I see that (with the quotes) the shingles array
fills up with the expected shingles.
And the Query (infact a MultiPhraseQuery)
  returned from SolrQueryParser.getFieldQuery()
  looks like

list_entry_shingle:"(abcd abcd efgh abcd efgh ijkl) (efgh efgh ijkl) ijkl"

I'm struggling to make sense of this.
How can the shingles be matched if they aren't quoted?

I would be expecting a Query instead like:
abcd "abcd efgh" "abcd efgh ijkl" efgh "efgh ijkl" ijkl

(This with the ShingleFilter disabled does indeed work perfectly).

Am i barking up the wrong tree?
Is there a way to get the shingles phrased?
Or, better yet, is there a way to get the shingles surrounded with ^ $
being/end markers for exact matching?

~mck


--=-tErjgaGKY0DGUk8790yG
Content-Type: application/pgp-signature; name=signature.asc
Content-Description: This is a digitally signed message part

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.9 (GNU/Linux)

iEYEABECAAYFAkjGFPQACgkQkdPrePiuutPSogCdE7PKLkfXOq1OOFU040UQAtPx
p0cAoLtXNLPvYQgi3XWg8C1H/YFTCwCj
=6wiE
-----END PGP SIGNATURE-----

--=-tErjgaGKY0DGUk8790yG--



From java-user-return-36009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 09 16:57:37 2008
Return-Path: <java-user-return-36009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28301 invoked from network); 9 Sep 2008 16:57:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Sep 2008 16:57:36 -0000
Received: (qmail 85141 invoked by uid 500); 9 Sep 2008 16:57:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85109 invoked by uid 500); 9 Sep 2008 16:57:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85098 invoked by uid 99); 9 Sep 2008 16:57:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 09:57:26 -0700
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 16:56:27 +0000
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1Kd6WQ-0005dl-BQ
	for java-user@lucene.apache.org; Tue, 09 Sep 2008 16:56:58 +0000
Received: from wever.org ([83.243.151.80])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Tue, 09 Sep 2008 16:56:58 +0000
Received: from mick by wever.org with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Tue, 09 Sep 2008 16:56:58 +0000
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Mck <mick@semb.wever.org>
Subject:  Re: Replacing FAST functionality at sesam.no - ShingleFilter+
	exact matching
Date:  Tue, 09 Sep 2008 18:58:45 +0200
Lines: 58
Message-ID:  <1220979525.8908.13.camel@localhost>
References:  <1220941046.8075.14.camel@localhost>
Mime-Version:  1.0
Content-Type:  multipart/signed; micalg=pgp-sha1; protocol="application/pgp-signature"; boundary="=-kVJNe02EvjTiq2jTKcDi"
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: wever.org
In-Reply-To: <1220941046.8075.14.camel@localhost>
X-Mailer: Evolution 2.22.3.1 
Sender: news <news@ger.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org

--=-kVJNe02EvjTiq2jTKcDi
Content-Type: text/plain
Content-Transfer-Encoding: quoted-printable

> *ShortVersion*
>  is there a way to make the ShingleFilter perform exact matching via
> inserting ^ $ begin/end markers?

Reading through the mailing list i see how exact matching can be done, a
la STFW to myself...

So the ShortVersion now stands:

For my query "abcd efgh ijkl"
Why does a (perfect looking) MultiPhraseQuery with
	termArrays[0] =3D { list_entry_shingles:abcd
			  list_entry_shingles:abcd efgh
			  list_entry_shingles:abcd efgh ijkl=20
			}
	termArrays[1] =3D { list_entry_shingles:efgh
			  list_entry_shingles:efgh ijkl=20
			}
	termArrays[2] =3D { list_entry_shingles:ijkl }

return only "abcd efgh ijkl" !?

(when the field is indexed as TextField this is the only hit i get)
(when the field is indexed as StrField i get zero hits!)

When the index contains 9 entries:
 "abcd efgh ijkl", "abcd efgh", "efgh ijkl", "abcd", "efgh", "ijkl", "ijkl =
efgh", "efgh abcd", and "ijkl efgh abcd".

Does this MultiPhraseQuery actually require a match against *every* item
in each termArray on any document?

~mck

--=20
"Everyone thinks of changing the world, but no one thinks of changing
himself." Leo Tolstoy=20
| semb.wever.org | sesat.no | sesam.no |

--=-kVJNe02EvjTiq2jTKcDi
Content-Type: application/pgp-signature; name=signature.asc
Content-Description: This is a digitally signed message part

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.9 (GNU/Linux)

iEYEABECAAYFAkjGq0UACgkQkdPrePiuutPomgCg+4JvslllkFMoGIOKZ89LKDZD
nbAAoL/tHAC2RkBN3e6DwzqW46Jjn3zs
=GZmw
-----END PGP SIGNATURE-----

--=-kVJNe02EvjTiq2jTKcDi--



From java-user-return-36010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 09 17:36:34 2008
Return-Path: <java-user-return-36010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46790 invoked from network); 9 Sep 2008 17:36:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Sep 2008 17:36:30 -0000
Received: (qmail 33304 invoked by uid 500); 9 Sep 2008 17:36:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33272 invoked by uid 500); 9 Sep 2008 17:36:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33261 invoked by uid 99); 9 Sep 2008 17:36:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 10:36:21 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tmoreira@liferay.com designates 208.70.128.104 as permitted sender)
Received: from [208.70.128.104] (HELO smtp-gw78.mailanyone.net) (208.70.128.104)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 17:35:21 +0000
Received: from mailanyone.net
	by smtp-gw78.mailanyone.net with esmtpsa (TLSv1:AES256-SHA:256)
	(MailAnyone extSMTP liferay.com.192874)
	id 1Kd782-0002vO-PB
	for java-user@lucene.apache.org; Tue, 09 Sep 2008 12:35:51 -0500
Message-ID: <48C6B37C.2010300@liferay.com>
Date: Tue, 09 Sep 2008 14:33:48 -0300
From: Thiago Moreira <tmoreira@liferay.com>
Reply-To: tmoreira@liferay.com
Organization: Liferay, INC
User-Agent: Thunderbird 2.0.0.16 (X11/20080723)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Similarity percentage between two Strings
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


    For those interested in my solution I took this article as based to
implement the requirements.

    http://www.catalysoft.com/articles/StrikeAMatch.html

    Thanks.


----- Original Message -----
From: ian.lea@gmail.com
Sent: Thu, September 4, 2008 1:20
Subject:Re: Similarity percentage between two Strings


Googling for "java string similarity" throws up some stuff you might
find useful.


--
Ian.


On Wed, Sep 3, 2008 at 11:58 PM, Thiago Moreira <tmoreira@liferay.com> 
wrote:
>
>     Well, the similar definition that I'm looking for is the number 2,
maybe
> the number 3, but to start the number 2 is enough. If you guys think
that is
> not a Lucene problem what else tool can I use to implement this
> requirement??
>
>     Thanks
> ________________________________
> Thiago Moreira
> Software Engineer
> tmoreira@liferay.com
> Liferay, Inc.
> Enterprise. Open Source. For Life.
>
>
> N. Hira wrote:
>
> I don't know how much of this is a Lucene problem, but -- as I'm sure you
> will inevitably hear from others on the list -- it depends on what your
> definition of "similar" is.
>
> By similar, do you mean:
> 1.  Identical, except for variations in case (upper/lower)
> 2.  Allow 1., but also allow prefixes/suffixes (e.g., "FW:  " or "...
> (summary")
> 3.  Allow 1., 2. and permit some new terms ... how many?
> 4.  Allow all of the above and allow some changes to terms using stemming
> (E.g., "Google releases Chrome" is similar to "Google announces the release
> of its new Chrome web browser")
> ....
>
> I'm sure you see where this is going.  So ... how do you define similar?
>
> Good luck!
>
> -h
> ----------------------------------------------------------------------
> Hira, N.R.
> Cognocys, Inc.
>
> On 03-Sep-2008, at 2:52 PM, Thiago Moreira wrote:
>
>
>     Hey all,
>
>     I want to know how much two Strings are similar! The thing is: I'm
> processing an email box and I want to group all messages that have the
> subject similar, makes sense?? I looked on the documentation but I didn't
> find how to accomplish this. It's not necessary add the messages or the
> subjects on some kind of index. I'm using 2.3.2 version of Lucene.
>
>     Anyone has some idea?
>
>     Thanks in advance.
> --
> Thiago Moreira
> Software Engineer
> tmoreira@liferay.com
> Liferay, Inc.
> Enterprise. Open Source. For Life.



----- End of original message -----


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 09 18:12:23 2008
Return-Path: <java-user-return-36011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72112 invoked from network); 9 Sep 2008 18:12:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Sep 2008 18:12:22 -0000
Received: (qmail 95905 invoked by uid 500); 9 Sep 2008 18:12:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95873 invoked by uid 500); 9 Sep 2008 18:12:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95862 invoked by uid 99); 9 Sep 2008 18:12:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 11:12:13 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a13.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 18:11:14 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a13.g.dreamhost.com (Postfix) with ESMTP id DDA5D129B35
	for <java-user@lucene.apache.org>; Tue,  9 Sep 2008 11:12:51 -0700 (PDT)
Message-Id: <86720EB6-2CA4-4B99-BDC2-60D8CBD293C4@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <007001c91294$51ad9540$6a7ba8c0@elgeilo>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Lucene Index
X-Priority: 3
Date: Tue, 9 Sep 2008 14:11:11 -0400
References: <007001c91294$51ad9540$6a7ba8c0@elgeilo>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

Term frequency information is kept in the index.

On Sep 9, 2008, at 11:54 AM, Marie-Christine Plogmann wrote:

> Hi all,
> I am currently using a (slightly modified) version of the IndexFiles  
> demo class of Lucene to index a corpus. As I understand it, the  
> index lists for each term the documents it occurs in.
> My question is now, if this is in terms of frequency counts (the  
> term occurs x times within the document) or just in terms of binary  
> features (occurs/ occurs not)?
>
> Thank you in advance!
>
> Marie


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 09 18:24:21 2008
Return-Path: <java-user-return-36012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84332 invoked from network); 9 Sep 2008 18:24:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Sep 2008 18:24:21 -0000
Received: (qmail 9901 invoked by uid 500); 9 Sep 2008 18:24:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9866 invoked by uid 500); 9 Sep 2008 18:24:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9855 invoked by uid 99); 9 Sep 2008 18:24:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 11:24:11 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a6.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 18:23:11 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a6.g.dreamhost.com (Postfix) with ESMTP id 36446109F37
	for <java-user@lucene.apache.org>; Tue,  9 Sep 2008 11:24:33 -0700 (PDT)
Message-Id: <2D0CBDDB-CBB3-4DF4-A294-EBA1042CD7DC@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <6e3ae6310809062235y24ecc40k2ef7b97bafc56641@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: memory leak during Lucene Search
Date: Tue, 9 Sep 2008 14:23:11 -0400
References: <6e3ae6310809062235y24ecc40k2ef7b97bafc56641@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

Just chipping in that I recall there being a number of discussions on  
java-dev about ThreadLocal and web containers and how they should be  
handled.  Not sure if it pertains here or not, but you might find http://lucene.markmail.org/message/keosgz2c2yjc7qre?q=ThreadLocal 
  helpful.

You might also consider asking on java-dev in this case, which usually  
isn't recommended, but this is pretty low-level stuff and seems more  
appropriate there.  It does seem like a problem though and I'm not  
sure of the alternative just yet.

On Sep 7, 2008, at 1:35 AM, Chris Lu wrote:

> Unless my understanding is wrong, there is a memory leak for Lucene  
> search
> from Lucene-1195.(svn r659602, May23,2008)
>
> This patch brings in a ThreadLocal cache to TermInfosReader.
>
> It's usually recommended to keep the reader open, and reuse it when
> possible. In a common J2EE application, the http requests are usually
> handled by different threads. But since the cache is ThreadLocal,  
> the cache
> are not really usable by other threads. What's worse, the cache can  
> not be
> cleared by another thread!
>
> This leak is not so obvious usually. But my case is using  
> RAMDirectory,
> having several hundred megabytes. So one un-released resource is  
> obvious to
> me.
>
> Here is the reference tree:
> org.apache.lucene.store.RAMDirectory
>  |- directory of org.apache.lucene.store.RAMFile
>      |- file of org.apache.lucene.store.RAMInputStream
>          |- base of org.apache.lucene.index.CompoundFileReader 
> $CSIndexInput
>              |- input of org.apache.lucene.index.SegmentTermEnum
>                  |- value of java.lang.ThreadLocal$ThreadLocalMap 
> $Entry
>
>
> After I switched back to svn revision 659601, right before this  
> patch is
> checked in, the memory leak is gone.
> Although my case is RAMDirectory, I believe this will affect disk  
> based
> index also.
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 09 18:54:08 2008
Return-Path: <java-user-return-36013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8872 invoked from network); 9 Sep 2008 18:54:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Sep 2008 18:54:08 -0000
Received: (qmail 54721 invoked by uid 500); 9 Sep 2008 18:53:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54676 invoked by uid 500); 9 Sep 2008 18:53:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54665 invoked by uid 99); 9 Sep 2008 18:53:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 11:53:58 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 64.233.170.184 as permitted sender)
Received: from [64.233.170.184] (HELO rn-out-0910.google.com) (64.233.170.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 18:52:59 +0000
Received: by rn-out-0910.google.com with SMTP id j71so774388rne.4
        for <java-user@lucene.apache.org>; Tue, 09 Sep 2008 11:53:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=XfGwsnmAG4vQUs+4J6GbDr0W0ye5p8z61f+cL7xYfU4=;
        b=PDhT6myRr3lfgn3no4cfW8zfBYpeYiI44j+faN1S1AgH4NocBb2c472QlpRA2wlrWg
         uMs28mDok2yp97TMmdpqS+5GHezd7Ilp2emwYSEZ8VFBsqPzB+Bth3LM8ZyCCRHcGXtD
         XwLWSa5MgEPpC14m9Okgu5Rdhu/A4BuHzo00g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=TSt1/HDMhUZ+WfDGWLMY5wincBDGL9nZJFwPjcKvVxR35RuXP049T8MjnobZp63D6F
         ETehtvpwz6/AqxxX61Jk4IsemDBc76bdwyhYVIJlNEdxk4J4dIEhXwL3bQjjAcf9gzgd
         uirTOCIOMeyP+JXHCvU1/3GoqNrXJqJHXz1EI=
Received: by 10.142.230.11 with SMTP id c11mr24723wfh.334.1220986408770;
        Tue, 09 Sep 2008 11:53:28 -0700 (PDT)
Received: by 10.142.111.8 with HTTP; Tue, 9 Sep 2008 11:53:28 -0700 (PDT)
Message-ID: <6e3ae6310809091153i49806befxb6539c8f9af92e3f@mail.gmail.com>
Date: Tue, 9 Sep 2008 11:53:28 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: memory leak during Lucene Search
In-Reply-To: <2D0CBDDB-CBB3-4DF4-A294-EBA1042CD7DC@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_130362_5735868.1220986408764"
References: <6e3ae6310809062235y24ecc40k2ef7b97bafc56641@mail.gmail.com>
	 <2D0CBDDB-CBB3-4DF4-A294-EBA1042CD7DC@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_130362_5735868.1220986408764
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks for the link! I will post the problem there.
In the mean time, any J2EE application developers should know this problem
and try to avoid Lucene checked out on or after May 23,2008, svn version
659602.
I tried svn 659601, which worked fine.

I will follow up on this email list when the problem is fixed.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!

On Tue, Sep 9, 2008 at 11:23 AM, Grant Ingersoll <gsingers@apache.org>wrote:

> Just chipping in that I recall there being a number of discussions on
> java-dev about ThreadLocal and web containers and how they should be
> handled.  Not sure if it pertains here or not, but you might find
> http://lucene.markmail.org/message/keosgz2c2yjc7qre?q=ThreadLocal helpful.
>
> You might also consider asking on java-dev in this case, which usually
> isn't recommended, but this is pretty low-level stuff and seems more
> appropriate there.  It does seem like a problem though and I'm not sure of
> the alternative just yet.
>
> On Sep 7, 2008, at 1:35 AM, Chris Lu wrote:
>
>  Unless my understanding is wrong, there is a memory leak for Lucene search
>> from Lucene-1195.(svn r659602, May23,2008)
>>
>> This patch brings in a ThreadLocal cache to TermInfosReader.
>>
>> It's usually recommended to keep the reader open, and reuse it when
>> possible. In a common J2EE application, the http requests are usually
>> handled by different threads. But since the cache is ThreadLocal, the
>> cache
>> are not really usable by other threads. What's worse, the cache can not be
>> cleared by another thread!
>>
>> This leak is not so obvious usually. But my case is using RAMDirectory,
>> having several hundred megabytes. So one un-released resource is obvious
>> to
>> me.
>>
>> Here is the reference tree:
>> org.apache.lucene.store.RAMDirectory
>>  |- directory of org.apache.lucene.store.RAMFile
>>     |- file of org.apache.lucene.store.RAMInputStream
>>         |- base of org.apache.lucene.index.CompoundFileReader$CSIndexInput
>>             |- input of org.apache.lucene.index.SegmentTermEnum
>>                 |- value of java.lang.ThreadLocal$ThreadLocalMap$Entry
>>
>>
>> After I switched back to svn revision 659601, right before this patch is
>> checked in, the memory leak is gone.
>> Although my case is RAMDirectory, I believe this will affect disk based
>> index also.
>>
>>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_130362_5735868.1220986408764--

From java-user-return-36014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 09 20:12:14 2008
Return-Path: <java-user-return-36014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60911 invoked from network); 9 Sep 2008 20:12:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Sep 2008 20:12:13 -0000
Received: (qmail 63441 invoked by uid 500); 9 Sep 2008 20:11:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63391 invoked by uid 500); 9 Sep 2008 20:11:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63363 invoked by uid 99); 9 Sep 2008 20:11:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 13:11:49 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 20:10:50 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE:  Re: Replacing FAST functionality at sesam.no - ShingleFilter+exact matching
Date: Tue, 9 Sep 2008 16:11:17 -0400
Message-ID: <9294E20AED46934EA459020706463F94EF3810@SUEXCL-02.ad.syr.edu>
In-Reply-To: A<1220979525.8908.13.camel@localhost>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic:  Re: Replacing FAST functionality at sesam.no - ShingleFilter+exact matching
Thread-Index: AckSnS++MrzBeuWtQcSVF5CEmpZhRQACLdfg
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
Cc: <solr-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi mck,

On 09/09/2008 at 12:58 PM, Mck wrote:
> > *ShortVersion*
> >  is there a way to make the ShingleFilter perform exact matching via
> > inserting ^ $ begin/end markers?
>=20
> Reading through the mailing list i see how exact matching can
> be done, a la STFW to myself...
>=20
> So the ShortVersion now stands:
>=20
> For my query "abcd efgh ijkl"
> Why does a (perfect looking) MultiPhraseQuery with
> 	termArrays[0] =3D { list_entry_shingles:abcd
> 			  list_entry_shingles:abcd efgh
> 			  list_entry_shingles:abcd efgh ijkl
> 			}
> 	termArrays[1] =3D { list_entry_shingles:efgh
> 			  list_entry_shingles:efgh ijkl
> 			}
> 	termArrays[2] =3D { list_entry_shingles:ijkl }
>=20
> return only "abcd efgh ijkl" !?
>=20
> (when the field is indexed as TextField this is the only hit i get)
> (when the field is indexed as StrField i get zero hits!)
>=20
> When the index contains 9 entries:
>  "abcd efgh ijkl", "abcd efgh", "efgh ijkl", "abcd", "efgh",
> "ijkl", "ijkl efgh", "efgh abcd", and "ijkl efgh abcd".
>=20
> Does this MultiPhraseQuery actually require a match against
> *every* item in each termArray on any document?

I've never used MultiPhraseQuery, but I *think* (based on the Javadocs) =
that it requires one  match from each termArrays[] entry, contiguously, =
in the same sequence as the termArrays[] entries (unless you add slop, =
which I don't think you're doing).

A TextField index would have ("abcd", "efgh", "ijkl") for the "abcd efgh =
ijkl" document (assuming you used WhitespaceAnalyzer, which I believe =
you showed in one of your emails); unlike all of the other documents, =
one member from each of your query's termArrays[] entries is =
sequentially present, so I think that the behavior you're seeing is =
expected.  If you add "abcd efgh ijkl mnop" as a document, it should =
also be matched.

Looks to me like MultiPhraseQuery is getting in the way.  Shingles that =
begin at the same word are given the same position by ShingleFilter, and =
Solr's FieldQParserPlugin creates a MultiPhraseQuery when it encounters =
tokens in a query with the same position.  I think what you want is to =
convert queries into shingle disjunctions (*any* matching shingle =
results in a hit),  right?

Any Solr cognoscenti know how to arrange for Solr's query parser to =
avoid invoking MultiPhraseQuery?

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 09 20:37:06 2008
Return-Path: <java-user-return-36015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78664 invoked from network); 9 Sep 2008 20:37:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Sep 2008 20:37:06 -0000
Received: (qmail 99885 invoked by uid 500); 9 Sep 2008 20:36:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99218 invoked by uid 500); 9 Sep 2008 20:36:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99207 invoked by uid 99); 9 Sep 2008 20:36:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 13:36:56 -0700
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 20:35:56 +0000
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1Kd9wn-00073n-Up
	for java-user@lucene.apache.org; Tue, 09 Sep 2008 20:36:25 +0000
Received: from wever.org ([83.243.151.80])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Tue, 09 Sep 2008 20:36:25 +0000
Received: from mick by wever.org with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Tue, 09 Sep 2008 20:36:25 +0000
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Mck <mick@semb.wever.org>
Subject:  Re: Replacing FAST functionality at sesam.no - ShingleFilter+exact
	matching
Date:  Tue, 09 Sep 2008 22:38:14 +0200
Lines: 62
Message-ID:  <1220992693.8908.25.camel@localhost>
References:  <1220979525.8908.13.camel@localhost>
	 <9294E20AED46934EA459020706463F94EF3810@SUEXCL-02.ad.syr.edu>
Mime-Version:  1.0
Content-Type:  multipart/signed; micalg=pgp-sha1; protocol="application/pgp-signature"; boundary="=-Y4NophVKakSqDFXwIBBr"
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: wever.org
In-Reply-To: <9294E20AED46934EA459020706463F94EF3810@SUEXCL-02.ad.syr.edu>
X-Mailer: Evolution 2.22.3.1 
Sender: news <news@ger.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org

--=-Y4NophVKakSqDFXwIBBr
Content-Type: text/plain
Content-Transfer-Encoding: quoted-printable


> Looks to me like MultiPhraseQuery is getting in the way.  Shingles
> that begin at the same word are given the same position by
> ShingleFilter, and Solr's FieldQParserPlugin creates a
> MultiPhraseQuery when it encounters tokens in a query with the same
> position.  I think what you want is to convert queries into shingle
> disjunctions (*any* matching shingle results in a hit),  right?

Yes you're right Steve. thank you.

One way, i see now, to get the behaviour i want is to set the unigrams'
positionIncrement to zero instead of one.

For example in ShingleFilter.fillOutputBuffer(..) replacing the two
ocurrances of=20
> .setPositionIncrement(1);
with
> .setPositionIncrement(0);

Then i end up with a MultiPhraseQuery with
        termArrays[0] =3D { list_entry_shingles:abcd
                          list_entry_shingles:abcd efgh
                          list_entry_shingles:abcd efgh ijkl=20
                          list_entry_shingles:efgh
                          list_entry_shingles:efgh ijkl=20
                          list_entry_shingles:ijkl }

and it works perfectly :-)

I see no way of configuring this behaviour though.=20
 If it is possible and someone can say how this would be a real godsend.

Otherwise would a patch to ShingleFilter that offers an option
"unigramPositionIncrement" (that defaults to 1) likely be accepted into
trunk?

~mck

--=20
"Between two evils, I always pick the one I never tried before." Mae
West=20
| semb.wever.org | sesat.no | sesam.no |

--=-Y4NophVKakSqDFXwIBBr
Content-Type: application/pgp-signature; name=signature.asc
Content-Description: This is a digitally signed message part

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.9 (GNU/Linux)

iEYEABECAAYFAkjG3rUACgkQkdPrePiuutMqlwCfXzjH0yE7oF+tIHYeoxbK88IY
siQAoLqUgTsegUKQWrJ2RBvSL9j4tlid
=cLyT
-----END PGP SIGNATURE-----

--=-Y4NophVKakSqDFXwIBBr--



From java-user-return-36016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 09 21:21:05 2008
Return-Path: <java-user-return-36016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6617 invoked from network); 9 Sep 2008 21:21:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Sep 2008 21:21:04 -0000
Received: (qmail 71125 invoked by uid 500); 9 Sep 2008 21:20:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70524 invoked by uid 500); 9 Sep 2008 21:20:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70513 invoked by uid 99); 9 Sep 2008 21:20:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 14:20:54 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 21:19:54 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE:  Re: Replacing FAST functionality at sesam.no - ShingleFilter+exactmatching
Date: Tue, 9 Sep 2008 17:20:01 -0400
Message-ID: <9294E20AED46934EA459020706463F94EF3814@SUEXCL-02.ad.syr.edu>
In-Reply-To: A<1220992693.8908.25.camel@localhost>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic:  Re: Replacing FAST functionality at sesam.no - ShingleFilter+exactmatching
Thread-Index: AckSu9beIHMxWjJYRCyLu6/85KL7wgAAxNFA
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

On 09/09/2008 at 4:38 PM, Mck wrote:
>=20
> > Looks to me like MultiPhraseQuery is getting in the way.  Shingles
> > that begin at the same word are given the same position by
> > ShingleFilter, and Solr's FieldQParserPlugin creates a
> > MultiPhraseQuery when it encounters tokens in a query with the same
> > position.  I think what you want is to convert queries into shingle
> > disjunctions (*any* matching shingle results in a hit),  right?
>=20
> Yes you're right Steve. thank you.
>=20
> One way, i see now, to get the behaviour i want is to set the =
unigrams'
> positionIncrement to zero instead of one.
>=20
> For example in ShingleFilter.fillOutputBuffer(..) replacing the two
> ocurrances of
> > .setPositionIncrement(1);=20
> with=20
> > .setPositionIncrement(0);
>=20
> Then i end up with a MultiPhraseQuery with
>         termArrays[0] =3D { list_entry_shingles:abcd
>                           list_entry_shingles:abcd efgh
>                           list_entry_shingles:abcd efgh ijkl
>                           list_entry_shingles:efgh
>                           list_entry_shingles:efgh ijkl
>                           list_entry_shingles:ijkl }
>=20
> and it works perfectly :-)

It works because you've set all of the shingles to be at the same =
position - probably better to change the one instance of =
.setPositionIncrement(0) to .setPositionIncrement(1) - that way, =
MultiPhraseQuery will not be invoked, and the standard disjunction thing =
should happen.

> [W]ould a patch to ShingleFilter that offers an option
> "unigramPositionIncrement" (that defaults to 1) likely be
> accepted into trunk?

The issue is not directly related to whether a unigram is involved, but =
rather whether or not tokens that begin at the same word are given the =
same position.  The option thus should be named something like =
"coterminalPositionIncrement".  This seems like a reasonable addition, =
and a patch likely would be accepted, if it included unit tests.

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 10 01:21:19 2008
Return-Path: <java-user-return-36017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 203 invoked from network); 10 Sep 2008 01:21:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2008 01:21:19 -0000
Received: (qmail 32875 invoked by uid 500); 10 Sep 2008 01:21:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32840 invoked by uid 500); 10 Sep 2008 01:21:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32829 invoked by uid 99); 10 Sep 2008 01:21:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 18:21:07 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of need4spd@gmail.com designates 209.85.128.187 as permitted sender)
Received: from [209.85.128.187] (HELO fk-out-0910.google.com) (209.85.128.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 01:20:08 +0000
Received: by fk-out-0910.google.com with SMTP id 18so1773982fkq.5
        for <java-user@lucene.apache.org>; Tue, 09 Sep 2008 18:20:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=bJmqwU4ENMLO+4VqZIhEr6n6/HtkCXVVzUVvVf3r9OU=;
        b=PwWpIPIuQtvsNMdcpNrYWyNp5JMpJMyCCn+vLM/0DuA8j2hXO4Seo6GCqK0XfbZGoI
         Z3Hm5dV6rl7Tnw4zItyTRoquo50P0J72KZSy/JURbSQvPOTDUfx8brp4IasjgA87DDun
         mvLZoNbHbH7/Ef0U0xMo48p5robZb00WcD0Do=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=dMY8TPSpfdCTmfdrRpLa0M0QQ+0b4ejlKzWNn8YmR/oHCafYxov1eVWniCQ1z53W24
         iU8PAXHAqcMHy4bciX59Btm7RoohOSWXVI36gSFy6gkgfRKLfiTHzARG5/UL4/L/pzrC
         Jwp1Z4DXPuS8R/9eMoRFJIkCitjGfbiEr6kX4=
Received: by 10.181.21.6 with SMTP id y6mr320636bki.50.1221009638994;
        Tue, 09 Sep 2008 18:20:38 -0700 (PDT)
Received: by 10.180.247.13 with HTTP; Tue, 9 Sep 2008 18:20:38 -0700 (PDT)
Message-ID: <a823853a0809091820r69c345aax334f08019dd2a86c@mail.gmail.com>
Date: Wed, 10 Sep 2008 10:20:38 +0900
From: "=?EUC-KR?B?wOW/67yu?=" <need4spd@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Incremental Indexing.
In-Reply-To: <8c4e68610809090152j737e2cfdw211d3a4e14c31602@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7351_5334285.1221009638984"
References: <a823853a0809081737w2bbe5c1ag840d91cf5781081a@mail.gmail.com>
	 <8c4e68610809090152j737e2cfdw211d3a4e14c31602@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7351_5334285.1221009638984
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: base64
Content-Disposition: inline

VGhhbmtzIGZvciB5b3VyIGhlbHBzLgpJIGhhdmUgYWJvdXQgNDAwMDAwIGRvY3VtZW50cyBpbiBt
eSBpbmRleCBhbmQgaXQgaXMgY29uc3RhbnQgdXBkYXRlIChwcmljZQpvciBuYW1lLi4gZXRjKS4K
SSB3aWxsIHRyeSB1c2UgZnVuY3Rpb24gZGVsZXRlIGFuZCBhZGQuCgpBbmQgSmFzb24KSSBhbSBp
bnRlcmVzdGVkIGluIGl0IChhY3R1YWxseSBhYm91dCBsdWNlbmUpLApidXQgSSBhbSB3b3JyaWVk
IEkgZG8gbm90IHVuZGVyc3RhbmQgY29yZSBsb2dpYyBhbGwgYWJvdXQgbHVjZW5lIGFuZCBJIGFt
Cm5vdCBnb29kIGF0IGVuZ2xpc2guCgpJIHdhcyBzdHVpZWQgYWJvdXQganVzdCBBbmFseXplci4g
Rm9yIG1ha2luZyBLb3JlYW4gQW5hbHl6ZXIuCgpJIHdvbmRlciBJIGNhbiBkbyBzb21ldGhpbmcg
bmV2ZXJ0aGVsZXNzLiA6LSkKCi0tCkphbmcuCgoKCgowOC4gOS4gOSwgSWFuIExlYSA8aWFuLmxl
YUBnbWFpbC5jb20+tNTAzCDA27y6Ogo+Cj4gU3VjaCBpbmNyZW1lbnRhbCBpbmRleGluZyBpcyBz
dGFuZGFyZCBwcmFjdGljZSBhbmQgdW5saWtlbHkgdG8gY2F1c2UgYQo+IHByb2JsZW0sIHBhcnRp
Y3VsYXJseSBpZiB5b3UgYXJlIG9ubHkgd29ya2luZyB3aXRoIGEgZmV3IHRob3VzYW5kCj4gZG9j
dW1lbnRzLiAgSW5zdGVhZCBvZiBkZWxldGUvYWRkIHlvdSBjb3VsZCB1c2UKPiBJbmRleFdyaXRl
ci51cGRhdGVEb2N1bWVudCgpLgo+Cj4KPiAtLQo+IElhbi4KPgo+Cj4gMjAwOC85LzkgwOW/67yu
IDxuZWVkNHNwZEBnbWFpbC5jb20+Ogo+ID4gSGl+Lgo+ID4gSSBoYXZhIGEgcXVlc3Rpb24gYWJv
dXQgbHVjZW5lIGluY3JlbWVudGFsIGluZGV4aW5nLgo+ID4KPiA+IEkgd2FudCB0byBkbyBpbmNy
ZW1lbnRhbCBpbmRleGluZyBteSBnb29kcyBkYXRhLgo+ID4gRm9yIGV4YW1wbGUsIEkgaGF2ZSA0
IHByb2R1Y3RzIGRhdGFzIHdpdGgKPiA+ICJHT09EX0lEIiwiTkFNRSIsIlBSSUNFIiwiQ1JFQVRF
REFURSIsIlVQREFURURBVEUiIGNvbHVubXMuCj4gPgo+ID4gMSwgaXBvZCwgMzAwMDAsIDIwMDgt
MTEtMTA6MTE6MDAsIDIwMDgtMTEtMTA6MTE6MDAKPiA+IDIsIGphdmEgYm9vaywgMjAwMDAsIDIw
MDgtMTEtMTA6MTE6MDAsIDIwMDgtMTEtMTA6MTE6MDAKPiA+IDMsIGNhbGVuZGFyLCAxMDAwMCwg
MjAwOC0xMS0xMDoxMTowMCwgMjAwOC0xMS0xMDoxMTowMAo+ID4gNCwgbHVjZW5lIGJvb2ssIDUw
MDAsIDIwMDgtMTEtMTA6MTE6MDAsIDIwMDgtMTEtMTA6MTE6MDAKPiA+Cj4gPiBJZiBJIHdpbGwg
SW5kZXhpbmcgdGhlc2UgZGF0YXMsIHRoZXkgd2lsbCBoYXZlIGEgdW5pcXVlIGRvY2lkLgo+ID4K
PiA+IEFuZCBJIHVwZGF0ZSBvbmUgb2YgdGhlbSB0aGF0IGhhcyBnb29kX2lkICIxIiwgcHJpY2Ug
Y29sdW5tIDMwMDAwIHRvCj4gMzUwMDAKPiA+IGFuZCBVUERBVEVEQVRFIGNvbHVubSAyMDA4LTEx
LTEwOjExOjAwIHRvIDIwMDgtMTEtMTA6MTI6MDAuCj4gPgo+ID4gSW4gdGhpcyBjYXNlICwgSSB3
YW50IHVwZGF0ZSBteSBpbmRleCB3aXRoIG5ldyBkYXRhIGdvb2RfaWQgIjEiLgo+ID4KPiA+IElu
IGJvb2ssIElmIEkgd2FudCB0byB1cGRhdGUgbXkgaW5kZXggdGhlbiBJIHNob3VsZCBkZWxldGUg
dGFyZ2V0IGRhdGEKPiBmcm9tCj4gPiBpbmRleCBhbmQgYWRkIGRhdGEgdG8gaW5kZXguCj4gPiBJ
ZiB0aGUgdGFyZ2V0IGRhdGEgaXMgb25lLCBJIHRoaW5rIEl0IGlzIG5vIG1hdHRlciBmb3IgbWUs
IGFuZAo+IGFwcGxpY2F0aW9ucy4KPiA+IEJ1dCBpZiB0aGUgdGFyZ2V0IGRhdGFzIGFyZSBvdmVy
IDMwMDAgKG9yIG1vcmUpICwgdGhpcyBhcHBsY2F0aW9ucyBtdXN0Cj4gZG8KPiA+IGpvYiBkZWxl
dGUgZGF0YSBhbmQgYWRkIGRhdGEgZWFjaCAzMDAwKG9yIG1vcmUpIHRpbWVzLgo+ID4gSSB3b3Jy
aWVkIGFib3V0IEl0IHdpbGwgYmUgcHJvYmxlbSB0byBteSBhcHBsaWNhdGlvbnMuCj4gPiBPciBJ
cyB0aGlzIGpvYiBubyBtYXR0ZXI/Cj4gPgo+ID4gSSBuZWVkIHlvdXIgaGVscHMuLiA6LSkKPiA+
Cj4gPiBtYW55IHRoYW5rcy4KPiA+IEphbmcuCj4gPgo+ID4gLS0KPiA+IERFVr/rvcQKPiA+IGh0
dHA6Ly9kZXZ5b25nc2lrLnRpc3RvcnkuY29tCj4gPgo+CgoKCi0tIApERVa/673ECmh0dHA6Ly9k
ZXZ5b25nc2lrLnRpc3RvcnkuY29tCg==
------=_Part_7351_5334285.1221009638984--

From java-user-return-36018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 10 01:30:23 2008
Return-Path: <java-user-return-36018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8969 invoked from network); 10 Sep 2008 01:30:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2008 01:30:22 -0000
Received: (qmail 45041 invoked by uid 500); 10 Sep 2008 01:30:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45011 invoked by uid 500); 10 Sep 2008 01:30:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45000 invoked by uid 99); 10 Sep 2008 01:30:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 18:30:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.162.177 as permitted sender)
Received: from [209.85.162.177] (HELO el-out-1112.google.com) (209.85.162.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 01:29:15 +0000
Received: by el-out-1112.google.com with SMTP id m34so471749ele.14
        for <java-user@lucene.apache.org>; Tue, 09 Sep 2008 18:29:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=rCmDCgKQqXDVA21q0pYZW42Oyyw9Sji43nkOzG8mtxI=;
        b=sLgniZ8Zi51uCAnwaYDW+KTkRWg3nfjq3h+zSLFR8lq6uE5v30mc6RmAM5c2iJ+yXk
         yHLOc3vv1QazFklFu+oEwmC9wVF/OXNXOa0nOFaM0o9VtZyQZEBRWjCRijcFdqUSm9Ca
         NGDM+aUJb+i33mxCrFE6ds8+Tk11gRRwTRs08=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=F2Gq8f51JrlRKNohNU7gM6DO9BC15NGx3/hJxf3HheGdrX8fHzFQSyCQ0zdr0x3WyV
         hiQ3fkxMUCcsbAUfq00uQxUfnfpU2e01LZzj9uXPFsuA3jlxuOd++LkHZwdXfFLPiPih
         mUL5Aen1hfx7R/w65djsXTArYSsS+uCsPcsTg=
Received: by 10.150.12.10 with SMTP id 10mr1043266ybl.124.1221010186693;
        Tue, 09 Sep 2008 18:29:46 -0700 (PDT)
Received: by 10.151.118.7 with HTTP; Tue, 9 Sep 2008 18:29:46 -0700 (PDT)
Message-ID: <85d3c3b60809091829tf37d32cq5e71600f51fd6b20@mail.gmail.com>
Date: Tue, 9 Sep 2008 21:29:46 -0400
From: "Jason Rutherglen" <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Incremental Indexing.
In-Reply-To: <a823853a0809091820r69c345aax334f08019dd2a86c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <a823853a0809081737w2bbe5c1ag840d91cf5781081a@mail.gmail.com>
	 <8c4e68610809090152j737e2cfdw211d3a4e14c31602@mail.gmail.com>
	 <a823853a0809091820r69c345aax334f08019dd2a86c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

SGkgSmFuZywKClllcywgYW5kIEkgaGF2ZSBub3QgY29tcGxldGVkIGl0IGVpdGhlci4uLiBQZXJo
YXBzIHdoZW4gSSBkbyB5b3UgY2FuIHVzZSBpdC4KCkJlc3QgcmVnYXJkcywKSmFzb24KCk9uIFR1
ZSwgU2VwIDksIDIwMDggYXQgOToyMCBQTSwgwOW/67yuIDxuZWVkNHNwZEBnbWFpbC5jb20+IHdy
b3RlOgo+IFRoYW5rcyBmb3IgeW91ciBoZWxwcy4KPiBJIGhhdmUgYWJvdXQgNDAwMDAwIGRvY3Vt
ZW50cyBpbiBteSBpbmRleCBhbmQgaXQgaXMgY29uc3RhbnQgdXBkYXRlIChwcmljZQo+IG9yIG5h
bWUuLiBldGMpLgo+IEkgd2lsbCB0cnkgdXNlIGZ1bmN0aW9uIGRlbGV0ZSBhbmQgYWRkLgo+Cj4g
QW5kIEphc29uCj4gSSBhbSBpbnRlcmVzdGVkIGluIGl0IChhY3R1YWxseSBhYm91dCBsdWNlbmUp
LAo+IGJ1dCBJIGFtIHdvcnJpZWQgSSBkbyBub3QgdW5kZXJzdGFuZCBjb3JlIGxvZ2ljIGFsbCBh
Ym91dCBsdWNlbmUgYW5kIEkgYW0KPiBub3QgZ29vZCBhdCBlbmdsaXNoLgo+Cj4gSSB3YXMgc3R1
aWVkIGFib3V0IGp1c3QgQW5hbHl6ZXIuIEZvciBtYWtpbmcgS29yZWFuIEFuYWx5emVyLgo+Cj4g
SSB3b25kZXIgSSBjYW4gZG8gc29tZXRoaW5nIG5ldmVydGhlbGVzcy4gOi0pCj4KPiAtLQo+IEph
bmcuCj4KPgo+Cj4KPiAwOC4gOS4gOSwgSWFuIExlYSA8aWFuLmxlYUBnbWFpbC5jb20+tNTAzCDA
27y6Ogo+Pgo+PiBTdWNoIGluY3JlbWVudGFsIGluZGV4aW5nIGlzIHN0YW5kYXJkIHByYWN0aWNl
IGFuZCB1bmxpa2VseSB0byBjYXVzZSBhCj4+IHByb2JsZW0sIHBhcnRpY3VsYXJseSBpZiB5b3Ug
YXJlIG9ubHkgd29ya2luZyB3aXRoIGEgZmV3IHRob3VzYW5kCj4+IGRvY3VtZW50cy4gIEluc3Rl
YWQgb2YgZGVsZXRlL2FkZCB5b3UgY291bGQgdXNlCj4+IEluZGV4V3JpdGVyLnVwZGF0ZURvY3Vt
ZW50KCkuCj4+Cj4+Cj4+IC0tCj4+IElhbi4KPj4KPj4KPj4gMjAwOC85LzkgwOW/67yuIDxuZWVk
NHNwZEBnbWFpbC5jb20+Ogo+PiA+IEhpfi4KPj4gPiBJIGhhdmEgYSBxdWVzdGlvbiBhYm91dCBs
dWNlbmUgaW5jcmVtZW50YWwgaW5kZXhpbmcuCj4+ID4KPj4gPiBJIHdhbnQgdG8gZG8gaW5jcmVt
ZW50YWwgaW5kZXhpbmcgbXkgZ29vZHMgZGF0YS4KPj4gPiBGb3IgZXhhbXBsZSwgSSBoYXZlIDQg
cHJvZHVjdHMgZGF0YXMgd2l0aAo+PiA+ICJHT09EX0lEIiwiTkFNRSIsIlBSSUNFIiwiQ1JFQVRF
REFURSIsIlVQREFURURBVEUiIGNvbHVubXMuCj4+ID4KPj4gPiAxLCBpcG9kLCAzMDAwMCwgMjAw
OC0xMS0xMDoxMTowMCwgMjAwOC0xMS0xMDoxMTowMAo+PiA+IDIsIGphdmEgYm9vaywgMjAwMDAs
IDIwMDgtMTEtMTA6MTE6MDAsIDIwMDgtMTEtMTA6MTE6MDAKPj4gPiAzLCBjYWxlbmRhciwgMTAw
MDAsIDIwMDgtMTEtMTA6MTE6MDAsIDIwMDgtMTEtMTA6MTE6MDAKPj4gPiA0LCBsdWNlbmUgYm9v
aywgNTAwMCwgMjAwOC0xMS0xMDoxMTowMCwgMjAwOC0xMS0xMDoxMTowMAo+PiA+Cj4+ID4gSWYg
SSB3aWxsIEluZGV4aW5nIHRoZXNlIGRhdGFzLCB0aGV5IHdpbGwgaGF2ZSBhIHVuaXF1ZSBkb2Np
ZC4KPj4gPgo+PiA+IEFuZCBJIHVwZGF0ZSBvbmUgb2YgdGhlbSB0aGF0IGhhcyBnb29kX2lkICIx
IiwgcHJpY2UgY29sdW5tIDMwMDAwIHRvCj4+IDM1MDAwCj4+ID4gYW5kIFVQREFURURBVEUgY29s
dW5tIDIwMDgtMTEtMTA6MTE6MDAgdG8gMjAwOC0xMS0xMDoxMjowMC4KPj4gPgo+PiA+IEluIHRo
aXMgY2FzZSAsIEkgd2FudCB1cGRhdGUgbXkgaW5kZXggd2l0aCBuZXcgZGF0YSBnb29kX2lkICIx
Ii4KPj4gPgo+PiA+IEluIGJvb2ssIElmIEkgd2FudCB0byB1cGRhdGUgbXkgaW5kZXggdGhlbiBJ
IHNob3VsZCBkZWxldGUgdGFyZ2V0IGRhdGEKPj4gZnJvbQo+PiA+IGluZGV4IGFuZCBhZGQgZGF0
YSB0byBpbmRleC4KPj4gPiBJZiB0aGUgdGFyZ2V0IGRhdGEgaXMgb25lLCBJIHRoaW5rIEl0IGlz
IG5vIG1hdHRlciBmb3IgbWUsIGFuZAo+PiBhcHBsaWNhdGlvbnMuCj4+ID4gQnV0IGlmIHRoZSB0
YXJnZXQgZGF0YXMgYXJlIG92ZXIgMzAwMCAob3IgbW9yZSkgLCB0aGlzIGFwcGxjYXRpb25zIG11
c3QKPj4gZG8KPj4gPiBqb2IgZGVsZXRlIGRhdGEgYW5kIGFkZCBkYXRhIGVhY2ggMzAwMChvciBt
b3JlKSB0aW1lcy4KPj4gPiBJIHdvcnJpZWQgYWJvdXQgSXQgd2lsbCBiZSBwcm9ibGVtIHRvIG15
IGFwcGxpY2F0aW9ucy4KPj4gPiBPciBJcyB0aGlzIGpvYiBubyBtYXR0ZXI/Cj4+ID4KPj4gPiBJ
IG5lZWQgeW91ciBoZWxwcy4uIDotKQo+PiA+Cj4+ID4gbWFueSB0aGFua3MuCj4+ID4gSmFuZy4K
Pj4gPgo+PiA+IC0tCj4+ID4gREVWv+u9xAo+PiA+IGh0dHA6Ly9kZXZ5b25nc2lrLnRpc3Rvcnku
Y29tCj4+ID4KPj4KPgo+Cj4KPiAtLQo+IERFVr/rvcQKPiBodHRwOi8vZGV2eW9uZ3Npay50aXN0
b3J5LmNvbQo+Cg==


From java-user-return-36019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 10 02:07:01 2008
Return-Path: <java-user-return-36019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44341 invoked from network); 10 Sep 2008 02:07:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2008 02:07:01 -0000
Received: (qmail 69947 invoked by uid 500); 10 Sep 2008 02:06:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69912 invoked by uid 500); 10 Sep 2008 02:06:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69898 invoked by uid 99); 10 Sep 2008 02:06:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 19:06:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.246.22.40] (HELO mail.atlassian.com) (63.246.22.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 02:05:51 +0000
Received: from [192.168.3.153] (unknown [203.63.130.33])
	by mail.atlassian.com (Postfix) with ESMTP id 3FBC41631E75
	for <java-user@lucene.apache.org>; Tue,  9 Sep 2008 21:06:22 -0500 (CDT)
Mime-Version: 1.0 (Apple Message framework v753)
Content-Transfer-Encoding: 7bit
Message-Id: <F5DC200B-41ED-419D-A1BB-70FB6C165978@atlassian.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: David Loeng <dave@atlassian.com>
Subject: 10Gb of .nfsXXX files about a week old in NFS based index directory 
Date: Wed, 10 Sep 2008 12:06:34 +1000
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

We have a customer using lucene on an NFS directory, which contains  
~10Gb of .nfsXXXX files. These files are the means by which NFS  
implements delete-on-close semantics (that is, if the index writer  
commits a delete of a file that is still held open by an index  
reader, the file is renamed to .nfsXXXXX).

The version of Lucene in use is 2.2.

Our IndexSearcher is refreshed almost every minute (new IndexSearcher 
(Directory directory)) depending on whether content has been added/ 
updated/deleted.

What must be done to guarantee that lucene does not hold onto files  
that have been deleted?

Can a dereferenced IndexSearcher (closeReader=true) which has not  
been close()-ed cause lucene to be holding onto file handles of  
deleted index files?

Cheers,
Dave









---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 10 03:58:20 2008
Return-Path: <java-user-return-36020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20831 invoked from network); 10 Sep 2008 03:58:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2008 03:58:20 -0000
Received: (qmail 43370 invoked by uid 500); 10 Sep 2008 03:58:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43329 invoked by uid 500); 10 Sep 2008 03:58:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43318 invoked by uid 99); 10 Sep 2008 03:58:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Sep 2008 20:58:10 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=DNS_FROM_RFC_BOGUSMX,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of micah@affinitycircles.com designates 207.7.158.80 as permitted sender)
Received: from [207.7.158.80] (HELO boom.affinityengines.com) (207.7.158.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 03:57:11 +0000
Received: from [10.0.1.3] (c-67-188-86-193.hsd1.ca.comcast.net [67.188.86.193])
	by boom.affinityengines.com (Postfix) with ESMTP id D2A3E1DB121
	for <java-user@lucene.apache.org>; Tue,  9 Sep 2008 20:57:11 -0700 (PDT)
Message-Id: <D82132F3-B8C8-46A0-A396-F62E497F8DA0@affinitycircles.com>
From: Micah Jaffe <micah@affinitycircles.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v928.1)
Subject: Understanding/controlling role of Weight in IndexSearcher
Date: Tue, 9 Sep 2008 20:57:10 -0700
X-Mailer: Apple Mail (2.928.1)
X-Virus-Checked: Checked by ClamAV on apache.org

Quick summary of situation (using 2.3.2, StandardAnalyzer):

I've taken a field that was being created as a "default" for a  
document, e.g. a giant string of glommed on values from other field  
values and instead created a boolean query to hit all the fields which  
would normally contribute to this default field.  The problem being  
that now it appears the searcher will not return documents that do in  
fact match on one of the many OR'd fields.  I was able to sleuth this  
out thanks to the little checkbox in Luke that forced it to return any  
matches on a search, but I'm a bit puzzled on how best to approach a  
fix.  I'm guessing by setting a low weight the searcher would return  
expected matches, but I'm also curious how weights are calculated.   
For instance when searching on an address field, e.g. "1234 William  
Way", the searcher wouldn't normally return a document when querying  
on "william", but an exact match on the first name field would (which  
is also boosted higher in the index, which is another thing I'm also  
wondering that might be contributing to the less-than-expected results).

thoughts?  pointers?  best practices?

thanks,
Micah

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 10 07:54:13 2008
Return-Path: <java-user-return-36021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35463 invoked from network); 10 Sep 2008 07:54:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2008 07:54:13 -0000
Received: (qmail 44695 invoked by uid 500); 10 Sep 2008 07:54:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44669 invoked by uid 500); 10 Sep 2008 07:54:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44658 invoked by uid 99); 10 Sep 2008 07:54:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 00:54:03 -0700
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 07:53:02 +0000
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1KdKW3-0005eZ-Qz
	for java-user@lucene.apache.org; Wed, 10 Sep 2008 07:53:31 +0000
Received: from wever.org ([83.243.151.80])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 10 Sep 2008 07:53:31 +0000
Received: from mick by wever.org with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 10 Sep 2008 07:53:31 +0000
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Mck <mick@semb.wever.org>
Subject:  RE:  Re: Replacing FAST functionality at sesam.no -
	ShingleFilter+exactmatching
Date:  Wed, 10 Sep 2008 09:55:18 +0200
Lines: 45
Message-ID:  <1221033318.8908.50.camel@localhost>
References:  <1220992693.8908.25.camel@localhost>
	 <9294E20AED46934EA459020706463F94EF3814@SUEXCL-02.ad.syr.edu>
Mime-Version:  1.0
Content-Type:  multipart/signed; micalg=pgp-sha1; protocol="application/pgp-signature"; boundary="=-hzdiWu7SzZum799Urbxt"
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: wever.org
In-Reply-To: <9294E20AED46934EA459020706463F94EF3814@SUEXCL-02.ad.syr.edu>
X-Mailer: Evolution 2.22.3.1 
Sender: news <news@ger.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org

--=-hzdiWu7SzZum799Urbxt
Content-Type: text/plain
Content-Transfer-Encoding: quoted-printable


> probably better to change the one instance of .setPositionIncrement(0)
> to .setPositionIncrement(1) - that way, MultiPhraseQuery will not be
> invoked, and the standard disjunction thing should happen.

Tried this.
As you say i end up with instead a
PhraseQuery
        terms =3D { list_entry_shingles:abcd
                  list_entry_shingles:abcd efgh
                  list_entry_shingles:abcd efgh ijkl=20
                  list_entry_shingles:efgh
                  list_entry_shingles:efgh ijkl=20
                  list_entry_shingles:ijkl }

But this does not return the hits i want.
(It returns one hit if TextField and zero hits if StrField, the same
behaviour i mentioned before).

~mck

--=20
"Traveller, there are no paths. Paths are made by walking." Australian
Aboriginal saying=20
| semb.wever.org | sesat.no | sesam.no |

--=-hzdiWu7SzZum799Urbxt
Content-Type: application/pgp-signature; name=signature.asc
Content-Description: This is a digitally signed message part

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.9 (GNU/Linux)

iEYEABECAAYFAkjHfWYACgkQkdPrePiuutNKKACdGWisz87ZseOlgR/abGVKa/93
uxYAoOTetHR00lnUjeqVn69lhqANZtFC
=1aZm
-----END PGP SIGNATURE-----

--=-hzdiWu7SzZum799Urbxt--



From java-user-return-36022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 10 09:12:57 2008
Return-Path: <java-user-return-36022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73609 invoked from network); 10 Sep 2008 09:12:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2008 09:12:57 -0000
Received: (qmail 15640 invoked by uid 500); 10 Sep 2008 09:12:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15604 invoked by uid 500); 10 Sep 2008 09:12:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15593 invoked by uid 99); 10 Sep 2008 09:12:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 02:12:47 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of leonidms@gmail.com designates 74.125.44.30 as permitted sender)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 09:11:47 +0000
Received: by yx-out-2324.google.com with SMTP id 3so1277557yxj.5
        for <java-user@lucene.apache.org>; Wed, 10 Sep 2008 02:12:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=0UxsM+oa4jdrzsqIngjdM4rFa1R6YpHxzDgc+I1o2BA=;
        b=dnZNJDxCYZkre54ytOqoSE0cdElYMgJvIhpPipNRBRTuaO4RqQNgjfMq44jE7Kg8fv
         GL0SUzW5cqLqhE78tvxKpnCAcCfO4yLaXzzUWqy7zhj8lsuJroCcCRbYHeMAN2rOcgtz
         wYJBp6MbC4Yua3PJ+Rd9FF8Np0pwQIiuVTnME=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=LY/GSnRdgjBgdyEgUvPEILWzwPa5Sl0sUfNcfup3P1IXCykP8RcG3036Z+UGAFFVpe
         jq3oP+46ArMToXEEpZNy9QFcqBPRwt4rkDEZqP36KvWU/kNt13COpnppNlOHYPkzvytP
         PojlHr4IOO1Afrptk/SE3FSXucEWAIXxiMhHQ=
Received: by 10.142.11.2 with SMTP id 2mr323790wfk.307.1221037921114;
        Wed, 10 Sep 2008 02:12:01 -0700 (PDT)
Received: by 10.143.41.4 with HTTP; Wed, 10 Sep 2008 02:12:01 -0700 (PDT)
Message-ID: <dcd377ca0809100212t6b8d490eo435206f9ac84df34@mail.gmail.com>
Date: Wed, 10 Sep 2008 12:12:01 +0300
From: "Leonid M." <leonidms@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Newbie question: using Lucene to index hierarchical information.
In-Reply-To: <19381593.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_164975_2094512.1221037921105"
References: <dcd377ca0809010025s1281eff7r5716c444de2fb671@mail.gmail.com>
	 <dcd377ca0809010655y2a9a1bc0i3fe9e2a81d34f1e8@mail.gmail.com>
	 <19266355.post@talk.nabble.com>
	 <dcd377ca0809041230i5b1be63fl7c3b8e8118e2c9db@mail.gmail.com>
	 <19381593.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_164975_2094512.1221037921105
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Karsten,
Thanks a lot. I finally have got Your idea.

Ok, I think it's worth to do the real job now :) Thanks for the advices,
finally I have understood the directions I could go for it.

>
>  do you really need the "Complex scenario"?
>
what kind of query is your use case?

My Query UC is smth like this: find documents where paragraphs are similar
to this document paragraphs or paragraph or part of it (using N-Gramms or
similar/modified tokenenizers and Stemm/NLP like similarity).

I finally understood the idea behind XML-based approach. I think XML based
approach isn't suitable for me anyway for some reasons:

   - DB support (MSSQL and Oracle or some Java ad-hoc solutions)
   - Speed with XPATH like queries on big datasets.

So I assume the the variant You recommend suits me the best.
However it's hard to understand what xtf does by just opening it's source
code and being newbie in Lucene. But thats should be done - should be done,
no one will do my job for me anyway. :))

I'll try to make some time to digg in xtf code. If smth is unclear or
questionable - I assume xtf mailing list would be the right place to ask -
not this particularly one (java-lucene-user)?

Thanks a lot for pointing out possible directions and solutions. I really
appreciate You help and time You spent to provide such as helpful
descriptions. God bless OSS community!

On Tue, Sep 9, 2008 at 12:26 AM, Karsten F.
<karsten-lucene@fiz-technik.de>wrote:

>
> Hi Leonid,
>
> do you really need the "Complex scenario"?
> what kind of query is your use case?
>
> If you really need xpath please look for xml-Databases.
>
> Otherwise you can possible use xtf out of the box, because "indexing of
> large structured documents" is exactly the use case for which xtf was
> developed (TEI documents, but html is less complex then TEI).
> Again the main idea:
> 1. Use xml-Elements (with its descendants) to divide the structured
> document
> into sections.
> 2. index each section as lucene document (field "text") with an extra field
> "section type"
> 3. after all sections of one structured document insert one (terminal)
> lucene document with the other metadata of the structured document (e.g.
> creation date, title, ..)
>
> the document from point 3 is the representative of the structured document
> (and the representative is the unit of retrieval, because the user search
> for a document not for a section)
> If you search e.g. for
> sectionType:table text:words inside section
> you have hits with the lucene documents belonging to the sections.
>
> Possible for your use case it would be enough to insert a stored lucene
> field "document key".
> In xtf the lucene document-number of each hit is incremented until the
> representative is reached.
>
> This is a rough description, but source code of xtf is very readable.
>
> best regards
>
>  Karsten
>
>
>
> leonardinius wrote:
> >
> > Hi all,
> > Thanks a lot for such a quick reply.
> >
> > Both scenario sounds very well for me. I would like to do my best and try
> > to
> > implement any of them (as the proof of the concept) and then
> incrementally
> > improve, retest, investigate and rewrite then :)
> >
> > So, from the soap opera to the question part then:
> >
> >    - How to implement those things (a and b) on the Lucene and Lucene
> >    contribs codebase?
> >       - I looked at the
> >
> >
> http://xtf.wiki.sourceforge.net/tagRef_textIndexer_PreFilter#toctagRef_textIndexer_PreFilter7
> > and
> >       didn't like that (too big, to heavy, ready-to use solution instead
> > of
> >       toolkit). And I didn't understood how to implement "Normal
> > scenario" on top
> >       of that?
> >    - Any suggestions how could I begin implementing these things? Gently
> >    moving from "Normal" scenario to some more advanced "Complex"? What
> > should I
> >    afraid off and possible impacts if any?
> >
> > Have anybody tried to use Lucene to analyse things like that? What would
> > be
> > possible solutions to store indexed data and perform queries on that? If
> > Lucene isn't the right tool for this job, maybe some other toolkit would
> > more useful(possibly on top of the Lucene)
> >
> > Thanks in advance for any suggestions and comments. I would appreciate
> any
> > ideas and directions to look into.
> >
> >
> > On Tue, Sep 2, 2008 at 11:46 AM, Karsten F.
> > <karsten-lucene@fiz-technik.de>wrote:
> >
> >> Take a look to the xml-aware search in xtf (
> >>
> >>
> http://xtf.wiki.sourceforge.net/tagRef_textIndexer_PreFilter#toctagRef_textIndexer_PreFilter7
> >> ).
> >> The idea is to use one lucene-document for each section with only two
> >> fields: "text" and "sectionType".
> >> But to collect all hits belonging to one hierarchical information (e.g.
> >> one
> >> html-File) and compress this to one representative hit in lucene.
> >>
> >> Best regards
> >>  Karsten
> >>
> >
>
> --
> View this message in context:
> http://www.nabble.com/Newbie-question%3A-using-Lucene-to-index-hierarchical-information.-tp19250038p19381593.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Bests regards,
Leonid Maslov!
Personal blog: http://leonardinius.blogspot.com/

Random thought:
Marcel Marceau  - "Never get a mime talking. He won't stop."

------=_Part_164975_2094512.1221037921105--

From java-user-return-36023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 10 09:29:35 2008
Return-Path: <java-user-return-36023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79278 invoked from network); 10 Sep 2008 09:29:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2008 09:29:33 -0000
Received: (qmail 28316 invoked by uid 500); 10 Sep 2008 09:29:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28013 invoked by uid 500); 10 Sep 2008 09:29:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28000 invoked by uid 99); 10 Sep 2008 09:29:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 02:29:23 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 09:28:24 +0000
Received: by gxk6 with SMTP id 6so6062630gxk.5
        for <java-user@lucene.apache.org>; Wed, 10 Sep 2008 02:28:55 -0700 (PDT)
Received: by 10.151.102.21 with SMTP id e21mr1683162ybm.131.1221038934914;
        Wed, 10 Sep 2008 02:28:54 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id j13sm11055363rne.4.2008.09.10.02.28.54
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 10 Sep 2008 02:28:54 -0700 (PDT)
Message-Id: <3FE76BFE-C026-4420-BE43-E3E8A93E2105@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <F5DC200B-41ED-419D-A1BB-70FB6C165978@atlassian.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: 10Gb of .nfsXXX files about a week old in NFS based index directory 
Date: Wed, 10 Sep 2008 05:28:53 -0400
References: <F5DC200B-41ED-419D-A1BB-70FB6C165978@atlassian.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


David Loeng wrote:

> Hi,
>
> We have a customer using lucene on an NFS directory, which contains  
> ~10Gb of .nfsXXXX files. These files are the means by which NFS  
> implements delete-on-close semantics (that is, if the index writer  
> commits a delete of a file that is still held open by an index  
> reader, the file is renamed to .nfsXXXXX).

As long as the held-open file as well as the delete take place from  
the same machine, then those .nfsXXXX files will be created.

> The version of Lucene in use is 2.2.
>
> Our IndexSearcher is refreshed almost every minute (new  
> IndexSearcher(Directory directory)) depending on whether content has  
> been added/updated/deleted.
>
> What must be done to guarantee that lucene does not hold onto files  
> that have been deleted?
>
> Can a dereferenced IndexSearcher (closeReader=true) which has not  
> been close()-ed cause lucene to be holding onto file handles of  
> deleted index files?

You really should call close() on any IndexSearcher you created.

Lucene's FSDirectory.FSIndexInput.Descriptor class does have a  
finalizer that calls close, however, it's not a good idea to rely on  
that.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 10 11:03:06 2008
Return-Path: <java-user-return-36024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30246 invoked from network); 10 Sep 2008 11:03:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2008 11:03:06 -0000
Received: (qmail 39454 invoked by uid 500); 10 Sep 2008 11:02:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39430 invoked by uid 500); 10 Sep 2008 11:02:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39419 invoked by uid 99); 10 Sep 2008 11:02:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 04:02:56 -0700
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 11:01:55 +0000
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1KdNSq-0005al-AO
	for java-user@lucene.apache.org; Wed, 10 Sep 2008 11:02:24 +0000
Received: from wever.org ([83.243.151.80])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 10 Sep 2008 11:02:24 +0000
Received: from mick by wever.org with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 10 Sep 2008 11:02:24 +0000
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Mck <mick@semb.wever.org>
Subject:  RE:  Re: Replacing FAST functionality at sesam.no -
	ShingleFilter+exactmatching
Date:  Wed, 10 Sep 2008 13:04:06 +0200
Lines: 33
Message-ID:  <1221044645.8908.52.camel@localhost>
References:  <1220992693.8908.25.camel@localhost>
	 <9294E20AED46934EA459020706463F94EF3814@SUEXCL-02.ad.syr.edu>
Mime-Version:  1.0
Content-Type:  multipart/signed; micalg=pgp-sha1; protocol="application/pgp-signature"; boundary="=-772vZgQVCJ+yRkYoI+Dh"
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: wever.org
In-Reply-To: <9294E20AED46934EA459020706463F94EF3814@SUEXCL-02.ad.syr.edu>
X-Mailer: Evolution 2.22.3.1 
Sender: news <news@ger.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org

--=-772vZgQVCJ+yRkYoI+Dh
Content-Type: text/plain
Content-Transfer-Encoding: quoted-printable


> [snip] The option thus should be named something like
> "coterminalPositionIncrement".  This seems like a reasonable addition,
> and a patch likely would be accepted, if it included unit tests.

Done.
https://issues.apache.org/jira/browse/LUCENE-1380

~mck

--=20
"The only thing I know, is that I know nothing." Socrates=20
| semb.wever.org | sesat.no | sesam.no |

--=-772vZgQVCJ+yRkYoI+Dh
Content-Type: application/pgp-signature; name=signature.asc
Content-Description: This is a digitally signed message part

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.9 (GNU/Linux)

iEYEABECAAYFAkjHqaUACgkQkdPrePiuutMzXgCghpXkeb0b8eZna2cb5tWYlGmV
5WYAnjcWDqUS2JuBn44Ap8R3Zk/InD8e
=vA7G
-----END PGP SIGNATURE-----

--=-772vZgQVCJ+yRkYoI+Dh--



From java-user-return-36025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 10 11:22:31 2008
Return-Path: <java-user-return-36025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39046 invoked from network); 10 Sep 2008 11:22:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2008 11:22:30 -0000
Received: (qmail 67113 invoked by uid 500); 10 Sep 2008 11:22:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67079 invoked by uid 500); 10 Sep 2008 11:22:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67068 invoked by uid 99); 10 Sep 2008 11:22:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 04:22:21 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,URIBL_GREY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of marcelo.ochoa@gmail.com designates 64.233.178.249 as permitted sender)
Received: from [64.233.178.249] (HELO hs-out-0708.google.com) (64.233.178.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 11:21:20 +0000
Received: by hs-out-0708.google.com with SMTP id 4so753194hsl.5
        for <java-user@lucene.apache.org>; Wed, 10 Sep 2008 04:21:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=FQacG40FBH7Z1TvEWE5I0Ho7kAXwtt2hwM7L+5I20uQ=;
        b=G+bjQG8fAhyCLV9dDBAzPpPeodzHmbpsZnvwo4oZ1sXDrciybayNPztUltIVOn+SSV
         k2tMkz2RXmYPThenGJrllCXTCdPqOTtToFPIs+zGQHF3OZhfRY6tQr4fd32c2clgl8bO
         gtL+Zybp+qfVgMHjTmID31OsRImETt1zFBolM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=kHufgkB+4Kic4pz8SIVMqXTxXF0287R9NoUEYFp0w3d+9ltZKD/X+V2S2mWjq0p57j
         W70HxHOj/Ozp4qVo5RrgeorxIz4z1Lr20ahBFDy3kEoD9kaMEILofcCoL0LBQ2XB2ksP
         IT1QIzXTKB3iHFYYmhJiOz+UKaT1Z8txYB/LQ=
Received: by 10.151.109.11 with SMTP id l11mr1926099ybm.13.1221045711602;
        Wed, 10 Sep 2008 04:21:51 -0700 (PDT)
Received: by 10.150.98.17 with HTTP; Wed, 10 Sep 2008 04:21:51 -0700 (PDT)
Message-ID: <126142c0809100421p6384f229t5fae81b8982badf4@mail.gmail.com>
Date: Wed, 10 Sep 2008 08:21:51 -0300
From: "Marcelo Ochoa" <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Newbie question: using Lucene to index hierarchical information.
In-Reply-To: <dcd377ca0809010025s1281eff7r5716c444de2fb671@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <dcd377ca0809010025s1281eff7r5716c444de2fb671@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Leonid
   If you are not familiar with Oracle XMLDB schema mappings here an
example of how to store WikiPedia XML dumps into Oracle database, but
using XML-to-relational model:
http://marceloochoa.blogspot.com/2007/12/uploading-wikipedia-dumps-to-oracle.html
   The structure of WikiPedia dumps seem to be similar to your data
model, so if you are using Oracle you can use this example as jump
start to eficient mapping XML inside Oracle.
   Also there is an example of how to index it with Lucene running as
a new Domain Index for Oracle databases, to get the best things of the
two worlds :) Lucene for getting free text searching eficiently,
relational DB to quick sort and filter relational data.
   Best regards, Marcelo.
On Mon, Sep 1, 2008 at 4:25 AM, Leonid Maslov <leonidms@gmail.com> wrote:
> Hi all,
>
> First of all, sorry for my poor English. It's not my native language.
>
> I'm trying to use Lucene to index hierarchical kind of information: I have
> structured html and pdf/word documents and I want to index them in ways to
> perform search in titles, text, paragraphs or tables only, or any
> combinations of items mentioned above. At the moment I see 3 possible
> solutions:
>
>   - Create the set of all possible fields, like: contents, title, heading,
>   table etc... And index the data in all them accordingly. Possible impacts:
>   - a big count of fields
>      - data duplication (because I need to make search looking in the
>      paragraphs to look inside all the inner elements, so every outer element
>      indexed will contain all the inner element content as well)
>   - Create the hierarchy of the fields, like "title", "paragraph/title",
>   "paragraph/title/subparagraph/table". Possible impacts:
>      - count of fields remains the same
>      - soft set of fields (not consistent)
>      - I'm not sure about the ways I could process required information and
>      perform search.
>      - Performance issues?
>      - Use one field for content and just add location prefix to content.
>   For example "contents:*paragraph/heading:*token1 token2". *
>   paragraph/heading:* here is used as additional information prefix. So, I
>   (possibly?) could reuse PrefixQuery functionality or smth. Impacts:
>      - Strong set of index fields (small)
>      - Additional information processing - all the queries I'll use will
>      have to work as PrefixQuery
>      - Performance issues?
>
>
> So, have anyone tried to make things work like that? Or am I trying to use
> wrench to hammer in nails? I assume Lucene wasn't thought to be used like
> that, but it's worth trying (at least asking).
> Any results / suggestions are welcome!
>
> --
> Bests regards,
> Leonid Maslov!
> Adrienne Gusoff  - "Opportunity knocked. My doorman threw him out."
>



-- 
Marcelo F. Ochoa
http://marceloochoa.blogspot.com/
http://marcelo.ochoa.googlepages.com/home
______________
Do you Know DBPrism? Look @ DB Prism's Web Site
http://www.dbprism.com.ar/index.html
More info?
Chapter 17 of the book "Programming the Oracle Database using Java &
Web Services"
http://www.amazon.com/gp/product/1555583296/
Chapter 21 of the book "Professional XML Databases" - Wrox Press
http://www.amazon.com/gp/product/1861003587/
Chapter 8 of the book "Oracle & Open Source" - O'Reilly
http://www.oreilly.com/catalog/oracleopen/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 10 13:07:18 2008
Return-Path: <java-user-return-36026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15583 invoked from network); 10 Sep 2008 13:07:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2008 13:07:18 -0000
Received: (qmail 92617 invoked by uid 500); 10 Sep 2008 13:07:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92588 invoked by uid 500); 10 Sep 2008 13:07:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92577 invoked by uid 99); 10 Sep 2008 13:07:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 06:07:08 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [192.112.254.51] (HELO smtp2.bedag.ch) (192.112.254.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 13:06:11 +0000
Received: from localhost (localhost [127.0.0.1])
	by smtp1.bedag.ch (Postfix) with ESMTP id 687A1739E9
	for <java-user@lucene.apache.org>; Wed, 10 Sep 2008 15:06:12 +0200 (CEST)
X-Quarantine-ID: <ChZijLQLQ2x3>
X-Virus-Scanned: Scanned
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C91345.FE30F285"
Subject: Search with multiple wildcards
Date: Wed, 10 Sep 2008 15:06:09 +0200
Message-ID: <1D3D7943573BD14FB024A9654EB43CCB02A4C689@A99A-EMS-01VS2.ad.bedag.ch>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Search with multiple wildcards
Thread-Index: AckTRf48uOhDxyT9QOK+lty8EwDizg==
From: "Sertic Mirko, Bedag" <Mirko.Sertic@bedag.ch>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 10 Sep 2008 13:06:09.0703 (UTC) FILETIME=[FE4EFB70:01C91345]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C91345.FE30F285
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi@all

=20

Is it possible to do a search with multiple wildcards in one query, for
instance "%MANAGE%" AND "CORE%"? Is there a code example available?

=20

Thanks a lot

Mirko

=20


------_=_NextPart_001_01C91345.FE30F285--

From java-user-return-36027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 10 13:47:25 2008
Return-Path: <java-user-return-36027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39597 invoked from network); 10 Sep 2008 13:47:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2008 13:47:25 -0000
Received: (qmail 52200 invoked by uid 500); 10 Sep 2008 13:47:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52174 invoked by uid 500); 10 Sep 2008 13:47:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52163 invoked by uid 99); 10 Sep 2008 13:47:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 06:47:15 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.200.172 as permitted sender)
Received: from [209.85.200.172] (HELO wf-out-1314.google.com) (209.85.200.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 13:46:17 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2922818wfc.20
        for <java-user@lucene.apache.org>; Wed, 10 Sep 2008 06:46:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=sM0/isNhM363V6BRTYB/H5kJDeaxMr3KJX2DD7VbExM=;
        b=M/4padeiLYdsb7jQ9sNYJP3/kcqswLsVgaak7pJ8Q23L5VOYpx/inppiG8b7ifke75
         mUqJy83URMtfMmoeRQFHF3AbafMAKi30nv+PcnJDNsYl4x5ALxP4f7wd2dPEfYVED87G
         VtUJTrt6zgqQ8+Dpa0y4wvxzdbxP9B1fBMI4k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Merr4NIig4SItcQirGRANgmbjxhXS/ooSTDXfzYd/OEpjNP/5iUFyDFIwkzTm9f/0g
         V8j4M72W9V/xLD+y3BTfFGzxx/kTEl2/nMSJHT0dwpxgb2qLxdOyfwGv+Nw0VlOriqni
         +J7t/9ccP9N9g2Ii6URvCUXrqDs0+jpGM2E64=
Received: by 10.141.171.6 with SMTP id y6mr777780rvo.174.1221054399242;
        Wed, 10 Sep 2008 06:46:39 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Wed, 10 Sep 2008 06:46:39 -0700 (PDT)
Message-ID: <359a92830809100646l74d4306l4f0af3809912f2b3@mail.gmail.com>
Date: Wed, 10 Sep 2008 09:46:39 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search with multiple wildcards
In-Reply-To: <1D3D7943573BD14FB024A9654EB43CCB02A4C689@A99A-EMS-01VS2.ad.bedag.ch>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4054_10736336.1221054399230"
References: <1D3D7943573BD14FB024A9654EB43CCB02A4C689@A99A-EMS-01VS2.ad.bedag.ch>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4054_10736336.1221054399230
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Sure, but you'll have to set the leading wildcard option,
which I've forgotten the exact call, but it's in the docs.

And use * rather than % <G>.

But wildcards are tricky, especially the TooManyClauses
exception. You might want to peruse the archive for wildcard
posts...

Best
Erick

On Wed, Sep 10, 2008 at 9:06 AM, Sertic Mirko, Bedag
<Mirko.Sertic@bedag.ch>wrote:

> Hi@all
>
>
>
> Is it possible to do a search with multiple wildcards in one query, for
> instance "%MANAGE%" AND "CORE%"? Is there a code example available?
>
>
>
> Thanks a lot
>
> Mirko
>
>
>
>

------=_Part_4054_10736336.1221054399230--

From java-user-return-36028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 10 14:12:19 2008
Return-Path: <java-user-return-36028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50865 invoked from network); 10 Sep 2008 14:12:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2008 14:12:19 -0000
Received: (qmail 90395 invoked by uid 500); 10 Sep 2008 14:12:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90164 invoked by uid 500); 10 Sep 2008 14:12:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90153 invoked by uid 99); 10 Sep 2008 14:12:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 07:12:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [192.112.254.51] (HELO smtp2.bedag.ch) (192.112.254.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 14:11:12 +0000
Received: from localhost (localhost [127.0.0.1])
	by smtp1.bedag.ch (Postfix) with ESMTP id 2181273972
	for <java-user@lucene.apache.org>; Wed, 10 Sep 2008 16:11:11 +0200 (CEST)
X-Quarantine-ID: <sgcSCmbOcY-8>
X-Virus-Scanned: Scanned
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: AW: Search with multiple wildcards
Date: Wed, 10 Sep 2008 16:11:07 +0200
Message-ID: <1D3D7943573BD14FB024A9654EB43CCB02A4C68E@A99A-EMS-01VS2.ad.bedag.ch>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Search with multiple wildcards
Thread-Index: AckTS8JRvrSsLT3yS+2NCFZV+jt2mQAAw70g
References: <1D3D7943573BD14FB024A9654EB43CCB02A4C689@A99A-EMS-01VS2.ad.bedag.ch> <359a92830809100646l74d4306l4f0af3809912f2b3@mail.gmail.com>
From: "Sertic Mirko, Bedag" <Mirko.Sertic@bedag.ch>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 10 Sep 2008 14:11:07.0807 (UTC) FILETIME=[11C272F0:01C9134F]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi

Thank you for your quick response:-)

Of course I need to use the * character :-) But I have read somewhere in =
the documentation that leading wildcards are not supported, and only one =
wildcard term per query. Is this limitation resolved in the current =
version?

Regards
Mirko

-----Urspr=FCngliche Nachricht-----
Von: Erick Erickson [mailto:erickerickson@gmail.com]=20
Gesendet: Mittwoch, 10. September 2008 15:47
An: java-user@lucene.apache.org
Betreff: Re: Search with multiple wildcards

Sure, but you'll have to set the leading wildcard option,
which I've forgotten the exact call, but it's in the docs.

And use * rather than % <G>.

But wildcards are tricky, especially the TooManyClauses
exception. You might want to peruse the archive for wildcard
posts...

Best
Erick

On Wed, Sep 10, 2008 at 9:06 AM, Sertic Mirko, Bedag
<Mirko.Sertic@bedag.ch>wrote:

> Hi@all
>
>
>
> Is it possible to do a search with multiple wildcards in one query, =
for
> instance "%MANAGE%" AND "CORE%"? Is there a code example available?
>
>
>
> Thanks a lot
>
> Mirko
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 10 14:45:26 2008
Return-Path: <java-user-return-36029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82358 invoked from network); 10 Sep 2008 14:45:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2008 14:45:26 -0000
Received: (qmail 58714 invoked by uid 500); 10 Sep 2008 14:45:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58688 invoked by uid 500); 10 Sep 2008 14:45:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58677 invoked by uid 99); 10 Sep 2008 14:45:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 07:45:17 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.226 as permitted sender)
Received: from [209.85.198.226] (HELO rv-out-0506.google.com) (209.85.198.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 14:44:19 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2562607rvb.5
        for <java-user@lucene.apache.org>; Wed, 10 Sep 2008 07:44:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=G/4/niNSVIciKwOso4M4rn0SM9eBPhBi4+Ex42uE0QM=;
        b=Uhk2ARQHvi6hINzNYAI9t0Lg8y+F/pomrC3Aer8BNBgAupnQ/x1kP6uo8tBJttlO1t
         kMWaAcOCrdn+YewAGz7wbZR2zDs3aC9kj6/eX9PzSIBcqxTNG1HRRMV2KGua6lNwWCzz
         a76Lf6teDWHSOs6PHPGnMJdpiBeGXqv3G9ACA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=CSi0XJMX8YJtScFgBj+MrbVIcZFYBv/ypmkSyQo8fFvnVU4k2mqtM8//JWvqdo0Dsb
         a3qF2miW1tbRCrvLSx/Y2/SLXeb98LK4rdGZJidCXWvthPBEnOzmRMY131/AM+IpDlPU
         n6sOEAnAuV4igeZeyu9NTrbJ1tUPS+X2ic5J8=
Received: by 10.141.153.16 with SMTP id f16mr851439rvo.17.1221057890694;
        Wed, 10 Sep 2008 07:44:50 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Wed, 10 Sep 2008 07:44:50 -0700 (PDT)
Message-ID: <359a92830809100744s4ba43936h5150d28c3ed0443c@mail.gmail.com>
Date: Wed, 10 Sep 2008 10:44:50 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search with multiple wildcards
In-Reply-To: <1D3D7943573BD14FB024A9654EB43CCB02A4C68E@A99A-EMS-01VS2.ad.bedag.ch>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4770_27102129.1221057890699"
References: <1D3D7943573BD14FB024A9654EB43CCB02A4C689@A99A-EMS-01VS2.ad.bedag.ch>
	 <359a92830809100646l74d4306l4f0af3809912f2b3@mail.gmail.com>
	 <1D3D7943573BD14FB024A9654EB43CCB02A4C68E@A99A-EMS-01VS2.ad.bedag.ch>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4770_27102129.1221057890699
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Is this what you're referring to?

Lucene supports single and multiple character wildcard searches within
single terms (not within phrase queries).
(from http://lucene.apache.org/java/docs/queryparsersyntax.html)

I'm pretty sure you can have multiple *terms* with wildcards. Luke is your
friend here, download a copy and try it <G>. Be sure on the search tab to
specify StandardAnalyzer or some such, rather than keywordanalyzer.

The phrase is trying to point out that a phrase query does NOT respect
wildcards. That is, submitting
"ab* bc* cd*" AS A PHRASE QUERY won't do what you expect. But I'm pretty
sure that

+field:ab* +field:bc* +field:cd*

will work just fine. The key here is "within single terms", which I think o=
f
as
"within a single term query". You can add as many TermQuerys as you want.
See the query documentation for how to submit phrase queries.

Best
Erick

On Wed, Sep 10, 2008 at 10:11 AM, Sertic Mirko, Bedag <Mirko.Sertic@bedag.c=
h
> wrote:

> Hi
>
> Thank you for your quick response:-)
>
> Of course I need to use the * character :-) But I have read somewhere in
> the documentation that leading wildcards are not supported, and only one
> wildcard term per query. Is this limitation resolved in the current versi=
on?
>
> Regards
> Mirko
>
> -----Urspr=FCngliche Nachricht-----
> Von: Erick Erickson [mailto:erickerickson@gmail.com]
> Gesendet: Mittwoch, 10. September 2008 15:47
> An: java-user@lucene.apache.org
> Betreff: Re: Search with multiple wildcards
>
> Sure, but you'll have to set the leading wildcard option,
> which I've forgotten the exact call, but it's in the docs.
>
> And use * rather than % <G>.
>
> But wildcards are tricky, especially the TooManyClauses
> exception. You might want to peruse the archive for wildcard
> posts...
>
> Best
> Erick
>
> On Wed, Sep 10, 2008 at 9:06 AM, Sertic Mirko, Bedag
> <Mirko.Sertic@bedag.ch>wrote:
>
> > Hi@all
> >
> >
> >
> > Is it possible to do a search with multiple wildcards in one query, for
> > instance "%MANAGE%" AND "CORE%"? Is there a code example available?
> >
> >
> >
> > Thanks a lot
> >
> > Mirko
> >
> >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4770_27102129.1221057890699--

From java-user-return-36030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 10 15:11:09 2008
Return-Path: <java-user-return-36030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3691 invoked from network); 10 Sep 2008 15:11:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2008 15:11:09 -0000
Received: (qmail 4799 invoked by uid 500); 10 Sep 2008 15:10:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4768 invoked by uid 500); 10 Sep 2008 15:10:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4757 invoked by uid 99); 10 Sep 2008 15:10:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 08:10:59 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 15:09:59 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE:  RE:  Re: Replacing FAST functionality at sesam.no -ShingleFilter+exactmatching
Date: Wed, 10 Sep 2008 11:10:04 -0400
Message-ID: <9294E20AED46934EA459020706463F94EF3824@SUEXCL-02.ad.syr.edu>
In-Reply-To: A<1221033318.8908.50.camel@localhost>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic:  RE:  Re: Replacing FAST functionality at sesam.no -ShingleFilter+exactmatching
Thread-Index: AckTG1pyUVhU7k8ySYSa6S7h3RvtYgAO6NBw
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi mck,

On 09/10/2008 at 3:55 AM, Mck wrote:
> > probably better to change the one instance of =
.setPositionIncrement(0)
> > to .setPositionIncrement(1) - that way, MultiPhraseQuery will not be
> > invoked, and the standard disjunction thing should happen.
>=20
> Tried this.
> As you say i end up with instead a
> PhraseQuery
>         terms =3D { list_entry_shingles:abcd
>                   list_entry_shingles:abcd efgh=20
>                   list_entry_shingles:abcd efgh ijkl
>                   list_entry_shingles:efgh
>                   list_entry_shingles:efgh ijkl
>                   list_entry_shingles:ijkl
>                   }
>=20
> But this does not return the hits i want.
> (It returns one hit if TextField and zero hits if StrField, the same
> behaviour i mentioned before).

Have you tried submitting the query without quotes?  (That's where the =
PhraseQuery likely comes from.)

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 10 15:27:57 2008
Return-Path: <java-user-return-36031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15636 invoked from network); 10 Sep 2008 15:27:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2008 15:27:57 -0000
Received: (qmail 32889 invoked by uid 500); 10 Sep 2008 15:27:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32850 invoked by uid 500); 10 Sep 2008 15:27:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32839 invoked by uid 99); 10 Sep 2008 15:27:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 08:27:47 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 15:26:50 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Understanding/controlling role of Weight in IndexSearcher
Date: Wed, 10 Sep 2008 11:27:18 -0400
Message-ID: <9294E20AED46934EA459020706463F94EF3826@SUEXCL-02.ad.syr.edu>
In-Reply-To: <D82132F3-B8C8-46A0-A396-F62E497F8DA0@affinitycircles.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Understanding/controlling role of Weight in IndexSearcher
Thread-Index: AckS+mUGZIumw08hQtaOeQ6SsD1NHQAXtjww
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Micah,

On 09/09/2008 at 11:57 PM, Micah Jaffe wrote:
> I'm [...] curious how weights are calculated.
[...]
> thoughts?  pointers?  best practices?

http://lucene.apache.org/java/docs/scoring.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 10 15:53:10 2008
Return-Path: <java-user-return-36032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32919 invoked from network); 10 Sep 2008 15:53:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2008 15:53:10 -0000
Received: (qmail 85168 invoked by uid 500); 10 Sep 2008 15:52:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85140 invoked by uid 500); 10 Sep 2008 15:52:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85084 invoked by uid 99); 10 Sep 2008 15:52:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 08:52:59 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [192.112.254.53] (HELO smtp2.bedag.ch) (192.112.254.53)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 10 Sep 2008 15:52:00 +0000
Received: from localhost (localhost [127.0.0.1])
	by smtp2.bedag.ch (Postfix) with ESMTP id 78766739C1
	for <java-user@lucene.apache.org>; Wed, 10 Sep 2008 17:52:29 +0200 (CEST)
X-Quarantine-ID: <xt4ZnkUGUqsi>
X-Virus-Scanned: Scanned
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: AW: Search with multiple wildcards
Date: Wed, 10 Sep 2008 17:52:24 +0200
Message-ID: <1D3D7943573BD14FB024A9654EB43CCB02A4C690@A99A-EMS-01VS2.ad.bedag.ch>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Search with multiple wildcards
Thread-Index: AckTU+AYvHrFxoJSSMi99VC5HOLG9wACTZcg
References: <1D3D7943573BD14FB024A9654EB43CCB02A4C689@A99A-EMS-01VS2.ad.bedag.ch> <359a92830809100646l74d4306l4f0af3809912f2b3@mail.gmail.com> <1D3D7943573BD14FB024A9654EB43CCB02A4C68E@A99A-EMS-01VS2.ad.bedag.ch> <359a92830809100744s4ba43936h5150d28c3ed0443c@mail.gmail.com>
From: "Sertic Mirko, Bedag" <Mirko.Sertic@bedag.ch>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 10 Sep 2008 15:52:25.0190 (UTC) FILETIME=[38298060:01C9135D]
X-Virus-Checked: Checked by ClamAV on apache.org

Jep, this is what i have read.

do I need to use the query parser, or can I create a query by the api?
Is there an example available?

Thanks a lot
Mirko

-----Urspr=FCngliche Nachricht-----
Von: Erick Erickson [mailto:erickerickson@gmail.com]=20
Gesendet: Mittwoch, 10. September 2008 16:45
An: java-user@lucene.apache.org
Betreff: Re: Search with multiple wildcards

Is this what you're referring to?

Lucene supports single and multiple character wildcard searches within
single terms (not within phrase queries).
(from http://lucene.apache.org/java/docs/queryparsersyntax.html)

I'm pretty sure you can have multiple *terms* with wildcards. Luke is =
your
friend here, download a copy and try it <G>. Be sure on the search tab =
to
specify StandardAnalyzer or some such, rather than keywordanalyzer.

The phrase is trying to point out that a phrase query does NOT respect
wildcards. That is, submitting
"ab* bc* cd*" AS A PHRASE QUERY won't do what you expect. But I'm pretty
sure that

+field:ab* +field:bc* +field:cd*

will work just fine. The key here is "within single terms", which I =
think of
as
"within a single term query". You can add as many TermQuerys as you =
want.
See the query documentation for how to submit phrase queries.

Best
Erick

On Wed, Sep 10, 2008 at 10:11 AM, Sertic Mirko, Bedag =
<Mirko.Sertic@bedag.ch
> wrote:

> Hi
>
> Thank you for your quick response:-)
>
> Of course I need to use the * character :-) But I have read somewhere =
in
> the documentation that leading wildcards are not supported, and only =
one
> wildcard term per query. Is this limitation resolved in the current =
version?
>
> Regards
> Mirko
>
> -----Urspr=FCngliche Nachricht-----
> Von: Erick Erickson [mailto:erickerickson@gmail.com]
> Gesendet: Mittwoch, 10. September 2008 15:47
> An: java-user@lucene.apache.org
> Betreff: Re: Search with multiple wildcards
>
> Sure, but you'll have to set the leading wildcard option,
> which I've forgotten the exact call, but it's in the docs.
>
> And use * rather than % <G>.
>
> But wildcards are tricky, especially the TooManyClauses
> exception. You might want to peruse the archive for wildcard
> posts...
>
> Best
> Erick
>
> On Wed, Sep 10, 2008 at 9:06 AM, Sertic Mirko, Bedag
> <Mirko.Sertic@bedag.ch>wrote:
>
> > Hi@all
> >
> >
> >
> > Is it possible to do a search with multiple wildcards in one query, =
for
> > instance "%MANAGE%" AND "CORE%"? Is there a code example available?
> >
> >
> >
> > Thanks a lot
> >
> > Mirko
> >
> >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 10 16:01:10 2008
Return-Path: <java-user-return-36033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38503 invoked from network); 10 Sep 2008 16:01:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2008 16:01:10 -0000
Received: (qmail 99847 invoked by uid 500); 10 Sep 2008 16:01:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99819 invoked by uid 500); 10 Sep 2008 16:01:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99804 invoked by uid 99); 10 Sep 2008 16:01:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 09:01:00 -0700
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 15:59:59 +0000
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1KdS7F-0001et-Cc
	for java-user@lucene.apache.org; Wed, 10 Sep 2008 16:00:25 +0000
Received: from wever.org ([83.243.151.80])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 10 Sep 2008 16:00:25 +0000
Received: from mick by wever.org with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 10 Sep 2008 16:00:25 +0000
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Mck <mick@semb.wever.org>
Subject:  Re: Replacing FAST functionality at sesam.no
	-ShingleFilter+exactmatching
Date:  Wed, 10 Sep 2008 18:02:13 +0200
Lines: 46
Message-ID:  <1221062533.8908.63.camel@localhost>
References:  <1221033318.8908.50.camel@localhost>
	 <9294E20AED46934EA459020706463F94EF3824@SUEXCL-02.ad.syr.edu>
Mime-Version:  1.0
Content-Type:  multipart/signed; micalg=pgp-sha1; protocol="application/pgp-signature"; boundary="=-cmC7Z+wPXpwR9uQEIihv"
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: wever.org
In-Reply-To: <9294E20AED46934EA459020706463F94EF3824@SUEXCL-02.ad.syr.edu>
X-Mailer: Evolution 2.22.3.1 
Sender: news <news@ger.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org

--=-cmC7Z+wPXpwR9uQEIihv
Content-Type: text/plain
Content-Transfer-Encoding: quoted-printable


> > But this does not return the hits i want.
>=20
> Have you tried submitting the query without quotes?  (That's where the
> PhraseQuery likely comes from.)

Yes. It does not work.
It returns just the unigrams, again the same behaviour as mentioned
earlier.

Debugging ShingleFilter in this case it shows that no shingles are ever
constructed. There are 3 separate tokens in the query and that's all.

The ShingleFilter appears to only work, at least for me, on phrases.
I would think this correct as each shingle is in fact a sub-phrase to
the larger original phrase. Is that presumption correct?


~mck

--=20
"Great spirits have always encountered violent opposition from mediocre
minds. The mediocre mind is incapable of understanding the man who
refuses to bow blindly to conventional prejudices and chooses instead to
express his opinions courageously and honestly." Albert Einstein=20
| semb.wever.org | sesat.no | sesam.no |

--=-cmC7Z+wPXpwR9uQEIihv
Content-Type: application/pgp-signature; name=signature.asc
Content-Description: This is a digitally signed message part

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.9 (GNU/Linux)

iEYEABECAAYFAkjH74UACgkQkdPrePiuutMrSwCgw+ylAlb4sm36mPr6mEa8qNuB
ZJMAn0LsrDbfyaBp0395gzPSdzGy7Dws
=AKZU
-----END PGP SIGNATURE-----

--=-cmC7Z+wPXpwR9uQEIihv--



From java-user-return-36034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 10 16:15:37 2008
Return-Path: <java-user-return-36034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43924 invoked from network); 10 Sep 2008 16:15:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2008 16:15:37 -0000
Received: (qmail 18701 invoked by uid 500); 10 Sep 2008 16:15:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18305 invoked by uid 500); 10 Sep 2008 16:15:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18294 invoked by uid 99); 10 Sep 2008 16:15:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 09:15:27 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.236 as permitted sender)
Received: from [209.85.198.236] (HELO rv-out-0506.google.com) (209.85.198.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 16:14:29 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2594834rvb.5
        for <java-user@lucene.apache.org>; Wed, 10 Sep 2008 09:14:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=2F9GFRolwxpjauQ5rpQShYqnDLits9cEMSw6XM/L+jw=;
        b=LozULhg5LcyG5WFHx9n8uAepl+KvlL8gZv7fO/1yVBSuKUCUC6bQoPFJcYIEeMbaqg
         XOxkR86nTosDV4zXOOg8+H1bu1mkU+2FuYjw4+1X/n+LYVjlV4jzmSNMXbIHFDmgCldl
         BovDX0YQK4DSp0mZjACMrvPkXZLBA/enNeKNk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=BkTvVhryoP1OpskTaU3eKgC7ArsDk/yyjFVHv3OOLAeppQhJWRcCcfEBkUd26RVN9F
         GBfUg2GwFrHnBoLBxdSdYp2QxxA6uY/On2AafRdX//4hdiOZ8AjeEDVUDhWBU5BhKeKf
         od7lgNhDJ+V90hF/pP2e9p/TGJI6HG6esDSMY=
Received: by 10.141.204.16 with SMTP id g16mr905632rvq.275.1221063291493;
        Wed, 10 Sep 2008 09:14:51 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Wed, 10 Sep 2008 09:14:51 -0700 (PDT)
Message-ID: <359a92830809100914m26c73088ueb142c21f246e8f1@mail.gmail.com>
Date: Wed, 10 Sep 2008 12:14:51 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search with multiple wildcards
In-Reply-To: <1D3D7943573BD14FB024A9654EB43CCB02A4C690@A99A-EMS-01VS2.ad.bedag.ch>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6011_22394801.1221063291485"
References: <1D3D7943573BD14FB024A9654EB43CCB02A4C689@A99A-EMS-01VS2.ad.bedag.ch>
	 <359a92830809100646l74d4306l4f0af3809912f2b3@mail.gmail.com>
	 <1D3D7943573BD14FB024A9654EB43CCB02A4C68E@A99A-EMS-01VS2.ad.bedag.ch>
	 <359a92830809100744s4ba43936h5150d28c3ed0443c@mail.gmail.com>
	 <1D3D7943573BD14FB024A9654EB43CCB02A4C690@A99A-EMS-01VS2.ad.bedag.ch>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6011_22394801.1221063291485
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Of course you can construct your own BooleanQuery
programmatically.

It's relatively easy, just try it.

On Wed, Sep 10, 2008 at 11:52 AM, Sertic Mirko, Bedag <Mirko.Sertic@bedag.c=
h
> wrote:

> Jep, this is what i have read.
>
> do I need to use the query parser, or can I create a query by the api?
> Is there an example available?
>
> Thanks a lot
> Mirko
>
> -----Urspr=FCngliche Nachricht-----
> Von: Erick Erickson [mailto:erickerickson@gmail.com]
> Gesendet: Mittwoch, 10. September 2008 16:45
> An: java-user@lucene.apache.org
> Betreff: Re: Search with multiple wildcards
>
> Is this what you're referring to?
>
> Lucene supports single and multiple character wildcard searches within
> single terms (not within phrase queries).
> (from http://lucene.apache.org/java/docs/queryparsersyntax.html)
>
> I'm pretty sure you can have multiple *terms* with wildcards. Luke is you=
r
> friend here, download a copy and try it <G>. Be sure on the search tab to
> specify StandardAnalyzer or some such, rather than keywordanalyzer.
>
> The phrase is trying to point out that a phrase query does NOT respect
> wildcards. That is, submitting
> "ab* bc* cd*" AS A PHRASE QUERY won't do what you expect. But I'm pretty
> sure that
>
> +field:ab* +field:bc* +field:cd*
>
> will work just fine. The key here is "within single terms", which I think
> of
> as
> "within a single term query". You can add as many TermQuerys as you want.
> See the query documentation for how to submit phrase queries.
>
> Best
> Erick
>
> On Wed, Sep 10, 2008 at 10:11 AM, Sertic Mirko, Bedag
> <Mirko.Sertic@bedag.ch
> > wrote:
>
> > Hi
> >
> > Thank you for your quick response:-)
> >
> > Of course I need to use the * character :-) But I have read somewhere i=
n
> > the documentation that leading wildcards are not supported, and only on=
e
> > wildcard term per query. Is this limitation resolved in the current
> version?
> >
> > Regards
> > Mirko
> >
> > -----Urspr=FCngliche Nachricht-----
> > Von: Erick Erickson [mailto:erickerickson@gmail.com]
> > Gesendet: Mittwoch, 10. September 2008 15:47
> > An: java-user@lucene.apache.org
> > Betreff: Re: Search with multiple wildcards
> >
> > Sure, but you'll have to set the leading wildcard option,
> > which I've forgotten the exact call, but it's in the docs.
> >
> > And use * rather than % <G>.
> >
> > But wildcards are tricky, especially the TooManyClauses
> > exception. You might want to peruse the archive for wildcard
> > posts...
> >
> > Best
> > Erick
> >
> > On Wed, Sep 10, 2008 at 9:06 AM, Sertic Mirko, Bedag
> > <Mirko.Sertic@bedag.ch>wrote:
> >
> > > Hi@all
> > >
> > >
> > >
> > > Is it possible to do a search with multiple wildcards in one query, f=
or
> > > instance "%MANAGE%" AND "CORE%"? Is there a code example available?
> > >
> > >
> > >
> > > Thanks a lot
> > >
> > > Mirko
> > >
> > >
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_6011_22394801.1221063291485--

From java-user-return-36035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 10 16:28:05 2008
Return-Path: <java-user-return-36035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51982 invoked from network); 10 Sep 2008 16:28:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2008 16:28:05 -0000
Received: (qmail 43449 invoked by uid 500); 10 Sep 2008 16:27:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43420 invoked by uid 500); 10 Sep 2008 16:27:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43409 invoked by uid 99); 10 Sep 2008 16:27:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 09:27:55 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 16:26:58 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE:  Re: Replacing FAST functionality at sesam.no-ShingleFilter+exactmatching
Date: Wed, 10 Sep 2008 12:27:04 -0400
Message-ID: <9294E20AED46934EA459020706463F94EF382A@SUEXCL-02.ad.syr.edu>
In-Reply-To: A<1221062533.8908.63.camel@localhost>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic:  Re: Replacing FAST functionality at sesam.no-ShingleFilter+exactmatching
Thread-Index: AckTXndUByBJin1LReezckwdqzGUQQAALT5Q
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

On 09/10/2008 at 12:02 PM, Mck wrote:
> > > But this does not return the hits i want.
> >=20
> > Have you tried submitting the query without quotes? (That's where =
the
> > PhraseQuery likely comes from.)
>=20
> Yes. It does not work. It returns just the unigrams, again the same
> behaviour as mentioned earlier.
>=20
> Debugging ShingleFilter in this case it shows that no
> shingles are ever constructed. There are 3 separate tokens in the
> query and that's all.
>=20
> The ShingleFilter appears to only work, at least for me, on phrases.
> I would think this correct as each shingle is in fact a sub-phrase to
> the larger original phrase. Is that presumption correct?

ShingleFilter has nothing to do with phrase queries (other than the fact =
that it can be used to replace them in some circumstances).

I'm not an expert on Solr query parsing, but there *must* be a way to =
submit a query that is not turned into a phrase query.  Really. =20

And if you have configured an analyzer that includes a query-time =
filter, it should be invoked, regardless of whether a phrase query is =
constructed.

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 10 17:20:02 2008
Return-Path: <java-user-return-36036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84144 invoked from network); 10 Sep 2008 17:20:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2008 17:20:02 -0000
Received: (qmail 29491 invoked by uid 500); 10 Sep 2008 17:19:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29464 invoked by uid 500); 10 Sep 2008 17:19:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29453 invoked by uid 99); 10 Sep 2008 17:19:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 10:19:52 -0700
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 17:18:51 +0000
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1KdTIV-0005Sc-JP
	for java-user@lucene.apache.org; Wed, 10 Sep 2008 17:16:07 +0000
Received: from wever.org ([83.243.151.80])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 10 Sep 2008 17:16:07 +0000
Received: from mick by wever.org with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 10 Sep 2008 17:16:07 +0000
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Mck <mick@semb.wever.org>
Subject:  Re: Replacing FAST functionality at
	sesam.no-ShingleFilter+exactmatching
Date:  Wed, 10 Sep 2008 19:17:54 +0200
Lines: 54
Message-ID:  <1221067074.8908.81.camel@localhost>
References:  <1221062533.8908.63.camel@localhost>
	 <9294E20AED46934EA459020706463F94EF382A@SUEXCL-02.ad.syr.edu>
Mime-Version:  1.0
Content-Type:  multipart/signed; micalg=pgp-sha1; protocol="application/pgp-signature"; boundary="=-ppQEF3CltLjoMqE1mZ54"
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: wever.org
In-Reply-To: <9294E20AED46934EA459020706463F94EF382A@SUEXCL-02.ad.syr.edu>
X-Mailer: Evolution 2.22.3.1 
Sender: news <news@ger.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org

--=-ppQEF3CltLjoMqE1mZ54
Content-Type: text/plain
Content-Transfer-Encoding: quoted-printable

> And if you have configured an analyzer that includes a query-time
> filter, it should be invoked, regardless of whether a phrase query is
> constructed.

sorry steve i failed to explain this so clearly.

Without phrasing the ShingleFilter is indeed invoked.
But it is used three separate times for each term
 1) abcd
 2) efgh
 3) ijkl
So there is no shingles generated.

With phrasing the ShingleFilter it is used once
 1) abcd efgh ijkl
And so all the shingles are generated.

I do not know how Solr and Lucene well enough to appreciate how the
query parsing is working together here.

But what i do see, just within
no.apache.jakarta.lucene.queryParser.QueryParser.getFieldQuery(..)
is that there are three possible return values:
 BooleanQuery, MultiPhraseQuery, or PhraseQuery.

The remaining alternative is BooleanQuery and that happens when
positionCount (which is the sum of all the tokens' positionIncrements)
equals one. That's even tougher to achieve.

~mck

--=20
"Driving ambition is the last refuge of the failure." Oscar Wilde=20
| semb.wever.org | sesat.no | sesam.no |

--=-ppQEF3CltLjoMqE1mZ54
Content-Type: application/pgp-signature; name=signature.asc
Content-Description: This is a digitally signed message part

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.9 (GNU/Linux)

iEYEABECAAYFAkjIAUEACgkQkdPrePiuutOCLgCeM1Btj0+a6PTAV4excMZD5zUB
zyMAnR0L7P10OBiO7vOuDIFQqMBDpufU
=76Gd
-----END PGP SIGNATURE-----

--=-ppQEF3CltLjoMqE1mZ54--



From java-user-return-36037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 10 17:49:53 2008
Return-Path: <java-user-return-36037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3037 invoked from network); 10 Sep 2008 17:49:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2008 17:49:53 -0000
Received: (qmail 510 invoked by uid 500); 10 Sep 2008 17:49:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 484 invoked by uid 500); 10 Sep 2008 17:49:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 472 invoked by uid 99); 10 Sep 2008 17:49:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 10:49:42 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 17:48:44 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE:  Re: Replacing FAST functionality atsesam.no-ShingleFilter+exactmatching
Date: Wed, 10 Sep 2008 13:48:50 -0400
Message-ID: <9294E20AED46934EA459020706463F94EF3830@SUEXCL-02.ad.syr.edu>
In-Reply-To: A<1221067074.8908.81.camel@localhost>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic:  Re: Replacing FAST functionality atsesam.no-ShingleFilter+exactmatching
Thread-Index: AckTaYntbHSTl5DfQbCQxBhiKgl4MgAATBhw
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

On 09/10/2008 at 1:17 PM, Mck wrote:
> Without phrasing the ShingleFilter is indeed invoked.
> But it is used three separate times for each term
>  1) abcd
>  2) efgh
>  3) ijkl
> So there is no shingles generated.

Ah, right, each individual token is sent through the analyzer.

> With phrasing the ShingleFilter it is used once
>  1) abcd efgh ijkl
> And so all the shingles are generated.

Wow, I don't see any alternatives to your solution. =20

Your solution, on the one hand, however, is a kludge: you are disabling =
position information (by assigning the same position to all tokens) in =
order to induce a particular behavior in the query parser, which may =
change in the future.  Long term, I think this should be addressed: =
there should be a query parser that will work directly with =
ShingleFilter, i.e., that will pass all tokens at once to it without =
requiring quotes.

On the other hand, I'm not sure how useful position information is for =
shingles in the general case: they already have relative position info =
embedded within them.  And how likely is it that one would want to =
perform a phrase/span query over shingles?  Pretty unlikely, methinks.

Anyhow, I suggest you change the name of the option you're adding in =
LUCENE-1380 to "disablePositions", and make it boolean -- this better =
describes what you're trying to do.  When true, all position increments =
would be set to zero.  It should default to false.

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 10 18:15:27 2008
Return-Path: <java-user-return-36038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16420 invoked from network); 10 Sep 2008 18:15:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2008 18:15:26 -0000
Received: (qmail 41734 invoked by uid 500); 10 Sep 2008 18:15:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41708 invoked by uid 500); 10 Sep 2008 18:15:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41697 invoked by uid 99); 10 Sep 2008 18:15:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 11:15:17 -0700
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 18:14:17 +0000
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1KdUDE-0007xx-If
	for java-user@lucene.apache.org; Wed, 10 Sep 2008 18:14:46 +0000
Received: from wever.org ([83.243.151.80])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 10 Sep 2008 18:14:44 +0000
Received: from mick by wever.org with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 10 Sep 2008 18:14:44 +0000
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Mck <mick@semb.wever.org>
Subject:  RE:  Re: Replacing FAST functionality
	atsesam.no-ShingleFilter+exactmatching
Date:  Wed, 10 Sep 2008 20:16:31 +0200
Lines: 33
Message-ID:  <1221070590.8908.87.camel@localhost>
References:  <1221067074.8908.81.camel@localhost>
	 <9294E20AED46934EA459020706463F94EF3830@SUEXCL-02.ad.syr.edu>
Mime-Version:  1.0
Content-Type:  multipart/signed; micalg=pgp-sha1; protocol="application/pgp-signature"; boundary="=-Wj19PglW2nYXTMyFu3b5"
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: wever.org
In-Reply-To: <9294E20AED46934EA459020706463F94EF3830@SUEXCL-02.ad.syr.edu>
X-Mailer: Evolution 2.22.3.1 
Sender: news <news@ger.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org

--=-Wj19PglW2nYXTMyFu3b5
Content-Type: text/plain
Content-Transfer-Encoding: quoted-printable

> Anyhow, I suggest you change the name of the option you're adding in
> LUCENE-1380 to "disablePositions", and make it boolean -- this better
> describes what you're trying to do.  When true, all position
> increments would be set to zero.  It should default to false.

disablePositions it is. thanks for helping steve.

~mck

--=20
"Do not seek to follow in the footsteps of those of old - seek what they
sought." Matsuo Basho=20
| semb.wever.org | sesat.no | sesam.no |

--=-Wj19PglW2nYXTMyFu3b5
Content-Type: application/pgp-signature; name=signature.asc
Content-Description: This is a digitally signed message part

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.9 (GNU/Linux)

iEYEABECAAYFAkjIDv4ACgkQkdPrePiuutN7jQCaAy6uRtwsNgepw0Kbow7qy7Mb
J18AoJMzafe5BUzVlFOf/pjvzNnXT03R
=g/T6
-----END PGP SIGNATURE-----

--=-Wj19PglW2nYXTMyFu3b5--



From java-user-return-36039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 10 18:33:34 2008
Return-Path: <java-user-return-36039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36347 invoked from network); 10 Sep 2008 18:33:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2008 18:33:34 -0000
Received: (qmail 80449 invoked by uid 500); 10 Sep 2008 18:33:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80423 invoked by uid 500); 10 Sep 2008 18:33:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80412 invoked by uid 99); 10 Sep 2008 18:33:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 11:33:24 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 18:32:26 +0000
Received: by mail-gx0-f13.google.com with SMTP id 6so7385638gxk.5
        for <java-user@lucene.apache.org>; Wed, 10 Sep 2008 11:32:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=uLOcxs2I8Gry7sY7ZtwAWLtqSg3B86xRjyZiY1oIOgo=;
        b=nQ8pwGaw9YXyKDRNY0F2KLh2rPHZeZdISX7BpwYdnnhZ16ohgwF+1DzavHb9cH8SKu
         zTFhS2Nxgi2e7BPeMWVlE1LNiKKPeNJDTV9/SjygZ58SLsX15kbcid4IvPRGu/zO8mjN
         hvEypsIqSuHQeKZPfEblOvfvTzmxRwqguQf84=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=nccmB35MXxyUGoSktPd+dHw7yFgAC7SjFA2NzavGiTmR9uU9VYSjSEeLgapEMJoTNF
         DRshUjgr+cJkTShae92olkM2xzlT8mmMH4uArplIvVtkdECInZn5U0xgtNJ+uMFh691G
         rs5atYYR5wTVYEB0xLByAh8+YVEaZzje0wlMU=
Received: by 10.142.239.11 with SMTP id m11mr545704wfh.283.1221071576698;
        Wed, 10 Sep 2008 11:32:56 -0700 (PDT)
Received: by 10.142.111.8 with HTTP; Wed, 10 Sep 2008 11:32:56 -0700 (PDT)
Message-ID: <6e3ae6310809101132y1c912ba3tf7ace88e9d7900b0@mail.gmail.com>
Date: Wed, 10 Sep 2008 11:32:56 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: follow up of Lucene out of memory with RAMDirectory on J2EE environment
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_151727_9173341.1221071576669"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_151727_9173341.1221071576669
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This usually happens on J2EE environment, if you use RAMDirectory.
Before Lucene-1195.(svn r659602, May23,2008), if you close() RAMDirectory,
the resources will be released right away.

After Lucene-1195.(svn r659602, May23,2008),If you simply close() the
RAMDirectory, there will be an undetermined(and uncontrollable) time before
the RAMDirectory resources are released.
So if you want to avoid it, you will need to use re-open() function instead
of close() and open(), according to lucene developers.

I haven't tried the re-open approach, but instead I downgrade to the svn
version before the patch.
In the previous version, close() means close(), not a delayed close().

Before Lucene developers are willing to fix this, I will have to manually
remove Lucene-1195 myself if an upgrade is needed.

If you also want this to be fixed, you can join the ongoing discussion to
support it on java-dev @lucene.apache.org mailing list.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!

------=_Part_151727_9173341.1221071576669--

From java-user-return-36040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 10 21:48:34 2008
Return-Path: <java-user-return-36040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74483 invoked from network); 10 Sep 2008 21:48:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2008 21:48:34 -0000
Received: (qmail 59463 invoked by uid 500); 10 Sep 2008 21:48:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59428 invoked by uid 500); 10 Sep 2008 21:48:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59417 invoked by uid 99); 10 Sep 2008 21:48:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 14:48:25 -0700
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 21:47:27 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id A50E071C498; Wed, 10 Sep 2008 14:47:28 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id A08F271C489
	for <java-user@lucene.apache.org>; Wed, 10 Sep 2008 14:47:28 -0700 (PDT)
Date: Wed, 10 Sep 2008 14:47:28 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE:  Re: Replacing FAST functionality atsesam.no-ShingleFilter+exactmatching
In-Reply-To: <9294E20AED46934EA459020706463F94EF3830@SUEXCL-02.ad.syr.edu>
Message-ID: <Pine.LNX.4.62.0809101435420.28099@radix.cryptio.net>
References: <9294E20AED46934EA459020706463F94EF3830@SUEXCL-02.ad.syr.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org



: change in the future.  Long term, I think this should be addressed: 
: there should be a query parser that will work directly with 
: ShingleFilter, i.e., that will pass all tokens at once to it without 
: requiring quotes.

I won't pretend that i've been following this thread all that closely, but 
to chime in here real fast:  converting query strings to Query obejcts 
usually involves two passes: pass one is involves QueryParser (or 
something like it) to check for meta-markup; pass two involves the 
QueryParsersending chunks of text to the appropriate Analyzer.

In Solr, when you use the default QParser, the input is passed to the 
Lucene QueryParser which (in the absence of quotes) splits on whitespace, 
and treats each chunk seperately before passing them to the appropriate 
Analyzer (it does this because each chunk could have a differnet field 
name)

BUT! ... there are (as of Solr 1.3) many QParser options which can be 
selected at query time.  Yonik even added a whole new string prefix syntax 
so you can pick the QParser per individual querystring-esqe param (ie: q, 
fq, bq, facet.query, etc...)

The FieldQParserPlugin in particular passes the entire querystring to the 
Analyzer for the field specified by an "f" param as a single chunk...

         {!field f=yourfieldName}Some input that can have spaces

http://localhost:8983/solr/select/?debugQuery=true&rows=0&q=%7B%21field+f%3Dname%7DFoo+Bar


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 10 22:45:34 2008
Return-Path: <java-user-return-36041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21799 invoked from network); 10 Sep 2008 22:45:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2008 22:45:34 -0000
Received: (qmail 62416 invoked by uid 500); 10 Sep 2008 22:45:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61861 invoked by uid 500); 10 Sep 2008 22:45:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61850 invoked by uid 99); 10 Sep 2008 22:45:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 15:45:25 -0700
X-ASF-Spam-Status: No, hits=-2.5 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 22:44:27 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Re: Replacing FAST functionality atsesam.no-ShingleFilter+exactmatching
Date: Wed, 10 Sep 2008 18:44:54 -0400
Message-ID: <9294E20AED46934EA459020706463F94EF3848@SUEXCL-02.ad.syr.edu>
In-Reply-To: <Pine.LNX.4.62.0809101435420.28099@radix.cryptio.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Re: Replacing FAST functionality atsesam.no-ShingleFilter+exactmatching
Thread-Index: AckTjv4hT3DfWlqmTo2/cFP3OBIonAAB1L9w
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

On 09/10/2008 at 5:47 PM, Chris Hostetter wrote:
> BUT! ... there are (as of Solr 1.3) many QParser options which can be
> selected at query time.  Yonik even added a whole new string
> prefix syntax so you can pick the QParser per individual
> querystring-esqe param (ie: q, fq, bq, facet.query, etc...)
>=20
> The FieldQParserPlugin in particular passes the entire
> querystring to the Analyzer for the field specified by an
> "f" param as a single chunk...
>=20
>          {!field f=3DyourfieldName}Some input that can have spaces
>=20
> =
http://localhost:8983/solr/select/?debugQuery=3Dtrue&rows=3D0&q=3D%7B%21f=
ield+f%3Dname%7DFoo+Bar

Is the query-time syntax documented anywhere?  I can't find anything =
about this on the wiki.

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 11 00:56:55 2008
Return-Path: <java-user-return-36042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38163 invoked from network); 11 Sep 2008 00:56:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2008 00:56:55 -0000
Received: (qmail 87640 invoked by uid 500); 11 Sep 2008 00:56:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87604 invoked by uid 500); 11 Sep 2008 00:56:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87593 invoked by uid 99); 11 Sep 2008 00:56:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 17:56:45 -0700
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.198.230 as permitted sender)
Received: from [209.85.198.230] (HELO rv-out-0506.google.com) (209.85.198.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 00:55:47 +0000
Received: by rv-out-0506.google.com with SMTP id f6so113289rvb.5
        for <java-user@lucene.apache.org>; Wed, 10 Sep 2008 17:56:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=Vh64aAL2jypSTIcmSvUR3OrWJsXlnUzxjmLsdZNTqgQ=;
        b=dznDaQNI0Y+Bw19Z4usvR9cnzR/DK7DgD0AtBxlH8MAuRb8DLRV4elMaZPHfLayV9/
         iuEjfvTeb2Gz4ycvUflT6Ix3mzZlUSfv1xktDLZyXoa639nPZCeUM+B+uHOl4+qwUr2H
         fzw5Yq49ptisAHfsWeo5CEuIN73wnUDvOo+YY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=oyu/J3lVizzR6Fi0U0WiodcXRmURmhV1DkNhtPzUCQUSs9aDjXDPuiEcYiI3OvtgI3
         AyXvsmQlq+6qJWqh8CFut/hwfQAItTOoIPPWkubthnTQPM/wuys5pZYDRj62fswM39Bp
         Svxr7dKQSPkCeCH9HlB2/FJsH+rquQysHETRY=
Received: by 10.141.170.9 with SMTP id x9mr1278246rvo.90.1221094569435;
        Wed, 10 Sep 2008 17:56:09 -0700 (PDT)
Received: by 10.140.192.19 with HTTP; Wed, 10 Sep 2008 17:56:09 -0700 (PDT)
Message-ID: <c68e39170809101756l5cb6ae78t593fc2804fd689f1@mail.gmail.com>
Date: Wed, 10 Sep 2008 20:56:09 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Re: Replacing FAST functionality atsesam.no-ShingleFilter+exactmatching
In-Reply-To: <9294E20AED46934EA459020706463F94EF3848@SUEXCL-02.ad.syr.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <Pine.LNX.4.62.0809101435420.28099@radix.cryptio.net>
	 <9294E20AED46934EA459020706463F94EF3848@SUEXCL-02.ad.syr.edu>
X-Google-Sender-Auth: 6c5cf6841390a7d0
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Sep 10, 2008 at 6:44 PM, Steven A Rowe <sarowe@syr.edu> wrote:
> On 09/10/2008 at 5:47 PM, Chris Hostetter wrote:
>> BUT! ... there are (as of Solr 1.3) many QParser options which can be
>> selected at query time.  Yonik even added a whole new string
>> prefix syntax so you can pick the QParser per individual
>> querystring-esqe param (ie: q, fq, bq, facet.query, etc...)
>>
>> The FieldQParserPlugin in particular passes the entire
>> querystring to the Analyzer for the field specified by an
>> "f" param as a single chunk...
>>
>>          {!field f=yourfieldName}Some input that can have spaces
>>
>> http://localhost:8983/solr/select/?debugQuery=true&rows=0&q=%7B%21field+f%3Dname%7DFoo+Bar
>
> Is the query-time syntax documented anywhere?  I can't find anything about this on the wiki.

It's on my todo list for this release.
Javadoc is the best we have now... just look at the subclasses:
http://lucene.apache.org/solr/api/org/apache/solr/search/QParserPlugin.html

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 11 04:54:25 2008
Return-Path: <java-user-return-36043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5461 invoked from network); 11 Sep 2008 04:54:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2008 04:54:25 -0000
Received: (qmail 77430 invoked by uid 500); 11 Sep 2008 04:54:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77402 invoked by uid 500); 11 Sep 2008 04:54:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77390 invoked by uid 99); 11 Sep 2008 04:54:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Sep 2008 21:54:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [193.12.6.34] (HELO msgint02.mogul.com) (193.12.6.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 04:53:16 +0000
Received: from msgint02.mogul.com ([172.17.1.7]) by msgint02.mogul.com
 ([172.17.1.7]) with mapi; Thu, 11 Sep 2008 06:54:27 +0200
From: =?utf-8?B?SmltaSBIdWxsZWfDpXJk?= <jimi.hullegard@mogul.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 11 Sep 2008 06:54:14 +0200
Subject: Number to printable sortable string, including floating point
 numbers and negatives
Thread-Topic: Number to printable sortable string, including floating point
 numbers and negatives
Thread-Index: AckTynCFqJV+XQCGRIyWl7a5r4nlgw==
Message-ID: <D8E6BD3AD2634843B58AFF6A94FE246202D7A5A404@msgint02.mogul.com>
Accept-Language: sv-SE
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: sv-SE
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

SGksDQoNCkknbSB3YXMgc3VyZSB0aGlzIGRpc2N1c3Npb24gaGFzIGNvbWUgdXAgYmVmb3JlLCBi
dXQgYWZ0ZXIgbG9va2luZyBhcm91bmQgYWxvdCBJIGhhdmVuJ3QgZm91bmQgYSBzdWl0YWJsZSBh
bnN3ZXIuDQoNCkkgaGF2ZSBhIG5lZWQgdG8gaW5kZXggbnVtYmVyIGZpZWxkcyB0aGF0IGNhbiBi
ZSB1c2VkIGZvciBzb3J0aW5nIGFuZCByYW5nZSBxdWVyaWVzLCBob3dldmVyIHRoZSB2YXJpb3Vz
IHNvbHV0aW9ucyB0aGF0IEkgaGF2ZSBzZWVuIGRvZXMgYWxsIGhhdmUgc29tZSBraW5kIG9mIGRv
d25zaWRlLiBGaXJzdCBvZiBhbGwsIEkgd2FudCBpdCB0byBzdXBwb3J0IGZsb2F0aW5nIHBvaW50
IG51bWJlcnMgYW5kIG5lZ2F0aXZlIG51bWJlcnMsIGFuZCB3aGVuIGl0IGNvbWVzIHRvIG5lZ2F0
aXZlIG51bWJlcnMgYSBzaW1wbGUgcGFkZGluZyBvZiB6ZXJvcyBkb2Vzbid0IGRvIGl0LiBBbHNv
LCBJIHdvdWxkIGxpa2UgdGhlIHJlc3VsdGluZyBzdHJpbmcgdG8gb25seSBjb250YWluIHByaW50
YWJsZSBjaGFyYWN0ZXJzLCBvciBhdCB0aGUgdmVyeSBsZWFzdCBub3Qgc29tZSBzcGVjaWFsIG1l
YW5pbmcgY2hhcmFjdGVyIGxpa2UgdGhlIG51bGwgY2hhcmFjdGVyLiBBbmQgb2Zjb3Vyc2UgSSB3
b3VsZCBsaWtlIHRvIGJlIGFibGUgdG8gdXNlIHRoZSBmdWxsIHJhbmdlIG9mIHRoZSBudW1iZXIg
dHlwZSAoaWUgSW50ZWdlci5NSU5fVkFMVUUgdG8gSW50ZWdlci5NQVhfVkFMVUUsIGFuZCB0aGUg
c2FtZSBmb3IgRmxvYXQgYW5kIERvdWJsZSkuDQoNCkkgaGF2ZSBzZWVuIGEgZmV3IHBlb3BsZSBy
ZWZlcmluZyB0byBzb21lIFNvbHIgY29kZSB0aGF0IHN1cHBvc2VkbHkgc29sdmVzIHRoZSBwcm9i
bGVtIHdpdGggbmVnYXRpdmUgbnVtYmVyczoNCg0KaHR0cDovL3N2bi5hcGFjaGUub3JnL3ZpZXd2
Yy9sdWNlbmUvc29sci90cnVuay9zcmMvamF2YS9vcmcvYXBhY2hlL3NvbHIvdXRpbC9OdW1iZXJV
dGlscy5qYXZhP3ZpZXc9bWFya3VwDQoNCkhvd2V2ZXIsIHRoZSByZXN1bHRpbmcgc3RyaW5nIGNv
bnRhaW5zIG5vbi1wcmludGFibGUgY2hhcmFjdGVycyBmb3IgbW9zdCBudW1iZXJzLCBpbmNsdWRp
bmcgdGhlIG51bGwgY2hhcmFjdGVyLiBUaGlzIGhhcyBnaXZlbiBtZSB0d28gcHJvYmxlbXM6DQoN
CjEuIFdoZW4gcHJpbnRpbmcgb3V0IGRlYnVnIG1lc3NhZ2VzIGNvbnRhaW5pbmcgdGhlIHF1ZXJ5
LCB0aGUgcmFuZ2UgcXVlcnkgbG9va3MgbGlrZSBzb21ldGhpbmcgbGlrZSB0aGlzOiAiZmllbGQ6
W+KCrCAgIFRPIOKCrCBkXSIsIGFuZCBJIGdldCBwcm9ibGVtcyB3aGVuIEkgdHJ5IHRvIGNvcHkg
dGhpcyB0ZXh0IGZyb20gdGV4dHBhZCBmb3IgZXhhbXBsZSwgc2luY2UgaXQgY29tcGxhaW5zIGFi
b3V0IHRoZSBudWxsIGNoYXJhY3Rlci4NCg0KMi4gVGhlIHNwZWNpYWwgY2FzZSBjaGFyYWN0ZXJz
IGFyZSBiZWluZyBpZ25vcmVkL3JlbW92ZWQgYnkgbW9zdCB0b2tlbml6ZXJzIHNvIEkgY2FuJ3Qg
cGFyc2UgdGhlIHF1ZXJ5LXN0cmluZyB1c2luZyB0aGUgcmVndWxhciBhbmFseXplciB0aGF0IHdl
IG5vcm1hbGx5IHVzZS4NCg0KRG8geW91IGhhdmUgYW55IHN1Z2dlc3Rpb25zIG9uIGhvdyB0byBz
b2x2ZSB0aGlzIGluIGEgIm5lYXQiIHdheT8gQW5kIGlzIHRoZSBpbnRlcmVzdCBpbiB0aGlzIHJl
YWxseSB0aGF0IGxvdyAoanVkZ2luZyBmcm9tIHRoZSBwb29yIHNlYXJjaCByZXN1bHQgSSBnb3Qg
d2hlbiBzZWFyY2hpbmcgZm9yICJsdWNlbmUgc29ydGluZyBuZWdhdGl2ZSBudW1iZXJzIiBhbmQg
c2ltaWxhcik/IEkgd291bGQgaGF2ZSB0aG91Z2h0IHRoYXQgdGhlIG5lZWQgZm9yIHRoaXMgZnVu
Y3Rpb25hbGxpdHkgd2FzIHF1aXRlIGZ1bmRhbWVudGFsLCBhbmQgdGhhdCBpdCB3YXMgYWxyZWFk
eSBwYXJ0IG9mIEx1Y2VuZSBjb3JlLg0KDQpSZWdhcmRzDQovSmltaQ0KDQptb2d1bCB8IGppbWkg
aHVsbGVnw6VyZCB8IHN5c3RlbSBkZXZlbG9wZXIgfCBodWRpa3N2YWxsc2dhdGFuIDQsIDExMyAz
MCBzdG9ja2hvbG0gc3dlZGVuIHwgKzQ2IDggNTA2IDY2IDE3MiB8ICs0NiA3NjUgMjcgMTkgNTUg
fCBqaW1pLmh1bGxlZ2FyZEBtb2d1bC5jb20gfCB3d3cubW9ndWwuY29tDQo=


From java-user-return-36044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 11 07:53:41 2008
Return-Path: <java-user-return-36044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98796 invoked from network); 11 Sep 2008 07:53:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2008 07:53:40 -0000
Received: (qmail 63667 invoked by uid 500); 11 Sep 2008 07:53:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63636 invoked by uid 500); 11 Sep 2008 07:53:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63624 invoked by uid 99); 11 Sep 2008 07:53:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 00:53:30 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_HELO_PASS,SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 07:52:30 +0000
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1Kdgvz-0006QH-K7
	for java-user@lucene.apache.org; Thu, 11 Sep 2008 07:49:47 +0000
Received: from wever.org ([83.243.151.80])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Thu, 11 Sep 2008 07:49:47 +0000
Received: from mick by wever.org with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Thu, 11 Sep 2008 07:49:47 +0000
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Mck <mick@semb.wever.org>
Subject:  RE:  Re: Replacing FAST functionality
	atsesam.no-ShingleFilter+exactmatching
Date:  Thu, 11 Sep 2008 09:51:33 +0200
Lines: 63
Message-ID:  <1221119493.8908.97.camel@localhost>
References:  <9294E20AED46934EA459020706463F94EF3830@SUEXCL-02.ad.syr.edu>
	 <Pine.LNX.4.62.0809101435420.28099@radix.cryptio.net>
Mime-Version:  1.0
Content-Type:  multipart/signed; micalg=pgp-sha1; protocol="application/pgp-signature"; boundary="=-iAWHVMnFwBDjzEpxRdQs"
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: wever.org
In-Reply-To: <Pine.LNX.4.62.0809101435420.28099@radix.cryptio.net>
X-Mailer: Evolution 2.22.3.1 
Sender: news <news@ger.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org

--=-iAWHVMnFwBDjzEpxRdQs
Content-Type: text/plain
Content-Transfer-Encoding: quoted-printable

On Wed, 2008-09-10 at 14:47 -0700, Chris Hostetter wrote:
> The FieldQParserPlugin in particular passes the entire querystring to
> the=20
> Analyzer for the field specified by an "f" param as a single chunk...
>=20
>          {!field f=3DyourfieldName}Some input that can have spaces
>=20
> http://localhost:8983/solr/select/?debugQuery=3Dtrue&rows=3D0&q=3D%7B%
> 21field+f%3Dname%7DFoo+Bar

But at the end of the day will
{!field f:list_entry_shingle}abcd efgh ijkl
still end up as
list_entry_shingle:"abcd efgh ijkl"
?

I was unable to get a url like
http://localhost:8080/solr/select/?debugQuery=3Dtrue&rows=3D0&q=3D{!field%2=
0f:list_entry_shingle}abcd%20efgh%20ijkl
to work. I got=20
> org.apache.lucene.queryParser.ParseException: Expected identifier at
> pos 9 str=3D'{!field f:list_entry_shingle}abcd efgh ijkl'

I ask because the javadoc indicates this and from what i can see in
FieldQParserPlugin you still end up with one of the same three return
types:
BooleanQuery, MultiPhraseQuery, or PhraseQuery.

So as long as we have shingles with positionIncrement=3D0 and unigrams (or
the first shingles) with positionIncrement=3D1 you'll end up with a
MultiPhraseQuery.
If we treat the phrase instead as a single term (eg by using the
KeywordTokenizer) then no shingles will be generated (as one term is
just a unigram).

Does this make sense?

~mck

--=20
"Living on Earth is expensive, but it does include a free trip around
the sun every year." Unknown=20
| semb.wever.org | sesat.no | sesam.no |

--=-iAWHVMnFwBDjzEpxRdQs
Content-Type: application/pgp-signature; name=signature.asc
Content-Description: This is a digitally signed message part

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.9 (GNU/Linux)

iEYEABECAAYFAkjIzgQACgkQkdPrePiuutO0LQCgtXxrHfwzQqRMSqoJWngbS2bJ
cGgAn027l1xObRyQ2HuZe87xVElj7thl
=DrD+
-----END PGP SIGNATURE-----

--=-iAWHVMnFwBDjzEpxRdQs--



From java-user-return-36045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 11 08:05:24 2008
Return-Path: <java-user-return-36045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6061 invoked from network); 11 Sep 2008 08:05:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2008 08:05:24 -0000
Received: (qmail 81860 invoked by uid 500); 11 Sep 2008 08:05:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81823 invoked by uid 500); 11 Sep 2008 08:05:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81812 invoked by uid 99); 11 Sep 2008 08:05:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 01:05:14 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of fromboise@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 11 Sep 2008 08:04:15 +0000
Received: (qmail invoked by alias); 11 Sep 2008 08:03:44 -0000
Received: from xdslcv081.osnanet.de (HELO elgeilo) [89.166.149.81]
  by mail.gmx.net (mp059) with SMTP; 11 Sep 2008 10:03:44 +0200
X-Authenticated: #6059999
X-Provags-ID: V01U2FsdGVkX1/Eg1YmP1bEkx/X6ypLeFEYtKVD2LBQA7Ch2qaD7x
	ZuWyyia9jyj/5x
Message-ID: <001f01c913e4$eb30e090$6a7ba8c0@elgeilo>
From: "Marie-Christine Plogmann" <fromboise@gmx.de>
To: <java-user@lucene.apache.org>
Subject: Problems when changing stoplist file
Date: Thu, 11 Sep 2008 10:03:46 +0200
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_001C_01C913F5.AE559790"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3350
X-Y-GMX-Trusted: 0
X-FuHaFi: 0.78,0.76
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_001C_01C913F5.AE559790
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,

I am currently using the demo class IndexFiles to index some corpus. I =
have replaced the Standard by a GermanAnalyzer. Here, indexing works =
fine.
But if i specify a different stopword list that should be used, the =
tokenization doesn't seem to work properly. Mostly some letters are =
missing at the end. Has somebody encountered a similar problem? What =
could be the problem?

Thanks!
Marie
------=_NextPart_000_001C_01C913F5.AE559790--


From java-user-return-36046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 11 08:35:28 2008
Return-Path: <java-user-return-36046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18424 invoked from network); 11 Sep 2008 08:35:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2008 08:35:27 -0000
Received: (qmail 15439 invoked by uid 500); 11 Sep 2008 08:35:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15413 invoked by uid 500); 11 Sep 2008 08:35:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15402 invoked by uid 99); 11 Sep 2008 08:35:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 01:35:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [192.112.254.51] (HELO smtp2.bedag.ch) (192.112.254.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 08:34:20 +0000
Received: from localhost (localhost [127.0.0.1])
	by smtp1.bedag.ch (Postfix) with ESMTP id 06BD4739EA
	for <java-user@lucene.apache.org>; Thu, 11 Sep 2008 10:34:20 +0200 (CEST)
X-Quarantine-ID: <e4PDp9qgZOby>
X-Virus-Scanned: Scanned
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: AW: Search with multiple wildcards
Date: Thu, 11 Sep 2008 10:34:13 +0200
Message-ID: <1D3D7943573BD14FB024A9654EB43CCB02A4C692@A99A-EMS-01VS2.ad.bedag.ch>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Search with multiple wildcards
Thread-Index: AckTYHXi5MYHZlXBT3iCYEJqyocYCAAiBDBA
References: <1D3D7943573BD14FB024A9654EB43CCB02A4C689@A99A-EMS-01VS2.ad.bedag.ch> <359a92830809100646l74d4306l4f0af3809912f2b3@mail.gmail.com> <1D3D7943573BD14FB024A9654EB43CCB02A4C68E@A99A-EMS-01VS2.ad.bedag.ch> <359a92830809100744s4ba43936h5150d28c3ed0443c@mail.gmail.com> <1D3D7943573BD14FB024A9654EB43CCB02A4C690@A99A-EMS-01VS2.ad.bedag.ch> <359a92830809100914m26c73088ueb142c21f246e8f1@mail.gmail.com>
From: "Sertic Mirko, Bedag" <Mirko.Sertic@bedag.ch>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 11 Sep 2008 08:34:14.0005 (UTC) FILETIME=[2BCECA50:01C913E9]
X-Virus-Checked: Checked by ClamAV on apache.org

Ok, i gave it a try, but i ran into this TooManyClauses Exception. I see =
that
3ildcard queries are expanded before they are processed, and I see that =
i can
set the clauses count to Integer.MAXVALUE, and queries can consume a lot =
of memory,=20
but one final thing is still open: does a wildcard query work together =
with=20
the Lucene Highlighter? I tried it, but I only got an empty result. =
Without=20
wildcards, the highlighter works pretty smooth!

Regards
Mirko

-----Urspr=FCngliche Nachricht-----
Von: Erick Erickson [mailto:erickerickson@gmail.com]=20
Gesendet: Mittwoch, 10. September 2008 18:15
An: java-user@lucene.apache.org
Betreff: Re: Search with multiple wildcards

Of course you can construct your own BooleanQuery
programmatically.

It's relatively easy, just try it.

On Wed, Sep 10, 2008 at 11:52 AM, Sertic Mirko, Bedag =
<Mirko.Sertic@bedag.ch
> wrote:

> Jep, this is what i have read.
>
> do I need to use the query parser, or can I create a query by the api?
> Is there an example available?
>
> Thanks a lot
> Mirko
>
> -----Urspr=FCngliche Nachricht-----
> Von: Erick Erickson [mailto:erickerickson@gmail.com]
> Gesendet: Mittwoch, 10. September 2008 16:45
> An: java-user@lucene.apache.org
> Betreff: Re: Search with multiple wildcards
>
> Is this what you're referring to?
>
> Lucene supports single and multiple character wildcard searches within
> single terms (not within phrase queries).
> (from http://lucene.apache.org/java/docs/queryparsersyntax.html)
>
> I'm pretty sure you can have multiple *terms* with wildcards. Luke is =
your
> friend here, download a copy and try it <G>. Be sure on the search tab =
to
> specify StandardAnalyzer or some such, rather than keywordanalyzer.
>
> The phrase is trying to point out that a phrase query does NOT respect
> wildcards. That is, submitting
> "ab* bc* cd*" AS A PHRASE QUERY won't do what you expect. But I'm =
pretty
> sure that
>
> +field:ab* +field:bc* +field:cd*
>
> will work just fine. The key here is "within single terms", which I =
think
> of
> as
> "within a single term query". You can add as many TermQuerys as you =
want.
> See the query documentation for how to submit phrase queries.
>
> Best
> Erick
>
> On Wed, Sep 10, 2008 at 10:11 AM, Sertic Mirko, Bedag
> <Mirko.Sertic@bedag.ch
> > wrote:
>
> > Hi
> >
> > Thank you for your quick response:-)
> >
> > Of course I need to use the * character :-) But I have read =
somewhere in
> > the documentation that leading wildcards are not supported, and only =
one
> > wildcard term per query. Is this limitation resolved in the current
> version?
> >
> > Regards
> > Mirko
> >
> > -----Urspr=FCngliche Nachricht-----
> > Von: Erick Erickson [mailto:erickerickson@gmail.com]
> > Gesendet: Mittwoch, 10. September 2008 15:47
> > An: java-user@lucene.apache.org
> > Betreff: Re: Search with multiple wildcards
> >
> > Sure, but you'll have to set the leading wildcard option,
> > which I've forgotten the exact call, but it's in the docs.
> >
> > And use * rather than % <G>.
> >
> > But wildcards are tricky, especially the TooManyClauses
> > exception. You might want to peruse the archive for wildcard
> > posts...
> >
> > Best
> > Erick
> >
> > On Wed, Sep 10, 2008 at 9:06 AM, Sertic Mirko, Bedag
> > <Mirko.Sertic@bedag.ch>wrote:
> >
> > > Hi@all
> > >
> > >
> > >
> > > Is it possible to do a search with multiple wildcards in one =
query, for
> > > instance "%MANAGE%" AND "CORE%"? Is there a code example =
available?
> > >
> > >
> > >
> > > Thanks a lot
> > >
> > > Mirko
> > >
> > >
> > >
> > >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 11 09:21:38 2008
Return-Path: <java-user-return-36047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40435 invoked from network); 11 Sep 2008 09:21:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2008 09:21:37 -0000
Received: (qmail 65583 invoked by uid 500); 11 Sep 2008 09:21:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65555 invoked by uid 500); 11 Sep 2008 09:21:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65544 invoked by uid 99); 11 Sep 2008 09:21:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 02:21:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.217] (HELO web26006.mail.ukl.yahoo.com) (217.12.10.217)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 11 Sep 2008 09:20:28 +0000
Received: (qmail 31021 invoked by uid 60001); 11 Sep 2008 09:19:57 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=AX2FBBv20nJug4X1mB2Vn6LmH5K4H97JYwHwVErI+EqiHGGO/zEN7bfO/Sb19IiJn62Q+WWGpGEHTDsd3VhdbHcKwwqYDLfe+ii35e2q/e2CXzdlcvEo+wA4fNxlTHl5NdApYvDrt3fcpgVim3f2Ms5uHssluzlZfGHIrbfo0VI=;
X-YMail-OSG: ASUBMisVM1kZNO25gKtXDQIYG4bXCXgTyeKMBuuGIP6FRr85x91UQ62RvwXPf0ugR_UkLi0jsVVAtx1of4wB6aOdy2kngXWlhVDu_E8ekfEnrPFSm.vvJpJKlu3WxS64hT4mrdC6KVmdVzTsn5LEDh_I
Received: from [193.36.230.96] by web26006.mail.ukl.yahoo.com via HTTP; Thu, 11 Sep 2008 09:19:57 GMT
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Thu, 11 Sep 2008 09:19:57 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: AW: Search with multiple wildcards
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <145180.30656.qm@web26006.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

You need to call rewrite on the query to expand it then give that version t=
o the highlighter - see the package javadocs.=0Ahttp://lucene.apache.org/ja=
va/2_2_0/api/org/apache/lucene/search/highlight/package-summary.html#packag=
e_description=0A=0A=0ACheers=0AMark=0A=0A=0A=0A=0A----- Original Message --=
--=0AFrom: "Sertic Mirko, Bedag" <Mirko.Sertic@bedag.ch>=0ATo: java-user@lu=
cene.apache.org=0ASent: Thursday, 11 September, 2008 9:34:13=0ASubject: AW:=
 Search with multiple wildcards=0A=0AOk, i gave it a try, but i ran into th=
is TooManyClauses Exception. I see that=0A3ildcard queries are expanded bef=
ore they are processed, and I see that i can=0Aset the clauses count to Int=
eger.MAXVALUE, and queries can consume a lot of memory, =0Abut one final th=
ing is still open: does a wildcard query work together with =0Athe Lucene H=
ighlighter? I tried it, but I only got an empty result. Without =0Awildcard=
s, the highlighter works pretty smooth!=0A=0ARegards=0AMirko=0A=0A-----Ursp=
r=FCngliche Nachricht-----=0AVon: Erick Erickson [mailto:erickerickson@gmai=
l.com] =0AGesendet: Mittwoch, 10. September 2008 18:15=0AAn: java-user@luce=
ne.apache.org=0ABetreff: Re: Search with multiple wildcards=0A=0AOf course =
you can construct your own BooleanQuery=0Aprogrammatically.=0A=0AIt's relat=
ively easy, just try it.=0A=0AOn Wed, Sep 10, 2008 at 11:52 AM, Sertic Mirk=
o, Bedag <Mirko.Sertic@bedag.ch=0A> wrote:=0A=0A> Jep, this is what i have =
read.=0A>=0A> do I need to use the query parser, or can I create a query by=
 the api?=0A> Is there an example available?=0A>=0A> Thanks a lot=0A> Mirko=
=0A>=0A> -----Urspr=FCngliche Nachricht-----=0A> Von: Erick Erickson [mailt=
o:erickerickson@gmail.com]=0A> Gesendet: Mittwoch, 10. September 2008 16:45=
=0A> An: java-user@lucene.apache.org=0A> Betreff: Re: Search with multiple =
wildcards=0A>=0A> Is this what you're referring to?=0A>=0A> Lucene supports=
 single and multiple character wildcard searches within=0A> single terms (n=
ot within phrase queries).=0A> (from http://lucene.apache.org/java/docs/que=
ryparsersyntax.html)=0A>=0A> I'm pretty sure you can have multiple *terms* =
with wildcards. Luke is your=0A> friend here, download a copy and try it <G=
>. Be sure on the search tab to=0A> specify StandardAnalyzer or some such, =
rather than keywordanalyzer.=0A>=0A> The phrase is trying to point out that=
 a phrase query does NOT respect=0A> wildcards. That is, submitting=0A> "ab=
* bc* cd*" AS A PHRASE QUERY won't do what you expect. But I'm pretty=0A> s=
ure that=0A>=0A> +field:ab* +field:bc* +field:cd*=0A>=0A> will work just fi=
ne. The key here is "within single terms", which I think=0A> of=0A> as=0A> =
"within a single term query". You can add as many TermQuerys as you want.=
=0A> See the query documentation for how to submit phrase queries.=0A>=0A> =
Best=0A> Erick=0A>=0A> On Wed, Sep 10, 2008 at 10:11 AM, Sertic Mirko, Beda=
g=0A> <Mirko.Sertic@bedag.ch=0A> > wrote:=0A>=0A> > Hi=0A> >=0A> > Thank yo=
u for your quick response:-)=0A> >=0A> > Of course I need to use the * char=
acter :-) But I have read somewhere in=0A> > the documentation that leading=
 wildcards are not supported, and only one=0A> > wildcard term per query. I=
s this limitation resolved in the current=0A> version?=0A> >=0A> > Regards=
=0A> > Mirko=0A> >=0A> > -----Urspr=FCngliche Nachricht-----=0A> > Von: Eri=
ck Erickson [mailto:erickerickson@gmail.com]=0A> > Gesendet: Mittwoch, 10. =
September 2008 15:47=0A> > An: java-user@lucene.apache.org=0A> > Betreff: R=
e: Search with multiple wildcards=0A> >=0A> > Sure, but you'll have to set =
the leading wildcard option,=0A> > which I've forgotten the exact call, but=
 it's in the docs.=0A> >=0A> > And use * rather than % <G>.=0A> >=0A> > But=
 wildcards are tricky, especially the TooManyClauses=0A> > exception. You m=
ight want to peruse the archive for wildcard=0A> > posts...=0A> >=0A> > Bes=
t=0A> > Erick=0A> >=0A> > On Wed, Sep 10, 2008 at 9:06 AM, Sertic Mirko, Be=
dag=0A> > <Mirko.Sertic@bedag.ch>wrote:=0A> >=0A> > > Hi@all=0A> > >=0A> > =
>=0A> > >=0A> > > Is it possible to do a search with multiple wildcards in =
one query, for=0A> > > instance "%MANAGE%" AND "CORE%"? Is there a code exa=
mple available?=0A> > >=0A> > >=0A> > >=0A> > > Thanks a lot=0A> > >=0A> > =
> Mirko=0A> > >=0A> > >=0A> > >=0A> > >=0A> >=0A> > -----------------------=
----------------------------------------------=0A> > To unsubscribe, e-mail=
: java-user-unsubscribe@lucene.apache.org=0A> > For additional commands, e-=
mail: java-user-help@lucene.apache.org=0A> >=0A> >=0A>=0A> ----------------=
-----------------------------------------------------=0A> To unsubscribe, e=
-mail: java-user-unsubscribe@lucene.apache.org=0A> For additional commands,=
 e-mail: java-user-help@lucene.apache.org=0A>=0A>=0A=0A--------------------=
-------------------------------------------------=0ATo unsubscribe, e-mail:=
 java-user-unsubscribe@lucene.apache.org=0AFor additional commands, e-mail:=
 java-user-help@lucene.apache.org=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 11 09:49:35 2008
Return-Path: <java-user-return-36048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57824 invoked from network); 11 Sep 2008 09:49:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2008 09:49:35 -0000
Received: (qmail 1261 invoked by uid 500); 11 Sep 2008 09:49:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 935 invoked by uid 500); 11 Sep 2008 09:49:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 924 invoked by uid 99); 11 Sep 2008 09:49:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 02:49:25 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dckorah@gmail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 09:48:26 +0000
Received: by fg-out-1718.google.com with SMTP id l27so181822fgb.27
        for <java-user@lucene.apache.org>; Thu, 11 Sep 2008 02:48:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:subject:date
         :mime-version:content-type:x-mailer:x-mimeole:thread-index
         :message-id;
        bh=d/9s3P5Yxn2PQNMHQ9O2YOCky92T4XVaMXVExEirk68=;
        b=eJ2SeHa3auN0cyYhtKF7BVcGG7Gy7MGaGPFN/tfpBoP/uuX+Me1cKa0kpxdXwRgf2/
         M6+TkBAE9XVYdQ2tDSp3rRYf8kFlv/0nPCr/KL8e4B3/WT9/XiTJGB9TBmAApqlh/ug4
         Tiv1g/jqjXmAeGnkiu8SsdB+oUgr4wukBTiKI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:subject:date:mime-version:content-type:x-mailer:x-mimeole
         :thread-index:message-id;
        b=Vkfhc7YIZZU4Dm2+7Y7ffypYca3RIgyBxwhJnnJ+VhP8SwxAcJUSCjnZkzahQUmGLW
         PeOfrjgFLy7reBSkGqakvYTgFQXy+vPrbzQ8LXGLs+RZNDs6IGnm5oTFpt8huU8l1csl
         IhacSWrJOJ0e+szJkWO5lsaHG9y9hh/mvGUEU=
Received: by 10.180.204.10 with SMTP id b10mr1759097bkg.45.1221126519889;
        Thu, 11 Sep 2008 02:48:39 -0700 (PDT)
Received: from SCWDEVDINOKVM ( [195.2.245.68])
        by mx.google.com with ESMTPS id 33sm7557190nfu.7.2008.09.11.02.48.36
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 11 Sep 2008 02:48:38 -0700 (PDT)
From: "Dino Korah" <dckorah@gmail.com>
To: <java-user@lucene.apache.org>
Subject: Searcher - search() & Hits Deprecation
Date: Thu, 11 Sep 2008 10:46:45 +0100
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0034_01C913FB.B0998560"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3350
Thread-Index: AckT802oZZxb6d5/QVSqay1LqdW3Mw==
Message-ID: <48c8e976.2115300a.7765.ffffeac7@mx.google.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0034_01C913FB.B0998560
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

Hi All,
 
In my project I use Hits from Searcher.search() for my query results. If I
am to move to Lucene 3's ways, I will have to use TopDocs I presume.
 
It'll be great if someone could guide me with some sort of skeleton code.
Also is it possible to cache the results like I do with Hits?
 
Another question I have is on the order of application of Query, Filter and
Sort. Surely sort is last.! At low level if I have an effective filter,
would it reduce the number of seek+read & memory usage?
 
TopFieldDocs search(Query query, Filter filter, int n, Sort sort)
 
Many thanks
Dino
 

------=_NextPart_000_0034_01C913FB.B0998560--


From java-user-return-36049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 11 10:34:33 2008
Return-Path: <java-user-return-36049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79904 invoked from network); 11 Sep 2008 10:34:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2008 10:34:33 -0000
Received: (qmail 68984 invoked by uid 500); 11 Sep 2008 10:34:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68938 invoked by uid 500); 11 Sep 2008 10:34:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68920 invoked by uid 99); 11 Sep 2008 10:34:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 03:34:20 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sdzhouxinxin@gmail.com designates 72.14.204.236 as permitted sender)
Received: from [72.14.204.236] (HELO qb-out-0506.google.com) (72.14.204.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 10:33:22 +0000
Received: by qb-out-0506.google.com with SMTP id e11so451391qba.27
        for <java-user@lucene.apache.org>; Thu, 11 Sep 2008 03:33:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=NrMH94Eb/jbEyfnSuC09/fowYw4+rGvWLmnc6FKA5mU=;
        b=iZfC5aBiWpzTc6Z9SIJCbz4i0NNalJsQfgAltgqI87acnFp/udqzphgCNji4LWql6M
         xoP/Tyl7PL6m3GgUgrfF7kb8oNmLV30dUTZRtcUbpJFkJenvBWhiMr8GUgDu1Dl+clKX
         amjvZxbUH4IArYs8DaJ0yG0evZvnr7jui0mzk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=T6EyDfWSXdAb42F6bGKWvKTrwVScinnvWbAw3Lc5UscV/7o6P8vBOnfk+MRWk8muiF
         0aCV3b2oetXkBKGZZeTE8fRe6sDIhTAz7N3CThtlC1hlkoRuLUxM5lKBMElNDKO+37Wn
         OeEcY+RGXvtrVoTc1pCbrEMqnOm8g5QRhe6NM=
Received: by 10.86.82.6 with SMTP id f6mr1874170fgb.53.1221129223188;
        Thu, 11 Sep 2008 03:33:43 -0700 (PDT)
Received: by 10.86.29.4 with HTTP; Thu, 11 Sep 2008 03:33:43 -0700 (PDT)
Message-ID: <b07cb2360809110333m1f2b95a2rfc425b4c92d26e7e@mail.gmail.com>
Date: Thu, 11 Sep 2008 18:33:43 +0800
From: "xinxin zhou" <sdzhouxinxin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: C++ Bindings for Lucene?
In-Reply-To: <09B97D2C4B49DF409E2D018999AC6FE115B434976A@PA-EXMBX14.vmware.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_37023_3394911.1221129223194"
References: <AckR2Exm/20uCF7ySkuBYNsMI3feYA==>
	 <09B97D2C4B49DF409E2D018999AC6FE115B434976A@PA-EXMBX14.vmware.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_37023_3394911.1221129223194
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>
> just try it.and you will find answer.
>

------=_Part_37023_3394911.1221129223194--

From java-user-return-36050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 11 11:08:51 2008
Return-Path: <java-user-return-36050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 132 invoked from network); 11 Sep 2008 11:08:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2008 11:08:51 -0000
Received: (qmail 2569 invoked by uid 500); 11 Sep 2008 11:08:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2532 invoked by uid 500); 11 Sep 2008 11:08:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2521 invoked by uid 99); 11 Sep 2008 11:08:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 04:08:41 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [192.112.254.51] (HELO smtp2.bedag.ch) (192.112.254.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 11:07:43 +0000
Received: from localhost (localhost [127.0.0.1])
	by smtp1.bedag.ch (Postfix) with ESMTP id 9E671739DE
	for <java-user@lucene.apache.org>; Thu, 11 Sep 2008 13:07:42 +0200 (CEST)
X-Quarantine-ID: <aaresv6GHYdQ>
X-Virus-Scanned: Scanned
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: AW: AW: Search with multiple wildcards
Date: Thu, 11 Sep 2008 13:07:36 +0200
Message-ID: <1D3D7943573BD14FB024A9654EB43CCB02A4C695@A99A-EMS-01VS2.ad.bedag.ch>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: AW: Search with multiple wildcards
Thread-Index: AckT79BpGEFLSNuYQMKQqMxqTZBfWQADhRpQ
References: <145180.30656.qm@web26006.mail.ukl.yahoo.com>
From: "Sertic Mirko, Bedag" <Mirko.Sertic@bedag.ch>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 11 Sep 2008 11:07:36.0774 (UTC) FILETIME=[9915E660:01C913FE]
X-Virus-Checked: Checked by ClamAV on apache.org

Ok, one final question:

If i query for "*ll*", the query is expanded to ("hallo" or "alle" or =
...), so the
Highligter will highlight the words "hallo" or "alle". But how can i =
highlight only
the original query, so only the "ll"? Is this possible?

Thanks a lot
Mirko

-----Urspr=FCngliche Nachricht-----
Von: mark harwood [mailto:markharw00d@yahoo.co.uk]=20
Gesendet: Donnerstag, 11. September 2008 11:20
An: java-user@lucene.apache.org
Betreff: Re: AW: Search with multiple wildcards

You need to call rewrite on the query to expand it then give that =
version to the highlighter - see the package javadocs.
http://lucene.apache.org/java/2_2_0/api/org/apache/lucene/search/highligh=
t/package-summary.html#package_description


Cheers
Mark




----- Original Message ----
From: "Sertic Mirko, Bedag" <Mirko.Sertic@bedag.ch>
To: java-user@lucene.apache.org
Sent: Thursday, 11 September, 2008 9:34:13
Subject: AW: Search with multiple wildcards

Ok, i gave it a try, but i ran into this TooManyClauses Exception. I see =
that
3ildcard queries are expanded before they are processed, and I see that =
i can
set the clauses count to Integer.MAXVALUE, and queries can consume a lot =
of memory,=20
but one final thing is still open: does a wildcard query work together =
with=20
the Lucene Highlighter? I tried it, but I only got an empty result. =
Without=20
wildcards, the highlighter works pretty smooth!

Regards
Mirko

-----Urspr=FCngliche Nachricht-----
Von: Erick Erickson [mailto:erickerickson@gmail.com]=20
Gesendet: Mittwoch, 10. September 2008 18:15
An: java-user@lucene.apache.org
Betreff: Re: Search with multiple wildcards

Of course you can construct your own BooleanQuery
programmatically.

It's relatively easy, just try it.

On Wed, Sep 10, 2008 at 11:52 AM, Sertic Mirko, Bedag =
<Mirko.Sertic@bedag.ch
> wrote:

> Jep, this is what i have read.
>
> do I need to use the query parser, or can I create a query by the api?
> Is there an example available?
>
> Thanks a lot
> Mirko
>
> -----Urspr=FCngliche Nachricht-----
> Von: Erick Erickson [mailto:erickerickson@gmail.com]
> Gesendet: Mittwoch, 10. September 2008 16:45
> An: java-user@lucene.apache.org
> Betreff: Re: Search with multiple wildcards
>
> Is this what you're referring to?
>
> Lucene supports single and multiple character wildcard searches within
> single terms (not within phrase queries).
> (from http://lucene.apache.org/java/docs/queryparsersyntax.html)
>
> I'm pretty sure you can have multiple *terms* with wildcards. Luke is =
your
> friend here, download a copy and try it <G>. Be sure on the search tab =
to
> specify StandardAnalyzer or some such, rather than keywordanalyzer.
>
> The phrase is trying to point out that a phrase query does NOT respect
> wildcards. That is, submitting
> "ab* bc* cd*" AS A PHRASE QUERY won't do what you expect. But I'm =
pretty
> sure that
>
> +field:ab* +field:bc* +field:cd*
>
> will work just fine. The key here is "within single terms", which I =
think
> of
> as
> "within a single term query". You can add as many TermQuerys as you =
want.
> See the query documentation for how to submit phrase queries.
>
> Best
> Erick
>
> On Wed, Sep 10, 2008 at 10:11 AM, Sertic Mirko, Bedag
> <Mirko.Sertic@bedag.ch
> > wrote:
>
> > Hi
> >
> > Thank you for your quick response:-)
> >
> > Of course I need to use the * character :-) But I have read =
somewhere in
> > the documentation that leading wildcards are not supported, and only =
one
> > wildcard term per query. Is this limitation resolved in the current
> version?
> >
> > Regards
> > Mirko
> >
> > -----Urspr=FCngliche Nachricht-----
> > Von: Erick Erickson [mailto:erickerickson@gmail.com]
> > Gesendet: Mittwoch, 10. September 2008 15:47
> > An: java-user@lucene.apache.org
> > Betreff: Re: Search with multiple wildcards
> >
> > Sure, but you'll have to set the leading wildcard option,
> > which I've forgotten the exact call, but it's in the docs.
> >
> > And use * rather than % <G>.
> >
> > But wildcards are tricky, especially the TooManyClauses
> > exception. You might want to peruse the archive for wildcard
> > posts...
> >
> > Best
> > Erick
> >
> > On Wed, Sep 10, 2008 at 9:06 AM, Sertic Mirko, Bedag
> > <Mirko.Sertic@bedag.ch>wrote:
> >
> > > Hi@all
> > >
> > >
> > >
> > > Is it possible to do a search with multiple wildcards in one =
query, for
> > > instance "%MANAGE%" AND "CORE%"? Is there a code example =
available?
> > >
> > >
> > >
> > > Thanks a lot
> > >
> > > Mirko
> > >
> > >
> > >
> > >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


     =20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 11 11:35:13 2008
Return-Path: <java-user-return-36051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15598 invoked from network); 11 Sep 2008 11:35:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2008 11:35:13 -0000
Received: (qmail 30014 invoked by uid 500); 11 Sep 2008 11:35:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29981 invoked by uid 500); 11 Sep 2008 11:35:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29970 invoked by uid 99); 11 Sep 2008 11:35:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 04:35:03 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 11:34:04 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KdkRX-0005ci-BS
	for java-user@lucene.apache.org; Thu, 11 Sep 2008 04:34:35 -0700
Message-ID: <19432922.post@talk.nabble.com>
Date: Thu, 11 Sep 2008 04:34:35 -0700 (PDT)
From: luther blisset <sabri.bruni@gmail.com>
To: java-user@lucene.apache.org
Subject: Searching substring starting at a fixed position
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sabri.bruni@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


hi folks,
I'm new to Lucene and I'm looking for a way to search a substring that
starts at a fixed position.
It isn't a classical substring search because it's a bit weird.
I indexed a field that represents the avability of a room in a hostal during
1 year.
The field is composed by 365 digits and each digit represents 1 day and it
can be set at 0 (available) or 1 (not available). Thus a string like this:
110001111...(continues with ones until the position 365)
means that the hostal is available from 3rd until 5th of January.
And now the problem...
Suppose that I want to search if an hostal is available from 3rd to 5th of
January...
I'd have to use wildcards and search a string like this:
??000????...(continues with ? until the position 365)
I think this way is not a good one and is too bad for the application
perfomance.
Is there a way to ask Lucene to search starting from a fixed position?
For instance, regard to the example above, could I search a 000 starting to
search at the third position?
I hope all was clear and you can help me because I've no idea how to solve
the problem.
Thanks a lot!

Luther
-- 
View this message in context: http://www.nabble.com/Searching-substring-starting-at-a-fixed-position-tp19432922p19432922.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 11 12:07:09 2008
Return-Path: <java-user-return-36052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36182 invoked from network); 11 Sep 2008 12:07:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2008 12:07:09 -0000
Received: (qmail 68548 invoked by uid 500); 11 Sep 2008 12:06:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68424 invoked by uid 500); 11 Sep 2008 12:06:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68413 invoked by uid 99); 11 Sep 2008 12:06:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 05:06:59 -0700
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 12:05:58 +0000
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1KdkwI-0000Vj-Cg
	for java-user@lucene.apache.org; Thu, 11 Sep 2008 12:06:22 +0000
Received: from wever.org ([83.243.151.80])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Thu, 11 Sep 2008 12:06:22 +0000
Received: from mick by wever.org with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Thu, 11 Sep 2008 12:06:22 +0000
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Mck <mick@semb.wever.org>
Subject:  Re: Replacing FAST functionality
	atsesam.no-ShingleFilter+exactmatching
Date:  Thu, 11 Sep 2008 14:08:10 +0200
Lines: 39
Message-ID:  <1221134889.8908.111.camel@localhost>
References:  <1221067074.8908.81.camel@localhost>
	 <9294E20AED46934EA459020706463F94EF3830@SUEXCL-02.ad.syr.edu>
	 <1221070590.8908.87.camel@localhost>
Mime-Version:  1.0
Content-Type:  multipart/signed; micalg=pgp-sha1; protocol="application/pgp-signature"; boundary="=-b+/jjmY4e4zPuI7kYJRM"
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: wever.org
In-Reply-To: <1221070590.8908.87.camel@localhost>
X-Mailer: Evolution 2.22.3.1 
Sender: news <news@ger.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org

--=-b+/jjmY4e4zPuI7kYJRM
Content-Type: text/plain
Content-Transfer-Encoding: quoted-printable

On Wed, 2008-09-10 at 20:16 +0200, Mck wrote:
> > Anyhow, I suggest you change the name of the option you're adding in
> > LUCENE-1380 to "disablePositions", and make it boolean -- this
> better
> > describes what you're trying to do.  When true, all position
> > increments would be set to zero.  It should default to false.
>=20
> disablePositions it is.

You mind if i reverse this to "enablePositions" (that by default is
true)?
I'm not very fond of double-negatives.
~mck

--=20
"If you are distressed by anything external, the pain is not due to the
thing itself, but to your estimate of it. This you have the power to
revoke." Marcus Aurelius=20
| semb.wever.org | sesat.no | sesam.no |

--=-b+/jjmY4e4zPuI7kYJRM
Content-Type: application/pgp-signature; name=signature.asc
Content-Description: This is a digitally signed message part

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.9 (GNU/Linux)

iEYEABECAAYFAkjJCikACgkQkdPrePiuutMuwgCfb+BpBhCsHWWGOpeJt6/TjqhD
VGEAoK/Pj40rNeBGBlQv7BTKFv7NxMmd
=Zi6B
-----END PGP SIGNATURE-----

--=-b+/jjmY4e4zPuI7kYJRM--



From java-user-return-36053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 11 12:11:31 2008
Return-Path: <java-user-return-36053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37466 invoked from network); 11 Sep 2008 12:11:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2008 12:11:31 -0000
Received: (qmail 74110 invoked by uid 500); 11 Sep 2008 12:11:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74078 invoked by uid 500); 11 Sep 2008 12:11:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74067 invoked by uid 99); 11 Sep 2008 12:11:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 05:11:20 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 12:10:21 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Kdl0e-00073c-GJ
	for java-user@lucene.apache.org; Thu, 11 Sep 2008 05:10:52 -0700
Message-ID: <19433434.post@talk.nabble.com>
Date: Thu, 11 Sep 2008 05:10:52 -0700 (PDT)
From: "Karsten F." <karsten-lucene@fiz-technik.de>
To: java-user@lucene.apache.org
Subject: Re: Searching substring starting at a fixed position
In-Reply-To: <19432922.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: karsten-lucene@fiz-technik.de
References: <19432922.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Luther,

your question:
"Is there a way to ask Lucene to search starting from a fixed position?"

the anwer: no, not by standard search.

But you don't want to use your field for scoring. So this is a field to
filter results.
you could easily change RangeFilter for this purpose but the new filter
would have to read all tokes of this field(which is slow).
So you should cache the filter with CachingWrapperFilter (at least the "most
wanted" periods).

if you have a lot of changes in (only) this field you should consider to
build a lucene Filter by your own without the help of lucene index (e.g.
direct use of bitsets or a database).
if you don"t have a lot of changes but a lot of different periods to search
for, you should change your datamodel.
Because you easly can use lucene with 1 field and 365 different tokens
(20080101, 20080102, ...20081231).

Best regards 
  Karsten


luther blisset wrote:
> 
> hi folks,
> I'm new to Lucene and I'm looking for a way to search a substring that
> starts at a fixed position.
> It isn't a classical substring search because it's a bit weird.
> I indexed a field that represents the avability of a room in a hostal
> during 1 year.
> The field is composed by 365 digits and each digit represents 1 day and it
> can be set at 0 (available) or 1 (not available). Thus a string like this:
> 110001111...(continues with ones until the position 365)
> means that the hostal is available from 3rd until 5th of January.
> And now the problem...
> Suppose that I want to search if an hostal is available from 3rd to 5th of
> January...
> I'd have to use wildcards and search a string like this:
> ??000????...(continues with ? until the position 365)
> I think this way is not a good one and is too bad for the application
> perfomance.
> Is there a way to ask Lucene to search starting from a fixed position?
> For instance, regard to the example above, could I search a 000 starting
> to search at the third position?
> I hope all was clear and you can help me because I've no idea how to solve
> the problem.
> Thanks a lot!
> 
> Luther
> 

-- 
View this message in context: http://www.nabble.com/Searching-substring-starting-at-a-fixed-position-tp19432922p19433434.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 11 13:24:11 2008
Return-Path: <java-user-return-36054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83006 invoked from network); 11 Sep 2008 13:24:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2008 13:24:11 -0000
Received: (qmail 1510 invoked by uid 500); 11 Sep 2008 13:24:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1309 invoked by uid 500); 11 Sep 2008 13:24:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1298 invoked by uid 99); 11 Sep 2008 13:24:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 06:24:01 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sdzhouxinxin@gmail.com designates 72.14.204.235 as permitted sender)
Received: from [72.14.204.235] (HELO qb-out-0506.google.com) (72.14.204.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 13:23:04 +0000
Received: by qb-out-0506.google.com with SMTP id e11so556333qba.27
        for <java-user@lucene.apache.org>; Thu, 11 Sep 2008 06:23:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=/e/gaY+RFKPLlQUo22aYQLAFwJ8D8W30phF9NaXhdrY=;
        b=EaZOhGT/UWn3reJiNO3VSLPvhSTelFNLhgeBRR0CTNHbmGh/ze3RCzVNB0Bn/QCFZP
         vutQ/0P6XC2GOImWCIhPOy8JcQAC0UdGB2qENZK6DRgwDg9UodouVhrzwdmvsoP52iAw
         G8QX7ZiZ9kFRZ2pWJdUypWSCewCwFjL9RFK44=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=BvN9OZ2C5U6bVyxUQ7+CqTGqlxqSGScpnvZ0vIu2x481Ub0EgT5rc20XO2QLmP2Qeq
         qRnFlWB+jC/eA248LmGwIxtHEMOwfkmX6Ojj4iarAg1Xga/woOGY7dbTRzkzVawex8J7
         iipOo663vWDTD2ploTqU/jsjPCIYDnPtHTaoI=
Received: by 10.86.58.3 with SMTP id g3mr207474fga.58.1221139414682;
        Thu, 11 Sep 2008 06:23:34 -0700 (PDT)
Received: by 10.86.29.4 with HTTP; Thu, 11 Sep 2008 06:23:34 -0700 (PDT)
Message-ID: <b07cb2360809110623o476f78e3s1bfe866616e54b60@mail.gmail.com>
Date: Thu, 11 Sep 2008 21:23:34 +0800
From: "xinxin zhou" <sdzhouxinxin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching substring starting at a fixed position
In-Reply-To: <19432922.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_37914_7646053.1221139414672"
References: <19432922.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_37914_7646053.1221139414672
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

i's a question of math and arithmetic,not a question about lucene.there is
other good way deal with it.

------=_Part_37914_7646053.1221139414672--

From java-user-return-36055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 11 13:32:04 2008
Return-Path: <java-user-return-36055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86719 invoked from network); 11 Sep 2008 13:32:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2008 13:32:04 -0000
Received: (qmail 9630 invoked by uid 500); 11 Sep 2008 13:31:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9371 invoked by uid 500); 11 Sep 2008 13:31:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9360 invoked by uid 99); 11 Sep 2008 13:31:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 06:31:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.219] (HELO web26008.mail.ukl.yahoo.com) (217.12.10.219)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 11 Sep 2008 13:30:55 +0000
Received: (qmail 37527 invoked by uid 60001); 11 Sep 2008 13:30:24 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=6DpWOJRgAdqaHrvnoMgfvGQoN78zWZLcAVFUmMdzyE9qfVCzy9oUEB6LkF5H9eQLoQaZVYBsELmtSup4Km6H93hXHBRkY0gRhkunB37QdkYu5jbsk+TavXN18XzmhikeONOgUaLtua2HpCYjEwEeg8n3XwJkM+HCdmDWiQeCG1M=;
X-YMail-OSG: AHRXWKUVM1lEL4d53.NQx.WSBV6Eu1KJ8jrvyRA8BaXNy6GnYTwbsRH6bfFsTheDBR36WZibg.NrdMvbc9NbD5PLQNRyiRVEdLVnUvH2835hLmqvP.pNZSRd6yMM0t5FVm75s8e.0tav9bZpuUhaZGF1
Received: from [193.36.230.96] by web26008.mail.ukl.yahoo.com via HTTP; Thu, 11 Sep 2008 13:30:24 GMT
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Thu, 11 Sep 2008 13:30:24 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: AW: AW: Search with multiple wildcards
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <362599.37467.qm@web26008.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

>> Is this possible?=0A=0ANot currently, the highlighter works with a list =
of words (or words AND phrases using the new span support) and highlights t=
hose.=0ATo do anything else would require the higlighter to faithfully re-i=
mplement much of the logic in all of the different query types (fuzzy, wild=
card, regex etc etc) which is much more challenging/difficult to maintain.=
=0A=0A=0A=0A----- Original Message ----=0AFrom: "Sertic Mirko, Bedag" <Mirk=
o.Sertic@bedag.ch>=0ATo: java-user@lucene.apache.org=0ASent: Thursday, 11 S=
eptember, 2008 12:07:36=0ASubject: AW: AW: Search with multiple wildcards=
=0A=0AOk, one final question:=0A=0AIf i query for "*ll*", the query is expa=
nded to ("hallo" or "alle" or ...), so the=0AHighligter will highlight the =
words "hallo" or "alle". But how can i highlight only=0Athe original query,=
 so only the "ll"? Is this possible?=0A=0AThanks a lot=0AMirko=0A=0A-----Ur=
spr=FCngliche Nachricht-----=0AVon: mark harwood [mailto:markharw00d@yahoo.=
co.uk] =0AGesendet: Donnerstag, 11. September 2008 11:20=0AAn: java-user@lu=
cene.apache.org=0ABetreff: Re: AW: Search with multiple wildcards=0A=0AYou =
need to call rewrite on the query to expand it then give that version to th=
e highlighter - see the package javadocs.=0Ahttp://lucene.apache.org/java/2=
_2_0/api/org/apache/lucene/search/highlight/package-summary.html#package_de=
scription=0A=0A=0ACheers=0AMark=0A=0A=0A=0A=0A----- Original Message ----=
=0AFrom: "Sertic Mirko, Bedag" <Mirko.Sertic@bedag.ch>=0ATo: java-user@luce=
ne.apache.org=0ASent: Thursday, 11 September, 2008 9:34:13=0ASubject: AW: S=
earch with multiple wildcards=0A=0AOk, i gave it a try, but i ran into this=
 TooManyClauses Exception. I see that=0A3ildcard queries are expanded befor=
e they are processed, and I see that i can=0Aset the clauses count to Integ=
er.MAXVALUE, and queries can consume a lot of memory, =0Abut one final thin=
g is still open: does a wildcard query work together with =0Athe Lucene Hig=
hlighter? I tried it, but I only got an empty result. Without =0Awildcards,=
 the highlighter works pretty smooth!=0A=0ARegards=0AMirko=0A=0A-----Urspr=
=FCngliche Nachricht-----=0AVon: Erick Erickson [mailto:erickerickson@gmail=
.com] =0AGesendet: Mittwoch, 10. September 2008 18:15=0AAn: java-user@lucen=
e.apache.org=0ABetreff: Re: Search with multiple wildcards=0A=0AOf course y=
ou can construct your own BooleanQuery=0Aprogrammatically.=0A=0AIt's relati=
vely easy, just try it.=0A=0AOn Wed, Sep 10, 2008 at 11:52 AM, Sertic Mirko=
, Bedag <Mirko.Sertic@bedag.ch=0A> wrote:=0A=0A> Jep, this is what i have r=
ead.=0A>=0A> do I need to use the query parser, or can I create a query by =
the api?=0A> Is there an example available?=0A>=0A> Thanks a lot=0A> Mirko=
=0A>=0A> -----Urspr=FCngliche Nachricht-----=0A> Von: Erick Erickson [mailt=
o:erickerickson@gmail.com]=0A> Gesendet: Mittwoch, 10. September 2008 16:45=
=0A> An: java-user@lucene.apache.org=0A> Betreff: Re: Search with multiple =
wildcards=0A>=0A> Is this what you're referring to?=0A>=0A> Lucene supports=
 single and multiple character wildcard searches within=0A> single terms (n=
ot within phrase queries).=0A> (from http://lucene.apache.org/java/docs/que=
ryparsersyntax.html)=0A>=0A> I'm pretty sure you can have multiple *terms* =
with wildcards. Luke is your=0A> friend here, download a copy and try it <G=
>. Be sure on the search tab to=0A> specify StandardAnalyzer or some such, =
rather than keywordanalyzer.=0A>=0A> The phrase is trying to point out that=
 a phrase query does NOT respect=0A> wildcards. That is, submitting=0A> "ab=
* bc* cd*" AS A PHRASE QUERY won't do what you expect. But I'm pretty=0A> s=
ure that=0A>=0A> +field:ab* +field:bc* +field:cd*=0A>=0A> will work just fi=
ne. The key here is "within single terms", which I think=0A> of=0A> as=0A> =
"within a single term query". You can add as many TermQuerys as you want.=
=0A> See the query documentation for how to submit phrase queries.=0A>=0A> =
Best=0A> Erick=0A>=0A> On Wed, Sep 10, 2008 at 10:11 AM, Sertic Mirko, Beda=
g=0A> <Mirko.Sertic@bedag.ch=0A> > wrote:=0A>=0A> > Hi=0A> >=0A> > Thank yo=
u for your quick response:-)=0A> >=0A> > Of course I need to use the * char=
acter :-) But I have read somewhere in=0A> > the documentation that leading=
 wildcards are not supported, and only one=0A> > wildcard term per query. I=
s this limitation resolved in the current=0A> version?=0A> >=0A> > Regards=
=0A> > Mirko=0A> >=0A> > -----Urspr=FCngliche Nachricht-----=0A> > Von: Eri=
ck Erickson [mailto:erickerickson@gmail.com]=0A> > Gesendet: Mittwoch, 10. =
September 2008 15:47=0A> > An: java-user@lucene.apache.org=0A> > Betreff: R=
e: Search with multiple wildcards=0A> >=0A> > Sure, but you'll have to set =
the leading wildcard option,=0A> > which I've forgotten the exact call, but=
 it's in the docs.=0A> >=0A> > And use * rather than % <G>.=0A> >=0A> > But=
 wildcards are tricky, especially the TooManyClauses=0A> > exception. You m=
ight want to peruse the archive for wildcard=0A> > posts...=0A> >=0A> > Bes=
t=0A> > Erick=0A> >=0A> > On Wed, Sep 10, 2008 at 9:06 AM, Sertic Mirko, Be=
dag=0A> > <Mirko.Sertic@bedag.ch>wrote:=0A> >=0A> > > Hi@all=0A> > >=0A> > =
>=0A> > >=0A> > > Is it possible to do a search with multiple wildcards in =
one query, for=0A> > > instance "%MANAGE%" AND "CORE%"? Is there a code exa=
mple available?=0A> > >=0A> > >=0A> > >=0A> > > Thanks a lot=0A> > >=0A> > =
> Mirko=0A> > >=0A> > >=0A> > >=0A> > >=0A> >=0A> > -----------------------=
----------------------------------------------=0A> > To unsubscribe, e-mail=
: java-user-unsubscribe@lucene.apache.org=0A> > For additional commands, e-=
mail: java-user-help@lucene.apache.org=0A> >=0A> >=0A>=0A> ----------------=
-----------------------------------------------------=0A> To unsubscribe, e=
-mail: java-user-unsubscribe@lucene.apache.org=0A> For additional commands,=
 e-mail: java-user-help@lucene.apache.org=0A>=0A>=0A=0A--------------------=
-------------------------------------------------=0ATo unsubscribe, e-mail:=
 java-user-unsubscribe@lucene.apache.org=0AFor additional commands, e-mail:=
 java-user-help@lucene.apache.org=0A=0A=0A      =0A=0A---------------------=
------------------------------------------------=0ATo unsubscribe, e-mail: =
java-user-unsubscribe@lucene.apache.org=0AFor additional commands, e-mail: =
java-user-help@lucene.apache.org=0A=0A=0A----------------------------------=
-----------------------------------=0ATo unsubscribe, e-mail: java-user-uns=
ubscribe@lucene.apache.org=0AFor additional commands, e-mail: java-user-hel=
p@lucene.apache.org=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 11 13:34:02 2008
Return-Path: <java-user-return-36056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89024 invoked from network); 11 Sep 2008 13:34:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2008 13:34:01 -0000
Received: (qmail 13891 invoked by uid 500); 11 Sep 2008 13:33:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13864 invoked by uid 500); 11 Sep 2008 13:33:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13853 invoked by uid 99); 11 Sep 2008 13:33:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 06:33:52 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [62.219.135.200] (HELO mainserv.Sightix.com) (62.219.135.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 13:32:54 +0000
Received: from mainserv.Sightix.com ([192.168.0.1]) by mainserv.Sightix.com
 ([192.168.0.1]) with mapi; Thu, 11 Sep 2008 17:28:35 +0300
From: Guy Gavriely <Guy@sightix.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 11 Sep 2008 17:28:34 +0300
Subject: Terms with different boosts
Thread-Topic: Terms with different boosts
Thread-Index: AQHJFBpxfmfZQwNDN0O+mhdmvhxo6g==
Message-ID: <79A4932292637F40BDB7DB23531EDFB8479B5B9DE7@mainserv.Sightix.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have to index terms with different boosts, meaning that if the word A app=
ears in two documents one document will be ranked higher.

I've tried to index them by putting them in different fields and give the f=
ields different boost but i ran into too many files (caused by too many fie=
lds I guess) problem.
Below is the stack trace:

java.io.FileNotFoundException: /tmp/nutch/crawl/indexes/part-00000/_0.nrm (=
Too many open files)

 at java.io.FileInputStream.open(Native Method)
 at java.io.FileInputStream.<init>(FileInputStream.java:106)
 at org.apache.hadoop.fs.RawLocalFileSystem$LocalFSFileInputStream.<init>(R=
awLocalFileSystem.java:87)
 at org.apache.hadoop.fs.RawLocalFileSystem.open(RawLocalFileSystem.java:14=
2)
 at org.apache.hadoop.fs.ChecksumFileSystem$FSInputChecker.<init>(ChecksumF=
ileSystem.java:110)
 at org.apache.hadoop.fs.ChecksumFileSystem.open(ChecksumFileSystem.java:33=
0)
 at org.apache.hadoop.fs.FileSystem.open(FileSystem.java:245)
 at org.apache.nutch.indexer.FsDirectory$DfsIndexInput$Descriptor.<init>(Fs=
Directory.java:160)
 at org.apache.nutch.indexer.FsDirectory$DfsIndexInput.<init>(FsDirectory.j=
ava:169)
 at org.apache.nutch.indexer.FsDirectory.openInput(FsDirectory.java:115)
 at org.apache.lucene.index.SegmentReader.openNorms(SegmentReader.java:522)
 at org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:185=
)
 at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:140)
 at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:126)
 at org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java:155)
 at org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.=
java:579)
 at org.apache.lucene.index.IndexReader.open(IndexReader.java:179)
 at org.apache.lucene.index.IndexReader.open(IndexReader.java:142)
 at org.apache.nutch.indexer.DeleteDuplicates$InputFormat$DDRecordReader.<i=
nit>(DeleteDuplicates.java:167)
 at org.apache.nutch.indexer.DeleteDuplicates$InputFormat.getRecordReader(D=
eleteDuplicates.java:240)
 at org.apache.hadoop.mapred.MapTask.run(MapTask.java:139)
 at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:126=
)
Exception in thread "main" java.io.IOException: Job failed!
 at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:604)
 at org.apache.nutch.indexer.DeleteDuplicates.dedup(DeleteDuplicates.java:4=
39)
 at com.sightix.nutch.crawl.Crawl.main(Crawl.java:139)

Can you suggest another way to index terms in different boosts?
Thanks,
Guy=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 11 13:35:41 2008
Return-Path: <java-user-return-36057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89907 invoked from network); 11 Sep 2008 13:35:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2008 13:35:41 -0000
Received: (qmail 17929 invoked by uid 500); 11 Sep 2008 13:35:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17231 invoked by uid 500); 11 Sep 2008 13:35:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17220 invoked by uid 99); 11 Sep 2008 13:35:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 06:35:31 -0700
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.198.235 as permitted sender)
Received: from [209.85.198.235] (HELO rv-out-0506.google.com) (209.85.198.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 13:34:33 +0000
Received: by rv-out-0506.google.com with SMTP id f6so376059rvb.5
        for <java-user@lucene.apache.org>; Thu, 11 Sep 2008 06:35:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=pJGO0GyLoiTZ/RXG+/SkXG3OhakilzCmqRuVTMvQi1w=;
        b=VHOzxc6yWfT5k65KthzIzSLmu9SbVDGl6Qr0EZq4REBqYbwof7kU6ygxhya1ZIaJUK
         24sOe2tMwt8Pp+QKY09w8nIArt8GQ2vFt0Af1vR6jqnHVR6pcIKhoPptVmOnwmVe8gcq
         J7of19BLnb/KLs6MalMBid7+/caXkNwiPq4Os=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=SXG1CtSDn/XLLRSnbHl921dlU2u+OpGY0BDe2CpP74pBwGg+SLE5blEdBzLcPTWL1l
         mR3ie15rpq62DhC0Opn6W0pHJHjFjT2zunNmouIoXgbE4ajvmJRd3uxRs9rKE91QTsDC
         DIz6nDhBh52jaJbXnVQuvkBoDUkv079q0dEnU=
Received: by 10.141.198.9 with SMTP id a9mr1736544rvq.108.1221140105341;
        Thu, 11 Sep 2008 06:35:05 -0700 (PDT)
Received: by 10.140.192.19 with HTTP; Thu, 11 Sep 2008 06:35:05 -0700 (PDT)
Message-ID: <c68e39170809110635k44fb74f4sba7b6d51c33a8dbf@mail.gmail.com>
Date: Thu, 11 Sep 2008 09:35:05 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Re: Replacing FAST functionality atsesam.no-ShingleFilter+exactmatching
In-Reply-To: <1221119493.8908.97.camel@localhost>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <9294E20AED46934EA459020706463F94EF3830@SUEXCL-02.ad.syr.edu>
	 <Pine.LNX.4.62.0809101435420.28099@radix.cryptio.net>
	 <1221119493.8908.97.camel@localhost>
X-Google-Sender-Auth: cfa529e350e62a9e
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Sep 11, 2008 at 3:51 AM, Mck <mick@semb.wever.org> wrote:
> On Wed, 2008-09-10 at 14:47 -0700, Chris Hostetter wrote:
>> The FieldQParserPlugin in particular passes the entire querystring to
>> the
>> Analyzer for the field specified by an "f" param as a single chunk...
>>
>>          {!field f=yourfieldName}Some input that can have spaces
>>
>> http://localhost:8983/solr/select/?debugQuery=true&rows=0&q=%7B%
>> 21field+f%3Dname%7DFoo+Bar
>
> But at the end of the day will
> {!field f:list_entry_shingle}abcd efgh ijkl
> still end up as
> list_entry_shingle:"abcd efgh ijkl"
> ?

Yes... the "field" QParser was meant to duplicate the logic of the
Lucene QueryParser for a single field (while avoiding the need to
escape the content, etc.)  So this new syntax was an aside... not a
way to solve your problem unless you want to write your own QParser.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 11 13:41:26 2008
Return-Path: <java-user-return-36058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93089 invoked from network); 11 Sep 2008 13:41:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2008 13:41:26 -0000
Received: (qmail 26420 invoked by uid 500); 11 Sep 2008 13:41:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26392 invoked by uid 500); 11 Sep 2008 13:41:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26381 invoked by uid 99); 11 Sep 2008 13:41:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 06:41:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 13:40:17 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.13.8/8.13.8) with ESMTP id m8BDeQXm021322
	for <java-user@lucene.apache.org>; Thu, 11 Sep 2008 09:40:27 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <48C91FCA.8010608@informatics.jax.org>
Date: Thu, 11 Sep 2008 09:40:26 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: AW: AW: Search with multiple wildcards
References: <362599.37467.qm@web26008.mail.ukl.yahoo.com>
In-Reply-To: <362599.37467.qm@web26008.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-PMX-Version: 5.4.3.345767, Antispam-Engine: 2.6.0.325393, Antispam-Data: 2008.9.11.132217
X-PerlMx-Spam: Gauge=IIIIIII, Probability=7%, Report='SUPERLONG_LINE 0.05, BODY_SIZE_7000_7999 0, __BOUNCE_CHALLENGE_SUBJ 0, __CP_URI_IN_BODY 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __FRAUD_419_BODY_WEBMAIL 0, __FRAUD_419_REFNUM 0, __FRAUD_419_REPLY 0, __FRAUD_419_WEBMAIL 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Well, you could certainly manipulate your search string, removing the 
wildcard punctuations, and then use that for what you pass to the 
highlighter.

That should give you the functionality you are looking for.


-Matt
mark harwood wrote:
>>> Is this possible?
>>>       
>
> Not currently, the highlighter works with a list of words (or words AND phrases using the new span support) and highlights those.
> To do anything else would require the higlighter to faithfully re-implement much of the logic in all of the different query types (fuzzy, wildcard, regex etc etc) which is much more challenging/difficult to maintain.
>
>
>
> ----- Original Message ----
> From: "Sertic Mirko, Bedag" <Mirko.Sertic@bedag.ch>
> To: java-user@lucene.apache.org
> Sent: Thursday, 11 September, 2008 12:07:36
> Subject: AW: AW: Search with multiple wildcards
>
> Ok, one final question:
>
> If i query for "*ll*", the query is expanded to ("hallo" or "alle" or ...), so the
> Highligter will highlight the words "hallo" or "alle". But how can i highlight only
> the original query, so only the "ll"? Is this possible?
>
> Thanks a lot
> Mirko
>
> -----Ursprngliche Nachricht-----
> Von: mark harwood [mailto:markharw00d@yahoo.co.uk] 
> Gesendet: Donnerstag, 11. September 2008 11:20
> An: java-user@lucene.apache.org
> Betreff: Re: AW: Search with multiple wildcards
>
> You need to call rewrite on the query to expand it then give that version to the highlighter - see the package javadocs.
> http://lucene.apache.org/java/2_2_0/api/org/apache/lucene/search/highlight/package-summary.html#package_description
>
>
> Cheers
> Mark
>
>
>
>
> ----- Original Message ----
> From: "Sertic Mirko, Bedag" <Mirko.Sertic@bedag.ch>
> To: java-user@lucene.apache.org
> Sent: Thursday, 11 September, 2008 9:34:13
> Subject: AW: Search with multiple wildcards
>
> Ok, i gave it a try, but i ran into this TooManyClauses Exception. I see that
> 3ildcard queries are expanded before they are processed, and I see that i can
> set the clauses count to Integer.MAXVALUE, and queries can consume a lot of memory, 
> but one final thing is still open: does a wildcard query work together with 
> the Lucene Highlighter? I tried it, but I only got an empty result. Without 
> wildcards, the highlighter works pretty smooth!
>
> Regards
> Mirko
>
> -----Ursprngliche Nachricht-----
> Von: Erick Erickson [mailto:erickerickson@gmail.com] 
> Gesendet: Mittwoch, 10. September 2008 18:15
> An: java-user@lucene.apache.org
> Betreff: Re: Search with multiple wildcards
>
> Of course you can construct your own BooleanQuery
> programmatically.
>
> It's relatively easy, just try it.
>
> On Wed, Sep 10, 2008 at 11:52 AM, Sertic Mirko, Bedag <Mirko.Sertic@bedag.ch
>   
>> wrote:
>>     
>
>   
>> Jep, this is what i have read.
>>
>> do I need to use the query parser, or can I create a query by the api?
>> Is there an example available?
>>
>> Thanks a lot
>> Mirko
>>
>> -----Ursprngliche Nachricht-----
>> Von: Erick Erickson [mailto:erickerickson@gmail.com]
>> Gesendet: Mittwoch, 10. September 2008 16:45
>> An: java-user@lucene.apache.org
>> Betreff: Re: Search with multiple wildcards
>>
>> Is this what you're referring to?
>>
>> Lucene supports single and multiple character wildcard searches within
>> single terms (not within phrase queries).
>> (from http://lucene.apache.org/java/docs/queryparsersyntax.html)
>>
>> I'm pretty sure you can have multiple *terms* with wildcards. Luke is your
>> friend here, download a copy and try it <G>. Be sure on the search tab to
>> specify StandardAnalyzer or some such, rather than keywordanalyzer.
>>
>> The phrase is trying to point out that a phrase query does NOT respect
>> wildcards. That is, submitting
>> "ab* bc* cd*" AS A PHRASE QUERY won't do what you expect. But I'm pretty
>> sure that
>>
>> +field:ab* +field:bc* +field:cd*
>>
>> will work just fine. The key here is "within single terms", which I think
>> of
>> as
>> "within a single term query". You can add as many TermQuerys as you want.
>> See the query documentation for how to submit phrase queries.
>>
>> Best
>> Erick
>>
>> On Wed, Sep 10, 2008 at 10:11 AM, Sertic Mirko, Bedag
>> <Mirko.Sertic@bedag.ch
>>     
>>> wrote:
>>>       
>>> Hi
>>>
>>> Thank you for your quick response:-)
>>>
>>> Of course I need to use the * character :-) But I have read somewhere in
>>> the documentation that leading wildcards are not supported, and only one
>>> wildcard term per query. Is this limitation resolved in the current
>>>       
>> version?
>>     
>>> Regards
>>> Mirko
>>>
>>> -----Ursprngliche Nachricht-----
>>> Von: Erick Erickson [mailto:erickerickson@gmail.com]
>>> Gesendet: Mittwoch, 10. September 2008 15:47
>>> An: java-user@lucene.apache.org
>>> Betreff: Re: Search with multiple wildcards
>>>
>>> Sure, but you'll have to set the leading wildcard option,
>>> which I've forgotten the exact call, but it's in the docs.
>>>
>>> And use * rather than % <G>.
>>>
>>> But wildcards are tricky, especially the TooManyClauses
>>> exception. You might want to peruse the archive for wildcard
>>> posts...
>>>
>>> Best
>>> Erick
>>>
>>> On Wed, Sep 10, 2008 at 9:06 AM, Sertic Mirko, Bedag
>>> <Mirko.Sertic@bedag.ch>wrote:
>>>
>>>       
>>>> Hi@all
>>>>
>>>>
>>>>
>>>> Is it possible to do a search with multiple wildcards in one query, for
>>>> instance "%MANAGE%" AND "CORE%"? Is there a code example available?
>>>>
>>>>
>>>>
>>>> Thanks a lot
>>>>
>>>> Mirko
>>>>
>>>>
>>>>
>>>>
>>>>         
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>       
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>       
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 11 13:59:09 2008
Return-Path: <java-user-return-36059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3685 invoked from network); 11 Sep 2008 13:59:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2008 13:59:09 -0000
Received: (qmail 47603 invoked by uid 500); 11 Sep 2008 13:58:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47583 invoked by uid 500); 11 Sep 2008 13:58:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47572 invoked by uid 99); 11 Sep 2008 13:58:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 06:58:59 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.216] (HELO web26005.mail.ukl.yahoo.com) (217.12.10.216)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 11 Sep 2008 13:58:00 +0000
Received: (qmail 67662 invoked by uid 60001); 11 Sep 2008 13:57:28 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=f/9ZRfliJ9xd33GcZ1mJSwGgiZ7Ld2Vmcizb2e9f24h1HtTEGunGbzwNsnPB/UjQWpRfkelsQizohCj0dTYewvtUzC3cXP210W6qOLC+gx4ORCc4+hvmNd7mCGcZ2jmsRHkmCTRY13LH9ZEj049CL7qL+H/pkDM3rlkv77HRiCU=;
X-YMail-OSG: yhWx2KIVM1k29WE0mAd5UqcC8WoRsTM5dnIN1MVUsYdS8BfxpC1maaxKwIWq3Za.45ck0JPuVKCG98QSHsidL_O_BRGaXuVrqgBoKjWC4NuaOSbglG7YoyZQZTD5HtJ8ucuIisCHB2CFMDd6PyzD2_7M
Received: from [193.36.230.96] by web26005.mail.ukl.yahoo.com via HTTP; Thu, 11 Sep 2008 13:57:28 GMT
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Thu, 11 Sep 2008 13:57:28 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: AW: AW: Search with multiple wildcards
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <506555.67316.qm@web26005.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

>>That should give you the functionality you are looking for.=0A=0AIf I und=
erstand your suggestion correctly, It won't. The Highlighter uses a tokeniz=
ed version of the document text.=0A=0ASimplistically it does the following =
psuedo code:=0A=0Afor all tokens in documentTokenStream,=0A   if(queryTerms=
Set.contains(token))=0A        output "<b>"+token+"</b">=0A   else=0A      =
  output token=0A=0ANOT=0A=0Afor all tokens in query string=0A     fullDocu=
mentString.replaceAll(queryStringToken, "<b>"+queryStringToken+"</b>"=0A=0A=
So in the given example while you suggest manipulating "ll" to be in the qu=
ery string,  you cannot make "ll" appear as a token in documentTokenStream.=
=0A=0AActually the Highlighter logic is a fair bit more involved than this =
(especially when using SpanQueryScorer) but the basis of it is there in the=
 above pseudo code.=0A=0A=0A=0A=0A=0A----- Original Message ----=0AFrom: Ma=
tthew Hall <mhall@informatics.jax.org>=0ATo: java-user@lucene.apache.org=0A=
Sent: Thursday, 11 September, 2008 14:40:26=0ASubject: Re: AW: AW: Search w=
ith multiple wildcards=0A=0AWell, you could certainly manipulate your searc=
h string, removing the =0Awildcard punctuations, and then use that for what=
 you pass to the =0Ahighlighter.=0A=0AThat should give you the functionalit=
y you are looking for.=0A=0A=0A-Matt=0Amark harwood wrote:=0A>>> Is this po=
ssible?=0A>>>      =0A>=0A> Not currently, the highlighter works with a lis=
t of words (or words AND phrases using the new span support) and highlights=
 those.=0A> To do anything else would require the higlighter to faithfully =
re-implement much of the logic in all of the different query types (fuzzy, =
wildcard, regex etc etc) which is much more challenging/difficult to mainta=
in.=0A>=0A>=0A>=0A> ----- Original Message ----=0A> From: "Sertic Mirko, Be=
dag" <Mirko.Sertic@bedag.ch>=0A> To: java-user@lucene.apache.org=0A> Sent: =
Thursday, 11 September, 2008 12:07:36=0A> Subject: AW: AW: Search with mult=
iple wildcards=0A>=0A> Ok, one final question:=0A>=0A> If i query for "*ll*=
", the query is expanded to ("hallo" or "alle" or ...), so the=0A> Highligt=
er will highlight the words "hallo" or "alle". But how can i highlight only=
=0A> the original query, so only the "ll"? Is this possible?=0A>=0A> Thanks=
 a lot=0A> Mirko=0A>=0A> -----Urspr=FCngliche Nachricht-----=0A> Von: mark =
harwood [mailto:markharw00d@yahoo.co.uk] =0A> Gesendet: Donnerstag, 11. Sep=
tember 2008 11:20=0A> An: java-user@lucene.apache.org=0A> Betreff: Re: AW: =
Search with multiple wildcards=0A>=0A> You need to call rewrite on the quer=
y to expand it then give that version to the highlighter - see the package =
javadocs.=0A> http://lucene.apache.org/java/2_2_0/api/org/apache/lucene/sea=
rch/highlight/package-summary.html#package_description=0A>=0A>=0A> Cheers=
=0A> Mark=0A>=0A>=0A>=0A>=0A> ----- Original Message ----=0A> From: "Sertic=
 Mirko, Bedag" <Mirko.Sertic@bedag.ch>=0A> To: java-user@lucene.apache.org=
=0A> Sent: Thursday, 11 September, 2008 9:34:13=0A> Subject: AW: Search wit=
h multiple wildcards=0A>=0A> Ok, i gave it a try, but i ran into this TooMa=
nyClauses Exception. I see that=0A> 3ildcard queries are expanded before th=
ey are processed, and I see that i can=0A> set the clauses count to Integer=
.MAXVALUE, and queries can consume a lot of memory, =0A> but one final thin=
g is still open: does a wildcard query work together with =0A> the Lucene H=
ighlighter? I tried it, but I only got an empty result. Without =0A> wildca=
rds, the highlighter works pretty smooth!=0A>=0A> Regards=0A> Mirko=0A>=0A>=
 -----Urspr=FCngliche Nachricht-----=0A> Von: Erick Erickson [mailto:ericke=
rickson@gmail.com] =0A> Gesendet: Mittwoch, 10. September 2008 18:15=0A> An=
: java-user@lucene.apache.org=0A> Betreff: Re: Search with multiple wildcar=
ds=0A>=0A> Of course you can construct your own BooleanQuery=0A> programmat=
ically.=0A>=0A> It's relatively easy, just try it.=0A>=0A> On Wed, Sep 10, =
2008 at 11:52 AM, Sertic Mirko, Bedag <Mirko.Sertic@bedag.ch=0A>  =0A>> wro=
te:=0A>>    =0A>=0A>  =0A>> Jep, this is what i have read.=0A>>=0A>> do I n=
eed to use the query parser, or can I create a query by the api?=0A>> Is th=
ere an example available?=0A>>=0A>> Thanks a lot=0A>> Mirko=0A>>=0A>> -----=
Urspr=FCngliche Nachricht-----=0A>> Von: Erick Erickson [mailto:erickericks=
on@gmail.com]=0A>> Gesendet: Mittwoch, 10. September 2008 16:45=0A>> An: ja=
va-user@lucene.apache.org=0A>> Betreff: Re: Search with multiple wildcards=
=0A>>=0A>> Is this what you're referring to?=0A>>=0A>> Lucene supports sing=
le and multiple character wildcard searches within=0A>> single terms (not w=
ithin phrase queries).=0A>> (from http://lucene.apache.org/java/docs/queryp=
arsersyntax.html)=0A>>=0A>> I'm pretty sure you can have multiple *terms* w=
ith wildcards. Luke is your=0A>> friend here, download a copy and try it <G=
>. Be sure on the search tab to=0A>> specify StandardAnalyzer or some such,=
 rather than keywordanalyzer.=0A>>=0A>> The phrase is trying to point out t=
hat a phrase query does NOT respect=0A>> wildcards. That is, submitting=0A>=
> "ab* bc* cd*" AS A PHRASE QUERY won't do what you expect. But I'm pretty=
=0A>> sure that=0A>>=0A>> +field:ab* +field:bc* +field:cd*=0A>>=0A>> will w=
ork just fine. The key here is "within single terms", which I think=0A>> of=
=0A>> as=0A>> "within a single term query". You can add as many TermQuerys =
as you want.=0A>> See the query documentation for how to submit phrase quer=
ies.=0A>>=0A>> Best=0A>> Erick=0A>>=0A>> On Wed, Sep 10, 2008 at 10:11 AM, =
Sertic Mirko, Bedag=0A>> <Mirko.Sertic@bedag.ch=0A>>    =0A>>> wrote:=0A>>>=
      =0A>>> Hi=0A>>>=0A>>> Thank you for your quick response:-)=0A>>>=0A>>=
> Of course I need to use the * character :-) But I have read somewhere in=
=0A>>> the documentation that leading wildcards are not supported, and only=
 one=0A>>> wildcard term per query. Is this limitation resolved in the curr=
ent=0A>>>      =0A>> version?=0A>>    =0A>>> Regards=0A>>> Mirko=0A>>>=0A>>=
> -----Urspr=FCngliche Nachricht-----=0A>>> Von: Erick Erickson [mailto:eri=
ckerickson@gmail.com]=0A>>> Gesendet: Mittwoch, 10. September 2008 15:47=0A=
>>> An: java-user@lucene.apache.org=0A>>> Betreff: Re: Search with multiple=
 wildcards=0A>>>=0A>>> Sure, but you'll have to set the leading wildcard op=
tion,=0A>>> which I've forgotten the exact call, but it's in the docs.=0A>>=
>=0A>>> And use * rather than % <G>.=0A>>>=0A>>> But wildcards are tricky, =
especially the TooManyClauses=0A>>> exception. You might want to peruse the=
 archive for wildcard=0A>>> posts...=0A>>>=0A>>> Best=0A>>> Erick=0A>>>=0A>=
>> On Wed, Sep 10, 2008 at 9:06 AM, Sertic Mirko, Bedag=0A>>> <Mirko.Sertic=
@bedag.ch>wrote:=0A>>>=0A>>>      =0A>>>> Hi@all=0A>>>>=0A>>>>=0A>>>>=0A>>>=
> Is it possible to do a search with multiple wildcards in one query, for=
=0A>>>> instance "%MANAGE%" AND "CORE%"? Is there a code example available?=
=0A>>>>=0A>>>>=0A>>>>=0A>>>> Thanks a lot=0A>>>>=0A>>>> Mirko=0A>>>>=0A>>>>=
=0A>>>>=0A>>>>=0A>>>>        =0A>>> ---------------------------------------=
------------------------------=0A>>> To unsubscribe, e-mail: java-user-unsu=
bscribe@lucene.apache.org=0A>>> For additional commands, e-mail: java-user-=
help@lucene.apache.org=0A>>>=0A>>>=0A>>>      =0A>> -----------------------=
----------------------------------------------=0A>> To unsubscribe, e-mail:=
 java-user-unsubscribe@lucene.apache.org=0A>> For additional commands, e-ma=
il: java-user-help@lucene.apache.org=0A>>=0A>>=0A>>    =0A>=0A> -----------=
----------------------------------------------------------=0A> To unsubscri=
be, e-mail: java-user-unsubscribe@lucene.apache.org=0A> For additional comm=
ands, e-mail: java-user-help@lucene.apache.org=0A>=0A>=0A>      =0A>=0A> --=
-------------------------------------------------------------------=0A> To =
unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> For additi=
onal commands, e-mail: java-user-help@lucene.apache.org=0A>=0A>=0A> -------=
--------------------------------------------------------------=0A> To unsub=
scribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> For additional =
commands, e-mail: java-user-help@lucene.apache.org=0A>=0A>=0A>      =0A>=0A=
> ---------------------------------------------------------------------=0A>=
 To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> For ad=
ditional commands, e-mail: java-user-help@lucene.apache.org=0A>=0A>=0A>  =
=0A=0A=0A=0A---------------------------------------------------------------=
------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A=
For additional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A =
     

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 11 14:05:49 2008
Return-Path: <java-user-return-36060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8892 invoked from network); 11 Sep 2008 14:05:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2008 14:05:49 -0000
Received: (qmail 63561 invoked by uid 500); 11 Sep 2008 14:05:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63434 invoked by uid 500); 11 Sep 2008 14:05:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63382 invoked by uid 99); 11 Sep 2008 14:05:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 07:05:39 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 14:04:40 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.13.8/8.13.8) with ESMTP id m8BE4nAj023929
	for <java-user@lucene.apache.org>; Thu, 11 Sep 2008 10:04:50 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <48C92581.3070208@informatics.jax.org>
Date: Thu, 11 Sep 2008 10:04:49 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: AW: AW: Search with multiple wildcards
References: <506555.67316.qm@web26005.mail.ukl.yahoo.com>
In-Reply-To: <506555.67316.qm@web26005.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-PMX-Version: 5.4.3.345767, Antispam-Engine: 2.6.0.325393, Antispam-Data: 2008.9.11.134322
X-PerlMx-Spam: Gauge=IIIIIII, Probability=7%, Report='SUPERLONG_LINE 0.05, BODY_SIZE_9000_9999 0, __BOUNCE_CHALLENGE_SUBJ 0, __CP_URI_IN_BODY 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __FRAUD_419_BODY_WEBMAIL 0, __FRAUD_419_REFNUM 0, __FRAUD_419_REPLY 0, __FRAUD_419_WEBMAIL 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Ah.. that's a darn good point..

Though, that second bit of code you have there could be used at display 
time for him to get the functionality that he wants.  You could also 
modify it somewhat, and apply it against the displayable part of the hit 
he's getting back rather than the individual tokens.

This if of course only assuming that this functionality would be used 
after a contains type search was detected.

Considering that's the only real usecase for a technique like this, I'm 
thinking its probably more trouble than its worth for his case.



mark harwood wrote:
>>> That should give you the functionality you are looking for.
>>>       
>
> If I understand your suggestion correctly, It won't. The Highlighter uses a tokenized version of the document text.
>
> Simplistically it does the following psuedo code:
>
> for all tokens in documentTokenStream,
>    if(queryTermsSet.contains(token))
>         output "<b>"+token+"</b">
>    else
>         output token
>
> NOT
>
> for all tokens in query string
>      fullDocumentString.replaceAll(queryStringToken, "<b>"+queryStringToken+"</b>"
>
> So in the given example while you suggest manipulating "ll" to be in the query string,  you cannot make "ll" appear as a token in documentTokenStream.
>
> Actually the Highlighter logic is a fair bit more involved than this (especially when using SpanQueryScorer) but the basis of it is there in the above pseudo code.
>
>
>
>
>
> ----- Original Message ----
> From: Matthew Hall <mhall@informatics.jax.org>
> To: java-user@lucene.apache.org
> Sent: Thursday, 11 September, 2008 14:40:26
> Subject: Re: AW: AW: Search with multiple wildcards
>
> Well, you could certainly manipulate your search string, removing the 
> wildcard punctuations, and then use that for what you pass to the 
> highlighter.
>
> That should give you the functionality you are looking for.
>
>
> -Matt
> mark harwood wrote:
>   
>>>> Is this possible?
>>>>      
>>>>         
>> Not currently, the highlighter works with a list of words (or words AND phrases using the new span support) and highlights those.
>> To do anything else would require the higlighter to faithfully re-implement much of the logic in all of the different query types (fuzzy, wildcard, regex etc etc) which is much more challenging/difficult to maintain.
>>
>>
>>
>> ----- Original Message ----
>> From: "Sertic Mirko, Bedag" <Mirko.Sertic@bedag.ch>
>> To: java-user@lucene.apache.org
>> Sent: Thursday, 11 September, 2008 12:07:36
>> Subject: AW: AW: Search with multiple wildcards
>>
>> Ok, one final question:
>>
>> If i query for "*ll*", the query is expanded to ("hallo" or "alle" or ...), so the
>> Highligter will highlight the words "hallo" or "alle". But how can i highlight only
>> the original query, so only the "ll"? Is this possible?
>>
>> Thanks a lot
>> Mirko
>>
>> -----Ursprngliche Nachricht-----
>> Von: mark harwood [mailto:markharw00d@yahoo.co.uk] 
>> Gesendet: Donnerstag, 11. September 2008 11:20
>> An: java-user@lucene.apache.org
>> Betreff: Re: AW: Search with multiple wildcards
>>
>> You need to call rewrite on the query to expand it then give that version to the highlighter - see the package javadocs.
>> http://lucene.apache.org/java/2_2_0/api/org/apache/lucene/search/highlight/package-summary.html#package_description
>>
>>
>> Cheers
>> Mark
>>
>>
>>
>>
>> ----- Original Message ----
>> From: "Sertic Mirko, Bedag" <Mirko.Sertic@bedag.ch>
>> To: java-user@lucene.apache.org
>> Sent: Thursday, 11 September, 2008 9:34:13
>> Subject: AW: Search with multiple wildcards
>>
>> Ok, i gave it a try, but i ran into this TooManyClauses Exception. I see that
>> 3ildcard queries are expanded before they are processed, and I see that i can
>> set the clauses count to Integer.MAXVALUE, and queries can consume a lot of memory, 
>> but one final thing is still open: does a wildcard query work together with 
>> the Lucene Highlighter? I tried it, but I only got an empty result. Without 
>> wildcards, the highlighter works pretty smooth!
>>
>> Regards
>> Mirko
>>
>> -----Ursprngliche Nachricht-----
>> Von: Erick Erickson [mailto:erickerickson@gmail.com] 
>> Gesendet: Mittwoch, 10. September 2008 18:15
>> An: java-user@lucene.apache.org
>> Betreff: Re: Search with multiple wildcards
>>
>> Of course you can construct your own BooleanQuery
>> programmatically.
>>
>> It's relatively easy, just try it.
>>
>> On Wed, Sep 10, 2008 at 11:52 AM, Sertic Mirko, Bedag <Mirko.Sertic@bedag.ch
>>  
>>     
>>> wrote:
>>>    
>>>       
>>  
>>     
>>> Jep, this is what i have read.
>>>
>>> do I need to use the query parser, or can I create a query by the api?
>>> Is there an example available?
>>>
>>> Thanks a lot
>>> Mirko
>>>
>>> -----Ursprngliche Nachricht-----
>>> Von: Erick Erickson [mailto:erickerickson@gmail.com]
>>> Gesendet: Mittwoch, 10. September 2008 16:45
>>> An: java-user@lucene.apache.org
>>> Betreff: Re: Search with multiple wildcards
>>>
>>> Is this what you're referring to?
>>>
>>> Lucene supports single and multiple character wildcard searches within
>>> single terms (not within phrase queries).
>>> (from http://lucene.apache.org/java/docs/queryparsersyntax.html)
>>>
>>> I'm pretty sure you can have multiple *terms* with wildcards. Luke is your
>>> friend here, download a copy and try it <G>. Be sure on the search tab to
>>> specify StandardAnalyzer or some such, rather than keywordanalyzer.
>>>
>>> The phrase is trying to point out that a phrase query does NOT respect
>>> wildcards. That is, submitting
>>> "ab* bc* cd*" AS A PHRASE QUERY won't do what you expect. But I'm pretty
>>> sure that
>>>
>>> +field:ab* +field:bc* +field:cd*
>>>
>>> will work just fine. The key here is "within single terms", which I think
>>> of
>>> as
>>> "within a single term query". You can add as many TermQuerys as you want.
>>> See the query documentation for how to submit phrase queries.
>>>
>>> Best
>>> Erick
>>>
>>> On Wed, Sep 10, 2008 at 10:11 AM, Sertic Mirko, Bedag
>>> <Mirko.Sertic@bedag.ch
>>>    
>>>       
>>>> wrote:
>>>>      
>>>> Hi
>>>>
>>>> Thank you for your quick response:-)
>>>>
>>>> Of course I need to use the * character :-) But I have read somewhere in
>>>> the documentation that leading wildcards are not supported, and only one
>>>> wildcard term per query. Is this limitation resolved in the current
>>>>      
>>>>         
>>> version?
>>>    
>>>       
>>>> Regards
>>>> Mirko
>>>>
>>>> -----Ursprngliche Nachricht-----
>>>> Von: Erick Erickson [mailto:erickerickson@gmail.com]
>>>> Gesendet: Mittwoch, 10. September 2008 15:47
>>>> An: java-user@lucene.apache.org
>>>> Betreff: Re: Search with multiple wildcards
>>>>
>>>> Sure, but you'll have to set the leading wildcard option,
>>>> which I've forgotten the exact call, but it's in the docs.
>>>>
>>>> And use * rather than % <G>.
>>>>
>>>> But wildcards are tricky, especially the TooManyClauses
>>>> exception. You might want to peruse the archive for wildcard
>>>> posts...
>>>>
>>>> Best
>>>> Erick
>>>>
>>>> On Wed, Sep 10, 2008 at 9:06 AM, Sertic Mirko, Bedag
>>>> <Mirko.Sertic@bedag.ch>wrote:
>>>>
>>>>      
>>>>         
>>>>> Hi@all
>>>>>
>>>>>
>>>>>
>>>>> Is it possible to do a search with multiple wildcards in one query, for
>>>>> instance "%MANAGE%" AND "CORE%"? Is there a code example available?
>>>>>
>>>>>
>>>>>
>>>>> Thanks a lot
>>>>>
>>>>> Mirko
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>        
>>>>>           
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>      
>>>>         
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>    
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>      
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>      
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>  
>>     
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>       
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 11 14:07:23 2008
Return-Path: <java-user-return-36061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9390 invoked from network); 11 Sep 2008 14:07:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2008 14:07:23 -0000
Received: (qmail 66992 invoked by uid 500); 11 Sep 2008 14:07:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66603 invoked by uid 500); 11 Sep 2008 14:07:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66592 invoked by uid 99); 11 Sep 2008 14:07:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 07:07:13 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.132.247 as permitted sender)
Received: from [209.85.132.247] (HELO an-out-0708.google.com) (209.85.132.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 14:06:14 +0000
Received: by an-out-0708.google.com with SMTP id c37so39907anc.49
        for <java-user@lucene.apache.org>; Thu, 11 Sep 2008 07:06:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=om2hO2cv12BpQN9HSCOEHvUkU8GQVUszs6COxkFDiSo=;
        b=tKd30KM4iFFqELeOU2TT3Pj0SX1xEO5pzK+V9X10AeDP9bTirIJKnEI4nNnJoiQVvG
         C07jVpcmhaH4t1puDdD6cr0g2ucUzvYNwQrZG1XC+ROJ5rb0MSSwDTrFo5a02J+n3W+u
         lu9AxkLYrc6/eay22PwnI3j0/awc6vMeSnHt4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=l589TnmdkJWwPEEWP1m3HXcaqgEC50jT/ZVYhdrg6gjER5TTNjeX5BCNYkWqMBRXW3
         Zsc/aSEsuetsNl79oD0jnrWXyQC3EX96D2x6iuYBFIWbO8EA6RnNMqcpOjyc6Co+F2tn
         rWslA2mpkNcxnpr5JMAN+9orMBLzgOw5EV4bE=
Received: by 10.100.172.17 with SMTP id u17mr3591110ane.28.1221141988910;
        Thu, 11 Sep 2008 07:06:28 -0700 (PDT)
Received: by 10.100.132.7 with HTTP; Thu, 11 Sep 2008 07:06:28 -0700 (PDT)
Message-ID: <8c4e68610809110706v4d6f0343qeb458a239196fd44@mail.gmail.com>
Date: Thu, 11 Sep 2008 15:06:28 +0100
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching substring starting at a fixed position
In-Reply-To: <19432922.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <19432922.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Luther


RegexQuery might work, or how about splitting the digit string out into dates
and search for them e.g. 110001111 could be stored as "avail: jan03 jan04
jan05" and a search for +avail:jan03 +avail:jan04 +avail:jan05 would get a
hit.


--
Ian.


On Thu, Sep 11, 2008 at 12:34 PM, luther blisset <sabri.bruni@gmail.com> wrote:
>
> hi folks,
> I'm new to Lucene and I'm looking for a way to search a substring that
> starts at a fixed position.
> It isn't a classical substring search because it's a bit weird.
> I indexed a field that represents the avability of a room in a hostal during
> 1 year.
> The field is composed by 365 digits and each digit represents 1 day and it
> can be set at 0 (available) or 1 (not available). Thus a string like this:
> 110001111...(continues with ones until the position 365)
> means that the hostal is available from 3rd until 5th of January.
> And now the problem...
> Suppose that I want to search if an hostal is available from 3rd to 5th of
> January...
> I'd have to use wildcards and search a string like this:
> ??000????...(continues with ? until the position 365)
> I think this way is not a good one and is too bad for the application
> perfomance.
> Is there a way to ask Lucene to search starting from a fixed position?
> For instance, regard to the example above, could I search a 000 starting to
> search at the third position?
> I hope all was clear and you can help me because I've no idea how to solve
> the problem.
> Thanks a lot!
>
> Luther
> --
> View this message in context: http://www.nabble.com/Searching-substring-starting-at-a-fixed-position-tp19432922p19432922.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 11 14:30:44 2008
Return-Path: <java-user-return-36062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20319 invoked from network); 11 Sep 2008 14:30:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2008 14:30:44 -0000
Received: (qmail 9443 invoked by uid 500); 11 Sep 2008 14:30:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9420 invoked by uid 500); 11 Sep 2008 14:30:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9409 invoked by uid 99); 11 Sep 2008 14:30:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 07:30:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sdzhouxinxin@gmail.com designates 74.125.46.28 as permitted sender)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 14:29:36 +0000
Received: by yw-out-2324.google.com with SMTP id 3so127276ywj.5
        for <java-user@lucene.apache.org>; Thu, 11 Sep 2008 07:29:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=WgIsOv3M91USqNhnMEYL0LwK0hqJ6wBptjFPCtZG6Bw=;
        b=W9Bdb90GkJuTUkotVs2+AcH1C4WdHUFO8f+8RVqV5is3aVar+NPGdARkVjcn561eZ5
         l2yVEkIv2AgftXEcmG75srCGnrzqtfEreLWpskdh0k5rARBM6lnUWsBFmEW5wiTkYZap
         AVObRe5koPSxHWsQ/BOVfvXxJ77GPg6nVbEJQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=fzyGnxy28V8UZB/5ZvQk66pj6NNRqOQUjmP28XcfSylYdmBsWKCYgzLIbsGt5T3Ntk
         jUK7fWymZDJ84zQrtl0m2XBVFpkniRuBK/63uJszcxr7xHaRauV0t4jB4MDGPeEw6Eyr
         Wzdl4I5a7Sdif9eZPcFdtLSWNOVG89rNGxzqY=
Received: by 10.86.95.8 with SMTP id s8mr2115545fgb.6.1221143397071;
        Thu, 11 Sep 2008 07:29:57 -0700 (PDT)
Received: by 10.86.29.4 with HTTP; Thu, 11 Sep 2008 07:29:57 -0700 (PDT)
Message-ID: <b07cb2360809110729g3f365450l6b6ce77641c6c1e1@mail.gmail.com>
Date: Thu, 11 Sep 2008 22:29:57 +0800
From: "xinxin zhou" <sdzhouxinxin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching substring starting at a fixed position
In-Reply-To: <8c4e68610809110706v4d6f0343qeb458a239196fd44@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <19432922.post@talk.nabble.com>
	 <8c4e68610809110706v4d6f0343qeb458a239196fd44@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

that's ok.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 11 14:37:26 2008
Return-Path: <java-user-return-36063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24124 invoked from network); 11 Sep 2008 14:37:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2008 14:37:26 -0000
Received: (qmail 21272 invoked by uid 500); 11 Sep 2008 14:37:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21235 invoked by uid 500); 11 Sep 2008 14:37:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21224 invoked by uid 99); 11 Sep 2008 14:37:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 07:37:16 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 14:36:17 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KdnHt-0004km-1L
	for java-user@lucene.apache.org; Thu, 11 Sep 2008 07:36:49 -0700
Message-ID: <19436300.post@talk.nabble.com>
Date: Thu, 11 Sep 2008 07:36:49 -0700 (PDT)
From: luther blisset <sabri.bruni@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching substring starting at a fixed position
In-Reply-To: <19433434.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sabri.bruni@gmail.com
References: <19432922.post@talk.nabble.com> <19433434.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Really thanks Karsten and Ian Lea!!
You gave me a very useful solutions
I'm going to try the last one of Karsten:

Because you easly can use lucene with 1 field and 365 different tokens
(20080101, 20080102, ...20081231).

even if the solution of Ian Lea seems to be a very good one and I'll try it
too.
Thanks a lot!I really appreciate your help

luther





Karsten F. wrote:
> 
> Hi Luther,
> 
> your question:
> "Is there a way to ask Lucene to search starting from a fixed position?"
> 
> the anwer: no, not by standard search.
> 
> But you don't want to use your field for scoring. So this is a field to
> filter results.
> you could easily change RangeFilter for this purpose but the new filter
> would have to read all tokes of this field(which is slow).
> So you should cache the filter with CachingWrapperFilter (at least the
> "most wanted" periods).
> 
> if you have a lot of changes in (only) this field you should consider to
> build a lucene Filter by your own without the help of lucene index (e.g.
> direct use of bitsets or a database).
> if you don"t have a lot of changes but a lot of different periods to
> search for, you should change your datamodel.
> Because you easly can use lucene with 1 field and 365 different tokens
> (20080101, 20080102, ...20081231).
> 
> Best regards 
>   Karsten
> 
> 
> luther blisset wrote:
>> 
>> hi folks,
>> I'm new to Lucene and I'm looking for a way to search a substring that
>> starts at a fixed position.
>> It isn't a classical substring search because it's a bit weird.
>> I indexed a field that represents the avability of a room in a hostal
>> during 1 year.
>> The field is composed by 365 digits and each digit represents 1 day and
>> it can be set at 0 (available) or 1 (not available). Thus a string like
>> this:
>> 110001111...(continues with ones until the position 365)
>> means that the hostal is available from 3rd until 5th of January.
>> And now the problem...
>> Suppose that I want to search if an hostal is available from 3rd to 5th
>> of January...
>> I'd have to use wildcards and search a string like this:
>> ??000????...(continues with ? until the position 365)
>> I think this way is not a good one and is too bad for the application
>> perfomance.
>> Is there a way to ask Lucene to search starting from a fixed position?
>> For instance, regard to the example above, could I search a 000 starting
>> to search at the third position?
>> I hope all was clear and you can help me because I've no idea how to
>> solve the problem.
>> Thanks a lot!
>> 
>> Luther
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Searching-substring-starting-at-a-fixed-position-tp19432922p19436300.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 11 14:51:17 2008
Return-Path: <java-user-return-36064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31784 invoked from network); 11 Sep 2008 14:51:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2008 14:51:17 -0000
Received: (qmail 65617 invoked by uid 500); 11 Sep 2008 14:51:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65441 invoked by uid 500); 11 Sep 2008 14:51:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65429 invoked by uid 99); 11 Sep 2008 14:51:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 07:51:07 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 14:50:10 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE:  Re: Replacing FAST functionalityatsesam.no-ShingleFilter+exactmatching
Date: Thu, 11 Sep 2008 10:50:36 -0400
Message-ID: <9294E20AED46934EA459020706463F94EF3858@SUEXCL-02.ad.syr.edu>
In-Reply-To: A<1221134889.8908.111.camel@localhost>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic:  Re: Replacing FAST functionalityatsesam.no-ShingleFilter+exactmatching
Thread-Index: AckUBvCW8q9/NqPDT0SW/YCgsYO5/AAFo02A
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

On 09/11/2008 at 8:08 AM, Mck wrote:
> On Wed, 2008-09-10 at 20:16 +0200, Mck wrote:
> > > Anyhow, I suggest you change the name of the option you're adding =
in
> > > LUCENE-1380 to "disablePositions", and make it boolean -- this =
better
> > > describes what you're trying to do.  When true, all position
> > > increments would be set to zero.  It should default to false.
> >=20
> > disablePositions it is.
>=20
> You mind if i reverse this to "enablePositions" (that by default is
> true)? I'm not very fond of double-negatives. ~mck

Excellent idea.

Steve
=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 11 15:05:15 2008
Return-Path: <java-user-return-36065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42754 invoked from network); 11 Sep 2008 15:05:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2008 15:05:15 -0000
Received: (qmail 98639 invoked by uid 500); 11 Sep 2008 15:05:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98613 invoked by uid 500); 11 Sep 2008 15:05:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98602 invoked by uid 99); 11 Sep 2008 15:05:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 08:05:05 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markus.lux@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 15:04:06 +0000
Received: by yx-out-2324.google.com with SMTP id 3so134629yxj.5
        for <java-user@lucene.apache.org>; Thu, 11 Sep 2008 08:04:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=WkvuIGYNweSFA/0GIwfqDF1zdy0wiKzA/gmQgd2OhNM=;
        b=xf6oUgy4WWEYmDrjazSPr3fDnWY0ZN4OEkdO4rnrLkEXmK5jSIZskmGrSrIdgZl9e9
         2k7oUnJf5hU1Gw2FZIW30AUnadrOOouKuHDaKdkSAvMXS29zRPz6Jd/EHH0oyqz5fjet
         7PvrVdWShxxS6bD9uWHeT+A8uixaCZDY6NoUo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=pgaLSSYE7rymZym0YBfQALKV+/4Q49H10pTcD6qGI4MZbw9Xz5d+loEyDpof/rcKWW
         +ylQ6XrBNdVVxVcn9Qx5Hk4uXpkuQ7EjOrvbwBN+8s4qjQ/K6wLkEM5zq/82ifn6DXEz
         UWe82t/e0aBn2tTRWv6JvgWrnjvSBuejqfwSU=
Received: by 10.142.52.9 with SMTP id z9mr614624wfz.194.1221145475852;
        Thu, 11 Sep 2008 08:04:35 -0700 (PDT)
Received: by 10.142.109.19 with HTTP; Thu, 11 Sep 2008 08:04:35 -0700 (PDT)
Message-ID: <8064f4bd0809110804s7be67745ja1391d04db779793@mail.gmail.com>
Date: Thu, 11 Sep 2008 17:04:35 +0200
From: "Markus Lux" <markus.lux@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Terms with different boosts
In-Reply-To: <79A4932292637F40BDB7DB23531EDFB8479B5B9DE7@mainserv.Sightix.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_54916_13249701.1221145475829"
References: <79A4932292637F40BDB7DB23531EDFB8479B5B9DE7@mainserv.Sightix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_54916_13249701.1221145475829
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi Guy,

I think that isn't a problem related to fields. I experienced this kind of
error caused by an limitation of the underlying file system. The problem wa=
s
that I had too much InputStreams open that had never been closed. Please
check that in your code and tell us if it worked.

Markus.


2008/9/11 Guy Gavriely <Guy@sightix.com>

> Hi,
>
> I have to index terms with different boosts, meaning that if the word A
> appears in two documents one document will be ranked higher.
>
> I've tried to index them by putting them in different fields and give the
> fields different boost but i ran into too many files (caused by too many
> fields I guess) problem.
> Below is the stack trace:
>
> java.io.FileNotFoundException: /tmp/nutch/crawl/indexes/part-00000/_0.nrm
> (Too many open files)
>
>  at java.io.FileInputStream.open(Native Method)
>  at java.io.FileInputStream.<init>(FileInputStream.java:106)
>  at
> org.apache.hadoop.fs.RawLocalFileSystem$LocalFSFileInputStream.<init>(Raw=
LocalFileSystem.java:87)
>  at
> org.apache.hadoop.fs.RawLocalFileSystem.open(RawLocalFileSystem.java:142)
>  at
> org.apache.hadoop.fs.ChecksumFileSystem$FSInputChecker.<init>(ChecksumFil=
eSystem.java:110)
>  at
> org.apache.hadoop.fs.ChecksumFileSystem.open(ChecksumFileSystem.java:330)
>  at org.apache.hadoop.fs.FileSystem.open(FileSystem.java:245)
>  at
> org.apache.nutch.indexer.FsDirectory$DfsIndexInput$Descriptor.<init>(FsDi=
rectory.java:160)
>  at
> org.apache.nutch.indexer.FsDirectory$DfsIndexInput.<init>(FsDirectory.jav=
a:169)
>  at org.apache.nutch.indexer.FsDirectory.openInput(FsDirectory.java:115)
>  at org.apache.lucene.index.SegmentReader.openNorms(SegmentReader.java:52=
2)
>  at
> org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:185)
>  at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:140)
>  at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:126)
>  at org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java:155)
>  at
> org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.ja=
va:579)
>  at org.apache.lucene.index.IndexReader.open(IndexReader.java:179)
>  at org.apache.lucene.index.IndexReader.open(IndexReader.java:142)
>  at
> org.apache.nutch.indexer.DeleteDuplicates$InputFormat$DDRecordReader.<ini=
t>(DeleteDuplicates.java:167)
>  at
> org.apache.nutch.indexer.DeleteDuplicates$InputFormat.getRecordReader(Del=
eteDuplicates.java:240)
>  at org.apache.hadoop.mapred.MapTask.run(MapTask.java:139)
>  at
> org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:126)
> Exception in thread "main" java.io.IOException: Job failed!
>  at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:604)
>  at
> org.apache.nutch.indexer.DeleteDuplicates.dedup(DeleteDuplicates.java:439=
)
>  at com.sightix.nutch.crawl.Crawl.main(Crawl.java:139)
>
> Can you suggest another way to index terms in different boosts?
> Thanks,
> Guy
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Markus Lux
Heeper Stra=DFe 241
33607 Bielefeld
mobil +49 162 6960943
http://www.mlux.de

------=_Part_54916_13249701.1221145475829--

From java-user-return-36066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 11 15:13:15 2008
Return-Path: <java-user-return-36066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45457 invoked from network); 11 Sep 2008 15:13:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2008 15:13:14 -0000
Received: (qmail 14465 invoked by uid 500); 11 Sep 2008 15:13:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14434 invoked by uid 500); 11 Sep 2008 15:13:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14423 invoked by uid 99); 11 Sep 2008 15:13:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 08:13:04 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.46.30 as permitted sender)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 15:12:06 +0000
Received: by yw-out-2324.google.com with SMTP id 3so135859ywj.5
        for <java-user@lucene.apache.org>; Thu, 11 Sep 2008 08:12:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=sMju5D4X1/XodULKb6T/ApWYUz/nc4XlvIao/J0SnB0=;
        b=BsZTGsHrzW1gOPOmrLY5XRLWge//kuIIB2nDubAM0AJ9+pUbFh9WaauyGldbY2giiJ
         abBJGHD3ysgUycuFKSbBm1p7EG7oLCvZBs1m3YtXboekdkZeD+TvYerXfGzCvHwQa2gJ
         zOqff6KikXyKpypaxeI5bfZj3BMR1eSnJ4aKc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=KVlPzXESmiNrHWkNMyLZ0l2ri9aWmNlWzk2RxUIjjaocGXEh4Ql5qEM+t5xGfyhX7a
         Woqm2B5uGnqsJrC+l+8orgvoWnnYkaBbTBM/W/zwV/BbjcJuMfyzLqsh376kv9OQKl1G
         EUAINL0SwHh+XtfCxNJzEZqgy1j61UgMNKc+Y=
Received: by 10.86.1.1 with SMTP id 1mr2153063fga.61.1221145946846;
        Thu, 11 Sep 2008 08:12:26 -0700 (PDT)
Received: by 10.86.76.4 with HTTP; Thu, 11 Sep 2008 08:12:26 -0700 (PDT)
Message-ID: <359a92830809110812j7f020767jfc60b95aace182d8@mail.gmail.com>
Date: Thu, 11 Sep 2008 11:12:26 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Terms with different boosts
In-Reply-To: <79A4932292637F40BDB7DB23531EDFB8479B5B9DE7@mainserv.Sightix.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_78416_32871151.1221145946837"
References: <AQHJFBpxfmfZQwNDN0O+mhdmvhxo6g==>
	 <79A4932292637F40BDB7DB23531EDFB8479B5B9DE7@mainserv.Sightix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_78416_32871151.1221145946837
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

How many fields are you winding up with for each document? One for
each term?

And what is the higher-level task you're trying to accomplish? What
distinguishes *why* a certain term in a certain document should
boost a particular document? Perhaps if you explained the higher
level task someone would have a suggestion...

Best
Erick

On Thu, Sep 11, 2008 at 10:28 AM, Guy Gavriely <Guy@sightix.com> wrote:

> Hi,
>
> I have to index terms with different boosts, meaning that if the word A
> appears in two documents one document will be ranked higher.
>
> I've tried to index them by putting them in different fields and give the
> fields different boost but i ran into too many files (caused by too many
> fields I guess) problem.
> Below is the stack trace:
>
> java.io.FileNotFoundException: /tmp/nutch/crawl/indexes/part-00000/_0.nrm
> (Too many open files)
>
>  at java.io.FileInputStream.open(Native Method)
>  at java.io.FileInputStream.<init>(FileInputStream.java:106)
>  at
> org.apache.hadoop.fs.RawLocalFileSystem$LocalFSFileInputStream.<init>(RawLocalFileSystem.java:87)
>  at
> org.apache.hadoop.fs.RawLocalFileSystem.open(RawLocalFileSystem.java:142)
>  at
> org.apache.hadoop.fs.ChecksumFileSystem$FSInputChecker.<init>(ChecksumFileSystem.java:110)
>  at
> org.apache.hadoop.fs.ChecksumFileSystem.open(ChecksumFileSystem.java:330)
>  at org.apache.hadoop.fs.FileSystem.open(FileSystem.java:245)
>  at
> org.apache.nutch.indexer.FsDirectory$DfsIndexInput$Descriptor.<init>(FsDirectory.java:160)
>  at
> org.apache.nutch.indexer.FsDirectory$DfsIndexInput.<init>(FsDirectory.java:169)
>  at org.apache.nutch.indexer.FsDirectory.openInput(FsDirectory.java:115)
>  at org.apache.lucene.index.SegmentReader.openNorms(SegmentReader.java:522)
>  at
> org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:185)
>  at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:140)
>  at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:126)
>  at org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java:155)
>  at
> org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.java:579)
>  at org.apache.lucene.index.IndexReader.open(IndexReader.java:179)
>  at org.apache.lucene.index.IndexReader.open(IndexReader.java:142)
>  at
> org.apache.nutch.indexer.DeleteDuplicates$InputFormat$DDRecordReader.<init>(DeleteDuplicates.java:167)
>  at
> org.apache.nutch.indexer.DeleteDuplicates$InputFormat.getRecordReader(DeleteDuplicates.java:240)
>  at org.apache.hadoop.mapred.MapTask.run(MapTask.java:139)
>  at
> org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:126)
> Exception in thread "main" java.io.IOException: Job failed!
>  at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:604)
>  at
> org.apache.nutch.indexer.DeleteDuplicates.dedup(DeleteDuplicates.java:439)
>  at com.sightix.nutch.crawl.Crawl.main(Crawl.java:139)
>
> Can you suggest another way to index terms in different boosts?
> Thanks,
> Guy
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_78416_32871151.1221145946837--

From java-user-return-36067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 11 15:14:38 2008
Return-Path: <java-user-return-36067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45863 invoked from network); 11 Sep 2008 15:14:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2008 15:14:37 -0000
Received: (qmail 18321 invoked by uid 500); 11 Sep 2008 15:14:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18294 invoked by uid 500); 11 Sep 2008 15:14:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18283 invoked by uid 99); 11 Sep 2008 15:14:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 08:14:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [192.112.254.51] (HELO smtp2.bedag.ch) (192.112.254.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 15:13:29 +0000
Received: from localhost (localhost [127.0.0.1])
	by smtp1.bedag.ch (Postfix) with ESMTP id E27C2739E8
	for <java-user@lucene.apache.org>; Thu, 11 Sep 2008 17:13:27 +0200 (CEST)
X-Quarantine-ID: <jfbJy7fEUSuE>
X-Virus-Scanned: Scanned
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: AW: AW: AW: Search with multiple wildcards
Date: Thu, 11 Sep 2008 17:13:22 +0200
Message-ID: <1D3D7943573BD14FB024A9654EB43CCB02A4C69D@A99A-EMS-01VS2.ad.bedag.ch>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: AW: AW: Search with multiple wildcards
Thread-Index: AckUF34byuwaMa+qTMebC/7XLTbTBwACSoOQ
References: <506555.67316.qm@web26005.mail.ukl.yahoo.com> <48C92581.3070208@informatics.jax.org>
From: "Sertic Mirko, Bedag" <Mirko.Sertic@bedag.ch>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 11 Sep 2008 15:13:23.0518 (UTC) FILETIME=[EED475E0:01C91420]
X-Virus-Checked: Checked by ClamAV on apache.org

Ok, i see the problems.

I will talk to my customer about this requirement. Perhaps he doesn't =
need it anymore.

Again, thanks a lot to all, you saved my day!

Regards
Mirko

-----Urspr=FCngliche Nachricht-----
Von: Matthew Hall [mailto:mhall@informatics.jax.org]=20
Gesendet: Donnerstag, 11. September 2008 16:05
An: java-user@lucene.apache.org
Betreff: Re: AW: AW: Search with multiple wildcards

Ah.. that's a darn good point..

Though, that second bit of code you have there could be used at display=20
time for him to get the functionality that he wants.  You could also=20
modify it somewhat, and apply it against the displayable part of the hit =

he's getting back rather than the individual tokens.

This if of course only assuming that this functionality would be used=20
after a contains type search was detected.

Considering that's the only real usecase for a technique like this, I'm=20
thinking its probably more trouble than its worth for his case.



mark harwood wrote:
>>> That should give you the functionality you are looking for.
>>>      =20
>
> If I understand your suggestion correctly, It won't. The Highlighter =
uses a tokenized version of the document text.
>
> Simplistically it does the following psuedo code:
>
> for all tokens in documentTokenStream,
>    if(queryTermsSet.contains(token))
>         output "<b>"+token+"</b">
>    else
>         output token
>
> NOT
>
> for all tokens in query string
>      fullDocumentString.replaceAll(queryStringToken, =
"<b>"+queryStringToken+"</b>"
>
> So in the given example while you suggest manipulating "ll" to be in =
the query string,  you cannot make "ll" appear as a token in =
documentTokenStream.
>
> Actually the Highlighter logic is a fair bit more involved than this =
(especially when using SpanQueryScorer) but the basis of it is there in =
the above pseudo code.
>
>
>
>
>
> ----- Original Message ----
> From: Matthew Hall <mhall@informatics.jax.org>
> To: java-user@lucene.apache.org
> Sent: Thursday, 11 September, 2008 14:40:26
> Subject: Re: AW: AW: Search with multiple wildcards
>
> Well, you could certainly manipulate your search string, removing the=20
> wildcard punctuations, and then use that for what you pass to the=20
> highlighter.
>
> That should give you the functionality you are looking for.
>
>
> -Matt
> mark harwood wrote:
>  =20
>>>> Is this possible?
>>>>     =20
>>>>        =20
>> Not currently, the highlighter works with a list of words (or words =
AND phrases using the new span support) and highlights those.
>> To do anything else would require the higlighter to faithfully =
re-implement much of the logic in all of the different query types =
(fuzzy, wildcard, regex etc etc) which is much more =
challenging/difficult to maintain.
>>
>>
>>
>> ----- Original Message ----
>> From: "Sertic Mirko, Bedag" <Mirko.Sertic@bedag.ch>
>> To: java-user@lucene.apache.org
>> Sent: Thursday, 11 September, 2008 12:07:36
>> Subject: AW: AW: Search with multiple wildcards
>>
>> Ok, one final question:
>>
>> If i query for "*ll*", the query is expanded to ("hallo" or "alle" or =
...), so the
>> Highligter will highlight the words "hallo" or "alle". But how can i =
highlight only
>> the original query, so only the "ll"? Is this possible?
>>
>> Thanks a lot
>> Mirko
>>
>> -----Urspr=FCngliche Nachricht-----
>> Von: mark harwood [mailto:markharw00d@yahoo.co.uk]=20
>> Gesendet: Donnerstag, 11. September 2008 11:20
>> An: java-user@lucene.apache.org
>> Betreff: Re: AW: Search with multiple wildcards
>>
>> You need to call rewrite on the query to expand it then give that =
version to the highlighter - see the package javadocs.
>> =
http://lucene.apache.org/java/2_2_0/api/org/apache/lucene/search/highligh=
t/package-summary.html#package_description
>>
>>
>> Cheers
>> Mark
>>
>>
>>
>>
>> ----- Original Message ----
>> From: "Sertic Mirko, Bedag" <Mirko.Sertic@bedag.ch>
>> To: java-user@lucene.apache.org
>> Sent: Thursday, 11 September, 2008 9:34:13
>> Subject: AW: Search with multiple wildcards
>>
>> Ok, i gave it a try, but i ran into this TooManyClauses Exception. I =
see that
>> 3ildcard queries are expanded before they are processed, and I see =
that i can
>> set the clauses count to Integer.MAXVALUE, and queries can consume a =
lot of memory,=20
>> but one final thing is still open: does a wildcard query work =
together with=20
>> the Lucene Highlighter? I tried it, but I only got an empty result. =
Without=20
>> wildcards, the highlighter works pretty smooth!
>>
>> Regards
>> Mirko
>>
>> -----Urspr=FCngliche Nachricht-----
>> Von: Erick Erickson [mailto:erickerickson@gmail.com]=20
>> Gesendet: Mittwoch, 10. September 2008 18:15
>> An: java-user@lucene.apache.org
>> Betreff: Re: Search with multiple wildcards
>>
>> Of course you can construct your own BooleanQuery
>> programmatically.
>>
>> It's relatively easy, just try it.
>>
>> On Wed, Sep 10, 2008 at 11:52 AM, Sertic Mirko, Bedag =
<Mirko.Sertic@bedag.ch
>> =20
>>    =20
>>> wrote:
>>>   =20
>>>      =20
>> =20
>>    =20
>>> Jep, this is what i have read.
>>>
>>> do I need to use the query parser, or can I create a query by the =
api?
>>> Is there an example available?
>>>
>>> Thanks a lot
>>> Mirko
>>>
>>> -----Urspr=FCngliche Nachricht-----
>>> Von: Erick Erickson [mailto:erickerickson@gmail.com]
>>> Gesendet: Mittwoch, 10. September 2008 16:45
>>> An: java-user@lucene.apache.org
>>> Betreff: Re: Search with multiple wildcards
>>>
>>> Is this what you're referring to?
>>>
>>> Lucene supports single and multiple character wildcard searches =
within
>>> single terms (not within phrase queries).
>>> (from http://lucene.apache.org/java/docs/queryparsersyntax.html)
>>>
>>> I'm pretty sure you can have multiple *terms* with wildcards. Luke =
is your
>>> friend here, download a copy and try it <G>. Be sure on the search =
tab to
>>> specify StandardAnalyzer or some such, rather than keywordanalyzer.
>>>
>>> The phrase is trying to point out that a phrase query does NOT =
respect
>>> wildcards. That is, submitting
>>> "ab* bc* cd*" AS A PHRASE QUERY won't do what you expect. But I'm =
pretty
>>> sure that
>>>
>>> +field:ab* +field:bc* +field:cd*
>>>
>>> will work just fine. The key here is "within single terms", which I =
think
>>> of
>>> as
>>> "within a single term query". You can add as many TermQuerys as you =
want.
>>> See the query documentation for how to submit phrase queries.
>>>
>>> Best
>>> Erick
>>>
>>> On Wed, Sep 10, 2008 at 10:11 AM, Sertic Mirko, Bedag
>>> <Mirko.Sertic@bedag.ch
>>>   =20
>>>      =20
>>>> wrote:
>>>>     =20
>>>> Hi
>>>>
>>>> Thank you for your quick response:-)
>>>>
>>>> Of course I need to use the * character :-) But I have read =
somewhere in
>>>> the documentation that leading wildcards are not supported, and =
only one
>>>> wildcard term per query. Is this limitation resolved in the current
>>>>     =20
>>>>        =20
>>> version?
>>>   =20
>>>      =20
>>>> Regards
>>>> Mirko
>>>>
>>>> -----Urspr=FCngliche Nachricht-----
>>>> Von: Erick Erickson [mailto:erickerickson@gmail.com]
>>>> Gesendet: Mittwoch, 10. September 2008 15:47
>>>> An: java-user@lucene.apache.org
>>>> Betreff: Re: Search with multiple wildcards
>>>>
>>>> Sure, but you'll have to set the leading wildcard option,
>>>> which I've forgotten the exact call, but it's in the docs.
>>>>
>>>> And use * rather than % <G>.
>>>>
>>>> But wildcards are tricky, especially the TooManyClauses
>>>> exception. You might want to peruse the archive for wildcard
>>>> posts...
>>>>
>>>> Best
>>>> Erick
>>>>
>>>> On Wed, Sep 10, 2008 at 9:06 AM, Sertic Mirko, Bedag
>>>> <Mirko.Sertic@bedag.ch>wrote:
>>>>
>>>>     =20
>>>>        =20
>>>>> Hi@all
>>>>>
>>>>>
>>>>>
>>>>> Is it possible to do a search with multiple wildcards in one =
query, for
>>>>> instance "%MANAGE%" AND "CORE%"? Is there a code example =
available?
>>>>>
>>>>>
>>>>>
>>>>> Thanks a lot
>>>>>
>>>>> Mirko
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>       =20
>>>>>          =20
>>>> =
---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>     =20
>>>>        =20
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>   =20
>>>      =20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     =20
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     =20
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> =20
>>    =20
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>      =20
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  =20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 11 15:14:48 2008
Return-Path: <java-user-return-36068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46001 invoked from network); 11 Sep 2008 15:14:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2008 15:14:47 -0000
Received: (qmail 20089 invoked by uid 500); 11 Sep 2008 15:14:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20066 invoked by uid 500); 11 Sep 2008 15:14:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20055 invoked by uid 99); 11 Sep 2008 15:14:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 08:14:37 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dckorah@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 15:13:39 +0000
Received: by ug-out-1314.google.com with SMTP id j3so942807ugf.23
        for <java-user@lucene.apache.org>; Thu, 11 Sep 2008 08:14:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:subject:date
         :mime-version:content-type:x-mailer:x-mimeole:thread-index
         :message-id;
        bh=0q4J/fUF1wvJ5Jd/G9PryNu3FCeKbtgagvwhZdCk2y8=;
        b=gzormrMgZkOBVO8v2oSNY1hQZFEn7PA3W7rKIG8B9fEjJZiOX7tvpU2wvLEmLpjVNH
         SeMlJw5g9m37wZbjhHw2f3rDEKY33OGte7Wle5hoCZmZlQxalDt0FY6B5qavenKJe2GF
         dTTxB9guz9K7LHaALM+j44M8KF3ArLwEEyBPM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:subject:date:mime-version:content-type:x-mailer:x-mimeole
         :thread-index:message-id;
        b=DYBr+ceroKwk+q/bhctUszoIVJrqrCGnNMt6hBBd0FXi+cT71bQFhbfSCd25HYsMly
         71k8MB+wFBazPUl9/lgdKLXmxxYfDW+Y9etqFFc8GMyWkzn9M/KO+/h4qlDtXHQYUDTr
         NxgkcBHM+e4qBI9erJqlO/PzRJCYudUFSXCXk=
Received: by 10.210.18.8 with SMTP id 8mr3419165ebr.186.1221146050409;
        Thu, 11 Sep 2008 08:14:10 -0700 (PDT)
Received: from SCWDEVDINOKVM ( [195.2.245.68])
        by mx.google.com with ESMTPS id h7sm6216386nfh.4.2008.09.11.08.14.07
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 11 Sep 2008 08:14:08 -0700 (PDT)
From: "Dino Korah" <dckorah@gmail.com>
To: <java-user@lucene.apache.org>
Subject: HitCollector - Remote-ability
Date: Thu, 11 Sep 2008 16:13:32 +0100
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0019_01C91429.57E88280"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3350
Thread-Index: AckUIPP6uq2acKM4T/iiykZOA4w7Jg==
Message-ID: <48c935c0.0722300a.44ed.6651@mx.google.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0019_01C91429.57E88280
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

Hi All,
 
I vaguely remember discussions on lucene remote-ability of HitCollectors
based search(). As far as I remember, it is not possible if I use
HitCollectors.
In lucene 3, we are doing away with a lot of search() variants, including
the ones that return Hits.
 
I would like to know which one of the search() variants based implementation
is safe for remoting.
 
Many thanks,
Dino
 

------=_NextPart_000_0019_01C91429.57E88280--


From java-user-return-36069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 11 16:01:10 2008
Return-Path: <java-user-return-36069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78342 invoked from network); 11 Sep 2008 16:01:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2008 16:01:09 -0000
Received: (qmail 27855 invoked by uid 500); 11 Sep 2008 16:00:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27834 invoked by uid 500); 11 Sep 2008 16:00:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27823 invoked by uid 99); 11 Sep 2008 16:00:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 09:00:59 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 15:59:59 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Problems when changing stoplist file
Date: Thu, 11 Sep 2008 12:00:04 -0400
Message-ID: <9294E20AED46934EA459020706463F94EF385F@SUEXCL-02.ad.syr.edu>
In-Reply-To: <001f01c913e4$eb30e090$6a7ba8c0@elgeilo>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Problems when changing stoplist file
Thread-Index: AckT5SgfFvhddaHYRgOKZO0ji3jmQQAQQVQw
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Marie,

On 09/11/2008 at 4:03 AM, Marie-Christine Plogmann wrote:
> I am currently using the demo class IndexFiles to index some
> corpus. I have replaced the Standard by a GermanAnalyzer.
> Here, indexing works fine.
> But if i specify a different stopword list that should be
> used, the tokenization doesn't seem to work properly. Mostly
> some letters are missing at the end. Has somebody encountered
> a similar problem? What could be the problem?

Are you sure that this only occurs after you change the stopword list?

I assume you're using the GermanAnalyzer in contrib/; it constructs an =
analysis pipeline consisting of StandardTokenizer, StandardFilter, =
LowerCaseFilter, StopFilter, and then  GermanStemFilter, which invokes =
GermanStemmer =
<http://svn.apache.org/viewvc/lucene/java/tags/lucene_2_3_2/contrib/analy=
zers/src/java/org/apache/lucene/analysis/de/GermanStemmer.java?view=3Dmar=
kup>, which is an implementation of the stemming algorithm described in =
the paper linked from here: =
<http://www.inf.fu-berlin.de/inst/pubs/tr-b-99-16.abstract.html>.

A basic question to get out of the way: Are you aware that the stemming =
operation removes letters from the end of some words?

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 11 16:32:41 2008
Return-Path: <java-user-return-36070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96859 invoked from network); 11 Sep 2008 16:32:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2008 16:32:41 -0000
Received: (qmail 90471 invoked by uid 500); 11 Sep 2008 16:32:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90437 invoked by uid 500); 11 Sep 2008 16:32:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90426 invoked by uid 99); 11 Sep 2008 16:32:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 09:32:30 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [213.52.246.188] (HELO MAIL.DIOSPHERE.com) (213.52.246.188)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 11 Sep 2008 16:31:33 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C9142B.745F28F4"
Subject: Sorting in lucene through Document boosting
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Thu, 11 Sep 2008 17:31:41 +0100
Message-ID: <ED024AB4B57C8543A3425147237C45F84511AF@MAIL.DIOSPHERE.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Sorting in lucene through Document boosting
Thread-Index: AckUK966utYWlK4gQSyxgsEmZmYljg==
From: "Dragan Jotanovic" <Dragan.Jotanovic@DIOSPHERE.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C9142B.745F28F4
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi there.

I am trying to implement sorting in a large index (3 million documents).
My sort field is simple integer with values between 1 and 100.

With IndexSearcher's search(Query, Sort) everything works fine, but the
problem is resource consumption. I need to make it to use less memory
and CPU.

I thought of setting boost value for documents at index time, with the
value of my sort field, and then making custom Similarity class which
would disregard Lucene scoring and take in evaluation only this document
boost.

Did someone try this, is it even possible? What do you think will I gain
something with this, in terms of resource consumption?

=20

Regards,

Dragan


------_=_NextPart_001_01C9142B.745F28F4--

From java-user-return-36071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 11 16:54:29 2008
Return-Path: <java-user-return-36071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11584 invoked from network); 11 Sep 2008 16:54:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2008 16:54:29 -0000
Received: (qmail 36973 invoked by uid 500); 11 Sep 2008 16:54:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36946 invoked by uid 500); 11 Sep 2008 16:54:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36935 invoked by uid 99); 11 Sep 2008 16:54:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 09:54:19 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [213.52.246.188] (HELO MAIL.DIOSPHERE.com) (213.52.246.188)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 11 Sep 2008 16:53:19 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Sorting in lucene through Document boosting
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Thu, 11 Sep 2008 17:53:47 +0100
Message-ID: <ED024AB4B57C8543A3425147237C45F84511B1@MAIL.DIOSPHERE.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Sorting in lucene through Document boosting
Thread-Index: AckULYAVCFJi4oO0RUa2tayfgRWrtQAAN4oA
References: <48C9496B.1030003@gmail.com>
From: "Dragan Jotanovic" <Dragan.Jotanovic@DIOSPHERE.com>
To: <java-user@lucene.apache.org>
Cc: <markrmiller@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Mark for quick resonse,
but the problem is that I need to do incremental additions to this
index, which means that I can not keep the sort order,
and full reindexation is costly process and I can not do it often.
That's why I need to find some other solution.


-----Original Message-----
From: Mark Miller [mailto:markrmiller@gmail.com]=20
Sent: Thursday, September 11, 2008 5:38 PM
To: Dragan Jotanovic
Subject: Re: Sorting in lucene through Document boosting

You can sort by index order after adding the docs in the sorted order to

the index.

- Mark

Dragan Jotanovic wrote:
> Hi there.
>
> I am trying to implement sorting in a large index (3 million
documents).
> My sort field is simple integer with values between 1 and 100.
>
> With IndexSearcher's search(Query, Sort) everything works fine, but
the
> problem is resource consumption. I need to make it to use less memory
> and CPU.
>
> I thought of setting boost value for documents at index time, with the
> value of my sort field, and then making custom Similarity class which
> would disregard Lucene scoring and take in evaluation only this
document
> boost.
>
> Did someone try this, is it even possible? What do you think will I
gain
> something with this, in terms of resource consumption?
>
> =20
>
> Regards,
>
> Dragan
>
>
> ------_=3DextPart_001_01C9142B.745F28F4--
> Delivered-To: markrmiller@gmail.com
> Received: by 10.140.207.7 with SMTP id e7cs88544rvg;
>         Thu, 11 Sep 2008 09:32:40 -0700 (PDT)
> Received: by 10.142.47.13 with SMTP id
u13mr1030345wfu.38.1221150760779;
>         Thu, 11 Sep 2008 09:32:40 -0700 (PDT)
> Return-Path:
<java-user-return-36070-markrmiller=3Dail.com@lucene.apache.org>
> Received: from mail.apache.org (hermes.apache.org [140.211.11.2])
>         by mx.google.com with SMTP id
32si13407392wfc.12.2008.09.11.09.32.40;
>         Thu, 11 Sep 2008 09:32:40 -0700 (PDT)
> Received-SPF: pass (google.com: domain of
java-user-return-36070-markrmiller=3Dail.com@lucene.apache.org =
designates
140.211.11.2 as permitted sender) client-ip=140.211.11.2;
> Authentication-Results: mx.google.com; spf=3Dss (google.com: domain of
java-user-return-36070-markrmiller=3Dgmail.com@lucene.apache.org
designates 140.211.11.2 as permitted sender)
smtp.mail=3Djava-user-return-36070-markrmiller=3Dgmail.com@lucene.apache.=
org
> Received: (qmail 90437 invoked by uid 500); 11 Sep 2008 16:32:30 -0000
> Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
> Precedence: bulk
> List-Help: <mailto:java-user-help@lucene.apache.org>
> List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
> List-Post: <mailto:java-user@lucene.apache.org>
> List-Id: <java-user.lucene.apache.org>
> Reply-To: java-user@lucene.apache.org
> Delivered-To: mailing list java-user@lucene.apache.org
> Received: (qmail 90426 invoked by uid 99); 11 Sep 2008 16:32:30 -0000
> Received: from athena.apache.org (HELO athena.apache.org)
(140.211.11.136)
>     by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 09:32:30
-0700
> X-ASF-Spam-Status: No, hits=3D0 required=10.0
> 	tests=3DML_MESSAGE,SPF_PASS
> X-Spam-Check-By: apache.org
> Received-SPF: pass (athena.apache.org: local policy)
> Received: from [213.52.246.188] (HELO MAIL.DIOSPHERE.com)
(213.52.246.188)
>     by apache.org (qpsmtpd/0.29) with SMTP; Thu, 11 Sep 2008 16:31:33
+0000
> Content-class: urn:content-classes:message
> MIME-Version: 1.0
> Content-Type: multipart/alternative;
> 	boundary=3D---_=3D_NextPart_001_01C9142B.745F28F4"
> Subject: Sorting in lucene through Document boosting
> X-MimeOLE: Produced By Microsoft Exchange V6.5
> Date: Thu, 11 Sep 2008 17:31:41 +0100
> Message-ID:
<ED024AB4B57C8543A3425147237C45F84511AF@MAIL.DIOSPHERE.com>
> X-MS-Has-Attach:=20
> X-MS-TNEF-Correlator:=20
> Thread-Topic: Sorting in lucene through Document boosting
> Thread-Index: AckUK966utYWlK4gQSyxgsEmZmYljg=3DFrom: "Dragan =
Jotanovic"
<Dragan.Jotanovic@DIOSPHERE.com>
> To: <java-user@lucene.apache.org>
> X-Virus-Checked: Checked by ClamAV on apache.org
>
> ------_=3DextPart_001_01C9142B.745F28F4
> Content-Type: text/plain;
> 	charset=3Ds-ascii"
> Content-Transfer-Encoding: quoted-printable
>
> Hi there.
>
> I am trying to implement sorting in a large index (3 million
documents).
> My sort field is simple integer with values between 1 and 100.
>
> With IndexSearcher's search(Query, Sort) everything works fine, but
the
> problem is resource consumption. I need to make it to use less memory
> and CPU.
>
> I thought of setting boost value for documents at index time, with the
> value of my sort field, and then making custom Similarity class which
> would disregard Lucene scoring and take in evaluation only this
document
> boost.
>
> Did someone try this, is it even possible? What do you think will I
gain
> something with this, in terms of resource consumption?
>
> =20
>
> Regards,
>
> Dragan
>
>
> ------_=3DextPart_001_01C9142B.745F28F4--
>  =20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 11 17:13:45 2008
Return-Path: <java-user-return-36072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24930 invoked from network); 11 Sep 2008 17:13:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2008 17:13:45 -0000
Received: (qmail 81851 invoked by uid 500); 11 Sep 2008 17:13:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81819 invoked by uid 500); 11 Sep 2008 17:13:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81808 invoked by uid 99); 11 Sep 2008 17:13:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 10:13:35 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.61] (HELO web50307.mail.re2.yahoo.com) (206.190.38.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 11 Sep 2008 17:12:35 +0000
Received: (qmail 29034 invoked by uid 60001); 11 Sep 2008 17:13:06 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=6kGvHPZCgdGnjKuN0tkBL7hbq0ZsR0V+jEQzJiZCLtudiwjaifzf7/ZfGtVJhyvHz8K4uibTUd6H2lUvJXUSauzOkuibGb1gJOBoQBy/e/s99S0iN6DLIfK6AmW3t7QBwOcm4hQg+Mv04S4ZMmvoAGaDc3XluQcwT9nO0NdWQro=;
X-YMail-OSG: QNCBY0kVM1klbS.lb4zTYtU7W2lr5o5gvykMluzCOZ_Cv64v0TXZMK2EgYoume.9c0rk2QQrX_RU8Df8VEJIRf8poXnr2X9QtzaeFk0rCVAfsZOBIfZXGHNCHEQcLcLbYi91KRhWZyrPF3MncSBLXNQ-
Received: from [167.206.188.3] by web50307.mail.re2.yahoo.com via HTTP; Thu, 11 Sep 2008 10:13:05 PDT
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Thu, 11 Sep 2008 10:13:05 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Terms with different boosts
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <13435.27745.qm@web50307.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Guy, ulimit -n is your friend.  As is the compound index format.


Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Guy Gavriely <Guy@sightix.com>
> To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
> Sent: Thursday, September 11, 2008 10:28:34 AM
> Subject: Terms with different boosts
> 
> Hi,
> 
> I have to index terms with different boosts, meaning that if the word A appears 
> in two documents one document will be ranked higher.
> 
> I've tried to index them by putting them in different fields and give the fields 
> different boost but i ran into too many files (caused by too many fields I 
> guess) problem.
> Below is the stack trace:
> 
> java.io.FileNotFoundException: /tmp/nutch/crawl/indexes/part-00000/_0.nrm (Too 
> many open files)
> 
> at java.io.FileInputStream.open(Native Method)
> at java.io.FileInputStream.(FileInputStream.java:106)
> at 
> org.apache.hadoop.fs.RawLocalFileSystem$LocalFSFileInputStream.(RawLocalFileSystem.java:87)
> at org.apache.hadoop.fs.RawLocalFileSystem.open(RawLocalFileSystem.java:142)
> at 
> org.apache.hadoop.fs.ChecksumFileSystem$FSInputChecker.(ChecksumFileSystem.java:110)
> at org.apache.hadoop.fs.ChecksumFileSystem.open(ChecksumFileSystem.java:330)
> at org.apache.hadoop.fs.FileSystem.open(FileSystem.java:245)
> at 
> org.apache.nutch.indexer.FsDirectory$DfsIndexInput$Descriptor.(FsDirectory.java:160)
> at 
> org.apache.nutch.indexer.FsDirectory$DfsIndexInput.(FsDirectory.java:169)
> at org.apache.nutch.indexer.FsDirectory.openInput(FsDirectory.java:115)
> at org.apache.lucene.index.SegmentReader.openNorms(SegmentReader.java:522)
> at org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:185)
> at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:140)
> at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:126)
> at org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java:155)
> at 
> org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.java:579)
> at org.apache.lucene.index.IndexReader.open(IndexReader.java:179)
> at org.apache.lucene.index.IndexReader.open(IndexReader.java:142)
> at 
> org.apache.nutch.indexer.DeleteDuplicates$InputFormat$DDRecordReader.(DeleteDuplicates.java:167)
> at 
> org.apache.nutch.indexer.DeleteDuplicates$InputFormat.getRecordReader(DeleteDuplicates.java:240)
> at org.apache.hadoop.mapred.MapTask.run(MapTask.java:139)
> at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:126)
> Exception in thread "main" java.io.IOException: Job failed!
> at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:604)
> at org.apache.nutch.indexer.DeleteDuplicates.dedup(DeleteDuplicates.java:439)
> at com.sightix.nutch.crawl.Crawl.main(Crawl.java:139)
> 
> Can you suggest another way to index terms in different boosts?
> Thanks,
> Guy
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 11 18:04:56 2008
Return-Path: <java-user-return-36073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63729 invoked from network); 11 Sep 2008 18:04:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2008 18:04:56 -0000
Received: (qmail 56226 invoked by uid 500); 11 Sep 2008 18:04:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56185 invoked by uid 500); 11 Sep 2008 18:04:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56174 invoked by uid 99); 11 Sep 2008 18:04:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 11:04:46 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sebastienrainville@gmail.com designates 209.85.162.181 as permitted sender)
Received: from [209.85.162.181] (HELO el-out-1112.google.com) (209.85.162.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 18:03:48 +0000
Received: by el-out-1112.google.com with SMTP id p32so220078elf.14
        for <java-user@lucene.apache.org>; Thu, 11 Sep 2008 11:04:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=ixpWrqDL8jkxo1GUk0qhCN7je0C1TYmn8yOgaSXz1PY=;
        b=py3qzPVZOE4MVM7r3Jb8HZr+hV+Vy3A3xvQvfIj43qZ+GO5z9RdpDeYulieYqjOvL4
         Ft/XEYKOcohGWkfUMPt/w5Gc9Vdm1yTZRuxXdyPAs3U3Bf9Gy4GaK/Gwp8xje7OXxysD
         1cW1jBNLwhBycg1HNYF6wazFmC/Kgkm7ZZAVc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=JUNW0HVvchVD2AFI+EfTdPSENLGw82DtFuySfnKzpQz0r0SHAAF8vyOr0MhThush1Z
         TMsr3GYkdO+gIi0Oi9zgSG7FuwxpP/a9M8gogthmx1XW1pF/mdDHqGUqfUIt5ZVumfPS
         mpbvgNewABCIVez2M4bH9ytSOk2GLBfuhPS2I=
Received: by 10.142.171.6 with SMTP id t6mr1063248wfe.229.1221156258777;
        Thu, 11 Sep 2008 11:04:18 -0700 (PDT)
Received: by 10.142.51.16 with HTTP; Thu, 11 Sep 2008 11:04:18 -0700 (PDT)
Message-ID: <8e8e0b4f0809111104k5b7bf599r20ec58053fde4627@mail.gmail.com>
Date: Thu, 11 Sep 2008 14:04:18 -0400
From: "=?ISO-8859-1?Q?S=E9bastien_Rainville?=" <sebastienrainville@gmail.com>
To: java-user@lucene.apache.org
Subject: high number of fields
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12436_12725514.1221156258787"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_12436_12725514.1221156258787
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I have an algorithm that would benefit from using a lot of fields, more
precisely about 5000 fields. It does sound like a lot to me and I'd like to
know if it's a good idea going that road or if I should rethink about my
algorithm.

Thanks in advance,
Sebastien

------=_Part_12436_12725514.1221156258787--

From java-user-return-36074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 11 18:10:37 2008
Return-Path: <java-user-return-36074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67572 invoked from network); 11 Sep 2008 18:10:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2008 18:10:37 -0000
Received: (qmail 67490 invoked by uid 500); 11 Sep 2008 18:10:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67456 invoked by uid 500); 11 Sep 2008 18:10:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67445 invoked by uid 99); 11 Sep 2008 18:10:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 11:10:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 18:09:28 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.13.8/8.13.8) with ESMTP id m8BI9po4018486
	for <java-user@lucene.apache.org>; Thu, 11 Sep 2008 14:09:58 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <48C95EED.7030905@informatics.jax.org>
Date: Thu, 11 Sep 2008 14:09:49 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: high number of fields
References: <8e8e0b4f0809111104k5b7bf599r20ec58053fde4627@mail.gmail.com>
In-Reply-To: <8e8e0b4f0809111104k5b7bf599r20ec58053fde4627@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-PMX-Version: 5.4.3.345767, Antispam-Engine: 2.6.0.325393, Antispam-Data: 2008.9.11.174906
X-PerlMx-Spam: Gauge=IIIIIII, Probability=7%, Report='BODY_SIZE_1000_LESS 0, BODY_SIZE_400_499 0, BODY_SIZE_5000_LESS 0, __BOUNCE_CHALLENGE_SUBJ 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Could you possibly supply some use cases for your data?

That way we might be able to better advise you on this matter.

Matt

Sbastien Rainville wrote:
> Hi,
>
> I have an algorithm that would benefit from using a lot of fields, more
> precisely about 5000 fields. It does sound like a lot to me and I'd like to
> know if it's a good idea going that road or if I should rethink about my
> algorithm.
>
> Thanks in advance,
> Sebastien
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 11 20:43:53 2008
Return-Path: <java-user-return-36075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77680 invoked from network); 11 Sep 2008 20:43:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2008 20:43:53 -0000
Received: (qmail 96893 invoked by uid 500); 11 Sep 2008 20:43:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96637 invoked by uid 500); 11 Sep 2008 20:43:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96626 invoked by uid 99); 11 Sep 2008 20:43:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 13:43:43 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 20:42:44 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Kdt0W-0003gs-Fw
	for java-user@lucene.apache.org; Thu, 11 Sep 2008 13:43:16 -0700
Message-ID: <19444244.post@talk.nabble.com>
Date: Thu, 11 Sep 2008 13:43:16 -0700 (PDT)
From: nobody <dailykos@budweiser.com>
To: java-user@lucene.apache.org
Subject: Spawn an indexing thread on every update
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: dailykos@budweiser.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

  In our application, I want users to be able to search for the updates they
make almost immediately. Hence, whenever they update, I spawn a thread
immediately to index. However, when the load on the application is very high
the number of threads spawned increases, and this results in "cannot create
native thread" error.

We are thinking of running the indexing thread once in every 15 mins,
through a scheduler, and buffer all the writes till the thread runs.
However, this will result in stale results on the search. Please advice what
is the best approach in this regard.

-thanks
-- 
View this message in context: http://www.nabble.com/Spawn-an-indexing-thread-on-every-update-tp19444244p19444244.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 11 21:02:51 2008
Return-Path: <java-user-return-36076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93199 invoked from network); 11 Sep 2008 21:02:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2008 21:02:51 -0000
Received: (qmail 37692 invoked by uid 500); 11 Sep 2008 21:02:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37663 invoked by uid 500); 11 Sep 2008 21:02:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37652 invoked by uid 99); 11 Sep 2008 21:02:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 14:02:41 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sebastienrainville@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 21:01:43 +0000
Received: by gxk6 with SMTP id 6so10390780gxk.5
        for <java-user@lucene.apache.org>; Thu, 11 Sep 2008 14:01:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=XxDa8hNalCjcyb0FPo/fz5sJTKJxQs7P5RZOGh59ZZc=;
        b=rKfe9pePTKxjQaIsiyfsOuzujq7INo9L8Sp6JbKxkWokrLpPnEmGykKukscLmxmGzE
         AkggCsLHkyoitMMZ0/2+WesI5UyAeyeZEWm3WR3bVy0sREtBEvOz6GVil0Golk/rtWXd
         2NZVyLiPGC8W0Yp6lDNPtfZMh9Smv/MGorZXE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=GSdf3toFLR4oulff8dUHFvEzIloCQXXbwVk/DndbBSRB9KsilaYwbF4CUUK19dKaIl
         GXwGQM6LD8QBr/Qa9LQ+ptESCdPL04TkXrJNm3LU2orLSSVG8EXaQRk9iVjHlYAAvbw/
         1Q/rxPo7i4Tsyzke2f6xw+1jc1GWAXk/hvnAQ=
Received: by 10.142.222.21 with SMTP id u21mr1144923wfg.67.1221166874289;
        Thu, 11 Sep 2008 14:01:14 -0700 (PDT)
Received: by 10.142.51.16 with HTTP; Thu, 11 Sep 2008 14:01:14 -0700 (PDT)
Message-ID: <8e8e0b4f0809111401u32478643k4e1622e06fb55195@mail.gmail.com>
Date: Thu, 11 Sep 2008 17:01:14 -0400
From: "=?ISO-8859-1?Q?S=E9bastien_Rainville?=" <sebastienrainville@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: high number of fields
In-Reply-To: <48C95EED.7030905@informatics.jax.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15210_27652804.1221166874296"
References: <8e8e0b4f0809111104k5b7bf599r20ec58053fde4627@mail.gmail.com>
	 <48C95EED.7030905@informatics.jax.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15210_27652804.1221166874296
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Well, I found a better way to do what I had to do. Still, what's supposed t=
o
be considered to be a high number of fields? tens, hundreds, thousands ?
How's the performance supposed to be affected by the number of fields? Is i=
t
linear?




On Thu, Sep 11, 2008 at 2:09 PM, Matthew Hall <mhall@informatics.jax.org>wr=
ote:

> Could you possibly supply some use cases for your data?
>
> That way we might be able to better advise you on this matter.
>
> Matt
>
>
> S=E9bastien Rainville wrote:
>
>> Hi,
>>
>> I have an algorithm that would benefit from using a lot of fields, more
>> precisely about 5000 fields. It does sound like a lot to me and I'd like
>> to
>> know if it's a good idea going that road or if I should rethink about my
>> algorithm.
>>
>> Thanks in advance,
>> Sebastien
>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_15210_27652804.1221166874296--

From java-user-return-36077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 11 21:19:06 2008
Return-Path: <java-user-return-36077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99444 invoked from network); 11 Sep 2008 21:19:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2008 21:19:06 -0000
Received: (qmail 75421 invoked by uid 500); 11 Sep 2008 21:18:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75111 invoked by uid 500); 11 Sep 2008 21:18:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75100 invoked by uid 99); 11 Sep 2008 21:18:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 14:18:56 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anthony.urso@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 21:17:58 +0000
Received: by ug-out-1314.google.com with SMTP id j3so1025731ugf.23
        for <java-user@lucene.apache.org>; Thu, 11 Sep 2008 14:18:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=rH1fHbx86qMUY1pRayJBAvMDaUrWPb1MkwZVUd4xUW8=;
        b=p06k/zHpUn+bt/VS5AdcU3zChHuJUB3X5zh/xeDdJkvckSZoBwl1bdBs5LlR1q8UFw
         n2GowfO99gR98+LTYmDkePI7JFDI4h+5OKTUln8A9njyyz/AM4rREJnvQLjTsqjG4CIy
         DIEidaHtRbToN9n3k3NwfF7FGxcaugAXnEobw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=adKVqiIuSswdVueb2UKTYQ/QWBEA3Z2g6C4CxbOyj+9lEthARfrqXLu8h3Yk7cfW5I
         PWidfzXwZB2mzYL/YtE8754+dx4NzI9T61HHqUcd6TLapWSkXT2S8lT3AmLMLOZ8Mpkw
         KazFv1bHdM6ylcJZgdfz+b00Kq1+LLvYrHOTk=
Received: by 10.210.34.5 with SMTP id h5mr3947838ebh.84.1221167899260;
        Thu, 11 Sep 2008 14:18:19 -0700 (PDT)
Received: by 10.210.43.15 with HTTP; Thu, 11 Sep 2008 14:18:19 -0700 (PDT)
Message-ID: <ba72f77f0809111418l29cf215dnd45bf679832d7d42@mail.gmail.com>
Date: Thu, 11 Sep 2008 14:18:19 -0700
From: "Anthony Urso" <anthony.urso@gmail.com>
To: java-user@lucene.apache.org
Subject: segment exists in external directory yet the MergeScheduler executed the merge in a separate thread
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

I have implemented a MapReduce job to merge a bunch of Lucene 2.3.2
indices together, but the reducers randomly fail with the following
unchecked exception after thousands of successful merges:

org.apache.lucene.index.MergePolicy$MergeException: segment "_0 exists
in external directory yet the MergeScheduler executed the merge in a
separate thread
	at org.apache.lucene.index.IndexWriter.copyExternalSegments(IndexWriter.java:2362)
	at org.apache.lucene.index.IndexWriter.addIndexesNoOptimize(IndexWriter.java:2307)

Anyone know what would cause such a thing?

Here is the relevant code:

  IndexWriter writer = new IndexWriter(FSDirectory.getDirectory(name),
new StandardAnalyzer());

  Directory[] dir = new Directory[1];

  for (String p: paths) {
    dir[0] = FSDirectory.getDirectory(p);

    writer.addIndexesNoOptimize(dir);
  }

  writer.optimize();

  writer.close();

Cheers,
Anthony

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 11 22:31:46 2008
Return-Path: <java-user-return-36078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54652 invoked from network); 11 Sep 2008 22:31:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2008 22:31:46 -0000
Received: (qmail 91264 invoked by uid 500); 11 Sep 2008 22:31:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91235 invoked by uid 500); 11 Sep 2008 22:31:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91223 invoked by uid 99); 11 Sep 2008 22:31:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 15:31:36 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.232 as permitted sender)
Received: from [209.85.198.232] (HELO rv-out-0506.google.com) (209.85.198.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 22:30:39 +0000
Received: by rv-out-0506.google.com with SMTP id f6so547424rvb.5
        for <java-user@lucene.apache.org>; Thu, 11 Sep 2008 15:31:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=4gY5y00I/ubsFyZAv0IJG34UcQpG1kgRBDKVZaU2HjI=;
        b=pRXWZ+P/oEohHRQzHHzj7vgvT2QmgSJZrjQYQ02ujcte+Cj7k7lQQ+xrjBtBC1huUx
         cbyX4+/td5oITx1gyCf9rzxN6rusHmqClma4Y3WiMjt7UzxACbyQcL19mAaz8ZWYekm4
         Axdl8UwsVYob/WU/WDAm8BRI6RjiqZGCXxFzE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=Lo+XVbIM5Qt44yBejxq6LdtaURXnWIfwwyAjB+T2MofejTQ7QrHTUS8or8cf0zvcx6
         Z8Syq4/3Z+eXSeR0IgQ7GIQuSK1N6LtQwFAJg4/LnbltFTZExS3u5CcZiDB3qOkrfWS9
         qUPBbbSjrHSQF4h51Eyrh9NhXIYdw6pjPGRNY=
Received: by 10.141.106.14 with SMTP id i14mr2121838rvm.178.1221172262074;
        Thu, 11 Sep 2008 15:31:02 -0700 (PDT)
Received: by 10.141.176.5 with HTTP; Thu, 11 Sep 2008 15:31:02 -0700 (PDT)
Message-ID: <1bcb7c7f0809111531j1111395ftff9a8f1a3c021342@mail.gmail.com>
Date: Fri, 12 Sep 2008 01:31:02 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: query to return docs that has a certain field
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

Lets say we have different document types, and one type of document
only contains field A.

How can I make a query so that I get all the documents that only has field A?

There is a get all documents query, but that would get all the
documents whether they contain field A or not.

Is there a way? I could make the documents containing field A have
another field B equals some flag, and then query for that flag, but
that would be kind of inefficient.

Best,
-C.B.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 11 23:28:00 2008
Return-Path: <java-user-return-36079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 571 invoked from network); 11 Sep 2008 23:28:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2008 23:28:00 -0000
Received: (qmail 41764 invoked by uid 500); 11 Sep 2008 23:27:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40977 invoked by uid 500); 11 Sep 2008 23:27:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40966 invoked by uid 99); 11 Sep 2008 23:27:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 16:27:51 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 23:26:53 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id AA96E71C4B0; Thu, 11 Sep 2008 16:27:24 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id A6DCF71C4AE
	for <java-user@lucene.apache.org>; Thu, 11 Sep 2008 16:27:24 -0700 (PDT)
Date: Thu, 11 Sep 2008 16:27:24 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Re: Number to printable sortable string, including floating point
 numbers and negatives
In-Reply-To: <D8E6BD3AD2634843B58AFF6A94FE246202D7A5A404@msgint02.mogul.com>
Message-ID: <Pine.LNX.4.62.0809111618140.4907@radix.cryptio.net>
References: <D8E6BD3AD2634843B58AFF6A94FE246202D7A5A404@msgint02.mogul.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Do you have any suggestions on how to solve this in a "neat" way? And is 

Have you looked at the NumberTools class?

As i recall it generates strings that are always printable, but as a 
result (of using fewer characters) are also always longer then the 
corrisponding value from Solr's NumberUtils.  

NumberTools only has methods for longs at the moment, but the same 
doubleToRawLongBits logic from NumberUtils could be usedto apply it to 
doubles as well.

: the interest in this really that low (judging from the poor search 
: result I got when searching for "lucene sorting negative numbers" and 
: similar)? I would have thought that the need for this functionallity was 
: quite fundamental, and that it was already part of Lucene core.

In my experience people the majority of people either:
  1) don't care about numbers in Lucene
  2) care about small ranges of numbers where simple padding or 
NumberTools is good enough.
  3) use Solr and don't care that the indexed value is non-printable, 
because Solr's IndexSchema and FieldType management ensures thatthe "real" 
numeric value is all they ever see.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 11 23:58:55 2008
Return-Path: <java-user-return-36080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29556 invoked from network); 11 Sep 2008 23:58:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2008 23:58:55 -0000
Received: (qmail 68038 invoked by uid 500); 11 Sep 2008 23:58:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68006 invoked by uid 500); 11 Sep 2008 23:58:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67995 invoked by uid 99); 11 Sep 2008 23:58:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 16:58:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 23:57:48 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 909F071C13C; Thu, 11 Sep 2008 16:58:20 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 8CA5C71C019
	for <java-user@lucene.apache.org>; Thu, 11 Sep 2008 16:58:20 -0700 (PDT)
Date: Thu, 11 Sep 2008 16:58:20 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: query to return docs that has a certain field
In-Reply-To: <1bcb7c7f0809111531j1111395ftff9a8f1a3c021342@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0809111654350.4907@radix.cryptio.net>
References: <1bcb7c7f0809111531j1111395ftff9a8f1a3c021342@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Is there a way? I could make the documents containing field A have
: another field B equals some flag, and then query for that flag, but
: that would be kind of inefficient.

There is space efficienty and there is time effeciency.

if there was only only value for field B (ie: "true" or "yes") then as 
long as you only index it (with omitNorm=true) and don't "store" it, it 
would acctually be fairly space efficient.

without adding any new fields: a RangeFilter (or ConsantScoreRangeQuery) 
on field A with both a null lower and upper bound will find all docs with 
any value in the field A -- but a TermQuery("B", "yes") is probably going 
to be more efficinet in terms of query time.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 12 01:48:09 2008
Return-Path: <java-user-return-36081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47570 invoked from network); 12 Sep 2008 01:48:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Sep 2008 01:48:08 -0000
Received: (qmail 45538 invoked by uid 500); 12 Sep 2008 01:47:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45498 invoked by uid 500); 12 Sep 2008 01:47:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45487 invoked by uid 99); 12 Sep 2008 01:47:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 18:47:58 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anthony.urso@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 01:47:01 +0000
Received: by ug-out-1314.google.com with SMTP id j3so1084713ugf.23
        for <java-user@lucene.apache.org>; Thu, 11 Sep 2008 18:47:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=KwaizCu6N77GtnZ9QW0/PveL7UTw9hYV4cOBxhev/zc=;
        b=G+67LbF7hzPpQtVDvJH20q2eAOnMJrFPDEMixoEB8Psgk8ivNjPNG21aCIBg6sxG3f
         OFaBjsEI7rwXtDt6DUY3uvYgdaIvLEjqglJ1sMq8MC6mPAMGI8G4Hb2oNUZDAz521tKX
         xog5b1yujp7s8L8wDvxKzcrqD7vqW/Swc7g/U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=j2R7NXSoULFm4jjmiwYjOhq2gsdlQA0v5JbwFHBZGfquu8p7Y6PgY/QCWM7wBJabKb
         8CDicxg0lzPkHM9AcTMPaboLxq061IXyoOjqxvpcqHBvFbHNU+TVtXReRbzDwxqCfJoX
         VNQtV8KkaMx/e4GkFPOpQzqHz0v5qcUffzHYk=
Received: by 10.210.82.7 with SMTP id f7mr4249717ebb.140.1221184042866;
        Thu, 11 Sep 2008 18:47:22 -0700 (PDT)
Received: by 10.210.43.15 with HTTP; Thu, 11 Sep 2008 18:47:22 -0700 (PDT)
Message-ID: <ba72f77f0809111847t4009731dge3e393e0f6c64d37@mail.gmail.com>
Date: Thu, 11 Sep 2008 18:47:22 -0700
From: "Anthony Urso" <anthony.urso@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Case Sensitivity
In-Reply-To: <32FF3321-E20B-4021-8576-7D50F9626637@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <72692.29360.qm@web50308.mail.re2.yahoo.com>
	 <663A313E-D32D-411B-AA7F-B713BB359A3F@mikemccandless.com>
	 <c68e39170808281050k6bc0481bh8ff3ca444454d331@mail.gmail.com>
	 <32FF3321-E20B-4021-8576-7D50F9626637@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Aug 28, 2008 at 11:16 AM, Michael McCandless
<lucene@mikemccandless.com> wrote:
>
> Yonik Seeley wrote:
>>
>> I wasn't originally going to add a Field.Index at all for omitNorms,
>> but Doug suggested it.
>> The problem with this type-safe way of doing things is the
>> combinatorial explosion.
>
> Yeah I realize that.  Now that we have omitTF as an option we could really
> go crazy ;)
>
>  I figured since we already have NOT_ANALYZED_NO_NORMS we may as well round
> it out with ANALYZED_NO_NORMS, and then stop there.  Plus, people have been
> surprised that you could do ANALYZED_NO_NORMS, yet it is useful.

Why not make this flag field into a bitmap?

Cheers,
Anthony

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 12 02:58:38 2008
Return-Path: <java-user-return-36082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5292 invoked from network); 12 Sep 2008 02:58:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Sep 2008 02:58:37 -0000
Received: (qmail 92936 invoked by uid 500); 12 Sep 2008 02:58:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92896 invoked by uid 500); 12 Sep 2008 02:58:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92885 invoked by uid 99); 12 Sep 2008 02:58:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 19:58:27 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=RCVD_BAD_ID,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 02:57:30 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id m8C2vpqj005571
	for <java-user@lucene.apache.org>; Fri, 12 Sep 2008 05:57:51 +0300
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz.teamw.com with ESMTP
	 id m-rv%k%m; 12 Sep 2008 05:57:00 +0300
Message-ID: <48C9DAA4.4030905@teamware.com>
Date: Fri, 12 Sep 2008 12:57:40 +1000
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: Lucene User <java-user@lucene.apache.org>
Subject: Caching Filters and docIds when using MultiSearcher/IndexSearcher(MultiReader)...
X-TWG-MDN: never
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Fri, 12 Sep 2008 05:57:51 +0300 (EEST)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Up to now I have only needed to search a single index, but now I will have many 
index shards to search across.  My existing search mantained cached filters for 
the index as well as a cache of my own unique ID fields in the index, keyed by 
Lucene DocId.

Now I need to search multiple indices, I am trying to work out how to continue 
to use these caches.

I have one index per month of data (up to 10M docs per month) and users can 
search across whichever date range they want, so one search may search Index 
1-->12 (e.g. Jan07-Dec07) and another 13-20 (Jan08-Aug08).

It makes no sense to cache a single bitset generated from a MultiReader over 
indices 1-12 when the next search could be for indices 2-11 and all the bits 
would be useless, so to be of any use, caches, including cached BitSets should 
therefore contain the doc ids specific to the particular index rather than to 
any particular MultiReader.  Then my Filter implementation can determine the 
real doc id and delegate to a bitset for the particular reader instance.

This means I need to find the original reader/searcher instance and the 
particular doc Id from that instance to perform bitset checks or cache lookups.

In the MultiSearcher there is subDoc and subSearcher, but there's no such beast 
for an IndexReader to find the real reader/doc from the pseudo one.

This also raises the question about MultiSearcher vs IndexSearcher(MultiReader) 
which, even after reading the the archives, I am unsure which I should use - 
there seem to be comments in the dev list to avoid MultiSearcher...

Any thoughts or have I spiralled too far into Lucene's depths to see where I am...?

Antony






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 12 06:33:59 2008
Return-Path: <java-user-return-36083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27954 invoked from network); 12 Sep 2008 06:33:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Sep 2008 06:33:58 -0000
Received: (qmail 31098 invoked by uid 500); 12 Sep 2008 06:33:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31070 invoked by uid 500); 12 Sep 2008 06:33:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31059 invoked by uid 99); 12 Sep 2008 06:33:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Sep 2008 23:33:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [193.12.6.34] (HELO msgint02.mogul.com) (193.12.6.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 06:32:50 +0000
Received: from msgint02.mogul.com ([172.17.1.7]) by msgint02.mogul.com
 ([172.17.1.7]) with mapi; Fri, 12 Sep 2008 08:34:02 +0200
From: =?iso-8859-1?Q?Jimi_Hulleg=E5rd?= <jimi.hullegard@mogul.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 12 Sep 2008 08:33:50 +0200
Subject: RE: Number to printable sortable string, including floating point
 numbers and negatives
Thread-Topic: Number to printable sortable string, including floating point
 numbers and negatives
Thread-Index: AckUZjDmQkKe9uExSj6YBSUnd4vKpQAOpJ4Q
Message-ID: <D8E6BD3AD2634843B58AFF6A94FE246202D7A5A5A4@msgint02.mogul.com>
In-Reply-To: <Pine.LNX.4.62.0809111618140.4907@radix.cryptio.net>
Accept-Language: sv-SE
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: sv-SE
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

> : Do you have any suggestions on how to solve this in a
> "neat" way? And is
>
> Have you looked at the NumberTools class?
>
> As i recall it generates strings that are always printable, but as a
> result (of using fewer characters) are also always longer then the
> corrisponding value from Solr's NumberUtils.
>
> NumberTools only has methods for longs at the moment, but the same
> doubleToRawLongBits logic from NumberUtils could be usedto apply it to
> doubles as well.

Ah, no I have never looked at the NumberTools class, simply because I had n=
o idea it existed. Thanks for the tip! It looks just about right for me.

/Jimi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 12 09:30:03 2008
Return-Path: <java-user-return-36084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15663 invoked from network); 12 Sep 2008 09:30:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Sep 2008 09:30:03 -0000
Received: (qmail 65620 invoked by uid 500); 12 Sep 2008 09:29:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65600 invoked by uid 500); 12 Sep 2008 09:29:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65585 invoked by uid 99); 12 Sep 2008 09:29:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 02:29:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 09:28:43 +0000
Received: by gxk6 with SMTP id 6so11354666gxk.5
        for <java-user@lucene.apache.org>; Fri, 12 Sep 2008 02:29:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=3fZr6l7Vcz6XvTeaPMZlx+6Wkb9G9mR5G1sutH4TzG0=;
        b=gDVAP5RTGMmiX9izUsN8pjXxncuSmeKM6h3YoG0HDrH3D5SrTpOdMoQ5Ak1DKXEdXC
         NyyCfj+BhyLigAN/Pmw99OU6leSl74fLtoda5LJg7hRDllrXL3rJ1vVP1TwKdeXyhP04
         5mKHQvmnQJyWOWWak6eRP7B2/GOUZ2+E418Ik=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=s7jkV/idGQ/2MfzDP0QWd6UZzttJNgO53ABFERceUnNRDkB2fUDMvPL9hUs22+y23t
         6TgEQpz0i8Dmp1UvNGnG34azitzPJqt4NmIxEBoiFtfZNEzoSkM2NWUYVQAyLmKdN0qH
         GoSAgwZ2s/lAucxZ0KiQh2QJB3wck2oVQfMcY=
Received: by 10.100.152.19 with SMTP id z19mr4927951and.16.1221211754763;
        Fri, 12 Sep 2008 02:29:14 -0700 (PDT)
Received: by 10.100.132.7 with HTTP; Fri, 12 Sep 2008 02:29:14 -0700 (PDT)
Message-ID: <8c4e68610809120229s7db02303w47504d90f60a7340@mail.gmail.com>
Date: Fri, 12 Sep 2008 10:29:14 +0100
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Spawn an indexing thread on every update
In-Reply-To: <19444244.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <19444244.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi


Why 15 mins?  Can you try lower values to get a balance between load
and freshness?



--
Ian.


On Thu, Sep 11, 2008 at 9:43 PM, nobody <dailykos@budweiser.com> wrote:
>
> Hi,
>
>  In our application, I want users to be able to search for the updates they
> make almost immediately. Hence, whenever they update, I spawn a thread
> immediately to index. However, when the load on the application is very high
> the number of threads spawned increases, and this results in "cannot create
> native thread" error.
>
> We are thinking of running the indexing thread once in every 15 mins,
> through a scheduler, and buffer all the writes till the thread runs.
> However, this will result in stale results on the search. Please advice what
> is the best approach in this regard.
>
> -thanks
> --

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 12 09:41:57 2008
Return-Path: <java-user-return-36085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23638 invoked from network); 12 Sep 2008 09:41:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Sep 2008 09:41:57 -0000
Received: (qmail 86743 invoked by uid 500); 12 Sep 2008 09:41:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86717 invoked by uid 500); 12 Sep 2008 09:41:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86706 invoked by uid 99); 12 Sep 2008 09:41:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 02:41:44 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.170.189] (HELO rn-out-0910.google.com) (64.233.170.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 09:40:45 +0000
Received: by rn-out-0910.google.com with SMTP id j71so664748rne.4
        for <java-user@lucene.apache.org>; Fri, 12 Sep 2008 02:41:16 -0700 (PDT)
Received: by 10.100.42.4 with SMTP id p4mr4925752anp.26.1221212475999;
        Fri, 12 Sep 2008 02:41:15 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id i40sm3577504wxd.18.2008.09.12.02.41.14
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 12 Sep 2008 02:41:15 -0700 (PDT)
Message-Id: <BD2A1C59-F3DD-414A-9124-DB2EE7EE4D33@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <ba72f77f0809111418l29cf215dnd45bf679832d7d42@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: segment exists in external directory yet the MergeScheduler executed the merge in a separate thread
Date: Fri, 12 Sep 2008 05:41:13 -0400
References: <ba72f77f0809111418l29cf215dnd45bf679832d7d42@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

Unfortunately, I think you've hit a bug in Lucene's
ConcurrentMergeScheduler in 2.3.  I'll open an issue & attach a
patch.

The bug only happens when you call addIndexesNoOptimize, and one
simple workaround would be to use SerialMergeScheduler.

I think this is already fixed in trunk (soonish to be 2.4) as a side
effect of https://issues.apache.org/jira/browse/LUCENE-1335.

In 2.3, merges that involve external segments (which are segments
folded in by addIndexesNoOptimize) are not supposed to run in a BG
thread.  This is to prevent addIndexesNoOptimize from returning until
after all external segments have been carried over (merged or copied)
into the index, so that if there is an exception (eg disk full),
addIndexesNoOptimize is able to rollback to the index to the starting
point.

The primary merge() method of CMS indeed does not BG any external
merges, but the bug is that when a BG merge finishes it then selects a
new merge to kick off and that selection is happy to pick an external
segment.

Mike

Anthony Urso wrote:

> I have implemented a MapReduce job to merge a bunch of Lucene 2.3.2
> indices together, but the reducers randomly fail with the following
> unchecked exception after thousands of successful merges:
>
> org.apache.lucene.index.MergePolicy$MergeException: segment "_0 exists
> in external directory yet the MergeScheduler executed the merge in a
> separate thread
> 	at  
> org 
> .apache 
> .lucene.index.IndexWriter.copyExternalSegments(IndexWriter.java:2362)
> 	at  
> org 
> .apache 
> .lucene.index.IndexWriter.addIndexesNoOptimize(IndexWriter.java:2307)
>
> Anyone know what would cause such a thing?
>
> Here is the relevant code:
>
>  IndexWriter writer = new IndexWriter(FSDirectory.getDirectory(name),
> new StandardAnalyzer());
>
>  Directory[] dir = new Directory[1];
>
>  for (String p: paths) {
>    dir[0] = FSDirectory.getDirectory(p);
>
>    writer.addIndexesNoOptimize(dir);
>  }
>
>  writer.optimize();
>
>  writer.close();
>
> Cheers,
> Anthony
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 12 10:18:59 2008
Return-Path: <java-user-return-36086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39891 invoked from network); 12 Sep 2008 10:18:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Sep 2008 10:18:59 -0000
Received: (qmail 36319 invoked by uid 500); 12 Sep 2008 10:18:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36188 invoked by uid 500); 12 Sep 2008 10:18:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36118 invoked by uid 99); 12 Sep 2008 10:18:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 03:18:45 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 10:17:46 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Ke5jF-0005ig-Gj
	for java-user@lucene.apache.org; Fri, 12 Sep 2008 03:18:17 -0700
Message-ID: <19453184.post@talk.nabble.com>
Date: Fri, 12 Sep 2008 03:18:17 -0700 (PDT)
From: Konstantyn Smirnov <injecteer@yahoo.com>
To: java-user@lucene.apache.org
Subject: TermsFilter and MUST
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: injecteer@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi gents,

is it possible to use TermsFilter with the 'MUST' occurence rule, instead of
the 'SHOULD'?

In the code:

def tf = new TermsFilter()
for( some terms ){
  tf.addTerm( new Term( .... ) )
}

I want that all terms MUST limit the hit list.

Thanks in advance
-- 
View this message in context: http://www.nabble.com/TermsFilter-and-MUST-tp19453184p19453184.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 12 10:26:34 2008
Return-Path: <java-user-return-36087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43250 invoked from network); 12 Sep 2008 10:26:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Sep 2008 10:26:34 -0000
Received: (qmail 43403 invoked by uid 500); 12 Sep 2008 10:26:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43361 invoked by uid 500); 12 Sep 2008 10:26:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43350 invoked by uid 99); 12 Sep 2008 10:26:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 03:26:24 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.200.172] (HELO wf-out-1314.google.com) (209.85.200.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 10:25:25 +0000
Received: by wf-out-1314.google.com with SMTP id 28so753598wfc.20
        for <java-user@lucene.apache.org>; Fri, 12 Sep 2008 03:25:56 -0700 (PDT)
Received: by 10.114.201.1 with SMTP id y1mr3194306waf.93.1221215156162;
        Fri, 12 Sep 2008 03:25:56 -0700 (PDT)
Received: by 10.114.108.9 with HTTP; Fri, 12 Sep 2008 03:25:56 -0700 (PDT)
Message-ID: <962ea6660809120325s3e8eabc1y4079906084d9b0f1@mail.gmail.com>
Date: Fri, 12 Sep 2008 13:25:56 +0300
From: "Bogdan Ghidireac" <bogdan@ecstend.com>
To: java-user@lucene.apache.org
Subject: removing norms
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have a large index and I want to remove the norms from a field. Is
there a way to do this without reindexing everything ?

Thank you,
Bogdan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 12 10:41:11 2008
Return-Path: <java-user-return-36088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50376 invoked from network); 12 Sep 2008 10:41:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Sep 2008 10:41:11 -0000
Received: (qmail 59516 invoked by uid 500); 12 Sep 2008 10:41:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59489 invoked by uid 500); 12 Sep 2008 10:41:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59478 invoked by uid 99); 12 Sep 2008 10:41:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 03:41:01 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 10:40:02 +0000
Received: by gxk6 with SMTP id 6so11451854gxk.5
        for <java-user@lucene.apache.org>; Fri, 12 Sep 2008 03:40:33 -0700 (PDT)
Received: by 10.150.50.1 with SMTP id x1mr5749900ybx.236.1221216033493;
        Fri, 12 Sep 2008 03:40:33 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id k41sm16085561rnd.6.2008.09.12.03.40.32
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 12 Sep 2008 03:40:32 -0700 (PDT)
Message-Id: <230A7359-23A1-4A56-9A97-88E5F03D22B0@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <ba72f77f0809111418l29cf215dnd45bf679832d7d42@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: segment exists in external directory yet the MergeScheduler executed the merge in a separate thread
Date: Fri, 12 Sep 2008 06:40:31 -0400
References: <ba72f77f0809111418l29cf215dnd45bf679832d7d42@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


OK I opened this issue and attached a patch:

     https://issues.apache.org/jira/browse/LUCENE-1384

If possible could you test this patch to see if it resolves your  
exceptions?  Thanks.

Mike

Anthony Urso wrote:

> I have implemented a MapReduce job to merge a bunch of Lucene 2.3.2
> indices together, but the reducers randomly fail with the following
> unchecked exception after thousands of successful merges:
>
> org.apache.lucene.index.MergePolicy$MergeException: segment "_0 exists
> in external directory yet the MergeScheduler executed the merge in a
> separate thread
> 	at  
> org 
> .apache 
> .lucene.index.IndexWriter.copyExternalSegments(IndexWriter.java:2362)
> 	at  
> org 
> .apache 
> .lucene.index.IndexWriter.addIndexesNoOptimize(IndexWriter.java:2307)
>
> Anyone know what would cause such a thing?
>
> Here is the relevant code:
>
>  IndexWriter writer = new IndexWriter(FSDirectory.getDirectory(name),
> new StandardAnalyzer());
>
>  Directory[] dir = new Directory[1];
>
>  for (String p: paths) {
>    dir[0] = FSDirectory.getDirectory(p);
>
>    writer.addIndexesNoOptimize(dir);
>  }
>
>  writer.optimize();
>
>  writer.close();
>
> Cheers,
> Anthony
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 12 11:06:48 2008
Return-Path: <java-user-return-36089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62191 invoked from network); 12 Sep 2008 11:06:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Sep 2008 11:06:48 -0000
Received: (qmail 87205 invoked by uid 500); 12 Sep 2008 11:06:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87184 invoked by uid 500); 12 Sep 2008 11:06:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87173 invoked by uid 99); 12 Sep 2008 11:06:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 04:06:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.200.170 as permitted sender)
Received: from [209.85.200.170] (HELO wf-out-1314.google.com) (209.85.200.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 11:05:37 +0000
Received: by wf-out-1314.google.com with SMTP id 28so766535wfc.20
        for <java-user@lucene.apache.org>; Fri, 12 Sep 2008 04:06:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:reply-to
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=35slVuEv2mCNaSOC3qzcjhxrcL38QNS5T6gffF/FvpE=;
        b=b1y9+FnwMiFgKphGiSF12VBMdkq4SCMllmgvNzlNvKzaOqaRaBt+rC+5rcl3Riatkn
         WvxvWIwh0uUX7j/+KcxTV+J8BPSAjuNmtMiueX9pBUgSnPrrgj0NLFZFCRdRS/vZBF4G
         UoPciaA/37erSnKddywj975bOpx2AQieEq5xU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=message-id:date:from:reply-to:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=GyLRmnmtz8En4Yohg5RxKHIsOxp0SdZA2U6zwKpFSa4OxubjkiI+B9lOBhEaFxX5iB
         W5PY9cRId6j2QpP0HkPhPLsVa8ee2O7lM3blkepgsjJtNQ00semy0KJ+vwK0pJP8e+Uc
         5as9nit59JmpYcb2jVcYQrHonF6z4b9oibqzQ=
Received: by 10.114.159.17 with SMTP id h17mr3179508wae.227.1221217560116;
        Fri, 12 Sep 2008 04:06:00 -0700 (PDT)
Received: by 10.115.19.12 with HTTP; Fri, 12 Sep 2008 04:06:00 -0700 (PDT)
Message-ID: <f18c9dde0809120406t6d80d1ffia2be808d6f3ee35d@mail.gmail.com>
Date: Fri, 12 Sep 2008 13:06:00 +0200
From: "Simon Willnauer" <simon.willnauer@googlemail.com>
Reply-To: simon.willnauer@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Spawn an indexing thread on every update
In-Reply-To: <8c4e68610809120229s7db02303w47504d90f60a7340@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <19444244.post@talk.nabble.com>
	 <8c4e68610809120229s7db02303w47504d90f60a7340@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I guess similar problems have been discussed on the list over and over again.
Why don't you use a single update thread which takes care of batch
processing, commit threshold or performs commits after a certain time
span.
This would at least prevent you from spawning all the threads which
is, as far as I can tell not necessary.
Your update thread could also notify you searcher to reopen the index
as soon as a change or a batch was commited.
If you are looking for examples you might find some good examples in
the Solr code.

- simon

On Fri, Sep 12, 2008 at 11:29 AM, Ian Lea <ian.lea@gmail.com> wrote:
> Hi
>
>
> Why 15 mins?  Can you try lower values to get a balance between load
> and freshness?
>
>
>
> --
> Ian.
>
>
> On Thu, Sep 11, 2008 at 9:43 PM, nobody <dailykos@budweiser.com> wrote:
>>
>> Hi,
>>
>>  In our application, I want users to be able to search for the updates they
>> make almost immediately. Hence, whenever they update, I spawn a thread
>> immediately to index. However, when the load on the application is very high
>> the number of threads spawned increases, and this results in "cannot create
>> native thread" error.
>>
>> We are thinking of running the indexing thread once in every 15 mins,
>> through a scheduler, and buffer all the writes till the thread runs.
>> However, this will result in stale results on the search. Please advice what
>> is the best approach in this regard.
>>
>> -thanks
>> --
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 12 11:58:21 2008
Return-Path: <java-user-return-36090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79617 invoked from network); 12 Sep 2008 11:58:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Sep 2008 11:58:21 -0000
Received: (qmail 39422 invoked by uid 500); 12 Sep 2008 11:58:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39393 invoked by uid 500); 12 Sep 2008 11:58:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39382 invoked by uid 99); 12 Sep 2008 11:58:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 04:58:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of marcelo.schneider@digitro.com.br designates 189.85.128.24 as permitted sender)
Received: from [189.85.128.24] (HELO mail.digitro.com.br) (189.85.128.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 11:57:12 +0000
Received: from serverdgt.daf.digitro.com.br (firewall [189.85.128.10])
	by mail.digitro.com.br (Postfix) with ESMTP id 17CFD1F90B51
	for <java-user@lucene.apache.org>; Fri, 12 Sep 2008 08:51:10 -0300 (BRT)
Received: from [192.168.170.157] (dinamico157.dti.digitro.com.br [192.168.170.157])
	by serverdgt.daf.digitro.com.br (Postfix) with ESMTP id 12A193C4707
	for <java-user@lucene.apache.org>; Fri, 12 Sep 2008 08:56:02 -0300 (BRT)
Message-ID: <48CA58D6.1070700@digitro.com.br>
Date: Fri, 12 Sep 2008 08:56:06 -0300
From: Marcelo Schneider <marcelo.schneider@digitro.com.br>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Spawn an indexing thread on every update
References: <19444244.post@talk.nabble.com>	 <8c4e68610809120229s7db02303w47504d90f60a7340@mail.gmail.com> <f18c9dde0809120406t6d80d1ffia2be808d6f3ee35d@mail.gmail.com>
In-Reply-To: <f18c9dde0809120406t6d80d1ffia2be808d6f3ee35d@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Digitro-MailScanner-Information: Please contact the ISP for more information
X-MailScanner-ID: 17CFD1F90B51.3CC18
X-Digitro-MailScanner: Found to be clean
X-Digitro-MailScanner-From: marcelo.schneider@digitro.com.br
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No

Our application does exactly that: a background thread 
(Thread.MIN_PRIORITY) that buffers every "waiting" document and indexes 
every ~3 minutes, then reopens the searcher. No problems so far...


*
--
*Marcelo Frantz Schneider
SIC - TCO - Tecnologia em Engenharia do Conhecimento
DGITRO TECNOLOGIA*

*
Simon Willnauer escreveu:
> I guess similar problems have been discussed on the list over and over again.
> Why don't you use a single update thread which takes care of batch
> processing, commit threshold or performs commits after a certain time
> span.
> This would at least prevent you from spawning all the threads which
> is, as far as I can tell not necessary.
> Your update thread could also notify you searcher to reopen the index
> as soon as a change or a batch was commited.
> If you are looking for examples you might find some good examples in
> the Solr code.
>
> - simon
>
> On Fri, Sep 12, 2008 at 11:29 AM, Ian Lea <ian.lea@gmail.com> wrote:
>   
>> Hi
>>
>>
>> Why 15 mins?  Can you try lower values to get a balance between load
>> and freshness?
>>
>>
>>
>> --
>> Ian.
>>
>>
>> On Thu, Sep 11, 2008 at 9:43 PM, nobody <dailykos@budweiser.com> wrote:
>>     
>>> Hi,
>>>
>>>  In our application, I want users to be able to search for the updates they
>>> make almost immediately. Hence, whenever they update, I spawn a thread
>>> immediately to index. However, when the load on the application is very high
>>> the number of threads spawned increases, and this results in "cannot create
>>> native thread" error.
>>>
>>> We are thinking of running the indexing thread once in every 15 mins,
>>> through a scheduler, and buffer all the writes till the thread runs.
>>> However, this will result in stale results on the search. Please advice what
>>> is the best approach in this regard.
>>>
>>> -thanks
>>> --
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   

-- 
Esta mensagem foi verificada pelo sistema de antivrus da Dgitro e
acredita-se estar livre de perigo.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 12 11:59:40 2008
Return-Path: <java-user-return-36091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80367 invoked from network); 12 Sep 2008 11:59:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Sep 2008 11:59:39 -0000
Received: (qmail 41364 invoked by uid 500); 12 Sep 2008 11:59:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41330 invoked by uid 500); 12 Sep 2008 11:59:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41319 invoked by uid 99); 12 Sep 2008 11:59:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 04:59:30 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wstrzalka@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 11:58:31 +0000
Received: by gxk6 with SMTP id 6so11577003gxk.5
        for <java-user@lucene.apache.org>; Fri, 12 Sep 2008 04:58:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:date:from:x-mailer:x-priority
         :message-id:to:subject:mime-version:content-type
         :content-transfer-encoding;
        bh=22QNtosd3zF5OU+xNVWJOrsNJ1U0wvG/s/xg90CR960=;
        b=MbGItF8AyCuTiO9d9QXxtPCFUJQSFuCoslU+a5YVEgVDAC98Tcw73/+w339NbZHbA2
         Yhzig3+DN74/jJu4oZduEnu6BZGVXWBWAVMlDuEq+AjZY4PkgPx4hVY7hq2p84g1JR73
         vELO+E431X3wn/ylTg6jWWauEWXxreiN7Xs94=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:from:x-mailer:x-priority:message-id:to:subject:mime-version
         :content-type:content-transfer-encoding;
        b=ozQcm1fWimXe0UzBvl025vqTk4qXm+FN1JF45OB1Np1LFAbS1IWjbBjVyQlFlyl2EX
         Kh0WzRHrNXTieJXrn78aGvJRAy1vUfM+SIHeMzGTO5yUImJSqhTJEVORdL1lPlMP7M6g
         Q70Ic4wlyNiqjSDQogNUSCOCh0pdXa8PeOk6Q=
Received: by 10.103.212.20 with SMTP id o20mr2903553muq.22.1221220681836;
        Fri, 12 Sep 2008 04:58:01 -0700 (PDT)
Received: from D620 ( [87.206.64.119])
        by mx.google.com with ESMTPS id t10sm19102631muh.16.2008.09.12.04.57.59
        (version=SSLv3 cipher=OTHER);
        Fri, 12 Sep 2008 04:58:00 -0700 (PDT)
Date: Fri, 12 Sep 2008 13:57:49 +0200
From: =?iso-8859-2?Q?Wojciech_Strza=B3ka?= <wstrzalka@gmail.com>
X-Mailer: The Bat! (v3.99)
X-Priority: 3 (Normal)
Message-ID: <1221781428.20080912135749@gmail.com>
To: java-user@lucene.apache.org
Subject: Frequently updated fields
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi.

   I'm new to Lucene and I would like to get a few answers (they can
   be lame)

   I want to index large amount of emails using Lucene (maybe SOLR), not only
   the contents but also some metadata like state or flags. The
   problem is that the metadata will change during mail lifecycle,
   although much smaller updating this information will require
   reindex the whole mail content which I see performance bottleneck.

   I have the data in DB also so my first question is:

   - are there any best practices to implement my needs (querying both
   lucene & DB and then merging in memory?, close one eye and re-index
   the whole content on every metadata change? others?)

   - is at all Lucene good solution for my problem?

   - are there any plans to implement field updates in more efficient way then
   delete/insert the whole document? if yes what's the time horizon?


                                        Best regards
                                               Wojtek


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 12 12:23:11 2008
Return-Path: <java-user-return-36092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97379 invoked from network); 12 Sep 2008 12:23:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Sep 2008 12:23:11 -0000
Received: (qmail 67933 invoked by uid 500); 12 Sep 2008 12:23:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67902 invoked by uid 500); 12 Sep 2008 12:23:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67888 invoked by uid 99); 12 Sep 2008 12:23:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 05:23:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 74.125.92.24 as permitted sender)
Received: from [74.125.92.24] (HELO qw-out-2122.google.com) (74.125.92.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 12:22:03 +0000
Received: by qw-out-2122.google.com with SMTP id 5so78987qwi.53
        for <java-user@lucene.apache.org>; Fri, 12 Sep 2008 05:22:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=MdA7KWncHY17zs94vvQQarQNUeuo2pDSRG0WK/nvGjQ=;
        b=miewuLW3ggZ/7BcYduqmrFbgCNBs1RNbreUtWzoMNlI/BjTzjIifC+qFk/PYJ1kQyE
         JD273At3KHbGS37TVD+Pw1eYUcK92sY2vvrfmD0f6vH01SPhy5pV0yJaFOB3tYAB/BPd
         j9MzNQtTY/YFzv6E9ELkmsXSYdWDcOPYxmA6g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=NE5PPX3x0KuSjxbpsA8CHOQJ+420bLcqtv45+O3ZdBtpjG5zpvl5sYCFJypTK3U3rC
         jqJXCPqU9YtDSBhByOn293uiY4U+1uVjMg9u5qaRn11tauUJ2rK6XHyY7k8kPe3JMjXA
         1LiQGrziq4cAXaHW1kcF46pPU8Gxu8U6EUv2Q=
Received: by 10.215.67.14 with SMTP id u14mr3797501qak.3.1221222144994;
        Fri, 12 Sep 2008 05:22:24 -0700 (PDT)
Received: from kodapan.lan ( [83.249.107.81])
        by mx.google.com with ESMTPS id 7sm7396558qwf.0.2008.09.12.05.22.23
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 12 Sep 2008 05:22:24 -0700 (PDT)
Message-Id: <29F54650-9CFC-44AD-ADA4-9936D664A607@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <962ea6660809120325s3e8eabc1y4079906084d9b0f1@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: removing norms
Date: Fri, 12 Sep 2008 14:22:20 +0200
References: <962ea6660809120325s3e8eabc1y4079906084d9b0f1@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


12 sep 2008 kl. 12.25 skrev Bogdan Ghidireac:

> I have a large index and I want to remove the norms from a field. Is
> there a way to do this without reindexing everything ?

You could invoke IndexReader#setNorm(int, String, float) and set the  
value to 1f.


       karl



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 12 12:27:55 2008
Return-Path: <java-user-return-36093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98995 invoked from network); 12 Sep 2008 12:27:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Sep 2008 12:27:55 -0000
Received: (qmail 75199 invoked by uid 500); 12 Sep 2008 12:27:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75157 invoked by uid 500); 12 Sep 2008 12:27:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75143 invoked by uid 99); 12 Sep 2008 12:27:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 05:27:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [193.12.6.34] (HELO msgint02.mogul.com) (193.12.6.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 12:26:47 +0000
Received: from msgint02.mogul.com ([172.17.1.7]) by msgint02.mogul.com
 ([172.17.1.7]) with mapi; Fri, 12 Sep 2008 14:28:20 +0200
From: =?windows-1257?Q?Jimi_Hulleg=E5rd?= <jimi.hullegard@mogul.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 12 Sep 2008 14:28:09 +0200
Subject: RE: Frequently updated fields
Thread-Topic: Frequently updated fields
Thread-Index: AckUzy4/TFkTrkoIS+CruE5S8ton3gAA4YSw
Message-ID: <D8E6BD3AD2634843B58AFF6A94FE246202D7A5A678@msgint02.mogul.com>
In-Reply-To: <1221781428.20080912135749@gmail.com>
Accept-Language: sv-SE
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: sv-SE
Content-Type: text/plain; charset="windows-1257"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

> -----Original Message-----
> From: Wojciech Strza=F9ka [mailto:wstrzalka@gmail.com]
> Sent: den 12 september 2008 13:58
> To: java-user@lucene.apache.org
> Subject: Frequently updated fields
>
> Hi.
>
>    I'm new to Lucene and I would like to get a few answers (they can
>    be lame)
>
>    I want to index large amount of emails using Lucene (maybe
> SOLR), not only
>    the contents but also some metadata like state or flags. The
>    problem is that the metadata will change during mail lifecycle,
>    although much smaller updating this information will require
>    reindex the whole mail content which I see performance bottleneck.
>
>    I have the data in DB also so my first question is:
>
>    - are there any best practices to implement my needs (querying both
>    lucene & DB and then merging in memory?, close one eye and re-index
>    the whole content on every metadata change? others?)

Maybe two separate Lucene indexes? Then you can have the data not changed o=
ften in one index, and all other data in the other index.
Or splitting one single mail into multiple documents, in the same regard.


/Jimi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 12 12:36:58 2008
Return-Path: <java-user-return-36094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3234 invoked from network); 12 Sep 2008 12:36:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Sep 2008 12:36:58 -0000
Received: (qmail 90002 invoked by uid 500); 12 Sep 2008 12:36:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89634 invoked by uid 500); 12 Sep 2008 12:36:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89623 invoked by uid 99); 12 Sep 2008 12:36:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 05:36:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 209.85.128.188 as permitted sender)
Received: from [209.85.128.188] (HELO fk-out-0910.google.com) (209.85.128.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 12:35:49 +0000
Received: by fk-out-0910.google.com with SMTP id 18so684936fkq.5
        for <java-user@lucene.apache.org>; Fri, 12 Sep 2008 05:36:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:x-priority:date:references:x-mailer;
        bh=/IASTpqg6mnOFu8ImpX4+rcZSplZ5qdpYvLscsQmICI=;
        b=TCuLjBq6rdmF5o7Bad358G/eOVN6Y6NPb7v/zb/QIRsjn8NTBLXLn7uSCDkoQ+GcQQ
         YyUZVR5jHbz9E0ziIvYJBNmNSXu4LmzuaeVhXDS1rK6zjiCpwLrtWIiZ2GF537DvswEE
         fJVZhcPZhbD98gsue5EHvcbcn4e7h2uSCnA1c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:x-priority:date
         :references:x-mailer;
        b=uI1lI7XHdvqkffiYRmWsQzDPYSvPNC/LUuFsdjvHCSZWoZ6txlfQUevVe5UwY3ZTVT
         8OIDVEz5s6C9ohgotPpHT0rwsL9cL4wMf4EV+KLqoK/xAylMo1l0OhamHY/IXrU1DFUR
         Lj3Q1yGXJBcj2DexQNC0QlJrpzh06IJkrc1R4=
Received: by 10.181.16.6 with SMTP id t6mr3177834bki.81.1221222970550;
        Fri, 12 Sep 2008 05:36:10 -0700 (PDT)
Received: from kodapan.lan ( [83.249.107.81])
        by mx.google.com with ESMTPS id f3sm9226511nfh.2.2008.09.12.05.36.09
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 12 Sep 2008 05:36:10 -0700 (PDT)
Message-Id: <6E7487CD-2836-4B3C-9940-67F989F018E8@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <1221781428.20080912135749@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Frequently updated fields
X-Priority: 3 (Normal)
Date: Fri, 12 Sep 2008 14:36:08 +0200
References: <1221781428.20080912135749@gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Wojciech,

can you please give us a bit more specific information about the meta  
data fields that will change? I would recommend you looking at  
creating filters from your primary persistency for query clauses such  
as unread/read, mailbox folders, et c.

       karl

12 sep 2008 kl. 13.57 skrev Wojciech Strza?ka:

> Hi.
>
>   I'm new to Lucene and I would like to get a few answers (they can
>   be lame)
>
>   I want to index large amount of emails using Lucene (maybe SOLR),  
> not only
>   the contents but also some metadata like state or flags. The
>   problem is that the metadata will change during mail lifecycle,
>   although much smaller updating this information will require
>   reindex the whole mail content which I see performance bottleneck.
>
>   I have the data in DB also so my first question is:
>
>   - are there any best practices to implement my needs (querying both
>   lucene & DB and then merging in memory?, close one eye and re-index
>   the whole content on every metadata change? others?)
>
>   - is at all Lucene good solution for my problem?
>
>   - are there any plans to implement field updates in more efficient  
> way then
>   delete/insert the whole document? if yes what's the time horizon?
>
>
>                                        Best regards
>                                               Wojtek
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 12 12:41:23 2008
Return-Path: <java-user-return-36095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5197 invoked from network); 12 Sep 2008 12:41:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Sep 2008 12:41:22 -0000
Received: (qmail 8081 invoked by uid 500); 12 Sep 2008 12:41:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8054 invoked by uid 500); 12 Sep 2008 12:41:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8043 invoked by uid 99); 12 Sep 2008 12:41:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 05:41:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wstrzalka@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 12:40:13 +0000
Received: by yx-out-2324.google.com with SMTP id 3so294985yxj.5
        for <java-user@lucene.apache.org>; Fri, 12 Sep 2008 05:40:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:date:from:x-mailer:x-priority
         :message-id:to:cc:subject:in-reply-to:references:mime-version
         :content-type:content-transfer-encoding;
        bh=/oDB7z+Xo2+NdfdFw5odzN1y5cvdHAXPLx0ULBa6Auw=;
        b=DGXZjtwo2IVYslinLsAh0d6zvegg4I/rWWON0M9mLIxU1DiDZUVZIXwaMYSygGO7Oy
         XkDMHlfTCyAwKJNlm2xblpC+lQJT++SoMJRqSq8TJZVf5hu1k7eii/MoR99I8iY+lWzr
         6gN9GY8Z8g6G3GJ9ufSICuF4g6ubl6Q/Mm8N0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:from:x-mailer:x-priority:message-id:to:cc:subject:in-reply-to
         :references:mime-version:content-type:content-transfer-encoding;
        b=xW07A4iRUEwdCmokg59Hurp8UBBpUnvq5g4lY2E/GJuVTDR+zHeGKxbWYs6J200CUE
         aa+Sx+NIMFplQQMP2BN4CDGU1JyHEKKRP5EFPW7xRWJEOY+SZn6znHfIOCEEgXWNXy6M
         WrC2Yxj6Fqv8C1i3MZLJEcFO0Ly0aNyWhsHBg=
Received: by 10.102.234.18 with SMTP id g18mr2915124muh.105.1221223243226;
        Fri, 12 Sep 2008 05:40:43 -0700 (PDT)
Received: from D620 ( [87.206.64.119])
        by mx.google.com with ESMTPS id y2sm4618119mug.2.2008.09.12.05.40.41
        (version=SSLv3 cipher=OTHER);
        Fri, 12 Sep 2008 05:40:42 -0700 (PDT)
Date: Fri, 12 Sep 2008 14:40:29 +0200
From: =?windows-1257?Q?Wojciech_Strza=F9ka?= <wstrzalka@gmail.com>
X-Mailer: The Bat! (v3.99)
X-Priority: 3 (Normal)
Message-ID: <454718744.20080912144029@gmail.com>
To: =?windows-1257?Q?Jimi_Hulleg=E5rd?= <jimi.hullegard@mogul.com>
CC: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Re[2]: Frequently updated fields
In-Reply-To: <D8E6BD3AD2634843B58AFF6A94FE246202D7A5A678@msgint02.mogul.com>
References: <1221781428.20080912135749@gmail.com> <D8E6BD3AD2634843B58AFF6A94FE246202D7A5A678@msgint02.mogul.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=windows-1257
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

=0D=0A  Thanks for reply.
 =20
  Generally good idea and I like it - almost :) We just need to tweak
  it a little more.
 =20
  What if I have to search for both fields at the same time?
  Is there any way to do something similiar to SQL JOIN on the two
  documents / indexes? (I don't think so)
  I think cascading queries will not work (first one can return large
  result set, so the second query could grow to large size).


 =20
 =20

>> -----Original Message-----
>> From: Wojciech Strza=F9ka [mailto:wstrzalka@gmail.com]
>> Sent: den 12 september 2008 13:58
>> To: java-user@lucene.apache.org
>> Subject: Frequently updated fields
>>
>> Hi.
>>
>>    I'm new to Lucene and I would like to get a few answers (they can
>>    be lame)
>>
>>    I want to index large amount of emails using Lucene (maybe
>> SOLR), not only
>>    the contents but also some metadata like state or flags. The
>>    problem is that the metadata will change during mail lifecycle,
>>    although much smaller updating this information will require
>>    reindex the whole mail content which I see performance bottleneck.
>>
>>    I have the data in DB also so my first question is:
>>
>>    - are there any best practices to implement my needs (querying both
>>    lucene & DB and then merging in memory?, close one eye and re-index
>>    the whole content on every metadata change? others?)

> Maybe two separate Lucene indexes? Then you can have the data not
> changed often in one index, and all other data in the other index.
> Or splitting one single mail into multiple documents, in the same regard.


> /Jimi

> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



--=20
Pozdrowienia,
 Wojciech Strza=F9ka


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 12 12:50:30 2008
Return-Path: <java-user-return-36096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10251 invoked from network); 12 Sep 2008 12:50:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Sep 2008 12:50:30 -0000
Received: (qmail 23324 invoked by uid 500); 12 Sep 2008 12:50:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23302 invoked by uid 500); 12 Sep 2008 12:50:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23283 invoked by uid 99); 12 Sep 2008 12:50:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 05:50:16 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 12:49:19 +0000
Received: by py-out-1112.google.com with SMTP id z74so721138pyg.9
        for <java-user@lucene.apache.org>; Fri, 12 Sep 2008 05:49:50 -0700 (PDT)
Received: by 10.114.15.1 with SMTP id 1mr3287226wao.108.1221223789625;
        Fri, 12 Sep 2008 05:49:49 -0700 (PDT)
Received: by 10.114.108.9 with HTTP; Fri, 12 Sep 2008 05:49:49 -0700 (PDT)
Message-ID: <962ea6660809120549g4914448bwfa8006b792938890@mail.gmail.com>
Date: Fri, 12 Sep 2008 15:49:49 +0300
From: "Bogdan Ghidireac" <bogdan@ecstend.com>
To: java-user@lucene.apache.org
Subject: Re: removing norms
In-Reply-To: <29F54650-9CFC-44AD-ADA4-9936D664A607@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <962ea6660809120325s3e8eabc1y4079906084d9b0f1@mail.gmail.com>
	 <29F54650-9CFC-44AD-ADA4-9936D664A607@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, but the norms will be loaded at the search time.. I want to
remove them because I don't have enough memory.

Bogdan

On Fri, Sep 12, 2008 at 3:22 PM, Karl Wettin <karl.wettin@gmail.com> wrote:
>
> 12 sep 2008 kl. 12.25 skrev Bogdan Ghidireac:
>
>> I have a large index and I want to remove the norms from a field. Is
>> there a way to do this without reindexing everything ?
>
> You could invoke IndexReader#setNorm(int, String, float) and set the value
> to 1f.
>
>
>      karl
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 12 12:52:04 2008
Return-Path: <java-user-return-36097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11226 invoked from network); 12 Sep 2008 12:52:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Sep 2008 12:52:04 -0000
Received: (qmail 27773 invoked by uid 500); 12 Sep 2008 12:51:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27746 invoked by uid 500); 12 Sep 2008 12:51:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27735 invoked by uid 99); 12 Sep 2008 12:51:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 05:51:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wstrzalka@gmail.com designates 209.85.132.244 as permitted sender)
Received: from [209.85.132.244] (HELO an-out-0708.google.com) (209.85.132.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 12:50:55 +0000
Received: by an-out-0708.google.com with SMTP id c37so96683anc.49
        for <java-user@lucene.apache.org>; Fri, 12 Sep 2008 05:51:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:date:from:x-mailer:x-priority
         :message-id:to:cc:subject:in-reply-to:references:mime-version
         :content-type:content-transfer-encoding;
        bh=JabrNHTqOk9htbEN8tXu4nGXAKb4GOcwTRLgD8+G7Ns=;
        b=hTZQBvn3MzZvT5pFuc0O9iYoVKj+ybUivjBT/vi2eCc/BYIs3uC5GOP9/WASquhFip
         T+nhseJpAOVnRdBhVrIY919gTMt0Np8ro7hR23DZ0wEs4IFbxLfSRAWi20kZM5H3GSq0
         kMzSe3ZiNiNMgNBr7zL6ZbU3+wCJGlkpRndGM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:from:x-mailer:x-priority:message-id:to:cc:subject:in-reply-to
         :references:mime-version:content-type:content-transfer-encoding;
        b=vjOn5eyfBJuT/nhqTWq4jbjh4pNGih4s2IlYGdEd6XJ5Wfb+hgHGSY58kZnkgKUGAh
         htvTvBl7rYSOdSKmSavZ2oZD1JsVV7zmNVI5QXMclQxdE+5bAzobntcqSoS4q1ummP4B
         W2c2CsvLvgobXSw4eQCe5uY8GliATcGrF46Sg=
Received: by 10.103.211.3 with SMTP id n3mr2932871muq.43.1221223886021;
        Fri, 12 Sep 2008 05:51:26 -0700 (PDT)
Received: from D620 ( [87.206.64.119])
        by mx.google.com with ESMTPS id y2sm5686170mug.2.2008.09.12.05.51.24
        (version=SSLv3 cipher=OTHER);
        Fri, 12 Sep 2008 05:51:24 -0700 (PDT)
Date: Fri, 12 Sep 2008 14:51:11 +0200
From: =?iso-8859-2?Q?Wojciech_Strza=B3ka?= <wstrzalka@gmail.com>
X-Mailer: The Bat! (v3.99)
X-Priority: 3 (Normal)
Message-ID: <1999039569.20080912145111@gmail.com>
To: Karl Wettin <karl.wettin@gmail.com>
CC: java-user@lucene.apache.org
Subject: Re[2]: Frequently updated fields
In-Reply-To: <6E7487CD-2836-4B3C-9940-67F989F018E8@gmail.com>
References: <1221781428.20080912135749@gmail.com> <6E7487CD-2836-4B3C-9940-67F989F018E8@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-2
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

=0D=0AThe most changing fields will be I think:
  Status (read/unread):  in fact I'm affraid of this at most - any
                         mail incoming to the system will need to be indexe=
d at least twice
  Flags:   0..n values from enum
  Tags:    0..n values from enum

Of course all the other fields can also change - even content in draft mess=
ages
(it's live content, not archival) - but in such a case I'm ready to go
with the re-indexing.


> Hi Wojciech,

> can you please give us a bit more specific information about the meta
> data fields that will change? I would recommend you looking at =20
> creating filters from your primary persistency for query clauses such
> as unread/read, mailbox folders, et c.

>        karl

> 12 sep 2008 kl. 13.57 skrev Wojciech Strza?ka:

>> Hi.
>>
>>   I'm new to Lucene and I would like to get a few answers (they can
>>   be lame)
>>
>>   I want to index large amount of emails using Lucene (maybe SOLR), =20
>> not only
>>   the contents but also some metadata like state or flags. The
>>   problem is that the metadata will change during mail lifecycle,
>>   although much smaller updating this information will require
>>   reindex the whole mail content which I see performance bottleneck.
>>
>>   I have the data in DB also so my first question is:
>>
>>   - are there any best practices to implement my needs (querying both
>>   lucene & DB and then merging in memory?, close one eye and re-index
>>   the whole content on every metadata change? others?)
>>
>>   - is at all Lucene good solution for my problem?
>>
>>   - are there any plans to implement field updates in more efficient =20
>> way then
>>   delete/insert the whole document? if yes what's the time horizon?
>>
>>
>>                                        Best regards
>>                                               Wojtek
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>


> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



--=20
Pozdrowienia,
 Wojciech Strza=B3ka


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 12 13:37:54 2008
Return-Path: <java-user-return-36098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35587 invoked from network); 12 Sep 2008 13:37:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Sep 2008 13:37:53 -0000
Received: (qmail 12578 invoked by uid 500); 12 Sep 2008 13:37:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12539 invoked by uid 500); 12 Sep 2008 13:37:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12523 invoked by uid 99); 12 Sep 2008 13:37:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 06:37:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 74.125.46.31 as permitted sender)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 13:36:45 +0000
Received: by yw-out-2324.google.com with SMTP id 3so304621ywj.5
        for <java-user@lucene.apache.org>; Fri, 12 Sep 2008 06:37:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:x-priority:date:references:x-mailer;
        bh=chtGy3u6Ff5Yk28YeZVol+j6r0oShWfqqkRDxTuP8Cg=;
        b=PFBPIbR8X43Kb+msb+Km1ewboeVGaXclTMY7ySgGOo3ajEo4HHNuN0BH345MvNfZI/
         TSeQH+2KmZpdsoKkhoCBmKlUClG967FxWellLUXNYm77sU3xNX7TL626YTHmrpdDM9Wn
         TtLD8eAHR1uxPsV1FvxlRvJrgyTQbLL8nHbrc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:x-priority:date
         :references:x-mailer;
        b=oBXVpYcu7gV6SvPIsg6VlwAMsiht+Wa0T+FfHK51/2bYS8Vg4ms6oseyyOZPy/NjVt
         JZqN51iZmkoNzTXRDptHJITSbOD1evCUlwSmf6QPIHYlvo7nTYkn06da3Vg25qs43vLf
         dLUdC+xTboIKvtYiWVda0dNP4rkMJl9gSRcjk=
Received: by 10.66.248.5 with SMTP id v5mr9364606ugh.76.1221226635339;
        Fri, 12 Sep 2008 06:37:15 -0700 (PDT)
Received: from kodapan.lan ( [83.249.107.81])
        by mx.google.com with ESMTPS id g30sm22492727ugd.14.2008.09.12.06.37.13
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 12 Sep 2008 06:37:13 -0700 (PDT)
Message-Id: <C4C96291-472A-498F-9EA5-43B44F589A63@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <1999039569.20080912145111@gmail.com>
Content-Type: text/plain; charset=ISO-8859-2; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Frequently updated fields
X-Priority: 3 (Normal)
Date: Fri, 12 Sep 2008 15:37:12 +0200
References: <1221781428.20080912135749@gmail.com> <6E7487CD-2836-4B3C-9940-67F989F018E8@gmail.com> <1999039569.20080912145111@gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


12 sep 2008 kl. 14.51 skrev Wojciech Strza=B3ka:

>
> The most changing fields will be I think:
>  Status (read/unread):  in fact I'm affraid of this at most - any
>                         mail incoming to the system will need to be =20=

> indexed at least twice

This is why I recommended you to use a filter created from your =20
database for use in queries that require read/unread clauses, rather =20
than reindexing your documents. As the read/unread flag is updated you =20=

just update the filter and don't touch the index more than looking up =20=

what document number a specific email is  represented by in the index.

Using a filter will also have the side effect of making your queries a =20=

lot speedier compared to a TermQuery.


     karl



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 12 13:39:24 2008
Return-Path: <java-user-return-36099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35966 invoked from network); 12 Sep 2008 13:39:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Sep 2008 13:39:24 -0000
Received: (qmail 17335 invoked by uid 500); 12 Sep 2008 13:39:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17304 invoked by uid 500); 12 Sep 2008 13:39:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17293 invoked by uid 99); 12 Sep 2008 13:39:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 06:39:13 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.234 as permitted sender)
Received: from [209.85.198.234] (HELO rv-out-0506.google.com) (209.85.198.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 13:38:15 +0000
Received: by rv-out-0506.google.com with SMTP id f6so820686rvb.5
        for <java-user@lucene.apache.org>; Fri, 12 Sep 2008 06:38:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=MXzzLZwcNayRrnLVxc7144MsWBBa+OH5EY3U9S3Pdg4=;
        b=qkv6atP6Sevk91AmNSi2Wb0E+QmpTc/SDsU5U/SBGTicsNoNlowE4z8eB33dRCLYAx
         5DeBwG4n0J4OYTzq2o3qDWYGHMb3pdzjPzI4aHZIkwN4dkGoDb0UejknaWXL1KFOfFLF
         cv1qfAOIqIld66l+9A5AZyriXpPHxKbN+zz2Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=MGOI7fMr945uOjuOCr0N7P4Za0kD6lQqhsKW8PsthSLtUWezFW0D/w/iHY99enRo+N
         avyKsv/W+mttQpwcnHQtuVa1iS8Sgawuq01pT0K+DsBTsxe4sdc9kqe04aTN5AHVnKfs
         TvHMf7FupGED3hgMa46yNuc1oWhbX/41jYeag=
Received: by 10.141.146.4 with SMTP id y4mr2604312rvn.272.1221226727554;
        Fri, 12 Sep 2008 06:38:47 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Fri, 12 Sep 2008 06:38:47 -0700 (PDT)
Message-ID: <359a92830809120638i7c6b470akc9a2c0b9e891ed7b@mail.gmail.com>
Date: Fri, 12 Sep 2008 09:38:47 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Re[2]: Frequently updated fields
In-Reply-To: <1999039569.20080912145111@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_25381_28011212.1221226727542"
References: <1221781428.20080912135749@gmail.com>
	 <6E7487CD-2836-4B3C-9940-67F989F018E8@gmail.com>
	 <1999039569.20080912145111@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_25381_28011212.1221226727542
Content-Type: text/plain; charset=ISO-8859-2
Content-Transfer-Encoding: base64
Content-Disposition: inline

SWYgeW91IHNlYXJjaCB0aGUgYXJjaGl2ZSwgdGhpcyB2ZXJ5IHRvcGljIGhhcyBiZWVuCmRpc2N1
c3NlZCBtYW55IHRpbWVzLiBZb3UnZSBmaW5kIGEgd2VhbHRoIG9mCmRpc2N1c3Npb24gYW5kIG1v
cmUgdGhhbiBhIGZldyBvcHRpb25zCm91dGxpbmVkIHRoZXJlCgpCZXN0CkVyaWNrCgoyMDA4Lzkv
MTIgV29qY2llY2ggU3RyemGza2EgPHdzdHJ6YWxrYUBnbWFpbC5jb20+Cgo+Cj4gVGhlIG1vc3Qg
Y2hhbmdpbmcgZmllbGRzIHdpbGwgYmUgSSB0aGluazoKPiAgU3RhdHVzIChyZWFkL3VucmVhZCk6
ICBpbiBmYWN0IEknbSBhZmZyYWlkIG9mIHRoaXMgYXQgbW9zdCAtIGFueQo+ICAgICAgICAgICAg
ICAgICAgICAgICAgIG1haWwgaW5jb21pbmcgdG8gdGhlIHN5c3RlbSB3aWxsIG5lZWQgdG8gYmUg
aW5kZXhlZAo+IGF0IGxlYXN0IHR3aWNlCj4gIEZsYWdzOiAgIDAuLm4gdmFsdWVzIGZyb20gZW51
bQo+ICBUYWdzOiAgICAwLi5uIHZhbHVlcyBmcm9tIGVudW0KPgo+IE9mIGNvdXJzZSBhbGwgdGhl
IG90aGVyIGZpZWxkcyBjYW4gYWxzbyBjaGFuZ2UgLSBldmVuIGNvbnRlbnQgaW4gZHJhZnQKPiBt
ZXNzYWdlcwo+IChpdCdzIGxpdmUgY29udGVudCwgbm90IGFyY2hpdmFsKSAtIGJ1dCBpbiBzdWNo
IGEgY2FzZSBJJ20gcmVhZHkgdG8gZ28KPiB3aXRoIHRoZSByZS1pbmRleGluZy4KPgo+Cj4gPiBI
aSBXb2pjaWVjaCwKPgo+ID4gY2FuIHlvdSBwbGVhc2UgZ2l2ZSB1cyBhIGJpdCBtb3JlIHNwZWNp
ZmljIGluZm9ybWF0aW9uIGFib3V0IHRoZSBtZXRhCj4gPiBkYXRhIGZpZWxkcyB0aGF0IHdpbGwg
Y2hhbmdlPyBJIHdvdWxkIHJlY29tbWVuZCB5b3UgbG9va2luZyBhdAo+ID4gY3JlYXRpbmcgZmls
dGVycyBmcm9tIHlvdXIgcHJpbWFyeSBwZXJzaXN0ZW5jeSBmb3IgcXVlcnkgY2xhdXNlcyBzdWNo
Cj4gPiBhcyB1bnJlYWQvcmVhZCwgbWFpbGJveCBmb2xkZXJzLCBldCBjLgo+Cj4gPiAgICAgICAg
a2FybAo+Cj4gPiAxMiBzZXAgMjAwOCBrbC4gMTMuNTcgc2tyZXYgV29qY2llY2ggU3RyemE/a2E6
Cj4KPiA+PiBIaS4KPiA+Pgo+ID4+ICAgSSdtIG5ldyB0byBMdWNlbmUgYW5kIEkgd291bGQgbGlr
ZSB0byBnZXQgYSBmZXcgYW5zd2VycyAodGhleSBjYW4KPiA+PiAgIGJlIGxhbWUpCj4gPj4KPiA+
PiAgIEkgd2FudCB0byBpbmRleCBsYXJnZSBhbW91bnQgb2YgZW1haWxzIHVzaW5nIEx1Y2VuZSAo
bWF5YmUgU09MUiksCj4gPj4gbm90IG9ubHkKPiA+PiAgIHRoZSBjb250ZW50cyBidXQgYWxzbyBz
b21lIG1ldGFkYXRhIGxpa2Ugc3RhdGUgb3IgZmxhZ3MuIFRoZQo+ID4+ICAgcHJvYmxlbSBpcyB0
aGF0IHRoZSBtZXRhZGF0YSB3aWxsIGNoYW5nZSBkdXJpbmcgbWFpbCBsaWZlY3ljbGUsCj4gPj4g
ICBhbHRob3VnaCBtdWNoIHNtYWxsZXIgdXBkYXRpbmcgdGhpcyBpbmZvcm1hdGlvbiB3aWxsIHJl
cXVpcmUKPiA+PiAgIHJlaW5kZXggdGhlIHdob2xlIG1haWwgY29udGVudCB3aGljaCBJIHNlZSBw
ZXJmb3JtYW5jZSBib3R0bGVuZWNrLgo+ID4+Cj4gPj4gICBJIGhhdmUgdGhlIGRhdGEgaW4gREIg
YWxzbyBzbyBteSBmaXJzdCBxdWVzdGlvbiBpczoKPiA+Pgo+ID4+ICAgLSBhcmUgdGhlcmUgYW55
IGJlc3QgcHJhY3RpY2VzIHRvIGltcGxlbWVudCBteSBuZWVkcyAocXVlcnlpbmcgYm90aAo+ID4+
ICAgbHVjZW5lICYgREIgYW5kIHRoZW4gbWVyZ2luZyBpbiBtZW1vcnk/LCBjbG9zZSBvbmUgZXll
IGFuZCByZS1pbmRleAo+ID4+ICAgdGhlIHdob2xlIGNvbnRlbnQgb24gZXZlcnkgbWV0YWRhdGEg
Y2hhbmdlPyBvdGhlcnM/KQo+ID4+Cj4gPj4gICAtIGlzIGF0IGFsbCBMdWNlbmUgZ29vZCBzb2x1
dGlvbiBmb3IgbXkgcHJvYmxlbT8KPiA+Pgo+ID4+ICAgLSBhcmUgdGhlcmUgYW55IHBsYW5zIHRv
IGltcGxlbWVudCBmaWVsZCB1cGRhdGVzIGluIG1vcmUgZWZmaWNpZW50Cj4gPj4gd2F5IHRoZW4K
PiA+PiAgIGRlbGV0ZS9pbnNlcnQgdGhlIHdob2xlIGRvY3VtZW50PyBpZiB5ZXMgd2hhdCdzIHRo
ZSB0aW1lIGhvcml6b24/Cj4gPj4KPiA+Pgo+ID4+ICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIEJlc3QgcmVnYXJkcwo+ID4+ICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBXb2p0ZWsKPiA+Pgo+ID4+Cj4gPj4gLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4g
Pj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5h
cGFjaGUub3JnCj4gPj4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2Vy
LWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcKPiA+Pgo+Cj4KPiA+IC0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+ID4gVG8g
dW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUu
b3JnCj4gPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBs
dWNlbmUuYXBhY2hlLm9yZwo+Cj4KPgo+IC0tCj4gUG96ZHJvd2llbmlhLAo+ICBXb2pjaWVjaCBT
dHJ6YbNrYQo+Cj4KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZh
LXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPiBGb3IgYWRkaXRpb25hbCBjb21t
YW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+Cj4K
------=_Part_25381_28011212.1221226727542--

From java-user-return-36100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 12 14:03:46 2008
Return-Path: <java-user-return-36100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52461 invoked from network); 12 Sep 2008 14:03:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Sep 2008 14:03:46 -0000
Received: (qmail 56395 invoked by uid 500); 12 Sep 2008 14:03:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56360 invoked by uid 500); 12 Sep 2008 14:03:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56349 invoked by uid 99); 12 Sep 2008 14:03:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 07:03:36 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.214] (HELO web26003.mail.ukl.yahoo.com) (217.12.10.214)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 12 Sep 2008 14:02:35 +0000
Received: (qmail 58349 invoked by uid 60001); 12 Sep 2008 14:03:04 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=EX+pVz23TiVK4K1mOaE7gkTZ86DrxzV+uieUksgGJ1EiW7tMBQKc7qR/4r6Jodbkh3VLFp1JSBzFGVNSbgYEDo5XQo0z0rudGYh8ZOqw2RoD+jBWJyaWBf2wwvA5dWQc4PCmbGs3piVxovvIBsrOnZSn0Ynx1NR6yhrDVDqNawM=;
X-YMail-OSG: q5k0cjwVM1mAQOdHIAnVI0ra5iUPwOYZJryY5j6VuExr.NUhpbLRCRH_gSi_tEWvusr41x1TJIhMxJYPL_7PPejUukqZZmees8LGJ78JLuFR0QnIbAapuO1m0JDNwkuMP0I.U2TlmPLdPpnlNNa9XcJd
Received: from [193.36.230.96] by web26003.mail.ukl.yahoo.com via HTTP; Fri, 12 Sep 2008 14:03:04 GMT
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Fri, 12 Sep 2008 14:03:04 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: TermsFilter and MUST
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <920418.57669.qm@web26003.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

TermsFilter has taken the relatively easy option of ORing terms and this is=
 inexpensive to construct.=0A=0AAdding more complex features (mixes of MUST=
/SHOULD/NOT clauses) starts to require the sorts of optimisations you see i=
n BooleanQuery (MUST clauses accelerating processing of other clauses throu=
gh use of skipTo).=0AFor this reason I would not want to reproduce that log=
ic and instead suggest you use some of the existing classes to acheive what=
 you are after i.e something like this =0A        BooleanQuery bq=3Dnew Boo=
leanQuery();=0A        bq.add(new BooleanClause(new TermQuery(new Term("gen=
der","female")),BooleanClause.Occur.MUST));=0A        bq.add(new BooleanCla=
use(new TermQuery(new Term("hair","blond")),BooleanClause.Occur.MUST));    =
    =0A        QueryWrapperFilter qf =3D new QueryWrapperFilter(bq);=0A=0A=
=0AThere is a BooleanFilter that looks from the outside to have the same se=
mantics as BooleanQuery (shoulds/musts etc) but this is reliant on calling =
each clause independently in turn to produce a Bitset (or DocIdSet in futur=
e) then combining them. This has none of the "skipTo" optimisations in Bool=
eanQuery's parallel streaming of clause output.=0A=0ACheers,=0AMark=0A=0A=
=0A=0A=0A----- Original Message ----=0AFrom: Konstantyn Smirnov <injecteer@=
yahoo.com>=0ATo: java-user@lucene.apache.org=0ASent: Friday, 12 September, =
2008 11:18:17=0ASubject: TermsFilter and MUST=0A=0A=0AHi gents,=0A=0Ais it =
possible to use TermsFilter with the 'MUST' occurence rule, instead of=0Ath=
e 'SHOULD'?=0A=0AIn the code:=0A=0Adef tf =3D new TermsFilter()=0Afor( some=
 terms ){=0A  tf.addTerm( new Term( .... ) )=0A}=0A=0AI want that all terms=
 MUST limit the hit list.=0A=0AThanks in advance=0A-- =0AView this message =
in context: http://www.nabble.com/TermsFilter-and-MUST-tp19453184p19453184.=
html=0ASent from the Lucene - Java Users mailing list archive at Nabble.com=
.=0A=0A=0A-----------------------------------------------------------------=
----=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFo=
r additional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A   =
   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 12 14:33:07 2008
Return-Path: <java-user-return-36101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70826 invoked from network); 12 Sep 2008 14:33:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Sep 2008 14:33:07 -0000
Received: (qmail 18900 invoked by uid 500); 12 Sep 2008 14:32:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18632 invoked by uid 500); 12 Sep 2008 14:32:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18621 invoked by uid 99); 12 Sep 2008 14:32:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 07:32:57 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 14:31:58 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Ke9hF-0006QA-TB
	for java-user@lucene.apache.org; Fri, 12 Sep 2008 07:32:29 -0700
Message-ID: <19457142.post@talk.nabble.com>
Date: Fri, 12 Sep 2008 07:32:29 -0700 (PDT)
From: Konstantyn Smirnov <injecteer@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: TermsFilter and MUST
In-Reply-To: <920418.57669.qm@web26003.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: injecteer@yahoo.com
References: <19453184.post@talk.nabble.com> <920418.57669.qm@web26003.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Mark,

I ended up implementing a MandatoryTermsFilter, which looks like:

class MandatoryTermsFilter extends Filter {
  
  List terms 
  
  BitSet bits( IndexReader reader ){
    int size = reader.maxDoc()
    BitSet result = new BitSet( size )
    BitSet andMask = new BitSet( size )
    andMask.set 0, size - 1, true

    terms.each{ term ->
      result.clear()
      TermDocs td = reader.termDocs( term )
      while( td.next() ){ result.set td.doc() }
      andMask &= result
    }
    return andMask
  }
  
}

here I'm AND-ing each bitset. Does it look ok?
-- 
View this message in context: http://www.nabble.com/TermsFilter-and-MUST-tp19453184p19457142.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 12 15:11:37 2008
Return-Path: <java-user-return-36102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98401 invoked from network); 12 Sep 2008 15:11:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Sep 2008 15:11:37 -0000
Received: (qmail 93960 invoked by uid 500); 12 Sep 2008 15:11:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93936 invoked by uid 500); 12 Sep 2008 15:11:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93912 invoked by uid 99); 12 Sep 2008 15:11:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 08:11:26 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.213] (HELO web26002.mail.ukl.yahoo.com) (217.12.10.213)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 12 Sep 2008 15:10:26 +0000
Received: (qmail 83622 invoked by uid 60001); 12 Sep 2008 15:09:55 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=mYzKQEZAfJvZNlbGDOfTDzeCtgw8q+qFx6ZNT+NrH4IrXYfIfLEFbWfypzE5EvWYpUvxdpflgBLSCQ/lvEE8sHB1+5g2R3AFUCBxvRrDYX9akznFRuoxeVSqJv70XsGmRrs8wxuCIkOx4cd4Cqyl/sOe4GQ6uGNBCohJh7446Fc=;
X-YMail-OSG: YCq0srEVM1kjqU_Mfc_87Q1cSGCgChjx_ROpcAoF7rLV_kvlTs46mLx_8Ibx9pdA5dq0TW_A0N9kfF3RDD.Y5eGriomEv6FKc2ShsmIr4XlBD9vRzBLGnsTTB._0VUZYeagnA_OC0q3sGPjZ2NgpPyfZ
Received: from [193.36.230.96] by web26002.mail.ukl.yahoo.com via HTTP; Fri, 12 Sep 2008 15:09:55 GMT
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Fri, 12 Sep 2008 15:09:55 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: TermsFilter and MUST
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <759151.83448.qm@web26002.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

>>here I'm AND-ing each bitset. Does it look ok?=0A=0AIn principle it looks=
 like it will work fine but the BooleanQuery approach I described may prove=
 to be faster on large datasets because ultimately td.skipTo() will be call=
ed to avoid excessive disk reads.=0A=0ACheers=0AMark=0A=0A=0A=0A----- Origi=
nal Message ----=0AFrom: Konstantyn Smirnov <injecteer@yahoo.com>=0ATo: jav=
a-user@lucene.apache.org=0ASent: Friday, 12 September, 2008 15:32:29=0ASubj=
ect: Re: TermsFilter and MUST=0A=0A=0AHi Mark,=0A=0AI ended up implementing=
 a MandatoryTermsFilter, which looks like:=0A=0Aclass MandatoryTermsFilter =
extends Filter {=0A  =0A  List terms =0A  =0A  BitSet bits( IndexReader rea=
der ){=0A    int size =3D reader.maxDoc()=0A    BitSet result =3D new BitSe=
t( size )=0A    BitSet andMask =3D new BitSet( size )=0A    andMask.set 0, =
size - 1, true=0A=0A    terms.each{ term ->=0A      result.clear()=0A      =
TermDocs td =3D reader.termDocs( term )=0A      while( td.next() ){ result.=
set td.doc() }=0A      andMask &=3D result=0A    }=0A    return andMask=0A =
 }=0A  =0A}=0A=0Ahere I'm AND-ing each bitset. Does it look ok?=0A-- =0AVie=
w this message in context: http://www.nabble.com/TermsFilter-and-MUST-tp194=
53184p19457142.html=0ASent from the Lucene - Java Users mailing list archiv=
e at Nabble.com.=0A=0A=0A--------------------------------------------------=
-------------------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.=
apache.org=0AFor additional commands, e-mail: java-user-help@lucene.apache.=
org=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 12 16:42:59 2008
Return-Path: <java-user-return-36103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6928 invoked from network); 12 Sep 2008 16:42:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Sep 2008 16:42:59 -0000
Received: (qmail 71639 invoked by uid 500); 12 Sep 2008 16:42:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71598 invoked by uid 500); 12 Sep 2008 16:42:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71587 invoked by uid 99); 12 Sep 2008 16:42:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 09:42:49 -0700
X-ASF-Spam-Status: No, hits=3.3 required=10.0
	tests=DNS_FROM_RFC_BOGUSMX,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [200.53.68.51] (HELO occemailcluster.terra.com.mx) (200.53.68.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 16:41:50 +0000
Received: from [192.168.1.100] (201.151.221.218) by occemailcluster.terra.com.mx (7.2.033.1) (authenticated as gsegura@correobancomer.com)
        id 48458B5E0072EFCA for java-user@lucene.apache.org; Fri, 12 Sep 2008 11:33:27 -0500
Message-ID: <48CA9C3B.3050901@correobancomer.com>
Date: Fri, 12 Sep 2008 11:43:39 -0500
From: Gerardo Segura <gsegura@correobancomer.com>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Frequently updated fields
References: <1221781428.20080912135749@gmail.com> <6E7487CD-2836-4B3C-9940-67F989F018E8@gmail.com>
In-Reply-To: <6E7487CD-2836-4B3C-9940-67F989F018E8@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I think the important question is: in general how to cope with 
frequently changing fields.


Karl Wettin wrote:
> Hi Wojciech,
>
> can you please give us a bit more specific information about the meta 
> data fields that will change? I would recommend you looking at 
> creating filters from your primary persistency for query clauses such 
> as unread/read, mailbox folders, et c.
>
>       karl
>
> 12 sep 2008 kl. 13.57 skrev Wojciech Strza?ka:
>
>> Hi.
>>
>>   I'm new to Lucene and I would like to get a few answers (they can
>>   be lame)
>>
>>   I want to index large amount of emails using Lucene (maybe SOLR), 
>> not only
>>   the contents but also some metadata like state or flags. The
>>   problem is that the metadata will change during mail lifecycle,
>>   although much smaller updating this information will require
>>   reindex the whole mail content which I see performance bottleneck.
>>
>>   I have the data in DB also so my first question is:
>>
>>   - are there any best practices to implement my needs (querying both
>>   lucene & DB and then merging in memory?, close one eye and re-index
>>   the whole content on every metadata change? others?)
>>
>>   - is at all Lucene good solution for my problem?
>>
>>   - are there any plans to implement field updates in more efficient 
>> way then
>>   delete/insert the whole document? if yes what's the time horizon?
>>
>>
>>                                        Best regards
>>                                               Wojtek
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 12 17:02:06 2008
Return-Path: <java-user-return-36104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38009 invoked from network); 12 Sep 2008 17:02:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Sep 2008 17:02:05 -0000
Received: (qmail 15578 invoked by uid 500); 12 Sep 2008 17:01:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15376 invoked by uid 500); 12 Sep 2008 17:01:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15302 invoked by uid 99); 12 Sep 2008 17:01:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 10:01:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 17:00:56 +0000
Received: by ug-out-1314.google.com with SMTP id j3so1300748ugf.23
        for <java-user@lucene.apache.org>; Fri, 12 Sep 2008 10:01:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=j5OU7RtP65DfxF3SUf0wX7o+Ese+uRIu6o3+jQeI3qo=;
        b=dzeXvd0XjIVhIFcfkHbQwNDe7E0tz6OO3PSwZxkcj5JLqd4LlI4M4jvQlgv64eNiF+
         Fbsk2zPB/3TWUY7KXjM98E37Bt93HePp8U8sbMAEPFKHBKXRIAjoVN7YPf1G12TaIpY9
         +FXdLISnt8Okbpwsi0MIoBShmKcNn2zNNXdRo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=BPQkpGgO1qhLVBk6kukb+tF7eL6PIeqxeYUjLRjB+ZSRkrRe/QCfmPrnt+P6gO03bW
         5WZoORHYqcaz/LQdROrKZ8f2bEKCzdpzyxef+pA6cwlfoy9bz4CFh67wp0NxMCkN3Y/+
         EAsPY0URdN/gg39r3PEZzhn7nrcBuqS9ML9TA=
Received: by 10.66.232.9 with SMTP id e9mr9603645ugh.17.1221238876758;
        Fri, 12 Sep 2008 10:01:16 -0700 (PDT)
Received: from kodapan.lan ( [83.249.107.81])
        by mx.google.com with ESMTPS id 5sm6713724ugc.38.2008.09.12.10.01.15
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 12 Sep 2008 10:01:16 -0700 (PDT)
Message-Id: <CB32C47F-58FB-4DAF-BE9E-35355DDF6A23@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <48CA9C3B.3050901@correobancomer.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Frequently updated fields
Date: Fri, 12 Sep 2008 19:01:14 +0200
References: <1221781428.20080912135749@gmail.com> <6E7487CD-2836-4B3C-9940-67F989F018E8@gmail.com> <48CA9C3B.3050901@correobancomer.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

There is no single easy answer to the question. There are a number of  
solutions to the problem, in this thread we've so far listed the  
following: reindex document in single index, using parallell indices  
and filters created from the source data. There are other things one  
can do too, but which solution or what combination of them to use  
depends on your needs and your data.

Perhaps someone could create a Wiki page that describes the different  
approaches.


       karl

12 sep 2008 kl. 18.43 skrev Gerardo Segura:

> I think the important question is: in general how to cope with  
> frequently changing fields.
>
>
> Karl Wettin wrote:
>> Hi Wojciech,
>>
>> can you please give us a bit more specific information about the  
>> meta data fields that will change? I would recommend you looking at  
>> creating filters from your primary persistency for query clauses  
>> such as unread/read, mailbox folders, et c.
>>
>>      karl
>>
>> 12 sep 2008 kl. 13.57 skrev Wojciech Strza?ka:
>>
>>> Hi.
>>>
>>>  I'm new to Lucene and I would like to get a few answers (they can
>>>  be lame)
>>>
>>>  I want to index large amount of emails using Lucene (maybe SOLR),  
>>> not only
>>>  the contents but also some metadata like state or flags. The
>>>  problem is that the metadata will change during mail lifecycle,
>>>  although much smaller updating this information will require
>>>  reindex the whole mail content which I see performance bottleneck.
>>>
>>>  I have the data in DB also so my first question is:
>>>
>>>  - are there any best practices to implement my needs (querying both
>>>  lucene & DB and then merging in memory?, close one eye and re-index
>>>  the whole content on every metadata change? others?)
>>>
>>>  - is at all Lucene good solution for my problem?
>>>
>>>  - are there any plans to implement field updates in more  
>>> efficient way then
>>>  delete/insert the whole document? if yes what's the time horizon?
>>>
>>>
>>>                                       Best regards
>>>                                              Wojtek
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 12 17:17:37 2008
Return-Path: <java-user-return-36105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64400 invoked from network); 12 Sep 2008 17:17:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Sep 2008 17:17:36 -0000
Received: (qmail 39858 invoked by uid 500); 12 Sep 2008 17:17:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39828 invoked by uid 500); 12 Sep 2008 17:17:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39817 invoked by uid 99); 12 Sep 2008 17:17:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 10:17:26 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.92.27] (HELO qw-out-2122.google.com) (74.125.92.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 17:16:27 +0000
Received: by qw-out-2122.google.com with SMTP id 5so109704qwi.53
        for <java-user@lucene.apache.org>; Fri, 12 Sep 2008 10:16:48 -0700 (PDT)
Received: by 10.214.9.8 with SMTP id 8mr4262998qai.51.1221239808253;
        Fri, 12 Sep 2008 10:16:48 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id 7sm8040752qwb.7.2008.09.12.10.16.46
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 12 Sep 2008 10:16:47 -0700 (PDT)
Message-Id: <D6586007-C0BB-47C1-8A11-23AC74342D10@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <962ea6660809120549g4914448bwfa8006b792938890@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: removing norms
Date: Fri, 12 Sep 2008 13:16:44 -0400
References: <962ea6660809120325s3e8eabc1y4079906084d9b0f1@mail.gmail.com> <29F54650-9CFC-44AD-ADA4-9936D664A607@gmail.com> <962ea6660809120549g4914448bwfa8006b792938890@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Unfortunately, I think altering an existing index to remove it's norms  
is not possible without writing some custom Java code (in package  
org.apache.lucene.index) that directly manipulates the FieldInfos and  
SegmentInfos.

Mike

Bogdan Ghidireac wrote:

> Yes, but the norms will be loaded at the search time.. I want to
> remove them because I don't have enough memory.
>
> Bogdan
>
> On Fri, Sep 12, 2008 at 3:22 PM, Karl Wettin <karl.wettin@gmail.com>  
> wrote:
>>
>> 12 sep 2008 kl. 12.25 skrev Bogdan Ghidireac:
>>
>>> I have a large index and I want to remove the norms from a field. Is
>>> there a way to do this without reindexing everything ?
>>
>> You could invoke IndexReader#setNorm(int, String, float) and set  
>> the value
>> to 1f.
>>
>>
>>     karl
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 12 19:49:32 2008
Return-Path: <java-user-return-36106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83865 invoked from network); 12 Sep 2008 19:49:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Sep 2008 19:49:32 -0000
Received: (qmail 39466 invoked by uid 500); 12 Sep 2008 19:49:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39440 invoked by uid 500); 12 Sep 2008 19:49:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39426 invoked by uid 99); 12 Sep 2008 19:49:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 12:49:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.132.247 as permitted sender)
Received: from [209.85.132.247] (HELO an-out-0708.google.com) (209.85.132.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 19:48:23 +0000
Received: by an-out-0708.google.com with SMTP id c37so124905anc.49
        for <java-user@lucene.apache.org>; Fri, 12 Sep 2008 12:48:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=V828gO5UlQnjHhZs/1shD5zujaXCGObVfaAtfHjVfIc=;
        b=NT/kgAB2yBrRT2npXfAyPBxtflTmVHdDbYvtFZf/adoKH7kSbQxK/rmCaHQVWOUIQg
         FZfjyd+FYh+6dzP1T+k8eCjq5Vh4IOJ3a+ijRGqWQQ/fcpHg5lTJe1JzSkp0NioZTJIG
         gYl7A/IQoN55OczusRLC0eabI9OFByp+udMFk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=B6RfRshh/x5jE3XlPeqIgEKBew/BDLz1ZhPAW8Fu7KgypmrJkWSw2eBf8+r7gYa/DX
         8o2fpVvJ9StviOO6sFotUhEQZrlJQeZjvj2kglg6EuunSqBjZuYCgwA3bHs7S3U+rzST
         yBDv3A8qFbkp+OEa8FF1Yie6IxL8q/F7AufQ4=
Received: by 10.100.209.5 with SMTP id h5mr5947466ang.18.1221248934233;
        Fri, 12 Sep 2008 12:48:54 -0700 (PDT)
Received: from ?192.168.1.103? ( [68.198.57.217])
        by mx.google.com with ESMTPS id b14sm905780ana.23.2008.09.12.12.48.52
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 12 Sep 2008 12:48:53 -0700 (PDT)
Message-ID: <48CAC7A4.3040705@gmail.com>
Date: Fri, 12 Sep 2008 15:48:52 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.16 (X11/20080725)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Frequently updated fields
References: <1221781428.20080912135749@gmail.com> <6E7487CD-2836-4B3C-9940-67F989F018E8@gmail.com> <48CA9C3B.3050901@correobancomer.com>
In-Reply-To: <48CA9C3B.3050901@correobancomer.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

You might check out the tagindex issue in jira as well. Havn't looked at 
it myself, but I believe its supposed to be an option for this.

Gerardo Segura wrote:
> I think the important question is: in general how to cope with 
> frequently changing fields.
>
>
> Karl Wettin wrote:
>> Hi Wojciech,
>>
>> can you please give us a bit more specific information about the meta 
>> data fields that will change? I would recommend you looking at 
>> creating filters from your primary persistency for query clauses such 
>> as unread/read, mailbox folders, et c.
>>
>>       karl
>>
>> 12 sep 2008 kl. 13.57 skrev Wojciech Strza?ka:
>>
>>> Hi.
>>>
>>>   I'm new to Lucene and I would like to get a few answers (they can
>>>   be lame)
>>>
>>>   I want to index large amount of emails using Lucene (maybe SOLR), 
>>> not only
>>>   the contents but also some metadata like state or flags. The
>>>   problem is that the metadata will change during mail lifecycle,
>>>   although much smaller updating this information will require
>>>   reindex the whole mail content which I see performance bottleneck.
>>>
>>>   I have the data in DB also so my first question is:
>>>
>>>   - are there any best practices to implement my needs (querying both
>>>   lucene & DB and then merging in memory?, close one eye and re-index
>>>   the whole content on every metadata change? others?)
>>>
>>>   - is at all Lucene good solution for my problem?
>>>
>>>   - are there any plans to implement field updates in more efficient 
>>> way then
>>>   delete/insert the whole document? if yes what's the time horizon?
>>>
>>>
>>>                                        Best regards
>>>                                               Wojtek
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 12 19:59:59 2008
Return-Path: <java-user-return-36107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95988 invoked from network); 12 Sep 2008 19:59:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Sep 2008 19:59:59 -0000
Received: (qmail 60271 invoked by uid 500); 12 Sep 2008 19:59:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60238 invoked by uid 500); 12 Sep 2008 19:59:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60222 invoked by uid 99); 12 Sep 2008 19:59:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 12:59:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 19:58:45 +0000
Received: by gxk6 with SMTP id 6so12893556gxk.5
        for <java-user@lucene.apache.org>; Fri, 12 Sep 2008 12:58:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=brV3WFVkKWEQqR9EDUUZo2lApQkTTQsNg8zetvHA98A=;
        b=DY0N1QvJ0Oyp+oyvO4OH22EI74Iei5/OnI12gVmlHcxYtXjJtp49lSNPIJOmg+HGRk
         FJjc1upIMFJhlRDnFXVGl1mvYgw0/Q+S3RHwEWyUud/7H137ux7rGz1VfNKNoOL9fU7H
         8YDLp6EVx0oH9q33XgJMgib7HnngC2kgqTyq4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=uyZ+RLyFLsKM6yJxR4nIlluEnyQ+Z/8fTEe8sZz83HPbtozF91xuVgGxDqfUII2kt7
         bUiE2klYn9ceFq0tyPxkhdu5gR9zdtXVO9iY7dQtzSRBVKCQilJ0u7L3Y/uiPcjDewIg
         1uZ4rsIiKThDDsnqyk8R0Ud4cDCgll4wqdFZw=
Received: by 10.151.148.12 with SMTP id a12mr6628738ybo.145.1221249496424;
        Fri, 12 Sep 2008 12:58:16 -0700 (PDT)
Received: by 10.151.118.7 with HTTP; Fri, 12 Sep 2008 12:58:16 -0700 (PDT)
Message-ID: <85d3c3b60809121258x567af9f2j19cc280dc43b0224@mail.gmail.com>
Date: Fri, 12 Sep 2008 15:58:16 -0400
From: "Jason Rutherglen" <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Frequently updated fields
In-Reply-To: <48CAC7A4.3040705@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1221781428.20080912135749@gmail.com>
	 <6E7487CD-2836-4B3C-9940-67F989F018E8@gmail.com>
	 <48CA9C3B.3050901@correobancomer.com> <48CAC7A4.3040705@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Yes Tag Index will work.  I have not had time to complete it however
if you are interested in working on it please feel free to contact me.

On Fri, Sep 12, 2008 at 3:48 PM, Mark Miller <markrmiller@gmail.com> wrote:
> You might check out the tagindex issue in jira as well. Havn't looked at it
> myself, but I believe its supposed to be an option for this.
>
> Gerardo Segura wrote:
>>
>> I think the important question is: in general how to cope with frequently
>> changing fields.
>>
>>
>> Karl Wettin wrote:
>>>
>>> Hi Wojciech,
>>>
>>> can you please give us a bit more specific information about the meta
>>> data fields that will change? I would recommend you looking at creating
>>> filters from your primary persistency for query clauses such as unread/read,
>>> mailbox folders, et c.
>>>
>>>      karl
>>>
>>> 12 sep 2008 kl. 13.57 skrev Wojciech Strza?ka:
>>>
>>>> Hi.
>>>>
>>>>  I'm new to Lucene and I would like to get a few answers (they can
>>>>  be lame)
>>>>
>>>>  I want to index large amount of emails using Lucene (maybe SOLR), not
>>>> only
>>>>  the contents but also some metadata like state or flags. The
>>>>  problem is that the metadata will change during mail lifecycle,
>>>>  although much smaller updating this information will require
>>>>  reindex the whole mail content which I see performance bottleneck.
>>>>
>>>>  I have the data in DB also so my first question is:
>>>>
>>>>  - are there any best practices to implement my needs (querying both
>>>>  lucene & DB and then merging in memory?, close one eye and re-index
>>>>  the whole content on every metadata change? others?)
>>>>
>>>>  - is at all Lucene good solution for my problem?
>>>>
>>>>  - are there any plans to implement field updates in more efficient way
>>>> then
>>>>  delete/insert the whole document? if yes what's the time horizon?
>>>>
>>>>
>>>>                                       Best regards
>>>>                                              Wojtek
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 12 22:12:41 2008
Return-Path: <java-user-return-36108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74249 invoked from network); 12 Sep 2008 22:12:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Sep 2008 22:12:41 -0000
Received: (qmail 32818 invoked by uid 500); 12 Sep 2008 22:12:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32790 invoked by uid 500); 12 Sep 2008 22:12:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32779 invoked by uid 99); 12 Sep 2008 22:12:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 15:12:31 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 22:11:32 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KeGrz-0006g8-S3
	for java-user@lucene.apache.org; Fri, 12 Sep 2008 15:12:03 -0700
Message-ID: <19465016.post@talk.nabble.com>
Date: Fri, 12 Sep 2008 15:12:03 -0700 (PDT)
From: nobody <dailykos@mailinator.com>
To: java-user@lucene.apache.org
Subject: Re: Spawn an indexing thread on every update
In-Reply-To: <f18c9dde0809120406t6d80d1ffia2be808d6f3ee35d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: dailykos@mailinator.com
References: <19444244.post@talk.nabble.com> <8c4e68610809120229s7db02303w47504d90f60a7340@mail.gmail.com> <f18c9dde0809120406t6d80d1ffia2be808d6f3ee35d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Perfect ... However 1 small question ...

every update means finding out what already exists, delete them, then
reindex. which means the following:

Say I have 1000 objects buffered to be indexed later
and I run a thread when i reach the threshold=1000

FOR EACH OBECT:
a. Close IndexWriter
b. Instantiate an IndexReader, delete existing object
c. Instantiate IndexWriter, Index new object
GO BACK TO (a)


Is there a way to avoid some many reinstantiation of objects?

-thanks a ton!





Simon Willnauer wrote:
> 
> I guess similar problems have been discussed on the list over and over
> again.
> Why don't you use a single update thread which takes care of batch
> processing, commit threshold or performs commits after a certain time
> span.
> This would at least prevent you from spawning all the threads which
> is, as far as I can tell not necessary.
> Your update thread could also notify you searcher to reopen the index
> as soon as a change or a batch was commited.
> If you are looking for examples you might find some good examples in
> the Solr code.
> 
> - simon
> 
> On Fri, Sep 12, 2008 at 11:29 AM, Ian Lea <ian.lea@gmail.com> wrote:
>> Hi
>>
>>
>> Why 15 mins?  Can you try lower values to get a balance between load
>> and freshness?
>>
>>
>>
>> --
>> Ian.
>>
>>
>> On Thu, Sep 11, 2008 at 9:43 PM, nobody <dailykos@budweiser.com> wrote:
>>>
>>> Hi,
>>>
>>>  In our application, I want users to be able to search for the updates
>>> they
>>> make almost immediately. Hence, whenever they update, I spawn a thread
>>> immediately to index. However, when the load on the application is very
>>> high
>>> the number of threads spawned increases, and this results in "cannot
>>> create
>>> native thread" error.
>>>
>>> We are thinking of running the indexing thread once in every 15 mins,
>>> through a scheduler, and buffer all the writes till the thread runs.
>>> However, this will result in stale results on the search. Please advice
>>> what
>>> is the best approach in this regard.
>>>
>>> -thanks
>>> --
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Spawn-an-indexing-thread-on-every-update-tp19444244p19465016.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 12 23:03:16 2008
Return-Path: <java-user-return-36109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10486 invoked from network); 12 Sep 2008 23:03:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Sep 2008 23:03:16 -0000
Received: (qmail 74852 invoked by uid 500); 12 Sep 2008 23:03:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74821 invoked by uid 500); 12 Sep 2008 23:03:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74810 invoked by uid 99); 12 Sep 2008 23:03:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 16:03:05 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.200.170 as permitted sender)
Received: from [209.85.200.170] (HELO wf-out-1314.google.com) (209.85.200.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Sep 2008 23:02:05 +0000
Received: by wf-out-1314.google.com with SMTP id 28so982610wfc.20
        for <java-user@lucene.apache.org>; Fri, 12 Sep 2008 16:02:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:reply-to
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=38jtaFmirHrVtsW7q2DGdWJ6z4gNlNLNLctY3TbRDis=;
        b=jFIXuaEMRr78cAoeyy4nqjG3DlSfzimPAqVJM7g2JTFQalWHWoo9Kq/NJrR1SQTeg1
         Ol4hcKzijgEziF3cVs6MB4wtuFrvgNRFXnHu3kP2wrVaJCv4vcFVaeEaMvIpXbqKh3YD
         tqjk+66Y08rqRjRKUrCbreC2JnJ+fcludYUQI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=message-id:date:from:reply-to:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=LJqUOfq07dZ0caLnLQm+eXmCBRdolEKdPzfh5U+FvMPX0U0ItiAIecLmEjccyNFv/d
         XMEUx2LzhJTo9AfNC9mfLEalU1kSnyREXo6IHkiZ64lHPeJ0Ja+WIcAzXiBigUOgcHGH
         N5WNpRHy+PNZJaSXCrWQPws15cFiXSC7ilyOo=
Received: by 10.114.137.2 with SMTP id k2mr3944901wad.95.1221260557293;
        Fri, 12 Sep 2008 16:02:37 -0700 (PDT)
Received: by 10.115.19.12 with HTTP; Fri, 12 Sep 2008 16:02:37 -0700 (PDT)
Message-ID: <f18c9dde0809121602q7e7af4e5u63b4cf51c32a7f69@mail.gmail.com>
Date: Sat, 13 Sep 2008 01:02:37 +0200
From: "Simon Willnauer" <simon.willnauer@googlemail.com>
Reply-To: simon.willnauer@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Spawn an indexing thread on every update
In-Reply-To: <19465016.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <19444244.post@talk.nabble.com>
	 <8c4e68610809120229s7db02303w47504d90f60a7340@mail.gmail.com>
	 <f18c9dde0809120406t6d80d1ffia2be808d6f3ee35d@mail.gmail.com>
	 <19465016.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

you can just simply do it like the following:

  open new IndexReader
  delete all docs
  close IndexReader
  open new IndexWriter
  add documents
  close IndexWriter

if you are done you can replace the index reader used for searching
with a new one an all modifications will be visible.

- simon
On Sat, Sep 13, 2008 at 12:12 AM, nobody <dailykos@mailinator.com> wrote:
>
> Perfect ... However 1 small question ...
>
> every update means finding out what already exists, delete them, then
> reindex. which means the following:
>
> Say I have 1000 objects buffered to be indexed later
> and I run a thread when i reach the threshold=1000
>
> FOR EACH OBECT:
> a. Close IndexWriter
> b. Instantiate an IndexReader, delete existing object
> c. Instantiate IndexWriter, Index new object
> GO BACK TO (a)
>
>
> Is there a way to avoid some many reinstantiation of objects?
>
> -thanks a ton!
>
>
>
>
>
> Simon Willnauer wrote:
>>
>> I guess similar problems have been discussed on the list over and over
>> again.
>> Why don't you use a single update thread which takes care of batch
>> processing, commit threshold or performs commits after a certain time
>> span.
>> This would at least prevent you from spawning all the threads which
>> is, as far as I can tell not necessary.
>> Your update thread could also notify you searcher to reopen the index
>> as soon as a change or a batch was commited.
>> If you are looking for examples you might find some good examples in
>> the Solr code.
>>
>> - simon
>>
>> On Fri, Sep 12, 2008 at 11:29 AM, Ian Lea <ian.lea@gmail.com> wrote:
>>> Hi
>>>
>>>
>>> Why 15 mins?  Can you try lower values to get a balance between load
>>> and freshness?
>>>
>>>
>>>
>>> --
>>> Ian.
>>>
>>>
>>> On Thu, Sep 11, 2008 at 9:43 PM, nobody <dailykos@budweiser.com> wrote:
>>>>
>>>> Hi,
>>>>
>>>>  In our application, I want users to be able to search for the updates
>>>> they
>>>> make almost immediately. Hence, whenever they update, I spawn a thread
>>>> immediately to index. However, when the load on the application is very
>>>> high
>>>> the number of threads spawned increases, and this results in "cannot
>>>> create
>>>> native thread" error.
>>>>
>>>> We are thinking of running the indexing thread once in every 15 mins,
>>>> through a scheduler, and buffer all the writes till the thread runs.
>>>> However, this will result in stale results on the search. Please advice
>>>> what
>>>> is the best approach in this regard.
>>>>
>>>> -thanks
>>>> --
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> --
> View this message in context: http://www.nabble.com/Spawn-an-indexing-thread-on-every-update-tp19444244p19465016.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 13 10:23:24 2008
Return-Path: <java-user-return-36110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72277 invoked from network); 13 Sep 2008 10:23:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Sep 2008 10:23:24 -0000
Received: (qmail 33602 invoked by uid 500); 13 Sep 2008 10:23:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33563 invoked by uid 500); 13 Sep 2008 10:23:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33552 invoked by uid 99); 13 Sep 2008 10:23:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Sep 2008 03:23:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wstrzalka@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Sep 2008 10:22:13 +0000
Received: by ug-out-1314.google.com with SMTP id j3so270967ugf.23
        for <java-user@lucene.apache.org>; Sat, 13 Sep 2008 03:22:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:date:from:x-mailer:x-priority
         :message-id:to:subject:in-reply-to:references:mime-version
         :content-type:content-transfer-encoding;
        bh=xz8zgCjiph2iQbxHvSq9MJ+RkCVP9/AOWpuzDnXl0Gk=;
        b=YeFCEfuGLETyqb244HEUcgKslrP/7Zhp8mGSLwv8iBkSJeDfGwSkc4Vd1+2kUqZELe
         o9mQbes4RRZLE/3XsfgKjcbQG63Zd4B89QU9EDVKvEHrWcBSBckJLCuE0VDzAVcDP+nH
         l/x9sa6ZeKUxbJ8oXBGB5ltxZMa08U9f/kS7Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:from:x-mailer:x-priority:message-id:to:subject:in-reply-to
         :references:mime-version:content-type:content-transfer-encoding;
        b=hKV7FqG04sJXztyPCQSxf1Gihzm1s9Lv/RMXL1s28WJM9QCDlwzyOsLzFnZvYA1XpL
         ILVDCs+4n9KHVkFjfX1lah37yWbhitml1Lue8qiLJ0JgQDhcNmqSCx2B6aDzwnKTI9X1
         XWtfgZd0v2E+VwGBUVgN7A0VFTSlO0nmWJYz8=
Received: by 10.102.253.13 with SMTP id a13mr3741371mui.74.1221301353917;
        Sat, 13 Sep 2008 03:22:33 -0700 (PDT)
Received: from D620 ( [87.206.64.119])
        by mx.google.com with ESMTPS id u26sm21591906mug.5.2008.09.13.03.22.31
        (version=SSLv3 cipher=OTHER);
        Sat, 13 Sep 2008 03:22:32 -0700 (PDT)
Date: Sat, 13 Sep 2008 12:22:18 +0200
From: =?utf-8?Q?Wojciech_Strza=C5=82ka?= <wstrzalka@gmail.com>
X-Mailer: The Bat! (v3.99)
X-Priority: 3 (Normal)
Message-ID: <166321410.20080913122218@gmail.com>
To: java-user@lucene.apache.org
Subject: Re[2]: Frequently updated fields
In-Reply-To: <85d3c3b60809121258x567af9f2j19cc280dc43b0224@mail.gmail.com>
References: <1221781428.20080912135749@gmail.com> <6E7487CD-2836-4B3C-9940-67F989F018E8@gmail.com> <48CA9C3B.3050901@correobancomer.com> <48CAC7A4.3040705@gmail.com> <85d3c3b60809121258x567af9f2j19cc280dc43b0224@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


   My strong reqirement is that search server runs on different machine then
   client - so I think I have two options: SOLR or Lucene via RMI
   (RemoteSearchable)
   
   So by now it looks like I have several options:

   1. TagIndex - like described here
   http://issues.apache.org/jira/browse/LUCENE-1292, looks like
   exactly what I need. Unfortunatelly it's not yet commited and
   source code patching will be required.
   Probably will not work with SOLR soon.
   2. SOLR updatable fields
   http://issues.apache.org/jira/browse/SOLR-139 - I'm not really sure if it
   reduces reindexing the whole document or the only benefit is that I don't need to push full
   content to server but it's internally reindexed anyway. Not yet
   commited anyway.
   3. Writing custom filter - it looks like the most stable at the
   moment but I'm not sure few things:
   - will I be able to use this with SOLR - setup and then control
   filter (which needs to be dynamic) by some URL params or query itself
   - I'll need to query the DB for metadata which I think will be fast
   but complicates the architecture


   The question is how advanced are 1 & 2 - are they ready for
   production? Will further work change it behavior or data
   structures?
   The filter solution is also possible - I'd love to, if I can use it
   inside SOLR.




> Yes Tag Index will work.  I have not had time to complete it however
> if you are interested in working on it please feel free to contact me.

> On Fri, Sep 12, 2008 at 3:48 PM, Mark Miller <markrmiller@gmail.com> wrote:
>> You might check out the tagindex issue in jira as well. Havn't looked at it
>> myself, but I believe its supposed to be an option for this.
>>
>> Gerardo Segura wrote:
>>>
>>> I think the important question is: in general how to cope with frequently
>>> changing fields.
>>>
>>>
>>> Karl Wettin wrote:
>>>>
>>>> Hi Wojciech,
>>>>
>>>> can you please give us a bit more specific information about the meta
>>>> data fields that will change? I would recommend you looking at creating
>>>> filters from your primary persistency for query clauses such as unread/read,
>>>> mailbox folders, et c.
>>>>
>>>>      karl
>>>>
>>>> 12 sep 2008 kl. 13.57 skrev Wojciech Strza?ka:
>>>>
>>>>> Hi.
>>>>>
>>>>>  I'm new to Lucene and I would like to get a few answers (they can
>>>>>  be lame)
>>>>>
>>>>>  I want to index large amount of emails using Lucene (maybe SOLR), not
>>>>> only
>>>>>  the contents but also some metadata like state or flags. The
>>>>>  problem is that the metadata will change during mail lifecycle,
>>>>>  although much smaller updating this information will require
>>>>>  reindex the whole mail content which I see performance bottleneck.
>>>>>
>>>>>  I have the data in DB also so my first question is:
>>>>>
>>>>>  - are there any best practices to implement my needs (querying both
>>>>>  lucene & DB and then merging in memory?, close one eye and re-index
>>>>>  the whole content on every metadata change? others?)
>>>>>
>>>>>  - is at all Lucene good solution for my problem?
>>>>>
>>>>>  - are there any plans to implement field updates in more efficient way
>>>>> then
>>>>>  delete/insert the whole document? if yes what's the time horizon?
>>>>>
>>>>>
>>>>>                                       Best regards
>>>>>                                              Wojtek
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>

> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



-- 
Pozdrowienia,
 Wojciech Strzalka


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 13 22:19:54 2008
Return-Path: <java-user-return-36111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99978 invoked from network); 13 Sep 2008 22:19:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Sep 2008 22:19:54 -0000
Received: (qmail 3675 invoked by uid 500); 13 Sep 2008 22:19:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3640 invoked by uid 500); 13 Sep 2008 22:19:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3629 invoked by uid 99); 13 Sep 2008 22:19:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Sep 2008 15:19:39 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Sep 2008 22:18:41 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id A666071C463; Sat, 13 Sep 2008 15:18:42 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id A2D0C71C460
	for <java-user@lucene.apache.org>; Sat, 13 Sep 2008 15:18:42 -0700 (PDT)
Date: Sat, 13 Sep 2008 15:18:42 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: RE: Number to printable sortable string, including floating point
 numbers and negatives
In-Reply-To: <D8E6BD3AD2634843B58AFF6A94FE246202D7A5A5A4@msgint02.mogul.com>
Message-ID: <Pine.LNX.4.62.0809131429500.2149@radix.cryptio.net>
References: <D8E6BD3AD2634843B58AFF6A94FE246202D7A5A5A4@msgint02.mogul.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: > NumberTools only has methods for longs at the moment, but the same
: > doubleToRawLongBits logic from NumberUtils could be usedto apply it to
: > doubles as well.
: 
: Ah, no I have never looked at the NumberTools class, simply because I 
: had no idea it existed. Thanks for the tip! It looks just about right 
: for me.

If you enhance it to support doubles, write a few tests, and attach it to 
a new Jira i'm fairly confident someone will commit your additions.

-Hoss

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 13 23:00:13 2008
Return-Path: <java-user-return-36112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32010 invoked from network); 13 Sep 2008 23:00:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Sep 2008 23:00:13 -0000
Received: (qmail 22213 invoked by uid 500); 13 Sep 2008 23:00:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22178 invoked by uid 500); 13 Sep 2008 23:00:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22167 invoked by uid 99); 13 Sep 2008 23:00:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Sep 2008 16:00:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Sep 2008 22:59:05 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 2FFFE71C45B; Sat, 13 Sep 2008 15:59:07 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 2DA2771C459
	for <java-user@lucene.apache.org>; Sat, 13 Sep 2008 15:59:07 -0700 (PDT)
Date: Sat, 13 Sep 2008 15:59:07 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Sorting in lucene through Document boosting
In-Reply-To: <ED024AB4B57C8543A3425147237C45F84511AF@MAIL.DIOSPHERE.com>
Message-ID: <Pine.LNX.4.62.0809131539380.30340@radix.cryptio.net>
References: <ED024AB4B57C8543A3425147237C45F84511AF@MAIL.DIOSPHERE.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I thought of setting boost value for documents at index time, with the
: value of my sort field, and then making custom Similarity class which
: would disregard Lucene scoring and take in evaluation only this document
: boost.

the general idea should work, but a few things to pay attention to...

1) document boosts are folded into the fieldNorm, so make sure you don't
"setOmitNorms(true)"

2) your lengthNorm function needs to return a constant

3) you'll need to adjust your boost values so that when the fieldNorms are 
converted to the internal 'byte' representation they are still unique ... 
with some simple experimentation you can find an approach that helps you 
genreate a mapping from 1,2,3,4,5... to a,b,c,d,... where a<b<c<....



-Hoss

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 14 03:11:12 2008
Return-Path: <java-user-return-36113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38400 invoked from network); 14 Sep 2008 03:11:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Sep 2008 03:11:11 -0000
Received: (qmail 42192 invoked by uid 500); 14 Sep 2008 03:11:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42159 invoked by uid 500); 14 Sep 2008 03:11:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42148 invoked by uid 99); 14 Sep 2008 03:11:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Sep 2008 20:11:01 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 209.85.198.227 as permitted sender)
Received: from [209.85.198.227] (HELO rv-out-0506.google.com) (209.85.198.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Sep 2008 03:10:02 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1457381rvb.5
        for <java-user@lucene.apache.org>; Sat, 13 Sep 2008 20:10:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=e+jvo7l4VrtwqfQYPYmsIM2rkSu/QA+g2NnBIp8MtUw=;
        b=cipCRQk9lzwfb2akCS1ox42TF7CnwtcFBBWgxtpF9yFuqN3pU9yDNN36ArdWbgtVLz
         VK/MNq6KSdSrm+7krhZYmIr6FLQPPny5ZFSE1BYxkiQnag3RhQJpaDHOVMVruS3uK40q
         Mi7RDAlQDFsO0yzhOatVkoxI9VB9LT5SwV6kk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=V3PY3eJg4kikJ/0aPTBROz3wIHXCKZnnGBgJYgZD62HNaEbfNUmqJHhCkvppz3hhGs
         5oPG0xea7r3hTUgeBHdi09bDYv1mUCle3/X8Bqy5c1j4WEUr9458AJHaalgxuih/n1Uq
         MZnINSdA7PteVh1YHjy8BmdmmyhIVjGoSTbKo=
Received: by 10.142.154.20 with SMTP id b20mr2134855wfe.59.1221361833394;
        Sat, 13 Sep 2008 20:10:33 -0700 (PDT)
Received: by 10.142.111.8 with HTTP; Sat, 13 Sep 2008 20:10:33 -0700 (PDT)
Message-ID: <6e3ae6310809132010l6a81c2b3hc441ee4ceef2857b@mail.gmail.com>
Date: Sat, 13 Sep 2008 20:10:33 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Re: follow up of Lucene out of memory with RAMDirectory on J2EE environment
In-Reply-To: <6e3ae6310809101132y1c912ba3tf7ace88e9d7900b0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_37315_31156787.1221361833339"
References: <6e3ae6310809101132y1c912ba3tf7ace88e9d7900b0@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_37315_31156787.1221361833339
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Just confirmed the fix for this problem is ready in patch
LUCENE-1383<https://issues.apache.org/jira/browse/LUCENE-1383>

Thanks Robert Engels for arguing with me and understand the problem quickly,
and contributed a ClosableThreadLocal class, although the problem itself is
hard to reproduce for him, and thanks Michael McCandless for fixing the
problem soooo quickly.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!

On Wed, Sep 10, 2008 at 11:32 AM, Chris Lu <chris.lu@gmail.com> wrote:

> This usually happens on J2EE environment, if you use RAMDirectory.
> Before Lucene-1195.(svn r659602, May23,2008), if you close() RAMDirectory,
> the resources will be released right away.
>
> After Lucene-1195.(svn r659602, May23,2008),If you simply close() the
> RAMDirectory, there will be an undetermined(and uncontrollable) time before
> the RAMDirectory resources are released.
> So if you want to avoid it, you will need to use re-open() function instead
> of close() and open(), according to lucene developers.
>
> I haven't tried the re-open approach, but instead I downgrade to the svn
> version before the patch.
> In the previous version, close() means close(), not a delayed close().
>
> Before Lucene developers are willing to fix this, I will have to manually
> remove Lucene-1195 myself if an upgrade is needed.
>
> If you also want this to be fixed, you can join the ongoing discussion to
> support it on java-dev @lucene.apache.org mailing list.
>
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> DBSight customer, a shopping comparison site, (anonymous per request) got
> 2.6 Million Euro funding!
>

------=_Part_37315_31156787.1221361833339--

From java-user-return-36114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 14 08:02:42 2008
Return-Path: <java-user-return-36114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66332 invoked from network); 14 Sep 2008 08:02:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Sep 2008 08:02:42 -0000
Received: (qmail 15148 invoked by uid 500); 14 Sep 2008 08:02:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15109 invoked by uid 500); 14 Sep 2008 08:02:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15098 invoked by uid 99); 14 Sep 2008 08:02:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Sep 2008 01:02:31 -0700
X-ASF-Spam-Status: No, hits=3.3 required=10.0
	tests=DNS_FROM_RFC_BOGUSMX,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [200.53.68.48] (HELO occemailcluster.terra.com.mx) (200.53.68.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Sep 2008 08:01:32 +0000
Received: from [192.168.1.100] (201.151.221.218) by occemailcluster.terra.com.mx (7.2.033.1) (authenticated as gsegura@correobancomer.com)
        id 48458E7100749D35 for java-user@lucene.apache.org; Sun, 14 Sep 2008 02:56:56 -0500
Message-ID: <48CCC608.8070808@correobancomer.com>
Date: Sun, 14 Sep 2008 03:06:32 -0500
From: Gerardo Segura <gsegura@correobancomer.com>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Frequently updated fields
References: <1221781428.20080912135749@gmail.com> <6E7487CD-2836-4B3C-9940-67F989F018E8@gmail.com> <1999039569.20080912145111@gmail.com>
In-Reply-To: <1999039569.20080912145111@gmail.com>
Content-Type: text/plain; charset=ISO-8859-2; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

I had similar requirements: some fields didn't required text processing, 
there were just used as filters to focus the search on subset of 
documents in solr. As Karl suggested, implementing a filter was the most 
direct approach for me.

The issue was that, not been familiar myself with solr, I couldn't 
manage to integrate my filter without modifying SolrIndexSearcher,  the 
change was basically to replace every invocation of

          searcher.search(query, new HitCollector() { ... }) ;
with
          searcher.search(query, myCustomFilter, new HitCollector() { 
... }) ;

myCustomFilter is an instance of TermsFilter with document's keys added 
based on a query from external database.  Also minor changes were made 
in SolrCore.java to be able to declare the filter in sorlconfig.xml.
The thing worked ok, but I always wondered if that was the best way to 
integrate the filter.

regards,

Wojciech Strzaka wrote:
> The most changing fields will be I think:
>   Status (read/unread):  in fact I'm affraid of this at most - any
>                          mail incoming to the system will need to be indexed at least twice
>   Flags:   0..n values from enum
>   Tags:    0..n values from enum
>
> Of course all the other fields can also change - even content in draft messages
> (it's live content, not archival) - but in such a case I'm ready to go
> with the re-indexing.
>   
>> Hi Wojciech,
>>     
>> can you please give us a bit more specific information about the meta
>> data fields that will change? I would recommend you looking at  
>> creating filters from your primary persistency for query clauses such
>> as unread/read, mailbox folders, et c.
>>     
>>        karl
>>     
>> 12 sep 2008 kl. 13.57 skrev Wojciech Strza?ka:
>>     
>>> Hi.
>>>
>>>   I'm new to Lucene and I would like to get a few answers (they can
>>>   be lame)
>>>
>>>   I want to index large amount of emails using Lucene (maybe SOLR),  
>>> not only
>>>   the contents but also some metadata like state or flags. The
>>>   problem is that the metadata will change during mail lifecycle,
>>>   although much smaller updating this information will require
>>>   reindex the whole mail content which I see performance bottleneck.
>>>
>>>   I have the data in DB also so my first question is:
>>>
>>>   - are there any best practices to implement my needs (querying both
>>>   lucene & DB and then merging in memory?, close one eye and re-index
>>>   the whole content on every metadata change? others?)
>>>
>>>   - is at all Lucene good solution for my problem?
>>>
>>>   - are there any plans to implement field updates in more efficient  
>>> way then
>>>   delete/insert the whole document? if yes what's the time horizon?
>>>
>>>
>>>                                        Best regards
>>>                                               Wojtek
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>       
>
>
>   
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>     
>
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 14 10:42:19 2008
Return-Path: <java-user-return-36115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23122 invoked from network); 14 Sep 2008 10:42:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Sep 2008 10:42:19 -0000
Received: (qmail 79211 invoked by uid 500); 14 Sep 2008 10:42:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79175 invoked by uid 500); 14 Sep 2008 10:42:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79164 invoked by uid 99); 14 Sep 2008 10:42:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Sep 2008 03:42:05 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.170.184] (HELO rn-out-0910.google.com) (64.233.170.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Sep 2008 10:41:05 +0000
Received: by rn-out-0910.google.com with SMTP id j71so1190514rne.4
        for <java-user@lucene.apache.org>; Sun, 14 Sep 2008 03:41:35 -0700 (PDT)
Received: by 10.90.92.14 with SMTP id p14mr8003429agb.26.1221388895539;
        Sun, 14 Sep 2008 03:41:35 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id 6sm20794649agb.22.2008.09.14.03.41.34
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sun, 14 Sep 2008 03:41:34 -0700 (PDT)
Message-Id: <300A7110-4AF3-429E-A24A-CF2D52D4C8DB@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <6e3ae6310809132010l6a81c2b3hc441ee4ceef2857b@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: follow up of Lucene out of memory with RAMDirectory on J2EE environment
Date: Sun, 14 Sep 2008 06:41:33 -0400
References: <6e3ae6310809101132y1c912ba3tf7ace88e9d7900b0@mail.gmail.com> <6e3ae6310809132010l6a81c2b3hc441ee4ceef2857b@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


I just committed this, so the fix will be in 2.4.

Thanks for raising this Chris!

Mike

Chris Lu wrote:

> Just confirmed the fix for this problem is ready in patch
> LUCENE-1383<https://issues.apache.org/jira/browse/LUCENE-1383>
>
> Thanks Robert Engels for arguing with me and understand the problem  
> quickly,
> and contributed a ClosableThreadLocal class, although the problem  
> itself is
> hard to reproduce for him, and thanks Michael McCandless for fixing  
> the
> problem soooo quickly.
>
> -- 
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> DBSight customer, a shopping comparison site, (anonymous per  
> request) got
> 2.6 Million Euro funding!
>
> On Wed, Sep 10, 2008 at 11:32 AM, Chris Lu <chris.lu@gmail.com> wrote:
>
>> This usually happens on J2EE environment, if you use RAMDirectory.
>> Before Lucene-1195.(svn r659602, May23,2008), if you close()  
>> RAMDirectory,
>> the resources will be released right away.
>>
>> After Lucene-1195.(svn r659602, May23,2008),If you simply close() the
>> RAMDirectory, there will be an undetermined(and uncontrollable)  
>> time before
>> the RAMDirectory resources are released.
>> So if you want to avoid it, you will need to use re-open() function  
>> instead
>> of close() and open(), according to lucene developers.
>>
>> I haven't tried the re-open approach, but instead I downgrade to  
>> the svn
>> version before the patch.
>> In the previous version, close() means close(), not a delayed  
>> close().
>>
>> Before Lucene developers are willing to fix this, I will have to  
>> manually
>> remove Lucene-1195 myself if an upgrade is needed.
>>
>> If you also want this to be fixed, you can join the ongoing  
>> discussion to
>> support it on java-dev @lucene.apache.org mailing list.
>>
>> --
>> Chris Lu
>> -------------------------
>> Instant Scalable Full-Text Search On Any Database/Application
>> site: http://www.dbsight.net
>> demo: http://search.dbsight.com
>> Lucene Database Search in 3 minutes:
>> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>> DBSight customer, a shopping comparison site, (anonymous per  
>> request) got
>> 2.6 Million Euro funding!
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 14 13:23:05 2008
Return-Path: <java-user-return-36116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88379 invoked from network); 14 Sep 2008 13:23:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Sep 2008 13:23:04 -0000
Received: (qmail 68437 invoked by uid 500); 14 Sep 2008 13:22:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68397 invoked by uid 500); 14 Sep 2008 13:22:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68386 invoked by uid 99); 14 Sep 2008 13:22:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Sep 2008 06:22:53 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Sep 2008 13:21:55 +0000
Received: by gxk6 with SMTP id 6so14439548gxk.5
        for <java-user@lucene.apache.org>; Sun, 14 Sep 2008 06:22:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=hsUfG9oX5hPZZ9P/5+VMgqurPQnKnpvDD42JQragHDI=;
        b=Or8mqOD9/LcTcTPgm9uJFoO/x9646P8nwQT5Fht5sa7EB+s6EqWSFXMVsDhc3euelE
         qdg4gtC9l/gl2i/M1VCF4Io7ZrZJRBh1NlA8L4S1fF/8+vqan612Lvnxk4w9hYu86CfX
         5Gsx7LbPvtHdetzTUMOX6vPdvNP6AbI2xazFU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=rKP4lEipd8u8w0hhWFJBEILcLzNd7gX/wBPHxBpd/obMzvR7H0CQs/EkBh3ipR04v3
         lBgvhfI6o4ZSMCgCHdr4+fpklP2YvEVZJhSZ7F9AJBsLnfBdbRoSX/YP57N1KiPTTvF0
         lBNkO0RL+nH8NkPWy9fY8Q9mJD9Yxy7mYo5/Q=
Received: by 10.151.108.5 with SMTP id k5mr8915197ybm.226.1221398546816;
        Sun, 14 Sep 2008 06:22:26 -0700 (PDT)
Received: by 10.151.117.4 with HTTP; Sun, 14 Sep 2008 06:22:26 -0700 (PDT)
Message-ID: <85d3c3b60809140622h6473afc4ra4984e778f53f06c@mail.gmail.com>
Date: Sun, 14 Sep 2008 09:22:26 -0400
From: "Jason Rutherglen" <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Frequently updated fields
In-Reply-To: <48CCC608.8070808@correobancomer.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-2
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <1221781428.20080912135749@gmail.com>
	 <6E7487CD-2836-4B3C-9940-67F989F018E8@gmail.com>
	 <1999039569.20080912145111@gmail.com>
	 <48CCC608.8070808@correobancomer.com>
X-Virus-Checked: Checked by ClamAV on apache.org

SXQgd291bGQgYmUgZ29vZCB0byBhbGxvdyB1c2VycyB0byB1c2UgdGhlaXIgb3duIEZpbHRlciBz
dWJjbGFzc2VzIGluClNPTFIuICBUaGlzIHdpbGwgaGVscCB3aXRoIFJNSSBiYXNlZCBpbXBsZW1l
bnRhdGlvbnMgdGhhdCB1c2UgU09MUiwKYW5kIHdpbGwgYWxsb3cgYWxsIG9mIHRoZSBvcGVuIHNv
dXJjZSBGaWx0ZXIgd29yayB0byBiZSB1c2VkIGluIFNPTFIsCndpdGhvdXQgbmVlZGluZyB0byBy
ZWNyZWF0ZSBpdCB3aXRoIERvY1NldHMuCgoyMDA4LzkvMTQgR2VyYXJkbyBTZWd1cmEgPGdzZWd1
cmFAY29ycmVvYmFuY29tZXIuY29tPjoKPiBJIGhhZCBzaW1pbGFyIHJlcXVpcmVtZW50czogc29t
ZSBmaWVsZHMgZGlkbid0IHJlcXVpcmVkIHRleHQgcHJvY2Vzc2luZywKPiB0aGVyZSB3ZXJlIGp1
c3QgdXNlZCBhcyBmaWx0ZXJzIHRvIGZvY3VzIHRoZSBzZWFyY2ggb24gc3Vic2V0IG9mIGRvY3Vt
ZW50cwo+IGluIHNvbHIuIEFzIEthcmwgc3VnZ2VzdGVkLCBpbXBsZW1lbnRpbmcgYSBmaWx0ZXIg
d2FzIHRoZSBtb3N0IGRpcmVjdAo+IGFwcHJvYWNoIGZvciBtZS4KPgo+IFRoZSBpc3N1ZSB3YXMg
dGhhdCwgbm90IGJlZW4gZmFtaWxpYXIgbXlzZWxmIHdpdGggc29sciwgSSBjb3VsZG4ndCBtYW5h
Z2UgdG8KPiBpbnRlZ3JhdGUgbXkgZmlsdGVyIHdpdGhvdXQgbW9kaWZ5aW5nIFNvbHJJbmRleFNl
YXJjaGVyLCAgdGhlIGNoYW5nZSB3YXMKPiBiYXNpY2FsbHkgdG8gcmVwbGFjZSBldmVyeSBpbnZv
Y2F0aW9uIG9mCj4KPiAgICAgICAgIHNlYXJjaGVyLnNlYXJjaChxdWVyeSwgbmV3IEhpdENvbGxl
Y3RvcigpIHsgLi4uIH0pIDsKPiB3aXRoCj4gICAgICAgICBzZWFyY2hlci5zZWFyY2gocXVlcnks
IG15Q3VzdG9tRmlsdGVyLCBuZXcgSGl0Q29sbGVjdG9yKCkgeyAuLi4gfSkgOwo+Cj4gbXlDdXN0
b21GaWx0ZXIgaXMgYW4gaW5zdGFuY2Ugb2YgVGVybXNGaWx0ZXIgd2l0aCBkb2N1bWVudCdzIGtl
eXMgYWRkZWQKPiBiYXNlZCBvbiBhIHF1ZXJ5IGZyb20gZXh0ZXJuYWwgZGF0YWJhc2UuICBBbHNv
IG1pbm9yIGNoYW5nZXMgd2VyZSBtYWRlIGluCj4gU29sckNvcmUuamF2YSB0byBiZSBhYmxlIHRv
IGRlY2xhcmUgdGhlIGZpbHRlciBpbiBzb3JsY29uZmlnLnhtbC4KPiBUaGUgdGhpbmcgd29ya2Vk
IG9rLCBidXQgSSBhbHdheXMgd29uZGVyZWQgaWYgdGhhdCB3YXMgdGhlIGJlc3Qgd2F5IHRvCj4g
aW50ZWdyYXRlIHRoZSBmaWx0ZXIuCj4KPiByZWdhcmRzLAo+Cj4gV29qY2llY2ggU3RyemGza2Eg
d3JvdGU6Cj4+Cj4+IFRoZSBtb3N0IGNoYW5naW5nIGZpZWxkcyB3aWxsIGJlIEkgdGhpbms6Cj4+
ICBTdGF0dXMgKHJlYWQvdW5yZWFkKTogIGluIGZhY3QgSSdtIGFmZnJhaWQgb2YgdGhpcyBhdCBt
b3N0IC0gYW55Cj4+ICAgICAgICAgICAgICAgICAgICAgICAgIG1haWwgaW5jb21pbmcgdG8gdGhl
IHN5c3RlbSB3aWxsIG5lZWQgdG8gYmUKPj4gaW5kZXhlZCBhdCBsZWFzdCB0d2ljZQo+PiAgRmxh
Z3M6ICAgMC4ubiB2YWx1ZXMgZnJvbSBlbnVtCj4+ICBUYWdzOiAgICAwLi5uIHZhbHVlcyBmcm9t
IGVudW0KPj4KPj4gT2YgY291cnNlIGFsbCB0aGUgb3RoZXIgZmllbGRzIGNhbiBhbHNvIGNoYW5n
ZSAtIGV2ZW4gY29udGVudCBpbiBkcmFmdAo+PiBtZXNzYWdlcwo+PiAoaXQncyBsaXZlIGNvbnRl
bnQsIG5vdCBhcmNoaXZhbCkgLSBidXQgaW4gc3VjaCBhIGNhc2UgSSdtIHJlYWR5IHRvIGdvCj4+
IHdpdGggdGhlIHJlLWluZGV4aW5nLgo+Pgo+Pj4KPj4+IEhpIFdvamNpZWNoLAo+Pj4gICAgY2Fu
IHlvdSBwbGVhc2UgZ2l2ZSB1cyBhIGJpdCBtb3JlIHNwZWNpZmljIGluZm9ybWF0aW9uIGFib3V0
IHRoZSBtZXRhCj4+PiBkYXRhIGZpZWxkcyB0aGF0IHdpbGwgY2hhbmdlPyBJIHdvdWxkIHJlY29t
bWVuZCB5b3UgbG9va2luZyBhdCAgY3JlYXRpbmcKPj4+IGZpbHRlcnMgZnJvbSB5b3VyIHByaW1h
cnkgcGVyc2lzdGVuY3kgZm9yIHF1ZXJ5IGNsYXVzZXMgc3VjaAo+Pj4gYXMgdW5yZWFkL3JlYWQs
IG1haWxib3ggZm9sZGVycywgZXQgYy4KPj4+ICAgICAgICAgICBrYXJsCj4+PiAgICAxMiBzZXAg
MjAwOCBrbC4gMTMuNTcgc2tyZXYgV29qY2llY2ggU3RyemE/a2E6Cj4+Pgo+Pj4+Cj4+Pj4gSGku
Cj4+Pj4KPj4+PiAgSSdtIG5ldyB0byBMdWNlbmUgYW5kIEkgd291bGQgbGlrZSB0byBnZXQgYSBm
ZXcgYW5zd2VycyAodGhleSBjYW4KPj4+PiAgYmUgbGFtZSkKPj4+Pgo+Pj4+ICBJIHdhbnQgdG8g
aW5kZXggbGFyZ2UgYW1vdW50IG9mIGVtYWlscyB1c2luZyBMdWNlbmUgKG1heWJlIFNPTFIpLCAg
bm90Cj4+Pj4gb25seQo+Pj4+ICB0aGUgY29udGVudHMgYnV0IGFsc28gc29tZSBtZXRhZGF0YSBs
aWtlIHN0YXRlIG9yIGZsYWdzLiBUaGUKPj4+PiAgcHJvYmxlbSBpcyB0aGF0IHRoZSBtZXRhZGF0
YSB3aWxsIGNoYW5nZSBkdXJpbmcgbWFpbCBsaWZlY3ljbGUsCj4+Pj4gIGFsdGhvdWdoIG11Y2gg
c21hbGxlciB1cGRhdGluZyB0aGlzIGluZm9ybWF0aW9uIHdpbGwgcmVxdWlyZQo+Pj4+ICByZWlu
ZGV4IHRoZSB3aG9sZSBtYWlsIGNvbnRlbnQgd2hpY2ggSSBzZWUgcGVyZm9ybWFuY2UgYm90dGxl
bmVjay4KPj4+Pgo+Pj4+ICBJIGhhdmUgdGhlIGRhdGEgaW4gREIgYWxzbyBzbyBteSBmaXJzdCBx
dWVzdGlvbiBpczoKPj4+Pgo+Pj4+ICAtIGFyZSB0aGVyZSBhbnkgYmVzdCBwcmFjdGljZXMgdG8g
aW1wbGVtZW50IG15IG5lZWRzIChxdWVyeWluZyBib3RoCj4+Pj4gIGx1Y2VuZSAmIERCIGFuZCB0
aGVuIG1lcmdpbmcgaW4gbWVtb3J5PywgY2xvc2Ugb25lIGV5ZSBhbmQgcmUtaW5kZXgKPj4+PiAg
dGhlIHdob2xlIGNvbnRlbnQgb24gZXZlcnkgbWV0YWRhdGEgY2hhbmdlPyBvdGhlcnM/KQo+Pj4+
Cj4+Pj4gIC0gaXMgYXQgYWxsIEx1Y2VuZSBnb29kIHNvbHV0aW9uIGZvciBteSBwcm9ibGVtPwo+
Pj4+Cj4+Pj4gIC0gYXJlIHRoZXJlIGFueSBwbGFucyB0byBpbXBsZW1lbnQgZmllbGQgdXBkYXRl
cyBpbiBtb3JlIGVmZmljaWVudCAgd2F5Cj4+Pj4gdGhlbgo+Pj4+ICBkZWxldGUvaW5zZXJ0IHRo
ZSB3aG9sZSBkb2N1bWVudD8gaWYgeWVzIHdoYXQncyB0aGUgdGltZSBob3Jpem9uPwo+Pj4+Cj4+
Pj4KPj4+PiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJlc3QgcmVnYXJk
cwo+Pj4+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdvanRl
awo+Pj4+Cj4+Pj4KPj4+PiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPj4+PiBUbyB1bnN1YnNjcmliZSwgZS1tYWls
OiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPj4+PiBGb3IgYWRkaXRp
b25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+
Pj4+Cj4+Pj4KPj4KPj4KPj4KPj4+Cj4+PiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPj4+IFRvIHVuc3Vic2NyaWJl
LCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+Pj4gRm9y
IGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNo
ZS5vcmcKPj4+Cj4+Cj4+Cj4+Cj4+Cj4KPgo+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+IFRvIHVuc3Vic2NyaWJl
LCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+IEZvciBh
ZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUu
b3JnCj4KPgo=


From java-user-return-36117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 14 13:59:06 2008
Return-Path: <java-user-return-36117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7216 invoked from network); 14 Sep 2008 13:59:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Sep 2008 13:59:05 -0000
Received: (qmail 90054 invoked by uid 500); 14 Sep 2008 13:58:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90022 invoked by uid 500); 14 Sep 2008 13:58:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90011 invoked by uid 99); 14 Sep 2008 13:58:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Sep 2008 06:58:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of petercheng456@gmail.com designates 209.85.142.189 as permitted sender)
Received: from [209.85.142.189] (HELO ti-out-0910.google.com) (209.85.142.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Sep 2008 13:57:56 +0000
Received: by ti-out-0910.google.com with SMTP id b8so983495tic.11
        for <java-user@lucene.apache.org>; Sun, 14 Sep 2008 06:58:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:subject:date
         :message-id:mime-version:content-type:content-transfer-encoding
         :x-mailer:x-mimeole:thread-index;
        bh=c6mLBNYJwfjjYGdrJDXmGHereJmtyFQlnb1VkCQEWeQ=;
        b=SVuBteueeBu/2xmGJ3w38em9cBpSljrqJcTFTU0gBpPJPROah0/YZbPNkqg1rQB119
         4ZxK0SirxMqEGkv1ZTX4LBVukizioOZdA8fEOl9l3dKxzdDSJx/H/6tf7JMIqu5QxCru
         bHXbEilFkMmOMfTNSYMtUyORjRqBH8E+KvGEg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:subject:date:message-id:mime-version:content-type
         :content-transfer-encoding:x-mailer:x-mimeole:thread-index;
        b=wN78dgzOQbXdGnHe5veZ0QSh3a9GuORIi6KrCbHC7tvsQiMf9fSGoBzQfAaxyKtBvH
         QfICO5g+k4d+0SA/DeqUQqWocPIKOt5aqKIr7otcYH6f3l/SZlgVB6OnBeiE/bAdJb+k
         BgLHaLw61KkVQIvBt1rHLpPzvbk9z2Xq3WYAI=
Received: by 10.110.3.15 with SMTP id 15mr8422151tic.48.1221400707985;
        Sun, 14 Sep 2008 06:58:27 -0700 (PDT)
Received: from gcheng ( [211.65.234.238])
        by mx.google.com with ESMTPS id y3sm7847271tia.3.2008.09.14.06.58.23
        (version=SSLv3 cipher=RC4-MD5);
        Sun, 14 Sep 2008 06:58:26 -0700 (PDT)
From: "Peter Cheng" <petercheng456@gmail.com>
To: <java-user@lucene.apache.org>
Subject: Memory eaten up by String, Term and TermInfo?
Date: Sun, 14 Sep 2008 21:58:24 +0800
Message-ID: <02dc01c91671$f813ea20$8c458c0a@gcheng>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3350
Thread-Index: AckWcfR0rdumEV7YTsuUkZRVn/IDJQ==
X-Virus-Checked: Checked by ClamAV on apache.org

Hi the community,

In a Tomcat application (a keyword-based search engine), I use Lucene =
2.3.2 to index 60 million documents, but each document is small-sized. =
The total index size is about 60GB.
After a successful running for a week, Tomcat was down due to =
OutOfMemory. Then I restarted Tomcat, and after three days, I used jmap =
and jhat to find out what had eaten up the memory. I found millions of =
instances of String, Term, and TermInfo. Why?

In my application, I use a single IndexSearcher object, which is shared =
by all the requests. It is opened initially, and will never be closed.

What could have eaten up the memory? What is referring to millions of =
instances of Term and TermInfo?

I can provide any snippets of codes if necessary.
Thank you so much!

Gong Cheng


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 14 14:03:56 2008
Return-Path: <java-user-return-36118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9181 invoked from network); 14 Sep 2008 14:03:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Sep 2008 14:03:56 -0000
Received: (qmail 94611 invoked by uid 500); 14 Sep 2008 14:03:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94576 invoked by uid 500); 14 Sep 2008 14:03:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94565 invoked by uid 99); 14 Sep 2008 14:03:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Sep 2008 07:03:46 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 209.85.200.175 as permitted sender)
Received: from [209.85.200.175] (HELO wf-out-1314.google.com) (209.85.200.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Sep 2008 14:02:46 +0000
Received: by wf-out-1314.google.com with SMTP id 28so1673388wfc.20
        for <java-user@lucene.apache.org>; Sun, 14 Sep 2008 07:03:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=zCeLFJ9iZjxtASY5yaDpcWc9j1p9uU10y0ZEbHJdnI4=;
        b=OSz9jb6E7rzhtfuXRNYadBjHZhB4GXz2IludcYupgaKWjgFLi2EeCQQyWlrFajLOC5
         ck9hwFXf7FN1b5GuRCCsiMh4C9ecTsRDcG8IATk+VJFkEPCyhAja8Ul2ZG2d1bWzoNbs
         2pHWaxPGdM0n6629C7ShnAyrJNWE6VinZX/tE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=icyOW7cVTIj0Xq5d3BTCUbO03QMK4wcDKFf9qnVWsvgdLueaZ6OnOzqQBEqoUs9ZQl
         s7KPBFyct7r2pCHQkxZ+x1QqcaGwgBk568z6PD8o7M4eFBgCrITeouX9Mf5fJUOUoJNC
         QBzsXIDPBJyDMpBLW3enE73PMc02KTXU0dWXI=
Received: by 10.142.207.8 with SMTP id e8mr2261819wfg.281.1221400999176;
        Sun, 14 Sep 2008 07:03:19 -0700 (PDT)
Received: by 10.142.111.8 with HTTP; Sun, 14 Sep 2008 07:03:19 -0700 (PDT)
Message-ID: <6e3ae6310809140703l790d3928x5b28f0e7d825398c@mail.gmail.com>
Date: Sun, 14 Sep 2008 07:03:19 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Memory eaten up by String, Term and TermInfo?
In-Reply-To: <02dc01c91671$f813ea20$8c458c0a@gcheng>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_39633_13402231.1221400999147"
References: <02dc01c91671$f813ea20$8c458c0a@gcheng>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_39633_13402231.1221400999147
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Can you try to update to the latest Lucene svn version, like yesterday?
LUCENE-1383 was checked in yesterday. This patch is addressing a leak
problem particular to J2EE applications.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!

On Sun, Sep 14, 2008 at 6:58 AM, Peter Cheng <petercheng456@gmail.com>wrote:

> Hi the community,
>
> In a Tomcat application (a keyword-based search engine), I use Lucene 2.3.2
> to index 60 million documents, but each document is small-sized. The total
> index size is about 60GB.
> After a successful running for a week, Tomcat was down due to OutOfMemory.
> Then I restarted Tomcat, and after three days, I used jmap and jhat to find
> out what had eaten up the memory. I found millions of instances of String,
> Term, and TermInfo. Why?
>
> In my application, I use a single IndexSearcher object, which is shared by
> all the requests. It is opened initially, and will never be closed.
>
> What could have eaten up the memory? What is referring to millions of
> instances of Term and TermInfo?
>
> I can provide any snippets of codes if necessary.
> Thank you so much!
>
> Gong Cheng
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_39633_13402231.1221400999147--

From java-user-return-36119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 14 14:30:01 2008
Return-Path: <java-user-return-36119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18555 invoked from network); 14 Sep 2008 14:30:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Sep 2008 14:30:01 -0000
Received: (qmail 22048 invoked by uid 500); 14 Sep 2008 14:29:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22017 invoked by uid 500); 14 Sep 2008 14:29:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22006 invoked by uid 99); 14 Sep 2008 14:29:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Sep 2008 07:29:51 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Sep 2008 14:28:51 +0000
Received: by gxk6 with SMTP id 6so14478127gxk.5
        for <java-user@lucene.apache.org>; Sun, 14 Sep 2008 07:28:20 -0700 (PDT)
Received: by 10.150.186.21 with SMTP id j21mr9012094ybf.171.1221402500770;
        Sun, 14 Sep 2008 07:28:20 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id k41sm19779063rnd.6.2008.09.14.07.28.19
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sun, 14 Sep 2008 07:28:19 -0700 (PDT)
Message-Id: <2DFB7BA9-9357-4F55-AB19-E8BF586458FA@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <6e3ae6310809140703l790d3928x5b28f0e7d825398c@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Memory eaten up by String, Term and TermInfo?
Date: Sun, 14 Sep 2008 10:28:18 -0400
References: <02dc01c91671$f813ea20$8c458c0a@gcheng> <6e3ae6310809140703l790d3928x5b28f0e7d825398c@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Small correction: it was checked in this morning (at least, on the  
East Coast of the US).

So you need to either build your own JAR using Lucene's trunk, or,  
wait for tonite's build to run and then download the build artifacts  
from here:

     http://hudson.zones.apache.org/hudson/job/Lucene-trunk

If possible, please report back if this fixed your OutOfMemoryError.

2.4 will include this fix.

Mike

Chris Lu wrote:

> Can you try to update to the latest Lucene svn version, like  
> yesterday?
> LUCENE-1383 was checked in yesterday. This patch is addressing a leak
> problem particular to J2EE applications.
>
> -- 
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> DBSight customer, a shopping comparison site, (anonymous per  
> request) got
> 2.6 Million Euro funding!
>
> On Sun, Sep 14, 2008 at 6:58 AM, Peter Cheng  
> <petercheng456@gmail.com>wrote:
>
>> Hi the community,
>>
>> In a Tomcat application (a keyword-based search engine), I use  
>> Lucene 2.3.2
>> to index 60 million documents, but each document is small-sized.  
>> The total
>> index size is about 60GB.
>> After a successful running for a week, Tomcat was down due to  
>> OutOfMemory.
>> Then I restarted Tomcat, and after three days, I used jmap and jhat  
>> to find
>> out what had eaten up the memory. I found millions of instances of  
>> String,
>> Term, and TermInfo. Why?
>>
>> In my application, I use a single IndexSearcher object, which is  
>> shared by
>> all the requests. It is opened initially, and will never be closed.
>>
>> What could have eaten up the memory? What is referring to millions of
>> instances of Term and TermInfo?
>>
>> I can provide any snippets of codes if necessary.
>> Thank you so much!
>>
>> Gong Cheng
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 14 14:45:09 2008
Return-Path: <java-user-return-36120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25186 invoked from network); 14 Sep 2008 14:45:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Sep 2008 14:45:08 -0000
Received: (qmail 30734 invoked by uid 500); 14 Sep 2008 14:44:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30699 invoked by uid 500); 14 Sep 2008 14:44:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30688 invoked by uid 99); 14 Sep 2008 14:44:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Sep 2008 07:44:58 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of petercheng456@gmail.com designates 209.85.142.186 as permitted sender)
Received: from [209.85.142.186] (HELO ti-out-0910.google.com) (209.85.142.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Sep 2008 14:43:59 +0000
Received: by ti-out-0910.google.com with SMTP id b8so990198tic.11
        for <java-user@lucene.apache.org>; Sun, 14 Sep 2008 07:44:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:references:subject
         :date:message-id:mime-version:content-type:content-transfer-encoding
         :x-mailer:x-mimeole:thread-index:in-reply-to;
        bh=3MxZLeC1Xl4rP5tVaOEa9udFtXer+hOOCvJ9rGmLmcc=;
        b=DMZU3xOftFWhDlhYxKhwk2oB00A4qi3jUb1JaaTYrJ9/1gJZmmYrLj/DG0a5xXZz9x
         M+oolHHZ1s8qTiQEZ3DJWNIUcCoSJz/pb+FB5Ili/lQ5iz3mN14yEN5EwYWCqYLFNy7j
         17sXzGRfkTmhgKiew/8FYAlWk0j9nM4ELDnbQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:references:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:x-mailer:x-mimeole
         :thread-index:in-reply-to;
        b=sQtpw6NYeZ3feC5qfTNFZm478lIJArXhnjWZISKo1wi4FaM1eTT2tyzL9EORlFUD0Q
         a0gMN5jlyMoAv5XcW7msh3e/qU/n+PBnHH4ziTCQ9LigqSW+P5aKbNC86FWNC4LYRYru
         pgR1hRHKeZlD0pDS+N6hgnJ9d1uq1/6xJpOYo=
Received: by 10.110.57.6 with SMTP id f6mr8546845tia.35.1221403470950;
        Sun, 14 Sep 2008 07:44:30 -0700 (PDT)
Received: from gcheng ( [211.65.234.238])
        by mx.google.com with ESMTPS id d7sm8041970tib.4.2008.09.14.07.44.27
        (version=SSLv3 cipher=RC4-MD5);
        Sun, 14 Sep 2008 07:44:29 -0700 (PDT)
From: "Peter Cheng" <petercheng456@gmail.com>
To: <java-user@lucene.apache.org>
References: <02dc01c91671$f813ea20$8c458c0a@gcheng> <6e3ae6310809140703l790d3928x5b28f0e7d825398c@mail.gmail.com> <2DFB7BA9-9357-4F55-AB19-E8BF586458FA@mikemccandless.com>
Subject: RE: Memory eaten up by String, Term and TermInfo?
Date: Sun, 14 Sep 2008 22:44:28 +0800
Message-ID: <02e001c91678$667aa4d0$8c458c0a@gcheng>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3350
Thread-Index: AckWdl0PQFXQ9rc3RdKl/tcAsL+FGgAAYl4A
In-Reply-To: <2DFB7BA9-9357-4F55-AB19-E8BF586458FA@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I'll try later and report back ASAP. You know, it takes days to cause OOM.
Thank you all!

Gong

> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com] 
> Sent: Sunday, September 14, 2008 10:28 PM
> To: java-user@lucene.apache.org
> Subject: Re: Memory eaten up by String, Term and TermInfo?
> 
> 
> Small correction: it was checked in this morning (at least, on the  
> East Coast of the US).
> 
> So you need to either build your own JAR using Lucene's trunk, or,  
> wait for tonite's build to run and then download the build artifacts  
> from here:
> 
>      http://hudson.zones.apache.org/hudson/job/Lucene-trunk
> 
> If possible, please report back if this fixed your OutOfMemoryError.
> 
> 2.4 will include this fix.
> 
> Mike
> 
> Chris Lu wrote:
> 
> > Can you try to update to the latest Lucene svn version, like  
> > yesterday?
> > LUCENE-1383 was checked in yesterday. This patch is 
> addressing a leak
> > problem particular to J2EE applications.
> >
> > -- 
> > Chris Lu
> > -------------------------
> > Instant Scalable Full-Text Search On Any Database/Application
> > site: http://www.dbsight.net
> > demo: http://search.dbsight.com
> > Lucene Database Search in 3 minutes:
> > 
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database
> _Search_in_3_minutes
> > DBSight customer, a shopping comparison site, (anonymous per  
> > request) got
> > 2.6 Million Euro funding!
> >
> > On Sun, Sep 14, 2008 at 6:58 AM, Peter Cheng  
> > <petercheng456@gmail.com>wrote:
> >
> >> Hi the community,
> >>
> >> In a Tomcat application (a keyword-based search engine), I use  
> >> Lucene 2.3.2
> >> to index 60 million documents, but each document is small-sized.  
> >> The total
> >> index size is about 60GB.
> >> After a successful running for a week, Tomcat was down due to  
> >> OutOfMemory.
> >> Then I restarted Tomcat, and after three days, I used jmap 
> and jhat  
> >> to find
> >> out what had eaten up the memory. I found millions of 
> instances of  
> >> String,
> >> Term, and TermInfo. Why?
> >>
> >> In my application, I use a single IndexSearcher object, which is  
> >> shared by
> >> all the requests. It is opened initially, and will never be closed.
> >>
> >> What could have eaten up the memory? What is referring to 
> millions of
> >> instances of Term and TermInfo?
> >>
> >> I can provide any snippets of codes if necessary.
> >> Thank you so much!
> >>
> >> Gong Cheng
> >>
> >>
> >> 
> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 14 17:38:16 2008
Return-Path: <java-user-return-36121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3261 invoked from network); 14 Sep 2008 17:38:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Sep 2008 17:38:16 -0000
Received: (qmail 34623 invoked by uid 500); 14 Sep 2008 17:38:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34273 invoked by uid 500); 14 Sep 2008 17:38:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34262 invoked by uid 99); 14 Sep 2008 17:38:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Sep 2008 10:38:05 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.68.5.17] (HELO relay03.pair.com) (209.68.5.17)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 14 Sep 2008 17:37:07 +0000
Received: (qmail 36523 invoked from network); 14 Sep 2008 17:36:36 -0000
Received: from unknown (HELO ?10.3.67.10?) (unknown)
  by unknown with SMTP; 14 Sep 2008 17:36:36 -0000
X-pair-Authenticated: 146.145.145.245
Subject: SpanQuery problem
From: Darren Govoni <darren@ontrenet.com>
To: java-user <java-user@lucene.apache.org>
Content-Type: text/plain
Date: Sun, 14 Sep 2008 13:36:38 -0400
Message-Id: <1221413798.12098.3.camel@nuraku>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
  I am seeing odd behavior with SpanNearQuery.

The problem is that with multiple fields, all fields beyond the first
one 'car' are not seen by the span. I didn't think the span meant to
sets of the same field, but rather to terms within a given field.

Document 1. 1 field (word)

word: car
word: cars
word: cars wash
word: cars lot


SpanNearyQuery with slop of 0. Wrapped by SpanFirstQuery with slop of 1.
Term query within is "word","cars*". No results found.

If I remove the first field word: car, it works. Also, if I increase the
slop, it will return results from only the first amount of fields in the
slop rather than terms within the field value.

Is what I am seeing the correct behavior? Doesn't seem like it.

What I am trying to do is span _within_ EACH field and match phrases
that begin with "cars*". Shouldn't be too hard to do I thought.

Darren


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 14 20:37:17 2008
Return-Path: <java-user-return-36122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1769 invoked from network); 14 Sep 2008 20:37:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Sep 2008 20:37:17 -0000
Received: (qmail 49735 invoked by uid 500); 14 Sep 2008 20:37:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49704 invoked by uid 500); 14 Sep 2008 20:37:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49692 invoked by uid 99); 14 Sep 2008 20:37:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Sep 2008 13:37:06 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.29] (HELO smtp-vbr9.xs4all.nl) (194.109.24.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Sep 2008 20:36:08 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr9.xs4all.nl (8.13.8/8.13.8) with ESMTP id m8EKa9T2075274
	for <java-user@lucene.apache.org>; Sun, 14 Sep 2008 22:36:09 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: SpanQuery problem
Date: Sun, 14 Sep 2008 22:36:08 +0200
User-Agent: KMail/1.9.9
References: <1221413798.12098.3.camel@nuraku>
In-Reply-To: <1221413798.12098.3.camel@nuraku>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200809142236.09017.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Op Sunday 14 September 2008 19:36:38 schreef Darren Govoni:
> Hi,
>   I am seeing odd behavior with SpanNearQuery.
>
> The problem is that with multiple fields, all fields beyond the first
> one 'car' are not seen by the span. I didn't think the span meant to
> sets of the same field, but rather to terms within a given field.
>
> Document 1. 1 field (word)
>
> word: car
> word: cars
> word: cars wash
> word: cars lot
>
>
> SpanNearyQuery with slop of 0. Wrapped by SpanFirstQuery with slop of
> 1. Term query within is "word","cars*". No results found.

There is no SpanPrefixQuery for cars* in Lucene. You'll need to
expand the prefix into indexed terms to create a SpanOrQuery
yourself. This is fairly straightforward from PrefixQuery and
SpanOrQuery.
Alternatively, have a look at the surround query parser in contrib
for a working example.

Regards,
Paul Elschot

>
> If I remove the first field word: car, it works. Also, if I increase
> the slop, it will return results from only the first amount of fields
> in the slop rather than terms within the field value.
>
> Is what I am seeing the correct behavior? Doesn't seem like it.
>
> What I am trying to do is span _within_ EACH field and match phrases
> that begin with "cars*". Shouldn't be too hard to do I thought.
>
> Darren
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 01:06:37 2008
Return-Path: <java-user-return-36123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82065 invoked from network); 15 Sep 2008 01:06:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 01:06:36 -0000
Received: (qmail 4776 invoked by uid 500); 15 Sep 2008 01:06:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4741 invoked by uid 500); 15 Sep 2008 01:06:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4730 invoked by uid 99); 15 Sep 2008 01:06:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Sep 2008 18:06:26 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.39.3.230] (HELO atmail-web1.pair.com) (66.39.3.230)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 15 Sep 2008 01:05:28 +0000
Received: (qmail 96884 invoked from network); 15 Sep 2008 01:04:59 -0000
Received: from localhost.pair.com (HELO webmail.pair.com) (127.0.0.1)
  by localhost.pair.com with SMTP; 15 Sep 2008 01:04:59 -0000
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain; charset="utf-8"
MIME-Version: 1.0
From:   <darren@ontrenet.com>
To: java-user@lucene.apache.org
Subject: Re: SpanQuery problem
Reply-To: darren@ontrenet.com
X-Origin: 146.145.145.245
Date: Sun, 14 Sep 2008 21:04:59 -0400
Message-Id: <49606.1221440699@ontrenet.com>
X-Mailer: AtMail 4.61 - 146.145.145.245 - darren@ontrenet.com
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Paul. I will study your response more, as I don't fully understand i=
t yet - specifically "You'll need to expand the prefix into indexed terms".

But what I want to do is so simple I'm surprised it cannot be done.=20

You are saying that I cannot find all fields across all documents that begi=
n with a string or space bounded word? Consider 1 document with:

word: blue car
word: red car
word: car door
word: car wheel

Using whitespace analyzer I simply want to query all fields in all documents
where 'car' is the at the very front of the field.

word: car door
word: car wheel

This cannot be done? I don't want to retrieve all of them and prune the res=
ults myself because it will consume lots of resources.

thanks so much!

Darren=20

On Sun Sep 14 16:36 , Paul Elschot  sent:Op Sunday 14 September 2008 19:36:=
38 schreef Darren Govoni:
> Hi,
>   I am seeing odd behavior with SpanNearQuery.
>
> The problem is that with multiple fields, all fields beyond the first
> one 'car' are not seen by the span. I didn't think the span meant to
> sets of the same field, but rather to terms within a given field.
>
> Document 1. 1 field (word)
>
> word: car
> word: cars
> word: cars wash
> word: cars lot
>
>
> SpanNearyQuery with slop of 0. Wrapped by SpanFirstQuery with slop of
> 1. Term query within is "word","cars*". No results found.

There is no SpanPrefixQuery for cars* in Lucene. You'll need to
expand the prefix into indexed terms to create a SpanOrQuery
yourself. This is fairly straightforward from PrefixQuery and
SpanOrQuery.
Alternatively, have a look at the surround query parser in contrib
for a working example.

Regards,
Paul Elschot

>
> If I remove the first field word: car, it works. Also, if I increase
> the slop, it will return results from only the first amount of fields
> in the slop rather than terms within the field value.
>
> Is what I am seeing the correct behavior? Doesn't seem like it.
>
> What I am trying to do is span _within_ EACH field and match phrases
> that begin with "cars*". Shouldn't be too hard to do I thought.
>
> Darren
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 01:15:35 2008
Return-Path: <java-user-return-36124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90753 invoked from network); 15 Sep 2008 01:15:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 01:15:35 -0000
Received: (qmail 11309 invoked by uid 500); 15 Sep 2008 01:15:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11281 invoked by uid 500); 15 Sep 2008 01:15:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11270 invoked by uid 99); 15 Sep 2008 01:15:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Sep 2008 18:15:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 01:14:25 +0000
Received: by gxk6 with SMTP id 6so15251618gxk.5
        for <java-user@lucene.apache.org>; Sun, 14 Sep 2008 18:14:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=pM/nP0ymPQgA3OvFRQ+uhO8qx6Z6X8P/jjmc2a+ECl4=;
        b=vNm71iQaw/GrXfz9pA0N8KnhAO/l+isOJqm3tjPmNhiZD5rEZa3GWZqzEuCX7XN+Uf
         /vgD7sdAQ7gJ+7g9j8H3rYU8p6XxtiuQhh7Bx7Z7MOL34kKKLHYjkHIobUzyEx6Vto4O
         ohV1GS2wU+4QY9RZPmNzvC0V/8ITfLLFQEwp8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=acdhvZ8Ad5pV8xHrNY9WbeHy0nMe3vT5Pr/K8kMS1NoyH5sz0WSy5n8X/cXc9Qm0p9
         RYC81CC8/FxW4YMr90yZjlJ2t0ORQfO0rlrTBvBUQ9uG7BzKksgr1hTdoC8YtcDvvsvh
         +sIWMGocsUFMc6iVNmL3x9QqRoribr3K7cZwI=
Received: by 10.90.100.20 with SMTP id x20mr8856927agb.107.1221441296505;
        Sun, 14 Sep 2008 18:14:56 -0700 (PDT)
Received: from ?192.168.1.100? ( [68.198.57.217])
        by mx.google.com with ESMTPS id 18sm22158425agb.12.2008.09.14.18.14.55
        (version=SSLv3 cipher=RC4-MD5);
        Sun, 14 Sep 2008 18:14:55 -0700 (PDT)
Message-ID: <48CDB70E.3040501@gmail.com>
Date: Sun, 14 Sep 2008 21:14:54 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.16 (X11/20080725)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: SpanQuery problem
References: <49606.1221440699@ontrenet.com>
In-Reply-To: <49606.1221440699@ontrenet.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

This doesn't really make sense - you define a document with the same 
field multiple times, then say you want to search documents, you but you 
seem to want the results to be fields from that document you defined? Do 
you want a search that returns documents or fields?

darren@ontrenet.com wrote:
> Thanks Paul. I will study your response more, as I don't fully understand it yet - specifically "You'll need to expand the prefix into indexed terms".
>
> But what I want to do is so simple I'm surprised it cannot be done. 
>
> You are saying that I cannot find all fields across all documents that begin with a string or space bounded word? Consider 1 document with:
>
> word: blue car
> word: red car
> word: car door
> word: car wheel
>
> Using whitespace analyzer I simply want to query all fields in all documents
> where 'car' is the at the very front of the field.
>
> word: car door
> word: car wheel
>
> This cannot be done? I don't want to retrieve all of them and prune the results myself because it will consume lots of resources.
>
> thanks so much!
>
> Darren 
>
> On Sun Sep 14 16:36 , Paul Elschot  sent:Op Sunday 14 September 2008 19:36:38 schreef Darren Govoni:
>   
>> Hi,
>>   I am seeing odd behavior with SpanNearQuery.
>>
>> The problem is that with multiple fields, all fields beyond the first
>> one 'car' are not seen by the span. I didn't think the span meant to
>> sets of the same field, but rather to terms within a given field.
>>
>> Document 1. 1 field (word)
>>
>> word: car
>> word: cars
>> word: cars wash
>> word: cars lot
>>
>>
>> SpanNearyQuery with slop of 0. Wrapped by SpanFirstQuery with slop of
>> 1. Term query within is "word","cars*". No results found.
>>     
>
> There is no SpanPrefixQuery for cars* in Lucene. You'll need to
> expand the prefix into indexed terms to create a SpanOrQuery
> yourself. This is fairly straightforward from PrefixQuery and
> SpanOrQuery.
> Alternatively, have a look at the surround query parser in contrib
> for a working example.
>
> Regards,
> Paul Elschot
>
>   
>> If I remove the first field word: car, it works. Also, if I increase
>> the slop, it will return results from only the first amount of fields
>> in the slop rather than terms within the field value.
>>
>> Is what I am seeing the correct behavior? Doesn't seem like it.
>>
>> What I am trying to do is span _within_ EACH field and match phrases
>> that begin with "cars*". Shouldn't be too hard to do I thought.
>>
>> Darren
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>     
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 01:53:27 2008
Return-Path: <java-user-return-36125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27302 invoked from network); 15 Sep 2008 01:53:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 01:53:27 -0000
Received: (qmail 28430 invoked by uid 500); 15 Sep 2008 01:53:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28395 invoked by uid 500); 15 Sep 2008 01:53:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28384 invoked by uid 99); 15 Sep 2008 01:53:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Sep 2008 18:53:17 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.39.3.230] (HELO atmail-web1.pair.com) (66.39.3.230)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 15 Sep 2008 01:52:19 +0000
Received: (qmail 97045 invoked from network); 15 Sep 2008 01:52:50 -0000
Received: from localhost.pair.com (HELO webmail.pair.com) (127.0.0.1)
  by localhost.pair.com with SMTP; 15 Sep 2008 01:52:50 -0000
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain; charset="utf-8"
MIME-Version: 1.0
From:   <darren@ontrenet.com>
To: java-user@lucene.apache.org, Mark Miller <markrmiller@gmail.com>
Subject: Re: SpanQuery problem
Reply-To: darren@ontrenet.com
X-Origin: 146.145.145.245
Date: Sun, 14 Sep 2008 21:52:50 -0400
Message-Id: <49942.1221443570@ontrenet.com>
X-Mailer: AtMail 4.61 - 146.145.145.245 - darren@ontrenet.com
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, return the document, but the problem is with SpanNearQuery it does not=
 return the documents I expect.
Sorry I did not explain it well. Consider 2 documents each with "word" fiel=
ds.

Document 1

word: blue bird
word: blue car

Document 2

word: sky blue
word: sea blue

I want to search for 'blue' and ONLY return Document 1 as I already know
that the term 'blue' MUST appear at the front of the field word:

SpanNearQuery with slop of 0 or 1 won't do this if Document 1 has other fie=
lds
like this.

Document 1 - IS NOT FOUND WITH SPAN NEAR 0 or 1

word: some blue
word: another blue
word: blue bird
word: blue car

Expanding the Span slop to 3 will find Document 1 above this line, however
I thought the slop meant within the field terms. It seems to refer to the l=
ist of fields rather than terms. This is unexpected behavior to me. But I'm=
 no lucene expert.

Thanks for any thoughts.

Darren


darren@ontrenet.com wrote:
> Thanks Paul. I will study your response more, as I don't fully understand=
 it yet - specifically "You'll need to expand the prefix into indexed terms=
".
>
> But what I want to do is so simple I'm surprised it cannot be done.=20
>
> You are saying that I cannot find all fields across all documents that be=
gin with a string or space bounded word? Consider 1 document with:
>
> word: blue car
> word: red car
> word: car door
> word: car wheel
>
> Using whitespace analyzer I simply want to query all fields in all docume=
nts
> where 'car' is the at the very front of the field.
>
> word: car door
> word: car wheel
>
> This cannot be done? I don't want to retrieve all of them and prune the r=
esults myself because it will consume lots of resources.
>
> thanks so much!
>
> Darren=20
>
> On Sun Sep 14 16:36 , Paul Elschot  sent:Op Sunday 14 September 2008 19:3=
6:38 schreef Darren Govoni:
>=20=20=20
>> Hi,
>>   I am seeing odd behavior with SpanNearQuery.
>>
>> The problem is that with multiple fields, all fields beyond the first
>> one 'car' are not seen by the span. I didn't think the span meant to
>> sets of the same field, but rather to terms within a given field.
>>
>> Document 1. 1 field (word)
>>
>> word: car
>> word: cars
>> word: cars wash
>> word: cars lot
>>
>>
>> SpanNearyQuery with slop of 0. Wrapped by SpanFirstQuery with slop of
>> 1. Term query within is "word","cars*". No results found.
>>=20=20=20=20=20
>
> There is no SpanPrefixQuery for cars* in Lucene. You'll need to
> expand the prefix into indexed terms to create a SpanOrQuery
> yourself. This is fairly straightforward from PrefixQuery and
> SpanOrQuery.
> Alternatively, have a look at the surround query parser in contrib
> for a working example.
>
> Regards,
> Paul Elschot
>
>=20=20=20
>> If I remove the first field word: car, it works. Also, if I increase
>> the slop, it will return results from only the first amount of fields
>> in the slop rather than terms within the field value.
>>
>> Is what I am seeing the correct behavior? Doesn't seem like it.
>>
>> What I am trying to do is span _within_ EACH field and match phrases
>> that begin with "cars*". Shouldn't be too hard to do I thought.
>>
>> Darren
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20=20=20=20=20
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>=20=20=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 02:52:37 2008
Return-Path: <java-user-return-36126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63011 invoked from network); 15 Sep 2008 02:52:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 02:52:37 -0000
Received: (qmail 46316 invoked by uid 500); 15 Sep 2008 02:52:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46278 invoked by uid 500); 15 Sep 2008 02:52:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46267 invoked by uid 99); 15 Sep 2008 02:52:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Sep 2008 19:52:26 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 02:51:27 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id AB78530EFC16; Sun, 14 Sep 2008 20:51:28 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-69-68-189-191.dyn.embarqhsd.net [69.68.189.191])
	by ehatchersolutions.com (Postfix) with ESMTP id 5A26E30EFC16
	for <java-user@lucene.apache.org>; Sun, 14 Sep 2008 20:51:25 -0600 (MDT)
Message-Id: <DEAD1BBE-08D2-4E16-A0BE-ADBBD33283F8@ehatchersolutions.com>
From: Erik Hatcher <erik@ehatchersolutions.com>
To: java-user@lucene.apache.org
In-Reply-To: <49942.1221443570@ontrenet.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v928.1)
Subject: Re: SpanQuery problem
Date: Sun, 14 Sep 2008 22:51:23 -0400
References: <49942.1221443570@ontrenet.com>
X-Mailer: Apple Mail (2.928.1)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.6 required=5.0 tests=BAYES_00,RCVD_IN_SORBS_DUL 
	autolearn=no version=3.1.1

SpanFirstQuery - is that what you're looking for?  A SpanOrQuery of an  
expanded set of SpanFirstQuery's for all Terms that start with  
"car" (via a TermEnum).

However, in this specialized case where you know exactly what you want  
to index upon (the first word of a string), then one nice solution to  
consider is indexing that first word as its very own field.

   Document 1
     word: blue bird
     word: blue card
     first_word: blue (term frequency = 2)

   Document 2
     word: sky blue
     word: sea blue
     first_word: sea
     first_word: sky

The tee token filter stuff would be a clever way to implement it via a  
single tokenization pass, though not the only way.

	Erik

On Sep 14, 2008, at 9:52 PM, <darren@ontrenet.com> wrote:

> Yes, return the document, but the problem is with SpanNearQuery it  
> does not return the documents I expect.
> Sorry I did not explain it well. Consider 2 documents each with  
> "word" fields.
>
> Document 1
>
> word: blue bird
> word: blue car
>
> Document 2
>
> word: sky blue
> word: sea blue
>
> I want to search for 'blue' and ONLY return Document 1 as I already  
> know
> that the term 'blue' MUST appear at the front of the field word:
>
> SpanNearQuery with slop of 0 or 1 won't do this if Document 1 has  
> other fields
> like this.
>
> Document 1 - IS NOT FOUND WITH SPAN NEAR 0 or 1
>
> word: some blue
> word: another blue
> word: blue bird
> word: blue car
>
> Expanding the Span slop to 3 will find Document 1 above this line,  
> however
> I thought the slop meant within the field terms. It seems to refer  
> to the list of fields rather than terms. This is unexpected behavior  
> to me. But I'm no lucene expert.
>
> Thanks for any thoughts.
>
> Darren
>
>
> darren@ontrenet.com wrote:
>> Thanks Paul. I will study your response more, as I don't fully  
>> understand it yet - specifically "You'll need to expand the prefix  
>> into indexed terms".
>>
>> But what I want to do is so simple I'm surprised it cannot be done.
>>
>> You are saying that I cannot find all fields across all documents  
>> that begin with a string or space bounded word? Consider 1 document  
>> with:
>>
>> word: blue car
>> word: red car
>> word: car door
>> word: car wheel
>>
>> Using whitespace analyzer I simply want to query all fields in all  
>> documents
>> where 'car' is the at the very front of the field.
>>
>> word: car door
>> word: car wheel
>>
>> This cannot be done? I don't want to retrieve all of them and prune  
>> the results myself because it will consume lots of resources.
>>
>> thanks so much!
>>
>> Darren
>>
>> On Sun Sep 14 16:36 , Paul Elschot  sent:Op Sunday 14 September  
>> 2008 19:36:38 schreef Darren Govoni:
>>
>>> Hi,
>>>  I am seeing odd behavior with SpanNearQuery.
>>>
>>> The problem is that with multiple fields, all fields beyond the  
>>> first
>>> one 'car' are not seen by the span. I didn't think the span meant to
>>> sets of the same field, but rather to terms within a given field.
>>>
>>> Document 1. 1 field (word)
>>>
>>> word: car
>>> word: cars
>>> word: cars wash
>>> word: cars lot
>>>
>>>
>>> SpanNearyQuery with slop of 0. Wrapped by SpanFirstQuery with slop  
>>> of
>>> 1. Term query within is "word","cars*". No results found.
>>>
>>
>> There is no SpanPrefixQuery for cars* in Lucene. You'll need to
>> expand the prefix into indexed terms to create a SpanOrQuery
>> yourself. This is fairly straightforward from PrefixQuery and
>> SpanOrQuery.
>> Alternatively, have a look at the surround query parser in contrib
>> for a working example.
>>
>> Regards,
>> Paul Elschot
>>
>>
>>> If I remove the first field word: car, it works. Also, if I increase
>>> the slop, it will return results from only the first amount of  
>>> fields
>>> in the slop rather than terms within the field value.
>>>
>>> Is what I am seeing the correct behavior? Doesn't seem like it.
>>>
>>> What I am trying to do is span _within_ EACH field and match phrases
>>> that begin with "cars*". Shouldn't be too hard to do I thought.
>>>
>>> Darren
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 04:26:48 2008
Return-Path: <java-user-return-36127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22039 invoked from network); 15 Sep 2008 04:26:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 04:26:48 -0000
Received: (qmail 89430 invoked by uid 500); 15 Sep 2008 04:26:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89404 invoked by uid 500); 15 Sep 2008 04:26:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89391 invoked by uid 99); 15 Sep 2008 04:26:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Sep 2008 21:26:37 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.68.5.16] (HELO relay02.pair.com) (209.68.5.16)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 15 Sep 2008 04:25:39 +0000
Received: (qmail 59292 invoked from network); 15 Sep 2008 04:26:07 -0000
Received: from unknown (HELO ?10.3.67.10?) (unknown)
  by unknown with SMTP; 15 Sep 2008 04:26:07 -0000
X-pair-Authenticated: 146.145.145.245
Subject: Re: SpanQuery problem
From: Darren Govoni <darren@ontrenet.com>
To: java-user@lucene.apache.org
In-Reply-To: <DEAD1BBE-08D2-4E16-A0BE-ADBBD33283F8@ehatchersolutions.com>
References: <49942.1221443570@ontrenet.com>
	 <DEAD1BBE-08D2-4E16-A0BE-ADBBD33283F8@ehatchersolutions.com>
Content-Type: text/plain
Date: Mon, 15 Sep 2008 00:26:08 -0400
Message-Id: <1221452768.6892.7.camel@nuraku>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Erik,

I used SpanFirstQuery as well. 
Basically, I create SpanTermQuery for each word I want to find in
succession in the word: field.

I apply those to a SpanNearQuery with a slop of 1 (meaning the terms
have to be next to each other - successive words) and then
embed that in a SpanFirstQuery to indicate the terms should come first
in the field. 

It does not seem to return the correct results per my example below.
Documents with multiple values for the field being searched where some
of the values do not match the span, the document is NOT returned.

Darren

On Sun, 2008-09-14 at 22:51 -0400, Erik Hatcher wrote:
> SpanFirstQuery - is that what you're looking for?  A SpanOrQuery of an  
> expanded set of SpanFirstQuery's for all Terms that start with  
> "car" (via a TermEnum).
> 
> However, in this specialized case where you know exactly what you want  
> to index upon (the first word of a string), then one nice solution to  
> consider is indexing that first word as its very own field.
> 
>    Document 1
>      word: blue bird
>      word: blue card
>      first_word: blue (term frequency = 2)
> 
>    Document 2
>      word: sky blue
>      word: sea blue
>      first_word: sea
>      first_word: sky
> 
> The tee token filter stuff would be a clever way to implement it via a  
> single tokenization pass, though not the only way.
> 
> 	Erik
> 
> On Sep 14, 2008, at 9:52 PM, <darren@ontrenet.com> wrote:
> 
> > Yes, return the document, but the problem is with SpanNearQuery it  
> > does not return the documents I expect.
> > Sorry I did not explain it well. Consider 2 documents each with  
> > "word" fields.
> >
> > Document 1
> >
> > word: blue bird
> > word: blue car
> >
> > Document 2
> >
> > word: sky blue
> > word: sea blue
> >
> > I want to search for 'blue' and ONLY return Document 1 as I already  
> > know
> > that the term 'blue' MUST appear at the front of the field word:
> >
> > SpanNearQuery with slop of 0 or 1 won't do this if Document 1 has  
> > other fields
> > like this.
> >
> > Document 1 - IS NOT FOUND WITH SPAN NEAR 0 or 1
> >
> > word: some blue
> > word: another blue
> > word: blue bird
> > word: blue car
> >
> > Expanding the Span slop to 3 will find Document 1 above this line,  
> > however
> > I thought the slop meant within the field terms. It seems to refer  
> > to the list of fields rather than terms. This is unexpected behavior  
> > to me. But I'm no lucene expert.
> >
> > Thanks for any thoughts.
> >
> > Darren
> >
> >
> > darren@ontrenet.com wrote:
> >> Thanks Paul. I will study your response more, as I don't fully  
> >> understand it yet - specifically "You'll need to expand the prefix  
> >> into indexed terms".
> >>
> >> But what I want to do is so simple I'm surprised it cannot be done.
> >>
> >> You are saying that I cannot find all fields across all documents  
> >> that begin with a string or space bounded word? Consider 1 document  
> >> with:
> >>
> >> word: blue car
> >> word: red car
> >> word: car door
> >> word: car wheel
> >>
> >> Using whitespace analyzer I simply want to query all fields in all  
> >> documents
> >> where 'car' is the at the very front of the field.
> >>
> >> word: car door
> >> word: car wheel
> >>
> >> This cannot be done? I don't want to retrieve all of them and prune  
> >> the results myself because it will consume lots of resources.
> >>
> >> thanks so much!
> >>
> >> Darren
> >>
> >> On Sun Sep 14 16:36 , Paul Elschot  sent:Op Sunday 14 September  
> >> 2008 19:36:38 schreef Darren Govoni:
> >>
> >>> Hi,
> >>>  I am seeing odd behavior with SpanNearQuery.
> >>>
> >>> The problem is that with multiple fields, all fields beyond the  
> >>> first
> >>> one 'car' are not seen by the span. I didn't think the span meant to
> >>> sets of the same field, but rather to terms within a given field.
> >>>
> >>> Document 1. 1 field (word)
> >>>
> >>> word: car
> >>> word: cars
> >>> word: cars wash
> >>> word: cars lot
> >>>
> >>>
> >>> SpanNearyQuery with slop of 0. Wrapped by SpanFirstQuery with slop  
> >>> of
> >>> 1. Term query within is "word","cars*". No results found.
> >>>
> >>
> >> There is no SpanPrefixQuery for cars* in Lucene. You'll need to
> >> expand the prefix into indexed terms to create a SpanOrQuery
> >> yourself. This is fairly straightforward from PrefixQuery and
> >> SpanOrQuery.
> >> Alternatively, have a look at the surround query parser in contrib
> >> for a working example.
> >>
> >> Regards,
> >> Paul Elschot
> >>
> >>
> >>> If I remove the first field word: car, it works. Also, if I increase
> >>> the slop, it will return results from only the first amount of  
> >>> fields
> >>> in the slop rather than terms within the field value.
> >>>
> >>> Is what I am seeing the correct behavior? Doesn't seem like it.
> >>>
> >>> What I am trying to do is span _within_ EACH field and match phrases
> >>> that begin with "cars*". Shouldn't be too hard to do I thought.
> >>>
> >>> Darren
> >>>
> >>>
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 04:55:21 2008
Return-Path: <java-user-return-36128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34180 invoked from network); 15 Sep 2008 04:55:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 04:55:21 -0000
Received: (qmail 7549 invoked by uid 500); 15 Sep 2008 04:55:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7510 invoked by uid 500); 15 Sep 2008 04:55:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7499 invoked by uid 99); 15 Sep 2008 04:55:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Sep 2008 21:55:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 04:54:11 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id C790930EFC16; Sun, 14 Sep 2008 22:54:43 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-69-68-189-191.dyn.embarqhsd.net [69.68.189.191])
	by ehatchersolutions.com (Postfix) with ESMTP id 5A7F830EFC16
	for <java-user@lucene.apache.org>; Sun, 14 Sep 2008 22:54:40 -0600 (MDT)
Message-Id: <EB448979-0491-49A5-BEED-B2BADA0E9403@ehatchersolutions.com>
From: Erik Hatcher <erik@ehatchersolutions.com>
To: java-user@lucene.apache.org
In-Reply-To: <1221452768.6892.7.camel@nuraku>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v928.1)
Subject: Re: SpanQuery problem
Date: Mon, 15 Sep 2008 00:54:38 -0400
References: <49942.1221443570@ontrenet.com> <DEAD1BBE-08D2-4E16-A0BE-ADBBD33283F8@ehatchersolutions.com> <1221452768.6892.7.camel@nuraku>
X-Mailer: Apple Mail (2.928.1)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.6 required=5.0 tests=BAYES_00,RCVD_IN_SORBS_DUL 
	autolearn=no version=3.1.1

Ah, ok...  so I basically replied and said "why don't you try what  
you're already said you were trying, because i didn't read clearly  
enough".  mea culpa.

So yeah, that is an awkward situation that Lucene doesn't currently  
address quite as intuitively as one might think.  Multivalued fields  
come in different varieties, the ones that want a continuously  
incrementing term position offset, and one that wants to overlay  
multiple values.  Seems like it could be done by being clever with the  
position increment and the order terms are emitted, allowing multiple  
valued fields to "stack".   Now am I making sense?

Kinda the inverse of a tee - folding multiple values together, *zip*.

Seems do-able... anything like this already out there?

Maybe somehow adding a field should make this explicit then, what to  
do with increments across multiple values.  Or can position increment  
be changed dynamically, based on the number of terms in the previous  
field instance, and set backwards?

Just rambling out loud...

	Erik


On Sep 15, 2008, at 12:26 AM, Darren Govoni wrote:

> Hi Erik,
>
> I used SpanFirstQuery as well.
> Basically, I create SpanTermQuery for each word I want to find in
> succession in the word: field.
>
> I apply those to a SpanNearQuery with a slop of 1 (meaning the terms
> have to be next to each other - successive words) and then
> embed that in a SpanFirstQuery to indicate the terms should come first
> in the field.
>
> It does not seem to return the correct results per my example below.
> Documents with multiple values for the field being searched where some
> of the values do not match the span, the document is NOT returned.
>
> Darren
>
> On Sun, 2008-09-14 at 22:51 -0400, Erik Hatcher wrote:
>> SpanFirstQuery - is that what you're looking for?  A SpanOrQuery of  
>> an
>> expanded set of SpanFirstQuery's for all Terms that start with
>> "car" (via a TermEnum).
>>
>> However, in this specialized case where you know exactly what you  
>> want
>> to index upon (the first word of a string), then one nice solution to
>> consider is indexing that first word as its very own field.
>>
>>   Document 1
>>     word: blue bird
>>     word: blue card
>>     first_word: blue (term frequency = 2)
>>
>>   Document 2
>>     word: sky blue
>>     word: sea blue
>>     first_word: sea
>>     first_word: sky
>>
>> The tee token filter stuff would be a clever way to implement it  
>> via a
>> single tokenization pass, though not the only way.
>>
>> 	Erik
>>
>> On Sep 14, 2008, at 9:52 PM, <darren@ontrenet.com> wrote:
>>
>>> Yes, return the document, but the problem is with SpanNearQuery it
>>> does not return the documents I expect.
>>> Sorry I did not explain it well. Consider 2 documents each with
>>> "word" fields.
>>>
>>> Document 1
>>>
>>> word: blue bird
>>> word: blue car
>>>
>>> Document 2
>>>
>>> word: sky blue
>>> word: sea blue
>>>
>>> I want to search for 'blue' and ONLY return Document 1 as I already
>>> know
>>> that the term 'blue' MUST appear at the front of the field word:
>>>
>>> SpanNearQuery with slop of 0 or 1 won't do this if Document 1 has
>>> other fields
>>> like this.
>>>
>>> Document 1 - IS NOT FOUND WITH SPAN NEAR 0 or 1
>>>
>>> word: some blue
>>> word: another blue
>>> word: blue bird
>>> word: blue car
>>>
>>> Expanding the Span slop to 3 will find Document 1 above this line,
>>> however
>>> I thought the slop meant within the field terms. It seems to refer
>>> to the list of fields rather than terms. This is unexpected behavior
>>> to me. But I'm no lucene expert.
>>>
>>> Thanks for any thoughts.
>>>
>>> Darren
>>>
>>>
>>> darren@ontrenet.com wrote:
>>>> Thanks Paul. I will study your response more, as I don't fully
>>>> understand it yet - specifically "You'll need to expand the prefix
>>>> into indexed terms".
>>>>
>>>> But what I want to do is so simple I'm surprised it cannot be done.
>>>>
>>>> You are saying that I cannot find all fields across all documents
>>>> that begin with a string or space bounded word? Consider 1 document
>>>> with:
>>>>
>>>> word: blue car
>>>> word: red car
>>>> word: car door
>>>> word: car wheel
>>>>
>>>> Using whitespace analyzer I simply want to query all fields in all
>>>> documents
>>>> where 'car' is the at the very front of the field.
>>>>
>>>> word: car door
>>>> word: car wheel
>>>>
>>>> This cannot be done? I don't want to retrieve all of them and prune
>>>> the results myself because it will consume lots of resources.
>>>>
>>>> thanks so much!
>>>>
>>>> Darren
>>>>
>>>> On Sun Sep 14 16:36 , Paul Elschot  sent:Op Sunday 14 September
>>>> 2008 19:36:38 schreef Darren Govoni:
>>>>
>>>>> Hi,
>>>>> I am seeing odd behavior with SpanNearQuery.
>>>>>
>>>>> The problem is that with multiple fields, all fields beyond the
>>>>> first
>>>>> one 'car' are not seen by the span. I didn't think the span  
>>>>> meant to
>>>>> sets of the same field, but rather to terms within a given field.
>>>>>
>>>>> Document 1. 1 field (word)
>>>>>
>>>>> word: car
>>>>> word: cars
>>>>> word: cars wash
>>>>> word: cars lot
>>>>>
>>>>>
>>>>> SpanNearyQuery with slop of 0. Wrapped by SpanFirstQuery with slop
>>>>> of
>>>>> 1. Term query within is "word","cars*". No results found.
>>>>>
>>>>
>>>> There is no SpanPrefixQuery for cars* in Lucene. You'll need to
>>>> expand the prefix into indexed terms to create a SpanOrQuery
>>>> yourself. This is fairly straightforward from PrefixQuery and
>>>> SpanOrQuery.
>>>> Alternatively, have a look at the surround query parser in contrib
>>>> for a working example.
>>>>
>>>> Regards,
>>>> Paul Elschot
>>>>
>>>>
>>>>> If I remove the first field word: car, it works. Also, if I  
>>>>> increase
>>>>> the slop, it will return results from only the first amount of
>>>>> fields
>>>>> in the slop rather than terms within the field value.
>>>>>
>>>>> Is what I am seeing the correct behavior? Doesn't seem like it.
>>>>>
>>>>> What I am trying to do is span _within_ EACH field and match  
>>>>> phrases
>>>>> that begin with "cars*". Shouldn't be too hard to do I thought.
>>>>>
>>>>> Darren
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 07:55:45 2008
Return-Path: <java-user-return-36129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33837 invoked from network); 15 Sep 2008 07:55:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 07:55:45 -0000
Received: (qmail 31798 invoked by uid 500); 15 Sep 2008 07:55:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31617 invoked by uid 500); 15 Sep 2008 07:55:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31606 invoked by uid 99); 15 Sep 2008 07:55:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 00:55:34 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of idlemyth@gmail.com designates 66.249.90.177 as permitted sender)
Received: from [66.249.90.177] (HELO ik-out-1112.google.com) (66.249.90.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 07:54:33 +0000
Received: by ik-out-1112.google.com with SMTP id c30so1823603ika.5
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 00:54:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:subject:date
         :message-id:mime-version:content-type:x-mailer:thread-index
         :content-language;
        bh=dPGZWQEpJnoNiBrGlbbQNZVCVGGBmUIi9XEeVx7CTzo=;
        b=ikwA5HNrHijIytHNHUPkOa0KVqGtlC5DYgK86VkmExn4go0gc0Nf2BKPR7+hCpuNjp
         hGygKAoEPL/XX1UPhfnu7i40zQFYoh/aaZjsSJIUoAE5Hzjyu05IFx83UONtBAOOc/v3
         u7vkkrp/uoXle66ZU+GBf5C3aCh+Q2ZwnxbnQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:subject:date:message-id:mime-version:content-type:x-mailer
         :thread-index:content-language;
        b=ricTX664MENSnbI6OHU+zaf09BGFUs0fCJO80+tQSg8PII6hPMOIqp/RiCxEHFGhTl
         KCnlWpilb/UISopBkfLh312bQLE2/jDrO3EP62F1LmWxFs9Qk0ix7FDfQp6UdhgqYvUm
         RDKJMGojcRROSGUNonS8mRRNAXQ5hfo9R4doo=
Received: by 10.210.92.8 with SMTP id p8mr9756356ebb.118.1221465287352;
        Mon, 15 Sep 2008 00:54:47 -0700 (PDT)
Received: from INTEL ( [85.105.159.130])
        by mx.google.com with ESMTPS id 3sm19150392eyi.5.2008.09.15.00.54.45
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 15 Sep 2008 00:54:46 -0700 (PDT)
From: "Fatih Soydan" <idlemyth@gmail.com>
To: <java-user@lucene.apache.org>
Subject: About The Lucene Query Syntax
Date: Mon, 15 Sep 2008 10:55:25 +0300
Message-ID: <001401c91708$6a0e9e90$3e2bdbb0$@com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0015_01C91721.8F5BD690"
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AckXCGkxkkRD+hApReGre7JP8z0PHQ==
Content-Language: tr
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0015_01C91721.8F5BD690
Content-Type: text/plain;
	charset="iso-8859-9"
Content-Transfer-Encoding: quoted-printable

Hi;

=20

I am trying to write an application that's working on Blackberry or =
other
java enabled phones. This application talk with the server and Ask some
questions. Server Side is c# and i am using Apache Lucene.Net in this
Project.

=20

I searched a forum or mail list, but i didn't found yet. I have a =
problem
about query syntax.

=20

I want to search this=20

"Technology Gunlugu*" AND "NTV"

=20

But don't returns any result, Because of "technology gunlugu*".

When I searched=20

"Technology Gunlugu" AND "NTV"   returns 3 matched record

"Technology Gunlugunde" AND "NTV" returns  1 matched record

=20

=20

I debug my Project step by step.

=20

In the  Lucene.Net.Search.IndexSearcher=20

public override Query Rewrite(Query original)

{

Query query =3D original;

for (Query rewrittenQuery =3D query.Rewrite(reader); rewrittenQuery !=3D =
query;
rewrittenQuery =3D query.Rewrite(reader))

       {

              query =3D rewrittenQuery;=20

       }

       return query;

}

=20

=DDf the query is a PrefixQuery  Gunlugu* turns to Gunlugunde OR Gunlugu

But if the query is a default Query (Lucene.Net.Search.Query) =
"technology
gunlugu*"  it returns null query.

=20

=20

What can I do ?

=20

(Sorry for my bad English)

=20

FATIH SOYDAN

=20


------=_NextPart_000_0015_01C91721.8F5BD690--


From java-user-return-36130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 09:55:30 2008
Return-Path: <java-user-return-36130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96592 invoked from network); 15 Sep 2008 09:55:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 09:55:30 -0000
Received: (qmail 75393 invoked by uid 500); 15 Sep 2008 09:55:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74392 invoked by uid 500); 15 Sep 2008 09:55:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74381 invoked by uid 99); 15 Sep 2008 09:55:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 02:55:18 -0700
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 09:54:17 +0000
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1KfAn7-0000dD-JG
	for java-user@lucene.apache.org; Mon, 15 Sep 2008 09:54:46 +0000
Received: from home.schibsted.no ([80.91.33.33])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 09:54:45 +0000
Received: from mick by home.schibsted.no with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 09:54:45 +0000
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Mck <mick@semb.wever.org>
Subject:  RE:  Re: Replacing FAST functionality
	atsesam.no-ShingleFilter+exactmatching
Date:  Mon, 15 Sep 2008 11:56:29 +0200
Lines: 61
Message-ID:  <1221472589.8908.255.camel@localhost>
References:  <1221067074.8908.81.camel@localhost>
	 <9294E20AED46934EA459020706463F94EF3830@SUEXCL-02.ad.syr.edu>
Mime-Version:  1.0
Content-Type:  multipart/signed; micalg=pgp-sha1; protocol="application/pgp-signature"; boundary="=-BtOdhG55fwiGaLtHXf3r"
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: home.schibsted.no
In-Reply-To: <9294E20AED46934EA459020706463F94EF3830@SUEXCL-02.ad.syr.edu>
X-Mailer: Evolution 2.22.3.1 
Sender: news <news@ger.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org

--=-BtOdhG55fwiGaLtHXf3r
Content-Type: text/plain
Content-Transfer-Encoding: quoted-printable

Steve,
> Your solution, on the one hand, however, is a kludge: you are
> disabling position information (by assigning the same position to all
> tokens) in order to induce a particular behavior in the query parser,
> which may change in the future.

I disagree.

I'm not disabling position information to induce particular behaviour in
the query parser.

I'm intentionally setting position information to zero as I wish _all_
shingles and unigrams to be synonyms of each other.

The query parser expects you to assign positionIncrement=3D0 for synonyms
in this manner.

The one kludge i see is that the QueryParser expects the total positions
found to be greater than or equal to one. It might not be intentionally
dealing with the total position count being zero. But the situation
where you have many synonyms is the same as having one token and it
having many synonyms, so positionCount=3D0 =3D=3D positionCount=3D1.

I would think that both should lead to a BooleanQuery being constructed
by the QueryParser. (But the synonyms generated by the ShingleFilter are
in fact phrases so maybe it is wiser to use the MultiPhraseQuery.)

So all in all the QueryParser is behaving exactly as i would expect it
to.
The only logic being induced is setting positionIncrement=3D0 to indicate
the token is a synonym of the previous token, and this logic is being
completely encapsulated to the ShingleFilter.

~mck

ps i cross-posted as i thought this was better for the dev list but am
not sure.

--=20
"Enlightenment is your ego's biggest disappointment." Yoginanda=20
| semb.wever.org | sesat.no | sesam.no |

--=-BtOdhG55fwiGaLtHXf3r
Content-Type: application/pgp-signature; name=signature.asc
Content-Description: This is a digitally signed message part

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.9 (GNU/Linux)

iEYEABECAAYFAkjOMU0ACgkQkdPrePiuutOeSQCeOe9M+hdXZtyReP+Kv2zbyYu2
jLwAn1mBWoacu13cCSqF3pvrBTnBAbCX
=8YDR
-----END PGP SIGNATURE-----

--=-BtOdhG55fwiGaLtHXf3r--



From java-user-return-36131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 11:39:28 2008
Return-Path: <java-user-return-36131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48447 invoked from network); 15 Sep 2008 11:39:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 11:39:28 -0000
Received: (qmail 22668 invoked by uid 500); 15 Sep 2008 11:39:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22638 invoked by uid 500); 15 Sep 2008 11:39:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22627 invoked by uid 99); 15 Sep 2008 11:39:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 04:39:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.200.173 as permitted sender)
Received: from [209.85.200.173] (HELO wf-out-1314.google.com) (209.85.200.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 11:38:19 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2103067wfc.20
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 04:38:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=tfI96fydyxVh9eBXtjMbxnBQYQs5KN9gilkPikhQu8E=;
        b=ppxigWV87kqM2drAv2LghgbL9gfgmuzziq+GnaDalRNlSy3gEitvgctBqWbeX9FHeJ
         gMytzTZM+2nCAPCL4Gg5QTv6TfbVwALjXYKfzFLe9+EyG2OYoc0F9RAIbRfbAXm4I8aT
         IktwzOtFJa4YH5Lr3weHkyN6NfwSBY2/Fb1bQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=HMkYtaM+UV9m7le2MeSMNUvw6k90j1XRbh52YlnzdArfLi7Ni8rebZENt6q87SSx9q
         zg3Qhl7qCT8GYlNupUCNLqh8xTW0MVy/vRDcgs82Vcb2904JrtdVvVAVAtcsqeSaEP5J
         gAbVWRV420xvhPoX62o4Mqw57TFnJrXB/SnCI=
Received: by 10.141.74.18 with SMTP id b18mr4714293rvl.80.1221478722158;
        Mon, 15 Sep 2008 04:38:42 -0700 (PDT)
Received: by 10.141.176.5 with HTTP; Mon, 15 Sep 2008 04:38:42 -0700 (PDT)
Message-ID: <1bcb7c7f0809150438t27557805h5b9624c7df58ea67@mail.gmail.com>
Date: Mon, 15 Sep 2008 14:38:42 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: patching lucene-1314
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

To patch for lucene-1314 what must I do?

I think I have to cd into one of the directories, then patch -pX <
../../patchfile,

but I could not figure it out.

Best,
-C.B.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 11:55:50 2008
Return-Path: <java-user-return-36132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57450 invoked from network); 15 Sep 2008 11:55:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 11:55:50 -0000
Received: (qmail 52696 invoked by uid 500); 15 Sep 2008 11:55:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52673 invoked by uid 500); 15 Sep 2008 11:55:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52662 invoked by uid 99); 15 Sep 2008 11:55:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 04:55:39 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.68.5.17] (HELO relay03.pair.com) (209.68.5.17)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 15 Sep 2008 11:54:41 +0000
Received: (qmail 88078 invoked from network); 15 Sep 2008 11:55:10 -0000
Received: from unknown (HELO ?10.3.67.10?) (unknown)
  by unknown with SMTP; 15 Sep 2008 11:55:10 -0000
X-pair-Authenticated: 146.145.145.245
Subject: Re: SpanQuery problem
From: Darren Govoni <darren@ontrenet.com>
To: java-user@lucene.apache.org
In-Reply-To: <EB448979-0491-49A5-BEED-B2BADA0E9403@ehatchersolutions.com>
References: <49942.1221443570@ontrenet.com>
	 <DEAD1BBE-08D2-4E16-A0BE-ADBBD33283F8@ehatchersolutions.com>
	 <1221452768.6892.7.camel@nuraku>
	 <EB448979-0491-49A5-BEED-B2BADA0E9403@ehatchersolutions.com>
Content-Type: text/plain
Date: Mon, 15 Sep 2008 07:55:11 -0400
Message-Id: <1221479711.8573.6.camel@nuraku>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Interesting thought there Erik.

I guess I'm confused about the semantics of SpanFirstQuery with
SpanNearQuery. The documentation suggests that it applies to tokenized
fields. However, the number of different values for a given field in a
document shouldn't affect the result set for Span queries, but it does.
In my opinion, its a bug. I will work up a specific test to demonstrate
the change in behavior.

Darren

On Mon, 2008-09-15 at 00:54 -0400, Erik Hatcher wrote:
> Ah, ok...  so I basically replied and said "why don't you try what  
> you're already said you were trying, because i didn't read clearly  
> enough".  mea culpa.
> 
> So yeah, that is an awkward situation that Lucene doesn't currently  
> address quite as intuitively as one might think.  Multivalued fields  
> come in different varieties, the ones that want a continuously  
> incrementing term position offset, and one that wants to overlay  
> multiple values.  Seems like it could be done by being clever with the  
> position increment and the order terms are emitted, allowing multiple  
> valued fields to "stack".   Now am I making sense?
> 
> Kinda the inverse of a tee - folding multiple values together, *zip*.
> 
> Seems do-able... anything like this already out there?
> 
> Maybe somehow adding a field should make this explicit then, what to  
> do with increments across multiple values.  Or can position increment  
> be changed dynamically, based on the number of terms in the previous  
> field instance, and set backwards?
> 
> Just rambling out loud...
> 
> 	Erik
> 
> 
> On Sep 15, 2008, at 12:26 AM, Darren Govoni wrote:
> 
> > Hi Erik,
> >
> > I used SpanFirstQuery as well.
> > Basically, I create SpanTermQuery for each word I want to find in
> > succession in the word: field.
> >
> > I apply those to a SpanNearQuery with a slop of 1 (meaning the terms
> > have to be next to each other - successive words) and then
> > embed that in a SpanFirstQuery to indicate the terms should come first
> > in the field.
> >
> > It does not seem to return the correct results per my example below.
> > Documents with multiple values for the field being searched where some
> > of the values do not match the span, the document is NOT returned.
> >
> > Darren
> >
> > On Sun, 2008-09-14 at 22:51 -0400, Erik Hatcher wrote:
> >> SpanFirstQuery - is that what you're looking for?  A SpanOrQuery of  
> >> an
> >> expanded set of SpanFirstQuery's for all Terms that start with
> >> "car" (via a TermEnum).
> >>
> >> However, in this specialized case where you know exactly what you  
> >> want
> >> to index upon (the first word of a string), then one nice solution to
> >> consider is indexing that first word as its very own field.
> >>
> >>   Document 1
> >>     word: blue bird
> >>     word: blue card
> >>     first_word: blue (term frequency = 2)
> >>
> >>   Document 2
> >>     word: sky blue
> >>     word: sea blue
> >>     first_word: sea
> >>     first_word: sky
> >>
> >> The tee token filter stuff would be a clever way to implement it  
> >> via a
> >> single tokenization pass, though not the only way.
> >>
> >> 	Erik
> >>
> >> On Sep 14, 2008, at 9:52 PM, <darren@ontrenet.com> wrote:
> >>
> >>> Yes, return the document, but the problem is with SpanNearQuery it
> >>> does not return the documents I expect.
> >>> Sorry I did not explain it well. Consider 2 documents each with
> >>> "word" fields.
> >>>
> >>> Document 1
> >>>
> >>> word: blue bird
> >>> word: blue car
> >>>
> >>> Document 2
> >>>
> >>> word: sky blue
> >>> word: sea blue
> >>>
> >>> I want to search for 'blue' and ONLY return Document 1 as I already
> >>> know
> >>> that the term 'blue' MUST appear at the front of the field word:
> >>>
> >>> SpanNearQuery with slop of 0 or 1 won't do this if Document 1 has
> >>> other fields
> >>> like this.
> >>>
> >>> Document 1 - IS NOT FOUND WITH SPAN NEAR 0 or 1
> >>>
> >>> word: some blue
> >>> word: another blue
> >>> word: blue bird
> >>> word: blue car
> >>>
> >>> Expanding the Span slop to 3 will find Document 1 above this line,
> >>> however
> >>> I thought the slop meant within the field terms. It seems to refer
> >>> to the list of fields rather than terms. This is unexpected behavior
> >>> to me. But I'm no lucene expert.
> >>>
> >>> Thanks for any thoughts.
> >>>
> >>> Darren
> >>>
> >>>
> >>> darren@ontrenet.com wrote:
> >>>> Thanks Paul. I will study your response more, as I don't fully
> >>>> understand it yet - specifically "You'll need to expand the prefix
> >>>> into indexed terms".
> >>>>
> >>>> But what I want to do is so simple I'm surprised it cannot be done.
> >>>>
> >>>> You are saying that I cannot find all fields across all documents
> >>>> that begin with a string or space bounded word? Consider 1 document
> >>>> with:
> >>>>
> >>>> word: blue car
> >>>> word: red car
> >>>> word: car door
> >>>> word: car wheel
> >>>>
> >>>> Using whitespace analyzer I simply want to query all fields in all
> >>>> documents
> >>>> where 'car' is the at the very front of the field.
> >>>>
> >>>> word: car door
> >>>> word: car wheel
> >>>>
> >>>> This cannot be done? I don't want to retrieve all of them and prune
> >>>> the results myself because it will consume lots of resources.
> >>>>
> >>>> thanks so much!
> >>>>
> >>>> Darren
> >>>>
> >>>> On Sun Sep 14 16:36 , Paul Elschot  sent:Op Sunday 14 September
> >>>> 2008 19:36:38 schreef Darren Govoni:
> >>>>
> >>>>> Hi,
> >>>>> I am seeing odd behavior with SpanNearQuery.
> >>>>>
> >>>>> The problem is that with multiple fields, all fields beyond the
> >>>>> first
> >>>>> one 'car' are not seen by the span. I didn't think the span  
> >>>>> meant to
> >>>>> sets of the same field, but rather to terms within a given field.
> >>>>>
> >>>>> Document 1. 1 field (word)
> >>>>>
> >>>>> word: car
> >>>>> word: cars
> >>>>> word: cars wash
> >>>>> word: cars lot
> >>>>>
> >>>>>
> >>>>> SpanNearyQuery with slop of 0. Wrapped by SpanFirstQuery with slop
> >>>>> of
> >>>>> 1. Term query within is "word","cars*". No results found.
> >>>>>
> >>>>
> >>>> There is no SpanPrefixQuery for cars* in Lucene. You'll need to
> >>>> expand the prefix into indexed terms to create a SpanOrQuery
> >>>> yourself. This is fairly straightforward from PrefixQuery and
> >>>> SpanOrQuery.
> >>>> Alternatively, have a look at the surround query parser in contrib
> >>>> for a working example.
> >>>>
> >>>> Regards,
> >>>> Paul Elschot
> >>>>
> >>>>
> >>>>> If I remove the first field word: car, it works. Also, if I  
> >>>>> increase
> >>>>> the slop, it will return results from only the first amount of
> >>>>> fields
> >>>>> in the slop rather than terms within the field value.
> >>>>>
> >>>>> Is what I am seeing the correct behavior? Doesn't seem like it.
> >>>>>
> >>>>> What I am trying to do is span _within_ EACH field and match  
> >>>>> phrases
> >>>>> that begin with "cars*". Shouldn't be too hard to do I thought.
> >>>>>
> >>>>> Darren
> >>>>>
> >>>>>
> >>>>> ---------------------------------------------------------------------
> >>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>>
> >>>>
> >>>>
> >>>>
> >>>> ---------------------------------------------------------------------
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>>>
> >>>> ---------------------------------------------------------------------
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>>
> >>>
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>>
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 12:09:40 2008
Return-Path: <java-user-return-36133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65030 invoked from network); 15 Sep 2008 12:09:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 12:09:39 -0000
Received: (qmail 73684 invoked by uid 500); 15 Sep 2008 12:09:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73654 invoked by uid 500); 15 Sep 2008 12:09:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73633 invoked by uid 99); 15 Sep 2008 12:09:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 05:09:26 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [213.52.246.188] (HELO MAIL.DIOSPHERE.com) (213.52.246.188)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 15 Sep 2008 12:08:28 +0000
Subject: RE: Sorting in lucene through Document boosting
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Date: Mon, 15 Sep 2008 13:08:39 +0100
Message-ID: <ED024AB4B57C8543A3425147237C45F8451242@MAIL.DIOSPHERE.com>
Content-class: urn:content-classes:message
X-MimeOLE: Produced By Microsoft Exchange V6.5
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Sorting in lucene through Document boosting
Thread-Index: AckV9Pmf3vw+VMXHToKhOdI+rS/WhQBNhZtw
References: <ED024AB4B57C8543A3425147237C45F84511AF@MAIL.DIOSPHERE.com> <Pine.LNX.4.62.0809131539380.30340@radix.cryptio.net>
From: "Dragan Jotanovic" <Dragan.Jotanovic@DIOSPHERE.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Chris.

I made simple Similarity implementation:

	public float lengthNorm(String arg0, int arg1) {
		return 1f;
	}

	public float tf(float arg0) {
		return 1f;
	}

My boost values are calculated simply by calling:=20
	document.setBoost(DefaultSimilarity.decodeNorm((byte)rank));

It works perfectly. I just need to check if I gain something with this,
in terms of performance and resource consumption.



-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20
Sent: Saturday, September 13, 2008 11:59 PM
To: java-user@lucene.apache.org
Subject: Re: Sorting in lucene through Document boosting


: I thought of setting boost value for documents at index time, with the
: value of my sort field, and then making custom Similarity class which
: would disregard Lucene scoring and take in evaluation only this
document
: boost.

the general idea should work, but a few things to pay attention to...

1) document boosts are folded into the fieldNorm, so make sure you don't
"setOmitNorms(true)"

2) your lengthNorm function needs to return a constant

3) you'll need to adjust your boost values so that when the fieldNorms
are=20
converted to the internal 'byte' representation they are still unique
...=20
with some simple experimentation you can find an approach that helps you

genreate a mapping from 1,2,3,4,5... to a,b,c,d,... where a<b<c<....



-Hoss

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 13:03:58 2008
Return-Path: <java-user-return-36134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4510 invoked from network); 15 Sep 2008 13:03:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 13:03:58 -0000
Received: (qmail 62834 invoked by uid 500); 15 Sep 2008 13:03:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62799 invoked by uid 500); 15 Sep 2008 13:03:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62787 invoked by uid 99); 15 Sep 2008 13:03:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 06:03:47 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a20.g.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 13:02:47 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a20.g.dreamhost.com (Postfix) with ESMTP id D1E7EE252D
	for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 06:02:48 -0700 (PDT)
Message-Id: <1C8885E0-25CF-4842-ADAD-62AF45331079@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <1bcb7c7f0809150438t27557805h5b9624c7df58ea67@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: patching lucene-1314
Date: Mon, 15 Sep 2008 09:02:46 -0400
References: <1bcb7c7f0809150438t27557805h5b9624c7df58ea67@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

I usually do:
cd <lucene root directory>
patch -p 0 -i <path to patch file>

See also the HowToContribute page on the wiki.


On Sep 15, 2008, at 7:38 AM, Cam Bazz wrote:

> Hello,
>
> To patch for lucene-1314 what must I do?
>
> I think I have to cd into one of the directories, then patch -pX <
> ../../patchfile,
>
> but I could not figure it out.
>
> Best,
> -C.B.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 13:56:51 2008
Return-Path: <java-user-return-36135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37329 invoked from network); 15 Sep 2008 13:56:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 13:56:51 -0000
Received: (qmail 70773 invoked by uid 500); 15 Sep 2008 13:56:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70734 invoked by uid 500); 15 Sep 2008 13:56:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70723 invoked by uid 99); 15 Sep 2008 13:56:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 06:56:40 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.200.169 as permitted sender)
Received: from [209.85.200.169] (HELO wf-out-1314.google.com) (209.85.200.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 13:55:39 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2148135wfc.20
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 06:56:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Grfo2sxvswUB/0T/kqhOZpbLqcuTP9s5WKIZoGVG/UM=;
        b=u1SlFNXud0XUplI5b11AhIhMZ3js/EhugYf71+Mn/KYxSsW2eJN1RXnHl29JTTguPN
         fWpTHOOggpdErqb9dUFjG6PL/HvQyGcYcbx/COyfVhzgzLi8zHWS88GU62EkXzkQkMUz
         jB38q66CIiTj8VHZ2akXoCHXzzEUSzOfFE97Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=S09MWmF4gU7eF5JN7LurewTDKbV691LvltroajjLZ6zjL6dNstAEMcEr5smfYF8iIU
         i61hvQUDZa/venb5Ao1S0ap+Gx9K6OBVt2DEb+EZKmib3v6st3RLYCwDp8JVvWv+ockb
         X5pYNtTL91KWmqdxhHXaN9W9DMFDYslExWMSo=
Received: by 10.141.63.20 with SMTP id q20mr4774650rvk.258.1221486971493;
        Mon, 15 Sep 2008 06:56:11 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Mon, 15 Sep 2008 06:56:11 -0700 (PDT)
Message-ID: <359a92830809150656t5bbaa172ic925eccc7d0113c6@mail.gmail.com>
Date: Mon, 15 Sep 2008 09:56:11 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: About The Lucene Query Syntax
In-Reply-To: <001401c91708$6a0e9e90$3e2bdbb0$@com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_43488_16089257.1221486971471"
References: <001401c91708$6a0e9e90$3e2bdbb0$@com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_43488_16089257.1221486971471
Content-Type: text/plain; charset=ISO-8859-9
Content-Transfer-Encoding: base64
Content-Disposition: inline

d2lsZGNhcmRzIGFyZSBOT1Qgc3VwcG9ydGVkIHdpdGhpbiBkb3VibGUgcXVvdGVzLCBzbyBpZgp5
b3UgYXJlIHN1Ym1pdHRpbmcgeW91ciBxdWVyeQoiVGVjaG5vbG9neSBHdW5sdWd1KiIKV0lUSCB0
aGUgZG91YmxlIHF1b3RlcywgeW91IGFyZSBzZWFyY2hpbmcgZm9yCnRoYXQgbGl0ZXJhbCBwaHJh
c2UuCgpCZXN0CkVyaWNrCgpQLlMuIFNlZToKCmh0dHA6Ly9sdWNlbmUuYXBhY2hlLm9yZy9qYXZh
L2RvY3MvcXVlcnlwYXJzZXJzeW50YXguaHRtbAp0aGUgZmlyc3QgbGluZSB1bmRlciAid2lsZGNh
cmQgc2VhcmNoZXMiCgoKMjAwOC85LzE1IEZhdGloIFNveWRhbiA8aWRsZW15dGhAZ21haWwuY29t
PgoKPiBIaTsKPgo+Cj4KPiBJIGFtIHRyeWluZyB0byB3cml0ZSBhbiBhcHBsaWNhdGlvbiB0aGF0
J3Mgd29ya2luZyBvbiBCbGFja2JlcnJ5IG9yIG90aGVyCj4gamF2YSBlbmFibGVkIHBob25lcy4g
VGhpcyBhcHBsaWNhdGlvbiB0YWxrIHdpdGggdGhlIHNlcnZlciBhbmQgQXNrIHNvbWUKPiBxdWVz
dGlvbnMuIFNlcnZlciBTaWRlIGlzIGMjIGFuZCBpIGFtIHVzaW5nIEFwYWNoZSBMdWNlbmUuTmV0
IGluIHRoaXMKPiBQcm9qZWN0Lgo+Cj4KPgo+IEkgc2VhcmNoZWQgYSBmb3J1bSBvciBtYWlsIGxp
c3QsIGJ1dCBpIGRpZG4ndCBmb3VuZCB5ZXQuIEkgaGF2ZSBhIHByb2JsZW0KPiBhYm91dCBxdWVy
eSBzeW50YXguCj4KPgo+Cj4gSSB3YW50IHRvIHNlYXJjaCB0aGlzCj4KPiAiVGVjaG5vbG9neSBH
dW5sdWd1KiIgQU5EICJOVFYiCj4KPgo+Cj4gQnV0IGRvbid0IHJldHVybnMgYW55IHJlc3VsdCwg
QmVjYXVzZSBvZiAidGVjaG5vbG9neSBndW5sdWd1KiIuCj4KPiBXaGVuIEkgc2VhcmNoZWQKPgo+
ICJUZWNobm9sb2d5IEd1bmx1Z3UiIEFORCAiTlRWIiAgIHJldHVybnMgMyBtYXRjaGVkIHJlY29y
ZAo+Cj4gIlRlY2hub2xvZ3kgR3VubHVndW5kZSIgQU5EICJOVFYiIHJldHVybnMgIDEgbWF0Y2hl
ZCByZWNvcmQKPgo+Cj4KPgo+Cj4gSSBkZWJ1ZyBteSBQcm9qZWN0IHN0ZXAgYnkgc3RlcC4KPgo+
Cj4KPiBJbiB0aGUgIEx1Y2VuZS5OZXQuU2VhcmNoLkluZGV4U2VhcmNoZXIKPgo+IHB1YmxpYyBv
dmVycmlkZSBRdWVyeSBSZXdyaXRlKFF1ZXJ5IG9yaWdpbmFsKQo+Cj4gewo+Cj4gUXVlcnkgcXVl
cnkgPSBvcmlnaW5hbDsKPgo+IGZvciAoUXVlcnkgcmV3cml0dGVuUXVlcnkgPSBxdWVyeS5SZXdy
aXRlKHJlYWRlcik7IHJld3JpdHRlblF1ZXJ5ICE9IHF1ZXJ5Owo+IHJld3JpdHRlblF1ZXJ5ID0g
cXVlcnkuUmV3cml0ZShyZWFkZXIpKQo+Cj4gICAgICAgewo+Cj4gICAgICAgICAgICAgIHF1ZXJ5
ID0gcmV3cml0dGVuUXVlcnk7Cj4KPiAgICAgICB9Cj4KPiAgICAgICByZXR1cm4gcXVlcnk7Cj4K
PiB9Cj4KPgo+Cj4g3WYgdGhlIHF1ZXJ5IGlzIGEgUHJlZml4UXVlcnkgIEd1bmx1Z3UqIHR1cm5z
IHRvIEd1bmx1Z3VuZGUgT1IgR3VubHVndQo+Cj4gQnV0IGlmIHRoZSBxdWVyeSBpcyBhIGRlZmF1
bHQgUXVlcnkgKEx1Y2VuZS5OZXQuU2VhcmNoLlF1ZXJ5KSAidGVjaG5vbG9neQo+IGd1bmx1Z3Uq
IiAgaXQgcmV0dXJucyBudWxsIHF1ZXJ5Lgo+Cj4KPgo+Cj4KPiBXaGF0IGNhbiBJIGRvID8KPgo+
Cj4KPiAoU29ycnkgZm9yIG15IGJhZCBFbmdsaXNoKQo+Cj4KPgo+IEZBVElIIFNPWURBTgo+Cj4K
Pgo+Cg==
------=_Part_43488_16089257.1221486971471--

From java-user-return-36136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 14:10:56 2008
Return-Path: <java-user-return-36136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47550 invoked from network); 15 Sep 2008 14:10:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 14:10:55 -0000
Received: (qmail 92610 invoked by uid 500); 15 Sep 2008 14:10:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92584 invoked by uid 500); 15 Sep 2008 14:10:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92573 invoked by uid 99); 15 Sep 2008 14:10:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 07:10:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of idlemyth@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 14:09:44 +0000
Received: by yx-out-2324.google.com with SMTP id 3so637356yxj.5
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 07:10:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=qHp51AzLfEJNgu9xgei2owIBc2uVkvyD2UbGnDnGg3w=;
        b=VRuPz1S69/GRb/3R+BvtUPCaUpzmJ36w4u9RuVTzUG1noyudezEX+O6llH5tSrCV6d
         2oTzuMMLSEP7pgiwzKSTgMjx9Ut7sPkGbDT2vwRBsj5boqJSaYTZBQHIGtWBYPntbEkf
         e8Q4low47mm6S9YM/m9DzrnoTI2YYaJkiDyy0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=s88rXPtCKb5x9DWzvQJFWE/7w2V8VdbY2AbkPSSRaUhopPeVHb7EROOnB61ZC+L/gU
         t++j71cMnhmRy0SL6+jceXds31RZeggsmN50MKnyP+ufw9bzG6RURpCr3J5WgfomdjJ3
         kamD+DQjqx7shFLwQgMZcCne2hem91I7VMmq8=
Received: by 10.103.233.4 with SMTP id k4mr5490344mur.48.1221487815224;
        Mon, 15 Sep 2008 07:10:15 -0700 (PDT)
Received: by 10.103.175.20 with HTTP; Mon, 15 Sep 2008 07:10:15 -0700 (PDT)
Message-ID: <594623e50809150710x2f3f42d7gb0f9b57f1047805e@mail.gmail.com>
Date: Mon, 15 Sep 2008 17:10:15 +0300
From: "M. Fatih Soydan" <idlemyth@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: About The Lucene Query Syntax
In-Reply-To: <359a92830809150656t5bbaa172ic925eccc7d0113c6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-9
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <001401c91708$6a0e9e90$3e2bdbb0$@com>
	 <359a92830809150656t5bbaa172ic925eccc7d0113c6@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

SSByZWFkLiBCdXQgaSBkaWRuJ3QgdW5kZXJzdGFuZCB3aHkgbm90ID8KCjE1IEV5bPxsIDIwMDgg
UGF6YXJ0ZXNpIDE2OjU2IHRhcmloaW5kZSBFcmljayBFcmlja3Nvbgo8ZXJpY2tlcmlja3NvbkBn
bWFpbC5jb20+IHlhemT9Ogo+IHdpbGRjYXJkcyBhcmUgTk9UIHN1cHBvcnRlZCB3aXRoaW4gZG91
YmxlIHF1b3Rlcywgc28gaWYKPiB5b3UgYXJlIHN1Ym1pdHRpbmcgeW91ciBxdWVyeQo+ICJUZWNo
bm9sb2d5IEd1bmx1Z3UqIgo+IFdJVEggdGhlIGRvdWJsZSBxdW90ZXMsIHlvdSBhcmUgc2VhcmNo
aW5nIGZvcgo+IHRoYXQgbGl0ZXJhbCBwaHJhc2UuCj4KPiBCZXN0Cj4gRXJpY2sKPgo+IFAuUy4g
U2VlOgo+Cj4gaHR0cDovL2x1Y2VuZS5hcGFjaGUub3JnL2phdmEvZG9jcy9xdWVyeXBhcnNlcnN5
bnRheC5odG1sCj4gdGhlIGZpcnN0IGxpbmUgdW5kZXIgIndpbGRjYXJkIHNlYXJjaGVzIgo+Cj4K
PiAyMDA4LzkvMTUgRmF0aWggU295ZGFuIDxpZGxlbXl0aEBnbWFpbC5jb20+Cj4KPj4gSGk7Cj4+
Cj4+Cj4+Cj4+IEkgYW0gdHJ5aW5nIHRvIHdyaXRlIGFuIGFwcGxpY2F0aW9uIHRoYXQncyB3b3Jr
aW5nIG9uIEJsYWNrYmVycnkgb3Igb3RoZXIKPj4gamF2YSBlbmFibGVkIHBob25lcy4gVGhpcyBh
cHBsaWNhdGlvbiB0YWxrIHdpdGggdGhlIHNlcnZlciBhbmQgQXNrIHNvbWUKPj4gcXVlc3Rpb25z
LiBTZXJ2ZXIgU2lkZSBpcyBjIyBhbmQgaSBhbSB1c2luZyBBcGFjaGUgTHVjZW5lLk5ldCBpbiB0
aGlzCj4+IFByb2plY3QuCj4+Cj4+Cj4+Cj4+IEkgc2VhcmNoZWQgYSBmb3J1bSBvciBtYWlsIGxp
c3QsIGJ1dCBpIGRpZG4ndCBmb3VuZCB5ZXQuIEkgaGF2ZSBhIHByb2JsZW0KPj4gYWJvdXQgcXVl
cnkgc3ludGF4Lgo+Pgo+Pgo+Pgo+PiBJIHdhbnQgdG8gc2VhcmNoIHRoaXMKPj4KPj4gIlRlY2hu
b2xvZ3kgR3VubHVndSoiIEFORCAiTlRWIgo+Pgo+Pgo+Pgo+PiBCdXQgZG9uJ3QgcmV0dXJucyBh
bnkgcmVzdWx0LCBCZWNhdXNlIG9mICJ0ZWNobm9sb2d5IGd1bmx1Z3UqIi4KPj4KPj4gV2hlbiBJ
IHNlYXJjaGVkCj4+Cj4+ICJUZWNobm9sb2d5IEd1bmx1Z3UiIEFORCAiTlRWIiAgIHJldHVybnMg
MyBtYXRjaGVkIHJlY29yZAo+Pgo+PiAiVGVjaG5vbG9neSBHdW5sdWd1bmRlIiBBTkQgIk5UViIg
cmV0dXJucyAgMSBtYXRjaGVkIHJlY29yZAo+Pgo+Pgo+Pgo+Pgo+Pgo+PiBJIGRlYnVnIG15IFBy
b2plY3Qgc3RlcCBieSBzdGVwLgo+Pgo+Pgo+Pgo+PiBJbiB0aGUgIEx1Y2VuZS5OZXQuU2VhcmNo
LkluZGV4U2VhcmNoZXIKPj4KPj4gcHVibGljIG92ZXJyaWRlIFF1ZXJ5IFJld3JpdGUoUXVlcnkg
b3JpZ2luYWwpCj4+Cj4+IHsKPj4KPj4gUXVlcnkgcXVlcnkgPSBvcmlnaW5hbDsKPj4KPj4gZm9y
IChRdWVyeSByZXdyaXR0ZW5RdWVyeSA9IHF1ZXJ5LlJld3JpdGUocmVhZGVyKTsgcmV3cml0dGVu
UXVlcnkgIT0gcXVlcnk7Cj4+IHJld3JpdHRlblF1ZXJ5ID0gcXVlcnkuUmV3cml0ZShyZWFkZXIp
KQo+Pgo+PiAgICAgICB7Cj4+Cj4+ICAgICAgICAgICAgICBxdWVyeSA9IHJld3JpdHRlblF1ZXJ5
Owo+Pgo+PiAgICAgICB9Cj4+Cj4+ICAgICAgIHJldHVybiBxdWVyeTsKPj4KPj4gfQo+Pgo+Pgo+
Pgo+PiDdZiB0aGUgcXVlcnkgaXMgYSBQcmVmaXhRdWVyeSAgR3VubHVndSogdHVybnMgdG8gR3Vu
bHVndW5kZSBPUiBHdW5sdWd1Cj4+Cj4+IEJ1dCBpZiB0aGUgcXVlcnkgaXMgYSBkZWZhdWx0IFF1
ZXJ5IChMdWNlbmUuTmV0LlNlYXJjaC5RdWVyeSkgInRlY2hub2xvZ3kKPj4gZ3VubHVndSoiICBp
dCByZXR1cm5zIG51bGwgcXVlcnkuCj4+Cj4+Cj4+Cj4+Cj4+Cj4+IFdoYXQgY2FuIEkgZG8gPwo+
Pgo+Pgo+Pgo+PiAoU29ycnkgZm9yIG15IGJhZCBFbmdsaXNoKQo+Pgo+Pgo+Pgo+PiBGQVRJSCBT
T1lEQU4KPj4KPj4KPj4KPj4KPgo=


From java-user-return-36137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 14:25:44 2008
Return-Path: <java-user-return-36137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56999 invoked from network); 15 Sep 2008 14:25:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 14:25:43 -0000
Received: (qmail 25390 invoked by uid 500); 15 Sep 2008 14:25:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25359 invoked by uid 500); 15 Sep 2008 14:25:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25348 invoked by uid 99); 15 Sep 2008 14:25:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 07:25:32 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.231 as permitted sender)
Received: from [209.85.198.231] (HELO rv-out-0506.google.com) (209.85.198.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 14:24:31 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2038332rvb.5
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 07:25:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=zAR5a6arA55U6NE8292/WxnEEM6o5fTC6ACCLxPUzwY=;
        b=czZpmb+qG18gbpHfrExNDWDFw6iSRI4R9qPCFFl9wvQEeuD660DYNZqegYV+96hnt2
         aOKDyuP6ojmBCAo+4I3lPK1oR1ZmEI6gjzgNvz3KC7E/5SM1s75Xy/qSTxtKrTmJz1G8
         ruMnJL6k3jQC68WAtzZKc5Mb1VI/qzNMauNBg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=nRIReWopAL0pmIpQBQP/aiHwxbzNB+yGpdPuAtOM9MxoW7mJ/qgRu0plb/VYLz3q2c
         qFdNI8LxQgHxTG+D7FT1lCe/GN3v+RV7cn5+5PDc6DJitL3Gls6AVFAeCKs+Iw+aqHtq
         yHaTlghPXr73o6q+6CC8hBMptSE7LfoI7YgT8=
Received: by 10.141.83.15 with SMTP id k15mr4796364rvl.289.1221488703654;
        Mon, 15 Sep 2008 07:25:03 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Mon, 15 Sep 2008 07:25:03 -0700 (PDT)
Message-ID: <359a92830809150725g1a47ed15pcccd6e5f85331215@mail.gmail.com>
Date: Mon, 15 Sep 2008 10:25:03 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: About The Lucene Query Syntax
In-Reply-To: <594623e50809150710x2f3f42d7gb0f9b57f1047805e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_43930_9367885.1221488703651"
References: <001401c91708$6a0e9e90$3e2bdbb0$@com>
	 <359a92830809150656t5bbaa172ic925eccc7d0113c6@mail.gmail.com>
	 <594623e50809150710x2f3f42d7gb0f9b57f1047805e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_43930_9367885.1221488703651
Content-Type: text/plain; charset=ISO-8859-9
Content-Transfer-Encoding: base64
Content-Disposition: inline

VGhlIHVuc2F0aXNmYWN0b3J5IGFuc3dlciBpcyAiYmVjYXVzZSB0aGF0J3MgdGhlCndheSBpdCB3
b3JrcyIuCgpJIHN1c3BlY3QgdGhhdCB0aGUgdW5kZXJseWluZyBpc3N1ZSBpcyB3aGF0IGhhcHBl
bnMgd2hlbgp5b3UgdHJ5IHRvIGV4cGFuZCBwaHJhc2Ugc2VhcmNoZXMgdmlhIHdpbGRjYXJkcy4g
V2lsZGNhcmQKc2VhcmNoZXMgYXJlIGFscmVhZHkgcGxhZ3VlZCBieSAiVG9vTWFueUNsYXVzZXMi
IGV4Y2VwdGlvbnMsCndoaWNoIHdvdWxkIG9ubHkgZ2V0IHdvcnNlIHdpdGggcGhyYXNlcyBJbiBm
YWN0LCBkb3ducmlnaHQKaW1wb3NzaWJsZS4KCllvdSdkIGhhdmUgdG8gZmluZCBhbGwgdGhlIHdp
bGRjYXJkcyB0aGF0IG1hdGNoZWQuIFRoZW4gZmluZAphbGwgdGhlIHdvcmRzIHRoYXQgd2VyZSBv
bmUgcG9zaXRpb24gbGVzcy4gVGhlbiBmb3JtIGEgaHVnZQpPUiBxdWVyeSBvZiBhbGwgdGhlc2Ug
cGhyYXNlcy4gV2hpY2ggd291bGQgYmUgcmVhbGx5IHVnbHkuCkFuZCB0aGF0J3Mgb25seSBhIHNp
bmdsZSB3aWxkY2FyZCBpbiBhIHBocmFzZS4gSW1hZ2luZSB0cnlpbmcKdG8gZm9ybSB0aGUgcXVl
cnkgb2YgImEqIGIqIGMqIi4gVGhlIE9SIGNsYXVzZSB3b3VsZCBiZQp0aGUgY3Jvc3MgcHJvZHVj
dCBvZiBhbGwgdGVybXMgdGhhdCBzdGFydGVkIHdpdGggb25lIG9mIHRoZQp0aHJlZSBsZXR0ZXJz
LgoKWW91IGNvdWxkIHBvc3NpYmx5IHRyaW0gdGhhdCBkb3duIGJ5IGZpbmRpbmcgdGhlIG9mZnNl
dHMgaW4KZWFjaCBkb2N1bWVudCBmb3IgYWxsIHRoZSB0ZXJtcyB0aGF0IGJlZ2FuIHdpdGggYW55
IG9mCnRoZSB0aHJlZSBsZXR0ZXJzIGFuZCAicmVzdHJpY3RpbmciIHRoZSBtYXNzaXZlIE9SIHF1
ZXJ5CmJ5IHRoZSB0ZXJtIHBvc2l0aW9ucyBvZiBlYWNoIHdvcmQgaW4gZWFjaCBkb2N1bWVudAph
bmQgdGhlbiBmb3JtaW5nIHRoZW0gaW50byBhIGh1Z2UgcXVlcnkuLi4uIEJ1dCB5b3UKc2VlIHdo
ZXJlIHRoaXMgaXMgZ29pbmcuIFRvIGRvIGFueSBvZiB0aGlzIGlzIHByb2hpYml0aXZlbHkKZXhw
ZW5zaXZlLgoKVGFrZSBhbGwgdGhpcyB3aXRoIGEgZ3JhaW4gb2Ygc2FsdCBzaW5jZSBJIGhhdmVu
J3QgYmVlbiBpbiB0aGUKZ3V0cyBvZiB0aGUgTHVjZW5lIHNlYXJjaCBlbmdpbmUsIGJ1dCBJIHN1
c3BlY3QgdGhhdAp0aGUgdmVyeSBicmlnaHQgZm9sa3Mgd2hvJ3ZlIGNvZGVkIHRoaXMgd2hvbGUg
dGhpbmcgdXAKd291bGQgaGF2ZSBkb25lIHRoaXMgbG9uZyBhZ28gaWYgaXQgd2FzIHJlYXNvbmFi
bGUuCgpCZXN0CkVyaWNrCgoKMjAwOC85LzE1IE0uIEZhdGloIFNveWRhbiA8aWRsZW15dGhAZ21h
aWwuY29tPgoKPiBJIHJlYWQuIEJ1dCBpIGRpZG4ndCB1bmRlcnN0YW5kIHdoeSBub3QgPwo+Cj4g
MTUgRXls/GwgMjAwOCBQYXphcnRlc2kgMTY6NTYgdGFyaWhpbmRlIEVyaWNrIEVyaWNrc29uCj4g
PGVyaWNrZXJpY2tzb25AZ21haWwuY29tPiB5YXpk/ToKPiA+IHdpbGRjYXJkcyBhcmUgTk9UIHN1
cHBvcnRlZCB3aXRoaW4gZG91YmxlIHF1b3Rlcywgc28gaWYKPiA+IHlvdSBhcmUgc3VibWl0dGlu
ZyB5b3VyIHF1ZXJ5Cj4gPiAiVGVjaG5vbG9neSBHdW5sdWd1KiIKPiA+IFdJVEggdGhlIGRvdWJs
ZSBxdW90ZXMsIHlvdSBhcmUgc2VhcmNoaW5nIGZvcgo+ID4gdGhhdCBsaXRlcmFsIHBocmFzZS4K
PiA+Cj4gPiBCZXN0Cj4gPiBFcmljawo+ID4KPiA+IFAuUy4gU2VlOgo+ID4KPiA+IGh0dHA6Ly9s
dWNlbmUuYXBhY2hlLm9yZy9qYXZhL2RvY3MvcXVlcnlwYXJzZXJzeW50YXguaHRtbAo+ID4gdGhl
IGZpcnN0IGxpbmUgdW5kZXIgIndpbGRjYXJkIHNlYXJjaGVzIgo+ID4KPiA+Cj4gPiAyMDA4Lzkv
MTUgRmF0aWggU295ZGFuIDxpZGxlbXl0aEBnbWFpbC5jb20+Cj4gPgo+ID4+IEhpOwo+ID4+Cj4g
Pj4KPiA+Pgo+ID4+IEkgYW0gdHJ5aW5nIHRvIHdyaXRlIGFuIGFwcGxpY2F0aW9uIHRoYXQncyB3
b3JraW5nIG9uIEJsYWNrYmVycnkgb3IKPiBvdGhlcgo+ID4+IGphdmEgZW5hYmxlZCBwaG9uZXMu
IFRoaXMgYXBwbGljYXRpb24gdGFsayB3aXRoIHRoZSBzZXJ2ZXIgYW5kIEFzayBzb21lCj4gPj4g
cXVlc3Rpb25zLiBTZXJ2ZXIgU2lkZSBpcyBjIyBhbmQgaSBhbSB1c2luZyBBcGFjaGUgTHVjZW5l
Lk5ldCBpbiB0aGlzCj4gPj4gUHJvamVjdC4KPiA+Pgo+ID4+Cj4gPj4KPiA+PiBJIHNlYXJjaGVk
IGEgZm9ydW0gb3IgbWFpbCBsaXN0LCBidXQgaSBkaWRuJ3QgZm91bmQgeWV0LiBJIGhhdmUgYQo+
IHByb2JsZW0KPiA+PiBhYm91dCBxdWVyeSBzeW50YXguCj4gPj4KPiA+Pgo+ID4+Cj4gPj4gSSB3
YW50IHRvIHNlYXJjaCB0aGlzCj4gPj4KPiA+PiAiVGVjaG5vbG9neSBHdW5sdWd1KiIgQU5EICJO
VFYiCj4gPj4KPiA+Pgo+ID4+Cj4gPj4gQnV0IGRvbid0IHJldHVybnMgYW55IHJlc3VsdCwgQmVj
YXVzZSBvZiAidGVjaG5vbG9neSBndW5sdWd1KiIuCj4gPj4KPiA+PiBXaGVuIEkgc2VhcmNoZWQK
PiA+Pgo+ID4+ICJUZWNobm9sb2d5IEd1bmx1Z3UiIEFORCAiTlRWIiAgIHJldHVybnMgMyBtYXRj
aGVkIHJlY29yZAo+ID4+Cj4gPj4gIlRlY2hub2xvZ3kgR3VubHVndW5kZSIgQU5EICJOVFYiIHJl
dHVybnMgIDEgbWF0Y2hlZCByZWNvcmQKPiA+Pgo+ID4+Cj4gPj4KPiA+Pgo+ID4+Cj4gPj4gSSBk
ZWJ1ZyBteSBQcm9qZWN0IHN0ZXAgYnkgc3RlcC4KPiA+Pgo+ID4+Cj4gPj4KPiA+PiBJbiB0aGUg
IEx1Y2VuZS5OZXQuU2VhcmNoLkluZGV4U2VhcmNoZXIKPiA+Pgo+ID4+IHB1YmxpYyBvdmVycmlk
ZSBRdWVyeSBSZXdyaXRlKFF1ZXJ5IG9yaWdpbmFsKQo+ID4+Cj4gPj4gewo+ID4+Cj4gPj4gUXVl
cnkgcXVlcnkgPSBvcmlnaW5hbDsKPiA+Pgo+ID4+IGZvciAoUXVlcnkgcmV3cml0dGVuUXVlcnkg
PSBxdWVyeS5SZXdyaXRlKHJlYWRlcik7IHJld3JpdHRlblF1ZXJ5ICE9Cj4gcXVlcnk7Cj4gPj4g
cmV3cml0dGVuUXVlcnkgPSBxdWVyeS5SZXdyaXRlKHJlYWRlcikpCj4gPj4KPiA+PiAgICAgICB7
Cj4gPj4KPiA+PiAgICAgICAgICAgICAgcXVlcnkgPSByZXdyaXR0ZW5RdWVyeTsKPiA+Pgo+ID4+
ICAgICAgIH0KPiA+Pgo+ID4+ICAgICAgIHJldHVybiBxdWVyeTsKPiA+Pgo+ID4+IH0KPiA+Pgo+
ID4+Cj4gPj4KPiA+PiDdZiB0aGUgcXVlcnkgaXMgYSBQcmVmaXhRdWVyeSAgR3VubHVndSogdHVy
bnMgdG8gR3VubHVndW5kZSBPUiBHdW5sdWd1Cj4gPj4KPiA+PiBCdXQgaWYgdGhlIHF1ZXJ5IGlz
IGEgZGVmYXVsdCBRdWVyeSAoTHVjZW5lLk5ldC5TZWFyY2guUXVlcnkpCj4gInRlY2hub2xvZ3kK
PiA+PiBndW5sdWd1KiIgIGl0IHJldHVybnMgbnVsbCBxdWVyeS4KPiA+Pgo+ID4+Cj4gPj4KPiA+
Pgo+ID4+Cj4gPj4gV2hhdCBjYW4gSSBkbyA/Cj4gPj4KPiA+Pgo+ID4+Cj4gPj4gKFNvcnJ5IGZv
ciBteSBiYWQgRW5nbGlzaCkKPiA+Pgo+ID4+Cj4gPj4KPiA+PiBGQVRJSCBTT1lEQU4KPiA+Pgo+
ID4+Cj4gPj4KPiA+Pgo+ID4KPgo=
------=_Part_43930_9367885.1221488703651--

From java-user-return-36138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 14:46:41 2008
Return-Path: <java-user-return-36138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70906 invoked from network); 15 Sep 2008 14:46:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 14:46:41 -0000
Received: (qmail 74990 invoked by uid 500); 15 Sep 2008 14:46:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74958 invoked by uid 500); 15 Sep 2008 14:46:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74947 invoked by uid 99); 15 Sep 2008 14:46:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 07:46:30 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of idlemyth@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 14:45:29 +0000
Received: by gxk6 with SMTP id 6so16419675gxk.5
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 07:45:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=93aweMsxxwK7P8iRtUcLaqluRf7RFSto2XXgSywGdUQ=;
        b=b/WW06BQtinlvbKH8yhGH4qWn6ukt69Lz1s+o8nJpunGQ0Ka0m8pq6HwwZpJZC3OHQ
         YzTwwnGa/UUBrBDHmOs8+ufPwRu6UOsQAPwIwgAT/IalJRzREf+lfAPZXpeVBYeL7ZUN
         SvBtrF53QRnzjWscFYOJrMhGPInEIBOw/CHh8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=mN43Ffgfbw7mVQaX5FNO+GU5XvnHdQF+vsr4vuxCW7u2KcF4pY79d4B0VfYNbP50EN
         NflBVCzEHe6HdEqvj56i+EHw9od7HeNV0JlcJX4cPNc59l/aMhYILWskgMfQHY9OQak3
         QRSYFDB5mscHKc7YgDMTljJvZQbmUdPbn5qY8=
Received: by 10.103.52.13 with SMTP id e13mr5517950muk.80.1221489444925;
        Mon, 15 Sep 2008 07:37:24 -0700 (PDT)
Received: by 10.103.175.20 with HTTP; Mon, 15 Sep 2008 07:37:24 -0700 (PDT)
Message-ID: <594623e50809150737h34f844aet1d17fa3b0bf0dc35@mail.gmail.com>
Date: Mon, 15 Sep 2008 17:37:24 +0300
From: "M. Fatih Soydan" <idlemyth@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: About The Lucene Query Syntax
In-Reply-To: <359a92830809150725g1a47ed15pcccd6e5f85331215@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_34489_6173379.1221489444957"
References: <001401c91708$6a0e9e90$3e2bdbb0$@com>
	 <359a92830809150656t5bbaa172ic925eccc7d0113c6@mail.gmail.com>
	 <594623e50809150710x2f3f42d7gb0f9b57f1047805e@mail.gmail.com>
	 <359a92830809150725g1a47ed15pcccd6e5f85331215@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_34489_6173379.1221489444957
Content-Type: text/plain; charset=ISO-8859-9
Content-Transfer-Encoding: base64
Content-Disposition: inline

V2UgIGFyZSB1c2luZyBBYmJ5eSAoRmluZVJlYWRlcikgSW5kZXgmU2VhcmNoIExpYnJhcmllcyBh
bmQgTW9ycG9sb2d5IFNESwpzaW5jZSAxOTk5LgpPdXIgU2VhcmNoU3RyaW5nIGFyZSBsaWtlcyB0
aGVzZSA6CioqCipib3J1c2FuKiB8IFNvcnX+YW4qIHwgYmJydXNhbiogfCAiYm9ydXNhbiBpc3Rh
bmJ1bCBmaWxhcm1vKiIgfCAiZ/xyZXIKYXlrYWwqIiB8ICJib3J1c2FuIG9kYSBvcmtlc3RyYXMq
IiB8ICJib3J1c2FuIHNhbmF0IGdhbGUqIiB8ICJ6ZWhyYSAqCipudXJoYW4ga29jYWL9ef1rIGls
a/ZyZXRpbSoiKgoqKgoqInByb2N0ZXIqIiB8ICJQJkcqIiB8ICJQICYgRyIgfCAicHJvY3RlciZn
YW1ibGUiIHwgInByb2N0ZXIgJiBnYW1ibGUiIHwKcHJvY3QqKgoqKgpUaGFuIGkgdGhpbmssCklm
IEFiYnl5IGNhbiBkbyB0aGF0LCBMdWNlbmUgY2FuLCB0b28uCioqCioqCiAxNSBFeWz8bCAyMDA4
IFBhemFydGVzaSAxNzoyNSB0YXJpaGluZGUgRXJpY2sgRXJpY2tzb24gPAplcmlja2VyaWNrc29u
QGdtYWlsLmNvbT4geWF6ZP06Cj4gVGhlIHVuc2F0aXNmYWN0b3J5IGFuc3dlciBpcyAiYmVjYXVz
ZSB0aGF0J3MgdGhlCj4gd2F5IGl0IHdvcmtzIi4KPgo+IEkgc3VzcGVjdCB0aGF0IHRoZSB1bmRl
cmx5aW5nIGlzc3VlIGlzIHdoYXQgaGFwcGVucyB3aGVuCj4geW91IHRyeSB0byBleHBhbmQgcGhy
YXNlIHNlYXJjaGVzIHZpYSB3aWxkY2FyZHMuIFdpbGRjYXJkCj4gc2VhcmNoZXMgYXJlIGFscmVh
ZHkgcGxhZ3VlZCBieSAiVG9vTWFueUNsYXVzZXMiIGV4Y2VwdGlvbnMsCj4gd2hpY2ggd291bGQg
b25seSBnZXQgd29yc2Ugd2l0aCBwaHJhc2VzIEluIGZhY3QsIGRvd25yaWdodAo+IGltcG9zc2li
bGUuCj4KPiBZb3UnZCBoYXZlIHRvIGZpbmQgYWxsIHRoZSB3aWxkY2FyZHMgdGhhdCBtYXRjaGVk
LiBUaGVuIGZpbmQKPiBhbGwgdGhlIHdvcmRzIHRoYXQgd2VyZSBvbmUgcG9zaXRpb24gbGVzcy4g
VGhlbiBmb3JtIGEgaHVnZQo+IE9SIHF1ZXJ5IG9mIGFsbCB0aGVzZSBwaHJhc2VzLiBXaGljaCB3
b3VsZCBiZSByZWFsbHkgdWdseS4KPiBBbmQgdGhhdCdzIG9ubHkgYSBzaW5nbGUgd2lsZGNhcmQg
aW4gYSBwaHJhc2UuIEltYWdpbmUgdHJ5aW5nCj4gdG8gZm9ybSB0aGUgcXVlcnkgb2YgImEqIGIq
IGMqIi4gVGhlIE9SIGNsYXVzZSB3b3VsZCBiZQo+IHRoZSBjcm9zcyBwcm9kdWN0IG9mIGFsbCB0
ZXJtcyB0aGF0IHN0YXJ0ZWQgd2l0aCBvbmUgb2YgdGhlCj4gdGhyZWUgbGV0dGVycy4KPgo+IFlv
dSBjb3VsZCBwb3NzaWJseSB0cmltIHRoYXQgZG93biBieSBmaW5kaW5nIHRoZSBvZmZzZXRzIGlu
Cj4gZWFjaCBkb2N1bWVudCBmb3IgYWxsIHRoZSB0ZXJtcyB0aGF0IGJlZ2FuIHdpdGggYW55IG9m
Cj4gdGhlIHRocmVlIGxldHRlcnMgYW5kICJyZXN0cmljdGluZyIgdGhlIG1hc3NpdmUgT1IgcXVl
cnkKPiBieSB0aGUgdGVybSBwb3NpdGlvbnMgb2YgZWFjaCB3b3JkIGluIGVhY2ggZG9jdW1lbnQK
PiBhbmQgdGhlbiBmb3JtaW5nIHRoZW0gaW50byBhIGh1Z2UgcXVlcnkuLi4uIEJ1dCB5b3UKPiBz
ZWUgd2hlcmUgdGhpcyBpcyBnb2luZy4gVG8gZG8gYW55IG9mIHRoaXMgaXMgcHJvaGliaXRpdmVs
eQo+IGV4cGVuc2l2ZS4KPgo+IFRha2UgYWxsIHRoaXMgd2l0aCBhIGdyYWluIG9mIHNhbHQgc2lu
Y2UgSSBoYXZlbid0IGJlZW4gaW4gdGhlCj4gZ3V0cyBvZiB0aGUgTHVjZW5lIHNlYXJjaCBlbmdp
bmUsIGJ1dCBJIHN1c3BlY3QgdGhhdAo+IHRoZSB2ZXJ5IGJyaWdodCBmb2xrcyB3aG8ndmUgY29k
ZWQgdGhpcyB3aG9sZSB0aGluZyB1cAo+IHdvdWxkIGhhdmUgZG9uZSB0aGlzIGxvbmcgYWdvIGlm
IGl0IHdhcyByZWFzb25hYmxlLgo+Cj4gQmVzdAo+IEVyaWNrCj4KPgo+IDIwMDgvOS8xNSBNLiBG
YXRpaCBTb3lkYW4gPGlkbGVteXRoQGdtYWlsLmNvbT4KPgo+PiBJIHJlYWQuIEJ1dCBpIGRpZG4n
dCB1bmRlcnN0YW5kIHdoeSBub3QgPwo+Pgo+PiAxNSBFeWz8bCAyMDA4IFBhemFydGVzaSAxNjo1
NiB0YXJpaGluZGUgRXJpY2sgRXJpY2tzb24KPj4gPGVyaWNrZXJpY2tzb25AZ21haWwuY29tPiB5
YXpk/ToKPj4gPiB3aWxkY2FyZHMgYXJlIE5PVCBzdXBwb3J0ZWQgd2l0aGluIGRvdWJsZSBxdW90
ZXMsIHNvIGlmCj4+ID4geW91IGFyZSBzdWJtaXR0aW5nIHlvdXIgcXVlcnkKPj4gPiAiVGVjaG5v
bG9neSBHdW5sdWd1KiIKPj4gPiBXSVRIIHRoZSBkb3VibGUgcXVvdGVzLCB5b3UgYXJlIHNlYXJj
aGluZyBmb3IKPj4gPiB0aGF0IGxpdGVyYWwgcGhyYXNlLgo+PiA+Cj4+ID4gQmVzdAo+PiA+IEVy
aWNrCj4+ID4KPj4gPiBQLlMuIFNlZToKPj4gPgo+PiA+IGh0dHA6Ly9sdWNlbmUuYXBhY2hlLm9y
Zy9qYXZhL2RvY3MvcXVlcnlwYXJzZXJzeW50YXguaHRtbAo+PiA+IHRoZSBmaXJzdCBsaW5lIHVu
ZGVyICJ3aWxkY2FyZCBzZWFyY2hlcyIKPj4gPgo+PiA+Cj4+ID4gMjAwOC85LzE1IEZhdGloIFNv
eWRhbiA8aWRsZW15dGhAZ21haWwuY29tPgo+PiA+Cj4+ID4+IEhpOwo+PiA+Pgo+PiA+Pgo+PiA+
Pgo+PiA+PiBJIGFtIHRyeWluZyB0byB3cml0ZSBhbiBhcHBsaWNhdGlvbiB0aGF0J3Mgd29ya2lu
ZyBvbiBCbGFja2JlcnJ5IG9yCj4+IG90aGVyCj4+ID4+IGphdmEgZW5hYmxlZCBwaG9uZXMuIFRo
aXMgYXBwbGljYXRpb24gdGFsayB3aXRoIHRoZSBzZXJ2ZXIgYW5kIEFzawpzb21lCj4+ID4+IHF1
ZXN0aW9ucy4gU2VydmVyIFNpZGUgaXMgYyMgYW5kIGkgYW0gdXNpbmcgQXBhY2hlIEx1Y2VuZS5O
ZXQgaW4gdGhpcwo+PiA+PiBQcm9qZWN0Lgo+PiA+Pgo+PiA+Pgo+PiA+Pgo+PiA+PiBJIHNlYXJj
aGVkIGEgZm9ydW0gb3IgbWFpbCBsaXN0LCBidXQgaSBkaWRuJ3QgZm91bmQgeWV0LiBJIGhhdmUg
YQo+PiBwcm9ibGVtCj4+ID4+IGFib3V0IHF1ZXJ5IHN5bnRheC4KPj4gPj4KPj4gPj4KPj4gPj4K
Pj4gPj4gSSB3YW50IHRvIHNlYXJjaCB0aGlzCj4+ID4+Cj4+ID4+ICJUZWNobm9sb2d5IEd1bmx1
Z3UqIiBBTkQgIk5UViIKPj4gPj4KPj4gPj4KPj4gPj4KPj4gPj4gQnV0IGRvbid0IHJldHVybnMg
YW55IHJlc3VsdCwgQmVjYXVzZSBvZiAidGVjaG5vbG9neSBndW5sdWd1KiIuCj4+ID4+Cj4+ID4+
IFdoZW4gSSBzZWFyY2hlZAo+PiA+Pgo+PiA+PiAiVGVjaG5vbG9neSBHdW5sdWd1IiBBTkQgIk5U
ViIgICByZXR1cm5zIDMgbWF0Y2hlZCByZWNvcmQKPj4gPj4KPj4gPj4gIlRlY2hub2xvZ3kgR3Vu
bHVndW5kZSIgQU5EICJOVFYiIHJldHVybnMgIDEgbWF0Y2hlZCByZWNvcmQKPj4gPj4KPj4gPj4K
Pj4gPj4KPj4gPj4KPj4gPj4KPj4gPj4gSSBkZWJ1ZyBteSBQcm9qZWN0IHN0ZXAgYnkgc3RlcC4K
Pj4gPj4KPj4gPj4KPj4gPj4KPj4gPj4gSW4gdGhlICBMdWNlbmUuTmV0LlNlYXJjaC5JbmRleFNl
YXJjaGVyCj4+ID4+Cj4+ID4+IHB1YmxpYyBvdmVycmlkZSBRdWVyeSBSZXdyaXRlKFF1ZXJ5IG9y
aWdpbmFsKQo+PiA+Pgo+PiA+PiB7Cj4+ID4+Cj4+ID4+IFF1ZXJ5IHF1ZXJ5ID0gb3JpZ2luYWw7
Cj4+ID4+Cj4+ID4+IGZvciAoUXVlcnkgcmV3cml0dGVuUXVlcnkgPSBxdWVyeS5SZXdyaXRlKHJl
YWRlcik7IHJld3JpdHRlblF1ZXJ5ICE9Cj4+IHF1ZXJ5Owo+PiA+PiByZXdyaXR0ZW5RdWVyeSA9
IHF1ZXJ5LlJld3JpdGUocmVhZGVyKSkKPj4gPj4KPj4gPj4gICAgICAgewo+PiA+Pgo+PiA+PiAg
ICAgICAgICAgICAgcXVlcnkgPSByZXdyaXR0ZW5RdWVyeTsKPj4gPj4KPj4gPj4gICAgICAgfQo+
PiA+Pgo+PiA+PiAgICAgICByZXR1cm4gcXVlcnk7Cj4+ID4+Cj4+ID4+IH0KPj4gPj4KPj4gPj4K
Pj4gPj4KPj4gPj4g3WYgdGhlIHF1ZXJ5IGlzIGEgUHJlZml4UXVlcnkgIEd1bmx1Z3UqIHR1cm5z
IHRvIEd1bmx1Z3VuZGUgT1IgR3VubHVndQo+PiA+Pgo+PiA+PiBCdXQgaWYgdGhlIHF1ZXJ5IGlz
IGEgZGVmYXVsdCBRdWVyeSAoTHVjZW5lLk5ldC5TZWFyY2guUXVlcnkpCj4+ICJ0ZWNobm9sb2d5
Cj4+ID4+IGd1bmx1Z3UqIiAgaXQgcmV0dXJucyBudWxsIHF1ZXJ5Lgo+PiA+Pgo+PiA+Pgo+PiA+
Pgo+PiA+Pgo+PiA+Pgo+PiA+PiBXaGF0IGNhbiBJIGRvID8KPj4gPj4KPj4gPj4KPj4gPj4KPj4g
Pj4gKFNvcnJ5IGZvciBteSBiYWQgRW5nbGlzaCkKPj4gPj4KPj4gPj4KPj4gPj4KPj4gPj4gRkFU
SUggU09ZREFOCj4+ID4+Cj4+ID4+Cj4+ID4+Cj4+ID4+Cj4+ID4KPj4KPgo=
------=_Part_34489_6173379.1221489444957--

From java-user-return-36139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 15:15:18 2008
Return-Path: <java-user-return-36139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86975 invoked from network); 15 Sep 2008 15:15:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 15:15:18 -0000
Received: (qmail 19666 invoked by uid 500); 15 Sep 2008 15:15:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19060 invoked by uid 500); 15 Sep 2008 15:15:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19049 invoked by uid 99); 15 Sep 2008 15:15:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 08:15:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.233 as permitted sender)
Received: from [209.85.198.233] (HELO rv-out-0506.google.com) (209.85.198.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 15:14:08 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2055141rvb.5
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 08:14:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=CseHli/StF14T4rhcbWIoFmbLACaq39Iaew+r9JYIhw=;
        b=Ak9DxrckRiv06mkbX0iyCKGkW9PQNjzVoAIqp8keILmEwDg/g/QvFZGHUiqNVCmlQo
         uBwy+J3NXMUD+sjg+TRyINSKeCJ1z7itEbg+CZU+6jGLRZle3GwWRaAj0K8l9eZGZ6E2
         +MlFw97WGBpVpXsksf8RhYJnxWljz+Ea+Ctw0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=tGgPsFzT6zSt9r8Sw+tITCi1b2XEhfz5ogiqDfxFox0snFCLFkBAi8lX2XXuL6hz38
         PjxGKYabH62jgIMLNSHKzIIDaZGOKzsKT75izSZ7F6Ql5swaR11EoTE8S1gXwRLJxGjV
         pma1eS70kRPzejR2F+YI1Flr9ouydJb9ATUNo=
Received: by 10.141.29.14 with SMTP id g14mr4853698rvj.241.1221491671219;
        Mon, 15 Sep 2008 08:14:31 -0700 (PDT)
Received: by 10.141.176.5 with HTTP; Mon, 15 Sep 2008 08:14:31 -0700 (PDT)
Message-ID: <1bcb7c7f0809150814n781783a4v3b4c84d386169db7@mail.gmail.com>
Date: Mon, 15 Sep 2008 18:14:31 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: patching lucene-1314
In-Reply-To: <1C8885E0-25CF-4842-ADAD-62AF45331079@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1bcb7c7f0809150438t27557805h5b9624c7df58ea67@mail.gmail.com>
	 <1C8885E0-25CF-4842-ADAD-62AF45331079@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Well Hello,

I made the patch inside trunk/src but I am getting failed errors.
does this mean the lucene-1314 is buggy, or maybe I applied it to the
wrong version?

Best.

joker src # pwd
/root/lucene/lucene-2.3.2/src

joker src # patch -p0 < ../../lucene-1314.patch

patching file java/org/apache/lucene/index/DirectoryIndexReader.java
Hunk #1 FAILED at 44.
Hunk #2 FAILED at 113.
Hunk #3 succeeded at 120 (offset -33 lines).
2 out of 3 hunks FAILED -- saving rejects to file
java/org/apache/lucene/index/D
                                    irectoryIndexReader.java.rej
patching file java/org/apache/lucene/index/FieldsReader.java
Hunk #2 FAILED at 76.
Hunk #3 succeeded at 105 (offset -26 lines).
1 out of 3 hunks FAILED -- saving rejects to file
java/org/apache/lucene/index/F
                                    ieldsReader.java.rej
patching file java/org/apache/lucene/index/FilterIndexReader.java
patching file java/org/apache/lucene/index/IndexReader.java
Hunk #1 succeeded at 54 with fuzz 2.
Hunk #4 succeeded at 255 (offset -25 lines).
Hunk #5 succeeded at 850 (offset -25 lines).
Hunk #6 FAILED at 1015.
1 out of 6 hunks FAILED -- saving rejects to file
java/org/apache/lucene/index/I
                                    ndexReader.java.rej
patching file java/org/apache/lucene/index/MultiReader.java
patching file java/org/apache/lucene/index/MultiSegmentReader.java
patching file java/org/apache/lucene/index/ParallelReader.java
patching file java/org/apache/lucene/index/SegmentReader.java
Hunk #1 FAILED at 40.
Hunk #2 succeeded at 74 (offset -2 lines).
Hunk #3 succeeded at 116 (offset -2 lines).
Hunk #4 succeeded at 147 (offset -2 lines).
Hunk #5 succeeded at 171 (offset -2 lines).
Hunk #6 succeeded at 310 (offset -2 lines).
Hunk #7 succeeded at 356 (offset -1 lines).
Hunk #8 succeeded at 382 (offset -1 lines).
Hunk #9 succeeded at 411 with fuzz 1 (offset -6 lines).
Hunk #10 succeeded at 451 (offset -6 lines).
Hunk #11 succeeded at 469 (offset -6 lines).
Hunk #12 succeeded at 496 (offset -6 lines).
Hunk #13 succeeded at 505 (offset -6 lines).
Hunk #14 succeeded at 545 (offset -6 lines).
Hunk #15 succeeded at 627 (offset -9 lines).
Hunk #16 succeeded at 652 (offset -9 lines).
Hunk #17 succeeded at 698 (offset -9 lines).
Hunk #18 succeeded at 743 (offset -10 lines).
Hunk #19 succeeded at 891 (offset -10 lines).
Hunk #20 succeeded at 1004 (offset -10 lines).
1 out of 20 hunks FAILED -- saving rejects to file
java/org/apache/lucene/index/
                                   SegmentReader.java.rej
patching file java/org/apache/lucene/util/BitVector.java
Hunk #1 succeeded at 35 with fuzz 2.
patching file test/org/apache/lucene/index/TestIndexReaderClone.java
patching file test/org/apache/lucene/index/TestIndexReaderReopen.java
Hunk #1 FAILED at 852.
1 out of 1 hunk FAILED -- saving rejects to file
test/org/apache/lucene/index/Te
                                     stIndexReaderReopen.java.rej



On Mon, Sep 15, 2008 at 4:02 PM, Grant Ingersoll <gsingers@apache.org> wrote:
> I usually do:
> cd <lucene root directory>
> patch -p 0 -i <path to patch file>
>
> See also the HowToContribute page on the wiki.
>
>
> On Sep 15, 2008, at 7:38 AM, Cam Bazz wrote:
>
>> Hello,
>>
>> To patch for lucene-1314 what must I do?
>>
>> I think I have to cd into one of the directories, then patch -pX <
>> ../../patchfile,
>>
>> but I could not figure it out.
>>
>> Best,
>> -C.B.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 15:18:39 2008
Return-Path: <java-user-return-36140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88602 invoked from network); 15 Sep 2008 15:18:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 15:18:39 -0000
Received: (qmail 27797 invoked by uid 500); 15 Sep 2008 15:18:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27770 invoked by uid 500); 15 Sep 2008 15:18:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27756 invoked by uid 99); 15 Sep 2008 15:18:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 08:18:19 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dckorah@gmail.com designates 74.125.78.25 as permitted sender)
Received: from [74.125.78.25] (HELO ey-out-2122.google.com) (74.125.78.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 15:17:20 +0000
Received: by ey-out-2122.google.com with SMTP id 6so932736eyi.53
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 08:17:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:subject:date
         :mime-version:content-type:x-mailer:x-mimeole:thread-index
         :message-id;
        bh=C6XmraYmM9jD1yzjxl2D47OAMvQL+gcYjwuCt4MFpL4=;
        b=jjpejFHTI/cF1yf//TU+R4vwSgMwhbUBpICWq9HROM0U19HKtB9Jrapfpps4lo9tIp
         SrMU0dStWy84m0KwGoZhalG54UgdGn43EfoS2i17q0ej5NwTODpstwvUGBCVJAh8nq+l
         9dhzRPvb6RpBsTp4CTJA/Lc5GMxANBxog/YPE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:subject:date:mime-version:content-type:x-mailer:x-mimeole
         :thread-index:message-id;
        b=AXuqq5++DmM52yxQVmjowxN7IC/4IHxlzvZTGSsrNllBgOSgvgiBr7oP7ZaHcZMFkQ
         xTqq7zySbX08uT6tx/wnNZUqu6r9ZQohlvCbe1RsHbaKYkKzu2VOKMM6DYEy/0ueCRCt
         FtrPaJxfSUzFRxUWtH+qY07qBuHlnQxmJKOTk=
Received: by 10.210.122.5 with SMTP id u5mr10354097ebc.7.1221491871110;
        Mon, 15 Sep 2008 08:17:51 -0700 (PDT)
Received: from SCWDEVDINOKVM ( [195.2.245.68])
        by mx.google.com with ESMTPS id f4sm79897398nfh.27.2008.09.15.08.17.48
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 15 Sep 2008 08:17:49 -0700 (PDT)
From: "Dino Korah" <dckorah@gmail.com>
To: <java-user@lucene.apache.org>
Subject: search with Filter
Date: Mon, 15 Sep 2008 16:17:35 +0100
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0023_01C9174E.92665E00"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3350
Thread-Index: AckXRinA3yg/XbmbTta59E3qdefFeg==
Message-ID: <48ce7c9d.04e9300a.014d.ffff8c1d@mx.google.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0023_01C9174E.92665E00
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi All,
 
I am trying to utilize Filter to see if I can get a bit more performance out
of my application that searches over 100million document lucene index.
 
On all my documents I have a two fields over which I will have to scope my
searches. One is a date-time field (YYYYMMDDHHMMSS) and a user-id filed
(number). How do I specify filter for a field. I feel that I can use
BooleanFilter + RangeFilter (for date-time) + TermFilter (user-id).
 
I couldnt figure out how to specify a Filter per field.
 
Could someone point me in the right direction.
 
Many thanks,
Dino
 

------=_NextPart_000_0023_01C9174E.92665E00--


From java-user-return-36141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 15:31:35 2008
Return-Path: <java-user-return-36141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98489 invoked from network); 15 Sep 2008 15:31:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 15:31:35 -0000
Received: (qmail 51716 invoked by uid 500); 15 Sep 2008 15:31:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51689 invoked by uid 500); 15 Sep 2008 15:31:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51678 invoked by uid 99); 15 Sep 2008 15:31:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 08:31:25 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.232 as permitted sender)
Received: from [209.85.198.232] (HELO rv-out-0506.google.com) (209.85.198.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 15:30:27 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2060448rvb.5
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 08:30:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=UNBQ6HtFwImA+eJQwkZVSTlbth2X+o+1/ZdotnGFMCo=;
        b=VzhcO7luZoI/QtMDdA5ut+b+lASJGaAAi3httxlc9Dell+jNyeoO5mJDG6QzRmEIjO
         OEfUcvaFXZjffDRAgMJzHMbxDsQdxNv7KS6f0hwHWToHR7G+xJH1mPRGuP5ORZ2fmsZ5
         Q8CLFSCN3GrHIwso+4/L2C6YMB4Di+1yjy5Ps=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=OvTDtODhiO64rwhuz2dwxv99tSo55rXT8ii4EwcLrs6y4Lxt58js2LlH0Dchfgshux
         RQrHQFHkRff3gNZ/CEz3biYTOVSDjLtOf4f4Tt+YvDMRkTP8o0v+tmcxgCJ87du/CXOW
         WlXk6bmY6UthBZJXlMyOSPuKRm8aA5/beIYmQ=
Received: by 10.141.68.12 with SMTP id v12mr4875096rvk.111.1221492650459;
        Mon, 15 Sep 2008 08:30:50 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Mon, 15 Sep 2008 08:30:50 -0700 (PDT)
Message-ID: <359a92830809150830p267a7e2bw170d4d31449e9f78@mail.gmail.com>
Date: Mon, 15 Sep 2008 11:30:50 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: search with Filter
In-Reply-To: <48ce7c9d.04e9300a.014d.ffff8c1d@mx.google.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_44683_19141526.1221492650461"
References: <48ce7c9d.04e9300a.014d.ffff8c1d@mx.google.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_44683_19141526.1221492650461
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Filters aren't really specified per field. All they are is a bitmask, one
bit per *document*. You can construct the filter any way you want, in your
case by inspecting the date-time field and passing it along with your query.
You can even combine several fields into one filter by twiddling the bits
as appropriate.

At least that's the general case. In your case, don't you just want a
RangeFilter?
>From the API:

*RangeFilter<file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/search/RangeFilter.html#RangeFilter%28java.lang.String,%20java.lang.String,%20java.lang.String,%20boolean,%20boolean%29>
*(String <http://java.sun.com/j2se/1.4/docs/api/java/lang/String.html>
fieldName,
String <http://java.sun.com/j2se/1.4/docs/api/java/lang/String.html> lowerTerm,
String <http://java.sun.com/j2se/1.4/docs/api/java/lang/String.html> upperTerm,
boolean includeLower, boolean includeUpper)

One other thing: Do you really need seconds? How about minutes? The
coarser your resolution, the better your performance. See also DateTools.

Best
Erick

On Mon, Sep 15, 2008 at 11:17 AM, Dino Korah <dckorah@gmail.com> wrote:

> Hi All,
>
> I am trying to utilize Filter to see if I can get a bit more performance
> out
> of my application that searches over 100million document lucene index.
>
> On all my documents I have a two fields over which I will have to scope my
> searches. One is a date-time field (YYYYMMDDHHMMSS) and a user-id filed
> (number). How do I specify filter for a field. I feel that I can use
> BooleanFilter + RangeFilter (for date-time) + TermFilter (user-id).
>
> I couldnt figure out how to specify a Filter per field.
>
> Could someone point me in the right direction.
>
> Many thanks,
> Dino
>
>

------=_Part_44683_19141526.1221492650461--

From java-user-return-36142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 15:57:56 2008
Return-Path: <java-user-return-36142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17446 invoked from network); 15 Sep 2008 15:57:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 15:57:56 -0000
Received: (qmail 95340 invoked by uid 500); 15 Sep 2008 15:57:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95304 invoked by uid 500); 15 Sep 2008 15:57:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95293 invoked by uid 99); 15 Sep 2008 15:57:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 08:57:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 15:56:46 +0000
Received: by gxk6 with SMTP id 6so16621880gxk.5
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 08:56:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=2GFkynTeNDER7SqdW3QCHYafq4guFtWrthSdQIq8N1Y=;
        b=HHCyJ9J0+NQG1nZfcLG6YXZ3d/LqtZSW9eaN/7S0u0aTZYXswLqRNiQCdu+wVWAbGI
         RWcXv5i+roh/qndlO1NB/AaK6bgbCWLAp8DY1lJs5Dr8KbK2M/tmgCaNrDpJzkOkhXX0
         BKVCko3QHc8jb5O+pPwJ4MnT3bfk5LXpPoHuM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=sZcqtzneOCIlnaZ+wTgWAYs8S2nnd/YL7ab81HlxfvFwWOCZ59LQs3zDeq8K5dt9un
         YwXeVfwu9J5sQkF7mu/AqZ5YwlXIrLT7tiG8kh+a3OASbprmlgBmxTg3pKLWSpDkKXHR
         DMbYeyvqzIbxb6ecMe6FwbXBnquDRu++xp8QM=
Received: by 10.66.237.16 with SMTP id k16mr3343264ugh.84.1221494177484;
        Mon, 15 Sep 2008 08:56:17 -0700 (PDT)
Received: from kodapan.lan ( [83.249.107.81])
        by mx.google.com with ESMTPS id 5sm2347756ugc.38.2008.09.15.08.56.16
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 15 Sep 2008 08:56:17 -0700 (PDT)
Message-Id: <0F8F73F8-CF8D-4B49-9B1B-C862CB55364B@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <ED024AB4B57C8543A3425147237C45F8451242@MAIL.DIOSPHERE.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Sorting in lucene through Document boosting
Date: Mon, 15 Sep 2008 17:56:15 +0200
References: <ED024AB4B57C8543A3425147237C45F84511AF@MAIL.DIOSPHERE.com> <Pine.LNX.4.62.0809131539380.30340@radix.cryptio.net> <ED024AB4B57C8543A3425147237C45F8451242@MAIL.DIOSPHERE.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


15 sep 2008 kl. 14.08 skrev Dragan Jotanovic:

> I made simple Similarity implementation:

> public float tf(float arg0) {
> 		return 1f;
> 	}

Why do you touch the term frequency? Is that prehaps unrelated to  
what's discussed in this thread?


       karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 16:10:28 2008
Return-Path: <java-user-return-36143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24166 invoked from network); 15 Sep 2008 16:10:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 16:10:27 -0000
Received: (qmail 17086 invoked by uid 500); 15 Sep 2008 16:10:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17056 invoked by uid 500); 15 Sep 2008 16:10:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17045 invoked by uid 99); 15 Sep 2008 16:10:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 09:10:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [213.52.246.188] (HELO MAIL.DIOSPHERE.com) (213.52.246.188)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 15 Sep 2008 16:09:19 +0000
Content-class: urn:content-classes:message
Subject: RE: Sorting in lucene through Document boosting
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Date: Mon, 15 Sep 2008 17:09:50 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Message-ID: <ED024AB4B57C8543A3425147237C45F8451262@MAIL.DIOSPHERE.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Sorting in lucene through Document boosting
Thread-Index: AckXTFoknkhZfsNDR02LEZiSlV7ceQAANJ7w
References: <ED024AB4B57C8543A3425147237C45F84511AF@MAIL.DIOSPHERE.com> <Pine.LNX.4.62.0809131539380.30340@radix.cryptio.net> <ED024AB4B57C8543A3425147237C45F8451242@MAIL.DIOSPHERE.com> <0F8F73F8-CF8D-4B49-9B1B-C862CB55364B@gmail.com>
From: "Dragan Jotanovic" <Dragan.Jotanovic@DIOSPHERE.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hm, probably that is not needed.=20
I thought that tf would influence the score if I don't set it to
constant value, but it seems that it is sufficient to override just
lengthNorm.



-----Original Message-----
From: Karl Wettin [mailto:karl.wettin@gmail.com]=20
Sent: Monday, September 15, 2008 4:56 PM
To: java-user@lucene.apache.org
Subject: Re: Sorting in lucene through Document boosting


15 sep 2008 kl. 14.08 skrev Dragan Jotanovic:

> I made simple Similarity implementation:

> public float tf(float arg0) {
> 		return 1f;
> 	}

Why do you touch the term frequency? Is that prehaps unrelated to =20
what's discussed in this thread?


       karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 16:45:38 2008
Return-Path: <java-user-return-36144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42917 invoked from network); 15 Sep 2008 16:45:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 16:45:38 -0000
Received: (qmail 67787 invoked by uid 500); 15 Sep 2008 16:45:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67758 invoked by uid 500); 15 Sep 2008 16:45:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67747 invoked by uid 99); 15 Sep 2008 16:45:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 09:45:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.200.170 as permitted sender)
Received: from [209.85.200.170] (HELO wf-out-1314.google.com) (209.85.200.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 16:44:29 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2201026wfc.20
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 09:45:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=9hYsNH8r9CCx/VtdQwAPCCt7/ZgaA6mYiIzX21UkYEE=;
        b=D3jBKe3qxCDoUHVcjXwf4ZZvqaHpDzByXQdetJ+J0hmhs7dIrrau9MvDYi4kYve1XP
         IoQLIrW3Oq07lGxdP2V84Bk+lNJf7D8MzIa5P4JMCyJX201U2fcbw3UmK6Rl4DafsMs4
         46pKydyc1QyyGlI5XAU69mZBijq3jEKVicBrE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=cbpr9UJz6x+e1bl0uKAlxaII6b0j3T04fU0D2zq0VA4X+4pbnEutrNQyX6l96Et4X3
         ABpqEX1c0ZKJmwAYVXtM3gd5jp3Gxom23bHl245i1UalA84zfQogTxNAFBwy2idQ2Ulx
         nEfgdss7kC4IBr5P1EzOKzc5Ir2o2cp7olFXI=
Received: by 10.141.136.8 with SMTP id o8mr4905904rvn.278.1221497101596;
        Mon, 15 Sep 2008 09:45:01 -0700 (PDT)
Received: by 10.141.176.5 with HTTP; Mon, 15 Sep 2008 09:45:01 -0700 (PDT)
Message-ID: <1bcb7c7f0809150945p576143bdta1d5e06d9c0b3f82@mail.gmail.com>
Date: Mon, 15 Sep 2008 19:45:01 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: instantiated index in 2.4
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I have been looking at instantiated index in the trunk. Does this come
with a searcher? Are the adds reflected directly to the index?

Or is it just an experimental thing only with reader and writer?

Best.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 16:52:00 2008
Return-Path: <java-user-return-36145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47584 invoked from network); 15 Sep 2008 16:51:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 16:51:59 -0000
Received: (qmail 83311 invoked by uid 500); 15 Sep 2008 16:51:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83282 invoked by uid 500); 15 Sep 2008 16:51:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83269 invoked by uid 99); 15 Sep 2008 16:51:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 09:51:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 209.85.134.186 as permitted sender)
Received: from [209.85.134.186] (HELO mu-out-0910.google.com) (209.85.134.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 16:50:45 +0000
Received: by mu-out-0910.google.com with SMTP id i10so1639586mue.5
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 09:51:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=v1xT/FSFQVJraIS+d5a/8fxxBGsDhJkywDxKkeBBbjo=;
        b=YQ1vmFzumsYh4uqeBC4BM/JjH2ALtoKIAHHiSJby/3rAVWjDTsG6lKyqlDuuU3Bhl4
         K4unHKtjrWf0ZcRJs/PmA0yxXc5CVgqZAzxweOUGLHy7Fv7yYyiBv7C0clQ+HJG+S5QO
         9N0mLKoTSiHhYOF/+bFEsjxQReuOsnfMPgHXk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=QexPm9/6UpdusOdIkCUiIexSmwTx9e9/zUGIlogy7mQqJ/bp6PbD8Xg4Af7wnMYmOr
         wxuooQWaiyofY6kJLuGYDjR8cZhSAXOtQ1A6usoy9vRMFnn8POWofgdcA/OqdpP9nEPS
         sfNkJgu+HRfg/tu5d4P8OuIyIcSYnUai8G8q0=
Received: by 10.180.215.19 with SMTP id n19mr5577168bkg.35.1221497476790;
        Mon, 15 Sep 2008 09:51:16 -0700 (PDT)
Received: from kodapan.lan ( [83.249.107.81])
        by mx.google.com with ESMTPS id c9sm13251542nfi.26.2008.09.15.09.51.15
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 15 Sep 2008 09:51:16 -0700 (PDT)
Message-Id: <D59A960A-657E-45FC-B7A3-FDC497E3E27E@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <1bcb7c7f0809150945p576143bdta1d5e06d9c0b3f82@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: instantiated index in 2.4
Date: Mon, 15 Sep 2008 18:51:14 +0200
References: <1bcb7c7f0809150945p576143bdta1d5e06d9c0b3f82@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


15 sep 2008 kl. 18.45 skrev Cam Bazz:

> I have been looking at instantiated index in the trunk. Does this come
> with a searcher?

Pass an InstantiatedIndexReader to the constructor of an IndexSearcher.

> Are the adds reflected directly to the index?

Yes. An InstantiatedIndexReader is always current. You will probably  
still have to reconstruct your searcher. I never really looked in to  
what happends if you don't.

Recommended use is that you consider an InstantiatedIndex immutable,  
mainly because it is lockless.


      karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 17:32:44 2008
Return-Path: <java-user-return-36146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71955 invoked from network); 15 Sep 2008 17:32:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 17:32:44 -0000
Received: (qmail 51180 invoked by uid 500); 15 Sep 2008 17:32:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51153 invoked by uid 500); 15 Sep 2008 17:32:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51139 invoked by uid 99); 15 Sep 2008 17:32:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 10:32:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.200.168 as permitted sender)
Received: from [209.85.200.168] (HELO wf-out-1314.google.com) (209.85.200.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 17:31:35 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2217423wfc.20
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 10:32:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=QOTBuviIqexJtsfKKXXEpEHJ/VL4pSZJWYFuj+DnHMA=;
        b=Fk7bqo98E2Z/f9aL2EpM/8AKWndopJgdBQ/8myvHVQjVBaqmuBLbHWOZenkyGD119m
         1AZWe01LphNEFLfrqSATc3/rd9FlfFOqtyA1rkiqmX+vTaLhOierx/ZY5xAYC/QCjx6s
         h0yL/UAafdpuJ/fVCqezTccXqYYn3UCjV4vU4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=d6lnt16UKtA01TZnHTrlHrr83uoDbXjSyqPoEP3dLXeslnjEkwLaOxQoElkLWDVv+S
         EwjS34lYzKVnuDt0aGfj5VAGhplBPRUYx2wRvJf4WnAWQOLnP11tbiouB7fRvQYfCsoi
         mcGvzJiI8XulndAcnEb6AQga5+qqUYCUhxSIk=
Received: by 10.140.164.6 with SMTP id m6mr4968390rve.210.1221499927977;
        Mon, 15 Sep 2008 10:32:07 -0700 (PDT)
Received: by 10.141.176.5 with HTTP; Mon, 15 Sep 2008 10:32:07 -0700 (PDT)
Message-ID: <1bcb7c7f0809151032t335c9306s202edea87f84a9da@mail.gmail.com>
Date: Mon, 15 Sep 2008 20:32:07 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: 2.4 questions
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I see that IndexWriter.flush() is depreciated in 2.4. What do we use?

Also I used to make a:

        try {
            nodeWriter = new IndexWriter(nodeDir, true, analyzer, false);
        } catch(FileNotFoundException e) {
            nodeWriter = new IndexWriter(nodeDir, true, analyzer, true);
        }


it seems that the constructor for indexwriter is also depreciated.

Any ideas?

Best.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 17:50:33 2008
Return-Path: <java-user-return-36147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81643 invoked from network); 15 Sep 2008 17:50:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 17:50:33 -0000
Received: (qmail 83198 invoked by uid 500); 15 Sep 2008 17:50:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83173 invoked by uid 500); 15 Sep 2008 17:50:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83162 invoked by uid 99); 15 Sep 2008 17:50:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 10:50:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.237 as permitted sender)
Received: from [209.85.198.237] (HELO rv-out-0506.google.com) (209.85.198.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 17:49:25 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2106064rvb.5
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 10:49:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=WuSRW391fW0bf6YID0C83rdCvxoWoefrgc7wHqRc9/c=;
        b=Fff7dj/3Ey1QluyH4JmAeYB+sLm3f5KUt9nrQnnD5/D6oVzTZWVun0aNxwU6oo8smn
         iSZIGOUIWe3d1FH7A6TT6WsHOxayfLRSoFuNtklrkmAxH662ppo8/3aj4fDPA5g3kzFB
         fAMTE+GiVw47zCSaDajpLpH4w3P/eFWT7zFP4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=CnV9exSTqHMr0qXTDW/hhtwcwbvhcSbo2/89FnmohM+l1eKGJ77tkuMonvBLG6Dnky
         teRqm72fEwNehFNynMMzgPus0clapjMWsKaLKymXL90TM7QFdN3S6wjuo6Qp8NGSoXZ0
         uGFZl84AEtITjcyBQCaPD5AhUpZ5naUe4qm+4=
Received: by 10.141.88.3 with SMTP id q3mr4977886rvl.94.1221500988585;
        Mon, 15 Sep 2008 10:49:48 -0700 (PDT)
Received: by 10.141.176.5 with HTTP; Mon, 15 Sep 2008 10:49:48 -0700 (PDT)
Message-ID: <1bcb7c7f0809151049o1579b57cg8ace49a5ae4de51c@mail.gmail.com>
Date: Mon, 15 Sep 2008 20:49:48 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: IndexWriter commit
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

What is the difference between flush in <2.4 and commit?

Also I have been looking over docs, and they mention commit(long) but
there is no commit(long) method but only commit()

Best.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 17:54:43 2008
Return-Path: <java-user-return-36148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84303 invoked from network); 15 Sep 2008 17:54:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 17:54:43 -0000
Received: (qmail 87514 invoked by uid 500); 15 Sep 2008 17:54:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87480 invoked by uid 500); 15 Sep 2008 17:54:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87469 invoked by uid 99); 15 Sep 2008 17:54:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 10:54:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.200.169 as permitted sender)
Received: from [209.85.200.169] (HELO wf-out-1314.google.com) (209.85.200.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 17:53:35 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2224901wfc.20
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 10:54:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=Chh2xnbsqGMBulmM3y1h/IQdC3ynXYX9xUQMf1j8cCU=;
        b=lcQqOYOOWKp6qSYa1pzy9k5+X81wRP776pottw4tfyGzVOC5r6Rj0wGc/yydWL2ZE7
         YPBAL+sYD6aATLSjRpm2ucV6L6TdEdXtMiTRsL4Az9iYIjCLfZvs+IKM2RFtmkcLvLEV
         Moonn0Z368IbomK0dHFMLWcUW2CuxxQxgf8NU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=TpMUoXnOBMuAPR3D3R8t/l54SKBtPbxO7Hjnj+nj2sOELO+Mcb+8L1VATEJapv5yRu
         kfYwBtnydvyTwKvb3oQsyzX4Jy/fHpGoBcoPsePgiTi10ZaxAC294KXHVd4zgxsElv3M
         +p+jVccYE+XnibLXhoG79uaXtA8oW+a03PLGE=
Received: by 10.141.114.19 with SMTP id r19mr4974984rvm.295.1221501247864;
        Mon, 15 Sep 2008 10:54:07 -0700 (PDT)
Received: by 10.141.176.5 with HTTP; Mon, 15 Sep 2008 10:54:07 -0700 (PDT)
Message-ID: <1bcb7c7f0809151054u7858dc7bj998776227461b2b4@mail.gmail.com>
Date: Mon, 15 Sep 2008 20:54:07 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: IndexSearcher.search
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

What is the new favorable way of searching a query?

I understand Hits will be depreciated. So how do we do it the new way?
With hit collector?

Best.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 18:10:15 2008
Return-Path: <java-user-return-36149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93546 invoked from network); 15 Sep 2008 18:10:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 18:10:15 -0000
Received: (qmail 19271 invoked by uid 500); 15 Sep 2008 18:10:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19242 invoked by uid 500); 15 Sep 2008 18:10:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19231 invoked by uid 99); 15 Sep 2008 18:10:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 11:10:04 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.39.214] (HELO web50312.mail.re2.yahoo.com) (206.190.39.214)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 15 Sep 2008 18:09:04 +0000
Received: (qmail 39593 invoked by uid 60001); 15 Sep 2008 18:08:35 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=jwVjwt3MprMGoHD1mPWATQHgqjsY1UrGGTIcYClcMT2Z9uyyWpgXyJ4U2MwNNgJfda8HldjG+jRt/KEv5VtDIgXRxQUX3ETAgZLLNmNsjtBMr6J4uvVYPLFNhto9OcbntgwLmw7kiyXspjj77yg2SiEAuGUeP7/UAKbOCbkSlWw=;
X-YMail-OSG: vYyCEAgVM1mMmGa0V48.GNWykHHHB3bPvDIBKzVpQ5jKtWIq.iGK0lZNRLDsJWVtwz9uhJvFwOKLxLbqTtp_3SXS2rqpZu7o7q7P1nhMcoK9pukQ2.3tl3UedEqqoxGdRZ_QBr906lPweoqOocrMHS0-
Received: from [167.206.188.3] by web50312.mail.re2.yahoo.com via HTTP; Mon, 15 Sep 2008 11:08:35 PDT
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Mon, 15 Sep 2008 11:08:35 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: IndexSearcher.search
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <682882.35954.qm@web50312.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Check the Hits javadoc:

 * @deprecated Hits will be removed in Lucene 3.0. <p>
 * Instead e. g. {@link TopDocCollector} and {@link TopDocs} can be used:<br>
 * <pre>
 *   TopDocCollector collector = new TopDocCollector(hitsPerPage);
 *   searcher.search(query, collector);
 *   ScoreDoc[] hits = collector.topDocs().scoreDocs;
 *   for (int i = 0; i < hits.length; i++) {
 *     int docId = hits[i].doc;
 *     Document d = searcher.doc(docId);
 *     // do something with current hit
 *     ...
 * </pre>

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Cam Bazz <cambazz@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Monday, September 15, 2008 1:54:07 PM
> Subject: IndexSearcher.search
> 
> Hello,
> 
> What is the new favorable way of searching a query?
> 
> I understand Hits will be depreciated. So how do we do it the new way?
> With hit collector?
> 
> Best.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 18:11:49 2008
Return-Path: <java-user-return-36150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93818 invoked from network); 15 Sep 2008 18:11:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 18:11:48 -0000
Received: (qmail 22251 invoked by uid 500); 15 Sep 2008 18:11:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21319 invoked by uid 500); 15 Sep 2008 18:11:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21308 invoked by uid 99); 15 Sep 2008 18:11:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 11:11:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.61] (HELO web50307.mail.re2.yahoo.com) (206.190.38.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 15 Sep 2008 18:10:37 +0000
Received: (qmail 91152 invoked by uid 60001); 15 Sep 2008 18:11:08 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=h1UF2RzcFtT6LAhn+KQWJqfR6o4xgKbyTNOAefaUISMRaTDFfN2DUlJgLUO1GcBfvG3pow6FXh0IB4Mi4s0bIkDPvtP/5NtsDO0SeLkpYf37b2RAnJNse2PCnq3O04GFVcRHFXtm+MjuEBItrrxUBUeAhPso5byDvrSjKavrYvA=;
Received: from [167.206.188.3] by web50307.mail.re2.yahoo.com via HTTP; Mon, 15 Sep 2008 11:11:08 PDT
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Mon, 15 Sep 2008 11:11:08 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: patching lucene-1314
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <565910.87296.qm@web50307.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, probably out of sync with the 2.3.2 code.  Have you tried applying it to the trunk?

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Cam Bazz <cambazz@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Monday, September 15, 2008 11:14:31 AM
> Subject: Re: patching lucene-1314
> 
> Well Hello,
> 
> I made the patch inside trunk/src but I am getting failed errors.
> does this mean the lucene-1314 is buggy, or maybe I applied it to the
> wrong version?
> 
> Best.
> 
> joker src # pwd
> /root/lucene/lucene-2.3.2/src
> 
> joker src # patch -p0 < ../../lucene-1314.patch
> 
> patching file java/org/apache/lucene/index/DirectoryIndexReader.java
> Hunk #1 FAILED at 44.
> Hunk #2 FAILED at 113.
> Hunk #3 succeeded at 120 (offset -33 lines).
> 2 out of 3 hunks FAILED -- saving rejects to file
> java/org/apache/lucene/index/D
>                                     irectoryIndexReader.java.rej
> patching file java/org/apache/lucene/index/FieldsReader.java
> Hunk #2 FAILED at 76.
> Hunk #3 succeeded at 105 (offset -26 lines).
> 1 out of 3 hunks FAILED -- saving rejects to file
> java/org/apache/lucene/index/F
>                                     ieldsReader.java.rej
> patching file java/org/apache/lucene/index/FilterIndexReader.java
> patching file java/org/apache/lucene/index/IndexReader.java
> Hunk #1 succeeded at 54 with fuzz 2.
> Hunk #4 succeeded at 255 (offset -25 lines).
> Hunk #5 succeeded at 850 (offset -25 lines).
> Hunk #6 FAILED at 1015.
> 1 out of 6 hunks FAILED -- saving rejects to file
> java/org/apache/lucene/index/I
>                                     ndexReader.java.rej
> patching file java/org/apache/lucene/index/MultiReader.java
> patching file java/org/apache/lucene/index/MultiSegmentReader.java
> patching file java/org/apache/lucene/index/ParallelReader.java
> patching file java/org/apache/lucene/index/SegmentReader.java
> Hunk #1 FAILED at 40.
> Hunk #2 succeeded at 74 (offset -2 lines).
> Hunk #3 succeeded at 116 (offset -2 lines).
> Hunk #4 succeeded at 147 (offset -2 lines).
> Hunk #5 succeeded at 171 (offset -2 lines).
> Hunk #6 succeeded at 310 (offset -2 lines).
> Hunk #7 succeeded at 356 (offset -1 lines).
> Hunk #8 succeeded at 382 (offset -1 lines).
> Hunk #9 succeeded at 411 with fuzz 1 (offset -6 lines).
> Hunk #10 succeeded at 451 (offset -6 lines).
> Hunk #11 succeeded at 469 (offset -6 lines).
> Hunk #12 succeeded at 496 (offset -6 lines).
> Hunk #13 succeeded at 505 (offset -6 lines).
> Hunk #14 succeeded at 545 (offset -6 lines).
> Hunk #15 succeeded at 627 (offset -9 lines).
> Hunk #16 succeeded at 652 (offset -9 lines).
> Hunk #17 succeeded at 698 (offset -9 lines).
> Hunk #18 succeeded at 743 (offset -10 lines).
> Hunk #19 succeeded at 891 (offset -10 lines).
> Hunk #20 succeeded at 1004 (offset -10 lines).
> 1 out of 20 hunks FAILED -- saving rejects to file
> java/org/apache/lucene/index/
>                                    SegmentReader.java.rej
> patching file java/org/apache/lucene/util/BitVector.java
> Hunk #1 succeeded at 35 with fuzz 2.
> patching file test/org/apache/lucene/index/TestIndexReaderClone.java
> patching file test/org/apache/lucene/index/TestIndexReaderReopen.java
> Hunk #1 FAILED at 852.
> 1 out of 1 hunk FAILED -- saving rejects to file
> test/org/apache/lucene/index/Te
>                                      stIndexReaderReopen.java.rej
> 
> 
> 
> On Mon, Sep 15, 2008 at 4:02 PM, Grant Ingersoll wrote:
> > I usually do:
> > cd 
> > patch -p 0 -i 
> >
> > See also the HowToContribute page on the wiki.
> >
> >
> > On Sep 15, 2008, at 7:38 AM, Cam Bazz wrote:
> >
> >> Hello,
> >>
> >> To patch for lucene-1314 what must I do?
> >>
> >> I think I have to cd into one of the directories, then patch -pX <
> >> ../../patchfile,
> >>
> >> but I could not figure it out.
> >>
> >> Best,
> >> -C.B.
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >
> > --------------------------
> > Grant Ingersoll
> > http://www.lucidimagination.com
> >
> > Lucene Helpful Hints:
> > http://wiki.apache.org/lucene-java/BasicsOfPerformance
> > http://wiki.apache.org/lucene-java/LuceneFAQ
> >
> >
> >
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 18:43:35 2008
Return-Path: <java-user-return-36151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25092 invoked from network); 15 Sep 2008 18:43:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 18:43:35 -0000
Received: (qmail 84614 invoked by uid 500); 15 Sep 2008 18:43:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84238 invoked by uid 500); 15 Sep 2008 18:43:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84227 invoked by uid 99); 15 Sep 2008 18:43:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 11:43:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.200.170 as permitted sender)
Received: from [209.85.200.170] (HELO wf-out-1314.google.com) (209.85.200.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 18:42:26 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2240142wfc.20
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 11:42:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=jfLJb5kBvqgdFKMfSTzf17pLrIhAdtBJXvfPv9PYNwo=;
        b=rZ2osS3q5vwCxIZROaxRta7owEsUpdqF1za5Y1V2pqeXXdQIqNcfJOFe8UU35YTB37
         ie9kGimwvkzJW/UFCRWefuMDiprcgvG6z2XHBjuL9TA32qYO9nPDXjg/E8twXeUlrZWe
         BHB4et2b0fcqDFvA3qPWvG6m3HM3egU/ptxtU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=plC5HNe56GcXDk/tdYYHWidchJ9TOlmUPZJN5jWc/pJD3W347uBBz5t/9bevqh6xpa
         mfPrsYdcRqmr6NpKkd1U1Knnma1iF3YMldMjiEl5f1uGDzDvVsx/TPrxr4s+kI/N3Yvk
         qlxDh18o9DZrVmb+pHkYTuEVfW5g0R7pYOc5s=
Received: by 10.141.52.5 with SMTP id e5mr5033995rvk.10.1221504169377;
        Mon, 15 Sep 2008 11:42:49 -0700 (PDT)
Received: by 10.141.176.5 with HTTP; Mon, 15 Sep 2008 11:42:49 -0700 (PDT)
Message-ID: <1bcb7c7f0809151142kb08c64bwe94af5c810b6715@mail.gmail.com>
Date: Mon, 15 Sep 2008 21:42:49 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: IndexReader.isDeleted
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I would like to get advantage of isDeleted. If I delete a document
from index, and not commit, and index searcher is not reinstantiated,
how can I check if a document is marked for deletion? I tried it with
both commit() and without committing, the isDeleted(mydeleteddocid)
returns always false.

if the indexsearcher is refreshed, then it is deleted.

Best.

-C.B.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 18:49:13 2008
Return-Path: <java-user-return-36152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28556 invoked from network); 15 Sep 2008 18:49:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 18:49:13 -0000
Received: (qmail 93142 invoked by uid 500); 15 Sep 2008 18:49:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92673 invoked by uid 500); 15 Sep 2008 18:49:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92657 invoked by uid 99); 15 Sep 2008 18:49:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 11:49:03 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.92.25] (HELO qw-out-2122.google.com) (74.125.92.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 18:48:04 +0000
Received: by qw-out-2122.google.com with SMTP id 5so182339qwi.53
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 11:48:35 -0700 (PDT)
Received: by 10.214.81.9 with SMTP id e9mr6278780qab.30.1221504514997;
        Mon, 15 Sep 2008 11:48:34 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id 6sm10480317qwk.1.2008.09.15.11.48.33
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 15 Sep 2008 11:48:34 -0700 (PDT)
Message-Id: <A9C8A0D8-662E-4DC0-AE10-DAE97909DA27@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <1bcb7c7f0809151049o1579b57cg8ace49a5ae4de51c@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: IndexWriter commit
Date: Mon, 15 Sep 2008 14:48:32 -0400
References: <1bcb7c7f0809151049o1579b57cg8ace49a5ae4de51c@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


There is no difference, unless your computer/OS crashes or loses power  
shortly after you had call the method.

In that case, there's a big difference: commit() guarantees your index  
will be intact (assuming the storage system holding your index was not  
damaged) but with flush(), which doesn't sync() the index files it  
writes, it's entirely possible that the index will become corrupt  
because some files were still in the OS's write cache when it crashed.

But the guarantee only holds if the underlying storage system is  
"honest" about fsync(), ie, it truly flushes all written bytes for  
that file to disk before returning.

Mike

Cam Bazz wrote:

> Hello,
>
> What is the difference between flush in <2.4 and commit?
>
> Also I have been looking over docs, and they mention commit(long) but
> there is no commit(long) method but only commit()
>
> Best.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 18:49:51 2008
Return-Path: <java-user-return-36153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28977 invoked from network); 15 Sep 2008 18:49:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 18:49:51 -0000
Received: (qmail 94850 invoked by uid 500); 15 Sep 2008 18:49:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94391 invoked by uid 500); 15 Sep 2008 18:49:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94380 invoked by uid 99); 15 Sep 2008 18:49:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 11:49:40 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 74.125.92.25 is neither permitted nor denied by domain of lucene@mikemccandless.com)
Received: from [74.125.92.25] (HELO qw-out-2122.google.com) (74.125.92.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 18:48:41 +0000
Received: by qw-out-2122.google.com with SMTP id 5so182339qwi.53
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 11:49:13 -0700 (PDT)
Received: by 10.214.43.8 with SMTP id q8mr6253338qaq.53.1221504553801;
        Mon, 15 Sep 2008 11:49:13 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id 6sm10480317qwk.1.2008.09.15.11.49.12
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 15 Sep 2008 11:49:13 -0700 (PDT)
Message-Id: <8A7533CD-8357-43CF-812D-FC8832BA7F24@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <1bcb7c7f0809151049o1579b57cg8ace49a5ae4de51c@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: IndexWriter commit
Date: Mon, 15 Sep 2008 14:49:12 -0400
References: <1bcb7c7f0809151049o1579b57cg8ace49a5ae4de51c@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Oh and I just committed a fix to IndexWriter's javadocs --  
commit(long) is a private method that should never have been in the  
javadocs.  Thanks for raising this!

Mike

Cam Bazz wrote:

> Hello,
>
> What is the difference between flush in <2.4 and commit?
>
> Also I have been looking over docs, and they mention commit(long) but
> there is no commit(long) method but only commit()
>
> Best.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 18:53:07 2008
Return-Path: <java-user-return-36154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31307 invoked from network); 15 Sep 2008 18:53:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 18:53:07 -0000
Received: (qmail 98355 invoked by uid 500); 15 Sep 2008 18:52:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98319 invoked by uid 500); 15 Sep 2008 18:52:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98308 invoked by uid 99); 15 Sep 2008 18:52:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 11:52:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.227 as permitted sender)
Received: from [209.85.198.227] (HELO rv-out-0506.google.com) (209.85.198.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 18:51:58 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2129112rvb.5
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 11:52:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=yvD8y3WPAWsRX3kNhtOYA+BbDNn4bpBKaUqNd98jcFE=;
        b=O0HiSIteCU2pTEbR303wYtkpQm24gQ896Rt/WM5RWXf6v7lcmEsfWY5e+YWmJkm3q9
         zLPhW/HOVlFnYAuCWhkJC+O4u+xvErOSvDID5Fy5+5XCO6BYzEVGKcXwKCj2JthKPLAe
         b60LSaK1OhyJ8Tv+55TxxQ1704R8pSgJrASTM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=ksDQW0wBN4HebOveXBFi4hiHyy3m44JGgxHpNnf2a5DKu/7pxI4yVGMNh+B6SMarSN
         TS8W/q5tIO/DHN+OHae6suV1dr2QN77r5LxWmCrnUQG7Eg958IsMj+EMl5Wj+uQHM9MQ
         q9iIq5nh40H56CUgGZuzyJx4QdQUvjfjHk/KY=
Received: by 10.141.193.1 with SMTP id v1mr5027012rvp.73.1221504741316;
        Mon, 15 Sep 2008 11:52:21 -0700 (PDT)
Received: by 10.141.176.5 with HTTP; Mon, 15 Sep 2008 11:52:21 -0700 (PDT)
Message-ID: <1bcb7c7f0809151152g7b7cd0c0va6914c6e0a489f74@mail.gmail.com>
Date: Mon, 15 Sep 2008 21:52:21 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexWriter commit
In-Reply-To: <8A7533CD-8357-43CF-812D-FC8832BA7F24@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1bcb7c7f0809151049o1579b57cg8ace49a5ae4de51c@mail.gmail.com>
	 <8A7533CD-8357-43CF-812D-FC8832BA7F24@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

Thanks a bunch Michael. Its been a long time I wanted to upgrade to
2.4. It seems major change has been done.

Best.

On Mon, Sep 15, 2008 at 9:49 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
>
> Oh and I just committed a fix to IndexWriter's javadocs -- commit(long) is a
> private method that should never have been in the javadocs.  Thanks for
> raising this!
>
> Mike
>
> Cam Bazz wrote:
>
>> Hello,
>>
>> What is the difference between flush in <2.4 and commit?
>>
>> Also I have been looking over docs, and they mention commit(long) but
>> there is no commit(long) method but only commit()
>>
>> Best.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 19:05:57 2008
Return-Path: <java-user-return-36155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38672 invoked from network); 15 Sep 2008 19:05:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 19:05:57 -0000
Received: (qmail 14478 invoked by uid 500); 15 Sep 2008 19:05:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14385 invoked by uid 500); 15 Sep 2008 19:05:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14374 invoked by uid 99); 15 Sep 2008 19:05:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 12:05:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.200.171 as permitted sender)
Received: from [209.85.200.171] (HELO wf-out-1314.google.com) (209.85.200.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 19:04:47 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2247060wfc.20
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 12:05:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=0UKqtfspZBzJGeOxHZP+AOFDGk95nfq8pL+LsKOBfAQ=;
        b=p0WoIN9EQrOzhcih+mfGGC4nmWtgRi1iiGwBlhfrI6bIUv5gqROHg1Fzr9d1kze2jA
         /yP28Ljps7Wef6exT4RZugcTVjp5ZCfgQX1kRO4nqHpi4p2aTMQlF4AKB7gvtFPpDJF8
         mnPCZF0BpHWudsMp9U4Fu/z0RX8S5VTmopp+U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=mIvQnhC4PsiXUI3hlnBAxe85CTlapjFGbmzTKGlQQ7Qhjr9EykTEHVhWMYTsMwE2lT
         gNKhLkLK3psy5pdeUSBPDG+lSWX7DhyG7qQDrs5WdJe6P52SpZx58gkbCJSCAwCIwSra
         ZI53NQnNTNh5WwfjpUIAUNdufk7tRjzwh4aos=
Received: by 10.140.201.15 with SMTP id y15mr5039779rvf.145.1221505519755;
        Mon, 15 Sep 2008 12:05:19 -0700 (PDT)
Received: by 10.141.176.5 with HTTP; Mon, 15 Sep 2008 12:05:19 -0700 (PDT)
Message-ID: <1bcb7c7f0809151205s3c55ab73i87c1cc3efa09b9e5@mail.gmail.com>
Date: Mon, 15 Sep 2008 22:05:19 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: more on isDeleted
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

Here is what I am trying to do:

        dir = FSDirectory.getDirectory("/test");
        writer = new IndexWriter(dir, analyzer, true, new
IndexWriter.MaxFieldLength(2));
        writer.setMaxBufferedDocs(IndexWriter.DISABLE_AUTO_FLUSH);

        Document da = new Document();
        da.add(new Field("word", "a", Field.Store.YES,
Field.Index.NOT_ANALYZED_NO_NORMS));

        Document db = new Document();
        db.add(new Field("word", "b", Field.Store.YES,
Field.Index.NOT_ANALYZED_NO_NORMS));

        writer.addDocument(da);
        writer.addDocument(db);

        writer.commit();

        searcher = new IndexSearcher(dir);

        writer.deleteDocuments(new Term("word", "a"));
        writer.commit();

        TopDocCollector collector = new TopDocCollector(10);
        searcher.search(new TermQuery(new Term("word","a")), collector);
        ScoreDoc[] hits = collector.topDocs().scoreDocs;
        for (int i = 0; i < hits.length; i++) {
            int docId = hits[i].doc;
            Document d = searcher.doc(docId);
            System.out.println(writer.hasDeletions());
            System.out.println(searcher.getIndexReader().isDeleted(docId));
            System.out.println(d.get("word"));
        }

        searcher.close();
        writer.close();
        dir.close();


well I am trying to check if an document has been deleted without
refreshing the searcher. maybe i should access indexreader in a
different way?
the isDeleted() always returns false. that is the problem right now.

Best.

-C.B.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 19:06:05 2008
Return-Path: <java-user-return-36156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38779 invoked from network); 15 Sep 2008 19:06:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 19:06:04 -0000
Received: (qmail 14992 invoked by uid 500); 15 Sep 2008 19:05:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14967 invoked by uid 500); 15 Sep 2008 19:05:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14926 invoked by uid 99); 15 Sep 2008 19:05:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 12:05:48 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 19:04:50 +0000
Received: by gxk6 with SMTP id 6so17122411gxk.5
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 12:05:21 -0700 (PDT)
Received: by 10.100.171.16 with SMTP id t16mr299792ane.158.1221505520980;
        Mon, 15 Sep 2008 12:05:20 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id d21sm15514714and.0.2008.09.15.12.05.19
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 15 Sep 2008 12:05:20 -0700 (PDT)
Message-Id: <80DEC62A-0EC1-40B7-B643-153799FA1448@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <1bcb7c7f0809151032t335c9306s202edea87f84a9da@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: 2.4 questions
Date: Mon, 15 Sep 2008 15:05:18 -0400
References: <1bcb7c7f0809151032t335c9306s202edea87f84a9da@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Cam Bazz wrote:

> Hello,
>
> I see that IndexWriter.flush() is depreciated in 2.4. What do we use?

Looks like you already found it, but the javadoc says this:

      * @deprecated please call {@link #commit()}) instead

>
> Also I used to make a:
>
>        try {
>            nodeWriter = new IndexWriter(nodeDir, true, analyzer,  
> false);
>        } catch(FileNotFoundException e) {
>            nodeWriter = new IndexWriter(nodeDir, true, analyzer,  
> true);
>        }
>
>
> it seems that the constructor for indexwriter is also depreciated.

I just fixed the javadoc to say:

    *  Use {@link  
#IndexWriter(Directory,Analyzer,boolean,MaxFieldLength)} instead.

There were two changes that affect that constructor.  First, the  
autoCommit boolean will go away in 3.0, and IndexWriter will be  
hardwired to "autoCommit=false".  You can always call commit on your  
own schedule if needed.  Second, all IndexWriter ctor's now take an  
IndexWriter.MaxFieldLength instance (you can use LIMITED or UNLIMITED,  
or make your own).  This is just making the usual maxFieldLength  
setting in IndexWriter more in-your-face so that everyone is aware  
when they make an IndexWriter that it can truncate input documents  
(since it was a trap before).

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 19:18:49 2008
Return-Path: <java-user-return-36157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43922 invoked from network); 15 Sep 2008 19:18:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 19:18:48 -0000
Received: (qmail 31072 invoked by uid 500); 15 Sep 2008 19:18:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31037 invoked by uid 500); 15 Sep 2008 19:18:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31026 invoked by uid 99); 15 Sep 2008 19:18:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 12:18:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.200.174 as permitted sender)
Received: from [209.85.200.174] (HELO wf-out-1314.google.com) (209.85.200.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 19:17:40 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2251222wfc.20
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 12:18:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=AnpeRj3YdsUiVDoEVvp8228jj+qUVnBBIrfua6K9tWA=;
        b=jwgMokpbIdoYwfCBmTqF8eQMdhmFBie89VVNMtg6OC+VjowaldXaA32ULgXZXcHOwI
         E72awH/SPvss5zd6JSzwycez5tm1MMOlyt9isdp3veWQM2apQ2xEAPAnVF/H9zOQ07c9
         dvM3EL8XOoJBE13Tk3dV07XID/dXCZtQ4FMgk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=xDi0poCrT59uKKkR05DlfKZDZMv3IMIiKaF+zk0zIhLBZnf03xKQO+1sLYDq8Fd/uh
         P+SNLYnYPVMLsFJGHAA25l+Tock7FOTJ288UjAX8ViiOxb5sG6/bJOrFZI+U0x5/pb7h
         /PTbUsNF2DVq3pnazUGRksdlsiEn1gAhN6IYM=
Received: by 10.141.79.12 with SMTP id g12mr5029746rvl.182.1221506265078;
        Mon, 15 Sep 2008 12:17:45 -0700 (PDT)
Received: by 10.141.176.5 with HTTP; Mon, 15 Sep 2008 12:17:45 -0700 (PDT)
Message-ID: <1bcb7c7f0809151217q7f371a87m784dcc818921a9c2@mail.gmail.com>
Date: Mon, 15 Sep 2008 22:17:45 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: 2.4 questions
In-Reply-To: <80DEC62A-0EC1-40B7-B643-153799FA1448@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1bcb7c7f0809151032t335c9306s202edea87f84a9da@mail.gmail.com>
	 <80DEC62A-0EC1-40B7-B643-153799FA1448@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

great!

well I never use autoCommit=true.

However the documentation states that autoCommit=true.

How do we disable this? In 2.3 I used to do a:

writer.setMaxBufferedDocs(IndexWriter.DISABLE_AUTO_FLUSH);

would that totally disable autoCommit, or will it autoCommit when the
ram usage reaches a certain criteria.

Best.

On Mon, Sep 15, 2008 at 10:05 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
>
> Cam Bazz wrote:
>
>> Hello,
>>
>> I see that IndexWriter.flush() is depreciated in 2.4. What do we use?
>
> Looks like you already found it, but the javadoc says this:
>
>     * @deprecated please call {@link #commit()}) instead
>
>>
>> Also I used to make a:
>>
>>       try {
>>           nodeWriter = new IndexWriter(nodeDir, true, analyzer, false);
>>       } catch(FileNotFoundException e) {
>>           nodeWriter = new IndexWriter(nodeDir, true, analyzer, true);
>>       }
>>
>>
>> it seems that the constructor for indexwriter is also depreciated.
>
> I just fixed the javadoc to say:
>
>   *  Use {@link #IndexWriter(Directory,Analyzer,boolean,MaxFieldLength)}
> instead.
>
> There were two changes that affect that constructor.  First, the autoCommit
> boolean will go away in 3.0, and IndexWriter will be hardwired to
> "autoCommit=false".  You can always call commit on your own schedule if
> needed.  Second, all IndexWriter ctor's now take an
> IndexWriter.MaxFieldLength instance (you can use LIMITED or UNLIMITED, or
> make your own).  This is just making the usual maxFieldLength setting in
> IndexWriter more in-your-face so that everyone is aware when they make an
> IndexWriter that it can truncate input documents (since it was a trap
> before).
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 19:21:05 2008
Return-Path: <java-user-return-36158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44946 invoked from network); 15 Sep 2008 19:21:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 19:21:04 -0000
Received: (qmail 34476 invoked by uid 500); 15 Sep 2008 19:20:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34439 invoked by uid 500); 15 Sep 2008 19:20:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34428 invoked by uid 99); 15 Sep 2008 19:20:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 12:20:53 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.250] (HELO an-out-0708.google.com) (209.85.132.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 19:19:54 +0000
Received: by an-out-0708.google.com with SMTP id c37so225714anc.49
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 12:20:26 -0700 (PDT)
Received: by 10.100.172.17 with SMTP id u17mr419501ane.28.1221506426553;
        Mon, 15 Sep 2008 12:20:26 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id c38sm654190anc.25.2008.09.15.12.20.25
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 15 Sep 2008 12:20:25 -0700 (PDT)
Message-Id: <1CA5EB01-9A02-4C03-810A-A68C8CEBA757@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <1bcb7c7f0809151205s3c55ab73i87c1cc3efa09b9e5@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: more on isDeleted
Date: Mon, 15 Sep 2008 15:20:24 -0400
References: <1bcb7c7f0809151205s3c55ab73i87c1cc3efa09b9e5@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


You'll have to open a new IndexReader after the delete is committed.

An IndexReader (or IndexSearcher) only searches the point-in-time  
snapshot of the index as of when it was opened.

Mike

Cam Bazz wrote:

> Hello,
>
> Here is what I am trying to do:
>
>        dir = FSDirectory.getDirectory("/test");
>        writer = new IndexWriter(dir, analyzer, true, new
> IndexWriter.MaxFieldLength(2));
>        writer.setMaxBufferedDocs(IndexWriter.DISABLE_AUTO_FLUSH);
>
>        Document da = new Document();
>        da.add(new Field("word", "a", Field.Store.YES,
> Field.Index.NOT_ANALYZED_NO_NORMS));
>
>        Document db = new Document();
>        db.add(new Field("word", "b", Field.Store.YES,
> Field.Index.NOT_ANALYZED_NO_NORMS));
>
>        writer.addDocument(da);
>        writer.addDocument(db);
>
>        writer.commit();
>
>        searcher = new IndexSearcher(dir);
>
>        writer.deleteDocuments(new Term("word", "a"));
>        writer.commit();
>
>        TopDocCollector collector = new TopDocCollector(10);
>        searcher.search(new TermQuery(new Term("word","a")),  
> collector);
>        ScoreDoc[] hits = collector.topDocs().scoreDocs;
>        for (int i = 0; i < hits.length; i++) {
>            int docId = hits[i].doc;
>            Document d = searcher.doc(docId);
>            System.out.println(writer.hasDeletions());
>             
> System.out.println(searcher.getIndexReader().isDeleted(docId));
>            System.out.println(d.get("word"));
>        }
>
>        searcher.close();
>        writer.close();
>        dir.close();
>
>
> well I am trying to check if an document has been deleted without
> refreshing the searcher. maybe i should access indexreader in a
> different way?
> the isDeleted() always returns false. that is the problem right now.
>
> Best.
>
> -C.B.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 19:31:34 2008
Return-Path: <java-user-return-36159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53349 invoked from network); 15 Sep 2008 19:31:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 19:31:34 -0000
Received: (qmail 48867 invoked by uid 500); 15 Sep 2008 19:31:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48841 invoked by uid 500); 15 Sep 2008 19:31:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48830 invoked by uid 99); 15 Sep 2008 19:31:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 12:31:24 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 19:30:25 +0000
Received: by yx-out-2324.google.com with SMTP id 3so696932yxj.5
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 12:30:37 -0700 (PDT)
Received: by 10.100.11.7 with SMTP id 7mr433142ank.32.1221507037575;
        Mon, 15 Sep 2008 12:30:37 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id c40sm19804903anc.38.2008.09.15.12.30.36
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 15 Sep 2008 12:30:36 -0700 (PDT)
Message-Id: <861B1881-E636-488D-8C2C-62DDBDBEB03C@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <1bcb7c7f0809151217q7f371a87m784dcc818921a9c2@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: 2.4 questions
Date: Mon, 15 Sep 2008 15:30:34 -0400
References: <1bcb7c7f0809151032t335c9306s202edea87f84a9da@mail.gmail.com> <80DEC62A-0EC1-40B7-B643-153799FA1448@mikemccandless.com> <1bcb7c7f0809151217q7f371a87m784dcc818921a9c2@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Cam Bazz wrote:

> However the documentation states that autoCommit=true.

For now, keep using the deprecated API and specify autoCommit=false.   
Then in 3.0, when IndexWriter switches to autoCommit=false, remove the  
boolean autoCommit from your constructor.

> How do we disable this? In 2.3 I used to do a:
>
> writer.setMaxBufferedDocs(IndexWriter.DISABLE_AUTO_FLUSH);
>
> would that totally disable autoCommit, or will it autoCommit when the
> ram usage reaches a certain criteria.

Actually, this (maxBufferedDocs, as well as ramBufferSizeMB) controls  
when buffered docs in RAM are written as a new segment to disk.  When  
such a segment is created, it's not yet referenced by a segments_N  
file (thus a newly opened IndexReader won't see them) until a commit  
(or flush) happens.

autoCommit=true, instead, means IndexWriter will periodically (on it's  
own schedule) call commit() internally.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 19:31:57 2008
Return-Path: <java-user-return-36160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53523 invoked from network); 15 Sep 2008 19:31:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 19:31:57 -0000
Received: (qmail 50550 invoked by uid 500); 15 Sep 2008 19:31:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50520 invoked by uid 500); 15 Sep 2008 19:31:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50503 invoked by uid 99); 15 Sep 2008 19:31:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 12:31:46 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.200.168 as permitted sender)
Received: from [209.85.200.168] (HELO wf-out-1314.google.com) (209.85.200.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 19:30:48 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2255367wfc.20
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 12:31:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=pO1G2rlCcCKPi+CPxAegyObbrsvsF6GA0Lv0IgAIbJo=;
        b=oBeOW+6AL90VFh1PrvGtoSTpfsu+TpsQVL5dsZw7uSFlhwHIYUiRjXk+SXLbbn2Y3M
         EgJw4MxaFdL4mS5qv79ZIDkQqkuA0VZtyOb9exlTj5ox7+2D49ZXhG7HA45aaGIwkmqS
         OFP5Z49ZHZid/ZB4Qj85NxTujcEhUWJgCfzq0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=GzAnSyGVkqxh4Mgz6Ya7+ryQ8acXZcpA/JeB6vrongKf1X2LeK2VqYQKmrNrQQU7Hj
         H7PecDinnmDHA8FigJ7rFuTljAc5lgg3mx+NkephBETS28TWdM60e0DxmYfL649UJ0lv
         NjQOVuMGGPBEvdy4xMK9JV0c27bOcRdpOuEh4=
Received: by 10.141.211.13 with SMTP id n13mr5041185rvq.184.1221507071059;
        Mon, 15 Sep 2008 12:31:11 -0700 (PDT)
Received: by 10.141.176.5 with HTTP; Mon, 15 Sep 2008 12:31:11 -0700 (PDT)
Message-ID: <1bcb7c7f0809151231i1ebf465ele2a9eca8f0c094cc@mail.gmail.com>
Date: Mon, 15 Sep 2008 22:31:11 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: more on isDeleted
In-Reply-To: <1CA5EB01-9A02-4C03-810A-A68C8CEBA757@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1bcb7c7f0809151205s3c55ab73i87c1cc3efa09b9e5@mail.gmail.com>
	 <1CA5EB01-9A02-4C03-810A-A68C8CEBA757@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

So, apart from the searcher, is there anyway to access the deletion
marks in an indexWriter.

I have a live cache - and I was keeping two caches, ones for new adds,
other for deletes.
I am trying to get rid of deleted cache, and ask the index if a
fetched document is marked deleted.

Best.

-C.B.

On Mon, Sep 15, 2008 at 10:20 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
>
> You'll have to open a new IndexReader after the delete is committed.
>
> An IndexReader (or IndexSearcher) only searches the point-in-time snapshot
> of the index as of when it was opened.
>
> Mike
>
> Cam Bazz wrote:
>
>> Hello,
>>
>> Here is what I am trying to do:
>>
>>       dir = FSDirectory.getDirectory("/test");
>>       writer = new IndexWriter(dir, analyzer, true, new
>> IndexWriter.MaxFieldLength(2));
>>       writer.setMaxBufferedDocs(IndexWriter.DISABLE_AUTO_FLUSH);
>>
>>       Document da = new Document();
>>       da.add(new Field("word", "a", Field.Store.YES,
>> Field.Index.NOT_ANALYZED_NO_NORMS));
>>
>>       Document db = new Document();
>>       db.add(new Field("word", "b", Field.Store.YES,
>> Field.Index.NOT_ANALYZED_NO_NORMS));
>>
>>       writer.addDocument(da);
>>       writer.addDocument(db);
>>
>>       writer.commit();
>>
>>       searcher = new IndexSearcher(dir);
>>
>>       writer.deleteDocuments(new Term("word", "a"));
>>       writer.commit();
>>
>>       TopDocCollector collector = new TopDocCollector(10);
>>       searcher.search(new TermQuery(new Term("word","a")), collector);
>>       ScoreDoc[] hits = collector.topDocs().scoreDocs;
>>       for (int i = 0; i < hits.length; i++) {
>>           int docId = hits[i].doc;
>>           Document d = searcher.doc(docId);
>>           System.out.println(writer.hasDeletions());
>>           System.out.println(searcher.getIndexReader().isDeleted(docId));
>>           System.out.println(d.get("word"));
>>       }
>>
>>       searcher.close();
>>       writer.close();
>>       dir.close();
>>
>>
>> well I am trying to check if an document has been deleted without
>> refreshing the searcher. maybe i should access indexreader in a
>> different way?
>> the isDeleted() always returns false. that is the problem right now.
>>
>> Best.
>>
>> -C.B.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 19:42:34 2008
Return-Path: <java-user-return-36161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59407 invoked from network); 15 Sep 2008 19:42:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 19:42:34 -0000
Received: (qmail 60946 invoked by uid 500); 15 Sep 2008 19:42:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60915 invoked by uid 500); 15 Sep 2008 19:42:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60904 invoked by uid 99); 15 Sep 2008 19:42:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 12:42:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.224 as permitted sender)
Received: from [209.85.198.224] (HELO rv-out-0506.google.com) (209.85.198.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 19:41:25 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2146693rvb.5
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 12:41:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=UHRXrmWWLTy98hGLtARnS5iUWzwkv8FwZ4mBPE2YNOM=;
        b=DyH2RhziMPt+rmxl3YYJOJ5w1O9QLQAdrgqidMOLubHwdgQqfeNyD8KYZauATjFln0
         9SjBF8AV4Z4veQL1pqezQ9hkwDNSXSP0ZfVf2vzC5gcQ833fjMNn0W1jzRU4Vfc52Rji
         iUB9R4fdciVcdum9gLCf0lTo8ubdgPmwjt6FA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=jA8vn+avzxdsYdHNUe2YNqM3nLZnhLLJj6y7ly4VdH4fLMJaLnOBdag3ifBHplMGpQ
         TlL9PNCj16qxgUAdF3Rj9L7QfsgRYzKYTcvPxZg31d7X2V8asIRsN3PbgDVqu3fDs0t+
         Oe49jX+eYHzrSKAgdNzpxY53gc5YMvXl97R8k=
Received: by 10.141.142.15 with SMTP id u15mr5058113rvn.171.1221507708033;
        Mon, 15 Sep 2008 12:41:48 -0700 (PDT)
Received: by 10.141.176.5 with HTTP; Mon, 15 Sep 2008 12:41:47 -0700 (PDT)
Message-ID: <1bcb7c7f0809151241w3c344bb1j50df7e45391cbe94@mail.gmail.com>
Date: Mon, 15 Sep 2008 22:41:47 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: 2.4 questions
In-Reply-To: <861B1881-E636-488D-8C2C-62DDBDBEB03C@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1bcb7c7f0809151032t335c9306s202edea87f84a9da@mail.gmail.com>
	 <80DEC62A-0EC1-40B7-B643-153799FA1448@mikemccandless.com>
	 <1bcb7c7f0809151217q7f371a87m784dcc818921a9c2@mail.gmail.com>
	 <861B1881-E636-488D-8C2C-62DDBDBEB03C@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

well, I did not understand here.

so there is a no way of using the new constructor - and specify
autoCommit = false ?

Best

On Mon, Sep 15, 2008 at 10:30 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
>
> Cam Bazz wrote:
>
>> However the documentation states that autoCommit=true.
>
> For now, keep using the deprecated API and specify autoCommit=false.  Then
> in 3.0, when IndexWriter switches to autoCommit=false, remove the boolean
> autoCommit from your constructor.
>
>> How do we disable this? In 2.3 I used to do a:
>>
>> writer.setMaxBufferedDocs(IndexWriter.DISABLE_AUTO_FLUSH);
>>
>> would that totally disable autoCommit, or will it autoCommit when the
>> ram usage reaches a certain criteria.
>
> Actually, this (maxBufferedDocs, as well as ramBufferSizeMB) controls when
> buffered docs in RAM are written as a new segment to disk.  When such a
> segment is created, it's not yet referenced by a segments_N file (thus a
> newly opened IndexReader won't see them) until a commit (or flush) happens.
>
> autoCommit=true, instead, means IndexWriter will periodically (on it's own
> schedule) call commit() internally.
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 19:56:16 2008
Return-Path: <java-user-return-36162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72107 invoked from network); 15 Sep 2008 19:56:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 19:56:16 -0000
Received: (qmail 72400 invoked by uid 500); 15 Sep 2008 19:56:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72365 invoked by uid 500); 15 Sep 2008 19:56:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72354 invoked by uid 99); 15 Sep 2008 19:56:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 12:56:04 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dipench@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 19:55:07 +0000
Received: by gxk6 with SMTP id 6so17234601gxk.5
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 12:55:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=tV8bCkFe4dvh5aa203tHXyeuzAft5Fi49woyU//52ng=;
        b=hv+pr5LJb3tD/5tONzxWkxccbi0RxC/F0eBjFD8RXYYdR+J/vb2C19yEgP2aPR7URL
         mwVhPDqyzpdDwp1c2laMwgomLgKfqc8jtmxTS0a5DAK7eI5z2n9JKmTh5OGJ8gWkNRtI
         QkkPYmijS/lxr5aVT9OwhNxFJBo7smOh9MPbk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=d6ZAWZHqoKn9P0a35Oh45pcqYnvrf7Y7LvGW8gbU1iNwAk3eLNDpfvpNErvgz6eEpk
         bs3I8HqRQDLoOu0tjDPdaTb+NT9ps66Xy/QM5Vjelc53Q51wOJBVtTKtN3ahC8YGbCPq
         B0MsbEcf767SJ12hAfPe2BOSHcnQih5KKEdC0=
Received: by 10.100.216.12 with SMTP id o12mr415453ang.117.1221508539328;
        Mon, 15 Sep 2008 12:55:39 -0700 (PDT)
Received: by 10.101.69.15 with HTTP; Mon, 15 Sep 2008 12:55:38 -0700 (PDT)
Message-ID: <1fcccc8a0809151255p577af37ak989f84bfec76bbbd@mail.gmail.com>
Date: Tue, 16 Sep 2008 01:25:38 +0530
From: Dipen <dipench@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexWriter commit
In-Reply-To: <A9C8A0D8-662E-4DC0-AE10-DAE97909DA27@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28300_8035240.1221508539026"
References: <1bcb7c7f0809151049o1579b57cg8ace49a5ae4de51c@mail.gmail.com>
	 <A9C8A0D8-662E-4DC0-AE10-DAE97909DA27@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_28300_8035240.1221508539026
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hi michael,
  this is rather hard for me to understand, if a system loses power
(electricity), how can it be ensured that fsync() call will happen at all,
this commit function relies on fsync() but what if OS doesnt have time or
power in this case to actually call fsync() and synchronize. I read about
fsync() long time bacck and had this same question.

Is there anything like ultimate transaction preservation procedure as a
state of no power is almost unpedictable and unplannable. This is rather
silly question I know, but just coz you mentioned and I happened to read, I
wouldn loose this opportunity to ask this :)

thanks

On Tue, Sep 16, 2008 at 12:18 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> There is no difference, unless your computer/OS crashes or loses power
> shortly after you had call the method.
>
> In that case, there's a big difference: commit() guarantees your index will
> be intact (assuming the storage system holding your index was not damaged)
> but with flush(), which doesn't sync() the index files it writes, it's
> entirely possible that the index will become corrupt because some files were
> still in the OS's write cache when it crashed.
>
> But the guarantee only holds if the underlying storage system is "honest"
> about fsync(), ie, it truly flushes all written bytes for that file to disk
> before returning.
>
> Mike
>
>
> Cam Bazz wrote:
>
>  Hello,
>>
>> What is the difference between flush in <2.4 and commit?
>>
>> Also I have been looking over docs, and they mention commit(long) but
>> there is no commit(long) method but only commit()
>>
>> Best.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_28300_8035240.1221508539026--

From java-user-return-36163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 19:57:06 2008
Return-Path: <java-user-return-36163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72853 invoked from network); 15 Sep 2008 19:57:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 19:57:06 -0000
Received: (qmail 74594 invoked by uid 500); 15 Sep 2008 19:56:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74567 invoked by uid 500); 15 Sep 2008 19:56:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74556 invoked by uid 99); 15 Sep 2008 19:56:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 12:56:55 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.30] (HELO mail-gx0-f30.google.com) (209.85.217.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 19:55:56 +0000
Received: by gxk11 with SMTP id 11so9750439gxk.5
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 12:56:27 -0700 (PDT)
Received: by 10.214.242.8 with SMTP id p8mr61285qah.32.1221508587617;
        Mon, 15 Sep 2008 12:56:27 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id 6sm2372298qwk.1.2008.09.15.12.56.26
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 15 Sep 2008 12:56:26 -0700 (PDT)
Message-Id: <668C7E3A-EACE-4400-A207-9F4ECBDDC1BD@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <1bcb7c7f0809151241w3c344bb1j50df7e45391cbe94@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: 2.4 questions
Date: Mon, 15 Sep 2008 15:56:25 -0400
References: <1bcb7c7f0809151032t335c9306s202edea87f84a9da@mail.gmail.com> <80DEC62A-0EC1-40B7-B643-153799FA1448@mikemccandless.com> <1bcb7c7f0809151217q7f371a87m784dcc818921a9c2@mail.gmail.com> <861B1881-E636-488D-8C2C-62DDBDBEB03C@mikemccandless.com> <1bcb7c7f0809151241w3c344bb1j50df7e45391cbe94@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Cam Bazz wrote:

> well, I did not understand here.
>
> so there is a no way of using the new constructor - and specify
> autoCommit = false ?

That's right, until 3.0.

I would prefer to have a new API, introduced in 2.4 and kept in 3.0,  
that has autoCommit=false as its default (without being specified as a  
param) but I don't see how to cleanly do that.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 19:57:51 2008
Return-Path: <java-user-return-36164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73382 invoked from network); 15 Sep 2008 19:57:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 19:57:51 -0000
Received: (qmail 76681 invoked by uid 500); 15 Sep 2008 19:57:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76329 invoked by uid 500); 15 Sep 2008 19:57:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76318 invoked by uid 99); 15 Sep 2008 19:57:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 12:57:40 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 209.85.217.30 is neither permitted nor denied by domain of lucene@mikemccandless.com)
Received: from [209.85.217.30] (HELO mail-gx0-f30.google.com) (209.85.217.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 19:56:42 +0000
Received: by mail-gx0-f30.google.com with SMTP id 11so9750439gxk.5
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 12:57:15 -0700 (PDT)
Received: by 10.214.241.4 with SMTP id o4mr6333238qah.93.1221508634862;
        Mon, 15 Sep 2008 12:57:14 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id 6sm2372298qwk.1.2008.09.15.12.57.13
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 15 Sep 2008 12:57:13 -0700 (PDT)
Message-Id: <244F0204-CDB0-4FD4-A7A6-0C8854492515@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <1bcb7c7f0809151231i1ebf465ele2a9eca8f0c094cc@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: more on isDeleted
Date: Mon, 15 Sep 2008 15:57:12 -0400
References: <1bcb7c7f0809151205s3c55ab73i87c1cc3efa09b9e5@mail.gmail.com> <1CA5EB01-9A02-4C03-810A-A68C8CEBA757@mikemccandless.com> <1bcb7c7f0809151231i1ebf465ele2a9eca8f0c094cc@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Until we can get realtime search integrated into Lucene (which I'm  
gradually trying to working on) I think the answer is no -- for now  
you have to keep your own record of which docIDs you've deleted.

Because IndexWriter allows deletes by query and term (and also by  
docID, privately, when a document hits a non-aborting exception) it's  
tricky to give real-time isDeleted for a docID.

My current thinking on how to do this (once we add realtime search) is  
when you ask IndexWriter for a new IndexReader, which searches the  
full index in the Directory plus all adds/deletes buffered in  
IndexWriter's RAM buffer, it must "materialize" all such buffered  
deletes down to docID.  Those deletes that are against existing  
segments in the index will be flushed at that point to those segments;  
the deletes that apply only to buffered docs will be held in RAM and  
used by the RAMIndexSearcher that searches IndexWriter's buffer.

Mike

Cam Bazz wrote:

> So, apart from the searcher, is there anyway to access the deletion
> marks in an indexWriter.
>
> I have a live cache - and I was keeping two caches, ones for new adds,
> other for deletes.
> I am trying to get rid of deleted cache, and ask the index if a
> fetched document is marked deleted.
>
> Best.
>
> -C.B.
>
> On Mon, Sep 15, 2008 at 10:20 PM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>>
>> You'll have to open a new IndexReader after the delete is committed.
>>
>> An IndexReader (or IndexSearcher) only searches the point-in-time  
>> snapshot
>> of the index as of when it was opened.
>>
>> Mike
>>
>> Cam Bazz wrote:
>>
>>> Hello,
>>>
>>> Here is what I am trying to do:
>>>
>>>      dir = FSDirectory.getDirectory("/test");
>>>      writer = new IndexWriter(dir, analyzer, true, new
>>> IndexWriter.MaxFieldLength(2));
>>>      writer.setMaxBufferedDocs(IndexWriter.DISABLE_AUTO_FLUSH);
>>>
>>>      Document da = new Document();
>>>      da.add(new Field("word", "a", Field.Store.YES,
>>> Field.Index.NOT_ANALYZED_NO_NORMS));
>>>
>>>      Document db = new Document();
>>>      db.add(new Field("word", "b", Field.Store.YES,
>>> Field.Index.NOT_ANALYZED_NO_NORMS));
>>>
>>>      writer.addDocument(da);
>>>      writer.addDocument(db);
>>>
>>>      writer.commit();
>>>
>>>      searcher = new IndexSearcher(dir);
>>>
>>>      writer.deleteDocuments(new Term("word", "a"));
>>>      writer.commit();
>>>
>>>      TopDocCollector collector = new TopDocCollector(10);
>>>      searcher.search(new TermQuery(new Term("word","a")),  
>>> collector);
>>>      ScoreDoc[] hits = collector.topDocs().scoreDocs;
>>>      for (int i = 0; i < hits.length; i++) {
>>>          int docId = hits[i].doc;
>>>          Document d = searcher.doc(docId);
>>>          System.out.println(writer.hasDeletions());
>>>           
>>> System.out.println(searcher.getIndexReader().isDeleted(docId));
>>>          System.out.println(d.get("word"));
>>>      }
>>>
>>>      searcher.close();
>>>      writer.close();
>>>      dir.close();
>>>
>>>
>>> well I am trying to check if an document has been deleted without
>>> refreshing the searcher. maybe i should access indexreader in a
>>> different way?
>>> the isDeleted() always returns false. that is the problem right now.
>>>
>>> Best.
>>>
>>> -C.B.
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 20:03:47 2008
Return-Path: <java-user-return-36165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79824 invoked from network); 15 Sep 2008 20:03:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 20:03:47 -0000
Received: (qmail 85318 invoked by uid 500); 15 Sep 2008 20:03:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85258 invoked by uid 500); 15 Sep 2008 20:03:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85247 invoked by uid 99); 15 Sep 2008 20:03:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 13:03:36 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.30] (HELO mail-gx0-f30.google.com) (209.85.217.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 20:02:37 +0000
Received: by gxk11 with SMTP id 11so9751723gxk.5
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 13:03:08 -0700 (PDT)
Received: by 10.215.39.9 with SMTP id r9mr13652qaj.85.1221508988822;
        Mon, 15 Sep 2008 13:03:08 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id 5sm6519895qwg.9.2008.09.15.13.03.07
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 15 Sep 2008 13:03:08 -0700 (PDT)
Message-Id: <8ACE4505-6785-4C7C-86BB-E2768FD715DF@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <1fcccc8a0809151255p577af37ak989f84bfec76bbbd@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: IndexWriter commit
Date: Mon, 15 Sep 2008 16:03:06 -0400
References: <1bcb7c7f0809151049o1579b57cg8ace49a5ae4de51c@mail.gmail.com> <A9C8A0D8-662E-4DC0-AE10-DAE97909DA27@mikemccandless.com> <1fcccc8a0809151255p577af37ak989f84bfec76bbbd@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


It's only if power is lost *after* the call to IndexWriter.commit()  
has successfully returned, that the guarantee holds.

commit() does not return until all newly written and referenced files  
in the index have been successfully fsync'd (and the OS does not  
return from fsync until all bytes are on stable storage).

If you lose power while commit() is still running, then the only  
guarantee is that the index will be consistent as of the last time you  
successfully ran commit (or, IndexWriter.close, which also calls  
commit).

In any event, as of 2.4, a power loss (or OS crash) should not corrupt  
your index (unlike pre-2.4), but, you will lose all changes since the  
last successful commit.

Mike

Dipen wrote:

> hi michael,
>  this is rather hard for me to understand, if a system loses power
> (electricity), how can it be ensured that fsync() call will happen  
> at all,
> this commit function relies on fsync() but what if OS doesnt have  
> time or
> power in this case to actually call fsync() and synchronize. I read  
> about
> fsync() long time bacck and had this same question.
>
> Is there anything like ultimate transaction preservation procedure  
> as a
> state of no power is almost unpedictable and unplannable. This is  
> rather
> silly question I know, but just coz you mentioned and I happened to  
> read, I
> wouldn loose this opportunity to ask this :)
>
> thanks
>
> On Tue, Sep 16, 2008 at 12:18 AM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>>
>> There is no difference, unless your computer/OS crashes or loses  
>> power
>> shortly after you had call the method.
>>
>> In that case, there's a big difference: commit() guarantees your  
>> index will
>> be intact (assuming the storage system holding your index was not  
>> damaged)
>> but with flush(), which doesn't sync() the index files it writes,  
>> it's
>> entirely possible that the index will become corrupt because some  
>> files were
>> still in the OS's write cache when it crashed.
>>
>> But the guarantee only holds if the underlying storage system is  
>> "honest"
>> about fsync(), ie, it truly flushes all written bytes for that file  
>> to disk
>> before returning.
>>
>> Mike
>>
>>
>> Cam Bazz wrote:
>>
>> Hello,
>>>
>>> What is the difference between flush in <2.4 and commit?
>>>
>>> Also I have been looking over docs, and they mention commit(long)  
>>> but
>>> there is no commit(long) method but only commit()
>>>
>>> Best.
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 20:04:10 2008
Return-Path: <java-user-return-36166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80074 invoked from network); 15 Sep 2008 20:04:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 20:04:10 -0000
Received: (qmail 87001 invoked by uid 500); 15 Sep 2008 20:03:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86976 invoked by uid 500); 15 Sep 2008 20:03:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86965 invoked by uid 99); 15 Sep 2008 20:03:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 13:03:59 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.233 as permitted sender)
Received: from [209.85.198.233] (HELO rv-out-0506.google.com) (209.85.198.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 20:03:01 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2153949rvb.5
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 13:03:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=puagKBVpa+R95YX9BW1TFC0f4tcxIEgU1YOL4j2y3lY=;
        b=oV3S6ATQS6SXMAtli8mtcJPsk0aclYaP6lkX3vPXm9BZLjiedLgUHa75fIt3r2z+Hn
         Rxozm57PM2tcq3qj3PvUSiBhS/SeKlE0tH2pg2Ufb6wMOJsJxH9VNoiM0Es9unZXY5lD
         BulL2krs7PWo0/4lozySFhBpX3lW86bRlva2g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=TMP7rvf0ob0TunLqgPXcXv8bZktXYh2/n8xGGDyOgaiXXnYiBjzdViuobmXi0vK4g4
         Yd+8bfFT7mqMfW5knwKEgQGUG3T1gN2RciO+PS3kP6iNG7XdPZ4rrj64Gbe1GcH0tDH0
         vXYVD0Vf/8e3p69G1g6J24OPWJ6L4xHMuoBA8=
Received: by 10.141.210.21 with SMTP id m21mr5089075rvq.23.1221509013733;
        Mon, 15 Sep 2008 13:03:33 -0700 (PDT)
Received: by 10.141.176.5 with HTTP; Mon, 15 Sep 2008 13:03:33 -0700 (PDT)
Message-ID: <1bcb7c7f0809151303t12440c93w8764e19574cc0b1c@mail.gmail.com>
Date: Mon, 15 Sep 2008 23:03:33 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexWriter commit
In-Reply-To: <1fcccc8a0809151255p577af37ak989f84bfec76bbbd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1bcb7c7f0809151049o1579b57cg8ace49a5ae4de51c@mail.gmail.com>
	 <A9C8A0D8-662E-4DC0-AE10-DAE97909DA27@mikemccandless.com>
	 <1fcccc8a0809151255p577af37ak989f84bfec76bbbd@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Dipen,

I think what he meant is that if power is off the last transaction is
trashed, but your index is not.

Best.

On Mon, Sep 15, 2008 at 10:55 PM, Dipen <dipench@gmail.com> wrote:
> hi michael,
>  this is rather hard for me to understand, if a system loses power
> (electricity), how can it be ensured that fsync() call will happen at all,
> this commit function relies on fsync() but what if OS doesnt have time or
> power in this case to actually call fsync() and synchronize. I read about
> fsync() long time bacck and had this same question.
>
> Is there anything like ultimate transaction preservation procedure as a
> state of no power is almost unpedictable and unplannable. This is rather
> silly question I know, but just coz you mentioned and I happened to read, I
> wouldn loose this opportunity to ask this :)
>
> thanks
>
> On Tue, Sep 16, 2008 at 12:18 AM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>>
>> There is no difference, unless your computer/OS crashes or loses power
>> shortly after you had call the method.
>>
>> In that case, there's a big difference: commit() guarantees your index will
>> be intact (assuming the storage system holding your index was not damaged)
>> but with flush(), which doesn't sync() the index files it writes, it's
>> entirely possible that the index will become corrupt because some files were
>> still in the OS's write cache when it crashed.
>>
>> But the guarantee only holds if the underlying storage system is "honest"
>> about fsync(), ie, it truly flushes all written bytes for that file to disk
>> before returning.
>>
>> Mike
>>
>>
>> Cam Bazz wrote:
>>
>>  Hello,
>>>
>>> What is the difference between flush in <2.4 and commit?
>>>
>>> Also I have been looking over docs, and they mention commit(long) but
>>> there is no commit(long) method but only commit()
>>>
>>> Best.
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 20:05:30 2008
Return-Path: <java-user-return-36167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81267 invoked from network); 15 Sep 2008 20:05:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 20:05:29 -0000
Received: (qmail 89305 invoked by uid 500); 15 Sep 2008 20:05:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89279 invoked by uid 500); 15 Sep 2008 20:05:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89268 invoked by uid 99); 15 Sep 2008 20:05:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 13:05:19 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.231 as permitted sender)
Received: from [209.85.198.231] (HELO rv-out-0506.google.com) (209.85.198.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 20:04:21 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2154338rvb.5
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 13:04:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=y7KuxTAhJjBShunb0lmb+qTmvnUS8FsVqveufxkYq44=;
        b=T7V2d0uHgWpSkdRlAfnzCYtjd+RjpTYExI3QSJFCjZWvsdOakSt5GY0iIX3BdKotrA
         EQGB0PxlILPxZideU6uUldceMSiq8b3MBjZ5LZFPKMe25NekSHpzrenyDb3+Kio2uyZh
         m03CF5v8TIkb6Y3uyGbA1TpLSGg6tbLln8uag=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=F1rcCAEc0RUbGeKI3isXqnVk42NgmlTD6V3k0gHHoEMV4GnUjybKcpxMvEcLdsZbxL
         IdbqXJHWKTsShte9IkLHQSTYfy0YmYj748TfFRnDxfC/dajZaLlcrf0o6Aap09S3TkCW
         cw2Ewj3Sd7BR5dBhh/QcWL4Es3VgEVU/0Pa5g=
Received: by 10.141.52.5 with SMTP id e5mr5088686rvk.10.1221509083869;
        Mon, 15 Sep 2008 13:04:43 -0700 (PDT)
Received: by 10.141.176.5 with HTTP; Mon, 15 Sep 2008 13:04:43 -0700 (PDT)
Message-ID: <1bcb7c7f0809151304j1c02b627lb4a45a2aee4297dd@mail.gmail.com>
Date: Mon, 15 Sep 2008 23:04:43 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: 2.4 questions
In-Reply-To: <668C7E3A-EACE-4400-A207-9F4ECBDDC1BD@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1bcb7c7f0809151032t335c9306s202edea87f84a9da@mail.gmail.com>
	 <80DEC62A-0EC1-40B7-B643-153799FA1448@mikemccandless.com>
	 <1bcb7c7f0809151217q7f371a87m784dcc818921a9c2@mail.gmail.com>
	 <861B1881-E636-488D-8C2C-62DDBDBEB03C@mikemccandless.com>
	 <1bcb7c7f0809151241w3c344bb1j50df7e45391cbe94@mail.gmail.com>
	 <668C7E3A-EACE-4400-A207-9F4ECBDDC1BD@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

out of curiousity and somewhat unrelated to this thread. when can we
expect to see 2.4?

it seems much much as changed. so people would want to port their code?

Best.

On Mon, Sep 15, 2008 at 10:56 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
>
> Cam Bazz wrote:
>
>> well, I did not understand here.
>>
>> so there is a no way of using the new constructor - and specify
>> autoCommit = false ?
>
> That's right, until 3.0.
>
> I would prefer to have a new API, introduced in 2.4 and kept in 3.0, that
> has autoCommit=false as its default (without being specified as a param) but
> I don't see how to cleanly do that.
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 20:06:17 2008
Return-Path: <java-user-return-36168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82086 invoked from network); 15 Sep 2008 20:06:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 20:06:17 -0000
Received: (qmail 94070 invoked by uid 500); 15 Sep 2008 20:06:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94042 invoked by uid 500); 15 Sep 2008 20:06:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94028 invoked by uid 99); 15 Sep 2008 20:06:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 13:06:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.227 as permitted sender)
Received: from [209.85.198.227] (HELO rv-out-0506.google.com) (209.85.198.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 20:05:06 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2154626rvb.5
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 13:05:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=UVazO04pSbaHDrpvHz5zav8cQb/QDOwMpo3/Hje1WRQ=;
        b=etyPiDdLoUFJvJypjQFQBVNNF7yxqDEQYCXr7wBZRqX+XRE2lQxDVNxs0x5UiBjPa6
         s3Sj6IjUeCXEJHSqmhAaLrevbYTmD9cIHMB9hyLX3N9BV5rMk5B6VyHqxzC4obqWTnbu
         0VeYtVT6l5hCdxWH+ijtsKcCyl8csHGw5kwuQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=Jf4zyaO+hhSypkQavZklj7b3j/NedVsIBMzKlpvOlqPsp9UYMAMg59UGMcVjnb6gAJ
         aiZpcpAXx4g1qyeq0FZesRerDNYqPXiqVYoq5/m7KfhGQOBVa5aUcN2tsL9kVM0Z/0As
         PxjgBjGJ4NQgV1p6NW8qwvM4lgpngnCxXcXfc=
Received: by 10.141.42.10 with SMTP id u10mr5083836rvj.141.1221509139433;
        Mon, 15 Sep 2008 13:05:39 -0700 (PDT)
Received: by 10.141.176.5 with HTTP; Mon, 15 Sep 2008 13:05:39 -0700 (PDT)
Message-ID: <1bcb7c7f0809151305m545e5179lfdeba78f4f90e814@mail.gmail.com>
Date: Mon, 15 Sep 2008 23:05:39 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: more on isDeleted
In-Reply-To: <244F0204-CDB0-4FD4-A7A6-0C8854492515@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1bcb7c7f0809151205s3c55ab73i87c1cc3efa09b9e5@mail.gmail.com>
	 <1CA5EB01-9A02-4C03-810A-A68C8CEBA757@mikemccandless.com>
	 <1bcb7c7f0809151231i1ebf465ele2a9eca8f0c094cc@mail.gmail.com>
	 <244F0204-CDB0-4FD4-A7A6-0C8854492515@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

ok. but then under what circumstances isDeleted() will return true?

Best.

On Mon, Sep 15, 2008 at 10:57 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
>
> Until we can get realtime search integrated into Lucene (which I'm gradually
> trying to working on) I think the answer is no -- for now you have to keep
> your own record of which docIDs you've deleted.
>
> Because IndexWriter allows deletes by query and term (and also by docID,
> privately, when a document hits a non-aborting exception) it's tricky to
> give real-time isDeleted for a docID.
>
> My current thinking on how to do this (once we add realtime search) is when
> you ask IndexWriter for a new IndexReader, which searches the full index in
> the Directory plus all adds/deletes buffered in IndexWriter's RAM buffer, it
> must "materialize" all such buffered deletes down to docID.  Those deletes
> that are against existing segments in the index will be flushed at that
> point to those segments; the deletes that apply only to buffered docs will
> be held in RAM and used by the RAMIndexSearcher that searches IndexWriter's
> buffer.
>
> Mike
>
> Cam Bazz wrote:
>
>> So, apart from the searcher, is there anyway to access the deletion
>> marks in an indexWriter.
>>
>> I have a live cache - and I was keeping two caches, ones for new adds,
>> other for deletes.
>> I am trying to get rid of deleted cache, and ask the index if a
>> fetched document is marked deleted.
>>
>> Best.
>>
>> -C.B.
>>
>> On Mon, Sep 15, 2008 at 10:20 PM, Michael McCandless
>> <lucene@mikemccandless.com> wrote:
>>>
>>> You'll have to open a new IndexReader after the delete is committed.
>>>
>>> An IndexReader (or IndexSearcher) only searches the point-in-time
>>> snapshot
>>> of the index as of when it was opened.
>>>
>>> Mike
>>>
>>> Cam Bazz wrote:
>>>
>>>> Hello,
>>>>
>>>> Here is what I am trying to do:
>>>>
>>>>     dir = FSDirectory.getDirectory("/test");
>>>>     writer = new IndexWriter(dir, analyzer, true, new
>>>> IndexWriter.MaxFieldLength(2));
>>>>     writer.setMaxBufferedDocs(IndexWriter.DISABLE_AUTO_FLUSH);
>>>>
>>>>     Document da = new Document();
>>>>     da.add(new Field("word", "a", Field.Store.YES,
>>>> Field.Index.NOT_ANALYZED_NO_NORMS));
>>>>
>>>>     Document db = new Document();
>>>>     db.add(new Field("word", "b", Field.Store.YES,
>>>> Field.Index.NOT_ANALYZED_NO_NORMS));
>>>>
>>>>     writer.addDocument(da);
>>>>     writer.addDocument(db);
>>>>
>>>>     writer.commit();
>>>>
>>>>     searcher = new IndexSearcher(dir);
>>>>
>>>>     writer.deleteDocuments(new Term("word", "a"));
>>>>     writer.commit();
>>>>
>>>>     TopDocCollector collector = new TopDocCollector(10);
>>>>     searcher.search(new TermQuery(new Term("word","a")), collector);
>>>>     ScoreDoc[] hits = collector.topDocs().scoreDocs;
>>>>     for (int i = 0; i < hits.length; i++) {
>>>>         int docId = hits[i].doc;
>>>>         Document d = searcher.doc(docId);
>>>>         System.out.println(writer.hasDeletions());
>>>>         System.out.println(searcher.getIndexReader().isDeleted(docId));
>>>>         System.out.println(d.get("word"));
>>>>     }
>>>>
>>>>     searcher.close();
>>>>     writer.close();
>>>>     dir.close();
>>>>
>>>>
>>>> well I am trying to check if an document has been deleted without
>>>> refreshing the searcher. maybe i should access indexreader in a
>>>> different way?
>>>> the isDeleted() always returns false. that is the problem right now.
>>>>
>>>> Best.
>>>>
>>>> -C.B.
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 20:07:26 2008
Return-Path: <java-user-return-36169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83090 invoked from network); 15 Sep 2008 20:07:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 20:07:26 -0000
Received: (qmail 96641 invoked by uid 500); 15 Sep 2008 20:07:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96605 invoked by uid 500); 15 Sep 2008 20:07:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96594 invoked by uid 99); 15 Sep 2008 20:07:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 13:07:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 74.125.78.27 as permitted sender)
Received: from [74.125.78.27] (HELO ey-out-2122.google.com) (74.125.78.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 20:06:14 +0000
Received: by ey-out-2122.google.com with SMTP id 6so978701eyi.53
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 13:06:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=z/MPRAbQnxGq1q/V5ylMHvn721AJCYwqDiC1xt/QqYw=;
        b=PfnJKJXnMk3i++XYiQUyiCGDzN58hRavw5KlGIG0ziN2JHvdfH+zwu8n5x6g5wywI9
         lGAQkNYNaiMf7W9zKx2x9G83LgEvt3iwW21dkd2aL5I35BjGBL6+y0ilN67sj6KbZf89
         qnphlCvIGcqDmmV6cyqQsIhOHFrseAuM7BJNs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=A8FTAz3aUPKL7xspAysL3Qqz4RPnpED6dB1InbndCePF6VDKid3bohBBH1PoD8pwYK
         klDvIbQscbQ4Lgqr/utwzomRoAbm06BzBxNcx02Lm6XgK/J4L4cOyKTsCjRMjMq91ulf
         7uCYpfiu2KvPbDu/Sq239VzjAAfhvKIVFKmC4=
Received: by 10.210.26.10 with SMTP id 10mr14173ebz.170.1221509188836;
        Mon, 15 Sep 2008 13:06:28 -0700 (PDT)
Received: from kodapan.lan ( [83.249.107.81])
        by mx.google.com with ESMTPS id 33sm13417475nfu.7.2008.09.15.13.06.28
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 15 Sep 2008 13:06:28 -0700 (PDT)
Message-Id: <395ED94A-A389-4AE0-93AE-268A9664CB94@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <D59A960A-657E-45FC-B7A3-FDC497E3E27E@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: instantiated index in 2.4
Date: Mon, 15 Sep 2008 22:06:27 +0200
References: <1bcb7c7f0809150945p576143bdta1d5e06d9c0b3f82@mail.gmail.com> <D59A960A-657E-45FC-B7A3-FDC497E3E27E@gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


15 sep 2008 kl. 18.51 skrev Karl Wettin:
>
>> Are the adds reflected directly to the index?
>
> Yes. An InstantiatedIndexReader is always current.
> You will probably still have to reconstruct your searcher.
> I never really looked in to what happends if you don't.

The second statement was wrong. There is no need to reconstruct the  
searcher, new documents are immediatly available as search results  
after a commit:

public class TestSearch extends TestCase {

   public void test() throws Exception {

     InstantiatedIndex index = new InstantiatedIndex();
     InstantiatedIndexReader reader = new  
InstantiatedIndexReader(index);
     IndexSearcher searcher = new IndexSearcher(reader);
     InstantiatedIndexWriter writer = new  
InstantiatedIndexWriter(index);

     Document doc;
     Collector collector;

     doc = new Document();
     doc.add(new Field("f", "a", Field.Store.NO,  
Field.Index.NOT_ANALYZED));
     writer.addDocument(doc);
     writer.commit();

     collector = new Collector();
     searcher.search(new TermQuery(new Term("f", "a")), collector);
     assertEquals(1, collector.hits);

     doc = new Document();
     doc.add(new Field("f", "a", Field.Store.NO,  
Field.Index.NOT_ANALYZED));
     writer.addDocument(doc);
     writer.commit();

     collector = new Collector();
     searcher.search(new TermQuery(new Term("f", "a")), collector);
     assertEquals(2, collector.hits);

   }

   public static class Collector extends HitCollector {
     private int hits = 0;
     public void collect(int doc, float score) {
       hits++;
     }
   }



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 20:09:25 2008
Return-Path: <java-user-return-36170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85617 invoked from network); 15 Sep 2008 20:09:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 20:09:25 -0000
Received: (qmail 2067 invoked by uid 500); 15 Sep 2008 20:09:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2035 invoked by uid 500); 15 Sep 2008 20:09:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2022 invoked by uid 99); 15 Sep 2008 20:09:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 13:09:14 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.30] (HELO mail-gx0-f30.google.com) (209.85.217.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 20:08:14 +0000
Received: by gxk11 with SMTP id 11so9752714gxk.5
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 13:07:46 -0700 (PDT)
Received: by 10.151.38.11 with SMTP id q11mr74869ybj.68.1221509266160;
        Mon, 15 Sep 2008 13:07:46 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id c23sm27151527ana.18.2008.09.15.13.07.44
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 15 Sep 2008 13:07:44 -0700 (PDT)
Message-Id: <EE2C2619-B89C-42CF-ACDC-79573D07012D@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <1bcb7c7f0809151304j1c02b627lb4a45a2aee4297dd@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: 2.4 questions
Date: Mon, 15 Sep 2008 16:07:43 -0400
References: <1bcb7c7f0809151032t335c9306s202edea87f84a9da@mail.gmail.com> <80DEC62A-0EC1-40B7-B643-153799FA1448@mikemccandless.com> <1bcb7c7f0809151217q7f371a87m784dcc818921a9c2@mail.gmail.com> <861B1881-E636-488D-8C2C-62DDBDBEB03C@mikemccandless.com> <1bcb7c7f0809151241w3c344bb1j50df7e45391cbe94@mail.gmail.com> <668C7E3A-EACE-4400-A207-9F4ECBDDC1BD@mikemccandless.com> <1bcb7c7f0809151304j1c02b627lb4a45a2aee4297dd@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


We are in the [slowish] process of releasing 2.4 now -- we are down to  
3 2.4 issues:

     https://issues.apache.org/jira/secure/IssueNavigator.jspa?reset=true&mode=hide&sorter/order=DESC&sorter/field=priority&resolution=-1&pid=12310110&fixfor=12312681

Once these are resolved then we'll work through the release process.

Yes alot has changed!

Mike

Cam Bazz wrote:

> out of curiousity and somewhat unrelated to this thread. when can we
> expect to see 2.4?
>
> it seems much much as changed. so people would want to port their  
> code?
>
> Best.
>
> On Mon, Sep 15, 2008 at 10:56 PM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>>
>> Cam Bazz wrote:
>>
>>> well, I did not understand here.
>>>
>>> so there is a no way of using the new constructor - and specify
>>> autoCommit = false ?
>>
>> That's right, until 3.0.
>>
>> I would prefer to have a new API, introduced in 2.4 and kept in  
>> 3.0, that
>> has autoCommit=false as its default (without being specified as a  
>> param) but
>> I don't see how to cleanly do that.
>>
>> Mike
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 20:10:47 2008
Return-Path: <java-user-return-36171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86458 invoked from network); 15 Sep 2008 20:10:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 20:10:47 -0000
Received: (qmail 5810 invoked by uid 500); 15 Sep 2008 20:10:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5783 invoked by uid 500); 15 Sep 2008 20:10:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5762 invoked by uid 99); 15 Sep 2008 20:10:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 13:10:35 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.170.185] (HELO rn-out-0910.google.com) (64.233.170.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 20:09:36 +0000
Received: by rn-out-0910.google.com with SMTP id j71so1706974rne.4
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 13:09:57 -0700 (PDT)
Received: by 10.90.36.16 with SMTP id j16mr248113agj.87.1221509396965;
        Mon, 15 Sep 2008 13:09:56 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id b3sm824122ana.7.2008.09.15.13.09.55
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 15 Sep 2008 13:09:55 -0700 (PDT)
Message-Id: <FD4F6DC6-3562-4BE8-A989-476C51720260@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <1bcb7c7f0809151305m545e5179lfdeba78f4f90e814@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: more on isDeleted
Date: Mon, 15 Sep 2008 16:09:54 -0400
References: <1bcb7c7f0809151205s3c55ab73i87c1cc3efa09b9e5@mail.gmail.com> <1CA5EB01-9A02-4C03-810A-A68C8CEBA757@mikemccandless.com> <1bcb7c7f0809151231i1ebf465ele2a9eca8f0c094cc@mail.gmail.com> <244F0204-CDB0-4FD4-A7A6-0C8854492515@mikemccandless.com> <1bcb7c7f0809151305m545e5179lfdeba78f4f90e814@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


It will return true if the provided docID was deleted, by term or  
query or docID (due to exception, privately) prior to when you asked  
IndexWriter to give you a "realtime" IndexReader.

Mike

Cam Bazz wrote:

> ok. but then under what circumstances isDeleted() will return true?
>
> Best.
>
> On Mon, Sep 15, 2008 at 10:57 PM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>>
>> Until we can get realtime search integrated into Lucene (which I'm  
>> gradually
>> trying to working on) I think the answer is no -- for now you have  
>> to keep
>> your own record of which docIDs you've deleted.
>>
>> Because IndexWriter allows deletes by query and term (and also by  
>> docID,
>> privately, when a document hits a non-aborting exception) it's  
>> tricky to
>> give real-time isDeleted for a docID.
>>
>> My current thinking on how to do this (once we add realtime search)  
>> is when
>> you ask IndexWriter for a new IndexReader, which searches the full  
>> index in
>> the Directory plus all adds/deletes buffered in IndexWriter's RAM  
>> buffer, it
>> must "materialize" all such buffered deletes down to docID.  Those  
>> deletes
>> that are against existing segments in the index will be flushed at  
>> that
>> point to those segments; the deletes that apply only to buffered  
>> docs will
>> be held in RAM and used by the RAMIndexSearcher that searches  
>> IndexWriter's
>> buffer.
>>
>> Mike
>>
>> Cam Bazz wrote:
>>
>>> So, apart from the searcher, is there anyway to access the deletion
>>> marks in an indexWriter.
>>>
>>> I have a live cache - and I was keeping two caches, ones for new  
>>> adds,
>>> other for deletes.
>>> I am trying to get rid of deleted cache, and ask the index if a
>>> fetched document is marked deleted.
>>>
>>> Best.
>>>
>>> -C.B.
>>>
>>> On Mon, Sep 15, 2008 at 10:20 PM, Michael McCandless
>>> <lucene@mikemccandless.com> wrote:
>>>>
>>>> You'll have to open a new IndexReader after the delete is  
>>>> committed.
>>>>
>>>> An IndexReader (or IndexSearcher) only searches the point-in-time
>>>> snapshot
>>>> of the index as of when it was opened.
>>>>
>>>> Mike
>>>>
>>>> Cam Bazz wrote:
>>>>
>>>>> Hello,
>>>>>
>>>>> Here is what I am trying to do:
>>>>>
>>>>>    dir = FSDirectory.getDirectory("/test");
>>>>>    writer = new IndexWriter(dir, analyzer, true, new
>>>>> IndexWriter.MaxFieldLength(2));
>>>>>    writer.setMaxBufferedDocs(IndexWriter.DISABLE_AUTO_FLUSH);
>>>>>
>>>>>    Document da = new Document();
>>>>>    da.add(new Field("word", "a", Field.Store.YES,
>>>>> Field.Index.NOT_ANALYZED_NO_NORMS));
>>>>>
>>>>>    Document db = new Document();
>>>>>    db.add(new Field("word", "b", Field.Store.YES,
>>>>> Field.Index.NOT_ANALYZED_NO_NORMS));
>>>>>
>>>>>    writer.addDocument(da);
>>>>>    writer.addDocument(db);
>>>>>
>>>>>    writer.commit();
>>>>>
>>>>>    searcher = new IndexSearcher(dir);
>>>>>
>>>>>    writer.deleteDocuments(new Term("word", "a"));
>>>>>    writer.commit();
>>>>>
>>>>>    TopDocCollector collector = new TopDocCollector(10);
>>>>>    searcher.search(new TermQuery(new Term("word","a")),  
>>>>> collector);
>>>>>    ScoreDoc[] hits = collector.topDocs().scoreDocs;
>>>>>    for (int i = 0; i < hits.length; i++) {
>>>>>        int docId = hits[i].doc;
>>>>>        Document d = searcher.doc(docId);
>>>>>        System.out.println(writer.hasDeletions());
>>>>>         
>>>>> System.out.println(searcher.getIndexReader().isDeleted(docId));
>>>>>        System.out.println(d.get("word"));
>>>>>    }
>>>>>
>>>>>    searcher.close();
>>>>>    writer.close();
>>>>>    dir.close();
>>>>>
>>>>>
>>>>> well I am trying to check if an document has been deleted without
>>>>> refreshing the searcher. maybe i should access indexreader in a
>>>>> different way?
>>>>> the isDeleted() always returns false. that is the problem right  
>>>>> now.
>>>>>
>>>>> Best.
>>>>>
>>>>> -C.B.
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 20:20:07 2008
Return-Path: <java-user-return-36172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92316 invoked from network); 15 Sep 2008 20:20:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 20:20:07 -0000
Received: (qmail 21889 invoked by uid 500); 15 Sep 2008 20:19:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21254 invoked by uid 500); 15 Sep 2008 20:19:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21243 invoked by uid 99); 15 Sep 2008 20:19:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 13:19:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.200.175 as permitted sender)
Received: from [209.85.200.175] (HELO wf-out-1314.google.com) (209.85.200.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 20:18:57 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2271261wfc.20
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 13:19:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=L44getJEVW2j9EBCRTbA9y3iVUU1rCugB6YYiPeTUc8=;
        b=rJNasgJwq7T7yOKvQbwXu7gmoNyUxnekVAeKIZ5Q/9snio16iaLuIxlffxl9oaf2Rm
         AAwrEYjdVQJKp1/qdZ+HBvdQ4EnMJe6b5KE5b7mUmFSb6GZuQfgCJ6hOLZZEV3bOW4Hv
         RMmoZdSuqdkjcWI5d8Y/uajtSLMifyS2KZzZ8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=T3kp+lZLyWKH/wg2lKLC8jvukaZOtRllbEy+XxYrTFQfdJaZ3L8z03zalDJFvFCgTP
         Jshe3BPIPTnZocnrROGGNuvk7e+HV+XKySHsgNmqMU1sxLVL9GM3ZHg9fO4rLY5z/5Ff
         8pmiX8cSBsH6ABWKb2920V4DM5L8MHq95RxBU=
Received: by 10.141.115.6 with SMTP id s6mr5069767rvm.224.1221509969995;
        Mon, 15 Sep 2008 13:19:29 -0700 (PDT)
Received: by 10.141.176.5 with HTTP; Mon, 15 Sep 2008 13:19:29 -0700 (PDT)
Message-ID: <1bcb7c7f0809151319l6dd9d04cxbe62f858846aa1f7@mail.gmail.com>
Date: Mon, 15 Sep 2008 23:19:29 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: more on isDeleted
In-Reply-To: <FD4F6DC6-3562-4BE8-A989-476C51720260@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1bcb7c7f0809151205s3c55ab73i87c1cc3efa09b9e5@mail.gmail.com>
	 <1CA5EB01-9A02-4C03-810A-A68C8CEBA757@mikemccandless.com>
	 <1bcb7c7f0809151231i1ebf465ele2a9eca8f0c094cc@mail.gmail.com>
	 <244F0204-CDB0-4FD4-A7A6-0C8854492515@mikemccandless.com>
	 <1bcb7c7f0809151305m545e5179lfdeba78f4f90e814@mail.gmail.com>
	 <FD4F6DC6-3562-4BE8-A989-476C51720260@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Well,

        Document da = new Document();
        da.add(new Field("word", "a", Field.Store.YES,
Field.Index.NOT_ANALYZED_NO_NORMS));

        writer.addDocument(da);
        writer.commit();
        searcher = new IndexSearcher(dir);
        IndexReader reader = searcher.getIndexReader();
        writer.deleteDocuments(new Term("word", "a"));
        writer.commit();
        System.out.println(reader.isDeleted(0));


I could not - I am getting something wrong. What do you mean by prior
to asking indexwriter giving me a realtime reader?


Best

On Mon, Sep 15, 2008 at 11:09 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
>
> It will return true if the provided docID was deleted, by term or query or
> docID (due to exception, privately) prior to when you asked IndexWriter to
> give you a "realtime" IndexReader.
>
> Mike
>
> Cam Bazz wrote:
>
>> ok. but then under what circumstances isDeleted() will return true?
>>
>> Best.
>>
>> On Mon, Sep 15, 2008 at 10:57 PM, Michael McCandless
>> <lucene@mikemccandless.com> wrote:
>>>
>>> Until we can get realtime search integrated into Lucene (which I'm
>>> gradually
>>> trying to working on) I think the answer is no -- for now you have to
>>> keep
>>> your own record of which docIDs you've deleted.
>>>
>>> Because IndexWriter allows deletes by query and term (and also by docID,
>>> privately, when a document hits a non-aborting exception) it's tricky to
>>> give real-time isDeleted for a docID.
>>>
>>> My current thinking on how to do this (once we add realtime search) is
>>> when
>>> you ask IndexWriter for a new IndexReader, which searches the full index
>>> in
>>> the Directory plus all adds/deletes buffered in IndexWriter's RAM buffer,
>>> it
>>> must "materialize" all such buffered deletes down to docID.  Those
>>> deletes
>>> that are against existing segments in the index will be flushed at that
>>> point to those segments; the deletes that apply only to buffered docs
>>> will
>>> be held in RAM and used by the RAMIndexSearcher that searches
>>> IndexWriter's
>>> buffer.
>>>
>>> Mike
>>>
>>> Cam Bazz wrote:
>>>
>>>> So, apart from the searcher, is there anyway to access the deletion
>>>> marks in an indexWriter.
>>>>
>>>> I have a live cache - and I was keeping two caches, ones for new adds,
>>>> other for deletes.
>>>> I am trying to get rid of deleted cache, and ask the index if a
>>>> fetched document is marked deleted.
>>>>
>>>> Best.
>>>>
>>>> -C.B.
>>>>
>>>> On Mon, Sep 15, 2008 at 10:20 PM, Michael McCandless
>>>> <lucene@mikemccandless.com> wrote:
>>>>>
>>>>> You'll have to open a new IndexReader after the delete is committed.
>>>>>
>>>>> An IndexReader (or IndexSearcher) only searches the point-in-time
>>>>> snapshot
>>>>> of the index as of when it was opened.
>>>>>
>>>>> Mike
>>>>>
>>>>> Cam Bazz wrote:
>>>>>
>>>>>> Hello,
>>>>>>
>>>>>> Here is what I am trying to do:
>>>>>>
>>>>>>   dir = FSDirectory.getDirectory("/test");
>>>>>>   writer = new IndexWriter(dir, analyzer, true, new
>>>>>> IndexWriter.MaxFieldLength(2));
>>>>>>   writer.setMaxBufferedDocs(IndexWriter.DISABLE_AUTO_FLUSH);
>>>>>>
>>>>>>   Document da = new Document();
>>>>>>   da.add(new Field("word", "a", Field.Store.YES,
>>>>>> Field.Index.NOT_ANALYZED_NO_NORMS));
>>>>>>
>>>>>>   Document db = new Document();
>>>>>>   db.add(new Field("word", "b", Field.Store.YES,
>>>>>> Field.Index.NOT_ANALYZED_NO_NORMS));
>>>>>>
>>>>>>   writer.addDocument(da);
>>>>>>   writer.addDocument(db);
>>>>>>
>>>>>>   writer.commit();
>>>>>>
>>>>>>   searcher = new IndexSearcher(dir);
>>>>>>
>>>>>>   writer.deleteDocuments(new Term("word", "a"));
>>>>>>   writer.commit();
>>>>>>
>>>>>>   TopDocCollector collector = new TopDocCollector(10);
>>>>>>   searcher.search(new TermQuery(new Term("word","a")), collector);
>>>>>>   ScoreDoc[] hits = collector.topDocs().scoreDocs;
>>>>>>   for (int i = 0; i < hits.length; i++) {
>>>>>>       int docId = hits[i].doc;
>>>>>>       Document d = searcher.doc(docId);
>>>>>>       System.out.println(writer.hasDeletions());
>>>>>>       System.out.println(searcher.getIndexReader().isDeleted(docId));
>>>>>>       System.out.println(d.get("word"));
>>>>>>   }
>>>>>>
>>>>>>   searcher.close();
>>>>>>   writer.close();
>>>>>>   dir.close();
>>>>>>
>>>>>>
>>>>>> well I am trying to check if an document has been deleted without
>>>>>> refreshing the searcher. maybe i should access indexreader in a
>>>>>> different way?
>>>>>> the isDeleted() always returns false. that is the problem right now.
>>>>>>
>>>>>> Best.
>>>>>>
>>>>>> -C.B.
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 20:42:28 2008
Return-Path: <java-user-return-36173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9083 invoked from network); 15 Sep 2008 20:42:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 20:42:28 -0000
Received: (qmail 53645 invoked by uid 500); 15 Sep 2008 20:42:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53618 invoked by uid 500); 15 Sep 2008 20:42:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53607 invoked by uid 99); 15 Sep 2008 20:42:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 13:42:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.225 as permitted sender)
Received: from [209.85.198.225] (HELO rv-out-0506.google.com) (209.85.198.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 20:41:18 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2166837rvb.5
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 13:41:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=t4tZK2DzgZmp9LLIajWaVO+3MQls4gZVuRzjOkq9cyc=;
        b=k3cTsutDAscJEXw9E0BZi6TdpG6E/IuyhvMccbjaUZscd/7OJkwCF+0znFNLce08C0
         LZD3Nz93JqzbfgHWRelBgXmF4G6kQ0m/FBHjprVzCKk30mjRoSxWOhLr8c3yHb2emeuf
         9jabspMtkfhhgF8W0sL1waa5cjs4pu9XpGBn0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=VBTjXaawprIU5cLLTspxzvH93d10liW530qKcWWapGWcPhfKTC6Nn2+JBFsw5HFBsC
         1GiAXzkw9vF3w8SQBZ1IiWtnyTmJaLHjfwi6Dlu/KK8ti1VyqbZBK/DAUacBPc9Bnorl
         TZbrJSvK3A/y0NayJrxeDZB6gP++HjOlZffRw=
Received: by 10.141.211.13 with SMTP id n13mr5115150rvq.12.1221511301623;
        Mon, 15 Sep 2008 13:41:41 -0700 (PDT)
Received: by 10.141.176.5 with HTTP; Mon, 15 Sep 2008 13:41:41 -0700 (PDT)
Message-ID: <1bcb7c7f0809151341u57da277bte3f3b479b588a6a7@mail.gmail.com>
Date: Mon, 15 Sep 2008 23:41:41 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: instantiated index in 2.4
In-Reply-To: <395ED94A-A389-4AE0-93AE-268A9664CB94@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1bcb7c7f0809150945p576143bdta1d5e06d9c0b3f82@mail.gmail.com>
	 <D59A960A-657E-45FC-B7A3-FDC497E3E27E@gmail.com>
	 <395ED94A-A389-4AE0-93AE-268A9664CB94@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Karl;

This is good good good news. It works.

However, I added a document like

doc.add(new Field("f", "a", Field.Store.YES,
Field.Index.NOT_ANALYZED_NO_NORMS));

and then searched. The score is 0.3~ for the found document. should
not it be 1.0?

also it will find when searched for "f","b" only with a lower score.

Best.

On Mon, Sep 15, 2008 at 11:06 PM, Karl Wettin <karl.wettin@gmail.com> wrote:
>
> 15 sep 2008 kl. 18.51 skrev Karl Wettin:
>>
>>> Are the adds reflected directly to the index?
>>
>> Yes. An InstantiatedIndexReader is always current.
>> You will probably still have to reconstruct your searcher.
>> I never really looked in to what happends if you don't.
>
> The second statement was wrong. There is no need to reconstruct the
> searcher, new documents are immediatly available as search results after a
> commit:
>
> public class TestSearch extends TestCase {
>
>  public void test() throws Exception {
>
>    InstantiatedIndex index = new InstantiatedIndex();
>    InstantiatedIndexReader reader = new InstantiatedIndexReader(index);
>    IndexSearcher searcher = new IndexSearcher(reader);
>    InstantiatedIndexWriter writer = new InstantiatedIndexWriter(index);
>
>    Document doc;
>    Collector collector;
>
>    doc = new Document();
>    doc.add(new Field("f", "a", Field.Store.NO, Field.Index.NOT_ANALYZED));
>    writer.addDocument(doc);
>    writer.commit();
>
>    collector = new Collector();
>    searcher.search(new TermQuery(new Term("f", "a")), collector);
>    assertEquals(1, collector.hits);
>
>    doc = new Document();
>    doc.add(new Field("f", "a", Field.Store.NO, Field.Index.NOT_ANALYZED));
>    writer.addDocument(doc);
>    writer.commit();
>
>    collector = new Collector();
>    searcher.search(new TermQuery(new Term("f", "a")), collector);
>    assertEquals(2, collector.hits);
>
>  }
>
>  public static class Collector extends HitCollector {
>    private int hits = 0;
>    public void collect(int doc, float score) {
>      hits++;
>    }
>  }
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 20:48:17 2008
Return-Path: <java-user-return-36174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13469 invoked from network); 15 Sep 2008 20:48:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 20:48:17 -0000
Received: (qmail 58372 invoked by uid 500); 15 Sep 2008 20:48:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58338 invoked by uid 500); 15 Sep 2008 20:48:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58327 invoked by uid 99); 15 Sep 2008 20:48:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 13:48:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 64.233.170.189 as permitted sender)
Received: from [64.233.170.189] (HELO rn-out-0910.google.com) (64.233.170.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 20:47:04 +0000
Received: by rn-out-0910.google.com with SMTP id j71so1728653rne.4
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 13:47:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=w2fziztNDTq+TLYLsXmp3Nk64C5Iw+0YqUyCI62pnpI=;
        b=t8d4Alo12jEvFKHmBqcmSjpVrLW07K/QPKELYafYrGetVB7QecQj0Cj8molLdKEVbz
         iErWUMRvYosvCNv6m+9RPYpqlx2WuP1H6bhh7uYDGWsUguHFmA5FoFvKOzM/lkzZdzEM
         7GjW0OQPfgipaVd6sVdEJl2g/ntMlvTuboqcQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=Y+t75AQPkoqIP//xWhCIsL0qlvfdV9AHUZuMh0QcU/bgYgrMKHLqGFzYbmi2J1BbuZ
         S6p7eMnmR4IRHm8/KWsdqENNoqngr0PkN0lwvjwI1lAplZN9Vo+ep3WAR895FtSCrm08
         y4WRIOF4WC8J6ThQdLlzwOagS5+/1owHmXGGQ=
Received: by 10.150.202.9 with SMTP id z9mr82969ybf.203.1221511646583;
        Mon, 15 Sep 2008 13:47:26 -0700 (PDT)
Received: by 10.151.117.4 with HTTP; Mon, 15 Sep 2008 13:47:26 -0700 (PDT)
Message-ID: <85d3c3b60809151347u1e35794fj190b1fde123d4046@mail.gmail.com>
Date: Mon, 15 Sep 2008 16:47:26 -0400
From: "Jason Rutherglen" <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: patching lucene-1314
In-Reply-To: <565910.87296.qm@web50307.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <565910.87296.qm@web50307.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I am updating it to work with trunk.

On Mon, Sep 15, 2008 at 2:11 PM, Otis Gospodnetic
<otis_gospodnetic@yahoo.com> wrote:
> Yes, probably out of sync with the 2.3.2 code.  Have you tried applying it to the trunk?
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
>
> ----- Original Message ----
>> From: Cam Bazz <cambazz@gmail.com>
>> To: java-user@lucene.apache.org
>> Sent: Monday, September 15, 2008 11:14:31 AM
>> Subject: Re: patching lucene-1314
>>
>> Well Hello,
>>
>> I made the patch inside trunk/src but I am getting failed errors.
>> does this mean the lucene-1314 is buggy, or maybe I applied it to the
>> wrong version?
>>
>> Best.
>>
>> joker src # pwd
>> /root/lucene/lucene-2.3.2/src
>>
>> joker src # patch -p0 < ../../lucene-1314.patch
>>
>> patching file java/org/apache/lucene/index/DirectoryIndexReader.java
>> Hunk #1 FAILED at 44.
>> Hunk #2 FAILED at 113.
>> Hunk #3 succeeded at 120 (offset -33 lines).
>> 2 out of 3 hunks FAILED -- saving rejects to file
>> java/org/apache/lucene/index/D
>>                                     irectoryIndexReader.java.rej
>> patching file java/org/apache/lucene/index/FieldsReader.java
>> Hunk #2 FAILED at 76.
>> Hunk #3 succeeded at 105 (offset -26 lines).
>> 1 out of 3 hunks FAILED -- saving rejects to file
>> java/org/apache/lucene/index/F
>>                                     ieldsReader.java.rej
>> patching file java/org/apache/lucene/index/FilterIndexReader.java
>> patching file java/org/apache/lucene/index/IndexReader.java
>> Hunk #1 succeeded at 54 with fuzz 2.
>> Hunk #4 succeeded at 255 (offset -25 lines).
>> Hunk #5 succeeded at 850 (offset -25 lines).
>> Hunk #6 FAILED at 1015.
>> 1 out of 6 hunks FAILED -- saving rejects to file
>> java/org/apache/lucene/index/I
>>                                     ndexReader.java.rej
>> patching file java/org/apache/lucene/index/MultiReader.java
>> patching file java/org/apache/lucene/index/MultiSegmentReader.java
>> patching file java/org/apache/lucene/index/ParallelReader.java
>> patching file java/org/apache/lucene/index/SegmentReader.java
>> Hunk #1 FAILED at 40.
>> Hunk #2 succeeded at 74 (offset -2 lines).
>> Hunk #3 succeeded at 116 (offset -2 lines).
>> Hunk #4 succeeded at 147 (offset -2 lines).
>> Hunk #5 succeeded at 171 (offset -2 lines).
>> Hunk #6 succeeded at 310 (offset -2 lines).
>> Hunk #7 succeeded at 356 (offset -1 lines).
>> Hunk #8 succeeded at 382 (offset -1 lines).
>> Hunk #9 succeeded at 411 with fuzz 1 (offset -6 lines).
>> Hunk #10 succeeded at 451 (offset -6 lines).
>> Hunk #11 succeeded at 469 (offset -6 lines).
>> Hunk #12 succeeded at 496 (offset -6 lines).
>> Hunk #13 succeeded at 505 (offset -6 lines).
>> Hunk #14 succeeded at 545 (offset -6 lines).
>> Hunk #15 succeeded at 627 (offset -9 lines).
>> Hunk #16 succeeded at 652 (offset -9 lines).
>> Hunk #17 succeeded at 698 (offset -9 lines).
>> Hunk #18 succeeded at 743 (offset -10 lines).
>> Hunk #19 succeeded at 891 (offset -10 lines).
>> Hunk #20 succeeded at 1004 (offset -10 lines).
>> 1 out of 20 hunks FAILED -- saving rejects to file
>> java/org/apache/lucene/index/
>>                                    SegmentReader.java.rej
>> patching file java/org/apache/lucene/util/BitVector.java
>> Hunk #1 succeeded at 35 with fuzz 2.
>> patching file test/org/apache/lucene/index/TestIndexReaderClone.java
>> patching file test/org/apache/lucene/index/TestIndexReaderReopen.java
>> Hunk #1 FAILED at 852.
>> 1 out of 1 hunk FAILED -- saving rejects to file
>> test/org/apache/lucene/index/Te
>>                                      stIndexReaderReopen.java.rej
>>
>>
>>
>> On Mon, Sep 15, 2008 at 4:02 PM, Grant Ingersoll wrote:
>> > I usually do:
>> > cd
>> > patch -p 0 -i
>> >
>> > See also the HowToContribute page on the wiki.
>> >
>> >
>> > On Sep 15, 2008, at 7:38 AM, Cam Bazz wrote:
>> >
>> >> Hello,
>> >>
>> >> To patch for lucene-1314 what must I do?
>> >>
>> >> I think I have to cd into one of the directories, then patch -pX <
>> >> ../../patchfile,
>> >>
>> >> but I could not figure it out.
>> >>
>> >> Best,
>> >> -C.B.
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >
>> > --------------------------
>> > Grant Ingersoll
>> > http://www.lucidimagination.com
>> >
>> > Lucene Helpful Hints:
>> > http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> > http://wiki.apache.org/lucene-java/LuceneFAQ
>> >
>> >
>> >
>> >
>> >
>> >
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 15 21:24:46 2008
Return-Path: <java-user-return-36175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42125 invoked from network); 15 Sep 2008 21:24:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2008 21:24:45 -0000
Received: (qmail 21689 invoked by uid 500); 15 Sep 2008 21:24:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21652 invoked by uid 500); 15 Sep 2008 21:24:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21641 invoked by uid 99); 15 Sep 2008 21:24:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 14:24:34 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.246.243] (HELO ag-out-0708.google.com) (72.14.246.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 21:23:35 +0000
Received: by ag-out-0708.google.com with SMTP id 23so4641662agd.11
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 14:24:06 -0700 (PDT)
Received: by 10.90.100.17 with SMTP id x17mr364024agb.48.1221513845754;
        Mon, 15 Sep 2008 14:24:05 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id 31sm10568158wri.36.2008.09.15.14.24.03
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 15 Sep 2008 14:24:04 -0700 (PDT)
Message-Id: <F1DE25CD-0530-4811-B4A4-A5C4EC8CC935@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <1bcb7c7f0809151319l6dd9d04cxbe62f858846aa1f7@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: more on isDeleted
Date: Mon, 15 Sep 2008 17:24:02 -0400
References: <1bcb7c7f0809151205s3c55ab73i87c1cc3efa09b9e5@mail.gmail.com> <1CA5EB01-9A02-4C03-810A-A68C8CEBA757@mikemccandless.com> <1bcb7c7f0809151231i1ebf465ele2a9eca8f0c094cc@mail.gmail.com> <244F0204-CDB0-4FD4-A7A6-0C8854492515@mikemccandless.com> <1bcb7c7f0809151305m545e5179lfdeba78f4f90e814@mail.gmail.com> <FD4F6DC6-3562-4BE8-A989-476C51720260@mikemccandless.com> <1bcb7c7f0809151319l6dd9d04cxbe62f858846aa1f7@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Sorry, I was talking about the future (when we can get realtime search  
working with Lucene).

You have to change your code below to open a new reader (or reopen the  
reader from your IndexSearcher) call isDeleted on the new reader, to  
see the deletion you did with the writer.

Or, you have to keep track of the deletions yourself, eg separately  
recording you had deleted the document matching word=a (and, running a  
search to resolve that to its docID(s) if necessary).

Mike

Cam Bazz wrote:

> Well,
>
>        Document da = new Document();
>        da.add(new Field("word", "a", Field.Store.YES,
> Field.Index.NOT_ANALYZED_NO_NORMS));
>
>        writer.addDocument(da);
>        writer.commit();
>        searcher = new IndexSearcher(dir);
>        IndexReader reader = searcher.getIndexReader();
>        writer.deleteDocuments(new Term("word", "a"));
>        writer.commit();
>        System.out.println(reader.isDeleted(0));
>
>
> I could not - I am getting something wrong. What do you mean by prior
> to asking indexwriter giving me a realtime reader?
>
>
> Best
>
> On Mon, Sep 15, 2008 at 11:09 PM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>>
>> It will return true if the provided docID was deleted, by term or  
>> query or
>> docID (due to exception, privately) prior to when you asked  
>> IndexWriter to
>> give you a "realtime" IndexReader.
>>
>> Mike
>>
>> Cam Bazz wrote:
>>
>>> ok. but then under what circumstances isDeleted() will return true?
>>>
>>> Best.
>>>
>>> On Mon, Sep 15, 2008 at 10:57 PM, Michael McCandless
>>> <lucene@mikemccandless.com> wrote:
>>>>
>>>> Until we can get realtime search integrated into Lucene (which I'm
>>>> gradually
>>>> trying to working on) I think the answer is no -- for now you  
>>>> have to
>>>> keep
>>>> your own record of which docIDs you've deleted.
>>>>
>>>> Because IndexWriter allows deletes by query and term (and also by  
>>>> docID,
>>>> privately, when a document hits a non-aborting exception) it's  
>>>> tricky to
>>>> give real-time isDeleted for a docID.
>>>>
>>>> My current thinking on how to do this (once we add realtime  
>>>> search) is
>>>> when
>>>> you ask IndexWriter for a new IndexReader, which searches the  
>>>> full index
>>>> in
>>>> the Directory plus all adds/deletes buffered in IndexWriter's RAM  
>>>> buffer,
>>>> it
>>>> must "materialize" all such buffered deletes down to docID.  Those
>>>> deletes
>>>> that are against existing segments in the index will be flushed  
>>>> at that
>>>> point to those segments; the deletes that apply only to buffered  
>>>> docs
>>>> will
>>>> be held in RAM and used by the RAMIndexSearcher that searches
>>>> IndexWriter's
>>>> buffer.
>>>>
>>>> Mike
>>>>
>>>> Cam Bazz wrote:
>>>>
>>>>> So, apart from the searcher, is there anyway to access the  
>>>>> deletion
>>>>> marks in an indexWriter.
>>>>>
>>>>> I have a live cache - and I was keeping two caches, ones for new  
>>>>> adds,
>>>>> other for deletes.
>>>>> I am trying to get rid of deleted cache, and ask the index if a
>>>>> fetched document is marked deleted.
>>>>>
>>>>> Best.
>>>>>
>>>>> -C.B.
>>>>>
>>>>> On Mon, Sep 15, 2008 at 10:20 PM, Michael McCandless
>>>>> <lucene@mikemccandless.com> wrote:
>>>>>>
>>>>>> You'll have to open a new IndexReader after the delete is  
>>>>>> committed.
>>>>>>
>>>>>> An IndexReader (or IndexSearcher) only searches the point-in-time
>>>>>> snapshot
>>>>>> of the index as of when it was opened.
>>>>>>
>>>>>> Mike
>>>>>>
>>>>>> Cam Bazz wrote:
>>>>>>
>>>>>>> Hello,
>>>>>>>
>>>>>>> Here is what I am trying to do:
>>>>>>>
>>>>>>>  dir = FSDirectory.getDirectory("/test");
>>>>>>>  writer = new IndexWriter(dir, analyzer, true, new
>>>>>>> IndexWriter.MaxFieldLength(2));
>>>>>>>  writer.setMaxBufferedDocs(IndexWriter.DISABLE_AUTO_FLUSH);
>>>>>>>
>>>>>>>  Document da = new Document();
>>>>>>>  da.add(new Field("word", "a", Field.Store.YES,
>>>>>>> Field.Index.NOT_ANALYZED_NO_NORMS));
>>>>>>>
>>>>>>>  Document db = new Document();
>>>>>>>  db.add(new Field("word", "b", Field.Store.YES,
>>>>>>> Field.Index.NOT_ANALYZED_NO_NORMS));
>>>>>>>
>>>>>>>  writer.addDocument(da);
>>>>>>>  writer.addDocument(db);
>>>>>>>
>>>>>>>  writer.commit();
>>>>>>>
>>>>>>>  searcher = new IndexSearcher(dir);
>>>>>>>
>>>>>>>  writer.deleteDocuments(new Term("word", "a"));
>>>>>>>  writer.commit();
>>>>>>>
>>>>>>>  TopDocCollector collector = new TopDocCollector(10);
>>>>>>>  searcher.search(new TermQuery(new Term("word","a")),  
>>>>>>> collector);
>>>>>>>  ScoreDoc[] hits = collector.topDocs().scoreDocs;
>>>>>>>  for (int i = 0; i < hits.length; i++) {
>>>>>>>      int docId = hits[i].doc;
>>>>>>>      Document d = searcher.doc(docId);
>>>>>>>      System.out.println(writer.hasDeletions());
>>>>>>>       
>>>>>>> System.out.println(searcher.getIndexReader().isDeleted(docId));
>>>>>>>      System.out.println(d.get("word"));
>>>>>>>  }
>>>>>>>
>>>>>>>  searcher.close();
>>>>>>>  writer.close();
>>>>>>>  dir.close();
>>>>>>>
>>>>>>>
>>>>>>> well I am trying to check if an document has been deleted  
>>>>>>> without
>>>>>>> refreshing the searcher. maybe i should access indexreader in a
>>>>>>> different way?
>>>>>>> the isDeleted() always returns false. that is the problem  
>>>>>>> right now.
>>>>>>>
>>>>>>> Best.
>>>>>>>
>>>>>>> -C.B.
>>>>>>>
>>>>>>> ---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user- 
>>>>>>> help@lucene.apache.org
>>>>>>>
>>>>>>
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 16 00:51:22 2008
Return-Path: <java-user-return-36176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18118 invoked from network); 16 Sep 2008 00:51:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Sep 2008 00:51:21 -0000
Received: (qmail 19888 invoked by uid 500); 16 Sep 2008 00:51:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18911 invoked by uid 500); 16 Sep 2008 00:51:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18900 invoked by uid 99); 16 Sep 2008 00:51:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 17:51:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.237 as permitted sender)
Received: from [209.85.198.237] (HELO rv-out-0506.google.com) (209.85.198.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 00:50:12 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2250302rvb.5
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 17:50:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=JnjvxGffFXuf1ekpNAboUfHNlvq7fS9yxYN7a+FN1fo=;
        b=M8JiSnO8uL1bP7K8ZPou5ux32qwzGAPpG+gn5iI4I/F2SZLFsxwqk14ekQOCdXtjgj
         0VEPCqOe21QI2eL87LccgPU2tWgJmkvljDBFtq9yf6c3+uA7Q2DsOgNpC4Mhb4WZAU/R
         E4utsI7IXxPkToioCLdWlBe9791PU7nG/xUJ8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=qUhWZ88h4xvMZI2QFu4AoT+JnhDRh3+1hm8b8daGxGXhyZuYNm7JmzIqqy+RMKXcT+
         cy7JBMjQgjReCeKaNAWjpiAwcTsEW5oxOled4G733kO0a3ngJ2H9CRFtl38KS6cl2XW6
         3kFfLw7Bgs+5GF4Os3DLrCQFSQjR9oCBByhI8=
Received: by 10.141.42.10 with SMTP id u10mr5249358rvj.141.1221526235412;
        Mon, 15 Sep 2008 17:50:35 -0700 (PDT)
Received: by 10.141.176.5 with HTTP; Mon, 15 Sep 2008 17:50:35 -0700 (PDT)
Message-ID: <1bcb7c7f0809151750n63c025a0kb2df73e5fe2232b8@mail.gmail.com>
Date: Tue, 16 Sep 2008 03:50:35 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: warming up searchers
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

What kind of query is best to warm up a searcher? How many searches should I do?

Are we supposed to search for things we know do exist, or is it better
to make queries we know they dont exist?

Best.
-C.B.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 16 02:43:19 2008
Return-Path: <java-user-return-36177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23045 invoked from network); 16 Sep 2008 02:43:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Sep 2008 02:43:19 -0000
Received: (qmail 92788 invoked by uid 500); 16 Sep 2008 02:43:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92756 invoked by uid 500); 16 Sep 2008 02:43:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92745 invoked by uid 99); 16 Sep 2008 02:43:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 19:43:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.228 as permitted sender)
Received: from [209.85.198.228] (HELO rv-out-0506.google.com) (209.85.198.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 02:42:09 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2287222rvb.5
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 19:42:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=/vpKQ4s/brsCHL3zYgAdRoKx2hSMTX269BRb5lYdaJk=;
        b=BQi+8kUM0pnTdZYADMSSAtbfAx+pphmzcfYJcUmxkKnkde8gWlNmx+Y0uTIOQmoCVG
         w4ANsCmFDiv0IB80Gw+sA65x3a0cD0yGQsMx3oQBF/1rCi9lInA7EJyMGDKtUzYLdOqg
         QZkyFF2B3sCWM1gt0Gv8JcSbMvjRoyiiWlisA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=CuBkWN73XeXBgqHcQpUu5krU3+TPdaWwLB7SHwEbCNS2OlLnjdU24xsd7Ec8aHoIed
         91aFU1hsnA7SFf1yy6do1IHPpdlVMzE3hYlw/QuKeinPezHtS6CH8oqev3kv7ot9Zx7s
         ehkVronOcQfB/Tj+5MNY6ZO8C96kqV89Me9Uc=
Received: by 10.141.79.12 with SMTP id g12mr5316407rvl.29.1221532961758;
        Mon, 15 Sep 2008 19:42:41 -0700 (PDT)
Received: by 10.141.176.5 with HTTP; Mon, 15 Sep 2008 19:42:41 -0700 (PDT)
Message-ID: <1bcb7c7f0809151942gf79d8d0s97b0b5301e1cb433@mail.gmail.com>
Date: Tue, 16 Sep 2008 05:42:41 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: TopDocs question
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

Could it harm if I make a

searcher.search(query, Integer.MAX_VALUE) ?

I just need to make a query to get the number of hits in this case,
but I dont know what the max hits will be.

Also When I make a topdocs.totalHits is that same as topdocs.scoreDocs.length()?

Best.

-C.A.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 16 03:00:23 2008
Return-Path: <java-user-return-36178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33334 invoked from network); 16 Sep 2008 03:00:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Sep 2008 03:00:23 -0000
Received: (qmail 8259 invoked by uid 500); 16 Sep 2008 03:00:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8231 invoked by uid 500); 16 Sep 2008 03:00:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8220 invoked by uid 99); 16 Sep 2008 03:00:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 20:00:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO web1.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 02:59:14 +0000
Received: from [192.168.222.60] (unknown [192.168.222.60])
	by web1.nuix.com.au (Postfix) with ESMTP id C8C444ED920
	for <java-user@lucene.apache.org>; Tue, 16 Sep 2008 12:59:23 +1000 (EST)
Message-ID: <48CF2124.3090501@nuix.com>
Date: Tue, 16 Sep 2008 12:59:48 +1000
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher.search
References: <682882.35954.qm@web50312.mail.re2.yahoo.com>
In-Reply-To: <682882.35954.qm@web50312.mail.re2.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Otis Gospodnetic wrote:
> Hi,
> 
> Check the Hits javadoc:
> 
>  * @deprecated Hits will be removed in Lucene 3.0. <p>
>  * Instead e. g. {@link TopDocCollector} and {@link TopDocs} can be used:<br>
>  * <pre>
>  *   TopDocCollector collector = new TopDocCollector(hitsPerPage);
>  *   searcher.search(query, collector);
>  *   ScoreDoc[] hits = collector.topDocs().scoreDocs;
>  *   for (int i = 0; i < hits.length; i++) {
>  *     int docId = hits[i].doc;
>  *     Document d = searcher.doc(docId);
>  *     // do something with current hit
>  *     ...
>  * </pre>

Related topic: what if we need all the hits and not just the first 100?

TopDocCollector has a couple of drawbacks, one is that you need to know 
the number of hits before the query, and you can't overallocate as it 
will run you out of memory.  I take it this is the suggested workaround 
for that:

   TopDocCollector collector = new TopDocCollector(PAGE_SIZE);
   searcher.search(query, collector);
   TopDocCollector collector2 = new TopDocCollector(
     collector.getTotalHits());
   searcher.search(query, collector2);

And then wrap it up such that the initial search's results are 
immediately available and the rest load on demand?  Sounds almost 
exactly like Hits to me though, with the drawback being we have to write 
it ourselves instead of it being part of Lucene.

Or do we make a replacement for TopDocCollector which doesn't have this 
drawback, and uses an alternative for PriorityQueue which allows its 
array to grow?

Daniel


-- 
Daniel Noll

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 16 03:06:38 2008
Return-Path: <java-user-return-36179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38790 invoked from network); 16 Sep 2008 03:06:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Sep 2008 03:06:38 -0000
Received: (qmail 10658 invoked by uid 500); 16 Sep 2008 03:06:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10624 invoked by uid 500); 16 Sep 2008 03:06:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10613 invoked by uid 99); 16 Sep 2008 03:06:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 20:06:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO web1.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 03:05:29 +0000
Received: from [192.168.222.60] (unknown [192.168.222.60])
	by web1.nuix.com.au (Postfix) with ESMTP id C1BF04ED920
	for <java-user@lucene.apache.org>; Tue, 16 Sep 2008 13:05:09 +1000 (EST)
Message-ID: <48CF227E.2060906@nuix.com>
Date: Tue, 16 Sep 2008 13:05:34 +1000
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: TopDocs question
References: <1bcb7c7f0809151942gf79d8d0s97b0b5301e1cb433@mail.gmail.com>
In-Reply-To: <1bcb7c7f0809151942gf79d8d0s97b0b5301e1cb433@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Cam Bazz wrote:
> Hello,
> 
> Could it harm if I make a
> 
> searcher.search(query, Integer.MAX_VALUE) ?
> 
> I just need to make a query to get the number of hits in this case,
> but I dont know what the max hits will be.

PriorityQueue will attempt to allocate an array of that size.

But if you only need to know the *number* of hits, and don't need the 
hits themselves, then you should just use a custom HitCollector which 
increments a counter.  It will run much faster.

Daniel


-- 
Daniel Noll

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 16 03:25:11 2008
Return-Path: <java-user-return-36180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48999 invoked from network); 16 Sep 2008 03:25:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Sep 2008 03:25:11 -0000
Received: (qmail 20986 invoked by uid 500); 16 Sep 2008 03:25:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20945 invoked by uid 500); 16 Sep 2008 03:25:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20934 invoked by uid 99); 16 Sep 2008 03:25:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 20:25:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.39.214] (HELO web50312.mail.re2.yahoo.com) (206.190.39.214)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 16 Sep 2008 03:24:00 +0000
Received: (qmail 78315 invoked by uid 60001); 16 Sep 2008 03:23:31 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=WUum+fhwcL3uLK5UvS2BLTvUt24dIk2XIg6BiuR7B1KdRspkisQQLeyiI6h9QrBwtzMiouPYYWXDqubxUT5eXV/rwxPuMPMlNfP3YSkFklSfvbi6CLT5RpHbBivSCH6hCnQ3qkr0IOmy3yelKLYxkhT5saggR/bfxAzCHYSkqr0=;
X-YMail-OSG: w4PsvwEVM1l6.oi7JhYaWe9A6YuUO9OJdipSfJkRp20LQj.b_Sb2SzEivvbwYmLyshLQaURKH1AZ9AUu7epC.0nq610Pcz3iAXpWDr69vQZCplpaNFyfd84_7VMso.uXqWQjpSm2WWkUOEOx10HpBqA-
Received: from [72.227.164.48] by web50312.mail.re2.yahoo.com via HTTP; Mon, 15 Sep 2008 20:23:31 PDT
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Mon, 15 Sep 2008 20:23:31 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: warming up searchers
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <523247.75182.qm@web50312.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I don't think the "exists vs. doesn't exist" matters  (but I should really try it and see) as much as using Sort vs. not using it if you use sorting because sorting required FieldCache loading.


Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Cam Bazz <cambazz@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Monday, September 15, 2008 8:50:35 PM
> Subject: warming up searchers
> 
> Hello,
> 
> What kind of query is best to warm up a searcher? How many searches should I do?
> 
> Are we supposed to search for things we know do exist, or is it better
> to make queries we know they dont exist?
> 
> Best.
> -C.B.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 16 03:26:25 2008
Return-Path: <java-user-return-36181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49944 invoked from network); 16 Sep 2008 03:26:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Sep 2008 03:26:25 -0000
Received: (qmail 23917 invoked by uid 500); 16 Sep 2008 03:26:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22880 invoked by uid 500); 16 Sep 2008 03:26:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22869 invoked by uid 99); 16 Sep 2008 03:26:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 20:26:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.225 as permitted sender)
Received: from [209.85.198.225] (HELO rv-out-0506.google.com) (209.85.198.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 03:25:16 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2302016rvb.5
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 20:25:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=vyFbrPe+/FmpcjCnUREZY0tMKyBOxJPvAw1PSjdTmFE=;
        b=Uez+AjoSWQPiedE/DcdF3e6RhcBilLVuh2KU9uRGhc6JjUSi2VQeGjYz06dbfKSevQ
         ahhncTnrh2hZl1ygZ54weiTXAqryAOnyKGIgrExlnk9g5apg+aNXoR46AweIfrbwa6Uy
         mjokDTnZhm5S1vsFZZusb2GnoLGwUF8jIwH7Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=bjxsmEBSZ1CWtBT8XYSIwFtw7g8W1s49M4M8eExy/GM1LalRg/K/V18r83p7V2l3CO
         6w1NCcVt79cVrrd1x8t8zyQwBZgLQ3b0pSYb2I+5BZR+VHVqePnKyE0PW7qwW7/Y19GQ
         jYOSDIc98mYybXO3+bueHwLuz0kQ4d5UGJits=
Received: by 10.141.15.19 with SMTP id s19mr5326438rvi.205.1221535539214;
        Mon, 15 Sep 2008 20:25:39 -0700 (PDT)
Received: by 10.141.176.5 with HTTP; Mon, 15 Sep 2008 20:25:39 -0700 (PDT)
Message-ID: <1bcb7c7f0809152025i6343e6a6nc4e902a03a0e8c62@mail.gmail.com>
Date: Tue, 16 Sep 2008 06:25:39 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: TopDocs question
In-Reply-To: <48CF227E.2060906@nuix.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1bcb7c7f0809151942gf79d8d0s97b0b5301e1cb433@mail.gmail.com>
	 <48CF227E.2060906@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, I looked into implementing a custom collector that would return
number of hits, but - I could not.

collect() can not access anything that is final, and final can not be
incremented.

Any ideas?

Best.

On Tue, Sep 16, 2008 at 6:05 AM, Daniel Noll <daniel@nuix.com> wrote:
> Cam Bazz wrote:
>>
>> Hello,
>>
>> Could it harm if I make a
>>
>> searcher.search(query, Integer.MAX_VALUE) ?
>>
>> I just need to make a query to get the number of hits in this case,
>> but I dont know what the max hits will be.
>
> PriorityQueue will attempt to allocate an array of that size.
>
> But if you only need to know the *number* of hits, and don't need the hits
> themselves, then you should just use a custom HitCollector which increments
> a counter.  It will run much faster.
>
> Daniel
>
>
> --
> Daniel Noll
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 16 03:28:56 2008
Return-Path: <java-user-return-36182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52713 invoked from network); 16 Sep 2008 03:28:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Sep 2008 03:28:56 -0000
Received: (qmail 26958 invoked by uid 500); 16 Sep 2008 03:28:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26744 invoked by uid 500); 16 Sep 2008 03:28:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26733 invoked by uid 99); 16 Sep 2008 03:28:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 20:28:46 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.60] (HELO web50306.mail.re2.yahoo.com) (206.190.38.60)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 16 Sep 2008 03:27:46 +0000
Received: (qmail 22751 invoked by uid 60001); 16 Sep 2008 03:28:17 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=I4a23zR7jQlbHHE59lt1EJtrZB6/FscDxm0ii1qFgzTtGuh1Ip9AKQINOBUy2ipCLFDYutDLWEbfuvBmqPXFvYAmI4ED7Ot3/b6SwWj1sdTr61yQI6BJ6+RquPEcTBHbox8zpcgXAmUC2pXoqgApYo8CN9PZB10uct4pJ81A8Wk=;
X-YMail-OSG: aWgffKQVM1nkVZAyeGieu7vbsZzRRSD32.B8gPlhtvRrggBZW7HqZgwRUH5HcyWd8VLttKeYxywPealgvHLjtojVQbFv8w3VSLllXBbwsi.dLrnlLrHMRSfXNO0b3OB5MZueK9B4yPdbxd.WeNp0xDw-
Received: from [72.227.164.48] by web50306.mail.re2.yahoo.com via HTTP; Mon, 15 Sep 2008 20:28:17 PDT
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Mon, 15 Sep 2008 20:28:17 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: TopDocs question
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <685891.21657.qm@web50306.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I think Daniel was suggesting you write your own HitCollector with its own "int hits" counter var.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Cam Bazz <cambazz@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Monday, September 15, 2008 11:25:39 PM
> Subject: Re: TopDocs question
> 
> Yes, I looked into implementing a custom collector that would return
> number of hits, but - I could not.
> 
> collect() can not access anything that is final, and final can not be
> incremented.
> 
> Any ideas?
> 
> Best.
> 
> On Tue, Sep 16, 2008 at 6:05 AM, Daniel Noll wrote:
> > Cam Bazz wrote:
> >>
> >> Hello,
> >>
> >> Could it harm if I make a
> >>
> >> searcher.search(query, Integer.MAX_VALUE) ?
> >>
> >> I just need to make a query to get the number of hits in this case,
> >> but I dont know what the max hits will be.
> >
> > PriorityQueue will attempt to allocate an array of that size.
> >
> > But if you only need to know the *number* of hits, and don't need the hits
> > themselves, then you should just use a custom HitCollector which increments
> > a counter.  It will run much faster.
> >
> > Daniel
> >
> >
> > --
> > Daniel Noll


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 16 03:35:29 2008
Return-Path: <java-user-return-36183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59047 invoked from network); 16 Sep 2008 03:35:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Sep 2008 03:35:28 -0000
Received: (qmail 33370 invoked by uid 500); 16 Sep 2008 03:35:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33338 invoked by uid 500); 16 Sep 2008 03:35:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33327 invoked by uid 99); 16 Sep 2008 03:35:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 20:35:19 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.235 as permitted sender)
Received: from [209.85.198.235] (HELO rv-out-0506.google.com) (209.85.198.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 03:34:21 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2305082rvb.5
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 20:34:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=H/YgaF4mqlx3LfOMHLpv+GdKCiNUje8ghZSmBlX6OXg=;
        b=NM+wYA3p6POg4evIdZi3o8xpwquGv4xO8vfssfdYPvku7nP9qA8Phh2zuDChE27fCF
         JGheUxU8jyrAFbx4Y3r7/4rTIhUbKem3UgbGrW5Gycezt9bo29If28JHB7gtEOqfQSSp
         TnDyatQvfcKRPBXEcEvnY+P1Q55eLKNMAxYn4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=t8EDfxpRwEgS+9FOcXQsC8EAZp1gZ4nJB6DqWKWL4/bmrpjhG1z97XeqqAAsa9RvFz
         uhB8MXliKUzqwthsiUIfm0siM5RkaTX5Rmnhokd4DV6sJ0XvxB7leyaRBFYRxzAE1qja
         rMmlk6agg1hKT6Kjhgddgfqq1p1OiTM2XX7NA=
Received: by 10.140.192.9 with SMTP id p9mr5318482rvf.193.1221536084775;
        Mon, 15 Sep 2008 20:34:44 -0700 (PDT)
Received: by 10.141.176.5 with HTTP; Mon, 15 Sep 2008 20:34:44 -0700 (PDT)
Message-ID: <1bcb7c7f0809152034p7773e706j2771d61d418efa1c@mail.gmail.com>
Date: Tue, 16 Sep 2008 06:34:44 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher.search
In-Reply-To: <48CF2124.3090501@nuix.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <682882.35954.qm@web50312.mail.re2.yahoo.com>
	 <48CF2124.3090501@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

In cases where we dont know the possible number of hits -- and wanting
to test the new 2.4 way of doing things,

could I use custom hitcollectors for everything? any performance
penalty for this?

from what I understand both TopDocCollector and TopDocs will try to
allocate an array of Integer.MAX_VALUE if I specify that for the page
size?

Best.

On Tue, Sep 16, 2008 at 5:59 AM, Daniel Noll <daniel@nuix.com> wrote:
> Otis Gospodnetic wrote:
>>
>> Hi,
>>
>> Check the Hits javadoc:
>>
>>  * @deprecated Hits will be removed in Lucene 3.0. <p>
>>  * Instead e. g. {@link TopDocCollector} and {@link TopDocs} can be
>> used:<br>
>>  * <pre>
>>  *   TopDocCollector collector = new TopDocCollector(hitsPerPage);
>>  *   searcher.search(query, collector);
>>  *   ScoreDoc[] hits = collector.topDocs().scoreDocs;
>>  *   for (int i = 0; i < hits.length; i++) {
>>  *     int docId = hits[i].doc;
>>  *     Document d = searcher.doc(docId);
>>  *     // do something with current hit
>>  *     ...
>>  * </pre>
>
> Related topic: what if we need all the hits and not just the first 100?
>
> TopDocCollector has a couple of drawbacks, one is that you need to know the
> number of hits before the query, and you can't overallocate as it will run
> you out of memory.  I take it this is the suggested workaround for that:
>
>  TopDocCollector collector = new TopDocCollector(PAGE_SIZE);
>  searcher.search(query, collector);
>  TopDocCollector collector2 = new TopDocCollector(
>    collector.getTotalHits());
>  searcher.search(query, collector2);
>
> And then wrap it up such that the initial search's results are immediately
> available and the rest load on demand?  Sounds almost exactly like Hits to
> me though, with the drawback being we have to write it ourselves instead of
> it being part of Lucene.
>
> Or do we make a replacement for TopDocCollector which doesn't have this
> drawback, and uses an alternative for PriorityQueue which allows its array
> to grow?
>
> Daniel
>
>
> --
> Daniel Noll
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 16 03:39:17 2008
Return-Path: <java-user-return-36184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62081 invoked from network); 16 Sep 2008 03:39:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Sep 2008 03:39:17 -0000
Received: (qmail 38009 invoked by uid 500); 16 Sep 2008 03:39:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37973 invoked by uid 500); 16 Sep 2008 03:39:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37962 invoked by uid 99); 16 Sep 2008 03:39:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 20:39:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.225 as permitted sender)
Received: from [209.85.198.225] (HELO rv-out-0506.google.com) (209.85.198.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 03:38:08 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2306431rvb.5
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 20:38:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=9cTycupNy7ZF1yZElsZ2S0qy0VTJ0U85Cz3umyu2sy4=;
        b=aYKlTHNFuy5oowqSBUFijb6YkZ+tnnK4TAQJTeozfPE2aGcSJ5T9sbg3OjArPppdfZ
         GzTZiZC2LdGEsOBQBJwPtXqPWzrtVysTgt5pDkAY0ueEE4+XnqdEK654MbOKiTd7kHPy
         R6gmlFctLzLe3Y11DwZ4+XJjx7tN+n06eVvws=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=DWEIpPrpiWoKcetOxfmwpDq0o2qqikArI/Z4/HgxJKS8O/tXsvgkkOocwaUVHORdpf
         PKhNKkih6FqYZBL20BViJpMWA2TWYpur8Y46Ze5fXtsQQ8egPNIqLjo7BYVqp3sI1aCT
         aNTRyzN1JUbtJlU7HdKE7iALIQPofQwGkIAsA=
Received: by 10.141.28.4 with SMTP id f4mr5356808rvj.35.1221535898958;
        Mon, 15 Sep 2008 20:31:38 -0700 (PDT)
Received: by 10.141.176.5 with HTTP; Mon, 15 Sep 2008 20:31:38 -0700 (PDT)
Message-ID: <1bcb7c7f0809152031p1289fb7eh7dc110ff042c343c@mail.gmail.com>
Date: Tue, 16 Sep 2008 06:31:38 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: TopDocs question
In-Reply-To: <685891.21657.qm@web50306.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <685891.21657.qm@web50306.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

yes, I made it that way. but still have to port some of my code.

thanks a lot.

On Tue, Sep 16, 2008 at 6:28 AM, Otis Gospodnetic
<otis_gospodnetic@yahoo.com> wrote:
> I think Daniel was suggesting you write your own HitCollector with its own "int hits" counter var.
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
>
> ----- Original Message ----
>> From: Cam Bazz <cambazz@gmail.com>
>> To: java-user@lucene.apache.org
>> Sent: Monday, September 15, 2008 11:25:39 PM
>> Subject: Re: TopDocs question
>>
>> Yes, I looked into implementing a custom collector that would return
>> number of hits, but - I could not.
>>
>> collect() can not access anything that is final, and final can not be
>> incremented.
>>
>> Any ideas?
>>
>> Best.
>>
>> On Tue, Sep 16, 2008 at 6:05 AM, Daniel Noll wrote:
>> > Cam Bazz wrote:
>> >>
>> >> Hello,
>> >>
>> >> Could it harm if I make a
>> >>
>> >> searcher.search(query, Integer.MAX_VALUE) ?
>> >>
>> >> I just need to make a query to get the number of hits in this case,
>> >> but I dont know what the max hits will be.
>> >
>> > PriorityQueue will attempt to allocate an array of that size.
>> >
>> > But if you only need to know the *number* of hits, and don't need the hits
>> > themselves, then you should just use a custom HitCollector which increments
>> > a counter.  It will run much faster.
>> >
>> > Daniel
>> >
>> >
>> > --
>> > Daniel Noll
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 16 05:34:25 2008
Return-Path: <java-user-return-36185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40056 invoked from network); 16 Sep 2008 05:34:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Sep 2008 05:34:25 -0000
Received: (qmail 39938 invoked by uid 500); 16 Sep 2008 05:34:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39908 invoked by uid 500); 16 Sep 2008 05:34:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39897 invoked by uid 99); 16 Sep 2008 05:34:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 22:34:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.239 as permitted sender)
Received: from [209.85.198.239] (HELO rv-out-0506.google.com) (209.85.198.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 05:33:15 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2343675rvb.5
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 22:33:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=oqvbUDvXqxaoqpCg5AYRpnCUkRvwiBuQTCyqBlmPcQk=;
        b=n3CIgBd0k24I6mb4j30xawLIKQW+gu6+xbkj7ziLtIN+HjeeWBAXiOl1ZQhtVS19vp
         V2pTVMXTCgFHb5OzM/0dVyIOiKiZNrA0q9p2lBBXsde5/f93V5u4ePbuUAg/vAPvxof9
         oMQwsMBCQYnUFN6KeGZBQxCfLsBVko3VT47sY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=UaWvxGAQKdo7EaGZjwdd1irr1ULS4XoHAy1ZKNaZEq6Q+RMa1M4D5/TovSuZ419+fS
         pCYFgF24JWlWgsga+q1rL7SF5nrEHE75brfhHnd3WN1T+B7E8iOm96zVm7eV+dGiDwQA
         NMx2o3LYzl4md/86ZHTgxOeIM64Kf1YF7/WAw=
Received: by 10.141.153.17 with SMTP id f17mr5398658rvo.18.1221543228187;
        Mon, 15 Sep 2008 22:33:48 -0700 (PDT)
Received: by 10.141.176.5 with HTTP; Mon, 15 Sep 2008 22:33:48 -0700 (PDT)
Message-ID: <1bcb7c7f0809152233j96e6a98g772781dc6d0500e2@mail.gmail.com>
Date: Tue, 16 Sep 2008 08:33:48 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Phrase Query
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

Lets say I have two documents, both containing field F.

document 0 has the string "a b" as F
document 1 has the string "b a" as F

I am trying to make a phrasequery like:

        PhraseQuery pq = new PhraseQuery();
        pq.add(new Term("F", "a"));
        pq.add(new Term("F", "b"));
        pq.setSlop(2);

and then search. however I was not successful finding anything.

any ideas?

Best Regards,
-C.B.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 16 05:53:59 2008
Return-Path: <java-user-return-36186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51670 invoked from network); 16 Sep 2008 05:53:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Sep 2008 05:53:58 -0000
Received: (qmail 53215 invoked by uid 500); 16 Sep 2008 05:53:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53180 invoked by uid 500); 16 Sep 2008 05:53:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53165 invoked by uid 99); 16 Sep 2008 05:53:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Sep 2008 22:53:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.231 as permitted sender)
Received: from [209.85.198.231] (HELO rv-out-0506.google.com) (209.85.198.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 05:52:49 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2350176rvb.5
        for <java-user@lucene.apache.org>; Mon, 15 Sep 2008 22:53:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=qLN5ULhDxfCxlY/x26erAu4sSFVhvcMT48b7ZPEC7PQ=;
        b=T6s9mEeIJ7aPoWUj5ZarpAtpmRdtYm5AMEUl9d9sfOBOuQvVQb5Odmn3rmWM83cfAN
         zfpT21hjv/hDCGUabDqWJG3TzSm9395tv9raqZ99oW7vpylB8vuwKDsboWOoZ4w5sovX
         OEw7qP9u3rDlg1I/kc8lT5hD90SeM/OtfCxfw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=EEqeeK3eYcWfnuz3eoOky5EFlWVjL46QY6ISpR9bVmVl68P59zQ+K+t6hRlScRXKt8
         qTB/mn6u3U8EOpEqj2rT/0pDMtXujaHdC52cu1XMlNTPstDPxktR14Q/GfyFCoaF2h7o
         UiTzf4AxJz8IH8rXSLDok+8eQbzbxblsuOB4Y=
Received: by 10.140.126.14 with SMTP id y14mr5400332rvc.96.1221544401984;
        Mon, 15 Sep 2008 22:53:21 -0700 (PDT)
Received: by 10.141.176.5 with HTTP; Mon, 15 Sep 2008 22:53:21 -0700 (PDT)
Message-ID: <1bcb7c7f0809152253t51efef3at58307bb91be43501@mail.gmail.com>
Date: Tue, 16 Sep 2008 08:53:21 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Phrase Query
In-Reply-To: <1bcb7c7f0809152233j96e6a98g772781dc6d0500e2@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1bcb7c7f0809152233j96e6a98g772781dc6d0500e2@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I noticed this was because I was using a KeywordAnalyzer.

Is it possible to write a document with different analyzers in different fields?

Best.

On Tue, Sep 16, 2008 at 8:33 AM, Cam Bazz <cambazz@gmail.com> wrote:
> Hello,
>
> Lets say I have two documents, both containing field F.
>
> document 0 has the string "a b" as F
> document 1 has the string "b a" as F
>
> I am trying to make a phrasequery like:
>
>        PhraseQuery pq = new PhraseQuery();
>        pq.add(new Term("F", "a"));
>        pq.add(new Term("F", "b"));
>        pq.setSlop(2);
>
> and then search. however I was not successful finding anything.
>
> any ideas?
>
> Best Regards,
> -C.B.
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 16 07:55:19 2008
Return-Path: <java-user-return-36187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20454 invoked from network); 16 Sep 2008 07:55:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Sep 2008 07:55:19 -0000
Received: (qmail 78537 invoked by uid 500); 16 Sep 2008 07:55:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78504 invoked by uid 500); 16 Sep 2008 07:55:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78493 invoked by uid 99); 16 Sep 2008 07:55:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 00:55:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 07:54:10 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id m8G7qVUb006286
	for <java-user@lucene.apache.org>; Tue, 16 Sep 2008 10:52:31 +0300
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz.teamw.com with ESMTP
	 id mow1mqqb; 16 Sep 2008 10:52:00 +0300
Message-ID: <48CF65A8.3080606@teamware.com>
Date: Tue, 16 Sep 2008 17:52:08 +1000
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Phrase Query
References: <1bcb7c7f0809152233j96e6a98g772781dc6d0500e2@mail.gmail.com> <1bcb7c7f0809152253t51efef3at58307bb91be43501@mail.gmail.com>
In-Reply-To: <1bcb7c7f0809152253t51efef3at58307bb91be43501@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Tue, 16 Sep 2008 10:52:31 +0300 (EEST)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

> Is it possible to write a document with different analyzers in different fields?

PerFieldAnalyzerWrapper




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 16 09:06:55 2008
Return-Path: <java-user-return-36188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58875 invoked from network); 16 Sep 2008 09:06:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Sep 2008 09:06:55 -0000
Received: (qmail 89510 invoked by uid 500); 16 Sep 2008 09:06:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89478 invoked by uid 500); 16 Sep 2008 09:06:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89467 invoked by uid 99); 16 Sep 2008 09:06:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 02:06:44 -0700
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 09:05:45 +0000
Received: from compute2.internal (compute2.internal [10.202.2.42])
	by out1.messagingengine.com (Postfix) with ESMTP id 78E2A162827
	for <java-user@lucene.apache.org>; Tue, 16 Sep 2008 05:06:16 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by compute2.internal (MEProxy); Tue, 16 Sep 2008 05:06:16 -0400
X-Sasl-enc: 28nOh09SS34Lhq8EIQ+Qb6I25P+Tu1X5orO9C6PkwszJ 1221555975
Received: from [127.0.0.1] (unknown [86.43.104.130])
	by mail.messagingengine.com (Postfix) with ESMTPSA id 1320D12695
	for <java-user@lucene.apache.org>; Tue, 16 Sep 2008 05:06:14 -0400 (EDT)
Message-ID: <48CF7721.1050005@boboco.ie>
Date: Tue, 16 Sep 2008 11:06:41 +0200
From: Eric Bowman <ebowman@boboco.ie>
User-Agent: Thunderbird 2.0.0.14 (X11/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Some SSD results to share
Content-Type: multipart/mixed;
 boundary="------------070908020801080902090406"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------070908020801080902090406
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi all,

We stuck a 60 GB OCZ "Core Series" SSD in a Dell T5400 (dual quadcore, 
16GB RAM, SATA II 7200 RPM disk) and did some comparisons between 
running with our index on disk, vs. on SSD.  I can't really talk about 
what the app does, but I can share the difference in performance; see 
enclosed PDF.

We have a 15GB index and a 20GB bdb, both of which are on the SSD.  
Pretty amazing performance difference.  "Go buy one now." :)

(The x-axis is ms/request, the y-axis is percentile.   So, "65% of SSD 
requests took 120ms or less", for example).

cheers,
Eric


--------------070908020801080902090406
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--------------070908020801080902090406--

From java-user-return-36189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 16 09:26:26 2008
Return-Path: <java-user-return-36189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73608 invoked from network); 16 Sep 2008 09:26:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Sep 2008 09:26:25 -0000
Received: (qmail 36099 invoked by uid 500); 16 Sep 2008 09:26:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35847 invoked by uid 500); 16 Sep 2008 09:26:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35836 invoked by uid 99); 16 Sep 2008 09:26:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 02:26:15 -0700
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 09:25:15 +0000
Received: from compute2.internal (compute2.internal [10.202.2.42])
	by out1.messagingengine.com (Postfix) with ESMTP id 34F911638E4
	for <java-user@lucene.apache.org>; Tue, 16 Sep 2008 05:25:48 -0400 (EDT)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by compute2.internal (MEProxy); Tue, 16 Sep 2008 05:25:48 -0400
X-Sasl-enc: s5FJ8ol5q9Q6L31TaWe63ZJfQLV6rfY69VwY3biZiram 1221557147
Received: from [127.0.0.1] (unknown [86.43.104.130])
	by mail.messagingengine.com (Postfix) with ESMTPSA id 626212B016
	for <java-user@lucene.apache.org>; Tue, 16 Sep 2008 05:25:47 -0400 (EDT)
Message-ID: <48CF7BB2.2000504@boboco.ie>
Date: Tue, 16 Sep 2008 11:26:10 +0200
From: Eric Bowman <ebowman@boboco.ie>
User-Agent: Thunderbird 2.0.0.14 (X11/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Some SSD results to share
References: <48CF7721.1050005@boboco.ie>
In-Reply-To: <48CF7721.1050005@boboco.ie>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Eric Bowman wrote:
> Hi all,
>
> We stuck a 60 GB OCZ "Core Series" SSD in a Dell T5400 (dual quadcore, 
> 16GB RAM, SATA II 7200 RPM disk) and did some comparisons between 
> running with our index on disk, vs. on SSD.  I can't really talk about 
> what the app does, but I can share the difference in performance; see 
> enclosed PDF.
>
> We have a 15GB index and a 20GB bdb, both of which are on the SSD.  
> Pretty amazing performance difference.  "Go buy one now." :)
>
> (The x-axis is ms/request, the y-axis is percentile.   So, "65% of SSD 
> requests took 120ms or less", for example).
>

Oops -- attachments not allowed.  I stuck the PDF on the wiki: 
http://wiki.apache.org/lucene-java/SSD_performance

If you dig, you can find the PDF there as an attachment, perhaps at 
http://wiki.apache.org/lucene-java/SSD_performance?action=AttachFile&do=view&target=combined-disk-ssd.pdf

cheers,
Eric


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 16 09:29:08 2008
Return-Path: <java-user-return-36190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76247 invoked from network); 16 Sep 2008 09:29:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Sep 2008 09:29:08 -0000
Received: (qmail 42929 invoked by uid 500); 16 Sep 2008 09:28:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42903 invoked by uid 500); 16 Sep 2008 09:28:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42892 invoked by uid 99); 16 Sep 2008 09:28:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 02:28:58 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rdewolff@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 09:27:57 +0000
Received: by ug-out-1314.google.com with SMTP id j3so44117ugf.23
        for <java-user@lucene.apache.org>; Tue, 16 Sep 2008 02:28:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=Ib0hj1KmKC5pEsOgGNS/ZlH+l0+iijVTmyuAg7+1ZaE=;
        b=doSdMtBIzEG4G2GGgLulrBUdkOjreJ+Xu7eArbShn8TEbWijzWH/BfT64o3g1AAAmX
         iP6qIEr41tXHncJ+QIOwerlzFIrgAvEM8k4U4Ji1QsvakDE9EeVfbcCMZprYdfZhDwzV
         PqAHEA9iGlmvEgErKaiFThAbHai941gRJzB2w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=Ot1gHeGLQhNSoJg+ZBoDbBTbjSc56e8W9uQTbM/N0xfqauOC5sCOExF+b2lW1dzjXv
         D735uvFeCiCovy2qMKRSbosHnWoCM71NCDQpPkaPd65sAE4/M4A3nJbLysiDcHj+jjyg
         C5TNNV1d+a4tLQwM49tXe4S1RM5H+kqvKiZcQ=
Received: by 10.86.89.1 with SMTP id m1mr521230fgb.68.1221557298528;
        Tue, 16 Sep 2008 02:28:18 -0700 (PDT)
Received: from ?192.168.1.35? ( [83.173.201.235])
        by mx.google.com with ESMTPS id e20sm16226026fga.1.2008.09.16.02.28.17
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 16 Sep 2008 02:28:17 -0700 (PDT)
Message-Id: <AECB5ED7-66C5-4157-A7C1-2BB94296585E@gmail.com>
From: Romain de Wolff <rdewolff@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <48CF7721.1050005@boboco.ie>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Lucene & Zend Lucene Search : indexation speed, document parsing
Date: Tue, 16 Sep 2008 11:28:09 +0200
References: <48CF7721.1050005@boboco.ie>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

Well this is my first post on this list. Nice to meet you all.

Im currently putting in place a system which index data with Apache =20
Lucene (indexing doc, xls, pdf, source code, zip files, ...) and allow =20=

searching with the Zend Lucene Search library (PHP). Im planning to =20
create a front-end view with Adobe Flex as well. Will see if I have =20
enough time - needs to be finished by middle of December 2008. Im =20
doing this as my end of studies work for the HEIG-VD =
(http://www.heig-vd.ch=20
).

Had some troubles first to make this work. Finnaly the first tests are =20=

okay. Using Apache Lucene 2.1.0 and Zend Framework 1.6.0.

Im asking myself a few questions. Mainly about speed (indexation time) =20=

and document parsing (way to index most of commonly used office =20
documents).  For document parsing, I'm planning to use different open =20=

sources library. The company Im doing this for will be indexing a few =20=

Gigabytes of data. Around 5Gb I think. Any advices about this project? =20=

Comments and suggestion are welcome.

I'll be glad to provide you more information if you want, and am =20
always happy to chat about technologies and possibilites.

@Eric Bowman : What about indexing time to create this 15Gb index? And =20=

how much data does it represent?

Best regards,

Romain de Wolff
HEIG-VD


Le 16 sept. 08 =E0 11:06, Eric Bowman a =E9crit :

> Hi all,
>
> We stuck a 60 GB OCZ "Core Series" SSD in a Dell T5400 (dual =20
> quadcore, 16GB RAM, SATA II 7200 RPM disk) and did some comparisons =20=

> between running with our index on disk, vs. on SSD.  I can't really =20=

> talk about what the app does, but I can share the difference in =20
> performance; see enclosed PDF.
>
> We have a 15GB index and a 20GB bdb, both of which are on the SSD.  =20=

> Pretty amazing performance difference.  "Go buy one now." :)
>
> (The x-axis is ms/request, the y-axis is percentile.   So, "65% of =20
> SSD requests took 120ms or less", for example).
>
> cheers,
> Eric
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 16 09:55:38 2008
Return-Path: <java-user-return-36191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96188 invoked from network); 16 Sep 2008 09:55:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Sep 2008 09:55:38 -0000
Received: (qmail 77768 invoked by uid 500); 16 Sep 2008 09:55:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77733 invoked by uid 500); 16 Sep 2008 09:55:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77722 invoked by uid 99); 16 Sep 2008 09:55:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 02:55:26 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.30] (HELO mail-gx0-f30.google.com) (209.85.217.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 09:54:25 +0000
Received: by gxk11 with SMTP id 11so9872997gxk.5
        for <java-user@lucene.apache.org>; Tue, 16 Sep 2008 02:53:56 -0700 (PDT)
Received: by 10.151.143.14 with SMTP id v14mr1204514ybn.93.1221558836761;
        Tue, 16 Sep 2008 02:53:56 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id v76sm23920099rnb.5.2008.09.16.02.53.55
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 16 Sep 2008 02:53:56 -0700 (PDT)
Message-Id: <BC214406-D1D4-437C-90F9-C0BD2AFFE957@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <48CF7721.1050005@boboco.ie>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Some SSD results to share
Date: Tue, 16 Sep 2008 05:53:54 -0400
References: <48CF7721.1050005@boboco.ie>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


I'd be curious how much of a performance difference you see between  
the different SSD drives.

This test was with OCZ "Core Series" but previous tests were with  
different SSDs right?

EG Intel just released a new 80 GB SSD (X25-M) which is getting rave  
reviews, even compared to the OCZ "core series" which seemed to be the  
previous favorite:

     http://anandtech.com/cpuchipsets/intel/showdoc.aspx?i=3403

Mike

Eric Bowman wrote:

> Hi all,
>
> We stuck a 60 GB OCZ "Core Series" SSD in a Dell T5400 (dual  
> quadcore, 16GB RAM, SATA II 7200 RPM disk) and did some comparisons  
> between running with our index on disk, vs. on SSD.  I can't really  
> talk about what the app does, but I can share the difference in  
> performance; see enclosed PDF.
>
> We have a 15GB index and a 20GB bdb, both of which are on the SSD.   
> Pretty amazing performance difference.  "Go buy one now." :)
>
> (The x-axis is ms/request, the y-axis is percentile.   So, "65% of  
> SSD requests took 120ms or less", for example).
>
> cheers,
> Eric
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 16 10:11:47 2008
Return-Path: <java-user-return-36192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7636 invoked from network); 16 Sep 2008 10:11:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Sep 2008 10:11:47 -0000
Received: (qmail 94360 invoked by uid 500); 16 Sep 2008 10:11:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94315 invoked by uid 500); 16 Sep 2008 10:11:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94304 invoked by uid 99); 16 Sep 2008 10:11:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 03:11:33 -0700
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 10:10:33 +0000
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 3C6671613D0
	for <java-user@lucene.apache.org>; Tue, 16 Sep 2008 06:07:56 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by compute1.internal (MEProxy); Tue, 16 Sep 2008 06:07:56 -0400
X-Sasl-enc: 1RxMpyXzOoKRpDbbcrX7vov/pi0HVok3IP6nbkJvdBKH 1221559675
Received: from [127.0.0.1] (unknown [86.43.104.130])
	by mail.messagingengine.com (Postfix) with ESMTPSA id 3F9D6D2A8
	for <java-user@lucene.apache.org>; Tue, 16 Sep 2008 06:07:55 -0400 (EDT)
Message-ID: <48CF8595.402@boboco.ie>
Date: Tue, 16 Sep 2008 12:08:21 +0200
From: Eric Bowman <ebowman@boboco.ie>
User-Agent: Thunderbird 2.0.0.14 (X11/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Some SSD results to share
References: <48CF7721.1050005@boboco.ie> <BC214406-D1D4-437C-90F9-C0BD2AFFE957@mikemccandless.com>
In-Reply-To: <BC214406-D1D4-437C-90F9-C0BD2AFFE957@mikemccandless.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Michael McCandless wrote:
>
> I'd be curious how much of a performance difference you see between 
> the different SSD drives.
>
> This test was with OCZ "Core Series" but previous tests were with 
> different SSDs right?
>
> EG Intel just released a new 80 GB SSD (X25-M) which is getting rave 
> reviews, even compared to the OCZ "core series" which seemed to be the 
> previous favorite:
>
> http://anandtech.com/cpuchipsets/intel/showdoc.aspx?i=3403
>

We wanted the Intel, but we couldn't get our hands on one. I too would 
be very interested to compare the results, if anyone wants to donate one. :)


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 16 11:05:40 2008
Return-Path: <java-user-return-36193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51448 invoked from network); 16 Sep 2008 11:05:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Sep 2008 11:05:40 -0000
Received: (qmail 57947 invoked by uid 500); 16 Sep 2008 11:05:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57655 invoked by uid 500); 16 Sep 2008 11:05:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57587 invoked by uid 99); 16 Sep 2008 11:05:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 04:05:16 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists.digitalpebble@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 11:04:16 +0000
Received: by ug-out-1314.google.com with SMTP id j3so72424ugf.23
        for <java-user@lucene.apache.org>; Tue, 16 Sep 2008 04:04:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=T5I7n9uFSEbEE20ehJJOnBUYLyfGy4u3/PIatc8ecUw=;
        b=iLGWaGEusKEv4OU+U0264f7vV37Od1sw5NqB4f8PKQkDb8zH7zQRo6AkUo4KBvqRlV
         /eIvd02XOX+DixeuQ8x9+69ipvWhQJCROurf66iZF3N3Ih6LI0ZJW71QjqwAVPk/qU0h
         +2HA32NP/W9SAdTcI8/m8ceTO8UDEptTqwKtA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=HMvv8yQ1yLPmENPQCmb4KCTe80C66P6zpOiWTOjd3XDqZ+LH4ZY6BJfqG0LTyGnHaa
         y5vH1Bk0t6EOjvxy2Yxgg0apcoanWjrofnw+ISKblDbRUkX2xaCaT/8jlq+qzKkupFcv
         dNXyR+ammE9ERzveFqlQ15dx4Sm4h/QHCj7OI=
Received: by 10.86.30.9 with SMTP id d9mr602575fgd.78.1221563078108;
        Tue, 16 Sep 2008 04:04:38 -0700 (PDT)
Received: by 10.86.95.15 with HTTP; Tue, 16 Sep 2008 04:04:38 -0700 (PDT)
Message-ID: <16d405e0809160404w50ad4714mdecadcbf65e40162@mail.gmail.com>
Date: Tue, 16 Sep 2008 12:04:38 +0100
From: "Julien Nioche" <lists.digitalpebble@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene & Zend Lucene Search : indexation speed, document parsing
In-Reply-To: <AECB5ED7-66C5-4157-A7C1-2BB94296585E@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_104278_12000128.1221563078088"
References: <48CF7721.1050005@boboco.ie>
	 <AECB5ED7-66C5-4157-A7C1-2BB94296585E@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_104278_12000128.1221563078088
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Bonjour Romain,


Im asking myself a few questions. Mainly about speed (indexation time) and
> document parsing (way to index most of commonly used office documents).  For
> document parsing, I'm planning to use different open sources library. The
> company Im doing this for will be indexing a few Gigabytes of data. Around
> 5Gb I think. Any advices about this project? Comments and suggestion are
> welcome.
>

For the parsing you should have a look at Apache Tika. It supports the most
common formats and exposes the OS libraries it uses for each format under a
very nice and simple API. That should spare you the trouble of interfacing
with each individual library.

Julien
-- 
DigitalPebble Ltd
http://www.digitalpebble.com

------=_Part_104278_12000128.1221563078088--

From java-user-return-36194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 16 11:17:25 2008
Return-Path: <java-user-return-36194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60380 invoked from network); 16 Sep 2008 11:17:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Sep 2008 11:17:25 -0000
Received: (qmail 86779 invoked by uid 500); 16 Sep 2008 11:17:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86751 invoked by uid 500); 16 Sep 2008 11:17:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86740 invoked by uid 99); 16 Sep 2008 11:17:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 04:17:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 11:16:13 +0000
Received: by nf-out-0910.google.com with SMTP id g16so1668291nfd.15
        for <java-user@lucene.apache.org>; Tue, 16 Sep 2008 04:16:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=dypE5pSG5clZAjcTIzTzSbxa8nO0YLI8ncd5/cBIdQI=;
        b=LEd/S5gPEdHL7JidPPHUunVNZ0MszmJjxfsZ7rZNcUJ6I788uhjs+MpeXcAZjVR4IY
         1bAEgom5cu42JN5nO7agofOee3zAohM0lq3PuQvWxIIjJvsedKbF/v4VA0S3ZJs9CqX1
         slkc0bKZ4hgaR4eGwyur+R29A7Z1n4hmnit/M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=aodG8v/4nwHgfPsLPQbBRROSn7Abl+0DZfGhDAjzJGvNknURlKpJRtmKEg7aeSVXex
         XV6i3yXHw+OAHcu+TkwkVb1JRklv5goRauozWXp5pRmIInJmEFUk3gxfMu+TNE66DtyE
         13voF9RHuMt74K+pwaubEwCbT75ngLKUWzqzk=
Received: by 10.86.63.19 with SMTP id l19mr613297fga.77.1221563804661;
        Tue, 16 Sep 2008 04:16:44 -0700 (PDT)
Received: from ?192.168.0.208? ( [84.243.3.2])
        by mx.google.com with ESMTPS id 4sm19179520fgg.4.2008.09.16.04.16.42
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 16 Sep 2008 04:16:43 -0700 (PDT)
Message-Id: <2F68492C-75A9-4F6B-B7BC-020ED7C67171@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <BC214406-D1D4-437C-90F9-C0BD2AFFE957@mikemccandless.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Some SSD results to share
Date: Tue, 16 Sep 2008 13:16:40 +0200
References: <48CF7721.1050005@boboco.ie> <BC214406-D1D4-437C-90F9-C0BD2AFFE957@mikemccandless.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

Related, I've been considering filesystem based filters on SSD. That  
ought to be rather fast, consume no memory and be as simple as a  
RandomAccessFile. I didn't spend to much time on it, gave up when I  
couldn't figure out when it made sense to close the file. Perhaps it  
would be nice with a close method in DocSetIterator.

      karl

16 sep 2008 kl. 11.53 skrev Michael McCandless:

>
> I'd be curious how much of a performance difference you see between  
> the different SSD drives.
>
> This test was with OCZ "Core Series" but previous tests were with  
> different SSDs right?
>
> EG Intel just released a new 80 GB SSD (X25-M) which is getting rave  
> reviews, even compared to the OCZ "core series" which seemed to be  
> the previous favorite:
>
>    http://anandtech.com/cpuchipsets/intel/showdoc.aspx?i=3403
>
> Mike
>
> Eric Bowman wrote:
>
>> Hi all,
>>
>> We stuck a 60 GB OCZ "Core Series" SSD in a Dell T5400 (dual  
>> quadcore, 16GB RAM, SATA II 7200 RPM disk) and did some comparisons  
>> between running with our index on disk, vs. on SSD.  I can't really  
>> talk about what the app does, but I can share the difference in  
>> performance; see enclosed PDF.
>>
>> We have a 15GB index and a 20GB bdb, both of which are on the SSD.   
>> Pretty amazing performance difference.  "Go buy one now." :)
>>
>> (The x-axis is ms/request, the y-axis is percentile.   So, "65% of  
>> SSD requests took 120ms or less", for example).
>>
>> cheers,
>> Eric
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 16 12:57:59 2008
Return-Path: <java-user-return-36195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53979 invoked from network); 16 Sep 2008 12:57:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Sep 2008 12:57:59 -0000
Received: (qmail 58784 invoked by uid 500); 16 Sep 2008 12:57:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58753 invoked by uid 500); 16 Sep 2008 12:57:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58742 invoked by uid 99); 16 Sep 2008 12:57:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 05:57:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wstrzalka@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 12:56:49 +0000
Received: by gxk6 with SMTP id 6so18129496gxk.5
        for <java-user@lucene.apache.org>; Tue, 16 Sep 2008 05:56:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:date:from:x-mailer:x-priority
         :message-id:to:subject:in-reply-to:references:mime-version
         :content-type:content-transfer-encoding;
        bh=P/yyNBCxjIDG1l8KgkIwlB3ySlIQ771UtJYDpDOrB+E=;
        b=IkHIcXAgYayqO0W0NGUtlmTR8sXJLGpP4tt2tUK4ex51n/R22ORznjP7erPWwqR6o/
         X4bQBXRy14X2gHIn3/KMWYkouWwasPAgqFkiYXqgOjV58C25uHMNp25T1369vsAjRqd6
         0Ji2h91BKJmj7rbxrcnlh0ig5rhnIQXgLqYOY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:from:x-mailer:x-priority:message-id:to:subject:in-reply-to
         :references:mime-version:content-type:content-transfer-encoding;
        b=lHa1crmb9qIYc+6455Jx7ATXiC3Ar569jrrYVqhOyIxKvEyhI1z2py4ytoWlWTUCSY
         ttMLtA2xK+xW8UdP4c2K4QBSbXAQkXACoUdb45X1EAWzLgVj30Z5EVJPHXa9rUedKfXK
         PQFrbakR08qY12Mg2dM+9Skxpbsno146ZVqAg=
Received: by 10.102.228.10 with SMTP id a10mr642444muh.109.1221569780433;
        Tue, 16 Sep 2008 05:56:20 -0700 (PDT)
Received: from D620 ( [87.206.64.119])
        by mx.google.com with ESMTPS id u26sm2762074mug.5.2008.09.16.05.56.17
        (version=SSLv3 cipher=OTHER);
        Tue, 16 Sep 2008 05:56:18 -0700 (PDT)
Date: Tue, 16 Sep 2008 14:56:08 +0200
From: =?utf-8?Q?Wojciech_Strza=C5=82ka?= <wstrzalka@gmail.com>
X-Mailer: The Bat! (v3.99)
X-Priority: 3 (Normal)
Message-ID: <1973600379.20080916145608@gmail.com>
To: Jason Rutherglen <java-user@lucene.apache.org>
Subject: Re[2]: Frequently updated fields
In-Reply-To: <85d3c3b60809121258x567af9f2j19cc280dc43b0224@mail.gmail.com>
References: <1221781428.20080912135749@gmail.com> <6E7487CD-2836-4B3C-9940-67F989F018E8@gmail.com> <48CA9C3B.3050901@correobancomer.com> <48CAC7A4.3040705@gmail.com> <85d3c3b60809121258x567af9f2j19cc280dc43b0224@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


 I saw your comments on JIRA. You mentioned about rework and I'm wondering if the currently
 available patch is production ready (functionally complete)?
 Will the code after rework work with the index build with the current
 version?

 I'm quite new to SOLR/Lucene but I hope I could write custom
 SearchComponent to SOLR based on yours Tag Index and this way get
 exactly what I need.

 And one more question:  I don't really get now how could I setup field to be indexed by
 TagIndexWriter instead of TagWriter. I know it's somehow handled by
 ParallelIndexWriter but how can I setup it?
 
 
> Yes Tag Index will work.  I have not had time to complete it however
> if you are interested in working on it please feel free to contact me.

> On Fri, Sep 12, 2008 at 3:48 PM, Mark Miller <markrmiller@gmail.com> wrote:
>> You might check out the tagindex issue in jira as well. Havn't looked at it
>> myself, but I believe its supposed to be an option for this.
>>
>> Gerardo Segura wrote:
>>>
>>> I think the important question is: in general how to cope with frequently
>>> changing fields.
>>>
>>>
>>> Karl Wettin wrote:
>>>>
>>>> Hi Wojciech,
>>>>
>>>> can you please give us a bit more specific information about the meta
>>>> data fields that will change? I would recommend you looking at creating
>>>> filters from your primary persistency for query clauses such as unread/read,
>>>> mailbox folders, et c.
>>>>
>>>>      karl
>>>>
>>>> 12 sep 2008 kl. 13.57 skrev Wojciech Strza?ka:
>>>>
>>>>> Hi.
>>>>>
>>>>>  I'm new to Lucene and I would like to get a few answers (they can
>>>>>  be lame)
>>>>>
>>>>>  I want to index large amount of emails using Lucene (maybe SOLR), not
>>>>> only
>>>>>  the contents but also some metadata like state or flags. The
>>>>>  problem is that the metadata will change during mail lifecycle,
>>>>>  although much smaller updating this information will require
>>>>>  reindex the whole mail content which I see performance bottleneck.
>>>>>
>>>>>  I have the data in DB also so my first question is:
>>>>>
>>>>>  - are there any best practices to implement my needs (querying both
>>>>>  lucene & DB and then merging in memory?, close one eye and re-index
>>>>>  the whole content on every metadata change? others?)
>>>>>
>>>>>  - is at all Lucene good solution for my problem?
>>>>>
>>>>>  - are there any plans to implement field updates in more efficient way
>>>>> then
>>>>>  delete/insert the whole document? if yes what's the time horizon?
>>>>>
>>>>>
>>>>>                                       Best regards
>>>>>                                              Wojtek
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>

> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



-- 
Pozdrowienia,
 Wojciech Strzalka


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 16 13:05:55 2008
Return-Path: <java-user-return-36196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62409 invoked from network); 16 Sep 2008 13:05:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Sep 2008 13:05:55 -0000
Received: (qmail 72858 invoked by uid 500); 16 Sep 2008 13:05:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72619 invoked by uid 500); 16 Sep 2008 13:05:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72605 invoked by uid 99); 16 Sep 2008 13:05:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 06:05:44 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 13:04:45 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KfaF3-0006mF-0a
	for java-user@lucene.apache.org; Tue, 16 Sep 2008 06:05:17 -0700
Message-ID: <19511428.post@talk.nabble.com>
Date: Tue, 16 Sep 2008 06:05:17 -0700 (PDT)
From: miztaken <justjunktome@gmail.com>
To: java-user@lucene.apache.org
Subject: Issues with Special Characters
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: justjunktome@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi there,
I am using WhiteSpaceAnalyser to index documents. I have used this because i
need to split tokens based on space only. Also Tokensized=true
While indexing what does it do with special characters like + - && || ! ( )
{ } [ ] ^ " ~ * ? : \, will these characters be indexed or will be chopped
off? I am confused about this.

Now i am having problem while searching as well..
for query strings like "jason dartling (e-mail)" and "re: fyi.dat", i don't
have to escape the special characters ( , ) and : but for input such as
"re:" queryParser is producing error so i have escaped characters here.
So it seems like i have two cases to deal with..
Can anyone suggest me one generic way to deal with both the cases?

Basically how to index and search string with escape characters will be my
generalized question?


Please help me
miztaken





-- 
View this message in context: http://www.nabble.com/Issues-with-Special-Characters-tp19511428p19511428.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 16 13:20:39 2008
Return-Path: <java-user-return-36197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72343 invoked from network); 16 Sep 2008 13:20:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Sep 2008 13:20:38 -0000
Received: (qmail 96841 invoked by uid 500); 16 Sep 2008 13:20:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96808 invoked by uid 500); 16 Sep 2008 13:20:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96797 invoked by uid 99); 16 Sep 2008 13:20:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 06:20:27 -0700
X-ASF-Spam-Status: No, hits=4.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 13:19:28 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KfaTI-0007UD-Gj
	for java-user@lucene.apache.org; Tue, 16 Sep 2008 06:20:00 -0700
Message-ID: <19511672.post@talk.nabble.com>
Date: Tue, 16 Sep 2008 06:20:00 -0700 (PDT)
From: nukie <stas.bandera@gmail.com>
To: java-user@lucene.apache.org
Subject: Using Hits as document space for new search
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_50101_1248595.1221571200512"
X-Nabble-From: stas.bandera@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_50101_1248595.1221571200512
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Hi!
I'm writing application that should be using lucene for searching threw
~2000000 documents. 

Search criterias i'm collecting using BooleanQuery and ChainedFilter. 
Avarage search takes 150 ms, what is acceptable in my case.
But i should have hits count for ~20 more variants of search criterias (by
increasing search criterias count).  

This looks costly. I thougt about using current Hits as document space for
new, more detailed search. 
Is this possible or there is another performance tricks for getting hits
count ?
-- 
View this message in context: http://www.nabble.com/Using-Hits-as-document-space-for-new-search-tp19511672p19511672.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

------=_Part_50101_1248595.1221571200512--


From java-user-return-36198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 16 13:46:09 2008
Return-Path: <java-user-return-36198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90029 invoked from network); 16 Sep 2008 13:46:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Sep 2008 13:46:08 -0000
Received: (qmail 52312 invoked by uid 500); 16 Sep 2008 13:45:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51387 invoked by uid 500); 16 Sep 2008 13:45:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51376 invoked by uid 99); 16 Sep 2008 13:45:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 06:45:57 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 64.233.170.189 as permitted sender)
Received: from [64.233.170.189] (HELO rn-out-0910.google.com) (64.233.170.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 13:44:58 +0000
Received: by rn-out-0910.google.com with SMTP id j71so1921521rne.4
        for <java-user@lucene.apache.org>; Tue, 16 Sep 2008 06:45:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=co14hnPwfjh33wFmgJvGOAo5SFriOqIdGLPYHHiaDiA=;
        b=mFvddiTPr4Pb5li5OpZnxaCeDkovMoarmdWbvE6TBk/39rQQ13IyUlUFzjNsgL/YTp
         gCwJknphdYSdfjXZh+QncdjHGYqCrimvSKXzjV8oai7smoxcNxLMvx/4PUQ2h0LjnAuM
         4uEGp01DuyYF/lf8XNAQ9Ox+FZg4Z5Sc/OyuY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=MNXerZPk2bVcFeOCV1TI5b5gCiD7fyivJTqGv1yKeSfvIU2QxbYIAShL41X8M3+AEp
         FW3k3Hy4kJznbhaIbOWNpcATVvRMX2QdoSJKulL8CVMCaQQhcTqjk+fhz4yNVCyXLWoU
         pGcC8U3UmEe52aeptwfVf68Jn4gW7FHP1EryQ=
Received: by 10.86.80.17 with SMTP id d17mr776374fgb.33.1221572729218;
        Tue, 16 Sep 2008 06:45:29 -0700 (PDT)
Received: by 10.86.76.4 with HTTP; Tue, 16 Sep 2008 06:45:29 -0700 (PDT)
Message-ID: <359a92830809160645u2b661f65uc8e59358f7c29b9f@mail.gmail.com>
Date: Tue, 16 Sep 2008 09:45:29 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Issues with Special Characters
In-Reply-To: <19511428.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8870_1625851.1221572729212"
References: <19511428.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8870_1625851.1221572729212
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You can easily answer the questions about what WhitespaceTokenizer
produces by getting a copy of Luke and looking at your index. Or writing
a really simple test program that prints out tokens.

At the bottom of this page is a list of special characters for escaping:
http://lucene.apache.org/java/docs/queryparsersyntax.html

Best
Erick

On Tue, Sep 16, 2008 at 9:05 AM, miztaken <justjunktome@gmail.com> wrote:

>
> Hi there,
> I am using WhiteSpaceAnalyser to index documents. I have used this because
> i
> need to split tokens based on space only. Also Tokensized=true
> While indexing what does it do with special characters like + - && || ! ( )
> { } [ ] ^ " ~ * ? : \, will these characters be indexed or will be chopped
> off? I am confused about this.
>
> Now i am having problem while searching as well..
> for query strings like "jason dartling (e-mail)" and "re: fyi.dat", i don't
> have to escape the special characters ( , ) and : but for input such as
> "re:" queryParser is producing error so i have escaped characters here.
> So it seems like i have two cases to deal with..
> Can anyone suggest me one generic way to deal with both the cases?
>
> Basically how to index and search string with escape characters will be my
> generalized question?
>
>
> Please help me
> miztaken
>
>
>
>
>
> --
> View this message in context:
> http://www.nabble.com/Issues-with-Special-Characters-tp19511428p19511428.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_8870_1625851.1221572729212--

From java-user-return-36199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 16 13:48:16 2008
Return-Path: <java-user-return-36199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92129 invoked from network); 16 Sep 2008 13:48:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Sep 2008 13:48:16 -0000
Received: (qmail 55113 invoked by uid 500); 16 Sep 2008 13:48:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55085 invoked by uid 500); 16 Sep 2008 13:48:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55074 invoked by uid 99); 16 Sep 2008 13:48:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 06:48:06 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 13:47:06 +0000
Received: by yx-out-2324.google.com with SMTP id 3so792205yxj.5
        for <java-user@lucene.apache.org>; Tue, 16 Sep 2008 06:47:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=LIoBVUePoYKlS478Gf57dzzc7HqZM2SHaCKlIRWz1xU=;
        b=tGwdCMi73iVBcWqF/fVMTiRQH0dOgZ1c8cBGYkAaaLK0kzguip516fVb8fXWESmcS5
         6GbQ3XKicr/5/zJPaK4KgCVNYmDXPm68N4rhYAjIAJVrkGe52a6JGgU7jl65EdMNrCD1
         RwGUtjXW2u6Cz5vFX6wbITGJmp2+fyy/YuVDE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=gV9a/OQtUdpiJhsGkE2XEophJwLuCJ3s3s4O3Ud+gJ9up9V7jMNAE67uDuGgagqdKg
         U8SGweCiQdcflgCI8uwvXH/IM5gHssL6y/k+wOZ0PX6OUWJV2AZnfPziRzteUOCpwcOW
         6b5GxtDbjFgtYD25cZz7gSY+0pGe4LoXqhBfA=
Received: by 10.86.72.3 with SMTP id u3mr760166fga.62.1221572857790;
        Tue, 16 Sep 2008 06:47:37 -0700 (PDT)
Received: by 10.86.76.4 with HTTP; Tue, 16 Sep 2008 06:47:37 -0700 (PDT)
Message-ID: <359a92830809160647g1f37201aq6731a5f099d2d56a@mail.gmail.com>
Date: Tue, 16 Sep 2008 09:47:37 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using Hits as document space for new search
In-Reply-To: <19511672.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8887_6010356.1221572857756"
References: <19511672.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8887_6010356.1221572857756
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm confused about what your "variants of search criterias" are. Could
you provide a few examples?

Also, if you can provide a higher-level statement of your problem, folks
can often come up with alternate approaches.

Best
Erick

On Tue, Sep 16, 2008 at 9:20 AM, nukie <stas.bandera@gmail.com> wrote:

>
> Hi!
> I'm writing application that should be using lucene for searching threw
> ~2000000 documents.
>
> Search criterias i'm collecting using BooleanQuery and ChainedFilter.
> Avarage search takes 150 ms, what is acceptable in my case.
> But i should have hits count for ~20 more variants of search criterias (by
> increasing search criterias count).
>
> This looks costly. I thougt about using current Hits as document space for
> new, more detailed search.
> Is this possible or there is another performance tricks for getting hits
> count ?
> --
> View this message in context:
> http://www.nabble.com/Using-Hits-as-document-space-for-new-search-tp19511672p19511672.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>

------=_Part_8887_6010356.1221572857756--

From java-user-return-36200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 16 13:49:05 2008
Return-Path: <java-user-return-36200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92654 invoked from network); 16 Sep 2008 13:49:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Sep 2008 13:49:04 -0000
Received: (qmail 57623 invoked by uid 500); 16 Sep 2008 13:48:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57577 invoked by uid 500); 16 Sep 2008 13:48:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57525 invoked by uid 99); 16 Sep 2008 13:48:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 06:48:46 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 13:47:48 +0000
Received: by gxk6 with SMTP id 6so18247087gxk.5
        for <java-user@lucene.apache.org>; Tue, 16 Sep 2008 06:47:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=GnPJPT8gvfPaW2x7lNPw8sBCbNmm/ofqfxO6Sw06PNw=;
        b=cYtuOqc+WyAw8eUxg4hX8flIeirXv1zxHwKKaZSD8dliQ20wmh6TptIl9v8cQQn7E+
         96PEo9sHr3p0cAfXrYQn/bNM9nTj8LzID+cBVi0CPZPk2WEaB7RwBYfyy3fMTu/4ovjC
         ApP8NEuaBvto/GDHmjCpMWfq+HHwE5lhJS0R0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=QqMNRXseP2bPLvxH9nKR2KWBMlVSFxm6eORkK2uuFs4o6ldcWknDjg5sCwsg37DHOK
         m3SbW3tEODWhd3COlbIm65/M4sB34W8Wi4xQ9D/uJ/kLcFhLSasjGWe3FncNyJfnbCyg
         Nb0VpqxS4SaSfKiy0ZUn8K2qXYGbSsOQ9CtBQ=
Received: by 10.150.12.3 with SMTP id 3mr1576242ybl.17.1221572840380;
        Tue, 16 Sep 2008 06:47:20 -0700 (PDT)
Received: by 10.151.117.4 with HTTP; Tue, 16 Sep 2008 06:47:20 -0700 (PDT)
Message-ID: <85d3c3b60809160647j679ef7c2v8fe6f943294b297f@mail.gmail.com>
Date: Tue, 16 Sep 2008 09:47:20 -0400
From: "Jason Rutherglen" <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Re[2]: Frequently updated fields
In-Reply-To: <1973600379.20080916145608@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-2
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <1221781428.20080912135749@gmail.com>
	 <6E7487CD-2836-4B3C-9940-67F989F018E8@gmail.com>
	 <48CA9C3B.3050901@correobancomer.com> <48CAC7A4.3040705@gmail.com>
	 <85d3c3b60809121258x567af9f2j19cc280dc43b0224@mail.gmail.com>
	 <1973600379.20080916145608@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

SGkgV29qY2llY2gsCgpUaGUgY29kZSBpc24ndCByZWFkeSwgaXQgaXMgYSBtYWpvciBwcm9qZWN0
IGFuZCBJIGFtIHRyeWluZyB0byBhbHNvCmNvbXBsZXRlIHRoZSByZWFsdGltZSBpbmRleGluZyBw
YXRjaGVzIGFuZCBsb29rIGZvciBhIGpvYi4gIEkgYmVsaWV2ZQp0aGF0IHRoZSB0YWcgaW5kZXhp
bmcgc3R1ZmYgaXMgb2YgaW50ZXJlc3QgdG8gbWFueSBwZW9wbGUgc28gaWYgdGhlcmUKaXMgc29t
ZW9uZSB3aG8gY2FuIHBheSB0byBnZXQgaXQgY29tcGxldGVkIGZlZWwgZnJlZSB0byBjb250YWN0
IG1lIGFzCkkgYW0gYXZhaWxhYmxlIHRvIGRvIHNvLiAgVGhlIGdvYWwgaXMgdG8gaW50ZWdyYXRl
IHRhZyBpbmRleCBpbnRvCnJlYWx0aW1lIGluZGV4aW5nIHNvIHRoYXQgaXQgaXMgc2VhbWxlc3Mg
YW5kIGVhc3kgdG8gdXNlLiAgVGhpcyB3aWxsCm5vdCBiZSBlYXN5IGhvd2V2ZXIgSSBnYWluZWQg
YSBsb3Qgb2Yga25vd2xlZGdlIG9uIGhvdyB0byBpbXBsZW1lbnQKcmVhbHRpbWUgc2VhcmNoIGRl
c2lnbiB3aGVuIHdyaXRpbmcgdGhlIHJlYWx0aW1lIGluZGV4aW5nIGFuZCBzZXJhY2gKY29kZS4K
Ckphc29uCgpPbiBUdWUsIFNlcCAxNiwgMjAwOCBhdCA4OjU2IEFNLCBXb2pjaWVjaCBTdHJ6YbNr
YSA8d3N0cnphbGthQGdtYWlsLmNvbT4gd3JvdGU6Cj4KPiAgSSBzYXcgeW91ciBjb21tZW50cyBv
biBKSVJBLiBZb3UgbWVudGlvbmVkIGFib3V0IHJld29yayBhbmQgSSdtIHdvbmRlcmluZyBpZiB0
aGUgY3VycmVudGx5Cj4gIGF2YWlsYWJsZSBwYXRjaCBpcyBwcm9kdWN0aW9uIHJlYWR5IChmdW5j
dGlvbmFsbHkgY29tcGxldGUpPwo+ICBXaWxsIHRoZSBjb2RlIGFmdGVyIHJld29yayB3b3JrIHdp
dGggdGhlIGluZGV4IGJ1aWxkIHdpdGggdGhlIGN1cnJlbnQKPiAgdmVyc2lvbj8KPgo+ICBJJ20g
cXVpdGUgbmV3IHRvIFNPTFIvTHVjZW5lIGJ1dCBJIGhvcGUgSSBjb3VsZCB3cml0ZSBjdXN0b20K
PiAgU2VhcmNoQ29tcG9uZW50IHRvIFNPTFIgYmFzZWQgb24geW91cnMgVGFnIEluZGV4IGFuZCB0
aGlzIHdheSBnZXQKPiAgZXhhY3RseSB3aGF0IEkgbmVlZC4KPgo+ICBBbmQgb25lIG1vcmUgcXVl
c3Rpb246ICBJIGRvbid0IHJlYWxseSBnZXQgbm93IGhvdyBjb3VsZCBJIHNldHVwIGZpZWxkIHRv
IGJlIGluZGV4ZWQgYnkKPiAgVGFnSW5kZXhXcml0ZXIgaW5zdGVhZCBvZiBUYWdXcml0ZXIuIEkg
a25vdyBpdCdzIHNvbWVob3cgaGFuZGxlZCBieQo+ICBQYXJhbGxlbEluZGV4V3JpdGVyIGJ1dCBo
b3cgY2FuIEkgc2V0dXAgaXQ/Cj4KPgo+PiBZZXMgVGFnIEluZGV4IHdpbGwgd29yay4gIEkgaGF2
ZSBub3QgaGFkIHRpbWUgdG8gY29tcGxldGUgaXQgaG93ZXZlcgo+PiBpZiB5b3UgYXJlIGludGVy
ZXN0ZWQgaW4gd29ya2luZyBvbiBpdCBwbGVhc2UgZmVlbCBmcmVlIHRvIGNvbnRhY3QgbWUuCj4K
Pj4gT24gRnJpLCBTZXAgMTIsIDIwMDggYXQgMzo0OCBQTSwgTWFyayBNaWxsZXIgPG1hcmtybWls
bGVyQGdtYWlsLmNvbT4gd3JvdGU6Cj4+PiBZb3UgbWlnaHQgY2hlY2sgb3V0IHRoZSB0YWdpbmRl
eCBpc3N1ZSBpbiBqaXJhIGFzIHdlbGwuIEhhdm4ndCBsb29rZWQgYXQgaXQKPj4+IG15c2VsZiwg
YnV0IEkgYmVsaWV2ZSBpdHMgc3VwcG9zZWQgdG8gYmUgYW4gb3B0aW9uIGZvciB0aGlzLgo+Pj4K
Pj4+IEdlcmFyZG8gU2VndXJhIHdyb3RlOgo+Pj4+Cj4+Pj4gSSB0aGluayB0aGUgaW1wb3J0YW50
IHF1ZXN0aW9uIGlzOiBpbiBnZW5lcmFsIGhvdyB0byBjb3BlIHdpdGggZnJlcXVlbnRseQo+Pj4+
IGNoYW5naW5nIGZpZWxkcy4KPj4+Pgo+Pj4+Cj4+Pj4gS2FybCBXZXR0aW4gd3JvdGU6Cj4+Pj4+
Cj4+Pj4+IEhpIFdvamNpZWNoLAo+Pj4+Pgo+Pj4+PiBjYW4geW91IHBsZWFzZSBnaXZlIHVzIGEg
Yml0IG1vcmUgc3BlY2lmaWMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIG1ldGEKPj4+Pj4gZGF0YSBm
aWVsZHMgdGhhdCB3aWxsIGNoYW5nZT8gSSB3b3VsZCByZWNvbW1lbmQgeW91IGxvb2tpbmcgYXQg
Y3JlYXRpbmcKPj4+Pj4gZmlsdGVycyBmcm9tIHlvdXIgcHJpbWFyeSBwZXJzaXN0ZW5jeSBmb3Ig
cXVlcnkgY2xhdXNlcyBzdWNoIGFzIHVucmVhZC9yZWFkLAo+Pj4+PiBtYWlsYm94IGZvbGRlcnMs
IGV0IGMuCj4+Pj4+Cj4+Pj4+ICAgICAga2FybAo+Pj4+Pgo+Pj4+PiAxMiBzZXAgMjAwOCBrbC4g
MTMuNTcgc2tyZXYgV29qY2llY2ggU3RyemE/a2E6Cj4+Pj4+Cj4+Pj4+PiBIaS4KPj4+Pj4+Cj4+
Pj4+PiAgSSdtIG5ldyB0byBMdWNlbmUgYW5kIEkgd291bGQgbGlrZSB0byBnZXQgYSBmZXcgYW5z
d2VycyAodGhleSBjYW4KPj4+Pj4+ICBiZSBsYW1lKQo+Pj4+Pj4KPj4+Pj4+ICBJIHdhbnQgdG8g
aW5kZXggbGFyZ2UgYW1vdW50IG9mIGVtYWlscyB1c2luZyBMdWNlbmUgKG1heWJlIFNPTFIpLCBu
b3QKPj4+Pj4+IG9ubHkKPj4+Pj4+ICB0aGUgY29udGVudHMgYnV0IGFsc28gc29tZSBtZXRhZGF0
YSBsaWtlIHN0YXRlIG9yIGZsYWdzLiBUaGUKPj4+Pj4+ICBwcm9ibGVtIGlzIHRoYXQgdGhlIG1l
dGFkYXRhIHdpbGwgY2hhbmdlIGR1cmluZyBtYWlsIGxpZmVjeWNsZSwKPj4+Pj4+ICBhbHRob3Vn
aCBtdWNoIHNtYWxsZXIgdXBkYXRpbmcgdGhpcyBpbmZvcm1hdGlvbiB3aWxsIHJlcXVpcmUKPj4+
Pj4+ICByZWluZGV4IHRoZSB3aG9sZSBtYWlsIGNvbnRlbnQgd2hpY2ggSSBzZWUgcGVyZm9ybWFu
Y2UgYm90dGxlbmVjay4KPj4+Pj4+Cj4+Pj4+PiAgSSBoYXZlIHRoZSBkYXRhIGluIERCIGFsc28g
c28gbXkgZmlyc3QgcXVlc3Rpb24gaXM6Cj4+Pj4+Pgo+Pj4+Pj4gIC0gYXJlIHRoZXJlIGFueSBi
ZXN0IHByYWN0aWNlcyB0byBpbXBsZW1lbnQgbXkgbmVlZHMgKHF1ZXJ5aW5nIGJvdGgKPj4+Pj4+
ICBsdWNlbmUgJiBEQiBhbmQgdGhlbiBtZXJnaW5nIGluIG1lbW9yeT8sIGNsb3NlIG9uZSBleWUg
YW5kIHJlLWluZGV4Cj4+Pj4+PiAgdGhlIHdob2xlIGNvbnRlbnQgb24gZXZlcnkgbWV0YWRhdGEg
Y2hhbmdlPyBvdGhlcnM/KQo+Pj4+Pj4KPj4+Pj4+ICAtIGlzIGF0IGFsbCBMdWNlbmUgZ29vZCBz
b2x1dGlvbiBmb3IgbXkgcHJvYmxlbT8KPj4+Pj4+Cj4+Pj4+PiAgLSBhcmUgdGhlcmUgYW55IHBs
YW5zIHRvIGltcGxlbWVudCBmaWVsZCB1cGRhdGVzIGluIG1vcmUgZWZmaWNpZW50IHdheQo+Pj4+
Pj4gdGhlbgo+Pj4+Pj4gIGRlbGV0ZS9pbnNlcnQgdGhlIHdob2xlIGRvY3VtZW50PyBpZiB5ZXMg
d2hhdCdzIHRoZSB0aW1lIGhvcml6b24/Cj4+Pj4+Pgo+Pj4+Pj4KPj4+Pj4+ICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgQmVzdCByZWdhcmRzCj4+Pj4+PiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBXb2p0ZWsKPj4+Pj4+Cj4+Pj4+Pgo+
Pj4+Pj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tCj4+Pj4+PiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVz
ZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPj4+Pj4+IEZvciBhZGRpdGlvbmFsIGNv
bW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4+Pj4+Pgo+
Pj4+Pgo+Pj4+Pgo+Pj4+PiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPj4+Pj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFp
bDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4+Pj4+IEZvciBhZGRp
dGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3Jn
Cj4+Pj4+Cj4+Pj4+Cj4+Pj4KPj4+Pgo+Pj4+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+Pj4+IFRvIHVuc3Vic2Ny
aWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+Pj4+
IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5h
cGFjaGUub3JnCj4+Pj4KPj4+Cj4+Pgo+Pj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4+PiBUbyB1bnN1YnNjcmli
ZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPj4+IEZv
ciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFj
aGUub3JnCj4+Pgo+Pj4KPgo+PiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFp
bDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4+IEZvciBhZGRpdGlv
bmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4K
Pgo+Cj4gLS0KPiBQb3pkcm93aWVuaWEsCj4gIFdvamNpZWNoIFN0cnphbGthCj4KPgo+IC0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLQo+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBs
dWNlbmUuYXBhY2hlLm9yZwo+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEt
dXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4KPgo=


From java-user-return-36201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 16 13:50:01 2008
Return-Path: <java-user-return-36201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93485 invoked from network); 16 Sep 2008 13:50:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Sep 2008 13:50:01 -0000
Received: (qmail 62403 invoked by uid 500); 16 Sep 2008 13:49:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62375 invoked by uid 500); 16 Sep 2008 13:49:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62364 invoked by uid 99); 16 Sep 2008 13:49:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 06:49:50 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 13:48:51 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Kfavi-0000Ao-OJ
	for java-user@lucene.apache.org; Tue, 16 Sep 2008 06:49:22 -0700
Message-ID: <19512277.post@talk.nabble.com>
Date: Tue, 16 Sep 2008 06:49:22 -0700 (PDT)
From: miztaken <justjunktome@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Issues with Special Characters
In-Reply-To: <359a92830809160645u2b661f65uc8e59358f7c29b9f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: justjunktome@gmail.com
References: <19511428.post@talk.nabble.com> <359a92830809160645u2b661f65uc8e59358f7c29b9f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi there,
I will check that out but what do you suggest for searching??
without escaping works for query string "fw: fyi.dat" but i have to escape :
char for query string "fw:" so i am having two cases?

Please help me




Erick Erickson wrote:
> 
> You can easily answer the questions about what WhitespaceTokenizer
> produces by getting a copy of Luke and looking at your index. Or writing
> a really simple test program that prints out tokens.
> 
> At the bottom of this page is a list of special characters for escaping:
> http://lucene.apache.org/java/docs/queryparsersyntax.html
> 
> Best
> Erick
> 
> On Tue, Sep 16, 2008 at 9:05 AM, miztaken <justjunktome@gmail.com> wrote:
> 
>>
>> Hi there,
>> I am using WhiteSpaceAnalyser to index documents. I have used this
>> because
>> i
>> need to split tokens based on space only. Also Tokensized=true
>> While indexing what does it do with special characters like + - && || ! (
>> )
>> { } [ ] ^ " ~ * ? : \, will these characters be indexed or will be
>> chopped
>> off? I am confused about this.
>>
>> Now i am having problem while searching as well..
>> for query strings like "jason dartling (e-mail)" and "re: fyi.dat", i
>> don't
>> have to escape the special characters ( , ) and : but for input such as
>> "re:" queryParser is producing error so i have escaped characters here.
>> So it seems like i have two cases to deal with..
>> Can anyone suggest me one generic way to deal with both the cases?
>>
>> Basically how to index and search string with escape characters will be
>> my
>> generalized question?
>>
>>
>> Please help me
>> miztaken
>>
>>
>>
>>
>>
>> --
>> View this message in context:
>> http://www.nabble.com/Issues-with-Special-Characters-tp19511428p19511428.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Issues-with-Special-Characters-tp19511428p19512277.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 16 14:15:54 2008
Return-Path: <java-user-return-36202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9542 invoked from network); 16 Sep 2008 14:15:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Sep 2008 14:15:54 -0000
Received: (qmail 4293 invoked by uid 500); 16 Sep 2008 14:15:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4274 invoked by uid 500); 16 Sep 2008 14:15:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4263 invoked by uid 99); 16 Sep 2008 14:15:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 07:15:43 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.44.30 as permitted sender)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 14:14:43 +0000
Received: by yx-out-2324.google.com with SMTP id 3so797401yxj.5
        for <java-user@lucene.apache.org>; Tue, 16 Sep 2008 07:15:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=dwMNQcC+wWOIbwGKKg4NWIKtLBByMa3qPfe5PFXQpkE=;
        b=IFCUyjpjYmaXbeOmZwgMsol0eAenDLMOVYbX6naTBpJmENc3F7PRyOZ72+AKC3OLKG
         91/qW/iKuPNmUHPrsqJ4IUU+L5FOhtYXWy8GWbEgU21h/eI9UG2L91XxOi4Oub62qr8F
         zT94Yscn/tXroqZb4bf7o1t7q3TH7jAGVQAsY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=qVgcJ+h/TIfy/BiSTb7D4QVD3eSXazZW1ek1fh3XqEL1vPK6u/PWldSVAYzPbMp0u5
         11v6Vespq4j9K54L2cZSkjU5mRj9WtgC9+LC8QkKVMMdYk2P7LNgi5KfjYppZ1B9nMGz
         cWzZ2C249WrQP3tFVkndxYzzHCamgtX7EIVOM=
Received: by 10.86.80.17 with SMTP id d17mr797000fgb.47.1221574514864;
        Tue, 16 Sep 2008 07:15:14 -0700 (PDT)
Received: by 10.86.76.4 with HTTP; Tue, 16 Sep 2008 07:15:14 -0700 (PDT)
Message-ID: <359a92830809160715l3e690f1ehd78234173cad34fd@mail.gmail.com>
Date: Tue, 16 Sep 2008 10:15:14 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Issues with Special Characters
In-Reply-To: <19512277.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9129_5428738.1221574514842"
References: <19511428.post@talk.nabble.com>
	 <359a92830809160645u2b661f65uc8e59358f7c29b9f@mail.gmail.com>
	 <19512277.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9129_5428738.1221574514842
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I question whether your example actually searches what you
think. What I suggest is that you get a copy of Luke and
look at what your queries actually produce. That'll give you
a much better idea of what happens under the covers.

Also, query.toString() is your friend. Try printing out your
queries (again, I recommend a small test program) to get
a better feel for what each analyzer does to your queries.

Of course you have to escape the ':' character when it does
not refer to a field. How else could you imagine that the
query parser can distinguish between a field designation
and a field value? Consider the query:

f:stuff g:morestuff

The parser has to understand that the ':' separates the
field 'f' from the value 'stuff' and that 'g' is another field. So
if you want to parse
f:stuff g:somemore:stuff
the parser gets all confused by whether the ':' between
somemore and stuff is a field delimiter or a value, unless
it's escaped.

Best
Erick

On Tue, Sep 16, 2008 at 9:49 AM, miztaken <justjunktome@gmail.com> wrote:

>
> Hi there,
> I will check that out but what do you suggest for searching??
> without escaping works for query string "fw: fyi.dat" but i have to escape
> :
> char for query string "fw:" so i am having two cases?
>
> Please help me
>
>
>
>
> Erick Erickson wrote:
> >
> > You can easily answer the questions about what WhitespaceTokenizer
> > produces by getting a copy of Luke and looking at your index. Or writing
> > a really simple test program that prints out tokens.
> >
> > At the bottom of this page is a list of special characters for escaping:
> > http://lucene.apache.org/java/docs/queryparsersyntax.html
> >
> > Best
> > Erick
> >
> > On Tue, Sep 16, 2008 at 9:05 AM, miztaken <justjunktome@gmail.com>
> wrote:
> >
> >>
> >> Hi there,
> >> I am using WhiteSpaceAnalyser to index documents. I have used this
> >> because
> >> i
> >> need to split tokens based on space only. Also Tokensized=true
> >> While indexing what does it do with special characters like + - && || !
> (
> >> )
> >> { } [ ] ^ " ~ * ? : \, will these characters be indexed or will be
> >> chopped
> >> off? I am confused about this.
> >>
> >> Now i am having problem while searching as well..
> >> for query strings like "jason dartling (e-mail)" and "re: fyi.dat", i
> >> don't
> >> have to escape the special characters ( , ) and : but for input such as
> >> "re:" queryParser is producing error so i have escaped characters here.
> >> So it seems like i have two cases to deal with..
> >> Can anyone suggest me one generic way to deal with both the cases?
> >>
> >> Basically how to index and search string with escape characters will be
> >> my
> >> generalized question?
> >>
> >>
> >> Please help me
> >> miztaken
> >>
> >>
> >>
> >>
> >>
> >> --
> >> View this message in context:
> >>
> http://www.nabble.com/Issues-with-Special-Characters-tp19511428p19511428.html
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Issues-with-Special-Characters-tp19511428p19512277.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_9129_5428738.1221574514842--

From java-user-return-36203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 16 14:56:19 2008
Return-Path: <java-user-return-36203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41029 invoked from network); 16 Sep 2008 14:56:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Sep 2008 14:56:19 -0000
Received: (qmail 89977 invoked by uid 500); 16 Sep 2008 14:56:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89955 invoked by uid 500); 16 Sep 2008 14:56:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89944 invoked by uid 99); 16 Sep 2008 14:56:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 07:56:08 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [195.47.247.21] (HELO csmtp1.b-one.net) (195.47.247.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 14:55:09 +0000
Received: from [10.10.6.174] (195-67-112-74.customer.telia.com [195.67.112.74])
	by csmtp1.b-one.net (Postfix) with ESMTP id 4E3E79883033
	for <java-user@lucene.apache.org>; Tue, 16 Sep 2008 16:55:09 +0200 (CEST)
Message-Id: <399F19DA-B2AA-4FAB-A4E6-4570304EFD4A@findwise.se>
From: Tobias Larsson Hult <tobias.larsson.hult@findwise.se>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=Apple-Mail-156-604056907
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Using separate index for each user
Date: Tue, 16 Sep 2008 16:55:09 +0200
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-156-604056907
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit

Hi,

We're thinking of using Lucene to integrate search in a backup service  
application. The background is that we have a bunch of users using a  
backup service, and we want them to be able to search their own, and  
only their own, backups.

The total amount of data that's being backed up is very large (size in  
terabyte). Even though the index will probably be smaller due to only  
indexing relevant fields, it is still to much to incorporate in one  
index. But since a user will only search in his/her own files we're  
thinking of creating one index for each user. There will be a lot of  
indexes of course but each index will not span to more than a couple  
of gigabytes at the most.

So when a user searches or adds new content to the backup we will open  
up his/her index and to a search/update in that particular index. That  
way, each query/update should not be so performance intense.

Does this sound like a reasonable solution?  Of course this means  
creating a lot of IndexReaders/Writers but I prefer that to searching  
in a huge index everytime when a user only wants to search in a slice  
of the total index.

Best Regards,
Tobias Larsson Hult


--Apple-Mail-156-604056907--

From java-user-return-36204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 16 15:18:42 2008
Return-Path: <java-user-return-36204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59394 invoked from network); 16 Sep 2008 15:18:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Sep 2008 15:18:41 -0000
Received: (qmail 41868 invoked by uid 500); 16 Sep 2008 15:18:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41833 invoked by uid 500); 16 Sep 2008 15:18:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41818 invoked by uid 99); 16 Sep 2008 15:18:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 08:18:30 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.132.241 as permitted sender)
Received: from [209.85.132.241] (HELO an-out-0708.google.com) (209.85.132.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 15:17:32 +0000
Received: by an-out-0708.google.com with SMTP id c37so263404anc.49
        for <java-user@lucene.apache.org>; Tue, 16 Sep 2008 08:17:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=4vwwfye86FQBGYpzlB3oiBO8aQLpLYDjn17TOg/v8mk=;
        b=AkoT//M5TELrKfYDFooX4quFsSlE69yFZg37aLoDLNwDr04QRC3S09y49pRMi699/S
         VJjiVAxcVj3AGJkvCIRoSakI7W7XC5yWv3JCaLBk//hOTYom20vJQ8d1Ki6+2fW7RvM6
         GcVZrr3byjJFiQYpc5C/OgUWncNl3D2zVCNDY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=cu2ZrObBoBtQjHWByY99oN5IyEDP+d5gUv+Q62BWiUjbxoMpdG6VoPRx9iOj3n/lpC
         bMUvYbjr+kGYjj7EC4xt+iJa3ntuNk53hqco+4gm98jIZKmucJJr5EoG6hsFUUAhfPzr
         w23ZGOGuC9yeq7qdwCozWZhNz/nLbYSZEiYi8=
Received: by 10.86.74.15 with SMTP id w15mr858257fga.42.1221578266371;
        Tue, 16 Sep 2008 08:17:46 -0700 (PDT)
Received: by 10.86.76.4 with HTTP; Tue, 16 Sep 2008 08:17:46 -0700 (PDT)
Message-ID: <359a92830809160817x623a89f7t20ac14353871b534@mail.gmail.com>
Date: Tue, 16 Sep 2008 11:17:46 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using separate index for each user
In-Reply-To: <399F19DA-B2AA-4FAB-A4E6-4570304EFD4A@findwise.se>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9741_11860702.1221578266372"
References: <399F19DA-B2AA-4FAB-A4E6-4570304EFD4A@findwise.se>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9741_11860702.1221578266372
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The main arguments against using many separate indexes are
1> search warmup time. That is, each time you open an index
     the first few queries take much longer than subsequent searches.
2> Managing a bazillion indexes is non-trivial.


That said, in your particular case these may not apply. I guess the
piece of information that really counts is "how often do you expect
to update/search a given index"? You could avoid the warmup issue
by keeping an index open for some period of time after the first
search on the assumption that the user is going to make multiple
searches rather than just one. I'm sure there are other tricks
you can try.

So, how often do you expect
1> users to backup date
2> users to query data?
and what is acceptable search response time? and are your
users willing to live with a significant delay on the first couple
of queries?

I'd only be comfortable with choosing an approach if I tried
it out with a single computer's content and generated a few
stats....

Best
Erick

On Tue, Sep 16, 2008 at 10:55 AM, Tobias Larsson Hult <
tobias.larsson.hult@findwise.se> wrote:

> Hi,
>
> We're thinking of using Lucene to integrate search in a backup service
> application. The background is that we have a bunch of users using a backup
> service, and we want them to be able to search their own, and only their
> own, backups.
>
> The total amount of data that's being backed up is very large (size in
> terabyte). Even though the index will probably be smaller due to only
> indexing relevant fields, it is still to much to incorporate in one index.
> But since a user will only search in his/her own files we're thinking of
> creating one index for each user. There will be a lot of indexes of course
> but each index will not span to more than a couple of gigabytes at the most.
>
> So when a user searches or adds new content to the backup we will open up
> his/her index and to a search/update in that particular index. That way,
> each query/update should not be so performance intense.
>
> Does this sound like a reasonable solution?  Of course this means creating
> a lot of IndexReaders/Writers but I prefer that to searching in a huge index
> everytime when a user only wants to search in a slice of the total index.
>
> Best Regards,
> Tobias Larsson Hult
>
>

------=_Part_9741_11860702.1221578266372--

From java-user-return-36205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 16 16:11:16 2008
Return-Path: <java-user-return-36205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11262 invoked from network); 16 Sep 2008 16:11:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Sep 2008 16:11:16 -0000
Received: (qmail 60239 invoked by uid 500); 16 Sep 2008 16:11:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60209 invoked by uid 500); 16 Sep 2008 16:11:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60187 invoked by uid 99); 16 Sep 2008 16:11:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 09:11:04 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.60] (HELO web50306.mail.re2.yahoo.com) (206.190.38.60)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 16 Sep 2008 16:10:03 +0000
Received: (qmail 90482 invoked by uid 60001); 16 Sep 2008 16:10:33 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=DhEUA+hXVZN94sXYzWzgqdAh1PyEJNTDeO19jKQxgOd6ggsWTuMC8Im6xVPxq76diRlK38v00cVXWj1yCPXAT+jwAv4xNWt7P8iQZgW9g7oANzfe5cpMNAgLWASZTEhhlIQMicNOwoMXSqnH0s++pUjOMETsdKqhgtY5hTzAwO0=;
X-YMail-OSG: 0PUg1_4VM1kDSlr64mRCo8SczguLDe08T_19t0Lz80MUm_Q7bSSmNVxIwwLeixmBiWpSBS8oQttEQ7L25Ma0Jdt2yfZO.Ql.gJNv_cBb6F4_NzvWz7kDeQfSNsanvLUylZuMXpLMC7PI9iIlVEnVowo-
Received: from [167.206.188.3] by web50306.mail.re2.yahoo.com via HTTP; Tue, 16 Sep 2008 09:10:33 PDT
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Tue, 16 Sep 2008 09:10:33 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Using separate index for each user
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <955596.89169.qm@web50306.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Tobias,

That's the approach I took with Simpy.com and it's been working well for several years now.  You'll have to keep track of searchers and close them when appropriate, of course.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Tobias Larsson Hult <tobias.larsson.hult@findwise.se>
> To: java-user@lucene.apache.org
> Sent: Tuesday, September 16, 2008 10:55:09 AM
> Subject: Using separate index for each user
> 
> Hi,
> 
> We're thinking of using Lucene to integrate search in a backup service  
> application. The background is that we have a bunch of users using a  
> backup service, and we want them to be able to search their own, and  
> only their own, backups.
> 
> The total amount of data that's being backed up is very large (size in  
> terabyte). Even though the index will probably be smaller due to only  
> indexing relevant fields, it is still to much to incorporate in one  
> index. But since a user will only search in his/her own files we're  
> thinking of creating one index for each user. There will be a lot of  
> indexes of course but each index will not span to more than a couple  
> of gigabytes at the most.
> 
> So when a user searches or adds new content to the backup we will open  
> up his/her index and to a search/update in that particular index. That  
> way, each query/update should not be so performance intense.
> 
> Does this sound like a reasonable solution?  Of course this means  
> creating a lot of IndexReaders/Writers but I prefer that to searching  
> in a huge index everytime when a user only wants to search in a slice  
> of the total index.
> 
> Best Regards,
> Tobias Larsson Hult


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 16 16:15:53 2008
Return-Path: <java-user-return-36206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14048 invoked from network); 16 Sep 2008 16:15:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Sep 2008 16:15:53 -0000
Received: (qmail 71560 invoked by uid 500); 16 Sep 2008 16:15:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71396 invoked by uid 500); 16 Sep 2008 16:15:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71385 invoked by uid 99); 16 Sep 2008 16:15:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 09:15:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.62] (HELO web50308.mail.re2.yahoo.com) (206.190.38.62)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 16 Sep 2008 16:14:41 +0000
Received: (qmail 10300 invoked by uid 60001); 16 Sep 2008 16:15:12 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=sjU46aEV8f2/iArCiccRWh2yUQb094ASe9W4xcPdEU/4oGfAH+GRHfV1Rbhu7CC2WDYRuPHU1Oe4JBXEreJZX0Kfp4DNjCpipQ80ASZwQARsedEXEyNLsMmpPcuipma0+4YNAr9Z6ezrYlgwX9m9aTRzdNmc0bf4NdlweEys3pg=;
X-YMail-OSG: Fir3L1YVM1maTQ3Eo0czdKHWVn_6Bp13yGIYbxfQgMpZ7wn0qqMI9i1RU5XCDXIMXFhJFQVtDUX13sWwkxaSrMUXrWDkL2CsnJ7CiJqzWqyZQIWYU0dEZ1vQVlDI3MIsGiKaiHGKAbhQ.JJq.OqsjgY-
Received: from [167.206.188.3] by web50308.mail.re2.yahoo.com via HTTP; Tue, 16 Sep 2008 09:15:11 PDT
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Tue, 16 Sep 2008 09:15:11 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Phrase Query
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <159532.8814.qm@web50308.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Are the terms stopwords?

 
Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Cam Bazz <cambazz@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, September 16, 2008 1:33:48 AM
> Subject: Phrase Query
> 
> Hello,
> 
> Lets say I have two documents, both containing field F.
> 
> document 0 has the string "a b" as F
> document 1 has the string "b a" as F
> 
> I am trying to make a phrasequery like:
> 
>         PhraseQuery pq = new PhraseQuery();
>         pq.add(new Term("F", "a"));
>         pq.add(new Term("F", "b"));
>         pq.setSlop(2);
> 
> and then search. however I was not successful finding anything.
> 
> any ideas?
> 
> Best Regards,
> -C.B.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 16 16:21:12 2008
Return-Path: <java-user-return-36207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15968 invoked from network); 16 Sep 2008 16:21:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Sep 2008 16:21:12 -0000
Received: (qmail 77459 invoked by uid 500); 16 Sep 2008 16:21:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77430 invoked by uid 500); 16 Sep 2008 16:21:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77418 invoked by uid 99); 16 Sep 2008 16:21:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 09:21:01 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 16:20:03 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KfdI3-0006bZ-N8
	for java-user@lucene.apache.org; Tue, 16 Sep 2008 09:20:35 -0700
Message-ID: <19515241.post@talk.nabble.com>
Date: Tue, 16 Sep 2008 09:20:35 -0700 (PDT)
From: miztaken <justjunktome@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Issues with Special Characters
In-Reply-To: <359a92830809160715l3e690f1ehd78234173cad34fd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: justjunktome@gmail.com
References: <19511428.post@talk.nabble.com> <359a92830809160645u2b661f65uc8e59358f7c29b9f@mail.gmail.com> <19512277.post@talk.nabble.com> <359a92830809160715l3e690f1ehd78234173cad34fd@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi, 
I tested sample application with Luke as well.
I am using .NEt Version of Lucene (2.0.0.4) and i think i am getting error
due to that.

When i tested my queries with luke then its working fine and getting me
output as desired but then i used lucene API available for .NET then its
producing error. 

I have a field name key and i have inserted 4 documents with following
values
fw:
fw: fyi.msg
hatti ghoda
hatti ghoda (e-mail)

in luke i did following queries:

Q1: key:"fw\: fyi.msg"   //with escape char  //OK
Q2: key:"fw: fyi.msg"   //without escape char //OK
Q3: key:fw\:              //with escape char //OK
Q4: key:fw:            //without escape char //NOT OK
Q5: key:"hatti ghoda (e-mail)"  //without escape char //OK
Q6: key:"hatti ghoda \(e\-mail\)"   //with escape char //OK

And with .NET API the behaviour is different. 
Q1 doesnt work 
Q2 works
Q3 works
Q4 throws exception
Q5 works
Q6 doesnt work

Any suggestions?



-- 
View this message in context: http://www.nabble.com/Issues-with-Special-Characters-tp19511428p19515241.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 16 16:28:57 2008
Return-Path: <java-user-return-36208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21502 invoked from network); 16 Sep 2008 16:28:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Sep 2008 16:28:56 -0000
Received: (qmail 87703 invoked by uid 500); 16 Sep 2008 16:28:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87666 invoked by uid 500); 16 Sep 2008 16:28:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87655 invoked by uid 99); 16 Sep 2008 16:28:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 09:28:46 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,NORMAL_HTTP_TO_IP,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 16:27:47 +0000
Received: by gxk6 with SMTP id 6so18664623gxk.5
        for <java-user@lucene.apache.org>; Tue, 16 Sep 2008 09:28:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=tLeuM5Q43kAHJ8JD5tkcTHEGs9QQp3kZM7z0Dw7Dvkc=;
        b=dvqSIS0/NuqcHJIBfPJFLoUOd6wSwdsScKU1KZsrmBO/Uq7BmXNrnXo61znyPZObW0
         g3aRUSUnrBBIUITHcuMZ6RFcMJl/ht9XXPyWfL90NW6p10IGk3QPD6iSiIE7JNLYnhXS
         mKQWwZ5zBj0ZxH5Q+nnsQ7M/9nb2o5/Nz9EXc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=r8lBf+yR/4cM1IlXaYiMySnBnjw/0tK91jk/R+8eOxRBSYu+7X/d7Qo99+aYJR7ksD
         tVJuFHVwd6YlE82ybg18Jt1cwss4SPKxDdRw0QzfPPEZcz6I34e93flvGY26pMbI/wbi
         pZ4d26WoL9uye9SWErD70+VBcz65bhPhjU4H8=
Received: by 10.86.97.7 with SMTP id u7mr939913fgb.29.1221582497831;
        Tue, 16 Sep 2008 09:28:17 -0700 (PDT)
Received: by 10.86.76.4 with HTTP; Tue, 16 Sep 2008 09:28:17 -0700 (PDT)
Message-ID: <359a92830809160928q70cc257fs23326fd277237030@mail.gmail.com>
Date: Tue, 16 Sep 2008 12:28:17 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Issues with Special Characters
In-Reply-To: <19515241.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10513_12885002.1221582497813"
References: <19511428.post@talk.nabble.com>
	 <359a92830809160645u2b661f65uc8e59358f7c29b9f@mail.gmail.com>
	 <19512277.post@talk.nabble.com>
	 <359a92830809160715l3e690f1ehd78234173cad34fd@mail.gmail.com>
	 <19515241.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10513_12885002.1221582497813
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Um, ask over on the .NET user group?

Erick

On Tue, Sep 16, 2008 at 12:20 PM, miztaken <justjunktome@gmail.com> wrote:

>
> Hi,
> I tested sample application with Luke as well.
> I am using .NEt Version of Lucene (2.0.0.4) and i think i am getting error
> due to that.
>
> When i tested my queries with luke then its working fine and getting me
> output as desired but then i used lucene API available for .NET then its
> producing error.
>
> I have a field name key and i have inserted 4 documents with following
> values
> fw:
> fw: fyi.msg
> hatti ghoda
> hatti ghoda (e-mail)
>
> in luke i did following queries:
>
> Q1: key:"fw\: fyi.msg"   //with escape char  //OK
> Q2: key:"fw: fyi.msg"   //without escape char //OK
> Q3: key:fw\:              //with escape char //OK
> Q4: key:fw:            //without escape char //NOT OK
> Q5: key:"hatti ghoda (e-mail)"  //without escape char //OK
> Q6: key:"hatti ghoda \(e\-mail\)"   //with escape char //OK
>
> And with .NET API the behaviour is different.
> Q1 doesnt work
> Q2 works
> Q3 works
> Q4 throws exception
> Q5 works
> Q6 doesnt work
>
> Any suggestions?
>
>
>
> --
> View this message in context:
> http://www.nabble.com/Issues-with-Special-Characters-tp19511428p19515241.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_10513_12885002.1221582497813--

From java-user-return-36209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 16 18:58:38 2008
Return-Path: <java-user-return-36209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49214 invoked from network); 16 Sep 2008 18:58:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Sep 2008 18:58:38 -0000
Received: (qmail 31067 invoked by uid 500); 16 Sep 2008 18:58:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31027 invoked by uid 500); 16 Sep 2008 18:58:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30965 invoked by uid 99); 16 Sep 2008 18:58:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 11:58:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 18:57:25 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 6496871C32D; Tue, 16 Sep 2008 11:57:58 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 5FD3E71C2B4
	for <java-user@lucene.apache.org>; Tue, 16 Sep 2008 11:57:58 -0700 (PDT)
Date: Tue, 16 Sep 2008 11:57:58 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher.search
In-Reply-To: <48CF2124.3090501@nuix.com>
Message-ID: <Pine.LNX.4.62.0809161143560.12858@radix.cryptio.net>
References: <682882.35954.qm@web50312.mail.re2.yahoo.com> <48CF2124.3090501@nuix.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Related topic: what if we need all the hits and not just the first 100?

Solr has a FAQ related to this that i think also applies here..

>How can I get ALL the matching documents back? ... How can I return an 
>unlimited number of rows?
>
>This is impractical in most cases. People typically only want to do this 
>when they know they are dealing with an index whose size guarantees the 
>result sets will be always be small enough that they can feasibly be 
>transmitted in a manageable amount -- but if that's the case just specify 
>what you consider a "manageable amount" as your rows param and get the 
>best of both worlds (all the results when your assumption is right, and a 
>sanity cap on the result size if it turns out your assumptions are wrong) 

: TopDocCollector has a couple of drawbacks, one is that you need to know the
: number of hits before the query, and you can't overallocate as it will run you
: out of memory.  I take it this is the suggested workaround for that:

I think the suggested workarround at the moment is that if you *REALLY* 
want all results, you write your own HitCollector.  TopDocCollector is for 
collecting the top N docs ... if your N is "infinity" you don't need it.

: Or do we make a replacement for TopDocCollector which doesn't have this
: drawback, and uses an alternative for PriorityQueue which allows its array to
: grow?

I don't see that as being much better -- you still wouldn't want to pass 
MAX_INT because waht if there really are MAX_INT-42 results?  do you want 
the array to grow that big?  if you are prepared to deal with that many 
results, you might as well preallocate the array so that you dont' wind up 
with two ginormous arrays during the "grow" steps.

I suppose there's some "middle" ground though ... a collector where you 
say "i expect to have less then N results, so allocate a priority queue 
that big and start with that, but i'm willing to accept (and want) up to 
the first M results, so grow the queue to M if needed"

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 16 21:00:36 2008
Return-Path: <java-user-return-36210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45396 invoked from network); 16 Sep 2008 21:00:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Sep 2008 21:00:36 -0000
Received: (qmail 95442 invoked by uid 500); 16 Sep 2008 21:00:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95397 invoked by uid 500); 16 Sep 2008 21:00:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95376 invoked by uid 99); 16 Sep 2008 21:00:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 14:00:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 20:59:29 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 9B3C771C3F9; Tue, 16 Sep 2008 13:59:31 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 8A3CB71C39B
	for <java-user@lucene.apache.org>; Tue, 16 Sep 2008 13:59:31 -0700 (PDT)
Date: Tue, 16 Sep 2008 13:59:31 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: RE:  Re: Replacing FAST functionality atsesam.no-ShingleFilter+exactmatching
In-Reply-To: <1221472589.8908.255.camel@localhost>
Message-ID: <Pine.LNX.4.62.0809161347550.12144@radix.cryptio.net>
References: <1221067074.8908.81.camel@localhost> 
 <9294E20AED46934EA459020706463F94EF3830@SUEXCL-02.ad.syr.edu>
 <1221472589.8908.255.camel@localhost>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: The query parser expects you to assign positionIncrement=0 for synonyms
: in this manner.

correct.

: The one kludge i see is that the QueryParser expects the total positions
: found to be greater than or equal to one. It might not be intentionally
: dealing with the total position count being zero. But the situation
: where you have many synonyms is the same as having one token and it
: having many synonyms, so positionCount=0 == positionCount=1.

there has definitely been some wonkiness in various places in the code 
relating to the first token not having a positionIncremenet of "1" ... i 
don't rememebr the details, and maybe it works fine even if every token in 
a stream is "0" but the safe thing to do is make sure the first token has 
a positionIncrement of "1" and the 'synonyms" after that use an increment 
of "0"

This is important not only in case the Lucene internals freak out when 
the "first" token has an increment of "0" but also because you have no way 
of knowing if the first token you produce is really the first token being 
given to the IndexWriter (or QueryParser or what have you)

To be a well behave TokenStream producer you can't assume you opperate in 
a vacume:

1) multiple "Field" instances with the same field name could be added to a 
document, with an Analyzer that uses your Filter but doesn't define any 
particular positionIncrementGap ... if every token you produce has an 
increment of "0" all the tokens from the second Field instance will have 
the same resulting positions as all the tokens from the first Field 
instance (ie: they will all be considered synonyms of each other)

2) I could write an Analyzer that uses your Filter but always adds a 
starting "marker token" to the front of the TokenStream and a differnt 
ending marker token to the end of hte stream (for doing creative things 
with SpanNearQueries) ... if all the tokens you produce have a 
positionIncrement of 0, the result would be that they would be considered 
synonyms of the starting marker token.

: I would think that both should lead to a BooleanQuery being constructed
: by the QueryParser. (But the synonyms generated by the ShingleFilter are
: in fact phrases so maybe it is wiser to use the MultiPhraseQuery.)

If QueryParser gives an Analyzer a chunk of text, and it produces a stream 
of tokens that all exist at the same position, it produces a a 
BooleanQuery, if they are *all* at differnet positions it produces a 
PhraseQuery, if *some* are at the same position, it produces a 
MultiPhraseQuery ... this is fairly fundamental to how QueryParser works, 
and can be relied upon.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 17 00:41:34 2008
Return-Path: <java-user-return-36211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32395 invoked from network); 17 Sep 2008 00:41:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2008 00:41:34 -0000
Received: (qmail 35646 invoked by uid 500); 17 Sep 2008 00:41:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35617 invoked by uid 500); 17 Sep 2008 00:41:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35604 invoked by uid 99); 17 Sep 2008 00:41:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 17:41:24 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 00:40:25 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Kfl6H-0000lw-1A
	for java-user@lucene.apache.org; Tue, 16 Sep 2008 17:40:57 -0700
Message-ID: <19523435.post@talk.nabble.com>
Date: Tue, 16 Sep 2008 17:40:57 -0700 (PDT)
From: rahul_k123 <vishnudeepak@gmail.com>
To: java-user@lucene.apache.org
Subject: IndexReader.isCurrent()
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: vishnudeepak@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


what is the behaviour of IndexReader.current() if i modify the index
manually? Will it returns false?

One more question  

The index is on Linux

if my indexReader is open and some of the files in index are deleted, what
is the behaviour of this?

Will it give any exception like File Not found??

Any help is appreciated

Thanks
Rahul.


-- 
View this message in context: http://www.nabble.com/IndexReader.isCurrent%28%29-tp19523435p19523435.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 17 03:14:07 2008
Return-Path: <java-user-return-36212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98575 invoked from network); 17 Sep 2008 03:14:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2008 03:14:06 -0000
Received: (qmail 66874 invoked by uid 500); 17 Sep 2008 03:13:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66842 invoked by uid 500); 17 Sep 2008 03:13:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66831 invoked by uid 99); 17 Sep 2008 03:13:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 20:13:55 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO web1.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 03:12:54 +0000
Received: from [192.168.222.60] (unknown [192.168.222.60])
	by web1.nuix.com.au (Postfix) with ESMTP id D61044ED924
	for <java-user@lucene.apache.org>; Wed, 17 Sep 2008 13:13:03 +1000 (EST)
Message-ID: <48D075DD.5050407@nuix.com>
Date: Wed, 17 Sep 2008 13:13:33 +1000
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher.search
References: <682882.35954.qm@web50312.mail.re2.yahoo.com> <48CF2124.3090501@nuix.com> <Pine.LNX.4.62.0809161143560.12858@radix.cryptio.net>
In-Reply-To: <Pine.LNX.4.62.0809161143560.12858@radix.cryptio.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Chris Hostetter wrote:
> : Or do we make a replacement for TopDocCollector which doesn't have
> this : drawback, and uses an alternative for PriorityQueue which
> allows its array to : grow?
> 
> I don't see that as being much better -- you still wouldn't want to
> pass MAX_INT because waht if there really are MAX_INT-42 results?  do
> you want the array to grow that big?  if you are prepared to deal
> with that many results, you might as well preallocate the array so
> that you dont' wind up with two ginormous arrays during the "grow"
> steps.
> 
> I suppose there's some "middle" ground though ... a collector where
> you say "i expect to have less then N results, so allocate a priority
> queue that big and start with that, but i'm willing to accept (and
> want) up to the first M results, so grow the queue to M if needed"

Well, it turns out the theoretical maximum for the Swing case is not 
Integer.MAX_VALUE, but is actually somewhere around 200 million due to 
limitations in Swing itself (JTable inside a JScrollPane, if row height 
times row count exceeds Integer.MAX_VALUE.)

In reality memory runs out sooner, which is why I was considering 
on-disk storage of the topdocs.

But even if the user doesn't want to *see* the items which come back, 
quite often they do want to Select All and perform some operation (e.g. 
tag them, copy the data to somewhere.)  So regardless of the page size 
or the amount of data visible at any point in time, there is always the 
need to get the "set of every match" for any given search eventually.

Maybe others have different opinions as they are working on webapps, 
where the user is already expecting paging before they even see the 
results page.

Daniel


-- 
Daniel Noll                            Forensic and eDiscovery Software
Senior Developer                              The world's most advanced
Nuix                                                email data analysis
http://nuix.com/                                and eDiscovery software

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 17 06:40:23 2008
Return-Path: <java-user-return-36213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16018 invoked from network); 17 Sep 2008 06:40:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2008 06:40:22 -0000
Received: (qmail 30713 invoked by uid 500); 17 Sep 2008 06:40:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30681 invoked by uid 500); 17 Sep 2008 06:40:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30664 invoked by uid 99); 17 Sep 2008 06:40:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Sep 2008 23:40:10 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aditigupta20@gmail.com designates 209.85.142.191 as permitted sender)
Received: from [209.85.142.191] (HELO ti-out-0910.google.com) (209.85.142.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 06:39:12 +0000
Received: by ti-out-0910.google.com with SMTP id b8so1793176tic.11
        for <java-user@lucene.apache.org>; Tue, 16 Sep 2008 23:39:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=lGQFXDFyO3tRMW/MeffzXGRySlybg7nKsyDymHAqHQQ=;
        b=HMjlbOTspYeOBhqLTjZlytsfbqVQzjL6eG2gcrIquSWKyGgeWrreY9W3zwiLN3WDhK
         ua/AKD3wxGnlKYxR8nAe4rduMMT/jH+2ItnSDuF0O5iuyIWsO8P9JPayr96Hj8Z11Qy0
         4fhvO4EvVQKOaM0yPtLhSfS/ZPEns5keTFAnM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=K4uMySRzX65piYuHTh5rZet4nhPPwHnML6X356Ex3kG8WR0w/i3Rkaw/fLa6RZuc03
         brWlonRkH/bR17pQDiW/ZOxrtMBYA2i0TNvnWC0vuiRgLAqd3LoCpprVac+x7R/0y/xL
         146sPfqGDMa0v/uHnf1RVSQpjkGj/l6b/tNzs=
Received: by 10.110.68.4 with SMTP id q4mr2706375tia.18.1221633567207;
        Tue, 16 Sep 2008 23:39:27 -0700 (PDT)
Received: by 10.110.109.13 with HTTP; Tue, 16 Sep 2008 23:39:27 -0700 (PDT)
Message-ID: <6fc71b230809162339l6cb107c1w313fc29b813bdeb6@mail.gmail.com>
Date: Wed, 17 Sep 2008 12:09:27 +0530
From: "Aditi Goyal" <aditigupta20@gmail.com>
To: java-user@lucene.apache.org
Subject: jre installing problem in ubuntu
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_33306_9093840.1221633567210"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_33306_9093840.1221633567210
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All,

I'm running Ubuntu Linux 8.04, which has the sun jre installed in the system
area (/usr/lib/jvm/java-6-sun-1.6.0.06/jre/lib/).

I've manually installed an updated JRE (jre1.6.0_07) into /usr/local area
(/usr/local/lib/jre1.6.0_07/lib/), and my PATH environment variable is
updated to use the new jre.

A "java - version" confirms it:

java version "1.6.0_07"
Java(TM) SE Runtime Environment (build 1.6.0_07-b06)
Java HotSpot(TM) Server VM (build 10.0-b23, mixed mode)

How can I tell pylucene to use the new JRE? I've tried something like this:

classpath = lucene.CLASSPATH + ':' + newclasspath (where newclasspath =
"/usr/local/lib/jre1.6.0_07/lib/i386:/usr/local/lib/jre1.6.0_07/lib/i386/server")
lucene.initVM(classpath)

There is no error, but the running program still seems to use the older jre.

Any ideas...?

Thanks.
Aditi

------=_Part_33306_9093840.1221633567210--

From java-user-return-36214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 17 08:16:39 2008
Return-Path: <java-user-return-36214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65372 invoked from network); 17 Sep 2008 08:16:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2008 08:16:39 -0000
Received: (qmail 17873 invoked by uid 500); 17 Sep 2008 08:16:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17836 invoked by uid 500); 17 Sep 2008 08:16:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17825 invoked by uid 99); 17 Sep 2008 08:16:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 01:16:28 -0700
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 08:15:27 +0000
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1KfsCb-0002Ub-Vk
	for java-user@lucene.apache.org; Wed, 17 Sep 2008 08:15:57 +0000
Received: from home.schibsted.no ([80.91.33.33])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 17 Sep 2008 08:15:57 +0000
Received: from mick by home.schibsted.no with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 17 Sep 2008 08:15:57 +0000
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Mck <mick@semb.wever.org>
Subject:  Re: Replacing FAST functionality
	atsesam.no-ShingleFilter+exactmatching
Date:  Wed, 17 Sep 2008 10:17:38 +0200
Lines: 47
Message-ID:  <1221636848.17780.31.camel@localhost>
References:  <1221067074.8908.81.camel@localhost>
	 <9294E20AED46934EA459020706463F94EF3830@SUEXCL-02.ad.syr.edu>
	 <1221472589.8908.255.camel@localhost>
	 <Pine.LNX.4.62.0809161347550.12144@radix.cryptio.net>
Mime-Version:  1.0
Content-Type:  multipart/signed; micalg=pgp-sha1; protocol="application/pgp-signature"; boundary="=-AmtvTyfS+H7qpGi6Myzk"
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: home.schibsted.no
In-Reply-To: <Pine.LNX.4.62.0809161347550.12144@radix.cryptio.net>
X-Mailer: Evolution 2.22.3.1 
Sender: news <news@ger.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org

--=-AmtvTyfS+H7qpGi6Myzk
Content-Type: text/plain
Content-Transfer-Encoding: quoted-printable

Chris,

> the safe thing to do is make sure the first token has=20
> a positionIncrement of "1" and the 'synonyms" after that use an
> increment of "0"

Yes it makes sense to have at minimum the first token with
positionIncrement=3D1
I didn't see outside "the vacuum" at all, thank you for explaining.

Does it make sense for me to rewrite the ShingleFilter patch to ensure
the first token returned always has positionIncrement=3D1 regardless if
enablePositions is true or false?

(i'll test too that BooleanQuery works as presumed in my case...)

Would such a rewrite of the ShingleFilter patch be a substitute for the
custom Analyzer you talk about?
(i'm pushing to keep any patch restricted to the ShingleFilter since my
gut feeling is still that's where the change in behaviour is).

~mck

--=20
"Between two evils, I always pick the one I never tried before." Mae
West=20
| semb.wever.org | sesat.no | sesam.no |

--=-AmtvTyfS+H7qpGi6Myzk
Content-Type: application/pgp-signature; name=signature.asc
Content-Description: This is a digitally signed message part

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.9 (GNU/Linux)

iEYEABECAAYFAkjQsvAACgkQkdPrePiuutNLBACbBKM57MaY0IFn1uIeqjIrik2y
RIUAoLeyHlH63hFhKHI6J592NOUTrSCL
=ENPO
-----END PGP SIGNATURE-----

--=-AmtvTyfS+H7qpGi6Myzk--



From java-user-return-36215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 17 09:41:06 2008
Return-Path: <java-user-return-36215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15359 invoked from network); 17 Sep 2008 09:41:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2008 09:41:06 -0000
Received: (qmail 31526 invoked by uid 500); 17 Sep 2008 09:40:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31415 invoked by uid 500); 17 Sep 2008 09:40:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31404 invoked by uid 99); 17 Sep 2008 09:40:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 02:40:53 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.82.237] (HELO wx-out-0506.google.com) (66.249.82.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 09:39:53 +0000
Received: by wx-out-0506.google.com with SMTP id h28so1235736wxd.20
        for <java-user@lucene.apache.org>; Wed, 17 Sep 2008 02:40:14 -0700 (PDT)
Received: by 10.70.8.12 with SMTP id 12mr2514190wxh.89.1221644413952;
        Wed, 17 Sep 2008 02:40:13 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id i10sm1391087wxd.36.2008.09.17.02.40.12
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 17 Sep 2008 02:40:13 -0700 (PDT)
Message-Id: <E3D3D9FC-E808-49E8-9446-98947CE731D0@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <19523435.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: IndexReader.isCurrent()
Date: Wed, 17 Sep 2008 05:40:11 -0400
References: <19523435.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


rahul_k123 wrote:

> what is the behaviour of IndexReader.current() if i modify the index
> manually? Will it returns false?

What do you mean by "manually"?

Once an IndexWriter commits a change to the index after the  
IndexReader was opened, then IndexReader.isCurrent() will return false.

> One more question
>
> The index is on Linux
>
> if my indexReader is open and some of the files in index are  
> deleted, what
> is the behaviour of this?
>
> Will it give any exception like File Not found??

Assuming it's a local filesystem on Linux (eg, not NFS) then if  
IndexReader has the file open and you delete it from the filesystem,  
that IndexReader is unaffected.

But, you should not delete files yourself -- IndexWriter does that for  
you at the right times.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 17 09:42:00 2008
Return-Path: <java-user-return-36216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15920 invoked from network); 17 Sep 2008 09:42:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2008 09:42:00 -0000
Received: (qmail 33774 invoked by uid 500); 17 Sep 2008 09:41:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33619 invoked by uid 500); 17 Sep 2008 09:41:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33602 invoked by uid 99); 17 Sep 2008 09:41:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 02:41:49 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 09:40:47 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KftXD-0001n1-GV
	for java-user@lucene.apache.org; Wed, 17 Sep 2008 02:41:19 -0700
Message-ID: <19527798.post@talk.nabble.com>
Date: Wed, 17 Sep 2008 02:41:19 -0700 (PDT)
From: nukie <stas.bandera@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using Hits as document space for new search
In-Reply-To: <359a92830809160647g1f37201aq6731a5f099d2d56a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: stas.bandera@gmail.com
References: <19511672.post@talk.nabble.com> <359a92830809160647g1f37201aq6731a5f099d2d56a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Of course.

In my search functionality i need ability after main search, to define more
exactly what to search by adding more search parameters, and get information
about search results count after adding each of new parameter. 

For example,  in my case it's car  searching form.
First of all i'm telling that i want to search for BMW. System returning set
of results. 
In process of viewing results system shows additional criterias for making
search result more exact, and shows count of result set after adding this
criteria (..this count is smaller than current result set size, because new
result is just subset of current result list).

So i have to make independent query for getting result set size got with
each new query.

      TermQuery audiTerm = new TermQuery(new Term("Make", "AUDI"));
      ChainedFilter cf = new ChainedFilter(new Filter [] {new
RangeFilter("Milleage", NumberTools.longToString(5000),
NumberTools.longToString(5100), true, true)}, new int []
{ChainedFilter.AND});
      BooleanQuery someAudi = new BooleanQuery();
      
      someAudi.add(audiTerm, BooleanClause.Occur.SHOULD);
      Hits hits;      
      long time = System.currentTimeMillis();
      hits = searcher.search(someAudi, cf, new Sort("Milleage"));

      long newTime = System.currentTimeMillis();
      System.out.println("Search time : " + String.valueOf(newTime - time) +
" RESULT SIZE : " + String.valueOf(hits.length()));
      time = System.currentTimeMillis();
      hits = searcher.search(someAudi, cf, new Sort("Milleage"));
      newTime = System.currentTimeMillis();
      System.out.println("Search time : " + String.valueOf(newTime - time) +
" RESULT SIZE : " + String.valueOf(hits.length()));
    
This is simple example of building general query. After making search more
complicated more terms could be added to BooleanQuery , etc.

I thought that i could to filter currently avaible hits. 


Erick Erickson wrote:
> 
> I'm confused about what your "variants of search criterias" are. Could
> you provide a few examples?
> 
> Also, if you can provide a higher-level statement of your problem, folks
> can often come up with alternate approaches.
> 
> Best
> Erick
> 
-- 
View this message in context: http://www.nabble.com/Using-Hits-as-document-space-for-new-search-tp19511672p19527798.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 17 11:31:42 2008
Return-Path: <java-user-return-36217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76687 invoked from network); 17 Sep 2008 11:31:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2008 11:31:41 -0000
Received: (qmail 45400 invoked by uid 500); 17 Sep 2008 11:31:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44893 invoked by uid 500); 17 Sep 2008 11:31:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44882 invoked by uid 99); 17 Sep 2008 11:31:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 04:31:31 -0700
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 11:30:30 +0000
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1KfvFK-0001f7-BQ
	for java-user@lucene.apache.org; Wed, 17 Sep 2008 11:30:58 +0000
Received: from home.schibsted.no ([80.91.33.33])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 17 Sep 2008 11:30:58 +0000
Received: from mick by home.schibsted.no with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 17 Sep 2008 11:30:58 +0000
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Mck <mick@semb.wever.org>
Subject:  Re: Replacing FAST functionality
	atsesam.no-ShingleFilter+exactmatching
Date:  Wed, 17 Sep 2008 13:32:31 +0200
Lines: 31
Message-ID:  <1221651151.23183.1.camel@localhost>
References:  <1221067074.8908.81.camel@localhost>
	 <9294E20AED46934EA459020706463F94EF3830@SUEXCL-02.ad.syr.edu>
	 <1221472589.8908.255.camel@localhost>
	 <Pine.LNX.4.62.0809161347550.12144@radix.cryptio.net>
	 <1221636848.17780.31.camel@localhost>
Mime-Version:  1.0
Content-Type:  multipart/signed; micalg=pgp-sha1; protocol="application/pgp-signature"; boundary="=-VuKISIL3VH99s4yRs6sM"
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: home.schibsted.no
In-Reply-To: <1221636848.17780.31.camel@localhost>
X-Mailer: Evolution 2.22.3.1 
Sender: news <news@ger.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org

--=-VuKISIL3VH99s4yRs6sM
Content-Type: text/plain
Content-Transfer-Encoding: quoted-printable

> (i'll test too that BooleanQuery works as presumed in my case...)

Indeed it works beautifully with a BooleanQuery.
I've updated the patch to LUCENE-1380

~mck

--=20
"If you have any trouble sounding condescending, find a Unix user to
show you how it's done." Scott Adams=20
| semb.wever.org | sesat.no | sesam.no |

--=-VuKISIL3VH99s4yRs6sM
Content-Type: application/pgp-signature; name=signature.asc
Content-Description: This is a digitally signed message part

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.9 (GNU/Linux)

iEYEABECAAYFAkjQ6s8ACgkQkdPrePiuutMBGACglKBCKrQJIDu/MJ4RS8VBCPIV
NVYAoIFYWhjCLOb4FkyeE0rQCjr5P6pp
=RsLU
-----END PGP SIGNATURE-----

--=-VuKISIL3VH99s4yRs6sM--



From java-user-return-36218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 17 11:38:39 2008
Return-Path: <java-user-return-36218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80484 invoked from network); 17 Sep 2008 11:38:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2008 11:38:39 -0000
Received: (qmail 59076 invoked by uid 500); 17 Sep 2008 11:38:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58990 invoked by uid 500); 17 Sep 2008 11:38:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58979 invoked by uid 99); 17 Sep 2008 11:38:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 04:38:29 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dckorah@gmail.com designates 74.125.78.24 as permitted sender)
Received: from [74.125.78.24] (HELO ey-out-2122.google.com) (74.125.78.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 11:37:30 +0000
Received: by ey-out-2122.google.com with SMTP id 6so1351264eyi.53
        for <java-user@lucene.apache.org>; Wed, 17 Sep 2008 04:37:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:subject:date
         :mime-version:content-type:x-mailer:thread-index:x-mimeole
         :message-id;
        bh=+l1Nltdd+QQhJTzem8bnluzF2hmVAuLvn7pqH4vMaGk=;
        b=WaM+fjQKpdS3Mb+PuXTuABqviK+fFHrsrCtBzl/dq231CneFQgRLNsnPnHDgKjgMRL
         A/zOqyZoeiSZK8ZuI1pSfRJPjeDzGPcdJQY+P2duLz20pA08ysC3Z98+kI35rvJs7sY/
         x66ml8l/DQuY6nX3x4XtiCNOoy2ihNHdEQom4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:subject:date:mime-version:content-type:x-mailer
         :thread-index:x-mimeole:message-id;
        b=t4YE2X+jNf5qwOk5VVKpTsba8aRPJo4Tf4nJpmY6vKybdbdA6cfEPfBmTLEzdFGBDQ
         jGyNngkhrdoDaK7wwSejGj0JYJ88FVt2IG3bgIgzy8S7vVAWLH0tNeKPNffzuhHYYlpu
         0IYmNMWdspCLHFd4x7ZJ5URCyxX61L3xasMlg=
Received: by 10.210.125.7 with SMTP id x7mr1508746ebc.40.1221651464846;
        Wed, 17 Sep 2008 04:37:44 -0700 (PDT)
Received: from SCWDEVDINOKVM ( [195.2.245.68])
        by mx.google.com with ESMTPS id k5sm15387052nfd.22.2008.09.17.04.37.42
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 17 Sep 2008 04:37:43 -0700 (PDT)
From: "Dino Korah" <dckorah@gmail.com>
To: <java-user@lucene.apache.org>
Subject: TopDocCollector & Paging
Date: Wed, 17 Sep 2008 12:37:06 +0100
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0025_01C918C2.184EF6C0"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: AckYubYFOia5wz33QCOKp/dtwa3akA==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3350
Message-ID: <48d0ec07.0589300a.1573.7418@mx.google.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0025_01C918C2.184EF6C0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

Hello All,
 
Anyone has tried  this?
 
My UI has a requirement to show total number of results and then show
results in pages. How do I do that with TopDocCollector, without having to
run search() twice, one to get the total number of hits and then the next
one to get the page being displayed. (like the
demo::SearchFiles::doPagingSearch())
 
In my case I am to search on a few hundred million document index; scoring
is expensive.
 
Many thanks,
Dino
 

------=_NextPart_000_0025_01C918C2.184EF6C0--


From java-user-return-36219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 17 12:20:17 2008
Return-Path: <java-user-return-36219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6180 invoked from network); 17 Sep 2008 12:20:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2008 12:20:16 -0000
Received: (qmail 26354 invoked by uid 500); 17 Sep 2008 12:20:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25796 invoked by uid 500); 17 Sep 2008 12:20:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25784 invoked by uid 99); 17 Sep 2008 12:20:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 05:20:06 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [140.203.201.101] (HELO mx2.nuigalway.ie) (140.203.201.101)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 12:19:07 +0000
X-IronPort-AV: E=Sophos;i="4.32,415,1217804400"; 
   d="scan'208";a="94775178"
Received: from exbe2.ac.nuigalway.ie (HELO EVS1.ac.nuigalway.ie) ([10.132.157.13])
  by mx2.nuigalway.ie with ESMTP; 17 Sep 2008 13:19:02 +0100
Received: from EVS1.ac.nuigalway.ie ([10.132.157.14]) by EVS1.ac.nuigalway.ie with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 17 Sep 2008 13:19:01 +0100
Received: from [10.2.18.102] ([140.203.154.11]) by EVS1.ac.nuigalway.ie over TLS secured channel with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 17 Sep 2008 13:19:01 +0100
Message-ID: <48D0F5B5.9000406@deri.org>
Date: Wed, 17 Sep 2008 13:19:01 +0100
From: Renaud Delbru <renaud.delbru@deri.org>
User-Agent: Thunderbird 2.0.0.16 (X11/20080724)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Sorting posting lists before intersection
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 17 Sep 2008 12:19:01.0499 (UTC) FILETIME=[91758CB0:01C918BF]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

I am wondering if Lucene implements the query optimisation that consists 
of ordering the posting lists based on the term frequency before 
intersection ?
If yes, could somebody point me to the java class / method that 
implements such strategy ?

Thanks in advance,
Regards.
-- 
Renaud Delbru

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 17 12:46:57 2008
Return-Path: <java-user-return-36220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24962 invoked from network); 17 Sep 2008 12:46:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2008 12:46:57 -0000
Received: (qmail 92717 invoked by uid 500); 17 Sep 2008 12:46:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92687 invoked by uid 500); 17 Sep 2008 12:46:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92676 invoked by uid 99); 17 Sep 2008 12:46:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 05:46:47 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.107.123] (HELO smtp140.mail.mud.yahoo.com) (209.191.107.123)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 17 Sep 2008 12:45:46 +0000
Received: (qmail 61466 invoked from network); 17 Sep 2008 12:46:16 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=zUASVykFMYN8k1oY3dxZwfVhv9CTpQqHP6PMQWKe/95hi1/6GDzCTyyAxv8AbCo5ApF0P3PiuP5IqtbbhTQDJN063KILIQmkoWw0vNoswS0dPN0JzrTukoExJIOn2Qgd+Uo/s4NxsvSbdnwTl2VnjP2c2Zblj/eWiGMji5kSUrQ=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp140.mail.mud.yahoo.com with SMTP; 17 Sep 2008 12:46:15 -0000
X-YMail-OSG: DZJEs9YVM1k6PnkAxcAE.9Mt.679q29bk0.d5jjXo.2j81KwBxq79sj9h.Eqml_TmLbaqHE58RPsOSqqFS7vL8E2yTJVwgZkEO4JMLDO1_bTwbxOE8FocDS4gfAbN2ScZOJvc.WF8CAOd9EB5zJQ5l8aCS7LaIk-
X-Yahoo-Newman-Property: ymail-3
Message-ID: <00ea01c918c3$5f8d39b0$04000100@sv.us.sonicwall.com>
From: "Ganesh - yahoo" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
Subject: Exception while doing sorting
Date: Wed, 17 Sep 2008 18:16:03 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Hello all,

I am have indexed more than 4 million documents. My query fetches 300,000 
hits. If i perform sorting on any field, then tomcat reports out of memory 
exception.
Sometimes the query results may be around 1000, but sorting on any field 
might take more than 30 - 50 secs.

I don't know what's going wrong.

My index searcher is static object and it is getting refreshed every minute. 
JSP pages directly calls the index searcher object and performs search.

Regards
Ganesh


Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 17 13:35:41 2008
Return-Path: <java-user-return-36221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53993 invoked from network); 17 Sep 2008 13:35:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2008 13:35:41 -0000
Received: (qmail 18615 invoked by uid 500); 17 Sep 2008 13:35:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18584 invoked by uid 500); 17 Sep 2008 13:35:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18573 invoked by uid 99); 17 Sep 2008 13:35:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 06:35:31 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 13:34:30 +0000
Received: from [192.168.0.220] ([81.219.54.251])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id m8HDY6R05645
	for <java-user@lucene.apache.org>; Wed, 17 Sep 2008 08:34:06 -0500
Message-ID: <48D10726.4010504@getopt.org>
Date: Wed, 17 Sep 2008 15:33:26 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Sorting posting lists before intersection
References: <48D0F5B5.9000406@deri.org>
In-Reply-To: <48D0F5B5.9000406@deri.org>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Renaud Delbru wrote:
> Hi all,
> 
> I am wondering if Lucene implements the query optimisation that consists 
> of ordering the posting lists based on the term frequency before 
> intersection ?
> If yes, could somebody point me to the java class / method that 
> implements such strategy ?

Lucene trunk: ConjunctionScorer, lines 85-103 - pay attention to the 
comments there, it's not strictly a sort by frequency, rather by the 
sampled "sparseness".

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 17 13:58:48 2008
Return-Path: <java-user-return-36222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69659 invoked from network); 17 Sep 2008 13:58:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2008 13:58:47 -0000
Received: (qmail 59920 invoked by uid 500); 17 Sep 2008 13:58:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59890 invoked by uid 500); 17 Sep 2008 13:58:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59879 invoked by uid 99); 17 Sep 2008 13:58:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 06:58:37 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.34.111.254] (HELO barmail1.idig.net) (64.34.111.254)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 13:57:37 +0000
Received: from cpweb10.idig.net (cpweb10.idig.net [65.39.182.10])
	by barmail1.idig.net (Spam Firewall) with ESMTP id C00961B4F018
	for <java-user@lucene.apache.org>; Wed, 17 Sep 2008 06:58:04 -0700 (PDT)
Received: from cpweb10.idig.net (cpweb10.idig.net [65.39.182.10]) by barmail1.idig.net with ESMTP id l719sBXvHB8UxrOB for <java-user@lucene.apache.org>; Wed, 17 Sep 2008 06:58:04 -0700 (PDT)
Received: from localhost ([127.0.0.1])
	by cpweb10.idig.net with esmtpa (Exim 4.69)
	(envelope-from <fuad@efendi.ca>)
	id 1KfxXg-0002x9-Gz
	for java-user@lucene.apache.org; Wed, 17 Sep 2008 06:58:04 -0700
Received: from 216.191.89.200 ([216.191.89.200]) by 65.39.182.4 (Horde MIME
	library) with HTTP; Wed, 17 Sep 2008 06:58:04 -0700
Message-ID: <20080917065804.j8e1vll31co8488c@65.39.182.4>
Date: Wed, 17 Sep 2008 06:58:04 -0700
From: Fuad Efendi <fuad@efendi.ca>
To: java-user@lucene.apache.org
Subject: Re: Exception while doing sorting
References: <00ea01c918c3$5f8d39b0$04000100@sv.us.sonicwall.com>
In-Reply-To: <00ea01c918c3$5f8d39b0$04000100@sv.us.sonicwall.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset=ISO-8859-1;
	DelSp="Yes";
	format="flowed"
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable
User-Agent: Internet Messaging Program (IMP) H3 (4.1.6)
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - cpweb10.idig.net
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - efendi.ca
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org

Increase memory.

Lucene uses FieldCache for sorting on non-tokenized field and tries to =20
maintain fields from all your 4 millions documents, even if you need =20
to sort only 4000 docs.
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
http://www.tokenizer.org/bot.html


Quoting Ganesh - yahoo <emailgane@yahoo.co.in>:

> Hello all,
>
> I am have indexed more than 4 million documents. My query fetches
> 300,000 hits. If i perform sorting on any field, then tomcat reports
> out of memory exception.
> Sometimes the query results may be around 1000, but sorting on any
> field might take more than 30 - 50 secs.
>
> I don't know what's going wrong.
>
> My index searcher is static object and it is getting refreshed every
> minute. JSP pages directly calls the index searcher object and performs
> search.
>
> Regards
> Ganesh
>
>
> Send instant messages to your online friends
> http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 17 14:17:22 2008
Return-Path: <java-user-return-36223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82382 invoked from network); 17 Sep 2008 14:17:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2008 14:17:22 -0000
Received: (qmail 1208 invoked by uid 500); 17 Sep 2008 14:17:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1177 invoked by uid 500); 17 Sep 2008 14:17:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1166 invoked by uid 99); 17 Sep 2008 14:17:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 07:17:12 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 216.239.58.189 as permitted sender)
Received: from [216.239.58.189] (HELO gv-out-0910.google.com) (216.239.58.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 14:16:14 +0000
Received: by gv-out-0910.google.com with SMTP id p33so1569165gvf.23
        for <java-user@lucene.apache.org>; Wed, 17 Sep 2008 07:16:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Vv5XD4ed8CDrwrkncF7nbCcDxU0Apgg6UA5kSZILCaQ=;
        b=M8c6LkO/vU1r9lyvkCO8tEcu4eEY0v+8kNAFNwjPxTaHacn6aVXa857jRgFzdUkjwk
         73TFvGr6Iwu4GXetLQGdJadFz13CX7eHvB0k54ULOzAZwY7FSkJdOsDeuGMtFqhJq1Vo
         a/PT47BleSKeMeZLQG0nCSj1Tn6LX4q3BSl9k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=YQr8Z9pKv3nW3K7wZyCi2oDz+SY2iMLMhvGgqF6MmxG03zSNAwab2IyPbup1n1wmdc
         sfw6LPyi0WxzIOurklHGJp9fdVMJ0gSDjjNf4fL80EH3TKXtHFKKPRpONy+zz4QiBgyB
         ifXNKTiCWTXn5sdaRDRbXduo3cuWIKDI/9Wa0=
Received: by 10.86.80.17 with SMTP id d17mr1969186fgb.33.1221661006072;
        Wed, 17 Sep 2008 07:16:46 -0700 (PDT)
Received: by 10.86.76.4 with HTTP; Wed, 17 Sep 2008 07:16:45 -0700 (PDT)
Message-ID: <359a92830809170716p22ff113dt689f20fd96a2ef01@mail.gmail.com>
Date: Wed, 17 Sep 2008 10:16:45 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: TopDocCollector & Paging
In-Reply-To: <48d0ec07.0589300a.1573.7418@mx.google.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3150_12063528.1221661006073"
References: <AckYubYFOia5wz33QCOKp/dtwa3akA==>
	 <48d0ec07.0589300a.1573.7418@mx.google.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3150_12063528.1221661006073
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Doesn't TopDocCollector have a getTotalHits method?

Remember that in order to get the top N documents, a
all documents must be examined. I believe that the
numHits parameter passed to the constructor just
limits the number of hits stored in (and thus the size)
of the TopDocs object....

Best
Erick

On Wed, Sep 17, 2008 at 7:37 AM, Dino Korah <dckorah@gmail.com> wrote:

> Hello All,
>
> Anyone has tried  this?
>
> My UI has a requirement to show total number of results and then show
> results in pages. How do I do that with TopDocCollector, without having to
> run search() twice, one to get the total number of hits and then the next
> one to get the page being displayed. (like the
> demo::SearchFiles::doPagingSearch())
>
> In my case I am to search on a few hundred million document index; scoring
> is expensive.
>
> Many thanks,
> Dino
>
>

------=_Part_3150_12063528.1221661006073--

From java-user-return-36224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 17 14:21:04 2008
Return-Path: <java-user-return-36224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84133 invoked from network); 17 Sep 2008 14:21:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2008 14:21:04 -0000
Received: (qmail 12845 invoked by uid 500); 17 Sep 2008 14:20:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12821 invoked by uid 500); 17 Sep 2008 14:20:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12810 invoked by uid 99); 17 Sep 2008 14:20:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 07:20:54 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 216.239.58.190 as permitted sender)
Received: from [216.239.58.190] (HELO gv-out-0910.google.com) (216.239.58.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 14:19:55 +0000
Received: by gv-out-0910.google.com with SMTP id p33so1570156gvf.23
        for <java-user@lucene.apache.org>; Wed, 17 Sep 2008 07:20:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=OfQn2Y9x25RAL+Dn94NTof+sg3aVNpPaWZowHy5pJh0=;
        b=r43MnYY6xLdn1ViqM8ZkNIlxwA+yYZiT7YE5cN/sOHpm/Nvxx+5+4IyHnifsdjJnaU
         mI7Dmkvs6puQD2GV2Ot9/HJwykr7dR1Ws3X7VzhKdYMBUgorEgRTJ9xfSxItiAJ95nPY
         4oZX7Bv8FxI04DNT+zK5lnyT0rKwl+qzNvXgU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=PLyMJk2FjeORUUytrKjX9NhpWfa3qYZiaRQmg6JqC/SWtBYMkorB4942F7HuC1sbUY
         eSj0nyUVD41HOguneJWdJzbd4J6QIjhZK9Kbewwm+eJFaWJA0Y++Exwns+Iz6n+AQDNY
         Vi3AdNWTPZ+3QVV4m6G3faf8EkOmTnLpIgACo=
Received: by 10.86.90.13 with SMTP id n13mr1064372fgb.3.1221661209179;
        Wed, 17 Sep 2008 07:20:09 -0700 (PDT)
Received: by 10.86.76.4 with HTTP; Wed, 17 Sep 2008 07:20:09 -0700 (PDT)
Message-ID: <359a92830809170720q6d33b8abxe2369e75114cac9e@mail.gmail.com>
Date: Wed, 17 Sep 2008 10:20:09 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Exception while doing sorting
In-Reply-To: <00ea01c918c3$5f8d39b0$04000100@sv.us.sonicwall.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3183_11539683.1221661209163"
References: <00ea01c918c3$5f8d39b0$04000100@sv.us.sonicwall.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3183_11539683.1221661209163
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

<<<My index searcher is static object and it is getting refreshed every
minute>>>

Does this mean you close/open your searcher every minute? If so, this could
be the root of why your sorting is taking so long. Although it's not the OOM
problem, see Faud's email.

The first few searches on a newly opened searcher do a lot of setup, which
is very
expensive. A 50 second search is usually considered unacceptable, so you
might
want to revisit how often you open/close your searcher if, indeed, you are
doing it
every minute.

Best
Erick

On Wed, Sep 17, 2008 at 8:46 AM, Ganesh - yahoo <emailgane@yahoo.co.in>wrote:

> Hello all,
>
> I am have indexed more than 4 million documents. My query fetches 300,000
> hits. If i perform sorting on any field, then tomcat reports out of memory
> exception.
> Sometimes the query results may be around 1000, but sorting on any field
> might take more than 30 - 50 secs.
>
> I don't know what's going wrong.
>
> My index searcher is static object and it is getting refreshed every
> minute. JSP pages directly calls the index searcher object and performs
> search.
>
> Regards
> Ganesh
>
>
> Send instant messages to your online friends http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_3183_11539683.1221661209163--

From java-user-return-36225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 17 14:42:15 2008
Return-Path: <java-user-return-36225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 280 invoked from network); 17 Sep 2008 14:42:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2008 14:42:15 -0000
Received: (qmail 60218 invoked by uid 500); 17 Sep 2008 14:42:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60191 invoked by uid 500); 17 Sep 2008 14:42:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60170 invoked by uid 99); 17 Sep 2008 14:42:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 07:42:03 -0700
X-ASF-Spam-Status: No, hits=4.1 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WEIRD_PORT,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 14:41:02 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KfyDm-0007WB-CC
	for java-user@lucene.apache.org; Wed, 17 Sep 2008 07:41:34 -0700
Message-ID: <19533647.post@talk.nabble.com>
Date: Wed, 17 Sep 2008 07:41:34 -0700 (PDT)
From: anandsarwade <anand.sarwade@corp.aol.com>
To: java-user@lucene.apache.org
Subject: Lucene search fails for japanese characters in URL
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: anand.sarwade@corp.aol.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi ,

I am facing below problem. Please help me in this.

I have integrated CJK Analyzer for Japanese characters. I am able to save=
=20
japanese double byte characters in mysql database in UTF-8 format without
issues. I could that data is getted indexed. Now when i search the Japanese
characters which were indexed using the URL below , returns empty results.
=20
http://xml.demo.myaol.jp:8082/portal/gallery-search?first=3D1&max=3D100&cap=
=3D=E8=A8=80=E8=AA=9E=20
=20
Noticed that the above url gets converted to the following URL having some
HTML encoded strings in search.
=20
http://xml.demo.myaol.jp:8082/portal/gallery-search?first=3D1&max=3D100&cap=
=3D%E8%A8%80%E8%AA%9E
=20
This does not match with the existing lucene indexes henceforth returns
empty results.  How do i solve this lucene search issue having japanese
words in URLs.? Is there any way to convert such characters back to Japanes=
e
words???=20

Any help/suggestions in this regards is highly appreciated.

Thanks in Advance.

Regards,
Anand=20

--=20
View this message in context: http://www.nabble.com/Lucene-search-fails-for=
-japanese-characters-in-URL-tp19533647p19533647.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 17 14:49:29 2008
Return-Path: <java-user-return-36226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4863 invoked from network); 17 Sep 2008 14:49:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2008 14:49:28 -0000
Received: (qmail 77307 invoked by uid 500); 17 Sep 2008 14:49:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77261 invoked by uid 500); 17 Sep 2008 14:49:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77230 invoked by uid 99); 17 Sep 2008 14:49:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 07:49:08 -0700
X-ASF-Spam-Status: No, hits=1.7 required=10.0
	tests=SPF_PASS,WEIRD_PORT,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [193.12.6.34] (HELO msgint02.mogul.com) (193.12.6.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 14:48:05 +0000
Received: from msgint02.mogul.com ([172.17.1.7]) by msgint02.mogul.com
 ([172.17.1.7]) with mapi; Wed, 17 Sep 2008 16:49:43 +0200
From: =?utf-8?B?SmltaSBIdWxsZWfDpXJk?= <jimi.hullegard@mogul.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 17 Sep 2008 16:49:36 +0200
Subject: RE: Lucene search fails for japanese characters in URL
Thread-Topic: Lucene search fails for japanese characters in URL
Thread-Index: AckY08kWFVOL/xe7Ts+EQU+Hfdr3XQAAK+5g
Message-ID: <D8E6BD3AD2634843B58AFF6A94FE246202D7AEB6F5@msgint02.mogul.com>
In-Reply-To: <19533647.post@talk.nabble.com>
Accept-Language: sv-SE
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: sv-SE
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

V2hhdCB3ZWJzZXJ2ZXIgYXJlIHlvdSB1c2luZz8gRm9yIGV4YW1wbGUsIHdpdGggVG9tY2F0LCBp
dCBjb3VsZCBiZSBiZWNhdXNlIG9mIHRoZSBzZXR0aW5nIFVSSUVuY29kaW5nIGluIHNlcnZlci54
bWwuDQoNCmh0dHA6Ly90b21jYXQuYXBhY2hlLm9yZy90b21jYXQtNS41LWRvYy9jb25maWcvaHR0
cC5odG1sDQoNCi9KaW1pDQoNCm1vZ3VsIHwgamltaSBodWxsZWfDpXJkIHwgc3lzdGVtIGRldmVs
b3BlciB8IGh1ZGlrc3ZhbGxzZ2F0YW4gNCwgMTEzIDMwIHN0b2NraG9sbSBzd2VkZW4gfCArNDYg
OCA1MDYgNjYgMTcyIHwgKzQ2IDc2NSAyNyAxOSA1NSB8IGppbWkuaHVsbGVnYXJkQG1vZ3VsLmNv
bSB8IHd3dy5tb2d1bC5jb20NCg0KDQo+IC0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQo+IEZy
b206IGFuYW5kc2Fyd2FkZSBbbWFpbHRvOmFuYW5kLnNhcndhZGVAY29ycC5hb2wuY29tXQ0KPiBT
ZW50OiBkZW4gMTcgc2VwdGVtYmVyIDIwMDggMTY6NDINCj4gVG86IGphdmEtdXNlckBsdWNlbmUu
YXBhY2hlLm9yZw0KPiBTdWJqZWN0OiBMdWNlbmUgc2VhcmNoIGZhaWxzIGZvciBqYXBhbmVzZSBj
aGFyYWN0ZXJzIGluIFVSTA0KPg0KPg0KPiBIaSAsDQo+DQo+IEkgYW0gZmFjaW5nIGJlbG93IHBy
b2JsZW0uIFBsZWFzZSBoZWxwIG1lIGluIHRoaXMuDQo+DQo+IEkgaGF2ZSBpbnRlZ3JhdGVkIENK
SyBBbmFseXplciBmb3IgSmFwYW5lc2UgY2hhcmFjdGVycy4gSSBhbQ0KPiBhYmxlIHRvIHNhdmUN
Cj4gamFwYW5lc2UgZG91YmxlIGJ5dGUgY2hhcmFjdGVycyBpbiBteXNxbCBkYXRhYmFzZSBpbiBV
VEYtOA0KPiBmb3JtYXQgd2l0aG91dA0KPiBpc3N1ZXMuIEkgY291bGQgdGhhdCBkYXRhIGlzIGdl
dHRlZCBpbmRleGVkLiBOb3cgd2hlbiBpDQo+IHNlYXJjaCB0aGUgSmFwYW5lc2UNCj4gY2hhcmFj
dGVycyB3aGljaCB3ZXJlIGluZGV4ZWQgdXNpbmcgdGhlIFVSTCBiZWxvdyAsIHJldHVybnMNCj4g
ZW1wdHkgcmVzdWx0cy4NCj4NCj4gaHR0cDovL3htbC5kZW1vLm15YW9sLmpwOjgwODIvcG9ydGFs
L2dhbGxlcnktc2VhcmNoP2ZpcnN0PTEmbWENCj4geD0xMDAmY2FwPeiogOiqng0KPg0KPiBOb3Rp
Y2VkIHRoYXQgdGhlIGFib3ZlIHVybCBnZXRzIGNvbnZlcnRlZCB0byB0aGUgZm9sbG93aW5nDQo+
IFVSTCBoYXZpbmcgc29tZQ0KPiBIVE1MIGVuY29kZWQgc3RyaW5ncyBpbiBzZWFyY2guDQo+DQo+
IGh0dHA6Ly94bWwuZGVtby5teWFvbC5qcDo4MDgyL3BvcnRhbC9nYWxsZXJ5LXNlYXJjaD9maXJz
dD0xJm1hDQo+IHg9MTAwJmNhcD0lRTglQTglODAlRTglQUElOUUNCj4NCj4gVGhpcyBkb2VzIG5v
dCBtYXRjaCB3aXRoIHRoZSBleGlzdGluZyBsdWNlbmUgaW5kZXhlcw0KPiBoZW5jZWZvcnRoIHJl
dHVybnMNCj4gZW1wdHkgcmVzdWx0cy4gIEhvdyBkbyBpIHNvbHZlIHRoaXMgbHVjZW5lIHNlYXJj
aCBpc3N1ZQ0KPiBoYXZpbmcgamFwYW5lc2UNCj4gd29yZHMgaW4gVVJMcy4/IElzIHRoZXJlIGFu
eSB3YXkgdG8gY29udmVydCBzdWNoIGNoYXJhY3RlcnMNCj4gYmFjayB0byBKYXBhbmVzZQ0KPiB3
b3Jkcz8/Pw0KPg0KPiBBbnkgaGVscC9zdWdnZXN0aW9ucyBpbiB0aGlzIHJlZ2FyZHMgaXMgaGln
aGx5IGFwcHJlY2lhdGVkLg0KPg0KPiBUaGFua3MgaW4gQWR2YW5jZS4NCj4NCj4gUmVnYXJkcywN
Cj4gQW5hbmQNCj4NCj4gLS0NCj4gVmlldyB0aGlzIG1lc3NhZ2UgaW4gY29udGV4dDoNCj4gaHR0
cDovL3d3dy5uYWJibGUuY29tL0x1Y2VuZS1zZWFyY2gtZmFpbHMtZm9yLWphcGFuZXNlLWNoYXJh
Y3QNCj4gZXJzLWluLVVSTC10cDE5NTMzNjQ3cDE5NTMzNjQ3Lmh0bWwNCj4gU2VudCBmcm9tIHRo
ZSBMdWNlbmUgLSBKYXZhIFVzZXJzIG1haWxpbmcgbGlzdCBhcmNoaXZlIGF0IE5hYmJsZS5jb20u
DQo+DQo+DQo+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KPiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVz
ZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCj4gRm9yIGFkZGl0aW9uYWwgY29tbWFu
ZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcNCj4NCj4NCg==


From java-user-return-36227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 17 15:13:34 2008
Return-Path: <java-user-return-36227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19830 invoked from network); 17 Sep 2008 15:13:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2008 15:13:33 -0000
Received: (qmail 31561 invoked by uid 500); 17 Sep 2008 15:13:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31502 invoked by uid 500); 17 Sep 2008 15:13:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31471 invoked by uid 99); 17 Sep 2008 15:13:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 08:13:22 -0700
X-ASF-Spam-Status: No, hits=4.1 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WEIRD_PORT,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 15:12:20 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Kfyi4-0001CH-PG
	for java-user@lucene.apache.org; Wed, 17 Sep 2008 08:12:52 -0700
Message-ID: <19534342.post@talk.nabble.com>
Date: Wed, 17 Sep 2008 08:12:52 -0700 (PDT)
From: anandsarwade <anand.sarwade@corp.aol.com>
To: java-user@lucene.apache.org
Subject: RE: Lucene search fails for japanese characters in URL
In-Reply-To: <D8E6BD3AD2634843B58AFF6A94FE246202D7AEB6F5@msgint02.mogul.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: anand.sarwade@corp.aol.com
References: <19533647.post@talk.nabble.com> <D8E6BD3AD2634843B58AFF6A94FE246202D7AEB6F5@msgint02.mogul.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hello Jimi,

Thanks a lot for your valuable suggestion.=20

I am using tomcat 5 . As per your suggestions ,checked the server.xml but
found that no URIEncoding was set.=20
I have set now and to my great relief :-) i could see the Lucene results on
my browser for japanese string with request objects in UTF-8 now.

Thanks again for your help.

Regards,
Anand.


JimiH wrote:
>=20
> What webserver are you using? For example, with Tomcat, it could be
> because of the setting URIEncoding in server.xml.
>=20
> http://tomcat.apache.org/tomcat-5.5-doc/config/http.html
>=20
> /Jimi
>=20
> mogul | jimi hulleg=C3=A5rd | system developer | hudiksvallsgatan 4, 113 =
30
> stockholm sweden | +46 8 506 66 172 | +46 765 27 19 55 |
> jimi.hullegard@mogul.com | www.mogul.com
>=20
>=20
>> -----Original Message-----
>> From: anandsarwade [mailto:anand.sarwade@corp.aol.com]
>> Sent: den 17 september 2008 16:42
>> To: java-user@lucene.apache.org
>> Subject: Lucene search fails for japanese characters in URL
>>
>>
>> Hi ,
>>
>> I am facing below problem. Please help me in this.
>>
>> I have integrated CJK Analyzer for Japanese characters. I am
>> able to save
>> japanese double byte characters in mysql database in UTF-8
>> format without
>> issues. I could that data is getted indexed. Now when i
>> search the Japanese
>> characters which were indexed using the URL below , returns
>> empty results.
>>
>> http://xml.demo.myaol.jp:8082/portal/gallery-search?first=3D1&ma
>> x=3D100&cap=3D=E8=A8=80=E8=AA=9E
>>
>> Noticed that the above url gets converted to the following
>> URL having some
>> HTML encoded strings in search.
>>
>> http://xml.demo.myaol.jp:8082/portal/gallery-search?first=3D1&ma
>> x=3D100&cap=3D%E8%A8%80%E8%AA%9E
>>
>> This does not match with the existing lucene indexes
>> henceforth returns
>> empty results.  How do i solve this lucene search issue
>> having japanese
>> words in URLs.? Is there any way to convert such characters
>> back to Japanese
>> words???
>>
>> Any help/suggestions in this regards is highly appreciated.
>>
>> Thanks in Advance.
>>
>> Regards,
>> Anand
>>
>> --
>> View this message in context:
>> http://www.nabble.com/Lucene-search-fails-for-japanese-charact
>> ers-in-URL-tp19533647p19533647.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>=20
>=20

--=20
View this message in context: http://www.nabble.com/Lucene-search-fails-for=
-japanese-characters-in-URL-tp19533647p19534342.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 17 15:51:39 2008
Return-Path: <java-user-return-36228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53123 invoked from network); 17 Sep 2008 15:51:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2008 15:51:39 -0000
Received: (qmail 9089 invoked by uid 500); 17 Sep 2008 15:51:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9052 invoked by uid 500); 17 Sep 2008 15:51:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9041 invoked by uid 99); 17 Sep 2008 15:51:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 08:51:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.226 as permitted sender)
Received: from [209.85.198.226] (HELO rv-out-0506.google.com) (209.85.198.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 15:50:30 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3020938rvb.5
        for <java-user@lucene.apache.org>; Wed, 17 Sep 2008 08:51:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=jHf4N/yA0+ZavJbKOVs8CT61/OigTmGLNCOqnhFqqZ8=;
        b=FhiTSR034rhcOohTWHgmob5yYG44svDB6aI/M/MzcE6KjHwJthozQ7UaMXk6zM5Cxx
         X4uaO4TzXjastLVHPM4magt3ptP8CZ7NydB5SYSFo0M9URmLVU6G67vF/lVFK3VRgAEM
         H4ZgjMkajft7jwNXvgwzGqomrLguVCJGIuNdY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=RTsta8IV6zCS74i5+Vtv6kEKNEM5Izo90ZbFC6OxYD8St2FUysogvrxL6yLRqY8W9U
         dGum6Fss6CBy0EIhn0bNdufJfPXuPF4P6eVY8qg38xiXyyZQvPhdYt9Y5HCl0YozKQCL
         Zqy7pdjojWoFbEkyrI0JvOHQnff0rPJj+jv8Y=
Received: by 10.141.13.16 with SMTP id q16mr6635243rvi.99.1221666663146;
        Wed, 17 Sep 2008 08:51:03 -0700 (PDT)
Received: by 10.141.176.5 with HTTP; Wed, 17 Sep 2008 08:51:03 -0700 (PDT)
Message-ID: <1bcb7c7f0809170851s2aa11dddw8c26dc3f434b8f21@mail.gmail.com>
Date: Wed, 17 Sep 2008 18:51:03 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: TopDocCollector & Paging
In-Reply-To: <359a92830809170716p22ff113dt689f20fd96a2ef01@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <48d0ec07.0589300a.1573.7418@mx.google.com>
	 <359a92830809170716p22ff113dt689f20fd96a2ef01@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

And how about queries that need starting position, like hits between
100 and 200?

could we pass something to the collector that will count between 0 to
100 and then get the next 100 records?

Best.

On Wed, Sep 17, 2008 at 5:16 PM, Erick Erickson <erickerickson@gmail.com> wrote:
> Doesn't TopDocCollector have a getTotalHits method?
>
> Remember that in order to get the top N documents, a
> all documents must be examined. I believe that the
> numHits parameter passed to the constructor just
> limits the number of hits stored in (and thus the size)
> of the TopDocs object....
>
> Best
> Erick
>
> On Wed, Sep 17, 2008 at 7:37 AM, Dino Korah <dckorah@gmail.com> wrote:
>
>> Hello All,
>>
>> Anyone has tried  this?
>>
>> My UI has a requirement to show total number of results and then show
>> results in pages. How do I do that with TopDocCollector, without having to
>> run search() twice, one to get the total number of hits and then the next
>> one to get the page being displayed. (like the
>> demo::SearchFiles::doPagingSearch())
>>
>> In my case I am to search on a few hundred million document index; scoring
>> is expensive.
>>
>> Many thanks,
>> Dino
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 17 15:57:00 2008
Return-Path: <java-user-return-36229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56826 invoked from network); 17 Sep 2008 15:56:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2008 15:56:59 -0000
Received: (qmail 17581 invoked by uid 500); 17 Sep 2008 15:56:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17547 invoked by uid 500); 17 Sep 2008 15:56:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17536 invoked by uid 99); 17 Sep 2008 15:56:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 08:56:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.236 as permitted sender)
Received: from [209.85.198.236] (HELO rv-out-0506.google.com) (209.85.198.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 15:55:49 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3022821rvb.5
        for <java-user@lucene.apache.org>; Wed, 17 Sep 2008 08:56:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=KaMr1+Ch/lHdf63zBltHADBeSY+wf/gZ1WT49CFVdD8=;
        b=c+7SDw0tKvnOBOzzrYKNEspvZiapu7l4ygCWTcYRlGUwpg3DIplDds4ppgGT/yAoDU
         YFplSoI4gjUZQUP/afaUHUYFfWH5nVVNK1jn63L0dWt+epWgr29jssSXOEWe2kMsFvU7
         MICCkstRwX2hX3igTwA+uDD6GJBKCxqbF7D9k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=wLbsX+2t1a57oYRFuWdxELfMXn58DlLI0SCXN2XKC0uRKSJ7zVB6iGwFrjbMkH9epH
         UZ/zt8zzt2clhK4EzD5y5+dteHDRXUuTZSpeA8m/1EtjfID9Ozu6E8lWAGGAVoHKIc2G
         id032k8Gtr4xY7Psl4re1JCqTuE2XGU42nOBg=
Received: by 10.141.169.11 with SMTP id w11mr4782540rvo.63.1221666972524;
        Wed, 17 Sep 2008 08:56:12 -0700 (PDT)
Received: by 10.141.176.5 with HTTP; Wed, 17 Sep 2008 08:56:12 -0700 (PDT)
Message-ID: <1bcb7c7f0809170856q50cfd607x11ea83030c01ad0f@mail.gmail.com>
Date: Wed, 17 Sep 2008 18:56:12 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Phrase Query
In-Reply-To: <159532.8814.qm@web50308.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <159532.8814.qm@web50308.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Otis,

Well this was just an example. But upon further thinking on the
problem, i figured out i need my own tokenizer.

I need to give this tokenizer two words, where each one is made to a
token, and then put inside a field.

imagine word src="car seat" and dst="leather" - so I want a tokenizer
take those two, and make two tokens as keyword analyzer would do.

This way one can search bidirectionally edges of a graph with one
phrase query of slop 2.

Is it possible to do such a manupulation?

Best.

On Tue, Sep 16, 2008 at 7:15 PM, Otis Gospodnetic
<otis_gospodnetic@yahoo.com> wrote:
> Are the terms stopwords?
>
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
>
> ----- Original Message ----
>> From: Cam Bazz <cambazz@gmail.com>
>> To: java-user@lucene.apache.org
>> Sent: Tuesday, September 16, 2008 1:33:48 AM
>> Subject: Phrase Query
>>
>> Hello,
>>
>> Lets say I have two documents, both containing field F.
>>
>> document 0 has the string "a b" as F
>> document 1 has the string "b a" as F
>>
>> I am trying to make a phrasequery like:
>>
>>         PhraseQuery pq = new PhraseQuery();
>>         pq.add(new Term("F", "a"));
>>         pq.add(new Term("F", "b"));
>>         pq.setSlop(2);
>>
>> and then search. however I was not successful finding anything.
>>
>> any ideas?
>>
>> Best Regards,
>> -C.B.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 17 16:01:38 2008
Return-Path: <java-user-return-36230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60132 invoked from network); 17 Sep 2008 16:01:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2008 16:01:38 -0000
Received: (qmail 27311 invoked by uid 500); 17 Sep 2008 16:01:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26565 invoked by uid 500); 17 Sep 2008 16:01:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26554 invoked by uid 99); 17 Sep 2008 16:01:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 09:01:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.239 as permitted sender)
Received: from [209.85.198.239] (HELO rv-out-0506.google.com) (209.85.198.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 16:00:27 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3024513rvb.5
        for <java-user@lucene.apache.org>; Wed, 17 Sep 2008 09:00:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=KnN3bimQV5xeMQIHpjLnAvk4DNneYGSr0p0oYyAuLME=;
        b=PwlkJBABVUKuxoswVkDhFyXunCbgEZVg3ixuSphIKlWyEQ1PtcRFHXkYv6OB1mk6yX
         JxOsrUOehTb9JmNhzhuTTcDmOoctOOWN6vs/u7Kgh+9gpoaxe/3ITUONGIxl3+ogzs1a
         nZPEiRxG+ztXEQaLvnEHTKDWBlV75IftWteGk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=uEXaAwrCnYuWMXcu/tqkrNk+UJzw7nYv/aNiVe/o0HkBZqqZP6gOBpA2bPMDX15uZw
         osDFDGU+TPEXekNt1vkNt23TfSB3/pCsgZlCKi1IvVKxkphjmjiqqHdYoj9sU2++bsdK
         o5RsPhQMZ5hd3HaaPoAKLlBnNUOSMBv70ayo0=
Received: by 10.141.114.15 with SMTP id r15mr6631501rvm.164.1221667251027;
        Wed, 17 Sep 2008 09:00:51 -0700 (PDT)
Received: by 10.141.176.5 with HTTP; Wed, 17 Sep 2008 09:00:50 -0700 (PDT)
Message-ID: <1bcb7c7f0809170900t1f4baffak765bcf53c2dc85b8@mail.gmail.com>
Date: Wed, 17 Sep 2008 19:00:50 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Some SSD results to share
In-Reply-To: <2F68492C-75A9-4F6B-B7BC-020ED7C67171@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <48CF7721.1050005@boboco.ie>
	 <BC214406-D1D4-437C-90F9-C0BD2AFFE957@mikemccandless.com>
	 <2F68492C-75A9-4F6B-B7BC-020ED7C67171@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

fusionio.com has the SSD killer. not that expensive neither. just
twice or triple the ssd.

Best.

On Tue, Sep 16, 2008 at 2:16 PM, Karl Wettin <karl.wettin@gmail.com> wrote:
> Related, I've been considering filesystem based filters on SSD. That ought
> to be rather fast, consume no memory and be as simple as a RandomAccessFile.
> I didn't spend to much time on it, gave up when I couldn't figure out when
> it made sense to close the file. Perhaps it would be nice with a close
> method in DocSetIterator.
>
>     karl
>
> 16 sep 2008 kl. 11.53 skrev Michael McCandless:
>
>>
>> I'd be curious how much of a performance difference you see between the
>> different SSD drives.
>>
>> This test was with OCZ "Core Series" but previous tests were with
>> different SSDs right?
>>
>> EG Intel just released a new 80 GB SSD (X25-M) which is getting rave
>> reviews, even compared to the OCZ "core series" which seemed to be the
>> previous favorite:
>>
>>   http://anandtech.com/cpuchipsets/intel/showdoc.aspx?i=3403
>>
>> Mike
>>
>> Eric Bowman wrote:
>>
>>> Hi all,
>>>
>>> We stuck a 60 GB OCZ "Core Series" SSD in a Dell T5400 (dual quadcore,
>>> 16GB RAM, SATA II 7200 RPM disk) and did some comparisons between running
>>> with our index on disk, vs. on SSD.  I can't really talk about what the app
>>> does, but I can share the difference in performance; see enclosed PDF.
>>>
>>> We have a 15GB index and a 20GB bdb, both of which are on the SSD.
>>>  Pretty amazing performance difference.  "Go buy one now." :)
>>>
>>> (The x-axis is ms/request, the y-axis is percentile.   So, "65% of SSD
>>> requests took 120ms or less", for example).
>>>
>>> cheers,
>>> Eric
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 17 16:19:35 2008
Return-Path: <java-user-return-36231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69854 invoked from network); 17 Sep 2008 16:19:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2008 16:19:34 -0000
Received: (qmail 71265 invoked by uid 500); 17 Sep 2008 16:19:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71230 invoked by uid 500); 17 Sep 2008 16:19:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71219 invoked by uid 99); 17 Sep 2008 16:19:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 09:19:24 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 16:18:25 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Kfzk1-0005gw-Fo
	for java-user@lucene.apache.org; Wed, 17 Sep 2008 09:18:57 -0700
Message-ID: <19535854.post@talk.nabble.com>
Date: Wed, 17 Sep 2008 09:18:57 -0700 (PDT)
From: rahul_k123 <vishnudeepak@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexReader.isCurrent()
In-Reply-To: <E3D3D9FC-E808-49E8-9446-98947CE731D0@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: vishnudeepak@gmail.com
References: <19523435.post@talk.nabble.com> <E3D3D9FC-E808-49E8-9446-98947CE731D0@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I am doing replication and i am running scripts to sync the index b/w master
and slave.



Michael McCandless-2 wrote:
> 
> 
> rahul_k123 wrote:
> 
>> what is the behaviour of IndexReader.current() if i modify the index
>> manually? Will it returns false?
> 
> What do you mean by "manually"?
> 
> Once an IndexWriter commits a change to the index after the  
> IndexReader was opened, then IndexReader.isCurrent() will return false.
> 
>> One more question
>>
>> The index is on Linux
>>
>> if my indexReader is open and some of the files in index are  
>> deleted, what
>> is the behaviour of this?
>>
>> Will it give any exception like File Not found??
> 
> Assuming it's a local filesystem on Linux (eg, not NFS) then if  
> IndexReader has the file open and you delete it from the filesystem,  
> that IndexReader is unaffected.
> 
> But, you should not delete files yourself -- IndexWriter does that for  
> you at the right times.
> 
> Mike
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/IndexReader.isCurrent%28%29-tp19523435p19535854.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 17 16:36:29 2008
Return-Path: <java-user-return-36232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81967 invoked from network); 17 Sep 2008 16:36:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2008 16:36:29 -0000
Received: (qmail 4811 invoked by uid 500); 17 Sep 2008 16:36:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4783 invoked by uid 500); 17 Sep 2008 16:36:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4772 invoked by uid 99); 17 Sep 2008 16:36:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 09:36:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wstrzalka@gmail.com designates 74.125.44.30 as permitted sender)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 16:35:19 +0000
Received: by yx-out-2324.google.com with SMTP id 3so964048yxj.5
        for <java-user@lucene.apache.org>; Wed, 17 Sep 2008 09:35:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:date:from:x-mailer:x-priority
         :message-id:to:cc:subject:in-reply-to:references:mime-version
         :content-type:content-transfer-encoding;
        bh=4zrodVywQEzXIkPVN6u+kvOkZlRPLGNI5hMjMilISr4=;
        b=MZvNAsqkuqqfL+IFfayQrysqP1g1iXQ7KwT0DvJT8NyFocr7jt5pinrep46mbbCNYc
         i6YjYublqOuaOenPuBn6jMFjXL2M5Bt6Bm0Optd+vui1I7Bd7UrRh1dfHcM9lj1FdSwr
         Uk315gh8LE+zZJuzr4Ly1y+KxegONAOwO04Vc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:from:x-mailer:x-priority:message-id:to:cc:subject:in-reply-to
         :references:mime-version:content-type:content-transfer-encoding;
        b=SN9aWuDpVmg4rvlLXOOqKSyBI68x4eQeXZN/ylFRXdk4HdShKd5NI81uJRmceoePHV
         zYR9+tsjExrPih1ksAPi9RF2eQXyWGqCgZPhzINdNnKREEQXlhITNX2rNZpUFxMoAL3N
         ARhFtQq66xOwF3bsA//PBtlv73exFDWMwoORI=
Received: by 10.103.245.18 with SMTP id x18mr1978979mur.20.1221669350029;
        Wed, 17 Sep 2008 09:35:50 -0700 (PDT)
Received: from D620 ( [87.206.64.119])
        by mx.google.com with ESMTPS id s10sm18051216muh.12.2008.09.17.09.35.47
        (version=SSLv3 cipher=OTHER);
        Wed, 17 Sep 2008 09:35:48 -0700 (PDT)
Date: Wed, 17 Sep 2008 18:35:35 +0200
From: =?iso-8859-2?Q?Wojciech_Strza=B3ka?= <wstrzalka@gmail.com>
X-Mailer: The Bat! (v3.99)
X-Priority: 3 (Normal)
Message-ID: <1905534821.20080917183535@gmail.com>
To: "Jason Rutherglen" <jason.rutherglen@gmail.com>
CC: java-user@lucene.apache.org
Subject: Re[4]: Frequently updated fields
In-Reply-To: <85d3c3b60809160647j679ef7c2v8fe6f943294b297f@mail.gmail.com>
References: <1221781428.20080912135749@gmail.com> <6E7487CD-2836-4B3C-9940-67F989F018E8@gmail.com> <48CA9C3B.3050901@correobancomer.com> <48CAC7A4.3040705@gmail.com> <85d3c3b60809121258x567af9f2j19cc280dc43b0224@mail.gmail.com> <1973600379.20080916145608@gmail.com> <85d3c3b60809160647j679ef7c2v8fe6f943294b297f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-2
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

=0D=0A  I'll ask my boss. I don't expect it to be soon, but when SOLR will =
be
  implemented, we will see how it works for us and maybe we will want
  the feature, as we already have very good experience in sponsoring
  Open Source features.
  Can you tell me how big the project is? Are we talking about
  hundreds, thousands, tenth of thousands $ ?
  Do you think integration with SOLR would be also possible?

> Hi Wojciech,

> The code isn't ready, it is a major project and I am trying to also
> complete the realtime indexing patches and look for a job.  I believe
> that the tag indexing stuff is of interest to many people so if there
> is someone who can pay to get it completed feel free to contact me as
> I am available to do so.  The goal is to integrate tag index into
> realtime indexing so that it is seamless and easy to use.  This will
> not be easy however I gained a lot of knowledge on how to implement
> realtime search design when writing the realtime indexing and serach
> code.

> Jason

> On Tue, Sep 16, 2008 at 8:56 AM, Wojciech Strza=B3ka <wstrzalka@gmail.com=
> wrote:
>>
>>  I saw your comments on JIRA. You mentioned about rework and I'm wonderi=
ng if the currently
>>  available patch is production ready (functionally complete)?
>>  Will the code after rework work with the index build with the current
>>  version?
>>
>>  I'm quite new to SOLR/Lucene but I hope I could write custom
>>  SearchComponent to SOLR based on yours Tag Index and this way get
>>  exactly what I need.
>>
>>  And one more question:  I don't really get now how could I setup field =
to be indexed by
>>  TagIndexWriter instead of TagWriter. I know it's somehow handled by
>>  ParallelIndexWriter but how can I setup it?
>>
>>
>>> Yes Tag Index will work.  I have not had time to complete it however
>>> if you are interested in working on it please feel free to contact me.
>>
>>> On Fri, Sep 12, 2008 at 3:48 PM, Mark Miller <markrmiller@gmail.com> wr=
ote:
>>>> You might check out the tagindex issue in jira as well. Havn't looked =
at it
>>>> myself, but I believe its supposed to be an option for this.
>>>>
>>>> Gerardo Segura wrote:
>>>>>
>>>>> I think the important question is: in general how to cope with freque=
ntly
>>>>> changing fields.
>>>>>
>>>>>
>>>>> Karl Wettin wrote:
>>>>>>
>>>>>> Hi Wojciech,
>>>>>>
>>>>>> can you please give us a bit more specific information about the meta
>>>>>> data fields that will change? I would recommend you looking at creat=
ing
>>>>>> filters from your primary persistency for query clauses such as unre=
ad/read,
>>>>>> mailbox folders, et c.
>>>>>>
>>>>>>      karl
>>>>>>
>>>>>> 12 sep 2008 kl. 13.57 skrev Wojciech Strza?ka:
>>>>>>
>>>>>>> Hi.
>>>>>>>
>>>>>>>  I'm new to Lucene and I would like to get a few answers (they can
>>>>>>>  be lame)
>>>>>>>
>>>>>>>  I want to index large amount of emails using Lucene (maybe SOLR), =
not
>>>>>>> only
>>>>>>>  the contents but also some metadata like state or flags. The
>>>>>>>  problem is that the metadata will change during mail lifecycle,
>>>>>>>  although much smaller updating this information will require
>>>>>>>  reindex the whole mail content which I see performance bottleneck.
>>>>>>>
>>>>>>>  I have the data in DB also so my first question is:
>>>>>>>
>>>>>>>  - are there any best practices to implement my needs (querying both
>>>>>>>  lucene & DB and then merging in memory?, close one eye and re-index
>>>>>>>  the whole content on every metadata change? others?)
>>>>>>>
>>>>>>>  - is at all Lucene good solution for my problem?
>>>>>>>
>>>>>>>  - are there any plans to implement field updates in more efficient=
 way
>>>>>>> then
>>>>>>>  delete/insert the whole document? if yes what's the time horizon?
>>>>>>>
>>>>>>>
>>>>>>>                                       Best regards
>>>>>>>                                              Wojtek
>>>>>>>
>>>>>>>
>>>>>>> -------------------------------------------------------------------=
--
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> --
>> Pozdrowienia,
>>  Wojciech Strzalka
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>



--=20
Pozdrowienia,
 Wojciech Strza=B3ka


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 17 16:45:53 2008
Return-Path: <java-user-return-36233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88610 invoked from network); 17 Sep 2008 16:45:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2008 16:45:53 -0000
Received: (qmail 21840 invoked by uid 500); 17 Sep 2008 16:45:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20990 invoked by uid 500); 17 Sep 2008 16:45:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20979 invoked by uid 99); 17 Sep 2008 16:45:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 09:45:43 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 16:44:44 +0000
Received: by ug-out-1314.google.com with SMTP id j3so556008ugf.23
        for <java-user@lucene.apache.org>; Wed, 17 Sep 2008 09:45:05 -0700 (PDT)
Received: by 10.67.98.15 with SMTP id a15mr2320824ugm.15.1221669904780;
        Wed, 17 Sep 2008 09:45:04 -0700 (PDT)
Received: by 10.66.251.14 with HTTP; Wed, 17 Sep 2008 09:45:04 -0700 (PDT)
Message-ID: <11e852b50809170945y5bdafa01q286eaab56911557f@mail.gmail.com>
Date: Wed, 17 Sep 2008 17:45:04 +0100
From: "Chris Mannion" <chris.mannion@nonstopgov.com>
To: java-user@lucene.apache.org
Subject: index ignoring updates
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12941_25101758.1221669904791"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_12941_25101758.1221669904791
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All

I'm having a problem with our lucene index and wondering if anyone else has
encountered anything similar or has any idea of what I might look at to find
the cause/solution.  We had a working tomcat setup in which records were
regularly uploaded into a lucene index, each upload removed old records from
the index and inserted new ones, and a website running on the tomcat server
had a page to search and display records from that index.  Recently the
whole setup has been moved to a new server by simply copying the complete
tomcat directory across (the lucene index files are stored within the tomcat
directory structure) and since then the process has fallen appart, uploads
are still loaded in as before, removing old data and inserting new, without
any errors occuring and with the insert and remove calls returning the
correct numbers of records processed, but when we search the index, it seems
as though no uploads have been done, the data the search returns is the old
data.  Even more oddly, monitoring the numbers of records in the index as
reported by the upload process seems to imply that the data is changing
correctly, but the search doesn't reflect this.

For example, originally the index contained 1292 records of a certain type.
On uploading a new set of 1219 of the records, the index reported that 1292
of that type had been removed and 1219 inserted.  Subsequent uploads of the
same new set of data reported that 1219 records had been dropped from the
index and again 1219 inserted, implying that the initial upload had worked
as expected.  However, the search still continue to find 1292 records.  We
flush and optimize the index after each upload and for the past year the
system has worked fine, it's only since being copied onto a new server that
this odd behaviour has started.  Any ideas would be gratefully received, I'm
completely puzzled.

-- 
Chris Mannion
iCasework and LocalAlert implementation team
0208 144 4416

------=_Part_12941_25101758.1221669904791--

From java-user-return-36234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 17 17:45:23 2008
Return-Path: <java-user-return-36234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33037 invoked from network); 17 Sep 2008 17:45:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2008 17:45:23 -0000
Received: (qmail 37429 invoked by uid 500); 17 Sep 2008 17:45:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36624 invoked by uid 500); 17 Sep 2008 17:45:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36613 invoked by uid 99); 17 Sep 2008 17:45:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 10:45:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 64.233.178.246 as permitted sender)
Received: from [64.233.178.246] (HELO hs-out-0708.google.com) (64.233.178.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 17:44:13 +0000
Received: by hs-out-0708.google.com with SMTP id 4so1116012hsl.5
        for <java-user@lucene.apache.org>; Wed, 17 Sep 2008 10:44:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:cc:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=3zgy5z0dhNfg9RrKuRV24rMnwL9sg6I0pkjvBSjevnc=;
        b=K9uJ+T3cuiMrzwvPWf+piENTCOxD3N8ivn+NoZSWvmIiVtbD1vbq28R2CpRp3gBmQr
         MHgOgskO3VOIJFkg3BHqsun6oWQkFmgj85CIT0Eh3vTp1bGUUwDK+EMn0IK+4Ay4kn1d
         X+K/X65YPPI1bZT9L2GExFJReerTsyhVOfmvk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:cc:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=sfQ/62uajbRrRpoljrO3HUkTPkIfdgK1YepIqqA3cWZ4AcmWvw9U9FCPjwf7dYCm4X
         a4z6wMWXiqtSzJ+bwS0U/GeSOQS1gZIgj9ZCWdRlsCzbglbd40SBP4hEYWxU+tN2UhOm
         7OAULQOf24VQhfXtjsT5gwnwu6mxHXRWLo9zg=
Received: by 10.151.38.12 with SMTP id q12mr3955595ybj.198.1221673485276;
        Wed, 17 Sep 2008 10:44:45 -0700 (PDT)
Received: by 10.151.117.4 with HTTP; Wed, 17 Sep 2008 10:44:45 -0700 (PDT)
Message-ID: <85d3c3b60809171044x56213267hf25cccd8efc5b340@mail.gmail.com>
Date: Wed, 17 Sep 2008 13:44:45 -0400
From: "Jason Rutherglen" <jason.rutherglen@gmail.com>
To: "=?ISO-8859-2?Q?Wojciech_Strza=B3ka?=" <wstrzalka@gmail.com>
Subject: Re: Re[4]: Frequently updated fields
Cc: java-user@lucene.apache.org
In-Reply-To: <1905534821.20080917183535@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-2
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <1221781428.20080912135749@gmail.com>
	 <6E7487CD-2836-4B3C-9940-67F989F018E8@gmail.com>
	 <48CA9C3B.3050901@correobancomer.com> <48CAC7A4.3040705@gmail.com>
	 <85d3c3b60809121258x567af9f2j19cc280dc43b0224@mail.gmail.com>
	 <1973600379.20080916145608@gmail.com>
	 <85d3c3b60809160647j679ef7c2v8fe6f943294b297f@mail.gmail.com>
	 <1905534821.20080917183535@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

SGkgV29qY2llY2gsCgpJbnRlZ3JhdGlvbiB3aXRoIFNPTFIgd291bGQgYmUgaWRlYWwuICBIb3dl
dmVyIHRoYXQgd291bGQKdGFrZSBtb3JlIHRpbWUuICBJdCBkZXBlbmRzIG9uIHRoZSBleGFjdCBm
ZWF0dXJlcy4gIFRoZXJlIGlzIGF0IGxlYXN0Cm9uZSBwYXRjaCB0byBJbmRleFdyaXRlci4gIFRo
ZSBtZXJnaW5nIGlzIHRoZSBwYXJ0IHRoYXQgbmVlZHMgdG8gYmUKc3luY2hyb25pemVkIGFuZCB0
aGlzIGlzIHdoZXJlIEkgYW0gaGVzaXRhbnQgYmVjYXVzZSBPY2Vhbi9yZWFsdGltZQpzZWFyY2gg
cGVyZm9ybXMgbWVyZ2VzIG91dHNpZGUgb2YgdGhlIEluZGV4V3JpdGVyIG1lcmdpbmcgdG8gbWFr
ZQppdCByZWFsdGltZS4gIEhvd2V2ZXIgaW50ZWdyYXRpbmcgd2l0aCBJbmRleFdyaXRlciBpcyB0
aGUgbG9uZyB0ZXJtCndheSB0byBnbyBhcyBpdCBsb29rcyBsaWtlIEluZGV4V3JpdGVyIHdpbGwg
YmUgcmVhbHRpbWUgYXMgd2VsbCBzb29uLgoKCjIwMDgvOS8xNyBXb2pjaWVjaCBTdHJ6YbNrYSA8
d3N0cnphbGthQGdtYWlsLmNvbT46Cj4KPiAgSSdsbCBhc2sgbXkgYm9zcy4gSSBkb24ndCBleHBl
Y3QgaXQgdG8gYmUgc29vbiwgYnV0IHdoZW4gU09MUiB3aWxsIGJlCj4gIGltcGxlbWVudGVkLCB3
ZSB3aWxsIHNlZSBob3cgaXQgd29ya3MgZm9yIHVzIGFuZCBtYXliZSB3ZSB3aWxsIHdhbnQKPiAg
dGhlIGZlYXR1cmUsIGFzIHdlIGFscmVhZHkgaGF2ZSB2ZXJ5IGdvb2QgZXhwZXJpZW5jZSBpbiBz
cG9uc29yaW5nCj4gIE9wZW4gU291cmNlIGZlYXR1cmVzLgo+ICBDYW4geW91IHRlbGwgbWUgaG93
IGJpZyB0aGUgcHJvamVjdCBpcz8gQXJlIHdlIHRhbGtpbmcgYWJvdXQKPiAgaHVuZHJlZHMsIHRo
b3VzYW5kcywgdGVudGggb2YgdGhvdXNhbmRzICQgPwo+ICBEbyB5b3UgdGhpbmsgaW50ZWdyYXRp
b24gd2l0aCBTT0xSIHdvdWxkIGJlIGFsc28gcG9zc2libGU/Cj4KPj4gSGkgV29qY2llY2gsCj4K
Pj4gVGhlIGNvZGUgaXNuJ3QgcmVhZHksIGl0IGlzIGEgbWFqb3IgcHJvamVjdCBhbmQgSSBhbSB0
cnlpbmcgdG8gYWxzbwo+PiBjb21wbGV0ZSB0aGUgcmVhbHRpbWUgaW5kZXhpbmcgcGF0Y2hlcyBh
bmQgbG9vayBmb3IgYSBqb2IuICBJIGJlbGlldmUKPj4gdGhhdCB0aGUgdGFnIGluZGV4aW5nIHN0
dWZmIGlzIG9mIGludGVyZXN0IHRvIG1hbnkgcGVvcGxlIHNvIGlmIHRoZXJlCj4+IGlzIHNvbWVv
bmUgd2hvIGNhbiBwYXkgdG8gZ2V0IGl0IGNvbXBsZXRlZCBmZWVsIGZyZWUgdG8gY29udGFjdCBt
ZSBhcwo+PiBJIGFtIGF2YWlsYWJsZSB0byBkbyBzby4gIFRoZSBnb2FsIGlzIHRvIGludGVncmF0
ZSB0YWcgaW5kZXggaW50bwo+PiByZWFsdGltZSBpbmRleGluZyBzbyB0aGF0IGl0IGlzIHNlYW1s
ZXNzIGFuZCBlYXN5IHRvIHVzZS4gIFRoaXMgd2lsbAo+PiBub3QgYmUgZWFzeSBob3dldmVyIEkg
Z2FpbmVkIGEgbG90IG9mIGtub3dsZWRnZSBvbiBob3cgdG8gaW1wbGVtZW50Cj4+IHJlYWx0aW1l
IHNlYXJjaCBkZXNpZ24gd2hlbiB3cml0aW5nIHRoZSByZWFsdGltZSBpbmRleGluZyBhbmQgc2Vy
YWNoCj4+IGNvZGUuCj4KPj4gSmFzb24KPgo+PiBPbiBUdWUsIFNlcCAxNiwgMjAwOCBhdCA4OjU2
IEFNLCBXb2pjaWVjaCBTdHJ6YbNrYSA8d3N0cnphbGthQGdtYWlsLmNvbT4gd3JvdGU6Cj4+Pgo+
Pj4gIEkgc2F3IHlvdXIgY29tbWVudHMgb24gSklSQS4gWW91IG1lbnRpb25lZCBhYm91dCByZXdv
cmsgYW5kIEknbSB3b25kZXJpbmcgaWYgdGhlIGN1cnJlbnRseQo+Pj4gIGF2YWlsYWJsZSBwYXRj
aCBpcyBwcm9kdWN0aW9uIHJlYWR5IChmdW5jdGlvbmFsbHkgY29tcGxldGUpPwo+Pj4gIFdpbGwg
dGhlIGNvZGUgYWZ0ZXIgcmV3b3JrIHdvcmsgd2l0aCB0aGUgaW5kZXggYnVpbGQgd2l0aCB0aGUg
Y3VycmVudAo+Pj4gIHZlcnNpb24/Cj4+Pgo+Pj4gIEknbSBxdWl0ZSBuZXcgdG8gU09MUi9MdWNl
bmUgYnV0IEkgaG9wZSBJIGNvdWxkIHdyaXRlIGN1c3RvbQo+Pj4gIFNlYXJjaENvbXBvbmVudCB0
byBTT0xSIGJhc2VkIG9uIHlvdXJzIFRhZyBJbmRleCBhbmQgdGhpcyB3YXkgZ2V0Cj4+PiAgZXhh
Y3RseSB3aGF0IEkgbmVlZC4KPj4+Cj4+PiAgQW5kIG9uZSBtb3JlIHF1ZXN0aW9uOiAgSSBkb24n
dCByZWFsbHkgZ2V0IG5vdyBob3cgY291bGQgSSBzZXR1cCBmaWVsZCB0byBiZSBpbmRleGVkIGJ5
Cj4+PiAgVGFnSW5kZXhXcml0ZXIgaW5zdGVhZCBvZiBUYWdXcml0ZXIuIEkga25vdyBpdCdzIHNv
bWVob3cgaGFuZGxlZCBieQo+Pj4gIFBhcmFsbGVsSW5kZXhXcml0ZXIgYnV0IGhvdyBjYW4gSSBz
ZXR1cCBpdD8KPj4+Cj4+Pgo+Pj4+IFllcyBUYWcgSW5kZXggd2lsbCB3b3JrLiAgSSBoYXZlIG5v
dCBoYWQgdGltZSB0byBjb21wbGV0ZSBpdCBob3dldmVyCj4+Pj4gaWYgeW91IGFyZSBpbnRlcmVz
dGVkIGluIHdvcmtpbmcgb24gaXQgcGxlYXNlIGZlZWwgZnJlZSB0byBjb250YWN0IG1lLgo+Pj4K
Pj4+PiBPbiBGcmksIFNlcCAxMiwgMjAwOCBhdCAzOjQ4IFBNLCBNYXJrIE1pbGxlciA8bWFya3Jt
aWxsZXJAZ21haWwuY29tPiB3cm90ZToKPj4+Pj4gWW91IG1pZ2h0IGNoZWNrIG91dCB0aGUgdGFn
aW5kZXggaXNzdWUgaW4gamlyYSBhcyB3ZWxsLiBIYXZuJ3QgbG9va2VkIGF0IGl0Cj4+Pj4+IG15
c2VsZiwgYnV0IEkgYmVsaWV2ZSBpdHMgc3VwcG9zZWQgdG8gYmUgYW4gb3B0aW9uIGZvciB0aGlz
Lgo+Pj4+Pgo+Pj4+PiBHZXJhcmRvIFNlZ3VyYSB3cm90ZToKPj4+Pj4+Cj4+Pj4+PiBJIHRoaW5r
IHRoZSBpbXBvcnRhbnQgcXVlc3Rpb24gaXM6IGluIGdlbmVyYWwgaG93IHRvIGNvcGUgd2l0aCBm
cmVxdWVudGx5Cj4+Pj4+PiBjaGFuZ2luZyBmaWVsZHMuCj4+Pj4+Pgo+Pj4+Pj4KPj4+Pj4+IEth
cmwgV2V0dGluIHdyb3RlOgo+Pj4+Pj4+Cj4+Pj4+Pj4gSGkgV29qY2llY2gsCj4+Pj4+Pj4KPj4+
Pj4+PiBjYW4geW91IHBsZWFzZSBnaXZlIHVzIGEgYml0IG1vcmUgc3BlY2lmaWMgaW5mb3JtYXRp
b24gYWJvdXQgdGhlIG1ldGEKPj4+Pj4+PiBkYXRhIGZpZWxkcyB0aGF0IHdpbGwgY2hhbmdlPyBJ
IHdvdWxkIHJlY29tbWVuZCB5b3UgbG9va2luZyBhdCBjcmVhdGluZwo+Pj4+Pj4+IGZpbHRlcnMg
ZnJvbSB5b3VyIHByaW1hcnkgcGVyc2lzdGVuY3kgZm9yIHF1ZXJ5IGNsYXVzZXMgc3VjaCBhcyB1
bnJlYWQvcmVhZCwKPj4+Pj4+PiBtYWlsYm94IGZvbGRlcnMsIGV0IGMuCj4+Pj4+Pj4KPj4+Pj4+
PiAgICAgIGthcmwKPj4+Pj4+Pgo+Pj4+Pj4+IDEyIHNlcCAyMDA4IGtsLiAxMy41NyBza3JldiBX
b2pjaWVjaCBTdHJ6YT9rYToKPj4+Pj4+Pgo+Pj4+Pj4+PiBIaS4KPj4+Pj4+Pj4KPj4+Pj4+Pj4g
IEknbSBuZXcgdG8gTHVjZW5lIGFuZCBJIHdvdWxkIGxpa2UgdG8gZ2V0IGEgZmV3IGFuc3dlcnMg
KHRoZXkgY2FuCj4+Pj4+Pj4+ICBiZSBsYW1lKQo+Pj4+Pj4+Pgo+Pj4+Pj4+PiAgSSB3YW50IHRv
IGluZGV4IGxhcmdlIGFtb3VudCBvZiBlbWFpbHMgdXNpbmcgTHVjZW5lIChtYXliZSBTT0xSKSwg
bm90Cj4+Pj4+Pj4+IG9ubHkKPj4+Pj4+Pj4gIHRoZSBjb250ZW50cyBidXQgYWxzbyBzb21lIG1l
dGFkYXRhIGxpa2Ugc3RhdGUgb3IgZmxhZ3MuIFRoZQo+Pj4+Pj4+PiAgcHJvYmxlbSBpcyB0aGF0
IHRoZSBtZXRhZGF0YSB3aWxsIGNoYW5nZSBkdXJpbmcgbWFpbCBsaWZlY3ljbGUsCj4+Pj4+Pj4+
ICBhbHRob3VnaCBtdWNoIHNtYWxsZXIgdXBkYXRpbmcgdGhpcyBpbmZvcm1hdGlvbiB3aWxsIHJl
cXVpcmUKPj4+Pj4+Pj4gIHJlaW5kZXggdGhlIHdob2xlIG1haWwgY29udGVudCB3aGljaCBJIHNl
ZSBwZXJmb3JtYW5jZSBib3R0bGVuZWNrLgo+Pj4+Pj4+Pgo+Pj4+Pj4+PiAgSSBoYXZlIHRoZSBk
YXRhIGluIERCIGFsc28gc28gbXkgZmlyc3QgcXVlc3Rpb24gaXM6Cj4+Pj4+Pj4+Cj4+Pj4+Pj4+
ICAtIGFyZSB0aGVyZSBhbnkgYmVzdCBwcmFjdGljZXMgdG8gaW1wbGVtZW50IG15IG5lZWRzIChx
dWVyeWluZyBib3RoCj4+Pj4+Pj4+ICBsdWNlbmUgJiBEQiBhbmQgdGhlbiBtZXJnaW5nIGluIG1l
bW9yeT8sIGNsb3NlIG9uZSBleWUgYW5kIHJlLWluZGV4Cj4+Pj4+Pj4+ICB0aGUgd2hvbGUgY29u
dGVudCBvbiBldmVyeSBtZXRhZGF0YSBjaGFuZ2U/IG90aGVycz8pCj4+Pj4+Pj4+Cj4+Pj4+Pj4+
ICAtIGlzIGF0IGFsbCBMdWNlbmUgZ29vZCBzb2x1dGlvbiBmb3IgbXkgcHJvYmxlbT8KPj4+Pj4+
Pj4KPj4+Pj4+Pj4gIC0gYXJlIHRoZXJlIGFueSBwbGFucyB0byBpbXBsZW1lbnQgZmllbGQgdXBk
YXRlcyBpbiBtb3JlIGVmZmljaWVudCB3YXkKPj4+Pj4+Pj4gdGhlbgo+Pj4+Pj4+PiAgZGVsZXRl
L2luc2VydCB0aGUgd2hvbGUgZG9jdW1lbnQ/IGlmIHllcyB3aGF0J3MgdGhlIHRpbWUgaG9yaXpv
bj8KPj4+Pj4+Pj4KPj4+Pj4+Pj4KPj4+Pj4+Pj4gICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBCZXN0IHJlZ2FyZHMKPj4+Pj4+Pj4gICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgV29qdGVrCj4+Pj4+Pj4+Cj4+Pj4+Pj4+Cj4+Pj4+Pj4+IC0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLQo+Pj4+Pj4+PiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5z
dWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPj4+Pj4+Pj4gRm9yIGFkZGl0aW9uYWwgY29tbWFu
ZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcKPj4+Pj4+Pj4KPj4+
Pj4+Pgo+Pj4+Pj4+Cj4+Pj4+Pj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4+Pj4+Pj4gVG8gdW5zdWJzY3JpYmUs
IGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4+Pj4+Pj4g
Rm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFw
YWNoZS5vcmcKPj4+Pj4+Pgo+Pj4+Pj4+Cj4+Pj4+Pgo+Pj4+Pj4KPj4+Pj4+IC0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LQo+Pj4+Pj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1
Y2VuZS5hcGFjaGUub3JnCj4+Pj4+PiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBq
YXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+Pj4+Pj4KPj4+Pj4KPj4+Pj4KPj4+Pj4g
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tCj4+Pj4+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1
YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+Pj4+PiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywg
ZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+Pj4+Pgo+Pj4+Pgo+Pj4K
Pj4+PiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0KPj4+PiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXIt
dW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPj4+PiBGb3IgYWRkaXRpb25hbCBjb21tYW5k
cywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+Pj4KPj4+Cj4+Pgo+
Pj4gLS0KPj4+IFBvemRyb3dpZW5pYSwKPj4+ICBXb2pjaWVjaCBTdHJ6YWxrYQo+Pj4KPj4+Cj4+
PiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0KPj4+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1
YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+Pj4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUt
bWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcKPj4+Cj4+Pgo+Cj4KPgo+IC0t
Cj4gUG96ZHJvd2llbmlhLAo+ICBXb2pjaWVjaCBTdHJ6YbNrYQo+Cj4K


From java-user-return-36235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 17 17:51:13 2008
Return-Path: <java-user-return-36235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36850 invoked from network); 17 Sep 2008 17:51:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2008 17:51:12 -0000
Received: (qmail 50946 invoked by uid 500); 17 Sep 2008 17:51:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50919 invoked by uid 500); 17 Sep 2008 17:51:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50908 invoked by uid 99); 17 Sep 2008 17:51:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 10:51:02 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 216.239.58.190 as permitted sender)
Received: from [216.239.58.190] (HELO gv-out-0910.google.com) (216.239.58.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 17:50:04 +0000
Received: by gv-out-0910.google.com with SMTP id p33so1632536gvf.23
        for <java-user@lucene.apache.org>; Wed, 17 Sep 2008 10:50:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=ayBi8Pow+cGUtCYe7WPrfmC+YT/5RYclwe5GxGYhyBw=;
        b=pcBouPb8A6Awp1yfsZpXzwEG92U7CU7fM9g6x1g6qYQZgv6gXDQSupsdug9DyXLCpQ
         GM6cAw4CfETujdu4DH0dSoLCSbJl9GAlZUsGPi7Q+OCqD0RoRqmGaVA4eyKVKSlVdxE0
         QrWWPym2Z+lbUmIC4hVHjNoX1tbaBWq/CB/Co=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=uVeClu+eOiWYSQ3EOLXCNTyGDkAw5y0HbrzY7J6FffOc9ExkAFkUQBo3O+e8WvXtEW
         dlcgajKGoP0abF5zJtdbLnUCInQ7lC8dXI+b3f6WF98JyL9O9x6Yg/SlgK/zkWeVHl2i
         PmPBye+I8wqFLnGOJesAe1MyWM9ip458TyDmc=
Received: by 10.86.76.16 with SMTP id y16mr2209239fga.10.1221673835767;
        Wed, 17 Sep 2008 10:50:35 -0700 (PDT)
Received: by 10.86.76.4 with HTTP; Wed, 17 Sep 2008 10:50:30 -0700 (PDT)
Message-ID: <359a92830809171050k7895ca6lefa7d570c0817a5d@mail.gmail.com>
Date: Wed, 17 Sep 2008 13:50:30 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: index ignoring updates
In-Reply-To: <11e852b50809170945y5bdafa01q286eaab56911557f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5533_22773371.1221673830746"
References: <11e852b50809170945y5bdafa01q286eaab56911557f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5533_22773371.1221673830746
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

A couple of things come to mind:

1> are you absolutely certain that you're opening the index
    file you *think* you are? I'd try being really crude and renaming
    the index file and restarting my server. Perhaps you're
    pointing to the index on the *old* server when searching.

2> Are you absolutely sure you're closing and reopening your
     readers after the update? You'd be able to tell this by restarting
     your server and seeing if your searches worked then.

3> Get a copy of Luke and examine your index, that'll tell you a lot
     about how it's changing (or not).....

Sounds to me like somehow there's a mismatch between the index you're
updating and the one you're searching, but that's a WAG.

Best
Erick

On Wed, Sep 17, 2008 at 12:45 PM, Chris Mannion <
chris.mannion@nonstopgov.com> wrote:

> Hi All
>
> I'm having a problem with our lucene index and wondering if anyone else has
> encountered anything similar or has any idea of what I might look at to
> find
> the cause/solution.  We had a working tomcat setup in which records were
> regularly uploaded into a lucene index, each upload removed old records
> from
> the index and inserted new ones, and a website running on the tomcat server
> had a page to search and display records from that index.  Recently the
> whole setup has been moved to a new server by simply copying the complete
> tomcat directory across (the lucene index files are stored within the
> tomcat
> directory structure) and since then the process has fallen appart, uploads
> are still loaded in as before, removing old data and inserting new, without
> any errors occuring and with the insert and remove calls returning the
> correct numbers of records processed, but when we search the index, it
> seems
> as though no uploads have been done, the data the search returns is the old
> data.  Even more oddly, monitoring the numbers of records in the index as
> reported by the upload process seems to imply that the data is changing
> correctly, but the search doesn't reflect this.
>
> For example, originally the index contained 1292 records of a certain type.
> On uploading a new set of 1219 of the records, the index reported that 1292
> of that type had been removed and 1219 inserted.  Subsequent uploads of the
> same new set of data reported that 1219 records had been dropped from the
> index and again 1219 inserted, implying that the initial upload had worked
> as expected.  However, the search still continue to find 1292 records.  We
> flush and optimize the index after each upload and for the past year the
> system has worked fine, it's only since being copied onto a new server that
> this odd behaviour has started.  Any ideas would be gratefully received,
> I'm
> completely puzzled.
>
> --
> Chris Mannion
> iCasework and LocalAlert implementation team
> 0208 144 4416
>

------=_Part_5533_22773371.1221673830746--

From java-user-return-36236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 17 17:58:06 2008
Return-Path: <java-user-return-36236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40785 invoked from network); 17 Sep 2008 17:58:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2008 17:58:06 -0000
Received: (qmail 62405 invoked by uid 500); 17 Sep 2008 17:57:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62209 invoked by uid 500); 17 Sep 2008 17:57:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62198 invoked by uid 99); 17 Sep 2008 17:57:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 10:57:56 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a19.g.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 17:56:57 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a19.g.dreamhost.com (Postfix) with ESMTP id 28C9B10238
	for <java-user@lucene.apache.org>; Wed, 17 Sep 2008 10:57:29 -0700 (PDT)
Message-Id: <9369FAF5-1B36-4964-99DA-4C25BB524D36@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <1bcb7c7f0809170851s2aa11dddw8c26dc3f434b8f21@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: TopDocCollector & Paging
Date: Wed, 17 Sep 2008 13:57:28 -0400
References: <48d0ec07.0589300a.1573.7418@mx.google.com> <359a92830809170716p22ff113dt689f20fd96a2ef01@mail.gmail.com> <1bcb7c7f0809170851s2aa11dddw8c26dc3f434b8f21@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Sep 17, 2008, at 11:51 AM, Cam Bazz wrote:

> And how about queries that need starting position, like hits between
> 100 and 200?
>
>
> could we pass something to the collector that will count between 0 to
> 100 and then get the next 100 records?

The collector uses a Priority Queue to store doc ids and scores as  
they are collected.  All the collector knows is the document id and  
the score and, presumably what it has seen so far, to some extent.   
Ordering is not defined until all the candidate docs have been scored.

If you expect to do a lot of paging on a given set of results, I could  
imagine using an approach whereby you don't bother to insert entries  
if you've already seen them and could maybe save on some queue  
operations, but not sure how well it would work.

The other thing to do is just ask for slightly more than you think you  
will need in the first query, but it depends on your users.  Most  
users, in my experience, don't go beyond page 2 or 3 at most, so you  
could consider paying the cost to get the top 30 or 50 and caching  
that for your paging.  If you have other application specific  
knowledge, you can then adjust as appropriate.

-Grant

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 17 18:00:25 2008
Return-Path: <java-user-return-36237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42616 invoked from network); 17 Sep 2008 18:00:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2008 18:00:24 -0000
Received: (qmail 67143 invoked by uid 500); 17 Sep 2008 18:00:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66464 invoked by uid 500); 17 Sep 2008 18:00:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66453 invoked by uid 99); 17 Sep 2008 18:00:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 11:00:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.162.180 as permitted sender)
Received: from [209.85.162.180] (HELO el-out-1112.google.com) (209.85.162.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 17:59:15 +0000
Received: by el-out-1112.google.com with SMTP id p32so1828620elf.14
        for <java-user@lucene.apache.org>; Wed, 17 Sep 2008 10:59:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=Cwble4LbW7mkQUb0dngbM9YU2tQSueO6nNrh/fRlV/o=;
        b=cwPLsYtYtA/KL999juoCMvJlq0h2g/kRRVETH0HAC1WnJ1aFVyXNK0XCSMEhlaVMON
         9xt4ML5A8GuwdbhLiAvLYtrPHZ36pwmldAltXafmd5gZRTqYJhHnt1Wq1yFWjDYvGcBX
         UU1t81Qssc0MKF+90UHlCMIBezF2+ukcxhQm4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=QRIBkznGfm81mAZ6UHtn+d+SGHcBF2q7lhfO4Wee3pPE4IyE/imXKftyWGg2YCj4gw
         75VLLkRxCwiwQrUjqUPzwRnZxoJkiq5DuFXeD+uHcGsp79wkYJr0uHfh77sLHhWL7+/X
         AWzWMu2VVjzTSCi73KvRRIAKvxfIqayVPEM+I=
Received: by 10.150.206.11 with SMTP id d11mr4035468ybg.32.1221674387713;
        Wed, 17 Sep 2008 10:59:47 -0700 (PDT)
Received: by 10.151.117.4 with HTTP; Wed, 17 Sep 2008 10:59:47 -0700 (PDT)
Message-ID: <85d3c3b60809171059l7b0ac1b6g10c3a98be3b5b646@mail.gmail.com>
Date: Wed, 17 Sep 2008 13:59:47 -0400
From: "Jason Rutherglen" <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Sorting posting lists before intersection
In-Reply-To: <48D10726.4010504@getopt.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <48D0F5B5.9000406@deri.org> <48D10726.4010504@getopt.org>
X-Virus-Checked: Checked by ClamAV on apache.org

It would be a good feature in Lucene to be able to sort, or perhaps
store the postings in term frequency sorted order.  Thoughts?

On Wed, Sep 17, 2008 at 9:33 AM, Andrzej Bialecki <ab@getopt.org> wrote:
> Renaud Delbru wrote:
>>
>> Hi all,
>>
>> I am wondering if Lucene implements the query optimisation that consists
>> of ordering the posting lists based on the term frequency before
>> intersection ?
>> If yes, could somebody point me to the java class / method that implements
>> such strategy ?
>
> Lucene trunk: ConjunctionScorer, lines 85-103 - pay attention to the
> comments there, it's not strictly a sort by frequency, rather by the sampled
> "sparseness".
>
> --
> Best regards,
> Andrzej Bialecki     <><
>  ___. ___ ___ ___ _ _   __________________________________
> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> http://www.sigram.com  Contact: info at sigram dot com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 17 18:44:47 2008
Return-Path: <java-user-return-36238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76446 invoked from network); 17 Sep 2008 18:44:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2008 18:44:46 -0000
Received: (qmail 23399 invoked by uid 500); 17 Sep 2008 18:44:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23371 invoked by uid 500); 17 Sep 2008 18:44:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23360 invoked by uid 99); 17 Sep 2008 18:44:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 11:44:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 18:43:36 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 750F771C688; Wed, 17 Sep 2008 11:43:38 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 7164271C687
	for <java-user@lucene.apache.org>; Wed, 17 Sep 2008 11:43:38 -0700 (PDT)
Date: Wed, 17 Sep 2008 11:43:38 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher.search
In-Reply-To: <48D075DD.5050407@nuix.com>
Message-ID: <Pine.LNX.4.62.0809171135050.2301@radix.cryptio.net>
References: <682882.35954.qm@web50312.mail.re2.yahoo.com> <48CF2124.3090501@nuix.com>
 <Pine.LNX.4.62.0809161143560.12858@radix.cryptio.net> <48D075DD.5050407@nuix.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Well, it turns out the theoretical maximum for the Swing case is not
: Integer.MAX_VALUE, but is actually somewhere around 200 million due to
	...
: In reality memory runs out sooner, which is why I was considering on-disk
: storage of the topdocs.
: 
: But even if the user doesn't want to *see* the items which come back, quite
: often they do want to Select All and perform some operation (e.g. tag them,

I'm not sure where "Swing" came up in this thread ... or on-disk storage 
(was that something you mentioned in another similar thread?)

But it don'treally see how it chagnes anything ... if your goal is to 
perform an operating on every result in a set, why are you using 
TopDocSCollector?  why not write a HitCollector and perform your 
operation in the collect method?

: copy the data to somewhere.)  So regardless of the page size or the amount of
: data visible at any point in time, there is always the need to get the "set of
: every match" for any given search eventually.

I don't disagree with you, but is there a reason to have the entire set in 
memory all at once regardless of it's size?

At the end of the day: people switching to using TopDocsCollector 
instead of Hits are no worse off when trying to iterate over every result 
in a ginormous result set, they're just have to define "ginormous" 
for themselves, and the get an OOM right away instead of once they iterate 
up to that many.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 17 18:51:27 2008
Return-Path: <java-user-return-36239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83278 invoked from network); 17 Sep 2008 18:51:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2008 18:51:27 -0000
Received: (qmail 36912 invoked by uid 500); 17 Sep 2008 18:51:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36882 invoked by uid 500); 17 Sep 2008 18:51:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36871 invoked by uid 99); 17 Sep 2008 18:51:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 11:51:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 18:50:19 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 7577A71C741; Wed, 17 Sep 2008 11:50:52 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 63F0171C73F
	for <java-user@lucene.apache.org>; Wed, 17 Sep 2008 11:50:52 -0700 (PDT)
Date: Wed, 17 Sep 2008 11:50:52 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Replacing FAST functionality atsesam.no-ShingleFilter+exactmatching
In-Reply-To: <1221636848.17780.31.camel@localhost>
Message-ID: <Pine.LNX.4.62.0809171144570.2301@radix.cryptio.net>
References: <1221067074.8908.81.camel@localhost> 
 <9294E20AED46934EA459020706463F94EF3830@SUEXCL-02.ad.syr.edu> 
 <1221472589.8908.255.camel@localhost>  <Pine.LNX.4.62.0809161347550.12144@radix.cryptio.net>
 <1221636848.17780.31.camel@localhost>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: Does it make sense for me to rewrite the ShingleFilter patch to ensure
: the first token returned always has positionIncrement=1 regardless if
: enablePositions is true or false?

I don't know anything about ShingleFilter -- i've never looked at it and 
i'm not entirely certain i even understand what it does, let alone how 
your patch is attempting to modify it -- but if you've got code that takes 
in text and it produces multiple tokens as a result, then that first token 
it produces should (probably) have a non-zero positionIncrement.  if your 
code takes in "a" Token and produces multiple tokens to replace it, then 
the first token you produce should (probably) have the same 
positionIncrement as the input Token.


(Disclaimer; it's been a lon time since i worked with the TokenStream 
APIs, so i'm hoping my memory isn't faulty and someone else backs me up 
with a "yeah, that's correct")

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 17 20:25:07 2008
Return-Path: <java-user-return-36240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61236 invoked from network); 17 Sep 2008 20:25:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2008 20:25:07 -0000
Received: (qmail 26774 invoked by uid 500); 17 Sep 2008 20:24:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26738 invoked by uid 500); 17 Sep 2008 20:24:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26727 invoked by uid 99); 17 Sep 2008 20:24:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 13:24:56 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vivextra@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 20:23:57 +0000
Received: by ug-out-1314.google.com with SMTP id j3so615247ugf.23
        for <java-user@lucene.apache.org>; Wed, 17 Sep 2008 13:24:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=uuZGMlFAAemJXCeN7IZe4HvkJeUmckhte96BtSuZ2cM=;
        b=Xuq7z/bkBu9HbtoZ/KClMweGrPxnGWddtsV2g612GBOONMNyV6GBu1cZwarUJPYY1p
         pi/ClJDCaOe5kIReedRzO9oVH1W7ym4eYqe+7bqf9RKr5Sc00pbwV41HmJKTGXs0vmpC
         MqYjoyb1AojcKYfD1Wau4gGKF+b/ufdJYf2B4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=KYJ8w2TwcR7kQEw8/Qu19J8+c10Hxa9MsPl9pq7HITeovWN9hojhq6ipLffSFBO5nb
         8nOBPwN3yG+x+/D9iL8Ya0KrCDtt+3W4f5h5MGyXl0vizh8fJU0MbBgj0El0HAQ3JOvL
         gt2js75TJjzZ2caLFZjVXWw9Ia+C1HglReMDg=
Received: by 10.86.90.13 with SMTP id n13mr1448923fgb.3.1221683069204;
        Wed, 17 Sep 2008 13:24:29 -0700 (PDT)
Received: by 10.86.81.18 with HTTP; Wed, 17 Sep 2008 13:24:29 -0700 (PDT)
Message-ID: <a206fb7e0809171324g6320551cp4c4a7613314afc01@mail.gmail.com>
Date: Wed, 17 Sep 2008 13:24:29 -0700
From: "vivek sar" <vivextra@gmail.com>
To: java-user@lucene.apache.org
Subject: Background merge hit exception
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

 We have been running Lucene 2.3 for last few months with our
application and all the sudden we have hit the following exception,

       java.lang.RuntimeException: java.io.IOException: background
merge hit exception: _2uxy:c11345949 _2uxz:c150 _2uy0:c150 _2uy1:c150
_2uy2:c150 _2uy3:c150 _2uy4:c82 into _2uy5 [optimize]

I don't see any other error messages (or stacktrace) around this
exception message. This problem doesn't seem to be recoverable and the
indexer process is failing even after the reboot of the machine.

I've gone through the mailing list over this issue and saw few suggestions,

 1) Make sure you've enough disk space (x2 the index size)  - our
index size is around 5 GB and we have around 50GB space available so
this shouldn't be the case
 2) Is your machine multi-core - yes, this application is running on
Linux box with 8 CPUs, not sure if this is the problem

I can't update the code as this is running on the customer site. Here
are my questions,

   a) Is there any workaround to this problem without updating the code base?
   b) Is there a jira opened on this issue?
   c) Has this been fixed in the subsequent Lucene releases?

Thanks,
-vivek

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 17 20:40:10 2008
Return-Path: <java-user-return-36241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71932 invoked from network); 17 Sep 2008 20:40:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2008 20:40:10 -0000
Received: (qmail 64487 invoked by uid 500); 17 Sep 2008 20:40:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64312 invoked by uid 500); 17 Sep 2008 20:40:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64294 invoked by uid 99); 17 Sep 2008 20:40:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 13:40:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dckorah@gmail.com designates 209.85.142.188 as permitted sender)
Received: from [209.85.142.188] (HELO ti-out-0910.google.com) (209.85.142.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 20:39:01 +0000
Received: by ti-out-0910.google.com with SMTP id b8so1984008tic.11
        for <java-user@lucene.apache.org>; Wed, 17 Sep 2008 13:39:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=VcO1TA5pliFWzZhTHqvktXgridHmEEv1D+6IF/d95iM=;
        b=MPKVWYQ4/EHC04Ah1TzExESuGQFpRHK3gc/tNdRlSjeVIwbry/3QpYE4TbWRMGSsfT
         e/0CGNYgkLWuFHUSAhW+SCiQWZROOk3dAOAcJWZUG0pvrahkqn2xZPyTxi+llbjZXbgw
         3XQ+4s1eySPTxnt9fg/ZBPd5LaoiBoe/+O/n0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=wROTypJ8jk3f0bIsbhcbFdW7ZqpCAjGOcn0HsvY90rx98q2OPda48a3FvXjSR7UJBg
         kSx08lhewoL3UC91G4p75tNiF+QZo94XWofKAOFBM4JWvGZczPzsIWje0Ayxlogod1c+
         WnapxwZbhr0OfkDWqdHO/olpT7FRAgrwbqGNQ=
Received: by 10.110.46.3 with SMTP id t3mr3809362tit.33.1221683956196;
        Wed, 17 Sep 2008 13:39:16 -0700 (PDT)
Received: by 10.110.11.16 with HTTP; Wed, 17 Sep 2008 13:39:16 -0700 (PDT)
Message-ID: <926b35870809171339h1afccab8j2542963c916ab90a@mail.gmail.com>
Date: Wed, 17 Sep 2008 21:39:16 +0100
From: "Dino Korah" <dckorah@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: TopDocCollector & Paging
In-Reply-To: <9369FAF5-1B36-4964-99DA-4C25BB524D36@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_51822_26888218.1221683956177"
References: <48d0ec07.0589300a.1573.7418@mx.google.com>
	 <359a92830809170716p22ff113dt689f20fd96a2ef01@mail.gmail.com>
	 <1bcb7c7f0809170851s2aa11dddw8c26dc3f434b8f21@mail.gmail.com>
	 <9369FAF5-1B36-4964-99DA-4C25BB524D36@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_51822_26888218.1221683956177
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

SSBrbm93IGluIGFwcGxpY2F0aW9ucyB3aGVyZSB3ZSBzZWFyY2ggZm9yIGEgd29yZHMgb3IgcGhy
YXNlcyBhbmQgZXhwZWN0IHRoZQpyZXN1bHQgc29ydGVkIGJ5IHJlbGV2YW5jZSwgVG9wRG9jQ29s
bGVjdG9yIHdvdWxkIHdvcmsgbGlrZSBhIGRyZWFtLgpCdXQgd2hhdCBhYm91dCBzY2VuYXJpbyB3
aGVyZSB0aGUgcmVzdWx0IG5lZWRzIHRvIGJlIHNvcnRlZCBjaHJvbm9sb2dpY2FsbHkKb3IgYnkg
c29tZSBraW5kIG9mIG1ldGFkYXRhLgoKQSB2ZXJ5IGNvbW1vbiBhcHBsaWNhdGlvbiB3b3VsZCBi
ZSBlbWFpbCBhcHBsaWNhdGlvbnMuIElmIHNvbWVvbmUgaXMgdG8Kc2VhcmNoIG9uIHRoZSBJbmJv
eCwgdGhlIHJlc3VsdCB3aWxsIGJlIGV4cGVjdGVkIHRvIGFwcGVhciBzb3J0ZWQgYnkgZGF0ZS4K
SWYgdGhlcmUgYXJlIHRvbyBtYW55IHJlc3VsdHMsIHRoZSB1c2VyIHdpbGwgbW9zdCBwcm9iYWJs
eSBiZSB3aWxsaW5nIHRvCmxvb2sgdGhyb3VnaCBhIGZhaXIgcGFydCBvZiB0aGUgcmVzdWx0IGxp
c3QsIHdoaWNoIG1lYW5zIHBhZ2luZyB0aHJvdWdoIHRoZQpnZW5lcmF0ZWQgaGl0cy9yZXN1bHQg
aXMgcXVpdGUgaGFuZHkgZmVhdHVyZSBmb3IgYSBnZW5lcmljIGxpYnJhcnkuCgoyMDA4LzkvMTcg
R3JhbnQgSW5nZXJzb2xsIDxnc2luZ2Vyc0BhcGFjaGUub3JnPgoKPgo+IE9uIFNlcCAxNywgMjAw
OCwgYXQgMTE6NTEgQU0sIENhbSBCYXp6IHdyb3RlOgo+Cj4gIEFuZCBob3cgYWJvdXQgcXVlcmll
cyB0aGF0IG5lZWQgc3RhcnRpbmcgcG9zaXRpb24sIGxpa2UgaGl0cyBiZXR3ZWVuCj4+IDEwMCBh
bmQgMjAwPwo+Pgo+Pgo+PiBjb3VsZCB3ZSBwYXNzIHNvbWV0aGluZyB0byB0aGUgY29sbGVjdG9y
IHRoYXQgd2lsbCBjb3VudCBiZXR3ZWVuIDAgdG8KPj4gMTAwIGFuZCB0aGVuIGdldCB0aGUgbmV4
dCAxMDAgcmVjb3Jkcz8KPj4KPgo+IFRoZSBjb2xsZWN0b3IgdXNlcyBhIFByaW9yaXR5IFF1ZXVl
IHRvIHN0b3JlIGRvYyBpZHMgYW5kIHNjb3JlcyBhcyB0aGV5IGFyZQo+IGNvbGxlY3RlZC4gIEFs
bCB0aGUgY29sbGVjdG9yIGtub3dzIGlzIHRoZSBkb2N1bWVudCBpZCBhbmQgdGhlIHNjb3JlIGFu
ZCwKPiBwcmVzdW1hYmx5IHdoYXQgaXQgaGFzIHNlZW4gc28gZmFyLCB0byBzb21lIGV4dGVudC4g
IE9yZGVyaW5nIGlzIG5vdCBkZWZpbmVkCj4gdW50aWwgYWxsIHRoZSBjYW5kaWRhdGUgZG9jcyBo
YXZlIGJlZW4gc2NvcmVkLgo+Cj4gSWYgeW91IGV4cGVjdCB0byBkbyBhIGxvdCBvZiBwYWdpbmcg
b24gYSBnaXZlbiBzZXQgb2YgcmVzdWx0cywgSSBjb3VsZAo+IGltYWdpbmUgdXNpbmcgYW4gYXBw
cm9hY2ggd2hlcmVieSB5b3UgZG9uJ3QgYm90aGVyIHRvIGluc2VydCBlbnRyaWVzIGlmCj4geW91
J3ZlIGFscmVhZHkgc2VlbiB0aGVtIGFuZCBjb3VsZCBtYXliZSBzYXZlIG9uIHNvbWUgcXVldWUg
b3BlcmF0aW9ucywgYnV0Cj4gbm90IHN1cmUgaG93IHdlbGwgaXQgd291bGQgd29yay4KPgo+IFRo
ZSBvdGhlciB0aGluZyB0byBkbyBpcyBqdXN0IGFzayBmb3Igc2xpZ2h0bHkgbW9yZSB0aGFuIHlv
dSB0aGluayB5b3Ugd2lsbAo+IG5lZWQgaW4gdGhlIGZpcnN0IHF1ZXJ5LCBidXQgaXQgZGVwZW5k
cyBvbiB5b3VyIHVzZXJzLiAgTW9zdCB1c2VycywgaW4gbXkKPiBleHBlcmllbmNlLCBkb24ndCBn
byBiZXlvbmQgcGFnZSAyIG9yIDMgYXQgbW9zdCwgc28geW91IGNvdWxkIGNvbnNpZGVyCj4gcGF5
aW5nIHRoZSBjb3N0IHRvIGdldCB0aGUgdG9wIDMwIG9yIDUwIGFuZCBjYWNoaW5nIHRoYXQgZm9y
IHlvdXIgcGFnaW5nLgo+ICBJZiB5b3UgaGF2ZSBvdGhlciBhcHBsaWNhdGlvbiBzcGVjaWZpYyBr
bm93bGVkZ2UsIHlvdSBjYW4gdGhlbiBhZGp1c3QgYXMKPiBhcHByb3ByaWF0ZS4KPgo+IC1HcmFu
dAo+Cj4KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0KPiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXIt
dW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywg
ZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+Cj4KCgotLSAKZCBpIG4g
byBrIG8gciBhIGgKVGVsOiArNDQgNzk1NiA2NiA1MiA4MwotLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0KNTHCsDIxJzUwLjU5MDIiTiAwwrA2JzExLjgxMTYiVwo=
------=_Part_51822_26888218.1221683956177--

From java-user-return-36242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 17 20:54:37 2008
Return-Path: <java-user-return-36242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82460 invoked from network); 17 Sep 2008 20:54:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2008 20:54:37 -0000
Received: (qmail 96852 invoked by uid 500); 17 Sep 2008 20:54:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95911 invoked by uid 500); 17 Sep 2008 20:54:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95900 invoked by uid 99); 17 Sep 2008 20:54:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 13:54:26 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a10.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 20:53:26 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a10.g.dreamhost.com (Postfix) with ESMTP id A8D591615B9
	for <java-user@lucene.apache.org>; Wed, 17 Sep 2008 13:53:26 -0700 (PDT)
Message-Id: <3A489C21-DF32-461C-9ED1-0A04D80CA9BA@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <926b35870809171339h1afccab8j2542963c916ab90a@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: TopDocCollector & Paging
Date: Wed, 17 Sep 2008 16:53:25 -0400
References: <48d0ec07.0589300a.1573.7418@mx.google.com> <359a92830809170716p22ff113dt689f20fd96a2ef01@mail.gmail.com> <1bcb7c7f0809170851s2aa11dddw8c26dc3f434b8f21@mail.gmail.com> <9369FAF5-1B36-4964-99DA-4C25BB524D36@apache.org> <926b35870809171339h1afccab8j2542963c916ab90a@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Sep 17, 2008, at 4:39 PM, Dino Korah wrote:

> I know in applications where we search for a words or phrases and =20
> expect the
> result sorted by relevance, TopDocCollector would work like a dream.
> But what about scenario where the result needs to be sorted =20
> chronologically
> or by some kind of metadata.
>
> A very common application would be email applications. If someone is =20=

> to
> search on the Inbox, the result will be expected to appear sorted by =20=

> date.

Wouldn't you expect by relevance and then by date?  One way to achieve =20=

kind of what you want is a Function Query that uses the date as a =20
factor in the relevance score.

>
> If there are too many results, the user will most probably be =20
> willing to
> look through a fair part of the result list, which means paging =20
> through the
> generated hits/result is quite handy feature for a generic library.

Well, the way this is typically done is you ask for increasingly more =20=

results and re-execute the query.  Another way is to cache.  In my =20
experience, it usually is very fast to requery, especially once things =20=

are in the OS cache, etc.  I just don't see how you can say give me =20
results 100-100 if you don't know what results 1-99 are.

You said scoring was expensive, which maybe is true.  Have you =20
actually seen an issue w/ performance?  Are you doing really complex =20
queries?  Or are you searching on really common terms?  In your =20
original email that you have a 100M+ index.  Is this all on one machine?


>
>
> 2008/9/17 Grant Ingersoll <gsingers@apache.org>
>
>>
>> On Sep 17, 2008, at 11:51 AM, Cam Bazz wrote:
>>
>> And how about queries that need starting position, like hits between
>>> 100 and 200?
>>>
>>>
>>> could we pass something to the collector that will count between 0 =20=

>>> to
>>> 100 and then get the next 100 records?
>>>
>>
>> The collector uses a Priority Queue to store doc ids and scores as =20=

>> they are
>> collected.  All the collector knows is the document id and the =20
>> score and,
>> presumably what it has seen so far, to some extent.  Ordering is =20
>> not defined
>> until all the candidate docs have been scored.
>>
>> If you expect to do a lot of paging on a given set of results, I =20
>> could
>> imagine using an approach whereby you don't bother to insert =20
>> entries if
>> you've already seen them and could maybe save on some queue =20
>> operations, but
>> not sure how well it would work.
>>
>> The other thing to do is just ask for slightly more than you think =20=

>> you will
>> need in the first query, but it depends on your users.  Most users, =20=

>> in my
>> experience, don't go beyond page 2 or 3 at most, so you could =20
>> consider
>> paying the cost to get the top 30 or 50 and caching that for your =20
>> paging.
>> If you have other application specific knowledge, you can then =20
>> adjust as
>> appropriate.
>>
>> -Grant
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --=20
> d i n o k o r a h
> Tel: +44 7956 66 52 83
> ---------------------------
> 51=B021'50.5902"N 0=B06'11.8116"W

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 17 22:53:51 2008
Return-Path: <java-user-return-36243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78920 invoked from network); 17 Sep 2008 22:53:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2008 22:53:49 -0000
Received: (qmail 1671 invoked by uid 500); 17 Sep 2008 22:53:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1167 invoked by uid 500); 17 Sep 2008 22:53:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1156 invoked by uid 99); 17 Sep 2008 22:53:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 15:53:38 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dckorah@gmail.com designates 209.85.142.185 as permitted sender)
Received: from [209.85.142.185] (HELO ti-out-0910.google.com) (209.85.142.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 22:52:38 +0000
Received: by ti-out-0910.google.com with SMTP id b8so2000279tic.11
        for <java-user@lucene.apache.org>; Wed, 17 Sep 2008 15:53:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Y0v6YiuVscScFQNndtRO8H3JO9Cd8LX4R3dCOx3qPyU=;
        b=CYfyg+yaleSbFI6C57ayrRBa4cMc/1GJTCPvlWZp68gczn0Lc/oLg0KxfXxL32lWhv
         H7D3raRbfV7BlVAjWfP9kdbZAtAf9SPfBo4K108Ywie0kaZSaNH5BVKxhrW/3Th2suNk
         50m9F8o3ivBt9nl30g3rYnDHVexBi/SuR2U88=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=nTKwXaUsRBqB4QUeRXEQmUJOTPZhua8EBU1pJT8hR0WJ9nYIyGaquXpzy2N8E3JsQP
         V7dthx8SUB9qY73abjZC1ADDLUwsSco/Bi7nJRloKFkINcaCRNW9Ck3KKI71EqFT7XA7
         jGPmYKG4FlkLtOUGZUsBYbqHmgAFsSrIPAJpo=
Received: by 10.110.43.18 with SMTP id q18mr2387416tiq.57.1221691990111;
        Wed, 17 Sep 2008 15:53:10 -0700 (PDT)
Received: by 10.110.11.16 with HTTP; Wed, 17 Sep 2008 15:53:10 -0700 (PDT)
Message-ID: <926b35870809171553v3bedeffcs964fd33a44b693b4@mail.gmail.com>
Date: Wed, 17 Sep 2008 23:53:10 +0100
From: "Dino Korah" <dckorah@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: TopDocCollector & Paging
In-Reply-To: <3A489C21-DF32-461C-9ED1-0A04D80CA9BA@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_648_4133480.1221691990106"
References: <48d0ec07.0589300a.1573.7418@mx.google.com>
	 <359a92830809170716p22ff113dt689f20fd96a2ef01@mail.gmail.com>
	 <1bcb7c7f0809170851s2aa11dddw8c26dc3f434b8f21@mail.gmail.com>
	 <9369FAF5-1B36-4964-99DA-4C25BB524D36@apache.org>
	 <926b35870809171339h1afccab8j2542963c916ab90a@mail.gmail.com>
	 <3A489C21-DF32-461C-9ED1-0A04D80CA9BA@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_648_4133480.1221691990106
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

VGhhbmtzIEdyYW50Li4gUGxlYXNlIHNlZSBteSBjb21tZW50cy9yZXNwb25zZSBiZWxvdy4KCjIw
MDgvOS8xNyBHcmFudCBJbmdlcnNvbGwgPGdzaW5nZXJzQGFwYWNoZS5vcmc+Cgo+Cj4gT24gU2Vw
IDE3LCAyMDA4LCBhdCA0OjM5IFBNLCBEaW5vIEtvcmFoIHdyb3RlOgo+Cj4gIEkga25vdyBpbiBh
cHBsaWNhdGlvbnMgd2hlcmUgd2Ugc2VhcmNoIGZvciBhIHdvcmRzIG9yIHBocmFzZXMgYW5kIGV4
cGVjdAo+PiB0aGUKPj4gcmVzdWx0IHNvcnRlZCBieSByZWxldmFuY2UsIFRvcERvY0NvbGxlY3Rv
ciB3b3VsZCB3b3JrIGxpa2UgYSBkcmVhbS4KPj4gQnV0IHdoYXQgYWJvdXQgc2NlbmFyaW8gd2hl
cmUgdGhlIHJlc3VsdCBuZWVkcyB0byBiZSBzb3J0ZWQKPj4gY2hyb25vbG9naWNhbGx5Cj4+IG9y
IGJ5IHNvbWUga2luZCBvZiBtZXRhZGF0YS4KPj4KPj4gQSB2ZXJ5IGNvbW1vbiBhcHBsaWNhdGlv
biB3b3VsZCBiZSBlbWFpbCBhcHBsaWNhdGlvbnMuIElmIHNvbWVvbmUgaXMgdG8KPj4gc2VhcmNo
IG9uIHRoZSBJbmJveCwgdGhlIHJlc3VsdCB3aWxsIGJlIGV4cGVjdGVkIHRvIGFwcGVhciBzb3J0
ZWQgYnkgZGF0ZS4KPj4KPgo+IFdvdWxkbid0IHlvdSBleHBlY3QgYnkgcmVsZXZhbmNlIGFuZCB0
aGVuIGJ5IGRhdGU/ICBPbmUgd2F5IHRvIGFjaGlldmUga2luZAo+IG9mIHdoYXQgeW91IHdhbnQg
aXMgYSBGdW5jdGlvbiBRdWVyeSB0aGF0IHVzZXMgdGhlIGRhdGUgYXMgYSBmYWN0b3IgaW4gdGhl
Cj4gcmVsZXZhbmNlIHNjb3JlLgo+CgpJbiBteSBjYXNlIHJlbGV2YW5jZSBpcyByZWFsbHkgc2Vj
b25kYXJ5LiBJIG1heSBiZSB3cm9uZyBpbiBzYXlpbmcgdGhpczsgSW4KY2FzZSBvZiBlbWFpbHMs
IGhvdyBjYW4gd2Ugc29ydCBieSByZWxldmFuY2UgYW5kIHRoZW4gYnkgZGF0ZT8hCkFsc28gRnVu
Y3Rpb24gUXVlcnk7IEknZCBhcHByZWNpYXRlIGlmIHlvdSBjb3VsZCBwb2ludCBtZSB0byBhIHNr
ZWxldG9uIGNvZQpmb3IgRnVuY3Rpb24gUXVlcnkuIEkgZGlkIHNlZSB0aGUgZG9jdW1lbnRhdGlv
biwgYnV0IHRoaXMgZmFjaWxpdHkgc2VlbSB0bwpiZSBleHBlcmltZW50YWwuCgoKPiBJZiB0aGVy
ZSBhcmUgdG9vIG1hbnkgcmVzdWx0cywgdGhlIHVzZXIgd2lsbCBtb3N0IHByb2JhYmx5IGJlIHdp
bGxpbmcgdG8KPiBsb29rIHRocm91Z2ggYSBmYWlyIHBhcnQgb2YgdGhlIHJlc3VsdCBsaXN0LCB3
aGljaCBtZWFucyBwYWdpbmcgdGhyb3VnaCB0aGUKPiBnZW5lcmF0ZWQgaGl0cy9yZXN1bHQgaXMg
cXVpdGUgaGFuZHkgZmVhdHVyZSBmb3IgYSBnZW5lcmljIGxpYnJhcnkuCj4KCldlbGwsIHRoZSB3
YXkgdGhpcyBpcyB0eXBpY2FsbHkgZG9uZSBpcyB5b3UgYXNrIGZvciBpbmNyZWFzaW5nbHkgbW9y
ZQo+IHJlc3VsdHMgYW5kIHJlLWV4ZWN1dGUgdGhlIHF1ZXJ5LiAgQW5vdGhlciB3YXkgaXMgdG8g
Y2FjaGUuICBJbiBteQo+IGV4cGVyaWVuY2UsIGl0IHVzdWFsbHkgaXMgdmVyeSBmYXN0IHRvIHJl
cXVlcnksIGVzcGVjaWFsbHkgb25jZSB0aGluZ3MgYXJlCj4gaW4gdGhlIE9TIGNhY2hlLCBldGMu
ICBJIGp1c3QgZG9uJ3Qgc2VlIGhvdyB5b3UgY2FuIHNheSBnaXZlIG1lIHJlc3VsdHMKPiAxMDAt
MTAwIGlmIHlvdSBkb24ndCBrbm93IHdoYXQgcmVzdWx0cyAxLTk5IGFyZS4KPgoKSGVyZSBJIGFt
IHRyeWluZyB0byBnZXQgbXkgaGVhZCBhcm91bmQgaW4gaW1wbGVtZW50aW5nIFRvcERvY3MgYXMg
SGl0cyBhcmUKZ2V0dGluZyBkZXByZWNhdGVkLiBDdXJyZW50bHkgSSBzZWFyY2ggYW5kIHNvcnQg
b24gdGhlIHNlYXJjaGVyIGFuZCBzYXZlIHRoZQpyZXR1cm5lZCBIaXRzIG9iamVjdCB0aHJvdWdo
b3V0IHRoZSBzZXNzaW9uIG9yIHRpbGwgdGhlIHVzZXIgcnVucyBhIG5ldwpzZWFyY2guIFNvIHdo
ZW4gYSB1c2VyIGlzIHJlcXVlc3RpbmcgcmVzdWx0cyBmcm9tIDEwMCB0byAxMTAsIGkgY2FuIGRv
CmhpdHMuZG9jKDEwMCkgLi4uIGhpdHMuZG9jKDExMCkKCgo+Cj4gWW91IHNhaWQgc2NvcmluZyB3
YXMgZXhwZW5zaXZlLCB3aGljaCBtYXliZSBpcyB0cnVlLiAgSGF2ZSB5b3UgYWN0dWFsbHkKPiBz
ZWVuIGFuIGlzc3VlIHcvIHBlcmZvcm1hbmNlPyAgQXJlIHlvdSBkb2luZyByZWFsbHkgY29tcGxl
eCBxdWVyaWVzPyAgT3IgYXJlCj4geW91IHNlYXJjaGluZyBvbiByZWFsbHkgY29tbW9uIHRlcm1z
PyAgSW4geW91ciBvcmlnaW5hbCBlbWFpbCB0aGF0IHlvdSBoYXZlCj4gYSAxMDBNKyBpbmRleC4g
IElzIHRoaXMgYWxsIG9uIG9uZSBtYWNoaW5lPwo+CgpBbGwgb24gb25lIG1hY2hpbmUsIHF1ZXJ5
IGlzIGNvbXBsZXguIEkgaGF2ZSBkb25lIGFsbCBJIGNvdWxkIHRvIGZpbmV0dW5lCmJvdCBoYXJk
d2FyZSAsIGp2bSBhbmQgbXkgc29mdHdhcmUuCgoKPgo+Cj4KPj4KPj4gMjAwOC85LzE3IEdyYW50
IEluZ2Vyc29sbCA8Z3NpbmdlcnNAYXBhY2hlLm9yZz4KPj4KPj4KPj4+IE9uIFNlcCAxNywgMjAw
OCwgYXQgMTE6NTEgQU0sIENhbSBCYXp6IHdyb3RlOgo+Pj4KPj4+IEFuZCBob3cgYWJvdXQgcXVl
cmllcyB0aGF0IG5lZWQgc3RhcnRpbmcgcG9zaXRpb24sIGxpa2UgaGl0cyBiZXR3ZWVuCj4+Pgo+
Pj4+IDEwMCBhbmQgMjAwPwo+Pj4+Cj4+Pj4KPj4+PiBjb3VsZCB3ZSBwYXNzIHNvbWV0aGluZyB0
byB0aGUgY29sbGVjdG9yIHRoYXQgd2lsbCBjb3VudCBiZXR3ZWVuIDAgdG8KPj4+PiAxMDAgYW5k
IHRoZW4gZ2V0IHRoZSBuZXh0IDEwMCByZWNvcmRzPwo+Pj4+Cj4+Pj4KPj4+IFRoZSBjb2xsZWN0
b3IgdXNlcyBhIFByaW9yaXR5IFF1ZXVlIHRvIHN0b3JlIGRvYyBpZHMgYW5kIHNjb3JlcyBhcyB0
aGV5Cj4+PiBhcmUKPj4+IGNvbGxlY3RlZC4gIEFsbCB0aGUgY29sbGVjdG9yIGtub3dzIGlzIHRo
ZSBkb2N1bWVudCBpZCBhbmQgdGhlIHNjb3JlIGFuZCwKPj4+IHByZXN1bWFibHkgd2hhdCBpdCBo
YXMgc2VlbiBzbyBmYXIsIHRvIHNvbWUgZXh0ZW50LiAgT3JkZXJpbmcgaXMgbm90Cj4+PiBkZWZp
bmVkCj4+PiB1bnRpbCBhbGwgdGhlIGNhbmRpZGF0ZSBkb2NzIGhhdmUgYmVlbiBzY29yZWQuCj4+
Pgo+Pj4gSWYgeW91IGV4cGVjdCB0byBkbyBhIGxvdCBvZiBwYWdpbmcgb24gYSBnaXZlbiBzZXQg
b2YgcmVzdWx0cywgSSBjb3VsZAo+Pj4gaW1hZ2luZSB1c2luZyBhbiBhcHByb2FjaCB3aGVyZWJ5
IHlvdSBkb24ndCBib3RoZXIgdG8gaW5zZXJ0IGVudHJpZXMgaWYKPj4+IHlvdSd2ZSBhbHJlYWR5
IHNlZW4gdGhlbSBhbmQgY291bGQgbWF5YmUgc2F2ZSBvbiBzb21lIHF1ZXVlIG9wZXJhdGlvbnMs
Cj4+PiBidXQKPj4+IG5vdCBzdXJlIGhvdyB3ZWxsIGl0IHdvdWxkIHdvcmsuCj4+Pgo+Pj4gVGhl
IG90aGVyIHRoaW5nIHRvIGRvIGlzIGp1c3QgYXNrIGZvciBzbGlnaHRseSBtb3JlIHRoYW4geW91
IHRoaW5rIHlvdQo+Pj4gd2lsbAo+Pj4gbmVlZCBpbiB0aGUgZmlyc3QgcXVlcnksIGJ1dCBpdCBk
ZXBlbmRzIG9uIHlvdXIgdXNlcnMuICBNb3N0IHVzZXJzLCBpbiBteQo+Pj4gZXhwZXJpZW5jZSwg
ZG9uJ3QgZ28gYmV5b25kIHBhZ2UgMiBvciAzIGF0IG1vc3QsIHNvIHlvdSBjb3VsZCBjb25zaWRl
cgo+Pj4gcGF5aW5nIHRoZSBjb3N0IHRvIGdldCB0aGUgdG9wIDMwIG9yIDUwIGFuZCBjYWNoaW5n
IHRoYXQgZm9yIHlvdXIgcGFnaW5nLgo+Pj4gSWYgeW91IGhhdmUgb3RoZXIgYXBwbGljYXRpb24g
c3BlY2lmaWMga25vd2xlZGdlLCB5b3UgY2FuIHRoZW4gYWRqdXN0IGFzCj4+PiBhcHByb3ByaWF0
ZS4KPj4+Cj4+PiAtR3JhbnQKPj4+Cj4+Pgo+Pj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4+PiBUbyB1bnN1YnNj
cmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPj4+
IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5h
cGFjaGUub3JnCj4+Pgo+Pj4KPj4+Cj4+Cj4+IC0tCj4+IGQgaSBuIG8gayBvIHIgYSBoCj4+IFRl
bDogKzQ0IDc5NTYgNjYgNTIgODMKPj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4+IDUx
wrAyMSc1MC41OTAyIk4gMMKwNicxMS44MTE2IlcKPj4KPgo+IC0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tCj4gR3JhbnQgSW5nZXJzb2xsCj4gaHR0cDovL3d3dy5sdWNpZGltYWdpbmF0aW9uLmNv
bQo+Cj4gTHVjZW5lIEhlbHBmdWwgSGludHM6Cj4gaHR0cDovL3dpa2kuYXBhY2hlLm9yZy9sdWNl
bmUtamF2YS9CYXNpY3NPZlBlcmZvcm1hbmNlCj4gaHR0cDovL3dpa2kuYXBhY2hlLm9yZy9sdWNl
bmUtamF2YS9MdWNlbmVGQVEKPgo+Cj4KPgo+Cj4KPgo+Cj4KPiAtLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiBUbyB1
bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5v
cmcKPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNl
bmUuYXBhY2hlLm9yZwo+Cj4KCgotLSAKZCBpIG4gbyBrIG8gciBhIGgKVGVsOiArNDQgNzk1NiA2
NiA1MiA4MwotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KNTHCsDIxJzUwLjU5MDIiTiAwwrA2
JzExLjgxMTYiVwo=
------=_Part_648_4133480.1221691990106--

From java-user-return-36244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 18 00:06:46 2008
Return-Path: <java-user-return-36244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50253 invoked from network); 18 Sep 2008 00:06:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2008 00:06:46 -0000
Received: (qmail 98614 invoked by uid 500); 18 Sep 2008 00:06:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98580 invoked by uid 500); 18 Sep 2008 00:06:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98569 invoked by uid 99); 18 Sep 2008 00:06:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 17:06:35 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a20.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Sep 2008 00:05:36 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a20.g.dreamhost.com (Postfix) with ESMTP id 35435E2507
	for <java-user@lucene.apache.org>; Wed, 17 Sep 2008 17:06:06 -0700 (PDT)
Message-Id: <5FB3BE65-4A47-4519-8718-6B1A925B6607@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <926b35870809171553v3bedeffcs964fd33a44b693b4@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: TopDocCollector & Paging
Date: Wed, 17 Sep 2008 20:06:05 -0400
References: <48d0ec07.0589300a.1573.7418@mx.google.com> <359a92830809170716p22ff113dt689f20fd96a2ef01@mail.gmail.com> <1bcb7c7f0809170851s2aa11dddw8c26dc3f434b8f21@mail.gmail.com> <9369FAF5-1B36-4964-99DA-4C25BB524D36@apache.org> <926b35870809171339h1afccab8j2542963c916ab90a@mail.gmail.com> <3A489C21-DF32-461C-9ED1-0A04D80CA9BA@apache.org> <926b35870809171553v3bedeffcs964fd33a44b693b4@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Sep 17, 2008, at 6:53 PM, Dino Korah wrote:

> Thanks Grant.. Please see my comments/response below.
>
> 2008/9/17 Grant Ingersoll <gsingers@apache.org>
>
>>
>> On Sep 17, 2008, at 4:39 PM, Dino Korah wrote:
>>
>> I know in applications where we search for a words or phrases and  
>> expect
>>> the
>>> result sorted by relevance, TopDocCollector would work like a dream.
>>> But what about scenario where the result needs to be sorted
>>> chronologically
>>> or by some kind of metadata.
>>>
>>> A very common application would be email applications. If someone  
>>> is to
>>> search on the Inbox, the result will be expected to appear sorted  
>>> by date.
>>>
>>
>> Wouldn't you expect by relevance and then by date?  One way to  
>> achieve kind
>> of what you want is a Function Query that uses the date as a factor  
>> in the
>> relevance score.
>>
>
> In my case relevance is really secondary. I may be wrong in saying  
> this; In
> case of emails, how can we sort by relevance and then by date?!
> Also Function Query; I'd appreciate if you could point me to a  
> skeleton coe
> for Function Query. I did see the documentation, but this facility  
> seem to
> be experimental.

It's been around for a while now.


>
>
>
>> If there are too many results, the user will most probably be  
>> willing to
>> look through a fair part of the result list, which means paging  
>> through the
>> generated hits/result is quite handy feature for a generic library.
>>
>
> Well, the way this is typically done is you ask for increasingly more
>> results and re-execute the query.  Another way is to cache.  In my
>> experience, it usually is very fast to requery, especially once  
>> things are
>> in the OS cache, etc.  I just don't see how you can say give me  
>> results
>> 100-100 if you don't know what results 1-99 are.
>>
>
> Here I am trying to get my head around in implementing TopDocs as  
> Hits are
> getting deprecated. Currently I search and sort on the searcher and  
> save the
> returned Hits object throughout the session or till the user runs a  
> new
> search. So when a user is requesting results from 100 to 110, i can do
> hits.doc(100) ... hits.doc(110)
>


Well, Hits is silently doing the (repeated) fetching behind the scenes  
as you ask for more and more results.  It is just a wrapper around the  
TopDocs stuff, but adds some caching

>
>>
>> You said scoring was expensive, which maybe is true.  Have you  
>> actually
>> seen an issue w/ performance?  Are you doing really complex  
>> queries?  Or are
>> you searching on really common terms?  In your original email that  
>> you have
>> a 100M+ index.  Is this all on one machine?
>>
>
> All on one machine, query is complex. I have done all I could to  
> finetune
> bot hardware , jvm and my software.


I'd say you need distributed search.  You are definitely at the limits  
of one machine.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 18 00:43:43 2008
Return-Path: <java-user-return-36245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86653 invoked from network); 18 Sep 2008 00:43:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2008 00:43:43 -0000
Received: (qmail 32391 invoked by uid 500); 18 Sep 2008 00:43:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32352 invoked by uid 500); 18 Sep 2008 00:43:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32340 invoked by uid 99); 18 Sep 2008 00:43:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 17:43:31 -0700
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WEIRD_PORT,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yeshuangming@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Sep 2008 00:42:30 +0000
Received: by gxk6 with SMTP id 6so21354420gxk.5
        for <java-user@lucene.apache.org>; Wed, 17 Sep 2008 17:43:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=FPCpjiWlIwXkd7yRy+G6mG2B0tktBub54t5URVoKhwc=;
        b=L8CP4nR1cxgJv5mMeG/r0jperPsbi66BHVpywNLAK28OvfOfr9u/rCk4GM4ppNc9Xv
         bN4STIxSnvOamVsy97k/NNXDKAwQR8rEFCJyC7kHwFM8fMFMF4EPBuiGCUB1VRX2SRjw
         GtYV+6eVqv7Sjh8tXzg0rzDotTgvcstbDK258=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Phe11C6qsgw+IVEm7Zmcht0VSZo7f/8ctjq/IsF4sliQBcPFdFGuLLNv0OsdfgpgK4
         bupOK+FbNqr2EVk7QBiCX+2+Iaf0MLYsjylY4GqykzBqPk37z/jjMPMAAI+uGhytjBiX
         YsxWsRS4cDsVm9DRx+yG9ODYHRZ5KXj0W/fk8=
Received: by 10.150.227.9 with SMTP id z9mr291890ybg.36.1221698581687;
        Wed, 17 Sep 2008 17:43:01 -0700 (PDT)
Received: by 10.151.100.9 with HTTP; Wed, 17 Sep 2008 17:43:01 -0700 (PDT)
Message-ID: <9233ccac0809171743x5b1746a1k8fe07f5fde6153a0@mail.gmail.com>
Date: Thu, 18 Sep 2008 08:43:01 +0800
From: "=?UTF-8?B?5Y+25Y+M5piO?=" <yeshuangming@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene search fails for japanese characters in URL
In-Reply-To: <19534342.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9473_26103684.1221698581664"
References: <19533647.post@talk.nabble.com>
	 <D8E6BD3AD2634843B58AFF6A94FE246202D7AEB6F5@msgint02.mogul.com>
	 <19534342.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9473_26103684.1221698581664
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

WW91IG11c3QgdHJhY2UgdGhlIHN0cmluZyAgaW4gZWFjaCBzdGVwIQpJbXBvcnRhbnQgc3RlcCBp
cyBnZXQgc3RyaW5nIGZyb20gTVlTUUwgYW5kIGdldCBwYXJhbWV0ZXIgaW4gc2VydmxldCwgcGxl
YXNlCmNoZWNrIGl0LCBkbyB5b3UgZ2V0IHRoZSByaWdodCBzdHJpbmc/CkNoaW5lc2UgaGFzIHRo
ZSBzYW1lIHByb2JsZW0gdG9vLgoKMjAwOC85LzE3IGFuYW5kc2Fyd2FkZSA8YW5hbmQuc2Fyd2Fk
ZUBjb3JwLmFvbC5jb20+Cgo+Cj4gSGVsbG8gSmltaSwKPgo+IFRoYW5rcyBhIGxvdCBmb3IgeW91
ciB2YWx1YWJsZSBzdWdnZXN0aW9uLgo+Cj4gSSBhbSB1c2luZyB0b21jYXQgNSAuIEFzIHBlciB5
b3VyIHN1Z2dlc3Rpb25zICxjaGVja2VkIHRoZSBzZXJ2ZXIueG1sIGJ1dAo+IGZvdW5kIHRoYXQg
bm8gVVJJRW5jb2Rpbmcgd2FzIHNldC4KPiBJIGhhdmUgc2V0IG5vdyBhbmQgdG8gbXkgZ3JlYXQg
cmVsaWVmIDotKSBpIGNvdWxkIHNlZSB0aGUgTHVjZW5lIHJlc3VsdHMgb24KPiBteSBicm93c2Vy
IGZvciBqYXBhbmVzZSBzdHJpbmcgd2l0aCByZXF1ZXN0IG9iamVjdHMgaW4gVVRGLTggbm93Lgo+
Cj4gVGhhbmtzIGFnYWluIGZvciB5b3VyIGhlbHAuCj4KPiBSZWdhcmRzLAo+IEFuYW5kLgo+Cj4K
PiBKaW1pSCB3cm90ZToKPiA+Cj4gPiBXaGF0IHdlYnNlcnZlciBhcmUgeW91IHVzaW5nPyBGb3Ig
ZXhhbXBsZSwgd2l0aCBUb21jYXQsIGl0IGNvdWxkIGJlCj4gPiBiZWNhdXNlIG9mIHRoZSBzZXR0
aW5nIFVSSUVuY29kaW5nIGluIHNlcnZlci54bWwuCj4gPgo+ID4gaHR0cDovL3RvbWNhdC5hcGFj
aGUub3JnL3RvbWNhdC01LjUtZG9jL2NvbmZpZy9odHRwLmh0bWwKPiA+Cj4gPiAvSmltaQo+ID4K
PiA+IG1vZ3VsIHwgamltaSBodWxsZWfDpXJkIHwgc3lzdGVtIGRldmVsb3BlciB8IGh1ZGlrc3Zh
bGxzZ2F0YW4gNCwgMTEzIDMwCj4gPiBzdG9ja2hvbG0gc3dlZGVuIHwgKzQ2IDggNTA2IDY2IDE3
MiB8ICs0NiA3NjUgMjcgMTkgNTUgfAo+ID4gamltaS5odWxsZWdhcmRAbW9ndWwuY29tIHwgd3d3
Lm1vZ3VsLmNvbQo+ID4KPiA+Cj4gPj4gLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0KPiA+PiBG
cm9tOiBhbmFuZHNhcndhZGUgW21haWx0bzphbmFuZC5zYXJ3YWRlQGNvcnAuYW9sLmNvbV0KPiA+
PiBTZW50OiBkZW4gMTcgc2VwdGVtYmVyIDIwMDggMTY6NDIKPiA+PiBUbzogamF2YS11c2VyQGx1
Y2VuZS5hcGFjaGUub3JnCj4gPj4gU3ViamVjdDogTHVjZW5lIHNlYXJjaCBmYWlscyBmb3IgamFw
YW5lc2UgY2hhcmFjdGVycyBpbiBVUkwKPiA+Pgo+ID4+Cj4gPj4gSGkgLAo+ID4+Cj4gPj4gSSBh
bSBmYWNpbmcgYmVsb3cgcHJvYmxlbS4gUGxlYXNlIGhlbHAgbWUgaW4gdGhpcy4KPiA+Pgo+ID4+
IEkgaGF2ZSBpbnRlZ3JhdGVkIENKSyBBbmFseXplciBmb3IgSmFwYW5lc2UgY2hhcmFjdGVycy4g
SSBhbQo+ID4+IGFibGUgdG8gc2F2ZQo+ID4+IGphcGFuZXNlIGRvdWJsZSBieXRlIGNoYXJhY3Rl
cnMgaW4gbXlzcWwgZGF0YWJhc2UgaW4gVVRGLTgKPiA+PiBmb3JtYXQgd2l0aG91dAo+ID4+IGlz
c3Vlcy4gSSBjb3VsZCB0aGF0IGRhdGEgaXMgZ2V0dGVkIGluZGV4ZWQuIE5vdyB3aGVuIGkKPiA+
PiBzZWFyY2ggdGhlIEphcGFuZXNlCj4gPj4gY2hhcmFjdGVycyB3aGljaCB3ZXJlIGluZGV4ZWQg
dXNpbmcgdGhlIFVSTCBiZWxvdyAsIHJldHVybnMKPiA+PiBlbXB0eSByZXN1bHRzLgo+ID4+Cj4g
Pj4gaHR0cDovL3htbC5kZW1vLm15YW9sLmpwOjgwODIvcG9ydGFsL2dhbGxlcnktc2VhcmNoP2Zp
cnN0PTEmbWEKPiA+PiB4PTEwMCZjYXA96KiA6KqeCj4gPj4KPiA+PiBOb3RpY2VkIHRoYXQgdGhl
IGFib3ZlIHVybCBnZXRzIGNvbnZlcnRlZCB0byB0aGUgZm9sbG93aW5nCj4gPj4gVVJMIGhhdmlu
ZyBzb21lCj4gPj4gSFRNTCBlbmNvZGVkIHN0cmluZ3MgaW4gc2VhcmNoLgo+ID4+Cj4gPj4gaHR0
cDovL3htbC5kZW1vLm15YW9sLmpwOjgwODIvcG9ydGFsL2dhbGxlcnktc2VhcmNoP2ZpcnN0PTEm
bWEKPiA+PiB4PTEwMCZjYXA9JUU4JUE4JTgwJUU4JUFBJTlFCj4gPj4KPiA+PiBUaGlzIGRvZXMg
bm90IG1hdGNoIHdpdGggdGhlIGV4aXN0aW5nIGx1Y2VuZSBpbmRleGVzCj4gPj4gaGVuY2Vmb3J0
aCByZXR1cm5zCj4gPj4gZW1wdHkgcmVzdWx0cy4gIEhvdyBkbyBpIHNvbHZlIHRoaXMgbHVjZW5l
IHNlYXJjaCBpc3N1ZQo+ID4+IGhhdmluZyBqYXBhbmVzZQo+ID4+IHdvcmRzIGluIFVSTHMuPyBJ
cyB0aGVyZSBhbnkgd2F5IHRvIGNvbnZlcnQgc3VjaCBjaGFyYWN0ZXJzCj4gPj4gYmFjayB0byBK
YXBhbmVzZQo+ID4+IHdvcmRzPz8/Cj4gPj4KPiA+PiBBbnkgaGVscC9zdWdnZXN0aW9ucyBpbiB0
aGlzIHJlZ2FyZHMgaXMgaGlnaGx5IGFwcHJlY2lhdGVkLgo+ID4+Cj4gPj4gVGhhbmtzIGluIEFk
dmFuY2UuCj4gPj4KPiA+PiBSZWdhcmRzLAo+ID4+IEFuYW5kCj4gPj4KPiA+PiAtLQo+ID4+IFZp
ZXcgdGhpcyBtZXNzYWdlIGluIGNvbnRleHQ6Cj4gPj4gaHR0cDovL3d3dy5uYWJibGUuY29tL0x1
Y2VuZS1zZWFyY2gtZmFpbHMtZm9yLWphcGFuZXNlLWNoYXJhY3QKPiA+PiBlcnMtaW4tVVJMLXRw
MTk1MzM2NDdwMTk1MzM2NDcuaHRtbAo+ID4+IFNlbnQgZnJvbSB0aGUgTHVjZW5lIC0gSmF2YSBV
c2VycyBtYWlsaW5nIGxpc3QgYXJjaGl2ZSBhdCBOYWJibGUuY29tLgo+ID4+Cj4gPj4KPiA+PiAt
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0KPiA+PiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJz
Y3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPiA+PiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1t
YWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+ID4+Cj4gPj4KPiA+Cj4gPgo+
Cj4gLS0KPiBWaWV3IHRoaXMgbWVzc2FnZSBpbiBjb250ZXh0Ogo+IGh0dHA6Ly93d3cubmFiYmxl
LmNvbS9MdWNlbmUtc2VhcmNoLWZhaWxzLWZvci1qYXBhbmVzZS1jaGFyYWN0ZXJzLWluLVVSTC10
cDE5NTMzNjQ3cDE5NTM0MzQyLmh0bWwKPiBTZW50IGZyb20gdGhlIEx1Y2VuZSAtIEphdmEgVXNl
cnMgbWFpbGluZyBsaXN0IGFyY2hpdmUgYXQgTmFiYmxlLmNvbS4KPgo+Cj4gLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
Cj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5h
cGFjaGUub3JnCj4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhl
bHBAbHVjZW5lLmFwYWNoZS5vcmcKPgo+CgoKLS0gClNvcnJ5IGZvciBteSBlbmdsaXNoISEg5piO
ClBsZWFzZSBoZWxwIG1lIHRvIGNvcnJlY3QgbXkgZW5nbGlzaCBleHByZXNzaW9uIGFuZCBlcnJv
ciBpbiBzeW50YXgK
------=_Part_9473_26103684.1221698581664--

From java-user-return-36246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 18 04:04:53 2008
Return-Path: <java-user-return-36246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59016 invoked from network); 18 Sep 2008 04:04:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2008 04:04:52 -0000
Received: (qmail 89591 invoked by uid 500); 18 Sep 2008 04:04:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89560 invoked by uid 500); 18 Sep 2008 04:04:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89549 invoked by uid 99); 18 Sep 2008 04:04:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 21:04:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Sep 2008 04:03:44 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id B193971C56E; Wed, 17 Sep 2008 21:04:16 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id AE40271C56C
	for <java-user@lucene.apache.org>; Wed, 17 Sep 2008 21:04:16 -0700 (PDT)
Date: Wed, 17 Sep 2008 21:04:16 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: TopDocCollector & Paging
In-Reply-To: <926b35870809171339h1afccab8j2542963c916ab90a@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0809172100290.3007@radix.cryptio.net>
References: <48d0ec07.0589300a.1573.7418@mx.google.com> 
 <359a92830809170716p22ff113dt689f20fd96a2ef01@mail.gmail.com> 
 <1bcb7c7f0809170851s2aa11dddw8c26dc3f434b8f21@mail.gmail.com> 
 <9369FAF5-1B36-4964-99DA-4C25BB524D36@apache.org>
 <926b35870809171339h1afccab8j2542963c916ab90a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: I know in applications where we search for a words or phrases and expect 
: the result sorted by relevance, TopDocCollector would work like a dream. 
: But what about scenario where the result needs to be sorted 
: chronologically or by some kind of metadata.

These two methods are available, and aren't deprecated...
 TopFieldDocs 	search(Query query, Filter filter, int n, Sort sort)
 TopDocs 	search(Query query, Filter filter, int n) 



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 18 04:54:24 2008
Return-Path: <java-user-return-36247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86384 invoked from network); 18 Sep 2008 04:54:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2008 04:54:24 -0000
Received: (qmail 25438 invoked by uid 500); 18 Sep 2008 04:54:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25410 invoked by uid 500); 18 Sep 2008 04:54:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25399 invoked by uid 99); 18 Sep 2008 04:54:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 21:54:13 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.107.116] (HELO smtp133.mail.mud.yahoo.com) (209.191.107.116)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 18 Sep 2008 04:53:10 +0000
Received: (qmail 54486 invoked from network); 18 Sep 2008 04:53:40 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=v29tb2CapkWUvroXKkVg81amZ7HpyCV/QJxdA3sKJrmB5PGxZy15eKuzSSRcNvYQtn0fB0vv5Gznho94bQwdw7hk2kaO4XtykP6NWH9+UnLuwbbopGhpbXKSEVfeRsg4na1y/ufJAm7J5LJ9ov+w8Ros8owBG08HtbmRzQ6bC3M=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp133.mail.mud.yahoo.com with SMTP; 18 Sep 2008 04:53:38 -0000
X-YMail-OSG: 65kqL6EVM1mpCsW5bhqi2DhJHfaqSVwpGFVjbnmfeK76b88VITDROPEg7abQh.su2qNCjoNBxWQmNeL_.YrKYnNeKLbau_ENPPLI6QWqdEiLgXn7mktVMW0vYyHgaj9ahWCAJVi7Gp089j1jmeNKLjhGQPZOvO6z_z4KG_YLIeor
X-Yahoo-Newman-Property: ymail-3
Message-ID: <00fa01c9194a$843b6890$04000100@sv.us.sonicwall.com>
From: "Ganesh - yahoo" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <00ea01c918c3$5f8d39b0$04000100@sv.us.sonicwall.com> <20080917065804.j8e1vll31co8488c@65.39.182.4>
Subject: Re: Exception while doing sorting
Date: Thu, 18 Sep 2008 10:23:19 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

My index is growing by 1 million records per day. How much memory do i need 
to increase.

What kind of sorting algorithm being used in Lucene. Is this efficient 
enough to handle millions of records.

Whether we could do sorting using our own algorithm?

Regards
Ganesh

----- Original Message ----- 
From: "Fuad Efendi" <fuad@efendi.ca>
To: <java-user@lucene.apache.org>
Sent: Wednesday, September 17, 2008 7:28 PM
Subject: Re: Exception while doing sorting


Increase memory.

Lucene uses FieldCache for sorting on non-tokenized field and tries to
maintain fields from all your 4 millions documents, even if you need
to sort only 4000 docs.
==============
http://www.tokenizer.org/bot.html


Quoting Ganesh - yahoo <emailgane@yahoo.co.in>:

> Hello all,
>
> I am have indexed more than 4 million documents. My query fetches
> 300,000 hits. If i perform sorting on any field, then tomcat reports
> out of memory exception.
> Sometimes the query results may be around 1000, but sorting on any
> field might take more than 30 - 50 secs.
>
> I don't know what's going wrong.
>
> My index searcher is static object and it is getting refreshed every
> minute. JSP pages directly calls the index searcher object and performs
> search.
>
> Regards
> Ganesh
>
>
> Send instant messages to your online friends
> http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 18 06:32:52 2008
Return-Path: <java-user-return-36248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39930 invoked from network); 18 Sep 2008 06:32:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2008 06:32:52 -0000
Received: (qmail 18140 invoked by uid 500); 18 Sep 2008 06:32:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18102 invoked by uid 500); 18 Sep 2008 06:32:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18091 invoked by uid 99); 18 Sep 2008 06:32:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 23:32:40 -0700
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [195.47.247.206] (HELO csmtp2.b-one.net) (195.47.247.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Sep 2008 06:31:39 +0000
Received: from [10.10.6.174] (195-67-112-74.customer.telia.com [195.67.112.74])
	by csmtp2.b-one.net (Postfix) with ESMTP id 6ED0C16000B40
	for <java-user@lucene.apache.org>; Thu, 18 Sep 2008 08:32:09 +0200 (CEST)
Message-Id: <980AF0BE-D585-4C3D-B87A-78EA42C21CB9@findwise.se>
From: Tobias Larsson Hult <tobias.larsson.hult@findwise.se>
To: java-user@lucene.apache.org
In-Reply-To: <955596.89169.qm@web50306.mail.re2.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Using separate index for each user
Date: Thu, 18 Sep 2008 08:32:09 +0200
References: <955596.89169.qm@web50306.mail.re2.yahoo.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the quick responses!

Good point about the warmup issues Erick, that's something we will  
consider. Good to know that this kind of setup has been proved working  
for at least one :) I think we will do a small setup and test the  
performance.

Thanks again for valuable input!

Best Regards
Tobias


On 16 sep 2008, at 18.10, Otis Gospodnetic wrote:

> Tobias,
>
> That's the approach I took with Simpy.com and it's been working well  
> for several years now.  You'll have to keep track of searchers and  
> close them when appropriate, of course.
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>

On 16 sep 2008, at 17.17, Erick Erickson wrote:
>
> The main arguments against using many separate indexes are
> 1> search warmup time. That is, each time you open an index
>     the first few queries take much longer than subsequent searches.
> 2> Managing a bazillion indexes is non-trivial.
>
>
> That said, in your particular case these may not apply. I guess the
> piece of information that really counts is "how often do you expect
> to update/search a given index"? You could avoid the warmup issue
> by keeping an index open for some period of time after the first
> search on the assumption that the user is going to make multiple
> searches rather than just one. I'm sure there are other tricks
> you can try.
>
> So, how often do you expect
> 1> users to backup date
> 2> users to query data?
> and what is acceptable search response time? and are your
> users willing to live with a significant delay on the first couple
> of queries?
>
> I'd only be comfortable with choosing an approach if I tried
> it out with a single computer's content and generated a few
> stats....
>
> Best
> Erick
>
> ----- Original Message ----
>> From: Tobias Larsson Hult <tobias.larsson.hult@findwise.se>
>> To: java-user@lucene.apache.org
>> Sent: Tuesday, September 16, 2008 10:55:09 AM
>> Subject: Using separate index for each user
>>
>> Hi,
>>
>> We're thinking of using Lucene to integrate search in a backup  
>> service
>> application. The background is that we have a bunch of users using a
>> backup service, and we want them to be able to search their own, and
>> only their own, backups.
>>
>> The total amount of data that's being backed up is very large (size  
>> in
>> terabyte). Even though the index will probably be smaller due to only
>> indexing relevant fields, it is still to much to incorporate in one
>> index. But since a user will only search in his/her own files we're
>> thinking of creating one index for each user. There will be a lot of
>> indexes of course but each index will not span to more than a couple
>> of gigabytes at the most.
>>
>> So when a user searches or adds new content to the backup we will  
>> open
>> up his/her index and to a search/update in that particular index.  
>> That
>> way, each query/update should not be so performance intense.
>>
>> Does this sound like a reasonable solution?  Of course this means
>> creating a lot of IndexReaders/Writers but I prefer that to searching
>> in a huge index everytime when a user only wants to search in a slice
>> of the total index.
>>
>> Best Regards,
>> Tobias Larsson Hult
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 18 06:48:59 2008
Return-Path: <java-user-return-36249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49182 invoked from network); 18 Sep 2008 06:48:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2008 06:48:58 -0000
Received: (qmail 33710 invoked by uid 500); 18 Sep 2008 06:48:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33684 invoked by uid 500); 18 Sep 2008 06:48:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33673 invoked by uid 99); 18 Sep 2008 06:48:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 23:48:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.39.214] (HELO web50312.mail.re2.yahoo.com) (206.190.39.214)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 18 Sep 2008 06:47:46 +0000
Received: (qmail 74398 invoked by uid 60001); 18 Sep 2008 06:47:18 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=ni9j+9ggsIcy1oA6R7dUoOZNGygjkKoLux/ivVH4LPp07PrXUbEvqLjDaxY0hxRQIuDr9ZfGjuH5LLjDTtsj2zj7THcDHqoAtNM6s4XLDPnOJ76gnM0KeCHoSLbgU/4aFVD8Zj39jk/tQUsiCSYlzktC7+g2DTDrZEMWVjyFJms=;
X-YMail-OSG: qfSscSMVM1moY31IULPTo8scC6e3AaCES0aDx64HtQI89izrXVnOEJU9x_fx7qkQgZFCd_J5Tw2HBkHnhveV9vUog36MQK2YZH6uVsjaOzvBhoG6xYrdJZPxAgddv0VFht_XM50tv.zkRha3xwdap5g-
Received: from [72.227.164.48] by web50312.mail.re2.yahoo.com via HTTP; Wed, 17 Sep 2008 23:47:18 PDT
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Wed, 17 Sep 2008 23:47:18 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Exception while doing sorting
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <661170.73589.qm@web50312.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

If your index is increasing in size so fast, you should start thinking about sharding your index (breaking it into multiple smaller indices that each fits on its server) and searching across them (aka distributed search).

Yes, Lucene can handle millions of records if run on adequate hardware and if used correctly.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Ganesh - yahoo <emailgane@yahoo.co.in>
> To: java-user@lucene.apache.org
> Sent: Thursday, September 18, 2008 12:53:19 AM
> Subject: Re: Exception while doing sorting
> 
> My index is growing by 1 million records per day. How much memory do i need 
> to increase.
> 
> What kind of sorting algorithm being used in Lucene. Is this efficient 
> enough to handle millions of records.
> 
> Whether we could do sorting using our own algorithm?
> 
> Regards
> Ganesh
> 
> ----- Original Message ----- 
> From: "Fuad Efendi" 
> To: 
> Sent: Wednesday, September 17, 2008 7:28 PM
> Subject: Re: Exception while doing sorting
> 
> 
> Increase memory.
> 
> Lucene uses FieldCache for sorting on non-tokenized field and tries to
> maintain fields from all your 4 millions documents, even if you need
> to sort only 4000 docs.
> ==============
> http://www.tokenizer.org/bot.html
> 
> 
> Quoting Ganesh - yahoo :
> 
> > Hello all,
> >
> > I am have indexed more than 4 million documents. My query fetches
> > 300,000 hits. If i perform sorting on any field, then tomcat reports
> > out of memory exception.
> > Sometimes the query results may be around 1000, but sorting on any
> > field might take more than 30 - 50 secs.
> >
> > I don't know what's going wrong.
> >
> > My index searcher is static object and it is getting refreshed every
> > minute. JSP pages directly calls the index searcher object and performs
> > search.
> >
> > Regards
> > Ganesh
> >
> >
> > Send instant messages to your online friends
> > http://in.messenger.yahoo.com
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> Send instant messages to your online friends http://in.messenger.yahoo.com 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 18 06:58:28 2008
Return-Path: <java-user-return-36250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54579 invoked from network); 18 Sep 2008 06:58:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2008 06:58:28 -0000
Received: (qmail 44099 invoked by uid 500); 18 Sep 2008 06:58:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44060 invoked by uid 500); 18 Sep 2008 06:58:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44049 invoked by uid 99); 18 Sep 2008 06:58:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Sep 2008 23:58:17 -0700
X-ASF-Spam-Status: No, hits=4.1 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WEIRD_PORT,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Sep 2008 06:57:15 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KgDSV-0005vH-G1
	for java-user@lucene.apache.org; Wed, 17 Sep 2008 23:57:47 -0700
Message-ID: <19547081.post@talk.nabble.com>
Date: Wed, 17 Sep 2008 23:57:47 -0700 (PDT)
From: anandsarwade <anand.sarwade@corp.aol.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene search fails for japanese characters in URL
In-Reply-To: <9233ccac0809171743x5b1746a1k8fe07f5fde6153a0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: anand.sarwade@corp.aol.com
References: <19533647.post@talk.nabble.com> <D8E6BD3AD2634843B58AFF6A94FE246202D7AEB6F5@msgint02.mogul.com> <19534342.post@talk.nabble.com> <9233ccac0809171743x5b1746a1k8fe07f5fde6153a0@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I do get the same string from Mysql and also in servlet request. I could
observe the actaul string in eclipse while debugging. it is stored as UTF-8
format so retrievel is coming as stored.

plz let me know if iam not clear


=E5=8F=B6=E5=8F=8C=E6=98=8E wrote:
>=20
> You must trace the string  in each step!
> Important step is get string from MYSQL and get parameter in servlet,
> please
> check it, do you get the right string?
> Chinese has the same problem too.
>=20
> 2008/9/17 anandsarwade <anand.sarwade@corp.aol.com>
>=20
>>
>> Hello Jimi,
>>
>> Thanks a lot for your valuable suggestion.
>>
>> I am using tomcat 5 . As per your suggestions ,checked the server.xml bu=
t
>> found that no URIEncoding was set.
>> I have set now and to my great relief :-) i could see the Lucene results
>> on
>> my browser for japanese string with request objects in UTF-8 now.
>>
>> Thanks again for your help.
>>
>> Regards,
>> Anand.
>>
>>
>> JimiH wrote:
>> >
>> > What webserver are you using? For example, with Tomcat, it could be
>> > because of the setting URIEncoding in server.xml.
>> >
>> > http://tomcat.apache.org/tomcat-5.5-doc/config/http.html
>> >
>> > /Jimi
>> >
>> > mogul | jimi hulleg=C3=A5rd | system developer | hudiksvallsgatan 4, 1=
13 30
>> > stockholm sweden | +46 8 506 66 172 | +46 765 27 19 55 |
>> > jimi.hullegard@mogul.com | www.mogul.com
>> >
>> >
>> >> -----Original Message-----
>> >> From: anandsarwade [mailto:anand.sarwade@corp.aol.com]
>> >> Sent: den 17 september 2008 16:42
>> >> To: java-user@lucene.apache.org
>> >> Subject: Lucene search fails for japanese characters in URL
>> >>
>> >>
>> >> Hi ,
>> >>
>> >> I am facing below problem. Please help me in this.
>> >>
>> >> I have integrated CJK Analyzer for Japanese characters. I am
>> >> able to save
>> >> japanese double byte characters in mysql database in UTF-8
>> >> format without
>> >> issues. I could that data is getted indexed. Now when i
>> >> search the Japanese
>> >> characters which were indexed using the URL below , returns
>> >> empty results.
>> >>
>> >> http://xml.demo.myaol.jp:8082/portal/gallery-search?first=3D1&ma
>> >> x=3D100&cap=3D=E8=A8=80=E8=AA=9E
>> >>
>> >> Noticed that the above url gets converted to the following
>> >> URL having some
>> >> HTML encoded strings in search.
>> >>
>> >> http://xml.demo.myaol.jp:8082/portal/gallery-search?first=3D1&ma
>> >> x=3D100&cap=3D%E8%A8%80%E8%AA%9E
>> >>
>> >> This does not match with the existing lucene indexes
>> >> henceforth returns
>> >> empty results.  How do i solve this lucene search issue
>> >> having japanese
>> >> words in URLs.? Is there any way to convert such characters
>> >> back to Japanese
>> >> words???
>> >>
>> >> Any help/suggestions in this regards is highly appreciated.
>> >>
>> >> Thanks in Advance.
>> >>
>> >> Regards,
>> >> Anand
>> >>
>> >> --
>> >> View this message in context:
>> >> http://www.nabble.com/Lucene-search-fails-for-japanese-charact
>> >> ers-in-URL-tp19533647p19533647.html
>> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>> >
>>
>> --
>> View this message in context:
>> http://www.nabble.com/Lucene-search-fails-for-japanese-characters-in-URL=
-tp19533647p19534342.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>=20
>=20
> --=20
> Sorry for my english!! =E6=98=8E
> Please help me to correct my english expression and error in syntax
>=20
>=20

--=20
View this message in context: http://www.nabble.com/Lucene-search-fails-for=
-japanese-characters-in-URL-tp19533647p19547081.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 18 07:38:25 2008
Return-Path: <java-user-return-36251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77964 invoked from network); 18 Sep 2008 07:38:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2008 07:38:25 -0000
Received: (qmail 98581 invoked by uid 500); 18 Sep 2008 07:38:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98547 invoked by uid 500); 18 Sep 2008 07:38:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98536 invoked by uid 99); 18 Sep 2008 07:38:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Sep 2008 00:38:15 -0700
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WEIRD_PORT,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yeshuangming@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Sep 2008 07:37:13 +0000
Received: by gxk6 with SMTP id 6so21611490gxk.5
        for <java-user@lucene.apache.org>; Thu, 18 Sep 2008 00:36:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Xg7ZBsMn7mV5ch6W0KtNE5Q94+oXt0VoeJKyahfQQ3o=;
        b=a+jLYoptTjbqLpxcDjDmzPJnTSPsBuLp6IY/t81C5RUQqwrd5uwN+ce6qHTeQxL+t3
         O8e4AZVzyhYff3tbcMMwsfEUNpKDwDrGrbTtR+PDB4btwqPfspw0MNUiq9O8RV0uZTUv
         Y59Eya5BmyN+b1KEnNgZMj+RWLa0Q2XNXUq7U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=jHgW1PJDz2xf4H/IRC7J1KAvdDOtDkJYXxjIhztwltvx6tuKaMDzTZzy2FifRM7P5k
         /1d806XROdc2qqCrhQkoErN+a0XtThPKXPWjizKq20cQODlOha3nVYa9THsHaKStqpfv
         NEMMJaiC7m0nqmQeyH1D5ZFLzqacOQAGfsL5s=
Received: by 10.150.182.17 with SMTP id e17mr802317ybf.23.1221723405130;
        Thu, 18 Sep 2008 00:36:45 -0700 (PDT)
Received: by 10.151.100.9 with HTTP; Thu, 18 Sep 2008 00:36:45 -0700 (PDT)
Message-ID: <9233ccac0809180036r8ccc5cajcc997193de20401e@mail.gmail.com>
Date: Thu, 18 Sep 2008 15:36:45 +0800
From: "=?UTF-8?B?5Y+25Y+M5piO?=" <yeshuangming@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene search fails for japanese characters in URL
In-Reply-To: <19547081.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11409_32402907.1221723405135"
References: <19533647.post@talk.nabble.com>
	 <D8E6BD3AD2634843B58AFF6A94FE246202D7AEB6F5@msgint02.mogul.com>
	 <19534342.post@talk.nabble.com>
	 <9233ccac0809171743x5b1746a1k8fe07f5fde6153a0@mail.gmail.com>
	 <19547081.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11409_32402907.1221723405135
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

QW5kLCB5b3UgY2FuIHVzZSBUb29sIGx1a2UgdG8gc2VlIHdoYXQgaXMgaW4gdGhlIGluZGV4IGlu
ZGVlZC4Kd2hhdCBpcyBpbiB0aGUgUXVlcnkgd2hpY2ggcHV0IGludG8gSW5kZXhTZWFyY2hlci5z
ZWFyY2goKSwgd2hhdCBpcyB0aGUKZGVmYXVsdE9wZXJhdG9lciBvZiBRdWVyeVBhcnNlci4KCkNh
biB5b3UgZ2V0IGhpdHMgYnkgc2V0dXAgYSBzaW1wbGUgSW5kZXhTZWFyY2hlciwgbm8gdGhyb3Vn
aCAgdG9tY2F0PwoKMjAwOC85LzE4IGFuYW5kc2Fyd2FkZSA8YW5hbmQuc2Fyd2FkZUBjb3JwLmFv
bC5jb20+Cgo+Cj4gSGksCj4KPiBJIGRvIGdldCB0aGUgc2FtZSBzdHJpbmcgZnJvbSBNeXNxbCBh
bmQgYWxzbyBpbiBzZXJ2bGV0IHJlcXVlc3QuIEkgY291bGQKPiBvYnNlcnZlIHRoZSBhY3RhdWwg
c3RyaW5nIGluIGVjbGlwc2Ugd2hpbGUgZGVidWdnaW5nLiBpdCBpcyBzdG9yZWQgYXMgVVRGLTgK
PiBmb3JtYXQgc28gcmV0cmlldmVsIGlzIGNvbWluZyBhcyBzdG9yZWQuCj4KPiBwbHogbGV0IG1l
IGtub3cgaWYgaWFtIG5vdCBjbGVhcgo+Cj4KPiDlj7blj4zmmI4gd3JvdGU6Cj4gPgo+ID4gWW91
IG11c3QgdHJhY2UgdGhlIHN0cmluZyAgaW4gZWFjaCBzdGVwIQo+ID4gSW1wb3J0YW50IHN0ZXAg
aXMgZ2V0IHN0cmluZyBmcm9tIE1ZU1FMIGFuZCBnZXQgcGFyYW1ldGVyIGluIHNlcnZsZXQsCj4g
PiBwbGVhc2UKPiA+IGNoZWNrIGl0LCBkbyB5b3UgZ2V0IHRoZSByaWdodCBzdHJpbmc/Cj4gPiBD
aGluZXNlIGhhcyB0aGUgc2FtZSBwcm9ibGVtIHRvby4KPiA+Cj4gPiAyMDA4LzkvMTcgYW5hbmRz
YXJ3YWRlIDxhbmFuZC5zYXJ3YWRlQGNvcnAuYW9sLmNvbT4KPiA+Cj4gPj4KPiA+PiBIZWxsbyBK
aW1pLAo+ID4+Cj4gPj4gVGhhbmtzIGEgbG90IGZvciB5b3VyIHZhbHVhYmxlIHN1Z2dlc3Rpb24u
Cj4gPj4KPiA+PiBJIGFtIHVzaW5nIHRvbWNhdCA1IC4gQXMgcGVyIHlvdXIgc3VnZ2VzdGlvbnMg
LGNoZWNrZWQgdGhlIHNlcnZlci54bWwKPiBidXQKPiA+PiBmb3VuZCB0aGF0IG5vIFVSSUVuY29k
aW5nIHdhcyBzZXQuCj4gPj4gSSBoYXZlIHNldCBub3cgYW5kIHRvIG15IGdyZWF0IHJlbGllZiA6
LSkgaSBjb3VsZCBzZWUgdGhlIEx1Y2VuZSByZXN1bHRzCj4gPj4gb24KPiA+PiBteSBicm93c2Vy
IGZvciBqYXBhbmVzZSBzdHJpbmcgd2l0aCByZXF1ZXN0IG9iamVjdHMgaW4gVVRGLTggbm93Lgo+
ID4+Cj4gPj4gVGhhbmtzIGFnYWluIGZvciB5b3VyIGhlbHAuCj4gPj4KPiA+PiBSZWdhcmRzLAo+
ID4+IEFuYW5kLgo+ID4+Cj4gPj4KPiA+PiBKaW1pSCB3cm90ZToKPiA+PiA+Cj4gPj4gPiBXaGF0
IHdlYnNlcnZlciBhcmUgeW91IHVzaW5nPyBGb3IgZXhhbXBsZSwgd2l0aCBUb21jYXQsIGl0IGNv
dWxkIGJlCj4gPj4gPiBiZWNhdXNlIG9mIHRoZSBzZXR0aW5nIFVSSUVuY29kaW5nIGluIHNlcnZl
ci54bWwuCj4gPj4gPgo+ID4+ID4gaHR0cDovL3RvbWNhdC5hcGFjaGUub3JnL3RvbWNhdC01LjUt
ZG9jL2NvbmZpZy9odHRwLmh0bWwKPiA+PiA+Cj4gPj4gPiAvSmltaQo+ID4+ID4KPiA+PiA+IG1v
Z3VsIHwgamltaSBodWxsZWfDpXJkIHwgc3lzdGVtIGRldmVsb3BlciB8IGh1ZGlrc3ZhbGxzZ2F0
YW4gNCwgMTEzIDMwCj4gPj4gPiBzdG9ja2hvbG0gc3dlZGVuIHwgKzQ2IDggNTA2IDY2IDE3MiB8
ICs0NiA3NjUgMjcgMTkgNTUgfAo+ID4+ID4gamltaS5odWxsZWdhcmRAbW9ndWwuY29tIHwgd3d3
Lm1vZ3VsLmNvbQo+ID4+ID4KPiA+PiA+Cj4gPj4gPj4gLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0t
LS0KPiA+PiA+PiBGcm9tOiBhbmFuZHNhcndhZGUgW21haWx0bzphbmFuZC5zYXJ3YWRlQGNvcnAu
YW9sLmNvbV0KPiA+PiA+PiBTZW50OiBkZW4gMTcgc2VwdGVtYmVyIDIwMDggMTY6NDIKPiA+PiA+
PiBUbzogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnCj4gPj4gPj4gU3ViamVjdDogTHVjZW5l
IHNlYXJjaCBmYWlscyBmb3IgamFwYW5lc2UgY2hhcmFjdGVycyBpbiBVUkwKPiA+PiA+Pgo+ID4+
ID4+Cj4gPj4gPj4gSGkgLAo+ID4+ID4+Cj4gPj4gPj4gSSBhbSBmYWNpbmcgYmVsb3cgcHJvYmxl
bS4gUGxlYXNlIGhlbHAgbWUgaW4gdGhpcy4KPiA+PiA+Pgo+ID4+ID4+IEkgaGF2ZSBpbnRlZ3Jh
dGVkIENKSyBBbmFseXplciBmb3IgSmFwYW5lc2UgY2hhcmFjdGVycy4gSSBhbQo+ID4+ID4+IGFi
bGUgdG8gc2F2ZQo+ID4+ID4+IGphcGFuZXNlIGRvdWJsZSBieXRlIGNoYXJhY3RlcnMgaW4gbXlz
cWwgZGF0YWJhc2UgaW4gVVRGLTgKPiA+PiA+PiBmb3JtYXQgd2l0aG91dAo+ID4+ID4+IGlzc3Vl
cy4gSSBjb3VsZCB0aGF0IGRhdGEgaXMgZ2V0dGVkIGluZGV4ZWQuIE5vdyB3aGVuIGkKPiA+PiA+
PiBzZWFyY2ggdGhlIEphcGFuZXNlCj4gPj4gPj4gY2hhcmFjdGVycyB3aGljaCB3ZXJlIGluZGV4
ZWQgdXNpbmcgdGhlIFVSTCBiZWxvdyAsIHJldHVybnMKPiA+PiA+PiBlbXB0eSByZXN1bHRzLgo+
ID4+ID4+Cj4gPj4gPj4gaHR0cDovL3htbC5kZW1vLm15YW9sLmpwOjgwODIvcG9ydGFsL2dhbGxl
cnktc2VhcmNoP2ZpcnN0PTEmbWEKPiA+PiA+PiB4PTEwMCZjYXA96KiA6KqeCj4gPj4gPj4KPiA+
PiA+PiBOb3RpY2VkIHRoYXQgdGhlIGFib3ZlIHVybCBnZXRzIGNvbnZlcnRlZCB0byB0aGUgZm9s
bG93aW5nCj4gPj4gPj4gVVJMIGhhdmluZyBzb21lCj4gPj4gPj4gSFRNTCBlbmNvZGVkIHN0cmlu
Z3MgaW4gc2VhcmNoLgo+ID4+ID4+Cj4gPj4gPj4gaHR0cDovL3htbC5kZW1vLm15YW9sLmpwOjgw
ODIvcG9ydGFsL2dhbGxlcnktc2VhcmNoP2ZpcnN0PTEmbWEKPiA+PiA+PiB4PTEwMCZjYXA9JUU4
JUE4JTgwJUU4JUFBJTlFCj4gPj4gPj4KPiA+PiA+PiBUaGlzIGRvZXMgbm90IG1hdGNoIHdpdGgg
dGhlIGV4aXN0aW5nIGx1Y2VuZSBpbmRleGVzCj4gPj4gPj4gaGVuY2Vmb3J0aCByZXR1cm5zCj4g
Pj4gPj4gZW1wdHkgcmVzdWx0cy4gIEhvdyBkbyBpIHNvbHZlIHRoaXMgbHVjZW5lIHNlYXJjaCBp
c3N1ZQo+ID4+ID4+IGhhdmluZyBqYXBhbmVzZQo+ID4+ID4+IHdvcmRzIGluIFVSTHMuPyBJcyB0
aGVyZSBhbnkgd2F5IHRvIGNvbnZlcnQgc3VjaCBjaGFyYWN0ZXJzCj4gPj4gPj4gYmFjayB0byBK
YXBhbmVzZQo+ID4+ID4+IHdvcmRzPz8/Cj4gPj4gPj4KPiA+PiA+PiBBbnkgaGVscC9zdWdnZXN0
aW9ucyBpbiB0aGlzIHJlZ2FyZHMgaXMgaGlnaGx5IGFwcHJlY2lhdGVkLgo+ID4+ID4+Cj4gPj4g
Pj4gVGhhbmtzIGluIEFkdmFuY2UuCj4gPj4gPj4KPiA+PiA+PiBSZWdhcmRzLAo+ID4+ID4+IEFu
YW5kCj4gPj4gPj4KPiA+PiA+PiAtLQo+ID4+ID4+IFZpZXcgdGhpcyBtZXNzYWdlIGluIGNvbnRl
eHQ6Cj4gPj4gPj4gaHR0cDovL3d3dy5uYWJibGUuY29tL0x1Y2VuZS1zZWFyY2gtZmFpbHMtZm9y
LWphcGFuZXNlLWNoYXJhY3QKPiA+PiA+PiBlcnMtaW4tVVJMLXRwMTk1MzM2NDdwMTk1MzM2NDcu
aHRtbAo+ID4+ID4+IFNlbnQgZnJvbSB0aGUgTHVjZW5lIC0gSmF2YSBVc2VycyBtYWlsaW5nIGxp
c3QgYXJjaGl2ZSBhdCBOYWJibGUuY29tLgo+ID4+ID4+Cj4gPj4gPj4KPiA+PiA+PiAtLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0KPiA+PiA+PiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3Jp
YmVAbHVjZW5lLmFwYWNoZS5vcmcKPiA+PiA+PiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1t
YWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+ID4+ID4+Cj4gPj4gPj4KPiA+
PiA+Cj4gPj4gPgo+ID4+Cj4gPj4gLS0KPiA+PiBWaWV3IHRoaXMgbWVzc2FnZSBpbiBjb250ZXh0
Ogo+ID4+Cj4gaHR0cDovL3d3dy5uYWJibGUuY29tL0x1Y2VuZS1zZWFyY2gtZmFpbHMtZm9yLWph
cGFuZXNlLWNoYXJhY3RlcnMtaW4tVVJMLXRwMTk1MzM2NDdwMTk1MzQzNDIuaHRtbAo+ID4+IFNl
bnQgZnJvbSB0aGUgTHVjZW5lIC0gSmF2YSBVc2VycyBtYWlsaW5nIGxpc3QgYXJjaGl2ZSBhdCBO
YWJibGUuY29tLgo+ID4+Cj4gPj4KPiA+PiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiA+PiBUbyB1bnN1YnNjcmli
ZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPiA+PiBG
b3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBh
Y2hlLm9yZwo+ID4+Cj4gPj4KPiA+Cj4gPgo+ID4gLS0KPiA+IFNvcnJ5IGZvciBteSBlbmdsaXNo
ISEg5piOCj4gPiBQbGVhc2UgaGVscCBtZSB0byBjb3JyZWN0IG15IGVuZ2xpc2ggZXhwcmVzc2lv
biBhbmQgZXJyb3IgaW4gc3ludGF4Cj4gPgo+ID4KPgo+IC0tCj4gVmlldyB0aGlzIG1lc3NhZ2Ug
aW4gY29udGV4dDoKPiBodHRwOi8vd3d3Lm5hYmJsZS5jb20vTHVjZW5lLXNlYXJjaC1mYWlscy1m
b3ItamFwYW5lc2UtY2hhcmFjdGVycy1pbi1VUkwtdHAxOTUzMzY0N3AxOTU0NzA4MS5odG1sCj4g
U2VudCBmcm9tIHRoZSBMdWNlbmUgLSBKYXZhIFVzZXJzIG1haWxpbmcgbGlzdCBhcmNoaXZlIGF0
IE5hYmJsZS5jb20uCj4KPgo+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6
IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+IEZvciBhZGRpdGlvbmFs
IGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4KPgoK
Ci0tIApTb3JyeSBmb3IgbXkgZW5nbGlzaCEhIOaYjgpQbGVhc2UgaGVscCBtZSB0byBjb3JyZWN0
IG15IGVuZ2xpc2ggZXhwcmVzc2lvbiBhbmQgZXJyb3IgaW4gc3ludGF4Cg==
------=_Part_11409_32402907.1221723405135--

From java-user-return-36252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 18 10:23:02 2008
Return-Path: <java-user-return-36252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77641 invoked from network); 18 Sep 2008 10:22:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2008 10:22:59 -0000
Received: (qmail 96276 invoked by uid 500); 18 Sep 2008 10:22:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95954 invoked by uid 500); 18 Sep 2008 10:22:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95943 invoked by uid 99); 18 Sep 2008 10:22:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Sep 2008 03:22:45 -0700
X-ASF-Spam-Status: No, hits=4.1 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WEIRD_PORT,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Sep 2008 10:21:44 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KgGeO-0005zH-GJ
	for java-user@lucene.apache.org; Thu, 18 Sep 2008 03:22:16 -0700
Message-ID: <19549854.post@talk.nabble.com>
Date: Thu, 18 Sep 2008 03:22:16 -0700 (PDT)
From: anandsarwade <anand.sarwade@corp.aol.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene search fails for japanese characters in URL
In-Reply-To: <9233ccac0809180036r8ccc5cajcc997193de20401e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: anand.sarwade@corp.aol.com
References: <19533647.post@talk.nabble.com> <D8E6BD3AD2634843B58AFF6A94FE246202D7AEB6F5@msgint02.mogul.com> <19534342.post@talk.nabble.com> <9233ccac0809171743x5b1746a1k8fe07f5fde6153a0@mail.gmail.com> <19547081.post@talk.nabble.com> <9233ccac0809180036r8ccc5cajcc997193de20401e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


This Luke tool seems to be pretty cool. I have installed and its very easy =
to
find out the indexes and what is being stored. thanks for this info.

I have tried in tomcat and things works fine without issues. Default
operator is OR in my case. i havent tried with setting up stanalone
indexsearcher but i believe it should work. Please let me know if any
issues.


=E5=8F=B6=E5=8F=8C=E6=98=8E wrote:
>=20
> And, you can use Tool luke to see what is in the index indeed.
> what is in the Query which put into IndexSearcher.search(), what is the
> defaultOperatoer of QueryParser.
>=20
> Can you get hits by setup a simple IndexSearcher, no through  tomcat?
>=20
> 2008/9/18 anandsarwade <anand.sarwade@corp.aol.com>
>=20
>>
>> Hi,
>>
>> I do get the same string from Mysql and also in servlet request. I could
>> observe the actaul string in eclipse while debugging. it is stored as
>> UTF-8
>> format so retrievel is coming as stored.
>>
>> plz let me know if iam not clear
>>
>>
>> =E5=8F=B6=E5=8F=8C=E6=98=8E wrote:
>> >
>> > You must trace the string  in each step!
>> > Important step is get string from MYSQL and get parameter in servlet,
>> > please
>> > check it, do you get the right string?
>> > Chinese has the same problem too.
>> >
>> > 2008/9/17 anandsarwade <anand.sarwade@corp.aol.com>
>> >
>> >>
>> >> Hello Jimi,
>> >>
>> >> Thanks a lot for your valuable suggestion.
>> >>
>> >> I am using tomcat 5 . As per your suggestions ,checked the server.xml
>> but
>> >> found that no URIEncoding was set.
>> >> I have set now and to my great relief :-) i could see the Lucene
>> results
>> >> on
>> >> my browser for japanese string with request objects in UTF-8 now.
>> >>
>> >> Thanks again for your help.
>> >>
>> >> Regards,
>> >> Anand.
>> >>
>> >>
>> >> JimiH wrote:
>> >> >
>> >> > What webserver are you using? For example, with Tomcat, it could be
>> >> > because of the setting URIEncoding in server.xml.
>> >> >
>> >> > http://tomcat.apache.org/tomcat-5.5-doc/config/http.html
>> >> >
>> >> > /Jimi
>> >> >
>> >> > mogul | jimi hulleg=C3=A5rd | system developer | hudiksvallsgatan 4=
, 113
>> 30
>> >> > stockholm sweden | +46 8 506 66 172 | +46 765 27 19 55 |
>> >> > jimi.hullegard@mogul.com | www.mogul.com
>> >> >
>> >> >
>> >> >> -----Original Message-----
>> >> >> From: anandsarwade [mailto:anand.sarwade@corp.aol.com]
>> >> >> Sent: den 17 september 2008 16:42
>> >> >> To: java-user@lucene.apache.org
>> >> >> Subject: Lucene search fails for japanese characters in URL
>> >> >>
>> >> >>
>> >> >> Hi ,
>> >> >>
>> >> >> I am facing below problem. Please help me in this.
>> >> >>
>> >> >> I have integrated CJK Analyzer for Japanese characters. I am
>> >> >> able to save
>> >> >> japanese double byte characters in mysql database in UTF-8
>> >> >> format without
>> >> >> issues. I could that data is getted indexed. Now when i
>> >> >> search the Japanese
>> >> >> characters which were indexed using the URL below , returns
>> >> >> empty results.
>> >> >>
>> >> >> http://xml.demo.myaol.jp:8082/portal/gallery-search?first=3D1&ma
>> >> >> x=3D100&cap=3D=E8=A8=80=E8=AA=9E
>> >> >>
>> >> >> Noticed that the above url gets converted to the following
>> >> >> URL having some
>> >> >> HTML encoded strings in search.
>> >> >>
>> >> >> http://xml.demo.myaol.jp:8082/portal/gallery-search?first=3D1&ma
>> >> >> x=3D100&cap=3D%E8%A8%80%E8%AA%9E
>> >> >>
>> >> >> This does not match with the existing lucene indexes
>> >> >> henceforth returns
>> >> >> empty results.  How do i solve this lucene search issue
>> >> >> having japanese
>> >> >> words in URLs.? Is there any way to convert such characters
>> >> >> back to Japanese
>> >> >> words???
>> >> >>
>> >> >> Any help/suggestions in this regards is highly appreciated.
>> >> >>
>> >> >> Thanks in Advance.
>> >> >>
>> >> >> Regards,
>> >> >> Anand
>> >> >>
>> >> >> --
>> >> >> View this message in context:
>> >> >> http://www.nabble.com/Lucene-search-fails-for-japanese-charact
>> >> >> ers-in-URL-tp19533647p19533647.html
>> >> >> Sent from the Lucene - Java Users mailing list archive at
>> Nabble.com.
>> >> >>
>> >> >>
>> >> >>
>> ---------------------------------------------------------------------
>> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> >>
>> >> >>
>> >> >
>> >> >
>> >>
>> >> --
>> >> View this message in context:
>> >>
>> http://www.nabble.com/Lucene-search-fails-for-japanese-characters-in-URL=
-tp19533647p19534342.html
>> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>> >
>> > --
>> > Sorry for my english!! =E6=98=8E
>> > Please help me to correct my english expression and error in syntax
>> >
>> >
>>
>> --
>> View this message in context:
>> http://www.nabble.com/Lucene-search-fails-for-japanese-characters-in-URL=
-tp19533647p19547081.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>=20
>=20
> --=20
> Sorry for my english!! =E6=98=8E
> Please help me to correct my english expression and error in syntax
>=20
>=20

--=20
View this message in context: http://www.nabble.com/Lucene-search-fails-for=
-japanese-characters-in-URL-tp19533647p19549854.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 18 11:09:02 2008
Return-Path: <java-user-return-36253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5105 invoked from network); 18 Sep 2008 11:09:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2008 11:09:01 -0000
Received: (qmail 60358 invoked by uid 500); 18 Sep 2008 11:08:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60332 invoked by uid 500); 18 Sep 2008 11:08:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60319 invoked by uid 99); 18 Sep 2008 11:08:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Sep 2008 04:08:51 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.237 as permitted sender)
Received: from [209.85.198.237] (HELO rv-out-0506.google.com) (209.85.198.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Sep 2008 11:07:53 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3415092rvb.5
        for <java-user@lucene.apache.org>; Thu, 18 Sep 2008 04:08:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=o2m4Nhn+ZbXPUPZ+2eCMqgTbUyulO7mtkQWDxXaj96s=;
        b=rmJhJhrCmRpdQ7+nwb6JzJIVPhQswY0Ry5VyspOgpD48yIw5DOcO3ckK40DZNP+en7
         tHNyRbXNnCq5UNwT45LvvC6ejz9jCdN5vrHlzBzeTnYOoVlniPIp4YXqr9UOKUp/C47G
         J1jYO0eCQy+rudycqaZrs5TWL/Zr/qC6s8G3w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=BXqwBRJUi6d3i2fiIfD5k7c05inRFCFaJgSLrGb1YH8Tt6r+Q0XdVeWYFNy7m1rpdE
         s1Sb+2M8U6nxzxZjdSTiiE4nZxHGoqpo4rBv88XGAZvH65Iezc9oe4qIGF9eriZlakX8
         SLzLJw8JDLsroIJcyK0XYfqtkDOVztsJ+eRWc=
Received: by 10.141.203.7 with SMTP id f7mr7351579rvq.7.1221736106405;
        Thu, 18 Sep 2008 04:08:26 -0700 (PDT)
Received: by 10.141.176.5 with HTTP; Thu, 18 Sep 2008 04:08:26 -0700 (PDT)
Message-ID: <1bcb7c7f0809180408y33322938vd9da906e7a6c761e@mail.gmail.com>
Date: Thu, 18 Sep 2008 14:08:26 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher.search
In-Reply-To: <Pine.LNX.4.62.0809171135050.2301@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <682882.35954.qm@web50312.mail.re2.yahoo.com>
	 <48CF2124.3090501@nuix.com>
	 <Pine.LNX.4.62.0809161143560.12858@radix.cryptio.net>
	 <48D075DD.5050407@nuix.com>
	 <Pine.LNX.4.62.0809171135050.2301@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org

one moment:

the top doc collector is based on some sort of queue, I assume. What
kind of queue is that? does it sort based on score, or whichever doc
comes first.

best.


On Wed, Sep 17, 2008 at 9:43 PM, Chris Hostetter
<hossman_lucene@fucit.org> wrote:
>
> : Well, it turns out the theoretical maximum for the Swing case is not
> : Integer.MAX_VALUE, but is actually somewhere around 200 million due to
>        ...
> : In reality memory runs out sooner, which is why I was considering on-disk
> : storage of the topdocs.
> :
> : But even if the user doesn't want to *see* the items which come back, quite
> : often they do want to Select All and perform some operation (e.g. tag them,
>
> I'm not sure where "Swing" came up in this thread ... or on-disk storage
> (was that something you mentioned in another similar thread?)
>
> But it don'treally see how it chagnes anything ... if your goal is to
> perform an operating on every result in a set, why are you using
> TopDocSCollector?  why not write a HitCollector and perform your
> operation in the collect method?
>
> : copy the data to somewhere.)  So regardless of the page size or the amount of
> : data visible at any point in time, there is always the need to get the "set of
> : every match" for any given search eventually.
>
> I don't disagree with you, but is there a reason to have the entire set in
> memory all at once regardless of it's size?
>
> At the end of the day: people switching to using TopDocsCollector
> instead of Hits are no worse off when trying to iterate over every result
> in a ginormous result set, they're just have to define "ginormous"
> for themselves, and the get an OOM right away instead of once they iterate
> up to that many.
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 18 13:35:46 2008
Return-Path: <java-user-return-36254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2133 invoked from network); 18 Sep 2008 13:35:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2008 13:35:46 -0000
Received: (qmail 34500 invoked by uid 500); 18 Sep 2008 13:35:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34464 invoked by uid 500); 18 Sep 2008 13:35:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34453 invoked by uid 99); 18 Sep 2008 13:35:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Sep 2008 06:35:35 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.238 as permitted sender)
Received: from [209.85.198.238] (HELO rv-out-0506.google.com) (209.85.198.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Sep 2008 13:34:34 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3464690rvb.5
        for <java-user@lucene.apache.org>; Thu, 18 Sep 2008 06:34:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=G1m5dvB3IK5g3xm9EK/yfCN50pf6UpQgbzsDQsqu/0Q=;
        b=xbS8eNefFsdQaQbG/aKbdr+6Kx/1hkkn74bNho1pl2Okx/u4eXohaZOWuNda5pLGRR
         qqbmF+aP2EPtXzMq0LTfuNYhmA7bpDdi7ICl5Ms+T+W1GFuCbIuG8Shl6pzAv1Z3o6wf
         8mBJSkCjqxc/GCRLEZDKKjxA2G1BmdKikuQAg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=kTQZv9jHxXP0R8igzknd1Aq//QymQP3OY/w98JuVU1gSv5bg+ENDGEpi2y2IDdfDZm
         dwP29NSN9BJJji8Rz6W5mPI7gGpSu//tMHWMsETD46pehpdU7hFkgHcgP4REF6C94VAA
         3Kr6O+u9/L3nLzvI3SS+c2BuOT5NY+SbT9Oi4=
Received: by 10.141.76.1 with SMTP id d1mr7416710rvl.269.1221744897851;
        Thu, 18 Sep 2008 06:34:57 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Thu, 18 Sep 2008 06:34:57 -0700 (PDT)
Message-ID: <359a92830809180634k1aba6a63y939b4469c0803f67@mail.gmail.com>
Date: Thu, 18 Sep 2008 09:34:57 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using separate index for each user
In-Reply-To: <980AF0BE-D585-4C3D-B87A-78EA42C21CB9@findwise.se>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_21786_8170827.1221744897844"
References: <955596.89169.qm@web50306.mail.re2.yahoo.com>
	 <980AF0BE-D585-4C3D-B87A-78EA42C21CB9@findwise.se>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_21786_8170827.1221744897844
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

uuuhhhh, take anything Otis says as *much* more informed than anything I say
on this topic <G>.

Erick

On Thu, Sep 18, 2008 at 2:32 AM, Tobias Larsson Hult <
tobias.larsson.hult@findwise.se> wrote:

> Thanks for the quick responses!
>
> Good point about the warmup issues Erick, that's something we will
> consider. Good to know that this kind of setup has been proved working for
> at least one :) I think we will do a small setup and test the performance.
>
> Thanks again for valuable input!
>
> Best Regards
> Tobias
>
>
> On 16 sep 2008, at 18.10, Otis Gospodnetic wrote:
>
>  Tobias,
>>
>> That's the approach I took with Simpy.com and it's been working well for
>> several years now.  You'll have to keep track of searchers and close them
>> when appropriate, of course.
>>
>> Otis
>> --
>> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>>
>>
> On 16 sep 2008, at 17.17, Erick Erickson wrote:
>
>>
>> The main arguments against using many separate indexes are
>> 1> search warmup time. That is, each time you open an index
>>    the first few queries take much longer than subsequent searches.
>> 2> Managing a bazillion indexes is non-trivial.
>>
>>
>> That said, in your particular case these may not apply. I guess the
>> piece of information that really counts is "how often do you expect
>> to update/search a given index"? You could avoid the warmup issue
>> by keeping an index open for some period of time after the first
>> search on the assumption that the user is going to make multiple
>> searches rather than just one. I'm sure there are other tricks
>> you can try.
>>
>> So, how often do you expect
>> 1> users to backup date
>> 2> users to query data?
>> and what is acceptable search response time? and are your
>> users willing to live with a significant delay on the first couple
>> of queries?
>>
>> I'd only be comfortable with choosing an approach if I tried
>> it out with a single computer's content and generated a few
>> stats....
>>
>> Best
>> Erick
>>
>> ----- Original Message ----
>>
>>> From: Tobias Larsson Hult <tobias.larsson.hult@findwise.se>
>>> To: java-user@lucene.apache.org
>>> Sent: Tuesday, September 16, 2008 10:55:09 AM
>>> Subject: Using separate index for each user
>>>
>>> Hi,
>>>
>>> We're thinking of using Lucene to integrate search in a backup service
>>> application. The background is that we have a bunch of users using a
>>> backup service, and we want them to be able to search their own, and
>>> only their own, backups.
>>>
>>> The total amount of data that's being backed up is very large (size in
>>> terabyte). Even though the index will probably be smaller due to only
>>> indexing relevant fields, it is still to much to incorporate in one
>>> index. But since a user will only search in his/her own files we're
>>> thinking of creating one index for each user. There will be a lot of
>>> indexes of course but each index will not span to more than a couple
>>> of gigabytes at the most.
>>>
>>> So when a user searches or adds new content to the backup we will open
>>> up his/her index and to a search/update in that particular index. That
>>> way, each query/update should not be so performance intense.
>>>
>>> Does this sound like a reasonable solution?  Of course this means
>>> creating a lot of IndexReaders/Writers but I prefer that to searching
>>> in a huge index everytime when a user only wants to search in a slice
>>> of the total index.
>>>
>>> Best Regards,
>>> Tobias Larsson Hult
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_21786_8170827.1221744897844--

From java-user-return-36255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 18 14:20:38 2008
Return-Path: <java-user-return-36255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28834 invoked from network); 18 Sep 2008 14:20:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2008 14:20:37 -0000
Received: (qmail 30248 invoked by uid 500); 18 Sep 2008 14:20:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30226 invoked by uid 500); 18 Sep 2008 14:20:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30215 invoked by uid 99); 18 Sep 2008 14:20:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Sep 2008 07:20:27 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.92.26] (HELO qw-out-2122.google.com) (74.125.92.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Sep 2008 14:19:27 +0000
Received: by qw-out-2122.google.com with SMTP id 5so335469qwi.53
        for <java-user@lucene.apache.org>; Thu, 18 Sep 2008 07:19:58 -0700 (PDT)
Received: by 10.214.81.3 with SMTP id e3mr3878166qab.87.1221747598352;
        Thu, 18 Sep 2008 07:19:58 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id 5sm14211945qwh.2.2008.09.18.07.19.56
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 18 Sep 2008 07:19:57 -0700 (PDT)
Message-Id: <631B98C8-69CE-40DC-AA17-3CDFA0270DCF@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <a206fb7e0809171324g6320551cp4c4a7613314afc01@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Background merge hit exception
Date: Thu, 18 Sep 2008 10:19:55 -0400
References: <a206fb7e0809171324g6320551cp4c4a7613314afc01@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

Lucene tries to carry forward the root cause exception from the merge,
into that IOException that optimize throws.  But it doesn't always
succeed in doing so; I'll open a Jira issue and try to figure out why
this is the case.

All the exception "means" is that the optimize didn't finish -- you
still have multiple segments in the index.  The index should still be
fine (not corrupt, nothing lost).

What's happening is a BG merge thread is hitting an unhandled
exception.  The JRE will log such unhandled exceptions to System.err
by default, so, you should scour the app server's logs to find it (it
should be there).

BTW, that merge that's being attempted is particularly inefficient --
you are merging an immense segment (the first one) with a bunch of
tiny ones.  A partial optimize could be much better.

Things to try w/o code changes:

   * Use a separate tool, eg Luke, to run optimize and see what
     root exception is thrown.

Things to try with code changes:

   * Switch to SerialMergeScheduler -- it should still throw the
     exception, but you'll see the full root cause.

   * As of 2.4 (coming soon), subclass ConcurrentMergeScheduler and
     override the handleMergeException to do your own logging so you
     that you see the detailed root-cause exception.

   * Alternatively, before Lucene 2.4, if you are running in JRE 1.5+
     environment, you can set the default exception handler for
     threads to do your own logging:

       http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Thread.html#setDefaultUncaughtExceptionHandler(java.lang.Thread.UncaughtExceptionHandler)

Mike

On Sep 17, 2008, at 4:24 PM, vivek sar wrote:

> Hi,
>
> We have been running Lucene 2.3 for last few months with our
> application and all the sudden we have hit the following exception,
>
>       java.lang.RuntimeException: java.io.IOException: background
> merge hit exception: _2uxy:c11345949 _2uxz:c150 _2uy0:c150 _2uy1:c150
> _2uy2:c150 _2uy3:c150 _2uy4:c82 into _2uy5 [optimize]
>
> I don't see any other error messages (or stacktrace) around this
> exception message. This problem doesn't seem to be recoverable and the
> indexer process is failing even after the reboot of the machine.
>
> I've gone through the mailing list over this issue and saw few  
> suggestions,
>
> 1) Make sure you've enough disk space (x2 the index size)  - our
> index size is around 5 GB and we have around 50GB space available so
> this shouldn't be the case
> 2) Is your machine multi-core - yes, this application is running on
> Linux box with 8 CPUs, not sure if this is the problem
>
> I can't update the code as this is running on the customer site. Here
> are my questions,
>
>   a) Is there any workaround to this problem without updating the  
> code base?
>   b) Is there a jira opened on this issue?
>   c) Has this been fixed in the subsequent Lucene releases?
>
> Thanks,
> -vivek
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 18 15:29:23 2008
Return-Path: <java-user-return-36256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78531 invoked from network); 18 Sep 2008 15:29:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2008 15:29:23 -0000
Received: (qmail 72176 invoked by uid 500); 18 Sep 2008 15:29:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72139 invoked by uid 500); 18 Sep 2008 15:29:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72128 invoked by uid 99); 18 Sep 2008 15:29:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Sep 2008 08:29:12 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dckorah@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Sep 2008 15:28:12 +0000
Received: by ug-out-1314.google.com with SMTP id j3so913744ugf.23
        for <java-user@lucene.apache.org>; Thu, 18 Sep 2008 08:28:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:subject:date
         :mime-version:content-type:x-mailer:thread-index:x-mimeole
         :message-id;
        bh=UKP9h5Z7gdB85uyd5O6RCmlPlYp4U7I/7SMztEcuG68=;
        b=O2ThXsqWUn0f8qoHfjJj6aoHM1KXmsJWGEhQ7pez734Zl3uuC+yO5vXUukLTuhtmMg
         6S8Q6YwYmu3nSko32p08z5+O+mm7L2cl8M+pr4tqR0yo0oWBcBS6MR8VOXUdGLMWaibx
         ojEtzMD0KERvECjLaEeXUFOmC9wQYK7M5txh4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:subject:date:mime-version:content-type:x-mailer
         :thread-index:x-mimeole:message-id;
        b=pLRLte3K35pD5ypXT4wXLDPUg2t2kpKhbBloQ9Irt5C+btexNBfsrJLqw/uKIAx26/
         xdj2oUSLNLk6RSFUjvFWyBDJkOHMLLfoshKgNk5kOHp0hv1/Q8gPKkQ4rovBAFzTWtuh
         3Q9vKtT9t6BWVQrRMp1LdUgrTXBlwc3qto9Mc=
Received: by 10.210.130.14 with SMTP id c14mr3194747ebd.158.1221751713771;
        Thu, 18 Sep 2008 08:28:33 -0700 (PDT)
Received: from SCWDEVDINOKVM ( [195.2.245.68])
        by mx.google.com with ESMTPS id k7sm16681201nfh.17.2008.09.18.08.28.31
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 18 Sep 2008 08:28:32 -0700 (PDT)
From: "Dino Korah" <dckorah@gmail.com>
To: <java-user@lucene.apache.org>
Subject: Search all Related Documents
Date: Thu, 18 Sep 2008 16:27:57 +0100
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_007F_01C919AB.85604270"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: AckZoyCfoJ1nqX/XTiGGQjmVjn7rlA==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3350
Message-ID: <48d273a0.07ed300a.71f0.6cd2@mx.google.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_007F_01C919AB.85604270
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

Hi All,
 
Scenario: I have 100 documents in an index and if these documents fall into
10 mutualy exclusive set; And within that set one of them is the main
document.
Now if I am to search on the index and group the result on 10 mutually
exclusive sets. And if I have to display the result with fields displayed
from the main document, How do I do that with minimal overhead.
 
Realworld Scenario: take the example of Inbox of emails with attachments. If
those attachments and the email itself are indexed with a common mail-id
field which is common for the attachments and the mail-body from the same
mail message; Search results would be better displayed as email's subject
and body extract so that user can identify them easily.
 
Many thanks
 
Dino
 
 
 
 

------=_NextPart_000_007F_01C919AB.85604270--


From java-user-return-36257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 18 15:36:08 2008
Return-Path: <java-user-return-36257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84403 invoked from network); 18 Sep 2008 15:36:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2008 15:36:08 -0000
Received: (qmail 1862 invoked by uid 500); 18 Sep 2008 15:35:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1814 invoked by uid 500); 18 Sep 2008 15:35:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1791 invoked by uid 99); 18 Sep 2008 15:35:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Sep 2008 08:35:57 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Sep 2008 15:34:57 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KgLXV-00023N-P4
	for java-user@lucene.apache.org; Thu, 18 Sep 2008 08:35:29 -0700
Message-ID: <19555644.post@talk.nabble.com>
Date: Thu, 18 Sep 2008 08:35:29 -0700 (PDT)
From: Konstantyn Smirnov <injecteer@yahoo.com>
To: java-user@lucene.apache.org
Subject: RE: WildCardQuery and TooManyClauses
In-Reply-To: <CC2671C08F06704ABFD37ED1EA09AA564A2A6F@birexchange.BIRPLAZA.local>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: injecteer@yahoo.com
References: <b8eccf4d0804100553v4c0d8809nd961028ea0d21a79@mail.gmail.com> <CC2671C08F06704ABFD37ED1EA09AA564A2A6F@birexchange.BIRPLAZA.local>
X-Virus-Checked: Checked by ClamAV on apache.org




Beard, Brian wrote:
> 
> 1) Extend QueryParser to override the getWildcardQuery method.
> 

Kinda late :), but I still have another question:

Who calls that getWildcardQuery() method? 

I subclassed the QueryParser, but that method does never get invoked, even
if the query contains *.

Shall I override some other methods? Or shall I call the method directly?

Thanx
-- 
View this message in context: http://www.nabble.com/WildCardQuery-and-TooManyClauses-tp16610177p19555644.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 18 15:45:57 2008
Return-Path: <java-user-return-36258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90908 invoked from network); 18 Sep 2008 15:45:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2008 15:45:57 -0000
Received: (qmail 25101 invoked by uid 500); 18 Sep 2008 15:45:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25065 invoked by uid 500); 18 Sep 2008 15:45:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25054 invoked by uid 99); 18 Sep 2008 15:45:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Sep 2008 08:45:46 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.92.27] (HELO qw-out-2122.google.com) (74.125.92.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Sep 2008 15:44:45 +0000
Received: by qw-out-2122.google.com with SMTP id 5so340570qwi.53
        for <java-user@lucene.apache.org>; Thu, 18 Sep 2008 08:45:06 -0700 (PDT)
Received: by 10.214.9.8 with SMTP id 8mr4074146qai.51.1221752706628;
        Thu, 18 Sep 2008 08:45:06 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id 6sm14560407qwd.4.2008.09.18.08.45.05
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 18 Sep 2008 08:45:05 -0700 (PDT)
Message-Id: <DC9A3A44-0A50-4496-A399-F66143500324@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <19555644.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: WildCardQuery and TooManyClauses
Date: Thu, 18 Sep 2008 11:45:04 -0400
References: <b8eccf4d0804100553v4c0d8809nd961028ea0d21a79@mail.gmail.com> <CC2671C08F06704ABFD37ED1EA09AA564A2A6F@birexchange.BIRPLAZA.local> <19555644.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


It's only with the trunk version of Lucene that QueryParser calls  
getWildcardQuery on parsing a wildcard string from the user's query.

Mike

Konstantyn Smirnov wrote:

>
>
>
> Beard, Brian wrote:
>>
>> 1) Extend QueryParser to override the getWildcardQuery method.
>>
>
> Kinda late :), but I still have another question:
>
> Who calls that getWildcardQuery() method?
>
> I subclassed the QueryParser, but that method does never get  
> invoked, even
> if the query contains *.
>
> Shall I override some other methods? Or shall I call the method  
> directly?
>
> Thanx
> -- 
> View this message in context: http://www.nabble.com/WildCardQuery-and-TooManyClauses-tp16610177p19555644.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 18 16:09:53 2008
Return-Path: <java-user-return-36259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9823 invoked from network); 18 Sep 2008 16:09:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2008 16:09:53 -0000
Received: (qmail 85175 invoked by uid 500); 18 Sep 2008 16:09:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85144 invoked by uid 500); 18 Sep 2008 16:09:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85133 invoked by uid 99); 18 Sep 2008 16:09:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Sep 2008 09:09:42 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Sep 2008 16:08:40 +0000
Received: by gxk6 with SMTP id 6so22122817gxk.5
        for <java-user@lucene.apache.org>; Thu, 18 Sep 2008 09:08:11 -0700 (PDT)
Received: by 10.100.247.14 with SMTP id u14mr5563792anh.73.1221754091589;
        Thu, 18 Sep 2008 09:08:11 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id c20sm9247257ana.21.2008.09.18.09.08.09
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 18 Sep 2008 09:08:10 -0700 (PDT)
Message-Id: <FC6E6114-8699-4FB0-B5C2-E5C28B9633B5@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <19535854.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: IndexReader.isCurrent()
Date: Thu, 18 Sep 2008 12:08:08 -0400
References: <19523435.post@talk.nabble.com> <E3D3D9FC-E808-49E8-9446-98947CE731D0@mikemccandless.com> <19535854.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


IndexReader.isCurrent() goes and opens that most recent segments_N  
file from the index and then compares that version to its own.  So if  
your replication brought over a new segments_N then isCurrent would  
return false.

Mike

rahul_k123 wrote:

>
> I am doing replication and i am running scripts to sync the index b/ 
> w master
> and slave.
>
>
>
> Michael McCandless-2 wrote:
>>
>>
>> rahul_k123 wrote:
>>
>>> what is the behaviour of IndexReader.current() if i modify the index
>>> manually? Will it returns false?
>>
>> What do you mean by "manually"?
>>
>> Once an IndexWriter commits a change to the index after the
>> IndexReader was opened, then IndexReader.isCurrent() will return  
>> false.
>>
>>> One more question
>>>
>>> The index is on Linux
>>>
>>> if my indexReader is open and some of the files in index are
>>> deleted, what
>>> is the behaviour of this?
>>>
>>> Will it give any exception like File Not found??
>>
>> Assuming it's a local filesystem on Linux (eg, not NFS) then if
>> IndexReader has the file open and you delete it from the filesystem,
>> that IndexReader is unaffected.
>>
>> But, you should not delete files yourself -- IndexWriter does that  
>> for
>> you at the right times.
>>
>> Mike
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/IndexReader.isCurrent%28%29-tp19523435p19535854.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 18 17:31:49 2008
Return-Path: <java-user-return-36260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62606 invoked from network); 18 Sep 2008 17:31:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2008 17:31:49 -0000
Received: (qmail 52376 invoked by uid 500); 18 Sep 2008 17:31:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52345 invoked by uid 500); 18 Sep 2008 17:31:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52334 invoked by uid 99); 18 Sep 2008 17:31:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Sep 2008 10:31:37 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Sep 2008 17:30:38 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KgNLS-0006wl-5p
	for java-user@lucene.apache.org; Thu, 18 Sep 2008 10:31:10 -0700
Message-ID: <19557943.post@talk.nabble.com>
Date: Thu, 18 Sep 2008 10:31:10 -0700 (PDT)
From: Konstantyn Smirnov <injecteer@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: WildCardQuery and TooManyClauses
In-Reply-To: <DC9A3A44-0A50-4496-A399-F66143500324@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: injecteer@yahoo.com
References: <b8eccf4d0804100553v4c0d8809nd961028ea0d21a79@mail.gmail.com> <CC2671C08F06704ABFD37ED1EA09AA564A2A6F@birexchange.BIRPLAZA.local> <19555644.post@talk.nabble.com> <DC9A3A44-0A50-4496-A399-F66143500324@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org




Michael McCandless-2 wrote:
> 
> 
> It's only with the trunk version of Lucene that QueryParser calls  
> getWildcardQuery on parsing a wildcard string from the user's query.
> 
I see..

So, how can I plug the WildcardFilter in, to prevent TooManyClauses? Are
there other ways, than using the trunk? 
-- 
View this message in context: http://www.nabble.com/WildCardQuery-and-TooManyClauses-tp16610177p19557943.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 18 18:29:56 2008
Return-Path: <java-user-return-36261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7943 invoked from network); 18 Sep 2008 18:29:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2008 18:29:56 -0000
Received: (qmail 89796 invoked by uid 500); 18 Sep 2008 18:29:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89755 invoked by uid 500); 18 Sep 2008 18:29:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89744 invoked by uid 99); 18 Sep 2008 18:29:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Sep 2008 11:29:45 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.92.24] (HELO qw-out-2122.google.com) (74.125.92.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Sep 2008 18:28:46 +0000
Received: by qw-out-2122.google.com with SMTP id 5so4168qwi.53
        for <java-user@lucene.apache.org>; Thu, 18 Sep 2008 11:29:18 -0700 (PDT)
Received: by 10.214.10.4 with SMTP id 4mr4363083qaj.60.1221762558030;
        Thu, 18 Sep 2008 11:29:18 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id 6sm14878132qwd.4.2008.09.18.11.29.16
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 18 Sep 2008 11:29:17 -0700 (PDT)
Message-Id: <B69CD585-98CE-420C-8C0A-DC017A491962@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org,
 java-dev@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: 2.4 release candidate 1
Date: Thu, 18 Sep 2008 14:29:15 -0400
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I just created the first release candidate for 2.4, here:

   http://people.apache.org/~mikemccand/staging-area/lucene2.4rc1

Please download the release candidate, kick the tires and report back
on any issues you encounter.

The plan is to make only serious bug fixes or build/doc fixes, to
2.4 for ~10 days, after which if there are no blockers I'll call a
vote for the actual release.

Happy testing, and thanks!

Mike


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 18 19:22:15 2008
Return-Path: <java-user-return-36262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49207 invoked from network); 18 Sep 2008 19:22:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2008 19:22:13 -0000
Received: (qmail 75386 invoked by uid 500); 18 Sep 2008 19:22:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75348 invoked by uid 500); 18 Sep 2008 19:22:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75337 invoked by uid 99); 18 Sep 2008 19:22:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Sep 2008 12:22:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [80.64.182.137] (HELO mslinux.101tec.com) (80.64.182.137)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Sep 2008 19:21:01 +0000
Received: from localhost (localhost [127.0.0.1])
	by mslinux.101tec.com (Postfix) with ESMTP id 999FD274026
	for <java-user@lucene.apache.org>; Thu, 18 Sep 2008 21:21:03 +0200 (CEST)
X-Virus-Scanned: by amavisd-new-2.4.2 (20060627) at 101tec.com
Received: from [10.32.40.249] (CarrierIQ-FWA002-untru.sjz.navisite.com [216.243.71.77])
	by mslinux.101tec.com (Postfix) with ESMTP id C5E0B27400A
	for <java-user@lucene.apache.org>; Thu, 18 Sep 2008 21:20:50 +0200 (CEST)
Message-Id: <DE2C0C9E-DF61-4ADC-ADB1-B3C2D1E42A91@101tec.com>
From: Stefan Groschupf <sg@101tec.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v928.1)
Subject: [ANN] katta-0.1.0 release - distribute lucene indexes in a grid
Date: Thu, 18 Sep 2008 12:20:45 -0700
X-Mailer: Apple Mail (2.928.1)
X-Virus-Checked: Checked by ClamAV on apache.org

After 5 month work we are happy to announce the first developer  
preview release of katta.
This release contains all functionality to serve a large, sharded  
lucene index on many servers.
Katta is standing on the shoulders of the giants lucene, hadoop and  
zookeeper.

Main features:
+ Plays well with Hadoop
+ Apache Version 2 License.
+ Node failure tolerance
+ Master failover
+ Shard replication
+ Plug-able network topologies (Shard - Distribution and Selection  
Polices)
+ Node load balancing at client



Please give katta a test drive and give us some feedback!

Download:
http://sourceforge.net/project/platformdownload.php?group_id=225750

website:
http://katta.sourceforge.net/

Getting started in less than 3 min:
http://katta.wiki.sourceforge.net/Getting+started

Installation on a grid:
http://katta.wiki.sourceforge.net/Installation

Katta presentation today (09/17/08) at hadoop user, yahoo mission  
college:
http://upcoming.yahoo.com/event/1075456/
* slides will be available online later


Many thanks for the hard work:
Johannes Zillmann, Marko Bauhardt, Martin Schaaf (101tec)


Yours, the Katta Team.

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
101tec Inc., Menlo Park, California
http://www.101tec.com




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 18 21:10:15 2008
Return-Path: <java-user-return-36263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26426 invoked from network); 18 Sep 2008 21:10:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2008 21:10:15 -0000
Received: (qmail 70767 invoked by uid 500); 18 Sep 2008 21:10:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70742 invoked by uid 500); 18 Sep 2008 21:10:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70731 invoked by uid 99); 18 Sep 2008 21:10:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Sep 2008 14:10:04 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.61] (HELO web50307.mail.re2.yahoo.com) (206.190.38.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 18 Sep 2008 21:09:03 +0000
Received: (qmail 75241 invoked by uid 60001); 18 Sep 2008 21:09:35 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=fvWW8gsliGI9EAm3HZ48nGLmJ6OiH7ev6qNaQvBoxEIC6mNoklhgBOJ4MPBRIw0DnKZfmpk+E2KppuYigRjxOYp+zWCUCA0q0dREH/r+ir4DzZ+JIPzmvEQfZLqqKU71ttOiN1q0B1c8AQbuqwp191nPywSM20ziX9WdUTgHdtc=;
X-YMail-OSG: WN.Md1wVM1mtnyY.G3MMrWg3wRZ9fNi7V5SpMjV_RHiGNs2fXvmBTGZrc.qYbcX_4KDCEFLkT8jAJ4iptpVC.UHZnr1ElTXrjmr_NcecQXauSUoJKvd3Y85kLh6MZcbE10Q_9ygufnJDvpxb66tGiB03GBF4rGjHxJI269SEAYgd6Nn4tdeFpg--
Received: from [167.206.188.3] by web50307.mail.re2.yahoo.com via HTTP; Thu, 18 Sep 2008 14:09:35 PDT
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Thu, 18 Sep 2008 14:09:35 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Case studies for Lucene in Action 2nd edition
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <437532.73611.qm@web50307.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I wanted to wait until now to follow-up to this, in order to give people who were on vacation in August a chance to see this.
We've received several emails with case-study offers -- thank you!
We are still welcoming contribution ideas, of course.


Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, August 12, 2008 3:37:00 PM
> Subject: Case studies for Lucene in Action 2nd edition
> 
> Hello,
> 
> We are working on Lucene in Action 2nd edition.  One of the well received 
> chapters from LIA #1 was the Case Studies chapter.  Case studies in this chapter 
> are from external LIA contributors who were willing to share information about 
> how they use Lucene.
> 
> We want to refresh this chapter for LIA #2.  It's time for some new case 
> studies.  If you are using Lucene in some clever or unusual way and are willing 
> to share this information, please get in touch.  Feel free to respond on the 
> list or reply to me directly.
> 
> Thanks!
> 
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 18 22:38:17 2008
Return-Path: <java-user-return-36264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79357 invoked from network); 18 Sep 2008 22:38:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2008 22:38:17 -0000
Received: (qmail 95195 invoked by uid 500); 18 Sep 2008 22:38:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95162 invoked by uid 500); 18 Sep 2008 22:38:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95151 invoked by uid 99); 18 Sep 2008 22:38:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Sep 2008 15:38:05 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.86.156] (HELO n8.bullet.mail.mud.yahoo.com) (209.191.86.156)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 18 Sep 2008 22:37:04 +0000
Received: from [68.142.200.224] by n8.bullet.mail.mud.yahoo.com with NNFMP; 18 Sep 2008 22:35:16 -0000
Received: from [68.142.201.249] by t5.bullet.mud.yahoo.com with NNFMP; 18 Sep 2008 22:35:16 -0000
Received: from [127.0.0.1] by omp410.mail.mud.yahoo.com with NNFMP; 18 Sep 2008 22:35:16 -0000
X-Yahoo-Newman-Id: 541927.11006.bm@omp410.mail.mud.yahoo.com
Received: (qmail 67247 invoked from network); 18 Sep 2008 22:35:16 -0000
Received: from unknown (HELO ?192.168.1.100?) (nhira@75.168.29.95 with plain)
  by smtp119.plus.mail.mud.yahoo.com with SMTP; 18 Sep 2008 22:35:16 -0000
X-YMail-OSG: HOmVuFUVM1nDNU1QvKwp63xDXAX7Eiqv8gE4Jboh29wfKCgxN9xOf5SD.Whj7tz_HdCwU3bxj5Ia9vux4qtsSLU5DzM8CN7ZACibx7bSb0meg_bkFrYridOa89R0fVLSrm3TZ2vc6h7mEcFwvhitEno9Xd1PQM99Y2Sfnl2K._UiRw9.9A29MyA-
X-Yahoo-Newman-Property: ymail-3
Mime-Version: 1.0 (Apple Message framework v753.1)
In-Reply-To: <48d273a0.07ed300a.71f0.6cd2@mx.google.com>
References: <48d273a0.07ed300a.71f0.6cd2@mx.google.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9BA01843-1B44-4C8A-835C-CAC1B5AE0AF9@cognocys.com>
Content-Transfer-Encoding: 7bit
From: "N. Hira" <nhira@cognocys.com>
Subject: Re: Search all Related Documents
Date: Thu, 18 Sep 2008 17:35:14 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753.1)
X-Virus-Checked: Checked by ClamAV on apache.org

You can search the lucene and solr mailing lists for "denormalize"  
but the general response is to try one of:

1. de-normalize the data while indexing
	- advantage: one query
	- disadvantage:  data repetition

2.  use 2 indices
	- advantage:  no need for repetition; this is necessary anyway if  
each query execution requires two-parts
	- disadvantage:  more work for the app., more resources, etc.

3.  if feasible, consider using Boolean query with filters
	http://wiki.apache.org/lucene-java/LuceneFAQ#head- 
f70612c6e4670e7fa2d5aeef4710effc522d85e0

4.  if the requirement is better suited to a combination lucene-for- 
text and RDBMS-for-query solution, then go that way

You can


Good luck!

-h
----------------------------------------------------------------------
Hira, N.R.
Cognocys, Inc.

Catch up on the news.  http://www.cognocys.com/prospector/news.html


On 18-Sep-2008, at 10:27 AM, Dino Korah wrote:

> Hi All,
>
> Scenario: I have 100 documents in an index and if these documents  
> fall into
> 10 mutualy exclusive set; And within that set one of them is the main
> document.
> Now if I am to search on the index and group the result on 10 mutually
> exclusive sets. And if I have to display the result with fields  
> displayed
> from the main document, How do I do that with minimal overhead.
>
> Realworld Scenario: take the example of Inbox of emails with  
> attachments. If
> those attachments and the email itself are indexed with a common  
> mail-id
> field which is common for the attachments and the mail-body from  
> the same
> mail message; Search results would be better displayed as email's  
> subject
> and body extract so that user can identify them easily.
>
> Many thanks
>
> Dino
>
>
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 18 23:13:55 2008
Return-Path: <java-user-return-36265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5061 invoked from network); 18 Sep 2008 23:13:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2008 23:13:55 -0000
Received: (qmail 39389 invoked by uid 500); 18 Sep 2008 23:13:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39364 invoked by uid 500); 18 Sep 2008 23:13:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39353 invoked by uid 99); 18 Sep 2008 23:13:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Sep 2008 16:13:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vivextra@gmail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Sep 2008 23:12:46 +0000
Received: by fg-out-1718.google.com with SMTP id l27so384813fgb.27
        for <java-user@lucene.apache.org>; Thu, 18 Sep 2008 16:13:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=lUjLbuoiF1nNB63jqZLUvA2FjSJm608/IaP3LFzqcSI=;
        b=jUf2udp5rStFqoCR+tDEnRzhdG0C9CQgEr/LfOr/WPcWhPYn4zxNLzQJ3q7dvTa5A7
         F3pA3gj0r1bv2nbvd6Yqq8ssJX21HGrwJlANd6VLHiHmr1B6gvTu7FhhXWVDiN7pukhl
         NMmyNOYoecyGl7UKJpXo/YANrDK6fBDzLKm2Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=LDK3oB7WMHuf0sq8uvhh2il5nqthsua8LEa9ASNE1iAUGPE/v21GNv3+w3djyt9i7L
         PzO2XuBCpCsh6lCPoihCANLaLDSz82836WWYRCsO//RHCemFhXhTcQAUncqxg/63ALI3
         tff1wveCvPLnztisMyXGqo/LXD+Eu5pD25zkY=
Received: by 10.86.66.11 with SMTP id o11mr1314203fga.69.1221779598309;
        Thu, 18 Sep 2008 16:13:18 -0700 (PDT)
Received: by 10.86.81.18 with HTTP; Thu, 18 Sep 2008 16:13:18 -0700 (PDT)
Message-ID: <a206fb7e0809181613g68d882b4h2308f219ec0b5873@mail.gmail.com>
Date: Thu, 18 Sep 2008 16:13:18 -0700
From: "vivek sar" <vivextra@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Background merge hit exception
In-Reply-To: <631B98C8-69CE-40DC-AA17-3CDFA0270DCF@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <a206fb7e0809171324g6320551cp4c4a7613314afc01@mail.gmail.com>
	 <631B98C8-69CE-40DC-AA17-3CDFA0270DCF@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Mike for the insight. I did check the stdout log and found it
was complaining of not having enough disk space. I thought we need
only x2 of the index size. Our index size is 10G (max) and we had 45G
left on that parition - should it still complain of the space?


Some comments/questions on other issues you raised,


We have 2 threads that index the data in two different indexes and
then we merge them into a master index with following call,

    masterWriter.addIndexesNoOptimize(indices);

Once the smaller indices have merged into the master index we delete
the smaller indices.

This process runs every 5 minutes. Master Index can grow up to 10G
before we partition it - move it to other directory and start a new
master index.

Every hour we then optimize the master index using,

       writer.optimize(optimizeSegment);    //where optimizeSegment = 10

Here are my questions,

1) Is this process flawed in terms of performance and efficiency? What
would you recommend?
2) When you say "partial optimize" what do you mean by that?
3) In Lucene 2.3 "segment merging is done in a background thread" -
how does it work, ie, how does it know which segments to merge? What
would cause this background merge exception?
4) Can we turn off "background merge" if I'm running the optimize
every hour in any case? How do we turn it off?

Thanks,
-vivek



On Thu, Sep 18, 2008 at 7:19 AM, Michael McCandless
<lucene@mikemccandless.com> wrote:
> Lucene tries to carry forward the root cause exception from the merge,
> into that IOException that optimize throws.  But it doesn't always
> succeed in doing so; I'll open a Jira issue and try to figure out why
> this is the case.
>
> All the exception "means" is that the optimize didn't finish -- you
> still have multiple segments in the index.  The index should still be
> fine (not corrupt, nothing lost).
>
> What's happening is a BG merge thread is hitting an unhandled
> exception.  The JRE will log such unhandled exceptions to System.err
> by default, so, you should scour the app server's logs to find it (it
> should be there).
>
> BTW, that merge that's being attempted is particularly inefficient --
> you are merging an immense segment (the first one) with a bunch of
> tiny ones.  A partial optimize could be much better.
>
> Things to try w/o code changes:
>
>  * Use a separate tool, eg Luke, to run optimize and see what
>    root exception is thrown.
>
> Things to try with code changes:
>
>  * Switch to SerialMergeScheduler -- it should still throw the
>    exception, but you'll see the full root cause.
>
>  * As of 2.4 (coming soon), subclass ConcurrentMergeScheduler and
>    override the handleMergeException to do your own logging so you
>    that you see the detailed root-cause exception.
>
>  * Alternatively, before Lucene 2.4, if you are running in JRE 1.5+
>    environment, you can set the default exception handler for
>    threads to do your own logging:
>
>
>  http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Thread.html#setDefaultUncaughtExceptionHandler(java.lang.Thread.UncaughtExceptionHandler)
>
> Mike
>
> On Sep 17, 2008, at 4:24 PM, vivek sar wrote:
>
>> Hi,
>>
>> We have been running Lucene 2.3 for last few months with our
>> application and all the sudden we have hit the following exception,
>>
>>      java.lang.RuntimeException: java.io.IOException: background
>> merge hit exception: _2uxy:c11345949 _2uxz:c150 _2uy0:c150 _2uy1:c150
>> _2uy2:c150 _2uy3:c150 _2uy4:c82 into _2uy5 [optimize]
>>
>> I don't see any other error messages (or stacktrace) around this
>> exception message. This problem doesn't seem to be recoverable and the
>> indexer process is failing even after the reboot of the machine.
>>
>> I've gone through the mailing list over this issue and saw few
>> suggestions,
>>
>> 1) Make sure you've enough disk space (x2 the index size)  - our
>> index size is around 5 GB and we have around 50GB space available so
>> this shouldn't be the case
>> 2) Is your machine multi-core - yes, this application is running on
>> Linux box with 8 CPUs, not sure if this is the problem
>>
>> I can't update the code as this is running on the customer site. Here
>> are my questions,
>>
>>  a) Is there any workaround to this problem without updating the code
>> base?
>>  b) Is there a jira opened on this issue?
>>  c) Has this been fixed in the subsequent Lucene releases?
>>
>> Thanks,
>> -vivek
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 19 00:47:59 2008
Return-Path: <java-user-return-36266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89175 invoked from network); 19 Sep 2008 00:47:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2008 00:47:59 -0000
Received: (qmail 33441 invoked by uid 500); 19 Sep 2008 00:47:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33406 invoked by uid 500); 19 Sep 2008 00:47:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33392 invoked by uid 99); 19 Sep 2008 00:47:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Sep 2008 17:47:48 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of abdo1234@msn.com designates 65.55.111.110 as permitted sender)
Received: from [65.55.111.110] (HELO blu0-omc2-s35.blu0.hotmail.com) (65.55.111.110)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 00:46:46 +0000
Received: from BLU114-W18 ([65.55.111.73]) by blu0-omc2-s35.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 18 Sep 2008 17:47:19 -0700
Message-ID: <BLU114-W1834380375D5222990ACE1C94E0@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_9d8237bd-7650-4789-aaf0-5bf85a64c92c_"
X-Originating-IP: [41.234.22.11]
From: Abdulrahman Galal <abdo1234@msn.com>
To: <java-user@lucene.apache.org>
Subject: RE: Search all Related Documents
Date: Fri, 19 Sep 2008 00:47:19 +0000
Importance: Normal
In-Reply-To: <9BA01843-1B44-4C8A-835C-CAC1B5AE0AF9@cognocys.com>
References: <48d273a0.07ed300a.71f0.6cd2@mx.google.com>
 <9BA01843-1B44-4C8A-835C-CAC1B5AE0AF9@cognocys.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 19 Sep 2008 00:47:19.0141 (UTC) FILETIME=[44F3C950:01C919F1]
X-Virus-Checked: Checked by ClamAV on apache.org

--_9d8237bd-7650-4789-aaf0-5bf85a64c92c_
Content-Type: text/plain; charset="windows-1256"
Content-Transfer-Encoding: 8bit

please anyone help me and tell me how to unsubscribe from this mailing list

> From: nhira@cognocys.com> Subject: Re: Search all Related Documents> Date: Thu, 18 Sep 2008 17:35:14 -0500> To: java-user@lucene.apache.org> > You can search the lucene and solr mailing lists for "denormalize" > but the general response is to try one of:> > 1. de-normalize the data while indexing> - advantage: one query> - disadvantage: data repetition> > 2. use 2 indices> - advantage: no need for repetition; this is necessary anyway if > each query execution requires two-parts> - disadvantage: more work for the app., more resources, etc.> > 3. if feasible, consider using Boolean query with filters> http://wiki.apache.org/lucene-java/LuceneFAQ#head- > f70612c6e4670e7fa2d5aeef4710effc522d85e0> > 4. if the requirement is better suited to a combination lucene-for- > text and RDBMS-for-query solution, then go that way> > You can> > > Good luck!> > -h> ----------------------------------------------------------------------> Hira, N.R.> Cognocys, Inc.> > Catch up on the news. http
 ://www.cognocys.com/prospector/news.html> > > On 18-Sep-2008, at 10:27 AM, Dino Korah wrote:> > > Hi All,> >> > Scenario: I have 100 documents in an index and if these documents > > fall into> > 10 mutualy exclusive set; And within that set one of them is the main> > document.> > Now if I am to search on the index and group the result on 10 mutually> > exclusive sets. And if I have to display the result with fields > > displayed> > from the main document, How do I do that with minimal overhead.> >> > Realworld Scenario: take the example of Inbox of emails with > > attachments. If> > those attachments and the email itself are indexed with a common > > mail-id> > field which is common for the attachments and the mail-body from > > the same> > mail message; Search results would be better displayed as email's > > subject> > and body extract so that user can identify them easily.> >> > Many thanks> >> > Dino> >> >> >> >> > > > -----------------------------------------------------
 ----------------> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org> For additional commands, e-mail: java-user-help@lucene.apache.org> 
--_9d8237bd-7650-4789-aaf0-5bf85a64c92c_--

From java-user-return-36267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 19 00:54:03 2008
Return-Path: <java-user-return-36267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93988 invoked from network); 19 Sep 2008 00:54:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2008 00:54:03 -0000
Received: (qmail 36943 invoked by uid 500); 19 Sep 2008 00:53:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36914 invoked by uid 500); 19 Sep 2008 00:53:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36902 invoked by uid 99); 19 Sep 2008 00:53:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Sep 2008 17:53:48 -0700
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WEIRD_PORT,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yeshuangming@gmail.com designates 74.125.44.30 as permitted sender)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 00:52:46 +0000
Received: by yx-out-2324.google.com with SMTP id 3so37551yxj.5
        for <java-user@lucene.apache.org>; Thu, 18 Sep 2008 17:53:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=yqwWn5P0sjAHuvb9LHcAqViMBd6MKx6pIMkf9jDu2fU=;
        b=EL2Whvv/leHBqvWgILtakgn2xomCKX7yREmTmuWUS9RlPPa7otMyNYB/LPuyjB5OgP
         RKVwpdfoBoOvME3p3rgf3ZOhqeuG/CO78wpVIzE5jJXZefgPLn/IaWqbm633gnXiU0B9
         zbx/hqM88cbK3hAQ6To0JArFw8sjdEKJj9lAc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Kn/uDtAtVlsWSYkRYa3wJ83RS/s590OfiOUvh1nT3iq3jl32wta5AMesPCV7VAanxV
         su1KV21rREqfXPJGsaJLdhTM1hVhZoB7ZbHY70tp6wQQWO4k6LrictEkIGVQnK1RHucw
         7Ut083+5/MeZNdh3BRgE+8Sk4oDXctbferinI=
Received: by 10.150.220.19 with SMTP id s19mr2224189ybg.182.1221785598185;
        Thu, 18 Sep 2008 17:53:18 -0700 (PDT)
Received: by 10.151.100.9 with HTTP; Thu, 18 Sep 2008 17:53:18 -0700 (PDT)
Message-ID: <9233ccac0809181753l7b9f0f92u55e6fc8cba0913af@mail.gmail.com>
Date: Fri, 19 Sep 2008 08:53:18 +0800
From: "=?UTF-8?B?5Y+25Y+M5piO?=" <yeshuangming@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene search fails for japanese characters in URL
In-Reply-To: <19549854.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20647_1585740.1221785598162"
References: <19533647.post@talk.nabble.com>
	 <D8E6BD3AD2634843B58AFF6A94FE246202D7AEB6F5@msgint02.mogul.com>
	 <19534342.post@talk.nabble.com>
	 <9233ccac0809171743x5b1746a1k8fe07f5fde6153a0@mail.gmail.com>
	 <19547081.post@talk.nabble.com>
	 <9233ccac0809180036r8ccc5cajcc997193de20401e@mail.gmail.com>
	 <19549854.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_20647_1585740.1221785598162
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

SSBzdGlsbCBzdWdnZXN0IHlvdSB0byBzZXR1cCBhbmQgdGVzdCBhIHN0YW5kYWxvbmUgSW5kZXhT
ZWFyY2hlciB0aG91Z2ggeW91CmJlbGlldmUgaXQgc2hvdWxkIHdvcmsuCklmIGl0IHdvcmssIGFu
ZCB0b21jYXQgZ2V0IHRoZSByaWdodCBwYXJhbWV0ZXIsIHNvcnJ5LCBpIGRvbid0IGtub3cgd2hh
dCBpcwp0aGUgcHJvYmxlbS4KCjIwMDgvOS8xOCBhbmFuZHNhcndhZGUgPGFuYW5kLnNhcndhZGVA
Y29ycC5hb2wuY29tPgoKPgo+IFRoaXMgTHVrZSB0b29sIHNlZW1zIHRvIGJlIHByZXR0eSBjb29s
LiBJIGhhdmUgaW5zdGFsbGVkIGFuZCBpdHMgdmVyeSBlYXN5Cj4gdG8KPiBmaW5kIG91dCB0aGUg
aW5kZXhlcyBhbmQgd2hhdCBpcyBiZWluZyBzdG9yZWQuIHRoYW5rcyBmb3IgdGhpcyBpbmZvLgo+
Cj4gSSBoYXZlIHRyaWVkIGluIHRvbWNhdCBhbmQgdGhpbmdzIHdvcmtzIGZpbmUgd2l0aG91dCBp
c3N1ZXMuIERlZmF1bHQKPiBvcGVyYXRvciBpcyBPUiBpbiBteSBjYXNlLiBpIGhhdmVudCB0cmll
ZCB3aXRoIHNldHRpbmcgdXAgc3RhbmFsb25lCj4gaW5kZXhzZWFyY2hlciBidXQgaSBiZWxpZXZl
IGl0IHNob3VsZCB3b3JrLiBQbGVhc2UgbGV0IG1lIGtub3cgaWYgYW55Cj4gaXNzdWVzLgo+Cj4K
PiDlj7blj4zmmI4gd3JvdGU6Cj4gPgo+ID4gQW5kLCB5b3UgY2FuIHVzZSBUb29sIGx1a2UgdG8g
c2VlIHdoYXQgaXMgaW4gdGhlIGluZGV4IGluZGVlZC4KPiA+IHdoYXQgaXMgaW4gdGhlIFF1ZXJ5
IHdoaWNoIHB1dCBpbnRvIEluZGV4U2VhcmNoZXIuc2VhcmNoKCksIHdoYXQgaXMgdGhlCj4gPiBk
ZWZhdWx0T3BlcmF0b2VyIG9mIFF1ZXJ5UGFyc2VyLgo+ID4KPiA+IENhbiB5b3UgZ2V0IGhpdHMg
Ynkgc2V0dXAgYSBzaW1wbGUgSW5kZXhTZWFyY2hlciwgbm8gdGhyb3VnaCAgdG9tY2F0Pwo+ID4K
PiA+IDIwMDgvOS8xOCBhbmFuZHNhcndhZGUgPGFuYW5kLnNhcndhZGVAY29ycC5hb2wuY29tPgo+
ID4KPiA+Pgo+ID4+IEhpLAo+ID4+Cj4gPj4gSSBkbyBnZXQgdGhlIHNhbWUgc3RyaW5nIGZyb20g
TXlzcWwgYW5kIGFsc28gaW4gc2VydmxldCByZXF1ZXN0LiBJIGNvdWxkCj4gPj4gb2JzZXJ2ZSB0
aGUgYWN0YXVsIHN0cmluZyBpbiBlY2xpcHNlIHdoaWxlIGRlYnVnZ2luZy4gaXQgaXMgc3RvcmVk
IGFzCj4gPj4gVVRGLTgKPiA+PiBmb3JtYXQgc28gcmV0cmlldmVsIGlzIGNvbWluZyBhcyBzdG9y
ZWQuCj4gPj4KPiA+PiBwbHogbGV0IG1lIGtub3cgaWYgaWFtIG5vdCBjbGVhcgo+ID4+Cj4gPj4K
PiA+PiDlj7blj4zmmI4gd3JvdGU6Cj4gPj4gPgo+ID4+ID4gWW91IG11c3QgdHJhY2UgdGhlIHN0
cmluZyAgaW4gZWFjaCBzdGVwIQo+ID4+ID4gSW1wb3J0YW50IHN0ZXAgaXMgZ2V0IHN0cmluZyBm
cm9tIE1ZU1FMIGFuZCBnZXQgcGFyYW1ldGVyIGluIHNlcnZsZXQsCj4gPj4gPiBwbGVhc2UKPiA+
PiA+IGNoZWNrIGl0LCBkbyB5b3UgZ2V0IHRoZSByaWdodCBzdHJpbmc/Cj4gPj4gPiBDaGluZXNl
IGhhcyB0aGUgc2FtZSBwcm9ibGVtIHRvby4KPiA+PiA+Cj4gPj4gPiAyMDA4LzkvMTcgYW5hbmRz
YXJ3YWRlIDxhbmFuZC5zYXJ3YWRlQGNvcnAuYW9sLmNvbT4KPiA+PiA+Cj4gPj4gPj4KPiA+PiA+
PiBIZWxsbyBKaW1pLAo+ID4+ID4+Cj4gPj4gPj4gVGhhbmtzIGEgbG90IGZvciB5b3VyIHZhbHVh
YmxlIHN1Z2dlc3Rpb24uCj4gPj4gPj4KPiA+PiA+PiBJIGFtIHVzaW5nIHRvbWNhdCA1IC4gQXMg
cGVyIHlvdXIgc3VnZ2VzdGlvbnMgLGNoZWNrZWQgdGhlIHNlcnZlci54bWwKPiA+PiBidXQKPiA+
PiA+PiBmb3VuZCB0aGF0IG5vIFVSSUVuY29kaW5nIHdhcyBzZXQuCj4gPj4gPj4gSSBoYXZlIHNl
dCBub3cgYW5kIHRvIG15IGdyZWF0IHJlbGllZiA6LSkgaSBjb3VsZCBzZWUgdGhlIEx1Y2VuZQo+
ID4+IHJlc3VsdHMKPiA+PiA+PiBvbgo+ID4+ID4+IG15IGJyb3dzZXIgZm9yIGphcGFuZXNlIHN0
cmluZyB3aXRoIHJlcXVlc3Qgb2JqZWN0cyBpbiBVVEYtOCBub3cuCj4gPj4gPj4KPiA+PiA+PiBU
aGFua3MgYWdhaW4gZm9yIHlvdXIgaGVscC4KPiA+PiA+Pgo+ID4+ID4+IFJlZ2FyZHMsCj4gPj4g
Pj4gQW5hbmQuCj4gPj4gPj4KPiA+PiA+Pgo+ID4+ID4+IEppbWlIIHdyb3RlOgo+ID4+ID4+ID4K
PiA+PiA+PiA+IFdoYXQgd2Vic2VydmVyIGFyZSB5b3UgdXNpbmc/IEZvciBleGFtcGxlLCB3aXRo
IFRvbWNhdCwgaXQgY291bGQgYmUKPiA+PiA+PiA+IGJlY2F1c2Ugb2YgdGhlIHNldHRpbmcgVVJJ
RW5jb2RpbmcgaW4gc2VydmVyLnhtbC4KPiA+PiA+PiA+Cj4gPj4gPj4gPiBodHRwOi8vdG9tY2F0
LmFwYWNoZS5vcmcvdG9tY2F0LTUuNS1kb2MvY29uZmlnL2h0dHAuaHRtbAo+ID4+ID4+ID4KPiA+
PiA+PiA+IC9KaW1pCj4gPj4gPj4gPgo+ID4+ID4+ID4gbW9ndWwgfCBqaW1pIGh1bGxlZ8OlcmQg
fCBzeXN0ZW0gZGV2ZWxvcGVyIHwgaHVkaWtzdmFsbHNnYXRhbiA0LCAxMTMKPiA+PiAzMAo+ID4+
ID4+ID4gc3RvY2tob2xtIHN3ZWRlbiB8ICs0NiA4IDUwNiA2NiAxNzIgfCArNDYgNzY1IDI3IDE5
IDU1IHwKPiA+PiA+PiA+IGppbWkuaHVsbGVnYXJkQG1vZ3VsLmNvbSB8IHd3dy5tb2d1bC5jb20K
PiA+PiA+PiA+Cj4gPj4gPj4gPgo+ID4+ID4+ID4+IC0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0t
Cj4gPj4gPj4gPj4gRnJvbTogYW5hbmRzYXJ3YWRlIFttYWlsdG86YW5hbmQuc2Fyd2FkZUBjb3Jw
LmFvbC5jb21dCj4gPj4gPj4gPj4gU2VudDogZGVuIDE3IHNlcHRlbWJlciAyMDA4IDE2OjQyCj4g
Pj4gPj4gPj4gVG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZwo+ID4+ID4+ID4+IFN1Ympl
Y3Q6IEx1Y2VuZSBzZWFyY2ggZmFpbHMgZm9yIGphcGFuZXNlIGNoYXJhY3RlcnMgaW4gVVJMCj4g
Pj4gPj4gPj4KPiA+PiA+PiA+Pgo+ID4+ID4+ID4+IEhpICwKPiA+PiA+PiA+Pgo+ID4+ID4+ID4+
IEkgYW0gZmFjaW5nIGJlbG93IHByb2JsZW0uIFBsZWFzZSBoZWxwIG1lIGluIHRoaXMuCj4gPj4g
Pj4gPj4KPiA+PiA+PiA+PiBJIGhhdmUgaW50ZWdyYXRlZCBDSksgQW5hbHl6ZXIgZm9yIEphcGFu
ZXNlIGNoYXJhY3RlcnMuIEkgYW0KPiA+PiA+PiA+PiBhYmxlIHRvIHNhdmUKPiA+PiA+PiA+PiBq
YXBhbmVzZSBkb3VibGUgYnl0ZSBjaGFyYWN0ZXJzIGluIG15c3FsIGRhdGFiYXNlIGluIFVURi04
Cj4gPj4gPj4gPj4gZm9ybWF0IHdpdGhvdXQKPiA+PiA+PiA+PiBpc3N1ZXMuIEkgY291bGQgdGhh
dCBkYXRhIGlzIGdldHRlZCBpbmRleGVkLiBOb3cgd2hlbiBpCj4gPj4gPj4gPj4gc2VhcmNoIHRo
ZSBKYXBhbmVzZQo+ID4+ID4+ID4+IGNoYXJhY3RlcnMgd2hpY2ggd2VyZSBpbmRleGVkIHVzaW5n
IHRoZSBVUkwgYmVsb3cgLCByZXR1cm5zCj4gPj4gPj4gPj4gZW1wdHkgcmVzdWx0cy4KPiA+PiA+
PiA+Pgo+ID4+ID4+ID4+IGh0dHA6Ly94bWwuZGVtby5teWFvbC5qcDo4MDgyL3BvcnRhbC9nYWxs
ZXJ5LXNlYXJjaD9maXJzdD0xJm1hCj4gPj4gPj4gPj4geD0xMDAmY2FwPeiogOiqngo+ID4+ID4+
ID4+Cj4gPj4gPj4gPj4gTm90aWNlZCB0aGF0IHRoZSBhYm92ZSB1cmwgZ2V0cyBjb252ZXJ0ZWQg
dG8gdGhlIGZvbGxvd2luZwo+ID4+ID4+ID4+IFVSTCBoYXZpbmcgc29tZQo+ID4+ID4+ID4+IEhU
TUwgZW5jb2RlZCBzdHJpbmdzIGluIHNlYXJjaC4KPiA+PiA+PiA+Pgo+ID4+ID4+ID4+IGh0dHA6
Ly94bWwuZGVtby5teWFvbC5qcDo4MDgyL3BvcnRhbC9nYWxsZXJ5LXNlYXJjaD9maXJzdD0xJm1h
Cj4gPj4gPj4gPj4geD0xMDAmY2FwPSVFOCVBOCU4MCVFOCVBQSU5RQo+ID4+ID4+ID4+Cj4gPj4g
Pj4gPj4gVGhpcyBkb2VzIG5vdCBtYXRjaCB3aXRoIHRoZSBleGlzdGluZyBsdWNlbmUgaW5kZXhl
cwo+ID4+ID4+ID4+IGhlbmNlZm9ydGggcmV0dXJucwo+ID4+ID4+ID4+IGVtcHR5IHJlc3VsdHMu
ICBIb3cgZG8gaSBzb2x2ZSB0aGlzIGx1Y2VuZSBzZWFyY2ggaXNzdWUKPiA+PiA+PiA+PiBoYXZp
bmcgamFwYW5lc2UKPiA+PiA+PiA+PiB3b3JkcyBpbiBVUkxzLj8gSXMgdGhlcmUgYW55IHdheSB0
byBjb252ZXJ0IHN1Y2ggY2hhcmFjdGVycwo+ID4+ID4+ID4+IGJhY2sgdG8gSmFwYW5lc2UKPiA+
PiA+PiA+PiB3b3Jkcz8/Pwo+ID4+ID4+ID4+Cj4gPj4gPj4gPj4gQW55IGhlbHAvc3VnZ2VzdGlv
bnMgaW4gdGhpcyByZWdhcmRzIGlzIGhpZ2hseSBhcHByZWNpYXRlZC4KPiA+PiA+PiA+Pgo+ID4+
ID4+ID4+IFRoYW5rcyBpbiBBZHZhbmNlLgo+ID4+ID4+ID4+Cj4gPj4gPj4gPj4gUmVnYXJkcywK
PiA+PiA+PiA+PiBBbmFuZAo+ID4+ID4+ID4+Cj4gPj4gPj4gPj4gLS0KPiA+PiA+PiA+PiBWaWV3
IHRoaXMgbWVzc2FnZSBpbiBjb250ZXh0Ogo+ID4+ID4+ID4+IGh0dHA6Ly93d3cubmFiYmxlLmNv
bS9MdWNlbmUtc2VhcmNoLWZhaWxzLWZvci1qYXBhbmVzZS1jaGFyYWN0Cj4gPj4gPj4gPj4gZXJz
LWluLVVSTC10cDE5NTMzNjQ3cDE5NTMzNjQ3Lmh0bWwKPiA+PiA+PiA+PiBTZW50IGZyb20gdGhl
IEx1Y2VuZSAtIEphdmEgVXNlcnMgbWFpbGluZyBsaXN0IGFyY2hpdmUgYXQKPiA+PiBOYWJibGUu
Y29tLgo+ID4+ID4+ID4+Cj4gPj4gPj4gPj4KPiA+PiA+PiA+Pgo+ID4+IC0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+
ID4+ID4+ID4+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBs
dWNlbmUuYXBhY2hlLm9yZwo+ID4+ID4+ID4+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1h
aWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4gPj4gPj4gPj4KPiA+PiA+PiA+
Pgo+ID4+ID4+ID4KPiA+PiA+PiA+Cj4gPj4gPj4KPiA+PiA+PiAtLQo+ID4+ID4+IFZpZXcgdGhp
cyBtZXNzYWdlIGluIGNvbnRleHQ6Cj4gPj4gPj4KPiA+Pgo+IGh0dHA6Ly93d3cubmFiYmxlLmNv
bS9MdWNlbmUtc2VhcmNoLWZhaWxzLWZvci1qYXBhbmVzZS1jaGFyYWN0ZXJzLWluLVVSTC10cDE5
NTMzNjQ3cDE5NTM0MzQyLmh0bWwKPiA+PiA+PiBTZW50IGZyb20gdGhlIEx1Y2VuZSAtIEphdmEg
VXNlcnMgbWFpbGluZyBsaXN0IGFyY2hpdmUgYXQgTmFiYmxlLmNvbS4KPiA+PiA+Pgo+ID4+ID4+
Cj4gPj4gPj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gPj4gPj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2
YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gPj4gPj4gRm9yIGFkZGl0aW9u
YWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcKPiA+
PiA+Pgo+ID4+ID4+Cj4gPj4gPgo+ID4+ID4KPiA+PiA+IC0tCj4gPj4gPiBTb3JyeSBmb3IgbXkg
ZW5nbGlzaCEhIOaYjgo+ID4+ID4gUGxlYXNlIGhlbHAgbWUgdG8gY29ycmVjdCBteSBlbmdsaXNo
IGV4cHJlc3Npb24gYW5kIGVycm9yIGluIHN5bnRheAo+ID4+ID4KPiA+PiA+Cj4gPj4KPiA+PiAt
LQo+ID4+IFZpZXcgdGhpcyBtZXNzYWdlIGluIGNvbnRleHQ6Cj4gPj4KPiBodHRwOi8vd3d3Lm5h
YmJsZS5jb20vTHVjZW5lLXNlYXJjaC1mYWlscy1mb3ItamFwYW5lc2UtY2hhcmFjdGVycy1pbi1V
UkwtdHAxOTUzMzY0N3AxOTU0NzA4MS5odG1sCj4gPj4gU2VudCBmcm9tIHRoZSBMdWNlbmUgLSBK
YXZhIFVzZXJzIG1haWxpbmcgbGlzdCBhcmNoaXZlIGF0IE5hYmJsZS5jb20uCj4gPj4KPiA+Pgo+
ID4+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLQo+ID4+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11
bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+ID4+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRz
LCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4gPj4KPiA+Pgo+ID4K
PiA+Cj4gPiAtLQo+ID4gU29ycnkgZm9yIG15IGVuZ2xpc2ghISDmmI4KPiA+IFBsZWFzZSBoZWxw
IG1lIHRvIGNvcnJlY3QgbXkgZW5nbGlzaCBleHByZXNzaW9uIGFuZCBlcnJvciBpbiBzeW50YXgK
PiA+Cj4gPgo+Cj4gLS0KPiBWaWV3IHRoaXMgbWVzc2FnZSBpbiBjb250ZXh0Ogo+IGh0dHA6Ly93
d3cubmFiYmxlLmNvbS9MdWNlbmUtc2VhcmNoLWZhaWxzLWZvci1qYXBhbmVzZS1jaGFyYWN0ZXJz
LWluLVVSTC10cDE5NTMzNjQ3cDE5NTQ5ODU0Lmh0bWwKPiBTZW50IGZyb20gdGhlIEx1Y2VuZSAt
IEphdmEgVXNlcnMgbWFpbGluZyBsaXN0IGFyY2hpdmUgYXQgTmFiYmxlLmNvbS4KPgo+Cj4gLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJl
QGx1Y2VuZS5hcGFjaGUub3JnCj4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2
YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcKPgo+CgoKLS0gClNvcnJ5IGZvciBteSBlbmds
aXNoISEg5piOClBsZWFzZSBoZWxwIG1lIHRvIGNvcnJlY3QgbXkgZW5nbGlzaCBleHByZXNzaW9u
IGFuZCBlcnJvciBpbiBzeW50YXgK
------=_Part_20647_1585740.1221785598162--

From java-user-return-36268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 19 05:27:48 2008
Return-Path: <java-user-return-36268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76581 invoked from network); 19 Sep 2008 05:27:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2008 05:27:48 -0000
Received: (qmail 22429 invoked by uid 500); 19 Sep 2008 05:27:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22395 invoked by uid 500); 19 Sep 2008 05:27:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22384 invoked by uid 99); 19 Sep 2008 05:27:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Sep 2008 22:27:37 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.107.119] (HELO smtp136.mail.mud.yahoo.com) (209.191.107.119)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 19 Sep 2008 05:26:36 +0000
Received: (qmail 93906 invoked from network); 19 Sep 2008 05:26:06 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=GsJdIRVWfS6CismWc3YE05+NvfZ6QcEjf7Mr86UAHa3Q0L/KuiHKU0ryUqiVK13eT/PcQvYRo1ZOE/iCUr+dhcK/mf07CODU+8bn8JSQv66gMAmrKsGHg9jBMTPlhuihe9wDrQkkmqk8r56BJ7VHfn6RH/MHBgWN9EQx+7KK7KY=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp136.mail.mud.yahoo.com with SMTP; 19 Sep 2008 05:26:05 -0000
X-YMail-OSG: ekoR7B0VM1m9QLjl0eUgwfHvwZDS57D4ENuEbS7HRl_nXwup3ppW8lZz7jcvUnrCkKLoeESkBaDT46DTFPdJPB7GfJMD6DJ1etVlXrlqLjKxvEu8uHCDLEs9d1t9wZL6a9Ap3AJ7k8xIDv2zZPdgsyF7TasmRwAdl7TljlR1Cdy1558wTlT.g5U-
X-Yahoo-Newman-Property: ymail-3
Message-ID: <010a01c91a18$36e95b50$04000100@sv.us.sonicwall.com>
From: "Ganesh - yahoo" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <661170.73589.qm@web50312.mail.re2.yahoo.com>
Subject: Re: Exception while doing sorting
Date: Fri, 19 Sep 2008 10:56:02 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Ok. If i distribure the indexes, whether sorting would be faster?

In Lucene user group mailing list, most emails suggests to use single 
indicies. Searching across the indexes may not be slower?

>> Lucene uses FieldCache for sorting on non-tokenized field and tries to
>> maintain fields from all your 4 millions documents, even if you need
>> to sort only 4000 docs.
Don't know why Lucene keeps all terms in FieldCache for sorting. It supposed 
to sort only the hits. Please clarify?

Regards
Ganesh

----- Original Message ----- 
From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
To: <java-user@lucene.apache.org>
Sent: Thursday, September 18, 2008 12:17 PM
Subject: Re: Exception while doing sorting


> If your index is increasing in size so fast, you should start thinking 
> about sharding your index (breaking it into multiple smaller indices that 
> each fits on its server) and searching across them (aka distributed 
> search).
>
> Yes, Lucene can handle millions of records if run on adequate hardware and 
> if used correctly.
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
>
> ----- Original Message ----
>> From: Ganesh - yahoo <emailgane@yahoo.co.in>
>> To: java-user@lucene.apache.org
>> Sent: Thursday, September 18, 2008 12:53:19 AM
>> Subject: Re: Exception while doing sorting
>>
>> My index is growing by 1 million records per day. How much memory do i 
>> need
>> to increase.
>>
>> What kind of sorting algorithm being used in Lucene. Is this efficient
>> enough to handle millions of records.
>>
>> Whether we could do sorting using our own algorithm?
>>
>> Regards
>> Ganesh
>>
>> ----- Original Message ----- 
>> From: "Fuad Efendi"
>> To:
>> Sent: Wednesday, September 17, 2008 7:28 PM
>> Subject: Re: Exception while doing sorting
>>
>>
>> Increase memory.
>>
>> Lucene uses FieldCache for sorting on non-tokenized field and tries to
>> maintain fields from all your 4 millions documents, even if you need
>> to sort only 4000 docs.
>> ==============
>> http://www.tokenizer.org/bot.html
>>
>>
>> Quoting Ganesh - yahoo :
>>
>> > Hello all,
>> >
>> > I am have indexed more than 4 million documents. My query fetches
>> > 300,000 hits. If i perform sorting on any field, then tomcat reports
>> > out of memory exception.
>> > Sometimes the query results may be around 1000, but sorting on any
>> > field might take more than 30 - 50 secs.
>> >
>> > I don't know what's going wrong.
>> >
>> > My index searcher is static object and it is getting refreshed every
>> > minute. JSP pages directly calls the index searcher object and performs
>> > search.
>> >
>> > Regards
>> > Ganesh
>> >
>> >
>> > Send instant messages to your online friends
>> > http://in.messenger.yahoo.com
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>> Send instant messages to your online friends 
>> http://in.messenger.yahoo.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 19 07:24:35 2008
Return-Path: <java-user-return-36269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47510 invoked from network); 19 Sep 2008 07:24:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2008 07:24:35 -0000
Received: (qmail 36824 invoked by uid 500); 19 Sep 2008 07:24:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36799 invoked by uid 500); 19 Sep 2008 07:24:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36788 invoked by uid 99); 19 Sep 2008 07:24:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 00:24:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO web1.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 07:23:24 +0000
Received: from [192.168.222.60] (unknown [192.168.222.60])
	by web1.nuix.com.au (Postfix) with ESMTP id 89A714ED8FD
	for <java-user@lucene.apache.org>; Fri, 19 Sep 2008 17:23:04 +1000 (EST)
Message-ID: <48D3537F.8020401@nuix.com>
Date: Fri, 19 Sep 2008 17:23:43 +1000
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher.search
References: <682882.35954.qm@web50312.mail.re2.yahoo.com> <48CF2124.3090501@nuix.com> <Pine.LNX.4.62.0809161143560.12858@radix.cryptio.net> <48D075DD.5050407@nuix.com> <Pine.LNX.4.62.0809171135050.2301@radix.cryptio.net>
In-Reply-To: <Pine.LNX.4.62.0809171135050.2301@radix.cryptio.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Chris Hostetter wrote:
> 
> But it don'treally see how it chagnes anything ... if your goal is to 
> perform an operating on every result in a set, why are you using 
> TopDocSCollector?  why not write a HitCollector and perform your 
> operation in the collect method?

We're not using TopDocCollector right now, as we're still using Hits. 
Performing some operation over every result is just one use case.  We 
also have to deal with the user scrolling the display.  Currently this 
works acceptably using the same java.util.List model for both cases. 
Sometimes a bulk operation needs to iterate over the items more than 
once, which makes it trickier to invert (I guess we'd have to perform 
the search twice.  And then if the results change between the two 
executions other problems happen.  Some of this we can get around by 
caching the bitsets for filters which are the only thing which change.)

> I don't disagree with you, but is there a reason to have the entire set in 
> memory all at once regardless of it's size?

No... that's why maybe I thought keeping the rest on disk would be a 
plan, whether it's done as a bitset (and re-execute a trivial search 
with the cached bitset) or a list of integers.

> At the end of the day: people switching to using TopDocsCollector 
> instead of Hits are no worse off when trying to iterate over every result 
> in a ginormous result set, they're just have to define "ginormous" 
> for themselves, and the get an OOM right away instead of once they iterate 
> up to that many.

This is effectively our problem, if it fails fast the user just says 
"well why couldn't I even see the first 10 results?"  It's much better 
to fail with an OOM later when retrieving result someBigValue + 1.

A custom HitCollector will definitely get around that, really I'm just 
saying it's a shame to lose a part of Lucene which works for the case 
for which it was designed, just because someone deemed that nobody 
needed it for that case.  The first comment on the bug report for 
deprecating it even says something like "it was originally designed for 
GUI but was anyone even using it for that?"  Some of us obviously were.

Daniel


-- 
Daniel Noll                            Forensic and eDiscovery Software
Senior Developer                              The world's most advanced
Nuix                                                email data analysis
http://nuix.com/                                and eDiscovery software

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 19 08:01:58 2008
Return-Path: <java-user-return-36270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71817 invoked from network); 19 Sep 2008 08:01:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2008 08:01:57 -0000
Received: (qmail 83143 invoked by uid 500); 19 Sep 2008 08:01:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83112 invoked by uid 500); 19 Sep 2008 08:01:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83101 invoked by uid 99); 19 Sep 2008 08:01:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 01:01:47 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [202.165.102.86] (HELO web15806.mail.cnb.yahoo.com) (202.165.102.86)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 19 Sep 2008 08:00:45 +0000
Received: (qmail 14965 invoked by uid 60001); 19 Sep 2008 08:00:21 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com.cn;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=Xfw6+jrYth9vhar4bqrUpwwxTFNoPdQttY+YQp+3KjiYvKtWlz+4LCdS/sP9zKV0hsmWkE0EYLQ3bdMT8MrQ86yGsewKwerPJkXOHLJ8cgLd8AHo+qTrsZRhBBBYWCc6pDxe0cfSivtBetFvgVyoJW8eOvSvUoXmMwbjAPfvCGM=;
X-YMail-OSG: 0eRWZnIVM1kcvh34SmrOFBnV3oLCf0FF5g_X6Sd3AXdLPTx48st3NCXFSmc5Tue9lsv5hJwiVnaC9hVEED7T7khxAbOHnNlI9jqUVGaGTBZ1HhxIack6iIMa22kfZXHKVF8-
Received: from [122.225.11.252] by web15806.mail.cnb.yahoo.com via HTTP; Fri, 19 Sep 2008 16:00:20 CST
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Fri, 19 Sep 2008 16:00:20 +0800 (CST)
From: xh sun <wysunxiaohua@yahoo.com.cn>
Subject: could I implement this scenario?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1063783163-1221811220=:14904"
Message-ID: <998192.14904.qm@web15806.mail.cnb.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1063783163-1221811220=:14904
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi all,=0A=0AHow can I implemented=A0this scenario=A0in lucene? =0A=0Asuppo=
se every document has three fields: docid, doctext and simdocid. docid is t=
he id of the document, doctext is the content of the document, dimdocid is =
the docid of a similar document with this document. =0Aexample:=0Adocid=A0 =
doctext=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 simdocid=
=0Adoc01=A0 ************************=A0=A0 doc04=0Adoc02=A0 ***************=
*********=A0=A0 doc03=0Adoc03=A0 ************************=A0=A0 doc02=0Adoc=
04=A0 ************************=A0=A0 doc03=0Adoc05=A0 *********************=
***=A0=A0 doc04=0Adoc06=A0 ************************=A0=A0 doc02=0A=0ADuring=
 query, the index will be searched basing on field doctext. If the hits inc=
lude four documents doc01,doc03,doc04, doc05, I want to display the corresp=
onding similar documents only, that is, the three documents doc04,doc02,doc=
03. =0A=0AAppreicate your help very much.=0A=0ABR,=0AShawn=0A=0A=0A      
--0-1063783163-1221811220=:14904--

From java-user-return-36271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 19 08:15:18 2008
Return-Path: <java-user-return-36271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79556 invoked from network); 19 Sep 2008 08:15:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2008 08:15:17 -0000
Received: (qmail 1187 invoked by uid 500); 19 Sep 2008 08:15:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1056 invoked by uid 500); 19 Sep 2008 08:15:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1045 invoked by uid 99); 19 Sep 2008 08:15:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 01:15:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [82.227.122.98] (HELO mail.garambrogne.net) (82.227.122.98)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 08:14:08 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.garambrogne.net (Postfix) with ESMTP id 72E6738E394
	for <java-user@lucene.apache.org>; Fri, 19 Sep 2008 10:14:38 +0200 (CEST)
Received: from mail.garambrogne.net ([127.0.0.1])
	by localhost (localhost.localdomain [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id WfI0mB1VsrM0 for <java-user@lucene.apache.org>;
	Fri, 19 Sep 2008 10:14:34 +0200 (CEST)
Received: by mail.garambrogne.net (Postfix, from userid 33)
	id 7A20138E395; Fri, 19 Sep 2008 10:14:34 +0200 (CEST)
To: java-user@lucene.apache.org
Subject: Re: could I implement this =?UTF-8?Q?scenario=3F?=
MIME-Version: 1.0
Date: Fri, 19 Sep 2008 10:14:34 +0200
From: mathieu <mathieu@garambrogne.net>
Organization: Garambrogne
In-Reply-To: <998192.14904.qm@web15806.mail.cnb.yahoo.com>
References: <998192.14904.qm@web15806.mail.cnb.yahoo.com>
Message-ID: <77e101c1855b7f8f59e43e7abbc15e89@localhost>
X-Sender: mathieu@garambrogne.net
User-Agent: RoundCube Webmail/0.1b
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org



Yes. You can store data in lucene index and don't search on it : your
simdocid.

M.

On Fri, 19 Sep 2008 16:00:20 +0800 (CST), xh sun
<wysunxiaohua@yahoo.com.cn> wrote:
> Hi all,
> 
> How can I implementedthis scenarioin lucene? 
> 
> suppose every document has three fields: docid, doctext and simdocid.
> docid is the id of the document, doctext is the content of the document,
> dimdocid is the docid of a similar document with this document. 
> example:
> docid doctext simdocid
> doc01 ************************ doc04
> doc02 ************************ doc03
> doc03 ************************ doc02
> doc04 ************************ doc03
> doc05 ************************ doc04
> doc06 ************************ doc02
> 
> During query, the index will be searched basing on field doctext. If the
> hits include four documents doc01,doc03,doc04, doc05, I want to display
the
> corresponding similar documents only, that is, the three documents
> doc04,doc02,doc03. 
> 
> Appreicate your help very much.
> 
> BR,
> Shawn
> 
> 
>       


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 19 08:20:55 2008
Return-Path: <java-user-return-36272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81162 invoked from network); 19 Sep 2008 08:20:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2008 08:20:54 -0000
Received: (qmail 7796 invoked by uid 500); 19 Sep 2008 08:20:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7744 invoked by uid 500); 19 Sep 2008 08:20:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7733 invoked by uid 99); 19 Sep 2008 08:20:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 01:20:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [193.12.6.34] (HELO msgint02.mogul.com) (193.12.6.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 08:19:43 +0000
Received: from msgint02.mogul.com ([172.17.1.7]) by msgint02.mogul.com
 ([172.17.1.7]) with mapi; Fri, 19 Sep 2008 10:21:02 +0200
From: =?iso-8859-1?Q?Jimi_Hulleg=E5rd?= <jimi.hullegard@mogul.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 19 Sep 2008 10:20:58 +0200
Subject: RE: could I implement this scenario?
Thread-Topic: could I implement this scenario?
Thread-Index: AckaMAG2LvmJL8xiThySCoKeElzIbQAAIDKQ
Message-ID: <D8E6BD3AD2634843B58AFF6A94FE246202D7AEB916@msgint02.mogul.com>
In-Reply-To: <77e101c1855b7f8f59e43e7abbc15e89@localhost>
Accept-Language: sv-SE
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: sv-SE
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

I think he meant that he wants the search to automatically retrieve the rel=
ated documents, instead of the ones that was matched by the query.

mogul | jimi hulleg=E5rd | system developer | hudiksvallsgatan 4, 113 30 st=
ockholm sweden | +46 8 506 66 172 | +46 765 27 19 55 | jimi.hullegard@mogul=
.com | www.mogul.com


> -----Original Message-----
> From: mathieu [mailto:mathieu@garambrogne.net]
> Sent: den 19 september 2008 10:15
> To: java-user@lucene.apache.org
> Subject: Re: could I implement this scenario?
>
>
>
> Yes. You can store data in lucene index and don't search on it : your
> simdocid.
>
> M.
>
> On Fri, 19 Sep 2008 16:00:20 +0800 (CST), xh sun
> <wysunxiaohua@yahoo.com.cn> wrote:
> > Hi all,
> >
> > How can I implemented this scenario in lucene?
> >
> > suppose every document has three fields: docid, doctext and
> simdocid.
> > docid is the id of the document, doctext is the content of
> the document,
> > dimdocid is the docid of a similar document with this document.
> > example:
> > docid  doctext                    simdocid
> > doc01  ************************   doc04
> > doc02  ************************   doc03
> > doc03  ************************   doc02
> > doc04  ************************   doc03
> > doc05  ************************   doc04
> > doc06  ************************   doc02
> >
> > During query, the index will be searched basing on field
> doctext. If the
> > hits include four documents doc01,doc03,doc04, doc05, I
> want to display
> the
> > corresponding similar documents only, that is, the three documents
> > doc04,doc02,doc03.
> >
> > Appreicate your help very much.
> >
> > BR,
> > Shawn
> >
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 19 08:27:21 2008
Return-Path: <java-user-return-36273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85399 invoked from network); 19 Sep 2008 08:27:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2008 08:27:21 -0000
Received: (qmail 18227 invoked by uid 500); 19 Sep 2008 08:27:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18179 invoked by uid 500); 19 Sep 2008 08:27:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18168 invoked by uid 99); 19 Sep 2008 08:27:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 01:27:10 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [202.165.102.85] (HELO web15805.mail.cnb.yahoo.com) (202.165.102.85)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 19 Sep 2008 08:26:09 +0000
Received: (qmail 13970 invoked by uid 60001); 19 Sep 2008 08:25:27 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com.cn;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=v+mAz65vpTjV9D5QoKPDnWpKcJ9QkNP9uwO97H30mPZzvTayDjLojPrZFWXvNrFBASeFnFJEmaDD5JZzgthyCHHZceHwCkzI51KAFg5wnVlGpL3Z0WFI91mDkrEXLdgerKKjBUX58VWmgTgJIkFHEE1lNVbc6CUiwq/ngHiL30g=;
X-YMail-OSG: o0voGKUVM1kNFBXd5z7Fho7FSahV.PhWx2n_v_9.P2B4TzbY6McEAY1NeL4w.SqKyf.5ZnwDU129ovQUIzC9iB6C0pnedBsoU9vSrHqz1rQCGDVxYH.S2G1jNkyCqwtOHG2.9fol56o52Ne9uK5wHi6Q
Received: from [122.225.11.252] by web15805.mail.cnb.yahoo.com via HTTP; Fri, 19 Sep 2008 16:25:27 CST
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Fri, 19 Sep 2008 16:25:27 +0800 (CST)
From: xh sun <wysunxiaohua@yahoo.com.cn>
Subject: Re: could I implement this scenario?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1940954682-1221812727=:13946"
Message-ID: <596314.13946.qm@web15805.mail.cnb.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1940954682-1221812727=:13946
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Thank you. Mathieu.=0A=0ABut=A0the hits don't include the document doc02=A0=
 in my example,=A0how to display=A0 doc02?=A0 I don't want to search by doc=
id. Thanks.=0A=0A=0A=0A----- Original Message ----=0AFrom: mathieu <mathieu=
@garambrogne.net>=0ATo: java-user@lucene.apache.org=0ASent: Friday, Septemb=
er 19, 2008 4:14:34 PM=0ASubject: Re: could I implement this scenario?=0A=
=0A=0A=0AYes. You can store data in lucene index and don't search on it : y=
our=0Asimdocid.=0A=0AM.=0A=0AOn Fri, 19 Sep 2008 16:00:20 +0800 (CST), xh s=
un=0A<wysunxiaohua@yahoo.com.cn> wrote:=0A> Hi all,=0A> =0A> How can I impl=
emented=A0this scenario=A0in lucene? =0A> =0A> suppose every document has t=
hree fields: docid, doctext and simdocid.=0A> docid is the id of the docume=
nt, doctext is the content of the document,=0A> dimdocid is the docid of a =
similar document with this document. =0A> example:=0A> docid=A0 doctext=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 simdocid=0A> doc01=
=A0 ************************=A0=A0 doc04=0A> doc02=A0 *********************=
***=A0=A0 doc03=0A> doc03=A0 ************************=A0=A0 doc02=0A> doc04=
=A0 ************************=A0=A0 doc03=0A> doc05=A0 *********************=
***=A0=A0 doc04=0A> doc06=A0 ************************=A0=A0 doc02=0A> =0A> =
During query, the index will be searched basing on field doctext. If the=0A=
> hits include four documents doc01,doc03,doc04, doc05, I want to display=
=0Athe=0A> corresponding similar documents only, that is, the three documen=
ts=0A> doc04,doc02,doc03. =0A> =0A> Appreicate your help very much.=0A> =0A=
> BR,=0A> Shawn=0A> =0A> =0A>=A0 =A0 =A0 =0A=0A=0A-------------------------=
--------------------------------------------=0ATo unsubscribe, e-mail: java=
-user-unsubscribe@lucene.apache.org=0AFor additional commands, e-mail: java=
-user-help@lucene.apache.org=0A=0A=0A      
--0-1940954682-1221812727=:13946--

From java-user-return-36274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 19 08:28:17 2008
Return-Path: <java-user-return-36274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86095 invoked from network); 19 Sep 2008 08:28:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2008 08:28:17 -0000
Received: (qmail 20740 invoked by uid 500); 19 Sep 2008 08:28:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20705 invoked by uid 500); 19 Sep 2008 08:28:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20694 invoked by uid 99); 19 Sep 2008 08:28:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 01:28:07 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [202.165.102.84] (HELO web15804.mail.cnb.yahoo.com) (202.165.102.84)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 19 Sep 2008 08:27:05 +0000
Received: (qmail 65125 invoked by uid 60001); 19 Sep 2008 08:27:20 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com.cn;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=ma5w3bfhvieSeyUyVc1QEiGcl0tnAJyuTzODmKOmbYeUaBbAU6+lNi90wgr0nXRf6Wf+A1t83APkDwwdfFkxQStbmv+EsR5CW80w6ckdJPhOVbZI8ojt95d3L5Ggo/9oZZYW4NbQ3iE6hgNdFQkfwsgvDYokCOu1Z+LzHY3lyBg=;
X-YMail-OSG: vv1E1VkVM1n0759BECxbVrWMHq7KjaX7CISnjwM1NmTqc_eNNAJmW3MZMCWADmL4HCxL0cq3.q.pPV7U010a6EulVS3cr4NYEGIBAnny9_1zYJA0zpIHFNWqSx1l5CQmn1a1Gk_xzdycxg.MsMCghDKw
Received: from [122.225.11.252] by web15804.mail.cnb.yahoo.com via HTTP; Fri, 19 Sep 2008 16:27:20 CST
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Fri, 19 Sep 2008 16:27:20 +0800 (CST)
From: xh sun <wysunxiaohua@yahoo.com.cn>
Subject: Re: could I implement this scenario?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1537502926-1221812840=:65114"
Message-ID: <899422.65114.qm@web15804.mail.cnb.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1537502926-1221812840=:65114
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

you are right. thank you.=0A=0A=0A=0A----- Original Message ----=0AFrom: Ji=
mi Hulleg=E5rd <jimi.hullegard@mogul.com>=0ATo: "java-user@lucene.apache.or=
g" <java-user@lucene.apache.org>=0ASent: Friday, September 19, 2008 4:20:58=
 PM=0ASubject: RE: could I implement this scenario?=0A=0AI think he meant t=
hat he wants the search to automatically retrieve the related documents, in=
stead of the ones that was matched by the query.=0A=0Amogul | jimi hulleg=
=E5rd | system developer | hudiksvallsgatan 4, 113 30 stockholm sweden | +4=
6 8 506 66 172 | +46 765 27 19 55 | jimi.hullegard@mogul.com | www.mogul.co=
m=0A=0A=0A> -----Original Message-----=0A> From: mathieu [mailto:mathieu@ga=
rambrogne.net]=0A> Sent: den 19 september 2008 10:15=0A> To: java-user@luce=
ne.apache.org=0A> Subject: Re: could I implement this scenario?=0A>=0A>=0A>=
=0A> Yes. You can store data in lucene index and don't search on it : your=
=0A> simdocid.=0A>=0A> M.=0A>=0A> On Fri, 19 Sep 2008 16:00:20 +0800 (CST),=
 xh sun=0A> <wysunxiaohua@yahoo.com.cn> wrote:=0A> > Hi all,=0A> >=0A> > Ho=
w can I implemented this scenario in lucene?=0A> >=0A> > suppose every docu=
ment has three fields: docid, doctext and=0A> simdocid.=0A> > docid is the =
id of the document, doctext is the content of=0A> the document,=0A> > dimdo=
cid is the docid of a similar document with this document.=0A> > example:=
=0A> > docid=A0 doctext=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 simdocid=0A>=
 > doc01=A0 ************************=A0 doc04=0A> > doc02=A0 **************=
**********=A0 doc03=0A> > doc03=A0 ************************=A0 doc02=0A> > =
doc04=A0 ************************=A0 doc03=0A> > doc05=A0 *****************=
*******=A0 doc04=0A> > doc06=A0 ************************=A0 doc02=0A> >=0A>=
 > During query, the index will be searched basing on field=0A> doctext. If=
 the=0A> > hits include four documents doc01,doc03,doc04, doc05, I=0A> want=
 to display=0A> the=0A> > corresponding similar documents only, that is, th=
e three documents=0A> > doc04,doc02,doc03.=0A> >=0A> > Appreicate your help=
 very much.=0A> >=0A> > BR,=0A> > Shawn=0A> >=0A> >=0A> >=0A>=0A>=0A> -----=
----------------------------------------------------------------=0A> To uns=
ubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> For additiona=
l commands, e-mail: java-user-help@lucene.apache.org=0A>=0A>=0A=0A---------=
------------------------------------------------------------=0ATo unsubscri=
be, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor additional comman=
ds, e-mail: java-user-help@lucene.apache.org=0A=0A=0A      
--0-1537502926-1221812840=:65114--

From java-user-return-36275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 19 08:34:53 2008
Return-Path: <java-user-return-36275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89551 invoked from network); 19 Sep 2008 08:34:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2008 08:34:53 -0000
Received: (qmail 34121 invoked by uid 500); 19 Sep 2008 08:34:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33882 invoked by uid 500); 19 Sep 2008 08:34:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33871 invoked by uid 99); 19 Sep 2008 08:34:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 01:34:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [82.227.122.98] (HELO mail.garambrogne.net) (82.227.122.98)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 08:33:44 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.garambrogne.net (Postfix) with ESMTP id 5F1CC38E394
	for <java-user@lucene.apache.org>; Fri, 19 Sep 2008 10:34:15 +0200 (CEST)
Received: from mail.garambrogne.net ([127.0.0.1])
	by localhost (localhost.localdomain [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 8sY+sg4jRy8a for <java-user@lucene.apache.org>;
	Fri, 19 Sep 2008 10:34:14 +0200 (CEST)
Received: by mail.garambrogne.net (Postfix, from userid 33)
	id E6C7B38E395; Fri, 19 Sep 2008 10:34:13 +0200 (CEST)
To: java-user@lucene.apache.org
Subject: Re: could I implement this =?UTF-8?Q?scenario=3F?=
MIME-Version: 1.0
Date: Fri, 19 Sep 2008 10:34:13 +0200
From: mathieu <mathieu@garambrogne.net>
Organization: Garambrogne
In-Reply-To: <596314.13946.qm@web15805.mail.cnb.yahoo.com>
References: <596314.13946.qm@web15805.mail.cnb.yahoo.com>
Message-ID: <b8f40836ab68aa871e6a362520269a85@localhost>
X-Sender: mathieu@garambrogne.net
User-Agent: RoundCube Webmail/0.1b
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org


Lucene is just an index. Where do you wont to store your data? in a db,
flatfiles, document with an url, in lucene?

M.

On Fri, 19 Sep 2008 16:25:27 +0800 (CST), xh sun
<wysunxiaohua@yahoo.com.cn> wrote:
> Thank you. Mathieu.
> 
> Butthe hits don't include the document doc02 in my example,how to
> display doc02? I don't want to search by docid. Thanks.
> 
> 
> 
> ----- Original Message ----
> From: mathieu <mathieu@garambrogne.net>
> To: java-user@lucene.apache.org
> Sent: Friday, September 19, 2008 4:14:34 PM
> Subject: Re: could I implement this scenario?
> 
> 
> 
> Yes. You can store data in lucene index and don't search on it : your
> simdocid.
> 
> M.
> 
> On Fri, 19 Sep 2008 16:00:20 +0800 (CST), xh sun
> <wysunxiaohua@yahoo.com.cn> wrote:
>> Hi all,
>> 
>> How can I implementedthis scenarioin lucene? 
>> 
>> suppose every document has three fields: docid, doctext and simdocid.
>> docid is the id of the document, doctext is the content of the document,
>> dimdocid is the docid of a similar document with this document. 
>> example:
>> docid doctext simdocid
>> doc01 ************************ doc04
>> doc02 ************************ doc03
>> doc03 ************************ doc02
>> doc04 ************************ doc03
>> doc05 ************************ doc04
>> doc06 ************************ doc02
>> 
>> During query, the index will be searched basing on field doctext. If the
>> hits include four documents doc01,doc03,doc04, doc05, I want to display
> the
>> corresponding similar documents only, that is, the three documents
>> doc04,doc02,doc03. 
>> 
>> Appreicate your help very much.
>> 
>> BR,
>> Shawn
>> 
>> 
>>   
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
>       


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 19 08:45:38 2008
Return-Path: <java-user-return-36276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95779 invoked from network); 19 Sep 2008 08:45:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2008 08:45:38 -0000
Received: (qmail 53212 invoked by uid 500); 19 Sep 2008 08:45:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53184 invoked by uid 500); 19 Sep 2008 08:45:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53173 invoked by uid 99); 19 Sep 2008 08:45:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 01:45:28 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [202.165.102.86] (HELO web15806.mail.cnb.yahoo.com) (202.165.102.86)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 19 Sep 2008 08:44:27 +0000
Received: (qmail 45121 invoked by uid 60001); 19 Sep 2008 08:43:50 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com.cn;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=krw+n8m7bnfHDROnuR1gyzrMGgCZBglue3t6xuEn6bd38+OoDo53fxnjZsmsDneKP3U+y7lScPvyJEGjV8fuUPN9OEgltGymsmAAR0tq7dZNt11M/LxkigVIYlAOhEJdz0K0JAUbgw0SYFKLzVzQNz/o20ZWs1KunplUcGOrgBg=;
X-YMail-OSG: nzrVnsYVM1lFJMAJ0VnmD4B37FdVxys_1Mi6Lrba4XJ5CJZBsACCaHFyic3h4lFiUtNqslEwbdgOvzWVf9nHzE06BpafEMlcsYa.vmhqiuT3mu5odLUhp7lfJn1cxH1E78c10wYLEHYY_glE6o1CVLMT
Received: from [122.225.11.252] by web15806.mail.cnb.yahoo.com via HTTP; Fri, 19 Sep 2008 16:43:50 CST
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Fri, 19 Sep 2008 16:43:50 +0800 (CST)
From: xh sun <wysunxiaohua@yahoo.com.cn>
Subject: Re: could I implement this scenario?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-268029466-1221813830=:44966"
Message-ID: <236180.44966.qm@web15806.mail.cnb.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-268029466-1221813830=:44966
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

I store the data in flatfiles and db. I want to implement it using Lucene o=
nly, but if it=A0fails, maybe I shall create a temporary=A0table for each q=
uery. =0A=0A=0A=0A----- Original Message ----=0AFrom: mathieu <mathieu@gara=
mbrogne.net>=0ATo: java-user@lucene.apache.org=0ASent: Friday, September 19=
, 2008 4:34:13 PM=0ASubject: Re: could I implement this scenario?=0A=0A=0AL=
ucene is just an index. Where do you wont to store your data? in a db,=0Afl=
atfiles, document with an url, in lucene?=0A=0AM.=0A=0AOn Fri, 19 Sep 2008 =
16:25:27 +0800 (CST), xh sun=0A<wysunxiaohua@yahoo.com.cn> wrote:=0A> Thank=
 you. Mathieu.=0A> =0A> But=A0the hits don't include the document doc02=A0 =
in my example,=A0how to=0A> display=A0 doc02?=A0 I don't want to search by =
docid. Thanks.=0A> =0A> =0A> =0A> ----- Original Message ----=0A> From: mat=
hieu <mathieu@garambrogne.net>=0A> To: java-user@lucene.apache.org=0A> Sent=
: Friday, September 19, 2008 4:14:34 PM=0A> Subject: Re: could I implement =
this scenario?=0A> =0A> =0A> =0A> Yes. You can store data in lucene index a=
nd don't search on it : your=0A> simdocid.=0A> =0A> M.=0A> =0A> On Fri, 19 =
Sep 2008 16:00:20 +0800 (CST), xh sun=0A> <wysunxiaohua@yahoo.com.cn> wrote=
:=0A>> Hi all,=0A>> =0A>> How can I implemented=A0this scenario=A0in lucene=
? =0A>> =0A>> suppose every document has three fields: docid, doctext and s=
imdocid.=0A>> docid is the id of the document, doctext is the content of th=
e document,=0A>> dimdocid is the docid of a similar document with this docu=
ment. =0A>> example:=0A>> docid=A0 doctext=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0 simdocid=0A>> doc01=A0 ************************=A0=
=A0 doc04=0A>> doc02=A0 ************************=A0=A0 doc03=0A>> doc03=A0 =
************************=A0=A0 doc02=0A>> doc04=A0 ************************=
=A0=A0 doc03=0A>> doc05=A0 ************************=A0=A0 doc04=0A>> doc06=
=A0 ************************=A0=A0 doc02=0A>> =0A>> During query, the index=
 will be searched basing on field doctext. If the=0A>> hits include four do=
cuments doc01,doc03,doc04, doc05, I want to display=0A> the=0A>> correspond=
ing similar documents only, that is, the three documents=0A>> doc04,doc02,d=
oc03. =0A>> =0A>> Appreicate your help very much.=0A>> =0A>> BR,=0A>> Shawn=
=0A>> =0A>> =0A>>=A0 =A0 =A0 =0A> =0A> =0A> -------------------------------=
--------------------------------------=0A> To unsubscribe, e-mail: java-use=
r-unsubscribe@lucene.apache.org=0A> For additional commands, e-mail: java-u=
ser-help@lucene.apache.org=0A> =0A> =0A>=A0 =A0 =A0 =0A=0A=0A--------------=
-------------------------------------------------------=0ATo unsubscribe, e=
-mail: java-user-unsubscribe@lucene.apache.org=0AFor additional commands, e=
-mail: java-user-help@lucene.apache.org=0A=0A=0A      
--0-268029466-1221813830=:44966--

From java-user-return-36277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 19 09:02:27 2008
Return-Path: <java-user-return-36277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6320 invoked from network); 19 Sep 2008 09:02:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2008 09:02:27 -0000
Received: (qmail 75485 invoked by uid 500); 19 Sep 2008 09:02:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75448 invoked by uid 500); 19 Sep 2008 09:02:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75437 invoked by uid 99); 19 Sep 2008 09:02:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 02:02:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [213.52.246.188] (HELO MAIL.DIOSPHERE.com) (213.52.246.188)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 19 Sep 2008 09:01:17 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: could I implement this scenario?
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Fri, 19 Sep 2008 09:58:34 +0100
Message-ID: <ED024AB4B57C8543A3425147237C45F8451439@MAIL.DIOSPHERE.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: could I implement this scenario?
Thread-Index: AckaNJTzDRqVjAEfQZmJUNicxYn9+gAAPBIw
References: <236180.44966.qm@web15806.mail.cnb.yahoo.com>
From: "Dragan Jotanovic" <Dragan.Jotanovic@DIOSPHERE.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

I think it is not good idea to use lucene as storage, it is just index.
You could probably implement this using flat files and lucene.
Your simDocId would be stored field which you can retrieve from the =
index after search, and it could also contain the information where on =
the disk is document located.


-----Original Message-----
From: xh sun [mailto:wysunxiaohua@yahoo.com.cn]=20
Sent: Friday, September 19, 2008 9:44 AM
To: java-user@lucene.apache.org
Subject: Re: could I implement this scenario?

I store the data in flatfiles and db. I want to implement it using =
Lucene only, but if it=A0fails, maybe I shall create a temporary=A0table =
for each query.=20



----- Original Message ----
From: mathieu <mathieu@garambrogne.net>
To: java-user@lucene.apache.org
Sent: Friday, September 19, 2008 4:34:13 PM
Subject: Re: could I implement this scenario?


Lucene is just an index. Where do you wont to store your data? in a db,
flatfiles, document with an url, in lucene?

M.

On Fri, 19 Sep 2008 16:25:27 +0800 (CST), xh sun
<wysunxiaohua@yahoo.com.cn> wrote:
> Thank you. Mathieu.
>=20
> But=A0the hits don't include the document doc02=A0 in my =
example,=A0how to
> display=A0 doc02?=A0 I don't want to search by docid. Thanks.
>=20
>=20
>=20
> ----- Original Message ----
> From: mathieu <mathieu@garambrogne.net>
> To: java-user@lucene.apache.org
> Sent: Friday, September 19, 2008 4:14:34 PM
> Subject: Re: could I implement this scenario?
>=20
>=20
>=20
> Yes. You can store data in lucene index and don't search on it : your
> simdocid.
>=20
> M.
>=20
> On Fri, 19 Sep 2008 16:00:20 +0800 (CST), xh sun
> <wysunxiaohua@yahoo.com.cn> wrote:
>> Hi all,
>>=20
>> How can I implemented=A0this scenario=A0in lucene?=20
>>=20
>> suppose every document has three fields: docid, doctext and simdocid.
>> docid is the id of the document, doctext is the content of the =
document,
>> dimdocid is the docid of a similar document with this document.=20
>> example:
>> docid=A0 =
doctext=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 =
simdocid
>> doc01=A0 ************************=A0=A0 doc04
>> doc02=A0 ************************=A0=A0 doc03
>> doc03=A0 ************************=A0=A0 doc02
>> doc04=A0 ************************=A0=A0 doc03
>> doc05=A0 ************************=A0=A0 doc04
>> doc06=A0 ************************=A0=A0 doc02
>>=20
>> During query, the index will be searched basing on field doctext. If =
the
>> hits include four documents doc01,doc03,doc04, doc05, I want to =
display
> the
>> corresponding similar documents only, that is, the three documents
>> doc04,doc02,doc03.=20
>>=20
>> Appreicate your help very much.
>>=20
>> BR,
>> Shawn
>>=20
>>=20
>>=A0 =A0 =A0=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=A0 =A0 =A0=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


     =20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 19 09:06:08 2008
Return-Path: <java-user-return-36278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8609 invoked from network); 19 Sep 2008 09:06:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2008 09:06:08 -0000
Received: (qmail 81724 invoked by uid 500); 19 Sep 2008 09:05:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81692 invoked by uid 500); 19 Sep 2008 09:05:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81681 invoked by uid 99); 19 Sep 2008 09:05:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 02:05:58 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yeshuangming@gmail.com designates 209.85.162.177 as permitted sender)
Received: from [209.85.162.177] (HELO el-out-1112.google.com) (209.85.162.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 09:04:59 +0000
Received: by el-out-1112.google.com with SMTP id p32so70629elf.14
        for <java-user@lucene.apache.org>; Fri, 19 Sep 2008 02:05:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=1cU3u0NaN+4CUrq/t2hor2exoZx6/2boo7CxoYOwjCY=;
        b=frW0tGvaT43TNkzZSERfzOWsOvLmnRTpfCFqjVeDJRLwqnoXfjZifZvrtMozsA7n0/
         7Br2/935vDmcXzP7Ks7ihyp1vEN/MSJtP64DZ1F6DJm3GsabPk2tSR1pJj1mJUACLvOr
         XlFIbHeoHCCR8JbEvsmpzlbk1zVaAb65cPTG8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=n+asvbym7JuFGBsFsf4TQ8mUsekwvWjvV3qlPxWxQViBJIJE94e7eZMu+cSo3wq0cj
         ZhEKy+MxmINK/hvBdKzIyMeHA/S3ee/o+OiIxJLZmhflE7zftoNycusfZqAy1NWhZvFv
         QFoDAaU0Wq/cL4w1USvK2Ajd2jGcoiEwNrUAI=
Received: by 10.151.108.5 with SMTP id k5mr2724009ybm.226.1221815122030;
        Fri, 19 Sep 2008 02:05:22 -0700 (PDT)
Received: by 10.151.100.9 with HTTP; Fri, 19 Sep 2008 02:05:22 -0700 (PDT)
Message-ID: <9233ccac0809190205u1cfde87eu7bab509dab7193f2@mail.gmail.com>
Date: Fri, 19 Sep 2008 17:05:22 +0800
From: "=?UTF-8?B?5Y+25Y+M5piO?=" <yeshuangming@gmail.com>
To: lucene-java <java-user@lucene.apache.org>
Subject: lucene Front-end match
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24383_24101191.1221815122077"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24383_24101191.1221815122077
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

SGksIGFsbCEKCkhvdyB0byBpbXBsZW1lbnQgRnJvbnQtZW5kIG1hdGNoIHVzZSBsdWNlbmU/ClNh
eSwgdHdvIERvY3VtZW50cyBpbiBpbmRleDoKRG9jdW1lbnQ8c3RvcmVkL3VuY29tcHJlc3NlZCxp
bmRleGVkPGZpZWxkOmFiYz4+CkRvY3VtZW50PHN0b3JlZC91bmNvbXByZXNzZWQsaW5kZXhlZDxm
aWVsZDpiY2Q+PgoKSG93IGNhbiBJIGdldCB0aGUgZmlyc3QgRG9jdW1lbnQgYnV5IHNvbWUgcXVl
cnkgc3RyaW5nIGxpa2UgImEiICwgImFiIiBvcgoiYWJjIiBidXQgbm8gImIiIGFuZCAiYmMiPwoK
QW55IGlucHV0IGlzIGFwcHJlY2lhdGUhCgotLSAKU29ycnkgZm9yIG15IEVuZ2xpc2ghISDmmI4K
UGxlYXNlIGhlbHAgbWUgY29ycmVjdCBteSBFbmdsaXNoIGV4cHJlc3Npb24gYW5kIGVycm9yIGlu
IHN5bnRheAo=
------=_Part_24383_24101191.1221815122077--

From java-user-return-36279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 19 09:11:36 2008
Return-Path: <java-user-return-36279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12374 invoked from network); 19 Sep 2008 09:11:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2008 09:11:35 -0000
Received: (qmail 86590 invoked by uid 500); 19 Sep 2008 09:11:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86551 invoked by uid 500); 19 Sep 2008 09:11:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86540 invoked by uid 99); 19 Sep 2008 09:11:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 02:11:25 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [202.165.102.86] (HELO web15806.mail.cnb.yahoo.com) (202.165.102.86)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 19 Sep 2008 09:10:23 +0000
Received: (qmail 64536 invoked by uid 60001); 19 Sep 2008 09:10:49 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com.cn;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=HMxEsHfpx7W5NSOptN6rnsECSvKGw+oNpeEA7iM13s07NDzbg0qIrtA7X4diaZnnr30GLTmo7IQI+5F2uvepYdonffUYUqQ+UuiUdW1tUgdgsSJnnU9yfLxqnceH6BW3SYp41xfaGwx9pRsIhufoA/ZFYh+GM2IkSF3EpFn0CCk=;
X-YMail-OSG: r3Fz65MVM1m72excXQpGoosX7oFNtL2ynIu3aOlVcwbZlyvIY6Y8ZUUKwFnovbwTT7j0CECiTYOAxBPRycWjCO_211_dZbvvOYWUK2FcYGSOi8zNBRU.bNiiAdJEjLU2LFpS5dIGllCODNzwKsbII8Hx
Received: from [122.225.11.252] by web15806.mail.cnb.yahoo.com via HTTP; Fri, 19 Sep 2008 17:10:48 CST
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Fri, 19 Sep 2008 17:10:48 +0800 (CST)
From: xh sun <wysunxiaohua@yahoo.com.cn>
Subject: Re: could I implement this scenario?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1298645959-1221815448=:63550"
Message-ID: <948822.63550.qm@web15806.mail.cnb.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1298645959-1221815448=:63550
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Thank you for your suggestion.=0A=0A=A0=0A----- Original Message ----=0AFro=
m: Dragan Jotanovic <Dragan.Jotanovic@DIOSPHERE.com>=0ATo: java-user@lucene=
.apache.org=0ASent: Friday, September 19, 2008 4:58:34 PM=0ASubject: RE: co=
uld I implement this scenario?=0A=0AI think it is not good idea to use luce=
ne as storage, it is just index.=0AYou could probably implement this using =
flat files and lucene.=0AYour simDocId would be stored field which you can =
retrieve from the index after search, and it could also contain the informa=
tion where on the disk is document located.=0A=0A=0A-----Original Message--=
---=0AFrom: xh sun [mailto:wysunxiaohua@yahoo.com.cn] =0ASent: Friday, Sept=
ember 19, 2008 9:44 AM=0ATo: java-user@lucene.apache.org=0ASubject: Re: cou=
ld I implement this scenario?=0A=0AI store the data in flatfiles and db. I =
want to implement it using Lucene only, but if it=A0fails, maybe I shall cr=
eate a temporary=A0table for each query. =0A=0A=0A=0A----- Original Message=
 ----=0AFrom: mathieu <mathieu@garambrogne.net>=0ATo: java-user@lucene.apac=
he.org=0ASent: Friday, September 19, 2008 4:34:13 PM=0ASubject: Re: could I=
 implement this scenario?=0A=0A=0ALucene is just an index. Where do you won=
t to store your data? in a db,=0Aflatfiles, document with an url, in lucene=
?=0A=0AM.=0A=0AOn Fri, 19 Sep 2008 16:25:27 +0800 (CST), xh sun=0A<wysunxia=
ohua@yahoo.com.cn> wrote:=0A> Thank you. Mathieu.=0A> =0A> But=A0the hits d=
on't include the document doc02=A0 in my example,=A0how to=0A> display=A0 d=
oc02?=A0 I don't want to search by docid. Thanks.=0A> =0A> =0A> =0A> ----- =
Original Message ----=0A> From: mathieu <mathieu@garambrogne.net>=0A> To: j=
ava-user@lucene.apache.org=0A> Sent: Friday, September 19, 2008 4:14:34 PM=
=0A> Subject: Re: could I implement this scenario?=0A> =0A> =0A> =0A> Yes. =
You can store data in lucene index and don't search on it : your=0A> simdoc=
id.=0A> =0A> M.=0A> =0A> On Fri, 19 Sep 2008 16:00:20 +0800 (CST), xh sun=
=0A> <wysunxiaohua@yahoo.com.cn> wrote:=0A>> Hi all,=0A>> =0A>> How can I i=
mplemented=A0this scenario=A0in lucene? =0A>> =0A>> suppose every document =
has three fields: docid, doctext and simdocid.=0A>> docid is the id of the =
document, doctext is the content of the document,=0A>> dimdocid is the doci=
d of a similar document with this document. =0A>> example:=0A>> docid=A0 do=
ctext=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 simdocid=0A>=
> doc01=A0 ************************=A0=A0 doc04=0A>> doc02=A0 *************=
***********=A0=A0 doc03=0A>> doc03=A0 ************************=A0=A0 doc02=
=0A>> doc04=A0 ************************=A0=A0 doc03=0A>> doc05=A0 *********=
***************=A0=A0 doc04=0A>> doc06=A0 ************************=A0=A0 do=
c02=0A>> =0A>> During query, the index will be searched basing on field doc=
text. If the=0A>> hits include four documents doc01,doc03,doc04, doc05, I w=
ant to display=0A> the=0A>> corresponding similar documents only, that is, =
the three documents=0A>> doc04,doc02,doc03. =0A>> =0A>> Appreicate your hel=
p very much.=0A>> =0A>> BR,=0A>> Shawn=0A>> =0A>> =0A>>=A0 =A0 =A0 =0A> =0A=
> =0A> --------------------------------------------------------------------=
-=0A> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> F=
or additional commands, e-mail: java-user-help@lucene.apache.org=0A> =0A> =
=0A>=A0 =A0 =A0 =0A=0A=0A--------------------------------------------------=
-------------------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.=
apache.org=0AFor additional commands, e-mail: java-user-help@lucene.apache.=
org=0A=0A=0A=A0 =A0 =A0 =0A=0A---------------------------------------------=
------------------------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lu=
cene.apache.org=0AFor additional commands, e-mail: java-user-help@lucene.ap=
ache.org=0A=0A=0A      
--0-1298645959-1221815448=:63550--

From java-user-return-36280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 19 09:39:50 2008
Return-Path: <java-user-return-36280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29187 invoked from network); 19 Sep 2008 09:39:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2008 09:39:50 -0000
Received: (qmail 28440 invoked by uid 500); 19 Sep 2008 09:39:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28419 invoked by uid 500); 19 Sep 2008 09:39:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28408 invoked by uid 99); 19 Sep 2008 09:39:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 02:39:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 74.125.78.25 as permitted sender)
Received: from [74.125.78.25] (HELO ey-out-2122.google.com) (74.125.78.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 09:38:38 +0000
Received: by ey-out-2122.google.com with SMTP id 6so91874eyi.53
        for <java-user@lucene.apache.org>; Fri, 19 Sep 2008 02:39:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=sUVcA5cnuckWjJHEBpObVj9CxEmJcw9Cy5FaUJFRs+M=;
        b=S/WjkSXXOgRSriP4XzD3Zi9sP9J5Hu0+ot8+0GBjvOoPm1QHcOOyaULtpovG+vjBBa
         bYLKolYy4ClHJTIZpeK6W205z+I4+10RDd9+T83cQivnQIxVWGD4KGrvZ/4r+sTkHZiW
         LYQgTFrJtXYHWzDOIYcMqoZ0tSlgXkrQ/DbHs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=ZFe+EarVMnWZ0ESlH0xm9/+V/Cd/8ezy+XXS4QEDhFKTReIPzAj4aQ/HzQsXgc+8hH
         /ODJvPTxCIortjwJTreXDjiuQIZo14tEBYIqtL82VJSAqIDUECjTSkm/VQcEziHcgpMn
         G5iXCYePon/QnllPJX+nyXjxQmAYF5Dz5DdD0=
Received: by 10.210.46.4 with SMTP id t4mr6400713ebt.179.1221817149705;
        Fri, 19 Sep 2008 02:39:09 -0700 (PDT)
Received: from kodapan.lan ( [80.70.155.150])
        by mx.google.com with ESMTPS id z33sm1215293ikz.0.2008.09.19.02.39.07
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 19 Sep 2008 02:39:09 -0700 (PDT)
Message-Id: <5FF3185E-1679-45D8-BA5E-27AC4B72AAE6@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <9233ccac0809190205u1cfde87eu7bab509dab7193f2@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: lucene Front-end match
Date: Fri, 19 Sep 2008 11:39:02 +0200
References: <9233ccac0809190205u1cfde87eu7bab509dab7193f2@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


19 sep 2008 kl. 11.05 skrev =E5=8F=B6=E5=8F=8C=E6=98=8E:

> Document<stored/uncompressed,indexed<field:abc>>
> Document<stored/uncompressed,indexed<field:bcd>>
>
> How can I get the first Document buy some query string like "a" , =20
> "ab" or
> "abc" but no "b" and "bc"?

You would create an ngram filter that create grams from the first =20
position only. Take a look at EdgeNGramTokenFilter in contrib/analyzers.


      karl



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 19 09:50:03 2008
Return-Path: <java-user-return-36281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36099 invoked from network); 19 Sep 2008 09:50:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2008 09:50:03 -0000
Received: (qmail 49015 invoked by uid 500); 19 Sep 2008 09:49:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48747 invoked by uid 500); 19 Sep 2008 09:49:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48736 invoked by uid 99); 19 Sep 2008 09:49:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 02:49:53 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 09:48:53 +0000
Received: by gxk6 with SMTP id 6so455621gxk.5
        for <java-user@lucene.apache.org>; Fri, 19 Sep 2008 02:49:23 -0700 (PDT)
Received: by 10.90.55.9 with SMTP id d9mr6637237aga.4.1221817763694;
        Fri, 19 Sep 2008 02:49:23 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id 9sm847761agc.31.2008.09.19.02.49.22
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 19 Sep 2008 02:49:22 -0700 (PDT)
Message-Id: <83F634F2-4A47-4BDD-BE2D-4D3AC7F61902@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <a206fb7e0809181613g68d882b4h2308f219ec0b5873@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Background merge hit exception
Date: Fri, 19 Sep 2008 05:49:20 -0400
References: <a206fb7e0809171324g6320551cp4c4a7613314afc01@mail.gmail.com> <631B98C8-69CE-40DC-AA17-3CDFA0270DCF@mikemccandless.com> <a206fb7e0809181613g68d882b4h2308f219ec0b5873@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


vivek sar wrote:

> Thanks Mike for the insight. I did check the stdout log and found it
> was complaining of not having enough disk space. I thought we need
> only x2 of the index size. Our index size is 10G (max) and we had 45G
> left on that parition - should it still complain of the space?

Is there a reader open on the index while optimize is running?  That  
ties up potentially another 1X.

Are you certain you're closing all previously open readers?

On Linux, because the semantics is "delete on last close", it's hard  
to detect when you have IndexReaders still open because an "ls" won't  
show the deleted files, yet, they are still consuming bytes on disk  
until the last open file handle is closed.  You can try running "lsof"  
to see which files are held open, while optimize is running?

Also, if you can call IndexWriter.setInfoStream(...) for all of the  
operations below, I can peak at it to try to see why it's using up so  
much intermediate disk space.

> Some comments/questions on other issues you raised,
>
>
> We have 2 threads that index the data in two different indexes and
> then we merge them into a master index with following call,
>
>    masterWriter.addIndexesNoOptimize(indices);
>
> Once the smaller indices have merged into the master index we delete
> the smaller indices.
>
> This process runs every 5 minutes. Master Index can grow up to 10G
> before we partition it - move it to other directory and start a new
> master index.
>
> Every hour we then optimize the master index using,
>
>       writer.optimize(optimizeSegment);    //where optimizeSegment =  
> 10

How long does that optimize take?  And what do you do with the every-5- 
minutes job while optimize is running?  Do you run it, anyway, sharing  
the same writer (ie you're calling addIndexesNoOptimize while another  
thread is running the optimize)?

>
> Here are my questions,
>
> 1) Is this process flawed in terms of performance and efficiency? What
> would you recommend?

Actually I think your approach is the right approach.
>
> 2) When you say "partial optimize" what do you mean by that?

Actually, it's what you're already doing (passing 10 to optimize).   
This means the index just has to reduce itself to <= 10 segments,  
instead of the normal 1 segment for a full optimize.

Still I find that particular merge being done somewhat odd: it was  
merging 7 segments, the first of which was immense, and the final 6  
were tiny.  It's not an efficient merge to do.  Seeing the infoStream  
output might help explain what led to that...

>
> 3) In Lucene 2.3 "segment merging is done in a background thread" -
> how does it work, ie, how does it know which segments to merge? What
> would cause this background merge exception?

The selection of segments to merge, and when, is done by the  
LogByteSizeMergePolicy, which you can swap out for your own merge  
policy (should not in general be necessary).  Once a merge is  
selected, the execution of that merge is controlled by  
ConcurrentMergeScheduler, which runs merges in background threads.   
You can also swap that out (eg for SerialMergeScheduler, which uses  
the FG thread to merging, like Lucene used to before 2.3).

I think the background merge exception is often disk full, but in  
general it can be anything that went wrong while merging.  Such  
exceptions won't corrupt your index because the merge only commits the  
changes to the index if it completes successfully.

>
> 4) Can we turn off "background merge" if I'm running the optimize
> every hour in any case? How do we turn it off?

Yes: IndexWriter.setMergeScheduler(new SerialMergeScheduler()) gets  
you back to the old (fg thread) way of running merges.  But in general  
this gets you worse net performance, unless you are already using  
multiple threads when adding documents.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 19 09:51:53 2008
Return-Path: <java-user-return-36282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36886 invoked from network); 19 Sep 2008 09:51:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2008 09:51:52 -0000
Received: (qmail 51013 invoked by uid 500); 19 Sep 2008 09:51:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50628 invoked by uid 500); 19 Sep 2008 09:51:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50617 invoked by uid 99); 19 Sep 2008 09:51:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 02:51:42 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of g.castaldi@gmail.com designates 74.125.44.30 as permitted sender)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 09:50:44 +0000
Received: by yx-out-2324.google.com with SMTP id 3so56867yxj.5
        for <java-user@lucene.apache.org>; Fri, 19 Sep 2008 02:51:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:mime-version:content-type:content-transfer-encoding
         :content-disposition:x-google-sender-auth;
        bh=4NYATJR8Aq3V1mc5NWTF61+EgCgeSr/OHO9VaPJVDAs=;
        b=s9rDRJR8kiGhPLFcXjDBjRYVySoKk6rbV0ZtDqpquLIkNqGajgobmuoCh5C57X3uvC
         1J25MpA/xAhLwi5Bv665JiqQfKECkhbdZHZI3XX8OjW17qsvizXpMi05RWdV+119IGrA
         g1eFXK0ZHure9H9f6E0vdOB7W5UqGwan2kh+o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition:x-google-sender-auth;
        b=LtGv8THGuo3MnstmARmpeVCAX8juknOUuYHeTTTKe8GRW/SoOTLI9ZRyBbDX9S1tDK
         Ry+C6ucsT0iR/AVtpRN3hmmBQebmv+XkadoO+6RK1Jb5p8mfvPRwuNYC/uN43VfRP8dp
         MwkaMV22DABQRSC8TNZm3Wbz69eETqISIJXnY=
Received: by 10.151.155.5 with SMTP id h5mr2782415ybo.241.1221817877380;
        Fri, 19 Sep 2008 02:51:17 -0700 (PDT)
Received: by 10.150.181.13 with HTTP; Fri, 19 Sep 2008 02:51:17 -0700 (PDT)
Message-ID: <c82dedc70809190251m24bdf432i7c1d052abe1a5be5@mail.gmail.com>
Date: Fri, 19 Sep 2008 11:51:17 +0200
From: "Giannandrea Castaldi" <anti_spam71@yahoo.com>
Sender: g.castaldi@gmail.com
To: java-user@lucene.apache.org
Subject: how use ranges for numeric values?
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Google-Sender-Auth: 17cc203d1a989480
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
I need to specify in my query ranges with product price. I wonder if
the only solution is padding  values with zeros. For example, if I'm
looking for price between 3$ and 10$ I must write the query in this
manner: price:[00003.00 TO 00010.00]?
Thanks.
G

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 19 10:02:25 2008
Return-Path: <java-user-return-36283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43286 invoked from network); 19 Sep 2008 10:02:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2008 10:02:25 -0000
Received: (qmail 68019 invoked by uid 500); 19 Sep 2008 10:02:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67980 invoked by uid 500); 19 Sep 2008 10:02:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67969 invoked by uid 99); 19 Sep 2008 10:02:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 03:02:14 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yeshuangming@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 10:01:15 +0000
Received: by gxk6 with SMTP id 6so462175gxk.5
        for <java-user@lucene.apache.org>; Fri, 19 Sep 2008 03:01:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=xSiPoO2Toj5+sLw9thvx6/HG9HRXgFH4jCy9wSQ81LU=;
        b=k6eQfewmZD6a04NlXVLbLAX5PTgBqIrEetGB6JHo6rmJeZGXvC8OouhvYEMERt3zz4
         KUYaIIGFPVPDtH6jLRmOw1nZ21oAyH6tAlfncdDxS5zdGgMqTgjR6EzAzLbQzhtUiMUt
         AOXSxFBm/N5ON8fcS8E6VB/MJroTS3shEh4Wo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=TtoOxyOjOkHNo1nqa4KNjkadl8r8GPmbivhXzf4xrZEpItOkHO0fumnFnSbAh/H+Mb
         oJVpkr0OKQSfSlnlbotQTnjrrAOLgCiz3glyWg5Vzo/slhO0Elzg70iw333RzRPReu4f
         c53bDO0nZZ9vwV91bDbmMkHFYc9fuoSsgF49s=
Received: by 10.151.155.21 with SMTP id h21mr2827880ybo.156.1221818507958;
        Fri, 19 Sep 2008 03:01:47 -0700 (PDT)
Received: by 10.151.100.9 with HTTP; Fri, 19 Sep 2008 03:01:47 -0700 (PDT)
Message-ID: <9233ccac0809190301m74a4755ewd97f99f28a51f58@mail.gmail.com>
Date: Fri, 19 Sep 2008 18:01:47 +0800
From: "=?UTF-8?B?5Y+25Y+M5piO?=" <yeshuangming@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene Front-end match
In-Reply-To: <5FF3185E-1679-45D8-BA5E-27AC4B72AAE6@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24723_6381716.1221818507989"
References: <9233ccac0809190205u1cfde87eu7bab509dab7193f2@mail.gmail.com>
	 <5FF3185E-1679-45D8-BA5E-27AC4B72AAE6@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24723_6381716.1221818507989
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

VGhhbmtzIQoKTm93LCBJIGp1c3QgdXNlIFF1ZXJ5IHF1ZXJ5ID0gcXAucGFyc2UoImEqIik7IGFu
ZCAgbWVldCB0aGUgbXkgcmVxdWlyZW1lbnRzLgoKQW5vdGhlciBxdWVzdGlvbjogaG93IHRvIHBh
cnNlciBxdWVyeSBzdHJpbmcgbGlrZTogICAgICAgICAgIHRpdGxlOiJUaGUKUmlnaHQgV2F5IiBB
TkQgdGV4dDpnbwpwbGVhc2Ugc2hvdyBtZSBpbiBqYXZhIGNvZGUuIHRoYW5rcy4KCjIwMDgvOS8x
OSBLYXJsIFdldHRpbiA8a2FybC53ZXR0aW5AZ21haWwuY29tPgoKPgo+IDE5IHNlcCAyMDA4IGts
LiAxMS4wNSBza3JldiDlj7blj4zmmI46Cj4KPiAgRG9jdW1lbnQ8c3RvcmVkL3VuY29tcHJlc3Nl
ZCxpbmRleGVkPGZpZWxkOmFiYz4+Cj4+IERvY3VtZW50PHN0b3JlZC91bmNvbXByZXNzZWQsaW5k
ZXhlZDxmaWVsZDpiY2Q+Pgo+Pgo+PiBIb3cgY2FuIEkgZ2V0IHRoZSBmaXJzdCBEb2N1bWVudCBi
dXkgc29tZSBxdWVyeSBzdHJpbmcgbGlrZSAiYSIgLCAiYWIiIG9yCj4+ICJhYmMiIGJ1dCBubyAi
YiIgYW5kICJiYyI/Cj4+Cj4KPiBZb3Ugd291bGQgY3JlYXRlIGFuIG5ncmFtIGZpbHRlciB0aGF0
IGNyZWF0ZSBncmFtcyBmcm9tIHRoZSBmaXJzdCBwb3NpdGlvbgo+IG9ubHkuIFRha2UgYSBsb29r
IGF0IEVkZ2VOR3JhbVRva2VuRmlsdGVyIGluIGNvbnRyaWIvYW5hbHl6ZXJzLgo+Cj4KPiAgICAg
a2FybAo+Cj4KPgo+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEt
dXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+IEZvciBhZGRpdGlvbmFsIGNvbW1h
bmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4KPgoKCi0tIApT
b3JyeSBmb3IgbXkgRW5nbGlzaCEhIOaYjgpQbGVhc2UgaGVscCBtZSBjb3JyZWN0IG15IEVuZ2xp
c2ggZXhwcmVzc2lvbiBhbmQgZXJyb3IgaW4gc3ludGF4Cg==
------=_Part_24723_6381716.1221818507989--

From java-user-return-36284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 19 10:48:58 2008
Return-Path: <java-user-return-36284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71465 invoked from network); 19 Sep 2008 10:48:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2008 10:48:58 -0000
Received: (qmail 43481 invoked by uid 500); 19 Sep 2008 10:48:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43449 invoked by uid 500); 19 Sep 2008 10:48:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43437 invoked by uid 99); 19 Sep 2008 10:48:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 03:48:45 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dckorah@gmail.com designates 209.85.142.191 as permitted sender)
Received: from [209.85.142.191] (HELO ti-out-0910.google.com) (209.85.142.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 10:47:43 +0000
Received: by ti-out-0910.google.com with SMTP id b8so240273tic.11
        for <java-user@lucene.apache.org>; Fri, 19 Sep 2008 03:47:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=02DBqduR5gTE52wwHnZBwg4hf2FNn4xgH+DABB6lDa4=;
        b=WKfy90ktBMCR2CbwDrTJD6QZPaBObmj8NwnLO+u5FCwKjXyn/hWcMjEdHI6l9GkIQa
         kTT2S2SqevL0BHfsWM4dIUtu7248rI+4EJ+q2MGePV+TYB3rIpLZ3R6/W5U7X3ynsHD+
         RkqhayWtOUaB4RWHOFodo+08ZohB++0KKU2Ls=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=iYBAgtZxs7G+H7BG9pFljXe7G0mvwYEyyZ5+//CWayUFntGYEXJTG2X6B2EXn1hRy4
         1fxKj2muATWcFmdzv377jS1nmYBoZDRmRVWbnzDQF38HeEq3TvxW6nSLXTRCo72W6MET
         TDYY+V+tdOMmPvBWY0KOdzJQgzusoqE4GI0hk=
Received: by 10.110.49.2 with SMTP id w2mr7006194tiw.28.1221821278105;
        Fri, 19 Sep 2008 03:47:58 -0700 (PDT)
Received: by 10.110.11.16 with HTTP; Fri, 19 Sep 2008 03:47:58 -0700 (PDT)
Message-ID: <926b35870809190347n52e5c245m87ee1852011a5fb3@mail.gmail.com>
Date: Fri, 19 Sep 2008 11:47:58 +0100
From: "Dino Korah" <dckorah@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher.search
In-Reply-To: <48D3537F.8020401@nuix.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_35268_2826030.1221821278084"
References: <682882.35954.qm@web50312.mail.re2.yahoo.com>
	 <48CF2124.3090501@nuix.com>
	 <Pine.LNX.4.62.0809161143560.12858@radix.cryptio.net>
	 <48D075DD.5050407@nuix.com>
	 <Pine.LNX.4.62.0809171135050.2301@radix.cryptio.net>
	 <48D3537F.8020401@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_35268_2826030.1221821278084
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

SSByZWFsbHkgdGhpbmsgSGl0cyBpcyBkZWZpbml0ZWx5IGEgbmljZSB1dGlsaXR5IGNsYXNzLCB3
aGVuIGl0IGNvbWVzIHRvIEdVSQpyZXN1bHRzIHByZXNlbnRhdGlvbi4KSWYgd2UgYXJlIHRvIHVz
ZSBvdXIgb3duIGNsYXNzIGZvciB0aGlzIHB1cnBvc2UsIGl0IHdvdWxkbid0IGJlIG11Y2gKZGlm
ZmVyZW50IGZyb20gSGl0cy4gSXRzIGEgc2hhbWUgdGhhdCB3ZSBhcmUgZHJvb3BpbmcgaXQuIQoK
MjAwOC85LzE5IERhbmllbCBOb2xsIDxkYW5pZWxAbnVpeC5jb20+Cgo+IENocmlzIEhvc3RldHRl
ciB3cm90ZToKPgo+Pgo+PiBCdXQgaXQgZG9uJ3RyZWFsbHkgc2VlIGhvdyBpdCBjaGFnbmVzIGFu
eXRoaW5nIC4uLiBpZiB5b3VyIGdvYWwgaXMgdG8KPj4gcGVyZm9ybSBhbiBvcGVyYXRpbmcgb24g
ZXZlcnkgcmVzdWx0IGluIGEgc2V0LCB3aHkgYXJlIHlvdSB1c2luZwo+PiBUb3BEb2NTQ29sbGVj
dG9yPyAgd2h5IG5vdCB3cml0ZSBhIEhpdENvbGxlY3RvciBhbmQgcGVyZm9ybSB5b3VyIG9wZXJh
dGlvbgo+PiBpbiB0aGUgY29sbGVjdCBtZXRob2Q/Cj4+Cj4KPiBXZSdyZSBub3QgdXNpbmcgVG9w
RG9jQ29sbGVjdG9yIHJpZ2h0IG5vdywgYXMgd2UncmUgc3RpbGwgdXNpbmcgSGl0cy4KPiBQZXJm
b3JtaW5nIHNvbWUgb3BlcmF0aW9uIG92ZXIgZXZlcnkgcmVzdWx0IGlzIGp1c3Qgb25lIHVzZSBj
YXNlLiAgV2UgYWxzbwo+IGhhdmUgdG8gZGVhbCB3aXRoIHRoZSB1c2VyIHNjcm9sbGluZyB0aGUg
ZGlzcGxheS4gIEN1cnJlbnRseSB0aGlzIHdvcmtzCj4gYWNjZXB0YWJseSB1c2luZyB0aGUgc2Ft
ZSBqYXZhLnV0aWwuTGlzdCBtb2RlbCBmb3IgYm90aCBjYXNlcy4gU29tZXRpbWVzIGEKPiBidWxr
IG9wZXJhdGlvbiBuZWVkcyB0byBpdGVyYXRlIG92ZXIgdGhlIGl0ZW1zIG1vcmUgdGhhbiBvbmNl
LCB3aGljaCBtYWtlcwo+IGl0IHRyaWNraWVyIHRvIGludmVydCAoSSBndWVzcyB3ZSdkIGhhdmUg
dG8gcGVyZm9ybSB0aGUgc2VhcmNoIHR3aWNlLiAgQW5kCj4gdGhlbiBpZiB0aGUgcmVzdWx0cyBj
aGFuZ2UgYmV0d2VlbiB0aGUgdHdvIGV4ZWN1dGlvbnMgb3RoZXIgcHJvYmxlbXMgaGFwcGVuLgo+
ICBTb21lIG9mIHRoaXMgd2UgY2FuIGdldCBhcm91bmQgYnkgY2FjaGluZyB0aGUgYml0c2V0cyBm
b3IgZmlsdGVycyB3aGljaCBhcmUKPiB0aGUgb25seSB0aGluZyB3aGljaCBjaGFuZ2UuKQo+Cj4g
IEkgZG9uJ3QgZGlzYWdyZWUgd2l0aCB5b3UsIGJ1dCBpcyB0aGVyZSBhIHJlYXNvbiB0byBoYXZl
IHRoZSBlbnRpcmUgc2V0IGluCj4+IG1lbW9yeSBhbGwgYXQgb25jZSByZWdhcmRsZXNzIG9mIGl0
J3Mgc2l6ZT8KPj4KPgo+IE5vLi4uIHRoYXQncyB3aHkgbWF5YmUgSSB0aG91Z2h0IGtlZXBpbmcg
dGhlIHJlc3Qgb24gZGlzayB3b3VsZCBiZSBhIHBsYW4sCj4gd2hldGhlciBpdCdzIGRvbmUgYXMg
YSBiaXRzZXQgKGFuZCByZS1leGVjdXRlIGEgdHJpdmlhbCBzZWFyY2ggd2l0aCB0aGUKPiBjYWNo
ZWQgYml0c2V0KSBvciBhIGxpc3Qgb2YgaW50ZWdlcnMuCj4KPiAgQXQgdGhlIGVuZCBvZiB0aGUg
ZGF5OiBwZW9wbGUgc3dpdGNoaW5nIHRvIHVzaW5nIFRvcERvY3NDb2xsZWN0b3IgaW5zdGVhZAo+
PiBvZiBIaXRzIGFyZSBubyB3b3JzZSBvZmYgd2hlbiB0cnlpbmcgdG8gaXRlcmF0ZSBvdmVyIGV2
ZXJ5IHJlc3VsdCBpbiBhCj4+IGdpbm9ybW91cyByZXN1bHQgc2V0LCB0aGV5J3JlIGp1c3QgaGF2
ZSB0byBkZWZpbmUgImdpbm9ybW91cyIgZm9yCj4+IHRoZW1zZWx2ZXMsIGFuZCB0aGUgZ2V0IGFu
IE9PTSByaWdodCBhd2F5IGluc3RlYWQgb2Ygb25jZSB0aGV5IGl0ZXJhdGUgdXAgdG8KPj4gdGhh
dCBtYW55Lgo+Pgo+Cj4gVGhpcyBpcyBlZmZlY3RpdmVseSBvdXIgcHJvYmxlbSwgaWYgaXQgZmFp
bHMgZmFzdCB0aGUgdXNlciBqdXN0IHNheXMgIndlbGwKPiB3aHkgY291bGRuJ3QgSSBldmVuIHNl
ZSB0aGUgZmlyc3QgMTAgcmVzdWx0cz8iICBJdCdzIG11Y2ggYmV0dGVyIHRvIGZhaWwKPiB3aXRo
IGFuIE9PTSBsYXRlciB3aGVuIHJldHJpZXZpbmcgcmVzdWx0IHNvbWVCaWdWYWx1ZSArIDEuCj4K
PiBBIGN1c3RvbSBIaXRDb2xsZWN0b3Igd2lsbCBkZWZpbml0ZWx5IGdldCBhcm91bmQgdGhhdCwg
cmVhbGx5IEknbSBqdXN0Cj4gc2F5aW5nIGl0J3MgYSBzaGFtZSB0byBsb3NlIGEgcGFydCBvZiBM
dWNlbmUgd2hpY2ggd29ya3MgZm9yIHRoZSBjYXNlIGZvcgo+IHdoaWNoIGl0IHdhcyBkZXNpZ25l
ZCwganVzdCBiZWNhdXNlIHNvbWVvbmUgZGVlbWVkIHRoYXQgbm9ib2R5IG5lZWRlZCBpdCBmb3IK
PiB0aGF0IGNhc2UuICBUaGUgZmlyc3QgY29tbWVudCBvbiB0aGUgYnVnIHJlcG9ydCBmb3IgZGVw
cmVjYXRpbmcgaXQgZXZlbiBzYXlzCj4gc29tZXRoaW5nIGxpa2UgIml0IHdhcyBvcmlnaW5hbGx5
IGRlc2lnbmVkIGZvciBHVUkgYnV0IHdhcyBhbnlvbmUgZXZlbiB1c2luZwo+IGl0IGZvciB0aGF0
PyIgIFNvbWUgb2YgdXMgb2J2aW91c2x5IHdlcmUuCj4KPiBEYW5pZWwKPgo+Cj4gLS0KPiBEYW5p
ZWwgTm9sbCAgICAgICAgICAgICAgICAgICAgICAgICAgICBGb3JlbnNpYyBhbmQgZURpc2NvdmVy
eSBTb2Z0d2FyZQo+IFNlbmlvciBEZXZlbG9wZXIgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBUaGUgd29ybGQncyBtb3N0IGFkdmFuY2VkCj4gTnVpeCAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsIGRhdGEgYW5hbHlzaXMKPiBodHRwOi8vbnVp
eC5jb20vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmQgZURpc2NvdmVyeSBzb2Z0
d2FyZQo+Cj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2Vy
LXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMs
IGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcKPgo+CgoKLS0gCmQgaSBu
IG8gayBvIHIgYSBoClRlbDogKzQ0IDc5NTYgNjYgNTIgODMKLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tCjUxwrAyMSc1MC41OTAyIk4gMMKwNicxMS44MTE2IlcK
------=_Part_35268_2826030.1221821278084--

From java-user-return-36285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 19 10:51:08 2008
Return-Path: <java-user-return-36285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72821 invoked from network); 19 Sep 2008 10:51:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2008 10:51:08 -0000
Received: (qmail 46288 invoked by uid 500); 19 Sep 2008 10:50:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46109 invoked by uid 500); 19 Sep 2008 10:50:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46098 invoked by uid 99); 19 Sep 2008 10:50:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 03:50:56 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 10:49:56 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KgdZF-0002E7-0r
	for java-user@lucene.apache.org; Fri, 19 Sep 2008 03:50:29 -0700
Message-ID: <19570188.post@talk.nabble.com>
Date: Fri, 19 Sep 2008 03:50:29 -0700 (PDT)
From: Konstantyn Smirnov <injecteer@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: WildCardQuery and TooManyClauses
In-Reply-To: <19557943.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: injecteer@yahoo.com
References: <b8eccf4d0804100553v4c0d8809nd961028ea0d21a79@mail.gmail.com> <CC2671C08F06704ABFD37ED1EA09AA564A2A6F@birexchange.BIRPLAZA.local> <19555644.post@talk.nabble.com> <DC9A3A44-0A50-4496-A399-F66143500324@mikemccandless.com> <19557943.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org




Konstantyn Smirnov wrote:
> 
> So, how can I plug the WildcardFilter in, to prevent TooManyClauses? Are
> there other ways, than using the trunk? 
> 

Now I ended up in overriding also QueryParser.getPrefixQuery() method, using
ConstantScoreQuery and PrefixFilter. MaxClauseCountExc is gone, but is it
the right way?
-- 
View this message in context: http://www.nabble.com/WildCardQuery-and-TooManyClauses-tp16610177p19570188.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 19 10:56:50 2008
Return-Path: <java-user-return-36286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76865 invoked from network); 19 Sep 2008 10:56:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2008 10:56:50 -0000
Received: (qmail 58194 invoked by uid 500); 19 Sep 2008 10:56:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57909 invoked by uid 500); 19 Sep 2008 10:56:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57898 invoked by uid 99); 19 Sep 2008 10:56:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 03:56:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 10:55:39 +0000
Received: by yx-out-2324.google.com with SMTP id 3so59301yxj.5
        for <java-user@lucene.apache.org>; Fri, 19 Sep 2008 03:56:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=uPbxu+KOMtDhp2z3vIheNzWjWfkSDhHOSJBMqSjiLTg=;
        b=s+XySmEwqaDAkVLjoMees3Mvzc9K/fs7+J27rNxq7dRdxdizGikY3MWkXmnzfyxbdR
         DBOmuBhMgzr+XbGvCz3xPMFsXWqxsLKo5TqlxKSUIX3dcrl2k6NAqLCEJTz+NgQ4us6j
         u5ayblLhtu8xtculAsr/gseQnLrYM2ObfOwSo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=R2Ttd91gUUSHf3Ja4nE1eM9qL35eP2Mbh3OgV/vB/AJ99wSkYwKwF+f0Jomy2HPDoU
         k/j3ZVsLEp84OPu+I4jMUINzHozx4dZw393MXXFOiThQE7TntKRwl1Ik8tigk1rvJwu9
         v8Z4ahLPOde/1YokvMvS68gfElxdwGQkHNLkc=
Received: by 10.100.229.14 with SMTP id b14mr6719890anh.43.1221821771854;
        Fri, 19 Sep 2008 03:56:11 -0700 (PDT)
Received: by 10.100.132.7 with HTTP; Fri, 19 Sep 2008 03:56:11 -0700 (PDT)
Message-ID: <8c4e68610809190356y692e19ebmfae97316df9f54c7@mail.gmail.com>
Date: Fri, 19 Sep 2008 11:56:11 +0100
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how use ranges for numeric values?
In-Reply-To: <c82dedc70809190251m24bdf432i7c1d052abe1a5be5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <c82dedc70809190251m24bdf432i7c1d052abe1a5be5@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi


The comparison is on strings, so, yes, you do have to pad your values.


--
Ian.


On Fri, Sep 19, 2008 at 10:51 AM, Giannandrea Castaldi
<anti_spam71@yahoo.com> wrote:
> Hi,
> I need to specify in my query ranges with product price. I wonder if
> the only solution is padding  values with zeros. For example, if I'm
> looking for price between 3$ and 10$ I must write the query in this
> manner: price:[00003.00 TO 00010.00]?
> Thanks.
> G

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 19 11:44:06 2008
Return-Path: <java-user-return-36287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1668 invoked from network); 19 Sep 2008 11:44:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2008 11:44:06 -0000
Received: (qmail 37578 invoked by uid 500); 19 Sep 2008 11:43:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37547 invoked by uid 500); 19 Sep 2008 11:43:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37493 invoked by uid 99); 19 Sep 2008 11:43:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 04:43:51 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of alexander.aristov@gmail.com designates 209.85.200.170 as permitted sender)
Received: from [209.85.200.170] (HELO wf-out-1314.google.com) (209.85.200.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 11:42:52 +0000
Received: by wf-out-1314.google.com with SMTP id 28so441436wfc.20
        for <java-user@lucene.apache.org>; Fri, 19 Sep 2008 04:43:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=zY1HzXVdOwIRcsJe6BKHVogMvMwawc3dtX6ifEOcnw4=;
        b=thg2dBVlsdMvobhX3Bo9r+xFGb6/xttx5vGuagEyTIjqZkBpJCoha7VL6uUWdvvjQ/
         6HnUWXdVokm5mvDme9roRVEOE5pOAEttTGiO4zp63WFI0nX39MWP3d1g1LNzdvJAepoy
         bbBA6V8wYfW5bwYjwbjhAF50Rtg3vf7Adc3kA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=jBiqmgQ/7lZMiBNFYNhKIhnxIpjaaPPuVIYUKQof4tb3q0RYtOLgy6533ZFcVH06gW
         t/mbHRuqYmNxSDs+MvUnQAVc6Kq74VZCmZuJCUrrpxrLTCA97IOlt2vRfIrK/s6X2UGe
         BQzPabg/0M2NzwwuFyuGXUYjQ3MPee2fCwEcU=
Received: by 10.142.207.8 with SMTP id e8mr1941183wfg.195.1221824605517;
        Fri, 19 Sep 2008 04:43:25 -0700 (PDT)
Received: by 10.142.252.20 with HTTP; Fri, 19 Sep 2008 04:43:25 -0700 (PDT)
Message-ID: <11975c90809190443t3bde3074v366e81052d852841@mail.gmail.com>
Date: Fri, 19 Sep 2008 15:43:25 +0400
From: "Alexander Aristov" <alexander.aristov@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using separate index for each user
In-Reply-To: <399F19DA-B2AA-4FAB-A4E6-4570304EFD4A@findwise.se>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12542_30709347.1221824605501"
References: <399F19DA-B2AA-4FAB-A4E6-4570304EFD4A@findwise.se>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_12542_30709347.1221824605501
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

IF you create a field in the index which would hold username  then you can
create search queries to reject entries which don;t belong to the user?

it's much efficient

Alexander


2008/9/16 Tobias Larsson Hult <tobias.larsson.hult@findwise.se>

> Hi,
>
> We're thinking of using Lucene to integrate search in a backup service
> application. The background is that we have a bunch of users using a backup
> service, and we want them to be able to search their own, and only their
> own, backups.
>
> The total amount of data that's being backed up is very large (size in
> terabyte). Even though the index will probably be smaller due to only
> indexing relevant fields, it is still to much to incorporate in one index.
> But since a user will only search in his/her own files we're thinking of
> creating one index for each user. There will be a lot of indexes of course
> but each index will not span to more than a couple of gigabytes at the most.
>
> So when a user searches or adds new content to the backup we will open up
> his/her index and to a search/update in that particular index. That way,
> each query/update should not be so performance intense.
>
> Does this sound like a reasonable solution?  Of course this means creating
> a lot of IndexReaders/Writers but I prefer that to searching in a huge index
> everytime when a user only wants to search in a slice of the total index.
>
> Best Regards,
> Tobias Larsson Hult
>
>


-- 
Best Regards
Alexander Aristov

------=_Part_12542_30709347.1221824605501--

From java-user-return-36288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 19 12:12:35 2008
Return-Path: <java-user-return-36288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18583 invoked from network); 19 Sep 2008 12:12:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2008 12:12:35 -0000
Received: (qmail 81885 invoked by uid 500); 19 Sep 2008 12:12:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80865 invoked by uid 500); 19 Sep 2008 12:12:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80854 invoked by uid 99); 19 Sep 2008 12:12:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 05:12:25 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.134.186] (HELO mu-out-0910.google.com) (209.85.134.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 12:11:25 +0000
Received: by mu-out-0910.google.com with SMTP id i10so327648mue.5
        for <java-user@lucene.apache.org>; Fri, 19 Sep 2008 05:11:55 -0700 (PDT)
Received: by 10.103.208.15 with SMTP id k15mr3947210muq.84.1221826315691;
        Fri, 19 Sep 2008 05:11:55 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id e8sm4256798muf.6.2008.09.19.05.11.52
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 19 Sep 2008 05:11:54 -0700 (PDT)
Message-Id: <384BE9CD-54D7-4D4B-B7D7-8984FA61C965@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <ba72f77f0809111847t4009731dge3e393e0f6c64d37@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Case Sensitivity
Date: Fri, 19 Sep 2008 08:11:49 -0400
References: <72692.29360.qm@web50308.mail.re2.yahoo.com> <663A313E-D32D-411B-AA7F-B713BB359A3F@mikemccandless.com> <c68e39170808281050k6bc0481bh8ff3ca444454d331@mail.gmail.com> <32FF3321-E20B-4021-8576-7D50F9626637@mikemccandless.com> <ba72f77f0809111847t4009731dge3e393e0f6c64d37@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Anthony Urso wrote:

> On Thu, Aug 28, 2008 at 11:16 AM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>>
>> Yonik Seeley wrote:
>>>
>>> I wasn't originally going to add a Field.Index at all for omitNorms,
>>> but Doug suggested it.
>>> The problem with this type-safe way of doing things is the
>>> combinatorial explosion.
>>
>> Yeah I realize that.  Now that we have omitTF as an option we could  
>> really
>> go crazy ;)
>>
>> I figured since we already have NOT_ANALYZED_NO_NORMS we may as  
>> well round
>> it out with ANALYZED_NO_NORMS, and then stop there.  Plus, people  
>> have been
>> surprised that you could do ANALYZED_NO_NORMS, yet it is useful.
>
> Why not make this flag field into a bitmap?

I think that makes sense, at some point in the future (when we clean  
up Fieldable/AbstractField/Field?).  This way you can OR together  
things like NORMS/NO_NORMS, ANALYZED/NOT_ANALYZED, INCLUDE_TF/OMIT_TF,  
etc.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 19 12:14:51 2008
Return-Path: <java-user-return-36289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21445 invoked from network); 19 Sep 2008 12:14:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2008 12:14:49 -0000
Received: (qmail 87840 invoked by uid 500); 19 Sep 2008 12:14:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87801 invoked by uid 500); 19 Sep 2008 12:14:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87772 invoked by uid 99); 19 Sep 2008 12:14:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 05:14:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [193.12.6.34] (HELO msgint02.mogul.com) (193.12.6.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 12:13:35 +0000
Received: from msgint02.mogul.com ([172.17.1.7]) by msgint02.mogul.com
 ([172.17.1.7]) with mapi; Fri, 19 Sep 2008 14:14:53 +0200
From: =?iso-8859-1?Q?Jimi_Hulleg=E5rd?= <jimi.hullegard@mogul.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 19 Sep 2008 14:14:49 +0200
Subject: RE: Using separate index for each user
Thread-Topic: Using separate index for each user
Thread-Index: AckaTS+Il2+v6aCBTyyfw1ZMQxV90QAAt9Bw
Message-ID: <D8E6BD3AD2634843B58AFF6A94FE246202D7AEB9E1@msgint02.mogul.com>
In-Reply-To: <11975c90809190443t3bde3074v366e81052d852841@mail.gmail.com>
Accept-Language: sv-SE
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: sv-SE
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Well, if the total size of the relevant data is to big to fit in one single=
 index, then simply adding the username as a field would not solve the orig=
inal problem.

But what if you combine the two alternaties? Lets say that you can find a w=
ay to divide the users in a evenly distributed way based on their user name=
s, for example every user with a username that starts with "A" gets one ind=
ex, the ones that start with "B" gets another index, etc etc. Or even those=
 that start with any of the letters "A" to "D" gets one index, etc. That wa=
y you can make each index size be of reasonable size, and still don't end u=
p with thousands of separate indexes. And since you know which index to sea=
rch in based on the username, you don't need any kind of distributed search=
.
And then you should ofcourse add the username as a field, so that each sear=
ch is filtered to only that users data.

/Jimi

mogul | jimi hulleg=E5rd | system developer | hudiksvallsgatan 4, 113 30 st=
ockholm sweden | +46 8 506 66 172 | +46 765 27 19 55 | jimi.hullegard@mogul=
.com | www.mogul.com


> -----Original Message-----
> From: Alexander Aristov [mailto:alexander.aristov@gmail.com]
> Sent: den 19 september 2008 13:43
> To: java-user@lucene.apache.org
> Subject: Re: Using separate index for each user
>
> IF you create a field in the index which would hold username
> then you can
> create search queries to reject entries which don;t belong to
> the user?
>
> it's much efficient
>
> Alexander
>
>
> 2008/9/16 Tobias Larsson Hult <tobias.larsson.hult@findwise.se>
>
> > Hi,
> >
> > We're thinking of using Lucene to integrate search in a
> backup service
> > application. The background is that we have a bunch of
> users using a backup
> > service, and we want them to be able to search their own,
> and only their
> > own, backups.
> >
> > The total amount of data that's being backed up is very
> large (size in
> > terabyte). Even though the index will probably be smaller
> due to only
> > indexing relevant fields, it is still to much to
> incorporate in one index.
> > But since a user will only search in his/her own files
> we're thinking of
> > creating one index for each user. There will be a lot of
> indexes of course
> > but each index will not span to more than a couple of
> gigabytes at the most.
> >
> > So when a user searches or adds new content to the backup
> we will open up
> > his/her index and to a search/update in that particular
> index. That way,
> > each query/update should not be so performance intense.
> >
> > Does this sound like a reasonable solution?  Of course this
> means creating
> > a lot of IndexReaders/Writers but I prefer that to
> searching in a huge index
> > everytime when a user only wants to search in a slice of
> the total index.
> >
> > Best Regards,
> > Tobias Larsson Hult
> >
> >
>
>
> --
> Best Regards
> Alexander Aristov
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 19 12:22:11 2008
Return-Path: <java-user-return-36290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32337 invoked from network); 19 Sep 2008 12:22:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2008 12:22:11 -0000
Received: (qmail 212 invoked by uid 500); 19 Sep 2008 12:22:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 185 invoked by uid 500); 19 Sep 2008 12:22:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 174 invoked by uid 99); 19 Sep 2008 12:22:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 05:22:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 12:21:00 +0000
Received: from [192.168.0.220] ([81.219.54.251])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id m8JCKc607234
	for <java-user@lucene.apache.org>; Fri, 19 Sep 2008 07:20:39 -0500
Message-ID: <48D3990B.9020300@getopt.org>
Date: Fri, 19 Sep 2008 14:20:27 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Case Sensitivity
References: <72692.29360.qm@web50308.mail.re2.yahoo.com> <663A313E-D32D-411B-AA7F-B713BB359A3F@mikemccandless.com> <c68e39170808281050k6bc0481bh8ff3ca444454d331@mail.gmail.com> <32FF3321-E20B-4021-8576-7D50F9626637@mikemccandless.com> <ba72f77f0809111847t4009731dge3e393e0f6c64d37@mail.gmail.com> <384BE9CD-54D7-4D4B-B7D7-8984FA61C965@mikemccandless.com>
In-Reply-To: <384BE9CD-54D7-4D4B-B7D7-8984FA61C965@mikemccandless.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Michael McCandless wrote:
> 
> Anthony Urso wrote:
> 
>> On Thu, Aug 28, 2008 at 11:16 AM, Michael McCandless
>> <lucene@mikemccandless.com> wrote:
>>>
>>> Yonik Seeley wrote:
>>>>
>>>> I wasn't originally going to add a Field.Index at all for omitNorms,
>>>> but Doug suggested it.
>>>> The problem with this type-safe way of doing things is the
>>>> combinatorial explosion.
>>>
>>> Yeah I realize that.  Now that we have omitTF as an option we could 
>>> really
>>> go crazy ;)
>>>
>>> I figured since we already have NOT_ANALYZED_NO_NORMS we may as well 
>>> round
>>> it out with ANALYZED_NO_NORMS, and then stop there.  Plus, people 
>>> have been
>>> surprised that you could do ANALYZED_NO_NORMS, yet it is useful.
>>
>> Why not make this flag field into a bitmap?
> 
> I think that makes sense, at some point in the future (when we clean up 
> Fieldable/AbstractField/Field?).  This way you can OR together things 
> like NORMS/NO_NORMS, ANALYZED/NOT_ANALYZED, INCLUDE_TF/OMIT_TF, etc.

+1 on that. AFAIR the original motivation for these type-safe 
enumerations was that some combination of flags are invalid / 
unsupported, and then you would discover it only at runtime. But the 
problems with this approach seem to outweigh the benefits ...

Perhaps we could provide static methods on Fieldable that test the 
validity of flag combinations with particular version of Lucene?

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 19 13:01:47 2008
Return-Path: <java-user-return-36291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57416 invoked from network); 19 Sep 2008 13:01:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2008 13:01:47 -0000
Received: (qmail 50335 invoked by uid 500); 19 Sep 2008 13:01:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50306 invoked by uid 500); 19 Sep 2008 13:01:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50294 invoked by uid 99); 19 Sep 2008 13:01:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 06:01:36 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of umesh.iitk@gmail.com designates 209.85.142.185 as permitted sender)
Received: from [209.85.142.185] (HELO ti-out-0910.google.com) (209.85.142.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 13:00:37 +0000
Received: by ti-out-0910.google.com with SMTP id b8so269906tic.11
        for <java-user@lucene.apache.org>; Fri, 19 Sep 2008 06:00:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=XtwuIvNYMM8vHByZjGODP4ZPhkEB4TqIJUvaRUSX+lQ=;
        b=ukk31PCLiDgqB+zVVt5wl8Mszy4uD1Hc1Qn17xfOc+9dPhMaGCH8GHo7FQOEN862it
         x0Emd8KZDnHnI65/vcBOAXZFz0EEo+zfaZNEZaUmydI8o31okHaM8ERZz6oceFYivbOo
         BLGLeheCqXSL76p0BTazRQSHphPKiL7LHxODg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=IWfGtseXqIkDoviFDhUW5Fj/84QTPb7/IgL6WzZYd0Y66QT3Enc7RKK/tI8DNyJzWe
         +MzFlkBujSOq2FWkQxrTs8TjEqtcm7qectH0Petp1gEPkM7hypUU+EzsJnjJME/eS1yC
         0zn37cACzhi6CGcK/0JLgqYsVJblBa5PkPxNE=
Received: by 10.110.39.20 with SMTP id m20mr25652tim.41.1221829251655;
        Fri, 19 Sep 2008 06:00:51 -0700 (PDT)
Received: by 10.110.43.10 with HTTP; Fri, 19 Sep 2008 06:00:51 -0700 (PDT)
Message-ID: <ea1074540809190600y24598fcfq7555a950cea197d5@mail.gmail.com>
Date: Fri, 19 Sep 2008 18:30:51 +0530
From: "Umesh Prasad" <umesh.iitk@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how use ranges for numeric values?
In-Reply-To: <8c4e68610809190356y692e19ebmfae97316df9f54c7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_50356_3574677.1221829251668"
References: <c82dedc70809190251m24bdf432i7c1d052abe1a5be5@mail.gmail.com>
	 <8c4e68610809190356y692e19ebmfae97316df9f54c7@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_50356_3574677.1221829251668
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
   NumberTools provides method longToString(long l) which pads the values.
It can be indexed and range search like normal queries.

Slight issue is when you search view the index in Luke because the numbers
are hexadecimal notation and so not easily understandable. Hence you may
want to store the original prices also in the index. Handy for debugging.

Similarly in search time, use longToString to get hexadecimal coded values
for prices and make a range query encoded values.

-- 
Thanks
Umesh




On Fri, Sep 19, 2008 at 4:26 PM, Ian Lea <ian.lea@gmail.com> wrote:

> Hi
>
>
> The comparison is on strings, so, yes, you do have to pad your values.
>
>
> --
> Ian.
>
>
> On Fri, Sep 19, 2008 at 10:51 AM, Giannandrea Castaldi
> <anti_spam71@yahoo.com> wrote:
> > Hi,
> > I need to specify in my query ranges with product price. I wonder if
> > the only solution is padding  values with zeros. For example, if I'm
> > looking for price between 3$ and 10$ I must write the query in this
> > manner: price:[00003.00 TO 00010.00]?
> > Thanks.
> > G
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Thanking you

Regards
Umesh Prasad

------=_Part_50356_3574677.1221829251668--

From java-user-return-36292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 19 13:35:21 2008
Return-Path: <java-user-return-36292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79180 invoked from network); 19 Sep 2008 13:35:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2008 13:35:21 -0000
Received: (qmail 7932 invoked by uid 500); 19 Sep 2008 13:35:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7895 invoked by uid 500); 19 Sep 2008 13:35:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7884 invoked by uid 99); 19 Sep 2008 13:35:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 06:35:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.198.230 as permitted sender)
Received: from [209.85.198.230] (HELO rv-out-0506.google.com) (209.85.198.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 13:34:11 +0000
Received: by rv-out-0506.google.com with SMTP id f6so404566rvb.5
        for <java-user@lucene.apache.org>; Fri, 19 Sep 2008 06:34:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=Vf4ubwztNGRgzi6j7fKhU53bw+72fJKrXCk81yIj1oU=;
        b=HOcZ4eVkmDBkYk0FsxnUUx/ttMNKSv1nwxzJvLgUxmtrcECqZAmj+PEDp4OQz/mMVD
         iu0YFN63YlTH/pIT2XocIEvys2c37VNNPwSb+UvO7/inEjqfAQBlLQPB6RG/XHGxiOLU
         mb6hSWql57GB2g1gNHoCR+/D/52Fiv9lnGJeE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=YutOpjDIVcksCiVS6HOe8Zw0RFG7I9NTCATBNlUvo44MlpttxpYXoLyr8bv54eLv7D
         jtHb6JpWWzIDHvdMfbYZWDY1aeGVGmQ7pK+vwqA1O56qImqcF/qgJ8jfk5WZdKRl4Jbd
         eXQ3pFKlnhQ1ynTUvtGJ2rJPM6ezXBLVxPE0I=
Received: by 10.141.37.8 with SMTP id p8mr23228rvj.256.1221831274691;
        Fri, 19 Sep 2008 06:34:34 -0700 (PDT)
Received: by 10.141.68.16 with HTTP; Fri, 19 Sep 2008 06:34:34 -0700 (PDT)
Message-ID: <5e76f3840809190634v7399c10cva44c08a333287a7@mail.gmail.com>
Date: Fri, 19 Sep 2008 09:34:34 -0400
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: could I implement this scenario?
In-Reply-To: <ED024AB4B57C8543A3425147237C45F8451439@MAIL.DIOSPHERE.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <236180.44966.qm@web15806.mail.cnb.yahoo.com>
	 <ED024AB4B57C8543A3425147237C45F8451439@MAIL.DIOSPHERE.com>
X-Virus-Checked: Checked by ClamAV on apache.org

> I think it is not good idea to use lucene as storage, it is just index.

I strongly disagree with this position.

To qualify my disagreement: yes, you should not use Lucene as your
primary storage for your data in your organization.

But, for a particular application, taking content from your primary
storage system (SQL database, filesystem files, etc) and - in the
context of an end-user application - both indexing and storing the
content is a good solution. The stored content in Lucene if
effectively a cache.

Advantages:
- faster (don't have to make additional queries to find content in
primary storage system)
- less system dependencies (if the primary system is down...)
- no longer hitting primary storage system (which are usually already
busy doing other things and also tend to be expensive)
- simpler

Disadvantages
- larger index
- might be slower, if the index is significantly larger
- updating issues

thanks,

Glen
http://zzzoot.blogspot.com/

2008/9/19 Dragan Jotanovic <Dragan.Jotanovic@diosphere.com>:
> I think it is not good idea to use lucene as storage, it is just index.
> You could probably implement this using flat files and lucene.
> Your simDocId would be stored field which you can retrieve from the index after search, and it could also contain the information where on the disk is document located.
>
>
> -----Original Message-----
> From: xh sun [mailto:wysunxiaohua@yahoo.com.cn]
> Sent: Friday, September 19, 2008 9:44 AM
> To: java-user@lucene.apache.org
> Subject: Re: could I implement this scenario?
>
> I store the data in flatfiles and db. I want to implement it using Lucene only, but if it fails, maybe I shall create a temporary table for each query.
>
>
>
> ----- Original Message ----
> From: mathieu <mathieu@garambrogne.net>
> To: java-user@lucene.apache.org
> Sent: Friday, September 19, 2008 4:34:13 PM
> Subject: Re: could I implement this scenario?
>
>
> Lucene is just an index. Where do you wont to store your data? in a db,
> flatfiles, document with an url, in lucene?
>
> M.
>
> On Fri, 19 Sep 2008 16:25:27 +0800 (CST), xh sun
> <wysunxiaohua@yahoo.com.cn> wrote:
>> Thank you. Mathieu.
>>
>> But the hits don't include the document doc02  in my example, how to
>> display  doc02?  I don't want to search by docid. Thanks.
>>
>>
>>
>> ----- Original Message ----
>> From: mathieu <mathieu@garambrogne.net>
>> To: java-user@lucene.apache.org
>> Sent: Friday, September 19, 2008 4:14:34 PM
>> Subject: Re: could I implement this scenario?
>>
>>
>>
>> Yes. You can store data in lucene index and don't search on it : your
>> simdocid.
>>
>> M.
>>
>> On Fri, 19 Sep 2008 16:00:20 +0800 (CST), xh sun
>> <wysunxiaohua@yahoo.com.cn> wrote:
>>> Hi all,
>>>
>>> How can I implemented this scenario in lucene?
>>>
>>> suppose every document has three fields: docid, doctext and simdocid.
>>> docid is the id of the document, doctext is the content of the document,
>>> dimdocid is the docid of a similar document with this document.
>>> example:
>>> docid  doctext                    simdocid
>>> doc01  ************************   doc04
>>> doc02  ************************   doc03
>>> doc03  ************************   doc02
>>> doc04  ************************   doc03
>>> doc05  ************************   doc04
>>> doc06  ************************   doc02
>>>
>>> During query, the index will be searched basing on field doctext. If the
>>> hits include four documents doc01,doc03,doc04, doc05, I want to display
>> the
>>> corresponding similar documents only, that is, the three documents
>>> doc04,doc02,doc03.
>>>
>>> Appreicate your help very much.
>>>
>>> BR,
>>> Shawn
>>>
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 19 15:45:51 2008
Return-Path: <java-user-return-36293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56079 invoked from network); 19 Sep 2008 15:45:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2008 15:45:51 -0000
Received: (qmail 24396 invoked by uid 500); 19 Sep 2008 15:45:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24356 invoked by uid 500); 19 Sep 2008 15:45:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24345 invoked by uid 99); 19 Sep 2008 15:45:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 08:45:39 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yeshuangming@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 15:44:41 +0000
Received: by gxk6 with SMTP id 6so806748gxk.5
        for <java-user@lucene.apache.org>; Fri, 19 Sep 2008 08:44:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=nNUz0wvlXesqmDfIIrbLwoWVWPVmIg2yCiW/07M3tIU=;
        b=Mrm2PW4XkEPT9lZX/8vJOjGGA0x+gsqkyGCxNHkzIZKOt+sCih6V2DVlmyUG6m5AJQ
         glkVySLXWw99zqFdhkJKZk0yFAIAxX4QoUCCrYdntHdHCuxD/XpNisfzbr9SMurJGz4E
         s8Muc+mk7aSt6vFXm28HdZ68XQt4fkd1RPXLE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=I4E/A+K4Yo6A1P+AtDYVVFMhkjFZNCwOXjwo4+/wSugJo13yhRLtCp4stzak5Xg9Se
         o9EdJq4ciTL/tqvubb204r+Iuic8Qf7NiugKOcgkK+JouWb7RILE7OTGecCz0JFbFbvz
         toS35QABo6ZA+5chjZwHhMTrrUWAL+cpDkXcc=
Received: by 10.150.206.11 with SMTP id d11mr3358096ybg.32.1221839053494;
        Fri, 19 Sep 2008 08:44:13 -0700 (PDT)
Received: by 10.151.100.9 with HTTP; Fri, 19 Sep 2008 08:44:13 -0700 (PDT)
Message-ID: <9233ccac0809190844i16173ffdr4ba79217f916ca82@mail.gmail.com>
Date: Fri, 19 Sep 2008 23:44:13 +0800
From: "=?UTF-8?B?5Y+25Y+M5piO?=" <yeshuangming@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene Front-end match
In-Reply-To: <9233ccac0809190301m74a4755ewd97f99f28a51f58@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28040_8616774.1221839053455"
References: <9233ccac0809190205u1cfde87eu7bab509dab7193f2@mail.gmail.com>
	 <5FF3185E-1679-45D8-BA5E-27AC4B72AAE6@gmail.com>
	 <9233ccac0809190301m74a4755ewd97f99f28a51f58@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_28040_8616774.1221839053455
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

SSBhbSBzb3JyeSwganVzdCBwdXQgdGhlIHN0cmluZyB0byBRdWVyeVBhcnNlci4KQnV0IHdoYXQg
bWFrZSBtZSBjb25mdXNpbmcgdGhlIGNvZGU6CgpRdWVyeSBxdWVyeSA9IHFwLnBhcnNlKCJiYmI6
XCJiKlwiIEFORCBjY2M6XCJjYypcIiIpOwoKZG9lc24ndCB3b3JrIGFzIGkgaGF2ZSBleHBlY3Rl
ZC4gSXQgZHJvcCB0aGUgV2lsZGNhcmQgKi4KCgoyMDA4LzkvMTksIOWPtuWPjOaYjiA8eWVzaHVh
bmdtaW5nQGdtYWlsLmNvbT46Cj4KPiBUaGFua3MhCj4KPiBOb3csIEkganVzdCB1c2UgUXVlcnkg
cXVlcnkgPSBxcC5wYXJzZSgiYSoiKTsgYW5kICBtZWV0IHRoZSBteQo+IHJlcXVpcmVtZW50cy4K
Pgo+IEFub3RoZXIgcXVlc3Rpb246IGhvdyB0byBwYXJzZXIgcXVlcnkgc3RyaW5nIGxpa2U6ICAg
ICAgICAgICB0aXRsZToiVGhlCj4gUmlnaHQgV2F5IiBBTkQgdGV4dDpnbwo+IHBsZWFzZSBzaG93
IG1lIGluIGphdmEgY29kZS4gdGhhbmtzLgo+Cj4gMjAwOC85LzE5IEthcmwgV2V0dGluIDxrYXJs
LndldHRpbkBnbWFpbC5jb20+Cj4KPj4KPj4gMTkgc2VwIDIwMDgga2wuIDExLjA1IHNrcmV2IOWP
tuWPjOaYjjoKPj4KPj4gRG9jdW1lbnQ8c3RvcmVkL3VuY29tcHJlc3NlZCxpbmRleGVkPGZpZWxk
OmFiYz4+Cj4+PiBEb2N1bWVudDxzdG9yZWQvdW5jb21wcmVzc2VkLGluZGV4ZWQ8ZmllbGQ6YmNk
Pj4KPj4+Cj4+PiBIb3cgY2FuIEkgZ2V0IHRoZSBmaXJzdCBEb2N1bWVudCBidXkgc29tZSBxdWVy
eSBzdHJpbmcgbGlrZSAiYSIgLCAiYWIiIG9yCj4+PiAiYWJjIiBidXQgbm8gImIiIGFuZCAiYmMi
Pwo+Pj4KPj4KPj4KPj4gWW91IHdvdWxkIGNyZWF0ZSBhbiBuZ3JhbSBmaWx0ZXIgdGhhdCBjcmVh
dGUgZ3JhbXMgZnJvbSB0aGUgZmlyc3QgcG9zaXRpb24KPj4gb25seS4gVGFrZSBhIGxvb2sgYXQg
RWRnZU5HcmFtVG9rZW5GaWx0ZXIgaW4gY29udHJpYi9hbmFseXplcnMuCj4+Cj4+Cj4+ICAgICBr
YXJsCj4+Cj4+Cj4+Cj4+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+PiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBq
YXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPj4gRm9yIGFkZGl0aW9uYWwg
Y29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcKPj4KPj4K
Pgo+Cj4gLS0KPiBTb3JyeSBmb3IgbXkgRW5nbGlzaCEhIOaYjgo+IFBsZWFzZSBoZWxwIG1lIGNv
cnJlY3QgbXkgRW5nbGlzaCBleHByZXNzaW9uIGFuZCBlcnJvciBpbiBzeW50YXgKPgoKCgotLSAK
U29ycnkgZm9yIG15IEVuZ2xpc2ghISDmmI4KUGxlYXNlIGhlbHAgbWUgY29ycmVjdCBteSBFbmds
aXNoIGV4cHJlc3Npb24gYW5kIGVycm9yIGluIHN5bnRheAo=
------=_Part_28040_8616774.1221839053455--

From java-user-return-36294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 19 15:52:47 2008
Return-Path: <java-user-return-36294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60548 invoked from network); 19 Sep 2008 15:52:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2008 15:52:47 -0000
Received: (qmail 38833 invoked by uid 500); 19 Sep 2008 15:52:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38805 invoked by uid 500); 19 Sep 2008 15:52:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38794 invoked by uid 99); 19 Sep 2008 15:52:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 08:52:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 15:51:37 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.13.8/8.13.8) with ESMTP id m8JFq7ZF004199
	for <java-user@lucene.apache.org>; Fri, 19 Sep 2008 11:52:08 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <48D3CAB4.6060208@informatics.jax.org>
Date: Fri, 19 Sep 2008 11:52:20 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: lucene Front-end match
References: <9233ccac0809190205u1cfde87eu7bab509dab7193f2@mail.gmail.com>	 <5FF3185E-1679-45D8-BA5E-27AC4B72AAE6@gmail.com>	 <9233ccac0809190301m74a4755ewd97f99f28a51f58@mail.gmail.com> <9233ccac0809190844i16173ffdr4ba79217f916ca82@mail.gmail.com>
In-Reply-To: <9233ccac0809190844i16173ffdr4ba79217f916ca82@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-PMX-Version: 5.4.3.345767, Antispam-Engine: 2.6.0.325393, Antispam-Data: 2008.9.19.153419
X-PerlMx-Spam: Gauge=IIIIIII, Probability=7%, Report='BODY_SIZE_2000_2999 0, BODY_SIZE_5000_LESS 0, __BOUNCE_CHALLENGE_SUBJ 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __FRAUD_419_BODY_WEBMAIL 0, __FRAUD_419_WEBMAIL 0, __HAS_MSGID 0, __HIGHBITS 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

The reason the wildcard is being dropped is because you have wrapped it 
in a phrase query.  Wildcards are not supported in Pharse Queries.  At 
least not in any Analyzers that I'm aware of.

A really good tool to see the transformations that happen to a query is 
Luke, open it up against your index, go into the search section, choose 
the analyzer you use and start playing around.

This has helped me countless times when creating I'm my own queries and 
not getting the results that I expect.

-Matt

 wrote:
> I am sorry, just put the string to QueryParser.
> But what make me confusing the code:
>
> Query query = qp.parse("bbb:\"b*\" AND ccc:\"cc*\"");
>
> doesn't work as i have expected. It drop the Wildcard *.
>
>
> 2008/9/19,  <yeshuangming@gmail.com>:
>   
>> Thanks!
>>
>> Now, I just use Query query = qp.parse("a*"); and  meet the my
>> requirements.
>>
>> Another question: how to parser query string like:           title:"The
>> Right Way" AND text:go
>> please show me in java code. thanks.
>>
>> 2008/9/19 Karl Wettin <karl.wettin@gmail.com>
>>
>>     
>>> 19 sep 2008 kl. 11.05 skrev :
>>>
>>> Document<stored/uncompressed,indexed<field:abc>>
>>>       
>>>> Document<stored/uncompressed,indexed<field:bcd>>
>>>>
>>>> How can I get the first Document buy some query string like "a" , "ab" or
>>>> "abc" but no "b" and "bc"?
>>>>
>>>>         
>>> You would create an ngram filter that create grams from the first position
>>> only. Take a look at EdgeNGramTokenFilter in contrib/analyzers.
>>>
>>>
>>>     karl
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>       
>> --
>> Sorry for my English!! 
>> Please help me correct my English expression and error in syntax
>>
>>     
>
>
>
>   



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 19 15:56:59 2008
Return-Path: <java-user-return-36295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63109 invoked from network); 19 Sep 2008 15:56:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2008 15:56:59 -0000
Received: (qmail 47757 invoked by uid 500); 19 Sep 2008 15:56:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47722 invoked by uid 500); 19 Sep 2008 15:56:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47704 invoked by uid 99); 19 Sep 2008 15:56:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 08:56:49 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 15:55:49 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.13.8/8.13.8) with ESMTP id m8JFuHdd004669
	for <java-user@lucene.apache.org>; Fri, 19 Sep 2008 11:56:18 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <48D3CBAF.9080507@informatics.jax.org>
Date: Fri, 19 Sep 2008 11:56:31 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: lucene Front-end match
References: <9233ccac0809190205u1cfde87eu7bab509dab7193f2@mail.gmail.com>	 <5FF3185E-1679-45D8-BA5E-27AC4B72AAE6@gmail.com>	 <9233ccac0809190301m74a4755ewd97f99f28a51f58@mail.gmail.com> <9233ccac0809190844i16173ffdr4ba79217f916ca82@mail.gmail.com> 
In-Reply-To: <9233ccac0809190844i16173ffdr4ba79217f916ca82@mail.gmail.com> 
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-PMX-Version: 5.4.3.345767, Antispam-Engine: 2.6.0.325393, Antispam-Data: 2008.9.19.153419
X-PerlMx-Spam: Gauge=IIIIIII, Probability=7%, Report='BODY_SIZE_2000_2999 0, BODY_SIZE_5000_LESS 0, __BOUNCE_CHALLENGE_SUBJ 0, __C230066_P5 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __FRAUD_419_BODY_WEBMAIL 0, __FRAUD_419_WEBMAIL 0, __HAS_MSGID 0, __HIGHBITS 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

To be more specific (just in case you are new to lucene)

Your Query:

Query query = qp.parse("bbb:\"b*\" AND ccc:\"cc*\"");

What I think you actually want here:

Query query = qp.parse("bbb:b* AND ccc:cc*");

Give it a shot, and then like I said, go get Luke, it will help you 
tremendously ^^

Matthew Hall wrote:
> The reason the wildcard is being dropped is because you have wrapped 
> it in a phrase query.  Wildcards are not supported in Pharse Queries.  
> At least not in any Analyzers that I'm aware of.
>
> A really good tool to see the transformations that happen to a query 
> is Luke, open it up against your index, go into the search section, 
> choose the analyzer you use and start playing around.
>
> This has helped me countless times when creating I'm my own queries 
> and not getting the results that I expect.
>
> -Matt
>
>  wrote:
>> I am sorry, just put the string to QueryParser.
>> But what make me confusing the code:
>>
>> Query query = qp.parse("bbb:\"b*\" AND ccc:\"cc*\"");
>>
>> doesn't work as i have expected. It drop the Wildcard *.
>>
>>
>> 2008/9/19,  <yeshuangming@gmail.com>:
>>  
>>> Thanks!
>>>
>>> Now, I just use Query query = qp.parse("a*"); and  meet the my
>>> requirements.
>>>
>>> Another question: how to parser query string like:           title:"The
>>> Right Way" AND text:go
>>> please show me in java code. thanks.
>>>
>>> 2008/9/19 Karl Wettin <karl.wettin@gmail.com>
>>>
>>>    
>>>> 19 sep 2008 kl. 11.05 skrev :
>>>>
>>>> Document<stored/uncompressed,indexed<field:abc>>
>>>>      
>>>>> Document<stored/uncompressed,indexed<field:bcd>>
>>>>>
>>>>> How can I get the first Document buy some query string like "a" , 
>>>>> "ab" or
>>>>> "abc" but no "b" and "bc"?
>>>>>
>>>>>         
>>>> You would create an ngram filter that create grams from the first 
>>>> position
>>>> only. Take a look at EdgeNGramTokenFilter in contrib/analyzers.
>>>>
>>>>
>>>>     karl
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>       
>>> -- 
>>> Sorry for my English!! 
>>> Please help me correct my English expression and error in syntax
>>>
>>>     
>>
>>
>>
>>   
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 20 06:24:41 2008
Return-Path: <java-user-return-36296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43164 invoked from network); 20 Sep 2008 06:24:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Sep 2008 06:24:40 -0000
Received: (qmail 73819 invoked by uid 500); 20 Sep 2008 06:24:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73785 invoked by uid 500); 20 Sep 2008 06:24:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73774 invoked by uid 99); 20 Sep 2008 06:24:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Sep 2008 23:24:30 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of umesh.iitk@gmail.com designates 209.85.142.191 as permitted sender)
Received: from [209.85.142.191] (HELO ti-out-0910.google.com) (209.85.142.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Sep 2008 06:23:31 +0000
Received: by ti-out-0910.google.com with SMTP id b8so426735tic.11
        for <java-user@lucene.apache.org>; Fri, 19 Sep 2008 23:24:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=KNg1dcKsPHMSkQNdqLBNLEiSep/lSLbB2XVa8rgAZyc=;
        b=Y24p69SAcSUW8ga2P3gJ5Y299Z5IRi9VOvq6iGXTw/1DxWDUqp0FMHWRhPMtjTOxEd
         xLChBLDCCLxrlG4IkwnU/S3TsCtfcE1Gm41Tdtw3Rt8EInUIjpDRb6AHlMRJGJtJTiZK
         TDAE04KMDszQ76aIlbmqqrE1inLA8pb/wMznQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=PXiPw3rfKRAvZu4K5Quy8G+/4HMBXPsOZwbSirF2cK+tPG1Ekr7Jr0CGq6p5DgAyIw
         AR/Ebd0xM8Ral2+P2hRHaqJXrJ0dza1JYWwP0l637Bbbj2X+I+LdtgsCAEp6ChXUw7LB
         Fcl0Y+Z7De8Xf0lNx5bF/fYt/3jkwHsfzHhbY=
Received: by 10.110.11.1 with SMTP id 1mr1623476tik.53.1221891843319;
        Fri, 19 Sep 2008 23:24:03 -0700 (PDT)
Received: by 10.110.43.10 with HTTP; Fri, 19 Sep 2008 23:24:03 -0700 (PDT)
Message-ID: <ea1074540809192324j4c5bec6ai8bf1d0679b692c91@mail.gmail.com>
Date: Sat, 20 Sep 2008 11:54:03 +0530
From: "Umesh Prasad" <umesh.iitk@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how use ranges for numeric values?
In-Reply-To: <ea1074540809190600y24598fcfq7555a950cea197d5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_65674_19941981.1221891843307"
References: <c82dedc70809190251m24bdf432i7c1d052abe1a5be5@mail.gmail.com>
	 <8c4e68610809190356y692e19ebmfae97316df9f54c7@mail.gmail.com>
	 <ea1074540809190600y24598fcfq7555a950cea197d5@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_65674_19941981.1221891843307
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On Fri, Sep 19, 2008 at 6:30 PM, Umesh Prasad <umesh.iitk@gmail.com> wrote:

>
> Hi,
>    NumberTools provides method longToString(long l) which pads the values.
> It can be indexed and range search like normal queries.
>
> Slight issue is when you search view the index in Luke because the numbers
> are hexadecimal notation and so not easily understandable. Hence you may
> want to store the original prices also in the index. Handy for debugging.
>

    SORRY , The encoding is BASE 36. I missed it out earlier.


>
> Similarly in search time, use longToString to get hexadecimal coded values
> for prices and make a range query encoded values.
>
> --
> Thanks
> Umesh
>
>
>
>
>
> On Fri, Sep 19, 2008 at 4:26 PM, Ian Lea <ian.lea@gmail.com> wrote:
>
>> Hi
>>
>>
>> The comparison is on strings, so, yes, you do have to pad your values.
>>
>>
>> --
>> Ian.
>>
>>
>> On Fri, Sep 19, 2008 at 10:51 AM, Giannandrea Castaldi
>> <anti_spam71@yahoo.com> wrote:
>> > Hi,
>> > I need to specify in my query ranges with product price. I wonder if
>> > the only solution is padding  values with zeros. For example, if I'm
>> > looking for price between 3$ and 10$ I must write the query in this
>> > manner: price:[00003.00 TO 00010.00]?
>> > Thanks.
>> > G
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --
> Thanking you
>
> Regards
> Umesh Prasad
>



-- 
Thanking you

Regards
Umesh Prasad

------=_Part_65674_19941981.1221891843307--

From java-user-return-36297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 20 21:10:58 2008
Return-Path: <java-user-return-36297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98389 invoked from network); 20 Sep 2008 21:10:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Sep 2008 21:10:58 -0000
Received: (qmail 7542 invoked by uid 500); 20 Sep 2008 21:10:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7515 invoked by uid 500); 20 Sep 2008 21:10:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7504 invoked by uid 99); 20 Sep 2008 21:10:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Sep 2008 14:10:47 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gustavo.corral@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Sep 2008 21:09:49 +0000
Received: by yx-out-2324.google.com with SMTP id 3so142928yxj.5
        for <java-user@lucene.apache.org>; Sat, 20 Sep 2008 14:10:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=0DUEezTqyjBFpOhDA4oVDGJnRVn9Og+OORPvioYk/cw=;
        b=xaDUEX91HhvoHYPXcBk3svqirjgTVPu6w2MoWzcSNfX2FxMwnL7ajIob9hk67k4OPn
         9Jep1wabHU5v+cTmdKAgd1PDiKX0Ouk3PlBySez9/P0k9CllmPNaJZcACCGFxjsWMt7e
         eIY5RbqQwUbFNHYuym4106AvavugsxPXPO2Kk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=jr4x9VXdVW1F3lLa3yL5xBKcHjNTd6+bl2Sf9tSRXiEkiD7q3TBcdww7wp6ZfRep0u
         8EC0n6WnAzFvFEIqtQk1Q6p1SWgDLhCYGDFzNWvzIBNVFu9Q+LWe0u/h3pFTaN1kKLyE
         FfMV8SXSoZBg8/NC9Igp4aMFNG5WsYk7ncrzQ=
Received: by 10.100.154.19 with SMTP id b19mr1543769ane.98.1221945021843;
        Sat, 20 Sep 2008 14:10:21 -0700 (PDT)
Received: by 10.100.163.13 with HTTP; Sat, 20 Sep 2008 14:10:21 -0700 (PDT)
Message-ID: <2bfa20eb0809201410i2d30cee3i8da1d4a602946504@mail.gmail.com>
Date: Sat, 20 Sep 2008 16:10:21 -0500
From: "Gustavo Corral" <gustavo.corral@gmail.com>
To: java-user@lucene.apache.org
Subject: eXist, Lucene and XQuery
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_50136_22050739.1221945021842"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_50136_22050739.1221945021842
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi list,

I have some days with a problem and I hope anybody can help me. I have
developed an extension module to search documents in an eXist collection
using Lucene. The module works fine and returns a Sequence with all the
documents matching a query sorted by the score of Lucene, but when I call
the function of the module in an XQuery script, the documents don't appear
in the same order.

I have this function which take an array with the document's names as
argument and returns a NodeSet with this documents from eXist collection:

protected static NodeSet getDocuments(String[] cgDocNames, DBBroker broker)
throws XPathException
    {
        //Creamos una Secuencia para almacenar los resultados
        ExtArrayNodeSet documents =3D new ExtArrayNodeSet(cgDocNames.length=
,
1);

        //obtiene la coleccion de reportes
        Collection cdData =3D
broker.getCollection(XmldbURI.create(JReportsModule.REPORTSDIRECTORY_DATA_C=
OLLECTION));

        //itera sobre los nombres de reportes
        for(int i =3D 0; i < cgDocNames.length; i ++)
        {
            //System.out.println(cgDocNames[i]);

            DocumentImpl cgDoc =3D cdData.getDocument(broker,
XmldbURI.create(cgDocNames[i].substring(cgDocNames[i].indexOf("
")+1,cgDocNames[i].length())));
            if(cgDoc !=3D null){
                //a=F1ade el reporte a la secuencia de resultados
                documents.add(new NodeProxy(cgDoc));
            }
        }
        documents.sort(true);
        return (NodeSet) documents;
    }

In the eval function of the extension module I call this getDocuments
function and that's the Sequence eval returns. Until this moment it seems
the documents are in the correct order, but when I call the function of the
extension module in an XQuery script the documents are returned in unorder.

Is the description clear? because my english is not very good.

Thanks

------=_Part_50136_22050739.1221945021842--

From java-user-return-36298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 21 19:27:51 2008
Return-Path: <java-user-return-36298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89126 invoked from network); 21 Sep 2008 19:27:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Sep 2008 19:27:51 -0000
Received: (qmail 98921 invoked by uid 500); 21 Sep 2008 19:27:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98890 invoked by uid 500); 21 Sep 2008 19:27:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98879 invoked by uid 99); 21 Sep 2008 19:27:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 21 Sep 2008 12:27:40 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshulnirvana@gmail.com designates 209.85.146.180 as permitted sender)
Received: from [209.85.146.180] (HELO wa-out-1112.google.com) (209.85.146.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 21 Sep 2008 19:26:41 +0000
Received: by wa-out-1112.google.com with SMTP id l24so844237waf.11
        for <java-user@lucene.apache.org>; Sun, 21 Sep 2008 12:27:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=AB/I0diPSYsjXx93POQlkIVR+PlEOc4BjSG08EZIATY=;
        b=IaMiIBDnd5N8xP1PsRQc72skdFDar+Oom1Ws0FW+sW/+LHeQBKms5gABqJXs42V+Bq
         5kZb4zXZJ8DQaDKn7WdJPZzQ7s/uf/6NRni1qp4gC2u9QrxXflmtz3Je7jKCfbvUAhTq
         NW6pJQpgqCtpQhFis2+Tbqvu3F/yhPU1pTsL4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=doDCILzbXu4UTyfAPKHX75hQJ1wBYZ8hWyh/k+i/uOivZaM26LS63R4EDvT5usUN00
         mGCG1laU2VMas43sTzA0cYvgB2YZPSAxAIcH/AGw21gMz4Nv/1D3Pc+xijxqSoC/ItQr
         oNK6bf3A2Esx1gUhTrNDga6Q190A95oUrBHxI=
Received: by 10.114.185.8 with SMTP id i8mr3452788waf.28.1222025224456;
        Sun, 21 Sep 2008 12:27:04 -0700 (PDT)
Received: by 10.114.39.6 with HTTP; Sun, 21 Sep 2008 12:27:04 -0700 (PDT)
Message-ID: <b8bb47ad0809211227q107e9579l5a51bde32c32eb52@mail.gmail.com>
Date: Sun, 21 Sep 2008 21:27:04 +0200
From: "Anshul jain" <anshulnirvana@gmail.com>
To: java-user@lucene.apache.org
Subject: Multi Field search without Multifieldqueryparser
In-Reply-To: <b8bb47ad0809211058g1a9cce2pb6905fa21b816245@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <b8bb47ad0809211058g1a9cce2pb6905fa21b816245@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi!

I've a lucene document structured like:
Field: Text
name: George Bush
Sex: Male
Occupation: President of USA

Now I can have two types of queries:
Structured query:
name: George Bush AND Occupation: President

Unstructured Query:
George Bush AND President.

After parsing it will become, value: George bush and president.
"value" is some default field that has to defined during parsing.

But as you can see that this unstructured query would not work because
of the structure of the lucene document. Now what I want to do is that
when an user gives an Unstructured query Lucene should search in all
fields. (Multi field query parser is an option but we have to define
all the fields first, and it can be expensive as the query can get
really big).

I would really appreciate if you can help me out with this.

Regards,
Anshul Jain

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 22 00:10:55 2008
Return-Path: <java-user-return-36299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77193 invoked from network); 22 Sep 2008 00:10:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Sep 2008 00:10:55 -0000
Received: (qmail 53318 invoked by uid 500); 22 Sep 2008 00:10:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53280 invoked by uid 500); 22 Sep 2008 00:10:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53269 invoked by uid 99); 22 Sep 2008 00:10:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 21 Sep 2008 17:10:44 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yeshuangming@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 00:09:45 +0000
Received: by gxk6 with SMTP id 6so2382381gxk.5
        for <java-user@lucene.apache.org>; Sun, 21 Sep 2008 17:09:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=eHkIQl8KPOpAmjiXE5nKuWSEKUPdP2H1IQq21KbNooM=;
        b=RoaH0lKcaXFXRp5d6qg9HQ+m/Z5lQZQMZ7F914MlCVmi3Zok2gZLjDnDvfCSPZl4iw
         XzLRjz345Uoj8FE5XmOedqSg3bnR+qTsOCsD4FphElz3kel+aHE3H2DOQ51QQVpd+JzA
         v9wTbWG2s9Y7uRUdE4cmyutomEBCQRLNaNK5E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=DbQTFUIyQAwlUEukyXN2NsPiAFvEOO0lWurdUGN8zoSE3huuE/y2txuawbgxpRdbfS
         TnWVBQv40cOB3TjJkQh3SHcA9Sm9u/LaSbRme/9PEYz5Srv1zT7d1vk5bmKkqLFrk2L7
         pp8tqXrQkTlBekzRvn1hTX+cMxxwp7fDulwYQ=
Received: by 10.150.57.17 with SMTP id f17mr6377138yba.39.1222042157733;
        Sun, 21 Sep 2008 17:09:17 -0700 (PDT)
Received: by 10.151.100.9 with HTTP; Sun, 21 Sep 2008 17:09:17 -0700 (PDT)
Message-ID: <9233ccac0809211709i112012f5j1faa18d6d0b8b6de@mail.gmail.com>
Date: Mon, 22 Sep 2008 08:09:17 +0800
From: "=?UTF-8?B?5Y+25Y+M5piO?=" <yeshuangming@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene Front-end match
In-Reply-To: <48D3CBAF.9080507@informatics.jax.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_43733_14611227.1222042157726"
References: <9233ccac0809190205u1cfde87eu7bab509dab7193f2@mail.gmail.com>
	 <5FF3185E-1679-45D8-BA5E-27AC4B72AAE6@gmail.com>
	 <9233ccac0809190301m74a4755ewd97f99f28a51f58@mail.gmail.com>
	 <9233ccac0809190844i16173ffdr4ba79217f916ca82@mail.gmail.com>
	 <48D3CBAF.9080507@informatics.jax.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_43733_14611227.1222042157726
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

VGhhbmtzIE1hdHRoZXcgSGFsbCBmb3IgdHdvIGhlbHBmdWxsIHJlc3BvbnNlIQpJIGhhdmUgdXNl
ZCBMdWtlLCBidXQgaGFzbid0IHVzZSB0aGlzIHBvd2VyLCB0aGFua3MuCgpJIHdhbnQgdG8gcGFy
c2VyIHNvbWV0aGluZyBsaWtlOiAiYSBiKiIuCgpJIHRoaW5rIEkgaGF2ZSB0byB1c2UgV2lsZGNh
cmRRdWVyeSBhbmQgQm9vbGVhblF1ZXJ5LgoKMjAwOC85LzE5IE1hdHRoZXcgSGFsbCA8bWhhbGxA
aW5mb3JtYXRpY3MuamF4Lm9yZz4KCj4gVG8gYmUgbW9yZSBzcGVjaWZpYyAoanVzdCBpbiBjYXNl
IHlvdSBhcmUgbmV3IHRvIGx1Y2VuZSkKPgo+IFlvdXIgUXVlcnk6Cj4KPiBRdWVyeSBxdWVyeSA9
IHFwLnBhcnNlKCJiYmI6XCJiKlwiIEFORCBjY2M6XCJjYypcIiIpOwo+Cj4gV2hhdCBJIHRoaW5r
IHlvdSBhY3R1YWxseSB3YW50IGhlcmU6Cj4KPiBRdWVyeSBxdWVyeSA9IHFwLnBhcnNlKCJiYmI6
YiogQU5EIGNjYzpjYyoiKTsKPgo+IEdpdmUgaXQgYSBzaG90LCBhbmQgdGhlbiBsaWtlIEkgc2Fp
ZCwgZ28gZ2V0IEx1a2UsIGl0IHdpbGwgaGVscCB5b3UKPiB0cmVtZW5kb3VzbHkgXl4KPgo+IE1h
dHRoZXcgSGFsbCB3cm90ZToKPgo+PiBUaGUgcmVhc29uIHRoZSB3aWxkY2FyZCBpcyBiZWluZyBk
cm9wcGVkIGlzIGJlY2F1c2UgeW91IGhhdmUgd3JhcHBlZCBpdCBpbgo+PiBhIHBocmFzZSBxdWVy
eS4gIFdpbGRjYXJkcyBhcmUgbm90IHN1cHBvcnRlZCBpbiBQaGFyc2UgUXVlcmllcy4gIEF0IGxl
YXN0Cj4+IG5vdCBpbiBhbnkgQW5hbHl6ZXJzIHRoYXQgSSdtIGF3YXJlIG9mLgo+Pgo+PiBBIHJl
YWxseSBnb29kIHRvb2wgdG8gc2VlIHRoZSB0cmFuc2Zvcm1hdGlvbnMgdGhhdCBoYXBwZW4gdG8g
YSBxdWVyeSBpcwo+PiBMdWtlLCBvcGVuIGl0IHVwIGFnYWluc3QgeW91ciBpbmRleCwgZ28gaW50
byB0aGUgc2VhcmNoIHNlY3Rpb24sIGNob29zZSB0aGUKPj4gYW5hbHl6ZXIgeW91IHVzZSBhbmQg
c3RhcnQgcGxheWluZyBhcm91bmQuCj4+Cj4+IFRoaXMgaGFzIGhlbHBlZCBtZSBjb3VudGxlc3Mg
dGltZXMgd2hlbiBjcmVhdGluZyBJJ20gbXkgb3duIHF1ZXJpZXMgYW5kCj4+IG5vdCBnZXR0aW5n
IHRoZSByZXN1bHRzIHRoYXQgSSBleHBlY3QuCj4+Cj4+IC1NYXR0Cj4+Cj4+IOWPtuWPjOaYjiB3
cm90ZToKPj4KPj4+IEkgYW0gc29ycnksIGp1c3QgcHV0IHRoZSBzdHJpbmcgdG8gUXVlcnlQYXJz
ZXIuCj4+PiBCdXQgd2hhdCBtYWtlIG1lIGNvbmZ1c2luZyB0aGUgY29kZToKPj4+Cj4+PiBRdWVy
eSBxdWVyeSA9IHFwLnBhcnNlKCJiYmI6XCJiKlwiIEFORCBjY2M6XCJjYypcIiIpOwo+Pj4KPj4+
IGRvZXNuJ3Qgd29yayBhcyBpIGhhdmUgZXhwZWN0ZWQuIEl0IGRyb3AgdGhlIFdpbGRjYXJkICou
Cj4+Pgo+Pj4KPj4+IDIwMDgvOS8xOSwg5Y+25Y+M5piOIDx5ZXNodWFuZ21pbmdAZ21haWwuY29t
PjoKPj4+Cj4+Pgo+Pj4+IFRoYW5rcyEKPj4+Pgo+Pj4+IE5vdywgSSBqdXN0IHVzZSBRdWVyeSBx
dWVyeSA9IHFwLnBhcnNlKCJhKiIpOyBhbmQgIG1lZXQgdGhlIG15Cj4+Pj4gcmVxdWlyZW1lbnRz
Lgo+Pj4+Cj4+Pj4gQW5vdGhlciBxdWVzdGlvbjogaG93IHRvIHBhcnNlciBxdWVyeSBzdHJpbmcg
bGlrZTogICAgICAgICAgIHRpdGxlOiJUaGUKPj4+PiBSaWdodCBXYXkiIEFORCB0ZXh0OmdvCj4+
Pj4gcGxlYXNlIHNob3cgbWUgaW4gamF2YSBjb2RlLiB0aGFua3MuCj4+Pj4KPj4+PiAyMDA4Lzkv
MTkgS2FybCBXZXR0aW4gPGthcmwud2V0dGluQGdtYWlsLmNvbT4KPj4+Pgo+Pj4+Cj4+Pj4KPj4+
Pj4gMTkgc2VwIDIwMDgga2wuIDExLjA1IHNrcmV2IOWPtuWPjOaYjjoKPj4+Pj4KPj4+Pj4gRG9j
dW1lbnQ8c3RvcmVkL3VuY29tcHJlc3NlZCxpbmRleGVkPGZpZWxkOmFiYz4+Cj4+Pj4+Cj4+Pj4+
Cj4+Pj4+PiBEb2N1bWVudDxzdG9yZWQvdW5jb21wcmVzc2VkLGluZGV4ZWQ8ZmllbGQ6YmNkPj4K
Pj4+Pj4+Cj4+Pj4+PiBIb3cgY2FuIEkgZ2V0IHRoZSBmaXJzdCBEb2N1bWVudCBidXkgc29tZSBx
dWVyeSBzdHJpbmcgbGlrZSAiYSIgLCAiYWIiCj4+Pj4+PiBvcgo+Pj4+Pj4gImFiYyIgYnV0IG5v
ICJiIiBhbmQgImJjIj8KPj4+Pj4+Cj4+Pj4+Pgo+Pj4+Pj4KPj4+Pj4gWW91IHdvdWxkIGNyZWF0
ZSBhbiBuZ3JhbSBmaWx0ZXIgdGhhdCBjcmVhdGUgZ3JhbXMgZnJvbSB0aGUgZmlyc3QKPj4+Pj4g
cG9zaXRpb24KPj4+Pj4gb25seS4gVGFrZSBhIGxvb2sgYXQgRWRnZU5HcmFtVG9rZW5GaWx0ZXIg
aW4gY29udHJpYi9hbmFseXplcnMuCj4+Pj4+Cj4+Pj4+Cj4+Pj4+ICAgIGthcmwKPj4+Pj4KPj4+
Pj4KPj4+Pj4KPj4+Pj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4+Pj4+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6
IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+Pj4+PiBGb3IgYWRkaXRp
b25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+
Pj4+Pgo+Pj4+Pgo+Pj4+Pgo+Pj4+Pgo+Pj4+IC0tCj4+Pj4gU29ycnkgZm9yIG15IEVuZ2xpc2gh
ISDmmI4KPj4+PiBQbGVhc2UgaGVscCBtZSBjb3JyZWN0IG15IEVuZ2xpc2ggZXhwcmVzc2lvbiBh
bmQgZXJyb3IgaW4gc3ludGF4Cj4+Pj4KPj4+Pgo+Pj4+Cj4+Pgo+Pj4KPj4+Cj4+Pgo+Pj4KPj4K
Pj4KPj4KPj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNl
ci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+PiBGb3IgYWRkaXRpb25hbCBjb21tYW5k
cywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+Pgo+Pgo+IC0tCj4g
TWF0dGhldyBIYWxsCj4gU29mdHdhcmUgRW5naW5lZXIKPiBNb3VzZSBHZW5vbWUgSW5mb3JtYXRp
Y3MKPiBtaGFsbEBpbmZvcm1hdGljcy5qYXgub3JnCj4gKDIwNykgMjg4LTYwMTIKPgo+Cj4KPgo+
IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLQo+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNj
cmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6
IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4KPgoKCi0tIApTb3JyeSBmb3IgbXkg
RW5nbGlzaCEhIOaYjgpQbGVhc2UgaGVscCBtZSBjb3JyZWN0IG15IEVuZ2xpc2ggZXhwcmVzc2lv
biBhbmQgZXJyb3IgaW4gc3ludGF4Cg==
------=_Part_43733_14611227.1222042157726--

From java-user-return-36300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 22 04:50:16 2008
Return-Path: <java-user-return-36300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87150 invoked from network); 22 Sep 2008 04:50:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Sep 2008 04:50:16 -0000
Received: (qmail 94696 invoked by uid 500); 22 Sep 2008 04:50:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94662 invoked by uid 500); 22 Sep 2008 04:50:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94651 invoked by uid 99); 22 Sep 2008 04:50:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 21 Sep 2008 21:50:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO web1.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 04:49:03 +0000
Received: from [192.168.222.60] (unknown [192.168.222.60])
	by web1.nuix.com.au (Postfix) with ESMTP id 43AFF4ED8F1
	for <java-user@lucene.apache.org>; Mon, 22 Sep 2008 14:48:44 +1000 (EST)
Message-ID: <48D723DE.2080303@nuix.com>
Date: Mon, 22 Sep 2008 14:49:34 +1000
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: Lucene Mailing List <java-user@lucene.apache.org>
Subject: StandardTokenizer and Korean grouping with alphanum
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all.

I have a question about Korean tokenisation.  Currently there is a rule 
in StandardTokenizerImpl.jflex which looks like this:

ALPHANUM   = ({LETTER}|{DIGIT}|{KOREAN})+

I'm wondering if there was some good reason why it isn't:

ALPHANUM   = (({LETTER}|{DIGIT})+|{KOREAN}+)

Basically I'm seeing some tokens come back with mixed digits and Hangul, 
and I'm questioning the correctness of that.

Disclaimer: we're not performing any further processing of Korean in 
subsequent filters at the current point in time, and I don't know the 
language either.

Daniel


-- 
Daniel Noll                            Forensic and eDiscovery Software
Senior Developer                              The world's most advanced
Nuix                                                email data analysis
http://nuix.com/                                and eDiscovery software

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 22 08:47:55 2008
Return-Path: <java-user-return-36301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24541 invoked from network); 22 Sep 2008 08:47:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Sep 2008 08:47:55 -0000
Received: (qmail 83897 invoked by uid 500); 22 Sep 2008 08:47:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83872 invoked by uid 500); 22 Sep 2008 08:47:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83861 invoked by uid 99); 22 Sep 2008 08:47:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 01:47:45 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of g.castaldi@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 08:46:46 +0000
Received: by gxk6 with SMTP id 6so2663897gxk.5
        for <java-user@lucene.apache.org>; Mon, 22 Sep 2008 01:46:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:mime-version:content-type:content-transfer-encoding
         :content-disposition:x-google-sender-auth;
        bh=RM8OylzGo/1vob5Bd5Vj4By8lEgBQ652L6fqazsn/90=;
        b=VU+8VsZSqgPejf46tKobuwO3cD+tL0RQXtaqIcwySOpKPDbyFZmcNW949KQbeqV/Km
         g14ndp/nbZXW37H/tLU5zFXYe4fRm8cHddecPXWT5ZWWR608GE3ElsnQhbO5yoaqmcWw
         msUbolO6yRxM0gU68dCCFIUwNR1tElvSio4C0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition:x-google-sender-auth;
        b=YJ3VwVEAlGaz3695LrP4azgKOJwKoXXwsvCbJwFf6/dNNnrAWjMBn+gUeCZwbbg6+Q
         /Da6X8eYLrFAq4FLsNsr4nk1B5XK9V/7DVfshxq+EEK3LqYcoaBdm9ed0fLCMAlnYgZC
         MG4lbfgotucK46u0OR7F7O7dAeB7QrLm82EvY=
Received: by 10.151.145.11 with SMTP id x11mr6894179ybn.153.1222073179113;
        Mon, 22 Sep 2008 01:46:19 -0700 (PDT)
Received: by 10.150.181.13 with HTTP; Mon, 22 Sep 2008 01:46:19 -0700 (PDT)
Message-ID: <c82dedc70809220146l32781a61td1b01bffa489cbe6@mail.gmail.com>
Date: Mon, 22 Sep 2008 10:46:19 +0200
From: "Giannandrea Castaldi" <anti_spam71@yahoo.com>
Sender: g.castaldi@gmail.com
To: java-user@lucene.apache.org
Subject: How specify the analyzer when created query with api?
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Google-Sender-Auth: be0f3229b8006013
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
In my webapp I'm trying to use the lucene api to build  queries
instead of the QueryParser but I haven't found out where to specify
the Analyzer. Any help?
Thanks.

jean71

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 22 08:49:54 2008
Return-Path: <java-user-return-36302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26005 invoked from network); 22 Sep 2008 08:49:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Sep 2008 08:49:54 -0000
Received: (qmail 88984 invoked by uid 500); 22 Sep 2008 08:49:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88946 invoked by uid 500); 22 Sep 2008 08:49:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88935 invoked by uid 99); 22 Sep 2008 08:49:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 01:49:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dckorah@gmail.com designates 74.125.78.25 as permitted sender)
Received: from [74.125.78.25] (HELO ey-out-2122.google.com) (74.125.78.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 08:48:44 +0000
Received: by ey-out-2122.google.com with SMTP id 6so351384eyi.53
        for <java-user@lucene.apache.org>; Mon, 22 Sep 2008 01:49:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:subject:date
         :mime-version:content-type:content-transfer-encoding:x-mailer
         :in-reply-to:x-mimeole:thread-index:message-id;
        bh=sz8gSUBm/IFNhQZVByfYZKMi/McqEDqYBDfmidlykUs=;
        b=iCAKXap4o4uvduIGcHOc3c7OPQXLKRSKcwRWH0vS50WnUYnmYBHjOeNj5iKsKfLbIr
         MvcWh2FsIJ4uW8usFiuBmYMZ+i2V3S+chp7DBn+dm1tGPeie3+buiHYsPypINTwJ5GqU
         +ZDMWjZm75lV//nbK08Ncm9yUxOBudhCZVwq4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:subject:date:mime-version:content-type
         :content-transfer-encoding:x-mailer:in-reply-to:x-mimeole
         :thread-index:message-id;
        b=WKcmPvMOTI8YYuoR8ABcfUu+A9e77zeTjIb6uZFzF4nXfPFflY/3SQjI6E0Vy1+NLh
         LWRiI5uCc5UettUUZp99Soyc38P9L+FGX4OHaRnG4iaWNutsLhe77CDrWqh7+nTdSxpC
         IRWY3zYWj3tNEormdyU6fOwwrpc4+TTge11b0=
Received: by 10.210.89.4 with SMTP id m4mr4535143ebb.182.1222073356430;
        Mon, 22 Sep 2008 01:49:16 -0700 (PDT)
Received: from SCWDEVDINOKVM ( [195.2.245.68])
        by mx.google.com with ESMTPS id 31sm24684416nfu.9.2008.09.22.01.49.13
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 22 Sep 2008 01:49:14 -0700 (PDT)
From: "Dino Korah" <dckorah@gmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Multi Field search without Multifieldqueryparser
Date: Mon, 22 Sep 2008 09:48:25 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <b8bb47ad0809211227q107e9579l5a51bde32c32eb52@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3350
thread-index: Ackcj/mrBN1cytbPQuOboU3IZ2ePYQ==
Message-ID: <48d75c0a.1f15300a.5c54.4df2@mx.google.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I would think, with the current capabilities of lucene, denormalisation is
the solution. Create an extra indexed but not stored field called
"searchable-mash" which will hold the values from all fields with added
words to connect the data like "Male named George Bush whoes occupation is
President of USA ... Etc" so that you can run that generic query on that
field.

So you pass "searchable-mash: George bush and president" to query parser.

You will pay a penalty here, of bigger index and slower indexing.

-----Original Message-----
From: Anshul jain [mailto:anshulnirvana@gmail.com] 
Sent: 21 September 2008 20:27
To: java-user@lucene.apache.org
Subject: Multi Field search without Multifieldqueryparser

Hi!

I've a lucene document structured like:
Field: Text
name: George Bush
Sex: Male
Occupation: President of USA

Now I can have two types of queries:
Structured query:
name: George Bush AND Occupation: President

Unstructured Query:
George Bush AND President.

After parsing it will become, value: George bush and president.
"value" is some default field that has to defined during parsing.

But as you can see that this unstructured query would not work because of
the structure of the lucene document. Now what I want to do is that when an
user gives an Unstructured query Lucene should search in all fields. (Multi
field query parser is an option but we have to define all the fields first,
and it can be expensive as the query can get really big).

I would really appreciate if you can help me out with this.

Regards,
Anshul Jain

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 22 09:21:09 2008
Return-Path: <java-user-return-36303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40012 invoked from network); 22 Sep 2008 09:21:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Sep 2008 09:21:09 -0000
Received: (qmail 22566 invoked by uid 500); 22 Sep 2008 09:20:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22540 invoked by uid 500); 22 Sep 2008 09:20:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22529 invoked by uid 99); 22 Sep 2008 09:20:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 02:20:59 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adam.saltiel@gmail.com designates 209.85.200.174 as permitted sender)
Received: from [209.85.200.174] (HELO wf-out-1314.google.com) (209.85.200.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 09:19:59 +0000
Received: by wf-out-1314.google.com with SMTP id 28so1690158wfc.20
        for <java-user@lucene.apache.org>; Mon, 22 Sep 2008 02:20:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=gAmGJydztcuHr6cJeKXkE+B3GFyByj+aWW7ZLMKa0Bs=;
        b=RYjmJYDTgr57s4NKISr8bYnhLZ/1kYxByEpbQ0V2M4FjoOgE7NNhkTtZi5LyT/+QUI
         nhVskVW0yxHGOETlh23zjA4qgGQcd8ICxn6tR+I16X7hJS+2HN9lDNdVWv8omo3SvgDC
         6MHGELXg6fZlcO64J37ubiPq6AT6025Fc0eAo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=TeMWsLNkUjj/OwONm2bdm1goG/kGtIh5hrQKXe0aB2MgnoYclJaONAmKXVOqtkv70h
         uU0n+8yVzthbR2sW7ibWIHBqajD+WsostDok7HiKBf93NeL5PI+M8W0+dn+Q4h1HC2RF
         pXAqj0v090o2j+ZTYrxJ057t7b0WDSj8ejwtw=
Received: by 10.142.163.13 with SMTP id l13mr1308426wfe.265.1222075233238;
        Mon, 22 Sep 2008 02:20:33 -0700 (PDT)
Received: by 10.142.14.21 with HTTP; Mon, 22 Sep 2008 02:20:33 -0700 (PDT)
Message-ID: <e8aa138c0809220220u7189102q7e48750ab8fcb657@mail.gmail.com>
Date: Mon, 22 Sep 2008 10:20:33 +0100
From: adasal <adam.saltiel@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: eXist, Lucene and XQuery
In-Reply-To: <2bfa20eb0809201410i2d30cee3i8da1d4a602946504@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_94575_5235369.1222075233268"
References: <2bfa20eb0809201410i2d30cee3i8da1d4a602946504@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_94575_5235369.1222075233268
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

QWgsIGhpIEd1c3Rhdm8sCkkgYWN0dWFsbHkgZG9uJ3Qga25vdyB0aGlzLCBidXQgaXQgc2VlbXMg
dGhhdCB0aGUgaW1wbGVtZW50YXRpb24gb2YgWFF1ZXJ5CmluIGVYaXN0IHBsYWNlcyB5b3VyIHJl
c3VsdHMgaW4gYW4gdW5zb3J0ZWQgbGlzdCEgT3IgcG9zc2libHkgaXQgaXMgcGxhY2VkCmluIGEg
aGFzaG1hcCB3aXRoIGl0cyBvd24gYmluZGluZ3MgcmVwcmVzZW50aW5nLCBmb3IgaW5zdGFuY2Us
IGRhdGEgdHlwZXMKYW5kIHNvIG9uPwpUaGlua2luZyBhYm91dCB0aGlzLCBJIGJlbGlldmUgaXQg
aXMgcG9zc2libGUgdG8gc29ydCB5b3VyIHJldHVybmVkIHJlc3VsdHMKdXNpbmcgWFF1ZXJ5LCBh
bmQgSSB0aGluayB0aGF0IG11c3QgYmUgeW91ciBiZXN0IGFsdGVybmF0aXZlIHNpbmNlIHlvdXIK
ZnVuY3Rpb24gcmV0dXJucyBzdHJpbmdzLCB3aGljaCBpcyB3aGF0IHlvdSB3YW50IHRvIGRpc3Bs
YXkgaW1taWVkaWF0ZWx5LgpUaGVyZSBpcyB0aGUgb3B0aW9uIG9mIGZ1cnRoZXIgd3JhcHBpbmcg
dGhlIHJlc3VsdHMuIEkgZ3Vlc3MgeW91IGhhdmUgdGhlCnByb2JsZW0gb2YgaG93IHRvIHNvcnQg
dGhvdWdoLCBpLmUuIG9uIHdoYXQgYmFzaXMuIE9uY2UgYWdhaW4gSSBkb24ndCBrbm93LApidXQg
eW91IG1heSBoYXZlIHRvIGNpcmN1bXZlbnQgdGhlIHdob2xlIHByb2JsZW0gd2l0aCBhIHNvcnQg
b2Ygd3JhcHBlciwKcGxhY2luZyB5b3VyIHJlc3VsdHMgaW4gYSBoYXNobWFwIGFuZCBjYWxsaW5n
IGEgZnVydGhlciBYUXVlcnkgZnVuY3Rpb24gb24KdGhhdCBoYXNobWFwIGZvciBlYWNoIHJlc3Vs
dCB5b3Ugd2FudC4gSWYgc28gbm90IHZlcnkgcHJldHR5IGFuZCBsZWFkcyBtZSB0bwp0aGluayB0
aGVyZSBtdXN0IGJlIGEgInByb3BlciIgd2F5IG9mIGRvaW5nIHRoaXMhCkRvZXMgdGhpcyBtYWtl
IHNlbnNlPwoKQWRhbQoKMjAwOC85LzIwIEd1c3Rhdm8gQ29ycmFsIDxndXN0YXZvLmNvcnJhbEBn
bWFpbC5jb20+Cgo+IEhpIGxpc3QsCj4KPiBJIGhhdmUgc29tZSBkYXlzIHdpdGggYSBwcm9ibGVt
IGFuZCBJIGhvcGUgYW55Ym9keSBjYW4gaGVscCBtZS4gSSBoYXZlCj4gZGV2ZWxvcGVkIGFuIGV4
dGVuc2lvbiBtb2R1bGUgdG8gc2VhcmNoIGRvY3VtZW50cyBpbiBhbiBlWGlzdCBjb2xsZWN0aW9u
Cj4gdXNpbmcgTHVjZW5lLiBUaGUgbW9kdWxlIHdvcmtzIGZpbmUgYW5kIHJldHVybnMgYSBTZXF1
ZW5jZSB3aXRoIGFsbCB0aGUKPiBkb2N1bWVudHMgbWF0Y2hpbmcgYSBxdWVyeSBzb3J0ZWQgYnkg
dGhlIHNjb3JlIG9mIEx1Y2VuZSwgYnV0IHdoZW4gSSBjYWxsCj4gdGhlIGZ1bmN0aW9uIG9mIHRo
ZSBtb2R1bGUgaW4gYW4gWFF1ZXJ5IHNjcmlwdCwgdGhlIGRvY3VtZW50cyBkb24ndCBhcHBlYXIK
PiBpbiB0aGUgc2FtZSBvcmRlci4KPgo+IEkgaGF2ZSB0aGlzIGZ1bmN0aW9uIHdoaWNoIHRha2Ug
YW4gYXJyYXkgd2l0aCB0aGUgZG9jdW1lbnQncyBuYW1lcyBhcwo+IGFyZ3VtZW50IGFuZCByZXR1
cm5zIGEgTm9kZVNldCB3aXRoIHRoaXMgZG9jdW1lbnRzIGZyb20gZVhpc3QgY29sbGVjdGlvbjoK
Pgo+IHByb3RlY3RlZCBzdGF0aWMgTm9kZVNldCBnZXREb2N1bWVudHMoU3RyaW5nW10gY2dEb2NO
YW1lcywgREJCcm9rZXIgYnJva2VyKQo+IHRocm93cyBYUGF0aEV4Y2VwdGlvbgo+ICAgIHsKPiAg
ICAgICAgLy9DcmVhbW9zIHVuYSBTZWN1ZW5jaWEgcGFyYSBhbG1hY2VuYXIgbG9zIHJlc3VsdGFk
b3MKPiAgICAgICAgRXh0QXJyYXlOb2RlU2V0IGRvY3VtZW50cyA9IG5ldyBFeHRBcnJheU5vZGVT
ZXQoY2dEb2NOYW1lcy5sZW5ndGgsCj4gMSk7Cj4KPiAgICAgICAgLy9vYnRpZW5lIGxhIGNvbGVj
Y2lvbiBkZSByZXBvcnRlcwo+ICAgICAgICBDb2xsZWN0aW9uIGNkRGF0YSA9Cj4KPiBicm9rZXIu
Z2V0Q29sbGVjdGlvbihYbWxkYlVSSS5jcmVhdGUoSlJlcG9ydHNNb2R1bGUuUkVQT1JUU0RJUkVD
VE9SWV9EQVRBX0NPTExFQ1RJT04pKTsKPgo+ICAgICAgICAvL2l0ZXJhIHNvYnJlIGxvcyBub21i
cmVzIGRlIHJlcG9ydGVzCj4gICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBjZ0RvY05hbWVzLmxl
bmd0aDsgaSArKykKPiAgICAgICAgewo+ICAgICAgICAgICAgLy9TeXN0ZW0ub3V0LnByaW50bG4o
Y2dEb2NOYW1lc1tpXSk7Cj4KPiAgICAgICAgICAgIERvY3VtZW50SW1wbCBjZ0RvYyA9IGNkRGF0
YS5nZXREb2N1bWVudChicm9rZXIsCj4gWG1sZGJVUkkuY3JlYXRlKGNnRG9jTmFtZXNbaV0uc3Vi
c3RyaW5nKGNnRG9jTmFtZXNbaV0uaW5kZXhPZigiCj4gIikrMSxjZ0RvY05hbWVzW2ldLmxlbmd0
aCgpKSkpOwo+ICAgICAgICAgICAgaWYoY2dEb2MgIT0gbnVsbCl7Cj4gICAgICAgICAgICAgICAg
Ly9hw7FhZGUgZWwgcmVwb3J0ZSBhIGxhIHNlY3VlbmNpYSBkZSByZXN1bHRhZG9zCj4gICAgICAg
ICAgICAgICAgZG9jdW1lbnRzLmFkZChuZXcgTm9kZVByb3h5KGNnRG9jKSk7Cj4gICAgICAgICAg
ICB9Cj4gICAgICAgIH0KPiAgICAgICAgZG9jdW1lbnRzLnNvcnQodHJ1ZSk7Cj4gICAgICAgIHJl
dHVybiAoTm9kZVNldCkgZG9jdW1lbnRzOwo+ICAgIH0KPgo+IEluIHRoZSBldmFsIGZ1bmN0aW9u
IG9mIHRoZSBleHRlbnNpb24gbW9kdWxlIEkgY2FsbCB0aGlzIGdldERvY3VtZW50cwo+IGZ1bmN0
aW9uIGFuZCB0aGF0J3MgdGhlIFNlcXVlbmNlIGV2YWwgcmV0dXJucy4gVW50aWwgdGhpcyBtb21l
bnQgaXQgc2VlbXMKPiB0aGUgZG9jdW1lbnRzIGFyZSBpbiB0aGUgY29ycmVjdCBvcmRlciwgYnV0
IHdoZW4gSSBjYWxsIHRoZSBmdW5jdGlvbiBvZiB0aGUKPiBleHRlbnNpb24gbW9kdWxlIGluIGFu
IFhRdWVyeSBzY3JpcHQgdGhlIGRvY3VtZW50cyBhcmUgcmV0dXJuZWQgaW4gdW5vcmRlci4KPgo+
IElzIHRoZSBkZXNjcmlwdGlvbiBjbGVhcj8gYmVjYXVzZSBteSBlbmdsaXNoIGlzIG5vdCB2ZXJ5
IGdvb2QuCj4KPiBUaGFua3MKPgo=
------=_Part_94575_5235369.1222075233268--

From java-user-return-36304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 22 09:30:13 2008
Return-Path: <java-user-return-36304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44421 invoked from network); 22 Sep 2008 09:30:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Sep 2008 09:30:11 -0000
Received: (qmail 37540 invoked by uid 500); 22 Sep 2008 09:30:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37496 invoked by uid 500); 22 Sep 2008 09:30:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37485 invoked by uid 99); 22 Sep 2008 09:30:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 02:30:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of umesh.iitk@gmail.com designates 209.85.200.174 as permitted sender)
Received: from [209.85.200.174] (HELO wf-out-1314.google.com) (209.85.200.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 09:29:01 +0000
Received: by wf-out-1314.google.com with SMTP id 28so1693255wfc.20
        for <java-user@lucene.apache.org>; Mon, 22 Sep 2008 02:29:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=dWYO7zyPQw4NeyZYCaKhKmAXEXF+hRK2MvrQfHffBUk=;
        b=ZRTP4K0eGeYOc0/ezOHWdvQnQNIF4z6FXWvkkUFaHjDYgAEFdr5wEz18YkmyYk7Bng
         E4Mmrl8U3PYKOIsrLgZLYXRJsvzLAskhlJerl34t3rhvS46HuUM8jc0eJkVGSVHBfDM4
         jPaqn8q8624TN5xKrFmI6/Lm66NuEGC9mMSeU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=caM0/PGBmUuvwzn1fxsVpsB+7dn4d9r65riEVLErrimg8CwKi5KJlqCkGwyIjkmmxm
         CiFC9jGfxDqxXMKH0aYAOcwaBsOjLICwNJJKpd8ksGQwKX3YglivqIE17FAcIi/I4GcE
         osTzuAtbY+rYSbh9WKrgnUWOQoJfk9kZyRTZw=
Received: by 10.142.222.21 with SMTP id u21mr1306774wfg.323.1222075774290;
        Mon, 22 Sep 2008 02:29:34 -0700 (PDT)
Received: by 10.143.38.10 with HTTP; Mon, 22 Sep 2008 02:29:34 -0700 (PDT)
Message-ID: <ea1074540809220229u71bbb076ude44098650583be8@mail.gmail.com>
Date: Mon, 22 Sep 2008 14:59:34 +0530
From: "Umesh Prasad" <umesh.iitk@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multi Field search without Multifieldqueryparser
In-Reply-To: <48d75c0a.1f15300a.5c54.4df2@mx.google.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14359_7432561.1222075774278"
References: <b8bb47ad0809211227q107e9579l5a51bde32c32eb52@mail.gmail.com>
	 <48d75c0a.1f15300a.5c54.4df2@mx.google.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14359_7432561.1222075774278
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
Having an extra indexed but unstored field is equivalent to having a bag of
words. So the search results quality will be affected.
Consider an Example:

Text : ----  President  of USA--
Other Fields ..

Text : --
Occupation: President of USA

In both cases searchable-mash = BAG of WORDs, will have President of USA
hence will score almost same, which would be undesirable.


Another solution is to learn the field name of each term in the unstructured
query and then form the query programmatically.
You will have to write 2 additional subsystems.
1. Field Learning System
2. Customized Query Tokenizer and Query Parser

That said, Best solution depends on your requirement.

Thanks
Umesh
On Mon, Sep 22, 2008 at 2:18 PM, Dino Korah <dckorah@gmail.com> wrote:

> I would think, with the current capabilities of lucene, denormalisation is
> the solution. Create an extra indexed but not stored field called
> "searchable-mash" which will hold the values from all fields with added
> words to connect the data like "Male named George Bush whoes occupation is
> President of USA ... Etc" so that you can run that generic query on that
> field.
>
> So you pass "searchable-mash: George bush and president" to query parser.
>
> You will pay a penalty here, of bigger index and slower indexing.
>
> -----Original Message-----
> From: Anshul jain [mailto:anshulnirvana@gmail.com]
> Sent: 21 September 2008 20:27
> To: java-user@lucene.apache.org
> Subject: Multi Field search without Multifieldqueryparser
>
> Hi!
>
> I've a lucene document structured like:
> Field: Text
> name: George Bush
> Sex: Male
> Occupation: President of USA
>
> Now I can have two types of queries:
> Structured query:
> name: George Bush AND Occupation: President
>
> Unstructured Query:
> George Bush AND President.
>
> After parsing it will become, value: George bush and president.
> "value" is some default field that has to defined during parsing.
>
> But as you can see that this unstructured query would not work because of
> the structure of the lucene document. Now what I want to do is that when an
> user gives an Unstructured query Lucene should search in all fields. (Multi
> field query parser is an option but we have to define all the fields first,
> and it can be expensive as the query can get really big).
>
> I would really appreciate if you can help me out with this.
>
> Regards,
> Anshul Jain
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Thanking you

Regards
Umesh Prasad

------=_Part_14359_7432561.1222075774278--

From java-user-return-36305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 22 11:17:59 2008
Return-Path: <java-user-return-36305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94064 invoked from network); 22 Sep 2008 11:17:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Sep 2008 11:17:59 -0000
Received: (qmail 92885 invoked by uid 500); 22 Sep 2008 11:17:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92853 invoked by uid 500); 22 Sep 2008 11:17:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92842 invoked by uid 99); 22 Sep 2008 11:17:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 04:17:49 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.247.81.221] (HELO maximus.getnetvps.net) (63.247.81.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 11:16:48 +0000
Received: (qmail 7283 invoked by uid 48); 22 Sep 2008 13:16:20 +0200
Received: from host-84-205-224-10.cpe.syzefxis.ote.gr
	(host-84-205-224-10.cpe.syzefxis.ote.gr [84.205.224.10]) by webmail.tera.gr
	(Horde MIME library) with HTTP; Mon, 22 Sep 2008 13:16:19 +0200
Message-ID: <20080922131619.im4yxiucao4kg884@webmail.tera.gr>
Date: Mon, 22 Sep 2008 13:16:19 +0200
From: jim@tera.gr
To: java-user@lucene.apache.org
Subject: StandardAnalyzer exclude numbers
MIME-Version: 1.0
Content-Type: text/plain;
	charset=ISO-8859-1;
	DelSp="Yes";
	format="flowed"
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
User-Agent: Internet Messaging Program (IMP) H3 (4.1.6)
X-Virus-Checked: Checked by ClamAV on apache.org

Hello

Is it possible to exclude numbers using StandardAnalyzer just like  
SimpleAnalyzer?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 22 11:46:59 2008
Return-Path: <java-user-return-36306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6637 invoked from network); 22 Sep 2008 11:46:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Sep 2008 11:46:59 -0000
Received: (qmail 12374 invoked by uid 500); 22 Sep 2008 11:46:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12337 invoked by uid 500); 22 Sep 2008 11:46:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12326 invoked by uid 99); 22 Sep 2008 11:46:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 04:46:49 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.85.220] (HELO smtp110.mail.mud.yahoo.com) (209.191.85.220)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 22 Sep 2008 11:45:47 +0000
Received: (qmail 94321 invoked from network); 22 Sep 2008 11:45:19 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=53w1YyW4ytNGS9cWuADZoYHLQ/kSs7DrDUMDKRrefwvoS8N5pNg//P5hwGQqPRoNGlCLmubq5pBIdlldGke5bGUMPGHl8bRdr1jG6hJe0AJzBqncSd9IoZaWiYfFXDTwaUfnA7QhzHNmw8jQR7CwYjMRYZ87QmInjPWcCzWw5AE=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp110.mail.mud.yahoo.com with SMTP; 22 Sep 2008 11:45:18 -0000
X-YMail-OSG: P8RSyhMVM1kXnoUV3f4tP_YGwiyI9xfMkbeLESdzhXGGxIvOMpzwQYeD627GcxuG3h98ovSKWtqaJel5p7hD19ULGbrfO57zPB_ZjlyRHS4Mv9v8A1iEqaoIMROMegJi0rnUYtUNFmgjYx7slWA01Kd9tjI0tw--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <021a01c91ca8$afdf24d0$04000100@sv.us.sonicwall.com>
From: "Ganesh - yahoo" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <661170.73589.qm@web50312.mail.re2.yahoo.com> <010a01c91a18$36e95b50$04000100@sv.us.sonicwall.com>
Subject: Re: Exception while doing sorting
Date: Mon, 22 Sep 2008 17:15:15 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

My index crossed 5 GB and 5 million documents are indexed.
My query includes searching and sorting returns 40000 hits.

If i do search from a standalone application, the results are returned in 12 
seconds. If i perform the same from web application running inside Tomcat, 
out of memory exception is occured.

Could any one clarify it?

Regards
Ganesh

----- Original Message ----- 
From: "Ganesh - yahoo" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
Sent: Friday, September 19, 2008 10:56 AM
Subject: Re: Exception while doing sorting


> Ok. If i distribure the indexes, whether sorting would be faster?
>
> In Lucene user group mailing list, most emails suggests to use single 
> indicies. Searching across the indexes may not be slower?
>
>>> Lucene uses FieldCache for sorting on non-tokenized field and tries to
>>> maintain fields from all your 4 millions documents, even if you need
>>> to sort only 4000 docs.
> Don't know why Lucene keeps all terms in FieldCache for sorting. It 
> supposed to sort only the hits. Please clarify?
>
> Regards
> Ganesh
>
> ----- Original Message ----- 
> From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
> To: <java-user@lucene.apache.org>
> Sent: Thursday, September 18, 2008 12:17 PM
> Subject: Re: Exception while doing sorting
>
>
>> If your index is increasing in size so fast, you should start thinking 
>> about sharding your index (breaking it into multiple smaller indices that 
>> each fits on its server) and searching across them (aka distributed 
>> search).
>>
>> Yes, Lucene can handle millions of records if run on adequate hardware 
>> and if used correctly.
>>
>> Otis
>> --
>> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>>
>>
>>
>> ----- Original Message ----
>>> From: Ganesh - yahoo <emailgane@yahoo.co.in>
>>> To: java-user@lucene.apache.org
>>> Sent: Thursday, September 18, 2008 12:53:19 AM
>>> Subject: Re: Exception while doing sorting
>>>
>>> My index is growing by 1 million records per day. How much memory do i 
>>> need
>>> to increase.
>>>
>>> What kind of sorting algorithm being used in Lucene. Is this efficient
>>> enough to handle millions of records.
>>>
>>> Whether we could do sorting using our own algorithm?
>>>
>>> Regards
>>> Ganesh
>>>
>>> ----- Original Message ----- 
>>> From: "Fuad Efendi"
>>> To:
>>> Sent: Wednesday, September 17, 2008 7:28 PM
>>> Subject: Re: Exception while doing sorting
>>>
>>>
>>> Increase memory.
>>>
>>> Lucene uses FieldCache for sorting on non-tokenized field and tries to
>>> maintain fields from all your 4 millions documents, even if you need
>>> to sort only 4000 docs.
>>> ==============
>>> http://www.tokenizer.org/bot.html
>>>
>>>
>>> Quoting Ganesh - yahoo :
>>>
>>> > Hello all,
>>> >
>>> > I am have indexed more than 4 million documents. My query fetches
>>> > 300,000 hits. If i perform sorting on any field, then tomcat reports
>>> > out of memory exception.
>>> > Sometimes the query results may be around 1000, but sorting on any
>>> > field might take more than 30 - 50 secs.
>>> >
>>> > I don't know what's going wrong.
>>> >
>>> > My index searcher is static object and it is getting refreshed every
>>> > minute. JSP pages directly calls the index searcher object and 
>>> > performs
>>> > search.
>>> >
>>> > Regards
>>> > Ganesh
>>> >
>>> >
>>> > Send instant messages to your online friends
>>> > http://in.messenger.yahoo.com
>>> > ---------------------------------------------------------------------
>>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>> Send instant messages to your online friends 
>>> http://in.messenger.yahoo.com
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> Send instant messages to your online friends http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 22 12:36:53 2008
Return-Path: <java-user-return-36307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36796 invoked from network); 22 Sep 2008 12:36:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Sep 2008 12:36:53 -0000
Received: (qmail 76616 invoked by uid 500); 22 Sep 2008 12:36:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75708 invoked by uid 500); 22 Sep 2008 12:36:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75697 invoked by uid 99); 22 Sep 2008 12:36:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 05:36:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 12:35:44 +0000
Received: by nf-out-0910.google.com with SMTP id g16so521579nfd.15
        for <java-user@lucene.apache.org>; Mon, 22 Sep 2008 05:36:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=G9QLiXT6NKEah+IiNADQbYMbuoM3CDzRWdCIVRNWU0o=;
        b=mEll4VVXvvgOJlt7SxaiUhvcMDpYTFB4sq3252+WOx3ZLTWj8Kf/3bj2P5dhD60fyY
         aJxsgBPBS3UlAQRQBkJm25RaqD2WkkkJkjXdmVJLR69CY/t6Whz3n6Mn8qoUuXyBiecH
         EcI/q2doIzHXgXRBomzcv+K1khiw09QzbZvyY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=dUg4o1TFhOABBtjhAlf6f5e7bRrlRQePeBprGWQUUEdwnMgFJGQeWvtjtKvmQMQ6QC
         tbt490uMUXhnazj0jJ/1dN00LTTbnBZdEid+5/K5lArl5vaC9hGpkPHWG2K+yEaihz7O
         WcYJyaBledpM+1HT+UpXWOnT5sBlt0wLsTOmM=
Received: by 10.210.67.20 with SMTP id p20mr4857929eba.66.1222086976948;
        Mon, 22 Sep 2008 05:36:16 -0700 (PDT)
Received: from ?192.168.1.101? ( [68.198.57.217])
        by mx.google.com with ESMTPS id 7sm7599978eyg.0.2008.09.22.05.36.15
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 22 Sep 2008 05:36:15 -0700 (PDT)
Message-ID: <48D7913D.3030305@gmail.com>
Date: Mon, 22 Sep 2008 08:36:13 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.16 (X11/20080725)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: StandardAnalyzer exclude numbers
References: <20080922131619.im4yxiucao4kg884@webmail.tera.gr>
In-Reply-To: <20080922131619.im4yxiucao4kg884@webmail.tera.gr>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

jim@tera.gr wrote:
> Hello
>
> Is it possible to exclude numbers using StandardAnalyzer just like 
> SimpleAnalyzer?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
Its possible but its tricky. You would want to copy the StandardAnalyzer 
into your own Analyzer and then modify the grammar. 
StandardTokenizerImpl.jflex is where to look, but you will have to learn 
how to use/compile jflex (look at the build file) to build the parser 
classes. What you would do though, is start by trying to remove the 
digit from the Alphanum regex in StandardTokenizerImpl.jflex. You might 
want to rename alphanum after such a move. That may be as far as you 
need to go.


- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 22 12:43:47 2008
Return-Path: <java-user-return-36308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39763 invoked from network); 22 Sep 2008 12:43:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Sep 2008 12:43:47 -0000
Received: (qmail 81163 invoked by uid 500); 22 Sep 2008 12:43:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81126 invoked by uid 500); 22 Sep 2008 12:43:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81115 invoked by uid 99); 22 Sep 2008 12:43:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 05:43:38 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zzzhc.starfire@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 12:42:39 +0000
Received: by gxk6 with SMTP id 6so2843616gxk.5
        for <java-user@lucene.apache.org>; Mon, 22 Sep 2008 05:42:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=/199XeLoZWHveu4xtkSdsJjT5f10XJlF0TrpMyskOQI=;
        b=QTf8Nt91ztN+8SpFrS+vxpSYtL1+2AK17Dr1On5598Nj5yvVzmYLpuNHLD4vUF9+xa
         3k2upNJMgmqsf7h8jtbEoxWsoG1Pzx6XDMa9juI5DMaqgNYb/9jlZxNDAMPw7JGsvcr8
         fIX5CpI91hMc2GU4kNws3eOzygBapWCRyeWoc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=gPElTJ7ZOa5T+RfhWVJnLKER6AoVwIeHLYkLSp9S+xiEyvXc2ESVTGYn1LBb/8jFCc
         D6QNw6NWyV5PPtAEXYXQP5pDIVRA7e5tGRoS0LPaX/oH0+focfqPVL1a+jdPmmAPcBTE
         mnPlTvDM8zwG8nObZflHsaPLWMyWvzv/K5jrA=
Received: by 10.151.44.18 with SMTP id w18mr4316882ybj.64.1222087332529;
        Mon, 22 Sep 2008 05:42:12 -0700 (PDT)
Received: by 10.151.112.7 with HTTP; Mon, 22 Sep 2008 05:42:12 -0700 (PDT)
Message-ID: <4397aa520809220542h29e2a2bbk3990728bafbb3048@mail.gmail.com>
Date: Mon, 22 Sep 2008 20:42:12 +0800
From: "=?GB2312?B?u8azyQ==?=" <zzzhc.starfire@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: StandardAnalyzer exclude numbers
In-Reply-To: <48D7913D.3030305@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_62742_16331521.1222087332523"
References: <20080922131619.im4yxiucao4kg884@webmail.tera.gr>
	 <48D7913D.3030305@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_62742_16331521.1222087332523
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: base64
Content-Disposition: inline

d2h5IG5vdCB1c2UgYSB0b2tlbiBmaWx0ZXI/CgpPbiBNb24sIFNlcCAyMiwgMjAwOCBhdCA4OjM2
IFBNLCBNYXJrIE1pbGxlciA8bWFya3JtaWxsZXJAZ21haWwuY29tPiB3cm90ZToKCj4gamltQHRl
cmEuZ3Igd3JvdGU6Cj4KPj4gSGVsbG8KPj4KPj4gSXMgaXQgcG9zc2libGUgdG8gZXhjbHVkZSBu
dW1iZXJzIHVzaW5nIFN0YW5kYXJkQW5hbHl6ZXIganVzdCBsaWtlCj4+IFNpbXBsZUFuYWx5emVy
Pwo+Pgo+PiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0KPj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2Vy
LXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRz
LCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4+Cj4+ICBJdHMgcG9z
c2libGUgYnV0IGl0cyB0cmlja3kuIFlvdSB3b3VsZCB3YW50IHRvIGNvcHkgdGhlIFN0YW5kYXJk
QW5hbHl6ZXIKPiBpbnRvIHlvdXIgb3duIEFuYWx5emVyIGFuZCB0aGVuIG1vZGlmeSB0aGUgZ3Jh
bW1hci4KPiBTdGFuZGFyZFRva2VuaXplckltcGwuamZsZXggaXMgd2hlcmUgdG8gbG9vaywgYnV0
IHlvdSB3aWxsIGhhdmUgdG8gbGVhcm4gaG93Cj4gdG8gdXNlL2NvbXBpbGUgamZsZXggKGxvb2sg
YXQgdGhlIGJ1aWxkIGZpbGUpIHRvIGJ1aWxkIHRoZSBwYXJzZXIgY2xhc3Nlcy4KPiBXaGF0IHlv
dSB3b3VsZCBkbyB0aG91Z2gsIGlzIHN0YXJ0IGJ5IHRyeWluZyB0byByZW1vdmUgdGhlIGRpZ2l0
IGZyb20gdGhlCj4gQWxwaGFudW0gcmVnZXggaW4gU3RhbmRhcmRUb2tlbml6ZXJJbXBsLmpmbGV4
LiBZb3UgbWlnaHQgd2FudCB0byByZW5hbWUKPiBhbHBoYW51bSBhZnRlciBzdWNoIGEgbW92ZS4g
VGhhdCBtYXkgYmUgYXMgZmFyIGFzIHlvdSBuZWVkIHRvIGdvLgo+Cj4KPiAtIE1hcmsKPgo+Cj4g
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2Ny
aWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDog
amF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcKPgo+CgoKLS0gCtXiuPbKwL3n08zI59K7
yci/qsb0tcTDxQrDxc3iysfO3s/etcS7xLqutPPErgrEx7j2us3O0sqnyKXNrNH5tqvO97XEyMsK
16K2qNKq1NrV4rqutqzW0MPUyqe3vc/yCg==
------=_Part_62742_16331521.1222087332523--

From java-user-return-36309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 22 12:50:34 2008
Return-Path: <java-user-return-36309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45472 invoked from network); 22 Sep 2008 12:50:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Sep 2008 12:50:33 -0000
Received: (qmail 97377 invoked by uid 500); 22 Sep 2008 12:50:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96891 invoked by uid 500); 22 Sep 2008 12:50:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96880 invoked by uid 99); 22 Sep 2008 12:50:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 05:50:24 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.152 as permitted sender)
Received: from [72.14.220.152] (HELO fg-out-1718.google.com) (72.14.220.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 12:49:25 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1471813fgb.27
        for <java-user@lucene.apache.org>; Mon, 22 Sep 2008 05:49:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=QJQRHUNlGVHmmaPgWR1t8+ODtS52mF3hHsrgeJgH3J4=;
        b=aceEytigG0BavNi35TyILues35TMceKcriH77da8SZ3K1kpiB+S8LUnaO/u0yOr2sc
         aZByKsbXi67HqXfhppoVqdQO+5ncUMg8O1D7/XGjynqfHLR5L87cUojx8ph6Dc6CAn+v
         2+0itOj4DJzk1j2OFfhV6PmMFI6tS5YPWxKzI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=tEiThU8DZM/VwOO7B3GgkhC30kpAlLw6xugPZFJFhZtQ19g1WArhWq7+v82zWumRku
         ABeIQ2Q7eV6uH58ixUgv96m8NWq2eKeFMXw/ghicgp0SMfrUMwhq4PyfPcDm39KYkv0K
         0ZuwrchWGr40tUGKCi/IwzgRUQ9DdfOAtTrwQ=
Received: by 10.86.93.19 with SMTP id q19mr4751242fgb.4.1222087780774;
        Mon, 22 Sep 2008 05:49:40 -0700 (PDT)
Received: by 10.86.76.4 with HTTP; Mon, 22 Sep 2008 05:49:40 -0700 (PDT)
Message-ID: <359a92830809220549i76278e63r8bff9a31ce0c8d1e@mail.gmail.com>
Date: Mon, 22 Sep 2008 08:49:40 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How specify the analyzer when created query with api?
In-Reply-To: <c82dedc70809220146l32781a61td1b01bffa489cbe6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18305_26450825.1222087780775"
References: <c82dedc70809220146l32781a61td1b01bffa489cbe6@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_18305_26450825.1222087780775
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

What do you mean when you say "trying to use the lucene api to build
 queries"?
Are you trying to use BooleanQuery? If so, you either construct specific
clauses yourself (presumably by, say, tokenizing things yourself and
creating TermQuerys, PhraseQuerys, etc.) which *don't* need an
analyzer, or add Querys that you get from running stuff through
QueryParser that has a constructor that takes an Analyzer.

Code snippets or more specific questions would be a great help <G>...
Imagine yourself trying to respond to an e-mail like you sent. There
isn't enough information there to really understand the problem you're
trying to solve, so I have to guess.

Best
Erick

On Mon, Sep 22, 2008 at 4:46 AM, Giannandrea Castaldi <anti_spam71@yahoo.com
> wrote:

> Hi,
> In my webapp I'm trying to use the lucene api to build  queries
> instead of the QueryParser but I haven't found out where to specify
> the Analyzer. Any help?
> Thanks.
>
> jean71
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_18305_26450825.1222087780775--

From java-user-return-36310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 22 12:51:17 2008
Return-Path: <java-user-return-36310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45978 invoked from network); 22 Sep 2008 12:51:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Sep 2008 12:51:17 -0000
Received: (qmail 155 invoked by uid 500); 22 Sep 2008 12:51:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99033 invoked by uid 500); 22 Sep 2008 12:51:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99022 invoked by uid 99); 22 Sep 2008 12:51:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 05:51:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 74.125.78.25 as permitted sender)
Received: from [74.125.78.25] (HELO ey-out-2122.google.com) (74.125.78.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 12:50:08 +0000
Received: by ey-out-2122.google.com with SMTP id 6so375400eyi.53
        for <java-user@lucene.apache.org>; Mon, 22 Sep 2008 05:50:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=U6cXEItAubfIKs9GEoT8V+6xX4YxlP2KMT7dTlEiYp8=;
        b=Gqj6lzwAzI+5h9fdhtZee3DCEwG24WbqpbKWweaHBrefW1ZPm7T0M+mumhU4GH4nu/
         LAJg/Na5VjIqoEAaScp5huApZVTCnqlnaYAN8UlYReDOAn2vnNyakk0kUftBVqhedeiR
         GP4zc5gHnhJl+E6Q/MXDz17rQiBKP5RqSjVpo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=PjOM3S0XMO7ycmMOmy7F6W2VsgoumGCI3hMmCAZs8iQ6RAiKz6jIFxElWrait6qyDn
         2ns/Nd5Cq4x4gEhfYaoKhzoPuJyzYT4JFTJLHIke+5oz/vvIiq8ztAmfkesmR4vTKKSV
         nvEPQPLsZhxEONCHLWYL5iaRU+/MyFnhme9DI=
Received: by 10.210.27.20 with SMTP id a20mr4854107eba.119.1222087823531;
        Mon, 22 Sep 2008 05:50:23 -0700 (PDT)
Received: from ?192.168.1.101? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 7sm15115eyb.1.2008.09.22.05.50.21
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 22 Sep 2008 05:50:22 -0700 (PDT)
Message-ID: <48D7948B.4030804@gmail.com>
Date: Mon, 22 Sep 2008 08:50:19 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.16 (X11/20080725)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: StandardAnalyzer exclude numbers
References: <20080922131619.im4yxiucao4kg884@webmail.tera.gr>	 <48D7913D.3030305@gmail.com> <4397aa520809220542h29e2a2bbk3990728bafbb3048@mail.gmail.com>
In-Reply-To: <4397aa520809220542h29e2a2bbk3990728bafbb3048@mail.gmail.com>
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Agreed. I am always diving into that analyzer too fast <g> Possibly
premature optimization thoughts as well. But scanning the token after in
a filter and breaking/skipping if you find a number will be much easier
and possibly not too much slower. Depends on how involved you are/want
to get I suppose. Personally I would prefer to start a new analyzer for
such a significant change, but for the average Lucene user, pre/post
processing is always going to make more sense. Plus there is enough
overlap in the code that I can see plenty of people preferring not to
split off.

 wrote:
> why not use a token filter?
>
> On Mon, Sep 22, 2008 at 8:36 PM, Mark Miller <markrmiller@gmail.com> wrote:
>
>   
>> jim@tera.gr wrote:
>>
>>     
>>> Hello
>>>
>>> Is it possible to exclude numbers using StandardAnalyzer just like
>>> SimpleAnalyzer?
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>  Its possible but its tricky. You would want to copy the StandardAnalyzer
>>>       
>> into your own Analyzer and then modify the grammar.
>> StandardTokenizerImpl.jflex is where to look, but you will have to learn how
>> to use/compile jflex (look at the build file) to build the parser classes.
>> What you would do though, is start by trying to remove the digit from the
>> Alphanum regex in StandardTokenizerImpl.jflex. You might want to rename
>> alphanum after such a move. That may be as far as you need to go.
>>
>>
>> - Mark
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 22 12:55:29 2008
Return-Path: <java-user-return-36311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49748 invoked from network); 22 Sep 2008 12:55:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Sep 2008 12:55:29 -0000
Received: (qmail 4114 invoked by uid 500); 22 Sep 2008 12:55:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3529 invoked by uid 500); 22 Sep 2008 12:55:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3518 invoked by uid 99); 22 Sep 2008 12:55:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 05:55:18 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 12:54:19 +0000
Received: by nf-out-0910.google.com with SMTP id g16so525385nfd.15
        for <java-user@lucene.apache.org>; Mon, 22 Sep 2008 05:54:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=5KWiuQ38/hP7LlXGU2a43z5ds5s6xI0s23IKylTeb1k=;
        b=VEvkuoWHUr+CZbLCTwbmVVW7FlSmV9aDLSUQW4HalXpEebjHhjx3DB5PQRGCDLZvAS
         TBLHcRPO2U/NvWvaxdA7nEzhz1/AeX6OAXTlhz+sMQO52LtWQu1EcvJEsmIuoCk167/X
         bb6qVvLQ056VOSsNA2GnsFi1XA03zPXzujDHU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=ROwkjk2qkueIOiIJkim4/yx5l18xMEPUkcVYf8+DW9475+5wl6W3CnKtsXxNl/Feri
         6dXCVRCOwWkdUUV1Ql/+N5H0biFBtsCzrFNQoYvvejduQm3p9fdxTp+A6g4JGPI5LNNk
         dE0TbFPlxbNMatYgG0fR8VjXW1x5XJ9o6MNiU=
Received: by 10.86.23.17 with SMTP id 17mr4740748fgw.32.1222088074634;
        Mon, 22 Sep 2008 05:54:34 -0700 (PDT)
Received: by 10.86.76.4 with HTTP; Mon, 22 Sep 2008 05:54:34 -0700 (PDT)
Message-ID: <359a92830809220554p14096414gb99a6961f951390a@mail.gmail.com>
Date: Mon, 22 Sep 2008 08:54:34 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multi Field search without Multifieldqueryparser
In-Reply-To: <ea1074540809220229u71bbb076ude44098650583be8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18329_24288305.1222088074642"
References: <b8bb47ad0809211227q107e9579l5a51bde32c32eb52@mail.gmail.com>
	 <48d75c0a.1f15300a.5c54.4df2@mx.google.com>
	 <ea1074540809220229u71bbb076ude44098650583be8@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_18329_24288305.1222088074642
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

One way to address Umesh's concern is to boost terms
you *do* know enough about to assign to a specific field.
But the observation that
"That said, Best solution depends on your requirement"
is right on.....

Best
Erick

On Mon, Sep 22, 2008 at 5:29 AM, Umesh Prasad <umesh.iitk@gmail.com> wrote:

> Hi,
> Having an extra indexed but unstored field is equivalent to having a bag of
> words. So the search results quality will be affected.
> Consider an Example:
>
> Text : ----  President  of USA--
> Other Fields ..
>
> Text : --
> Occupation: President of USA
>
> In both cases searchable-mash = BAG of WORDs, will have President of USA
> hence will score almost same, which would be undesirable.
>
>
> Another solution is to learn the field name of each term in the
> unstructured
> query and then form the query programmatically.
> You will have to write 2 additional subsystems.
> 1. Field Learning System
> 2. Customized Query Tokenizer and Query Parser
>
> That said, Best solution depends on your requirement.
>
> Thanks
> Umesh
> On Mon, Sep 22, 2008 at 2:18 PM, Dino Korah <dckorah@gmail.com> wrote:
>
> > I would think, with the current capabilities of lucene, denormalisation
> is
> > the solution. Create an extra indexed but not stored field called
> > "searchable-mash" which will hold the values from all fields with added
> > words to connect the data like "Male named George Bush whoes occupation
> is
> > President of USA ... Etc" so that you can run that generic query on that
> > field.
> >
> > So you pass "searchable-mash: George bush and president" to query parser.
> >
> > You will pay a penalty here, of bigger index and slower indexing.
> >
> > -----Original Message-----
> > From: Anshul jain [mailto:anshulnirvana@gmail.com]
> > Sent: 21 September 2008 20:27
> > To: java-user@lucene.apache.org
> > Subject: Multi Field search without Multifieldqueryparser
> >
> > Hi!
> >
> > I've a lucene document structured like:
> > Field: Text
> > name: George Bush
> > Sex: Male
> > Occupation: President of USA
> >
> > Now I can have two types of queries:
> > Structured query:
> > name: George Bush AND Occupation: President
> >
> > Unstructured Query:
> > George Bush AND President.
> >
> > After parsing it will become, value: George bush and president.
> > "value" is some default field that has to defined during parsing.
> >
> > But as you can see that this unstructured query would not work because of
> > the structure of the lucene document. Now what I want to do is that when
> an
> > user gives an Unstructured query Lucene should search in all fields.
> (Multi
> > field query parser is an option but we have to define all the fields
> first,
> > and it can be expensive as the query can get really big).
> >
> > I would really appreciate if you can help me out with this.
> >
> > Regards,
> > Anshul Jain
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> Thanking you
>
> Regards
> Umesh Prasad
>

------=_Part_18329_24288305.1222088074642--

From java-user-return-36312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 22 12:59:52 2008
Return-Path: <java-user-return-36312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53462 invoked from network); 22 Sep 2008 12:59:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Sep 2008 12:59:52 -0000
Received: (qmail 12692 invoked by uid 500); 22 Sep 2008 12:59:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12416 invoked by uid 500); 22 Sep 2008 12:59:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12405 invoked by uid 99); 22 Sep 2008 12:59:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 05:59:42 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 12:58:41 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1474401fgb.27
        for <java-user@lucene.apache.org>; Mon, 22 Sep 2008 05:59:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=TQGG/2vHNF0RD8PB55qc0MA9iTuYDxttsUDHAAAroaE=;
        b=UoBK163bASq4Ai25uQDYhStkTY1uvDSY8FLcsvUEZsU80Jt/K0cdl6hOElJkuSk6tN
         1NEtRP3ixu7AflN0epHZ5m2/aU/vGFInLWtVfkBxpNUoKBu5PHpssMSWPUdtRdiHvFWF
         gIJfis/fFWeh9q32+2Lme4nsMR7//C/CyN0F8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=fjw7wW0wt3svwfh2UcoKPST94qoiY9gy45fF/thVMjgK9lzP8qHiA1T5395xPCxbkW
         +zxhP+XCecyCjf+AvKdsOhutUaw6wMoUEfwLIupBytaVIQ6euA6f2kmM43CfsfOH2HIz
         o2BvCl1y7By7HAQro8MVFKZwW/vH6rE7ITptQ=
Received: by 10.86.28.2 with SMTP id b2mr4731123fgb.31.1222088352835;
        Mon, 22 Sep 2008 05:59:12 -0700 (PDT)
Received: by 10.86.76.4 with HTTP; Mon, 22 Sep 2008 05:59:12 -0700 (PDT)
Message-ID: <359a92830809220559p607e6288jc474a3c4c0972886@mail.gmail.com>
Date: Mon, 22 Sep 2008 08:59:12 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Exception while doing sorting
In-Reply-To: <021a01c91ca8$afdf24d0$04000100@sv.us.sonicwall.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18352_1699769.1222088352846"
References: <661170.73589.qm@web50312.mail.re2.yahoo.com>
	 <010a01c91a18$36e95b50$04000100@sv.us.sonicwall.com>
	 <021a01c91ca8$afdf24d0$04000100@sv.us.sonicwall.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_18352_1699769.1222088352846
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Sure, your tomcat instance is assigning some amount of memory
to the JVM that your searcher is running in. Of course, now you're
going to ask me now to increase that number... I have no idea but
I've seen this question multiple times in the mail archive,
so a search there or in the tomcat docs should let you know.

But 12 seconds is still a long time to wait for a search to complete.
Can you tell us more about your search?

For instance, are you opening a searcher for each request? That's bad.
Are you sorting? that can take a long time, but again the first one
will have a performance penalty as things are cached.

There are a number of tips here:
http://wiki.apache.org/lucene-java/ImproveSearchingSpeed

Best
Erick

On Mon, Sep 22, 2008 at 7:45 AM, Ganesh - yahoo <emailgane@yahoo.co.in>wrote:

> My index crossed 5 GB and 5 million documents are indexed.
> My query includes searching and sorting returns 40000 hits.
>
> If i do search from a standalone application, the results are returned in
> 12 seconds. If i perform the same from web application running inside
> Tomcat, out of memory exception is occured.
>
> Could any one clarify it?
>
> Regards
> Ganesh
>
> ----- Original Message ----- From: "Ganesh - yahoo" <emailgane@yahoo.co.in
> >
> To: <java-user@lucene.apache.org>
> Sent: Friday, September 19, 2008 10:56 AM
>
> Subject: Re: Exception while doing sorting
>
>
>  Ok. If i distribure the indexes, whether sorting would be faster?
>>
>> In Lucene user group mailing list, most emails suggests to use single
>> indicies. Searching across the indexes may not be slower?
>>
>>  Lucene uses FieldCache for sorting on non-tokenized field and tries to
>>>> maintain fields from all your 4 millions documents, even if you need
>>>> to sort only 4000 docs.
>>>>
>>> Don't know why Lucene keeps all terms in FieldCache for sorting. It
>> supposed to sort only the hits. Please clarify?
>>
>> Regards
>> Ganesh
>>
>> ----- Original Message ----- From: "Otis Gospodnetic" <
>> otis_gospodnetic@yahoo.com>
>> To: <java-user@lucene.apache.org>
>> Sent: Thursday, September 18, 2008 12:17 PM
>> Subject: Re: Exception while doing sorting
>>
>>
>>  If your index is increasing in size so fast, you should start thinking
>>> about sharding your index (breaking it into multiple smaller indices that
>>> each fits on its server) and searching across them (aka distributed search).
>>>
>>> Yes, Lucene can handle millions of records if run on adequate hardware
>>> and if used correctly.
>>>
>>> Otis
>>> --
>>> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>>>
>>>
>>>
>>> ----- Original Message ----
>>>
>>>> From: Ganesh - yahoo <emailgane@yahoo.co.in>
>>>> To: java-user@lucene.apache.org
>>>> Sent: Thursday, September 18, 2008 12:53:19 AM
>>>> Subject: Re: Exception while doing sorting
>>>>
>>>> My index is growing by 1 million records per day. How much memory do i
>>>> need
>>>> to increase.
>>>>
>>>> What kind of sorting algorithm being used in Lucene. Is this efficient
>>>> enough to handle millions of records.
>>>>
>>>> Whether we could do sorting using our own algorithm?
>>>>
>>>> Regards
>>>> Ganesh
>>>>
>>>> ----- Original Message ----- From: "Fuad Efendi"
>>>> To:
>>>> Sent: Wednesday, September 17, 2008 7:28 PM
>>>> Subject: Re: Exception while doing sorting
>>>>
>>>>
>>>> Increase memory.
>>>>
>>>> Lucene uses FieldCache for sorting on non-tokenized field and tries to
>>>> maintain fields from all your 4 millions documents, even if you need
>>>> to sort only 4000 docs.
>>>> ==============
>>>> http://www.tokenizer.org/bot.html
>>>>
>>>>
>>>> Quoting Ganesh - yahoo :
>>>>
>>>> > Hello all,
>>>> >
>>>> > I am have indexed more than 4 million documents. My query fetches
>>>> > 300,000 hits. If i perform sorting on any field, then tomcat reports
>>>> > out of memory exception.
>>>> > Sometimes the query results may be around 1000, but sorting on any
>>>> > field might take more than 30 - 50 secs.
>>>> >
>>>> > I don't know what's going wrong.
>>>> >
>>>> > My index searcher is static object and it is getting refreshed every
>>>> > minute. JSP pages directly calls the index searcher object and >
>>>> performs
>>>> > search.
>>>> >
>>>> > Regards
>>>> > Ganesh
>>>> >
>>>> >
>>>> > Send instant messages to your online friends
>>>> > http://in.messenger.yahoo.com
>>>> > ---------------------------------------------------------------------
>>>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>> Send instant messages to your online friends
>>>> http://in.messenger.yahoo.com
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>> Send instant messages to your online friends
>> http://in.messenger.yahoo.com
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> Send instant messages to your online friends http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_18352_1699769.1222088352846--

From java-user-return-36313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 22 13:12:05 2008
Return-Path: <java-user-return-36313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63057 invoked from network); 22 Sep 2008 13:12:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Sep 2008 13:12:03 -0000
Received: (qmail 37802 invoked by uid 500); 22 Sep 2008 13:11:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37504 invoked by uid 500); 22 Sep 2008 13:11:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37493 invoked by uid 99); 22 Sep 2008 13:11:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 06:11:47 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dipench@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 13:10:43 +0000
Received: by gxk6 with SMTP id 6so2880575gxk.5
        for <java-user@lucene.apache.org>; Mon, 22 Sep 2008 06:11:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=DBj4Rgq1aK0FGYaLfIGzgXTNIJ9IaRsFq6SGac/INvc=;
        b=JXS7DMi2ZmZvHeglsFajVC7SI4oSkux7mmYtknA3CnN2qB260NnyT/DFyYBJX+ueDo
         Mbz5HuXIW2zsTQlCtcdCB+mBqJublEGQAjHz6iB6ydqtdIqLKihUANwa6SqmFCcQHH0z
         NJIRc9T5Vma4t2mrK1h3glAl41qmEhy7ZXvq8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=erhAJa/WodsNx4Sb56ySqX7qq2NuElMJF9R2eqOK8pvlNy2sAw34xndTbSxx8tbZN9
         pjS9UIqj1JmeFeyAhqR3Ovhn1aK8H3L0Nf90GefvX+N0T+jEx6N6meSj+CVwOfTOWp7a
         5QhUKbEPKiQhZBRyvVLrSV0gchrZHj1plPHzw=
Received: by 10.100.41.9 with SMTP id o9mr2876553ano.84.1222089075633;
        Mon, 22 Sep 2008 06:11:15 -0700 (PDT)
Received: by 10.101.69.15 with HTTP; Mon, 22 Sep 2008 06:11:15 -0700 (PDT)
Message-ID: <1fcccc8a0809220611l54106207r2dc018eb77757ede@mail.gmail.com>
Date: Mon, 22 Sep 2008 18:41:15 +0530
From: Dipen <dipench@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Exception while doing sorting
In-Reply-To: <021a01c91ca8$afdf24d0$04000100@sv.us.sonicwall.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_53919_17359077.1222089075631"
References: <661170.73589.qm@web50312.mail.re2.yahoo.com>
	 <010a01c91a18$36e95b50$04000100@sv.us.sonicwall.com>
	 <021a01c91ca8$afdf24d0$04000100@sv.us.sonicwall.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_53919_17359077.1222089075631
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

@ganesh:
For increasing memory in tomcat, you wanna increase it in CATALINA_OPTS in
catalina.sh file
add this :  -Xmx1500m which means it shud not use more than 1500 megs or
-Xms500m should have atleast 500 megs





On Mon, Sep 22, 2008 at 5:15 PM, Ganesh - yahoo <emailgane@yahoo.co.in>wrote:

> My index crossed 5 GB and 5 million documents are indexed.
> My query includes searching and sorting returns 40000 hits.
>
> If i do search from a standalone application, the results are returned in
> 12 seconds. If i perform the same from web application running inside
> Tomcat, out of memory exception is occured.
>
> Could any one clarify it?
>
> Regards
> Ganesh
>
> ----- Original Message ----- From: "Ganesh - yahoo" <emailgane@yahoo.co.in
> >
> To: <java-user@lucene.apache.org>
> Sent: Friday, September 19, 2008 10:56 AM
>
> Subject: Re: Exception while doing sorting
>
>
>  Ok. If i distribure the indexes, whether sorting would be faster?
>>
>> In Lucene user group mailing list, most emails suggests to use single
>> indicies. Searching across the indexes may not be slower?
>>
>>  Lucene uses FieldCache for sorting on non-tokenized field and tries to
>>>> maintain fields from all your 4 millions documents, even if you need
>>>> to sort only 4000 docs.
>>>>
>>> Don't know why Lucene keeps all terms in FieldCache for sorting. It
>> supposed to sort only the hits. Please clarify?
>>
>> Regards
>> Ganesh
>>
>> ----- Original Message ----- From: "Otis Gospodnetic" <
>> otis_gospodnetic@yahoo.com>
>> To: <java-user@lucene.apache.org>
>> Sent: Thursday, September 18, 2008 12:17 PM
>> Subject: Re: Exception while doing sorting
>>
>>
>>  If your index is increasing in size so fast, you should start thinking
>>> about sharding your index (breaking it into multiple smaller indices that
>>> each fits on its server) and searching across them (aka distributed search).
>>>
>>> Yes, Lucene can handle millions of records if run on adequate hardware
>>> and if used correctly.
>>>
>>> Otis
>>> --
>>> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>>>
>>>
>>>
>>> ----- Original Message ----
>>>
>>>> From: Ganesh - yahoo <emailgane@yahoo.co.in>
>>>> To: java-user@lucene.apache.org
>>>> Sent: Thursday, September 18, 2008 12:53:19 AM
>>>> Subject: Re: Exception while doing sorting
>>>>
>>>> My index is growing by 1 million records per day. How much memory do i
>>>> need
>>>> to increase.
>>>>
>>>> What kind of sorting algorithm being used in Lucene. Is this efficient
>>>> enough to handle millions of records.
>>>>
>>>> Whether we could do sorting using our own algorithm?
>>>>
>>>> Regards
>>>> Ganesh
>>>>
>>>> ----- Original Message ----- From: "Fuad Efendi"
>>>> To:
>>>> Sent: Wednesday, September 17, 2008 7:28 PM
>>>> Subject: Re: Exception while doing sorting
>>>>
>>>>
>>>> Increase memory.
>>>>
>>>> Lucene uses FieldCache for sorting on non-tokenized field and tries to
>>>> maintain fields from all your 4 millions documents, even if you need
>>>> to sort only 4000 docs.
>>>> ==============
>>>> http://www.tokenizer.org/bot.html
>>>>
>>>>
>>>> Quoting Ganesh - yahoo :
>>>>
>>>> > Hello all,
>>>> >
>>>> > I am have indexed more than 4 million documents. My query fetches
>>>> > 300,000 hits. If i perform sorting on any field, then tomcat reports
>>>> > out of memory exception.
>>>> > Sometimes the query results may be around 1000, but sorting on any
>>>> > field might take more than 30 - 50 secs.
>>>> >
>>>> > I don't know what's going wrong.
>>>> >
>>>> > My index searcher is static object and it is getting refreshed every
>>>> > minute. JSP pages directly calls the index searcher object and >
>>>> performs
>>>> > search.
>>>> >
>>>> > Regards
>>>> > Ganesh
>>>> >
>>>> >
>>>> > Send instant messages to your online friends
>>>> > http://in.messenger.yahoo.com
>>>> > ---------------------------------------------------------------------
>>>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>> Send instant messages to your online friends
>>>> http://in.messenger.yahoo.com
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>> Send instant messages to your online friends
>> http://in.messenger.yahoo.com
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> Send instant messages to your online friends http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_53919_17359077.1222089075631--

From java-user-return-36314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 22 14:02:27 2008
Return-Path: <java-user-return-36314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94713 invoked from network); 22 Sep 2008 14:02:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Sep 2008 14:02:26 -0000
Received: (qmail 34365 invoked by uid 500); 22 Sep 2008 14:02:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33752 invoked by uid 500); 22 Sep 2008 14:02:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33740 invoked by uid 99); 22 Sep 2008 14:02:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 07:02:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of g.castaldi@gmail.com designates 66.249.82.225 as permitted sender)
Received: from [66.249.82.225] (HELO wx-out-0506.google.com) (66.249.82.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 14:01:16 +0000
Received: by wx-out-0506.google.com with SMTP id h28so390244wxd.20
        for <java-user@lucene.apache.org>; Mon, 22 Sep 2008 07:01:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=1fZe1i26vkBe2+gFYu75we4/yXboWdOwl9ArFoWye1Q=;
        b=OI5fhyIlCsazWBaMqCP3veGjb/S+jqKCmXortQb9Ud8SuzIGvyZm0kQNDO+EIR5qP0
         +pNEj8j7pZMjcdb2fsYzwPLUFPFc79gR5TEEj6qj/89cUB+zKq8ROMDoPXWuCVuoESVu
         9ViqUMEH/lligoZQ57x2M85n4B/K342o9LuPw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=o9IS9ehVQ+QITnZu+MUDCPflffMAE3/EZM15D/cw0kh5XD7IlqKgdrSoXEhoMAW4pp
         rpKA9GJsN6+5HjkYlNw5KKxESvmCGBV9NoJ2lib96CoAUadqaY3fsKSHYINnGly80ZH9
         A0+n9tgeWBaQzmnMn4KaWoA4YPdAGdylRQ/Os=
Received: by 10.151.143.14 with SMTP id v14mr7362572ybn.108.1222092109145;
        Mon, 22 Sep 2008 07:01:49 -0700 (PDT)
Received: by 10.150.181.13 with HTTP; Mon, 22 Sep 2008 07:01:49 -0700 (PDT)
Message-ID: <c82dedc70809220701n2fc6f3d6l90d00e882548945f@mail.gmail.com>
Date: Mon, 22 Sep 2008 16:01:49 +0200
From: "Giannandrea Castaldi" <g.castaldi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How specify the analyzer when created query with api?
In-Reply-To: <359a92830809220549i76278e63r8bff9a31ce0c8d1e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <c82dedc70809220146l32781a61td1b01bffa489cbe6@mail.gmail.com>
	 <359a92830809220549i76278e63r8bff9a31ce0c8d1e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, Sep 22, 2008 at 2:49 PM, Erick Erickson <erickerickson@gmail.com> wrote:
> What do you mean when you say "trying to use the lucene api to build
>  queries"?
> Are you trying to use BooleanQuery? If so, you either construct specific
> clauses yourself (presumably by, say, tokenizing things yourself and
> creating TermQuerys, PhraseQuerys, etc.) which *don't* need an
> analyzer, or add Querys that you get from running stuff through
> QueryParser that has a constructor that takes an Analyzer.
>
> Code snippets or more specific questions would be a great help <G>...
> Imagine yourself trying to respond to an e-mail like you sent. There
> isn't enough information there to really understand the problem you're
> trying to solve, so I have to guess.

Sorry, my question was indeed too generic.
I've written several tests to take confidence with behavior of Lucene,
all using the StandardAnalyzer and the QueryParser. All the tests
pass.
Now I'm trying to write the same tests using
Term/TermQuery/BooleanQuery but they don't works. Now I've found out
that the problem is that using directly Term/TermQuery/BooleanQuery
I'm not specifying the analyzer and then the query is not correct.
Here one test with the use of the QueryParser, that works, and the
current vesion with Term that doesn't work:

    @Test
    public void testSimpleSearch() throws Exception
    {
        LuceneContext luceneContext = new LuceneContext();
        Document luceneInAction = luceneContext.createDocument("Lucene
in action", 193, "9.90");
        Document luceneForDummies =
luceneContext.createDocument("Lucene for dummies", 245, "11.50");
        Document tomcatInAction = luceneContext.createDocument("Tomcat
in action", 728, "110.30");
        luceneContext.addDocument(luceneInAction);
        luceneContext.addDocument(luceneForDummies);
        luceneContext.addDocument(tomcatInAction);
        luceneContext.closeIndex();
        QueryParser queryParser = new QueryParser(LuceneContext.TITLE,
new StandardAnalyzer());
        Hits result = luceneContext.search(queryParser.parse("Lucene"));
        assertEquals(result, Arrays.asList(luceneInAction, luceneForDummies));
    }

   @Test
    public void testSimpleSearch() throws Exception
    {
        LuceneContext luceneContext = new LuceneContext();
        Document luceneInAction = luceneContext.createDocument("Lucene
in action", 193, "9.90");
        Document luceneForDummies =
luceneContext.createDocument("Lucene for dummies", 245, "11.50");
        Document tomcatInAction = luceneContext.createDocument("Tomcat
in action", 728, "110.30");
        luceneContext.addDocument(luceneInAction);
        luceneContext.addDocument(luceneForDummies);
        luceneContext.addDocument(tomcatInAction);
        luceneContext.closeIndex();
        Hits result = luceneContext.search(new TermQuery(new
Term(LuceneContext.TITLE, "Lucene")));
        assertEquals(result, Arrays.asList(luceneInAction, luceneForDummies));
    }

Now, in our webapp, to execute query on the index we compose a query
as string passed to QueryParser. We've read on the lucene
documentation that from code is better compose a BooleanQuery using
Term/TermQuery/... and then I'm evaluting how do it.
Thanks.
jean71

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 22 14:41:37 2008
Return-Path: <java-user-return-36315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16379 invoked from network); 22 Sep 2008 14:41:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Sep 2008 14:41:36 -0000
Received: (qmail 7766 invoked by uid 500); 22 Sep 2008 14:41:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7582 invoked by uid 500); 22 Sep 2008 14:41:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7571 invoked by uid 99); 22 Sep 2008 14:41:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 07:41:27 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gustavo.corral@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 14:40:28 +0000
Received: by gxk6 with SMTP id 6so3026148gxk.5
        for <java-user@lucene.apache.org>; Mon, 22 Sep 2008 07:40:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=yrEfre6hj6CFrHhvvNpQA4pmYTkUFBANwjgt4Vl9JMc=;
        b=oE/sEWoJ/Pa7OcLzLkbC9SdKB0dkxav+fDr09Niv/miH12akgQne/HdTsAO+7IfMyu
         F/QxL3C30zrpUfbawPY0DGl1zc8Hee0WRuPbBJ6cjHnUVpys6gjnfu1mxGlEnjJ96nWa
         umhbA1JR69euL43guc63VGp6bcFsOc7UW3Ijs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=QVxRN+R7z1LvgV2YNTlkS5IJLQrXs3PFIiMIFeshjrVdUUgASq3NJMzh1JwlMNQDv1
         1WI7vfzGnChWEhjcGHPBCMKA9rehneqIkKO2kXFLxF8UB6mL96FznXbpEHkQe/TCJmM4
         ssoVOS/UOvLA6JMO3GzHT7lQksE9IQuExlLMs=
Received: by 10.100.255.17 with SMTP id c17mr3030935ani.76.1222094401379;
        Mon, 22 Sep 2008 07:40:01 -0700 (PDT)
Received: by 10.100.163.13 with HTTP; Mon, 22 Sep 2008 07:40:01 -0700 (PDT)
Message-ID: <2bfa20eb0809220740h4917aa60n30b165744267173c@mail.gmail.com>
Date: Mon, 22 Sep 2008 09:40:01 -0500
From: "Gustavo Corral" <gustavo.corral@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: eXist, Lucene and XQuery
In-Reply-To: <e8aa138c0809220220u7189102q7e48750ab8fcb657@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_68251_4092043.1222094401402"
References: <2bfa20eb0809201410i2d30cee3i8da1d4a602946504@mail.gmail.com>
	 <e8aa138c0809220220u7189102q7e48750ab8fcb657@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_68251_4092043.1222094401402
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks a lot Adam,

actually I'm returning now a plain ValueSequence instead a NodeSet and all
is working great now. It seems like NodeSet needs a predefined order to all
the algorithms work in the correct way.

Gustavo

------=_Part_68251_4092043.1222094401402--

From java-user-return-36316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 22 14:52:06 2008
Return-Path: <java-user-return-36316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22385 invoked from network); 22 Sep 2008 14:52:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Sep 2008 14:52:06 -0000
Received: (qmail 26075 invoked by uid 500); 22 Sep 2008 14:51:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25784 invoked by uid 500); 22 Sep 2008 14:51:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25773 invoked by uid 99); 22 Sep 2008 14:51:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 07:51:54 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 14:50:52 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: StandardTokenizer and Korean grouping with alphanum
Date: Mon, 22 Sep 2008 10:51:02 -0400
Message-ID: <9294E20AED46934EA459020706463F94EF39D2@SUEXCL-02.ad.syr.edu>
In-Reply-To: <48D723DE.2080303@nuix.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: StandardTokenizer and Korean grouping with alphanum
Thread-Index: Ackcbre7dxHOK7caQBe8vjffzVHE5QATYm6g
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Daniel,

On 09/22/2008 at 12:49 AM, Daniel Noll wrote:
> I have a question about Korean tokenisation.  Currently there
> is a rule in StandardTokenizerImpl.jflex which looks like this:
>=20
> ALPHANUM   =3D ({LETTER}|{DIGIT}|{KOREAN})+

LUCENE-1126 <https://issues.apache.org/jira/browse/LUCENE-1126> changed =
StandaradTokenizerImpl.jflex, for trunk and the looming 2.4 release.  =
ALPHANUM now looks like:

  THAI       =3D [\u0E00-\u0E59]

  // basic word: a sequence of digits & letters
  // (includes Thai to enable ThaiAnalyzer to function)
  ALPHANUM   =3D ({LETTER}|{THAI}|[:digit:])+

  // From the JFlex manual: "the expression that matches everything of
  // <a> not matched by <b> is !(!<a>|<b>)"
  LETTER     =3D !(![:letter:]|{CJ})

In JFlex grammars, [:letter:] is translated to the set of chars that =
return true for Character.isLetter(); this includes Chinese, Japanese =
and Korean characters.  Similarly, [:digit:] -> Character.isDigit().  =
Although the grammar looks different, the result is the same: Korean =
characters are still grouped together with digits, as you noted, rather =
than like Chinese and Japanese, for which each character is separately =
tokenized.

Korean has been treated differently from Chinese and Japanese since =
LUCENE-461 <https://issues.apache.org/jira/browse/LUCENE-461>.  The =
grouping of Hangul with digits was introduced in this issue.

> I'm wondering if there was some good reason why it isn't:
>=20
> ALPHANUM   =3D (({LETTER}|{DIGIT})+|{KOREAN}+)

Since LUCENE-1126 removed separate handling for Korean, it would have to =
be re-introduced in order to make a change like this.=20

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 22 15:43:16 2008
Return-Path: <java-user-return-36317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60548 invoked from network); 22 Sep 2008 15:43:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Sep 2008 15:43:15 -0000
Received: (qmail 89388 invoked by uid 500); 22 Sep 2008 15:42:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89360 invoked by uid 500); 22 Sep 2008 15:42:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89349 invoked by uid 99); 22 Sep 2008 15:42:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 08:42:56 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.200.174 as permitted sender)
Received: from [209.85.200.174] (HELO wf-out-1314.google.com) (209.85.200.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 15:41:56 +0000
Received: by wf-out-1314.google.com with SMTP id 28so1864503wfc.20
        for <java-user@lucene.apache.org>; Mon, 22 Sep 2008 08:42:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=vJohlbYfis05lzJYAWJf5eZIIPkxtBOCWRdG/opq4D0=;
        b=xR+7B6BHCgy72ghQ7bBDswSUgGTYwxdMktFJq0zMhtj5J+4+2Qfb3SCpB51ZEybyXB
         RCe49F+ZvL5618ETo/WRKfQLjr2wCW5FQlK0jHIlVbQYBFVZCVAMtZUXv+6PZYjOL/CT
         lETldvxj9RTYqkOhNnmvpmtMziyFNDVhXvl1o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=AnNGGLUdyMXV48EjFybAnidj2m1khIVMe2+ivjSTvjMvrzfIdZdRnq8SLZelh/LNsI
         LqUemrYH91OcIhoBGiclMe6SDOt3AqUdPYX6ReZ97N0s8YksgeW/fd/bn1O9Z5hRo03P
         pfGjIf9R5PvdiRE5n2EMS/fhwX9AyvtYqBY0c=
Received: by 10.141.115.6 with SMTP id s6mr2050027rvm.239.1222098139979;
        Mon, 22 Sep 2008 08:42:19 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Mon, 22 Sep 2008 08:42:19 -0700 (PDT)
Message-ID: <359a92830809220842g67378e43i9a794cc8454c915b@mail.gmail.com>
Date: Mon, 22 Sep 2008 11:42:19 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How specify the analyzer when created query with api?
In-Reply-To: <c82dedc70809220701n2fc6f3d6l90d00e882548945f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_53335_2184971.1222098139968"
References: <c82dedc70809220146l32781a61td1b01bffa489cbe6@mail.gmail.com>
	 <359a92830809220549i76278e63r8bff9a31ce0c8d1e@mail.gmail.com>
	 <c82dedc70809220701n2fc6f3d6l90d00e882548945f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_53335_2184971.1222098139968
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Right, you can't do that. TermQuerys are low-level, they don't
go through analyzers, you have to do the tokenizing yourself.

StandardAnalyzer, among other things, lowercases the tokens.
If you haven't already got a copy of Luke, please do so as it's
a wonderful tool for seeing what different analyzers do. Not to
mention examining your index. Not to mention....

You could do something like
BooleanQuery bq = new BooleanQuery()
Query q = queryParser.parse("Lucene")
bq.add(q, BooleanClause.Occur.MUST)

Hits result = luceneContext.search(bq);

but I don't know whether this suits your needs.
You're still testing the query parser rather than
testing building BooleanQuerys.

(note, I haven't compiled this....).

BTW, the reason your test is failing is because
of the case issue, I believe. You'd get the
results you expect if you did something like:

luceneContext.search(new TermQuery(new
Term(LuceneContext.TITLE, "lucene")));

(not lower-case "lucene").

You could also do something like getting the
tokenStream from StandardAnalyzer call
next(), adding each returned token as a new
Term to your BooleanQuery.

But TermQuery etc. are different beasts than the
a parsed query.

But isn't this the wonderful thing about tests? They
make your assumptions explicit, and when your
assumptions are incorrect, you find it with much less
pain than in a working program where you say "the most
recent change I made couldn't possibly have broken
anything" <G>.

Best
Erick

On Mon, Sep 22, 2008 at 10:01 AM, Giannandrea Castaldi <g.castaldi@gmail.com
> wrote:

> On Mon, Sep 22, 2008 at 2:49 PM, Erick Erickson <erickerickson@gmail.com>
> wrote:
> > What do you mean when you say "trying to use the lucene api to build
> >  queries"?
> > Are you trying to use BooleanQuery? If so, you either construct specific
> > clauses yourself (presumably by, say, tokenizing things yourself and
> > creating TermQuerys, PhraseQuerys, etc.) which *don't* need an
> > analyzer, or add Querys that you get from running stuff through
> > QueryParser that has a constructor that takes an Analyzer.
> >
> > Code snippets or more specific questions would be a great help <G>...
> > Imagine yourself trying to respond to an e-mail like you sent. There
> > isn't enough information there to really understand the problem you're
> > trying to solve, so I have to guess.
>
> Sorry, my question was indeed too generic.
> I've written several tests to take confidence with behavior of Lucene,
> all using the StandardAnalyzer and the QueryParser. All the tests
> pass.
> Now I'm trying to write the same tests using
> Term/TermQuery/BooleanQuery but they don't works. Now I've found out
> that the problem is that using directly Term/TermQuery/BooleanQuery
> I'm not specifying the analyzer and then the query is not correct.
> Here one test with the use of the QueryParser, that works, and the
> current vesion with Term that doesn't work:
>
>    @Test
>    public void testSimpleSearch() throws Exception
>    {
>        LuceneContext luceneContext = new LuceneContext();
>        Document luceneInAction = luceneContext.createDocument("Lucene
> in action", 193, "9.90");
>        Document luceneForDummies =
> luceneContext.createDocument("Lucene for dummies", 245, "11.50");
>        Document tomcatInAction = luceneContext.createDocument("Tomcat
> in action", 728, "110.30");
>        luceneContext.addDocument(luceneInAction);
>        luceneContext.addDocument(luceneForDummies);
>        luceneContext.addDocument(tomcatInAction);
>        luceneContext.closeIndex();
>        QueryParser queryParser = new QueryParser(LuceneContext.TITLE,
> new StandardAnalyzer());
>        Hits result = luceneContext.search(queryParser.parse("Lucene"));
>        assertEquals(result, Arrays.asList(luceneInAction,
> luceneForDummies));
>    }
>
>   @Test
>    public void testSimpleSearch() throws Exception
>    {
>        LuceneContext luceneContext = new LuceneContext();
>        Document luceneInAction = luceneContext.createDocument("Lucene
> in action", 193, "9.90");
>        Document luceneForDummies =
> luceneContext.createDocument("Lucene for dummies", 245, "11.50");
>        Document tomcatInAction = luceneContext.createDocument("Tomcat
> in action", 728, "110.30");
>        luceneContext.addDocument(luceneInAction);
>        luceneContext.addDocument(luceneForDummies);
>        luceneContext.addDocument(tomcatInAction);
>        luceneContext.closeIndex();
>        Hits result = luceneContext.search(new TermQuery(new
> Term(LuceneContext.TITLE, "Lucene")));
>        assertEquals(result, Arrays.asList(luceneInAction,
> luceneForDummies));
>    }
>
> Now, in our webapp, to execute query on the index we compose a query
> as string passed to QueryParser. We've read on the lucene
> documentation that from code is better compose a BooleanQuery using
> Term/TermQuery/... and then I'm evaluting how do it.
> Thanks.
> jean71
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_53335_2184971.1222098139968--

From java-user-return-36318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 22 18:43:10 2008
Return-Path: <java-user-return-36318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2079 invoked from network); 22 Sep 2008 18:43:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Sep 2008 18:43:09 -0000
Received: (qmail 40288 invoked by uid 500); 22 Sep 2008 18:42:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40257 invoked by uid 500); 22 Sep 2008 18:42:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40239 invoked by uid 99); 22 Sep 2008 18:42:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 11:42:53 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 18:41:53 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 38B1C71C37F; Mon, 22 Sep 2008 11:42:27 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 3322D71C346
	for <java-user@lucene.apache.org>; Mon, 22 Sep 2008 11:42:27 -0700 (PDT)
Date: Mon, 22 Sep 2008 11:42:27 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Using Hits as document space for new search
In-Reply-To: <19527798.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.62.0809221140060.1659@radix.cryptio.net>
References: <19511672.post@talk.nabble.com> <359a92830809160647g1f37201aq6731a5f099d2d56a@mail.gmail.com>
 <19527798.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: For example,  in my case it's car  searching form.
: First of all i'm telling that i want to search for BMW. System returning set
: of results. 
: In process of viewing results system shows additional criterias for making
: search result more exact, and shows count of result set after adding this
: criteria (..this count is smaller than current result set size, because new
: result is just subset of current result list).

this is generally known as "faceted searching" ... if you search the list 
archives for "facet" or in some cases 'category counts" you'll find 
numerous discussions on how to tackle problems like this.

In general: you don't want to try this using something like the Hits 
class, it's internal behavior is very inefficient forsoemthing like this 
-- building Filters (and caching them) tends to be the way to go 9and you 
can always build a Filter out of a query)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 22 19:58:51 2008
Return-Path: <java-user-return-36319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65791 invoked from network); 22 Sep 2008 19:58:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Sep 2008 19:58:50 -0000
Received: (qmail 12472 invoked by uid 500); 22 Sep 2008 19:58:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12445 invoked by uid 500); 22 Sep 2008 19:58:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12434 invoked by uid 99); 22 Sep 2008 19:58:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 12:58:39 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of g.castaldi@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 19:57:40 +0000
Received: by gxk6 with SMTP id 6so3539157gxk.5
        for <java-user@lucene.apache.org>; Mon, 22 Sep 2008 12:57:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=nzEMt9DPRzYZmFGiMBFkUHC1l/pVUw7ea69uO2rdrLw=;
        b=xMnUEsXvt0lnSU0Xc+joqVpmM2DtNn4AmsDqu3IjezkjeWUNfq1rx4Y7SfXUl9wcqS
         FE6JhsCN4Mnlc99XzryGFA1qWlDpsmOzKqnIQn7kCRZ6uLg1YkJ24Fci9kOvOU01ljnI
         ub9b/6Ae7n8hTSGCf4Zq0PSyH0dJHpsXDpTrU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=omzw8/c0f9vABAYi3++gIqrM+9bMarxtIrVE5/VMlrMZKNign0m0XHZCHquCJcGtLx
         fehQrDfBfRWHP4W52+sGbIbijRNVAQM70uKND81C8QrvH9HsNHFiag5ui8CLK1r6//b7
         U5naWtlcZxR7MKEPtAFCUISm6+Up/oJ2Z8oYY=
Received: by 10.142.90.16 with SMTP id n16mr1612696wfb.130.1222113432863;
        Mon, 22 Sep 2008 12:57:12 -0700 (PDT)
Received: by 10.143.28.6 with HTTP; Mon, 22 Sep 2008 12:57:12 -0700 (PDT)
Message-ID: <c82dedc70809221257q18a930e6mdaed7fc8e2d2ac54@mail.gmail.com>
Date: Mon, 22 Sep 2008 21:57:12 +0200
From: "Giannandrea Castaldi" <g.castaldi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How specify the analyzer when created query with api?
In-Reply-To: <359a92830809220842g67378e43i9a794cc8454c915b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <c82dedc70809220146l32781a61td1b01bffa489cbe6@mail.gmail.com>
	 <359a92830809220549i76278e63r8bff9a31ce0c8d1e@mail.gmail.com>
	 <c82dedc70809220701n2fc6f3d6l90d00e882548945f@mail.gmail.com>
	 <359a92830809220842g67378e43i9a794cc8454c915b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, Sep 22, 2008 at 5:42 PM, Erick Erickson <erickerickson@gmail.com> wrote:
...
>
> But isn't this the wonderful thing about tests? They
> make your assumptions explicit, and when your
> assumptions are incorrect, you find it with much less
> pain than in a working program where you say "the most
> recent change I made couldn't possibly have broken
> anything" <G>.

Yes, I completely agree with you.

jean71

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 22 21:41:41 2008
Return-Path: <java-user-return-36320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30884 invoked from network); 22 Sep 2008 21:41:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Sep 2008 21:41:41 -0000
Received: (qmail 78485 invoked by uid 500); 22 Sep 2008 21:41:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78453 invoked by uid 500); 22 Sep 2008 21:41:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78442 invoked by uid 99); 22 Sep 2008 21:41:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 14:41:29 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.62.39.19] (HELO serv01.siteground199.com) (209.62.39.19)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 21:40:29 +0000
Received: from [88.207.144.76] (port=23993 helo=[192.168.1.37])
	by serv01.siteground199.com with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.69)
	(envelope-from <jcantonio@arcetis.com>)
	id 1Kht9N-0005iY-Sx
	for java-user@lucene.apache.org; Mon, 22 Sep 2008 16:40:58 -0500
Message-ID: <48D810D3.9070503@arcetis.com>
Date: Mon, 22 Sep 2008 23:40:35 +0200
From: Jean-Claude Antonio <jcantonio@arcetis.com>
Reply-To: jcantonio@arcetis.com
Organization: Arcetis
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Query attached words
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - serv01.siteground199.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - arcetis.com
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

If I had a file with the following content:
...
object.method();
...
I would like to be able to query for
object
method
object.method

My guess is that I should store not only "object.method", but also 
"object" and "method" as I cannot query *method.
Any other suggestion?

Kind regards,

JClaude




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 22 22:13:42 2008
Return-Path: <java-user-return-36321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54153 invoked from network); 22 Sep 2008 22:13:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Sep 2008 22:13:41 -0000
Received: (qmail 31860 invoked by uid 500); 22 Sep 2008 22:13:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31819 invoked by uid 500); 22 Sep 2008 22:13:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31806 invoked by uid 99); 22 Sep 2008 22:13:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 15:13:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 22:12:30 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 952A971C470; Mon, 22 Sep 2008 15:12:33 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 911E071C325
	for <java-user@lucene.apache.org>; Mon, 22 Sep 2008 15:12:33 -0700 (PDT)
Date: Mon, 22 Sep 2008 15:12:33 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher.search
In-Reply-To: <48D3537F.8020401@nuix.com>
Message-ID: <Pine.LNX.4.62.0809221432050.1659@radix.cryptio.net>
References: <682882.35954.qm@web50312.mail.re2.yahoo.com> <48CF2124.3090501@nuix.com>
 <Pine.LNX.4.62.0809161143560.12858@radix.cryptio.net> <48D075DD.5050407@nuix.com>
 <Pine.LNX.4.62.0809171135050.2301@radix.cryptio.net> <48D3537F.8020401@nuix.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: We're not using TopDocCollector right now, as we're still using Hits.
: Performing some operation over every result is just one use case.  We also
: have to deal with the user scrolling the display.  Currently this works
: acceptably using the same java.util.List model for both cases. Sometimes a
: bulk operation needs to iterate over the items more than once, which makes it
: trickier to invert (I guess we'd have to perform the search twice.  And then

Hits doesn't give you any advantage here either -- you still have to 
execute the search twice one the user scrolls past the end of the list of 
docs fetched so far, that second search is just happening under the covers 
so you don't see it -- and you have no control over it.  you can't give 
Hits any hint about how much big to make the queue on each pass, you can't 
aren't given any indication when it's happening so you can pop up a 
"please wait" cursor or anything.

That (in my opinion) is the fundemental problem with Hits: it does too 
much under the covers.

: > At the end of the day: people switching to using TopDocsCollector instead of
: > Hits are no worse off when trying to iterate over every result in a
: > ginormous result set, they're just have to define "ginormous" for
: > themselves, and the get an OOM right away instead of once they iterate up to
: > that many.
: 
: This is effectively our problem, if it fails fast the user just says "well why
: couldn't I even see the first 10 results?"  It's much better to fail with an
: OOM later when retrieving result someBigValue + 1.

but that's really a differnet use case from what i was describing (knowing 
in advance that you definitely want to iterate over all results) 

if you're dealing with a UI, go ahead and give TopDocsCollector a small 
limit, something managable and enough to show the user the first N that 
they want to see ... but now *you* control what N is, and *you* can decide 
if/when to fetch N (or some different amount) more docs based the actions 
the user takes.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 22 23:03:29 2008
Return-Path: <java-user-return-36322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84726 invoked from network); 22 Sep 2008 23:03:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Sep 2008 23:03:29 -0000
Received: (qmail 2846 invoked by uid 500); 22 Sep 2008 23:03:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2820 invoked by uid 500); 22 Sep 2008 23:03:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2809 invoked by uid 99); 22 Sep 2008 23:03:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 16:03:18 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.90.179] (HELO ik-out-1112.google.com) (66.249.90.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 23:02:17 +0000
Received: by ik-out-1112.google.com with SMTP id c30so1026022ika.5
        for <java-user@lucene.apache.org>; Mon, 22 Sep 2008 16:02:47 -0700 (PDT)
Received: by 10.210.109.20 with SMTP id h20mr5632336ebc.129.1222124567586;
        Mon, 22 Sep 2008 16:02:47 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id 33sm5295533nfu.7.2008.09.22.16.02.45
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 22 Sep 2008 16:02:46 -0700 (PDT)
Cc: java-user@lucene.apache.org
Message-Id: <365B11BE-7CFA-448B-A76A-AF77B2E5FEE2@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: Michael McCandless <lucene@mikemccandless.com>
In-Reply-To: <83F634F2-4A47-4BDD-BE2D-4D3AC7F61902@mikemccandless.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Background merge hit exception
Date: Mon, 22 Sep 2008 19:02:42 -0400
References: <a206fb7e0809171324g6320551cp4c4a7613314afc01@mail.gmail.com> <631B98C8-69CE-40DC-AA17-3CDFA0270DCF@mikemccandless.com> <a206fb7e0809181613g68d882b4h2308f219ec0b5873@mail.gmail.com> <83F634F2-4A47-4BDD-BE2D-4D3AC7F61902@mikemccandless.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


OK I found one path whereby optimize would detect that the  
ConcurrentMergeScheduler had hit an exception while merging in a BG  
thread, and correctly throw an IOException back to its caller, but  
fail to set the root cause in that exception.  I just committed it, so  
it should be fixed in 2.4:

     https://issues.apache.org/jira/browse/LUCENE-1397

Mike

Michael McCandless wrote:

>
> vivek sar wrote:
>
>> Thanks Mike for the insight. I did check the stdout log and found it
>> was complaining of not having enough disk space. I thought we need
>> only x2 of the index size. Our index size is 10G (max) and we had 45G
>> left on that parition - should it still complain of the space?
>
> Is there a reader open on the index while optimize is running?  That  
> ties up potentially another 1X.
>
> Are you certain you're closing all previously open readers?
>
> On Linux, because the semantics is "delete on last close", it's hard  
> to detect when you have IndexReaders still open because an "ls"  
> won't show the deleted files, yet, they are still consuming bytes on  
> disk until the last open file handle is closed.  You can try running  
> "lsof" to see which files are held open, while optimize is running?
>
> Also, if you can call IndexWriter.setInfoStream(...) for all of the  
> operations below, I can peak at it to try to see why it's using up  
> so much intermediate disk space.
>
>> Some comments/questions on other issues you raised,
>>
>>
>> We have 2 threads that index the data in two different indexes and
>> then we merge them into a master index with following call,
>>
>>   masterWriter.addIndexesNoOptimize(indices);
>>
>> Once the smaller indices have merged into the master index we delete
>> the smaller indices.
>>
>> This process runs every 5 minutes. Master Index can grow up to 10G
>> before we partition it - move it to other directory and start a new
>> master index.
>>
>> Every hour we then optimize the master index using,
>>
>>      writer.optimize(optimizeSegment);    //where optimizeSegment =  
>> 10
>
> How long does that optimize take?  And what do you do with the  
> every-5-minutes job while optimize is running?  Do you run it,  
> anyway, sharing the same writer (ie you're calling  
> addIndexesNoOptimize while another thread is running the optimize)?
>
>>
>> Here are my questions,
>>
>> 1) Is this process flawed in terms of performance and efficiency?  
>> What
>> would you recommend?
>
> Actually I think your approach is the right approach.
>>
>> 2) When you say "partial optimize" what do you mean by that?
>
> Actually, it's what you're already doing (passing 10 to optimize).   
> This means the index just has to reduce itself to <= 10 segments,  
> instead of the normal 1 segment for a full optimize.
>
> Still I find that particular merge being done somewhat odd: it was  
> merging 7 segments, the first of which was immense, and the final 6  
> were tiny.  It's not an efficient merge to do.  Seeing the  
> infoStream output might help explain what led to that...
>
>>
>> 3) In Lucene 2.3 "segment merging is done in a background thread" -
>> how does it work, ie, how does it know which segments to merge? What
>> would cause this background merge exception?
>
> The selection of segments to merge, and when, is done by the  
> LogByteSizeMergePolicy, which you can swap out for your own merge  
> policy (should not in general be necessary).  Once a merge is  
> selected, the execution of that merge is controlled by  
> ConcurrentMergeScheduler, which runs merges in background threads.   
> You can also swap that out (eg for SerialMergeScheduler, which uses  
> the FG thread to merging, like Lucene used to before 2.3).
>
> I think the background merge exception is often disk full, but in  
> general it can be anything that went wrong while merging.  Such  
> exceptions won't corrupt your index because the merge only commits  
> the changes to the index if it completes successfully.
>
>>
>> 4) Can we turn off "background merge" if I'm running the optimize
>> every hour in any case? How do we turn it off?
>
> Yes: IndexWriter.setMergeScheduler(new SerialMergeScheduler()) gets  
> you back to the old (fg thread) way of running merges.  But in  
> general this gets you worse net performance, unless you are already  
> using multiple threads when adding documents.
>
> Mike


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 22 23:27:15 2008
Return-Path: <java-user-return-36323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99255 invoked from network); 22 Sep 2008 23:27:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Sep 2008 23:27:15 -0000
Received: (qmail 29987 invoked by uid 500); 22 Sep 2008 23:27:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29957 invoked by uid 500); 22 Sep 2008 23:27:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29945 invoked by uid 99); 22 Sep 2008 23:27:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 16:27:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adam.saltiel@gmail.com designates 209.85.200.172 as permitted sender)
Received: from [209.85.200.172] (HELO wf-out-1314.google.com) (209.85.200.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 23:26:02 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2092820wfc.20
        for <java-user@lucene.apache.org>; Mon, 22 Sep 2008 16:26:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=cMcLO43MlR3A6At+G6GEjiWfXUBXgXvHrlzv+6dGGGI=;
        b=hM9zAEKQtvkel6KzXe9vz/6cWblig+VxCvq54SvZniO/L72gYNl9LeOvbtcHAFdbXW
         ERbmTpIzYyFCg6jbfm6csUz1hCayBquyY7FL5a8RxtafE6dNnYpt+LRTpWj1ePZZqHNE
         fDTIxDBDgXIddgmc9oJ5gdzFeHVVSCdn07KoQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=jm59J+Pa252cQIFCl7WGVYXY0a0puUQPtUx9YQbXVt+ugRLhTQSMwWXCKQQ/DGN6De
         6wJqSYQ596zKDsSaml6OYVLCcuJWC7hjA962JulFYUjWjZ0dt6iG/DQO1teC+Isx6ZeP
         YhuzqLyAONWu4pygjZaxOw4VV/Giq8HBOBSgs=
Received: by 10.142.200.20 with SMTP id x20mr1701590wff.108.1222125985253;
        Mon, 22 Sep 2008 16:26:25 -0700 (PDT)
Received: by 10.142.14.21 with HTTP; Mon, 22 Sep 2008 16:26:25 -0700 (PDT)
Message-ID: <e8aa138c0809221626g57a3eb5foc1d7065c3ce9b592@mail.gmail.com>
Date: Tue, 23 Sep 2008 00:26:25 +0100
From: adasal <adam.saltiel@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: eXist, Lucene and XQuery
In-Reply-To: <2bfa20eb0809220740h4917aa60n30b165744267173c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_112193_7663657.1222125985256"
References: <2bfa20eb0809201410i2d30cee3i8da1d4a602946504@mail.gmail.com>
	 <e8aa138c0809220220u7189102q7e48750ab8fcb657@mail.gmail.com>
	 <2bfa20eb0809220740h4917aa60n30b165744267173c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_112193_7663657.1222125985256
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

OK, right, that figures.

Adam

2008/9/22 Gustavo Corral <gustavo.corral@gmail.com>

> Thanks a lot Adam,
>
> actually I'm returning now a plain ValueSequence instead a NodeSet and all
> is working great now. It seems like NodeSet needs a predefined order to all
> the algorithms work in the correct way.
>
> Gustavo
>

------=_Part_112193_7663657.1222125985256--

From java-user-return-36324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 23 02:22:18 2008
Return-Path: <java-user-return-36324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51352 invoked from network); 23 Sep 2008 02:22:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Sep 2008 02:22:18 -0000
Received: (qmail 91723 invoked by uid 500); 23 Sep 2008 02:22:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91690 invoked by uid 500); 23 Sep 2008 02:22:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91679 invoked by uid 99); 23 Sep 2008 02:22:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 19:22:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO web1.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Sep 2008 02:21:08 +0000
Received: from [192.168.222.60] (unknown [192.168.222.60])
	by web1.nuix.com.au (Postfix) with ESMTP id 7D0134ED8EA
	for <java-user@lucene.apache.org>; Tue, 23 Sep 2008 12:20:50 +1000 (EST)
Message-ID: <48D852B9.9050704@nuix.com>
Date: Tue, 23 Sep 2008 12:21:45 +1000
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: StandardTokenizer and Korean grouping with alphanum
References: <9294E20AED46934EA459020706463F94EF39D2@SUEXCL-02.ad.syr.edu>
In-Reply-To: <9294E20AED46934EA459020706463F94EF39D2@SUEXCL-02.ad.syr.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Steven A Rowe wrote:
> Korean has been treated differently from Chinese and Japanese since
> LUCENE-461 <https://issues.apache.org/jira/browse/LUCENE-461>.  The
> grouping of Hangul with digits was introduced in this issue.

Certainly I found LUCENE-461 during my search, and certainly grouping 
together the words is a lot better *if* there are spaces between them. 
Although in several cases I have found there are no spaces, it's 
relatively rare and the way it's breaking it now appears to produce 
better hits than when it was separating them out.

Really I was just wondering about the digits being mixed in.  Maybe it's 
legitimate to have a digit in the middle of a sequence of Hangul, like 
when we have AB3F for a product code with Latin characters.

You're right though, to do differently it will require a lot of jiggery 
to restrict ranges down to each language again instead of using 
[:letter:] which is much more convenient.

Daniel


-- 
Daniel Noll                            Forensic and eDiscovery Software
Senior Developer                              The world's most advanced
Nuix                                                email data analysis
http://nuix.com/                                and eDiscovery software

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 23 04:52:54 2008
Return-Path: <java-user-return-36325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25118 invoked from network); 23 Sep 2008 04:52:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Sep 2008 04:52:54 -0000
Received: (qmail 84530 invoked by uid 500); 23 Sep 2008 04:52:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84506 invoked by uid 500); 23 Sep 2008 04:52:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84494 invoked by uid 99); 23 Sep 2008 04:52:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Sep 2008 21:52:42 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.84.227] (HELO smtp124.mail.mud.yahoo.com) (209.191.84.227)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 23 Sep 2008 04:51:39 +0000
Received: (qmail 37076 invoked from network); 23 Sep 2008 04:52:11 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=491z9NjEPNBUXqEPL8RUPKwVd/FzEwLBmzVjkP60oCKH6ixltd0ewmh1wCh99EgvRpijPW0F4MG2S5PBDMPSgb2RsF2Xv4Ey8EtsYojcHvpQSJ7ell8kgHSTBbN7V+jW49HL/6+k+Z3ZybW2pNMMQfT14SkDPO9sN8glt2BiiZ4=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp124.mail.mud.yahoo.com with SMTP; 23 Sep 2008 04:52:09 -0000
X-YMail-OSG: mwefJeQVM1lptYteC1_u5mV.z02GegdqxKHf9a9Opt5hnWFE.QGz6tdQp2MvcL6HyUCtmk9F12HJflYZOagw3MzJuaiI3KCEOD6kNZcmlBAVFh8.sA41VaVt8gpMwQ.p1KAdp7BPfN45MdL_i74YFJU.
X-Yahoo-Newman-Property: ymail-3
Message-ID: <025801c91d38$22feae60$04000100@sv.us.sonicwall.com>
From: "Ganesh - yahoo" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <661170.73589.qm@web50312.mail.re2.yahoo.com> <010a01c91a18$36e95b50$04000100@sv.us.sonicwall.com> <021a01c91ca8$afdf24d0$04000100@sv.us.sonicwall.com> <359a92830809220559p607e6288jc474a3c4c0972886@mail.gmail.com>
Subject: Re: Exception while doing sorting
Date: Tue, 23 Sep 2008 10:21:58 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

System Specification:
Processor speed: 2Ghz
Ram: 3 GB

IndexDB size 5 GB.
Total documents indexed: 5.8 million.

To collect hits, i have replaced Hits object with TopFieldDocs. This has 
improved the search performance better. Sorting is faster on date / long 
field, but it is very slow on string field. In a standalone application it 
took 10 - 20 secs to dispaly the results sorted on string field. [I am not 
opening indexsearcher every time].

Regards
Ganesh



----- Original Message ----- 
From: "Erick Erickson" <erickerickson@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Monday, September 22, 2008 6:29 PM
Subject: Re: Exception while doing sorting


> Sure, your tomcat instance is assigning some amount of memory
> to the JVM that your searcher is running in. Of course, now you're
> going to ask me now to increase that number... I have no idea but
> I've seen this question multiple times in the mail archive,
> so a search there or in the tomcat docs should let you know.
>
> But 12 seconds is still a long time to wait for a search to complete.
> Can you tell us more about your search?
>
> For instance, are you opening a searcher for each request? That's bad.
> Are you sorting? that can take a long time, but again the first one
> will have a performance penalty as things are cached.
>
> There are a number of tips here:
> http://wiki.apache.org/lucene-java/ImproveSearchingSpeed
>
> Best
> Erick
>
> On Mon, Sep 22, 2008 at 7:45 AM, Ganesh - yahoo 
> <emailgane@yahoo.co.in>wrote:
>
>> My index crossed 5 GB and 5 million documents are indexed.
>> My query includes searching and sorting returns 40000 hits.
>>
>> If i do search from a standalone application, the results are returned in
>> 12 seconds. If i perform the same from web application running inside
>> Tomcat, out of memory exception is occured.
>>
>> Could any one clarify it?
>>
>> Regards
>> Ganesh
>>
>> ----- Original Message ----- From: "Ganesh - yahoo" 
>> <emailgane@yahoo.co.in
>> >
>> To: <java-user@lucene.apache.org>
>> Sent: Friday, September 19, 2008 10:56 AM
>>
>> Subject: Re: Exception while doing sorting
>>
>>
>>  Ok. If i distribure the indexes, whether sorting would be faster?
>>>
>>> In Lucene user group mailing list, most emails suggests to use single
>>> indicies. Searching across the indexes may not be slower?
>>>
>>>  Lucene uses FieldCache for sorting on non-tokenized field and tries to
>>>>> maintain fields from all your 4 millions documents, even if you need
>>>>> to sort only 4000 docs.
>>>>>
>>>> Don't know why Lucene keeps all terms in FieldCache for sorting. It
>>> supposed to sort only the hits. Please clarify?
>>>
>>> Regards
>>> Ganesh
>>>
>>> ----- Original Message ----- From: "Otis Gospodnetic" <
>>> otis_gospodnetic@yahoo.com>
>>> To: <java-user@lucene.apache.org>
>>> Sent: Thursday, September 18, 2008 12:17 PM
>>> Subject: Re: Exception while doing sorting
>>>
>>>
>>>  If your index is increasing in size so fast, you should start thinking
>>>> about sharding your index (breaking it into multiple smaller indices 
>>>> that
>>>> each fits on its server) and searching across them (aka distributed 
>>>> search).
>>>>
>>>> Yes, Lucene can handle millions of records if run on adequate hardware
>>>> and if used correctly.
>>>>
>>>> Otis
>>>> --
>>>> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>>>>
>>>>
>>>>
>>>> ----- Original Message ----
>>>>
>>>>> From: Ganesh - yahoo <emailgane@yahoo.co.in>
>>>>> To: java-user@lucene.apache.org
>>>>> Sent: Thursday, September 18, 2008 12:53:19 AM
>>>>> Subject: Re: Exception while doing sorting
>>>>>
>>>>> My index is growing by 1 million records per day. How much memory do i
>>>>> need
>>>>> to increase.
>>>>>
>>>>> What kind of sorting algorithm being used in Lucene. Is this efficient
>>>>> enough to handle millions of records.
>>>>>
>>>>> Whether we could do sorting using our own algorithm?
>>>>>
>>>>> Regards
>>>>> Ganesh
>>>>>
>>>>> ----- Original Message ----- From: "Fuad Efendi"
>>>>> To:
>>>>> Sent: Wednesday, September 17, 2008 7:28 PM
>>>>> Subject: Re: Exception while doing sorting
>>>>>
>>>>>
>>>>> Increase memory.
>>>>>
>>>>> Lucene uses FieldCache for sorting on non-tokenized field and tries to
>>>>> maintain fields from all your 4 millions documents, even if you need
>>>>> to sort only 4000 docs.
>>>>> ==============
>>>>> http://www.tokenizer.org/bot.html
>>>>>
>>>>>
>>>>> Quoting Ganesh - yahoo :
>>>>>
>>>>> > Hello all,
>>>>> >
>>>>> > I am have indexed more than 4 million documents. My query fetches
>>>>> > 300,000 hits. If i perform sorting on any field, then tomcat reports
>>>>> > out of memory exception.
>>>>> > Sometimes the query results may be around 1000, but sorting on any
>>>>> > field might take more than 30 - 50 secs.
>>>>> >
>>>>> > I don't know what's going wrong.
>>>>> >
>>>>> > My index searcher is static object and it is getting refreshed every
>>>>> > minute. JSP pages directly calls the index searcher object and >
>>>>> performs
>>>>> > search.
>>>>> >
>>>>> > Regards
>>>>> > Ganesh
>>>>> >
>>>>> >
>>>>> > Send instant messages to your online friends
>>>>> > http://in.messenger.yahoo.com
>>>>> > ---------------------------------------------------------------------
>>>>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>> Send instant messages to your online friends
>>>>> http://in.messenger.yahoo.com
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>> Send instant messages to your online friends
>>> http://in.messenger.yahoo.com
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>> Send instant messages to your online friends 
>> http://in.messenger.yahoo.com
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 23 09:33:15 2008
Return-Path: <java-user-return-36326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69429 invoked from network); 23 Sep 2008 09:33:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Sep 2008 09:33:14 -0000
Received: (qmail 64864 invoked by uid 500); 23 Sep 2008 09:33:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64838 invoked by uid 500); 23 Sep 2008 09:33:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64827 invoked by uid 99); 23 Sep 2008 09:33:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Sep 2008 02:33:03 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Sep 2008 09:32:03 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Ki4G3-0004WH-TL
	for java-user@lucene.apache.org; Tue, 23 Sep 2008 02:32:36 -0700
Message-ID: <19624222.post@talk.nabble.com>
Date: Tue, 23 Sep 2008 02:32:35 -0700 (PDT)
From: nukie <stas.bandera@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using Hits as document space for new search
In-Reply-To: <Pine.LNX.4.62.0809221140060.1659@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: stas.bandera@gmail.com
References: <19511672.post@talk.nabble.com> <359a92830809160647g1f37201aq6731a5f099d2d56a@mail.gmail.com> <19527798.post@talk.nabble.com> <Pine.LNX.4.62.0809221140060.1659@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks a lot, i've discovered about Solr , column classification and other
interesting things. ;)

Best

Stas


hossman wrote:
> 
> 
> : For example,  in my case it's car  searching form.
> : First of all i'm telling that i want to search for BMW. System returning
> set
> : of results. 
> : In process of viewing results system shows additional criterias for
> making
> : search result more exact, and shows count of result set after adding
> this
> : criteria (..this count is smaller than current result set size, because
> new
> : result is just subset of current result list).
> 
> this is generally known as "faceted searching" ... if you search the list 
> archives for "facet" or in some cases 'category counts" you'll find 
> numerous discussions on how to tackle problems like this.
> 
> In general: you don't want to try this using something like the Hits 
> class, it's internal behavior is very inefficient forsoemthing like this 
> -- building Filters (and caching them) tends to be the way to go 9and you 
> can always build a Filter out of a query)
> 
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Using-Hits-as-document-space-for-new-search-tp19511672p19624222.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 23 10:52:31 2008
Return-Path: <java-user-return-36327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20061 invoked from network); 23 Sep 2008 10:52:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Sep 2008 10:52:31 -0000
Received: (qmail 96954 invoked by uid 500); 23 Sep 2008 10:52:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96606 invoked by uid 500); 23 Sep 2008 10:52:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96594 invoked by uid 99); 23 Sep 2008 10:52:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Sep 2008 03:52:21 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshulnirvana@gmail.com designates 209.85.198.226 as permitted sender)
Received: from [209.85.198.226] (HELO rv-out-0506.google.com) (209.85.198.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Sep 2008 10:51:23 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1932934rvb.5
        for <java-user@lucene.apache.org>; Tue, 23 Sep 2008 03:51:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=gFNePFAHYF1PD4uP5WbGNQDrMaPiFrnws8tZ+Ob5VEY=;
        b=MwdreTFy+8aLcm1cvrGila6DA9BNfgTY9FII2sfdraHFxEQfx+a4npoiUFjcSTVaaY
         nO5JEVIOs3IkYLBt6SZG8S5cjTGPLJ436RtyEJeeD07w4yv31KU4RGPixJBB0PXxca2X
         bBSs6qHnCvTSKb8wmjlBNoj44nP4W6RIsA/B4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=vXnrEoGLsdoTHxMEhyR0UGJOeKhiWJ2hQjwOfB27rfvyKzukFIA1/2L5j2++627C8t
         V2n8XcA2hjGhPNaHbZCKVhBAm4SMa5+uc4o/ontw6hMT17Xcw5ChrDPBscFVedFIPw2i
         Ees8X7hSoQDyxN5jwV2MbChjSJPYNsi/Hp3p8=
Received: by 10.114.148.2 with SMTP id v2mr6115901wad.202.1222167107342;
        Tue, 23 Sep 2008 03:51:47 -0700 (PDT)
Received: by 10.114.39.6 with HTTP; Tue, 23 Sep 2008 03:51:47 -0700 (PDT)
Message-ID: <b8bb47ad0809230351s1214d0faue53810d9140181ad@mail.gmail.com>
Date: Tue, 23 Sep 2008 12:51:47 +0200
From: "Anshul jain" <anshulnirvana@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multi Field search without Multifieldqueryparser
In-Reply-To: <48d75c0a.1f15300a.5c54.4df2@mx.google.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <b8bb47ad0809211227q107e9579l5a51bde32c32eb52@mail.gmail.com>
	 <48d75c0a.1f15300a.5c54.4df2@mx.google.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Here is what I'm trying to do:

say a lucene document:
name: abc ^10
organization: xyz ^3

^10 and ^3 are boosts in the document.

now if I query name: abc ^5 AND organization: xyz this will work.

but if I query (default_field): abc^5 AND xyz this won't work.

Now what I want is that a text can be associated with more than one field. i.e.

(field1,field2,field3):value
name,(default_field),title: abc^10
organization,(default_field),institute: xyz^3

then both of my queries will work.

Is it possible to do so in lucene without changing the source?
If no then can anyone please explain the indexing and searching
mechanism for lucene, so that I can start working on it.

The solution given by the java-users won't work for me as I do not
want to add all the contents of the document in a single field and
then search for that field, as this would increase the index size and
I've to index more than 10 million documents. Also
multifieldqueryparser will make it query execution inefficient, as
there will be thousands of fields.

If I start storing just a single field as: (default_field): "name abc
organization xyz", then it is possible that some other documents might
get selected that are not relevant. Also i want to boost individual
fields in a document.

Anshul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 23 11:59:55 2008
Return-Path: <java-user-return-36328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57315 invoked from network); 23 Sep 2008 11:59:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Sep 2008 11:59:55 -0000
Received: (qmail 96568 invoked by uid 500); 23 Sep 2008 11:59:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96534 invoked by uid 500); 23 Sep 2008 11:59:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96523 invoked by uid 99); 23 Sep 2008 11:59:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Sep 2008 04:59:45 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a20.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Sep 2008 11:58:43 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a20.g.dreamhost.com (Postfix) with ESMTP id DD3B9E24B2
	for <java-user@lucene.apache.org>; Tue, 23 Sep 2008 04:58:45 -0700 (PDT)
Message-Id: <411A90B8-7752-4760-A541-639F2B6AA79F@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <b8bb47ad0809230351s1214d0faue53810d9140181ad@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Multi Field search without Multifieldqueryparser
Date: Tue, 23 Sep 2008 07:58:44 -0400
References: <b8bb47ad0809211227q107e9579l5a51bde32c32eb52@mail.gmail.com> <48d75c0a.1f15300a.5c54.4df2@mx.google.com> <b8bb47ad0809230351s1214d0faue53810d9140181ad@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

So, the piece I'm missing is how do you know what field for which  
terms.  In other words how do you know xyz goes against organization  
and abc against name.  Your wording implies that you don't know this  
before hand, yet you are somehow suggesting that Lucene should be able  
to do it.  Correct me if I'm wrong.

-Grant


On Sep 23, 2008, at 6:51 AM, Anshul jain wrote:

> Here is what I'm trying to do:
>
> say a lucene document:
> name: abc ^10
> organization: xyz ^3
>
> ^10 and ^3 are boosts in the document.
>
> now if I query name: abc ^5 AND organization: xyz this will work.
>
> but if I query (default_field): abc^5 AND xyz this won't work.
>
> Now what I want is that a text can be associated with more than one  
> field. i.e.
>
> (field1,field2,field3):value
> name,(default_field),title: abc^10
> organization,(default_field),institute: xyz^3
>
> then both of my queries will work.
>
> Is it possible to do so in lucene without changing the source?
> If no then can anyone please explain the indexing and searching
> mechanism for lucene, so that I can start working on it.
>
> The solution given by the java-users won't work for me as I do not
> want to add all the contents of the document in a single field and
> then search for that field, as this would increase the index size and
> I've to index more than 10 million documents. Also
> multifieldqueryparser will make it query execution inefficient, as
> there will be thousands of fields.
>
> If I start storing just a single field as: (default_field): "name abc
> organization xyz", then it is possible that some other documents might
> get selected that are not relevant. Also i want to boost individual
> fields in a document.
>
> Anshul
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 23 12:26:20 2008
Return-Path: <java-user-return-36329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73640 invoked from network); 23 Sep 2008 12:26:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Sep 2008 12:26:20 -0000
Received: (qmail 27836 invoked by uid 500); 23 Sep 2008 12:26:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27803 invoked by uid 500); 23 Sep 2008 12:26:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27792 invoked by uid 99); 23 Sep 2008 12:26:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Sep 2008 05:26:11 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.237 as permitted sender)
Received: from [209.85.198.237] (HELO rv-out-0506.google.com) (209.85.198.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Sep 2008 12:25:12 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1965699rvb.5
        for <java-user@lucene.apache.org>; Tue, 23 Sep 2008 05:25:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=zLbHa+Zcn+Fi+o25CLPWIwqDaHciXOiYAMfV4/LL3G0=;
        b=gEh/VFOnsqWbLup+WRzmHM/evP5BRTjRPGZiJeoohRfkXoaG54YfpC12EBWHqoRbbP
         az3Gfx56WzFSlTgtZVt2VrA4BRKkWkf7GubTo8inv5IDLd+srCeab3uuCAc/7oa5OKOk
         W+NruWv3Wm0hQfeN1oN968O7+IaSDYMoeodzY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=uLX/6X88+QeZMzlwHmaPP8AaKTrPKEn5tED68ZpfE+6uOaCgvMfsSRVgDx5RXHGNEI
         AgseoQ5aNwIIeGW2yHE2n6j6OSNWFHFJzZQhy0gBT+dvyeX3Is/IMZXQLyWcnvpGqWEl
         vrQxuT33E+nS28C6HgcQyqH7RdXaQFHkICaA0=
Received: by 10.141.197.8 with SMTP id z8mr2676629rvp.157.1222172745718;
        Tue, 23 Sep 2008 05:25:45 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Tue, 23 Sep 2008 05:25:45 -0700 (PDT)
Message-ID: <359a92830809230525j614215b5i472552e5d453c3fe@mail.gmail.com>
Date: Tue, 23 Sep 2008 08:25:45 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, jcantonio@arcetis.com
Subject: Re: Query attached words
In-Reply-To: <48D810D3.9070503@arcetis.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_62146_18135305.1222172745681"
References: <48D810D3.9070503@arcetis.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_62146_18135305.1222172745681
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yes you can query *method. But you have to turn leading wildcards
(which I don't have right on the tips of my fingers, but know it's been
an option for some time now).

But your solution doesn't scale well. If you had
a.b.c.d.e.f.g.h you'd have to store many combinations in order
to do what you want, quickly becoming really, really ugly.

But you could store the tokens
a
.
b
.
c
.
e
.
f
.
g
.
h
by using the appropriate analyzer (or perhaps rolling
your own). Then you could use either PhraseQuerys
or SpanQuerys to do what you want....

Best
Erick

On Mon, Sep 22, 2008 at 5:40 PM, Jean-Claude Antonio
<jcantonio@arcetis.com>wrote:

> Hello,
>
> If I had a file with the following content:
> ...
> object.method();
> ...
> I would like to be able to query for
> object
> method
> object.method
>
> My guess is that I should store not only "object.method", but also "object"
> and "method" as I cannot query *method.
> Any other suggestion?
>
> Kind regards,
>
> JClaude
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_62146_18135305.1222172745681--

From java-user-return-36330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 23 12:35:43 2008
Return-Path: <java-user-return-36330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79671 invoked from network); 23 Sep 2008 12:35:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Sep 2008 12:35:43 -0000
Received: (qmail 44928 invoked by uid 500); 23 Sep 2008 12:35:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44902 invoked by uid 500); 23 Sep 2008 12:35:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44891 invoked by uid 99); 23 Sep 2008 12:35:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Sep 2008 05:35:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshulnirvana@gmail.com designates 209.85.200.168 as permitted sender)
Received: from [209.85.200.168] (HELO wf-out-1314.google.com) (209.85.200.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Sep 2008 12:34:32 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2374681wfc.20
        for <java-user@lucene.apache.org>; Tue, 23 Sep 2008 05:35:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=IL9t9RYx30w0wk+1dkHfnzqoPdJ83dyA8VD1N9Jvimc=;
        b=ayEvueJC+KZaZOJVReT6TW1AFJ2U8h4H4sM5VwkycXCqtywlJWjW11jnBcFhGAmzrR
         jRhcEYcEz1tg62BYZXs7jsMD4MSGdU/xIinXfwLOA7s+LjFh1SZWD0f7SCEmySf6QLnp
         b0zITTl5r+RJx27UzIMWpQRUkZqCVYNIHsf2o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=kSNnAWQRa3QYnK0iKXgxRrYryTfXMNtnvJqE2R4sbi5EpWR8BG3k9RE0e+EZ41fROG
         CXPFTtftiPxD0NjGhLyH0KXhlhvyKF6+vZNs/HUIvZDtG/S/9R0EJ/Jo6cfPzsBA73Sr
         Zel1GB2bRlT/zSCBZ2D+ElRK/1jPvIBRJ+W4k=
Received: by 10.114.175.16 with SMTP id x16mr6209887wae.155.1222173305885;
        Tue, 23 Sep 2008 05:35:05 -0700 (PDT)
Received: by 10.114.39.6 with HTTP; Tue, 23 Sep 2008 05:35:05 -0700 (PDT)
Message-ID: <b8bb47ad0809230535l64208192kdab756ceea5b538f@mail.gmail.com>
Date: Tue, 23 Sep 2008 14:35:05 +0200
From: "Anshul jain" <anshulnirvana@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multi Field search without Multifieldqueryparser
In-Reply-To: <411A90B8-7752-4760-A541-639F2B6AA79F@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <b8bb47ad0809211227q107e9579l5a51bde32c32eb52@mail.gmail.com>
	 <48d75c0a.1f15300a.5c54.4df2@mx.google.com>
	 <b8bb47ad0809230351s1214d0faue53810d9140181ad@mail.gmail.com>
	 <411A90B8-7752-4760-A541-639F2B6AA79F@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

yes you are partly correct

what I need is that lucene should support two type of queries for the
following document:
name: abc^10
organization: xyz^3

structured query:
name: abc and organization: xyz

unstructured query:
default_field: abc ^5 and xyz

But i do not want to create one more field(default_field) that will
contain all the values concatenated in it. Also, even if i get all the
fields during indexing and use it for multi field query parser, then
the query will become very inefficient as there can be thousands of
fields. I think it should clarify my point.



On Tue, Sep 23, 2008 at 1:58 PM, Grant Ingersoll <gsingers@apache.org> wrote:
> So, the piece I'm missing is how do you know what field for which terms.  In
> other words how do you know xyz goes against organization and abc against
> name.  Your wording implies that you don't know this before hand, yet you
> are somehow suggesting that Lucene should be able to do it.  Correct me if
> I'm wrong.
>
> -Grant
>
>
> On Sep 23, 2008, at 6:51 AM, Anshul jain wrote:
>
>> Here is what I'm trying to do:
>>
>> say a lucene document:
>> name: abc ^10
>> organization: xyz ^3
>>
>> ^10 and ^3 are boosts in the document.
>>
>> now if I query name: abc ^5 AND organization: xyz this will work.
>>
>> but if I query (default_field): abc^5 AND xyz this won't work.
>>
>> Now what I want is that a text can be associated with more than one field.
>> i.e.
>>
>> (field1,field2,field3):value
>> name,(default_field),title: abc^10
>> organization,(default_field),institute: xyz^3
>>
>> then both of my queries will work.
>>
>> Is it possible to do so in lucene without changing the source?
>> If no then can anyone please explain the indexing and searching
>> mechanism for lucene, so that I can start working on it.
>>
>> The solution given by the java-users won't work for me as I do not
>> want to add all the contents of the document in a single field and
>> then search for that field, as this would increase the index size and
>> I've to index more than 10 million documents. Also
>> multifieldqueryparser will make it query execution inefficient, as
>> there will be thousands of fields.
>>
>> If I start storing just a single field as: (default_field): "name abc
>> organization xyz", then it is possible that some other documents might
>> get selected that are not relevant. Also i want to boost individual
>> fields in a document.
>>
>> Anshul
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
Anshul Jain

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 23 12:40:36 2008
Return-Path: <java-user-return-36331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82211 invoked from network); 23 Sep 2008 12:40:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Sep 2008 12:40:36 -0000
Received: (qmail 52545 invoked by uid 500); 23 Sep 2008 12:40:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52509 invoked by uid 500); 23 Sep 2008 12:40:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52498 invoked by uid 99); 23 Sep 2008 12:40:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Sep 2008 05:40:27 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Sep 2008 12:39:25 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1867519fgb.27
        for <java-user@lucene.apache.org>; Tue, 23 Sep 2008 05:39:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=bh4YNXlHq3KkBLvAAFKGnih+pydLCCqhQzPZxXmZU5s=;
        b=dsf14eQP80cGIebBScMW2qDwPmNiNxypCQ7KyNXwXie9t5AaPpUUgI/iXDvKms7OTR
         NNOPRAhrwfQPnAfLB+FblRaQZM1KyKC7yo+7YYPnghOpw/7fRJgfGQpRNAdMro8upiD/
         s1z3W0aQxGwzE5t9nHUGX065KdXzESXS8Mdwo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=KAo0Ueg8zKFma4byPaqQ5Tf9BXbFXuTXuj0djNnZsvZC8HKM5HzKha8BSdr6kiGyb+
         QWKPoCLY2yhRYjHq+iPcBzdkKA9Ll6j+MXOZ1pjRa4H5kVG/m6uxnnXHi3Cw4rzcn4W4
         8UN9f3ioaoLhhYCK+RVFt1EJc5fZOgL61dr8A=
Received: by 10.86.70.3 with SMTP id s3mr6029572fga.51.1222173597228;
        Tue, 23 Sep 2008 05:39:57 -0700 (PDT)
Received: by 10.86.76.4 with HTTP; Tue, 23 Sep 2008 05:39:57 -0700 (PDT)
Message-ID: <359a92830809230539v67410f6eydf1844e6201f5167@mail.gmail.com>
Date: Tue, 23 Sep 2008 08:39:57 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Exception while doing sorting
In-Reply-To: <025801c91d38$22feae60$04000100@sv.us.sonicwall.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27098_2911061.1222173597210"
References: <661170.73589.qm@web50312.mail.re2.yahoo.com>
	 <010a01c91a18$36e95b50$04000100@sv.us.sonicwall.com>
	 <021a01c91ca8$afdf24d0$04000100@sv.us.sonicwall.com>
	 <359a92830809220559p607e6288jc474a3c4c0972886@mail.gmail.com>
	 <025801c91d38$22feae60$04000100@sv.us.sonicwall.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_27098_2911061.1222173597210
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

That still seems excessive. Are you measuring your first sort? Lucene
builds up caches to help sort with the first few *sorts* that happen, so
that's a possibility.

But if that isn't the case, I think you need to slap a profiler on the
problem and see where you're spending your time. I'd also be careful
about what you measure when you measure your query. For instance,
I've been fooled by measuring the total time to get an assembled response
and it turned out that the time was spent fetching the documents, NOT
searching/sorting.

Try measuring various operations. In particular comment out anything having
to do with assembling the response. Perhaps just substitute in making a list
of the doc IDs and time *that*. Slowly build back up to your current app,
and
I suspect that one of the steps will cause your time to increase
dramatically.

How many documents are you assembling to respond? If you're assembling
40,000 hits, then 10-20 seconds may not be unreasonable.

Best
Erick

On Tue, Sep 23, 2008 at 12:51 AM, Ganesh - yahoo <emailgane@yahoo.co.in>wrote:

> System Specification:
> Processor speed: 2Ghz
> Ram: 3 GB
>
> IndexDB size 5 GB.
> Total documents indexed: 5.8 million.
>
> To collect hits, i have replaced Hits object with TopFieldDocs. This has
> improved the search performance better. Sorting is faster on date / long
> field, but it is very slow on string field. In a standalone application it
> took 10 - 20 secs to dispaly the results sorted on string field. [I am not
> opening indexsearcher every time].
>
> Regards
> Ganesh
>
>
>
> ----- Original Message ----- From: "Erick Erickson" <
> erickerickson@gmail.com>
> To: <java-user@lucene.apache.org>
> Sent: Monday, September 22, 2008 6:29 PM
>
> Subject: Re: Exception while doing sorting
>
>
>  Sure, your tomcat instance is assigning some amount of memory
>> to the JVM that your searcher is running in. Of course, now you're
>> going to ask me now to increase that number... I have no idea but
>> I've seen this question multiple times in the mail archive,
>> so a search there or in the tomcat docs should let you know.
>>
>> But 12 seconds is still a long time to wait for a search to complete.
>> Can you tell us more about your search?
>>
>> For instance, are you opening a searcher for each request? That's bad.
>> Are you sorting? that can take a long time, but again the first one
>> will have a performance penalty as things are cached.
>>
>> There are a number of tips here:
>> http://wiki.apache.org/lucene-java/ImproveSearchingSpeed
>>
>> Best
>> Erick
>>
>> On Mon, Sep 22, 2008 at 7:45 AM, Ganesh - yahoo <emailgane@yahoo.co.in
>> >wrote:
>>
>>  My index crossed 5 GB and 5 million documents are indexed.
>>> My query includes searching and sorting returns 40000 hits.
>>>
>>> If i do search from a standalone application, the results are returned in
>>> 12 seconds. If i perform the same from web application running inside
>>> Tomcat, out of memory exception is occured.
>>>
>>> Could any one clarify it?
>>>
>>> Regards
>>> Ganesh
>>>
>>> ----- Original Message ----- From: "Ganesh - yahoo" <
>>> emailgane@yahoo.co.in
>>> >
>>> To: <java-user@lucene.apache.org>
>>> Sent: Friday, September 19, 2008 10:56 AM
>>>
>>> Subject: Re: Exception while doing sorting
>>>
>>>
>>>  Ok. If i distribure the indexes, whether sorting would be faster?
>>>
>>>>
>>>> In Lucene user group mailing list, most emails suggests to use single
>>>> indicies. Searching across the indexes may not be slower?
>>>>
>>>>  Lucene uses FieldCache for sorting on non-tokenized field and tries to
>>>>
>>>>> maintain fields from all your 4 millions documents, even if you need
>>>>>> to sort only 4000 docs.
>>>>>>
>>>>>>  Don't know why Lucene keeps all terms in FieldCache for sorting. It
>>>>>
>>>> supposed to sort only the hits. Please clarify?
>>>>
>>>> Regards
>>>> Ganesh
>>>>
>>>> ----- Original Message ----- From: "Otis Gospodnetic" <
>>>> otis_gospodnetic@yahoo.com>
>>>> To: <java-user@lucene.apache.org>
>>>> Sent: Thursday, September 18, 2008 12:17 PM
>>>> Subject: Re: Exception while doing sorting
>>>>
>>>>
>>>>  If your index is increasing in size so fast, you should start thinking
>>>>
>>>>> about sharding your index (breaking it into multiple smaller indices
>>>>> that
>>>>> each fits on its server) and searching across them (aka distributed
>>>>> search).
>>>>>
>>>>> Yes, Lucene can handle millions of records if run on adequate hardware
>>>>> and if used correctly.
>>>>>
>>>>> Otis
>>>>> --
>>>>> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>>>>>
>>>>>
>>>>>
>>>>> ----- Original Message ----
>>>>>
>>>>>  From: Ganesh - yahoo <emailgane@yahoo.co.in>
>>>>>> To: java-user@lucene.apache.org
>>>>>> Sent: Thursday, September 18, 2008 12:53:19 AM
>>>>>> Subject: Re: Exception while doing sorting
>>>>>>
>>>>>> My index is growing by 1 million records per day. How much memory do i
>>>>>> need
>>>>>> to increase.
>>>>>>
>>>>>> What kind of sorting algorithm being used in Lucene. Is this efficient
>>>>>> enough to handle millions of records.
>>>>>>
>>>>>> Whether we could do sorting using our own algorithm?
>>>>>>
>>>>>> Regards
>>>>>> Ganesh
>>>>>>
>>>>>> ----- Original Message ----- From: "Fuad Efendi"
>>>>>> To:
>>>>>> Sent: Wednesday, September 17, 2008 7:28 PM
>>>>>> Subject: Re: Exception while doing sorting
>>>>>>
>>>>>>
>>>>>> Increase memory.
>>>>>>
>>>>>> Lucene uses FieldCache for sorting on non-tokenized field and tries to
>>>>>> maintain fields from all your 4 millions documents, even if you need
>>>>>> to sort only 4000 docs.
>>>>>> ==============
>>>>>> http://www.tokenizer.org/bot.html
>>>>>>
>>>>>>
>>>>>> Quoting Ganesh - yahoo :
>>>>>>
>>>>>> > Hello all,
>>>>>> >
>>>>>> > I am have indexed more than 4 million documents. My query fetches
>>>>>> > 300,000 hits. If i perform sorting on any field, then tomcat reports
>>>>>> > out of memory exception.
>>>>>> > Sometimes the query results may be around 1000, but sorting on any
>>>>>> > field might take more than 30 - 50 secs.
>>>>>> >
>>>>>> > I don't know what's going wrong.
>>>>>> >
>>>>>> > My index searcher is static object and it is getting refreshed every
>>>>>> > minute. JSP pages directly calls the index searcher object and >
>>>>>> performs
>>>>>> > search.
>>>>>> >
>>>>>> > Regards
>>>>>> > Ganesh
>>>>>> >
>>>>>> >
>>>>>> > Send instant messages to your online friends
>>>>>> > http://in.messenger.yahoo.com
>>>>>> >
>>>>>> ---------------------------------------------------------------------
>>>>>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>> Send instant messages to your online friends
>>>>>> http://in.messenger.yahoo.com
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>  Send instant messages to your online friends
>>>> http://in.messenger.yahoo.com
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>  Send instant messages to your online friends
>>> http://in.messenger.yahoo.com
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
> Send instant messages to your online friends http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_27098_2911061.1222173597210--

From java-user-return-36332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 23 12:49:27 2008
Return-Path: <java-user-return-36332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86700 invoked from network); 23 Sep 2008 12:49:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Sep 2008 12:49:27 -0000
Received: (qmail 59444 invoked by uid 500); 23 Sep 2008 12:49:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59403 invoked by uid 500); 23 Sep 2008 12:49:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59392 invoked by uid 99); 23 Sep 2008 12:49:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Sep 2008 05:49:18 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Sep 2008 12:48:19 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1870077fgb.27
        for <java-user@lucene.apache.org>; Tue, 23 Sep 2008 05:48:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Mzq7Jy+gvUl2ZvB/cs98oDylPeUPZh5oouuV03LmHyE=;
        b=kvN99FNXVIrsDrifNRO+waKHockLOs7Wv3bXWPlg+ss969S+nlbctPcF6imoCkLys6
         dfWve9Sbo51L3Pux1vB0ExDUMuLUnNZ90Qj4YZaDgWn8Gsj4s68IFwwTjDwqVlf3VR2a
         ZglLTETz4aeDI1bMSpN32ytm47dKHSd26FR+4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=ZJMaBKd+nc79+gnU79eP4ggIloKsVA/tzUvp/lyYt10CAgqBL4TIJkHzLdVfvQcYKH
         zGsY/KM/Bk2Hp8puGWnBNwjSXjU5+L4QBvCTJX0AqnS6wfxnrsZyOncoePPtA0b8Vtur
         UWcNUqB2Ytt0xUBnXtf5zB2KOcWLPONBeMuOw=
Received: by 10.86.95.20 with SMTP id s20mr6031973fgb.65.1222174131741;
        Tue, 23 Sep 2008 05:48:51 -0700 (PDT)
Received: by 10.86.76.4 with HTTP; Tue, 23 Sep 2008 05:48:51 -0700 (PDT)
Message-ID: <359a92830809230548k291a9ecax30f85ee4ff5a477f@mail.gmail.com>
Date: Tue, 23 Sep 2008 08:48:51 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multi Field search without Multifieldqueryparser
In-Reply-To: <b8bb47ad0809230351s1214d0faue53810d9140181ad@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27128_8708520.1222174131725"
References: <b8bb47ad0809211227q107e9579l5a51bde32c32eb52@mail.gmail.com>
	 <48d75c0a.1f15300a.5c54.4df2@mx.google.com>
	 <b8bb47ad0809230351s1214d0faue53810d9140181ad@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_27128_8708520.1222174131725
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Are you sure you want to be boosting the document fields at
index time? From Hossman

<<<index time field boosts are a way to express things like

'this documents title is worth twice as much as the title of
most documents'.

query time boosts are a way to express
'i care about matches on this clause of my query twice
as much as i do about matches to other clauses of
my query'
>>>

But Lucene isn't magic, it's an engine that you have to
make do what you want. You say

"But i do not want to create one  more field(default_field)
that will contain all the values  concatenated in it"

Is this for theoretical reasons or do you have evidence that this
is unacceptable? You haven't told us how much data you're
indexing, so we have no way to reassure (or warn) you about
trying this.

I suggest you try the "bag of words" solution (this should
not take you more than a few hours) and see if it's
unacceptable before rejecting it.

Best
Erick

On Tue, Sep 23, 2008 at 6:51 AM, Anshul jain <anshulnirvana@gmail.com>wrote:

> Here is what I'm trying to do:
>
> say a lucene document:
> name: abc ^10
> organization: xyz ^3
>
> ^10 and ^3 are boosts in the document.
>
> now if I query name: abc ^5 AND organization: xyz this will work.
>
> but if I query (default_field): abc^5 AND xyz this won't work.
>
> Now what I want is that a text can be associated with more than one field.
> i.e.
>
> (field1,field2,field3):value
> name,(default_field),title: abc^10
> organization,(default_field),institute: xyz^3
>
> then both of my queries will work.
>
> Is it possible to do so in lucene without changing the source?
> If no then can anyone please explain the indexing and searching
> mechanism for lucene, so that I can start working on it.
>
> The solution given by the java-users won't work for me as I do not
> want to add all the contents of the document in a single field and
> then search for that field, as this would increase the index size and
> I've to index more than 10 million documents. Also
> multifieldqueryparser will make it query execution inefficient, as
> there will be thousands of fields.
>
> If I start storing just a single field as: (default_field): "name abc
> organization xyz", then it is possible that some other documents might
> get selected that are not relevant. Also i want to boost individual
> fields in a document.
>
> Anshul
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_27128_8708520.1222174131725--

From java-user-return-36333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 23 12:58:32 2008
Return-Path: <java-user-return-36333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93563 invoked from network); 23 Sep 2008 12:58:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Sep 2008 12:58:32 -0000
Received: (qmail 70698 invoked by uid 500); 23 Sep 2008 12:58:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70669 invoked by uid 500); 23 Sep 2008 12:58:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70658 invoked by uid 99); 23 Sep 2008 12:58:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Sep 2008 05:58:23 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of umesh.iitk@gmail.com designates 209.85.142.187 as permitted sender)
Received: from [209.85.142.187] (HELO ti-out-0910.google.com) (209.85.142.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Sep 2008 12:57:22 +0000
Received: by ti-out-0910.google.com with SMTP id b8so1105046tic.11
        for <java-user@lucene.apache.org>; Tue, 23 Sep 2008 05:57:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=LRmlPQn0ScW78RMsnAe74maPaAbAFsBTbAyj876uyp0=;
        b=rC/YV5AJlRRjoUzh9hqdQhyZH+P68fdElmn4qPAkbVotuli7in1oDT7QK+Z3V791PS
         V2u3YT4cub3Z41eGnR4PuirDbNQtlCkjgzylG9EREHXqxbYSYTk4YQSOw3q7WLAl5Hax
         5JvMY25zy1nEgFYO+xW6POzj6G/rmMQJPqtFE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=xbranRKzuJ7iNyFMUQ8TBh8uVFAYDG1QJkoBFV11RoFASg4a6BU0+/SX6EuZhXwdVI
         hDcTefIxWVLyuQw9aM/8a9m5XfxaSEIv4q8igGq6Mi/AnGa+o4X+6ZkT3eNJIVFz+9Dt
         VJACWEGcwCteMXcQx3sQ678BJe8claB9oHofA=
Received: by 10.110.70.17 with SMTP id s17mr7102815tia.27.1222174657595;
        Tue, 23 Sep 2008 05:57:37 -0700 (PDT)
Received: by 10.110.43.10 with HTTP; Tue, 23 Sep 2008 05:57:37 -0700 (PDT)
Message-ID: <ea1074540809230557u5872f567x8fe7275da2ff05eb@mail.gmail.com>
Date: Tue, 23 Sep 2008 18:27:37 +0530
From: "Umesh Prasad" <umesh.iitk@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multi Field search without Multifieldqueryparser
In-Reply-To: <411A90B8-7752-4760-A541-639F2B6AA79F@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_125278_14736327.1222174657605"
References: <b8bb47ad0809211227q107e9579l5a51bde32c32eb52@mail.gmail.com>
	 <48d75c0a.1f15300a.5c54.4df2@mx.google.com>
	 <b8bb47ad0809230351s1214d0faue53810d9140181ad@mail.gmail.com>
	 <411A90B8-7752-4760-A541-639F2B6AA79F@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_125278_14736327.1222174657605
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On Tue, Sep 23, 2008 at 5:28 PM, Grant Ingersoll <gsingers@apache.org>wrote:

> So, the piece I'm missing is how do you know what field for which terms.
>  In other words how do you know xyz goes against organization and abc
> against name.  Your wording implies that you don't know this before hand,


          I guess this would be the case. The free flowing text search leads
to this issue.


> yet you are somehow suggesting that Lucene should be able to do it.
>  Correct me if I'm wrong.

      I am not sure if Lucene will be able to directly able to do it.
However Indexed Terms in Lucene can certainly be used in learning the field
of a particular word/token.
      One way, would be Lucene Index can be traversed to generated a
Learning System which will be later used to learn the field name of a
particular system. I suggest traversing the termDocs and extracting out the
words and field information which can be stored in a separate DB/Index
(Learning System). This system can then be queried 1st to determine the
field type of word. The additional time that the Learning System will
require should be compensated by having a smaller Index Size.



Thanks
Umesh




>
> -Grant
>
>
>
> On Sep 23, 2008, at 6:51 AM, Anshul jain wrote:
>
>  Here is what I'm trying to do:
>>
>> say a lucene document:
>> name: abc ^10
>> organization: xyz ^3
>>
>> ^10 and ^3 are boosts in the document.
>>
>> now if I query name: abc ^5 AND organization: xyz this will work.
>>
>> but if I query (default_field): abc^5 AND xyz this won't work.
>>
>> Now what I want is that a text can be associated with more than one field.
>> i.e.
>>
>> (field1,field2,field3):value
>> name,(default_field),title: abc^10
>> organization,(default_field),institute: xyz^3
>>
>> then both of my queries will work.
>>
>> Is it possible to do so in lucene without changing the source?
>> If no then can anyone please explain the indexing and searching
>> mechanism for lucene, so that I can start working on it.
>>
>> The solution given by the java-users won't work for me as I do not
>> want to add all the contents of the document in a single field and
>> then search for that field, as this would increase the index size and
>> I've to index more than 10 million documents. Also
>> multifieldqueryparser will make it query execution inefficient, as
>> there will be thousands of fields.
>>
>> If I start storing just a single field as: (default_field): "name abc
>> organization xyz", then it is possible that some other documents might
>> get selected that are not relevant. Also i want to boost individual
>> fields in a document.
>>
>> Anshul
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_125278_14736327.1222174657605--

From java-user-return-36334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 23 13:58:53 2008
Return-Path: <java-user-return-36334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34774 invoked from network); 23 Sep 2008 13:58:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Sep 2008 13:58:53 -0000
Received: (qmail 89244 invoked by uid 500); 23 Sep 2008 13:58:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88748 invoked by uid 500); 23 Sep 2008 13:58:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88737 invoked by uid 99); 23 Sep 2008 13:58:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Sep 2008 06:58:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dckorah@gmail.com designates 72.14.220.157 as permitted sender)
Received: from [72.14.220.157] (HELO fg-out-1718.google.com) (72.14.220.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Sep 2008 13:57:41 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1889231fgb.27
        for <java-user@lucene.apache.org>; Tue, 23 Sep 2008 06:57:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:subject:date
         :mime-version:content-type:content-transfer-encoding:x-mailer
         :thread-index:in-reply-to:x-mimeole:message-id;
        bh=xk727nV5kbvM6gzgqrdMixRK1tVTr9oOVro7MmxcYrI=;
        b=TmLZT2MLvxV8mDQt4s+S0Lpvw0RtfYZF5v8raO/OwfNUaCwB1VONfZSA6dJVPFZsuc
         jfqs2U24/kwM9vyqhgO08dAcjQ5qxrmyc//RomN7nqkQ0mZpWaT3RB6jAeJt0b4vBWbt
         E7nYgXPBxcoDu89f54ASNTy1fuYZCdsneBsfg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:subject:date:mime-version:content-type
         :content-transfer-encoding:x-mailer:thread-index:in-reply-to
         :x-mimeole:message-id;
        b=QumntCv04LeGlr6aINmBBEV6nURIEp4f0uXBrmTGxgqAlcs0rfJa1Xk+tpcL+S9ukg
         nxWnGoHH3gaB0l/6bcEOwrDF6wlYfg3WJoszh/Iwy2h9tOv7YuRvggQXcR9YzIAiBO0u
         ihc7Rk8oTtvMkqCfsrvlW96/2qsAKACxXFagE=
Received: by 10.180.255.1 with SMTP id c1mr3715082bki.23.1222178276532;
        Tue, 23 Sep 2008 06:57:56 -0700 (PDT)
Received: from SCWDEVDINOKVM ([195.2.245.68])
        by mx.google.com with ESMTPS id f6sm1492517nfh.12.2008.09.23.06.57.53
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 23 Sep 2008 06:57:54 -0700 (PDT)
From: "Dino Korah" <dckorah@gmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Multi Field search without Multifieldqueryparser
Date: Tue, 23 Sep 2008 14:56:05 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: AckdhB8G1HpWECkDQOW4n8wrbil7rg==
In-Reply-To: <ea1074540809230557u5872f567x8fe7275da2ff05eb@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3350
Message-ID: <48d8f5e2.06e9300a.0351.ffff9f3a@mx.google.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Just an idea... Along winded one. I'm not sure either.! Pardon me if I am
directing you in the wrong direction


If you add a lucene doc like below into your main index

- Doc 1 -
Field1: rainy today
Field2: rainy yesterday
Field3: weather forcast for tomorrow

- Doc 2 -
Field1: rainy tomorrow
Field2: rainy today
Field3: weather forcast for today


... etc


And if you create something like an inverted index like below

- Doc 1 -
Field: Field1
Value: rainy today

- Doc 2 -
Field: Field2
Value: rainy yesterday

- Doc 3 -
Field: Field3
Value: weather forcast for tomorrow

- Doc 4 -
Field: Field1
Value: rainy tomorrow

- Doc 5 -
Field: Field2
Value: rainy today

- Doc 6 -
Field: Field3
Value: weather forcast for today

And if you run a query on the inverted index to find out the field that is
most probably to match the text you are about to search for in the main
index, I have a feeling that this might work.



-----Original Message-----
From: Umesh Prasad [mailto:umesh.iitk@gmail.com] 
Sent: 23 September 2008 13:58
To: java-user@lucene.apache.org
Subject: Re: Multi Field search without Multifieldqueryparser

On Tue, Sep 23, 2008 at 5:28 PM, Grant Ingersoll <gsingers@apache.org>wrote:

> So, the piece I'm missing is how do you know what field for which terms.
>  In other words how do you know xyz goes against organization and abc 
> against name.  Your wording implies that you don't know this before 
> hand,


          I guess this would be the case. The free flowing text search leads
to this issue.


> yet you are somehow suggesting that Lucene should be able to do it.
>  Correct me if I'm wrong.

      I am not sure if Lucene will be able to directly able to do it.
However Indexed Terms in Lucene can certainly be used in learning the field
of a particular word/token.
      One way, would be Lucene Index can be traversed to generated a
Learning System which will be later used to learn the field name of a
particular system. I suggest traversing the termDocs and extracting out the
words and field information which can be stored in a separate DB/Index
(Learning System). This system can then be queried 1st to determine the
field type of word. The additional time that the Learning System will
require should be compensated by having a smaller Index Size.



Thanks
Umesh




>
> -Grant
>
>
>
> On Sep 23, 2008, at 6:51 AM, Anshul jain wrote:
>
>  Here is what I'm trying to do:
>>
>> say a lucene document:
>> name: abc ^10
>> organization: xyz ^3
>>
>> ^10 and ^3 are boosts in the document.
>>
>> now if I query name: abc ^5 AND organization: xyz this will work.
>>
>> but if I query (default_field): abc^5 AND xyz this won't work.
>>
>> Now what I want is that a text can be associated with more than one
field.
>> i.e.
>>
>> (field1,field2,field3):value
>> name,(default_field),title: abc^10
>> organization,(default_field),institute: xyz^3
>>
>> then both of my queries will work.
>>
>> Is it possible to do so in lucene without changing the source?
>> If no then can anyone please explain the indexing and searching 
>> mechanism for lucene, so that I can start working on it.
>>
>> The solution given by the java-users won't work for me as I do not 
>> want to add all the contents of the document in a single field and 
>> then search for that field, as this would increase the index size and 
>> I've to index more than 10 million documents. Also 
>> multifieldqueryparser will make it query execution inefficient, as 
>> there will be thousands of fields.
>>
>> If I start storing just a single field as: (default_field): "name abc 
>> organization xyz", then it is possible that some other documents 
>> might get selected that are not relevant. Also i want to boost 
>> individual fields in a document.
>>
>> Anshul
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 23 14:56:33 2008
Return-Path: <java-user-return-36335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69470 invoked from network); 23 Sep 2008 14:56:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Sep 2008 14:56:33 -0000
Received: (qmail 2486 invoked by uid 500); 23 Sep 2008 14:56:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2459 invoked by uid 500); 23 Sep 2008 14:56:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2448 invoked by uid 99); 23 Sep 2008 14:56:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Sep 2008 07:56:23 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a1.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Sep 2008 14:55:22 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a1.g.dreamhost.com (Postfix) with ESMTP id 16CE1FE1DF
	for <java-user@lucene.apache.org>; Tue, 23 Sep 2008 07:55:32 -0700 (PDT)
Message-Id: <0B1F9270-13CF-4369-A294-51E21060F109@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <b8bb47ad0809230535l64208192kdab756ceea5b538f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Multi Field search without Multifieldqueryparser
Date: Tue, 23 Sep 2008 10:55:32 -0400
References: <b8bb47ad0809211227q107e9579l5a51bde32c32eb52@mail.gmail.com> <48d75c0a.1f15300a.5c54.4df2@mx.google.com> <b8bb47ad0809230351s1214d0faue53810d9140181ad@mail.gmail.com> <411A90B8-7752-4760-A541-639F2B6AA79F@apache.org> <b8bb47ad0809230535l64208192kdab756ceea5b538f@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Sep 23, 2008, at 8:35 AM, Anshul jain wrote:

> yes you are partly correct
>
> what I need is that lucene should support two type of queries for the
> following document:
> name: abc^10
> organization: xyz^3
>
> structured query:
> name: abc and organization: xyz
>
> unstructured query:
> default_field: abc ^5 and xyz

And what field(s) should "xyz" be searched against?  Again, I ask, how  
do you know what fields "xyz" should go against and why does abc go  
against the default_field?  You've said it shouldn't go against all  
fields (b/c there are thousands of them), and you've said it shouldn't  
go against a catch-all field, but otherwise I still have no clue your  
criteria for what fields xyz should search.  Are you saying that you  
want it to intelligently know that when "xyz" comes in that it should  
search the organization field?

Other than seconding Umesh's or Dino's suggestions of using machine  
learning or heuristics or using some type of templating system, I'm  
not sure what else to offer.  You might look at Solr's Dismax Query  
Parser, which allows you to specify the field structure of queries in  
a multi-field way, but again, I doubt that is wholly what you are  
looking for.

>
>
> But i do not want to create one more field(default_field) that will
> contain all the values concatenated in it. Also, even if i get all the
> fields during indexing and use it for multi field query parser, then
> the query will become very inefficient as there can be thousands of
> fields. I think it should clarify my point.
>
>
>
> On Tue, Sep 23, 2008 at 1:58 PM, Grant Ingersoll  
> <gsingers@apache.org> wrote:
>> So, the piece I'm missing is how do you know what field for which  
>> terms.  In
>> other words how do you know xyz goes against organization and abc  
>> against
>> name.  Your wording implies that you don't know this before hand,  
>> yet you
>> are somehow suggesting that Lucene should be able to do it.   
>> Correct me if
>> I'm wrong.
>>
>> -Grant
>>
>>
>> On Sep 23, 2008, at 6:51 AM, Anshul jain wrote:
>>
>>> Here is what I'm trying to do:
>>>
>>> say a lucene document:
>>> name: abc ^10
>>> organization: xyz ^3
>>>
>>> ^10 and ^3 are boosts in the document.
>>>
>>> now if I query name: abc ^5 AND organization: xyz this will work.
>>>
>>> but if I query (default_field): abc^5 AND xyz this won't work.
>>>
>>> Now what I want is that a text can be associated with more than  
>>> one field.
>>> i.e.
>>>
>>> (field1,field2,field3):value
>>> name,(default_field),title: abc^10
>>> organization,(default_field),institute: xyz^3
>>>
>>> then both of my queries will work.
>>>
>>> Is it possible to do so in lucene without changing the source?
>>> If no then can anyone please explain the indexing and searching
>>> mechanism for lucene, so that I can start working on it.
>>>
>>> The solution given by the java-users won't work for me as I do not
>>> want to add all the contents of the document in a single field and
>>> then search for that field, as this would increase the index size  
>>> and
>>> I've to index more than 10 million documents. Also
>>> multifieldqueryparser will make it query execution inefficient, as
>>> there will be thousands of fields.
>>>
>>> If I start storing just a single field as: (default_field): "name  
>>> abc
>>> organization xyz", then it is possible that some other documents  
>>> might
>>> get selected that are not relevant. Also i want to boost individual
>>> fields in a document.
>>>
>>> Anshul
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>> --------------------------
>> Grant Ingersoll
>> http://www.lucidimagination.com
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> -- 
> Anshul Jain
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 23 15:19:00 2008
Return-Path: <java-user-return-36336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85009 invoked from network); 23 Sep 2008 15:18:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Sep 2008 15:18:59 -0000
Received: (qmail 42946 invoked by uid 500); 23 Sep 2008 15:18:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42913 invoked by uid 500); 23 Sep 2008 15:18:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42896 invoked by uid 99); 23 Sep 2008 15:18:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Sep 2008 08:18:49 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.62.39.19] (HELO serv01.siteground199.com) (209.62.39.19)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Sep 2008 15:17:50 +0000
Received: from ip-213-135-246-92.static.luxdsl.pt.lu ([213.135.246.92]:4199 helo=[192.168.168.13])
	by serv01.siteground199.com with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.69)
	(envelope-from <jcantonio@arcetis.com>)
	id 1Ki9dt-0000cj-48
	for java-user@lucene.apache.org; Tue, 23 Sep 2008 10:17:33 -0500
Message-ID: <48D90875.9090805@arcetis.com>
Date: Tue, 23 Sep 2008 17:17:09 +0200
From: Jean-Claude Antonio <jcantonio@arcetis.com>
Reply-To: jcantonio@arcetis.com
Organization: Arcetis
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Query attached words
References: <48D810D3.9070503@arcetis.com> <359a92830809230525j614215b5i472552e5d453c3fe@mail.gmail.com>
In-Reply-To: <359a92830809230525j614215b5i472552e5d453c3fe@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - serv01.siteground199.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - arcetis.com
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Erick, you are right about the various combinations.
Cheers,

Erick Erickson wrote:
> Yes you can query *method. But you have to turn leading wildcards
> (which I don't have right on the tips of my fingers, but know it's been
> an option for some time now).
>
> But your solution doesn't scale well. If you had
> a.b.c.d.e.f.g.h you'd have to store many combinations in order
> to do what you want, quickly becoming really, really ugly.
>
> But you could store the tokens
> a
> .
> b
> .
> c
> .
> e
> .
> f
> .
> g
> .
> h
> by using the appropriate analyzer (or perhaps rolling
> your own). Then you could use either PhraseQuerys
> or SpanQuerys to do what you want....
>
> Best
> Erick
>
> On Mon, Sep 22, 2008 at 5:40 PM, Jean-Claude Antonio
> <jcantonio@arcetis.com>wrote:
>
>   
>> Hello,
>>
>> If I had a file with the following content:
>> ...
>> object.method();
>> ...
>> I would like to be able to query for
>> object
>> method
>> object.method
>>
>> My guess is that I should store not only "object.method", but also "object"
>> and "method" as I cannot query *method.
>> Any other suggestion?
>>
>> Kind regards,
>>
>> JClaude
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 23 15:26:21 2008
Return-Path: <java-user-return-36337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91030 invoked from network); 23 Sep 2008 15:26:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Sep 2008 15:26:21 -0000
Received: (qmail 54123 invoked by uid 500); 23 Sep 2008 15:26:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53416 invoked by uid 500); 23 Sep 2008 15:26:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53405 invoked by uid 99); 23 Sep 2008 15:26:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Sep 2008 08:26:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Sep 2008 15:25:12 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.13.8/8.13.8) with ESMTP id m8NFPM38021529
	for <java-user@lucene.apache.org>; Tue, 23 Sep 2008 11:25:23 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <48D90A63.201@informatics.jax.org>
Date: Tue, 23 Sep 2008 11:25:23 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Query attached words
References: <48D810D3.9070503@arcetis.com> <359a92830809230525j614215b5i472552e5d453c3fe@mail.gmail.com> <48D90875.9090805@arcetis.com>
In-Reply-To: <48D90875.9090805@arcetis.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.4.3.345767, Antispam-Engine: 2.6.0.325393, Antispam-Data: 2008.9.23.150719
X-PerlMx-Spam: Gauge=IIIIIII, Probability=7%, Report='BODY_SIZE_2000_2999 0, BODY_SIZE_5000_LESS 0, __BOUNCE_CHALLENGE_SUBJ 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

We have a similar requirement here at our work.

In order to get around it we create two indexes, one of which 
punctuation is relevant, and one in which all punctuation is treated as 
a place to break tokens.

We then do a search against both indexes and merge the results, it seems 
that such a technique might be able to help you here as well.  (Though 
upon rereading it seems like perhaps you want SOME punctuation to be 
relevant, but others not, the technique itself though could still be 
applied with these rules used instead)

- Matt

Jean-Claude Antonio wrote:
> Thanks Erick, you are right about the various combinations.
> Cheers,
>
> Erick Erickson wrote:
>> Yes you can query *method. But you have to turn leading wildcards
>> (which I don't have right on the tips of my fingers, but know it's been
>> an option for some time now).
>>
>> But your solution doesn't scale well. If you had
>> a.b.c.d.e.f.g.h you'd have to store many combinations in order
>> to do what you want, quickly becoming really, really ugly.
>>
>> But you could store the tokens
>> a
>> .
>> b
>> .
>> c
>> .
>> e
>> .
>> f
>> .
>> g
>> .
>> h
>> by using the appropriate analyzer (or perhaps rolling
>> your own). Then you could use either PhraseQuerys
>> or SpanQuerys to do what you want....
>>
>> Best
>> Erick
>>
>> On Mon, Sep 22, 2008 at 5:40 PM, Jean-Claude Antonio
>> <jcantonio@arcetis.com>wrote:
>>
>>  
>>> Hello,
>>>
>>> If I had a file with the following content:
>>> ...
>>> object.method();
>>> ...
>>> I would like to be able to query for
>>> object
>>> method
>>> object.method
>>>
>>> My guess is that I should store not only "object.method", but also 
>>> "object"
>>> and "method" as I cannot query *method.
>>> Any other suggestion?
>>>
>>> Kind regards,
>>>
>>> JClaude
>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>     
>>
>>   
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 23 15:55:05 2008
Return-Path: <java-user-return-36338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13397 invoked from network); 23 Sep 2008 15:55:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Sep 2008 15:55:04 -0000
Received: (qmail 11721 invoked by uid 500); 23 Sep 2008 15:54:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10815 invoked by uid 500); 23 Sep 2008 15:54:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10804 invoked by uid 99); 23 Sep 2008 15:54:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Sep 2008 08:54:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshulnirvana@gmail.com designates 209.85.200.173 as permitted sender)
Received: from [209.85.200.173] (HELO wf-out-1314.google.com) (209.85.200.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Sep 2008 15:53:54 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2474409wfc.20
        for <java-user@lucene.apache.org>; Tue, 23 Sep 2008 08:54:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=Y3HVdl9PYL7DgkEj/08sybD2pW+8vRhkLhUf6zdNxm0=;
        b=KBH26/zRNdMnlhKGi7Hay959iKkwjyW8ZsM6iV1jEgKyL69nYdejK+JvIwkTh/JFAg
         Ax/6/SxdHPmqJeU+NRXPGjD38oJyP/N7oyzqiFomr1hf4xXY2YXdcFNZ/XHCti8+iDkO
         3xXlOG7cEPL1wWUFU3oMEnfh3fU7jyPEGSx0U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=WdUyMmadjftVoFc+38hTo3IwQJsY2ajIqiwn4bT8zLng4NAe5WSyMk9oWzQ2J4QA/n
         okQ8cz933p9Rpk2bwzls32r8l7XbzrhLUaJIxXrbkegQdCO0RDNUNikXYVL14gztRCFw
         xpR6nXFUHk0CLUMw62Jy+SiBZ6D8DHVjnVAeg=
Received: by 10.114.169.2 with SMTP id r2mr6533974wae.132.1222185258162;
        Tue, 23 Sep 2008 08:54:18 -0700 (PDT)
Received: by 10.114.39.6 with HTTP; Tue, 23 Sep 2008 08:54:18 -0700 (PDT)
Message-ID: <b8bb47ad0809230854y3bd6d613lf68abb6769daddac@mail.gmail.com>
Date: Tue, 23 Sep 2008 17:54:18 +0200
From: "Anshul jain" <anshulnirvana@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multi Field search without Multifieldqueryparser
In-Reply-To: <0B1F9270-13CF-4369-A294-51E21060F109@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <b8bb47ad0809211227q107e9579l5a51bde32c32eb52@mail.gmail.com>
	 <48d75c0a.1f15300a.5c54.4df2@mx.google.com>
	 <b8bb47ad0809230351s1214d0faue53810d9140181ad@mail.gmail.com>
	 <411A90B8-7752-4760-A541-639F2B6AA79F@apache.org>
	 <b8bb47ad0809230535l64208192kdab756ceea5b538f@mail.gmail.com>
	 <0B1F9270-13CF-4369-A294-51E21060F109@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

unstructured query:
 default_field: abc ^5 and xyz

seems to have created a confusion, what I meant was while initializing
the parser I have "default_field" as the default text field. So, the
query should be:

QueryParser parser = new QueryParser("default_field",analyzer);
query = parser.parse("abc^5 and xyz");

so query will be: default_field:abc^5 and default_field:xyz^3

I am sorry for mentioning it wrong earlier.

To answer Ericks question: I'll be indexing around 10-20 million
documents of average size of 4 KB, but the number of documents could
be mor.

Now let me again clearly explain my problem:

say i have a set of lucene documents as:

Document 1:
name: Anshul ^10
organization: EPFL ^5
sex: Male

Document 2:
name: Rakesh ^10
organization: IIT-B ^5
sex: Male

Docuemt 3:
name: erin brochowich^10
organization: ABC law firm
sex: Female

Document 4:
title: lord of the rings ^10
directors: John ^2
actors: Kate

Document 5:
title: godfather ^10
directors: Kate ^2
actors: alpachino

 Docmuent 1, 2 and 3 belongs to a same class so there boosting
parameters will be same. Similar is the case with document 4 and 5.

If I give a query like:

name: "Erin Brochowich" and Oranization: "ABC law firm".  this query
will work perfectly.

but if the query is
QueryParser parser = new QueryParser("default_field",analyzer);
query = parser.parse("Erin Brochowich and ABC law firm");
 it would not work.

what i want is that default_field should be connected to the all the
text somehow, but it should not take extra space for storing its own
text.

I think it should be clear enough now.

Thank you for your responses.
Regards,
Anshul





On Tue, Sep 23, 2008 at 4:55 PM, Grant Ingersoll <gsingers@apache.org> wrote:
>
> On Sep 23, 2008, at 8:35 AM, Anshul jain wrote:
>
>> yes you are partly correct
>>
>> what I need is that lucene should support two type of queries for the
>> following document:
>> name: abc^10
>> organization: xyz^3
>>
>> structured query:
>> name: abc and organization: xyz
>>
>> unstructured query:
>> default_field: abc ^5 and xyz
>
> And what field(s) should "xyz" be searched against?  Again, I ask, how do
> you know what fields "xyz" should go against and why does abc go against the
> default_field?  You've said it shouldn't go against all fields (b/c there
> are thousands of them), and you've said it shouldn't go against a catch-all
> field, but otherwise I still have no clue your criteria for what fields xyz
> should search.  Are you saying that you want it to intelligently know that
> when "xyz" comes in that it should search the organization field?
>
> Other than seconding Umesh's or Dino's suggestions of using machine learning
> or heuristics or using some type of templating system, I'm not sure what
> else to offer.  You might look at Solr's Dismax Query Parser, which allows
> you to specify the field structure of queries in a multi-field way, but
> again, I doubt that is wholly what you are looking for.
>
>>
>>
>> But i do not want to create one more field(default_field) that will
>> contain all the values concatenated in it. Also, even if i get all the
>> fields during indexing and use it for multi field query parser, then
>> the query will become very inefficient as there can be thousands of
>> fields. I think it should clarify my point.
>>
>>
>>
>> On Tue, Sep 23, 2008 at 1:58 PM, Grant Ingersoll <gsingers@apache.org>
>> wrote:
>>>
>>> So, the piece I'm missing is how do you know what field for which terms.
>>>  In
>>> other words how do you know xyz goes against organization and abc against
>>> name.  Your wording implies that you don't know this before hand, yet you
>>> are somehow suggesting that Lucene should be able to do it.  Correct me
>>> if
>>> I'm wrong.
>>>
>>> -Grant
>>>
>>>
>>> On Sep 23, 2008, at 6:51 AM, Anshul jain wrote:
>>>
>>>> Here is what I'm trying to do:
>>>>
>>>> say a lucene document:
>>>> name: abc ^10
>>>> organization: xyz ^3
>>>>
>>>> ^10 and ^3 are boosts in the document.
>>>>
>>>> now if I query name: abc ^5 AND organization: xyz this will work.
>>>>
>>>> but if I query (default_field): abc^5 AND xyz this won't work.
>>>>
>>>> Now what I want is that a text can be associated with more than one
>>>> field.
>>>> i.e.
>>>>
>>>> (field1,field2,field3):value
>>>> name,(default_field),title: abc^10
>>>> organization,(default_field),institute: xyz^3
>>>>
>>>> then both of my queries will work.
>>>>
>>>> Is it possible to do so in lucene without changing the source?
>>>> If no then can anyone please explain the indexing and searching
>>>> mechanism for lucene, so that I can start working on it.
>>>>
>>>> The solution given by the java-users won't work for me as I do not
>>>> want to add all the contents of the document in a single field and
>>>> then search for that field, as this would increase the index size and
>>>> I've to index more than 10 million documents. Also
>>>> multifieldqueryparser will make it query execution inefficient, as
>>>> there will be thousands of fields.
>>>>
>>>> If I start storing just a single field as: (default_field): "name abc
>>>> organization xyz", then it is possible that some other documents might
>>>> get selected that are not relevant. Also i want to boost individual
>>>> fields in a document.
>>>>
>>>> Anshul
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>> --------------------------
>>> Grant Ingersoll
>>> http://www.lucidimagination.com
>>>
>>> Lucene Helpful Hints:
>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>>
>> --
>> Anshul Jain
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
Anshul Jain

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 23 17:57:10 2008
Return-Path: <java-user-return-36339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96940 invoked from network); 23 Sep 2008 17:57:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Sep 2008 17:57:10 -0000
Received: (qmail 8422 invoked by uid 500); 23 Sep 2008 17:56:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8394 invoked by uid 500); 23 Sep 2008 17:56:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8383 invoked by uid 99); 23 Sep 2008 17:56:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Sep 2008 10:56:59 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.239 as permitted sender)
Received: from [209.85.198.239] (HELO rv-out-0506.google.com) (209.85.198.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Sep 2008 17:55:59 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2089363rvb.5
        for <java-user@lucene.apache.org>; Tue, 23 Sep 2008 10:56:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=1asU2jHbWvzMhcw1v7Rm83gQEmVPGACKfi+tKHoUe48=;
        b=lfTa6i5Qgs8LfFsghgB8wpfFFwShqllT0vpcjkglkPvN4P0p/FkDr33TgV1664SCae
         3VoKwa8DUqNUITqKvtBG9ZYvUOUt2ILb3tX3ar93RFcuSu18XgY0rqHqztVvWu1z8q7N
         ZXBH8N6vk0Gg826djuR6rzGFoJk2vteoAmCe4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=AwWRoRXR+WqBK9lev4xt40fLmbMr23h0AJwIbdlgRJFUh1gIClQ042DgbwREiSl5xx
         5Lir+3ww4JcRsOdsYC63Pec3XGFcDL7WpHjkLKLfqCZX5dxneGjJjsr90LtLlX2qeOcx
         +1Mb2UY/w6SANVkpxYGK/KpRgikLuCojpvbzg=
Received: by 10.140.162.21 with SMTP id k21mr2880700rve.261.1222192592867;
        Tue, 23 Sep 2008 10:56:32 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Tue, 23 Sep 2008 10:56:32 -0700 (PDT)
Message-ID: <359a92830809231056s24b68d41n4a00d045d54c047@mail.gmail.com>
Date: Tue, 23 Sep 2008 13:56:32 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multi Field search without Multifieldqueryparser
In-Reply-To: <b8bb47ad0809230854y3bd6d613lf68abb6769daddac@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_64374_12834674.1222192592810"
References: <b8bb47ad0809211227q107e9579l5a51bde32c32eb52@mail.gmail.com>
	 <48d75c0a.1f15300a.5c54.4df2@mx.google.com>
	 <b8bb47ad0809230351s1214d0faue53810d9140181ad@mail.gmail.com>
	 <411A90B8-7752-4760-A541-639F2B6AA79F@apache.org>
	 <b8bb47ad0809230535l64208192kdab756ceea5b538f@mail.gmail.com>
	 <0B1F9270-13CF-4369-A294-51E21060F109@apache.org>
	 <b8bb47ad0809230854y3bd6d613lf68abb6769daddac@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_64374_12834674.1222192592810
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

But the "default_field" for your query parser is just that, the default
*if nothing else is specified*. So the following would work just fine:

QueryParser parser = new QueryParser("default_field", analyzer);
query = parser.parse("name:Erin AND name:Brochowich AND organization:ABC AND
organization:law AND organization:firm");
None of the terms would go against default_field since an
explicit field is given for each. You'd have to break up the
incoming queries and add the field to each, but that's not hard.

Or even
query = parser.parse("name:"Erin Brochowich"~3 AND organization:"ABC law
firm"~3");
for phrase queries with slop.

I *still* think you're misunderstanding index-time boosting. It is
INDEPENDENT of
query time boosting. Index time boosting has the effect of raising the
importance
of a particular field IN THAT DOCUMENT relative to that field IN OTHER
DOCUMENTS.
Boosting all the terms for a given field for ALL documents is essentially
doing nothing.

I very strongly recommend you get a copy of Luke and experiment with how
queries
are parsed. That tool has the ability to, for any given query, send it
through the
parser and see exactly what it looks like after parsing. I think that would
allow
you to get much better answers much more quickly. Just google lucene luke
and you should be fine.

Finally, the number of documents you're talking about will produce a pretty
small
index by Lucene standards. There's no reason to avoid the "bag of words"
solution
if that solves your problem because you fear bloating your index.

Best
Erick


On Tue, Sep 23, 2008 at 11:54 AM, Anshul jain <anshulnirvana@gmail.com>wrote:

> unstructured query:
>  default_field: abc ^5 and xyz
>
> seems to have created a confusion, what I meant was while initializing
> the parser I have "default_field" as the default text field. So, the
> query should be:
>
> QueryParser parser = new QueryParser("default_field",analyzer);
> query = parser.parse("abc^5 and xyz");
>
> so query will be: default_field:abc^5 and default_field:xyz^3
>
> I am sorry for mentioning it wrong earlier.
>
> To answer Ericks question: I'll be indexing around 10-20 million
> documents of average size of 4 KB, but the number of documents could
> be mor.
>
> Now let me again clearly explain my problem:
>
> say i have a set of lucene documents as:
>
> Document 1:
> name: Anshul ^10
> organization: EPFL ^5
> sex: Male
>
> Document 2:
> name: Rakesh ^10
> organization: IIT-B ^5
> sex: Male
>
> Docuemt 3:
> name: erin brochowich^10
> organization: ABC law firm
> sex: Female
>
> Document 4:
> title: lord of the rings ^10
> directors: John ^2
> actors: Kate
>
> Document 5:
> title: godfather ^10
> directors: Kate ^2
> actors: alpachino
>
>  Docmuent 1, 2 and 3 belongs to a same class so there boosting
> parameters will be same. Similar is the case with document 4 and 5.
>
> If I give a query like:
>
> name: "Erin Brochowich" and Oranization: "ABC law firm".  this query
> will work perfectly.
>
> but if the query is
> QueryParser parser = new QueryParser("default_field",analyzer);
> query = parser.parse("Erin Brochowich and ABC law firm");
>  it would not work.
>
> what i want is that default_field should be connected to the all the
> text somehow, but it should not take extra space for storing its own
> text.
>
> I think it should be clear enough now.
>
> Thank you for your responses.
> Regards,
> Anshul
>
>
>
>
>
> On Tue, Sep 23, 2008 at 4:55 PM, Grant Ingersoll <gsingers@apache.org>
> wrote:
> >
> > On Sep 23, 2008, at 8:35 AM, Anshul jain wrote:
> >
> >> yes you are partly correct
> >>
> >> what I need is that lucene should support two type of queries for the
> >> following document:
> >> name: abc^10
> >> organization: xyz^3
> >>
> >> structured query:
> >> name: abc and organization: xyz
> >>
> >> unstructured query:
> >> default_field: abc ^5 and xyz
> >
> > And what field(s) should "xyz" be searched against?  Again, I ask, how do
> > you know what fields "xyz" should go against and why does abc go against
> the
> > default_field?  You've said it shouldn't go against all fields (b/c there
> > are thousands of them), and you've said it shouldn't go against a
> catch-all
> > field, but otherwise I still have no clue your criteria for what fields
> xyz
> > should search.  Are you saying that you want it to intelligently know
> that
> > when "xyz" comes in that it should search the organization field?
> >
> > Other than seconding Umesh's or Dino's suggestions of using machine
> learning
> > or heuristics or using some type of templating system, I'm not sure what
> > else to offer.  You might look at Solr's Dismax Query Parser, which
> allows
> > you to specify the field structure of queries in a multi-field way, but
> > again, I doubt that is wholly what you are looking for.
> >
> >>
> >>
> >> But i do not want to create one more field(default_field) that will
> >> contain all the values concatenated in it. Also, even if i get all the
> >> fields during indexing and use it for multi field query parser, then
> >> the query will become very inefficient as there can be thousands of
> >> fields. I think it should clarify my point.
> >>
> >>
> >>
> >> On Tue, Sep 23, 2008 at 1:58 PM, Grant Ingersoll <gsingers@apache.org>
> >> wrote:
> >>>
> >>> So, the piece I'm missing is how do you know what field for which
> terms.
> >>>  In
> >>> other words how do you know xyz goes against organization and abc
> against
> >>> name.  Your wording implies that you don't know this before hand, yet
> you
> >>> are somehow suggesting that Lucene should be able to do it.  Correct me
> >>> if
> >>> I'm wrong.
> >>>
> >>> -Grant
> >>>
> >>>
> >>> On Sep 23, 2008, at 6:51 AM, Anshul jain wrote:
> >>>
> >>>> Here is what I'm trying to do:
> >>>>
> >>>> say a lucene document:
> >>>> name: abc ^10
> >>>> organization: xyz ^3
> >>>>
> >>>> ^10 and ^3 are boosts in the document.
> >>>>
> >>>> now if I query name: abc ^5 AND organization: xyz this will work.
> >>>>
> >>>> but if I query (default_field): abc^5 AND xyz this won't work.
> >>>>
> >>>> Now what I want is that a text can be associated with more than one
> >>>> field.
> >>>> i.e.
> >>>>
> >>>> (field1,field2,field3):value
> >>>> name,(default_field),title: abc^10
> >>>> organization,(default_field),institute: xyz^3
> >>>>
> >>>> then both of my queries will work.
> >>>>
> >>>> Is it possible to do so in lucene without changing the source?
> >>>> If no then can anyone please explain the indexing and searching
> >>>> mechanism for lucene, so that I can start working on it.
> >>>>
> >>>> The solution given by the java-users won't work for me as I do not
> >>>> want to add all the contents of the document in a single field and
> >>>> then search for that field, as this would increase the index size and
> >>>> I've to index more than 10 million documents. Also
> >>>> multifieldqueryparser will make it query execution inefficient, as
> >>>> there will be thousands of fields.
> >>>>
> >>>> If I start storing just a single field as: (default_field): "name abc
> >>>> organization xyz", then it is possible that some other documents might
> >>>> get selected that are not relevant. Also i want to boost individual
> >>>> fields in a document.
> >>>>
> >>>> Anshul
> >>>>
> >>>> ---------------------------------------------------------------------
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>
> >>> --------------------------
> >>> Grant Ingersoll
> >>> http://www.lucidimagination.com
> >>>
> >>> Lucene Helpful Hints:
> >>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> >>> http://wiki.apache.org/lucene-java/LuceneFAQ
> >>>
> >>>
> >>>
> >>>
> >>>
> >>>
> >>>
> >>>
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>
> >>
> >>
> >> --
> >> Anshul Jain
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >
> > --------------------------
> > Grant Ingersoll
> > http://www.lucidimagination.com
> >
> > Lucene Helpful Hints:
> > http://wiki.apache.org/lucene-java/BasicsOfPerformance
> > http://wiki.apache.org/lucene-java/LuceneFAQ
> >
> >
> >
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
>
> --
> Anshul Jain
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_64374_12834674.1222192592810--

From java-user-return-36340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 23 20:48:49 2008
Return-Path: <java-user-return-36340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25685 invoked from network); 23 Sep 2008 20:48:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Sep 2008 20:48:49 -0000
Received: (qmail 22758 invoked by uid 500); 23 Sep 2008 20:48:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22730 invoked by uid 500); 23 Sep 2008 20:48:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22709 invoked by uid 99); 23 Sep 2008 20:48:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Sep 2008 13:48:36 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.62.39.19] (HELO serv01.siteground199.com) (209.62.39.19)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Sep 2008 20:47:35 +0000
Received: from [88.207.144.76] (port=16488 helo=[192.168.1.37])
	by serv01.siteground199.com with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.69)
	(envelope-from <jcantonio@arcetis.com>)
	id 1KiEn1-0003tn-ON
	for java-user@lucene.apache.org; Tue, 23 Sep 2008 15:47:22 -0500
Message-ID: <48D955BD.8030200@arcetis.com>
Date: Tue, 23 Sep 2008 22:46:53 +0200
From: Jean-Claude Antonio <jcantonio@arcetis.com>
Reply-To: jcantonio@arcetis.com
Organization: Arcetis
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Query attached words
References: <48D810D3.9070503@arcetis.com> <359a92830809230525j614215b5i472552e5d453c3fe@mail.gmail.com> <48D90875.9090805@arcetis.com> <48D90A63.201@informatics.jax.org>
In-Reply-To: <48D90A63.201@informatics.jax.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - serv01.siteground199.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - arcetis.com
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Matt,
I will go for Erick's suggestion as the combination can be messy: for 
a.b.c I would need to store a,b,c,a.b,b.c and a.b.c
Cheers




Matthew Hall wrote:
> We have a similar requirement here at our work.
>
> In order to get around it we create two indexes, one of which 
> punctuation is relevant, and one in which all punctuation is treated 
> as a place to break tokens.
>
> We then do a search against both indexes and merge the results, it 
> seems that such a technique might be able to help you here as well.  
> (Though upon rereading it seems like perhaps you want SOME punctuation 
> to be relevant, but others not, the technique itself though could 
> still be applied with these rules used instead)
>
> - Matt
>
> Jean-Claude Antonio wrote:
>> Thanks Erick, you are right about the various combinations.
>> Cheers,
>>
>> Erick Erickson wrote:
>>> Yes you can query *method. But you have to turn leading wildcards
>>> (which I don't have right on the tips of my fingers, but know it's been
>>> an option for some time now).
>>>
>>> But your solution doesn't scale well. If you had
>>> a.b.c.d.e.f.g.h you'd have to store many combinations in order
>>> to do what you want, quickly becoming really, really ugly.
>>>
>>> But you could store the tokens
>>> a
>>> .
>>> b
>>> .
>>> c
>>> .
>>> e
>>> .
>>> f
>>> .
>>> g
>>> .
>>> h
>>> by using the appropriate analyzer (or perhaps rolling
>>> your own). Then you could use either PhraseQuerys
>>> or SpanQuerys to do what you want....
>>>
>>> Best
>>> Erick
>>>
>>> On Mon, Sep 22, 2008 at 5:40 PM, Jean-Claude Antonio
>>> <jcantonio@arcetis.com>wrote:
>>>
>>>  
>>>> Hello,
>>>>
>>>> If I had a file with the following content:
>>>> ...
>>>> object.method();
>>>> ...
>>>> I would like to be able to query for
>>>> object
>>>> method
>>>> object.method
>>>>
>>>> My guess is that I should store not only "object.method", but also 
>>>> "object"
>>>> and "method" as I cannot query *method.
>>>> Any other suggestion?
>>>>
>>>> Kind regards,
>>>>
>>>> JClaude
>>>>
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>     
>>>
>>>   
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 24 03:00:39 2008
Return-Path: <java-user-return-36341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13252 invoked from network); 24 Sep 2008 03:00:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Sep 2008 03:00:39 -0000
Received: (qmail 16995 invoked by uid 500); 24 Sep 2008 03:00:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16960 invoked by uid 500); 24 Sep 2008 03:00:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16948 invoked by uid 99); 24 Sep 2008 03:00:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Sep 2008 20:00:29 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Sep 2008 02:59:29 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KiKbi-0007h1-Dh
	for java-user@lucene.apache.org; Tue, 23 Sep 2008 20:00:02 -0700
Message-ID: <19641103.post@talk.nabble.com>
Date: Tue, 23 Sep 2008 20:00:02 -0700 (PDT)
From: rahul_k123 <vishnudeepak@gmail.com>
To: java-user@lucene.apache.org
Subject: Rsync causing search timeouts on master
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: vishnudeepak@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I am using snappuller to sync my slave with master, i am not using rsync
daemon, i am doing Rsync using remote shell.

When i am serving requests from the master when the snappuller is running
(after optimization, total index is arnd 4 gb it doing the transfer of whole
index), the performance is very bad actually causing timeouts.



Any ideas why this happens .


Any suggestions will help.


Thanks.
-- 
View this message in context: http://www.nabble.com/Rsync-causing-search-timeouts-on-master-tp19641103p19641103.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 24 04:57:58 2008
Return-Path: <java-user-return-36342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86587 invoked from network); 24 Sep 2008 04:57:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Sep 2008 04:57:58 -0000
Received: (qmail 15794 invoked by uid 500); 24 Sep 2008 04:57:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15686 invoked by uid 500); 24 Sep 2008 04:57:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15663 invoked by uid 99); 24 Sep 2008 04:57:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Sep 2008 21:57:38 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.57] (HELO web50303.mail.re2.yahoo.com) (206.190.38.57)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 24 Sep 2008 04:56:36 +0000
Received: (qmail 403 invoked by uid 60001); 24 Sep 2008 04:57:08 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=6lR6Oi4b/BtS+Xu3gGPjnZYpTui7IfPDRktk7rXzP65rS2VYzD6WGNj+VHDvogkGtG5QR92sU8ptox05wq1l4bFtrRR+F8UMra+zRFxx6lXZT6/QH+8JPs1kZLZtoOq/t4hi5WRrOyRTlLfSYW+Tc1DXsbqDodex/LqxeFK/AN0=;
X-YMail-OSG: xho49I8VM1n_S4WFfAg45P8o_44susHMA.CWwuqA33eOQHcrtOnu20Er2r_CLXQGoz7VXHv0hlDOZyUyUH4Ne0_S7zgyvjo8aBbD1Od1W07sBhx47CGVUSb0.KU8y_Csj9crPG3M0gWRtWFCnvUvKTNWdZ5.i6.n0LZ9FniW7.mWiIi9
Received: from [72.227.164.48] by web50303.mail.re2.yahoo.com via HTTP; Tue, 23 Sep 2008 21:57:08 PDT
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Tue, 23 Sep 2008 21:57:08 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Rsync causing search timeouts on master
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <466045.99821.qm@web50303.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Wrong list. :)  I answered your question on solr-user.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: rahul_k123 <vishnudeepak@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, September 23, 2008 11:00:02 PM
> Subject: Rsync causing search timeouts on master
> 
> 
> Hi,
> 
> I am using snappuller to sync my slave with master, i am not using rsync
> daemon, i am doing Rsync using remote shell.
> 
> When i am serving requests from the master when the snappuller is running
> (after optimization, total index is arnd 4 gb it doing the transfer of whole
> index), the performance is very bad actually causing timeouts.
> 
> 
> 
> Any ideas why this happens .
> 
> 
> Any suggestions will help.
> 
> 
> Thanks.
> -- 
> View this message in context: 
> http://www.nabble.com/Rsync-causing-search-timeouts-on-master-tp19641103p19641103.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 24 09:05:38 2008
Return-Path: <java-user-return-36343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37808 invoked from network); 24 Sep 2008 09:05:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Sep 2008 09:05:38 -0000
Received: (qmail 4772 invoked by uid 500); 24 Sep 2008 09:05:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4747 invoked by uid 500); 24 Sep 2008 09:05:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4736 invoked by uid 99); 24 Sep 2008 09:05:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Sep 2008 02:05:28 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dckorah@gmail.com designates 209.85.142.191 as permitted sender)
Received: from [209.85.142.191] (HELO ti-out-0910.google.com) (209.85.142.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Sep 2008 09:04:29 +0000
Received: by ti-out-0910.google.com with SMTP id b8so1375980tic.11
        for <java-user@lucene.apache.org>; Wed, 24 Sep 2008 02:04:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=zw67pEzuMvfVCNw6wjEcwWEyyGvJgeJLEm9mPdwFg98=;
        b=pA5KDDsse8Hos5YZCWcvtLK+uoENwwbACEswOIAqeapsBOl3dFfC3Yx48wPwuRlxHw
         V70dTNMTYgmScciVUCYItf70tBrsedP0RTJBr/Pp7AtscpYyMRudRfu4YbOXX2hXglb4
         qOOPqG5NvqeqO/B4t2UhxdlW1ntZJoEe/2ewI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=VXudjrX5yqDKXe3NlUbEBnGJTWOuNTQjo3klFG7F8eStoTD8pHdc/z1+sU7Ch7w99e
         qYstoVEAvNyHFkYKtr18S7ZsS1EkAZ301mkdGxBMJdnXnz/GYG/RP6xZCtedW1f9G0p3
         GAQ7qZ7+kiiVMfRB9V6ip7lS10x6chnWjoV2k=
Received: by 10.110.28.15 with SMTP id b15mr8960384tib.46.1222247085061;
        Wed, 24 Sep 2008 02:04:45 -0700 (PDT)
Received: by 10.110.11.16 with HTTP; Wed, 24 Sep 2008 02:04:44 -0700 (PDT)
Message-ID: <926b35870809240204y5d1b9ba7gde7301351e022a2@mail.gmail.com>
Date: Wed, 24 Sep 2008 10:04:44 +0100
From: "Dino Korah" <dckorah@gmail.com>
To: "lucene list" <java-user@lucene.apache.org>
Subject: Index time Document Boosting and Query Time Sorts
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30322_14082051.1222247085032"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_30322_14082051.1222247085032
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

Could you please help me understand hos that works.

If I boost documents at index time based on some kind of criteria and if I
am to sort on a different criteria at query time, how will the result get
affected by the boosting.


So if I am to index a bunch of text files in a folder structure. If I boost
individual documents based on the depth of the path. But when I search on
the file content and if I sort on the modification time, how will the result
be?

Eg: (boost is 1/depth)
Folder1/Folder2/Folder3/Folder4/Folder5/text_file1.txt,
mod-time:20080101000000, depth-factor: 1/5
Folder1/Folder2/text_file2.txt, mod-time:20080102000000, depth-factor: 1/2
Folder1/Folder2/Folder3/Folder4/text_file3.txt, mod-time:20080101000000,
depth-factor: 1/4
Folder1/Folder2/Folder3/Folder4/Folder5/text_file4.txt,
mod-time:20080105000000, depth-factor: 1/5

Many thanks.
Dino

------=_Part_30322_14082051.1222247085032--

From java-user-return-36344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 24 09:09:41 2008
Return-Path: <java-user-return-36344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39696 invoked from network); 24 Sep 2008 09:09:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Sep 2008 09:09:41 -0000
Received: (qmail 10329 invoked by uid 500); 24 Sep 2008 09:09:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10298 invoked by uid 500); 24 Sep 2008 09:09:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10285 invoked by uid 99); 24 Sep 2008 09:09:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Sep 2008 02:09:31 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dckorah@gmail.com designates 209.85.142.190 as permitted sender)
Received: from [209.85.142.190] (HELO ti-out-0910.google.com) (209.85.142.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Sep 2008 09:08:32 +0000
Received: by ti-out-0910.google.com with SMTP id b8so1377360tic.11
        for <java-user@lucene.apache.org>; Wed, 24 Sep 2008 02:09:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=ThuFHJBmWtNjtIqKuKBYV5UabwbjxmyZGjQUbzdlJmE=;
        b=NDS4GGDTVRMmPNu4aY1nY+F5jcakd04SmYfHVSC7Ng+D5FXgT73g5cygwInIPsdDkR
         fGjeQ8s8IDrfYoWrY1AOar60UH1TPmzE0BfwN9I+qKuyl6kwPwUCC1bfo8OzeeAx4WVu
         4sNl61UMhF9jUl+hRkMxfSxeIdHRp2nVx5/aE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=w6YYAbqjNVaoiMNK+F6Qrm/SY49izOD6Cnv8syOHlh+m9lY/96icu0PoUO86kLRRHA
         vySXJW81NMC9lFCgmXADkt3EFkdwRLEkXS3Z0MtdahXtZDyynW/jrJrGj7OgXFWbLV+i
         ni5aBnMbDd0UAmXbUsDg07WpPvpIuLJMqI03w=
Received: by 10.110.2.2 with SMTP id 2mr8979842tib.31.1222247345197;
        Wed, 24 Sep 2008 02:09:05 -0700 (PDT)
Received: by 10.110.11.16 with HTTP; Wed, 24 Sep 2008 02:09:05 -0700 (PDT)
Message-ID: <926b35870809240209y655c3d48h6744834609b78a34@mail.gmail.com>
Date: Wed, 24 Sep 2008 10:09:05 +0100
From: "Dino Korah" <dckorah@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher.search
In-Reply-To: <Pine.LNX.4.62.0809221432050.1659@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30476_5187044.1222247345215"
References: <682882.35954.qm@web50312.mail.re2.yahoo.com>
	 <48CF2124.3090501@nuix.com>
	 <Pine.LNX.4.62.0809161143560.12858@radix.cryptio.net>
	 <48D075DD.5050407@nuix.com>
	 <Pine.LNX.4.62.0809171135050.2301@radix.cryptio.net>
	 <48D3537F.8020401@nuix.com>
	 <Pine.LNX.4.62.0809221432050.1659@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_30476_5187044.1222247345215
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

VGhhbmtzIENocmlzLApJdCBraW5kYSBtYWtlcyBzZW5zZSB0byBoYXZlIGNvbnRyb2wgb24gd2hh
dCB3ZSBkbyB3aXRoIHRoZSBBUEksIGJ1dCBmb3IKZmlyc3QgdGltZSB1c2VycywgaXQgd2lsbCBi
ZSB2aXRhbCB0byBoYXZlIGNsYXNzZXMgdGhhdCB3aWxsIGhlbHAgdGhlbQpzbW9vdGhlbiB0aGVp
ciBsZWFybmluZyBjdXJ2ZS4gQnkgdGhlIGxvb2tzIG9mIGl0LCBldmVuIGFkdmFuY2VkIHVzZXJz
IHVzZQpIaXRzIGFuZCBhcmUgcG9ydGluZyB0byBUb3BEb2NzIG9ubHkgYmVjYXVzZSBvZiB0aGUg
ZGVwcmVjYXRpb24uCgoyMDA4LzkvMjIgQ2hyaXMgSG9zdGV0dGVyIDxob3NzbWFuX2x1Y2VuZUBm
dWNpdC5vcmc+Cgo+Cj4gOiBXZSdyZSBub3QgdXNpbmcgVG9wRG9jQ29sbGVjdG9yIHJpZ2h0IG5v
dywgYXMgd2UncmUgc3RpbGwgdXNpbmcgSGl0cy4KPiA6IFBlcmZvcm1pbmcgc29tZSBvcGVyYXRp
b24gb3ZlciBldmVyeSByZXN1bHQgaXMganVzdCBvbmUgdXNlIGNhc2UuICBXZQo+IGFsc28KPiA6
IGhhdmUgdG8gZGVhbCB3aXRoIHRoZSB1c2VyIHNjcm9sbGluZyB0aGUgZGlzcGxheS4gIEN1cnJl
bnRseSB0aGlzIHdvcmtzCj4gOiBhY2NlcHRhYmx5IHVzaW5nIHRoZSBzYW1lIGphdmEudXRpbC5M
aXN0IG1vZGVsIGZvciBib3RoIGNhc2VzLiBTb21ldGltZXMKPiBhCj4gOiBidWxrIG9wZXJhdGlv
biBuZWVkcyB0byBpdGVyYXRlIG92ZXIgdGhlIGl0ZW1zIG1vcmUgdGhhbiBvbmNlLCB3aGljaAo+
IG1ha2VzIGl0Cj4gOiB0cmlja2llciB0byBpbnZlcnQgKEkgZ3Vlc3Mgd2UnZCBoYXZlIHRvIHBl
cmZvcm0gdGhlIHNlYXJjaCB0d2ljZS4gIEFuZAo+IHRoZW4KPgo+IEhpdHMgZG9lc24ndCBnaXZl
IHlvdSBhbnkgYWR2YW50YWdlIGhlcmUgZWl0aGVyIC0tIHlvdSBzdGlsbCBoYXZlIHRvCj4gZXhl
Y3V0ZSB0aGUgc2VhcmNoIHR3aWNlIG9uZSB0aGUgdXNlciBzY3JvbGxzIHBhc3QgdGhlIGVuZCBv
ZiB0aGUgbGlzdCBvZgo+IGRvY3MgZmV0Y2hlZCBzbyBmYXIsIHRoYXQgc2Vjb25kIHNlYXJjaCBp
cyBqdXN0IGhhcHBlbmluZyB1bmRlciB0aGUgY292ZXJzCj4gc28geW91IGRvbid0IHNlZSBpdCAt
LSBhbmQgeW91IGhhdmUgbm8gY29udHJvbCBvdmVyIGl0LiAgeW91IGNhbid0IGdpdmUKPiBIaXRz
IGFueSBoaW50IGFib3V0IGhvdyBtdWNoIGJpZyB0byBtYWtlIHRoZSBxdWV1ZSBvbiBlYWNoIHBh
c3MsIHlvdSBjYW4ndAo+IGFyZW4ndCBnaXZlbiBhbnkgaW5kaWNhdGlvbiB3aGVuIGl0J3MgaGFw
cGVuaW5nIHNvIHlvdSBjYW4gcG9wIHVwIGEKPiAicGxlYXNlIHdhaXQiIGN1cnNvciBvciBhbnl0
aGluZy4KPgo+IFRoYXQgKGluIG15IG9waW5pb24pIGlzIHRoZSBmdW5kZW1lbnRhbCBwcm9ibGVt
IHdpdGggSGl0czogaXQgZG9lcyB0b28KPiBtdWNoIHVuZGVyIHRoZSBjb3ZlcnMuCj4KPiA6ID4g
QXQgdGhlIGVuZCBvZiB0aGUgZGF5OiBwZW9wbGUgc3dpdGNoaW5nIHRvIHVzaW5nIFRvcERvY3ND
b2xsZWN0b3IKPiBpbnN0ZWFkIG9mCj4gOiA+IEhpdHMgYXJlIG5vIHdvcnNlIG9mZiB3aGVuIHRy
eWluZyB0byBpdGVyYXRlIG92ZXIgZXZlcnkgcmVzdWx0IGluIGEKPiA6ID4gZ2lub3Jtb3VzIHJl
c3VsdCBzZXQsIHRoZXkncmUganVzdCBoYXZlIHRvIGRlZmluZSAiZ2lub3Jtb3VzIiBmb3IKPiA6
ID4gdGhlbXNlbHZlcywgYW5kIHRoZSBnZXQgYW4gT09NIHJpZ2h0IGF3YXkgaW5zdGVhZCBvZiBv
bmNlIHRoZXkgaXRlcmF0ZQo+IHVwIHRvCj4gOiA+IHRoYXQgbWFueS4KPiA6Cj4gOiBUaGlzIGlz
IGVmZmVjdGl2ZWx5IG91ciBwcm9ibGVtLCBpZiBpdCBmYWlscyBmYXN0IHRoZSB1c2VyIGp1c3Qg
c2F5cwo+ICJ3ZWxsIHdoeQo+IDogY291bGRuJ3QgSSBldmVuIHNlZSB0aGUgZmlyc3QgMTAgcmVz
dWx0cz8iICBJdCdzIG11Y2ggYmV0dGVyIHRvIGZhaWwgd2l0aAo+IGFuCj4gOiBPT00gbGF0ZXIg
d2hlbiByZXRyaWV2aW5nIHJlc3VsdCBzb21lQmlnVmFsdWUgKyAxLgo+Cj4gYnV0IHRoYXQncyBy
ZWFsbHkgYSBkaWZmZXJuZXQgdXNlIGNhc2UgZnJvbSB3aGF0IGkgd2FzIGRlc2NyaWJpbmcgKGtu
b3dpbmcKPiBpbiBhZHZhbmNlIHRoYXQgeW91IGRlZmluaXRlbHkgd2FudCB0byBpdGVyYXRlIG92
ZXIgYWxsIHJlc3VsdHMpCj4KPiBpZiB5b3UncmUgZGVhbGluZyB3aXRoIGEgVUksIGdvIGFoZWFk
IGFuZCBnaXZlIFRvcERvY3NDb2xsZWN0b3IgYSBzbWFsbAo+IGxpbWl0LCBzb21ldGhpbmcgbWFu
YWdhYmxlIGFuZCBlbm91Z2ggdG8gc2hvdyB0aGUgdXNlciB0aGUgZmlyc3QgTiB0aGF0Cj4gdGhl
eSB3YW50IHRvIHNlZSAuLi4gYnV0IG5vdyAqeW91KiBjb250cm9sIHdoYXQgTiBpcywgYW5kICp5
b3UqIGNhbiBkZWNpZGUKPiBpZi93aGVuIHRvIGZldGNoIE4gKG9yIHNvbWUgZGlmZmVyZW50IGFt
b3VudCkgbW9yZSBkb2NzIGJhc2VkIHRoZSBhY3Rpb25zCj4gdGhlIHVzZXIgdGFrZXMuCj4KPgo+
Cj4gLUhvc3MKPgo+Cj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2
YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gRm9yIGFkZGl0aW9uYWwgY29t
bWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcKPgo+CgoKLS0g
CmQgaSBuIG8gayBvIHIgYSBoClRlbDogKzQ0IDc5NTYgNjYgNTIgODMKLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tCjUxwrAyMSc1MC41OTAyIk4gMMKwNicxMS44MTE2IlcK
------=_Part_30476_5187044.1222247345215--

From java-user-return-36345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 24 10:41:20 2008
Return-Path: <java-user-return-36345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86133 invoked from network); 24 Sep 2008 10:41:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Sep 2008 10:41:20 -0000
Received: (qmail 33088 invoked by uid 500); 24 Sep 2008 10:41:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33026 invoked by uid 500); 24 Sep 2008 10:41:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33015 invoked by uid 99); 24 Sep 2008 10:41:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Sep 2008 03:41:04 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a20.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Sep 2008 10:40:03 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a20.g.dreamhost.com (Postfix) with ESMTP id B89DCE24E2
	for <java-user@lucene.apache.org>; Wed, 24 Sep 2008 03:40:04 -0700 (PDT)
Message-Id: <47E0C68E-3D29-4AD8-9001-BCE6ED494C72@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <926b35870809240204y5d1b9ba7gde7301351e022a2@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Index time Document Boosting and Query Time Sorts
Date: Wed, 24 Sep 2008 06:40:04 -0400
References: <926b35870809240204y5d1b9ba7gde7301351e022a2@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Sep 24, 2008, at 5:04 AM, Dino Korah wrote:

> Hi all,
>
> Could you please help me understand hos that works.
>
> If I boost documents at index time based on some kind of criteria  
> and if I
> am to sort on a different criteria at query time, how will the  
> result get
> affected by the boosting.
>
>
> So if I am to index a bunch of text files in a folder structure. If  
> I boost
> individual documents based on the depth of the path. But when I  
> search on
> the file content and if I sort on the modification time, how will  
> the result
> be?

Index time boosting is used to say Document A is more important than  
Document B.  Thus, if all else being equal between the two, Doc A will  
score higher.  Sorting on other
values has no bearing on the scoring.  Thus, if you sort by mod time,  
you may see doc B higher in the list b/c of it's mod time, but it's  
score would still be lower than A's.

One side note based on your example, below:  Index time boosting does  
not have much granularity (only 255 values), in other words, there is  
a loss of precision.  Thus, you
want to make sure your boosts are different enough such that you can  
distinguish between the two.   Maybe 1/(2*depth) or something like  
that.   You can alter how these 255 values are encoded, but that is  
fairly advanced stuff.

HTH,
Grant


>
>
> Eg: (boost is 1/depth)
> Folder1/Folder2/Folder3/Folder4/Folder5/text_file1.txt,
> mod-time:20080101000000, depth-factor: 1/5
> Folder1/Folder2/text_file2.txt, mod-time:20080102000000, depth- 
> factor: 1/2
> Folder1/Folder2/Folder3/Folder4/text_file3.txt, mod-time: 
> 20080101000000,
> depth-factor: 1/4
> Folder1/Folder2/Folder3/Folder4/Folder5/text_file4.txt,
> mod-time:20080105000000, depth-factor: 1/5
>
> Many thanks.
> Dino




--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 24 14:27:00 2008
Return-Path: <java-user-return-36346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12974 invoked from network); 24 Sep 2008 14:26:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Sep 2008 14:26:59 -0000
Received: (qmail 3104 invoked by uid 500); 24 Sep 2008 14:26:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3080 invoked by uid 500); 24 Sep 2008 14:26:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3069 invoked by uid 99); 24 Sep 2008 14:26:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Sep 2008 07:26:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Sep 2008 14:25:47 +0000
Received: by nf-out-0910.google.com with SMTP id g16so1004236nfd.15
        for <java-user@lucene.apache.org>; Wed, 24 Sep 2008 07:26:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=j456n39gPltAYfpsgxmFK8UlcgefjbDtj2AnNwQ/n/A=;
        b=nrKsfmWSh+FYcasqVkG/uxu+cRsMPkfvrc0FxD0SzZAj6d9giHW9/iUTjsFDm4Xuim
         iYjtX0Y6CsF80YA5MVncLsQhHJEaoIaNeRHMdfPZlKCIVKe2P1cwNEc1/5RNfPvRK2B2
         S0XafjRF/niv/75MTZ8uurFu/PAMzR10USzlc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=wkp2JbdhpK2kXng4f36PgceUGcoqzCTd2EPCVDaumiY43KWfad+enmCdH26HeJpWeQ
         11S/8N1CaBH+aeglblpsrW8W3tmIqhZ/bTdUWXdXz9qtk/9VElQPOOULNtB0OhY+GF/r
         emtve4DUHDwGrQWMgkY0CpoVLIv+B19vU7T4Q=
Received: by 10.210.142.10 with SMTP id p10mr8497649ebd.167.1222266379722;
        Wed, 24 Sep 2008 07:26:19 -0700 (PDT)
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
        by mx.google.com with ESMTPS id 3sm5145015eyj.3.2008.09.24.07.26.15
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 24 Sep 2008 07:26:17 -0700 (PDT)
Message-Id: <487ABD6B-8372-4F65-84A5-5D540BF1E165@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <47E0C68E-3D29-4AD8-9001-BCE6ED494C72@apache.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Index time Document Boosting and Query Time Sorts
Date: Wed, 24 Sep 2008 16:26:14 +0200
References: <926b35870809240204y5d1b9ba7gde7301351e022a2@mail.gmail.com> <47E0C68E-3D29-4AD8-9001-BCE6ED494C72@apache.org>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


24 sep 2008 kl. 12.40 skrev Grant Ingersoll:

> One side note based on your example, below:  Index time boosting  
> does not have much granularity (only 255 values), in other words,  
> there is a loss of precision.  Thus, you
> want to make sure your boosts are different enough such that you can  
> distinguish between the two.   Maybe 1/(2*depth) or something like  
> that. You can alter how these 255 values are encoded, but that is  
> fairly advanced stuff.

Just a note, the granularity is 255 only if you turn off length  
normalization, if not it's something like 25.


        karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 25 08:57:21 2008
Return-Path: <java-user-return-36347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93851 invoked from network); 25 Sep 2008 08:57:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Sep 2008 08:57:21 -0000
Received: (qmail 97179 invoked by uid 500); 25 Sep 2008 08:57:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96940 invoked by uid 500); 25 Sep 2008 08:57:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96929 invoked by uid 99); 25 Sep 2008 08:57:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Sep 2008 01:57:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.litwan@wyona.com designates 195.226.6.75 as permitted sender)
Received: from [195.226.6.75] (HELO server1.example.com) (195.226.6.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Sep 2008 08:56:10 +0000
Received: from [192.168.1.56] (unknown [195.226.6.66])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by server1.example.com (Postfix) with ESMTP id 06D7A10CA3F
	for <java-user@lucene.apache.org>; Thu, 25 Sep 2008 11:06:40 +0200 (CEST)
Message-ID: <48DB5248.5030700@wyona.com>
Date: Thu, 25 Sep 2008 10:56:40 +0200
From: simon litwan <simon.litwan@wyona.com>
User-Agent: Thunderbird 2.0.0.16 (X11/20080724)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: sharing SearchIndexer
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

hi all

i tried to reuse the IndexSearcher among all of the threads that are 
doing searches as described in 
(http://wiki.apache.org/lucene-java/LuceneFAQ#head-48921635adf2c968f7936dc07d51dfb40d638b82)

this works fine. but our application does continuous indexing. so the 
index is changing and the at startup initialized IndexSearcher seems not 
to be notified to reload the index.

is there a way to force the IndexSearcher to reload the index if the 
index has changed?

thanks in advance

simon

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 25 09:09:46 2008
Return-Path: <java-user-return-36348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3277 invoked from network); 25 Sep 2008 09:09:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Sep 2008 09:09:46 -0000
Received: (qmail 18116 invoked by uid 500); 25 Sep 2008 09:09:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18078 invoked by uid 500); 25 Sep 2008 09:09:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18067 invoked by uid 99); 25 Sep 2008 09:09:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Sep 2008 02:09:37 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of eransevi@gmail.com designates 209.85.198.228 as permitted sender)
Received: from [209.85.198.228] (HELO rv-out-0506.google.com) (209.85.198.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Sep 2008 09:08:15 +0000
Received: by rv-out-0506.google.com with SMTP id f6so316919rvb.5
        for <java-user@lucene.apache.org>; Thu, 25 Sep 2008 02:08:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=bZMQXMViNUV5ZQCqCQrUa7gEl9XQvtCDJRPss3+BAOA=;
        b=ZCNmoiv4B8Pv5S7tFjAguuog0IymEHoYwiN3GjT917ySbcTmGJU5r5bqPFSI+xwKVt
         Qu6TAxv7JimYWjxby7vbaEWm9ouP3T0qQn1UQbXfzKu+VyTec9qWbo9M9gCveE2LG7tR
         fSF+hijTz1oU3nS7JRY/zxNl8nejPl+9tMaDQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=RG36t32pgE+jfn+hr/PprwoVxoI4LCt2Q8zYp8Flo+HJa/XW5Sbm8qTKCd2YxqL50B
         8+oqGMrmCsPZdNTuaFua/AChD/MpI5D/fvaHL9rVQWJSIrZUW3DV0UMiGndHCLMkDGGh
         WZLXbY2+5Cj5w9Rzv9Emx530dnKiz0ga0qa20=
Received: by 10.141.162.9 with SMTP id p9mr4002957rvo.68.1222333728552;
        Thu, 25 Sep 2008 02:08:48 -0700 (PDT)
Received: by 10.141.141.16 with HTTP; Thu, 25 Sep 2008 02:08:48 -0700 (PDT)
Message-ID: <74f928500809250208s5670b64bv76b3b6d09d9f1716@mail.gmail.com>
Date: Thu, 25 Sep 2008 12:08:48 +0300
From: "Eran Sevi" <eransevi@gmail.com>
To: java-user@lucene.apache.org
Subject: Optimizing while readers are open
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_881_648109.1222333728564"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_881_648109.1222333728564
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I have the following scenario using Lucene 2.1

1. Open reader on index to perform some searches.
2. Use reader to check if index is optimized.
2. Open writer and run optimize()
3. Close old reader and open a new reader for further searches.

I expected that after closing the old reader , the index snapshot that was
created because of the optimize would be removed, but that doesn't happen.
I remain with X2 index size even though there are not open readers.

If I open a new reader, I guess it uses the new optimized segment because
isOptimized() returns true.
I don't want to close all the readers/searchers before optimizing because it
is time consuming and I want to allow searching the index in the meantime by
using the same old reader that was opened before the optimization began.No
new readers are opened while the index is optimized.

What am I missing in this scenario?
How can I clear the old redundant files that were used by the reader?

Thanks in advance,
Eran.

------=_Part_881_648109.1222333728564--

From java-user-return-36349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 25 09:24:58 2008
Return-Path: <java-user-return-36349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12632 invoked from network); 25 Sep 2008 09:24:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Sep 2008 09:24:58 -0000
Received: (qmail 38892 invoked by uid 500); 25 Sep 2008 09:24:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38401 invoked by uid 500); 25 Sep 2008 09:24:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38386 invoked by uid 99); 25 Sep 2008 09:24:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Sep 2008 02:24:48 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.82.233] (HELO wx-out-0506.google.com) (66.249.82.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Sep 2008 09:23:25 +0000
Received: by wx-out-0506.google.com with SMTP id h28so78123wxd.20
        for <java-user@lucene.apache.org>; Thu, 25 Sep 2008 02:23:56 -0700 (PDT)
Received: by 10.70.10.3 with SMTP id 3mr9387482wxj.62.1222334636518;
        Thu, 25 Sep 2008 02:23:56 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id h8sm727949wxd.16.2008.09.25.02.23.55
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 25 Sep 2008 02:23:55 -0700 (PDT)
Message-Id: <AC791428-B691-49C8-9A6A-6032F46F8DAF@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <74f928500809250208s5670b64bv76b3b6d09d9f1716@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Optimizing while readers are open
Date: Thu, 25 Sep 2008 05:23:54 -0400
References: <74f928500809250208s5670b64bv76b3b6d09d9f1716@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Are you on Windows?

If so, you'll need to then open & close a new IndexWriter after the  
old reader has switched to the optimized index.  That will delete the  
old files.

On other OSs, which usually implement "delete on last close", the disk  
space should be automatically freed up once you close the old reader.

Mike

Eran Sevi wrote:

> Hi,
>
> I have the following scenario using Lucene 2.1
>
> 1. Open reader on index to perform some searches.
> 2. Use reader to check if index is optimized.
> 2. Open writer and run optimize()
> 3. Close old reader and open a new reader for further searches.
>
> I expected that after closing the old reader , the index snapshot  
> that was
> created because of the optimize would be removed, but that doesn't  
> happen.
> I remain with X2 index size even though there are not open readers.
>
> If I open a new reader, I guess it uses the new optimized segment  
> because
> isOptimized() returns true.
> I don't want to close all the readers/searchers before optimizing  
> because it
> is time consuming and I want to allow searching the index in the  
> meantime by
> using the same old reader that was opened before the optimization  
> began.No
> new readers are opened while the index is optimized.
>
> What am I missing in this scenario?
> How can I clear the old redundant files that were used by the reader?
>
> Thanks in advance,
> Eran.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 25 12:16:33 2008
Return-Path: <java-user-return-36350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8712 invoked from network); 25 Sep 2008 12:16:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Sep 2008 12:16:33 -0000
Received: (qmail 80604 invoked by uid 500); 25 Sep 2008 12:16:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80567 invoked by uid 500); 25 Sep 2008 12:16:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80556 invoked by uid 99); 25 Sep 2008 12:16:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Sep 2008 05:16:24 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of eransevi@gmail.com designates 209.85.198.224 as permitted sender)
Received: from [209.85.198.224] (HELO rv-out-0506.google.com) (209.85.198.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Sep 2008 12:15:25 +0000
Received: by rv-out-0506.google.com with SMTP id f6so371530rvb.5
        for <java-user@lucene.apache.org>; Thu, 25 Sep 2008 05:15:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Z3DxWjjjFPaUO9nBTscJXsDWq59UHwhe5WzYXnjjP6g=;
        b=vb4vrY2IwzRaI34y7K9tsyBVxppw7MfUEsa8S20d/SLwcosbbTt/3ZksP46zARSA4l
         iwzUgdd3KpIgjPkY1QfDpLmpndwaCTFcYB3KiY33QBBb7HrK8SIdgsdYQLREzi+gzZ8K
         XFmjpFncnkfClVq4b29oOBXiG48/6tsfuGDgs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=gMwrYZ/+VXadbpK2CCzGVefrEUwM1UfZ/cfOKZ5oZkbI8r7LJ3cemf2OzFcBRvmZVN
         4s4k+aoX6vT3Rvsm18CShBOm3SK7BY0sf67e04vECPLKVUqP8tultvqFPdM7B63tdtx6
         k6DECVPfVITT8RUc/UqKWRxkznAX6JzLPLSrk=
Received: by 10.141.28.4 with SMTP id f4mr4082385rvj.66.1222344959311;
        Thu, 25 Sep 2008 05:15:59 -0700 (PDT)
Received: by 10.140.126.17 with HTTP; Thu, 25 Sep 2008 05:15:59 -0700 (PDT)
Message-ID: <74f928500809250515x33f28at90b653a3ac8a54b0@mail.gmail.com>
Date: Thu, 25 Sep 2008 15:15:59 +0300
From: "Eran Sevi" <eransevi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Optimizing while readers are open
In-Reply-To: <AC791428-B691-49C8-9A6A-6032F46F8DAF@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1840_30382294.1222344959315"
References: <74f928500809250208s5670b64bv76b3b6d09d9f1716@mail.gmail.com>
	 <AC791428-B691-49C8-9A6A-6032F46F8DAF@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1840_30382294.1222344959315
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks Mike,

I'm using Windows and it worked just fine, although the procedure is a bit
awkward. Why do I have to open a new writer? closing the current one (after
switching readers) isn't enough? is it because of deleted documents that
need to be updated?

Do you know if it's different in more advanced versions than 2.1 ?

Eran.

On Thu, Sep 25, 2008 at 12:23 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> Are you on Windows?
>
> If so, you'll need to then open & close a new IndexWriter after the old
> reader has switched to the optimized index.  That will delete the old files.
>
> On other OSs, which usually implement "delete on last close", the disk
> space should be automatically freed up once you close the old reader.
>
> Mike
>
>
> Eran Sevi wrote:
>
> Hi,
>>
>> I have the following scenario using Lucene 2.1
>>
>> 1. Open reader on index to perform some searches.
>> 2. Use reader to check if index is optimized.
>> 2. Open writer and run optimize()
>> 3. Close old reader and open a new reader for further searches.
>>
>> I expected that after closing the old reader , the index snapshot that was
>> created because of the optimize would be removed, but that doesn't happen.
>> I remain with X2 index size even though there are not open readers.
>>
>> If I open a new reader, I guess it uses the new optimized segment because
>> isOptimized() returns true.
>> I don't want to close all the readers/searchers before optimizing because
>> it
>> is time consuming and I want to allow searching the index in the meantime
>> by
>> using the same old reader that was opened before the optimization began.No
>> new readers are opened while the index is optimized.
>>
>> What am I missing in this scenario?
>> How can I clear the old redundant files that were used by the reader?
>>
>> Thanks in advance,
>> Eran.
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_1840_30382294.1222344959315--

From java-user-return-36351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 25 13:38:46 2008
Return-Path: <java-user-return-36351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71609 invoked from network); 25 Sep 2008 13:38:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Sep 2008 13:38:45 -0000
Received: (qmail 94970 invoked by uid 500); 25 Sep 2008 13:38:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94944 invoked by uid 500); 25 Sep 2008 13:38:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94932 invoked by uid 99); 25 Sep 2008 13:38:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Sep 2008 06:38:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Sep 2008 13:37:37 +0000
Received: by gxk6 with SMTP id 6so7169427gxk.5
        for <java-user@lucene.apache.org>; Thu, 25 Sep 2008 06:38:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=qwvtMgBkXOM4j6tVcB2HiBtAku3RUvybyBQm0iQsqDo=;
        b=Kr+mIQj0t+b/UMPYDiB1gv9psHuV7OTJWs/p328RnldlmvXoqU5tR1Fh5mVP0f4EP3
         sY881PJALiHUjkoOjemZIQo2PzX10+L5JSQ8iF0EZYOPfyi4X3UfIv1+luAdYbgL6Pun
         VNK628PWD9+r+Y9l4h7Y+tGzE4gNknUwpmsEE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=dpEiT/f/EG7by9j6wz4SFndkSFG55BhtfAnboaVW/SrrUSn/GsuCWWKIixXznbt7YG
         dwwDSXa9JMu+kDe5NsIpkdmN8jziy8OtxmetPySHDT6/jHFIbRqTDO3ELtlDKy3aM39Q
         blWEk3L0+KLJCcjbBQZJXOxxZV+WaVAOaA7tk=
Received: by 10.90.94.12 with SMTP id r12mr10041674agb.29.1222349890134;
        Thu, 25 Sep 2008 06:38:10 -0700 (PDT)
Received: from ?192.168.1.101? ( [68.198.57.217])
        by mx.google.com with ESMTPS id 20sm702112agb.38.2008.09.25.06.38.08
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 25 Sep 2008 06:38:09 -0700 (PDT)
Message-ID: <48DB9441.5010403@gmail.com>
Date: Thu, 25 Sep 2008 09:38:09 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.16 (X11/20080725)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: sharing SearchIndexer
References: <48DB5248.5030700@wyona.com>
In-Reply-To: <48DB5248.5030700@wyona.com>
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

simon litwan wrote:
> hi all
>
> i tried to reuse the IndexSearcher among all of the threads that are 
> doing searches as described in 
> (http://wiki.apache.org/lucene-java/LuceneFAQ#head-48921635adf2c968f7936dc07d51dfb40d638b82) 
>
>
> this works fine. but our application does continuous indexing. so the 
> index is changing and the at startup initialized IndexSearcher seems 
> not to be notified to reload the index.
>
> is there a way to force the IndexSearcher to reload the index if the 
> index has changed?
>
> thanks in advance
>
> simon
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
You want to reopen the Reader under the IndexSearcher, or open a new 
IndexSearcher.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 25 15:11:49 2008
Return-Path: <java-user-return-36352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56232 invoked from network); 25 Sep 2008 15:11:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Sep 2008 15:11:49 -0000
Received: (qmail 72039 invoked by uid 500); 25 Sep 2008 15:11:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72013 invoked by uid 500); 25 Sep 2008 15:11:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72002 invoked by uid 99); 25 Sep 2008 15:11:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Sep 2008 08:11:40 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.82.231] (HELO wx-out-0506.google.com) (66.249.82.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Sep 2008 15:10:40 +0000
Received: by wx-out-0506.google.com with SMTP id h28so110561wxd.20
        for <java-user@lucene.apache.org>; Thu, 25 Sep 2008 08:11:03 -0700 (PDT)
Received: by 10.70.90.6 with SMTP id n6mr9796577wxb.31.1222355463120;
        Thu, 25 Sep 2008 08:11:03 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id h13sm1311744wxd.7.2008.09.25.08.11.01
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 25 Sep 2008 08:11:02 -0700 (PDT)
Message-Id: <6E0FC72D-A333-4CC2-A660-5BE0C6B708AE@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-dev@lucene.apache.org,
 java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: 2.4 release candidate 2
Date: Thu, 25 Sep 2008 11:11:00 -0400
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I just created the second release candidate for Lucene 2.4, here:

   http://people.apache.org/~mikemccand/staging-area/lucene2.4rc2

These are the fixes since RC1:

   * Issues with CheckIndex (LUCENE-1402)

   * Removed new yet deprecated ctors for IndexWriter, and set
     autoCommit=false default for new the ctors (LUCENE-1401)

   * Cases where optimize throws an IOException because a BG merge had
     problems, yet fails to include the root casue exception
     (LUCENE-1397)

   * Improved PhraseQuery.toString (LUCENE-1396)

   * NullPointerException in NearSpansUnordered.isPayloadAvailable
     (LUCENE-1404)

   * A bunch of small javadoc issues, unecessary import lines, missing
     copyright headers

Please continue testing and reporting any issues you find!  Thanks.

Mike


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 25 15:17:29 2008
Return-Path: <java-user-return-36353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58658 invoked from network); 25 Sep 2008 15:17:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Sep 2008 15:17:26 -0000
Received: (qmail 80492 invoked by uid 500); 25 Sep 2008 15:17:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79449 invoked by uid 500); 25 Sep 2008 15:17:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79438 invoked by uid 99); 25 Sep 2008 15:17:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Sep 2008 08:17:17 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Sep 2008 15:16:17 +0000
Received: by gxk6 with SMTP id 6so7326527gxk.5
        for <java-user@lucene.apache.org>; Thu, 25 Sep 2008 08:15:48 -0700 (PDT)
Received: by 10.90.50.7 with SMTP id x7mr10146097agx.44.1222355748427;
        Thu, 25 Sep 2008 08:15:48 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id 9sm784777agc.31.2008.09.25.08.15.46
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 25 Sep 2008 08:15:47 -0700 (PDT)
Message-Id: <DA6E2C14-5825-4702-A553-CCC3A41D98DA@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <74f928500809250515x33f28at90b653a3ac8a54b0@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Optimizing while readers are open
Date: Thu, 25 Sep 2008 11:15:45 -0400
References: <74f928500809250208s5670b64bv76b3b6d09d9f1716@mail.gmail.com> <AC791428-B691-49C8-9A6A-6032F46F8DAF@mikemccandless.com> <74f928500809250515x33f28at90b653a3ac8a54b0@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Eran Sevi wrote:

> I'm using Windows and it worked just fine, although the procedure is  
> a bit
> awkward. Why do I have to open a new writer? closing the current one  
> (after
> switching readers) isn't enough? is it because of deleted documents  
> that
> need to be updated?

It's because Windows doesn't let you delete a file that's open (not  
due to deleted documents).

> Do you know if it's different in more advanced versions than 2.1 ?

In fact, it is: as of 2.3, IndexWriter will try to delete unreferenced  
files during close().  So once you upgrade you won't need to open &  
close a new IndexWriter.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 25 17:40:47 2008
Return-Path: <java-user-return-36354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60060 invoked from network); 25 Sep 2008 17:40:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Sep 2008 17:40:47 -0000
Received: (qmail 10497 invoked by uid 500); 25 Sep 2008 17:40:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10447 invoked by uid 500); 25 Sep 2008 17:40:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10333 invoked by uid 99); 25 Sep 2008 17:40:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Sep 2008 10:40:32 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of davidtlee@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Sep 2008 17:39:33 +0000
Received: by gxk6 with SMTP id 6so7548703gxk.5
        for <java-user@lucene.apache.org>; Thu, 25 Sep 2008 10:39:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=zCw+i8Faa1V0vTXKuVCSbBG9xhvQYXFBL6TefFPShf0=;
        b=u8KeLp1CcThfFIAwK80pcK1+K14UDgVbOknZ4+n+CUisZMAin2Mk+NkY5vqkVzW+sN
         BWW1NkXaXDrdIqPt4KxAFoR2To0cqbqcZubHOR0qw3ceUjGJBwUqoOaNfcoyUv6t6ehC
         fo8iSilzLufzBm9y1m6oW7ybO4o5ciUIzugAI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=RCA7KRB+0g7cXxzG/Y52cgSYVeRNIE0R4u7JQKvEW/dI6e5uH2CT9OcRhBa8CD7nUl
         /5e1PHTmqwwumxFKI8WzCk3Gk+X2Y8n7+8/E1IEsQMfx0E9Xy0Rc8c+QWlPqrl9JlD32
         XeHu+vbG21RzAk4SZeqybRdORStAzTC7KrPMg=
Received: by 10.142.193.13 with SMTP id q13mr25361wff.103.1222364345872;
        Thu, 25 Sep 2008 10:39:05 -0700 (PDT)
Received: by 10.142.221.17 with HTTP; Thu, 25 Sep 2008 10:39:05 -0700 (PDT)
Message-ID: <16f8407d0809251039wbefc3d7x5a156e29f0cff6f5@mail.gmail.com>
Date: Thu, 25 Sep 2008 10:39:05 -0700
From: "David Lee" <davidtlee@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene AND queries
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_94070_866856.1222364345869"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_94070_866856.1222364345869
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
I was wondering when lucene queries two or more terms, does that mean the
time it takes will be twice as long? For example if I search +lucene
+apache, then does lucene get all the documents that match 'lucene' and all
the documents that match 'apache', and then combine them together? Or can it
limit the amount of things it needs to retrieve from the index for 'apache'
based on what it has already retrieved for 'lucene'?

Is there documentation on how queries work in lucene in regards to how it
deals with the actual index files?

David

------=_Part_94070_866856.1222364345869--

From java-user-return-36355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 25 17:57:14 2008
Return-Path: <java-user-return-36355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70674 invoked from network); 25 Sep 2008 17:57:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Sep 2008 17:57:14 -0000
Received: (qmail 30305 invoked by uid 500); 25 Sep 2008 17:57:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30273 invoked by uid 500); 25 Sep 2008 17:57:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30262 invoked by uid 99); 25 Sep 2008 17:57:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Sep 2008 10:57:06 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.198.229 as permitted sender)
Received: from [209.85.198.229] (HELO rv-out-0506.google.com) (209.85.198.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Sep 2008 17:56:06 +0000
Received: by rv-out-0506.google.com with SMTP id f9so29493rvb.2
        for <java-user@lucene.apache.org>; Thu, 25 Sep 2008 10:56:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=Z8XpLtnWANA+y6ThxAoxc3JGV3/0Hgm2xBReV0D0YKY=;
        b=YAWeuj/sqwF1k/BNL7lXqlZMkyMkOqRye7Vi/eheyziFnKiPFZv3EsaSrx9+Y/J0R4
         p0WsjnyRVpDVCkpq1i2lWzDkuoCyD8sNSoDyRuRNa70Lt2+ySOFolHm1imbCKvJmzsPK
         9rTxxKG8DrIiWJDDNbV3f6x7M2Na5PdVXTuuo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=mIHNKwTXFTkiNoWgenQJOSlMr7oBTY1mtFytTFHnpeoI9tRTZmQqkDD4GoVjs4v22Q
         TUmCD1Z5ZGGbAepBLsQAA56nbnupZd6LfT7SncwCdvqvl/nRWJWgswDM5miMjpsvZCOS
         0bjWWgZRlXzrVEdtYTf2N9ivOez8PqfEA/aJc=
Received: by 10.141.145.11 with SMTP id x11mr23418rvn.215.1222365390587;
        Thu, 25 Sep 2008 10:56:30 -0700 (PDT)
Received: by 10.141.212.15 with HTTP; Thu, 25 Sep 2008 10:56:30 -0700 (PDT)
Message-ID: <c68e39170809251056g43264b58te75ea04acdfd235e@mail.gmail.com>
Date: Thu, 25 Sep 2008 13:56:30 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Lucene AND queries
In-Reply-To: <16f8407d0809251039wbefc3d7x5a156e29f0cff6f5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <16f8407d0809251039wbefc3d7x5a156e29f0cff6f5@mail.gmail.com>
X-Google-Sender-Auth: 7914e0faa00172d1
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Sep 25, 2008 at 1:39 PM, David Lee <davidtlee@gmail.com> wrote:
> I was wondering when lucene queries two or more terms, does that mean the
> time it takes will be twice as long? For example if I search +lucene
> +apache, then does lucene get all the documents that match 'lucene' and all
> the documents that match 'apache', and then combine them together? Or can it
> limit the amount of things it needs to retrieve from the index for 'apache'
> based on what it has already retrieved for 'lucene'?

Closer to the latter.  Lucene evaluates all clauses in parallel.  A
document id iterator is created for each term, and they are all
"skipped" to the highest id yet seen until all iterators are on the
same id, which yields a match.  So an AND query of a rare term and a
common term can be faster than the common term alone.

> Is there documentation on how queries work in lucene in regards to how it
> deals with the actual index files?

TermScorer and ConjunctionScorer are the classes you would want to look at.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 25 21:04:36 2008
Return-Path: <java-user-return-36356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6601 invoked from network); 25 Sep 2008 21:04:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Sep 2008 21:04:36 -0000
Received: (qmail 76247 invoked by uid 500); 25 Sep 2008 21:04:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75630 invoked by uid 500); 25 Sep 2008 21:04:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75619 invoked by uid 99); 25 Sep 2008 21:04:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Sep 2008 14:04:27 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of davidtlee@gmail.com designates 209.85.200.174 as permitted sender)
Received: from [209.85.200.174] (HELO wf-out-1314.google.com) (209.85.200.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Sep 2008 21:03:28 +0000
Received: by wf-out-1314.google.com with SMTP id 28so739349wfc.20
        for <java-user@lucene.apache.org>; Thu, 25 Sep 2008 14:04:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=nxnnvZavkPhdXy1k+KuoK6rs+3Amm+P4W7I12MYRHj0=;
        b=LBEB9M3onFGoLkG5NSyKCcHRDo94wgFTdXjdS7oeqCT9sSGlQNS+In8RlJbW76821C
         jKrxfXNQGKC5GXjwFTVd8ikSTd+d4AR3qmHuV9aZpO9FXAGTiYlKmLq8E05kCTmykOFY
         dg+I0PXlzlOXC2c20JLconSO3nfQErssd7LfY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=aEVyxCBLd0CD1h7cX+FCi1b6g2L4drRdB2olic/shIr2HyMEbwResMsuWda4ZQb9ze
         qmEV4HF2Cof/YRsKKPPXdjHKCVJGCkB2QHR8BQcVpM8jjmmy/UEzGSN+0dski2c5Ahgk
         bwWVZ4A1vjL53ITi0TJpTfARQMJu18mgxhn7A=
Received: by 10.142.128.6 with SMTP id a6mr131424wfd.10.1222376642554;
        Thu, 25 Sep 2008 14:04:02 -0700 (PDT)
Received: by 10.142.221.17 with HTTP; Thu, 25 Sep 2008 14:04:02 -0700 (PDT)
Message-ID: <16f8407d0809251404j409012b9x7c63df3c5c8e32fd@mail.gmail.com>
Date: Thu, 25 Sep 2008 14:04:02 -0700
From: "David Lee" <davidtlee@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene AND queries
In-Reply-To: <c68e39170809251056g43264b58te75ea04acdfd235e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_173_21798295.1222376642532"
References: <16f8407d0809251039wbefc3d7x5a156e29f0cff6f5@mail.gmail.com>
	 <c68e39170809251056g43264b58te75ea04acdfd235e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_173_21798295.1222376642532
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

thanks! So it seems like lucene does a sequential read of both terms
information in the index and then skips around using docid iterators? Is it
able to push the skipping around into the index so it doesn't need to read
as much?

On Thu, Sep 25, 2008 at 10:56 AM, Yonik Seeley <yonik@apache.org> wrote:

> On Thu, Sep 25, 2008 at 1:39 PM, David Lee <davidtlee@gmail.com> wrote:
> > I was wondering when lucene queries two or more terms, does that mean the
> > time it takes will be twice as long? For example if I search +lucene
> > +apache, then does lucene get all the documents that match 'lucene' and
> all
> > the documents that match 'apache', and then combine them together? Or can
> it
> > limit the amount of things it needs to retrieve from the index for
> 'apache'
> > based on what it has already retrieved for 'lucene'?
>
> Closer to the latter.  Lucene evaluates all clauses in parallel.  A
> document id iterator is created for each term, and they are all
> "skipped" to the highest id yet seen until all iterators are on the
> same id, which yields a match.  So an AND query of a rare term and a
> common term can be faster than the common term alone.
>
> > Is there documentation on how queries work in lucene in regards to how it
> > deals with the actual index files?
>
> TermScorer and ConjunctionScorer are the classes you would want to look at.
>
> -Yonik
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_173_21798295.1222376642532--

From java-user-return-36357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 25 21:18:13 2008
Return-Path: <java-user-return-36357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14852 invoked from network); 25 Sep 2008 21:18:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Sep 2008 21:18:13 -0000
Received: (qmail 90802 invoked by uid 500); 25 Sep 2008 21:18:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90777 invoked by uid 500); 25 Sep 2008 21:18:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90766 invoked by uid 99); 25 Sep 2008 21:18:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Sep 2008 14:18:04 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.198.238 as permitted sender)
Received: from [209.85.198.238] (HELO rv-out-0506.google.com) (209.85.198.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Sep 2008 21:17:05 +0000
Received: by rv-out-0506.google.com with SMTP id f6so557262rvb.5
        for <java-user@lucene.apache.org>; Thu, 25 Sep 2008 14:17:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=57iaFWcL2a+iC48X/UyQyjLMkVS0UK25UVLSAYffWig=;
        b=rNno0SPWPSD9iAZy3XgJwxe+8fCWkT5ptyBGiAfkR5Ee+86y0HaMNmVK0vDC7F3F+n
         UxKES5JhA1HxQd4/tPAAQlaQFjjmvc/cA8Ek+AdfspAP2z6177wFKde5Day1jnpSuzuG
         Ka7bzZGEd22xBIVy7ObVvGW9OOYHFmDRcfuJU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=fi2LIRAMeP37RipBS0lyeCqS1NesGJA1niu2wcMHxalCEk9eWr2hs2N6i7CUxCxx8K
         IrGgJ0AbPdfC880EaONrP6Os5xaLiFiTtkQAXq49wuAV7AKWFMKh9XKdH9uEFTLw27Cw
         nipsFPcJh8reCZqC91+jggQHZ8WdG6BOQ01wk=
Received: by 10.141.52.5 with SMTP id e5mr158327rvk.10.1222377459305;
        Thu, 25 Sep 2008 14:17:39 -0700 (PDT)
Received: by 10.141.212.15 with HTTP; Thu, 25 Sep 2008 14:17:39 -0700 (PDT)
Message-ID: <c68e39170809251417l5666bf95sd837c7cf6ed85f59@mail.gmail.com>
Date: Thu, 25 Sep 2008 17:17:39 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Lucene AND queries
In-Reply-To: <16f8407d0809251404j409012b9x7c63df3c5c8e32fd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <16f8407d0809251039wbefc3d7x5a156e29f0cff6f5@mail.gmail.com>
	 <c68e39170809251056g43264b58te75ea04acdfd235e@mail.gmail.com>
	 <16f8407d0809251404j409012b9x7c63df3c5c8e32fd@mail.gmail.com>
X-Google-Sender-Auth: d49a6c8e561a1615
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Sep 25, 2008 at 5:04 PM, David Lee <davidtlee@gmail.com> wrote:
> thanks! So it seems like lucene does a sequential read of both terms
> information in the index and then skips around using docid iterators? Is it
> able to push the skipping around into the index so it doesn't need to read
> as much?

Yes, skipping goes down to the index level, and there are multi-level
skip lists to speed up skipping.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 00:10:38 2008
Return-Path: <java-user-return-36358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53075 invoked from network); 26 Sep 2008 00:10:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 00:10:38 -0000
Received: (qmail 59502 invoked by uid 500); 26 Sep 2008 00:10:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59468 invoked by uid 500); 26 Sep 2008 00:10:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59457 invoked by uid 99); 26 Sep 2008 00:10:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Sep 2008 17:10:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ari1974@gmail.com designates 209.85.146.178 as permitted sender)
Received: from [209.85.146.178] (HELO wa-out-1112.google.com) (209.85.146.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 00:09:29 +0000
Received: by wa-out-1112.google.com with SMTP id n4so334989wag.5
        for <java-user@lucene.apache.org>; Thu, 25 Sep 2008 17:09:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=xufOdlLM0a8Dtp7LlaeM8g/aDPd2oEzrUTLHZrx7fWw=;
        b=HPz+/P6Yujs6ONSCFa8bfs3g0BNA+UzZxbEBWLmXJiRXiNIQHn1LLX+j6eo8I5LIJw
         MPj1NvPzhnmRDBobpQzhsuXMSzFw1+9SjEITHTpUHcMj/9v6Z8KWeOxAW5IAzk76751D
         fB9EA6z55yshq3IQMiz2WKUIrnI7lXofK8jyg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=BPGxM0PfWuAPVVFqioY9Q2ehCi/lnPh1s8F3m5+Qmk46VSxhPcuvroSJm8syP15x72
         P+YMuoYLGnEY+ovhEFMgcz9RpudePmNUPOHXxcFDCpUdKuxqqcxjfVHMm9QDXJQ1P3C1
         vQguVDppmXRkACYSsCdYjUEEZUdm70BGnM9b0=
Received: by 10.114.194.1 with SMTP id r1mr482647waf.205.1222387793152;
        Thu, 25 Sep 2008 17:09:53 -0700 (PDT)
Received: by 10.114.12.5 with HTTP; Thu, 25 Sep 2008 17:09:53 -0700 (PDT)
Message-ID: <d3c60f0e0809251709x73950b27yc9dbfbb9390468c9@mail.gmail.com>
Date: Thu, 25 Sep 2008 17:09:53 -0700
From: "Ari Miller" <ari1974@gmail.com>
To: java-user@lucene.apache.org
Subject: CorruptIndexException workaround in 2.3-SNAPSHOT? (Attn: Michael McCandless)
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

According to https://issues.apache.org/jira/browse/LUCENE-1282?focusedCommentId=12596949#action_12596949
(Sun hotspot compiler bug in 1.6.0_04/05 affects Lucene), a workaround
for the bug which causes the CorruptIndexException was put in to the
2.3 branch and 2.4.
However, we are still experiencing this issue (intermittent creation
of a corrupt index) with a 2.3-SNAPSHOT from maven.
Was the workaround put into 2.3-SNAPSHOT?  Are there other issues
which would cause the same error (detailed below)?

We would prefer to avoid upgrading to JDK 6u10
(http://java.sun.com/javase/downloads/ea/6u10/6u10RC.jsp) until it is
a final release, thus the use of the 2.3-SNAPSHOT dated July 22.


Detailed error (seems to match LUCENE-1282):
[java] org.apache.lucene.index.CorruptIndexException: doc counts
differ for segment _1e: fieldsReader shows 2924328 but segmentInfo
shows 2924329
     [java]     at
org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:313)
     [java]     at
org.apache.lucene.index.SegmentReader.get(SegmentReader.java:262)
     [java]     at
org.apache.lucene.index.SegmentReader.get(SegmentReader.java:230)
     [java]     at
org.apache.lucene.index.DirectoryIndexReader$1.doBody(DirectoryIndexReader.java:73)
     [java]     at
org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.java:636)
     [java]     at
org.apache.lucene.index.DirectoryIndexReader.open(DirectoryIndexReader.java:63)
     [java]     at
org.apache.lucene.index.IndexReader.open(IndexReader.java:209)
     [java]     at
org.apache.lucene.index.IndexReader.open(IndexReader.java:173)

Snapshot we are using:
http://people.apache.org/maven-snapshot-repository/org/apache/lucene/lucene-core/2.3-SNAPSHOT/
  (dated July 22)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 05:23:42 2008
Return-Path: <java-user-return-36359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93004 invoked from network); 26 Sep 2008 05:23:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 05:23:42 -0000
Received: (qmail 90525 invoked by uid 500); 26 Sep 2008 05:23:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90497 invoked by uid 500); 26 Sep 2008 05:23:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90486 invoked by uid 99); 26 Sep 2008 05:23:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Sep 2008 22:23:32 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 05:22:32 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Kj5nE-0004aY-Ra
	for java-user@lucene.apache.org; Thu, 25 Sep 2008 22:23:04 -0700
Message-ID: <19682684.post@talk.nabble.com>
Date: Thu, 25 Sep 2008 22:23:04 -0700 (PDT)
From: rahul_k123 <vishnudeepak@gmail.com>
To: java-user@lucene.apache.org
Subject: Caused by: java.io.IOException: read past EOF on Slave
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: vishnudeepak@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


First of all, thanks to all the people who helped me in getting the lucene
replication setup working and right now its live in our production :-)

Everything working fine, except that i am seeing some exceptions on slaves.

The following is the one which is occuring more often on slaves

  at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
        at
java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
        at java.util.concurrent.FutureTask.run(FutureTask.java:138)
        at
java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:885)
        at
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
        at java.lang.Thread.run(Thread.java:619)
Caused by: com.IndexingException: [SYSTEM_ERROR] Cannot access index
[data_dir/index]: [read past EOF]
        at
com.lucene.LuceneSearchService.getSearchResults(LuceneSearchService.java:964)
        ... 12 more
Caused by: java.io.IOException: read past EOF
        at
org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java:146)
        at
org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.java:38)
        at org.apache.lucene.store.IndexInput.readInt(IndexInput.java:66)
        at org.apache.lucene.store.IndexInput.readLong(IndexInput.java:89)
        at org.apache.lucene.index.FieldsReader.doc(FieldsReader.java:147)
        at
org.apache.lucene.index.SegmentReader.document(SegmentReader.java:659)
        at
org.apache.lucene.index.MultiSegmentReader.document(MultiSegmentReader.java:257)
        at
org.apache.lucene.index.IndexReader.document(IndexReader.java:525)

and the second one is 

 at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
        at
java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
        at java.util.concurrent.FutureTask.run(FutureTask.java:138)
        at
java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:885)
        at
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
        at java.lang.Thread.run(Thread.java:619)
Caused by: java.lang.IllegalArgumentException: attempt to access a deleted
document
        at
org.apache.lucene.index.SegmentReader.document(SegmentReader.java:657)
        at
org.apache.lucene.index.MultiSegmentReader.document(MultiSegmentReader.java:257)
        at
org.apache.lucene.index.IndexReader.document(IndexReader.java:525)
This is on master index .



Any help is appreciated 

Thanks.

-- 
View this message in context: http://www.nabble.com/Caused-by%3A-java.io.IOException%3A-read-past-EOF-on-Slave-tp19682684p19682684.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 07:39:38 2008
Return-Path: <java-user-return-36360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72400 invoked from network); 26 Sep 2008 07:39:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 07:39:37 -0000
Received: (qmail 28967 invoked by uid 500); 26 Sep 2008 07:39:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28934 invoked by uid 500); 26 Sep 2008 07:39:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28923 invoked by uid 99); 26 Sep 2008 07:39:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 00:39:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 07:38:29 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id D52A824002
	for <java-user@lucene.apache.org>; Fri, 26 Sep 2008 10:38:30 +0300 (EEST)
Message-ID: <48DC9176.3050403@sirma.bg>
Date: Fri, 26 Sep 2008 10:38:30 +0300
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: LUCENE MAIL LIST <java-user@lucene.apache.org>
Subject: Sorting with ParallelReader
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Guys,

Does anybody know if it is possible results to be sorted using the 
ParallelReader?

Best Regards,
Ivan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 07:42:42 2008
Return-Path: <java-user-return-36361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74923 invoked from network); 26 Sep 2008 07:42:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 07:42:39 -0000
Received: (qmail 32640 invoked by uid 500); 26 Sep 2008 07:42:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32606 invoked by uid 500); 26 Sep 2008 07:42:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32522 invoked by uid 99); 26 Sep 2008 07:42:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 00:42:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.litwan@wyona.com designates 195.226.6.75 as permitted sender)
Received: from [195.226.6.75] (HELO server1.example.com) (195.226.6.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 07:41:28 +0000
Received: from [192.168.1.56] (unknown [195.226.6.66])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by server1.example.com (Postfix) with ESMTP id 6E14D10C961
	for <java-user@lucene.apache.org>; Fri, 26 Sep 2008 09:51:31 +0200 (CEST)
Message-ID: <48DC9227.2080709@wyona.com>
Date: Fri, 26 Sep 2008 09:41:27 +0200
From: simon litwan <simon.litwan@wyona.com>
User-Agent: Thunderbird 2.0.0.16 (X11/20080724)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: sharing SearchIndexer
References: <48DB5248.5030700@wyona.com> <48DB9441.5010403@gmail.com>
In-Reply-To: <48DB9441.5010403@gmail.com>
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Mark Miller schrieb:
> simon litwan wrote:
>> hi all
>>
>> i tried to reuse the IndexSearcher among all of the threads that are 
>> doing searches as described in 
>> (http://wiki.apache.org/lucene-java/LuceneFAQ#head-48921635adf2c968f7936dc07d51dfb40d638b82) 
>>
>>
>> this works fine. but our application does continuous indexing. so the 
>> index is changing and the at startup initialized IndexSearcher seems 
>> not to be notified to reload the index.
>>
>> is there a way to force the IndexSearcher to reload the index if the 
>> index has changed?
>>
>> thanks in advance
>>
>> simon
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> You want to reopen the Reader under the IndexSearcher, or open a new 
> IndexSearcher.
I want to reopen the Reader under the IndexSearcher when the index has 
changed. is there a way to do so?

simon
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 08:52:03 2008
Return-Path: <java-user-return-36362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15970 invoked from network); 26 Sep 2008 08:52:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 08:52:03 -0000
Received: (qmail 11106 invoked by uid 500); 26 Sep 2008 08:51:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11062 invoked by uid 500); 26 Sep 2008 08:51:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11035 invoked by uid 99); 26 Sep 2008 08:51:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 01:51:49 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 08:50:50 +0000
Received: by gxk6 with SMTP id 6so8237211gxk.5
        for <java-user@lucene.apache.org>; Fri, 26 Sep 2008 01:50:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=AA6IFxd1AStrAnlDJ/6ID3tflUC1cV2mwvwOvq6rOho=;
        b=mNiw/W/eDf5SMIQDehdcwzxAL31OrCZRLfHBFSiITf7TJwR7RZ8eLyK1C2LuotYWt/
         dyP/0tRkUEqMM+3/VDw4y+0/LAA8R3IFK6n/zq4885/ETMJAtSeV7uNIy4ltv3LUYmm5
         ZOGXLMiecKLrRFbcskLRNY824AYBbwwUUHwrM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=pxfZXaaJFQluRrNfsKt1gCNBzPhVCncbMQkA0TzDJ3/AptzGGu25CR4ZwyE5XSDwFp
         oWscyZQwpFKLlu3cYzISqr5mUGdSsm/MNU2DoiU1WcMxvdYzcpgtGJJTAKvahA2LDMoU
         tk7aujJ8H53gnoaBs4U0cRdX+7OXM2mLcO7O4=
Received: by 10.100.202.14 with SMTP id z14mr741584anf.138.1222419023319;
        Fri, 26 Sep 2008 01:50:23 -0700 (PDT)
Received: by 10.100.132.7 with HTTP; Fri, 26 Sep 2008 01:50:23 -0700 (PDT)
Message-ID: <8c4e68610809260150y57f3d92fkd59db19c691ad88a@mail.gmail.com>
Date: Fri, 26 Sep 2008 09:50:23 +0100
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: sharing SearchIndexer
In-Reply-To: <48DC9227.2080709@wyona.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <48DB5248.5030700@wyona.com> <48DB9441.5010403@gmail.com>
	 <48DC9227.2080709@wyona.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Simon


There is nothing in lucene to detect that an index has changed and
automagically reopen an IndexReader.

You can do the notification from your indexing thread, or every nnn
mins, or whatever makes sense for your application.  Note that
IndexReader.reopen() does nothing if the index has not changed - see
the javadocs.


--
Ian.


On Fri, Sep 26, 2008 at 8:41 AM, simon litwan <simon.litwan@wyona.com> wrote:
> Mark Miller schrieb:
>>
>> simon litwan wrote:
>>>
>>> hi all
>>>
>>> i tried to reuse the IndexSearcher among all of the threads that are
>>> doing searches as described in
>>> (http://wiki.apache.org/lucene-java/LuceneFAQ#head-48921635adf2c968f7936dc07d51dfb40d638b82)
>>>
>>> this works fine. but our application does continuous indexing. so the
>>> index is changing and the at startup initialized IndexSearcher seems not to
>>> be notified to reload the index.
>>>
>>> is there a way to force the IndexSearcher to reload the index if the
>>> index has changed?
>>>
>>> thanks in advance
>>>
>>> simon
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>> You want to reopen the Reader under the IndexSearcher, or open a new
>> IndexSearcher.
>
> I want to reopen the Reader under the IndexSearcher when the index has
> changed. is there a way to do so?
>
> simon

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 09:35:53 2008
Return-Path: <java-user-return-36363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39613 invoked from network); 26 Sep 2008 09:35:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 09:35:53 -0000
Received: (qmail 74109 invoked by uid 500); 26 Sep 2008 09:35:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73987 invoked by uid 500); 26 Sep 2008 09:35:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73976 invoked by uid 99); 26 Sep 2008 09:35:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 02:35:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.litwan@wyona.com designates 195.226.6.75 as permitted sender)
Received: from [195.226.6.75] (HELO server1.example.com) (195.226.6.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 09:34:40 +0000
Received: from [192.168.1.56] (unknown [195.226.6.66])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by server1.example.com (Postfix) with ESMTP id 4C92710C947
	for <java-user@lucene.apache.org>; Fri, 26 Sep 2008 11:45:13 +0200 (CEST)
Message-ID: <48DCACCE.9080704@wyona.com>
Date: Fri, 26 Sep 2008 11:35:10 +0200
From: simon litwan <simon.litwan@wyona.com>
User-Agent: Thunderbird 2.0.0.16 (X11/20080724)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: sharing SearchIndexer
References: <48DB5248.5030700@wyona.com> <48DB9441.5010403@gmail.com>	 <48DC9227.2080709@wyona.com> <8c4e68610809260150y57f3d92fkd59db19c691ad88a@mail.gmail.com>
In-Reply-To: <8c4e68610809260150y57f3d92fkd59db19c691ad88a@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Ian Lea schrieb:
> Simon
>
>
> There is nothing in lucene to detect that an index has changed and
> automagically reopen an IndexReader.
>
> You can do the notification from your indexing thread, or every nnn
> mins, or whatever makes sense for your application.  Note that
> IndexReader.reopen() does nothing if the index has not changed - see
> the javadocs.
>   
thanks very much. i will try it this way.

cheers
simon
>
> --
> Ian.
>
>
> On Fri, Sep 26, 2008 at 8:41 AM, simon litwan <simon.litwan@wyona.com> wrote:
>   
>> Mark Miller schrieb:
>>     
>>> simon litwan wrote:
>>>       
>>>> hi all
>>>>
>>>> i tried to reuse the IndexSearcher among all of the threads that are
>>>> doing searches as described in
>>>> (http://wiki.apache.org/lucene-java/LuceneFAQ#head-48921635adf2c968f7936dc07d51dfb40d638b82)
>>>>
>>>> this works fine. but our application does continuous indexing. so the
>>>> index is changing and the at startup initialized IndexSearcher seems not to
>>>> be notified to reload the index.
>>>>
>>>> is there a way to force the IndexSearcher to reload the index if the
>>>> index has changed?
>>>>
>>>> thanks in advance
>>>>
>>>> simon
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>         
>>> You want to reopen the Reader under the IndexSearcher, or open a new
>>> IndexSearcher.
>>>       
>> I want to reopen the Reader under the IndexSearcher when the index has
>> changed. is there a way to do so?
>>
>> simon
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 10:31:09 2008
Return-Path: <java-user-return-36364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66994 invoked from network); 26 Sep 2008 10:31:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 10:31:09 -0000
Received: (qmail 55188 invoked by uid 500); 26 Sep 2008 10:30:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55150 invoked by uid 500); 26 Sep 2008 10:30:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55138 invoked by uid 99); 26 Sep 2008 10:30:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 03:30:57 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 10:29:57 +0000
Received: by yw-out-2324.google.com with SMTP id 3so140960ywj.5
        for <java-user@lucene.apache.org>; Fri, 26 Sep 2008 03:30:29 -0700 (PDT)
Received: by 10.151.15.9 with SMTP id s9mr1723236ybi.205.1222425029042;
        Fri, 26 Sep 2008 03:30:29 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id a68sm1882025rnc.17.2008.09.26.03.30.27
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 26 Sep 2008 03:30:28 -0700 (PDT)
Message-Id: <190623F6-7BDE-40E0-BC26-E808B4D6BE23@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <d3c60f0e0809251709x73950b27yc9dbfbb9390468c9@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: CorruptIndexException workaround in 2.3-SNAPSHOT? (Attn: Michael McCandless)
Date: Fri, 26 Sep 2008 06:30:26 -0400
References: <d3c60f0e0809251709x73950b27yc9dbfbb9390468c9@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Ari Miller wrote:

> According to https://issues.apache.org/jira/browse/LUCENE-1282?focusedCommentId=12596949 
> #action_12596949
> (Sun hotspot compiler bug in 1.6.0_04/05 affects Lucene), a workaround
> for the bug which causes the CorruptIndexException was put in to the
> 2.3 branch and 2.4.
> However, we are still experiencing this issue (intermittent creation
> of a corrupt index) with a 2.3-SNAPSHOT from maven.
> Was the workaround put into 2.3-SNAPSHOT?  Are there other issues
> which would cause the same error (detailed below)?
>
> We would prefer to avoid upgrading to JDK 6u10
> (http://java.sun.com/javase/downloads/ea/6u10/6u10RC.jsp) until it is
> a final release, thus the use of the 2.3-SNAPSHOT dated July 22.

Can you look in the Lucene core JAR's manifest and report back what  
version information you see?  (It should contain the timestamp that  
the JAR was built).

I committed this workaround to the 2.3 branch on May 22.

We don't currently have any automated build that pushes snapshot  
builds into maven on the 2.3 branch; my guess is that 2.3-SNAPSHOT in  
maven was from the last trunk build before 2.3 was released (which  
would not contain this fix), though I'm not sure why it has timestamp  
July 22.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 10:33:32 2008
Return-Path: <java-user-return-36365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68359 invoked from network); 26 Sep 2008 10:33:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 10:33:32 -0000
Received: (qmail 60717 invoked by uid 500); 26 Sep 2008 10:33:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60661 invoked by uid 500); 26 Sep 2008 10:33:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60650 invoked by uid 99); 26 Sep 2008 10:33:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 03:33:20 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 10:32:18 +0000
Received: by gxk6 with SMTP id 6so8288539gxk.5
        for <java-user@lucene.apache.org>; Fri, 26 Sep 2008 03:32:50 -0700 (PDT)
Received: by 10.150.123.16 with SMTP id v16mr1792654ybc.15.1222425170205;
        Fri, 26 Sep 2008 03:32:50 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id m73sm1894923rnd.0.2008.09.26.03.32.48
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 26 Sep 2008 03:32:49 -0700 (PDT)
Message-Id: <BF8A2B92-035C-483A-B955-447BDB0C1C89@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <19682684.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Caused by: java.io.IOException: read past EOF on Slave
Date: Fri, 26 Sep 2008 06:32:47 -0400
References: <19682684.post@talk.nabble.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Can you describe the sequence of steps that your replication process  
goes through?

Also, which filesystem is the index being accessed through?

Mike

rahul_k123 wrote:

>
> First of all, thanks to all the people who helped me in getting the  
> lucene
> replication setup working and right now its live in our production :-)
>
> Everything working fine, except that i am seeing some exceptions on  
> slaves.
>
> The following is the one which is occuring more often on slaves
>
>  at java.util.concurrent.Executors 
> $RunnableAdapter.call(Executors.java:441)
>        at
> java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
>        at java.util.concurrent.FutureTask.run(FutureTask.java:138)
>        at
> java.util.concurrent.ThreadPoolExecutor 
> $Worker.runTask(ThreadPoolExecutor.java:885)
>        at
> java.util.concurrent.ThreadPoolExecutor 
> $Worker.run(ThreadPoolExecutor.java:907)
>        at java.lang.Thread.run(Thread.java:619)
> Caused by: com.IndexingException: [SYSTEM_ERROR] Cannot access index
> [data_dir/index]: [read past EOF]
>        at
> com 
> .lucene 
> .LuceneSearchService.getSearchResults(LuceneSearchService.java:964)
>        ... 12 more
> Caused by: java.io.IOException: read past EOF
>        at
> org 
> .apache 
> .lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java:146)
>        at
> org 
> .apache 
> .lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.java:38)
>        at org.apache.lucene.store.IndexInput.readInt(IndexInput.java: 
> 66)
>        at  
> org.apache.lucene.store.IndexInput.readLong(IndexInput.java:89)
>        at org.apache.lucene.index.FieldsReader.doc(FieldsReader.java: 
> 147)
>        at
> org.apache.lucene.index.SegmentReader.document(SegmentReader.java:659)
>        at
> org 
> .apache 
> .lucene.index.MultiSegmentReader.document(MultiSegmentReader.java:257)
>        at
> org.apache.lucene.index.IndexReader.document(IndexReader.java:525)
>
> and the second one is
>
> at java.util.concurrent.Executors 
> $RunnableAdapter.call(Executors.java:441)
>        at
> java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
>        at java.util.concurrent.FutureTask.run(FutureTask.java:138)
>        at
> java.util.concurrent.ThreadPoolExecutor 
> $Worker.runTask(ThreadPoolExecutor.java:885)
>        at
> java.util.concurrent.ThreadPoolExecutor 
> $Worker.run(ThreadPoolExecutor.java:907)
>        at java.lang.Thread.run(Thread.java:619)
> Caused by: java.lang.IllegalArgumentException: attempt to access a  
> deleted
> document
>        at
> org.apache.lucene.index.SegmentReader.document(SegmentReader.java:657)
>        at
> org 
> .apache 
> .lucene.index.MultiSegmentReader.document(MultiSegmentReader.java:257)
>        at
> org.apache.lucene.index.IndexReader.document(IndexReader.java:525)
> This is on master index .
>
>
>
> Any help is appreciated
>
> Thanks.
>
> -- 
> View this message in context: http://www.nabble.com/Caused-by%3A-java.io.IOException%3A-read-past-EOF-on-Slave-tp19682684p19682684.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 10:41:08 2008
Return-Path: <java-user-return-36366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71961 invoked from network); 26 Sep 2008 10:41:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 10:41:08 -0000
Received: (qmail 74725 invoked by uid 500); 26 Sep 2008 10:40:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74695 invoked by uid 500); 26 Sep 2008 10:40:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74684 invoked by uid 99); 26 Sep 2008 10:40:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 03:40:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 10:39:54 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id 12F9524005
	for <java-user@lucene.apache.org>; Fri, 26 Sep 2008 13:40:23 +0300 (EEST)
Message-ID: <48DCBC17.3090403@sirma.bg>
Date: Fri, 26 Sep 2008 13:40:23 +0300
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Sorting with ParallelReader
References: <48DC9176.3050403@sirma.bg>
In-Reply-To: <48DC9176.3050403@sirma.bg>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry about the spam with this thread. We started using ParallelReader 
in our app and we have some bug in the app with the sorts.
I tested with simple standalone app ParallelReader and discovered that 
sort works in the same way perfectly as with the other Readers.
Sorry once again.

Best Regards,
Ivan

Ivan Vasilev wrote:
> Hi Guys,
>
> Does anybody know if it is possible results to be sorted using the 
> ParallelReader?
>
> Best Regards,
> Ivan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> __________ NOD32 3472 (20080925) Information __________
>
> This message was checked by NOD32 antivirus system.
> http://www.eset.com
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 10:49:51 2008
Return-Path: <java-user-return-36367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77039 invoked from network); 26 Sep 2008 10:49:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 10:49:51 -0000
Received: (qmail 89109 invoked by uid 500); 26 Sep 2008 10:49:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89016 invoked by uid 500); 26 Sep 2008 10:49:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88972 invoked by uid 99); 26 Sep 2008 10:49:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 03:49:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of michael.wechner@wyona.com designates 195.226.6.75 as permitted sender)
Received: from [195.226.6.75] (HELO server1.example.com) (195.226.6.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 10:48:36 +0000
Received: from [192.168.1.47] (unknown [195.226.6.66])
	by server1.example.com (Postfix) with ESMTP id 4597C10C95A
	for <java-user@lucene.apache.org>; Fri, 26 Sep 2008 12:59:09 +0200 (CEST)
Message-ID: <48DCBE34.1090206@wyona.com>
Date: Fri, 26 Sep 2008 12:49:24 +0200
From: Michael Wechner <michael.wechner@wyona.com>
User-Agent: Thunderbird 2.0.0.14 (X11/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: sharing SearchIndexer
References: <48DB5248.5030700@wyona.com> <48DB9441.5010403@gmail.com>	 <48DC9227.2080709@wyona.com> <8c4e68610809260150y57f3d92fkd59db19c691ad88a@mail.gmail.com>
In-Reply-To: <8c4e68610809260150y57f3d92fkd59db19c691ad88a@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Ian Lea schrieb:
> Simon
>
>
> There is nothing in lucene to detect that an index has changed and
> automagically reopen an IndexReader.
>
> You can do the notification from your indexing thread, or every nnn
> mins, or whatever makes sense for your application.  Note that
> IndexReader.reopen() does nothing if the index has not changed - see
> the javadocs.
>   

would it make sense for Lucene to introduce this as a feature?

Cheers

Michael
>
> --
> Ian.
>
>
> On Fri, Sep 26, 2008 at 8:41 AM, simon litwan <simon.litwan@wyona.com> wrote:
>   
>> Mark Miller schrieb:
>>     
>>> simon litwan wrote:
>>>       
>>>> hi all
>>>>
>>>> i tried to reuse the IndexSearcher among all of the threads that are
>>>> doing searches as described in
>>>> (http://wiki.apache.org/lucene-java/LuceneFAQ#head-48921635adf2c968f7936dc07d51dfb40d638b82)
>>>>
>>>> this works fine. but our application does continuous indexing. so the
>>>> index is changing and the at startup initialized IndexSearcher seems not to
>>>> be notified to reload the index.
>>>>
>>>> is there a way to force the IndexSearcher to reload the index if the
>>>> index has changed?
>>>>
>>>> thanks in advance
>>>>
>>>> simon
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>         
>>> You want to reopen the Reader under the IndexSearcher, or open a new
>>> IndexSearcher.
>>>       
>> I want to reopen the Reader under the IndexSearcher when the index has
>> changed. is there a way to do so?
>>
>> simon
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 10:50:06 2008
Return-Path: <java-user-return-36368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77220 invoked from network); 26 Sep 2008 10:50:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 10:50:05 -0000
Received: (qmail 91012 invoked by uid 500); 26 Sep 2008 10:49:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90982 invoked by uid 500); 26 Sep 2008 10:49:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90971 invoked by uid 99); 26 Sep 2008 10:49:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 03:49:55 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [202.131.102.148] (HELO indiaserv01.asite.asitehq.com) (202.131.102.148)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 10:48:56 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C91FC5.8B37450A"
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: How to restore corrupted index
Date: Fri, 26 Sep 2008 16:19:26 +0530
Message-ID: <0CD49D04A7B5534CA56257ADD9719EF7036AA0A0@indiaserv01.asite.asitehq.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to restore corrupted index
Thread-Index: AckfxYssOcsD2qt8RNaIGSpX4qBYmA==
From: "Chaula Ganatra" <cganatra@asite.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C91FC5.8B37450A
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

We have an application in which index will be updated frequently.

During development time, found that index files gets corrupted, i.e.
more than one  cfs files,some other extension files e.g. frq, fnm, nrm

Remains there in index directory.

Is there any way that such issue does not occur at all or if it happens
we can recover the index data again?

It would be a great help, if some one can.

=20

=20

Regards,

Chaula

=20

=20


------_=_NextPart_001_01C91FC5.8B37450A--

From java-user-return-36369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 11:07:00 2008
Return-Path: <java-user-return-36369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88482 invoked from network); 26 Sep 2008 11:07:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 11:07:00 -0000
Received: (qmail 24831 invoked by uid 500); 26 Sep 2008 11:06:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24805 invoked by uid 500); 26 Sep 2008 11:06:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24794 invoked by uid 99); 26 Sep 2008 11:06:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 04:06:50 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a6.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 11:05:49 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a6.g.dreamhost.com (Postfix) with ESMTP id B61B4109F2B
	for <java-user@lucene.apache.org>; Fri, 26 Sep 2008 04:06:22 -0700 (PDT)
Message-Id: <FF714AD6-5E9A-455F-AAF5-141D90D0F75C@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <190623F6-7BDE-40E0-BC26-E808B4D6BE23@mikemccandless.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: CorruptIndexException workaround in 2.3-SNAPSHOT? (Attn: Michael McCandless)
Date: Fri, 26 Sep 2008 07:06:21 -0400
References: <d3c60f0e0809251709x73950b27yc9dbfbb9390468c9@mail.gmail.com> <190623F6-7BDE-40E0-BC26-E808B4D6BE23@mikemccandless.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Sep 26, 2008, at 6:30 AM, Michael McCandless wrote:

>
> Ari Miller wrote:
>
>> According to https://issues.apache.org/jira/browse/LUCENE-1282?focusedCommentId=12596949 
>> #action_12596949
>> (Sun hotspot compiler bug in 1.6.0_04/05 affects Lucene), a  
>> workaround
>> for the bug which causes the CorruptIndexException was put in to the
>> 2.3 branch and 2.4.
>> However, we are still experiencing this issue (intermittent creation
>> of a corrupt index) with a 2.3-SNAPSHOT from maven.
>> Was the workaround put into 2.3-SNAPSHOT?  Are there other issues
>> which would cause the same error (detailed below)?
>>
>> We would prefer to avoid upgrading to JDK 6u10
>> (http://java.sun.com/javase/downloads/ea/6u10/6u10RC.jsp) until it is
>> a final release, thus the use of the 2.3-SNAPSHOT dated July 22.
>
> Can you look in the Lucene core JAR's manifest and report back what  
> version information you see?  (It should contain the timestamp that  
> the JAR was built).
>
> I committed this workaround to the 2.3 branch on May 22.
>
> We don't currently have any automated build that pushes snapshot  
> builds into maven on the 2.3 branch; my guess is that 2.3-SNAPSHOT  
> in maven was from the last trunk build before 2.3 was released  
> (which would not contain this fix), though I'm not sure why it has  
> timestamp July 22.

Yes, a 2.3-SNAPSHOT would definitely be before 2.3.0.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 11:13:43 2008
Return-Path: <java-user-return-36370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90581 invoked from network); 26 Sep 2008 11:13:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 11:13:42 -0000
Received: (qmail 46349 invoked by uid 500); 26 Sep 2008 11:13:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46320 invoked by uid 500); 26 Sep 2008 11:13:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46309 invoked by uid 99); 26 Sep 2008 11:13:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 04:13:34 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [202.131.102.148] (HELO indiaserv01.asite.asitehq.com) (202.131.102.148)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 11:12:34 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C91FC8.D8560DE1"
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: Restore index
Date: Fri, 26 Sep 2008 16:43:03 +0530
Message-ID: <0CD49D04A7B5534CA56257ADD9719EF7036AA0CF@indiaserv01.asite.asitehq.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Restore index
Thread-Index: AckfyNgjmJlhmsfeTROf3YJOhRkSoA==
From: "Chaula Ganatra" <cganatra@asite.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C91FC8.D8560DE1
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

We have an application in which index will be updated frequently.

=20

During development time, found that index files gets corrupted, i.e.

more than one  cfs files,some other extension files e.g. frq, fnm, nrm

=20

Remains there in index directory.

=20

Is there any way that such issue does not occur at all or if it happens
we can recover the index data again?

=20

It would be a great help, if some one can.

=20

=20

=20

=20

=20

Regards,

=20

Chaula

=20


------_=_NextPart_001_01C91FC8.D8560DE1--

From java-user-return-36371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 12:12:35 2008
Return-Path: <java-user-return-36371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23304 invoked from network); 26 Sep 2008 12:12:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 12:12:35 -0000
Received: (qmail 33502 invoked by uid 500); 26 Sep 2008 12:12:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33471 invoked by uid 500); 26 Sep 2008 12:12:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33458 invoked by uid 99); 26 Sep 2008 12:12:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 05:12:25 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a17.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 12:11:25 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a17.g.dreamhost.com (Postfix) with ESMTP id 69E6173721
	for <java-user@lucene.apache.org>; Fri, 26 Sep 2008 05:11:28 -0700 (PDT)
Message-Id: <C92F64BC-9397-4D7B-B93C-F2D5ABACF312@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <6E0FC72D-A333-4CC2-A660-5BE0C6B708AE@mikemccandless.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: 2.4 release candidate 2
Date: Fri, 26 Sep 2008 08:11:27 -0400
References: <6E0FC72D-A333-4CC2-A660-5BE0C6B708AE@mikemccandless.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Looks good.

On Sep 25, 2008, at 11:11 AM, Michael McCandless wrote:

>
> Hi,
>
> I just created the second release candidate for Lucene 2.4, here:
>
>  http://people.apache.org/~mikemccand/staging-area/lucene2.4rc2
>
> These are the fixes since RC1:
>
>  * Issues with CheckIndex (LUCENE-1402)
>
>  * Removed new yet deprecated ctors for IndexWriter, and set
>    autoCommit=false default for new the ctors (LUCENE-1401)
>
>  * Cases where optimize throws an IOException because a BG merge had
>    problems, yet fails to include the root casue exception
>    (LUCENE-1397)
>
>  * Improved PhraseQuery.toString (LUCENE-1396)
>
>  * NullPointerException in NearSpansUnordered.isPayloadAvailable
>    (LUCENE-1404)
>
>  * A bunch of small javadoc issues, unecessary import lines, missing
>    copyright headers
>
> Please continue testing and reporting any issues you find!  Thanks.
>
> Mike
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 12:17:06 2008
Return-Path: <java-user-return-36372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24600 invoked from network); 26 Sep 2008 12:17:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 12:17:05 -0000
Received: (qmail 39833 invoked by uid 500); 26 Sep 2008 12:16:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39805 invoked by uid 500); 26 Sep 2008 12:16:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39794 invoked by uid 99); 26 Sep 2008 12:16:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 05:16:57 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.239 as permitted sender)
Received: from [209.85.198.239] (HELO rv-out-0506.google.com) (209.85.198.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 12:15:57 +0000
Received: by rv-out-0506.google.com with SMTP id f6so878959rvb.5
        for <java-user@lucene.apache.org>; Fri, 26 Sep 2008 05:16:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=ab2zX3Xjr2pOfcoflqKB7PxGNHXqvEpjaBSQp+rViZo=;
        b=ngY5S+2Rw+N4/EYnZJFlQq9v7obyBb7rAJ9Y4674uZ02PTduulZ927ZXeE//WS5sEb
         ytcBiuysdqpQvjQfak+honI3hKyXdrDGHeO8pEFItuSyD9PFyXirBAuqqBn2BCexmxyH
         kTmYAt7EwnfG6izlGiQZUtK7qRiqCxfMYDHj4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=YUnOJ563QQJAYp++wyHuXakfWUGxJnswN/F7crI13S87q2U+UuD6OWEe+l7ztYNdVE
         1AOGLMkOeDsjQYZcVo8k+JXd5E0bBrEhFGjbeYzlFkiibK43kW8qtzkAbPVr1N2WdjNm
         EuEIqU02ymRKjHudTRrsHitlEvUNcEuaN4OSc=
Received: by 10.141.116.16 with SMTP id t16mr593501rvm.280.1222431391247;
        Fri, 26 Sep 2008 05:16:31 -0700 (PDT)
Received: by 10.140.135.10 with HTTP; Fri, 26 Sep 2008 05:16:31 -0700 (PDT)
Message-ID: <359a92830809260516g55847497tf847273a73949202@mail.gmail.com>
Date: Fri, 26 Sep 2008 08:16:31 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to restore corrupted index
In-Reply-To: <0CD49D04A7B5534CA56257ADD9719EF7036AA0A0@indiaserv01.asite.asitehq.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11676_16335871.1222431391251"
References: <0CD49D04A7B5534CA56257ADD9719EF7036AA0A0@indiaserv01.asite.asitehq.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11676_16335871.1222431391251
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You say that there are multiple files, but you don't say if the index
still works. Does it? If using the index gives you unexpected results,
can you tell us about what the failure modes are?

Best
Erick

On Fri, Sep 26, 2008 at 6:49 AM, Chaula Ganatra <cganatra@asite.com> wrote:

> We have an application in which index will be updated frequently.
>
> During development time, found that index files gets corrupted, i.e.
> more than one  cfs files,some other extension files e.g. frq, fnm, nrm
>
> Remains there in index directory.
>
> Is there any way that such issue does not occur at all or if it happens
> we can recover the index data again?
>
> It would be a great help, if some one can.
>
>
>
>
>
> Regards,
>
> Chaula
>
>
>
>
>
>

------=_Part_11676_16335871.1222431391251--

From java-user-return-36373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 12:32:59 2008
Return-Path: <java-user-return-36373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45402 invoked from network); 26 Sep 2008 12:32:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 12:32:57 -0000
Received: (qmail 65637 invoked by uid 500); 26 Sep 2008 12:32:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65610 invoked by uid 500); 26 Sep 2008 12:32:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65599 invoked by uid 99); 26 Sep 2008 12:32:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 05:32:48 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a14.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 12:31:47 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a14.g.dreamhost.com (Postfix) with ESMTP id 353CE190E37
	for <java-user@lucene.apache.org>; Fri, 26 Sep 2008 05:31:50 -0700 (PDT)
Message-Id: <372AEA7F-291A-488F-BD24-48149A852EB3@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <0CD49D04A7B5534CA56257ADD9719EF7036AA0A0@indiaserv01.asite.asitehq.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: How to restore corrupted index
Date: Fri, 26 Sep 2008 08:31:49 -0400
References: <0CD49D04A7B5534CA56257ADD9719EF7036AA0A0@indiaserv01.asite.asitehq.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

There is the CheckIndex tool included in the distribution for checking/ 
fixing bad indexes, but it can't solve everything.

The bigger question is why it is happening to begin with.  Can you  
describe your indexing process?  How do you know the index is actually  
corrupted?  Are you seeing exceptions when opening it?

-Grant
On Sep 26, 2008, at 6:49 AM, Chaula Ganatra wrote:

> We have an application in which index will be updated frequently.
>
> During development time, found that index files gets corrupted, i.e.
> more than one  cfs files,some other extension files e.g. frq, fnm, nrm
>
> Remains there in index directory.
>
> Is there any way that such issue does not occur at all or if it  
> happens
> we can recover the index data again?
>
> It would be a great help, if some one can.
>
>
>
>
>
> Regards,
>
> Chaula
>
>
>
>
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 13:19:25 2008
Return-Path: <java-user-return-36374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85872 invoked from network); 26 Sep 2008 13:19:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 13:19:25 -0000
Received: (qmail 45926 invoked by uid 500); 26 Sep 2008 13:19:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45895 invoked by uid 500); 26 Sep 2008 13:19:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45884 invoked by uid 99); 26 Sep 2008 13:19:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 06:19:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [202.131.102.148] (HELO indiaserv01.asite.asitehq.com) (202.131.102.148)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 13:18:15 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: How to restore corrupted index
Date: Fri, 26 Sep 2008 18:48:24 +0530
Message-ID: <0CD49D04A7B5534CA56257ADD9719EF7036AA157@indiaserv01.asite.asitehq.com>
In-Reply-To: <372AEA7F-291A-488F-BD24-48149A852EB3@apache.org>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to restore corrupted index
Thread-Index: Ackf1AUskZtgpIuiTBK8kWvP9ewN9gABkVLg
From: "Chaula Ganatra" <cganatra@asite.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

I found one case when such multiple files are remained, when we call
writer.optimise() it throws exception and multiple files remained in
index dir.

After such multiple files, when we add document in index by calling
writer.addDocument it throws java.lang.NegativeArraySizeException

Regards,
Chaula

-----Original Message-----
From: Grant Ingersoll [mailto:gsingers@apache.org]=20
Sent: 26 September, 2008 6:02 PM
To: java-user@lucene.apache.org
Subject: Re: How to restore corrupted index

There is the CheckIndex tool included in the distribution for checking/=20
fixing bad indexes, but it can't solve everything.

The bigger question is why it is happening to begin with.  Can you =20
describe your indexing process?  How do you know the index is actually =20
corrupted?  Are you seeing exceptions when opening it?

-Grant
On Sep 26, 2008, at 6:49 AM, Chaula Ganatra wrote:

> We have an application in which index will be updated frequently.
>
> During development time, found that index files gets corrupted, i.e.
> more than one  cfs files,some other extension files e.g. frq, fnm, nrm
>
> Remains there in index directory.
>
> Is there any way that such issue does not occur at all or if it =20
> happens
> we can recover the index data again?
>
> It would be a great help, if some one can.
>
>
>
>
>
> Regards,
>
> Chaula
>
>
>
>
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 13:47:59 2008
Return-Path: <java-user-return-36375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6099 invoked from network); 26 Sep 2008 13:47:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 13:47:59 -0000
Received: (qmail 90292 invoked by uid 500); 26 Sep 2008 13:47:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89811 invoked by uid 500); 26 Sep 2008 13:47:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89800 invoked by uid 99); 26 Sep 2008 13:47:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 06:47:50 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.92.24] (HELO qw-out-2122.google.com) (74.125.92.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 13:46:48 +0000
Received: by qw-out-2122.google.com with SMTP id 5so138363qwi.53
        for <java-user@lucene.apache.org>; Fri, 26 Sep 2008 06:47:20 -0700 (PDT)
Received: by 10.214.241.4 with SMTP id o4mr1101068qah.93.1222436840499;
        Fri, 26 Sep 2008 06:47:20 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id a68sm2051409rnc.17.2008.09.26.06.47.19
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 26 Sep 2008 06:47:19 -0700 (PDT)
Message-Id: <5D4E1FF4-51EC-469B-9766-6264E222B2DC@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <0CD49D04A7B5534CA56257ADD9719EF7036AA157@indiaserv01.asite.asitehq.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: How to restore corrupted index
Date: Fri, 26 Sep 2008 09:47:17 -0400
References: <0CD49D04A7B5534CA56257ADD9719EF7036AA157@indiaserv01.asite.asitehq.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Can you post the full stack trace in both cases?

Mike

Chaula Ganatra wrote:

> I found one case when such multiple files are remained, when we call
> writer.optimise() it throws exception and multiple files remained in
> index dir.
>
> After such multiple files, when we add document in index by calling
> writer.addDocument it throws java.lang.NegativeArraySizeException
>
> Regards,
> Chaula
>
> -----Original Message-----
> From: Grant Ingersoll [mailto:gsingers@apache.org]
> Sent: 26 September, 2008 6:02 PM
> To: java-user@lucene.apache.org
> Subject: Re: How to restore corrupted index
>
> There is the CheckIndex tool included in the distribution for  
> checking/
> fixing bad indexes, but it can't solve everything.
>
> The bigger question is why it is happening to begin with.  Can you
> describe your indexing process?  How do you know the index is actually
> corrupted?  Are you seeing exceptions when opening it?
>
> -Grant
> On Sep 26, 2008, at 6:49 AM, Chaula Ganatra wrote:
>
>> We have an application in which index will be updated frequently.
>>
>> During development time, found that index files gets corrupted, i.e.
>> more than one  cfs files,some other extension files e.g. frq, fnm,  
>> nrm
>>
>> Remains there in index directory.
>>
>> Is there any way that such issue does not occur at all or if it
>> happens
>> we can recover the index data again?
>>
>> It would be a great help, if some one can.
>>
>>
>>
>>
>>
>> Regards,
>>
>> Chaula
>>
>>
>>
>>
>>
>
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 14:14:51 2008
Return-Path: <java-user-return-36376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22100 invoked from network); 26 Sep 2008 14:14:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 14:14:50 -0000
Received: (qmail 21430 invoked by uid 500); 26 Sep 2008 14:14:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21404 invoked by uid 500); 26 Sep 2008 14:14:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21393 invoked by uid 99); 26 Sep 2008 14:14:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 07:14:41 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.85.215] (HELO smtp105.mail.mud.yahoo.com) (209.191.85.215)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 26 Sep 2008 14:13:37 +0000
Received: (qmail 79203 invoked from network); 26 Sep 2008 14:13:09 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=DgQWbcmTcHfp1EusDwRgh3Oj++IGCLI9CDkk2fa4GmGBW26Hnmk6W66JAAWpaiQCMf9o7yZErLwiDtPJygKf8wr6Z3Fs+SraZIDZdclE16dDakEBg0R4XnkzQS6Uzhhe6vCStADr6ZcfqsIpJR4KY4fDgNb8PxJ8gxhKUi/AW0Q=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp105.mail.mud.yahoo.com with SMTP; 26 Sep 2008 14:13:08 -0000
X-YMail-OSG: RJRD6e4VM1nmC5.K5ZUZ3D3d4LJGmmw8IdJc6x8x5grerHDHNMcDKnbm1Nc7HDJlEVthq55fMaxOKa_a__pOb1GeMIDU294SyGS50yrALhapqawe51ygmSWZdbJeWJeyE2p0hsH9wt4UR1XOCpUIdCswIqVd
X-Yahoo-Newman-Property: ymail-3
Message-ID: <034d01c91fe2$00630890$04000100@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
Subject: Search warmup from Tomcat 
Date: Fri, 26 Sep 2008 19:43:05 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Hello all,

I need to do warmup the searcher object from my JSP pages. Currently i am 
having a static object, which i am frequently checking whether index got 
updated, if so i am closing the indexer and re-opening it. These JSP pages 
are invoked by the User. When User performs any search operation, few are 
faster and few are slower. This is because the searcher object is getting 
updated.

How do i warm up my searcher object, without the intervention of User 
request.

Regards
Ganesh
 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 14:20:15 2008
Return-Path: <java-user-return-36377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24140 invoked from network); 26 Sep 2008 14:20:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 14:20:15 -0000
Received: (qmail 31621 invoked by uid 500); 26 Sep 2008 14:20:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31581 invoked by uid 500); 26 Sep 2008 14:20:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31570 invoked by uid 99); 26 Sep 2008 14:20:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 07:20:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [202.131.102.148] (HELO indiaserv01.asite.asitehq.com) (202.131.102.148)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 14:19:04 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: How to restore corrupted index
Date: Fri, 26 Sep 2008 19:49:34 +0530
Message-ID: <0CD49D04A7B5534CA56257ADD9719EF7036AA1A3@indiaserv01.asite.asitehq.com>
In-Reply-To: <5D4E1FF4-51EC-469B-9766-6264E222B2DC@mikemccandless.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to restore corrupted index
Thread-Index: Ackf3oB9WC0e+ccxRL6frCAVfggGpwABEDjQ
From: "Chaula Ganatra" <cganatra@asite.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

It was the Reader on same index, which I did not close so gave exception
in writer.optimise()

Chaula

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: 26 September, 2008 7:17 PM
To: java-user@lucene.apache.org
Subject: Re: How to restore corrupted index


Can you post the full stack trace in both cases?

Mike

Chaula Ganatra wrote:

> I found one case when such multiple files are remained, when we call
> writer.optimise() it throws exception and multiple files remained in
> index dir.
>
> After such multiple files, when we add document in index by calling
> writer.addDocument it throws java.lang.NegativeArraySizeException
>
> Regards,
> Chaula
>
> -----Original Message-----
> From: Grant Ingersoll [mailto:gsingers@apache.org]
> Sent: 26 September, 2008 6:02 PM
> To: java-user@lucene.apache.org
> Subject: Re: How to restore corrupted index
>
> There is the CheckIndex tool included in the distribution for =20
> checking/
> fixing bad indexes, but it can't solve everything.
>
> The bigger question is why it is happening to begin with.  Can you
> describe your indexing process?  How do you know the index is actually
> corrupted?  Are you seeing exceptions when opening it?
>
> -Grant
> On Sep 26, 2008, at 6:49 AM, Chaula Ganatra wrote:
>
>> We have an application in which index will be updated frequently.
>>
>> During development time, found that index files gets corrupted, i.e.
>> more than one  cfs files,some other extension files e.g. frq, fnm, =20
>> nrm
>>
>> Remains there in index directory.
>>
>> Is there any way that such issue does not occur at all or if it
>> happens
>> we can recover the index data again?
>>
>> It would be a great help, if some one can.
>>
>>
>>
>>
>>
>> Regards,
>>
>> Chaula
>>
>>
>>
>>
>>
>
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 14:30:52 2008
Return-Path: <java-user-return-36378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31199 invoked from network); 26 Sep 2008 14:30:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 14:30:52 -0000
Received: (qmail 48122 invoked by uid 500); 26 Sep 2008 14:30:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48092 invoked by uid 500); 26 Sep 2008 14:30:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48081 invoked by uid 99); 26 Sep 2008 14:30:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 07:30:43 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.92.26] (HELO qw-out-2122.google.com) (74.125.92.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 14:29:41 +0000
Received: by qw-out-2122.google.com with SMTP id 5so141363qwi.53
        for <java-user@lucene.apache.org>; Fri, 26 Sep 2008 07:30:03 -0700 (PDT)
Received: by 10.214.10.18 with SMTP id 18mr1194981qaj.74.1222439403112;
        Fri, 26 Sep 2008 07:30:03 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id i16sm3549377wxd.27.2008.09.26.07.30.01
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 26 Sep 2008 07:30:02 -0700 (PDT)
Message-Id: <0B7F1A83-825C-406B-AAE6-23028E777DC0@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <0CD49D04A7B5534CA56257ADD9719EF7036AA1A3@indiaserv01.asite.asitehq.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: How to restore corrupted index
Date: Fri, 26 Sep 2008 10:30:00 -0400
References: <0CD49D04A7B5534CA56257ADD9719EF7036AA1A3@indiaserv01.asite.asitehq.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


It's perfectly fine to have a reader open on an index, while an  
IndexWriter runs optimize.

Which version of Lucene are you using?  And which OS & filesystem?

Mike

Chaula Ganatra wrote:

> It was the Reader on same index, which I did not close so gave  
> exception
> in writer.optimise()
>
> Chaula
>
> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: 26 September, 2008 7:17 PM
> To: java-user@lucene.apache.org
> Subject: Re: How to restore corrupted index
>
>
> Can you post the full stack trace in both cases?
>
> Mike
>
> Chaula Ganatra wrote:
>
>> I found one case when such multiple files are remained, when we call
>> writer.optimise() it throws exception and multiple files remained in
>> index dir.
>>
>> After such multiple files, when we add document in index by calling
>> writer.addDocument it throws java.lang.NegativeArraySizeException
>>
>> Regards,
>> Chaula
>>
>> -----Original Message-----
>> From: Grant Ingersoll [mailto:gsingers@apache.org]
>> Sent: 26 September, 2008 6:02 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: How to restore corrupted index
>>
>> There is the CheckIndex tool included in the distribution for
>> checking/
>> fixing bad indexes, but it can't solve everything.
>>
>> The bigger question is why it is happening to begin with.  Can you
>> describe your indexing process?  How do you know the index is  
>> actually
>> corrupted?  Are you seeing exceptions when opening it?
>>
>> -Grant
>> On Sep 26, 2008, at 6:49 AM, Chaula Ganatra wrote:
>>
>>> We have an application in which index will be updated frequently.
>>>
>>> During development time, found that index files gets corrupted, i.e.
>>> more than one  cfs files,some other extension files e.g. frq, fnm,
>>> nrm
>>>
>>> Remains there in index directory.
>>>
>>> Is there any way that such issue does not occur at all or if it
>>> happens
>>> we can recover the index data again?
>>>
>>> It would be a great help, if some one can.
>>>
>>>
>>>
>>>
>>>
>>> Regards,
>>>
>>> Chaula
>>>
>>>
>>>
>>>
>>>
>>
>> --------------------------
>> Grant Ingersoll
>> http://www.lucidimagination.com
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 14:32:15 2008
Return-Path: <java-user-return-36379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31855 invoked from network); 26 Sep 2008 14:32:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 14:32:15 -0000
Received: (qmail 50663 invoked by uid 500); 26 Sep 2008 14:32:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50633 invoked by uid 500); 26 Sep 2008 14:32:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50622 invoked by uid 99); 26 Sep 2008 14:32:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 07:32:06 -0700
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.112.106.226] (HELO edciscan02.edc.trendmicro.com) (194.112.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 14:31:06 +0000
Received: from edciscan02.edc.trendmicro.com (edciscan02 [127.0.0.1])
	by localhost.edc.trendmicro.com (Postfix) with ESMTP id 5B61D181FCF
	for <java-user@lucene.apache.org>; Fri, 26 Sep 2008 16:31:41 +0200 (CEST)
Received: from edcexbh02.eu.trendnet.org (unknown [194.112.106.201])
	by edciscan02.edc.trendmicro.com (Postfix) with ESMTP id 524B2181BEE
	for <java-user@lucene.apache.org>; Fri, 26 Sep 2008 16:31:41 +0200 (CEST)
Received: from EDCEXMAIL02.eu.trendnet.org ([10.34.169.88]) by edcexbh02.eu.trendnet.org with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 26 Sep 2008 16:31:38 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
Subject: Getting all found document ids from a search result
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C91FE4.95C04765"
Date: Fri, 26 Sep 2008 16:31:37 +0200
Message-ID: <6207987134483D40ACA15C60611A4F920144A458@EDCEXMAIL02.eu.trendnet.org>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Getting all found document ids from a search result
Thread-Index: Ackf5JWTqczePogWS+aPXDxR8xUEVA==
From: <gregor_ewald@trendmicro.de>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 26 Sep 2008 14:31:38.0807 (UTC) FILETIME=[961A2470:01C91FE4]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C91FE4.95C04765
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable


Hello you all,

=20

is it somehow possible to get all document ids found by a search=2E Not=
 only 50 or 100=2E=2E=2E

If it is possible and someone knows it, please help me :-)

=20

=20

Thanks and beste regards,

Gregor



TREND MICRO Deutschland GmbH, Lise-Meitner-Str=2E 4, D-85716=
 Unterschleissheim, Germany
Geschaeftsfuehrer: Raimund Genes, Amtsgericht Muenchen - HRB 114739

Die in dieser E-Mail und ihren etwaigen Anhaengen enthaltenen Informationen=
 sind vertraulich und koennen gewerblichen Schutzrechten unterliegen=2E=
 Sollten Sie keiner der vorgesehenen Empfaenger sein, sind Sie nicht=
 berechtigt, diese Nachricht in irgendeiner Weise zu benutzen oder=
 weiterzugeben=2E Bitte benachrichtigen Sie uns ggf=2E per Rueckantwort=
 oder telefonisch (089-37479700) und loeschen Sie diese E-Mail aus Ihrem=
 E-Mail-System=2E

The information contained in this email and any attachments is confidential=
 and may be subject to copyright or other intellectual property protection=
=2E If you are not the intended recipient, you are not authorized to use or=
 disclose this information, and we request that you notify us by reply mail=
 or telephone and delete the original message from your mail system=2E
------_=_NextPart_001_01C91FE4.95C04765--

From java-user-return-36380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 14:33:30 2008
Return-Path: <java-user-return-36380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32521 invoked from network); 26 Sep 2008 14:33:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 14:33:29 -0000
Received: (qmail 52619 invoked by uid 500); 26 Sep 2008 14:33:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52594 invoked by uid 500); 26 Sep 2008 14:33:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52583 invoked by uid 99); 26 Sep 2008 14:33:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 07:33:20 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [202.131.102.148] (HELO indiaserv01.asite.asitehq.com) (202.131.102.148)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 14:32:20 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: How to restore corrupted index
Date: Fri, 26 Sep 2008 20:02:49 +0530
Message-ID: <0CD49D04A7B5534CA56257ADD9719EF7036AA1AD@indiaserv01.asite.asitehq.com>
In-Reply-To: <0B7F1A83-825C-406B-AAE6-23028E777DC0@mikemccandless.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to restore corrupted index
Thread-Index: Ackf5H2CRHH/h77eT8qZFgTxwBHSpQAAB/Gg
From: "Chaula Ganatra" <cganatra@asite.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Lucene 2.2.0, windows XP

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: 26 September, 2008 8:00 PM
To: java-user@lucene.apache.org
Subject: Re: How to restore corrupted index


It's perfectly fine to have a reader open on an index, while an =20
IndexWriter runs optimize.

Which version of Lucene are you using?  And which OS & filesystem?

Mike

Chaula Ganatra wrote:

> It was the Reader on same index, which I did not close so gave =20
> exception
> in writer.optimise()
>
> Chaula
>
> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: 26 September, 2008 7:17 PM
> To: java-user@lucene.apache.org
> Subject: Re: How to restore corrupted index
>
>
> Can you post the full stack trace in both cases?
>
> Mike
>
> Chaula Ganatra wrote:
>
>> I found one case when such multiple files are remained, when we call
>> writer.optimise() it throws exception and multiple files remained in
>> index dir.
>>
>> After such multiple files, when we add document in index by calling
>> writer.addDocument it throws java.lang.NegativeArraySizeException
>>
>> Regards,
>> Chaula
>>
>> -----Original Message-----
>> From: Grant Ingersoll [mailto:gsingers@apache.org]
>> Sent: 26 September, 2008 6:02 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: How to restore corrupted index
>>
>> There is the CheckIndex tool included in the distribution for
>> checking/
>> fixing bad indexes, but it can't solve everything.
>>
>> The bigger question is why it is happening to begin with.  Can you
>> describe your indexing process?  How do you know the index is =20
>> actually
>> corrupted?  Are you seeing exceptions when opening it?
>>
>> -Grant
>> On Sep 26, 2008, at 6:49 AM, Chaula Ganatra wrote:
>>
>>> We have an application in which index will be updated frequently.
>>>
>>> During development time, found that index files gets corrupted, i.e.
>>> more than one  cfs files,some other extension files e.g. frq, fnm,
>>> nrm
>>>
>>> Remains there in index directory.
>>>
>>> Is there any way that such issue does not occur at all or if it
>>> happens
>>> we can recover the index data again?
>>>
>>> It would be a great help, if some one can.
>>>
>>>
>>>
>>>
>>>
>>> Regards,
>>>
>>> Chaula
>>>
>>>
>>>
>>>
>>>
>>
>> --------------------------
>> Grant Ingersoll
>> http://www.lucidimagination.com
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 14:35:08 2008
Return-Path: <java-user-return-36381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33577 invoked from network); 26 Sep 2008 14:35:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 14:35:08 -0000
Received: (qmail 58068 invoked by uid 500); 26 Sep 2008 14:34:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58043 invoked by uid 500); 26 Sep 2008 14:34:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 38313 invoked by uid 99); 26 Sep 2008 14:23:58 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Date: Fri, 26 Sep 2008 16:22:59 +0200
From: =?iso-8859-1?Q?Asbj=F8rn_A=2E?= Fellinghaug <asbjorn@fellinghaug.com>
To: java-user@lucene.apache.org
Subject: Re: Search warmup from Tomcat
Message-ID: <20080926142259.GI626@stud.ntnu.no>
References: <034d01c91fe2$00630890$04000100@sv.us.sonicwall.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <034d01c91fe2$00630890$04000100@sv.us.sonicwall.com>
User-Agent: Mutt/1.5.11
X-Virus-Scanned: Debian amavisd-new at bene1.itea.ntnu.no
X-Virus-Checked: Checked by ClamAV on apache.org

Ganesh:
> Hello all,
> 
> I need to do warmup the searcher object from my JSP pages. Currently i am 
> having a static object, which i am frequently checking whether index got 
> updated, if so i am closing the indexer and re-opening it. These JSP pages 
> are invoked by the User. When User performs any search operation, few are 
> faster and few are slower. This is because the searcher object is getting 
> updated.
> 
> How do i warm up my searcher object, without the intervention of User 
> request.

I would have used a set of predefined queries which are frequently typed
into your searcher. Typically queries with stopwords is good to use an a
warmup phase.

-- 
Asbjrn A. Fellinghaug
asbjorn@fellinghaug.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 15:01:14 2008
Return-Path: <java-user-return-36382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51351 invoked from network); 26 Sep 2008 15:01:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 15:01:14 -0000
Received: (qmail 18825 invoked by uid 500); 26 Sep 2008 15:01:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17956 invoked by uid 500); 26 Sep 2008 15:01:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17945 invoked by uid 99); 26 Sep 2008 15:01:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 08:01:04 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.242] (HELO web50309.mail.re2.yahoo.com) (206.190.38.242)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 26 Sep 2008 15:00:02 +0000
Received: (qmail 45065 invoked by uid 60001); 26 Sep 2008 14:59:35 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=neWM7gW3XCDo5XPBoeNxh3Hk/WK6Noe2lJh9SsbXYHtSsHMKy75frQwjSnuPu/hZnfN2Q/oac1eNl+eDshBh1bBGKqjGvbqP9nCKGvoBaBJT0Z7oue/r2PQghahWWBKfoBxuNDV1+v2aym4jiEj3YQOVRafG/HOQxQ82Jd4KY4o=;
Received: from [167.206.188.3] by web50309.mail.re2.yahoo.com via HTTP; Fri, 26 Sep 2008 07:59:34 PDT
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Fri, 26 Sep 2008 07:59:34 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Getting all found document ids from a search result
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <173219.23958.qm@web50309.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Gregor,

You could loop through the results or collect them using a custom HitCollector.


Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: "gregor_ewald@trendmicro.de" <gregor_ewald@trendmicro.de>
> To: java-user@lucene.apache.org
> Sent: Friday, September 26, 2008 10:31:37 AM
> Subject: Getting all found document ids from a search result
> 
> 
> Hello you all,
> 
> 
> 
> is it somehow possible to get all document ids found by a search. Not only 50 or 
> 100...
> 
> If it is possible and someone knows it, please help me :-)
> 
> 
> 
> 
> 
> Thanks and beste regards,
> 
> Gregor
> 
> 
> 
> TREND MICRO Deutschland GmbH, Lise-Meitner-Str. 4, D-85716 Unterschleissheim, 
> Germany
> Geschaeftsfuehrer: Raimund Genes, Amtsgericht Muenchen - HRB 114739
> 
> Die in dieser E-Mail und ihren etwaigen Anhaengen enthaltenen Informationen sind 
> vertraulich und koennen gewerblichen Schutzrechten unterliegen. Sollten Sie 
> keiner der vorgesehenen Empfaenger sein, sind Sie nicht berechtigt, diese 
> Nachricht in irgendeiner Weise zu benutzen oder weiterzugeben. Bitte 
> benachrichtigen Sie uns ggf. per Rueckantwort oder telefonisch (089-37479700) 
> und loeschen Sie diese E-Mail aus Ihrem E-Mail-System.
> 
> The information contained in this email and any attachments is confidential and 
> may be subject to copyright or other intellectual property protection. If you 
> are not the intended recipient, you are not authorized to use or disclose this 
> information, and we request that you notify us by reply mail or telephone and 
> delete the original message from your mail system.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 15:03:30 2008
Return-Path: <java-user-return-36383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52935 invoked from network); 26 Sep 2008 15:03:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 15:03:30 -0000
Received: (qmail 22622 invoked by uid 500); 26 Sep 2008 15:03:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22519 invoked by uid 500); 26 Sep 2008 15:03:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22508 invoked by uid 99); 26 Sep 2008 15:03:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 08:03:21 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.59] (HELO web50305.mail.re2.yahoo.com) (206.190.38.59)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 26 Sep 2008 15:02:18 +0000
Received: (qmail 62367 invoked by uid 60001); 26 Sep 2008 15:01:51 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=dAKWWpiWnHgW2OBw36ewTg7JRy3mnUvEV5L032Y4PrMptD4miAEIdCwZLztwng+zGAYU8lcFiApvYp8qVHbb+oHLdd63TP9ToyPNmZOr0hXk+MMv2HlEdwT0N7CY98FDyxM5qXrych55VvXqprVy71Z6ECawji1FrIITh1dCVvU=;
X-YMail-OSG: K3Kf.JUVM1lJXAjEbvlEJUA3SBS.Kksbbgsmc_UZrUGWYa8tq4ddHVgiZvfzfgw66A--
Received: from [167.206.188.3] by web50305.mail.re2.yahoo.com via HTTP; Fri, 26 Sep 2008 08:01:51 PDT
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Fri, 26 Sep 2008 08:01:51 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: sharing SearchIndexer
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <521802.61806.qm@web50305.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I think somebody provided a patch (might have been a whole new IndexReader impl?) maaaaaaaaaaaany moons ago (2005?), but it never attracted enough interest to get committed.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Michael Wechner <michael.wechner@wyona.com>
> To: java-user@lucene.apache.org
> Sent: Friday, September 26, 2008 6:49:24 AM
> Subject: Re: sharing SearchIndexer
> 
> Ian Lea schrieb:
> > Simon
> >
> >
> > There is nothing in lucene to detect that an index has changed and
> > automagically reopen an IndexReader.
> >
> > You can do the notification from your indexing thread, or every nnn
> > mins, or whatever makes sense for your application.  Note that
> > IndexReader.reopen() does nothing if the index has not changed - see
> > the javadocs.
> >  
> 
> would it make sense for Lucene to introduce this as a feature?
> 
> Cheers
> 
> Michael
> >
> > --
> > Ian.
> >
> >
> > On Fri, Sep 26, 2008 at 8:41 AM, simon litwan wrote:
> >  
> >> Mark Miller schrieb:
> >>    
> >>> simon litwan wrote:
> >>>      
> >>>> hi all
> >>>>
> >>>> i tried to reuse the IndexSearcher among all of the threads that are
> >>>> doing searches as described in
> >>>> 
> (http://wiki.apache.org/lucene-java/LuceneFAQ#head-48921635adf2c968f7936dc07d51dfb40d638b82)
> >>>>
> >>>> this works fine. but our application does continuous indexing. so the
> >>>> index is changing and the at startup initialized IndexSearcher seems not to
> >>>> be notified to reload the index.
> >>>>
> >>>> is there a way to force the IndexSearcher to reload the index if the
> >>>> index has changed?
> >>>>
> >>>> thanks in advance
> >>>>
> >>>> simon
> >>>>
> >>>> ---------------------------------------------------------------------
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>        
> >>> You want to reopen the Reader under the IndexSearcher, or open a new
> >>> IndexSearcher.
> >>>      
> >> I want to reopen the Reader under the IndexSearcher when the index has
> >> changed. is there a way to do so?
> >>
> >> simon
> >>    
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >  
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 15:07:08 2008
Return-Path: <java-user-return-36384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55506 invoked from network); 26 Sep 2008 15:07:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 15:07:07 -0000
Received: (qmail 30185 invoked by uid 500); 26 Sep 2008 15:06:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30158 invoked by uid 500); 26 Sep 2008 15:06:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30141 invoked by uid 99); 26 Sep 2008 15:06:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 08:06:51 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dckorah@gmail.com designates 209.85.142.191 as permitted sender)
Received: from [209.85.142.191] (HELO ti-out-0910.google.com) (209.85.142.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 15:05:51 +0000
Received: by ti-out-0910.google.com with SMTP id b8so429244tic.11
        for <java-user@lucene.apache.org>; Fri, 26 Sep 2008 08:06:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Yjxq5WxUuX/k5K1CMZet+0lQyHwbCV/tuXsrDH2nJwE=;
        b=awUG7DJvEctOmWSQP5ccde33NQsmlB8Djco1CRkDfyLK5EFdD2PboNIhCEy7OH6cnt
         odRqch1B5sGUqQn/lVexTxvpR56ycs4hYt4a8nWhTMafTK0SecDRaqGTzvqsKA8mEhT9
         ZDAvHx21YZrd8msVGuD+tgAKxDlre/bxq528M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=aUtcD2kFHyYFY+KDGP+10UM6dzq6uzrlLeV3i9IgDc+gRWvN5HXaRf4BxPKaoMMNEQ
         XfnElYaBqboVDigEi4ua848bIBPLlOjEzhaI4GAG3qQs+QCql/bSwOILIpUeXMkBZXIy
         RQG34ZD2ENZYx2wQMUs3cAQWTaB1Oz+iK/Vb8=
Received: by 10.110.109.19 with SMTP id h19mr1205918tic.58.1222441566569;
        Fri, 26 Sep 2008 08:06:06 -0700 (PDT)
Received: by 10.110.11.16 with HTTP; Fri, 26 Sep 2008 08:06:06 -0700 (PDT)
Message-ID: <926b35870809260806x199c7c4bradcf7a074af3cbfd@mail.gmail.com>
Date: Fri, 26 Sep 2008 16:06:06 +0100
From: "Dino Korah" <dckorah@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index time Document Boosting and Query Time Sorts
In-Reply-To: <487ABD6B-8372-4F65-84A5-5D540BF1E165@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1018_17519560.1222441566556"
References: <926b35870809240204y5d1b9ba7gde7301351e022a2@mail.gmail.com>
	 <47E0C68E-3D29-4AD8-9001-BCE6ED494C72@apache.org>
	 <487ABD6B-8372-4F65-84A5-5D540BF1E165@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1018_17519560.1222441566556
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

Q2hlZXJzIEFsbAoKMjAwOC85LzI0IEthcmwgV2V0dGluIDxrYXJsLndldHRpbkBnbWFpbC5jb20+
Cgo+Cj4gMjQgc2VwIDIwMDgga2wuIDEyLjQwIHNrcmV2IEdyYW50IEluZ2Vyc29sbDoKPgo+ICBP
bmUgc2lkZSBub3RlIGJhc2VkIG9uIHlvdXIgZXhhbXBsZSwgYmVsb3c6ICBJbmRleCB0aW1lIGJv
b3N0aW5nIGRvZXMgbm90Cj4+IGhhdmUgbXVjaCBncmFudWxhcml0eSAob25seSAyNTUgdmFsdWVz
KSwgaW4gb3RoZXIgd29yZHMsIHRoZXJlIGlzIGEgbG9zcyBvZgo+PiBwcmVjaXNpb24uICBUaHVz
LCB5b3UKPj4gd2FudCB0byBtYWtlIHN1cmUgeW91ciBib29zdHMgYXJlIGRpZmZlcmVudCBlbm91
Z2ggc3VjaCB0aGF0IHlvdSBjYW4KPj4gZGlzdGluZ3Vpc2ggYmV0d2VlbiB0aGUgdHdvLiAgIE1h
eWJlIDEvKDIqZGVwdGgpIG9yIHNvbWV0aGluZyBsaWtlIHRoYXQuIFlvdQo+PiBjYW4gYWx0ZXIg
aG93IHRoZXNlIDI1NSB2YWx1ZXMgYXJlIGVuY29kZWQsIGJ1dCB0aGF0IGlzIGZhaXJseSBhZHZh
bmNlZAo+PiBzdHVmZi4KPj4KPgo+IEp1c3QgYSBub3RlLCB0aGUgZ3JhbnVsYXJpdHkgaXMgMjU1
IG9ubHkgaWYgeW91IHR1cm4gb2ZmIGxlbmd0aAo+IG5vcm1hbGl6YXRpb24sIGlmIG5vdCBpdCdz
IHNvbWV0aGluZyBsaWtlIDI1Lgo+Cj4KPiAgICAgICBrYXJsCj4KPgo+IC0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+
IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBh
Y2hlLm9yZwo+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxw
QGx1Y2VuZS5hcGFjaGUub3JnCj4KPgoKCi0tIApkIGkgbiBvICAgIGsgbyByIGEgaApUZWw6ICs0
NCA3OTU2IDY2IDUyIDgzCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo1McKwMjEnNTAuNTkw
MiJOICAgMMKwNicxMS44MTE2IlcK
------=_Part_1018_17519560.1222441566556--

From java-user-return-36385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 15:45:12 2008
Return-Path: <java-user-return-36385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78005 invoked from network); 26 Sep 2008 15:45:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 15:45:12 -0000
Received: (qmail 5011 invoked by uid 500); 26 Sep 2008 15:45:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4978 invoked by uid 500); 26 Sep 2008 15:45:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4967 invoked by uid 99); 26 Sep 2008 15:45:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 08:45:02 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=SPF_PASS,URIBL_GREY,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of marcelo.ochoa@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 15:43:58 +0000
Received: by yx-out-2324.google.com with SMTP id 3so161928yxj.5
        for <java-user@lucene.apache.org>; Fri, 26 Sep 2008 08:44:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=3ISv/PWPHDByknwx3IBq1ZjPaqKWcByTUSpuEaPeFsU=;
        b=iBtavOz0DWVGvzomtUv67bAZ9RNfFqBCiEi+OU2z7EpR8BNq9BtxQcExPLONeUvwBa
         Ij4hNJhkzvYHR67dilRk87a/6jPl3fESGIAsppbEVMZISV12nYMbpzVarhv0a2SEcB9c
         qUF2Me96Tz2TaGkPNwKUkl+92Z7jsRUNjKEk4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=sXXoyev9c2eyFhrxmWmfFf7M7/CUvNzaKGjSRSEIr4DnoQ6rCIO7gkoavdbAyQvfsv
         aewXkLml/HyL3qo6H/Y8JeH4HRg7q2xIJ3+W3ul4knSC7MAK1ZniaGjhRIY/sQRW/6ua
         iH9pOz6TNl28K1ZvFJ+DA1slE05V7N4XpoUhk=
Received: by 10.100.95.19 with SMTP id s19mr1308547anb.97.1222443871879;
        Fri, 26 Sep 2008 08:44:31 -0700 (PDT)
Received: by 10.100.8.18 with HTTP; Fri, 26 Sep 2008 08:44:31 -0700 (PDT)
Message-ID: <126142c0809260844x3551cfaaj21863356c5a98ba3@mail.gmail.com>
Date: Fri, 26 Sep 2008 12:44:31 -0300
From: "Marcelo Ochoa" <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Caused by: java.io.IOException: read past EOF on Slave
In-Reply-To: <BF8A2B92-035C-483A-B955-447BDB0C1C89@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <19682684.post@talk.nabble.com>
	 <BF8A2B92-035C-483A-B955-447BDB0C1C89@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Michael:
  I just start testing 2.4rc2 running inside OJVM.
 I found a similar stack trace during indexing:
IW 3 [Root Thread]:   flush: segment=_3 docStoreSegment=_3
docStoreOffset=0 flushDocs=true flushDeletes=true flushDocStores=false
numDocs=2 numBufDelTerms=2
IW 3 [Root Thread]:   index before flush _1:C2->_1 _2:C2->_2
IW 3 [Root Thread]: DW: flush postings as segment _3 numDocs=2
IW 3 [Root Thread]: DW:   oldRAMSize=111616 newFlushedSize=264
docs/MB=7,943.758 new/old=0.237%
IW 3 [Root Thread]: DW: apply 2 buffered deleted terms and 0 deleted
docIDs and 0 deleted queries on 3 segments.
IW 3 [Root Thread]: hit exception flushing deletes
Exception in thread "Root Thread" java.io.IOException: read past EOF
        at org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java)
        at org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.java)
        at org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.java)
        at org.apache.lucene.index.TermBuffer.read(TermBuffer.java)
        at org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java)
        at org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java)
        at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java)
        at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java)
        at org.apache.lucene.index.SegmentTermDocs.seek(SegmentTermDocs.java)
        at org.apache.lucene.index.IndexReader.termDocs(IndexReader.java)
        at org.apache.lucene.index.DocumentsWriter.applyDeletes(DocumentsWriter.java)
        at org.apache.lucene.index.DocumentsWriter.applyDeletes(DocumentsWriter.java:918)
        at org.apache.lucene.index.IndexWriter.applyDeletes(IndexWriter.java)
        at org.apache.lucene.index.IndexWriter.doFlush(IndexWriter.java)
        at org.apache.lucene.index.IndexWriter.flush(IndexWriter.java)
        at org.apache.lucene.index.IndexWriter.flush(IndexWriter.java)
        at org.apache.lucene.indexer.LuceneDomainIndex.sync(LuceneDomainIndex.java:1308)

  I'll reinstall with a full debug info to see all line numbers in
Lucene java code.
  Is there a list of semantic changes at BufferedIndeInput code?
  I mean it do sequential or random writes for example.
  But anyway, I just compiled with latest code and ran my test suites,
I'll investigate the problem a bit more.
  Best regards, Marcelo.

On Fri, Sep 26, 2008 at 7:32 AM, Michael McCandless
<lucene@mikemccandless.com> wrote:
>
> Can you describe the sequence of steps that your replication process goes
> through?
>
> Also, which filesystem is the index being accessed through?
>
> Mike
>
> rahul_k123 wrote:
>
>>
>> First of all, thanks to all the people who helped me in getting the lucene
>> replication setup working and right now its live in our production :-)
>>
>> Everything working fine, except that i am seeing some exceptions on
>> slaves.
>>
>> The following is the one which is occuring more often on slaves
>>
>>  at
>> java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
>>       at
>> java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
>>       at java.util.concurrent.FutureTask.run(FutureTask.java:138)
>>       at
>>
>> java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:885)
>>       at
>>
>> java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
>>       at java.lang.Thread.run(Thread.java:619)
>> Caused by: com.IndexingException: [SYSTEM_ERROR] Cannot access index
>> [data_dir/index]: [read past EOF]
>>       at
>>
>> com.lucene.LuceneSearchService.getSearchResults(LuceneSearchService.java:964)
>>       ... 12 more
>> Caused by: java.io.IOException: read past EOF
>>       at
>>
>> org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java:146)
>>       at
>>
>> org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.java:38)
>>       at org.apache.lucene.store.IndexInput.readInt(IndexInput.java:66)
>>       at org.apache.lucene.store.IndexInput.readLong(IndexInput.java:89)
>>       at org.apache.lucene.index.FieldsReader.doc(FieldsReader.java:147)
>>       at
>> org.apache.lucene.index.SegmentReader.document(SegmentReader.java:659)
>>       at
>>
>> org.apache.lucene.index.MultiSegmentReader.document(MultiSegmentReader.java:257)
>>       at
>> org.apache.lucene.index.IndexReader.document(IndexReader.java:525)
>>
>> and the second one is
>>
>> at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
>>       at
>> java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
>>       at java.util.concurrent.FutureTask.run(FutureTask.java:138)
>>       at
>>
>> java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:885)
>>       at
>>
>> java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
>>       at java.lang.Thread.run(Thread.java:619)
>> Caused by: java.lang.IllegalArgumentException: attempt to access a deleted
>> document
>>       at
>> org.apache.lucene.index.SegmentReader.document(SegmentReader.java:657)
>>       at
>>
>> org.apache.lucene.index.MultiSegmentReader.document(MultiSegmentReader.java:257)
>>       at
>> org.apache.lucene.index.IndexReader.document(IndexReader.java:525)
>> This is on master index .
>>
>>
>>
>> Any help is appreciated
>>
>> Thanks.
>>
>> --
>> View this message in context:
>> http://www.nabble.com/Caused-by%3A-java.io.IOException%3A-read-past-EOF-on-Slave-tp19682684p19682684.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
Marcelo F. Ochoa
http://marceloochoa.blogspot.com/
http://marcelo.ochoa.googlepages.com/home
______________
Do you Know DBPrism? Look @ DB Prism's Web Site
http://www.dbprism.com.ar/index.html
More info?
Chapter 17 of the book "Programming the Oracle Database using Java &
Web Services"
http://www.amazon.com/gp/product/1555583296/
Chapter 21 of the book "Professional XML Databases" - Wrox Press
http://www.amazon.com/gp/product/1861003587/
Chapter 8 of the book "Oracle & Open Source" - O'Reilly
http://www.oreilly.com/catalog/oracleopen/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 15:46:05 2008
Return-Path: <java-user-return-36386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78614 invoked from network); 26 Sep 2008 15:46:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 15:46:05 -0000
Received: (qmail 6854 invoked by uid 500); 26 Sep 2008 15:45:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6825 invoked by uid 500); 26 Sep 2008 15:45:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6814 invoked by uid 99); 26 Sep 2008 15:45:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 08:45:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ari1974@gmail.com designates 209.85.146.183 as permitted sender)
Received: from [209.85.146.183] (HELO wa-out-1112.google.com) (209.85.146.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 15:44:56 +0000
Received: by wa-out-1112.google.com with SMTP id n4so504428wag.5
        for <java-user@lucene.apache.org>; Fri, 26 Sep 2008 08:45:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=yhcrNfsz6SzYy/nk7f1R8y+aueYpUlmw6ws1dP18ns8=;
        b=fRPYc1/uKtVkhn8u4uA1lpE0/nFnZTwGJDQICWJPQC6oeK4u1VC96A+cZ0yO3qk8V1
         jxq1PCzvPxaq0tbRO6pplyKJlxhKmLHIv+pzQBw2JwNX78t+YjNqT6NFHndRT5q/Iew3
         azYbLnJr0Tav/PrfiYITIN1NqyieKWTYMzbCw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=PE4gtLNnlvMkW5Fp2E+4vr2sdiS8uimbwhbM3H6vMrXF9E6wKRpO0QmfRioE8Ac8F3
         715601iE5sKLOVTDSZJw4+XH2Ew1tqIWBsQ04pKgUxXcitL+3LOvLatz0NW5akVYcjqM
         xBVILFdOVq/se3bRY42gtAwq9a0vv/f+unPVE=
Received: by 10.114.151.13 with SMTP id y13mr1564760wad.134.1222443920396;
        Fri, 26 Sep 2008 08:45:20 -0700 (PDT)
Received: by 10.114.12.5 with HTTP; Fri, 26 Sep 2008 08:45:20 -0700 (PDT)
Message-ID: <d3c60f0e0809260845s1396a9e1keecaf2628ef899f2@mail.gmail.com>
Date: Fri, 26 Sep 2008 08:45:20 -0700
From: "Ari Miller" <ari1974@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: CorruptIndexException workaround in 2.3-SNAPSHOT? (Attn: Michael McCandless)
In-Reply-To: <190623F6-7BDE-40E0-BC26-E808B4D6BE23@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <d3c60f0e0809251709x73950b27yc9dbfbb9390468c9@mail.gmail.com>
	 <190623F6-7BDE-40E0-BC26-E808B4D6BE23@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Confirmed that the manifest date on the 2.3-SNAPSHOT is much older
than the file date:
Implementation-Version: 2.3-SNAPSHOT 613047 - hudson - 2008-01-18 04:1
 1:25

Is there an available SNAPSHOT of the 2.3 branch with this fix?
I've downloaded the 2.4 SNAPSHOT to see if this will resolve the
corruption issue -- based on the date in the Manifest, I'm assuming
this is a slightly later version than 2.4rc2.

2.4 SNAPSHOT
Implementation-Version: 2.4-SNAPSHOT 699151 - 2008-09-26 02:10:14
2.4 RC2
Implementation-Version: 2.4.0-rc2 698976 - 2008-09-25 10:12:47

Best,
Ari

On Fri, Sep 26, 2008 at 3:30 AM, Michael McCandless
<lucene@mikemccandless.com> wrote:
>
> Ari Miller wrote:
>
>> According to
>> https://issues.apache.org/jira/browse/LUCENE-1282?focusedCommentId=12596949#action_12596949
>> (Sun hotspot compiler bug in 1.6.0_04/05 affects Lucene), a workaround
>> for the bug which causes the CorruptIndexException was put in to the
>> 2.3 branch and 2.4.
>> However, we are still experiencing this issue (intermittent creation
>> of a corrupt index) with a 2.3-SNAPSHOT from maven.
>> Was the workaround put into 2.3-SNAPSHOT?  Are there other issues
>> which would cause the same error (detailed below)?
>>
>> We would prefer to avoid upgrading to JDK 6u10
>> (http://java.sun.com/javase/downloads/ea/6u10/6u10RC.jsp) until it is
>> a final release, thus the use of the 2.3-SNAPSHOT dated July 22.
>
> Can you look in the Lucene core JAR's manifest and report back what version
> information you see?  (It should contain the timestamp that the JAR was
> built).
>
> I committed this workaround to the 2.3 branch on May 22.
>
> We don't currently have any automated build that pushes snapshot builds into
> maven on the 2.3 branch; my guess is that 2.3-SNAPSHOT in maven was from the
> last trunk build before 2.3 was released (which would not contain this fix),
> though I'm not sure why it has timestamp July 22.
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 16:00:31 2008
Return-Path: <java-user-return-36387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89224 invoked from network); 26 Sep 2008 16:00:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 16:00:31 -0000
Received: (qmail 45681 invoked by uid 500); 26 Sep 2008 16:00:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45219 invoked by uid 500); 26 Sep 2008 16:00:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45208 invoked by uid 99); 26 Sep 2008 16:00:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 09:00:21 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 15:59:20 +0000
Received: by gxk6 with SMTP id 6so8624138gxk.5
        for <java-user@lucene.apache.org>; Fri, 26 Sep 2008 08:58:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=pmil9rOw1y6mbg5G5cExfk4Gjzpy3f41dPDRU+/aqrQ=;
        b=kMceOrCVdwPUeL+ioQ7Ga53x47KNfjfW6SFgK58bRpjSQwJSL0ukGql6+2IADbcU3x
         CZ6sd5DfQrvLhT06GAyJIk/E7ROvpHvyJGFX5C+Ppbx/HIUqUWdzYr1q9zRNzrZFAhvf
         Z65F1vB4pFRHluuUAnLhqJSNkZYf7NVMYN/a4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=s7x3oYKCxPs1Gw+Oy+uteicrAbcTgxTHb8AhjeujaoQEHa162XA0yNBRE1fyZUyGHf
         JkLNCqlhjxN3FQH7sYjk2KRP78LeHpF4C8nWx/6j28oOqrUhxU5NlPEDzKMXYKnco9V2
         4z31NiSWW465q0VuB03zsayHBtmJ/vhTovzbw=
Received: by 10.151.47.7 with SMTP id z7mr2277403ybj.2.1222444733772;
        Fri, 26 Sep 2008 08:58:53 -0700 (PDT)
Received: by 10.151.117.4 with HTTP; Fri, 26 Sep 2008 08:58:53 -0700 (PDT)
Message-ID: <85d3c3b60809260858i66fb8debw19d65716f013a8ec@mail.gmail.com>
Date: Fri, 26 Sep 2008 11:58:53 -0400
From: "Jason Rutherglen" <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to restore corrupted index
In-Reply-To: <0B7F1A83-825C-406B-AAE6-23028E777DC0@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <0CD49D04A7B5534CA56257ADD9719EF7036AA1A3@indiaserv01.asite.asitehq.com>
	 <0B7F1A83-825C-406B-AAE6-23028E777DC0@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Mike,

As part of my goal of trying to use Lucene as primary storage
mechanism (perhaps not the best idea), what do you think is the best
way to handle storing data in Lucene and preventing corrupted data the
way something like an SQL database handles corrupted data?  Or is
there simply no good way to do this?

Jason

On Fri, Sep 26, 2008 at 10:30 AM, Michael McCandless
<lucene@mikemccandless.com> wrote:
>
> It's perfectly fine to have a reader open on an index, while an IndexWriter
> runs optimize.
>
> Which version of Lucene are you using?  And which OS & filesystem?
>
> Mike
>
> Chaula Ganatra wrote:
>
>> It was the Reader on same index, which I did not close so gave exception
>> in writer.optimise()
>>
>> Chaula
>>
>> -----Original Message-----
>> From: Michael McCandless [mailto:lucene@mikemccandless.com]
>> Sent: 26 September, 2008 7:17 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: How to restore corrupted index
>>
>>
>> Can you post the full stack trace in both cases?
>>
>> Mike
>>
>> Chaula Ganatra wrote:
>>
>>> I found one case when such multiple files are remained, when we call
>>> writer.optimise() it throws exception and multiple files remained in
>>> index dir.
>>>
>>> After such multiple files, when we add document in index by calling
>>> writer.addDocument it throws java.lang.NegativeArraySizeException
>>>
>>> Regards,
>>> Chaula
>>>
>>> -----Original Message-----
>>> From: Grant Ingersoll [mailto:gsingers@apache.org]
>>> Sent: 26 September, 2008 6:02 PM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: How to restore corrupted index
>>>
>>> There is the CheckIndex tool included in the distribution for
>>> checking/
>>> fixing bad indexes, but it can't solve everything.
>>>
>>> The bigger question is why it is happening to begin with.  Can you
>>> describe your indexing process?  How do you know the index is actually
>>> corrupted?  Are you seeing exceptions when opening it?
>>>
>>> -Grant
>>> On Sep 26, 2008, at 6:49 AM, Chaula Ganatra wrote:
>>>
>>>> We have an application in which index will be updated frequently.
>>>>
>>>> During development time, found that index files gets corrupted, i.e.
>>>> more than one  cfs files,some other extension files e.g. frq, fnm,
>>>> nrm
>>>>
>>>> Remains there in index directory.
>>>>
>>>> Is there any way that such issue does not occur at all or if it
>>>> happens
>>>> we can recover the index data again?
>>>>
>>>> It would be a great help, if some one can.
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> Regards,
>>>>
>>>> Chaula
>>>>
>>>>
>>>>
>>>>
>>>>
>>>
>>> --------------------------
>>> Grant Ingersoll
>>> http://www.lucidimagination.com
>>>
>>> Lucene Helpful Hints:
>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 16:08:18 2008
Return-Path: <java-user-return-36388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94695 invoked from network); 26 Sep 2008 16:08:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 16:08:18 -0000
Received: (qmail 58965 invoked by uid 500); 26 Sep 2008 16:08:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58930 invoked by uid 500); 26 Sep 2008 16:08:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58919 invoked by uid 99); 26 Sep 2008 16:08:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 09:08:09 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 16:07:09 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KjFr4-0005yT-B2
	for java-user@lucene.apache.org; Fri, 26 Sep 2008 09:07:42 -0700
Message-ID: <19691563.post@talk.nabble.com>
Date: Fri, 26 Sep 2008 09:07:42 -0700 (PDT)
From: jcd92 <jc.dauphin@unesco.org>
To: java-user@lucene.apache.org
Subject: How to get the index file entries (IndexReader)  in different
 order?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jc.dauphin@unesco.org
X-Virus-Checked: Checked by ClamAV on apache.org


Hi all,

The index has Millions of entries. I need to display the index content in a
JTable with columns (terms, field, freq) and the user can choose the sorting
order (field, freq, terms), (freq, term, field), etc...

What is the best solution to manage the Index sorting

I just need some entries at a time, the one displayed in the table. Thus I
just sort the entries needed in a TreeMap reading the whole index file
(which is quite slow). 

Any Idea would be welcome

Best wishes to all

JCD

-- 
View this message in context: http://www.nabble.com/How-to-get-the-index-file-entries-%28IndexReader%29--in-different-order--tp19691563p19691563.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 16:14:48 2008
Return-Path: <java-user-return-36389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99746 invoked from network); 26 Sep 2008 16:14:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 16:14:47 -0000
Received: (qmail 82122 invoked by uid 500); 26 Sep 2008 16:14:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82097 invoked by uid 500); 26 Sep 2008 16:14:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82086 invoked by uid 99); 26 Sep 2008 16:14:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 09:14:37 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.241] (HELO an-out-0708.google.com) (209.85.132.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 16:13:34 +0000
Received: by an-out-0708.google.com with SMTP id c37so54227anc.49
        for <java-user@lucene.apache.org>; Fri, 26 Sep 2008 09:13:49 -0700 (PDT)
Received: by 10.100.57.6 with SMTP id f6mr1340631ana.154.1222445629735;
        Fri, 26 Sep 2008 09:13:49 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id b18sm4130768ana.5.2008.09.26.09.13.48
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 26 Sep 2008 09:13:48 -0700 (PDT)
Message-Id: <848FBF6C-4E8C-40FF-8A72-623778324F13@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <85d3c3b60809260858i66fb8debw19d65716f013a8ec@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: How to restore corrupted index
Date: Fri, 26 Sep 2008 12:13:46 -0400
References: <0CD49D04A7B5534CA56257ADD9719EF7036AA1A3@indiaserv01.asite.asitehq.com> <0B7F1A83-825C-406B-AAE6-23028E777DC0@mikemccandless.com> <85d3c3b60809260858i66fb8debw19d65716f013a8ec@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Corrupted data in what sense?

EG if you don't trust your IO system to store data properly?

Mike

Jason Rutherglen wrote:

> Mike,
>
> As part of my goal of trying to use Lucene as primary storage
> mechanism (perhaps not the best idea), what do you think is the best
> way to handle storing data in Lucene and preventing corrupted data the
> way something like an SQL database handles corrupted data?  Or is
> there simply no good way to do this?
>
> Jason
>
> On Fri, Sep 26, 2008 at 10:30 AM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>>
>> It's perfectly fine to have a reader open on an index, while an  
>> IndexWriter
>> runs optimize.
>>
>> Which version of Lucene are you using?  And which OS & filesystem?
>>
>> Mike
>>
>> Chaula Ganatra wrote:
>>
>>> It was the Reader on same index, which I did not close so gave  
>>> exception
>>> in writer.optimise()
>>>
>>> Chaula
>>>
>>> -----Original Message-----
>>> From: Michael McCandless [mailto:lucene@mikemccandless.com]
>>> Sent: 26 September, 2008 7:17 PM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: How to restore corrupted index
>>>
>>>
>>> Can you post the full stack trace in both cases?
>>>
>>> Mike
>>>
>>> Chaula Ganatra wrote:
>>>
>>>> I found one case when such multiple files are remained, when we  
>>>> call
>>>> writer.optimise() it throws exception and multiple files remained  
>>>> in
>>>> index dir.
>>>>
>>>> After such multiple files, when we add document in index by calling
>>>> writer.addDocument it throws java.lang.NegativeArraySizeException
>>>>
>>>> Regards,
>>>> Chaula
>>>>
>>>> -----Original Message-----
>>>> From: Grant Ingersoll [mailto:gsingers@apache.org]
>>>> Sent: 26 September, 2008 6:02 PM
>>>> To: java-user@lucene.apache.org
>>>> Subject: Re: How to restore corrupted index
>>>>
>>>> There is the CheckIndex tool included in the distribution for
>>>> checking/
>>>> fixing bad indexes, but it can't solve everything.
>>>>
>>>> The bigger question is why it is happening to begin with.  Can you
>>>> describe your indexing process?  How do you know the index is  
>>>> actually
>>>> corrupted?  Are you seeing exceptions when opening it?
>>>>
>>>> -Grant
>>>> On Sep 26, 2008, at 6:49 AM, Chaula Ganatra wrote:
>>>>
>>>>> We have an application in which index will be updated frequently.
>>>>>
>>>>> During development time, found that index files gets corrupted,  
>>>>> i.e.
>>>>> more than one  cfs files,some other extension files e.g. frq, fnm,
>>>>> nrm
>>>>>
>>>>> Remains there in index directory.
>>>>>
>>>>> Is there any way that such issue does not occur at all or if it
>>>>> happens
>>>>> we can recover the index data again?
>>>>>
>>>>> It would be a great help, if some one can.
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> Regards,
>>>>>
>>>>> Chaula
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>
>>>> --------------------------
>>>> Grant Ingersoll
>>>> http://www.lucidimagination.com
>>>>
>>>> Lucene Helpful Hints:
>>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 16:19:51 2008
Return-Path: <java-user-return-36390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1858 invoked from network); 26 Sep 2008 16:19:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 16:19:51 -0000
Received: (qmail 95713 invoked by uid 500); 26 Sep 2008 16:19:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95687 invoked by uid 500); 26 Sep 2008 16:19:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95676 invoked by uid 99); 26 Sep 2008 16:19:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 09:19:42 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 16:18:41 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KjG2E-0006WK-AC
	for java-user@lucene.apache.org; Fri, 26 Sep 2008 09:19:14 -0700
Message-ID: <19691799.post@talk.nabble.com>
Date: Fri, 26 Sep 2008 09:19:14 -0700 (PDT)
From: rahul_k123 <vishnudeepak@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Caused by: java.io.IOException: read past EOF on Slave
In-Reply-To: <BF8A2B92-035C-483A-B955-447BDB0C1C89@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: vishnudeepak@gmail.com
References: <19682684.post@talk.nabble.com> <BF8A2B92-035C-483A-B955-447BDB0C1C89@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


The following are steps..

1.We do indexing every 5 minutes on master and when indexing is done a
snapshot is taken

2. On slave we have a cronjob which runs snappuller every 3 minutes to check
for new snapshots and installs it on slave if it finds new one

3.Master and Slave are continuously serving search requests.


(I am not using SOLR for indexing )


The file system is ext3


Thanks in advance.





Michael McCandless-2 wrote:
> 
> 
> Can you describe the sequence of steps that your replication process  
> goes through?
> 
> Also, which filesystem is the index being accessed through?
> 
> Mike
> 
> rahul_k123 wrote:
> 
>>
>> First of all, thanks to all the people who helped me in getting the  
>> lucene
>> replication setup working and right now its live in our production :-)
>>
>> Everything working fine, except that i am seeing some exceptions on  
>> slaves.
>>
>> The following is the one which is occuring more often on slaves
>>
>>  at java.util.concurrent.Executors 
>> $RunnableAdapter.call(Executors.java:441)
>>        at
>> java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
>>        at java.util.concurrent.FutureTask.run(FutureTask.java:138)
>>        at
>> java.util.concurrent.ThreadPoolExecutor 
>> $Worker.runTask(ThreadPoolExecutor.java:885)
>>        at
>> java.util.concurrent.ThreadPoolExecutor 
>> $Worker.run(ThreadPoolExecutor.java:907)
>>        at java.lang.Thread.run(Thread.java:619)
>> Caused by: com.IndexingException: [SYSTEM_ERROR] Cannot access index
>> [data_dir/index]: [read past EOF]
>>        at
>> com 
>> .lucene 
>> .LuceneSearchService.getSearchResults(LuceneSearchService.java:964)
>>        ... 12 more
>> Caused by: java.io.IOException: read past EOF
>>        at
>> org 
>> .apache 
>> .lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java:146)
>>        at
>> org 
>> .apache 
>> .lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.java:38)
>>        at org.apache.lucene.store.IndexInput.readInt(IndexInput.java: 
>> 66)
>>        at  
>> org.apache.lucene.store.IndexInput.readLong(IndexInput.java:89)
>>        at org.apache.lucene.index.FieldsReader.doc(FieldsReader.java: 
>> 147)
>>        at
>> org.apache.lucene.index.SegmentReader.document(SegmentReader.java:659)
>>        at
>> org 
>> .apache 
>> .lucene.index.MultiSegmentReader.document(MultiSegmentReader.java:257)
>>        at
>> org.apache.lucene.index.IndexReader.document(IndexReader.java:525)
>>
>> and the second one is
>>
>> at java.util.concurrent.Executors 
>> $RunnableAdapter.call(Executors.java:441)
>>        at
>> java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
>>        at java.util.concurrent.FutureTask.run(FutureTask.java:138)
>>        at
>> java.util.concurrent.ThreadPoolExecutor 
>> $Worker.runTask(ThreadPoolExecutor.java:885)
>>        at
>> java.util.concurrent.ThreadPoolExecutor 
>> $Worker.run(ThreadPoolExecutor.java:907)
>>        at java.lang.Thread.run(Thread.java:619)
>> Caused by: java.lang.IllegalArgumentException: attempt to access a  
>> deleted
>> document
>>        at
>> org.apache.lucene.index.SegmentReader.document(SegmentReader.java:657)
>>        at
>> org 
>> .apache 
>> .lucene.index.MultiSegmentReader.document(MultiSegmentReader.java:257)
>>        at
>> org.apache.lucene.index.IndexReader.document(IndexReader.java:525)
>> This is on master index .
>>
>>
>>
>> Any help is appreciated
>>
>> Thanks.
>>
>> -- 
>> View this message in context:
>> http://www.nabble.com/Caused-by%3A-java.io.IOException%3A-read-past-EOF-on-Slave-tp19682684p19682684.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Caused-by%3A-java.io.IOException%3A-read-past-EOF-on-Slave-tp19682684p19691799.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 16:21:08 2008
Return-Path: <java-user-return-36391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2528 invoked from network); 26 Sep 2008 16:21:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 16:21:08 -0000
Received: (qmail 98492 invoked by uid 500); 26 Sep 2008 16:20:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98197 invoked by uid 500); 26 Sep 2008 16:20:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98186 invoked by uid 99); 26 Sep 2008 16:20:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 09:20:59 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 16:19:56 +0000
Received: by gxk6 with SMTP id 6so8655163gxk.5
        for <java-user@lucene.apache.org>; Fri, 26 Sep 2008 09:20:28 -0700 (PDT)
Received: by 10.100.41.16 with SMTP id o16mr1368100ano.121.1222446028028;
        Fri, 26 Sep 2008 09:20:28 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id b14sm4130938ana.23.2008.09.26.09.20.26
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 26 Sep 2008 09:20:27 -0700 (PDT)
Message-Id: <EBF3A206-DDEA-4C2C-9383-E1C5DC2ECA28@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <0CD49D04A7B5534CA56257ADD9719EF7036AA1AD@indiaserv01.asite.asitehq.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: How to restore corrupted index
Date: Fri, 26 Sep 2008 12:20:25 -0400
References: <0CD49D04A7B5534CA56257ADD9719EF7036AA1AD@indiaserv01.asite.asitehq.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


OK.  I really need to see those stack traces to better understand this  
issue.

Also, does the issue still happen on 2.3, or 2.4 RC2?

Mike

Chaula Ganatra wrote:

> Lucene 2.2.0, windows XP
>
> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: 26 September, 2008 8:00 PM
> To: java-user@lucene.apache.org
> Subject: Re: How to restore corrupted index
>
>
> It's perfectly fine to have a reader open on an index, while an
> IndexWriter runs optimize.
>
> Which version of Lucene are you using?  And which OS & filesystem?
>
> Mike
>
> Chaula Ganatra wrote:
>
>> It was the Reader on same index, which I did not close so gave
>> exception
>> in writer.optimise()
>>
>> Chaula
>>
>> -----Original Message-----
>> From: Michael McCandless [mailto:lucene@mikemccandless.com]
>> Sent: 26 September, 2008 7:17 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: How to restore corrupted index
>>
>>
>> Can you post the full stack trace in both cases?
>>
>> Mike
>>
>> Chaula Ganatra wrote:
>>
>>> I found one case when such multiple files are remained, when we call
>>> writer.optimise() it throws exception and multiple files remained in
>>> index dir.
>>>
>>> After such multiple files, when we add document in index by calling
>>> writer.addDocument it throws java.lang.NegativeArraySizeException
>>>
>>> Regards,
>>> Chaula
>>>
>>> -----Original Message-----
>>> From: Grant Ingersoll [mailto:gsingers@apache.org]
>>> Sent: 26 September, 2008 6:02 PM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: How to restore corrupted index
>>>
>>> There is the CheckIndex tool included in the distribution for
>>> checking/
>>> fixing bad indexes, but it can't solve everything.
>>>
>>> The bigger question is why it is happening to begin with.  Can you
>>> describe your indexing process?  How do you know the index is
>>> actually
>>> corrupted?  Are you seeing exceptions when opening it?
>>>
>>> -Grant
>>> On Sep 26, 2008, at 6:49 AM, Chaula Ganatra wrote:
>>>
>>>> We have an application in which index will be updated frequently.
>>>>
>>>> During development time, found that index files gets corrupted,  
>>>> i.e.
>>>> more than one  cfs files,some other extension files e.g. frq, fnm,
>>>> nrm
>>>>
>>>> Remains there in index directory.
>>>>
>>>> Is there any way that such issue does not occur at all or if it
>>>> happens
>>>> we can recover the index data again?
>>>>
>>>> It would be a great help, if some one can.
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> Regards,
>>>>
>>>> Chaula
>>>>
>>>>
>>>>
>>>>
>>>>
>>>
>>> --------------------------
>>> Grant Ingersoll
>>> http://www.lucidimagination.com
>>>
>>> Lucene Helpful Hints:
>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 16:21:36 2008
Return-Path: <java-user-return-36392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2864 invoked from network); 26 Sep 2008 16:21:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 16:21:36 -0000
Received: (qmail 216 invoked by uid 500); 26 Sep 2008 16:21:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99917 invoked by uid 500); 26 Sep 2008 16:21:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99902 invoked by uid 99); 26 Sep 2008 16:21:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 09:21:26 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 74.125.46.29 as permitted sender)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 16:20:25 +0000
Received: by yw-out-2324.google.com with SMTP id 3so165375ywj.5
        for <java-user@lucene.apache.org>; Fri, 26 Sep 2008 09:20:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=Q87C4wjZtJQfmPYYxt7DBmsUvKgrGdVav6D/Ob4JlJ8=;
        b=SHPCEuAFqHA6lkFUTxqVpbX6LQqRL1ufjPtmZkYL3ZaOqUAT6/fpmdugxcra0lXQL7
         TE5KrndgCE9jxUyjA+2v4X9NpL+XCLwkBQiaHP8ehOZnwAqWTK0fTfmodDP5ACqkYDPt
         O8kNXHqtNNBZ1ZdSRRPuvd5nKuE9f/9HsVQMc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=oVdRJhngNih31T/pzcReK3tqFIRB8Whlj/TqQJgGQpziaiBnV4vQIeGMTy5vpPiroL
         snHYzQZtuMlBneJIaPEIx5wlQizJWSL026PAzcc31HlBm8b7EQAmEP4y7Whrqqhz4gst
         9996F/pCz1qK/4AY/kSRbJ49ceNdEjgASolMo=
Received: by 10.150.216.8 with SMTP id o8mr2240488ybg.197.1222446048893;
        Fri, 26 Sep 2008 09:20:48 -0700 (PDT)
Received: by 10.151.117.4 with HTTP; Fri, 26 Sep 2008 09:20:48 -0700 (PDT)
Message-ID: <85d3c3b60809260920x5ed78aerdefa89e25a5b8b59@mail.gmail.com>
Date: Fri, 26 Sep 2008 12:20:48 -0400
From: "Jason Rutherglen" <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to restore corrupted index
In-Reply-To: <848FBF6C-4E8C-40FF-8A72-623778324F13@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <0CD49D04A7B5534CA56257ADD9719EF7036AA1A3@indiaserv01.asite.asitehq.com>
	 <0B7F1A83-825C-406B-AAE6-23028E777DC0@mikemccandless.com>
	 <85d3c3b60809260858i66fb8debw19d65716f013a8ec@mail.gmail.com>
	 <848FBF6C-4E8C-40FF-8A72-623778324F13@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I'm thinking more in terms of CRC32 checks performed on database
pages.  Is there a way to incorporate this technique in a way that
does not affect performance too much in Lucene?  The question is, when
is the CRC32 check is performed, and to which files is it applied if
any?

On Fri, Sep 26, 2008 at 12:13 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
>
> Corrupted data in what sense?
>
> EG if you don't trust your IO system to store data properly?
>
> Mike
>
> Jason Rutherglen wrote:
>
>> Mike,
>>
>> As part of my goal of trying to use Lucene as primary storage
>> mechanism (perhaps not the best idea), what do you think is the best
>> way to handle storing data in Lucene and preventing corrupted data the
>> way something like an SQL database handles corrupted data?  Or is
>> there simply no good way to do this?
>>
>> Jason
>>
>> On Fri, Sep 26, 2008 at 10:30 AM, Michael McCandless
>> <lucene@mikemccandless.com> wrote:
>>>
>>> It's perfectly fine to have a reader open on an index, while an
>>> IndexWriter
>>> runs optimize.
>>>
>>> Which version of Lucene are you using?  And which OS & filesystem?
>>>
>>> Mike
>>>
>>> Chaula Ganatra wrote:
>>>
>>>> It was the Reader on same index, which I did not close so gave exception
>>>> in writer.optimise()
>>>>
>>>> Chaula
>>>>
>>>> -----Original Message-----
>>>> From: Michael McCandless [mailto:lucene@mikemccandless.com]
>>>> Sent: 26 September, 2008 7:17 PM
>>>> To: java-user@lucene.apache.org
>>>> Subject: Re: How to restore corrupted index
>>>>
>>>>
>>>> Can you post the full stack trace in both cases?
>>>>
>>>> Mike
>>>>
>>>> Chaula Ganatra wrote:
>>>>
>>>>> I found one case when such multiple files are remained, when we call
>>>>> writer.optimise() it throws exception and multiple files remained in
>>>>> index dir.
>>>>>
>>>>> After such multiple files, when we add document in index by calling
>>>>> writer.addDocument it throws java.lang.NegativeArraySizeException
>>>>>
>>>>> Regards,
>>>>> Chaula
>>>>>
>>>>> -----Original Message-----
>>>>> From: Grant Ingersoll [mailto:gsingers@apache.org]
>>>>> Sent: 26 September, 2008 6:02 PM
>>>>> To: java-user@lucene.apache.org
>>>>> Subject: Re: How to restore corrupted index
>>>>>
>>>>> There is the CheckIndex tool included in the distribution for
>>>>> checking/
>>>>> fixing bad indexes, but it can't solve everything.
>>>>>
>>>>> The bigger question is why it is happening to begin with.  Can you
>>>>> describe your indexing process?  How do you know the index is actually
>>>>> corrupted?  Are you seeing exceptions when opening it?
>>>>>
>>>>> -Grant
>>>>> On Sep 26, 2008, at 6:49 AM, Chaula Ganatra wrote:
>>>>>
>>>>>> We have an application in which index will be updated frequently.
>>>>>>
>>>>>> During development time, found that index files gets corrupted, i.e.
>>>>>> more than one  cfs files,some other extension files e.g. frq, fnm,
>>>>>> nrm
>>>>>>
>>>>>> Remains there in index directory.
>>>>>>
>>>>>> Is there any way that such issue does not occur at all or if it
>>>>>> happens
>>>>>> we can recover the index data again?
>>>>>>
>>>>>> It would be a great help, if some one can.
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> Regards,
>>>>>>
>>>>>> Chaula
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>> --------------------------
>>>>> Grant Ingersoll
>>>>> http://www.lucidimagination.com
>>>>>
>>>>> Lucene Helpful Hints:
>>>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 16:42:31 2008
Return-Path: <java-user-return-36393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17269 invoked from network); 26 Sep 2008 16:42:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 16:42:31 -0000
Received: (qmail 42709 invoked by uid 500); 26 Sep 2008 16:42:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42683 invoked by uid 500); 26 Sep 2008 16:42:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42672 invoked by uid 99); 26 Sep 2008 16:42:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 09:42:22 -0700
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=SPF_NEUTRAL,URIBL_GREY,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.82.236] (HELO wx-out-0506.google.com) (66.249.82.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 16:41:18 +0000
Received: by wx-out-0506.google.com with SMTP id h28so255752wxd.20
        for <java-user@lucene.apache.org>; Fri, 26 Sep 2008 09:41:51 -0700 (PDT)
Received: by 10.70.11.1 with SMTP id 1mr1349218wxk.26.1222447309039;
        Fri, 26 Sep 2008 09:41:49 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id h17sm3197785wxd.37.2008.09.26.09.41.47
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 26 Sep 2008 09:41:48 -0700 (PDT)
Message-Id: <46392609-A138-4546-8DBC-7839801E5280@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <126142c0809260844x3551cfaaj21863356c5a98ba3@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Caused by: java.io.IOException: read past EOF on Slave
Date: Fri, 26 Sep 2008 12:41:44 -0400
References: <19682684.post@talk.nabble.com> <BF8A2B92-035C-483A-B955-447BDB0C1C89@mikemccandless.com> <126142c0809260844x3551cfaaj21863356c5a98ba3@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


This one looks spooky!

Is it easily repeated?  If you could print out which 2 terms you had  
tried to delete, and then zip up the index just before deleting those  
docs (after closing the writer) and send to me, I can try to  
understand what's wrong with the index.  It looks as if the *.tis file  
for one of the segments is truncated.

If you capture the series of add/update/delete documents, can you get  
a standalone Java test to show this?

Does this test create an entirely new index?

We did change the index format in 2.4 to use "true" UTF8 encoding for  
all text content; not sure that this applies here (to  
BufferedIndexReader it's all bytes) but it may.

BufferedIndexReader in general can do random IO, especially when  
reading the term dict file (*.tis), when you

Mike

Marcelo Ochoa wrote:

> Michael:
>  I just start testing 2.4rc2 running inside OJVM.
> I found a similar stack trace during indexing:
> IW 3 [Root Thread]:   flush: segment=_3 docStoreSegment=_3
> docStoreOffset=0 flushDocs=true flushDeletes=true flushDocStores=false
> numDocs=2 numBufDelTerms=2
> IW 3 [Root Thread]:   index before flush _1:C2->_1 _2:C2->_2
> IW 3 [Root Thread]: DW: flush postings as segment _3 numDocs=2
> IW 3 [Root Thread]: DW:   oldRAMSize=111616 newFlushedSize=264
> docs/MB=7,943.758 new/old=0.237%
> IW 3 [Root Thread]: DW: apply 2 buffered deleted terms and 0 deleted
> docIDs and 0 deleted queries on 3 segments.
> IW 3 [Root Thread]: hit exception flushing deletes
> Exception in thread "Root Thread" java.io.IOException: read past EOF
>        at  
> org 
> .apache 
> .lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java)
>        at  
> org 
> .apache 
> .lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.java)
>        at  
> org 
> .apache 
> .lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.java)
>        at org.apache.lucene.index.TermBuffer.read(TermBuffer.java)
>        at  
> org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java)
>        at  
> org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java)
>        at  
> org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java)
>        at  
> org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java)
>        at  
> org.apache.lucene.index.SegmentTermDocs.seek(SegmentTermDocs.java)
>        at  
> org.apache.lucene.index.IndexReader.termDocs(IndexReader.java)
>        at  
> org 
> .apache 
> .lucene.index.DocumentsWriter.applyDeletes(DocumentsWriter.java)
>        at  
> org 
> .apache 
> .lucene.index.DocumentsWriter.applyDeletes(DocumentsWriter.java:918)
>        at  
> org.apache.lucene.index.IndexWriter.applyDeletes(IndexWriter.java)
>        at  
> org.apache.lucene.index.IndexWriter.doFlush(IndexWriter.java)
>        at org.apache.lucene.index.IndexWriter.flush(IndexWriter.java)
>        at org.apache.lucene.index.IndexWriter.flush(IndexWriter.java)
>        at  
> org 
> .apache.lucene.indexer.LuceneDomainIndex.sync(LuceneDomainIndex.java: 
> 1308)
>
>  I'll reinstall with a full debug info to see all line numbers in
> Lucene java code.
>  Is there a list of semantic changes at BufferedIndeInput code?
>  I mean it do sequential or random writes for example.
>  But anyway, I just compiled with latest code and ran my test suites,
> I'll investigate the problem a bit more.
>  Best regards, Marcelo.
>
> On Fri, Sep 26, 2008 at 7:32 AM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>>
>> Can you describe the sequence of steps that your replication  
>> process goes
>> through?
>>
>> Also, which filesystem is the index being accessed through?
>>
>> Mike
>>
>> rahul_k123 wrote:
>>
>>>
>>> First of all, thanks to all the people who helped me in getting  
>>> the lucene
>>> replication setup working and right now its live in our  
>>> production :-)
>>>
>>> Everything working fine, except that i am seeing some exceptions on
>>> slaves.
>>>
>>> The following is the one which is occuring more often on slaves
>>>
>>> at
>>> java.util.concurrent.Executors$RunnableAdapter.call(Executors.java: 
>>> 441)
>>>      at
>>> java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
>>>      at java.util.concurrent.FutureTask.run(FutureTask.java:138)
>>>      at
>>>
>>> java.util.concurrent.ThreadPoolExecutor 
>>> $Worker.runTask(ThreadPoolExecutor.java:885)
>>>      at
>>>
>>> java.util.concurrent.ThreadPoolExecutor 
>>> $Worker.run(ThreadPoolExecutor.java:907)
>>>      at java.lang.Thread.run(Thread.java:619)
>>> Caused by: com.IndexingException: [SYSTEM_ERROR] Cannot access index
>>> [data_dir/index]: [read past EOF]
>>>      at
>>>
>>> com 
>>> .lucene 
>>> .LuceneSearchService.getSearchResults(LuceneSearchService.java:964)
>>>      ... 12 more
>>> Caused by: java.io.IOException: read past EOF
>>>      at
>>>
>>> org 
>>> .apache 
>>> .lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java:146)
>>>      at
>>>
>>> org 
>>> .apache 
>>> .lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.java: 
>>> 38)
>>>      at org.apache.lucene.store.IndexInput.readInt(IndexInput.java: 
>>> 66)
>>>      at  
>>> org.apache.lucene.store.IndexInput.readLong(IndexInput.java:89)
>>>      at org.apache.lucene.index.FieldsReader.doc(FieldsReader.java: 
>>> 147)
>>>      at
>>> org.apache.lucene.index.SegmentReader.document(SegmentReader.java: 
>>> 659)
>>>      at
>>>
>>> org 
>>> .apache 
>>> .lucene.index.MultiSegmentReader.document(MultiSegmentReader.java: 
>>> 257)
>>>      at
>>> org.apache.lucene.index.IndexReader.document(IndexReader.java:525)
>>>
>>> and the second one is
>>>
>>> at java.util.concurrent.Executors 
>>> $RunnableAdapter.call(Executors.java:441)
>>>      at
>>> java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
>>>      at java.util.concurrent.FutureTask.run(FutureTask.java:138)
>>>      at
>>>
>>> java.util.concurrent.ThreadPoolExecutor 
>>> $Worker.runTask(ThreadPoolExecutor.java:885)
>>>      at
>>>
>>> java.util.concurrent.ThreadPoolExecutor 
>>> $Worker.run(ThreadPoolExecutor.java:907)
>>>      at java.lang.Thread.run(Thread.java:619)
>>> Caused by: java.lang.IllegalArgumentException: attempt to access a  
>>> deleted
>>> document
>>>      at
>>> org.apache.lucene.index.SegmentReader.document(SegmentReader.java: 
>>> 657)
>>>      at
>>>
>>> org 
>>> .apache 
>>> .lucene.index.MultiSegmentReader.document(MultiSegmentReader.java: 
>>> 257)
>>>      at
>>> org.apache.lucene.index.IndexReader.document(IndexReader.java:525)
>>> This is on master index .
>>>
>>>
>>>
>>> Any help is appreciated
>>>
>>> Thanks.
>>>
>>> --
>>> View this message in context:
>>> http://www.nabble.com/Caused-by%3A-java.io.IOException%3A-read-past-EOF-on-Slave-tp19682684p19682684.html
>>> Sent from the Lucene - Java Users mailing list archive at  
>>> Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> -- 
> Marcelo F. Ochoa
> http://marceloochoa.blogspot.com/
> http://marcelo.ochoa.googlepages.com/home
> ______________
> Do you Know DBPrism? Look @ DB Prism's Web Site
> http://www.dbprism.com.ar/index.html
> More info?
> Chapter 17 of the book "Programming the Oracle Database using Java &
> Web Services"
> http://www.amazon.com/gp/product/1555583296/
> Chapter 21 of the book "Professional XML Databases" - Wrox Press
> http://www.amazon.com/gp/product/1861003587/
> Chapter 8 of the book "Oracle & Open Source" - O'Reilly
> http://www.oreilly.com/catalog/oracleopen/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 17:00:17 2008
Return-Path: <java-user-return-36394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29523 invoked from network); 26 Sep 2008 17:00:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 17:00:17 -0000
Received: (qmail 68914 invoked by uid 500); 26 Sep 2008 17:00:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68872 invoked by uid 500); 26 Sep 2008 17:00:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68861 invoked by uid 99); 26 Sep 2008 17:00:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 10:00:08 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.234] (HELO wr-out-0506.google.com) (64.233.184.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 16:59:08 +0000
Received: by wr-out-0506.google.com with SMTP id c30so436848wra.21
        for <java-user@lucene.apache.org>; Fri, 26 Sep 2008 09:59:23 -0700 (PDT)
Received: by 10.90.52.1 with SMTP id z1mr1703402agz.92.1222448363346;
        Fri, 26 Sep 2008 09:59:23 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id 6sm2934448agb.22.2008.09.26.09.59.22
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 26 Sep 2008 09:59:22 -0700 (PDT)
Message-Id: <E93A8494-6F9E-46D4-9FE9-0EC4FB625FD4@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <19691799.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Caused by: java.io.IOException: read past EOF on Slave
Date: Fri, 26 Sep 2008 12:59:21 -0400
References: <19682684.post@talk.nabble.com> <BF8A2B92-035C-483A-B955-447BDB0C1C89@mikemccandless.com> <19691799.post@talk.nabble.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Which version of Lucene is this?  Looks like 2.3.x -- what's the x?

Can you run your app server with assertions enabled for  
org.apache.lucene.*?  It may catch something sooner.

Can you try running CheckIndex after the snapshot is produced, just to  
see if there is any corruption?

Your first exception (on the slave) seems like the *.fdx file of that  
one segment is somehow truncated, or, you are passing an out-of-bounds  
document number to IndexReader.document.

Your 2nd one (on the master) looks like an invalid (deleted) document  
number is being passed to IndexReader.document.

What is the context of these IndexReader.document(...) calls?  How are  
you getting the doc numbers that you're passing to them?  In both  
cases, an invalid doc number would explain your exception.  Are you  
doing any search caching, where you cache hits and then much later try  
to load the documents for each hit, or, something?

More questions below...

rahul_k123 wrote:

>
> The following are steps..
>
> 1.We do indexing every 5 minutes on master and when indexing is done a
> snapshot is taken

The IndexWriter is definitely closed before the snapshot is taken?

Are you creating a new index, or, just adding to an existing one?

> 2. On slave we have a cronjob which runs snappuller every 3 minutes  
> to check
> for new snapshots and installs it on slave if it finds new one

Sounds OK.  Does this entail a restart of the reader after the  
snapshot is installed?

> (I am not using SOLR for indexing )
>
>
> The file system is ext3

OK.

Mike


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 17:02:16 2008
Return-Path: <java-user-return-36395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30816 invoked from network); 26 Sep 2008 17:02:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 17:02:15 -0000
Received: (qmail 71917 invoked by uid 500); 26 Sep 2008 17:02:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71881 invoked by uid 500); 26 Sep 2008 17:02:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71870 invoked by uid 99); 26 Sep 2008 17:02:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 10:02:06 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.231] (HELO wr-out-0506.google.com) (64.233.184.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 17:01:05 +0000
Received: by wr-out-0506.google.com with SMTP id c30so437153wra.21
        for <java-user@lucene.apache.org>; Fri, 26 Sep 2008 10:01:20 -0700 (PDT)
Received: by 10.90.30.2 with SMTP id d2mr1687110agd.118.1222448480080;
        Fri, 26 Sep 2008 10:01:20 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id 5sm2943140agc.29.2008.09.26.10.01.18
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 26 Sep 2008 10:01:18 -0700 (PDT)
Message-Id: <9CA73DAA-A696-4528-8A6D-643C574538A4@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <85d3c3b60809260920x5ed78aerdefa89e25a5b8b59@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: How to restore corrupted index
Date: Fri, 26 Sep 2008 13:01:17 -0400
References: <0CD49D04A7B5534CA56257ADD9719EF7036AA1A3@indiaserv01.asite.asitehq.com> <0B7F1A83-825C-406B-AAE6-23028E777DC0@mikemccandless.com> <85d3c3b60809260858i66fb8debw19d65716f013a8ec@mail.gmail.com> <848FBF6C-4E8C-40FF-8A72-623778324F13@mikemccandless.com> <85d3c3b60809260920x5ed78aerdefa89e25a5b8b59@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


OK it does sound like you're primarily protecting against an  
untrustworthy storage system (or, maybe, Lucene bugs ;).

Probably the best option is to do this fully externally, ie, compute  
digest yourself, store it away in a separate Lucene field, then test  
the digest on loading the field?

Mike

Jason Rutherglen wrote:

> I'm thinking more in terms of CRC32 checks performed on database
> pages.  Is there a way to incorporate this technique in a way that
> does not affect performance too much in Lucene?  The question is, when
> is the CRC32 check is performed, and to which files is it applied if
> any?
>
> On Fri, Sep 26, 2008 at 12:13 PM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>>
>> Corrupted data in what sense?
>>
>> EG if you don't trust your IO system to store data properly?
>>
>> Mike
>>
>> Jason Rutherglen wrote:
>>
>>> Mike,
>>>
>>> As part of my goal of trying to use Lucene as primary storage
>>> mechanism (perhaps not the best idea), what do you think is the best
>>> way to handle storing data in Lucene and preventing corrupted data  
>>> the
>>> way something like an SQL database handles corrupted data?  Or is
>>> there simply no good way to do this?
>>>
>>> Jason
>>>
>>> On Fri, Sep 26, 2008 at 10:30 AM, Michael McCandless
>>> <lucene@mikemccandless.com> wrote:
>>>>
>>>> It's perfectly fine to have a reader open on an index, while an
>>>> IndexWriter
>>>> runs optimize.
>>>>
>>>> Which version of Lucene are you using?  And which OS & filesystem?
>>>>
>>>> Mike
>>>>
>>>> Chaula Ganatra wrote:
>>>>
>>>>> It was the Reader on same index, which I did not close so gave  
>>>>> exception
>>>>> in writer.optimise()
>>>>>
>>>>> Chaula
>>>>>
>>>>> -----Original Message-----
>>>>> From: Michael McCandless [mailto:lucene@mikemccandless.com]
>>>>> Sent: 26 September, 2008 7:17 PM
>>>>> To: java-user@lucene.apache.org
>>>>> Subject: Re: How to restore corrupted index
>>>>>
>>>>>
>>>>> Can you post the full stack trace in both cases?
>>>>>
>>>>> Mike
>>>>>
>>>>> Chaula Ganatra wrote:
>>>>>
>>>>>> I found one case when such multiple files are remained, when we  
>>>>>> call
>>>>>> writer.optimise() it throws exception and multiple files  
>>>>>> remained in
>>>>>> index dir.
>>>>>>
>>>>>> After such multiple files, when we add document in index by  
>>>>>> calling
>>>>>> writer.addDocument it throws java.lang.NegativeArraySizeException
>>>>>>
>>>>>> Regards,
>>>>>> Chaula
>>>>>>
>>>>>> -----Original Message-----
>>>>>> From: Grant Ingersoll [mailto:gsingers@apache.org]
>>>>>> Sent: 26 September, 2008 6:02 PM
>>>>>> To: java-user@lucene.apache.org
>>>>>> Subject: Re: How to restore corrupted index
>>>>>>
>>>>>> There is the CheckIndex tool included in the distribution for
>>>>>> checking/
>>>>>> fixing bad indexes, but it can't solve everything.
>>>>>>
>>>>>> The bigger question is why it is happening to begin with.  Can  
>>>>>> you
>>>>>> describe your indexing process?  How do you know the index is  
>>>>>> actually
>>>>>> corrupted?  Are you seeing exceptions when opening it?
>>>>>>
>>>>>> -Grant
>>>>>> On Sep 26, 2008, at 6:49 AM, Chaula Ganatra wrote:
>>>>>>
>>>>>>> We have an application in which index will be updated  
>>>>>>> frequently.
>>>>>>>
>>>>>>> During development time, found that index files gets  
>>>>>>> corrupted, i.e.
>>>>>>> more than one  cfs files,some other extension files e.g. frq,  
>>>>>>> fnm,
>>>>>>> nrm
>>>>>>>
>>>>>>> Remains there in index directory.
>>>>>>>
>>>>>>> Is there any way that such issue does not occur at all or if it
>>>>>>> happens
>>>>>>> we can recover the index data again?
>>>>>>>
>>>>>>> It would be a great help, if some one can.
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> Regards,
>>>>>>>
>>>>>>> Chaula
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>
>>>>>> --------------------------
>>>>>> Grant Ingersoll
>>>>>> http://www.lucidimagination.com
>>>>>>
>>>>>> Lucene Helpful Hints:
>>>>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>>>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 17:26:09 2008
Return-Path: <java-user-return-36396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49612 invoked from network); 26 Sep 2008 17:26:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 17:26:09 -0000
Received: (qmail 3980 invoked by uid 500); 26 Sep 2008 17:26:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3732 invoked by uid 500); 26 Sep 2008 17:25:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3694 invoked by uid 99); 26 Sep 2008 17:25:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 10:25:59 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 17:25:00 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id B0E8571C674; Fri, 26 Sep 2008 10:25:03 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id ABE0771C673;
	Fri, 26 Sep 2008 10:25:03 -0700 (PDT)
Date: Fri, 26 Sep 2008 10:25:03 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: general@lucene.apache.org
Subject: ANNOUNCE: Application Period Opens for Travel Assistance to ApacheCon
 US 2008
Message-ID: <Pine.LNX.4.62.0809261014001.13188@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org


NOTE: This is a cross posted announcement to all Lucene sub-projects, 
please confine any replies to general@lucene.

-------------

The Travel Assistance Committee is taking in applications for those wanting
to attend ApacheCon US 2008 between the 3rd and 7th November 2008 in New
Orleans.

The Travel Assistance Committee is looking for people who would like to be
able to attend ApacheCon US 2008 who need some financial support in order to
get there. There are VERY few places available and the criteria is high,
that aside applications are open to all open source developers who feel that
their attendance would benefit themselves, their project(s), the ASF and
open source in general.

Financial assistance is available for flights, accomodation and entrance
fees either in full or in part, depending on circumstances. It is intended
that all our ApacheCon events are covered, so it may be prudent for those in
Europe and or Asia to wait until an event closer to them comes up - you are
all welcome to apply for ApacheCon US of course, but there must be
compelling reasons for you to attend an event further away that your home
location for your application to be considered above those closer to the
event location.

More information can be found on the main Apache website at
http://www.apache.org/travel/index.html - where you will also find a link to
the application form and details for submitting.

Time is very tight for this event, so applications are open now and will end
on the 2nd October 2008 - to give enough time for travel arrangements to be
made.

Good luck to all those that will apply.

Regards,

The Travel Assistance Committee

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 18:54:25 2008
Return-Path: <java-user-return-36397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17251 invoked from network); 26 Sep 2008 18:54:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 18:54:25 -0000
Received: (qmail 48189 invoked by uid 500); 26 Sep 2008 18:54:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48154 invoked by uid 500); 26 Sep 2008 18:54:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48142 invoked by uid 99); 26 Sep 2008 18:54:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 11:54:14 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=SPF_PASS,URIBL_GREY,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of marcelo.ochoa@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 18:53:11 +0000
Received: by gxk6 with SMTP id 6so8855324gxk.5
        for <java-user@lucene.apache.org>; Fri, 26 Sep 2008 11:53:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=M+vXrCIUSieazDWm2RVZb6lz1/c6IWHHCcK94ZQsNjI=;
        b=BHvXFCJN11e0aTvOkJsTbvF5dFLPXNMfinu4glBuW0eSY8l0nfB6VQbwPTJvjkZEA4
         /GpyaqpJWcXWmYIRmtDaQrx63gWQ/x9w3T2H2VOcGap/1s9YuJ9+73pRLjnuAlzYPYwi
         gz89Li4IwxgDYCe1zaRp2HJYctLmTW1PnOtiM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=Nl1OBUK+e1HftnL477nYLH0sjwopa7SiyQcXtfCTSajRp2664xm1zfcdAAhMZtdAKj
         eLncjghnPLN6faegt1dkwKvOynAsHwpm2PC8Hs/UD8+6LqQJ4QLJ5QIQSXZQuyrBFc/J
         +r/2WDwfxk/Ueg3pWWkL9ahghU+Gjv5Y9RjvQ=
Received: by 10.100.216.11 with SMTP id o11mr1691159ang.8.1222455224444;
        Fri, 26 Sep 2008 11:53:44 -0700 (PDT)
Received: by 10.100.8.18 with HTTP; Fri, 26 Sep 2008 11:53:44 -0700 (PDT)
Message-ID: <126142c0809261153l15289c7fo919acf190ff6ab1e@mail.gmail.com>
Date: Fri, 26 Sep 2008 15:53:44 -0300
From: "Marcelo Ochoa" <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Caused by: java.io.IOException: read past EOF on Slave
In-Reply-To: <46392609-A138-4546-8DBC-7839801E5280@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <19682684.post@talk.nabble.com>
	 <BF8A2B92-035C-483A-B955-447BDB0C1C89@mikemccandless.com>
	 <126142c0809260844x3551cfaaj21863356c5a98ba3@mail.gmail.com>
	 <46392609-A138-4546-8DBC-7839801E5280@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Mike:
  Actually there is more issues at first glance with OJVMDirectory integration.
  Note this, I am creating an index with two simple documents:
INFO: Performing: SELECT /*+ DYNAMIC_SAMPLING(0) RULE NOCACHE(T1) */
T1.rowid,F1,extractValue(F2,'/emp/name/text()')
"name",extractValue(F2,'/emp/@id') "id" FROM LUCENE.T1 for update nowait
Sep 26, 2008 3:44:16 PM org.apache.lucene.indexer.TableIndexer index
FINE: Document<stored/uncompressed,indexed<rowid:AAARLCAAEAAAm2QAAA>
indexed,tokenized<F1:001> indexed,tokenized<name:ravi>
indexed,tokenized<id:01>>
Sep 26, 2008 3:44:16 PM org.apache.lucene.indexer.TableIndexer index
FINE: Document<stored/uncompressed,indexed<rowid:AAARLCAAEAAAm2QAAB>
indexed,tokenized<F1:003> indexed,tokenized<name:murthy>
indexed,tokenized<id:03>>
IW 10 [Root Thread]:   flush: segment=_0 docStoreSegment=_0
docStoreOffset=0 flushDocs=true flushDeletes=true flushDocStores=false
numDocs=2
numBufDelTerms=0
IW 10 [Root Thread]:   index before flush
IW 10 [Root Thread]: DW: flush postings as segment _0 numDocs=2
IW 10 [Root Thread]: DW:   oldRAMSize=111616 newFlushedSize=166
docs/MB=12,633.446 new/old=0.149%
IFD [Root Thread]: now checkpoint "segments_1" [1 segments ; isCommit = false]
IW 10 [Root Thread]: LMP: findMerges: 1 segments
IW 10 [Root Thread]: LMP:   level -1.0 to 2.2741578: 1 segments
IW 10 [Root Thread]: CMS: now merge
IW 10 [Root Thread]: CMS:   index: _0:C2->_0
IW 10 [Root Thread]: CMS:   no more merges pending; now return
IW 10 [Root Thread]: now flush at close
IW 10 [Root Thread]:   flush: segment=null docStoreSegment=_0
docStoreOffset=2 flushDocs=false flushDeletes=true flushDocStores=true
numDocs=0 numBufDelTerms=0
IW 10 [Root Thread]:   index before flush _0:C2->_0
IW 10 [Root Thread]:   flush shared docStore segment _0
IW 10 [Root Thread]: DW: closeDocStore: 2 files to flush to segment _0 numDocs=2
IW 10 [Root Thread]: CMS: now merge
IW 10 [Root Thread]: CMS:   index: _0:C2->_0
IW 10 [Root Thread]: CMS:   no more merges pending; now return
IW 10 [Root Thread]: now call final commit()
IW 10 [Root Thread]: startCommit(): start sizeInBytes=0
IW 10 [Root Thread]: startCommit index=_0:C2->_0 changeCount=2
IW 10 [Root Thread]: now sync _0.fnm
IW 10 [Root Thread]: now sync _0.frq
IW 10 [Root Thread]: now sync _0.prx
IW 10 [Root Thread]: now sync _0.tis
IW 10 [Root Thread]: now sync _0.tii
IW 10 [Root Thread]: now sync _0.nrm
IW 10 [Root Thread]: now sync _0.fdx
IW 10 [Root Thread]: now sync _0.fdt
IW 10 [Root Thread]: done all syncs
IW 10 [Root Thread]: commit: pendingCommit != null
IFD [Root Thread]: now checkpoint "segments_2" [1 segments ; isCommit = true]
IFD [Root Thread]: deleteCommits: now decRef commit "segments_1"
IFD [Root Thread]: delete "segments_1"
IW 10 [Root Thread]: commit: done
IW 10 [Root Thread]: at close: _0:C2->_0
Sep 26, 2008 3:44:16 PM org.apache.lucene.indexer.LuceneDomainIndex
ODCIIndexCreate
FINER: RETURN 0

Index created.

  And when I am trying to read the index I got:
INFO: Analyzer: org.apache.lucene.analysis.WhitespaceAnalyzer@f2164127
Sep 26, 2008 3:44:48 PM org.apache.lucene.indexer.LuceneDomainIndex ODCIStart
INFO: qryStr: DESC(name:ravi)
Sep 26, 2008 3:44:48 PM org.apache.lucene.indexer.LuceneDomainIndex ODCIStart
INFO: storing cachingFilter: -1378376940 and searcher: 781713581
qryStr: DESC(name:ravi)
Sep 26, 2008 3:44:48 PM org.apache.lucene.indexer.LuceneDomainIndex getSort
INFO: using sort: <score>,<doc>
Exception in thread "Root Thread" java.lang.IndexOutOfBoundsException:
Index: 6, Size: 4
        at java.util.ArrayList.RangeCheck(ArrayList.java)
        at java.util.ArrayList.get(ArrayList.java)
        at org.apache.lucene.index.FieldInfos.fieldInfo(FieldInfos.java)
        at org.apache.lucene.index.FieldInfos.fieldName(FieldInfos.java)
        at org.apache.lucene.index.TermBuffer.read(TermBuffer.java)
        at org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java)
        at org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java)
        at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java)
        at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java)
        at org.apache.lucene.index.SegmentReader.docFreq(SegmentReader.java)
        at org.apache.lucene.search.IndexSearcher.docFreq(IndexSearcher.java)
        at org.apache.lucene.search.Similarity.idf(Similarity.java)
        at org.apache.lucene.search.TermQuery$TermWeight.<init>(TermQuery.java)
        at org.apache.lucene.search.TermQuery.createWeight(TermQuery.java)
        at org.apache.lucene.search.Query.weight(Query.java)
        at org.apache.lucene.search.Hits.<init>(Hits.java:85)
        at org.apache.lucene.search.Searcher.search(Searcher.java)
        at org.apache.lucene.indexer.LuceneDomainIndex.ODCIStart(LuceneDomainIndex.java)

  Which definetly means that something is not well saved at OJVM
directory BLOB storage :(
  This are my files:
SQL> select file_size,name from it1$t;

 FILE_SIZE NAME
---------- ------------------------------
        10 parameters
         1 updateCount
        28 segments_1
        20 segments.gen
         8 _0.frq
         8 _0.prx
       103 _0.tis
        35 _0.tii
        12 _0.nrm
        22 _0.fnm
        48 _0.fdt
        20 _0.fdx
        62 segments_2
  I'll add some debugging information at my classes which save/load
buffers to see how many calls and which arguments are used.
  Marcelo.

On Fri, Sep 26, 2008 at 1:41 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
>
> This one looks spooky!
>
> Is it easily repeated?  If you could print out which 2 terms you had tried
> to delete, and then zip up the index just before deleting those docs (after
> closing the writer) and send to me, I can try to understand what's wrong
> with the index.  It looks as if the *.tis file for one of the segments is
> truncated.
>
> If you capture the series of add/update/delete documents, can you get a
> standalone Java test to show this?
>
> Does this test create an entirely new index?
>
> We did change the index format in 2.4 to use "true" UTF8 encoding for all
> text content; not sure that this applies here (to BufferedIndexReader it's
> all bytes) but it may.
>
> BufferedIndexReader in general can do random IO, especially when reading the
> term dict file (*.tis), when you
>
> Mike
>
> Marcelo Ochoa wrote:
>
>> Michael:
>>  I just start testing 2.4rc2 running inside OJVM.
>> I found a similar stack trace during indexing:
>> IW 3 [Root Thread]:   flush: segment=_3 docStoreSegment=_3
>> docStoreOffset=0 flushDocs=true flushDeletes=true flushDocStores=false
>> numDocs=2 numBufDelTerms=2
>> IW 3 [Root Thread]:   index before flush _1:C2->_1 _2:C2->_2
>> IW 3 [Root Thread]: DW: flush postings as segment _3 numDocs=2
>> IW 3 [Root Thread]: DW:   oldRAMSize=111616 newFlushedSize=264
>> docs/MB=7,943.758 new/old=0.237%
>> IW 3 [Root Thread]: DW: apply 2 buffered deleted terms and 0 deleted
>> docIDs and 0 deleted queries on 3 segments.
>> IW 3 [Root Thread]: hit exception flushing deletes
>> Exception in thread "Root Thread" java.io.IOException: read past EOF
>>       at
>> org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java)
>>       at
>> org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.java)
>>       at
>> org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.java)
>>       at org.apache.lucene.index.TermBuffer.read(TermBuffer.java)
>>       at
>> org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java)
>>       at
>> org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java)
>>       at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java)
>>       at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java)
>>       at
>> org.apache.lucene.index.SegmentTermDocs.seek(SegmentTermDocs.java)
>>       at org.apache.lucene.index.IndexReader.termDocs(IndexReader.java)
>>       at
>> org.apache.lucene.index.DocumentsWriter.applyDeletes(DocumentsWriter.java)
>>       at
>> org.apache.lucene.index.DocumentsWriter.applyDeletes(DocumentsWriter.java:918)
>>       at
>> org.apache.lucene.index.IndexWriter.applyDeletes(IndexWriter.java)
>>       at org.apache.lucene.index.IndexWriter.doFlush(IndexWriter.java)
>>       at org.apache.lucene.index.IndexWriter.flush(IndexWriter.java)
>>       at org.apache.lucene.index.IndexWriter.flush(IndexWriter.java)
>>       at
>> org.apache.lucene.indexer.LuceneDomainIndex.sync(LuceneDomainIndex.java:1308)
>>
>>  I'll reinstall with a full debug info to see all line numbers in
>> Lucene java code.
>>  Is there a list of semantic changes at BufferedIndeInput code?
>>  I mean it do sequential or random writes for example.
>>  But anyway, I just compiled with latest code and ran my test suites,
>> I'll investigate the problem a bit more.
>>  Best regards, Marcelo.
>>
>> On Fri, Sep 26, 2008 at 7:32 AM, Michael McCandless
>> <lucene@mikemccandless.com> wrote:
>>>
>>> Can you describe the sequence of steps that your replication process goes
>>> through?
>>>
>>> Also, which filesystem is the index being accessed through?
>>>
>>> Mike
>>>
>>> rahul_k123 wrote:
>>>
>>>>
>>>> First of all, thanks to all the people who helped me in getting the
>>>> lucene
>>>> replication setup working and right now its live in our production :-)
>>>>
>>>> Everything working fine, except that i am seeing some exceptions on
>>>> slaves.
>>>>
>>>> The following is the one which is occuring more often on slaves
>>>>
>>>> at
>>>> java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
>>>>     at
>>>> java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
>>>>     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
>>>>     at
>>>>
>>>>
>>>> java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:885)
>>>>     at
>>>>
>>>>
>>>> java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
>>>>     at java.lang.Thread.run(Thread.java:619)
>>>> Caused by: com.IndexingException: [SYSTEM_ERROR] Cannot access index
>>>> [data_dir/index]: [read past EOF]
>>>>     at
>>>>
>>>>
>>>> com.lucene.LuceneSearchService.getSearchResults(LuceneSearchService.java:964)
>>>>     ... 12 more
>>>> Caused by: java.io.IOException: read past EOF
>>>>     at
>>>>
>>>>
>>>> org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java:146)
>>>>     at
>>>>
>>>>
>>>> org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.java:38)
>>>>     at org.apache.lucene.store.IndexInput.readInt(IndexInput.java:66)
>>>>     at org.apache.lucene.store.IndexInput.readLong(IndexInput.java:89)
>>>>     at org.apache.lucene.index.FieldsReader.doc(FieldsReader.java:147)
>>>>     at
>>>> org.apache.lucene.index.SegmentReader.document(SegmentReader.java:659)
>>>>     at
>>>>
>>>>
>>>> org.apache.lucene.index.MultiSegmentReader.document(MultiSegmentReader.java:257)
>>>>     at
>>>> org.apache.lucene.index.IndexReader.document(IndexReader.java:525)
>>>>
>>>> and the second one is
>>>>
>>>> at
>>>> java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
>>>>     at
>>>> java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
>>>>     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
>>>>     at
>>>>
>>>>
>>>> java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:885)
>>>>     at
>>>>
>>>>
>>>> java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
>>>>     at java.lang.Thread.run(Thread.java:619)
>>>> Caused by: java.lang.IllegalArgumentException: attempt to access a
>>>> deleted
>>>> document
>>>>     at
>>>> org.apache.lucene.index.SegmentReader.document(SegmentReader.java:657)
>>>>     at
>>>>
>>>>
>>>> org.apache.lucene.index.MultiSegmentReader.document(MultiSegmentReader.java:257)
>>>>     at
>>>> org.apache.lucene.index.IndexReader.document(IndexReader.java:525)
>>>> This is on master index .
>>>>
>>>>
>>>>
>>>> Any help is appreciated
>>>>
>>>> Thanks.
>>>>
>>>> --
>>>> View this message in context:
>>>>
>>>> http://www.nabble.com/Caused-by%3A-java.io.IOException%3A-read-past-EOF-on-Slave-tp19682684p19682684.html
>>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>>
>> --
>> Marcelo F. Ochoa
>> http://marceloochoa.blogspot.com/
>> http://marcelo.ochoa.googlepages.com/home
>> ______________
>> Do you Know DBPrism? Look @ DB Prism's Web Site
>> http://www.dbprism.com.ar/index.html
>> More info?
>> Chapter 17 of the book "Programming the Oracle Database using Java &
>> Web Services"
>> http://www.amazon.com/gp/product/1555583296/
>> Chapter 21 of the book "Professional XML Databases" - Wrox Press
>> http://www.amazon.com/gp/product/1861003587/
>> Chapter 8 of the book "Oracle & Open Source" - O'Reilly
>> http://www.oreilly.com/catalog/oracleopen/
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
Marcelo F. Ochoa
http://marceloochoa.blogspot.com/
http://marcelo.ochoa.googlepages.com/home
______________
Want to integrate Lucene and Oracle?
http://marceloochoa.blogspot.com/2007/09/running-lucene-inside-your-oracle-jvm.html
Is Oracle 11g REST ready?
http://marceloochoa.blogspot.com/2008/02/is-oracle-11g-rest-ready.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 18:55:16 2008
Return-Path: <java-user-return-36398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17893 invoked from network); 26 Sep 2008 18:55:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 18:55:16 -0000
Received: (qmail 51235 invoked by uid 500); 26 Sep 2008 18:55:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50772 invoked by uid 500); 26 Sep 2008 18:55:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50734 invoked by uid 99); 26 Sep 2008 18:55:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 11:55:01 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a10.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 18:53:58 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a10.g.dreamhost.com (Postfix) with ESMTP id 1F8BD1615BB;
	Fri, 26 Sep 2008 11:53:59 -0700 (PDT)
Message-Id: <A841F32C-DC13-4BDE-8168-E6667A0E26BC@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org, solr-user@lucene.apache.org,
	mahout-user@lucene.apache.org, tika-dev@incubator.apache.org,
	general@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: ApacheCon US promo
Date: Fri, 26 Sep 2008 14:53:59 -0400
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Cross-posting...

Just wanted to let everyone know that there will be a number of Lucene/ 
Solr/Mahout/Tika related talks, training sessions, and Birds of a  
Feather (BOF) gatherings at ApacheCon New Orleans this fall.

Details:
When: November 3-7
Where:  Sheraton, New Orleans, USA
URL: http://us.apachecon.com/c/acus2008/

Lucene:

Advanced Indexing Techniques by Michael Busch: http://us.apachecon.com/c/acus2008/sessions/7

Lucene Boot Camp (2 day hands-on training by me): http://us.apachecon.com/c/acus2008/sessions/69

Solr:

Solr out of the Box by Chris Hostetter: http://us.apachecon.com/c/acus2008/sessions/9

Beyond the Box by Hoss: http://us.apachecon.com/c/acus2008/sessions/10

Solr Boot Camp (1 day hands-on training by Erik Hatcher): http://us.apachecon.com/c/acus2008/sessions/91

Mahout:

Intro to Mahout and Machine Learning (by me): http://us.apachecon.com/c/acus2008/sessions/11

Tika:

Content Analysis for ECM with Apache Tika by Paolo Mottadelli : http://us.apachecon.com/c/acus2008/sessions/12


There's also one more Lucene session that is TBD, but it will be on  
that same Wednesday as everything else.  Chances are it will be an  
intro to Lucene type talk.


BOFs:  http://wiki.apache.org/apachecon/BirdsOfaFeatherUs08


Cheers,
Grant

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 19:56:19 2008
Return-Path: <java-user-return-36399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54777 invoked from network); 26 Sep 2008 19:56:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 19:56:18 -0000
Received: (qmail 32030 invoked by uid 500); 26 Sep 2008 19:56:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31629 invoked by uid 500); 26 Sep 2008 19:56:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31613 invoked by uid 99); 26 Sep 2008 19:56:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 12:56:09 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 19:55:09 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KjJPj-00070f-2G
	for java-user@lucene.apache.org; Fri, 26 Sep 2008 12:55:43 -0700
Message-ID: <19695313.post@talk.nabble.com>
Date: Fri, 26 Sep 2008 12:55:43 -0700 (PDT)
From: student_t <cchou@cscinfo.com>
To: java-user@lucene.apache.org
Subject: Please help to interpret Lucene Boost results
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: cchou@cscinfo.com
X-Virus-Checked: Checked by ClamAV on apache.org


I am baffled by the results of the following queries. Can it be something to
do with the boosting factor? All of these queries are performed in the same
environment with the same crawled index/data. 

A. query1 = +(content:(Pepsi))                              resulted in 228
hits. 
B. query2 = +(content:(Pepsi) ) +(host:(ca)^10 )     resulted in 398 hits. 
C. query3 = +(host:(ca)^10 )                                resulted in 212
hits. 

Two questions (strictly just one): 
1. query1 of any content contains Pepsi yielded 228 hits, how could a more
limiting query2 (give me all docs that have Pepsi in it with a domain of ca)
yield more hits (398)? 
2. Since there are 212 hits of Canadian domains, how can query2 return 398
hits? 

Thanks for any pointers! 
Cheers, 
student_t 


-- 
View this message in context: http://www.nabble.com/Please-help-to-interpret-Lucene-Boost-results-tp19695313p19695313.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 20:39:42 2008
Return-Path: <java-user-return-36400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94844 invoked from network); 26 Sep 2008 20:39:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 20:39:42 -0000
Received: (qmail 22684 invoked by uid 500); 26 Sep 2008 20:39:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22657 invoked by uid 500); 26 Sep 2008 20:39:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22646 invoked by uid 99); 26 Sep 2008 20:39:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 13:39:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.18.44 as permitted sender)
Received: from [80.67.18.44] (HELO smtprelay06.ispgateway.de) (80.67.18.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 20:38:30 +0000
Received: from [91.37.249.247] (helo=p5b25f9f7.dip.t-dialin.net)
	by smtprelay06.ispgateway.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.68)
	(envelope-from <lucenelist2007@danielnaber.de>)
	id 1KjK5e-0004ph-GS
	for java-user@lucene.apache.org; Fri, 26 Sep 2008 22:39:02 +0200
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Please help to interpret Lucene Boost results
Date: Fri, 26 Sep 2008 22:39:39 +0200
User-Agent: KMail/1.9.6 (enterprise 20070904.708012)
References: <19695313.post@talk.nabble.com>
In-Reply-To: <19695313.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200809262239.39889@danielnaber.de>
X-Df-Sender: 695637
X-Virus-Checked: Checked by ClamAV on apache.org

On Freitag, 26. September 2008, student_t wrote:

> A. query1 = +(content:(Pepsi))

I guess this is the string input you use for your queries, isn't it? It's 
more helpful to look at the toString() output of the parsed query to see 
how Lucene interpreted your input.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 20:41:56 2008
Return-Path: <java-user-return-36401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97064 invoked from network); 26 Sep 2008 20:41:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 20:41:56 -0000
Received: (qmail 27047 invoked by uid 500); 26 Sep 2008 20:41:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26773 invoked by uid 500); 26 Sep 2008 20:41:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26762 invoked by uid 99); 26 Sep 2008 20:41:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 13:41:47 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.235 as permitted sender)
Received: from [209.85.198.235] (HELO rv-out-0506.google.com) (209.85.198.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 20:40:45 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1067524rvb.5
        for <java-user@lucene.apache.org>; Fri, 26 Sep 2008 13:41:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=hIStC1SNxO9MJg11ZezPFbX/A7mdXyRX5dpohqTMzOQ=;
        b=mqX9rprWPavAT4JsQGUe60cAsX2/w+XVj3zptaVbedHzyJQuEUrKF7k1ooQ2UsA2is
         CWkUEIiz81gd4RGB49c3QezE4BYX6Ds9pbw3H44mkiBnNJvxcysDXPiSzHpzjjbi213W
         YlYYCDjJLCeIrZrctikmQ0oCB+mihy/KeU9YY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=THo8Zh8gKZtdHG/CTnfSBeENmD4ZOCqaCoXGWe9BIdFy+lkkO/62F0zVJ01HwHAEbI
         3T8kMd2cGz1Uq4LUSWYqwF1dTuu56Cv+vY2kmUeBF1uhve2pqBn8sFwA9hrW46XTLOOY
         tn0hA0CKVeYXQjQURqgBNLuDJL1/LeL1O0CXw=
Received: by 10.140.148.3 with SMTP id v3mr988931rvd.57.1222461679774;
        Fri, 26 Sep 2008 13:41:19 -0700 (PDT)
Received: by 10.140.135.10 with HTTP; Fri, 26 Sep 2008 13:41:19 -0700 (PDT)
Message-ID: <359a92830809261341w36053e71s52217f9a286ecf43@mail.gmail.com>
Date: Fri, 26 Sep 2008 16:41:19 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Please help to interpret Lucene Boost results
In-Reply-To: <19695313.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16544_22739393.1222461679742"
References: <19695313.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_16544_22739393.1222461679742
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

That certainly doesn't look right. What analyzers are you using at index
and query time?

Two things that will help track down what's really happening:

1> query.toString() is your friend.
2> get a copy of the excellent Luke tool and have it do its explain magic on
your query. Watch that the analyzer you choose when querying is what you
expect....

If neither of those things sheds any light on the problem, let us know what
you find....

Best
Erick

On Fri, Sep 26, 2008 at 3:55 PM, student_t <cchou@cscinfo.com> wrote:

>
> I am baffled by the results of the following queries. Can it be something
> to
> do with the boosting factor? All of these queries are performed in the same
> environment with the same crawled index/data.
>
> A. query1 = +(content:(Pepsi))                              resulted in 228
> hits.
> B. query2 = +(content:(Pepsi) ) +(host:(ca)^10 )     resulted in 398 hits.
> C. query3 = +(host:(ca)^10 )                                resulted in 212
> hits.
>
> Two questions (strictly just one):
> 1. query1 of any content contains Pepsi yielded 228 hits, how could a more
> limiting query2 (give me all docs that have Pepsi in it with a domain of
> ca)
> yield more hits (398)?
> 2. Since there are 212 hits of Canadian domains, how can query2 return 398
> hits?
>
> Thanks for any pointers!
> Cheers,
> student_t
>
>
> --
> View this message in context:
> http://www.nabble.com/Please-help-to-interpret-Lucene-Boost-results-tp19695313p19695313.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_16544_22739393.1222461679742--

From java-user-return-36402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 22:35:39 2008
Return-Path: <java-user-return-36402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61317 invoked from network); 26 Sep 2008 22:35:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 22:35:39 -0000
Received: (qmail 36799 invoked by uid 500); 26 Sep 2008 22:35:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36769 invoked by uid 500); 26 Sep 2008 22:35:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36758 invoked by uid 99); 26 Sep 2008 22:35:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 15:35:29 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 22:34:29 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KjLtt-0004x6-I7
	for java-user@lucene.apache.org; Fri, 26 Sep 2008 15:35:01 -0700
Message-ID: <19697398.post@talk.nabble.com>
Date: Fri, 26 Sep 2008 15:35:01 -0700 (PDT)
From: rahul_k123 <vishnudeepak@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Caused by: java.io.IOException: read past EOF on Slave
In-Reply-To: <E93A8494-6F9E-46D4-9FE9-0EC4FB625FD4@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: vishnudeepak@gmail.com
References: <19682684.post@talk.nabble.com> <BF8A2B92-035C-483A-B955-447BDB0C1C89@mikemccandless.com> <19691799.post@talk.nabble.com> <E93A8494-6F9E-46D4-9FE9-0EC4FB625FD4@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I will try the other stuff and will let you know.

This is how we do the search ,

we will get the Hits in one call and we will make another call to get the
data from lucene.

My guess is when it gets the matching Hits it getting from master and when
it tries to retrieve the actual data its hitting the slave where it doesn't
have the updated data yet .

I will test this scenario and will let you know.

Some answers below too



Michael McCandless-2 wrote:
> 
> 
> Which version of Lucene is this?  Looks like 2.3.x -- what's the x?   
> 
> 2.3.1
> 
> Can you run your app server with assertions enabled for  
> org.apache.lucene.*?  It may catch something sooner.
> 
> 
> Can you try running CheckIndex after the snapshot is produced, just to  
> see if there is any corruption?
> 
> Your first exception (on the slave) seems like the *.fdx file of that  
> one segment is somehow truncated, or, you are passing an out-of-bounds  
> document number to IndexReader.document.
> 
> Your 2nd one (on the master) looks like an invalid (deleted) document  
> number is being passed to IndexReader.document.
> 
> What is the context of these IndexReader.document(...) calls?  How are  
> you getting the doc numbers that you're passing to them?  In both  
> cases, an invalid doc number would explain your exception.  Are you  
> doing any search caching, where you cache hits and then much later try  
> to load the documents for each hit, or, something?
> 
> More questions below...
> 
> rahul_k123 wrote:
> 
>>
>> The following are steps..
>>
>> 1.We do indexing every 5 minutes on master and when indexing is done a
>> snapshot is taken
> 
> The IndexWriter is definitely closed before the snapshot is taken?
> 
> Are you creating a new index, or, just adding to an existing one?  Adding
> to the existing one
> 
>> 2. On slave we have a cronjob which runs snappuller every 3 minutes  
>> to check
>> for new snapshots and installs it on slave if it finds new one
> 
> Sounds OK.  Does this entail a restart of the reader after the  
> snapshot is installed?   yes, before using reading we check
> indexreader.iscurrent()
> 
>> (I am not using SOLR for indexing )
>>
>>
>> The file system is ext3
> 
> OK.
> 
> Mike
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Caused-by%3A-java.io.IOException%3A-read-past-EOF-on-Slave-tp19682684p19697398.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 22:59:42 2008
Return-Path: <java-user-return-36403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77309 invoked from network); 26 Sep 2008 22:59:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 22:59:42 -0000
Received: (qmail 51792 invoked by uid 500); 26 Sep 2008 22:59:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51753 invoked by uid 500); 26 Sep 2008 22:59:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51742 invoked by uid 99); 26 Sep 2008 22:59:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 15:59:32 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 22:58:30 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KjMH9-0005e3-Og
	for java-user@lucene.apache.org; Fri, 26 Sep 2008 15:59:03 -0700
Message-ID: <19697619.post@talk.nabble.com>
Date: Fri, 26 Sep 2008 15:59:03 -0700 (PDT)
From: student_t <cchou@cscinfo.com>
To: java-user@lucene.apache.org
Subject: Re: Please help to interpret Lucene Boost results
In-Reply-To: <200809262239.39889@danielnaber.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: cchou@cscinfo.com
References: <19695313.post@talk.nabble.com> <200809262239.39889@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Dan,

Thanks for your suggestion. I will definitely check that out.

-student_t



Daniel Naber-10 wrote:
> 
> On Freitag, 26. September 2008, student_t wrote:
> 
>> A. query1 = +(content:(Pepsi))
> 
> I guess this is the string input you use for your queries, isn't it? It's 
> more helpful to look at the toString() output of the parsed query to see 
> how Lucene interpreted your input.
> 
> Regards
>  Daniel
> 
> -- 
> http://www.danielnaber.de
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Please-help-to-interpret-Lucene-Boost-results-tp19695313p19697619.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 26 23:01:38 2008
Return-Path: <java-user-return-36404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79424 invoked from network); 26 Sep 2008 23:01:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2008 23:01:38 -0000
Received: (qmail 56002 invoked by uid 500); 26 Sep 2008 23:01:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55967 invoked by uid 500); 26 Sep 2008 23:01:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55956 invoked by uid 99); 26 Sep 2008 23:01:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 16:01:29 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 23:00:29 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KjMG1-0005bJ-E6
	for java-user@lucene.apache.org; Fri, 26 Sep 2008 15:57:53 -0700
Message-ID: <19697605.post@talk.nabble.com>
Date: Fri, 26 Sep 2008 15:57:53 -0700 (PDT)
From: student_t <cchou@cscinfo.com>
To: java-user@lucene.apache.org
Subject: Re: Please help to interpret Lucene Boost results
In-Reply-To: <359a92830809261341w36053e71s52217f9a286ecf43@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: cchou@cscinfo.com
References: <19695313.post@talk.nabble.com> <359a92830809261341w36053e71s52217f9a286ecf43@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Eric,

Thanks a bunch for your pointers. I will need to find out the analyzers at
index and query time. But is it critical to have the same analyzers during
these two times?

I had tested with lucli from some of my local segment data and they appeared
working fine (i.e., their result sets are reasonable.)

Is Luke part of Lucene contrib? I recall there is a GUI that lets you view
the indices. Would you please elaborate?

Thanks again! 
student_t


Erick Erickson wrote:
> 
> That certainly doesn't look right. What analyzers are you using at index
> and query time?
> 
> Two things that will help track down what's really happening:
> 
> 1> query.toString() is your friend.
> 2> get a copy of the excellent Luke tool and have it do its explain magic
> on
> your query. Watch that the analyzer you choose when querying is what you
> expect....
> 
> If neither of those things sheds any light on the problem, let us know
> what
> you find....
> 
> Best
> Erick
> 
> On Fri, Sep 26, 2008 at 3:55 PM, student_t <cchou@cscinfo.com> wrote:
> 
>>
>> I am baffled by the results of the following queries. Can it be something
>> to
>> do with the boosting factor? All of these queries are performed in the
>> same
>> environment with the same crawled index/data.
>>
>> A. query1 = +(content:(Pepsi))                              resulted in
>> 228
>> hits.
>> B. query2 = +(content:(Pepsi) ) +(host:(ca)^10 )     resulted in 398
>> hits.
>> C. query3 = +(host:(ca)^10 )                                resulted in
>> 212
>> hits.
>>
>> Two questions (strictly just one):
>> 1. query1 of any content contains Pepsi yielded 228 hits, how could a
>> more
>> limiting query2 (give me all docs that have Pepsi in it with a domain of
>> ca)
>> yield more hits (398)?
>> 2. Since there are 212 hits of Canadian domains, how can query2 return
>> 398
>> hits?
>>
>> Thanks for any pointers!
>> Cheers,
>> student_t
>>
>>
>> --
>> View this message in context:
>> http://www.nabble.com/Please-help-to-interpret-Lucene-Boost-results-tp19695313p19695313.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Please-help-to-interpret-Lucene-Boost-results-tp19695313p19697605.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 27 00:44:58 2008
Return-Path: <java-user-return-36405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62919 invoked from network); 27 Sep 2008 00:44:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Sep 2008 00:44:58 -0000
Received: (qmail 24696 invoked by uid 500); 27 Sep 2008 00:44:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24657 invoked by uid 500); 27 Sep 2008 00:44:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24646 invoked by uid 99); 27 Sep 2008 00:44:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Sep 2008 17:44:48 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yeshuangming@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Sep 2008 00:43:49 +0000
Received: by gxk6 with SMTP id 6so9115246gxk.5
        for <java-user@lucene.apache.org>; Fri, 26 Sep 2008 17:44:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=vfBfljoHcPhSq+0yv6OkTEADCzQG9DjG60DwC1wqvvk=;
        b=D0++RENP0JJQihdoqShaix1CE/BEbXNvKyuBzgkmIe1svEHloRPru9vda1WZyz9gs8
         G5fTllVrWGdZ6uK7o38b2YI3E4FqfAB5NNX1zqu6r4oehoFag3t4ILCD78Y6PFtWjVdg
         L9eZjQzaTyiqBOyrmT3h8N3GtWj7z8bRZbRag=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=FN7cpN2Jfpy1iaOMT9lghH4c3BboUL1FoFDcRqhy/JE4UeOSXpQJkAtmPR1/k3WIbU
         OjPV3ITuUPtzQpx4OdQcSOga9qr1wRVLHzOoQwxKhu7ZZjxmGuruCQQ+qJeWprM+nhdi
         SXHD16MrGpn6+2J6boDHj0Qqazby9AGrdA9Ao=
Received: by 10.151.12.4 with SMTP id p4mr2983552ybi.183.1222476262725;
        Fri, 26 Sep 2008 17:44:22 -0700 (PDT)
Received: by 10.151.100.9 with HTTP; Fri, 26 Sep 2008 17:44:22 -0700 (PDT)
Message-ID: <9233ccac0809261744w1c65c704uc37c667757cbf7ce@mail.gmail.com>
Date: Sat, 27 Sep 2008 08:44:22 +0800
From: "=?UTF-8?B?5Y+25Y+M5piO?=" <yeshuangming@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search warmup from Tomcat
In-Reply-To: <20080926142259.GI626@stud.ntnu.no>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14563_8811060.1222476262721"
References: <034d01c91fe2$00630890$04000100@sv.us.sonicwall.com>
	 <20080926142259.GI626@stud.ntnu.no>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14563_8811060.1222476262721
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

SSBteSBvcGluaW9uLgpTZXQgdXAgdHdvIEluZGV4U2VhcmNoZXIsIHNheSAjMSBjb250YWluIHRo
ZSBvbGQgaW5kZXggZGF0YSBmb3IgcXVlcnkgd2hlbgojMiBpcyB1cGRhdGluZy4gYW5kCnR1cm4g
cXVlcnkgdG8gIzIgd2hlcmUgdXBkYXRpbmcgaXMgY29tcGxldGVkLgoKMjAwOC85LzI2IEFzYmrD
uHJuIEEuIEZlbGxpbmdoYXVnIDxhc2Jqb3JuQGZlbGxpbmdoYXVnLmNvbT4KCj4gR2FuZXNoOgo+
ID4gSGVsbG8gYWxsLAo+ID4KPiA+IEkgbmVlZCB0byBkbyB3YXJtdXAgdGhlIHNlYXJjaGVyIG9i
amVjdCBmcm9tIG15IEpTUCBwYWdlcy4gQ3VycmVudGx5IGkgYW0KPiA+IGhhdmluZyBhIHN0YXRp
YyBvYmplY3QsIHdoaWNoIGkgYW0gZnJlcXVlbnRseSBjaGVja2luZyB3aGV0aGVyIGluZGV4IGdv
dAo+ID4gdXBkYXRlZCwgaWYgc28gaSBhbSBjbG9zaW5nIHRoZSBpbmRleGVyIGFuZCByZS1vcGVu
aW5nIGl0LiBUaGVzZSBKU1AKPiBwYWdlcwo+ID4gYXJlIGludm9rZWQgYnkgdGhlIFVzZXIuIFdo
ZW4gVXNlciBwZXJmb3JtcyBhbnkgc2VhcmNoIG9wZXJhdGlvbiwgZmV3IGFyZQo+ID4gZmFzdGVy
IGFuZCBmZXcgYXJlIHNsb3dlci4gVGhpcyBpcyBiZWNhdXNlIHRoZSBzZWFyY2hlciBvYmplY3Qg
aXMgZ2V0dGluZwo+ID4gdXBkYXRlZC4KPiA+Cj4gPiBIb3cgZG8gaSB3YXJtIHVwIG15IHNlYXJj
aGVyIG9iamVjdCwgd2l0aG91dCB0aGUgaW50ZXJ2ZW50aW9uIG9mIFVzZXIKPiA+IHJlcXVlc3Qu
Cj4KPiBJIHdvdWxkIGhhdmUgdXNlZCBhIHNldCBvZiBwcmVkZWZpbmVkIHF1ZXJpZXMgd2hpY2gg
YXJlIGZyZXF1ZW50bHkgdHlwZWQKPiBpbnRvIHlvdXIgc2VhcmNoZXIuIFR5cGljYWxseSBxdWVy
aWVzIHdpdGggc3RvcHdvcmRzIGlzIGdvb2QgdG8gdXNlIGFuIGEKPiB3YXJtdXAgcGhhc2UuCj4K
PiAtLQo+IEFzYmrDuHJuIEEuIEZlbGxpbmdoYXVnCj4gYXNiam9ybkBmZWxsaW5naGF1Zy5jb20K
Pgo+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLQo+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1
YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1h
aWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4KPgoKCi0tIApTb3JyeSBmb3Ig
bXkgRW5nbGlzaCEhIOaYjgpQbGVhc2UgaGVscCBtZSBjb3JyZWN0IG15IEVuZ2xpc2ggZXhwcmVz
c2lvbiBhbmQgZXJyb3IgaW4gc3ludGF4Cg==
------=_Part_14563_8811060.1222476262721--

From java-user-return-36406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 27 07:47:18 2008
Return-Path: <java-user-return-36406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15896 invoked from network); 27 Sep 2008 07:47:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Sep 2008 07:47:16 -0000
Received: (qmail 77908 invoked by uid 500); 27 Sep 2008 07:47:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77873 invoked by uid 500); 27 Sep 2008 07:47:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77862 invoked by uid 99); 27 Sep 2008 07:47:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Sep 2008 00:47:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of noble.paul@gmail.com designates 66.249.90.179 as permitted sender)
Received: from [66.249.90.179] (HELO ik-out-1112.google.com) (66.249.90.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Sep 2008 07:46:02 +0000
Received: by ik-out-1112.google.com with SMTP id c30so790376ika.5
        for <java-user@lucene.apache.org>; Sat, 27 Sep 2008 00:46:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=imrAvShEslnrcmxTeyu+sf04l2Gzx2BfM8X/fqY4uvM=;
        b=s8uh9DCdkRWVSsgQ5xNTUUltaJWqnn4ieDSXQH0TgNxDS0bTAqxWCPB1P5lSgZ2MaQ
         LvdN0rT69YvRRMkTVZlG+WRqENdOgK/vdoJkwZXyvgv95p0nPV9KkZhrNZXe3L6TEo8/
         V/NFaO/r66971yX0QI3V96dAlWTNselZnEk2Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=v2XSa27nOwQy+E7+C5+L+ZEsz4ILUcxMh3UMIPvcktYSACKbw0dDWX1iwGw0FWWjly
         B6N91msJNu+W65ElaIgcLhCvyDDqktwny6LACzwUAbH9Xv44u08clOgIiqygVSr/IKoq
         CNYdt1UvfMAlrkl8hVr1sxNEcTS632Q3VAh0w=
Received: by 10.210.61.8 with SMTP id j8mr2681827eba.123.1222501594109;
        Sat, 27 Sep 2008 00:46:34 -0700 (PDT)
Received: by 10.210.60.3 with HTTP; Sat, 27 Sep 2008 00:46:34 -0700 (PDT)
Message-ID: <5e76b0ad0809270046k20eb9864sadc9e09e270c70b4@mail.gmail.com>
Date: Sat, 27 Sep 2008 13:16:34 +0530
From: "=?UTF-8?B?Tm9ibGUgUGF1bCDgtKg=?= =?UTF-8?B?4LWL4LSs4LS/4LSz4LWN4oCNIOCkqOCli+CkrOCljeCks+CljQ==?=" <noble.paul@gmail.com>
To: java-user@lucene.apache.org
Subject: Fwd: NullPointerException
In-Reply-To: <COL101-W84E572715E618D73C8695A8A440@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/mixed; 
	boundary="----=_Part_38127_27361788.1222501594103"
References: <COL101-W84E572715E618D73C8695A8A440@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_38127_27361788.1222501594103
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Any idea on how this exception can happen?


---------- Forwarded message ----------
From: Dinesh Gupta <dinesh.gupta01@hotmail.com>
Date: Thu, Sep 25, 2008 at 7:09 PM
Subject: NullPointerException
To: solr-user@lucene.apache.org


Hi All,

I have attached my file.

I am getting exception.

Please suggest me how to short-out this issue.



WARNING: Error creating document :
SolrInputDocumnt[{id=id(1.0)={93146}, ttl=ttl(1.0)={Majestic from
Pushpams.com}, cdt=cdt(1.0)={2001-09-04 15:40:40.0},
mdt=mdt(1.0)={2008-09-23 17:47:44.0}, prc=prc(1.0)={600.00}}]
java.lang.NullPointerException
    at org.apache.lucene.document.Document.getField(Document.java:140)
    at org.apache.solr.update.DocumentBuilder.toDocument(DocumentBuilder.java:283)
    at org.apache.solr.update.processor.RunUpdateProcessor.processAdd(RunUpdateProcessorFactory.java:58)
    at org.apache.solr.handler.dataimport.SolrWriter.upload(SolrWriter.java:69)
    at org.apache.solr.handler.dataimport.DataImportHandler$1.upload(DataImportHandler.java:288)
    at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:319)
    at org.apache.solr.handler.dataimport.DocBuilder.doFullDump(DocBuilder.java:178)
    at org.apache.solr.handler.dataimport.DocBuilder.execute(DocBuilder.java:136)
    at org.apache.solr.handler.dataimport.DataImporter.doFullImport(DataImporter.java:334)
    at org.apache.solr.handler.dataimport.DataImporter.runCmd(DataImporter.java:386)
    at org.apache.solr.handler.dataimport.DataImportHandler.handleRequestBody(DataImportHandler.java:190)
    at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:131)
    at org.apache.solr.core.SolrCore.execute(SolrCore.java:1204)
    at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:303)
    at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:232)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
    at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)
    at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:175)
    at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:74)

________________________________
MSN Technology brings you the latest on gadgets, gizmos and the new
hits in the gaming market. Try it now!


-- 
--Noble Paul

------=_Part_38127_27361788.1222501594103
Content-Type: text/xml; name=schema.xml
Content-Transfer-Encoding: base64
X-Attachment-Id: 0.2
Content-Disposition: attachment; filename=schema.xml

PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiID8+CjwhLS0KIExpY2Vuc2VkIHRv
IHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmUgb3IgbW9yZQog
Y29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZSBkaXN0
cmlidXRlZCB3aXRoCiB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gcmVnYXJk
aW5nIGNvcHlyaWdodCBvd25lcnNoaXAuCiBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byBZ
b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMAogKHRoZSAiTGljZW5zZSIp
OyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGgKIHRo
ZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgogICAg
IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoKIFVubGVzcyByZXF1
aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUK
IGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJ
UyIgQkFTSVMsCiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwg
ZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNp
ZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKIGxpbWl0YXRpb25zIHVuZGVy
IHRoZSBMaWNlbnNlLgotLT4KCjwhLS0gIAogVGhpcyBpcyB0aGUgU29sciBzY2hlbWEgZmlsZS4g
VGhpcyBmaWxlIHNob3VsZCBiZSBuYW1lZCAic2NoZW1hLnhtbCIgYW5kCiBzaG91bGQgYmUgaW4g
dGhlIGNvbmYgZGlyZWN0b3J5IHVuZGVyIHRoZSBzb2xyIGhvbWUKIChpLmUuIC4vc29sci9jb25m
L3NjaGVtYS54bWwgYnkgZGVmYXVsdCkgCiBvciBsb2NhdGVkIHdoZXJlIHRoZSBjbGFzc2xvYWRl
ciBmb3IgdGhlIFNvbHIgd2ViYXBwIGNhbiBmaW5kIGl0LgoKIFRoaXMgZXhhbXBsZSBzY2hlbWEg
aXMgdGhlIHJlY29tbWVuZGVkIHN0YXJ0aW5nIHBvaW50IGZvciB1c2Vycy4KIEl0IHNob3VsZCBi
ZSBrZXB0IGNvcnJlY3QgYW5kIGNvbmNpc2UsIHVzYWJsZSBvdXQtb2YtdGhlLWJveC4KCiBGb3Ig
bW9yZSBpbmZvcm1hdGlvbiwgb24gaG93IHRvIGN1c3RvbWl6ZSB0aGlzIGZpbGUsIHBsZWFzZSBz
ZWUKIGh0dHA6Ly93aWtpLmFwYWNoZS5vcmcvc29sci9TY2hlbWFYbWwKLS0+Cgo8c2NoZW1hIG5h
bWU9ImlzbSIgdmVyc2lvbj0iMS4xIj4KICA8IS0tIGF0dHJpYnV0ZSAibmFtZSIgaXMgdGhlIG5h
bWUgb2YgdGhpcyBzY2hlbWEgYW5kIGlzIG9ubHkgdXNlZCBmb3IgZGlzcGxheSBwdXJwb3Nlcy4K
ICAgICAgIEFwcGxpY2F0aW9ucyBzaG91bGQgY2hhbmdlIHRoaXMgdG8gcmVmbGVjdCB0aGUgbmF0
dXJlIG9mIHRoZSBzZWFyY2ggY29sbGVjdGlvbi4KICAgICAgIHZlcnNpb249IjEuMSIgaXMgU29s
cidzIHZlcnNpb24gbnVtYmVyIGZvciB0aGUgc2NoZW1hIHN5bnRheCBhbmQgc2VtYW50aWNzLiAg
SXQgc2hvdWxkCiAgICAgICBub3Qgbm9ybWFsbHkgYmUgY2hhbmdlZCBieSBhcHBsaWNhdGlvbnMu
CiAgICAgICAxLjA6IG11bHRpVmFsdWVkIGF0dHJpYnV0ZSBkaWQgbm90IGV4aXN0LCBhbGwgZmll
bGRzIGFyZSBtdWx0aVZhbHVlZCBieSBuYXR1cmUKICAgICAgIDEuMTogbXVsdGlWYWx1ZWQgYXR0
cmlidXRlIGludHJvZHVjZWQsIGZhbHNlIGJ5IGRlZmF1bHQgLS0+CgogIDx0eXBlcz4KICAgIDwh
LS0gZmllbGQgdHlwZSBkZWZpbml0aW9ucy4gVGhlICJuYW1lIiBhdHRyaWJ1dGUgaXMKICAgICAg
IGp1c3QgYSBsYWJlbCB0byBiZSB1c2VkIGJ5IGZpZWxkIGRlZmluaXRpb25zLiAgVGhlICJjbGFz
cyIKICAgICAgIGF0dHJpYnV0ZSBhbmQgYW55IG90aGVyIGF0dHJpYnV0ZXMgZGV0ZXJtaW5lIHRo
ZSByZWFsCiAgICAgICBiZWhhdmlvciBvZiB0aGUgZmllbGRUeXBlLgogICAgICAgICBDbGFzcyBu
YW1lcyBzdGFydGluZyB3aXRoICJzb2xyIiByZWZlciB0byBqYXZhIGNsYXNzZXMgaW4gdGhlCiAg
ICAgICBvcmcuYXBhY2hlLnNvbHIuYW5hbHlzaXMgcGFja2FnZS4KICAgIC0tPgoKICAgIDwhLS0g
VGhlIFN0ckZpZWxkIHR5cGUgaXMgbm90IGFuYWx5emVkLCBidXQgaW5kZXhlZC9zdG9yZWQgdmVy
YmF0aW0uICAKICAgICAgIC0gU3RyRmllbGQgYW5kIFRleHRGaWVsZCBzdXBwb3J0IGFuIG9wdGlv
bmFsIGNvbXByZXNzVGhyZXNob2xkIHdoaWNoCiAgICAgICBsaW1pdHMgY29tcHJlc3Npb24gKGlm
IGVuYWJsZWQgaW4gdGhlIGRlcml2ZWQgZmllbGRzKSB0byB2YWx1ZXMgd2hpY2gKICAgICAgIGV4
Y2VlZCBhIGNlcnRhaW4gc2l6ZSAoaW4gY2hhcmFjdGVycykuCiAgICAtLT4KICAgIDxmaWVsZFR5
cGUgbmFtZT0ic3RyaW5nIiBjbGFzcz0ic29sci5TdHJGaWVsZCIgc29ydE1pc3NpbmdMYXN0PSJ0
cnVlIiBvbWl0Tm9ybXM9InRydWUiLz4KCiAgICA8IS0tIGJvb2xlYW4gdHlwZTogInRydWUiIG9y
ICJmYWxzZSIgLS0+CiAgICA8ZmllbGRUeXBlIG5hbWU9ImJvb2xlYW4iIGNsYXNzPSJzb2xyLkJv
b2xGaWVsZCIgc29ydE1pc3NpbmdMYXN0PSJ0cnVlIiBvbWl0Tm9ybXM9InRydWUiLz4KCiAgICA8
IS0tIFRoZSBvcHRpb25hbCBzb3J0TWlzc2luZ0xhc3QgYW5kIHNvcnRNaXNzaW5nRmlyc3QgYXR0
cmlidXRlcyBhcmUKICAgICAgICAgY3VycmVudGx5IHN1cHBvcnRlZCBvbiB0eXBlcyB0aGF0IGFy
ZSBzb3J0ZWQgaW50ZXJuYWxseSBhcyBzdHJpbmdzLgogICAgICAgLSBJZiBzb3J0TWlzc2luZ0xh
c3Q9InRydWUiLCB0aGVuIGEgc29ydCBvbiB0aGlzIGZpZWxkIHdpbGwgY2F1c2UgZG9jdW1lbnRz
CiAgICAgICAgIHdpdGhvdXQgdGhlIGZpZWxkIHRvIGNvbWUgYWZ0ZXIgZG9jdW1lbnRzIHdpdGgg
dGhlIGZpZWxkLAogICAgICAgICByZWdhcmRsZXNzIG9mIHRoZSByZXF1ZXN0ZWQgc29ydCBvcmRl
ciAoYXNjIG9yIGRlc2MpLgogICAgICAgLSBJZiBzb3J0TWlzc2luZ0ZpcnN0PSJ0cnVlIiwgdGhl
biBhIHNvcnQgb24gdGhpcyBmaWVsZCB3aWxsIGNhdXNlIGRvY3VtZW50cwogICAgICAgICB3aXRo
b3V0IHRoZSBmaWVsZCB0byBjb21lIGJlZm9yZSBkb2N1bWVudHMgd2l0aCB0aGUgZmllbGQsCiAg
ICAgICAgIHJlZ2FyZGxlc3Mgb2YgdGhlIHJlcXVlc3RlZCBzb3J0IG9yZGVyLgogICAgICAgLSBJ
ZiBzb3J0TWlzc2luZ0xhc3Q9ImZhbHNlIiBhbmQgc29ydE1pc3NpbmdGaXJzdD0iZmFsc2UiICh0
aGUgZGVmYXVsdCksCiAgICAgICAgIHRoZW4gZGVmYXVsdCBsdWNlbmUgc29ydGluZyB3aWxsIGJl
IHVzZWQgd2hpY2ggcGxhY2VzIGRvY3Mgd2l0aG91dCB0aGUKICAgICAgICAgZmllbGQgZmlyc3Qg
aW4gYW4gYXNjZW5kaW5nIHNvcnQgYW5kIGxhc3QgaW4gYSBkZXNjZW5kaW5nIHNvcnQuCiAgICAt
LT4gICAgCgoKICAgIDwhLS0gbnVtZXJpYyBmaWVsZCB0eXBlcyB0aGF0IHN0b3JlIGFuZCBpbmRl
eCB0aGUgdGV4dAogICAgICAgICB2YWx1ZSB2ZXJiYXRpbSAoYW5kIGhlbmNlIGRvbid0IHN1cHBv
cnQgcmFuZ2UgcXVlcmllcywgc2luY2UgdGhlCiAgICAgICAgIGxleGljb2dyYXBoaWMgb3JkZXJp
bmcgaXNuJ3QgZXF1YWwgdG8gdGhlIG51bWVyaWMgb3JkZXJpbmcpIC0tPgogICAgPGZpZWxkVHlw
ZSBuYW1lPSJpbnRlZ2VyIiBjbGFzcz0ic29sci5JbnRGaWVsZCIgb21pdE5vcm1zPSJ0cnVlIi8+
CiAgICA8ZmllbGRUeXBlIG5hbWU9ImxvbmciIGNsYXNzPSJzb2xyLkxvbmdGaWVsZCIgb21pdE5v
cm1zPSJ0cnVlIi8+CiAgICA8ZmllbGRUeXBlIG5hbWU9ImZsb2F0IiBjbGFzcz0ic29sci5GbG9h
dEZpZWxkIiBvbWl0Tm9ybXM9InRydWUiLz4KICAgIDxmaWVsZFR5cGUgbmFtZT0iZG91YmxlIiBj
bGFzcz0ic29sci5Eb3VibGVGaWVsZCIgb21pdE5vcm1zPSJ0cnVlIi8+CgoKICAgIDwhLS0gTnVt
ZXJpYyBmaWVsZCB0eXBlcyB0aGF0IG1hbmlwdWxhdGUgdGhlIHZhbHVlIGludG8KICAgICAgICAg
YSBzdHJpbmcgdmFsdWUgdGhhdCBpc24ndCBodW1hbi1yZWFkYWJsZSBpbiBpdHMgaW50ZXJuYWwg
Zm9ybSwKICAgICAgICAgYnV0IHdpdGggYSBsZXhpY29ncmFwaGljIG9yZGVyaW5nIHRoZSBzYW1l
IGFzIHRoZSBudW1lcmljIG9yZGVyaW5nLAogICAgICAgICBzbyB0aGF0IHJhbmdlIHF1ZXJpZXMg
d29yayBjb3JyZWN0bHkuIC0tPgogICAgPGZpZWxkVHlwZSBuYW1lPSJzaW50IiBjbGFzcz0ic29s
ci5Tb3J0YWJsZUludEZpZWxkIiBzb3J0TWlzc2luZ0xhc3Q9InRydWUiIG9taXROb3Jtcz0idHJ1
ZSIvPgogICAgPGZpZWxkVHlwZSBuYW1lPSJzbG9uZyIgY2xhc3M9InNvbHIuU29ydGFibGVMb25n
RmllbGQiIHNvcnRNaXNzaW5nTGFzdD0idHJ1ZSIgb21pdE5vcm1zPSJ0cnVlIi8+CiAgICA8Zmll
bGRUeXBlIG5hbWU9InNmbG9hdCIgY2xhc3M9InNvbHIuU29ydGFibGVGbG9hdEZpZWxkIiBzb3J0
TWlzc2luZ0xhc3Q9InRydWUiIG9taXROb3Jtcz0idHJ1ZSIvPgogICAgPGZpZWxkVHlwZSBuYW1l
PSJzZG91YmxlIiBjbGFzcz0ic29sci5Tb3J0YWJsZURvdWJsZUZpZWxkIiBzb3J0TWlzc2luZ0xh
c3Q9InRydWUiIG9taXROb3Jtcz0idHJ1ZSIvPgoKCiAgICA8IS0tIFRoZSBmb3JtYXQgZm9yIHRo
aXMgZGF0ZSBmaWVsZCBpcyBvZiB0aGUgZm9ybSAxOTk1LTEyLTMxVDIzOjU5OjU5WiwgYW5kCiAg
ICAgICAgIGlzIGEgbW9yZSByZXN0cmljdGVkIGZvcm0gb2YgdGhlIGNhbm9uaWNhbCByZXByZXNl
bnRhdGlvbiBvZiBkYXRlVGltZQogICAgICAgICBodHRwOi8vd3d3LnczLm9yZy9UUi94bWxzY2hl
bWEtMi8jZGF0ZVRpbWUgICAgCiAgICAgICAgIFRoZSB0cmFpbGluZyAiWiIgZGVzaWduYXRlcyBV
VEMgdGltZSBhbmQgaXMgbWFuZGF0b3J5LgogICAgICAgICBPcHRpb25hbCBmcmFjdGlvbmFsIHNl
Y29uZHMgYXJlIGFsbG93ZWQ6IDE5OTUtMTItMzFUMjM6NTk6NTkuOTk5WgogICAgICAgICBBbGwg
b3RoZXIgY29tcG9uZW50cyBhcmUgbWFuZGF0b3J5LgoKICAgICAgICAgRXhwcmVzc2lvbnMgY2Fu
IGFsc28gYmUgdXNlZCB0byBkZW5vdGUgY2FsY3VsYXRpb25zIHRoYXQgc2hvdWxkIGJlCiAgICAg
ICAgIHBlcmZvcm1lZCByZWxhdGl2ZSB0byAiTk9XIiB0byBkZXRlcm1pbmUgdGhlIHZhbHVlLCBp
ZS4uLgoKICAgICAgICAgICAgICAgTk9XL0hPVVIKICAgICAgICAgICAgICAgICAgLi4uIFJvdW5k
IHRvIHRoZSBzdGFydCBvZiB0aGUgY3VycmVudCBob3VyCiAgICAgICAgICAgICAgIE5PVy0xREFZ
CiAgICAgICAgICAgICAgICAgIC4uLiBFeGFjdGx5IDEgZGF5IHByaW9yIHRvIG5vdwogICAgICAg
ICAgICAgICBOT1cvREFZKzZNT05USFMrM0RBWVMKICAgICAgICAgICAgICAgICAgLi4uIDYgbW9u
dGhzIGFuZCAzIGRheXMgaW4gdGhlIGZ1dHVyZSBmcm9tIHRoZSBzdGFydCBvZgogICAgICAgICAg
ICAgICAgICAgICAgdGhlIGN1cnJlbnQgZGF5CiAgICAgICAgICAgICAgICAgICAgICAKICAgICAg
ICAgQ29uc3VsdCB0aGUgRGF0ZUZpZWxkIGphdmFkb2NzIGZvciBtb3JlIGluZm9ybWF0aW9uLgog
ICAgICAtLT4KICAgIDxmaWVsZFR5cGUgbmFtZT0iZGF0ZSIgY2xhc3M9InNvbHIuRGF0ZUZpZWxk
IiBzb3J0TWlzc2luZ0xhc3Q9InRydWUiIG9taXROb3Jtcz0idHJ1ZSIvPgoKICAgIDwhLS0gc29s
ci5UZXh0RmllbGQgYWxsb3dzIHRoZSBzcGVjaWZpY2F0aW9uIG9mIGN1c3RvbSB0ZXh0IGFuYWx5
emVycwogICAgICAgICBzcGVjaWZpZWQgYXMgYSB0b2tlbml6ZXIgYW5kIGEgbGlzdCBvZiB0b2tl
biBmaWx0ZXJzLiBEaWZmZXJlbnQKICAgICAgICAgYW5hbHl6ZXJzIG1heSBiZSBzcGVjaWZpZWQg
Zm9yIGluZGV4aW5nIGFuZCBxdWVyeWluZy4KCiAgICAgICAgIFRoZSBvcHRpb25hbCBwb3NpdGlv
bkluY3JlbWVudEdhcCBwdXRzIHNwYWNlIGJldHdlZW4gbXVsdGlwbGUgZmllbGRzIG9mCiAgICAg
ICAgIHRoaXMgdHlwZSBvbiB0aGUgc2FtZSBkb2N1bWVudCwgd2l0aCB0aGUgcHVycG9zZSBvZiBw
cmV2ZW50aW5nIGZhbHNlIHBocmFzZQogICAgICAgICBtYXRjaGluZyBhY3Jvc3MgZmllbGRzLgoK
ICAgICAgICAgRm9yIG1vcmUgaW5mbyBvbiBjdXN0b21pemluZyB5b3VyIGFuYWx5emVyIGNoYWlu
LCBwbGVhc2Ugc2VlCiAgICAgICAgIGh0dHA6Ly93aWtpLmFwYWNoZS5vcmcvc29sci9BbmFseXpl
cnNUb2tlbml6ZXJzVG9rZW5GaWx0ZXJzCiAgICAgLS0+CgogICAgPCEtLSBPbmUgY2FuIGFsc28g
c3BlY2lmeSBhbiBleGlzdGluZyBBbmFseXplciBjbGFzcyB0aGF0IGhhcyBhCiAgICAgICAgIGRl
ZmF1bHQgY29uc3RydWN0b3IgdmlhIHRoZSBjbGFzcyBhdHRyaWJ1dGUgb24gdGhlIGFuYWx5emVy
IGVsZW1lbnQKICAgIDxmaWVsZFR5cGUgbmFtZT0idGV4dF9ncmVlayIgY2xhc3M9InNvbHIuVGV4
dEZpZWxkIj4KICAgICAgPGFuYWx5emVyIGNsYXNzPSJvcmcuYXBhY2hlLmx1Y2VuZS5hbmFseXNp
cy5lbC5HcmVla0FuYWx5emVyIi8+CiAgICA8L2ZpZWxkVHlwZT4KICAgIC0tPgoKICAgIDwhLS0g
QSB0ZXh0IGZpZWxkIHRoYXQgb25seSBzcGxpdHMgb24gd2hpdGVzcGFjZSBmb3IgZXhhY3QgbWF0
Y2hpbmcgb2Ygd29yZHMgLS0+CiAgICA8ZmllbGRUeXBlIG5hbWU9InRleHRfd3MiIGNsYXNzPSJz
b2xyLlRleHRGaWVsZCIgcG9zaXRpb25JbmNyZW1lbnRHYXA9IjEwMCI+CiAgICAgIDxhbmFseXpl
cj4KICAgICAgICA8dG9rZW5pemVyIGNsYXNzPSJzb2xyLldoaXRlc3BhY2VUb2tlbml6ZXJGYWN0
b3J5Ii8+CiAgICAgIDwvYW5hbHl6ZXI+CiAgICA8L2ZpZWxkVHlwZT4KCiAgICA8IS0tIEEgdGV4
dCBmaWVsZCB0aGF0IHVzZXMgV29yZERlbGltaXRlckZpbHRlciB0byBlbmFibGUgc3BsaXR0aW5n
IGFuZCBtYXRjaGluZyBvZgogICAgICAgIHdvcmRzIG9uIGNhc2UtY2hhbmdlLCBhbHBoYSBudW1l
cmljIGJvdW5kYXJpZXMsIGFuZCBub24tYWxwaGFudW1lcmljIGNoYXJzLAogICAgICAgIHNvIHRo
YXQgYSBxdWVyeSBvZiAid2lmaSIgb3IgIndpIGZpIiBjb3VsZCBtYXRjaCBhIGRvY3VtZW50IGNv
bnRhaW5pbmcgIldpLUZpIi4KICAgICAgICBTeW5vbnltcyBhbmQgc3RvcHdvcmRzIGFyZSBjdXN0
b21pemVkIGJ5IGV4dGVybmFsIGZpbGVzLCBhbmQgc3RlbW1pbmcgaXMgZW5hYmxlZC4KICAgICAg
ICBEdXBsaWNhdGUgdG9rZW5zIGF0IHRoZSBzYW1lIHBvc2l0aW9uICh3aGljaCBtYXkgcmVzdWx0
IGZyb20gU3RlbW1lZCBTeW5vbnltcyBvcgogICAgICAgIFdvcmREZWxpbSBwYXJ0cykgYXJlIHJl
bW92ZWQuCiAgICAgICAgLS0+CiAgICA8ZmllbGRUeXBlIG5hbWU9InRleHQiIGNsYXNzPSJzb2xy
LlRleHRGaWVsZCIgcG9zaXRpb25JbmNyZW1lbnRHYXA9IjEwMCI+CiAgICAgIDxhbmFseXplciB0
eXBlPSJpbmRleCI+CiAgICAgICAgPHRva2VuaXplciBjbGFzcz0ic29sci5XaGl0ZXNwYWNlVG9r
ZW5pemVyRmFjdG9yeSIvPgogICAgICAgIDwhLS0gaW4gdGhpcyBleGFtcGxlLCB3ZSB3aWxsIG9u
bHkgdXNlIHN5bm9ueW1zIGF0IHF1ZXJ5IHRpbWUKICAgICAgICA8ZmlsdGVyIGNsYXNzPSJzb2xy
LlN5bm9ueW1GaWx0ZXJGYWN0b3J5IiBzeW5vbnltcz0iaW5kZXhfc3lub255bXMudHh0IiBpZ25v
cmVDYXNlPSJ0cnVlIiBleHBhbmQ9ImZhbHNlIi8+CiAgICAgICAgLS0+CiAgICAgICAgPGZpbHRl
ciBjbGFzcz0ic29sci5TdG9wRmlsdGVyRmFjdG9yeSIgaWdub3JlQ2FzZT0idHJ1ZSIgd29yZHM9
InN0b3B3b3Jkcy50eHQiLz4KICAgICAgICA8ZmlsdGVyIGNsYXNzPSJzb2xyLldvcmREZWxpbWl0
ZXJGaWx0ZXJGYWN0b3J5IiBnZW5lcmF0ZVdvcmRQYXJ0cz0iMSIgZ2VuZXJhdGVOdW1iZXJQYXJ0
cz0iMSIgY2F0ZW5hdGVXb3Jkcz0iMSIgY2F0ZW5hdGVOdW1iZXJzPSIxIiBjYXRlbmF0ZUFsbD0i
MCIvPgogICAgICAgIDxmaWx0ZXIgY2xhc3M9InNvbHIuTG93ZXJDYXNlRmlsdGVyRmFjdG9yeSIv
PgogICAgICAgIDxmaWx0ZXIgY2xhc3M9InNvbHIuRW5nbGlzaFBvcnRlckZpbHRlckZhY3Rvcnki
IHByb3RlY3RlZD0icHJvdHdvcmRzLnR4dCIvPgogICAgICAgIDxmaWx0ZXIgY2xhc3M9InNvbHIu
UmVtb3ZlRHVwbGljYXRlc1Rva2VuRmlsdGVyRmFjdG9yeSIvPgogICAgICA8L2FuYWx5emVyPgog
ICAgICA8YW5hbHl6ZXIgdHlwZT0icXVlcnkiPgogICAgICAgIDx0b2tlbml6ZXIgY2xhc3M9InNv
bHIuV2hpdGVzcGFjZVRva2VuaXplckZhY3RvcnkiLz4KICAgICAgICA8ZmlsdGVyIGNsYXNzPSJz
b2xyLlN5bm9ueW1GaWx0ZXJGYWN0b3J5IiBzeW5vbnltcz0ic3lub255bXMudHh0IiBpZ25vcmVD
YXNlPSJ0cnVlIiBleHBhbmQ9InRydWUiLz4KICAgICAgICA8ZmlsdGVyIGNsYXNzPSJzb2xyLlN0
b3BGaWx0ZXJGYWN0b3J5IiBpZ25vcmVDYXNlPSJ0cnVlIiB3b3Jkcz0ic3RvcHdvcmRzLnR4dCIv
PgogICAgICAgIDxmaWx0ZXIgY2xhc3M9InNvbHIuV29yZERlbGltaXRlckZpbHRlckZhY3Rvcnki
IGdlbmVyYXRlV29yZFBhcnRzPSIxIiBnZW5lcmF0ZU51bWJlclBhcnRzPSIxIiBjYXRlbmF0ZVdv
cmRzPSIwIiBjYXRlbmF0ZU51bWJlcnM9IjAiIGNhdGVuYXRlQWxsPSIwIi8+CiAgICAgICAgPGZp
bHRlciBjbGFzcz0ic29sci5Mb3dlckNhc2VGaWx0ZXJGYWN0b3J5Ii8+CiAgICAgICAgPGZpbHRl
ciBjbGFzcz0ic29sci5FbmdsaXNoUG9ydGVyRmlsdGVyRmFjdG9yeSIgcHJvdGVjdGVkPSJwcm90
d29yZHMudHh0Ii8+CiAgICAgICAgPGZpbHRlciBjbGFzcz0ic29sci5SZW1vdmVEdXBsaWNhdGVz
VG9rZW5GaWx0ZXJGYWN0b3J5Ii8+CiAgICAgIDwvYW5hbHl6ZXI+CiAgICA8L2ZpZWxkVHlwZT4K
CgogICAgPCEtLSBMZXNzIGZsZXhpYmxlIG1hdGNoaW5nLCBidXQgbGVzcyBmYWxzZSBtYXRjaGVz
LiAgUHJvYmFibHkgbm90IGlkZWFsIGZvciBwcm9kdWN0IG5hbWVzLAogICAgICAgICBidXQgbWF5
IGJlIGdvb2QgZm9yIFNLVXMuICBDYW4gaW5zZXJ0IGRhc2hlcyBpbiB0aGUgd3JvbmcgcGxhY2Ug
YW5kIHN0aWxsIG1hdGNoLiAtLT4KICAgIDxmaWVsZFR5cGUgbmFtZT0idGV4dFRpZ2h0IiBjbGFz
cz0ic29sci5UZXh0RmllbGQiIHBvc2l0aW9uSW5jcmVtZW50R2FwPSIxMDAiID4KICAgICAgPGFu
YWx5emVyPgogICAgICAgIDx0b2tlbml6ZXIgY2xhc3M9InNvbHIuV2hpdGVzcGFjZVRva2VuaXpl
ckZhY3RvcnkiLz4KICAgICAgICA8ZmlsdGVyIGNsYXNzPSJzb2xyLlN5bm9ueW1GaWx0ZXJGYWN0
b3J5IiBzeW5vbnltcz0ic3lub255bXMudHh0IiBpZ25vcmVDYXNlPSJ0cnVlIiBleHBhbmQ9ImZh
bHNlIi8+CiAgICAgICAgPGZpbHRlciBjbGFzcz0ic29sci5TdG9wRmlsdGVyRmFjdG9yeSIgaWdu
b3JlQ2FzZT0idHJ1ZSIgd29yZHM9InN0b3B3b3Jkcy50eHQiLz4KICAgICAgICA8ZmlsdGVyIGNs
YXNzPSJzb2xyLldvcmREZWxpbWl0ZXJGaWx0ZXJGYWN0b3J5IiBnZW5lcmF0ZVdvcmRQYXJ0cz0i
MCIgZ2VuZXJhdGVOdW1iZXJQYXJ0cz0iMCIgY2F0ZW5hdGVXb3Jkcz0iMSIgY2F0ZW5hdGVOdW1i
ZXJzPSIxIiBjYXRlbmF0ZUFsbD0iMCIvPgogICAgICAgIDxmaWx0ZXIgY2xhc3M9InNvbHIuTG93
ZXJDYXNlRmlsdGVyRmFjdG9yeSIvPgogICAgICAgIDxmaWx0ZXIgY2xhc3M9InNvbHIuRW5nbGlz
aFBvcnRlckZpbHRlckZhY3RvcnkiIHByb3RlY3RlZD0icHJvdHdvcmRzLnR4dCIvPgogICAgICAg
IDxmaWx0ZXIgY2xhc3M9InNvbHIuUmVtb3ZlRHVwbGljYXRlc1Rva2VuRmlsdGVyRmFjdG9yeSIv
PgogICAgICA8L2FuYWx5emVyPgogICAgPC9maWVsZFR5cGU+CgogICAgPCEtLSBUaGlzIGlzIGFu
IGV4YW1wbGUgb2YgdXNpbmcgdGhlIEtleXdvcmRUb2tlbml6ZXIgYWxvbmcKICAgICAgICAgV2l0
aCB2YXJpb3VzIFRva2VuRmlsdGVyRmFjdG9yaWVzIHRvIHByb2R1Y2UgYSBzb3J0YWJsZSBmaWVs
ZAogICAgICAgICB0aGF0IGRvZXMgbm90IGluY2x1ZGUgc29tZSBwcm9wZXJ0aWVzIG9mIHRoZSBz
b3VyY2UgdGV4dAogICAgICAtLT4KICAgIDxmaWVsZFR5cGUgbmFtZT0iYWxwaGFPbmx5U29ydCIg
Y2xhc3M9InNvbHIuVGV4dEZpZWxkIiBzb3J0TWlzc2luZ0xhc3Q9InRydWUiIG9taXROb3Jtcz0i
dHJ1ZSI+CiAgICAgIDxhbmFseXplcj4KICAgICAgICA8IS0tIEtleXdvcmRUb2tlbml6ZXIgZG9l
cyBubyBhY3R1YWwgdG9rZW5pemluZywgc28gdGhlIGVudGlyZQogICAgICAgICAgICAgaW5wdXQg
c3RyaW5nIGlzIHByZXNlcnZlZCBhcyBhIHNpbmdsZSB0b2tlbgogICAgICAgICAgLS0+CiAgICAg
ICAgPHRva2VuaXplciBjbGFzcz0ic29sci5LZXl3b3JkVG9rZW5pemVyRmFjdG9yeSIvPgogICAg
ICAgIDwhLS0gVGhlIExvd2VyQ2FzZSBUb2tlbkZpbHRlciBkb2VzIHdoYXQgeW91IGV4cGVjdCwg
d2hpY2ggY2FuIGJlCiAgICAgICAgICAgICB3aGVuIHlvdSB3YW50IHlvdXIgc29ydGluZyB0byBi
ZSBjYXNlIGluc2Vuc2l0aXZlCiAgICAgICAgICAtLT4KICAgICAgICA8ZmlsdGVyIGNsYXNzPSJz
b2xyLkxvd2VyQ2FzZUZpbHRlckZhY3RvcnkiIC8+CiAgICAgICAgPCEtLSBUaGUgVHJpbUZpbHRl
ciByZW1vdmVzIGFueSBsZWFkaW5nIG9yIHRyYWlsaW5nIHdoaXRlc3BhY2UgLS0+CiAgICAgICAg
PGZpbHRlciBjbGFzcz0ic29sci5UcmltRmlsdGVyRmFjdG9yeSIgLz4KICAgICAgICA8IS0tIFRo
ZSBQYXR0ZXJuUmVwbGFjZUZpbHRlciBnaXZlcyB5b3UgdGhlIGZsZXhpYmlsaXR5IHRvIHVzZQog
ICAgICAgICAgICAgSmF2YSBSZWd1bGFyIGV4cHJlc3Npb24gdG8gcmVwbGFjZSBhbnkgc2VxdWVu
Y2Ugb2YgY2hhcmFjdGVycwogICAgICAgICAgICAgbWF0Y2hpbmcgYSBwYXR0ZXJuIHdpdGggYW4g
YXJiaXRyYXJ5IHJlcGxhY2VtZW50IHN0cmluZywgCiAgICAgICAgICAgICB3aGljaCBtYXkgaW5j
bHVkZSBiYWNrIHJlZnJlbmNlcyB0byBwb3J0aW9ucyBvZiB0aGUgb3JyaWdpbmFsCiAgICAgICAg
ICAgICBzdHJpbmcgbWF0Y2hlZCBieSB0aGUgcGF0dGVybi4KICAgICAgICAgICAgIAogICAgICAg
ICAgICAgU2VlIHRoZSBKYXZhIFJlZ3VsYXIgRXhwcmVzc2lvbiBkb2N1bWVudGF0aW9uIGZvciBt
b3JlCiAgICAgICAgICAgICBpbmZvbWF0aW9uIG9uIHBhdHRlcm4gYW5kIHJlcGxhY2VtZW50IHN0
cmluZyBzeW50YXguCiAgICAgICAgICAgICAKICAgICAgICAgICAgIGh0dHA6Ly9qYXZhLnN1bi5j
b20vajJzZS8xLjUuMC9kb2NzL2FwaS9qYXZhL3V0aWwvcmVnZXgvcGFja2FnZS1zdW1tYXJ5Lmh0
bWwKICAgICAgICAgIC0tPgogICAgICAgIDxmaWx0ZXIgY2xhc3M9InNvbHIuUGF0dGVyblJlcGxh
Y2VGaWx0ZXJGYWN0b3J5IgogICAgICAgICAgICAgICAgcGF0dGVybj0iKFteYS16XSkiIHJlcGxh
Y2VtZW50PSIiIHJlcGxhY2U9ImFsbCIKICAgICAgICAvPgogICAgICA8L2FuYWx5emVyPgogICAg
PC9maWVsZFR5cGU+CgogICAgPCEtLSBzaW5jZSBmaWVsZHMgb2YgdGhpcyB0eXBlIGFyZSBieSBk
ZWZhdWx0IG5vdCBzdG9yZWQgb3IgaW5kZXhlZCwgYW55IGRhdGEgYWRkZWQgdG8gCiAgICAgICAg
IHRoZW0gd2lsbCBiZSBpZ25vcmVkIG91dHJpZ2h0IAogICAgIC0tPiAKICAgIDxmaWVsZHR5cGUg
bmFtZT0iaWdub3JlZCIgc3RvcmVkPSJmYWxzZSIgaW5kZXhlZD0iZmFsc2UiIGNsYXNzPSJzb2xy
LlN0ckZpZWxkIiAvPiAKCiA8L3R5cGVzPgoKCiA8ZmllbGRzPgogICA8IS0tIFZhbGlkIGF0dHJp
YnV0ZXMgZm9yIGZpZWxkczoKICAgICBuYW1lOiBtYW5kYXRvcnkgLSB0aGUgbmFtZSBmb3IgdGhl
IGZpZWxkCiAgICAgdHlwZTogbWFuZGF0b3J5IC0gdGhlIG5hbWUgb2YgYSBwcmV2aW91c2x5IGRl
ZmluZWQgdHlwZSBmcm9tIHRoZSA8dHlwZXM+IHNlY3Rpb24KICAgICBpbmRleGVkOiB0cnVlIGlm
IHRoaXMgZmllbGQgc2hvdWxkIGJlIGluZGV4ZWQgKHNlYXJjaGFibGUgb3Igc29ydGFibGUpCiAg
ICAgc3RvcmVkOiB0cnVlIGlmIHRoaXMgZmllbGQgc2hvdWxkIGJlIHJldHJpZXZhYmxlCiAgICAg
Y29tcHJlc3NlZDogW2ZhbHNlXSBpZiB0aGlzIGZpZWxkIHNob3VsZCBiZSBzdG9yZWQgdXNpbmcg
Z3ppcCBjb21wcmVzc2lvbgogICAgICAgKHRoaXMgd2lsbCBvbmx5IGFwcGx5IGlmIHRoZSBmaWVs
ZCB0eXBlIGlzIGNvbXByZXNzYWJsZTsgYW1vbmcKICAgICAgIHRoZSBzdGFuZGFyZCBmaWVsZCB0
eXBlcywgb25seSBUZXh0RmllbGQgYW5kIFN0ckZpZWxkIGFyZSkKICAgICBtdWx0aVZhbHVlZDog
dHJ1ZSBpZiB0aGlzIGZpZWxkIG1heSBjb250YWluIG11bHRpcGxlIHZhbHVlcyBwZXIgZG9jdW1l
bnQKICAgICBvbWl0Tm9ybXM6IChleHBlcnQpIHNldCB0byB0cnVlIHRvIG9taXQgdGhlIG5vcm1z
IGFzc29jaWF0ZWQgd2l0aAogICAgICAgdGhpcyBmaWVsZCAodGhpcyBkaXNhYmxlcyBsZW5ndGgg
bm9ybWFsaXphdGlvbiBhbmQgaW5kZXgtdGltZQogICAgICAgYm9vc3RpbmcgZm9yIHRoZSBmaWVs
ZCwgYW5kIHNhdmVzIHNvbWUgbWVtb3J5KS4gIE9ubHkgZnVsbC10ZXh0CiAgICAgICBmaWVsZHMg
b3IgZmllbGRzIHRoYXQgbmVlZCBhbiBpbmRleC10aW1lIGJvb3N0IG5lZWQgbm9ybXMuCiAgIC0t
PgoKICAgPGZpZWxkIG5hbWU9ImlkIiB0eXBlPSJzdHJpbmciIGluZGV4ZWQ9InRydWUiIHN0b3Jl
ZD0idHJ1ZSIgcmVxdWlyZWQ9InRydWUiIC8+IAogICA8ZmllbGQgbmFtZT0icHJjIiB0eXBlPSJz
ZmxvYXQiIGluZGV4ZWQ9InRydWUiIHN0b3JlZD0idHJ1ZSIvPgogICA8ZmllbGQgbmFtZT0iY2R0
IiB0eXBlPSJkYXRlIiBpbmRleGVkPSJmYWxzZSIgc3RvcmVkPSJmYWxzZSIgZGVmYXVsdD0iTk9X
IiBtdWx0aVZhbHVlZD0iZmFsc2UiLz4KICAgPGZpZWxkIG5hbWU9Im1kdCIgdHlwZT0iZGF0ZSIg
aW5kZXhlZD0iZmFsc2UiIHN0b3JlZD0iZmFsc2UiIGRlZmF1bHQ9Ik5PVyIgbXVsdGlWYWx1ZWQ9
ImZhbHNlIi8+CiAgIDxmaWVsZCBuYW1lPSJ0dGwiIHR5cGU9InN0cmluZyIgaW5kZXhlZD0idHJ1
ZSIgc3RvcmVkPSJ0cnVlIiBvbWl0Tm9ybXM9InRydWUiLz4KIDwhLS0gIDxmaWVsZCBuYW1lPSJD
b250ZW50IiB0eXBlPSJzdHJpbmciIGluZGV4ZWQ9InRydWUiIHN0b3JlZD0idHJ1ZSIgb21pdE5v
cm1zPSJ0cnVlIi8+CiAgICA8ZmllbGQgbmFtZT0iYm5tIiB0eXBlPSJzdHJpbmciIGluZGV4ZWQ9
InRydWUiIHN0b3JlZD0idHJ1ZSIgb21pdE5vcm1zPSJ0cnVlIi8+CiAgIDxmaWVsZCBuYW1lPSJi
bm0xIiB0eXBlPSJzdHJpbmciIGluZGV4ZWQ9ImZhbHNlIiBzdG9yZWQ9ImZhbHNlIiBvbWl0Tm9y
bXM9ImZhbHNlIi8+CiAgIDxmaWVsZCBuYW1lPSJiaWQiIHR5cGU9InN0cmluZyIgaW5kZXhlZD0i
ZmFsc2UiIHN0b3JlZD0iZmFsc2UiIG9taXROb3Jtcz0iZmFsc2UiLz4KICAgPGZpZWxkIG5hbWU9
ImdycCIgdHlwZT0ic3RyaW5nIiBpbmRleGVkPSJ0cnVlIiBzdG9yZWQ9ImZhbHNlIiBvbWl0Tm9y
bXM9InRydWUiLz4KICAgPGZpZWxkIG5hbWU9InNpZCIgdHlwZT0ic3RyaW5nIiBpbmRleGVkPSJm
YWxzZSIgc3RvcmVkPSJ0cnVlIiBvbWl0Tm9ybXM9ImZhbHNlIi8+CiAgIDxmaWVsZCBuYW1lPSJj
dHMiIHR5cGU9InN0cmluZyIgaW5kZXhlZD0idHJ1ZSIgc3RvcmVkPSJ0cnVlIiBvbWl0Tm9ybXM9
InRydWUiLz4KICAgPGZpZWxkIG5hbWU9ImNsZyIgdHlwZT0ic3RyaW5nIiBpbmRleGVkPSJ0cnVl
IiBzdG9yZWQ9InRydWUiIG9taXROb3Jtcz0idHJ1ZSIvPgogICAKICAgPGZpZWxkIG5hbWU9InR0
bDIiIHR5cGU9InN0cmluZyIgaW5kZXhlZD0idHJ1ZSIgc3RvcmVkPSJ0cnVlIiBvbWl0Tm9ybXM9
InRydWUiLz4KICAgPGZpZWxkIG5hbWU9InNlcSIgdHlwZT0ic3RyaW5nIiBpbmRleGVkPSJmYWxz
ZSIgc3RvcmVkPSJmYWxzZSIgb21pdE5vcm1zPSJmYWxzZSIvPgogICA8ZmllbGQgbmFtZT0ic2Rj
IiB0eXBlPSJzdHJpbmciIGluZGV4ZWQ9ImZhbHNlIiBzdG9yZWQ9ImZhbHNlIiBvbWl0Tm9ybXM9
ImZhbHNlIi8+CiAgIDxmaWVsZCBuYW1lPSJrZGMiIHR5cGU9InN0cmluZyIgaW5kZXhlZD0iZmFs
c2UiIHN0b3JlZD0iZmFsc2UiIG9taXROb3Jtcz0iZmFsc2UiLz4KICAgPGZpZWxkIG5hbWU9ImRj
dCIgdHlwZT0ic3RyaW5nIiBpbmRleGVkPSJmYWxzZSIgc3RvcmVkPSJmYWxzZSIgb21pdE5vcm1z
PSJmYWxzZSIvPgogICA8ZmllbGQgbmFtZT0iZGN0eSIgdHlwZT0ic3RyaW5nIiBpbmRleGVkPSJ0
cnVlIiBzdG9yZWQ9InRydWUiIG9taXROb3Jtcz0idHJ1ZSIvPgogICA8ZmllbGQgbmFtZT0iYnNj
IiB0eXBlPSJzdHJpbmciIGluZGV4ZWQ9InRydWUiIHN0b3JlZD0idHJ1ZSIgb21pdE5vcm1zPSJ0
cnVlIi8+IC0tPgoKICAgCiAgCiAgCgogICA8IS0tIER5bmFtaWMgZmllbGQgZGVmaW5pdGlvbnMu
ICBJZiBhIGZpZWxkIG5hbWUgaXMgbm90IGZvdW5kLCBkeW5hbWljRmllbGRzCiAgICAgICAgd2ls
bCBiZSB1c2VkIGlmIHRoZSBuYW1lIG1hdGNoZXMgYW55IG9mIHRoZSBwYXR0ZXJucy4KICAgICAg
ICBSRVNUUklDVElPTjogdGhlIGdsb2ItbGlrZSBwYXR0ZXJuIGluIHRoZSBuYW1lIGF0dHJpYnV0
ZSBtdXN0IGhhdmUKICAgICAgICBhICIqIiBvbmx5IGF0IHRoZSBzdGFydCBvciB0aGUgZW5kLgog
ICAgICAgIEVYQU1QTEU6ICBuYW1lPSIqX2kiIHdpbGwgbWF0Y2ggYW55IGZpZWxkIGVuZGluZyBp
biBfaSAobGlrZSBteWlkX2ksIHpfaSkKICAgICAgICBMb25nZXIgcGF0dGVybnMgd2lsbCBiZSBt
YXRjaGVkIGZpcnN0LiAgaWYgZXF1YWwgc2l6ZSBwYXR0ZXJucwogICAgICAgIGJvdGggbWF0Y2gs
IHRoZSBmaXJzdCBhcHBlYXJpbmcgaW4gdGhlIHNjaGVtYSB3aWxsIGJlIHVzZWQuICAtLT4KICAg
PGR5bmFtaWNGaWVsZCBuYW1lPSIqX2kiICB0eXBlPSJzaW50IiAgICBpbmRleGVkPSJ0cnVlIiAg
c3RvcmVkPSJ0cnVlIi8+CiAgIDxkeW5hbWljRmllbGQgbmFtZT0iKl9zIiAgdHlwZT0ic3RyaW5n
IiAgaW5kZXhlZD0idHJ1ZSIgIHN0b3JlZD0idHJ1ZSIvPgogICA8ZHluYW1pY0ZpZWxkIG5hbWU9
IipfbCIgIHR5cGU9InNsb25nIiAgIGluZGV4ZWQ9InRydWUiICBzdG9yZWQ9InRydWUiLz4KICAg
PGR5bmFtaWNGaWVsZCBuYW1lPSIqX3QiICB0eXBlPSJ0ZXh0IiAgICBpbmRleGVkPSJ0cnVlIiAg
c3RvcmVkPSJ0cnVlIi8+CiAgIDxkeW5hbWljRmllbGQgbmFtZT0iKl9iIiAgdHlwZT0iYm9vbGVh
biIgaW5kZXhlZD0idHJ1ZSIgIHN0b3JlZD0idHJ1ZSIvPgogICA8ZHluYW1pY0ZpZWxkIG5hbWU9
IipfZiIgIHR5cGU9InNmbG9hdCIgIGluZGV4ZWQ9InRydWUiICBzdG9yZWQ9InRydWUiLz4KICAg
PGR5bmFtaWNGaWVsZCBuYW1lPSIqX2QiICB0eXBlPSJzZG91YmxlIiBpbmRleGVkPSJ0cnVlIiAg
c3RvcmVkPSJ0cnVlIi8+CiAgIDxkeW5hbWljRmllbGQgbmFtZT0iKl9kdCIgdHlwZT0iZGF0ZSIg
ICAgaW5kZXhlZD0idHJ1ZSIgIHN0b3JlZD0idHJ1ZSIvPgoKICAgPCEtLSB1bmNvbW1lbnQgdGhl
IGZvbGxvd2luZyB0byBpZ25vcmUgYW55IGZpZWxkcyB0aGF0IGRvbid0IGFscmVhZHkgbWF0Y2gg
YW4gZXhpc3RpbmcgCiAgICAgICAgZmllbGQgbmFtZSBvciBkeW5hbWljIGZpZWxkLCByYXRoZXIg
dGhhbiByZXBvcnRpbmcgdGhlbSBhcyBhbiBlcnJvci4gCiAgICAgICAgYWx0ZXJuYXRlbHksIGNo
YW5nZSB0aGUgdHlwZT0iaWdub3JlZCIgdG8gc29tZSBvdGhlciB0eXBlIGUuZy4gInRleHQiIGlm
IHlvdSB3YW50IAogICAgICAgIHVua25vd24gZmllbGRzIGluZGV4ZWQgYW5kL29yIHN0b3JlZCBi
eSBkZWZhdWx0IC0tPiAKICAgPCEtLWR5bmFtaWNGaWVsZCBuYW1lPSIqIiB0eXBlPSJpZ25vcmVk
IiAvLS0+CiAgIAogPC9maWVsZHM+CgogPCEtLSBGaWVsZCB0byB1c2UgdG8gZGV0ZXJtaW5lIGFu
ZCBlbmZvcmNlIGRvY3VtZW50IHVuaXF1ZW5lc3MuIAogICAgICBVbmxlc3MgdGhpcyBmaWVsZCBp
cyBtYXJrZWQgd2l0aCByZXF1aXJlZD0iZmFsc2UiLCBpdCB3aWxsIGJlIGEgcmVxdWlyZWQgZmll
bGQKICAgLS0+CiA8dW5pcXVlS2V5PmlkPC91bmlxdWVLZXk+CgogPCEtLSBmaWVsZCBmb3IgdGhl
IFF1ZXJ5UGFyc2VyIHRvIHVzZSB3aGVuIGFuIGV4cGxpY2l0IGZpZWxkbmFtZSBpcyBhYnNlbnQg
LS0+CiA8ZGVmYXVsdFNlYXJjaEZpZWxkPmlkPC9kZWZhdWx0U2VhcmNoRmllbGQ+CgogPCEtLSBT
b2xyUXVlcnlQYXJzZXIgY29uZmlndXJhdGlvbjogZGVmYXVsdE9wZXJhdG9yPSJBTkR8T1IiIC0t
PgogPHNvbHJRdWVyeVBhcnNlciBkZWZhdWx0T3BlcmF0b3I9Ik9SIi8+CgogIDwhLS0gY29weUZp
ZWxkIGNvbW1hbmRzIGNvcHkgb25lIGZpZWxkIHRvIGFub3RoZXIgYXQgdGhlIHRpbWUgYSBkb2N1
bWVudAogICAgICAgIGlzIGFkZGVkIHRvIHRoZSBpbmRleC4gIEl0J3MgdXNlZCBlaXRoZXIgdG8g
aW5kZXggdGhlIHNhbWUgZmllbGQgZGlmZmVyZW50bHksCiAgICAgICAgb3IgdG8gYWRkIG11bHRp
cGxlIGZpZWxkcyB0byB0aGUgc2FtZSBmaWVsZCBmb3IgZWFzaWVyL2Zhc3RlciBzZWFyY2hpbmcu
ICAtLT4KICA8IS0tIDxjb3B5RmllbGQgc291cmNlPSJpZCIgZGVzdD0ic2t1Ii8+CgogICA8Y29w
eUZpZWxkIHNvdXJjZT0iY2F0IiBkZXN0PSJ0ZXh0Ii8+CiAgIDxjb3B5RmllbGQgc291cmNlPSJu
YW1lIiBkZXN0PSJ0ZXh0Ii8+CiAgIDxjb3B5RmllbGQgc291cmNlPSJuYW1lIiBkZXN0PSJuYW1l
U29ydCIvPgogICA8Y29weUZpZWxkIHNvdXJjZT0ibmFtZSIgZGVzdD0iYWxwaGFOYW1lU29ydCIv
PgogICA8Y29weUZpZWxkIHNvdXJjZT0ibWFudSIgZGVzdD0idGV4dCIvPgogICA8Y29weUZpZWxk
IHNvdXJjZT0iZmVhdHVyZXMiIGRlc3Q9InRleHQiLz4KICAgPGNvcHlGaWVsZCBzb3VyY2U9Imlu
Y2x1ZGVzIiBkZXN0PSJ0ZXh0Ii8+CgogICA8Y29weUZpZWxkIHNvdXJjZT0ibWFudSIgZGVzdD0i
bWFudV9leGFjdCIvPi0tPgoKIDwhLS0gU2ltaWxhcml0eSBpcyB0aGUgc2NvcmluZyByb3V0aW5l
IGZvciBlYWNoIGRvY3VtZW50IHZzLiBhIHF1ZXJ5LgogICAgICBBIGN1c3RvbSBzaW1pbGFyaXR5
IG1heSBiZSBzcGVjaWZpZWQgaGVyZSwgYnV0IHRoZSBkZWZhdWx0IGlzIGZpbmUKICAgICAgZm9y
IG1vc3QgYXBwbGljYXRpb25zLiAgLS0+CiA8IS0tIDxzaW1pbGFyaXR5IGNsYXNzPSJvcmcuYXBh
Y2hlLmx1Y2VuZS5zZWFyY2guRGVmYXVsdFNpbWlsYXJpdHkiLz4gaWQ6MTQ0MDcxMC0tPgoKPC9z
Y2hlbWE+
------=_Part_38127_27361788.1222501594103
Content-Type: text/xml; name=solrconfig.xml
Content-Transfer-Encoding: base64
X-Attachment-Id: 0.3
Content-Disposition: attachment; filename=solrconfig.xml

PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiID8+CjwhLS0KIExpY2Vuc2VkIHRv
IHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmUgb3IgbW9yZQog
Y29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZSBkaXN0
cmlidXRlZCB3aXRoCiB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gcmVnYXJk
aW5nIGNvcHlyaWdodCBvd25lcnNoaXAuCiBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byBZ
b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMAogKHRoZSAiTGljZW5zZSIp
OyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGgKIHRo
ZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgogICAg
IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoKIFVubGVzcyByZXF1
aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUK
IGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJ
UyIgQkFTSVMsCiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwg
ZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNp
ZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKIGxpbWl0YXRpb25zIHVuZGVy
IHRoZSBMaWNlbnNlLgotLT4KCjxjb25maWc+CiAgPCEtLSBTZXQgdGhpcyB0byAnZmFsc2UnIGlm
IHlvdSB3YW50IHNvbHIgdG8gY29udGludWUgd29ya2luZyBhZnRlciBpdCBoYXMgCiAgICAgICBl
bmNvdW50ZXJlZCBhbiBzZXZlcmUgY29uZmlndXJhdGlvbiBlcnJvci4gIEluIGEgcHJvZHVjdGlv
biBlbnZpcm9ubWVudCwgCiAgICAgICB5b3UgbWF5IHdhbnQgc29sciB0byBrZWVwIHdvcmtpbmcg
ZXZlbiBpZiBvbmUgaGFuZGxlciBpcyBtaXMtY29uZmlndXJlZC4KCiAgICAgICBZb3UgbWF5IGFs
c28gc2V0IHRoaXMgdG8gZmFsc2UgdXNpbmcgYnkgc2V0dGluZyB0aGUgc3lzdGVtIHByb3BlcnR5
OgogICAgICAgICAtRHNvbHIuYWJvcnRPbkNvbmZpZ3VyYXRpb25FcnJvcj1mYWxzZQogICAgIC0t
PgogIDxhYm9ydE9uQ29uZmlndXJhdGlvbkVycm9yPiR7c29sci5hYm9ydE9uQ29uZmlndXJhdGlv
bkVycm9yOnRydWV9PC9hYm9ydE9uQ29uZmlndXJhdGlvbkVycm9yPgoKICA8IS0tIFVzZWQgdG8g
c3BlY2lmeSBhbiBhbHRlcm5hdGUgZGlyZWN0b3J5IHRvIGhvbGQgYWxsIGluZGV4IGRhdGEKICAg
ICAgIG90aGVyIHRoYW4gdGhlIGRlZmF1bHQgLi9kYXRhIHVuZGVyIHRoZSBTb2xyIGhvbWUuCiAg
ICAgICBJZiByZXBsaWNhdGlvbiBpcyBpbiB1c2UsIHRoaXMgc2hvdWxkIG1hdGNoIHRoZSByZXBs
aWNhdGlvbiBjb25maWd1cmF0aW9uLiAtLT4KICAKICA8ZGF0YURpcj5EOi9kZXYvc29sci9kYXRh
PC9kYXRhRGlyPgogIAoKICA8aW5kZXhEZWZhdWx0cz4KICAgPCEtLSBWYWx1ZXMgaGVyZSBhZmZl
Y3QgYWxsIGluZGV4IHdyaXRlcnMgYW5kIGFjdCBhcyBhIGRlZmF1bHQgdW5sZXNzIG92ZXJyaWRk
ZW4uIC0tPgogICAgPHVzZUNvbXBvdW5kRmlsZT5mYWxzZTwvdXNlQ29tcG91bmRGaWxlPgogICAg
PG1lcmdlRmFjdG9yPjEwPC9tZXJnZUZhY3Rvcj4KICAgIDxtYXhCdWZmZXJlZERvY3M+MTAwMDwv
bWF4QnVmZmVyZWREb2NzPgogICAgPG1heE1lcmdlRG9jcz4yMTQ3NDgzNjQ3PC9tYXhNZXJnZURv
Y3M+CiAgICA8bWF4RmllbGRMZW5ndGg+MTAwMDA8L21heEZpZWxkTGVuZ3RoPgogICAgPHdyaXRl
TG9ja1RpbWVvdXQ+MTAwMDwvd3JpdGVMb2NrVGltZW91dD4KICAgIDxjb21taXRMb2NrVGltZW91
dD4xMDAwMDwvY29tbWl0TG9ja1RpbWVvdXQ+CiAgPC9pbmRleERlZmF1bHRzPgoKICA8bWFpbklu
ZGV4PgogICAgPCEtLSBvcHRpb25zIHNwZWNpZmljIHRvIHRoZSBtYWluIG9uLWRpc2sgbHVjZW5l
IGluZGV4IC0tPgogICAgPHVzZUNvbXBvdW5kRmlsZT5mYWxzZTwvdXNlQ29tcG91bmRGaWxlPgog
ICAgPG1lcmdlRmFjdG9yPjEwPC9tZXJnZUZhY3Rvcj4KICAgIDxtYXhCdWZmZXJlZERvY3M+MTAw
MDwvbWF4QnVmZmVyZWREb2NzPgogICAgPG1heE1lcmdlRG9jcz4yMTQ3NDgzNjQ3PC9tYXhNZXJn
ZURvY3M+CiAgICA8bWF4RmllbGRMZW5ndGg+MTAwMDA8L21heEZpZWxkTGVuZ3RoPgoKICAgIDwh
LS0gSWYgdHJ1ZSwgdW5sb2NrIGFueSBoZWxkIHdyaXRlIG9yIGNvbW1pdCBsb2NrcyBvbiBzdGFy
dHVwLiAKICAgICAgICAgVGhpcyBkZWZlYXRzIHRoZSBsb2NraW5nIG1lY2hhbmlzbSB0aGF0IGFs
bG93cyBtdWx0aXBsZQogICAgICAgICBwcm9jZXNzZXMgdG8gc2FmZWx5IGFjY2VzcyBhIGx1Y2Vu
ZSBpbmRleCwgYW5kIHNob3VsZCBiZQogICAgICAgICB1c2VkIHdpdGggY2FyZS4gLS0+CiAgICA8
dW5sb2NrT25TdGFydHVwPmZhbHNlPC91bmxvY2tPblN0YXJ0dXA+CiAgPC9tYWluSW5kZXg+Cgog
IDwhLS0gdGhlIGRlZmF1bHQgaGlnaC1wZXJmb3JtYW5jZSB1cGRhdGUgaGFuZGxlciAtLT4KICA8
dXBkYXRlSGFuZGxlciBjbGFzcz0ic29sci5EaXJlY3RVcGRhdGVIYW5kbGVyMiI+CgogICAgPCEt
LSBBIHByZWZpeCBvZiAic29sci4iIGZvciBjbGFzcyBuYW1lcyBpcyBhbiBhbGlhcyB0aGF0CiAg
ICAgICAgIGNhdXNlcyBzb2xyIHRvIHNlYXJjaCBhcHByb3ByaWF0ZSBwYWNrYWdlcywgaW5jbHVk
aW5nCiAgICAgICAgIG9yZy5hcGFjaGUuc29sci4oc2VhcmNofHVwZGF0ZXxyZXF1ZXN0fGNvcmV8
YW5hbHlzaXMpCiAgICAgLS0+CgogICAgPCEtLSBhdXRvY29tbWl0IHBlbmRpbmcgZG9jcyBpZiBj
ZXJ0YWluIGNyaXRlcmlhIGFyZSBtZXQgCiAgICA8YXV0b0NvbW1pdD4gCiAgICAgIDxtYXhEb2Nz
PjEwMDAwPC9tYXhEb2NzPgogICAgICA8bWF4VGltZT4xMDAwPC9tYXhUaW1lPgogICAgPC9hdXRv
Q29tbWl0PgogICAgLS0+CgogICAgPCEtLSBUaGUgUnVuRXhlY3V0YWJsZUxpc3RlbmVyIGV4ZWN1
dGVzIGFuIGV4dGVybmFsIGNvbW1hbmQuCiAgICAgICAgIGV4ZSAtIHRoZSBuYW1lIG9mIHRoZSBl
eGVjdXRhYmxlIHRvIHJ1bgogICAgICAgICBkaXIgLSBkaXIgdG8gdXNlIGFzIHRoZSBjdXJyZW50
IHdvcmtpbmcgZGlyZWN0b3J5LiBkZWZhdWx0PSIuIgogICAgICAgICB3YWl0IC0gdGhlIGNhbGxp
bmcgdGhyZWFkIHdhaXRzIHVudGlsIHRoZSBleGVjdXRhYmxlIHJldHVybnMuIGRlZmF1bHQ9InRy
dWUiCiAgICAgICAgIGFyZ3MgLSB0aGUgYXJndW1lbnRzIHRvIHBhc3MgdG8gdGhlIHByb2dyYW0u
ICBkZWZhdWx0PW5vdGhpbmcKICAgICAgICAgZW52IC0gZW52aXJvbm1lbnQgdmFyaWFibGVzIHRv
IHNldC4gIGRlZmF1bHQ9bm90aGluZwogICAgICAtLT4KICAgIDwhLS0gQSBwb3N0Q29tbWl0IGV2
ZW50IGlzIGZpcmVkIGFmdGVyIGV2ZXJ5IGNvbW1pdCBvciBvcHRpbWl6ZSBjb21tYW5kCiAgICA8
bGlzdGVuZXIgZXZlbnQ9InBvc3RDb21taXQiIGNsYXNzPSJzb2xyLlJ1bkV4ZWN1dGFibGVMaXN0
ZW5lciI+CiAgICAgIDxzdHIgbmFtZT0iZXhlIj5zbmFwc2hvb3Rlcjwvc3RyPgogICAgICA8c3Ry
IG5hbWU9ImRpciI+c29sci9iaW48L3N0cj4KICAgICAgPGJvb2wgbmFtZT0id2FpdCI+dHJ1ZTwv
Ym9vbD4KICAgICAgPGFyciBuYW1lPSJhcmdzIj4gPHN0cj5hcmcxPC9zdHI+IDxzdHI+YXJnMjwv
c3RyPiA8L2Fycj4KICAgICAgPGFyciBuYW1lPSJlbnYiPiA8c3RyPk1ZVkFSPXZhbDE8L3N0cj4g
PC9hcnI+CiAgICA8L2xpc3RlbmVyPgogICAgLS0+CiAgICA8IS0tIEEgcG9zdE9wdGltaXplIGV2
ZW50IGlzIGZpcmVkIG9ubHkgYWZ0ZXIgZXZlcnkgb3B0aW1pemUgY29tbWFuZCwgdXNlZnVsCiAg
ICAgICAgIGluIGNvbmp1bmN0aW9uIHdpdGggaW5kZXggZGlzdHJpYnV0aW9uIHRvIG9ubHkgZGlz
dHJpYnV0ZSBvcHRpbWl6ZWQgaW5kaWNpZXMgCiAgICA8bGlzdGVuZXIgZXZlbnQ9InBvc3RPcHRp
bWl6ZSIgY2xhc3M9InNvbHIuUnVuRXhlY3V0YWJsZUxpc3RlbmVyIj4KICAgICAgPHN0ciBuYW1l
PSJleGUiPnNuYXBzaG9vdGVyPC9zdHI+CiAgICAgIDxzdHIgbmFtZT0iZGlyIj5zb2xyL2Jpbjwv
c3RyPgogICAgICA8Ym9vbCBuYW1lPSJ3YWl0Ij50cnVlPC9ib29sPgogICAgPC9saXN0ZW5lcj4K
ICAgIC0tPgoKICA8L3VwZGF0ZUhhbmRsZXI+CgoKICA8cXVlcnk+CiAgICA8IS0tIE1heGltdW0g
bnVtYmVyIG9mIGNsYXVzZXMgaW4gYSBib29sZWFuIHF1ZXJ5Li4uIGNhbiBhZmZlY3QKICAgICAg
ICByYW5nZSBvciBwcmVmaXggcXVlcmllcyB0aGF0IGV4cGFuZCB0byBiaWcgYm9vbGVhbgogICAg
ICAgIHF1ZXJpZXMuICBBbiBleGNlcHRpb24gaXMgdGhyb3duIGlmIGV4Y2VlZGVkLiAgLS0+CiAg
ICA8bWF4Qm9vbGVhbkNsYXVzZXM+MTAyNDwvbWF4Qm9vbGVhbkNsYXVzZXM+CgogICAgCiAgICA8
IS0tIENhY2hlIHVzZWQgYnkgU29sckluZGV4U2VhcmNoZXIgZm9yIGZpbHRlcnMgKERvY1NldHMp
LAogICAgICAgICB1bm9yZGVyZWQgc2V0cyBvZiAqYWxsKiBkb2N1bWVudHMgdGhhdCBtYXRjaCBh
IHF1ZXJ5LgogICAgICAgICBXaGVuIGEgbmV3IHNlYXJjaGVyIGlzIG9wZW5lZCwgaXRzIGNhY2hl
cyBtYXkgYmUgcHJlcG9wdWxhdGVkCiAgICAgICAgIG9yICJhdXRvd2FybWVkIiB1c2luZyBkYXRh
IGZyb20gY2FjaGVzIGluIHRoZSBvbGQgc2VhcmNoZXIuCiAgICAgICAgIGF1dG93YXJtQ291bnQg
aXMgdGhlIG51bWJlciBvZiBpdGVtcyB0byBwcmVwb3B1bGF0ZS4gIEZvciBMUlVDYWNoZSwKICAg
ICAgICAgdGhlIGF1dG93YXJtZWQgaXRlbXMgd2lsbCBiZSB0aGUgbW9zdCByZWNlbnRseSBhY2Nl
c3NlZCBpdGVtcy4KICAgICAgIFBhcmFtZXRlcnM6CiAgICAgICAgIGNsYXNzIC0gdGhlIFNvbHJD
YWNoZSBpbXBsZW1lbnRhdGlvbiAoY3VycmVudGx5IG9ubHkgTFJVQ2FjaGUpCiAgICAgICAgIHNp
emUgLSB0aGUgbWF4aW11bSBudW1iZXIgb2YgZW50cmllcyBpbiB0aGUgY2FjaGUKICAgICAgICAg
aW5pdGlhbFNpemUgLSB0aGUgaW5pdGlhbCBjYXBhY2l0eSAobnVtYmVyIG9mIGVudHJpZXMpIG9m
CiAgICAgICAgICAgdGhlIGNhY2hlLiAgKHNlZWwgamF2YS51dGlsLkhhc2hNYXApCiAgICAgICAg
IGF1dG93YXJtQ291bnQgLSB0aGUgbnVtYmVyIG9mIGVudHJpZXMgdG8gcHJlcG9wdWxhdGUgZnJv
bQogICAgICAgICAgIGFuZCBvbGQgY2FjaGUuCiAgICAgICAgIC0tPgogICAgPGZpbHRlckNhY2hl
CiAgICAgIGNsYXNzPSJzb2xyLkxSVUNhY2hlIgogICAgICBzaXplPSI1MTIiCiAgICAgIGluaXRp
YWxTaXplPSI1MTIiCiAgICAgIGF1dG93YXJtQ291bnQ9IjI1NiIvPgoKICAgPCEtLSBxdWVyeVJl
c3VsdENhY2hlIGNhY2hlcyByZXN1bHRzIG9mIHNlYXJjaGVzIC0gb3JkZXJlZCBsaXN0cyBvZgog
ICAgICAgICBkb2N1bWVudCBpZHMgKERvY0xpc3QpIGJhc2VkIG9uIGEgcXVlcnksIGEgc29ydCwg
YW5kIHRoZSByYW5nZQogICAgICAgICBvZiBkb2N1bWVudHMgcmVxdWVzdGVkLiAgLS0+CiAgICA8
cXVlcnlSZXN1bHRDYWNoZQogICAgICBjbGFzcz0ic29sci5MUlVDYWNoZSIKICAgICAgc2l6ZT0i
NTEyIgogICAgICBpbml0aWFsU2l6ZT0iNTEyIgogICAgICBhdXRvd2FybUNvdW50PSIyNTYiLz4K
CiAgPCEtLSBkb2N1bWVudENhY2hlIGNhY2hlcyBMdWNlbmUgRG9jdW1lbnQgb2JqZWN0cyAodGhl
IHN0b3JlZCBmaWVsZHMgZm9yIGVhY2ggZG9jdW1lbnQpLgogICAgICAgU2luY2UgTHVjZW5lIGlu
dGVybmFsIGRvY3VtZW50IGlkcyBhcmUgdHJhbnNpZW50LCB0aGlzIGNhY2hlIHdpbGwgbm90IGJl
IGF1dG93YXJtZWQuICAtLT4KICAgIDxkb2N1bWVudENhY2hlCiAgICAgIGNsYXNzPSJzb2xyLkxS
VUNhY2hlIgogICAgICBzaXplPSI1MTIiCiAgICAgIGluaXRpYWxTaXplPSI1MTIiCiAgICAgIGF1
dG93YXJtQ291bnQ9IjAiLz4KCiAgICA8IS0tIElmIHRydWUsIHN0b3JlZCBmaWVsZHMgdGhhdCBh
cmUgbm90IHJlcXVlc3RlZCB3aWxsIGJlIGxvYWRlZCBsYXppbHkuCgogICAgVGhpcyBjYW4gcmVz
dWx0IGluIGEgc2lnbmlmaWNhbnQgc3BlZWQgaW1wcm92ZW1lbnQgaWYgdGhlIHVzdWFsIGNhc2Ug
aXMgdG8KICAgIG5vdCBsb2FkIGFsbCBzdG9yZWQgZmllbGRzLCBlc3BlY2lhbGx5IGlmIHRoZSBz
a2lwcGVkIGZpZWxkcyBhcmUgbGFyZ2UgY29tcHJlc3NlZAogICAgdGV4dCBmaWVsZHMuCiAgICAt
LT4KICAgIDxlbmFibGVMYXp5RmllbGRMb2FkaW5nPnRydWU8L2VuYWJsZUxhenlGaWVsZExvYWRp
bmc+CgogICAgPCEtLSBFeGFtcGxlIG9mIGEgZ2VuZXJpYyBjYWNoZS4gIFRoZXNlIGNhY2hlcyBt
YXkgYmUgYWNjZXNzZWQgYnkgbmFtZQogICAgICAgICB0aHJvdWdoIFNvbHJJbmRleFNlYXJjaGVy
LmdldENhY2hlKCksY2FjaGVMb29rdXAoKSwgYW5kIGNhY2hlSW5zZXJ0KCkuCiAgICAgICAgIFRo
ZSBwdXJwb3NlIGlzIHRvIGVuYWJsZSBlYXN5IGNhY2hpbmcgb2YgdXNlci9hcHBsaWNhdGlvbiBs
ZXZlbCBkYXRhLgogICAgICAgICBUaGUgcmVnZW5lcmF0b3IgYXJndW1lbnQgc2hvdWxkIGJlIHNw
ZWNpZmllZCBhcyBhbiBpbXBsZW1lbnRhdGlvbgogICAgICAgICBvZiBzb2xyLnNlYXJjaC5DYWNo
ZVJlZ2VuZXJhdG9yIGlmIGF1dG93YXJtaW5nIGlzIGRlc2lyZWQuICAtLT4KICAgIDwhLS0KICAg
IDxjYWNoZSBuYW1lPSJteVVzZXJDYWNoZSIKICAgICAgY2xhc3M9InNvbHIuTFJVQ2FjaGUiCiAg
ICAgIHNpemU9IjQwOTYiCiAgICAgIGluaXRpYWxTaXplPSIxMDI0IgogICAgICBhdXRvd2FybUNv
dW50PSIxMDI0IgogICAgICByZWdlbmVyYXRvcj0ib3JnLm15Y29tcGFueS5teXBhY2thZ2UuTXlS
ZWdlbmVyYXRvciIKICAgICAgLz4KICAgIC0tPgoKICAgPCEtLSBBbiBvcHRpbWl6YXRpb24gdGhh
dCBhdHRlbXB0cyB0byB1c2UgYSBmaWx0ZXIgdG8gc2F0aXNmeSBhIHNlYXJjaC4KICAgICAgICAg
SWYgdGhlIHJlcXVlc3RlZCBzb3J0IGRvZXMgbm90IGluY2x1ZGUgc2NvcmUsIHRoZW4gdGhlIGZp
bHRlckNhY2hlCiAgICAgICAgIHdpbGwgYmUgY2hlY2tlZCBmb3IgYSBmaWx0ZXIgbWF0Y2hpbmcg
dGhlIHF1ZXJ5LiBJZiBmb3VuZCwgdGhlIGZpbHRlcgogICAgICAgICB3aWxsIGJlIHVzZWQgYXMg
dGhlIHNvdXJjZSBvZiBkb2N1bWVudCBpZHMsIGFuZCB0aGVuIHRoZSBzb3J0IHdpbGwgYmUKICAg
ICAgICAgYXBwbGllZCB0byB0aGF0LgogICAgPHVzZUZpbHRlckZvclNvcnRlZFF1ZXJ5PnRydWU8
L3VzZUZpbHRlckZvclNvcnRlZFF1ZXJ5PgogICAtLT4KCiAgIDwhLS0gQW4gb3B0aW1pemF0aW9u
IGZvciB1c2Ugd2l0aCB0aGUgcXVlcnlSZXN1bHRDYWNoZS4gIFdoZW4gYSBzZWFyY2gKICAgICAg
ICAgaXMgcmVxdWVzdGVkLCBhIHN1cGVyc2V0IG9mIHRoZSByZXF1ZXN0ZWQgbnVtYmVyIG9mIGRv
Y3VtZW50IGlkcwogICAgICAgICBhcmUgY29sbGVjdGVkLiAgRm9yIGV4YW1wbGUsIGlmIGEgc2Vh
cmNoIGZvciBhIHBhcnRpY3VsYXIgcXVlcnkKICAgICAgICAgcmVxdWVzdHMgbWF0Y2hpbmcgZG9j
dW1lbnRzIDEwIHRocm91Z2ggMTksIGFuZCBxdWVyeVdpbmRvd1NpemUgaXMgNTAsCiAgICAgICAg
IHRoZW4gZG9jdW1lbnRzIDAgdGhyb3VnaCA1MCB3aWxsIGJlIGNvbGxlY3RlZCBhbmQgY2FjaGVk
LiAgQW55IGZ1cnRoZXIKICAgICAgICAgcmVxdWVzdHMgaW4gdGhhdCByYW5nZSBjYW4gYmUgc2F0
aXNmaWVkIHZpYSB0aGUgY2FjaGUuICAtLT4KICAgIDxxdWVyeVJlc3VsdFdpbmRvd1NpemU+MTA8
L3F1ZXJ5UmVzdWx0V2luZG93U2l6ZT4KCiAgICA8IS0tIFRoaXMgZW50cnkgZW5hYmxlcyBhbiBp
bnQgaGFzaCByZXByZXNlbnRhdGlvbiBmb3IgZmlsdGVycyAoRG9jU2V0cykKICAgICAgICAgd2hl
biB0aGUgbnVtYmVyIG9mIGl0ZW1zIGluIHRoZSBzZXQgaXMgbGVzcyB0aGFuIG1heFNpemUuICBG
b3Igc21hbGxlcgogICAgICAgICBzZXRzLCB0aGlzIHJlcHJlc2VudGF0aW9uIGlzIG1vcmUgbWVt
b3J5IGVmZmljaWVudCwgbW9yZSBlZmZpY2llbnQgdG8KICAgICAgICAgaXRlcmF0ZSBvdmVyLCBh
bmQgZmFzdGVyIHRvIHRha2UgaW50ZXJzZWN0aW9ucy4gIC0tPgogICAgPEhhc2hEb2NTZXQgbWF4
U2l6ZT0iMzAwMCIgbG9hZEZhY3Rvcj0iMC43NSIvPgoKCiAgICA8IS0tIGJvb2xUb0ZpbHRlck9w
dGltaXplciBjb252ZXJ0cyBib29sZWFuIGNsYXVzZXMgd2l0aCB6ZXJvIGJvb3N0CiAgICAgICAg
IGludG8gY2FjaGVkIGZpbHRlcnMgaWYgdGhlIG51bWJlciBvZiBkb2NzIHNlbGVjdGVkIGJ5IHRo
ZSBjbGF1c2UgZXhjZWVkcwogICAgICAgICB0aGUgdGhyZXNob2xkIChyZXByZXNlbnRlZCBhcyBh
IGZyYWN0aW9uIG9mIHRoZSB0b3RhbCBpbmRleCkgLS0+CiAgICA8Ym9vbFRvZmlsdGVyT3B0aW1p
emVyIGVuYWJsZWQ9InRydWUiIGNhY2hlU2l6ZT0iMzIiIHRocmVzaG9sZD0iLjA1Ii8+CgoKICAg
IDwhLS0gYSBuZXdTZWFyY2hlciBldmVudCBpcyBmaXJlZCB3aGVuZXZlciBhIG5ldyBzZWFyY2hl
ciBpcyBiZWluZyBwcmVwYXJlZAogICAgICAgICBhbmQgdGhlcmUgaXMgYSBjdXJyZW50IHNlYXJj
aGVyIGhhbmRsaW5nIHJlcXVlc3RzIChha2EgcmVnaXN0ZXJlZCkuIC0tPgogICAgPCEtLSBRdWVy
eVNlbmRlckxpc3RlbmVyIHRha2VzIGFuIGFycmF5IG9mIE5hbWVkTGlzdCBhbmQgZXhlY3V0ZXMg
YQogICAgICAgICBsb2NhbCBxdWVyeSByZXF1ZXN0IGZvciBlYWNoIE5hbWVkTGlzdCBpbiBzZXF1
ZW5jZS4gLS0+CiAgICA8IS0tCiAgICA8bGlzdGVuZXIgZXZlbnQ9Im5ld1NlYXJjaGVyIiBjbGFz
cz0ic29sci5RdWVyeVNlbmRlckxpc3RlbmVyIj4KICAgICAgPGFyciBuYW1lPSJxdWVyaWVzIj4K
ICAgICAgICA8bHN0PiA8c3RyIG5hbWU9InEiPnNvbHI8L3N0cj4gPHN0ciBuYW1lPSJzdGFydCI+
MDwvc3RyPiA8c3RyIG5hbWU9InJvd3MiPjEwPC9zdHI+IDwvbHN0PgogICAgICAgIDxsc3Q+IDxz
dHIgbmFtZT0icSI+cm9ja3M8L3N0cj4gPHN0ciBuYW1lPSJzdGFydCI+MDwvc3RyPiA8c3RyIG5h
bWU9InJvd3MiPjEwPC9zdHI+IDwvbHN0PgogICAgICA8L2Fycj4KICAgIDwvbGlzdGVuZXI+CiAg
ICAtLT4KCiAgICA8IS0tIGEgZmlyc3RTZWFyY2hlciBldmVudCBpcyBmaXJlZCB3aGVuZXZlciBh
IG5ldyBzZWFyY2hlciBpcyBiZWluZwogICAgICAgICBwcmVwYXJlZCBidXQgdGhlcmUgaXMgbm8g
Y3VycmVudCByZWdpc3RlcmVkIHNlYXJjaGVyIHRvIGhhbmRsZQogICAgICAgICByZXF1ZXN0cyBv
ciB0byBnYWluIGF1dG93YXJtaW5nIGRhdGEgZnJvbS4gLS0+CiAgICA8IS0tCiAgICA8bGlzdGVu
ZXIgZXZlbnQ9ImZpcnN0U2VhcmNoZXIiIGNsYXNzPSJzb2xyLlF1ZXJ5U2VuZGVyTGlzdGVuZXIi
PgogICAgICA8YXJyIG5hbWU9InF1ZXJpZXMiPgogICAgICAgIDxsc3Q+IDxzdHIgbmFtZT0icSI+
ZmFzdF93YXJtPC9zdHI+IDxzdHIgbmFtZT0ic3RhcnQiPjA8L3N0cj4gPHN0ciBuYW1lPSJyb3dz
Ij4xMDwvc3RyPiA8L2xzdD4KICAgICAgPC9hcnI+CiAgICA8L2xpc3RlbmVyPgogICAgLS0+Cgog
ICAgPCEtLSBJZiBhIHNlYXJjaCByZXF1ZXN0IGNvbWVzIGluIGFuZCB0aGVyZSBpcyBubyBjdXJy
ZW50IHJlZ2lzdGVyZWQgc2VhcmNoZXIsCiAgICAgICAgIHRoZW4gaW1tZWRpYXRlbHkgcmVnaXN0
ZXIgdGhlIHN0aWxsIHdhcm1pbmcgc2VhcmNoZXIgYW5kIHVzZSBpdC4gIElmCiAgICAgICAgICJm
YWxzZSIgdGhlbiBhbGwgcmVxdWVzdHMgd2lsbCBibG9jayB1bnRpbCB0aGUgZmlyc3Qgc2VhcmNo
ZXIgaXMgZG9uZQogICAgICAgICB3YXJtaW5nLiAtLT4KICAgIDx1c2VDb2xkU2VhcmNoZXI+ZmFs
c2U8L3VzZUNvbGRTZWFyY2hlcj4KCiAgICA8IS0tIE1heGltdW0gbnVtYmVyIG9mIHNlYXJjaGVy
cyB0aGF0IG1heSBiZSB3YXJtaW5nIGluIHRoZSBiYWNrZ3JvdW5kCiAgICAgIGNvbmN1cnJlbnRs
eS4gIEFuIGVycm9yIGlzIHJldHVybmVkIGlmIHRoaXMgbGltaXQgaXMgZXhjZWVkZWQuIFJlY29t
bWVuZAogICAgICAxLTIgZm9yIHJlYWQtb25seSBzbGF2ZXMsIGhpZ2hlciBmb3IgbWFzdGVycyB3
L28gY2FjaGUgd2FybWluZy4gLS0+CiAgICA8bWF4V2FybWluZ1NlYXJjaGVycz40PC9tYXhXYXJt
aW5nU2VhcmNoZXJzPgoKICA8L3F1ZXJ5PgoKICA8IS0tIAogICAgTGV0IHRoZSBkaXNwYXRjaCBm
aWx0ZXIgaGFuZGxlciAvc2VsZWN0P3F0PVhYWAogICAgaGFuZGxlU2VsZWN0PXRydWUgd2lsbCB1
c2UgY29uc2lzdGVudCBlcnJvciBoYW5kbGluZyBmb3IgL3NlbGVjdCBhbmQgL3VwZGF0ZQogICAg
aGFuZGxlU2VsZWN0PWZhbHNlIHdpbGwgdXNlIHNvbHIxLjEgc3R5bGUgZXJyb3IgZm9ybWF0dGlu
ZwogICAgLS0+CiAgPHJlcXVlc3REaXNwYXRjaGVyIGhhbmRsZVNlbGVjdD0idHJ1ZSIgPgogICAg
PCEtLU1ha2Ugc3VyZSB5b3VyIHN5c3RlbSBoYXMgc29tZSBhdXRoZW50aWNhdGlvbiBiZWZvcmUg
ZW5hYmxpbmcgcmVtb3RlIHN0cmVhbWluZyEgIC0tPgogICAgPHJlcXVlc3RQYXJzZXJzIGVuYWJs
ZVJlbW90ZVN0cmVhbWluZz0iZmFsc2UiIG11bHRpcGFydFVwbG9hZExpbWl0SW5LQj0iMjA0OCIg
Lz4KICA8L3JlcXVlc3REaXNwYXRjaGVyPgogIAogICAgICAKICA8IS0tIHJlcXVlc3RIYW5kbGVy
IHBsdWdpbnMuLi4gaW5jb21pbmcgcXVlcmllcyB3aWxsIGJlIGRpc3BhdGNoZWQgdG8gdGhlCiAg
ICAgY29ycmVjdCBoYW5kbGVyIGJhc2VkIG9uIHRoZSBxdCAocXVlcnkgdHlwZSkgcGFyYW0gbWF0
Y2hpbmcgdGhlCiAgICAgbmFtZSBvZiByZWdpc3RlcmVkIGhhbmRsZXJzLgogICAgIFRoZSAic3Rh
bmRhcmQiIHJlcXVlc3QgaGFuZGxlciBpcyB0aGUgZGVmYXVsdCBhbmQgd2lsbCBiZSB1c2VkIGlm
IHF0CiAgICAgaXMgbm90IHNwZWNpZmllZCBpbiB0aGUgcmVxdWVzdC4KICAtLT4KICA8cmVxdWVz
dEhhbmRsZXIgbmFtZT0ic3RhbmRhcmQiIGNsYXNzPSJzb2xyLlN0YW5kYXJkUmVxdWVzdEhhbmRs
ZXIiPgogICAgPCEtLSBkZWZhdWx0IHZhbHVlcyBmb3IgcXVlcnkgcGFyYW1ldGVycyAtLT4KICAg
ICA8bHN0IG5hbWU9ImRlZmF1bHRzIj4KICAgICAgIDxzdHIgbmFtZT0iZWNob1BhcmFtcyI+ZXhw
bGljaXQ8L3N0cj4KICAgICAgIDwhLS0gCiAgICAgICA8aW50IG5hbWU9InJvd3MiPjEwPC9pbnQ+
CiAgICAgICA8c3RyIG5hbWU9ImZsIj4qPC9zdHI+CiAgICAgICA8c3RyIG5hbWU9InZlcnNpb24i
PjIuMTwvc3RyPgogICAgICAgIC0tPgogICAgIDwvbHN0PgogIDwvcmVxdWVzdEhhbmRsZXI+Cgog
IDwhLS0gRGlzTWF4UmVxdWVzdEhhbmRsZXIgYWxsb3dzIGVhc3kgc2VhcmNoaW5nIGFjcm9zcyBt
dWx0aXBsZSBmaWVsZHMKICAgICAgIGZvciBzaW1wbGUgdXNlci1lbnRlcmVkIHBocmFzZXMuIAog
ICAgICAgc2VlIGh0dHA6Ly93aWtpLmFwYWNoZS5vcmcvc29sci9EaXNNYXhSZXF1ZXN0SGFuZGxl
cgogICAtLT4KICA8cmVxdWVzdEhhbmRsZXIgbmFtZT0iZGlzbWF4IiBjbGFzcz0ic29sci5EaXNN
YXhSZXF1ZXN0SGFuZGxlciIgPgogICAgPGxzdCBuYW1lPSJkZWZhdWx0cyI+CiAgICAgPHN0ciBu
YW1lPSJlY2hvUGFyYW1zIj5leHBsaWNpdDwvc3RyPgogICAgIDxmbG9hdCBuYW1lPSJ0aWUiPjAu
MDE8L2Zsb2F0PgogICAgIDxzdHIgbmFtZT0icWYiPgogICAgICAgIHRleHReMC41IGZlYXR1cmVz
XjEuMCBuYW1lXjEuMiBza3VeMS41IGlkXjEwLjAgbWFudV4xLjEgY2F0XjEuNAogICAgIDwvc3Ry
PgogICAgIDxzdHIgbmFtZT0icGYiPgogICAgICAgIHRleHReMC4yIGZlYXR1cmVzXjEuMSBuYW1l
XjEuNSBtYW51XjEuNCBtYW51X2V4YWN0XjEuOQogICAgIDwvc3RyPgogICAgIDxzdHIgbmFtZT0i
YmYiPgogICAgICAgIG9yZChwb3BsYXJpdHkpXjAuNSByZWNpcChyb3JkKHByaWNlKSwxLDEwMDAs
MTAwMCleMC4zCiAgICAgPC9zdHI+CiAgICAgPHN0ciBuYW1lPSJmbCI+CiAgICAgICAgaWQsbmFt
ZSxwcmljZSxzY29yZQogICAgIDwvc3RyPgogICAgIDxzdHIgbmFtZT0ibW0iPgogICAgICAgIDIm
bHQ7LTEgNSZsdDstMiA2Jmx0OzkwJQogICAgIDwvc3RyPgogICAgIDxpbnQgbmFtZT0icHMiPjEw
MDwvaW50PgogICAgIDxzdHIgbmFtZT0icS5hbHQiPio6Kjwvc3RyPgogICAgPC9sc3Q+CiAgPC9y
ZXF1ZXN0SGFuZGxlcj4KCiAgPCEtLSBOb3RlIGhvdyB5b3UgY2FuIHJlZ2lzdGVyIHRoZSBzYW1l
IGhhbmRsZXIgbXVsdGlwbGUgdGltZXMgd2l0aAogICAgICAgZGlmZmVyZW50IG5hbWVzIChhbmQg
ZGlmZmVyZW50IGluaXQgcGFyYW1ldGVycykKICAgIC0tPgogIDxyZXF1ZXN0SGFuZGxlciBuYW1l
PSJwYXJ0aXRpb25lZCIgY2xhc3M9InNvbHIuRGlzTWF4UmVxdWVzdEhhbmRsZXIiID4KICAgIDxs
c3QgbmFtZT0iZGVmYXVsdHMiPgogICAgIDxzdHIgbmFtZT0iZWNob1BhcmFtcyI+ZXhwbGljaXQ8
L3N0cj4KICAgICA8c3RyIG5hbWU9InFmIj50ZXh0XjAuNSBmZWF0dXJlc14xLjAgbmFtZV4xLjIg
c2t1XjEuNSBpZF4xMC4wPC9zdHI+CiAgICAgPHN0ciBuYW1lPSJtbSI+MiZsdDstMSA1Jmx0Oy0y
IDYmbHQ7OTAlPC9zdHI+CiAgICAgPCEtLSBUaGlzIGlzIGFuIGV4YW1wbGUgb2YgdXNpbmcgRGF0
ZSBNYXRoIHRvIHNwZWNpZnkgYSBjb25zdGFudGx5CiAgICAgICAgICBtb3ZpbmcgZGF0ZSByYW5n
ZSBpbiBhIGNvbmZpZy4uLgogICAgICAgLS0+CiAgICAgPHN0ciBuYW1lPSJicSI+aW5jdWJhdGlv
bmRhdGVfZHQ6WyogVE8gTk9XL0RBWS0xTU9OVEhdXjIuMjwvc3RyPgogICAgPC9sc3Q+CiAgICA8
IS0tIEluIGFkZGl0aW9uIHRvIGRlZmF1bHRzLCAiYXBwZW5kcyIgcGFyYW1zIGNhbiBiZSBzcGVj
aWZpZWQKICAgICAgICAgdG8gaWRlbnRpZnkgdmFsdWVzIHdoaWNoIHNob3VsZCBiZSBhcHBlbmRl
ZCB0byB0aGUgbGlzdCBvZgogICAgICAgICBtdWx0aS12YWwgcGFyYW1zIGZyb20gdGhlIHF1ZXJ5
IChvciB0aGUgZXhpc3RpbmcgImRlZmF1bHRzIikuCgogICAgICAgICBJbiB0aGlzIGV4YW1wbGUs
IHRoZSBwYXJhbSAiZnE9aW5zdG9jazp0cnVlIiB3aWxsIGJlIGFwcGVuZGVkIHRvCiAgICAgICAg
IGFueSBxdWVyeSB0aW1lIGZxIHBhcmFtcyB0aGUgdXNlciBtYXkgc3BlY2lmeSwgYXMgYSBtZWNo
YW5pc20gZm9yCiAgICAgICAgIHBhcnRpdGlvbmluZyB0aGUgaW5kZXgsIGluZGVwZW5kZW50IG9m
IGFueSB1c2VyIHNlbGVjdGVkIGZpbHRlcmluZwogICAgICAgICB0aGF0IG1heSBhbHNvIGJlIGRl
c2lyZWQgKHBlcmhhcHMgYXMgYSByZXN1bHQgb2YgZmFjZXRlZCBzZWFyY2hpbmcpLgoKICAgICAg
ICAgTk9URTogdGhlcmUgaXMgKmFic29sdXRlbHkqIG5vdGhpbmcgYSBjbGllbnQgY2FuIGRvIHRv
IHByZXZlbnQgdGhlc2UKICAgICAgICAgImFwcGVuZHMiIHZhbHVlcyBmcm9tIGJlaW5nIHVzZWQs
IHNvIGRvbid0IHVzZSB0aGlzIG1lY2hhbmlzbQogICAgICAgICB1bmxlc3MgeW91IGFyZSBzdXJl
IHlvdSBhbHdheXMgd2FudCBpdC4KICAgICAgLS0+CiAgICA8bHN0IG5hbWU9ImFwcGVuZHMiPgog
ICAgICA8c3RyIG5hbWU9ImZxIj5pblN0b2NrOnRydWU8L3N0cj4KICAgIDwvbHN0PgogICAgPCEt
LSAiaW52YXJpYW50cyIgYXJlIGEgd2F5IG9mIGxldHRpbmcgdGhlIFNvbHIgbWFpbnRhaW5lciBs
b2NrIGRvd24KICAgICAgICAgdGhlIG9wdGlvbnMgYXZhaWxhYmxlIHRvIFNvbHIgY2xpZW50cy4g
IEFueSBwYXJhbXMgdmFsdWVzCiAgICAgICAgIHNwZWNpZmllZCBoZXJlIGFyZSB1c2VkIHJlZ2Fy
ZGxlc3Mgb2Ygd2hhdCB2YWx1ZXMgbWF5IGJlIHNwZWNpZmllZAogICAgICAgICBpbiBlaXRoZXIg
dGhlIHF1ZXJ5LCB0aGUgImRlZmF1bHRzIiwgb3IgdGhlICJhcHBlbmRzIiBwYXJhbXMuCgogICAg
ICAgICBJbiB0aGlzIGV4YW1wbGUsIHRoZSBmYWNldC5maWVsZCBhbmQgZmFjZXQucXVlcnkgcGFy
YW1zIGFyZSBmaXhlZCwKICAgICAgICAgbGltaXRpbmcgdGhlIGZhY2V0cyBjbGllbnRzIGNhbiB1
c2UuICBGYWNldGluZyBpcyBub3QgdHVybmVkIG9uIGJ5CiAgICAgICAgIGRlZmF1bHQgLSBidXQg
aWYgdGhlIGNsaWVudCBkb2VzIHNwZWNpZnkgZmFjZXQ9dHJ1ZSBpbiB0aGUgcmVxdWVzdCwKICAg
ICAgICAgdGhlc2UgYXJlIHRoZSBvbmx5IGZhY2V0cyB0aGV5IHdpbGwgYmUgYWJsZSB0byBzZWUg
Y291bnRzIGZvcjsKICAgICAgICAgcmVnYXJkbGVzcyBvZiB3aGF0IG90aGVyIGZhY2V0LmZpZWxk
IG9yIGZhY2V0LnF1ZXJ5IHBhcmFtcyB0aGV5CiAgICAgICAgIG1heSBzcGVjaWZ5LgoKICAgICAg
ICAgTk9URTogdGhlcmUgaXMgKmFic29sdXRlbHkqIG5vdGhpbmcgYSBjbGllbnQgY2FuIGRvIHRv
IHByZXZlbnQgdGhlc2UKICAgICAgICAgImludmFyaWFudHMiIHZhbHVlcyBmcm9tIGJlaW5nIHVz
ZWQsIHNvIGRvbid0IHVzZSB0aGlzIG1lY2hhbmlzbQogICAgICAgICB1bmxlc3MgeW91IGFyZSBz
dXJlIHlvdSBhbHdheXMgd2FudCBpdC4KICAgICAgLS0+CiAgICA8bHN0IG5hbWU9ImludmFyaWFu
dHMiPgogICAgICA8c3RyIG5hbWU9ImZhY2V0LmZpZWxkIj5jYXQ8L3N0cj4KICAgICAgPHN0ciBu
YW1lPSJmYWNldC5maWVsZCI+bWFudV9leGFjdDwvc3RyPgogICAgICA8c3RyIG5hbWU9ImZhY2V0
LnF1ZXJ5Ij5wcmljZTpbKiBUTyA1MDBdPC9zdHI+CiAgICAgIDxzdHIgbmFtZT0iZmFjZXQucXVl
cnkiPnByaWNlOls1MDAgVE8gKl08L3N0cj4KICAgIDwvbHN0PgogIDwvcmVxdWVzdEhhbmRsZXI+
CiAgCiAgPHJlcXVlc3RIYW5kbGVyIG5hbWU9Imluc3RvY2siIGNsYXNzPSJzb2xyLkRpc01heFJl
cXVlc3RIYW5kbGVyIiA+CiAgICA8IS0tIGZvciBsZWdhY3kgcmVhc29ucywgRGlzTWF4UmVxdWVz
dEhhbmRsZXIgd2lsbCBhc3N1bWUgYWxsIGluaXQKICAgICAgICAgcGFyYW1zIGFyZSAiZGVmYXVs
dHMiIGlmIHlvdSBkb24ndCBleHBsaWNpdGx5IHNwZWNpZnkgYW55IGRlZmF1bHRzLgogICAgICAt
LT4KICAgICA8c3RyIG5hbWU9ImZxIj4KICAgICAgICBpblN0b2NrOnRydWUKICAgICA8L3N0cj4K
ICAgICA8c3RyIG5hbWU9InFmIj4KICAgICAgICB0ZXh0XjAuNSBmZWF0dXJlc14xLjAgbmFtZV4x
LjIgc2t1XjEuNSBpZF4xMC4wIG1hbnVeMS4xIGNhdF4xLjQKICAgICA8L3N0cj4KICAgICA8c3Ry
IG5hbWU9Im1tIj4KICAgICAgICAyJmx0Oy0xIDUmbHQ7LTIgNiZsdDs5MCUKICAgICA8L3N0cj4K
ICA8L3JlcXVlc3RIYW5kbGVyPgoKCiAgPCEtLSBTcGVsbENoZWNrZXJSZXF1ZXN0SGFuZGxlciB0
YWtlcyBpbiBhIHdvcmQgKG9yIHNldmVyYWwgd29yZHMpIGFzIHRoZQogICAgICAgdmFsdWUgb2Yg
dGhlICJxIiBwYXJhbWV0ZXIgYW5kIHJldHVybnMgYSBsaXN0IG9mIGFsdGVybmF0aXZlIHNwZWxs
aW5nCiAgICAgICBzdWdnZXN0aW9ucy4gIElmIGludm9rZWQgd2l0aCBhIC4uLiZjbWQ9cmVidWls
ZCwgaXQgd2lsbCByZWJ1aWxkIHRoZQogICAgICAgc3BlbGxjaGVja2VyIGluZGV4LgogIC0tPgog
IDxyZXF1ZXN0SGFuZGxlciBuYW1lPSJzcGVsbGNoZWNrZXIiIGNsYXNzPSJzb2xyLlNwZWxsQ2hl
Y2tlclJlcXVlc3RIYW5kbGVyIiBzdGFydHVwPSJsYXp5Ij4KICAgIDwhLS0gZGVmYXVsdCB2YWx1
ZXMgZm9yIHF1ZXJ5IHBhcmFtZXRlcnMgLS0+CiAgICAgPGxzdCBuYW1lPSJkZWZhdWx0cyI+CiAg
ICAgICA8aW50IG5hbWU9InN1Z2dlc3Rpb25Db3VudCI+MTwvaW50PgogICAgICAgPGZsb2F0IG5h
bWU9ImFjY3VyYWN5Ij4wLjU8L2Zsb2F0PgogICAgIDwvbHN0PgogICAgIAogICAgIDwhLS0gTWFp
biBpbml0IHBhcmFtcyBmb3IgaGFuZGxlciAtLT4KICAgICAKICAgICA8IS0tIFRoZSBkaXJlY3Rv
cnkgd2hlcmUgeW91ciBTcGVsbENoZWNrZXIgSW5kZXggc2hvdWxkIGxpdmUuICAgLS0+CiAgICAg
PCEtLSBNYXkgYmUgYWJzb2x1dGUsIG9yIHJlbGF0aXZlIHRvIHRoZSBTb2xyICJkYXRhRGlyIiBk
aXJlY3RvcnkuIC0tPgogICAgIDwhLS0gSWYgdGhpcyBvcHRpb24gaXMgbm90IHNwZWNpZmllZCwg
YSBSQU0gZGlyZWN0b3J5IHdpbGwgYmUgdXNlZCAtLT4KICAgICA8c3RyIG5hbWU9InNwZWxsY2hl
Y2tlckluZGV4RGlyIj5zcGVsbDwvc3RyPgogICAgIAogICAgIDwhLS0gdGhlIGZpZWxkIGluIHlv
dXIgc2NoZW1hIHRoYXQgeW91IHdhbnQgdG8gYmUgYWJsZSB0byBidWlsZCAtLT4KICAgICA8IS0t
IHlvdXIgc3BlbGwgaW5kZXggb24uIFRoaXMgc2hvdWxkIGJlIGEgZmllbGQgdGhhdCB1c2VzIGEg
dmVyeSAtLT4KICAgICA8IS0tIHNpbXBsZSBGaWVsZFR5cGUgd2l0aG91dCBhIGxvdCBvZiBBbmFs
eXNpcyAoaWU6IHN0cmluZykgLS0+CiAgICAgPHN0ciBuYW1lPSJ0ZXJtU291cmNlRmllbGQiPndv
cmQ8L3N0cj4KICAgICAKICAgPC9yZXF1ZXN0SGFuZGxlcj4KCiAgCiAgPCEtLSBVcGRhdGUgcmVx
dWVzdCBoYW5kbGVyLiAgCiAgCiAgICAgICBOb3RlOiBTaW5jZSBzb2xyMS4xIHJlcXVlc3RIYW5k
bGVycyByZXF1aXJlcyBhIHZhbGlkIGNvbnRlbnQgdHlwZSBoZWFkZXIgaWYgcG9zdGVkIGluIAog
ICAgICAgdGhlIGJvZHkuIEZvciBleGFtcGxlLCBjdXJsIG5vdyByZXF1aXJlczogLUggJ0NvbnRl
bnQtdHlwZTp0ZXh0L3htbDsgY2hhcnNldD11dGYtOCcKICAgICAgIFRoZSByZXNwb25zZSBmb3Jt
YXQgZGlmZmVycyBmcm9tIHNvbHIxLjEgZm9ybWF0dGluZyBhbmQgcmV0dXJucyBhIHN0YW5kYXJk
IGVycm9yIGNvZGUuCiAgICAgICAKICAgICAgIFRvIGVuYWJsZSBzb2xyMS4xIGJlaGF2aW9yLCBy
ZW1vdmUgdGhlIC91cGRhdGUgaGFuZGxlciBvciBjaGFuZ2UgaXRzIHBhdGgKICAgIC0tPgogIDxy
ZXF1ZXN0SGFuZGxlciBuYW1lPSIvdXBkYXRlIiBjbGFzcz0ic29sci5YbWxVcGRhdGVSZXF1ZXN0
SGFuZGxlciIgLz4KCiAgPCEtLSBDU1YgdXBkYXRlIGhhbmRsZXIsIGxvYWRlZCBvbiBkZW1hbmQg
LS0+CiAgPHJlcXVlc3RIYW5kbGVyIG5hbWU9Ii91cGRhdGUvY3N2IiBjbGFzcz0ic29sci5DU1ZS
ZXF1ZXN0SGFuZGxlciIgc3RhcnR1cD0ibGF6eSIgLz4KCgogIDwhLS0gQWRtaW4gSGFuZGxlcnMu
ICBUT0RPPyBUaGVyZSBjb3VsZCBiZSBhIHNpbmdsZSBoYW5kbGVyIHRoYXQgbG9hZHMgdGhlbSBh
bGwuLi4gLS0+CiAgPHJlcXVlc3RIYW5kbGVyIG5hbWU9Ii9hZG1pbi9sdWtlIiAgICAgICBjbGFz
cz0ib3JnLmFwYWNoZS5zb2xyLmhhbmRsZXIuYWRtaW4uTHVrZVJlcXVlc3RIYW5kbGVyIiAvPgog
IDxyZXF1ZXN0SGFuZGxlciBuYW1lPSIvYWRtaW4vc3lzdGVtIiAgICAgY2xhc3M9Im9yZy5hcGFj
aGUuc29sci5oYW5kbGVyLmFkbWluLlN5c3RlbUluZm9IYW5kbGVyIiAvPgogIDxyZXF1ZXN0SGFu
ZGxlciBuYW1lPSIvYWRtaW4vcGx1Z2lucyIgICAgY2xhc3M9Im9yZy5hcGFjaGUuc29sci5oYW5k
bGVyLmFkbWluLlBsdWdpbkluZm9IYW5kbGVyIiAvPgogIDxyZXF1ZXN0SGFuZGxlciBuYW1lPSIv
YWRtaW4vdGhyZWFkcyIgICAgY2xhc3M9Im9yZy5hcGFjaGUuc29sci5oYW5kbGVyLmFkbWluLlRo
cmVhZER1bXBIYW5kbGVyIiAvPgogIDxyZXF1ZXN0SGFuZGxlciBuYW1lPSIvYWRtaW4vcHJvcGVy
dGllcyIgY2xhc3M9Im9yZy5hcGFjaGUuc29sci5oYW5kbGVyLmFkbWluLlByb3BlcnRpZXNSZXF1
ZXN0SGFuZGxlciIgLz4KICAKICA8IS0tIEVjaG8gdGhlIHJlcXVlc3QgY29udGVudHMgYmFjayB0
byB0aGUgY2xpZW50IC0tPgogIDxyZXF1ZXN0SGFuZGxlciBuYW1lPSIvZGVidWcvZHVtcCIgY2xh
c3M9InNvbHIuRHVtcFJlcXVlc3RIYW5kbGVyIiA+CiAgICA8bHN0IG5hbWU9ImRlZmF1bHRzIj4K
ICAgICA8c3RyIG5hbWU9ImVjaG9QYXJhbXMiPmV4cGxpY2l0PC9zdHI+IDwhLS0gZm9yIGFsbCBw
YXJhbXMgKGluY2x1ZGluZyB0aGUgZGVmYXVsdCBldGMpIHVzZTogJ2FsbCcgLS0+CiAgICAgPHN0
ciBuYW1lPSJlY2hvSGFuZGxlciI+dHJ1ZTwvc3RyPgogICAgPC9sc3Q+CiAgPC9yZXF1ZXN0SGFu
ZGxlcj4KICA8IS0tIERpbmVzaCAtLT4KICA8cmVxdWVzdEhhbmRsZXIgbmFtZT0iL2RhdGFpbXBv
cnQiIGNsYXNzPSJvcmcuYXBhY2hlLnNvbHIuaGFuZGxlci5kYXRhaW1wb3J0LkRhdGFJbXBvcnRI
YW5kbGVyIj4KICAgIDxsc3QgbmFtZT0iZGVmYXVsdHMiPgoJICAgIDxzdHIgbmFtZT0iY29uZmln
Ij5kYi1kYXRhLWNvbmZpZy54bWw8L3N0cj4KICAgICAgPCEtLSA8bHN0IG5hbWU9ImRhdGFzb3Vy
Y2UiPgogICAgICAgICA8c3RyIG5hbWU9ImRyaXZlciI+b3JnLmhzcWxkYi5qZGJjRHJpdmVyPC9z
dHI+CiAgICAgICAgIDxzdHIgbmFtZT0idXJsIj5qZGJjOmhzcWxkYjouL2hzcWxkYi9leDwvc3Ry
PgogICAgICAgICA8c3RyIG5hbWU9InVzZXIiPnNhPC9zdHI+ICAgICAgICAgCiAgICAgIDwvbHN0
PiAtLT4KICAgIDwvbHN0PgogIDwvcmVxdWVzdEhhbmRsZXI+CiAgPCEtLSBxdWVyeVJlc3BvbnNl
V3JpdGVyIHBsdWdpbnMuLi4gcXVlcnkgcmVzcG9uc2VzIHdpbGwgYmUgd3JpdHRlbiB1c2luZyB0
aGUKICAgIHdyaXRlciBzcGVjaWZpZWQgYnkgdGhlICd3dCcgcmVxdWVzdCBwYXJhbWV0ZXIgbWF0
Y2hpbmcgdGhlIG5hbWUgb2YgYSByZWdpc3RlcmVkCiAgICB3cml0ZXIuCiAgICBUaGUgInN0YW5k
YXJkIiB3cml0ZXIgaXMgdGhlIGRlZmF1bHQgYW5kIHdpbGwgYmUgdXNlZCBpZiAnd3QnIGlzIG5v
dCBzcGVjaWZpZWQgCiAgICBpbiB0aGUgcmVxdWVzdC4gWE1MUmVzcG9uc2VXcml0ZXIgd2lsbCBi
ZSB1c2VkIGlmIG5vdGhpbmcgaXMgc3BlY2lmaWVkIGhlcmUuCiAgICBUaGUganNvbiwgcHl0aG9u
LCBhbmQgcnVieSB3cml0ZXJzIGFyZSBhbHNvIGF2YWlsYWJsZSBieSBkZWZhdWx0LgoKICAgIDxx
dWVyeVJlc3BvbnNlV3JpdGVyIG5hbWU9InN0YW5kYXJkIiBjbGFzcz0ib3JnLmFwYWNoZS5zb2xy
LnJlcXVlc3QuWE1MUmVzcG9uc2VXcml0ZXIiLz4KICAgIDxxdWVyeVJlc3BvbnNlV3JpdGVyIG5h
bWU9Impzb24iIGNsYXNzPSJvcmcuYXBhY2hlLnNvbHIucmVxdWVzdC5KU09OUmVzcG9uc2VXcml0
ZXIiLz4KICAgIDxxdWVyeVJlc3BvbnNlV3JpdGVyIG5hbWU9InB5dGhvbiIgY2xhc3M9Im9yZy5h
cGFjaGUuc29sci5yZXF1ZXN0LlB5dGhvblJlc3BvbnNlV3JpdGVyIi8+CiAgICA8cXVlcnlSZXNw
b25zZVdyaXRlciBuYW1lPSJydWJ5IiBjbGFzcz0ib3JnLmFwYWNoZS5zb2xyLnJlcXVlc3QuUnVi
eVJlc3BvbnNlV3JpdGVyIi8+CgogICAgPHF1ZXJ5UmVzcG9uc2VXcml0ZXIgbmFtZT0iY3VzdG9t
IiBjbGFzcz0iY29tLmV4YW1wbGUuTXlSZXNwb25zZVdyaXRlciIvPgogIC0tPgoKICA8IS0tIFhT
TFQgcmVzcG9uc2Ugd3JpdGVyIHRyYW5zZm9ybXMgdGhlIFhNTCBvdXRwdXQgYnkgYW55IHhzbHQg
ZmlsZSBmb3VuZAogICAgICAgaW4gU29scidzIGNvbmYveHNsdCBkaXJlY3RvcnkuICBDaGFuZ2Vz
IHRvIHhzbHQgZmlsZXMgYXJlIGNoZWNrZWQgZm9yCiAgICAgICBldmVyeSB4c2x0Q2FjaGVMaWZl
dGltZVNlY29uZHMuICAKICAgLS0+CiAgPHF1ZXJ5UmVzcG9uc2VXcml0ZXIgbmFtZT0ieHNsdCIg
Y2xhc3M9Im9yZy5hcGFjaGUuc29sci5yZXF1ZXN0LlhTTFRSZXNwb25zZVdyaXRlciI+CiAgICA8
aW50IG5hbWU9InhzbHRDYWNoZUxpZmV0aW1lU2Vjb25kcyI+NTwvaW50PgogIDwvcXVlcnlSZXNw
b25zZVdyaXRlcj4gCiAgICAKICA8IS0tIGNvbmZpZyBmb3IgdGhlIGFkbWluIGludGVyZmFjZSAt
LT4gCiAgPGFkbWluPgogICAgPGRlZmF1bHRRdWVyeT5zb2xyPC9kZWZhdWx0UXVlcnk+CiAgICA8
Z2V0dGFibGVGaWxlcz5zb2xyY29uZmlnLnhtbCBzY2hlbWEueG1sIGFkbWluLWV4dHJhLmh0bWw8
L2dldHRhYmxlRmlsZXM+CiAgICA8IS0tIHBpbmdRdWVyeSBzaG91bGQgYmUgIlVSTGlzaCIgLi4u
CiAgICAgICAgICZhbXA7IHNlcGFyYXRlZCBrZXk9dmFsIHBhaXJzIC4uLiBidXQgdGhlcmUgc2hv
dWxkbid0IGJlIGFueQogICAgICAgICBVUkwgZXNjYXBpbmcgb2YgdGhlIHZhbHVlcyAtLT4KICAg
IDxwaW5nUXVlcnk+CiAgICAgcXQ9c3RhbmRhcmQmYW1wO3E9c29scnBpbmdxdWVyeQogICAgPC9w
aW5nUXVlcnk+CiAgICA8IS0tIGNvbmZpZ3VyZSBhIGhlYWx0aGNoZWNrIGZpbGUgZm9yIHNlcnZl
cnMgYmVoaW5kIGEgbG9hZGJhbGFuY2VyCiAgICA8aGVhbHRoY2hlY2sgdHlwZT0iZmlsZSI+c2Vy
dmVyLWVuYWJsZWQ8L2hlYWx0aGNoZWNrPgogICAgLS0+CiAgPC9hZG1pbj4KCjwvY29uZmlnPgo=


------=_Part_38127_27361788.1222501594103
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------=_Part_38127_27361788.1222501594103--

From java-user-return-36407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 27 08:47:18 2008
Return-Path: <java-user-return-36407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38196 invoked from network); 27 Sep 2008 08:47:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Sep 2008 08:47:18 -0000
Received: (qmail 96107 invoked by uid 500); 27 Sep 2008 08:47:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96072 invoked by uid 500); 27 Sep 2008 08:47:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96061 invoked by uid 99); 27 Sep 2008 08:47:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Sep 2008 01:47:08 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.82.238] (HELO wx-out-0506.google.com) (66.249.82.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Sep 2008 08:46:06 +0000
Received: by wx-out-0506.google.com with SMTP id h28so310031wxd.20
        for <java-user@lucene.apache.org>; Sat, 27 Sep 2008 01:46:38 -0700 (PDT)
Received: by 10.70.116.14 with SMTP id o14mr2665140wxc.25.1222505197881;
        Sat, 27 Sep 2008 01:46:37 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id h17sm5995059wxd.37.2008.09.27.01.46.36
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 27 Sep 2008 01:46:37 -0700 (PDT)
Message-Id: <233F3B8A-BF0C-40D8-9F5F-7919F593BBEE@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <5e76b0ad0809270046k20eb9864sadc9e09e270c70b4@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: NullPointerException
Date: Sat, 27 Sep 2008 04:46:35 -0400
References: <COL101-W84E572715E618D73C8695A8A440@phx.gbl> <5e76b0ad0809270046k20eb9864sadc9e09e270c70b4@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


It looks like either "null" was passed to Document.addField(...), or, =20=

a Field instance with "null" as its name was added to the document?

Mike

Noble Paul =E0=B4=A8=E0=B5=8B=E0=B4=AC=E0=B4=BF=E0=B4=B3=E0=B5=8D=E2=80=8D=
 =E0=A4=A8=E0=A5=8B=E0=A4=AC=E0=A5=8D=E0=A4=B3=E0=A5=8D wrote:

> Any idea on how this exception can happen?
>
>
> ---------- Forwarded message ----------
> From: Dinesh Gupta <dinesh.gupta01@hotmail.com>
> Date: Thu, Sep 25, 2008 at 7:09 PM
> Subject: NullPointerException
> To: solr-user@lucene.apache.org
>
>
> Hi All,
>
> I have attached my file.
>
> I am getting exception.
>
> Please suggest me how to short-out this issue.
>
>
>
> WARNING: Error creating document :
> SolrInputDocumnt[{id=3Did(1.0)=3D{93146}, ttl=3Dttl(1.0)=3D{Majestic =
from
> Pushpams.com}, cdt=3Dcdt(1.0)=3D{2001-09-04 15:40:40.0},
> mdt=3Dmdt(1.0)=3D{2008-09-23 17:47:44.0}, prc=3Dprc(1.0)=3D{600.00}}]
> java.lang.NullPointerException
>    at org.apache.lucene.document.Document.getField(Document.java:140)
>    at =20
> org=20
> .apache.solr.update.DocumentBuilder.toDocument(DocumentBuilder.java:=20=

> 283)
>    at =20
> org=20
> .apache=20
> .solr=20
> .update=20
> .processor=20
> .RunUpdateProcessor.processAdd(RunUpdateProcessorFactory.java:58)
>    at =20
> org.apache.solr.handler.dataimport.SolrWriter.upload(SolrWriter.java:=20=

> 69)
>    at org.apache.solr.handler.dataimport.DataImportHandler=20
> $1.upload(DataImportHandler.java:288)
>    at =20
> org=20
> .apache=20
> .solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:319)
>    at =20
> org=20
> .apache=20
> .solr.handler.dataimport.DocBuilder.doFullDump(DocBuilder.java:178)
>    at =20
> org=20
> .apache.solr.handler.dataimport.DocBuilder.execute(DocBuilder.java:=20
> 136)
>    at =20
> org=20
> .apache=20
> .solr.handler.dataimport.DataImporter.doFullImport(DataImporter.java:=20=

> 334)
>    at =20
> org=20
> .apache=20
> .solr.handler.dataimport.DataImporter.runCmd(DataImporter.java:386)
>    at =20
> org=20
> .apache=20
> .solr=20
> .handler=20
> .dataimport=20
> .DataImportHandler.handleRequestBody(DataImportHandler.java:190)
>    at =20
> org=20
> .apache=20
> .solr=20
> .handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:131)
>    at org.apache.solr.core.SolrCore.execute(SolrCore.java:1204)
>    at =20
> org=20
> .apache=20
> .solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:303)
>    at =20
> org=20
> .apache=20
> .solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:232)
>    at =20
> org=20
> .apache=20
> .catalina=20
> .core=20
> .ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:=20=

> 202)
>    at =20
> org=20
> .apache=20
> .catalina=20
> .core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
>    at =20
> org=20
> .jboss=20
> .web=20
> .tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
>    at =20
> org=20
> .apache=20
> .catalina=20
> .core=20
> .ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:=20=

> 202)
>    at =20
> org=20
> .apache=20
> .catalina=20
> .core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
>    at =20
> org=20
> .apache=20
> .catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:=20=

> 213)
>    at =20
> org=20
> .apache=20
> .catalina.core.StandardContextValve.invoke(StandardContextValve.java:=20=

> 178)
>    at =20
> org=20
> .jboss=20
> .web=20
> .tomcat=20
> .security=20
> .SecurityAssociationValve.invoke(SecurityAssociationValve.java:175)
>    at =20
> org=20
> .jboss=20
> .web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:74)
>
> ________________________________
> MSN Technology brings you the latest on gadgets, gizmos and the new
> hits in the gaming market. Try it now!
>
>
> --=20
> --Noble Paul
> <=20
> schema=20
> .xml=20
> >=20
> <=20
> solrconfig=20
> .xml=20
> >---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 27 14:43:43 2008
Return-Path: <java-user-return-36408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2689 invoked from network); 27 Sep 2008 14:43:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Sep 2008 14:43:43 -0000
Received: (qmail 78496 invoked by uid 500); 27 Sep 2008 14:43:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78459 invoked by uid 500); 27 Sep 2008 14:43:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78447 invoked by uid 99); 27 Sep 2008 14:43:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Sep 2008 07:43:33 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.234 as permitted sender)
Received: from [209.85.198.234] (HELO rv-out-0506.google.com) (209.85.198.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Sep 2008 14:42:30 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1312107rvb.5
        for <java-user@lucene.apache.org>; Sat, 27 Sep 2008 07:42:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=649xo088vxTr/xnicUgPey9FFRcBzQx7GYiWUsL1umg=;
        b=oQWgcNi+sBfZxXIi5o/7ZIx7lvLBY92CdJ/o8Lj9vYZbJ+0vH88epgzddT3FOIFdar
         aYvbfRgj/0P8REGV5fZXadEvUNJJCPT0LLBwWLaXievDteiu/gXOBeH8xkerPo41+bIw
         4doSw9uw98vJ4xmbPozBqtnz/CIUOfC8MhMx0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=oZ924To6znYTJj2JX9ru/0jk20zWGXEYDhlIiPitUTV9lC7zDqJBhhph3aFOfAIQp5
         LCZOHxzEyOQ1K2rLY1tbA7x0WDLpGWNuD6/4fQBqocdNvYReUvUQe8KXEfYyzEcCiutF
         nYziKpbnq/sF+odY1VYy9ruP3BJ2a2kWaQXsQ=
Received: by 10.140.177.15 with SMTP id z15mr1382677rve.98.1222526574787;
        Sat, 27 Sep 2008 07:42:54 -0700 (PDT)
Received: by 10.140.135.10 with HTTP; Sat, 27 Sep 2008 07:42:54 -0700 (PDT)
Message-ID: <359a92830809270742j6b1eb9ebn109025f0bc7818a9@mail.gmail.com>
Date: Sat, 27 Sep 2008 10:42:54 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Please help to interpret Lucene Boost results
In-Reply-To: <19697605.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19560_25099995.1222526574774"
References: <19695313.post@talk.nabble.com>
	 <359a92830809261341w36053e71s52217f9a286ecf43@mail.gmail.com>
	 <19697605.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19560_25099995.1222526574774
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

For Luke, see http://www.getopt.org/luke/ or just google lucene luke

About the same analyzers at index and search. No, it's not *required*
that you use the same analyzer, but unless and until you understand
what analyzers do, I would *strongly* recommend that you use the
same one. See PerFieldAnalyzerWrapper for using different analyzers
for different fields....

Conceptually, think of an analyzer as giving you the "smallest meaningful
token" from your stream that your program then does something with,
either index or analyze.

Consider the line "this is the 2nd Line in Erick's program". What are the
tokens?
Well, depending on the analyzer you could get
nd, line, erick, program (assuming your analyzer lowercases, strips numbers
and punctuation and removes stopwords)

You could get
"this is the 2nd Line in Erick's program" (assuming your analyzer did
nothing, just returned the entire input stream as a token, which would then
NOT get a hit searching, say, 'Line')

You could get
this, is, the, 2nd, line, in erick's, program (assuming your analyzer just
lowercased and split on whitespace)

You could get
nonsense, nonsense, nonsense, nonsense (assuming you wrote a pathological
analyzer that always returned the word "nonsense")

Really, any transformations you wanted to perform can be done in an
analyzer.
So using different analyzers during indexing and searching will very often
produce "surprising" results. Don't do it unless you know exactly what's
being
done to your input streams. Or be prepared to spend a lot of hours tracking
down "what went wrong" <G>.

All that said, it doesn't explain the behaviour you're seeing because you're
right,
adding successively more restrictions should produce smaller result counts.
I suspect
that if you see what actual queries you're generating (and when you get
Luke, be
sure to find the drop-down for "which analyzer" to use) you'll find
something
surprising.

Best
Erick


On Fri, Sep 26, 2008 at 6:57 PM, student_t <cchou@cscinfo.com> wrote:

>
> Hi Eric,
>
> Thanks a bunch for your pointers. I will need to find out the analyzers at
> index and query time. But is it critical to have the same analyzers during
> these two times?
>
> I had tested with lucli from some of my local segment data and they
> appeared
> working fine (i.e., their result sets are reasonable.)
>
> Is Luke part of Lucene contrib? I recall there is a GUI that lets you view
> the indices. Would you please elaborate?
>
> Thanks again!
> student_t
>
>
> Erick Erickson wrote:
> >
> > That certainly doesn't look right. What analyzers are you using at index
> > and query time?
> >
> > Two things that will help track down what's really happening:
> >
> > 1> query.toString() is your friend.
> > 2> get a copy of the excellent Luke tool and have it do its explain magic
> > on
> > your query. Watch that the analyzer you choose when querying is what you
> > expect....
> >
> > If neither of those things sheds any light on the problem, let us know
> > what
> > you find....
> >
> > Best
> > Erick
> >
> > On Fri, Sep 26, 2008 at 3:55 PM, student_t <cchou@cscinfo.com> wrote:
> >
> >>
> >> I am baffled by the results of the following queries. Can it be
> something
> >> to
> >> do with the boosting factor? All of these queries are performed in the
> >> same
> >> environment with the same crawled index/data.
> >>
> >> A. query1 = +(content:(Pepsi))                              resulted in
> >> 228
> >> hits.
> >> B. query2 = +(content:(Pepsi) ) +(host:(ca)^10 )     resulted in 398
> >> hits.
> >> C. query3 = +(host:(ca)^10 )                                resulted in
> >> 212
> >> hits.
> >>
> >> Two questions (strictly just one):
> >> 1. query1 of any content contains Pepsi yielded 228 hits, how could a
> >> more
> >> limiting query2 (give me all docs that have Pepsi in it with a domain of
> >> ca)
> >> yield more hits (398)?
> >> 2. Since there are 212 hits of Canadian domains, how can query2 return
> >> 398
> >> hits?
> >>
> >> Thanks for any pointers!
> >> Cheers,
> >> student_t
> >>
> >>
> >> --
> >> View this message in context:
> >>
> http://www.nabble.com/Please-help-to-interpret-Lucene-Boost-results-tp19695313p19695313.html
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Please-help-to-interpret-Lucene-Boost-results-tp19695313p19697605.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_19560_25099995.1222526574774--

From java-user-return-36409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 29 05:43:16 2008
Return-Path: <java-user-return-36409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12920 invoked from network); 29 Sep 2008 05:43:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Sep 2008 05:43:16 -0000
Received: (qmail 2714 invoked by uid 500); 29 Sep 2008 05:43:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2683 invoked by uid 500); 29 Sep 2008 05:43:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2672 invoked by uid 99); 29 Sep 2008 05:43:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Sep 2008 22:43:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [202.131.102.148] (HELO indiaserv01.asite.asitehq.com) (202.131.102.148)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Sep 2008 05:42:04 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: How to restore corrupted index
Date: Mon, 29 Sep 2008 11:12:36 +0530
Message-ID: <0CD49D04A7B5534CA56257ADD9719EF7036AA2D2@indiaserv01.asite.asitehq.com>
In-Reply-To: <EBF3A206-DDEA-4C2C-9383-E1C5DC2ECA28@mikemccandless.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to restore corrupted index
Thread-Index: Ackf8+ZIf4irxn5aStmbl4hyaIrIsACAhV6w
From: "Chaula Ganatra" <cganatra@asite.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

We are using 2.2.0 and at least for our coming release we will be using
the same, we will upgrade to the latest one after that. So is it a bug
in 2.2.0.
I will reproduce it and send a trace

Chaula

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: 26 September, 2008 9:50 PM
To: java-user@lucene.apache.org
Subject: Re: How to restore corrupted index


OK.  I really need to see those stack traces to better understand this =20
issue.

Also, does the issue still happen on 2.3, or 2.4 RC2?

Mike

Chaula Ganatra wrote:

> Lucene 2.2.0, windows XP
>
> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: 26 September, 2008 8:00 PM
> To: java-user@lucene.apache.org
> Subject: Re: How to restore corrupted index
>
>
> It's perfectly fine to have a reader open on an index, while an
> IndexWriter runs optimize.
>
> Which version of Lucene are you using?  And which OS & filesystem?
>
> Mike
>
> Chaula Ganatra wrote:
>
>> It was the Reader on same index, which I did not close so gave
>> exception
>> in writer.optimise()
>>
>> Chaula
>>
>> -----Original Message-----
>> From: Michael McCandless [mailto:lucene@mikemccandless.com]
>> Sent: 26 September, 2008 7:17 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: How to restore corrupted index
>>
>>
>> Can you post the full stack trace in both cases?
>>
>> Mike
>>
>> Chaula Ganatra wrote:
>>
>>> I found one case when such multiple files are remained, when we call
>>> writer.optimise() it throws exception and multiple files remained in
>>> index dir.
>>>
>>> After such multiple files, when we add document in index by calling
>>> writer.addDocument it throws java.lang.NegativeArraySizeException
>>>
>>> Regards,
>>> Chaula
>>>
>>> -----Original Message-----
>>> From: Grant Ingersoll [mailto:gsingers@apache.org]
>>> Sent: 26 September, 2008 6:02 PM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: How to restore corrupted index
>>>
>>> There is the CheckIndex tool included in the distribution for
>>> checking/
>>> fixing bad indexes, but it can't solve everything.
>>>
>>> The bigger question is why it is happening to begin with.  Can you
>>> describe your indexing process?  How do you know the index is
>>> actually
>>> corrupted?  Are you seeing exceptions when opening it?
>>>
>>> -Grant
>>> On Sep 26, 2008, at 6:49 AM, Chaula Ganatra wrote:
>>>
>>>> We have an application in which index will be updated frequently.
>>>>
>>>> During development time, found that index files gets corrupted, =20
>>>> i.e.
>>>> more than one  cfs files,some other extension files e.g. frq, fnm,
>>>> nrm
>>>>
>>>> Remains there in index directory.
>>>>
>>>> Is there any way that such issue does not occur at all or if it
>>>> happens
>>>> we can recover the index data again?
>>>>
>>>> It would be a great help, if some one can.
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> Regards,
>>>>
>>>> Chaula
>>>>
>>>>
>>>>
>>>>
>>>>
>>>
>>> --------------------------
>>> Grant Ingersoll
>>> http://www.lucidimagination.com
>>>
>>> Lucene Helpful Hints:
>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 29 06:58:26 2008
Return-Path: <java-user-return-36410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60978 invoked from network); 29 Sep 2008 06:58:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Sep 2008 06:58:26 -0000
Received: (qmail 56290 invoked by uid 500); 29 Sep 2008 06:58:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56256 invoked by uid 500); 29 Sep 2008 06:58:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56245 invoked by uid 99); 29 Sep 2008 06:58:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Sep 2008 23:58:17 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.112.106.226] (HELO edciscan02.edc.trendmicro.com) (194.112.106.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Sep 2008 06:57:15 +0000
Received: from edciscan02.edc.trendmicro.com (edciscan02 [127.0.0.1])
	by localhost.edc.trendmicro.com (Postfix) with ESMTP id BC48C181CE7
	for <java-user@lucene.apache.org>; Mon, 29 Sep 2008 08:57:49 +0200 (CEST)
Received: from edcexbh02.eu.trendnet.org (unknown [194.112.106.201])
	by edciscan02.edc.trendmicro.com (Postfix) with ESMTP id B377F181C8C
	for <java-user@lucene.apache.org>; Mon, 29 Sep 2008 08:57:49 +0200 (CEST)
Received: from EDCEXMAIL02.eu.trendnet.org ([10.34.169.88]) by edcexbh02.eu.trendnet.org with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 29 Sep 2008 08:57:48 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
Subject: RE: Getting all found document ids from a search result
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Mon, 29 Sep 2008 08:57:46 +0200
Message-ID: <6207987134483D40ACA15C60611A4F920144A45A@EDCEXMAIL02.eu.trendnet.org>
In-Reply-To: <173219.23958.qm@web50309.mail.re2.yahoo.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Getting all found document ids from a search result
Thread-Index: Ackf6LvdRj+jVNIERe6BGbKg6lCg3ACF8dsg
References: <173219.23958.qm@web50309.mail.re2.yahoo.com>
From: <gregor_ewald@trendmicro.de>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 29 Sep 2008 06:57:48.0030 (UTC) FILETIME=[AE8891E0:01C92200]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Do I really get all results if I use a custom hitcollector?
This would be great :-)

Regards,
Gregor

=20
=20
-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]=20
Sent: Freitag, 26. September 2008 17:00
To: java-user@lucene.apache.org
Subject: Re: Getting all found document ids from a search result

Gregor,

You could loop through the results or collect them using a custom =
HitCollector.


Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: "gregor_ewald@trendmicro.de" <gregor_ewald@trendmicro.de>
> To: java-user@lucene.apache.org
> Sent: Friday, September 26, 2008 10:31:37 AM
> Subject: Getting all found document ids from a search result
>=20
>=20
> Hello you all,
>=20
>=20
>=20
> is it somehow possible to get all document ids found by a search. Not =
only 50 or=20
> 100...
>=20
> If it is possible and someone knows it, please help me :-)
>=20
>=20
>=20
>=20
>=20
> Thanks and beste regards,
>=20
> Gregor
>=20
>=20
>=20
> TREND MICRO Deutschland GmbH, Lise-Meitner-Str. 4, D-85716 =
Unterschleissheim,=20
> Germany
> Geschaeftsfuehrer: Raimund Genes, Amtsgericht Muenchen - HRB 114739
>=20
> Die in dieser E-Mail und ihren etwaigen Anhaengen enthaltenen =
Informationen sind=20
> vertraulich und koennen gewerblichen Schutzrechten unterliegen. =
Sollten Sie=20
> keiner der vorgesehenen Empfaenger sein, sind Sie nicht berechtigt, =
diese=20
> Nachricht in irgendeiner Weise zu benutzen oder weiterzugeben. Bitte=20
> benachrichtigen Sie uns ggf. per Rueckantwort oder telefonisch =
(089-37479700)=20
> und loeschen Sie diese E-Mail aus Ihrem E-Mail-System.
>=20
> The information contained in this email and any attachments is =
confidential and=20
> may be subject to copyright or other intellectual property protection. =
If you=20
> are not the intended recipient, you are not authorized to use or =
disclose this=20
> information, and we request that you notify us by reply mail or =
telephone and=20
> delete the original message from your mail system.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 29 09:46:40 2008
Return-Path: <java-user-return-36411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66427 invoked from network); 29 Sep 2008 09:46:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Sep 2008 09:46:39 -0000
Received: (qmail 98918 invoked by uid 500); 29 Sep 2008 09:46:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98883 invoked by uid 500); 29 Sep 2008 09:46:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98872 invoked by uid 99); 29 Sep 2008 09:46:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Sep 2008 02:46:31 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Sep 2008 09:45:29 +0000
Received: by yw-out-2324.google.com with SMTP id 3so277382ywj.5
        for <java-user@lucene.apache.org>; Mon, 29 Sep 2008 02:46:02 -0700 (PDT)
Received: by 10.90.55.9 with SMTP id d9mr5374434aga.4.1222681561849;
        Mon, 29 Sep 2008 02:46:01 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 6sm3415587agb.22.2008.09.29.02.46.00
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 29 Sep 2008 02:46:01 -0700 (PDT)
Message-Id: <D772A1C5-EE36-41EC-8736-BBE578F2F53B@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <0CD49D04A7B5534CA56257ADD9719EF7036AA2D2@indiaserv01.asite.asitehq.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: How to restore corrupted index
Date: Mon, 29 Sep 2008 05:45:59 -0400
References: <0CD49D04A7B5534CA56257ADD9719EF7036AA2D2@indiaserv01.asite.asitehq.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Chaula Ganatra wrote:

> We are using 2.2.0 and at least for our coming release we will be  
> using
> the same, we will upgrade to the latest one after that. So is it a bug
> in 2.2.0.

I can't tell if this is a bug yet... I need more details, like the  
stack traces, but
also more details about how you are using Lucene.  Can you post the  
parts
of your source code that actually do the indexing/searching?

If you could reduce this to a small test case that shows one or both of
the exceptions then I can track down what's happening.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 29 09:52:27 2008
Return-Path: <java-user-return-36412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69471 invoked from network); 29 Sep 2008 09:52:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Sep 2008 09:52:27 -0000
Received: (qmail 5141 invoked by uid 500); 29 Sep 2008 09:52:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5030 invoked by uid 500); 29 Sep 2008 09:52:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5019 invoked by uid 99); 29 Sep 2008 09:52:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Sep 2008 02:52:18 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.82.238] (HELO wx-out-0506.google.com) (66.249.82.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Sep 2008 09:51:17 +0000
Received: by wx-out-0506.google.com with SMTP id h28so409183wxd.20
        for <java-user@lucene.apache.org>; Mon, 29 Sep 2008 02:51:50 -0700 (PDT)
Received: by 10.70.65.5 with SMTP id n5mr5954236wxa.3.1222681910390;
        Mon, 29 Sep 2008 02:51:50 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id h34sm7363726wxd.38.2008.09.29.02.51.48
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 29 Sep 2008 02:51:49 -0700 (PDT)
Message-Id: <E8559D2C-3879-47CE-A0BC-117B806B1382@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <d3c60f0e0809260845s1396a9e1keecaf2628ef899f2@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: CorruptIndexException workaround in 2.3-SNAPSHOT? (Attn: Michael McCandless)
Date: Mon, 29 Sep 2008 05:51:46 -0400
References: <d3c60f0e0809251709x73950b27yc9dbfbb9390468c9@mail.gmail.com> <190623F6-7BDE-40E0-BC26-E808B4D6BE23@mikemccandless.com> <d3c60f0e0809260845s1396a9e1keecaf2628ef899f2@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Ari Miller wrote:

> Is there an available SNAPSHOT of the 2.3 branch with this fix?

Unfortunately, no -- our nightly build process only builds the trunk's  
snapshot.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 29 09:59:46 2008
Return-Path: <java-user-return-36413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75126 invoked from network); 29 Sep 2008 09:59:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Sep 2008 09:59:46 -0000
Received: (qmail 14681 invoked by uid 500); 29 Sep 2008 09:59:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14649 invoked by uid 500); 29 Sep 2008 09:59:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14638 invoked by uid 99); 29 Sep 2008 09:59:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Sep 2008 02:59:37 -0700
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=SPF_NEUTRAL,URIBL_GREY,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Sep 2008 09:58:32 +0000
Received: by yw-out-2324.google.com with SMTP id 3so277774ywj.5
        for <java-user@lucene.apache.org>; Mon, 29 Sep 2008 02:58:55 -0700 (PDT)
Received: by 10.100.240.17 with SMTP id n17mr3861001anh.49.1222682335584;
        Mon, 29 Sep 2008 02:58:55 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id b19sm4393838ana.19.2008.09.29.02.58.54
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 29 Sep 2008 02:58:54 -0700 (PDT)
Message-Id: <8CB273B7-F6F2-4D06-982D-59798779102F@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <126142c0809261153l15289c7fo919acf190ff6ab1e@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Caused by: java.io.IOException: read past EOF on Slave
Date: Mon, 29 Sep 2008 05:58:52 -0400
References: <19682684.post@talk.nabble.com> <BF8A2B92-035C-483A-B955-447BDB0C1C89@mikemccandless.com> <126142c0809260844x3551cfaaj21863356c5a98ba3@mail.gmail.com> <46392609-A138-4546-8DBC-7839801E5280@mikemccandless.com> <126142c0809261153l15289c7fo919acf190ff6ab1e@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Marcelo,

Do you have any sense whether this is an issue with your integration  
(eg your Directory implementation that stores data in BLOB columns) vs  
something with Lucene 2.4?

It seems odd to me that there would be a bug in your Directory  
implementation that 2.3 didn't tickle but 2.4 did.

Can you dump the index, as stored in BLOB columns, out into the  
filesystem, and run CheckIndex on it?  (Or maybe run CheckIndex within  
Oracle).

Mike

Marcelo Ochoa wrote:

> Mike:
>  Actually there is more issues at first glance with OJVMDirectory  
> integration.
>  Note this, I am creating an index with two simple documents:
> INFO: Performing: SELECT /*+ DYNAMIC_SAMPLING(0) RULE NOCACHE(T1) */
> T1.rowid,F1,extractValue(F2,'/emp/name/text()')
> "name",extractValue(F2,'/emp/@id') "id" FROM LUCENE.T1 for update  
> nowait
> Sep 26, 2008 3:44:16 PM org.apache.lucene.indexer.TableIndexer index
> FINE: Document<stored/uncompressed,indexed<rowid:AAARLCAAEAAAm2QAAA>
> indexed,tokenized<F1:001> indexed,tokenized<name:ravi>
> indexed,tokenized<id:01>>
> Sep 26, 2008 3:44:16 PM org.apache.lucene.indexer.TableIndexer index
> FINE: Document<stored/uncompressed,indexed<rowid:AAARLCAAEAAAm2QAAB>
> indexed,tokenized<F1:003> indexed,tokenized<name:murthy>
> indexed,tokenized<id:03>>
> IW 10 [Root Thread]:   flush: segment=_0 docStoreSegment=_0
> docStoreOffset=0 flushDocs=true flushDeletes=true flushDocStores=false
> numDocs=2
> numBufDelTerms=0
> IW 10 [Root Thread]:   index before flush
> IW 10 [Root Thread]: DW: flush postings as segment _0 numDocs=2
> IW 10 [Root Thread]: DW:   oldRAMSize=111616 newFlushedSize=166
> docs/MB=12,633.446 new/old=0.149%
> IFD [Root Thread]: now checkpoint "segments_1" [1 segments ;  
> isCommit = false]
> IW 10 [Root Thread]: LMP: findMerges: 1 segments
> IW 10 [Root Thread]: LMP:   level -1.0 to 2.2741578: 1 segments
> IW 10 [Root Thread]: CMS: now merge
> IW 10 [Root Thread]: CMS:   index: _0:C2->_0
> IW 10 [Root Thread]: CMS:   no more merges pending; now return
> IW 10 [Root Thread]: now flush at close
> IW 10 [Root Thread]:   flush: segment=null docStoreSegment=_0
> docStoreOffset=2 flushDocs=false flushDeletes=true flushDocStores=true
> numDocs=0 numBufDelTerms=0
> IW 10 [Root Thread]:   index before flush _0:C2->_0
> IW 10 [Root Thread]:   flush shared docStore segment _0
> IW 10 [Root Thread]: DW: closeDocStore: 2 files to flush to segment  
> _0 numDocs=2
> IW 10 [Root Thread]: CMS: now merge
> IW 10 [Root Thread]: CMS:   index: _0:C2->_0
> IW 10 [Root Thread]: CMS:   no more merges pending; now return
> IW 10 [Root Thread]: now call final commit()
> IW 10 [Root Thread]: startCommit(): start sizeInBytes=0
> IW 10 [Root Thread]: startCommit index=_0:C2->_0 changeCount=2
> IW 10 [Root Thread]: now sync _0.fnm
> IW 10 [Root Thread]: now sync _0.frq
> IW 10 [Root Thread]: now sync _0.prx
> IW 10 [Root Thread]: now sync _0.tis
> IW 10 [Root Thread]: now sync _0.tii
> IW 10 [Root Thread]: now sync _0.nrm
> IW 10 [Root Thread]: now sync _0.fdx
> IW 10 [Root Thread]: now sync _0.fdt
> IW 10 [Root Thread]: done all syncs
> IW 10 [Root Thread]: commit: pendingCommit != null
> IFD [Root Thread]: now checkpoint "segments_2" [1 segments ;  
> isCommit = true]
> IFD [Root Thread]: deleteCommits: now decRef commit "segments_1"
> IFD [Root Thread]: delete "segments_1"
> IW 10 [Root Thread]: commit: done
> IW 10 [Root Thread]: at close: _0:C2->_0
> Sep 26, 2008 3:44:16 PM org.apache.lucene.indexer.LuceneDomainIndex
> ODCIIndexCreate
> FINER: RETURN 0
>
> Index created.
>
>  And when I am trying to read the index I got:
> INFO: Analyzer: org.apache.lucene.analysis.WhitespaceAnalyzer@f2164127
> Sep 26, 2008 3:44:48 PM org.apache.lucene.indexer.LuceneDomainIndex  
> ODCIStart
> INFO: qryStr: DESC(name:ravi)
> Sep 26, 2008 3:44:48 PM org.apache.lucene.indexer.LuceneDomainIndex  
> ODCIStart
> INFO: storing cachingFilter: -1378376940 and searcher: 781713581
> qryStr: DESC(name:ravi)
> Sep 26, 2008 3:44:48 PM org.apache.lucene.indexer.LuceneDomainIndex  
> getSort
> INFO: using sort: <score>,<doc>
> Exception in thread "Root Thread" java.lang.IndexOutOfBoundsException:
> Index: 6, Size: 4
>        at java.util.ArrayList.RangeCheck(ArrayList.java)
>        at java.util.ArrayList.get(ArrayList.java)
>        at  
> org.apache.lucene.index.FieldInfos.fieldInfo(FieldInfos.java)
>        at  
> org.apache.lucene.index.FieldInfos.fieldName(FieldInfos.java)
>        at org.apache.lucene.index.TermBuffer.read(TermBuffer.java)
>        at  
> org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java)
>        at  
> org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java)
>        at  
> org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java)
>        at  
> org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java)
>        at  
> org.apache.lucene.index.SegmentReader.docFreq(SegmentReader.java)
>        at  
> org.apache.lucene.search.IndexSearcher.docFreq(IndexSearcher.java)
>        at org.apache.lucene.search.Similarity.idf(Similarity.java)
>        at org.apache.lucene.search.TermQuery 
> $TermWeight.<init>(TermQuery.java)
>        at  
> org.apache.lucene.search.TermQuery.createWeight(TermQuery.java)
>        at org.apache.lucene.search.Query.weight(Query.java)
>        at org.apache.lucene.search.Hits.<init>(Hits.java:85)
>        at org.apache.lucene.search.Searcher.search(Searcher.java)
>        at  
> org 
> .apache 
> .lucene.indexer.LuceneDomainIndex.ODCIStart(LuceneDomainIndex.java)
>
>  Which definetly means that something is not well saved at OJVM
> directory BLOB storage :(
>  This are my files:
> SQL> select file_size,name from it1$t;
>
> FILE_SIZE NAME
> ---------- ------------------------------
>        10 parameters
>         1 updateCount
>        28 segments_1
>        20 segments.gen
>         8 _0.frq
>         8 _0.prx
>       103 _0.tis
>        35 _0.tii
>        12 _0.nrm
>        22 _0.fnm
>        48 _0.fdt
>        20 _0.fdx
>        62 segments_2
>  I'll add some debugging information at my classes which save/load
> buffers to see how many calls and which arguments are used.
>  Marcelo.
>
> On Fri, Sep 26, 2008 at 1:41 PM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>>
>> This one looks spooky!
>>
>> Is it easily repeated?  If you could print out which 2 terms you  
>> had tried
>> to delete, and then zip up the index just before deleting those  
>> docs (after
>> closing the writer) and send to me, I can try to understand what's  
>> wrong
>> with the index.  It looks as if the *.tis file for one of the  
>> segments is
>> truncated.
>>
>> If you capture the series of add/update/delete documents, can you  
>> get a
>> standalone Java test to show this?
>>
>> Does this test create an entirely new index?
>>
>> We did change the index format in 2.4 to use "true" UTF8 encoding  
>> for all
>> text content; not sure that this applies here (to  
>> BufferedIndexReader it's
>> all bytes) but it may.
>>
>> BufferedIndexReader in general can do random IO, especially when  
>> reading the
>> term dict file (*.tis), when you
>>
>> Mike
>>
>> Marcelo Ochoa wrote:
>>
>>> Michael:
>>> I just start testing 2.4rc2 running inside OJVM.
>>> I found a similar stack trace during indexing:
>>> IW 3 [Root Thread]:   flush: segment=_3 docStoreSegment=_3
>>> docStoreOffset=0 flushDocs=true flushDeletes=true  
>>> flushDocStores=false
>>> numDocs=2 numBufDelTerms=2
>>> IW 3 [Root Thread]:   index before flush _1:C2->_1 _2:C2->_2
>>> IW 3 [Root Thread]: DW: flush postings as segment _3 numDocs=2
>>> IW 3 [Root Thread]: DW:   oldRAMSize=111616 newFlushedSize=264
>>> docs/MB=7,943.758 new/old=0.237%
>>> IW 3 [Root Thread]: DW: apply 2 buffered deleted terms and 0 deleted
>>> docIDs and 0 deleted queries on 3 segments.
>>> IW 3 [Root Thread]: hit exception flushing deletes
>>> Exception in thread "Root Thread" java.io.IOException: read past EOF
>>>      at
>>> org 
>>> .apache 
>>> .lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java)
>>>      at
>>> org 
>>> .apache 
>>> .lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.java)
>>>      at
>>> org 
>>> .apache 
>>> .lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.java)
>>>      at org.apache.lucene.index.TermBuffer.read(TermBuffer.java)
>>>      at
>>> org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java)
>>>      at
>>> org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java)
>>>      at  
>>> org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java)
>>>      at  
>>> org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java)
>>>      at
>>> org.apache.lucene.index.SegmentTermDocs.seek(SegmentTermDocs.java)
>>>      at  
>>> org.apache.lucene.index.IndexReader.termDocs(IndexReader.java)
>>>      at
>>> org 
>>> .apache 
>>> .lucene.index.DocumentsWriter.applyDeletes(DocumentsWriter.java)
>>>      at
>>> org 
>>> .apache 
>>> .lucene.index.DocumentsWriter.applyDeletes(DocumentsWriter.java:918)
>>>      at
>>> org.apache.lucene.index.IndexWriter.applyDeletes(IndexWriter.java)
>>>      at  
>>> org.apache.lucene.index.IndexWriter.doFlush(IndexWriter.java)
>>>      at org.apache.lucene.index.IndexWriter.flush(IndexWriter.java)
>>>      at org.apache.lucene.index.IndexWriter.flush(IndexWriter.java)
>>>      at
>>> org 
>>> .apache 
>>> .lucene.indexer.LuceneDomainIndex.sync(LuceneDomainIndex.java:1308)
>>>
>>> I'll reinstall with a full debug info to see all line numbers in
>>> Lucene java code.
>>> Is there a list of semantic changes at BufferedIndeInput code?
>>> I mean it do sequential or random writes for example.
>>> But anyway, I just compiled with latest code and ran my test suites,
>>> I'll investigate the problem a bit more.
>>> Best regards, Marcelo.
>>>
>>> On Fri, Sep 26, 2008 at 7:32 AM, Michael McCandless
>>> <lucene@mikemccandless.com> wrote:
>>>>
>>>> Can you describe the sequence of steps that your replication  
>>>> process goes
>>>> through?
>>>>
>>>> Also, which filesystem is the index being accessed through?
>>>>
>>>> Mike
>>>>
>>>> rahul_k123 wrote:
>>>>
>>>>>
>>>>> First of all, thanks to all the people who helped me in getting  
>>>>> the
>>>>> lucene
>>>>> replication setup working and right now its live in our  
>>>>> production :-)
>>>>>
>>>>> Everything working fine, except that i am seeing some exceptions  
>>>>> on
>>>>> slaves.
>>>>>
>>>>> The following is the one which is occuring more often on slaves
>>>>>
>>>>> at
>>>>> java.util.concurrent.Executors 
>>>>> $RunnableAdapter.call(Executors.java:441)
>>>>>    at
>>>>> java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
>>>>>    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
>>>>>    at
>>>>>
>>>>>
>>>>> java.util.concurrent.ThreadPoolExecutor 
>>>>> $Worker.runTask(ThreadPoolExecutor.java:885)
>>>>>    at
>>>>>
>>>>>
>>>>> java.util.concurrent.ThreadPoolExecutor 
>>>>> $Worker.run(ThreadPoolExecutor.java:907)
>>>>>    at java.lang.Thread.run(Thread.java:619)
>>>>> Caused by: com.IndexingException: [SYSTEM_ERROR] Cannot access  
>>>>> index
>>>>> [data_dir/index]: [read past EOF]
>>>>>    at
>>>>>
>>>>>
>>>>> com 
>>>>> .lucene 
>>>>> .LuceneSearchService.getSearchResults(LuceneSearchService.java: 
>>>>> 964)
>>>>>    ... 12 more
>>>>> Caused by: java.io.IOException: read past EOF
>>>>>    at
>>>>>
>>>>>
>>>>> org 
>>>>> .apache 
>>>>> .lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java: 
>>>>> 146)
>>>>>    at
>>>>>
>>>>>
>>>>> org 
>>>>> .apache 
>>>>> .lucene 
>>>>> .store.BufferedIndexInput.readByte(BufferedIndexInput.java:38)
>>>>>    at org.apache.lucene.store.IndexInput.readInt(IndexInput.java: 
>>>>> 66)
>>>>>    at  
>>>>> org.apache.lucene.store.IndexInput.readLong(IndexInput.java:89)
>>>>>    at org.apache.lucene.index.FieldsReader.doc(FieldsReader.java: 
>>>>> 147)
>>>>>    at
>>>>> org 
>>>>> .apache.lucene.index.SegmentReader.document(SegmentReader.java: 
>>>>> 659)
>>>>>    at
>>>>>
>>>>>
>>>>> org 
>>>>> .apache 
>>>>> .lucene 
>>>>> .index.MultiSegmentReader.document(MultiSegmentReader.java:257)
>>>>>    at
>>>>> org.apache.lucene.index.IndexReader.document(IndexReader.java:525)
>>>>>
>>>>> and the second one is
>>>>>
>>>>> at
>>>>> java.util.concurrent.Executors 
>>>>> $RunnableAdapter.call(Executors.java:441)
>>>>>    at
>>>>> java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
>>>>>    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
>>>>>    at
>>>>>
>>>>>
>>>>> java.util.concurrent.ThreadPoolExecutor 
>>>>> $Worker.runTask(ThreadPoolExecutor.java:885)
>>>>>    at
>>>>>
>>>>>
>>>>> java.util.concurrent.ThreadPoolExecutor 
>>>>> $Worker.run(ThreadPoolExecutor.java:907)
>>>>>    at java.lang.Thread.run(Thread.java:619)
>>>>> Caused by: java.lang.IllegalArgumentException: attempt to access a
>>>>> deleted
>>>>> document
>>>>>    at
>>>>> org 
>>>>> .apache.lucene.index.SegmentReader.document(SegmentReader.java: 
>>>>> 657)
>>>>>    at
>>>>>
>>>>>
>>>>> org 
>>>>> .apache 
>>>>> .lucene 
>>>>> .index.MultiSegmentReader.document(MultiSegmentReader.java:257)
>>>>>    at
>>>>> org.apache.lucene.index.IndexReader.document(IndexReader.java:525)
>>>>> This is on master index .
>>>>>
>>>>>
>>>>>
>>>>> Any help is appreciated
>>>>>
>>>>> Thanks.
>>>>>
>>>>> --
>>>>> View this message in context:
>>>>>
>>>>> http://www.nabble.com/Caused-by%3A-java.io.IOException%3A-read-past-EOF-on-Slave-tp19682684p19682684.html
>>>>> Sent from the Lucene - Java Users mailing list archive at  
>>>>> Nabble.com.
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>>
>>>
>>> --
>>> Marcelo F. Ochoa
>>> http://marceloochoa.blogspot.com/
>>> http://marcelo.ochoa.googlepages.com/home
>>> ______________
>>> Do you Know DBPrism? Look @ DB Prism's Web Site
>>> http://www.dbprism.com.ar/index.html
>>> More info?
>>> Chapter 17 of the book "Programming the Oracle Database using Java &
>>> Web Services"
>>> http://www.amazon.com/gp/product/1555583296/
>>> Chapter 21 of the book "Professional XML Databases" - Wrox Press
>>> http://www.amazon.com/gp/product/1861003587/
>>> Chapter 8 of the book "Oracle & Open Source" - O'Reilly
>>> http://www.oreilly.com/catalog/oracleopen/
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> -- 
> Marcelo F. Ochoa
> http://marceloochoa.blogspot.com/
> http://marcelo.ochoa.googlepages.com/home
> ______________
> Want to integrate Lucene and Oracle?
> http://marceloochoa.blogspot.com/2007/09/running-lucene-inside-your-oracle-jvm.html
> Is Oracle 11g REST ready?
> http://marceloochoa.blogspot.com/2008/02/is-oracle-11g-rest-ready.html
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 29 10:51:22 2008
Return-Path: <java-user-return-36414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11838 invoked from network); 29 Sep 2008 10:51:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Sep 2008 10:51:22 -0000
Received: (qmail 88215 invoked by uid 500); 29 Sep 2008 10:51:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88186 invoked by uid 500); 29 Sep 2008 10:51:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88175 invoked by uid 99); 29 Sep 2008 10:51:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Sep 2008 03:51:09 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=SPF_PASS,URIBL_GREY,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [193.12.6.34] (HELO msgint02.mogul.com) (193.12.6.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Sep 2008 10:50:04 +0000
Received: from msgint02.mogul.com ([172.17.1.7]) by msgint02.mogul.com
 ([172.17.1.7]) with mapi; Mon, 29 Sep 2008 12:51:54 +0200
From: =?iso-8859-1?Q?Jimi_Hulleg=E5rd?= <jimi.hullegard@mogul.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 29 Sep 2008 12:52:02 +0200
Subject: RE: [SPAM] - Re: Caused by: java.io.IOException: read past EOF on
 Slave - Found word(s) list error in the Text body
Thread-Topic: [SPAM] - Re: Caused by: java.io.IOException: read past EOF on
 Slave - Found word(s) list error in the Text body
Thread-Index: AckgCXmagc0wC1kBTZ2BIbAHFXwUVQCF0PpA
Message-ID: <D8E6BD3AD2634843B58AFF6A94FE246202D7AEC414@msgint02.mogul.com>
In-Reply-To: <126142c0809261153l15289c7fo919acf190ff6ab1e@mail.gmail.com>
Accept-Language: sv-SE
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: sv-SE
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Is there a specific reason that you write your text in this way? I mean, in=
dentions instead of line breaks?  It makes it very hard to read, if you ask=
 me.

Just my 2 cents. :)

/Jimi

mogul | jimi hulleg=E5rd | system developer | hudiksvallsgatan 4, 113 30 st=
ockholm sweden | +46 8 506 66 172 | +46 765 27 19 55 | jimi.hullegard@mogul=
.com | www.mogul.com


> -----Original Message-----
> From: Marcelo Ochoa [mailto:marcelo.ochoa@gmail.com]
> Sent: den 26 september 2008 20:54
> To: java-user@lucene.apache.org
> Subject: [SPAM] - Re: Caused by: java.io.IOException: read
> past EOF on Slave - Found word(s) list error in the Text body
>
> Mike:
>   Actually there is more issues at first glance with
> OJVMDirectory integration.
>   Note this, I am creating an index with two simple documents:
> INFO: Performing: SELECT /*+ DYNAMIC_SAMPLING(0) RULE NOCACHE(T1) */
> T1.rowid,F1,extractValue(F2,'/emp/name/text()')
> "name",extractValue(F2,'/emp/@id') "id" FROM LUCENE.T1 for
> update nowait
> Sep 26, 2008 3:44:16 PM org.apache.lucene.indexer.TableIndexer index
> FINE: Document<stored/uncompressed,indexed<rowid:AAARLCAAEAAAm2QAAA>
> indexed,tokenized<F1:001> indexed,tokenized<name:ravi>
> indexed,tokenized<id:01>>
> Sep 26, 2008 3:44:16 PM org.apache.lucene.indexer.TableIndexer index
> FINE: Document<stored/uncompressed,indexed<rowid:AAARLCAAEAAAm2QAAB>
> indexed,tokenized<F1:003> indexed,tokenized<name:murthy>
> indexed,tokenized<id:03>>
> IW 10 [Root Thread]:   flush: segment=3D_0 docStoreSegment=3D_0
> docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue flushDocStores=3D=
false
> numDocs=3D2
> numBufDelTerms=3D0
> IW 10 [Root Thread]:   index before flush
> IW 10 [Root Thread]: DW: flush postings as segment _0 numDocs=3D2
> IW 10 [Root Thread]: DW:   oldRAMSize=3D111616 newFlushedSize=3D166
> docs/MB=3D12,633.446 new/old=3D0.149%
> IFD [Root Thread]: now checkpoint "segments_1" [1 segments ;
> isCommit =3D false]
> IW 10 [Root Thread]: LMP: findMerges: 1 segments
> IW 10 [Root Thread]: LMP:   level -1.0 to 2.2741578: 1 segments
> IW 10 [Root Thread]: CMS: now merge
> IW 10 [Root Thread]: CMS:   index: _0:C2->_0
> IW 10 [Root Thread]: CMS:   no more merges pending; now return
> IW 10 [Root Thread]: now flush at close
> IW 10 [Root Thread]:   flush: segment=3Dnull docStoreSegment=3D_0
> docStoreOffset=3D2 flushDocs=3Dfalse flushDeletes=3Dtrue flushDocStores=
=3Dtrue
> numDocs=3D0 numBufDelTerms=3D0
> IW 10 [Root Thread]:   index before flush _0:C2->_0
> IW 10 [Root Thread]:   flush shared docStore segment _0
> IW 10 [Root Thread]: DW: closeDocStore: 2 files to flush to
> segment _0 numDocs=3D2
> IW 10 [Root Thread]: CMS: now merge
> IW 10 [Root Thread]: CMS:   index: _0:C2->_0
> IW 10 [Root Thread]: CMS:   no more merges pending; now return
> IW 10 [Root Thread]: now call final commit()
> IW 10 [Root Thread]: startCommit(): start sizeInBytes=3D0
> IW 10 [Root Thread]: startCommit index=3D_0:C2->_0 changeCount=3D2
> IW 10 [Root Thread]: now sync _0.fnm
> IW 10 [Root Thread]: now sync _0.frq
> IW 10 [Root Thread]: now sync _0.prx
> IW 10 [Root Thread]: now sync _0.tis
> IW 10 [Root Thread]: now sync _0.tii
> IW 10 [Root Thread]: now sync _0.nrm
> IW 10 [Root Thread]: now sync _0.fdx
> IW 10 [Root Thread]: now sync _0.fdt
> IW 10 [Root Thread]: done all syncs
> IW 10 [Root Thread]: commit: pendingCommit !=3D null
> IFD [Root Thread]: now checkpoint "segments_2" [1 segments ;
> isCommit =3D true]
> IFD [Root Thread]: deleteCommits: now decRef commit "segments_1"
> IFD [Root Thread]: delete "segments_1"
> IW 10 [Root Thread]: commit: done
> IW 10 [Root Thread]: at close: _0:C2->_0
> Sep 26, 2008 3:44:16 PM org.apache.lucene.indexer.LuceneDomainIndex
> ODCIIndexCreate
> FINER: RETURN 0
>
> Index created.
>
>   And when I am trying to read the index I got:
> INFO: Analyzer: org.apache.lucene.analysis.WhitespaceAnalyzer@f2164127
> Sep 26, 2008 3:44:48 PM
> org.apache.lucene.indexer.LuceneDomainIndex ODCIStart
> INFO: qryStr: DESC(name:ravi)
> Sep 26, 2008 3:44:48 PM
> org.apache.lucene.indexer.LuceneDomainIndex ODCIStart
> INFO: storing cachingFilter: -1378376940 and searcher: 781713581
> qryStr: DESC(name:ravi)
> Sep 26, 2008 3:44:48 PM
> org.apache.lucene.indexer.LuceneDomainIndex getSort
> INFO: using sort: <score>,<doc>
> Exception in thread "Root Thread" java.lang.IndexOutOfBoundsException:
> Index: 6, Size: 4
>         at java.util.ArrayList.RangeCheck(ArrayList.java)
>         at java.util.ArrayList.get(ArrayList.java)
>         at
> org.apache.lucene.index.FieldInfos.fieldInfo(FieldInfos.java)
>         at
> org.apache.lucene.index.FieldInfos.fieldName(FieldInfos.java)
>         at org.apache.lucene.index.TermBuffer.read(TermBuffer.java)
>         at
> org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java)
>         at
> org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java)
>         at
> org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java)
>         at
> org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java)
>         at
> org.apache.lucene.index.SegmentReader.docFreq(SegmentReader.java)
>         at
> org.apache.lucene.search.IndexSearcher.docFreq(IndexSearcher.java)
>         at org.apache.lucene.search.Similarity.idf(Similarity.java)
>         at
> org.apache.lucene.search.TermQuery$TermWeight.<init>(TermQuery.java)
>         at
> org.apache.lucene.search.TermQuery.createWeight(TermQuery.java)
>         at org.apache.lucene.search.Query.weight(Query.java)
>         at org.apache.lucene.search.Hits.<init>(Hits.java:85)
>         at org.apache.lucene.search.Searcher.search(Searcher.java)
>         at
> org.apache.lucene.indexer.LuceneDomainIndex.ODCIStart(LuceneDo
> mainIndex.java)
>
>   Which definetly means that something is not well saved at OJVM
> directory BLOB storage :(
>   This are my files:
> SQL> select file_size,name from it1$t;
>
>  FILE_SIZE NAME
> ---------- ------------------------------
>         10 parameters
>          1 updateCount
>         28 segments_1
>         20 segments.gen
>          8 _0.frq
>          8 _0.prx
>        103 _0.tis
>         35 _0.tii
>         12 _0.nrm
>         22 _0.fnm
>         48 _0.fdt
>         20 _0.fdx
>         62 segments_2
>   I'll add some debugging information at my classes which save/load
> buffers to see how many calls and which arguments are used.
>   Marcelo.
>
> On Fri, Sep 26, 2008 at 1:41 PM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
> >
> > This one looks spooky!
> >
> > Is it easily repeated?  If you could print out which 2
> terms you had tried
> > to delete, and then zip up the index just before deleting
> those docs (after
> > closing the writer) and send to me, I can try to understand
> what's wrong
> > with the index.  It looks as if the *.tis file for one of
> the segments is
> > truncated.
> >
> > If you capture the series of add/update/delete documents,
> can you get a
> > standalone Java test to show this?
> >
> > Does this test create an entirely new index?
> >
> > We did change the index format in 2.4 to use "true" UTF8
> encoding for all
> > text content; not sure that this applies here (to
> BufferedIndexReader it's
> > all bytes) but it may.
> >
> > BufferedIndexReader in general can do random IO, especially
> when reading the
> > term dict file (*.tis), when you
> >
> > Mike
> >
> > Marcelo Ochoa wrote:
> >
> >> Michael:
> >>  I just start testing 2.4rc2 running inside OJVM.
> >> I found a similar stack trace during indexing:
> >> IW 3 [Root Thread]:   flush: segment=3D_3 docStoreSegment=3D_3
> >> docStoreOffset=3D0 flushDocs=3Dtrue flushDeletes=3Dtrue
> flushDocStores=3Dfalse
> >> numDocs=3D2 numBufDelTerms=3D2
> >> IW 3 [Root Thread]:   index before flush _1:C2->_1 _2:C2->_2
> >> IW 3 [Root Thread]: DW: flush postings as segment _3 numDocs=3D2
> >> IW 3 [Root Thread]: DW:   oldRAMSize=3D111616 newFlushedSize=3D264
> >> docs/MB=3D7,943.758 new/old=3D0.237%
> >> IW 3 [Root Thread]: DW: apply 2 buffered deleted terms and
> 0 deleted
> >> docIDs and 0 deleted queries on 3 segments.
> >> IW 3 [Root Thread]: hit exception flushing deletes
> >> Exception in thread "Root Thread" java.io.IOException:
> read past EOF
> >>       at
> >>
> org.apache.lucene.store.BufferedIndexInput.refill(BufferedInde
> xInput.java)
> >>       at
> >>
> org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedI
> ndexInput.java)
> >>       at
> >>
> org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedI
> ndexInput.java)
> >>       at org.apache.lucene.index.TermBuffer.read(TermBuffer.java)
> >>       at
> >> org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java)
> >>       at
> >>
> org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java)
> >>       at
> org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java)
> >>       at
> org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java)
> >>       at
> >> org.apache.lucene.index.SegmentTermDocs.seek(SegmentTermDocs.java)
> >>       at
> org.apache.lucene.index.IndexReader.termDocs(IndexReader.java)
> >>       at
> >>
> org.apache.lucene.index.DocumentsWriter.applyDeletes(Documents
> Writer.java)
> >>       at
> >>
> org.apache.lucene.index.DocumentsWriter.applyDeletes(Documents
> Writer.java:918)
> >>       at
> >> org.apache.lucene.index.IndexWriter.applyDeletes(IndexWriter.java)
> >>       at
> org.apache.lucene.index.IndexWriter.doFlush(IndexWriter.java)
> >>       at
> org.apache.lucene.index.IndexWriter.flush(IndexWriter.java)
> >>       at
> org.apache.lucene.index.IndexWriter.flush(IndexWriter.java)
> >>       at
> >>
> org.apache.lucene.indexer.LuceneDomainIndex.sync(LuceneDomainI
> ndex.java:1308)
> >>
> >>  I'll reinstall with a full debug info to see all line numbers in
> >> Lucene java code.
> >>  Is there a list of semantic changes at BufferedIndeInput code?
> >>  I mean it do sequential or random writes for example.
> >>  But anyway, I just compiled with latest code and ran my
> test suites,
> >> I'll investigate the problem a bit more.
> >>  Best regards, Marcelo.
> >>
> >> On Fri, Sep 26, 2008 at 7:32 AM, Michael McCandless
> >> <lucene@mikemccandless.com> wrote:
> >>>
> >>> Can you describe the sequence of steps that your
> replication process goes
> >>> through?
> >>>
> >>> Also, which filesystem is the index being accessed through?
> >>>
> >>> Mike
> >>>
> >>> rahul_k123 wrote:
> >>>
> >>>>
> >>>> First of all, thanks to all the people who helped me in
> getting the
> >>>> lucene
> >>>> replication setup working and right now its live in our
> production :-)
> >>>>
> >>>> Everything working fine, except that i am seeing some
> exceptions on
> >>>> slaves.
> >>>>
> >>>> The following is the one which is occuring more often on slaves
> >>>>
> >>>> at
> >>>>
> java.util.concurrent.Executors$RunnableAdapter.call(Executors.
> java:441)
> >>>>     at
> >>>>
> java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
> >>>>     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
> >>>>     at
> >>>>
> >>>>
> >>>>
> java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadP
> oolExecutor.java:885)
> >>>>     at
> >>>>
> >>>>
> >>>>
> java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolE
> xecutor.java:907)
> >>>>     at java.lang.Thread.run(Thread.java:619)
> >>>> Caused by: com.IndexingException: [SYSTEM_ERROR] Cannot
> access index
> >>>> [data_dir/index]: [read past EOF]
> >>>>     at
> >>>>
> >>>>
> >>>>
> com.lucene.LuceneSearchService.getSearchResults(LuceneSearchSe
> rvice.java:964)
> >>>>     ... 12 more
> >>>> Caused by: java.io.IOException: read past EOF
> >>>>     at
> >>>>
> >>>>
> >>>>
> org.apache.lucene.store.BufferedIndexInput.refill(BufferedInde
> xInput.java:146)
> >>>>     at
> >>>>
> >>>>
> >>>>
> org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIn
> dexInput.java:38)
> >>>>     at
> org.apache.lucene.store.IndexInput.readInt(IndexInput.java:66)
> >>>>     at
> org.apache.lucene.store.IndexInput.readLong(IndexInput.java:89)
> >>>>     at
> org.apache.lucene.index.FieldsReader.doc(FieldsReader.java:147)
> >>>>     at
> >>>>
> org.apache.lucene.index.SegmentReader.document(SegmentReader.java:659)
> >>>>     at
> >>>>
> >>>>
> >>>>
> org.apache.lucene.index.MultiSegmentReader.document(MultiSegme
> ntReader.java:257)
> >>>>     at
> >>>>
> org.apache.lucene.index.IndexReader.document(IndexReader.java:525)
> >>>>
> >>>> and the second one is
> >>>>
> >>>> at
> >>>>
> java.util.concurrent.Executors$RunnableAdapter.call(Executors.
> java:441)
> >>>>     at
> >>>>
> java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
> >>>>     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
> >>>>     at
> >>>>
> >>>>
> >>>>
> java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadP
> oolExecutor.java:885)
> >>>>     at
> >>>>
> >>>>
> >>>>
> java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolE
> xecutor.java:907)
> >>>>     at java.lang.Thread.run(Thread.java:619)
> >>>> Caused by: java.lang.IllegalArgumentException: attempt
> to access a
> >>>> deleted
> >>>> document
> >>>>     at
> >>>>
> org.apache.lucene.index.SegmentReader.document(SegmentReader.java:657)
> >>>>     at
> >>>>
> >>>>
> >>>>
> org.apache.lucene.index.MultiSegmentReader.document(MultiSegme
> ntReader.java:257)
> >>>>     at
> >>>>
> org.apache.lucene.index.IndexReader.document(IndexReader.java:525)
> >>>> This is on master index .
> >>>>
> >>>>
> >>>>
> >>>> Any help is appreciated
> >>>>
> >>>> Thanks.
> >>>>
> >>>> --
> >>>> View this message in context:
> >>>>
> >>>>
> http://www.nabble.com/Caused-by%3A-java.io.IOException%3A-read
> -past-EOF-on-Slave-tp19682684p19682684.html
> >>>> Sent from the Lucene - Java Users mailing list archive
> at Nabble.com.
> >>>>
> >>>>
> >>>>
> ---------------------------------------------------------------------
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>
> >>>
> >>>
> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>
> >>
> >>
> >> --
> >> Marcelo F. Ochoa
> >> http://marceloochoa.blogspot.com/
> >> http://marcelo.ochoa.googlepages.com/home
> >> ______________
> >> Do you Know DBPrism? Look @ DB Prism's Web Site
> >> http://www.dbprism.com.ar/index.html
> >> More info?
> >> Chapter 17 of the book "Programming the Oracle Database
> using Java &
> >> Web Services"
> >> http://www.amazon.com/gp/product/1555583296/
> >> Chapter 21 of the book "Professional XML Databases" - Wrox Press
> >> http://www.amazon.com/gp/product/1861003587/
> >> Chapter 8 of the book "Oracle & Open Source" - O'Reilly
> >> http://www.oreilly.com/catalog/oracleopen/
> >>
> >>
> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >
> >
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
>
> --
> Marcelo F. Ochoa
> http://marceloochoa.blogspot.com/
> http://marcelo.ochoa.googlepages.com/home
> ______________
> Want to integrate Lucene and Oracle?
> http://marceloochoa.blogspot.com/2007/09/running-lucene-inside
> -your-oracle-jvm.html
> Is Oracle 11g REST ready?
> http://marceloochoa.blogspot.com/2008/02/is-oracle-11g-rest-ready.html
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 29 12:52:28 2008
Return-Path: <java-user-return-36415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96337 invoked from network); 29 Sep 2008 12:52:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Sep 2008 12:52:28 -0000
Received: (qmail 15598 invoked by uid 500); 29 Sep 2008 12:52:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15466 invoked by uid 500); 29 Sep 2008 12:52:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15455 invoked by uid 99); 29 Sep 2008 12:52:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Sep 2008 05:52:19 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.230 as permitted sender)
Received: from [209.85.198.230] (HELO rv-out-0506.google.com) (209.85.198.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Sep 2008 12:51:19 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1945186rvb.5
        for <java-user@lucene.apache.org>; Mon, 29 Sep 2008 05:51:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=K525s09A2QnzJzr8qCNZjTqN1iPVcbhubQ3xtAQXqdg=;
        b=hQdaTo+SLGyNT1+fCNQMdSEHOP++YLh2DTh6Q/bjXEtvEFJqNM/8ga7zB4c9qn/rrv
         ZzD2HNslvk6PlL65tFLZeJPYdnD4g54aHy+J4eAhwmWKRBkC36M6FwpyopiP2Jab/ceE
         EbjUBwtkoQUzeh3p4WMCso0+ftGhwdi6KS/AE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=SQCLWjfy7H3sfhTDdOl+6kz284o99zoSW0C3ir3vLGfG58Cq3yHbpM0mfwDLWujzb/
         ckpQJpH4CgZk9c24eVfyuXXqPLPy8TImlrvBc4Z798tIDoddsmjt267N96FP9OT6DZa2
         r39jlFrPYbLZ/c4c6zfC6Zt35LzSh+x9ROh1Q=
Received: by 10.141.1.2 with SMTP id d2mr2397349rvi.42.1222692703879;
        Mon, 29 Sep 2008 05:51:43 -0700 (PDT)
Received: by 10.141.168.3 with HTTP; Mon, 29 Sep 2008 05:51:43 -0700 (PDT)
Message-ID: <1bcb7c7f0809290551y63546ee4p6100b7d5d45479b@mail.gmail.com>
Date: Mon, 29 Sep 2008 15:51:43 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: triplet store
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Has anyone tried to implement a triplet store with lucene?

Best,
-C.B.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 29 13:05:31 2008
Return-Path: <java-user-return-36416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7992 invoked from network); 29 Sep 2008 13:05:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Sep 2008 13:05:30 -0000
Received: (qmail 35115 invoked by uid 500); 29 Sep 2008 13:05:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35081 invoked by uid 500); 29 Sep 2008 13:05:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35070 invoked by uid 99); 29 Sep 2008 13:05:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Sep 2008 06:05:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 64.233.170.188 as permitted sender)
Received: from [64.233.170.188] (HELO rn-out-0910.google.com) (64.233.170.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Sep 2008 13:04:22 +0000
Received: by rn-out-0910.google.com with SMTP id j71so804670rne.4
        for <java-user@lucene.apache.org>; Mon, 29 Sep 2008 06:04:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=hUjvGJUy0jrrR0rg+78yTZXU1HAVeeXzZUnGSUBayGU=;
        b=GG8ANbih2tlBYqpbD5HHRuJkKTvOtGxRYJo03jrln4yoWIk1XwdMshnQPHCAgwCaAK
         wkeRXscZ5H1vt3et78PTOoJC34rgY13Kl+K+wzPEzokJxMAPSBd+lI49036g+6pr+3mS
         9YCKPFOw+d+OrdkrHw1ZTMIfltIvie7DJwhUA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=N77GdIDpZzZVgOL0TL+4Ejw+CVWhnq8LjsBgtJ8SeoK+q18AIBTC9MHlbf/eDMaODD
         UcxjfoykT+ELrcHtL89RfZW70CvhruD4CR4BJS9s9ffQHxSdiusV8ztrNN2qZasjzPxC
         ZnWY1K/jCsbyBOrLXsmnCDhvpYsDZHBMHfBDI=
Received: by 10.150.152.17 with SMTP id z17mr7805147ybd.242.1222693495930;
        Mon, 29 Sep 2008 06:04:55 -0700 (PDT)
Received: by 10.151.117.4 with HTTP; Mon, 29 Sep 2008 06:04:55 -0700 (PDT)
Message-ID: <85d3c3b60809290604w6889856y24da40cb74784f4a@mail.gmail.com>
Date: Mon, 29 Sep 2008 09:04:55 -0400
From: "Jason Rutherglen" <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: triplet store
In-Reply-To: <1bcb7c7f0809290551y63546ee4p6100b7d5d45479b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1bcb7c7f0809290551y63546ee4p6100b7d5d45479b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

What is that?

On Mon, Sep 29, 2008 at 8:51 AM, Cam Bazz <cambazz@gmail.com> wrote:
> Has anyone tried to implement a triplet store with lucene?
>
> Best,
> -C.B.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 29 13:32:29 2008
Return-Path: <java-user-return-36417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26889 invoked from network); 29 Sep 2008 13:32:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Sep 2008 13:32:29 -0000
Received: (qmail 84799 invoked by uid 500); 29 Sep 2008 13:32:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84769 invoked by uid 500); 29 Sep 2008 13:32:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84758 invoked by uid 99); 29 Sep 2008 13:32:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Sep 2008 06:32:21 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.224 as permitted sender)
Received: from [209.85.198.224] (HELO rv-out-0506.google.com) (209.85.198.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Sep 2008 13:31:20 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1963242rvb.5
        for <java-user@lucene.apache.org>; Mon, 29 Sep 2008 06:31:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=B0pkiBpYaLWuL7Zbf9ZyWqULKCr5+i5QCEtv81FlQ5c=;
        b=EWNCmOLrAZHZ8twxeB76I08zhUafSFaoWlBnvtuWdDCJEXtALXd3SGbt0hAixNQ/dg
         tHOQWfcYWeUASqscFVdTOrwMbduwg06kZE5Mm8Cg1UkYRszXVCrEx94mgXIBXlfGr+5u
         7VuOjI1WJIwsMJNvvxDgdFFH1ZmYeHJXMNnd8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=WDZ76+m3jrIS/Jm186BOBHeMGeWyQNx2aF5K3UqaANU3icn0/j31oL7ADa2XzzBigv
         wMAiV/AL9P49zHs2YNyI41shRMiQn61esiUE1ffJDRKog1RC/7gz2g8bsc0IjKTMPZc0
         Ry8DJm0teA6pJryTHgV71Vkd+18qLu79nFee0=
Received: by 10.140.172.21 with SMTP id u21mr2399674rve.262.1222695104822;
        Mon, 29 Sep 2008 06:31:44 -0700 (PDT)
Received: by 10.141.168.3 with HTTP; Mon, 29 Sep 2008 06:31:44 -0700 (PDT)
Message-ID: <1bcb7c7f0809290631r5ff20e58h89ac198d853e489@mail.gmail.com>
Date: Mon, 29 Sep 2008 16:31:44 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: triplet store
In-Reply-To: <85d3c3b60809290604w6889856y24da40cb74784f4a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1bcb7c7f0809290551y63546ee4p6100b7d5d45479b@mail.gmail.com>
	 <85d3c3b60809290604w6889856y24da40cb74784f4a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

for instance one described in:

http://www.w3.org/2001/sw/Europe/events/20031113-storage/positions/rusher.html

On Mon, Sep 29, 2008 at 4:04 PM, Jason Rutherglen
<jason.rutherglen@gmail.com> wrote:
> What is that?
>
> On Mon, Sep 29, 2008 at 8:51 AM, Cam Bazz <cambazz@gmail.com> wrote:
>> Has anyone tried to implement a triplet store with lucene?
>>
>> Best,
>> -C.B.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 29 13:45:56 2008
Return-Path: <java-user-return-36418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36876 invoked from network); 29 Sep 2008 13:45:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Sep 2008 13:45:56 -0000
Received: (qmail 6695 invoked by uid 500); 29 Sep 2008 13:45:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6667 invoked by uid 500); 29 Sep 2008 13:45:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6656 invoked by uid 99); 29 Sep 2008 13:45:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Sep 2008 06:45:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [140.203.201.100] (HELO mx1.nuigalway.ie) (140.203.201.100)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Sep 2008 13:44:43 +0000
X-IronPort-AV: E=Sophos;i="4.33,331,1220223600"; 
   d="scan'208";a="263630347"
Received: from exbe2.ac.nuigalway.ie (HELO EVS1.ac.nuigalway.ie) ([10.132.157.13])
  by mx1.nuigalway.ie with ESMTP; 29 Sep 2008 14:44:15 +0100
Received: from EVS1.ac.nuigalway.ie ([10.132.157.14]) by EVS1.ac.nuigalway.ie with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 29 Sep 2008 14:44:14 +0100
Received: from [10.2.18.102] ([140.203.154.11]) by EVS1.ac.nuigalway.ie over TLS secured channel with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 29 Sep 2008 14:44:14 +0100
Message-ID: <48E0DBAE.2000709@deri.org>
Date: Mon, 29 Sep 2008 14:44:14 +0100
From: Renaud Delbru <renaud.delbru@deri.org>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: triplet store
References: <1bcb7c7f0809290551y63546ee4p6100b7d5d45479b@mail.gmail.com>
In-Reply-To: <1bcb7c7f0809290551y63546ee4p6100b7d5d45479b@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 29 Sep 2008 13:44:14.0502 (UTC) FILETIME=[7600E460:01C92239]
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, I know to research project that have implemented a triple store on 
top of Lucene:
- Semplore [1]
- Sindice [2]

[1] http://apex.sjtu.edu.cn/apex_wiki/Demos/Semplore
[2] http://www.sindice.com
-- 
Renaud Delbru

Cam Bazz wrote:
> Has anyone tried to implement a triplet store with lucene?
>
> Best,
> -C.B.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 29 14:22:09 2008
Return-Path: <java-user-return-36419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59244 invoked from network); 29 Sep 2008 14:22:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Sep 2008 14:22:09 -0000
Received: (qmail 93476 invoked by uid 500); 29 Sep 2008 14:21:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93447 invoked by uid 500); 29 Sep 2008 14:21:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93425 invoked by uid 99); 29 Sep 2008 14:21:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Sep 2008 07:21:58 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.56] (HELO web50302.mail.re2.yahoo.com) (206.190.38.56)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 29 Sep 2008 14:20:55 +0000
Received: (qmail 59140 invoked by uid 60001); 29 Sep 2008 14:21:28 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=uZI6Hda+xE5ZZbd9CK0wK3OYHAV345fZ3QtG1HR5P+yau0DFUrMyHxl8Ih9bC3F9WXckAzylOwhxr8Eok6uUOLQjnKyuQdg7Hr6FnXlJ3AV67JJOxsAlho/QX/bQ7KN3X6nxNUwD7IjvZWepo4UxMIgJs+6OobSkGxnj6x1AOOE=;
X-YMail-OSG: BgCQjuMVM1m4qm.BHMJW.jgxbzw87glyJlaKj7EWVAB2EPjntSIFRbT..W_HSEXZuPvkFYLPTdtKG_.33GhPnNVxbv5uYcfb_A.MipgksO1DMSQ8KAieyF2HWVf3Rmg8JyHWLafr1RaESvoPbDh_rHejjm_89stP0CuzCxJV5lbMIE1g
Received: from [167.206.188.3] by web50302.mail.re2.yahoo.com via HTTP; Mon, 29 Sep 2008 07:21:28 PDT
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Mon, 29 Sep 2008 07:21:28 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Getting all found document ids from a search result
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <775730.58443.qm@web50302.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, you do, give it a try. :)

 Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: "gregor_ewald@trendmicro.de" <gregor_ewald@trendmicro.de>
> To: java-user@lucene.apache.org
> Sent: Monday, September 29, 2008 2:57:46 AM
> Subject: RE: Getting all found document ids from a search result
> 
> Hi,
> 
> Do I really get all results if I use a custom hitcollector?
> This would be great :-)
> 
> Regards,
> Gregor
> 
> 
> 
> -----Original Message-----
> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
> Sent: Freitag, 26. September 2008 17:00
> To: java-user@lucene.apache.org
> Subject: Re: Getting all found document ids from a search result
> 
> Gregor,
> 
> You could loop through the results or collect them using a custom HitCollector.
> 
> 
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> 
> 
> 
> ----- Original Message ----
> > From: "gregor_ewald@trendmicro.de" 
> > To: java-user@lucene.apache.org
> > Sent: Friday, September 26, 2008 10:31:37 AM
> > Subject: Getting all found document ids from a search result
> > 
> > 
> > Hello you all,
> > 
> > 
> > 
> > is it somehow possible to get all document ids found by a search. Not only 50 
> or 
> > 100...
> > 
> > If it is possible and someone knows it, please help me :-)
> > 
> > 
> > 
> > 
> > 
> > Thanks and beste regards,
> > 
> > Gregor
> > 
> > 
> > 
> > TREND MICRO Deutschland GmbH, Lise-Meitner-Str. 4, D-85716 Unterschleissheim, 
> > Germany
> > Geschaeftsfuehrer: Raimund Genes, Amtsgericht Muenchen - HRB 114739
> > 
> > Die in dieser E-Mail und ihren etwaigen Anhaengen enthaltenen Informationen 
> sind 
> > vertraulich und koennen gewerblichen Schutzrechten unterliegen. Sollten Sie 
> > keiner der vorgesehenen Empfaenger sein, sind Sie nicht berechtigt, diese 
> > Nachricht in irgendeiner Weise zu benutzen oder weiterzugeben. Bitte 
> > benachrichtigen Sie uns ggf. per Rueckantwort oder telefonisch (089-37479700) 
> > und loeschen Sie diese E-Mail aus Ihrem E-Mail-System.
> > 
> > The information contained in this email and any attachments is confidential 
> and 
> > may be subject to copyright or other intellectual property protection. If you 
> > are not the intended recipient, you are not authorized to use or disclose this 
> 
> > information, and we request that you notify us by reply mail or telephone and 
> > delete the original message from your mail system.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 29 14:37:26 2008
Return-Path: <java-user-return-36420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72221 invoked from network); 29 Sep 2008 14:37:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Sep 2008 14:37:26 -0000
Received: (qmail 35810 invoked by uid 500); 29 Sep 2008 14:37:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35654 invoked by uid 500); 29 Sep 2008 14:37:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35643 invoked by uid 99); 29 Sep 2008 14:37:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Sep 2008 07:37:18 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 66.249.90.182 as permitted sender)
Received: from [66.249.90.182] (HELO ik-out-1112.google.com) (66.249.90.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Sep 2008 14:36:15 +0000
Received: by ik-out-1112.google.com with SMTP id c30so1125045ika.5
        for <java-user@lucene.apache.org>; Mon, 29 Sep 2008 07:36:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=bf5FwI46UAQVzvdQCpUamsROSGRali2pq9/iD+67Gnw=;
        b=kEv1XdfsmlBIKEwUE7Bxgj26EKDmhO8nTTWrx+VfALEO7zU1U8yl77uwVthyL2FcDC
         UjT9Y8OrbGvYJnX9UBFkXI1az7qkmoHLFoNWradU7X58RsxU7KNQdnANZvNz2F1YDq8O
         GaeNGi1+uQZhs+gfpOkC7aQYHW7vIOCs1DJ2c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=MUXr9j88Ng5zNgSmEDHf49QAqmPV7tfK6mbTvQ4byyo+RFMCG081DBdSNOGIhP2GIB
         s2U60093KkZrozZhmhCiijfn0CMbvf2Ncnj2Ly4uKlx3jewta2f933+kF/F+sOV4gvxM
         GKtmhclSCKHgahoT7fQajXQvJWaQAZwZ4h/pA=
Received: by 10.86.80.17 with SMTP id d17mr4284967fgb.47.1222699008658;
        Mon, 29 Sep 2008 07:36:48 -0700 (PDT)
Received: by 10.86.76.4 with HTTP; Mon, 29 Sep 2008 07:36:48 -0700 (PDT)
Message-ID: <359a92830809290736n75b2e5daqac67b7adb94383dd@mail.gmail.com>
Date: Mon, 29 Sep 2008 10:36:48 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Getting all found document ids from a search result
In-Reply-To: <6207987134483D40ACA15C60611A4F920144A45A@EDCEXMAIL02.eu.trendnet.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24533_19546802.1222699008652"
References: <173219.23958.qm@web50309.mail.re2.yahoo.com>
	 <6207987134483D40ACA15C60611A4F920144A45A@EDCEXMAIL02.eu.trendnet.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24533_19546802.1222699008652
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The thing to remember is that in order to get the top-scoring
documents (e.g. TopDocCollector or Hits), Lucene has to
see how *every* document scores. What if the very last
document that satisfies the query is the highest scoring?

Best
Erick

On Mon, Sep 29, 2008 at 2:57 AM, <gregor_ewald@trendmicro.de> wrote:

> Hi,
>
> Do I really get all results if I use a custom hitcollector?
> This would be great :-)
>
> Regards,
> Gregor
>
>
>
> -----Original Message-----
> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
> Sent: Freitag, 26. September 2008 17:00
> To: java-user@lucene.apache.org
> Subject: Re: Getting all found document ids from a search result
>
> Gregor,
>
> You could loop through the results or collect them using a custom
> HitCollector.
>
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
>
> ----- Original Message ----
> > From: "gregor_ewald@trendmicro.de" <gregor_ewald@trendmicro.de>
> > To: java-user@lucene.apache.org
> > Sent: Friday, September 26, 2008 10:31:37 AM
> > Subject: Getting all found document ids from a search result
> >
> >
> > Hello you all,
> >
> >
> >
> > is it somehow possible to get all document ids found by a search. Not
> only 50 or
> > 100...
> >
> > If it is possible and someone knows it, please help me :-)
> >
> >
> >
> >
> >
> > Thanks and beste regards,
> >
> > Gregor
> >
> >
> >
> > TREND MICRO Deutschland GmbH, Lise-Meitner-Str. 4, D-85716
> Unterschleissheim,
> > Germany
> > Geschaeftsfuehrer: Raimund Genes, Amtsgericht Muenchen - HRB 114739
> >
> > Die in dieser E-Mail und ihren etwaigen Anhaengen enthaltenen
> Informationen sind
> > vertraulich und koennen gewerblichen Schutzrechten unterliegen. Sollten
> Sie
> > keiner der vorgesehenen Empfaenger sein, sind Sie nicht berechtigt, diese
> > Nachricht in irgendeiner Weise zu benutzen oder weiterzugeben. Bitte
> > benachrichtigen Sie uns ggf. per Rueckantwort oder telefonisch
> (089-37479700)
> > und loeschen Sie diese E-Mail aus Ihrem E-Mail-System.
> >
> > The information contained in this email and any attachments is
> confidential and
> > may be subject to copyright or other intellectual property protection. If
> you
> > are not the intended recipient, you are not authorized to use or disclose
> this
> > information, and we request that you notify us by reply mail or telephone
> and
> > delete the original message from your mail system.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_24533_19546802.1222699008652--

From java-user-return-36421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 29 15:08:11 2008
Return-Path: <java-user-return-36421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3495 invoked from network); 29 Sep 2008 15:08:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Sep 2008 15:08:10 -0000
Received: (qmail 3585 invoked by uid 500); 29 Sep 2008 15:08:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3180 invoked by uid 500); 29 Sep 2008 15:08:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3168 invoked by uid 99); 29 Sep 2008 15:08:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Sep 2008 08:08:00 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Sep 2008 15:06:56 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KkKLR-00089u-KZ
	for java-user@lucene.apache.org; Mon, 29 Sep 2008 08:07:29 -0700
Message-ID: <19725730.post@talk.nabble.com>
Date: Mon, 29 Sep 2008 08:07:29 -0700 (PDT)
From: student_t <cchou@cscinfo.com>
To: java-user@lucene.apache.org
Subject: Re: Please help to interpret Lucene Boost results
In-Reply-To: <359a92830809270742j6b1eb9ebn109025f0bc7818a9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: cchou@cscinfo.com
References: <19695313.post@talk.nabble.com> <359a92830809261341w36053e71s52217f9a286ecf43@mail.gmail.com> <19697605.post@talk.nabble.com> <359a92830809270742j6b1eb9ebn109025f0bc7818a9@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thank you Erick!

I got Luke and it's a great tool! I verified from Luke my queries posted
originally worked as expected (i.e., "Canadian pepsi" produced fewer results
than "pepsi" along.)

Based on your suggestion, I found out the program re-wrote the query before
it was sent to Nutch as the following:

(content:"+(content:pepsi) +((host:ca^10.0)^10.0)")

I think this is messing up the query results. Literally, this is what the
code was doing:

Query nutchQuery = new Query();
nutchQuery.addRequiredTerm("+(content:pepsi) +((host:ca^10.0)^10.0)",
"content");
nutchBean.search(nutchQuery, maxHits, maxHitsPerSite);

The above code must be using a default analyzer, which I have not found out
yet. But after looking at Luke results and this code, I think my problem is
in the query construction. Could you shed some light about how the new query
be constructed based on the following String?

+(content:pepsi) +((host:ca^10.0)^10.0)

Thanks again!


Erick Erickson wrote:
> 
> For Luke, see http://www.getopt.org/luke/ or just google lucene luke
> 
> About the same analyzers at index and search. No, it's not *required*
> that you use the same analyzer, but unless and until you understand
> what analyzers do, I would *strongly* recommend that you use the
> same one. See PerFieldAnalyzerWrapper for using different analyzers
> for different fields....
> 
> Conceptually, think of an analyzer as giving you the "smallest meaningful
> token" from your stream that your program then does something with,
> either index or analyze.
> 
> Consider the line "this is the 2nd Line in Erick's program". What are the
> tokens?
> Well, depending on the analyzer you could get
> nd, line, erick, program (assuming your analyzer lowercases, strips
> numbers
> and punctuation and removes stopwords)
> 
> You could get
> "this is the 2nd Line in Erick's program" (assuming your analyzer did
> nothing, just returned the entire input stream as a token, which would
> then
> NOT get a hit searching, say, 'Line')
> 
> You could get
> this, is, the, 2nd, line, in erick's, program (assuming your analyzer just
> lowercased and split on whitespace)
> 
> You could get
> nonsense, nonsense, nonsense, nonsense (assuming you wrote a pathological
> analyzer that always returned the word "nonsense")
> 
> Really, any transformations you wanted to perform can be done in an
> analyzer.
> So using different analyzers during indexing and searching will very often
> produce "surprising" results. Don't do it unless you know exactly what's
> being
> done to your input streams. Or be prepared to spend a lot of hours
> tracking
> down "what went wrong" <G>.
> 
> All that said, it doesn't explain the behaviour you're seeing because
> you're
> right,
> adding successively more restrictions should produce smaller result
> counts.
> I suspect
> that if you see what actual queries you're generating (and when you get
> Luke, be
> sure to find the drop-down for "which analyzer" to use) you'll find
> something
> surprising.
> 
> Best
> Erick
> 
> 
> On Fri, Sep 26, 2008 at 6:57 PM, student_t <cchou@cscinfo.com> wrote:
> 
>>
>> Hi Eric,
>>
>> Thanks a bunch for your pointers. I will need to find out the analyzers
>> at
>> index and query time. But is it critical to have the same analyzers
>> during
>> these two times?
>>
>> I had tested with lucli from some of my local segment data and they
>> appeared
>> working fine (i.e., their result sets are reasonable.)
>>
>> Is Luke part of Lucene contrib? I recall there is a GUI that lets you
>> view
>> the indices. Would you please elaborate?
>>
>> Thanks again!
>> student_t
>>
>>
>> Erick Erickson wrote:
>> >
>> > That certainly doesn't look right. What analyzers are you using at
>> index
>> > and query time?
>> >
>> > Two things that will help track down what's really happening:
>> >
>> > 1> query.toString() is your friend.
>> > 2> get a copy of the excellent Luke tool and have it do its explain
>> magic
>> > on
>> > your query. Watch that the analyzer you choose when querying is what
>> you
>> > expect....
>> >
>> > If neither of those things sheds any light on the problem, let us know
>> > what
>> > you find....
>> >
>> > Best
>> > Erick
>> >
>> > On Fri, Sep 26, 2008 at 3:55 PM, student_t <cchou@cscinfo.com> wrote:
>> >
>> >>
>> >> I am baffled by the results of the following queries. Can it be
>> something
>> >> to
>> >> do with the boosting factor? All of these queries are performed in the
>> >> same
>> >> environment with the same crawled index/data.
>> >>
>> >> A. query1 = +(content:(Pepsi))                              resulted
>> in
>> >> 228
>> >> hits.
>> >> B. query2 = +(content:(Pepsi) ) +(host:(ca)^10 )     resulted in 398
>> >> hits.
>> >> C. query3 = +(host:(ca)^10 )                                resulted
>> in
>> >> 212
>> >> hits.
>> >>
>> >> Two questions (strictly just one):
>> >> 1. query1 of any content contains Pepsi yielded 228 hits, how could a
>> >> more
>> >> limiting query2 (give me all docs that have Pepsi in it with a domain
>> of
>> >> ca)
>> >> yield more hits (398)?
>> >> 2. Since there are 212 hits of Canadian domains, how can query2 return
>> >> 398
>> >> hits?
>> >>
>> >> Thanks for any pointers!
>> >> Cheers,
>> >> student_t
>> >>
>> >>
>> >> --
>> >> View this message in context:
>> >>
>> http://www.nabble.com/Please-help-to-interpret-Lucene-Boost-results-tp19695313p19695313.html
>> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>> >
>>
>> --
>> View this message in context:
>> http://www.nabble.com/Please-help-to-interpret-Lucene-Boost-results-tp19695313p19697605.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Please-help-to-interpret-Lucene-Boost-results-tp19695313p19725730.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 29 16:11:44 2008
Return-Path: <java-user-return-36422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65934 invoked from network); 29 Sep 2008 16:11:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Sep 2008 16:11:43 -0000
Received: (qmail 27310 invoked by uid 500); 29 Sep 2008 16:11:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27282 invoked by uid 500); 29 Sep 2008 16:11:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27271 invoked by uid 99); 29 Sep 2008 16:11:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Sep 2008 09:11:34 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Sep 2008 16:10:30 +0000
Received: by nf-out-0910.google.com with SMTP id g16so586554nfd.15
        for <java-user@lucene.apache.org>; Mon, 29 Sep 2008 09:10:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=RIYyBwnqK+Bu35gPmvPjpHu31fPO9rkWeiO5fdJHT3Y=;
        b=xN3SzRf7+c+ML8e8Bz9kLhQPE7x46qzgLM2JwCrzqDFIYuPMmo43vVCIMe0THLTWs6
         +g2BMK/9fKDHMR9uaXjPc4HQ7BrwXdve/2muhLD17mcd/X8iItelY5G0i+84VZbsCzsf
         u62/cQNKzq/2fgQQK0jxaMwBQhPYy59yTWP3g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=R6Sd/b+G4zd2cx4c3o3G35xNaE+dsGK5rNRGIIxT7aOprR0IPvJMtyT5E5GoSWrMUd
         kVCxDjA8ytfsNUv4QR0A3+DvhmMggpRHI6g9wU9YXQowKouM3RXJJWj/ZJJgJtc7QU/8
         61L6x4Eij0G5hxK74s74rP8Pjxltaajum/z34=
Received: by 10.86.31.18 with SMTP id e18mr4404753fge.52.1222704646668;
        Mon, 29 Sep 2008 09:10:46 -0700 (PDT)
Received: by 10.86.76.4 with HTTP; Mon, 29 Sep 2008 09:10:46 -0700 (PDT)
Message-ID: <359a92830809290910w3bd445cbh585667124612793c@mail.gmail.com>
Date: Mon, 29 Sep 2008 12:10:46 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Please help to interpret Lucene Boost results
In-Reply-To: <19725730.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26066_5299592.1222704646656"
References: <19695313.post@talk.nabble.com>
	 <359a92830809261341w36053e71s52217f9a286ecf43@mail.gmail.com>
	 <19697605.post@talk.nabble.com>
	 <359a92830809270742j6b1eb9ebn109025f0bc7818a9@mail.gmail.com>
	 <19725730.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26066_5299592.1222704646656
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

OK, you're officially beyond where I can help. But the
rewritten query is your problem, and I'm going to appeal to
people who understand things waaay better than I do to answer
it. Can you recognize it when I run away <G>...

You might consider posting that question over on the nutch
user's list if you don't get anything here, but I'm pretty sure that
some folks who are very knowledgeable about nutch might
see it here.

Best
Erick

On Mon, Sep 29, 2008 at 11:07 AM, student_t <cchou@cscinfo.com> wrote:

>
> Thank you Erick!
>
> I got Luke and it's a great tool! I verified from Luke my queries posted
> originally worked as expected (i.e., "Canadian pepsi" produced fewer
> results
> than "pepsi" along.)
>
> Based on your suggestion, I found out the program re-wrote the query before
> it was sent to Nutch as the following:
>
> (content:"+(content:pepsi) +((host:ca^10.0)^10.0)")
>
> I think this is messing up the query results. Literally, this is what the
> code was doing:
>
> Query nutchQuery = new Query();
> nutchQuery.addRequiredTerm("+(content:pepsi) +((host:ca^10.0)^10.0)",
> "content");
> nutchBean.search(nutchQuery, maxHits, maxHitsPerSite);
>
> The above code must be using a default analyzer, which I have not found out
> yet. But after looking at Luke results and this code, I think my problem is
> in the query construction. Could you shed some light about how the new
> query
> be constructed based on the following String?
>
> +(content:pepsi) +((host:ca^10.0)^10.0)
>
> Thanks again!
>
>
> Erick Erickson wrote:
> >
> > For Luke, see http://www.getopt.org/luke/ or just google lucene luke
> >
> > About the same analyzers at index and search. No, it's not *required*
> > that you use the same analyzer, but unless and until you understand
> > what analyzers do, I would *strongly* recommend that you use the
> > same one. See PerFieldAnalyzerWrapper for using different analyzers
> > for different fields....
> >
> > Conceptually, think of an analyzer as giving you the "smallest meaningful
> > token" from your stream that your program then does something with,
> > either index or analyze.
> >
> > Consider the line "this is the 2nd Line in Erick's program". What are the
> > tokens?
> > Well, depending on the analyzer you could get
> > nd, line, erick, program (assuming your analyzer lowercases, strips
> > numbers
> > and punctuation and removes stopwords)
> >
> > You could get
> > "this is the 2nd Line in Erick's program" (assuming your analyzer did
> > nothing, just returned the entire input stream as a token, which would
> > then
> > NOT get a hit searching, say, 'Line')
> >
> > You could get
> > this, is, the, 2nd, line, in erick's, program (assuming your analyzer
> just
> > lowercased and split on whitespace)
> >
> > You could get
> > nonsense, nonsense, nonsense, nonsense (assuming you wrote a pathological
> > analyzer that always returned the word "nonsense")
> >
> > Really, any transformations you wanted to perform can be done in an
> > analyzer.
> > So using different analyzers during indexing and searching will very
> often
> > produce "surprising" results. Don't do it unless you know exactly what's
> > being
> > done to your input streams. Or be prepared to spend a lot of hours
> > tracking
> > down "what went wrong" <G>.
> >
> > All that said, it doesn't explain the behaviour you're seeing because
> > you're
> > right,
> > adding successively more restrictions should produce smaller result
> > counts.
> > I suspect
> > that if you see what actual queries you're generating (and when you get
> > Luke, be
> > sure to find the drop-down for "which analyzer" to use) you'll find
> > something
> > surprising.
> >
> > Best
> > Erick
> >
> >
> > On Fri, Sep 26, 2008 at 6:57 PM, student_t <cchou@cscinfo.com> wrote:
> >
> >>
> >> Hi Eric,
> >>
> >> Thanks a bunch for your pointers. I will need to find out the analyzers
> >> at
> >> index and query time. But is it critical to have the same analyzers
> >> during
> >> these two times?
> >>
> >> I had tested with lucli from some of my local segment data and they
> >> appeared
> >> working fine (i.e., their result sets are reasonable.)
> >>
> >> Is Luke part of Lucene contrib? I recall there is a GUI that lets you
> >> view
> >> the indices. Would you please elaborate?
> >>
> >> Thanks again!
> >> student_t
> >>
> >>
> >> Erick Erickson wrote:
> >> >
> >> > That certainly doesn't look right. What analyzers are you using at
> >> index
> >> > and query time?
> >> >
> >> > Two things that will help track down what's really happening:
> >> >
> >> > 1> query.toString() is your friend.
> >> > 2> get a copy of the excellent Luke tool and have it do its explain
> >> magic
> >> > on
> >> > your query. Watch that the analyzer you choose when querying is what
> >> you
> >> > expect....
> >> >
> >> > If neither of those things sheds any light on the problem, let us know
> >> > what
> >> > you find....
> >> >
> >> > Best
> >> > Erick
> >> >
> >> > On Fri, Sep 26, 2008 at 3:55 PM, student_t <cchou@cscinfo.com> wrote:
> >> >
> >> >>
> >> >> I am baffled by the results of the following queries. Can it be
> >> something
> >> >> to
> >> >> do with the boosting factor? All of these queries are performed in
> the
> >> >> same
> >> >> environment with the same crawled index/data.
> >> >>
> >> >> A. query1 = +(content:(Pepsi))                              resulted
> >> in
> >> >> 228
> >> >> hits.
> >> >> B. query2 = +(content:(Pepsi) ) +(host:(ca)^10 )     resulted in 398
> >> >> hits.
> >> >> C. query3 = +(host:(ca)^10 )                                resulted
> >> in
> >> >> 212
> >> >> hits.
> >> >>
> >> >> Two questions (strictly just one):
> >> >> 1. query1 of any content contains Pepsi yielded 228 hits, how could a
> >> >> more
> >> >> limiting query2 (give me all docs that have Pepsi in it with a domain
> >> of
> >> >> ca)
> >> >> yield more hits (398)?
> >> >> 2. Since there are 212 hits of Canadian domains, how can query2
> return
> >> >> 398
> >> >> hits?
> >> >>
> >> >> Thanks for any pointers!
> >> >> Cheers,
> >> >> student_t
> >> >>
> >> >>
> >> >> --
> >> >> View this message in context:
> >> >>
> >>
> http://www.nabble.com/Please-help-to-interpret-Lucene-Boost-results-tp19695313p19695313.html
> >> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >> >>
> >> >>
> >> >> ---------------------------------------------------------------------
> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >>
> >> >>
> >> >
> >> >
> >>
> >> --
> >> View this message in context:
> >>
> http://www.nabble.com/Please-help-to-interpret-Lucene-Boost-results-tp19695313p19697605.html
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Please-help-to-interpret-Lucene-Boost-results-tp19695313p19725730.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_26066_5299592.1222704646656--

From java-user-return-36423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 30 12:08:14 2008
Return-Path: <java-user-return-36423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26539 invoked from network); 30 Sep 2008 12:08:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Sep 2008 12:08:14 -0000
Received: (qmail 18174 invoked by uid 500); 30 Sep 2008 12:08:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18139 invoked by uid 500); 30 Sep 2008 12:08:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18128 invoked by uid 99); 30 Sep 2008 12:08:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Sep 2008 05:08:04 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=SPF_PASS,URIBL_GREY,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of marcelo.ochoa@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Sep 2008 12:07:00 +0000
Received: by gxk6 with SMTP id 6so11777631gxk.5
        for <java-user@lucene.apache.org>; Tue, 30 Sep 2008 05:06:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=qzDmkp/f1dmbbg/S7I4/t4CUldDwzz5zCzGZ0v7yW+o=;
        b=gc3cz0JeG5gfkVPR5K1jrCebPACGyPeQJYqWRKgKboS0YSlaUF06ku4HRZJzUZ2Olz
         TTjiLQbuHRR6zQiERafbRoqffbxg1dI8G/CEAZXRpoZPkq1xXKAaxZWZ1c0eIeeM4Zvw
         grZ+M7IzjkQv3QVv0OyJ9H0udqMdlSyIGFnuc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=p3PmHJ1NX2eh0XEF7/dVGiV1OeVNeP2gVbZCNEYAe6LEXyHjq/4iHfbYIYuBywzi9f
         lXd3uhzBf1HgqHIkD6GOtB87Hbehf/8epdsaiU0F7B64Yp/Q6G7T9v/1iqNfFurdikGo
         IHqybKEefi/Pal9xMsGtukC7xwaUGxmjTcIOM=
Received: by 10.100.214.15 with SMTP id m15mr5769646ang.51.1222776393636;
        Tue, 30 Sep 2008 05:06:33 -0700 (PDT)
Received: by 10.100.8.18 with HTTP; Tue, 30 Sep 2008 05:06:33 -0700 (PDT)
Message-ID: <126142c0809300506l691fc40dg1bdbc4b0d8edc937@mail.gmail.com>
Date: Tue, 30 Sep 2008 09:06:33 -0300
From: "Marcelo Ochoa" <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Caused by: java.io.IOException: read past EOF on Slave
In-Reply-To: <8CB273B7-F6F2-4D06-982D-59798779102F@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <19682684.post@talk.nabble.com>
	 <BF8A2B92-035C-483A-B955-447BDB0C1C89@mikemccandless.com>
	 <126142c0809260844x3551cfaaj21863356c5a98ba3@mail.gmail.com>
	 <46392609-A138-4546-8DBC-7839801E5280@mikemccandless.com>
	 <126142c0809261153l15289c7fo919acf190ff6ab1e@mail.gmail.com>
	 <8CB273B7-F6F2-4D06-982D-59798779102F@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Michael:
  I have OJVMDirectory working with 2.4rc2 code base.
  I have refactored Output and Input streams classes according to
latest implementation of Buffered base classes and works OK.
  All of my tests suites runs OK also the bug in the 11g JITs compiler
is not reproducible.
  I'll test this new implementation of Input/Output stream classes if
they are compatible with 2.3 code base to release a new binary version
of Oracle Lucene integration with 2.3 distribution and once 2.4
release is in production I'll release another binary version too.
  Best regards, Marcelo.

On Mon, Sep 29, 2008 at 6:58 AM, Michael McCandless
<lucene@mikemccandless.com> wrote:
>
> Marcelo,
>
> Do you have any sense whether this is an issue with your integration (eg
> your Directory implementation that stores data in BLOB columns) vs something
> with Lucene 2.4?
>
> It seems odd to me that there would be a bug in your Directory
> implementation that 2.3 didn't tickle but 2.4 did.
>
> Can you dump the index, as stored in BLOB columns, out into the filesystem,
> and run CheckIndex on it?  (Or maybe run CheckIndex within Oracle).
>
> Mike
>
> Marcelo Ochoa wrote:
>
>> Mike:
>>  Actually there is more issues at first glance with OJVMDirectory
>> integration.
>>  Note this, I am creating an index with two simple documents:
>> INFO: Performing: SELECT /*+ DYNAMIC_SAMPLING(0) RULE NOCACHE(T1) */
>> T1.rowid,F1,extractValue(F2,'/emp/name/text()')
>> "name",extractValue(F2,'/emp/@id') "id" FROM LUCENE.T1 for update nowait
>> Sep 26, 2008 3:44:16 PM org.apache.lucene.indexer.TableIndexer index
>> FINE: Document<stored/uncompressed,indexed<rowid:AAARLCAAEAAAm2QAAA>
>> indexed,tokenized<F1:001> indexed,tokenized<name:ravi>
>> indexed,tokenized<id:01>>
>> Sep 26, 2008 3:44:16 PM org.apache.lucene.indexer.TableIndexer index
>> FINE: Document<stored/uncompressed,indexed<rowid:AAARLCAAEAAAm2QAAB>
>> indexed,tokenized<F1:003> indexed,tokenized<name:murthy>
>> indexed,tokenized<id:03>>
>> IW 10 [Root Thread]:   flush: segment=_0 docStoreSegment=_0
>> docStoreOffset=0 flushDocs=true flushDeletes=true flushDocStores=false
>> numDocs=2
>> numBufDelTerms=0
>> IW 10 [Root Thread]:   index before flush
>> IW 10 [Root Thread]: DW: flush postings as segment _0 numDocs=2
>> IW 10 [Root Thread]: DW:   oldRAMSize=111616 newFlushedSize=166
>> docs/MB=12,633.446 new/old=0.149%
>> IFD [Root Thread]: now checkpoint "segments_1" [1 segments ; isCommit =
>> false]
>> IW 10 [Root Thread]: LMP: findMerges: 1 segments
>> IW 10 [Root Thread]: LMP:   level -1.0 to 2.2741578: 1 segments
>> IW 10 [Root Thread]: CMS: now merge
>> IW 10 [Root Thread]: CMS:   index: _0:C2->_0
>> IW 10 [Root Thread]: CMS:   no more merges pending; now return
>> IW 10 [Root Thread]: now flush at close
>> IW 10 [Root Thread]:   flush: segment=null docStoreSegment=_0
>> docStoreOffset=2 flushDocs=false flushDeletes=true flushDocStores=true
>> numDocs=0 numBufDelTerms=0
>> IW 10 [Root Thread]:   index before flush _0:C2->_0
>> IW 10 [Root Thread]:   flush shared docStore segment _0
>> IW 10 [Root Thread]: DW: closeDocStore: 2 files to flush to segment _0
>> numDocs=2
>> IW 10 [Root Thread]: CMS: now merge
>> IW 10 [Root Thread]: CMS:   index: _0:C2->_0
>> IW 10 [Root Thread]: CMS:   no more merges pending; now return
>> IW 10 [Root Thread]: now call final commit()
>> IW 10 [Root Thread]: startCommit(): start sizeInBytes=0
>> IW 10 [Root Thread]: startCommit index=_0:C2->_0 changeCount=2
>> IW 10 [Root Thread]: now sync _0.fnm
>> IW 10 [Root Thread]: now sync _0.frq
>> IW 10 [Root Thread]: now sync _0.prx
>> IW 10 [Root Thread]: now sync _0.tis
>> IW 10 [Root Thread]: now sync _0.tii
>> IW 10 [Root Thread]: now sync _0.nrm
>> IW 10 [Root Thread]: now sync _0.fdx
>> IW 10 [Root Thread]: now sync _0.fdt
>> IW 10 [Root Thread]: done all syncs
>> IW 10 [Root Thread]: commit: pendingCommit != null
>> IFD [Root Thread]: now checkpoint "segments_2" [1 segments ; isCommit =
>> true]
>> IFD [Root Thread]: deleteCommits: now decRef commit "segments_1"
>> IFD [Root Thread]: delete "segments_1"
>> IW 10 [Root Thread]: commit: done
>> IW 10 [Root Thread]: at close: _0:C2->_0
>> Sep 26, 2008 3:44:16 PM org.apache.lucene.indexer.LuceneDomainIndex
>> ODCIIndexCreate
>> FINER: RETURN 0
>>
>> Index created.
>>
>>  And when I am trying to read the index I got:
>> INFO: Analyzer: org.apache.lucene.analysis.WhitespaceAnalyzer@f2164127
>> Sep 26, 2008 3:44:48 PM org.apache.lucene.indexer.LuceneDomainIndex
>> ODCIStart
>> INFO: qryStr: DESC(name:ravi)
>> Sep 26, 2008 3:44:48 PM org.apache.lucene.indexer.LuceneDomainIndex
>> ODCIStart
>> INFO: storing cachingFilter: -1378376940 and searcher: 781713581
>> qryStr: DESC(name:ravi)
>> Sep 26, 2008 3:44:48 PM org.apache.lucene.indexer.LuceneDomainIndex
>> getSort
>> INFO: using sort: <score>,<doc>
>> Exception in thread "Root Thread" java.lang.IndexOutOfBoundsException:
>> Index: 6, Size: 4
>>       at java.util.ArrayList.RangeCheck(ArrayList.java)
>>       at java.util.ArrayList.get(ArrayList.java)
>>       at org.apache.lucene.index.FieldInfos.fieldInfo(FieldInfos.java)
>>       at org.apache.lucene.index.FieldInfos.fieldName(FieldInfos.java)
>>       at org.apache.lucene.index.TermBuffer.read(TermBuffer.java)
>>       at
>> org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java)
>>       at
>> org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java)
>>       at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java)
>>       at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java)
>>       at org.apache.lucene.index.SegmentReader.docFreq(SegmentReader.java)
>>       at
>> org.apache.lucene.search.IndexSearcher.docFreq(IndexSearcher.java)
>>       at org.apache.lucene.search.Similarity.idf(Similarity.java)
>>       at
>> org.apache.lucene.search.TermQuery$TermWeight.<init>(TermQuery.java)
>>       at org.apache.lucene.search.TermQuery.createWeight(TermQuery.java)
>>       at org.apache.lucene.search.Query.weight(Query.java)
>>       at org.apache.lucene.search.Hits.<init>(Hits.java:85)
>>       at org.apache.lucene.search.Searcher.search(Searcher.java)
>>       at
>> org.apache.lucene.indexer.LuceneDomainIndex.ODCIStart(LuceneDomainIndex.java)
>>
>>  Which definetly means that something is not well saved at OJVM
>> directory BLOB storage :(
>>  This are my files:
>> SQL> select file_size,name from it1$t;
>>
>> FILE_SIZE NAME
>> ---------- ------------------------------
>>       10 parameters
>>        1 updateCount
>>       28 segments_1
>>       20 segments.gen
>>        8 _0.frq
>>        8 _0.prx
>>      103 _0.tis
>>       35 _0.tii
>>       12 _0.nrm
>>       22 _0.fnm
>>       48 _0.fdt
>>       20 _0.fdx
>>       62 segments_2
>>  I'll add some debugging information at my classes which save/load
>> buffers to see how many calls and which arguments are used.
>>  Marcelo.
>>
>> On Fri, Sep 26, 2008 at 1:41 PM, Michael McCandless
>> <lucene@mikemccandless.com> wrote:
>>>
>>> This one looks spooky!
>>>
>>> Is it easily repeated?  If you could print out which 2 terms you had
>>> tried
>>> to delete, and then zip up the index just before deleting those docs
>>> (after
>>> closing the writer) and send to me, I can try to understand what's wrong
>>> with the index.  It looks as if the *.tis file for one of the segments is
>>> truncated.
>>>
>>> If you capture the series of add/update/delete documents, can you get a
>>> standalone Java test to show this?
>>>
>>> Does this test create an entirely new index?
>>>
>>> We did change the index format in 2.4 to use "true" UTF8 encoding for all
>>> text content; not sure that this applies here (to BufferedIndexReader
>>> it's
>>> all bytes) but it may.
>>>
>>> BufferedIndexReader in general can do random IO, especially when reading
>>> the
>>> term dict file (*.tis), when you
>>>
>>> Mike
>>>
>>> Marcelo Ochoa wrote:
>>>
>>>> Michael:
>>>> I just start testing 2.4rc2 running inside OJVM.
>>>> I found a similar stack trace during indexing:
>>>> IW 3 [Root Thread]:   flush: segment=_3 docStoreSegment=_3
>>>> docStoreOffset=0 flushDocs=true flushDeletes=true flushDocStores=false
>>>> numDocs=2 numBufDelTerms=2
>>>> IW 3 [Root Thread]:   index before flush _1:C2->_1 _2:C2->_2
>>>> IW 3 [Root Thread]: DW: flush postings as segment _3 numDocs=2
>>>> IW 3 [Root Thread]: DW:   oldRAMSize=111616 newFlushedSize=264
>>>> docs/MB=7,943.758 new/old=0.237%
>>>> IW 3 [Root Thread]: DW: apply 2 buffered deleted terms and 0 deleted
>>>> docIDs and 0 deleted queries on 3 segments.
>>>> IW 3 [Root Thread]: hit exception flushing deletes
>>>> Exception in thread "Root Thread" java.io.IOException: read past EOF
>>>>     at
>>>>
>>>> org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java)
>>>>     at
>>>>
>>>> org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.java)
>>>>     at
>>>>
>>>> org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.java)
>>>>     at org.apache.lucene.index.TermBuffer.read(TermBuffer.java)
>>>>     at
>>>> org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java)
>>>>     at
>>>> org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java)
>>>>     at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java)
>>>>     at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java)
>>>>     at
>>>> org.apache.lucene.index.SegmentTermDocs.seek(SegmentTermDocs.java)
>>>>     at org.apache.lucene.index.IndexReader.termDocs(IndexReader.java)
>>>>     at
>>>>
>>>> org.apache.lucene.index.DocumentsWriter.applyDeletes(DocumentsWriter.java)
>>>>     at
>>>>
>>>> org.apache.lucene.index.DocumentsWriter.applyDeletes(DocumentsWriter.java:918)
>>>>     at
>>>> org.apache.lucene.index.IndexWriter.applyDeletes(IndexWriter.java)
>>>>     at org.apache.lucene.index.IndexWriter.doFlush(IndexWriter.java)
>>>>     at org.apache.lucene.index.IndexWriter.flush(IndexWriter.java)
>>>>     at org.apache.lucene.index.IndexWriter.flush(IndexWriter.java)
>>>>     at
>>>>
>>>> org.apache.lucene.indexer.LuceneDomainIndex.sync(LuceneDomainIndex.java:1308)
>>>>
>>>> I'll reinstall with a full debug info to see all line numbers in
>>>> Lucene java code.
>>>> Is there a list of semantic changes at BufferedIndeInput code?
>>>> I mean it do sequential or random writes for example.
>>>> But anyway, I just compiled with latest code and ran my test suites,
>>>> I'll investigate the problem a bit more.
>>>> Best regards, Marcelo.
>>>>
>>>> On Fri, Sep 26, 2008 at 7:32 AM, Michael McCandless
>>>> <lucene@mikemccandless.com> wrote:
>>>>>
>>>>> Can you describe the sequence of steps that your replication process
>>>>> goes
>>>>> through?
>>>>>
>>>>> Also, which filesystem is the index being accessed through?
>>>>>
>>>>> Mike
>>>>>
>>>>> rahul_k123 wrote:
>>>>>
>>>>>>
>>>>>> First of all, thanks to all the people who helped me in getting the
>>>>>> lucene
>>>>>> replication setup working and right now its live in our production :-)
>>>>>>
>>>>>> Everything working fine, except that i am seeing some exceptions on
>>>>>> slaves.
>>>>>>
>>>>>> The following is the one which is occuring more often on slaves
>>>>>>
>>>>>> at
>>>>>>
>>>>>> java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
>>>>>>   at
>>>>>> java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
>>>>>>   at java.util.concurrent.FutureTask.run(FutureTask.java:138)
>>>>>>   at
>>>>>>
>>>>>>
>>>>>>
>>>>>> java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:885)
>>>>>>   at
>>>>>>
>>>>>>
>>>>>>
>>>>>> java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
>>>>>>   at java.lang.Thread.run(Thread.java:619)
>>>>>> Caused by: com.IndexingException: [SYSTEM_ERROR] Cannot access index
>>>>>> [data_dir/index]: [read past EOF]
>>>>>>   at
>>>>>>
>>>>>>
>>>>>>
>>>>>> com.lucene.LuceneSearchService.getSearchResults(LuceneSearchService.java:964)
>>>>>>   ... 12 more
>>>>>> Caused by: java.io.IOException: read past EOF
>>>>>>   at
>>>>>>
>>>>>>
>>>>>>
>>>>>> org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java:146)
>>>>>>   at
>>>>>>
>>>>>>
>>>>>>
>>>>>> org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.java:38)
>>>>>>   at org.apache.lucene.store.IndexInput.readInt(IndexInput.java:66)
>>>>>>   at org.apache.lucene.store.IndexInput.readLong(IndexInput.java:89)
>>>>>>   at org.apache.lucene.index.FieldsReader.doc(FieldsReader.java:147)
>>>>>>   at
>>>>>> org.apache.lucene.index.SegmentReader.document(SegmentReader.java:659)
>>>>>>   at
>>>>>>
>>>>>>
>>>>>>
>>>>>> org.apache.lucene.index.MultiSegmentReader.document(MultiSegmentReader.java:257)
>>>>>>   at
>>>>>> org.apache.lucene.index.IndexReader.document(IndexReader.java:525)
>>>>>>
>>>>>> and the second one is
>>>>>>
>>>>>> at
>>>>>>
>>>>>> java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
>>>>>>   at
>>>>>> java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
>>>>>>   at java.util.concurrent.FutureTask.run(FutureTask.java:138)
>>>>>>   at
>>>>>>
>>>>>>
>>>>>>
>>>>>> java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:885)
>>>>>>   at
>>>>>>
>>>>>>
>>>>>>
>>>>>> java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
>>>>>>   at java.lang.Thread.run(Thread.java:619)
>>>>>> Caused by: java.lang.IllegalArgumentException: attempt to access a
>>>>>> deleted
>>>>>> document
>>>>>>   at
>>>>>> org.apache.lucene.index.SegmentReader.document(SegmentReader.java:657)
>>>>>>   at
>>>>>>
>>>>>>
>>>>>>
>>>>>> org.apache.lucene.index.MultiSegmentReader.document(MultiSegmentReader.java:257)
>>>>>>   at
>>>>>> org.apache.lucene.index.IndexReader.document(IndexReader.java:525)
>>>>>> This is on master index .
>>>>>>
>>>>>>
>>>>>>
>>>>>> Any help is appreciated
>>>>>>
>>>>>> Thanks.
>>>>>>
>>>>>> --
>>>>>> View this message in context:
>>>>>>
>>>>>>
>>>>>> http://www.nabble.com/Caused-by%3A-java.io.IOException%3A-read-past-EOF-on-Slave-tp19682684p19682684.html
>>>>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>>>>
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>
>>>>
>>>>
>>>> --
>>>> Marcelo F. Ochoa
>>>> http://marceloochoa.blogspot.com/
>>>> http://marcelo.ochoa.googlepages.com/home
>>>> ______________
>>>> Do you Know DBPrism? Look @ DB Prism's Web Site
>>>> http://www.dbprism.com.ar/index.html
>>>> More info?
>>>> Chapter 17 of the book "Programming the Oracle Database using Java &
>>>> Web Services"
>>>> http://www.amazon.com/gp/product/1555583296/
>>>> Chapter 21 of the book "Professional XML Databases" - Wrox Press
>>>> http://www.amazon.com/gp/product/1861003587/
>>>> Chapter 8 of the book "Oracle & Open Source" - O'Reilly
>>>> http://www.oreilly.com/catalog/oracleopen/
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>>
>> --
>> Marcelo F. Ochoa
>> http://marceloochoa.blogspot.com/
>> http://marcelo.ochoa.googlepages.com/home
>> ______________
>> Want to integrate Lucene and Oracle?
>>
>> http://marceloochoa.blogspot.com/2007/09/running-lucene-inside-your-oracle-jvm.html
>> Is Oracle 11g REST ready?
>> http://marceloochoa.blogspot.com/2008/02/is-oracle-11g-rest-ready.html
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
Marcelo F. Ochoa
http://marceloochoa.blogspot.com/
http://marcelo.ochoa.googlepages.com/home
______________
Want to integrate Lucene and Oracle?
http://marceloochoa.blogspot.com/2007/09/running-lucene-inside-your-oracle-jvm.html
Is Oracle 11g REST ready?
http://marceloochoa.blogspot.com/2008/02/is-oracle-11g-rest-ready.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 30 12:32:58 2008
Return-Path: <java-user-return-36424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42501 invoked from network); 30 Sep 2008 12:32:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Sep 2008 12:32:57 -0000
Received: (qmail 48319 invoked by uid 500); 30 Sep 2008 12:32:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48269 invoked by uid 500); 30 Sep 2008 12:32:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48246 invoked by uid 99); 30 Sep 2008 12:32:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Sep 2008 05:32:48 -0700
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=SPF_NEUTRAL,URIBL_GREY,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.246.249] (HELO ag-out-0708.google.com) (72.14.246.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Sep 2008 12:31:42 +0000
Received: by ag-out-0708.google.com with SMTP id 23so2002206agd.11
        for <java-user@lucene.apache.org>; Tue, 30 Sep 2008 05:32:05 -0700 (PDT)
Received: by 10.90.99.6 with SMTP id w6mr7289399agb.0.1222777925636;
        Tue, 30 Sep 2008 05:32:05 -0700 (PDT)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 18sm1538837agb.12.2008.09.30.05.32.03
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 30 Sep 2008 05:32:04 -0700 (PDT)
Message-Id: <AF192F92-31DB-4730-A818-343993042201@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <126142c0809300506l691fc40dg1bdbc4b0d8edc937@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Caused by: java.io.IOException: read past EOF on Slave
Date: Tue, 30 Sep 2008 08:32:02 -0400
References: <19682684.post@talk.nabble.com> <BF8A2B92-035C-483A-B955-447BDB0C1C89@mikemccandless.com> <126142c0809260844x3551cfaaj21863356c5a98ba3@mail.gmail.com> <46392609-A138-4546-8DBC-7839801E5280@mikemccandless.com> <126142c0809261153l15289c7fo919acf190ff6ab1e@mail.gmail.com> <8CB273B7-F6F2-4D06-982D-59798779102F@mikemccandless.com> <126142c0809300506l691fc40dg1bdbc4b0d8edc937@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


I'm glad to hear this!

But: what was the root cause of the problems?  Why didn't your  
previous Input/Output implementations, which worked with Lucene 2.3,  
work win 2.4?  It's kinda spooky.

Mike

Marcelo Ochoa wrote:

> Michael:
>  I have OJVMDirectory working with 2.4rc2 code base.
>  I have refactored Output and Input streams classes according to
> latest implementation of Buffered base classes and works OK.
>  All of my tests suites runs OK also the bug in the 11g JITs compiler
> is not reproducible.
>  I'll test this new implementation of Input/Output stream classes if
> they are compatible with 2.3 code base to release a new binary version
> of Oracle Lucene integration with 2.3 distribution and once 2.4
> release is in production I'll release another binary version too.
>  Best regards, Marcelo.
>
> On Mon, Sep 29, 2008 at 6:58 AM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>>
>> Marcelo,
>>
>> Do you have any sense whether this is an issue with your  
>> integration (eg
>> your Directory implementation that stores data in BLOB columns) vs  
>> something
>> with Lucene 2.4?
>>
>> It seems odd to me that there would be a bug in your Directory
>> implementation that 2.3 didn't tickle but 2.4 did.
>>
>> Can you dump the index, as stored in BLOB columns, out into the  
>> filesystem,
>> and run CheckIndex on it?  (Or maybe run CheckIndex within Oracle).
>>
>> Mike
>>
>> Marcelo Ochoa wrote:
>>
>>> Mike:
>>> Actually there is more issues at first glance with OJVMDirectory
>>> integration.
>>> Note this, I am creating an index with two simple documents:
>>> INFO: Performing: SELECT /*+ DYNAMIC_SAMPLING(0) RULE NOCACHE(T1) */
>>> T1.rowid,F1,extractValue(F2,'/emp/name/text()')
>>> "name",extractValue(F2,'/emp/@id') "id" FROM LUCENE.T1 for update  
>>> nowait
>>> Sep 26, 2008 3:44:16 PM org.apache.lucene.indexer.TableIndexer index
>>> FINE: Document<stored/uncompressed,indexed<rowid:AAARLCAAEAAAm2QAAA>
>>> indexed,tokenized<F1:001> indexed,tokenized<name:ravi>
>>> indexed,tokenized<id:01>>
>>> Sep 26, 2008 3:44:16 PM org.apache.lucene.indexer.TableIndexer index
>>> FINE: Document<stored/uncompressed,indexed<rowid:AAARLCAAEAAAm2QAAB>
>>> indexed,tokenized<F1:003> indexed,tokenized<name:murthy>
>>> indexed,tokenized<id:03>>
>>> IW 10 [Root Thread]:   flush: segment=_0 docStoreSegment=_0
>>> docStoreOffset=0 flushDocs=true flushDeletes=true  
>>> flushDocStores=false
>>> numDocs=2
>>> numBufDelTerms=0
>>> IW 10 [Root Thread]:   index before flush
>>> IW 10 [Root Thread]: DW: flush postings as segment _0 numDocs=2
>>> IW 10 [Root Thread]: DW:   oldRAMSize=111616 newFlushedSize=166
>>> docs/MB=12,633.446 new/old=0.149%
>>> IFD [Root Thread]: now checkpoint "segments_1" [1 segments ;  
>>> isCommit =
>>> false]
>>> IW 10 [Root Thread]: LMP: findMerges: 1 segments
>>> IW 10 [Root Thread]: LMP:   level -1.0 to 2.2741578: 1 segments
>>> IW 10 [Root Thread]: CMS: now merge
>>> IW 10 [Root Thread]: CMS:   index: _0:C2->_0
>>> IW 10 [Root Thread]: CMS:   no more merges pending; now return
>>> IW 10 [Root Thread]: now flush at close
>>> IW 10 [Root Thread]:   flush: segment=null docStoreSegment=_0
>>> docStoreOffset=2 flushDocs=false flushDeletes=true  
>>> flushDocStores=true
>>> numDocs=0 numBufDelTerms=0
>>> IW 10 [Root Thread]:   index before flush _0:C2->_0
>>> IW 10 [Root Thread]:   flush shared docStore segment _0
>>> IW 10 [Root Thread]: DW: closeDocStore: 2 files to flush to  
>>> segment _0
>>> numDocs=2
>>> IW 10 [Root Thread]: CMS: now merge
>>> IW 10 [Root Thread]: CMS:   index: _0:C2->_0
>>> IW 10 [Root Thread]: CMS:   no more merges pending; now return
>>> IW 10 [Root Thread]: now call final commit()
>>> IW 10 [Root Thread]: startCommit(): start sizeInBytes=0
>>> IW 10 [Root Thread]: startCommit index=_0:C2->_0 changeCount=2
>>> IW 10 [Root Thread]: now sync _0.fnm
>>> IW 10 [Root Thread]: now sync _0.frq
>>> IW 10 [Root Thread]: now sync _0.prx
>>> IW 10 [Root Thread]: now sync _0.tis
>>> IW 10 [Root Thread]: now sync _0.tii
>>> IW 10 [Root Thread]: now sync _0.nrm
>>> IW 10 [Root Thread]: now sync _0.fdx
>>> IW 10 [Root Thread]: now sync _0.fdt
>>> IW 10 [Root Thread]: done all syncs
>>> IW 10 [Root Thread]: commit: pendingCommit != null
>>> IFD [Root Thread]: now checkpoint "segments_2" [1 segments ;  
>>> isCommit =
>>> true]
>>> IFD [Root Thread]: deleteCommits: now decRef commit "segments_1"
>>> IFD [Root Thread]: delete "segments_1"
>>> IW 10 [Root Thread]: commit: done
>>> IW 10 [Root Thread]: at close: _0:C2->_0
>>> Sep 26, 2008 3:44:16 PM org.apache.lucene.indexer.LuceneDomainIndex
>>> ODCIIndexCreate
>>> FINER: RETURN 0
>>>
>>> Index created.
>>>
>>> And when I am trying to read the index I got:
>>> INFO: Analyzer:  
>>> org.apache.lucene.analysis.WhitespaceAnalyzer@f2164127
>>> Sep 26, 2008 3:44:48 PM org.apache.lucene.indexer.LuceneDomainIndex
>>> ODCIStart
>>> INFO: qryStr: DESC(name:ravi)
>>> Sep 26, 2008 3:44:48 PM org.apache.lucene.indexer.LuceneDomainIndex
>>> ODCIStart
>>> INFO: storing cachingFilter: -1378376940 and searcher: 781713581
>>> qryStr: DESC(name:ravi)
>>> Sep 26, 2008 3:44:48 PM org.apache.lucene.indexer.LuceneDomainIndex
>>> getSort
>>> INFO: using sort: <score>,<doc>
>>> Exception in thread "Root Thread"  
>>> java.lang.IndexOutOfBoundsException:
>>> Index: 6, Size: 4
>>>      at java.util.ArrayList.RangeCheck(ArrayList.java)
>>>      at java.util.ArrayList.get(ArrayList.java)
>>>      at  
>>> org.apache.lucene.index.FieldInfos.fieldInfo(FieldInfos.java)
>>>      at  
>>> org.apache.lucene.index.FieldInfos.fieldName(FieldInfos.java)
>>>      at org.apache.lucene.index.TermBuffer.read(TermBuffer.java)
>>>      at
>>> org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java)
>>>      at
>>> org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java)
>>>      at  
>>> org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java)
>>>      at  
>>> org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java)
>>>      at  
>>> org.apache.lucene.index.SegmentReader.docFreq(SegmentReader.java)
>>>      at
>>> org.apache.lucene.search.IndexSearcher.docFreq(IndexSearcher.java)
>>>      at org.apache.lucene.search.Similarity.idf(Similarity.java)
>>>      at
>>> org.apache.lucene.search.TermQuery$TermWeight.<init>(TermQuery.java)
>>>      at  
>>> org.apache.lucene.search.TermQuery.createWeight(TermQuery.java)
>>>      at org.apache.lucene.search.Query.weight(Query.java)
>>>      at org.apache.lucene.search.Hits.<init>(Hits.java:85)
>>>      at org.apache.lucene.search.Searcher.search(Searcher.java)
>>>      at
>>> org 
>>> .apache 
>>> .lucene.indexer.LuceneDomainIndex.ODCIStart(LuceneDomainIndex.java)
>>>
>>> Which definetly means that something is not well saved at OJVM
>>> directory BLOB storage :(
>>> This are my files:
>>> SQL> select file_size,name from it1$t;
>>>
>>> FILE_SIZE NAME
>>> ---------- ------------------------------
>>>      10 parameters
>>>       1 updateCount
>>>      28 segments_1
>>>      20 segments.gen
>>>       8 _0.frq
>>>       8 _0.prx
>>>     103 _0.tis
>>>      35 _0.tii
>>>      12 _0.nrm
>>>      22 _0.fnm
>>>      48 _0.fdt
>>>      20 _0.fdx
>>>      62 segments_2
>>> I'll add some debugging information at my classes which save/load
>>> buffers to see how many calls and which arguments are used.
>>> Marcelo.
>>>
>>> On Fri, Sep 26, 2008 at 1:41 PM, Michael McCandless
>>> <lucene@mikemccandless.com> wrote:
>>>>
>>>> This one looks spooky!
>>>>
>>>> Is it easily repeated?  If you could print out which 2 terms you  
>>>> had
>>>> tried
>>>> to delete, and then zip up the index just before deleting those  
>>>> docs
>>>> (after
>>>> closing the writer) and send to me, I can try to understand  
>>>> what's wrong
>>>> with the index.  It looks as if the *.tis file for one of the  
>>>> segments is
>>>> truncated.
>>>>
>>>> If you capture the series of add/update/delete documents, can you  
>>>> get a
>>>> standalone Java test to show this?
>>>>
>>>> Does this test create an entirely new index?
>>>>
>>>> We did change the index format in 2.4 to use "true" UTF8 encoding  
>>>> for all
>>>> text content; not sure that this applies here (to  
>>>> BufferedIndexReader
>>>> it's
>>>> all bytes) but it may.
>>>>
>>>> BufferedIndexReader in general can do random IO, especially when  
>>>> reading
>>>> the
>>>> term dict file (*.tis), when you
>>>>
>>>> Mike
>>>>
>>>> Marcelo Ochoa wrote:
>>>>
>>>>> Michael:
>>>>> I just start testing 2.4rc2 running inside OJVM.
>>>>> I found a similar stack trace during indexing:
>>>>> IW 3 [Root Thread]:   flush: segment=_3 docStoreSegment=_3
>>>>> docStoreOffset=0 flushDocs=true flushDeletes=true  
>>>>> flushDocStores=false
>>>>> numDocs=2 numBufDelTerms=2
>>>>> IW 3 [Root Thread]:   index before flush _1:C2->_1 _2:C2->_2
>>>>> IW 3 [Root Thread]: DW: flush postings as segment _3 numDocs=2
>>>>> IW 3 [Root Thread]: DW:   oldRAMSize=111616 newFlushedSize=264
>>>>> docs/MB=7,943.758 new/old=0.237%
>>>>> IW 3 [Root Thread]: DW: apply 2 buffered deleted terms and 0  
>>>>> deleted
>>>>> docIDs and 0 deleted queries on 3 segments.
>>>>> IW 3 [Root Thread]: hit exception flushing deletes
>>>>> Exception in thread "Root Thread" java.io.IOException: read past  
>>>>> EOF
>>>>>    at
>>>>>
>>>>> org 
>>>>> .apache 
>>>>> .lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java)
>>>>>    at
>>>>>
>>>>> org 
>>>>> .apache 
>>>>> .lucene 
>>>>> .store.BufferedIndexInput.readBytes(BufferedIndexInput.java)
>>>>>    at
>>>>>
>>>>> org 
>>>>> .apache 
>>>>> .lucene 
>>>>> .store.BufferedIndexInput.readBytes(BufferedIndexInput.java)
>>>>>    at org.apache.lucene.index.TermBuffer.read(TermBuffer.java)
>>>>>    at
>>>>> org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java)
>>>>>    at
>>>>> org 
>>>>> .apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java)
>>>>>    at  
>>>>> org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java)
>>>>>    at  
>>>>> org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java)
>>>>>    at
>>>>> org.apache.lucene.index.SegmentTermDocs.seek(SegmentTermDocs.java)
>>>>>    at  
>>>>> org.apache.lucene.index.IndexReader.termDocs(IndexReader.java)
>>>>>    at
>>>>>
>>>>> org 
>>>>> .apache 
>>>>> .lucene.index.DocumentsWriter.applyDeletes(DocumentsWriter.java)
>>>>>    at
>>>>>
>>>>> org 
>>>>> .apache 
>>>>> .lucene.index.DocumentsWriter.applyDeletes(DocumentsWriter.java: 
>>>>> 918)
>>>>>    at
>>>>> org.apache.lucene.index.IndexWriter.applyDeletes(IndexWriter.java)
>>>>>    at  
>>>>> org.apache.lucene.index.IndexWriter.doFlush(IndexWriter.java)
>>>>>    at org.apache.lucene.index.IndexWriter.flush(IndexWriter.java)
>>>>>    at org.apache.lucene.index.IndexWriter.flush(IndexWriter.java)
>>>>>    at
>>>>>
>>>>> org 
>>>>> .apache 
>>>>> .lucene.indexer.LuceneDomainIndex.sync(LuceneDomainIndex.java: 
>>>>> 1308)
>>>>>
>>>>> I'll reinstall with a full debug info to see all line numbers in
>>>>> Lucene java code.
>>>>> Is there a list of semantic changes at BufferedIndeInput code?
>>>>> I mean it do sequential or random writes for example.
>>>>> But anyway, I just compiled with latest code and ran my test  
>>>>> suites,
>>>>> I'll investigate the problem a bit more.
>>>>> Best regards, Marcelo.
>>>>>
>>>>> On Fri, Sep 26, 2008 at 7:32 AM, Michael McCandless
>>>>> <lucene@mikemccandless.com> wrote:
>>>>>>
>>>>>> Can you describe the sequence of steps that your replication  
>>>>>> process
>>>>>> goes
>>>>>> through?
>>>>>>
>>>>>> Also, which filesystem is the index being accessed through?
>>>>>>
>>>>>> Mike
>>>>>>
>>>>>> rahul_k123 wrote:
>>>>>>
>>>>>>>
>>>>>>> First of all, thanks to all the people who helped me in  
>>>>>>> getting the
>>>>>>> lucene
>>>>>>> replication setup working and right now its live in our  
>>>>>>> production :-)
>>>>>>>
>>>>>>> Everything working fine, except that i am seeing some  
>>>>>>> exceptions on
>>>>>>> slaves.
>>>>>>>
>>>>>>> The following is the one which is occuring more often on slaves
>>>>>>>
>>>>>>> at
>>>>>>>
>>>>>>> java.util.concurrent.Executors 
>>>>>>> $RunnableAdapter.call(Executors.java:441)
>>>>>>>  at
>>>>>>> java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java: 
>>>>>>> 303)
>>>>>>>  at java.util.concurrent.FutureTask.run(FutureTask.java:138)
>>>>>>>  at
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> java.util.concurrent.ThreadPoolExecutor 
>>>>>>> $Worker.runTask(ThreadPoolExecutor.java:885)
>>>>>>>  at
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> java.util.concurrent.ThreadPoolExecutor 
>>>>>>> $Worker.run(ThreadPoolExecutor.java:907)
>>>>>>>  at java.lang.Thread.run(Thread.java:619)
>>>>>>> Caused by: com.IndexingException: [SYSTEM_ERROR] Cannot access  
>>>>>>> index
>>>>>>> [data_dir/index]: [read past EOF]
>>>>>>>  at
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> com 
>>>>>>> .lucene 
>>>>>>> .LuceneSearchService.getSearchResults(LuceneSearchService.java: 
>>>>>>> 964)
>>>>>>>  ... 12 more
>>>>>>> Caused by: java.io.IOException: read past EOF
>>>>>>>  at
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> org 
>>>>>>> .apache 
>>>>>>> .lucene 
>>>>>>> .store.BufferedIndexInput.refill(BufferedIndexInput.java:146)
>>>>>>>  at
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> org 
>>>>>>> .apache 
>>>>>>> .lucene 
>>>>>>> .store.BufferedIndexInput.readByte(BufferedIndexInput.java:38)
>>>>>>>  at org.apache.lucene.store.IndexInput.readInt(IndexInput.java: 
>>>>>>> 66)
>>>>>>>  at  
>>>>>>> org.apache.lucene.store.IndexInput.readLong(IndexInput.java:89)
>>>>>>>  at org.apache.lucene.index.FieldsReader.doc(FieldsReader.java: 
>>>>>>> 147)
>>>>>>>  at
>>>>>>> org 
>>>>>>> .apache.lucene.index.SegmentReader.document(SegmentReader.java: 
>>>>>>> 659)
>>>>>>>  at
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> org 
>>>>>>> .apache 
>>>>>>> .lucene 
>>>>>>> .index.MultiSegmentReader.document(MultiSegmentReader.java:257)
>>>>>>>  at
>>>>>>> org.apache.lucene.index.IndexReader.document(IndexReader.java: 
>>>>>>> 525)
>>>>>>>
>>>>>>> and the second one is
>>>>>>>
>>>>>>> at
>>>>>>>
>>>>>>> java.util.concurrent.Executors 
>>>>>>> $RunnableAdapter.call(Executors.java:441)
>>>>>>>  at
>>>>>>> java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java: 
>>>>>>> 303)
>>>>>>>  at java.util.concurrent.FutureTask.run(FutureTask.java:138)
>>>>>>>  at
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> java.util.concurrent.ThreadPoolExecutor 
>>>>>>> $Worker.runTask(ThreadPoolExecutor.java:885)
>>>>>>>  at
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> java.util.concurrent.ThreadPoolExecutor 
>>>>>>> $Worker.run(ThreadPoolExecutor.java:907)
>>>>>>>  at java.lang.Thread.run(Thread.java:619)
>>>>>>> Caused by: java.lang.IllegalArgumentException: attempt to  
>>>>>>> access a
>>>>>>> deleted
>>>>>>> document
>>>>>>>  at
>>>>>>> org 
>>>>>>> .apache.lucene.index.SegmentReader.document(SegmentReader.java: 
>>>>>>> 657)
>>>>>>>  at
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> org 
>>>>>>> .apache 
>>>>>>> .lucene 
>>>>>>> .index.MultiSegmentReader.document(MultiSegmentReader.java:257)
>>>>>>>  at
>>>>>>> org.apache.lucene.index.IndexReader.document(IndexReader.java: 
>>>>>>> 525)
>>>>>>> This is on master index .
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> Any help is appreciated
>>>>>>>
>>>>>>> Thanks.
>>>>>>>
>>>>>>> --
>>>>>>> View this message in context:
>>>>>>>
>>>>>>>
>>>>>>> http://www.nabble.com/Caused-by%3A-java.io.IOException%3A-read-past-EOF-on-Slave-tp19682684p19682684.html
>>>>>>> Sent from the Lucene - Java Users mailing list archive at  
>>>>>>> Nabble.com.
>>>>>>>
>>>>>>>
>>>>>>> ---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user- 
>>>>>>> help@lucene.apache.org
>>>>>>>
>>>>>>
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>
>>>>>
>>>>>
>>>>> --
>>>>> Marcelo F. Ochoa
>>>>> http://marceloochoa.blogspot.com/
>>>>> http://marcelo.ochoa.googlepages.com/home
>>>>> ______________
>>>>> Do you Know DBPrism? Look @ DB Prism's Web Site
>>>>> http://www.dbprism.com.ar/index.html
>>>>> More info?
>>>>> Chapter 17 of the book "Programming the Oracle Database using  
>>>>> Java &
>>>>> Web Services"
>>>>> http://www.amazon.com/gp/product/1555583296/
>>>>> Chapter 21 of the book "Professional XML Databases" - Wrox Press
>>>>> http://www.amazon.com/gp/product/1861003587/
>>>>> Chapter 8 of the book "Oracle & Open Source" - O'Reilly
>>>>> http://www.oreilly.com/catalog/oracleopen/
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>>
>>>
>>> --
>>> Marcelo F. Ochoa
>>> http://marceloochoa.blogspot.com/
>>> http://marcelo.ochoa.googlepages.com/home
>>> ______________
>>> Want to integrate Lucene and Oracle?
>>>
>>> http://marceloochoa.blogspot.com/2007/09/running-lucene-inside-your-oracle-jvm.html
>>> Is Oracle 11g REST ready?
>>> http://marceloochoa.blogspot.com/2008/02/is-oracle-11g-rest-ready.html
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> -- 
> Marcelo F. Ochoa
> http://marceloochoa.blogspot.com/
> http://marcelo.ochoa.googlepages.com/home
> ______________
> Want to integrate Lucene and Oracle?
> http://marceloochoa.blogspot.com/2007/09/running-lucene-inside-your-oracle-jvm.html
> Is Oracle 11g REST ready?
> http://marceloochoa.blogspot.com/2008/02/is-oracle-11g-rest-ready.html
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 30 13:14:00 2008
Return-Path: <java-user-return-36425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66245 invoked from network); 30 Sep 2008 13:14:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Sep 2008 13:14:00 -0000
Received: (qmail 13401 invoked by uid 500); 30 Sep 2008 13:13:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13373 invoked by uid 500); 30 Sep 2008 13:13:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13362 invoked by uid 99); 30 Sep 2008 13:13:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Sep 2008 06:13:50 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=SPF_PASS,URIBL_GREY,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of marcelo.ochoa@gmail.com designates 209.85.132.245 as permitted sender)
Received: from [209.85.132.245] (HELO an-out-0708.google.com) (209.85.132.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Sep 2008 13:12:44 +0000
Received: by an-out-0708.google.com with SMTP id c37so322anc.49
        for <java-user@lucene.apache.org>; Tue, 30 Sep 2008 06:13:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=W871Um6Fq9wlCAOxh5YOOhG2P1BzUyNPBAoT4M09oao=;
        b=DMV9tXJQv3YpLG9mKbws6KlrYN7xAU/WQ1SZg0ybnHYwsQgoUuwaOmXHOECWE58cMB
         AMKNm3tTNxSv76pfosPht2bYx7UQbQU+KEDstxsqZtfy0HXgE2f/aUJHZC/eeFVojLxp
         +uYvXVEFBBUUto9gl6xfxFYCwRwoC0FQtSIU0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=VjiC4E/9Bk97pmVMulDFKK2k4n1hzIWudhvHMyK6t5AbIgccZ0rtGEvwNgIA6+0O0B
         TZNJp/w4CpguvJAyWk6A8qlcB+OR2uy3VMPzeFKdZU/jhavzICSpikb6x2qEXyo/0Pl1
         He9z4o9HQTa5az0Q3FOVUH/KK4C8B6AdtFILY=
Received: by 10.100.152.5 with SMTP id z5mr5853379and.86.1222780380994;
        Tue, 30 Sep 2008 06:13:00 -0700 (PDT)
Received: by 10.100.8.18 with HTTP; Tue, 30 Sep 2008 06:13:00 -0700 (PDT)
Message-ID: <126142c0809300613p2b48d5e5g73024c0b617bdedd@mail.gmail.com>
Date: Tue, 30 Sep 2008 10:13:00 -0300
From: "Marcelo Ochoa" <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Caused by: java.io.IOException: read past EOF on Slave
In-Reply-To: <AF192F92-31DB-4730-A818-343993042201@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <19682684.post@talk.nabble.com>
	 <BF8A2B92-035C-483A-B955-447BDB0C1C89@mikemccandless.com>
	 <126142c0809260844x3551cfaaj21863356c5a98ba3@mail.gmail.com>
	 <46392609-A138-4546-8DBC-7839801E5280@mikemccandless.com>
	 <126142c0809261153l15289c7fo919acf190ff6ab1e@mail.gmail.com>
	 <8CB273B7-F6F2-4D06-982D-59798779102F@mikemccandless.com>
	 <126142c0809300506l691fc40dg1bdbc4b0d8edc937@mail.gmail.com>
	 <AF192F92-31DB-4730-A818-343993042201@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Michael:
  Yep, previous implementation have his own buffer to reduce BLOB IO
overriding Input/OutputBufferStream base classes.
  Now Input/Output stream classes use BufferStream implementation and
only implement flushInternal and setSize methods among others minimun
changes :)
  Best regards, Marcelo.

PD: I am not in my notebook now, so I can not put the diff to see the
differences :(
On Tue, Sep 30, 2008 at 9:32 AM, Michael McCandless
<lucene@mikemccandless.com> wrote:
>
> I'm glad to hear this!
>
> But: what was the root cause of the problems?  Why didn't your previous
> Input/Output implementations, which worked with Lucene 2.3, work win 2.4?
>  It's kinda spooky.
>
> Mike
>
> Marcelo Ochoa wrote:
>
>> Michael:
>>  I have OJVMDirectory working with 2.4rc2 code base.
>>  I have refactored Output and Input streams classes according to
>> latest implementation of Buffered base classes and works OK.
>>  All of my tests suites runs OK also the bug in the 11g JITs compiler
>> is not reproducible.
>>  I'll test this new implementation of Input/Output stream classes if
>> they are compatible with 2.3 code base to release a new binary version
>> of Oracle Lucene integration with 2.3 distribution and once 2.4
>> release is in production I'll release another binary version too.
>>  Best regards, Marcelo.
>>
>> On Mon, Sep 29, 2008 at 6:58 AM, Michael McCandless
>> <lucene@mikemccandless.com> wrote:
>>>
>>> Marcelo,
>>>
>>> Do you have any sense whether this is an issue with your integration (eg
>>> your Directory implementation that stores data in BLOB columns) vs
>>> something
>>> with Lucene 2.4?
>>>
>>> It seems odd to me that there would be a bug in your Directory
>>> implementation that 2.3 didn't tickle but 2.4 did.
>>>
>>> Can you dump the index, as stored in BLOB columns, out into the
>>> filesystem,
>>> and run CheckIndex on it?  (Or maybe run CheckIndex within Oracle).
>>>
>>> Mike
>>>
>>> Marcelo Ochoa wrote:
>>>
>>>> Mike:
>>>> Actually there is more issues at first glance with OJVMDirectory
>>>> integration.
>>>> Note this, I am creating an index with two simple documents:
>>>> INFO: Performing: SELECT /*+ DYNAMIC_SAMPLING(0) RULE NOCACHE(T1) */
>>>> T1.rowid,F1,extractValue(F2,'/emp/name/text()')
>>>> "name",extractValue(F2,'/emp/@id') "id" FROM LUCENE.T1 for update nowait
>>>> Sep 26, 2008 3:44:16 PM org.apache.lucene.indexer.TableIndexer index
>>>> FINE: Document<stored/uncompressed,indexed<rowid:AAARLCAAEAAAm2QAAA>
>>>> indexed,tokenized<F1:001> indexed,tokenized<name:ravi>
>>>> indexed,tokenized<id:01>>
>>>> Sep 26, 2008 3:44:16 PM org.apache.lucene.indexer.TableIndexer index
>>>> FINE: Document<stored/uncompressed,indexed<rowid:AAARLCAAEAAAm2QAAB>
>>>> indexed,tokenized<F1:003> indexed,tokenized<name:murthy>
>>>> indexed,tokenized<id:03>>
>>>> IW 10 [Root Thread]:   flush: segment=_0 docStoreSegment=_0
>>>> docStoreOffset=0 flushDocs=true flushDeletes=true flushDocStores=false
>>>> numDocs=2
>>>> numBufDelTerms=0
>>>> IW 10 [Root Thread]:   index before flush
>>>> IW 10 [Root Thread]: DW: flush postings as segment _0 numDocs=2
>>>> IW 10 [Root Thread]: DW:   oldRAMSize=111616 newFlushedSize=166
>>>> docs/MB=12,633.446 new/old=0.149%
>>>> IFD [Root Thread]: now checkpoint "segments_1" [1 segments ; isCommit =
>>>> false]
>>>> IW 10 [Root Thread]: LMP: findMerges: 1 segments
>>>> IW 10 [Root Thread]: LMP:   level -1.0 to 2.2741578: 1 segments
>>>> IW 10 [Root Thread]: CMS: now merge
>>>> IW 10 [Root Thread]: CMS:   index: _0:C2->_0
>>>> IW 10 [Root Thread]: CMS:   no more merges pending; now return
>>>> IW 10 [Root Thread]: now flush at close
>>>> IW 10 [Root Thread]:   flush: segment=null docStoreSegment=_0
>>>> docStoreOffset=2 flushDocs=false flushDeletes=true flushDocStores=true
>>>> numDocs=0 numBufDelTerms=0
>>>> IW 10 [Root Thread]:   index before flush _0:C2->_0
>>>> IW 10 [Root Thread]:   flush shared docStore segment _0
>>>> IW 10 [Root Thread]: DW: closeDocStore: 2 files to flush to segment _0
>>>> numDocs=2
>>>> IW 10 [Root Thread]: CMS: now merge
>>>> IW 10 [Root Thread]: CMS:   index: _0:C2->_0
>>>> IW 10 [Root Thread]: CMS:   no more merges pending; now return
>>>> IW 10 [Root Thread]: now call final commit()
>>>> IW 10 [Root Thread]: startCommit(): start sizeInBytes=0
>>>> IW 10 [Root Thread]: startCommit index=_0:C2->_0 changeCount=2
>>>> IW 10 [Root Thread]: now sync _0.fnm
>>>> IW 10 [Root Thread]: now sync _0.frq
>>>> IW 10 [Root Thread]: now sync _0.prx
>>>> IW 10 [Root Thread]: now sync _0.tis
>>>> IW 10 [Root Thread]: now sync _0.tii
>>>> IW 10 [Root Thread]: now sync _0.nrm
>>>> IW 10 [Root Thread]: now sync _0.fdx
>>>> IW 10 [Root Thread]: now sync _0.fdt
>>>> IW 10 [Root Thread]: done all syncs
>>>> IW 10 [Root Thread]: commit: pendingCommit != null
>>>> IFD [Root Thread]: now checkpoint "segments_2" [1 segments ; isCommit =
>>>> true]
>>>> IFD [Root Thread]: deleteCommits: now decRef commit "segments_1"
>>>> IFD [Root Thread]: delete "segments_1"
>>>> IW 10 [Root Thread]: commit: done
>>>> IW 10 [Root Thread]: at close: _0:C2->_0
>>>> Sep 26, 2008 3:44:16 PM org.apache.lucene.indexer.LuceneDomainIndex
>>>> ODCIIndexCreate
>>>> FINER: RETURN 0
>>>>
>>>> Index created.
>>>>
>>>> And when I am trying to read the index I got:
>>>> INFO: Analyzer: org.apache.lucene.analysis.WhitespaceAnalyzer@f2164127
>>>> Sep 26, 2008 3:44:48 PM org.apache.lucene.indexer.LuceneDomainIndex
>>>> ODCIStart
>>>> INFO: qryStr: DESC(name:ravi)
>>>> Sep 26, 2008 3:44:48 PM org.apache.lucene.indexer.LuceneDomainIndex
>>>> ODCIStart
>>>> INFO: storing cachingFilter: -1378376940 and searcher: 781713581
>>>> qryStr: DESC(name:ravi)
>>>> Sep 26, 2008 3:44:48 PM org.apache.lucene.indexer.LuceneDomainIndex
>>>> getSort
>>>> INFO: using sort: <score>,<doc>
>>>> Exception in thread "Root Thread" java.lang.IndexOutOfBoundsException:
>>>> Index: 6, Size: 4
>>>>     at java.util.ArrayList.RangeCheck(ArrayList.java)
>>>>     at java.util.ArrayList.get(ArrayList.java)
>>>>     at org.apache.lucene.index.FieldInfos.fieldInfo(FieldInfos.java)
>>>>     at org.apache.lucene.index.FieldInfos.fieldName(FieldInfos.java)
>>>>     at org.apache.lucene.index.TermBuffer.read(TermBuffer.java)
>>>>     at
>>>> org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java)
>>>>     at
>>>> org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java)
>>>>     at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java)
>>>>     at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java)
>>>>     at org.apache.lucene.index.SegmentReader.docFreq(SegmentReader.java)
>>>>     at
>>>> org.apache.lucene.search.IndexSearcher.docFreq(IndexSearcher.java)
>>>>     at org.apache.lucene.search.Similarity.idf(Similarity.java)
>>>>     at
>>>> org.apache.lucene.search.TermQuery$TermWeight.<init>(TermQuery.java)
>>>>     at org.apache.lucene.search.TermQuery.createWeight(TermQuery.java)
>>>>     at org.apache.lucene.search.Query.weight(Query.java)
>>>>     at org.apache.lucene.search.Hits.<init>(Hits.java:85)
>>>>     at org.apache.lucene.search.Searcher.search(Searcher.java)
>>>>     at
>>>>
>>>> org.apache.lucene.indexer.LuceneDomainIndex.ODCIStart(LuceneDomainIndex.java)
>>>>
>>>> Which definetly means that something is not well saved at OJVM
>>>> directory BLOB storage :(
>>>> This are my files:
>>>> SQL> select file_size,name from it1$t;
>>>>
>>>> FILE_SIZE NAME
>>>> ---------- ------------------------------
>>>>     10 parameters
>>>>      1 updateCount
>>>>     28 segments_1
>>>>     20 segments.gen
>>>>      8 _0.frq
>>>>      8 _0.prx
>>>>    103 _0.tis
>>>>     35 _0.tii
>>>>     12 _0.nrm
>>>>     22 _0.fnm
>>>>     48 _0.fdt
>>>>     20 _0.fdx
>>>>     62 segments_2
>>>> I'll add some debugging information at my classes which save/load
>>>> buffers to see how many calls and which arguments are used.
>>>> Marcelo.
>>>>
>>>> On Fri, Sep 26, 2008 at 1:41 PM, Michael McCandless
>>>> <lucene@mikemccandless.com> wrote:
>>>>>
>>>>> This one looks spooky!
>>>>>
>>>>> Is it easily repeated?  If you could print out which 2 terms you had
>>>>> tried
>>>>> to delete, and then zip up the index just before deleting those docs
>>>>> (after
>>>>> closing the writer) and send to me, I can try to understand what's
>>>>> wrong
>>>>> with the index.  It looks as if the *.tis file for one of the segments
>>>>> is
>>>>> truncated.
>>>>>
>>>>> If you capture the series of add/update/delete documents, can you get a
>>>>> standalone Java test to show this?
>>>>>
>>>>> Does this test create an entirely new index?
>>>>>
>>>>> We did change the index format in 2.4 to use "true" UTF8 encoding for
>>>>> all
>>>>> text content; not sure that this applies here (to BufferedIndexReader
>>>>> it's
>>>>> all bytes) but it may.
>>>>>
>>>>> BufferedIndexReader in general can do random IO, especially when
>>>>> reading
>>>>> the
>>>>> term dict file (*.tis), when you
>>>>>
>>>>> Mike
>>>>>
>>>>> Marcelo Ochoa wrote:
>>>>>
>>>>>> Michael:
>>>>>> I just start testing 2.4rc2 running inside OJVM.
>>>>>> I found a similar stack trace during indexing:
>>>>>> IW 3 [Root Thread]:   flush: segment=_3 docStoreSegment=_3
>>>>>> docStoreOffset=0 flushDocs=true flushDeletes=true flushDocStores=false
>>>>>> numDocs=2 numBufDelTerms=2
>>>>>> IW 3 [Root Thread]:   index before flush _1:C2->_1 _2:C2->_2
>>>>>> IW 3 [Root Thread]: DW: flush postings as segment _3 numDocs=2
>>>>>> IW 3 [Root Thread]: DW:   oldRAMSize=111616 newFlushedSize=264
>>>>>> docs/MB=7,943.758 new/old=0.237%
>>>>>> IW 3 [Root Thread]: DW: apply 2 buffered deleted terms and 0 deleted
>>>>>> docIDs and 0 deleted queries on 3 segments.
>>>>>> IW 3 [Root Thread]: hit exception flushing deletes
>>>>>> Exception in thread "Root Thread" java.io.IOException: read past EOF
>>>>>>   at
>>>>>>
>>>>>>
>>>>>> org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java)
>>>>>>   at
>>>>>>
>>>>>>
>>>>>> org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.java)
>>>>>>   at
>>>>>>
>>>>>>
>>>>>> org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.java)
>>>>>>   at org.apache.lucene.index.TermBuffer.read(TermBuffer.java)
>>>>>>   at
>>>>>> org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java)
>>>>>>   at
>>>>>> org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java)
>>>>>>   at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java)
>>>>>>   at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java)
>>>>>>   at
>>>>>> org.apache.lucene.index.SegmentTermDocs.seek(SegmentTermDocs.java)
>>>>>>   at org.apache.lucene.index.IndexReader.termDocs(IndexReader.java)
>>>>>>   at
>>>>>>
>>>>>>
>>>>>> org.apache.lucene.index.DocumentsWriter.applyDeletes(DocumentsWriter.java)
>>>>>>   at
>>>>>>
>>>>>>
>>>>>> org.apache.lucene.index.DocumentsWriter.applyDeletes(DocumentsWriter.java:918)
>>>>>>   at
>>>>>> org.apache.lucene.index.IndexWriter.applyDeletes(IndexWriter.java)
>>>>>>   at org.apache.lucene.index.IndexWriter.doFlush(IndexWriter.java)
>>>>>>   at org.apache.lucene.index.IndexWriter.flush(IndexWriter.java)
>>>>>>   at org.apache.lucene.index.IndexWriter.flush(IndexWriter.java)
>>>>>>   at
>>>>>>
>>>>>>
>>>>>> org.apache.lucene.indexer.LuceneDomainIndex.sync(LuceneDomainIndex.java:1308)
>>>>>>
>>>>>> I'll reinstall with a full debug info to see all line numbers in
>>>>>> Lucene java code.
>>>>>> Is there a list of semantic changes at BufferedIndeInput code?
>>>>>> I mean it do sequential or random writes for example.
>>>>>> But anyway, I just compiled with latest code and ran my test suites,
>>>>>> I'll investigate the problem a bit more.
>>>>>> Best regards, Marcelo.
>>>>>>
>>>>>> On Fri, Sep 26, 2008 at 7:32 AM, Michael McCandless
>>>>>> <lucene@mikemccandless.com> wrote:
>>>>>>>
>>>>>>> Can you describe the sequence of steps that your replication process
>>>>>>> goes
>>>>>>> through?
>>>>>>>
>>>>>>> Also, which filesystem is the index being accessed through?
>>>>>>>
>>>>>>> Mike
>>>>>>>
>>>>>>> rahul_k123 wrote:
>>>>>>>
>>>>>>>>
>>>>>>>> First of all, thanks to all the people who helped me in getting the
>>>>>>>> lucene
>>>>>>>> replication setup working and right now its live in our production
>>>>>>>> :-)
>>>>>>>>
>>>>>>>> Everything working fine, except that i am seeing some exceptions on
>>>>>>>> slaves.
>>>>>>>>
>>>>>>>> The following is the one which is occuring more often on slaves
>>>>>>>>
>>>>>>>> at
>>>>>>>>
>>>>>>>>
>>>>>>>> java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
>>>>>>>>  at
>>>>>>>> java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
>>>>>>>>  at java.util.concurrent.FutureTask.run(FutureTask.java:138)
>>>>>>>>  at
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:885)
>>>>>>>>  at
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
>>>>>>>>  at java.lang.Thread.run(Thread.java:619)
>>>>>>>> Caused by: com.IndexingException: [SYSTEM_ERROR] Cannot access index
>>>>>>>> [data_dir/index]: [read past EOF]
>>>>>>>>  at
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> com.lucene.LuceneSearchService.getSearchResults(LuceneSearchService.java:964)
>>>>>>>>  ... 12 more
>>>>>>>> Caused by: java.io.IOException: read past EOF
>>>>>>>>  at
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java:146)
>>>>>>>>  at
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.java:38)
>>>>>>>>  at org.apache.lucene.store.IndexInput.readInt(IndexInput.java:66)
>>>>>>>>  at org.apache.lucene.store.IndexInput.readLong(IndexInput.java:89)
>>>>>>>>  at org.apache.lucene.index.FieldsReader.doc(FieldsReader.java:147)
>>>>>>>>  at
>>>>>>>>
>>>>>>>> org.apache.lucene.index.SegmentReader.document(SegmentReader.java:659)
>>>>>>>>  at
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> org.apache.lucene.index.MultiSegmentReader.document(MultiSegmentReader.java:257)
>>>>>>>>  at
>>>>>>>> org.apache.lucene.index.IndexReader.document(IndexReader.java:525)
>>>>>>>>
>>>>>>>> and the second one is
>>>>>>>>
>>>>>>>> at
>>>>>>>>
>>>>>>>>
>>>>>>>> java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
>>>>>>>>  at
>>>>>>>> java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
>>>>>>>>  at java.util.concurrent.FutureTask.run(FutureTask.java:138)
>>>>>>>>  at
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:885)
>>>>>>>>  at
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
>>>>>>>>  at java.lang.Thread.run(Thread.java:619)
>>>>>>>> Caused by: java.lang.IllegalArgumentException: attempt to access a
>>>>>>>> deleted
>>>>>>>> document
>>>>>>>>  at
>>>>>>>>
>>>>>>>> org.apache.lucene.index.SegmentReader.document(SegmentReader.java:657)
>>>>>>>>  at
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> org.apache.lucene.index.MultiSegmentReader.document(MultiSegmentReader.java:257)
>>>>>>>>  at
>>>>>>>> org.apache.lucene.index.IndexReader.document(IndexReader.java:525)
>>>>>>>> This is on master index .
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> Any help is appreciated
>>>>>>>>
>>>>>>>> Thanks.
>>>>>>>>
>>>>>>>> --
>>>>>>>> View this message in context:
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> http://www.nabble.com/Caused-by%3A-java.io.IOException%3A-read-past-EOF-on-Slave-tp19682684p19682684.html
>>>>>>>> Sent from the Lucene - Java Users mailing list archive at
>>>>>>>> Nabble.com.
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> ---------------------------------------------------------------------
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> ---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> --
>>>>>> Marcelo F. Ochoa
>>>>>> http://marceloochoa.blogspot.com/
>>>>>> http://marcelo.ochoa.googlepages.com/home
>>>>>> ______________
>>>>>> Do you Know DBPrism? Look @ DB Prism's Web Site
>>>>>> http://www.dbprism.com.ar/index.html
>>>>>> More info?
>>>>>> Chapter 17 of the book "Programming the Oracle Database using Java &
>>>>>> Web Services"
>>>>>> http://www.amazon.com/gp/product/1555583296/
>>>>>> Chapter 21 of the book "Professional XML Databases" - Wrox Press
>>>>>> http://www.amazon.com/gp/product/1861003587/
>>>>>> Chapter 8 of the book "Oracle & Open Source" - O'Reilly
>>>>>> http://www.oreilly.com/catalog/oracleopen/
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>
>>>>
>>>>
>>>> --
>>>> Marcelo F. Ochoa
>>>> http://marceloochoa.blogspot.com/
>>>> http://marcelo.ochoa.googlepages.com/home
>>>> ______________
>>>> Want to integrate Lucene and Oracle?
>>>>
>>>>
>>>> http://marceloochoa.blogspot.com/2007/09/running-lucene-inside-your-oracle-jvm.html
>>>> Is Oracle 11g REST ready?
>>>> http://marceloochoa.blogspot.com/2008/02/is-oracle-11g-rest-ready.html
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>>
>> --
>> Marcelo F. Ochoa
>> http://marceloochoa.blogspot.com/
>> http://marcelo.ochoa.googlepages.com/home
>> ______________
>> Want to integrate Lucene and Oracle?
>>
>> http://marceloochoa.blogspot.com/2007/09/running-lucene-inside-your-oracle-jvm.html
>> Is Oracle 11g REST ready?
>> http://marceloochoa.blogspot.com/2008/02/is-oracle-11g-rest-ready.html
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
Marcelo F. Ochoa
http://marceloochoa.blogspot.com/
http://marcelo.ochoa.googlepages.com/home
______________
Want to integrate Lucene and Oracle?
http://marceloochoa.blogspot.com/2007/09/running-lucene-inside-your-oracle-jvm.html
Is Oracle 11g REST ready?
http://marceloochoa.blogspot.com/2008/02/is-oracle-11g-rest-ready.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 30 13:25:24 2008
Return-Path: <java-user-return-36426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72386 invoked from network); 30 Sep 2008 13:25:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Sep 2008 13:25:23 -0000
Received: (qmail 35390 invoked by uid 500); 30 Sep 2008 13:25:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35355 invoked by uid 500); 30 Sep 2008 13:25:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35344 invoked by uid 99); 30 Sep 2008 13:25:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Sep 2008 06:25:15 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of massart.david@gmail.com designates 209.85.198.234 as permitted sender)
Received: from [209.85.198.234] (HELO rv-out-0506.google.com) (209.85.198.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Sep 2008 13:24:13 +0000
Received: by rv-out-0506.google.com with SMTP id f6so12501rvb.5
        for <java-user@lucene.apache.org>; Tue, 30 Sep 2008 06:24:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:mime-version:content-type:x-google-sender-auth;
        bh=CkujKDnB/LU/CwAZCqCOG98kAYFfJWwWs1n/+6ldpPc=;
        b=ixg8/J/Vytv51fQ73gASt15NqZLgIt+C8f1F4w+3z4+IAVOJSyDlhZJIXze1sMgCeE
         T4Z/i+ToJ9sG622S9MjZLHH3s4A4ABtQ2AYcl+qu0G+EAlmWlRHP9vzvSvVWuvLGhpvj
         ZFZMw3hWTINeHqBc7g+HRxEKGjFeDJxgDlKYY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:mime-version:content-type
         :x-google-sender-auth;
        b=XytNSaKz9XoYxdZZKxULpuf84VIHM3tQm3jLak1hGjFReBuPw8oOIdHv+wuldUxPxR
         7xqRJPdbQQwdBSG3BS0ZUdiGXdvy+3cYQv0IQKJAYc9gUHgQBjSvLuJ4z62ghlny7Xmm
         JWPDLuJOEC/EC4vuLDrSisQYpMabiRMOz4NpQ=
Received: by 10.140.125.4 with SMTP id x4mr3335992rvc.229.1222781087817;
        Tue, 30 Sep 2008 06:24:47 -0700 (PDT)
Received: by 10.140.140.4 with HTTP; Tue, 30 Sep 2008 06:24:47 -0700 (PDT)
Message-ID: <7b74fa660809300624r6a5807c6nf9579f99c2de7045@mail.gmail.com>
Date: Tue, 30 Sep 2008 15:24:47 +0200
From: "David Massart" <dmassart@acm.org>
Sender: massart.david@gmail.com
To: java-user@lucene.apache.org
Subject: searching for string with a blank
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_56932_23556520.1222781087806"
X-Google-Sender-Auth: 05d8cc092634e373
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_56932_23556520.1222781087806
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,
Here is a new newbee question.

I'm adding to a lucene index, documents containing a field lrt created as
follows:

doc.add( new Field( "lrt", learningResourceType

.toLowerCase(), Field.Store.NO,

Field.Index.UN_TOKENIZED ) ) ;


where possible values for learningResourceType are:


application

assessment

broadcast

case study

course

demonstration

drill and practice

educational game


In this index, searching for a string that doesn't contain a blank character
works  fine


for example, lrt: application


but searching for a string with a blank does not return any results:


for example, lrt: case study doesn't work


Using lukeall, I can successfully query my index by escaping the blank with
a backslash


for example, lrt: case\ study


But it doesn't work when I try to do the same thing in Java


String query = "lrt: case\\ study"


doesn't return any result.


I've also try to QueryParser.escape( "case study") but it doesn't seem to
affect blank characters?


Thanks for your help.


David

------=_Part_56932_23556520.1222781087806--

From java-user-return-36427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 30 13:51:54 2008
Return-Path: <java-user-return-36427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89191 invoked from network); 30 Sep 2008 13:51:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Sep 2008 13:51:54 -0000
Received: (qmail 89244 invoked by uid 500); 30 Sep 2008 13:51:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89212 invoked by uid 500); 30 Sep 2008 13:51:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89154 invoked by uid 99); 30 Sep 2008 13:51:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Sep 2008 06:51:35 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 216.239.58.190 as permitted sender)
Received: from [216.239.58.190] (HELO gv-out-0910.google.com) (216.239.58.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Sep 2008 13:50:31 +0000
Received: by gv-out-0910.google.com with SMTP id p33so11681gvf.23
        for <java-user@lucene.apache.org>; Tue, 30 Sep 2008 06:51:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=o58jhoXMGPkZWR0vsheYjG8/5HV5JlHuL9UYT8Kpf90=;
        b=Sa5e+dX8OsB+fFXDh4NEk10AV0Uf1uPV4S4p9h/I3NnUGGlN0gLDp/H9j7Y1d/7RI9
         o9DLqnve3bJQL7H9CRE9n5RZr1zH6raG08NBMLSYMfaeiRYN/AmMux1IBMg3FvgtGCCG
         UxllwA2uO1v4/B+jfVGJWzDuGB6St2V3WtyX8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=rZd8yY7gN5R2D99LnTdatHpKMlOSx4x+N1Ev5amGYyAmbo+7ZLrGyZefW5lw/803mm
         Lfju6/tTO0UmbBoL04J5Q5aK5CokCumL/rnePPOa/DkBtB5pL1od1OFLoao2ywSGCSq3
         5HGDy5GpLK0t9a92QkpDxSR00BTmF/EhVdh+A=
Received: by 10.86.82.6 with SMTP id f6mr5658395fgb.38.1222782661162;
        Tue, 30 Sep 2008 06:51:01 -0700 (PDT)
Received: by 10.86.76.4 with HTTP; Tue, 30 Sep 2008 06:51:01 -0700 (PDT)
Message-ID: <359a92830809300651hd5a92cat23c74085a2c4879b@mail.gmail.com>
Date: Tue, 30 Sep 2008 09:51:01 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: searching for string with a blank
In-Reply-To: <7b74fa660809300624r6a5807c6nf9579f99c2de7045@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2540_137244.1222782661126"
References: <7b74fa660809300624r6a5807c6nf9579f99c2de7045@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2540_137244.1222782661126
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

What *analyzer* are you using for your queries? Have Luke explain
your queries and I suspect you'll see your problem. Which if you're
using StandardAnalyzer is probably that 'case study'
will look like (lrt:case lrt:study). Note that the implied operator is OR
unless
you've changed it. But these are compared against your tokens

application

assessment

broadcast

case study

course

demonstration

drill and practice

educational game

EACH OF WHICH IS A TOKEN. No indexed value matches
"case" (the closest is "case study", but it doesn't match, since
you indexed it UN_TOKENIZED, "case" != "case study")
and similarly for "study".

If this is completely off base, perhaps you can provide some additional
detail.

Best
Erick

On Tue, Sep 30, 2008 at 9:24 AM, David Massart <dmassart@acm.org> wrote:

> Hi all,
> Here is a new newbee question.
>
> I'm adding to a lucene index, documents containing a field lrt created as
> follows:
>
> doc.add( new Field( "lrt", learningResourceType
>
> .toLowerCase(), Field.Store.NO,
>
> Field.Index.UN_TOKENIZED ) ) ;
>
>
> where possible values for learningResourceType are:
>
>
> application
>
> assessment
>
> broadcast
>
> case study
>
> course
>
> demonstration
>
> drill and practice
>
> educational game
>
>
> In this index, searching for a string that doesn't contain a blank
> character
> works  fine
>
>
> for example, lrt: application
>
>
> but searching for a string with a blank does not return any results:
>
>
> for example, lrt: case study doesn't work
>
>
> Using lukeall, I can successfully query my index by escaping the blank with
> a backslash
>
>
> for example, lrt: case\ study
>
>
> But it doesn't work when I try to do the same thing in Java
>
>
> String query = "lrt: case\\ study"
>
>
> doesn't return any result.
>
>
> I've also try to QueryParser.escape( "case study") but it doesn't seem to
> affect blank characters?
>
>
> Thanks for your help.
>
>
> David
>

------=_Part_2540_137244.1222782661126--

From java-user-return-36428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 30 14:41:37 2008
Return-Path: <java-user-return-36428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15365 invoked from network); 30 Sep 2008 14:41:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Sep 2008 14:41:37 -0000
Received: (qmail 77203 invoked by uid 500); 30 Sep 2008 14:41:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77169 invoked by uid 500); 30 Sep 2008 14:41:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77158 invoked by uid 99); 30 Sep 2008 14:41:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Sep 2008 07:41:29 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of massart.david@gmail.com designates 209.85.198.226 as permitted sender)
Received: from [209.85.198.226] (HELO rv-out-0506.google.com) (209.85.198.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Sep 2008 14:40:27 +0000
Received: by rv-out-0506.google.com with SMTP id f6so43955rvb.5
        for <java-user@lucene.apache.org>; Tue, 30 Sep 2008 07:40:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type:references
         :x-google-sender-auth;
        bh=kEAMTBlkrkH9aqfIrKj6O2HX0bnmsTLKgBw6fYnGuME=;
        b=fSrAHh37B2cQ5KFtl/t23gwIeOkIEkiJHBd06iOYUUbVIPSRW25NhxUer9J4mZ7LpA
         QLw/v62oji1bhpWtLUT0NOpGeb8Qs+iZme9h70VzXs1C3YXtSgLR67EWVtRfwRI3Raj0
         CNJ0NchecqzGx3XWa1p/YVs8SfLqj7WATayog=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:references:x-google-sender-auth;
        b=SGyqJL483QS9m/utgpE2qbMPYi+PDSAdvhYUffxx+8Nu/FPMEQnvsiw8VabI7dflca
         a3BT1gF73z6XIQLNf1NBpAUp+XwaQ1NgzyY2X01cTPMBYhEpP5R1clhYxfDuqrSm99Fx
         2Rx48F7G+v/VQKFjW6BTYRaOjo2D9wDJmzZHk=
Received: by 10.140.132.8 with SMTP id f8mr3405666rvd.122.1222785651612;
        Tue, 30 Sep 2008 07:40:51 -0700 (PDT)
Received: by 10.140.140.4 with HTTP; Tue, 30 Sep 2008 07:40:51 -0700 (PDT)
Message-ID: <7b74fa660809300740o60fb56e0oe42af31b0617bf5a@mail.gmail.com>
Date: Tue, 30 Sep 2008 16:40:51 +0200
From: "David Massart" <dmassart@acm.org>
Sender: massart.david@gmail.com
To: java-user@lucene.apache.org
Subject: Re: searching for string with a blank
In-Reply-To: <359a92830809300651hd5a92cat23c74085a2c4879b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_58373_12830821.1222785651607"
References: <7b74fa660809300624r6a5807c6nf9579f99c2de7045@mail.gmail.com>
	 <359a92830809300651hd5a92cat23c74085a2c4879b@mail.gmail.com>
X-Google-Sender-Auth: 42cf3abed8dab386
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_58373_12830821.1222785651607
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks Erick.

I see, the problem is that I use some fields tokenized and other untokenized
but that all the queries are parsed using my analyzer. Is this correct?

I suppose that removing the blanks from  learningResourceType before adding
it as an untokenized field helps (provided that I do the same operation at
query time).

Or are there more efficient ways to deal with the problem?

Cheers,

David

On Tue, Sep 30, 2008 at 3:51 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> What *analyzer* are you using for your queries? Have Luke explain
> your queries and I suspect you'll see your problem. Which if you're
> using StandardAnalyzer is probably that 'case study'
> will look like (lrt:case lrt:study). Note that the implied operator is OR
> unless
> you've changed it. But these are compared against your tokens
>
> application
>
> assessment
>
> broadcast
>
> case study
>
> course
>
> demonstration
>
> drill and practice
>
> educational game
>
> EACH OF WHICH IS A TOKEN. No indexed value matches
> "case" (the closest is "case study", but it doesn't match, since
> you indexed it UN_TOKENIZED, "case" != "case study")
> and similarly for "study".
>
> If this is completely off base, perhaps you can provide some additional
> detail.
>
> Best
> Erick
>
> On Tue, Sep 30, 2008 at 9:24 AM, David Massart <dmassart@acm.org> wrote:
>
> > Hi all,
> > Here is a new newbee question.
> >
> > I'm adding to a lucene index, documents containing a field lrt created as
> > follows:
> >
> > doc.add( new Field( "lrt", learningResourceType
> >
> > .toLowerCase(), Field.Store.NO,
> >
> > Field.Index.UN_TOKENIZED ) ) ;
> >
> >
> > where possible values for learningResourceType are:
> >
> >
> > application
> >
> > assessment
> >
> > broadcast
> >
> > case study
> >
> > course
> >
> > demonstration
> >
> > drill and practice
> >
> > educational game
> >
> >
> > In this index, searching for a string that doesn't contain a blank
> > character
> > works  fine
> >
> >
> > for example, lrt: application
> >
> >
> > but searching for a string with a blank does not return any results:
> >
> >
> > for example, lrt: case study doesn't work
> >
> >
> > Using lukeall, I can successfully query my index by escaping the blank
> with
> > a backslash
> >
> >
> > for example, lrt: case\ study
> >
> >
> > But it doesn't work when I try to do the same thing in Java
> >
> >
> > String query = "lrt: case\\ study"
> >
> >
> > doesn't return any result.
> >
> >
> > I've also try to QueryParser.escape( "case study") but it doesn't seem to
> > affect blank characters?
> >
> >
> > Thanks for your help.
> >
> >
> > David
> >
>

------=_Part_58373_12830821.1222785651607--

From java-user-return-36429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 30 15:03:51 2008
Return-Path: <java-user-return-36429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30179 invoked from network); 30 Sep 2008 15:03:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Sep 2008 15:03:51 -0000
Received: (qmail 18764 invoked by uid 500); 30 Sep 2008 15:03:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18337 invoked by uid 500); 30 Sep 2008 15:03:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18326 invoked by uid 99); 30 Sep 2008 15:03:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Sep 2008 08:03:42 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.237 as permitted sender)
Received: from [209.85.198.237] (HELO rv-out-0506.google.com) (209.85.198.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Sep 2008 15:02:39 +0000
Received: by rv-out-0506.google.com with SMTP id f6so52531rvb.5
        for <java-user@lucene.apache.org>; Tue, 30 Sep 2008 08:03:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Oq9ngmlkoyNPrIRbckGF2rnwo9T/5KCtHALsoR7fFVg=;
        b=kBjHr8pu4gtbt1lw/S9fTfN50Q32R228KbNAY+IBMvrvRk2J/Z+noOxtt0uvsCCqZ6
         2g+W8y0i6IZXlSxmq1e4UcTdHZOPsxw5Nj39H8z93EUyxdpD4rr1zyYDtz60GNiZ087+
         3/qgQtAMd3YtNx3Zywn8t8Tnhis61wqCbKyO8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=MaPvav1c1iQ2/rSs33YgMwq6z72M4/c5D6fZeKc5zfO8qrJFrN4rs8WGt+jlGWwEhV
         HGrWX9bXQkQGH3Meh2zmMOxax+zVQW43VvjikEJ91I/aVB8nHNCHj6bmfCfVhchjnm2w
         rJ12Eh1aqtTabANqgUBL3qWmMV5NcfR/MU8kk=
Received: by 10.140.163.12 with SMTP id l12mr3429819rve.137.1222786992772;
        Tue, 30 Sep 2008 08:03:12 -0700 (PDT)
Received: by 10.140.135.10 with HTTP; Tue, 30 Sep 2008 08:03:12 -0700 (PDT)
Message-ID: <359a92830809300803q37dbc4a5l8c938305a1a8857c@mail.gmail.com>
Date: Tue, 30 Sep 2008 11:03:12 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: searching for string with a blank
In-Reply-To: <7b74fa660809300740o60fb56e0oe42af31b0617bf5a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_46885_9100966.1222786992764"
References: <7b74fa660809300624r6a5807c6nf9579f99c2de7045@mail.gmail.com>
	 <359a92830809300651hd5a92cat23c74085a2c4879b@mail.gmail.com>
	 <7b74fa660809300740o60fb56e0oe42af31b0617bf5a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_46885_9100966.1222786992764
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Sure, you can use the same analyzer at query time, or an analyzer
that does what you want. See KeywordAnalyzer for instance
(although that one doesn't lower case, so...). Or just make
your own analyzer, see the Synonym example in Lucene In Action.

Or be really simple, and just (say) lowercase your input stream
before passing it to the analyzer, probably both at index
and query time.

Do note that I *think* (but am not entirely sure) that UN_TOKENIZED
doesn't change the case of your indexed tokens, so you probably
have to re-think about what you really want to happen in your
indexing process. Luke helps here too <G>.

<<<the problem is that I use some fields tokenized and other untokenized
but that all the queries are parsed using my analyzer. Is this correct?>>>

Yes, that's the nub of it. See PerFieldAnalyzerWrapper for a way to
use different analyzers on different fields (both at index and query
time). It's perfectly reasonable to use different analyzers on different
fields, and easy with PerFieldAnalyzerWrapper.


Best
Erick


On Tue, Sep 30, 2008 at 10:40 AM, David Massart <dmassart@acm.org> wrote:

> Thanks Erick.
>
> I see, the problem is that I use some fields tokenized and other
> untokenized
> but that all the queries are parsed using my analyzer. Is this correct?
>
> I suppose that removing the blanks from  learningResourceType before adding
> it as an untokenized field helps (provided that I do the same operation at
> query time).
>
> Or are there more efficient ways to deal with the problem?
>
> Cheers,
>
> David
>
> On Tue, Sep 30, 2008 at 3:51 PM, Erick Erickson <erickerickson@gmail.com
> >wrote:
>
> > What *analyzer* are you using for your queries? Have Luke explain
> > your queries and I suspect you'll see your problem. Which if you're
> > using StandardAnalyzer is probably that 'case study'
> > will look like (lrt:case lrt:study). Note that the implied operator is OR
> > unless
> > you've changed it. But these are compared against your tokens
> >
> > application
> >
> > assessment
> >
> > broadcast
> >
> > case study
> >
> > course
> >
> > demonstration
> >
> > drill and practice
> >
> > educational game
> >
> > EACH OF WHICH IS A TOKEN. No indexed value matches
> > "case" (the closest is "case study", but it doesn't match, since
> > you indexed it UN_TOKENIZED, "case" != "case study")
> > and similarly for "study".
> >
> > If this is completely off base, perhaps you can provide some additional
> > detail.
> >
> > Best
> > Erick
> >
> > On Tue, Sep 30, 2008 at 9:24 AM, David Massart <dmassart@acm.org> wrote:
> >
> > > Hi all,
> > > Here is a new newbee question.
> > >
> > > I'm adding to a lucene index, documents containing a field lrt created
> as
> > > follows:
> > >
> > > doc.add( new Field( "lrt", learningResourceType
> > >
> > > .toLowerCase(), Field.Store.NO,
> > >
> > > Field.Index.UN_TOKENIZED ) ) ;
> > >
> > >
> > > where possible values for learningResourceType are:
> > >
> > >
> > > application
> > >
> > > assessment
> > >
> > > broadcast
> > >
> > > case study
> > >
> > > course
> > >
> > > demonstration
> > >
> > > drill and practice
> > >
> > > educational game
> > >
> > >
> > > In this index, searching for a string that doesn't contain a blank
> > > character
> > > works  fine
> > >
> > >
> > > for example, lrt: application
> > >
> > >
> > > but searching for a string with a blank does not return any results:
> > >
> > >
> > > for example, lrt: case study doesn't work
> > >
> > >
> > > Using lukeall, I can successfully query my index by escaping the blank
> > with
> > > a backslash
> > >
> > >
> > > for example, lrt: case\ study
> > >
> > >
> > > But it doesn't work when I try to do the same thing in Java
> > >
> > >
> > > String query = "lrt: case\\ study"
> > >
> > >
> > > doesn't return any result.
> > >
> > >
> > > I've also try to QueryParser.escape( "case study") but it doesn't seem
> to
> > > affect blank characters?
> > >
> > >
> > > Thanks for your help.
> > >
> > >
> > > David
> > >
> >
>

------=_Part_46885_9100966.1222786992764--

