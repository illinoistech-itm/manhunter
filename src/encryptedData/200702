From java-user-return-25858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 01 08:11:44 2007
Return-Path: <java-user-return-25858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47564 invoked from network); 1 Feb 2007 08:11:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2007 08:11:43 -0000
Received: (qmail 48957 invoked by uid 500); 1 Feb 2007 08:11:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48937 invoked by uid 500); 1 Feb 2007 08:11:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48926 invoked by uid 99); 1 Feb 2007 08:11:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 00:11:41 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.190.206.154] (HELO srs2na11.bgl.lu) (212.190.206.154)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 01 Feb 2007 00:11:32 -0800
Received: from spmwf02l.luinternal.fortis.bank (unverified) by srs2na12.domain
 (Content Technologies SMTPRS 4.2.10) with ESMTP id <T7d88fec88b0aaf150a159@srs2na12.domain> for <java-user@lucene.apache.org>;
 Thu, 1 Feb 2007 09:15:10 +0100
Received: from SPMWB02L.luinternal.fortis.bank ([10.172.252.140]) by spmwf02l.luinternal.fortis.bank with Microsoft SMTPSVC(6.0.3790.0);
	 Thu, 1 Feb 2007 09:10:55 +0100
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: Score
Date: Thu, 1 Feb 2007 09:10:55 +0100
Message-ID: <EBC8F228BDB35A4394D0BE53DA25248808A9A2E5@SPMWB02L.luinternal.fortis.bank>
In-Reply-To: <Pine.LNX.4.58.0701311553130.16454@hal.rescomp.berkeley.edu>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: Score
Thread-Index: AcdFkxrobzyloQdtRW+wRAYQmOUDtAARVO2Q
From: "DECAFFMEYER MATHIEU" <MATHIEU.DECAFFMAYER@fortis.lu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 01 Feb 2007 08:10:55.0714 (UTC) FILETIME=[7F778420:01C745D8]
X-Virus-Checked: Checked by ClamAV on apache.org

Thank u Chris for your support.=20

__________________________________
Matt

   =20

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20
Sent: Thursday, February 01, 2007 12:54 AM
To: java-user@lucene.apache.org
Subject: RE: Score

*****  This message comes from the Internet Network *****


: >>Have you looked at the constructor for BooleanQuery and
: >>tried passing "true" to disable the Coord factor?
:
: Thanks Chris, this is exactly what I want,
: but I am working with lucene 1.4.3 because I have to for some reasons,
:
: Is there any equivalent ?!

if you look atteh source for it, it's fairly trivial ... you should be
able to putthe same logic into a simple little helper function you use
when making BooleanQueries.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
Internet communications are not secure and therefore Fortis Banque Luxembou=
rg S.A. does not accept legal responsibility for the contents of this messa=
ge. The information contained in this e-mail is confidential and may be leg=
ally privileged. It is intended solely for the addressee. If you are not th=
e intended recipient, any disclosure, copying, distribution or any action t=
aken or omitted to be taken in reliance on it, is prohibited and may be unl=
awful. Nothing in the message is capable or intended to create any legally =
binding obligations on either party and it is not intended to provide legal=
 advice.
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 01 08:51:49 2007
Return-Path: <java-user-return-25859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63051 invoked from network); 1 Feb 2007 08:51:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2007 08:51:49 -0000
Received: (qmail 80297 invoked by uid 500); 1 Feb 2007 08:51:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80274 invoked by uid 500); 1 Feb 2007 08:51:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80263 invoked by uid 99); 1 Feb 2007 08:51:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 00:51:48 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 00:51:38 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id l118pCJN012557
	for <java-user@lucene.apache.org>; Thu, 1 Feb 2007 10:51:12 +0200
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz with ESMTP
	 id m21af913; 1 Feb 2007 10:51:00 +0200
Message-ID: <45C1A9FE.6070309@teamware.com>
Date: Thu, 01 Feb 2007 19:51:10 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Boost/Scoring question
References: <45BFDAAD.9070900@teamware.com> <Pine.LNX.4.58.0701301624020.24685@hal.rescomp.berkeley.edu> <45BFF305.60707@teamware.com> <Pine.LNX.4.58.0701311543150.16454@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0701311543150.16454@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Thu, 01 Feb 2007 10:51:12 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Chris,

> : If I search for a document where the field boost is 0.0 then the document is not
> : found I just search that field.  Is this expected???
> 
> you mean you search on:       A^0    and get no results even though
> documents contain A, and if you search on:       +A^0  B^1     you see
> those documents?

It's the index time boost, rather than query time boost.  This short example 
shows the behaviour of searches for

+A
+A +B
+B

where A was indexed with boost 0.0 and B with 1.0


     IndexWriter writer = new IndexWriter(TestTools.getRoot(),
                                          new StandardAnalyzer(), true);
     Field f1 = new Field("subject", "subject - boost factor 0.0F",
                          Field.Store.YES, Field.Index.TOKENIZED);
     f1.setBoost(0.0F);
     Field f2 = new Field("body", "body - boost factor 1.0F", Field.Store.YES,
                           Field.Index.TOKENIZED);
     f2.setBoost(1.0F);
     Document doc = new Document();
     doc.add(f1);
     doc.add(f2);
     writer.addDocument(doc);
     writer.close();

     IndexSearcher searcher = new IndexSearcher(TestTools.getRoot());
     QueryParser qp;
     Query query;
     Hits hits;
     Explanation explanation = null;

     //  Match on a single zero boost field
     qp = new QueryParser("subject", new StandardAnalyzer());
     query = qp.parse("+subject");
     hits = searcher.search(query);
     System.out.println("Search just subject field, no hit found with boost 0");

     //  Match on both fields
     qp = new QueryParser("subject", new StandardAnalyzer());
     query = qp.parse("+subject:subject +body:body");
     hits = searcher.search(query);
     System.out.println("Search +subject +body, match found, score on hit=" +
                        hits.score(0));
     explanation = searcher.explain(query, 0);
     System.out.println(explanation);

     //  Match on a single non zero boost field
     qp = new QueryParser("body", new StandardAnalyzer());
     query = qp.parse("+body:body");
     hits = searcher.search(query);
     System.out.println("Search just on body field=" + hits.score(0));
     explanation = searcher.explain(query, 0);
     System.out.println(explanation);

> if you plan on using Hits, i would suggest requiring that boosts be >0 ..
> if you want to start dealing with raw scores, then boosts can definitely
> be 0.

Hits is sufficient for now, but that may change.

Thanks
Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 01 08:53:56 2007
Return-Path: <java-user-return-25860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63904 invoked from network); 1 Feb 2007 08:53:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2007 08:53:55 -0000
Received: (qmail 83892 invoked by uid 500); 1 Feb 2007 08:53:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83841 invoked by uid 500); 1 Feb 2007 08:53:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83830 invoked by uid 99); 1 Feb 2007 08:53:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 00:53:55 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,MIME_BOUND_NEXTPART
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.190.206.154] (HELO srs2na11.bgl.lu) (212.190.206.154)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 01 Feb 2007 00:53:46 -0800
Received: from spmwf02l.luinternal.fortis.bank (unverified) by srs2na12.domain
 (Content Technologies SMTPRS 4.2.10) with ESMTP id <T7d892571a30aaf150a159@srs2na12.domain> for <java-user@lucene.apache.org>;
 Thu, 1 Feb 2007 09:57:24 +0100
Received: from SPMWB02L.luinternal.fortis.bank ([10.172.252.140]) by spmwf02l.luinternal.fortis.bank with Microsoft SMTPSVC(6.0.3790.0);
	 Thu, 1 Feb 2007 09:53:09 +0100
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_NextPartTM-000-de2f76d0-5562-4eec-aa9c-ce8d63c6961f"
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: Deleting document by file name
Date: Thu, 1 Feb 2007 09:53:09 +0100
Message-ID: <EBC8F228BDB35A4394D0BE53DA25248808A9A2EE@SPMWB02L.luinternal.fortis.bank>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: Deleting document by file name
Thread-Index: AcdF3mWVSdjD5mPwRUG/Ve2/f3m2XQ==
From: "DECAFFMEYER MATHIEU" <MATHIEU.DECAFFMAYER@fortis.lu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 01 Feb 2007 08:53:09.0618 (UTC) FILETIME=[65CA9520:01C745DE]
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPartTM-000-de2f76d0-5562-4eec-aa9c-ce8d63c6961f
Content-Type: multipart/alternative; 
	boundary="----_=_NextPart_001_01C745DE.65B50951"

------_=_NextPart_001_01C745DE.65B50951
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

I have a list of filenames like
Corporate.htm
Logistics.htm
Merchant.htm
....
that need to be deleted.

For now on I  give this list to my Search application that reads the
idnex and give the results, and if the path contains one of the
filenames, I don't display this hit ... Not really proper programming
...

Is there a way to delete the document in the index instead with this
information ?

Thank u.

__________________________________

   Matt



=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
Internet communications are not secure and therefore Fortis Banque Luxembou=
rg S.A. does not accept legal responsibility for the contents of this messa=
ge. The information contained in this e-mail is confidential and may be leg=
ally privileged. It is intended solely for the addressee. If you are not th=
e intended recipient, any disclosure, copying, distribution or any action t=
aken or omitted to be taken in reliance on it, is prohibited and may be unl=
awful. Nothing in the message is capable or intended to create any legally =
binding obligations on either party and it is not intended to provide legal=
 advice.
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D


------_=_NextPart_001_01C745DE.65B50951
Content-Type: text/html; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; charset=3Dus-ascii">
<META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version 6.5.7651.52">
<TITLE>Deleting document by file name</TITLE>
</HEAD>
<BODY>
<!-- Converted from text/rtf format -->

<P><FONT SIZE=3D2 FACE=3D"Arial">Hi,</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial">I have a list of filenames like</FONT>

<BR><FONT SIZE=3D2 FACE=3D"Arial">Corporate.htm</FONT>

<BR><FONT SIZE=3D2 FACE=3D"Arial">Logistics.htm</FONT>

<BR><FONT SIZE=3D2 FACE=3D"Arial">Merchant.htm</FONT>

<BR><FONT SIZE=3D2 FACE=3D"Arial">....</FONT>

<BR><FONT SIZE=3D2 FACE=3D"Arial">that need to be deleted.</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial">For now on I&nbsp; give this list to my Se=
arch application that reads the idnex and give the results, and if the path=
 contains one of the filenames, I don't display this hit ... Not really pro=
per programming ...</FONT></P>

<P><FONT SIZE=3D2 FACE=3D"Arial">Is there a way to delete the document in t=
he index instead with this information ?</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial">Thank u.</FONT>
</P>

<P><B><SPAN LANG=3D"fr"><WBR><WBR><WBR><WBR><WBR><WBR><WBR><WBR><WBR><WBR><=
WBR><WBR><WBR><WBR><WBR><WBR><FONT COLOR=3D"#006699" SIZE=3D1 FACE=3D"Verda=
na">__________________________________</FONT></SPAN></B>
</P>

<P><B><SPAN LANG=3D"fr"><FONT COLOR=3D"#006699" SIZE=3D1 FACE=3D"Verdana">&=
nbsp;&nbsp; Matt</FONT></SPAN></B><SPAN LANG=3D"fr"><I></I><I></I></SPAN><I=
><SPAN LANG=3D"en-us"></SPAN></I>
</P>

<CODE><FONT SIZE=3D3><BR>
<BR>
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D<BR>
Internet communications are not secure and therefore Fortis Banque Luxembou=
rg S.A. does not accept legal responsibility for the contents of this messa=
ge. The information contained in this e-mail is confidential and may be leg=
ally privileged. It is intended solely for the addressee. If you are not th=
e intended recipient, any disclosure, copying, distribution or any action t=
aken or omitted to be taken in reliance on it, is prohibited and may be unl=
awful. Nothing in the message is capable or intended to create any legally =
binding obligations on either party and it is not intended to provide legal=
 advice.<BR>
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D<BR>
</FONT></CODE>
</BODY>
</HTML>
------_=_NextPart_001_01C745DE.65B50951--


------=_NextPartTM-000-de2f76d0-5562-4eec-aa9c-ce8d63c6961f
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------=_NextPartTM-000-de2f76d0-5562-4eec-aa9c-ce8d63c6961f--


From java-user-return-25861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 01 11:16:23 2007
Return-Path: <java-user-return-25861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7135 invoked from network); 1 Feb 2007 11:16:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2007 11:16:22 -0000
Received: (qmail 32315 invoked by uid 500); 1 Feb 2007 11:16:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32284 invoked by uid 500); 1 Feb 2007 11:16:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32269 invoked by uid 99); 1 Feb 2007 11:16:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 03:16:19 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 03:16:09 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HCZuv-0006uM-FH
	for java-user@lucene.apache.org; Thu, 01 Feb 2007 03:15:49 -0800
Message-ID: <8746530.post@talk.nabble.com>
Date: Thu, 1 Feb 2007 03:15:49 -0800 (PST)
From: liquideshark <tandimail@gmail.com>
To: java-user@lucene.apache.org
Subject: problem with field.setboost(5.0f) on lucene 2.00
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: tandimail@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


iam building up a search engine using lucene 2.0, and iam having problem
using the term boost "setboost" a part of my code is :
and my code is :

doc.add(new
Field("title",httpd.getTitle(),Field.Store.YES,Field.Index.TOKENIZED ));
doc.getField("title").setboost(5.0f);//  <=== the boost wont update to 5.0
it remain 1.0
writer.addDocument(doc);
writer.optimize();
writer.close();

but when i look up in the index created the field title is still 1.0
can some one help me thx
-- 
View this message in context: http://www.nabble.com/problem-with-field.setboost%285.0f%29-on-lucene-2.00-tf3154250.html#a8746530
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 01 13:09:23 2007
Return-Path: <java-user-return-25862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31150 invoked from network); 1 Feb 2007 13:09:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2007 13:09:22 -0000
Received: (qmail 36711 invoked by uid 500); 1 Feb 2007 13:09:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36670 invoked by uid 500); 1 Feb 2007 13:09:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36659 invoked by uid 99); 1 Feb 2007 13:09:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 05:09:22 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 05:09:13 -0800
Received: by ug-out-1314.google.com with SMTP id k40so460630ugc
        for <java-user@lucene.apache.org>; Thu, 01 Feb 2007 05:08:52 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=gYWFC+c8BlUuTNgxLVahkHL/nPinvd78NtHvjVL2fnky1RBCvxuv40vI0P0UEpQXVlH1kV2Vo2a8OelAVa65NVW2qbVqWp7lAtrFGPPpQtW5z1FWhdjNxSggNVBSGOg5flESCIVfW0rBV3tO7/3NODwlIszIXIJqSlLkIcww/fU=
Received: by 10.82.169.4 with SMTP id r4mr638205bue.1170335332055;
        Thu, 01 Feb 2007 05:08:52 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Thu, 1 Feb 2007 05:08:51 -0800 (PST)
Message-ID: <359a92830702010508t6d546b68yfd7bdb2a042ab019@mail.gmail.com>
Date: Thu, 1 Feb 2007 08:08:51 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Deleting document by file name
In-Reply-To: <EBC8F228BDB35A4394D0BE53DA25248808A9A2EE@SPMWB02L.luinternal.fortis.bank>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1883_7978911.1170335331883"
References: <EBC8F228BDB35A4394D0BE53DA25248808A9A2EE@SPMWB02L.luinternal.fortis.bank>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1883_7978911.1170335331883
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Believe it or not, you delete items with IndexReader <G>. You can either
delete by document ID or by Term. Be aware that currently open searchers
will still find these documents (even after they have been deleted) until
the *searcher* is closed and reopened.

Erick

On 2/1/07, DECAFFMEYER MATHIEU <MATHIEU.DECAFFMAYER@fortis.lu> wrote:
>
>  Hi,
>
> I have a list of filenames like
> Corporate.htm
> Logistics.htm
> Merchant.htm
> ....
> that need to be deleted.
>
> For now on I  give this list to my Search application that reads the idnex
> and give the results, and if the path contains one of the filenames, I don't
> display this hit ... Not really proper programming ...
>
> Is there a way to delete the document in the index instead with this
> information ?
>
> Thank u.
>
> *__________________________________*
>
> *   Matt*******
>
>
> ============================================
> Internet communications are not secure and therefore Fortis Banque
> Luxembourg S.A. does not accept legal responsibility for the contents of
> this message. The information contained in this e-mail is confidential and
> may be legally privileged. It is intended solely for the addressee. If you
> are not the intended recipient, any disclosure, copying, distribution or any
> action taken or omitted to be taken in reliance on it, is prohibited and may
> be unlawful. Nothing in the message is capable or intended to create any
> legally binding obligations on either party and it is not intended to
> provide legal advice.
> ============================================
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

------=_Part_1883_7978911.1170335331883--

From java-user-return-25863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 01 13:11:53 2007
Return-Path: <java-user-return-25863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31604 invoked from network); 1 Feb 2007 13:11:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2007 13:11:52 -0000
Received: (qmail 39143 invoked by uid 500); 1 Feb 2007 13:11:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39113 invoked by uid 500); 1 Feb 2007 13:11:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39102 invoked by uid 99); 1 Feb 2007 13:11:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 05:11:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 05:11:41 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HCbii-0005g6-V5
	for java-user@lucene.apache.org; Thu, 01 Feb 2007 05:11:20 -0800
Message-ID: <8747868.post@talk.nabble.com>
Date: Thu, 1 Feb 2007 05:11:20 -0800 (PST)
From: poeta simbolista <poetasimbolista@gmail.com>
To: java-user@lucene.apache.org
Subject: Use of only a prohibit search
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: poetasimbolista@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


HI guys,
I've read on 
http://www.nabble.com/Using-NOT-queries-inside-parentheses-tf1234775.html#a3272973
this  forum about the problem of using, for example, only a prohibit search
such as

-description:plot

I really would like to get this done on a good manner, I am constructing
queries where elements may vary greatly. 
I am using 1.9.1 at the moment. Is the solution provided in the post I
linked still the best one "nowadays" (it was stated for 1.4) ?  I find that
a bit "hacky" for such an operation, though...

Thanks a lot!
 D
-- 
View this message in context: http://www.nabble.com/Use-of-only-a-prohibit-search-tf3154742.html#a8747868
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 01 13:12:39 2007
Return-Path: <java-user-return-25864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31683 invoked from network); 1 Feb 2007 13:12:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2007 13:12:38 -0000
Received: (qmail 40701 invoked by uid 500); 1 Feb 2007 13:12:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40665 invoked by uid 500); 1 Feb 2007 13:12:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40654 invoked by uid 99); 1 Feb 2007 13:12:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 05:12:37 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 05:12:29 -0800
Received: by ug-out-1314.google.com with SMTP id k40so461522ugc
        for <java-user@lucene.apache.org>; Thu, 01 Feb 2007 05:12:08 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=KpgX/lPJ9hnhSDCIRiVAEZ+0fvpfw6fBofygjZj4uzSOjuni3SCNSoacODF61DKvUg/b3x45yrlHXP/lwXzrX6DGgmxdOZg+CY/+f8FwXDX7En2XT1yc1ug6am3SrnTdk3NY1M0YVkFRIGHjJsTPwB5kDMcGC5m2uLapMkWKnIA=
Received: by 10.82.187.16 with SMTP id k16mr642849buf.1170335528118;
        Thu, 01 Feb 2007 05:12:08 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Thu, 1 Feb 2007 05:12:08 -0800 (PST)
Message-ID: <359a92830702010512n71c63d2cia1a5622126b3ebd1@mail.gmail.com>
Date: Thu, 1 Feb 2007 08:12:08 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: problem with field.setboost(5.0f) on lucene 2.00
In-Reply-To: <8746530.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1979_21550953.1170335528094"
References: <8746530.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1979_21550953.1170335528094
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I haven't played with boosts, but I suspect your ordering is wrong. You've
already added the field to the document before you set the boost. Try
Field f = new Field()...

f.setBoost()

doc.add(f).

writer.addDoc(doc)..

Best
Erick

On 2/1/07, liquideshark <tandimail@gmail.com> wrote:
>
>
> iam building up a search engine using lucene 2.0, and iam having problem
> using the term boost "setboost" a part of my code is :
> and my code is :
>
> doc.add(new
> Field("title",httpd.getTitle(),Field.Store.YES,Field.Index.TOKENIZED ));
> doc.getField("title").setboost(5.0f);//  <=== the boost wont update to 5.0
> it remain 1.0
> writer.addDocument(doc);
> writer.optimize();
> writer.close();
>
> but when i look up in the index created the field title is still 1.0
> can some one help me thx
> --
> View this message in context:
> http://www.nabble.com/problem-with-field.setboost%285.0f%29-on-lucene-2.00-tf3154250.html#a8746530
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_1979_21550953.1170335528094--

From java-user-return-25865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 01 13:50:56 2007
Return-Path: <java-user-return-25865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40609 invoked from network); 1 Feb 2007 13:50:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2007 13:50:56 -0000
Received: (qmail 91667 invoked by uid 500); 1 Feb 2007 13:50:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90684 invoked by uid 500); 1 Feb 2007 13:50:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90673 invoked by uid 99); 1 Feb 2007 13:50:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 05:50:56 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 05:50:46 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HCcKU-0001eL-BE
	for java-user@lucene.apache.org; Thu, 01 Feb 2007 05:50:22 -0800
Message-ID: <8748508.post@talk.nabble.com>
Date: Thu, 1 Feb 2007 05:50:22 -0800 (PST)
From: liquideshark <tandimail@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: problem with field.setboost(5.0f) on lucene 2.00
In-Reply-To: <359a92830702010512n71c63d2cia1a5622126b3ebd1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: tandimail@gmail.com
References: <8746530.post@talk.nabble.com> <359a92830702010512n71c63d2cia1a5622126b3ebd1@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Yes you are right 
but i have change it to:
------------------------------------------------
        Field tiTle = new
Field("title",httpd.getTitle(),Field.Store.YES,Field.Index.TOKENIZED );
        tiTle.setBoost(6.1f);
        doc.add(tiTle);
-----------------------------------------------
it still dont make any change on the boost value, for information i use
luke.jar to see if the value had change

nice reading you again
      Tandina






Erick Erickson wrote:
> 
> I haven't played with boosts, but I suspect your ordering is wrong. You've
> already added the field to the document before you set the boost. Try
> Field f = new Field()...
> 
> f.setBoost()
> 
> doc.add(f).
> 
> writer.addDoc(doc)..
> 
> Best
> Erick
> 
> On 2/1/07, liquideshark <tandimail@gmail.com> wrote:
>>
>>
>> iam building up a search engine using lucene 2.0, and iam having problem
>> using the term boost "setboost" a part of my code is :
>> and my code is :
>>
>> doc.add(new
>> Field("title",httpd.getTitle(),Field.Store.YES,Field.Index.TOKENIZED ));
>> doc.getField("title").setboost(5.0f);//  <=== the boost wont update to
>> 5.0
>> it remain 1.0
>> writer.addDocument(doc);
>> writer.optimize();
>> writer.close();
>>
>> but when i look up in the index created the field title is still 1.0
>> can some one help me thx
>> --
>> View this message in context:
>> http://www.nabble.com/problem-with-field.setboost%285.0f%29-on-lucene-2.00-tf3154250.html#a8746530
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/problem-with-field.setboost%285.0f%29-on-lucene-2.00-tf3154250.html#a8748508
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 01 14:15:17 2007
Return-Path: <java-user-return-25866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47254 invoked from network); 1 Feb 2007 14:15:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2007 14:15:16 -0000
Received: (qmail 32972 invoked by uid 500); 1 Feb 2007 14:15:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32415 invoked by uid 500); 1 Feb 2007 14:15:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32404 invoked by uid 99); 1 Feb 2007 14:15:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 06:15:15 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.154.194.71] (HELO srs2na11.bgl.lu) (194.154.194.71)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 01 Feb 2007 06:15:06 -0800
Received: from spmwf02l.luinternal.fortis.bank (unverified) by srs2na12.domain
 (Content Technologies SMTPRS 4.2.10) with ESMTP id <T7d8a4bafa00aaf150a159@srs2na12.domain> for <java-user@lucene.apache.org>;
 Thu, 1 Feb 2007 15:18:47 +0100
Received: from SPMWB02L.luinternal.fortis.bank ([10.172.252.140]) by spmwf02l.luinternal.fortis.bank with Microsoft SMTPSVC(6.0.3790.0);
	 Thu, 1 Feb 2007 15:14:32 +0100
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: Deleting document by file name
Date: Thu, 1 Feb 2007 15:14:31 +0100
Message-ID: <EBC8F228BDB35A4394D0BE53DA25248808A9A2F8@SPMWB02L.luinternal.fortis.bank>
In-Reply-To: <359a92830702010508t6d546b68yfd7bdb2a042ab019@mail.gmail.com>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: Deleting document by file name
Thread-Index: AcdGAi+42pxkK8wgRGGT4jxuRqJdqAACPQLg
From: "DECAFFMEYER MATHIEU" <MATHIEU.DECAFFMAYER@fortis.lu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 01 Feb 2007 14:14:32.0902 (UTC) FILETIME=[4B863660:01C7460B]
X-Virus-Checked: Checked by ClamAV on apache.org

If I have the path of the document,
I cannot find the ID ?=20

__________________________________
   Matt

   =20

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Thursday, February 01, 2007 2:09 PM
To: java-user@lucene.apache.org
Subject: Re: Deleting document by file name

*****  This message comes from the Internet Network *****

Believe it or not, you delete items with IndexReader <G>. You can either
delete by document ID or by Term. Be aware that currently open searchers
will still find these documents (even after they have been deleted)
until
the *searcher* is closed and reopened.

Erick

On 2/1/07, DECAFFMEYER MATHIEU <MATHIEU.DECAFFMAYER@fortis.lu> wrote:
>
>  Hi,
>
> I have a list of filenames like
> Corporate.htm
> Logistics.htm
> Merchant.htm
> ....
> that need to be deleted.
>
> For now on I  give this list to my Search application that reads the
idnex
> and give the results, and if the path contains one of the filenames, I
don't
> display this hit ... Not really proper programming ...
>
> Is there a way to delete the document in the index instead with this
> information ?
>
> Thank u.
>
> *__________________________________*
>
> *   Matt*******
>
>
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> Internet communications are not secure and therefore Fortis Banque
> Luxembourg S.A. does not accept legal responsibility for the contents
of
> this message. The information contained in this e-mail is confidential
and
> may be legally privileged. It is intended solely for the addressee. If
you
> are not the intended recipient, any disclosure, copying, distribution
or any
> action taken or omitted to be taken in reliance on it, is prohibited
and may
> be unlawful. Nothing in the message is capable or intended to create
any
> legally binding obligations on either party and it is not intended to
> provide legal advice.
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
Internet communications are not secure and therefore Fortis Banque Luxembou=
rg S.A. does not accept legal responsibility for the contents of this messa=
ge. The information contained in this e-mail is confidential and may be leg=
ally privileged. It is intended solely for the addressee. If you are not th=
e intended recipient, any disclosure, copying, distribution or any action t=
aken or omitted to be taken in reliance on it, is prohibited and may be unl=
awful. Nothing in the message is capable or intended to create any legally =
binding obligations on either party and it is not intended to provide legal=
 advice.
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 01 14:22:47 2007
Return-Path: <java-user-return-25867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55548 invoked from network); 1 Feb 2007 14:22:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2007 14:22:47 -0000
Received: (qmail 54242 invoked by uid 500); 1 Feb 2007 14:22:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54212 invoked by uid 500); 1 Feb 2007 14:22:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54201 invoked by uid 99); 1 Feb 2007 14:22:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 06:22:45 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.73.178.152] (HELO web60424.mail.yahoo.com) (209.73.178.152)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 01 Feb 2007 06:22:34 -0800
Received: (qmail 53218 invoked by uid 60001); 1 Feb 2007 14:22:13 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=0UZFQBir+sBxG7x8A93PD3zaCgkQweWx5+eOhzyKCeIE7d6yj6QoXkoD3qhRwlp3m/ITL1oEmtqodJmCVZ0APCvX6Id835EuaA3P8vNhnOJ0yFvrPri8uUfnuD6UcrhB8bVI5PVJ4H8P3AWAcmIQAPs2HVALtGO+nNBlHqhVBFo=;
X-YMail-OSG: .DogJ5gVM1mn2y0g5lD4IINegMQap4GakEmnem4l3we1OvSyOuxktnDY2PgypVvv5YfdO8byw_f5kMaPQtLtPoQgohukC601610GhYxjY63JlVwOWgsdbCy02nRqhdkQ62axXmS.v6dquqBP_Td7rP.gmyHwb7HvXD_kAXdziAYKbahHChtQFVMSyoQ3EQ--
Received: from [155.69.162.145] by web60424.mail.yahoo.com via HTTP; Thu, 01 Feb 2007 06:22:13 PST
Date: Thu, 1 Feb 2007 06:22:13 -0800 (PST)
From: maureen tanuwidjaja <autumn_musique@yahoo.com>
Subject: Building lucene index using 100 Gb Mobile HardDisk
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1423619712-1170339733=:52735"
Content-Transfer-Encoding: 8bit
Message-ID: <733404.52735.qm@web60424.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1423619712-1170339733=:52735
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Dear All,
  
  I was indexing 660,000 XML documents.The unoptimized index file was  successfully built in about 17 hrs...This index file resides in my D  drive which has the free space 38 Gb.This space is insufficient for  optimizing the index file -->I read Lucene documentation said about  its requirement of substantial temporary free disk space
  
  Hence,I now put my index file in the Mobile HardDisk which has the capacity of 100 Gb,and restart indexing.
  
  However...there is an exception saying that :
  
  java.io.IOException: There is not enough space on the disk
  
  when I index the 120,000th documents
  
  
  It is a pretty weird thing!!...I keep thinking what is happening...Is  there anything to do with the file system used?my D drive use NTFS file  system whilst this Mobile HDD use FAT32...
  
  
  Any comments/suggestion pls?
  
  THanks and best Regards,
  Maureen

 
---------------------------------
Food fight? Enjoy some healthy debate
in the Yahoo! Answers Food & Drink Q&A.
--0-1423619712-1170339733=:52735--

From java-user-return-25868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 01 14:28:16 2007
Return-Path: <java-user-return-25868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56739 invoked from network); 1 Feb 2007 14:28:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2007 14:28:15 -0000
Received: (qmail 62787 invoked by uid 500); 1 Feb 2007 14:28:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62756 invoked by uid 500); 1 Feb 2007 14:28:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62745 invoked by uid 99); 1 Feb 2007 14:28:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 06:28:13 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [136.173.162.228] (HELO SMTP35.europarl.europa.eu) (136.173.162.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 06:28:02 -0800
Received: from EMAILBRUSV42.ep.parl.union.eu (unverified) by SMTP35.europarl.europa.eu
 (European Parliament) with ESMTP id <T7d8a52cd7788ada2e419d4@SMTP35.europarl.europa.eu> for <java-user@lucene.apache.org>;
 Thu, 1 Feb 2007 15:26:34 +0100
Received: from epbrusex02.ep.parl.union.eu ([136.173.156.27]) by EMAILBRUSV42.ep.parl.union.eu with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 1 Feb 2007 15:27:40 +0100
Received: from EPLUXSEX01.ep.parl.union.eu ([136.173.56.16]) by epbrusex02.ep.parl.union.eu with Microsoft SMTPSVC(5.0.2195.6713);
	 Thu, 1 Feb 2007 15:27:36 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C7460D.1E5C343C"
Subject: RE: Deleting document by file name
Date: Thu, 1 Feb 2007 15:27:36 +0100
Message-ID: <CA7398CB8402E445AABF081C51E43ACB059ED5@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Deleting document by file name
Thread-Index: AcdF3mWVSdjD5mPwRUG/Ve2/f3m2XQALfYyg
From: "WATHELET Thomas" <thomas.wathelet@europarl.europa.eu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 01 Feb 2007 14:27:36.0345 (UTC) FILETIME=[1E7E2090:01C7460D]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7460D.1E5C343C
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

do something like this:
public class Index extends IndexModifier { ...
=20
 public int deleteDocuments(String field, String value) throws
IOException {
        return super.deleteDocuments(new Term(field, value));
    }
=20
use like this :
index.deleteDocuments(filed name, field value);


  _____ =20

	From: DECAFFMEYER MATHIEU [mailto:MATHIEU.DECAFFMAYER@fortis.lu]

	Sent: 01 February 2007 09:53
	To: java-user@lucene.apache.org
	Subject: Deleting document by file name
=09
=09

	Hi,=20

	I have a list of filenames like=20
	Corporate.htm=20
	Logistics.htm=20
	Merchant.htm=20
	....=20
	that need to be deleted.=20

	For now on I  give this list to my Search application that reads
the idnex and give the results, and if the path contains one of the
filenames, I don't display this hit ... Not really proper programming
...

	Is there a way to delete the document in the index instead with
this information ?=20

	Thank u.=20

	__________________________________=20

	   Matt=20

=09
=09
	=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
	Internet communications are not secure and therefore Fortis
Banque Luxembourg S.A. does not accept legal responsibility for the
contents of this message. The information contained in this e-mail is
confidential and may be legally privileged. It is intended solely for
the addressee. If you are not the intended recipient, any disclosure,
copying, distribution or any action taken or omitted to be taken in
reliance on it, is prohibited and may be unlawful. Nothing in the
message is capable or intended to create any legally binding obligations
on either party and it is not intended to provide legal advice.
	=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
=09


------_=_NextPart_001_01C7460D.1E5C343C--

From java-user-return-25869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 01 14:35:07 2007
Return-Path: <java-user-return-25869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59023 invoked from network); 1 Feb 2007 14:35:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2007 14:35:07 -0000
Received: (qmail 72655 invoked by uid 500); 1 Feb 2007 14:35:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72626 invoked by uid 500); 1 Feb 2007 14:35:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72615 invoked by uid 99); 1 Feb 2007 14:35:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 06:35:05 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=MSGID_MULTIPLE_AT
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.125.145.37] (HELO mercury.propylon.com) (194.125.145.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 06:34:55 -0800
Received: from propylon-sdsl.sdsl.esat.net ([193.120.101.26] helo=damienmc)
	by mercury.propylon.com with esmtp (Exim 4.50)
	id 1HCczV-0007MC-Ka
	for java-user@lucene.apache.org; Thu, 01 Feb 2007 14:32:52 +0000
From: "Damien McCarthy" <damien.mccarthy@propylon.com>
To: <java-user@lucene.apache.org>
References: <733404.52735.qm@web60424.mail.yahoo.com>
In-Reply-To: <733404.52735.qm@web60424.mail.yahoo.com>
Date: Thu, 1 Feb 2007 14:34:21 -0000
Message-ID: <005701c7460e$103b80d0$30b28270$@mccarthy@propylon.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcdGDD/2EkC+yEGhRLKPvyUf3Lq9ugAAVOdg
Content-Language: en-gb
X-SA-Exim-Connect-IP: 193.120.101.26
X-SA-Exim-Mail-From: damien.mccarthy@propylon.com
Subject: RE: Building lucene index using 100 Gb Mobile HardDisk
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on 
	mercury.propylon.com
X-Spam-Level: 
X-SA-Exim-Version: 4.2 (built Thu, 03 Mar 2005 10:44:12 +0100)
X-SA-Exim-Scanned: Yes (on mercury.propylon.com)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.1 required=5.0 tests=AWL autolearn=failed 
	version=3.0.3

FAT 32 imposes a lower file size limitation than NTF. Attempts to create
files greater that 4Gig on FAT32 will throw error you are seeing.

-----Original Message-----
From: maureen tanuwidjaja [mailto:autumn_musique@yahoo.com] 
Sent: 01 February 2007 14:22
To: java-user@lucene.apache.org
Subject: Building lucene index using 100 Gb Mobile HardDisk

Dear All,
  
  I was indexing 660,000 XML documents.The unoptimized index file was
successfully built in about 17 hrs...This index file resides in my D  drive
which has the free space 38 Gb.This space is insufficient for  optimizing
the index file -->I read Lucene documentation said about  its requirement of
substantial temporary free disk space
  
  Hence,I now put my index file in the Mobile HardDisk which has the
capacity of 100 Gb,and restart indexing.
  
  However...there is an exception saying that :
  
  java.io.IOException: There is not enough space on the disk
  
  when I index the 120,000th documents
  
  
  It is a pretty weird thing!!...I keep thinking what is happening...Is
there anything to do with the file system used?my D drive use NTFS file
system whilst this Mobile HDD use FAT32...
  
  
  Any comments/suggestion pls?
  
  THanks and best Regards,
  Maureen

 
---------------------------------
Food fight? Enjoy some healthy debate
in the Yahoo! Answers Food & Drink Q&A.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 01 14:51:28 2007
Return-Path: <java-user-return-25870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63839 invoked from network); 1 Feb 2007 14:51:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2007 14:51:28 -0000
Received: (qmail 11337 invoked by uid 500); 1 Feb 2007 14:51:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11307 invoked by uid 500); 1 Feb 2007 14:51:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11296 invoked by uid 99); 1 Feb 2007 14:51:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 06:51:27 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.154.194.71] (HELO srs2na11.bgl.lu) (194.154.194.71)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 01 Feb 2007 06:51:18 -0800
Received: from spmwf02l.luinternal.fortis.bank (unverified) by srs2na12.domain
 (Content Technologies SMTPRS 4.2.10) with ESMTP id <T7d8a6cd8170aaf150a159@srs2na12.domain> for <java-user@lucene.apache.org>;
 Thu, 1 Feb 2007 15:55:01 +0100
Received: from SPMWB02L.luinternal.fortis.bank ([10.172.252.140]) by spmwf02l.luinternal.fortis.bank with Microsoft SMTPSVC(6.0.3790.0);
	 Thu, 1 Feb 2007 15:50:45 +0100
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: Deleting document by file name
Date: Thu, 1 Feb 2007 15:50:45 +0100
Message-ID: <EBC8F228BDB35A4394D0BE53DA25248808A9A2FC@SPMWB02L.luinternal.fortis.bank>
In-Reply-To: <CA7398CB8402E445AABF081C51E43ACB059ED5@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Deleting document by file name
Thread-Index: AcdF3mWVSdjD5mPwRUG/Ve2/f3m2XQALfYygAAD1WIA=
From: "DECAFFMEYER MATHIEU" <MATHIEU.DECAFFMAYER@fortis.lu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 01 Feb 2007 14:50:45.0875 (UTC) FILETIME=[5AB79430:01C74610]
X-Virus-Checked: Checked by ClamAV on apache.org

I see now :)
Thank u all for your support

__________________________________
   Matt

   =20

-----Original Message-----
From: WATHELET Thomas [mailto:thomas.wathelet@europarl.europa.eu]=20
Sent: Thursday, February 01, 2007 3:28 PM
To: java-user@lucene.apache.org
Subject: RE: Deleting document by file name

*****  This message comes from the Internet Network *****

do something like this:
public class Index extends IndexModifier { ...
=20
 public int deleteDocuments(String field, String value) throws
IOException {
        return super.deleteDocuments(new Term(field, value));
    }
=20
use like this :
index.deleteDocuments(filed name, field value);


  _____ =20

	From: DECAFFMEYER MATHIEU [mailto:MATHIEU.DECAFFMAYER@fortis.lu]

	Sent: 01 February 2007 09:53
	To: java-user@lucene.apache.org
	Subject: Deleting document by file name
=09
=09

	Hi,=20

	I have a list of filenames like=20
	Corporate.htm=20
	Logistics.htm=20
	Merchant.htm=20
	....=20
	that need to be deleted.=20

	For now on I  give this list to my Search application that reads
the idnex and give the results, and if the path contains one of the
filenames, I don't display this hit ... Not really proper programming
...

	Is there a way to delete the document in the index instead with
this information ?=20

	Thank u.=20

	__________________________________=20

	   Matt=20

=09
=09
	=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
	Internet communications are not secure and therefore Fortis
Banque Luxembourg S.A. does not accept legal responsibility for the
contents of this message. The information contained in this e-mail is
confidential and may be legally privileged. It is intended solely for
the addressee. If you are not the intended recipient, any disclosure,
copying, distribution or any action taken or omitted to be taken in
reliance on it, is prohibited and may be unlawful. Nothing in the
message is capable or intended to create any legally binding obligations
on either party and it is not intended to provide legal advice.
	=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
=09


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 01 15:40:08 2007
Return-Path: <java-user-return-25871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79308 invoked from network); 1 Feb 2007 15:40:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2007 15:40:07 -0000
Received: (qmail 97209 invoked by uid 500); 1 Feb 2007 15:40:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97184 invoked by uid 500); 1 Feb 2007 15:40:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97173 invoked by uid 99); 1 Feb 2007 15:40:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 07:40:05 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [141.37.9.230] (HELO mail.htwg-konstanz.de) (141.37.9.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 07:39:55 -0800
Received: from webmailsrv.fh-konstanz.de (webmailsrv.htwg-konstanz.de [141.37.10.35])
	by mail.htwg-konstanz.de (8.12.10/8.12.10) with ESMTP id l11FanR8010878;
	Thu, 1 Feb 2007 16:36:49 +0100 (CET)
Received: from localhost (localhost.localdomain [127.0.0.1])
	by webmailsrv.fh-konstanz.de (Postfix) with ESMTP id EBBEB4E169;
	Thu,  1 Feb 2007 16:39:24 +0100 (CET)
Received: from wi-pc16.htwg-konstanz.de (wi-pc16.htwg-konstanz.de [141.37.121.16]) 
	by webmail.fh-konstanz.de (IMP) with HTTP 
	for <paechter@localhost>; Thu, 01 Feb 2007 16:39:24 +0100
Message-ID: <1170344364.45c209acd9554@webmail.fh-konstanz.de>
Date: Thu, 01 Feb 2007 16:39:24 +0100
From: Christoph =?iso-8859-1?b?UORjaHRlcg==?= <Paechter@htwg-konstanz.de>
To: java-user@lucene.apache.org
Cc: Saroja Kanta Maharana <saroja.kanta.maharana@gmail.com>
Subject: Re: Please Help me on Lucene
References: <ab6fb9950612110302o476ec90bid57cc65035a38401@mail.gmail.com> <ab6fb9950702010344g70358d20g4b71faf0176f69c5@mail.gmail.com>
In-Reply-To: <ab6fb9950702010344g70358d20g4b71faf0176f69c5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
User-Agent: Internet Messaging Program (IMP) 3.2.2
X-Originating-IP: 141.37.121.16
X-Virus-Checked: Checked by ClamAV on apache.org

I am also only novice, but that should work for you.

One row in your table ==> one doc in lucene:

I would indice it like that for one row/document:

Document doc = new Document();

doc.add(new Field("prod_Id....
doc.add(new Field("prod_name...
...
writer.addDocument(doc);



Now check your index using Luke: http://www.getopt.org/luke/
Just start the web version quickly and look at your index. (Luke is simple and
nice to use, mostly self-explanatory)
You can search for your value and look at the docs. So use it to check your 
query...


If you search for a value, in your class you get the hits-object.

Hits hits = searcher.search(query);

Document doc = hits.doc(i);//gives you the document (rank i), which is one row.

doc.get("prod_Id"); to retrieve the fieldvalues

Cheers,
Christoph

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 01 15:47:56 2007
Return-Path: <java-user-return-25872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84444 invoked from network); 1 Feb 2007 15:47:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2007 15:47:56 -0000
Received: (qmail 12786 invoked by uid 500); 1 Feb 2007 15:47:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12752 invoked by uid 500); 1 Feb 2007 15:47:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12741 invoked by uid 99); 1 Feb 2007 15:47:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 07:47:54 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.73.178.146] (HELO web60418.mail.yahoo.com) (209.73.178.146)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 01 Feb 2007 07:47:44 -0800
Received: (qmail 85180 invoked by uid 60001); 1 Feb 2007 15:47:22 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=qJINpaZT8ENAuftUhHDYhi67IC3fsr/+mNJGYWgQr9EnbmuR4SOBdHXRX67mwoGuDrkMav8H/caDr68qNzL1Vmn1Ioj8HOVDibHVBHdpmVgdEJDHfxZuwMARB8/YhDa4wxn5CDowHFuS9/nlmhLM7BLIfWVHBC91YaB1ptbUK5M=;
X-YMail-OSG: A8yVN9sVM1n8FXAk1BFzbiGO04SfFgGBE4RYtQuS5gggjjN51m.dswIExXSY0325CM6eocVKcfrIewZPbuycnCo4LcVYDD62iCPUlIq89YYLSp2p_wPEi416K0Lr5XkP2Qk6jwre4M.2gswS.A2y0NA54u663ZzMXO8kocqQyh2Sb_W6GTW0u6pWHbVuXqxz2egoTagP
Received: from [155.69.162.145] by web60418.mail.yahoo.com via HTTP; Thu, 01 Feb 2007 07:47:22 PST
Date: Thu, 1 Feb 2007 07:47:22 -0800 (PST)
From: maureen tanuwidjaja <autumn_musique@yahoo.com>
Subject: RE: Building lucene index using 100 Gb Mobile HardDisk
To: java-user@lucene.apache.org
In-Reply-To: <005701c7460e$103b80d0$30b28270$@mccarthy@propylon.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-588921022-1170344842=:84709"
Content-Transfer-Encoding: 8bit
Message-ID: <786263.84709.qm@web60418.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-588921022-1170344842=:84709
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Oh is it?I didn't know about that...so Is it means I cant use this Mobile HDD..

Damien McCarthy <damien.mccarthy@propylon.com> wrote:  FAT 32 imposes a lower file size limitation than NTF. Attempts to create
files greater that 4Gig on FAT32 will throw error you are seeing.

-----Original Message-----
From: maureen tanuwidjaja [mailto:autumn_musique@yahoo.com] 
Sent: 01 February 2007 14:22
To: java-user@lucene.apache.org
Subject: Building lucene index using 100 Gb Mobile HardDisk

Dear All,
  
  I was indexing 660,000 XML documents.The unoptimized index file was
successfully built in about 17 hrs...This index file resides in my D  drive
which has the free space 38 Gb.This space is insufficient for  optimizing
the index file -->I read Lucene documentation said about  its requirement of
substantial temporary free disk space
  
  Hence,I now put my index file in the Mobile HardDisk which has the
capacity of 100 Gb,and restart indexing.
  
  However...there is an exception saying that :
  
  java.io.IOException: There is not enough space on the disk
  
  when I index the 120,000th documents
  
  
  It is a pretty weird thing!!...I keep thinking what is happening...Is
there anything to do with the file system used?my D drive use NTFS file
system whilst this Mobile HDD use FAT32...
  
  
  Any comments/suggestion pls?
  
  THanks and best Regards,
  Maureen

 
---------------------------------
Food fight? Enjoy some healthy debate
in the Yahoo! Answers Food & Drink Q&A.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



 
---------------------------------
Never Miss an Email
Stay connected with Yahoo! Mail on your mobile. Get started!
--0-588921022-1170344842=:84709--

From java-user-return-25873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 01 17:04:18 2007
Return-Path: <java-user-return-25873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20962 invoked from network); 1 Feb 2007 17:04:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2007 17:04:17 -0000
Received: (qmail 70995 invoked by uid 500); 1 Feb 2007 17:04:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70403 invoked by uid 500); 1 Feb 2007 17:04:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70391 invoked by uid 99); 1 Feb 2007 17:04:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 09:04:17 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Hareesh.Kadlabalu@fatwire.com designates 69.25.74.33 as permitted sender)
Received: from [69.25.74.33] (HELO mX1.myoutlookOnline.com) (69.25.74.33)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 09:04:08 -0800
Received: from be053.mail.lan ([10.109.209.153]) by mX1.myoutlookOnline.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 1 Feb 2007 12:03:44 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Locking in Lucene 2.0
Date: Thu, 1 Feb 2007 12:03:38 -0500
Message-ID: <46B7E23F49145C44B7F2AB558AB9169E188BC1@BE053.mail.lan>
In-Reply-To: <786263.84709.qm@web60418.mail.yahoo.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Locking in Lucene 2.0
Thread-Index: AcdGGFZTUgbyf3l+SxiaP+I9VZpUhgACYsXg
From: "Kadlabalu, Hareesh" <Hareesh.Kadlabalu@fatwire.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 01 Feb 2007 17:03:44.0327 (UTC) FILETIME=[EE3EBD70:01C74622]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
I am starting to work with Lucene 2.0 and I noticed that we can no
longer create an FSDirectory using a LockFactory.=20

Could someone point me to some discussion or documentation related to
locking and what has changed in terms of best practices? It appears that
the only way to build custom locking is to write my own Directory
implementation.=20

Thanks=20
-hareesh


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 01 17:34:18 2007
Return-Path: <java-user-return-25874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34614 invoked from network); 1 Feb 2007 17:34:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2007 17:34:17 -0000
Received: (qmail 23933 invoked by uid 500); 1 Feb 2007 17:34:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23906 invoked by uid 500); 1 Feb 2007 17:34:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23888 invoked by uid 99); 1 Feb 2007 17:34:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 09:34:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 09:34:04 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id 21B139D4B1
	for <java-user@lucene.apache.org>; Thu,  1 Feb 2007 12:33:43 -0500 (EST)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by out1.internal (MEProxy); Thu, 01 Feb 2007 12:33:43 -0500
X-Sasl-enc: QhsZpDZPHozbRS3rThPotuJNhevz8SPLpE+yh84litjT 1170351222
Received: from [10.17.4.90] (pool-71-162-112-251.bstnma.fios.verizon.net [71.162.112.251])
	by mail.messagingengine.com (Postfix) with ESMTP id B2324435A
	for <java-user@lucene.apache.org>; Thu,  1 Feb 2007 12:33:42 -0500 (EST)
Message-ID: <45C22473.7080508@mikemccandless.com>
Date: Thu, 01 Feb 2007 12:33:39 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Locking in Lucene 2.0
References: <46B7E23F49145C44B7F2AB558AB9169E188BC1@BE053.mail.lan>
In-Reply-To: <46B7E23F49145C44B7F2AB558AB9169E188BC1@BE053.mail.lan>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Kadlabalu, Hareesh wrote:
> Hi,
> I am starting to work with Lucene 2.0 and I noticed that we can no
> longer create an FSDirectory using a LockFactory. 
> 
> Could someone point me to some discussion or documentation related to
> locking and what has changed in terms of best practices? It appears that
> the only way to build custom locking is to write my own Directory
> implementation. 

I think you mean Lucene trunk (not 2.0)?  LockFactory hasn't been
released yet.

With the trunk, you can still instantiate an FSDirectory with your own
LockFactory using FSDirectory.getDirectory(*)?

Maybe you are referring to the boolean "create" argument?  That was
deprecated/removed from FSDirectory.getDirectory as part of:

     http://issues.apache.org/jira/browse/LUCENE-773

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 01 18:46:16 2007
Return-Path: <java-user-return-25875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61273 invoked from network); 1 Feb 2007 18:46:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2007 18:46:15 -0000
Received: (qmail 64325 invoked by uid 500); 1 Feb 2007 18:46:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64293 invoked by uid 500); 1 Feb 2007 18:46:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64282 invoked by uid 99); 1 Feb 2007 18:46:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 10:46:14 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of luong.m.thang@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 10:46:06 -0800
Received: by ug-out-1314.google.com with SMTP id k40so554214ugc
        for <java-user@lucene.apache.org>; Thu, 01 Feb 2007 10:45:44 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=ppceDjir99AhYv2utIMRqcyHfw8TMmQ1D3bygKFEifOAcfVlWWO5YUbUC1k+/dTrMSaodWqaDAY1oqM08KoMPucGaOXR1rIY1IioQDGXp+A8v1l8EeC5FJF732nU9Zu9m9X2TgLOYsTK/slzY5lfDr5ChN0JYQkkMa9rM1ZmPRs=
Received: by 10.82.135.13 with SMTP id i13mr820550bud.1170355543799;
        Thu, 01 Feb 2007 10:45:43 -0800 (PST)
Received: by 10.82.127.18 with HTTP; Thu, 1 Feb 2007 10:45:43 -0800 (PST)
Message-ID: <80f009e70702011045y56b58a2euc991fb305713c99d@mail.gmail.com>
Date: Fri, 2 Feb 2007 02:45:43 +0800
From: "Thang Luong Minh" <luong.m.thang@gmail.com>
To: java-user@lucene.apache.org, java-dev@lucene.apache.org
Subject: Advices on a replacement of Lucene gap encoding scheme?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8601_4779473.1170355543757"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8601_4779473.1170355543757
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Dear all

I am happy to send my first email to Lucene community after some time
standing aside, following many interesting discussions.

As part of my school project, I am intending to make some improvements in
Lucene source code, and I need some advices on how significance my
modification work would be. What I am interested so far is the gap encoding
scheme in Lucene which is used in DocumentWriter.writePostings() to record
the gap positions of a term within a document. The writePostings(), in turn,
calls the writeVInt() method to record the gap, which is the byte-aligned
coding scheme.

I'm thinking of  replace the byte-aligned scheme with the "fixed binary"
coding scheme mentioned in the paper "Index compression using Fixed Binary
Codewords" by Vo Ngoc Anh and Alistair Moffat (the abstract can be found
here http://www.cs.mu.oz.au/~vo/abstracts/am04:adc.html<http://www.cs.mu.oz.au/%7Evo/abstracts/am04:adc.html>).
This scheme basically breaks the list of gaps into segments whose gaps (in
one segment) will be coded in a  fixed data width w (bits). The number of
gaps in each segment is recored in a span variable s, and the pair (w,s)
form a selector assigned for that segment. By effectively decompose the
list, reduce the number of selectors into 16 combinations of relative data
size (vs. previous segment) and span, and use greedy algorithm to find
suboptimal solutions, the authors claimed that they could achieve better
compression effectiveness (measured in bits per pointer averaged across the
wholde index), and retrieval time compared to Golomb, interpolative,
byte-aligned, and word aligned code schemes.

What I wonder at this time is that in the case of Lucene, how possible it is
to implement the "fixed binary" scheme that could enhance the performance,
and whether there are other parts which I could also consider replacing the
gap-encoding scheme.

As I've started playing around with Lucene recently, I hope to have your
helps to understand Lucene better  ^_^

PS: for this type of discussion, which mailing list is most appropriate for
my emai?

Best regards,

Luong Minh Thang

------=_Part_8601_4779473.1170355543757--

From java-user-return-25876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 01 19:12:28 2007
Return-Path: <java-user-return-25876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71223 invoked from network); 1 Feb 2007 19:12:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2007 19:12:26 -0000
Received: (qmail 12761 invoked by uid 500); 1 Feb 2007 19:12:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12599 invoked by uid 500); 1 Feb 2007 19:12:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12482 invoked by uid 99); 1 Feb 2007 19:12:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 11:12:02 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of luong.m.thang@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 11:05:11 -0800
Received: by ug-out-1314.google.com with SMTP id k40so559227ugc
        for <java-user@lucene.apache.org>; Thu, 01 Feb 2007 11:04:50 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=frachX3QYo6PqTUFF+BfGSNPhVdrd/L5JYyBEMeIOdM/kf1UhvpPST1AoAIO9BkG4or1FISAfuLFeQCMOY/eUc1vg+1mS6WX1fiFmH9K6QQTxZezb+Fws2MR0HMnkr0Yy27/vPkhBCjsm1sXegBN/agyMjyVzjA+Q4KAZ0lr53M=
Received: by 10.82.148.7 with SMTP id v7mr708504bud.1170356689836;
        Thu, 01 Feb 2007 11:04:49 -0800 (PST)
Received: by 10.82.127.18 with HTTP; Thu, 1 Feb 2007 11:04:49 -0800 (PST)
Message-ID: <80f009e70702011104o116ae759l24f0348799860b63@mail.gmail.com>
Date: Fri, 2 Feb 2007 03:04:49 +0800
From: "Thang Luong Minh" <luong.m.thang@gmail.com>
To: java-user@lucene.apache.org
Subject: Advices on a replacement of Lucene gap encoding scheme?
In-Reply-To: <80f009e70702011045y56b58a2euc991fb305713c99d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8870_100109.1170356689800"
References: <80f009e70702011045y56b58a2euc991fb305713c99d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8870_100109.1170356689800
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Dear all,

I am happy to send my first email to Lucene community as after subscribing
to the mailing list, I haven't actually joined the community, just standing
aside and following many intersting threads.

As part of my school project, I am intending to make some improvements in
Lucene source code, and I need some advices on how significance my
modification work would be. What I am interested so far is the gap encoding
scheme in Lucene which is used in DocumentWriter.writePostings() to record
the gap positions of a term within a document. The writePostings(), in turn,
calls the writeVInt() method to record the gap, which is the byte-aligned
coding scheme.

I'm thinking of  replace the byte-aligned scheme with the "fixed binary"
coding scheme mentioned in the paper "Index compression using Fixed Binary
Codewords" by Vo Ngoc Anh and Alistair Moffat (the abstract can be found
here http://www.cs.mu.oz.au/~vo/abstracts/am04:adc.html<http://www.cs.mu.oz.au/%7Evo/abstracts/am04:adc.html>).
This scheme basically breaks the list of gaps into segments whose gaps (in
one segment) will be coded in a  fixed data width w (bits). The number of
gaps in each segment is recored in a span variable s, and the pair (w,s)
form a selector assigned for that segment. By effectively decompose the
list, reduce the number of selectors into 16 combinations of relative data
size (vs. previous segment) and span, and use greedy algorithm to find
suboptimal solutions, the authors claimed that they could achieve better
compression effectiveness (measured in bits per pointer averaged across the
wholde index), and retrieval time compared to Golomb, interpolative,
byte-aligned, and word aligned code schemes.

What I wonder at this time is that in the case of Lucene, how possible it is
to implement the "fixed binary" scheme that could enhance the performance,
and whether there are other parts which I could also consider replacing the
gap-encoding scheme.

As I've started playing around with Lucene recently, I hope to have your
helps to understand Lucene better  ^_^

Best regards,

Luong Minh Thang

------=_Part_8870_100109.1170356689800--

From java-user-return-25877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 01 20:19:26 2007
Return-Path: <java-user-return-25877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6720 invoked from network); 1 Feb 2007 20:19:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2007 20:19:25 -0000
Received: (qmail 95350 invoked by uid 500); 1 Feb 2007 20:19:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95293 invoked by uid 500); 1 Feb 2007 20:19:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95274 invoked by uid 99); 1 Feb 2007 20:19:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 12:19:07 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 12:18:58 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id B3DB95B763; Thu,  1 Feb 2007 12:18:37 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id AFEE17F403;
	Thu,  1 Feb 2007 12:18:37 -0800 (PST)
Date: Thu, 1 Feb 2007 12:18:37 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Saroja Kanta Maharana <saroja.kanta.maharana@gmail.com>
Cc: Lucene Users <java-user@lucene.apache.org>
Subject: Re: Please Help me on Lucene
In-Reply-To: <ab6fb9950702010344g70358d20g4b71faf0176f69c5@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0702011215470.26730@hal.rescomp.berkeley.edu>
References: <ab6fb9950612110302o476ec90bid57cc65035a38401@mail.gmail.com>
 <ab6fb9950702010344g70358d20g4b71faf0176f69c5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


Please, do not ever, under any circumstances at all, cross post a
message to all of these lists -- there is absolutely no reason for it, and
doing so will most likely only make people mad and uncooporative.

if you are trying to use Java Lucene, then post your message to java-user
list.  if you are trying to use solr, then post your message to the
solr-user list, etc....  If you know you want to do something with Lucene,
but you aren't sure which list ot mail to, email general@lucene and ask
what the appropriate list is for your question.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 01 20:58:11 2007
Return-Path: <java-user-return-25878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30549 invoked from network); 1 Feb 2007 20:58:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2007 20:58:08 -0000
Received: (qmail 45821 invoked by uid 500); 1 Feb 2007 20:58:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45749 invoked by uid 500); 1 Feb 2007 20:58:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45725 invoked by uid 99); 1 Feb 2007 20:58:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 12:58:02 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of peterlkeegan@gmail.com designates 64.233.162.232 as permitted sender)
Received: from [64.233.162.232] (HELO nz-out-0506.google.com) (64.233.162.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 12:57:53 -0800
Received: by nz-out-0506.google.com with SMTP id i1so619967nzh
        for <java-user@lucene.apache.org>; Thu, 01 Feb 2007 12:57:33 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=qBZt7vSbv+rH9gClspLocpt4Ng724t3KxdgUiCIy/vp+86lqR26l0L6b+3Cc1zVPxb2ZQfDyXPLjLb3C5Pn4r03vJ31BT3/uT9IFV3ELrFjhnR2X67+xsEwfzbpw7tVgvpUNTEt+Doz1+JGsBd8ZZ06HPTDlLxFs7Cr/X9H/4gk=
Received: by 10.65.122.20 with SMTP id z20mr4512514qbm.1170363453042;
        Thu, 01 Feb 2007 12:57:33 -0800 (PST)
Received: by 10.65.150.17 with HTTP; Thu, 1 Feb 2007 12:57:32 -0800 (PST)
Message-ID: <e994873a0702011257j410f66e1vbdc823e67830ec1a@mail.gmail.com>
Date: Thu, 1 Feb 2007 15:57:33 -0500
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org, java-dev@lucene.apache.org
Subject: bad queryparser bug
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8729_15937048.1170363453001"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8729_15937048.1170363453001
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I have discovered a serious bug in QueryParser. The following query:
contents:sales && contents:marketing || contents:industrial &&
contents:sales

is parsed as:
+contents:sales +contents:marketing +contents:industrial +contents:sales

The same parsed query occurs even with parenthesis:
(contents:sales && contents:marketing) || (contents:industrial &&
contents:sales)

Is there any way around this bug?

Thanks,
Peter

------=_Part_8729_15937048.1170363453001--

From java-user-return-25879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 01 21:04:49 2007
Return-Path: <java-user-return-25879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33337 invoked from network); 1 Feb 2007 21:04:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2007 21:04:47 -0000
Received: (qmail 55642 invoked by uid 500); 1 Feb 2007 21:04:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55568 invoked by uid 500); 1 Feb 2007 21:04:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54777 invoked by uid 99); 1 Feb 2007 21:04:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 13:04:45 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of peterlkeegan@gmail.com designates 64.233.162.239 as permitted sender)
Received: from [64.233.162.239] (HELO nz-out-0506.google.com) (64.233.162.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 13:04:36 -0800
Received: by nz-out-0506.google.com with SMTP id i1so621601nzh
        for <java-user@lucene.apache.org>; Thu, 01 Feb 2007 13:04:15 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ee1l87kIcx5OZM5GDuqbClcMVnPVlUY4yhZvMdLar5xRaK+lsCIMmjLYn16k4j5UyVE2LqDuwGyV9wWZBFS+xRRskYjWvH88vksGE4KK/SHIHyDO7+zBGZv1sMkNzrM6uCcuVQSdReGEt39Jt0YtQpdpaWxt/sHFYUO6aDrA9+M=
Received: by 10.64.148.8 with SMTP id v8mr4550587qbd.1170363855602;
        Thu, 01 Feb 2007 13:04:15 -0800 (PST)
Received: by 10.65.150.17 with HTTP; Thu, 1 Feb 2007 13:04:15 -0800 (PST)
Message-ID: <e994873a0702011304y4abe606dud2d2ea89c0b10a33@mail.gmail.com>
Date: Thu, 1 Feb 2007 16:04:15 -0500
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org, java-dev@lucene.apache.org
Subject: Re: bad queryparser bug
In-Reply-To: <e994873a0702011257j410f66e1vbdc823e67830ec1a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8829_21164260.1170363855534"
References: <e994873a0702011257j410f66e1vbdc823e67830ec1a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8829_21164260.1170363855534
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Correction:

The query parser produces the correct query with the parenthesis.
But, I'm still looking for a fix for this. I could use some advice on where
to look in QueryParser to fix this.

Thanks,
Peter

On 2/1/07, Peter Keegan <peterlkeegan@gmail.com> wrote:
>
> I have discovered a serious bug in QueryParser. The following query:
> contents:sales && contents:marketing || contents:industrial &&
> contents:sales
>
> is parsed as:
> +contents:sales +contents:marketing +contents:industrial +contents:sales
>
> The same parsed query occurs even with parenthesis:
> (contents:sales && contents:marketing) || (contents:industrial &&
> contents:sales)
>
> Is there any way around this bug?
>
> Thanks,
> Peter
>
>

------=_Part_8829_21164260.1170363855534--

From java-user-return-25880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 01 21:11:17 2007
Return-Path: <java-user-return-25880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36792 invoked from network); 1 Feb 2007 21:11:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2007 21:11:15 -0000
Received: (qmail 73468 invoked by uid 500); 1 Feb 2007 21:11:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73438 invoked by uid 500); 1 Feb 2007 21:11:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73427 invoked by uid 99); 1 Feb 2007 21:11:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 13:11:14 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=FORGED_MUA_OUTLOOK,MSGID_FROM_MTA_HEADER
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.170.99.246] (HELO mail.rhoderunner.com) (216.170.99.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 13:11:05 -0800
Message-ID: <15946852.3051170364244350.JavaMail.root@dell.rhoderunner.com>
MIME-Version: 1.0
X-UserIsAuth: true
Received: from mism.r-effects.com ([209.166.180.139])
          by mail.rhoderunner.com (JAMES SMTP Server 2.3.0rc2) with SMTP ID 201
          for <java-user@lucene.apache.org>;
          Thu, 1 Feb 2007 16:10:44 -0500 (EST)
From: "spamsucks" <spamsucks@rhoderunner.com>
To: <java-user@lucene.apache.org>
Subject: Looking for crawler recommendations.
Date: Thu, 1 Feb 2007 16:10:43 -0500
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Virus-Checked: Checked by ClamAV on apache.org

Has anyone integrated a crawler with lucene that they had success with?  I 
cannot use Nutch, since 60% of our searchable content is contained in a 
database.  I need to do a hybrid between database indexing and website 
crawling.  I would be just crawling one domain with a given set of 
directories.

I found this list of crawlers, but nothing that quite seems to fit my needs. 
One problem with a couple of the libraries that may work is that they use a 
GNU license.
http://www.manageability.org/blog/stuff/open-source-web-crawlers-java/view

Thanks.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 01 21:13:15 2007
Return-Path: <java-user-return-25881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38110 invoked from network); 1 Feb 2007 21:13:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2007 21:13:14 -0000
Received: (qmail 78433 invoked by uid 500); 1 Feb 2007 21:13:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78404 invoked by uid 500); 1 Feb 2007 21:13:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78393 invoked by uid 99); 1 Feb 2007 21:13:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 13:13:14 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [128.83.248.27] (HELO fiat.ischool.utexas.edu) (128.83.248.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 13:13:04 -0800
Received: from [128.83.248.226] (dhcp-248-226 [128.83.248.226])
	(authenticated bits=0)
	by fiat.ischool.utexas.edu (8.12.11.20060308/8.12.11) with ESMTP id l11LCfca001035
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <java-user@lucene.apache.org>; Thu, 1 Feb 2007 15:12:41 -0600
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <e994873a0702011257j410f66e1vbdc823e67830ec1a@mail.gmail.com>
References: <e994873a0702011257j410f66e1vbdc823e67830ec1a@mail.gmail.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-1-931085424
Message-Id: <DBBCE192-02E6-4D96-B7EA-D34CC9A44936@ibiblio.org>
From: Miles Efron <mefron@ibiblio.org>
Subject: trouble with permissions?
Date: Thu, 1 Feb 2007 15:12:10 -0600
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Scanned: ClamAV 0.88.7/2513/Thu Feb  1 10:48:53 2007 on sentra.ischool.utexas.edu
X-Virus-Status: Clean
X-iSchool-MailScanner-Info: Contact broot@ischool.utexas.edu for help
X-iSchool-MailScanner: Found to be clean
X-iSchool-MailScanner-From: mefron@ibiblio.org
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-1-931085424
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed

i seem to be having a problem analogous to this one (no answer that i  
see):

	http://www.gossamer-threads.com/lists/lucene/java-user/32268? 
search_string=cannot%20overwrite;#32268

trouble is, i just put lucene on my new macbook pro and am having the  
problem that if i build a large index, i get an I/O error due to  
something like

	java.io.IOException: Cannot overwrite: /data/reuters/indexes/reuters/ 
deleteable.new

same code worked fine on my previous machine (still running on a G4  
powerbook and a linux machine).  sometimes it has trouble writing the  
segments file instead...

has anyone seen and solved this problem?  thoughts on what might be  
behind it?

thanks,
-Miles

On Feb 1, 2007, at 2:57 PM, Peter Keegan wrote:

> I have discovered a serious bug in QueryParser. The following query:
> contents:sales && contents:marketing || contents:industrial &&
> contents:sales
>
> is parsed as:
> +contents:sales +contents:marketing +contents:industrial  
> +contents:sales
>
> The same parsed query occurs even with parenthesis:
> (contents:sales && contents:marketing) || (contents:industrial &&
> contents:sales)
>
> Is there any way around this bug?
>
> Thanks,
> Peter


--Apple-Mail-1-931085424--

From java-user-return-25882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 01 21:34:15 2007
Return-Path: <java-user-return-25882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45873 invoked from network); 1 Feb 2007 21:34:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2007 21:34:15 -0000
Received: (qmail 10614 invoked by uid 500); 1 Feb 2007 21:34:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10591 invoked by uid 500); 1 Feb 2007 21:34:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10580 invoked by uid 99); 1 Feb 2007 21:34:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 13:34:15 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 13:34:05 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id 4111C9DD5F
	for <java-user@lucene.apache.org>; Thu,  1 Feb 2007 16:33:44 -0500 (EST)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by out1.internal (MEProxy); Thu, 01 Feb 2007 16:33:44 -0500
X-Sasl-enc: 9TKBDPAk9jqtNVp0ebjYym7qMMy/UP+DOhXOcG7yTi76 1170365624
Received: from [10.17.4.90] (pool-71-162-112-251.bstnma.fios.verizon.net [71.162.112.251])
	by mail.messagingengine.com (Postfix) with ESMTP id 0ED5124560
	for <java-user@lucene.apache.org>; Thu,  1 Feb 2007 16:33:43 -0500 (EST)
Message-ID: <45C25CB5.3040402@mikemccandless.com>
Date: Thu, 01 Feb 2007 16:33:41 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: trouble with permissions?
References: <e994873a0702011257j410f66e1vbdc823e67830ec1a@mail.gmail.com> <DBBCE192-02E6-4D96-B7EA-D34CC9A44936@ibiblio.org>
In-Reply-To: <DBBCE192-02E6-4D96-B7EA-D34CC9A44936@ibiblio.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Miles Efron wrote:
> i seem to be having a problem analogous to this one (no answer that i see):
> 
>     http://www.gossamer-threads.com/lists/lucene/java-user/32268?search_string=cannot%20overwrite;#32268 
> 
> 
> trouble is, i just put lucene on my new macbook pro and am having the 
> problem that if i build a large index, i get an I/O error due to 
> something like
> 
>     java.io.IOException: Cannot overwrite: 
> /data/reuters/indexes/reuters/deleteable.new
> 
> same code worked fine on my previous machine (still running on a G4 
> powerbook and a linux machine).  sometimes it has trouble writing the 
> segments file instead...
> 
> has anyone seen and solved this problem?  thoughts on what might be 
> behind it?

Are you running Windows on your macbook pro?

There are known issues like this, but only on Windows, eg:

   http://issues.apache.org/jira/browse/LUCENE-665

We believe such cases are now fixed by lockless commits, on the trunk
of Lucene (which is not yet released).  If you could try the trunk
(but beware that API, file formats, can change) and see if this still
happens that'd be great!

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 01 22:00:43 2007
Return-Path: <java-user-return-25883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53722 invoked from network); 1 Feb 2007 22:00:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2007 22:00:42 -0000
Received: (qmail 61488 invoked by uid 500); 1 Feb 2007 22:00:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61456 invoked by uid 500); 1 Feb 2007 22:00:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61445 invoked by uid 99); 1 Feb 2007 22:00:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 14:00:41 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [128.83.248.27] (HELO fiat.ischool.utexas.edu) (128.83.248.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 14:00:31 -0800
Received: from [128.83.248.226] (dhcp-248-226 [128.83.248.226])
	(authenticated bits=0)
	by fiat.ischool.utexas.edu (8.12.11.20060308/8.12.11) with ESMTP id l11M08eN014380
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <java-user@lucene.apache.org>; Thu, 1 Feb 2007 16:00:09 -0600
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <45C25CB5.3040402@mikemccandless.com>
References: <e994873a0702011257j410f66e1vbdc823e67830ec1a@mail.gmail.com> <DBBCE192-02E6-4D96-B7EA-D34CC9A44936@ibiblio.org> <45C25CB5.3040402@mikemccandless.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8F6A2EB4-6AC9-4734-9CDF-B8792DDD3686@ibiblio.org>
Content-Transfer-Encoding: 7bit
From: Miles Efron <mefron@ibiblio.org>
Subject: Re: trouble with permissions?
Date: Thu, 1 Feb 2007 15:59:36 -0600
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Scanned: ClamAV 0.88.7/2513/Thu Feb  1 10:48:53 2007 on sentra.ischool.utexas.edu
X-Virus-Status: Clean
X-iSchool-MailScanner-Info: Contact broot@ischool.utexas.edu for help
X-iSchool-MailScanner: Found to be clean
X-iSchool-MailScanner-From: mefron@ibiblio.org
X-Virus-Checked: Checked by ClamAV on apache.org

Mike,

You rule.  Swapping out the nightly build seems to have fixed the  
problem... tried it on two problematic cases and both worked.

For the record, I'm running mac os 10.4.8.

Do you know if the lockless commits will be included in the next  
stable release?

Thanks so much!
-Miles

On Feb 1, 2007, at 3:33 PM, Michael McCandless wrote:

> Miles Efron wrote:
>> i seem to be having a problem analogous to this one (no answer  
>> that i see):
>>     http://www.gossamer-threads.com/lists/lucene/java-user/32268? 
>> search_string=cannot%20overwrite;#32268 trouble is, i just put  
>> lucene on my new macbook pro and am having the problem that if i  
>> build a large index, i get an I/O error due to something like
>>     java.io.IOException: Cannot overwrite: /data/reuters/indexes/ 
>> reuters/deleteable.new
>> same code worked fine on my previous machine (still running on a  
>> G4 powerbook and a linux machine).  sometimes it has trouble  
>> writing the segments file instead...
>> has anyone seen and solved this problem?  thoughts on what might  
>> be behind it?
>
> Are you running Windows on your macbook pro?
>
> There are known issues like this, but only on Windows, eg:
>
>   http://issues.apache.org/jira/browse/LUCENE-665
>
> We believe such cases are now fixed by lockless commits, on the trunk
> of Lucene (which is not yet released).  If you could try the trunk
> (but beware that API, file formats, can change) and see if this still
> happens that'd be great!
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 01 22:04:22 2007
Return-Path: <java-user-return-25884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56296 invoked from network); 1 Feb 2007 22:04:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2007 22:04:21 -0000
Received: (qmail 67799 invoked by uid 500); 1 Feb 2007 22:04:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67572 invoked by uid 500); 1 Feb 2007 22:04:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67557 invoked by uid 99); 1 Feb 2007 22:04:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 14:04:21 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of peterlkeegan@gmail.com designates 64.233.162.238 as permitted sender)
Received: from [64.233.162.238] (HELO nz-out-0506.google.com) (64.233.162.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 14:04:12 -0800
Received: by nz-out-0506.google.com with SMTP id i1so636605nzh
        for <java-user@lucene.apache.org>; Thu, 01 Feb 2007 14:03:51 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=im808HsHhX0ykq+MV1YRXzv1Kbo1W6hPzc5Ft5wruQpWlxc/4Nz23wHk4d7zit3tOY5VRejhGYhTzOBUH5V8WzvxXlm+gzYjcsWVBl+nHW1hxoMi0UuG4P4zpUbM+6u0wxhBq9m55oyDF00DMKNMm+EGjidRWkyWKspY35JdIU0=
Received: by 10.65.154.4 with SMTP id g4mr4743605qbo.1170367430328;
        Thu, 01 Feb 2007 14:03:50 -0800 (PST)
Received: by 10.65.150.17 with HTTP; Thu, 1 Feb 2007 14:03:50 -0800 (PST)
Message-ID: <e994873a0702011403h2140387cg592ce42b561bc30a@mail.gmail.com>
Date: Thu, 1 Feb 2007 17:03:50 -0500
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org, java-dev@lucene.apache.org
Subject: Re: bad queryparser bug
In-Reply-To: <e994873a0702011304y4abe606dud2d2ea89c0b10a33@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9393_16224766.1170367430256"
References: <e994873a0702011257j410f66e1vbdc823e67830ec1a@mail.gmail.com>
	 <e994873a0702011304y4abe606dud2d2ea89c0b10a33@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9393_16224766.1170367430256
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

OK, I see that I'm not the first to discover this behavior of QueryParser.
Can anyone vouch for the integrity of the PrecedenceQueryParser here:

http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/miscellaneous/src/java/org/apache/lucene/queryParser/precedence/

Thanks,
Peter

On 2/1/07, Peter Keegan <peterlkeegan@gmail.com> wrote:
>
> Correction:
>
> The query parser produces the correct query with the parenthesis.
> But, I'm still looking for a fix for this. I could use some advice on
> where to look in QueryParser to fix this.
>
> Thanks,
> Peter
>
> On 2/1/07, Peter Keegan <peterlkeegan@gmail.com> wrote:
> >
> > I have discovered a serious bug in QueryParser. The following query:
> > contents:sales && contents:marketing || contents:industrial &&
> > contents:sales
> >
> > is parsed as:
> > +contents:sales +contents:marketing +contents:industrial +contents:sales
> >
> >
> > The same parsed query occurs even with parenthesis:
> > (contents:sales && contents:marketing) || (contents:industrial &&
> > contents:sales)
> >
> > Is there any way around this bug?
> >
> > Thanks,
> > Peter
> >
> >
>

------=_Part_9393_16224766.1170367430256--

From java-user-return-25885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 01 22:20:09 2007
Return-Path: <java-user-return-25885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63135 invoked from network); 1 Feb 2007 22:20:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2007 22:20:08 -0000
Received: (qmail 4083 invoked by uid 500); 1 Feb 2007 22:20:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4058 invoked by uid 500); 1 Feb 2007 22:20:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4047 invoked by uid 99); 1 Feb 2007 22:20:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 14:20:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 14:19:58 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id 2E7729DFFE
	for <java-user@lucene.apache.org>; Thu,  1 Feb 2007 17:19:36 -0500 (EST)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by out1.internal (MEProxy); Thu, 01 Feb 2007 17:19:36 -0500
X-Sasl-enc: CBp7WtWbRHnqPwLf0ThZCpyHv7ZcjiYtz7AhLNt1VaGA 1170368375
Received: from [10.17.4.90] (pool-71-162-112-251.bstnma.fios.verizon.net [71.162.112.251])
	by mail.messagingengine.com (Postfix) with ESMTP id E102824B87
	for <java-user@lucene.apache.org>; Thu,  1 Feb 2007 17:19:35 -0500 (EST)
Message-ID: <45C26775.4090906@mikemccandless.com>
Date: Thu, 01 Feb 2007 17:19:33 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: trouble with permissions?
References: <e994873a0702011257j410f66e1vbdc823e67830ec1a@mail.gmail.com> <DBBCE192-02E6-4D96-B7EA-D34CC9A44936@ibiblio.org> <45C25CB5.3040402@mikemccandless.com> <8F6A2EB4-6AC9-4734-9CDF-B8792DDD3686@ibiblio.org>
In-Reply-To: <8F6A2EB4-6AC9-4734-9CDF-B8792DDD3686@ibiblio.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Miles Efron wrote:

> You rule.  Swapping out the nightly build seems to have fixed the 
> problem... tried it on two problematic cases and both worked.

Phew!

> For the record, I'm running mac os 10.4.8.

Uh-oh, I can't explain why you would hit these errors on OS X 10.4.8;
we have only seen these one Windows.

Are you sure switching to trunk has fixed it?  Lockless commits makes
Lucene "write once" so this works around a number of file system
"quirks".  Still it'd be good to get to your root cause.

Is the index stored on a remote (Windows CIFS) mount?  Or is it stored
on a local (Mac OS HFS+) drive?

> Do you know if the lockless commits will be included in the next stable 
> release?

Yes this will be included in 2.1 -- I think 2.1 will be released soon
(there's been discussions on the dev list to get the release process
started soon).

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 01 22:48:40 2007
Return-Path: <java-user-return-25886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70173 invoked from network); 1 Feb 2007 22:48:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2007 22:48:39 -0000
Received: (qmail 55547 invoked by uid 500); 1 Feb 2007 22:48:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55494 invoked by uid 500); 1 Feb 2007 22:48:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55460 invoked by uid 99); 1 Feb 2007 22:48:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 14:48:36 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.228 as permitted sender)
Received: from [66.249.82.228] (HELO wx-out-0506.google.com) (66.249.82.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 14:48:26 -0800
Received: by wx-out-0506.google.com with SMTP id i29so657877wxd
        for <java-user@lucene.apache.org>; Thu, 01 Feb 2007 14:48:06 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=fJjUrWHXm+sxrPx3gemhmv/gLDZc48pKl5ak2cdpnpLhxMiBZ51pqry8o3d18Kjf3WHlIIrFNpEh6WvCtHQ3QO3E6aJ+tDpfMjBDwX3rq3Sg9sBk7kapbsR0xXydIFwylVHAioASNGUtKGcFA68dbkECF0s7gs08lUuoMnQRFcM=
Received: by 10.70.57.2 with SMTP id f2mr4761323wxa.1170370086039;
        Thu, 01 Feb 2007 14:48:06 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id i38sm6573749wxd.2007.02.01.14.48.04;
        Thu, 01 Feb 2007 14:48:04 -0800 (PST)
Message-ID: <45C26E0C.4010607@gmail.com>
Date: Thu, 01 Feb 2007 17:47:40 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: bad queryparser bug
References: <e994873a0702011257j410f66e1vbdc823e67830ec1a@mail.gmail.com>	 <e994873a0702011304y4abe606dud2d2ea89c0b10a33@mail.gmail.com> <e994873a0702011403h2140387cg592ce42b561bc30a@mail.gmail.com>
In-Reply-To: <e994873a0702011403h2140387cg592ce42b561bc30a@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

This is a ton of discussion on this if you search the lucene user list 
(QueryParser and precendence and the 'binary' operators). I have seen 
many mentions of the precedence parser still having open issues but no 
mention of what those issues are.

Peter Keegan wrote:
> OK, I see that I'm not the first to discover this behavior of 
> QueryParser.
> Can anyone vouch for the integrity of the PrecedenceQueryParser here:
>
> http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/miscellaneous/src/java/org/apache/lucene/queryParser/precedence/ 
>
>
> Thanks,
> Peter
>
> On 2/1/07, Peter Keegan <peterlkeegan@gmail.com> wrote:
>>
>> Correction:
>>
>> The query parser produces the correct query with the parenthesis.
>> But, I'm still looking for a fix for this. I could use some advice on
>> where to look in QueryParser to fix this.
>>
>> Thanks,
>> Peter
>>
>> On 2/1/07, Peter Keegan <peterlkeegan@gmail.com> wrote:
>> >
>> > I have discovered a serious bug in QueryParser. The following query:
>> > contents:sales && contents:marketing || contents:industrial &&
>> > contents:sales
>> >
>> > is parsed as:
>> > +contents:sales +contents:marketing +contents:industrial 
>> +contents:sales
>> >
>> >
>> > The same parsed query occurs even with parenthesis:
>> > (contents:sales && contents:marketing) || (contents:industrial &&
>> > contents:sales)
>> >
>> > Is there any way around this bug?
>> >
>> > Thanks,
>> > Peter
>> >
>> >
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 01 23:22:18 2007
Return-Path: <java-user-return-25887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78638 invoked from network); 1 Feb 2007 23:22:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2007 23:22:18 -0000
Received: (qmail 6365 invoked by uid 500); 1 Feb 2007 23:22:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6343 invoked by uid 500); 1 Feb 2007 23:22:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6332 invoked by uid 99); 1 Feb 2007 23:22:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 15:22:17 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [128.83.248.27] (HELO fiat.ischool.utexas.edu) (128.83.248.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 15:22:07 -0800
Received: from [128.83.248.226] (dhcp-248-226 [128.83.248.226])
	(authenticated bits=0)
	by fiat.ischool.utexas.edu (8.12.11.20060308/8.12.11) with ESMTP id l11NLipH004342
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <java-user@lucene.apache.org>; Thu, 1 Feb 2007 17:21:44 -0600
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <45C26775.4090906@mikemccandless.com>
References: <e994873a0702011257j410f66e1vbdc823e67830ec1a@mail.gmail.com> <DBBCE192-02E6-4D96-B7EA-D34CC9A44936@ibiblio.org> <45C25CB5.3040402@mikemccandless.com> <8F6A2EB4-6AC9-4734-9CDF-B8792DDD3686@ibiblio.org> <45C26775.4090906@mikemccandless.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <F9BA5961-465F-4161-88B7-77E04E0216B9@ibiblio.org>
Content-Transfer-Encoding: 7bit
From: Miles Efron <mefron@ibiblio.org>
Subject: Re: trouble with permissions?
Date: Thu, 1 Feb 2007 17:21:12 -0600
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Scanned: ClamAV 0.88.7/2514/Thu Feb  1 15:50:10 2007 on sentra.ischool.utexas.edu
X-Virus-Status: Clean
X-iSchool-MailScanner-Info: Contact broot@ischool.utexas.edu for help
X-iSchool-MailScanner: Found to be clean
X-iSchool-MailScanner-From: mefron@ibiblio.org
X-Virus-Checked: Checked by ClamAV on apache.org

I really don't know why os x could have induced those kinds of  
filesystem issues.  i assumed that since i had switched over to the  
intel architecture that perhaps something was going on with the  
JVM...everything involved in the process was mac; local filesystem, etc.

but i'm fairly sure that the trunk code has fixed the problem.  i ran  
two 'offending' bits of code and checked their results.  not only did  
they finish (quite a feat today), but they did so correctly.

-Miles

On Feb 1, 2007, at 4:19 PM, Michael McCandless wrote:

> Miles Efron wrote:
>
>> You rule.  Swapping out the nightly build seems to have fixed the  
>> problem... tried it on two problematic cases and both worked.
>
> Phew!
>
>> For the record, I'm running mac os 10.4.8.
>
> Uh-oh, I can't explain why you would hit these errors on OS X 10.4.8;
> we have only seen these one Windows.
>
> Are you sure switching to trunk has fixed it?  Lockless commits makes
> Lucene "write once" so this works around a number of file system
> "quirks".  Still it'd be good to get to your root cause.
>
> Is the index stored on a remote (Windows CIFS) mount?  Or is it stored
> on a local (Mac OS HFS+) drive?
>
>> Do you know if the lockless commits will be included in the next  
>> stable release?
>
> Yes this will be included in 2.1 -- I think 2.1 will be released soon
> (there's been discussions on the dev list to get the release process
> started soon).
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 01 23:33:39 2007
Return-Path: <java-user-return-25888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83286 invoked from network); 1 Feb 2007 23:33:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2007 23:33:38 -0000
Received: (qmail 30589 invoked by uid 500); 1 Feb 2007 23:33:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30569 invoked by uid 500); 1 Feb 2007 23:33:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30558 invoked by uid 99); 1 Feb 2007 23:33:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 15:33:38 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 15:33:28 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id 142C79E11B
	for <java-user@lucene.apache.org>; Thu,  1 Feb 2007 18:33:07 -0500 (EST)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by out1.internal (MEProxy); Thu, 01 Feb 2007 18:33:07 -0500
X-Sasl-enc: 8mU2OUTVmWw1x6sWcqFzW4HD5IZWnEZidIsFJOdFGwd6 1170372786
Received: from [10.17.4.90] (pool-71-162-112-251.bstnma.fios.verizon.net [71.162.112.251])
	by mail.messagingengine.com (Postfix) with ESMTP id BED1F24BC0
	for <java-user@lucene.apache.org>; Thu,  1 Feb 2007 18:33:06 -0500 (EST)
Message-ID: <45C278AF.1080701@mikemccandless.com>
Date: Thu, 01 Feb 2007 18:33:03 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: trouble with permissions?
References: <e994873a0702011257j410f66e1vbdc823e67830ec1a@mail.gmail.com> <DBBCE192-02E6-4D96-B7EA-D34CC9A44936@ibiblio.org> <45C25CB5.3040402@mikemccandless.com> <8F6A2EB4-6AC9-4734-9CDF-B8792DDD3686@ibiblio.org> <45C26775.4090906@mikemccandless.com> <F9BA5961-465F-4161-88B7-77E04E0216B9@ibiblio.org>
In-Reply-To: <F9BA5961-465F-4161-88B7-77E04E0216B9@ibiblio.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Miles Efron wrote:
> I really don't know why os x could have induced those kinds of 
> filesystem issues.  i assumed that since i had switched over to the 
> intel architecture that perhaps something was going on with the 
> JVM...everything involved in the process was mac; local filesystem, etc.
> 
> but i'm fairly sure that the trunk code has fixed the problem.  i ran 
> two 'offending' bits of code and checked their results.  not only did 
> they finish (quite a feat today), but they did so correctly.

OK I will keep my fingers crossed that there isn't another issue
lurking :)

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 02 00:14:28 2007
Return-Path: <java-user-return-25889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93360 invoked from network); 2 Feb 2007 00:14:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2007 00:14:14 -0000
Received: (qmail 10860 invoked by uid 500); 2 Feb 2007 00:14:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10837 invoked by uid 500); 2 Feb 2007 00:14:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10826 invoked by uid 99); 2 Feb 2007 00:14:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 16:14:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [209.68.5.15] (HELO relay01.pair.com) (209.68.5.15)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 01 Feb 2007 16:14:05 -0800
Received: (qmail 54310 invoked from network); 2 Feb 2007 00:13:44 -0000
Received: from unknown (HELO ?192.168.1.30?) (unknown)
  by unknown with SMTP; 2 Feb 2007 00:13:44 -0000
X-pair-Authenticated: 68.236.126.81
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Transfer-Encoding: 7bit
Message-Id: <FFC97DD6-07B5-4EF0-B863-13BAAAE7456B@variogr.am>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Brian Whitman <brian.whitman@variogr.am>
Subject: searching by field's TF vector (not MoreLikeThis)
Date: Thu, 1 Feb 2007 19:13:43 -0500
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

I'm looking for a way to search by a field's internal TF vector  
representation.

MoreLikeThis does not seem to be what I want-- it constructs a text  
query based on the top scoring TF-IDF terms. I want to query by TF  
vector directly, bypassing the tokens.

Lucene understandably has knowledge of the cosine dist of these  
vectors -- does it expose it in such a way that I can query the topN  
results from a field's TF vector?








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 02 00:28:39 2007
Return-Path: <java-user-return-25890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97385 invoked from network); 2 Feb 2007 00:28:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2007 00:28:38 -0000
Received: (qmail 26246 invoked by uid 500); 2 Feb 2007 00:28:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26217 invoked by uid 500); 2 Feb 2007 00:28:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26204 invoked by uid 99); 2 Feb 2007 00:28:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 16:28:38 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.22] (HELO web50007.mail.yahoo.com) (206.190.38.22)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 01 Feb 2007 16:28:28 -0800
Received: (qmail 3192 invoked by uid 60001); 2 Feb 2007 00:28:06 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=M6uTtSfCvq1jMqZRjz12uXJ9iICFZQwSHizSXS9vNAUpNS7ag/TRONMcz8sr9aECZCwJatrnVcDyZo1YbBW8n28Q0GON3CE/UY1A4hjqxUa/A2BObB344EkGNc5j5nbg4VlB1S65GejlAp1hp7zuv+kxmRoki1RWhFF6F+nSOUE=;
X-YMail-OSG: bHNKAZUVM1lcXu1zsy.of76gE95GMGjY1FGelluU6mJI0z3Sx1qBccO0Hxlbfto8..7hE53nHXmY08NWLTLTTuy7iO3OngEaSzorEnhrNbmTdx2h2HD4nmeDM3aMBVDNP6nmoUEpXeWb3sU-
Received: from [76.215.110.4] by web50007.mail.yahoo.com via HTTP; Thu, 01 Feb 2007 16:28:06 PST
Date: Thu, 1 Feb 2007 16:28:06 -0800 (PST)
From: Josh Joy <joshj551@yahoo.com>
Subject: Lucene Javadoc Exception - cause?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <684916.2940.qm@web50007.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I was implementing some calls to Lucene, though was
curious if there was 
some documentation I was missing that indicated why a
method throws an 
exception.

Example, IndexReader - deleteDocuments() - what is the
root cause as to 
why it throws IOException?

I'm trying to utilize this info to determine my
exception handling 
strategy for all my Lucene API calls (should I fail,
retry, ignore, etc)

Thanks,
Josh

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 02 00:56:25 2007
Return-Path: <java-user-return-25891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4297 invoked from network); 2 Feb 2007 00:56:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2007 00:56:24 -0000
Received: (qmail 47536 invoked by uid 500); 2 Feb 2007 00:56:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46982 invoked by uid 500); 2 Feb 2007 00:56:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46969 invoked by uid 99); 2 Feb 2007 00:56:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 16:56:24 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 16:56:15 -0800
Received: by ug-out-1314.google.com with SMTP id k40so646591ugc
        for <java-user@lucene.apache.org>; Thu, 01 Feb 2007 16:55:54 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=UXhA8cGl1RpIEWNHaazG8AuBnNIUvFofuThHMWkMD5EpI02KsOFkpjycScrBzNXswA/9xDjZDQfyQp/0vobWEYGGNl+v83sA1CXhL2l2Eyy9huBjpV5v4pqB0vEVxgU7BvNGJUln3E7skzdU4mE4Qg4dJDXAFShCH+H/Z018tNs=
Received: by 10.82.148.7 with SMTP id v7mr914724bud.1170377753058;
        Thu, 01 Feb 2007 16:55:53 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Thu, 1 Feb 2007 16:55:52 -0800 (PST)
Message-ID: <359a92830702011655pe59b3c6yfb481c8ad7ced9eb@mail.gmail.com>
Date: Thu, 1 Feb 2007 19:55:52 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Javadoc Exception - cause?
In-Reply-To: <684916.2940.qm@web50007.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16378_27288824.1170377752920"
References: <684916.2940.qm@web50007.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_16378_27288824.1170377752920
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, in the normal course of events, things like deleteDocuments(Term)
shouldn't throw an exception unless I've screwed up. In my experience,
Lucene usually gracefully handles "normal" error cases. In this case, there
not being any underlying documents that match on Term is, I believe, handled
by just returning 0 for the documents deleted.

If the underlying Directory is closed, say, or the index is corrupted or you
might get an error thrown. Neither would be safe to ignore.

Except for a single case in my experience, exceptions are thrown by Lucene
because of a failure that retrying won't solve and ignoring would be a bad
idea. Good programming practice precludes throwing exceptions for
*recoverable* problems.

The only case I can remember where Lucene threw what I thought was an
inappropriate exception was calling a WildcardEnum with a term that had no
wildcard, and that's since been fixed in the trunk.

catching and ignoring errors is not something I'd recommend unless there is
*good* reason to believe that the underlying cause will fix itself. That's
much more common in, say, communications programs where the network can be
flaky than it is in programs like Lucene.

Best
Erick



On 2/1/07, Josh Joy <joshj551@yahoo.com> wrote:
>
> Hi,
>
> I was implementing some calls to Lucene, though was
> curious if there was
> some documentation I was missing that indicated why a
> method throws an
> exception.
>
> Example, IndexReader - deleteDocuments() - what is the
> root cause as to
> why it throws IOException?
>
> I'm trying to utilize this info to determine my
> exception handling
> strategy for all my Lucene API calls (should I fail,
> retry, ignore, etc)
>
> Thanks,
> Josh
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_16378_27288824.1170377752920--

From java-user-return-25892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 02 04:47:32 2007
Return-Path: <java-user-return-25892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75937 invoked from network); 2 Feb 2007 04:47:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2007 04:47:32 -0000
Received: (qmail 12747 invoked by uid 500); 2 Feb 2007 04:47:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12721 invoked by uid 500); 2 Feb 2007 04:47:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12710 invoked by uid 99); 2 Feb 2007 04:47:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 20:47:30 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of sairaj.sunil@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 20:47:21 -0800
Received: by nf-out-0910.google.com with SMTP id a27so1042164nfc
        for <java-user@lucene.apache.org>; Thu, 01 Feb 2007 20:47:00 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=o1w5o09/YGTbk29AFct7MXpi57YuB0CA4WMDr2/C1IOvKnb1Sfv4a47tlxzgny/Xyp17DAvOdoJ8AwCiTLwu/SPd4vS0mJuAYtFbBZQwlByEXexTy/7VUo37gJMpL2EFrLW8GugK6cAZyjj981UZKLVhY2Bo2uGmaMU6JAU654Y=
Received: by 10.82.187.16 with SMTP id k16mr1068184buf.1170391619573;
        Thu, 01 Feb 2007 20:46:59 -0800 (PST)
Received: by 10.82.100.19 with HTTP; Thu, 1 Feb 2007 20:46:59 -0800 (PST)
Message-ID: <fae460120702012046l2c884f8fu4d2561bdfb853ee7@mail.gmail.com>
Date: Fri, 2 Feb 2007 10:16:59 +0530
From: "Sairaj Sunil" <sairaj.sunil@gmail.com>
To: java-user@lucene.apache.org
Subject: Simple QueryParser question
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20312_9918458.1170391619548"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_20312_9918458.1170391619548
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
This is a newbie-level question.

I want to construct a query, which returns the results sorted as follows:
1. Results having "all the terms" of the query string in title should be
listed first
2. Results having  "any of the terms" of the query string in the title
should be listed next.
3. Results having "all the terms"  of the query string in summary should be
listed next
4. Results having "any of the terms" of the query string in the summary
should come last.

How do I construct the query using QueryParser. The fields to be searched
are "title", "summary".
Please help me
-- 
Sairaj Sunil

------=_Part_20312_9918458.1170391619548--

From java-user-return-25893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 02 06:22:15 2007
Return-Path: <java-user-return-25893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94827 invoked from network); 2 Feb 2007 06:22:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2007 06:22:14 -0000
Received: (qmail 81371 invoked by uid 500); 2 Feb 2007 06:22:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81334 invoked by uid 500); 2 Feb 2007 06:22:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81323 invoked by uid 99); 2 Feb 2007 06:22:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 22:22:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 22:22:06 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 76C325B763; Thu,  1 Feb 2007 22:21:46 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 702127F403
	for <java-user@lucene.apache.org>; Thu,  1 Feb 2007 22:21:46 -0800 (PST)
Date: Thu, 1 Feb 2007 22:21:46 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Use of only a prohibit search
In-Reply-To: <8747868.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0702012219050.31871@hal.rescomp.berkeley.edu>
References: <8747868.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


Adding a MatchAllDocsQuery instance to your boolean query if all clauses
are prohibited is in fact still the best way to do a purely negative
query.

the trunk makes this easier by adding MatchAllDocsQuery syntax to the
query parser...

			*:* -description:plot



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 02 06:31:37 2007
Return-Path: <java-user-return-25894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96310 invoked from network); 2 Feb 2007 06:31:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2007 06:31:36 -0000
Received: (qmail 89365 invoked by uid 500); 2 Feb 2007 06:31:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89341 invoked by uid 500); 2 Feb 2007 06:31:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89330 invoked by uid 99); 2 Feb 2007 06:31:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 22:31:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 22:31:25 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id C3B425B763; Thu,  1 Feb 2007 22:31:04 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id B978D7F403
	for <java-user@lucene.apache.org>; Thu,  1 Feb 2007 22:31:04 -0800 (PST)
Date: Thu, 1 Feb 2007 22:31:04 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: bad queryparser bug
In-Reply-To: <e994873a0702011257j410f66e1vbdc823e67830ec1a@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0702012230090.31871@hal.rescomp.berkeley.edu>
References: <e994873a0702011257j410f66e1vbdc823e67830ec1a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


please do not cross post questions about using the Lucene API to both the
user and dev mailing lists -- the user list is the correct place to ask
questions about behavior you are seeing that you think may be a bug.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 02 06:34:29 2007
Return-Path: <java-user-return-25895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96828 invoked from network); 2 Feb 2007 06:34:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2007 06:34:26 -0000
Received: (qmail 95088 invoked by uid 500); 2 Feb 2007 06:34:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94889 invoked by uid 500); 2 Feb 2007 06:34:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94871 invoked by uid 99); 2 Feb 2007 06:34:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 22:34:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 22:34:17 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id AA1845B763; Thu,  1 Feb 2007 22:33:56 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 933337F403
	for <java-user@lucene.apache.org>; Thu,  1 Feb 2007 22:33:56 -0800 (PST)
Date: Thu, 1 Feb 2007 22:33:56 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: bad queryparser bug
In-Reply-To: <e994873a0702011304y4abe606dud2d2ea89c0b10a33@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0702012231230.31871@hal.rescomp.berkeley.edu>
References: <e994873a0702011257j410f66e1vbdc823e67830ec1a@mail.gmail.com>
 <e994873a0702011304y4abe606dud2d2ea89c0b10a33@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: The query parser produces the correct query with the parenthesis.
: But, I'm still looking for a fix for this. I could use some advice on where
: to look in QueryParser to fix this.

the best advice i can give you: don't use the binary operators.

  * Lucene is not a boolean logic system
  * BooleanQuery does not impliment boolean logic
  * QueryParser is not a boolean language parser

(If i could go back in time and stop the AND/OR/NOT/&&/|| "aliases" from
being added to the QueryParser -- i would)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 02 06:41:11 2007
Return-Path: <java-user-return-25896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98433 invoked from network); 2 Feb 2007 06:41:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2007 06:41:10 -0000
Received: (qmail 2223 invoked by uid 500); 2 Feb 2007 06:41:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2187 invoked by uid 500); 2 Feb 2007 06:41:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2176 invoked by uid 99); 2 Feb 2007 06:41:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 22:41:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 22:41:01 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 753815B763; Thu,  1 Feb 2007 22:40:41 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 70D0D7F403
	for <java-user@lucene.apache.org>; Thu,  1 Feb 2007 22:40:41 -0800 (PST)
Date: Thu, 1 Feb 2007 22:40:41 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Boost/Scoring question
In-Reply-To: <45C1A9FE.6070309@teamware.com>
Message-ID: <Pine.LNX.4.58.0702012236590.31871@hal.rescomp.berkeley.edu>
References: <45BFDAAD.9070900@teamware.com> <Pine.LNX.4.58.0701301624020.24685@hal.rescomp.berkeley.edu>
 <45BFF305.60707@teamware.com> <Pine.LNX.4.58.0701311543150.16454@hal.rescomp.berkeley.edu>
 <45C1A9FE.6070309@teamware.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: It's the index time boost, rather than query time boost.  This short example
: shows the behaviour of searches for

Ahhhh... index boosts! ... totally didn't occur to me that was what you
were talking about.  Yes: it makes sense that if you give a field an index
boost of 0.0f you won't be able to query with Hits on that field for that
doc: with a field boost of 0 your fieldNorm is going to be 0, which is
going to make any score from that field a 0.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 02 06:44:49 2007
Return-Path: <java-user-return-25897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99075 invoked from network); 2 Feb 2007 06:44:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2007 06:44:48 -0000
Received: (qmail 4913 invoked by uid 500); 2 Feb 2007 06:44:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4883 invoked by uid 500); 2 Feb 2007 06:44:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4872 invoked by uid 99); 2 Feb 2007 06:44:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 22:44:48 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Feb 2007 22:44:40 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 7B8B45B763; Thu,  1 Feb 2007 22:44:20 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 724527F403
	for <java-user@lucene.apache.org>; Thu,  1 Feb 2007 22:44:20 -0800 (PST)
Date: Thu, 1 Feb 2007 22:44:20 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: problem with field.setboost(5.0f) on lucene 2.00
In-Reply-To: <8748508.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0702012242070.31871@hal.rescomp.berkeley.edu>
References: <8746530.post@talk.nabble.com> <359a92830702010512n71c63d2cia1a5622126b3ebd1@mail.gmail.com>
 <8748508.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: it still dont make any change on the boost value, for information i use
: luke.jar to see if the value had change

i'm not sure what you mean you're using luke to see if hte value has
changed ... boosts aren't stored in the index (they are used to compute a
fieldNorm) so there's nothing for luke to show you (but i haven't played
with luke extensively so i'm not sure what you might be looking at that
relates to boosts)

please note the javadocs for setBoost and getBoost...

public void setBoost(float boost)

    Sets the boost factor hits on this field. This value will be
multiplied into the score of all hits on this this field of this document.

    The boost is multiplied by Document.getBoost() of the document
containing this field. If a document has multiple fields with the same
name, all such values are multiplied together. This product is then
multipled by the value Similarity.lengthNorm(String,int), and rounded by
Similarity.encodeNorm(float) before it is stored in the index. One should
attempt to ensure that this product does not overflow the range of that
encoding.

public float getBoost()

    Returns the boost factor for hits for this field.

    The default value is 1.0.

    Note: this value is not stored directly with the document in the
index. Documents returned from IndexReader.document(int) and Hits.doc(int)
may thus not have the same value present as when this field was indexed.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 02 10:14:42 2007
Return-Path: <java-user-return-25898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62824 invoked from network); 2 Feb 2007 10:14:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2007 10:14:41 -0000
Received: (qmail 2222 invoked by uid 500); 2 Feb 2007 10:14:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2198 invoked by uid 500); 2 Feb 2007 10:14:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2186 invoked by uid 99); 2 Feb 2007 10:14:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 02:14:40 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 02:14:31 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id l12AE1lG026734
	for <java-user@lucene.apache.org>; Fri, 2 Feb 2007 12:14:01 +0200
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz with ESMTP
	 id m22cd7l6; 2 Feb 2007 12:13:00 +0200
Message-ID: <45C30ED9.9040300@teamware.com>
Date: Fri, 02 Feb 2007 21:13:45 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Boost/Scoring question
References: <45BFDAAD.9070900@teamware.com> <Pine.LNX.4.58.0701301624020.24685@hal.rescomp.berkeley.edu> <45BFF305.60707@teamware.com> <Pine.LNX.4.58.0701311543150.16454@hal.rescomp.berkeley.edu> <45C1A9FE.6070309@teamware.com> <Pine.LNX.4.58.0702012236590.31871@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0702012236590.31871@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Fri, 02 Feb 2007 12:14:01 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=-0.185,
	required 5, autolearn=not spam, BAYES_40 -0.18)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks a lot for your answers Hoss.  This list is really well supported!
Antony


Chris Hostetter wrote:
> : It's the index time boost, rather than query time boost.  This short example
> : shows the behaviour of searches for
> 
> Ahhhh... index boosts! ... totally didn't occur to me that was what you
> were talking about.  Yes: it makes sense that if you give a field an index
> boost of 0.0f you won't be able to query with Hits on that field for that
> doc: with a field boost of 0 your fieldNorm is going to be 0, which is
> going to make any score from that field a 0.
> 
> 
> 
> 
> -Hoss



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 02 10:14:55 2007
Return-Path: <java-user-return-25899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62914 invoked from network); 2 Feb 2007 10:14:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2007 10:14:54 -0000
Received: (qmail 3690 invoked by uid 500); 2 Feb 2007 10:14:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3662 invoked by uid 500); 2 Feb 2007 10:14:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3651 invoked by uid 99); 2 Feb 2007 10:14:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 02:14:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 02:14:43 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id D61359DD35
	for <java-user@lucene.apache.org>; Fri,  2 Feb 2007 05:14:21 -0500 (EST)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by out1.internal (MEProxy); Fri, 02 Feb 2007 05:14:21 -0500
X-Sasl-enc: 67STtQRmWMMa138ajzNUPh7Bv7MWiwzodH3Qig6JbTYK 1170411261
Received: from [10.17.4.90] (pool-71-162-112-251.bstnma.fios.verizon.net [71.162.112.251])
	by mail.messagingengine.com (Postfix) with ESMTP id 649C41083A
	for <java-user@lucene.apache.org>; Fri,  2 Feb 2007 05:14:21 -0500 (EST)
Message-ID: <45C30EF9.3000801@mikemccandless.com>
Date: Fri, 02 Feb 2007 05:14:17 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene Javadoc Exception - cause?
References: <684916.2940.qm@web50007.mail.yahoo.com>
In-Reply-To: <684916.2940.qm@web50007.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Josh Joy wrote:

> I was implementing some calls to Lucene, though was
> curious if there was 
> some documentation I was missing that indicated why a
> method throws an 
> exception.
> 
> Example, IndexReader - deleteDocuments() - what is the
> root cause as to 
> why it throws IOException?
> 
> I'm trying to utilize this info to determine my
> exception handling 
> strategy for all my Lucene API calls (should I fail,
> retry, ignore, etc)

I agree we don't have enough documentation around why an IOException
might be thrown for the various Lucene methods.

For your example (IndexReader.deleteDocuments) there are some
"interesting" cases that I think we should call out:

   * Another "writer" (IndexWriter or IndexReader with pending deletes)
     is already open against the index (this will be the "Lock obtain
     timed out" IOException).

   * The reader is "stale" meaning another writer has committed changes
     to the index since this reader was opened.

Then of course index corruption, transient IO problems, permission
problems, etc, can lead to IOExceptions.

I will open a JIRA issue.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 02 13:38:12 2007
Return-Path: <java-user-return-25900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13378 invoked from network); 2 Feb 2007 13:38:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2007 13:38:11 -0000
Received: (qmail 76131 invoked by uid 500); 2 Feb 2007 13:38:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76105 invoked by uid 500); 2 Feb 2007 13:38:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76094 invoked by uid 99); 2 Feb 2007 13:38:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 05:38:11 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of peterlkeegan@gmail.com designates 64.233.162.236 as permitted sender)
Received: from [64.233.162.236] (HELO nz-out-0506.google.com) (64.233.162.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 05:38:02 -0800
Received: by nz-out-0506.google.com with SMTP id i1so820827nzh
        for <java-user@lucene.apache.org>; Fri, 02 Feb 2007 05:37:41 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=WG+gnYh96jMdG4qoTUNBMG0P7RUqvPLUEQokJNMwSYKRpU3ADXHYTXYRYe3GS/2m4sfcR1fV7cpFt7PwllHR7sAZFV3hSZZuPRDZBgWYQLGhrRJA15Lb+5lhQf7EuZVvygYzbnnkwQy7WubzGkOY3rd9TKLttmkWcHZfQDyNnJI=
Received: by 10.65.213.4 with SMTP id p4mr5945253qbq.1170423461094;
        Fri, 02 Feb 2007 05:37:41 -0800 (PST)
Received: by 10.65.150.17 with HTTP; Fri, 2 Feb 2007 05:37:40 -0800 (PST)
Message-ID: <e994873a0702020537k5762210ie7c9358dfb92bcde@mail.gmail.com>
Date: Fri, 2 Feb 2007 08:37:40 -0500
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: bad queryparser bug
In-Reply-To: <Pine.LNX.4.58.0702012231230.31871@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17472_17825632.1170423460953"
References: <e994873a0702011257j410f66e1vbdc823e67830ec1a@mail.gmail.com>
	 <e994873a0702011304y4abe606dud2d2ea89c0b10a33@mail.gmail.com>
	 <Pine.LNX.4.58.0702012231230.31871@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17472_17825632.1170423460953
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

> (If i could go back in time and stop the AND/OR/NOT/&&/|| "aliases" from
> being added to the QueryParser -- i would)

Yes, this is the cause of the confusion. Our users are accustomed to the
boolean logic syntax from a legacy search engine (also common to many other
engines). We'll have to convert them into native QueryParser syntax as
possible.

Sorry for the cross post.

Thanks,
Peter

On 2/2/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : The query parser produces the correct query with the parenthesis.
> : But, I'm still looking for a fix for this. I could use some advice on
> where
> : to look in QueryParser to fix this.
>
> the best advice i can give you: don't use the binary operators.
>
>   * Lucene is not a boolean logic system
>   * BooleanQuery does not impliment boolean logic
>   * QueryParser is not a boolean language parser
>
> (If i could go back in time and stop the AND/OR/NOT/&&/|| "aliases" from
> being added to the QueryParser -- i would)
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_17472_17825632.1170423460953--

From java-user-return-25901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 02 14:04:38 2007
Return-Path: <java-user-return-25901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21432 invoked from network); 2 Feb 2007 14:04:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2007 14:04:37 -0000
Received: (qmail 28787 invoked by uid 500); 2 Feb 2007 14:04:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28741 invoked by uid 500); 2 Feb 2007 14:04:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28701 invoked by uid 99); 2 Feb 2007 14:04:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 06:04:34 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,MIME_BOUND_NEXTPART
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.154.194.71] (HELO srs2na11.bgl.lu) (194.154.194.71)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 02 Feb 2007 06:04:25 -0800
Received: from spmwf02l.luinternal.fortis.bank (unverified) by srs2na12.domain
 (Content Technologies SMTPRS 4.2.10) with ESMTP id <T7d8f6841a50aaf150a159@srs2na12.domain> for <java-user@lucene.apache.org>;
 Fri, 2 Feb 2007 15:08:06 +0100
Received: from SPMWB02L.luinternal.fortis.bank ([10.172.252.140]) by spmwf02l.luinternal.fortis.bank with Microsoft SMTPSVC(6.0.3790.0);
	 Fri, 2 Feb 2007 15:03:51 +0100
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_NextPartTM-000-6224811a-daec-4d57-8bd1-f314e363184d"
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: Adding headlines, path
Date: Fri, 2 Feb 2007 15:03:50 +0100
Message-ID: <EBC8F228BDB35A4394D0BE53DA25248808A9A336@SPMWB02L.luinternal.fortis.bank>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: Adding headlines, path
Thread-Index: AcdG0vcuQD31HfxoRjKfov21WDOTGw==
From: "DECAFFMEYER MATHIEU" <MATHIEU.DECAFFMAYER@fortis.lu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 02 Feb 2007 14:03:51.0688 (UTC) FILETIME=[F7BE7880:01C746D2]
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPartTM-000-6224811a-daec-4d57-8bd1-f314e363184d
Content-Type: multipart/alternative; 
	boundary="----_=_NextPart_001_01C746D2.F6FAF6EA"

------_=_NextPart_001_01C746D2.F6FAF6EA
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi all,

I have simple questions for which I can't find an answer by googling :

1)
I want to add headlines for a document :

Field headlinesField =3D new Field("headlines", headlines,
Field.Store.YES, Field.Index.TOKENIZED);

But how do I separate the headlines between them ?

Let's say I want to add :
Strengths
Our clients
Solutions & service

Do I need to put a white space between them or a newline, ... ?

2)

What is the difference between the field path and the field url ?

url I guess is the url of the document as http://.......
but what is the field path ?


Thank u for any help !

__________________________________
   Matt



=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
Internet communications are not secure and therefore Fortis Banque Luxembou=
rg S.A. does not accept legal responsibility for the contents of this messa=
ge. The information contained in this e-mail is confidential and may be leg=
ally privileged. It is intended solely for the addressee. If you are not th=
e intended recipient, any disclosure, copying, distribution or any action t=
aken or omitted to be taken in reliance on it, is prohibited and may be unl=
awful. Nothing in the message is capable or intended to create any legally =
binding obligations on either party and it is not intended to provide legal=
 advice.
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D


------_=_NextPart_001_01C746D2.F6FAF6EA
Content-Type: text/html; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; charset=3Dus-ascii">
<META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version 6.5.7651.52">
<TITLE>Adding headlines, path</TITLE>
</HEAD>
<BODY>
<!-- Converted from text/rtf format -->

<P><FONT SIZE=3D2 FACE=3D"Arial">Hi all,</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial">I have simple questions for which I can't =
find an answer by googling :</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial">1)</FONT>

<BR><FONT SIZE=3D2 FACE=3D"Arial">I want to add headlines for a document :<=
/FONT>
</P>

<P><FONT COLOR=3D"#000000" SIZE=3D2 FACE=3D"Arial">Field</FONT><FONT SIZE=
=3D2 FACE=3D"Arial"> </FONT><FONT COLOR=3D"#000000" SIZE=3D2 FACE=3D"Arial"=
>headlinesField</FONT><FONT SIZE=3D2 FACE=3D"Arial"> </FONT><FONT COLOR=3D"=
#000000" SIZE=3D2 FACE=3D"Arial">=3D</FONT><FONT SIZE=3D2 FACE=3D"Arial"><B=
> </B></FONT><B><FONT COLOR=3D"#7F0055" SIZE=3D2 FACE=3D"Arial">new</FONT><=
/B><FONT SIZE=3D2 FACE=3D"Arial"> </FONT><FONT COLOR=3D"#000000" SIZE=3D2 F=
ACE=3D"Arial">Field(</FONT><FONT COLOR=3D"#2A00FF" SIZE=3D2 FACE=3D"Arial">=
&quot;headlines&quot;</FONT><FONT COLOR=3D"#000000" SIZE=3D2 FACE=3D"Arial"=
>,</FONT><FONT SIZE=3D2 FACE=3D"Arial"> </FONT><FONT COLOR=3D"#000000" SIZE=
=3D2 FACE=3D"Arial">headlines,</FONT><FONT SIZE=3D2 FACE=3D"Arial"> </FONT>=
<FONT COLOR=3D"#000000" SIZE=3D2 FACE=3D"Arial">Field.Store.YES,</FONT><FON=
T SIZE=3D2 FACE=3D"Arial"> </FONT><FONT COLOR=3D"#000000" SIZE=3D2 FACE=3D"=
Arial">Field.Index.TOKENIZED);</FONT>
</P>

<P><SPAN LANG=3D"fr-be"><FONT COLOR=3D"#000000" SIZE=3D2 FACE=3D"Arial">But=
 how do I separate the headlines between them ?</FONT></SPAN>
</P>

<P><SPAN LANG=3D"fr-be"><FONT COLOR=3D"#000000" SIZE=3D2 FACE=3D"Arial">Let=
's say I want to add :</FONT></SPAN>

<BR><SPAN LANG=3D"fr"><FONT SIZE=3D2 FACE=3D"Arial">Strengths<BR>
Our clients<BR>
Solutions &amp; service</FONT></SPAN>
</P>

<P><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Arial">Do I need to put a wh=
ite space between them or a newline, ... ?</FONT></SPAN>
</P>

<P><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Arial">2)</FONT></SPAN>
</P>

<P><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Arial">What is the differenc=
e between the field path and the field url ?</FONT></SPAN>
</P>

<P><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Arial">url I guess is the ur=
l of the document as </FONT></SPAN><A HREF=3D"http://"><SPAN LANG=3D"en-us"=
><U><FONT COLOR=3D"#0000FF" SIZE=3D2 FACE=3D"Arial">http://</FONT></U></SPA=
N></A><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Arial">.......</FONT></SP=
AN>

<BR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Arial">but what is the fiel=
d path ?</FONT></SPAN>
</P>
<BR>

<P><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Arial">Thank u for any help =
!</FONT></SPAN>
</P>

<P><B><SPAN LANG=3D"fr"><WBR><WBR><WBR><WBR><WBR><WBR><WBR><WBR><WBR><WBR><=
WBR><WBR><WBR><WBR><WBR><WBR><FONT COLOR=3D"#006699" SIZE=3D1 FACE=3D"Verda=
na">__________________________________</FONT></SPAN></B>

<BR><B><SPAN LANG=3D"fr"><FONT COLOR=3D"#006699" SIZE=3D1 FACE=3D"Verdana">=
&nbsp;&nbsp; Matt</FONT></SPAN></B><SPAN LANG=3D"fr"><I></I><I></I></SPAN><=
I><SPAN LANG=3D"en-us"></SPAN></I>
</P>

<CODE><FONT SIZE=3D3><BR>
<BR>
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D<BR>
Internet communications are not secure and therefore Fortis Banque Luxembou=
rg S.A. does not accept legal responsibility for the contents of this messa=
ge. The information contained in this e-mail is confidential and may be leg=
ally privileged. It is intended solely for the addressee. If you are not th=
e intended recipient, any disclosure, copying, distribution or any action t=
aken or omitted to be taken in reliance on it, is prohibited and may be unl=
awful. Nothing in the message is capable or intended to create any legally =
binding obligations on either party and it is not intended to provide legal=
 advice.<BR>
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D<BR>
</FONT></CODE>
</BODY>
</HTML>
------_=_NextPart_001_01C746D2.F6FAF6EA--


------=_NextPartTM-000-6224811a-daec-4d57-8bd1-f314e363184d
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------=_NextPartTM-000-6224811a-daec-4d57-8bd1-f314e363184d--


From java-user-return-25902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 02 14:35:39 2007
Return-Path: <java-user-return-25902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36659 invoked from network); 2 Feb 2007 14:35:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2007 14:35:30 -0000
Received: (qmail 94153 invoked by uid 500); 2 Feb 2007 14:34:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94061 invoked by uid 500); 2 Feb 2007 14:34:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93876 invoked by uid 99); 2 Feb 2007 14:34:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 06:34:38 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 06:34:27 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id C9FD030EFC17; Fri,  2 Feb 2007 09:34:06 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: *
Received: from [192.168.1.100] (va-76-1-135-191.dhcp.embarqhsd.net [76.1.135.191])
	by ehatchersolutions.com (Postfix) with ESMTP id 20A7330EFC16
	for <java-user@lucene.apache.org>; Fri,  2 Feb 2007 09:34:04 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <e994873a0702011403h2140387cg592ce42b561bc30a@mail.gmail.com>
References: <e994873a0702011257j410f66e1vbdc823e67830ec1a@mail.gmail.com> <e994873a0702011304y4abe606dud2d2ea89c0b10a33@mail.gmail.com> <e994873a0702011403h2140387cg592ce42b561bc30a@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <DBFAED10-4C58-4441-97BA-F13A9CE6967B@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: bad queryparser bug
Date: Fri, 2 Feb 2007 09:34:01 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.4 required=5.0 tests=BAYES_00,RCVD_IN_NJABL_DUL,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1


On Feb 1, 2007, at 5:03 PM, Peter Keegan wrote:
> OK, I see that I'm not the first to discover this behavior of  
> QueryParser.
> Can anyone vouch for the integrity of the PrecedenceQueryParser here:
>
> http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/ 
> miscellaneous/src/java/org/apache/lucene/queryParser/precedence/

PrecedenceQueryParser was my tinkering attempt to make it more  
logically handle precedence.  I don't recall the exact issues that  
occur, though a JIRA issue was just filed with one:

    <https://issues.apache.org/jira/browse/LUCENE-792>
    "NOT foo AND baz" is parsed as "-(+foo +baz)" instead of "-foo  
+bar".
    (I'm setting parser.setDefaultOperator 
(PrecedenceQueryParser.AND_OPERATOR) but the issue applies otherwise  
too.)

I believe the test case points out some potential issues.  In other  
words, PrecedenceQueryParser is a work-in-progress that I no longer  
am working on myself.  Improvements to it welcome.  Query parsing is  
tricky business!

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 02 15:06:00 2007
Return-Path: <java-user-return-25903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50551 invoked from network); 2 Feb 2007 15:05:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2007 15:05:59 -0000
Received: (qmail 71964 invoked by uid 500); 2 Feb 2007 15:05:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71859 invoked by uid 500); 2 Feb 2007 15:05:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71752 invoked by uid 99); 2 Feb 2007 15:05:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 07:05:47 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Mirko.Kaempf@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 02 Feb 2007 07:02:31 -0800
Received: (qmail 14978 invoked by uid 0); 2 Feb 2007 15:02:10 -0000
Received: from 217.184.8.244 by www020.gmx.net with HTTP;
 Fri, 02 Feb 2007 16:02:10 +0100 (CET)
Content-Transfer-Encoding: 8bit
Content-Type: text/plain; charset="iso-8859-1"
Date: Fri, 02 Feb 2007 16:02:10 +0100
From: =?iso-8859-1?Q?=22Mirko_K=E4mpf=22?= <Mirko.Kaempf@gmx.de>
Message-ID: <20070202150210.296700@gmx.net>
MIME-Version: 1.0
Subject: Prolems by lucene-2.0 integration into an existing java application
To: java-user@lucene.apache.org
X-Authenticated: #1134573
X-Flags: 0001
X-GMX-UID: Rzi2du1rODBoRYcuYmRM++c1Ji9SWlKH
X-Mailer: WWW-Mail 6100 (Global Message Exchange)
X-Priority: 3
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I am asking for help in the following problem:

With lucene-2.0 I developed a module to do a textsearch in a folder on the harddisk. Everything works fine. The module get the searchstring and returns a Vector with the filnemames for further proceedings. The tester is in the same project like the module.

Now I tryed to integergrate this modul in to my existing Application. The following error occurs:

--- ERRORRMESSAGE ---

class "org.apache.lucene.document.Field$Store"'s signer information does not match signer information of other classes in the same package

I understand what the error message says to me. 

BUT: I do not use any jar from lucene. I hoped to solve the problem by not using the lucen-jar files. So I loaded the source-distribution and the code compiles fine, but only in the module project it runs correctly.

Then I renamed the hole package with the module but id did not help.

What can I do to integrate lucene in to my application?

Thank you very much for any help

Mirko Kmpf



-- 
"Feel free" - 10 GB Mailbox, 100 FreeSMS/Monat ...
Jetzt GMX TopMail testen: http://www.gmx.net/de/go/topmail?ac=OM.GX.GX003K11713T4783a

-- 
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal fr Modem und ISDN: http://www.gmx.net/de/go/smartsurfer

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 02 15:38:54 2007
Return-Path: <java-user-return-25904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66182 invoked from network); 2 Feb 2007 15:38:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2007 15:38:53 -0000
Received: (qmail 78486 invoked by uid 500); 2 Feb 2007 15:38:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78326 invoked by uid 500); 2 Feb 2007 15:38:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78314 invoked by uid 99); 2 Feb 2007 15:38:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 07:38:53 -0800
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [130.89.4.34] (HELO mail.service.utwente.nl) (130.89.4.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 07:38:44 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: indexWriter
Date: Fri, 2 Feb 2007 16:38:22 +0100
Message-ID: <3F5099632A78C7488A80D6535C4F4E802662DF@EX01.service.utwente.nl>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: indexWriter
Thread-Index: AcdG4CwZNVdFBxc9SNeOc2Z0SC/a5g==
From: <e.j.w.vanbloem@student.utwente.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

Does anyone know why this does not work?
The fileDir is of the class File and points to an empty temp directory.
I tried switching true and false


import org.apache.lucene.index.IndexWriter;

File indexDir =3D new File("c:\temp");

IndexWriter writer =3D new IndexWriter(indexDir, new StandardAnalyzer(), =
false);


Regards,

Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 02 15:45:51 2007
Return-Path: <java-user-return-25905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69477 invoked from network); 2 Feb 2007 15:45:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2007 15:45:51 -0000
Received: (qmail 99029 invoked by uid 500); 2 Feb 2007 15:45:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98776 invoked by uid 500); 2 Feb 2007 15:45:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98765 invoked by uid 99); 2 Feb 2007 15:45:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 07:45:49 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.176.14] (HELO web26303.mail.ukl.yahoo.com) (217.146.176.14)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 02 Feb 2007 07:45:38 -0800
Received: (qmail 41906 invoked by uid 60001); 2 Feb 2007 15:45:17 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.fr;
  h=X-YMail-OSG:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=Gyoope/SRbJVmdWjCkpbd+gVB1wAPkYddycT2Vt/t/3YB7ra8AUtadZI04MEzCsi/CqE4yuqEAb+jh/wdzZusHve9GimFznreeNly79WzC3ZE3mnVAaHYPFCtqxBtMcNdQiO5mz9TsB8lFfB+uTAuyBCuWp+yKpDZX9YyEzwgZI=;
X-YMail-OSG: uEtbju4VM1me9lh76zkwln8rQqAICnLrLlRXezanGOXRaJLQl3sH0IP8mUZU2K7uD7wCZMStWu7IPl_Iokge2cvSBtkjZwpkT25yIDf7h6AzaOAwLV7TnFGP7wLhySjQTuB2esynF_ky
Received: from [168.224.1.14] by web26303.mail.ukl.yahoo.com via HTTP; Fri, 02 Feb 2007 16:45:16 CET
Date: Fri, 2 Feb 2007 16:45:16 +0100 (CET)
From: Virlouvet Olivier <meils2003@yahoo.fr>
Reply-To: ovt@acamaya.com
Subject: RE : indexWriter
To: java-user@lucene.apache.org
In-Reply-To: <3F5099632A78C7488A80D6535C4F4E802662DF@EX01.service.utwente.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1167607716-1170431116=:41275"
Content-Transfer-Encoding: 8bit
Message-ID: <859702.41275.qm@web26303.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1167607716-1170431116=:41275
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi Erik

   The \ must be escaped in the path, i.e : ...new File("c:\\temp");

Regards,
Olivier

e.j.w.vanbloem@student.utwente.nl a crit : Hello,

Does anyone know why this does not work?
The fileDir is of the class File and points to an empty temp directory.
I tried switching true and false


import org.apache.lucene.index.IndexWriter;

File indexDir = new File("c:\temp");

IndexWriter writer = new IndexWriter(indexDir, new StandardAnalyzer(), false);


Regards,

Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



 		
---------------------------------
 Dcouvrez une nouvelle faon d'obtenir des rponses  toutes vos questions ! Profitez des connaissances, des opinions et des expriences des internautes sur Yahoo! Questions/Rponses.
--0-1167607716-1170431116=:41275--

From java-user-return-25906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 02 15:58:48 2007
Return-Path: <java-user-return-25906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77177 invoked from network); 2 Feb 2007 15:58:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2007 15:58:48 -0000
Received: (qmail 38258 invoked by uid 500); 2 Feb 2007 15:58:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38231 invoked by uid 500); 2 Feb 2007 15:58:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38220 invoked by uid 99); 2 Feb 2007 15:58:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 07:58:47 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.226 as permitted sender)
Received: from [66.249.82.226] (HELO wx-out-0506.google.com) (66.249.82.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 07:58:37 -0800
Received: by wx-out-0506.google.com with SMTP id i29so873433wxd
        for <java-user@lucene.apache.org>; Fri, 02 Feb 2007 07:58:16 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=rCy3P1vIxzDuG/iwvnolkxYhjt0VCL5cenxroBamei/+gHW6i98b7UrQiQxLM1KCNDsuk3cvDk4r5IxlDH6Ysys9tI/7d7S195zTxbusCRkYYLkrPXZ/brkddsWcifSp+3qpCO2OM9I38O8QQ+mPVdbpipEPygT6arh8CcfiazE=
Received: by 10.90.89.5 with SMTP id m5mr5187176agb.1170431895593;
        Fri, 02 Feb 2007 07:58:15 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 26sm8771335wrl.2007.02.02.07.58.14;
        Fri, 02 Feb 2007 07:58:14 -0800 (PST)
Message-ID: <45C35F89.2040408@gmail.com>
Date: Fri, 02 Feb 2007 10:58:01 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Multiword Highlighting
References: <574156.14791.qm@web50307.mail.yahoo.com>
In-Reply-To: <574156.14791.qm@web50307.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I have been away from this for a week, but my interest has started 
building again. The whole spans implementation seems to work great for 
finding the actual hits but there is a somewhat annoying limitation: 
because I am using Spans it seems I can only either highlight the entire 
found span or just the first and last token of the found span. First and 
last token works great for any span involving two query tokens (the only 
type I am concerned with at the moment), but a 3 word span would not 
have the middle word highlighted (unless you highlight the whole darn 
span). Other than that, the implementation is pretty darn simple and 
seems to work well. It wouldn't be too hard to set the option of 
complete span highlighting or first and last token.

Still interested in considering this for Contrib? Perhaps you want to 
wait for someone to merge the idea with the current Contrib highlighter 
(add fragments) as Mark H. suggested in his last email on the subject. 
Or there just may not be much interest -- the other recent highlighters 
haven't really gone anywhere that I have seen (though I don't think they 
attempted 'actual' hit highlighting).

If there is interest, suggested package name?

Otis Gospodnetic wrote:
> For what it's worth Mark (Miller), there *is* a need for "just highlight the query terms without trying to get excerpts" functionality - something a la Google cache (different colours...mmm, nice).  I've had people ask me for this before, and I know I could use this functionality, too.  Please contrib to contrib/ if you end up working on this.
>
> Otis
> --
> Simpy -- http://www.simpy.com/ -- Tag.  Search.  Share.
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 02 16:02:15 2007
Return-Path: <java-user-return-25907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79579 invoked from network); 2 Feb 2007 16:02:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2007 16:02:15 -0000
Received: (qmail 49487 invoked by uid 500); 2 Feb 2007 16:02:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49449 invoked by uid 500); 2 Feb 2007 16:02:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49438 invoked by uid 99); 2 Feb 2007 16:02:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 08:02:14 -0800
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [130.89.4.34] (HELO mail.service.utwente.nl) (130.89.4.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 08:02:05 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: RE : indexWriter
Date: Fri, 2 Feb 2007 16:59:59 +0100
Message-ID: <3F5099632A78C7488A80D6535C4F4E802662E2@EX01.service.utwente.nl>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: RE : indexWriter
Thread-Index: AcdG4Tnp9Nhq5mcGQoe5YaWgtfvDPAAAfcmz
References: <859702.41275.qm@web26303.mail.ukl.yahoo.com>
From: <e.j.w.vanbloem@student.utwente.nl>
To: "<java-user"@lucene.apache.org
X-Virus-Checked: Checked by ClamAV on apache.org

I already tried that but does not help
do I also have to create a file in that dir? Or is it some other problem
=20
import org.apache.lucene.index.IndexWriter;

File indexDir =3D new File("c:\\temp");

IndexWriter writer =3D new IndexWriter(indexDir, new StandardAnalyzer(), =
false);

________________________________

Van: Virlouvet Olivier [mailto:meils2003@yahoo.fr]
Verzonden: vr 2-2-2007 16:45
Aan: java-user@lucene.apache.org
Onderwerp: RE : indexWriter



Hi Erik

   The \ must be escaped in the path, i.e : ...new File("c:\\temp");

Regards,
Olivier

e.j.w.vanbloem@student.utwente.nl a =E9crit : Hello,

Does anyone know why this does not work?
The fileDir is of the class File and points to an empty temp directory.
I tried switching true and false


import org.apache.lucene.index.IndexWriter;

File indexDir =3D new File("c:\temp");

IndexWriter writer =3D new IndexWriter(indexDir, new StandardAnalyzer(), =
false);


Regards,

Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



              =20
---------------------------------
 D=E9couvrez une nouvelle fa=E7on d'obtenir des r=E9ponses =E0 toutes =
vos questions ! Profitez des connaissances, des opinions et des =
exp=E9riences des internautes sur Yahoo! Questions/R=E9ponses.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 02 16:08:21 2007
Return-Path: <java-user-return-25908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82469 invoked from network); 2 Feb 2007 16:08:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2007 16:08:20 -0000
Received: (qmail 59183 invoked by uid 500); 2 Feb 2007 16:08:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58703 invoked by uid 500); 2 Feb 2007 16:08:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58692 invoked by uid 99); 2 Feb 2007 16:08:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 08:08:20 -0800
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of nileshbansal@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 08:08:11 -0800
Received: by ug-out-1314.google.com with SMTP id k40so806385ugc
        for <java-user@lucene.apache.org>; Fri, 02 Feb 2007 08:07:50 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=ImwYz9/Gk96+FAp42uo+CRxS2aagNDXRKzw6B692kknS/bXux9koV1Aj5BbEEsJr+GrV7A/Mpd0hcRxkDIfJWrNNf2QYKOJ6r8r2gzbchaeGAhsec7xkxcItLe7gZZuDLWLIGo2RcrWW3ggi9qoKuA4sCJkfRgyrpKxRcj6wD28=
Received: by 10.78.171.13 with SMTP id t13mr831685hue.1170432468465;
        Fri, 02 Feb 2007 08:07:48 -0800 (PST)
Received: by 10.78.47.19 with HTTP; Fri, 2 Feb 2007 08:07:48 -0800 (PST)
Message-ID: <f36128690702020807g51bb02aftff9205ad7c477383@mail.gmail.com>
Date: Fri, 2 Feb 2007 11:07:48 -0500
From: "Nilesh Bansal" <nileshbansal@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: RE : indexWriter
In-Reply-To: <3F5099632A78C7488A80D6535C4F4E802662E2@EX01.service.utwente.nl>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <859702.41275.qm@web26303.mail.ukl.yahoo.com>
	 <3F5099632A78C7488A80D6535C4F4E802662E2@EX01.service.utwente.nl>
X-Virus-Checked: Checked by ClamAV on apache.org

SGksCgpZb3UgZmlyc3QgbmVlZCB0byBpbml0aWFsaXplIHRoZSBkaXJlY3RvcnkgKHNpbmNlIGl0
J3MgZW1wdHkpLgp1c2UsCkluZGV4V3JpdGVyIHdyaXRlciA9IG5ldyBJbmRleFdyaXRlcihpbmRl
eERpciwgbmV3IFN0YW5kYXJkQW5hbHl6ZXIoKSwgdHJ1ZSk7CnRoZSBmaXJzdCB0aW1lIHlvdSBh
cmUgd3JpdGluZy4KCi1OaWxlc2gKCk9uIDIvMi8wNywgZS5qLncudmFuYmxvZW1Ac3R1ZGVudC51
dHdlbnRlLm5sCjxlLmoudy52YW5ibG9lbUBzdHVkZW50LnV0d2VudGUubmw+IHdyb3RlOgo+IEkg
YWxyZWFkeSB0cmllZCB0aGF0IGJ1dCBkb2VzIG5vdCBoZWxwCj4gZG8gSSBhbHNvIGhhdmUgdG8g
Y3JlYXRlIGEgZmlsZSBpbiB0aGF0IGRpcj8gT3IgaXMgaXQgc29tZSBvdGhlciBwcm9ibGVtCj4K
PiBpbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguSW5kZXhXcml0ZXI7Cj4KPiBGaWxlIGlu
ZGV4RGlyID0gbmV3IEZpbGUoImM6XFx0ZW1wIik7Cj4KPiBJbmRleFdyaXRlciB3cml0ZXIgPSBu
ZXcgSW5kZXhXcml0ZXIoaW5kZXhEaXIsIG5ldyBTdGFuZGFyZEFuYWx5emVyKCksIGZhbHNlKTsK
Pgo+IF9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCj4KPiBWYW46IFZpcmxvdXZldCBP
bGl2aWVyIFttYWlsdG86bWVpbHMyMDAzQHlhaG9vLmZyXQo+IFZlcnpvbmRlbjogdnIgMi0yLTIw
MDcgMTY6NDUKPiBBYW46IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZwo+IE9uZGVyd2VycDog
UkUgOiBpbmRleFdyaXRlcgo+Cj4KPgo+IEhpIEVyaWsKPgo+ICAgIFRoZSBcIG11c3QgYmUgZXNj
YXBlZCBpbiB0aGUgcGF0aCwgaS5lIDogLi4ubmV3IEZpbGUoImM6XFx0ZW1wIik7Cj4KPiBSZWdh
cmRzLAo+IE9saXZpZXIKPgo+IGUuai53LnZhbmJsb2VtQHN0dWRlbnQudXR3ZW50ZS5ubCBhIMOp
Y3JpdCA6IEhlbGxvLAo+Cj4gRG9lcyBhbnlvbmUga25vdyB3aHkgdGhpcyBkb2VzIG5vdCB3b3Jr
Pwo+IFRoZSBmaWxlRGlyIGlzIG9mIHRoZSBjbGFzcyBGaWxlIGFuZCBwb2ludHMgdG8gYW4gZW1w
dHkgdGVtcCBkaXJlY3RvcnkuCj4gSSB0cmllZCBzd2l0Y2hpbmcgdHJ1ZSBhbmQgZmFsc2UKPgo+
Cj4gaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmluZGV4LkluZGV4V3JpdGVyOwo+Cj4gRmlsZSBp
bmRleERpciA9IG5ldyBGaWxlKCJjOlx0ZW1wIik7Cj4KPiBJbmRleFdyaXRlciB3cml0ZXIgPSBu
ZXcgSW5kZXhXcml0ZXIoaW5kZXhEaXIsIG5ldyBTdGFuZGFyZEFuYWx5emVyKCksIGZhbHNlKTsK
Pgo+Cj4gUmVnYXJkcywKPgo+IEVyaWsKPgo+Cj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gVG8gdW5zdWJzY3Jp
YmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gRm9y
IGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNo
ZS5vcmcKPgo+Cj4KPgo+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+ICBEw6lj
b3V2cmV6IHVuZSBub3V2ZWxsZSBmYcOnb24gZCdvYnRlbmlyIGRlcyByw6lwb25zZXMgw6AgdG91
dGVzIHZvcyBxdWVzdGlvbnMgISBQcm9maXRleiBkZXMgY29ubmFpc3NhbmNlcywgZGVzIG9waW5p
b25zIGV0IGRlcyBleHDDqXJpZW5jZXMgZGVzIGludGVybmF1dGVzIHN1ciBZYWhvbyEgUXVlc3Rp
b25zL1LDqXBvbnNlcy4KPgo+Cj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFp
bDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gRm9yIGFkZGl0aW9u
YWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcKPgo+
CgoKLS0gCk5pbGVzaCBCYW5zYWwuCmh0dHA6Ly9xdWVlbnMuZGIudG9yb250by5lZHUvfm5pbGVz
aC8K


From java-user-return-25909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 02 16:08:59 2007
Return-Path: <java-user-return-25909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82876 invoked from network); 2 Feb 2007 16:08:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2007 16:08:58 -0000
Received: (qmail 61077 invoked by uid 500); 2 Feb 2007 16:08:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61053 invoked by uid 500); 2 Feb 2007 16:08:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61042 invoked by uid 99); 2 Feb 2007 16:08:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 08:08:57 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of rohitlodha@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 08:08:48 -0800
Received: by nf-out-0910.google.com with SMTP id a27so1182675nfc
        for <java-user@lucene.apache.org>; Fri, 02 Feb 2007 08:08:27 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=LTCTvQ7I+mVofKDK+k0J4nRJc2jFEZWHkoJELsxxytykg0M383bVNHYrNtSq8gFog+YhTDw7ItKWULyI+eBJW5iYgH9y0Zxh4a3ICFHdzWRlV4iN1o6n25m9ojhAGYbP+qAybZAwoPH37q4wK2zJxLqBiNkIy7c1hRD3LAWvl0Q=
Received: by 10.82.120.15 with SMTP id s15mr1226954buc.1170432507088;
        Fri, 02 Feb 2007 08:08:27 -0800 (PST)
Received: by 10.82.184.17 with HTTP; Fri, 2 Feb 2007 08:08:27 -0800 (PST)
Message-ID: <c0edae750702020808h17cb223fufd0d913deb468239@mail.gmail.com>
Date: Fri, 2 Feb 2007 21:38:27 +0530
From: "Rohit Lodha" <rohit.lodha@activesensing.com>
Sender: rohitlodha@gmail.com
To: java-user@lucene.apache.org
Subject: Re: indexWriter
In-Reply-To: <3F5099632A78C7488A80D6535C4F4E802662DF@EX01.service.utwente.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24998_32146560.1170432507056"
References: <3F5099632A78C7488A80D6535C4F4E802662DF@EX01.service.utwente.nl>
X-Google-Sender-Auth: f63b3a101bfb6661
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24998_32146560.1170432507056
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

flush or close the writer to create the files in the dir.

Rohit

On 2/2/07, e.j.w.vanbloem@student.utwente.nl <
e.j.w.vanbloem@student.utwente.nl> wrote:
>
> Hello,
>
> Does anyone know why this does not work?
> The fileDir is of the class File and points to an empty temp directory.
> I tried switching true and false
>
>
> import org.apache.lucene.index.IndexWriter;
>
> File indexDir = new File("c:\temp");
>
> IndexWriter writer = new IndexWriter(indexDir, new StandardAnalyzer(),
> false);
>
>
> Regards,
>
> Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_24998_32146560.1170432507056--

From java-user-return-25910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 02 16:16:37 2007
Return-Path: <java-user-return-25910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86644 invoked from network); 2 Feb 2007 16:16:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2007 16:16:36 -0000
Received: (qmail 78637 invoked by uid 500); 2 Feb 2007 16:16:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78600 invoked by uid 500); 2 Feb 2007 16:16:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78589 invoked by uid 99); 2 Feb 2007 16:16:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 08:16:36 -0800
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [130.89.4.34] (HELO mail.service.utwente.nl) (130.89.4.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 08:16:27 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: RE : indexWriter
Date: Fri, 2 Feb 2007 17:15:36 +0100
Message-ID: <3F5099632A78C7488A80D6535C4F4E802662E4@EX01.service.utwente.nl>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: RE : indexWriter
Thread-Index: AcdG4Tnp9Nhq5mcGQoe5YaWgtfvDPAAAfcmzAACLovs=
References: <859702.41275.qm@web26303.mail.ukl.yahoo.com> <3F5099632A78C7488A80D6535C4F4E802662E2@EX01.service.utwente.nl>
From: <e.j.w.vanbloem@student.utwente.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

got it, thanx
=20

________________________________

Van: e.j.w.vanbloem@student.utwente.nl =
[mailto:e.j.w.vanbloem@student.utwente.nl]
Verzonden: vr 2-2-2007 16:59
Aan: "<java-user"@lucene.apache.org
Onderwerp: RE: RE : indexWriter



I already tried that but does not help
do I also have to create a file in that dir? Or is it some other problem

import org.apache.lucene.index.IndexWriter;

File indexDir =3D new File("c:\\temp");

IndexWriter writer =3D new IndexWriter(indexDir, new StandardAnalyzer(), =
false);

________________________________

Van: Virlouvet Olivier [mailto:meils2003@yahoo.fr]
Verzonden: vr 2-2-2007 16:45
Aan: java-user@lucene.apache.org
Onderwerp: RE : indexWriter



Hi Erik

   The \ must be escaped in the path, i.e : ...new File("c:\\temp");

Regards,
Olivier

e.j.w.vanbloem@student.utwente.nl a =E9crit : Hello,

Does anyone know why this does not work?
The fileDir is of the class File and points to an empty temp directory.
I tried switching true and false


import org.apache.lucene.index.IndexWriter;

File indexDir =3D new File("c:\temp");

IndexWriter writer =3D new IndexWriter(indexDir, new StandardAnalyzer(), =
false);


Regards,

Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



             =20
---------------------------------
 D=E9couvrez une nouvelle fa=E7on d'obtenir des r=E9ponses =E0 toutes =
vos questions ! Profitez des connaissances, des opinions et des =
exp=E9riences des internautes sur Yahoo! Questions/R=E9ponses.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 02 16:22:07 2007
Return-Path: <java-user-return-25911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88532 invoked from network); 2 Feb 2007 16:22:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2007 16:22:05 -0000
Received: (qmail 83907 invoked by uid 500); 2 Feb 2007 16:22:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83748 invoked by uid 500); 2 Feb 2007 16:22:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83737 invoked by uid 99); 2 Feb 2007 16:22:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 08:22:04 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.219] (HELO web26008.mail.ukl.yahoo.com) (217.12.10.219)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 02 Feb 2007 08:21:54 -0800
Received: (qmail 4405 invoked by uid 60001); 2 Feb 2007 16:21:31 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=H6r8aEqQ8mxcoYvxHWyqiCV8fr4BzZ9vshbKCj2yQFAsguBh4MOuRKAg4YoALAlHTF63c6DpvYKI3ODYk1K5z6i0WFyK/oMrVXsG+aUSTXQPuUzoZO0F79BfZnwIlyS67d4l6f4zblDqkG2RHJCGrjI3a6XIHtDf395Jd4mwVT0=;
X-YMail-OSG: ETDur6kVM1kjFOKj2uUB2Ne8oMW0dYBwHV0tN622RVwApqHiuEgspsMQGQaljTMWa3JkBPMdxHM7teJF9pBOBFPR51ZeMhU85g2HjE2k84fbFuXq3EVQX0a4aR0ScdR1ie1dZYldDW3.NRn2nGcImxZCP3lold2t5NNloQRYqBAKuDB5vgcQcPZs1g--
Received: from [193.36.230.96] by web26008.mail.ukl.yahoo.com via HTTP; Fri, 02 Feb 2007 16:21:31 GMT
X-Mailer: YahooMailRC/368.3 YahooMailWebService/0.6.132.7
Date: Fri, 2 Feb 2007 16:21:31 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Multiword Highlighting
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <764035.4185.qm@web26008.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Mark,=0AHave you looked at the returned spans from any other potential p=
roblem scenarios (other than the 3 word one you suggest) e.g. complex neste=
d "SpanOr" or "SpanNot" logic?=0A=0A>>Or there just may not be much interes=
t=0A=0AThere's certainly interest on my part on seeing this merged with the=
 existing highlighter (to include the option of fragmenting). Unfortunately=
 available time can be an issue for me.=0ACan you attach your code to a new=
 Jira entry so I can have a play?=0AI imagine if I do combine it with the e=
xisting Highlighter it will break the existing API so would probably have t=
o create a new SpansBasedHighlighter.=0A=0ACheers,=0AMark=0A=0A=0A----- Ori=
ginal Message ----=0AFrom: Mark Miller <markrmiller@gmail.com>=0ATo: java-u=
ser@lucene.apache.org=0ASent: Friday, 2 February, 2007 3:58:01 PM=0ASubject=
: Re: Multiword Highlighting=0A=0AI have been away from this for a week, bu=
t my interest has started =0Abuilding again. The whole spans implementation=
 seems to work great for =0Afinding the actual hits but there is a somewhat=
 annoying limitation: =0Abecause I am using Spans it seems I can only eithe=
r highlight the entire =0Afound span or just the first and last token of th=
e found span. First and =0Alast token works great for any span involving tw=
o query tokens (the only =0Atype I am concerned with at the moment), but a =
3 word span would not =0Ahave the middle word highlighted (unless you highl=
ight the whole darn =0Aspan). Other than that, the implementation is pretty=
 darn simple and =0Aseems to work well. It wouldn't be too hard to set the =
option of =0Acomplete span highlighting or first and last token.=0A=0AStill=
 interested in considering this for Contrib? Perhaps you want to =0Await fo=
r someone to merge the idea with the current Contrib highlighter =0A(add fr=
agments) as Mark H. suggested in his last email on the subject. =0AOr there=
 just may not be much interest -- the other recent highlighters =0Ahaven't =
really gone anywhere that I have seen (though I don't think they =0Aattempt=
ed 'actual' hit highlighting).=0A=0AIf there is interest, suggested package=
 name?=0A=0AOtis Gospodnetic wrote:=0A> For what it's worth Mark (Miller), =
there *is* a need for "just highlight the query terms without trying to get=
 excerpts" functionality - something a la Google cache (different colours..=
.mmm, nice).  I've had people ask me for this before, and I know I could us=
e this functionality, too.  Please contrib to contrib/ if you end up workin=
g on this.=0A>=0A> Otis=0A> --=0A> Simpy -- http://www.simpy.com/ -- Tag.  =
Search.  Share.=0A>=0A>   =0A=0A-------------------------------------------=
--------------------------=0ATo unsubscribe, e-mail: java-user-unsubscribe@=
lucene.apache.org=0AFor additional commands, e-mail: java-user-help@lucene.=
apache.org=0A=0A=0A=0A=0A=0A=0A=09=09=0A___________________________________=
_________________ =0A =0AYahoo! Photos is now offering a quality print serv=
ice from just 7p a photo. http://uk.photos.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 02 17:03:55 2007
Return-Path: <java-user-return-25912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3730 invoked from network); 2 Feb 2007 17:03:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2007 17:03:54 -0000
Received: (qmail 72253 invoked by uid 500); 2 Feb 2007 17:03:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72220 invoked by uid 500); 2 Feb 2007 17:03:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72209 invoked by uid 99); 2 Feb 2007 17:03:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 09:03:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.61] (HELO web50307.mail.yahoo.com) (206.190.38.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 02 Feb 2007 09:03:42 -0800
Received: (qmail 83342 invoked by uid 60001); 2 Feb 2007 17:03:21 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=jjj8gYmbfNyDCBGubH/PFpllfVhnNp3CyKVMjpN7SMqhPUzRGAbHBC6IikSN6G/XzTbsBXeidYC7cCJT6WSQPNNUIYLliEUu2PQCYd1KRskA/AGTuPiiZ4CAwqhXItM6z15j7fxWghLNZy6RoVSLt6grE37/o+r2OSKQb1da+RE=;
X-YMail-OSG: 6d1_PigVM1lej0g00R9AFSZolf9EFMHuv5tGXAImcGREJ8NawOwifct8gOaVAGCEBjcCl3TWiaK7l3KhzZjTKCe_BnXzvSLEOvtBWA3r7DkVPVhL9eJCBA--
Received: from [58.63.148.244] by web50307.mail.yahoo.com via HTTP; Fri, 02 Feb 2007 09:03:21 PST
X-Mailer: YahooMailRC/368.3 YahooMailWebService/0.6.132.7
Date: Fri, 2 Feb 2007 09:03:21 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Adding headlines, path
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <418764.82992.qm@web50307.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

1)=0A=0AField headlinesField =3D new Field("headlines", headline1, Field.St=
ore.YES, Field.Index.TOKENIZED); =0A=0AField headlinesField =3D new Field("=
headlines", headline2, Field.Store.YES, Field.Index.TOKENIZED); =0A=0A  =0A=
...=0A=0A2) path + url - you are probably looking at the demo.  That is *ju=
st* a demo and those are just the fields that demo uses, your application c=
an use any field it needs, like "headlines" above.=0A=0AOtis=0A=0A----- Ori=
ginal Message ----=0A=0AFrom: DECAFFMEYER MATHIEU <MATHIEU.DECAFFMAYER@fort=
is.lu>=0A=0ATo: java-user@lucene.apache.org=0A=0ASent: Friday, February 2, =
2007 9:03:50 AM=0A=0ASubject: Adding headlines, path=0A=0A=0A=0AAdding head=
lines, path           Hi all, =0A=0A  I have simple questions for which I c=
an't find an answer by googling : =0A=0A  1)  =0A=0AI want to add headlines=
 for a document : =0A=0A  Field headlinesField =3D new Field("headlines", h=
eadlines, Field.Store.YES, Field.Index.TOKENIZED); =0A=0A  But how do I sep=
arate the headlines between them ? =0A=0A  Let's say I want to add :  =0A=
=0AStrengths=0A=0A Our clients=0A=0A Solutions & service =0A=0A  Do I need =
to put a white space between them or a newline, ... ? =0A=0A  2) =0A=0A  Wh=
at is the difference between the field path and the field url ? =0A=0A  url=
 I guess is the url of the document as http://.......  =0A=0Abut what is th=
e field path ? =0A=0A =0A=0A  Thank u for any help ! =0A=0A  ______________=
____________________  =0A=0A   Matt =0A=0A  =0A=0A =0A=0A =3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=0A=0A Internet communications ar=
e not secure and therefore Fortis Banque Luxembourg S.A. does not accept le=
gal responsibility for the contents of this message. The information contai=
ned in this e-mail is confidential and may be legally privileged. It is int=
ended solely for the addressee. If you are not the intended recipient, any =
disclosure, copying, distribution or any action taken or omitted to be take=
n in reliance on it, is prohibited and may be unlawful. Nothing in the mess=
age is capable or intended to create any legally binding obligations on eit=
her party and it is not intended to provide legal advice.=0A=0A =3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=0A=0A  -------------------=
--------------------------------------------------=0A=0ATo unsubscribe, e-m=
ail: java-user-unsubscribe@lucene.apache.org=0A=0AFor additional commands, =
e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A=0A=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 02 17:08:16 2007
Return-Path: <java-user-return-25913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5030 invoked from network); 2 Feb 2007 17:08:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2007 17:08:15 -0000
Received: (qmail 82280 invoked by uid 500); 2 Feb 2007 17:08:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82131 invoked by uid 500); 2 Feb 2007 17:08:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82120 invoked by uid 99); 2 Feb 2007 17:08:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 09:08:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.154.194.71] (HELO srs2na11.bgl.lu) (194.154.194.71)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 02 Feb 2007 09:08:05 -0800
Received: from spmwf02l.luinternal.fortis.bank (unverified) by srs2na12.domain
 (Content Technologies SMTPRS 4.2.10) with ESMTP id <T7d90106c0f0aaf150a159@srs2na12.domain> for <java-user@lucene.apache.org>;
 Fri, 2 Feb 2007 18:11:47 +0100
Received: from SPMWB02L.luinternal.fortis.bank ([10.172.252.140]) by spmwf02l.luinternal.fortis.bank with Microsoft SMTPSVC(6.0.3790.0);
	 Fri, 2 Feb 2007 18:07:15 +0100
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: Adding headlines, path
Date: Fri, 2 Feb 2007 18:07:37 +0100
Message-ID: <EBC8F228BDB35A4394D0BE53DA25248808A9A33F@SPMWB02L.luinternal.fortis.bank>
In-Reply-To: <418764.82992.qm@web50307.mail.yahoo.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Adding headlines, path
Thread-Index: AcdG7CNqQ3zQOQX1Rd+cnflNMMTeIwAACbdA
From: "DECAFFMEYER MATHIEU" <MATHIEU.DECAFFMAYER@fortis.lu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 02 Feb 2007 17:07:15.0038 (UTC) FILETIME=[96406FE0:01C746EC]
X-Virus-Checked: Checked by ClamAV on apache.org

Thank u Otis !

Last question about this :
In what way will this differ ?

A)
Field headlinesField =3D new Field("headlines", "hello", =
Field.Store.YES,
Field.Index.TOKENIZED);=20
Field headlinesField =3D new Field("headlines", "world", =
Field.Store.YES,
Field.Index.TOKENIZED); =20

B)
Field headlinesField =3D new Field("headlines", "hello world",
Field.Store.YES, Field.Index.TOKENIZED);=20

C)
Field headlinesField =3D new Field("headlines", "hello \n world \n",
Field.Store.YES, Field.Index.TOKENIZED);


Thank u .
__________________________________
   Matt

   =20

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]=20
Sent: Friday, February 02, 2007 6:03 PM
To: java-user@lucene.apache.org
Subject: Re: Adding headlines, path

*****  This message comes from the Internet Network *****

1)

Field headlinesField =3D new Field("headlines", headline1,
Field.Store.YES, Field.Index.TOKENIZED);=20

Field headlinesField =3D new Field("headlines", headline2,
Field.Store.YES, Field.Index.TOKENIZED);=20

 =20
...

2) path + url - you are probably looking at the demo.  That is *just* a
demo and those are just the fields that demo uses, your application can
use any field it needs, like "headlines" above.

Otis

----- Original Message ----

From: DECAFFMEYER MATHIEU <MATHIEU.DECAFFMAYER@fortis.lu>

To: java-user@lucene.apache.org

Sent: Friday, February 2, 2007 9:03:50 AM

Subject: Adding headlines, path



Adding headlines, path           Hi all,=20

  I have simple questions for which I can't find an answer by googling :


  1) =20

I want to add headlines for a document :=20

  Field headlinesField =3D new Field("headlines", headlines,
Field.Store.YES, Field.Index.TOKENIZED);=20

  But how do I separate the headlines between them ?=20

  Let's say I want to add : =20

Strengths

 Our clients

 Solutions & service=20

  Do I need to put a white space between them or a newline, ... ?=20

  2)=20

  What is the difference between the field path and the field url ?=20

  url I guess is the url of the document as http://....... =20

but what is the field path ?=20

=20

  Thank u for any help !=20

  __________________________________ =20

   Matt=20

 =20

=20

 =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D

 Internet communications are not secure and therefore Fortis Banque
Luxembourg S.A. does not accept legal responsibility for the contents of
this message. The information contained in this e-mail is confidential
and may be legally privileged. It is intended solely for the addressee.
If you are not the intended recipient, any disclosure, copying,
distribution or any action taken or omitted to be taken in reliance on
it, is prohibited and may be unlawful. Nothing in the message is capable
or intended to create any legally binding obligations on either party
and it is not intended to provide legal advice.

 =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D

  ---------------------------------------------------------------------

To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org

For additional commands, e-mail: java-user-help@lucene.apache.org










---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 02 17:21:19 2007
Return-Path: <java-user-return-25914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9706 invoked from network); 2 Feb 2007 17:21:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2007 17:21:14 -0000
Received: (qmail 22283 invoked by uid 500); 2 Feb 2007 17:21:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22242 invoked by uid 500); 2 Feb 2007 17:21:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22205 invoked by uid 99); 2 Feb 2007 17:21:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 09:21:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.62] (HELO web50308.mail.yahoo.com) (206.190.38.62)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 02 Feb 2007 09:21:04 -0800
Received: (qmail 44082 invoked by uid 60001); 2 Feb 2007 17:20:43 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=T1oTpZ/9vsjAchu6mHV9UA1ggMWDGJL8yTGCyl8BS6x60ueFnzD+3FhGDqHCiGKBx3cBPWFg+j8j/zg/muj5zYwIXsuRNHxdOKA/4eFkHeSJUsgKu3GIl0+iFF3AfMqsjAYFJTtCwPLtzYK23yDmzd3sViklDYe5liIhhbTFLtE=;
X-YMail-OSG: Uufc3tQVM1mcYQsuf7VY6ehuy8cxMvCCPkCwcv4hdTCqxv9AEQ11bxJW8OuuSzI68t23Sf7CIVyQMrUNDIXUWF6z2cT42cCzm0yMwWgs0FeTUnZbi0ZRSIzWiv1.oJmeld5t8wNNz1e8goU-
Received: from [58.63.148.244] by web50308.mail.yahoo.com via HTTP; Fri, 02 Feb 2007 09:20:42 PST
X-Mailer: YahooMailRC/368.3 YahooMailWebService/0.6.132.7
Date: Fri, 2 Feb 2007 09:20:42 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Adding headlines, path
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <988655.44037.qm@web50308.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

It won't differ, I believe.  Should be easy to test.=0A=0AOtis=0A=0A----- O=
riginal Message ----=0AFrom: DECAFFMEYER MATHIEU <MATHIEU.DECAFFMAYER@forti=
s.lu>=0ATo: java-user@lucene.apache.org=0ASent: Friday, February 2, 2007 12=
:07:37 PM=0ASubject: RE: Adding headlines, path=0A=0AThank u Otis !=0A=0ALa=
st question about this :=0AIn what way will this differ ?=0A=0AA)=0AField h=
eadlinesField =3D new Field("headlines", "hello", Field.Store.YES,=0AField.=
Index.TOKENIZED); =0AField headlinesField =3D new Field("headlines", "world=
", Field.Store.YES,=0AField.Index.TOKENIZED);  =0A=0AB)=0AField headlinesFi=
eld =3D new Field("headlines", "hello world",=0AField.Store.YES, Field.Inde=
x.TOKENIZED); =0A=0AC)=0AField headlinesField =3D new Field("headlines", "h=
ello \n world \n",=0AField.Store.YES, Field.Index.TOKENIZED);=0A=0A=0AThank=
 u .=0A__________________________________=0A   Matt=0A=0A    =0A=0A-----Ori=
ginal Message-----=0AFrom: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.=
com] =0ASent: Friday, February 02, 2007 6:03 PM=0ATo: java-user@lucene.apac=
he.org=0ASubject: Re: Adding headlines, path=0A=0A*****  This message comes=
 from the Internet Network *****=0A=0A1)=0A=0AField headlinesField =3D new =
Field("headlines", headline1,=0AField.Store.YES, Field.Index.TOKENIZED); =
=0A=0AField headlinesField =3D new Field("headlines", headline2,=0AField.St=
ore.YES, Field.Index.TOKENIZED); =0A=0A  =0A...=0A=0A2) path + url - you ar=
e probably looking at the demo.  That is *just* a=0Ademo and those are just=
 the fields that demo uses, your application can=0Ause any field it needs, =
like "headlines" above.=0A=0AOtis=0A=0A----- Original Message ----=0A=0AFro=
m: DECAFFMEYER MATHIEU <MATHIEU.DECAFFMAYER@fortis.lu>=0A=0ATo: java-user@l=
ucene.apache.org=0A=0ASent: Friday, February 2, 2007 9:03:50 AM=0A=0ASubjec=
t: Adding headlines, path=0A=0A=0A=0AAdding headlines, path           Hi al=
l, =0A=0A  I have simple questions for which I can't find an answer by goog=
ling :=0A=0A=0A  1)  =0A=0AI want to add headlines for a document : =0A=0A =
 Field headlinesField =3D new Field("headlines", headlines,=0AField.Store.Y=
ES, Field.Index.TOKENIZED); =0A=0A  But how do I separate the headlines bet=
ween them ? =0A=0A  Let's say I want to add :  =0A=0AStrengths=0A=0A Our cl=
ients=0A=0A Solutions & service =0A=0A  Do I need to put a white space betw=
een them or a newline, ... ? =0A=0A  2) =0A=0A  What is the difference betw=
een the field path and the field url ? =0A=0A  url I guess is the url of th=
e document as http://.......  =0A=0Abut what is the field path ? =0A=0A =0A=
=0A  Thank u for any help ! =0A=0A  __________________________________  =0A=
=0A   Matt =0A=0A  =0A=0A =0A=0A =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=0A=0A Internet communications are not secure and therefore =
Fortis Banque=0ALuxembourg S.A. does not accept legal responsibility for th=
e contents of=0Athis message. The information contained in this e-mail is c=
onfidential=0Aand may be legally privileged. It is intended solely for the =
addressee.=0AIf you are not the intended recipient, any disclosure, copying=
,=0Adistribution or any action taken or omitted to be taken in reliance on=
=0Ait, is prohibited and may be unlawful. Nothing in the message is capable=
=0Aor intended to create any legally binding obligations on either party=0A=
and it is not intended to provide legal advice.=0A=0A =3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=0A=0A  -------------------------------=
--------------------------------------=0A=0ATo unsubscribe, e-mail: java-us=
er-unsubscribe@lucene.apache.org=0A=0AFor additional commands, e-mail: java=
-user-help@lucene.apache.org=0A=0A=0A=0A=0A=0A=0A=0A=0A=0A=0A--------------=
-------------------------------------------------------=0ATo unsubscribe, e=
-mail: java-user-unsubscribe@lucene.apache.org=0AFor additional commands, e=
-mail: java-user-help@lucene.apache.org=0A=0A=0A---------------------------=
------------------------------------------=0ATo unsubscribe, e-mail: java-u=
ser-unsubscribe@lucene.apache.org=0AFor additional commands, e-mail: java-u=
ser-help@lucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 02 18:03:07 2007
Return-Path: <java-user-return-25915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22495 invoked from network); 2 Feb 2007 18:03:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2007 18:03:07 -0000
Received: (qmail 17904 invoked by uid 500); 2 Feb 2007 18:03:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17881 invoked by uid 500); 2 Feb 2007 18:03:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17870 invoked by uid 99); 2 Feb 2007 18:03:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 10:03:05 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ngvinny@gmail.com designates 66.249.82.239 as permitted sender)
Received: from [66.249.82.239] (HELO wx-out-0506.google.com) (66.249.82.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 10:02:56 -0800
Received: by wx-out-0506.google.com with SMTP id i29so906688wxd
        for <java-user@lucene.apache.org>; Fri, 02 Feb 2007 10:02:36 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=KMo/JXdyOb/GU1ShE99m20dfBNpcG/35bvbztmoT5530GrttVl0I+iCo0wiJHEooYf3EhJ84hTAIETQdGfCAk5EI7GdQHS+kPYPg4AtPymI/FjxIwelHz2KYUPZaEO2ESCtJNxPcbrkHePs0Y81+EkGnKtUx2NICUY/bOKYE5dI=
Received: by 10.90.81.14 with SMTP id e14mr5416246agb.1170439356030;
        Fri, 02 Feb 2007 10:02:36 -0800 (PST)
Received: by 10.90.68.4 with HTTP; Fri, 2 Feb 2007 10:02:35 -0800 (PST)
Message-ID: <5db95abe0702021002g61a47f2cw91a3b6e5fb8fa02f@mail.gmail.com>
Date: Fri, 2 Feb 2007 18:02:35 +0000
From: "Ng Vinny" <ngvinny@gmail.com>
To: java-user@lucene.apache.org
Subject: how to store and reuse query
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24210_7023209.1170439355995"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24210_7023209.1170439355995
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Dear List,

After processing some text, I have constructed a Boolean query , e.g.
"title:Lucene author:Otis", and I would like to store the query to reuse
when the same piece of text is issued (to avoid re-processing of the same
text).

I thought of storing the string resulted from Query.toString() method, but
there is no constructor of Query to build a new Query from the string I
retrieve from the datastore.

Please shed some light on this.

Thanks a lot.

------=_Part_24210_7023209.1170439355995--

From java-user-return-25916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 02 18:31:56 2007
Return-Path: <java-user-return-25916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36087 invoked from network); 2 Feb 2007 18:31:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2007 18:31:31 -0000
Received: (qmail 88994 invoked by uid 500); 2 Feb 2007 18:31:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88952 invoked by uid 500); 2 Feb 2007 18:31:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88940 invoked by uid 99); 2 Feb 2007 18:31:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 10:31:31 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.104.95.4] (HELO listing.marketingbrokers.com) (66.104.95.4)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 02 Feb 2007 10:31:21 -0800
Received: from ip66-104-95-21.z95-104-66.customer.algx.net ([66.104.95.21])
          by listing.marketingbrokers.com (JAMES SMTP Server 2.2.0) with SMTP ID 1013
          for <java-user@lucene.apache.org>;
          Fri, 2 Feb 2007 10:30:40 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Transfer-Encoding: 7bit
Message-Id: <3696C2F7-2220-413E-8185-08EF5D7890A0@marketingbrokers.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: "Peter W." <peter@marketingbrokers.com>
Subject: remote index update question
Date: Fri, 2 Feb 2007 10:30:40 -0800
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I have 5 remote indexes being updated
using the following methods:

1. one machine indexes documents
and creates lucene doc objects.
2. lucene docs are batched, put into maps
3. maps are serialized and posted over http to servlets
on each remote machine.
4. receiving servlets get maps, pull out docs and index them.

Each map holds about 1K lucene docs, everything works dandy.

My question is regarding the remote indexes continuously being
updated. These are unique, not multiple copies of each other.

When do index readers need to be opened and closed (to refresh data)
and does outside searching need to be turned off during updates?

Also, assuming this runs hourly, and if I need to close then open  
each time,
how can a seamless user experience (no frozen queries, minimal delays)
be achieved?

Thanks.

Peter W.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 02 18:52:37 2007
Return-Path: <java-user-return-25917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44726 invoked from network); 2 Feb 2007 18:52:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2007 18:52:36 -0000
Received: (qmail 35377 invoked by uid 500); 2 Feb 2007 18:52:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35346 invoked by uid 500); 2 Feb 2007 18:52:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35335 invoked by uid 99); 2 Feb 2007 18:52:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 10:52:36 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,MIME_BOUND_NEXTPART
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.154.194.71] (HELO srs2na11.bgl.lu) (194.154.194.71)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 02 Feb 2007 10:52:27 -0800
Received: from spmwf02l.luinternal.fortis.bank (unverified) by srs2na12.domain
 (Content Technologies SMTPRS 4.2.10) with ESMTP id <T7d906ff91f0aaf150a159@srs2na12.domain> for <java-user@lucene.apache.org>;
 Fri, 2 Feb 2007 19:56:09 +0100
Received: from SPMWB02L.luinternal.fortis.bank ([10.172.252.140]) by spmwf02l.luinternal.fortis.bank with Microsoft SMTPSVC(6.0.3790.0);
	 Fri, 2 Feb 2007 19:51:53 +0100
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_NextPartTM-000-54adf639-7c02-4384-89a2-812eb51a543e"
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: IDFrequency
Date: Fri, 2 Feb 2007 19:51:53 +0100
Message-ID: <EBC8F228BDB35A4394D0BE53DA25248808A9A340@SPMWB02L.luinternal.fortis.bank>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: IDFrequency
Thread-Index: AcdG+zTwzGbONxMUTK6ZFYMBgufaJA==
From: "DECAFFMEYER MATHIEU" <MATHIEU.DECAFFMAYER@fortis.lu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 02 Feb 2007 18:51:53.0904 (UTC) FILETIME=[34BF5B00:01C746FB]
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPartTM-000-54adf639-7c02-4384-89a2-812eb51a543e
Content-Type: multipart/alternative; 
	boundary="----_=_NextPart_001_01C746FB.343FAE17"

------_=_NextPart_001_01C746FB.343FAE17
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

The score depends of=20
1. the query=20
2. the matched document=20
3. the index.

I don't really understand why the index must influence the score (why it
ahs been implemented that way).

Let's say I have this page Logistics.htm
I have just one time the word "experience" in it.
It will get a high score because of the IDF but it occurs only once in
my document.


__________________________________

   Matt



=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
Internet communications are not secure and therefore Fortis Banque Luxembou=
rg S.A. does not accept legal responsibility for the contents of this messa=
ge. The information contained in this e-mail is confidential and may be leg=
ally privileged. It is intended solely for the addressee. If you are not th=
e intended recipient, any disclosure, copying, distribution or any action t=
aken or omitted to be taken in reliance on it, is prohibited and may be unl=
awful. Nothing in the message is capable or intended to create any legally =
binding obligations on either party and it is not intended to provide legal=
 advice.
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D


------_=_NextPart_001_01C746FB.343FAE17
Content-Type: text/html; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; charset=3Dus-ascii">
<META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version 6.5.7651.52">
<TITLE>IDFrequency</TITLE>
</HEAD>
<BODY>
<!-- Converted from text/rtf format -->

<P><FONT SIZE=3D2 FACE=3D"Arial">Hi,</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Courier New">The score depends of </FONT>

<BR><FONT SIZE=3D2 FACE=3D"Courier New">1. the query </FONT>

<BR><FONT SIZE=3D2 FACE=3D"Courier New">2. the matched document </FONT>

<BR><FONT SIZE=3D2 FACE=3D"Courier New">3. the index.</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Courier New">I don't really understand why the in=
dex must influence the score (why it ahs been implemented that way).</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Courier New">Let's say I have this page Logistics=
.htm</FONT>

<BR><FONT SIZE=3D2 FACE=3D"Courier New">I have just one time the word &quot=
;experience&quot; in it.</FONT>

<BR><FONT SIZE=3D2 FACE=3D"Courier New">It will get a high score because of=
 the IDF but it occurs only once in my document.</FONT>
</P>
<BR>

<P><B><SPAN LANG=3D"fr"><WBR><WBR><WBR><WBR><WBR><WBR><WBR><WBR><WBR><WBR><=
WBR><WBR><WBR><WBR><WBR><WBR><FONT COLOR=3D"#006699" SIZE=3D1 FACE=3D"Verda=
na">__________________________________</FONT></SPAN></B>
</P>

<P><B><SPAN LANG=3D"fr"><FONT COLOR=3D"#006699" SIZE=3D1 FACE=3D"Verdana">&=
nbsp;&nbsp; Matt</FONT></SPAN></B><SPAN LANG=3D"fr"><I></I><I></I></SPAN><I=
><SPAN LANG=3D"en-us"></SPAN></I>
</P>

<CODE><FONT SIZE=3D3><BR>
<BR>
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D<BR>
Internet communications are not secure and therefore Fortis Banque Luxembou=
rg S.A. does not accept legal responsibility for the contents of this messa=
ge. The information contained in this e-mail is confidential and may be leg=
ally privileged. It is intended solely for the addressee. If you are not th=
e intended recipient, any disclosure, copying, distribution or any action t=
aken or omitted to be taken in reliance on it, is prohibited and may be unl=
awful. Nothing in the message is capable or intended to create any legally =
binding obligations on either party and it is not intended to provide legal=
 advice.<BR>
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D<BR>
</FONT></CODE>
</BODY>
</HTML>
------_=_NextPart_001_01C746FB.343FAE17--


------=_NextPartTM-000-54adf639-7c02-4384-89a2-812eb51a543e
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------=_NextPartTM-000-54adf639-7c02-4384-89a2-812eb51a543e--


From java-user-return-25918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 02 21:04:59 2007
Return-Path: <java-user-return-25918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92739 invoked from network); 2 Feb 2007 21:04:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2007 21:04:48 -0000
Received: (qmail 37350 invoked by uid 500); 2 Feb 2007 21:04:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37322 invoked by uid 500); 2 Feb 2007 21:04:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37311 invoked by uid 99); 2 Feb 2007 21:04:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 13:04:48 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 13:04:39 -0800
Received: by ug-out-1314.google.com with SMTP id k40so880471ugc
        for <java-user@lucene.apache.org>; Fri, 02 Feb 2007 13:04:17 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qT3FP1Nc5BpdyHbOBp4xDfy0131aMMyZlsqkNrtWSMfGP8sjXR6kkBpj7wNDpVGxly4SPw8WGrERVrYF1z6Es/neiiQXmmRknTKIoWFKraO/azw0SgsBAShWh6gBJxpFkFqh0YMRI7ZdAbdy2IDpjcgaUMkvB5peizrDVqNY6Bw=
Received: by 10.82.135.13 with SMTP id i13mr1419551bud.1170450257229;
        Fri, 02 Feb 2007 13:04:17 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Fri, 2 Feb 2007 13:04:16 -0800 (PST)
Message-ID: <359a92830702021304p5b6a90ddhb86e1a28534b2419@mail.gmail.com>
Date: Fri, 2 Feb 2007 16:04:16 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to store and reuse query
In-Reply-To: <5db95abe0702021002g61a47f2cw91a3b6e5fb8fa02f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_34446_16025024.1170450256852"
References: <5db95abe0702021002g61a47f2cw91a3b6e5fb8fa02f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_34446_16025024.1170450256852
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I doubt that this is a worthwhile place to spend your time. You're
introducing possibilities for error and saving very, very, very little time
I suspect. I'd only try this if you have *proof* that constructing the query
takes enough time to matter. Have you timed query construction to see if
it's actually a bottleneck?

Best
Erick

On 2/2/07, Ng Vinny <ngvinny@gmail.com> wrote:
>
> Dear List,
>
> After processing some text, I have constructed a Boolean query , e.g.
> "title:Lucene author:Otis", and I would like to store the query to reuse
> when the same piece of text is issued (to avoid re-processing of the same
> text).
>
> I thought of storing the string resulted from Query.toString() method, but
> there is no constructor of Query to build a new Query from the string I
> retrieve from the datastore.
>
> Please shed some light on this.
>
> Thanks a lot.
>

------=_Part_34446_16025024.1170450256852--

From java-user-return-25919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 02 22:23:41 2007
Return-Path: <java-user-return-25919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29262 invoked from network); 2 Feb 2007 22:23:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2007 22:23:40 -0000
Received: (qmail 69616 invoked by uid 500); 2 Feb 2007 22:23:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69523 invoked by uid 500); 2 Feb 2007 22:23:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69472 invoked by uid 99); 2 Feb 2007 22:23:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 14:23:35 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of soeren.pekrul@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 02 Feb 2007 14:23:26 -0800
Received: (qmail invoked by alias); 02 Feb 2007 22:23:04 -0000
Received: from p548C6CE9.dip.t-dialin.net (EHLO [10.0.1.102]) [84.140.108.233]
  by mail.gmx.net (mp036) with SMTP; 02 Feb 2007 23:23:04 +0100
X-Authenticated: #3493418
Message-ID: <45C3B963.4010209@gmx.de>
Date: Fri, 02 Feb 2007 23:21:23 +0100
From: Soeren Pekrul <soeren.pekrul@gmx.de>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: de-DE, de, en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: IDFrequency
References: <EBC8F228BDB35A4394D0BE53DA25248808A9A340@SPMWB02L.luinternal.fortis.bank>
In-Reply-To: <EBC8F228BDB35A4394D0BE53DA25248808A9A340@SPMWB02L.luinternal.fortis.bank>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

DECAFFMEYER MATHIEU wrote:
> The score depends of
> 1. the query
> 2. the matched document
> 3. the index.
> 
> I don't really understand why the index must influence the score (why it 
> ahs been implemented that way).

The score should be the similarity (inverse distance) between the query 
and the matched document. How similar is the found document to my query? 
How likely is the found document relevant for my question (query)?

If your query consists of just one word (term) the idf has no influence. 
If the query consists of multiple terms it could be useful weighting the 
terms. The idea is as follow:

1. Indexing view
The task is to find important words in a document, to find the keywords 
describing this document.
A term that occurs in just one document identifies that document. This 
term seems to be very important for that document. It could be a good 
keyword candidate.
If a term occurs in all documents (like stop words) it can't describe a 
document because there is no difference to the other documents.

2. Query view
A term that occurs in just one document identifies that document. Your 
query will return exactly that document, a perfect result. No ranking is 
necessary.
If you are searching for a term that occurs in all documents you will 
retrieve the complete collection. You have no selection, no sub 
collection. You have the same situation as before your query. This term 
is not a real help to find an answer of a question. The weight of this 
term could be 0 or very small.
If a term has a small document frequency the weight is high and if it 
has a large document frequency it has a less weight.

A lot of experiments show that score=tf*idf is a quite good ranking 
method. It is not the best for all cases but not bad for the general 
case. You can use it or not. It depends of your requirements.

> Let's say I have this page Logistics.htm
> I have just one time the word "experience" in it.
> It will get a high score because of the IDF but it occurs only once in 
> my document.

Did you really mean the IDF? That looks for me like TF (term frequency), 
how often a term occurs in a document. The IDF (inverse document 
frequency) means in how many documents occurs the term in my collection.
The idea of tf is if you have already removed the stop words a term that 
occurs quite often in a document is more important for that document 
than a term that occurs quite rare.

Sren

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 02 22:45:14 2007
Return-Path: <java-user-return-25920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35035 invoked from network); 2 Feb 2007 22:45:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2007 22:45:13 -0000
Received: (qmail 10405 invoked by uid 500); 2 Feb 2007 22:45:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10181 invoked by uid 500); 2 Feb 2007 22:45:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10170 invoked by uid 99); 2 Feb 2007 22:45:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 14:45:13 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.184.238 as permitted sender)
Received: from [64.233.184.238] (HELO wr-out-0506.google.com) (64.233.184.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 14:45:02 -0800
Received: by wr-out-0506.google.com with SMTP id i4so909781wra
        for <java-user@lucene.apache.org>; Fri, 02 Feb 2007 14:44:42 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=eNJAt5WHJ4NCLrPdKHxErjtvz2NRgu1g2llw5e3D6qFSSlToRbtFT7LkhVUti5x5Y3IsPIoZaArenctiko74EmDhEpFy3Rf2tTqrNycC12rtneGKUEAIS4aiF/7CNdVZ/EhQLWnfM7E9X9lQcPvdIoz2/xtOVAMrzMiUNDsCvyg=
Received: by 10.90.120.6 with SMTP id s6mr5815401agc.1170456281840;
        Fri, 02 Feb 2007 14:44:41 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 7sm7507361wrh.2007.02.02.14.44.40;
        Fri, 02 Feb 2007 14:44:41 -0800 (PST)
Message-ID: <45C3BEC3.1000100@gmail.com>
Date: Fri, 02 Feb 2007 17:44:19 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Multiword Highlighting
References: <764035.4185.qm@web26008.mail.ukl.yahoo.com>
In-Reply-To: <764035.4185.qm@web26008.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org



mark harwood wrote:
> Hi Mark,
> Have you looked at the returned spans from any other potential problem scenarios (other than the 3 word one you suggest) e.g. complex nested "SpanOr" or "SpanNot" logic?
>   
Nothing super intense, but I haved look at some semi complex nesting and 
it all looks great if you use the full span highlighting...highlighting 
the first and last word of the span only works great if your limited to 
word to word proximity searching (like in my parser <G> works great for 
my sentence and paragraph proximity searching, though i had to add the 
option of hiding my index marker tokens from the output)

Perhaps you know of something that I haven't run into that may not 
highlight correctly ?
> Can you attach your code to a new Jira entry so I can have a play?
>
>   
I certainly will.

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 03 00:45:01 2007
Return-Path: <java-user-return-25921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62612 invoked from network); 3 Feb 2007 00:45:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Feb 2007 00:45:01 -0000
Received: (qmail 45981 invoked by uid 500); 3 Feb 2007 00:45:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45943 invoked by uid 500); 3 Feb 2007 00:45:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45932 invoked by uid 99); 3 Feb 2007 00:45:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 16:45:01 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 16:44:51 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id CA6E930EFC16; Fri,  2 Feb 2007 19:44:30 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 06BF430EFC16
	for <java-user@lucene.apache.org>; Fri,  2 Feb 2007 19:44:27 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <5db95abe0702021002g61a47f2cw91a3b6e5fb8fa02f@mail.gmail.com>
References: <5db95abe0702021002g61a47f2cw91a3b6e5fb8fa02f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <396FFA51-CC88-47FB-BB1E-60E66A6FFC45@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: how to store and reuse query
Date: Fri, 2 Feb 2007 19:44:24 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.1.1


On Feb 2, 2007, at 1:02 PM, Ng Vinny wrote:
> After processing some text, I have constructed a Boolean query , e.g.
> "title:Lucene author:Otis", and I would like to store the query to  
> reuse
> when the same piece of text is issued (to avoid re-processing of  
> the same
> text).

Solr (can't help but point to it) does query result DocSet/List  
caching, which dramatically speeds up requests for the same query or  
successive pages of the same query [couple that with the filter query  
and facet query capability... wow!].  You could cache (bits of) the  
results of a query and key it by the query expression.  This  
obviously has merit, but whether you need to go that far for your  
needs or not depend on the scale.

> I thought of storing the string resulted from Query.toString()  
> method, but
> there is no constructor of Query to build a new Query from the  
> string I
> retrieve from the datastore.

The Query.toString() output is QueryParser-like.  Generally speaking  
you can .toString() a query and QueryParser it and you'll have the  
same query.  But, this may not always be the case.  A rewritten Query  
can be different, and also I wouldn't bank on the fact that all the  
Query subclasses have kept QueryParser roundtripping compliance.  
Maybe, but I'd be surprised if there weren't some exceptions.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 03 00:48:49 2007
Return-Path: <java-user-return-25922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64536 invoked from network); 3 Feb 2007 00:48:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Feb 2007 00:48:49 -0000
Received: (qmail 52694 invoked by uid 500); 3 Feb 2007 00:48:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52650 invoked by uid 500); 3 Feb 2007 00:48:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52623 invoked by uid 99); 3 Feb 2007 00:48:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 16:48:38 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of edirisinghe.s@gmail.com designates 64.233.162.226 as permitted sender)
Received: from [64.233.162.226] (HELO nz-out-0506.google.com) (64.233.162.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 16:48:29 -0800
Received: by nz-out-0506.google.com with SMTP id i1so984512nzh
        for <java-user@lucene.apache.org>; Fri, 02 Feb 2007 16:48:09 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=JIj5VXjuAQzFYVL4tHk46Cwt/13dPmmwpFMEQebhIBVvHuxmIwn4Oz0xodzBBNKKENftwAaQoGIZmj5Qurfulua5hRVFPvUHOZo5gvU2GrvvDB9dtosgfHo4ZY22q5v72aEb0O1WE/OyzJsNJPr5sJ7DdCE/Hz+0d0NMaGbVW6E=
Received: by 10.65.219.20 with SMTP id w20mr4998594qbq.1170463688806;
        Fri, 02 Feb 2007 16:48:08 -0800 (PST)
Received: by 10.65.251.19 with HTTP; Fri, 2 Feb 2007 16:48:08 -0800 (PST)
Message-ID: <ce5280a30702021648s2d8d66flb8f902d5e011ac2d@mail.gmail.com>
Date: Fri, 2 Feb 2007 16:48:08 -0800
From: "S Edirisinghe" <edirisinghe.s@gmail.com>
To: java-user@lucene.apache.org
Subject: adding keywords to a field
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_31084_8954642.1170463688776"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_31084_8954642.1170463688776
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

Is is possible to add keywords to a field? for example if I add a field to a
document and then I save it to the index, after that I find it again for
edit, and want to add a nother keyword for the field. What is the new api
call to add to a stored keyword field?

thanks

------=_Part_31084_8954642.1170463688776--

From java-user-return-25923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 03 01:08:55 2007
Return-Path: <java-user-return-25923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66895 invoked from network); 3 Feb 2007 01:08:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Feb 2007 01:08:54 -0000
Received: (qmail 63950 invoked by uid 500); 3 Feb 2007 01:08:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63920 invoked by uid 500); 3 Feb 2007 01:08:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63908 invoked by uid 99); 3 Feb 2007 01:08:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 17:08:55 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 17:08:46 -0800
Received: by nf-out-0910.google.com with SMTP id a27so1308797nfc
        for <java-user@lucene.apache.org>; Fri, 02 Feb 2007 17:08:24 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NizOAL6v1L2LrjgPTGE0+9/Vb38dhvjq+1lDYcGoWYarbIiMAv/n/61arTmhTsdQCNHHb9NX8PTh3+6eIXrrtd5N0cUY2cZ0MZLD4QysrvUaixeorpGIZzqZh9Kj4ArLP3tQaxsgM8Pf9iE2DtFLZDbU2Mxj4r4glJ9cQR/R1wc=
Received: by 10.82.183.19 with SMTP id g19mr395138buf.1170464904016;
        Fri, 02 Feb 2007 17:08:24 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Fri, 2 Feb 2007 17:08:23 -0800 (PST)
Message-ID: <359a92830702021708g739effebh7b7aeeaaf708645d@mail.gmail.com>
Date: Fri, 2 Feb 2007 20:08:23 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: adding keywords to a field
In-Reply-To: <ce5280a30702021648s2d8d66flb8f902d5e011ac2d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_37819_9621899.1170464903991"
References: <ce5280a30702021648s2d8d66flb8f902d5e011ac2d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_37819_9621899.1170464903991
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

No. Update-in-place has been on the wish list for some time. To modify a
document, you must delete and re-add it. Which can be a problem if the
document has fields that are not stored....

Best
Erick

On 2/2/07, S Edirisinghe <edirisinghe.s@gmail.com> wrote:
>
> Hi,
>
> Is is possible to add keywords to a field? for example if I add a field to
> a
> document and then I save it to the index, after that I find it again for
> edit, and want to add a nother keyword for the field. What is the new api
> call to add to a stored keyword field?
>
> thanks
>

------=_Part_37819_9621899.1170464903991--

From java-user-return-25924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 03 03:32:27 2007
Return-Path: <java-user-return-25924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3313 invoked from network); 3 Feb 2007 03:32:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Feb 2007 03:32:27 -0000
Received: (qmail 55288 invoked by uid 500); 3 Feb 2007 03:32:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55251 invoked by uid 500); 3 Feb 2007 03:32:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33937 invoked by uid 99); 3 Feb 2007 03:05:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 19:05:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of RASPL@de.ibm.com designates 195.212.29.152 as permitted sender)
Received: from [195.212.29.152] (HELO mtagate3.de.ibm.com) (195.212.29.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Feb 2007 19:05:34 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate3.de.ibm.com (8.13.8/8.13.8) with ESMTP id l1335D5s180958
	for <java-user@lucene.apache.org>; Sat, 3 Feb 2007 03:05:13 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.2) with ESMTP id l1335DCx909350
	for <java-user@lucene.apache.org>; Sat, 3 Feb 2007 04:05:13 +0100
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l1335DEv031507
	for <java-user@lucene.apache.org>; Sat, 3 Feb 2007 04:05:13 +0100
Received: from d12ml067.megacenter.de.ibm.com (d12ml067.megacenter.de.ibm.com [9.149.164.162])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l1335CA0031504
	for <java-user@lucene.apache.org>; Sat, 3 Feb 2007 04:05:13 +0100
Subject: Stefan Raspl/Germany/IBM is out of the office.
From: Stefan Raspl <RASPL@de.ibm.com>
To: java-user@lucene.apache.org
Message-ID: <OF1DACDC5B.3D562EB7-ONC1257277.0010F346-C1257277.0010F347@de.ibm.com>
Date: Sat, 3 Feb 2007 04:05:08 +0100
X-MIMETrack: Serialize by Router on D12ML067/12/M/IBM(Release 6.5.5HF882 | September 26, 2006) at
 03/02/2007 04:05:12
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


I will be out of the office starting  02/03/2007 and will not return until
02/12/2007.

I will respond to your message when I return.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 03 18:50:13 2007
Return-Path: <java-user-return-25925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37896 invoked from network); 3 Feb 2007 18:50:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Feb 2007 18:50:11 -0000
Received: (qmail 98527 invoked by uid 500); 3 Feb 2007 18:50:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98490 invoked by uid 500); 3 Feb 2007 18:50:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98478 invoked by uid 99); 3 Feb 2007 18:50:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Feb 2007 10:50:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [209.68.5.17] (HELO relay03.pair.com) (209.68.5.17)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 03 Feb 2007 10:50:00 -0800
Received: (qmail 25509 invoked from network); 3 Feb 2007 18:49:38 -0000
Received: from unknown (HELO ?192.168.1.30?) (unknown)
  by unknown with SMTP; 3 Feb 2007 18:49:38 -0000
X-pair-Authenticated: 68.236.126.81
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <FFC97DD6-07B5-4EF0-B863-13BAAAE7456B@variogr.am>
References: <FFC97DD6-07B5-4EF0-B863-13BAAAE7456B@variogr.am>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8DB6FC56-9C96-4050-89C6-41DC2832FDE3@variogr.am>
Content-Transfer-Encoding: 7bit
From: Brian Whitman <brian.whitman@variogr.am>
Subject: Re: searching by field's TF vector (not MoreLikeThis)
Date: Sat, 3 Feb 2007 13:49:37 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

On Feb 1, 2007, at 7:13 PM, Brian Whitman wrote:

> I'm looking for a way to search by a field's internal TF vector  
> representation.
>
> MoreLikeThis does not seem to be what I want-- it constructs a text  
> query based on the top scoring TF-IDF terms. I want to query by TF  
> vector directly, bypassing the tokens.


After looking around the archives & Lucene's code & etc, my  
assumption is:

Lucene does not use the entire TF vector space in any search. There  
is no tree search or other log-n search mechanism built into Lucene.  
TF cos dist is using for scoring, once the search space is reduced  
from the occurrence of terms in query from the inverted index, and  
then it's a foreach document operation.

If this is incorrect, please let me know.

-Brian



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 04 12:57:25 2007
Return-Path: <java-user-return-25926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94702 invoked from network); 4 Feb 2007 12:57:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2007 12:57:24 -0000
Received: (qmail 15099 invoked by uid 500); 4 Feb 2007 12:57:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14817 invoked by uid 500); 4 Feb 2007 12:57:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14806 invoked by uid 99); 4 Feb 2007 12:57:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Feb 2007 04:57:24 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Feb 2007 04:57:15 -0800
Received: by nf-out-0910.google.com with SMTP id i2so2886nfe
        for <java-user@lucene.apache.org>; Sun, 04 Feb 2007 04:56:54 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=PR1apuhdLhri0+uNUXe2Ws8Yr7UknKovR28rN6m4fogKHEAgGgqXHvs54V6amZLonxEUrUzklyweiYteBNQ8IrKFDrJrpxSkTdA8i5LL64qSsZG9tQ+w+5ppyU25G2GK7hFn5NuoziFmh3JJYgsS7ppgwJhTnL9jrfQWoQFCBoY=
Received: by 10.82.183.19 with SMTP id g19mr713621buf.1170593813481;
        Sun, 04 Feb 2007 04:56:53 -0800 (PST)
Received: by 10.82.163.2 with HTTP; Sun, 4 Feb 2007 04:56:53 -0800 (PST)
Message-ID: <34b8543c0702040456i569b26e4ndd4057ea65b540c6@mail.gmail.com>
Date: Sun, 4 Feb 2007 16:26:53 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: is there any workaround to get the field names?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_47006_28695905.1170593813461"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_47006_28695905.1170593813461
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi
as far as I know there is no way to obtain the structure of the index. for
example, I need to have a list of fields available in the index and their
type.
I need this feature, what shall I do?

-- 
Regards,
Mohammad Norouzi

------=_Part_47006_28695905.1170593813461--

From java-user-return-25927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 04 13:44:34 2007
Return-Path: <java-user-return-25927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 354 invoked from network); 4 Feb 2007 13:44:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2007 13:44:32 -0000
Received: (qmail 50410 invoked by uid 500); 4 Feb 2007 13:44:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50372 invoked by uid 500); 4 Feb 2007 13:44:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50354 invoked by uid 99); 4 Feb 2007 13:44:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Feb 2007 05:44:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [82.216.111.37] (HELO smtp1.tech.numericable.fr) (82.216.111.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Feb 2007 05:44:23 -0800
Received: from [192.168.1.101] (ip-3.net-82-216-252.rev.numericable.fr [82.216.252.3])
	by smtp1.tech.numericable.fr (Postfix) with ESMTP id 07007E080C
	for <java-user@lucene.apache.org>; Sun,  4 Feb 2007 14:44:00 +0100 (CET)
From: Nicolas =?iso-8859-1?q?Lalev=E9e?= <nicolas.lalevee@anyware-tech.com>
To: java-user@lucene.apache.org
Subject: Re: is there any workaround to get the field names?
Date: Sun, 4 Feb 2007 14:43:58 +0100
User-Agent: KMail/1.9.5
References: <34b8543c0702040456i569b26e4ndd4057ea65b540c6@mail.gmail.com>
In-Reply-To: <34b8543c0702040456i569b26e4ndd4057ea65b540c6@mail.gmail.com>
Organization: Anyware Technologies
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200702041443.59000.nicolas.lalevee@anyware-tech.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Le dimanche 4 f=E9vrier 2007 13:56, Mohammad Norouzi a =E9crit=A0:
> Hi
> as far as I know there is no way to obtain the structure of the index. for
> example, I need to have a list of fields available in the index and their
> type.
> I need this feature, what shall I do?

Use this one :
http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexReader.=
html#getFieldNames(org.apache.lucene.index.IndexReader.FieldOption)

Nicolas

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 04 21:18:33 2007
Return-Path: <java-user-return-25928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76204 invoked from network); 4 Feb 2007 21:18:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2007 21:18:32 -0000
Received: (qmail 97005 invoked by uid 500); 4 Feb 2007 21:18:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96854 invoked by uid 500); 4 Feb 2007 21:18:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96843 invoked by uid 99); 4 Feb 2007 21:18:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Feb 2007 13:18:28 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of galeas@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 04 Feb 2007 13:18:16 -0800
Received: (qmail 16435 invoked by uid 0); 4 Feb 2007 21:17:55 -0000
Received: from 80.131.253.111 by www029.gmx.net with HTTP;
 Sun, 04 Feb 2007 22:17:55 +0100 (CET)
Content-Type: text/plain; charset="us-ascii"
Date: Sun, 04 Feb 2007 22:17:55 +0100
From: "Patricio Galeas" <galeas@gmx.de>
Message-ID: <20070204211755.291150@gmx.net>
MIME-Version: 1.0
Subject: Lucene Index Size ...
To: java-user@lucene.apache.org
X-Authenticated: #24368204
X-Flags: 0001
X-Mailer: WWW-Mail 6100 (Global Message Exchange)
X-Priority: 3
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,
Where can I find some information about index size increments by using TermVector.WITH_POSITIONS?

Thank You 
Pat

-- 
"Feel free" - 10 GB Mailbox, 100 FreeSMS/Monat ...
Jetzt GMX TopMail testen: http://www.gmx.net/de/go/topmail?ac=OM.GX.GX003K11713T4783a

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 04 23:43:39 2007
Return-Path: <java-user-return-25929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5680 invoked from network); 4 Feb 2007 23:43:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2007 23:43:38 -0000
Received: (qmail 1043 invoked by uid 500); 4 Feb 2007 23:43:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1006 invoked by uid 500); 4 Feb 2007 23:43:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 995 invoked by uid 99); 4 Feb 2007 23:43:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Feb 2007 15:43:39 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Feb 2007 15:43:30 -0800
Received: from [192.168.222.102] (host102.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 261814A8141
	for <java-user@lucene.apache.org>; Mon,  5 Feb 2007 10:44:11 +1100 (EST)
Message-ID: <45C66F73.4060504@nuix.com>
Date: Mon, 05 Feb 2007 10:42:43 +1100
From: Daniel Noll <daniel@nuix.com>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 3.0a1 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Building lucene index using 100 Gb Mobile HardDisk
References: <786263.84709.qm@web60418.mail.yahoo.com>
In-Reply-To: <786263.84709.qm@web60418.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

maureen tanuwidjaja wrote:
> Oh is it?I didn't know about that...so Is it means I cant use this Mobile HDD..

You can always reformat the hard drive as NTFS.

Daniel

-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 05 12:13:54 2007
Return-Path: <java-user-return-25930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12683 invoked from network); 5 Feb 2007 12:13:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2007 12:13:52 -0000
Received: (qmail 37390 invoked by uid 500); 5 Feb 2007 12:13:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37183 invoked by uid 500); 5 Feb 2007 12:13:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37172 invoked by uid 99); 5 Feb 2007 12:13:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Feb 2007 04:13:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [85.118.4.17] (HELO snorlax.uk.scalix.com) (85.118.4.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Feb 2007 04:13:42 -0800
Received: from snorlax.uk.scalix.com (localhost.localdomain [127.0.0.1])
	by snorlax.uk.scalix.com (8.12.11.20060308/8.12.11) with ESMTP id l15CDKEV012178
	for <java-user@lucene.apache.org>; Mon, 5 Feb 2007 12:13:20 GMT
Received: from [10.11.108.231] (snorlax.uk.scalix.com [10.11.108.216])
    by snorlax.uk.scalix.com (Scalix SMTP Relay 11.0.1.11)
    via ESMTP; Mon, 05 Feb 2007 12:13:19 +0000 (GMT)
Date: Mon, 5 Feb 2007 12:13:15 +0000
From: John Haxby <jch@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <45C71F5B.20005@scalix.com>
In-Reply-To: <786263.84709.qm@web60418.mail.yahoo.com>
References: <786263.84709.qm@web60418.mail.yahoo.com>
Subject: Re: Building lucene index using 100 Gb Mobile HardDisk
x-scalix-Hops: 1
User-Agent: Thunderbird 1.5.0.9 (X11/20070130)
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII";
	format="flowed"
Content-Disposition: inline
X-Spam-Checker-Version: SpamAssassin 3.1.7 (2006-10-05) on 
	snorlax.uk.scalix.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.1.7

maureen tanuwidjaja wrote:
> Oh is it?I didn't know about that...so Is it means I cant use this Mobile HDD..
>
> Damien McCarthy <damien.mccarthy@propylon.com> wrote:  FAT 32 imposes a lower file size limitation than NTF. Attempts to create
> files greater that 4Gig on FAT32 will throw error you are seeing.
>   
Not at all, you just need to re-format the disk using a sensible file 
system.   If you're using Linux, that's ext3, if you're using Windows, NTFS.

If you have data on there you really want to keep and you can't back it 
up elsewhere while you do the re-format, then hunt down "gparted" -- it 
has a live CD that you can use to grow, shrink and move partitions so 
you'll be able to move stuff around your mobile disk while you shrink 
the FAT32 partition and grow the NTFS partition.  The shrink/grow/move 
cycle can take several hours though, depending on how often you have to 
do it (which in turn depends on how full the disk is).

jch

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 05 16:00:08 2007
Return-Path: <java-user-return-25931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4653 invoked from network); 5 Feb 2007 16:00:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2007 16:00:07 -0000
Received: (qmail 9114 invoked by uid 500); 5 Feb 2007 16:00:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9087 invoked by uid 500); 5 Feb 2007 16:00:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9076 invoked by uid 99); 5 Feb 2007 16:00:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Feb 2007 08:00:05 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [132.208.250.6] (HELO anis.telecom.uqam.ca) (132.208.250.6)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Feb 2007 07:59:55 -0800
Received: from anis.telecom.uqam.ca (anis.telecom.uqam.ca [132.208.250.6])
	by sortant.uqam.ca (8.13.8/8.12.1) with SMTP id l15Fj1qs016579
	for <java-user@lucene.apache.org>; Mon, 5 Feb 2007 10:45:16 -0500 (EST)
Received: from antivirus.uqam.ca ([127.0.0.1])
 by anis.telecom.uqam.ca (SAVSMTP 3.1.1.32) with SMTP id M2007020510451622237
 for <java-user@lucene.apache.org>; Mon, 05 Feb 2007 10:45:16 -0500
Received: from courriel2.sitel.uqam.ca (courriel2.sitel.uqam.ca [132.208.250.43])
	by intrant.uqam.ca (8.13.8/8.12.2/uqam-filtres) with ESMTP id l15Ffvw5027132
	for <java-user@lucene.apache.org>; Mon, 5 Feb 2007 10:41:58 -0500 (EST)
X-UQAM-Spam-Filter: Filtre-Uqam re:  abuse@uqam.ca
Received: from courrier.uqam.ca ([127.0.0.1]) by courriel2.sitel.uqam.ca
 (Sun Java System Messaging Server 6.1 HotFix 0.11 (built Jan 28 2005))
 with ESMTP id <0JCZ003UAY9WPV20@courriel2.sitel.uqam.ca> for
 java-user@lucene.apache.org; Mon, 05 Feb 2007 10:41:56 -0500 (EST)
Received: from [206.47.141.21] by courriel2.sitel.uqam.ca (mshttpd); Mon,
 05 Feb 2007 10:41:56 -0500
Date: Mon, 05 Feb 2007 10:41:56 -0500
From: Xavier To <to.xavier@courrier.uqam.ca>
Subject: Re: Problem with a search engine
To: java-user@lucene.apache.org
Message-id: <bc295b7932c3.45c709f4@courrier.uqam.ca>
MIME-version: 1.0
X-Mailer: Sun Java(tm) System Messenger Express 6.1 HotFix 0.11 (built Jan 28
 2005)
Content-type: text/plain; charset=utf-8
Content-language: fr
Content-transfer-encoding: quoted-printable
Content-disposition: inline
X-Accept-Language: fr
Priority: normal
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for taking time to answer me=2E The problem is that I=27m not all=
owed to post code due to a confidentiality contract that I was required =
to sign=2E I=27ll try to see if I can get a special permission to post c=
ode since I=27m wasting so much time trying to find the answer to this=2E=


I tried looking for each time the query is touched and numbers are still=
 present in the query=2E I don=27t know if it=27s the analyzer=2C but if=
 it was=2C woundl=27t the numbers be cut out of the index completely =3F=
 As I said in my 1st post=2C they are =22findable=22 with Lukeall=2E If =
I read right=2C the FrenchAnalyzer included in lucene is supposed to be =
based on StandardAnalyzer so I really fail to see what is going wrong=2E=
 Might it be the fact that the tokenizer used is Stringtokenizer and not=
 Tokenstream =3F The numbers are tokenized=2C and in the returned query =
they are present=2E=2E=2E=2E

I really don=27t know where they get zapped out of existence=2E=2E=2E =


Thanks again for helping=2E

Xavier T=C3=B4
Bacc=2E en Informatique et G=C3=A9nie Logiciel
to=2Exavier=40courrier=2Euqam=2Eca
(450)434-8905

------------------------------------------------------------------------=
--------------

Hard to tell without seeing any code=2E  Perhaps numbers are being remov=
ed from the query string
during search=2E
Make sure the same or at least =22compatible=22 Analyzer is used during =
both indexing and querying=2E
Grab the code from Lucene in Action =2E=2E=2E=2E hm=2C lucenebook=2Ecom =
may be down at the moment=2C but
that=27s where you can get the code normally=2E  The code includes some =
classes that let you run
a query string through a set of Analyzers and see how each of them behav=
es and what it does
to a query=2E

Otis

----- Original Message ----
From=3A =22To=2C Xavier=22 =3CXavier=2ETo=40axa-canada=2Ecom=3E
To=3A java-user=40lucene=2Eapache=2Eorg
Sent=3A Wednesday=2C January 31=2C 2007 12=3A21=3A27 AM
Subject=3A Problem with a search engine


Hi=2C I recently started an internship and I=27ve been asked to fix thei=
r
search engine so numbers are searched=2E At first=2C I thought it was th=
e
Analyzer that wasn=27t working right=2C but we=27re using StandardAnalyz=
er and
the numbers are indexed (I checked with Lukeall)=2E Then I thought they
are not tokenized during the search=2C but they are=2E They just seem to=
 be
ignored for some reason=2E Did anyone experienced something similar =3F =
If
so=2C how can I fix this =3F It=27s probably something that would jump i=
n my
face if it was alive=2C but I just can=27t see it=2E Can anyone help me =
=3F It
would be very much appreciated=2E


Xavier T=EF=BF=BD
Stagiaire
D=EF=BF=BDveloppement - Maintenance =26 =EF=BF=BDvolution =

AXA Canada Tech
2020=2C rue University=2C bureau 700
Montr=EF=BF=BDal(Qu=EF=BF=BDbec)H3A 2A5
T=EF=BF=BDl=2E =3A  (514) 282-6817=2C poste 2224
T=EF=BF=BDl=EF=BF=BDc=2E =3A  (514) 282-6017
Courriel =3A Xavier=2ETo=40axa-canada=2Ecom =3Cmailto=3AXavier=2ETo=40ax=
a-canada=2Ecom=3E
  =5F=5F=5F=5F=5F  =


=22Ce message est confidentiel=2C =EF=BF=BD l=27usage exclusif du destin=
ataire
ci-dessus et son contenu ne repr=EF=BF=BDsente en aucun cas un engagemen=
t de la
part de AXA=2C sauf en cas de stipulation expresse et par =EF=BF=BDcrit =
de la part
de AXA=2E Toute publication=2C utilisation ou diffusion=2C m=EF=BF=BDme =
partielle=2C
doit =EF=BF=BDtre autoris=EF=BF=BDe pr=EF=BF=BDalablement=2E Si vous n=27=
=EF=BF=BDtes pas destinataire de ce
message=2C merci d=27en avertir imm=EF=BF=BDdiatement l=27exp=EF=BF=BDdi=
teur=2E=22

=22This e-mail message is confidential=2C for the exclusive use of the
addressee and its contents shall not constitute a commitment by AXA=2C
except as otherwise specifically provided in writing by AXA=2E Any
unauthorized disclosure=2C use or dissemination=2C either whole or parti=
al=2C
is prohibited=2E If you are not the intended recipient of the message=2C=

please notify the sender immediately=2E=22

---------------------------------------------------------------------
To unsubscribe=2C e-mail=3A java-user-unsubscribe=40lucene=2Eapache=2Eor=
g
For additional commands=2C e-mail=3A java-user-help=40lucene=2Eapache=2E=
org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 05 16:12:16 2007
Return-Path: <java-user-return-25932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13945 invoked from network); 5 Feb 2007 16:12:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2007 16:12:15 -0000
Received: (qmail 36292 invoked by uid 500); 5 Feb 2007 16:12:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36264 invoked by uid 500); 5 Feb 2007 16:12:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36253 invoked by uid 99); 5 Feb 2007 16:12:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Feb 2007 08:12:14 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Feb 2007 08:12:05 -0800
Received: by nf-out-0910.google.com with SMTP id i2so303010nfe
        for <java-user@lucene.apache.org>; Mon, 05 Feb 2007 08:11:43 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Qy49wBoglHSHOjsswVhttsGjgKI5v4em8DIKXGTdvgtvJa+gX1lGFNXZ43lYr3Ooj/RhkReOai8uMQswnlUJCpyNHwW0IM6zya9oVSBg4t1eGqYNz33V4YpTeB5wYQcVLcP4hLliqiuzFyveJLpo4WqYm3QVxWg6UJmAraAPtM0=
Received: by 10.82.105.13 with SMTP id d13mr2157629buc.1170691903066;
        Mon, 05 Feb 2007 08:11:43 -0800 (PST)
Received: by 10.82.141.10 with HTTP; Mon, 5 Feb 2007 08:11:42 -0800 (PST)
Message-ID: <ab0709bf0702050811n5911c406mb58426ef6dd651f2@mail.gmail.com>
Date: Mon, 5 Feb 2007 11:11:43 -0500
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem with a search engine
In-Reply-To: <bc295b7932c3.45c709f4@courrier.uqam.ca>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_68021_95631.1170691903028"
References: <bc295b7932c3.45c709f4@courrier.uqam.ca>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_68021_95631.1170691903028
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline

U3RhbmRhcmRBbmFseXplciBkb2VzIG5vdCBpbmRleCBwdXJlIG51bWJlcnMuIEl0IHdpbGwgaW5k
ZXggYWxwaGFudW1lcmljCnRva2VucyBhbmQgbnVtYmVycyB0aGF0IGFyZSBjb25uZWN0ZWQgd2l0
aCBvbmUgb2Y6ICJfInwiLSJ8Ii8ifCIuInwiLCIgSWYKeW91IHdpc2ggdG8gaW5kZXggcHVyZSBu
dW1iZXJzIHlvdSBtaWdodCB3YW50IHRvIGFkZCBhbm90aGVyIHJlZ2V4IHRvClN0YW5kYXJkQW5h
bHl6ZXIgdGhhdCByZWNvZ25pemVzIGEgc2VyaWVzIG9mIGRpZ2l0cyAtIGRvbid0IGZvcmdldCB0
byBhZGQKdGhlIG5ldyB0b2tlbiB0eXBlIHRvIHRoZSBncmFtbWFyIGxvd2VyIGluIHRoZSBTdGFu
ZGFyZFRva2VuaXplci5qaiBmaWxlLgoKLSBNYXJrCgpPbiAyLzUvMDcsIFhhdmllciBUbyA8dG8u
eGF2aWVyQGNvdXJyaWVyLnVxYW0uY2E+IHdyb3RlOgo+Cj4gVGhhbmtzIGZvciB0YWtpbmcgdGlt
ZSB0byBhbnN3ZXIgbWUuIFRoZSBwcm9ibGVtIGlzIHRoYXQgSSdtIG5vdCBhbGxvd2VkCj4gdG8g
cG9zdCBjb2RlIGR1ZSB0byBhIGNvbmZpZGVudGlhbGl0eSBjb250cmFjdCB0aGF0IEkgd2FzIHJl
cXVpcmVkIHRvIHNpZ24uCj4gSSdsbCB0cnkgdG8gc2VlIGlmIEkgY2FuIGdldCBhIHNwZWNpYWwg
cGVybWlzc2lvbiB0byBwb3N0IGNvZGUgc2luY2UgSSdtCj4gd2FzdGluZyBzbyBtdWNoIHRpbWUg
dHJ5aW5nIHRvIGZpbmQgdGhlIGFuc3dlciB0byB0aGlzLgo+Cj4gSSB0cmllZCBsb29raW5nIGZv
ciBlYWNoIHRpbWUgdGhlIHF1ZXJ5IGlzIHRvdWNoZWQgYW5kIG51bWJlcnMgYXJlIHN0aWxsCj4g
cHJlc2VudCBpbiB0aGUgcXVlcnkuIEkgZG9uJ3Qga25vdyBpZiBpdCdzIHRoZSBhbmFseXplciwg
YnV0IGlmIGl0IHdhcywKPiB3b3VuZGwndCB0aGUgbnVtYmVycyBiZSBjdXQgb3V0IG9mIHRoZSBp
bmRleCBjb21wbGV0ZWx5ID8gQXMgSSBzYWlkIGluIG15Cj4gMXN0IHBvc3QsIHRoZXkgYXJlICJm
aW5kYWJsZSIgd2l0aCBMdWtlYWxsLiBJZiBJIHJlYWQgcmlnaHQsIHRoZQo+IEZyZW5jaEFuYWx5
emVyIGluY2x1ZGVkIGluIGx1Y2VuZSBpcyBzdXBwb3NlZCB0byBiZSBiYXNlZCBvbgo+IFN0YW5k
YXJkQW5hbHl6ZXIgc28gSSByZWFsbHkgZmFpbCB0byBzZWUgd2hhdCBpcyBnb2luZyB3cm9uZy4g
TWlnaHQgaXQgYmUKPiB0aGUgZmFjdCB0aGF0IHRoZSB0b2tlbml6ZXIgdXNlZCBpcyBTdHJpbmd0
b2tlbml6ZXIgYW5kIG5vdCBUb2tlbnN0cmVhbSA/Cj4gVGhlIG51bWJlcnMgYXJlIHRva2VuaXpl
ZCwgYW5kIGluIHRoZSByZXR1cm5lZCBxdWVyeSB0aGV5IGFyZSBwcmVzZW50Li4uLgo+Cj4gSSBy
ZWFsbHkgZG9uJ3Qga25vdyB3aGVyZSB0aGV5IGdldCB6YXBwZWQgb3V0IG9mIGV4aXN0ZW5jZS4u
Lgo+Cj4gVGhhbmtzIGFnYWluIGZvciBoZWxwaW5nLgo+Cj4gWGF2aWVyIFTDtAo+IEJhY2MuIGVu
IEluZm9ybWF0aXF1ZSBldCBHw6luaWUgTG9naWNpZWwKPiB0by54YXZpZXJAY291cnJpZXIudXFh
bS5jYQo+ICg0NTApNDM0LTg5MDUKPgo+Cj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0K
Pgo+IEhhcmQgdG8gdGVsbCB3aXRob3V0IHNlZWluZyBhbnkgY29kZS4gIFBlcmhhcHMgbnVtYmVy
cyBhcmUgYmVpbmcgcmVtb3ZlZAo+IGZyb20gdGhlIHF1ZXJ5IHN0cmluZwo+IGR1cmluZyBzZWFy
Y2guCj4gTWFrZSBzdXJlIHRoZSBzYW1lIG9yIGF0IGxlYXN0ICJjb21wYXRpYmxlIiBBbmFseXpl
ciBpcyB1c2VkIGR1cmluZyBib3RoCj4gaW5kZXhpbmcgYW5kIHF1ZXJ5aW5nLgo+IEdyYWIgdGhl
IGNvZGUgZnJvbSBMdWNlbmUgaW4gQWN0aW9uIC4uLi4gaG0sIGx1Y2VuZWJvb2suY29tIG1heSBi
ZSBkb3duIGF0Cj4gdGhlIG1vbWVudCwgYnV0Cj4gdGhhdCdzIHdoZXJlIHlvdSBjYW4gZ2V0IHRo
ZSBjb2RlIG5vcm1hbGx5LiAgVGhlIGNvZGUgaW5jbHVkZXMgc29tZQo+IGNsYXNzZXMgdGhhdCBs
ZXQgeW91IHJ1bgo+IGEgcXVlcnkgc3RyaW5nIHRocm91Z2ggYSBzZXQgb2YgQW5hbHl6ZXJzIGFu
ZCBzZWUgaG93IGVhY2ggb2YgdGhlbSBiZWhhdmVzCj4gYW5kIHdoYXQgaXQgZG9lcwo+IHRvIGEg
cXVlcnkuCj4KPiBPdGlzCj4KPiAtLS0tLSBPcmlnaW5hbCBNZXNzYWdlIC0tLS0KPiBGcm9tOiAi
VG8sIFhhdmllciIgPFhhdmllci5Ub0BheGEtY2FuYWRhLmNvbT4KPiBUbzogamF2YS11c2VyQGx1
Y2VuZS5hcGFjaGUub3JnCj4gU2VudDogV2VkbmVzZGF5LCBKYW51YXJ5IDMxLCAyMDA3IDEyOjIx
OjI3IEFNCj4gU3ViamVjdDogUHJvYmxlbSB3aXRoIGEgc2VhcmNoIGVuZ2luZQo+Cj4KPiBIaSwg
SSByZWNlbnRseSBzdGFydGVkIGFuIGludGVybnNoaXAgYW5kIEkndmUgYmVlbiBhc2tlZCB0byBm
aXggdGhlaXIKPiBzZWFyY2ggZW5naW5lIHNvIG51bWJlcnMgYXJlIHNlYXJjaGVkLiBBdCBmaXJz
dCwgSSB0aG91Z2h0IGl0IHdhcyB0aGUKPiBBbmFseXplciB0aGF0IHdhc24ndCB3b3JraW5nIHJp
Z2h0LCBidXQgd2UncmUgdXNpbmcgU3RhbmRhcmRBbmFseXplciBhbmQKPiB0aGUgbnVtYmVycyBh
cmUgaW5kZXhlZCAoSSBjaGVja2VkIHdpdGggTHVrZWFsbCkuIFRoZW4gSSB0aG91Z2h0IHRoZXkK
PiBhcmUgbm90IHRva2VuaXplZCBkdXJpbmcgdGhlIHNlYXJjaCwgYnV0IHRoZXkgYXJlLiBUaGV5
IGp1c3Qgc2VlbSB0byBiZQo+IGlnbm9yZWQgZm9yIHNvbWUgcmVhc29uLiBEaWQgYW55b25lIGV4
cGVyaWVuY2VkIHNvbWV0aGluZyBzaW1pbGFyID8gSWYKPiBzbywgaG93IGNhbiBJIGZpeCB0aGlz
ID8gSXQncyBwcm9iYWJseSBzb21ldGhpbmcgdGhhdCB3b3VsZCBqdW1wIGluIG15Cj4gZmFjZSBp
ZiBpdCB3YXMgYWxpdmUsIGJ1dCBJIGp1c3QgY2FuJ3Qgc2VlIGl0LiBDYW4gYW55b25lIGhlbHAg
bWUgPyBJdAo+IHdvdWxkIGJlIHZlcnkgbXVjaCBhcHByZWNpYXRlZC4KPgo+Cj4gWGF2aWVyIFTv
v70KPiBTdGFnaWFpcmUKPiBE77+9dmVsb3BwZW1lbnQgLSBNYWludGVuYW5jZSAmIO+/vXZvbHV0
aW9uCj4gQVhBIENhbmFkYSBUZWNoCj4gMjAyMCwgcnVlIFVuaXZlcnNpdHksIGJ1cmVhdSA3MDAK
PiBNb250cu+/vWFsKFF177+9YmVjKUgzQSAyQTUKPiBU77+9bC4gOiAgKDUxNCkgMjgyLTY4MTcs
IHBvc3RlIDIyMjQKPiBU77+9bO+/vWMuIDogICg1MTQpIDI4Mi02MDE3Cj4gQ291cnJpZWwgOiBY
YXZpZXIuVG9AYXhhLWNhbmFkYS5jb20gPG1haWx0bzpYYXZpZXIuVG9AYXhhLWNhbmFkYS5jb20+
Cj4gICBfX19fXwo+Cj4gIkNlIG1lc3NhZ2UgZXN0IGNvbmZpZGVudGllbCwg77+9IGwndXNhZ2Ug
ZXhjbHVzaWYgZHUgZGVzdGluYXRhaXJlCj4gY2ktZGVzc3VzIGV0IHNvbiBjb250ZW51IG5lIHJl
cHLvv71zZW50ZSBlbiBhdWN1biBjYXMgdW4gZW5nYWdlbWVudCBkZSBsYQo+IHBhcnQgZGUgQVhB
LCBzYXVmIGVuIGNhcyBkZSBzdGlwdWxhdGlvbiBleHByZXNzZSBldCBwYXIg77+9Y3JpdCBkZSBs
YSBwYXJ0Cj4gZGUgQVhBLiBUb3V0ZSBwdWJsaWNhdGlvbiwgdXRpbGlzYXRpb24gb3UgZGlmZnVz
aW9uLCBt77+9bWUgcGFydGllbGxlLAo+IGRvaXQg77+9dHJlIGF1dG9yaXPvv71lIHBy77+9YWxh
YmxlbWVudC4gU2kgdm91cyBuJ++/vXRlcyBwYXMgZGVzdGluYXRhaXJlIGRlIGNlCj4gbWVzc2Fn
ZSwgbWVyY2kgZCdlbiBhdmVydGlyIGltbe+/vWRpYXRlbWVudCBsJ2V4cO+/vWRpdGV1ci4iCj4K
PiAiVGhpcyBlLW1haWwgbWVzc2FnZSBpcyBjb25maWRlbnRpYWwsIGZvciB0aGUgZXhjbHVzaXZl
IHVzZSBvZiB0aGUKPiBhZGRyZXNzZWUgYW5kIGl0cyBjb250ZW50cyBzaGFsbCBub3QgY29uc3Rp
dHV0ZSBhIGNvbW1pdG1lbnQgYnkgQVhBLAo+IGV4Y2VwdCBhcyBvdGhlcndpc2Ugc3BlY2lmaWNh
bGx5IHByb3ZpZGVkIGluIHdyaXRpbmcgYnkgQVhBLiBBbnkKPiB1bmF1dGhvcml6ZWQgZGlzY2xv
c3VyZSwgdXNlIG9yIGRpc3NlbWluYXRpb24sIGVpdGhlciB3aG9sZSBvciBwYXJ0aWFsLAo+IGlz
IHByb2hpYml0ZWQuIElmIHlvdSBhcmUgbm90IHRoZSBpbnRlbmRlZCByZWNpcGllbnQgb2YgdGhl
IG1lc3NhZ2UsCj4gcGxlYXNlIG5vdGlmeSB0aGUgc2VuZGVyIGltbWVkaWF0ZWx5LiIKPgo+IC0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLQo+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmli
ZUBsdWNlbmUuYXBhY2hlLm9yZwo+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGph
dmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4KPgo+Cj4KPiAtLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiBU
byB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNo
ZS5vcmcKPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBs
dWNlbmUuYXBhY2hlLm9yZwo+Cj4K
------=_Part_68021_95631.1170691903028--

From java-user-return-25933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 05 16:22:02 2007
Return-Path: <java-user-return-25933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19026 invoked from network); 5 Feb 2007 16:22:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2007 16:22:01 -0000
Received: (qmail 58051 invoked by uid 500); 5 Feb 2007 16:22:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57818 invoked by uid 500); 5 Feb 2007 16:22:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57807 invoked by uid 99); 5 Feb 2007 16:22:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Feb 2007 08:22:00 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Feb 2007 08:21:51 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1371015ugc
        for <java-user@lucene.apache.org>; Mon, 05 Feb 2007 08:21:29 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=MKrRWuqkHAhD66u0SM5PQm6bCXNQB6jyZuKm9fMh0BmSzd1/GYbCDyHBtpz17V+3cGv4uGjF7kQFkj8YWym0V5/cMRjm2tv45VAy+ut5xC8SbRRaVvKVK9AdMbu1xS7dDLQmxQnc8u7OqDnp9+3O4/vpU535nGWunh9R0+ExmH8=
Received: by 10.82.135.13 with SMTP id i13mr2169717bud.1170692489473;
        Mon, 05 Feb 2007 08:21:29 -0800 (PST)
Received: by 10.82.141.10 with HTTP; Mon, 5 Feb 2007 08:21:29 -0800 (PST)
Message-ID: <ab0709bf0702050821g565f04e8nd32ee7fa59ff7cc7@mail.gmail.com>
Date: Mon, 5 Feb 2007 11:21:29 -0500
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem with a search engine
In-Reply-To: <ab0709bf0702050811n5911c406mb58426ef6dd651f2@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_68141_1621174.1170692489434"
References: <bc295b7932c3.45c709f4@courrier.uqam.ca>
	 <ab0709bf0702050811n5911c406mb58426ef6dd651f2@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_68141_1621174.1170692489434
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline

TXkgYmFkLi4ubG9va2luZyBhdCBhIG1vZGlmaWVkIFN0YW5kYXJkQW5hbHl6ZXIgaW5zdGVhZCBv
ZiB0aGUgY29ycmVjdCBvbmUuCkJlbGF5IGxhc3QuCgpPbiAyLzUvMDcsIE1hcmsgTWlsbGVyIDxt
YXJrcm1pbGxlckBnbWFpbC5jb20+IHdyb3RlOgo+Cj4gU3RhbmRhcmRBbmFseXplciBkb2VzIG5v
dCBpbmRleCBwdXJlIG51bWJlcnMuIEl0IHdpbGwgaW5kZXggYWxwaGFudW1lcmljCj4gdG9rZW5z
IGFuZCBudW1iZXJzIHRoYXQgYXJlIGNvbm5lY3RlZCB3aXRoIG9uZSBvZjogIl8ifCItInwiLyJ8
Ii4ifCIsIiBJZgo+IHlvdSB3aXNoIHRvIGluZGV4IHB1cmUgbnVtYmVycyB5b3UgbWlnaHQgd2Fu
dCB0byBhZGQgYW5vdGhlciByZWdleCB0bwo+IFN0YW5kYXJkQW5hbHl6ZXIgdGhhdCByZWNvZ25p
emVzIGEgc2VyaWVzIG9mIGRpZ2l0cyAtIGRvbid0IGZvcmdldCB0byBhZGQKPiB0aGUgbmV3IHRv
a2VuIHR5cGUgdG8gdGhlIGdyYW1tYXIgbG93ZXIgaW4gdGhlIFN0YW5kYXJkVG9rZW5pemVyLmpq
IGZpbGUuCj4KPiAtIE1hcmsKPgo+IE9uIDIvNS8wNywgWGF2aWVyIFRvIDx0by54YXZpZXJAY291
cnJpZXIudXFhbS5jYT4gd3JvdGU6Cj4gPgo+ID4gVGhhbmtzIGZvciB0YWtpbmcgdGltZSB0byBh
bnN3ZXIgbWUuIFRoZSBwcm9ibGVtIGlzIHRoYXQgSSdtIG5vdCBhbGxvd2VkCj4gPiB0byBwb3N0
IGNvZGUgZHVlIHRvIGEgY29uZmlkZW50aWFsaXR5IGNvbnRyYWN0IHRoYXQgSSB3YXMgcmVxdWly
ZWQgdG8gc2lnbi4KPiA+IEknbGwgdHJ5IHRvIHNlZSBpZiBJIGNhbiBnZXQgYSBzcGVjaWFsIHBl
cm1pc3Npb24gdG8gcG9zdCBjb2RlIHNpbmNlIEknbQo+ID4gd2FzdGluZyBzbyBtdWNoIHRpbWUg
dHJ5aW5nIHRvIGZpbmQgdGhlIGFuc3dlciB0byB0aGlzLgo+ID4KPiA+IEkgdHJpZWQgbG9va2lu
ZyBmb3IgZWFjaCB0aW1lIHRoZSBxdWVyeSBpcyB0b3VjaGVkIGFuZCBudW1iZXJzIGFyZSBzdGls
bAo+ID4gcHJlc2VudCBpbiB0aGUgcXVlcnkuIEkgZG9uJ3Qga25vdyBpZiBpdCdzIHRoZSBhbmFs
eXplciwgYnV0IGlmIGl0IHdhcywKPiA+IHdvdW5kbCd0IHRoZSBudW1iZXJzIGJlIGN1dCBvdXQg
b2YgdGhlIGluZGV4IGNvbXBsZXRlbHkgPyBBcyBJIHNhaWQgaW4gbXkKPiA+IDFzdCBwb3N0LCB0
aGV5IGFyZSAiZmluZGFibGUiIHdpdGggTHVrZWFsbC4gSWYgSSByZWFkIHJpZ2h0LCB0aGUKPiA+
IEZyZW5jaEFuYWx5emVyIGluY2x1ZGVkIGluIGx1Y2VuZSBpcyBzdXBwb3NlZCB0byBiZSBiYXNl
ZCBvbgo+ID4gU3RhbmRhcmRBbmFseXplciBzbyBJIHJlYWxseSBmYWlsIHRvIHNlZSB3aGF0IGlz
IGdvaW5nIHdyb25nLiBNaWdodCBpdCBiZQo+ID4gdGhlIGZhY3QgdGhhdCB0aGUgdG9rZW5pemVy
IHVzZWQgaXMgU3RyaW5ndG9rZW5pemVyIGFuZCBub3QgVG9rZW5zdHJlYW0gPwo+ID4gVGhlIG51
bWJlcnMgYXJlIHRva2VuaXplZCwgYW5kIGluIHRoZSByZXR1cm5lZCBxdWVyeSB0aGV5IGFyZSBw
cmVzZW50Li4uLgo+ID4KPiA+IEkgcmVhbGx5IGRvbid0IGtub3cgd2hlcmUgdGhleSBnZXQgemFw
cGVkIG91dCBvZiBleGlzdGVuY2UuLi4KPiA+Cj4gPiBUaGFua3MgYWdhaW4gZm9yIGhlbHBpbmcu
Cj4gPgo+ID4gWGF2aWVyIFTDtAo+ID4gQmFjYy4gZW4gSW5mb3JtYXRpcXVlIGV0IEfDqW5pZSBM
b2dpY2llbAo+ID4gdG8ueGF2aWVyQGNvdXJyaWVyLnVxYW0uY2EKPiA+ICg0NTApNDM0LTg5MDUK
PiA+Cj4gPgo+ID4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiA+Cj4gPiBIYXJkIHRv
IHRlbGwgd2l0aG91dCBzZWVpbmcgYW55IGNvZGUuICBQZXJoYXBzIG51bWJlcnMgYXJlIGJlaW5n
IHJlbW92ZWQKPiA+IGZyb20gdGhlIHF1ZXJ5IHN0cmluZwo+ID4gZHVyaW5nIHNlYXJjaC4KPiA+
IE1ha2Ugc3VyZSB0aGUgc2FtZSBvciBhdCBsZWFzdCAiY29tcGF0aWJsZSIgQW5hbHl6ZXIgaXMg
dXNlZCBkdXJpbmcgYm90aAo+ID4gaW5kZXhpbmcgYW5kIHF1ZXJ5aW5nLgo+ID4gR3JhYiB0aGUg
Y29kZSBmcm9tIEx1Y2VuZSBpbiBBY3Rpb24gLi4uLiBobSwgbHVjZW5lYm9vay5jb20gbWF5IGJl
IGRvd24KPiA+IGF0IHRoZSBtb21lbnQsIGJ1dAo+ID4gdGhhdCdzIHdoZXJlIHlvdSBjYW4gZ2V0
IHRoZSBjb2RlIG5vcm1hbGx5LiAgVGhlIGNvZGUgaW5jbHVkZXMgc29tZQo+ID4gY2xhc3NlcyB0
aGF0IGxldCB5b3UgcnVuCj4gPiBhIHF1ZXJ5IHN0cmluZyB0aHJvdWdoIGEgc2V0IG9mIEFuYWx5
emVycyBhbmQgc2VlIGhvdyBlYWNoIG9mIHRoZW0KPiA+IGJlaGF2ZXMgYW5kIHdoYXQgaXQgZG9l
cwo+ID4gdG8gYSBxdWVyeS4KPiA+Cj4gPiBPdGlzCj4gPgo+ID4gLS0tLS0gT3JpZ2luYWwgTWVz
c2FnZSAtLS0tCj4gPiBGcm9tOiAiVG8sIFhhdmllciIgPFhhdmllci5Ub0BheGEtY2FuYWRhLmNv
bT4KPiA+IFRvOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcKPiA+IFNlbnQ6IFdlZG5lc2Rh
eSwgSmFudWFyeSAzMSwgMjAwNyAxMjoyMToyNyBBTQo+ID4gU3ViamVjdDogUHJvYmxlbSB3aXRo
IGEgc2VhcmNoIGVuZ2luZQo+ID4KPiA+Cj4gPiBIaSwgSSByZWNlbnRseSBzdGFydGVkIGFuIGlu
dGVybnNoaXAgYW5kIEkndmUgYmVlbiBhc2tlZCB0byBmaXggdGhlaXIKPiA+IHNlYXJjaCBlbmdp
bmUgc28gbnVtYmVycyBhcmUgc2VhcmNoZWQuIEF0IGZpcnN0LCBJIHRob3VnaHQgaXQgd2FzIHRo
ZQo+ID4gQW5hbHl6ZXIgdGhhdCB3YXNuJ3Qgd29ya2luZyByaWdodCwgYnV0IHdlJ3JlIHVzaW5n
IFN0YW5kYXJkQW5hbHl6ZXIgYW5kCj4gPiB0aGUgbnVtYmVycyBhcmUgaW5kZXhlZCAoSSBjaGVj
a2VkIHdpdGggTHVrZWFsbCkuIFRoZW4gSSB0aG91Z2h0IHRoZXkKPiA+IGFyZSBub3QgdG9rZW5p
emVkIGR1cmluZyB0aGUgc2VhcmNoLCBidXQgdGhleSBhcmUuIFRoZXkganVzdCBzZWVtIHRvIGJl
Cj4gPiBpZ25vcmVkIGZvciBzb21lIHJlYXNvbi4gRGlkIGFueW9uZSBleHBlcmllbmNlZCBzb21l
dGhpbmcgc2ltaWxhciA/IElmCj4gPiBzbywgaG93IGNhbiBJIGZpeCB0aGlzID8gSXQncyBwcm9i
YWJseSBzb21ldGhpbmcgdGhhdCB3b3VsZCBqdW1wIGluIG15Cj4gPiBmYWNlIGlmIGl0IHdhcyBh
bGl2ZSwgYnV0IEkganVzdCBjYW4ndCBzZWUgaXQuIENhbiBhbnlvbmUgaGVscCBtZSA/IEl0Cj4g
PiB3b3VsZCBiZSB2ZXJ5IG11Y2ggYXBwcmVjaWF0ZWQuCj4gPgo+ID4KPiA+IFhhdmllciBU77+9
Cj4gPiBTdGFnaWFpcmUKPiA+IETvv712ZWxvcHBlbWVudCAtIE1haW50ZW5hbmNlICYg77+9dm9s
dXRpb24KPiA+IEFYQSBDYW5hZGEgVGVjaAo+ID4gMjAyMCwgcnVlIFVuaXZlcnNpdHksIGJ1cmVh
dSA3MDAKPiA+IE1vbnRy77+9YWwoUXXvv71iZWMpSDNBIDJBNQo+ID4gVO+/vWwuIDogICg1MTQp
IDI4Mi02ODE3LCBwb3N0ZSAyMjI0Cj4gPiBU77+9bO+/vWMuIDogICg1MTQpIDI4Mi02MDE3Cj4g
PiBDb3VycmllbCA6IFhhdmllci5Ub0BheGEtY2FuYWRhLmNvbSA8bWFpbHRvOlhhdmllci5Ub0Bh
eGEtY2FuYWRhLmNvbT4KPiA+ICAgX19fX18KPiA+Cj4gPiAiQ2UgbWVzc2FnZSBlc3QgY29uZmlk
ZW50aWVsLCDvv70gbCd1c2FnZSBleGNsdXNpZiBkdSBkZXN0aW5hdGFpcmUKPiA+IGNpLWRlc3N1
cyBldCBzb24gY29udGVudSBuZSByZXBy77+9c2VudGUgZW4gYXVjdW4gY2FzIHVuIGVuZ2FnZW1l
bnQgZGUgbGEKPiA+IHBhcnQgZGUgQVhBLCBzYXVmIGVuIGNhcyBkZSBzdGlwdWxhdGlvbiBleHBy
ZXNzZSBldCBwYXIg77+9Y3JpdCBkZSBsYSBwYXJ0Cj4gPiBkZSBBWEEuIFRvdXRlIHB1YmxpY2F0
aW9uLCB1dGlsaXNhdGlvbiBvdSBkaWZmdXNpb24sIG3vv71tZSBwYXJ0aWVsbGUsCj4gPiBkb2l0
IO+/vXRyZSBhdXRvcmlz77+9ZSBwcu+/vWFsYWJsZW1lbnQuIFNpIHZvdXMgbifvv710ZXMgcGFz
IGRlc3RpbmF0YWlyZSBkZSBjZQo+ID4gbWVzc2FnZSwgbWVyY2kgZCdlbiBhdmVydGlyIGltbe+/
vWRpYXRlbWVudCBsJ2V4cO+/vWRpdGV1ci4iCj4gPgo+ID4gIlRoaXMgZS1tYWlsIG1lc3NhZ2Ug
aXMgY29uZmlkZW50aWFsLCBmb3IgdGhlIGV4Y2x1c2l2ZSB1c2Ugb2YgdGhlCj4gPiBhZGRyZXNz
ZWUgYW5kIGl0cyBjb250ZW50cyBzaGFsbCBub3QgY29uc3RpdHV0ZSBhIGNvbW1pdG1lbnQgYnkg
QVhBLAo+ID4gZXhjZXB0IGFzIG90aGVyd2lzZSBzcGVjaWZpY2FsbHkgcHJvdmlkZWQgaW4gd3Jp
dGluZyBieSBBWEEuIEFueQo+ID4gdW5hdXRob3JpemVkIGRpc2Nsb3N1cmUsIHVzZSBvciBkaXNz
ZW1pbmF0aW9uLCBlaXRoZXIgd2hvbGUgb3IgcGFydGlhbCwKPiA+IGlzIHByb2hpYml0ZWQuIElm
IHlvdSBhcmUgbm90IHRoZSBpbnRlbmRlZCByZWNpcGllbnQgb2YgdGhlIG1lc3NhZ2UsCj4gPiBw
bGVhc2Ugbm90aWZ5IHRoZSBzZW5kZXIgaW1tZWRpYXRlbHkuIgo+ID4KPiA+IC0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LQo+ID4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2Vu
ZS5hcGFjaGUub3JnCj4gPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVz
ZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+ID4KPiA+Cj4gPgo+ID4KPiA+IC0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LQo+ID4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2Vu
ZS5hcGFjaGUub3JnCj4gPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVz
ZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+ID4KPiA+Cj4K
------=_Part_68141_1621174.1170692489434--

From java-user-return-25934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 05 16:43:30 2007
Return-Path: <java-user-return-25934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28055 invoked from network); 5 Feb 2007 16:43:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2007 16:43:29 -0000
Received: (qmail 93686 invoked by uid 500); 5 Feb 2007 16:43:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92781 invoked by uid 500); 5 Feb 2007 16:43:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92770 invoked by uid 99); 5 Feb 2007 16:43:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Feb 2007 08:43:29 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [132.208.250.6] (HELO anis.telecom.uqam.ca) (132.208.250.6)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Feb 2007 08:43:18 -0800
Received: from anis.telecom.uqam.ca (anis.telecom.uqam.ca [132.208.250.6])
	by sortant.uqam.ca (8.13.8/8.12.1) with SMTP id l15GYE8Q002882
	for <java-user@lucene.apache.org>; Mon, 5 Feb 2007 11:34:20 -0500 (EST)
Received: from antivirus.uqam.ca ([127.0.0.1])
 by anis.telecom.uqam.ca (SAVSMTP 3.1.1.32) with SMTP id M2007020511342024542
 for <java-user@lucene.apache.org>; Mon, 05 Feb 2007 11:34:20 -0500
Received: from courriel2.sitel.uqam.ca (courriel2.sitel.uqam.ca [132.208.250.43])
	by intrant.uqam.ca (8.13.8/8.12.2/uqam-filtres) with ESMTP id l15GW4NN016228
	for <java-user@lucene.apache.org>; Mon, 5 Feb 2007 11:32:04 -0500 (EST)
X-UQAM-Spam-Filter: Filtre-Uqam re:  abuse@uqam.ca
Received: from courrier.uqam.ca ([127.0.0.1]) by courriel2.sitel.uqam.ca
 (Sun Java System Messaging Server 6.1 HotFix 0.11 (built Jan 28 2005))
 with ESMTP id <0JD00035K0LEPO30@courriel2.sitel.uqam.ca> for
 java-user@lucene.apache.org; Mon, 05 Feb 2007 11:32:02 -0500 (EST)
Received: from [206.47.141.21] by courriel2.sitel.uqam.ca (mshttpd); Mon,
 05 Feb 2007 11:32:02 -0500
Date: Mon, 05 Feb 2007 11:32:02 -0500
From: Xavier To <to.xavier@courrier.uqam.ca>
Subject: Re : Re: Problem with a search engine
To: java-user@lucene.apache.org
Message-id: <d078775a2934.45c715b2@courrier.uqam.ca>
MIME-version: 1.0
X-Mailer: Sun Java(tm) System Messenger Express 6.1 HotFix 0.11 (built Jan 28
 2005)
Content-type: text/plain; charset=utf-8
Content-language: fr
Content-transfer-encoding: quoted-printable
Content-disposition: inline
X-Accept-Language: fr
Priority: normal
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for your help=2C

As I stated before=2C the numbers=2C whether pure or not=2C are indexed=2C=
 for I can search them with luke=2E But supposing what you=27re saying w=
as the case=2C the search for =2210-year=22 should return 4 items (accor=
ding to the number of occurence found by luke)=2E Problem is that the nu=
mber of documents returned is 6=2C for it ignored the =2210=22 and searc=
hed for =22-year=22=2E

Xavier T=C3=B4
Bacc=2E en Informatique et G=C3=A9nie Logiciel
to=2Exavier=40courrier=2Euqam=2Eca
(450)434-8905

----- Message d=27origine -----
De=3A Mark Miller =3Cmarkrmiller=40gmail=2Ecom=3E
Date=3A Lundi=2C F=C3=A9vrier 5=2C 2007 11=3A11 am
Objet=3A Re=3A Problem with a search engine

=3E StandardAnalyzer does not index pure numbers=2E It will index =

=3E alphanumerictokens and numbers that are connected with one of=3A =

=3E =22=5F=22=7C=22-=22=7C=22/=22=7C=22=2E=22=7C=22=2C=22 If
=3E you wish to index pure numbers you might want to add another regex t=
o
=3E StandardAnalyzer that recognizes a series of digits - don=27t forget=
 =

=3E to add
=3E the new token type to the grammar lower in the StandardTokenizer=2Ej=
j =

=3E file=2E
=3E - Mark
=3E =

=3E On 2/5/07=2C Xavier To =3Cto=2Exavier=40courrier=2Euqam=2Eca=3E wrot=
e=3A
=3E =3E
=3E =3E Thanks for taking time to answer me=2E The problem is that I=27m=
 not =

=3E allowed=3E to post code due to a confidentiality contract that I was=
 =

=3E required to sign=2E
=3E =3E I=27ll try to see if I can get a special permission to post code=
 =

=3E since I=27m
=3E =3E wasting so much time trying to find the answer to this=2E
=3E =3E
=3E =3E I tried looking for each time the query is touched and numbers =

=3E are still
=3E =3E present in the query=2E I don=27t know if it=27s the analyzer=2C=
 but if =

=3E it was=2C
=3E =3E woundl=27t the numbers be cut out of the index completely =3F As=
 I =

=3E said in my
=3E =3E 1st post=2C they are =22findable=22 with Lukeall=2E If I read ri=
ght=2C the
=3E =3E FrenchAnalyzer included in lucene is supposed to be based on
=3E =3E StandardAnalyzer so I really fail to see what is going wrong=2E =

=3E Might it be
=3E =3E the fact that the tokenizer used is Stringtokenizer and not =

=3E Tokenstream =3F
=3E =3E The numbers are tokenized=2C and in the returned query they are =

=3E present=2E=2E=2E=2E=3E
=3E =3E I really don=27t know where they get zapped out of existence=2E=2E=
=2E
=3E =3E
=3E =3E Thanks again for helping=2E
=3E =3E
=3E =3E Xavier T=C3=B4
=3E =3E Bacc=2E en Informatique et G=C3=A9nie Logiciel
=3E =3E to=2Exavier=40courrier=2Euqam=2Eca
=3E =3E (450)434-8905
=3E =3E
=3E =3E
=3E =3E ----------------------------------------------------------------=
--
=3E --------------------
=3E =3E
=3E =3E Hard to tell without seeing any code=2E  Perhaps numbers are bei=
ng =

=3E removed=3E from the query string
=3E =3E during search=2E
=3E =3E Make sure the same or at least =22compatible=22 Analyzer is used=
 =

=3E during both
=3E =3E indexing and querying=2E
=3E =3E Grab the code from Lucene in Action =2E=2E=2E=2E hm=2C luceneboo=
k=2Ecom may =

=3E be down at
=3E =3E the moment=2C but
=3E =3E that=27s where you can get the code normally=2E  The code includ=
es some
=3E =3E classes that let you run
=3E =3E a query string through a set of Analyzers and see how each of =

=3E them behaves
=3E =3E and what it does
=3E =3E to a query=2E
=3E =3E
=3E =3E Otis
=3E =3E
=3E =3E ----- Original Message ----
=3E =3E From=3A =22To=2C Xavier=22 =3CXavier=2ETo=40axa-canada=2Ecom=3E
=3E =3E To=3A java-user=40lucene=2Eapache=2Eorg
=3E =3E Sent=3A Wednesday=2C January 31=2C 2007 12=3A21=3A27 AM
=3E =3E Subject=3A Problem with a search engine
=3E =3E
=3E =3E
=3E =3E Hi=2C I recently started an internship and I=27ve been asked to =
fix =

=3E their=3E search engine so numbers are searched=2E At first=2C I thou=
ght =

=3E it was the
=3E =3E Analyzer that wasn=27t working right=2C but we=27re using =

=3E StandardAnalyzer and
=3E =3E the numbers are indexed (I checked with Lukeall)=2E Then I thoug=
ht =

=3E they=3E are not tokenized during the search=2C but they are=2E They =
just =

=3E seem to be
=3E =3E ignored for some reason=2E Did anyone experienced something simi=
lar =

=3E =3F If
=3E =3E so=2C how can I fix this =3F It=27s probably something that woul=
d jump =

=3E in my
=3E =3E face if it was alive=2C but I just can=27t see it=2E Can anyone =
help me =

=3E =3F It
=3E =3E would be very much appreciated=2E
=3E =3E
=3E =3E
=3E =3E Xavier T=EF=BF=BD
=3E =3E Stagiaire
=3E =3E D=EF=BF=BDveloppement - Maintenance =26 =EF=BF=BDvolution
=3E =3E AXA Canada Tech
=3E =3E 2020=2C rue University=2C bureau 700
=3E =3E Montr=EF=BF=BDal(Qu=EF=BF=BDbec)H3A 2A5
=3E =3E T=EF=BF=BDl=2E =3A  (514) 282-6817=2C poste 2224
=3E =3E T=EF=BF=BDl=EF=BF=BDc=2E =3A  (514) 282-6017
=3E =3E Courriel =3A Xavier=2ETo=40axa-canada=2Ecom =3CXavier=2ETo=40axa=
-canada=2Ecom=3E
=3E =3E   =5F=5F=5F=5F=5F
=3E =3E
=3E =3E =22Ce message est confidentiel=2C =EF=BF=BD l=27usage exclusif d=
u destinataire
=3E =3E ci-dessus et son contenu ne repr=EF=BF=BDsente en aucun cas un e=
ngagement =

=3E de la
=3E =3E part de AXA=2C sauf en cas de stipulation expresse et par =EF=BF=
=BDcrit de =

=3E la part
=3E =3E de AXA=2E Toute publication=2C utilisation ou diffusion=2C m=EF=BF=
=BDme partielle=2C
=3E =3E doit =EF=BF=BDtre autoris=EF=BF=BDe pr=EF=BF=BDalablement=2E Si =
vous n=27=EF=BF=BDtes pas =

=3E destinataire de ce
=3E =3E message=2C merci d=27en avertir imm=EF=BF=BDdiatement l=27exp=EF=
=BF=BDditeur=2E=22
=3E =3E
=3E =3E =22This e-mail message is confidential=2C for the exclusive use =
of the
=3E =3E addressee and its contents shall not constitute a commitment by =
AXA=2C
=3E =3E except as otherwise specifically provided in writing by AXA=2E A=
ny
=3E =3E unauthorized disclosure=2C use or dissemination=2C either whole =
or =

=3E partial=2C=3E is prohibited=2E If you are not the intended recipient=
 of =

=3E the message=2C
=3E =3E please notify the sender immediately=2E=22
=3E =3E
=3E =3E ----------------------------------------------------------------=
--
=3E ---
=3E =3E To unsubscribe=2C e-mail=3A java-user-unsubscribe=40lucene=2Eapa=
che=2Eorg
=3E =3E For additional commands=2C e-mail=3A java-user-help=40lucene=2Ea=
pache=2Eorg
=3E =3E
=3E =3E
=3E =3E
=3E =3E
=3E =3E ----------------------------------------------------------------=
--
=3E ---
=3E =3E To unsubscribe=2C e-mail=3A java-user-unsubscribe=40lucene=2Eapa=
che=2Eorg
=3E =3E For additional commands=2C e-mail=3A java-user-help=40lucene=2Ea=
pache=2Eorg
=3E =3E
=3E =3E
=3E 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 05 17:38:05 2007
Return-Path: <java-user-return-25935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55536 invoked from network); 5 Feb 2007 17:38:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2007 17:38:04 -0000
Received: (qmail 10780 invoked by uid 500); 5 Feb 2007 17:38:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10507 invoked by uid 500); 5 Feb 2007 17:38:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10496 invoked by uid 99); 5 Feb 2007 17:38:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Feb 2007 09:38:04 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Feb 2007 09:37:55 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1392875ugc
        for <java-user@lucene.apache.org>; Mon, 05 Feb 2007 09:37:28 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=OPvrwL/EGdIdnDeSx0BEZbQpYFL0MEVSHOGdUmgico1I1lelKLqKrA3HDdoBFbu8X4ae1HeDjKq5dHYXsIEpH00ZauAMNqSE24mqmZ976LH5m19iQPWhvAHJypIYjuGhj31cXW+9EvxH2fpm2CSDyghEyuTTC7tweVn9GhaQx0I=
Received: by 10.82.169.4 with SMTP id r4mr77981bue.1170697047984;
        Mon, 05 Feb 2007 09:37:27 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Mon, 5 Feb 2007 09:37:27 -0800 (PST)
Message-ID: <359a92830702050937s52888d7aq75b0e88d121dc0e6@mail.gmail.com>
Date: Mon, 5 Feb 2007 12:37:27 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Re : Re: Problem with a search engine
In-Reply-To: <d078775a2934.45c715b2@courrier.uqam.ca>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_73145_15733959.1170697047833"
References: <d078775a2934.45c715b2@courrier.uqam.ca>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_73145_15733959.1170697047833
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline

SGF2ZSB5b3UgdHJpZWQgbG9va2luZyBhdCB0aGUgYWN0dWFsIHF1ZXJ5IHN1Ym1pdHRlZCB3aXRo
IFF1ZXJ5LnRvU3RyaW5nKCk/ClRoYXQgbWlnaHQgZ2l2ZSB5b3UgYW4gaW5zaWdodCBpbnRvIHdo
YXQgaXMgYWN0dWFsbHkgYmVpbmcgc3VibWl0dGVkIHRvCkx1Y2VuZSBhbmQgYSBwbGFjZSB0byBz
dGFydC4KCkFsc28gYmUgYXdhcmUgdGhhdCBRdWVyeVBhcnNlciwgdGhlIGRlZmF1bHQgb3BlcmF0
b3IgaXMgT1Igd2hpY2ggY2FuIHByb2R1Y2UKdW5leHBlY3RlZCByZXN1bHRzIGlmIHlvdSBhc3N1
bWUgQU5ELgoKQmVzdApFcmljawoKT24gMi81LzA3LCBYYXZpZXIgVG8gPHRvLnhhdmllckBjb3Vy
cmllci51cWFtLmNhPiB3cm90ZToKPgo+IFRoYW5rcyBmb3IgeW91ciBoZWxwLAo+Cj4gQXMgSSBz
dGF0ZWQgYmVmb3JlLCB0aGUgbnVtYmVycywgd2hldGhlciBwdXJlIG9yIG5vdCwgYXJlIGluZGV4
ZWQsIGZvciBJCj4gY2FuIHNlYXJjaCB0aGVtIHdpdGggbHVrZS4gQnV0IHN1cHBvc2luZyB3aGF0
IHlvdSdyZSBzYXlpbmcgd2FzIHRoZSBjYXNlLAo+IHRoZSBzZWFyY2ggZm9yICIxMC15ZWFyIiBz
aG91bGQgcmV0dXJuIDQgaXRlbXMgKGFjY29yZGluZyB0byB0aGUgbnVtYmVyIG9mCj4gb2NjdXJl
bmNlIGZvdW5kIGJ5IGx1a2UpLiBQcm9ibGVtIGlzIHRoYXQgdGhlIG51bWJlciBvZiBkb2N1bWVu
dHMgcmV0dXJuZWQKPiBpcyA2LCBmb3IgaXQgaWdub3JlZCB0aGUgIjEwIiBhbmQgc2VhcmNoZWQg
Zm9yICIteWVhciIuCj4KPiBYYXZpZXIgVMO0Cj4gQmFjYy4gZW4gSW5mb3JtYXRpcXVlIGV0IEfD
qW5pZSBMb2dpY2llbAo+IHRvLnhhdmllckBjb3Vycmllci51cWFtLmNhCj4gKDQ1MCk0MzQtODkw
NQo+Cj4gLS0tLS0gTWVzc2FnZSBkJ29yaWdpbmUgLS0tLS0KPiBEZTogTWFyayBNaWxsZXIgPG1h
cmtybWlsbGVyQGdtYWlsLmNvbT4KPiBEYXRlOiBMdW5kaSwgRsOpdnJpZXIgNSwgMjAwNyAxMTox
MSBhbQo+IE9iamV0OiBSZTogUHJvYmxlbSB3aXRoIGEgc2VhcmNoIGVuZ2luZQo+Cj4gPiBTdGFu
ZGFyZEFuYWx5emVyIGRvZXMgbm90IGluZGV4IHB1cmUgbnVtYmVycy4gSXQgd2lsbCBpbmRleAo+
ID4gYWxwaGFudW1lcmljdG9rZW5zIGFuZCBudW1iZXJzIHRoYXQgYXJlIGNvbm5lY3RlZCB3aXRo
IG9uZSBvZjoKPiA+ICJfInwiLSJ8Ii8ifCIuInwiLCIgSWYKPiA+IHlvdSB3aXNoIHRvIGluZGV4
IHB1cmUgbnVtYmVycyB5b3UgbWlnaHQgd2FudCB0byBhZGQgYW5vdGhlciByZWdleCB0bwo+ID4g
U3RhbmRhcmRBbmFseXplciB0aGF0IHJlY29nbml6ZXMgYSBzZXJpZXMgb2YgZGlnaXRzIC0gZG9u
J3QgZm9yZ2V0Cj4gPiB0byBhZGQKPiA+IHRoZSBuZXcgdG9rZW4gdHlwZSB0byB0aGUgZ3JhbW1h
ciBsb3dlciBpbiB0aGUgU3RhbmRhcmRUb2tlbml6ZXIuamoKPiA+IGZpbGUuCj4gPiAtIE1hcmsK
PiA+Cj4gPiBPbiAyLzUvMDcsIFhhdmllciBUbyA8dG8ueGF2aWVyQGNvdXJyaWVyLnVxYW0uY2E+
IHdyb3RlOgo+ID4gPgo+ID4gPiBUaGFua3MgZm9yIHRha2luZyB0aW1lIHRvIGFuc3dlciBtZS4g
VGhlIHByb2JsZW0gaXMgdGhhdCBJJ20gbm90Cj4gPiBhbGxvd2VkPiB0byBwb3N0IGNvZGUgZHVl
IHRvIGEgY29uZmlkZW50aWFsaXR5IGNvbnRyYWN0IHRoYXQgSSB3YXMKPiA+IHJlcXVpcmVkIHRv
IHNpZ24uCj4gPiA+IEknbGwgdHJ5IHRvIHNlZSBpZiBJIGNhbiBnZXQgYSBzcGVjaWFsIHBlcm1p
c3Npb24gdG8gcG9zdCBjb2RlCj4gPiBzaW5jZSBJJ20KPiA+ID4gd2FzdGluZyBzbyBtdWNoIHRp
bWUgdHJ5aW5nIHRvIGZpbmQgdGhlIGFuc3dlciB0byB0aGlzLgo+ID4gPgo+ID4gPiBJIHRyaWVk
IGxvb2tpbmcgZm9yIGVhY2ggdGltZSB0aGUgcXVlcnkgaXMgdG91Y2hlZCBhbmQgbnVtYmVycwo+
ID4gYXJlIHN0aWxsCj4gPiA+IHByZXNlbnQgaW4gdGhlIHF1ZXJ5LiBJIGRvbid0IGtub3cgaWYg
aXQncyB0aGUgYW5hbHl6ZXIsIGJ1dCBpZgo+ID4gaXQgd2FzLAo+ID4gPiB3b3VuZGwndCB0aGUg
bnVtYmVycyBiZSBjdXQgb3V0IG9mIHRoZSBpbmRleCBjb21wbGV0ZWx5ID8gQXMgSQo+ID4gc2Fp
ZCBpbiBteQo+ID4gPiAxc3QgcG9zdCwgdGhleSBhcmUgImZpbmRhYmxlIiB3aXRoIEx1a2VhbGwu
IElmIEkgcmVhZCByaWdodCwgdGhlCj4gPiA+IEZyZW5jaEFuYWx5emVyIGluY2x1ZGVkIGluIGx1
Y2VuZSBpcyBzdXBwb3NlZCB0byBiZSBiYXNlZCBvbgo+ID4gPiBTdGFuZGFyZEFuYWx5emVyIHNv
IEkgcmVhbGx5IGZhaWwgdG8gc2VlIHdoYXQgaXMgZ29pbmcgd3JvbmcuCj4gPiBNaWdodCBpdCBi
ZQo+ID4gPiB0aGUgZmFjdCB0aGF0IHRoZSB0b2tlbml6ZXIgdXNlZCBpcyBTdHJpbmd0b2tlbml6
ZXIgYW5kIG5vdAo+ID4gVG9rZW5zdHJlYW0gPwo+ID4gPiBUaGUgbnVtYmVycyBhcmUgdG9rZW5p
emVkLCBhbmQgaW4gdGhlIHJldHVybmVkIHF1ZXJ5IHRoZXkgYXJlCj4gPiBwcmVzZW50Li4uLj4K
PiA+ID4gSSByZWFsbHkgZG9uJ3Qga25vdyB3aGVyZSB0aGV5IGdldCB6YXBwZWQgb3V0IG9mIGV4
aXN0ZW5jZS4uLgo+ID4gPgo+ID4gPiBUaGFua3MgYWdhaW4gZm9yIGhlbHBpbmcuCj4gPiA+Cj4g
PiA+IFhhdmllciBUw7QKPiA+ID4gQmFjYy4gZW4gSW5mb3JtYXRpcXVlIGV0IEfDqW5pZSBMb2dp
Y2llbAo+ID4gPiB0by54YXZpZXJAY291cnJpZXIudXFhbS5jYQo+ID4gPiAoNDUwKTQzNC04OTA1
Cj4gPiA+Cj4gPiA+Cj4gPiA+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+ID4gLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiA+
ID4KPiA+ID4gSGFyZCB0byB0ZWxsIHdpdGhvdXQgc2VlaW5nIGFueSBjb2RlLiAgUGVyaGFwcyBu
dW1iZXJzIGFyZSBiZWluZwo+ID4gcmVtb3ZlZD4gZnJvbSB0aGUgcXVlcnkgc3RyaW5nCj4gPiA+
IGR1cmluZyBzZWFyY2guCj4gPiA+IE1ha2Ugc3VyZSB0aGUgc2FtZSBvciBhdCBsZWFzdCAiY29t
cGF0aWJsZSIgQW5hbHl6ZXIgaXMgdXNlZAo+ID4gZHVyaW5nIGJvdGgKPiA+ID4gaW5kZXhpbmcg
YW5kIHF1ZXJ5aW5nLgo+ID4gPiBHcmFiIHRoZSBjb2RlIGZyb20gTHVjZW5lIGluIEFjdGlvbiAu
Li4uIGhtLCBsdWNlbmVib29rLmNvbSBtYXkKPiA+IGJlIGRvd24gYXQKPiA+ID4gdGhlIG1vbWVu
dCwgYnV0Cj4gPiA+IHRoYXQncyB3aGVyZSB5b3UgY2FuIGdldCB0aGUgY29kZSBub3JtYWxseS4g
IFRoZSBjb2RlIGluY2x1ZGVzIHNvbWUKPiA+ID4gY2xhc3NlcyB0aGF0IGxldCB5b3UgcnVuCj4g
PiA+IGEgcXVlcnkgc3RyaW5nIHRocm91Z2ggYSBzZXQgb2YgQW5hbHl6ZXJzIGFuZCBzZWUgaG93
IGVhY2ggb2YKPiA+IHRoZW0gYmVoYXZlcwo+ID4gPiBhbmQgd2hhdCBpdCBkb2VzCj4gPiA+IHRv
IGEgcXVlcnkuCj4gPiA+Cj4gPiA+IE90aXMKPiA+ID4KPiA+ID4gLS0tLS0gT3JpZ2luYWwgTWVz
c2FnZSAtLS0tCj4gPiA+IEZyb206ICJUbywgWGF2aWVyIiA8WGF2aWVyLlRvQGF4YS1jYW5hZGEu
Y29tPgo+ID4gPiBUbzogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnCj4gPiA+IFNlbnQ6IFdl
ZG5lc2RheSwgSmFudWFyeSAzMSwgMjAwNyAxMjoyMToyNyBBTQo+ID4gPiBTdWJqZWN0OiBQcm9i
bGVtIHdpdGggYSBzZWFyY2ggZW5naW5lCj4gPiA+Cj4gPiA+Cj4gPiA+IEhpLCBJIHJlY2VudGx5
IHN0YXJ0ZWQgYW4gaW50ZXJuc2hpcCBhbmQgSSd2ZSBiZWVuIGFza2VkIHRvIGZpeAo+ID4gdGhl
aXI+IHNlYXJjaCBlbmdpbmUgc28gbnVtYmVycyBhcmUgc2VhcmNoZWQuIEF0IGZpcnN0LCBJIHRo
b3VnaHQKPiA+IGl0IHdhcyB0aGUKPiA+ID4gQW5hbHl6ZXIgdGhhdCB3YXNuJ3Qgd29ya2luZyBy
aWdodCwgYnV0IHdlJ3JlIHVzaW5nCj4gPiBTdGFuZGFyZEFuYWx5emVyIGFuZAo+ID4gPiB0aGUg
bnVtYmVycyBhcmUgaW5kZXhlZCAoSSBjaGVja2VkIHdpdGggTHVrZWFsbCkuIFRoZW4gSSB0aG91
Z2h0Cj4gPiB0aGV5PiBhcmUgbm90IHRva2VuaXplZCBkdXJpbmcgdGhlIHNlYXJjaCwgYnV0IHRo
ZXkgYXJlLiBUaGV5IGp1c3QKPiA+IHNlZW0gdG8gYmUKPiA+ID4gaWdub3JlZCBmb3Igc29tZSBy
ZWFzb24uIERpZCBhbnlvbmUgZXhwZXJpZW5jZWQgc29tZXRoaW5nIHNpbWlsYXIKPiA+ID8gSWYK
PiA+ID4gc28sIGhvdyBjYW4gSSBmaXggdGhpcyA/IEl0J3MgcHJvYmFibHkgc29tZXRoaW5nIHRo
YXQgd291bGQganVtcAo+ID4gaW4gbXkKPiA+ID4gZmFjZSBpZiBpdCB3YXMgYWxpdmUsIGJ1dCBJ
IGp1c3QgY2FuJ3Qgc2VlIGl0LiBDYW4gYW55b25lIGhlbHAgbWUKPiA+ID8gSXQKPiA+ID4gd291
bGQgYmUgdmVyeSBtdWNoIGFwcHJlY2lhdGVkLgo+ID4gPgo+ID4gPgo+ID4gPiBYYXZpZXIgVO+/
vQo+ID4gPiBTdGFnaWFpcmUKPiA+ID4gRO+/vXZlbG9wcGVtZW50IC0gTWFpbnRlbmFuY2UgJiDv
v712b2x1dGlvbgo+ID4gPiBBWEEgQ2FuYWRhIFRlY2gKPiA+ID4gMjAyMCwgcnVlIFVuaXZlcnNp
dHksIGJ1cmVhdSA3MDAKPiA+ID4gTW9udHLvv71hbChRde+/vWJlYylIM0EgMkE1Cj4gPiA+IFTv
v71sLiA6ICAoNTE0KSAyODItNjgxNywgcG9zdGUgMjIyNAo+ID4gPiBU77+9bO+/vWMuIDogICg1
MTQpIDI4Mi02MDE3Cj4gPiA+IENvdXJyaWVsIDogWGF2aWVyLlRvQGF4YS1jYW5hZGEuY29tIDxY
YXZpZXIuVG9AYXhhLWNhbmFkYS5jb20+Cj4gPiA+ICAgX19fX18KPiA+ID4KPiA+ID4gIkNlIG1l
c3NhZ2UgZXN0IGNvbmZpZGVudGllbCwg77+9IGwndXNhZ2UgZXhjbHVzaWYgZHUgZGVzdGluYXRh
aXJlCj4gPiA+IGNpLWRlc3N1cyBldCBzb24gY29udGVudSBuZSByZXBy77+9c2VudGUgZW4gYXVj
dW4gY2FzIHVuIGVuZ2FnZW1lbnQKPiA+IGRlIGxhCj4gPiA+IHBhcnQgZGUgQVhBLCBzYXVmIGVu
IGNhcyBkZSBzdGlwdWxhdGlvbiBleHByZXNzZSBldCBwYXIg77+9Y3JpdCBkZQo+ID4gbGEgcGFy
dAo+ID4gPiBkZSBBWEEuIFRvdXRlIHB1YmxpY2F0aW9uLCB1dGlsaXNhdGlvbiBvdSBkaWZmdXNp
b24sIG3vv71tZSBwYXJ0aWVsbGUsCj4gPiA+IGRvaXQg77+9dHJlIGF1dG9yaXPvv71lIHBy77+9
YWxhYmxlbWVudC4gU2kgdm91cyBuJ++/vXRlcyBwYXMKPiA+IGRlc3RpbmF0YWlyZSBkZSBjZQo+
ID4gPiBtZXNzYWdlLCBtZXJjaSBkJ2VuIGF2ZXJ0aXIgaW1t77+9ZGlhdGVtZW50IGwnZXhw77+9
ZGl0ZXVyLiIKPiA+ID4KPiA+ID4gIlRoaXMgZS1tYWlsIG1lc3NhZ2UgaXMgY29uZmlkZW50aWFs
LCBmb3IgdGhlIGV4Y2x1c2l2ZSB1c2Ugb2YgdGhlCj4gPiA+IGFkZHJlc3NlZSBhbmQgaXRzIGNv
bnRlbnRzIHNoYWxsIG5vdCBjb25zdGl0dXRlIGEgY29tbWl0bWVudCBieSBBWEEsCj4gPiA+IGV4
Y2VwdCBhcyBvdGhlcndpc2Ugc3BlY2lmaWNhbGx5IHByb3ZpZGVkIGluIHdyaXRpbmcgYnkgQVhB
LiBBbnkKPiA+ID4gdW5hdXRob3JpemVkIGRpc2Nsb3N1cmUsIHVzZSBvciBkaXNzZW1pbmF0aW9u
LCBlaXRoZXIgd2hvbGUgb3IKPiA+IHBhcnRpYWwsPiBpcyBwcm9oaWJpdGVkLiBJZiB5b3UgYXJl
IG5vdCB0aGUgaW50ZW5kZWQgcmVjaXBpZW50IG9mCj4gPiB0aGUgbWVzc2FnZSwKPiA+ID4gcGxl
YXNlIG5vdGlmeSB0aGUgc2VuZGVyIGltbWVkaWF0ZWx5LiIKPiA+ID4KPiA+ID4gLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
Cj4gPiAtLS0KPiA+ID4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2Ny
aWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gPiA+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1h
aWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4gPiA+Cj4gPiA+Cj4gPiA+Cj4g
PiA+Cj4gPiA+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLQo+ID4gLS0tCj4gPiA+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6
IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+ID4gPiBGb3IgYWRkaXRp
b25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+
ID4gPgo+ID4gPgo+ID4KPgo+Cj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFp
bDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gRm9yIGFkZGl0aW9u
YWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcKPgo+
Cg==
------=_Part_73145_15733959.1170697047833--

From java-user-return-25936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 05 18:14:16 2007
Return-Path: <java-user-return-25936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72144 invoked from network); 5 Feb 2007 18:14:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2007 18:14:15 -0000
Received: (qmail 70192 invoked by uid 500); 5 Feb 2007 18:14:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70157 invoked by uid 500); 5 Feb 2007 18:14:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70146 invoked by uid 99); 5 Feb 2007 18:14:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Feb 2007 10:14:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [132.208.250.6] (HELO anis.telecom.uqam.ca) (132.208.250.6)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Feb 2007 10:14:03 -0800
Received: from anis.telecom.uqam.ca (anis.telecom.uqam.ca [132.208.250.6])
	by sortant.uqam.ca (8.13.8/8.12.1) with SMTP id l15I6ROX021023
	for <java-user@lucene.apache.org>; Mon, 5 Feb 2007 13:06:33 -0500 (EST)
Received: from antivirus.uqam.ca ([127.0.0.1])
 by anis.telecom.uqam.ca (SAVSMTP 3.1.1.32) with SMTP id M2007020513063100283
 for <java-user@lucene.apache.org>; Mon, 05 Feb 2007 13:06:31 -0500
Received: from courriel2.sitel.uqam.ca (courriel2.sitel.uqam.ca [132.208.250.43])
	by intrant.uqam.ca (8.13.8/8.12.2/uqam-filtres) with ESMTP id l15I3rSG004250
	for <java-user@lucene.apache.org>; Mon, 5 Feb 2007 13:03:53 -0500 (EST)
X-UQAM-Spam-Filter: Filtre-Uqam re:  abuse@uqam.ca
Received: from courrier.uqam.ca ([127.0.0.1]) by courriel2.sitel.uqam.ca
 (Sun Java System Messaging Server 6.1 HotFix 0.11 (built Jan 28 2005))
 with ESMTP id <0JD0003QN4UFPR30@courriel2.sitel.uqam.ca> for
 java-user@lucene.apache.org; Mon, 05 Feb 2007 13:03:51 -0500 (EST)
Received: from [206.47.141.21] by courriel2.sitel.uqam.ca (mshttpd); Mon,
 05 Feb 2007 13:03:51 -0500
Date: Mon, 05 Feb 2007 13:03:51 -0500
From: Xavier To <to.xavier@courrier.uqam.ca>
Subject: Re : Re: Re : Re: Problem with a search engine
To: java-user@lucene.apache.org
Message-id: <457e39e401c.45c72b37@courrier.uqam.ca>
MIME-version: 1.0
X-Mailer: Sun Java(tm) System Messenger Express 6.1 HotFix 0.11 (built Jan 28
 2005)
Content-type: text/plain; charset=utf-8
Content-language: fr
Content-transfer-encoding: quoted-printable
Content-disposition: inline
X-Accept-Language: fr
Priority: normal
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for your help !

Wow=2C I never expected that many replies=2E Cool !

I did try to print out the query before and after it gets processed by Q=
ueryParser and let say my query is =222003=22=2C before and after it wil=
l be =222003=22=2E If I put =22report 2003=22 the query will be=2C befor=
e and after getting into the parser=2C =22report 2003=22=2E Problem is t=
hat documents are indexed with =222003=22 or so Luke says but they are n=
ever found by our search engine=2E So even if I search =22report AND 200=
3=22 I will only get results for the =22report=22 token and nothing for =
=222003=22 even if there are 7 documents found by Luke=2C using the Stan=
dardAnalyzer (which is the one we=27re using)=2E I would restart a new s=
earch engine from scratch=2C not refactoring Java to Lucene but using Lu=
cene from the start=2C but it would require so many modification elsewhe=
re=2E=2E=2E=2E

Xavier T=C3=B4
Bacc=2E en Informatique et G=C3=A9nie Logiciel
to=2Exavier=40courrier=2Euqam=2Eca
(450)434-8905

----- Message d=27origine -----
De=3A Erick Erickson =3Cerickerickson=40gmail=2Ecom=3E
Date=3A Lundi=2C F=C3=A9vrier 5=2C 2007 12=3A37 pm
Objet=3A Re=3A Re =3A Re=3A Problem with a search engine

=3E Have you tried looking at the actual query submitted with =

=3E Query=2EtoString()=3FThat might give you an insight into what is =

=3E actually being submitted to
=3E Lucene and a place to start=2E
=3E =

=3E Also be aware that QueryParser=2C the default operator is OR which =

=3E can produce
=3E unexpected results if you assume AND=2E
=3E =

=3E Best
=3E Erick
=3E =

=3E On 2/5/07=2C Xavier To =3Cto=2Exavier=40courrier=2Euqam=2Eca=3E wrot=
e=3A
=3E =3E
=3E =3E Thanks for your help=2C
=3E =3E
=3E =3E As I stated before=2C the numbers=2C whether pure or not=2C are =

=3E indexed=2C for I
=3E =3E can search them with luke=2E But supposing what you=27re saying =
was =

=3E the case=2C
=3E =3E the search for =2210-year=22 should return 4 items (according to=
 the =

=3E number of
=3E =3E occurence found by luke)=2E Problem is that the number of docume=
nts =

=3E returned=3E is 6=2C for it ignored the =2210=22 and searched for =22=
-year=22=2E
=3E =3E
=3E =3E Xavier T=C3=B4
=3E =3E Bacc=2E en Informatique et G=C3=A9nie Logiciel
=3E =3E to=2Exavier=40courrier=2Euqam=2Eca
=3E =3E (450)434-8905
=3E =3E
=3E =3E ----- Message d=27origine -----
=3E =3E De=3A Mark Miller =3Cmarkrmiller=40gmail=2Ecom=3E
=3E =3E Date=3A Lundi=2C F=C3=A9vrier 5=2C 2007 11=3A11 am
=3E =3E Objet=3A Re=3A Problem with a search engine
=3E =3E
=3E =3E =3E StandardAnalyzer does not index pure numbers=2E It will inde=
x
=3E =3E =3E alphanumerictokens and numbers that are connected with one o=
f=3A
=3E =3E =3E =22=5F=22=7C=22-=22=7C=22/=22=7C=22=2E=22=7C=22=2C=22 If
=3E =3E =3E you wish to index pure numbers you might want to add another=
 =

=3E regex to
=3E =3E =3E StandardAnalyzer that recognizes a series of digits - don=27=
t forget
=3E =3E =3E to add
=3E =3E =3E the new token type to the grammar lower in the =

=3E StandardTokenizer=2Ejj=3E =3E file=2E
=3E =3E =3E - Mark
=3E =3E =3E
=3E =3E =3E On 2/5/07=2C Xavier To =3Cto=2Exavier=40courrier=2Euqam=2Eca=
=3E wrote=3A
=3E =3E =3E =3E
=3E =3E =3E =3E Thanks for taking time to answer me=2E The problem is th=
at I=27m not
=3E =3E =3E allowed=3E to post code due to a confidentiality contract th=
at I was
=3E =3E =3E required to sign=2E
=3E =3E =3E =3E I=27ll try to see if I can get a special permission to p=
ost code
=3E =3E =3E since I=27m
=3E =3E =3E =3E wasting so much time trying to find the answer to this=2E=

=3E =3E =3E =3E
=3E =3E =3E =3E I tried looking for each time the query is touched and n=
umbers
=3E =3E =3E are still
=3E =3E =3E =3E present in the query=2E I don=27t know if it=27s the ana=
lyzer=2C but if
=3E =3E =3E it was=2C
=3E =3E =3E =3E woundl=27t the numbers be cut out of the index completel=
y =3F As I
=3E =3E =3E said in my
=3E =3E =3E =3E 1st post=2C they are =22findable=22 with Lukeall=2E If I=
 read right=2C the
=3E =3E =3E =3E FrenchAnalyzer included in lucene is supposed to be base=
d on
=3E =3E =3E =3E StandardAnalyzer so I really fail to see what is going w=
rong=2E
=3E =3E =3E Might it be
=3E =3E =3E =3E the fact that the tokenizer used is Stringtokenizer and =
not
=3E =3E =3E Tokenstream =3F
=3E =3E =3E =3E The numbers are tokenized=2C and in the returned query t=
hey are
=3E =3E =3E present=2E=2E=2E=2E=3E
=3E =3E =3E =3E I really don=27t know where they get zapped out of exist=
ence=2E=2E=2E
=3E =3E =3E =3E
=3E =3E =3E =3E Thanks again for helping=2E
=3E =3E =3E =3E
=3E =3E =3E =3E Xavier T=C3=B4
=3E =3E =3E =3E Bacc=2E en Informatique et G=C3=A9nie Logiciel
=3E =3E =3E =3E to=2Exavier=40courrier=2Euqam=2Eca
=3E =3E =3E =3E (450)434-8905
=3E =3E =3E =3E
=3E =3E =3E =3E
=3E =3E =3E =3E --------------------------------------------------------=
------
=3E ----
=3E =3E =3E --------------------
=3E =3E =3E =3E
=3E =3E =3E =3E Hard to tell without seeing any code=2E  Perhaps numbers=
 are being
=3E =3E =3E removed=3E from the query string
=3E =3E =3E =3E during search=2E
=3E =3E =3E =3E Make sure the same or at least =22compatible=22 Analyzer=
 is used
=3E =3E =3E during both
=3E =3E =3E =3E indexing and querying=2E
=3E =3E =3E =3E Grab the code from Lucene in Action =2E=2E=2E=2E hm=2C l=
ucenebook=2Ecom may
=3E =3E =3E be down at
=3E =3E =3E =3E the moment=2C but
=3E =3E =3E =3E that=27s where you can get the code normally=2E  The cod=
e =

=3E includes some
=3E =3E =3E =3E classes that let you run
=3E =3E =3E =3E a query string through a set of Analyzers and see how ea=
ch of
=3E =3E =3E them behaves
=3E =3E =3E =3E and what it does
=3E =3E =3E =3E to a query=2E
=3E =3E =3E =3E
=3E =3E =3E =3E Otis
=3E =3E =3E =3E
=3E =3E =3E =3E ----- Original Message ----
=3E =3E =3E =3E From=3A =22To=2C Xavier=22 =3CXavier=2ETo=40axa-canada=2E=
com=3E
=3E =3E =3E =3E To=3A java-user=40lucene=2Eapache=2Eorg
=3E =3E =3E =3E Sent=3A Wednesday=2C January 31=2C 2007 12=3A21=3A27 AM
=3E =3E =3E =3E Subject=3A Problem with a search engine
=3E =3E =3E =3E
=3E =3E =3E =3E
=3E =3E =3E =3E Hi=2C I recently started an internship and I=27ve been a=
sked to fix
=3E =3E =3E their=3E search engine so numbers are searched=2E At first=2C=
 I thought
=3E =3E =3E it was the
=3E =3E =3E =3E Analyzer that wasn=27t working right=2C but we=27re usin=
g
=3E =3E =3E StandardAnalyzer and
=3E =3E =3E =3E the numbers are indexed (I checked with Lukeall)=2E Then=
 I thought
=3E =3E =3E they=3E are not tokenized during the search=2C but they are=2E=
 They just
=3E =3E =3E seem to be
=3E =3E =3E =3E ignored for some reason=2E Did anyone experienced someth=
ing =

=3E similar=3E =3E =3F If
=3E =3E =3E =3E so=2C how can I fix this =3F It=27s probably something t=
hat would jump
=3E =3E =3E in my
=3E =3E =3E =3E face if it was alive=2C but I just can=27t see it=2E Can=
 anyone =

=3E help me
=3E =3E =3E =3F It
=3E =3E =3E =3E would be very much appreciated=2E
=3E =3E =3E =3E
=3E =3E =3E =3E
=3E =3E =3E =3E Xavier T=EF=BF=BD
=3E =3E =3E =3E Stagiaire
=3E =3E =3E =3E D=EF=BF=BDveloppement - Maintenance =26 =EF=BF=BDvolutio=
n
=3E =3E =3E =3E AXA Canada Tech
=3E =3E =3E =3E 2020=2C rue University=2C bureau 700
=3E =3E =3E =3E Montr=EF=BF=BDal(Qu=EF=BF=BDbec)H3A 2A5
=3E =3E =3E =3E T=EF=BF=BDl=2E =3A  (514) 282-6817=2C poste 2224
=3E =3E =3E =3E T=EF=BF=BDl=EF=BF=BDc=2E =3A  (514) 282-6017
=3E =3E =3E =3E Courriel =3A Xavier=2ETo=40axa-canada=2Ecom =3CXavier=2E=
To=40axa-canada=2Ecom=3E
=3E =3E =3E =3E   =5F=5F=5F=5F=5F
=3E =3E =3E =3E
=3E =3E =3E =3E =22Ce message est confidentiel=2C =EF=BF=BD l=27usage ex=
clusif du destinataire
=3E =3E =3E =3E ci-dessus et son contenu ne repr=EF=BF=BDsente en aucun =
cas un =

=3E engagement=3E =3E de la
=3E =3E =3E =3E part de AXA=2C sauf en cas de stipulation expresse et pa=
r =EF=BF=BDcrit de
=3E =3E =3E la part
=3E =3E =3E =3E de AXA=2E Toute publication=2C utilisation ou diffusion=2C=
 m=EF=BF=BDme =

=3E partielle=2C=3E =3E =3E doit =EF=BF=BDtre autoris=EF=BF=BDe pr=EF=BF=
=BDalablement=2E Si vous n=27=EF=BF=BDtes pas
=3E =3E =3E destinataire de ce
=3E =3E =3E =3E message=2C merci d=27en avertir imm=EF=BF=BDdiatement l=27=
exp=EF=BF=BDditeur=2E=22
=3E =3E =3E =3E
=3E =3E =3E =3E =22This e-mail message is confidential=2C for the exclus=
ive use =

=3E of the
=3E =3E =3E =3E addressee and its contents shall not constitute a commit=
ment =

=3E by AXA=2C
=3E =3E =3E =3E except as otherwise specifically provided in writing by =
AXA=2E Any
=3E =3E =3E =3E unauthorized disclosure=2C use or dissemination=2C eithe=
r whole or
=3E =3E =3E partial=2C=3E is prohibited=2E If you are not the intended r=
ecipient of
=3E =3E =3E the message=2C
=3E =3E =3E =3E please notify the sender immediately=2E=22
=3E =3E =3E =3E
=3E =3E =3E =3E --------------------------------------------------------=
------
=3E ----
=3E =3E =3E ---
=3E =3E =3E =3E To unsubscribe=2C e-mail=3A java-user-unsubscribe=40luce=
ne=2Eapache=2Eorg
=3E =3E =3E =3E For additional commands=2C e-mail=3A java-user-
=3E help=40lucene=2Eapache=2Eorg=3E =3E =3E
=3E =3E =3E =3E
=3E =3E =3E =3E
=3E =3E =3E =3E
=3E =3E =3E =3E --------------------------------------------------------=
------
=3E ----
=3E =3E =3E ---
=3E =3E =3E =3E To unsubscribe=2C e-mail=3A java-user-unsubscribe=40luce=
ne=2Eapache=2Eorg
=3E =3E =3E =3E For additional commands=2C e-mail=3A java-user-
=3E help=40lucene=2Eapache=2Eorg=3E =3E =3E
=3E =3E =3E =3E
=3E =3E =3E
=3E =3E
=3E =3E
=3E =3E ----------------------------------------------------------------=
--
=3E ---
=3E =3E To unsubscribe=2C e-mail=3A java-user-unsubscribe=40lucene=2Eapa=
che=2Eorg
=3E =3E For additional commands=2C e-mail=3A java-user-help=40lucene=2Ea=
pache=2Eorg
=3E =3E
=3E =3E
=3E 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 05 18:57:45 2007
Return-Path: <java-user-return-25937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88464 invoked from network); 5 Feb 2007 18:57:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2007 18:57:44 -0000
Received: (qmail 33823 invoked by uid 500); 5 Feb 2007 18:57:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33796 invoked by uid 500); 5 Feb 2007 18:57:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33784 invoked by uid 99); 5 Feb 2007 18:57:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Feb 2007 10:57:44 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [68.142.199.168] (HELO web81704.mail.mud.yahoo.com) (68.142.199.168)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 05 Feb 2007 10:57:33 -0800
Received: (qmail 71847 invoked by uid 60001); 5 Feb 2007 18:57:11 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=iP5KPqMAEUA2/fwpppGHxBZNt1MuvF695HBrO+tyjPkgGSunv+ejOMDo9ie8Z2tDNFjqeZru/NOWAjux8FQefwFqQqqL8KkXmkc3i2S0tYkuIl1MWbBIsN0CgppqJyGfMz1nV41KTUcOP7f+BO24Krp75zlg0hU8BM+40Bn8YSY=;
X-YMail-OSG: rFtaIWcVM1n1tvSfbIUtTN4pG7_7dTrmBw0Nu8A2wlYMPzwZLL7z3EAGQ_N0ePswK8kPD6jVswzP5sQfHAi2ZtL91lkrARz5FiXrp9ixVdLqbt_9J1rBgt.v2kgwDzvo_aVtvf0pq7qHkG4la4YD3DLjO2aDKVHXwRx1vTflmf4tAoVihc..RntWNF2O
Received: from [66.201.45.201] by web81704.mail.mud.yahoo.com via HTTP; Mon, 05 Feb 2007 10:57:11 PST
X-Mailer: YahooMailRC/368.3 YahooMailWebService/0.6.132.7
Date: Mon, 5 Feb 2007 10:57:11 -0800 (PST)
From: Chiradeep Vittal <rayvittal-lists@yahoo.com>
Subject: Re: Re : Re: Re : Re: Problem with a search engine
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <858788.67242.qm@web81704.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Perhaps the number (dates?) are being indexed in a separate field? Lucene w=
ill only search the default field with the queries you have shown. If, for =
instance the year was being stored in the "year" field, then your query sho=
uld be =0Areport AND year:2003=0A=0AHTH=0A=0A----- Original Message ----=0A=
From: Xavier To <to.xavier@courrier.uqam.ca>=0ATo: java-user@lucene.apache.=
org=0ASent: Monday, February 5, 2007 10:03:51 AM=0ASubject: Re : Re: Re : R=
e: Problem with a search engine=0A=0AThanks for your help !=0A=0AWow, I nev=
er expected that many replies. Cool !=0A=0AI did try to print out the query=
 before and after it gets processed by QueryParser and let say my query is =
"2003", before and after it will be "2003". If I put "report 2003" the quer=
y will be, before and after getting into the parser, "report 2003". Problem=
 is that documents are indexed with "2003" or so Luke says but they are nev=
er found by our search engine. So even if I search "report AND 2003" I will=
 only get results for the "report" token and nothing for "2003" even if the=
re are 7 documents found by Luke, using the StandardAnalyzer (which is the =
one we're using). I would restart a new search engine from scratch, not ref=
actoring Java to Lucene but using Lucene from the start, but it would requi=
re so many modification elsewhere....=0A=0AXavier T=C3=B4=0ABacc. en Inform=
atique et G=C3=A9nie Logiciel=0Ato.xavier@courrier.uqam.ca=0A(450)434-8905=
=0A=0A----- Message d'origine -----=0ADe: Erick Erickson <erickerickson@gma=
il.com>=0ADate: Lundi, F=C3=A9vrier 5, 2007 12:37 pm=0AObjet: Re: Re : Re: =
Problem with a search engine=0A=0A> Have you tried looking at the actual qu=
ery submitted with =0A> Query.toString()?That might give you an insight int=
o what is =0A> actually being submitted to=0A> Lucene and a place to start.=
=0A> =0A> Also be aware that QueryParser, the default operator is OR which =
=0A> can produce=0A> unexpected results if you assume AND.=0A> =0A> Best=0A=
> Erick=0A> =0A> On 2/5/07, Xavier To <to.xavier@courrier.uqam.ca> wrote:=
=0A> >=0A> > Thanks for your help,=0A> >=0A> > As I stated before, the numb=
ers, whether pure or not, are =0A> indexed, for I=0A> > can search them wit=
h luke. But supposing what you're saying was =0A> the case,=0A> > the searc=
h for "10-year" should return 4 items (according to the =0A> number of=0A> =
> occurence found by luke). Problem is that the number of documents =0A> re=
turned> is 6, for it ignored the "10" and searched for "-year".=0A> >=0A> >=
 Xavier T=C3=B4=0A> > Bacc. en Informatique et G=C3=A9nie Logiciel=0A> > to=
.xavier@courrier.uqam.ca=0A> > (450)434-8905=0A> >=0A> > ----- Message d'or=
igine -----=0A> > De: Mark Miller <markrmiller@gmail.com>=0A> > Date: Lundi=
, F=C3=A9vrier 5, 2007 11:11 am=0A> > Objet: Re: Problem with a search engi=
ne=0A> >=0A> > > StandardAnalyzer does not index pure numbers. It will inde=
x=0A> > > alphanumerictokens and numbers that are connected with one of:=0A=
> > > "_"|"-"|"/"|"."|"," If=0A> > > you wish to index pure numbers you mig=
ht want to add another =0A> regex to=0A> > > StandardAnalyzer that recogniz=
es a series of digits - don't forget=0A> > > to add=0A> > > the new token t=
ype to the grammar lower in the =0A> StandardTokenizer.jj> > file.=0A> > > =
- Mark=0A> > >=0A> > > On 2/5/07, Xavier To <to.xavier@courrier.uqam.ca> wr=
ote:=0A> > > >=0A> > > > Thanks for taking time to answer me. The problem i=
s that I'm not=0A> > > allowed> to post code due to a confidentiality contr=
act that I was=0A> > > required to sign.=0A> > > > I'll try to see if I can=
 get a special permission to post code=0A> > > since I'm=0A> > > > wasting =
so much time trying to find the answer to this.=0A> > > >=0A> > > > I tried=
 looking for each time the query is touched and numbers=0A> > > are still=
=0A> > > > present in the query. I don't know if it's the analyzer, but if=
=0A> > > it was,=0A> > > > woundl't the numbers be cut out of the index com=
pletely ? As I=0A> > > said in my=0A> > > > 1st post, they are "findable" w=
ith Lukeall. If I read right, the=0A> > > > FrenchAnalyzer included in luce=
ne is supposed to be based on=0A> > > > StandardAnalyzer so I really fail t=
o see what is going wrong.=0A> > > Might it be=0A> > > > the fact that the =
tokenizer used is Stringtokenizer and not=0A> > > Tokenstream ?=0A> > > > T=
he numbers are tokenized, and in the returned query they are=0A> > > presen=
t....>=0A> > > > I really don't know where they get zapped out of existence=
...=0A> > > >=0A> > > > Thanks again for helping.=0A> > > >=0A> > > > Xavie=
r T=C3=B4=0A> > > > Bacc. en Informatique et G=C3=A9nie Logiciel=0A> > > > =
to.xavier@courrier.uqam.ca=0A> > > > (450)434-8905=0A> > > >=0A> > > >=0A> =
> > > --------------------------------------------------------------=0A> --=
--=0A> > > --------------------=0A> > > >=0A> > > > Hard to tell without se=
eing any code.  Perhaps numbers are being=0A> > > removed> from the query s=
tring=0A> > > > during search.=0A> > > > Make sure the same or at least "co=
mpatible" Analyzer is used=0A> > > during both=0A> > > > indexing and query=
ing.=0A> > > > Grab the code from Lucene in Action .... hm, lucenebook.com =
may=0A> > > be down at=0A> > > > the moment, but=0A> > > > that's where you=
 can get the code normally.  The code =0A> includes some=0A> > > > classes =
that let you run=0A> > > > a query string through a set of Analyzers and se=
e how each of=0A> > > them behaves=0A> > > > and what it does=0A> > > > to =
a query.=0A> > > >=0A> > > > Otis=0A> > > >=0A> > > > ----- Original Messag=
e ----=0A> > > > From: "To, Xavier" <Xavier.To@axa-canada.com>=0A> > > > To=
: java-user@lucene.apache.org=0A> > > > Sent: Wednesday, January 31, 2007 1=
2:21:27 AM=0A> > > > Subject: Problem with a search engine=0A> > > >=0A> > =
> >=0A> > > > Hi, I recently started an internship and I've been asked to f=
ix=0A> > > their> search engine so numbers are searched. At first, I though=
t=0A> > > it was the=0A> > > > Analyzer that wasn't working right, but we'r=
e using=0A> > > StandardAnalyzer and=0A> > > > the numbers are indexed (I c=
hecked with Lukeall). Then I thought=0A> > > they> are not tokenized during=
 the search, but they are. They just=0A> > > seem to be=0A> > > > ignored f=
or some reason. Did anyone experienced something =0A> similar> > ? If=0A> >=
 > > so, how can I fix this ? It's probably something that would jump=0A> >=
 > in my=0A> > > > face if it was alive, but I just can't see it. Can anyon=
e =0A> help me=0A> > > ? It=0A> > > > would be very much appreciated.=0A> >=
 > >=0A> > > >=0A> > > > Xavier T=EF=BF=BD=0A> > > > Stagiaire=0A> > > > D=
=EF=BF=BDveloppement - Maintenance & =EF=BF=BDvolution=0A> > > > AXA Canada=
 Tech=0A> > > > 2020, rue University, bureau 700=0A> > > > Montr=EF=BF=BDal=
(Qu=EF=BF=BDbec)H3A 2A5=0A> > > > T=EF=BF=BDl. :  (514) 282-6817, poste 222=
4=0A> > > > T=EF=BF=BDl=EF=BF=BDc. :  (514) 282-6017=0A> > > > Courriel : X=
avier.To@axa-canada.com <Xavier.To@axa-canada.com>=0A> > > >   _____=0A> > =
> >=0A> > > > "Ce message est confidentiel, =EF=BF=BD l'usage exclusif du d=
estinataire=0A> > > > ci-dessus et son contenu ne repr=EF=BF=BDsente en auc=
un cas un =0A> engagement> > de la=0A> > > > part de AXA, sauf en cas de st=
ipulation expresse et par =EF=BF=BDcrit de=0A> > > la part=0A> > > > de AXA=
. Toute publication, utilisation ou diffusion, m=EF=BF=BDme =0A> partielle,=
> > > doit =EF=BF=BDtre autoris=EF=BF=BDe pr=EF=BF=BDalablement. Si vous n'=
=EF=BF=BDtes pas=0A> > > destinataire de ce=0A> > > > message, merci d'en a=
vertir imm=EF=BF=BDdiatement l'exp=EF=BF=BDditeur."=0A> > > >=0A> > > > "Th=
is e-mail message is confidential, for the exclusive use =0A> of the=0A> > =
> > addressee and its contents shall not constitute a commitment =0A> by AX=
A,=0A> > > > except as otherwise specifically provided in writing by AXA. A=
ny=0A> > > > unauthorized disclosure, use or dissemination, either whole or=
=0A> > > partial,> is prohibited. If you are not the intended recipient of=
=0A> > > the message,=0A> > > > please notify the sender immediately."=0A> =
> > >=0A> > > > -----------------------------------------------------------=
---=0A> ----=0A> > > ---=0A> > > > To unsubscribe, e-mail: java-user-unsubs=
cribe@lucene.apache.org=0A> > > > For additional commands, e-mail: java-use=
r-=0A> help@lucene.apache.org> > >=0A> > > >=0A> > > >=0A> > > >=0A> > > > =
--------------------------------------------------------------=0A> ----=0A>=
 > > ---=0A> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apa=
che.org=0A> > > > For additional commands, e-mail: java-user-=0A> help@luce=
ne.apache.org> > >=0A> > > >=0A> > >=0A> >=0A> >=0A> > --------------------=
----------------------------------------------=0A> ---=0A> > To unsubscribe=
, e-mail: java-user-unsubscribe@lucene.apache.org=0A> > For additional comm=
ands, e-mail: java-user-help@lucene.apache.org=0A> >=0A> >=0A>=0A=0A=0A----=
-----------------------------------------------------------------=0ATo unsu=
bscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor additional c=
ommands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 05 19:31:20 2007
Return-Path: <java-user-return-25938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2453 invoked from network); 5 Feb 2007 19:31:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2007 19:31:20 -0000
Received: (qmail 80622 invoked by uid 500); 5 Feb 2007 19:31:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80593 invoked by uid 500); 5 Feb 2007 19:31:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80582 invoked by uid 99); 5 Feb 2007 19:31:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Feb 2007 11:31:19 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [132.208.250.6] (HELO anis.telecom.uqam.ca) (132.208.250.6)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Feb 2007 11:31:08 -0800
Received: from anis.telecom.uqam.ca (anis.telecom.uqam.ca [132.208.250.6])
	by sortant.uqam.ca (8.13.8/8.12.1) with SMTP id l15JK28k019337
	for <java-user@lucene.apache.org>; Mon, 5 Feb 2007 14:20:28 -0500 (EST)
Received: from antivirus.uqam.ca ([127.0.0.1])
 by anis.telecom.uqam.ca (SAVSMTP 3.1.1.32) with SMTP id M2007020514202804278
 for <java-user@lucene.apache.org>; Mon, 05 Feb 2007 14:20:28 -0500
Received: from courriel2.sitel.uqam.ca (courriel2.sitel.uqam.ca [132.208.250.43])
	by intrant.uqam.ca (8.13.8/8.12.2/uqam-filtres) with ESMTP id l15J98lk009983
	for <java-user@lucene.apache.org>; Mon, 5 Feb 2007 14:09:13 -0500 (EST)
X-UQAM-Spam-Filter: Filtre-Uqam re:  abuse@uqam.ca
Received: from courrier.uqam.ca ([127.0.0.1]) by courriel2.sitel.uqam.ca
 (Sun Java System Messaging Server 6.1 HotFix 0.11 (built Jan 28 2005))
 with ESMTP id <0JD00038C7V6PV40@courriel2.sitel.uqam.ca> for
 java-user@lucene.apache.org; Mon, 05 Feb 2007 14:09:06 -0500 (EST)
Received: from [206.47.141.21] by courriel2.sitel.uqam.ca (mshttpd); Mon,
 05 Feb 2007 14:09:06 -0500
Date: Mon, 05 Feb 2007 14:09:06 -0500
From: Xavier To <to.xavier@courrier.uqam.ca>
Subject: Re : Re: Re : Re: Re : Re: Problem with a search engine
To: java-user@lucene.apache.org
Message-id: <243430303a40.45c73a82@courrier.uqam.ca>
MIME-version: 1.0
X-Mailer: Sun Java(tm) System Messenger Express 6.1 HotFix 0.11 (built Jan 28
 2005)
Content-type: text/plain; charset=utf-8
Content-language: fr
Content-transfer-encoding: quoted-printable
Content-disposition: inline
X-Accept-Language: fr
Priority: normal
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks ! =


I thought that would be the case too=2C but it=27s not=2E =222003=22 is =
just stored in the =22contents=22 field as everything else=2E The only f=
ield indexed is the =22contents=22 field=2E Since only the =22contents=22=
 field is indexed=2C everything that is searched should be found=2E The =
number problem does restrict itself to dates but let=27s say I search fo=
r =224wd=22=2C it will ignore the number and search for the rest=2C even=
 if the query is =224wd=22 before and after the QueryParser manipulation=
=2E=2E=2E

Xavier T=C3=B4
Bacc=2E en Informatique et G=C3=A9nie Logiciel
to=2Exavier=40courrier=2Euqam=2Eca
(450)434-8905

----- Message d=27origine -----
De=3A Chiradeep Vittal =3Crayvittal-lists=40yahoo=2Ecom=3E
Date=3A Lundi=2C F=C3=A9vrier 5=2C 2007 1=3A57 pm
Objet=3A Re=3A Re =3A Re=3A Re =3A Re=3A Problem with a search engine

=3E Perhaps the number (dates=3F) are being indexed in a separate field=3F=
 =

=3E Lucene will only search the default field with the queries you have =

=3E shown=2E If=2C for instance the year was being stored in the =22year=
=22 =

=3E field=2C then your query should be =

=3E report AND year=3A2003
=3E =

=3E HTH
=3E =

=3E ----- Original Message ----
=3E From=3A Xavier To =3Cto=2Exavier=40courrier=2Euqam=2Eca=3E
=3E To=3A java-user=40lucene=2Eapache=2Eorg
=3E Sent=3A Monday=2C February 5=2C 2007 10=3A03=3A51 AM
=3E Subject=3A Re =3A Re=3A Re =3A Re=3A Problem with a search engine
=3E =

=3E Thanks for your help !
=3E =

=3E Wow=2C I never expected that many replies=2E Cool !
=3E =

=3E I did try to print out the query before and after it gets processed =

=3E by QueryParser and let say my query is =222003=22=2C before and afte=
r it =

=3E will be =222003=22=2E If I put =22report 2003=22 the query will be=2C=
 before =

=3E and after getting into the parser=2C =22report 2003=22=2E Problem is=
 that =

=3E documents are indexed with =222003=22 or so Luke says but they are =

=3E never found by our search engine=2E So even if I search =22report AN=
D =

=3E 2003=22 I will only get results for the =22report=22 token and nothi=
ng =

=3E for =222003=22 even if there are 7 documents found by Luke=2C using =
the =

=3E StandardAnalyzer (which is the one we=27re using)=2E I would restart=
 a =

=3E new search engine from scratch=2C not refactoring Java to Lucene but=
 =

=3E using Lucene from the start=2C but it would require so many =

=3E modification elsewhere=2E=2E=2E=2E
=3E =

=3E Xavier T=C3=B4
=3E Bacc=2E en Informatique et G=C3=A9nie Logiciel
=3E to=2Exavier=40courrier=2Euqam=2Eca
=3E (450)434-8905
=3E =

=3E ----- Message d=27origine -----
=3E De=3A Erick Erickson =3Cerickerickson=40gmail=2Ecom=3E
=3E Date=3A Lundi=2C F=C3=A9vrier 5=2C 2007 12=3A37 pm
=3E Objet=3A Re=3A Re =3A Re=3A Problem with a search engine
=3E =

=3E =3E Have you tried looking at the actual query submitted with =

=3E =3E Query=2EtoString()=3FThat might give you an insight into what is=
 =

=3E =3E actually being submitted to
=3E =3E Lucene and a place to start=2E
=3E =3E =

=3E =3E Also be aware that QueryParser=2C the default operator is OR whi=
ch =

=3E =3E can produce
=3E =3E unexpected results if you assume AND=2E
=3E =3E =

=3E =3E Best
=3E =3E Erick
=3E =3E =

=3E =3E On 2/5/07=2C Xavier To =3Cto=2Exavier=40courrier=2Euqam=2Eca=3E =
wrote=3A
=3E =3E =3E
=3E =3E =3E Thanks for your help=2C
=3E =3E =3E
=3E =3E =3E As I stated before=2C the numbers=2C whether pure or not=2C =
are =

=3E =3E indexed=2C for I
=3E =3E =3E can search them with luke=2E But supposing what you=27re say=
ing was =

=3E =3E the case=2C
=3E =3E =3E the search for =2210-year=22 should return 4 items (accordin=
g to =

=3E the =

=3E =3E number of
=3E =3E =3E occurence found by luke)=2E Problem is that the number of =

=3E documents =

=3E =3E returned=3E is 6=2C for it ignored the =2210=22 and searched for=
 =22-year=22=2E
=3E =3E =3E
=3E =3E =3E Xavier T=C3=B4
=3E =3E =3E Bacc=2E en Informatique et G=C3=A9nie Logiciel
=3E =3E =3E to=2Exavier=40courrier=2Euqam=2Eca
=3E =3E =3E (450)434-8905
=3E =3E =3E
=3E =3E =3E ----- Message d=27origine -----
=3E =3E =3E De=3A Mark Miller =3Cmarkrmiller=40gmail=2Ecom=3E
=3E =3E =3E Date=3A Lundi=2C F=C3=A9vrier 5=2C 2007 11=3A11 am
=3E =3E =3E Objet=3A Re=3A Problem with a search engine
=3E =3E =3E
=3E =3E =3E =3E StandardAnalyzer does not index pure numbers=2E It will =
index
=3E =3E =3E =3E alphanumerictokens and numbers that are connected with o=
ne of=3A
=3E =3E =3E =3E =22=5F=22=7C=22-=22=7C=22/=22=7C=22=2E=22=7C=22=2C=22 If=

=3E =3E =3E =3E you wish to index pure numbers you might want to add ano=
ther =

=3E =3E regex to
=3E =3E =3E =3E StandardAnalyzer that recognizes a series of digits - do=
n=27t =

=3E forget=3E =3E =3E to add
=3E =3E =3E =3E the new token type to the grammar lower in the =

=3E =3E StandardTokenizer=2Ejj=3E =3E file=2E
=3E =3E =3E =3E - Mark
=3E =3E =3E =3E
=3E =3E =3E =3E On 2/5/07=2C Xavier To =3Cto=2Exavier=40courrier=2Euqam=2E=
ca=3E wrote=3A
=3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E Thanks for taking time to answer me=2E The problem i=
s that =

=3E I=27m not
=3E =3E =3E =3E allowed=3E to post code due to a confidentiality contrac=
t that =

=3E I was
=3E =3E =3E =3E required to sign=2E
=3E =3E =3E =3E =3E I=27ll try to see if I can get a special permission =
to post code
=3E =3E =3E =3E since I=27m
=3E =3E =3E =3E =3E wasting so much time trying to find the answer to th=
is=2E
=3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E I tried looking for each time the query is touched a=
nd numbers
=3E =3E =3E =3E are still
=3E =3E =3E =3E =3E present in the query=2E I don=27t know if it=27s the=
 analyzer=2C =

=3E but if
=3E =3E =3E =3E it was=2C
=3E =3E =3E =3E =3E woundl=27t the numbers be cut out of the index compl=
etely =3F =

=3E As I
=3E =3E =3E =3E said in my
=3E =3E =3E =3E =3E 1st post=2C they are =22findable=22 with Lukeall=2E =
If I read =

=3E right=2C the
=3E =3E =3E =3E =3E FrenchAnalyzer included in lucene is supposed to be =
based on
=3E =3E =3E =3E =3E StandardAnalyzer so I really fail to see what is goi=
ng wrong=2E
=3E =3E =3E =3E Might it be
=3E =3E =3E =3E =3E the fact that the tokenizer used is Stringtokenizer =
and not
=3E =3E =3E =3E Tokenstream =3F
=3E =3E =3E =3E =3E The numbers are tokenized=2C and in the returned que=
ry they are
=3E =3E =3E =3E present=2E=2E=2E=2E=3E
=3E =3E =3E =3E =3E I really don=27t know where they get zapped out of e=
xistence=2E=2E=2E
=3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E Thanks again for helping=2E
=3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E Xavier T=C3=B4
=3E =3E =3E =3E =3E Bacc=2E en Informatique et G=C3=A9nie Logiciel
=3E =3E =3E =3E =3E to=2Exavier=40courrier=2Euqam=2Eca
=3E =3E =3E =3E =3E (450)434-8905
=3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E ----------------------------------------------------=
--------
=3E --
=3E =3E ----
=3E =3E =3E =3E --------------------
=3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E Hard to tell without seeing any code=2E  Perhaps num=
bers are =

=3E being=3E =3E =3E removed=3E from the query string
=3E =3E =3E =3E =3E during search=2E
=3E =3E =3E =3E =3E Make sure the same or at least =22compatible=22 Anal=
yzer is used
=3E =3E =3E =3E during both
=3E =3E =3E =3E =3E indexing and querying=2E
=3E =3E =3E =3E =3E Grab the code from Lucene in Action =2E=2E=2E=2E hm=2C=
 lucenebook=2Ecom =

=3E may=3E =3E =3E be down at
=3E =3E =3E =3E =3E the moment=2C but
=3E =3E =3E =3E =3E that=27s where you can get the code normally=2E  The=
 code =

=3E =3E includes some
=3E =3E =3E =3E =3E classes that let you run
=3E =3E =3E =3E =3E a query string through a set of Analyzers and see ho=
w each of
=3E =3E =3E =3E them behaves
=3E =3E =3E =3E =3E and what it does
=3E =3E =3E =3E =3E to a query=2E
=3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E Otis
=3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E ----- Original Message ----
=3E =3E =3E =3E =3E From=3A =22To=2C Xavier=22 =3CXavier=2ETo=40axa-cana=
da=2Ecom=3E
=3E =3E =3E =3E =3E To=3A java-user=40lucene=2Eapache=2Eorg
=3E =3E =3E =3E =3E Sent=3A Wednesday=2C January 31=2C 2007 12=3A21=3A27=
 AM
=3E =3E =3E =3E =3E Subject=3A Problem with a search engine
=3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E Hi=2C I recently started an internship and I=27ve be=
en asked to =

=3E fix=3E =3E =3E their=3E search engine so numbers are searched=2E At =
first=2C I =

=3E thought=3E =3E =3E it was the
=3E =3E =3E =3E =3E Analyzer that wasn=27t working right=2C but we=27re =
using
=3E =3E =3E =3E StandardAnalyzer and
=3E =3E =3E =3E =3E the numbers are indexed (I checked with Lukeall)=2E =
Then I =

=3E thought=3E =3E =3E they=3E are not tokenized during the search=2C bu=
t they =

=3E are=2E They just
=3E =3E =3E =3E seem to be
=3E =3E =3E =3E =3E ignored for some reason=2E Did anyone experienced so=
mething =

=3E =3E similar=3E =3E =3F If
=3E =3E =3E =3E =3E so=2C how can I fix this =3F It=27s probably somethi=
ng that would =

=3E jump=3E =3E =3E in my
=3E =3E =3E =3E =3E face if it was alive=2C but I just can=27t see it=2E=
 Can anyone =

=3E =3E help me
=3E =3E =3E =3E =3F It
=3E =3E =3E =3E =3E would be very much appreciated=2E
=3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E Xavier T=EF=BF=BD
=3E =3E =3E =3E =3E Stagiaire
=3E =3E =3E =3E =3E D=EF=BF=BDveloppement - Maintenance =26 =EF=BF=BDvol=
ution
=3E =3E =3E =3E =3E AXA Canada Tech
=3E =3E =3E =3E =3E 2020=2C rue University=2C bureau 700
=3E =3E =3E =3E =3E Montr=EF=BF=BDal(Qu=EF=BF=BDbec)H3A 2A5
=3E =3E =3E =3E =3E T=EF=BF=BDl=2E =3A  (514) 282-6817=2C poste 2224
=3E =3E =3E =3E =3E T=EF=BF=BDl=EF=BF=BDc=2E =3A  (514) 282-6017
=3E =3E =3E =3E =3E Courriel =3A Xavier=2ETo=40axa-canada=2Ecom =3CXavie=
r=2ETo=40axa-canada=2Ecom=3E
=3E =3E =3E =3E =3E   =5F=5F=5F=5F=5F
=3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =22Ce message est confidentiel=2C =EF=BF=BD l=27usag=
e exclusif du =

=3E destinataire=3E =3E =3E =3E ci-dessus et son contenu ne repr=EF=BF=BD=
sente en aucun =

=3E cas un =

=3E =3E engagement=3E =3E de la
=3E =3E =3E =3E =3E part de AXA=2C sauf en cas de stipulation expresse e=
t par =

=3E =EF=BF=BDcrit de
=3E =3E =3E =3E la part
=3E =3E =3E =3E =3E de AXA=2E Toute publication=2C utilisation ou diffus=
ion=2C m=EF=BF=BDme =

=3E =3E partielle=2C=3E =3E =3E doit =EF=BF=BDtre autoris=EF=BF=BDe pr=EF=
=BF=BDalablement=2E Si vous n=27=EF=BF=BDtes =

=3E pas=3E =3E =3E destinataire de ce
=3E =3E =3E =3E =3E message=2C merci d=27en avertir imm=EF=BF=BDdiatemen=
t l=27exp=EF=BF=BDditeur=2E=22
=3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =22This e-mail message is confidential=2C for the ex=
clusive use =

=3E =3E of the
=3E =3E =3E =3E =3E addressee and its contents shall not constitute a =

=3E commitment =

=3E =3E by AXA=2C
=3E =3E =3E =3E =3E except as otherwise specifically provided in writing=
 by =

=3E AXA=2E Any
=3E =3E =3E =3E =3E unauthorized disclosure=2C use or dissemination=2C e=
ither whole or
=3E =3E =3E =3E partial=2C=3E is prohibited=2E If you are not the intend=
ed =

=3E recipient of
=3E =3E =3E =3E the message=2C
=3E =3E =3E =3E =3E please notify the sender immediately=2E=22
=3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E ----------------------------------------------------=
--------
=3E --
=3E =3E ----
=3E =3E =3E =3E ---
=3E =3E =3E =3E =3E To unsubscribe=2C e-mail=3A java-user-
=3E unsubscribe=40lucene=2Eapache=2Eorg=3E =3E =3E =3E For additional co=
mmands=2C e-
=3E mail=3A java-user-
=3E =3E help=40lucene=2Eapache=2Eorg=3E =3E =3E
=3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E ----------------------------------------------------=
--------
=3E --
=3E =3E ----
=3E =3E =3E =3E ---
=3E =3E =3E =3E =3E To unsubscribe=2C e-mail=3A java-user-
=3E unsubscribe=40lucene=2Eapache=2Eorg=3E =3E =3E =3E For additional co=
mmands=2C e-
=3E mail=3A java-user-
=3E =3E help=40lucene=2Eapache=2Eorg=3E =3E =3E
=3E =3E =3E =3E =3E
=3E =3E =3E =3E
=3E =3E =3E
=3E =3E =3E
=3E =3E =3E ------------------------------------------------------------=
----
=3E --
=3E =3E ---
=3E =3E =3E To unsubscribe=2C e-mail=3A java-user-unsubscribe=40lucene=2E=
apache=2Eorg
=3E =3E =3E For additional commands=2C e-mail=3A java-user-help=40lucene=
=2Eapache=2Eorg
=3E =3E =3E
=3E =3E =3E
=3E =3E
=3E =

=3E =

=3E --------------------------------------------------------------------=

=3E -
=3E To unsubscribe=2C e-mail=3A java-user-unsubscribe=40lucene=2Eapache=2E=
org
=3E For additional commands=2C e-mail=3A java-user-help=40lucene=2Eapach=
e=2Eorg
=3E =

=3E =

=3E =

=3E =

=3E =

=3E --------------------------------------------------------------------=

=3E -
=3E To unsubscribe=2C e-mail=3A java-user-unsubscribe=40lucene=2Eapache=2E=
org
=3E For additional commands=2C e-mail=3A java-user-help=40lucene=2Eapach=
e=2Eorg
=3E =

=3E 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 05 21:45:33 2007
Return-Path: <java-user-return-25939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63517 invoked from network); 5 Feb 2007 21:45:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2007 21:45:33 -0000
Received: (qmail 459 invoked by uid 500); 5 Feb 2007 21:45:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 433 invoked by uid 500); 5 Feb 2007 21:45:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 422 invoked by uid 99); 5 Feb 2007 21:45:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Feb 2007 13:45:32 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Feb 2007 13:45:23 -0800
Received: by nf-out-0910.google.com with SMTP id i2so386392nfe
        for <java-user@lucene.apache.org>; Mon, 05 Feb 2007 13:45:02 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=JdKeC3y5mUV4RJDN9YpTDhFSSTAcpPr9Uls2ZQ+EktYk6G/Px0ZJhldYvbkbqysA/KyYTCoC2v8mrv5ebU9dJrKg75G1u225wkBmvp9aZ/y+C+GrIsi9nAD6SeXCiHsY4+fE/cd2mF14ZmjslrxCuFNcq2isfoUUWkE7WzxNV6E=
Received: by 10.82.163.13 with SMTP id l13mr2749538bue.1170711902177;
        Mon, 05 Feb 2007 13:45:02 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Mon, 5 Feb 2007 13:45:02 -0800 (PST)
Message-ID: <359a92830702051345p7ff4b9acg18bc28d2dce88366@mail.gmail.com>
Date: Mon, 5 Feb 2007 16:45:02 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: relevancy "buckets" and secondary searching
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_78563_18585209.1170711902116"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_78563_18585209.1170711902116
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Am I missing anything obvious here and/or what would folks suggest...

Conceptually, I want to normalize the scores of my documents during a search
BUT BEFORE SORTING into 5 discrete values, say 0.1, 0.3, 0.5, 0.7, 0.9 and
apply a secondary sort when two documents have the same score. Applying the
secondary sort is easy, it's massaging the scores that has me stumped.

We have a bunch of documents (30K). Books actually. We only display to the
user 5 different "relevance" scores, with 5 being the most relevant. So far,
so good.

Within each quintile, we want to sort by title. So, suppose the following
three books score a hit:

relevance      title
0.98              zzzzz
0.94              ccccc
0.79              aaaaa

The proper display would be

5           ccccc
5           zzzzz
4           aaaaa


It's easy enough to do a secondary sort, but that would not give me what I
want. In this case, I'd get...

5       zzzzz
5       ccccc
4       aaaaa

because the secondary sort only matters if the primary sort is equal. The
user is left scratching her head asking "why did two books with the same
relevancy have the titles out of order?".

If I could massage my scores *before* sorts are done, things would be
hunky-dory, but I'm not seeing how to do that. One problem is that until the
top N documents have been collected, I don't know what the maximum relevance
is, therefore I don't know how to normalize raw scores. I followed Hoss's
thread where he talks about FakeNorms, but don't see how that applies to my
problem.

My result sets are strictly limited to < 500, so it's not unreasonable to
just get the TopDocs back and aggregate my buckets at that point and sort
them. But of course I only care about this when I am using relevancy as my
primary sort. For sorting on any other fields, I would just let Lucene take
care of it all. So post-sorting myself leads to really ugly stuff like

if (it's my special relevancy sort) do one thing
else don't do that thing.

repeated wherever I have to sort. Yuck.....


And since I'm talking about 500 docs, I don't want to wait until after I
have a Hits object because I'll have to re-query several times. On an 8G
index (and growing).


This almost looks like a HitCollector, but not quite.
This almost looks like a custom Similarity, but not quite since I want to
just let Lucene compute relevance and put that into a bucket.
This almost looks like FakeNorms, but not quite.
This almost looks like about 8 things I tried to make work, but not quite
<G>....

So, somebody out there needs to tell me what part of the manual I overlooked
<G>...

Thanks
Erick

------=_Part_78563_18585209.1170711902116--

From java-user-return-25940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 06 00:08:10 2007
Return-Path: <java-user-return-25940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33186 invoked from network); 6 Feb 2007 00:08:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Feb 2007 00:08:10 -0000
Received: (qmail 96420 invoked by uid 500); 6 Feb 2007 00:08:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96390 invoked by uid 500); 6 Feb 2007 00:08:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96379 invoked by uid 99); 6 Feb 2007 00:08:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Feb 2007 16:08:10 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of peterlkeegan@gmail.com designates 64.233.162.226 as permitted sender)
Received: from [64.233.162.226] (HELO nz-out-0506.google.com) (64.233.162.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Feb 2007 16:08:01 -0800
Received: by nz-out-0506.google.com with SMTP id i1so1701242nzh
        for <java-user@lucene.apache.org>; Mon, 05 Feb 2007 16:07:40 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=PsXXhelVDAR8a3kjwns7htXmVsMbBiumlRnn5xvklc4hPBpWl4cx3flB7nwErRYRGoDnaf8WSys/8D8vDXr/Jzt0ky6tif3nEtr6z4rl7unPnomHCG/i/fUdWc8zF5hKN6SLcLaUidPPySS21Pt1f5cDmQ6+ZfkUEQIRttQg+bA=
Received: by 10.65.224.11 with SMTP id b11mr11675201qbr.1170720460643;
        Mon, 05 Feb 2007 16:07:40 -0800 (PST)
Received: by 10.65.150.17 with HTTP; Mon, 5 Feb 2007 16:07:39 -0800 (PST)
Message-ID: <e994873a0702051607g5fefe297v44aeeeef8388352c@mail.gmail.com>
Date: Mon, 5 Feb 2007 19:07:39 -0500
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: relevancy "buckets" and secondary searching
In-Reply-To: <359a92830702051345p7ff4b9acg18bc28d2dce88366@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_55630_25967392.1170720459197"
References: <359a92830702051345p7ff4b9acg18bc28d2dce88366@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_55630_25967392.1170720459197
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Erick,

The timing of your posting is ironic because I'm currently working on the
same issue. Here's a solution that I'm going to try:

Use a HitCollector with a PriorityQueue to sort all hits by raw Lucene
score, ignoring the secondary sort field.

After the search, re-sort just the hits from the queue above (500 in your
case) with a FieldSortedHitQueue that sorts on score, then the secondary
field (title in your case), but 'normalize' the score to your 'user visible'
scores before re-sorting. If your 'normalized' score is computed properly,
this should force the secondary sort to occur and produce the 'proper'
sorting that the user expects.

I think the trick here is in computing the proper normalized score from
Lucene's raw scores, which will vary depending on boosts, etc.

I agree with you that this "special relevancy sort" is a real hack to
implement!


Peter

On 2/5/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> Am I missing anything obvious here and/or what would folks suggest...
>
> Conceptually, I want to normalize the scores of my documents during a
> search
> BUT BEFORE SORTING into 5 discrete values, say 0.1, 0.3, 0.5, 0.7, 0.9 and
> apply a secondary sort when two documents have the same score. Applying
> the
> secondary sort is easy, it's massaging the scores that has me stumped.
>
> We have a bunch of documents (30K). Books actually. We only display to the
> user 5 different "relevance" scores, with 5 being the most relevant. So
> far,
> so good.
>
> Within each quintile, we want to sort by title. So, suppose the following
> three books score a hit:
>
> relevance      title
> 0.98              zzzzz
> 0.94              ccccc
> 0.79              aaaaa
>
> The proper display would be
>
> 5           ccccc
> 5           zzzzz
> 4           aaaaa
>
>
> It's easy enough to do a secondary sort, but that would not give me what I
> want. In this case, I'd get...
>
> 5       zzzzz
> 5       ccccc
> 4       aaaaa
>
> because the secondary sort only matters if the primary sort is equal. The
> user is left scratching her head asking "why did two books with the same
> relevancy have the titles out of order?".
>
> If I could massage my scores *before* sorts are done, things would be
> hunky-dory, but I'm not seeing how to do that. One problem is that until
> the
> top N documents have been collected, I don't know what the maximum
> relevance
> is, therefore I don't know how to normalize raw scores. I followed Hoss's
> thread where he talks about FakeNorms, but don't see how that applies to
> my
> problem.
>
> My result sets are strictly limited to < 500, so it's not unreasonable to
> just get the TopDocs back and aggregate my buckets at that point and sort
> them. But of course I only care about this when I am using relevancy as my
> primary sort. For sorting on any other fields, I would just let Lucene
> take
> care of it all. So post-sorting myself leads to really ugly stuff like
>
> if (it's my special relevancy sort) do one thing
> else don't do that thing.
>
> repeated wherever I have to sort. Yuck.....
>
>
> And since I'm talking about 500 docs, I don't want to wait until after I
> have a Hits object because I'll have to re-query several times. On an 8G
> index (and growing).
>
>
> This almost looks like a HitCollector, but not quite.
> This almost looks like a custom Similarity, but not quite since I want to
> just let Lucene compute relevance and put that into a bucket.
> This almost looks like FakeNorms, but not quite.
> This almost looks like about 8 things I tried to make work, but not quite
> <G>....
>
> So, somebody out there needs to tell me what part of the manual I
> overlooked
> <G>...
>
> Thanks
> Erick
>

------=_Part_55630_25967392.1170720459197--

From java-user-return-25941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 06 00:38:50 2007
Return-Path: <java-user-return-25941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38271 invoked from network); 6 Feb 2007 00:38:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Feb 2007 00:38:49 -0000
Received: (qmail 25808 invoked by uid 500); 6 Feb 2007 00:38:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25069 invoked by uid 500); 6 Feb 2007 00:38:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25057 invoked by uid 99); 6 Feb 2007 00:38:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Feb 2007 16:38:50 -0800
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.222.32.20] (HELO mexforward.lss.emc.com) (128.222.32.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Feb 2007 16:38:40 -0800
Received: from mailhub.lss.emc.com (sesha.lss.emc.com [10.254.144.12])
	by mexforward.lss.emc.com (Switch-3.1.7/Switch-3.1.7) with ESMTP id l160cIpP028026
	for <java-user@lucene.apache.org>; Mon, 5 Feb 2007 19:38:18 -0500 (EST)
Received: from corpussmtp3.corp.emc.com (corpussmtp3.corp.emc.com [10.254.64.53])
	by mailhub.lss.emc.com (Switch-3.1.8/Switch-3.1.7) with ESMTP id l160cHnd007799
	for <java-user@lucene.apache.org>; Mon, 5 Feb 2007 19:38:17 -0500 (EST)
From: Lee_Gary@emc.com
Received: from CORPUSMX40B.corp.emc.com ([10.254.64.47]) by corpussmtp3.corp.emc.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 5 Feb 2007 19:38:04 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: An arguable bug in Lucene 1.9.1
Date: Mon, 5 Feb 2007 19:38:03 -0500
Message-ID: <BED850C725E74F47A0F69CC0EE9AB64D0607FD68@CORPUSMX40B.corp.emc.com>
In-Reply-To: <359a92830605230722k622a1ca2p42485c581dbcae7f@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: An arguable bug in Lucene 1.9.1
Thread-Index: AcZ+dHp8V0r/P6/TRKaatlIGsbypOzLEnidA
References: <359a92830605230722k622a1ca2p42485c581dbcae7f@mail.gmail.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 06 Feb 2007 00:38:04.0430 (UTC) FILETIME=[102F5AE0:01C74987]
X-PMX-Version: 4.7.1.128075, Antispam-Engine: 2.5.0.283055, Antispam-Data: 2007.2.5.160433
X-PerlMx-Spam: Gauge=, SPAM=2%, Reason='EMC_FROM_0+ -2, NO_REAL_NAME 0, __CT 0, __CTE 0, __CTYPE_CHARSET_QUOTED 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __IMS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __STOCK_PHRASE_7 0'
X-Virus-Checked: Checked by ClamAV on apache.org

I am seeing this issue as well with the exact same stack trace using
spanQueries. Does anyone know if this has been fixed for versions after
1.9.1?

Thanks
Gary=20

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Tuesday, May 23, 2006 07:23 AM
To: java-user@lucene.apache.org
Subject: An arguable bug in Lucene 1.9.1

I'm constructing a BooleanQuery across several fields with
SpanNearQuerys.
In the degenerate case of spanning *one* term, AND adding a non-span
clause, I get an exception thrown. Of course you can argue that a span
query over one term is silly and shouldn't be done, but I thought I'd
mention this. I'm content with whatever y'all decide.

Here's the results of a BooleanQuery.toString:

+(spanNear([person:john], 20, false) spanNear([text:john], 5, false))
+groupid:14075

This results in the following stack trace:

ava.lang.ArrayIndexOutOfBoundsException: 4
    at org.apache.lucene.search.BooleanScorer2$Coordinator.coordFactor(
BooleanScorer2.java:54)
    at org.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java
:328)
    at org.apache.lucene.search.ConjunctionScorer.score(
ConjunctionScorer.java:82)
    at
org.apache.lucene.search.BooleanScorer2$2.score(BooleanScorer2.java
:186)
    at org.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java
:327)
    at org.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java
:291)
    at
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:132)
    at
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:110)
    at org.apache.lucene.search.Searcher.search(Searcher.java:76)
   ****my code here

If I take off the end clause, or have more than one string in the span,
it works. e.g.

+(spanNear([person:john], 20, false) spanNear([text:john], 5, false))

works, as does:

+(spanNear([person:john, person:johnson], 20, false)=20
+spanNear([text:john,
text:johnson], 5, false)) +groupid:14075

Of course I can (and will) intercept the creation of the span queries
when there is only one term and use TermQuery instead. I suspect that
this is better practice anyway.

I'll be happy to enter this in bugs database if you think I should.

Best
Erick

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 06 01:47:18 2007
Return-Path: <java-user-return-25942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57797 invoked from network); 6 Feb 2007 01:47:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Feb 2007 01:47:17 -0000
Received: (qmail 84389 invoked by uid 500); 6 Feb 2007 01:47:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84358 invoked by uid 500); 6 Feb 2007 01:47:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84347 invoked by uid 99); 6 Feb 2007 01:47:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Feb 2007 17:47:18 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Feb 2007 17:47:08 -0800
Received: by nf-out-0910.google.com with SMTP id i2so19060nfe
        for <java-user@lucene.apache.org>; Mon, 05 Feb 2007 17:46:47 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=a2/ak4nxmStBqNa+Vvontuf7r/Og0cEX5ZD2x9ENRfCHyzF2KrbZ5nrHG5KfCrl6LZl0O7c2TruSIykbN/Ox/khCh1NI1mebTj8uKJFImHx+I2cWMJHJ6QxkFAXQA8S8e5jZOWHkf5hjffYZhJFMGLZjQ5LGjGuH1BwZWjevAAY=
Received: by 10.82.184.2 with SMTP id h2mr3181960buf.1170726406409;
        Mon, 05 Feb 2007 17:46:46 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Mon, 5 Feb 2007 17:46:46 -0800 (PST)
Message-ID: <359a92830702051746i1375ed1cl471b3d3cc8c5cb8a@mail.gmail.com>
Date: Mon, 5 Feb 2007 20:46:46 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: relevancy "buckets" and secondary searching
In-Reply-To: <e994873a0702051607g5fefe297v44aeeeef8388352c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_81905_10227835.1170726406267"
References: <359a92830702051345p7ff4b9acg18bc28d2dce88366@mail.gmail.com>
	 <e994873a0702051607g5fefe297v44aeeeef8388352c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_81905_10227835.1170726406267
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, I'm glad to see that it's not just me<G>. What I'd tentatively thought
about was using a TopDocs (search(Query, Filter, Num) form) to get me the
top Num documents (by relevance), then doing the "bucketing" and sorting
myself at that point. But your suggestion made me look at
FieldSortedHitQueue and it looks like a lot less work than I was going to
do.

It seems like I can use a TopDocs to avoid the HitCollector step you're
thinking about, on the theory that it would be less for me to mess up. Once
I have the TopDocs, I can "bucketize" the scores and use the
FieldSortedHitQueue as you suggest.

The ugly part I wanted to avoid was having a bunch of logic to handle when I
wanted to do this and when I wanted to sort by criteria other than
relevance. Perhaps I can get a bit clever and make that part pretty if I
think about for a bit in the morning, all this OO stuff must be good for
*something* in this situation....

Thanks, I'd completely overlooked FieldSortedHitQueue, that may make things
much less yucky that I was fearing.....

Best
Erick

On 2/5/07, Peter Keegan <peterlkeegan@gmail.com> wrote:
>
> Hi Erick,
>
> The timing of your posting is ironic because I'm currently working on the
> same issue. Here's a solution that I'm going to try:
>
> Use a HitCollector with a PriorityQueue to sort all hits by raw Lucene
> score, ignoring the secondary sort field.
>
> After the search, re-sort just the hits from the queue above (500 in your
> case) with a FieldSortedHitQueue that sorts on score, then the secondary
> field (title in your case), but 'normalize' the score to your 'user
> visible'
> scores before re-sorting. If your 'normalized' score is computed properly,
> this should force the secondary sort to occur and produce the 'proper'
> sorting that the user expects.
>
> I think the trick here is in computing the proper normalized score from
> Lucene's raw scores, which will vary depending on boosts, etc.
>
> I agree with you that this "special relevancy sort" is a real hack to
> implement!
>
>
> Peter
>
> On 2/5/07, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > Am I missing anything obvious here and/or what would folks suggest...
> >
> > Conceptually, I want to normalize the scores of my documents during a
> > search
> > BUT BEFORE SORTING into 5 discrete values, say 0.1, 0.3, 0.5, 0.7, 0.9and
> > apply a secondary sort when two documents have the same score. Applying
> > the
> > secondary sort is easy, it's massaging the scores that has me stumped.
> >
> > We have a bunch of documents (30K). Books actually. We only display to
> the
> > user 5 different "relevance" scores, with 5 being the most relevant. So
> > far,
> > so good.
> >
> > Within each quintile, we want to sort by title. So, suppose the
> following
> > three books score a hit:
> >
> > relevance      title
> > 0.98              zzzzz
> > 0.94              ccccc
> > 0.79              aaaaa
> >
> > The proper display would be
> >
> > 5           ccccc
> > 5           zzzzz
> > 4           aaaaa
> >
> >
> > It's easy enough to do a secondary sort, but that would not give me what
> I
> > want. In this case, I'd get...
> >
> > 5       zzzzz
> > 5       ccccc
> > 4       aaaaa
> >
> > because the secondary sort only matters if the primary sort is equal.
> The
> > user is left scratching her head asking "why did two books with the same
> > relevancy have the titles out of order?".
> >
> > If I could massage my scores *before* sorts are done, things would be
> > hunky-dory, but I'm not seeing how to do that. One problem is that until
> > the
> > top N documents have been collected, I don't know what the maximum
> > relevance
> > is, therefore I don't know how to normalize raw scores. I followed
> Hoss's
> > thread where he talks about FakeNorms, but don't see how that applies to
> > my
> > problem.
> >
> > My result sets are strictly limited to < 500, so it's not unreasonable
> to
> > just get the TopDocs back and aggregate my buckets at that point and
> sort
> > them. But of course I only care about this when I am using relevancy as
> my
> > primary sort. For sorting on any other fields, I would just let Lucene
> > take
> > care of it all. So post-sorting myself leads to really ugly stuff like
> >
> > if (it's my special relevancy sort) do one thing
> > else don't do that thing.
> >
> > repeated wherever I have to sort. Yuck.....
> >
> >
> > And since I'm talking about 500 docs, I don't want to wait until after I
> > have a Hits object because I'll have to re-query several times. On an 8G
> > index (and growing).
> >
> >
> > This almost looks like a HitCollector, but not quite.
> > This almost looks like a custom Similarity, but not quite since I want
> to
> > just let Lucene compute relevance and put that into a bucket.
> > This almost looks like FakeNorms, but not quite.
> > This almost looks like about 8 things I tried to make work, but not
> quite
> > <G>....
> >
> > So, somebody out there needs to tell me what part of the manual I
> > overlooked
> > <G>...
> >
> > Thanks
> > Erick
> >
>

------=_Part_81905_10227835.1170726406267--

From java-user-return-25943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 06 08:16:58 2007
Return-Path: <java-user-return-25943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40813 invoked from network); 6 Feb 2007 08:16:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Feb 2007 08:16:57 -0000
Received: (qmail 83003 invoked by uid 500); 6 Feb 2007 08:16:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82022 invoked by uid 500); 6 Feb 2007 08:16:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82009 invoked by uid 99); 6 Feb 2007 08:16:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Feb 2007 00:16:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.109.24.36] (HELO smtp-vbr16.xs4all.nl) (194.109.24.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Feb 2007 00:16:45 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr16.xs4all.nl (8.13.8/8.13.8) with ESMTP id l168GNE4006903
	for <java-user@lucene.apache.org>; Tue, 6 Feb 2007 09:16:24 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: An arguable bug in Lucene 1.9.1
Date: Tue, 6 Feb 2007 09:16:22 +0100
User-Agent: KMail/1.8.2
References: <359a92830605230722k622a1ca2p42485c581dbcae7f@mail.gmail.com> <BED850C725E74F47A0F69CC0EE9AB64D0607FD68@CORPUSMX40B.corp.emc.com>
In-Reply-To: <BED850C725E74F47A0F69CC0EE9AB64D0607FD68@CORPUSMX40B.corp.emc.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200702060916.22488.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Gentlemen,

Have a look here:
https://issues.apache.org:443/jira/browse/LUCENE-413
This was fixed in 2.0. 

Regards,
Paul Elschot




On Tuesday 06 February 2007 01:38, Lee_Gary@emc.com wrote:
> I am seeing this issue as well with the exact same stack trace using
> spanQueries. Does anyone know if this has been fixed for versions after
> 1.9.1?
> 
> Thanks
> Gary 
> 
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com] 
> Sent: Tuesday, May 23, 2006 07:23 AM
> To: java-user@lucene.apache.org
> Subject: An arguable bug in Lucene 1.9.1
> 
> I'm constructing a BooleanQuery across several fields with
> SpanNearQuerys.
> In the degenerate case of spanning *one* term, AND adding a non-span
> clause, I get an exception thrown. Of course you can argue that a span
> query over one term is silly and shouldn't be done, but I thought I'd
> mention this. I'm content with whatever y'all decide.
> 
> Here's the results of a BooleanQuery.toString:
> 
> +(spanNear([person:john], 20, false) spanNear([text:john], 5, false))
> +groupid:14075
> 
> This results in the following stack trace:
> 
> ava.lang.ArrayIndexOutOfBoundsException: 4
>     at org.apache.lucene.search.BooleanScorer2$Coordinator.coordFactor(
> BooleanScorer2.java:54)
>     at org.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java
> :328)
>     at org.apache.lucene.search.ConjunctionScorer.score(
> ConjunctionScorer.java:82)
>     at
> org.apache.lucene.search.BooleanScorer2$2.score(BooleanScorer2.java
> :186)
>     at org.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java
> :327)
>     at org.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java
> :291)
>     at
> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:132)
>     at
> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:110)
>     at org.apache.lucene.search.Searcher.search(Searcher.java:76)
>    ****my code here
> 
> If I take off the end clause, or have more than one string in the span,
> it works. e.g.
> 
> +(spanNear([person:john], 20, false) spanNear([text:john], 5, false))
> 
> works, as does:
> 
> +(spanNear([person:john, person:johnson], 20, false) 
> +spanNear([text:john,
> text:johnson], 5, false)) +groupid:14075
> 
> Of course I can (and will) intercept the creation of the span queries
> when there is only one term and use TermQuery instead. I suspect that
> this is better practice anyway.
> 
> I'll be happy to enter this in bugs database if you think I should.
> 
> Best
> Erick
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 06 12:22:26 2007
Return-Path: <java-user-return-25944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22926 invoked from network); 6 Feb 2007 12:22:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Feb 2007 12:22:25 -0000
Received: (qmail 34860 invoked by uid 500); 6 Feb 2007 12:22:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34825 invoked by uid 500); 6 Feb 2007 12:22:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34814 invoked by uid 99); 6 Feb 2007 12:22:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Feb 2007 04:22:24 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.97.50.132] (HELO mout1.freenet.de) (194.97.50.132)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Feb 2007 04:22:14 -0800
Received: from [194.97.55.147] (helo=mx4.freenet.de)
	by mout1.freenet.de with esmtpa (Exim 4.67)
	(envelope-from <claus.giesenberg@freenet.de>)
	id 1HEPKa-0007dJ-IW
	for java-user@lucene.apache.org; Tue, 06 Feb 2007 13:21:52 +0100
Received: from vd26b.v.pppool.de ([89.57.210.107]:61684 helo=[192.168.178.21])
	by mx4.freenet.de with esmtpa (ID claus.giesenberg@freenet.de) (port 25) (Exim 4.67 #1)
	id 1HEPKa-0005gJ-CP
	for java-user@lucene.apache.org; Tue, 06 Feb 2007 13:21:52 +0100
Message-ID: <45C872C8.3000002@freenet.de>
Date: Tue, 06 Feb 2007 13:21:28 +0100
From: "claus.giesenberg@freenet.de" <claus.giesenberg@freenet.de>
Reply-To:  claus.giesenberg@freenet.de
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: upgrading from Lucene 1.4.3 to Lucene 2.0
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all !

Which performance improvements can I expect when upgrading from Lucene 
1.4.3 to Lucene 2.0 ?
Thanks in advance !

Regards,
Claus


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 06 13:15:08 2007
Return-Path: <java-user-return-25945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40398 invoked from network); 6 Feb 2007 13:15:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Feb 2007 13:15:08 -0000
Received: (qmail 5352 invoked by uid 500); 6 Feb 2007 13:15:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4823 invoked by uid 500); 6 Feb 2007 13:15:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4812 invoked by uid 99); 6 Feb 2007 13:15:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Feb 2007 05:15:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mile.rosu@level7.ro designates 193.230.233.11 as permitted sender)
Received: from [193.230.233.11] (HELO mail.datagroup.ro) (193.230.233.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Feb 2007 05:14:58 -0800
Received: from webserver.level7.ro (localhost [127.0.0.1])
	by webserver.level7.ro (Postfix) with ESMTP id A4EE9A65E7
	for <java-user@lucene.apache.org>; Tue,  6 Feb 2007 15:14:37 +0200 (EET)
Received: by mail.datagroup.ro (Postfix, from userid 107)
	id 94011A65F9; Tue,  6 Feb 2007 15:14:37 +0200 (EET)
X-Spam-Checker-Version: SpamAssassin 3.1.7 (2006-10-05) on webserver.level7.ro
X-Spam-Level: 
Received: from [10.0.0.73] (mile-r.intranet [10.0.0.73])
	by mail.datagroup.ro (Postfix) with ESMTP id 7656BA65E7
	for <java-user@lucene.apache.org>; Tue,  6 Feb 2007 15:14:31 +0200 (EET)
Message-ID: <45C87F37.7040507@level7.ro>
Date: Tue, 06 Feb 2007 15:14:31 +0200
From: Mile Rosu <mile.rosu@level7.ro>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Retrieving exact matches
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Anti-Virus: Kaspersky Anti-Virus for MailServers 5.5.10/RELEASE, bases: 06022007 #250568, status: clean
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-104.3 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00,
	USER_IN_WHITELIST autolearn=ham version=3.1.7


Hello,


I have been looking in the documentation but haven't found a solution to 
this:

is there a way to retrieve only the record "picasso" when the query is 
picasso and not the records: "picasso","picasso pablo"  ie a 100% match 
of the query ?


Thank you,
Mile Rosu



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 06 13:20:24 2007
Return-Path: <java-user-return-25946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42359 invoked from network); 6 Feb 2007 13:20:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Feb 2007 13:20:24 -0000
Received: (qmail 13412 invoked by uid 500); 6 Feb 2007 13:20:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13385 invoked by uid 500); 6 Feb 2007 13:20:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13373 invoked by uid 99); 6 Feb 2007 13:20:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Feb 2007 05:20:24 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of rubdabadub@gmail.com designates 209.85.132.248 as permitted sender)
Received: from [209.85.132.248] (HELO an-out-0708.google.com) (209.85.132.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Feb 2007 05:20:14 -0800
Received: by an-out-0708.google.com with SMTP id c3so1181211ana
        for <java-user@lucene.apache.org>; Tue, 06 Feb 2007 05:19:53 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=uEyjtigRGbF9+TIgTx2fAFyGekl6NkkZ1Gkp3v3OdvuELwI4L66fQBYV9I4n/KIx/9QRJfHGrkoKifO8KGem2yw4qQDgwxfOInL3GV3c9YW6Zqn1vGosAOW9biodAoMohkBQ6MBjD818BwpuAHPOksyRa3u4Qv/56pBp8Z/AwtY=
Received: by 10.114.47.1 with SMTP id u1mr62519wau.1170767993101;
        Tue, 06 Feb 2007 05:19:53 -0800 (PST)
Received: by 10.115.90.2 with HTTP; Tue, 6 Feb 2007 05:19:52 -0800 (PST)
Message-ID: <c292ca070702060519pbac6cd3nd325fca4b824be42@mail.gmail.com>
Date: Tue, 6 Feb 2007 14:19:52 +0100
From: rubdabadub <rubdabadub@gmail.com>
To: java-user@lucene.apache.org
Subject: Swedish, Norwegian or Danish Analyzers?
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi:

Didn't find any of the nordic (Swedish, Danis etc..) language
analyzers under svn/contrib..Trying to do a quick check here.. I am
interested in only analyzers ..

Thanks for any pointer.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 06 13:23:10 2007
Return-Path: <java-user-return-25947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43553 invoked from network); 6 Feb 2007 13:23:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Feb 2007 13:23:08 -0000
Received: (qmail 17500 invoked by uid 500); 6 Feb 2007 13:23:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16565 invoked by uid 500); 6 Feb 2007 13:23:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16543 invoked by uid 99); 6 Feb 2007 13:23:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Feb 2007 05:23:07 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of rubdabadub@gmail.com designates 64.233.184.234 as permitted sender)
Received: from [64.233.184.234] (HELO wr-out-0506.google.com) (64.233.184.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Feb 2007 05:22:58 -0800
Received: by wr-out-0506.google.com with SMTP id i4so1679453wra
        for <java-user@lucene.apache.org>; Tue, 06 Feb 2007 05:22:37 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=crW1uA+jphlUXqi5Q+w4UuEBLPh/z+a2oqr84HVUIPX0hyFbpq6sXPgQWmE7oNs5rTHYQA1VzONkbCXgDLY8UTx9EvnSjH7KwkXqxVfipAl4ZpGfJMYMdqdXgSOvcHMV47LySPxgielQ3uRDgfF+k6hTWzUK685R2Rp60JC78cg=
Received: by 10.114.93.1 with SMTP id q1mr760198wab.1170768157119;
        Tue, 06 Feb 2007 05:22:37 -0800 (PST)
Received: by 10.115.90.2 with HTTP; Tue, 6 Feb 2007 05:22:37 -0800 (PST)
Message-ID: <c292ca070702060522t6d5c2df6qaaa837a7dab7c86e@mail.gmail.com>
Date: Tue, 6 Feb 2007 14:22:37 +0100
From: rubdabadub <rubdabadub@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Swedish, Norwegian or Danish Analyzers?
In-Reply-To: <c292ca070702060519pbac6cd3nd325fca4b824be42@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <c292ca070702060519pbac6cd3nd325fca4b824be42@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry I meant to say publicly available ones :-)

On 2/6/07, rubdabadub <rubdabadub@gmail.com> wrote:
> Hi:
>
> Didn't find any of the nordic (Swedish, Danis etc..) language
> analyzers under svn/contrib..Trying to do a quick check here.. I am
> interested in only analyzers ..
>
> Thanks for any pointer.
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 06 14:00:11 2007
Return-Path: <java-user-return-25948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58631 invoked from network); 6 Feb 2007 14:00:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Feb 2007 14:00:11 -0000
Received: (qmail 86235 invoked by uid 500); 6 Feb 2007 14:00:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86212 invoked by uid 500); 6 Feb 2007 14:00:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86201 invoked by uid 99); 6 Feb 2007 14:00:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Feb 2007 06:00:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 64.233.162.231 as permitted sender)
Received: from [64.233.162.231] (HELO nz-out-0506.google.com) (64.233.162.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Feb 2007 06:00:00 -0800
Received: by nz-out-0506.google.com with SMTP id i1so1863573nzh
        for <java-user@lucene.apache.org>; Tue, 06 Feb 2007 05:59:39 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=tfNiAJvUahJGhi5HC/w3/p0HRcKZPn1/DDC1LAjySTryAkCo3p1rfIx2OiU/TtEvZth+vXJJ3CkG7PW1vwxILpWo9gdGS2bxCrL07ZRYbNc5+i+T4p551KIyg6UiEDKBxbvp5jkb9S87Jc/11n4sJ50KhiWvi0aHrLqBlfVqEuo=
Received: by 10.65.219.4 with SMTP id w4mr4039042qbq.1170770379564;
        Tue, 06 Feb 2007 05:59:39 -0800 (PST)
Received: from ?10.0.1.12? ( [212.162.171.110])
        by mx.google.com with ESMTP id z73sm2455569nfb.2007.02.06.05.59.38;
        Tue, 06 Feb 2007 05:59:38 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <c292ca070702060519pbac6cd3nd325fca4b824be42@mail.gmail.com>
References: <c292ca070702060519pbac6cd3nd325fca4b824be42@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <CF4514F3-FA2C-47B7-BB9A-B66486C72640@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Swedish, Norwegian or Danish Analyzers?
Date: Tue, 6 Feb 2007 14:58:31 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


6 feb 2007 kl. 14.19 skrev rubdabadub:

> Didn't find any of the nordic (Swedish, Danis etc..) language
> analyzers under svn/contrib..Trying to do a quick check here.. I am
> interested in only analyzers ..

Is this what you are looking for?

https://svn.apache.org/repos/asf/lucene/java/trunk/contrib/snowball/

https://svn.apache.org/repos/asf/lucene/java/trunk/contrib/snowball/ 
src/java/net/sf/snowball/ext/

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 06 14:10:58 2007
Return-Path: <java-user-return-25949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62176 invoked from network); 6 Feb 2007 14:10:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Feb 2007 14:10:56 -0000
Received: (qmail 11086 invoked by uid 500); 6 Feb 2007 14:11:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11059 invoked by uid 500); 6 Feb 2007 14:11:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11038 invoked by uid 99); 6 Feb 2007 14:11:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Feb 2007 06:11:00 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Feb 2007 06:10:50 -0800
Received: by nf-out-0910.google.com with SMTP id i2so159506nfe
        for <java-user@lucene.apache.org>; Tue, 06 Feb 2007 06:10:29 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=e/oHcaJc+sGtKF53E+Vz+EGQeJQRdLPJlrqLvwIjWkfw4+er5QUMYJyYJkQfx+Lhvs3dXYUmETugsLmSdexpym2hOlKuKdPZDbpz8JoXBYM7d1M16jn+hbOuFN8dcPgi9hcyR6xNxdO2F7brcuFVfBwT9PiWY/CmcQeJJ4vHNCw=
Received: by 10.82.120.14 with SMTP id s14mr4472564buc.1170771028432;
        Tue, 06 Feb 2007 06:10:28 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Tue, 6 Feb 2007 06:10:28 -0800 (PST)
Message-ID: <359a92830702060610q3df92ef7ped83352ef3a8d32c@mail.gmail.com>
Date: Tue, 6 Feb 2007 09:10:28 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Retrieving exact matches
In-Reply-To: <45C87F37.7040507@level7.ro>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6171_30870542.1170771028369"
References: <45C87F37.7040507@level7.ro>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6171_30870542.1170771028369
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

One way to do this is to store the fields UN_TOKENIZED (and be careful to
index and search with compatible Analyzers!!) Also, watch your
capitalization. But this is a bit tricky, since if you index UN_TOKENIZED,
you would never get a match for your second document above unless you
searched on "picasso pablo". In particular, what if you were searching on
"picasso, pablo"? Since the comma is not stripped (the search terms being
UN_TOKENIZED), it wouldn't match your second document above. You can get
around this with some pre-processing, but be aware that when you are asking
for exact matches using UN_TOKENIZED fields, you really have to be careful
about how you handle these kinds of situations. This is true when indexing
AND when searching.

Also, this is suitable only for pretty strictly defined fields. You might
find yourself indexing the same data several different ways if you sometimes
want to search on exact phrases and sometimes on partial...

But I don't understand your example and I'm assuming that you'd want one
match in your example, but not two.


Best
Erick

On 2/6/07, Mile Rosu <mile.rosu@level7.ro> wrote:
>
>
> Hello,
>
>
> I have been looking in the documentation but haven't found a solution to
> this:
>
> is there a way to retrieve only the record "picasso" when the query is
> picasso and not the records: "picasso","picasso pablo"  ie a 100% match
> of the query ?
>
>
> Thank you,
> Mile Rosu
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_6171_30870542.1170771028369--

From java-user-return-25950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 06 15:23:14 2007
Return-Path: <java-user-return-25950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1093 invoked from network); 6 Feb 2007 15:23:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Feb 2007 15:23:13 -0000
Received: (qmail 53989 invoked by uid 500); 6 Feb 2007 15:23:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53707 invoked by uid 500); 6 Feb 2007 15:23:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53696 invoked by uid 99); 6 Feb 2007 15:23:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Feb 2007 07:23:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of rubdabadub@gmail.com designates 209.85.132.243 as permitted sender)
Received: from [209.85.132.243] (HELO an-out-0708.google.com) (209.85.132.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Feb 2007 07:23:02 -0800
Received: by an-out-0708.google.com with SMTP id c3so1221382ana
        for <java-user@lucene.apache.org>; Tue, 06 Feb 2007 07:22:42 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=l3/XT9LuCna4vKn6uy28dVR6tw3rYJync3EYmzFMnJU2+vYjMbH0c+9s9j8b7iBuI91tq3aa568SMikGPJuT6vOgVgBzJ72T5azQa2x/YddEp6lkWsJPuGNFlmOYFBdO9C7/QZLW+UVra8VzaoublWEBNq7jwc2a33uIgC6viGw=
Received: by 10.114.133.1 with SMTP id g1mr763930wad.1170775361655;
        Tue, 06 Feb 2007 07:22:41 -0800 (PST)
Received: by 10.115.90.2 with HTTP; Tue, 6 Feb 2007 07:22:41 -0800 (PST)
Message-ID: <c292ca070702060722h49a85c34q7d8e514f6cb3ee3d@mail.gmail.com>
Date: Tue, 6 Feb 2007 16:22:41 +0100
From: rubdabadub <rubdabadub@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Swedish, Norwegian or Danish Analyzers?
In-Reply-To: <CF4514F3-FA2C-47B7-BB9A-B66486C72640@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <c292ca070702060519pbac6cd3nd325fca4b824be42@mail.gmail.com>
	 <CF4514F3-FA2C-47B7-BB9A-B66486C72640@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On 2/6/07, karl wettin <karl.wettin@gmail.com> wrote:
>
> 6 feb 2007 kl. 14.19 skrev rubdabadub:
>
> > Didn't find any of the nordic (Swedish, Danis etc..) language
> > analyzers under svn/contrib..Trying to do a quick check here.. I am
> > interested in only analyzers ..
>
> Is this what you are looking for?
>
> https://svn.apache.org/repos/asf/lucene/java/trunk/contrib/snowball/
>
> https://svn.apache.org/repos/asf/lucene/java/trunk/contrib/snowball/
> src/java/net/sf/snowball/ext/


Karl:

Thanks for the pointer. Actually I was hoping for a 'drop-in'
analyzers. I am not yet familiar with snowball stemmers yet... I need
to do some reading! Thanks a bunch!


> --
> karl
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 06 15:59:05 2007
Return-Path: <java-user-return-25951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26140 invoked from network); 6 Feb 2007 15:59:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Feb 2007 15:59:05 -0000
Received: (qmail 24698 invoked by uid 500); 6 Feb 2007 15:59:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24520 invoked by uid 500); 6 Feb 2007 15:59:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24509 invoked by uid 99); 6 Feb 2007 15:59:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Feb 2007 07:59:05 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Feb 2007 07:58:54 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HESiE-0006Gl-Nf
	for java-user@lucene.apache.org; Tue, 06 Feb 2007 07:58:30 -0800
Message-ID: <8828462.post@talk.nabble.com>
Date: Tue, 6 Feb 2007 07:58:30 -0800 (PST)
From: poeta simbolista <poetasimbolista@gmail.com>
To: java-user@lucene.apache.org
Subject: query problem: grouping "with same field"
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: poetasimbolista@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi all,

First of all thanks for this forum, I have read stuff that helped me a lot.
Second, I would like to query a Lucene index in this way:
I want to do operations on groups of entries. These entries I want them to
be grouped by a field, (called websiteid), so the queries will only go to
those listings.
What would it be the best approach for this?
Thanks a lot
 D
-- 
View this message in context: http://www.nabble.com/query-problem%3A-grouping-%22with-same-field%22-tf3181355.html#a8828462
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 06 16:53:44 2007
Return-Path: <java-user-return-25952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49892 invoked from network); 6 Feb 2007 16:53:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Feb 2007 16:53:43 -0000
Received: (qmail 52221 invoked by uid 500); 6 Feb 2007 16:53:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52170 invoked by uid 500); 6 Feb 2007 16:53:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52134 invoked by uid 99); 6 Feb 2007 16:53:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Feb 2007 08:53:08 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Feb 2007 08:52:58 -0800
Received: by nf-out-0910.google.com with SMTP id i2so210159nfe
        for <java-user@lucene.apache.org>; Tue, 06 Feb 2007 08:52:34 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=IpWqs/0uLL2AKr/P95bfM/svsgol63YNXy5N9IZX05yqJdDdUfI/UN1ilxvLx1y55/4moW4EOic/y1dZd3rIwsh/225ZlaXJm9Mnx+S7xCvK9Sz8t4W+L2RGPb0HKTcmxsQijJt8iuUqeqodWOsUO/haz6u8q5cxWSei8XE5jbo=
Received: by 10.82.152.16 with SMTP id z16mr4765721bud.1170780753573;
        Tue, 06 Feb 2007 08:52:33 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Tue, 6 Feb 2007 08:52:33 -0800 (PST)
Message-ID: <359a92830702060852m4297f61bn1e6f0f48f33301fa@mail.gmail.com>
Date: Tue, 6 Feb 2007 11:52:33 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: query problem: grouping "with same field"
In-Reply-To: <8828462.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9853_4422680.1170780753541"
References: <8828462.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9853_4422680.1170780753541
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Isn't this just a field on your document and an AND in the query with the
websiteID in question? Or are you saying you want to group results by
multiple website IDs in a single query? As in

webid1
  resulta
  resultb
  resultc
webid2
  resulte
  resultf
  resultg

etc.

If the latter, search the archive for "facets", "faceted" and there are
extensive discussions that'll help a great deal.

Best
Erick

On 2/6/07, poeta simbolista <poetasimbolista@gmail.com> wrote:
>
>
> Hi all,
>
> First of all thanks for this forum, I have read stuff that helped me a
> lot.
> Second, I would like to query a Lucene index in this way:
> I want to do operations on groups of entries. These entries I want them to
> be grouped by a field, (called websiteid), so the queries will only go to
> those listings.
> What would it be the best approach for this?
> Thanks a lot
> D
> --
> View this message in context:
> http://www.nabble.com/query-problem%3A-grouping-%22with-same-field%22-tf3181355.html#a8828462
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_9853_4422680.1170780753541--

From java-user-return-25953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 06 17:14:01 2007
Return-Path: <java-user-return-25953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55910 invoked from network); 6 Feb 2007 17:13:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Feb 2007 17:13:56 -0000
Received: (qmail 92247 invoked by uid 500); 6 Feb 2007 17:13:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91253 invoked by uid 500); 6 Feb 2007 17:13:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91242 invoked by uid 99); 6 Feb 2007 17:13:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Feb 2007 09:13:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Feb 2007 09:13:42 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HETsf-0006Wm-I0
	for java-user@lucene.apache.org; Tue, 06 Feb 2007 09:13:21 -0800
Message-ID: <8829971.post@talk.nabble.com>
Date: Tue, 6 Feb 2007 09:13:21 -0800 (PST)
From: poeta simbolista <poetasimbolista@gmail.com>
To: java-user@lucene.apache.org
Subject: deviations
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: poetasimbolista@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi, 
I would like to query results, regarding results.
For example, get those results whose field "size" is 2 standard deviations
from the median.

It looks like sth I should do myself, processing results first, getting the
median, and then calculate that threshold and perform a new query. Is it
however, sth there that may help with that?

Thank you
-- 
View this message in context: http://www.nabble.com/deviations-tf3181792.html#a8829971
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 06 17:25:31 2007
Return-Path: <java-user-return-25954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64325 invoked from network); 6 Feb 2007 17:25:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Feb 2007 17:25:30 -0000
Received: (qmail 21072 invoked by uid 500); 6 Feb 2007 17:25:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21039 invoked by uid 500); 6 Feb 2007 17:25:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21020 invoked by uid 99); 6 Feb 2007 17:25:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Feb 2007 09:25:16 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a18.g.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Feb 2007 09:25:05 -0800
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a18.g.dreamhost.com (Postfix) with ESMTP id 523655B531
	for <java-user@lucene.apache.org>; Tue,  6 Feb 2007 09:24:44 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <8829971.post@talk.nabble.com>
References: <8829971.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <583A43AA-2114-4BE0-BF0B-9EE5A3DC7082@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: deviations
Date: Tue, 6 Feb 2007 12:24:42 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Have a look at the FieldSelector stuff, assuming you are using trunk  
or some recent nightly build.  It _may_ help w/ what you are doing.   
Also, I would think you could calculate the median at indexing time  
(or just after), but I'm not sure I fully understand what you are  
trying to do, so take that w/ a grain of salt.

You may find https://issues.apache.org/jira/browse/LUCENE-762  
useful.  It hasn't been committed, but will be before 2.1 (so you  
will have to apply the patch too)  Also, don't worry about the  
discussion of the internals, the patch as submitted by Chuck is good

You will have to calculate your deviations separately, but the field  
size info should help.

-Grant


On Feb 6, 2007, at 12:13 PM, poeta simbolista wrote:

>
> Hi,
> I would like to query results, regarding results.
> For example, get those results whose field "size" is 2 standard  
> deviations
> from the median.
>
> It looks like sth I should do myself, processing results first,  
> getting the
> median, and then calculate that threshold and perform a new query.  
> Is it
> however, sth there that may help with that?
>
> Thank you
> -- 
> View this message in context: http://www.nabble.com/deviations- 
> tf3181792.html#a8829971
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 06 18:31:05 2007
Return-Path: <java-user-return-25955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87952 invoked from network); 6 Feb 2007 18:31:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Feb 2007 18:31:04 -0000
Received: (qmail 66578 invoked by uid 500); 6 Feb 2007 18:31:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66542 invoked by uid 500); 6 Feb 2007 18:31:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66531 invoked by uid 99); 6 Feb 2007 18:31:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Feb 2007 10:31:04 -0800
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [63.162.98.45] (HELO srq01.BIPT.COM) (63.162.98.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Feb 2007 10:30:55 -0800
To: java-user@lucene.apache.org
Subject: Newbie question...
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 7.0.1 January 17, 2006
Message-ID: <OF735C3082.1D8BCFD1-ON8525727A.00657EDC-8525727A.0065ACFA@BIPT.COM>
From: Don.Reese@BIPT.COM
Date: Tue, 6 Feb 2007 13:30:34 -0500
X-MIMETrack: Serialize by Router on SRQ01/BIPT(Release 7.0.1FP1|April 17, 2006) at 02/06/2007
 01:30:54 PM,
	Serialize complete at 02/06/2007 01:30:54 PM
Content-Type: text/plain; charset="US-ASCII"
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Sorry if this has been explained before, but could not find anything using 
the user archive search...

I understand the concept of the fields.  What is not clear is if an 
document must have all fields that are used in the index or not.  Now let 
me clarify that some,  lets say that there are N types of information that 
I want to search against, but these types do not lend themselves to 
exactly the same fields.  Kind of like one index that is for a animal 
database and a car database.  There are common fields and there are fields 
that are unique to each data type.  While you may want to look for 
'Mustang' and return hits for both a horse and a ford, you may also want 
to look for something unique to the horse.  In this example can you define 
fields that are only used for one type data but not the other?  I do 
understand that I could define generic field names and assign data to 
them, but I would like the field name to lend meaning to the search.  I 
guess the alternative is to create N indices and search across then and 
merge the results.  Just not sure how to proceed at this time.

Don

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 06 18:51:06 2007
Return-Path: <java-user-return-25956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94422 invoked from network); 6 Feb 2007 18:51:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Feb 2007 18:51:05 -0000
Received: (qmail 12064 invoked by uid 500); 6 Feb 2007 18:50:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12039 invoked by uid 500); 6 Feb 2007 18:50:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12027 invoked by uid 99); 6 Feb 2007 18:50:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Feb 2007 10:50:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.157 as permitted sender)
Received: from [195.212.29.157] (HELO mtagate8.de.ibm.com) (195.212.29.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Feb 2007 10:50:38 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate8.de.ibm.com (8.13.8/8.13.8) with ESMTP id l16IoBm4184250
	for <java-user@lucene.apache.org>; Tue, 6 Feb 2007 18:50:11 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.2) with ESMTP id l16Io9gb1814620
	for <java-user@lucene.apache.org>; Tue, 6 Feb 2007 19:50:11 +0100
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l16Io8P2008681
	for <java-user@lucene.apache.org>; Tue, 6 Feb 2007 19:50:08 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l16Io5Xf008650
	for <java-user@lucene.apache.org>; Tue, 6 Feb 2007 19:50:06 +0100
In-Reply-To: <OF735C3082.1D8BCFD1-ON8525727A.00657EDC-8525727A.0065ACFA@BIPT.COM>
Subject: Re: Newbie question...
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFD9D67EFD.6C1BDC38-ON8825727A.00662BA9-8825727A.00673BAD@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Tue, 6 Feb 2007 10:47:34 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 06/02/2007 20:50:05
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Don,

No, Lucene does not require all documents to have the same set
of fields. It is different from a database table - it is all very
flexible. So doc1 can have fields f1, f2, and doc2 can have fields
f2 f3, and doc3 can have only field f4, and doc4 can have no fields
at all (likely that doc4 would not be very useful for doc4, but
it is possible).

See also Erick's comments here:
http://www.nabble.com/forum/ViewPost.jtp?post=8661350&framed=y

Regards,
Doron

Don.Reese@BIPT.COM wrote on 06/02/2007 10:30:34:

> Hi,
>
> Sorry if this has been explained before, but could not find anything
using
> the user archive search...
>
> I understand the concept of the fields.  What is not clear is if an
> document must have all fields that are used in the index or not.  Now let

> me clarify that some,  lets say that there are N types of information
that
> I want to search against, but these types do not lend themselves to
> exactly the same fields.  Kind of like one index that is for a animal
> database and a car database.  There are common fields and there are
fields
> that are unique to each data type.  While you may want to look for
> 'Mustang' and return hits for both a horse and a ford, you may also want
> to look for something unique to the horse.  In this example can you
define
> fields that are only used for one type data but not the other?  I do
> understand that I could define generic field names and assign data to
> them, but I would like the field name to lend meaning to the search.  I
> guess the alternative is to create N indices and search across then and
> merge the results.  Just not sure how to proceed at this time.
>
> Don
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 06 18:57:29 2007
Return-Path: <java-user-return-25957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96217 invoked from network); 6 Feb 2007 18:57:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Feb 2007 18:57:28 -0000
Received: (qmail 29011 invoked by uid 500); 6 Feb 2007 18:57:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28983 invoked by uid 500); 6 Feb 2007 18:57:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28972 invoked by uid 99); 6 Feb 2007 18:57:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Feb 2007 10:57:27 -0800
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [63.162.98.45] (HELO srq01.BIPT.COM) (63.162.98.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Feb 2007 10:57:18 -0800
In-Reply-To: <OFD9D67EFD.6C1BDC38-ON8825727A.00662BA9-8825727A.00673BAD@il.ibm.com>
To: java-user@lucene.apache.org
Cc: java-user@lucene.apache.org
Subject: Re: Newbie question...
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 7.0.1 January 17, 2006
Message-ID: <OF164D7E94.0DBED826-ON8525727A.0068100C-8525727A.00681778@BIPT.COM>
From: Don.Reese@BIPT.COM
Date: Tue, 6 Feb 2007 13:56:57 -0500
X-MIMETrack: Serialize by Router on SRQ01/BIPT(Release 7.0.1FP1|April 17, 2006) at 02/06/2007
 01:57:18 PM,
	Serialize complete at 02/06/2007 01:57:18 PM
Content-Type: text/plain; charset="US-ASCII"
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks, that is as I suspected, but it was not clear.
--
Don Reese
BIPT
PO Box 20159
5971 Cattleridge Blvd Ste 101
Sarasota, FL 34276
don.reese@bipt.com
941-358-8004 x139




Doron Cohen <DORONC@il.ibm.com> 
02/06/2007 01:51 PM
Please respond to
java-user@lucene.apache.org


To
java-user@lucene.apache.org
cc

Subject
Re: Newbie question...






Hi Don,

No, Lucene does not require all documents to have the same set
of fields. It is different from a database table - it is all very
flexible. So doc1 can have fields f1, f2, and doc2 can have fields
f2 f3, and doc3 can have only field f4, and doc4 can have no fields
at all (likely that doc4 would not be very useful for doc4, but
it is possible).

See also Erick's comments here:
http://www.nabble.com/forum/ViewPost.jtp?post=8661350&framed=y

Regards,
Doron

Don.Reese@BIPT.COM wrote on 06/02/2007 10:30:34:

> Hi,
>
> Sorry if this has been explained before, but could not find anything
using
> the user archive search...
>
> I understand the concept of the fields.  What is not clear is if an
> document must have all fields that are used in the index or not.  Now 
let

> me clarify that some,  lets say that there are N types of information
that
> I want to search against, but these types do not lend themselves to
> exactly the same fields.  Kind of like one index that is for a animal
> database and a car database.  There are common fields and there are
fields
> that are unique to each data type.  While you may want to look for
> 'Mustang' and return hits for both a horse and a ford, you may also want
> to look for something unique to the horse.  In this example can you
define
> fields that are only used for one type data but not the other?  I do
> understand that I could define generic field names and assign data to
> them, but I would like the field name to lend meaning to the search.  I
> guess the alternative is to create N indices and search across then and
> merge the results.  Just not sure how to proceed at this time.
>
> Don
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 06 19:40:00 2007
Return-Path: <java-user-return-25958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13199 invoked from network); 6 Feb 2007 19:39:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Feb 2007 19:39:59 -0000
Received: (qmail 22831 invoked by uid 500); 6 Feb 2007 19:39:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22804 invoked by uid 500); 6 Feb 2007 19:39:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22793 invoked by uid 99); 6 Feb 2007 19:39:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Feb 2007 11:39:58 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.29.7 as permitted sender)
Received: from [80.67.29.7] (HELO smtprelay07.ispgateway.de) (80.67.29.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Feb 2007 11:39:47 -0800
Received: (qmail 10630 invoked from network); 6 Feb 2007 19:39:25 -0000
Received: from unknown (HELO p5496f490.dip.t-dialin.net) ([pbs]695637@[84.150.244.144])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay07.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 6 Feb 2007 19:39:25 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: upgrading from Lucene 1.4.3 to Lucene 2.0
Date: Tue, 6 Feb 2007 20:39:12 +0100
User-Agent: KMail/1.8.2
References: <45C872C8.3000002@freenet.de>
In-Reply-To: <45C872C8.3000002@freenet.de>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200702062039.12870@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Tuesday 06 February 2007 13:21, claus.giesenberg@freenet.de wrote:

> Which performance improvements can I expect when upgrading from Lucene
> 1.4.3 to Lucene 2.0 ?

This is difficult to say, but you can update to Lucene 1.9 probably without 
doing any changes to your code and then make a performance test.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 07 06:28:59 2007
Return-Path: <java-user-return-25959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12393 invoked from network); 7 Feb 2007 06:28:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Feb 2007 06:28:58 -0000
Received: (qmail 40760 invoked by uid 500); 7 Feb 2007 06:28:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40712 invoked by uid 500); 7 Feb 2007 06:28:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40700 invoked by uid 99); 7 Feb 2007 06:28:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Feb 2007 22:28:57 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Feb 2007 22:28:47 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HEgI7-0002iZ-3I
	for java-user@lucene.apache.org; Tue, 06 Feb 2007 22:28:27 -0800
Message-ID: <8840535.post@talk.nabble.com>
Date: Tue, 6 Feb 2007 22:28:27 -0800 (PST)
From: mmoser <mmoser@balihoo.com>
To: java-user@lucene.apache.org
Subject: Using Nutch database with Lucene
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mmoser@balihoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Ok, here is my problem. We have created a .NET implementation of Lucene using
the .NET Library for Lucene. We were previously only bringing in content
from the database and indexing it. We now want to keep that in place and use
Nutch or some web crawler to go out and get content from the list of urls in
our database.

Keep in mind here, I do not want different indexes for the web crawler
content, I want this to be in the same document as the database content that
it matches the url with. This would mean that I would probably want to take
the data that the web crawler gets back and store it in the relational
database. Then when I index the contents of the database, I would bring out
the content of the web crawler as well. Has anyone done this, if so, please
tell me in as much description how you did it. My goal here is to not have
to move to Nutch as the search engine and indexer, the goal is to use the
web crawler, gather its contents, then index it normally with Lucene. 

I realize that Nutch is using Lucene's API, we want to keep in .NET, because
we have written additional things that we do not want to have to rewrite in
Java.

Thanks in advance,
Mike  
-- 
View this message in context: http://www.nabble.com/Using-Nutch-database-with-Lucene-tf3185238.html#a8840535
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 07 12:45:18 2007
Return-Path: <java-user-return-25960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35036 invoked from network); 7 Feb 2007 12:45:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Feb 2007 12:45:17 -0000
Received: (qmail 84219 invoked by uid 500); 7 Feb 2007 12:45:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84183 invoked by uid 500); 7 Feb 2007 12:45:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84172 invoked by uid 99); 7 Feb 2007 12:45:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 04:45:17 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 04:45:06 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HEmAI-0005iW-0H
	for java-user@lucene.apache.org; Wed, 07 Feb 2007 04:44:46 -0800
Message-ID: <8844729.post@talk.nabble.com>
Date: Wed, 7 Feb 2007 04:44:45 -0800 (PST)
From: poeta simbolista <poetasimbolista@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: deviations
In-Reply-To: <583A43AA-2114-4BE0-BF0B-9EE5A3DC7082@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: poetasimbolista@gmail.com
References: <8829971.post@talk.nabble.com> <583A43AA-2114-4BE0-BF0B-9EE5A3DC7082@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


Thank you very much.
Actually, I said size as an example, as i could have said any other field:
the thing has to work for any numerical field. That means, I cannot
special-case the problem.
Cheers



Grant Ingersoll-6 wrote:
> 
> Have a look at the FieldSelector stuff, assuming you are using trunk  
> or some recent nightly build.  It _may_ help w/ what you are doing.   
> Also, I would think you could calculate the median at indexing time  
> (or just after), but I'm not sure I fully understand what you are  
> trying to do, so take that w/ a grain of salt.
> 
> You may find https://issues.apache.org/jira/browse/LUCENE-762  
> useful.  It hasn't been committed, but will be before 2.1 (so you  
> will have to apply the patch too)  Also, don't worry about the  
> discussion of the internals, the patch as submitted by Chuck is good
> 
> You will have to calculate your deviations separately, but the field  
> size info should help.
> 
> -Grant
> 
> 
> On Feb 6, 2007, at 12:13 PM, poeta simbolista wrote:
> 
>>
>> Hi,
>> I would like to query results, regarding results.
>> For example, get those results whose field "size" is 2 standard  
>> deviations
>> from the median.
>>
>> It looks like sth I should do myself, processing results first,  
>> getting the
>> median, and then calculate that threshold and perform a new query.  
>> Is it
>> however, sth there that may help with that?
>>
>> Thank you
>> -- 
>> View this message in context: http://www.nabble.com/deviations- 
>> tf3181792.html#a8829971
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> --------------------------
> Grant Ingersoll
> Center for Natural Language Processing
> http://www.cnlp.org
> 
> Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
> LuceneFAQ
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/deviations-tf3181792.html#a8844729
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 07 12:50:27 2007
Return-Path: <java-user-return-25961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36310 invoked from network); 7 Feb 2007 12:50:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Feb 2007 12:50:26 -0000
Received: (qmail 90425 invoked by uid 500); 7 Feb 2007 12:50:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90385 invoked by uid 500); 7 Feb 2007 12:50:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90374 invoked by uid 99); 7 Feb 2007 12:50:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 04:50:26 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 04:50:16 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HEmFH-0006DK-Q7
	for java-user@lucene.apache.org; Wed, 07 Feb 2007 04:49:55 -0800
Message-ID: <8844779.post@talk.nabble.com>
Date: Wed, 7 Feb 2007 04:49:55 -0800 (PST)
From: poeta simbolista <poetasimbolista@gmail.com>
To: java-user@lucene.apache.org
Subject: How to return results with null values?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: poetasimbolista@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


HI
I would like to make a query and take out those with null values in a
specific field.
How to?
Thanks
-- 
View this message in context: http://www.nabble.com/How-to-return-results-with-null-values--tf3186799.html#a8844779
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 07 13:14:08 2007
Return-Path: <java-user-return-25962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42673 invoked from network); 7 Feb 2007 13:14:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Feb 2007 13:14:07 -0000
Received: (qmail 31086 invoked by uid 500); 7 Feb 2007 13:14:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31055 invoked by uid 500); 7 Feb 2007 13:14:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31044 invoked by uid 99); 7 Feb 2007 13:14:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 05:14:06 -0800
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [63.162.98.45] (HELO srq01.BIPT.COM) (63.162.98.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 05:13:57 -0800
In-Reply-To: <8844779.post@talk.nabble.com>
To: java-user@lucene.apache.org
Subject: Re: How to return results with null values?
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 7.0.1 January 17, 2006
Message-ID: <OFA6F54BBF.0ACC946D-ON8525727B.0048972D-8525727B.0048A81E@BIPT.COM>
From: Don.Reese@BIPT.COM
Date: Wed, 7 Feb 2007 08:13:36 -0500
X-MIMETrack: Serialize by Router on SRQ01/BIPT(Release 7.0.1FP1|April 17, 2006) at 02/07/2007
 08:13:57 AM,
	Serialize complete at 02/07/2007 08:13:57 AM
Content-Type: text/plain; charset="US-ASCII"
X-Virus-Checked: Checked by ClamAV on apache.org

My guess is that if the field has a null empty, don't put the field in the 
index.




poeta simbolista <poetasimbolista@gmail.com> 
02/07/2007 07:50 AM
Please respond to
java-user@lucene.apache.org


To
java-user@lucene.apache.org
cc

Subject
How to return results with null values?







HI
I would like to make a query and take out those with null values in a
specific field.
How to?
Thanks
-- 
View this message in context: 
http://www.nabble.com/How-to-return-results-with-null-values--tf3186799.html#a8844779
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 07 13:14:37 2007
Return-Path: <java-user-return-25963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42796 invoked from network); 7 Feb 2007 13:14:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Feb 2007 13:14:37 -0000
Received: (qmail 33086 invoked by uid 500); 7 Feb 2007 13:14:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32708 invoked by uid 500); 7 Feb 2007 13:14:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32697 invoked by uid 99); 7 Feb 2007 13:14:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 05:14:37 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.61] (HELO web50307.mail.yahoo.com) (206.190.38.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 07 Feb 2007 05:14:25 -0800
Received: (qmail 78169 invoked by uid 60001); 7 Feb 2007 13:14:03 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=y0VVvJJfbuLS2z9QgmEACJrNFLbsJdEygW60KaVVDrs5+83fnF6NRu8sC7yknIMkxxXw18O4Tx4xd1BgqNDl3mkVLCScxPTaF1YBphURN/OGOgyd9W/slWlBis3CIY8zIVs3Z3CVN5f7L7Cm+Ohh2syRRRmAqtfZBLgbXYE4Pc8=;
X-YMail-OSG: T6Hnl50VM1kLE1dHf7RJSuUEn5SCkBRxdVgo_PkMwlt_53D5JtbY5SjW13.nSQ0wfgvINVv6mDgqVAs9_yC6rhYWlqkcDM7zTzhaAdBnRkXU3TU02B19.jFFNv2qWQBx9wsSbY1BS4_9Vg--
Received: from [58.62.85.47] by web50307.mail.yahoo.com via HTTP; Wed, 07 Feb 2007 05:14:03 PST
X-Mailer: YahooMailRC/368.7 YahooMailWebService/0.6.132.7
Date: Wed, 7 Feb 2007 05:14:03 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: How to return results with null values?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <727412.68690.qm@web50307.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Can't do that, I'm afraid.  When indexing, use some unique value to represe=
nt the no value (e.g. __system__null__value__ - just made this up, pick wha=
tever, just make sure it doesn't conflict with a real value and that it's n=
ot altered by the tokenizer).=0A=0AOtis=0A=0A----- Original Message ----=0A=
From: poeta simbolista <poetasimbolista@gmail.com>=0ATo: java-user@lucene.a=
pache.org=0ASent: Wednesday, February 7, 2007 7:49:55 AM=0ASubject: How to =
return results with null values?=0A=0A=0AHI=0AI would like to make a query =
and take out those with null values in a=0Aspecific field.=0AHow to?=0AThan=
ks=0A-- =0AView this message in context: http://www.nabble.com/How-to-retur=
n-results-with-null-values--tf3186799.html#a8844779=0ASent from the Lucene =
- Java Users mailing list archive at Nabble.com.=0A=0A=0A------------------=
---------------------------------------------------=0ATo unsubscribe, e-mai=
l: java-user-unsubscribe@lucene.apache.org=0AFor additional commands, e-mai=
l: java-user-help@lucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 07 13:16:28 2007
Return-Path: <java-user-return-25964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43226 invoked from network); 7 Feb 2007 13:16:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Feb 2007 13:16:27 -0000
Received: (qmail 36937 invoked by uid 500); 7 Feb 2007 13:16:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36905 invoked by uid 500); 7 Feb 2007 13:16:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36893 invoked by uid 99); 7 Feb 2007 13:16:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 05:16:27 -0800
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [63.162.98.45] (HELO srq01.BIPT.COM) (63.162.98.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 05:16:17 -0800
In-Reply-To: <OFA6F54BBF.0ACC946D-ON8525727B.0048972D-8525727B.0048A81E@BIPT.COM>
To: java-user@lucene.apache.org
Subject: Re: How to return results with null values?
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 7.0.1 January 17, 2006
Message-ID: <OF6A1936DA.BCD14F24-ON8525727B.0048BF2B-8525727B.0048DEEA@BIPT.COM>
From: Don.Reese@BIPT.COM
Date: Wed, 7 Feb 2007 08:15:56 -0500
X-MIMETrack: Serialize by Router on SRQ01/BIPT(Release 7.0.1FP1|April 17, 2006) at 02/07/2007
 08:16:17 AM,
	Serialize complete at 02/07/2007 08:16:17 AM
Content-Type: text/plain; charset="US-ASCII"
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry, under the weather today.  Meant to say, don't put fields with null 
values into the index.  You do not have to have a field for the document 
if that field has no value.
--
Don Reese
BIPT
PO Box 20159
5971 Cattleridge Blvd Ste 101
Sarasota, FL 34276
don.reese@bipt.com
941-358-8004 x139




Don.Reese@BIPT.COM 
02/07/2007 08:14 AM
Please respond to
java-user@lucene.apache.org


To
java-user@lucene.apache.org
cc

Subject
Re: How to return results with null values?






My guess is that if the field has a null empty, don't put the field in the 

index.




poeta simbolista <poetasimbolista@gmail.com> 
02/07/2007 07:50 AM
Please respond to
java-user@lucene.apache.org


To
java-user@lucene.apache.org
cc

Subject
How to return results with null values?







HI
I would like to make a query and take out those with null values in a
specific field.
How to?
Thanks
-- 
View this message in context: 
http://www.nabble.com/How-to-return-results-with-null-values--tf3186799.html#a8844779
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 07 13:58:19 2007
Return-Path: <java-user-return-25965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55105 invoked from network); 7 Feb 2007 13:58:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Feb 2007 13:58:17 -0000
Received: (qmail 175 invoked by uid 500); 7 Feb 2007 13:58:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 136 invoked by uid 500); 7 Feb 2007 13:58:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 125 invoked by uid 99); 7 Feb 2007 13:58:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 05:58:16 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=FROM_EXCESS_BASE64,MIME_BASE64_TEXT
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [216.9.248.52] (HELO smtp05.bis.na.blackberry.com) (216.9.248.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 05:58:06 -0800
Message-ID: <2114076118-1170856661-cardhu_blackberry.rim.net-921825132-@bwe047-cell00.bisx.prod.on.blackberry>
Content-Transfer-Encoding: base64
Reply-To: rsivak@istandfor.com
References: <359a92830605230722k622a1ca2p42485c581dbcae7f@mail.gmail.com> <BED850C725E74F47A0F69CC0EE9AB64D0607FD68@CORPUSMX40B.corp.emc.com>
In-Reply-To: <BED850C725E74F47A0F69CC0EE9AB64D0607FD68@CORPUSMX40B.corp.emc.com>
Sensitivity: Normal
Importance: Normal
To: java-user@lucene.apache.org
Subject: Re: An arguable bug in Lucene 1.9.1
From: "=?UTF-8?B?UnVzcw==?=" <rsivak@istandfor.com>
Date: Wed, 7 Feb 2007 13:56:41 +0000
Content-type: text/plain
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

WW91J3JlIG5vdCBHYXJ5IExlZSB0aGF0IHdlbnQgdG8gcG9seSwgYXJlIHlvdT8NClNlbnQgd2ly
ZWxlc3NseSB2aWEgQmxhY2tCZXJyeSBmcm9tIFQtTW9iaWxlLiAgDQoNCi0tLS0tT3JpZ2luYWwg
TWVzc2FnZS0tLS0tDQpGcm9tOiBMZWVfR2FyeUBlbWMuY29tDQpEYXRlOiBNb24sIDUgRmViIDIw
MDcgMTk6Mzg6MDMgDQpUbzo8amF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnPg0KU3ViamVjdDog
UkU6IEFuIGFyZ3VhYmxlIGJ1ZyBpbiBMdWNlbmUgMS45LjENCg0KSSBhbSBzZWVpbmcgdGhpcyBp
c3N1ZSBhcyB3ZWxsIHdpdGggdGhlIGV4YWN0IHNhbWUgc3RhY2sgdHJhY2UgdXNpbmcNCnNwYW5R
dWVyaWVzLiBEb2VzIGFueW9uZSBrbm93IGlmIHRoaXMgaGFzIGJlZW4gZml4ZWQgZm9yIHZlcnNp
b25zIGFmdGVyDQoxLjkuMT8NCg0KVGhhbmtzDQpHYXJ5IA0KDQotLS0tLU9yaWdpbmFsIE1lc3Nh
Z2UtLS0tLQ0KRnJvbTogRXJpY2sgRXJpY2tzb24gW21haWx0bzplcmlja2VyaWNrc29uQGdtYWls
LmNvbV0gDQpTZW50OiBUdWVzZGF5LCBNYXkgMjMsIDIwMDYgMDc6MjMgQU0NClRvOiBqYXZhLXVz
ZXJAbHVjZW5lLmFwYWNoZS5vcmcNClN1YmplY3Q6IEFuIGFyZ3VhYmxlIGJ1ZyBpbiBMdWNlbmUg
MS45LjENCg0KSSdtIGNvbnN0cnVjdGluZyBhIEJvb2xlYW5RdWVyeSBhY3Jvc3Mgc2V2ZXJhbCBm
aWVsZHMgd2l0aA0KU3Bhbk5lYXJRdWVyeXMuDQpJbiB0aGUgZGVnZW5lcmF0ZSBjYXNlIG9mIHNw
YW5uaW5nICpvbmUqIHRlcm0sIEFORCBhZGRpbmcgYSBub24tc3Bhbg0KY2xhdXNlLCBJIGdldCBh
biBleGNlcHRpb24gdGhyb3duLiBPZiBjb3Vyc2UgeW91IGNhbiBhcmd1ZSB0aGF0IGEgc3Bhbg0K
cXVlcnkgb3ZlciBvbmUgdGVybSBpcyBzaWxseSBhbmQgc2hvdWxkbid0IGJlIGRvbmUsIGJ1dCBJ
IHRob3VnaHQgSSdkDQptZW50aW9uIHRoaXMuIEknbSBjb250ZW50IHdpdGggd2hhdGV2ZXIgeSdh
bGwgZGVjaWRlLg0KDQpIZXJlJ3MgdGhlIHJlc3VsdHMgb2YgYSBCb29sZWFuUXVlcnkudG9TdHJp
bmc6DQoNCisoc3Bhbk5lYXIoW3BlcnNvbjpqb2huXSwgMjAsIGZhbHNlKSBzcGFuTmVhcihbdGV4
dDpqb2huXSwgNSwgZmFsc2UpKQ0KK2dyb3VwaWQ6MTQwNzUNCg0KVGhpcyByZXN1bHRzIGluIHRo
ZSBmb2xsb3dpbmcgc3RhY2sgdHJhY2U6DQoNCmF2YS5sYW5nLkFycmF5SW5kZXhPdXRPZkJvdW5k
c0V4Y2VwdGlvbjogNA0KICAgIGF0IG9yZy5hcGFjaGUubHVjZW5lLnNlYXJjaC5Cb29sZWFuU2Nv
cmVyMiRDb29yZGluYXRvci5jb29yZEZhY3RvcigNCkJvb2xlYW5TY29yZXIyLmphdmE6NTQpDQog
ICAgYXQgb3JnLmFwYWNoZS5sdWNlbmUuc2VhcmNoLkJvb2xlYW5TY29yZXIyLnNjb3JlKEJvb2xl
YW5TY29yZXIyLmphdmENCjozMjgpDQogICAgYXQgb3JnLmFwYWNoZS5sdWNlbmUuc2VhcmNoLkNv
bmp1bmN0aW9uU2NvcmVyLnNjb3JlKA0KQ29uanVuY3Rpb25TY29yZXIuamF2YTo4MikNCiAgICBh
dA0Kb3JnLmFwYWNoZS5sdWNlbmUuc2VhcmNoLkJvb2xlYW5TY29yZXIyJDIuc2NvcmUoQm9vbGVh
blNjb3JlcjIuamF2YQ0KOjE4NikNCiAgICBhdCBvcmcuYXBhY2hlLmx1Y2VuZS5zZWFyY2guQm9v
bGVhblNjb3JlcjIuc2NvcmUoQm9vbGVhblNjb3JlcjIuamF2YQ0KOjMyNykNCiAgICBhdCBvcmcu
YXBhY2hlLmx1Y2VuZS5zZWFyY2guQm9vbGVhblNjb3JlcjIuc2NvcmUoQm9vbGVhblNjb3JlcjIu
amF2YQ0KOjI5MSkNCiAgICBhdA0Kb3JnLmFwYWNoZS5sdWNlbmUuc2VhcmNoLkluZGV4U2VhcmNo
ZXIuc2VhcmNoKEluZGV4U2VhcmNoZXIuamF2YToxMzIpDQogICAgYXQNCm9yZy5hcGFjaGUubHVj
ZW5lLnNlYXJjaC5JbmRleFNlYXJjaGVyLnNlYXJjaChJbmRleFNlYXJjaGVyLmphdmE6MTEwKQ0K
ICAgIGF0IG9yZy5hcGFjaGUubHVjZW5lLnNlYXJjaC5TZWFyY2hlci5zZWFyY2goU2VhcmNoZXIu
amF2YTo3NikNCiAgICoqKipteSBjb2RlIGhlcmUNCg0KSWYgSSB0YWtlIG9mZiB0aGUgZW5kIGNs
YXVzZSwgb3IgaGF2ZSBtb3JlIHRoYW4gb25lIHN0cmluZyBpbiB0aGUgc3BhbiwNCml0IHdvcmtz
LiBlLmcuDQoNCisoc3Bhbk5lYXIoW3BlcnNvbjpqb2huXSwgMjAsIGZhbHNlKSBzcGFuTmVhcihb
dGV4dDpqb2huXSwgNSwgZmFsc2UpKQ0KDQp3b3JrcywgYXMgZG9lczoNCg0KKyhzcGFuTmVhcihb
cGVyc29uOmpvaG4sIHBlcnNvbjpqb2huc29uXSwgMjAsIGZhbHNlKSANCitzcGFuTmVhcihbdGV4
dDpqb2huLA0KdGV4dDpqb2huc29uXSwgNSwgZmFsc2UpKSArZ3JvdXBpZDoxNDA3NQ0KDQpPZiBj
b3Vyc2UgSSBjYW4gKGFuZCB3aWxsKSBpbnRlcmNlcHQgdGhlIGNyZWF0aW9uIG9mIHRoZSBzcGFu
IHF1ZXJpZXMNCndoZW4gdGhlcmUgaXMgb25seSBvbmUgdGVybSBhbmQgdXNlIFRlcm1RdWVyeSBp
bnN0ZWFkLiBJIHN1c3BlY3QgdGhhdA0KdGhpcyBpcyBiZXR0ZXIgcHJhY3RpY2UgYW55d2F5Lg0K
DQpJJ2xsIGJlIGhhcHB5IHRvIGVudGVyIHRoaXMgaW4gYnVncyBkYXRhYmFzZSBpZiB5b3UgdGhp
bmsgSSBzaG91bGQuDQoNCkJlc3QNCkVyaWNrDQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KVG8gdW5zdWJzY3Jp
YmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQpGb3Ig
YWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hl
Lm9yZw0K



From java-user-return-25966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 07 14:23:04 2007
Return-Path: <java-user-return-25966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70239 invoked from network); 7 Feb 2007 14:23:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Feb 2007 14:23:04 -0000
Received: (qmail 54113 invoked by uid 500); 7 Feb 2007 14:23:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54088 invoked by uid 500); 7 Feb 2007 14:23:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54071 invoked by uid 99); 7 Feb 2007 14:23:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 06:23:03 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=FROM_EXCESS_BASE64,MIME_BASE64_TEXT
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [216.9.248.52] (HELO smtp05.bis.na.blackberry.com) (216.9.248.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 06:22:54 -0800
Message-ID: <768090273-1170858150-cardhu_blackberry.rim.net-1190381723-@bwe059-cell00.bisx.prod.on.blackberry>
Content-Transfer-Encoding: base64
Reply-To: rsivak@istandfor.com
References: <359a92830605230722k622a1ca2p42485c581dbcae7f@mail.gmail.com> <BED850C725E74F47A0F69CC0EE9AB64D0607FD68@CORPUSMX40B.corp.emc.com> <2114076118-1170856661-cardhu_blackberry.rim.net-921825132-@bwe047-cell00.bisx.prod.on.blackberry>
In-Reply-To: <2114076118-1170856661-cardhu_blackberry.rim.net-921825132-@bwe047-cell00.bisx.prod.on.blackberry>
Sensitivity: Normal
Importance: Normal
To: java-user@lucene.apache.org, rsivak@istandfor.com
Subject: Re: An arguable bug in Lucene 1.9.1
From: "=?UTF-8?B?UnVzcw==?=" <rsivak@istandfor.com>
Date: Wed, 7 Feb 2007 14:16:55 +0000
Content-type: text/plain
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

U29ycnksIGRpZG4ndCBtZWFuIGZvciB0aGlzIHRvIGdvIHRvIHRoZSBsaXN0Li4uICANCg0KUnVz
cw0KU2VudCB3aXJlbGVzc2x5IHZpYSBCbGFja0JlcnJ5IGZyb20gVC1Nb2JpbGUuICANCg0KLS0t
LS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCkZyb206ICJSdXNzIiA8cnNpdmFrQGlzdGFuZGZvci5j
b20+DQpEYXRlOiBXZWQsIDcgRmViIDIwMDcgMTM6NTY6NDEgDQpUbzpqYXZhLXVzZXJAbHVjZW5l
LmFwYWNoZS5vcmcNClN1YmplY3Q6IFJlOiBBbiBhcmd1YWJsZSBidWcgaW4gTHVjZW5lIDEuOS4x
DQoNCllvdSdyZSBub3QgR2FyeSBMZWUgdGhhdCB3ZW50IHRvIHBvbHksIGFyZSB5b3U/DQpTZW50
IHdpcmVsZXNzbHkgdmlhIEJsYWNrQmVycnkgZnJvbSBULU1vYmlsZS4gIA0KDQotLS0tLU9yaWdp
bmFsIE1lc3NhZ2UtLS0tLQ0KRnJvbTogTGVlX0dhcnlAZW1jLmNvbQ0KRGF0ZTogTW9uLCA1IEZl
YiAyMDA3IDE5OjM4OjAzIA0KVG86PGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZz4NClN1Ympl
Y3Q6IFJFOiBBbiBhcmd1YWJsZSBidWcgaW4gTHVjZW5lIDEuOS4xDQoNCkkgYW0gc2VlaW5nIHRo
aXMgaXNzdWUgYXMgd2VsbCB3aXRoIHRoZSBleGFjdCBzYW1lIHN0YWNrIHRyYWNlIHVzaW5nDQpz
cGFuUXVlcmllcy4gRG9lcyBhbnlvbmUga25vdyBpZiB0aGlzIGhhcyBiZWVuIGZpeGVkIGZvciB2
ZXJzaW9ucyBhZnRlcg0KMS45LjE/DQoNClRoYW5rcw0KR2FyeSANCg0KLS0tLS1PcmlnaW5hbCBN
ZXNzYWdlLS0tLS0NCkZyb206IEVyaWNrIEVyaWNrc29uIFttYWlsdG86ZXJpY2tlcmlja3NvbkBn
bWFpbC5jb21dIA0KU2VudDogVHVlc2RheSwgTWF5IDIzLCAyMDA2IDA3OjIzIEFNDQpUbzogamF2
YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQpTdWJqZWN0OiBBbiBhcmd1YWJsZSBidWcgaW4gTHVj
ZW5lIDEuOS4xDQoNCkknbSBjb25zdHJ1Y3RpbmcgYSBCb29sZWFuUXVlcnkgYWNyb3NzIHNldmVy
YWwgZmllbGRzIHdpdGgNClNwYW5OZWFyUXVlcnlzLg0KSW4gdGhlIGRlZ2VuZXJhdGUgY2FzZSBv
ZiBzcGFubmluZyAqb25lKiB0ZXJtLCBBTkQgYWRkaW5nIGEgbm9uLXNwYW4NCmNsYXVzZSwgSSBn
ZXQgYW4gZXhjZXB0aW9uIHRocm93bi4gT2YgY291cnNlIHlvdSBjYW4gYXJndWUgdGhhdCBhIHNw
YW4NCnF1ZXJ5IG92ZXIgb25lIHRlcm0gaXMgc2lsbHkgYW5kIHNob3VsZG4ndCBiZSBkb25lLCBi
dXQgSSB0aG91Z2h0IEknZA0KbWVudGlvbiB0aGlzLiBJJ20gY29udGVudCB3aXRoIHdoYXRldmVy
IHknYWxsIGRlY2lkZS4NCg0KSGVyZSdzIHRoZSByZXN1bHRzIG9mIGEgQm9vbGVhblF1ZXJ5LnRv
U3RyaW5nOg0KDQorKHNwYW5OZWFyKFtwZXJzb246am9obl0sIDIwLCBmYWxzZSkgc3Bhbk5lYXIo
W3RleHQ6am9obl0sIDUsIGZhbHNlKSkNCitncm91cGlkOjE0MDc1DQoNClRoaXMgcmVzdWx0cyBp
biB0aGUgZm9sbG93aW5nIHN0YWNrIHRyYWNlOg0KDQphdmEubGFuZy5BcnJheUluZGV4T3V0T2ZC
b3VuZHNFeGNlcHRpb246IDQNCiAgICBhdCBvcmcuYXBhY2hlLmx1Y2VuZS5zZWFyY2guQm9vbGVh
blNjb3JlcjIkQ29vcmRpbmF0b3IuY29vcmRGYWN0b3IoDQpCb29sZWFuU2NvcmVyMi5qYXZhOjU0
KQ0KICAgIGF0IG9yZy5hcGFjaGUubHVjZW5lLnNlYXJjaC5Cb29sZWFuU2NvcmVyMi5zY29yZShC
b29sZWFuU2NvcmVyMi5qYXZhDQo6MzI4KQ0KICAgIGF0IG9yZy5hcGFjaGUubHVjZW5lLnNlYXJj
aC5Db25qdW5jdGlvblNjb3Jlci5zY29yZSgNCkNvbmp1bmN0aW9uU2NvcmVyLmphdmE6ODIpDQog
ICAgYXQNCm9yZy5hcGFjaGUubHVjZW5lLnNlYXJjaC5Cb29sZWFuU2NvcmVyMiQyLnNjb3JlKEJv
b2xlYW5TY29yZXIyLmphdmENCjoxODYpDQogICAgYXQgb3JnLmFwYWNoZS5sdWNlbmUuc2VhcmNo
LkJvb2xlYW5TY29yZXIyLnNjb3JlKEJvb2xlYW5TY29yZXIyLmphdmENCjozMjcpDQogICAgYXQg
b3JnLmFwYWNoZS5sdWNlbmUuc2VhcmNoLkJvb2xlYW5TY29yZXIyLnNjb3JlKEJvb2xlYW5TY29y
ZXIyLmphdmENCjoyOTEpDQogICAgYXQNCm9yZy5hcGFjaGUubHVjZW5lLnNlYXJjaC5JbmRleFNl
YXJjaGVyLnNlYXJjaChJbmRleFNlYXJjaGVyLmphdmE6MTMyKQ0KICAgIGF0DQpvcmcuYXBhY2hl
Lmx1Y2VuZS5zZWFyY2guSW5kZXhTZWFyY2hlci5zZWFyY2goSW5kZXhTZWFyY2hlci5qYXZhOjEx
MCkNCiAgICBhdCBvcmcuYXBhY2hlLmx1Y2VuZS5zZWFyY2guU2VhcmNoZXIuc2VhcmNoKFNlYXJj
aGVyLmphdmE6NzYpDQogICAqKioqbXkgY29kZSBoZXJlDQoNCklmIEkgdGFrZSBvZmYgdGhlIGVu
ZCBjbGF1c2UsIG9yIGhhdmUgbW9yZSB0aGFuIG9uZSBzdHJpbmcgaW4gdGhlIHNwYW4sDQppdCB3
b3Jrcy4gZS5nLg0KDQorKHNwYW5OZWFyKFtwZXJzb246am9obl0sIDIwLCBmYWxzZSkgc3Bhbk5l
YXIoW3RleHQ6am9obl0sIDUsIGZhbHNlKSkNCg0Kd29ya3MsIGFzIGRvZXM6DQoNCisoc3Bhbk5l
YXIoW3BlcnNvbjpqb2huLCBwZXJzb246am9obnNvbl0sIDIwLCBmYWxzZSkgDQorc3Bhbk5lYXIo
W3RleHQ6am9obiwNCnRleHQ6am9obnNvbl0sIDUsIGZhbHNlKSkgK2dyb3VwaWQ6MTQwNzUNCg0K
T2YgY291cnNlIEkgY2FuIChhbmQgd2lsbCkgaW50ZXJjZXB0IHRoZSBjcmVhdGlvbiBvZiB0aGUg
c3BhbiBxdWVyaWVzDQp3aGVuIHRoZXJlIGlzIG9ubHkgb25lIHRlcm0gYW5kIHVzZSBUZXJtUXVl
cnkgaW5zdGVhZC4gSSBzdXNwZWN0IHRoYXQNCnRoaXMgaXMgYmV0dGVyIHByYWN0aWNlIGFueXdh
eS4NCg0KSSdsbCBiZSBoYXBweSB0byBlbnRlciB0aGlzIGluIGJ1Z3MgZGF0YWJhc2UgaWYgeW91
IHRoaW5rIEkgc2hvdWxkLg0KDQpCZXN0DQpFcmljaw0KDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vi
c2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0K
Rm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFw
YWNoZS5vcmcNCg==



From java-user-return-25967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 07 14:27:04 2007
Return-Path: <java-user-return-25967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72009 invoked from network); 7 Feb 2007 14:27:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Feb 2007 14:27:03 -0000
Received: (qmail 61481 invoked by uid 500); 7 Feb 2007 14:27:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61458 invoked by uid 500); 7 Feb 2007 14:27:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61447 invoked by uid 99); 7 Feb 2007 14:27:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 06:27:02 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of csahat@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 06:26:53 -0800
Received: by ug-out-1314.google.com with SMTP id k40so215142ugc
        for <java-user@lucene.apache.org>; Wed, 07 Feb 2007 06:26:31 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=SlXveD8jb3ITBM79TCAKhK4y1XMQ8irwa3EhypUYHqwkbQ3q7VOQbK1KZDwTUHxLmZ9nDRDhxbwI7Gtri61aIejd+S6JQhIgUmnpiru6gmzVjx7rCUGw/zik8CQXKC0+otO+FrLidwZstNJYce6XEWJZGzXiXK+R8aohSpMA1zg=
Received: by 10.82.152.16 with SMTP id z16mr2953232bud.1170858381480;
        Wed, 07 Feb 2007 06:26:21 -0800 (PST)
Received: by 10.82.174.13 with HTTP; Wed, 7 Feb 2007 06:26:21 -0800 (PST)
Message-ID: <2e64e87b0702070626o2f597044ud8f1f10b869eac27@mail.gmail.com>
Date: Wed, 7 Feb 2007 15:26:21 +0100
From: csahat <csahat@gmail.com>
To: java-user@lucene.apache.org
Subject: Counting term frequency without using Explanation
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6099_33062372.1170858381434"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6099_33062372.1170858381434
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

  I'm so sorry if this question already answered before in this list, but I
already search
the list, and I couldn't find the answer.

   This is what I want to do :

  When the user type in the query, for example "WebSphere Java",
Lucene will show not only the score, but showing the term count per document
as well, like this

  doc1    0.8333          websphere=3, Java = 2
  doc2    0.817            websphere=2, Java=2


  I already tried to implement with TermFreqVector, but TermFreqVector show
all the
terms in the field, instead what I want is only the terms that happen in the
query.
I already tried using TermDocs as well, but it always gave result 0.

  I tried using Explanation class, using toString method, but I have to
"clean"
the information.


  Is there any "direct" way to do this in Lucene ?  Or perhaps someone can
give me a hint ?

  Thanks in advance

------=_Part_6099_33062372.1170858381434--

From java-user-return-25968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 07 14:49:14 2007
Return-Path: <java-user-return-25968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82305 invoked from network); 7 Feb 2007 14:49:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Feb 2007 14:49:13 -0000
Received: (qmail 3673 invoked by uid 500); 7 Feb 2007 14:49:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3628 invoked by uid 500); 7 Feb 2007 14:49:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3617 invoked by uid 99); 7 Feb 2007 14:49:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 06:49:12 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 06:49:03 -0800
Received: by nf-out-0910.google.com with SMTP id i2so478783nfe
        for <java-user@lucene.apache.org>; Wed, 07 Feb 2007 06:48:42 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Vd4qdFzA2peNHk/DBCnjQ7IMTW3dzVb+++hoQubqcy3GX3gsQwNgDNWWN3mMPV63upOerIcvL92szICmWmpPtQCC1lcWNYHUzw72mCptMPKox3/PTdU2TtUJdUW9/T2PULNW4KZnwnuahYPIPfVEEwsu8sb9p4uhHDY2mmmBg+M=
Received: by 10.49.12.4 with SMTP id p4mr152845nfi.1170859722579;
        Wed, 07 Feb 2007 06:48:42 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Wed, 7 Feb 2007 06:48:42 -0800 (PST)
Message-ID: <359a92830702070648x62d9e221w22061d22d4171297@mail.gmail.com>
Date: Wed, 7 Feb 2007 09:48:42 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Counting term frequency without using Explanation
In-Reply-To: <2e64e87b0702070626o2f597044ud8f1f10b869eac27@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5993_13023105.1170859722259"
References: <2e64e87b0702070626o2f597044ud8f1f10b869eac27@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5993_13023105.1170859722259
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Before you go too far down this path, please consider what a "hit" is. It's
more complicated than you think <G>.

If all you want to do is count up the number of times any term appears in
the document, it's not too hard. You should be able to use a
termenum/termdocs process to count them.

TermDocs should work, just seek to a term, skip to the document number
(which you'll have to get somewhere else), and keep adding to your count
while the docid is the same as your target. Repeat for each term.

But it's a much more complicated story if you want to accurately reflect a
query. For instance, consider a near query, that is terms within, say, 3 of
each other. If you do something like the above, you'll present "hits" that
aren't real. For instance...

a b c d e f g h i j a

if you search for a and c within 3 of each other, is this one hit? two? it
definitely isn't three which is what you'd get if you just counted the
occurrence of the terms a, b... What about a NOT clause? How does a phrase
query get counted?

There have been several discussions of various aspects of this issue, but
often in the context of highlighting. You'll probably get some good
information from the following threads...

Counting terms' hits from phrases
Counting hits in a document

as well as searching the archive on highlighting and/or hitcount

Best
Erick




On 2/7/07, csahat <csahat@gmail.com> wrote:
>
> Hi all,
>
>   I'm so sorry if this question already answered before in this list, but
> I
> already search
> the list, and I couldn't find the answer.
>
>    This is what I want to do :
>
>   When the user type in the query, for example "WebSphere Java",
> Lucene will show not only the score, but showing the term count per
> document
> as well, like this
>
>   doc1    0.8333          websphere=3, Java = 2
>   doc2    0.817            websphere=2, Java=2
>
>
>   I already tried to implement with TermFreqVector, but TermFreqVector
> show
> all the
> terms in the field, instead what I want is only the terms that happen in
> the
> query.
> I already tried using TermDocs as well, but it always gave result 0.
>
>   I tried using Explanation class, using toString method, but I have to
> "clean"
> the information.
>
>
>   Is there any "direct" way to do this in Lucene ?  Or perhaps someone can
> give me a hint ?
>
>   Thanks in advance
>

------=_Part_5993_13023105.1170859722259--

From java-user-return-25969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 07 15:28:14 2007
Return-Path: <java-user-return-25969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93722 invoked from network); 7 Feb 2007 15:28:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Feb 2007 15:28:12 -0000
Received: (qmail 82449 invoked by uid 500); 7 Feb 2007 15:28:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82279 invoked by uid 500); 7 Feb 2007 15:28:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82246 invoked by uid 99); 7 Feb 2007 15:28:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 07:28:04 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of csahat@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 07:27:54 -0800
Received: by nf-out-0910.google.com with SMTP id i2so488900nfe
        for <java-user@lucene.apache.org>; Wed, 07 Feb 2007 07:27:33 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=aEcKi96UwlkOhV1Knk2n40z9Tn8OiQ8X3uCPvhMYpcq1JduQs5lSiY6ZTRWImNStyXpZE8uKiG+cZlI5Op5rf5IdX9gvRFi35KElixXoxE4PgcYkDrPfYC7J7rvHc/0741f5DERgfqHVzQMTLyVdYPCntlYDUVJoxdAXelVRc3I=
Received: by 10.82.138.6 with SMTP id l6mr753363bud.1170862045060;
        Wed, 07 Feb 2007 07:27:25 -0800 (PST)
Received: by 10.82.174.13 with HTTP; Wed, 7 Feb 2007 07:27:24 -0800 (PST)
Message-ID: <2e64e87b0702070727t1d00268h31ea6bc3534a7d3d@mail.gmail.com>
Date: Wed, 7 Feb 2007 16:27:24 +0100
From: csahat <csahat@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Counting term frequency without using Explanation
In-Reply-To: <359a92830702070648x62d9e221w22061d22d4171297@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7276_19229948.1170862044566"
References: <2e64e87b0702070626o2f597044ud8f1f10b869eac27@mail.gmail.com>
	 <359a92830702070648x62d9e221w22061d22d4171297@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7276_19229948.1170862044566
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

  Hi Erick,

    Thanks for your help. I found it now . Maybe I will donate an article /
FAQ
regarding this... since many newbies like me asking for things like this.


On 2/7/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> Before you go too far down this path, please consider what a "hit" is.
> It's
> more complicated than you think <G>.
>
> If all you want to do is count up the number of times any term appears in
> the document, it's not too hard. You should be able to use a
> termenum/termdocs process to count them.
>
> TermDocs should work, just seek to a term, skip to the document number
> (which you'll have to get somewhere else), and keep adding to your count
> while the docid is the same as your target. Repeat for each term.
>
> But it's a much more complicated story if you want to accurately reflect a
> query. For instance, consider a near query, that is terms within, say, 3
> of
> each other. If you do something like the above, you'll present "hits" that
> aren't real. For instance...
>
> a b c d e f g h i j a
>
> if you search for a and c within 3 of each other, is this one hit? two? it
> definitely isn't three which is what you'd get if you just counted the
> occurrence of the terms a, b... What about a NOT clause? How does a phrase
> query get counted?
>
> There have been several discussions of various aspects of this issue, but
> often in the context of highlighting. You'll probably get some good
> information from the following threads...
>
> Counting terms' hits from phrases
> Counting hits in a document
>
> as well as searching the archive on highlighting and/or hitcount
>
> Best
> Erick
>
>
>
>
> On 2/7/07, csahat <csahat@gmail.com> wrote:
> >
> > Hi all,
> >
> >   I'm so sorry if this question already answered before in this list,
> but
> > I
> > already search
> > the list, and I couldn't find the answer.
> >
> >    This is what I want to do :
> >
> >   When the user type in the query, for example "WebSphere Java",
> > Lucene will show not only the score, but showing the term count per
> > document
> > as well, like this
> >
> >   doc1    0.8333          websphere=3, Java = 2
> >   doc2    0.817            websphere=2, Java=2
> >
> >
> >   I already tried to implement with TermFreqVector, but TermFreqVector
> > show
> > all the
> > terms in the field, instead what I want is only the terms that happen in
> > the
> > query.
> > I already tried using TermDocs as well, but it always gave result 0.
> >
> >   I tried using Explanation class, using toString method, but I have to
> > "clean"
> > the information.
> >
> >
> >   Is there any "direct" way to do this in Lucene ?  Or perhaps someone
> can
> > give me a hint ?
> >
> >   Thanks in advance
> >
>

------=_Part_7276_19229948.1170862044566--

From java-user-return-25970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 07 15:28:21 2007
Return-Path: <java-user-return-25970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93788 invoked from network); 7 Feb 2007 15:28:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Feb 2007 15:28:20 -0000
Received: (qmail 83331 invoked by uid 500); 7 Feb 2007 15:28:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83282 invoked by uid 500); 7 Feb 2007 15:28:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83234 invoked by uid 99); 7 Feb 2007 15:28:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 07:28:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 07:27:59 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HEohu-0008Tw-L4
	for java-user@lucene.apache.org; Wed, 07 Feb 2007 07:27:38 -0800
Message-ID: <8847539.post@talk.nabble.com>
Date: Wed, 7 Feb 2007 07:27:38 -0800 (PST)
From: poeta simbolista <poetasimbolista@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to return results with null values?
In-Reply-To: <OF6A1936DA.BCD14F24-ON8525727B.0048BF2B-8525727B.0048DEEA@BIPT.COM>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: poetasimbolista@gmail.com
References: <8844779.post@talk.nabble.com> <OFA6F54BBF.0ACC946D-ON8525727B.0048972D-8525727B.0048A81E@BIPT.COM> <OF6A1936DA.BCD14F24-ON8525727B.0048BF2B-8525727B.0048DEEA@BIPT.COM>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks for the suggestions.
Well, the thing is, some entries have a value on that facet, and some others
not. It may happen that all have, all have not, and any combination within
those.

Regarding the thing of adding a field with a specific non-conflicting
keyword, wouldn't it affect the performance of the queries? Especially if
there are a lot of null values, which in my case are more than 50%.

I have a facet BitSet, would it be feasible to:
- get those IDs of the entries which have the facet. ()
- go and perform a single query foreach entry with the ID, to get the actual
value of the facet.

Or would it be better to go through the whole index and get the values?

Thank you


Don.Reese wrote:
> 
> Sorry, under the weather today.  Meant to say, don't put fields with null 
> values into the index.  You do not have to have a field for the document 
> if that field has no value.
> --
> Don Reese
> BIPT
> PO Box 20159
> 5971 Cattleridge Blvd Ste 101
> Sarasota, FL 34276
> don.reese@bipt.com
> 941-358-8004 x139
> 
> 
> 
> 
> Don.Reese@BIPT.COM 
> 02/07/2007 08:14 AM
> Please respond to
> java-user@lucene.apache.org
> 
> 
> To
> java-user@lucene.apache.org
> cc
> 
> Subject
> Re: How to return results with null values?
> 
> 
> 
> 
> 
> 
> My guess is that if the field has a null empty, don't put the field in the 
> 
> index.
> 
> 
> 
> 
> poeta simbolista <poetasimbolista@gmail.com> 
> 02/07/2007 07:50 AM
> Please respond to
> java-user@lucene.apache.org
> 
> 
> To
> java-user@lucene.apache.org
> cc
> 
> Subject
> How to return results with null values?
> 
> 
> 
> 
> 
> 
> 
> HI
> I would like to make a query and take out those with null values in a
> specific field.
> How to?
> Thanks
> -- 
> View this message in context: 
> http://www.nabble.com/How-to-return-results-with-null-values--tf3186799.html#a8844779
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/How-to-return-results-with-null-values--tf3186799.html#a8847539
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 07 15:35:05 2007
Return-Path: <java-user-return-25971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95831 invoked from network); 7 Feb 2007 15:35:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Feb 2007 15:35:05 -0000
Received: (qmail 4147 invoked by uid 500); 7 Feb 2007 15:35:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4121 invoked by uid 500); 7 Feb 2007 15:35:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4103 invoked by uid 99); 7 Feb 2007 15:35:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 07:35:03 -0800
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [63.162.98.45] (HELO srq01.BIPT.COM) (63.162.98.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 07:34:54 -0800
In-Reply-To: <8847539.post@talk.nabble.com>
To: java-user@lucene.apache.org
Subject: Re: How to return results with null values?
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 7.0.1 January 17, 2006
Message-ID: <OF843C2886.24B18CD8-ON8525727B.00553C20-8525727B.00558F52@BIPT.COM>
From: Don.Reese@BIPT.COM
Date: Wed, 7 Feb 2007 10:34:32 -0500
X-MIMETrack: Serialize by Router on SRQ01/BIPT(Release 7.0.1FP1|April 17, 2006) at 02/07/2007
 10:34:54 AM,
	Serialize complete at 02/07/2007 10:34:54 AM
Content-Type: text/plain; charset="US-ASCII"
X-Virus-Checked: Checked by ClamAV on apache.org

A newbie here, but I would think that fields will null value will slow 
down the search as much as fields with a specific non-conflicting keyword. 
 There is still a field to be looked at, even if it does not match.
Beyond that I will have to leave it to others with more background with 
the tool.  I will make one suggestion though, indexing fields with 
null/empty values only makes sense if you are looking for that specfic 
field value.
--
Don Reese
BIPT
PO Box 20159
5971 Cattleridge Blvd Ste 101
Sarasota, FL 34276
don.reese@bipt.com
941-358-8004 x139




poeta simbolista <poetasimbolista@gmail.com> 
02/07/2007 10:28 AM
Please respond to
java-user@lucene.apache.org


To
java-user@lucene.apache.org
cc

Subject
Re: How to return results with null values?







Thanks for the suggestions.
Well, the thing is, some entries have a value on that facet, and some 
others
not. It may happen that all have, all have not, and any combination within
those.

Regarding the thing of adding a field with a specific non-conflicting
keyword, wouldn't it affect the performance of the queries? Especially if
there are a lot of null values, which in my case are more than 50%.

I have a facet BitSet, would it be feasible to:
- get those IDs of the entries which have the facet. ()
- go and perform a single query foreach entry with the ID, to get the 
actual
value of the facet.

Or would it be better to go through the whole index and get the values?

Thank you


Don.Reese wrote:
> 
> Sorry, under the weather today.  Meant to say, don't put fields with 
null 
> values into the index.  You do not have to have a field for the document 

> if that field has no value.
> --
> Don Reese
> BIPT
> PO Box 20159
> 5971 Cattleridge Blvd Ste 101
> Sarasota, FL 34276
> don.reese@bipt.com
> 941-358-8004 x139
> 
> 
> 
> 
> Don.Reese@BIPT.COM 
> 02/07/2007 08:14 AM
> Please respond to
> java-user@lucene.apache.org
> 
> 
> To
> java-user@lucene.apache.org
> cc
> 
> Subject
> Re: How to return results with null values?
> 
> 
> 
> 
> 
> 
> My guess is that if the field has a null empty, don't put the field in 
the 
> 
> index.
> 
> 
> 
> 
> poeta simbolista <poetasimbolista@gmail.com> 
> 02/07/2007 07:50 AM
> Please respond to
> java-user@lucene.apache.org
> 
> 
> To
> java-user@lucene.apache.org
> cc
> 
> Subject
> How to return results with null values?
> 
> 
> 
> 
> 
> 
> 
> HI
> I would like to make a query and take out those with null values in a
> specific field.
> How to?
> Thanks
> -- 
> View this message in context: 
> 
http://www.nabble.com/How-to-return-results-with-null-values--tf3186799.html#a8844779
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: 
http://www.nabble.com/How-to-return-results-with-null-values--tf3186799.html#a8847539
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 07 16:43:01 2007
Return-Path: <java-user-return-25972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22345 invoked from network); 7 Feb 2007 16:43:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Feb 2007 16:43:01 -0000
Received: (qmail 77489 invoked by uid 500); 7 Feb 2007 16:43:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77456 invoked by uid 500); 7 Feb 2007 16:43:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77442 invoked by uid 99); 7 Feb 2007 16:43:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 08:43:00 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=FORGED_MUA_OUTLOOK,MSGID_FROM_MTA_HEADER
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.170.99.246] (HELO mail.rhoderunner.com) (216.170.99.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 08:42:49 -0800
Message-ID: <10039155.231170866547848.JavaMail.root@dell.rhoderunner.com>
MIME-Version: 1.0
X-UserIsAuth: true
Received: from mism.r-effects.com ([209.166.180.139])
          by mail.rhoderunner.com (JAMES SMTP Server 2.3.0rc2) with SMTP ID 326
          for <java-user@lucene.apache.org>;
          Wed, 7 Feb 2007 11:42:27 -0500 (EST)
From: "spamsucks" <spamsucks@rhoderunner.com>
To: <java-user@lucene.apache.org>
Subject: Increase performance using Pool of IndexSearchers?
Date: Wed, 7 Feb 2007 11:42:21 -0500
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Virus-Checked: Checked by ClamAV on apache.org

I currently am sharing my IndexSearcher across multiple requests as a static 
object.

While I understand that the IndexSearcher is threadsafe, this does not 
necessarily mean that it's multi-threaded capable.  I was wondering if there 
is any thread blocking going on between requests?

Would it improve performance to create a pool of IndexSearchers?

Thanks!





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 07 19:21:20 2007
Return-Path: <java-user-return-25973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91749 invoked from network); 7 Feb 2007 19:21:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Feb 2007 19:21:19 -0000
Received: (qmail 85325 invoked by uid 500); 7 Feb 2007 19:21:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85298 invoked by uid 500); 7 Feb 2007 19:21:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85287 invoked by uid 99); 7 Feb 2007 19:21:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 11:21:18 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [132.208.250.6] (HELO anis.telecom.uqam.ca) (132.208.250.6)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 11:21:07 -0800
Received: from anis.telecom.uqam.ca (anis.telecom.uqam.ca [132.208.250.6])
	by sortant.uqam.ca (8.13.8/8.12.1) with SMTP id l17JF1jT026756
	for <java-user@lucene.apache.org>; Wed, 7 Feb 2007 14:15:06 -0500 (EST)
Received: from antivirus.uqam.ca ([127.0.0.1])
 by anis.telecom.uqam.ca (SAVSMTP 3.1.1.32) with SMTP id M2007020714150523348
 for <java-user@lucene.apache.org>; Wed, 07 Feb 2007 14:15:05 -0500
Received: from courriel2.sitel.uqam.ca (courriel2.sitel.uqam.ca [132.208.250.43])
	by intrant.uqam.ca (8.13.8/8.12.2/uqam-filtres) with ESMTP id l17JAMUp023772
	for <java-user@lucene.apache.org>; Wed, 7 Feb 2007 14:10:32 -0500 (EST)
X-UQAM-Spam-Filter: Filtre-Uqam re:  abuse@uqam.ca
Received: from courrier.uqam.ca ([127.0.0.1]) by courriel2.sitel.uqam.ca
 (Sun Java System Messaging Server 6.1 HotFix 0.11 (built Jan 28 2005))
 with ESMTP id <0JD3001BQX99L850@courriel2.sitel.uqam.ca> for
 java-user@lucene.apache.org; Wed, 07 Feb 2007 14:10:21 -0500 (EST)
Received: from [206.47.141.21] by courriel2.sitel.uqam.ca (mshttpd); Wed,
 07 Feb 2007 14:10:21 -0500
Date: Wed, 07 Feb 2007 14:10:21 -0500
From: Xavier To <to.xavier@courrier.uqam.ca>
Subject: Question concerning Analyzers
To: java-user@lucene.apache.org
Message-id: <d2ea34d771f3.45c9ddcd@courrier.uqam.ca>
MIME-version: 1.0
X-Mailer: Sun Java(tm) System Messenger Express 6.1 HotFix 0.11 (built Jan 28
 2005)
Content-type: text/plain; charset=iso-8859-1
Content-language: fr
Content-transfer-encoding: quoted-printable
Content-disposition: inline
X-Accept-Language: fr
Priority: normal
X-Virus-Checked: Checked by ClamAV on apache.org

Hi=2C me again

I=27m still stuck with my search engine=2C but something popped in my he=
ad =3A Can an analyzer index something but ignore it during a search =3F=
 I=27m asking this because now that I=27ve been searching for an answer=2C=
 I=27ve come to think that I should redo the whole search engine=2C but =
I don=27t want to reproduce the same error as we have now=2E It would be=
 stupid to accidentaly redo the same mistake=2E I still haven=27t receiv=
ed news from my seniors about me posting code and all=2E=2E=2E

Xavier T=F4
Bacc=2E en Informatique et G=E9nie Logiciel
to=2Exavier=40courrier=2Euqam=2Eca
(450)434-8905



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 07 19:50:08 2007
Return-Path: <java-user-return-25974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4100 invoked from network); 7 Feb 2007 19:50:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Feb 2007 19:50:08 -0000
Received: (qmail 30516 invoked by uid 500); 7 Feb 2007 19:50:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30491 invoked by uid 500); 7 Feb 2007 19:50:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30480 invoked by uid 99); 7 Feb 2007 19:50:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 11:50:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of simon.willnauer@googlemail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 11:49:58 -0800
Received: by ug-out-1314.google.com with SMTP id k40so297583ugc
        for <java-user@lucene.apache.org>; Wed, 07 Feb 2007 11:49:37 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=beta;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=pYIaHnRoO65V62bG8Az1iIr17+XvxJWam1cJjIp27MkwbWV8eAdlYGLUL6fyzcnYbvOdO5A+BrCXOmqftDzm06rTqsX9VOq8MRWmWPjyiT2Jwrp3CrGONb+ku4PnjE+ERA0kFUKpMXWSB74euuZXgV30qPrGhi6bsoIremTXX1A=
Received: by 10.82.161.19 with SMTP id j19mr44567bue.1170877771361;
        Wed, 07 Feb 2007 11:49:31 -0800 (PST)
Received: by 10.82.150.5 with HTTP; Wed, 7 Feb 2007 11:49:23 -0800 (PST)
Message-ID: <f18c9dde0702071149w3a779b3aoeda81f28861aae71@mail.gmail.com>
Date: Wed, 7 Feb 2007 20:49:23 +0100
From: "Simon Willnauer" <simon.willnauer@googlemail.com>
Reply-To: simon.willnauer@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Increase performance using Pool of IndexSearchers?
In-Reply-To: <10039155.231170866547848.JavaMail.root@dell.rhoderunner.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <10039155.231170866547848.JavaMail.root@dell.rhoderunner.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On 2/7/07, spamsucks <spamsucks@rhoderunner.com> wrote:
> I currently am sharing my IndexSearcher across multiple requests as a static
> object.
static or not a single / shared searcher is a good idea.

>
> While I understand that the IndexSearcher is threadsafe, this does not
> necessarily mean that it's multi-threaded capable.  I was wondering if there
> is any thread blocking going on between requests?
No there are no blocking method as long as you use your Searcher e.g.
the IndexReader for reading/searching. IndexReader has several
synchronized methods but these are write access methods and commit.
>
> Would it improve performance to create a pool of IndexSearchers?
As far as I know no! It would rather slow down you app. while you have
to open the index and warm up caches if you have updates or deletes
you want to make visible for searching.

best regards Simon
>
> Thanks!
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 07 20:14:51 2007
Return-Path: <java-user-return-25975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10712 invoked from network); 7 Feb 2007 20:14:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Feb 2007 20:14:50 -0000
Received: (qmail 73111 invoked by uid 500); 7 Feb 2007 20:14:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73080 invoked by uid 500); 7 Feb 2007 20:14:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73069 invoked by uid 99); 7 Feb 2007 20:14:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 12:14:51 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 12:14:41 -0800
Received: by nf-out-0910.google.com with SMTP id i2so557300nfe
        for <java-user@lucene.apache.org>; Wed, 07 Feb 2007 12:14:20 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=oZT5ODNgn9a2RcGYhkQxwtRZueZG2Dnj72VMCJB75ietBpkWR4pE/u8CXhgR4Fak2Ind8HwdF9iwnmVKZDMDzMUeUysUAvknqXzNq9iE1cU+PnQiujgtaEDIRJQjVwVM2oLnr4bv2OffZiLiWOkKqiFGwFUAltYymvA50NNFI/I=
Received: by 10.82.157.6 with SMTP id f6mr282782bue.1170879245446;
        Wed, 07 Feb 2007 12:14:05 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Wed, 7 Feb 2007 12:14:05 -0800 (PST)
Message-ID: <359a92830702071214x45e238ffn5a1d95755f9418e7@mail.gmail.com>
Date: Wed, 7 Feb 2007 15:14:05 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Question concerning Analyzers
In-Reply-To: <d2ea34d771f3.45c9ddcd@courrier.uqam.ca>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13417_19546517.1170879245226"
References: <d2ea34d771f3.45c9ddcd@courrier.uqam.ca>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13417_19546517.1170879245226
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Well, at the very worst, you can use a different analyzer at search time
than you do at index time. I can imagine you create your own analyzer by
subclassing, say, StandardAnalyzer and use your custom analyzer at search
time....

Otherwise, you can't have a stock analyzer do one thing when indexing and
another when searching because they don't have any state information that I
know about.

Best
Erick

On 2/7/07, Xavier To <to.xavier@courrier.uqam.ca> wrote:
>
> Hi, me again
>
> I'm still stuck with my search engine, but something popped in my head :
> Can an analyzer index something but ignore it during a search ? I'm askin=
g
> this because now that I've been searching for an answer, I've come to thi=
nk
> that I should redo the whole search engine, but I don't want to reproduce
> the same error as we have now. It would be stupid to accidentaly redo the
> same mistake. I still haven't received news from my seniors about me post=
ing
> code and all...
>
> Xavier T=F4
> Bacc. en Informatique et G=E9nie Logiciel
> to.xavier@courrier.uqam.ca
> (450)434-8905
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_13417_19546517.1170879245226--

From java-user-return-25976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 07 20:16:04 2007
Return-Path: <java-user-return-25976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10861 invoked from network); 7 Feb 2007 20:16:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Feb 2007 20:16:03 -0000
Received: (qmail 75217 invoked by uid 500); 7 Feb 2007 20:16:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75175 invoked by uid 500); 7 Feb 2007 20:16:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75164 invoked by uid 99); 7 Feb 2007 20:16:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 12:16:03 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 12:15:52 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 6F3F930EFC16; Wed,  7 Feb 2007 15:15:31 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id E806F30EFC16
	for <java-user@lucene.apache.org>; Wed,  7 Feb 2007 15:15:28 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <d2ea34d771f3.45c9ddcd@courrier.uqam.ca>
References: <d2ea34d771f3.45c9ddcd@courrier.uqam.ca>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <1A060CFA-7F33-41FE-B548-0D70CCB7B4CF@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Question concerning Analyzers
Date: Wed, 7 Feb 2007 15:15:25 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1

There is no requirement that you use the same analyzer to search as =20
you used to index.  So, yes, you could certainly index things and =20
ignore them during a search.

	Erik


On Feb 7, 2007, at 2:10 PM, Xavier To wrote:

> Hi, me again
>
> I'm still stuck with my search engine, but something popped in my =20
> head : Can an analyzer index something but ignore it during a =20
> search ? I'm asking this because now that I've been searching for =20
> an answer, I've come to think that I should redo the whole search =20
> engine, but I don't want to reproduce the same error as we have =20
> now. It would be stupid to accidentaly redo the same mistake. I =20
> still haven't received news from my seniors about me posting code =20
> and all...
>
> Xavier T=F4
> Bacc. en Informatique et G=E9nie Logiciel
> to.xavier@courrier.uqam.ca
> (450)434-8905
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 07 20:22:08 2007
Return-Path: <java-user-return-25977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18343 invoked from network); 7 Feb 2007 20:22:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Feb 2007 20:22:07 -0000
Received: (qmail 83505 invoked by uid 500); 7 Feb 2007 20:22:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83049 invoked by uid 500); 7 Feb 2007 20:22:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83034 invoked by uid 99); 7 Feb 2007 20:22:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 12:22:08 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=MSGID_MULTIPLE_AT
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.125.145.37] (HELO mercury.propylon.com) (194.125.145.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 12:21:57 -0800
Received: from propylon-sdsl.sdsl.esat.net ([193.120.101.26] helo=damienmc)
	by mercury.propylon.com with esmtp (Exim 4.50)
	id 1HEtGj-0000Y6-2W
	for java-user@lucene.apache.org; Wed, 07 Feb 2007 20:19:57 +0000
From: "Damien McCarthy" <damien.mccarthy@propylon.com>
To: <java-user@lucene.apache.org>
Date: Wed, 7 Feb 2007 20:21:28 -0000
Message-ID: <000401c74af5$8c8b97b0$a5a2c710$@mccarthy@propylon.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Content-language: en-gb
Thread-Index: AcdK7Op6flMbqyPyTyiTcs2DtcYExAAB64IgAAA4POA=
X-SA-Exim-Connect-IP: 193.120.101.26
X-SA-Exim-Mail-From: damien.mccarthy@propylon.com
Subject: FW: Question concerning Analyzers
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on 
	mercury.propylon.com
X-Spam-Level: 
X-SA-Exim-Version: 4.2 (built Thu, 03 Mar 2005 10:44:12 +0100)
X-SA-Exim-Scanned: Yes (on mercury.propylon.com)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.1 required=5.0 tests=AWL autolearn=failed 
	version=3.0.3

"Can an analyzer index something but ignore it during a search"

It sounds like you might be using a different analyzer to parse your =
search
query than you used when you indexed the data. Perhaps you could print =
out
the toString() of the query you pass to the IndexSearcher, as this would
show you if the analyzer you use to parse the query is doing something =
you
don=92t expect.

D.

-----Original Message-----
From: Xavier To [mailto:to.xavier@courrier.uqam.ca]=20
Sent: 07 February 2007 19:10
To: java-user@lucene.apache.org
Subject: Question concerning Analyzers

Hi, me again

I'm still stuck with my search engine, but something popped in my head : =
Can
an analyzer index something but ignore it during a search ? I'm asking =
this
because now that I've been searching for an answer, I've come to think =
that
I should redo the whole search engine, but I don't want to reproduce the
same error as we have now. It would be stupid to accidentaly redo the =
same
mistake. I still haven't received news from my seniors about me posting =
code
and all...

Xavier T=F4
Bacc. en Informatique et G=E9nie Logiciel
to.xavier@courrier.uqam.ca
(450)434-8905



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 07 20:37:11 2007
Return-Path: <java-user-return-25978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22422 invoked from network); 7 Feb 2007 20:37:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Feb 2007 20:37:10 -0000
Received: (qmail 3261 invoked by uid 500); 7 Feb 2007 20:37:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3238 invoked by uid 500); 7 Feb 2007 20:37:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3227 invoked by uid 99); 7 Feb 2007 20:37:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 12:37:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [132.208.250.6] (HELO anis.telecom.uqam.ca) (132.208.250.6)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 12:37:00 -0800
Received: from anis.telecom.uqam.ca (anis.telecom.uqam.ca [132.208.250.6])
	by sortant.uqam.ca (8.13.8/8.12.1) with SMTP id l17KR5ol009746
	for <java-user@lucene.apache.org>; Wed, 7 Feb 2007 15:27:15 -0500 (EST)
Received: from antivirus.uqam.ca ([127.0.0.1])
 by anis.telecom.uqam.ca (SAVSMTP 3.1.1.32) with SMTP id M2007020715271428371
 for <java-user@lucene.apache.org>; Wed, 07 Feb 2007 15:27:14 -0500
Received: from courriel2.sitel.uqam.ca (courriel2.sitel.uqam.ca [132.208.250.43])
	by intrant.uqam.ca (8.13.8/8.12.2/uqam-filtres) with ESMTP id l17KPLK1029416
	for <java-user@lucene.apache.org>; Wed, 7 Feb 2007 15:25:25 -0500 (EST)
X-UQAM-Spam-Filter: Filtre-Uqam re:  abuse@uqam.ca
Received: from courrier.uqam.ca ([127.0.0.1]) by courriel2.sitel.uqam.ca
 (Sun Java System Messaging Server 6.1 HotFix 0.11 (built Jan 28 2005))
 with ESMTP id <0JD4001TH0Q9LM50@courriel2.sitel.uqam.ca> for
 java-user@lucene.apache.org; Wed, 07 Feb 2007 15:25:21 -0500 (EST)
Received: from [206.47.141.21] by courriel2.sitel.uqam.ca (mshttpd); Wed,
 07 Feb 2007 15:25:21 -0500
Date: Wed, 07 Feb 2007 15:25:21 -0500
From: Xavier To <to.xavier@courrier.uqam.ca>
Subject: Re : Re: Question concerning Analyzers
To: java-user@lucene.apache.org
Message-id: <ef25505b2527.45c9ef61@courrier.uqam.ca>
MIME-version: 1.0
X-Mailer: Sun Java(tm) System Messenger Express 6.1 HotFix 0.11 (built Jan 28
 2005)
Content-type: text/plain; charset=iso-8859-1
Content-language: fr
Content-transfer-encoding: quoted-printable
Content-disposition: inline
X-Accept-Language: fr
Priority: normal
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Erik and Erick=2C

I guess my question was rather unclear=2C but you guys answered it all t=
he same =3A it is impossible for an analyzer to index something and havi=
ng the same analyzer ignore the thing indexed during a search=2E =


If it makes everything clearer=2C during indexation=2C numbers  are inde=
xed=2C whether or not they are accompanied by letters ( 2003 and 4wd are=
 both indexed)=2E That=27s fine=2C since we want this=2E  The problem oc=
curs when I try to search for them =3A They are ignored=2E I know they a=
re indexed because I ran through the index using Luke=2E =


Any thoughts regarding this problem =3F

Xavier T=F4
Bacc=2E en Informatique et G=E9nie Logiciel
to=2Exavier=40courrier=2Euqam=2Eca
(450)434-8905

----- Message d=27origine -----
De=3A Erik Hatcher =3Cerik=40ehatchersolutions=2Ecom=3E
Date=3A Mercredi=2C F=E9vrier 7=2C 2007 3=3A15 pm
Objet=3A Re=3A Question concerning Analyzers

=3E There is no requirement that you use the same analyzer to search as =

=3E =

=3E you used to index=2E  So=2C yes=2C you could certainly index things =
and  =

=3E ignore them during a search=2E
=3E =

=3E 	Erik
=3E =

=3E =

=3E On Feb 7=2C 2007=2C at 2=3A10 PM=2C Xavier To wrote=3A
=3E =

=3E =3E Hi=2C me again
=3E =3E
=3E =3E I=27m still stuck with my search engine=2C but something popped =
in my =

=3E =

=3E =3E head =3A Can an analyzer index something but ignore it during a =
 =

=3E =3E search =3F I=27m asking this because now that I=27ve been search=
ing for =

=3E =

=3E =3E an answer=2C I=27ve come to think that I should redo the whole s=
earch =

=3E =

=3E =3E engine=2C but I don=27t want to reproduce the same error as we h=
ave  =

=3E =3E now=2E It would be stupid to accidentaly redo the same mistake=2E=
 I  =

=3E =3E still haven=27t received news from my seniors about me posting c=
ode =

=3E =

=3E =3E and all=2E=2E=2E
=3E =3E
=3E =3E Xavier T=F4
=3E =3E Bacc=2E en Informatique et G=E9nie Logiciel
=3E =3E to=2Exavier=40courrier=2Euqam=2Eca
=3E =3E (450)434-8905
=3E =3E
=3E =3E
=3E =3E
=3E =3E ----------------------------------------------------------------=
--
=3E ---
=3E =3E To unsubscribe=2C e-mail=3A java-user-unsubscribe=40lucene=2Eapa=
che=2Eorg
=3E =3E For additional commands=2C e-mail=3A java-user-help=40lucene=2Ea=
pache=2Eorg
=3E =

=3E =

=3E --------------------------------------------------------------------=

=3E -
=3E To unsubscribe=2C e-mail=3A java-user-unsubscribe=40lucene=2Eapache=2E=
org
=3E For additional commands=2C e-mail=3A java-user-help=40lucene=2Eapach=
e=2Eorg
=3E =

=3E 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 07 21:29:03 2007
Return-Path: <java-user-return-25979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36815 invoked from network); 7 Feb 2007 21:29:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Feb 2007 21:29:02 -0000
Received: (qmail 81678 invoked by uid 500); 7 Feb 2007 21:29:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81641 invoked by uid 500); 7 Feb 2007 21:29:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81630 invoked by uid 99); 7 Feb 2007 21:29:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 13:29:02 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 13:28:53 -0800
Received: by nf-out-0910.google.com with SMTP id i2so573807nfe
        for <java-user@lucene.apache.org>; Wed, 07 Feb 2007 13:28:30 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=EX1gr1RNH6IzNKXSmxIoV+ZFYCMFSUEavQ4hP5cx2J0dxMzKZSZZoaXyazpEe0RbCIhOYlxUwhI8w7QLUXiuetrEE83OH67DHd0LwLev6bjCqHxTeSZp9uSp72fm212U9vU2i4ZuQEM5W3LsgYTaEMlkRBbTERRPhrvQX4HN6Rg=
Received: by 10.82.176.3 with SMTP id y3mr349884bue.1170883702914;
        Wed, 07 Feb 2007 13:28:22 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Wed, 7 Feb 2007 13:28:22 -0800 (PST)
Message-ID: <359a92830702071328i388d936i4fe85f83ce391bd@mail.gmail.com>
Date: Wed, 7 Feb 2007 16:28:22 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Re : Re: Question concerning Analyzers
In-Reply-To: <ef25505b2527.45c9ef61@courrier.uqam.ca>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15532_7816373.1170883702853"
References: <ef25505b2527.45c9ef61@courrier.uqam.ca>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15532_7816373.1170883702853
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Then the analyzer you're using when parsing the query is stripping them. It
must be different than the one you use when indexing somehow. At least
that's the only explanation I can imagine....

Perhaps, somehow, you are using a default analyzer when you parse a query?
Or you aren't specifying the field when you query and thus a default is
used? Or you are using a PerFieldAnalyzerWrapper and dropping through to th=
e
default? or ????

Just for yucks, I'd try using WhitespaceAnalyzer on a query with something
you *know* exists in the index for a particular field and work my way up to
whatever your real problem is in small steps (since you can't post code
<G>)......

Best
Erick

On 2/7/07, Xavier To <to.xavier@courrier.uqam.ca> wrote:
>
> Thanks Erik and Erick,
>
> I guess my question was rather unclear, but you guys answered it all the
> same : it is impossible for an analyzer to index something and having the
> same analyzer ignore the thing indexed during a search.
>
> If it makes everything clearer, during indexation, numbers  are indexed,
> whether or not they are accompanied by letters ( 2003 and 4wd are both
> indexed). That's fine, since we want this.  The problem occurs when I try=
 to
> search for them : They are ignored. I know they are indexed because I ran
> through the index using Luke.
>
> Any thoughts regarding this problem ?
>
> Xavier T=F4
> Bacc. en Informatique et G=E9nie Logiciel
> to.xavier@courrier.uqam.ca
> (450)434-8905
>
> ----- Message d'origine -----
> De: Erik Hatcher <erik@ehatchersolutions.com>
> Date: Mercredi, F=E9vrier 7, 2007 3:15 pm
> Objet: Re: Question concerning Analyzers
>
> > There is no requirement that you use the same analyzer to search as
> >
> > you used to index.  So, yes, you could certainly index things and
> > ignore them during a search.
> >
> >       Erik
> >
> >
> > On Feb 7, 2007, at 2:10 PM, Xavier To wrote:
> >
> > > Hi, me again
> > >
> > > I'm still stuck with my search engine, but something popped in my
> >
> > > head : Can an analyzer index something but ignore it during a
> > > search ? I'm asking this because now that I've been searching for
> >
> > > an answer, I've come to think that I should redo the whole search
> >
> > > engine, but I don't want to reproduce the same error as we have
> > > now. It would be stupid to accidentaly redo the same mistake. I
> > > still haven't received news from my seniors about me posting code
> >
> > > and all...
> > >
> > > Xavier T=F4
> > > Bacc. en Informatique et G=E9nie Logiciel
> > > to.xavier@courrier.uqam.ca
> > > (450)434-8905
> > >
> > >
> > >
> > > ------------------------------------------------------------------
> > ---
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > --------------------------------------------------------------------
> > -
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_15532_7816373.1170883702853--

From java-user-return-25980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 07 21:59:36 2007
Return-Path: <java-user-return-25980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45057 invoked from network); 7 Feb 2007 21:59:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Feb 2007 21:59:34 -0000
Received: (qmail 23099 invoked by uid 500); 7 Feb 2007 21:59:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22860 invoked by uid 500); 7 Feb 2007 21:59:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22849 invoked by uid 99); 7 Feb 2007 21:59:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 13:59:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 13:59:23 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 33F205B763; Wed,  7 Feb 2007 13:59:03 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 2E8897F403
	for <java-user@lucene.apache.org>; Wed,  7 Feb 2007 13:59:03 -0800 (PST)
Date: Wed, 7 Feb 2007 13:59:03 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: How to return results with null values?
In-Reply-To: <OF843C2886.24B18CD8-ON8525727B.00553C20-8525727B.00558F52@BIPT.COM>
Message-ID: <Pine.LNX.4.58.0702071355330.17424@hal.rescomp.berkeley.edu>
References: <OF843C2886.24B18CD8-ON8525727B.00553C20-8525727B.00558F52@BIPT.COM>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: A newbie here, but I would think that fields will null value will slow
: down the search as much as fields with a specific non-conflicting keyword.
:  There is still a field to be looked at, even if it does not match.

i believe you are correct ... it doesn't matter wether the Field value is
null or "" or "some_magic__toKen_$" it's still an instance of a term.

Of course, not adding that Field value at all would actually make things a
lot better.

I'm not sure wether this question is about docs that have no value for a
field, or docs where the value of the field is null -- but either way
adding a filter on that Field that requires *some* value might help. take
a look at RangeFilter and set both the upper and lower terms to be null --
or if you need a Query and can't use a filter, do the same thing with
ConstantScoreRangeQuery.

if what you mean by bull is really "" then you can still do the same thing
using "" as your lower term but don't be inclusive of the lower term.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 01:05:25 2007
Return-Path: <java-user-return-25981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93898 invoked from network); 8 Feb 2007 01:05:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 01:05:24 -0000
Received: (qmail 79978 invoked by uid 500); 8 Feb 2007 01:05:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79620 invoked by uid 500); 8 Feb 2007 01:05:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79609 invoked by uid 99); 8 Feb 2007 01:05:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 17:05:25 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 17:05:14 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HExiY-00063M-E7
	for java-user@lucene.apache.org; Wed, 07 Feb 2007 17:04:54 -0800
Message-ID: <8857789.post@talk.nabble.com>
Date: Wed, 7 Feb 2007 17:04:54 -0800 (PST)
From: Joe Tang <joe.tang@workmetro.com>
To: java-user@lucene.apache.org
Subject: How to not tokenize HTML tag from input string
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: joe.tang@workmetro.com
X-Virus-Checked: Checked by ClamAV on apache.org


My work is to index keywords with a document. In my case, the document is
made up with HTML tags which i don't want to index them.

For example:
Input Document:
<div id="tp-wrapper">
<span id="tp-top-right">You are welcome</span>
<div id="tp-tab">
<h1>Testing text</h1>
</div>
</div>

Expected Keywords:
keywords:You
keywords:are
keywords:welcome
keywords:Testing
keywords:text

Is there anyway I can make them not to be one of the keywords?
-- 
View this message in context: http://www.nabble.com/How-to-not-tokenize-HTML-tag-from-input-string-tf3190778.html#a8857789
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 02:17:31 2007
Return-Path: <java-user-return-25982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8793 invoked from network); 8 Feb 2007 02:17:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 02:17:31 -0000
Received: (qmail 60972 invoked by uid 500); 8 Feb 2007 02:17:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60240 invoked by uid 500); 8 Feb 2007 02:17:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60229 invoked by uid 99); 8 Feb 2007 02:17:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 18:17:31 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.73.178.153] (HELO web60425.mail.yahoo.com) (209.73.178.153)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 07 Feb 2007 18:17:20 -0800
Received: (qmail 74869 invoked by uid 60001); 8 Feb 2007 02:16:58 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=OhR4JrUbj/6wUAvaucv2Ba1AgFW67H3FxtUEPkLGV0BPnY20ajuM1wRs6b6Im6JORhLnM8w69al+VVriMgzg8L/l8IbpTq1a2N09wjO0NQo67Q5YxrB9HRUxKr9PuIyi1gmWkiD7XCdGB+REZ7t0Wni5KSRvx1o2YhGVfI9GKpo=;
X-YMail-OSG: sbggfw0VM1kR9FBShIr3eDNXQAyFP5zJH.MbjYldxqyEg1Uq52UVKMEsTKBElgYSSjAv86j_nezWjE3P9de0qL03qCovxYPbgcHehIBewpwlS7gH5zmtbk9K.Rc21n4XrLGP.kspyKw9xhx9544OtEnripk08Kb3n1hx2jkbQEidqmjiBJdwE_EamGwnTsz1ENCZENAvbD7uZfEe4SOEBwh2LA--
Received: from [155.69.162.145] by web60425.mail.yahoo.com via HTTP; Wed, 07 Feb 2007 18:16:57 PST
Date: Wed, 7 Feb 2007 18:16:57 -0800 (PST)
From: maureen tanuwidjaja <autumn_musique@yahoo.com>
Subject: exception is hit while optimizing index
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-37755288-1170901017=:73712"
Content-Transfer-Encoding: 8bit
Message-ID: <117329.73712.qm@web60425.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-37755288-1170901017=:73712
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi ,
  
  I would like to know about optimizing index...
  
  The exception is hit due to disk full while optimizing the index and hence,the index has not been closed yet.
  
  Is the unclosed index dangerous?Can i perform searching in such index correctly?Is the index built robust yet?
  
  thanks and regards,
  maureen
  
 
---------------------------------
Expecting? Get great news right away with email Auto-Check.
Try the Yahoo! Mail Beta.
--0-37755288-1170901017=:73712--

From java-user-return-25983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 02:19:08 2007
Return-Path: <java-user-return-25983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9064 invoked from network); 8 Feb 2007 02:19:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 02:19:07 -0000
Received: (qmail 62823 invoked by uid 500); 8 Feb 2007 02:19:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62793 invoked by uid 500); 8 Feb 2007 02:19:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62782 invoked by uid 99); 8 Feb 2007 02:19:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 18:19:08 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 18:18:59 -0800
Received: by nf-out-0910.google.com with SMTP id i2so630665nfe
        for <java-user@lucene.apache.org>; Wed, 07 Feb 2007 18:18:38 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=bFicfwx/VVUzgaQFiJf297/YNo9FA4FKbh3FzTCe7mxqjWZifaF0vFoHT+iAfCrESIaHJhimKRChCRpfI2f7bgz+17lGzEBcRu3lE/rh00eLONeabHeeqX4fqu/5ctzektVFCjM/RdWrNrKFChSBCcm15mpL+GnnSDSkQOoJsrA=
Received: by 10.82.107.15 with SMTP id f15mr1505952buc.1170901117863;
        Wed, 07 Feb 2007 18:18:37 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Wed, 7 Feb 2007 18:18:37 -0800 (PST)
Message-ID: <359a92830702071818m282ebf14kc67bb4434473b468@mail.gmail.com>
Date: Wed, 7 Feb 2007 21:18:37 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to not tokenize HTML tag from input string
In-Reply-To: <8857789.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19966_3129254.1170901117633"
References: <8857789.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19966_3129254.1170901117633
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Sure, just don't index the html tags in the first place. Of course that
means you need to parse the document first. Here's a parser that was
mentioned on the thread a while ago....

http://sourceforge.net/projects/mozillaparser

There may very well be others....

Depending on how sophisticated you need to be, you might be able to do a
regular expression to remove all the HTML tags...

Best
Erick

On 2/7/07, Joe Tang <joe.tang@workmetro.com> wrote:
>
>
> My work is to index keywords with a document. In my case, the document is
> made up with HTML tags which i don't want to index them.
>
> For example:
> Input Document:
> <div id="tp-wrapper">
> <span id="tp-top-right">You are welcome</span>
> <div id="tp-tab">
> <h1>Testing text</h1>
> </div>
> </div>
>
> Expected Keywords:
> keywords:You
> keywords:are
> keywords:welcome
> keywords:Testing
> keywords:text
>
> Is there anyway I can make them not to be one of the keywords?
> --
> View this message in context:
> http://www.nabble.com/How-to-not-tokenize-HTML-tag-from-input-string-tf3190778.html#a8857789
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_19966_3129254.1170901117633--

From java-user-return-25984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 04:22:03 2007
Return-Path: <java-user-return-25984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42444 invoked from network); 8 Feb 2007 04:22:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 04:22:02 -0000
Received: (qmail 71811 invoked by uid 500); 8 Feb 2007 04:22:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71784 invoked by uid 500); 8 Feb 2007 04:22:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71773 invoked by uid 99); 8 Feb 2007 04:22:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 20:22:02 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.73.178.151] (HELO web60423.mail.yahoo.com) (209.73.178.151)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 07 Feb 2007 20:21:51 -0800
Received: (qmail 36798 invoked by uid 60001); 8 Feb 2007 04:21:30 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=wYIW2emxJE9meLUW54Jj/A9w9+Uj8PransusUc1A9rDZvwL3tHJk683GokZ8VefYDnQLs/12oGZ8GyjpS0+U+uP5eMtPd1BcWZ7wJXzNypGZeCksO5PeGDaR3Mf+RZdDHiCzWAcDUGJBlaV7wDJmUo31jsCFa2B7wsheO1PiOb8=;
X-YMail-OSG: 5mdmn7wVM1ke0y__sl.W0Lw377GHnBeZGmw4NTNReJqlcOIRtCs1OI1Mo9tPg5bEwQ--
Received: from [155.69.162.145] by web60423.mail.yahoo.com via HTTP; Wed, 07 Feb 2007 20:21:30 PST
Date: Wed, 7 Feb 2007 20:21:30 -0800 (PST)
From: maureen tanuwidjaja <autumn_musique@yahoo.com>
Subject: Is there any way to optimize existing unoptimized index?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-944149076-1170908490=:36582"
Content-Transfer-Encoding: 8bit
Message-ID: <5536.36582.qm@web60423.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-944149076-1170908490=:36582
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi,
  
  May I also ask wheter there is a way to use writer.optimize() without indexing the files from the beginning?
  
  It took me about 17 hrs to finish building an unoptimized index(finish  when I call IndexWriter.close() ).I just wonder wheter this existing  index could be optimized...
  
  THanks and Best Regards,
  Maureen
  
 
---------------------------------
Everyone is raving about the all-new Yahoo! Mail beta.
--0-944149076-1170908490=:36582--

From java-user-return-25985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 04:38:24 2007
Return-Path: <java-user-return-25985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44814 invoked from network); 8 Feb 2007 04:38:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 04:38:24 -0000
Received: (qmail 90312 invoked by uid 500); 8 Feb 2007 04:38:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90273 invoked by uid 500); 8 Feb 2007 04:38:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90262 invoked by uid 99); 8 Feb 2007 04:38:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 20:38:24 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of patrek@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 20:38:15 -0800
Received: by ug-out-1314.google.com with SMTP id k40so391699ugc
        for <java-user@lucene.apache.org>; Wed, 07 Feb 2007 20:37:54 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=klgvetGhwuAiFW5PquYMFWGkgktmwwvke3jjwzpxA6RpQle9KJRsnLJTUiQUf6U7PUEN7epFtVbZRAyHm+hvV6w3feSB4BrtlpwI7XfRSQPihY2aBbqak9zqsJWZMjtt5DztJxLeuBduqcJSL7fH3KqND2Tqf+/Em+CHSFW69BQ=
Received: by 10.78.204.7 with SMTP id b7mr3620396hug.1170909473798;
        Wed, 07 Feb 2007 20:37:53 -0800 (PST)
Received: by 10.78.51.18 with HTTP; Wed, 7 Feb 2007 20:37:53 -0800 (PST)
Message-ID: <48b038c60702072037h46a44e83t6e1813af553e8b87@mail.gmail.com>
Date: Wed, 7 Feb 2007 23:37:53 -0500
From: "Patrick Turcotte" <patrek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Is there any way to optimize existing unoptimized index?
In-Reply-To: <5536.36582.qm@web60423.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15594_9798136.1170909473761"
References: <5536.36582.qm@web60423.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15594_9798136.1170909473761
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

>From my own experience, yes, you can.

You just have to reopen your index with a new IndexWriter (making sure you
don't use a constructor that will recreate it; from the javadoc, stay clear
of those with a boolean argument). Then call optimize() then close() on your
writer, it will be optimized for you.

I think you can also use Luke (google Luke Lucene) to do this.

In any cases, I suggest you backup your index before trying, just to be
sure.

Hope this helps.

Patrick

On 2/7/07, maureen tanuwidjaja <autumn_musique@yahoo.com> wrote:
>
> Hi,
>
>   May I also ask wheter there is a way to use writer.optimize() without
> indexing the files from the beginning?
>
>   It took me about 17 hrs to finish building an unoptimized
> index(finish  when I call IndexWriter.close() ).I just wonder wheter this
> existing  index could be optimized...
>
>   THanks and Best Regards,
>   Maureen
>
>
> ---------------------------------
> Everyone is raving about the all-new Yahoo! Mail beta.

------=_Part_15594_9798136.1170909473761--

From java-user-return-25986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 05:41:26 2007
Return-Path: <java-user-return-25986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58542 invoked from network); 8 Feb 2007 05:41:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 05:41:26 -0000
Received: (qmail 54690 invoked by uid 500); 8 Feb 2007 05:41:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54658 invoked by uid 500); 8 Feb 2007 05:41:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54645 invoked by uid 99); 8 Feb 2007 05:41:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 21:41:27 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Feb 2007 21:41:17 -0800
Received: by nf-out-0910.google.com with SMTP id i2so664758nfe
        for <java-user@lucene.apache.org>; Wed, 07 Feb 2007 21:40:56 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=q1di8LaxwB31WJVCqRfZll8J2sHNjlcjnUEdPunq1uz77tbkuA0cgSEVS8X57BZ1WQE6kf/F/nMM6yXhf4rPM2nJxHVeLk1X7OdHrlpeTJLndTDoIXUHsTFfC65jmJTT95nyINWj0cxQDNn8YHRjbtXYz/QSPddWVcR91dC4XLE=
Received: by 10.82.134.12 with SMTP id h12mr1289803bud.1170913256333;
        Wed, 07 Feb 2007 21:40:56 -0800 (PST)
Received: by 10.82.163.2 with HTTP; Wed, 7 Feb 2007 21:40:56 -0800 (PST)
Message-ID: <34b8543c0702072140t1c396ffcl6160d7c176244e4@mail.gmail.com>
Date: Thu, 8 Feb 2007 09:10:56 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Increase performance using Pool of IndexSearchers?
In-Reply-To: <10039155.231170866547848.JavaMail.root@dell.rhoderunner.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24971_2172535.1170913256305"
References: <10039155.231170866547848.JavaMail.root@dell.rhoderunner.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24971_2172535.1170913256305
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi
would you tell how we can create a searcher pool. I get interested in your
idea.

thanks

On 2/7/07, spamsucks <spamsucks@rhoderunner.com> wrote:
>
> I currently am sharing my IndexSearcher across multiple requests as a
> static
> object.
>
> While I understand that the IndexSearcher is threadsafe, this does not
> necessarily mean that it's multi-threaded capable.  I was wondering if
> there
> is any thread blocking going on between requests?
>
> Would it improve performance to create a pool of IndexSearchers?
>
> Thanks!
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,
Mohammad

------=_Part_24971_2172535.1170913256305--

From java-user-return-25987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 08:35:21 2007
Return-Path: <java-user-return-25987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94899 invoked from network); 8 Feb 2007 08:35:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 08:35:21 -0000
Received: (qmail 34784 invoked by uid 500); 8 Feb 2007 08:35:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34744 invoked by uid 500); 8 Feb 2007 08:35:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34733 invoked by uid 99); 8 Feb 2007 08:35:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 00:35:15 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 00:35:06 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 46F605B775; Thu,  8 Feb 2007 00:34:43 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 417377F403
	for <java-user@lucene.apache.org>; Thu,  8 Feb 2007 00:34:43 -0800 (PST)
Date: Thu, 8 Feb 2007 00:34:43 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: How to not tokenize HTML tag from input string
In-Reply-To: <8857789.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0702080028340.26374@hal.rescomp.berkeley.edu>
References: <8857789.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


Solr has an HTMLStripReader used by an two different tokenizers for doing
the basics of ignoring tags when reading text ... it has one known bug
when dealing with highlighting...

http://lucene.apache.org/solr/api/org/apache/solr/analysis/HTMLStripReader.html
http://lucene.apache.org/solr/api/org/apache/solr/analysis/HTMLStripStandardTokenizerFactory.html
http://lucene.apache.org/solr/api/org/apache/solr/analysis/HTMLStripWhitespaceTokenizerFactory.html
http://issues.apache.org/jira/browse/SOLR-42


: Date: Wed, 7 Feb 2007 17:04:54 -0800 (PST)
: From: Joe Tang <joe.tang@workmetro.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: How to not tokenize HTML tag from input string
:
:
: My work is to index keywords with a document. In my case, the document is
: made up with HTML tags which i don't want to index them.
:
: For example:
: Input Document:
: <div id="tp-wrapper">
: <span id="tp-top-right">You are welcome</span>
: <div id="tp-tab">
: <h1>Testing text</h1>
: </div>
: </div>
:
: Expected Keywords:
: keywords:You
: keywords:are
: keywords:welcome
: keywords:Testing
: keywords:text
:
: Is there anyway I can make them not to be one of the keywords?
: --
: View this message in context: http://www.nabble.com/How-to-not-tokenize-HTML-tag-from-input-string-tf3190778.html#a8857789
: Sent from the Lucene - Java Users mailing list archive at Nabble.com.
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 09:32:18 2007
Return-Path: <java-user-return-25988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20994 invoked from network); 8 Feb 2007 09:32:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 09:32:18 -0000
Received: (qmail 13944 invoked by uid 500); 8 Feb 2007 09:32:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13632 invoked by uid 500); 8 Feb 2007 09:32:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13621 invoked by uid 99); 8 Feb 2007 09:32:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 01:32:19 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [134.155.87.224] (HELO salsa.informatik.uni-mannheim.de) (134.155.87.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 01:32:08 -0800
Received: from [127.0.0.1] (lela.informatik.uni-mannheim.de [134.155.88.74])
	(authenticated bits=0)
	by salsa.informatik.uni-mannheim.de (8.13.8/8.13.7) with ESMTP id l189VXC3017026
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Thu, 8 Feb 2007 10:31:33 +0100
Message-ID: <45CAEE5D.3050905@informatik.uni-mannheim.de>
Date: Thu, 08 Feb 2007 10:33:17 +0100
From: Oliver Hummel <hummel@informatik.uni-mannheim.de>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Strange Behaviour of BooleanQuery?
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: ClamAV version 0.88.6, clamav-milter version 0.88.6 on salsa.informatik.uni-mannheim.de
X-Virus-Status: Clean
X-Greylist: Sender succeeded SMTP AUTH authentication, not delayed by milter-greylist-2.0.2 (salsa.informatik.uni-mannheim.de [134.155.88.83]); Thu, 08 Feb 2007 10:31:33 +0100 (CET)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi @all,

I'm a little confused about the behaviour of BooleanQuery. I have a custom
parser that analyzes some text and constrcuts an "ANDed" BooleanQuery. toString
delivers something like this:

  (+field1:term1 +field2:term2)

Looks pretty normal to me, but the problem is it delivers no results (although
there are matching ones of course). What makes it even more confusing is the
fact that when I take the above query and use it with the QueryParser it works
and delivers the expected results...

Any ideas? Perhaps anyone who is able to reproduce it? Am I doing something
wrong or is there a bug?

Here is how I produce the BooleanQuery:

BooleanQuery bq = new BooleanQuery();
for (iterate over terms) {
   t = new Term(field, term);
   bq.add(new TermQuery(t), BooleanClause.Occur.MUST);
}

Any help appreciated, thanks in advance!

  Oliver



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 11:29:37 2007
Return-Path: <java-user-return-25989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52153 invoked from network); 8 Feb 2007 11:29:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 11:29:35 -0000
Received: (qmail 77346 invoked by uid 500); 8 Feb 2007 11:29:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76330 invoked by uid 500); 8 Feb 2007 11:29:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76318 invoked by uid 99); 8 Feb 2007 11:29:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 03:29:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.29] (HELO out5.smtp.messagingengine.com) (66.111.4.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 03:29:22 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id 25E261A9122
	for <java-user@lucene.apache.org>; Thu,  8 Feb 2007 06:29:01 -0500 (EST)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by out1.internal (MEProxy); Thu, 08 Feb 2007 06:29:01 -0500
X-Sasl-enc: reP8KZuoU889t7ShY2k7bDIPEAW4OuOJEUPrvtim2jeB 1170934140
Received: from [10.17.4.90] (pool-71-162-112-210.bstnma.fios.verizon.net [71.162.112.210])
	by mail.messagingengine.com (Postfix) with ESMTP id E10631AAEE
	for <java-user@lucene.apache.org>; Thu,  8 Feb 2007 06:29:00 -0500 (EST)
Message-ID: <45CB0977.9070603@mikemccandless.com>
Date: Thu, 08 Feb 2007 06:28:55 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: exception is hit while optimizing index
References: <117329.73712.qm@web60425.mail.yahoo.com>
In-Reply-To: <117329.73712.qm@web60425.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

maureen tanuwidjaja wrote:

>   I would like to know about optimizing index...
>   
>   The exception is hit due to disk full while optimizing the index and hence,the index has not been closed yet.
>   
>   Is the unclosed index dangerous?Can i perform searching in such index correctly?Is the index built robust yet?

The index is fine in this case: it will not become corrupt.

The only known case where Lucene can corrupt an index on disk full is
in the addIndexes(*) methods of IndexWriter (see
http://issues.apache.org/jira/browse/LUCENE-702 for details).  This
corruption case has been fixed on the Lucene trunk (to be released as
2.1 soon).

However: you will have leftover (possibly very large) files in your
index directory that are not used, yet Lucene will never delete them.
Sometimes these files have the suffix ".tmp" but that is not always
the case.

This has also been fixed in the trunk version of Lucene, meaning on
any Exception during optimize, addDocument, etc., Lucene will remove
any partial files it had created.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 11:36:14 2007
Return-Path: <java-user-return-25990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54257 invoked from network); 8 Feb 2007 11:36:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 11:36:14 -0000
Received: (qmail 84428 invoked by uid 500); 8 Feb 2007 11:36:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84390 invoked by uid 500); 8 Feb 2007 11:36:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84377 invoked by uid 99); 8 Feb 2007 11:36:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 03:36:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.29] (HELO out5.smtp.messagingengine.com) (66.111.4.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 03:36:02 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id 27CF178950
	for <java-user@lucene.apache.org>; Thu,  8 Feb 2007 06:35:40 -0500 (EST)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by out1.internal (MEProxy); Thu, 08 Feb 2007 06:35:40 -0500
X-Sasl-enc: fTyWnmMjhzNHeIYlWtHSFeNXudidj041LcW105dSpaOW 1170934539
Received: from [10.17.4.90] (pool-71-162-112-210.bstnma.fios.verizon.net [71.162.112.210])
	by mail.messagingengine.com (Postfix) with ESMTP id E33C713AC2
	for <java-user@lucene.apache.org>; Thu,  8 Feb 2007 06:35:39 -0500 (EST)
Message-ID: <45CB0B06.4090709@mikemccandless.com>
Date: Thu, 08 Feb 2007 06:35:34 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Is there any way to optimize existing unoptimized index?
References: <5536.36582.qm@web60423.mail.yahoo.com>
In-Reply-To: <5536.36582.qm@web60423.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

maureen tanuwidjaja wrote:

>   May I also ask wheter there is a way to use writer.optimize() without indexing the files from the beginning?
>   
>   It took me about 17 hrs to finish building an unoptimized index(finish  when I call IndexWriter.close() ).I just wonder wheter this existing  index could be optimized...

You can always open a new IndexWriter on your index, do things like
addDocument, optimize, etc., and then close it.

There's no requirement that you do addDocument / optimize in a single
session of IndexWriter.

But do be careful not to pass "create = true" to IndexWriter.

The trunk (soon to be 2.1 release) version of Lucene has new
IndexWriter constructors that "create when needed, else append", see
here:

     http://issues.apache.org/jira/browse/LUCENE-301

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 12:54:36 2007
Return-Path: <java-user-return-25991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72890 invoked from network); 8 Feb 2007 12:54:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 12:54:34 -0000
Received: (qmail 83759 invoked by uid 500); 8 Feb 2007 12:54:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83731 invoked by uid 500); 8 Feb 2007 12:54:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83720 invoked by uid 99); 8 Feb 2007 12:54:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 04:54:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of menarialaxmilal@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 04:54:25 -0800
Received: by py-out-1112.google.com with SMTP id a25so301333pyi
        for <java-user@lucene.apache.org>; Thu, 08 Feb 2007 04:54:04 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=Er0cKuvmlRDWqwTviS9vp+gqt2HEissc5qofNpyPQTUJUjnPeejI8m+IY0jk8gtvH+ZaZE3KphCKJysaxspSj3V4hGFfeVsGdFGZGSLdg3sIllvprcqXIVb0J46MXCfZUo8AYagIM0Ftu7KP/zW+niv9CRwkMMjgl7dlQM8KS2E=
Received: by 10.35.106.1 with SMTP id i1mr909326pym.1170939244468;
        Thu, 08 Feb 2007 04:54:04 -0800 (PST)
Received: by 10.64.53.14 with HTTP; Thu, 8 Feb 2007 04:54:04 -0800 (PST)
Message-ID: <4e2bf4c80702080454s76577035yed0125ac67da49db@mail.gmail.com>
Date: Thu, 8 Feb 2007 18:24:04 +0530
From: "Laxmilal Menaria" <menarialaxmilal@gmail.com>
To: java-user@lucene.apache.org
Subject: Slow performance (Fetching Hits)
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

We are using wild cards in our search for that we are passing field
name and term/query
to some other function(wildcardSearch() ) in some other class(
QueryParserClass ) which extends MultiFieldQueryParser

In wildcardSearch() we are calling super.getWildcardQuery(String
field,String query) which returns Query we are adding this query.
Query in BooleanQuery with occur and add BooleanQuery in
MultiSearcher, This will take more than 30 secs for 1,50,000 docs (40
MB Index)..

Platform : Windows XP with SP2, P4 with 512 MB RAM and Lucene 2.0.

Thanks,
Laxmilal Menaria

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 13:07:29 2007
Return-Path: <java-user-return-25992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76506 invoked from network); 8 Feb 2007 13:07:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 13:07:28 -0000
Received: (qmail 98145 invoked by uid 500); 8 Feb 2007 13:07:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97655 invoked by uid 500); 8 Feb 2007 13:07:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97644 invoked by uid 99); 8 Feb 2007 13:07:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 05:07:29 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 05:07:19 -0800
Received: by nf-out-0910.google.com with SMTP id i2so746901nfe
        for <java-user@lucene.apache.org>; Thu, 08 Feb 2007 05:06:58 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=sP2wC1tSaXSTuDt8iU/vFl8jyolS+TTKGX3vRzDnmZQ9S0Xa+ssO9yXWMFB0PBhlHCMrZuwEyqjKMW+RXlQ2s4bGNI/tU6tHfd4ZKLZ7zk/00HjZMZyJFD3aiCPi0mcPhRfecXt5yoi5F1QnZcW7izEblfH3tnQAhRX/SV4n2zM=
Received: by 10.82.188.15 with SMTP id l15mr2893281buf.1170940017739;
        Thu, 08 Feb 2007 05:06:57 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Thu, 8 Feb 2007 05:06:57 -0800 (PST)
Message-ID: <359a92830702080506q1db96239ob6a2878b5e5789fb@mail.gmail.com>
Date: Thu, 8 Feb 2007 08:06:57 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Strange Behaviour of BooleanQuery?
In-Reply-To: <45CAEE5D.3050905@informatik.uni-mannheim.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27869_10546324.1170940017568"
References: <45CAEE5D.3050905@informatik.uni-mannheim.de>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_27869_10546324.1170940017568
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I assume it's a typo, but your for loop wouldn't produce your example as
they'd all be the same field....

But that said, I suspect that your QueryParser is analyzing the tokens you
feed it differently than how they're included when you make your own
BooleanQuery.

So, here's what I'd do. Use Query.toString() for both your BooleanQuery and
the query produced by QueryParser and see what's different, if anything.
That'll certainly give you a clue. If your QueryParser uses, for instance,
the StandardAnalyzer, it'll lowercase, remove most punctuation, etc, which
you wouldn't get with your manually constructed BooleanQuery.

And, of course, get Luke if you haven't gotten a copy already to examine
your index and see the effects of using various analyzers on a query.

Hope this helps
Erick

On 2/8/07, Oliver Hummel <hummel@informatik.uni-mannheim.de> wrote:
>
> Hi @all,
>
> I'm a little confused about the behaviour of BooleanQuery. I have a custom
> parser that analyzes some text and constrcuts an "ANDed" BooleanQuery.
> toString
> delivers something like this:
>
>   (+field1:term1 +field2:term2)
>
> Looks pretty normal to me, but the problem is it delivers no results
> (although
> there are matching ones of course). What makes it even more confusing is
> the
> fact that when I take the above query and use it with the QueryParser it
> works
> and delivers the expected results...
>
> Any ideas? Perhaps anyone who is able to reproduce it? Am I doing
> something
> wrong or is there a bug?
>
> Here is how I produce the BooleanQuery:
>
> BooleanQuery bq = new BooleanQuery();
> for (iterate over terms) {
>    t = new Term(field, term);
>    bq.add(new TermQuery(t), BooleanClause.Occur.MUST);
> }
>
> Any help appreciated, thanks in advance!
>
>   Oliver
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_27869_10546324.1170940017568--

From java-user-return-25993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 13:29:33 2007
Return-Path: <java-user-return-25993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81454 invoked from network); 8 Feb 2007 13:29:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 13:29:32 -0000
Received: (qmail 26313 invoked by uid 500); 8 Feb 2007 13:29:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26025 invoked by uid 500); 8 Feb 2007 13:29:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26014 invoked by uid 99); 8 Feb 2007 13:29:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 05:29:32 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_FONT_BIG,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 86.111.223.190 as permitted sender)
Received: from [86.111.223.190] (HELO cluster-j.mailcontrol.com) (86.111.223.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 05:29:18 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly24j.srv.mailcontrol.com (MailControl) with SMTP id l18DSnG2022257
	for <java-user@lucene.apache.org>; Thu, 8 Feb 2007 13:28:49 GMT
Received: From SGBD012103.wsatkins.com ([10.202.26.17]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 1170941309137; Thu, 8 Feb 2007 13:28:29 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012103.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 8 Feb 2007 13:28:28 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C74B85.049A7A5C"
Subject: Counting and Categorisation
Date: Thu, 8 Feb 2007 13:28:27 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705B9B59F@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Counting and Categorisation
Thread-Index: AcdLhQQwMlZlOuluS/e93sOnmQdTYA==
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 08 Feb 2007 13:28:28.0826 (UTC) FILETIME=[04E5EFA0:01C74B85]
X-Scanned-By: MailControl A-06-00-00 (www.mailcontrol.com) on 10.74.0.134
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C74B85.049A7A5C
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

This email is meant for Chris Hostetter and of course anyone else who
may know about this,

I wonder if I can ask you a question.  I have been reading of how you at
CNET have implemented categorisation and counting so that if i type
"Kodak Easyshare" in the reviews section you not only get a big list of
all documents about this but you also get a list of categories in which
"Kodak EasyShare" appears.  So for example it will say that there are
documents in the "Digital cameras" category which contain "Kodak
EasyShare" and also documents in "Peripherals" with that same query.
I'd like to do the same thing as this and I'm not sure I've fully
understood the explainations I've read so far.  I know you have
described using lots of bitsets to do this but I'm not too clear on the
details.

Let me explain what I want to do.  It is very simple.  I have a Lucene
index containing just 3 fields (I mean field in the sense that you can
use the fieldName:searchTerm query syntax to search for the value
searchTerm in fieldName).  The fields are "artist", "track" and "album".
What I want to do is if the user searches of the text "love" in the
track field they get a list of all the artists who have a track with
"love" in the title plus a list of all the albums with the word "love"
in the title.  Along with these album and artist names I want a count of
the number of songs in each category.  If the user clicks on one of
these categories then that result subset is returned.

At the moment I just return the full list of artists, albums and tracks
which I want as well.  What I've described above will be in a top bar
which will allow the user to refine their search.

What I'm asking then is for some specific information about how I can
perform the categorisation and counts.

Many thanks

Sachin



This email and any attached files are confidential and copyright protected.=
 If you are not the addressee, any dissemination of this communication is s=
trictly prohibited. Unless otherwise expressly agreed in writing, nothing s=
tated in this communication shall be legally binding.

The ultimate parent company of the Atkins Group is WS Atkins plc.  Register=
ed in England No. 1885586.  Registered Office Woodcote Grove, Ashley Road, =
Epsom, Surrey KT18 5BW.

Consider the environment. Please don't print this e-mail unless you really =
need to.=20

------_=_NextPart_001_01C74B85.049A7A5C--

From java-user-return-25994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 13:46:06 2007
Return-Path: <java-user-return-25994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87910 invoked from network); 8 Feb 2007 13:46:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 13:46:05 -0000
Received: (qmail 49621 invoked by uid 500); 8 Feb 2007 13:46:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49597 invoked by uid 500); 8 Feb 2007 13:46:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49586 invoked by uid 99); 8 Feb 2007 13:46:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 05:46:05 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_FONT_BIG,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 86.111.223.190 as permitted sender)
Received: from [86.111.223.190] (HELO cluster-j.mailcontrol.com) (86.111.223.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 05:45:54 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly22j.srv.mailcontrol.com (MailControl) with SMTP id l18DjQoQ026533
	for <java-user@lucene.apache.org>; Thu, 8 Feb 2007 13:45:26 GMT
Received: From SGBD012103.wsatkins.com ([10.202.26.17]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 1170942305943; Thu, 8 Feb 2007 13:45:05 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012103.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 8 Feb 2007 13:45:05 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C74B87.54FCDB24"
Subject: 'a', 's' and 't' don't index properly
Date: Thu, 8 Feb 2007 13:45:01 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705B9B615@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: 'a', 's' and 't' don't index properly
Thread-Index: AcdLhteA5xP+hLbhTayS0cd4e6VZfwAAGILg
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 08 Feb 2007 13:45:05.0623 (UTC) FILETIME=[57091670:01C74B87]
X-Scanned-By: MailControl A-06-00-00 (www.mailcontrol.com) on 10.74.0.132
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C74B87.54FCDB24
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

> Hello,
>=20
> I have a database of tracks, artists and albums and I'm indexing these
> 3 attributes plus also the first letter of the track thus (incidently
> I'm using dotlucene but the implementation of dotlucene is similar to
> the Java one):
>=20
>    Document Doc =3D new Document();
>    String Album =3D ...
>    String Artist =3D ...
>    String Track =3D ...
>    Doc.Add(Field.Text("album", Album));
>    Doc.Add(Field.Text("artist", Artist));
>    Doc.Add(Field.Text("track", Track));
>    Doc.Add(Field.Text("firstletter", Track.Substring(0,1)));
>=20
> Problem is I don't think certain first letters are being indexed
> properly or at all, either that or there is some problem elsewhere.  I
> have noticed that the letters 'a', 's' and 't' (there may be others)
> cause me problems.  I shall explain the problem I have.  When I search
> for the documents I perform a sorting operation on the firstletter
> field but where the firstletter was 'a', 's' or 't' the returned list
> does not contain those records in sorted order (all other records are
> sorted correctly).
>=20
> Here is my search command:
>=20
> Hits hits =3D searcher.Search(query, new Sort(new SortField[] { new
> SortField("firstletter", SortField.STRING)}));
>=20
> What I don't know is whether the fault lies in the indexing or in this
> or other code.  Does anyone know what could have happened.
>=20
> Thanks
>=20
> Sachin


This email and any attached files are confidential and copyright protected.=
 If you are not the addressee, any dissemination of this communication is s=
trictly prohibited. Unless otherwise expressly agreed in writing, nothing s=
tated in this communication shall be legally binding.

The ultimate parent company of the Atkins Group is WS Atkins plc.  Register=
ed in England No. 1885586.  Registered Office Woodcote Grove, Ashley Road, =
Epsom, Surrey KT18 5BW.

Consider the environment. Please don't print this e-mail unless you really =
need to.=20

------_=_NextPart_001_01C74B87.54FCDB24--

From java-user-return-25995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 13:48:10 2007
Return-Path: <java-user-return-25995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88497 invoked from network); 8 Feb 2007 13:48:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 13:48:10 -0000
Received: (qmail 55560 invoked by uid 500); 8 Feb 2007 13:48:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55262 invoked by uid 500); 8 Feb 2007 13:48:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55247 invoked by uid 99); 8 Feb 2007 13:48:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 05:48:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 05:47:59 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 05BB030EFC18; Thu,  8 Feb 2007 08:47:37 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id DAD9E30EFC16
	for <java-user@lucene.apache.org>; Thu,  8 Feb 2007 08:47:33 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705B9B59F@SGBLOW2101.wsatkins.com>
References: <BC1CFC544422CB4A934908E126A4742705B9B59F@SGBLOW2101.wsatkins.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A3257165-2BD9-4C2E-A200-167DCF7B0C18@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Counting and Categorisation
Date: Thu, 8 Feb 2007 08:47:30 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1


On Feb 8, 2007, at 8:28 AM, Kainth, Sachin wrote:

> This email is meant for Chris Hostetter and of course anyone else who
> may know about this,
>
> I wonder if I can ask you a question.  I have been reading of how  
> you at
> CNET have implemented categorisation and counting so that if i type
> "Kodak Easyshare" in the reviews section you not only get a big  
> list of
> all documents about this but you also get a list of categories in  
> which
> "Kodak EasyShare" appears.  So for example it will say that there are
> documents in the "Digital cameras" category which contain "Kodak
> EasyShare" and also documents in "Peripherals" with that same query.
> I'd like to do the same thing as this and I'm not sure I've fully
> understood the explainations I've read so far.  I know you have
> described using lots of bitsets to do this but I'm not too clear on  
> the
> details.
>
> Let me explain what I want to do.  It is very simple.  I have a Lucene
> index containing just 3 fields (I mean field in the sense that you can
> use the fieldName:searchTerm query syntax to search for the value
> searchTerm in fieldName).  The fields are "artist", "track" and  
> "album".
> What I want to do is if the user searches of the text "love" in the
> track field they get a list of all the artists who have a track with
> "love" in the title plus a list of all the albums with the word "love"
> in the title.  Along with these album and artist names I want a  
> count of
> the number of songs in each category.  If the user clicks on one of
> these categories then that result subset is returned.
>
> At the moment I just return the full list of artists, albums and  
> tracks
> which I want as well.  What I've described above will be in a top bar
> which will allow the user to refine their search.
>
> What I'm asking then is for some specific information about how I can
> perform the categorisation and counts.

There are two ways to go about this:

   1) Use Solr.

   2) If the number of unique artists and albums is reasonable  
enough, build BitSet's in memory into a Map.  When someone searches  
for "love" (and who doesn't?) get a BitSet of the matching documents  
(using a HitCollector, or QueryFilter) and intersect it with all the  
ones in the Map.  I use (but working on phasing things into a better  
fit with Solr and scalability) this same scheme on Collex at <http:// 
www.nines.org/collex> for all the facets on the right (though I do  
leverage some of Solr's goodies, my original implementation  
successfully used the BitSet-Map-in-memory scheme (now I use  
TermQuery's-in-memory, but leverage Solr's DocSet caching instead of  
BitSets).  Its very fast!   The cons to doing all this yourself is  
when things get bigger you gotta change how it works to scale, and  
Solr already has a lot of infrastructure in place for this eventuality.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 13:49:03 2007
Return-Path: <java-user-return-25996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88973 invoked from network); 8 Feb 2007 13:49:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 13:49:02 -0000
Received: (qmail 58908 invoked by uid 500); 8 Feb 2007 13:49:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58880 invoked by uid 500); 8 Feb 2007 13:49:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58862 invoked by uid 99); 8 Feb 2007 13:48:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 05:48:59 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [134.155.87.224] (HELO salsa.informatik.uni-mannheim.de) (134.155.87.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 05:48:49 -0800
Received: from [127.0.0.1] (lela.informatik.uni-mannheim.de [134.155.88.74])
	(authenticated bits=0)
	by salsa.informatik.uni-mannheim.de (8.13.8/8.13.7) with ESMTP id l18DmPM7018912
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Thu, 8 Feb 2007 14:48:25 +0100
Message-ID: <45CB2A85.5080802@informatik.uni-mannheim.de>
Date: Thu, 08 Feb 2007 14:49:57 +0100
From: Oliver Hummel <hummel@informatik.uni-mannheim.de>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Strange Behaviour of BooleanQuery?
References: <45CAEE5D.3050905@informatik.uni-mannheim.de> <359a92830702080506q1db96239ob6a2878b5e5789fb@mail.gmail.com>
In-Reply-To: <359a92830702080506q1db96239ob6a2878b5e5789fb@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: ClamAV version 0.88.6, clamav-milter version 0.88.6 on salsa.informatik.uni-mannheim.de
X-Virus-Status: Clean
X-Greylist: Sender succeeded SMTP AUTH authentication, not delayed by milter-greylist-2.0.2 (salsa.informatik.uni-mannheim.de [134.155.88.83]); Thu, 08 Feb 2007 14:48:25 +0100 (CET)
X-Virus-Checked: Checked by ClamAV on apache.org

Eric, thanks for your reply.

> I assume it's a typo, but your for loop wouldn't produce your example as
> they'd all be the same field....

Actually there are three loops that add it for different fields... :-)

> So, here's what I'd do. Use Query.toString() for both your BooleanQuery and
> the query produced by QueryParser and see what's different, if anything.
> That'll certainly give you a clue. If your QueryParser uses, for instance,
> the StandardAnalyzer, it'll lowercase, remove most punctuation, etc, which
> you wouldn't get with your manually constructed BooleanQuery.

It delivered exactly the same query.

Meanwhile I think I got the problem. It seems to be related with redeploying in
JBoss. Everytime I redeploy now without restarting the server it does not work
anymore...

Thanks!

  Oliver



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 13:54:10 2007
Return-Path: <java-user-return-25997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90759 invoked from network); 8 Feb 2007 13:54:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 13:54:09 -0000
Received: (qmail 66535 invoked by uid 500); 8 Feb 2007 13:54:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65754 invoked by uid 500); 8 Feb 2007 13:54:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65742 invoked by uid 99); 8 Feb 2007 13:54:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 05:54:08 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 05:53:58 -0800
Received: by ug-out-1314.google.com with SMTP id k40so485034ugc
        for <java-user@lucene.apache.org>; Thu, 08 Feb 2007 05:53:37 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Ocb1H06arBS9Nj2RqO8YrhmHNCc+I6JFDpI1qh5IXrljk8/COln4mJJX1H3oJlkZdcXUKCSAEUg+vdP3FF8cXlX3uP0Xd279yNOezlrU/jqYPgxnGT0CoVVvxbAeoLd34hFM9bzN0q+g0Xjzqjx/7vwZwcBjvje8QUs2axc/RLQ=
Received: by 10.82.163.13 with SMTP id l13mr2247776bue.1170942817143;
        Thu, 08 Feb 2007 05:53:37 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Thu, 8 Feb 2007 05:53:36 -0800 (PST)
Message-ID: <359a92830702080553ofbb2f2cld9878df2d25e33b@mail.gmail.com>
Date: Thu, 8 Feb 2007 08:53:36 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: 'a', 's' and 't' don't index properly
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705B9B615@SGBLOW2101.wsatkins.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28433_24524516.1170942816964"
References: <BC1CFC544422CB4A934908E126A4742705B9B615@SGBLOW2101.wsatkins.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_28433_24524516.1170942816964
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This really should be posted on the dotlucene list, but....

Your indexing analyzer is probably removing them. For instance,
StandardAnalyzer uses a default set of stop words, and a, s, and t are
definitely among them. You need to use a different analyzer than you are
using.

These will also be removed from queries if you use QueryParser with one of
several analyzers that remove stop words.

StandardAnalyzer, for instance, also lower-cases tokens, removes most
puncutation, etc, so take some care to understand the analyzers and what
they do.

Oh, and get a copy of Luke if you haven't already. It'll let you examine
your index, see the results of using various analyzers etc.

Best
Erick

On 2/8/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
>
> > Hello,
> >
> > I have a database of tracks, artists and albums and I'm indexing these
> > 3 attributes plus also the first letter of the track thus (incidently
> > I'm using dotlucene but the implementation of dotlucene is similar to
> > the Java one):
> >
> >    Document Doc = new Document();
> >    String Album = ...
> >    String Artist = ...
> >    String Track = ...
> >    Doc.Add(Field.Text("album", Album));
> >    Doc.Add(Field.Text("artist", Artist));
> >    Doc.Add(Field.Text("track", Track));
> >    Doc.Add(Field.Text("firstletter", Track.Substring(0,1)));
> >
> > Problem is I don't think certain first letters are being indexed
> > properly or at all, either that or there is some problem elsewhere.  I
> > have noticed that the letters 'a', 's' and 't' (there may be others)
> > cause me problems.  I shall explain the problem I have.  When I search
> > for the documents I perform a sorting operation on the firstletter
> > field but where the firstletter was 'a', 's' or 't' the returned list
> > does not contain those records in sorted order (all other records are
> > sorted correctly).
> >
> > Here is my search command:
> >
> > Hits hits = searcher.Search(query, new Sort(new SortField[] { new
> > SortField("firstletter", SortField.STRING)}));
> >
> > What I don't know is whether the fault lies in the indexing or in this
> > or other code.  Does anyone know what could have happened.
> >
> > Thanks
> >
> > Sachin
>
>
> This email and any attached files are confidential and copyright
> protected. If you are not the addressee, any dissemination of this
> communication is strictly prohibited. Unless otherwise expressly agreed in
> writing, nothing stated in this communication shall be legally binding.
>
> The ultimate parent company of the Atkins Group is WS Atkins
> plc.  Registered in England No. 1885586.  Registered Office Woodcote Grove,
> Ashley Road, Epsom, Surrey KT18 5BW.
>
> Consider the environment. Please don't print this e-mail unless you really
> need to.
>

------=_Part_28433_24524516.1170942816964--

From java-user-return-25998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 13:56:31 2007
Return-Path: <java-user-return-25998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91544 invoked from network); 8 Feb 2007 13:56:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 13:56:31 -0000
Received: (qmail 71893 invoked by uid 500); 8 Feb 2007 13:56:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71866 invoked by uid 500); 8 Feb 2007 13:56:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71855 invoked by uid 99); 8 Feb 2007 13:56:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 05:56:30 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 86.111.223.190 as permitted sender)
Received: from [86.111.223.190] (HELO cluster-j.mailcontrol.com) (86.111.223.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 05:56:15 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly10j.srv.mailcontrol.com (MailControl) with SMTP id l18DtmmV025518
	for <java-user@lucene.apache.org>; Thu, 8 Feb 2007 13:55:48 GMT
Received: From SGBD012103.wsatkins.com ([10.202.26.17]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 1170942928491; Thu, 8 Feb 2007 13:55:28 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012103.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 8 Feb 2007 13:55:28 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Counting and Categorisation
Date: Thu, 8 Feb 2007 13:55:26 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705B9B65F@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Counting and Categorisation
Thread-Index: AcdLh8/kDzMhnErvSyOpcNguxApFXAAAK9mQ
References: <BC1CFC544422CB4A934908E126A4742705B9B59F@SGBLOW2101.wsatkins.com> <A3257165-2BD9-4C2E-A200-167DCF7B0C18@ehatchersolutions.com>
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 08 Feb 2007 13:55:28.0170 (UTC) FILETIME=[CA1A38A0:01C74B88]
X-Scanned-By: MailControl A-07-06-80 (www.mailcontrol.com) on 10.74.0.120
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Erik,=20

Thanks for the reply.  Since writing this I have in fact now implemented
the BitSet version and it works quite successfully.  However, I have now
found out that we will be dealing with millions of records and that for
this reason we can not use such a solution.  Can you tell me what solr
is as it seems to be more suited to my application?

Thanks

Sachin

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
Sent: 08 February 2007 13:48
To: java-user@lucene.apache.org
Subject: Re: Counting and Categorisation


On Feb 8, 2007, at 8:28 AM, Kainth, Sachin wrote:

> This email is meant for Chris Hostetter and of course anyone else who=20
> may know about this,
>
> I wonder if I can ask you a question.  I have been reading of how you=20
> at CNET have implemented categorisation and counting so that if i type

> "Kodak Easyshare" in the reviews section you not only get a big list=20
> of all documents about this but you also get a list of categories in=20
> which "Kodak EasyShare" appears.  So for example it will say that=20
> there are documents in the "Digital cameras" category which contain=20
> "Kodak EasyShare" and also documents in "Peripherals" with that same=20
> query.
> I'd like to do the same thing as this and I'm not sure I've fully=20
> understood the explainations I've read so far.  I know you have=20
> described using lots of bitsets to do this but I'm not too clear on=20
> the details.
>
> Let me explain what I want to do.  It is very simple.  I have a Lucene

> index containing just 3 fields (I mean field in the sense that you can

> use the fieldName:searchTerm query syntax to search for the value=20
> searchTerm in fieldName).  The fields are "artist", "track" and=20
> "album".
> What I want to do is if the user searches of the text "love" in the=20
> track field they get a list of all the artists who have a track with=20
> "love" in the title plus a list of all the albums with the word "love"
> in the title.  Along with these album and artist names I want a count=20
> of the number of songs in each category.  If the user clicks on one of

> these categories then that result subset is returned.
>
> At the moment I just return the full list of artists, albums and=20
> tracks which I want as well.  What I've described above will be in a=20
> top bar which will allow the user to refine their search.
>
> What I'm asking then is for some specific information about how I can=20
> perform the categorisation and counts.

There are two ways to go about this:

   1) Use Solr.

   2) If the number of unique artists and albums is reasonable enough,
build BitSet's in memory into a Map.  When someone searches for "love"
(and who doesn't?) get a BitSet of the matching documents (using a
HitCollector, or QueryFilter) and intersect it with all the ones in the
Map.  I use (but working on phasing things into a better fit with Solr
and scalability) this same scheme on Collex at <http://
www.nines.org/collex> for all the facets on the right (though I do
leverage some of Solr's goodies, my original implementation successfully
used the BitSet-Map-in-memory scheme (now I use TermQuery's-in-memory,
but leverage Solr's DocSet caching instead of=20=20
BitSets).  Its very fast!   The cons to doing all this yourself is=20=20
when things get bigger you gotta change how it works to scale, and Solr
already has a lot of infrastructure in place for this eventuality.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



This message has been scanned for viruses by MailControl - (see
http://bluepages.wsatkins.co.uk/?4318150)


This email and any attached files are confidential and copyright protected.=
 If you are not the addressee, any dissemination of this communication is s=
trictly prohibited. Unless otherwise expressly agreed in writing, nothing s=
tated in this communication shall be legally binding.

The ultimate parent company of the Atkins Group is WS Atkins plc.  Register=
ed in England No. 1885586.  Registered Office Woodcote Grove, Ashley Road, =
Epsom, Surrey KT18 5BW.

Consider the environment. Please don't print this e-mail unless you really =
need to.=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 14:00:54 2007
Return-Path: <java-user-return-25999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93066 invoked from network); 8 Feb 2007 14:00:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 14:00:53 -0000
Received: (qmail 83441 invoked by uid 500); 8 Feb 2007 14:00:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83406 invoked by uid 500); 8 Feb 2007 14:00:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83395 invoked by uid 99); 8 Feb 2007 14:00:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 06:00:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 86.111.223.190 as permitted sender)
Received: from [86.111.223.190] (HELO cluster-j.mailcontrol.com) (86.111.223.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 06:00:39 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly29j.srv.mailcontrol.com (MailControl) with SMTP id l18E0Cd0010634
	for <java-user@lucene.apache.org>; Thu, 8 Feb 2007 14:00:13 GMT
Received: From SGBD012103.wsatkins.com ([10.202.26.17]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 1170943196935; Thu, 8 Feb 2007 13:59:56 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012103.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 8 Feb 2007 13:59:56 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: 'a', 's' and 't' don't index properly
Date: Thu, 8 Feb 2007 13:59:55 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705B9B683@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: 'a', 's' and 't' don't index properly
Thread-Index: AcdLiLQnTHOBiYi/QfaF/Ev/z6dyDAAAKNcg
References: <BC1CFC544422CB4A934908E126A4742705B9B615@SGBLOW2101.wsatkins.com> <359a92830702080553ofbb2f2cld9878df2d25e33b@mail.gmail.com>
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 08 Feb 2007 13:59:56.0607 (UTC) FILETIME=[6A1A74F0:01C74B89]
X-Scanned-By: MailControl A-06-00-00 (www.mailcontrol.com) on 10.74.0.139
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Erik,

Do you know of an analyzer which doesn't remove the characters 'a', 's'
and 't'.

Sachin=20

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: 08 February 2007 13:54
To: java-user@lucene.apache.org
Subject: Re: 'a', 's' and 't' don't index properly

This really should be posted on the dotlucene list, but....

Your indexing analyzer is probably removing them. For instance,
StandardAnalyzer uses a default set of stop words, and a, s, and t are
definitely among them. You need to use a different analyzer than you are
using.

These will also be removed from queries if you use QueryParser with one
of several analyzers that remove stop words.

StandardAnalyzer, for instance, also lower-cases tokens, removes most
puncutation, etc, so take some care to understand the analyzers and what
they do.

Oh, and get a copy of Luke if you haven't already. It'll let you examine
your index, see the results of using various analyzers etc.

Best
Erick

On 2/8/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
>
> > Hello,
> >
> > I have a database of tracks, artists and albums and I'm indexing=20
> > these
> > 3 attributes plus also the first letter of the track thus=20
> > (incidently I'm using dotlucene but the implementation of dotlucene=20
> > is similar to the Java one):
> >
> >    Document Doc =3D new Document();
> >    String Album =3D ...
> >    String Artist =3D ...
> >    String Track =3D ...
> >    Doc.Add(Field.Text("album", Album));
> >    Doc.Add(Field.Text("artist", Artist));
> >    Doc.Add(Field.Text("track", Track));
> >    Doc.Add(Field.Text("firstletter", Track.Substring(0,1)));
> >
> > Problem is I don't think certain first letters are being indexed=20
> > properly or at all, either that or there is some problem elsewhere.

> > I have noticed that the letters 'a', 's' and 't' (there may be=20
> > others) cause me problems.  I shall explain the problem I have. =20
> > When I search for the documents I perform a sorting operation on the

> > firstletter field but where the firstletter was 'a', 's' or 't' the=20
> > returned list does not contain those records in sorted order (all=20
> > other records are sorted correctly).
> >
> > Here is my search command:
> >
> > Hits hits =3D searcher.Search(query, new Sort(new SortField[] { new=20
> > SortField("firstletter", SortField.STRING)}));
> >
> > What I don't know is whether the fault lies in the indexing or in=20
> > this or other code.  Does anyone know what could have happened.
> >
> > Thanks
> >
> > Sachin
>
>
> This email and any attached files are confidential and copyright=20
> protected. If you are not the addressee, any dissemination of this=20
> communication is strictly prohibited. Unless otherwise expressly=20
> agreed in writing, nothing stated in this communication shall be
legally binding.
>
> The ultimate parent company of the Atkins Group is WS Atkins plc. =20
> Registered in England No. 1885586.  Registered Office Woodcote Grove,=20
> Ashley Road, Epsom, Surrey KT18 5BW.
>
> Consider the environment. Please don't print this e-mail unless you=20
> really need to.
>


This message has been scanned for viruses by MailControl - (see
http://bluepages.wsatkins.co.uk/?4318150)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 14:04:20 2007
Return-Path: <java-user-return-26000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94102 invoked from network); 8 Feb 2007 14:04:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 14:04:18 -0000
Received: (qmail 94322 invoked by uid 500); 8 Feb 2007 14:04:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94294 invoked by uid 500); 8 Feb 2007 14:04:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94281 invoked by uid 99); 8 Feb 2007 14:04:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 06:04:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 06:04:04 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id AFCBF30EFC18; Thu,  8 Feb 2007 09:03:42 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id E9D4930EFC16
	for <java-user@lucene.apache.org>; Thu,  8 Feb 2007 09:03:39 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705B9B65F@SGBLOW2101.wsatkins.com>
References: <BC1CFC544422CB4A934908E126A4742705B9B59F@SGBLOW2101.wsatkins.com> <A3257165-2BD9-4C2E-A200-167DCF7B0C18@ehatchersolutions.com> <BC1CFC544422CB4A934908E126A4742705B9B65F@SGBLOW2101.wsatkins.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E6304506-F792-4BC5-8D05-1A02F2AA5CF1@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Counting and Categorisation
Date: Thu, 8 Feb 2007 09:03:35 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1


On Feb 8, 2007, at 8:55 AM, Kainth, Sachin wrote:
> Thanks for the reply.  Since writing this I have in fact now  
> implemented
> the BitSet version and it works quite successfully.  However, I  
> have now
> found out that we will be dealing with millions of records and that  
> for
> this reason we can not use such a solution.  Can you tell me what solr
> is as it seems to be more suited to my application?

Millions of records is fine.  The main breaking point of the BitSet- 
in-Map scheme is can you cache all the BitSets for the unique facet  
terms (album/artist).  And don't despair yet... if you want to dabble  
with Solr's DocSet infrastructure instead of BitSets you can reduce  
your memory consumption dramatically I'm sure - without having to  
convert to using Solr as a web service.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 15:26:06 2007
Return-Path: <java-user-return-26001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28152 invoked from network); 8 Feb 2007 15:26:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 15:26:06 -0000
Received: (qmail 77005 invoked by uid 500); 8 Feb 2007 15:26:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76983 invoked by uid 500); 8 Feb 2007 15:26:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76972 invoked by uid 99); 8 Feb 2007 15:26:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 07:26:05 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 07:25:56 -0800
Received: by nf-out-0910.google.com with SMTP id i2so779136nfe
        for <java-user@lucene.apache.org>; Thu, 08 Feb 2007 07:25:35 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Z+L3MRg6XNafwWp3X2l/R771si1mARDJTDnfOUwVHsKsjH9ZYRvbaOzGwMjEOwSpKtKjNtTiXxoAtZZLa4Xu+6S4ZTaYYXLHhTwK4NNF+i7Rnr7AhOwpI7NJcR5+CknSRILbgxyTzGQ0h8eW38p692lMGzpmi2FtH6H4G0MpUwY=
Received: by 10.82.177.3 with SMTP id z3mr5161403bue.1170948334861;
        Thu, 08 Feb 2007 07:25:34 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Thu, 8 Feb 2007 07:25:34 -0800 (PST)
Message-ID: <359a92830702080725q58e2b268ie461a2008aaf0e4b@mail.gmail.com>
Date: Thu, 8 Feb 2007 10:25:34 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: 'a', 's' and 't' don't index properly
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705B9B683@SGBLOW2101.wsatkins.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30168_3467085.1170948334825"
References: <BC1CFC544422CB4A934908E126A4742705B9B615@SGBLOW2101.wsatkins.com>
	 <359a92830702080553ofbb2f2cld9878df2d25e33b@mail.gmail.com>
	 <BC1CFC544422CB4A934908E126A4742705B9B683@SGBLOW2101.wsatkins.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_30168_3467085.1170948334825
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>From the javadoc...

public final class *SimpleAnalyzer*extends
Analyzer<file:///C:/lucene-2.0.0/docs/api/org/apache/lucene/analysis/Analyzer.html>

An Analyzer that filters LetterTokenizer with LowerCaseFilter.


On 2/8/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
>
> Thanks Erik,
>
> Do you know of an analyzer which doesn't remove the characters 'a', 's'
> and 't'.
>
> Sachin
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: 08 February 2007 13:54
> To: java-user@lucene.apache.org
> Subject: Re: 'a', 's' and 't' don't index properly
>
> This really should be posted on the dotlucene list, but....
>
> Your indexing analyzer is probably removing them. For instance,
> StandardAnalyzer uses a default set of stop words, and a, s, and t are
> definitely among them. You need to use a different analyzer than you are
> using.
>
> These will also be removed from queries if you use QueryParser with one
> of several analyzers that remove stop words.
>
> StandardAnalyzer, for instance, also lower-cases tokens, removes most
> puncutation, etc, so take some care to understand the analyzers and what
> they do.
>
> Oh, and get a copy of Luke if you haven't already. It'll let you examine
> your index, see the results of using various analyzers etc.
>
> Best
> Erick
>
> On 2/8/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
> >
> > > Hello,
> > >
> > > I have a database of tracks, artists and albums and I'm indexing
> > > these
> > > 3 attributes plus also the first letter of the track thus
> > > (incidently I'm using dotlucene but the implementation of dotlucene
> > > is similar to the Java one):
> > >
> > >    Document Doc = new Document();
> > >    String Album = ...
> > >    String Artist = ...
> > >    String Track = ...
> > >    Doc.Add(Field.Text("album", Album));
> > >    Doc.Add(Field.Text("artist", Artist));
> > >    Doc.Add(Field.Text("track", Track));
> > >    Doc.Add(Field.Text("firstletter", Track.Substring(0,1)));
> > >
> > > Problem is I don't think certain first letters are being indexed
> > > properly or at all, either that or there is some problem elsewhere.
>
> > > I have noticed that the letters 'a', 's' and 't' (there may be
> > > others) cause me problems.  I shall explain the problem I have.
> > > When I search for the documents I perform a sorting operation on the
>
> > > firstletter field but where the firstletter was 'a', 's' or 't' the
> > > returned list does not contain those records in sorted order (all
> > > other records are sorted correctly).
> > >
> > > Here is my search command:
> > >
> > > Hits hits = searcher.Search(query, new Sort(new SortField[] { new
> > > SortField("firstletter", SortField.STRING)}));
> > >
> > > What I don't know is whether the fault lies in the indexing or in
> > > this or other code.  Does anyone know what could have happened.
> > >
> > > Thanks
> > >
> > > Sachin
> >
> >
> > This email and any attached files are confidential and copyright
> > protected. If you are not the addressee, any dissemination of this
> > communication is strictly prohibited. Unless otherwise expressly
> > agreed in writing, nothing stated in this communication shall be
> legally binding.
> >
> > The ultimate parent company of the Atkins Group is WS Atkins plc.
> > Registered in England No. 1885586.  Registered Office Woodcote Grove,
> > Ashley Road, Epsom, Surrey KT18 5BW.
> >
> > Consider the environment. Please don't print this e-mail unless you
> > really need to.
> >
>
>
> This message has been scanned for viruses by MailControl - (see
> http://bluepages.wsatkins.co.uk/?4318150)
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_30168_3467085.1170948334825--

From java-user-return-26002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 15:29:38 2007
Return-Path: <java-user-return-26002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30150 invoked from network); 8 Feb 2007 15:29:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 15:29:36 -0000
Received: (qmail 89152 invoked by uid 500); 8 Feb 2007 15:29:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88973 invoked by uid 500); 8 Feb 2007 15:29:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88962 invoked by uid 99); 8 Feb 2007 15:29:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 07:29:35 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 86.111.223.190 as permitted sender)
Received: from [86.111.223.190] (HELO cluster-j.mailcontrol.com) (86.111.223.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 07:29:22 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly25j.srv.mailcontrol.com (MailControl) with SMTP id l18FSndn011765
	for <java-user@lucene.apache.org>; Thu, 8 Feb 2007 15:28:53 GMT
Received: From SGBD012103.wsatkins.com ([10.202.26.17]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 1170948499274; Thu, 8 Feb 2007 15:28:19 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012103.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 8 Feb 2007 15:28:16 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: 'a', 's' and 't' don't index properly
Date: Thu, 8 Feb 2007 15:28:12 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705B9B9B1@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: 'a', 's' and 't' don't index properly
Thread-Index: AcdLlYE4xzOE2D+9R3aLlD/ZsoXiMAAAB26Q
References: <BC1CFC544422CB4A934908E126A4742705B9B615@SGBLOW2101.wsatkins.com> <359a92830702080553ofbb2f2cld9878df2d25e33b@mail.gmail.com> <BC1CFC544422CB4A934908E126A4742705B9B683@SGBLOW2101.wsatkins.com> <359a92830702080725q58e2b268ie461a2008aaf0e4b@mail.gmail.com>
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 08 Feb 2007 15:28:16.0326 (UTC) FILETIME=[C0FB6660:01C74B95]
X-Scanned-By: MailControl A-06-00-00 (www.mailcontrol.com) on 10.74.0.135
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Erik,

Is there a .NET version of Solr?

Cheers

Sachin=20

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: 08 February 2007 15:26
To: java-user@lucene.apache.org
Subject: Re: 'a', 's' and 't' don't index properly

>From the javadoc...

public final class *SimpleAnalyzer*extends
Analyzer<file:///C:/lucene-2.0.0/docs/api/org/apache/lucene/analysis/Ana
lyzer.html>

An Analyzer that filters LetterTokenizer with LowerCaseFilter.


On 2/8/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
>
> Thanks Erik,
>
> Do you know of an analyzer which doesn't remove the characters 'a',
's'
> and 't'.
>
> Sachin
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: 08 February 2007 13:54
> To: java-user@lucene.apache.org
> Subject: Re: 'a', 's' and 't' don't index properly
>
> This really should be posted on the dotlucene list, but....
>
> Your indexing analyzer is probably removing them. For instance,=20
> StandardAnalyzer uses a default set of stop words, and a, s, and t are

> definitely among them. You need to use a different analyzer than you=20
> are using.
>
> These will also be removed from queries if you use QueryParser with=20
> one of several analyzers that remove stop words.
>
> StandardAnalyzer, for instance, also lower-cases tokens, removes most=20
> puncutation, etc, so take some care to understand the analyzers and=20
> what they do.
>
> Oh, and get a copy of Luke if you haven't already. It'll let you=20
> examine your index, see the results of using various analyzers etc.
>
> Best
> Erick
>
> On 2/8/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
> >
> > > Hello,
> > >
> > > I have a database of tracks, artists and albums and I'm indexing=20
> > > these
> > > 3 attributes plus also the first letter of the track thus=20
> > > (incidently I'm using dotlucene but the implementation of=20
> > > dotlucene is similar to the Java one):
> > >
> > >    Document Doc =3D new Document();
> > >    String Album =3D ...
> > >    String Artist =3D ...
> > >    String Track =3D ...
> > >    Doc.Add(Field.Text("album", Album));
> > >    Doc.Add(Field.Text("artist", Artist));
> > >    Doc.Add(Field.Text("track", Track));
> > >    Doc.Add(Field.Text("firstletter", Track.Substring(0,1)));
> > >
> > > Problem is I don't think certain first letters are being indexed=20
> > > properly or at all, either that or there is some problem
elsewhere.
>
> > > I have noticed that the letters 'a', 's' and 't' (there may be
> > > others) cause me problems.  I shall explain the problem I have.
> > > When I search for the documents I perform a sorting operation on=20
> > > the
>
> > > firstletter field but where the firstletter was 'a', 's' or 't'=20
> > > the returned list does not contain those records in sorted order=20
> > > (all other records are sorted correctly).
> > >
> > > Here is my search command:
> > >
> > > Hits hits =3D searcher.Search(query, new Sort(new SortField[] { =
new=20
> > > SortField("firstletter", SortField.STRING)}));
> > >
> > > What I don't know is whether the fault lies in the indexing or in=20
> > > this or other code.  Does anyone know what could have happened.
> > >
> > > Thanks
> > >
> > > Sachin
> >
> >
> > This email and any attached files are confidential and copyright=20
> > protected. If you are not the addressee, any dissemination of this=20
> > communication is strictly prohibited. Unless otherwise expressly=20
> > agreed in writing, nothing stated in this communication shall be
> legally binding.
> >
> > The ultimate parent company of the Atkins Group is WS Atkins plc.
> > Registered in England No. 1885586.  Registered Office Woodcote=20
> > Grove, Ashley Road, Epsom, Surrey KT18 5BW.
> >
> > Consider the environment. Please don't print this e-mail unless you=20
> > really need to.
> >
>
>
> This message has been scanned for viruses by MailControl - (see
> http://bluepages.wsatkins.co.uk/?4318150)
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 16:16:40 2007
Return-Path: <java-user-return-26003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51211 invoked from network); 8 Feb 2007 16:16:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 16:16:39 -0000
Received: (qmail 25370 invoked by uid 500); 8 Feb 2007 16:16:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25347 invoked by uid 500); 8 Feb 2007 16:16:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25336 invoked by uid 99); 8 Feb 2007 16:16:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 08:16:39 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=MSGID_FROM_MTA_HEADER
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.170.99.246] (HELO mail.rhoderunner.com) (216.170.99.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 08:16:30 -0800
Message-ID: <13617777.381170951367351.JavaMail.root@dell.rhoderunner.com>
MIME-Version: 1.0
X-UserIsAuth: true
Received: from 192.168.15.110 ([192.168.15.110])
          by mail.rhoderunner.com (JAMES SMTP Server 2.3.0rc2) with SMTP ID 111
          for <java-user@lucene.apache.org>;
          Thu, 8 Feb 2007 11:16:07 -0500 (EST)
Date: Thu, 08 Feb 2007 11:16:01 -0500
From: Phillip Rhodes <spamsucks@rhoderunner.com>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: en-us, en
To:  java-user@lucene.apache.org
Subject: Re: Increase performance using Pool of IndexSearchers?
References: <10039155.231170866547848.JavaMail.root@dell.rhoderunner.com> <34b8543c0702072140t1c396ffcl6160d7c176244e4@mail.gmail.com>
In-Reply-To: <34b8543c0702072140t1c396ffcl6160d7c176244e4@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Mohammad,
According to the responses on this thread, there appears to be no 
performance benefit to using multiple instances of IndexSearcher

Unless I hear otherwise, there is no point in creating such a pool.
Phillip

Mohammad Norouzi wrote:

> Hi
> would you tell how we can create a searcher pool. I get interested in 
> your
> idea.
>
> thanks
>
> On 2/7/07, spamsucks <spamsucks@rhoderunner.com> wrote:
>
>>
>> I currently am sharing my IndexSearcher across multiple requests as a
>> static
>> object.
>>
>> While I understand that the IndexSearcher is threadsafe, this does not
>> necessarily mean that it's multi-threaded capable.  I was wondering if
>> there
>> is any thread blocking going on between requests?
>>
>> Would it improve performance to create a pool of IndexSearchers?
>>
>> Thanks!
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 17:26:10 2007
Return-Path: <java-user-return-26004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82024 invoked from network); 8 Feb 2007 17:26:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 17:26:08 -0000
Received: (qmail 78012 invoked by uid 500); 8 Feb 2007 17:26:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77983 invoked by uid 500); 8 Feb 2007 17:26:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77971 invoked by uid 99); 8 Feb 2007 17:26:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 09:26:08 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_FONT_BIG,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 217.69.20.190 as permitted sender)
Received: from [217.69.20.190] (HELO cluster-d.mailcontrol.com) (217.69.20.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 09:25:53 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly51d.srv.mailcontrol.com (MailControl) with SMTP id l18HPJ3K027313
	for <java-user@lucene.apache.org>; Thu, 8 Feb 2007 17:25:29 GMT
Received: From SGBD012103.wsatkins.com ([10.202.26.17]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 1170955499391; Thu, 8 Feb 2007 17:24:59 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012103.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 8 Feb 2007 17:24:58 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C74BA6.0E117D8E"
Subject: Analyzers
Date: Thu, 8 Feb 2007 17:24:55 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705B9BD9E@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Analyzers
Thread-Index: AcdLpgzbQ48vyqJZRlicBH1/WC6lfA==
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 08 Feb 2007 17:24:58.0873 (UTC) FILETIME=[0ED34690:01C74BA6]
X-Scanned-By: MailControl A-07-06-80 (www.mailcontrol.com) on 10.68.0.161
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C74BA6.0E117D8E
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi all,

I wanted to know if it is possible to store some fields in an index with
one analyzers and other fields with another analyzer?

Cheers

Sachin


This email and any attached files are confidential and copyright protected.=
 If you are not the addressee, any dissemination of this communication is s=
trictly prohibited. Unless otherwise expressly agreed in writing, nothing s=
tated in this communication shall be legally binding.

The ultimate parent company of the Atkins Group is WS Atkins plc.  Register=
ed in England No. 1885586.  Registered Office Woodcote Grove, Ashley Road, =
Epsom, Surrey KT18 5BW.

Consider the environment. Please don't print this e-mail unless you really =
need to.=20

------_=_NextPart_001_01C74BA6.0E117D8E--

From java-user-return-26005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 17:31:53 2007
Return-Path: <java-user-return-26005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84766 invoked from network); 8 Feb 2007 17:31:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 17:31:52 -0000
Received: (qmail 87133 invoked by uid 500); 8 Feb 2007 17:31:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87102 invoked by uid 500); 8 Feb 2007 17:31:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87091 invoked by uid 99); 8 Feb 2007 17:31:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 09:31:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [132.208.250.6] (HELO anis.telecom.uqam.ca) (132.208.250.6)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 09:31:41 -0800
Received: from anis.telecom.uqam.ca (anis.telecom.uqam.ca [132.208.250.6])
	by sortant.uqam.ca (8.13.8/8.12.1) with SMTP id l18HP1dW029041
	for <java-user@lucene.apache.org>; Thu, 8 Feb 2007 12:25:07 -0500 (EST)
Received: from antivirus.uqam.ca ([127.0.0.1])
 by anis.telecom.uqam.ca (SAVSMTP 3.1.1.32) with SMTP id M2007020812250730383
 for <java-user@lucene.apache.org>; Thu, 08 Feb 2007 12:25:07 -0500
Received: from courriel2.sitel.uqam.ca (courriel2.sitel.uqam.ca [132.208.250.43])
	by intrant.uqam.ca (8.13.8/8.12.2/uqam-filtres) with ESMTP id l18HM5Ns010333
	for <java-user@lucene.apache.org>; Thu, 8 Feb 2007 12:22:06 -0500 (EST)
X-UQAM-Spam-Filter: Filtre-Uqam re:  abuse@uqam.ca
Received: from courrier.uqam.ca ([127.0.0.1]) by courriel2.sitel.uqam.ca
 (Sun Java System Messaging Server 6.1 HotFix 0.11 (built Jan 28 2005))
 with ESMTP id <0JD500B0CMWSZZ30@courriel2.sitel.uqam.ca> for
 java-user@lucene.apache.org; Thu, 08 Feb 2007 12:22:04 -0500 (EST)
Received: from [206.47.141.21] by courriel2.sitel.uqam.ca (mshttpd); Thu,
 08 Feb 2007 12:22:04 -0500
Date: Thu, 08 Feb 2007 12:22:04 -0500
From: Xavier To <to.xavier@courrier.uqam.ca>
Subject: Re : Re: Re : Re: Question concerning Analyzers
To: java-user@lucene.apache.org
Message-id: <e97c54d4612c.45cb15ec@courrier.uqam.ca>
MIME-version: 1.0
X-Mailer: Sun Java(tm) System Messenger Express 6.1 HotFix 0.11 (built Jan 28
 2005)
Content-type: text/plain; charset=iso-8859-1
Content-language: fr
Content-transfer-encoding: quoted-printable
Content-disposition: inline
X-Accept-Language: fr
Priority: normal
X-Virus-Checked: Checked by ClamAV on apache.org

Hey !

I tried using WhitespaceAnalyzer during the search and it works=2E I ref=
actored the tokenizing process so it uses TokenStream instead of StringT=
okenizer and it works fine for one thing =3A the query =22this is a test=
=22 becomes =22thisisatest=22=2E I fixed it by adding a space after each=
 token except for the last one=2C but is there a clean way to do it =3F =
I=27m using WhitespaceTokenizer=2E

Thanks a bunch !

Xavier T=F4
Bacc=2E en Informatique et G=E9nie Logiciel
to=2Exavier=40courrier=2Euqam=2Eca
(450)434-8905

----- Message d=27origine -----
De=3A Erick Erickson =3Cerickerickson=40gmail=2Ecom=3E
Date=3A Mercredi=2C F=E9vrier 7=2C 2007 4=3A28 pm
Objet=3A Re=3A Re =3A Re=3A Question concerning Analyzers

=3E Then the analyzer you=27re using when parsing the query is stripping=
 =

=3E them=2E It
=3E must be different than the one you use when indexing somehow=2E At l=
east
=3E that=27s the only explanation I can imagine=2E=2E=2E=2E
=3E =

=3E Perhaps=2C somehow=2C you are using a default analyzer when you pars=
e a =

=3E query=3FOr you aren=27t specifying the field when you query and thus=
 a =

=3E default is
=3E used=3F Or you are using a PerFieldAnalyzerWrapper and dropping =

=3E through to the
=3E default=3F or =3F=3F=3F=3F
=3E =

=3E Just for yucks=2C I=27d try using WhitespaceAnalyzer on a query with=
 =

=3E somethingyou *know* exists in the index for a particular field and =

=3E work my way up to
=3E whatever your real problem is in small steps (since you can=27t post=
 =

=3E code=3CG=3E)=2E=2E=2E=2E=2E=2E
=3E =

=3E Best
=3E Erick
=3E =

=3E On 2/7/07=2C Xavier To =3Cto=2Exavier=40courrier=2Euqam=2Eca=3E wrot=
e=3A
=3E =3E
=3E =3E Thanks Erik and Erick=2C
=3E =3E
=3E =3E I guess my question was rather unclear=2C but you guys answered =
it =

=3E all the
=3E =3E same =3A it is impossible for an analyzer to index something and=
 =

=3E having the
=3E =3E same analyzer ignore the thing indexed during a search=2E
=3E =3E
=3E =3E If it makes everything clearer=2C during indexation=2C numbers  =
are =

=3E indexed=2C=3E whether or not they are accompanied by letters ( 2003 =
and =

=3E 4wd are both
=3E =3E indexed)=2E That=27s fine=2C since we want this=2E  The problem =
occurs =

=3E when I try to
=3E =3E search for them =3A They are ignored=2E I know they are indexed =

=3E because I ran
=3E =3E through the index using Luke=2E
=3E =3E
=3E =3E Any thoughts regarding this problem =3F
=3E =3E
=3E =3E Xavier T=F4
=3E =3E Bacc=2E en Informatique et G=E9nie Logiciel
=3E =3E to=2Exavier=40courrier=2Euqam=2Eca
=3E =3E (450)434-8905
=3E =3E
=3E =3E ----- Message d=27origine -----
=3E =3E De=3A Erik Hatcher =3Cerik=40ehatchersolutions=2Ecom=3E
=3E =3E Date=3A Mercredi=2C F=E9vrier 7=2C 2007 3=3A15 pm
=3E =3E Objet=3A Re=3A Question concerning Analyzers
=3E =3E
=3E =3E =3E There is no requirement that you use the same analyzer to =

=3E search as
=3E =3E =3E
=3E =3E =3E you used to index=2E  So=2C yes=2C you could certainly index=
 things and
=3E =3E =3E ignore them during a search=2E
=3E =3E =3E
=3E =3E =3E       Erik
=3E =3E =3E
=3E =3E =3E
=3E =3E =3E On Feb 7=2C 2007=2C at 2=3A10 PM=2C Xavier To wrote=3A
=3E =3E =3E
=3E =3E =3E =3E Hi=2C me again
=3E =3E =3E =3E
=3E =3E =3E =3E I=27m still stuck with my search engine=2C but something=
 popped =

=3E in my
=3E =3E =3E
=3E =3E =3E =3E head =3A Can an analyzer index something but ignore it d=
uring a
=3E =3E =3E =3E search =3F I=27m asking this because now that I=27ve bee=
n searching =

=3E for=3E =3E
=3E =3E =3E =3E an answer=2C I=27ve come to think that I should redo the=
 whole =

=3E search=3E =3E
=3E =3E =3E =3E engine=2C but I don=27t want to reproduce the same error=
 as we have
=3E =3E =3E =3E now=2E It would be stupid to accidentaly redo the same m=
istake=2E I
=3E =3E =3E =3E still haven=27t received news from my seniors about me p=
osting =

=3E code=3E =3E
=3E =3E =3E =3E and all=2E=2E=2E
=3E =3E =3E =3E
=3E =3E =3E =3E Xavier T=F4
=3E =3E =3E =3E Bacc=2E en Informatique et G=E9nie Logiciel
=3E =3E =3E =3E to=2Exavier=40courrier=2Euqam=2Eca
=3E =3E =3E =3E (450)434-8905
=3E =3E =3E =3E
=3E =3E =3E =3E
=3E =3E =3E =3E
=3E =3E =3E =3E --------------------------------------------------------=
------
=3E ----
=3E =3E =3E ---
=3E =3E =3E =3E To unsubscribe=2C e-mail=3A java-user-unsubscribe=40luce=
ne=2Eapache=2Eorg
=3E =3E =3E =3E For additional commands=2C e-mail=3A java-user-
=3E help=40lucene=2Eapache=2Eorg=3E =3E
=3E =3E =3E
=3E =3E =3E ------------------------------------------------------------=
----
=3E ----
=3E =3E =3E -
=3E =3E =3E To unsubscribe=2C e-mail=3A java-user-unsubscribe=40lucene=2E=
apache=2Eorg
=3E =3E =3E For additional commands=2C e-mail=3A java-user-help=40lucene=
=2Eapache=2Eorg
=3E =3E =3E
=3E =3E =3E
=3E =3E
=3E =3E
=3E =3E ----------------------------------------------------------------=
--
=3E ---
=3E =3E To unsubscribe=2C e-mail=3A java-user-unsubscribe=40lucene=2Eapa=
che=2Eorg
=3E =3E For additional commands=2C e-mail=3A java-user-help=40lucene=2Ea=
pache=2Eorg
=3E =3E
=3E =3E
=3E 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 17:34:21 2007
Return-Path: <java-user-return-26006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85283 invoked from network); 8 Feb 2007 17:34:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 17:34:20 -0000
Received: (qmail 94467 invoked by uid 500); 8 Feb 2007 17:34:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94215 invoked by uid 500); 8 Feb 2007 17:34:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94204 invoked by uid 99); 8 Feb 2007 17:34:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 09:34:20 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 09:34:11 -0800
Received: by nf-out-0910.google.com with SMTP id i2so810900nfe
        for <java-user@lucene.apache.org>; Thu, 08 Feb 2007 09:33:50 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cVVNl4RNK63hCyYBiFI07zNZPWfP3ntv/434GM11us1YYvYBa7P3el1vpBmC0078tqMjhX6zzb84aM9eAgk0VT08g1s9+jLwXRnJjkAoxCe/nOqARmTb5374I2bknrHeONsNoGIuMveGq6e7z1y0pnrbcQWY8XPAx57HC0PLBos=
Received: by 10.82.186.5 with SMTP id j5mr2245691buf.1170956027657;
        Thu, 08 Feb 2007 09:33:47 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Thu, 8 Feb 2007 09:33:47 -0800 (PST)
Message-ID: <359a92830702080933l64860a92sc4bce1f3ec0f9ac7@mail.gmail.com>
Date: Thu, 8 Feb 2007 12:33:47 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Analyzers
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705B9BD9E@SGBLOW2101.wsatkins.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_32859_1251316.1170956027153"
References: <BC1CFC544422CB4A934908E126A4742705B9BD9E@SGBLOW2101.wsatkins.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_32859_1251316.1170956027153
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Use PerFieldAnalyzerWrapper.

On 2/8/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
>
> Hi all,
>
> I wanted to know if it is possible to store some fields in an index with
> one analyzers and other fields with another analyzer?
>
> Cheers
>
> Sachin
>
>
> This email and any attached files are confidential and copyright
> protected. If you are not the addressee, any dissemination of this
> communication is strictly prohibited. Unless otherwise expressly agreed in
> writing, nothing stated in this communication shall be legally binding.
>
> The ultimate parent company of the Atkins Group is WS Atkins
> plc.  Registered in England No. 1885586.  Registered Office Woodcote Grove,
> Ashley Road, Epsom, Surrey KT18 5BW.
>
> Consider the environment. Please don't print this e-mail unless you really
> need to.
>

------=_Part_32859_1251316.1170956027153--

From java-user-return-26007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 17:35:22 2007
Return-Path: <java-user-return-26007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85592 invoked from network); 8 Feb 2007 17:35:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 17:35:21 -0000
Received: (qmail 98541 invoked by uid 500); 8 Feb 2007 17:35:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98506 invoked by uid 500); 8 Feb 2007 17:35:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98489 invoked by uid 99); 8 Feb 2007 17:35:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 09:35:21 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chris.lu@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 09:35:09 -0800
Received: by ug-out-1314.google.com with SMTP id k40so546230ugc
        for <java-user@lucene.apache.org>; Thu, 08 Feb 2007 09:34:48 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=IW0KDwO2x9EtV60/5wklADldSZNTmnBt86qJjdiLDHj1lqm8IjSHAQ3j5KNbJ56O6XsDcpSIBpjMsiksju+XnWZ/0tlCczLoMCIS3Z2OozocNvVzqjG+PSh1BOcqNyDVfpSt3iwx3lMeycat6e/JeFtql/DIdTCV1d/SwNKGKms=
Received: by 10.82.114.3 with SMTP id m3mr357251buc.1170956088378;
        Thu, 08 Feb 2007 09:34:48 -0800 (PST)
Received: by 10.82.166.7 with HTTP; Thu, 8 Feb 2007 09:34:48 -0800 (PST)
Message-ID: <6e3ae6310702080934k492715e0j427662bf00ee9760@mail.gmail.com>
Date: Thu, 8 Feb 2007 09:34:48 -0800
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Analyzers
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705B9BD9E@SGBLOW2101.wsatkins.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <BC1CFC544422CB4A934908E126A4742705B9BD9E@SGBLOW2101.wsatkins.com>
X-Virus-Checked: Checked by ClamAV on apache.org

This is totally possible.

-- 
Chris Lu
-------------------------
Instant Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com

On 2/8/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
> Hi all,
>
> I wanted to know if it is possible to store some fields in an index with
> one analyzers and other fields with another analyzer?
>
> Cheers
>
> Sachin
>
>
> This email and any attached files are confidential and copyright protected. If you are not the addressee, any dissemination of this communication is strictly prohibited. Unless otherwise expressly agreed in writing, nothing stated in this communication shall be legally binding.
>
> The ultimate parent company of the Atkins Group is WS Atkins plc.  Registered in England No. 1885586.  Registered Office Woodcote Grove, Ashley Road, Epsom, Surrey KT18 5BW.
>
> Consider the environment. Please don't print this e-mail unless you really need to.
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 17:37:25 2007
Return-Path: <java-user-return-26008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85958 invoked from network); 8 Feb 2007 17:37:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 17:37:24 -0000
Received: (qmail 2277 invoked by uid 500); 8 Feb 2007 17:37:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2242 invoked by uid 500); 8 Feb 2007 17:37:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2231 invoked by uid 99); 8 Feb 2007 17:37:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 09:37:24 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_FONT_BIG,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 217.68.146.190 as permitted sender)
Received: from [217.68.146.190] (HELO cluster-b.mailcontrol.com) (217.68.146.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 09:37:11 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly27b.srv.mailcontrol.com (MailControl) with SMTP id l18HahRZ020407
	for <java-user@lucene.apache.org>; Thu, 8 Feb 2007 17:36:44 GMT
Received: From SGBD012103.wsatkins.com ([10.202.26.17]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 1170956183392; Thu, 8 Feb 2007 17:36:23 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012103.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 8 Feb 2007 17:36:22 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C74BA7.A6582FB6"
Subject: categorisation
Date: Thu, 8 Feb 2007 17:36:19 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705B9BDDF@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: categorisation
Thread-Index: AcdLp6RlUnzg61ncTRaDS/y39bbQvw==
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 08 Feb 2007 17:36:22.0889 (UTC) FILETIME=[A687D590:01C74BA7]
X-Scanned-By: MailControl A-07-06-80 (www.mailcontrol.com) on 10.66.0.137
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C74BA7.A6582FB6
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Chris has given an example of how to perform categorisation of lucene searc=
hes:

String[] mfgs =3D ...;=20
  String query =3D "+category:cameras +price:[0 to 10]";=20
  Query q =3D QueryParser.parse(query);=20
  Hits results =3D searcher.search(q, mySort)=20
  BitSet all =3D (new QueryFilter(q)).bits(reader)=20
  int[] mfg_counts =3D new int[mfgs.length];=20
  for i in (0 to mfgs.length) {=20
     BitSet these =3D (new QueryFilter(new TermQuery("mfg",mfgs[i]))).bits(=
reader);=20
     these.and(all)=20
     mfg_counts[i] =3D these.cardinality();=20
  }=20

What I don't understand though is what this line does:

BitSet all =3D (new QueryFilter(q)).bits(reader)=20

Anyone have any ideas?



This email and any attached files are confidential and copyright protected.=
 If you are not the addressee, any dissemination of this communication is s=
trictly prohibited. Unless otherwise expressly agreed in writing, nothing s=
tated in this communication shall be legally binding.

The ultimate parent company of the Atkins Group is WS Atkins plc.  Register=
ed in England No. 1885586.  Registered Office Woodcote Grove, Ashley Road, =
Epsom, Surrey KT18 5BW.

Consider the environment. Please don't print this e-mail unless you really =
need to.=20

------_=_NextPart_001_01C74BA7.A6582FB6--

From java-user-return-26009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 17:37:54 2007
Return-Path: <java-user-return-26009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86075 invoked from network); 8 Feb 2007 17:37:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 17:37:54 -0000
Received: (qmail 4189 invoked by uid 500); 8 Feb 2007 17:37:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4157 invoked by uid 500); 8 Feb 2007 17:37:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4141 invoked by uid 99); 8 Feb 2007 17:37:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 09:37:54 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 217.68.146.190 as permitted sender)
Received: from [217.68.146.190] (HELO cluster-b.mailcontrol.com) (217.68.146.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 09:37:43 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly36b.srv.mailcontrol.com (MailControl) with SMTP id l18HbHLp009966
	for <java-user@lucene.apache.org>; Thu, 8 Feb 2007 17:37:18 GMT
Received: From SGBD012104.wsatkins.com ([10.202.26.18]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 1170956216784; Thu, 8 Feb 2007 17:36:56 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012104.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 8 Feb 2007 17:36:56 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Analyzers
Date: Thu, 8 Feb 2007 17:36:52 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705B9BDE3@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Analyzers
Thread-Index: AcdLp2fRhYL1kdn1SyyrMOMhdDliYQAAEeYA
References: <BC1CFC544422CB4A934908E126A4742705B9BD9E@SGBLOW2101.wsatkins.com> <359a92830702080933l64860a92sc4bce1f3ec0f9ac7@mail.gmail.com>
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 08 Feb 2007 17:36:56.0660 (UTC) FILETIME=[BAA8E140:01C74BA7]
X-Scanned-By: MailControl A-07-06-80 (www.mailcontrol.com) on 10.66.0.146
X-Virus-Checked: Checked by ClamAV on apache.org

Can you give me an example of how this might be done?=20

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: 08 February 2007 17:34
To: java-user@lucene.apache.org
Subject: Re: Analyzers

Use PerFieldAnalyzerWrapper.

On 2/8/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
>
> Hi all,
>
> I wanted to know if it is possible to store some fields in an index=20
> with one analyzers and other fields with another analyzer?
>
> Cheers
>
> Sachin
>
>
> This email and any attached files are confidential and copyright=20
> protected. If you are not the addressee, any dissemination of this=20
> communication is strictly prohibited. Unless otherwise expressly=20
> agreed in writing, nothing stated in this communication shall be
legally binding.
>
> The ultimate parent company of the Atkins Group is WS Atkins plc. =20
> Registered in England No. 1885586.  Registered Office Woodcote Grove,=20
> Ashley Road, Epsom, Surrey KT18 5BW.
>
> Consider the environment. Please don't print this e-mail unless you=20
> really need to.
>


This message has been scanned for viruses by MailControl - (see
http://bluepages.wsatkins.co.uk/?4318150)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 17:38:20 2007
Return-Path: <java-user-return-26010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86283 invoked from network); 8 Feb 2007 17:38:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 17:38:19 -0000
Received: (qmail 8207 invoked by uid 500); 8 Feb 2007 17:38:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8181 invoked by uid 500); 8 Feb 2007 17:38:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8170 invoked by uid 99); 8 Feb 2007 17:38:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 09:38:19 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 217.68.146.190 as permitted sender)
Received: from [217.68.146.190] (HELO cluster-b.mailcontrol.com) (217.68.146.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 09:38:05 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly26b.srv.mailcontrol.com (MailControl) with SMTP id l18HbXQW003806
	for <java-user@lucene.apache.org>; Thu, 8 Feb 2007 17:37:41 GMT
Received: From SGBD012104.wsatkins.com ([10.202.26.18]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 1170956231300; Thu, 8 Feb 2007 17:37:11 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012104.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 8 Feb 2007 17:37:11 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Analyzers
Date: Thu, 8 Feb 2007 17:37:07 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705B9BDE7@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Analyzers
Thread-Index: AcdLp4jgulxJ2dasQ5S7cCpciNvdZwAADPCA
References: <BC1CFC544422CB4A934908E126A4742705B9BD9E@SGBLOW2101.wsatkins.com> <6e3ae6310702080934k492715e0j427662bf00ee9760@mail.gmail.com>
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 08 Feb 2007 17:37:11.0192 (UTC) FILETIME=[C3524980:01C74BA7]
X-Scanned-By: MailControl A-07-06-80 (www.mailcontrol.com) on 10.66.0.136
X-Virus-Checked: Checked by ClamAV on apache.org

Can you provide an example?=20

-----Original Message-----
From: Chris Lu [mailto:chris.lu@gmail.com]=20
Sent: 08 February 2007 17:35
To: java-user@lucene.apache.org
Subject: Re: Analyzers

This is totally possible.

--
Chris Lu
-------------------------
Instant Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com

On 2/8/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
> Hi all,
>
> I wanted to know if it is possible to store some fields in an index=20
> with one analyzers and other fields with another analyzer?
>
> Cheers
>
> Sachin
>
>
> This email and any attached files are confidential and copyright
protected. If you are not the addressee, any dissemination of this
communication is strictly prohibited. Unless otherwise expressly agreed
in writing, nothing stated in this communication shall be legally
binding.
>
> The ultimate parent company of the Atkins Group is WS Atkins plc.
Registered in England No. 1885586.  Registered Office Woodcote Grove,
Ashley Road, Epsom, Surrey KT18 5BW.
>
> Consider the environment. Please don't print this e-mail unless you
really need to.
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



This message has been scanned for viruses by MailControl - (see
http://bluepages.wsatkins.co.uk/?4318150)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 17:47:18 2007
Return-Path: <java-user-return-26011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88936 invoked from network); 8 Feb 2007 17:47:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 17:47:17 -0000
Received: (qmail 21961 invoked by uid 500); 8 Feb 2007 17:47:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21340 invoked by uid 500); 8 Feb 2007 17:47:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21329 invoked by uid 99); 8 Feb 2007 17:47:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 09:47:15 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_FONT_BIG,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 217.68.146.190 as permitted sender)
Received: from [217.68.146.190] (HELO cluster-b.mailcontrol.com) (217.68.146.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 09:47:01 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly32b.srv.mailcontrol.com (MailControl) with SMTP id l18HkajF011315
	for <java-user@lucene.apache.org>; Thu, 8 Feb 2007 17:46:36 GMT
Received: From SGBD012104.wsatkins.com ([10.202.26.18]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 1170956775689; Thu, 8 Feb 2007 17:46:15 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012104.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 8 Feb 2007 17:46:15 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C74BA9.07693E64"
Subject: Empty search
Date: Thu, 8 Feb 2007 17:46:12 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705B9BE0C@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Empty search
Thread-Index: AcdLqQXVOU/rwxk5QdKsMBKezp58pQ==
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 08 Feb 2007 17:46:15.0577 (UTC) FILETIME=[07CCD890:01C74BA9]
X-Scanned-By: MailControl A-06-00-00 (www.mailcontrol.com) on 10.66.0.142
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C74BA9.07693E64
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Is it my imagination or does lucene produce an error if you present it
with an empty string to search for?


This email and any attached files are confidential and copyright protected.=
 If you are not the addressee, any dissemination of this communication is s=
trictly prohibited. Unless otherwise expressly agreed in writing, nothing s=
tated in this communication shall be legally binding.

The ultimate parent company of the Atkins Group is WS Atkins plc.  Register=
ed in England No. 1885586.  Registered Office Woodcote Grove, Ashley Road, =
Epsom, Surrey KT18 5BW.

Consider the environment. Please don't print this e-mail unless you really =
need to.=20

------_=_NextPart_001_01C74BA9.07693E64--

From java-user-return-26012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 17:47:27 2007
Return-Path: <java-user-return-26012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89016 invoked from network); 8 Feb 2007 17:47:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 17:47:26 -0000
Received: (qmail 22292 invoked by uid 500); 8 Feb 2007 17:47:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22248 invoked by uid 500); 8 Feb 2007 17:47:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22219 invoked by uid 99); 8 Feb 2007 17:47:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 09:47:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 209.85.132.240 as permitted sender)
Received: from [209.85.132.240] (HELO an-out-0708.google.com) (209.85.132.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 09:47:09 -0800
Received: by an-out-0708.google.com with SMTP id c3so558547ana
        for <java-user@lucene.apache.org>; Thu, 08 Feb 2007 09:46:49 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=tI0O3d9uxG7f+Cckv53xqcggs+HrlSFzW2GZQ+LcRjjdKwbxTIvl6MO+qLOPZhQw29xMCw02Uq47KDK+kl07CjV09DZWLELkeFEwVMbvn2/n6XcVv7e1JVOzE8X1Avo4FoObFLJVpqf7XduzXbeB0ENWjsHlg/n1af+ER/ewSY8=
Received: by 10.100.11.7 with SMTP id 7mr11341524ank.1170956808918;
        Thu, 08 Feb 2007 09:46:48 -0800 (PST)
Received: from ?192.168.0.131? ( [83.249.110.79])
        by mx.google.com with ESMTP id 53sm2990893ugd.2007.02.08.09.46.47;
        Thu, 08 Feb 2007 09:46:47 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705B9BDE3@SGBLOW2101.wsatkins.com>
References: <BC1CFC544422CB4A934908E126A4742705B9BD9E@SGBLOW2101.wsatkins.com> <359a92830702080933l64860a92sc4bce1f3ec0f9ac7@mail.gmail.com> <BC1CFC544422CB4A934908E126A4742705B9BDE3@SGBLOW2101.wsatkins.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <BEEC8652-B510-4394-8E94-BA8C43BCE4AB@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Analyzers
Date: Thu, 8 Feb 2007 18:45:35 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


8 feb 2007 kl. 18.36 skrev Kainth, Sachin:

> Can you give me an example of how this might be done?

The javadocs is generally a good place to start:

http://lucene.apache.org/java/docs/api/org/apache/lucene/analysis/ 
PerFieldAnalyzerWrapper.html

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 17:52:31 2007
Return-Path: <java-user-return-26013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90542 invoked from network); 8 Feb 2007 17:52:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 17:52:30 -0000
Received: (qmail 31671 invoked by uid 500); 8 Feb 2007 17:52:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31305 invoked by uid 500); 8 Feb 2007 17:52:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31294 invoked by uid 99); 8 Feb 2007 17:52:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 09:52:31 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 09:52:21 -0800
Received: by ug-out-1314.google.com with SMTP id k40so550701ugc
        for <java-user@lucene.apache.org>; Thu, 08 Feb 2007 09:52:00 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Pf4N/SPADmaSQGOVrgDDwseez/CxCFt5iSdnlY3Fo9x4GJuKN6uLheAZTtlNIQEx8qZQ4jRe5v3Nc1mDGt4VOTUqrNTnCtaAsBG2yoUxGOdZIzlFvFphlZI7G0l7aVzy1555qR4a1PftBDrkdsoEmRpfU4lzbHwyvrqcx9Zsbdw=
Received: by 10.82.158.12 with SMTP id g12mr752991bue.1170957119505;
        Thu, 08 Feb 2007 09:51:59 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Thu, 8 Feb 2007 09:51:59 -0800 (PST)
Message-ID: <359a92830702080951p47532914i278559226d0836b9@mail.gmail.com>
Date: Thu, 8 Feb 2007 12:51:59 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Re : Re: Re : Re: Question concerning Analyzers
In-Reply-To: <e97c54d4612c.45cb15ec@courrier.uqam.ca>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_33296_27764920.1170957119456"
References: <e97c54d4612c.45cb15ec@courrier.uqam.ca>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_33296_27764920.1170957119456
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Well, you've proved that your problem is that the analyzer you're using whe=
n
querying isn't matching what you use during indexing. I think that what
you've done will lead you into significant problems down the road as your
tokenizer then has to "correct" for what the index analyzer did though.

What would probably be MUCH less work in the long run is to align the
analyzer you use at query time with the analyzer you use at index time. You
can use a PerFieldAnalyzerWrapper to handle different fields in different
ways. Forget your custom tokenizer for the time being, just try using the
same analyzer during searching that you used during indexing. You can use
the
*QueryParser<file:///C:/lucene-2.0.0/docs/api/org/apache/lucene/queryParser=
/QueryParser.html#QueryParser%28java.lang.String,%20org.apache.lucene.analy=
sis.Analyzer%29>
*(String <http://java.sun.com/j2se/1.4/docs/api/java/lang/String.html> f,
Analyzer<file:///C:/lucene-2.0.0/docs/api/org/apache/lucene/analysis/Analyz=
er.html>
 a)

form of the QueryParser, where the Analyzer is the same one you used when
indexing. There are some circumstances where you want to use different
analyzers when querying and when indexing, but don't go there unless you
need to <G>....

If that doesn't do what you want, I'd really recommend is that you make you=
r
own custom Analyzer, built on, say, WhitespaceTokenizer, LowerCaseFilter.
This is usually the way I've approached this kind of problem. And use *that=
*
one at index and query time.

There's an example in Lucene In Action, see the SynonymAnalyzer example.
That example is MUCH more complex than you'll need <G>...

Best
Erick

On 2/8/07, Xavier To <to.xavier@courrier.uqam.ca> wrote:
>
> Hey !
>
> I tried using WhitespaceAnalyzer during the search and it works. I
> refactored the tokenizing process so it uses TokenStream instead of
> StringTokenizer and it works fine for one thing : the query "this is a te=
st"
> becomes "thisisatest". I fixed it by adding a space after each token exce=
pt
> for the last one, but is there a clean way to do it ? I'm using
> WhitespaceTokenizer.
>
> Thanks a bunch !
>
> Xavier T=F4
> Bacc. en Informatique et G=E9nie Logiciel
> to.xavier@courrier.uqam.ca
> (450)434-8905
>
> ----- Message d'origine -----
> De: Erick Erickson <erickerickson@gmail.com>
> Date: Mercredi, F=E9vrier 7, 2007 4:28 pm
> Objet: Re: Re : Re: Question concerning Analyzers
>
> > Then the analyzer you're using when parsing the query is stripping
> > them. It
> > must be different than the one you use when indexing somehow. At least
> > that's the only explanation I can imagine....
> >
> > Perhaps, somehow, you are using a default analyzer when you parse a
> > query?Or you aren't specifying the field when you query and thus a
> > default is
> > used? Or you are using a PerFieldAnalyzerWrapper and dropping
> > through to the
> > default? or ????
> >
> > Just for yucks, I'd try using WhitespaceAnalyzer on a query with
> > somethingyou *know* exists in the index for a particular field and
> > work my way up to
> > whatever your real problem is in small steps (since you can't post
> > code<G>)......
> >
> > Best
> > Erick
> >
> > On 2/7/07, Xavier To <to.xavier@courrier.uqam.ca> wrote:
> > >
> > > Thanks Erik and Erick,
> > >
> > > I guess my question was rather unclear, but you guys answered it
> > all the
> > > same : it is impossible for an analyzer to index something and
> > having the
> > > same analyzer ignore the thing indexed during a search.
> > >
> > > If it makes everything clearer, during indexation, numbers  are
> > indexed,> whether or not they are accompanied by letters ( 2003 and
> > 4wd are both
> > > indexed). That's fine, since we want this.  The problem occurs
> > when I try to
> > > search for them : They are ignored. I know they are indexed
> > because I ran
> > > through the index using Luke.
> > >
> > > Any thoughts regarding this problem ?
> > >
> > > Xavier T=F4
> > > Bacc. en Informatique et G=E9nie Logiciel
> > > to.xavier@courrier.uqam.ca
> > > (450)434-8905
> > >
> > > ----- Message d'origine -----
> > > De: Erik Hatcher <erik@ehatchersolutions.com>
> > > Date: Mercredi, F=E9vrier 7, 2007 3:15 pm
> > > Objet: Re: Question concerning Analyzers
> > >
> > > > There is no requirement that you use the same analyzer to
> > search as
> > > >
> > > > you used to index.  So, yes, you could certainly index things and
> > > > ignore them during a search.
> > > >
> > > >       Erik
> > > >
> > > >
> > > > On Feb 7, 2007, at 2:10 PM, Xavier To wrote:
> > > >
> > > > > Hi, me again
> > > > >
> > > > > I'm still stuck with my search engine, but something popped
> > in my
> > > >
> > > > > head : Can an analyzer index something but ignore it during a
> > > > > search ? I'm asking this because now that I've been searching
> > for> >
> > > > > an answer, I've come to think that I should redo the whole
> > search> >
> > > > > engine, but I don't want to reproduce the same error as we have
> > > > > now. It would be stupid to accidentaly redo the same mistake. I
> > > > > still haven't received news from my seniors about me posting
> > code> >
> > > > > and all...
> > > > >
> > > > > Xavier T=F4
> > > > > Bacc. en Informatique et G=E9nie Logiciel
> > > > > to.xavier@courrier.uqam.ca
> > > > > (450)434-8905
> > > > >
> > > > >
> > > > >
> > > > > --------------------------------------------------------------
> > ----
> > > > ---
> > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail: java-user-
> > help@lucene.apache.org> >
> > > >
> > > > ----------------------------------------------------------------
> > ----
> > > > -
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> > >
> > > ------------------------------------------------------------------
> > ---
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_33296_27764920.1170957119456--

From java-user-return-26014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 18:06:39 2007
Return-Path: <java-user-return-26014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94851 invoked from network); 8 Feb 2007 18:06:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 18:06:37 -0000
Received: (qmail 61704 invoked by uid 500); 8 Feb 2007 18:06:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61641 invoked by uid 500); 8 Feb 2007 18:06:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61505 invoked by uid 99); 8 Feb 2007 18:06:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 10:06:36 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 10:06:24 -0800
Received: by ug-out-1314.google.com with SMTP id k40so554545ugc
        for <java-user@lucene.apache.org>; Thu, 08 Feb 2007 10:06:03 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=BtpUjEyzIDh+SMKXYQS1UutG7ni/t1grWnxQ+pSJlZZvfIroQqEQ+EOqxdxxZ0UWeWvr9zVGq1r1AdCAZm7xqYO4rnsDs9VHzhF8cU79KX3OuKx+V6zryLWoViJkqVj0zmjLYz8NquPpn6Rmat52cyYYjopM1A+YGiSn2ifa2/4=
Received: by 10.78.123.4 with SMTP id v4mr4325013huc.1170957963075;
        Thu, 08 Feb 2007 10:06:03 -0800 (PST)
Received: from ?192.168.0.131? ( [83.249.110.79])
        by mx.google.com with ESMTP id o30sm3541317ugd.2007.02.08.10.06.02;
        Thu, 08 Feb 2007 10:06:02 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705B9BE0C@SGBLOW2101.wsatkins.com>
References: <BC1CFC544422CB4A934908E126A4742705B9BE0C@SGBLOW2101.wsatkins.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E2BDF70E-628E-48F9-8D6D-08F5A99EB9E8@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Empty search
Date: Thu, 8 Feb 2007 19:04:51 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


8 feb 2007 kl. 18.46 skrev Kainth, Sachin:

> Is it my imagination or does lucene produce an error if you present it
> with an empty string to search for?

I presume you are referring to the QueryParser? It sounds about right  
that it would throw an exception at some point if you supplied it an  
empty input.


-- 
karl



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 18:08:37 2007
Return-Path: <java-user-return-26015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95269 invoked from network); 8 Feb 2007 18:08:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 18:08:37 -0000
Received: (qmail 65156 invoked by uid 500); 8 Feb 2007 18:08:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65130 invoked by uid 500); 8 Feb 2007 18:08:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65119 invoked by uid 99); 8 Feb 2007 18:08:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 10:08:36 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 10:08:26 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HFDgj-0004PE-TM
	for java-user@lucene.apache.org; Thu, 08 Feb 2007 10:08:05 -0800
Message-ID: <8870825.post@talk.nabble.com>
Date: Thu, 8 Feb 2007 10:08:05 -0800 (PST)
From: poeta simbolista <poetasimbolista@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to return results with null values?
In-Reply-To: <Pine.LNX.4.58.0702071355330.17424@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: poetasimbolista@gmail.com
References: <8844779.post@talk.nabble.com> <OFA6F54BBF.0ACC946D-ON8525727B.0048972D-8525727B.0048A81E@BIPT.COM> <OF6A1936DA.BCD14F24-ON8525727B.0048BF2B-8525727B.0048DEEA@BIPT.COM> <8847539.post@talk.nabble.com> <OF843C2886.24B18CD8-ON8525727B.00553C20-8525727B.00558F52@BIPT.COM> <Pine.LNX.4.58.0702071355330.17424@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org



Chris Hostetter wrote:
> 
> I'm not sure wether this question is about docs that have no value for a
> field, or docs where the value of the field is null -
> 

The former.


Chris Hostetter wrote:
> 
> adding a filter on that Field that requires *some* value might help. 
> 

Yep, that is what I would like.


Chris Hostetter wrote:
> 
> take a look at RangeFilter and set both the upper and lower terms to be
> null --
> or if you need a Query and can't use a filter, do the same thing with
> ConstantScoreRangeQuery.
> 

This is like, it scores sth for each document that has a field, no matter
the content?


Chris Hostetter wrote:
> 
> 
> : A newbie here, but I would think that fields will null value will slow
> : down the search as much as fields with a specific non-conflicting
> keyword.
> :  There is still a field to be looked at, even if it does not match.
> 
> i believe you are correct ... it doesn't matter wether the Field value is
> null or "" or "some_magic__toKen_$" it's still an instance of a term.
> 
> Of course, not adding that Field value at all would actually make things a
> lot better.
> 
> I'm not sure wether this question is about docs that have no value for a
> field, or docs where the value of the field is null -- but either way
> adding a filter on that Field that requires *some* value might help. take
> a look at RangeFilter and set both the upper and lower terms to be null --
> or if you need a Query and can't use a filter, do the same thing with
> ConstantScoreRangeQuery.
> 
> if what you mean by bull is really "" then you can still do the same thing
> using "" as your lower term but don't be inclusive of the lower term.
> 
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/How-to-return-results-with-null-values--tf3186799.html#a8870825
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 18:19:31 2007
Return-Path: <java-user-return-26016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99056 invoked from network); 8 Feb 2007 18:19:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 18:19:29 -0000
Received: (qmail 84073 invoked by uid 500); 8 Feb 2007 18:19:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83619 invoked by uid 500); 8 Feb 2007 18:19:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83608 invoked by uid 99); 8 Feb 2007 18:19:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 10:19:29 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of phanikumar.valluripalli@googlemail.com designates 64.233.162.237 as permitted sender)
Received: from [64.233.162.237] (HELO nz-out-0506.google.com) (64.233.162.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 10:19:18 -0800
Received: by nz-out-0506.google.com with SMTP id i1so570495nzh
        for <java-user@lucene.apache.org>; Thu, 08 Feb 2007 10:18:58 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=rMUFxMe7jSbKqrTSazdgwxkilzzA/DXGOZwS+vTMVcja5P4OD5bK/63/K+ALG27RoNx6xYSzLkdOvj1izyclJCaFAQKQjTiSHr5BktaT4nja5YEaNp6CGKFONhjRXnFi5twpof4VNGpQX/PfCBCW6XvqXgePTv3mr1Q6l0u3t/Y=
Received: by 10.65.200.14 with SMTP id c14mr14743643qbq.1170958737979;
        Thu, 08 Feb 2007 10:18:57 -0800 (PST)
Received: by 10.64.112.13 with HTTP; Thu, 8 Feb 2007 10:18:57 -0800 (PST)
Message-ID: <4aeddee0702081018x3e06806bn508aba104ac18db0@mail.gmail.com>
Date: Thu, 8 Feb 2007 19:18:57 +0100
From: "phani kumar" <phanikumar.valluripalli@googlemail.com>
To: java-user@lucene.apache.org
Subject: Indexing a RDF document using lucene
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_25630_25966074.1170958737942"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_25630_25966074.1170958737942
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I want to index a rdf document using lucene.RDF consists of a subject
,predicate ,object(as triples).suppose given a set of keywords defining a
search,we want to match the URIrefs containg those keywords.so how can i
index the triples using the lucene.please provide some help how to hash each
URIres to token and index the docucument using lucene.For example

<?xml version="1.0"?><rdf:RDF
xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
xmlns:si="http://www.recshop.fake/siteinfo#">
<rdf:Description rdf:about="http://www.w3schools.com/RDF">
<si:author>Jan</si:author>
<si:homepage>http://www.w3schools.com</si:homepage>
</rdf:Description>
</rdf:RDF>


subject predicate object

{http://www.w3schools.com/RDF, http://www.recshop.fake/siteinfo#author ,
"Jan" }


{http://www.w3schools.com/RDF ,http://www.recshop.fake/siteinfo#homepage, "
http://www.w3schools.com"}



in above rdf document the subject, predicate,object are given,in some cases
an object can also be an URIref. how can i index this document using
lucene.how can URIrefs indexed along string literals using
lucene.pleasegive some help on indexing and searching on RDF
documents.


Thank you.
phani.

------=_Part_25630_25966074.1170958737942--

From java-user-return-26017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 18:32:56 2007
Return-Path: <java-user-return-26017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6196 invoked from network); 8 Feb 2007 18:32:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 18:32:56 -0000
Received: (qmail 11918 invoked by uid 500); 8 Feb 2007 18:32:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11893 invoked by uid 500); 8 Feb 2007 18:32:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11882 invoked by uid 99); 8 Feb 2007 18:32:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 10:32:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [130.238.4.154] (HELO colibri.its.uu.se) (130.238.4.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 10:32:45 -0800
Received: by colibri.its.uu.se (Postfix, from userid 211)
	id 4841E902; Thu,  8 Feb 2007 19:32:22 +0100 (NFT)
Received: from colibri.its.uu.se(127.0.0.1) by colibri.its.uu.se via virus-scan 
	id s14356; Thu, 8 Feb 07 19:32:13 +0100
Received: from ninox.its.uu.se (ninox.its.uu.se [130.238.4.197])
	(using TLSv1 with cipher AES256-SHA (256/256 bits))
	(No client certificate requested)
	by colibri.its.uu.se (Postfix) with ESMTP id 352CBA1D
	for <java-user@lucene.apache.org>; Thu,  8 Feb 2007 19:32:13 +0100 (NFT)
Received: from localhost ([127.0.0.1] helo=jubula)
	by ninox.its.uu.se with esmtp (Exim 4.63)
	(envelope-from <ronnie.kolehmainen@ub.uu.se>)
	id 1HFE44-0002tk-W2
	for java-user@lucene.apache.org; Thu, 08 Feb 2007 19:32:13 +0100
Received: from c-234de253.16-1-64736c11.cust.bredbandsbolaget.se
	(c-234de253.16-1-64736c11.cust.bredbandsbolaget.se [83.226.77.35]) by
	webmail3.uu.se (Horde MIME library) with HTTP; Thu, 08 Feb 2007 19:32:12
	+0100
Message-ID: <20070208193212.agmp9morw8ws04os@webmail3.uu.se>
Date: Thu, 08 Feb 2007 19:32:12 +0100
From: Ronnie Kolehmainen <ronnie.kolehmainen@ub.uu.se>
To: java-user@lucene.apache.org
Subject: Re: Empty search
References: 	<BC1CFC544422CB4A934908E126A4742705B9BE0C@SGBLOW2101.wsatkins.com>
In-Reply-To: 	<BC1CFC544422CB4A934908E126A4742705B9BE0C@SGBLOW2101.wsatkins.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset=ISO-8859-1;
	DelSp="Yes";
	format="flowed"
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable
User-Agent: Internet Messaging Program (IMP) H3 (4.1.3)
X-Virus-Checked: Checked by ClamAV on apache.org

If you are refering to QueryParser, and if you mean that you want =20
Lucene to *find everything* when you actually say *search for =20
nothing*, you could easily extend current Queryparser to suit your =20
needs:

public class MyQueryParser extends QueryParser
{
     public MyQueryParser(String f, Analyzer a)
     {
         super(f, a);
     }

     public Query parse(String query) throws ParseException
     {
         if (null =3D=3D query || query.trim().length() =3D=3D 0)
         {
             return new MatchAllDocsQuery();
         }
         return super.parse(query);
     }
}

Regards,
Ronnie

Quoting "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>:

> Is it my imagination or does lucene produce an error if you present it
> with an empty string to search for?
>
>
> This email and any attached files are confidential and copyright  =20
> protected. If you are not the addressee, any dissemination of this  =20
> communication is strictly prohibited. Unless otherwise expressly  =20
> agreed in writing, nothing stated in this communication shall be  =20
> legally binding.
>
> The ultimate parent company of the Atkins Group is WS Atkins plc.   =20
> Registered in England No. 1885586.  Registered Office Woodcote  =20
> Grove, Ashley Road, Epsom, Surrey KT18 5BW.
>
> Consider the environment. Please don't print this e-mail unless you  =20
> really need to.
>




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 18:33:34 2007
Return-Path: <java-user-return-26018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6325 invoked from network); 8 Feb 2007 18:33:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 18:33:32 -0000
Received: (qmail 13731 invoked by uid 500); 8 Feb 2007 18:33:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13692 invoked by uid 500); 8 Feb 2007 18:33:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13676 invoked by uid 99); 8 Feb 2007 18:33:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 10:33:33 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chris.lu@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 10:33:23 -0800
Received: by ug-out-1314.google.com with SMTP id k40so561358ugc
        for <java-user@lucene.apache.org>; Thu, 08 Feb 2007 10:33:02 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Y/wVX4jcUx3cUYyZhc4QWeI0G1fyLwyHHPmVs7LwE9Xhr7p/WGRoqcDvtCX05OQvnneGFmyIxARHWVUMtu6hsMHInubj2bteNXNLOmXfpqaRixfYlkgRzyYPWcW+uU40M+UGta2b1qrOj+B07vceRMERnTKLIzPCPg8Jny1z86g=
Received: by 10.82.155.10 with SMTP id c10mr1947792bue.1170959581444;
        Thu, 08 Feb 2007 10:33:01 -0800 (PST)
Received: by 10.82.166.7 with HTTP; Thu, 8 Feb 2007 10:33:01 -0800 (PST)
Message-ID: <6e3ae6310702081033l75afa34kf7f921ad09c91e84@mail.gmail.com>
Date: Thu, 8 Feb 2007 10:33:01 -0800
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Analyzers
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705B9BDE3@SGBLOW2101.wsatkins.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <BC1CFC544422CB4A934908E126A4742705B9BD9E@SGBLOW2101.wsatkins.com>
	 <359a92830702080933l64860a92sc4bce1f3ec0f9ac7@mail.gmail.com>
	 <BC1CFC544422CB4A934908E126A4742705B9BDE3@SGBLOW2101.wsatkins.com>
X-Virus-Checked: Checked by ClamAV on apache.org

This is an example for PerFieldAnalyzerWrapper,

    public Analyzer getAnalyzer() throws ClassNotFoundException,
InstantiationException, IllegalAccessException{
        _analyzer = new PerFieldAnalyzerWrapper((Analyzer)
Class.forName(this.getAnalyzerName()).newInstance());
        ArrayList columns = this.getColumns();
        for(int i=0; i< columns.size(); i++) {
            Column c = (Column) columns.get(i);
            if(c.getAnalyzerName()!=null) {
                _analyzer.addAnalyzer(c.getColumnName(), (Analyzer)
Class.forName(c.getAnalyzerName()).newInstance());
            }
        }
        return (Analyzer) _analyzer;
    }

-- 
Chris Lu
-------------------------
Instant Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com

On 2/8/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
> Can you give me an example of how this might be done?
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: 08 February 2007 17:34
> To: java-user@lucene.apache.org
> Subject: Re: Analyzers
>
> Use PerFieldAnalyzerWrapper.
>
> On 2/8/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
> >
> > Hi all,
> >
> > I wanted to know if it is possible to store some fields in an index
> > with one analyzers and other fields with another analyzer?
> >
> > Cheers
> >
> > Sachin
> >
> >
> > This email and any attached files are confidential and copyright
> > protected. If you are not the addressee, any dissemination of this
> > communication is strictly prohibited. Unless otherwise expressly
> > agreed in writing, nothing stated in this communication shall be
> legally binding.
> >
> > The ultimate parent company of the Atkins Group is WS Atkins plc.
> > Registered in England No. 1885586.  Registered Office Woodcote Grove,
> > Ashley Road, Epsom, Surrey KT18 5BW.
> >
> > Consider the environment. Please don't print this e-mail unless you
> > really need to.
> >
>
>
> This message has been scanned for viruses by MailControl - (see
> http://bluepages.wsatkins.co.uk/?4318150)
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 18:38:18 2007
Return-Path: <java-user-return-26019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8143 invoked from network); 8 Feb 2007 18:38:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 18:38:17 -0000
Received: (qmail 28655 invoked by uid 500); 8 Feb 2007 18:38:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28626 invoked by uid 500); 8 Feb 2007 18:38:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28615 invoked by uid 99); 8 Feb 2007 18:38:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 10:38:16 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 10:38:05 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id EB44330EFC16; Thu,  8 Feb 2007 13:37:44 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [192.10.16.129] (va-208-33-152-138.sta.embarqhsd.net [208.33.152.138])
	by ehatchersolutions.com (Postfix) with ESMTP id 9EDDC30EFC16
	for <java-user@lucene.apache.org>; Thu,  8 Feb 2007 13:37:31 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705B9BDDF@SGBLOW2101.wsatkins.com>
References: <BC1CFC544422CB4A934908E126A4742705B9BDDF@SGBLOW2101.wsatkins.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <58D0497D-3CC2-4947-96D6-1D7ADE08828F@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: categorisation
Date: Thu, 8 Feb 2007 13:37:05 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1


On Feb 8, 2007, at 12:36 PM, Kainth, Sachin wrote:

> Chris has given an example of how to perform categorisation of  
> lucene searches:
>
> String[] mfgs = ...;
>   String query = "+category:cameras +price:[0 to 10]";
>   Query q = QueryParser.parse(query);
>   Hits results = searcher.search(q, mySort)
>   BitSet all = (new QueryFilter(q)).bits(reader)
>   int[] mfg_counts = new int[mfgs.length];
>   for i in (0 to mfgs.length) {
>      BitSet these = (new QueryFilter(new TermQuery("mfg",mfgs 
> [i]))).bits(reader);
>      these.and(all)
>      mfg_counts[i] = these.cardinality();
>   }
>
> What I don't understand though is what this line does:
>
> BitSet all = (new QueryFilter(q)).bits(reader)
>
> Anyone have any ideas?

"all" is a BitSet lit up for the documents that matched "query".   
"these" (the BitSet for a particular category) is .anded with "all"  
to get the counts _left over_ for each category given "query".

Make sense?

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 18:40:10 2007
Return-Path: <java-user-return-26020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8704 invoked from network); 8 Feb 2007 18:40:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 18:40:09 -0000
Received: (qmail 32298 invoked by uid 500); 8 Feb 2007 18:40:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31887 invoked by uid 500); 8 Feb 2007 18:40:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31876 invoked by uid 99); 8 Feb 2007 18:40:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 10:40:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 10:39:57 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 3270130EFC18; Thu,  8 Feb 2007 13:39:37 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [192.10.16.129] (va-208-33-152-138.sta.embarqhsd.net [208.33.152.138])
	by ehatchersolutions.com (Postfix) with ESMTP id E6E9930EFC16
	for <java-user@lucene.apache.org>; Thu,  8 Feb 2007 13:39:31 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <4aeddee0702081018x3e06806bn508aba104ac18db0@mail.gmail.com>
References: <4aeddee0702081018x3e06806bn508aba104ac18db0@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7DE33AF7-E9DA-4B2F-9FD2-C573B76955CF@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Indexing a RDF document using lucene
Date: Thu, 8 Feb 2007 13:39:28 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1

Elaborate on your querying needs :)

	Erik


On Feb 8, 2007, at 1:18 PM, phani kumar wrote:

> Hi,
>
> I want to index a rdf document using lucene.RDF consists of a subject
> ,predicate ,object(as triples).suppose given a set of keywords  
> defining a
> search,we want to match the URIrefs containg those keywords.so how  
> can i
> index the triples using the lucene.please provide some help how to  
> hash each
> URIres to token and index the docucument using lucene.For example
>
> <?xml version="1.0"?><rdf:RDF
> xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
> xmlns:si="http://www.recshop.fake/siteinfo#">
> <rdf:Description rdf:about="http://www.w3schools.com/RDF">
> <si:author>Jan</si:author>
> <si:homepage>http://www.w3schools.com</si:homepage>
> </rdf:Description>
> </rdf:RDF>
>
>
> subject predicate object
>
> {http://www.w3schools.com/RDF, http://www.recshop.fake/ 
> siteinfo#author ,
> "Jan" }
>
>
> {http://www.w3schools.com/RDF ,http://www.recshop.fake/ 
> siteinfo#homepage, "
> http://www.w3schools.com"}
>
>
>
> in above rdf document the subject, predicate,object are given,in  
> some cases
> an object can also be an URIref. how can i index this document using
> lucene.how can URIrefs indexed along string literals using
> lucene.pleasegive some help on indexing and searching on RDF
> documents.
>
>
> Thank you.
> phani.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 19:06:56 2007
Return-Path: <java-user-return-26021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17716 invoked from network); 8 Feb 2007 19:06:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 19:06:55 -0000
Received: (qmail 79145 invoked by uid 500); 8 Feb 2007 19:06:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79107 invoked by uid 500); 8 Feb 2007 19:06:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79096 invoked by uid 99); 8 Feb 2007 19:06:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 11:06:56 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.14 as permitted sender)
Received: from [80.67.18.14] (HELO smtprelay02.ispgateway.de) (80.67.18.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 11:06:45 -0800
Received: (qmail 14913 invoked from network); 8 Feb 2007 19:06:23 -0000
Received: from unknown (HELO p5496f9bd.dip.t-dialin.net) ([pbs]695637@[84.150.249.189])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 8 Feb 2007 19:06:23 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Slow performance (Fetching Hits)
Date: Thu, 8 Feb 2007 20:06:20 +0100
User-Agent: KMail/1.8.2
References: <4e2bf4c80702080454s76577035yed0125ac67da49db@mail.gmail.com>
In-Reply-To: <4e2bf4c80702080454s76577035yed0125ac67da49db@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200702082006.21369@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Thursday 08 February 2007 13:54, Laxmilal Menaria wrote:

> This will take more than 30 secs for 1,50,000 docs (40
> MB Index)..

What exactly takes this much time? You're not iterating over all hits, are 
you? 

Also see
http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-1b15abeee21b0a72492b1b97a86e260e83c61387

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 19:14:47 2007
Return-Path: <java-user-return-26022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19919 invoked from network); 8 Feb 2007 19:14:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 19:14:46 -0000
Received: (qmail 87693 invoked by uid 500); 8 Feb 2007 19:14:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87411 invoked by uid 500); 8 Feb 2007 19:14:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87400 invoked by uid 99); 8 Feb 2007 19:14:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 11:14:47 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mike.klaas@gmail.com designates 64.233.162.236 as permitted sender)
Received: from [64.233.162.236] (HELO nz-out-0506.google.com) (64.233.162.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 11:14:37 -0800
Received: by nz-out-0506.google.com with SMTP id i1so583249nzh
        for <java-user@lucene.apache.org>; Thu, 08 Feb 2007 11:14:17 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=LftTiU/bDkcJE7cSA6a3g9DQ0++XtQBWVBeOkoDr1XnQfU7lZjRXIpWgMClN1n+vaPmgOlqU4iF9W0JkgVgs9Taf06Qa9s/ZG3B1z3wsKPYKF9hSztSSj4Ba+5GONIIpeV6wtCB5vNkNk8JGPnlzpss1y5zcVH4POEIPBOTr4JY=
Received: by 10.114.179.1 with SMTP id b1mr4710817waf.1170962056902;
        Thu, 08 Feb 2007 11:14:16 -0800 (PST)
Received: by 10.114.198.18 with HTTP; Thu, 8 Feb 2007 11:14:16 -0800 (PST)
Message-ID: <3d2ce8cb0702081114h7910a266na5213d057b03d07c@mail.gmail.com>
Date: Thu, 8 Feb 2007 11:14:16 -0800
From: "Mike Klaas" <mike.klaas@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: 'a', 's' and 't' don't index properly
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705B9B9B1@SGBLOW2101.wsatkins.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <BC1CFC544422CB4A934908E126A4742705B9B615@SGBLOW2101.wsatkins.com>
	 <359a92830702080553ofbb2f2cld9878df2d25e33b@mail.gmail.com>
	 <BC1CFC544422CB4A934908E126A4742705B9B683@SGBLOW2101.wsatkins.com>
	 <359a92830702080725q58e2b268ie461a2008aaf0e4b@mail.gmail.com>
	 <BC1CFC544422CB4A934908E126A4742705B9B9B1@SGBLOW2101.wsatkins.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On 2/8/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:

> Is there a .NET version of Solr?

Nope.

-Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 19:15:05 2007
Return-Path: <java-user-return-26023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19998 invoked from network); 8 Feb 2007 19:15:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 19:15:04 -0000
Received: (qmail 88950 invoked by uid 500); 8 Feb 2007 19:15:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88924 invoked by uid 500); 8 Feb 2007 19:15:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88913 invoked by uid 99); 8 Feb 2007 19:15:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 11:15:03 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of phanikumar.valluripalli@googlemail.com designates 64.233.162.233 as permitted sender)
Received: from [64.233.162.233] (HELO nz-out-0506.google.com) (64.233.162.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 11:14:49 -0800
Received: by nz-out-0506.google.com with SMTP id i1so583297nzh
        for <java-user@lucene.apache.org>; Thu, 08 Feb 2007 11:14:29 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jL8mpK0Gib2rnrQKm9XJRrv1/woL0dBKuhZ215xIzejvynV2JRf4vRojBiyL8S6RBVyoo526BFwM1oeSknM9guKrmgRzs+A1ePZgoBkfMi+mvf7DPJdFVzmE9+5oP9LGYJHolyWbcPYhY9eroIjJYHc/Ta8B9/B9R/LymIhb0IU=
Received: by 10.65.211.1 with SMTP id n1mr14862898qbq.1170962068725;
        Thu, 08 Feb 2007 11:14:28 -0800 (PST)
Received: by 10.64.112.13 with HTTP; Thu, 8 Feb 2007 11:14:28 -0800 (PST)
Message-ID: <4aeddee0702081114safb1f47r4bc51df75a180605@mail.gmail.com>
Date: Thu, 8 Feb 2007 20:14:28 +0100
From: "phani kumar" <phanikumar.valluripalli@googlemail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing a RDF document using lucene
In-Reply-To: <7DE33AF7-E9DA-4B2F-9FD2-C573B76955CF@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26514_6936692.1170962068685"
References: <4aeddee0702081018x3e06806bn508aba104ac18db0@mail.gmail.com>
	 <7DE33AF7-E9DA-4B2F-9FD2-C573B76955CF@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26514_6936692.1170962068685
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Erik,

  When i search for string for example "jan" in the above example,it should
return me the class and property its associated as URI's and full text of
object and the RDF document which it is contained.how can i acheive this.

Thanks,
phani.


On 2/8/07, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>
> Elaborate on your querying needs :)
>
>        Erik
>
>
> On Feb 8, 2007, at 1:18 PM, phani kumar wrote:
>
> > Hi,
> >
> > I want to index a rdf document using lucene.RDF consists of a subject
> > ,predicate ,object(as triples).suppose given a set of keywords
> > defining a
> > search,we want to match the URIrefs containg those keywords.so how
> > can i
> > index the triples using the lucene.please provide some help how to
> > hash each
> > URIres to token and index the docucument using lucene.For example
> >
> > <?xml version="1.0"?><rdf:RDF
> > xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
> > xmlns:si="http://www.recshop.fake/siteinfo#">
> > <rdf:Description rdf:about="http://www.w3schools.com/RDF">
> > <si:author>Jan</si:author>
> > <si:homepage>http://www.w3schools.com</si:homepage>
> > </rdf:Description>
> > </rdf:RDF>
> >
> >
> > subject predicate object
> >
> > {http://www.w3schools.com/RDF, http://www.recshop.fake/
> > siteinfo#author ,
> > "Jan" }
> >
> >
> > {http://www.w3schools.com/RDF ,http://www.recshop.fake/
> > siteinfo#homepage, "
> > http://www.w3schools.com"}
> >
> >
> >
> > in above rdf document the subject, predicate,object are given,in
> > some cases
> > an object can also be an URIref. how can i index this document using
> > lucene.how can URIrefs indexed along string literals using
> > lucene.pleasegive some help on indexing and searching on RDF
> > documents.
> >
> >
> > Thank you.
> > phani.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_26514_6936692.1170962068685--

From java-user-return-26024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 19:53:04 2007
Return-Path: <java-user-return-26024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31148 invoked from network); 8 Feb 2007 19:53:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 19:53:03 -0000
Received: (qmail 61218 invoked by uid 500); 8 Feb 2007 19:53:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60878 invoked by uid 500); 8 Feb 2007 19:53:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60867 invoked by uid 99); 8 Feb 2007 19:53:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 11:53:03 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 11:52:52 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id D229230EFC18; Thu,  8 Feb 2007 14:52:31 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 9585E30EFC16
	for <java-user@lucene.apache.org>; Thu,  8 Feb 2007 14:52:29 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <3d2ce8cb0702081114h7910a266na5213d057b03d07c@mail.gmail.com>
References: <BC1CFC544422CB4A934908E126A4742705B9B615@SGBLOW2101.wsatkins.com> <359a92830702080553ofbb2f2cld9878df2d25e33b@mail.gmail.com> <BC1CFC544422CB4A934908E126A4742705B9B683@SGBLOW2101.wsatkins.com> <359a92830702080725q58e2b268ie461a2008aaf0e4b@mail.gmail.com> <BC1CFC544422CB4A934908E126A4742705B9B9B1@SGBLOW2101.wsatkins.com> <3d2ce8cb0702081114h7910a266na5213d057b03d07c@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <145742AA-229E-4D16-9DB4-0824781640E7@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: 'a', 's' and 't' don't index properly
Date: Thu, 8 Feb 2007 14:52:26 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.1.1


On Feb 8, 2007, at 2:14 PM, Mike Klaas wrote:

> On 2/8/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
>
>> Is there a .NET version of Solr?
>
> Nope.

But, here's the beauty of Solr... if you're not afraid of a JVM  
running Jetty, Tomcat, Resin, or many others then fire up (Java) Solr  
and use .NET HTTP API to talk to Solr.  It's the best solution  
available and leverage the performance gurus tweaks that make it in  
each new release of Java Lucene and Solr.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 20:57:01 2007
Return-Path: <java-user-return-26025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61617 invoked from network); 8 Feb 2007 20:57:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 20:57:00 -0000
Received: (qmail 93735 invoked by uid 500); 8 Feb 2007 20:57:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93707 invoked by uid 500); 8 Feb 2007 20:57:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93690 invoked by uid 99); 8 Feb 2007 20:57:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 12:57:00 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.104.95.4] (HELO listing.marketingbrokers.com) (66.104.95.4)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 08 Feb 2007 12:56:49 -0800
Received: from ip66-104-95-21.z95-104-66.customer.algx.net ([66.104.95.21])
          by listing.marketingbrokers.com (JAMES SMTP Server 2.2.0) with SMTP ID 762
          for <java-user@lucene.apache.org>;
          Thu, 8 Feb 2007 11:07:47 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <Pine.LNX.4.58.0702080028340.26374@hal.rescomp.berkeley.edu>
References: <8857789.post@talk.nabble.com> <Pine.LNX.4.58.0702080028340.26374@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E69C2E70-6091-4744-8546-FBB2EF03FD4D@marketingbrokers.com>
Content-Transfer-Encoding: 7bit
From: "Peter W." <peter@marketingbrokers.com>
Subject: Re: How to not tokenize HTML tag from input string
Date: Thu, 8 Feb 2007 11:07:47 -0800
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

Using a parser to get text out of HTML, XML (including RSS, ATOM) is  
only
easy if you control the source documents.

HTML pages in the wild are much different, generating exceptions you  
must
catch and deal with. For most projects you can probably use  
java.util.regex
to obtain keywords.

Clean-up extracted text first then send to Lucene.

Regards,

Peter



On Feb 8, 2007, at 12:34 AM, Chris Hostetter wrote:

>
> Solr has an HTMLStripReader used by an two different tokenizers for  
> doing
> the basics of ignoring tags when reading text ... it has one known bug
> when dealing with highlighting...
>
> http://lucene.apache.org/solr/api/org/apache/solr/analysis/ 
> HTMLStripReader.html
> http://lucene.apache.org/solr/api/org/apache/solr/analysis/ 
> HTMLStripStandardTokenizerFactory.html
> http://lucene.apache.org/solr/api/org/apache/solr/analysis/ 
> HTMLStripWhitespaceTokenizerFactory.html
> http://issues.apache.org/jira/browse/SOLR-42
>
>
> : Date: Wed, 7 Feb 2007 17:04:54 -0800 (PST)
> : From: Joe Tang <joe.tang@workmetro.com>
> : Reply-To: java-user@lucene.apache.org
> : To: java-user@lucene.apache.org
> : Subject: How to not tokenize HTML tag from input string
> :
> :
> : My work is to index keywords with a document. In my case, the  
> document is
> : made up with HTML tags which i don't want to index them.
> :
> : For example:
> : Input Document:
> : <div id="tp-wrapper">
> : <span id="tp-top-right">You are welcome</span>
> : <div id="tp-tab">
> : <h1>Testing text</h1>
> : </div>
> : </div>
> :
> : Expected Keywords:
> : keywords:You
> : keywords:are
> : keywords:welcome
> : keywords:Testing
> : keywords:text
> :
> : Is there anyway I can make them not to be one of the keywords?
> : --
> : View this message in context: http://www.nabble.com/How-to-not- 
> tokenize-HTML-tag-from-input-string-tf3190778.html#a8857789
> : Sent from the Lucene - Java Users mailing list archive at  
> Nabble.com.
> :
> :
> :  
> ---------------------------------------------------------------------
> : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : For additional commands, e-mail: java-user-help@lucene.apache.org
> :
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 21:12:41 2007
Return-Path: <java-user-return-26026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67678 invoked from network); 8 Feb 2007 21:12:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 21:12:40 -0000
Received: (qmail 25568 invoked by uid 500); 8 Feb 2007 21:12:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25532 invoked by uid 500); 8 Feb 2007 21:12:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25521 invoked by uid 99); 8 Feb 2007 21:12:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 13:12:40 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 13:12:30 -0800
Received: by nf-out-0910.google.com with SMTP id i2so861536nfe
        for <java-user@lucene.apache.org>; Thu, 08 Feb 2007 13:12:09 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=Z4AfNDorbDBd54fniXT5bTeXE9pEqO0UVed9BSetlxggVoPVEFrGuIMpaO4zarvt1IdKZfg9ZNiBNUczh6idrLT7TKa+kFm4J+Few62BcKB08tEdiTO9MEouflE/6ydB1Lpp6y4BTFMky3m+ymeOVxg0DADoLVRVTSo0lHGpq8o=
Received: by 10.82.167.5 with SMTP id p5mr2864507bue.1170969128243;
        Thu, 08 Feb 2007 13:12:08 -0800 (PST)
Received: by 10.82.126.8 with HTTP; Thu, 8 Feb 2007 13:12:08 -0800 (PST)
Message-ID: <c68e39170702081312k27efd455r369e19b2f95edee7@mail.gmail.com>
Date: Thu, 8 Feb 2007 16:12:08 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: How to not tokenize HTML tag from input string
In-Reply-To: <E69C2E70-6091-4744-8546-FBB2EF03FD4D@marketingbrokers.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <8857789.post@talk.nabble.com>
	 <Pine.LNX.4.58.0702080028340.26374@hal.rescomp.berkeley.edu>
	 <E69C2E70-6091-4744-8546-FBB2EF03FD4D@marketingbrokers.com>
X-Google-Sender-Auth: 7a58dd07516d595a
X-Virus-Checked: Checked by ClamAV on apache.org

On 2/8/07, Peter W. <peter@marketingbrokers.com> wrote:
> Using a parser to get text out of HTML, XML (including RSS, ATOM) is
> only
> easy if you control the source documents.
>
> HTML pages in the wild are much different, generating exceptions you
> must
> catch and deal with.

Yes, that's why the Solr version isn't an HTML parser and assumes a mixed bag
of HTML, javascript, comments, processing instructions, and non-escaped text.
It doesn't throw exceptions because there are no "correctness" assumptions.

If you *know* you have well formed HTML documents, then you definitely
should parse (and extract important entities out to separate fields)
before sending to Lucene/Solr .

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 21:25:30 2007
Return-Path: <java-user-return-26027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70862 invoked from network); 8 Feb 2007 21:25:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 21:25:29 -0000
Received: (qmail 51874 invoked by uid 500); 8 Feb 2007 21:25:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51843 invoked by uid 500); 8 Feb 2007 21:25:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51831 invoked by uid 99); 8 Feb 2007 21:25:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 13:25:29 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [132.208.250.6] (HELO anis.telecom.uqam.ca) (132.208.250.6)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 13:25:18 -0800
Received: from anis.telecom.uqam.ca (anis.telecom.uqam.ca [132.208.250.6])
	by sortant.uqam.ca (8.13.8/8.12.1) with SMTP id l18LFGHk011076
	for <java-user@lucene.apache.org>; Thu, 8 Feb 2007 16:15:29 -0500 (EST)
Received: from antivirus.uqam.ca ([127.0.0.1])
 by anis.telecom.uqam.ca (SAVSMTP 3.1.1.32) with SMTP id M2007020816152909476
 for <java-user@lucene.apache.org>; Thu, 08 Feb 2007 16:15:29 -0500
Received: from courriel2.sitel.uqam.ca (courriel2.sitel.uqam.ca [132.208.250.43])
	by intrant.uqam.ca (8.13.8/8.12.2/uqam-filtres) with ESMTP id l18LEeo0007924
	for <java-user@lucene.apache.org>; Thu, 8 Feb 2007 16:14:42 -0500 (EST)
X-UQAM-Spam-Filter: Filtre-Uqam re:  abuse@uqam.ca
Received: from courrier.uqam.ca ([127.0.0.1]) by courriel2.sitel.uqam.ca
 (Sun Java System Messaging Server 6.1 HotFix 0.11 (built Jan 28 2005))
 with ESMTP id <0JD500BZZXOEZX30@courriel2.sitel.uqam.ca> for
 java-user@lucene.apache.org; Thu, 08 Feb 2007 16:14:38 -0500 (EST)
Received: from [206.47.141.21] by courriel2.sitel.uqam.ca (mshttpd); Thu,
 08 Feb 2007 16:14:38 -0500
Date: Thu, 08 Feb 2007 16:14:38 -0500
From: Xavier To <to.xavier@courrier.uqam.ca>
Subject: Re : Re: Re : Re: Re : Re: Question concerning Analyzers
To: java-user@lucene.apache.org
Message-id: <3f18f92dbae.45cb4c6e@courrier.uqam.ca>
MIME-version: 1.0
X-Mailer: Sun Java(tm) System Messenger Express 6.1 HotFix 0.11 (built Jan 28
 2005)
Content-type: text/plain; charset=iso-8859-1
Content-language: fr
Content-transfer-encoding: quoted-printable
Content-disposition: inline
X-Accept-Language: fr
Priority: normal
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for helping me=2E

I don=27t really understand what you mean by my Tokenizer =22corrects=22=
 what the indexing analyzer did=2E By the way=2C the tokenizer we use is=
 one provided in Lucene=2E My guess is that the problem was that the ana=
lyzer was thought to be the same by the guy who made the search engine=2C=
 but the querying analyzer is fetched inside a JAR by a bean=2E Could it=
 be that this is the problem =3F

Xavier T=F4
Bacc=2E en Informatique et G=E9nie Logiciel
to=2Exavier=40courrier=2Euqam=2Eca
(450)434-8905

----- Message d=27origine -----
De=3A Erick Erickson =3Cerickerickson=40gmail=2Ecom=3E
Date=3A Jeudi=2C F=E9vrier 8=2C 2007 12=3A51 pm
Objet=3A Re=3A Re =3A Re=3A Re =3A Re=3A Question concerning Analyzers

=3E Well=2C you=27ve proved that your problem is that the analyzer you=27=
re =

=3E using when
=3E querying isn=27t matching what you use during indexing=2E I think th=
at =

=3E whatyou=27ve done will lead you into significant problems down the =

=3E road as your
=3E tokenizer then has to =22correct=22 for what the index analyzer did =

=3E though=2E
=3E What would probably be MUCH less work in the long run is to align th=
e
=3E analyzer you use at query time with the analyzer you use at index =

=3E time=2E You
=3E can use a PerFieldAnalyzerWrapper to handle different fields in =

=3E differentways=2E Forget your custom tokenizer for the time being=2C =

=3E just try using the
=3E same analyzer during searching that you used during indexing=2E You =

=3E can use
=3E the
=3E *QueryParser=3Cfile=3A///C=3A/lucene-
=3E 2=2E0=2E0/docs/api/org/apache/lucene/queryParser/QueryParser=2Ehtml=23=
QueryParser=2528java=2Elang=2EString=2C=2520org=2Eapache=2Elucene=2Eanal=
ysis=2EAnalyzer=2529=3E*(String =3Chttp=3A//java=2Esun=2Ecom/j2se/1=2E4/=
docs/api/java/lang/String=2Ehtml=3E f=2C
=3E Analyzer=3Cfile=3A///C=3A/lucene-
=3E 2=2E0=2E0/docs/api/org/apache/lucene/analysis/Analyzer=2Ehtml=3E a)
=3E =

=3E form of the QueryParser=2C where the Analyzer is the same one you =

=3E used when
=3E indexing=2E There are some circumstances where you want to use diffe=
rent
=3E analyzers when querying and when indexing=2C but don=27t go there =

=3E unless you
=3E need to =3CG=3E=2E=2E=2E=2E
=3E =

=3E If that doesn=27t do what you want=2C I=27d really recommend is that=
 you =

=3E make your
=3E own custom Analyzer=2C built on=2C say=2C WhitespaceTokenizer=2C =

=3E LowerCaseFilter=2EThis is usually the way I=27ve approached this kin=
d =

=3E of problem=2E And use *that*
=3E one at index and query time=2E
=3E =

=3E There=27s an example in Lucene In Action=2C see the SynonymAnalyzer =

=3E example=2EThat example is MUCH more complex than you=27ll need =3CG=3E=
=2E=2E=2E
=3E =

=3E Best
=3E Erick
=3E =

=3E On 2/8/07=2C Xavier To =3Cto=2Exavier=40courrier=2Euqam=2Eca=3E wrot=
e=3A
=3E =3E
=3E =3E Hey !
=3E =3E
=3E =3E I tried using WhitespaceAnalyzer during the search and it works=2E=
 I
=3E =3E refactored the tokenizing process so it uses TokenStream instead=
 of
=3E =3E StringTokenizer and it works fine for one thing =3A the query =22=
this =

=3E is a test=22
=3E =3E becomes =22thisisatest=22=2E I fixed it by adding a space after =
each =

=3E token except
=3E =3E for the last one=2C but is there a clean way to do it =3F I=27m =
using
=3E =3E WhitespaceTokenizer=2E
=3E =3E
=3E =3E Thanks a bunch !
=3E =3E
=3E =3E Xavier T=F4
=3E =3E Bacc=2E en Informatique et G=E9nie Logiciel
=3E =3E to=2Exavier=40courrier=2Euqam=2Eca
=3E =3E (450)434-8905
=3E =3E
=3E =3E ----- Message d=27origine -----
=3E =3E De=3A Erick Erickson =3Cerickerickson=40gmail=2Ecom=3E
=3E =3E Date=3A Mercredi=2C F=E9vrier 7=2C 2007 4=3A28 pm
=3E =3E Objet=3A Re=3A Re =3A Re=3A Question concerning Analyzers
=3E =3E
=3E =3E =3E Then the analyzer you=27re using when parsing the query is s=
tripping
=3E =3E =3E them=2E It
=3E =3E =3E must be different than the one you use when indexing somehow=
=2E =

=3E At least
=3E =3E =3E that=27s the only explanation I can imagine=2E=2E=2E=2E
=3E =3E =3E
=3E =3E =3E Perhaps=2C somehow=2C you are using a default analyzer when =
you =

=3E parse a
=3E =3E =3E query=3FOr you aren=27t specifying the field when you query =
and =

=3E thus a
=3E =3E =3E default is
=3E =3E =3E used=3F Or you are using a PerFieldAnalyzerWrapper and dropp=
ing
=3E =3E =3E through to the
=3E =3E =3E default=3F or =3F=3F=3F=3F
=3E =3E =3E
=3E =3E =3E Just for yucks=2C I=27d try using WhitespaceAnalyzer on a qu=
ery with
=3E =3E =3E somethingyou *know* exists in the index for a particular fie=
ld and
=3E =3E =3E work my way up to
=3E =3E =3E whatever your real problem is in small steps (since you can=27=
t post
=3E =3E =3E code=3CG=3E)=2E=2E=2E=2E=2E=2E
=3E =3E =3E
=3E =3E =3E Best
=3E =3E =3E Erick
=3E =3E =3E
=3E =3E =3E On 2/7/07=2C Xavier To =3Cto=2Exavier=40courrier=2Euqam=2Eca=
=3E wrote=3A
=3E =3E =3E =3E
=3E =3E =3E =3E Thanks Erik and Erick=2C
=3E =3E =3E =3E
=3E =3E =3E =3E I guess my question was rather unclear=2C but you guys a=
nswered it
=3E =3E =3E all the
=3E =3E =3E =3E same =3A it is impossible for an analyzer to index somet=
hing and
=3E =3E =3E having the
=3E =3E =3E =3E same analyzer ignore the thing indexed during a search=2E=

=3E =3E =3E =3E
=3E =3E =3E =3E If it makes everything clearer=2C during indexation=2C n=
umbers  are
=3E =3E =3E indexed=2C=3E whether or not they are accompanied by letters=
 ( 2003 =

=3E and=3E =3E 4wd are both
=3E =3E =3E =3E indexed)=2E That=27s fine=2C since we want this=2E  The =
problem occurs
=3E =3E =3E when I try to
=3E =3E =3E =3E search for them =3A They are ignored=2E I know they are =
indexed
=3E =3E =3E because I ran
=3E =3E =3E =3E through the index using Luke=2E
=3E =3E =3E =3E
=3E =3E =3E =3E Any thoughts regarding this problem =3F
=3E =3E =3E =3E
=3E =3E =3E =3E Xavier T=F4
=3E =3E =3E =3E Bacc=2E en Informatique et G=E9nie Logiciel
=3E =3E =3E =3E to=2Exavier=40courrier=2Euqam=2Eca
=3E =3E =3E =3E (450)434-8905
=3E =3E =3E =3E
=3E =3E =3E =3E ----- Message d=27origine -----
=3E =3E =3E =3E De=3A Erik Hatcher =3Cerik=40ehatchersolutions=2Ecom=3E
=3E =3E =3E =3E Date=3A Mercredi=2C F=E9vrier 7=2C 2007 3=3A15 pm
=3E =3E =3E =3E Objet=3A Re=3A Question concerning Analyzers
=3E =3E =3E =3E
=3E =3E =3E =3E =3E There is no requirement that you use the same analyz=
er to
=3E =3E =3E search as
=3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E you used to index=2E  So=2C yes=2C you could certain=
ly index =

=3E things and
=3E =3E =3E =3E =3E ignore them during a search=2E
=3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E       Erik
=3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E On Feb 7=2C 2007=2C at 2=3A10 PM=2C Xavier To wrote=3A=

=3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E Hi=2C me again
=3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E I=27m still stuck with my search engine=2C but s=
omething popped
=3E =3E =3E in my
=3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E head =3A Can an analyzer index something but ign=
ore it =

=3E during a
=3E =3E =3E =3E =3E =3E search =3F I=27m asking this because now that I=27=
ve been =

=3E searching=3E =3E for=3E =3E
=3E =3E =3E =3E =3E =3E an answer=2C I=27ve come to think that I should =
redo the whole
=3E =3E =3E search=3E =3E
=3E =3E =3E =3E =3E =3E engine=2C but I don=27t want to reproduce the sa=
me error as =

=3E we have
=3E =3E =3E =3E =3E =3E now=2E It would be stupid to accidentaly redo th=
e same =

=3E mistake=2E I
=3E =3E =3E =3E =3E =3E still haven=27t received news from my seniors ab=
out me posting
=3E =3E =3E code=3E =3E
=3E =3E =3E =3E =3E =3E and all=2E=2E=2E
=3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E Xavier T=F4
=3E =3E =3E =3E =3E =3E Bacc=2E en Informatique et G=E9nie Logiciel
=3E =3E =3E =3E =3E =3E to=2Exavier=40courrier=2Euqam=2Eca
=3E =3E =3E =3E =3E =3E (450)434-8905
=3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E ------------------------------------------------=
----------
=3E ----
=3E =3E =3E ----
=3E =3E =3E =3E =3E ---
=3E =3E =3E =3E =3E =3E To unsubscribe=2C e-mail=3A java-user-
=3E unsubscribe=40lucene=2Eapache=2Eorg=3E =3E =3E =3E =3E For additiona=
l commands=2C e-
=3E mail=3A java-user-
=3E =3E =3E help=40lucene=2Eapache=2Eorg=3E =3E
=3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E ----------------------------------------------------=
--------
=3E ----
=3E =3E =3E ----
=3E =3E =3E =3E =3E -
=3E =3E =3E =3E =3E To unsubscribe=2C e-mail=3A java-user-
=3E unsubscribe=40lucene=2Eapache=2Eorg=3E =3E =3E =3E For additional co=
mmands=2C e-
=3E mail=3A java-user-help=40lucene=2Eapache=2Eorg
=3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E
=3E =3E =3E =3E
=3E =3E =3E =3E
=3E =3E =3E =3E --------------------------------------------------------=
------
=3E ----
=3E =3E =3E ---
=3E =3E =3E =3E To unsubscribe=2C e-mail=3A java-user-unsubscribe=40luce=
ne=2Eapache=2Eorg
=3E =3E =3E =3E For additional commands=2C e-mail=3A java-user-
=3E help=40lucene=2Eapache=2Eorg=3E =3E =3E
=3E =3E =3E =3E
=3E =3E =3E
=3E =3E
=3E =3E
=3E =3E ----------------------------------------------------------------=
--
=3E ---
=3E =3E To unsubscribe=2C e-mail=3A java-user-unsubscribe=40lucene=2Eapa=
che=2Eorg
=3E =3E For additional commands=2C e-mail=3A java-user-help=40lucene=2Ea=
pache=2Eorg
=3E =3E
=3E =3E
=3E 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 08 22:13:51 2007
Return-Path: <java-user-return-26028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82730 invoked from network); 8 Feb 2007 22:13:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2007 22:13:50 -0000
Received: (qmail 43131 invoked by uid 500); 8 Feb 2007 22:13:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43090 invoked by uid 500); 8 Feb 2007 22:13:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43079 invoked by uid 99); 8 Feb 2007 22:13:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 14:13:50 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 14:13:39 -0800
Received: by nf-out-0910.google.com with SMTP id i2so876776nfe
        for <java-user@lucene.apache.org>; Thu, 08 Feb 2007 14:13:18 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=lLxZMZdOw0sYDplDqWGZ/jgfCD1X5BsPeDZesQlqRtQVTlpoWwLtJEWghGRR3g5Fkr1S8E49v4uphqGyaV7UrQ6G5ds5GNL5AyTLm2iJDG8vGYXXwg2N9JZlxxCD2q3yQxD4hkcbKZPhMTCQ2bzPwGIh8TBXXExvBJrGeZ5DxzY=
Received: by 10.82.148.7 with SMTP id v7mr6598550bud.1170972797919;
        Thu, 08 Feb 2007 14:13:17 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Thu, 8 Feb 2007 14:13:17 -0800 (PST)
Message-ID: <359a92830702081413u838689fq353c6f2f14e78a5c@mail.gmail.com>
Date: Thu, 8 Feb 2007 17:13:17 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Re : Re: Re : Re: Re : Re: Question concerning Analyzers
In-Reply-To: <3f18f92dbae.45cb4c6e@courrier.uqam.ca>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_38130_30389294.1170972797729"
References: <3f18f92dbae.45cb4c6e@courrier.uqam.ca>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_38130_30389294.1170972797729
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

See below....

On 2/8/07, Xavier To <to.xavier@courrier.uqam.ca> wrote:
>
> Thanks for helping me.
>
> I don't really understand what you mean by my Tokenizer "corrects" what
> the indexing analyzer did.


You shouldn't have to do change the tokens in the usual case to get the
search to work right. You mentioned tokenizing the search string, but then
having to add whitespaces back in. That step is the step that "corrects"
what the analyzer did. I put "corrects" in quotes because it isn't really
correcting anything, the analyzers are doing what they should. But if you
have to make this manual change, you're trying to fix up the query string t=
o
match what the analyzer did at index time. Which will leave you correcting
this, then that, then the other thing when it would be much better just to
use the same analyzer if possible. I've just seen too many "oh, there's one
more thing" statements in this situation.


By the way, the tokenizer we use is one provided in Lucene. My guess is tha=
t
> the problem was that the analyzer was thought to be the same by the guy w=
ho
> made the search engine, but the querying analyzer is fetched inside a JAR=
 by
> a bean. Could it be that this is the problem ?


It shouldn't be if the same analyzer is fetched inside the bean. Can't you
check what analyzer is used in both cases?

Erick


Xavier T=F4
> Bacc. en Informatique et G=E9nie Logiciel
> to.xavier@courrier.uqam.ca
> (450)434-8905
>
> ----- Message d'origine -----
> De: Erick Erickson <erickerickson@gmail.com>
> Date: Jeudi, F=E9vrier 8, 2007 12:51 pm
> Objet: Re: Re : Re: Re : Re: Question concerning Analyzers
>
> > Well, you've proved that your problem is that the analyzer you're
> > using when
> > querying isn't matching what you use during indexing. I think that
> > whatyou've done will lead you into significant problems down the
> > road as your
> > tokenizer then has to "correct" for what the index analyzer did
> > though.
> > What would probably be MUCH less work in the long run is to align the
> > analyzer you use at query time with the analyzer you use at index
> > time. You
> > can use a PerFieldAnalyzerWrapper to handle different fields in
> > differentways. Forget your custom tokenizer for the time being,
> > just try using the
> > same analyzer during searching that you used during indexing. You
> > can use
> > the
> > *QueryParser<file:///C:/lucene-
> > 2.0.0/docs/api/org/apache/lucene/queryParser/QueryParser.html#QueryPars=
er%28java.lang.String,%20org.apache.lucene.analysis.Analyzer%29>*(String
> <http://java.sun.com/j2se/1.4/docs/api/java/lang/String.html> f,
> > Analyzer<file:///C:/lucene-
> > 2.0.0/docs/api/org/apache/lucene/analysis/Analyzer.html> a)
> >
> > form of the QueryParser, where the Analyzer is the same one you
> > used when
> > indexing. There are some circumstances where you want to use different
> > analyzers when querying and when indexing, but don't go there
> > unless you
> > need to <G>....
> >
> > If that doesn't do what you want, I'd really recommend is that you
> > make your
> > own custom Analyzer, built on, say, WhitespaceTokenizer,
> > LowerCaseFilter.This is usually the way I've approached this kind
> > of problem. And use *that*
> > one at index and query time.
> >
> > There's an example in Lucene In Action, see the SynonymAnalyzer
> > example.That example is MUCH more complex than you'll need <G>...
> >
> > Best
> > Erick
> >
> > On 2/8/07, Xavier To <to.xavier@courrier.uqam.ca> wrote:
> > >
> > > Hey !
> > >
> > > I tried using WhitespaceAnalyzer during the search and it works. I
> > > refactored the tokenizing process so it uses TokenStream instead of
> > > StringTokenizer and it works fine for one thing : the query "this
> > is a test"
> > > becomes "thisisatest". I fixed it by adding a space after each
> > token except
> > > for the last one, but is there a clean way to do it ? I'm using
> > > WhitespaceTokenizer.
> > >
> > > Thanks a bunch !
> > >
> > > Xavier T=F4
> > > Bacc. en Informatique et G=E9nie Logiciel
> > > to.xavier@courrier.uqam.ca
> > > (450)434-8905
> > >
> > > ----- Message d'origine -----
> > > De: Erick Erickson <erickerickson@gmail.com>
> > > Date: Mercredi, F=E9vrier 7, 2007 4:28 pm
> > > Objet: Re: Re : Re: Question concerning Analyzers
> > >
> > > > Then the analyzer you're using when parsing the query is stripping
> > > > them. It
> > > > must be different than the one you use when indexing somehow.
> > At least
> > > > that's the only explanation I can imagine....
> > > >
> > > > Perhaps, somehow, you are using a default analyzer when you
> > parse a
> > > > query?Or you aren't specifying the field when you query and
> > thus a
> > > > default is
> > > > used? Or you are using a PerFieldAnalyzerWrapper and dropping
> > > > through to the
> > > > default? or ????
> > > >
> > > > Just for yucks, I'd try using WhitespaceAnalyzer on a query with
> > > > somethingyou *know* exists in the index for a particular field and
> > > > work my way up to
> > > > whatever your real problem is in small steps (since you can't post
> > > > code<G>)......
> > > >
> > > > Best
> > > > Erick
> > > >
> > > > On 2/7/07, Xavier To <to.xavier@courrier.uqam.ca> wrote:
> > > > >
> > > > > Thanks Erik and Erick,
> > > > >
> > > > > I guess my question was rather unclear, but you guys answered it
> > > > all the
> > > > > same : it is impossible for an analyzer to index something and
> > > > having the
> > > > > same analyzer ignore the thing indexed during a search.
> > > > >
> > > > > If it makes everything clearer, during indexation, numbers  are
> > > > indexed,> whether or not they are accompanied by letters ( 2003
> > and> > 4wd are both
> > > > > indexed). That's fine, since we want this.  The problem occurs
> > > > when I try to
> > > > > search for them : They are ignored. I know they are indexed
> > > > because I ran
> > > > > through the index using Luke.
> > > > >
> > > > > Any thoughts regarding this problem ?
> > > > >
> > > > > Xavier T=F4
> > > > > Bacc. en Informatique et G=E9nie Logiciel
> > > > > to.xavier@courrier.uqam.ca
> > > > > (450)434-8905
> > > > >
> > > > > ----- Message d'origine -----
> > > > > De: Erik Hatcher <erik@ehatchersolutions.com>
> > > > > Date: Mercredi, F=E9vrier 7, 2007 3:15 pm
> > > > > Objet: Re: Question concerning Analyzers
> > > > >
> > > > > > There is no requirement that you use the same analyzer to
> > > > search as
> > > > > >
> > > > > > you used to index.  So, yes, you could certainly index
> > things and
> > > > > > ignore them during a search.
> > > > > >
> > > > > >       Erik
> > > > > >
> > > > > >
> > > > > > On Feb 7, 2007, at 2:10 PM, Xavier To wrote:
> > > > > >
> > > > > > > Hi, me again
> > > > > > >
> > > > > > > I'm still stuck with my search engine, but something popped
> > > > in my
> > > > > >
> > > > > > > head : Can an analyzer index something but ignore it
> > during a
> > > > > > > search ? I'm asking this because now that I've been
> > searching> > for> >
> > > > > > > an answer, I've come to think that I should redo the whole
> > > > search> >
> > > > > > > engine, but I don't want to reproduce the same error as
> > we have
> > > > > > > now. It would be stupid to accidentaly redo the same
> > mistake. I
> > > > > > > still haven't received news from my seniors about me posting
> > > > code> >
> > > > > > > and all...
> > > > > > >
> > > > > > > Xavier T=F4
> > > > > > > Bacc. en Informatique et G=E9nie Logiciel
> > > > > > > to.xavier@courrier.uqam.ca
> > > > > > > (450)434-8905
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > > ----------------------------------------------------------
> > ----
> > > > ----
> > > > > > ---
> > > > > > > To unsubscribe, e-mail: java-user-
> > unsubscribe@lucene.apache.org> > > > > For additional commands, e-
> > mail: java-user-
> > > > help@lucene.apache.org> >
> > > > > >
> > > > > > ------------------------------------------------------------
> > ----
> > > > ----
> > > > > > -
> > > > > > To unsubscribe, e-mail: java-user-
> > unsubscribe@lucene.apache.org> > > > For additional commands, e-
> > mail: java-user-help@lucene.apache.org
> > > > > >
> > > > > >
> > > > >
> > > > >
> > > > > --------------------------------------------------------------
> > ----
> > > > ---
> > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail: java-user-
> > help@lucene.apache.org> > >
> > > > >
> > > >
> > >
> > >
> > > ------------------------------------------------------------------
> > ---
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_38130_30389294.1170972797729--

From java-user-return-26029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 09 03:14:40 2007
Return-Path: <java-user-return-26029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81216 invoked from network); 9 Feb 2007 03:14:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2007 03:14:39 -0000
Received: (qmail 57669 invoked by uid 500); 9 Feb 2007 03:14:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57644 invoked by uid 500); 9 Feb 2007 03:14:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57633 invoked by uid 99); 9 Feb 2007 03:14:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 19:14:38 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Feb 2007 19:14:27 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 2963B5B776; Thu,  8 Feb 2007 19:14:06 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 225DC7F403
	for <java-user@lucene.apache.org>; Thu,  8 Feb 2007 19:14:06 -0800 (PST)
Date: Thu, 8 Feb 2007 19:14:06 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: How to return results with null values?
In-Reply-To: <8870825.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0702081909420.32557@hal.rescomp.berkeley.edu>
References: <8844779.post@talk.nabble.com>
 <OFA6F54BBF.0ACC946D-ON8525727B.0048972D-8525727B.0048A81E@BIPT.COM>
 <OF6A1936DA.BCD14F24-ON8525727B.0048BF2B-8525727B.0048DEEA@BIPT.COM>
 <8847539.post@talk.nabble.com> <OF843C2886.24B18CD8-ON8525727B.00553C20-8525727B.00558F52@BIPT.COM>
 <Pine.LNX.4.58.0702071355330.17424@hal.rescomp.berkeley.edu>
 <8870825.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: > take a look at RangeFilter and set both the upper and lower terms to be
: > null --
: > or if you need a Query and can't use a filter, do the same thing with
: > ConstantScoreRangeQuery.

: This is like, it scores sth for each document that has a field, no matter
: the content?

it scores the same value for all docs that have a field value within the
range -- if the range is unbounded then it will match anything with any
value.  if you are using the QueryParser you can get this behavior with
field:[* TO *] (but i don't remember when that was commited to the trunk,
so your milage may vary)


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 09 08:33:02 2007
Return-Path: <java-user-return-26030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49382 invoked from network); 9 Feb 2007 08:33:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2007 08:33:01 -0000
Received: (qmail 61203 invoked by uid 500); 9 Feb 2007 08:33:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61130 invoked by uid 500); 9 Feb 2007 08:33:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61108 invoked by uid 99); 9 Feb 2007 08:33:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 00:33:00 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 00:32:49 -0800
Received: by nf-out-0910.google.com with SMTP id i2so987948nfe
        for <java-user@lucene.apache.org>; Fri, 09 Feb 2007 00:32:28 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:content-transfer-encoding:message-id:content-type:to:from:subject:date:x-mailer;
        b=pYeBM1Iye+g4ddtISFamZ3I1naAaBYnZDGZOx9OjNySgdHiLOE6mPstaFfBns2WZqlWypnq69xqaZNpRdAIKd8j0xyMk76+yPV3qXDkS/dGLEThJQVwm5WdNOB8zy2Mh22acMrpFuJX0qKED8L/fWXNwH5MPqh/3limyPjafg4c=
Received: by 10.82.167.5 with SMTP id p5mr4054779bue.1171009947649;
        Fri, 09 Feb 2007 00:32:27 -0800 (PST)
Received: from ?192.168.1.6? ( [83.249.110.75])
        by mx.google.com with ESMTP id n22sm14669578nfc.2007.02.09.00.32.22;
        Fri, 09 Feb 2007 00:32:27 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
Content-Transfer-Encoding: 7bit
Message-Id: <93EC1D73-AAA4-4331-AB63-B1AFB1B0067F@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: karl wettin <karl.wettin@gmail.com>
Subject: Reduction based "more like this"?
Date: Fri, 9 Feb 2007 09:31:05 +0100
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

I just woke up thinking it would be cool to attempt reducing the data  
of all documents using PCA (or so) and store the output in a new  
field per dimention introduced in order to find similair documents by  
placing a simple proximity query. Did anyone attempt something like  
this?

I did not think this through that much. Nor do I need this feature.  
Just think it would be a cool experiment.

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 09 10:36:05 2007
Return-Path: <java-user-return-26031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86788 invoked from network); 9 Feb 2007 10:36:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2007 10:36:04 -0000
Received: (qmail 7269 invoked by uid 500); 9 Feb 2007 10:36:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7240 invoked by uid 500); 9 Feb 2007 10:36:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7229 invoked by uid 99); 9 Feb 2007 10:36:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 02:36:03 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 217.69.20.190 as permitted sender)
Received: from [217.69.20.190] (HELO cluster-d.mailcontrol.com) (217.69.20.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 02:35:49 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly24d.srv.mailcontrol.com (MailControl) with SMTP id l19AZMMC018497
	for <java-user@lucene.apache.org>; Fri, 9 Feb 2007 10:35:22 GMT
Received: From SGBD012104.wsatkins.com ([10.202.26.18]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 1171017300265; Fri, 9 Feb 2007 10:35:00 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012104.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 9 Feb 2007 10:35:00 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Empty search
Date: Fri, 9 Feb 2007 10:34:58 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705BD089A@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Empty search
Thread-Index: AcdLq+9g4wxg6dcVRJ2l1iDR8wRkFgAieQjA
References: <BC1CFC544422CB4A934908E126A4742705B9BE0C@SGBLOW2101.wsatkins.com> <E2BDF70E-628E-48F9-8D6D-08F5A99EB9E8@gmail.com>
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 09 Feb 2007 10:35:00.0154 (UTC) FILETIME=[F34261A0:01C74C35]
X-Scanned-By: MailControl A-07-06-80 (www.mailcontrol.com) on 10.68.0.134
X-Virus-Checked: Checked by ClamAV on apache.org

Yep it is the queryparser that I'm referring to.  Just sounds odd to me.
An empty string search should be handled properly I think.  It should
simply  to nothing.=20

-----Original Message-----
From: karl wettin [mailto:karl.wettin@gmail.com]=20
Sent: 08 February 2007 18:05
To: java-user@lucene.apache.org
Subject: Re: Empty search


8 feb 2007 kl. 18.46 skrev Kainth, Sachin:

> Is it my imagination or does lucene produce an error if you present it

> with an empty string to search for?

I presume you are referring to the QueryParser? It sounds about right
that it would throw an exception at some point if you supplied it an
empty input.


--
karl



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



This message has been scanned for viruses by MailControl - (see
http://bluepages.wsatkins.co.uk/?4318150)


This email and any attached files are confidential and copyright protected.=
 If you are not the addressee, any dissemination of this communication is s=
trictly prohibited. Unless otherwise expressly agreed in writing, nothing s=
tated in this communication shall be legally binding.

The ultimate parent company of the Atkins Group is WS Atkins plc.  Register=
ed in England No. 1885586.  Registered Office Woodcote Grove, Ashley Road, =
Epsom, Surrey KT18 5BW.

Consider the environment. Please don't print this e-mail unless you really =
need to.=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 09 10:41:30 2007
Return-Path: <java-user-return-26032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87601 invoked from network); 9 Feb 2007 10:41:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2007 10:41:28 -0000
Received: (qmail 14637 invoked by uid 500); 9 Feb 2007 10:41:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14599 invoked by uid 500); 9 Feb 2007 10:41:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14586 invoked by uid 99); 9 Feb 2007 10:41:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 02:41:30 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 217.68.146.190 as permitted sender)
Received: from [217.68.146.190] (HELO cluster-b.mailcontrol.com) (217.68.146.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 02:41:16 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly29b.srv.mailcontrol.com (MailControl) with SMTP id l19Aeq3h031171
	for <java-user@lucene.apache.org>; Fri, 9 Feb 2007 10:40:53 GMT
Received: From SGBD012103.wsatkins.com ([10.202.26.17]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 1171017632164; Fri, 9 Feb 2007 10:40:32 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012103.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 9 Feb 2007 10:40:31 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: categorisation
Date: Fri, 9 Feb 2007 10:40:30 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705BD08E3@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: categorisation
Thread-Index: AcdLsGOblrUbnvD6TPy0Ax86EDMfsgAhkAPg
References: <BC1CFC544422CB4A934908E126A4742705B9BDDF@SGBLOW2101.wsatkins.com> <58D0497D-3CC2-4947-96D6-1D7ADE08828F@ehatchersolutions.com>
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 09 Feb 2007 10:40:31.0717 (UTC) FILETIME=[B8E2E150:01C74C36]
X-Scanned-By: MailControl A-07-06-80 (www.mailcontrol.com) on 10.66.0.139
X-Virus-Checked: Checked by ClamAV on apache.org

It makes sense to me only if you tell me that all the bits in the BitSet
"all" will be 1.=20

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
Sent: 08 February 2007 18:37
To: java-user@lucene.apache.org
Subject: Re: categorisation


On Feb 8, 2007, at 12:36 PM, Kainth, Sachin wrote:

> Chris has given an example of how to perform categorisation of lucene=20
> searches:
>
> String[] mfgs =3D ...;
>   String query =3D "+category:cameras +price:[0 to 10]";
>   Query q =3D QueryParser.parse(query);
>   Hits results =3D searcher.search(q, mySort)
>   BitSet all =3D (new QueryFilter(q)).bits(reader)
>   int[] mfg_counts =3D new int[mfgs.length];
>   for i in (0 to mfgs.length) {
>      BitSet these =3D (new QueryFilter(new TermQuery("mfg",mfgs=20
> [i]))).bits(reader);
>      these.and(all)
>      mfg_counts[i] =3D these.cardinality();
>   }
>
> What I don't understand though is what this line does:
>
> BitSet all =3D (new QueryFilter(q)).bits(reader)
>
> Anyone have any ideas?

"all" is a BitSet lit up for the documents that matched "query".=20=20=20
"these" (the BitSet for a particular category) is .anded with "all"=20=20
to get the counts _left over_ for each category given "query".

Make sense?

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



This message has been scanned for viruses by MailControl - (see
http://bluepages.wsatkins.co.uk/?4318150)


This email and any attached files are confidential and copyright protected.=
 If you are not the addressee, any dissemination of this communication is s=
trictly prohibited. Unless otherwise expressly agreed in writing, nothing s=
tated in this communication shall be legally binding.

The ultimate parent company of the Atkins Group is WS Atkins plc.  Register=
ed in England No. 1885586.  Registered Office Woodcote Grove, Ashley Road, =
Epsom, Surrey KT18 5BW.

Consider the environment. Please don't print this e-mail unless you really =
need to.=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 09 10:47:44 2007
Return-Path: <java-user-return-26033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88929 invoked from network); 9 Feb 2007 10:47:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2007 10:47:43 -0000
Received: (qmail 25574 invoked by uid 500); 9 Feb 2007 10:47:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25538 invoked by uid 500); 9 Feb 2007 10:47:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25527 invoked by uid 99); 9 Feb 2007 10:47:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 02:47:42 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 02:47:31 -0800
Received: by ug-out-1314.google.com with SMTP id k40so753356ugc
        for <java-user@lucene.apache.org>; Fri, 09 Feb 2007 02:47:10 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=F0GenWQb9zhYYmG1DSHzoZ+6nUCtKUH2gO0p3+Dw7xC37SD6ud/1/RbSvmx8ITMrd/ojRFSrJdbh2WlEk2Yyjr+rg0UoE11H4s3wa9/aYh1WZbSXPvOATiMcB5diPIo1do2FgsLaU9+YWgccyj5tfsYlQHdjuv5SPSSQLRZdEFw=
Received: by 10.67.106.3 with SMTP id i3mr5112919ugm.1171018030623;
        Fri, 09 Feb 2007 02:47:10 -0800 (PST)
Received: from ?192.168.1.3? ( [83.249.110.75])
        by mx.google.com with ESMTP id e1sm4763331ugf.2007.02.09.02.47.09;
        Fri, 09 Feb 2007 02:47:09 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705BD089A@SGBLOW2101.wsatkins.com>
References: <BC1CFC544422CB4A934908E126A4742705B9BE0C@SGBLOW2101.wsatkins.com> <E2BDF70E-628E-48F9-8D6D-08F5A99EB9E8@gmail.com> <BC1CFC544422CB4A934908E126A4742705BD089A@SGBLOW2101.wsatkins.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <636CFF26-05CB-43F1-886C-9DF796BFD461@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Empty search
Date: Fri, 9 Feb 2007 11:45:57 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


9 feb 2007 kl. 11.34 skrev Kainth, Sachin:

> Yep it is the queryparser that I'm referring to.  Just sounds odd  
> to me.
> An empty string search should be handled properly I think.  It should
> simply  to nothing.

I did not look any closer at this than reading you post, but what  
about if you made sure that no empty strings is passed to the  
QueryParser?

I'd expect an exception if I passed a string to a parser that did not  
match the grammar defined by it. And the QueryParser is a parser, not  
a searcher. It apptempts to parse a query from the string value. If  
it was to do nothing then it would return null. And that would just  
cause another exception.


-- 
karl

>
> -----Original Message-----
> From: karl wettin [mailto:karl.wettin@gmail.com]
> Sent: 08 February 2007 18:05
> To: java-user@lucene.apache.org
> Subject: Re: Empty search
>
>
> 8 feb 2007 kl. 18.46 skrev Kainth, Sachin:
>
>> Is it my imagination or does lucene produce an error if you  
>> present it
>
>> with an empty string to search for?
>
> I presume you are referring to the QueryParser? It sounds about right
> that it would throw an exception at some point if you supplied it an
> empty input.
>
>
> --
> karl
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> This message has been scanned for viruses by MailControl - (see
> http://bluepages.wsatkins.co.uk/?4318150)
>
>
> This email and any attached files are confidential and copyright  
> protected. If you are not the addressee, any dissemination of this  
> communication is strictly prohibited. Unless otherwise expressly  
> agreed in writing, nothing stated in this communication shall be  
> legally binding.
>
> The ultimate parent company of the Atkins Group is WS Atkins plc.   
> Registered in England No. 1885586.  Registered Office Woodcote  
> Grove, Ashley Road, Epsom, Surrey KT18 5BW.
>
> Consider the environment. Please don't print this e-mail unless you  
> really need to.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 09 10:55:10 2007
Return-Path: <java-user-return-26034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89890 invoked from network); 9 Feb 2007 10:55:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2007 10:55:10 -0000
Received: (qmail 36909 invoked by uid 500); 9 Feb 2007 10:55:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36871 invoked by uid 500); 9 Feb 2007 10:55:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36860 invoked by uid 99); 9 Feb 2007 10:55:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 02:55:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 217.68.146.190 as permitted sender)
Received: from [217.68.146.190] (HELO cluster-b.mailcontrol.com) (217.68.146.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 02:54:57 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly11b.srv.mailcontrol.com (MailControl) with SMTP id l19AsWYQ010758
	for <java-user@lucene.apache.org>; Fri, 9 Feb 2007 10:54:32 GMT
Received: From SGBD012104.wsatkins.com ([10.202.26.18]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 1171018174100; Fri, 9 Feb 2007 10:49:34 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012104.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 9 Feb 2007 10:49:33 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Empty search
Date: Fri, 9 Feb 2007 10:49:32 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705BD0948@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Empty search
Thread-Index: AcdMN8s3K1oRRMPlQ86cPmHjLce6WAAACKEg
References: <BC1CFC544422CB4A934908E126A4742705B9BE0C@SGBLOW2101.wsatkins.com> <E2BDF70E-628E-48F9-8D6D-08F5A99EB9E8@gmail.com> <BC1CFC544422CB4A934908E126A4742705BD089A@SGBLOW2101.wsatkins.com> <636CFF26-05CB-43F1-886C-9DF796BFD461@gmail.com>
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 09 Feb 2007 10:49:33.0984 (UTC) FILETIME=[FC1A4200:01C74C37]
X-Scanned-By: MailControl A-07-06-80 (www.mailcontrol.com) on 10.66.0.121
X-Virus-Checked: Checked by ClamAV on apache.org

You are right I didn't think about it at all to be honest.=20

-----Original Message-----
From: karl wettin [mailto:karl.wettin@gmail.com]=20
Sent: 09 February 2007 10:46
To: java-user@lucene.apache.org
Subject: Re: Empty search


9 feb 2007 kl. 11.34 skrev Kainth, Sachin:

> Yep it is the queryparser that I'm referring to.  Just sounds odd to=20
> me.
> An empty string search should be handled properly I think.  It should=20
> simply  to nothing.

I did not look any closer at this than reading you post, but what about
if you made sure that no empty strings is passed to the QueryParser?

I'd expect an exception if I passed a string to a parser that did not
match the grammar defined by it. And the QueryParser is a parser, not a
searcher. It apptempts to parse a query from the string value. If it was
to do nothing then it would return null. And that would just cause
another exception.


--
karl

>
> -----Original Message-----
> From: karl wettin [mailto:karl.wettin@gmail.com]
> Sent: 08 February 2007 18:05
> To: java-user@lucene.apache.org
> Subject: Re: Empty search
>
>
> 8 feb 2007 kl. 18.46 skrev Kainth, Sachin:
>
>> Is it my imagination or does lucene produce an error if you present=20
>> it
>
>> with an empty string to search for?
>
> I presume you are referring to the QueryParser? It sounds about right=20
> that it would throw an exception at some point if you supplied it an=20
> empty input.
>
>
> --
> karl
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> This message has been scanned for viruses by MailControl - (see
> http://bluepages.wsatkins.co.uk/?4318150)
>
>
> This email and any attached files are confidential and copyright=20
> protected. If you are not the addressee, any dissemination of this=20
> communication is strictly prohibited. Unless otherwise expressly=20
> agreed in writing, nothing stated in this communication shall be=20
> legally binding.
>
> The ultimate parent company of the Atkins Group is WS Atkins plc.  =20
> Registered in England No. 1885586.  Registered Office Woodcote Grove,=20
> Ashley Road, Epsom, Surrey KT18 5BW.
>
> Consider the environment. Please don't print this e-mail unless you=20
> really need to.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 09 11:52:58 2007
Return-Path: <java-user-return-26035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7195 invoked from network); 9 Feb 2007 11:52:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2007 11:52:57 -0000
Received: (qmail 10996 invoked by uid 500); 9 Feb 2007 11:52:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10170 invoked by uid 500); 9 Feb 2007 11:52:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10159 invoked by uid 99); 9 Feb 2007 11:52:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 03:52:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.177.33] (HELO web26011.mail.ukl.yahoo.com) (217.146.177.33)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 09 Feb 2007 03:52:44 -0800
Received: (qmail 6045 invoked by uid 60001); 9 Feb 2007 11:52:23 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=bpMqPWd0Eh8BoGaZwAsWYxO+dOHK4GfX5sgGLr4csc9Vs26d6bQDSNCoTy+Ay6SGo7aer1A16qlv6GBkZ/zZxZINUE8KonOYScoPV5Ymld8XSuHYFDZtGfotzrsvGr4ffXMKZtsO923QgMWkidDyk2i0DO7K7W3S3nEaa/MXa0g=;
X-YMail-OSG: VEo.5aIVM1lL60sJWLO3abdawls8ciKwE5EiBmecVsCSsy7NqASBJ6GEoQhCmcvNEZW7kmAB9re6RUtpMNpHv1_2Dn.KDXlaAqRAx4gKFEsXup7WOkTvaRLF4MdBfmqTWXAowUdDoGacob_UxCaBtBEibiK86gGtvRAwhuIqkIdtdwD51iD4Yq11mw--
Received: from [193.36.230.96] by web26011.mail.ukl.yahoo.com via HTTP; Fri, 09 Feb 2007 11:52:23 GMT
X-Mailer: YahooMailRC/368.7 YahooMailWebService/0.6.132.7
Date: Fri, 9 Feb 2007 11:52:23 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Reduction based "more like this"?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <181449.5358.qm@web26011.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

The distinguishing characteristics you mark out and put in a field may not =
be so distinguishing as more content is added to an index (e.g. use of new =
terminology like "podcast" becomes more prevalent). Maintaining/regeneratin=
g this field in anything other than a static index then starts to look like=
 a non-trivial overhead.=0A=0AWhile we are musing on this, I'm not sure tha=
t with things like MoreLikeThis (or the BooleanQuery scoring?) we have cons=
idered the true value of *coincidences* of terms rather than independently =
summing their individual IDFs. For example, given terms "female", "John" an=
d "London" - all 3 may have equal IDF but should a document representing a =
female in London be given equal weighting to a document representing  the r=
arer example of a female who happens to be called "John"? Considering these=
 pairings adds extra complexity/cost but might be an interesting avenue to =
explore for some apps when selecting distinguishing characteristics or weig=
hting query results.=0A=0ACheers=0AMark=0A=0A=0A=0A=0A----- Original Messag=
e ----=0AFrom: karl wettin <karl.wettin@gmail.com>=0ATo: java-user@lucene.a=
pache.org=0ASent: Friday, 9 February, 2007 8:31:05 AM=0ASubject: Reduction =
based "more like this"?=0A=0AI just woke up thinking it would be cool to at=
tempt reducing the data  =0Aof all documents using PCA (or so) and store th=
e output in a new  =0Afield per dimention introduced in order to find simil=
air documents by  =0Aplacing a simple proximity query. Did anyone attempt s=
omething like  =0Athis?=0A=0AI did not think this through that much. Nor do=
 I need this feature.  =0AJust think it would be a cool experiment.=0A=0A--=
 =0Akarl=0A=0A-------------------------------------------------------------=
--------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=
=0AFor additional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=
=0A=0A=0A=0A=0A=09=09=0A___________________________________________________=
________ =0AInbox full of unwanted email? Get leading protection and 1GB st=
orage with All New Yahoo! Mail. http://uk.docs.yahoo.com/nowyoucan.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 09 12:02:13 2007
Return-Path: <java-user-return-26036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10414 invoked from network); 9 Feb 2007 12:02:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2007 12:02:12 -0000
Received: (qmail 25894 invoked by uid 500); 9 Feb 2007 12:02:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25850 invoked by uid 500); 9 Feb 2007 12:02:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25833 invoked by uid 99); 9 Feb 2007 12:02:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 04:02:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 04:02:02 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 3D86E30EFC18; Fri,  9 Feb 2007 07:01:41 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 5399D30EFC19
	for <java-user@lucene.apache.org>; Fri,  9 Feb 2007 07:01:28 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705BD08E3@SGBLOW2101.wsatkins.com>
References: <BC1CFC544422CB4A934908E126A4742705B9BDDF@SGBLOW2101.wsatkins.com> <58D0497D-3CC2-4947-96D6-1D7ADE08828F@ehatchersolutions.com> <BC1CFC544422CB4A934908E126A4742705BD08E3@SGBLOW2101.wsatkins.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <28F19771-D2FF-4B5B-811D-43936DF71ADF@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: categorisation
Date: Fri, 9 Feb 2007 07:01:24 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.1.1


On Feb 9, 2007, at 5:40 AM, Kainth, Sachin wrote:
> It makes sense to me only if you tell me that all the bits in the  
> BitSet
> "all" will be 1.

well, ok, so the "all" may be misleading.   call it queryBits instead  
then :)

"all" means *all documents that match the query*, though.

it wouldn't make sense to AND a bitset with one that is all 1's always.

	Erik


>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: 08 February 2007 18:37
> To: java-user@lucene.apache.org
> Subject: Re: categorisation
>
>
> On Feb 8, 2007, at 12:36 PM, Kainth, Sachin wrote:
>
>> Chris has given an example of how to perform categorisation of lucene
>> searches:
>>
>> String[] mfgs = ...;
>>   String query = "+category:cameras +price:[0 to 10]";
>>   Query q = QueryParser.parse(query);
>>   Hits results = searcher.search(q, mySort)
>>   BitSet all = (new QueryFilter(q)).bits(reader)
>>   int[] mfg_counts = new int[mfgs.length];
>>   for i in (0 to mfgs.length) {
>>      BitSet these = (new QueryFilter(new TermQuery("mfg",mfgs
>> [i]))).bits(reader);
>>      these.and(all)
>>      mfg_counts[i] = these.cardinality();
>>   }
>>
>> What I don't understand though is what this line does:
>>
>> BitSet all = (new QueryFilter(q)).bits(reader)
>>
>> Anyone have any ideas?
>
> "all" is a BitSet lit up for the documents that matched "query".
> "these" (the BitSet for a particular category) is .anded with "all"
> to get the counts _left over_ for each category given "query".
>
> Make sense?
>
> 	Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> This message has been scanned for viruses by MailControl - (see
> http://bluepages.wsatkins.co.uk/?4318150)
>
>
> This email and any attached files are confidential and copyright  
> protected. If you are not the addressee, any dissemination of this  
> communication is strictly prohibited. Unless otherwise expressly  
> agreed in writing, nothing stated in this communication shall be  
> legally binding.
>
> The ultimate parent company of the Atkins Group is WS Atkins plc.   
> Registered in England No. 1885586.  Registered Office Woodcote  
> Grove, Ashley Road, Epsom, Surrey KT18 5BW.
>
> Consider the environment. Please don't print this e-mail unless you  
> really need to.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 09 12:05:40 2007
Return-Path: <java-user-return-26037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11411 invoked from network); 9 Feb 2007 12:05:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2007 12:05:40 -0000
Received: (qmail 32433 invoked by uid 500); 9 Feb 2007 12:05:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32406 invoked by uid 500); 9 Feb 2007 12:05:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32395 invoked by uid 99); 9 Feb 2007 12:05:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 04:05:40 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 217.69.20.190 as permitted sender)
Received: from [217.69.20.190] (HELO cluster-d.mailcontrol.com) (217.69.20.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 04:05:26 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly27d.srv.mailcontrol.com (MailControl) with SMTP id l19C4uVI005156
	for <java-user@lucene.apache.org>; Fri, 9 Feb 2007 12:04:57 GMT
Received: From SGBD012103.wsatkins.com ([10.202.26.17]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 1171022677559; Fri, 9 Feb 2007 12:04:37 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012103.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 9 Feb 2007 12:04:37 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: categorisation
Date: Fri, 9 Feb 2007 12:04:35 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705BD0C01@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: categorisation
Thread-Index: AcdMQipUGcIGUN6NQBuCl8mCKkdcmwAAEWGA
References: <BC1CFC544422CB4A934908E126A4742705B9BDDF@SGBLOW2101.wsatkins.com> <58D0497D-3CC2-4947-96D6-1D7ADE08828F@ehatchersolutions.com> <BC1CFC544422CB4A934908E126A4742705BD08E3@SGBLOW2101.wsatkins.com> <28F19771-D2FF-4B5B-811D-43936DF71ADF@ehatchersolutions.com>
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 09 Feb 2007 12:04:37.0017 (UTC) FILETIME=[781E9090:01C74C42]
X-Scanned-By: MailControl A-07-06-80 (www.mailcontrol.com) on 10.68.0.137
X-Virus-Checked: Checked by ClamAV on apache.org

Ahhh it all makes sense to me now :-)=20

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
Sent: 09 February 2007 12:01
To: java-user@lucene.apache.org
Subject: Re: categorisation


On Feb 9, 2007, at 5:40 AM, Kainth, Sachin wrote:
> It makes sense to me only if you tell me that all the bits in the=20
> BitSet "all" will be 1.

well, ok, so the "all" may be misleading.   call it queryBits instead =20
then :)

"all" means *all documents that match the query*, though.

it wouldn't make sense to AND a bitset with one that is all 1's always.

	Erik


>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: 08 February 2007 18:37
> To: java-user@lucene.apache.org
> Subject: Re: categorisation
>
>
> On Feb 8, 2007, at 12:36 PM, Kainth, Sachin wrote:
>
>> Chris has given an example of how to perform categorisation of lucene
>> searches:
>>
>> String[] mfgs =3D ...;
>>   String query =3D "+category:cameras +price:[0 to 10]";
>>   Query q =3D QueryParser.parse(query);
>>   Hits results =3D searcher.search(q, mySort)
>>   BitSet all =3D (new QueryFilter(q)).bits(reader)
>>   int[] mfg_counts =3D new int[mfgs.length];
>>   for i in (0 to mfgs.length) {
>>      BitSet these =3D (new QueryFilter(new TermQuery("mfg",mfgs=20
>> [i]))).bits(reader);
>>      these.and(all)
>>      mfg_counts[i] =3D these.cardinality();
>>   }
>>
>> What I don't understand though is what this line does:
>>
>> BitSet all =3D (new QueryFilter(q)).bits(reader)
>>
>> Anyone have any ideas?
>
> "all" is a BitSet lit up for the documents that matched "query".
> "these" (the BitSet for a particular category) is .anded with "all"
> to get the counts _left over_ for each category given "query".
>
> Make sense?
>
> 	Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> This message has been scanned for viruses by MailControl - (see
> http://bluepages.wsatkins.co.uk/?4318150)
>
>
> This email and any attached files are confidential and copyright=20
> protected. If you are not the addressee, any dissemination of this=20
> communication is strictly prohibited. Unless otherwise expressly=20
> agreed in writing, nothing stated in this communication shall be=20
> legally binding.
>
> The ultimate parent company of the Atkins Group is WS Atkins plc.  =20
> Registered in England No. 1885586.  Registered Office Woodcote Grove,=20
> Ashley Road, Epsom, Surrey KT18 5BW.
>
> Consider the environment. Please don't print this e-mail unless you=20
> really need to.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 09 12:08:36 2007
Return-Path: <java-user-return-26038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12387 invoked from network); 9 Feb 2007 12:08:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2007 12:08:35 -0000
Received: (qmail 37256 invoked by uid 500); 9 Feb 2007 12:08:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37236 invoked by uid 500); 9 Feb 2007 12:08:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37158 invoked by uid 99); 9 Feb 2007 12:08:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 04:08:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 217.69.20.190 as permitted sender)
Received: from [217.69.20.190] (HELO cluster-d.mailcontrol.com) (217.69.20.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 04:08:19 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly23d.srv.mailcontrol.com (MailControl) with SMTP id l19C7rHZ024095
	for <java-user@lucene.apache.org>; Fri, 9 Feb 2007 12:07:55 GMT
Received: From SGBD012104.wsatkins.com ([10.202.26.18]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 117102285664; Fri, 9 Feb 2007 12:07:36 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012104.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 9 Feb 2007 12:07:35 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: categorisation
Date: Fri, 9 Feb 2007 12:07:34 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705BD0C15@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: categorisation
Thread-Index: AcdMQipUGcIGUN6NQBuCl8mCKkdcmwAAEWGAAAAU1VA=
References: <BC1CFC544422CB4A934908E126A4742705B9BDDF@SGBLOW2101.wsatkins.com> <58D0497D-3CC2-4947-96D6-1D7ADE08828F@ehatchersolutions.com> <BC1CFC544422CB4A934908E126A4742705BD08E3@SGBLOW2101.wsatkins.com> <28F19771-D2FF-4B5B-811D-43936DF71ADF@ehatchersolutions.com> <BC1CFC544422CB4A934908E126A4742705BD0C01@SGBLOW2101.wsatkins.com>
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 09 Feb 2007 12:07:35.0657 (UTC) FILETIME=[E298DD90:01C74C42]
X-Scanned-By: MailControl A-07-06-80 (www.mailcontrol.com) on 10.68.0.133
X-Virus-Checked: Checked by ClamAV on apache.org

But does that not imply that a second search is made against the index
by the line:

BitSet all =3D (new QueryFilter(q)).bits(reader)

-----Original Message-----
From: Kainth, Sachin [mailto:Sachin.Kainth@atkinsglobal.com]=20
Sent: 09 February 2007 12:05
To: java-user@lucene.apache.org
Subject: RE: categorisation

Ahhh it all makes sense to me now :-)=20

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: 09 February 2007 12:01
To: java-user@lucene.apache.org
Subject: Re: categorisation


On Feb 9, 2007, at 5:40 AM, Kainth, Sachin wrote:
> It makes sense to me only if you tell me that all the bits in the=20
> BitSet "all" will be 1.

well, ok, so the "all" may be misleading.   call it queryBits instead =20
then :)

"all" means *all documents that match the query*, though.

it wouldn't make sense to AND a bitset with one that is all 1's always.

	Erik


>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: 08 February 2007 18:37
> To: java-user@lucene.apache.org
> Subject: Re: categorisation
>
>
> On Feb 8, 2007, at 12:36 PM, Kainth, Sachin wrote:
>
>> Chris has given an example of how to perform categorisation of lucene
>> searches:
>>
>> String[] mfgs =3D ...;
>>   String query =3D "+category:cameras +price:[0 to 10]";
>>   Query q =3D QueryParser.parse(query);
>>   Hits results =3D searcher.search(q, mySort)
>>   BitSet all =3D (new QueryFilter(q)).bits(reader)
>>   int[] mfg_counts =3D new int[mfgs.length];
>>   for i in (0 to mfgs.length) {
>>      BitSet these =3D (new QueryFilter(new TermQuery("mfg",mfgs=20
>> [i]))).bits(reader);
>>      these.and(all)
>>      mfg_counts[i] =3D these.cardinality();
>>   }
>>
>> What I don't understand though is what this line does:
>>
>> BitSet all =3D (new QueryFilter(q)).bits(reader)
>>
>> Anyone have any ideas?
>
> "all" is a BitSet lit up for the documents that matched "query".
> "these" (the BitSet for a particular category) is .anded with "all"
> to get the counts _left over_ for each category given "query".
>
> Make sense?
>
> 	Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> This message has been scanned for viruses by MailControl - (see
> http://bluepages.wsatkins.co.uk/?4318150)
>
>
> This email and any attached files are confidential and copyright=20
> protected. If you are not the addressee, any dissemination of this=20
> communication is strictly prohibited. Unless otherwise expressly=20
> agreed in writing, nothing stated in this communication shall be=20
> legally binding.
>
> The ultimate parent company of the Atkins Group is WS Atkins plc.  =20
> Registered in England No. 1885586.  Registered Office Woodcote Grove,=20
> Ashley Road, Epsom, Surrey KT18 5BW.
>
> Consider the environment. Please don't print this e-mail unless you=20
> really need to.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 09 13:46:39 2007
Return-Path: <java-user-return-26039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35655 invoked from network); 9 Feb 2007 13:46:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2007 13:46:38 -0000
Received: (qmail 57021 invoked by uid 500); 9 Feb 2007 13:46:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56936 invoked by uid 500); 9 Feb 2007 13:46:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56907 invoked by uid 99); 9 Feb 2007 13:46:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 05:46:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [132.208.250.6] (HELO anis.telecom.uqam.ca) (132.208.250.6)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 05:46:23 -0800
Received: from anis.telecom.uqam.ca (anis.telecom.uqam.ca [132.208.250.6])
	by sortant.uqam.ca (8.13.8/8.12.1) with SMTP id l19DU3CI022663
	for <java-user@lucene.apache.org>; Fri, 9 Feb 2007 08:30:09 -0500 (EST)
Received: from antivirus.uqam.ca ([127.0.0.1])
 by anis.telecom.uqam.ca (SAVSMTP 3.1.1.32) with SMTP id M2007020908300827443
 for <java-user@lucene.apache.org>; Fri, 09 Feb 2007 08:30:08 -0500
Received: from courriel2.sitel.uqam.ca (courriel2.sitel.uqam.ca [132.208.250.43])
	by intrant.uqam.ca (8.13.8/8.12.2/uqam-filtres) with ESMTP id l19DTR4k018871
	for <java-user@lucene.apache.org>; Fri, 9 Feb 2007 08:29:31 -0500 (EST)
X-UQAM-Spam-Filter: Filtre-Uqam re:  abuse@uqam.ca
Received: from courrier.uqam.ca ([127.0.0.1]) by courriel2.sitel.uqam.ca
 (Sun Java System Messaging Server 6.1 HotFix 0.11 (built Jan 28 2005))
 with ESMTP id <0JD700MV76T2SO80@courriel2.sitel.uqam.ca> for
 java-user@lucene.apache.org; Fri, 09 Feb 2007 08:29:26 -0500 (EST)
Received: from [206.47.141.21] by courriel2.sitel.uqam.ca (mshttpd); Fri,
 09 Feb 2007 08:29:26 -0500
Date: Fri, 09 Feb 2007 08:29:26 -0500
From: Xavier To <to.xavier@courrier.uqam.ca>
Subject: Re : Re: Re : Re: Re : Re: Re : Re: Question concerning Analyzers
To: java-user@lucene.apache.org
Message-id: <c1b2a726258e.45cc30e6@courrier.uqam.ca>
MIME-version: 1.0
X-Mailer: Sun Java(tm) System Messenger Express 6.1 HotFix 0.11 (built Jan 28
 2005)
Content-type: text/plain; charset=iso-8859-1
Content-language: fr
Content-transfer-encoding: quoted-printable
Content-disposition: inline
X-Accept-Language: fr
Priority: normal
X-Virus-Checked: Checked by ClamAV on apache.org

Hey=2C thanks a lot for taking so much time here=2E=2E=2E

I did check the and they appear to be the same=2E=2E=2Eat least they are=
 same class and same package=2E I just noticed something =3A they are us=
ing LowerCaseFilter=2E=2E=2E=2E I was going to say =22could it be the so=
urce of the numbers being ignored =3F=22 but it shouldn=27t since they a=
re indexed (the modification of using WhitespaceAnalyzer during the sear=
ch did return the exact number of results for =222002=22 which is 5=2E =


As for the tokenizing=2C shouldn=27t a query be tokenized =3F It was alr=
eady like that=2C and all I did was modify it so it would use Lucene=27s=
 tokenizing methods=2E=2E=2E If a query shouldn=27t be tokenized=2C mayb=
e tokenizing it is the problem=2E If it should be tokenized=2C  what am =
I doing wrong that forces me to add a single blank after each token =3F =
I mean=2C I don=27t understand what the analyzer has to do with the toke=
nizing process=2E=2E=2E The reason why I add a blank is because the toke=
ns are getting appended into a string=2C and then the string is sent thr=
ough QueryParser=2E =


As I said=2C I don=27t really understand why the guy who made this searc=
h engine didn=27t just sent the query as a long string instead of tokeni=
zing it=2C but since it was working fine with alphabetical searches=2C I=
 said to myself =22it must be the way to do it=22=2E

Xavier T=F4
Bacc=2E en Informatique et G=E9nie Logiciel
to=2Exavier=40courrier=2Euqam=2Eca
(450)434-8905

----- Message d=27origine -----
De=3A Erick Erickson =3Cerickerickson=40gmail=2Ecom=3E
Date=3A Jeudi=2C F=E9vrier 8=2C 2007 5=3A13 pm
Objet=3A Re=3A Re =3A Re=3A Re =3A Re=3A Re =3A Re=3A Question concernin=
g Analyzers

=3E See below=2E=2E=2E=2E
=3E =

=3E On 2/8/07=2C Xavier To =3Cto=2Exavier=40courrier=2Euqam=2Eca=3E wrot=
e=3A
=3E =3E
=3E =3E Thanks for helping me=2E
=3E =3E
=3E =3E I don=27t really understand what you mean by my Tokenizer =

=3E =22corrects=22 what
=3E =3E the indexing analyzer did=2E
=3E =

=3E =

=3E You shouldn=27t have to do change the tokens in the usual case to ge=
t =

=3E thesearch to work right=2E You mentioned tokenizing the search =

=3E string=2C but then
=3E having to add whitespaces back in=2E That step is the step that =

=3E =22corrects=22what the analyzer did=2E I put =22corrects=22 in quote=
s because =

=3E it isn=27t really
=3E correcting anything=2C the analyzers are doing what they should=2E B=
ut =

=3E if you
=3E have to make this manual change=2C you=27re trying to fix up the que=
ry =

=3E string to
=3E match what the analyzer did at index time=2E Which will leave you =

=3E correctingthis=2C then that=2C then the other thing when it would be=
 =

=3E much better just to
=3E use the same analyzer if possible=2E I=27ve just seen too many =22oh=
=2C =

=3E there=27s one
=3E more thing=22 statements in this situation=2E
=3E =

=3E =

=3E By the way=2C the tokenizer we use is one provided in Lucene=2E My =

=3E guess is that
=3E =3E the problem was that the analyzer was thought to be the same by =

=3E the guy who
=3E =3E made the search engine=2C but the querying analyzer is fetched =

=3E inside a JAR by
=3E =3E a bean=2E Could it be that this is the problem =3F
=3E =

=3E =

=3E It shouldn=27t be if the same analyzer is fetched inside the bean=2E=
 =

=3E Can=27t you
=3E check what analyzer is used in both cases=3F
=3E =

=3E Erick
=3E =

=3E =

=3E Xavier T=F4
=3E =3E Bacc=2E en Informatique et G=E9nie Logiciel
=3E =3E to=2Exavier=40courrier=2Euqam=2Eca
=3E =3E (450)434-8905
=3E =3E
=3E =3E ----- Message d=27origine -----
=3E =3E De=3A Erick Erickson =3Cerickerickson=40gmail=2Ecom=3E
=3E =3E Date=3A Jeudi=2C F=E9vrier 8=2C 2007 12=3A51 pm
=3E =3E Objet=3A Re=3A Re =3A Re=3A Re =3A Re=3A Question concerning Ana=
lyzers
=3E =3E
=3E =3E =3E Well=2C you=27ve proved that your problem is that the analyz=
er you=27re
=3E =3E =3E using when
=3E =3E =3E querying isn=27t matching what you use during indexing=2E I =
think that
=3E =3E =3E whatyou=27ve done will lead you into significant problems do=
wn the
=3E =3E =3E road as your
=3E =3E =3E tokenizer then has to =22correct=22 for what the index analy=
zer did
=3E =3E =3E though=2E
=3E =3E =3E What would probably be MUCH less work in the long run is to =

=3E align the
=3E =3E =3E analyzer you use at query time with the analyzer you use at =
index
=3E =3E =3E time=2E You
=3E =3E =3E can use a PerFieldAnalyzerWrapper to handle different fields=
 in
=3E =3E =3E differentways=2E Forget your custom tokenizer for the time b=
eing=2C
=3E =3E =3E just try using the
=3E =3E =3E same analyzer during searching that you used during indexing=
=2E You
=3E =3E =3E can use
=3E =3E =3E the
=3E =3E =3E *QueryParser=3Cfile=3A///C=3A/lucene-
=3E =3E =3E =

=3E 2=2E0=2E0/docs/api/org/apache/lucene/queryParser/QueryParser=2Ehtml=23=
QueryParser=2528java=2Elang=2EString=2C=2520org=2Eapache=2Elucene=2Eanal=
ysis=2EAnalyzer=2529=3E*(String=3E =3Chttp=3A//java=2Esun=2Ecom/j2se/1=2E=
4/docs/api/java/lang/String=2Ehtml=3E f=2C
=3E =3E =3E Analyzer=3Cfile=3A///C=3A/lucene-
=3E =3E =3E 2=2E0=2E0/docs/api/org/apache/lucene/analysis/Analyzer=2Ehtm=
l=3E a)
=3E =3E =3E
=3E =3E =3E form of the QueryParser=2C where the Analyzer is the same on=
e you
=3E =3E =3E used when
=3E =3E =3E indexing=2E There are some circumstances where you want to u=
se =

=3E different=3E =3E analyzers when querying and when indexing=2C but do=
n=27t =

=3E go there
=3E =3E =3E unless you
=3E =3E =3E need to =3CG=3E=2E=2E=2E=2E
=3E =3E =3E
=3E =3E =3E If that doesn=27t do what you want=2C I=27d really recommend=
 is that you
=3E =3E =3E make your
=3E =3E =3E own custom Analyzer=2C built on=2C say=2C WhitespaceTokenize=
r=2C
=3E =3E =3E LowerCaseFilter=2EThis is usually the way I=27ve approached =
this kind
=3E =3E =3E of problem=2E And use *that*
=3E =3E =3E one at index and query time=2E
=3E =3E =3E
=3E =3E =3E There=27s an example in Lucene In Action=2C see the SynonymA=
nalyzer
=3E =3E =3E example=2EThat example is MUCH more complex than you=27ll ne=
ed =3CG=3E=2E=2E=2E
=3E =3E =3E
=3E =3E =3E Best
=3E =3E =3E Erick
=3E =3E =3E
=3E =3E =3E On 2/8/07=2C Xavier To =3Cto=2Exavier=40courrier=2Euqam=2Eca=
=3E wrote=3A
=3E =3E =3E =3E
=3E =3E =3E =3E Hey !
=3E =3E =3E =3E
=3E =3E =3E =3E I tried using WhitespaceAnalyzer during the search and i=
t =

=3E works=2E I
=3E =3E =3E =3E refactored the tokenizing process so it uses TokenStream=
 =

=3E instead of
=3E =3E =3E =3E StringTokenizer and it works fine for one thing =3A the =
query =

=3E =22this=3E =3E is a test=22
=3E =3E =3E =3E becomes =22thisisatest=22=2E I fixed it by adding a spac=
e after each
=3E =3E =3E token except
=3E =3E =3E =3E for the last one=2C but is there a clean way to do it =3F=
 I=27m using
=3E =3E =3E =3E WhitespaceTokenizer=2E
=3E =3E =3E =3E
=3E =3E =3E =3E Thanks a bunch !
=3E =3E =3E =3E
=3E =3E =3E =3E Xavier T=F4
=3E =3E =3E =3E Bacc=2E en Informatique et G=E9nie Logiciel
=3E =3E =3E =3E to=2Exavier=40courrier=2Euqam=2Eca
=3E =3E =3E =3E (450)434-8905
=3E =3E =3E =3E
=3E =3E =3E =3E ----- Message d=27origine -----
=3E =3E =3E =3E De=3A Erick Erickson =3Cerickerickson=40gmail=2Ecom=3E
=3E =3E =3E =3E Date=3A Mercredi=2C F=E9vrier 7=2C 2007 4=3A28 pm
=3E =3E =3E =3E Objet=3A Re=3A Re =3A Re=3A Question concerning Analyzer=
s
=3E =3E =3E =3E
=3E =3E =3E =3E =3E Then the analyzer you=27re using when parsing the qu=
ery is =

=3E stripping=3E =3E =3E =3E them=2E It
=3E =3E =3E =3E =3E must be different than the one you use when indexing=
 somehow=2E
=3E =3E =3E At least
=3E =3E =3E =3E =3E that=27s the only explanation I can imagine=2E=2E=2E=
=2E
=3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E Perhaps=2C somehow=2C you are using a default analyz=
er when you
=3E =3E =3E parse a
=3E =3E =3E =3E =3E query=3FOr you aren=27t specifying the field when yo=
u query and
=3E =3E =3E thus a
=3E =3E =3E =3E =3E default is
=3E =3E =3E =3E =3E used=3F Or you are using a PerFieldAnalyzerWrapper a=
nd dropping
=3E =3E =3E =3E =3E through to the
=3E =3E =3E =3E =3E default=3F or =3F=3F=3F=3F
=3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E Just for yucks=2C I=27d try using WhitespaceAnalyzer=
 on a query =

=3E with=3E =3E =3E =3E somethingyou *know* exists in the index for a =

=3E particular field and
=3E =3E =3E =3E =3E work my way up to
=3E =3E =3E =3E =3E whatever your real problem is in small steps (since =
you =

=3E can=27t post
=3E =3E =3E =3E =3E code=3CG=3E)=2E=2E=2E=2E=2E=2E
=3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E Best
=3E =3E =3E =3E =3E Erick
=3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E On 2/7/07=2C Xavier To =3Cto=2Exavier=40courrier=2Eu=
qam=2Eca=3E wrote=3A
=3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E Thanks Erik and Erick=2C
=3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E I guess my question was rather unclear=2C but yo=
u guys =

=3E answered it
=3E =3E =3E =3E =3E all the
=3E =3E =3E =3E =3E =3E same =3A it is impossible for an analyzer to ind=
ex =

=3E something and
=3E =3E =3E =3E =3E having the
=3E =3E =3E =3E =3E =3E same analyzer ignore the thing indexed during a =
search=2E
=3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E If it makes everything clearer=2C during indexat=
ion=2C =

=3E numbers  are
=3E =3E =3E =3E =3E indexed=2C=3E whether or not they are accompanied by=
 letters ( =

=3E 2003=3E =3E and=3E =3E 4wd are both
=3E =3E =3E =3E =3E =3E indexed)=2E That=27s fine=2C since we want this=2E=
  The problem =

=3E occurs=3E =3E =3E =3E when I try to
=3E =3E =3E =3E =3E =3E search for them =3A They are ignored=2E I know t=
hey are indexed
=3E =3E =3E =3E =3E because I ran
=3E =3E =3E =3E =3E =3E through the index using Luke=2E
=3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E Any thoughts regarding this problem =3F
=3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E Xavier T=F4
=3E =3E =3E =3E =3E =3E Bacc=2E en Informatique et G=E9nie Logiciel
=3E =3E =3E =3E =3E =3E to=2Exavier=40courrier=2Euqam=2Eca
=3E =3E =3E =3E =3E =3E (450)434-8905
=3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E ----- Message d=27origine -----
=3E =3E =3E =3E =3E =3E De=3A Erik Hatcher =3Cerik=40ehatchersolutions=2E=
com=3E
=3E =3E =3E =3E =3E =3E Date=3A Mercredi=2C F=E9vrier 7=2C 2007 3=3A15 p=
m
=3E =3E =3E =3E =3E =3E Objet=3A Re=3A Question concerning Analyzers
=3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E There is no requirement that you use the sam=
e analyzer to
=3E =3E =3E =3E =3E search as
=3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E you used to index=2E  So=2C yes=2C you could=
 certainly index
=3E =3E =3E things and
=3E =3E =3E =3E =3E =3E =3E ignore them during a search=2E
=3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E       Erik
=3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E On Feb 7=2C 2007=2C at 2=3A10 PM=2C Xavier T=
o wrote=3A
=3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E =3E Hi=2C me again
=3E =3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E =3E I=27m still stuck with my search engine=2C=
 but something =

=3E popped=3E =3E =3E =3E in my
=3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E =3E head =3A Can an analyzer index something=
 but ignore it
=3E =3E =3E during a
=3E =3E =3E =3E =3E =3E =3E =3E search =3F I=27m asking this because now=
 that I=27ve been
=3E =3E =3E searching=3E =3E for=3E =3E
=3E =3E =3E =3E =3E =3E =3E =3E an answer=2C I=27ve come to think that I=
 should redo the =

=3E whole=3E =3E =3E =3E search=3E =3E
=3E =3E =3E =3E =3E =3E =3E =3E engine=2C but I don=27t want to reproduc=
e the same error as
=3E =3E =3E we have
=3E =3E =3E =3E =3E =3E =3E =3E now=2E It would be stupid to accidentaly=
 redo the same
=3E =3E =3E mistake=2E I
=3E =3E =3E =3E =3E =3E =3E =3E still haven=27t received news from my se=
niors about me =

=3E posting=3E =3E =3E =3E code=3E =3E
=3E =3E =3E =3E =3E =3E =3E =3E and all=2E=2E=2E
=3E =3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E =3E Xavier T=F4
=3E =3E =3E =3E =3E =3E =3E =3E Bacc=2E en Informatique et G=E9nie Logic=
iel
=3E =3E =3E =3E =3E =3E =3E =3E to=2Exavier=40courrier=2Euqam=2Eca
=3E =3E =3E =3E =3E =3E =3E =3E (450)434-8905
=3E =3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E =3E ----------------------------------------=
--------------
=3E ----
=3E =3E =3E ----
=3E =3E =3E =3E =3E ----
=3E =3E =3E =3E =3E =3E =3E ---
=3E =3E =3E =3E =3E =3E =3E =3E To unsubscribe=2C e-mail=3A java-user-
=3E =3E =3E unsubscribe=40lucene=2Eapache=2Eorg=3E =3E =3E =3E =3E For a=
dditional commands=2C =

=3E e-
=3E =3E =3E mail=3A java-user-
=3E =3E =3E =3E =3E help=40lucene=2Eapache=2Eorg=3E =3E
=3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E --------------------------------------------=
------------
=3E ----
=3E =3E =3E ----
=3E =3E =3E =3E =3E ----
=3E =3E =3E =3E =3E =3E =3E -
=3E =3E =3E =3E =3E =3E =3E To unsubscribe=2C e-mail=3A java-user-
=3E =3E =3E unsubscribe=40lucene=2Eapache=2Eorg=3E =3E =3E =3E For addit=
ional commands=2C e-
=3E =3E =3E mail=3A java-user-help=40lucene=2Eapache=2Eorg
=3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E ------------------------------------------------=
----------
=3E ----
=3E =3E =3E ----
=3E =3E =3E =3E =3E ---
=3E =3E =3E =3E =3E =3E To unsubscribe=2C e-mail=3A java-user-
=3E unsubscribe=40lucene=2Eapache=2Eorg=3E =3E =3E =3E =3E For additiona=
l commands=2C e-
=3E mail=3A java-user-
=3E =3E =3E help=40lucene=2Eapache=2Eorg=3E =3E =3E
=3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E
=3E =3E =3E =3E
=3E =3E =3E =3E
=3E =3E =3E =3E --------------------------------------------------------=
------
=3E ----
=3E =3E =3E ---
=3E =3E =3E =3E To unsubscribe=2C e-mail=3A java-user-unsubscribe=40luce=
ne=2Eapache=2Eorg
=3E =3E =3E =3E For additional commands=2C e-mail=3A java-user-
=3E help=40lucene=2Eapache=2Eorg=3E =3E =3E
=3E =3E =3E =3E
=3E =3E =3E
=3E =3E
=3E =3E
=3E =3E ----------------------------------------------------------------=
--
=3E ---
=3E =3E To unsubscribe=2C e-mail=3A java-user-unsubscribe=40lucene=2Eapa=
che=2Eorg
=3E =3E For additional commands=2C e-mail=3A java-user-help=40lucene=2Ea=
pache=2Eorg
=3E =3E
=3E =3E
=3E 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 09 14:06:45 2007
Return-Path: <java-user-return-26040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42418 invoked from network); 9 Feb 2007 14:06:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2007 14:06:45 -0000
Received: (qmail 90436 invoked by uid 500); 9 Feb 2007 14:06:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90417 invoked by uid 500); 9 Feb 2007 14:06:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90406 invoked by uid 99); 9 Feb 2007 14:06:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 06:06:45 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 06:06:34 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 7C31430EFC19; Fri,  9 Feb 2007 09:06:13 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id B647130EFC18
	for <java-user@lucene.apache.org>; Fri,  9 Feb 2007 09:06:03 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705BD0C15@SGBLOW2101.wsatkins.com>
References: <BC1CFC544422CB4A934908E126A4742705B9BDDF@SGBLOW2101.wsatkins.com> <58D0497D-3CC2-4947-96D6-1D7ADE08828F@ehatchersolutions.com> <BC1CFC544422CB4A934908E126A4742705BD08E3@SGBLOW2101.wsatkins.com> <28F19771-D2FF-4B5B-811D-43936DF71ADF@ehatchersolutions.com> <BC1CFC544422CB4A934908E126A4742705BD0C01@SGBLOW2101.wsatkins.com> <BC1CFC544422CB4A934908E126A4742705BD0C15@SGBLOW2101.wsatkins.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <C3C9C2FC-65CE-4969-BAA8-222868B186D7@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: categorisation
Date: Fri, 9 Feb 2007 09:05:59 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1


On Feb 9, 2007, at 7:07 AM, Kainth, Sachin wrote:
> But does that not imply that a second search is made against the index
> by the line:
>
> BitSet all = (new QueryFilter(q)).bits(reader)

Yeah, if you want to return facet counts and results in the same  
sweep, yes.  If all you want are the counts, only one query is needed.

Caching is key.  Solr - See the Light!

	Erik



>
> -----Original Message-----
> From: Kainth, Sachin [mailto:Sachin.Kainth@atkinsglobal.com]
> Sent: 09 February 2007 12:05
> To: java-user@lucene.apache.org
> Subject: RE: categorisation
>
> Ahhh it all makes sense to me now :-)
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: 09 February 2007 12:01
> To: java-user@lucene.apache.org
> Subject: Re: categorisation
>
>
> On Feb 9, 2007, at 5:40 AM, Kainth, Sachin wrote:
>> It makes sense to me only if you tell me that all the bits in the
>> BitSet "all" will be 1.
>
> well, ok, so the "all" may be misleading.   call it queryBits instead
> then :)
>
> "all" means *all documents that match the query*, though.
>
> it wouldn't make sense to AND a bitset with one that is all 1's  
> always.
>
> 	Erik
>
>
>>
>> -----Original Message-----
>> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
>> Sent: 08 February 2007 18:37
>> To: java-user@lucene.apache.org
>> Subject: Re: categorisation
>>
>>
>> On Feb 8, 2007, at 12:36 PM, Kainth, Sachin wrote:
>>
>>> Chris has given an example of how to perform categorisation of  
>>> lucene
>>> searches:
>>>
>>> String[] mfgs = ...;
>>>   String query = "+category:cameras +price:[0 to 10]";
>>>   Query q = QueryParser.parse(query);
>>>   Hits results = searcher.search(q, mySort)
>>>   BitSet all = (new QueryFilter(q)).bits(reader)
>>>   int[] mfg_counts = new int[mfgs.length];
>>>   for i in (0 to mfgs.length) {
>>>      BitSet these = (new QueryFilter(new TermQuery("mfg",mfgs
>>> [i]))).bits(reader);
>>>      these.and(all)
>>>      mfg_counts[i] = these.cardinality();
>>>   }
>>>
>>> What I don't understand though is what this line does:
>>>
>>> BitSet all = (new QueryFilter(q)).bits(reader)
>>>
>>> Anyone have any ideas?
>>
>> "all" is a BitSet lit up for the documents that matched "query".
>> "these" (the BitSet for a particular category) is .anded with "all"
>> to get the counts _left over_ for each category given "query".
>>
>> Make sense?
>>
>> 	Erik
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> This message has been scanned for viruses by MailControl - (see
>> http://bluepages.wsatkins.co.uk/?4318150)
>>
>>
>> This email and any attached files are confidential and copyright
>> protected. If you are not the addressee, any dissemination of this
>> communication is strictly prohibited. Unless otherwise expressly
>> agreed in writing, nothing stated in this communication shall be
>> legally binding.
>>
>> The ultimate parent company of the Atkins Group is WS Atkins plc.
>> Registered in England No. 1885586.  Registered Office Woodcote Grove,
>> Ashley Road, Epsom, Surrey KT18 5BW.
>>
>> Consider the environment. Please don't print this e-mail unless you
>> really need to.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 09 14:09:56 2007
Return-Path: <java-user-return-26041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43594 invoked from network); 9 Feb 2007 14:09:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2007 14:09:55 -0000
Received: (qmail 1115 invoked by uid 500); 9 Feb 2007 14:09:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1085 invoked by uid 500); 9 Feb 2007 14:09:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1074 invoked by uid 99); 9 Feb 2007 14:09:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 06:09:54 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 217.79.216.190 as permitted sender)
Received: from [217.79.216.190] (HELO cluster-e.mailcontrol.com) (217.79.216.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 06:09:41 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly49e.srv.mailcontrol.com (MailControl) with SMTP id l19E9DGm013936
	for <java-user@lucene.apache.org>; Fri, 9 Feb 2007 14:09:13 GMT
Received: From SGBD012104.wsatkins.com ([10.202.26.18]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 1171030128219; Fri, 9 Feb 2007 14:08:48 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012104.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 9 Feb 2007 14:08:48 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: categorisation
Date: Fri, 9 Feb 2007 14:08:47 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705BD1025@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: categorisation
Thread-Index: AcdMU5Oj61ltrrvsRRWO9Ia8R098QwAAC3MA
References: <BC1CFC544422CB4A934908E126A4742705B9BDDF@SGBLOW2101.wsatkins.com> <58D0497D-3CC2-4947-96D6-1D7ADE08828F@ehatchersolutions.com> <BC1CFC544422CB4A934908E126A4742705BD08E3@SGBLOW2101.wsatkins.com> <28F19771-D2FF-4B5B-811D-43936DF71ADF@ehatchersolutions.com> <BC1CFC544422CB4A934908E126A4742705BD0C01@SGBLOW2101.wsatkins.com> <BC1CFC544422CB4A934908E126A4742705BD0C15@SGBLOW2101.wsatkins.com> <C3C9C2FC-65CE-4969-BAA8-222868B186D7@ehatchersolutions.com>
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 09 Feb 2007 14:08:48.0131 (UTC) FILETIME=[D1545530:01C74C53]
X-Scanned-By: MailControl A-06-00-00 (www.mailcontrol.com) on 10.69.0.159
X-Virus-Checked: Checked by ClamAV on apache.org

Are you saying that without solr I will have caching problems under
load?=20

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
Sent: 09 February 2007 14:06
To: java-user@lucene.apache.org
Subject: Re: categorisation


On Feb 9, 2007, at 7:07 AM, Kainth, Sachin wrote:
> But does that not imply that a second search is made against the index

> by the line:
>
> BitSet all =3D (new QueryFilter(q)).bits(reader)

Yeah, if you want to return facet counts and results in the same sweep,
yes.  If all you want are the counts, only one query is needed.

Caching is key.  Solr - See the Light!

	Erik



>
> -----Original Message-----
> From: Kainth, Sachin [mailto:Sachin.Kainth@atkinsglobal.com]
> Sent: 09 February 2007 12:05
> To: java-user@lucene.apache.org
> Subject: RE: categorisation
>
> Ahhh it all makes sense to me now :-)
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: 09 February 2007 12:01
> To: java-user@lucene.apache.org
> Subject: Re: categorisation
>
>
> On Feb 9, 2007, at 5:40 AM, Kainth, Sachin wrote:
>> It makes sense to me only if you tell me that all the bits in the=20
>> BitSet "all" will be 1.
>
> well, ok, so the "all" may be misleading.   call it queryBits instead
> then :)
>
> "all" means *all documents that match the query*, though.
>
> it wouldn't make sense to AND a bitset with one that is all 1's=20
> always.
>
> 	Erik
>
>
>>
>> -----Original Message-----
>> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
>> Sent: 08 February 2007 18:37
>> To: java-user@lucene.apache.org
>> Subject: Re: categorisation
>>
>>
>> On Feb 8, 2007, at 12:36 PM, Kainth, Sachin wrote:
>>
>>> Chris has given an example of how to perform categorisation of=20
>>> lucene
>>> searches:
>>>
>>> String[] mfgs =3D ...;
>>>   String query =3D "+category:cameras +price:[0 to 10]";
>>>   Query q =3D QueryParser.parse(query);
>>>   Hits results =3D searcher.search(q, mySort)
>>>   BitSet all =3D (new QueryFilter(q)).bits(reader)
>>>   int[] mfg_counts =3D new int[mfgs.length];
>>>   for i in (0 to mfgs.length) {
>>>      BitSet these =3D (new QueryFilter(new TermQuery("mfg",mfgs=20
>>> [i]))).bits(reader);
>>>      these.and(all)
>>>      mfg_counts[i] =3D these.cardinality();
>>>   }
>>>
>>> What I don't understand though is what this line does:
>>>
>>> BitSet all =3D (new QueryFilter(q)).bits(reader)
>>>
>>> Anyone have any ideas?
>>
>> "all" is a BitSet lit up for the documents that matched "query".
>> "these" (the BitSet for a particular category) is .anded with "all"
>> to get the counts _left over_ for each category given "query".
>>
>> Make sense?
>>
>> 	Erik
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> This message has been scanned for viruses by MailControl - (see
>> http://bluepages.wsatkins.co.uk/?4318150)
>>
>>
>> This email and any attached files are confidential and copyright=20
>> protected. If you are not the addressee, any dissemination of this=20
>> communication is strictly prohibited. Unless otherwise expressly=20
>> agreed in writing, nothing stated in this communication shall be=20
>> legally binding.
>>
>> The ultimate parent company of the Atkins Group is WS Atkins plc.
>> Registered in England No. 1885586.  Registered Office Woodcote Grove,

>> Ashley Road, Epsom, Surrey KT18 5BW.
>>
>> Consider the environment. Please don't print this e-mail unless you=20
>> really need to.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 09 14:11:25 2007
Return-Path: <java-user-return-26042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43967 invoked from network); 9 Feb 2007 14:11:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2007 14:11:24 -0000
Received: (qmail 4000 invoked by uid 500); 9 Feb 2007 14:11:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3969 invoked by uid 500); 9 Feb 2007 14:11:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3958 invoked by uid 99); 9 Feb 2007 14:11:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 06:11:24 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 06:11:13 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id F325430EFC19; Fri,  9 Feb 2007 09:10:52 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 8E60430EFC18
	for <java-user@lucene.apache.org>; Fri,  9 Feb 2007 09:10:48 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705BD1025@SGBLOW2101.wsatkins.com>
References: <BC1CFC544422CB4A934908E126A4742705B9BDDF@SGBLOW2101.wsatkins.com> <58D0497D-3CC2-4947-96D6-1D7ADE08828F@ehatchersolutions.com> <BC1CFC544422CB4A934908E126A4742705BD08E3@SGBLOW2101.wsatkins.com> <28F19771-D2FF-4B5B-811D-43936DF71ADF@ehatchersolutions.com> <BC1CFC544422CB4A934908E126A4742705BD0C01@SGBLOW2101.wsatkins.com> <BC1CFC544422CB4A934908E126A4742705BD0C15@SGBLOW2101.wsatkins.com> <C3C9C2FC-65CE-4969-BAA8-222868B186D7@ehatchersolutions.com> <BC1CFC544422CB4A934908E126A4742705BD1025@SGBLOW2101.wsatkins.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9B86AEB5-2569-4449-8B07-DAABFD313044@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: categorisation
Date: Fri, 9 Feb 2007 09:10:45 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1


On Feb 9, 2007, at 9:08 AM, Kainth, Sachin wrote:
> Are you saying that without solr I will have caching problems under
> load?

no, not at all.  i'm saying you'll likely reinvent a lot of what solr  
already provides, in order to _scale_ that is.




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 09 14:14:34 2007
Return-Path: <java-user-return-26043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45425 invoked from network); 9 Feb 2007 14:14:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2007 14:14:33 -0000
Received: (qmail 11873 invoked by uid 500); 9 Feb 2007 14:14:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11838 invoked by uid 500); 9 Feb 2007 14:14:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11827 invoked by uid 99); 9 Feb 2007 14:14:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 06:14:32 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 217.79.216.190 as permitted sender)
Received: from [217.79.216.190] (HELO cluster-e.mailcontrol.com) (217.79.216.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 06:14:19 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly45e.srv.mailcontrol.com (MailControl) with SMTP id l19EDb1f012658
	for <java-user@lucene.apache.org>; Fri, 9 Feb 2007 14:13:44 GMT
Received: From SGBD012104.wsatkins.com ([10.202.26.18]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 1171030395429; Fri, 9 Feb 2007 14:13:15 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012104.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 9 Feb 2007 14:13:15 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: categorisation
Date: Fri, 9 Feb 2007 14:13:14 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705BD1046@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: categorisation
Thread-Index: AcdMVEUrSMyEw9TWTNWVF/+aWL9WDgAAB0Iw
References: <BC1CFC544422CB4A934908E126A4742705B9BDDF@SGBLOW2101.wsatkins.com> <58D0497D-3CC2-4947-96D6-1D7ADE08828F@ehatchersolutions.com> <BC1CFC544422CB4A934908E126A4742705BD08E3@SGBLOW2101.wsatkins.com> <28F19771-D2FF-4B5B-811D-43936DF71ADF@ehatchersolutions.com> <BC1CFC544422CB4A934908E126A4742705BD0C01@SGBLOW2101.wsatkins.com> <BC1CFC544422CB4A934908E126A4742705BD0C15@SGBLOW2101.wsatkins.com> <C3C9C2FC-65CE-4969-BAA8-222868B186D7@ehatchersolutions.com> <BC1CFC544422CB4A934908E126A4742705BD1025@SGBLOW2101.wsatkins.com> <9B86AEB5-2569-4449-8B07-DAABFD313044@ehatchersolutions.com>
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 09 Feb 2007 14:13:15.0370 (UTC) FILETIME=[709DC4A0:01C74C54]
X-Scanned-By: MailControl A-06-00-00 (www.mailcontrol.com) on 10.69.0.155
X-Virus-Checked: Checked by ClamAV on apache.org

What does solr provide and how can I use it with dotLucene?=20

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
Sent: 09 February 2007 14:11
To: java-user@lucene.apache.org
Subject: Re: categorisation


On Feb 9, 2007, at 9:08 AM, Kainth, Sachin wrote:
> Are you saying that without solr I will have caching problems under=20
> load?

no, not at all.  i'm saying you'll likely reinvent a lot of what solr
already provides, in order to _scale_ that is.




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



This message has been scanned for viruses by MailControl - (see
http://bluepages.wsatkins.co.uk/?4318150)


This email and any attached files are confidential and copyright protected.=
 If you are not the addressee, any dissemination of this communication is s=
trictly prohibited. Unless otherwise expressly agreed in writing, nothing s=
tated in this communication shall be legally binding.

The ultimate parent company of the Atkins Group is WS Atkins plc.  Register=
ed in England No. 1885586.  Registered Office Woodcote Grove, Ashley Road, =
Epsom, Surrey KT18 5BW.

Consider the environment. Please don't print this e-mail unless you really =
need to.=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 09 14:45:39 2007
Return-Path: <java-user-return-26044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61546 invoked from network); 9 Feb 2007 14:45:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2007 14:45:37 -0000
Received: (qmail 72093 invoked by uid 500); 9 Feb 2007 14:45:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71809 invoked by uid 500); 9 Feb 2007 14:45:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 49995 invoked by uid 99); 9 Feb 2007 14:33:26 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of shalsey@verisign.com designates 216.168.239.75 as permitted sender)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Leaking org.apache.lucene.index.* objects
Date: Fri, 9 Feb 2007 15:32:54 +0100
Message-ID: <EB84F4B13FB22344803AC2EA8B7480C08BD11B@BER2WNEXMB01.vcorp.ad.vrsn.com>
In-Reply-To: <20061215172829.26389.qmail@web50308.mail.yahoo.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Leaking org.apache.lucene.index.* objects
Thread-Index: Accgbom5Nlr1/ksxSEiXDuv72Y5CjQr5ushA
From: "Halsey, Stephen" <shalsey@verisign.com>
To: <java-user@lucene.apache.org>,
        "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
X-OriginalArrivalTime: 09 Feb 2007 14:32:56.0225 (UTC) FILETIME=[3075F110:01C74C57]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Otis,

Its funny, but I'm having a memory leak with Hibernate that I spent the
whole of yesterday banging my head against a wall about and so when
searching for emails with Leak in the title came across your message.
I'm probably going to hit the same problem as you for long running
multi-threaded lucene index updates so am very interested in this.  I
found the only way to isolate the problem with Hibernate (and hence
prove it is a Hibernate-only problem) is to write a very simple test
program that recreates the problem.  Have you got a program that
recreates this, perhaps one that creates two simple indexes, creates two
threads and slams away until it runs out of memory and every loop prints
the memory using this function:-

	private static long print_mem(long last_mem_free) {
		long mem_total =3D Runtime.getRuntime().totalMemory();
		long mem_free =3D Runtime.getRuntime().freeMemory();
		long mem_used =3D mem_total - mem_free;
		long mem_max =3D Runtime.getRuntime().maxMemory();
		long change =3D (mem_free - last_mem_free);

		LOG.debug((new Date()).toString() + " mem_free=3D " +
mem_free=20
				+ " mem_total=3D" + mem_total
				+ " change=3D" + change
				+ " mem_used=3D" + mem_used
				+ " mem_max=3D" + mem_max);

		return mem_free;
	}

The trick is to make the program very fast at accumalating memory, so
you can make it run out of memory quickly and also setting java args to
-Xms10m -Xmx10m or as low as you can and have it run for a minute so
that the JVM has to quickly try and reclaim memory.  This proves that
the JVM really can't free up memory, because the JVM will accumalate
memory whenever it feels like it, and sometimes only clear up when it
feels like it.

If you can send/write this test program and post it on the forum, I'll
give it a run and try using a copy of Jprofiler I have to locate the
objects that are accumalating memory (if I can work out how to use it
properly!)

Just noticed this is from December, so may well be a bit late for
helping out?

Cheers



steve

=20

>-----Original Message-----
>From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]=20
>Sent: 15 December 2006 17:28
>To: java-user@lucene.apache.org
>Subject: Leaking org.apache.lucene.index.* objects
>
>Hi,
>
>About 2-3 weeks ago I emailed about a memory leak in my=20
>application.  I then found some problems in my code (I wasn't=20
>closing IndexSearchers explicitly) and took care of those. =20
>Now I see my app is still leaking memory - jconsole clearly=20
>shows the "Tenured Gen" memory pool getting filled up until I=20
>hit the OOM, but I can't seem to pin-point the source.
>
>I found that a bunch or o.a.l.index.* objects are not getting=20
>GCed, even though they should.  For example:
>
>$ jmap -histo:live 7825 | grep apache.lucene.index | head -20=20
>| sort -k2 -nr
>num   #instances    #bytes  class name
>--------------------------------------
>  4:   1764840    98831040 =20
>org.apache.lucene.index.CompoundFileReader$CSIndexInput
>  5:   2119215    67814880  org.apache.lucene.index.TermInfo
>  7:   1112459    35598688  org.apache.lucene.index.SegmentReader$Norm
>  9:   2132311    34116976  org.apache.lucene.index.Term
> 12:   1117897    26829528  org.apache.lucene.index.FieldInfo
> 13:    225340    18027200  org.apache.lucene.index.SegmentTermEnum
> 15:    589727    14153448  org.apache.lucene.index.TermBuffer
> 21:     86033     8718504  [Lorg.apache.lucene.index.TermInfo;
> 20:     86033     8718504  [Lorg.apache.lucene.index.Term;
> 23:     86120     7578560  org.apache.lucene.index.SegmentReader
> 26:     90501     5068056  org.apache.lucene.store.FSIndexInput
> 27:     86120     4822720  org.apache.lucene.index.TermInfosReader
> 33:     86130     3445200  org.apache.lucene.index.SegmentInfo
> 36:     87355     2795360 =20
>org.apache.lucene.store.FSIndexInput$Descriptor
> 38:     86120     2755840  org.apache.lucene.index.FieldsReader
> 39:     86050     2753600  org.apache.lucene.index.CompoundFileReader
> 42:     46903     2251344  org.apache.lucene.index.SegmentInfos
> 43:     93778     2250672 =20
>org.apache.lucene.search.FieldCacheImpl$Entry
> 45:     93778     1500448 =20
>org.apache.lucene.search.FieldCacheImpl$CreationPlaceholder
> 47:     86510     1384160  org.apache.lucene.index.FieldInfos
>
>I'm running my app in search-only mode - no adds or deletes.
>The counts of these objects just keeps going up, even though I=20
>am explicitly closing the IndexSearcher.  I can see that file=20
>descriptors _are_ freed up after searcher.close(), because=20
>lsof no longer shows them, but the above objects just linger=20
>and accumulate, even when I force GC via jconsole or via the profiler.
>
>I thought maybe various *Readers are not getting close()d, but=20
>I've double-checked all *Readers above, and they all seem to=20
>close their IndexInput references.  The static nested class=20
>CompoundFileReader.CSIndexInput has a close() without any=20
>implementation.  At first I thought that was an omission, but=20
>adding a close of the inner IndexInput there resulted in a=20
>search-time error.  I've added the lovely print debugging to=20
>various close() methods and see those methods being called. =20
>I've added finalize() with some print debugging to=20
>SegmentReader, TermInfosReader, SegmentTermEnum, FieldsReader,=20
>and CompoundFileReader.  All but CFReader get finalized after a while.
>
>My application is running as a webapp and has thousands of=20
>separate indices.  This means it's very multi-threaded and the=20
>servlet container has a pool of threads that handle requests,=20
>and each request may be for a different index.  I cache=20
>IndexSearchers for a while, and purge/close them every N=20
>minutes if they have been idle more than M minutes.
>It occurred to me last night that things like TermInfosReader=20
>and SegmentReader are using ThreadLocal, and since threads are=20
>used in a thread pool, and thus shared with requests handling=20
>searches against different indices, it's not clear to me what=20
>happens with object instances that are put in those=20
>ThreadLocals in such scenario.  Aren't things going to step on=20
>each others' toes?
>TIR has close() and SR has doClose(), so I put <TL=20
>inst>.set(null) there.  This immediately got rid of those=20
>instances of CompoundFileReader.CSIndexInput in my dev=20
>environment!!!! Yeeees!
>
>But in my dev environment I tested my additions by slamming my=20
>app against a *single* index.  I took my modified Lucene to=20
>production, and quickly saw all those o.a.l.index.* objects=20
>accumulate again.  I also see a lot of ThreadLocal's kids:
>
> 16:    419387    13420384  java.lang.ThreadLocal$ThreadLocalMap$Entry
>
>I *think* that points out to some issues with how that=20
>ThreadLocal is used there, in a multi-threaded, multi-index=20
>environments.
>I'm running JDK 6, and while this problem sounds a bit like=20
>LUCENE-436, I'm not yet sure if it's the same thing. =20
>Because my IndexSearchers (and thus all those o.a.l.index.*=20
>objects) are long-lived, and threads are shared and reused for=20
>searching of other indices, those close() and doClose()=20
>methods are not called at the end of the request life-cycle,=20
>so at the end of the request those TL instances will *still*=20
>have something in them.  When their thread is later reused for=20
>searching of another index, new data will be put in them, but=20
>the old data will never be cleaned out!  No?
>It seems a bit odd, but with this ThreadLocals, shouldn't a=20
>multi-threaded, multi-index webapp really have to "clean"=20
>those ThreadLocal instances either before or at the end of the request?
>
>I'm running out of ideas, and was wondering if anyone has any=20
>thoughts about what could still be holding references to the=20
>above classes.  I have some 20-30MB memory snapshots (via=20
>YourKit) and heap dumps (via jmap), if anyone is interested.
>
>Thanks,
>Otis
>
>
>
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 09 15:09:07 2007
Return-Path: <java-user-return-26045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69896 invoked from network); 9 Feb 2007 15:09:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2007 15:09:06 -0000
Received: (qmail 16344 invoked by uid 500); 9 Feb 2007 15:09:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16303 invoked by uid 500); 9 Feb 2007 15:09:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16292 invoked by uid 99); 9 Feb 2007 15:09:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 07:09:06 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_FONT_BIG,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 86.111.223.190 as permitted sender)
Received: from [86.111.223.190] (HELO cluster-j.mailcontrol.com) (86.111.223.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 07:08:52 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly17j.srv.mailcontrol.com (MailControl) with SMTP id l19F8OVL015274
	for <java-user@lucene.apache.org>; Fri, 9 Feb 2007 15:08:26 GMT
Received: From SGBD012104.wsatkins.com ([10.202.26.18]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 1171033681482; Fri, 9 Feb 2007 15:08:01 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012104.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 9 Feb 2007 15:08:01 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C74C5C.16E6362B"
Subject: Lucene Web Service
Date: Fri, 9 Feb 2007 15:08:00 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705BD1234@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene Web Service
Thread-Index: AcdMXBZw0BEyHY44TWuKw0M1ffExtQ==
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 09 Feb 2007 15:08:01.0418 (UTC) FILETIME=[1740E6A0:01C74C5C]
X-Scanned-By: MailControl A-07-06-80 (www.mailcontrol.com) on 10.74.0.127
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C74C5C.16E6362B
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hello all,

Does anyone know if there is a .NET version of Lucene Web Service?

Cheers


This email and any attached files are confidential and copyright protected.=
 If you are not the addressee, any dissemination of this communication is s=
trictly prohibited. Unless otherwise expressly agreed in writing, nothing s=
tated in this communication shall be legally binding.

The ultimate parent company of the Atkins Group is WS Atkins plc.  Register=
ed in England No. 1885586.  Registered Office Woodcote Grove, Ashley Road, =
Epsom, Surrey KT18 5BW.

Consider the environment. Please don't print this e-mail unless you really =
need to.=20

------_=_NextPart_001_01C74C5C.16E6362B--

From java-user-return-26046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 09 15:11:10 2007
Return-Path: <java-user-return-26046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71499 invoked from network); 9 Feb 2007 15:11:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2007 15:11:09 -0000
Received: (qmail 22561 invoked by uid 500); 9 Feb 2007 15:11:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22529 invoked by uid 500); 9 Feb 2007 15:11:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22518 invoked by uid 99); 9 Feb 2007 15:11:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 07:11:09 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mailing.patrick.kimber@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 07:11:00 -0800
Received: by nf-out-0910.google.com with SMTP id i2so1078600nfe
        for <java-user@lucene.apache.org>; Fri, 09 Feb 2007 07:10:39 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=sSDuEDEH+fa8G8azu/NvQbfWoZtBKV+3MfgGWHK/1XqKyvHoSyNCmD8CX8bprziu1Wz5Du7LIY4xU9VJE0g3VJrDT6x/uRC3+4LbLfmQQYyL0iXypa+fe9oenmdZgGZ1GZHP8pR9NeJ24JaP34uot3LkHWBK+YquWjsQtx6mYYo=
Received: by 10.82.187.16 with SMTP id k16mr1366483buf.1171033838335;
        Fri, 09 Feb 2007 07:10:38 -0800 (PST)
Received: by 10.82.125.15 with HTTP; Fri, 9 Feb 2007 07:10:37 -0800 (PST)
Message-ID: <4f9b23800702090710h41c0861x3b251de531629288@mail.gmail.com>
Date: Fri, 9 Feb 2007 15:10:37 +0000
From: "Patrick Kimber" <mailing.patrick.kimber@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Web Service
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705BD1234@SGBLOW2101.wsatkins.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <BC1CFC544422CB4A934908E126A4742705BD1234@SGBLOW2101.wsatkins.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi

You could try SOLR
http://lucene.apache.org/solr/

This is obviously Java but you can access it using .NET...

Hope this helps

Patrick

On 09/02/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
> Hello all,
>
> Does anyone know if there is a .NET version of Lucene Web Service?
>
> Cheers
>
>
> This email and any attached files are confidential and copyright protected. If you are not the addressee, any dissemination of this communication is strictly prohibited. Unless otherwise expressly agreed in writing, nothing stated in this communication shall be legally binding.
>
> The ultimate parent company of the Atkins Group is WS Atkins plc.  Registered in England No. 1885586.  Registered Office Woodcote Grove, Ashley Road, Epsom, Surrey KT18 5BW.
>
> Consider the environment. Please don't print this e-mail unless you really need to.
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 09 15:15:33 2007
Return-Path: <java-user-return-26047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73186 invoked from network); 9 Feb 2007 15:15:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2007 15:15:32 -0000
Received: (qmail 30461 invoked by uid 500); 9 Feb 2007 15:15:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30434 invoked by uid 500); 9 Feb 2007 15:15:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30422 invoked by uid 99); 9 Feb 2007 15:15:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 07:15:31 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 07:15:20 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HFXQU-0008E1-Ba
	for java-user@lucene.apache.org; Fri, 09 Feb 2007 07:12:38 -0800
Message-ID: <8887274.post@talk.nabble.com>
Date: Fri, 9 Feb 2007 07:12:38 -0800 (PST)
From: Philip Brown <pmb@us.ibm.com>
To: java-user@lucene.apache.org
Subject: Replication of RAMDirectory across multiple WebSphere servers
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: pmb@us.ibm.com
X-Virus-Checked: Checked by ClamAV on apache.org


Does anybody have any experience with setting up a Lucene RAMDirectory index
for replication across multiple WebSphere servers and taking advantage of
WebSphere's built-in Object Cache?  We are currently re-building/refreshing
from the source the entire RAMDirectory index on each WebSphere server every
few minutes to keep the data in sync, but I would like to utilize the
built-in cluster replication features of WebSphere somehow if possible.  
This is what I was thinking...  If I set up an Object Cache instance, there
would only be one item in the cache, right? -- the entire RAMDirectory
index.  So, everytime there was an update, I'd pull the index out of the
cache, update the changed documents, and stick the index back into cache. 
Of course, this is likely to happen every few seconds (at least during peak
usage).  Currently, when we do something like such...

IndexModifier indexModifier = new IndexModifier(activeIdx, myAnalyzer,
false);  //don't ovewrite; use existing
 -- add/delete documents here
indexModifier.optimize();
indexModifier.close();

And the activeIdx object is a static private class variable.  So, I'm
thinking the only real difference would be to just get the activieIdx object
out of the cache instead of making it a class variable. ???

Looking for some guidance.

Thanks,

Philip
-- 
View this message in context: http://www.nabble.com/Replication-of-RAMDirectory-across-multiple-WebSphere-servers-tf3200859.html#a8887274
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 09 15:30:01 2007
Return-Path: <java-user-return-26048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78771 invoked from network); 9 Feb 2007 15:30:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2007 15:30:00 -0000
Received: (qmail 60493 invoked by uid 500); 9 Feb 2007 15:30:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60465 invoked by uid 500); 9 Feb 2007 15:30:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60454 invoked by uid 99); 9 Feb 2007 15:30:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 07:30:00 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 86.111.223.190 as permitted sender)
Received: from [86.111.223.190] (HELO cluster-j.mailcontrol.com) (86.111.223.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 07:29:45 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly26j.srv.mailcontrol.com (MailControl) with SMTP id l19FTENu030038
	for <java-user@lucene.apache.org>; Fri, 9 Feb 2007 15:29:15 GMT
Received: From SGBD012103.wsatkins.com ([10.202.26.17]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 1171034936670; Fri, 9 Feb 2007 15:28:56 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012103.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 9 Feb 2007 15:28:56 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lucene Web Service
Date: Fri, 9 Feb 2007 15:28:55 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705BD12F1@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene Web Service
Thread-Index: AcdMXK3HpRtyf/DaTcKkGUuftGvj3gAAVojA
References: <BC1CFC544422CB4A934908E126A4742705BD1234@SGBLOW2101.wsatkins.com> <4f9b23800702090710h41c0861x3b251de531629288@mail.gmail.com>
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 09 Feb 2007 15:28:56.0421 (UTC) FILETIME=[034B2950:01C74C5F]
X-Scanned-By: MailControl A-07-06-80 (www.mailcontrol.com) on 10.74.0.136
X-Virus-Checked: Checked by ClamAV on apache.org

But would it still use the Java version of Lucene?  Are you saying that
unlike Lucene Web Service, Solr can be used via .NET code?  Do they both
still use the Java version of Lucene though?

Let me explain what I want to do.  I want to be able to set up a
dedicated machine for dotLucene so that indexing and searching can occur
on a dedicated machine.  I therefore need web services to handle the
message passing between our CMS machine which will receice client search
requests and the dedicated dotLucene machine.  How would I use solr or
Lucene Web Services to achieve this?  Will I have to use Java Lucene to
do the indexing and searching?  I really want to be able to use
dotLucene.  Any help would be appreciated.

Many thanks

Sachin=20

-----Original Message-----
From: Patrick Kimber [mailto:mailing.patrick.kimber@gmail.com]=20
Sent: 09 February 2007 15:11
To: java-user@lucene.apache.org
Subject: Re: Lucene Web Service

Hi

You could try SOLR
http://lucene.apache.org/solr/

This is obviously Java but you can access it using .NET...

Hope this helps

Patrick

On 09/02/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
> Hello all,
>
> Does anyone know if there is a .NET version of Lucene Web Service?
>
> Cheers
>
>
> This email and any attached files are confidential and copyright
protected. If you are not the addressee, any dissemination of this
communication is strictly prohibited. Unless otherwise expressly agreed
in writing, nothing stated in this communication shall be legally
binding.
>
> The ultimate parent company of the Atkins Group is WS Atkins plc.
Registered in England No. 1885586.  Registered Office Woodcote Grove,
Ashley Road, Epsom, Surrey KT18 5BW.
>
> Consider the environment. Please don't print this e-mail unless you
really need to.
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



This message has been scanned for viruses by MailControl - (see
http://bluepages.wsatkins.co.uk/?4318150)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 09 15:33:43 2007
Return-Path: <java-user-return-26049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80266 invoked from network); 9 Feb 2007 15:33:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2007 15:33:41 -0000
Received: (qmail 67979 invoked by uid 500); 9 Feb 2007 15:33:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67934 invoked by uid 500); 9 Feb 2007 15:33:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67909 invoked by uid 99); 9 Feb 2007 15:33:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 07:33:32 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 07:33:21 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id CA35E30EFC19; Fri,  9 Feb 2007 10:33:00 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id BC8B630EFC18
	for <java-user@lucene.apache.org>; Fri,  9 Feb 2007 10:32:57 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705BD1046@SGBLOW2101.wsatkins.com>
References: <BC1CFC544422CB4A934908E126A4742705B9BDDF@SGBLOW2101.wsatkins.com> <58D0497D-3CC2-4947-96D6-1D7ADE08828F@ehatchersolutions.com> <BC1CFC544422CB4A934908E126A4742705BD08E3@SGBLOW2101.wsatkins.com> <28F19771-D2FF-4B5B-811D-43936DF71ADF@ehatchersolutions.com> <BC1CFC544422CB4A934908E126A4742705BD0C01@SGBLOW2101.wsatkins.com> <BC1CFC544422CB4A934908E126A4742705BD0C15@SGBLOW2101.wsatkins.com> <C3C9C2FC-65CE-4969-BAA8-222868B186D7@ehatchersolutions.com> <BC1CFC544422CB4A934908E126A4742705BD1025@SGBLOW2101.wsatkins.com> <9B86AEB5-2569-4449-8B07-DAABFD313044@ehatchersolutions.com> <BC1CFC544422CB4A934908E126A4742705BD1046@SGBLOW2101.wsatkins.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <1A23F3FD-0C18-4D6F-91EB-FCF778F91689@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: categorisation
Date: Fri, 9 Feb 2007 10:32:54 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1


On Feb 9, 2007, at 9:13 AM, Kainth, Sachin wrote:
> What does solr provide and how can I use it with dotLucene?

Have a 10 minute dedicated look at http://lucene.apache.org/solr -  
download the latest binary distribution, follow along with the  
tutorial.  After that, you'll know almost everything you need to know  
on the Solr side of things, but then you'll have to write a bit  
of .NET code to parse some XML responses.  No problemo.

	Erik



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 09 16:15:21 2007
Return-Path: <java-user-return-26050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96394 invoked from network); 9 Feb 2007 16:15:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2007 16:15:21 -0000
Received: (qmail 68152 invoked by uid 500); 9 Feb 2007 16:15:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68125 invoked by uid 500); 9 Feb 2007 16:15:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68114 invoked by uid 99); 9 Feb 2007 16:15:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 08:15:21 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of sairaj.sunil@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 08:15:12 -0800
Received: by nf-out-0910.google.com with SMTP id i2so1096951nfe
        for <java-user@lucene.apache.org>; Fri, 09 Feb 2007 08:14:51 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=S+9LaAeWjufcm0s02mJJCnkBJcn79+mEwrrHm1WBEL735uzA6046xFu23exoxHt01kwfv7uAqVjiyDwE17NYMGpy7dXzsaOnTOvp54hu0cU6KYg3jz1JOGfk9fIh4l5WY73LevJmqHi8q1bME5kQxVatm5SMQSxIDK/mUk9XeAs=
Received: by 10.82.178.11 with SMTP id a11mr4214219buf.1171037690904;
        Fri, 09 Feb 2007 08:14:50 -0800 (PST)
Received: by 10.82.157.16 with HTTP; Fri, 9 Feb 2007 08:14:50 -0800 (PST)
Message-ID: <fae460120702090814kfde99fbs24d01cf50cc1abd3@mail.gmail.com>
Date: Fri, 9 Feb 2007 21:44:50 +0530
From: "Sairaj Sunil" <sairaj.sunil@gmail.com>
To: java-user@lucene.apache.org
Subject: Merge factor problem,
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_23521_19691401.1171037690853"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_23521_19691401.1171037690853
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,
I have increased the merge factor from 10 to 50. I thought the indexing
performance will be better. But the time taken taken to index is more than
the time taken for the merge factor of 10. The documentation and some
articles say that the time taken to index will improve if the merge factor
is increased.
I have changed the merge factors to 50, 100, 1000. I have left the
minMergeDocs to be the default value for all the cases. The time taken to
index same number of documents increased in a linear fashion, which is
exactly opposite according to the info I have read.
Is this the correct behavior. In which cases this behavior happens?

Regards
-- 
Sairaj Sunil

------=_Part_23521_19691401.1171037690853--

From java-user-return-26051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 09 16:30:56 2007
Return-Path: <java-user-return-26051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3954 invoked from network); 9 Feb 2007 16:30:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2007 16:30:55 -0000
Received: (qmail 709 invoked by uid 500); 9 Feb 2007 16:30:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 670 invoked by uid 500); 9 Feb 2007 16:30:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 659 invoked by uid 99); 9 Feb 2007 16:30:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 08:30:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [68.230.241.43] (HELO fed1rmmtao103.cox.net) (68.230.241.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 08:30:43 -0800
Received: from fed1rmimpo02.cox.net ([70.169.32.72])
          by fed1rmmtao103.cox.net
          (InterMail vM.7.05.02.00 201-2174-114-20060621) with ESMTP
          id <20070209163023.TFFD1349.fed1rmmtao103.cox.net@fed1rmimpo02.cox.net>
          for <java-user@lucene.apache.org>; Fri, 9 Feb 2007 11:30:23 -0500
Received: from dv1040 ([68.111.207.19])
	by fed1rmimpo02.cox.net with bizsmtp
	id MUWJ1W00D0Reif00000000; Fri, 09 Feb 2007 11:30:22 -0500
Reply-To: <gstead@ieee.org>
From: "Graham Stead" <gstead@ieee.org>
To: <java-user@lucene.apache.org>
Subject: RE: Lucene Web Service
Date: Fri, 9 Feb 2007 08:30:17 -0800
Message-ID: <026d01c74c67$952d1290$0601a8c0@dv1040>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705BD12F1@SGBLOW2101.wsatkins.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
Thread-Index: AcdMXK3HpRtyf/DaTcKkGUuftGvj3gAAVojAAAI51UA=
X-Virus-Checked: Checked by ClamAV on apache.org

Solr provides an XML interface to everything: index adds, deletes, updates,
searches, highlights, explanations, facets, commits, and optimize
statements. I'm sure I've forgotten some :)

It also supports JSON, as well as some other formats, if you prefer that.
The Solr wiki explains how it works.

Yes, Solr uses Lucene, although that detail is abstracted away from your
application. If for some reason you must use dotLucene, then Solr will not
be helpful. If you want web service access to Lucene and/or Lucene indexes,
Solr is very helpful (in addition to providing caching and faceted search
features not found in Lucene).

HTH,
-Graham

> -----Original Message-----
> From: Kainth, Sachin [mailto:Sachin.Kainth@atkinsglobal.com] 
> Sent: Friday, February 09, 2007 7:29 AM
> To: java-user@lucene.apache.org
> Subject: RE: Lucene Web Service
> 
> But would it still use the Java version of Lucene?  Are you 
> saying that unlike Lucene Web Service, Solr can be used via 
> .NET code?  Do they both still use the Java version of Lucene though?
> 
> Let me explain what I want to do.  I want to be able to set 
> up a dedicated machine for dotLucene so that indexing and 
> searching can occur on a dedicated machine.  I therefore need 
> web services to handle the message passing between our CMS 
> machine which will receice client search requests and the 
> dedicated dotLucene machine.  How would I use solr or Lucene 
> Web Services to achieve this?  Will I have to use Java Lucene 
> to do the indexing and searching?  I really want to be able 
> to use dotLucene.  Any help would be appreciated.
> 
> Many thanks
> 
> Sachin 
> 
> -----Original Message-----
> From: Patrick Kimber [mailto:mailing.patrick.kimber@gmail.com]
> Sent: 09 February 2007 15:11
> To: java-user@lucene.apache.org
> Subject: Re: Lucene Web Service
> 
> Hi
> 
> You could try SOLR
> http://lucene.apache.org/solr/
> 
> This is obviously Java but you can access it using .NET...
> 
> Hope this helps
> 
> Patrick
> 
> On 09/02/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
> > Hello all,
> >
> > Does anyone know if there is a .NET version of Lucene Web Service?
> >
> > Cheers
> >
> >
> > This email and any attached files are confidential and copyright
> protected. If you are not the addressee, any dissemination of 
> this communication is strictly prohibited. Unless otherwise 
> expressly agreed in writing, nothing stated in this 
> communication shall be legally binding.
> >
> > The ultimate parent company of the Atkins Group is WS Atkins plc.
> Registered in England No. 1885586.  Registered Office 
> Woodcote Grove, Ashley Road, Epsom, Surrey KT18 5BW.
> >
> > Consider the environment. Please don't print this e-mail unless you
> really need to.
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> This message has been scanned for viruses by MailControl - (see
> http://bluepages.wsatkins.co.uk/?4318150)
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 09 16:36:02 2007
Return-Path: <java-user-return-26052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6971 invoked from network); 9 Feb 2007 16:35:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2007 16:35:45 -0000
Received: (qmail 9224 invoked by uid 500); 9 Feb 2007 16:35:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9157 invoked by uid 500); 9 Feb 2007 16:35:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9090 invoked by uid 99); 9 Feb 2007 16:35:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 08:35:43 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 08:35:32 -0800
Received: from root by ciao.gmane.org with local (Exim 4.43)
	id 1HFYiE-0005Hz-44
	for java-user@lucene.apache.org; Fri, 09 Feb 2007 17:35:02 +0100
Received: from vsat-148-64-111-194.c119.t7.mrt.starband.net ([148.64.111.194])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Fri, 09 Feb 2007 17:35:02 +0100
Received: from fredeaker by vsat-148-64-111-194.c119.t7.mrt.starband.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Fri, 09 Feb 2007 17:35:02 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Fred Eaker <fredeaker@gmail.com>
Subject:  Highlighter returning incomplete field text
Date: Fri, 9 Feb 2007 16:28:36 +0000 (UTC)
Lines: 28
Message-ID:  <loom.20070209T170227-880@post.gmane.org>
Mime-Version:  1.0
Content-Type:  text/plain; charset=us-ascii
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: main.gmane.org
User-Agent: Loom/3.14 (http://gmane.org/)
X-Loom-IP: 148.64.111.194 (Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.1) Gecko/20061204 Firefox/2.0.0.1)
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Is there a limit to how many characters a Highlighter or NullFragmenter will
return?

I have indexed an entire HTML document (145kb). When I use the highlighter with
a NullFragmenter, the getBestFragment and getBestFragments methods return the
text of the field up to 51316 characters.

I have tried indexing other HTML documents as well, but get the same results.

If I change the Highlighter's Encoder to DefaultEncoder, I get more characters,
but not the entire field.

Here is some code:

Highlighter highlighter =
new Highlighter(new SimpleHTMLFormatter(),
new DefaultEncoder(),
new QueryScorer(query));

highlighter.setTextFragmenter(new NullFragmenter());

TokenStream tokenStream =
LuceneUtils.getAnalyzer().tokenStream(
fieldName,
new StringReader(hit.get(fieldName)));

String highlightedHit =
highlighter.getBestFragment(tokenStream, hit.get(fieldName));


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 09 17:04:52 2007
Return-Path: <java-user-return-26053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19999 invoked from network); 9 Feb 2007 17:04:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2007 17:04:51 -0000
Received: (qmail 79327 invoked by uid 500); 9 Feb 2007 17:04:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79303 invoked by uid 500); 9 Feb 2007 17:04:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79292 invoked by uid 99); 9 Feb 2007 17:04:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 09:04:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.216] (HELO web26005.mail.ukl.yahoo.com) (217.12.10.216)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 09 Feb 2007 09:04:38 -0800
Received: (qmail 59837 invoked by uid 60001); 9 Feb 2007 17:04:16 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=NbyuWiKyEFedzPtnEij7rQaOm3xhG7NGn9ylf865p9PzHiFWvqGgpHzy87cQFNN5dQAVzT4htO37ttLm5MtYrw13ueH0eWD3O87KUv4BveqY5AJ+hgXoB4AjPY4XCjeeQvhj8QS5iL9vxnYx0x5kDPfx4v+/EurFcZyBN8dEMZY=;
X-YMail-OSG: 0TGOig8VM1kRWWNFS3UPs4_VbV0FKOAjqB9rAlErc918xPYN1H0QRFoKDVp5S851kPQz.eR8yZQhrgzsRGypM7ornmdhJXlGOXc7AaGbcz2hNpCgkvNUTAFV7nJHPow1gXD08.cM5HS3
Received: from [193.36.230.96] by web26005.mail.ukl.yahoo.com via HTTP; Fri, 09 Feb 2007 17:04:16 GMT
X-Mailer: YahooMailRC/368.7 YahooMailWebService/0.6.132.7
Date: Fri, 9 Feb 2007 17:04:16 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Highlighter returning incomplete field text
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <119460.58281.qm@web26005.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

See Highlighter.setMaxDocBytesToAnalyze(int byteCount)=0A=0AIt's default se=
tting is limited in order to avoid excessive response times.=0A=0ACheers=0A=
Mark=0A=0A=0A----- Original Message ----=0AFrom: Fred Eaker <fredeaker@gmai=
l.com>=0ATo: java-user@lucene.apache.org=0ASent: Friday, 9 February, 2007 4=
:28:36 PM=0ASubject: Highlighter returning incomplete field text=0A=0AIs th=
ere a limit to how many characters a Highlighter or NullFragmenter will=0Ar=
eturn?=0A=0AI have indexed an entire HTML document (145kb). When I use the =
highlighter with=0Aa NullFragmenter, the getBestFragment and getBestFragmen=
ts methods return the=0Atext of the field up to 51316 characters.=0A=0AI ha=
ve tried indexing other HTML documents as well, but get the same results.=
=0A=0AIf I change the Highlighter's Encoder to DefaultEncoder, I get more c=
haracters,=0Abut not the entire field.=0A=0AHere is some code:=0A=0AHighlig=
hter highlighter =3D=0Anew Highlighter(new SimpleHTMLFormatter(),=0Anew Def=
aultEncoder(),=0Anew QueryScorer(query));=0A=0Ahighlighter.setTextFragmente=
r(new NullFragmenter());=0A=0ATokenStream tokenStream =3D=0ALuceneUtils.get=
Analyzer().tokenStream(=0AfieldName,=0Anew StringReader(hit.get(fieldName))=
);=0A=0AString highlightedHit =3D=0Ahighlighter.getBestFragment(tokenStream=
, hit.get(fieldName));=0A=0A=0A--------------------------------------------=
-------------------------=0ATo unsubscribe, e-mail: java-user-unsubscribe@l=
ucene.apache.org=0AFor additional commands, e-mail: java-user-help@lucene.a=
pache.org=0A=0A=0A=0A=0A=0A=0A=09=09=0A____________________________________=
_______________________ =0AThe all-new Yahoo! Mail goes wherever you go - f=
ree your email address from your Internet provider. http://uk.docs.yahoo.co=
m/nowyoucan.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 09 17:39:30 2007
Return-Path: <java-user-return-26054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34516 invoked from network); 9 Feb 2007 17:39:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2007 17:39:29 -0000
Received: (qmail 53039 invoked by uid 500); 9 Feb 2007 17:39:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53009 invoked by uid 500); 9 Feb 2007 17:39:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52995 invoked by uid 99); 9 Feb 2007 17:39:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 09:39:29 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 09:39:19 -0800
Received: by nf-out-0910.google.com with SMTP id i2so1120461nfe
        for <java-user@lucene.apache.org>; Fri, 09 Feb 2007 09:38:57 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mukNqII2SDiaHve9plbmlcb2NT2KpdGh7tKdMRFrXmBHy9uO9jnRO9O88GeB9C5/lpisteuYUyf1CvTnt6xgC9CtB9KZelPYjqwD0DNeEtdGTeXDI3hwkMc+RtkmLczmYAl68s3chk43VrqGPGDwBiK4mrIGRjD/aB+z3kl4RxM=
Received: by 10.82.153.5 with SMTP id a5mr5781753bue.1171042737451;
        Fri, 09 Feb 2007 09:38:57 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Fri, 9 Feb 2007 09:38:57 -0800 (PST)
Message-ID: <359a92830702090938n51000d12u10f76de7158ff4b2@mail.gmail.com>
Date: Fri, 9 Feb 2007 12:38:57 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Re : Re: Re : Re: Re : Re: Re : Re: Question concerning Analyzers
In-Reply-To: <c1b2a726258e.45cc30e6@courrier.uqam.ca>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_52178_23167301.1171042737381"
References: <c1b2a726258e.45cc30e6@courrier.uqam.ca>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_52178_23167301.1171042737381
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

The query should be tokenized *by the query parser*. You shouldn't have to
do the tokenizing yourself. When you print out the results of the parsing,
you should see something like field:value1 field:value2, which are built up
under the covers to be a BooleanQuery with a bunch of clauses.

I think, though, I'm really at the end of any helpful suggestions I can com=
e
up with without looking at some code from both the indexing and querying.
Otherwise, we'll just continue to mislead each other. If you haven't
already, I strongly urge you to get a copy of Lucene In Action since that'l=
l
give you a much more thorough explication of tokenizing than I can.

Best
Erick

On 2/9/07, Xavier To <to.xavier@courrier.uqam.ca> wrote:
>
> Hey, thanks a lot for taking so much time here...
>
> I did check the and they appear to be the same...at least they are same
> class and same package. I just noticed something : they are using
> LowerCaseFilter.... I was going to say "could it be the source of the
> numbers being ignored ?" but it shouldn't since they are indexed (the
> modification of using WhitespaceAnalyzer during the search did return the
> exact number of results for "2002" which is 5.
>
> As for the tokenizing, shouldn't a query be tokenized ? It was already
> like that, and all I did was modify it so it would use Lucene's tokenizin=
g
> methods... If a query shouldn't be tokenized, maybe tokenizing it is the
> problem. If it should be tokenized,  what am I doing wrong that forces me=
 to
> add a single blank after each token ? I mean, I don't understand what the
> analyzer has to do with the tokenizing process... The reason why I add a
> blank is because the tokens are getting appended into a string, and then =
the
> string is sent through QueryParser.
>
> As I said, I don't really understand why the guy who made this search
> engine didn't just sent the query as a long string instead of tokenizing =
it,
> but since it was working fine with alphabetical searches, I said to mysel=
f
> "it must be the way to do it".
>
> Xavier T=F4
> Bacc. en Informatique et G=E9nie Logiciel
> to.xavier@courrier.uqam.ca
> (450)434-8905
>
> ----- Message d'origine -----
> De: Erick Erickson <erickerickson@gmail.com>
> Date: Jeudi, F=E9vrier 8, 2007 5:13 pm
> Objet: Re: Re : Re: Re : Re: Re : Re: Question concerning Analyzers
>
> > See below....
> >
> > On 2/8/07, Xavier To <to.xavier@courrier.uqam.ca> wrote:
> > >
> > > Thanks for helping me.
> > >
> > > I don't really understand what you mean by my Tokenizer
> > "corrects" what
> > > the indexing analyzer did.
> >
> >
> > You shouldn't have to do change the tokens in the usual case to get
> > thesearch to work right. You mentioned tokenizing the search
> > string, but then
> > having to add whitespaces back in. That step is the step that
> > "corrects"what the analyzer did. I put "corrects" in quotes because
> > it isn't really
> > correcting anything, the analyzers are doing what they should. But
> > if you
> > have to make this manual change, you're trying to fix up the query
> > string to
> > match what the analyzer did at index time. Which will leave you
> > correctingthis, then that, then the other thing when it would be
> > much better just to
> > use the same analyzer if possible. I've just seen too many "oh,
> > there's one
> > more thing" statements in this situation.
> >
> >
> > By the way, the tokenizer we use is one provided in Lucene. My
> > guess is that
> > > the problem was that the analyzer was thought to be the same by
> > the guy who
> > > made the search engine, but the querying analyzer is fetched
> > inside a JAR by
> > > a bean. Could it be that this is the problem ?
> >
> >
> > It shouldn't be if the same analyzer is fetched inside the bean.
> > Can't you
> > check what analyzer is used in both cases?
> >
> > Erick
> >
> >
> > Xavier T=F4
> > > Bacc. en Informatique et G=E9nie Logiciel
> > > to.xavier@courrier.uqam.ca
> > > (450)434-8905
> > >
> > > ----- Message d'origine -----
> > > De: Erick Erickson <erickerickson@gmail.com>
> > > Date: Jeudi, F=E9vrier 8, 2007 12:51 pm
> > > Objet: Re: Re : Re: Re : Re: Question concerning Analyzers
> > >
> > > > Well, you've proved that your problem is that the analyzer you're
> > > > using when
> > > > querying isn't matching what you use during indexing. I think that
> > > > whatyou've done will lead you into significant problems down the
> > > > road as your
> > > > tokenizer then has to "correct" for what the index analyzer did
> > > > though.
> > > > What would probably be MUCH less work in the long run is to
> > align the
> > > > analyzer you use at query time with the analyzer you use at index
> > > > time. You
> > > > can use a PerFieldAnalyzerWrapper to handle different fields in
> > > > differentways. Forget your custom tokenizer for the time being,
> > > > just try using the
> > > > same analyzer during searching that you used during indexing. You
> > > > can use
> > > > the
> > > > *QueryParser<file:///C:/lucene-
> > > >
> > 2.0.0/docs/api/org/apache/lucene/queryParser/QueryParser.html#QueryPars=
er%28java.lang.String,%20org.apache.lucene.analysis.Analyzer%29>*(String>
> <http://java.sun.com/j2se/1.4/docs/api/java/lang/String.html> f,
> > > > Analyzer<file:///C:/lucene-
> > > > 2.0.0/docs/api/org/apache/lucene/analysis/Analyzer.html> a)
> > > >
> > > > form of the QueryParser, where the Analyzer is the same one you
> > > > used when
> > > > indexing. There are some circumstances where you want to use
> > different> > analyzers when querying and when indexing, but don't
> > go there
> > > > unless you
> > > > need to <G>....
> > > >
> > > > If that doesn't do what you want, I'd really recommend is that you
> > > > make your
> > > > own custom Analyzer, built on, say, WhitespaceTokenizer,
> > > > LowerCaseFilter.This is usually the way I've approached this kind
> > > > of problem. And use *that*
> > > > one at index and query time.
> > > >
> > > > There's an example in Lucene In Action, see the SynonymAnalyzer
> > > > example.That example is MUCH more complex than you'll need <G>...
> > > >
> > > > Best
> > > > Erick
> > > >
> > > > On 2/8/07, Xavier To <to.xavier@courrier.uqam.ca> wrote:
> > > > >
> > > > > Hey !
> > > > >
> > > > > I tried using WhitespaceAnalyzer during the search and it
> > works. I
> > > > > refactored the tokenizing process so it uses TokenStream
> > instead of
> > > > > StringTokenizer and it works fine for one thing : the query
> > "this> > is a test"
> > > > > becomes "thisisatest". I fixed it by adding a space after each
> > > > token except
> > > > > for the last one, but is there a clean way to do it ? I'm using
> > > > > WhitespaceTokenizer.
> > > > >
> > > > > Thanks a bunch !
> > > > >
> > > > > Xavier T=F4
> > > > > Bacc. en Informatique et G=E9nie Logiciel
> > > > > to.xavier@courrier.uqam.ca
> > > > > (450)434-8905
> > > > >
> > > > > ----- Message d'origine -----
> > > > > De: Erick Erickson <erickerickson@gmail.com>
> > > > > Date: Mercredi, F=E9vrier 7, 2007 4:28 pm
> > > > > Objet: Re: Re : Re: Question concerning Analyzers
> > > > >
> > > > > > Then the analyzer you're using when parsing the query is
> > stripping> > > > them. It
> > > > > > must be different than the one you use when indexing somehow.
> > > > At least
> > > > > > that's the only explanation I can imagine....
> > > > > >
> > > > > > Perhaps, somehow, you are using a default analyzer when you
> > > > parse a
> > > > > > query?Or you aren't specifying the field when you query and
> > > > thus a
> > > > > > default is
> > > > > > used? Or you are using a PerFieldAnalyzerWrapper and dropping
> > > > > > through to the
> > > > > > default? or ????
> > > > > >
> > > > > > Just for yucks, I'd try using WhitespaceAnalyzer on a query
> > with> > > > somethingyou *know* exists in the index for a
> > particular field and
> > > > > > work my way up to
> > > > > > whatever your real problem is in small steps (since you
> > can't post
> > > > > > code<G>)......
> > > > > >
> > > > > > Best
> > > > > > Erick
> > > > > >
> > > > > > On 2/7/07, Xavier To <to.xavier@courrier.uqam.ca> wrote:
> > > > > > >
> > > > > > > Thanks Erik and Erick,
> > > > > > >
> > > > > > > I guess my question was rather unclear, but you guys
> > answered it
> > > > > > all the
> > > > > > > same : it is impossible for an analyzer to index
> > something and
> > > > > > having the
> > > > > > > same analyzer ignore the thing indexed during a search.
> > > > > > >
> > > > > > > If it makes everything clearer, during indexation,
> > numbers  are
> > > > > > indexed,> whether or not they are accompanied by letters (
> > 2003> > and> > 4wd are both
> > > > > > > indexed). That's fine, since we want this.  The problem
> > occurs> > > > when I try to
> > > > > > > search for them : They are ignored. I know they are indexed
> > > > > > because I ran
> > > > > > > through the index using Luke.
> > > > > > >
> > > > > > > Any thoughts regarding this problem ?
> > > > > > >
> > > > > > > Xavier T=F4
> > > > > > > Bacc. en Informatique et G=E9nie Logiciel
> > > > > > > to.xavier@courrier.uqam.ca
> > > > > > > (450)434-8905
> > > > > > >
> > > > > > > ----- Message d'origine -----
> > > > > > > De: Erik Hatcher <erik@ehatchersolutions.com>
> > > > > > > Date: Mercredi, F=E9vrier 7, 2007 3:15 pm
> > > > > > > Objet: Re: Question concerning Analyzers
> > > > > > >
> > > > > > > > There is no requirement that you use the same analyzer to
> > > > > > search as
> > > > > > > >
> > > > > > > > you used to index.  So, yes, you could certainly index
> > > > things and
> > > > > > > > ignore them during a search.
> > > > > > > >
> > > > > > > >       Erik
> > > > > > > >
> > > > > > > >
> > > > > > > > On Feb 7, 2007, at 2:10 PM, Xavier To wrote:
> > > > > > > >
> > > > > > > > > Hi, me again
> > > > > > > > >
> > > > > > > > > I'm still stuck with my search engine, but something
> > popped> > > > in my
> > > > > > > >
> > > > > > > > > head : Can an analyzer index something but ignore it
> > > > during a
> > > > > > > > > search ? I'm asking this because now that I've been
> > > > searching> > for> >
> > > > > > > > > an answer, I've come to think that I should redo the
> > whole> > > > search> >
> > > > > > > > > engine, but I don't want to reproduce the same error as
> > > > we have
> > > > > > > > > now. It would be stupid to accidentaly redo the same
> > > > mistake. I
> > > > > > > > > still haven't received news from my seniors about me
> > posting> > > > code> >
> > > > > > > > > and all...
> > > > > > > > >
> > > > > > > > > Xavier T=F4
> > > > > > > > > Bacc. en Informatique et G=E9nie Logiciel
> > > > > > > > > to.xavier@courrier.uqam.ca
> > > > > > > > > (450)434-8905
> > > > > > > > >
> > > > > > > > >
> > > > > > > > >
> > > > > > > > > ------------------------------------------------------
> > ----
> > > > ----
> > > > > > ----
> > > > > > > > ---
> > > > > > > > > To unsubscribe, e-mail: java-user-
> > > > unsubscribe@lucene.apache.org> > > > > For additional commands,
> > e-
> > > > mail: java-user-
> > > > > > help@lucene.apache.org> >
> > > > > > > >
> > > > > > > > --------------------------------------------------------
> > ----
> > > > ----
> > > > > > ----
> > > > > > > > -
> > > > > > > > To unsubscribe, e-mail: java-user-
> > > > unsubscribe@lucene.apache.org> > > > For additional commands, e-
> > > > mail: java-user-help@lucene.apache.org
> > > > > > > >
> > > > > > > >
> > > > > > >
> > > > > > >
> > > > > > > ----------------------------------------------------------
> > ----
> > > > ----
> > > > > > ---
> > > > > > > To unsubscribe, e-mail: java-user-
> > unsubscribe@lucene.apache.org> > > > > For additional commands, e-
> > mail: java-user-
> > > > help@lucene.apache.org> > >
> > > > > > >
> > > > > >
> > > > >
> > > > >
> > > > > --------------------------------------------------------------
> > ----
> > > > ---
> > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail: java-user-
> > help@lucene.apache.org> > >
> > > > >
> > > >
> > >
> > >
> > > ------------------------------------------------------------------
> > ---
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_52178_23167301.1171042737381--

From java-user-return-26055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 09 17:42:10 2007
Return-Path: <java-user-return-26055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35314 invoked from network); 9 Feb 2007 17:42:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2007 17:42:08 -0000
Received: (qmail 55706 invoked by uid 500); 9 Feb 2007 17:42:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55675 invoked by uid 500); 9 Feb 2007 17:42:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55664 invoked by uid 99); 9 Feb 2007 17:42:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 09:42:07 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 09:41:57 -0800
Received: by nf-out-0910.google.com with SMTP id i2so1121195nfe
        for <java-user@lucene.apache.org>; Fri, 09 Feb 2007 09:41:36 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=E+9zDtoPnDaIByjwM/1Wvk2V4B+/38zKZJ+6vCUo0+2vxbeqKWZwWg4hzH133DPUR0VWP0ZcoUKO4w2zmOQSnHDeV6zP/PSzf2HH46J7zZwZXfB9r3qsCk++B/LOyw2u0rYNP3N3+UUy+nWK8+rDcUNqy7fV9lSKvqiPmWj/cmM=
Received: by 10.82.175.2 with SMTP id x2mr4937407bue.1171042895576;
        Fri, 09 Feb 2007 09:41:35 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Fri, 9 Feb 2007 09:41:30 -0800 (PST)
Message-ID: <359a92830702090941s2fdeac53sdda0a217b6e488fa@mail.gmail.com>
Date: Fri, 9 Feb 2007 12:41:30 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Highlighter returning incomplete field text
In-Reply-To: <119460.58281.qm@web26005.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_52234_20866226.1171042890941"
References: <119460.58281.qm@web26005.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_52234_20866226.1171042890941
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Also, there's a default of 10,000 tokens per field at index time....

Erick

On 2/9/07, mark harwood <markharw00d@yahoo.co.uk> wrote:
>
> See Highlighter.setMaxDocBytesToAnalyze(int byteCount)
>
> It's default setting is limited in order to avoid excessive response
> times.
>
> Cheers
> Mark
>
>
> ----- Original Message ----
> From: Fred Eaker <fredeaker@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Friday, 9 February, 2007 4:28:36 PM
> Subject: Highlighter returning incomplete field text
>
> Is there a limit to how many characters a Highlighter or NullFragmenter
> will
> return?
>
> I have indexed an entire HTML document (145kb). When I use the highlighter
> with
> a NullFragmenter, the getBestFragment and getBestFragments methods return
> the
> text of the field up to 51316 characters.
>
> I have tried indexing other HTML documents as well, but get the same
> results.
>
> If I change the Highlighter's Encoder to DefaultEncoder, I get more
> characters,
> but not the entire field.
>
> Here is some code:
>
> Highlighter highlighter =
> new Highlighter(new SimpleHTMLFormatter(),
> new DefaultEncoder(),
> new QueryScorer(query));
>
> highlighter.setTextFragmenter(new NullFragmenter());
>
> TokenStream tokenStream =
> LuceneUtils.getAnalyzer().tokenStream(
> fieldName,
> new StringReader(hit.get(fieldName)));
>
> String highlightedHit =
> highlighter.getBestFragment(tokenStream, hit.get(fieldName));
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>
>
> ___________________________________________________________
> The all-new Yahoo! Mail goes wherever you go - free your email address
> from your Internet provider. http://uk.docs.yahoo.com/nowyoucan.html
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_52234_20866226.1171042890941--

From java-user-return-26056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 09 18:14:36 2007
Return-Path: <java-user-return-26056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43474 invoked from network); 9 Feb 2007 18:14:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2007 18:14:35 -0000
Received: (qmail 15501 invoked by uid 500); 9 Feb 2007 18:14:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15475 invoked by uid 500); 9 Feb 2007 18:14:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15462 invoked by uid 99); 9 Feb 2007 18:14:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 10:14:33 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of janssen@parc.com designates 13.1.64.93 as permitted sender)
Received: from [13.1.64.93] (HELO alpha.xerox.com) (13.1.64.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 10:14:22 -0800
Received: from synergy1.parc.xerox.com ([13.1.101.60]) by alpha.xerox.com with SMTP id <224275(2)>; Fri, 9 Feb 2007 10:13:54 PST
Received: from parc.com ([127.0.0.1]) by synergy1.parc.xerox.com with SMTP id <57996>; Fri, 9 Feb 2007 10:13:51 PST
To: java-user@lucene.apache.org
Subject: Re: Reduction based "more like this"? 
In-reply-to: <181449.5358.qm@web26011.mail.ukl.yahoo.com> 
References: <181449.5358.qm@web26011.mail.ukl.yahoo.com>
Comments: In-reply-to mark harwood <markharw00d@yahoo.co.uk>
    message dated "Fri, 09 Feb 2007 03:52:23 -0800."
Date: Fri, 9 Feb 2007 10:13:46 PST
From: Bill Janssen <janssen@parc.com>
Message-Id: <07Feb9.101351pst."57996"@synergy1.parc.xerox.com>
X-Virus-Checked: Checked by ClamAV on apache.org

> For example, given terms "female", "John" and "London" - all 3 may
> have equal IDF but should a document representing a female in London
> be given equal weighting to a document representing the rarer example
> of a female who happens to be called "John"?

Not to mention multi-word phrase tokenization, like the difference
between a document which contains the text

  "...should not be allowed to possess a lethal weapon like a..."

and a document which contains the phrase

  "...should not be allowed to see Lethal Weapon until at least the age of..."

In the first case, tokenization of "lethal weapon" should take place, while
in the second case, we need to preserve the the phrase as a single term.

Bill

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 09 18:42:41 2007
Return-Path: <java-user-return-26057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52850 invoked from network); 9 Feb 2007 18:42:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2007 18:42:40 -0000
Received: (qmail 79969 invoked by uid 500); 9 Feb 2007 18:42:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79944 invoked by uid 500); 9 Feb 2007 18:42:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79933 invoked by uid 99); 9 Feb 2007 18:42:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 10:42:40 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [132.208.250.6] (HELO anis.telecom.uqam.ca) (132.208.250.6)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 10:42:28 -0800
Received: from anis.telecom.uqam.ca (anis.telecom.uqam.ca [132.208.250.6])
	by sortant.uqam.ca (8.13.8/8.12.1) with SMTP id l19IYk7A020338
	for <java-user@lucene.apache.org>; Fri, 9 Feb 2007 13:34:47 -0500 (EST)
Received: from antivirus.uqam.ca ([127.0.0.1])
 by anis.telecom.uqam.ca (SAVSMTP 3.1.1.32) with SMTP id M2007020913344706347
 for <java-user@lucene.apache.org>; Fri, 09 Feb 2007 13:34:47 -0500
Received: from courriel2.sitel.uqam.ca (courriel2.sitel.uqam.ca [132.208.250.43])
	by intrant.uqam.ca (8.13.8/8.12.2/uqam-filtres) with ESMTP id l19IX85l009505
	for <java-user@lucene.apache.org>; Fri, 9 Feb 2007 13:33:09 -0500 (EST)
X-UQAM-Spam-Filter: Filtre-Uqam re:  abuse@uqam.ca
Received: from courrier.uqam.ca ([127.0.0.1]) by courriel2.sitel.uqam.ca
 (Sun Java System Messaging Server 6.1 HotFix 0.11 (built Jan 28 2005))
 with ESMTP id <0JD700MXJKV7SNF0@courriel2.sitel.uqam.ca> for
 java-user@lucene.apache.org; Fri, 09 Feb 2007 13:33:07 -0500 (EST)
Received: from [206.47.141.21] by courriel2.sitel.uqam.ca (mshttpd); Fri,
 09 Feb 2007 13:33:07 -0500
Date: Fri, 09 Feb 2007 13:33:07 -0500
From: Xavier To <to.xavier@courrier.uqam.ca>
Subject: Re : Re: Re : Re: Re : Re: Re : Re: Re : Re: Question concerning
 Analyzers
To: java-user@lucene.apache.org
Message-id: <225a0df77616.45cc7813@courrier.uqam.ca>
MIME-version: 1.0
X-Mailer: Sun Java(tm) System Messenger Express 6.1 HotFix 0.11 (built Jan 28
 2005)
Content-type: text/plain; charset=iso-8859-1
Content-language: fr
Content-transfer-encoding: quoted-printable
Content-disposition: inline
X-Accept-Language: fr
Priority: normal
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks a lot for all your help=2E I guess this temporary fix will have t=
o do until I have clearance to post some code=2E For the current index (=
that was last modified over a year ago)=2C it works fine=2C but I know i=
t=27s not properly done=2E

Thank you all very much=2C especially you Mr Erickson=2E

Xavier T=F4
Bacc=2E en Informatique et G=E9nie Logiciel
to=2Exavier=40courrier=2Euqam=2Eca
(450)434-8905

----- Message d=27origine -----
De=3A Erick Erickson =3Cerickerickson=40gmail=2Ecom=3E
Date=3A Vendredi=2C F=E9vrier 9=2C 2007 12=3A38 pm
Objet=3A Re=3A Re =3A Re=3A Re =3A Re=3A Re =3A Re=3A Re =3A Re=3A Quest=
ion concerning Analyzers

=3E The query should be tokenized *by the query parser*=2E You shouldn=27=
t =

=3E have to
=3E do the tokenizing yourself=2E When you print out the results of the =

=3E parsing=2Cyou should see something like field=3Avalue1 field=3Avalue=
2=2C =

=3E which are built up
=3E under the covers to be a BooleanQuery with a bunch of clauses=2E
=3E =

=3E I think=2C though=2C I=27m really at the end of any helpful suggesti=
ons I =

=3E can come
=3E up with without looking at some code from both the indexing and =

=3E querying=2EOtherwise=2C we=27ll just continue to mislead each other=2E=
 If =

=3E you haven=27t
=3E already=2C I strongly urge you to get a copy of Lucene In Action =

=3E since that=27ll
=3E give you a much more thorough explication of tokenizing than I can=2E=

=3E =

=3E Best
=3E Erick
=3E =

=3E On 2/9/07=2C Xavier To =3Cto=2Exavier=40courrier=2Euqam=2Eca=3E wrot=
e=3A
=3E =3E
=3E =3E Hey=2C thanks a lot for taking so much time here=2E=2E=2E
=3E =3E
=3E =3E I did check the and they appear to be the same=2E=2E=2Eat least =
they =

=3E are same
=3E =3E class and same package=2E I just noticed something =3A they are =
using
=3E =3E LowerCaseFilter=2E=2E=2E=2E I was going to say =22could it be th=
e source of =

=3E the=3E numbers being ignored =3F=22 but it shouldn=27t since they ar=
e =

=3E indexed (the
=3E =3E modification of using WhitespaceAnalyzer during the search did =

=3E return the
=3E =3E exact number of results for =222002=22 which is 5=2E
=3E =3E
=3E =3E As for the tokenizing=2C shouldn=27t a query be tokenized =3F It=
 was =

=3E already=3E like that=2C and all I did was modify it so it would use =

=3E Lucene=27s tokenizing
=3E =3E methods=2E=2E=2E If a query shouldn=27t be tokenized=2C maybe to=
kenizing it =

=3E is the
=3E =3E problem=2E If it should be tokenized=2C  what am I doing wrong t=
hat =

=3E forces me to
=3E =3E add a single blank after each token =3F I mean=2C I don=27t unde=
rstand =

=3E what the
=3E =3E analyzer has to do with the tokenizing process=2E=2E=2E The reas=
on why =

=3E I add a
=3E =3E blank is because the tokens are getting appended into a string=2C=
 =

=3E and then the
=3E =3E string is sent through QueryParser=2E
=3E =3E
=3E =3E As I said=2C I don=27t really understand why the guy who made th=
is =

=3E search=3E engine didn=27t just sent the query as a long string inste=
ad =

=3E of tokenizing it=2C
=3E =3E but since it was working fine with alphabetical searches=2C I sa=
id =

=3E to myself
=3E =3E =22it must be the way to do it=22=2E
=3E =3E
=3E =3E Xavier T=F4
=3E =3E Bacc=2E en Informatique et G=E9nie Logiciel
=3E =3E to=2Exavier=40courrier=2Euqam=2Eca
=3E =3E (450)434-8905
=3E =3E
=3E =3E ----- Message d=27origine -----
=3E =3E De=3A Erick Erickson =3Cerickerickson=40gmail=2Ecom=3E
=3E =3E Date=3A Jeudi=2C F=E9vrier 8=2C 2007 5=3A13 pm
=3E =3E Objet=3A Re=3A Re =3A Re=3A Re =3A Re=3A Re =3A Re=3A Question c=
oncerning Analyzers
=3E =3E
=3E =3E =3E See below=2E=2E=2E=2E
=3E =3E =3E
=3E =3E =3E On 2/8/07=2C Xavier To =3Cto=2Exavier=40courrier=2Euqam=2Eca=
=3E wrote=3A
=3E =3E =3E =3E
=3E =3E =3E =3E Thanks for helping me=2E
=3E =3E =3E =3E
=3E =3E =3E =3E I don=27t really understand what you mean by my Tokenize=
r
=3E =3E =3E =22corrects=22 what
=3E =3E =3E =3E the indexing analyzer did=2E
=3E =3E =3E
=3E =3E =3E
=3E =3E =3E You shouldn=27t have to do change the tokens in the usual ca=
se to =

=3E get=3E =3E thesearch to work right=2E You mentioned tokenizing the s=
earch
=3E =3E =3E string=2C but then
=3E =3E =3E having to add whitespaces back in=2E That step is the step t=
hat
=3E =3E =3E =22corrects=22what the analyzer did=2E I put =22corrects=22 =
in quotes =

=3E because=3E =3E it isn=27t really
=3E =3E =3E correcting anything=2C the analyzers are doing what they sho=
uld=2E But
=3E =3E =3E if you
=3E =3E =3E have to make this manual change=2C you=27re trying to fix up=
 the query
=3E =3E =3E string to
=3E =3E =3E match what the analyzer did at index time=2E Which will leav=
e you
=3E =3E =3E correctingthis=2C then that=2C then the other thing when it =
would be
=3E =3E =3E much better just to
=3E =3E =3E use the same analyzer if possible=2E I=27ve just seen too ma=
ny =22oh=2C
=3E =3E =3E there=27s one
=3E =3E =3E more thing=22 statements in this situation=2E
=3E =3E =3E
=3E =3E =3E
=3E =3E =3E By the way=2C the tokenizer we use is one provided in Lucene=
=2E My
=3E =3E =3E guess is that
=3E =3E =3E =3E the problem was that the analyzer was thought to be the =
same by
=3E =3E =3E the guy who
=3E =3E =3E =3E made the search engine=2C but the querying analyzer is f=
etched
=3E =3E =3E inside a JAR by
=3E =3E =3E =3E a bean=2E Could it be that this is the problem =3F
=3E =3E =3E
=3E =3E =3E
=3E =3E =3E It shouldn=27t be if the same analyzer is fetched inside the=
 bean=2E
=3E =3E =3E Can=27t you
=3E =3E =3E check what analyzer is used in both cases=3F
=3E =3E =3E
=3E =3E =3E Erick
=3E =3E =3E
=3E =3E =3E
=3E =3E =3E Xavier T=F4
=3E =3E =3E =3E Bacc=2E en Informatique et G=E9nie Logiciel
=3E =3E =3E =3E to=2Exavier=40courrier=2Euqam=2Eca
=3E =3E =3E =3E (450)434-8905
=3E =3E =3E =3E
=3E =3E =3E =3E ----- Message d=27origine -----
=3E =3E =3E =3E De=3A Erick Erickson =3Cerickerickson=40gmail=2Ecom=3E
=3E =3E =3E =3E Date=3A Jeudi=2C F=E9vrier 8=2C 2007 12=3A51 pm
=3E =3E =3E =3E Objet=3A Re=3A Re =3A Re=3A Re =3A Re=3A Question concer=
ning Analyzers
=3E =3E =3E =3E
=3E =3E =3E =3E =3E Well=2C you=27ve proved that your problem is that th=
e analyzer =

=3E you=27re=3E =3E =3E =3E using when
=3E =3E =3E =3E =3E querying isn=27t matching what you use during indexi=
ng=2E I =

=3E think that
=3E =3E =3E =3E =3E whatyou=27ve done will lead you into significant pro=
blems =

=3E down the
=3E =3E =3E =3E =3E road as your
=3E =3E =3E =3E =3E tokenizer then has to =22correct=22 for what the ind=
ex analyzer =

=3E did=3E =3E =3E =3E though=2E
=3E =3E =3E =3E =3E What would probably be MUCH less work in the long ru=
n is to
=3E =3E =3E align the
=3E =3E =3E =3E =3E analyzer you use at query time with the analyzer you=
 use at =

=3E index=3E =3E =3E =3E time=2E You
=3E =3E =3E =3E =3E can use a PerFieldAnalyzerWrapper to handle differen=
t =

=3E fields in
=3E =3E =3E =3E =3E differentways=2E Forget your custom tokenizer for th=
e time =

=3E being=2C=3E =3E =3E =3E just try using the
=3E =3E =3E =3E =3E same analyzer during searching that you used during =

=3E indexing=2E You
=3E =3E =3E =3E =3E can use
=3E =3E =3E =3E =3E the
=3E =3E =3E =3E =3E *QueryParser=3Cfile=3A///C=3A/lucene-
=3E =3E =3E =3E =3E
=3E =3E =3E =

=3E 2=2E0=2E0/docs/api/org/apache/lucene/queryParser/QueryParser=2Ehtml=23=
QueryParser=2528java=2Elang=2EString=2C=2520org=2Eapache=2Elucene=2Eanal=
ysis=2EAnalyzer=2529=3E*(String=3E=3E =3Chttp=3A//java=2Esun=2Ecom/j2se/=
1=2E4/docs/api/java/lang/String=2Ehtml=3E f=2C
=3E =3E =3E =3E =3E Analyzer=3Cfile=3A///C=3A/lucene-
=3E =3E =3E =3E =3E 2=2E0=2E0/docs/api/org/apache/lucene/analysis/Analyz=
er=2Ehtml=3E a)
=3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E form of the QueryParser=2C where the Analyzer is the=
 same one =

=3E you=3E =3E =3E =3E used when
=3E =3E =3E =3E =3E indexing=2E There are some circumstances where you w=
ant to use
=3E =3E =3E different=3E =3E analyzers when querying and when indexing=2C=
 but don=27t
=3E =3E =3E go there
=3E =3E =3E =3E =3E unless you
=3E =3E =3E =3E =3E need to =3CG=3E=2E=2E=2E=2E
=3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E If that doesn=27t do what you want=2C I=27d really r=
ecommend is =

=3E that you
=3E =3E =3E =3E =3E make your
=3E =3E =3E =3E =3E own custom Analyzer=2C built on=2C say=2C Whitespace=
Tokenizer=2C
=3E =3E =3E =3E =3E LowerCaseFilter=2EThis is usually the way I=27ve app=
roached =

=3E this kind
=3E =3E =3E =3E =3E of problem=2E And use *that*
=3E =3E =3E =3E =3E one at index and query time=2E
=3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E There=27s an example in Lucene In Action=2C see the =

=3E SynonymAnalyzer=3E =3E =3E =3E example=2EThat example is MUCH more c=
omplex =

=3E than you=27ll need =3CG=3E=2E=2E=2E
=3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E Best
=3E =3E =3E =3E =3E Erick
=3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E On 2/8/07=2C Xavier To =3Cto=2Exavier=40courrier=2Eu=
qam=2Eca=3E wrote=3A
=3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E Hey !
=3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E I tried using WhitespaceAnalyzer during the sear=
ch and it
=3E =3E =3E works=2E I
=3E =3E =3E =3E =3E =3E refactored the tokenizing process so it uses Tok=
enStream
=3E =3E =3E instead of
=3E =3E =3E =3E =3E =3E StringTokenizer and it works fine for one thing =
=3A the query
=3E =3E =3E =22this=3E =3E is a test=22
=3E =3E =3E =3E =3E =3E becomes =22thisisatest=22=2E I fixed it by addin=
g a space after =

=3E each=3E =3E =3E =3E token except
=3E =3E =3E =3E =3E =3E for the last one=2C but is there a clean way to =
do it =3F I=27m =

=3E using=3E =3E =3E =3E =3E WhitespaceTokenizer=2E
=3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E Thanks a bunch !
=3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E Xavier T=F4
=3E =3E =3E =3E =3E =3E Bacc=2E en Informatique et G=E9nie Logiciel
=3E =3E =3E =3E =3E =3E to=2Exavier=40courrier=2Euqam=2Eca
=3E =3E =3E =3E =3E =3E (450)434-8905
=3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E ----- Message d=27origine -----
=3E =3E =3E =3E =3E =3E De=3A Erick Erickson =3Cerickerickson=40gmail=2E=
com=3E
=3E =3E =3E =3E =3E =3E Date=3A Mercredi=2C F=E9vrier 7=2C 2007 4=3A28 p=
m
=3E =3E =3E =3E =3E =3E Objet=3A Re=3A Re =3A Re=3A Question concerning =
Analyzers
=3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E Then the analyzer you=27re using when parsin=
g the query is
=3E =3E =3E stripping=3E =3E =3E =3E them=2E It
=3E =3E =3E =3E =3E =3E =3E must be different than the one you use when =
indexing =

=3E somehow=2E=3E =3E =3E =3E At least
=3E =3E =3E =3E =3E =3E =3E that=27s the only explanation I can imagine=2E=
=2E=2E=2E
=3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E Perhaps=2C somehow=2C you are using a defaul=
t analyzer when =

=3E you=3E =3E =3E =3E parse a
=3E =3E =3E =3E =3E =3E =3E query=3FOr you aren=27t specifying the field=
 when you query =

=3E and=3E =3E =3E =3E thus a
=3E =3E =3E =3E =3E =3E =3E default is
=3E =3E =3E =3E =3E =3E =3E used=3F Or you are using a PerFieldAnalyzerW=
rapper and =

=3E dropping=3E =3E =3E =3E =3E =3E through to the
=3E =3E =3E =3E =3E =3E =3E default=3F or =3F=3F=3F=3F
=3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E Just for yucks=2C I=27d try using Whitespace=
Analyzer on a =

=3E query=3E =3E with=3E =3E =3E =3E somethingyou *know* exists in the i=
ndex for a
=3E =3E =3E particular field and
=3E =3E =3E =3E =3E =3E =3E work my way up to
=3E =3E =3E =3E =3E =3E =3E whatever your real problem is in small steps=
 (since you
=3E =3E =3E can=27t post
=3E =3E =3E =3E =3E =3E =3E code=3CG=3E)=2E=2E=2E=2E=2E=2E
=3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E Best
=3E =3E =3E =3E =3E =3E =3E Erick
=3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E On 2/7/07=2C Xavier To =3Cto=2Exavier=40cour=
rier=2Euqam=2Eca=3E wrote=3A
=3E =3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E =3E Thanks Erik and Erick=2C
=3E =3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E =3E I guess my question was rather unclear=2C=
 but you guys
=3E =3E =3E answered it
=3E =3E =3E =3E =3E =3E =3E all the
=3E =3E =3E =3E =3E =3E =3E =3E same =3A it is impossible for an analyze=
r to index
=3E =3E =3E something and
=3E =3E =3E =3E =3E =3E =3E having the
=3E =3E =3E =3E =3E =3E =3E =3E same analyzer ignore the thing indexed d=
uring a search=2E
=3E =3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E =3E If it makes everything clearer=2C during=
 indexation=2C
=3E =3E =3E numbers  are
=3E =3E =3E =3E =3E =3E =3E indexed=2C=3E whether or not they are accomp=
anied by =

=3E letters (
=3E =3E =3E 2003=3E =3E and=3E =3E 4wd are both
=3E =3E =3E =3E =3E =3E =3E =3E indexed)=2E That=27s fine=2C since we wa=
nt this=2E  The problem
=3E =3E =3E occurs=3E =3E =3E =3E when I try to
=3E =3E =3E =3E =3E =3E =3E =3E search for them =3A They are ignored=2E =
I know they are =

=3E indexed=3E =3E =3E =3E =3E =3E because I ran
=3E =3E =3E =3E =3E =3E =3E =3E through the index using Luke=2E
=3E =3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E =3E Any thoughts regarding this problem =3F
=3E =3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E =3E Xavier T=F4
=3E =3E =3E =3E =3E =3E =3E =3E Bacc=2E en Informatique et G=E9nie Logic=
iel
=3E =3E =3E =3E =3E =3E =3E =3E to=2Exavier=40courrier=2Euqam=2Eca
=3E =3E =3E =3E =3E =3E =3E =3E (450)434-8905
=3E =3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E =3E ----- Message d=27origine -----
=3E =3E =3E =3E =3E =3E =3E =3E De=3A Erik Hatcher =3Cerik=40ehatchersol=
utions=2Ecom=3E
=3E =3E =3E =3E =3E =3E =3E =3E Date=3A Mercredi=2C F=E9vrier 7=2C 2007 =
3=3A15 pm
=3E =3E =3E =3E =3E =3E =3E =3E Objet=3A Re=3A Question concerning Analy=
zers
=3E =3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E =3E =3E There is no requirement that you use=
 the same =

=3E analyzer to
=3E =3E =3E =3E =3E =3E =3E search as
=3E =3E =3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E =3E =3E you used to index=2E  So=2C yes=2C y=
ou could certainly index
=3E =3E =3E =3E =3E things and
=3E =3E =3E =3E =3E =3E =3E =3E =3E ignore them during a search=2E
=3E =3E =3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E =3E =3E       Erik
=3E =3E =3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E =3E =3E On Feb 7=2C 2007=2C at 2=3A10 PM=2C =
Xavier To wrote=3A
=3E =3E =3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E =3E =3E =3E Hi=2C me again
=3E =3E =3E =3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E =3E =3E =3E I=27m still stuck with my search=
 engine=2C but something
=3E =3E =3E popped=3E =3E =3E =3E in my
=3E =3E =3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E =3E =3E =3E head =3A Can an analyzer index s=
omething but ignore it
=3E =3E =3E =3E =3E during a
=3E =3E =3E =3E =3E =3E =3E =3E =3E =3E search =3F I=27m asking this bec=
ause now that I=27ve been
=3E =3E =3E =3E =3E searching=3E =3E for=3E =3E
=3E =3E =3E =3E =3E =3E =3E =3E =3E =3E an answer=2C I=27ve come to thin=
k that I should redo the
=3E =3E =3E whole=3E =3E =3E =3E search=3E =3E
=3E =3E =3E =3E =3E =3E =3E =3E =3E =3E engine=2C but I don=27t want to =
reproduce the same =

=3E error as
=3E =3E =3E =3E =3E we have
=3E =3E =3E =3E =3E =3E =3E =3E =3E =3E now=2E It would be stupid to acc=
identaly redo the same
=3E =3E =3E =3E =3E mistake=2E I
=3E =3E =3E =3E =3E =3E =3E =3E =3E =3E still haven=27t received news fr=
om my seniors about me
=3E =3E =3E posting=3E =3E =3E =3E code=3E =3E
=3E =3E =3E =3E =3E =3E =3E =3E =3E =3E and all=2E=2E=2E
=3E =3E =3E =3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E =3E =3E =3E Xavier T=F4
=3E =3E =3E =3E =3E =3E =3E =3E =3E =3E Bacc=2E en Informatique et G=E9n=
ie Logiciel
=3E =3E =3E =3E =3E =3E =3E =3E =3E =3E to=2Exavier=40courrier=2Euqam=2E=
ca
=3E =3E =3E =3E =3E =3E =3E =3E =3E =3E (450)434-8905
=3E =3E =3E =3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E =3E =3E =3E --------------------------------=
------------------
=3E ----
=3E =3E =3E ----
=3E =3E =3E =3E =3E ----
=3E =3E =3E =3E =3E =3E =3E ----
=3E =3E =3E =3E =3E =3E =3E =3E =3E ---
=3E =3E =3E =3E =3E =3E =3E =3E =3E =3E To unsubscribe=2C e-mail=3A java=
-user-
=3E =3E =3E =3E =3E unsubscribe=40lucene=2Eapache=2Eorg=3E =3E =3E =3E =3E=
 For additional =

=3E commands=2C=3E =3E e-
=3E =3E =3E =3E =3E mail=3A java-user-
=3E =3E =3E =3E =3E =3E =3E help=40lucene=2Eapache=2Eorg=3E =3E
=3E =3E =3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E =3E =3E ------------------------------------=
----------------
=3E ----
=3E =3E =3E ----
=3E =3E =3E =3E =3E ----
=3E =3E =3E =3E =3E =3E =3E ----
=3E =3E =3E =3E =3E =3E =3E =3E =3E -
=3E =3E =3E =3E =3E =3E =3E =3E =3E To unsubscribe=2C e-mail=3A java-use=
r-
=3E =3E =3E =3E =3E unsubscribe=40lucene=2Eapache=2Eorg=3E =3E =3E =3E F=
or additional =

=3E commands=2C e-
=3E =3E =3E =3E =3E mail=3A java-user-help=40lucene=2Eapache=2Eorg
=3E =3E =3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E =3E ----------------------------------------=
--------------
=3E ----
=3E =3E =3E ----
=3E =3E =3E =3E =3E ----
=3E =3E =3E =3E =3E =3E =3E ---
=3E =3E =3E =3E =3E =3E =3E =3E To unsubscribe=2C e-mail=3A java-user-
=3E =3E =3E unsubscribe=40lucene=2Eapache=2Eorg=3E =3E =3E =3E =3E For a=
dditional commands=2C =

=3E e-
=3E =3E =3E mail=3A java-user-
=3E =3E =3E =3E =3E help=40lucene=2Eapache=2Eorg=3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E =3E ------------------------------------------------=
----------
=3E ----
=3E =3E =3E ----
=3E =3E =3E =3E =3E ---
=3E =3E =3E =3E =3E =3E To unsubscribe=2C e-mail=3A java-user-
=3E unsubscribe=40lucene=2Eapache=2Eorg=3E =3E =3E =3E =3E For additiona=
l commands=2C e-
=3E mail=3A java-user-
=3E =3E =3E help=40lucene=2Eapache=2Eorg=3E =3E =3E
=3E =3E =3E =3E =3E =3E
=3E =3E =3E =3E =3E
=3E =3E =3E =3E
=3E =3E =3E =3E
=3E =3E =3E =3E --------------------------------------------------------=
------
=3E ----
=3E =3E =3E ---
=3E =3E =3E =3E To unsubscribe=2C e-mail=3A java-user-unsubscribe=40luce=
ne=2Eapache=2Eorg
=3E =3E =3E =3E For additional commands=2C e-mail=3A java-user-
=3E help=40lucene=2Eapache=2Eorg=3E =3E =3E
=3E =3E =3E =3E
=3E =3E =3E
=3E =3E
=3E =3E
=3E =3E ----------------------------------------------------------------=
--
=3E ---
=3E =3E To unsubscribe=2C e-mail=3A java-user-unsubscribe=40lucene=2Eapa=
che=2Eorg
=3E =3E For additional commands=2C e-mail=3A java-user-help=40lucene=2Ea=
pache=2Eorg
=3E =3E
=3E =3E
=3E 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 09 19:37:46 2007
Return-Path: <java-user-return-26058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68590 invoked from network); 9 Feb 2007 19:37:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2007 19:37:45 -0000
Received: (qmail 79829 invoked by uid 500); 9 Feb 2007 19:37:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79809 invoked by uid 500); 9 Feb 2007 19:37:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79798 invoked by uid 99); 9 Feb 2007 19:37:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 11:37:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.14 as permitted sender)
Received: from [80.67.18.14] (HELO smtprelay02.ispgateway.de) (80.67.18.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 11:37:35 -0800
Received: (qmail 25681 invoked from network); 9 Feb 2007 19:37:13 -0000
Received: from unknown (HELO p5496d190.dip.t-dialin.net) ([pbs]695637@[84.150.209.144])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 9 Feb 2007 19:37:13 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Merge factor problem,
Date: Fri, 9 Feb 2007 20:37:17 +0100
User-Agent: KMail/1.8.2
References: <fae460120702090814kfde99fbs24d01cf50cc1abd3@mail.gmail.com>
In-Reply-To: <fae460120702090814kfde99fbs24d01cf50cc1abd3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200702092037.18012@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Friday 09 February 2007 17:14, Sairaj Sunil wrote:

> I have increased the merge factor from 10 to 50.

Please try increasing setMaxBufferedDocs() instead, does that help?

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 10 06:14:07 2007
Return-Path: <java-user-return-26059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26422 invoked from network); 10 Feb 2007 06:14:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Feb 2007 06:14:06 -0000
Received: (qmail 96460 invoked by uid 500); 10 Feb 2007 06:14:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96206 invoked by uid 500); 10 Feb 2007 06:14:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96195 invoked by uid 99); 10 Feb 2007 06:14:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 22:14:07 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Feb 2007 22:13:57 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id B61BF5B766; Fri,  9 Feb 2007 22:13:35 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 9F7DB7F403;
	Fri,  9 Feb 2007 22:13:35 -0800 (PST)
Date: Fri, 9 Feb 2007 22:13:35 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Cc: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: RE: Leaking org.apache.lucene.index.* objects
In-Reply-To: <EB84F4B13FB22344803AC2EA8B7480C08BD11B@BER2WNEXMB01.vcorp.ad.vrsn.com>
Message-ID: <Pine.LNX.4.58.0702092206380.31317@hal.rescomp.berkeley.edu>
References: <EB84F4B13FB22344803AC2EA8B7480C08BD11B@BER2WNEXMB01.vcorp.ad.vrsn.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Its funny, but I'm having a memory leak with Hibernate that I spent the
: whole of yesterday banging my head against a wall about and so when
: searching for emails with Leak in the title came across your message.
: I'm probably going to hit the same problem as you for long running
: multi-threaded lucene index updates so am very interested in this.  I

: Just noticed this is from December, so may well be a bit late for
: helping out?

FYI: After his original post to java-user Otis then replied on java-dev
where a lively discussion ensued, resulting in a FieldCache bug being
discovered and fixed...

http://www.nabble.com/ThreadLocal-leak-%28was-Re%3A-Leaking-org.apache.lucene.index.*-objects%29-tf2831090.html#a7953064




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 10 14:22:24 2007
Return-Path: <java-user-return-26060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51939 invoked from network); 10 Feb 2007 14:22:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Feb 2007 14:22:23 -0000
Received: (qmail 66444 invoked by uid 500); 10 Feb 2007 14:22:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65478 invoked by uid 500); 10 Feb 2007 14:22:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65462 invoked by uid 99); 10 Feb 2007 14:22:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Feb 2007 06:22:21 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.61] (HELO web50307.mail.yahoo.com) (206.190.38.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 10 Feb 2007 06:22:09 -0800
Received: (qmail 69340 invoked by uid 60001); 10 Feb 2007 14:21:48 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=YvgY7ka8aERR+sYhL23hyowtiRqV4ccMWg18Z31b79+Qrr9YzgYrLnuC8p1Qj/it/wJvpO/gHEDB6g4gJa5xiTJxD0I2q9BRMVYIYDKunvCUb0E0vD+KNVCUuSg2+af439x6cWT8WdTp8zJ9Xo07Urnzkk9eY74jXVSG/Yj8OsY=;
X-YMail-OSG: eNWPu34VM1kIYnS..a8SdlinDntScOukH34qs0cfS.33qCiiHHu3j9qOtA.XIezs1VHCc.v6QF_TxJaIgT_4y_NWQm7SOLmFoyzc0PJ4m3e.7TrJBjMiJgzMW_b4mu8piHfUjkeVwMXLXv3YlJh.._xsfWFloY15.GJiam4bFSEiCiGgXN2NHCYpHMuW
Received: from [58.63.154.47] by web50307.mail.yahoo.com via HTTP; Sat, 10 Feb 2007 06:21:47 PST
X-Mailer: YahooMailRC/368.7 YahooMailWebService/0.6.132.7
Date: Sat, 10 Feb 2007 06:21:47 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Merge factor problem,
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <956243.73583.qm@web50307.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Sairaj, see http://www.onjava.com/pub/a/onjava/2003/03/05/lucene.html=0A=0A=
Increase your maxBufferedDocs.=0A=0AOtis=0A=0A----- Original Message ----=
=0AFrom: Sairaj Sunil <sairaj.sunil@gmail.com>=0ATo: java-user@lucene.apach=
e.org=0ASent: Friday, February 9, 2007 11:14:50 AM=0ASubject: Merge factor =
problem,=0A=0AHi all,=0AI have increased the merge factor from 10 to 50. I =
thought the indexing=0Aperformance will be better. But the time taken taken=
 to index is more than=0Athe time taken for the merge factor of 10. The doc=
umentation and some=0Aarticles say that the time taken to index will improv=
e if the merge factor=0Ais increased.=0AI have changed the merge factors to=
 50, 100, 1000. I have left the=0AminMergeDocs to be the default value for =
all the cases. The time taken to=0Aindex same number of documents increased=
 in a linear fashion, which is=0Aexactly opposite according to the info I h=
ave read.=0AIs this the correct behavior. In which cases this behavior happ=
ens?=0A=0ARegards=0A-- =0ASairaj Sunil=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 10 14:25:51 2007
Return-Path: <java-user-return-26061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52173 invoked from network); 10 Feb 2007 14:25:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Feb 2007 14:25:50 -0000
Received: (qmail 68618 invoked by uid 500); 10 Feb 2007 14:25:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67973 invoked by uid 500); 10 Feb 2007 14:25:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67961 invoked by uid 99); 10 Feb 2007 14:25:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Feb 2007 06:25:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.56] (HELO web50302.mail.yahoo.com) (206.190.38.56)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 10 Feb 2007 06:25:40 -0800
Received: (qmail 29691 invoked by uid 60001); 10 Feb 2007 14:25:18 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=Zhrm+IXZEJbymH6b68EUYRPlqBsMkbQHXs1wHmKNGH1Pv6K0LXpF4xS2feRxui7HY5psXGpSALkAxFWrHhApmUOL2RRejn9V0yrzhm5R8k69VepWAtp7gYw0rn/rkofFAbtGpfrtwGA5WS5qpaQBLxdxMZCfYj7MLJghSPrLY6E=;
X-YMail-OSG: Jg7mVXwVM1m4H9s1rYwcUygdxN6bpod8T532sO96PNumNeednuFoCPA_bGVSIkOzQeFDdwoNx7QrEd7ckseemGdOhZMEjOhtz7whpPWmaFnyLWCdCybWw4F.1BtS9PvMBlR.KAfIqt6uS1Xp.qIrvhOT1Aaw13YJM6CsCfZPWIt5lu.2oFUixl34YeTw
Received: from [58.63.154.47] by web50302.mail.yahoo.com via HTTP; Sat, 10 Feb 2007 06:25:17 PST
X-Mailer: YahooMailRC/368.7 YahooMailWebService/0.6.132.7
Date: Sat, 10 Feb 2007 06:25:16 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Replication of RAMDirectory across multiple WebSphere servers
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <168619.26505.qm@web50302.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Not sure about the WebSpehere Object Cache, but Terracota has something lik=
e what you are describing:=0A=0Ahttp://www.google.com/search?q=3Dterracota%=
20lucene=0A=0AOtis=0A=0A----- Original Message ----=0AFrom: Philip Brown <p=
mb@us.ibm.com>=0ATo: java-user@lucene.apache.org=0ASent: Friday, February 9=
, 2007 10:12:38 AM=0ASubject: Replication of RAMDirectory across multiple W=
ebSphere servers=0A=0A=0ADoes anybody have any experience with setting up a=
 Lucene RAMDirectory index=0Afor replication across multiple WebSphere serv=
ers and taking advantage of=0AWebSphere's built-in Object Cache?  We are cu=
rrently re-building/refreshing=0Afrom the source the entire RAMDirectory in=
dex on each WebSphere server every=0Afew minutes to keep the data in sync, =
but I would like to utilize the=0Abuilt-in cluster replication features of =
WebSphere somehow if possible.  =0AThis is what I was thinking...  If I set=
 up an Object Cache instance, there=0Awould only be one item in the cache, =
right? -- the entire RAMDirectory=0Aindex.  So, everytime there was an upda=
te, I'd pull the index out of the=0Acache, update the changed documents, an=
d stick the index back into cache. =0AOf course, this is likely to happen e=
very few seconds (at least during peak=0Ausage).  Currently, when we do som=
ething like such...=0A=0AIndexModifier indexModifier =3D new IndexModifier(=
activeIdx, myAnalyzer,=0Afalse);  //don't ovewrite; use existing=0A -- add/=
delete documents here=0AindexModifier.optimize();=0AindexModifier.close();=
=0A=0AAnd the activeIdx object is a static private class variable.  So, I'm=
=0Athinking the only real difference would be to just get the activieIdx ob=
ject=0Aout of the cache instead of making it a class variable. ???=0A=0ALoo=
king for some guidance.=0A=0AThanks,=0A=0APhilip=0A-- =0AView this message =
in context: http://www.nabble.com/Replication-of-RAMDirectory-across-multip=
le-WebSphere-servers-tf3200859.html#a8887274=0ASent from the Lucene - Java =
Users mailing list archive at Nabble.com.=0A=0A=0A-------------------------=
--------------------------------------------=0ATo unsubscribe, e-mail: java=
-user-unsubscribe@lucene.apache.org=0AFor additional commands, e-mail: java=
-user-help@lucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 10 15:26:34 2007
Return-Path: <java-user-return-26062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60395 invoked from network); 10 Feb 2007 15:26:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Feb 2007 15:26:33 -0000
Received: (qmail 8948 invoked by uid 500); 10 Feb 2007 15:26:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8921 invoked by uid 500); 10 Feb 2007 15:26:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8909 invoked by uid 99); 10 Feb 2007 15:26:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Feb 2007 07:26:33 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of sairaj.sunil@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Feb 2007 07:26:23 -0800
Received: by nf-out-0910.google.com with SMTP id i2so1342856nfe
        for <java-user@lucene.apache.org>; Sat, 10 Feb 2007 07:26:02 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Rs0JUK6nsFP6FyifCZUoJLMt7WAhS9eEt5qKxbxOrpo2kCuiN/zaSNIQ3rCGe7rNtvKqZLY1NFG9yiLxyFjgdQMa7aRWbNOQ1JFNg+ZQUX37NvtNpVgX7QjMaPO02osobZDdbVmdljMWDQ8t9BqAb6byGfWanIRGhB+kvnDU0CA=
Received: by 10.82.111.8 with SMTP id j8mr7614407buc.1171121161855;
        Sat, 10 Feb 2007 07:26:01 -0800 (PST)
Received: by 10.82.157.16 with HTTP; Sat, 10 Feb 2007 07:26:01 -0800 (PST)
Message-ID: <fae460120702100726w6b569657vf44455f6c826d249@mail.gmail.com>
Date: Sat, 10 Feb 2007 20:56:01 +0530
From: "Sairaj Sunil" <sairaj.sunil@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Merge factor problem,
In-Reply-To: <956243.73583.qm@web50307.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_40208_14588335.1171121161821"
References: <956243.73583.qm@web50307.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_40208_14588335.1171121161821
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi,
I saw that article and it tells me that increasing the mergeFactor speeds u=
p
the indexing. But the reverse had happened in my case.
To be more specific I had conducted some experiments for 1000 documents. Th=
e
time taken is quite large, due to pdf file indexing. I had changed the
indexwriter's parameters.

MergeFactor =96 default(10)
minMergeDocs =96 default(10)
Time taken =96 690 sec

MergeFactor =96 50
minMergeDocs =96 default(10)
Time taken =96 765 sec
MergeFactor =96 default(10)
minMergeDocs =96 100
Time taken =96 670 sec

MergeFactor =96100
minMergeDocs =96 100
Time taken =96 738 sec
Increasing the mergeFactor did not speed up, but increasing the minMergeDoc=
s
had improved. I am using Lucene.Net.
Can you explain the behavior. I am confused

On 2/10/07, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>
> Sairaj, see http://www.onjava.com/pub/a/onjava/2003/03/05/lucene.html
>
> Increase your maxBufferedDocs.
>
> Otis
>
> ----- Original Message ----
> From: Sairaj Sunil <sairaj.sunil@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Friday, February 9, 2007 11:14:50 AM
> Subject: Merge factor problem,
>
> Hi all,
> I have increased the merge factor from 10 to 50. I thought the indexing
> performance will be better. But the time taken taken to index is more tha=
n
> the time taken for the merge factor of 10. The documentation and some
> articles say that the time taken to index will improve if the merge facto=
r
> is increased.
> I have changed the merge factors to 50, 100, 1000. I have left the
> minMergeDocs to be the default value for all the cases. The time taken to
> index same number of documents increased in a linear fashion, which is
> exactly opposite according to the info I have read.
> Is this the correct behavior. In which cases this behavior happens?
>
> Regards
> --
> Sairaj Sunil
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Sairaj Sunil
II Mtech(CS)
SSSIHL
Prashanthi Nilayam

------=_Part_40208_14588335.1171121161821--

From java-user-return-26063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 10 15:50:00 2007
Return-Path: <java-user-return-26063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63075 invoked from network); 10 Feb 2007 15:49:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Feb 2007 15:49:59 -0000
Received: (qmail 26842 invoked by uid 500); 10 Feb 2007 15:50:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26804 invoked by uid 500); 10 Feb 2007 15:50:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26793 invoked by uid 99); 10 Feb 2007 15:50:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Feb 2007 07:50:01 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.39.214] (HELO web50312.mail.yahoo.com) (206.190.39.214)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 10 Feb 2007 07:49:48 -0800
Received: (qmail 98401 invoked by uid 60001); 10 Feb 2007 15:49:27 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=1tQhAK/1hyJoCzB5BnjPOEp2+JgKKK89XaqEuEOza6sSrYxeGpswhoX7u9o2gbRxjAuMZs7cesnJOYX2FdIjhDWghYVJeZINsstM82Q9d3gIhe8OhQEij2NBtk2aNWDImyn9RexbXrM2JcElufIIVLurRUDN+n1EAd8w2HdXx4A=;
X-YMail-OSG: vJ6XpBMVM1kxji3rS3xYRG4.mCIaPuLc_WM7qAthtC1ceGMbAJJz5YBbeWGHEl0wflE2JOFegyoZC0RgpfGbTZpcclqZC66zfxhx9VZAEthJERBNl7yKAKlZmFmYDykiMyGwPMLFwbnIqU0-
Received: from [58.63.154.47] by web50312.mail.yahoo.com via HTTP; Sat, 10 Feb 2007 07:49:27 PST
X-Mailer: YahooMailRC/368.7 YahooMailWebService/0.6.132.7
Date: Sat, 10 Feb 2007 07:49:27 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Merge factor problem,
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <520710.98125.qm@web50312.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Maybe it's Lucene.Net-specific - you are on java-user mailing list.=0A=0AOt=
is=0A=0A----- Original Message ----=0AFrom: Sairaj Sunil <sairaj.sunil@gmai=
l.com>=0ATo: java-user@lucene.apache.org=0ASent: Saturday, February 10, 200=
7 10:26:01 AM=0ASubject: Re: Merge factor problem,=0A=0AHi,=0AI saw that ar=
ticle and it tells me that increasing the mergeFactor speeds up=0Athe index=
ing. But the reverse had happened in my case.=0ATo be more specific I had c=
onducted some experiments for 1000 documents. The=0Atime taken is quite lar=
ge, due to pdf file indexing. I had changed the=0Aindexwriter's parameters.=
=0A=0AMergeFactor =96 default(10)=0AminMergeDocs =96 default(10)=0ATime tak=
en =96 690 sec=0A=0AMergeFactor =96 50=0AminMergeDocs =96 default(10)=0ATim=
e taken =96 765 sec=0AMergeFactor =96 default(10)=0AminMergeDocs =96 100=0A=
Time taken =96 670 sec=0A=0AMergeFactor =96100=0AminMergeDocs =96 100=0ATim=
e taken =96 738 sec=0AIncreasing the mergeFactor did not speed up, but incr=
easing the minMergeDocs=0Ahad improved. I am using Lucene.Net.=0ACan you ex=
plain the behavior. I am confused=0A=0AOn 2/10/07, Otis Gospodnetic <otis_g=
ospodnetic@yahoo.com> wrote:=0A>=0A> Sairaj, see http://www.onjava.com/pub/=
a/onjava/2003/03/05/lucene.html=0A>=0A> Increase your maxBufferedDocs.=0A>=
=0A> Otis=0A>=0A> ----- Original Message ----=0A> From: Sairaj Sunil <saira=
j.sunil@gmail.com>=0A> To: java-user@lucene.apache.org=0A> Sent: Friday, Fe=
bruary 9, 2007 11:14:50 AM=0A> Subject: Merge factor problem,=0A>=0A> Hi al=
l,=0A> I have increased the merge factor from 10 to 50. I thought the index=
ing=0A> performance will be better. But the time taken taken to index is mo=
re than=0A> the time taken for the merge factor of 10. The documentation an=
d some=0A> articles say that the time taken to index will improve if the me=
rge factor=0A> is increased.=0A> I have changed the merge factors to 50, 10=
0, 1000. I have left the=0A> minMergeDocs to be the default value for all t=
he cases. The time taken to=0A> index same number of documents increased in=
 a linear fashion, which is=0A> exactly opposite according to the info I ha=
ve read.=0A> Is this the correct behavior. In which cases this behavior hap=
pens?=0A>=0A> Regards=0A> --=0A> Sairaj Sunil=0A>=0A>=0A>=0A>=0A> ---------=
------------------------------------------------------------=0A> To unsubsc=
ribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> For additional co=
mmands, e-mail: java-user-help@lucene.apache.org=0A>=0A>=0A=0A=0A-- =0ASair=
aj Sunil=0AII Mtech(CS)=0ASSSIHL=0APrashanthi Nilayam=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 10 15:51:48 2007
Return-Path: <java-user-return-26064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63382 invoked from network); 10 Feb 2007 15:51:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Feb 2007 15:51:47 -0000
Received: (qmail 29012 invoked by uid 500); 10 Feb 2007 15:51:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28969 invoked by uid 500); 10 Feb 2007 15:51:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28936 invoked by uid 99); 10 Feb 2007 15:51:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Feb 2007 07:51:48 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of sairaj.sunil@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Feb 2007 07:51:38 -0800
Received: by nf-out-0910.google.com with SMTP id i2so1346831nfe
        for <java-user@lucene.apache.org>; Sat, 10 Feb 2007 07:51:17 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Tw+XsDtDBVk+3zTUn5DGIP6RPaNdyGM2QsS0fFHspz+RyBA20hxeSIYN8UhR8P79YRPgmBpwlFq0CoFtOHI5JBObAU+XdGDyr6g4SmNGBamzUx1ID3AC32WKRPpARsysJEfDnf1B9oA8CST+B73+dX/gxt563NmDlcQiPVEeJnM=
Received: by 10.82.167.5 with SMTP id p5mr6553118bue.1171122676659;
        Sat, 10 Feb 2007 07:51:16 -0800 (PST)
Received: by 10.82.157.16 with HTTP; Sat, 10 Feb 2007 07:51:16 -0800 (PST)
Message-ID: <fae460120702100751w3f1c08f2p1e73823ec65bd74f@mail.gmail.com>
Date: Sat, 10 Feb 2007 21:21:16 +0530
From: "Sairaj Sunil" <sairaj.sunil@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Merge factor problem,
In-Reply-To: <fae460120702100726w6b569657vf44455f6c826d249@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_40560_8233241.1171122676631"
References: <956243.73583.qm@web50307.mail.yahoo.com>
	 <fae460120702100726w6b569657vf44455f6c826d249@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_40560_8233241.1171122676631
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
just to give more info, I am using Lucene.Net 1.3 version, and not
1.9version. I think there is no option of setmaxBufferedDocs() in the
old
version. Can you tell me the best way to speed up the performance. What are
the parameters that I should set. I know that this depends on the system,
but which parameter exactly speeds up the indexing performance.

Thank you
-- 
Sairaj Sunil
II Mtech(CS)
SSSIHL
Prashanthi Nilayam

------=_Part_40560_8233241.1171122676631--

From java-user-return-26065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 10 17:30:22 2007
Return-Path: <java-user-return-26065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85893 invoked from network); 10 Feb 2007 17:30:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Feb 2007 17:30:22 -0000
Received: (qmail 21635 invoked by uid 500); 10 Feb 2007 17:30:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21610 invoked by uid 500); 10 Feb 2007 17:30:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21597 invoked by uid 99); 10 Feb 2007 17:30:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Feb 2007 09:30:22 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.229 as permitted sender)
Received: from [66.249.82.229] (HELO wx-out-0506.google.com) (66.249.82.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Feb 2007 09:30:11 -0800
Received: by wx-out-0506.google.com with SMTP id i29so1115746wxd
        for <java-user@lucene.apache.org>; Sat, 10 Feb 2007 09:29:50 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=krTOFM1YDbfVjDPr7CmmBMIdh7Zpwu2Owoal2oPhDrbFKIe86cGmAHtGB8tpGgbHfyessFbeJIfCTuU5US/ILgP/tBLEeVYeUP0ELuS+HUFkbM+GB9VynTX7RiIHvAXMg5/Ele1J9oRVzD1ZzqfXTd18jQuaKO9dSau4wTTp+VE=
Received: by 10.90.56.14 with SMTP id e14mr1570946aga.1171128590772;
        Sat, 10 Feb 2007 09:29:50 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 8sm6493166wra.2007.02.10.09.29.49;
        Sat, 10 Feb 2007 09:29:50 -0800 (PST)
Message-ID: <45CE010A.3060508@gmail.com>
Date: Sat, 10 Feb 2007 12:29:46 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Merge factor problem,
References: <956243.73583.qm@web50307.mail.yahoo.com>	 <fae460120702100726w6b569657vf44455f6c826d249@mail.gmail.com> <fae460120702100751w3f1c08f2p1e73823ec65bd74f@mail.gmail.com>
In-Reply-To: <fae460120702100751w3f1c08f2p1e73823ec65bd74f@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

 From my experience: if you are going to optimize your index after 
loading (a good idea for making search as fast as possible) than it does 
not matter what you set the merge factor to during the load. If you have 
a healthy max buffered docs set, the merge factor will not affect the 
speed at all - 10, 50, 90, 120, it does not matter. Whether that is 
because a high max buffered causes all of the merges to occur in RAM or 
the optimize causes you to pay the dues you got from the altered merge 
factor, I do not know. I do know that max merged docs is generally the 
biggy for batch loading. Watch out though, setting max merged docs too 
high will cause you to miss the speed sweetspot.

- Mark

Sairaj Sunil wrote:
> Hi,
> just to give more info, I am using Lucene.Net 1.3 version, and not
> 1.9version. I think there is no option of setmaxBufferedDocs() in the
> old
> version. Can you tell me the best way to speed up the performance. 
> What are
> the parameters that I should set. I know that this depends on the system,
> but which parameter exactly speeds up the indexing performance.
>
> Thank you

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 11 15:44:50 2007
Return-Path: <java-user-return-26066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47989 invoked from network); 11 Feb 2007 15:44:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2007 15:44:50 -0000
Received: (qmail 75915 invoked by uid 500); 11 Feb 2007 15:44:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75888 invoked by uid 500); 11 Feb 2007 15:44:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75877 invoked by uid 99); 11 Feb 2007 15:44:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Feb 2007 07:44:49 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.73.178.153] (HELO web60425.mail.yahoo.com) (209.73.178.153)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 11 Feb 2007 07:44:38 -0800
Received: (qmail 87545 invoked by uid 60001); 11 Feb 2007 15:44:17 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=ea4CRg1snemOOV/0X2dethbhGyJVvn1Jfa/llIL9IEe1H+H5gv64snt85V4VKo/ltc+V0dVWYrxVFK7jblahV/y6NU4YgNo3TpWGOQiniZTXj9VInrqfwdk8FOnRrABJQu0NJTUwpYCt+gKvSmJekhJGu1ToBzYvjf868fZOyFk=;
X-YMail-OSG: 9_i1gvIVM1lDzEIEVUlMKAOc63eL5GNa9gGkkkRC7S7XYBTWrC_veOP7yksbL4OQvA--
Received: from [155.69.168.244] by web60425.mail.yahoo.com via HTTP; Sun, 11 Feb 2007 07:44:16 PST
Date: Sun, 11 Feb 2007 07:44:16 -0800 (PST)
From: maureen tanuwidjaja <autumn_musique@yahoo.com>
Subject: about merge factor
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-134670368-1171208656=:87497"
Content-Transfer-Encoding: 8bit
Message-ID: <995494.87497.qm@web60425.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-134670368-1171208656=:87497
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi all,
  
  I just wondering wheter is it sensible and possible if I have 660,000  documents to be indexed,I set the merge factor to 660,000 instead of  the default value 10 (...and this means no merge while indexing) and  later after closing the index,I use the IndexWriter to optimize/merge  the whole index file...
  
  
  Thanks and Regards,
  Maureen
  
 
---------------------------------
We won't tell. Get more on shows you hate to love
(and love to hate): Yahoo! TV's Guilty Pleasures list.
--0-134670368-1171208656=:87497--

From java-user-return-26067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 11 16:42:11 2007
Return-Path: <java-user-return-26067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56053 invoked from network); 11 Feb 2007 16:42:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2007 16:42:10 -0000
Received: (qmail 9663 invoked by uid 500); 11 Feb 2007 16:42:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9359 invoked by uid 500); 11 Feb 2007 16:42:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9339 invoked by uid 99); 11 Feb 2007 16:42:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Feb 2007 08:42:10 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=MSGID_MULTIPLE_AT
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.125.145.37] (HELO mercury.propylon.com) (194.125.145.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Feb 2007 08:41:59 -0800
Received: from propylon-sdsl.sdsl.esat.net ([193.120.101.26] helo=damienmc)
	by mercury.propylon.com with esmtp (Exim 4.50)
	id 1HGHk3-0006qB-8S
	for java-user@lucene.apache.org; Sun, 11 Feb 2007 16:39:59 +0000
From: "Damien McCarthy" <damien.mccarthy@propylon.com>
To: <java-user@lucene.apache.org>
References: <995494.87497.qm@web60425.mail.yahoo.com> 
In-Reply-To: 
Date: Sun, 11 Feb 2007 16:41:33 -0000
Message-ID: <001101c74dfb$7d8b26f0$78a174d0$@mccarthy@propylon.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcdN81YVQB7uEuP+Qq+HNxwi735LUgABt2BAAABMbkA=
Content-Language: en-gb
x-cr-hashedpuzzle: AQpj Bc8I Blhw CDPi CgI4 EB/l Ebp4 Eo/C E0NF E6uI FAMX FJ7g HeLB HsG8 H/lF LBne;1;agBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{00049B27-C553-404D-83A1-C143C40847EB};ZABhAG0AaQBlAG4ALgBtAGMAYwBhAHIAdABoAHkAQABwAHIAbwBwAHkAbABvAG4ALgBjAG8AbQA=;Sun, 11 Feb 2007 16:41:27 GMT;UgBFADoAIABhAGIAbwB1AHQAIABtAGUAcgBnAGUAIABmAGEAYwB0AG8AcgA=
x-cr-puzzleid: {00049B27-C553-404D-83A1-C143C40847EB}
X-SA-Exim-Connect-IP: 193.120.101.26
X-SA-Exim-Mail-From: damien.mccarthy@propylon.com
Subject: RE: about merge factor
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on 
	mercury.propylon.com
X-Spam-Level: 
X-SA-Exim-Version: 4.2 (built Thu, 03 Mar 2005 10:44:12 +0100)
X-SA-Exim-Scanned: Yes (on mercury.propylon.com)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.1 required=5.0 tests=AWL autolearn=failed 
	version=3.0.3

Hi Maureen,

If you are attempting to tune the indexing have a read of
http://www.onjava.com/pub/a/onjava/2003/03/05/lucene.html?page=2 . Otis has
some excellent comparisons and explanations of the different optimization
strategies available.  

D.

-----Original Message-----
From: maureen tanuwidjaja [mailto:autumn_musique@yahoo.com] 
Sent: 11 February 2007 15:44
To: java-user@lucene.apache.org
Subject: about merge factor

Hi all,
  
  I just wondering wheter is it sensible and possible if I have 660,000
documents to be indexed,I set the merge factor to 660,000 instead of  the
default value 10 (...and this means no merge while indexing) and  later
after closing the index,I use the IndexWriter to optimize/merge  the whole
index file...
  
  
  Thanks and Regards,
  Maureen
  
 
---------------------------------
We won't tell. Get more on shows you hate to love
(and love to hate): Yahoo! TV's Guilty Pleasures list.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 11 17:17:52 2007
Return-Path: <java-user-return-26068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61666 invoked from network); 11 Feb 2007 17:17:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2007 17:17:39 -0000
Received: (qmail 35553 invoked by uid 500); 11 Feb 2007 17:17:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35492 invoked by uid 500); 11 Feb 2007 17:17:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35440 invoked by uid 99); 11 Feb 2007 17:17:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Feb 2007 09:17:31 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.162.236 as permitted sender)
Received: from [64.233.162.236] (HELO nz-out-0506.google.com) (64.233.162.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Feb 2007 09:15:12 -0800
Received: by nz-out-0506.google.com with SMTP id i1so1344480nzh
        for <java-user@lucene.apache.org>; Sun, 11 Feb 2007 09:14:51 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=uj17UdK1BvFZpUz/cc6V8vnM+JXmEgAsAawLNAFLbjOYhfQe/fCC/Zuy/+BU/utux5PkmY5gs4xK596ZM204dEIQ6pJVQEwnTReT8TMQBXBSxg7i7G66kmxiwlluaMjzupPdZgq3WVehTAlLI11G9oVPUWFCENPuk/gJaxPbS54=
Received: by 10.65.236.18 with SMTP id n18mr19334422qbr.1171214090940;
        Sun, 11 Feb 2007 09:14:50 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 7sm12005327wrl.2007.02.11.09.14.49;
        Sun, 11 Feb 2007 09:14:50 -0800 (PST)
Message-ID: <45CF4F07.40701@gmail.com>
Date: Sun, 11 Feb 2007 12:14:47 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: about merge factor
References: <995494.87497.qm@web60425.mail.yahoo.com>
In-Reply-To: <995494.87497.qm@web60425.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Not sensible at all. First, a merge above something like 90 most likely 
never makes since. Second, I have done some testing and my results show 
that if you optimize the index after loading, the merge factor really 
doesn't matter so keep it at 10 (I never used a max merge docs below 50. 
100 worked best, 1,000 and 2,000 slowed things down even though the test 
had access to 600MB RAM and the docs where around 10-20k each). Setting 
up a test harness that automatically indexes a good amount of docs (I 
did 20,000) with a variety of settings will tell you a lot. Things will 
obviously bend based on your setup.

- Mark

maureen tanuwidjaja wrote:
> Hi all,
>   
>   I just wondering wheter is it sensible and possible if I have 660,000  documents to be indexed,I set the merge factor to 660,000 instead of  the default value 10 (...and this means no merge while indexing) and  later after closing the index,I use the IndexWriter to optimize/merge  the whole index file...
>   
>   
>   Thanks and Regards,
>   Maureen
>   
>  
> ---------------------------------
> We won't tell. Get more on shows you hate to love
> (and love to hate): Yahoo! TV's Guilty Pleasures list.
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 11 17:25:22 2007
Return-Path: <java-user-return-26069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63407 invoked from network); 11 Feb 2007 17:25:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2007 17:25:22 -0000
Received: (qmail 45338 invoked by uid 500); 11 Feb 2007 17:25:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45307 invoked by uid 500); 11 Feb 2007 17:25:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45296 invoked by uid 99); 11 Feb 2007 17:25:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Feb 2007 09:25:22 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.162.226 as permitted sender)
Received: from [64.233.162.226] (HELO nz-out-0506.google.com) (64.233.162.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Feb 2007 09:25:11 -0800
Received: by nz-out-0506.google.com with SMTP id i1so1346264nzh
        for <java-user@lucene.apache.org>; Sun, 11 Feb 2007 09:24:51 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=uj17UdK1BvFZpUz/cc6V8vnM+JXmEgAsAawLNAFLbjOYhfQe/fCC/Zuy/+BU/utux5PkmY5gs4xK596ZM204dEIQ6pJVQEwnTReT8TMQBXBSxg7i7G66kmxiwlluaMjzupPdZgq3WVehTAlLI11G9oVPUWFCENPuk/gJaxPbS54=
Received: by 10.65.236.18 with SMTP id n18mr19334422qbr.1171214090940;
        Sun, 11 Feb 2007 09:14:50 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 7sm12005327wrl.2007.02.11.09.14.49;
        Sun, 11 Feb 2007 09:14:50 -0800 (PST)
Message-ID: <45CF4F07.40701@gmail.com>
Date: Sun, 11 Feb 2007 12:14:47 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: about merge factor
References: <995494.87497.qm@web60425.mail.yahoo.com>
In-Reply-To: <995494.87497.qm@web60425.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Not sensible at all. First, a merge above something like 90 most likely 
never makes since. Second, I have done some testing and my results show 
that if you optimize the index after loading, the merge factor really 
doesn't matter so keep it at 10 (I never used a max merge docs below 50. 
100 worked best, 1,000 and 2,000 slowed things down even though the test 
had access to 600MB RAM and the docs where around 10-20k each). Setting 
up a test harness that automatically indexes a good amount of docs (I 
did 20,000) with a variety of settings will tell you a lot. Things will 
obviously bend based on your setup.

- Mark

maureen tanuwidjaja wrote:
> Hi all,
>   
>   I just wondering wheter is it sensible and possible if I have 660,000  documents to be indexed,I set the merge factor to 660,000 instead of  the default value 10 (...and this means no merge while indexing) and  later after closing the index,I use the IndexWriter to optimize/merge  the whole index file...
>   
>   
>   Thanks and Regards,
>   Maureen
>   
>  
> ---------------------------------
> We won't tell. Get more on shows you hate to love
> (and love to hate): Yahoo! TV's Guilty Pleasures list.
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 11 17:59:18 2007
Return-Path: <java-user-return-26070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70889 invoked from network); 11 Feb 2007 17:59:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2007 17:59:17 -0000
Received: (qmail 75162 invoked by uid 500); 11 Feb 2007 17:59:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75135 invoked by uid 500); 11 Feb 2007 17:59:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75124 invoked by uid 99); 11 Feb 2007 17:59:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Feb 2007 09:59:19 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a7.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Feb 2007 09:59:08 -0800
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a7.g.dreamhost.com (Postfix) with ESMTP id D9DB05C039
	for <java-user@lucene.apache.org>; Sun, 11 Feb 2007 09:58:46 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <45CF4F07.40701@gmail.com>
References: <995494.87497.qm@web60425.mail.yahoo.com> <45CF4F07.40701@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <36429AB7-55E7-4ABE-AA2B-55F2D73FD40F@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: about merge factor
Date: Sun, 11 Feb 2007 12:58:44 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

You may find contrib/Benchmark useful in your testing.  Doron Cohen  
has added a nice framework for scripting benchmarking tests.

-Grant

On Feb 11, 2007, at 12:14 PM, Mark Miller wrote:

> Not sensible at all. First, a merge above something like 90 most  
> likely never makes since. Second, I have done some testing and my  
> results show that if you optimize the index after loading, the  
> merge factor really doesn't matter so keep it at 10 (I never used a  
> max merge docs below 50. 100 worked best, 1,000 and 2,000 slowed  
> things down even though the test had access to 600MB RAM and the  
> docs where around 10-20k each). Setting up a test harness that  
> automatically indexes a good amount of docs (I did 20,000) with a  
> variety of settings will tell you a lot. Things will obviously bend  
> based on your setup.
>
> - Mark
>
> maureen tanuwidjaja wrote:
>> Hi all,
>>     I just wondering wheter is it sensible and possible if I have  
>> 660,000  documents to be indexed,I set the merge factor to 660,000  
>> instead of  the default value 10 (...and this means no merge while  
>> indexing) and  later after closing the index,I use the IndexWriter  
>> to optimize/merge  the whole index file...
>>       Thanks and Regards,
>>   Maureen
>>    ---------------------------------
>> We won't tell. Get more on shows you hate to love
>> (and love to hate): Yahoo! TV's Guilty Pleasures list.
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 11 20:14:57 2007
Return-Path: <java-user-return-26071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96801 invoked from network); 11 Feb 2007 20:14:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2007 20:14:56 -0000
Received: (qmail 78602 invoked by uid 500); 11 Feb 2007 20:14:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78567 invoked by uid 500); 11 Feb 2007 20:14:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78556 invoked by uid 99); 11 Feb 2007 20:14:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Feb 2007 12:14:55 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.237 as permitted sender)
Received: from [66.249.82.237] (HELO wx-out-0506.google.com) (66.249.82.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Feb 2007 12:14:43 -0800
Received: by wx-out-0506.google.com with SMTP id i29so1404881wxd
        for <java-user@lucene.apache.org>; Sun, 11 Feb 2007 12:14:22 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=CLsHYCoLyAqJLEZFde2Ul44P4QaecQUaNF2VGMOWXAEX2JW25lBeqY5ZdngoNxr9BxqUBoSdvSKg8jMb9/16WgXitOVk5jwaNR8tuNJRWVW49LsJQjZQXNrOehzRj8IDOHiFeblnpvNoqReBXd3Skz5Y897PMX4r5KNNzx3RykM=
Received: by 10.70.74.6 with SMTP id w6mr15687695wxa.1171224862152;
        Sun, 11 Feb 2007 12:14:22 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 15sm10172994wrl.2007.02.11.12.14.20;
        Sun, 11 Feb 2007 12:14:21 -0800 (PST)
Message-ID: <45CF791A.6030305@gmail.com>
Date: Sun, 11 Feb 2007 15:14:18 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: about merge factor
References: <995494.87497.qm@web60425.mail.yahoo.com> <45CF4F07.40701@gmail.com> <36429AB7-55E7-4ABE-AA2B-55F2D73FD40F@apache.org>
In-Reply-To: <36429AB7-55E7-4ABE-AA2B-55F2D73FD40F@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Found a mistake in my reponse...when I was talking about max merge docs, 
I meant max buffered docs. If your going to optimize anyway, the key 
setting appears to be max buffered docs, and I have yet to see the merge 
factor affect anything (again, only if you optimize). Oddly, performance 
seems to decrease as you up max buffered docs far before you are even 
close to running out of available ram. I do not know why this is, but 
you should certainly test to see what your prime settings are.

Also, the knew benchmarking stuff is awesome.

- Mark

Grant Ingersoll wrote:
> You may find contrib/Benchmark useful in your testing.  Doron Cohen 
> has added a nice framework for scripting benchmarking tests.
>
> -Grant
>
> On Feb 11, 2007, at 12:14 PM, Mark Miller wrote:
>
>> Not sensible at all. First, a merge above something like 90 most 
>> likely never makes since. Second, I have done some testing and my 
>> results show that if you optimize the index after loading, the merge 
>> factor really doesn't matter so keep it at 10 (I never used a max 
>> merge docs below 50. 100 worked best, 1,000 and 2,000 slowed things 
>> down even though the test had access to 600MB RAM and the docs where 
>> around 10-20k each). Setting up a test harness that automatically 
>> indexes a good amount of docs (I did 20,000) with a variety of 
>> settings will tell you a lot. Things will obviously bend based on 
>> your setup.
>>
>> - Mark
>>
>> maureen tanuwidjaja wrote:
>>> Hi all,
>>>     I just wondering wheter is it sensible and possible if I have 
>>> 660,000  documents to be indexed,I set the merge factor to 660,000 
>>> instead of  the default value 10 (...and this means no merge while 
>>> indexing) and  later after closing the index,I use the IndexWriter 
>>> to optimize/merge  the whole index file...
>>>       Thanks and Regards,
>>>   Maureen
>>>    ---------------------------------
>>> We won't tell. Get more on shows you hate to love
>>> (and love to hate): Yahoo! TV's Guilty Pleasures list.
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> --------------------------
> Grant Ingersoll
> Center for Natural Language Processing
> http://www.cnlp.org
>
> Read the Lucene Java FAQ at 
> http://wiki.apache.org/jakarta-lucene/LuceneFAQ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 12 07:53:38 2007
Return-Path: <java-user-return-26072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62052 invoked from network); 12 Feb 2007 07:53:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2007 07:53:37 -0000
Received: (qmail 64962 invoked by uid 500); 12 Feb 2007 07:53:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64927 invoked by uid 500); 12 Feb 2007 07:53:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64911 invoked by uid 99); 12 Feb 2007 07:53:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Feb 2007 23:53:37 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mekin.m@gmail.com designates 66.249.82.237 as permitted sender)
Received: from [66.249.82.237] (HELO wx-out-0506.google.com) (66.249.82.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Feb 2007 23:53:27 -0800
Received: by wx-out-0506.google.com with SMTP id i29so1537367wxd
        for <java-user@lucene.apache.org>; Sun, 11 Feb 2007 23:53:07 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=ErRELdD9deFuQIPndLwa1y6xoH/zA4wZ7K6Jo0Thh2zyGXQOUu8lhBDK+lL7/lAA+Vf1HnyHzM+ScnnqIyeVxSmyE0LjLU1lS4jBTPlZALUodlQ0gNLCXSK2oL4FwJMLCUEM6GipvglyfK5FL/3IEKXmwwh2Mschdh+jMpxo468=
Received: by 10.90.34.3 with SMTP id h3mr16713451agh.1171266787001;
        Sun, 11 Feb 2007 23:53:07 -0800 (PST)
Received: by 10.90.95.5 with HTTP; Sun, 11 Feb 2007 23:53:06 -0800 (PST)
Message-ID: <865c77680702112353i170283dk29c87c68ba158ca4@mail.gmail.com>
Date: Mon, 12 Feb 2007 13:23:06 +0530
From: "Mekin Maheshwari" <mekin.m@gmail.com>
To: java-user@lucene.apache.org
Subject: using DisjunctionMaxQuery
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18688_23449713.1171266786972"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_18688_23449713.1171266786972
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I am trying to use org.apache.lucene.search.DisjunctionMaxQuery

First, a quick check on how to use it.
I tried looking for javadocs, and the mailing list archive, but could not
find much.
Here is what I am doing :

//finalquery is a boolean query, that has a lot of field specific
sub-queries, each with a different boost, added to it

                        DisjunctionMaxQuery disMaxQuery = new
DisjunctionMaxQuery(0.1f);
                        disMaxQuery.add(finalQuery);
......
                        hits = searcher.search(disMaxQuery);


The only difference in the query.toString that I see when I print the
finalQuery & disMaxQuery is 2 additional sets of enclosing parentheses
followed by "~0.1"

When I search, I still see the same term being matched in multiple fields in
the explain output.

I tried setting the tieBreakerMultiplier to 0 and that does not change this
behaviour
I am guessing I am not using DisMaxQuery correctly
Should I be adding the individual Boolean sub-queries to the disMaxQuery ?

Thanks,
mekin.

------=_Part_18688_23449713.1171266786972--

From java-user-return-26073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 12 16:26:20 2007
Return-Path: <java-user-return-26073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24237 invoked from network); 12 Feb 2007 16:26:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2007 16:26:19 -0000
Received: (qmail 77182 invoked by uid 500); 12 Feb 2007 16:26:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77128 invoked by uid 500); 12 Feb 2007 16:26:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77116 invoked by uid 99); 12 Feb 2007 16:26:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 08:26:18 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_FONT_BIG,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 217.79.216.190 as permitted sender)
Received: from [217.79.216.190] (HELO cluster-e.mailcontrol.com) (217.79.216.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 08:26:04 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly55e.srv.mailcontrol.com (MailControl) with SMTP id l1CGPUd9017921
	for <java-user@lucene.apache.org>; Mon, 12 Feb 2007 16:25:35 GMT
Received: From SGBD012103.wsatkins.com ([10.202.26.17]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 1171297508274; Mon, 12 Feb 2007 16:25:08 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012103.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 12 Feb 2007 16:25:08 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C74EC2.5BEF772E"
Subject: Solr issue
Date: Mon, 12 Feb 2007 16:25:07 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705C57455@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Solr issue
Thread-Index: AcdOwluU8j72PKBvTH6CLDzbVDDRkQ==
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 12 Feb 2007 16:25:08.0031 (UTC) FILETIME=[5C2B44F0:01C74EC2]
X-Scanned-By: MailControl A-07-06-90 (www.mailcontrol.com) on 10.69.0.165
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C74EC2.5BEF772E
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hello all,

When running the example in the solr release has anyone come up with the
following issue when going to http://localhost:8983/solr/admin/:

HTTP ERROR: 500
Unable to compile class for JSP

Generated servlet error:
12-Feb-2007 16:24:17 org.apache.jasper.compiler.Compiler generateClass
SEVERE: Javac exception=20
Unable to find a javac compiler;
com.sun.tools.javac.Main is not on the classpath.
Perhaps JAVA_HOME does not point to the JDK
	at
org.apache.tools.ant.taskdefs.compilers.CompilerAdapterFactory.getCompil
er(CompilerAdapterFactory.java:105)
	at org.apache.tools.ant.taskdefs.Javac.compile(Javac.java:929)
	at org.apache.tools.ant.taskdefs.Javac.execute(Javac.java:758)
	at
org.apache.jasper.compiler.Compiler.generateClass(Compiler.java:382)
	at
org.apache.jasper.compiler.Compiler.compile(Compiler.java:472)
...


Sachin


This email and any attached files are confidential and copyright protected.=
 If you are not the addressee, any dissemination of this communication is s=
trictly prohibited. Unless otherwise expressly agreed in writing, nothing s=
tated in this communication shall be legally binding.

The ultimate parent company of the Atkins Group is WS Atkins plc.  Register=
ed in England No. 1885586.  Registered Office Woodcote Grove, Ashley Road, =
Epsom, Surrey KT18 5BW.

Consider the environment. Please don't print this e-mail unless you really =
need to.=20

------_=_NextPart_001_01C74EC2.5BEF772E--

From java-user-return-26074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 12 17:23:58 2007
Return-Path: <java-user-return-26074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43084 invoked from network); 12 Feb 2007 17:23:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2007 17:23:58 -0000
Received: (qmail 73969 invoked by uid 500); 12 Feb 2007 17:23:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73928 invoked by uid 500); 12 Feb 2007 17:23:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73917 invoked by uid 99); 12 Feb 2007 17:23:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 09:23:57 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a11.g.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 09:23:46 -0800
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a11.g.dreamhost.com (Postfix) with ESMTP id 63530B824E
	for <java-user@lucene.apache.org>; Mon, 12 Feb 2007 09:23:26 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705C57455@SGBLOW2101.wsatkins.com>
References: <BC1CFC544422CB4A934908E126A4742705C57455@SGBLOW2101.wsatkins.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <01B1FC48-D5DA-4FDC-93EA-1C7595F831A0@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Solr issue
Date: Mon, 12 Feb 2007 12:23:22 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

You should ask on the Solr list.

On Feb 12, 2007, at 11:25 AM, Kainth, Sachin wrote:

> Hello all,
>
> When running the example in the solr release has anyone come up  
> with the
> following issue when going to http://localhost:8983/solr/admin/:
>
> HTTP ERROR: 500
> Unable to compile class for JSP
>
> Generated servlet error:
> 12-Feb-2007 16:24:17 org.apache.jasper.compiler.Compiler generateClass
> SEVERE: Javac exception
> Unable to find a javac compiler;
> com.sun.tools.javac.Main is not on the classpath.
> Perhaps JAVA_HOME does not point to the JDK
> 	at
> org.apache.tools.ant.taskdefs.compilers.CompilerAdapterFactory.getComp 
> il
> er(CompilerAdapterFactory.java:105)
> 	at org.apache.tools.ant.taskdefs.Javac.compile(Javac.java:929)
> 	at org.apache.tools.ant.taskdefs.Javac.execute(Javac.java:758)
> 	at
> org.apache.jasper.compiler.Compiler.generateClass(Compiler.java:382)
> 	at
> org.apache.jasper.compiler.Compiler.compile(Compiler.java:472)
> ...
>
>
> Sachin
>
>
> This email and any attached files are confidential and copyright  
> protected. If you are not the addressee, any dissemination of this  
> communication is strictly prohibited. Unless otherwise expressly  
> agreed in writing, nothing stated in this communication shall be  
> legally binding.
>
> The ultimate parent company of the Atkins Group is WS Atkins plc.   
> Registered in England No. 1885586.  Registered Office Woodcote  
> Grove, Ashley Road, Epsom, Surrey KT18 5BW.
>
> Consider the environment. Please don't print this e-mail unless you  
> really need to.

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 12 17:28:53 2007
Return-Path: <java-user-return-26075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44641 invoked from network); 12 Feb 2007 17:28:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2007 17:28:52 -0000
Received: (qmail 81804 invoked by uid 500); 12 Feb 2007 17:28:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81772 invoked by uid 500); 12 Feb 2007 17:28:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81761 invoked by uid 99); 12 Feb 2007 17:28:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 09:28:52 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of hanganum@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 09:28:42 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1531873ugc
        for <java-user@lucene.apache.org>; Mon, 12 Feb 2007 09:28:20 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=MwUEXwYl6YpfABS12UrrH3WkFCVx+vlgaNjFGHMsUo6DX05/KaYmd0gXrRnCLUSetPmUBApU6w6c2my/InAbDpLJ0D34Bo/njkPKRU5EL0CaIbotigPvSfEfs5YpQu6x2DoNCgJ9z2JMjAFnn1Ek5Vlv6MYSpI9FXurpWXphVDA=
Received: by 10.114.185.8 with SMTP id i8mr7132012waf.1171301298254;
        Mon, 12 Feb 2007 09:28:18 -0800 (PST)
Received: by 10.114.74.9 with HTTP; Mon, 12 Feb 2007 09:28:17 -0800 (PST)
Message-ID: <33b3a0280702120928u17fdfccfrf7c47d47d531cf5f@mail.gmail.com>
Date: Mon, 12 Feb 2007 19:28:17 +0200
From: "Marius Hanganu" <hanganum@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Solr issue
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705C57455@SGBLOW2101.wsatkins.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_59333_17515167.1171301297981"
References: <BC1CFC544422CB4A934908E126A4742705C57455@SGBLOW2101.wsatkins.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_59333_17515167.1171301297981
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

SOLR seem to have a problem if you don't specify the full path to
java.exewhen starting Jetty.

Here's my script for starting SOLR:

d:\programs\jdk15\bin\java -jar start.jar

Regards,
Marius Hanganu

On 2/12/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
>
> Hello all,
>
> When running the example in the solr release has anyone come up with the
> following issue when going to http://localhost:8983/solr/admin/:
>
> HTTP ERROR: 500
> Unable to compile class for JSP
>
> Generated servlet error:
> 12-Feb-2007 16:24:17 org.apache.jasper.compiler.Compiler generateClass
> SEVERE: Javac exception
> Unable to find a javac compiler;
> com.sun.tools.javac.Main is not on the classpath.
> Perhaps JAVA_HOME does not point to the JDK
>         at
> org.apache.tools.ant.taskdefs.compilers.CompilerAdapterFactory.getCompil
> er(CompilerAdapterFactory.java:105)
>         at org.apache.tools.ant.taskdefs.Javac.compile(Javac.java:929)
>         at org.apache.tools.ant.taskdefs.Javac.execute(Javac.java:758)
>         at
> org.apache.jasper.compiler.Compiler.generateClass(Compiler.java:382)
>         at
> org.apache.jasper.compiler.Compiler.compile(Compiler.java:472)
> ...
>
>
> Sachin
>
>
> This email and any attached files are confidential and copyright
> protected. If you are not the addressee, any dissemination of this
> communication is strictly prohibited. Unless otherwise expressly agreed in
> writing, nothing stated in this communication shall be legally binding.
>
> The ultimate parent company of the Atkins Group is WS Atkins
> plc.  Registered in England No. 1885586.  Registered Office Woodcote Grove,
> Ashley Road, Epsom, Surrey KT18 5BW.
>
> Consider the environment. Please don't print this e-mail unless you really
> need to.
>

------=_Part_59333_17515167.1171301297981--

From java-user-return-26076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 12 17:37:15 2007
Return-Path: <java-user-return-26076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47674 invoked from network); 12 Feb 2007 17:37:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2007 17:37:14 -0000
Received: (qmail 92949 invoked by uid 500); 12 Feb 2007 17:37:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92920 invoked by uid 500); 12 Feb 2007 17:37:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92909 invoked by uid 99); 12 Feb 2007 17:37:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 09:37:15 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 86.111.223.190 as permitted sender)
Received: from [86.111.223.190] (HELO cluster-j.mailcontrol.com) (86.111.223.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 09:37:01 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly33j.srv.mailcontrol.com (MailControl) with SMTP id l1CHaWSw025684
	for <java-user@lucene.apache.org>; Mon, 12 Feb 2007 17:36:33 GMT
Received: From SGBD012104.wsatkins.com ([10.202.26.18]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 1171301772711; Mon, 12 Feb 2007 17:36:12 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012104.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 12 Feb 2007 17:36:12 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Solr issue
Date: Mon, 12 Feb 2007 17:36:11 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705C5764B@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Solr issue
Thread-Index: AcdOy0whRrR2YV2LREWeVX3U3QVVZQAAMiMA
References: <BC1CFC544422CB4A934908E126A4742705C57455@SGBLOW2101.wsatkins.com> <33b3a0280702120928u17fdfccfrf7c47d47d531cf5f@mail.gmail.com>
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 12 Feb 2007 17:36:12.0611 (UTC) FILETIME=[4A0E8930:01C74ECC]
X-Scanned-By: MailControl A-06-00-00 (www.mailcontrol.com) on 10.74.0.143
X-Virus-Checked: Checked by ClamAV on apache.org

Cool thanks Marius that did the trick.  It's a shame I spent most of the
day fiddleing with Java_home and classpath environment variables and
copying tools.jar to various locations and all sorts of other things I
read on forums and it turns out to be this!=20

-----Original Message-----
From: Marius Hanganu [mailto:hanganum@gmail.com]=20
Sent: 12 February 2007 17:28
To: java-user@lucene.apache.org
Subject: Re: Solr issue

SOLR seem to have a problem if you don't specify the full path to
java.exewhen starting Jetty.

Here's my script for starting SOLR:

d:\programs\jdk15\bin\java -jar start.jar

Regards,
Marius Hanganu

On 2/12/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
>
> Hello all,
>
> When running the example in the solr release has anyone come up with=20
> the following issue when going to http://localhost:8983/solr/admin/:
>
> HTTP ERROR: 500
> Unable to compile class for JSP
>
> Generated servlet error:
> 12-Feb-2007 16:24:17 org.apache.jasper.compiler.Compiler generateClass
> SEVERE: Javac exception
> Unable to find a javac compiler;
> com.sun.tools.javac.Main is not on the classpath.
> Perhaps JAVA_HOME does not point to the JDK
>         at
> org.apache.tools.ant.taskdefs.compilers.CompilerAdapterFactory.getComp
> il
> er(CompilerAdapterFactory.java:105)
>         at org.apache.tools.ant.taskdefs.Javac.compile(Javac.java:929)
>         at org.apache.tools.ant.taskdefs.Javac.execute(Javac.java:758)
>         at
> org.apache.jasper.compiler.Compiler.generateClass(Compiler.java:382)
>         at
> org.apache.jasper.compiler.Compiler.compile(Compiler.java:472)
> ...
>
>
> Sachin
>
>
> This email and any attached files are confidential and copyright=20
> protected. If you are not the addressee, any dissemination of this=20
> communication is strictly prohibited. Unless otherwise expressly=20
> agreed in writing, nothing stated in this communication shall be
legally binding.
>
> The ultimate parent company of the Atkins Group is WS Atkins plc. =20
> Registered in England No. 1885586.  Registered Office Woodcote Grove,=20
> Ashley Road, Epsom, Surrey KT18 5BW.
>
> Consider the environment. Please don't print this e-mail unless you=20
> really need to.
>


This message has been scanned for viruses by MailControl - (see
http://bluepages.wsatkins.co.uk/?4318150)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 12 18:55:55 2007
Return-Path: <java-user-return-26077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75096 invoked from network); 12 Feb 2007 18:55:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2007 18:55:54 -0000
Received: (qmail 42989 invoked by uid 500); 12 Feb 2007 18:55:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42957 invoked by uid 500); 12 Feb 2007 18:55:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42946 invoked by uid 99); 12 Feb 2007 18:55:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 10:55:54 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of alixandresantana@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 10:55:44 -0800
Received: by nf-out-0910.google.com with SMTP id i2so1936831nfe
        for <java-user@lucene.apache.org>; Mon, 12 Feb 2007 10:55:22 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=huAYbC//DiGy5sA7KMufmg3jBRUjwvwVSLoYUfcyNAtJlL4ERd6wjGV0mgg+L2gaqCV9xRPjdwxRY8IXI5QAoGDbMojkpsAZo+POadKCXms130nJgAZfZDJif11ZGHkg4WN+CfvI5Mbb/CTYH8bpvuLVnX3lrqCHZT6gyIkJuQk=
Received: by 10.82.172.15 with SMTP id u15mr11924107bue.1171306521524;
        Mon, 12 Feb 2007 10:55:21 -0800 (PST)
Received: by 10.82.153.19 with HTTP; Mon, 12 Feb 2007 10:55:21 -0800 (PST)
Message-ID: <17dad8c10702121055k3e143a14t8bad40c10e7107f4@mail.gmail.com>
Date: Mon, 12 Feb 2007 15:55:21 -0300
From: "Alixandre Santana" <alixandresantana@gmail.com>
To: java-user@lucene.apache.org
Subject: decrypting a PDF to read the content
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi All,

I got this error when i tried to decrypt a pdf document encrypted by
com.lowagie.text.pdf.PdfEncryptor class, with a null password:

"java.lang.NoClassDefFoundError: org/bouncycastle/cms/CMSException"

Does anyone know which version of Bouncy Castle is the right one to
use with PDFBox API? i dont know anything about Bouncy Castle.

I=B4m using the LucenePdfDocument Class, from the PDFBox API to decrypt
the document, with a  null password.

Thanks in advance.
Alixandre

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 12 19:55:00 2007
Return-Path: <java-user-return-26078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96730 invoked from network); 12 Feb 2007 19:54:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2007 19:54:59 -0000
Received: (qmail 53371 invoked by uid 500); 12 Feb 2007 19:54:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53347 invoked by uid 500); 12 Feb 2007 19:54:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53336 invoked by uid 99); 12 Feb 2007 19:54:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 11:54:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 11:54:48 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id A81665B764; Mon, 12 Feb 2007 11:54:25 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id A1B747F403
	for <java-user@lucene.apache.org>; Mon, 12 Feb 2007 11:54:25 -0800 (PST)
Date: Mon, 12 Feb 2007 11:54:25 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: RE: Solr issue
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705C5764B@SGBLOW2101.wsatkins.com>
Message-ID: <Pine.LNX.4.58.0702121142560.20134@hal.rescomp.berkeley.edu>
References: <BC1CFC544422CB4A934908E126A4742705C57455@SGBLOW2101.wsatkins.com>
 <33b3a0280702120928u17fdfccfrf7c47d47d531cf5f@mail.gmail.com>
 <BC1CFC544422CB4A934908E126A4742705C5764B@SGBLOW2101.wsatkins.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: SOLR seem to have a problem if you don't specify the full path to
: java.exewhen starting Jetty.

To clarify: this isn't an issue with Solr, or with Jetty - it's an issue
with Windows java installations ignoring JAVA_HOME in favor of a registry
key; so no matter which java.exe comes first in your path, you get tools
from the jRE instead of hte JDK (hence: no compiler)

(And yes: please send Solr questions to the solr-user list in the future)

http://www.nabble.com/Embarrasing-compilation-errors-with-solr-nightly-example-tf1863717.html#a5095264
http://www.google.com/search?hl=en&safe=off&c2coff=1&q=+HKEY_LOCAL_MACHINE%5CSOFTWARE%5CJavaSoft%5C+java+jre+jdk+%22com.sun.tools.javac.Main+is+not+on+the+classpath%22&btnG=Search



-Hoss

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 12 20:20:52 2007
Return-Path: <java-user-return-26079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20828 invoked from network); 12 Feb 2007 20:20:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2007 20:20:50 -0000
Received: (qmail 90673 invoked by uid 500); 12 Feb 2007 20:20:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90647 invoked by uid 500); 12 Feb 2007 20:20:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90635 invoked by uid 99); 12 Feb 2007 20:20:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 12:20:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 12:20:39 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id E2C265B764; Mon, 12 Feb 2007 12:20:18 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id DF5CC7F403
	for <java-user@lucene.apache.org>; Mon, 12 Feb 2007 12:20:18 -0800 (PST)
Date: Mon, 12 Feb 2007 12:20:18 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: using DisjunctionMaxQuery
In-Reply-To: <865c77680702112353i170283dk29c87c68ba158ca4@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0702121214530.20134@hal.rescomp.berkeley.edu>
References: <865c77680702112353i170283dk29c87c68ba158ca4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: First, a quick check on how to use it.
: I tried looking for javadocs, and the mailing list archive, but could not
: find much.

the javadocs seem pretty clear to me...

"A query that generates the union of documents produced by its subqueries,
and that scores each document with the maximum score for that document as
produced by any subquery, plus a tie breaking increment for any additional
matching subqueries."


It's not really clear to me what exactly you are doing, but pased on this
comment...

: Should I be adding the individual Boolean sub-queries to the disMaxQuery ?

...DisjunctionMaxQuery is definitely intended for you to be adding
multiple sub-queries directly to it -- if you only add() one Query to your
disMaxQuery then it's effectively a No-Op.

: When I search, I still see the same term being matched in multiple fields in
: the explain output.

for the record: an Explanation for a DisjunctionMaxQuery is still going to
show you the term being matched in all of those fields -- but it's also
going to make it clear that the score is the max + the tiebreaker times
the sum of the others.  (even if tieBreakerMultiplier is 0, you'll still
see all of hte other subqueries in the Explanation)

if you have suggestions on improving the javaocs, by all means please open
a Jira issue and submit your suggestions there -- Users who struggle with
the existing documentation are the best source of better documentation.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 12 20:44:57 2007
Return-Path: <java-user-return-26080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27628 invoked from network); 12 Feb 2007 20:44:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2007 20:44:57 -0000
Received: (qmail 19729 invoked by uid 500); 12 Feb 2007 20:44:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19397 invoked by uid 500); 12 Feb 2007 20:44:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19378 invoked by uid 99); 12 Feb 2007 20:44:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 12:44:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [64.128.80.6] (HELO yorktown.networkredux.net) (64.128.80.6)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 12:44:46 -0800
Received: from cpanel by yorktown.networkredux.net with local (Exim 4.63)
	(envelope-from <ben@benlitchfield.com>)
	id 1HGi2K-0005rR-V3
	for java-user@lucene.apache.org; Mon, 12 Feb 2007 12:44:33 -0800
Received: from 129.21.60.5 ([129.21.60.5]) by localhost (Horde MIME
	library) with HTTP; Mon, 12 Feb 2007 15:44:32 -0500
Message-ID: <20070212154432.f7ptyj3brjsw8ss0@localhost>
Date: Mon, 12 Feb 2007 15:44:32 -0500
From: Ben Litchfield <ben@benlitchfield.com>
To: java-user@lucene.apache.org
Subject: Re: decrypting a PDF to read the content
References: <17dad8c10702121055k3e143a14t8bad40c10e7107f4@mail.gmail.com>
In-Reply-To: <17dad8c10702121055k3e143a14t8bad40c10e7107f4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset=ISO-8859-1;
	DelSp="Yes";
	format="flowed"
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable
User-Agent: Internet Messaging Program (IMP) H3 (4.1.3)
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - yorktown.networkredux.net
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [32001 32003] / [47 12]
X-AntiAbuse: Sender Address Domain - benlitchfield.com
X-Source: /usr/local/cpanel/3rdparty/bin/php
X-Source-Args: /usr/local/cpanel/3rdparty/bin/php /usr/local/cpanel/base/horde/imp/compose.php 
X-Source-Dir: :/base/horde/imp
X-Virus-Checked: Checked by ClamAV on apache.org

PDFBox comes with a version of BouncyCastle that will work.  It is =20
likely that other versions will also work as well.

Is there a specific version that you have tried and didn't work?

Ben

Quoting Alixandre Santana <alixandresantana@gmail.com>:

> Hi All,
>
> I got this error when i tried to decrypt a pdf document encrypted by
> com.lowagie.text.pdf.PdfEncryptor class, with a null password:
>
> "java.lang.NoClassDefFoundError: org/bouncycastle/cms/CMSException"
>
> Does anyone know which version of Bouncy Castle is the right one to
> use with PDFBox API? i dont know anything about Bouncy Castle.
>
> I=B4m using the LucenePdfDocument Class, from the PDFBox API to decrypt
> the document, with a  null password.
>
> Thanks in advance.
> Alixandre
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 12 21:26:27 2007
Return-Path: <java-user-return-26081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46440 invoked from network); 12 Feb 2007 21:26:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2007 21:26:26 -0000
Received: (qmail 81097 invoked by uid 500); 12 Feb 2007 21:26:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81063 invoked by uid 500); 12 Feb 2007 21:26:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81036 invoked by uid 99); 12 Feb 2007 21:26:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 13:26:26 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 13:26:16 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id l1CLPkpF008173
	for <java-user@lucene.apache.org>; Mon, 12 Feb 2007 23:25:47 +0200
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz with ESMTP
	 id m2cnpu0p; 12 Feb 2007 23:25:00 +0200
Message-ID: <45D0DB48.1010701@teamware.com>
Date: Tue, 13 Feb 2007 08:25:28 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: search on colon ":" ending words
References: <179228.48682.qm@web82507.mail.mud.yahoo.com>
In-Reply-To: <179228.48682.qm@web82507.mail.mud.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Mon, 12 Feb 2007 23:25:47 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Not sure if you're still after a solution, but I had a similar issue and I 
modified QueryParser.jj to not treat : as a field name terminator, so work: 
would then just be given as work: to the analyzer and treated as a search term.

Antony


Felix Litman wrote:
> We want to be able to return a result regardless if users use a colon or not in the query.  So 'work:' and 'work' query should still return same result.
> 
> With the current parser if a user enters 'work:'  with a ":" , Lucene does not return anything :-(.   It seems to me the Lucene parser issue.... we are wondering if there is any simple way to make the Lucene parser ignore the ":" in the query?
> 
> any thoughts?
> 
> Erick Erickson <erickerickson@gmail.com> wrote: I've got to ask why you'd want to search on colons. Why not just index the
> words without colons and search without them too? Let's say you index the
> word "work:" Do you really want to have a search on "work" fail?
> 
> By and large, you're better off indexing and searching without
> punctuation....
> 
> Best
> Erick
> 
> On 1/28/07, Felix Litman  wrote:
>> Is there a simple way to turn off field-search syntax in the Lucene
>> parser, and have Lucene recognize words ending in a colon ":" as search
>> terms instead?
>>
>> Such words are very common occurrences for our documents (or any plain
>> text), but Lucene does not seem to find them. :-(
>>
>> Thank you,
>> Felix
>>
>>
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 12 21:53:29 2007
Return-Path: <java-user-return-26082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56191 invoked from network); 12 Feb 2007 21:53:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2007 21:53:27 -0000
Received: (qmail 31635 invoked by uid 500); 12 Feb 2007 21:53:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31178 invoked by uid 500); 12 Feb 2007 21:53:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31167 invoked by uid 99); 12 Feb 2007 21:53:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 13:53:27 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 13:53:16 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1621280ugc
        for <java-user@lucene.apache.org>; Mon, 12 Feb 2007 13:52:53 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:content-transfer-encoding:message-id:content-type:to:from:subject:date:x-mailer;
        b=rDyN0WceDMTZ+EVCRkH1EKaEmyAXNRQ052/ubkhL8tLvqxEqDyVsBPP7E1NuziiqRBJluqWB39JgJG0M7L6uRsNmuBqaHEhtfmfSIaqzAsEk0IWuFHjHwHsRVmsAFbNKltEaD1x485oMVpIoRhQ4o5ScepqkowM5FafnxgW+Bnc=
Received: by 10.67.19.17 with SMTP id w17mr15631993ugi.1171317173839;
        Mon, 12 Feb 2007 13:52:53 -0800 (PST)
Received: from ?192.168.0.131? ( [83.249.110.110])
        by mx.google.com with ESMTP id k1sm11049847ugf.2007.02.12.13.52.47;
        Mon, 12 Feb 2007 13:52:53 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
Content-Transfer-Encoding: 7bit
Message-Id: <00DA3500-3CFF-4C49-8EF7-6CC9EFB3E69C@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: karl wettin <karl.wettin@gmail.com>
Subject: Benchmarker
Date: Mon, 12 Feb 2007 22:51:16 +0100
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

I can't get the benchmarker to start from ant. I'm running the  
current SVN snapshot.

Lucene isn't found in the classpath. But where should I place my  
lucene.jar? I see it beeing referenced to in the build.xml, but the  
path differs from the dependencies in ./lib.

Please advice, I've been noob blinded level 2 by the ant script.


-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 12 22:08:15 2007
Return-Path: <java-user-return-26083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62555 invoked from network); 12 Feb 2007 22:08:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2007 22:08:14 -0000
Received: (qmail 52875 invoked by uid 500); 12 Feb 2007 22:08:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52843 invoked by uid 500); 12 Feb 2007 22:08:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52818 invoked by uid 99); 12 Feb 2007 22:08:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 14:08:15 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of alixandresantana@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 14:08:05 -0800
Received: by nf-out-0910.google.com with SMTP id i2so21800nfe
        for <java-user@lucene.apache.org>; Mon, 12 Feb 2007 14:07:43 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=cGlVMxM1bdGlXmyr/fJt8sOuF6RGNn+gXZnxduSGnx2yzkIhEz0NUOi1+k+YgGNRUypL4Rylb4WK/EwRyAqFOWInM8r4MQTy+baRPa8yM8h39wNf1g+oHXWvEgRl7fj1dJgfKqtqVuWB/2fQSeOKmy2xnPJAzlDKuTyA6Y1UCJw=
Received: by 10.82.120.14 with SMTP id s14mr11249927buc.1171318063045;
        Mon, 12 Feb 2007 14:07:43 -0800 (PST)
Received: by 10.82.153.19 with HTTP; Mon, 12 Feb 2007 14:07:43 -0800 (PST)
Message-ID: <17dad8c10702121407y2daa9151r13f3c17f8fa52c3b@mail.gmail.com>
Date: Mon, 12 Feb 2007 19:07:43 -0300
From: "Alixandre Santana" <alixandresantana@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: decrypting a PDF to read the content
In-Reply-To: <20070212154432.f7ptyj3brjsw8ss0@localhost>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <17dad8c10702121055k3e143a14t8bad40c10e7107f4@mail.gmail.com>
	 <20070212154432.f7ptyj3brjsw8ss0@localhost>
X-Virus-Checked: Checked by ClamAV on apache.org

I=B4m using PDFBox 0.7.3

The problem i think its that i=B4m encrypting a PDF with Itext, with a
"null" User/Owner password. Then i try to decrypt the doc with a class
from PDFBOx. Its exactly there that
occurs the exception. That is, a format incompability problem.

In addition, i didnt found the  "org/bouncycastle/cms/CMSException" on
PDFBox lib, as you said. So...i tried to use the  "bcprov-jdk15-135",
a bouncy castle provider. Nothing happened.

do you have any idea?

Thanks


On 2/12/07, Ben Litchfield <ben@benlitchfield.com> wrote:
> PDFBox comes with a version of BouncyCastle that will work.  It is
> likely that other versions will also work as well.
>
> Is there a specific version that you have tried and didn't work?
>
> Ben
>
> Quoting Alixandre Santana <alixandresantana@gmail.com>:
>
> > Hi All,
> >
> > I got this error when i tried to decrypt a pdf document encrypted by
> > com.lowagie.text.pdf.PdfEncryptor class, with a null password:
> >
> > "java.lang.NoClassDefFoundError: org/bouncycastle/cms/CMSException"
> >
> > Does anyone know which version of Bouncy Castle is the right one to
> > use with PDFBox API? i dont know anything about Bouncy Castle.
> >
> > I=B4m using the LucenePdfDocument Class, from the PDFBox API to decrypt
> > the document, with a  null password.
> >
> > Thanks in advance.
> > Alixandre
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Alixandre Santana

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 12 22:20:04 2007
Return-Path: <java-user-return-26084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67924 invoked from network); 12 Feb 2007 22:20:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2007 22:20:04 -0000
Received: (qmail 75890 invoked by uid 500); 12 Feb 2007 22:20:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75862 invoked by uid 500); 12 Feb 2007 22:20:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75850 invoked by uid 99); 12 Feb 2007 22:20:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 14:20:05 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 14:19:55 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 772DE5B764; Mon, 12 Feb 2007 14:19:35 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 72B787F403
	for <java-user@lucene.apache.org>; Mon, 12 Feb 2007 14:19:35 -0800 (PST)
Date: Mon, 12 Feb 2007 14:19:35 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: decrypting a PDF to read the content
In-Reply-To: <17dad8c10702121407y2daa9151r13f3c17f8fa52c3b@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0702121418120.30545@hal.rescomp.berkeley.edu>
References: <17dad8c10702121055k3e143a14t8bad40c10e7107f4@mail.gmail.com> 
 <20070212154432.f7ptyj3brjsw8ss0@localhost>
 <17dad8c10702121407y2daa9151r13f3c17f8fa52c3b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


since this question seems to be entirely about extracting text with PDFBox
and not at all baout indexing the text once it's been extracted, perhaps
it would be better suited for the PDFBox forums...

http://www.pdfbox.org/
http://sourceforge.net/forum/?group_id=78314

...i suspect you would find a much larger PDFBox user base there who can
be of more assistance.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 12 22:26:04 2007
Return-Path: <java-user-return-26085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72635 invoked from network); 12 Feb 2007 22:26:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2007 22:26:04 -0000
Received: (qmail 94884 invoked by uid 500); 12 Feb 2007 22:26:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94852 invoked by uid 500); 12 Feb 2007 22:26:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94841 invoked by uid 99); 12 Feb 2007 22:26:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 14:26:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of alixandresantana@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 14:25:54 -0800
Received: by nf-out-0910.google.com with SMTP id i2so26328nfe
        for <java-user@lucene.apache.org>; Mon, 12 Feb 2007 14:25:32 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=mk4guN8ewdR6erF1ZgWQhMw4FrDMgAs0y17+nWAMO/r74/RBOeCuEAIo5CeKGTkjdpt8S6dRICYa2as5fU9W/fn8FAe2uxcPsVKgpYX7ZJ/RIqszVppwNARaH5gwKvjQvnxRoKDDcldj2zYuubXXXliPz67atggrW+1KFZPKkaU=
Received: by 10.82.134.12 with SMTP id h12mr8420283bud.1171319132558;
        Mon, 12 Feb 2007 14:25:32 -0800 (PST)
Received: by 10.82.153.19 with HTTP; Mon, 12 Feb 2007 14:25:32 -0800 (PST)
Message-ID: <17dad8c10702121425q6a471451qc9d0205e7c4504ef@mail.gmail.com>
Date: Mon, 12 Feb 2007 19:25:32 -0300
From: "Alixandre Santana" <alixandresantana@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: decrypting a PDF to read the content
In-Reply-To: <Pine.LNX.4.58.0702121418120.30545@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <17dad8c10702121055k3e143a14t8bad40c10e7107f4@mail.gmail.com>
	 <20070212154432.f7ptyj3brjsw8ss0@localhost>
	 <17dad8c10702121407y2daa9151r13f3c17f8fa52c3b@mail.gmail.com>
	 <Pine.LNX.4.58.0702121418120.30545@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

you right.
No problem.


On 2/12/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
> since this question seems to be entirely about extracting text with PDFBox
> and not at all baout indexing the text once it's been extracted, perhaps
> it would be better suited for the PDFBox forums...
>
> http://www.pdfbox.org/
> http://sourceforge.net/forum/?group_id=78314
>
> ...i suspect you would find a much larger PDFBox user base there who can
> be of more assistance.
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Alixandre Santana

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 12 22:49:27 2007
Return-Path: <java-user-return-26086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86315 invoked from network); 12 Feb 2007 22:49:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2007 22:49:27 -0000
Received: (qmail 47019 invoked by uid 500); 12 Feb 2007 22:49:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46997 invoked by uid 500); 12 Feb 2007 22:49:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46986 invoked by uid 99); 12 Feb 2007 22:49:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 14:49:27 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.150 as permitted sender)
Received: from [195.212.29.150] (HELO mtagate1.de.ibm.com) (195.212.29.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 14:49:15 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate1.de.ibm.com (8.13.8/8.13.8) with ESMTP id l1CMmsLB065018
	for <java-user@lucene.apache.org>; Mon, 12 Feb 2007 22:48:54 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.2) with ESMTP id l1CMmrGg1814782
	for <java-user@lucene.apache.org>; Mon, 12 Feb 2007 23:48:53 +0100
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l1CMmrUg028614
	for <java-user@lucene.apache.org>; Mon, 12 Feb 2007 23:48:53 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l1CMmrkB028611
	for <java-user@lucene.apache.org>; Mon, 12 Feb 2007 23:48:53 +0100
In-Reply-To: <00DA3500-3CFF-4C49-8EF7-6CC9EFB3E69C@gmail.com>
Subject: Re: Benchmarker
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF92934F4F.59C34EFC-ON88257280.007CF148-88257280.007D17F6@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Mon, 12 Feb 2007 14:46:21 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 13/02/2007 00:48:53
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Running (once) "ant jar" from the trunk directory should do it.

Doron



                                                                           
             karl wettin                                                   
             <karl.wettin@gmai                                             
             l.com>                                                     To 
                                       java-user@lucene.apache.org         
             12/02/2007 13:51                                           cc 
                                                                           
                                                                   Subject 
             Please respond to         Benchmarker                         
             java-user@lucene.                                             
                apache.org                                                 
                                                                           
                                                                           
                                                                           
                                                                           




I can't get the benchmarker to start from ant. I'm running the
current SVN snapshot.

Lucene isn't found in the classpath. But where should I place my
lucene.jar? I see it beeing referenced to in the build.xml, but the
path differs from the dependencies in ./lib.

Please advice, I've been noob blinded level 2 by the ant script.


--
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 13 00:56:31 2007
Return-Path: <java-user-return-26087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31223 invoked from network); 13 Feb 2007 00:56:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2007 00:56:31 -0000
Received: (qmail 16203 invoked by uid 500); 13 Feb 2007 00:56:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16160 invoked by uid 500); 13 Feb 2007 00:56:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16149 invoked by uid 99); 13 Feb 2007 00:56:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 16:56:32 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of vnguyen@ur.com designates 63.241.148.49 as permitted sender)
Received: from [63.241.148.49] (HELO iris.ur.com) (63.241.148.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 16:56:22 -0800
Received: from unknown (HELO UREXCHSRV5.ur.com) ([10.6.134.35])
  by iris.ur.com with ESMTP; 13 Feb 2007 00:56:18 +0000
X-OriginatingIP: 10.6.134.35
X-InternalServer: 10.6.134.35
Received: from UREXCHVS3.ur.com ([10.6.138.34]) by UREXCHSRV5.ur.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 12 Feb 2007 19:54:00 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C74F09.BB026886"
Subject: Question about applications using different versions of Lucene
Date: Mon, 12 Feb 2007 19:55:59 -0500
Message-ID: <0D6A3C278F4DC346B98DF4D2F1397E81195A10C6@UREXCHVS3.ur.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Question about applications using different versions of Lucene
Thread-Index: AcdPCbmrgSYiD12PRF+VK9We4hhgHQ==
From: "Van Nguyen" <vnguyen@ur.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 13 Feb 2007 00:54:00.0831 (UTC) FILETIME=[7322D0F0:01C74F09]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C74F09.BB026886
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I have two applications that share some of the same Lucene Indexes.  I
recently upgrade the Lucene-core.jar from v2.0 to a nightly build (Feb.
04, 2006 - I was looking for the IndexWriter class that allows you to
merge indexes w/o optimizing).

=20

Now I notice the index is a little different:

=20

Prior to upgrading:

          _0.cfs

          deletable

          segments

=20

After upgrading:

          _g.cfs

          segments.gen

          segments_17

=20

Didn't think much of it until I started my test server and things
stopped working.  I started debugging, and it seems like the
Lucene-core.jar (the version that was not built on Feb. 04, 2006) looks
at the new index and thinks that it does not exist... so it tries to
create a new index.  It is successful at deleting the .cfs file, but not
the .gen and segments_17 (I'm assuming it doesn't recognize those types
of file). =20

=20

Has anyone else run into this problem? =20


------_=_NextPart_001_01C74F09.BB026886--

From java-user-return-26088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 13 01:28:21 2007
Return-Path: <java-user-return-26088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38302 invoked from network); 13 Feb 2007 01:28:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2007 01:28:21 -0000
Received: (qmail 46039 invoked by uid 500); 13 Feb 2007 01:28:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46016 invoked by uid 500); 13 Feb 2007 01:28:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46005 invoked by uid 99); 13 Feb 2007 01:28:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 17:28:22 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [68.230.241.44] (HELO fed1rmmtao102.cox.net) (68.230.241.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 17:28:11 -0800
Received: from fed1rmimpo01.cox.net ([70.169.32.71])
          by fed1rmmtao102.cox.net
          (InterMail vM.7.05.02.00 201-2174-114-20060621) with ESMTP
          id <20070213012750.XMTK21668.fed1rmmtao102.cox.net@fed1rmimpo01.cox.net>
          for <java-user@lucene.apache.org>;
          Mon, 12 Feb 2007 20:27:50 -0500
Received: from dv1040 ([68.111.207.19])
	by fed1rmimpo01.cox.net with bizsmtp
	id NpTm1W0060Reif00000000; Mon, 12 Feb 2007 20:27:50 -0500
Reply-To: <gstead@ieee.org>
From: "Graham Stead" <gstead@ieee.org>
To: <java-user@lucene.apache.org>
Subject: RE: Question about applications using different versions of Lucene
Date: Mon, 12 Feb 2007 17:27:43 -0800
Message-ID: <03bd01c74f0e$28c7d5f0$0601a8c0@dv1040>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <0D6A3C278F4DC346B98DF4D2F1397E81195A10C6@UREXCHVS3.ur.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
Thread-Index: AcdPCbmrgSYiD12PRF+VK9We4hhgHQAA6Www
X-Virus-Checked: Checked by ClamAV on apache.org

I believe the Lucene file format changed in version 2.1, and your nightly
.jar file is probably v2.1. See
http://lucene.apache.org/java/docs/fileformats.html#Segments%20File.

I'm afraid I'm not an expert on the related compatibility issues. It has
been my experience that pre-2.1 Lucene cannot read 2.1 indexes (error: can't
find segments file). You seem to have shown the converse is also
true...although I could have sworn that Lucene 2.1 slurped my pre-2.1 index
without problems.

Hope this helps,
-Graham



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 13 01:40:05 2007
Return-Path: <java-user-return-26089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40793 invoked from network); 13 Feb 2007 01:40:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2007 01:40:05 -0000
Received: (qmail 67578 invoked by uid 500); 13 Feb 2007 01:40:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67555 invoked by uid 500); 13 Feb 2007 01:40:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67544 invoked by uid 99); 13 Feb 2007 01:40:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 17:40:03 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 17:39:53 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 383645B763; Mon, 12 Feb 2007 17:39:32 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 306997F403
	for <java-user@lucene.apache.org>; Mon, 12 Feb 2007 17:39:32 -0800 (PST)
Date: Mon, 12 Feb 2007 17:39:32 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Question about applications using different versions of Lucene
In-Reply-To: <0D6A3C278F4DC346B98DF4D2F1397E81195A10C6@UREXCHVS3.ur.com>
Message-ID: <Pine.LNX.4.58.0702121736150.9109@hal.rescomp.berkeley.edu>
References: <0D6A3C278F4DC346B98DF4D2F1397E81195A10C6@UREXCHVS3.ur.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I have two applications that share some of the same Lucene Indexes.  I
: recently upgrade the Lucene-core.jar from v2.0 to a nightly build (Feb.
: 04, 2006 - I was looking for the IndexWriter class that allows you to
: merge indexes w/o optimizing).

Am I correct in understanding that you have two seperate applications: one
reading hte index and one writing the index and you only upgraded lucene
for the application that writes the index?

If so, this is not a supported compatibility situation, if the wiki were
up right now there is a document that explains...

   File formats are back-compatible between major versions.  Version X.N
   should be able to read indexes generated by any version after and
   including version X-1.0, but may-or-may-not be able to read indexes
   generated by version X-2.N.

...what happens is that the 2.X code in the trunk can correctly read your
2.1 index, but it modifies hte files on disk as you add documents to morph
the index format to the new 2.X format -- your seperate 2.1 application
can not read that format.

(if i'm in correct and you actually updated the lucene jar for both
applications then please clarify)


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 13 01:41:45 2007
Return-Path: <java-user-return-26090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41097 invoked from network); 13 Feb 2007 01:41:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2007 01:41:44 -0000
Received: (qmail 73371 invoked by uid 500); 13 Feb 2007 01:41:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73328 invoked by uid 500); 13 Feb 2007 01:41:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73317 invoked by uid 99); 13 Feb 2007 01:41:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 17:41:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.152 as permitted sender)
Received: from [195.212.29.152] (HELO mtagate3.de.ibm.com) (195.212.29.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 17:41:32 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate3.de.ibm.com (8.13.8/8.13.8) with ESMTP id l1D1fB0e083690
	for <java-user@lucene.apache.org>; Tue, 13 Feb 2007 01:41:11 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.2) with ESMTP id l1D1fBxa1904706
	for <java-user@lucene.apache.org>; Tue, 13 Feb 2007 02:41:11 +0100
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l1D1fAAp024594
	for <java-user@lucene.apache.org>; Tue, 13 Feb 2007 02:41:10 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l1D1fABg024591
	for <java-user@lucene.apache.org>; Tue, 13 Feb 2007 02:41:10 +0100
In-Reply-To: <0D6A3C278F4DC346B98DF4D2F1397E81195A10C6@UREXCHVS3.ur.com>
Subject: Re: Question about applications using different versions of Lucene
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF4DB510AD.004B6D97-ON88257281.000790FC-88257281.0008F98B@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Mon, 12 Feb 2007 17:38:01 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 13/02/2007 03:41:09
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I suspect what happened is result of a "mis-ordered" upgrade sequence:
The first of the two applications managed to access and upgrade
the index. However the second application then tried to update the
already upgraded index and messed things up.

I think this may even be worse, as one of the changes since 2.0 is
that write locks are now (by default) maintained in the index directory.
So if the two applications attempt to access the index at the same time,
but one uses 2.0 and the other uses "to-be-2.1" version, since locks
are maintained in different places, they might both write to the index
at the same time and corrupt it.

A related discussion is in this thread:
http://issues.apache.org/jira/browse/LUCENE-771#action_12464409

To conclude, the upgrade steps should be:
1) upgrade all readers.
2) upgrade all writers at once (no old writer should access the
   index ones this step started).

Regards,
Doron

"Van Nguyen" <vnguyen@ur.com> wrote on 12/02/2007 16:55:59:

> I have two applications that share some of the same Lucene Indexes.  I
> recently upgrade the Lucene-core.jar from v2.0 to a nightly build (Feb.
> 04, 2006 - I was looking for the IndexWriter class that allows you to
> merge indexes w/o optimizing).
>
>
>
> Now I notice the index is a little different:
>
>
>
> Prior to upgrading:
>
>           _0.cfs
>
>           deletable
>
>           segments
>
>
>
> After upgrading:
>
>           _g.cfs
>
>           segments.gen
>
>           segments_17
>
>
>
> Didn't think much of it until I started my test server and things
> stopped working.  I started debugging, and it seems like the
> Lucene-core.jar (the version that was not built on Feb. 04, 2006) looks
> at the new index and thinks that it does not exist... so it tries to
> create a new index.  It is successful at deleting the .cfs file, but not
> the .gen and segments_17 (I'm assuming it doesn't recognize those types
> of file).
>
>
>
> Has anyone else run into this problem?
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 13 01:55:02 2007
Return-Path: <java-user-return-26091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43891 invoked from network); 13 Feb 2007 01:55:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2007 01:55:01 -0000
Received: (qmail 6117 invoked by uid 500); 13 Feb 2007 01:55:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6075 invoked by uid 500); 13 Feb 2007 01:55:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6054 invoked by uid 99); 13 Feb 2007 01:55:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 17:55:02 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of vnguyen@ur.com designates 63.241.148.49 as permitted sender)
Received: from [63.241.148.49] (HELO iris.ur.com) (63.241.148.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 17:54:52 -0800
Received: from unknown (HELO UREXCHSRV5.ur.com) ([10.6.134.35])
  by iris.ur.com with ESMTP; 13 Feb 2007 01:54:48 +0000
X-OriginatingIP: 10.6.134.35
X-InternalServer: 10.6.134.35
Received: from UREXCHVS3.ur.com ([10.6.138.34]) by UREXCHSRV5.ur.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 12 Feb 2007 20:52:30 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Question about applications using different versions of Lucene
Date: Mon, 12 Feb 2007 20:54:30 -0500
Message-ID: <0D6A3C278F4DC346B98DF4D2F1397E81195A10E0@UREXCHVS3.ur.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Question about applications using different versions of Lucene
Thread-Index: AcdPD9/RRmEuR7CVQzqNCUg6AOR4igAAdBGA
References: <0D6A3C278F4DC346B98DF4D2F1397E81195A10C6@UREXCHVS3.ur.com> <Pine.LNX.4.58.0702121736150.9109@hal.rescomp.berkeley.edu>
From: "Van Nguyen" <vnguyen@ur.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 13 Feb 2007 01:52:30.0588 (UTC) FILETIME=[9F1D3BC0:01C74F11]
X-Virus-Checked: Checked by ClamAV on apache.org

>Am I correct in understanding that you have two seperate applications:
one
>reading hte index and one writing the index and you only upgraded
lucene
>for the application that writes the index?

Yes

>If so, this is not a supported compatibility situation, if the wiki
were
>up right now there is a document that explains...

DOH!

Thanks,

Van

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 13 03:38:59 2007
Return-Path: <java-user-return-26092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77194 invoked from network); 13 Feb 2007 03:38:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2007 03:38:58 -0000
Received: (qmail 28402 invoked by uid 500); 13 Feb 2007 03:38:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28381 invoked by uid 500); 13 Feb 2007 03:38:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28370 invoked by uid 99); 13 Feb 2007 03:38:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 19:38:58 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.151 as permitted sender)
Received: from [195.212.29.151] (HELO mtagate2.de.ibm.com) (195.212.29.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 19:38:46 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.13.8/8.13.8) with ESMTP id l1D3cOGf090152
	for <java-user@lucene.apache.org>; Tue, 13 Feb 2007 03:38:24 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.2) with ESMTP id l1D3cOJW2072810
	for <java-user@lucene.apache.org>; Tue, 13 Feb 2007 04:38:24 +0100
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l1D3cOMw004658
	for <java-user@lucene.apache.org>; Tue, 13 Feb 2007 04:38:24 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l1D3cNg2004654
	for <java-user@lucene.apache.org>; Tue, 13 Feb 2007 04:38:23 +0100
In-Reply-To: <OF92934F4F.59C34EFC-ON88257280.007CF148-88257280.007D17F6@il.ibm.com>
Subject: Re: Benchmarker
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF511FECA9.811C6E1D-ON88257281.0012F386-88257281.001386DC@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Mon, 12 Feb 2007 19:33:17 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 13/02/2007 05:38:23
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Karl,

> Running (once) "ant jar" from the trunk directory should do it.

Did it solve the problem?
If so I would add a better error message for the case that the lucene jar
is missing.

Thanks,
Doron

> karl wettin wrote:
>
>> I can't get the benchmarker to start from ant. I'm running the
>> current SVN snapshot.
>>
>> Lucene isn't found in the classpath. But where should I place my
>> lucene.jar? I see it beeing referenced to in the build.xml, but the
>> path differs from the dependencies in ./lib.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 13 05:35:23 2007
Return-Path: <java-user-return-26093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7275 invoked from network); 13 Feb 2007 05:35:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2007 05:35:22 -0000
Received: (qmail 40362 invoked by uid 500); 13 Feb 2007 05:35:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40332 invoked by uid 500); 13 Feb 2007 05:35:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40321 invoked by uid 99); 13 Feb 2007 05:35:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 21:35:21 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of gv.ashwin@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 21:35:11 -0800
Received: by nf-out-0910.google.com with SMTP id i2so122072nfe
        for <java-user@lucene.apache.org>; Mon, 12 Feb 2007 21:34:50 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=WViu9Fd7LHwlzV58Y0+38oSApI+ZyY/bO6pnV8pKil/7ztwiwLr0Mn1eT0V/odM/jM4NFMLr7fiK7PjSayKSuBE6kbGHI/+OoXJ+nYGlS3o8yC1/n9qB/8Ra7FubJgwQDr5OBpAADSUMA2SMxgDY3WGbdowANfsRKAL9wryoiVU=
Received: by 10.48.216.8 with SMTP id o8mr359775nfg.1171344890388;
        Mon, 12 Feb 2007 21:34:50 -0800 (PST)
Received: by 10.48.214.19 with HTTP; Mon, 12 Feb 2007 21:34:49 -0800 (PST)
Message-ID: <2b817f360702122134m22c93bb1q574a1388f71afe2c@mail.gmail.com>
Date: Tue, 13 Feb 2007 11:04:49 +0530
From: "ashwin kumar" <gv.ashwin@gmail.com>
To: java-user@lucene.apache.org
Subject: hi compile error
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_60000_611620.1171344889605"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_60000_611620.1171344889605
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hi all my name is ashwin i am trying to compile this program but its not
getting compiled the error msg follows the code which is below

import java.io.File;
import java.io.FileReader;
import java.io.Reader;
import java.util.Date;

import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field.*;
import org.apache.lucene.index.IndexWriter;

/**
 * This class demonstrates the process of creating an index with Lucene
 * for text files in a directory.
 */
public class TextFileIndexer
{
 public static void main(String[] args) throws Exception
 {

      File   fileDir  = new File("C:\\files_to_index ");//fileDir is the
directory that contains the text files to be indexed

      File   indexDir = new File("C:\\luceneIndex"); //indexDir is the
directory that hosts Lucene's index files

      Analyzer luceneAnalyzer = new StandardAnalyzer();

      IndexWriter indexWriter = new
IndexWriter(indexDir,luceneAnalyzer,true);

       File[] textFiles  = fileDir.listFiles();

       long startTime = new Date().getTime();

       for(int i = 0; i < textFiles.length; i++)
         {
             if(textFiles[i].isFile() &&
textFiles[i].getName().endsWith(".txt"))
                {
                    System.out.println("File " +
textFiles[i].getCanonicalPath()+ " is being indexed");
                     Reader textReader = new FileReader(textFiles[i]);
                    Document document = new Document();
                    document.add(Field.Text("content",textReader));
                    document.add(Field.Text("path",textFiles[i].getPath()));
                   indexWriter.addDocument(document);
               }
         }

   indexWriter.optimize();
   indexWriter.close();
   long endTime = new Date().getTime();

   System.out.println("It took " + (endTime - startTime)
              + " milliseconds to create an index for the files in the
directory "
              + fileDir.getPath());
  }
}

error msg:

--------------------Configuration: <Default>--------------------
D:\ASHWIN\testing\searching\TextFileIndexer.java:40: cannot find symbol
symbol  : variable Field
location: class TextFileIndexer
       document.add(Field.Text("content",textReader));
                    ^
D:\ASHWIN\testing\searching\TextFileIndexer.java:41: cannot find symbol
symbol  : variable Field
location: class TextFileIndexer
       document.add(Field.Text("path",textFiles[i].getPath()));
                    ^
2 errors

Process completed.

------=_Part_60000_611620.1171344889605--

From java-user-return-26094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 13 06:04:17 2007
Return-Path: <java-user-return-26094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14740 invoked from network); 13 Feb 2007 06:04:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2007 06:04:16 -0000
Received: (qmail 68367 invoked by uid 500); 13 Feb 2007 06:04:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68335 invoked by uid 500); 13 Feb 2007 06:04:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68324 invoked by uid 99); 13 Feb 2007 06:04:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 22:04:18 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.199.37.133] (HELO rediff.co.in) (203.199.37.133)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 12 Feb 2007 22:04:08 -0800
Received: (qmail 23223 invoked from network); 13 Feb 2007 06:00:30 -0000
Received: from unknown (HELO bhavin) (172.16.3.213)
  by mailserver with SMTP; 13 Feb 2007 06:00:30 -0000
Message-ID: <004801c74f37$131c8420$d50310ac@bhavin>
Reply-To: "Bhavin Pandya" <bhavinp@rediff.co.in>
From: "Bhavin Pandya" <bhavinp@rediff.co.in>
To: <java-user@lucene.apache.org>
References: <2b817f360702122134m22c93bb1q574a1388f71afe2c@mail.gmail.com>
Subject: Re: hi compile error
Date: Tue, 13 Feb 2007 11:50:32 +0530
Organization: rediff.com
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org

Hi ashwin,

I think there is error in your import statement...

import org.apache.lucene.document.Field;

Thanks.
Bhavin pandya

----- Original Message ----- 
From: "ashwin kumar" <gv.ashwin@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Tuesday, February 13, 2007 11:04 AM
Subject: hi compile error


> hi all my name is ashwin i am trying to compile this program but its not
> getting compiled the error msg follows the code which is below
>
> import java.io.File;
> import java.io.FileReader;
> import java.io.Reader;
> import java.util.Date;
>
> import org.apache.lucene.analysis.Analyzer;
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field.*;
> import org.apache.lucene.index.IndexWriter;
>
> /**
> * This class demonstrates the process of creating an index with Lucene
> * for text files in a directory.
> */
> public class TextFileIndexer
> {
> public static void main(String[] args) throws Exception
> {
>
>      File   fileDir  = new File("C:\\files_to_index ");//fileDir is the
> directory that contains the text files to be indexed
>
>      File   indexDir = new File("C:\\luceneIndex"); //indexDir is the
> directory that hosts Lucene's index files
>
>      Analyzer luceneAnalyzer = new StandardAnalyzer();
>
>      IndexWriter indexWriter = new
> IndexWriter(indexDir,luceneAnalyzer,true);
>
>       File[] textFiles  = fileDir.listFiles();
>
>       long startTime = new Date().getTime();
>
>       for(int i = 0; i < textFiles.length; i++)
>         {
>             if(textFiles[i].isFile() &&
> textFiles[i].getName().endsWith(".txt"))
>                {
>                    System.out.println("File " +
> textFiles[i].getCanonicalPath()+ " is being indexed");
>                     Reader textReader = new FileReader(textFiles[i]);
>                    Document document = new Document();
>                    document.add(Field.Text("content",textReader));
> 
> document.add(Field.Text("path",textFiles[i].getPath()));
>                   indexWriter.addDocument(document);
>               }
>         }
>
>   indexWriter.optimize();
>   indexWriter.close();
>   long endTime = new Date().getTime();
>
>   System.out.println("It took " + (endTime - startTime)
>              + " milliseconds to create an index for the files in the
> directory "
>              + fileDir.getPath());
>  }
> }
>
> error msg:
>
> --------------------Configuration: <Default>--------------------
> D:\ASHWIN\testing\searching\TextFileIndexer.java:40: cannot find symbol
> symbol  : variable Field
> location: class TextFileIndexer
>       document.add(Field.Text("content",textReader));
>                    ^
> D:\ASHWIN\testing\searching\TextFileIndexer.java:41: cannot find symbol
> symbol  : variable Field
> location: class TextFileIndexer
>       document.add(Field.Text("path",textFiles[i].getPath()));
>                    ^
> 2 errors
>
> Process completed.
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 13 06:07:22 2007
Return-Path: <java-user-return-26095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15045 invoked from network); 13 Feb 2007 06:07:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2007 06:07:22 -0000
Received: (qmail 70679 invoked by uid 500); 13 Feb 2007 06:07:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70650 invoked by uid 500); 13 Feb 2007 06:07:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70639 invoked by uid 99); 13 Feb 2007 06:07:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 22:07:23 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.152 as permitted sender)
Received: from [195.212.29.152] (HELO mtagate3.de.ibm.com) (195.212.29.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 22:07:11 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate3.de.ibm.com (8.13.8/8.13.8) with ESMTP id l1D66oSA103164
	for <java-user@lucene.apache.org>; Tue, 13 Feb 2007 06:06:50 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.2) with ESMTP id l1D66njv2044072
	for <java-user@lucene.apache.org>; Tue, 13 Feb 2007 07:06:49 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l1D66naU021262
	for <java-user@lucene.apache.org>; Tue, 13 Feb 2007 07:06:49 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l1D66nEK021259
	for <java-user@lucene.apache.org>; Tue, 13 Feb 2007 07:06:49 +0100
In-Reply-To: <2b817f360702122134m22c93bb1q574a1388f71afe2c@mail.gmail.com>
Subject: Re: hi compile error
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFD16D0287.C1AC60CA-ON88257281.002073D0-88257281.00215BA7@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Mon, 12 Feb 2007 22:04:21 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 13/02/2007 08:06:49
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Hi ashwin,

ashwin kumar wrote:

>       File   fileDir  = new File("C:\\files_to_index ");//fileDir is the

Notice a redundant trailing space here.

>                     document.add(Field.Text("content",textReader));

> D:\ASHWIN\testing\searching\TextFileIndexer.java:40: cannot find symbol
> symbol  : variable Field
> location: class TextFileIndexer
>        document.add(Field.Text("content",textReader));
>                     ^

Field.Text was deprecated in Lucene 1.9.1 and removed in Lucene 2.0.
So if Lucene 2.0 is used this explains the compilation error.

See also FAQ Entry "How do I get code written for Lucene 1.4.x to work with
Lucene 2.x?"
http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-86d479476c63a2579e867b75d4faa9664ef6cf4d



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 13 06:34:49 2007
Return-Path: <java-user-return-26096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19430 invoked from network); 13 Feb 2007 06:34:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2007 06:34:48 -0000
Received: (qmail 95039 invoked by uid 500); 13 Feb 2007 06:34:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94998 invoked by uid 500); 13 Feb 2007 06:34:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94987 invoked by uid 99); 13 Feb 2007 06:34:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 22:34:50 -0800
X-ASF-Spam-Status: No, hits=4.3 required=10.0
	tests=DATE_IN_FUTURE_12_24,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [220.225.240.22] (HELO mail01.naukri.com) (220.225.240.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Feb 2007 22:34:40 -0800
Received: from [172.16.0.162] ([172.16.0.162])
          by mail01.naukri.com (Lotus Domino Release 7.0)
          with ESMTP id 2007021311524397-785418 ;
          Tue, 13 Feb 2007 11:52:43 +0530 
Message-ID: <45D21901.1030600@naukri.com>
Date: Tue, 13 Feb 2007 12:01:05 -0800
From: Kapil Chhabra <kapil.chhabra@naukri.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: hi compile error
References: <2b817f360702122134m22c93bb1q574a1388f71afe2c@mail.gmail.com>
In-Reply-To: <2b817f360702122134m22c93bb1q574a1388f71afe2c@mail.gmail.com>
X-MIMETrack: Itemize by SMTP Server on noidaa88/naukri(Release 7.0|August 18, 2005) at
 02/13/2007 11:52:44 AM,
	Serialize by Router on noidaa88/naukri(Release 7.0|August 18, 2005) at 02/13/2007
 11:53:06 AM,
	Serialize complete at 02/13/2007 11:53:06 AM
Content-Type: multipart/alternative;
 boundary="------------020405000303050906000204"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------020405000303050906000204
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Hi,
replace

/import org.apache.lucene.document.Field.*; /

with

/import org.apache.lucene.document.Field; /

and you are done.

Regards,
kapilChhabra

ashwin kumar wrote:
> hi all my name is ashwin i am trying to compile this program but its not
> getting compiled the error msg follows the code which is below
>
> import java.io.File;
> import java.io.FileReader;
> import java.io.Reader;
> import java.util.Date;
>
> import org.apache.lucene.analysis.Analyzer;
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field.*;
> import org.apache.lucene.index.IndexWriter;
>
> /**
> * This class demonstrates the process of creating an index with Lucene
> * for text files in a directory.
> */
> public class TextFileIndexer
> {
> public static void main(String[] args) throws Exception
> {
>
>      File   fileDir  = new File("C:\\files_to_index ");//fileDir is the
> directory that contains the text files to be indexed
>
>      File   indexDir = new File("C:\\luceneIndex"); //indexDir is the
> directory that hosts Lucene's index files
>
>      Analyzer luceneAnalyzer = new StandardAnalyzer();
>
>      IndexWriter indexWriter = new
> IndexWriter(indexDir,luceneAnalyzer,true);
>
>       File[] textFiles  = fileDir.listFiles();
>
>       long startTime = new Date().getTime();
>
>       for(int i = 0; i < textFiles.length; i++)
>         {
>             if(textFiles[i].isFile() &&
> textFiles[i].getName().endsWith(".txt"))
>                {
>                    System.out.println("File " +
> textFiles[i].getCanonicalPath()+ " is being indexed");
>                     Reader textReader = new FileReader(textFiles[i]);
>                    Document document = new Document();
>                    document.add(Field.Text("content",textReader));
>                    
> document.add(Field.Text("path",textFiles[i].getPath()));
>                   indexWriter.addDocument(document);
>               }
>         }
>
>   indexWriter.optimize();
>   indexWriter.close();
>   long endTime = new Date().getTime();
>
>   System.out.println("It took " + (endTime - startTime)
>              + " milliseconds to create an index for the files in the
> directory "
>              + fileDir.getPath());
>  }
> }
>
> error msg:
>
> --------------------Configuration: <Default>--------------------
> D:\ASHWIN\testing\searching\TextFileIndexer.java:40: cannot find symbol
> symbol  : variable Field
> location: class TextFileIndexer
>       document.add(Field.Text("content",textReader));
>                    ^
> D:\ASHWIN\testing\searching\TextFileIndexer.java:41: cannot find symbol
> symbol  : variable Field
> location: class TextFileIndexer
>       document.add(Field.Text("path",textFiles[i].getPath()));
>                    ^
> 2 errors
>
> Process completed.
>


--------------020405000303050906000204--

From java-user-return-26097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 13 08:40:15 2007
Return-Path: <java-user-return-26097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51547 invoked from network); 13 Feb 2007 08:40:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2007 08:40:15 -0000
Received: (qmail 4946 invoked by uid 500); 13 Feb 2007 08:40:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4916 invoked by uid 500); 13 Feb 2007 08:40:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4905 invoked by uid 99); 13 Feb 2007 08:40:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Feb 2007 00:40:13 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of saroja.kanta.maharana@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Feb 2007 00:40:03 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1760179ugc
        for <java-user@lucene.apache.org>; Tue, 13 Feb 2007 00:39:42 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ngyruJ7esJ9lkvIXUS+fCCvuN6jlho0HEHIx6mwN7Gf221a2CE2WP2Ke6nccGlmWVTf4gdq6cZ5Q/HT5AJgijymUWC93njvy9aC9jJ2tW7SypmaAPd+TLWbofpgeIbQUPn4W4dwEJxYeasSjCqzA+ScKfuYI5mwML035PjnrUc0=
Received: by 10.82.177.3 with SMTP id z3mr14518205bue.1171355981788;
        Tue, 13 Feb 2007 00:39:41 -0800 (PST)
Received: by 10.82.122.15 with HTTP; Tue, 13 Feb 2007 00:39:41 -0800 (PST)
Message-ID: <ab6fb9950702130039k16832097u8b013014d065fa07@mail.gmail.com>
Date: Tue, 13 Feb 2007 14:09:41 +0530
From: "Saroja Kanta Maharana" <saroja.kanta.maharana@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: hi compile error
In-Reply-To: <OFD16D0287.C1AC60CA-ON88257281.002073D0-88257281.00215BA7@il.ibm.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_36956_4199383.1171355981627"
References: <2b817f360702122134m22c93bb1q574a1388f71afe2c@mail.gmail.com>
	 <OFD16D0287.C1AC60CA-ON88257281.002073D0-88257281.00215BA7@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_36956_4199383.1171355981627
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

   I also new to lucene. As see your error, It may be the Lucene version
problem. Which version
 r u using? means which which jar file ? Will you say me the Lucene Jar file
name ??



Regards

Saroj

On 2/13/07, Doron Cohen <DORONC@il.ibm.com> wrote:
>
> Hi ashwin,
>
> ashwin kumar wrote:
>
> >       File   fileDir  = new File("C:\\files_to_index ");//fileDir is the
>
> Notice a redundant trailing space here.
>
> >                     document.add(Field.Text("content",textReader));
>
> > D:\ASHWIN\testing\searching\TextFileIndexer.java:40: cannot find symbol
> > symbol  : variable Field
> > location: class TextFileIndexer
> >        document.add(Field.Text("content",textReader));
> >                     ^
>
> Field.Text was deprecated in Lucene 1.9.1 and removed in Lucene 2.0.
> So if Lucene 2.0 is used this explains the compilation error.
>
> See also FAQ Entry "How do I get code written for Lucene 1.4.x to work
> with
> Lucene 2.x?"
>
> http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-86d479476c63a2579e867b75d4faa9664ef6cf4d
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards
Saroja kanta Maharana
+919886750538

------=_Part_36956_4199383.1171355981627--

From java-user-return-26098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 13 11:26:47 2007
Return-Path: <java-user-return-26098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26556 invoked from network); 13 Feb 2007 11:26:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2007 11:26:46 -0000
Received: (qmail 83712 invoked by uid 500); 13 Feb 2007 11:26:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83683 invoked by uid 500); 13 Feb 2007 11:26:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83672 invoked by uid 99); 13 Feb 2007 11:26:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Feb 2007 03:26:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Feb 2007 03:26:33 -0800
Received: by nf-out-0910.google.com with SMTP id i2so199433nfe
        for <java-user@lucene.apache.org>; Tue, 13 Feb 2007 03:26:12 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=HDEqU7anLhK7rbsrl9+3VBm4WEsknV8LZPXO+iHl6Y6IWd5BWlgVyga7/PEzG8fc1KD/DlNp75RofhS18uOnG5ff2q3fyXVeCk7bx5PPPeu3qYIWylhMotmHpc9A3slqkEjOzG5NHg2k78COOL8p98qsK6ojXRVpqKBumekT9PA=
Received: by 10.82.111.8 with SMTP id j8mr12755289buc.1171365971818;
        Tue, 13 Feb 2007 03:26:11 -0800 (PST)
Received: from ?192.168.1.3? ( [83.249.110.75])
        by mx.google.com with ESMTP id k24sm2286779nfc.2007.02.13.03.26.09;
        Tue, 13 Feb 2007 03:26:11 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <OF511FECA9.811C6E1D-ON88257281.0012F386-88257281.001386DC@il.ibm.com>
References: <OF511FECA9.811C6E1D-ON88257281.0012F386-88257281.001386DC@il.ibm.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <362883D0-FC7E-4D90-A1AF-94EE70686639@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Benchmarker
Date: Tue, 13 Feb 2007 12:24:44 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


13 feb 2007 kl. 04.33 skrev Doron Cohen:

>> Running (once) "ant jar" from the trunk directory should do it.
>
> Did it solve the problem?

Indeed.

Do you have way to much time to spare? I patched up the code to run  
on the index index in LUCENE-550. Unfortunatly it seems as I messed  
something up or missed something I have to do prior to running. ant  
run-standard pass in about 4 seconds. I get lots of output with info  
that clearly tells me that the Reuters set was loaded, but 4 seconds?  
Is my new laptop really that fast?

What I did was very simple. I replaced the Directory in TestData (and  
that second similiar class that had a reference too) with my Index  
interface that contains writer and reader factory methods. Then some  
minor things like going from IndexWriter to IndexWriterInterface in  
method parameters.

Would you mind taking a look at my patch of the benchmarker to see if  
it actually works as it should or not? Let me know and I'll post a  
new trunk.diff.bz2 to 550 containing the changes.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 13 11:42:11 2007
Return-Path: <java-user-return-26099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30620 invoked from network); 13 Feb 2007 11:42:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2007 11:42:10 -0000
Received: (qmail 19735 invoked by uid 500); 13 Feb 2007 11:42:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19486 invoked by uid 500); 13 Feb 2007 11:42:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19475 invoked by uid 99); 13 Feb 2007 11:42:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Feb 2007 03:42:10 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of saroja.kanta.maharana@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Feb 2007 03:42:00 -0800
Received: by nf-out-0910.google.com with SMTP id i2so203330nfe
        for <java-user@lucene.apache.org>; Tue, 13 Feb 2007 03:41:39 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=jVkVhhevcwkR5NqrpeFHnjtPeaG0jrdHSMCt/uuGu008cx0rB7Xf4sKLsRKmQu6wfe+Lt8LFdq0NMcR6teG/mRo25HhjE9Xlwygjfo6xAJDhciYcojr6mL8FejVXRc39+8IcvnPG/Hbn6p2RDdI2ZZVXXSRDZpubzrCqnmtkGoM=
Received: by 10.82.163.13 with SMTP id l13mr11128334bue.1171366898865;
        Tue, 13 Feb 2007 03:41:38 -0800 (PST)
Received: by 10.82.122.15 with HTTP; Tue, 13 Feb 2007 03:41:38 -0800 (PST)
Message-ID: <ab6fb9950702130341k161399b7k380d3b1de4bd4ab5@mail.gmail.com>
Date: Tue, 13 Feb 2007 17:11:38 +0530
From: "Saroja Kanta Maharana" <saroja.kanta.maharana@gmail.com>
To: java-user@lucene.apache.org
Subject: Please Help me
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_37960_24898476.1171366898733"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_37960_24898476.1171366898733
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All,

"When i searched for "AND", "OR", "NOT" as query, it gives me the following
Exception"

Exception in thread "main" org.apache.lucene.queryParser.ParseException:
Encountered "<EOF>" at line 1, column 3.
Was expecting one of:
    "(" ...
    <QUOTED> ...
    <TERM> ...
    <PREFIXTERM> ...
    <WILDTERM> ...
    "[" ...
    "{" ...
    <NUMBER> ...

        at org.apache.lucene.queryParser.QueryParser.generateParseException(
QueryParser.java:1226)
        at org.apache.lucene.queryParser.QueryParser.jj_consume_token(
QueryParser.java:1109)
        at org.apache.lucene.queryParser.QueryParser.Clause(QueryParser.java
:759)
        at org.apache.lucene.queryParser.QueryParser.Query (QueryParser.java
:684)
        at org.apache.lucene.queryParser.QueryParser.parse(QueryParser.java
:122)
        at org.interworld.com.src.ProductSearch.main(ProductSearch.java:54)
Java Result: 1

Is there any way to resolve this exception.


*Regards*
*Saroj*

------=_Part_37960_24898476.1171366898733--

From java-user-return-26100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 13 12:00:00 2007
Return-Path: <java-user-return-26100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35164 invoked from network); 13 Feb 2007 11:59:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2007 11:59:59 -0000
Received: (qmail 44909 invoked by uid 500); 13 Feb 2007 12:00:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44879 invoked by uid 500); 13 Feb 2007 12:00:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44866 invoked by uid 99); 13 Feb 2007 12:00:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Feb 2007 04:00:00 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 217.79.216.190 as permitted sender)
Received: from [217.79.216.190] (HELO cluster-e.mailcontrol.com) (217.79.216.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Feb 2007 03:59:46 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly34e.srv.mailcontrol.com (MailControl) with SMTP id l1DBxNEl004205
	for <java-user@lucene.apache.org>; Tue, 13 Feb 2007 11:59:23 GMT
Received: From SGBD012104.wsatkins.com ([10.202.26.18]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 1171367938781; Tue, 13 Feb 2007 11:58:58 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012104.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 13 Feb 2007 11:58:58 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Please Help me
Date: Tue, 13 Feb 2007 11:58:57 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705C917BE@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Please Help me
Thread-Index: AcdPZAUnUOIOytwmSZO2LNmKV4RfiAAAfZkg
References: <ab6fb9950702130341k161399b7k380d3b1de4bd4ab5@mail.gmail.com>
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 13 Feb 2007 11:58:58.0683 (UTC) FILETIME=[581BE4B0:01C74F66]
X-Scanned-By: MailControl A-06-00-00 (www.mailcontrol.com) on 10.69.0.144
X-Virus-Checked: Checked by ClamAV on apache.org

I believe that this happens because "AND", "OR" and "NOT" are all
reserved words for joining together other search terms and therefore if
you don't want the exception thrown then you must capture any "AND",
"OR" and "NOT"s that are entered on their own and not pass them to the
QueryParser.=20

-----Original Message-----
From: Saroja Kanta Maharana [mailto:saroja.kanta.maharana@gmail.com]=20
Sent: 13 February 2007 11:42
To: java-user@lucene.apache.org
Subject: Please Help me

Hi All,

"When i searched for "AND", "OR", "NOT" as query, it gives me the
following Exception"

Exception in thread "main" org.apache.lucene.queryParser.ParseException:
Encountered "<EOF>" at line 1, column 3.
Was expecting one of:
    "(" ...
    <QUOTED> ...
    <TERM> ...
    <PREFIXTERM> ...
    <WILDTERM> ...
    "[" ...
    "{" ...
    <NUMBER> ...

        at
org.apache.lucene.queryParser.QueryParser.generateParseException(
QueryParser.java:1226)
        at org.apache.lucene.queryParser.QueryParser.jj_consume_token(
QueryParser.java:1109)
        at
org.apache.lucene.queryParser.QueryParser.Clause(QueryParser.java
:759)
        at org.apache.lucene.queryParser.QueryParser.Query
(QueryParser.java
:684)
        at
org.apache.lucene.queryParser.QueryParser.parse(QueryParser.java
:122)
        at
org.interworld.com.src.ProductSearch.main(ProductSearch.java:54)
Java Result: 1

Is there any way to resolve this exception.


*Regards*
*Saroj*


This message has been scanned for viruses by MailControl - (see
http://bluepages.wsatkins.co.uk/?4318150)


This email and any attached files are confidential and copyright protected.=
 If you are not the addressee, any dissemination of this communication is s=
trictly prohibited. Unless otherwise expressly agreed in writing, nothing s=
tated in this communication shall be legally binding.

The ultimate parent company of the Atkins Group is WS Atkins plc.  Register=
ed in England No. 1885586.  Registered Office Woodcote Grove, Ashley Road, =
Epsom, Surrey KT18 5BW.

Consider the environment. Please don't print this e-mail unless you really =
need to.=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 13 12:03:05 2007
Return-Path: <java-user-return-26101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36379 invoked from network); 13 Feb 2007 12:03:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2007 12:03:04 -0000
Received: (qmail 52693 invoked by uid 500); 13 Feb 2007 12:03:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52664 invoked by uid 500); 13 Feb 2007 12:03:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52653 invoked by uid 99); 13 Feb 2007 12:03:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Feb 2007 04:03:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Feb 2007 04:02:53 -0800
Received: by nf-out-0910.google.com with SMTP id i2so208748nfe
        for <java-user@lucene.apache.org>; Tue, 13 Feb 2007 04:02:32 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=pAR3FHyAN4xgwImfteu312hxzM8wyiHdWYMEL9WZPziuREVeoW7eCdF1JVYiJgdv6Ap9WecEZhWY6XmZMbvrYwmBPLW2/Js6tUWDTnNn0ljYnTeobIbsLfaxotFlYi3e9fm//tfTrLAR343jB74y8ZlN8FX6qvqNM9dJuCpctA0=
Received: by 10.82.107.15 with SMTP id f15mr13085327buc.1171368151196;
        Tue, 13 Feb 2007 04:02:31 -0800 (PST)
Received: from ?192.168.1.3? ( [83.249.110.75])
        by mx.google.com with ESMTP id m16sm2363269nfc.2007.02.13.04.02.30;
        Tue, 13 Feb 2007 04:02:30 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <ab6fb9950702130341k161399b7k380d3b1de4bd4ab5@mail.gmail.com>
References: <ab6fb9950702130341k161399b7k380d3b1de4bd4ab5@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <48258248-739B-4409-A3D1-8F8ED66C4B57@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Please Help me
Date: Tue, 13 Feb 2007 13:01:10 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


13 feb 2007 kl. 12.41 skrev Saroja Kanta Maharana:

> "When i searched for "AND", "OR", "NOT" as query, it gives me the  
> following
> Exception"
>
> Exception in thread "main"  
> org.apache.lucene.queryParser.ParseException:
> Encountered "<EOF>" at line 1, column 3.

You tried to parse the string "OR" as a query. AND, OR and NOT are  
treated as boolean operators by the query parser, and a query that  
match the operator is expected.

<http://lucene.apache.org/java/docs/queryparsersyntax.html>:

Boolean operators allow terms to be combined through logic operators.  
Lucene supports AND, "+", OR, NOT and "-" as Boolean operators(Note:  
Boolean operators must be ALL CAPS).

If your index is case sensitive, what if you type "OR" (with quotes)  
instead?
If you index is not case sensitve, use "or" (without quotes) instead.


-- 
karl



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 13 13:45:31 2007
Return-Path: <java-user-return-26102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64503 invoked from network); 13 Feb 2007 13:45:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2007 13:45:30 -0000
Received: (qmail 17908 invoked by uid 500); 13 Feb 2007 13:45:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17872 invoked by uid 500); 13 Feb 2007 13:45:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17859 invoked by uid 99); 13 Feb 2007 13:45:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Feb 2007 05:45:29 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of saroja.kanta.maharana@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Feb 2007 05:45:20 -0800
Received: by nf-out-0910.google.com with SMTP id d4so274873nfe
        for <java-user@lucene.apache.org>; Tue, 13 Feb 2007 05:44:59 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=nSPnXM4lBY5z30Yyynb/E7WlC1ZWPFYHBFHeyEsZChPz/k/9kYbXF55Ue6NVpnEpMv6DgsJ1CA0L/+h6TWvRxgjBxDWaBmLWZzXh2SXMS5lG57ZXfiYYMvY6EFkC66c1dJ0ATroYwHfMPc0TvdUohcsjdPraU4XXQpSc2rSUJ7g=
Received: by 10.82.160.2 with SMTP id i2mr11188608bue.1171374298494;
        Tue, 13 Feb 2007 05:44:58 -0800 (PST)
Received: by 10.82.122.15 with HTTP; Tue, 13 Feb 2007 05:44:58 -0800 (PST)
Message-ID: <ab6fb9950702130544o330cd48j51dd9340019da353@mail.gmail.com>
Date: Tue, 13 Feb 2007 19:14:58 +0530
From: "Saroja Kanta Maharana" <saroja.kanta.maharana@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Please Help me
In-Reply-To: <48258248-739B-4409-A3D1-8F8ED66C4B57@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_38397_17985080.1171374298464"
References: <ab6fb9950702130341k161399b7k380d3b1de4bd4ab5@mail.gmail.com>
	 <48258248-739B-4409-A3D1-8F8ED66C4B57@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_38397_17985080.1171374298464
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All,

     Any one help to implements synonyms search in lucene.


*Regards*
*Saroj*








On 2/13/07, karl wettin <karl.wettin@gmail.com> wrote:
>
>
> 13 feb 2007 kl. 12.41 skrev Saroja Kanta Maharana:
>
> > "When i searched for "AND", "OR", "NOT" as query, it gives me the
> > following
> > Exception"
> >
> > Exception in thread "main"
> > org.apache.lucene.queryParser.ParseException:
> > Encountered "<EOF>" at line 1, column 3.
>
> You tried to parse the string "OR" as a query. AND, OR and NOT are
> treated as boolean operators by the query parser, and a query that
> match the operator is expected.
>
> <http://lucene.apache.org/java/docs/queryparsersyntax.html>:
>
> Boolean operators allow terms to be combined through logic operators.
> Lucene supports AND, "+", OR, NOT and "-" as Boolean operators(Note:
> Boolean operators must be ALL CAPS).
>
> If your index is case sensitive, what if you type "OR" (with quotes)
> instead?
> If you index is not case sensitve, use "or" (without quotes) instead.
>
>
> --
> karl
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards
Saroja kanta Maharana
+919886750538

------=_Part_38397_17985080.1171374298464--

From java-user-return-26103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 13 13:48:34 2007
Return-Path: <java-user-return-26103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65282 invoked from network); 13 Feb 2007 13:48:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2007 13:48:33 -0000
Received: (qmail 21085 invoked by uid 500); 13 Feb 2007 13:48:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21050 invoked by uid 500); 13 Feb 2007 13:48:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21039 invoked by uid 99); 13 Feb 2007 13:48:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Feb 2007 05:48:32 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 86.111.223.190 as permitted sender)
Received: from [86.111.223.190] (HELO cluster-j.mailcontrol.com) (86.111.223.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Feb 2007 05:48:18 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly16j.srv.mailcontrol.com (MailControl) with SMTP id l1DDlquh019414
	for <java-user@lucene.apache.org>; Tue, 13 Feb 2007 13:47:52 GMT
Received: From SGBD012103.wsatkins.com ([10.202.26.17]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 1171374455370; Tue, 13 Feb 2007 13:47:35 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012103.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 13 Feb 2007 13:47:34 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Please Help me
Date: Tue, 13 Feb 2007 13:47:34 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705C91B19@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Please Help me
Thread-Index: AcdPdU1Otg0qughVTQiNI2VGdAO9sQAAB3Bw
References: <ab6fb9950702130341k161399b7k380d3b1de4bd4ab5@mail.gmail.com> <48258248-739B-4409-A3D1-8F8ED66C4B57@gmail.com> <ab6fb9950702130544o330cd48j51dd9340019da353@mail.gmail.com>
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 13 Feb 2007 13:47:34.0933 (UTC) FILETIME=[8418BC50:01C74F75]
X-Scanned-By: MailControl A-06-00-00 (www.mailcontrol.com) on 10.74.0.126
X-Virus-Checked: Checked by ClamAV on apache.org

I have a similar request.  Does anyone know if Lucene is capable of
implementing polyheirarchical taxonomies?=20

-----Original Message-----
From: Saroja Kanta Maharana [mailto:saroja.kanta.maharana@gmail.com]=20
Sent: 13 February 2007 13:45
To: java-user@lucene.apache.org
Subject: Re: Please Help me

Hi All,

     Any one help to implements synonyms search in lucene.


*Regards*
*Saroj*








On 2/13/07, karl wettin <karl.wettin@gmail.com> wrote:
>
>
> 13 feb 2007 kl. 12.41 skrev Saroja Kanta Maharana:
>
> > "When i searched for "AND", "OR", "NOT" as query, it gives me the=20
> > following Exception"
> >
> > Exception in thread "main"
> > org.apache.lucene.queryParser.ParseException:
> > Encountered "<EOF>" at line 1, column 3.
>
> You tried to parse the string "OR" as a query. AND, OR and NOT are=20
> treated as boolean operators by the query parser, and a query that=20
> match the operator is expected.
>
> <http://lucene.apache.org/java/docs/queryparsersyntax.html>:
>
> Boolean operators allow terms to be combined through logic operators.
> Lucene supports AND, "+", OR, NOT and "-" as Boolean operators(Note:
> Boolean operators must be ALL CAPS).
>
> If your index is case sensitive, what if you type "OR" (with quotes)=20
> instead?
> If you index is not case sensitve, use "or" (without quotes) instead.
>
>
> --
> karl
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--
Regards
Saroja kanta Maharana
+919886750538


This message has been scanned for viruses by MailControl - (see
http://bluepages.wsatkins.co.uk/?4318150)


This email and any attached files are confidential and copyright protected.=
 If you are not the addressee, any dissemination of this communication is s=
trictly prohibited. Unless otherwise expressly agreed in writing, nothing s=
tated in this communication shall be legally binding.

The ultimate parent company of the Atkins Group is WS Atkins plc.  Register=
ed in England No. 1885586.  Registered Office Woodcote Grove, Ashley Road, =
Epsom, Surrey KT18 5BW.

Consider the environment. Please don't print this e-mail unless you really =
need to.=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 13 13:52:28 2007
Return-Path: <java-user-return-26104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65997 invoked from network); 13 Feb 2007 13:52:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2007 13:52:27 -0000
Received: (qmail 26211 invoked by uid 500); 13 Feb 2007 13:52:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25796 invoked by uid 500); 13 Feb 2007 13:52:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25784 invoked by uid 99); 13 Feb 2007 13:52:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Feb 2007 05:52:28 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Feb 2007 05:52:17 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 137AC30EFC19; Tue, 13 Feb 2007 08:51:54 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 929A230EFC17
	for <java-user@lucene.apache.org>; Tue, 13 Feb 2007 08:51:50 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705C91B19@SGBLOW2101.wsatkins.com>
References: <ab6fb9950702130341k161399b7k380d3b1de4bd4ab5@mail.gmail.com> <48258248-739B-4409-A3D1-8F8ED66C4B57@gmail.com> <ab6fb9950702130544o330cd48j51dd9340019da353@mail.gmail.com> <BC1CFC544422CB4A934908E126A4742705C91B19@SGBLOW2101.wsatkins.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <250820D2-20BA-454D-A9BF-E44C028EB370@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Please Help me
Date: Tue, 13 Feb 2007 08:51:48 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1

There are examples of both synonym handling and hierarchical folder- 
like handling using Lucene in "Lucene in Action".  The code is  
available from <http://www.lucenebook.com>, as well as couple of  
sample chapters.

The material there would be a good starting point for future  
discussions.

	Erik


On Feb 13, 2007, at 8:47 AM, Kainth, Sachin wrote:

> I have a similar request.  Does anyone know if Lucene is capable of
> implementing polyheirarchical taxonomies?
>
> -----Original Message-----
> From: Saroja Kanta Maharana [mailto:saroja.kanta.maharana@gmail.com]
> Sent: 13 February 2007 13:45
> To: java-user@lucene.apache.org
> Subject: Re: Please Help me
>
> Hi All,
>
>      Any one help to implements synonyms search in lucene.
>
>
> *Regards*
> *Saroj*
>
>
>
>
>
>
>
>
> On 2/13/07, karl wettin <karl.wettin@gmail.com> wrote:
>>
>>
>> 13 feb 2007 kl. 12.41 skrev Saroja Kanta Maharana:
>>
>>> "When i searched for "AND", "OR", "NOT" as query, it gives me the
>>> following Exception"
>>>
>>> Exception in thread "main"
>>> org.apache.lucene.queryParser.ParseException:
>>> Encountered "<EOF>" at line 1, column 3.
>>
>> You tried to parse the string "OR" as a query. AND, OR and NOT are
>> treated as boolean operators by the query parser, and a query that
>> match the operator is expected.
>>
>> <http://lucene.apache.org/java/docs/queryparsersyntax.html>:
>>
>> Boolean operators allow terms to be combined through logic operators.
>> Lucene supports AND, "+", OR, NOT and "-" as Boolean operators(Note:
>> Boolean operators must be ALL CAPS).
>>
>> If your index is case sensitive, what if you type "OR" (with quotes)
>> instead?
>> If you index is not case sensitve, use "or" (without quotes) instead.
>>
>>
>> --
>> karl
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --
> Regards
> Saroja kanta Maharana
> +919886750538
>
>
> This message has been scanned for viruses by MailControl - (see
> http://bluepages.wsatkins.co.uk/?4318150)
>
>
> This email and any attached files are confidential and copyright  
> protected. If you are not the addressee, any dissemination of this  
> communication is strictly prohibited. Unless otherwise expressly  
> agreed in writing, nothing stated in this communication shall be  
> legally binding.
>
> The ultimate parent company of the Atkins Group is WS Atkins plc.   
> Registered in England No. 1885586.  Registered Office Woodcote  
> Grove, Ashley Road, Epsom, Surrey KT18 5BW.
>
> Consider the environment. Please don't print this e-mail unless you  
> really need to.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 13 13:58:41 2007
Return-Path: <java-user-return-26105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67028 invoked from network); 13 Feb 2007 13:58:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2007 13:58:40 -0000
Received: (qmail 33451 invoked by uid 500); 13 Feb 2007 13:58:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33209 invoked by uid 500); 13 Feb 2007 13:58:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33198 invoked by uid 99); 13 Feb 2007 13:58:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Feb 2007 05:58:41 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of michael.wechner@wyona.com designates 195.226.6.68 as permitted sender)
Received: from [195.226.6.68] (HELO mx1.wyona.com) (195.226.6.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Feb 2007 05:58:30 -0800
Received: from [195.226.6.66] (helo=[192.168.1.70])
	by mx1.wyona.com with asmtp (Exim 3.35 #1 (Debian))
	id 1HGyAZ-0003uC-00
	for <java-user@lucene.apache.org>; Tue, 13 Feb 2007 14:58:07 +0100
Message-ID: <45D1C3E4.9020102@wyona.com>
Date: Tue, 13 Feb 2007 14:57:56 +0100
From: Michael Wechner <michael.wechner@wyona.com>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.12) Gecko/20050920
X-Accept-Language: en, de, en-us, fr-ch
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Please Help me
References: <ab6fb9950702130341k161399b7k380d3b1de4bd4ab5@mail.gmail.com>	 <48258248-739B-4409-A3D1-8F8ED66C4B57@gmail.com> <ab6fb9950702130544o330cd48j51dd9340019da353@mail.gmail.com>
In-Reply-To: <ab6fb9950702130544o330cd48j51dd9340019da353@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Saroja Kanta Maharana wrote:

> Hi All,
>
>     Any one help to implements synonyms search in lucene.
>

you might want to take a look at the ontology module within nutch.

HTH

Michael

>
> *Regards*
> *Saroj*
>
>
>
>
>
>
>
>
> On 2/13/07, karl wettin <karl.wettin@gmail.com> wrote:
>
>>
>>
>> 13 feb 2007 kl. 12.41 skrev Saroja Kanta Maharana:
>>
>> > "When i searched for "AND", "OR", "NOT" as query, it gives me the
>> > following
>> > Exception"
>> >
>> > Exception in thread "main"
>> > org.apache.lucene.queryParser.ParseException:
>> > Encountered "<EOF>" at line 1, column 3.
>>
>> You tried to parse the string "OR" as a query. AND, OR and NOT are
>> treated as boolean operators by the query parser, and a query that
>> match the operator is expected.
>>
>> <http://lucene.apache.org/java/docs/queryparsersyntax.html>:
>>
>> Boolean operators allow terms to be combined through logic operators.
>> Lucene supports AND, "+", OR, NOT and "-" as Boolean operators(Note:
>> Boolean operators must be ALL CAPS).
>>
>> If your index is case sensitive, what if you type "OR" (with quotes)
>> instead?
>> If you index is not case sensitve, use "or" (without quotes) instead.
>>
>>
>> -- 
>> karl
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>


-- 
Michael Wechner
Wyona      -   Open Source Content Management   -    Apache Lenya
http://www.wyona.com                      http://lenya.apache.org
michael.wechner@wyona.com                        michi@apache.org
+41 44 272 91 61


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 13 15:19:23 2007
Return-Path: <java-user-return-26106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4324 invoked from network); 13 Feb 2007 15:19:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2007 15:19:23 -0000
Received: (qmail 24177 invoked by uid 500); 13 Feb 2007 15:19:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24138 invoked by uid 500); 13 Feb 2007 15:19:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24115 invoked by uid 99); 13 Feb 2007 15:19:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Feb 2007 07:19:23 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Feb 2007 07:19:13 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1871385ugc
        for <java-user@lucene.apache.org>; Tue, 13 Feb 2007 07:18:45 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=CVnHYxTYVIqvBAUQVKCPHx/66I7sJaQqxWADfMsg5QL8JA8oBRyBOSvcrl4x8zEicNgKt0rJhUhIdcWVFz6iv39kD0dLw9OtUwEOw0iWwybaQwcgmJjpUNBG68JkTLcxK7ezR7JFgpoMq2TTK8LmEzlmjaJx8whzswnHUshOZjw=
Received: by 10.82.107.15 with SMTP id f15mr13467702buc.1171379924909;
        Tue, 13 Feb 2007 07:18:44 -0800 (PST)
Received: by 10.82.135.7 with HTTP; Tue, 13 Feb 2007 07:18:39 -0800 (PST)
Message-ID: <ab0709bf0702130718p2405536flc39ad676179ff361@mail.gmail.com>
Date: Tue, 13 Feb 2007 10:18:39 -0500
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Please Help me
In-Reply-To: <45D1C3E4.9020102@wyona.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_96062_11133077.1171379919864"
References: <ab6fb9950702130341k161399b7k380d3b1de4bd4ab5@mail.gmail.com>
	 <48258248-739B-4409-A3D1-8F8ED66C4B57@gmail.com>
	 <ab6fb9950702130544o330cd48j51dd9340019da353@mail.gmail.com>
	 <45D1C3E4.9020102@wyona.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_96062_11133077.1171379919864
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The test code in the Highlighter contrib also has some synonym code.

On 2/13/07, Michael Wechner <michael.wechner@wyona.com> wrote:
>
> Saroja Kanta Maharana wrote:
>
> > Hi All,
> >
> >     Any one help to implements synonyms search in lucene.
> >
>
> you might want to take a look at the ontology module within nutch.
>
> HTH
>
> Michael
>
> >
> > *Regards*
> > *Saroj*
> >
> >
> >
> >
> >
> >
> >
> >
> > On 2/13/07, karl wettin <karl.wettin@gmail.com> wrote:
> >
> >>
> >>
> >> 13 feb 2007 kl. 12.41 skrev Saroja Kanta Maharana:
> >>
> >> > "When i searched for "AND", "OR", "NOT" as query, it gives me the
> >> > following
> >> > Exception"
> >> >
> >> > Exception in thread "main"
> >> > org.apache.lucene.queryParser.ParseException:
> >> > Encountered "<EOF>" at line 1, column 3.
> >>
> >> You tried to parse the string "OR" as a query. AND, OR and NOT are
> >> treated as boolean operators by the query parser, and a query that
> >> match the operator is expected.
> >>
> >> <http://lucene.apache.org/java/docs/queryparsersyntax.html>:
> >>
> >> Boolean operators allow terms to be combined through logic operators.
> >> Lucene supports AND, "+", OR, NOT and "-" as Boolean operators(Note:
> >> Boolean operators must be ALL CAPS).
> >>
> >> If your index is case sensitive, what if you type "OR" (with quotes)
> >> instead?
> >> If you index is not case sensitve, use "or" (without quotes) instead.
> >>
> >>
> >> --
> >> karl
> >>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
>
>
> --
> Michael Wechner
> Wyona      -   Open Source Content Management   -    Apache Lenya
> http://www.wyona.com                      http://lenya.apache.org
> michael.wechner@wyona.com                        michi@apache.org
> +41 44 272 91 61
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_96062_11133077.1171379919864--

From java-user-return-26107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 13 17:51:19 2007
Return-Path: <java-user-return-26107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71264 invoked from network); 13 Feb 2007 17:51:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2007 17:51:18 -0000
Received: (qmail 83456 invoked by uid 500); 13 Feb 2007 17:51:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83433 invoked by uid 500); 13 Feb 2007 17:51:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83422 invoked by uid 99); 13 Feb 2007 17:51:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Feb 2007 09:51:18 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Feb 2007 09:51:06 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HH1ni-0007pZ-5k
	for java-user@lucene.apache.org; Tue, 13 Feb 2007 09:50:46 -0800
Message-ID: <8949366.post@talk.nabble.com>
Date: Tue, 13 Feb 2007 09:50:46 -0800 (PST)
From: sdeck <scott.decker@gmail.com>
To: java-user@lucene.apache.org
Subject: similarity and delete duplicates
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: scott.decker@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hey everyone.
 I have been trying to get a certain kind of delete duplicates working, but
I need a little help.

Here is my problem.
I have many documents, that after a web crawl, many different sites could
have documents that have similar titles. I want to remove all of those
documents except for 1.
So, I could have a list of titles like this
1) George the Monkey won the bowl
2) The bowl was won by George the Monkey
3) Bowl won by George the Monkey

So, the way I do things now, I generate a query like this
+title:George +title:Monkey +title:Bowl +title:won +title:the

and then do a search. It will then pull back documents.
Now, my first, bad, way of deleting the dupes was to check for scores > some
number and then delete them. However, as my index/crawler(nucth) kept
generating, and I kept merging indexes, the scores kept on getting weirdly
different.

So, I found this forum item on similarity:
http://www.nabble.com/Overriding-Similarity-tf2128934.html#a5875307

and wanted to know if that was a good way of finding these duplicate title
matches. Or, if someone else had a good idea on how to find them?  Now, the
titles are not going to be exact, but fairly similar.

Thanks for your help,
Scott



-- 
View this message in context: http://www.nabble.com/similarity-and-delete-duplicates-tf3222213.html#a8949366
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 13 18:48:32 2007
Return-Path: <java-user-return-26108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94498 invoked from network); 13 Feb 2007 18:48:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2007 18:48:31 -0000
Received: (qmail 25913 invoked by uid 500); 13 Feb 2007 18:48:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25888 invoked by uid 500); 13 Feb 2007 18:48:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25877 invoked by uid 99); 13 Feb 2007 18:48:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Feb 2007 10:48:32 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=FROM_HAS_ULINE_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.49.251] (HELO web52019.mail.yahoo.com) (206.190.49.251)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 13 Feb 2007 10:48:21 -0800
Received: (qmail 99445 invoked by uid 60001); 13 Feb 2007 18:47:59 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=2LEt/z3D79SUeBxPNJTPioW9zRlZVGdg9gUe7IgJjMOFmGEgdJJckQesQtxi/fNbBeK8kPrQMPIoRYXG+nYPRdNjx5YLxuWAtrLIVLe793NI3Rf3wnwD5UIYECVQFhyRcUf1wQ6xZ0PEPwH8iUFSp3yUhWMpS7mB7Nht8MdlcBE=  ;
Message-ID: <20070213184759.99443.qmail@web52019.mail.yahoo.com>
X-YMail-OSG: Pv_p6bQVM1llIrSz.SicozoCtgn4ifmfe9FzJ85aAof.EmUnivYO8eXT7svUBXw9lGbyG9yMYIHhulauyR4kojwLP6NZMXcv514xGEVJsqYubiy7cbCnI.ZV0Gitv1Xg1xLTQ3Ii0Yf12P8-
Received: from [12.162.3.126] by web52019.mail.yahoo.com via HTTP; Tue, 13 Feb 2007 10:47:59 PST
Date: Tue, 13 Feb 2007 10:47:59 -0800 (PST)
From: Rajesh parab <rajesh_parab_1@yahoo.com>
Subject: Double Quotes and TermQuery
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Everyone,

I understand that QueryParser allows searches using
double quote characters.

I was wondering if the double quote will also work
with TermQuery.

I am not using QueryParser in my application and
constructing queries (TermQuery, RangeQuery,
BooleanQuery, etc.) explicitly. But, it looks like
double quotes are not working with TermQuery.

For example:
query = new TermQuery(new Term("location", "\"san
mateo\""))

Any help/pointers will be much appreciated.

Regards,
Rajesh


 
____________________________________________________________________________________
Finding fabulous fares is fun.  
Let Yahoo! FareChase search your favorite travel sites to find flight and hotel bargains.
http://farechase.yahoo.com/promo-generic-14795097

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 13 19:03:25 2007
Return-Path: <java-user-return-26109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98182 invoked from network); 13 Feb 2007 19:03:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2007 19:03:24 -0000
Received: (qmail 54558 invoked by uid 500); 13 Feb 2007 19:03:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54534 invoked by uid 500); 13 Feb 2007 19:03:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54523 invoked by uid 99); 13 Feb 2007 19:03:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Feb 2007 11:03:22 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 64.233.184.231 as permitted sender)
Received: from [64.233.184.231] (HELO wr-out-0506.google.com) (64.233.184.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Feb 2007 11:03:11 -0800
Received: by wr-out-0506.google.com with SMTP id 55so2546591wri
        for <java-user@lucene.apache.org>; Tue, 13 Feb 2007 11:02:48 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=E4Wllf//Nj4mcOBQCrXwc15NSPD9EoWt4PYshQOJrQ7AlGklhqBbjJ5STo3YqjjUe5y5+r/WQqWLhFDiDAdzfYYK+Kv3Vno+nbjz+LrDlrHxpcwetKIzSAU9v2Fu8WbJ101uSKkf3udJ6I8Sb5X3bl8lPq07rcfDibNHlZisnw0=
Received: by 10.90.52.18 with SMTP id z18mr19713976agz.1171393368636;
        Tue, 13 Feb 2007 11:02:48 -0800 (PST)
Received: from ?192.168.1.3? ( [83.249.110.75])
        by mx.google.com with ESMTP id q40sm12511073ugc.2007.02.13.11.02.35;
        Tue, 13 Feb 2007 11:02:47 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <20070213184759.99443.qmail@web52019.mail.yahoo.com>
References: <20070213184759.99443.qmail@web52019.mail.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <60A7FECF-FD0B-4D80-A445-EC432AA4B1E3@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Double Quotes and TermQuery
Date: Tue, 13 Feb 2007 19:54:38 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


13 feb 2007 kl. 19.47 skrev Rajesh parab:

> I am not using QueryParser in my application and
> constructing queries (TermQuery, RangeQuery,
> BooleanQuery, etc.) explicitly. But, it looks like
> double quotes are not working with TermQuery.
>
> For example:
> query = new TermQuery(new Term("location", "\"san
> mateo\""))
>
> Any help/pointers will be much appreciated.

Is it perhaps PhraseQuery or SpanNearQuery you are looking for?

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 13 22:59:01 2007
Return-Path: <java-user-return-26110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9112 invoked from network); 13 Feb 2007 22:59:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2007 22:59:00 -0000
Received: (qmail 79736 invoked by uid 500); 13 Feb 2007 22:58:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79706 invoked by uid 500); 13 Feb 2007 22:58:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79692 invoked by uid 99); 13 Feb 2007 22:58:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Feb 2007 14:58:48 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [128.218.33.11] (HELO gossamer.ckm.ucsf.edu) (128.218.33.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Feb 2007 14:58:36 -0800
Received: from CKMPC08 (tikal.library.ucsf.edu [128.218.15.151])
	by gossamer.ckm.ucsf.edu (8.13.8/8.13.8) with ESMTP id l1DMwAAu010408
	for <java-user@lucene.apache.org>; Tue, 13 Feb 2007 14:58:15 -0800 (PST)
From: "Renaud Waldura" <renaud.waldura@library.ucsf.edu>
To: <java-user@lucene.apache.org>
Subject: More Precise Highlighting
Date: Tue, 13 Feb 2007 14:58:04 -0800
Message-ID: <009601c74fc2$6edaa0e0$970fda80@libraria.ucsf.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0097_01C74F7F.60B760E0"
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
Thread-Index: AcdPwmtXwxp7MFNVQfiJ98WdYFAS/A==
X-Filter-Version: 1.15 (gossamer)
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0097_01C74F7F.60B760E0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

The old highlighter code used to highlight found terms in any field (too
broad). The new highlighter lets one specify a field when highlighting, but
it highlights that field only (too narrow). 
 
In my case we have an "all" field that is the concatenation of all data
about the document. When I highlight e.g. the "title" field, nothing
happens, because the Highlighter doesn't know the title is included in this
"all" field.
 
How can I tell the highlighter that my query fields can map to some document
fields? It looks like I'd change the QueryTermExtractor, but it's
conveniently all-static and final.
 
--Renaud
 

------=_NextPart_000_0097_01C74F7F.60B760E0--



From java-user-return-26111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 13 23:24:55 2007
Return-Path: <java-user-return-26111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20043 invoked from network); 13 Feb 2007 23:24:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2007 23:24:54 -0000
Received: (qmail 18874 invoked by uid 500); 13 Feb 2007 23:24:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18841 invoked by uid 500); 13 Feb 2007 23:24:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18830 invoked by uid 99); 13 Feb 2007 23:24:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Feb 2007 15:24:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [217.12.11.63] (HELO smtp009.mail.ukl.yahoo.com) (217.12.11.63)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 13 Feb 2007 15:24:44 -0800
Received: (qmail 99947 invoked from network); 13 Feb 2007 23:24:23 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-YMail-OSG:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=yfOGQC9ubq5RRAYe6ukujXfwMV5XrGtRENgdUzQ0Vq3hzdwGEJM/Ts+pDVO2Bjey1t4MCDOxB2bcoVBhR37xtP8tO80ZrGAzMBDl2TE3JR14QDK1+mJvB0TprF7CtBkNPDNGhYFBOMm5790W1QyAVx+9l4yNJck3Wg8cJ1lFVyk=  ;
Received: from unknown (HELO ?127.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp009.mail.ukl.yahoo.com with SMTP; 13 Feb 2007 23:24:22 -0000
X-YMail-OSG: OLT_9F0VM1lks0GtbHjPTTnUH0lDzEsGxPtHqy6HdkBNw2tBvY1qYebY5gcKRmONVTZdEp.w9TWHNvOF5s4ZU5jQb8CHq5O5jwW1ASOh5jj7PhBfOEKxdCCNvXP7buLJM4VEMlQsnfTiZyH3wnZi7xPpGWnhugE_X4M.W7lX99MQ3BGthGyICOjvOA--
Message-ID: <45D248A6.1080803@yahoo.co.uk>
Date: Tue, 13 Feb 2007 23:24:22 +0000
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: More Precise Highlighting
References: <009601c74fc2$6edaa0e0$970fda80@libraria.ucsf.edu>
In-Reply-To: <009601c74fc2$6edaa0e0$970fda80@libraria.ucsf.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Not sure I fully understand the problem. The query is effectively 
"allContent:someTitleText" and you want to highlight the string 
"someTitleText" in the title field?
If you pass null as a fieldname to the QueryTermExtractor it will use 
all term values, regardless of field, as string to highlight.
If you pass a fieldname it will only select highlight term values for 
that field.
If you want, you can use QueryTermExtractor to extract just the 
"allContent" field values and pass a TokenStream for the "title" field 
to the highlighter and it would highlight the appropriate values in the 
title.

Do any of these options work?



Renaud Waldura wrote:
> The old highlighter code used to highlight found terms in any field (too
> broad). The new highlighter lets one specify a field when highlighting, but
> it highlights that field only (too narrow). 
>  
> In my case we have an "all" field that is the concatenation of all data
> about the document. When I highlight e.g. the "title" field, nothing
> happens, because the Highlighter doesn't know the title is included in this
> "all" field.
>  
> How can I tell the highlighter that my query fields can map to some document
> fields? It looks like I'd change the QueryTermExtractor, but it's
> conveniently all-static and final.
>  
> --Renaud
>  
>
>   



	
	
		
___________________________________________________________ 
All new Yahoo! Mail "The new Interface is stunning in its simplicity and ease of use." - PC Magazine 
http://uk.docs.yahoo.com/nowyoucan.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 05:47:36 2007
Return-Path: <java-user-return-26112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32479 invoked from network); 14 Feb 2007 05:47:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 05:47:35 -0000
Received: (qmail 98648 invoked by uid 500); 14 Feb 2007 05:47:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98618 invoked by uid 500); 14 Feb 2007 05:47:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98607 invoked by uid 99); 14 Feb 2007 05:47:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Feb 2007 21:47:35 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Feb 2007 21:47:25 -0800
Received: by nf-out-0910.google.com with SMTP id i2so498319nfe
        for <java-user@lucene.apache.org>; Tue, 13 Feb 2007 21:47:04 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=FXmiTkv/EnWZoNPoDFwNx1VH6nQ0SwBII9YIBBlMMWXNl/0tuLyHNfjMb584IKESlSdKUhaTd2BW9QnNUxnmRVI4hHUodNzhwf8FZVIow2FMsUQ1PqahrgFSpKIVwCIXiYpoq7F8C4FspfzEzN2ZcrJ3P2vRM/LyFWpWMl7yeRQ=
Received: by 10.82.186.5 with SMTP id j5mr13226838buf.1171432023976;
        Tue, 13 Feb 2007 21:47:03 -0800 (PST)
Received: by 10.82.163.2 with HTTP; Tue, 13 Feb 2007 21:46:58 -0800 (PST)
Message-ID: <34b8543c0702132146g76abec8t885ce611a84ccabd@mail.gmail.com>
Date: Wed, 14 Feb 2007 09:16:58 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: encoding question.
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_126058_4619704.1171432018926"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_126058_4619704.1171432018926
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi
I want to index data with utf-8 encoding, so when adding field to a document
I am using the code new String(value.getBytes("utf-8"))
in the other hand, when I am going to search I was using the same snippet
code to convert to utf-8 but it did not work so finally I found somewhere
that had been said to use new String(valueToSearch.getBytes("cp1252"),"UTF8")
and it worked fine but I still has some problem.
first, some characters are weird when I get result from lucene, It seems it
is in cp1252 encoding.
second, if the java environment property "file.encoding" not been cp1252 the
result is completely in incorrect encoding. so I must change this property
using System.setProperty("file.encoding","cp1252")

is lucene neglect my utf-8 encoding and proceed indexing data using cp1252?
how can I correct weird characters I received by searching?

Thank you very much in advance.
-- 
Regards,
Mohammad

------=_Part_126058_4619704.1171432018926--

From java-user-return-26113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 07:39:45 2007
Return-Path: <java-user-return-26113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74442 invoked from network); 14 Feb 2007 07:39:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 07:39:44 -0000
Received: (qmail 12548 invoked by uid 500); 14 Feb 2007 07:39:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12427 invoked by uid 500); 14 Feb 2007 07:39:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12404 invoked by uid 99); 14 Feb 2007 07:39:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Feb 2007 23:39:37 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of gv.ashwin@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Feb 2007 23:39:27 -0800
Received: by nf-out-0910.google.com with SMTP id i2so521644nfe
        for <java-user@lucene.apache.org>; Tue, 13 Feb 2007 23:39:05 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=hcvYOPiBUA3J0DurRs3aNE5ZQIy83MiCylkprIidMbQ5MqWCjd+Hq8cLf+IYTIPm7HVulDtms+WWP8lyMvNQpOE/ZEXcFzXlF9SK4K+jMgJ+s+euOIWbHQuw1hyoc9HYRhN3gfFPaeN1/bWHBIEgMGK/CbawHalLQSTw3MdHVrU=
Received: by 10.82.177.3 with SMTP id z3mr91295bue.1171438745577;
        Tue, 13 Feb 2007 23:39:05 -0800 (PST)
Received: by 10.48.214.19 with HTTP; Tue, 13 Feb 2007 23:39:05 -0800 (PST)
Message-ID: <2b817f360702132339s4cacd0b0l91ab0c0f521eaa0a@mail.gmail.com>
Date: Wed, 14 Feb 2007 13:09:05 +0530
From: "ashwin kumar" <gv.ashwin@gmail.com>
To: java-user@lucene.apache.org
Subject: Fwd: hi sample code
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_76521_410059.1171438745453"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_76521_410059.1171438745453
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hi thanks for your kindest reply.

i just trying to index some text files using lucene-2.0.0

if you can share any sample programs for text file indexing in lucene-2.0.0
it will be allot helpfull for me to understand lucene better.

if u have any sample programs pls send it across to this mail is
gv.ashwin@gmail.com

thanks
regards

ashwin

------=_Part_76521_410059.1171438745453--

From java-user-return-26114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 08:03:50 2007
Return-Path: <java-user-return-26114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79431 invoked from network); 14 Feb 2007 08:03:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 08:03:49 -0000
Received: (qmail 39115 invoked by uid 500); 14 Feb 2007 08:03:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39083 invoked by uid 500); 14 Feb 2007 08:03:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39072 invoked by uid 99); 14 Feb 2007 08:03:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 00:03:47 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_FONT_BIG,HTML_MESSAGE,HTML_TAG_EXIST_TBODY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.89.192.138] (HELO postoffice.aconex.com) (203.89.192.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 00:03:35 -0800
Received: from [192.168.101.2] (CPE-155-143-104-129.vic.bigpond.net.au [155.143.104.129])
	by postoffice.aconex.com (Postfix) with ESMTP id 05320AAC262
	for <java-user@lucene.apache.org>; Wed, 14 Feb 2007 18:47:17 +1100 (EST)
Mime-Version: 1.0 (Apple Message framework v752.2)
To: java-user@lucene.apache.org
Message-Id: <F627D405-7BD5-4721-9E75-121DD503E77C@aconex.com>
Content-Type: multipart/signed; micalg=sha1; boundary=Apple-Mail-45--140540337; protocol="application/pkcs7-signature"
From: Paul Smith <psmith@aconex.com>
Subject: Sorting, RuleBasedCollater, and synchronization bottleneck
Date: Wed, 14 Feb 2007 19:03:07 +1100
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-45--140540337
Content-Type: multipart/alternative;
	boundary=Apple-Mail-44--140540800


--Apple-Mail-44--140540800
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed

Hi ho peoples.

We have an application that is internationalized, and stores data  
from many languages (each project has it's own index, mostly aligned  
with a single language, maybe 2).

Anyway, I've noticed during some thread dumps diagnosing some  
performance issues, that there appears to be a _potential_  
synchronization bottleneck using Locale-based sorting of Strings.  I  
don't think this problem is the root cause of our performance  
problem, but I thought I'd mention it here.  Here's the stack dump of  
a thread waiting:

"http-1001-Processor245" daemon prio=1 tid=0x31434da0 nid=0x3744  
waiting for monitor entry [0x2cd44000..0x2cd45f30]
         at java.text.RuleBasedCollator.compare(RuleBasedCollator.java)
         - waiting to lock <0x6b1e8c68> (a java.text.RuleBasedCollator)
         at org.apache.lucene.search.FieldSortedHitQueue$4.compare 
(FieldSortedHitQueue.java:320)
         at org.apache.lucene.search.FieldSortedHitQueue.lessThan 
(FieldSortedHitQueue.java:114)
         at org.apache.lucene.util.PriorityQueue.upHeap 
(PriorityQueue.java:120)
         at org.apache.lucene.util.PriorityQueue.put 
(PriorityQueue.java:47)
         at org.apache.lucene.util.PriorityQueue.insert 
(PriorityQueue.java:58)
         at org.apache.lucene.search.FieldSortedHitQueue.insert 
(FieldSortedHitQueue.java:90)
         at org.apache.lucene.search.FieldSortedHitQueue.insert 
(FieldSortedHitQueue.java:97)
         at org.apache.lucene.search.TopFieldDocCollector.collect 
(TopFieldDocCollector.java:47)
         at org.apache.lucene.search.BooleanScorer2.score 
(BooleanScorer2.java:291)
         at org.apache.lucene.search.IndexSearcher.search 
(IndexSearcher.java:132)
         at org.apache.lucene.search.IndexSearcher.search 
(IndexSearcher.java:110)
         at com.aconex.index.search.FastLocaleSortIndexSearcher.search 
(FastLocaleSortIndexSearcher.java:90)
.....

In our case we had 12 threads waiting like this, while one thread had  
the lock on the RuleBasedCollator.  Turns out  
RuleBasedCollator's.compare(...) method is synchronized.  I wonder if  
a ThreadLocal based collator would be better here... ?  There doesn't  
appear to be a reason for other threads searching the same index to  
wait on this sort.  Be just as easy to use their own.  (Is  
RuleBasedCollator a "heavy" object memory wise?  Wouldn't have  
thought so, per thread)

Thoughts?


Paul Smith
Engineering Manager

Aconex
The easy way to save time and money on your project

696 Bourke Street, Melbourne,
VIC 3000, Australia
Tel: +61 3 9240 0200  Fax: +61 3 9240 0299
Email: psmith@aconex.com  www.aconex.com

This email and any attachments are intended solely for the addressee.  
The contents may be privileged, confidential and/or subject to  
copyright or other applicable law. No confidentiality or privilege is  
lost by an erroneous transmission. If you have received this e-mail  
in error, please let us know by reply e-mail and delete or destroy  
this mail and all copies. If you are not the intended recipient of  
this message you must not disseminate, copy or take any action in  
reliance on it. The sender takes no responsibility for the effect of  
this message upon the recipient's computer system.




--Apple-Mail-44--140540800
Content-Transfer-Encoding: quoted-printable
Content-Type: text/html;
	charset=ISO-8859-1

<HTML><BODY style=3D"word-wrap: break-word; -khtml-nbsp-mode: space; =
-khtml-line-break: after-white-space; ">Hi ho peoples.<DIV><BR =
class=3D"khtml-block-placeholder"></DIV><DIV>We have an application that =
is internationalized, and stores data from many languages (each project =
has it's own index, mostly aligned with a single language, maybe =
2).</DIV><DIV><BR class=3D"khtml-block-placeholder"></DIV><DIV>Anyway, =
I've noticed during some thread dumps diagnosing some performance =
issues, that there appears to be a _potential_ synchronization =
bottleneck using Locale-based sorting of Strings.=A0 I don't think this =
problem is the root cause of our performance problem, but I thought I'd =
mention it here.=A0 Here's the stack dump of a thread =
waiting:</DIV><DIV><BR =
class=3D"khtml-block-placeholder"></DIV><DIV>"http-1001-Processor245" =
daemon prio=3D1 tid=3D0x31434da0 nid=3D0x3744 waiting for monitor entry =
[0x2cd44000..0x2cd45f30]</DIV><DIV>=A0 =A0 =A0 =A0 at =
java.text.RuleBasedCollator.compare(RuleBasedCollator.java)</DIV><DIV>=A0 =
=A0 =A0 =A0 - waiting to lock &lt;0x6b1e8c68&gt; (a =
java.text.RuleBasedCollator)</DIV><DIV>=A0 =A0 =A0 =A0 at =
org.apache.lucene.search.FieldSortedHitQueue$4.compare(FieldSortedHitQueue=
.java:320)</DIV><DIV>=A0 =A0 =A0 =A0 at =
org.apache.lucene.search.FieldSortedHitQueue.lessThan(FieldSortedHitQueue.=
java:114)</DIV><DIV>=A0 =A0 =A0 =A0 at =
org.apache.lucene.util.PriorityQueue.upHeap(PriorityQueue.java:120)</DIV><=
DIV>=A0 =A0 =A0 =A0 at =
org.apache.lucene.util.PriorityQueue.put(PriorityQueue.java:47)</DIV><DIV>=
=A0 =A0 =A0 =A0 at =
org.apache.lucene.util.PriorityQueue.insert(PriorityQueue.java:58)</DIV><D=
IV>=A0 =A0 =A0 =A0 at =
org.apache.lucene.search.FieldSortedHitQueue.insert(FieldSortedHitQueue.ja=
va:90)</DIV><DIV>=A0 =A0 =A0 =A0 at =
org.apache.lucene.search.FieldSortedHitQueue.insert(FieldSortedHitQueue.ja=
va:97)</DIV><DIV>=A0 =A0 =A0 =A0 at =
org.apache.lucene.search.TopFieldDocCollector.collect(TopFieldDocCollector=
.java:47)</DIV><DIV>=A0 =A0 =A0 =A0 at =
org.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java:291)</DI=
V><DIV>=A0 =A0 =A0 =A0 at =
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:132)</DIV=
><DIV>=A0 =A0 =A0 =A0 at =
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:110)</DIV=
><DIV>=A0 =A0 =A0 =A0 at =
com.aconex.index.search.FastLocaleSortIndexSearcher.search(FastLocaleSortI=
ndexSearcher.java:90)</DIV><DIV>.....</DIV><DIV><BR =
class=3D"khtml-block-placeholder"></DIV><DIV>In our case we had 12 =
threads waiting like this, while one thread had the lock on the =
RuleBasedCollator.=A0 Turns out RuleBasedCollator's.compare(...) method =
is synchronized.=A0 I wonder if a ThreadLocal based collator would be =
better here... ?=A0 There doesn't appear to be a reason for other =
threads searching the same index to wait on this sort.=A0 Be just as =
easy to use their own.=A0 (Is RuleBasedCollator a "heavy" object memory =
wise?=A0 Wouldn't have thought so, per thread)</DIV><DIV><BR =
class=3D"khtml-block-placeholder"></DIV><DIV>Thoughts?</DIV><DIV><BR =
class=3D"khtml-block-placeholder"></DIV><DIV><BR =
class=3D"khtml-block-placeholder"><DIV><DIV> <SPAN =
class=3D"Apple-style-span" style=3D"border-collapse: separate; =
border-spacing: 0px 0px; color: rgb(0, 0, 0); font-family: Lucida =
Grande; font-size: 14px; font-style: normal; font-variant: normal; =
font-weight: normal; letter-spacing: normal; line-height: normal; =
text-align: auto; -khtml-text-decorations-in-effect: none; text-indent: =
0px; -apple-text-size-adjust: auto; text-transform: none; orphans: 2; =
white-space: normal; widows: 2; word-spacing: 0px; "><DIV =
class=3D"Section1"><TABLE border=3D"1" cellspacing=3D"0" cellpadding=3D"0"=
 style=3D"margin-left:-1.7pt;  =
border-collapse:collapse;border:none;mso-border-alt:solid windowtext =
.5pt;  mso-padding-alt:0mm 5.4pt 0mm 5.4pt" width=3D"466"><TBODY =
style=3D"border-collapse: collapse; "><TR style=3D"height:38.5pt; =
border-collapse: collapse; "><TD width=3D"120" valign=3D"top" =
style=3D"border:none;border-right:solid #FF6600 .5pt;   padding:0mm =
5.4pt 0mm 5.4pt;height:38.5pt; border-collapse: collapse; "><P =
class=3D"MsoNormal" style=3D"margin-left:-3.7pt; border-collapse: =
collapse; "><B style=3D"border-collapse: collapse; font-weight: bold; =
"><SPAN style=3D"font-size:10.0pt;   =
mso-bidi-font-size:12.0pt;font-family:Arial;color:#09155A; =
border-collapse: collapse; font-size: 13.3333px; font-weight: bold; =
"><SPAN class=3D"Apple-style-span" style=3D"border-collapse: collapse; =
color: rgb(9, 21, 90); font-family: Arial; font-size: 13.3333px; =
font-weight: bold; ">Paul Smith</SPAN><BR style=3D"border-collapse: =
collapse; color: rgb(9, 21, 90); font-family: Arial; font-size: =
13.3333px; font-weight: bold; "></SPAN></B><SPAN =
style=3D"mso-bidi-font-size:12.0pt; font-family:Arial;color:#FF6600; =
border-collapse: collapse; "><FONT size=3D"2"><SPAN =
class=3D"Apple-style-span" style=3D"border-collapse: collapse; color: =
rgb(255, 102, 0); font-family: Arial; font-size: 11px; ">Engineering =
Manager</SPAN></FONT></SPAN><SPAN style=3D"font-family:Arial; =
border-collapse: collapse; "><SPAN class=3D"Apple-style-span" =
style=3D"border-collapse: collapse; font-family: Arial; "> </SPAN><BR =
style=3D"border-collapse: collapse; font-family: Arial; "></SPAN><SPAN =
style=3D"font-size:10.0pt;mso-bidi-font-size:12.0pt;   =
font-family:Arial;color:#FF6600; border-collapse: collapse; font-size: =
13.3333px; "><O:P style=3D"border-collapse: collapse; color: rgb(255, =
102, 0); font-family: Arial; font-size: 13.3333px; =
"></O:P></SPAN></P></TD><TD width=3D"340" =
style=3D"border:none;mso-border-left-alt:solid #FF6600 .5pt;   =
padding:0mm 5.4pt 0mm 5.4pt>         <p class=3DMsoNormal style=3D; =
border-collapse: collapse; " margin-left:1.7pt'=3D""><SPAN =
style=3D"font-size:10.0pt;   =
mso-bidi-font-size:12.0pt;font-family:Arial;color:#091C5A; =
border-collapse: collapse; font-size: 13.3333px; "><B =
style=3D"border-collapse: collapse; color: rgb(9, 28, 90); font-family: =
Arial; font-size: 13.3333px; font-weight: bold; "><SPAN =
class=3D"Apple-style-span" style=3D"border-collapse: collapse; color: =
rgb(9, 28, 90); font-family: Arial; font-size: 13.3333px; font-weight: =
bold; ">Aconex</SPAN><FONT color=3D"#FF6600" face=3D"Arial, Helvetica, =
sans-serif"><B style=3D"border-collapse: collapse; color: rgb(255, 102, =
0); font-family: Arial; font-size: 13.3333px; font-weight: bold; "><FONT =
size=3D"2"><BR style=3D"border-collapse: collapse; color: rgb(255, 102, =
0); font-family: Arial; font-size: 11px; font-weight: bold; =
"></FONT></B></FONT></B><FONT color=3D"#FF6600" face=3D"Arial, =
Helvetica, sans-serif"><FONT size=3D"2"><SPAN class=3D"Apple-style-span" =
style=3D"border-collapse: collapse; color: rgb(255, 102, 0); =
font-family: Arial; font-size: 11px; ">The </SPAN><B =
style=3D"border-collapse: collapse; color: rgb(255, 102, 0); =
font-family: Arial; font-size: 11px; font-weight: bold; "><SPAN =
class=3D"Apple-style-span" style=3D"border-collapse: collapse; color: =
rgb(255, 102, 0); font-family: Arial; font-size: 11px; font-weight: =
bold; ">easy</SPAN></B><SPAN class=3D"Apple-style-span" =
style=3D"border-collapse: collapse; color: rgb(255, 102, 0); =
font-family: Arial; font-size: 11px; "> way to save time and money on =
your project</SPAN></FONT></FONT><B style=3D"border-collapse: collapse; =
color: rgb(9, 28, 90); font-family: Arial; font-size: 13.3333px; =
font-weight: bold; "><BR style=3D"border-collapse: collapse; color: =
rgb(9, 28, 90); font-family: Arial; font-size: 13.3333px; font-weight: =
bold; "><BR style=3D"border-collapse: collapse; color: rgb(9, 28, 90); =
font-family: Arial; font-size: 13.3333px; font-weight: bold; "></B><DIV =
style=3D"margin-top: 0px; margin-right: 0px; margin-bottom: 0px; =
margin-left: 0px; ; border-collapse: collapse; color: rgb(9, 28, 90); =
font-family: Arial; font-size: 13.3333px; "><SPAN =
class=3D"Apple-style-span" style=3D"border-collapse: separate; ; color: =
rgb(9, 28, 90); font-family: Arial; font-size: 13.3333px; "><FONT =
class=3D"Apple-style-span" color=3D"#0C2156" size=3D"4"><SPAN =
class=3D"Apple-style-span" style=3D"font-size: 13.3px;; color: rgb(12, =
33, 86); font-family: Arial; "><SPAN class=3D"Apple-style-span" =
style=3D"color: rgb(12, 33, 86); font-family: Arial; font-size: 13.3px; =
">696 Bourke Street, Melbourne,</SPAN></SPAN></FONT></SPAN></DIV><DIV =
style=3D"margin-top: 0px; margin-right: 0px; margin-bottom: 0px; =
margin-left: 0px; ; border-collapse: collapse; color: rgb(9, 28, 90); =
font-family: Arial; font-size: 13.3333px; "><FONT =
class=3D"Apple-style-span" color=3D"#000000" face=3D"Lucida Grande" =
size=3D"4"><SPAN class=3D"Apple-style-span" style=3D"border-collapse: =
separate; font-size: 14px;"><FONT class=3D"Apple-style-span" =
color=3D"#0C2156" face=3D"Arial" size=3D"4"><SPAN =
class=3D"Apple-style-span" style=3D"font-size: 13.3px;; color: rgb(12, =
33, 86); font-family: Arial; "><SPAN class=3D"Apple-style-span" =
style=3D"color: rgb(12, 33, 86); font-family: Arial; font-size: 13.3px; =
">VIC 3000, Australia </SPAN></SPAN></FONT><FONT =
class=3D"Apple-style-span" color=3D"#0C2156" face=3D"Arial" =
size=3D"4"><SPAN class=3D"Apple-style-span" style=3D"font-size: 13.3px;; =
color: rgb(12, 33, 86); font-family: Arial; "><BR style=3D"color: =
rgb(12, 33, 86); font-family: Arial; font-size: 13.3px; =
"></SPAN></FONT><FONT class=3D"Apple-style-span" color=3D"#0C2156" =
face=3D"Arial" size=3D"4"><SPAN class=3D"Apple-style-span" =
style=3D"font-size: 13.3px;; color: rgb(12, 33, 86); font-family: Arial; =
"><B style=3D"color: rgb(12, 33, 86); font-family: Arial; font-size: =
13.3px; font-weight: bold; "><SPAN class=3D"Apple-style-span" =
style=3D"color: rgb(12, 33, 86); font-family: Arial; font-size: 13.3px; =
font-weight: bold; ">Tel: +61 3 9240 0200 =
=A0</SPAN></B></SPAN></FONT><FONT class=3D"Apple-style-span" =
color=3D"#0C2156" face=3D"Arial" size=3D"4"><SPAN =
class=3D"Apple-style-span" style=3D"font-size: 13.3px;; color: rgb(12, =
33, 86); font-family: Arial; "><SPAN class=3D"Apple-style-span" =
style=3D"color: rgb(12, 33, 86); font-family: Arial; font-size: 13.3px; =
">Fax: +61 3 9240 0299</SPAN></SPAN></FONT></SPAN></FONT></DIV><FONT =
class=3D"Apple-style-span" color=3D"#000000" face=3D"Lucida Grande" =
size=3D"4"></FONT><SPAN class=3D"Apple-style-span" =
style=3D"border-collapse: collapse; color: rgb(9, 28, 90); font-family: =
Arial; font-size: 13.3333px; ">Email: <A =
href=3D"mailto:psmith@aconex.com">psmith@aconex.com</A>=A0</SPAN><B =
style=3D"border-collapse: collapse; color: rgb(9, 28, 90); font-family: =
Arial; font-size: 13.3333px; font-weight: bold; "><O:P =
style=3D"border-collapse: collapse; color: rgb(9, 28, 90); font-family: =
Arial; font-size: 13.3333px; font-weight: bold; "><SPAN =
style=3D"font-size:10.0pt;   =
mso-bidi-font-size:12.0pt;font-family:Arial;color:#091C5A; =
border-collapse: collapse; font-size: 13.3333px; font-weight: bold; =
"><SPAN class=3D"Apple-style-span" style=3D"border-collapse: collapse; =
color: rgb(9, 28, 90); font-family: Arial; font-size: 13.3333px; =
font-weight: bold; "> </SPAN><A href=3D"http://www.aconex.com/"><SPAN =
class=3D"Apple-style-span" style=3D"border-collapse: collapse; color: =
rgb(0, 0, 238); font-family: Arial; font-size: 13.3333px; font-weight: =
bold; -khtml-text-decorations-in-effect: underline; =
">www.aconex.com</SPAN><B style=3D"border-collapse: collapse; color: =
rgb(0, 0, 238); font-family: Arial; font-size: 13.3333px; font-weight: =
bold; -khtml-text-decorations-in-effect: underline; "><O:P =
style=3D"border-collapse: collapse; color: rgb(0, 0, 238); font-family: =
Arial; font-size: 13.3333px; font-weight: bold; =
-khtml-text-decorations-in-effect: underline; "></O:P></B></A><B =
style=3D"border-collapse: collapse; color: rgb(9, 28, 90); font-family: =
Arial; font-size: 13.3333px; font-weight: bold; "><O:P =
style=3D"border-collapse: collapse; color: rgb(9, 28, 90); font-family: =
Arial; font-size: 13.3333px; font-weight: bold; =
"></O:P></B></SPAN></O:P></B></SPAN></TD></TR><TR style=3D"height:43.1pt; =
border-collapse: collapse; "><TD colspan=3D"2" valign=3D"top" =
style=3D"width:500pt;border:none;   padding:0mm 5.4pt 0mm =
5.4pt;height:10pt; border-collapse: collapse; "><SPAN =
class=3D"Apple-style-span" style=3D"border-collapse: collapse; =
">=A0</SPAN></TD></TR><TR style=3D"height:43.1pt; border-collapse: =
collapse; "><TD colspan=3D"2" valign=3D"top" =
style=3D"width:500pt;border:none;   padding:0mm 5.4pt 0mm =
5.4pt;height:43.1pt; border-collapse: collapse; "><P class=3D"MsoNormal" =
style=3D"margin-left:-3.4pt;text-align:justify; border-collapse: =
collapse; "><SPAN class=3D"aconexsm1"><SPAN =
style=3D"font-size:7.5pt;mso-bidi-font-size:8.0pt;   =
font-family:Verdana;mso-bidi-font-family:Tahoma;color:gray; =
border-collapse: collapse; color: rgb(128, 128, 128); font-size: 10px; =
text-align: justify; "><SPAN class=3D"Apple-style-span" =
style=3D"border-collapse: collapse; color: rgb(128, 128, 128); =
font-family: Verdana; font-size: 10px; text-align: justify; ">This email =
and any attachments are intended solely for the addressee. The contents =
may be privileged, confidential and/or subject to copyright or other =
applicable law. No confidentiality or privilege is lost by an erroneous =
transmission. If you have received this e-mail in error, please let us =
know by reply e-mail and delete or destroy this mail and all copies. If =
you are not the intended recipient of this message you must not =
disseminate, copy or take any action in reliance on it. The sender takes =
no responsibility for the effect of this message upon the recipient's =
computer system.</SPAN></SPAN></SPAN><B style=3D"border-collapse: =
collapse; font-weight: bold; text-align: justify; "><SPAN =
style=3D"font-size:7.5pt;mso-bidi-font-size:12.0pt;font-family:Verdana;  =
 mso-bidi-font-family:Tahoma;color:#09155A;letter-spacing:.9pt; =
border-collapse: collapse; font-size: 10px; font-weight: bold; =
letter-spacing: 1px; text-align: justify; "><O:P style=3D"border-collapse:=
 collapse; color: rgb(9, 21, 90); font-family: Verdana; font-size: 10px; =
font-weight: bold; letter-spacing: 1px; text-align: justify; =
"></O:P></SPAN></B></P></TD></TR></TBODY></TABLE></DIV><BR =
class=3D"Apple-interchange-newline"></SPAN> =
</DIV><BR></DIV></DIV></BODY></HTML>=

--Apple-Mail-44--140540800--

--Apple-Mail-45--140540337
Content-Transfer-Encoding: base64
Content-Type: application/pkcs7-signature;
	name=smime.p7s
Content-Disposition: attachment;
	filename=smime.p7s

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIGpzCCAz8w
ggKooAMCAQICAQ0wDQYJKoZIhvcNAQEFBQAwgdExCzAJBgNVBAYTAlpBMRUwEwYDVQQIEwxXZXN0
ZXJuIENhcGUxEjAQBgNVBAcTCUNhcGUgVG93bjEaMBgGA1UEChMRVGhhd3RlIENvbnN1bHRpbmcx
KDAmBgNVBAsTH0NlcnRpZmljYXRpb24gU2VydmljZXMgRGl2aXNpb24xJDAiBgNVBAMTG1RoYXd0
ZSBQZXJzb25hbCBGcmVlbWFpbCBDQTErMCkGCSqGSIb3DQEJARYccGVyc29uYWwtZnJlZW1haWxA
dGhhd3RlLmNvbTAeFw0wMzA3MTcwMDAwMDBaFw0xMzA3MTYyMzU5NTlaMGIxCzAJBgNVBAYTAlpB
MSUwIwYDVQQKExxUaGF3dGUgQ29uc3VsdGluZyAoUHR5KSBMdGQuMSwwKgYDVQQDEyNUaGF3dGUg
UGVyc29uYWwgRnJlZW1haWwgSXNzdWluZyBDQTCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEA
xKY8VXNV+065yplaHmjAdQRwnd/p/6Me7L3N9VvyGna9fww6YfK/Uc4B1OVQCjDXAmNaLIkVcI7d
yfArhVqqP3FWy688Cwfn8R+RNiQqE88r1fOCdz0Dviv+uxg+B79AgAJk16emu59l0cUqVIUPSAR/
p7bRPGEEQB5kGXJgt/sCAwEAAaOBlDCBkTASBgNVHRMBAf8ECDAGAQH/AgEAMEMGA1UdHwQ8MDow
OKA2oDSGMmh0dHA6Ly9jcmwudGhhd3RlLmNvbS9UaGF3dGVQZXJzb25hbEZyZWVtYWlsQ0EuY3Js
MAsGA1UdDwQEAwIBBjApBgNVHREEIjAgpB4wHDEaMBgGA1UEAxMRUHJpdmF0ZUxhYmVsMi0xMzgw
DQYJKoZIhvcNAQEFBQADgYEASIzRUIPqCy7MDaNmrGcPf6+svsIXoUOWlJ1/TCG4+DYfqi2fNi/A
9BxQIJNwPP2t4WFiw9k6GX6EsZkbAMUaC4J0niVQlGLH2ydxVyWN3amcOY6MIE9lX5Xa9/eH1sYI
Tq726jTlEBpbNU1341YheILcIRk13iSx0x1G/11fZU8wggNgMIICyaADAgECAhAeq5haE1n+245z
DGDY+liyMA0GCSqGSIb3DQEBBQUAMGIxCzAJBgNVBAYTAlpBMSUwIwYDVQQKExxUaGF3dGUgQ29u
c3VsdGluZyAoUHR5KSBMdGQuMSwwKgYDVQQDEyNUaGF3dGUgUGVyc29uYWwgRnJlZW1haWwgSXNz
dWluZyBDQTAeFw0wNjEyMTMyMTAzMTdaFw0wNzEyMTMyMTAzMTdaMIGdMQ4wDAYDVQQEEwVTbWl0
aDENMAsGA1UEKhMEUGF1bDETMBEGA1UEAxMKUGF1bCBTbWl0aDEgMB4GCSqGSIb3DQEJARYRcHNt
aXRoQGFwYWNoZS5vcmcxIDAeBgkqhkiG9w0BCQEWEXBzbWl0aEBhY29uZXguY29tMSMwIQYJKoZI
hvcNAQkBFhR0YWxscHNtaXRoQGdtYWlsLmNvbTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoC
ggEBALyeqM7xB/Hf+bvVZG0cFyswYHlGrxOWsAm50HL6qlAe3d0lKet/UYtH6thPxWex6hU45J13
wRRh/K0YnHGaxItQiLgu8N6lOUE0tH0GCOAJlPBmwyd5CfZuORjD04cpKJAUDLFMveCp+VlxkDA4
tJ8konURIKfdO4+oz5of4i2QaX13RAwBaPXFDRg0sLq6up+bMuCphZ1vf8JuqL7/E5rTtw6vu/c0
3qNCWscx79YAMzDo4+Vi962V07hgLJ8gbOwl3qTu0lIx6YApS8XTgqxZaU54nGIrHDmIrsQPcIsd
ESFDqPO8MlPBd2WuTkotD464K6pZLg7T7VULMfJ/ACcCAwEAAaNXMFUwRQYDVR0RBD4wPIERcHNt
aXRoQGFwYWNoZS5vcmeBEXBzbWl0aEBhY29uZXguY29tgRR0YWxscHNtaXRoQGdtYWlsLmNvbTAM
BgNVHRMBAf8EAjAAMA0GCSqGSIb3DQEBBQUAA4GBAKiR7earfeeh3A0dbfAC7V92vdqcIU9bziOS
2Nw8QUYZoqEr28K/tsEAZiOGFiFerHjOZ10aiT9tBvQZOqrsh8x4Gyu/E664f6wibfCkaXOKBRg4
hVpUdLuXRFIiee7gSSij40C0cUpMkQbhrKMv4rYMh1L96ekOGxcVLAFi8qUdMYIDEDCCAwwCAQEw
djBiMQswCQYDVQQGEwJaQTElMCMGA1UEChMcVGhhd3RlIENvbnN1bHRpbmcgKFB0eSkgTHRkLjEs
MCoGA1UEAxMjVGhhd3RlIFBlcnNvbmFsIEZyZWVtYWlsIElzc3VpbmcgQ0ECEB6rmFoTWf7bjnMM
YNj6WLIwCQYFKw4DAhoFAKCCAW8wGAYJKoZIhvcNAQkDMQsGCSqGSIb3DQEHATAcBgkqhkiG9w0B
CQUxDxcNMDcwMjE0MDgwMzA4WjAjBgkqhkiG9w0BCQQxFgQUBB7WT43QAubTzDkfgHVAlpF76fIw
gYUGCSsGAQQBgjcQBDF4MHYwYjELMAkGA1UEBhMCWkExJTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0
aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5n
IENBAhAeq5haE1n+245zDGDY+liyMIGHBgsqhkiG9w0BCRACCzF4oHYwYjELMAkGA1UEBhMCWkEx
JTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQ
ZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5nIENBAhAeq5haE1n+245zDGDY+liyMA0GCSqGSIb3DQEB
AQUABIIBAKBS8+zIu+P8CwXuHioWJpXBbZYe0bxu5I7VdL0TdMAjJSEW9Wy0nXzHqsNIOu8p2a9L
QM9e/qyN+EUWDq7P6Z633rrVKdraiECOdBMASJptf9droMYcSdsv8Pg/MqzNJhPAFqV3m0gLb8Ii
InBK6ybB2MWzbLtxnJKwxlRZpURTwSmlwdWMukug+OqcqyuySMpgNvhTg9jwq0YBvVgpXYI1iLmu
LXtXd44AKJyqlMvE3bln1T7ldApejqHDQlx1iWLCnBfdfmUAhywofvbG46YaDifrbASqSfIh/mlS
S0tX5xAbUhtX/TGUGZxzx+2ELEkGb6XpD0xg5Y8EhDZDPD8AAAAAAAA=

--Apple-Mail-45--140540337--

From java-user-return-26115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 08:36:38 2007
Return-Path: <java-user-return-26115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92573 invoked from network); 14 Feb 2007 08:36:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 08:36:38 -0000
Received: (qmail 73654 invoked by uid 500); 14 Feb 2007 08:36:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73306 invoked by uid 500); 14 Feb 2007 08:36:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73294 invoked by uid 99); 14 Feb 2007 08:36:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 00:36:37 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yeohwm@mymcsb.com designates 218.111.147.2 as permitted sender)
Received: from [218.111.147.2] (HELO mcsbtm01.mcsb.internal) (218.111.147.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 00:36:27 -0800
Received: from localhost (localhost [127.0.0.1])by ox.mcsb.com (Postfix) 
	with ESMTP id 2C6E42DC20for <java-user@lucene.apache.org>; Wed, 14 Feb 2007
	 16:31:22 +0800 (MYT)
Received: from ox.mcsb.com ([127.0.0.1])by localhost (ox [127.0.0.1]) 
	(amavisd-new, port 10024) with ESMTPid 27457-08 for 
	<java-user@lucene.apache.org>;Wed, 14 Feb 2007 16:31:18 +0800 (MYT)
Received: from wmyeoh (unknown [10.10.100.61])by ox.mcsb.com (Postfix) with 
	ESMTP id 97959329E9for <java-user@lucene.apache.org>; Wed, 14 Feb 2007 
	16:31:18 +0800 (MYT)
From: "yeohwm" <yeohwm@mymcsb.com>
To: <java-user@lucene.apache.org>
Subject: RE: hi sample code
Date: Wed, 14 Feb 2007 16:38:39 +0800
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_NextPart_000_0016_01C75056.949A53E0"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: AcdQCq8LG3tIGTPjRy+TQuDl4GhCJgACLeMg
In-Reply-To: <2b817f360702132339s4cacd0b0l91ab0c0f521eaa0a@mail.gmail.com>
Message-Id: <20070214083118.97959329E9@ox.mcsb.com>
X-Virus-Scanned: by amavisd-new at mcsb.com
X-imss-version: 2.046
X-imss-result: Passed
X-imss-scanInfo: M:P L:N SM:0
X-imss-tmaseResult: TT:0 TS:0.0000 TC:00 TRN:0 TV:3.6.1039(14996.000)
X-imss-scores: Clean:33.71616 C:2 M:3 S:5 R:5
X-imss-settings: Baseline:6 C:3 M:3 S:3 R:3 (2.0000 2.0000)
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0016_01C75056.949A53E0
Content-Type: text/plain;
	charset="windows-1250"
Content-Transfer-Encoding: 7bit


Hi,

	Hope this help.

Regards,
Wooi Meng 

-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.5.441 / Virus Database: 268.17.39/685 - Release Date: 2/13/2007
10:01 PM
 
  


Disclaimer
----------------------------------------------------------------------------------------------------
This e-mail and any files transmitted with it are intended only for the 
use of the addressee. If it contains confidential information, the addressee 
is expressly prohibited from distributing the e-mail and legal action may be 
taken against you. Access by any other persons to this e-mail is unauthorized. 
If you are not the intended recipient, any disclosure, copying, use, or 
distribution is prohibited and may be unlawful. This e-mail and any files and/or 
attachments, shall not constitute binding legal obligation with the company. 
The company shall also not be responsible for any computer virus transmitted 
with this e-mail.
----------------------------------------------------------------------------------------------------
MCSB Systems (M) Berhad (0xMCsBM@il)
------=_NextPart_000_0016_01C75056.949A53E0
Content-Type: text/plain;
	name="Test.txt"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename="Test.txt"

public synchronized String idxWriterMyDoc(String companyId, String =
ownerId, String createdBy, String docName, String docDesc, String =
keywords,=20
			int docId, String orgDocPath, int docGroupId, int docVersionId, File =
fileToIdx) throws Exception
	{
		boolean idxReCreate =3D false;
		Document doc =3D new Document();
		List getDocPropValueList =3D new ArrayList();
		DocumentTypeParser dtp =3D new DocumentTypeParser();
		final String retValErr =3D "fail";
		String retVal =3D "success";
		String content =3D "";
	=09
		userDir =3D new =
File(ConfigMgr.getPropValue("ds.rootdir")+File.separator+companyId+File.s=
eparator+"Users"+File.separator+ownerId+File.separator+"MyDocuments");
		idxDir =3D new File(userDir+File.separator+"idxFolder");
	=09
		if(!idxDir.exists())
		{
			idxReCreate =3D true;
			idxDir.mkdirs();
		}
	=09
		try
		{=09
			writer =3D new IndexWriter(idxDir, new StandardAnalyzer(), =
idxReCreate);
		=09
			try
			{
				if(docName.toLowerCase().endsWith(".pdf"))
				{
					content =3D dtp.indexPdf(fileToIdx);
				=09
					if(content !=3D null && !content.equals(""))
					{
						doc.add(new Field(DsConstant.idxFileContent, content, =
Field.Store.YES, Field.Index.TOKENIZED));
						doc.add(new Field(DsConstant.idxPath, fileToIdx.getPath(), =
Field.Store.YES, Field.Index.UN_TOKENIZED));
					}
				}
				else if(docName.toLowerCase().endsWith(".doc"))
				{
					content =3D dtp.indexDoc(fileToIdx);
				=09
					if(content !=3D null && !content.equals(""))
					{
						doc.add(new Field(DsConstant.idxFileContent, content, =
Field.Store.YES, Field.Index.TOKENIZED));
						doc.add(new Field(DsConstant.idxPath, fileToIdx.getPath(), =
Field.Store.YES, Field.Index.UN_TOKENIZED));
					}
				}
				else if(docName.toLowerCase().endsWith(".txt") || =
docName.toLowerCase().endsWith(".log") || =
docName.toLowerCase().endsWith(".xml"))
				{
					content =3D dtp.indexText(fileToIdx);
				=09
					if(content !=3D null && !content.equals(""))
					{
						doc.add(new Field(DsConstant.idxFileContent, content, =
Field.Store.YES, Field.Index.TOKENIZED));
						doc.add(new Field(DsConstant.idxPath, fileToIdx.getPath(), =
Field.Store.YES, Field.Index.UN_TOKENIZED));
					}
				}
				else if(docName.toLowerCase().endsWith(".ppt"))
				{
					content =3D dtp.indexPP(fileToIdx);
				=09
					if(content !=3D null && !content.equals(""))
					{
						doc.add(new Field(DsConstant.idxFileContent, content, =
Field.Store.YES, Field.Index.TOKENIZED));
						doc.add(new Field(DsConstant.idxPath, fileToIdx.getPath(), =
Field.Store.YES, Field.Index.UN_TOKENIZED));
					}
				}
				else if(docName.toLowerCase().endsWith(".xls"))
				{
					doc =3D dtp.indexExcel(fileToIdx, doc);
				=09
					if(content !=3D null && !content.equals(""))
					{
						doc.add(new Field(DsConstant.idxPath, fileToIdx.getPath(), =
Field.Store.YES, Field.Index.UN_TOKENIZED));
					}
				}
				else if(docName.toLowerCase().endsWith(".html") || =
docName.toLowerCase().endsWith(".htm"))
				{
					doc =3D dtp.indexHTML(fileToIdx, doc);
				=09
					if(content !=3D null && !content.equals(""))
					{
						doc.add(new Field(DsConstant.idxPath, fileToIdx.getPath(), =
Field.Store.YES, Field.Index.UN_TOKENIZED));
					}
				}
			}
			catch(Exception ex)
			{
				ex.printStackTrace();
				doc =3D new Document();
			}
		=09
			doc.add(new Field("Company", companyId, Field.Store.YES, =
Field.Index.UN_TOKENIZED));
			doc.add(new Field("Owner", ownerId.trim(), Field.Store.YES, =
Field.Index.UN_TOKENIZED));
			doc.add(new Field("CreatedBy", createdBy.trim(), Field.Store.YES, =
Field.Index.UN_TOKENIZED));
			doc.add(new Field("DocumentName", docName, Field.Store.YES, =
Field.Index.TOKENIZED));
			doc.add(new Field("DocumentDescription", docDesc, Field.Store.YES, =
Field.Index.TOKENIZED));
			doc.add(new Field("Keywords", keywords, Field.Store.YES, =
Field.Index.TOKENIZED));
			doc.add(new Field("DocumentNo", String.valueOf(docId), =
Field.Store.YES, Field.Index.UN_TOKENIZED));
			doc.add(new Field("OriginalDocPath", orgDocPath.toLowerCase(), =
Field.Store.YES, Field.Index.TOKENIZED));
			doc.add(new Field("DocumentGroupIdentity", =
String.valueOf(docGroupId), Field.Store.YES, Field.Index.UN_TOKENIZED));
			doc.add(new Field("DocumentVersionNo", String.valueOf(docVersionId), =
Field.Store.YES, Field.Index.UN_TOKENIZED));
		=09
			getDocPropValueList =3D dpvBean.getDocPropValueList(docId);
			Iterator docPropKey =3D getDocPropValueList.listIterator();
			while(docPropKey.hasNext())
			{
				DocPropValue dpValue =3D (DocPropValue)docPropKey.next();
				int docPropId =3D dpValue.getDocPropId();
				DocProp dp =3D dpmBean.getDocProp(docPropId);
				String docPropName =3D dp.getDocPropName();
				doc.add(new Field(docPropName, dpValue.getDocPropValue(), =
Field.Store.YES, Field.Index.TOKENIZED));
			}
		=09
			writer.addDocument(doc);
			writer.optimize();
			writer.close();
		}
		catch(Exception ex)
		{
			System.err.println(ex.getMessage());
			retVal =3D retValErr;
		}
		finally
		{
			try
			{
				if(writeLock !=3D null)
				{
					writeLock.release();
					writeLock =3D null;
				}
			}
			catch(Exception ex)
			{
				System.err.println(ex.getMessage());
				retVal =3D retValErr;
			}
		}
	=09
		return retVal;
	}


//Pdf parser
	public String indexPdf(File file) throws Exception=20
	{
		PDDocument pdDoc =3D PDDocument.load(file);
		String content =3D "";
		try
		{
			PDFTextStripper stripper =3D new PDFTextStripper();
		=09
			content =3D stripper.getText(pdDoc);
		}
		catch(Exception ex)
		{
			ex.printStackTrace();
			System.err.println("file --- indexPdf parser --- " +file.toString());
		}
		finally
		{
			pdDoc.close();
		}
	=09
		return content;
	}
=09
	//Word Doc parser
	public String indexDoc(File file) throws Exception=20
	{
		WordExtractor wordDoc =3D new WordExtractor(new =
FileInputStream(file));
		String content =3D "";
	=09
		try
		{
			content =3D wordDoc.getTextFromPieces();
		}
		catch(Exception ex)
		{
			ex.printStackTrace();
			System.err.println("file --- indexWord parser --- " =
+file.toString());
		}
	=09
		return content;
	}
=09
	//PowerPoint parser
	public String indexPP(File file) throws Exception
	{
		PowerPointExtractor ppDoc =3D new PowerPointExtractor(new =
FileInputStream(file));
		String content =3D "";
	=09
		try
		{
			content =3D ppDoc.getText();
		}
		catch(Exception ex)
		{
			ex.printStackTrace();
		}
		finally
		{
			ppDoc.close();
		}
	=09
		return content;
	}
=09
	//Excel parser
	public Document indexExcel(File file, Document doc) throws Exception
	{
		Workbook excelDoc =3D Workbook.getWorkbook(new FileInputStream(file));
		String content =3D "";
		Cell[] row =3D null;
	=09
		try
		{
		    for(int sheet =3D 0; sheet < excelDoc.getNumberOfSheets(); =
sheet++)
			{
				Sheet s =3D excelDoc.getSheet(sheet);
				for(int i =3D 0; i < s.getRows(); i++)
				{
					row =3D s.getRow(i);
					if(row.length > 0)
					{
						if(!row[0].isHidden())
						{
							content =3D row[0].getContents();
						}
					=09
						for(int j =3D 0; j < row.length; j++)
						{
							if(!row[j].isHidden())
							{
								content =3D row[j].getContents();
								doc.add(new Field(DsConstant.idxFileContent, content, =
Field.Store.YES, Field.Index.TOKENIZED));
							}
						}
					}
				}
			}
		}
		catch(Exception ex)
		{
			ex.printStackTrace();
			System.err.println("file --- indexExcel parser --- " +file.toString() =
+ " doc to string --- " +doc.toString());
		}
		finally
		{
			excelDoc.close();
		}
	=09
		return doc;
	}
=09
	//Text parser
	public String indexText(File file) throws Exception=20
	{
		BufferedReader reader =3D new BufferedReader(new FileReader(file));
		StringBuffer content =3D new StringBuffer();=20
	=09
		try
		{
			do=20
			{
				content.append(reader.readLine());
			}
			while (reader.readLine()!=3Dnull);
		}
		catch(Exception ex)
		{
			ex.printStackTrace();
		}
		finally
		{
			reader.close();
		}
	=09
		return content.toString();
	}

------=_NextPart_000_0016_01C75056.949A53E0
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------=_NextPart_000_0016_01C75056.949A53E0--



From java-user-return-26116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 08:50:22 2007
Return-Path: <java-user-return-26116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95381 invoked from network); 14 Feb 2007 08:50:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 08:50:21 -0000
Received: (qmail 803 invoked by uid 500); 14 Feb 2007 08:50:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99911 invoked by uid 500); 14 Feb 2007 08:50:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99900 invoked by uid 99); 14 Feb 2007 08:50:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 00:50:18 -0800
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 00:50:08 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 7B48C5B766; Wed, 14 Feb 2007 00:49:48 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 74DC67F403
	for <java-user@lucene.apache.org>; Wed, 14 Feb 2007 00:49:48 -0800 (PST)
Date: Wed, 14 Feb 2007 00:49:48 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: encoding question.
In-Reply-To: <34b8543c0702132146g76abec8t885ce611a84ccabd@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0702140040420.13587@hal.rescomp.berkeley.edu>
References: <34b8543c0702132146g76abec8t885ce611a84ccabd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


Internally Lucene deals with pure Java Strings; when writing those strings
to and reading those strings back from disk, Lucene allways uses the stock
Java "modified UTF-8"  format, regardless of what your file.encoding
system property may be.

typcially when people have encoding problems in their lucene applications,
the origin of hte problem is in the way they fetch the data before
indexing it ... if you can make a String object, and System.out.println
that string and see what you expect, then handing that string to Lucene as
a field value should work fine.

what exactly is the "value" object you are calling getBytes on? ... if
it's another String, then you've already got serious problems -- i can't
imagine any situation where fetching the bytes from a String in one
charset and using those bytes to construct another string (either in a
different charset, or in the system default charset) would make any sense
at all.

wherever your original binary data is coming from (files on disk, network
socket, etcc...) that's when you should be converting those bytes into
chars using whatever charset you know those bytes represent.



: Date: Wed, 14 Feb 2007 09:16:58 +0330
: From: Mohammad Norouzi <mnrz57@gmail.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: encoding question.
:
: Hi
: I want to index data with utf-8 encoding, so when adding field to a document
: I am using the code new String(value.getBytes("utf-8"))
: in the other hand, when I am going to search I was using the same snippet
: code to convert to utf-8 but it did not work so finally I found somewhere
: that had been said to use new String(valueToSearch.getBytes("cp1252"),"UTF8")
: and it worked fine but I still has some problem.
: first, some characters are weird when I get result from lucene, It seems it
: is in cp1252 encoding.
: second, if the java environment property "file.encoding" not been cp1252 the
: result is completely in incorrect encoding. so I must change this property
: using System.setProperty("file.encoding","cp1252")
:
: is lucene neglect my utf-8 encoding and proceed indexing data using cp1252?
: how can I correct weird characters I received by searching?
:
: Thank you very much in advance.
: --
: Regards,
: Mohammad
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 09:22:05 2007
Return-Path: <java-user-return-26117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3708 invoked from network); 14 Feb 2007 09:22:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 09:22:04 -0000
Received: (qmail 36949 invoked by uid 500); 14 Feb 2007 09:22:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36914 invoked by uid 500); 14 Feb 2007 09:22:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36903 invoked by uid 99); 14 Feb 2007 09:22:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 01:22:03 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of saroja.kanta.maharana@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 01:21:53 -0800
Received: by nf-out-0910.google.com with SMTP id i2so544630nfe
        for <java-user@lucene.apache.org>; Wed, 14 Feb 2007 01:21:31 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ljkCKwo/nnQdtirMfxPEpj+z/2uOeF21YJgbKoA2gdxH7FxzDphQi9saectGlSkyCo8LH+/kG7sLblTk5cBQ5+bDG2Y6R7ZHBdXFVBss5VpG0YMpnF7zSVSdQvZBK7ySzdp5MPBUvk8Y4n47tm/HfpnzSh7jHfAwAKYwFLsmN/M=
Received: by 10.82.148.7 with SMTP id v7mr279500bud.1171444891683;
        Wed, 14 Feb 2007 01:21:31 -0800 (PST)
Received: by 10.82.122.15 with HTTP; Wed, 14 Feb 2007 01:21:31 -0800 (PST)
Message-ID: <ab6fb9950702140121t15564c06rf5e41e821c9bb955@mail.gmail.com>
Date: Wed, 14 Feb 2007 14:51:31 +0530
From: "Saroja Kanta Maharana" <saroja.kanta.maharana@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: hi sample code
In-Reply-To: <2b817f360702132339s4cacd0b0l91ab0c0f521eaa0a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_46230_2694693.1171444891655"
References: <2b817f360702132339s4cacd0b0l91ab0c0f521eaa0a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_46230_2694693.1171444891655
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Can you come to online now .



On 2/14/07, ashwin kumar <gv.ashwin@gmail.com> wrote:
>
> hi thanks for your kindest reply.
>
> i just trying to index some text files using lucene-2.0.0
>
> if you can share any sample programs for text file indexing in
> lucene-2.0.0
> it will be allot helpfull for me to understand lucene better.
>
> if u have any sample programs pls send it across to this mail is
> gv.ashwin@gmail.com
>
> thanks
> regards
>
> ashwin
>



-- 
Regards
Saroja kanta Maharana
+919886750538

------=_Part_46230_2694693.1171444891655--

From java-user-return-26118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 09:24:23 2007
Return-Path: <java-user-return-26118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4270 invoked from network); 14 Feb 2007 09:24:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 09:24:22 -0000
Received: (qmail 40485 invoked by uid 500); 14 Feb 2007 09:24:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39806 invoked by uid 500); 14 Feb 2007 09:24:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39793 invoked by uid 99); 14 Feb 2007 09:24:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 01:24:22 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of saroja.kanta.maharana@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 01:24:12 -0800
Received: by nf-out-0910.google.com with SMTP id i2so545212nfe
        for <java-user@lucene.apache.org>; Wed, 14 Feb 2007 01:23:51 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=sSifp3V50iHa8x+xb6effMrxle8+Z3E+E7EbRs8TiLE0zW4SXRMhZpx06WBDzXTmHk6use62c63Pk+wKMEBZi3HE35agmOMorWkPXEAhEKwKwjoBqKqIr4DcWpC6MO/vDso2wlSJ3fOoFUEi3KnceaRRBxd66SgJFswQY0MOGks=
Received: by 10.82.186.5 with SMTP id j5mr278011buf.1171445031340;
        Wed, 14 Feb 2007 01:23:51 -0800 (PST)
Received: by 10.82.122.15 with HTTP; Wed, 14 Feb 2007 01:23:51 -0800 (PST)
Message-ID: <ab6fb9950702140123w77964cc4j32c671c582cb5297@mail.gmail.com>
Date: Wed, 14 Feb 2007 14:53:51 +0530
From: "Saroja Kanta Maharana" <saroja.kanta.maharana@gmail.com>
To: java-user@lucene.apache.org
Subject: Help me in Thesaurus implementation using lucene
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_46234_20283376.1171445031317"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_46234_20283376.1171445031317
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All,
I'm a new user of Lucene, and a would like to use it to create a
Thesaurus.

Do you have any idea to do this? .... Thanks!

*Regards *
*Saroj*

------=_Part_46234_20283376.1171445031317--

From java-user-return-26119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 09:31:52 2007
Return-Path: <java-user-return-26119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6075 invoked from network); 14 Feb 2007 09:31:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 09:31:51 -0000
Received: (qmail 49729 invoked by uid 500); 14 Feb 2007 09:31:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49695 invoked by uid 500); 14 Feb 2007 09:31:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49684 invoked by uid 99); 14 Feb 2007 09:31:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 01:31:52 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [147.96.1.101] (HELO brett.sim.ucm.es) (147.96.1.101)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 01:31:41 -0800
Received: from brett.sim.ucm.es (brett.sim.ucm.es [127.0.0.1])
	by localhost.ucm.es (Postfix) with ESMTP id 7611A39E661
	for <java-user@lucene.apache.org>; Wed, 14 Feb 2007 10:30:59 +0100 (CET)
Received: from ULISES.sim.ucm.es (unknown [10.150.1.31])by brett.sim.ucm.es 
	(Postfix) with ESMTP id B9E3F39E669for <java-user@lucene.apache.org>; Wed, 
	14 Feb 2007 10:30:54 +0100 (CET)
Received: from ucm.es ([10.147.128.157])by ULISES.sim.ucm.es (Sun Java 
	System Messaging Server 6.2-6.01 (built Apr  32006)) with ESMTP id 
	<0JDG001FD53W6040@ULISES.sim.ucm.es> forjava-user@lucene.apache.org; Wed, 
	14 Feb 2007 10:31:08 +0100 (CET)
Received: from [10.150.1.31] (Forwarded-For: [10.150.1.31])by 
	menelao.adm.ucm.es (mshttpd); Wed, 14 Feb 2007 10:31:08 +0100
Date: Wed, 14 Feb 2007 10:31:08 +0100
From: =?iso-8859-1?B?Ikpvc+kgUmFt824gUOlyZXogQWf8ZXJhIg==?=<jose.aguera@fdi.ucm.es>
Subject: Re: Help me in Thesaurus implementation using lucene
In-reply-to: <ab6fb9950702140123w77964cc4j32c671c582cb5297@mail.gmail.com>
To: java-user@lucene.apache.org
Message-id: <fcc4ace2851a.45d2e4ec@ucm.es>
MIME-version: 1.0
X-Mailer: Sun Java(tm) System Messenger Express 6.2-6.01 (built Apr  3 2006)
Content-type: multipart/alternative;
	boundary=--a289ed57c35679ef3718
Content-language: es
X-Accept-Language: es
Priority: normal
References: <ab6fb9950702140123w77964cc4j32c671c582cb5297@mail.gmail.com>
X-imss-version: 2.046
X-imss-result: Passed
X-imss-scanInfo: M:B L:E SM:2
X-imss-tmaseResult: TT:1 TS:-10.8416 TC:1F TRN:24 TV:3.6.1039(14996.003)
X-imss-scores: Clean:100.00000 C:0 M:0 S:0 R:0
X-imss-settings: Baseline:1 C:1 M:1 S:1 R:1 (0.0000 0.0000)
X-Virus-Checked: Checked by ClamAV on apache.org

----a289ed57c35679ef3718
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

you can use wordnet implementation like model=2E

http=3A//www=2Etropo=2Ecom/techno/java/lucene/wordnet=2Ehtml

jose

----- Mensaje original -----
De=3A Saroja Kanta Maharana =3Csaroja=2Ekanta=2Emaharana=40gmail=2Ecom=3E=

Fecha=3A Mi=E9rcoles=2C Febrero 14=2C 2007 10=3A24 am
Asunto=3A Help me in Thesaurus implementation using lucene
A=3A java-user=40lucene=2Eapache=2Eorg

=3E Hi All=2C
=3E I=27m a new user of Lucene=2C and a would like to use it to create a=

=3E Thesaurus=2E
=3E =

=3E Do you have any idea to do this=3F =2E=2E=2E=2E Thanks!
=3E =

=3E *Regards *
=3E *Saroj*
=3E =


Jos=E9 Ram=F3n P=E9rez Ag=FCera

Dept=2E de Ingenier=EDa del Software e Inteligencia Artificial
Despacho 411 tlf=2E 913947599
Facultad de Inform=E1tica
Universidad Complutense de Madrid

----a289ed57c35679ef3718--

From java-user-return-26120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 11:23:15 2007
Return-Path: <java-user-return-26120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49583 invoked from network); 14 Feb 2007 11:23:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 11:23:15 -0000
Received: (qmail 94660 invoked by uid 500); 14 Feb 2007 11:23:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94623 invoked by uid 500); 14 Feb 2007 11:23:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 77197 invoked by uid 99); 14 Feb 2007 11:11:58 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
From: "Akbar Devani" <akbar.devani@valuelabs.net>
To: <java-user@lucene.apache.org>
Cc: <java-user-help@lucene.apache.org>
Subject: Multipile field search 
Date: Wed, 14 Feb 2007 16:41:23 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0062_01C75056.F6ADBFE0"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
Thread-Index: AcdQKCmSrrrNinQPSVOHuTz7ZH+COgAAJZJA
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20070214111150.1FD2410FB019@herse.apache.org>

------=_NextPart_000_0062_01C75056.F6ADBFE0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi,

I'm in need of your help.I was looking for how serach multiple fields using Lucene,in one of the mailing list I found your solution
to the issue.

Its working perfectly but I need to pass query as field:query

If I pass only query its returing zero hits.

Below is code I'm using.

Please do help me out.

Thanking you,

Akbar Devani.

 

 

String fields [] = {"Name","Claim Update","Paid Indemnity","Paid Expenses","O/S Indemnity","O/S Expenses",

                                    "Incurred"," Status","Date / Added by","Name","Paid Premium","Estimated","Premium
Status","File","Detail","Comment","Comments" };

            

                        BooleanClause.Occur[] flags = new BooleanClause.Occur[fields.length];

 

     Query query = null;

            try

            {

            for (int i =0 ; i < fields.length ; i++)

                        {

                        flags[i]=BooleanClause.Occur.SHOULD;

                        

                        }

                        query = MultiFieldQueryParser.parse(expression, fields, flags, new StandardAnalyzer());

            System.out.println("query:"+query.toString() );

            //Log pasted below

                         

             

                         }

    catch (ParseException e)

    {

        log.error("Unable to make any sense of the query", e);

    }

//Searching

    try

            {

            

         IndexReader reader = IndexReader.open(ds.getRootPath(SERVLET_INDEX));

         IndexSearcher searcher = new IndexSearcher(reader);

         Hits hits = searcher.search(query);

 

 

 

 

If I'm searching status:open its returing records where as if I'm searching only open its returing zero.

Query Object Returned by MultiFieldQueryParser

 

 

query:open

 

Comment:open  Comments:open  Currency:open  Estimated Premium:open  Outstanding Adjuster:open

 Outstanding Expert:open  Outstanding Indemnity:open  Outstanding Lawyers:open  Outstanding Other:op

en  Outstanding TPA:open  Paid Adjuster:open  Paid Expert:open  Paid Ind:open  Paid Lawyers:open  Pa

id Movement Expert:open  Paid Other:open  Paid Premium:open  Paid TPA:open  Paid movement adjusters:

open  Paid movement indemnity:open  Paid movement lawyers:open  Paid movement other:open  Transactio

n reference:open  claim update:open  client:open  estimated premium:open  incurred:open  name:open

o/s expenses:open  o/s indemnity:open  paid expenses:open  paid indemnity:open  paid premium:open  p

lacing:open  producer:open  status:open

 

 


------=_NextPart_000_0062_01C75056.F6ADBFE0--


From java-user-return-26121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 11:59:35 2007
Return-Path: <java-user-return-26121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57206 invoked from network); 14 Feb 2007 11:59:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 11:59:34 -0000
Received: (qmail 29931 invoked by uid 500); 14 Feb 2007 11:59:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29904 invoked by uid 500); 14 Feb 2007 11:59:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29890 invoked by uid 99); 14 Feb 2007 11:59:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 03:59:35 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 03:59:25 -0800
Received: by nf-out-0910.google.com with SMTP id i2so585957nfe
        for <java-user@lucene.apache.org>; Wed, 14 Feb 2007 03:59:03 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:references;
        b=oJoK/rxgnLicGsKOrGwkUvdJA0KayO1UPQhbSWJA5GpFN2SlxZAbt4VKsmctPpGuLRV11TXpOUMz95QV8zyXSHfFfTIKJjO3TsDQ7PTtuK2hEnb1AbmYPoHUy15wzPYULfYHmcD0GFDBrO8wameF2nQg5uFkSm+aGCGfXlIsMKU=
Received: by 10.82.167.5 with SMTP id p5mr509168bue.1171454343613;
        Wed, 14 Feb 2007 03:59:03 -0800 (PST)
Received: by 10.82.163.2 with HTTP; Wed, 14 Feb 2007 03:59:03 -0800 (PST)
Message-ID: <34b8543c0702140359m1e5f12d2k916695b058386bfa@mail.gmail.com>
Date: Wed, 14 Feb 2007 15:29:03 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multipile field search
Cc: java-user-help@lucene.apache.org
In-Reply-To: <20070214111150.1FD2410FB019@herse.apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_129245_5786558.1171454343576"
References: <20070214111150.1FD2410FB019@herse.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_129245_5786558.1171454343576
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
I think it makes sense if it returns zero records because you are using
BooleanClause.Occur.SHOULD for each field, it means the term "open" should
occurs in all fields. but when you specify the field name in your query you
limit searching through that mentioned field.

as stated in Lucene javadoc the usage is:

String[] fields = {"filename", "contents", "description"};
 int[] flags = {MultiFieldQueryParser.NORMAL FIELD,
                MultiFieldQueryParser.REQUIRED FIELD,
                MultiFieldQueryParser.PROHIBITED FIELD,};
parse(query, fields, flags, analyzer);


-- 
Regards,
Mohammad Norouzi



On 2/14/07, Akbar Devani <akbar.devani@valuelabs.net> wrote:
>
> Hi,
>
> I'm in need of your help.I was looking for how serach multiple fields
> using Lucene,in one of the mailing list I found your solution
> to the issue.
>
> Its working perfectly but I need to pass query as field:query
>
> If I pass only query its returing zero hits.
>
> Below is code I'm using.
>
> Please do help me out.
>
> Thanking you,
>
> Akbar Devani.
>
>
>
>
>
> String fields [] = {"Name","Claim Update","Paid Indemnity","Paid
> Expenses","O/S Indemnity","O/S Expenses",
>
>                                     "Incurred"," Status","Date / Added
> by","Name","Paid Premium","Estimated","Premium
> Status","File","Detail","Comment","Comments" };
>
>
>
>                         BooleanClause.Occur[] flags = new
> BooleanClause.Occur[fields.length];
>
>
>
>      Query query = null;
>
>             try
>
>             {
>
>             for (int i =0 ; i < fields.length ; i++)
>
>                         {
>
>                         flags[i]=BooleanClause.Occur.SHOULD;
>
>
>
>                         }
>
>                         query = MultiFieldQueryParser.parse(expression,
> fields, flags, new StandardAnalyzer());
>
>             System.out.println("query:"+query.toString() );
>
>             //Log pasted below
>
>
>
>
>
>                          }
>
>     catch (ParseException e)
>
>     {
>
>         log.error("Unable to make any sense of the query", e);
>
>     }
>
> //Searching
>
>     try
>
>             {
>
>
>
>          IndexReader reader = IndexReader.open(ds.getRootPath
> (SERVLET_INDEX));
>
>          IndexSearcher searcher = new IndexSearcher(reader);
>
>          Hits hits = searcher.search(query);
>
>
>
>
>
>
>
>
>
> If I'm searching status:open its returing records where as if I'm
> searching only open its returing zero.
>
> Query Object Returned by MultiFieldQueryParser
>
>
>
>
>
> query:open
>
>
>
> Comment:open  Comments:open  Currency:open  Estimated
> Premium:open  Outstanding Adjuster:open
>
> Outstanding Expert:open  Outstanding Indemnity:open  Outstanding
> Lawyers:open  Outstanding Other:op
>
> en  Outstanding TPA:open  Paid Adjuster:open  Paid Expert:open  Paid
> Ind:open  Paid Lawyers:open  Pa
>
> id Movement Expert:open  Paid Other:open  Paid Premium:open  Paid
> TPA:open  Paid movement adjusters:
>
> open  Paid movement indemnity:open  Paid movement lawyers:open  Paid
> movement other:open  Transactio
>
> n reference:open  claim update:open  client:open  estimated
> premium:open  incurred:open  name:open
>
> o/s expenses:open  o/s indemnity:open  paid expenses:open  paid
> indemnity:open  paid premium:open  p
>
> lacing:open  producer:open  status:open
>
>
>
>
>
>

------=_Part_129245_5786558.1171454343576--

From java-user-return-26122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 13:58:51 2007
Return-Path: <java-user-return-26122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97131 invoked from network); 14 Feb 2007 13:58:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 13:58:49 -0000
Received: (qmail 28298 invoked by uid 500); 14 Feb 2007 13:58:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28270 invoked by uid 500); 14 Feb 2007 13:58:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28259 invoked by uid 99); 14 Feb 2007 13:58:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 05:58:48 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_FONT_BIG,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 217.79.216.190 as permitted sender)
Received: from [217.79.216.190] (HELO cluster-e.mailcontrol.com) (217.79.216.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 05:58:34 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly33e.srv.mailcontrol.com (MailControl) with SMTP id l1EDw4Ku025889
	for <java-user@lucene.apache.org>; Wed, 14 Feb 2007 13:58:04 GMT
Received: From SGBD012103.wsatkins.com ([10.202.26.17]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 1171461463661; Wed, 14 Feb 2007 13:57:43 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012103.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 14 Feb 2007 13:57:43 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C75040.18EBD0C1"
Subject: Caching
Date: Wed, 14 Feb 2007 13:57:42 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705CDAC20@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Caching
Thread-Index: AcdQQBiRmU5fm9xSQ2Ok3tuGOHjB0A==
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 14 Feb 2007 13:57:43.0416 (UTC) FILETIME=[19319F80:01C75040]
X-Scanned-By: MailControl A-07-06-90 (www.mailcontrol.com) on 10.69.0.143
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C75040.18EBD0C1
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi all,

I have read that Lucene performs caching of search results so that if
you perform the same search in succession the second result should be
returned faster.  What I wanted to ask is whether this caching is any
good or whether it's a good idea to add some sort of caching layer on
top of Lucene to improve on it.

Any comments will be appreciated.

Thanks

Sachin



This email and any attached files are confidential and copyright protected.=
 If you are not the addressee, any dissemination of this communication is s=
trictly prohibited. Unless otherwise expressly agreed in writing, nothing s=
tated in this communication shall be legally binding.

The ultimate parent company of the Atkins Group is WS Atkins plc.  Register=
ed in England No. 1885586.  Registered Office Woodcote Grove, Ashley Road, =
Epsom, Surrey KT18 5BW.

Consider the environment. Please don't print this e-mail unless you really =
need to.=20

------_=_NextPart_001_01C75040.18EBD0C1--

From java-user-return-26123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 14:02:42 2007
Return-Path: <java-user-return-26123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99934 invoked from network); 14 Feb 2007 14:02:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 14:02:41 -0000
Received: (qmail 36296 invoked by uid 500); 14 Feb 2007 14:02:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36263 invoked by uid 500); 14 Feb 2007 14:02:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 88239 invoked by uid 99); 14 Feb 2007 13:36:05 -0000
X-ASF-Spam-Status: No, hits=1.7 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (herse.apache.org: transitioning domain of bim2007@basistech.com does not designate 199.88.205.99 as permitted sender)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: encoding question.
Date: Wed, 14 Feb 2007 08:35:33 -0500
Message-ID: <E95FD77F0171D14DA1EEE0A785E92B4301AFE1B6@mail3.basistech.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: encoding question.
Thread-Index: AcdQFSUI59zUafKAT2a/a1Ge0BVTcQAJ8ssA
References: <34b8543c0702132146g76abec8t885ce611a84ccabd@mail.gmail.com> <Pine.LNX.4.58.0702140040420.13587@hal.rescomp.berkeley.edu>
From: "Benson Margulies" <bim2007@basistech.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

The usual source of this problem is HTML forms. If you want to get UTF-8
back from a form, you have to send \the form itself/ to the browser in
UTF-8.

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20
Sent: Wednesday, February 14, 2007 3:50 AM
To: java-user@lucene.apache.org
Subject: Re: encoding question.


Internally Lucene deals with pure Java Strings; when writing those
strings
to and reading those strings back from disk, Lucene allways uses the
stock
Java "modified UTF-8"  format, regardless of what your file.encoding
system property may be.

typcially when people have encoding problems in their lucene
applications,
the origin of hte problem is in the way they fetch the data before
indexing it ... if you can make a String object, and System.out.println
that string and see what you expect, then handing that string to Lucene
as
a field value should work fine.

what exactly is the "value" object you are calling getBytes on? ... if
it's another String, then you've already got serious problems -- i can't
imagine any situation where fetching the bytes from a String in one
charset and using those bytes to construct another string (either in a
different charset, or in the system default charset) would make any
sense
at all.

wherever your original binary data is coming from (files on disk,
network
socket, etcc...) that's when you should be converting those bytes into
chars using whatever charset you know those bytes represent.



: Date: Wed, 14 Feb 2007 09:16:58 +0330
: From: Mohammad Norouzi <mnrz57@gmail.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: encoding question.
:
: Hi
: I want to index data with utf-8 encoding, so when adding field to a
document
: I am using the code new String(value.getBytes("utf-8"))
: in the other hand, when I am going to search I was using the same
snippet
: code to convert to utf-8 but it did not work so finally I found
somewhere
: that had been said to use new
String(valueToSearch.getBytes("cp1252"),"UTF8")
: and it worked fine but I still has some problem.
: first, some characters are weird when I get result from lucene, It
seems it
: is in cp1252 encoding.
: second, if the java environment property "file.encoding" not been
cp1252 the
: result is completely in incorrect encoding. so I must change this
property
: using System.setProperty("file.encoding","cp1252")
:
: is lucene neglect my utf-8 encoding and proceed indexing data using
cp1252?
: how can I correct weird characters I received by searching?
:
: Thank you very much in advance.
: --
: Regards,
: Mohammad
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 14:03:50 2007
Return-Path: <java-user-return-26124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 459 invoked from network); 14 Feb 2007 14:03:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 14:03:49 -0000
Received: (qmail 39632 invoked by uid 500); 14 Feb 2007 14:03:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39585 invoked by uid 500); 14 Feb 2007 14:03:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39574 invoked by uid 99); 14 Feb 2007 14:03:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 06:03:48 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 06:03:38 -0800
Received: by nf-out-0910.google.com with SMTP id i2so622118nfe
        for <java-user@lucene.apache.org>; Wed, 14 Feb 2007 06:03:17 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=rZMEXUgw8m121+14uaBv6OpTwN7coLc4nzWVkn/HZ49sGCnN/qgtTA9+kQ01hoPCbk99h8GFGhk1qlVs9OYmmQdP81R6KjNClKyJD/n03qaF5rKylyrmGuvYYkCPbDLBQGrZxsav537UuGW/HJA05/juvz3AKPU8hqTWl85lTYk=
Received: by 10.82.187.16 with SMTP id k16mr735181buf.1171461797147;
        Wed, 14 Feb 2007 06:03:17 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Wed, 14 Feb 2007 06:03:17 -0800 (PST)
Message-ID: <359a92830702140603p63cee42ag48c2dfda71266fab@mail.gmail.com>
Date: Wed, 14 Feb 2007 09:03:17 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Omitting TermVector info and index size
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_121448_7965947.1171461797095"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_121448_7965947.1171461797095
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm indexing books, with a significant amount of overhead in each document
and a LOT of OCR data. I'm indexing over 20,000 books and the index size is
8G. So I decided to play around with not storing some of the termvector
information and I'm shocked at how much smaller the index is. By storing all
my fields with Field.TermVector.WITH_POSITIONS, my index is reduced by OVER
75%. It went from 485M to 100M for my sample of 1,000 documents. Which
implies my full index will be somewhere around 2G (I'll build the full index
tonight and see).

My reasoning was that I do need position information since I need to do Span
queries,  but character information (WITH_OFFSETS) isn't necessary here/now.
So I thought I'd make a small test to see if this was worth pursuing. If
omitting offsets had only saved me 10%, for instance, I wouldn't pursue it
very much. But 75+% is a savings well worth pursuing.

All of my unit tests run, some of which include spans and highlighting.
Whether they're sophisticated enough to catch some subtle issue I won't
guarantee.

I do NOT need to reconstruct the text, nor do I need to highlight with
what's in the index, I handle highlighting by putting my display data in a
MemoryIndex and running a query against that. I play some fun games to
correlate my display and MemoryIndex info, but that's another story. Many
thanks for the MemoryIndex contribution!!!

With that as a background, I have two questions....
1> Am I going off a cliff here? I suppose this is really answered by
2> what is the difference between WITH_POSITIONS and WITH_OFFSETS and YES
and NO? I assume that WITH_POSITIONS is necessary for Span queries, for
instance, which is all I really care about. While this has been discussed, I
searched and didn't find a satisfactory answer (or at least an answer that I
understood<G>).

I looked at Grants PowerPoint presentation and I guess I'm really looking
for confirmation of my interpretation that WITH_POSITIONS lets me do span
queries and WITH_OFFSETS is irrelevant in my situation, one where I don't
highlight and don't need to reconstruct the document......

Many thanks
Erick

------=_Part_121448_7965947.1171461797095--

From java-user-return-26125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 14:06:52 2007
Return-Path: <java-user-return-26125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 890 invoked from network); 14 Feb 2007 14:06:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 14:06:51 -0000
Received: (qmail 46774 invoked by uid 500); 14 Feb 2007 14:06:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46748 invoked by uid 500); 14 Feb 2007 14:06:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46737 invoked by uid 99); 14 Feb 2007 14:06:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 06:06:48 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 06:06:37 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HHKly-0000Cq-HV
	for java-user@lucene.apache.org; Wed, 14 Feb 2007 06:06:14 -0800
Message-ID: <8965471.post@talk.nabble.com>
Date: Wed, 14 Feb 2007 06:06:14 -0800 (PST)
From: poeta simbolista <poetasimbolista@gmail.com>
To: java-user@lucene.apache.org
Subject: Extending Query, Weight, Scorer
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: poetasimbolista@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi, 
I have created a Query that works for numerical max-min ranges, that may
work for any Field specified.
I have done that by extending Query, and creating own Weight and Scorer
subclasses as well.
So it works ... but I have problems when setting min or max boundary to 0:
In this case, those entries that do not have the field, happen as if they
had it with value 0. And I would like that, those not  having the field, not
scoring for the query. Code is below.

I have put a printout there on the bold statement. This printout gives me as
the size, the number of docs of the whole index. So it is retrieving all of
the documents, regardless they have the field or not. I assume that they
will store a zero if the entry does not have the field.

How could I get rid of those entries not having the field?
(If I cut as the min range with 1, it works fine; setting 0, it gives me all
the entries on the index).

Thank you

PS. Sorry for some variable names maybe not very descriptive :)

public class MaxMinQuery extends Query 
{
  // The min, max values to be accepted. 
  private int min;
  private int max;
  
  // The field to be used for queries.
  private String queryField;

  public MaxMinQuery(int min, int max, String field) 
  {
    this.min = min;
    this.max = max;
    this.queryField = field;
  }

  protected Weight createWeight(Searcher searcher) {
    return new FloatFieldWeight(searcher, this);
  }

  public String toString(String string) {
    return queryField + ":[min=" + min + " max=" + max + "]";
  }

  private class FloatFieldWeight implements Weight {
    private Searcher searcher;
    private MaxMinQuery query;
    private String queryField;
    
    public FloatFieldWeight(Searcher searcher, MaxMinQuery query) {
      this.searcher = searcher;
      this.query = query;
      this.queryField = query.queryField;
    }

    public Query getQuery() {
      return query;
    }

    public float getValue() {
      return 1;
    }

    public float sumOfSquaredWeights() throws IOException {
      return 1;
    }

    public void normalize(float v) {

    }

    public Scorer scorer(IndexReader indexReader) throws IOException {
      final float[] prices = FieldCache.DEFAULT.getFloats(indexReader, );
    		  this.queryField);
      System.out.println("PRICES SIZE: " + prices.length);
      return new FloatFieldScorer(getSimilarity(searcher), prices);
    }

    public Explanation explain(IndexReader indexReader, int i) throws
IOException {
      return scorer(indexReader).explain(i);
    }
  }

  private class FloatFieldScorer extends Scorer {
    private float[] prices;
    private int idx = -1;

    public FloatFieldScorer(Similarity similarity, float[] prices) {
      super(similarity);
      this.prices = prices;
    }

    public boolean next() throws IOException {
      return (++idx < prices.length);
    }

    public int doc() {
      return idx;
    }

    public float score() throws IOException {
    	
      if (prices[idx] > max || prices[idx] < min)
        return -Float.MAX_VALUE;

      return 1;
    }

    public boolean skipTo(int i) throws IOException {
      idx = i;
      return idx < prices.length;
    }

    public Explanation explain(int i) throws IOException {
      return new Explanation();
    }
  }
}
-- 
View this message in context: http://www.nabble.com/Extending-Query%2C-Weight%2C-Scorer-tf3227441.html#a8965471
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 14:08:49 2007
Return-Path: <java-user-return-26126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1341 invoked from network); 14 Feb 2007 14:08:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 14:08:48 -0000
Received: (qmail 52800 invoked by uid 500); 14 Feb 2007 14:08:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52767 invoked by uid 500); 14 Feb 2007 14:08:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52756 invoked by uid 99); 14 Feb 2007 14:08:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 06:08:48 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 06:08:37 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id EBE3C30EFC17; Wed, 14 Feb 2007 09:08:16 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 0166830EFC16
	for <java-user@lucene.apache.org>; Wed, 14 Feb 2007 09:08:13 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <359a92830702140603p63cee42ag48c2dfda71266fab@mail.gmail.com>
References: <359a92830702140603p63cee42ag48c2dfda71266fab@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <F55E3C6C-2F12-4E55-8B43-672B0E6D9BBC@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Omitting TermVector info and index size
Date: Wed, 14 Feb 2007 09:08:11 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.1.1


On Feb 14, 2007, at 9:03 AM, Erick Erickson wrote:
> My reasoning was that I do need position information since I need  
> to do Span
> queries,  but character information (WITH_OFFSETS) isn't necessary  
> here/now.

> 1> Am I going off a cliff here? I suppose this is really answered by
> 2> what is the difference between WITH_POSITIONS and WITH_OFFSETS  
> and YES
> and NO? I assume that WITH_POSITIONS is necessary for Span queries,  
> for
> instance, which is all I really care about. While this has been  
> discussed, I
> searched and didn't find a satisfactory answer (or at least an  
> answer that I
> understood<G>).

A normal analyzed field is sufficient for span queries.  Term vectors  
are not needed for any of the built-in Query classes.  The term  
vector stuff is more sophisticated techniques, not normal querying.   
And they aren't necessary for highlighting either.  Unless you have  
something fancy in mind specifically requiring term vectors (latent  
semantic stuff, for example) you're better off without 'em.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 14:11:18 2007
Return-Path: <java-user-return-26127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2030 invoked from network); 14 Feb 2007 14:11:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 14:11:16 -0000
Received: (qmail 56809 invoked by uid 500); 14 Feb 2007 14:11:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56788 invoked by uid 500); 14 Feb 2007 14:11:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56777 invoked by uid 99); 14 Feb 2007 14:11:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 06:11:16 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 06:11:06 -0800
Received: by nf-out-0910.google.com with SMTP id i2so624374nfe
        for <java-user@lucene.apache.org>; Wed, 14 Feb 2007 06:10:45 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=EeUqcLdf+oFETXqtu1OHs5xa2sRqwirV0rJArMrJNaANwO81xBv+mVhqYsn7cKLWmNO9jYTXdVBKt9m6htixjv9qqdbRSmYjqv+tDss9gqw5rw/YTrWb75oV+7a4v1pFrRtrSK31yMqTEYCrrOqMv3E+Xo8APEkBO3vqYv+AMQ8=
Received: by 10.82.155.10 with SMTP id c10mr750024bue.1171462244980;
        Wed, 14 Feb 2007 06:10:44 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Wed, 14 Feb 2007 06:10:44 -0800 (PST)
Message-ID: <359a92830702140610i15596442k8b72d6a4b6049767@mail.gmail.com>
Date: Wed, 14 Feb 2007 09:10:44 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Caching
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705CDAC20@SGBLOW2101.wsatkins.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_121648_11600671.1171462244900"
References: <BC1CFC544422CB4A934908E126A4742705CDAC20@SGBLOW2101.wsatkins.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_121648_11600671.1171462244900
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This is really an unanswerable question, since, to steal a phrase, "It
depends" <G>...

Do you have any reason to believe that the current performance is inadequate
for you application? Caching is notoriously difficult to get right, so I
wouldn't go there unless there is a *demonstrated* need. By demonstrated, I
mean that you run some tests against your actual data with simulated queries
and measure. By definition, Lucene's caching is "any good" if your
performance meets your target as is. Only if your application does NOT meet
your targets should you consider an additional caching layer. And even in
this case, I'd spend significant time looking at exactly *where* in my
application things were slow rather than jump to caching as an answer.

I do not believe that Lucene actually caches the results of queries. I
believe that Lucene builds caches of terms, sorting information, etc. that
are then applied to all subsequent queries, and that these are the caches
that are built at the first query. So, say storing the results of a query
somewhere and returning that stored copy for the *next* query that is
identical is not something I'd expect Lucene to do.

Best
Erick

On 2/14/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
>
> Hi all,
>
> I have read that Lucene performs caching of search results so that if
> you perform the same search in succession the second result should be
> returned faster.  What I wanted to ask is whether this caching is any
> good or whether it's a good idea to add some sort of caching layer on
> top of Lucene to improve on it.
>
> Any comments will be appreciated.
>
> Thanks
>
> Sachin
>
>
>
> This email and any attached files are confidential and copyright
> protected. If you are not the addressee, any dissemination of this
> communication is strictly prohibited. Unless otherwise expressly agreed in
> writing, nothing stated in this communication shall be legally binding.
>
> The ultimate parent company of the Atkins Group is WS Atkins
> plc.  Registered in England No. 1885586.  Registered Office Woodcote Grove,
> Ashley Road, Epsom, Surrey KT18 5BW.
>
> Consider the environment. Please don't print this e-mail unless you really
> need to.
>

------=_Part_121648_11600671.1171462244900--

From java-user-return-26128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 14:13:13 2007
Return-Path: <java-user-return-26128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3046 invoked from network); 14 Feb 2007 14:13:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 14:13:12 -0000
Received: (qmail 62420 invoked by uid 500); 14 Feb 2007 14:13:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62394 invoked by uid 500); 14 Feb 2007 14:13:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62383 invoked by uid 99); 14 Feb 2007 14:13:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 06:13:11 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 06:13:01 -0800
Received: by nf-out-0910.google.com with SMTP id i2so624981nfe
        for <java-user@lucene.apache.org>; Wed, 14 Feb 2007 06:12:40 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GwWZwTvR5Ckx9ptsHrEPt6de1SogFivk+vo0qK5WDYyRfG/NmLXp06axY7+BSh1zH9RSkbUNvmr8U6z1zZDILcQgyzQKScBt4spin93rQLkuEJSlSditdbhHzzyvs0IdugANDe61dq3jLp72UwIlpTik23UfbxE28KJjdfxpR38=
Received: by 10.82.187.16 with SMTP id k16mr752174buf.1171462360028;
        Wed, 14 Feb 2007 06:12:40 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Wed, 14 Feb 2007 06:12:39 -0800 (PST)
Message-ID: <359a92830702140612n27886a46x907240c82321f1fb@mail.gmail.com>
Date: Wed, 14 Feb 2007 09:12:39 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Omitting TermVector info and index size
In-Reply-To: <F55E3C6C-2F12-4E55-8B43-672B0E6D9BBC@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_121680_13675335.1171462359222"
References: <359a92830702140603p63cee42ag48c2dfda71266fab@mail.gmail.com>
	 <F55E3C6C-2F12-4E55-8B43-672B0E6D9BBC@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_121680_13675335.1171462359222
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You've made me a happy man <G>.

Thanks again.
Erick@ThisIsTheWayWeReallySpellTheName.org <G>.

On 2/14/07, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>
>
> On Feb 14, 2007, at 9:03 AM, Erick Erickson wrote:
> > My reasoning was that I do need position information since I need
> > to do Span
> > queries,  but character information (WITH_OFFSETS) isn't necessary
> > here/now.
>
> > 1> Am I going off a cliff here? I suppose this is really answered by
> > 2> what is the difference between WITH_POSITIONS and WITH_OFFSETS
> > and YES
> > and NO? I assume that WITH_POSITIONS is necessary for Span queries,
> > for
> > instance, which is all I really care about. While this has been
> > discussed, I
> > searched and didn't find a satisfactory answer (or at least an
> > answer that I
> > understood<G>).
>
> A normal analyzed field is sufficient for span queries.  Term vectors
> are not needed for any of the built-in Query classes.  The term
> vector stuff is more sophisticated techniques, not normal querying.
> And they aren't necessary for highlighting either.  Unless you have
> something fancy in mind specifically requiring term vectors (latent
> semantic stuff, for example) you're better off without 'em.
>
>         Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_121680_13675335.1171462359222--

From java-user-return-26129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 14:13:23 2007
Return-Path: <java-user-return-26129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3106 invoked from network); 14 Feb 2007 14:13:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 14:13:22 -0000
Received: (qmail 63791 invoked by uid 500); 14 Feb 2007 14:13:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63768 invoked by uid 500); 14 Feb 2007 14:13:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63749 invoked by uid 99); 14 Feb 2007 14:13:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 06:13:19 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 06:13:06 -0800
Received: by ug-out-1314.google.com with SMTP id k40so204969ugc
        for <java-user@lucene.apache.org>; Wed, 14 Feb 2007 06:12:45 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=TpeQXLV9k40IAnYxSYKg+ccvQHpXvFd0qqHqK8Mu6mwIVaKuycQxAidBZlMP3bkVxuJ596yLoMSPr5o0FF2K+SXWEX4jZSp66WT64MSbYjH5Q5BNearc8ClKMihCaK/GrUV66RkUIngoTnd2VAsd1NeI5GLuyDLsHzdt1ZcMIuU=
Received: by 10.67.106.3 with SMTP id i3mr391873ugm.1171462365516;
        Wed, 14 Feb 2007 06:12:45 -0800 (PST)
Received: from ?192.168.1.3? ( [83.249.110.75])
        by mx.google.com with ESMTP id g30sm988805ugd.2007.02.14.06.12.44;
        Wed, 14 Feb 2007 06:12:44 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705CDAC20@SGBLOW2101.wsatkins.com>
References: <BC1CFC544422CB4A934908E126A4742705CDAC20@SGBLOW2101.wsatkins.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <577AF335-90E2-40E0-8350-FC90A51614BD@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Caching
Date: Wed, 14 Feb 2007 15:11:23 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


14 feb 2007 kl. 14.57 skrev Kainth, Sachin:
>
> I have read that Lucene performs caching of search results so that if
> you perform the same search in succession the second result should be
> returned faster.  What I wanted to ask is whether this caching is any
> good or whether it's a good idea to add some sort of caching layer on
> top of Lucene to improve on it.

There is some fairly advanced caching on top of the Searcher going on
in both Solr and LUCENE-550. In some cases I've using nothing more
than a simple Map<Query, ScoreDoc[]> cleared on index updates and seen
the CPU go from 1% idle to 90% idle.

What you should use really depends on your index and how the users act.

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 14:18:06 2007
Return-Path: <java-user-return-26130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5157 invoked from network); 14 Feb 2007 14:18:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 14:18:06 -0000
Received: (qmail 80892 invoked by uid 500); 14 Feb 2007 14:18:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80861 invoked by uid 500); 14 Feb 2007 14:18:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80850 invoked by uid 99); 14 Feb 2007 14:18:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 06:18:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 06:17:53 -0800
Received: by ug-out-1314.google.com with SMTP id k40so206601ugc
        for <java-user@lucene.apache.org>; Wed, 14 Feb 2007 06:17:31 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=RubxKm3Fr3qnWV0W18lcTirtmnwfnVmAo6ClJp5I/KQtmnSmkbrWCwFMcztjiCd+F0d9kpBxrFx0bWKpoGX0UeHCt5OFco1+pmHmBN/nUvAqxGDoczQ8Oz9ByaOrCYSfwE3x5XYjgmtzRN77pi+cjSPxnOgQdrvRPKtw4CJdshM=
Received: by 10.67.28.4 with SMTP id f4mr228738ugj.1171462651780;
        Wed, 14 Feb 2007 06:17:31 -0800 (PST)
Received: from ?192.168.1.3? ( [83.249.110.75])
        by mx.google.com with ESMTP id q1sm1000678uge.2007.02.14.06.17.30;
        Wed, 14 Feb 2007 06:17:31 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <359a92830702140603p63cee42ag48c2dfda71266fab@mail.gmail.com>
References: <359a92830702140603p63cee42ag48c2dfda71266fab@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <DACEAA2B-5EFA-47B3-955E-593B4442DBC6@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Omitting TermVector info and index size
Date: Wed, 14 Feb 2007 15:16:09 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


14 feb 2007 kl. 15.03 skrev Erick Erickson:

> My reasoning was that I do need position information since I need  
> to do Span
> queries,  but character information (WITH_OFFSETS) isn't necessary  
> here/now.
> So I thought I'd make a small test to see if this was worth  
> pursuing. If
> omitting offsets had only saved me 10%, for instance, I wouldn't  
> pursue it
> very much. But 75+% is a savings well worth pursuing.

Spans don't rely on the TermPositionVector, do they?

I always thought that the data from IndexReader#termPositions came  
from some
other source. Or so.

-- 
karl



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 14:30:25 2007
Return-Path: <java-user-return-26131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19528 invoked from network); 14 Feb 2007 14:30:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 14:30:25 -0000
Received: (qmail 17245 invoked by uid 500); 14 Feb 2007 14:30:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17210 invoked by uid 500); 14 Feb 2007 14:30:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17199 invoked by uid 99); 14 Feb 2007 14:30:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 06:30:24 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 06:30:14 -0800
Received: by nf-out-0910.google.com with SMTP id i2so630736nfe
        for <java-user@lucene.apache.org>; Wed, 14 Feb 2007 06:29:51 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=hpDwtyjCKMzEoUgfeZ/ceFO7TWEL7A9Hzrl6Mg0RZWXntK3BTRof2BQZGV0xSXSOjIn7W2QxXMOt8dqbFxrde8IfYKgwDNJdHKN8TbfMoCYz16JR4ODKbf4R3sax5ISvIMal+y1BCAPjMlbBrgDwRhhtB7B550pnl+n/q1kA5p8=
Received: by 10.82.172.15 with SMTP id u15mr781648bue.1171463390429;
        Wed, 14 Feb 2007 06:29:50 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Wed, 14 Feb 2007 06:29:50 -0800 (PST)
Message-ID: <359a92830702140629v52968dafj19b906cca223cbd4@mail.gmail.com>
Date: Wed, 14 Feb 2007 09:29:50 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Omitting TermVector info and index size
In-Reply-To: <DACEAA2B-5EFA-47B3-955E-593B4442DBC6@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_121808_19219835.1171463390402"
References: <359a92830702140603p63cee42ag48c2dfda71266fab@mail.gmail.com>
	 <DACEAA2B-5EFA-47B3-955E-593B4442DBC6@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_121808_19219835.1171463390402
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Erik Hatcher sez no.

Erick

On 2/14/07, karl wettin <karl.wettin@gmail.com> wrote:
>
>
> 14 feb 2007 kl. 15.03 skrev Erick Erickson:
>
> > My reasoning was that I do need position information since I need
> > to do Span
> > queries,  but character information (WITH_OFFSETS) isn't necessary
> > here/now.
> > So I thought I'd make a small test to see if this was worth
> > pursuing. If
> > omitting offsets had only saved me 10%, for instance, I wouldn't
> > pursue it
> > very much. But 75+% is a savings well worth pursuing.
>
> Spans don't rely on the TermPositionVector, do they?
>
> I always thought that the data from IndexReader#termPositions came
> from some
> other source. Or so.
>
> --
> karl
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_121808_19219835.1171463390402--

From java-user-return-26132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 14:31:55 2007
Return-Path: <java-user-return-26132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20098 invoked from network); 14 Feb 2007 14:31:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 14:31:54 -0000
Received: (qmail 22227 invoked by uid 500); 14 Feb 2007 14:31:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22197 invoked by uid 500); 14 Feb 2007 14:31:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22186 invoked by uid 99); 14 Feb 2007 14:31:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 06:31:55 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 217.69.20.190 as permitted sender)
Received: from [217.69.20.190] (HELO cluster-d.mailcontrol.com) (217.69.20.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 06:31:41 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly43d.srv.mailcontrol.com (MailControl) with SMTP id l1EEVJwJ031094
	for <java-user@lucene.apache.org>; Wed, 14 Feb 2007 14:31:19 GMT
Received: From SGBD012104.wsatkins.com ([10.202.26.18]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 1171463461275; Wed, 14 Feb 2007 14:31:01 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012104.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 14 Feb 2007 14:31:01 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Caching
Date: Wed, 14 Feb 2007 14:30:59 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705CDAD3F@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Caching
Thread-Index: AcdQQgSAUj+CByGZTdOCp/LoqPehWQAAm6pw
References: <BC1CFC544422CB4A934908E126A4742705CDAC20@SGBLOW2101.wsatkins.com> <359a92830702140610i15596442k8b72d6a4b6049767@mail.gmail.com>
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 14 Feb 2007 14:31:01.0193 (UTC) FILETIME=[BFF63390:01C75044]
X-Scanned-By: MailControl A-07-06-80 (www.mailcontrol.com) on 10.68.0.153
X-Virus-Checked: Checked by ClamAV on apache.org

Well,

I have an index with 5.2 million records (each record containing 3
fields) and it sometimes takes about a minute and a half for results to
come back.  I have noticed however, that when I run the same query the
second time the result comes back faster.  I just thought that this was
a bit too slow and that perhaps I should implement a caching strategy.=20

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: 14 February 2007 14:11
To: java-user@lucene.apache.org
Subject: Re: Caching

This is really an unanswerable question, since, to steal a phrase, "It
depends" <G>...

Do you have any reason to believe that the current performance is
inadequate for you application? Caching is notoriously difficult to get
right, so I wouldn't go there unless there is a *demonstrated* need. By
demonstrated, I mean that you run some tests against your actual data
with simulated queries and measure. By definition, Lucene's caching is
"any good" if your performance meets your target as is. Only if your
application does NOT meet your targets should you consider an additional
caching layer. And even in this case, I'd spend significant time looking
at exactly *where* in my application things were slow rather than jump
to caching as an answer.

I do not believe that Lucene actually caches the results of queries. I
believe that Lucene builds caches of terms, sorting information, etc.
that are then applied to all subsequent queries, and that these are the
caches that are built at the first query. So, say storing the results of
a query somewhere and returning that stored copy for the *next* query
that is identical is not something I'd expect Lucene to do.

Best
Erick

On 2/14/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
>
> Hi all,
>
> I have read that Lucene performs caching of search results so that if=20
> you perform the same search in succession the second result should be=20
> returned faster.  What I wanted to ask is whether this caching is any=20
> good or whether it's a good idea to add some sort of caching layer on=20
> top of Lucene to improve on it.
>
> Any comments will be appreciated.
>
> Thanks
>
> Sachin
>
>
>
> This email and any attached files are confidential and copyright=20
> protected. If you are not the addressee, any dissemination of this=20
> communication is strictly prohibited. Unless otherwise expressly=20
> agreed in writing, nothing stated in this communication shall be
legally binding.
>
> The ultimate parent company of the Atkins Group is WS Atkins plc. =20
> Registered in England No. 1885586.  Registered Office Woodcote Grove,=20
> Ashley Road, Epsom, Surrey KT18 5BW.
>
> Consider the environment. Please don't print this e-mail unless you=20
> really need to.
>


This message has been scanned for viruses by MailControl - (see
http://bluepages.wsatkins.co.uk/?4318150)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 14:37:06 2007
Return-Path: <java-user-return-26133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22968 invoked from network); 14 Feb 2007 14:37:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 14:37:04 -0000
Received: (qmail 48324 invoked by uid 500); 14 Feb 2007 14:36:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48297 invoked by uid 500); 14 Feb 2007 14:36:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48275 invoked by uid 99); 14 Feb 2007 14:36:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 06:36:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a2.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 06:36:40 -0800
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a2.g.dreamhost.com (Postfix) with ESMTP id 0F8B5879DA
	for <java-user@lucene.apache.org>; Wed, 14 Feb 2007 06:36:17 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <359a92830702140603p63cee42ag48c2dfda71266fab@mail.gmail.com>
References: <359a92830702140603p63cee42ag48c2dfda71266fab@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <32B49D51-466F-438D-8BCD-B8B7E89D8D88@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Omitting TermVector info and index size
Date: Wed, 14 Feb 2007 09:36:15 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

As Erik stated, you don't need term vectors to do spans, but I  
thought I would add a bit on the difference between positions and  
offsets.

Positions are what is stored in Lucene internally (see  
Token.getPositionIncrement() and TermPositions) and are usually just  
consecutive integers (although they can be manipulated, as can the  
offsets), whereas offsets are the character offsets from the indexed  
text (see Token.startOffset() and Token.endOffset()).

I haven't used the highlighter, but I think it does have options for  
working with term vectors so that you don't have to re-analyze  
everything, so there may be some performance benefit to storing them,  
at the cost of disk space, like you said.

On Feb 14, 2007, at 9:03 AM, Erick Erickson wrote:

> I'm indexing books, with a significant amount of overhead in each  
> document
> and a LOT of OCR data. I'm indexing over 20,000 books and the index  
> size is
> 8G. So I decided to play around with not storing some of the  
> termvector
> information and I'm shocked at how much smaller the index is. By  
> storing all
> my fields with Field.TermVector.WITH_POSITIONS, my index is reduced  
> by OVER
> 75%. It went from 485M to 100M for my sample of 1,000 documents. Which
> implies my full index will be somewhere around 2G (I'll build the  
> full index
> tonight and see).
>
> My reasoning was that I do need position information since I need  
> to do Span
> queries,  but character information (WITH_OFFSETS) isn't necessary  
> here/now.
> So I thought I'd make a small test to see if this was worth  
> pursuing. If
> omitting offsets had only saved me 10%, for instance, I wouldn't  
> pursue it
> very much. But 75+% is a savings well worth pursuing.
>
> All of my unit tests run, some of which include spans and  
> highlighting.
> Whether they're sophisticated enough to catch some subtle issue I  
> won't
> guarantee.
>
> I do NOT need to reconstruct the text, nor do I need to highlight with
> what's in the index, I handle highlighting by putting my display  
> data in a
> MemoryIndex and running a query against that. I play some fun games to
> correlate my display and MemoryIndex info, but that's another  
> story. Many
> thanks for the MemoryIndex contribution!!!
>
> With that as a background, I have two questions....
> 1> Am I going off a cliff here? I suppose this is really answered by
> 2> what is the difference between WITH_POSITIONS and WITH_OFFSETS  
> and YES
> and NO? I assume that WITH_POSITIONS is necessary for Span queries,  
> for
> instance, which is all I really care about. While this has been  
> discussed, I
> searched and didn't find a satisfactory answer (or at least an  
> answer that I
> understood<G>).
>
> I looked at Grants PowerPoint presentation and I guess I'm really  
> looking
> for confirmation of my interpretation that WITH_POSITIONS lets me  
> do span
> queries and WITH_OFFSETS is irrelevant in my situation, one where I  
> don't
> highlight and don't need to reconstruct the document......
>
> Many thanks
> Erick

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 14:42:57 2007
Return-Path: <java-user-return-26134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25487 invoked from network); 14 Feb 2007 14:42:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 14:42:56 -0000
Received: (qmail 61625 invoked by uid 500); 14 Feb 2007 14:42:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61569 invoked by uid 500); 14 Feb 2007 14:42:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61558 invoked by uid 99); 14 Feb 2007 14:42:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 06:42:57 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.162.234 as permitted sender)
Received: from [64.233.162.234] (HELO nz-out-0506.google.com) (64.233.162.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 06:42:46 -0800
Received: by nz-out-0506.google.com with SMTP id i1so190057nzh
        for <java-user@lucene.apache.org>; Wed, 14 Feb 2007 06:42:26 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=W5Bs8ujkU8GYTIRTHmqbOIc/ya5q6Jm3goFP1N4kTsK3f0DZAD30Urb8GS+9gvvHGZ1xZWsuQRGduLdm+IKir/4cmQb1BLkrgDoKdqzpa+n0ip/giCK+a3NdTW1HDd6k7v2Vkgg3uSigV3hjJk1P+8vHcdXK0yPZMH5brC4t/Hg=
Received: by 10.114.195.19 with SMTP id s19mr188538waf.1171464145753;
        Wed, 14 Feb 2007 06:42:25 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 10sm1296793wrl.2007.02.14.06.42.23;
        Wed, 14 Feb 2007 06:42:25 -0800 (PST)
Message-ID: <45D31F9E.9070103@gmail.com>
Date: Wed, 14 Feb 2007 09:41:34 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Omitting TermVector info and index size
References: <359a92830702140603p63cee42ag48c2dfda71266fab@mail.gmail.com>	 <DACEAA2B-5EFA-47B3-955E-593B4442DBC6@gmail.com> <359a92830702140629v52968dafj19b906cca223cbd4@mail.gmail.com>
In-Reply-To: <359a92830702140629v52968dafj19b906cca223cbd4@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

As Erick said, Term positions are kept regardless of whether you store 
term vectors. The positional information is needed for phrase queries, 
span queries, etc. You certainly don't lose the ability to use phrase 
queries if you do not store term vectors. If you check out the Posting 
class in DocumentWriter you can trace around and see how positions are 
stored at the same basic level as the term that is stored. Positions are 
first class citizens <g>.

- Mark

Erick Erickson wrote:
> Erik Hatcher sez no.
>
> Erick
>
> On 2/14/07, karl wettin <karl.wettin@gmail.com> wrote:
>>
>>
>> 14 feb 2007 kl. 15.03 skrev Erick Erickson:
>>
>> > My reasoning was that I do need position information since I need
>> > to do Span
>> > queries,  but character information (WITH_OFFSETS) isn't necessary
>> > here/now.
>> > So I thought I'd make a small test to see if this was worth
>> > pursuing. If
>> > omitting offsets had only saved me 10%, for instance, I wouldn't
>> > pursue it
>> > very much. But 75+% is a savings well worth pursuing.
>>
>> Spans don't rely on the TermPositionVector, do they?
>>
>> I always thought that the data from IndexReader#termPositions came
>> from some
>> other source. Or so.
>>
>> -- 
>> karl
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 14:44:47 2007
Return-Path: <java-user-return-26135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26643 invoked from network); 14 Feb 2007 14:44:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 14:44:47 -0000
Received: (qmail 65035 invoked by uid 500); 14 Feb 2007 14:44:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65008 invoked by uid 500); 14 Feb 2007 14:44:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64997 invoked by uid 99); 14 Feb 2007 14:44:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 06:44:47 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 06:44:37 -0800
Received: by nf-out-0910.google.com with SMTP id i2so635584nfe
        for <java-user@lucene.apache.org>; Wed, 14 Feb 2007 06:44:15 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=tGve4AHtC8Ut45AhrBuMO88NvIDQPvviu6QOaeOvoKSsB1Vlocp2l/8WXD6OIJrZIs7qVBw2qiltNTbzlhuNQW7NTjoSP6Bc31JfEhbn1SdBc8aO2WdUfAJfAuLEZ6q3hYCJVbC6sVwYWxg00hbOw0M8TCQAVclbrLtFe8Gj3aY=
Received: by 10.82.152.16 with SMTP id z16mr811040bud.1171464254540;
        Wed, 14 Feb 2007 06:44:14 -0800 (PST)
Received: by 10.82.106.19 with HTTP; Wed, 14 Feb 2007 06:44:14 -0800 (PST)
Message-ID: <c68e39170702140644s70538ee3j6d677f9d2ea60024@mail.gmail.com>
Date: Wed, 14 Feb 2007 09:44:14 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Caching
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705CDAD3F@SGBLOW2101.wsatkins.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <BC1CFC544422CB4A934908E126A4742705CDAC20@SGBLOW2101.wsatkins.com>
	 <359a92830702140610i15596442k8b72d6a4b6049767@mail.gmail.com>
	 <BC1CFC544422CB4A934908E126A4742705CDAD3F@SGBLOW2101.wsatkins.com>
X-Google-Sender-Auth: eb9532bed9d4e756
X-Virus-Checked: Checked by ClamAV on apache.org

On 2/14/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
> I have an index with 5.2 million records (each record containing 3
> fields) and it sometimes takes about a minute and a half for results to
> come back.

Doe to sort fields (and other factors), the first query can be slow.
Solr has built-in support for warming in the background (doing this
slow first query itself so no client query pays that price).

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 14:48:43 2007
Return-Path: <java-user-return-26136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28699 invoked from network); 14 Feb 2007 14:48:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 14:48:40 -0000
Received: (qmail 78071 invoked by uid 500); 14 Feb 2007 14:48:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78035 invoked by uid 500); 14 Feb 2007 14:48:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78003 invoked by uid 99); 14 Feb 2007 14:48:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 06:48:38 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 06:48:28 -0800
Received: by nf-out-0910.google.com with SMTP id i2so636930nfe
        for <java-user@lucene.apache.org>; Wed, 14 Feb 2007 06:48:06 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=TuEW2AcpmqbxyPQqGswZ7dh3KFJjp19nWVA9qrV6fiOocRguuBiwE4cLHuy2vVblYIkifgAY2mA2GrHOlbyln9N3gnktIalK99uAOvPu/zIm+ugbjx35PSJ9Q2bsXNan0f4uemmt+RO1FUU5p0LgNrypAZQ8igV2FJkmur/x2P4=
Received: by 10.82.163.13 with SMTP id l13mr809372bue.1171464486114;
        Wed, 14 Feb 2007 06:48:06 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Wed, 14 Feb 2007 06:48:06 -0800 (PST)
Message-ID: <359a92830702140648g1bb7e9adr92dc1de77aefa79e@mail.gmail.com>
Date: Wed, 14 Feb 2007 09:48:06 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Omitting TermVector info and index size
In-Reply-To: <32B49D51-466F-438D-8BCD-B8B7E89D8D88@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_122200_27502268.1171464486073"
References: <359a92830702140603p63cee42ag48c2dfda71266fab@mail.gmail.com>
	 <32B49D51-466F-438D-8BCD-B8B7E89D8D88@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_122200_27502268.1171464486073
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks for that addition, it may well be important to me (as well as
pointing up a weakness in my unit tests. Honest, I've been thinking about
explicitly testing this. Really. I'll get around to it real soon now.
Truly....). We store multiple entries in the same field, think of it as
storing a list of content. For instance....

this is subject entry one
this is subject entry two
this is subject entry three

all stored by separate calls to doc.add("subject", .....);

One consequence of this is that doing a span query, say "one this"~2 should
NOT hit. So I've been setting the positionincrementgap to 1,000 between
successive calls to doc.add.

If 'm reading your e-mail correctly, this implies that I *do* need to use
WITH_POSITIONS. Correct? I know, I know. Just write the cursed unit test and
answer your own question alright already......

And then Mark's e-mail leads me to think I *don't* need to use
WITH_POSITIONS. So I *will* write the unit test today. Honest. Oh, and Mark,
Erik said that, not Erick <G>....... He's undoubtedly much more handsome
than me, so wouldn't appreciate being confused....

Thanks again all
Erick

On 2/14/07, Grant Ingersoll <gsingers@apache.org> wrote:
>
> As Erik stated, you don't need term vectors to do spans, but I
> thought I would add a bit on the difference between positions and
> offsets.
>
> Positions are what is stored in Lucene internally (see
> Token.getPositionIncrement() and TermPositions) and are usually just
> consecutive integers (although they can be manipulated, as can the
> offsets), whereas offsets are the character offsets from the indexed
> text (see Token.startOffset() and Token.endOffset()).
>
> I haven't used the highlighter, but I think it does have options for
> working with term vectors so that you don't have to re-analyze
> everything, so there may be some performance benefit to storing them,
> at the cost of disk space, like you said.
>
> On Feb 14, 2007, at 9:03 AM, Erick Erickson wrote:
>
> > I'm indexing books, with a significant amount of overhead in each
> > document
> > and a LOT of OCR data. I'm indexing over 20,000 books and the index
> > size is
> > 8G. So I decided to play around with not storing some of the
> > termvector
> > information and I'm shocked at how much smaller the index is. By
> > storing all
> > my fields with Field.TermVector.WITH_POSITIONS, my index is reduced
> > by OVER
> > 75%. It went from 485M to 100M for my sample of 1,000 documents. Which
> > implies my full index will be somewhere around 2G (I'll build the
> > full index
> > tonight and see).
> >
> > My reasoning was that I do need position information since I need
> > to do Span
> > queries,  but character information (WITH_OFFSETS) isn't necessary
> > here/now.
> > So I thought I'd make a small test to see if this was worth
> > pursuing. If
> > omitting offsets had only saved me 10%, for instance, I wouldn't
> > pursue it
> > very much. But 75+% is a savings well worth pursuing.
> >
> > All of my unit tests run, some of which include spans and
> > highlighting.
> > Whether they're sophisticated enough to catch some subtle issue I
> > won't
> > guarantee.
> >
> > I do NOT need to reconstruct the text, nor do I need to highlight with
> > what's in the index, I handle highlighting by putting my display
> > data in a
> > MemoryIndex and running a query against that. I play some fun games to
> > correlate my display and MemoryIndex info, but that's another
> > story. Many
> > thanks for the MemoryIndex contribution!!!
> >
> > With that as a background, I have two questions....
> > 1> Am I going off a cliff here? I suppose this is really answered by
> > 2> what is the difference between WITH_POSITIONS and WITH_OFFSETS
> > and YES
> > and NO? I assume that WITH_POSITIONS is necessary for Span queries,
> > for
> > instance, which is all I really care about. While this has been
> > discussed, I
> > searched and didn't find a satisfactory answer (or at least an
> > answer that I
> > understood<G>).
> >
> > I looked at Grants PowerPoint presentation and I guess I'm really
> > looking
> > for confirmation of my interpretation that WITH_POSITIONS lets me
> > do span
> > queries and WITH_OFFSETS is irrelevant in my situation, one where I
> > don't
> > highlight and don't need to reconstruct the document......
> >
> > Many thanks
> > Erick
>
> --------------------------
> Grant Ingersoll
> Center for Natural Language Processing
> http://www.cnlp.org
>
> Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/
> LuceneFAQ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_122200_27502268.1171464486073--

From java-user-return-26137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 14:49:26 2007
Return-Path: <java-user-return-26137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29227 invoked from network); 14 Feb 2007 14:49:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 14:49:25 -0000
Received: (qmail 82415 invoked by uid 500); 14 Feb 2007 14:49:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82375 invoked by uid 500); 14 Feb 2007 14:49:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82364 invoked by uid 99); 14 Feb 2007 14:49:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 06:49:24 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.237 as permitted sender)
Received: from [66.249.82.237] (HELO wx-out-0506.google.com) (66.249.82.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 06:49:13 -0800
Received: by wx-out-0506.google.com with SMTP id i29so210765wxd
        for <java-user@lucene.apache.org>; Wed, 14 Feb 2007 06:48:52 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=MSryB2mNB0Xl5AdOODhBuMDpp+7BKHvaihMZK1t4jb2m2mIm9SX4kS2VENcpTf7zNwu47E/vwAOrOP20vzmk9JqxMQHWHdXi8cOtcIcmbyHiXSEZCD0WO0PuZoMj1Vzk+jm52Ey7gLPERTjUMTKjeWsBzfAR7HmSxzeBYmscrWU=
Received: by 10.90.101.19 with SMTP id y19mr662688agb.1171464532589;
        Wed, 14 Feb 2007 06:48:52 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 13sm2057128wrl.2007.02.14.06.48.47;
        Wed, 14 Feb 2007 06:48:50 -0800 (PST)
Message-ID: <45D3211C.2090607@gmail.com>
Date: Wed, 14 Feb 2007 09:47:56 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Caching
References: <BC1CFC544422CB4A934908E126A4742705CDAC20@SGBLOW2101.wsatkins.com>	 <359a92830702140610i15596442k8b72d6a4b6049767@mail.gmail.com>	 <BC1CFC544422CB4A934908E126A4742705CDAD3F@SGBLOW2101.wsatkins.com> <c68e39170702140644s70538ee3j6d677f9d2ea60024@mail.gmail.com>
In-Reply-To: <c68e39170702140644s70538ee3j6d677f9d2ea60024@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Not to get off topic, but I was curious Yonik, what does solr do if many 
updates come in at a time opening and closing a writer each 
update...does the first update kick off a warm operation, then before 
that warm is done the second updates kicks off a warm operation, and 
then before that warm is done a third update kicks off a warm 
operations... etc.

Is that what happens? Is that fine behavior? Does it wait to see if more 
updates are coming quickly so that it can batch them somehow?

- Mark

Yonik Seeley wrote:
> On 2/14/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
>> I have an index with 5.2 million records (each record containing 3
>> fields) and it sometimes takes about a minute and a half for results to
>> come back.
>
> Doe to sort fields (and other factors), the first query can be slow.
> Solr has built-in support for warming in the background (doing this
> slow first query itself so no client query pays that price).
>
> -Yonik
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 15:00:51 2007
Return-Path: <java-user-return-26138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34498 invoked from network); 14 Feb 2007 15:00:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 15:00:50 -0000
Received: (qmail 6151 invoked by uid 500); 14 Feb 2007 15:00:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6122 invoked by uid 500); 14 Feb 2007 15:00:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6111 invoked by uid 99); 14 Feb 2007 15:00:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 07:00:50 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.184.225 as permitted sender)
Received: from [64.233.184.225] (HELO wr-out-0506.google.com) (64.233.184.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 07:00:39 -0800
Received: by wr-out-0506.google.com with SMTP id i22so253932wra
        for <java-user@lucene.apache.org>; Wed, 14 Feb 2007 07:00:15 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=UvadK9DVJb7s10zkHvFtoUvjrefH1OOKtnIIfyxJQM4iWVdhSiQ9UJNXkoEeWRqXdksLvPKAHtbwWwsAQlQvx9amhFgmV05UaQn8Tw6rkBCfEVHR2ACTdqYmV7qWrJj9deGxEOd+vCcGTs2ndRNBs+npSxW3pco3Hg3AtMvtXXQ=
Received: by 10.114.25.3 with SMTP id 3mr210553way.1171465212645;
        Wed, 14 Feb 2007 07:00:12 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 8sm1346761wra.2007.02.14.07.00.10;
        Wed, 14 Feb 2007 07:00:12 -0800 (PST)
Message-ID: <45D323C8.30509@gmail.com>
Date: Wed, 14 Feb 2007 09:59:20 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Omitting TermVector info and index size
References: <359a92830702140603p63cee42ag48c2dfda71266fab@mail.gmail.com>	 <32B49D51-466F-438D-8BCD-B8B7E89D8D88@apache.org> <359a92830702140648g1bb7e9adr92dc1de77aefa79e@mail.gmail.com>
In-Reply-To: <359a92830702140648g1bb7e9adr92dc1de77aefa79e@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

My apologies to Erik...and Erick...I am horrible with names.

If I am reading Grant's email correctly, he also said you don't need to 
store the Term Vectors...just that if you did store them, you can use 
them with the highlighter so that you do not need to reanalyze the 
text...why exactly this is, I have read on the message board, but cannot 
remember. In either case, I am working heavily with spans of all kinds 
and I do not ever store term vectors.

Erick Erickson wrote:
> Thanks for that addition, it may well be important to me (as well as
> pointing up a weakness in my unit tests. Honest, I've been thinking about
> explicitly testing this. Really. I'll get around to it real soon now.
> Truly....). We store multiple entries in the same field, think of it as
> storing a list of content. For instance....
>
> this is subject entry one
> this is subject entry two
> this is subject entry three
>
> all stored by separate calls to doc.add("subject", .....);
>
> One consequence of this is that doing a span query, say "one this"~2 
> should
> NOT hit. So I've been setting the positionincrementgap to 1,000 between
> successive calls to doc.add.
>
> If 'm reading your e-mail correctly, this implies that I *do* need to use
> WITH_POSITIONS. Correct? I know, I know. Just write the cursed unit 
> test and
> answer your own question alright already......
>
> And then Mark's e-mail leads me to think I *don't* need to use
> WITH_POSITIONS. So I *will* write the unit test today. Honest. Oh, and 
> Mark,
> Erik said that, not Erick <G>....... He's undoubtedly much more handsome
> than me, so wouldn't appreciate being confused....
>
> Thanks again all
> Erick
>
> On 2/14/07, Grant Ingersoll <gsingers@apache.org> wrote:
>>
>> As Erik stated, you don't need term vectors to do spans, but I
>> thought I would add a bit on the difference between positions and
>> offsets.
>>
>> Positions are what is stored in Lucene internally (see
>> Token.getPositionIncrement() and TermPositions) and are usually just
>> consecutive integers (although they can be manipulated, as can the
>> offsets), whereas offsets are the character offsets from the indexed
>> text (see Token.startOffset() and Token.endOffset()).
>>
>> I haven't used the highlighter, but I think it does have options for
>> working with term vectors so that you don't have to re-analyze
>> everything, so there may be some performance benefit to storing them,
>> at the cost of disk space, like you said.
>>
>> On Feb 14, 2007, at 9:03 AM, Erick Erickson wrote:
>>
>> > I'm indexing books, with a significant amount of overhead in each
>> > document
>> > and a LOT of OCR data. I'm indexing over 20,000 books and the index
>> > size is
>> > 8G. So I decided to play around with not storing some of the
>> > termvector
>> > information and I'm shocked at how much smaller the index is. By
>> > storing all
>> > my fields with Field.TermVector.WITH_POSITIONS, my index is reduced
>> > by OVER
>> > 75%. It went from 485M to 100M for my sample of 1,000 documents. Which
>> > implies my full index will be somewhere around 2G (I'll build the
>> > full index
>> > tonight and see).
>> >
>> > My reasoning was that I do need position information since I need
>> > to do Span
>> > queries,  but character information (WITH_OFFSETS) isn't necessary
>> > here/now.
>> > So I thought I'd make a small test to see if this was worth
>> > pursuing. If
>> > omitting offsets had only saved me 10%, for instance, I wouldn't
>> > pursue it
>> > very much. But 75+% is a savings well worth pursuing.
>> >
>> > All of my unit tests run, some of which include spans and
>> > highlighting.
>> > Whether they're sophisticated enough to catch some subtle issue I
>> > won't
>> > guarantee.
>> >
>> > I do NOT need to reconstruct the text, nor do I need to highlight with
>> > what's in the index, I handle highlighting by putting my display
>> > data in a
>> > MemoryIndex and running a query against that. I play some fun games to
>> > correlate my display and MemoryIndex info, but that's another
>> > story. Many
>> > thanks for the MemoryIndex contribution!!!
>> >
>> > With that as a background, I have two questions....
>> > 1> Am I going off a cliff here? I suppose this is really answered by
>> > 2> what is the difference between WITH_POSITIONS and WITH_OFFSETS
>> > and YES
>> > and NO? I assume that WITH_POSITIONS is necessary for Span queries,
>> > for
>> > instance, which is all I really care about. While this has been
>> > discussed, I
>> > searched and didn't find a satisfactory answer (or at least an
>> > answer that I
>> > understood<G>).
>> >
>> > I looked at Grants PowerPoint presentation and I guess I'm really
>> > looking
>> > for confirmation of my interpretation that WITH_POSITIONS lets me
>> > do span
>> > queries and WITH_OFFSETS is irrelevant in my situation, one where I
>> > don't
>> > highlight and don't need to reconstruct the document......
>> >
>> > Many thanks
>> > Erick
>>
>> --------------------------
>> Grant Ingersoll
>> Center for Natural Language Processing
>> http://www.cnlp.org
>>
>> Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/
>> LuceneFAQ
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 15:04:17 2007
Return-Path: <java-user-return-26139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37141 invoked from network); 14 Feb 2007 15:04:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 15:04:16 -0000
Received: (qmail 20816 invoked by uid 500); 14 Feb 2007 15:04:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20787 invoked by uid 500); 14 Feb 2007 15:04:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20775 invoked by uid 99); 14 Feb 2007 15:04:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 07:04:14 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 07:04:03 -0800
Received: by ug-out-1314.google.com with SMTP id k40so223799ugc
        for <java-user@lucene.apache.org>; Wed, 14 Feb 2007 07:03:32 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pVBhRqRmnM0X9XpB3mKT2G7D4IXecbObv7SECC34ZY57OlkmSMnqNPLlyK2GpZ5aGQ81RGX/Lnwv5ZYqNgDO2AQM+k2T8M/F9QxxyA+2QM+z8pckXfksLOUXuUpsf0NOVqJEv4qyIWGEBWcDMbfYrZ1ho+k7mDOBRtrGvWProDA=
Received: by 10.82.114.3 with SMTP id m3mr852122buc.1171465411611;
        Wed, 14 Feb 2007 07:03:31 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Wed, 14 Feb 2007 07:03:31 -0800 (PST)
Message-ID: <359a92830702140703o6ea8f85eqbe0c40398d00d82@mail.gmail.com>
Date: Wed, 14 Feb 2007 10:03:31 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Omitting TermVector info and index size
In-Reply-To: <359a92830702140648g1bb7e9adr92dc1de77aefa79e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_122436_18604877.1171465411013"
References: <359a92830702140603p63cee42ag48c2dfda71266fab@mail.gmail.com>
	 <32B49D51-466F-438D-8BCD-B8B7E89D8D88@apache.org>
	 <359a92830702140648g1bb7e9adr92dc1de77aefa79e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_122436_18604877.1171465411013
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

It's always embarrassing when the correct unit test takes, say, 3 minutes to
write and I've engaged in all this angst that I could have dispelled all by
myself (although it is nice to have confirmation from folks in the know).

The answer is that omitting term vectors has no influence on the behavior of
span queries with custom positionincrementgap (s). My example performs
exactly the same regardless.

Thanks again all.

Erick

On 2/14/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> Thanks for that addition, it may well be important to me (as well as
> pointing up a weakness in my unit tests. Honest, I've been thinking about
> explicitly testing this. Really. I'll get around to it real soon now.
> Truly....). We store multiple entries in the same field, think of it as
> storing a list of content. For instance....
>
> this is subject entry one
> this is subject entry two
> this is subject entry three
>
> all stored by separate calls to doc.add("subject", .....);
>
> One consequence of this is that doing a span query, say "one this"~2
> should NOT hit. So I've been setting the positionincrementgap to 1,000
> between successive calls to doc.add.
>
> If 'm reading your e-mail correctly, this implies that I *do* need to use
> WITH_POSITIONS. Correct? I know, I know. Just write the cursed unit test and
> answer your own question alright already......
>
> And then Mark's e-mail leads me to think I *don't* need to use
> WITH_POSITIONS. So I *will* write the unit test today. Honest. Oh, and Mark,
> Erik said that, not Erick <G>....... He's undoubtedly much more handsome
> than me, so wouldn't appreciate being confused....
>
> Thanks again all
> Erick
>
> On 2/14/07, Grant Ingersoll <gsingers@apache.org> wrote:
> >
> > As Erik stated, you don't need term vectors to do spans, but I
> > thought I would add a bit on the difference between positions and
> > offsets.
> >
> > Positions are what is stored in Lucene internally (see
> > Token.getPositionIncrement () and TermPositions) and are usually just
> > consecutive integers (although they can be manipulated, as can the
> > offsets), whereas offsets are the character offsets from the indexed
> > text (see Token.startOffset() and Token.endOffset()).
> >
> > I haven't used the highlighter, but I think it does have options for
> > working with term vectors so that you don't have to re-analyze
> > everything, so there may be some performance benefit to storing them,
> > at the cost of disk space, like you said.
> >
> > On Feb 14, 2007, at 9:03 AM, Erick Erickson wrote:
> >
> > > I'm indexing books, with a significant amount of overhead in each
> > > document
> > > and a LOT of OCR data. I'm indexing over 20,000 books and the index
> > > size is
> > > 8G. So I decided to play around with not storing some of the
> > > termvector
> > > information and I'm shocked at how much smaller the index is. By
> > > storing all
> > > my fields with Field.TermVector.WITH_POSITIONS, my index is reduced
> > > by OVER
> > > 75%. It went from 485M to 100M for my sample of 1,000 documents. Which
> > > implies my full index will be somewhere around 2G (I'll build the
> > > full index
> > > tonight and see).
> > >
> > > My reasoning was that I do need position information since I need
> > > to do Span
> > > queries,  but character information (WITH_OFFSETS) isn't necessary
> > > here/now.
> > > So I thought I'd make a small test to see if this was worth
> > > pursuing. If
> > > omitting offsets had only saved me 10%, for instance, I wouldn't
> > > pursue it
> > > very much. But 75+% is a savings well worth pursuing.
> > >
> > > All of my unit tests run, some of which include spans and
> > > highlighting.
> > > Whether they're sophisticated enough to catch some subtle issue I
> > > won't
> > > guarantee.
> > >
> > > I do NOT need to reconstruct the text, nor do I need to highlight with
> > > what's in the index, I handle highlighting by putting my display
> > > data in a
> > > MemoryIndex and running a query against that. I play some fun games to
> >
> > > correlate my display and MemoryIndex info, but that's another
> > > story. Many
> > > thanks for the MemoryIndex contribution!!!
> > >
> > > With that as a background, I have two questions....
> > > 1> Am I going off a cliff here? I suppose this is really answered by
> > > 2> what is the difference between WITH_POSITIONS and WITH_OFFSETS
> > > and YES
> > > and NO? I assume that WITH_POSITIONS is necessary for Span queries,
> > > for
> > > instance, which is all I really care about. While this has been
> > > discussed, I
> > > searched and didn't find a satisfactory answer (or at least an
> > > answer that I
> > > understood<G>).
> > >
> > > I looked at Grants PowerPoint presentation and I guess I'm really
> > > looking
> > > for confirmation of my interpretation that WITH_POSITIONS lets me
> > > do span
> > > queries and WITH_OFFSETS is irrelevant in my situation, one where I
> > > don't
> > > highlight and don't need to reconstruct the document......
> > >
> > > Many thanks
> > > Erick
> >
> > --------------------------
> > Grant Ingersoll
> > Center for Natural Language Processing
> > http://www.cnlp.org
> >
> > Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/
> > LuceneFAQ
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_122436_18604877.1171465411013--

From java-user-return-26140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 15:08:15 2007
Return-Path: <java-user-return-26140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38711 invoked from network); 14 Feb 2007 15:08:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 15:08:14 -0000
Received: (qmail 33777 invoked by uid 500); 14 Feb 2007 15:08:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33748 invoked by uid 500); 14 Feb 2007 15:08:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33737 invoked by uid 99); 14 Feb 2007 15:08:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 07:08:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 07:08:04 -0800
Received: by nf-out-0910.google.com with SMTP id i2so643700nfe
        for <java-user@lucene.apache.org>; Wed, 14 Feb 2007 07:07:42 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=W0Fnpu/01Gn+qjOv3v3xkslzuRAMZmkh2W+Ef57pEcXZXkv/DdjQxkWP1CSLp/R6hGnCiqBKrci3yyL4S95j1l4sFUUNLxOZRmdzo+mG2L0/YeR+Y2TrCmJ+w+yFsac5tNDjbdRipNvJybwik04Kq92aQKL82FvcGrMq6rSw+Nw=
Received: by 10.82.113.6 with SMTP id l6mr860500buc.1171465662688;
        Wed, 14 Feb 2007 07:07:42 -0800 (PST)
Received: by 10.82.106.19 with HTTP; Wed, 14 Feb 2007 07:07:42 -0800 (PST)
Message-ID: <c68e39170702140707v70090af6jcc2f5e77fa69742f@mail.gmail.com>
Date: Wed, 14 Feb 2007 10:07:42 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Caching
In-Reply-To: <45D3211C.2090607@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <BC1CFC544422CB4A934908E126A4742705CDAC20@SGBLOW2101.wsatkins.com>
	 <359a92830702140610i15596442k8b72d6a4b6049767@mail.gmail.com>
	 <BC1CFC544422CB4A934908E126A4742705CDAD3F@SGBLOW2101.wsatkins.com>
	 <c68e39170702140644s70538ee3j6d677f9d2ea60024@mail.gmail.com>
	 <45D3211C.2090607@gmail.com>
X-Google-Sender-Auth: ffbbaeea314dbec0
X-Virus-Checked: Checked by ClamAV on apache.org

On 2/14/07, Mark Miller <markrmiller@gmail.com> wrote:
> Not to get off topic, but I was curious Yonik, what does solr do if many
> updates come in at a time opening and closing a writer each
> update...does the first update kick off a warm operation, then before
> that warm is done the second updates kicks off a warm operation, and
> then before that warm is done a third update kicks off a warm
> operations... etc.

A single update does not cause a "commit" to occur (closing writer/open reader).
The user can explicitly commit, or  Solr can be configured to "commit"
changes within a given time period (called autocommit).

There is a configuration option that limits the number of warming
searchers for performance and memory reasons.  If this limit is
exceeded because someone is calling "commit" rapidly, then the commit
call will fail and a new searcher will not be opened.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 16:09:15 2007
Return-Path: <java-user-return-26141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61299 invoked from network); 14 Feb 2007 16:09:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 16:09:12 -0000
Received: (qmail 94743 invoked by uid 500); 14 Feb 2007 16:09:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94647 invoked by uid 500); 14 Feb 2007 16:09:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94629 invoked by uid 99); 14 Feb 2007 16:09:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 08:09:07 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 08:08:55 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HHMgM-0000OW-W4
	for java-user@lucene.apache.org; Wed, 14 Feb 2007 08:08:34 -0800
Message-ID: <8967953.post@talk.nabble.com>
Date: Wed, 14 Feb 2007 08:08:34 -0800 (PST)
From: poeta simbolista <poetasimbolista@gmail.com>
To: java-user@lucene.apache.org
Subject: FieldCacheImpl not "extendible"
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: poetasimbolista@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,
I have been diving into the code and I don't see why the class
FieldCacheImpl is not extendible. It is not defined as a public class...
though, I would like to be able to subclass it to change a slight bit.

Why is it defined like that?
Thanks 
-- 
View this message in context: http://www.nabble.com/FieldCacheImpl-not-%22extendible%22-tf3228105.html#a8967953
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 16:13:16 2007
Return-Path: <java-user-return-26142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63086 invoked from network); 14 Feb 2007 16:13:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 16:13:15 -0000
Received: (qmail 8319 invoked by uid 500); 14 Feb 2007 16:13:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8289 invoked by uid 500); 14 Feb 2007 16:13:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8278 invoked by uid 99); 14 Feb 2007 16:13:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 08:13:15 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jmuguruza@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 08:13:05 -0800
Received: by ug-out-1314.google.com with SMTP id k40so250150ugc
        for <java-user@lucene.apache.org>; Wed, 14 Feb 2007 08:12:43 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=H2vgx8EtTp5LkFm/u4xu1iHOzedGie+GpXHig+3ngyonBEfM11G2+Z3XyazuImeQZjZNO3ahBVFPhMIS+eLRh3lbk6G4tFf3aCZLsNx0TAPLLScTBwdANgj3aMF1Mz8aP6/dJeBsRp1zeQ15hZTmXcEnBXKbo2i0IGJeZCjJJ80=
Received: by 10.78.146.11 with SMTP id t11mr271334hud.1171469548251;
        Wed, 14 Feb 2007 08:12:28 -0800 (PST)
Received: by 10.78.151.2 with HTTP; Wed, 14 Feb 2007 08:12:28 -0800 (PST)
Message-ID: <f071061b0702140812h406616fbp48a24430235cd38@mail.gmail.com>
Date: Wed, 14 Feb 2007 17:12:28 +0100
From: jm <jmuguruza@gmail.com>
To: java-user@lucene.apache.org
Subject: possible to disable internal caching?
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

That last thread about caching reminded me of something. Me need is
actually the opposite...

I use lucene to search in hundreds/thousands of indexes. Doing a
lucene query on a set of the indexes is only one of the steps involved
in my 'queries', and some of the other steps take longer than lucene.
Also, my queries are offline, so I can live with the query lasting 20
seconds or 10 minutes.

So my question, is it possible to disable some of the caching lucene
does so the memory consumption will be smaller (I am a bit concerned
on the memory usage side)? Or the memory savings would not pay off?

thanks,
javi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 16:27:10 2007
Return-Path: <java-user-return-26143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67506 invoked from network); 14 Feb 2007 16:27:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 16:27:09 -0000
Received: (qmail 38850 invoked by uid 500); 14 Feb 2007 16:27:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38829 invoked by uid 500); 14 Feb 2007 16:27:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38818 invoked by uid 99); 14 Feb 2007 16:27:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 08:27:09 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 08:26:58 -0800
Received: by ug-out-1314.google.com with SMTP id k40so255467ugc
        for <java-user@lucene.apache.org>; Wed, 14 Feb 2007 08:26:26 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=pJVIvnUG5LvJwanf13gon7EKuTz5aX3XjX7/F1NJPGIRGDHv6r4ieUB5/W9F5eCk+5aAwf67SRvUYI1HHoE8DOJIFl4pEkHh89o7LobFGdtlfQ7ky6bFoE39veR7ZWflYcPLKiY7tFkeG41ZZfWatoBdmyaJ6FVn5vtNhEPujVk=
Received: by 10.67.26.7 with SMTP id d7mr551645ugj.1171470386002;
        Wed, 14 Feb 2007 08:26:26 -0800 (PST)
Received: from ?192.168.1.3? ( [83.249.110.75])
        by mx.google.com with ESMTP id o30sm1171426ugd.2007.02.14.08.26.24;
        Wed, 14 Feb 2007 08:26:24 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <f071061b0702140812h406616fbp48a24430235cd38@mail.gmail.com>
References: <f071061b0702140812h406616fbp48a24430235cd38@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <EB54F1D3-2278-4CDA-B1E5-FE3728B7AC9D@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: possible to disable internal caching?
Date: Wed, 14 Feb 2007 17:25:02 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


14 feb 2007 kl. 17.12 skrev jm:
>
> So my question, is it possible to disable some of the caching lucene
> does so the memory consumption will be smaller (I am a bit concerned
> on the memory usage side)? Or the memory savings would not pay off?

You could try to create a new Searcher for each query, and dispose of
the instance when you have accessed the results.

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 17:48:09 2007
Return-Path: <java-user-return-26144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93914 invoked from network); 14 Feb 2007 17:48:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 17:48:09 -0000
Received: (qmail 25244 invoked by uid 500); 14 Feb 2007 17:48:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25215 invoked by uid 500); 14 Feb 2007 17:48:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25204 invoked by uid 99); 14 Feb 2007 17:48:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 09:48:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 09:47:57 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HHOEC-0004G6-RS
	for java-user@lucene.apache.org; Wed, 14 Feb 2007 09:47:36 -0800
Message-ID: <8969965.post@talk.nabble.com>
Date: Wed, 14 Feb 2007 09:47:36 -0800 (PST)
From: poeta simbolista <poetasimbolista@gmail.com>
To: java-user@lucene.apache.org
Subject: FieldCacheImpl mistake?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: poetasimbolista@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi guys,
I have been diving into the FieldCacheImpl code.
I have seen sth on actual version:
Revision 488908 - (view) (download) (annotate) - [select for diffs]
Modified Wed Dec 20 03:47:09 2006 UTC (8 weeks ago) by yonik
File length: 13425 byte(s) 

that I wonder if it's not totally right, or if it is, I would like to know
why.

In the creation of eeach cache (Int, Float, String) there is a String
comparison using != instead of equals method:

if (term==null || term.field() != field) break;

I hope this can be useful... though i have used the code and it seems to
work perfectly.
Cheers


-- 
View this message in context: http://www.nabble.com/FieldCacheImpl-mistake--tf3228683.html#a8969965
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 17:48:35 2007
Return-Path: <java-user-return-26145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94236 invoked from network); 14 Feb 2007 17:48:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 17:48:35 -0000
Received: (qmail 27206 invoked by uid 500); 14 Feb 2007 17:48:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27178 invoked by uid 500); 14 Feb 2007 17:48:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27148 invoked by uid 99); 14 Feb 2007 17:48:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 09:48:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 09:48:23 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HHOEd-0004PG-3s
	for java-user@lucene.apache.org; Wed, 14 Feb 2007 09:48:03 -0800
Message-ID: <8969965.post@talk.nabble.com>
Date: Wed, 14 Feb 2007 09:47:36 -0800 (PST)
From: poeta simbolista <poetasimbolista@gmail.com>
To: java-user@lucene.apache.org
Subject: FieldCacheImpl code warning. String comparison not using equals
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: poetasimbolista@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi guys,
I have been diving into the FieldCacheImpl code.
I have seen sth on actual version:
Revision 488908 - (view) (download) (annotate) - [select for diffs]
Modified Wed Dec 20 03:47:09 2006 UTC (8 weeks ago) by yonik
File length: 13425 byte(s) 

that I wonder if it's not totally right, or if it is, I would like to know
why.

In the creation of eeach cache (Int, Float, String) there is a String
comparison using != instead of equals method:

if (term==null || term.field() != field) break;

I hope this can be useful... though i have used the code and it seems to
work perfectly.
Cheers


-- 
View this message in context: http://www.nabble.com/FieldCacheImpl-code-warning.-String-comparison-not-using-equals-tf3228683.html#a8969965
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 17:54:37 2007
Return-Path: <java-user-return-26146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95530 invoked from network); 14 Feb 2007 17:54:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 17:54:37 -0000
Received: (qmail 37695 invoked by uid 500); 14 Feb 2007 17:54:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37665 invoked by uid 500); 14 Feb 2007 17:54:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37654 invoked by uid 99); 14 Feb 2007 17:54:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 09:54:38 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.55] (HELO web50301.mail.yahoo.com) (206.190.38.55)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 14 Feb 2007 09:54:27 -0800
Received: (qmail 75074 invoked by uid 60001); 14 Feb 2007 17:54:05 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=4mCUIOadDBb6Mq45LrYr0kf9c/SZ4jANOG2T6sFpzPZCqwuvGdLCADs7//cCNacC/nW7Qc4PFpnHhB6uispTNxGCx0R/Ke1NySNtGLyUkQIB9owCOHhBqRa7a4WPS/PPigL/3o34a136XWpKw8NMJP2AU7lBI4YWLvDToJBGKUo=;
X-YMail-OSG: LFv4OLwVM1kyqwJD7NFTffOcYfEZauJSqfURjuBNY0oPXWLgxf7TfsOy0OGk4KRKVxMvO1AxGsQ_v0bUrKnZ3iLjD0wWKiu.TZ0vmxiqEPY0uX4yD3rJz.dnVjoBMLPn85REXXs2CxwJGg--
Received: from [58.63.152.217] by web50301.mail.yahoo.com via HTTP; Wed, 14 Feb 2007 09:54:05 PST
X-Mailer: YahooMailRC/368.7 YahooMailWebService/0.6.132.7
Date: Wed, 14 Feb 2007 09:54:05 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: FieldCacheImpl mistake?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <719878.74053.qm@web50301.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I'm not looking at the code now, but I believe this is because those String=
s are interned, and I believe they are interned precisely so that this (fas=
ter) comparison can be done.=0A=0AOtis=0A . . . . . . . . . . . . . . . . .=
 . . . . . . . . . . . . . . . . . . . . . . .=0ASimpy -- http://www.simpy.=
com/  -  Tag  -  Search  -  Share=0A=0A----- Original Message ----=0AFrom: =
poeta simbolista <poetasimbolista@gmail.com>=0ATo: java-user@lucene.apache.=
org=0ASent: Wednesday, February 14, 2007 12:47:36 PM=0ASubject: FieldCacheI=
mpl mistake?=0A=0A=0AHi guys,=0AI have been diving into the FieldCacheImpl =
code.=0AI have seen sth on actual version:=0ARevision 488908 - (view) (down=
load) (annotate) - [select for diffs]=0AModified Wed Dec 20 03:47:09 2006 U=
TC (8 weeks ago) by yonik=0AFile length: 13425 byte(s) =0A=0Athat I wonder =
if it's not totally right, or if it is, I would like to know=0Awhy.=0A=0AIn=
 the creation of eeach cache (Int, Float, String) there is a String=0Acompa=
rison using !=3D instead of equals method:=0A=0Aif (term=3D=3Dnull || term.=
field() !=3D field) break;=0A=0AI hope this can be useful... though i have =
used the code and it seems to=0Awork perfectly.=0ACheers=0A=0A=0A-- =0AView=
 this message in context: http://www.nabble.com/FieldCacheImpl-mistake--tf3=
228683.html#a8969965=0ASent from the Lucene - Java Users mailing list archi=
ve at Nabble.com.=0A=0A=0A-------------------------------------------------=
--------------------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene=
.apache.org=0AFor additional commands, e-mail: java-user-help@lucene.apache=
.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 18:14:41 2007
Return-Path: <java-user-return-26147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3259 invoked from network); 14 Feb 2007 18:14:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 18:14:40 -0000
Received: (qmail 84182 invoked by uid 500); 14 Feb 2007 18:14:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84158 invoked by uid 500); 14 Feb 2007 18:14:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84146 invoked by uid 99); 14 Feb 2007 18:14:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 10:14:42 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 10:14:30 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HHOdu-00047b-9A
	for java-user@lucene.apache.org; Wed, 14 Feb 2007 10:14:10 -0800
Message-ID: <8970509.post@talk.nabble.com>
Date: Wed, 14 Feb 2007 10:14:10 -0800 (PST)
From: poeta simbolista <poetasimbolista@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: FieldCacheImpl mistake?
In-Reply-To: <719878.74053.qm@web50301.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: poetasimbolista@gmail.com
References: <719878.74053.qm@web50301.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Cool.
Thanks!

BTW, I have another issue here.
The array of floats for the Float cache is not initialised. Which means that
it will return '0.0' (not initialised) as the value for those documents that
have a '0' as the value, as well as for those ones that do not have the
field.
  In my actual system I do not want that and I have worked it out by
modifying the code from FieldCacheImpl.
  i suggest it could be defined a (e.g.) NOT_FOUND_FLOAT_VALUE, modifiable,
so it does not necessarily have to be 0. And used for initialise the array
of floats before processing (or do it on the loop if better performance can
be reached).
  I have set it to Float.NEGATIVE_INFINITY
Cheers



Otis Gospodnetic wrote:
> 
> I'm not looking at the code now, but I believe this is because those
> Strings are interned, and I believe they are interned precisely so that
> this (faster) comparison can be done.
> 
> Otis
>  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> . . .
> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
> 
> ----- Original Message ----
> From: poeta simbolista <poetasimbolista@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, February 14, 2007 12:47:36 PM
> Subject: FieldCacheImpl mistake?
> 
> 
> Hi guys,
> I have been diving into the FieldCacheImpl code.
> I have seen sth on actual version:
> Revision 488908 - (view) (download) (annotate) - [select for diffs]
> Modified Wed Dec 20 03:47:09 2006 UTC (8 weeks ago) by yonik
> File length: 13425 byte(s) 
> 
> that I wonder if it's not totally right, or if it is, I would like to know
> why.
> 
> In the creation of eeach cache (Int, Float, String) there is a String
> comparison using != instead of equals method:
> 
> if (term==null || term.field() != field) break;
> 
> I hope this can be useful... though i have used the code and it seems to
> work perfectly.
> Cheers
> 
> 
> -- 
> View this message in context:
> http://www.nabble.com/FieldCacheImpl-mistake--tf3228683.html#a8969965
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Re%3A-FieldCacheImpl-mistake--tf3228736.html#a8970509
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 18:29:58 2007
Return-Path: <java-user-return-26148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7902 invoked from network); 14 Feb 2007 18:29:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 18:29:57 -0000
Received: (qmail 13330 invoked by uid 500); 14 Feb 2007 18:29:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13306 invoked by uid 500); 14 Feb 2007 18:29:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13295 invoked by uid 99); 14 Feb 2007 18:29:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 10:29:57 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 10:29:46 -0800
Received: by nf-out-0910.google.com with SMTP id i2so712787nfe
        for <java-user@lucene.apache.org>; Wed, 14 Feb 2007 10:29:23 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=gI0yiwHdP+plmYt0WwcX5M/N2og9XUR4RBFP8ofMTs/gG28SukkCQ5Sms2FB7TXED4ztsuUH95v6Ox9bj90Q+Hx/7afE8e5oFl6pBTjJ7l9S+Aan4bG2l/Jn7/WZSs0Y/iyw8tmjt/dl5P0LGdwBV8fzmpSj99PnlHRFv8nzdJE=
Received: by 10.82.163.13 with SMTP id l13mr1246170bue.1171477763393;
        Wed, 14 Feb 2007 10:29:23 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Wed, 14 Feb 2007 10:29:23 -0800 (PST)
Message-ID: <359a92830702141029o2a406685neb2a1b38c1227252@mail.gmail.com>
Date: Wed, 14 Feb 2007 13:29:23 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Omitting TermVector info and index size
In-Reply-To: <359a92830702140703o6ea8f85eqbe0c40398d00d82@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_126091_1272896.1171477763316"
References: <359a92830702140603p63cee42ag48c2dfda71266fab@mail.gmail.com>
	 <32B49D51-466F-438D-8BCD-B8B7E89D8D88@apache.org>
	 <359a92830702140648g1bb7e9adr92dc1de77aefa79e@mail.gmail.com>
	 <359a92830702140703o6ea8f85eqbe0c40398d00d82@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_126091_1272896.1171477763316
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

OK, final note. I wish I knew what kind of drugs I was on when I first
thought that the sizes were so much smaller. Because they weren't. I got to
thinking that "gee, it's kind of weird that if you don't specify anything
for TermVector when creating a field, you get all this advanced stuff. If it
was me, I'd default it to the simple case and make the user explicitly
invoke the more complex one".

So I re-ran my tests and Lo! the default when creating a field is
TermVector.NO! Which means that my original surprise is totally off-base,
and I WAS indexing with TermVector.NO since I didn't specify anything. So
why I thought the index was so much smaller, I have no clue. I'll have to
plead temporary insanity.

That said, I'm glad I have a better understanding of what this is all about
anyway. But I also have to apologize for wasting everyone's time.

Erick@RedInTheFace.org

On 2/14/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> It's always embarrassing when the correct unit test takes, say, 3 minutes
> to write and I've engaged in all this angst that I could have dispelled all
> by myself (although it is nice to have confirmation from folks in the know).
>
>
> The answer is that omitting term vectors has no influence on the behavior
> of span queries with custom positionincrementgap (s). My example performs
> exactly the same regardless.
>
> Thanks again all.
>
> Erick
>
> On 2/14/07, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > Thanks for that addition, it may well be important to me (as well as
> > pointing up a weakness in my unit tests. Honest, I've been thinking about
> > explicitly testing this. Really. I'll get around to it real soon now.
> > Truly....). We store multiple entries in the same field, think of it as
> > storing a list of content. For instance....
> >
> > this is subject entry one
> > this is subject entry two
> > this is subject entry three
> >
> > all stored by separate calls to doc.add("subject", .....);
> >
> > One consequence of this is that doing a span query, say "one this"~2
> > should NOT hit. So I've been setting the positionincrementgap to 1,000
> > between successive calls to doc.add.
> >
> > If 'm reading your e-mail correctly, this implies that I *do* need to
> > use WITH_POSITIONS. Correct? I know, I know. Just write the cursed unit test
> > and answer your own question alright already......
> >
> > And then Mark's e-mail leads me to think I *don't* need to use
> > WITH_POSITIONS. So I *will* write the unit test today. Honest. Oh, and Mark,
> > Erik said that, not Erick <G>....... He's undoubtedly much more handsome
> > than me, so wouldn't appreciate being confused....
> >
> > Thanks again all
> > Erick
> >
> > On 2/14/07, Grant Ingersoll < gsingers@apache.org> wrote:
> > >
> > > As Erik stated, you don't need term vectors to do spans, but I
> > > thought I would add a bit on the difference between positions and
> > > offsets.
> > >
> > > Positions are what is stored in Lucene internally (see
> > > Token.getPositionIncrement () and TermPositions) and are usually just
> > > consecutive integers (although they can be manipulated, as can the
> > > offsets), whereas offsets are the character offsets from the indexed
> > > text (see Token.startOffset() and Token.endOffset()).
> > >
> > > I haven't used the highlighter, but I think it does have options for
> > > working with term vectors so that you don't have to re-analyze
> > > everything, so there may be some performance benefit to storing them,
> > > at the cost of disk space, like you said.
> > >
> > > On Feb 14, 2007, at 9:03 AM, Erick Erickson wrote:
> > >
> > > > I'm indexing books, with a significant amount of overhead in each
> > > > document
> > > > and a LOT of OCR data. I'm indexing over 20,000 books and the index
> > > > size is
> > > > 8G. So I decided to play around with not storing some of the
> > > > termvector
> > > > information and I'm shocked at how much smaller the index is. By
> > > > storing all
> > > > my fields with Field.TermVector.WITH_POSITIONS, my index is reduced
> > > > by OVER
> > > > 75%. It went from 485M to 100M for my sample of 1,000 documents.
> > > Which
> > > > implies my full index will be somewhere around 2G (I'll build the
> > > > full index
> > > > tonight and see).
> > > >
> > > > My reasoning was that I do need position information since I need
> > > > to do Span
> > > > queries,  but character information (WITH_OFFSETS) isn't necessary
> > > > here/now.
> > > > So I thought I'd make a small test to see if this was worth
> > > > pursuing. If
> > > > omitting offsets had only saved me 10%, for instance, I wouldn't
> > > > pursue it
> > > > very much. But 75+% is a savings well worth pursuing.
> > > >
> > > > All of my unit tests run, some of which include spans and
> > > > highlighting.
> > > > Whether they're sophisticated enough to catch some subtle issue I
> > > > won't
> > > > guarantee.
> > > >
> > > > I do NOT need to reconstruct the text, nor do I need to highlight
> > > with
> > > > what's in the index, I handle highlighting by putting my display
> > > > data in a
> > > > MemoryIndex and running a query against that. I play some fun games
> > > to
> > > > correlate my display and MemoryIndex info, but that's another
> > > > story. Many
> > > > thanks for the MemoryIndex contribution!!!
> > > >
> > > > With that as a background, I have two questions....
> > > > 1> Am I going off a cliff here? I suppose this is really answered by
> > >
> > > > 2> what is the difference between WITH_POSITIONS and WITH_OFFSETS
> > > > and YES
> > > > and NO? I assume that WITH_POSITIONS is necessary for Span queries,
> > > > for
> > > > instance, which is all I really care about. While this has been
> > > > discussed, I
> > > > searched and didn't find a satisfactory answer (or at least an
> > > > answer that I
> > > > understood<G>).
> > > >
> > > > I looked at Grants PowerPoint presentation and I guess I'm really
> > > > looking
> > > > for confirmation of my interpretation that WITH_POSITIONS lets me
> > > > do span
> > > > queries and WITH_OFFSETS is irrelevant in my situation, one where I
> > > > don't
> > > > highlight and don't need to reconstruct the document......
> > > >
> > > > Many thanks
> > > > Erick
> > >
> > > --------------------------
> > > Grant Ingersoll
> > > Center for Natural Language Processing
> > > http://www.cnlp.org
> > >
> > > Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/
> > > LuceneFAQ
> > >
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>

------=_Part_126091_1272896.1171477763316--

From java-user-return-26149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 19:46:20 2007
Return-Path: <java-user-return-26149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30492 invoked from network); 14 Feb 2007 19:46:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 19:46:19 -0000
Received: (qmail 54793 invoked by uid 500); 14 Feb 2007 19:46:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54724 invoked by uid 500); 14 Feb 2007 19:46:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54696 invoked by uid 99); 14 Feb 2007 19:46:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 11:46:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.29.8 as permitted sender)
Received: from [80.67.29.8] (HELO smtprelay08.ispgateway.de) (80.67.29.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 11:46:03 -0800
Received: (qmail 7961 invoked from network); 14 Feb 2007 19:45:40 -0000
Received: from unknown (HELO p5496dbf4.dip.t-dialin.net) ([pbs]695637@[84.150.219.244])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay08.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 14 Feb 2007 19:45:40 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: possible to disable internal caching?
Date: Wed, 14 Feb 2007 20:46:11 +0100
User-Agent: KMail/1.8.2
References: <f071061b0702140812h406616fbp48a24430235cd38@mail.gmail.com>
In-Reply-To: <f071061b0702140812h406616fbp48a24430235cd38@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200702142046.11611@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Wednesday 14 February 2007 17:12, jm wrote:

> So my question, is it possible to disable some of the caching lucene
> does so the memory consumption will be smaller (I am a bit concerned
> on the memory usage side)? Or the memory savings would not pay off?

You could set IndexWriter.setTermIndexInterval() to a value larger than the 
default (128). Thus Lucene will use less memory for its term list index in 
memory.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 19:50:55 2007
Return-Path: <java-user-return-26150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31398 invoked from network); 14 Feb 2007 19:50:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 19:50:54 -0000
Received: (qmail 65842 invoked by uid 500); 14 Feb 2007 19:50:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65814 invoked by uid 500); 14 Feb 2007 19:50:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65803 invoked by uid 99); 14 Feb 2007 19:50:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 11:50:55 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 11:50:43 -0800
Received: by ug-out-1314.google.com with SMTP id k40so328642ugc
        for <java-user@lucene.apache.org>; Wed, 14 Feb 2007 11:50:22 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=Ro+BPMwuiBjlsoLCa5v2Je2am2x3+OYeISW4ROCPbea01MAvSl+q6pcQ7prGou8vfdqdaTuloOKAYdYFdnowAMKsBw8O/KyCcPODh7hkftR1qU9ED7dPztFpArMz3iD60Jm3cZy1I/YX4230CEvP5gFAZxQCVFSGZN9WDC/OjZw=
Received: by 10.115.23.12 with SMTP id a12mr638909waj.1171482620955;
        Wed, 14 Feb 2007 11:50:20 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 5sm617781wrh.2007.02.14.11.50.19;
        Wed, 14 Feb 2007 11:50:20 -0800 (PST)
Message-ID: <45D367C6.40709@gmail.com>
Date: Wed, 14 Feb 2007 14:49:26 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: FieldCacheImpl mistake?
References: <719878.74053.qm@web50301.mail.yahoo.com>
In-Reply-To: <719878.74053.qm@web50301.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

There is some code in contrib with comments claiming this interning is 
actually slower. I think it was the MemoryIndex? Has this ever been 
discussed?

- Mark

Otis Gospodnetic wrote:
> I'm not looking at the code now, but I believe this is because those Strings are interned, and I believe they are interned precisely so that this (faster) comparison can be done.
>
> Otis
>  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
>
> ----- Original Message ----
> From: poeta simbolista <poetasimbolista@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, February 14, 2007 12:47:36 PM
> Subject: FieldCacheImpl mistake?
>
>
> Hi guys,
> I have been diving into the FieldCacheImpl code.
> I have seen sth on actual version:
> Revision 488908 - (view) (download) (annotate) - [select for diffs]
> Modified Wed Dec 20 03:47:09 2006 UTC (8 weeks ago) by yonik
> File length: 13425 byte(s) 
>
> that I wonder if it's not totally right, or if it is, I would like to know
> why.
>
> In the creation of eeach cache (Int, Float, String) there is a String
> comparison using != instead of equals method:
>
> if (term==null || term.field() != field) break;
>
> I hope this can be useful... though i have used the code and it seems to
> work perfectly.
> Cheers
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 19:59:45 2007
Return-Path: <java-user-return-26151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34077 invoked from network); 14 Feb 2007 19:59:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 19:59:44 -0000
Received: (qmail 77978 invoked by uid 500); 14 Feb 2007 19:59:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77350 invoked by uid 500); 14 Feb 2007 19:59:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77339 invoked by uid 99); 14 Feb 2007 19:59:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 11:59:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 11:59:34 -0800
Received: by ug-out-1314.google.com with SMTP id k40so331640ugc
        for <java-user@lucene.apache.org>; Wed, 14 Feb 2007 11:59:12 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=VD2hiY81B/Uk7BtcAZyZdY17U/eSNxNEk/PXQABqKWhxXLW9kE6Ap86jkY7vYov8RxXITZY/3+ZWHz1L5guaSyuj7ntQtCY5KaCKPn/W4/KZ+B2+Xkr64wNfe7QroIsXdUR98bUYnawGyQJJ14zHibJY/Cd/04locEA1B1VlWvw=
Received: by 10.67.119.13 with SMTP id w13mr766914ugm.1171483152928;
        Wed, 14 Feb 2007 11:59:12 -0800 (PST)
Received: from ?192.168.1.3? ( [83.249.110.75])
        by mx.google.com with ESMTP id j3sm1228335ugd.2007.02.14.11.59.11;
        Wed, 14 Feb 2007 11:59:12 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <45D367C6.40709@gmail.com>
References: <719878.74053.qm@web50301.mail.yahoo.com> <45D367C6.40709@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B393087D-5337-4862-9F39-917D6E39D649@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: FieldCacheImpl mistake?
Date: Wed, 14 Feb 2007 20:57:47 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


14 feb 2007 kl. 20.49 skrev Mark Miller:

> There is some code in contrib with comments claiming this interning  
> is actually slower. I think it was the MemoryIndex? Has this ever  
> been discussed?

There is of course a cost of RAM and CPU involved with flyweighting  
instances. In order to win the CPU costs back you need to do compare  
an instance to something else more than once. Thats pretty much it, I  
think. There might also be some weak/soft/whatnot reference costs  
involving values passed to String.intern, but I'm not sure.


-- 
karl


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 14 20:20:21 2007
Return-Path: <java-user-return-26152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40499 invoked from network); 14 Feb 2007 20:20:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2007 20:20:20 -0000
Received: (qmail 29720 invoked by uid 500); 14 Feb 2007 20:20:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29696 invoked by uid 500); 14 Feb 2007 20:20:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29685 invoked by uid 99); 14 Feb 2007 20:20:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 12:20:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.184.226 as permitted sender)
Received: from [64.233.184.226] (HELO wr-out-0506.google.com) (64.233.184.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 12:20:09 -0800
Received: by wr-out-0506.google.com with SMTP id 55so553591wri
        for <java-user@lucene.apache.org>; Wed, 14 Feb 2007 12:19:48 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=ILr7n9Zb5gkS/1XaQt2p4nU1XI3ZPdUP+LnmqvDqRKijRzw4+a54WlcEdbHcXYGCW39LWti8jYGw0SV4ut2QpVFSPvllYfEgv/MhCg4ptJeOfN5PNXIgn0XAW/QS7xIFHgwEzexUVu9DLi94e77HypRNrVZhd6T6QV3xs36KOek=
Received: by 10.90.66.9 with SMTP id o9mr1238592aga.1171484388413;
        Wed, 14 Feb 2007 12:19:48 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 11sm3065422wrl.2007.02.14.12.19.39;
        Wed, 14 Feb 2007 12:19:45 -0800 (PST)
Message-ID: <45D36EA1.70804@gmail.com>
Date: Wed, 14 Feb 2007 15:18:41 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: FieldCacheImpl mistake?
References: <719878.74053.qm@web50301.mail.yahoo.com> <45D367C6.40709@gmail.com> <B393087D-5337-4862-9F39-917D6E39D649@gmail.com>
In-Reply-To: <B393087D-5337-4862-9F39-917D6E39D649@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Here is the comment:

    /*
     * Note that this method signature avoids having a user call new
     * o.a.l.d.Field(...) which would be much too expensive due to the
     * String.intern() usage of that class.
     *
     * More often than not, String.intern() leads to serious performance
     * degradations rather than improvements! If you're curious why, check
     * out the JDK's native code, see how it oscillates multiple times back
     * and forth between Java code and native code on each intern() call,
     * only to end up using a plain vanilla java.util.HashMap on the Java
     * heap for it's interned strings! String.equals() has a small cost
     * compared to String.intern(), trust me. Application level interning
     * (e.g. a HashMap per Directory/Index) typically leads to better
     * solutions than frequent hidden low-level calls to String.intern().
     *
     * Perhaps with some luck, Lucene's Field.java (and Term.java) and
     * cousins could be fixed to not use String.intern(). Sigh :-(
     */

karl wettin wrote:
>
> 14 feb 2007 kl. 20.49 skrev Mark Miller:
>
>> There is some code in contrib with comments claiming this interning 
>> is actually slower. I think it was the MemoryIndex? Has this ever 
>> been discussed?
>
> There is of course a cost of RAM and CPU involved with flyweighting 
> instances. In order to win the CPU costs back you need to do compare 
> an instance to something else more than once. Thats pretty much it, I 
> think. There might also be some weak/soft/whatnot reference costs 
> involving values passed to String.intern, but I'm not sure.
>
>
> --karl
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 15 01:02:41 2007
Return-Path: <java-user-return-26153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45341 invoked from network); 15 Feb 2007 01:02:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2007 01:02:41 -0000
Received: (qmail 31301 invoked by uid 500); 15 Feb 2007 01:02:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31277 invoked by uid 500); 15 Feb 2007 01:02:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31266 invoked by uid 99); 15 Feb 2007 01:02:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 17:02:41 -0800
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MSGID_FROM_MTA_HEADER,PLING_QUERY,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [17.250.248.182] (HELO smtpout.mac.com) (17.250.248.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 17:02:29 -0800
Received: from webmail036 (webmail036-S [10.13.128.36])
	by smtpout.mac.com (Xserve/8.12.11/smtpout12/MantshX 4.0) with ESMTP id l1F127nj021626
	for <java-user@lucene.apache.org>; Wed, 14 Feb 2007 17:02:08 -0800 (PST)
Date: Wed, 14 Feb 2007 17:02:07 -0800
From: Michael Prichard <michael_prichard@mac.com>
To: java-user@lucene.apache.org
Message-ID: <07EF67C2-0110-1000-835A-90943A5B3906-Webmail-10024@mac.com>
Subject: Too many open files?!
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Originating-IP: 216.12.26.136
Received: from [216.12.26.136] from webmail.mac.com with HTTP; Wed, 14 Feb 2007 17:02:07 -0800
X-Brightmail-Tracker: AAAAAA==
X-Brightmail-scanned: yes
X-Virus-Checked: Checked by ClamAV on apache.org

I am getting this exception:

Exception in thread "main" java.io.FileNotFoundException: /index/_gna.f13 (Too many open files)

This is happening on a SLES10 (64-bit) box when trying to index 18k items. 

I can run it on a much lesser SLES9 box without any issues.

Any ideas?!

Thanks,
Michael

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 15 01:05:26 2007
Return-Path: <java-user-return-26154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46191 invoked from network); 15 Feb 2007 01:05:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2007 01:05:25 -0000
Received: (qmail 34246 invoked by uid 500); 15 Feb 2007 01:05:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34206 invoked by uid 500); 15 Feb 2007 01:05:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34195 invoked by uid 99); 15 Feb 2007 01:05:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 17:05:26 -0800
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=PLING_QUERY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [198.144.201.51] (HELO esseff.org) (198.144.201.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 17:05:16 -0800
Received: from localhost (localhost [127.0.0.1])
	by esseff.org (Postfix) with ESMTP id C2346521C32
	for <java-user@lucene.apache.org>; Wed, 14 Feb 2007 17:05:17 -0800 (PST)
X-Quarantine-ID: <6+Jv7u0HQ5Pt>
X-Virus-Scanned: amavisd-new at esseff.org
Received: from esseff.org ([127.0.0.1])
	by localhost (esseff.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 6+Jv7u0HQ5Pt for <java-user@lucene.apache.org>;
	Wed, 14 Feb 2007 17:05:15 -0800 (PST)
Received: from professorville.windows.esseff.org (professorville.windows.esseff.org [10.0.1.16])
	by esseff.org (Postfix) with ESMTP id 2EB81521BCF
	for <java-user@lucene.apache.org>; Wed, 14 Feb 2007 17:05:15 -0800 (PST)
Subject: RE: Too many open files?!
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Wed, 14 Feb 2007 17:04:52 -0800
Content-class: urn:content-classes:message
Message-ID: <392521EA2692A2418DF48C331E61E32506ABA2@professorville.windows.esseff.org>
X-MimeOLE: Produced By Microsoft Exchange V6.5
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Too many open files?!
Thread-Index: AcdQnP7OcB7oRm+qQgq55Gk4DCSxsAAAEEVA
References: <07EF67C2-0110-1000-835A-90943A5B3906-Webmail-10024@mac.com>
From: "Steven Parkes" <steven_parkes@esseff.org>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

See the wiki:
http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-48921635adf2c968f79
36dc07d51dfb40d638b82=20

-----Original Message-----
From: Michael Prichard [mailto:michael_prichard@mac.com]=20
Sent: Wednesday, February 14, 2007 5:02 PM
To: java-user@lucene.apache.org
Subject: Too many open files?!

I am getting this exception:

Exception in thread "main" java.io.FileNotFoundException:
/index/_gna.f13 (Too many open files)

This is happening on a SLES10 (64-bit) box when trying to index 18k
items.=20

I can run it on a much lesser SLES9 box without any issues.

Any ideas?!

Thanks,
Michael

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 15 05:04:38 2007
Return-Path: <java-user-return-26155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16127 invoked from network); 15 Feb 2007 05:04:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2007 05:04:38 -0000
Received: (qmail 5648 invoked by uid 500); 15 Feb 2007 05:04:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5622 invoked by uid 500); 15 Feb 2007 05:04:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5611 invoked by uid 99); 15 Feb 2007 05:04:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 21:04:38 -0800
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=PLING_QUERY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [17.250.248.185] (HELO smtpout.mac.com) (17.250.248.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Feb 2007 21:04:26 -0800
Received: from mac.com (smtpin05-en2 [10.13.10.150])
	by smtpout.mac.com (Xserve/8.12.11/smtpout15/MantshX 4.0) with ESMTP id l1F546Ep016627
	for <java-user@lucene.apache.org>; Wed, 14 Feb 2007 21:04:06 -0800 (PST)
Received: from [192.168.1.102] (c-71-63-5-209.hsd1.va.comcast.net [71.63.5.209])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin05/MantshX 4.0) with ESMTP id l1F54207019557
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 14 Feb 2007 21:04:04 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <392521EA2692A2418DF48C331E61E32506ABA2@professorville.windows.esseff.org>
References: <07EF67C2-0110-1000-835A-90943A5B3906-Webmail-10024@mac.com> <392521EA2692A2418DF48C331E61E32506ABA2@professorville.windows.esseff.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <86DD7073-F395-4EA5-B042-948C1A5315CA@mac.com>
Content-Transfer-Encoding: 7bit
From: Michael Prichard <michael_prichard@mac.com>
Subject: Re: Too many open files?!
Date: Thu, 15 Feb 2007 00:04:02 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Brightmail-Tracker: AAAAAA==
X-Brightmail-scanned: yes
X-Virus-Checked: Checked by ClamAV on apache.org

That helped!  Thanks!

I just added some .close() calls to a few places where I kept file  
handles open and it worked quite nicely.  Good lesson, make sure you  
all clean up after yourselves!

Thanks,
Michael

On Feb 14, 2007, at 8:04 PM, Steven Parkes wrote:

> See the wiki:
> http://wiki.apache.org/jakarta-lucene/ 
> LuceneFAQ#head-48921635adf2c968f79
> 36dc07d51dfb40d638b82
>
> -----Original Message-----
> From: Michael Prichard [mailto:michael_prichard@mac.com]
> Sent: Wednesday, February 14, 2007 5:02 PM
> To: java-user@lucene.apache.org
> Subject: Too many open files?!
>
> I am getting this exception:
>
> Exception in thread "main" java.io.FileNotFoundException:
> /index/_gna.f13 (Too many open files)
>
> This is happening on a SLES10 (64-bit) box when trying to index 18k
> items.
>
> I can run it on a much lesser SLES9 box without any issues.
>
> Any ideas?!
>
> Thanks,
> Michael
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 15 08:34:39 2007
Return-Path: <java-user-return-26156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66384 invoked from network); 15 Feb 2007 08:34:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2007 08:34:38 -0000
Received: (qmail 45159 invoked by uid 500); 15 Feb 2007 08:34:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45128 invoked by uid 500); 15 Feb 2007 08:34:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45117 invoked by uid 99); 15 Feb 2007 08:34:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 00:34:38 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 00:34:28 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 2F36D5B774; Thu, 15 Feb 2007 00:34:08 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 2BA017F403
	for <java-user@lucene.apache.org>; Thu, 15 Feb 2007 00:34:08 -0800 (PST)
Date: Thu, 15 Feb 2007 00:34:08 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Extending Query, Weight, Scorer
In-Reply-To: <8965471.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0702150028450.28585@hal.rescomp.berkeley.edu>
References: <8965471.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I have created a Query that works for numerical max-min ranges, that may
: work for any Field specified.
: I have done that by extending Query, and creating own Weight and Scorer
: subclasses as well.
: So it works ... but I have problems when setting min or max boundary to 0:
: In this case, those entries that do not have the field, happen as if they
: had it with value 0. And I would like that, those not  having the field, not
: scoring for the query. Code is below.

your Scorer.next method should be skipping over documents that you do not
consider "matches" to your search.

I can't help but wonder why you don't just use ConstantScoreRangeQuery for
this?



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 15 08:38:40 2007
Return-Path: <java-user-return-26157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67339 invoked from network); 15 Feb 2007 08:38:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2007 08:38:39 -0000
Received: (qmail 50335 invoked by uid 500); 15 Feb 2007 08:38:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50308 invoked by uid 500); 15 Feb 2007 08:38:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50297 invoked by uid 99); 15 Feb 2007 08:38:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 00:38:39 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 00:38:29 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id C67455B774; Thu, 15 Feb 2007 00:38:08 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id A82827F403
	for <java-user@lucene.apache.org>; Thu, 15 Feb 2007 00:38:08 -0800 (PST)
Date: Thu, 15 Feb 2007 00:38:08 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: FieldCacheImpl not "extendible"
In-Reply-To: <8967953.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0702150034560.28585@hal.rescomp.berkeley.edu>
References: <8967953.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I have been diving into the code and I don't see why the class
: FieldCacheImpl is not extendible. It is not defined as a public class...
: though, I would like to be able to subclass it to change a slight bit.
:
: Why is it defined like that?

I don't know that there is any particular reason ... even if you could
subclass it, you won't be able to replace the static instance used by the
core Lucene code because it's in the FieldCache interface.

your dest bet if you want to reuse functinality for your own code would
be to decorate it.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 15 08:52:18 2007
Return-Path: <java-user-return-26158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71858 invoked from network); 15 Feb 2007 08:52:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2007 08:52:17 -0000
Received: (qmail 65057 invoked by uid 500); 15 Feb 2007 08:52:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65025 invoked by uid 500); 15 Feb 2007 08:52:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65014 invoked by uid 99); 15 Feb 2007 08:52:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 00:52:17 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 00:52:06 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 4341C5B774; Thu, 15 Feb 2007 00:51:46 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 38F207F403
	for <java-user@lucene.apache.org>; Thu, 15 Feb 2007 00:51:46 -0800 (PST)
Date: Thu, 15 Feb 2007 00:51:46 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: FieldCacheImpl mistake?
In-Reply-To: <8970509.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0702150042470.28585@hal.rescomp.berkeley.edu>
References: <719878.74053.qm@web50301.mail.yahoo.com> <8970509.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: The array of floats for the Float cache is not initialised. Which means that
: it will return '0.0' (not initialised) as the value for those documents that
: have a '0' as the value, as well as for those ones that do not have the
: field.

you may find this class interesting...
http://svn.apache.org/viewvc/lucene/solr/trunk/src/java/org/apache/solr/search/MissingStringLastComparatorSource.java

:   i suggest it could be defined a (e.g.) NOT_FOUND_FLOAT_VALUE, modifiable,
: so it does not necessarily have to be 0. And used for initialise the array
: of floats before processing (or do it on the loop if better performance can
: be reached).
:   I have set it to Float.NEGATIVE_INFINITY

this sounds like a generally usable feature ... although we wouldn't want
it to be a single for hte whole field cache because then code expecting
the defaults to be Float.NEGATIVE_INFINITY could be suprised if other code
(perhaps even dealing with different fields) populated the cache first.

the ideal way to do this might be to add a "getDefault()" method to the
IntParser and FloatParser interfaces ... but thta wouldn't be backwards
compatible.

one (kludgy) possibility would be to use a single call to
FloatParser.parseFloat(null) to determine what value to use -- if it
throws an exception use "0.0", otherwise use whatever it returns, what are
the odds that an existing FloatParser that doesn't balk on null isn't
going to return something that makes sense as a default?


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 15 09:21:52 2007
Return-Path: <java-user-return-26159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84241 invoked from network); 15 Feb 2007 09:21:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2007 09:21:51 -0000
Received: (qmail 96320 invoked by uid 500); 15 Feb 2007 09:21:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96294 invoked by uid 500); 15 Feb 2007 09:21:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96283 invoked by uid 99); 15 Feb 2007 09:21:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 01:21:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [84.96.21.10] (HELO trinity.anyware-tech.com) (84.96.21.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 01:21:41 -0800
Received: from localhost (localhost [127.0.0.1])
	by trinity.anyware-tech.com (Postfix) with ESMTP id A508D40960B
	for <java-user@lucene.apache.org>; Thu, 15 Feb 2007 10:21:18 +0100 (CET)
Received: from trinity.anyware-tech.com ([127.0.0.1])
	by localhost (trinity.anyware-tech.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 08962-04 for <java-user@lucene.apache.org>;
	Thu, 15 Feb 2007 10:21:08 +0100 (CET)
Received: from bumbo.anyware (bumbo.anyware [10.0.3.29])
	by trinity.anyware-tech.com (Postfix) with ESMTP id 3B77740949B
	for <java-user@lucene.apache.org>; Thu, 15 Feb 2007 10:21:08 +0100 (CET)
From: Nicolas =?iso-8859-1?q?Lalev=E9e?= <nicolas.lalevee@anyware-tech.com>
Organization: Anyware Technologies
To: java-user@lucene.apache.org
Subject: Decorating a Query
Date: Thu, 15 Feb 2007 10:21:06 +0100
User-Agent: KMail/1.9.5
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200702151021.06794.nicolas.lalevee@anyware-tech.com>
X-Virus-Scanned: Debian amavisd-new at anyware-tech.com
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I wanted to implement my own query, query wich will be specific to my=20
application. The query I want to implement is in fact just a combinaison of=
=20
sevral already implemented queries. So acheive this, I do this kind of=20
things :
public class MyQuery extends Query {
  private Query query;
  public MyQuery(String foo) {
    query =3D new TermQuery("myfield", foo);
  }
  public Weight weight(Searcher searcher) throws IOException {
    return query.weight(searcher);
  }
  public String toString(String field) {
    return foo;
  }
}

But I have an issue with that kind of queries : I cannot implement=20
createWeight() as I cannot access this function on the underlying query. So=
=20
the Query's function is used with raise a UnsupportedOperationException. Fo=
r=20
basic search.search(query), it works. But when I want to filter it :
query =3D new FilteredQuery(query, filter);
search.search(query);
This raise the UnsupportedOperationException.

I just see two options there.
* make my own interface which is a factory of query. But I lost the=20
flexibility of extending Query. Even if I want to do a little term query, I=
=20
will have to make a factory of this term query.
* patch Lucene to make createWeight() public

any other advise ?

cheers,
Nicolas

=2D-=20
Nicolas LALEV=C9E
Solutions & Technologies
ANYWARE TECHNOLOGIES
Tel : +33 (0)5 61 00 52 90
=46ax : +33 (0)5 61 00 51 46
http://www.anyware-tech.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 15 09:27:38 2007
Return-Path: <java-user-return-26160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85873 invoked from network); 15 Feb 2007 09:27:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2007 09:27:37 -0000
Received: (qmail 7973 invoked by uid 500); 15 Feb 2007 09:27:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7176 invoked by uid 500); 15 Feb 2007 09:27:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7165 invoked by uid 99); 15 Feb 2007 09:27:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 01:27:39 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 01:27:28 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 86AD05B775; Thu, 15 Feb 2007 01:27:08 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 808677F403
	for <java-user@lucene.apache.org>; Thu, 15 Feb 2007 01:27:08 -0800 (PST)
Date: Thu, 15 Feb 2007 01:27:08 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Decorating a Query
In-Reply-To: <200702151021.06794.nicolas.lalevee@anyware-tech.com>
Message-ID: <Pine.LNX.4.58.0702150124240.6154@hal.rescomp.berkeley.edu>
References: <200702151021.06794.nicolas.lalevee@anyware-tech.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I wanted to implement my own query, query wich will be specific to my
: application. The query I want to implement is in fact just a combinaison of
: sevral already implemented queries. So acheive this, I do this kind of

you can probably achieve your goal by simply making MyQuery.rewrite return
the underlying query you want use  (make sure to call rewrite on it first
though)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 15 09:57:45 2007
Return-Path: <java-user-return-26161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99957 invoked from network); 15 Feb 2007 09:57:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2007 09:57:44 -0000
Received: (qmail 43919 invoked by uid 500); 15 Feb 2007 09:57:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43889 invoked by uid 500); 15 Feb 2007 09:57:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43877 invoked by uid 99); 15 Feb 2007 09:57:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 01:57:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 01:57:34 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HHdMX-0002H5-Gx
	for java-user@lucene.apache.org; Thu, 15 Feb 2007 01:57:13 -0800
Message-ID: <8982507.post@talk.nabble.com>
Date: Thu, 15 Feb 2007 01:57:13 -0800 (PST)
From: poeta simbolista <poetasimbolista@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Extending Query, Weight, Scorer
In-Reply-To: <Pine.LNX.4.58.0702150028450.28585@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: poetasimbolista@gmail.com
References: <8965471.post@talk.nabble.com> <Pine.LNX.4.58.0702150028450.28585@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org




Chris Hostetter wrote:
> 
> your Scorer.next method should be skipping over documents that you do not
> consider "matches" to your search.
> 
But, since the value on the float[] is the same regardless it has a field
with value '0' and has no field, how can i tell one from another?


Chris Hostetter wrote:
> 
> I can't help but wonder why you don't just use ConstantScoreRangeQuery for
> this?
> 
Basically, I have been working on someone else code and they didn't use it.
I didn't know about this... does it do what I want? Does it do it faster?
Does it do the comparison numerically or lexicographically?

Thanks a lot!


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




-- 
View this message in context: http://www.nabble.com/Extending-Query%2C-Weight%2C-Scorer-tf3227441.html#a8982507
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 15 10:09:20 2007
Return-Path: <java-user-return-26162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8538 invoked from network); 15 Feb 2007 10:09:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2007 10:09:19 -0000
Received: (qmail 61798 invoked by uid 500); 15 Feb 2007 10:09:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61768 invoked by uid 500); 15 Feb 2007 10:09:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61757 invoked by uid 99); 15 Feb 2007 10:09:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 02:09:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 02:09:09 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HHdXl-0004tQ-5T
	for java-user@lucene.apache.org; Thu, 15 Feb 2007 02:08:49 -0800
Message-ID: <8982670.post@talk.nabble.com>
Date: Thu, 15 Feb 2007 02:08:49 -0800 (PST)
From: poeta simbolista <poetasimbolista@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: FieldCacheImpl mistake?
In-Reply-To: <Pine.LNX.4.58.0702150042470.28585@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: poetasimbolista@gmail.com
References: <719878.74053.qm@web50301.mail.yahoo.com> <8970509.post@talk.nabble.com> <Pine.LNX.4.58.0702150042470.28585@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org




Chris Hostetter wrote:
> 
> 
> :   i suggest it could be defined a (e.g.) NOT_FOUND_FLOAT_VALUE,
> modifiable,
> : so it does not necessarily have to be 0. And used for initialise the
> array
> : of floats before processing (or do it on the loop if better performance
> can
> : be reached).
> :   I have set it to Float.NEGATIVE_INFINITY
> 
> this sounds like a generally usable feature ... although we wouldn't want
> it to be a single for hte whole field cache because then code expecting
> the defaults to be Float.NEGATIVE_INFINITY could be suprised if other code
> (perhaps even dealing with different fields) populated the cache first.
> 
> the ideal way to do this might be to add a "getDefault()" method to the
> IntParser and FloatParser interfaces ... but thta wouldn't be backwards
> compatible.
> 
> 

The default should be 0 to keep being backwards compatible. Then just
provide a means to change that setting. So for my code I just could add: 
     setInitialValue(Float.NEGATIVE_INFINITY); for example.
Being the INITIAL_VALUE thingy set initially to 0. That would be backwards
compatible.


Chris Hostetter wrote:
> 
> one (kludgy) possibility would be to use a single call to
> FloatParser.parseFloat(null) to determine what value to use -- if it
> throws an exception use "0.0", otherwise use whatever it returns, what are
> the odds that an existing FloatParser that doesn't balk on null isn't
> going to return something that makes sense as a default?
> 

The parser is not used in those cases that there is no field. My first
approach on all this, before looking at the code, was to create a new
FloatParser that returns NEGATIVE_INFINITY in those cases it throws an
exception. When I saw there was no difference with the default
implementation (which just uses Float.parseFloat(String s) ) then I began
diving into the code.

I am for the previous solution though. The setInitialFloatValue(Float)
thingy. And same for Ints! :)

Cheers

-- 
View this message in context: http://www.nabble.com/Re%3A-FieldCacheImpl-mistake--tf3228736.html#a8982670
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 15 10:35:32 2007
Return-Path: <java-user-return-26163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18249 invoked from network); 15 Feb 2007 10:35:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2007 10:35:31 -0000
Received: (qmail 95017 invoked by uid 500); 15 Feb 2007 10:35:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94996 invoked by uid 500); 15 Feb 2007 10:35:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94985 invoked by uid 99); 15 Feb 2007 10:35:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 02:35:31 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [84.96.21.10] (HELO trinity.anyware-tech.com) (84.96.21.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 02:35:21 -0800
Received: from localhost (localhost [127.0.0.1])
	by trinity.anyware-tech.com (Postfix) with ESMTP id B89EB40962A
	for <java-user@lucene.apache.org>; Thu, 15 Feb 2007 11:34:59 +0100 (CET)
Received: from trinity.anyware-tech.com ([127.0.0.1])
	by localhost (trinity.anyware-tech.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 12666-01-6 for <java-user@lucene.apache.org>;
	Thu, 15 Feb 2007 11:34:49 +0100 (CET)
Received: from bumbo.anyware (bumbo.anyware [10.0.3.29])
	by trinity.anyware-tech.com (Postfix) with ESMTP id D25CE40963A
	for <java-user@lucene.apache.org>; Thu, 15 Feb 2007 11:32:40 +0100 (CET)
From: Nicolas =?iso-8859-1?q?Lalev=E9e?= <nicolas.lalevee@anyware-tech.com>
Organization: Anyware Technologies
To: java-user@lucene.apache.org
Subject: Re: Decorating a Query
Date: Thu, 15 Feb 2007 11:32:39 +0100
User-Agent: KMail/1.9.5
References: <200702151021.06794.nicolas.lalevee@anyware-tech.com> <Pine.LNX.4.58.0702150124240.6154@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0702150124240.6154@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200702151132.40013.nicolas.lalevee@anyware-tech.com>
X-Virus-Scanned: Debian amavisd-new at anyware-tech.com
X-Virus-Checked: Checked by ClamAV on apache.org

Le Jeudi 15 F=E9vrier 2007 10:27, Chris Hostetter a =E9crit=A0:
> : I wanted to implement my own query, query wich will be specific to my
> : application. The query I want to implement is in fact just a combinaison
> : of sevral already implemented queries. So acheive this, I do this kind =
of
>
> you can probably achieve your goal by simply making MyQuery.rewrite return
> the underlying query you want use  (make sure to call rewrite on it first
> though)

ok, got it. And it works. thanks !

And in fact I shouldn't override the weight(...) function. I have just look=
ed=20
to the prefix query source code.

cheers,

=2D-=20
Nicolas LALEV=C9E
Solutions & Technologies
ANYWARE TECHNOLOGIES
Tel : +33 (0)5 61 00 52 90
=46ax : +33 (0)5 61 00 51 46
http://www.anyware-tech.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 15 15:02:33 2007
Return-Path: <java-user-return-26164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7563 invoked from network); 15 Feb 2007 15:02:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2007 15:02:29 -0000
Received: (qmail 4367 invoked by uid 500); 15 Feb 2007 15:02:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4198 invoked by uid 500); 15 Feb 2007 15:02:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4157 invoked by uid 99); 15 Feb 2007 15:02:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 07:02:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [132.68.238.35] (HELO mailgw3.technion.ac.il) (132.68.238.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 07:02:11 -0800
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mailgw3.technion.ac.il (Postfix) with ESMTP id 18E4D173B94
	for <java-user@lucene.apache.org>; Thu, 15 Feb 2007 17:01:49 +0200 (IST)
X-Virus-Scanned: by amavisd-new at technion.ac.il
Received: from mailgw3.technion.ac.il ([127.0.0.1])
	by localhost (mailgw3.technion.ac.il [127.0.0.1]) (amavisd-new, port 10024)
	with LMTP id ISH5rnBI1Feg for <java-user@lucene.apache.org>;
	Thu, 15 Feb 2007 17:01:49 +0200 (IST)
Received: from fermat.math.technion.ac.il (fermat.math.technion.ac.il [132.68.115.6])
	by mailgw3.technion.ac.il (Postfix) with ESMTP id DB137173B91
	for <java-user@lucene.apache.org>; Thu, 15 Feb 2007 17:01:44 +0200 (IST)
Received: from fermat.math.technion.ac.il (localhost [127.0.0.1])
	by fermat.math.technion.ac.il (8.12.10/8.12.10) with ESMTP id l1FF1iSb017003
	for <java-user@lucene.apache.org>; Thu, 15 Feb 2007 17:01:44 +0200 (IST)
Received: (from nyh@localhost)
	by fermat.math.technion.ac.il (8.12.10/8.12.10/Submit) id l1FF1h1Y017002
	for java-user@lucene.apache.org; Thu, 15 Feb 2007 17:01:43 +0200 (IST)
X-Authentication-Warning: fermat.math.technion.ac.il: nyh set sender to nyh@math.technion.ac.il using -f
Date: Thu, 15 Feb 2007 17:01:43 +0200
From: "Nadav Har'El" <nyh@math.technion.ac.il>
To: java-user@lucene.apache.org
Subject: Re: NO_NORMS and TOKENIZED?
Message-ID: <20070215150143.GA16525@fermat.math.technion.ac.il>
References: <20070126195010.90762.qmail@web50305.mail.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20070126195010.90762.qmail@web50305.mail.yahoo.com>
User-Agent: Mutt/1.4.2.2i
Hebrew-Date: 27 Shevat 5767
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, Jan 26, 2007, Otis Gospodnetic wrote about "Re: NO_NORMS and TOKENIZED?":
> Funny, I was looking to do the same thing the other day and gave up thinking it wasn't possible, not being aware of setOmitNorms().  Yeah, a javadoc patch would be welcome.
> 
> Otis

Before I go ahead and post a javadoc patch, I want to question again the
wisdom of this whole situation:

Currently, most of a Field's parameters must be defined during its
construction. There is no method to change whether this Field object is to
be stored, to be compressed, to be indexed, to be tokenized - all these
things MUST be defined during the field's construction. So it is very
strange, and completely unexpected (at least to me and to Otis), that just
the "omitNorms" parameter can be changed after after construction, with a
"setOmitNorms" method - and not only can it be set after construction, in
some cases it must be set after construction, because the constructor doesn't
allow you to set it if you want an analyzer...

So perhaps changing the code, not just the javadoc, would be better?
One way to do it while keeping backward compatibility is to add something
like TOKENIZED_NO_NORMS to Field.Index.

> >...
> > I hadn't added a Field.Index option at all, and Doug suggested
> > NO_NORMS, probably because it's mostly harmless to new users who might
> > disable length normalization without realizing the implications.

If we had also a "TOKENIZED_NO_NORMS", why would new users accidentally
use it? I guess the javadoc of this parameter could also warn against its
use (something like "not recommended for general use", or whatever)?

-- 
Nadav Har'El                        |    Thursday, Feb 15 2007, 27 Shevat 5767
IBM Haifa Research Lab              |-----------------------------------------
                                    |How long a minute depends on what side of
http://nadav.harel.org.il           |the bathroom door you're on.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 15 17:31:07 2007
Return-Path: <java-user-return-26165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89342 invoked from network); 15 Feb 2007 17:31:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2007 17:31:06 -0000
Received: (qmail 33104 invoked by uid 500); 15 Feb 2007 17:31:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33078 invoked by uid 500); 15 Feb 2007 17:31:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33067 invoked by uid 99); 15 Feb 2007 17:31:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 09:31:05 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 09:30:55 -0800
Received: by ug-out-1314.google.com with SMTP id k40so235423ugc
        for <java-user@lucene.apache.org>; Thu, 15 Feb 2007 09:30:31 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=uQJFAOQXJXNsH2YwnNYZOAQEVqmNo8S8bVxh8YGbsyiag2rWoV2fk7pqoVqr3yB0VcGBp6//mA/Qw3OROPWwPo+W/MXE3OT+axhJz2GX6v+MgJOfIKVyRKosU8TfNmNHPGjs2DAsbOnQosLZjOj4guLfd0KDTv+4nRYA6ouYQro=
Received: by 10.82.155.10 with SMTP id c10mr3234416bue.1171560630889;
        Thu, 15 Feb 2007 09:30:30 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Thu, 15 Feb 2007 09:30:30 -0800 (PST)
Message-ID: <359a92830702150930y453fb106lfa4ba412da5fdcf2@mail.gmail.com>
Date: Thu, 15 Feb 2007 12:30:30 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multiword Highlighting
In-Reply-To: <45C3BEC3.1000100@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_143178_281667.1171560630431"
References: <764035.4185.qm@web26008.mail.ukl.yahoo.com>
	 <45C3BEC3.1000100@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_143178_281667.1171560630431
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I hope you're all following this old thread, because I've just run into
something I don't quite know what to do about with the SpansExtractor code
that I shamelessly stole.

Let's say my text is "a b c d e f g h" and my query is "a AND z". The
implementation I stole for SpansExtractor (mentioned several times in this
thread) returns a span for "a" which doesn't preserve the sense of the
query. The root of the problem is that when it gets down to assembling the
getSpansFromTermQuery, the sense of "AND" is lost and I get span for the "a"
in the query.

The rest of the kinds of spans don't seem to have the same issue. OR should
return the "a" in the example above. Any phrase queries that come through
work fine. In fact, our application requires that we have an implied
proximity, mostly anyway, so I haven't had to deal with this until now.....

One way, it seems to me, to handle this would be to transform the query
above into a span query with a limit of 10,000, where 10,000 is a magic
number that I'm confident is OK in my application because of the
PositionIncrementGaps I set up during indexing.

Is there a more elegant way of doing this? Or am I missing the boat
entirely? Or did I mess up when I stole the code?

Or, and this would be the easiest for me at least, has this work already
been done and all I really need to do is get a different implementation of
SpansExtractor <G>?

Thanks
Erick


On 2/2/07, Mark Miller <markrmiller@gmail.com> wrote:
>
>
>
> mark harwood wrote:
> > Hi Mark,
> > Have you looked at the returned spans from any other potential problem
> scenarios (other than the 3 word one you suggest) e.g. complex nested
> "SpanOr" or "SpanNot" logic?
> >
> Nothing super intense, but I haved look at some semi complex nesting and
> it all looks great if you use the full span highlighting...highlighting
> the first and last word of the span only works great if your limited to
> word to word proximity searching (like in my parser <G> works great for
> my sentence and paragraph proximity searching, though i had to add the
> option of hiding my index marker tokens from the output)
>
> Perhaps you know of something that I haven't run into that may not
> highlight correctly ?
> > Can you attach your code to a new Jira entry so I can have a play?
> >
> >
> I certainly will.
>
> - Mark
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_143178_281667.1171560630431--

From java-user-return-26166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 15 19:40:15 2007
Return-Path: <java-user-return-26166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40956 invoked from network); 15 Feb 2007 19:40:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2007 19:40:14 -0000
Received: (qmail 84965 invoked by uid 500); 15 Feb 2007 19:40:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84941 invoked by uid 500); 15 Feb 2007 19:40:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 67587 invoked by uid 99); 15 Feb 2007 18:29:05 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
DomainKey-Signature: a=rsa-sha1; s=serpent; d=yahoo-inc.com; c=nofws; q=dns;
	h=from:to:subject:date:message-id:mime-version:content-type:
	content-transfer-encoding:x-priority:x-msmail-priority:x-mailer:x-mimeole:importance;
	b=pN9TSrDs26V5VFviRF3SwAOgP4kT7vyEX9J9LOvrI21Oj4GTgSfd2axpenvj1PG7
From: "Deepa Paranjpe" <deepap@yahoo-inc.com>
To: <java-user@lucene.apache.org>
Subject: Lucene index in memory
Date: Thu, 15 Feb 2007 10:28:31 -0800
Message-ID: <HPEMJPGBBCEPAOGPMNFNKELNCCAA.deepap@yahoo-inc.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

I want to understand how lucene searches its index -- does it load the whole
index into memory at once? Is there any way to make sure that it does so.

I want to optimize maximally on the search time required by lucene on over
~7M short documents. The queries that I deal are 6 to 7 tokens on an
average.

Your help on this will be appreciated.

-Deepa


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 15 19:51:14 2007
Return-Path: <java-user-return-26167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44794 invoked from network); 15 Feb 2007 19:51:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2007 19:51:13 -0000
Received: (qmail 8730 invoked by uid 500); 15 Feb 2007 19:51:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8693 invoked by uid 500); 15 Feb 2007 19:51:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8675 invoked by uid 99); 15 Feb 2007 19:51:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 11:51:13 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 11:51:02 -0800
Received: by ug-out-1314.google.com with SMTP id k40so282526ugc
        for <java-user@lucene.apache.org>; Thu, 15 Feb 2007 11:50:40 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:in-reply-to:references:mime-version:x-priority:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=VfG6wwFB/Ta7dZq7qN1BqUuHYDWqxgG18P2oZA/YlGzkFwjMhQMvXuebeKPrMvAzNsym9tyyk6rfS1LvsrbeSJtlrAIqIYEluVpKwk9uJDQYUmOvfo8mzIYkJew9UqdXR1h31PzbaQnW7rkyoamN0IB5CPHTp7+KoZKq2DW5SPo=
Received: by 10.67.97.7 with SMTP id z7mr2023600ugl.1171569040419;
        Thu, 15 Feb 2007 11:50:40 -0800 (PST)
Received: from ?192.168.1.3? ( [83.249.110.75])
        by mx.google.com with ESMTP id 29sm2582131uga.2007.02.15.11.50.39;
        Thu, 15 Feb 2007 11:50:39 -0800 (PST)
In-Reply-To: <HPEMJPGBBCEPAOGPMNFNKELNCCAA.deepap@yahoo-inc.com>
References: <HPEMJPGBBCEPAOGPMNFNKELNCCAA.deepap@yahoo-inc.com>
Mime-Version: 1.0 (Apple Message framework v752.3)
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <FF49EB02-FC32-4A31-9B0E-3F8ED072F14A@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Lucene index in memory
Date: Thu, 15 Feb 2007 20:49:06 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


15 feb 2007 kl. 19.28 skrev Deepa Paranjpe:
> I want to optimize maximally on the search time required by lucene  
> on over
> ~7M short documents. The queries that I deal are 6 to 7 tokens on an
> average.

Load your FSDirectory to a RAMDirectory.

If you feel experimental you can take a look at
<https://issues.apache.org/jira/browse/LUCENE-550>

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 15 19:57:17 2007
Return-Path: <java-user-return-26168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46279 invoked from network); 15 Feb 2007 19:57:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2007 19:57:16 -0000
Received: (qmail 22051 invoked by uid 500); 15 Feb 2007 19:57:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22031 invoked by uid 500); 15 Feb 2007 19:57:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22020 invoked by uid 99); 15 Feb 2007 19:57:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 11:57:17 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.164.102.196] (HELO mail.gotuit.com) (216.164.102.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 11:57:07 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C7513B.6C0E5240"
Subject: org.apache.lucene.misc package
Date: Thu, 15 Feb 2007 14:56:44 -0500
Message-ID: <586B46B62C73C44AA8F4302E01A84A842D9099@exchange.gotuit.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: org.apache.lucene.misc package
Thread-Index: AcdRO2sYn3/puy85QJOxmDCsYp4SYQ==
From: "Seeta Somagani" <seeta@gotuit.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7513B.6C0E5240
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

=20

I'm trying to look at the source of the classes in
org.apache.lucene.misc. I couldn't find the package in the latest
nightly build. Where should I be looking?=20

=20

Thank you,

Seeta Somagani


------_=_NextPart_001_01C7513B.6C0E5240--

From java-user-return-26169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 15 21:21:20 2007
Return-Path: <java-user-return-26169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85580 invoked from network); 15 Feb 2007 21:21:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2007 21:21:20 -0000
Received: (qmail 81459 invoked by uid 500); 15 Feb 2007 21:21:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81262 invoked by uid 500); 15 Feb 2007 21:21:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81241 invoked by uid 99); 15 Feb 2007 21:21:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 13:21:19 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 13:21:09 -0800
Received: by nf-out-0910.google.com with SMTP id i2so1137883nfe
        for <java-user@lucene.apache.org>; Thu, 15 Feb 2007 13:20:47 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=r1Vf2ywwmS/TqYBD2yhYlw/NcHTuiepIVj12U134aaQcV98F8u/UCTYPwHxPeV22jnz5mMggLvQP6ua93vwJEzNVo0IUX0AwNen4tuzqWePfH+SQsw3nMQkrUF5eQAHLvYVnIB2+HMVyOOg4uNDOeNICZdKuPkOJ0OvRJdHYr6w=
Received: by 10.82.154.2 with SMTP id b2mr3634412bue.1171574446884;
        Thu, 15 Feb 2007 13:20:46 -0800 (PST)
Received: by 10.82.106.19 with HTTP; Thu, 15 Feb 2007 13:20:46 -0800 (PST)
Message-ID: <c68e39170702151320g546790b4qb16199eb1bf8c6c@mail.gmail.com>
Date: Thu, 15 Feb 2007 16:20:46 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: NO_NORMS and TOKENIZED?
In-Reply-To: <20070215150143.GA16525@fermat.math.technion.ac.il>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20070126195010.90762.qmail@web50305.mail.yahoo.com>
	 <20070215150143.GA16525@fermat.math.technion.ac.il>
X-Google-Sender-Auth: 96b58dd91a4c0174
X-Virus-Checked: Checked by ClamAV on apache.org

I originally added it without an Index param at all.
I can't say I'm a fan of the way Field currently does things, and I
didn't want everyone to pay the price for yet more options.

Look at the code for the Field constructor:

  public Field(String name, String value, Store store, Index index,
TermVector termVector) {
    if (name == null)
      throw new NullPointerException("name cannot be null");
    if (value == null)
      throw new NullPointerException("value cannot be null");
    if (name.length() == 0 && value.length() == 0)
      throw new IllegalArgumentException("name and value cannot both be empty");
    if (index == Index.NO && store == Store.NO)
      throw new IllegalArgumentException("it doesn't make sense to
have a field that "
         + "is neither indexed nor stored");
    if (index == Index.NO && termVector != TermVector.NO)
      throw new IllegalArgumentException("cannot store term vector information "
         + "for a field that is not indexed");

    this.name = name.intern();        // field names are interned
    this.fieldsData = value;

    if (store == Store.YES){
      this.isStored = true;
      this.isCompressed = false;
    }
    else if (store == Store.COMPRESS) {
      this.isStored = true;
      this.isCompressed = true;
    }
    else if (store == Store.NO){
      this.isStored = false;
      this.isCompressed = false;
    }
    else
      throw new IllegalArgumentException("unknown store parameter " + store);

    if (index == Index.NO) {
      this.isIndexed = false;
      this.isTokenized = false;
    } else if (index == Index.TOKENIZED) {
      this.isIndexed = true;
      this.isTokenized = true;
    } else if (index == Index.UN_TOKENIZED) {
      this.isIndexed = true;
      this.isTokenized = false;
    } else if (index == Index.NO_NORMS) {
      this.isIndexed = true;
      this.isTokenized = false;
      this.omitNorms = true;
    } else {
      throw new IllegalArgumentException("unknown index parameter " + index);
    }

    this.isBinary = false;

    setStoreTermVector(termVector);
  }

 protected void setStoreTermVector(Field.TermVector termVector) {
    if (termVector == Field.TermVector.NO) {
      this.storeTermVector = false;
      this.storePositionWithTermVector = false;
      this.storeOffsetWithTermVector = false;
    }
    else if (termVector == Field.TermVector.YES) {
      this.storeTermVector = true;
      this.storePositionWithTermVector = false;
      this.storeOffsetWithTermVector = false;
    }
    else if (termVector == Field.TermVector.WITH_POSITIONS) {
      this.storeTermVector = true;
      this.storePositionWithTermVector = true;
      this.storeOffsetWithTermVector = false;
    }
    else if (termVector == Field.TermVector.WITH_OFFSETS) {
      this.storeTermVector = true;
      this.storePositionWithTermVector = false;
      this.storeOffsetWithTermVector = true;
    }
    else if (termVector == Field.TermVector.WITH_POSITIONS_OFFSETS) {
      this.storeTermVector = true;
      this.storePositionWithTermVector = true;
      this.storeOffsetWithTermVector = true;
    }
    else {
      throw new IllegalArgumentException("unknown termVector parameter
" + termVector);
    }
  }


I simply think this is too high of a price to pay for "type safety".
Everyone shouldn't have to pay a performance penalty for making things
a little "safer".  I'm probably in the minority, hence I never said
anything about it before.

It's also made Solr code worse because it stores these things as
flags, but has to go through the same if-then-else contortions to
construct a Field with the proper parameters (just to have Field go
through the reverse contortions to de-multiplex these options).

Think about what would happen if we added a few more options on
storing term vectors... exponential explosion in those if-then-else
statements.

How would I have handled it?
  With a single Field class, I would probably have used old-fashion
c-style flags (a bit field).  Nice an extensible (you can add new
flags without adding/changing any APIs, no performance impact to
adding new options, you can pass around all these flags as a unit,
check multiple flags with a single instruction, etc.
  If we look at inheritance, I'd be tempted to let people subclass and
allow them to pass data directly to the indexer rather than trying to
store it all and enumerate all the possibilities in the single Field
class.
   Reader getBinaryValue()  or even int writeBinaryValue(Writer or IndexOutput)
   TokenStream getTokens()
   boolean isIndexed()

Sorry for the rant... I guess my short answer is that I don't have an
opinion on adding another type-safe constant TOKENIZED_NO_NORMS
because I don't like the whole scheme.

-Yonik


On 2/15/07, Nadav Har'El <nyh@math.technion.ac.il> wrote:
> On Fri, Jan 26, 2007, Otis Gospodnetic wrote about "Re: NO_NORMS and TOKENIZED?":
> > Funny, I was looking to do the same thing the other day and gave up thinking it wasn't possible, not being aware of setOmitNorms().  Yeah, a javadoc patch would be welcome.
> >
> > Otis
>
> Before I go ahead and post a javadoc patch, I want to question again the
> wisdom of this whole situation:
>
> Currently, most of a Field's parameters must be defined during its
> construction. There is no method to change whether this Field object is to
> be stored, to be compressed, to be indexed, to be tokenized - all these
> things MUST be defined during the field's construction. So it is very
> strange, and completely unexpected (at least to me and to Otis), that just
> the "omitNorms" parameter can be changed after after construction, with a
> "setOmitNorms" method - and not only can it be set after construction, in
> some cases it must be set after construction, because the constructor doesn't
> allow you to set it if you want an analyzer...
>
> So perhaps changing the code, not just the javadoc, would be better?
> One way to do it while keeping backward compatibility is to add something
> like TOKENIZED_NO_NORMS to Field.Index.
>
> > >...
> > > I hadn't added a Field.Index option at all, and Doug suggested
> > > NO_NORMS, probably because it's mostly harmless to new users who might
> > > disable length normalization without realizing the implications.
>
> If we had also a "TOKENIZED_NO_NORMS", why would new users accidentally
> use it? I guess the javadoc of this parameter could also warn against its
> use (something like "not recommended for general use", or whatever)?
>
> --
> Nadav Har'El                        |    Thursday, Feb 15 2007, 27 Shevat 5767
> IBM Haifa Research Lab              |-----------------------------------------
>                                     |How long a minute depends on what side of
> http://nadav.harel.org.il           |the bathroom door you're on.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 15 21:36:51 2007
Return-Path: <java-user-return-26170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92393 invoked from network); 15 Feb 2007 21:36:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2007 21:36:50 -0000
Received: (qmail 19835 invoked by uid 500); 15 Feb 2007 21:36:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19809 invoked by uid 500); 15 Feb 2007 21:36:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19797 invoked by uid 99); 15 Feb 2007 21:36:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 13:36:51 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 13:36:41 -0800
Received: by nf-out-0910.google.com with SMTP id i2so1142243nfe
        for <java-user@lucene.apache.org>; Thu, 15 Feb 2007 13:36:16 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=sPrE67VDvmbxIGv2LjbGIEW8HZHrJm3qiYA/eNcKC/9fUR2MpmjG8uUyQUEXQiq5Zi8XZjELs+v7UdhgCfEClBxH6aROzdEAi0Gj/7d9YEJLuoCU+cH/dLE63znWQHJgYosUImSlTj3UboqKX/age9NkSbQeD0CvtfcCrOEMXxE=
Received: by 10.82.135.13 with SMTP id i13mr3680780bud.1171575375872;
        Thu, 15 Feb 2007 13:36:15 -0800 (PST)
Received: by 10.82.106.19 with HTTP; Thu, 15 Feb 2007 13:36:15 -0800 (PST)
Message-ID: <c68e39170702151336j38b54f10mb0113838af61fcb0@mail.gmail.com>
Date: Thu, 15 Feb 2007 16:36:15 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: FieldCacheImpl mistake?
In-Reply-To: <Pine.LNX.4.58.0702150042470.28585@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <719878.74053.qm@web50301.mail.yahoo.com>
	 <8970509.post@talk.nabble.com>
	 <Pine.LNX.4.58.0702150042470.28585@hal.rescomp.berkeley.edu>
X-Google-Sender-Auth: cf4a776fb4d75ccc
X-Virus-Checked: Checked by ClamAV on apache.org

On 2/15/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> the ideal way to do this might be to add a "getDefault()" method to the
> IntParser and FloatParser interfaces ... but thta wouldn't be backwards
> compatible.

Interfaces vs abstract classes again :-)
Users sometimes like interfaces better because they can essentially do
multiple-inheritance, but providers (like us) should prefer abstract
classes
because it allows us to add new methods and provide backward compatible
implementations.

IndexReader.hasNorms(), Analyzer.getPositionIncrementGap(), etc, have
all been possible to add in a back-compatible manner becuase they were
based on classes and not interfaces.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 15 23:56:56 2007
Return-Path: <java-user-return-26171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47204 invoked from network); 15 Feb 2007 23:56:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2007 23:56:55 -0000
Received: (qmail 49687 invoked by uid 500); 15 Feb 2007 23:56:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49646 invoked by uid 500); 15 Feb 2007 23:56:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49635 invoked by uid 99); 15 Feb 2007 23:56:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 15:56:54 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.184.237 as permitted sender)
Received: from [64.233.184.237] (HELO wr-out-0506.google.com) (64.233.184.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 15:56:43 -0800
Received: by wr-out-0506.google.com with SMTP id i22so861582wra
        for <java-user@lucene.apache.org>; Thu, 15 Feb 2007 15:56:23 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=RxpoNSwxsi9LOxj1rBWLdCQopSkAa0w+iNJVaJChEl3TqFNs9FV8ksYRe39wDjGPddWBvT/Y/k3f6KuS5fIlyeq/hgTvCAG5VOM/7qvZ3H0BiSguLCLzzbPOA+wXkSnXArlX40ruzfPyGkXMCJEfQYwiwhckBxzVmX/lhXVJ1hA=
Received: by 10.90.66.9 with SMTP id o9mr3378187aga.1171583782757;
        Thu, 15 Feb 2007 15:56:22 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 43sm4851555wri.2007.02.15.15.56.21;
        Thu, 15 Feb 2007 15:56:22 -0800 (PST)
Message-ID: <45D4F331.1070609@gmail.com>
Date: Thu, 15 Feb 2007 18:56:33 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Multiword Highlighting
References: <764035.4185.qm@web26008.mail.ukl.yahoo.com>	 <45C3BEC3.1000100@gmail.com> <359a92830702150930y453fb106lfa4ba412da5fdcf2@mail.gmail.com>
In-Reply-To: <359a92830702150930y453fb106lfa4ba412da5fdcf2@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Good catch Erick! I'll have to tackle this as well. Mark H is the 
originator of that code so maybe he will chime in, but what I am think 
is this:

In the getSpansFromBooleanquery, keep track of which clauses are 
required. Then based on if any Spans are actually returned from 
getSpansFromTerm for each required clause, add only the correct spans to 
the returned spans. If you get what I mean <g>. I am sure there are some 
more cases than that to consider, but I think the direction might work.

If you don't tackle it or can't share I'll be doing it myself.

- Mark

Erick Erickson wrote:
> I hope you're all following this old thread, because I've just run into
> something I don't quite know what to do about with the SpansExtractor 
> code
> that I shamelessly stole.
>
> Let's say my text is "a b c d e f g h" and my query is "a AND z". The
> implementation I stole for SpansExtractor (mentioned several times in 
> this
> thread) returns a span for "a" which doesn't preserve the sense of the
> query. The root of the problem is that when it gets down to assembling 
> the
> getSpansFromTermQuery, the sense of "AND" is lost and I get span for 
> the "a"
> in the query.
>
> The rest of the kinds of spans don't seem to have the same issue. OR 
> should
> return the "a" in the example above. Any phrase queries that come through
> work fine. In fact, our application requires that we have an implied
> proximity, mostly anyway, so I haven't had to deal with this until 
> now.....
>
> One way, it seems to me, to handle this would be to transform the query
> above into a span query with a limit of 10,000, where 10,000 is a magic
> number that I'm confident is OK in my application because of the
> PositionIncrementGaps I set up during indexing.
>
> Is there a more elegant way of doing this? Or am I missing the boat
> entirely? Or did I mess up when I stole the code?
>
> Or, and this would be the easiest for me at least, has this work already
> been done and all I really need to do is get a different 
> implementation of
> SpansExtractor <G>?
>
> Thanks
> Erick
>
>
> On 2/2/07, Mark Miller <markrmiller@gmail.com> wrote:
>>
>>
>>
>> mark harwood wrote:
>> > Hi Mark,
>> > Have you looked at the returned spans from any other potential problem
>> scenarios (other than the 3 word one you suggest) e.g. complex nested
>> "SpanOr" or "SpanNot" logic?
>> >
>> Nothing super intense, but I haved look at some semi complex nesting and
>> it all looks great if you use the full span highlighting...highlighting
>> the first and last word of the span only works great if your limited to
>> word to word proximity searching (like in my parser <G> works great for
>> my sentence and paragraph proximity searching, though i had to add the
>> option of hiding my index marker tokens from the output)
>>
>> Perhaps you know of something that I haven't run into that may not
>> highlight correctly ?
>> > Can you attach your code to a new Jira entry so I can have a play?
>> >
>> >
>> I certainly will.
>>
>> - Mark
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 16 00:43:51 2007
Return-Path: <java-user-return-26172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56773 invoked from network); 16 Feb 2007 00:43:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2007 00:43:50 -0000
Received: (qmail 96168 invoked by uid 500); 16 Feb 2007 00:43:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96133 invoked by uid 500); 16 Feb 2007 00:43:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96122 invoked by uid 99); 16 Feb 2007 00:43:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 16:43:52 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 16:43:41 -0800
Received: by nf-out-0910.google.com with SMTP id i2so1189543nfe
        for <java-user@lucene.apache.org>; Thu, 15 Feb 2007 16:43:20 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=QwO3A0rVZaSN0Qo7EAi8Riietfu84GBEiDdPscTkHMaNjPKJ2q8f60BUExiDnVyCpWkwSFLqBxDml1WRdf8J9YZFSqiwtmT1G/tf9hag9e8eUkJ14qsOLAJ5rBZj7R9DC6AXtU735jvKjNcuYd46dSZgNHokt1SjlqdDlr0Iv9w=
Received: by 10.82.113.6 with SMTP id l6mr3999437buc.1171586600361;
        Thu, 15 Feb 2007 16:43:20 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Thu, 15 Feb 2007 16:43:20 -0800 (PST)
Message-ID: <359a92830702151643n4e8c59b7v20d0cb12f05fe365@mail.gmail.com>
Date: Thu, 15 Feb 2007 19:43:20 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multiword Highlighting
In-Reply-To: <45D4F331.1070609@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_150545_3711434.1171586600085"
References: <764035.4185.qm@web26008.mail.ukl.yahoo.com>
	 <45C3BEC3.1000100@gmail.com>
	 <359a92830702150930y453fb106lfa4ba412da5fdcf2@mail.gmail.com>
	 <45D4F331.1070609@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_150545_3711434.1171586600085
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Mark:

Thanks, that reassures me that I'm not hallucinating. If it gets on my
priority list I can certainly share the code, since I stole it in the first
place <G>. I have a semi-solution for now that gets me out from under the
immediate problem, but it really wants a more robust solution than the one
I'm using.

Thanks
Erick

On 2/15/07, Mark Miller <markrmiller@gmail.com> wrote:
>
> Good catch Erick! I'll have to tackle this as well. Mark H is the
> originator of that code so maybe he will chime in, but what I am think
> is this:
>
> In the getSpansFromBooleanquery, keep track of which clauses are
> required. Then based on if any Spans are actually returned from
> getSpansFromTerm for each required clause, add only the correct spans to
> the returned spans. If you get what I mean <g>. I am sure there are some
> more cases than that to consider, but I think the direction might work.
>
> If you don't tackle it or can't share I'll be doing it myself.
>
> - Mark
>
> Erick Erickson wrote:
> > I hope you're all following this old thread, because I've just run into
> > something I don't quite know what to do about with the SpansExtractor
> > code
> > that I shamelessly stole.
> >
> > Let's say my text is "a b c d e f g h" and my query is "a AND z". The
> > implementation I stole for SpansExtractor (mentioned several times in
> > this
> > thread) returns a span for "a" which doesn't preserve the sense of the
> > query. The root of the problem is that when it gets down to assembling
> > the
> > getSpansFromTermQuery, the sense of "AND" is lost and I get span for
> > the "a"
> > in the query.
> >
> > The rest of the kinds of spans don't seem to have the same issue. OR
> > should
> > return the "a" in the example above. Any phrase queries that come
> through
> > work fine. In fact, our application requires that we have an implied
> > proximity, mostly anyway, so I haven't had to deal with this until
> > now.....
> >
> > One way, it seems to me, to handle this would be to transform the query
> > above into a span query with a limit of 10,000, where 10,000 is a magic
> > number that I'm confident is OK in my application because of the
> > PositionIncrementGaps I set up during indexing.
> >
> > Is there a more elegant way of doing this? Or am I missing the boat
> > entirely? Or did I mess up when I stole the code?
> >
> > Or, and this would be the easiest for me at least, has this work already
> > been done and all I really need to do is get a different
> > implementation of
> > SpansExtractor <G>?
> >
> > Thanks
> > Erick
> >
> >
> > On 2/2/07, Mark Miller <markrmiller@gmail.com> wrote:
> >>
> >>
> >>
> >> mark harwood wrote:
> >> > Hi Mark,
> >> > Have you looked at the returned spans from any other potential
> problem
> >> scenarios (other than the 3 word one you suggest) e.g. complex nested
> >> "SpanOr" or "SpanNot" logic?
> >> >
> >> Nothing super intense, but I haved look at some semi complex nesting
> and
> >> it all looks great if you use the full span highlighting...highlighting
> >> the first and last word of the span only works great if your limited to
> >> word to word proximity searching (like in my parser <G> works great for
> >> my sentence and paragraph proximity searching, though i had to add the
> >> option of hiding my index marker tokens from the output)
> >>
> >> Perhaps you know of something that I haven't run into that may not
> >> highlight correctly ?
> >> > Can you attach your code to a new Jira entry so I can have a play?
> >> >
> >> >
> >> I certainly will.
> >>
> >> - Mark
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_150545_3711434.1171586600085--

From java-user-return-26173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 16 00:49:15 2007
Return-Path: <java-user-return-26173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57784 invoked from network); 16 Feb 2007 00:49:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2007 00:49:14 -0000
Received: (qmail 2095 invoked by uid 500); 16 Feb 2007 00:49:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1648 invoked by uid 500); 16 Feb 2007 00:49:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1637 invoked by uid 99); 16 Feb 2007 00:49:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 16:49:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.184.228 as permitted sender)
Received: from [64.233.184.228] (HELO wr-out-0506.google.com) (64.233.184.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 16:49:02 -0800
Received: by wr-out-0506.google.com with SMTP id 55so1292949wri
        for <java-user@lucene.apache.org>; Thu, 15 Feb 2007 16:48:41 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=MNLWQxT4Lkm3HCTq/l4HDbWlONeFy+J2IJ+1Rq3z1ay5M4lF8mGtIVarh7LTRFgUMlPWV06J6tfZIt/5QFLxQmMqKP1yt6x1p8RnQcawhSZE0WG/GSPjVzRj6FbvsfasDkYRNPvcsdFHRrh5g9lGqGgWd+evi+EteYmw+K1oMrQ=
Received: by 10.90.102.20 with SMTP id z20mr3434507agb.1171586921622;
        Thu, 15 Feb 2007 16:48:41 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id g5sm4927318wra.2007.02.15.16.48.39;
        Thu, 15 Feb 2007 16:48:40 -0800 (PST)
Message-ID: <45D4FF7B.2090608@gmail.com>
Date: Thu, 15 Feb 2007 19:48:59 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Multiword Highlighting
References: <764035.4185.qm@web26008.mail.ukl.yahoo.com>	 <45C3BEC3.1000100@gmail.com>	 <359a92830702150930y453fb106lfa4ba412da5fdcf2@mail.gmail.com>	 <45D4F331.1070609@gmail.com> <359a92830702151643n4e8c59b7v20d0cb12f05fe365@mail.gmail.com>
In-Reply-To: <359a92830702151643n4e8c59b7v20d0cb12f05fe365@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Here is my initial attempt...I believe it might be sufficient:

import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.Term;
import org.apache.lucene.search.BooleanClause;
import org.apache.lucene.search.BooleanQuery;
import org.apache.lucene.search.PhraseQuery;
import org.apache.lucene.search.Query;
import org.apache.lucene.search.TermQuery;
import org.apache.lucene.search.spans.SpanNearQuery;
import org.apache.lucene.search.spans.SpanQuery;
import org.apache.lucene.search.spans.SpanTermQuery;
import org.apache.lucene.search.spans.Spans;

import java.io.IOException;

import java.util.ArrayList;
import java.util.Collections;
import java.util.List;


public class QuerySpansExtractor {
    public Spans[] extractSpans(Query query, IndexReader reader)
        throws IOException {
        List spans = getSpans(query, reader);

        return (Spans[]) spans.toArray(new Spans[spans.size()]);
    }

    private List getSpans(Query query, IndexReader reader)
        throws IOException {
        Spans spans = null;

        if (query instanceof BooleanQuery) {
            return getSpansFromBooleanQuery((BooleanQuery) query, reader);
        } else if (query instanceof PhraseQuery) {
            spans = getSpansFromPhraseQuery((PhraseQuery) query, reader);
        } else if (query instanceof TermQuery) {
            spans = getSpansFromTermQuery((TermQuery) query, reader);
        } else if (query instanceof SpanQuery) {
            spans = getSpansFromSpanQuery((SpanQuery) query, reader);
        }

        List spanList = new ArrayList(1);
        spanList.add(spans);

        return spanList;
    }

    private List getSpansFromBooleanQuery(BooleanQuery query, 
IndexReader reader)
        throws IOException {
        BooleanClause[] queryClauses = query.getClauses();
        int i;
        boolean useQuery = true;
        List possibleSpans = new ArrayList();

        for (i = 0; i < queryClauses.length; i++) {
            if (queryClauses[i].isProhibited()) {
                List prohibSpans = getSpans(queryClauses[i].getQuery(), 
reader);

                if (((Spans) prohibSpans.get(0)).next()) {
                    useQuery = false;
                } else {
                    possibleSpans.addAll(prohibSpans);
                }
            } else if (queryClauses[i].isRequired()) {
                List reqSpans = getSpans(queryClauses[i].getQuery(), 
reader);

                if (((Spans) reqSpans.get(0)).next()) {
                    useQuery = false;
                } else {
                    possibleSpans.addAll(reqSpans);
                }
            } else {
                
possibleSpans.addAll(getSpans(queryClauses[i].getQuery(), reader));
            }
        }

        if (!useQuery) {
            possibleSpans = Collections.EMPTY_LIST;
        }

        return possibleSpans;
    }

    private Spans getSpansFromPhraseQuery(PhraseQuery query, IndexReader 
reader)
        throws IOException {
        Term[] queryTerms = query.getTerms();
        int i;
        SpanQuery[] clauses = new SpanQuery[queryTerms.length];

        for (i = 0; i < queryTerms.length; i++) {
            clauses[i] = new SpanTermQuery(queryTerms[i]);
        }

        SpanNearQuery sp = new SpanNearQuery(clauses, query.getSlop(), 
false);
        sp.setBoost(query.getBoost());

        return sp.getSpans(reader);
    }

    private Spans getSpansFromTermQuery(TermQuery query, IndexReader reader)
        throws IOException {
        SpanTermQuery stq = new SpanTermQuery(query.getTerm());
        stq.setBoost(query.getBoost());

        return stq.getSpans(reader);
    }

    private Spans getSpansFromSpanQuery(SpanQuery query, IndexReader reader)
        throws IOException {
        return query.getSpans(reader);
    }
}



Erick Erickson wrote:
> Mark:
>
> Thanks, that reassures me that I'm not hallucinating. If it gets on my
> priority list I can certainly share the code, since I stole it in the 
> first
> place <G>. I have a semi-solution for now that gets me out from under the
> immediate problem, but it really wants a more robust solution than the 
> one
> I'm using.
>
> Thanks
> Erick
>
> On 2/15/07, Mark Miller <markrmiller@gmail.com> wrote:
>>
>> Good catch Erick! I'll have to tackle this as well. Mark H is the
>> originator of that code so maybe he will chime in, but what I am think
>> is this:
>>
>> In the getSpansFromBooleanquery, keep track of which clauses are
>> required. Then based on if any Spans are actually returned from
>> getSpansFromTerm for each required clause, add only the correct spans to
>> the returned spans. If you get what I mean <g>. I am sure there are some
>> more cases than that to consider, but I think the direction might work.
>>
>> If you don't tackle it or can't share I'll be doing it myself.
>>
>> - Mark
>>
>> Erick Erickson wrote:
>> > I hope you're all following this old thread, because I've just run 
>> into
>> > something I don't quite know what to do about with the SpansExtractor
>> > code
>> > that I shamelessly stole.
>> >
>> > Let's say my text is "a b c d e f g h" and my query is "a AND z". The
>> > implementation I stole for SpansExtractor (mentioned several times in
>> > this
>> > thread) returns a span for "a" which doesn't preserve the sense of the
>> > query. The root of the problem is that when it gets down to assembling
>> > the
>> > getSpansFromTermQuery, the sense of "AND" is lost and I get span for
>> > the "a"
>> > in the query.
>> >
>> > The rest of the kinds of spans don't seem to have the same issue. OR
>> > should
>> > return the "a" in the example above. Any phrase queries that come
>> through
>> > work fine. In fact, our application requires that we have an implied
>> > proximity, mostly anyway, so I haven't had to deal with this until
>> > now.....
>> >
>> > One way, it seems to me, to handle this would be to transform the 
>> query
>> > above into a span query with a limit of 10,000, where 10,000 is a 
>> magic
>> > number that I'm confident is OK in my application because of the
>> > PositionIncrementGaps I set up during indexing.
>> >
>> > Is there a more elegant way of doing this? Or am I missing the boat
>> > entirely? Or did I mess up when I stole the code?
>> >
>> > Or, and this would be the easiest for me at least, has this work 
>> already
>> > been done and all I really need to do is get a different
>> > implementation of
>> > SpansExtractor <G>?
>> >
>> > Thanks
>> > Erick
>> >
>> >
>> > On 2/2/07, Mark Miller <markrmiller@gmail.com> wrote:
>> >>
>> >>
>> >>
>> >> mark harwood wrote:
>> >> > Hi Mark,
>> >> > Have you looked at the returned spans from any other potential
>> problem
>> >> scenarios (other than the 3 word one you suggest) e.g. complex nested
>> >> "SpanOr" or "SpanNot" logic?
>> >> >
>> >> Nothing super intense, but I haved look at some semi complex nesting
>> and
>> >> it all looks great if you use the full span 
>> highlighting...highlighting
>> >> the first and last word of the span only works great if your 
>> limited to
>> >> word to word proximity searching (like in my parser <G> works 
>> great for
>> >> my sentence and paragraph proximity searching, though i had to add 
>> the
>> >> option of hiding my index marker tokens from the output)
>> >>
>> >> Perhaps you know of something that I haven't run into that may not
>> >> highlight correctly ?
>> >> > Can you attach your code to a new Jira entry so I can have a play?
>> >> >
>> >> >
>> >> I certainly will.
>> >>
>> >> - Mark
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 16 00:55:43 2007
Return-Path: <java-user-return-26174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58543 invoked from network); 16 Feb 2007 00:55:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2007 00:55:43 -0000
Received: (qmail 8959 invoked by uid 500); 16 Feb 2007 00:55:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8934 invoked by uid 500); 16 Feb 2007 00:55:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8923 invoked by uid 99); 16 Feb 2007 00:55:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 16:55:43 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 16:55:33 -0800
Received: by nf-out-0910.google.com with SMTP id i2so1192201nfe
        for <java-user@lucene.apache.org>; Thu, 15 Feb 2007 16:55:11 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=rWud7NQPdReaX3QHZZhzzbQKgJPmUiVU5aCwvNd0s37dThqw565/S2NvKqD91FI0EEppVeMd+g8OCgH3x5YOrIryGvvrLQWVR3BZ/w5S7dNPLcz5mx+jozl5EPv1jVenqttb7MFiUM2xAvycneQYBDt05SrJ8qkzDyAW60YSd10=
Received: by 10.82.118.2 with SMTP id q2mr4015587buc.1171587311481;
        Thu, 15 Feb 2007 16:55:11 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Thu, 15 Feb 2007 16:55:11 -0800 (PST)
Message-ID: <359a92830702151655x3127b52fv17d9f4ddd03c71dd@mail.gmail.com>
Date: Thu, 15 Feb 2007 19:55:11 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multiword Highlighting
In-Reply-To: <45D4FF7B.2090608@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_150661_2132651.1171587311438"
References: <764035.4185.qm@web26008.mail.ukl.yahoo.com>
	 <45C3BEC3.1000100@gmail.com>
	 <359a92830702150930y453fb106lfa4ba412da5fdcf2@mail.gmail.com>
	 <45D4F331.1070609@gmail.com>
	 <359a92830702151643n4e8c59b7v20d0cb12f05fe365@mail.gmail.com>
	 <45D4FF7B.2090608@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_150661_2132651.1171587311438
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Excellent! I'll give it a whirl in the morning. This may keep me from having
to rebuild my index as well, oh joy!

Thanks
Erick

On 2/15/07, Mark Miller <markrmiller@gmail.com> wrote:
>
> Here is my initial attempt...I believe it might be sufficient:
>
> import org.apache.lucene.index.IndexReader;
> import org.apache.lucene.index.Term;
> import org.apache.lucene.search.BooleanClause;
> import org.apache.lucene.search.BooleanQuery;
> import org.apache.lucene.search.PhraseQuery;
> import org.apache.lucene.search.Query;
> import org.apache.lucene.search.TermQuery;
> import org.apache.lucene.search.spans.SpanNearQuery;
> import org.apache.lucene.search.spans.SpanQuery;
> import org.apache.lucene.search.spans.SpanTermQuery;
> import org.apache.lucene.search.spans.Spans;
>
> import java.io.IOException;
>
> import java.util.ArrayList;
> import java.util.Collections;
> import java.util.List;
>
>
> public class QuerySpansExtractor {
>     public Spans[] extractSpans(Query query, IndexReader reader)
>         throws IOException {
>         List spans = getSpans(query, reader);
>
>         return (Spans[]) spans.toArray(new Spans[spans.size()]);
>     }
>
>     private List getSpans(Query query, IndexReader reader)
>         throws IOException {
>         Spans spans = null;
>
>         if (query instanceof BooleanQuery) {
>             return getSpansFromBooleanQuery((BooleanQuery) query, reader);
>         } else if (query instanceof PhraseQuery) {
>             spans = getSpansFromPhraseQuery((PhraseQuery) query, reader);
>         } else if (query instanceof TermQuery) {
>             spans = getSpansFromTermQuery((TermQuery) query, reader);
>         } else if (query instanceof SpanQuery) {
>             spans = getSpansFromSpanQuery((SpanQuery) query, reader);
>         }
>
>         List spanList = new ArrayList(1);
>         spanList.add(spans);
>
>         return spanList;
>     }
>
>     private List getSpansFromBooleanQuery(BooleanQuery query,
> IndexReader reader)
>         throws IOException {
>         BooleanClause[] queryClauses = query.getClauses();
>         int i;
>         boolean useQuery = true;
>         List possibleSpans = new ArrayList();
>
>         for (i = 0; i < queryClauses.length; i++) {
>             if (queryClauses[i].isProhibited()) {
>                 List prohibSpans = getSpans(queryClauses[i].getQuery(),
> reader);
>
>                 if (((Spans) prohibSpans.get(0)).next()) {
>                     useQuery = false;
>                 } else {
>                     possibleSpans.addAll(prohibSpans);
>                 }
>             } else if (queryClauses[i].isRequired()) {
>                 List reqSpans = getSpans(queryClauses[i].getQuery(),
> reader);
>
>                 if (((Spans) reqSpans.get(0)).next()) {
>                     useQuery = false;
>                 } else {
>                     possibleSpans.addAll(reqSpans);
>                 }
>             } else {
>
> possibleSpans.addAll(getSpans(queryClauses[i].getQuery(), reader));
>             }
>         }
>
>         if (!useQuery) {
>             possibleSpans = Collections.EMPTY_LIST;
>         }
>
>         return possibleSpans;
>     }
>
>     private Spans getSpansFromPhraseQuery(PhraseQuery query, IndexReader
> reader)
>         throws IOException {
>         Term[] queryTerms = query.getTerms();
>         int i;
>         SpanQuery[] clauses = new SpanQuery[queryTerms.length];
>
>         for (i = 0; i < queryTerms.length; i++) {
>             clauses[i] = new SpanTermQuery(queryTerms[i]);
>         }
>
>         SpanNearQuery sp = new SpanNearQuery(clauses, query.getSlop(),
> false);
>         sp.setBoost(query.getBoost());
>
>         return sp.getSpans(reader);
>     }
>
>     private Spans getSpansFromTermQuery(TermQuery query, IndexReader
> reader)
>         throws IOException {
>         SpanTermQuery stq = new SpanTermQuery(query.getTerm());
>         stq.setBoost(query.getBoost());
>
>         return stq.getSpans(reader);
>     }
>
>     private Spans getSpansFromSpanQuery(SpanQuery query, IndexReader
> reader)
>         throws IOException {
>         return query.getSpans(reader);
>     }
> }
>
>
>
> Erick Erickson wrote:
> > Mark:
> >
> > Thanks, that reassures me that I'm not hallucinating. If it gets on my
> > priority list I can certainly share the code, since I stole it in the
> > first
> > place <G>. I have a semi-solution for now that gets me out from under
> the
> > immediate problem, but it really wants a more robust solution than the
> > one
> > I'm using.
> >
> > Thanks
> > Erick
> >
> > On 2/15/07, Mark Miller <markrmiller@gmail.com> wrote:
> >>
> >> Good catch Erick! I'll have to tackle this as well. Mark H is the
> >> originator of that code so maybe he will chime in, but what I am think
> >> is this:
> >>
> >> In the getSpansFromBooleanquery, keep track of which clauses are
> >> required. Then based on if any Spans are actually returned from
> >> getSpansFromTerm for each required clause, add only the correct spans
> to
> >> the returned spans. If you get what I mean <g>. I am sure there are
> some
> >> more cases than that to consider, but I think the direction might work.
> >>
> >> If you don't tackle it or can't share I'll be doing it myself.
> >>
> >> - Mark
> >>
> >> Erick Erickson wrote:
> >> > I hope you're all following this old thread, because I've just run
> >> into
> >> > something I don't quite know what to do about with the SpansExtractor
> >> > code
> >> > that I shamelessly stole.
> >> >
> >> > Let's say my text is "a b c d e f g h" and my query is "a AND z". The
> >> > implementation I stole for SpansExtractor (mentioned several times in
> >> > this
> >> > thread) returns a span for "a" which doesn't preserve the sense of
> the
> >> > query. The root of the problem is that when it gets down to
> assembling
> >> > the
> >> > getSpansFromTermQuery, the sense of "AND" is lost and I get span for
> >> > the "a"
> >> > in the query.
> >> >
> >> > The rest of the kinds of spans don't seem to have the same issue. OR
> >> > should
> >> > return the "a" in the example above. Any phrase queries that come
> >> through
> >> > work fine. In fact, our application requires that we have an implied
> >> > proximity, mostly anyway, so I haven't had to deal with this until
> >> > now.....
> >> >
> >> > One way, it seems to me, to handle this would be to transform the
> >> query
> >> > above into a span query with a limit of 10,000, where 10,000 is a
> >> magic
> >> > number that I'm confident is OK in my application because of the
> >> > PositionIncrementGaps I set up during indexing.
> >> >
> >> > Is there a more elegant way of doing this? Or am I missing the boat
> >> > entirely? Or did I mess up when I stole the code?
> >> >
> >> > Or, and this would be the easiest for me at least, has this work
> >> already
> >> > been done and all I really need to do is get a different
> >> > implementation of
> >> > SpansExtractor <G>?
> >> >
> >> > Thanks
> >> > Erick
> >> >
> >> >
> >> > On 2/2/07, Mark Miller <markrmiller@gmail.com> wrote:
> >> >>
> >> >>
> >> >>
> >> >> mark harwood wrote:
> >> >> > Hi Mark,
> >> >> > Have you looked at the returned spans from any other potential
> >> problem
> >> >> scenarios (other than the 3 word one you suggest) e.g. complex
> nested
> >> >> "SpanOr" or "SpanNot" logic?
> >> >> >
> >> >> Nothing super intense, but I haved look at some semi complex nesting
> >> and
> >> >> it all looks great if you use the full span
> >> highlighting...highlighting
> >> >> the first and last word of the span only works great if your
> >> limited to
> >> >> word to word proximity searching (like in my parser <G> works
> >> great for
> >> >> my sentence and paragraph proximity searching, though i had to add
> >> the
> >> >> option of hiding my index marker tokens from the output)
> >> >>
> >> >> Perhaps you know of something that I haven't run into that may not
> >> >> highlight correctly ?
> >> >> > Can you attach your code to a new Jira entry so I can have a play?
> >> >> >
> >> >> >
> >> >> I certainly will.
> >> >>
> >> >> - Mark
> >> >>
> >> >>
> ---------------------------------------------------------------------
> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >>
> >> >>
> >> >
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_150661_2132651.1171587311438--

From java-user-return-26175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 16 01:31:23 2007
Return-Path: <java-user-return-26175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73773 invoked from network); 16 Feb 2007 01:31:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2007 01:31:22 -0000
Received: (qmail 50265 invoked by uid 500); 16 Feb 2007 01:31:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50233 invoked by uid 500); 16 Feb 2007 01:31:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50222 invoked by uid 99); 16 Feb 2007 01:31:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 17:31:21 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 17:31:11 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 366465B76E; Thu, 15 Feb 2007 17:30:50 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 2BB8E7F403
	for <java-user@lucene.apache.org>; Thu, 15 Feb 2007 17:30:50 -0800 (PST)
Date: Thu, 15 Feb 2007 17:30:50 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: NO_NORMS and TOKENIZED?
In-Reply-To: <c68e39170702151320g546790b4qb16199eb1bf8c6c@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0702151722560.629@hal.rescomp.berkeley.edu>
References: <20070126195010.90762.qmail@web50305.mail.yahoo.com> 
 <20070215150143.GA16525@fermat.math.technion.ac.il>
 <c68e39170702151320g546790b4qb16199eb1bf8c6c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Sorry for the rant... I guess my short answer is that I don't have an
: opinion on adding another type-safe constant TOKENIZED_NO_NORMS
: because I don't like the whole scheme.

agreed ... if people feel there is enough of a disconnect between the
options available as constructor args and the options available via
setters i would much rather see more setters then more constructor
args/constants.

i think having constructor arg constants for the "common" cases makes a
lot of sense ... but at this point i think we have way more then just the
common cases.

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 16 01:35:53 2007
Return-Path: <java-user-return-26176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74698 invoked from network); 16 Feb 2007 01:35:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2007 01:35:52 -0000
Received: (qmail 60006 invoked by uid 500); 16 Feb 2007 01:35:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59974 invoked by uid 500); 16 Feb 2007 01:35:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59963 invoked by uid 99); 16 Feb 2007 01:35:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 17:35:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 17:35:43 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 00F945B76E; Thu, 15 Feb 2007 17:35:22 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id F171C7F403
	for <java-user@lucene.apache.org>; Thu, 15 Feb 2007 17:35:22 -0800 (PST)
Date: Thu, 15 Feb 2007 17:35:22 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Extending Query, Weight, Scorer
In-Reply-To: <8982507.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0702151731070.629@hal.rescomp.berkeley.edu>
References: <8965471.post@talk.nabble.com> <Pine.LNX.4.58.0702150028450.28585@hal.rescomp.berkeley.edu>
 <8982507.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: > your Scorer.next method should be skipping over documents that you do not
: > consider "matches" to your search.
: >
: But, since the value on the float[] is the same regardless it has a field
: with value '0' and has no field, how can i tell one from another?

Well the FieldCache default value issue is a seperate problem (hence the
seperate thread where we are already discussing it) I'm just pointint out
a flaw in your Scorer: if you want to indicate that a document doesn't
match, then next/skipTO should be skipping over it.

: > I can't help but wonder why you don't just use ConstantScoreRangeQuery for

: I didn't know about this... does it do what I want? Does it do it faster?
: Does it do the comparison numerically or lexicographically?

yes it probably does what you want, i don't know about the speed issue, it
works lexigraphicaly (but that's why things like NumberTools exist to
encode numers in ways that sort lexigrahicaly)


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 16 01:39:08 2007
Return-Path: <java-user-return-26177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75305 invoked from network); 16 Feb 2007 01:39:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2007 01:39:08 -0000
Received: (qmail 67660 invoked by uid 500); 16 Feb 2007 01:39:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67629 invoked by uid 500); 16 Feb 2007 01:39:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67616 invoked by uid 99); 16 Feb 2007 01:39:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 17:39:07 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 17:38:57 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 529285B76E; Thu, 15 Feb 2007 17:38:37 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 468DF7F403
	for <java-user@lucene.apache.org>; Thu, 15 Feb 2007 17:38:37 -0800 (PST)
Date: Thu, 15 Feb 2007 17:38:37 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: FieldCacheImpl mistake?
In-Reply-To: <8982670.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0702151735420.629@hal.rescomp.berkeley.edu>
References: <719878.74053.qm@web50301.mail.yahoo.com> <8970509.post@talk.nabble.com>
 <Pine.LNX.4.58.0702150042470.28585@hal.rescomp.berkeley.edu>
 <8982670.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: The default should be 0 to keep being backwards compatible. Then just
: provide a means to change that setting. So for my code I just could add:
:      setInitialValue(Float.NEGATIVE_INFINITY); for example.
: Being the INITIAL_VALUE thingy set initially to 0. That would be backwards
: compatible.

It would be backwards compatible -- but it wouldn't be generally reusable,
it would be impossible to have different initial values for multiple
fields (let alone for multiple fields in multiple indexes in teh same JVM)

: > one (kludgy) possibility would be to use a single call to
: > FloatParser.parseFloat(null) to determine what value to use -- if it

: The parser is not used in those cases that there is no field. My first
: approach on all this, before looking at the code, was to create a new

yes, i realize that ... i'm suggestion that adding a call to
FloatParser.parseFloat(null) in the FieldCacheImpl when it is initially
building up the float[] would be one potential way to dealing with this in
a backwards compatible way.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 16 01:43:52 2007
Return-Path: <java-user-return-26178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77080 invoked from network); 16 Feb 2007 01:43:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2007 01:43:51 -0000
Received: (qmail 81828 invoked by uid 500); 16 Feb 2007 01:43:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81801 invoked by uid 500); 16 Feb 2007 01:43:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81790 invoked by uid 99); 16 Feb 2007 01:43:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 17:43:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 17:43:39 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 2BB3F5B76E; Thu, 15 Feb 2007 17:43:19 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 22B2C7F403
	for <java-user@lucene.apache.org>; Thu, 15 Feb 2007 17:43:19 -0800 (PST)
Date: Thu, 15 Feb 2007 17:43:19 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: FieldCacheImpl mistake?
In-Reply-To: <8982670.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0702151741320.629@hal.rescomp.berkeley.edu>
References: <719878.74053.qm@web50301.mail.yahoo.com> <8970509.post@talk.nabble.com>
 <Pine.LNX.4.58.0702150042470.28585@hal.rescomp.berkeley.edu>
 <8982670.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


Thinking about this a little more: my short term advice to you would be to
use FieldCache.getCustom with your own SortComparator that just returns
the Float/Int value parsed fro mthe string ... the Comparable[] should
default to "null" for any doc that doesn't have a value for the field, so
you'll be able to tell which ones have no value.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 16 04:54:26 2007
Return-Path: <java-user-return-26179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24038 invoked from network); 16 Feb 2007 04:54:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2007 04:54:25 -0000
Received: (qmail 14455 invoked by uid 500); 16 Feb 2007 04:54:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14420 invoked by uid 500); 16 Feb 2007 04:54:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14407 invoked by uid 99); 16 Feb 2007 04:54:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 20:54:27 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Feb 2007 20:54:16 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id D863F5B76E; Thu, 15 Feb 2007 20:53:55 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id C11DD7F403
	for <java-user@lucene.apache.org>; Thu, 15 Feb 2007 20:53:55 -0800 (PST)
Date: Thu, 15 Feb 2007 20:53:55 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: org.apache.lucene.misc package
In-Reply-To: <586B46B62C73C44AA8F4302E01A84A842D9099@exchange.gotuit.com>
Message-ID: <Pine.LNX.4.58.0702152053230.22147@hal.rescomp.berkeley.edu>
References: <586B46B62C73C44AA8F4302E01A84A842D9099@exchange.gotuit.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I'm trying to look at the source of the classes in
: org.apache.lucene.misc. I couldn't find the package in the latest
: nightly build. Where should I be looking?

you want to look at contrib/miscellaneous



-Hoss

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 16 16:46:33 2007
Return-Path: <java-user-return-26180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41902 invoked from network); 16 Feb 2007 16:46:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2007 16:46:32 -0000
Received: (qmail 11704 invoked by uid 500); 16 Feb 2007 16:46:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11671 invoked by uid 500); 16 Feb 2007 16:46:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11660 invoked by uid 99); 16 Feb 2007 16:46:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Feb 2007 08:46:32 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Feb 2007 08:46:22 -0800
Received: by nf-out-0910.google.com with SMTP id i2so1404084nfe
        for <java-user@lucene.apache.org>; Fri, 16 Feb 2007 08:46:00 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZNzf3osxm+V4jv1lFthQKQkptuL3YIeBJ2oUWu0nB+E05MfJZEBHn9klNUuAR/zogY2J6QqRMnsRwnZKVX8xyI4elTmhscmYebm6e/tTZHH27Vv23hAihd5s+fTRvIgyVcAOa0/NuaRCl32E9njT0sEr4AsjLre+WAWo+pAeE2g=
Received: by 10.82.177.3 with SMTP id z3mr5070278bue.1171644360481;
        Fri, 16 Feb 2007 08:46:00 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Fri, 16 Feb 2007 08:46:00 -0800 (PST)
Message-ID: <359a92830702160846p38189a18g9dc6b836a34232bb@mail.gmail.com>
Date: Fri, 16 Feb 2007 11:46:00 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multiword Highlighting
In-Reply-To: <359a92830702151655x3127b52fv17d9f4ddd03c71dd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8498_11155261.1171644360427"
References: <764035.4185.qm@web26008.mail.ukl.yahoo.com>
	 <45C3BEC3.1000100@gmail.com>
	 <359a92830702150930y453fb106lfa4ba412da5fdcf2@mail.gmail.com>
	 <45D4F331.1070609@gmail.com>
	 <359a92830702151643n4e8c59b7v20d0cb12f05fe365@mail.gmail.com>
	 <45D4FF7B.2090608@gmail.com>
	 <359a92830702151655x3127b52fv17d9f4ddd03c71dd@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8498_11155261.1171644360427
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

It must be time to eat lunch, since the more I stare at this code, the less
sense it makes to me. Which is a sure sign that I need a break <G>.

But a couple of things.....

1> my test cases throw some exceptions with the code as-is. The spans.get(0)
is a problem in that it's not guaranteed that the spans returned will have
anything in them. Also, I don't think that the test for reqSpans.get(0).next
in queryClauses[i].isRequired is correct (even if it doesn't throw
exceptions). Isn't the sense there that we want to include the spans if we
*do* have entries??

2> But more importantly, I think this throws things in the "span bucket"
across documents. Consicer two documents with text "a b c d e f" is in one
document, and "x y z" is in another, and we query on "a AND z", it seems
like extractSpansFromTermQuery would return one span from each document,
which would satisfy the tests in getSpansFromBooleanQuery inappropriately.

Is it just me or is working with Spans really intended to be "one pass
through and only forward"? There are several places in the SpansExtractor
code where we want to ask "are there any spans in here?". But to ask that,
you have to call next(). Which changes the state of the Spans such that you
have to be really careful when you use any Spans that have had this test
performed already and do a do..while (spans.next()); rather than a while (
spans.next()) {}..... Ditto with skipTo.


I'm finally realizing that I need to write more custom stuff here than is
probably useful for the community at large, since I only want to count spans
for a single document. But this is a great start for me since it puts a
bunch of the code in place for me and the rest should probably be just
keeping some lists.....

I'll let y'all know if I come up with anything really interesting....

Erick

------=_Part_8498_11155261.1171644360427--

From java-user-return-26181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 16 17:19:45 2007
Return-Path: <java-user-return-26181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51358 invoked from network); 16 Feb 2007 17:19:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2007 17:19:44 -0000
Received: (qmail 64255 invoked by uid 500); 16 Feb 2007 17:19:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64153 invoked by uid 500); 16 Feb 2007 17:19:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64142 invoked by uid 99); 16 Feb 2007 17:19:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Feb 2007 09:19:43 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.162.230 as permitted sender)
Received: from [64.233.162.230] (HELO nz-out-0506.google.com) (64.233.162.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Feb 2007 09:19:32 -0800
Received: by nz-out-0506.google.com with SMTP id i1so887159nzh
        for <java-user@lucene.apache.org>; Fri, 16 Feb 2007 09:19:11 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=HcWsgaaVEVzf6XcRAoUWfZIqPOqH5E0fuDl6ZX3PGMj8XiVcObkvQEeRc+vvzv5OoVoc7017f/FpDy3Gt2/fIP/dfzWSDnA2iC7ohfqDS5/+CTpUnpkiYlzJeNsDzLx+pvo2V6DqgF7Ps0XXTPn38MkJGp53cl6gG3ZX6Ciw604=
Received: by 10.114.161.11 with SMTP id j11mr1951418wae.1171646351324;
        Fri, 16 Feb 2007 09:19:11 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 15sm9081248wrl.2007.02.16.09.19.06;
        Fri, 16 Feb 2007 09:19:09 -0800 (PST)
Message-ID: <45D5E7E8.1050303@gmail.com>
Date: Fri, 16 Feb 2007 12:20:40 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Multiword Highlighting
References: <764035.4185.qm@web26008.mail.ukl.yahoo.com>	 <45C3BEC3.1000100@gmail.com>	 <359a92830702150930y453fb106lfa4ba412da5fdcf2@mail.gmail.com>	 <45D4F331.1070609@gmail.com>	 <359a92830702151643n4e8c59b7v20d0cb12f05fe365@mail.gmail.com>	 <45D4FF7B.2090608@gmail.com>	 <359a92830702151655x3127b52fv17d9f4ddd03c71dd@mail.gmail.com> <359a92830702160846p38189a18g9dc6b836a34232bb@mail.gmail.com>
In-Reply-To: <359a92830702160846p38189a18g9dc6b836a34232bb@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

>
>
> 1> my test cases throw some exceptions with the code as-is. The 
> spans.get(0)
> is a problem in that it's not guaranteed that the spans returned will 
> have
> anything in them. Also, I don't think that the test for 
> reqSpans.get(0).next
> in queryClauses[i].isRequired is correct (even if it doesn't throw
> exceptions). Isn't the sense there that we want to include the spans 
> if we
> *do* have entries??

You should get a Spans object back no matter what, hence the .get(0). If 
the Spans object returned has no Spans in it, then the first call to 
next will return false.
> 2> But more importantly, I think this throws things in the "span bucket"
> across documents. Consicer two documents with text "a b c d e f" is in 
> one
> document, and "x y z" is in another, and we query on "a AND z", it seems
> like extractSpansFromTermQuery would return one span from each document,
> which would satisfy the tests in getSpansFromBooleanQuery 
> inappropriately.
This might be the case. I have not considered it...I am working with 
real hit highlighting and so I only work with a single document at a time.
>
> Is it just me or is working with Spans really intended to be "one pass
> through and only forward"? There are several places in the SpansExtractor
> code where we want to ask "are there any spans in here?". But to ask 
> that,
> you have to call next(). Which changes the state of the Spans such 
> that you
> have to be really careful when you use any Spans that have had this test
> performed already and do a do..while (spans.next()); rather than a 
> while (
> spans.next()) {}..... Ditto with skipTo.
Could be. I'll do some testing.

I haven't thrown any exceptions yet, but I am working with a single doc 
in a memoryindex. So far I have yet to see a problem. I will keep looking.


- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 16 17:48:02 2007
Return-Path: <java-user-return-26182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64326 invoked from network); 16 Feb 2007 17:48:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2007 17:48:01 -0000
Received: (qmail 31800 invoked by uid 500); 16 Feb 2007 17:48:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31757 invoked by uid 500); 16 Feb 2007 17:48:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31746 invoked by uid 99); 16 Feb 2007 17:48:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Feb 2007 09:48:00 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Feb 2007 09:47:50 -0800
Received: by nf-out-0910.google.com with SMTP id d4so1622111nfe
        for <java-user@lucene.apache.org>; Fri, 16 Feb 2007 09:47:28 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=UmRMZxSKnPnF4TMPf10RVqL9vvOV05IO9MgPF26NZUi+PiA/z7Bhm8cN1rJ/j7srtEtcmJDTl82bRLPGOBqXoul89/QrevVIjVmpTsu0ax3IsnatzbP6Im85kgnYtCCz5Bh4JotAsQ2GsiEOKOr0Q8+rjPgr+hSIp+3OSodpNiA=
Received: by 10.82.111.8 with SMTP id j8mr5203414buc.1171648047944;
        Fri, 16 Feb 2007 09:47:27 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Fri, 16 Feb 2007 09:47:27 -0800 (PST)
Message-ID: <359a92830702160947o1259a781u133c6730ce97fee1@mail.gmail.com>
Date: Fri, 16 Feb 2007 12:47:27 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multiword Highlighting
In-Reply-To: <45D5E7E8.1050303@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9550_13888884.1171648047892"
References: <764035.4185.qm@web26008.mail.ukl.yahoo.com>
	 <45C3BEC3.1000100@gmail.com>
	 <359a92830702150930y453fb106lfa4ba412da5fdcf2@mail.gmail.com>
	 <45D4F331.1070609@gmail.com>
	 <359a92830702151643n4e8c59b7v20d0cb12f05fe365@mail.gmail.com>
	 <45D4FF7B.2090608@gmail.com>
	 <359a92830702151655x3127b52fv17d9f4ddd03c71dd@mail.gmail.com>
	 <359a92830702160846p38189a18g9dc6b836a34232bb@mail.gmail.com>
	 <45D5E7E8.1050303@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9550_13888884.1171648047892
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

That may be the difference then. I'm actually working with both a complete
index and a memory index, depending on what phase I'm in. It turns out that
I probably can't put the document in a memoryindex on the fly
because...well...because <G>... That said, though, I can pretty easily use
this as a base for my application, and many thanks for providing it in the
first place.... (the other Mark too).

Erick

On 2/16/07, Mark Miller <markrmiller@gmail.com> wrote:
>
> >
> >
> > 1> my test cases throw some exceptions with the code as-is. The
> > spans.get(0)
> > is a problem in that it's not guaranteed that the spans returned will
> > have
> > anything in them. Also, I don't think that the test for
> > reqSpans.get(0).next
> > in queryClauses[i].isRequired is correct (even if it doesn't throw
> > exceptions). Isn't the sense there that we want to include the spans
> > if we
> > *do* have entries??
>
> You should get a Spans object back no matter what, hence the .get(0). If
> the Spans object returned has no Spans in it, then the first call to
> next will return false.
> > 2> But more importantly, I think this throws things in the "span bucket"
> > across documents. Consicer two documents with text "a b c d e f" is in
> > one
> > document, and "x y z" is in another, and we query on "a AND z", it seems
> > like extractSpansFromTermQuery would return one span from each document,
> > which would satisfy the tests in getSpansFromBooleanQuery
> > inappropriately.
> This might be the case. I have not considered it...I am working with
> real hit highlighting and so I only work with a single document at a time.
> >
> > Is it just me or is working with Spans really intended to be "one pass
> > through and only forward"? There are several places in the
> SpansExtractor
> > code where we want to ask "are there any spans in here?". But to ask
> > that,
> > you have to call next(). Which changes the state of the Spans such
> > that you
> > have to be really careful when you use any Spans that have had this test
> > performed already and do a do..while (spans.next()); rather than a
> > while (
> > spans.next()) {}..... Ditto with skipTo.
> Could be. I'll do some testing.
>
> I haven't thrown any exceptions yet, but I am working with a single doc
> in a memoryindex. So far I have yet to see a problem. I will keep looking.
>
>
> - Mark
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_9550_13888884.1171648047892--

From java-user-return-26183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 16 18:02:08 2007
Return-Path: <java-user-return-26183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67292 invoked from network); 16 Feb 2007 18:02:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2007 18:02:07 -0000
Received: (qmail 58107 invoked by uid 500); 16 Feb 2007 18:02:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58077 invoked by uid 500); 16 Feb 2007 18:02:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58055 invoked by uid 99); 16 Feb 2007 18:01:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Feb 2007 10:01:59 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.184.234 as permitted sender)
Received: from [64.233.184.234] (HELO wr-out-0506.google.com) (64.233.184.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Feb 2007 10:01:48 -0800
Received: by wr-out-0506.google.com with SMTP id i22so1134081wra
        for <java-user@lucene.apache.org>; Fri, 16 Feb 2007 10:01:26 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=t2doczJVdf8Q5vCjc5VwJlRrXcCNt/lGRGTGIbBK52x10Tl79qPdJd7X58GgJPyL0KEMZtghVwrWzSfdy+A9n4DXLOam0rxBSpzcxnD/4XI3vRPsLl+UUxjRNOpnaIul2LOmkw32Gut+r0aYgqARARIpJaYf94Z5OlSUjeT9NE4=
Received: by 10.90.99.20 with SMTP id w20mr4494355agb.1171648885729;
        Fri, 16 Feb 2007 10:01:25 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 33sm6409493wra.2007.02.16.10.01.24;
        Fri, 16 Feb 2007 10:01:25 -0800 (PST)
Message-ID: <45D5F1CE.3070901@gmail.com>
Date: Fri, 16 Feb 2007 13:02:54 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Multiword Highlighting
References: <764035.4185.qm@web26008.mail.ukl.yahoo.com>	 <45C3BEC3.1000100@gmail.com>	 <359a92830702150930y453fb106lfa4ba412da5fdcf2@mail.gmail.com>	 <45D4F331.1070609@gmail.com>	 <359a92830702151643n4e8c59b7v20d0cb12f05fe365@mail.gmail.com>	 <45D4FF7B.2090608@gmail.com>	 <359a92830702151655x3127b52fv17d9f4ddd03c71dd@mail.gmail.com> <359a92830702160846p38189a18g9dc6b836a34232bb@mail.gmail.com>
In-Reply-To: <359a92830702160846p38189a18g9dc6b836a34232bb@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

The following addresses the reuse of the Spans object and fixes a bug in 
checking for required clauses (boolean test was reversed). Again, the 
only testing I have done involves one doc for "real" hit highlighting so 
your mileage may vary. Attempt number two:


import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.Term;
import org.apache.lucene.search.BooleanClause;
import org.apache.lucene.search.BooleanQuery;
import org.apache.lucene.search.PhraseQuery;
import org.apache.lucene.search.Query;
import org.apache.lucene.search.TermQuery;
import org.apache.lucene.search.spans.SpanNearQuery;
import org.apache.lucene.search.spans.SpanQuery;
import org.apache.lucene.search.spans.SpanTermQuery;
import org.apache.lucene.search.spans.Spans;

import java.io.IOException;

import java.util.ArrayList;
import java.util.Collections;
import java.util.List;


public class QuerySpansExtractor {
    public Spans[] extractSpans(Query query, IndexReader reader)
        throws IOException {
        List spans = getSpans(query, reader);

        return (Spans[]) spans.toArray(new Spans[spans.size()]);
    }

    private List getSpans(Query query, IndexReader reader)
        throws IOException {
        Spans spans = null;

        if (query instanceof BooleanQuery) {
            return getSpansFromBooleanQuery((BooleanQuery) query, reader);
        } else if (query instanceof PhraseQuery) {
            spans = getSpansFromPhraseQuery((PhraseQuery) query, reader);
        } else if (query instanceof TermQuery) {
            spans = getSpansFromTermQuery((TermQuery) query, reader);
        } else if (query instanceof SpanQuery) {
            spans = getSpansFromSpanQuery((SpanQuery) query, reader);
        }

        List spanList = new ArrayList(1);
        spanList.add(spans);

        return spanList;
    }

    private List getSpansFromBooleanQuery(BooleanQuery query, 
IndexReader reader)
        throws IOException {
        BooleanClause[] queryClauses = query.getClauses();
        int i;
        boolean useQuery = true;
        List possibleSpans = new ArrayList();

        for (i = 0; i < queryClauses.length; i++) {
            if (queryClauses[i].isProhibited()) {
                List prohibSpans = getSpans(queryClauses[i].getQuery(), 
reader);

                if (((Spans) prohibSpans.get(0)).next()) {
                    useQuery = false;
                    break;
                } else {
                    prohibSpans = getSpans(queryClauses[i].getQuery(), 
reader);
                    possibleSpans.addAll(prohibSpans);
                }
            } else if (queryClauses[i].isRequired()) {
          
                List reqSpans = getSpans(queryClauses[i].getQuery(), 
reader);

                if (!((Spans) reqSpans.get(0)).next()) {
                    useQuery = false;
                    break;
                } else {
                    reqSpans = getSpans(queryClauses[i].getQuery(), reader);
                    possibleSpans.addAll(reqSpans);
                }
            } else {
                
possibleSpans.addAll(getSpans(queryClauses[i].getQuery(), reader));
            }
        }

        if (!useQuery) {
            possibleSpans = Collections.EMPTY_LIST;
        }

        return possibleSpans;
    }

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 16 18:52:43 2007
Return-Path: <java-user-return-26184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76235 invoked from network); 16 Feb 2007 18:52:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2007 18:52:42 -0000
Received: (qmail 16472 invoked by uid 500); 16 Feb 2007 18:52:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16445 invoked by uid 500); 16 Feb 2007 18:52:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16434 invoked by uid 99); 16 Feb 2007 18:52:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Feb 2007 10:52:41 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Jamal.Karimi@cursor.de designates 213.240.191.82 as permitted sender)
Received: from [213.240.191.82] (HELO mail.cursor.de) (213.240.191.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Feb 2007 10:52:31 -0800
Received: from localhost (localhost [127.0.0.1])
	by mail.cursor.de (Postfix) with ESMTP id ABEC9434394
	for <java-user@lucene.apache.org>; Fri, 16 Feb 2007 19:56:23 +0100 (CET)
Received: from mail.cursor.de ([127.0.0.1])
	by localhost (mail.cursor.de [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 06469-06 for <java-user@lucene.apache.org>;
	Fri, 16 Feb 2007 19:56:21 +0100 (CET)
Received: from elektra.cursor.de (elektra.cursor.de [10.0.0.11])
	by mail.cursor.de (Postfix) with ESMTP id 9D68E434047
	for <java-user@lucene.apache.org>; Fri, 16 Feb 2007 19:56:21 +0100 (CET)
Content-class: urn:content-classes:message
Subject: QueryParser explicit and implicit search operator
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C751FB.8FCBDBEE"
Date: Fri, 16 Feb 2007 19:53:13 +0100
Message-ID: <DD85A66A3EC15A48A90B24F725A2FDCF70B52E@elektra.cursor.de>
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
X-MS-Has-Attach: yes
X-MS-TNEF-Correlator: 
Thread-Topic: QueryParser explicit and implicit search operator
thread-index: AcdRIpiCmM0OcvdXRSyT+iat9A26ygA2Ku5Q
From: "Karimi-Tabatabaie Jamal" <Jamal.Karimi@cursor.de>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C751FB.8FCBDBEE
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

> hello,
>=20
> I have a problem with the QueryParser and the default search operator
> AND.=20
>=20
> So let me please explain my problem in hope that you can help me.=20
>=20
> I have integrated the search engine in our CRM product. To make it
> easier for the user we decided to set the default search operator to
> 'AND'. Now we discovered that search strings that contain OR do not
> parsed as expected:
>=20
> When we search after 'Hare AND Tortoise' the QueryParser parses it
> correct to 'Hare AND Tortoise'.
> But when we search after 'Hare OR Tortoise' the QueryParser parses it
> again to 'Hare AND Tortoise'!
> In both cases all hits contain both search trems.
>=20
> So I played a little around but I have no idea how to solved this.
>=20
For my problem there seems to exist a lucence Bug
(http://issues.apache.org/jira/browse/LUCENE-167) but also it seems that
it's solved in the Lucene integration on site http://www.lucenebook.com.

> I put the relevant source code to the attachment if you like to review
> the short methods search() and buildQuery(QueryParser parser). I use
> lucene 2.0.=20
>=20
>   <<MultiSearch.java>>=20
> If you would please give me any hints or tips, I'll be grateful for
> your information.
>=20
>=20
> Yours sincerely,
>=20
> Jamal


------_=_NextPart_001_01C751FB.8FCBDBEE
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C751FB.8FCBDBEE--

From java-user-return-26185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 16 22:13:29 2007
Return-Path: <java-user-return-26185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29955 invoked from network); 16 Feb 2007 22:13:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2007 22:13:28 -0000
Received: (qmail 3169 invoked by uid 500); 16 Feb 2007 22:13:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3072 invoked by uid 500); 16 Feb 2007 22:13:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2916 invoked by uid 99); 16 Feb 2007 22:13:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Feb 2007 14:13:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [209.68.5.9] (HELO relay00.pair.com) (209.68.5.9)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 16 Feb 2007 14:13:13 -0800
Received: (qmail 83752 invoked from network); 16 Feb 2007 22:12:52 -0000
Received: from 68.236.126.81 (HELO ?192.168.1.30?) (68.236.126.81)
  by relay00.pair.com with SMTP; 16 Feb 2007 22:12:52 -0000
X-pair-Authenticated: 68.236.126.81
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Transfer-Encoding: 7bit
Message-Id: <74E8EF5D-66C7-45EE-81A6-DC513FE67AB6@variogr.am>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Brian Whitman <brian.whitman@variogr.am>
Subject: copying fields between documents in different indexes
Date: Fri, 16 Feb 2007 17:12:51 -0500
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Using the lucene API, is there a way to copy the contents and  
parameters of fields between documents in different indexes? Without  
requiring the field to be stored or needing to pass around the  
fulltext contents of the field.

I guess I am looking for

doc.add(new Field("contentsNew", copyFrom(originalDoc, "contents")));

where doc and originalDoc are from different indexes.





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 17 01:22:01 2007
Return-Path: <java-user-return-26186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68007 invoked from network); 17 Feb 2007 01:22:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Feb 2007 01:22:00 -0000
Received: (qmail 22094 invoked by uid 500); 17 Feb 2007 01:22:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22052 invoked by uid 500); 17 Feb 2007 01:22:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22041 invoked by uid 99); 17 Feb 2007 01:22:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Feb 2007 17:22:00 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [68.116.38.223] (HELO rectangular.com) (68.116.38.223)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Feb 2007 17:21:49 -0800
Received: from [67.189.26.9] (helo=[10.0.1.3])
	by rectangular.com with esmtpa (Exim 4.44)
	id 1HIElA-000CJc-Oa
	for java-user@lucene.apache.org; Fri, 16 Feb 2007 17:53:08 -0800
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <c68e39170702151320g546790b4qb16199eb1bf8c6c@mail.gmail.com>
References: <20070126195010.90762.qmail@web50305.mail.yahoo.com> <20070215150143.GA16525@fermat.math.technion.ac.il> <c68e39170702151320g546790b4qb16199eb1bf8c6c@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <4D497953-E489-4716-90BD-59A1B9AA6A93@rectangular.com>
Content-Transfer-Encoding: 7bit
From: Marvin Humphrey <marvin@rectangular.com>
Subject: Re: NO_NORMS and TOKENIZED?
Date: Fri, 16 Feb 2007 17:21:26 -0800
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Feb 15, 2007, at 1:20 PM, Yonik Seeley wrote:

> I originally added it without an Index param at all.
> I can't say I'm a fan of the way Field currently does things, and I
> didn't want everyone to pay the price for yet more options.

Solved... with fixed field definitions.

http://www.rectangular.com/kinosearch/docs/devel/KinoSearch/Schema.html
http://www.rectangular.com/kinosearch/docs/devel/KinoSearch/Schema/ 
FieldSpec.html
http://www.rectangular.com/kinosearch/docs/devel/KinoSearch/ 
InvIndex.html

> I'm probably in the minority, hence I never said
> anything about it before.

Heh.  Your compadre Hoss is one of the most ardent opponents of fixed  
field defs.  :)

I've been planning to ask him at some point how he might deal with  
multidimensional data if he were forced to use KinoSearch's Schema/ 
FieldSpec system.  What say you, Hoss, can you think of something?

For KS, a solution to that problem would be nice to have, but not  
essential.  KS has never allowed dynamic field defs, so there's no  
constituency wedded to them.  And fixed field defs solve so many more  
problems than they cause.

Imagine a world with no search-time/index-time analyzer mismatches...

> How would I have handled it?
>  With a single Field class, I would probably have used old-fashion
> c-style flags (a bit field).  Nice an extensible (you can add new
> flags without adding/changing any APIs, no performance impact to
> adding new options, you can pass around all these flags as a unit,
> check multiple flags with a single instruction, etc.

I don't think you can convey enough information using only flags.

Looking ahead, it's easy to specify a "flexible indexing" posting  
format by adding that property to a FieldSpec via a method or an  
inner class, but hard to see how you'd put that amount of info in a  
bit -- let alone resolve conflicts.

People want to attach greater and greater semantic meaning to field  
names.  The present system doesn't scale well, as you've pointed out;  
there will be ever-increasing tension until it is modified.

> I guess my short answer is that I don't have an
> opinion on adding another type-safe constant TOKENIZED_NO_NORMS
> because I don't like the whole scheme.

KS 0.20 doesn't even have Document or Field classes.  :)  They've  
been eliminated, and native Perl hashes are now used to transport  
document data.

Marvin Humphrey
Rectangular Research
http://www.rectangular.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 17 01:30:47 2007
Return-Path: <java-user-return-26187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69637 invoked from network); 17 Feb 2007 01:30:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Feb 2007 01:30:47 -0000
Received: (qmail 31521 invoked by uid 500); 17 Feb 2007 01:30:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31492 invoked by uid 500); 17 Feb 2007 01:30:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31481 invoked by uid 99); 17 Feb 2007 01:30:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Feb 2007 17:30:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mike.klaas@gmail.com designates 64.233.162.236 as permitted sender)
Received: from [64.233.162.236] (HELO nz-out-0506.google.com) (64.233.162.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Feb 2007 17:30:38 -0800
Received: by nz-out-0506.google.com with SMTP id i1so984921nzh
        for <java-user@lucene.apache.org>; Fri, 16 Feb 2007 17:30:18 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=TZkhH10OBbY9tddGeSBVoex1SiPeuNEOasRb3DoE3yYhijvkiABR+CIgKRLhocl31UjtLWlvCmZ8BC8WFQXgaat+Ktx91+UQ/cJVtshBxWJ5EK2Yz2r8J1vWLx8XwOeQVuqecdU4T7zGppL3TtX1P2MfdUUyS+sLw/oOja1H9/Q=
Received: by 10.114.131.2 with SMTP id e2mr2240598wad.1171675817767;
        Fri, 16 Feb 2007 17:30:17 -0800 (PST)
Received: by 10.114.198.18 with HTTP; Fri, 16 Feb 2007 17:30:17 -0800 (PST)
Message-ID: <3d2ce8cb0702161730n4c7e73d8x755f33abd0afcae8@mail.gmail.com>
Date: Fri, 16 Feb 2007 17:30:17 -0800
From: "Mike Klaas" <mike.klaas@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: NO_NORMS and TOKENIZED?
In-Reply-To: <4D497953-E489-4716-90BD-59A1B9AA6A93@rectangular.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20070126195010.90762.qmail@web50305.mail.yahoo.com>
	 <20070215150143.GA16525@fermat.math.technion.ac.il>
	 <c68e39170702151320g546790b4qb16199eb1bf8c6c@mail.gmail.com>
	 <4D497953-E489-4716-90BD-59A1B9AA6A93@rectangular.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On 2/16/07, Marvin Humphrey <marvin@rectangular.com> wrote:

> Solved... with fixed field definitions.

<>

> Imagine a world with no search-time/index-time analyzer mismatches...

I'm sure Yonik can imagine such a world... that's what Solr provide
<g>.  Configure an analyzer for a field (or even separate index-time
and query-time analyzers) once, and never worry about it again.

Note that you don't need a fixed _number_ of fields to achieve these
benefits, just a fixed definition per unique field name.

-Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 17 05:28:04 2007
Return-Path: <java-user-return-26188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14417 invoked from network); 17 Feb 2007 05:28:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Feb 2007 05:28:02 -0000
Received: (qmail 95257 invoked by uid 500); 17 Feb 2007 05:28:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95221 invoked by uid 500); 17 Feb 2007 05:28:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95209 invoked by uid 99); 17 Feb 2007 05:28:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Feb 2007 21:28:03 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Feb 2007 21:27:52 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 23A8930EFC17; Fri, 16 Feb 2007 22:27:32 -0700 (MST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 5EFF230EFC16
	for <java-user@lucene.apache.org>; Fri, 16 Feb 2007 22:27:29 -0700 (MST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <DD85A66A3EC15A48A90B24F725A2FDCF70B52E@elektra.cursor.de>
References: <DD85A66A3EC15A48A90B24F725A2FDCF70B52E@elektra.cursor.de>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <1FC5B216-4DEA-4A91-9527-F9A1A85A1D08@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: QueryParser explicit and implicit search operator
Date: Sat, 17 Feb 2007 00:27:25 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.1.1


On Feb 16, 2007, at 1:53 PM, Karimi-Tabatabaie Jamal wrote:
> For my problem there seems to exist a lucence Bug
> (http://issues.apache.org/jira/browse/LUCENE-167) but also it seems  
> that
> it's solved in the Lucene integration on site http:// 
> www.lucenebook.com.

Where do you see the problem solved at lucenebook.com?   The "Query  
parsed to:" for this query <http://www.lucenebook.com/search? 
query=aaaaa+AND+bbbbb+OR+ccccc+AND+ddddd> is

	Query parsed to: +aaaaa bbbbb +ccccc +ddddd

The OR caused the "bbbbb" term to not be required, yet all other  
terms are required.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 18 03:11:02 2007
Return-Path: <java-user-return-26189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96136 invoked from network); 18 Feb 2007 03:11:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2007 03:11:01 -0000
Received: (qmail 29555 invoked by uid 500); 18 Feb 2007 03:11:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29529 invoked by uid 500); 18 Feb 2007 03:11:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29518 invoked by uid 99); 18 Feb 2007 03:11:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 17 Feb 2007 19:11:02 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 17 Feb 2007 19:10:52 -0800
Received: by nf-out-0910.google.com with SMTP id i2so1814279nfe
        for <java-user@lucene.apache.org>; Sat, 17 Feb 2007 19:10:30 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=Z7unB6ZSX/tsi8pFHDiwYKPuSOmRlt7MIg4Iz6r1tn4WaNO5L8SGBpVKWfNZVxiQTb28Xpku9R37D0FtBDrJ8STx859pv8+2svlb75CnrBm1OpAN1KSlyIJ3S2GMf0TRkkuE8cQhhqoJF8amwkHQ58uAmCcGG2u25fEnbnOcMwk=
Received: by 10.82.172.15 with SMTP id u15mr7893851bue.1171768230654;
        Sat, 17 Feb 2007 19:10:30 -0800 (PST)
Received: by 10.82.106.19 with HTTP; Sat, 17 Feb 2007 19:10:30 -0800 (PST)
Message-ID: <c68e39170702171910m689d7261s22b42408cd3e1b17@mail.gmail.com>
Date: Sat, 17 Feb 2007 22:10:30 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: copying fields between documents in different indexes
In-Reply-To: <74E8EF5D-66C7-45EE-81A6-DC513FE67AB6@variogr.am>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <74E8EF5D-66C7-45EE-81A6-DC513FE67AB6@variogr.am>
X-Google-Sender-Auth: ea45e2a4245b008e
X-Virus-Checked: Checked by ClamAV on apache.org

On 2/16/07, Brian Whitman <brian.whitman@variogr.am> wrote:
> Using the lucene API, is there a way to copy the contents and
> parameters of fields between documents in different indexes? Without
> requiring the field to be stored or needing to pass around the
> fulltext contents of the field.
>
> I guess I am looking for
>
> doc.add(new Field("contentsNew", copyFrom(originalDoc, "contents")));
>
> where doc and originalDoc are from different indexes.

Not really... it's the nature of an inverted index.
Going from term to list-of-documents is easy, but going from document
to all-term-info isn't.
The closest you would be able to get is storing term vectors for all
the indexed fields, then using those term vectors to re-index in the
second index.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 18 03:39:30 2007
Return-Path: <java-user-return-26190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98340 invoked from network); 18 Feb 2007 03:39:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2007 03:39:30 -0000
Received: (qmail 46153 invoked by uid 500); 18 Feb 2007 03:39:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46112 invoked by uid 500); 18 Feb 2007 03:39:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46101 invoked by uid 99); 18 Feb 2007 03:39:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 17 Feb 2007 19:39:32 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [63.240.77.84] (HELO sccrmhc14.comcast.net) (63.240.77.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 17 Feb 2007 19:39:21 -0800
Received: from xpsoleary (c-24-19-171-50.hsd1.wa.comcast.net[24.19.171.50])
          by comcast.net (sccrmhc14) with SMTP
          id <2007021803390001400s39r2e>; Sun, 18 Feb 2007 03:39:00 +0000
Reply-To: <tm-oleary@comcast.net>
From: "Mike O'Leary" <tm-oleary@comcast.net>
To: "Lucene Java User List" <java-user@lucene.apache.org>
Subject: Question about basic indexing performance improvements
Date: Sat, 17 Feb 2007 19:38:34 -0800
Message-ID: <005201c7530e$45a6df00$0302a8c0@xpsoleary>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0053_01C752CB.37839F00"
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
Thread-Index: AcdTDkRK93cwldC9QJO021ZirQbx8Q==
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0053_01C752CB.37839F00
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

I am taking a class in which the professor has assigned a project to take a
question answering application that was submitted by a team of students to
one of the TREC contests last year and turn it into a teaching tool. One
thing he wants to have done is add the capability for students to create a
variety of indexes with different settings in order to observe the ways in
which selecting a different index can cause the results to vary. The
application searches over a specified set of just over a million
XML-formatted documents that doesn't change, so there are no requirements at
this point for adding and deleting documents. Because the team that created
the application last year only needed to index it once (after they figured
out what parameters they wanted), they didn't need to care very much that it
took around 30 hours to index the documents one by one using a single
threaded indexing program.

 

Now we want to be able to index that same set of documents in much less
time. I am new to Lucene, so I am just going by what I have found so far in
the Lucene in Action book and on the internet. The section in the book on
indexing concurrency says that you can share an IndexWriter object among
several threads and that the calls from these threads will be properly
synchronized. Will this in itself improve indexing performance very much? It
seems like the synchronization that is needed for keeping the index from
being corrupted would limit how much you gain from using several threads. In
any case, my overall question is, given an indexing task of this kind, where
you don't have to worry about additions, deletions and updates of the
documents being indexed, just indexing the whole document database as a
batch each time a user wants to index it in a different way, what would be
the fastest way to do it using the various Lucene indexing tools and
features? Thanks.

Mike O'Leary


------=_NextPart_000_0053_01C752CB.37839F00--


From java-user-return-26191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 18 10:35:43 2007
Return-Path: <java-user-return-26191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70694 invoked from network); 18 Feb 2007 10:35:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2007 10:35:41 -0000
Received: (qmail 22723 invoked by uid 500); 18 Feb 2007 10:35:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22689 invoked by uid 500); 18 Feb 2007 10:35:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22672 invoked by uid 99); 18 Feb 2007 10:35:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Feb 2007 02:35:42 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [82.216.111.40] (HELO smtp4.tech.numericable.fr) (82.216.111.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Feb 2007 02:35:30 -0800
Received: from [192.168.1.101] (ip-3.net-82-216-252.rev.numericable.fr [82.216.252.3])
	by smtp4.tech.numericable.fr (Postfix) with ESMTP id E8E6F12A828
	for <java-user@lucene.apache.org>; Sun, 18 Feb 2007 11:35:07 +0100 (CET)
From: Nicolas =?iso-8859-1?q?Lalev=E9e?= <nicolas.lalevee@anyware-tech.com>
To: java-user@lucene.apache.org
Subject: Re: Question about basic indexing performance improvements
Date: Sun, 18 Feb 2007 11:35:19 +0100
User-Agent: KMail/1.9.5
References: <005201c7530e$45a6df00$0302a8c0@xpsoleary>
In-Reply-To: <005201c7530e$45a6df00$0302a8c0@xpsoleary>
Organization: Anyware Technologies
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200702181135.19429.nicolas.lalevee@anyware-tech.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Le dimanche 18 f=E9vrier 2007 04:38, Mike O'Leary a =E9crit=A0:
> I am taking a class in which the professor has assigned a project to take=
 a
> question answering application that was submitted by a team of students to
> one of the TREC contests last year and turn it into a teaching tool. One
> thing he wants to have done is add the capability for students to create a
> variety of indexes with different settings in order to observe the ways in
> which selecting a different index can cause the results to vary. The
> application searches over a specified set of just over a million
> XML-formatted documents that doesn't change, so there are no requirements
> at this point for adding and deleting documents. Because the team that
> created the application last year only needed to index it once (after they
> figured out what parameters they wanted), they didn't need to care very
> much that it took around 30 hours to index the documents one by one using=
 a
> single threaded indexing program.
>
>
>
> Now we want to be able to index that same set of documents in much less
> time. I am new to Lucene, so I am just going by what I have found so far =
in
> the Lucene in Action book and on the internet. The section in the book on
> indexing concurrency says that you can share an IndexWriter object among
> several threads and that the calls from these threads will be properly
> synchronized. Will this in itself improve indexing performance very much?
> It seems like the synchronization that is needed for keeping the index fr=
om
> being corrupted would limit how much you gain from using several threads.
> In any case, my overall question is, given an indexing task of this kind,
> where you don't have to worry about additions, deletions and updates of t=
he
> documents being indexed, just indexing the whole document database as a
> batch each time a user wants to index it in a different way, what would be
> the fastest way to do it using the various Lucene indexing tools and
> features? Thanks.

In Lucene, only one writer is allowed per index. So if you want more writer=
s,=20
just use sevral different indexes, which will contain the different parts o=
f=20
your data. When everything is indexed, you can then merge every indexes in=
=20
one using the function IndexWriter#addIndexes(Directory[] dirs).

cheers,
Nicolas



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 18 15:23:05 2007
Return-Path: <java-user-return-26192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19234 invoked from network); 18 Feb 2007 15:23:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2007 15:23:05 -0000
Received: (qmail 8786 invoked by uid 500); 18 Feb 2007 15:23:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8748 invoked by uid 500); 18 Feb 2007 15:23:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8735 invoked by uid 99); 18 Feb 2007 15:23:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Feb 2007 07:23:05 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Feb 2007 07:22:54 -0800
Received: by nf-out-0910.google.com with SMTP id i2so1938396nfe
        for <java-user@lucene.apache.org>; Sun, 18 Feb 2007 07:22:33 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=uXgmrTVxgRmaegPvpHuT80sRgpmWVNjmY1Sg/RYdxqRF+hpvV9/Ng1wvtbUBi3BydXKnFIl4U8XuyZwFrahO/XGgMrdmnT2hS03gP1Tvt8cxELNmCYQ+HHkGMzOwtKiKAJKilX7NUXxpQDjr8ogVn8gmqP/qdcjftcR2pxfFI1k=
Received: by 10.82.172.15 with SMTP id u15mr8704993bue.1171812153158;
        Sun, 18 Feb 2007 07:22:33 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Sun, 18 Feb 2007 07:22:33 -0800 (PST)
Message-ID: <359a92830702180722u5fc5b41aibb2ab0ab30c27379@mail.gmail.com>
Date: Sun, 18 Feb 2007 10:22:33 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, tm-oleary@comcast.net
Subject: Re: Question about basic indexing performance improvements
In-Reply-To: <005201c7530e$45a6df00$0302a8c0@xpsoleary>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_25985_21453459.1171812153039"
References: <005201c7530e$45a6df00$0302a8c0@xpsoleary>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_25985_21453459.1171812153039
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Mike:

It's Sunday morning and I felt like typing for a while, but the long rant
can be summarized as follows...

1> be sure you know where you're spending your time before you implement a
complex solution to the problem. I've been surprised many times that the
actual problem was nowhere near where I thought it was. Added complexity for
speed sometimes (maybe even often) creates more problems than it solves. You
can do this with some simple timings and/or a profiler. Simple timings
should take no more than a couple of hours to generate and will allow you to
proceed with confidence.

2> Keep whatever solution you implement as simple as possible.  At every
step in a complex solution, you'll introduce costs. Maintenance costs, time
costs, dissatisfied customer costs. Especially be sure that you don't get
caught up in making your solution as good as it can be. The most wonderful,
elegant solutions imaginable usually get thrown out pretty soon anyway,
since the problem changes. Good enough to last until they are thrown out is
the most efficient in terms of time spent.... Of course, your professor is
only spending your time <G>....

3> Define the goal. Really ask yourself what is "good enough" and shoot for
that. In this case, the first question I'd ask is "why are 1,000,000
documents necessary?" If you can convince your professor that 100,000
documents is enough for demonstration purposes, your problem is already
solved and you can generate your indexes in 3 hours.

If you're interested in the background, see below...

Best
Erick


**********long rant starts here************

But before jumping to the multi-threaded solution, I'd *strongly* advise
that you put verify what's taking all the time. I can't tell you how many
times over the last 25 years I've been wrong about where the inefficiencies
were. I once (in C++) cut the execution time by 75% by something like the
following....

while (condition) {
    string str = anotherstring + fragment;
    anotherstring = str;
}

to

String anotherstring = new String(10000);
while (condition) {
     anotherstring += str;
}


or something like that (look, it's been 10 years, OK<G>). The point is that
I never would have found that line of code without a profiler, and all the
other optimizations I could have made wouldn't have improved performance by
even 1/3 that amount. At best, I would have changed the code unintentionally
and removed the aforementioned ugly code by accident. Yes, it's stupid code.
And yes, I wrote the original code in a moment of inattention. You will do
things equally stupid, trust me <G>..... But are you sure such silliness
isn't happening to your program? If you're sure, how? Look at some code you
wrote 6 months ago and tell me it's all good <G>.....

So, unless you are absolutely sure where the time is being spent, do a few
experiments. You can do the first pass in, maybe, 2 hours... You can start
with just a few timers in your code. For instance, total the time you spend
reading the files. The time spent parsing the XML. The time you spend
actually adding the files to the index. Just use simple timers like
System.currentTimeMilliseconds().

For instance, let's say your code is organized as follows, and you change
the for loop to just index 100 documents, and the run takes 100 seconds.

for each file
   read the file from disk
   parse the xml
   add the fields to a Lucene document
   index the document

Start with something crude and just time each major step. If your intuition
is correct and all the time is being spent in the index step, you're done.
If it's in the last two steps, you're also done and need to jump to think
about multiple thread perhaps. But what if it's in the xml parsing step? You
might be waaay better off using a more efficient parser (and differing
implementations vary WIDELY on how fast they are).

The seductive thing about, say, introducing multi-threading to a solution is
that it'll work. By definition. Throwing 10 threads at this problem will
index things in 3 hours and you can say "See, I solved the problem". It's
possible that no, you did not. What you really did was make the problem
waaaaay more complex (and create endless hassles for yourself in the future)
without really solving the root issue.

Look, it's Sunday morning and I'm avoiding some tasks I need to do, so
pardon the long post. But I'm on a roll <G>. If you've followed this list,
you'll see that this is a recurring theme of mine. The reason is that I've
seen way too many situations where the total cost of a complex solution is
never thought of by the programmers. Let's say you create a 10 thread
solution. Let's further assert that you run each thread on a different
machine. You've now added lots of extra steps to generating your index. And
I'll absolutely guarantee that you (or someone) will spend time debugging
the process of merging all the indexes. Not to mention the times one process
doesn't complete before you try to merge the indexes. Or the time you forgot
to start the third machine, combined the resulting indexes and had anomalous
results that you had to spend 2 days figuring out. Or the time..... And it's
a most uncomfortable thing to have to say "I don't know what was wrong, but
recreating the index fixed it"....

And, finally (thank God, he says), be clear on what's "good enough"
performance. You say it takes 30 hours to create the index. Is 12 hours
acceptable? If you could get a single-threaded operation down to 12 hours,
the simplicity may be enough to make up for the fact that you can't generate
an index before tomorrow. You can always generate test indexes of just a few
documents for debugging purposes. There's always a tendency to say "but if I
could get it down to 4 hours, I could generate an index twice a day". But
this is probably irrelevant. To debug programs and test results, you must be
able to generate an index in 10 minutes at the outside.  Anything longer is
unacceptable since you'll spend all your time waiting. 15 seconds is even
better. That implies that you need a way to limit the number of documents
you index for development purposes and then, when you're satisfied, kick off
the rebuild of the entire index.

My point is that in my experience, it's unlikely that you'll be building
more than one complete index a day anyway. And kicking the build of the
evening before and using it the next morning may be good enough. And a lot
less prone to error if you can keep the index generation simple.

Anyway, it's off to do some work around the house. Oh, wait. I can read the
Sunday paper first.....

Best
Erick


On 2/17/07, Mike O'Leary <tm-oleary@comcast.net> wrote:
>
> I am taking a class in which the professor has assigned a project to take
> a
> question answering application that was submitted by a team of students to
> one of the TREC contests last year and turn it into a teaching tool. One
> thing he wants to have done is add the capability for students to create a
> variety of indexes with different settings in order to observe the ways in
> which selecting a different index can cause the results to vary. The
> application searches over a specified set of just over a million
> XML-formatted documents that doesn't change, so there are no requirements
> at
> this point for adding and deleting documents. Because the team that
> created
> the application last year only needed to index it once (after they figured
> out what parameters they wanted), they didn't need to care very much that
> it
> took around 30 hours to index the documents one by one using a single
> threaded indexing program.
>
>
>
> Now we want to be able to index that same set of documents in much less
> time. I am new to Lucene, so I am just going by what I have found so far
> in
> the Lucene in Action book and on the internet. The section in the book on
> indexing concurrency says that you can share an IndexWriter object among
> several threads and that the calls from these threads will be properly
> synchronized. Will this in itself improve indexing performance very much?
> It
> seems like the synchronization that is needed for keeping the index from
> being corrupted would limit how much you gain from using several threads.
> In
> any case, my overall question is, given an indexing task of this kind,
> where
> you don't have to worry about additions, deletions and updates of the
> documents being indexed, just indexing the whole document database as a
> batch each time a user wants to index it in a different way, what would be
> the fastest way to do it using the various Lucene indexing tools and
> features? Thanks.
>
> Mike O'Leary
>
>

------=_Part_25985_21453459.1171812153039--

From java-user-return-26193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 18 16:21:27 2007
Return-Path: <java-user-return-26193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27637 invoked from network); 18 Feb 2007 16:21:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2007 16:21:25 -0000
Received: (qmail 34672 invoked by uid 500); 18 Feb 2007 16:21:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34623 invoked by uid 500); 18 Feb 2007 16:21:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34612 invoked by uid 99); 18 Feb 2007 16:21:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Feb 2007 08:21:28 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Feb 2007 08:21:18 -0800
Received: by nf-out-0910.google.com with SMTP id i2so1948948nfe
        for <java-user@lucene.apache.org>; Sun, 18 Feb 2007 08:20:56 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition:x-google-sender-auth;
        b=O//CfS69s6bQqAHqrYMw/uDqngVxw6ipwBXIzm0wdJuHkL3gdlshP8dxm5SW+2kaPVn3dr9EF0WNvWl7sU/cHO7v/C09OkmxXCaQ3tfyCNI1snAWNUI2dIyNYu2G3o98tX2XVjr1k+QY4Ed4PV/u3w95caxCB4/0CCpKyTQNBl4=
Received: by 10.82.188.15 with SMTP id l15mr8808338buf.1171815656570;
        Sun, 18 Feb 2007 08:20:56 -0800 (PST)
Received: by 10.82.106.19 with HTTP; Sun, 18 Feb 2007 08:20:56 -0800 (PST)
Message-ID: <c68e39170702180820j2c85416ev20f58749aac41f1c@mail.gmail.com>
Date: Sun, 18 Feb 2007 11:20:56 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Lucene 2.1.0 release available
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Google-Sender-Auth: a82f4db3532d826e
X-Virus-Checked: Checked by ClamAV on apache.org

Release 2.1.0 of Lucene is now available!

Many new features, optimizations, and bug fixes have been added since 2.0,
including lazy field loading, simple deletes via IndexWriter, and lockless
readers/commits.

The detailed change log is at:
http://svn.apache.org/repos/asf/lucene/java/tags/lucene_2_1_0/CHANGES.txt

Lucene 2.1 includes index format changes that are not readable
by older versions of Lucene.  Lucene 2.1 can both read and update
older Lucene indexes.  Adding to an index with an older format
will cause it to be converted to the newer format.

Binary and source distributions are available at
http://www.apache.org/dyn/closer.cgi/lucene/java/

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 18 17:37:15 2007
Return-Path: <java-user-return-26194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40449 invoked from network); 18 Feb 2007 17:37:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2007 17:37:15 -0000
Received: (qmail 87145 invoked by uid 500); 18 Feb 2007 17:37:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87112 invoked by uid 500); 18 Feb 2007 17:37:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87101 invoked by uid 99); 18 Feb 2007 17:37:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Feb 2007 09:37:16 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [167.206.4.199] (HELO mta4.srv.hcvlny.cv.net) (167.206.4.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Feb 2007 09:37:05 -0800
Received: from [192.168.2.2] (ool-457bbd12.dyn.optonline.net [69.123.189.18])
 by mta4.srv.hcvlny.cv.net
 (Sun Java System Messaging Server 6.2-6.01 (built Apr  3 2006))
 with ESMTP id <0JDO00KBE698JOW0@mta4.srv.hcvlny.cv.net> for
 java-user@lucene.apache.org; Sun, 18 Feb 2007 12:36:45 -0500 (EST)
Date: Sun, 18 Feb 2007 12:36:42 -0500
From: Beth Friedmann <friedmann@optonline.net>
Subject: the never ending class path problem
To: java-user@lucene.apache.org
Message-id: <45D88EAA.9060000@optonline.net>
MIME-version: 1.0
Content-type: text/plain; charset=ISO-8859-1; format=flowed
Content-transfer-encoding: 7BIT
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
X-Virus-Checked: Checked by ClamAV on apache.org

I am hoping someone can tell me what I am doing wrong. I downloaded the 
demo for lucene, 2.1.0.  I have put the core and demos jars in my class 
path and have confirmed they exist with a set command.

My directory structure is:

c:\documents and users\owner\workspace\lucene 
demo\src\demo\org\apache\lucene\demo

The java files including IndexFiles and IndexHTML reside there.

I am a windows user and clearly a very very new newbie, so help is 
appreciated.

I choose start, run, cmd.
When I set the class path I typed:

set classpath=c:\documents and users\owner\workspace\lucene 
demo\lucene-core-2.1.0.jar;c:\documents and users\owner\workspace\lucene 
demo\lucene-demos-2.1.0.jar

This is as I said above what returns when I type set.

Then I type: java org.apache.lucene.demo.Indexfiles docs

get a no classdef Found

I also tried java org.apache.lucene.demo.IndexHTML -create --index 
{index-dir} ..

Suggestions are welcome. Please make sure to include what directory I 
should be in when I type the commands


Thank you,
Beth Friedmann


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 18 19:54:07 2007
Return-Path: <java-user-return-26195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64884 invoked from network); 18 Feb 2007 19:54:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2007 19:54:06 -0000
Received: (qmail 50770 invoked by uid 500); 18 Feb 2007 19:54:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50743 invoked by uid 500); 18 Feb 2007 19:54:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50732 invoked by uid 99); 18 Feb 2007 19:54:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Feb 2007 11:54:08 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Feb 2007 11:53:57 -0800
Received: by nf-out-0910.google.com with SMTP id i2so1987759nfe
        for <java-user@lucene.apache.org>; Sun, 18 Feb 2007 11:53:36 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=I0yWvxyaFgVYQFn2q6R/xM7A2ACE64JhaJmH0g1SBL2QdpkbuXAZRwjv0hL2kZoDSec+dWt795qYTkGk89PtDQ0GxzMDvoE9iFAzA2uD4/pa4+opAzWscT+VqJ2BYhOzrBOpxdSOKp/9io15RsPGsODQDFninfjr7imbAxBhNN0=
Received: by 10.82.167.5 with SMTP id p5mr9189595bue.1171828415983;
        Sun, 18 Feb 2007 11:53:35 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Sun, 18 Feb 2007 11:53:35 -0800 (PST)
Message-ID: <359a92830702181153m370dae63haeb1c451f056e1c6@mail.gmail.com>
Date: Sun, 18 Feb 2007 14:53:35 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: the never ending class path problem
In-Reply-To: <45D88EAA.9060000@optonline.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28485_19776995.1171828415956"
References: <45D88EAA.9060000@optonline.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_28485_19776995.1171828415956
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

So, which class wasn't found? Indexfiles? And should that be IndexFiles?

But check again that the path to the jars is exactly correct. I can't tell
you how many times I've made a typo in something like that...... Often I
resort to making a command file, and cut-n-paste from Windows Explorer
address bar just to be sure, then cut-n-pasting things into an editor to
force myself to do a character-by-character comparison.....

One final note, it's useful to cut-n-paste the errors, since if you re-type
things, you can, say, capitalize incorrectly and not get much useful
back......

Erick

On 2/18/07, Beth Friedmann <friedmann@optonline.net> wrote:
>
> I am hoping someone can tell me what I am doing wrong. I downloaded the
> demo for lucene, 2.1.0.  I have put the core and demos jars in my class
> path and have confirmed they exist with a set command.
>
> My directory structure is:
>
> c:\documents and users\owner\workspace\lucene
> demo\src\demo\org\apache\lucene\demo
>
> The java files including IndexFiles and IndexHTML reside there.
>
> I am a windows user and clearly a very very new newbie, so help is
> appreciated.
>
> I choose start, run, cmd.
> When I set the class path I typed:
>
> set classpath=c:\documents and users\owner\workspace\lucene
> demo\lucene-core-2.1.0.jar;c:\documents and users\owner\workspace\lucene
> demo\lucene-demos-2.1.0.jar
>
> This is as I said above what returns when I type set.
>
> Then I type: java org.apache.lucene.demo.Indexfiles docs
>
> get a no classdef Found
>
> I also tried java org.apache.lucene.demo.IndexHTML -create --index
> {index-dir} ..
>
> Suggestions are welcome. Please make sure to include what directory I
> should be in when I type the commands
>
>
> Thank you,
> Beth Friedmann
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_28485_19776995.1171828415956--

From java-user-return-26196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 18 21:53:34 2007
Return-Path: <java-user-return-26196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5544 invoked from network); 18 Feb 2007 21:53:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2007 21:53:33 -0000
Received: (qmail 40780 invoked by uid 500); 18 Feb 2007 21:53:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40744 invoked by uid 500); 18 Feb 2007 21:53:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40733 invoked by uid 99); 18 Feb 2007 21:53:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Feb 2007 13:53:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Feb 2007 13:53:21 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HItxq-0002Bj-S2
	for java-user@lucene.apache.org; Sun, 18 Feb 2007 13:52:58 -0800
Message-ID: <9034207.post@talk.nabble.com>
Date: Sun, 18 Feb 2007 13:52:58 -0800 (PST)
From: dmitri <evysq@mail.ru>
To: java-user@lucene.apache.org
Subject: IndexSearcher on multi-core CPU machine
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: evysq@mail.ru
X-Virus-Checked: Checked by ClamAV on apache.org


We have search (no update) web app on 2 dual core CPU machine (2x Dual Core
AMD Opteron(tm) Processor 280) with 8G of RAM. Lucene 2.0 is used.
My index is optimized and non compound, 9G holding 6.5 M documents. 
Search includes term queries, range filters and sorts.

When I use single IndexSearcher and search with multiple threads CPU are
partially idle.

To have 100% CPU utilization I have to create several IndexSearchers.

With org.apache.lucene.store.MMapDirectory throughput is better but I still
have to create multiple IndexSearcher instances to have 100% CPU
utilization.

With multiple IndexSearchers search times are better under multithreaded
load.
Following is average search times (in ms) for different number of parallel
threads and IndexSearchers:
concurrent  1 searcher  5 searchers 10 searchers
threads
1                  180                   177              167
2                   201                  184              174
4                   241                  197              188
5                  339                    236              220
10                663                    454              420
20              1172                    917              880
50               2599                 2143            1912
100             4887                 4056              3775
Maximum search times for smaller number of searchers differ in 2-3 times.

Search is CPU bound (no IO wait is observed). 
Is there any way to better utilize the server other than create several
IndexSearchers?
I need to squeeze as much performance as possible out of the machine as we
have strict performance requirements.
-- 
View this message in context: http://www.nabble.com/IndexSearcher-on-multi-core-CPU-machine-tf3249889.html#a9034207
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 18 21:57:08 2007
Return-Path: <java-user-return-26197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6612 invoked from network); 18 Feb 2007 21:57:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2007 21:57:07 -0000
Received: (qmail 44237 invoked by uid 500); 18 Feb 2007 21:57:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44191 invoked by uid 500); 18 Feb 2007 21:57:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44180 invoked by uid 99); 18 Feb 2007 21:57:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Feb 2007 13:57:08 -0800
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,HTML_OBFUSCATE_05_10
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.89.192.138] (HELO postoffice.aconex.com) (203.89.192.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Feb 2007 13:56:56 -0800
Received: from [192.168.5.130] (unknown [203.89.192.141])
	by postoffice.aconex.com (Postfix) with ESMTP id 21B4FAAC4F0
	for <java-user@lucene.apache.org>; Mon, 19 Feb 2007 08:39:52 +1100 (EST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <9034207.post@talk.nabble.com>
References: <9034207.post@talk.nabble.com>
Content-Type: multipart/signed; micalg=sha1; boundary=Apple-Mail-4-255061637; protocol="application/pkcs7-signature"
Message-Id: <D5C59E88-DABB-445F-8191-F2A368F7FC22@aconex.com>
From: Paul Smith <psmith@aconex.com>
Subject: Re: IndexSearcher on multi-core CPU machine
Date: Mon, 19 Feb 2007 08:56:29 +1100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-4-255061637
Content-Type: multipart/alternative;
	boundary=Apple-Mail-3-255061334


--Apple-Mail-3-255061334
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed

are you using Locale-sensitive sorting at all?

https://issues.apache.org/jira/browse/LUCENE-806

Just wondering if you're seeing the same problem we are having.

cheers,

Paul Smith

On 19/02/2007, at 8:52 AM, dmitri wrote:

>
> We have search (no update) web app on 2 dual core CPU machine (2x  
> Dual Core
> AMD Opteron(tm) Processor 280) with 8G of RAM. Lucene 2.0 is used.
> My index is optimized and non compound, 9G holding 6.5 M documents.
> Search includes term queries, range filters and sorts.
>
> When I use single IndexSearcher and search with multiple threads  
> CPU are
> partially idle.
>
> To have 100% CPU utilization I have to create several IndexSearchers.
>
> With org.apache.lucene.store.MMapDirectory throughput is better but  
> I still
> have to create multiple IndexSearcher instances to have 100% CPU
> utilization.
>
> With multiple IndexSearchers search times are better under  
> multithreaded
> load.
> Following is average search times (in ms) for different number of  
> parallel
> threads and IndexSearchers:
> concurrent  1 searcher  5 searchers 10 searchers
> threads
> 1                  180                   177              167
> 2                   201                  184              174
> 4                   241                  197              188
> 5                  339                    236              220
> 10                663                    454              420
> 20              1172                    917              880
> 50               2599                 2143            1912
> 100             4887                 4056              3775
> Maximum search times for smaller number of searchers differ in 2-3  
> times.
>
> Search is CPU bound (no IO wait is observed).
> Is there any way to better utilize the server other than create  
> several
> IndexSearchers?
> I need to squeeze as much performance as possible out of the  
> machine as we
> have strict performance requirements.
> -- 
> View this message in context: http://www.nabble.com/IndexSearcher- 
> on-multi-core-CPU-machine-tf3249889.html#a9034207
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>




--Apple-Mail-3-255061334
Content-Transfer-Encoding: quoted-printable
Content-Type: text/html;
	charset=ISO-8859-1

<HTML><BODY style=3D"word-wrap: break-word; -khtml-nbsp-mode: space; =
-khtml-line-break: after-white-space; ">are you using Locale-sensitive =
sorting at all?<DIV><BR class=3D"khtml-block-placeholder"></DIV><DIV><FONT=
 class=3D"Apple-style-span" color=3D"#000000"><SPAN =
class=3D"Apple-style-span" style=3D"background-color: transparent;"><A =
href=3D"https://issues.apache.org/jira/browse/LUCENE-806">https://issues.a=
pache.org/jira/browse/LUCENE-806</A></SPAN></FONT></DIV><DIV><BR =
class=3D"khtml-block-placeholder"></DIV><DIV>Just wondering if you're =
seeing the same problem we are having.</DIV><DIV><BR =
class=3D"khtml-block-placeholder"></DIV><DIV>cheers,</DIV><DIV><BR =
class=3D"khtml-block-placeholder"></DIV><DIV>Paul =
Smith</DIV><DIV><BR><DIV><DIV>On 19/02/2007, at 8:52 AM, dmitri =
wrote:</DIV><BR class=3D"Apple-interchange-newline"><BLOCKQUOTE =
type=3D"cite"><DIV style=3D"margin-top: 0px; margin-right: 0px; =
margin-bottom: 0px; margin-left: 0px; min-height: 14px; "><BR></DIV><DIV =
style=3D"margin-top: 0px; margin-right: 0px; margin-bottom: 0px; =
margin-left: 0px; ">We have search (no update) web app on 2 dual core =
CPU machine (2x Dual Core</DIV><DIV style=3D"margin-top: 0px; =
margin-right: 0px; margin-bottom: 0px; margin-left: 0px; ">AMD =
Opteron(tm) Processor 280) with 8G of RAM. Lucene 2.0 is used.</DIV><DIV =
style=3D"margin-top: 0px; margin-right: 0px; margin-bottom: 0px; =
margin-left: 0px; ">My index is optimized and non compound, 9G holding =
6.5 M documents.<SPAN class=3D"Apple-converted-space">=A0</SPAN></DIV><DIV=
 style=3D"margin-top: 0px; margin-right: 0px; margin-bottom: 0px; =
margin-left: 0px; ">Search includes term queries, range filters and =
sorts.</DIV><DIV style=3D"margin-top: 0px; margin-right: 0px; =
margin-bottom: 0px; margin-left: 0px; min-height: 14px; "><BR></DIV><DIV =
style=3D"margin-top: 0px; margin-right: 0px; margin-bottom: 0px; =
margin-left: 0px; ">When I use single IndexSearcher and search with =
multiple threads CPU are</DIV><DIV style=3D"margin-top: 0px; =
margin-right: 0px; margin-bottom: 0px; margin-left: 0px; ">partially =
idle.</DIV><DIV style=3D"margin-top: 0px; margin-right: 0px; =
margin-bottom: 0px; margin-left: 0px; min-height: 14px; "><BR></DIV><DIV =
style=3D"margin-top: 0px; margin-right: 0px; margin-bottom: 0px; =
margin-left: 0px; ">To have 100% CPU utilization I have to create =
several IndexSearchers.</DIV><DIV style=3D"margin-top: 0px; =
margin-right: 0px; margin-bottom: 0px; margin-left: 0px; min-height: =
14px; "><BR></DIV><DIV style=3D"margin-top: 0px; margin-right: 0px; =
margin-bottom: 0px; margin-left: 0px; ">With =
org.apache.lucene.store.MMapDirectory throughput is better but I =
still</DIV><DIV style=3D"margin-top: 0px; margin-right: 0px; =
margin-bottom: 0px; margin-left: 0px; ">have to create multiple =
IndexSearcher instances to have 100% CPU</DIV><DIV style=3D"margin-top: =
0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; =
">utilization.</DIV><DIV style=3D"margin-top: 0px; margin-right: 0px; =
margin-bottom: 0px; margin-left: 0px; min-height: 14px; "><BR></DIV><DIV =
style=3D"margin-top: 0px; margin-right: 0px; margin-bottom: 0px; =
margin-left: 0px; ">With multiple IndexSearchers search times are better =
under multithreaded</DIV><DIV style=3D"margin-top: 0px; margin-right: =
0px; margin-bottom: 0px; margin-left: 0px; ">load.</DIV><DIV =
style=3D"margin-top: 0px; margin-right: 0px; margin-bottom: 0px; =
margin-left: 0px; ">Following is average search times (in ms) for =
different number of parallel</DIV><DIV style=3D"margin-top: 0px; =
margin-right: 0px; margin-bottom: 0px; margin-left: 0px; ">threads and =
IndexSearchers:</DIV><DIV style=3D"margin-top: 0px; margin-right: 0px; =
margin-bottom: 0px; margin-left: 0px; ">concurrent<SPAN =
class=3D"Apple-converted-space">=A0 </SPAN>1 searcher<SPAN =
class=3D"Apple-converted-space">=A0 </SPAN>5 searchers 10 =
searchers</DIV><DIV style=3D"margin-top: 0px; margin-right: 0px; =
margin-bottom: 0px; margin-left: 0px; ">threads</DIV><DIV =
style=3D"margin-top: 0px; margin-right: 0px; margin-bottom: 0px; =
margin-left: 0px; ">1<SPAN class=3D"Apple-converted-space">=A0 =A0 =A0 =A0=
 =A0 =A0 =A0 =A0 =A0 </SPAN>180 <SPAN class=3D"Apple-converted-space">=A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 </SPAN>177<SPAN =
class=3D"Apple-converted-space">=A0 =A0 =A0 =A0 =A0 =A0 =A0 =
</SPAN>167</DIV><DIV style=3D"margin-top: 0px; margin-right: 0px; =
margin-bottom: 0px; margin-left: 0px; ">2 <SPAN =
class=3D"Apple-converted-space">=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
</SPAN>201<SPAN class=3D"Apple-converted-space">=A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 </SPAN>184<SPAN class=3D"Apple-converted-space">=A0 =A0 =A0 =
=A0 =A0 =A0 =A0 </SPAN>174</DIV><DIV style=3D"margin-top: 0px; =
margin-right: 0px; margin-bottom: 0px; margin-left: 0px; ">4 <SPAN =
class=3D"Apple-converted-space">=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
</SPAN>241<SPAN class=3D"Apple-converted-space">=A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 </SPAN>197<SPAN class=3D"Apple-converted-space">=A0 =A0 =A0 =
=A0 =A0 =A0 =A0 </SPAN>188</DIV><DIV style=3D"margin-top: 0px; =
margin-right: 0px; margin-bottom: 0px; margin-left: 0px; ">5<SPAN =
class=3D"Apple-converted-space">=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
</SPAN>339<SPAN class=3D"Apple-converted-space">=A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 </SPAN>236<SPAN class=3D"Apple-converted-space">=A0 =A0 =
=A0 =A0 =A0 =A0 =A0 </SPAN>220</DIV><DIV style=3D"margin-top: 0px; =
margin-right: 0px; margin-bottom: 0px; margin-left: 0px; ">10<SPAN =
class=3D"Apple-converted-space">=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
</SPAN>663<SPAN class=3D"Apple-converted-space">=A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 </SPAN>454<SPAN class=3D"Apple-converted-space">=A0 =A0 =
=A0 =A0 =A0 =A0 =A0 </SPAN>420</DIV><DIV style=3D"margin-top: 0px; =
margin-right: 0px; margin-bottom: 0px; margin-left: 0px; ">20<SPAN =
class=3D"Apple-converted-space">=A0 =A0 =A0 =A0 =A0 =A0 =A0 =
</SPAN>1172<SPAN class=3D"Apple-converted-space">=A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 </SPAN>917<SPAN class=3D"Apple-converted-space">=A0 =A0 =
=A0 =A0 =A0 =A0 =A0 </SPAN>880</DIV><DIV style=3D"margin-top: 0px; =
margin-right: 0px; margin-bottom: 0px; margin-left: 0px; ">50 <SPAN =
class=3D"Apple-converted-space">=A0 =A0 =A0 =A0 =A0 =A0 =A0 </SPAN>2599 =
<SPAN class=3D"Apple-converted-space">=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
</SPAN>2143<SPAN class=3D"Apple-converted-space">=A0 =A0 =A0 =A0 =A0 =A0 =
</SPAN>1912</DIV><DIV style=3D"margin-top: 0px; margin-right: 0px; =
margin-bottom: 0px; margin-left: 0px; ">100 <SPAN =
class=3D"Apple-converted-space">=A0 =A0 =A0 =A0 =A0 =A0 </SPAN>4887 =
<SPAN class=3D"Apple-converted-space">=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
</SPAN>4056<SPAN class=3D"Apple-converted-space">=A0 =A0 =A0 =A0 =A0 =A0 =
=A0 </SPAN>3775</DIV><DIV style=3D"margin-top: 0px; margin-right: 0px; =
margin-bottom: 0px; margin-left: 0px; ">Maximum search times for smaller =
number of searchers differ in 2-3 times.</DIV><DIV style=3D"margin-top: =
0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; =
min-height: 14px; "><BR></DIV><DIV style=3D"margin-top: 0px; =
margin-right: 0px; margin-bottom: 0px; margin-left: 0px; ">Search is CPU =
bound (no IO wait is observed).<SPAN =
class=3D"Apple-converted-space">=A0</SPAN></DIV><DIV style=3D"margin-top: =
0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; ">Is there =
any way to better utilize the server other than create several</DIV><DIV =
style=3D"margin-top: 0px; margin-right: 0px; margin-bottom: 0px; =
margin-left: 0px; ">IndexSearchers?</DIV><DIV style=3D"margin-top: 0px; =
margin-right: 0px; margin-bottom: 0px; margin-left: 0px; ">I need to =
squeeze as much performance as possible out of the machine as =
we</DIV><DIV style=3D"margin-top: 0px; margin-right: 0px; margin-bottom: =
0px; margin-left: 0px; ">have strict performance requirements.</DIV><DIV =
style=3D"margin-top: 0px; margin-right: 0px; margin-bottom: 0px; =
margin-left: 0px; ">--<SPAN =
class=3D"Apple-converted-space">=A0</SPAN></DIV><DIV style=3D"margin-top: =
0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; ">View =
this message in context: <A =
href=3D"http://www.nabble.com/IndexSearcher-on-multi-core-CPU-machine-tf32=
49889.html#a9034207">http://www.nabble.com/IndexSearcher-on-multi-core-CPU=
-machine-tf3249889.html#a9034207</A></DIV><DIV style=3D"margin-top: 0px; =
margin-right: 0px; margin-bottom: 0px; margin-left: 0px; ">Sent from the =
Lucene - Java Users mailing list archive at Nabble.com.</DIV><DIV =
style=3D"margin-top: 0px; margin-right: 0px; margin-bottom: 0px; =
margin-left: 0px; min-height: 14px; "><BR></DIV><DIV style=3D"margin-top: =
0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; =
min-height: 14px; "><BR></DIV><DIV style=3D"margin-top: 0px; =
margin-right: 0px; margin-bottom: 0px; margin-left: 0px; =
">---------------------------------------------------------------------</D=
IV><DIV style=3D"margin-top: 0px; margin-right: 0px; margin-bottom: 0px; =
margin-left: 0px; ">To unsubscribe, e-mail: <A =
href=3D"mailto:java-user-unsubscribe@lucene.apache.org">java-user-unsubscr=
ibe@lucene.apache.org</A></DIV><DIV style=3D"margin-top: 0px; =
margin-right: 0px; margin-bottom: 0px; margin-left: 0px; ">For =
additional commands, e-mail: <A =
href=3D"mailto:java-user-help@lucene.apache.org">java-user-help@lucene.apa=
che.org</A></DIV><DIV style=3D"margin-top: 0px; margin-right: 0px; =
margin-bottom: 0px; margin-left: 0px; min-height: 14px; "><BR></DIV> =
</BLOCKQUOTE></DIV><BR><DIV> <SPAN class=3D"Apple-style-span" =
style=3D"border-collapse: separate; border-spacing: 0px 0px; color: =
rgb(0, 0, 0); font-family: Lucida Grande; font-size: 14px; font-style: =
normal; font-variant: normal; font-weight: normal; letter-spacing: =
normal; line-height: normal; text-align: auto; =
-khtml-text-decorations-in-effect: none; text-indent: 0px; =
-apple-text-size-adjust: auto; text-transform: none; orphans: 2; =
white-space: normal; widows: 2; word-spacing: 0px; "><BR =
class=3D"Apple-interchange-newline"></SPAN> =
</DIV><BR></DIV></BODY></HTML>=

--Apple-Mail-3-255061334--

--Apple-Mail-4-255061637
Content-Transfer-Encoding: base64
Content-Type: application/pkcs7-signature;
	name=smime.p7s
Content-Disposition: attachment;
	filename=smime.p7s

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIGpzCCAz8w
ggKooAMCAQICAQ0wDQYJKoZIhvcNAQEFBQAwgdExCzAJBgNVBAYTAlpBMRUwEwYDVQQIEwxXZXN0
ZXJuIENhcGUxEjAQBgNVBAcTCUNhcGUgVG93bjEaMBgGA1UEChMRVGhhd3RlIENvbnN1bHRpbmcx
KDAmBgNVBAsTH0NlcnRpZmljYXRpb24gU2VydmljZXMgRGl2aXNpb24xJDAiBgNVBAMTG1RoYXd0
ZSBQZXJzb25hbCBGcmVlbWFpbCBDQTErMCkGCSqGSIb3DQEJARYccGVyc29uYWwtZnJlZW1haWxA
dGhhd3RlLmNvbTAeFw0wMzA3MTcwMDAwMDBaFw0xMzA3MTYyMzU5NTlaMGIxCzAJBgNVBAYTAlpB
MSUwIwYDVQQKExxUaGF3dGUgQ29uc3VsdGluZyAoUHR5KSBMdGQuMSwwKgYDVQQDEyNUaGF3dGUg
UGVyc29uYWwgRnJlZW1haWwgSXNzdWluZyBDQTCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEA
xKY8VXNV+065yplaHmjAdQRwnd/p/6Me7L3N9VvyGna9fww6YfK/Uc4B1OVQCjDXAmNaLIkVcI7d
yfArhVqqP3FWy688Cwfn8R+RNiQqE88r1fOCdz0Dviv+uxg+B79AgAJk16emu59l0cUqVIUPSAR/
p7bRPGEEQB5kGXJgt/sCAwEAAaOBlDCBkTASBgNVHRMBAf8ECDAGAQH/AgEAMEMGA1UdHwQ8MDow
OKA2oDSGMmh0dHA6Ly9jcmwudGhhd3RlLmNvbS9UaGF3dGVQZXJzb25hbEZyZWVtYWlsQ0EuY3Js
MAsGA1UdDwQEAwIBBjApBgNVHREEIjAgpB4wHDEaMBgGA1UEAxMRUHJpdmF0ZUxhYmVsMi0xMzgw
DQYJKoZIhvcNAQEFBQADgYEASIzRUIPqCy7MDaNmrGcPf6+svsIXoUOWlJ1/TCG4+DYfqi2fNi/A
9BxQIJNwPP2t4WFiw9k6GX6EsZkbAMUaC4J0niVQlGLH2ydxVyWN3amcOY6MIE9lX5Xa9/eH1sYI
Tq726jTlEBpbNU1341YheILcIRk13iSx0x1G/11fZU8wggNgMIICyaADAgECAhAeq5haE1n+245z
DGDY+liyMA0GCSqGSIb3DQEBBQUAMGIxCzAJBgNVBAYTAlpBMSUwIwYDVQQKExxUaGF3dGUgQ29u
c3VsdGluZyAoUHR5KSBMdGQuMSwwKgYDVQQDEyNUaGF3dGUgUGVyc29uYWwgRnJlZW1haWwgSXNz
dWluZyBDQTAeFw0wNjEyMTMyMTAzMTdaFw0wNzEyMTMyMTAzMTdaMIGdMQ4wDAYDVQQEEwVTbWl0
aDENMAsGA1UEKhMEUGF1bDETMBEGA1UEAxMKUGF1bCBTbWl0aDEgMB4GCSqGSIb3DQEJARYRcHNt
aXRoQGFwYWNoZS5vcmcxIDAeBgkqhkiG9w0BCQEWEXBzbWl0aEBhY29uZXguY29tMSMwIQYJKoZI
hvcNAQkBFhR0YWxscHNtaXRoQGdtYWlsLmNvbTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoC
ggEBALyeqM7xB/Hf+bvVZG0cFyswYHlGrxOWsAm50HL6qlAe3d0lKet/UYtH6thPxWex6hU45J13
wRRh/K0YnHGaxItQiLgu8N6lOUE0tH0GCOAJlPBmwyd5CfZuORjD04cpKJAUDLFMveCp+VlxkDA4
tJ8konURIKfdO4+oz5of4i2QaX13RAwBaPXFDRg0sLq6up+bMuCphZ1vf8JuqL7/E5rTtw6vu/c0
3qNCWscx79YAMzDo4+Vi962V07hgLJ8gbOwl3qTu0lIx6YApS8XTgqxZaU54nGIrHDmIrsQPcIsd
ESFDqPO8MlPBd2WuTkotD464K6pZLg7T7VULMfJ/ACcCAwEAAaNXMFUwRQYDVR0RBD4wPIERcHNt
aXRoQGFwYWNoZS5vcmeBEXBzbWl0aEBhY29uZXguY29tgRR0YWxscHNtaXRoQGdtYWlsLmNvbTAM
BgNVHRMBAf8EAjAAMA0GCSqGSIb3DQEBBQUAA4GBAKiR7earfeeh3A0dbfAC7V92vdqcIU9bziOS
2Nw8QUYZoqEr28K/tsEAZiOGFiFerHjOZ10aiT9tBvQZOqrsh8x4Gyu/E664f6wibfCkaXOKBRg4
hVpUdLuXRFIiee7gSSij40C0cUpMkQbhrKMv4rYMh1L96ekOGxcVLAFi8qUdMYIDEDCCAwwCAQEw
djBiMQswCQYDVQQGEwJaQTElMCMGA1UEChMcVGhhd3RlIENvbnN1bHRpbmcgKFB0eSkgTHRkLjEs
MCoGA1UEAxMjVGhhd3RlIFBlcnNvbmFsIEZyZWVtYWlsIElzc3VpbmcgQ0ECEB6rmFoTWf7bjnMM
YNj6WLIwCQYFKw4DAhoFAKCCAW8wGAYJKoZIhvcNAQkDMQsGCSqGSIb3DQEHATAcBgkqhkiG9w0B
CQUxDxcNMDcwMjE4MjE1NjMwWjAjBgkqhkiG9w0BCQQxFgQUStYeUvrvSkBUZyHFrjzUY9QaD8ww
gYUGCSsGAQQBgjcQBDF4MHYwYjELMAkGA1UEBhMCWkExJTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0
aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5n
IENBAhAeq5haE1n+245zDGDY+liyMIGHBgsqhkiG9w0BCRACCzF4oHYwYjELMAkGA1UEBhMCWkEx
JTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQ
ZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5nIENBAhAeq5haE1n+245zDGDY+liyMA0GCSqGSIb3DQEB
AQUABIIBAEzs6UNATo/NmdI6jSyLlPV5uYSCwy62eBha7XhcUmq88cR6Uu7KhoIsJc9jFtPcMw9R
Y0kPhiV0UzTEi9uIkGNb+suPv4H3RReY1S202RkIPOATAMcQZd6I6hqfKZGO4+Mf+k9ehVCwr+mk
7kUNGhaSD5yeylmHir5U08F9s0dnTYsKHD8MEMA6UvHbR8CSgzy+U0HX3ZvY/cuOW5oH4CnK4Hai
uuzMBKzMEAzJdUItfG49y4BRsw8nmhkANO9CJKd3Tva0xnwKDtry/4aQs0UU+Zj3ctCsdPpD7UMX
OrLf6QvV3XIm4dnZ2n4Pwns6ljA/VOPcxsTCJnVqAciz1DAAAAAAAAA=

--Apple-Mail-4-255061637--

From java-user-return-26198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 18 23:57:43 2007
Return-Path: <java-user-return-26198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36023 invoked from network); 18 Feb 2007 23:57:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2007 23:57:42 -0000
Received: (qmail 4096 invoked by uid 500); 18 Feb 2007 23:57:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4069 invoked by uid 500); 18 Feb 2007 23:57:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4058 invoked by uid 99); 18 Feb 2007 23:57:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Feb 2007 15:57:44 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [202.124.246.50] (HELO 202-124-244-2.dedsvrs.net) (202.124.246.50)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Feb 2007 15:57:33 -0800
Received: (qmail 20120 invoked from network); 19 Feb 2007 10:34:03 +1100
Received: from 55.120.233.220.exetel.com.au (HELO hasbeen) (220.233.120.55)
  by 202-124-246-50.dedsvrs.net with SMTP; 19 Feb 2007 10:34:02 +1100
From: "Vijay Santhanam" <vijay@spectrumwired.com>
To: <java-user@lucene.apache.org>
Subject: Multiple time ranges in a document
Date: Mon, 19 Feb 2007 10:43:39 +1100
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0010_01C75412.D0F414B0"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: AcdTtp056eECC2pjRfqiu0Z5VISmVA==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20070218235736.3384210FB007@herse.apache.org>

------=_NextPart_000_0010_01C75412.D0F414B0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hello,

 

I'm using a RangeFilter to find "Event" documents (with Start and End lucene
friendly formatted date fields) that match a Users time range query. This
works perfectly in sub-second times at decent loads, but I'm having trouble
searching multiple performances in the one document. Indexing them is no
problem, because I can add extra terms to the start and end fields.

 

Here's a situation that doesn't work to well with the RangeFilter:-

 

Let's say a comedian has a regular gig every Monday for the next 3 weeks,
from 7pm-9pm. So, the start field will be 200702191900, 200702261900,
200703051900. And, the end field will be 200702192100, 200702262100,
200703052100.

If someone searches for an event on Thursday anytime during his 3 week
stint, the comedian's event will show up, because the Range Filter will
consider the lowest term of the start field and the highest term of the end
field.

 

Also, sorting by start or end fields will break, but I could write my own
SortComparatorSource to fix that.

 

How could I get around the filter problem? I could write my own filter, but
it would need to keep track of both fields, and their respective term
positions for each field.

 

Thanks for your help,

-Vijay

 


------=_NextPart_000_0010_01C75412.D0F414B0--


From java-user-return-26199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 19 03:57:48 2007
Return-Path: <java-user-return-26199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91717 invoked from network); 19 Feb 2007 03:57:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2007 03:57:47 -0000
Received: (qmail 51567 invoked by uid 500); 19 Feb 2007 03:57:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51528 invoked by uid 500); 19 Feb 2007 03:57:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51517 invoked by uid 99); 19 Feb 2007 03:57:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Feb 2007 19:57:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.156 as permitted sender)
Received: from [195.212.29.156] (HELO mtagate7.de.ibm.com) (195.212.29.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Feb 2007 19:57:36 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate7.de.ibm.com (8.13.8/8.13.8) with ESMTP id l1J3vEg7093938
	for <java-user@lucene.apache.org>; Mon, 19 Feb 2007 03:57:14 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.2) with ESMTP id l1J3vEuQ2080998
	for <java-user@lucene.apache.org>; Mon, 19 Feb 2007 04:57:14 +0100
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l1J3vET5024079
	for <java-user@lucene.apache.org>; Mon, 19 Feb 2007 04:57:14 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l1J3vDFH024076
	for <java-user@lucene.apache.org>; Mon, 19 Feb 2007 04:57:13 +0100
In-Reply-To: <c68e39170702180820j2c85416ev20f58749aac41f1c@mail.gmail.com>
Subject: Re: Lucene 2.1.0 release available
To: java-user@lucene.apache.org
Cc: java-user@lucene.apache.org, yseeley@gmail.com
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF6A02D1C4.ECFC7D23-ON88257287.00138A41-88257287.00156B14@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Sun, 18 Feb 2007 19:53:56 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 19/02/2007 05:57:13
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

yseeley@gmail.com wrote on 18/02/2007 08:20:56:

> Release 2.1.0 of Lucene is now available!
>
> Many new features, optimizations, and bug fixes have been added since
2.0,
> including lazy field loading, simple deletes via IndexWriter, and
lockless
> readers/commits.
>
> The detailed change log is at:
> http://svn.apache.org/repos/asf/lucene/java/tags/lucene_2_1_0/CHANGES.txt

Perhaps worth pointing out is item 9 in the changes list:
  9. LUCENE-771: The default location of the write lock
  is now the index directory...

While this is way more convenient, notice that Lucene's feature of
protecting from opening the index for update by two applications
running in parallel is weaker while upgrading to 2.1.0 - i.e.
2.1.0 would succeed to open for write even if at the same time
it is open for write by an older Lucene version.

To avoid problems, just follow these steps when upgrading:
- stop all readers (searchers)
- upgrade all readers (searchers)
- stop all writers
- upgrade all writers

>
> Lucene 2.1 includes index format changes that are not readable
> by older versions of Lucene.  Lucene 2.1 can both read and update
> older Lucene indexes.  Adding to an index with an older format
> will cause it to be converted to the newer format.
>
> Binary and source distributions are available at
> http://www.apache.org/dyn/closer.cgi/lucene/java/
>
> -Yonik
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 19 06:34:26 2007
Return-Path: <java-user-return-26200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18273 invoked from network); 19 Feb 2007 06:34:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2007 06:34:26 -0000
Received: (qmail 68994 invoked by uid 500); 19 Feb 2007 06:34:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68958 invoked by uid 500); 19 Feb 2007 06:34:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68947 invoked by uid 99); 19 Feb 2007 06:34:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Feb 2007 22:34:27 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Feb 2007 22:34:16 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 6E1A45B764; Sun, 18 Feb 2007 22:33:56 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 583797F403
	for <java-user@lucene.apache.org>; Sun, 18 Feb 2007 22:33:56 -0800 (PST)
Date: Sun, 18 Feb 2007 22:33:56 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: NO_NORMS and TOKENIZED?
In-Reply-To: <4D497953-E489-4716-90BD-59A1B9AA6A93@rectangular.com>
Message-ID: <Pine.LNX.4.58.0702182226440.20338@hal.rescomp.berkeley.edu>
References: <20070126195010.90762.qmail@web50305.mail.yahoo.com>
 <20070215150143.GA16525@fermat.math.technion.ac.il>
 <c68e39170702151320g546790b4qb16199eb1bf8c6c@mail.gmail.com>
 <4D497953-E489-4716-90BD-59A1B9AA6A93@rectangular.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Heh.  Your compadre Hoss is one of the most ardent opponents of fixed
: field defs.  :)
:
: I've been planning to ask him at some point how he might deal with
: multidimensional data if he were forced to use KinoSearch's Schema/
: FieldSpec system.  What say you, Hoss, can you think of something?

am i really that bad? ... i remember having a discussion about this (which
i can't find now) and i remember thinking up some examples of why i
thought it was useful to be able to set field properties on a per document
basis -- but i can't for the life of me rememebr what they were now ...
I don't suppose you have a mailing pointer to my old comments do you
Marvin?

assuming for hte sake of argument i had good reasons (i think that's a
safe bet: i always have good reasons) then if i wanted to be able to use
an option on field foo for some docs and not on others i'd have to have
foo_optOFF and foo_optON ... then anytime i wanted to search on "foo" i'd
have to use a booleanquery without a coord factor across both.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 19 07:14:50 2007
Return-Path: <java-user-return-26201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29580 invoked from network); 19 Feb 2007 07:14:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2007 07:14:47 -0000
Received: (qmail 12306 invoked by uid 500); 19 Feb 2007 07:14:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12280 invoked by uid 500); 19 Feb 2007 07:14:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12269 invoked by uid 99); 19 Feb 2007 07:14:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Feb 2007 23:14:48 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [68.116.38.223] (HELO rectangular.com) (68.116.38.223)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Feb 2007 23:14:35 -0800
Received: from [67.189.26.9] (helo=[10.0.1.3])
	by rectangular.com with esmtpa (Exim 4.44)
	id 1HJ3EP-000JF0-Gg
	for java-user@lucene.apache.org; Sun, 18 Feb 2007 23:46:41 -0800
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <Pine.LNX.4.58.0702182226440.20338@hal.rescomp.berkeley.edu>
References: <20070126195010.90762.qmail@web50305.mail.yahoo.com> <20070215150143.GA16525@fermat.math.technion.ac.il> <c68e39170702151320g546790b4qb16199eb1bf8c6c@mail.gmail.com> <4D497953-E489-4716-90BD-59A1B9AA6A93@rectangular.com> <Pine.LNX.4.58.0702182226440.20338@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <3F2DFC4E-581A-44AC-B51A-CAFC9B2973B8@rectangular.com>
Content-Transfer-Encoding: 7bit
From: Marvin Humphrey <marvin@rectangular.com>
Subject: Re: NO_NORMS and TOKENIZED?
Date: Sun, 18 Feb 2007 23:14:12 -0800
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Feb 18, 2007, at 10:33 PM, Chris Hostetter wrote:

> I don't suppose you have a mailing pointer to my old comments do you
> Marvin?

http://tinyurl.com/394apl (mail-archives.apache.org)

You're in good company.  The other party with strong objections was  
Doug.

http://tinyurl.com/36ucj2

> en if i wanted to be able to use
> an option on field foo for some docs and not on others i'd have to  
> have
> foo_optOFF and foo_optON ... then anytime i wanted to search on  
> "foo" i'd
> have to use a booleanquery without a coord factor across both.

I'm trying to think of an example where that would actually come into  
play.  What are some of the options you'd turn on and off?  Norms?   
Tokenization?

IIUC, that's a third objection in addition to your two from the  
previous discussion.  The other two were "evolving" indexes, and what  
you described as "dynamically typed fields" but what I would call  
"multi-dimensional data".

KinoSearch's Schema scheme allows you to add new fields, but you  
can't take any away or change any existing defs  -- so you're able to  
evolve, but only within fairly tight constraints.  I can't think of  
an elegant way to improve that situation, so I've declared that  
aspect "good enough" and we're moving on.  I don't think it's really  
any worse than what we have now -- where field defs persist, stored  
in field infos files, etc, and the resolution of conflicts can bite  
you in the butt (as I recall hearing you discuss when no-norms was  
being hashed out wrt suddenly having lots and lots of memory-sucking  
norms).

The multi-dimensional data problem is the one I'm most interested in  
solving.  Lucene/KS indexes don't handle one-to-many relationships  
well.  In your example, you had an index where the products had  
"attributes", and the attributes might have taken many different  
names -- so it wasn't possible to know all the field names in  
advance.  It sounds like, effectively, you were faking a second  
table.  So long as the names of your attributes don't crash into the  
names of your primary fields, that'll work.

At present, KS doesn't let you do something like that -- you have to  
define all your fields up front.  What I'd like to do is come up with  
a FieldDef subclass that handles multi-dimensional data.  I seem to  
recall that Solr had something along those lines, using prefixed  
field names or something.  Do I recall correctly?

Marvin Humphrey
Rectangular Research
http://www.rectangular.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 19 13:27:31 2007
Return-Path: <java-user-return-26202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59254 invoked from network); 19 Feb 2007 13:27:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2007 13:27:29 -0000
Received: (qmail 5741 invoked by uid 500); 19 Feb 2007 13:27:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5719 invoked by uid 500); 19 Feb 2007 13:27:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5708 invoked by uid 99); 19 Feb 2007 13:27:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 05:27:31 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Jamal.Karimi@cursor.de designates 213.240.191.82 as permitted sender)
Received: from [213.240.191.82] (HELO mail.cursor.de) (213.240.191.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 05:27:20 -0800
Received: from localhost (localhost [127.0.0.1])
	by mail.cursor.de (Postfix) with ESMTP id C7F9F43408A
	for <java-user@lucene.apache.org>; Mon, 19 Feb 2007 14:26:51 +0100 (CET)
Received: from mail.cursor.de ([127.0.0.1])
	by localhost (mail.cursor.de [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 10294-07 for <java-user@lucene.apache.org>;
	Mon, 19 Feb 2007 14:26:48 +0100 (CET)
Received: from elektra.cursor.de (elektra.cursor.de [10.0.0.11])
	by mail.cursor.de (Postfix) with ESMTP id 0EBA9434047
	for <java-user@lucene.apache.org>; Mon, 19 Feb 2007 14:26:48 +0100 (CET)
Content-class: urn:content-classes:message
Subject: AW: QueryParser explicit and implicit search operator
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Date: Mon, 19 Feb 2007 14:26:51 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Message-ID: <DD85A66A3EC15A48A90B24F725A2FDCF70B57A@elektra.cursor.de>
In-Reply-To: <1FC5B216-4DEA-4A91-9527-F9A1A85A1D08@ehatchersolutions.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: QueryParser explicit and implicit search operator
thread-index: AcdUAEnZaT95MGNUT6K+SvVNAkmkcgAJpEsA
From: "Karimi-Tabatabaie Jamal" <Jamal.Karimi@cursor.de>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Erik,

You are right for a little complex query. I tested  the following =
queries=20

serach at lucenebool.com with query "Query" 155 results
serach at lucenebool.com with query "Lucene" 270 results
serach at lucenebool.com with query "Query AND Lucene" 109 results
serach at lucenebool.com with query "Query Lucene" 109 results
serach at lucenebool.com with query "Query OR Lucene" 316 results

and came to the guess that it seems to be fixed for a query like "X OR =
Y"! How else would you explain the 316 search results, when the results =
for each single queries "Lucene" and "Query" is lesser than 316?

Jamal

-----Urspr=FCngliche Nachricht-----
Von: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
Gesendet: Samstag, 17. Februar 2007 06:27
An: java-user@lucene.apache.org
Betreff: Re: QueryParser explicit and implicit search operator


On Feb 16, 2007, at 1:53 PM, Karimi-Tabatabaie Jamal wrote:
> For my problem there seems to exist a lucence Bug
> (http://issues.apache.org/jira/browse/LUCENE-167) but also it seems =20
> that
> it's solved in the Lucene integration on site http://=20
> www.lucenebook.com.

Where do you see the problem solved at lucenebook.com?   The "Query =20
parsed to:" for this query <http://www.lucenebook.com/search?=20
query=3Daaaaa+AND+bbbbb+OR+ccccc+AND+ddddd> is

	Query parsed to: +aaaaa bbbbb +ccccc +ddddd

The OR caused the "bbbbb" term to not be required, yet all other =20
terms are required.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 19 13:36:38 2007
Return-Path: <java-user-return-26203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62471 invoked from network); 19 Feb 2007 13:36:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2007 13:36:37 -0000
Received: (qmail 17464 invoked by uid 500); 19 Feb 2007 13:36:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17169 invoked by uid 500); 19 Feb 2007 13:36:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17153 invoked by uid 99); 19 Feb 2007 13:36:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 05:36:38 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.215] (HELO web26004.mail.ukl.yahoo.com) (217.12.10.215)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 19 Feb 2007 05:36:25 -0800
Received: (qmail 49096 invoked by uid 60001); 19 Feb 2007 13:36:04 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=bMXgqVp1PVHlcZIxmMJgKJFSyGqsaWaPP0+NYXTWNhTPklJVWvp6neiedvJX4xi9iMzGqnDNzwmvn+VZ+fPB3IgDqZ7s4A8fkeO9C36gGv80pvUZImP/x+7taRNuPdDa6Pa/5np7o5SzePR0SljFt/XI8oiXPblc0wcgQwAh78o=;
X-YMail-OSG: cThjPtEVM1nV7bqn86CelBUVgBlQgJG5_Q_O4HRlqi1cVjaZP5FcEA5pR8sOBRPUyjTqNIMj7j3r6hx6md_77Mw6rrffFNNHofEdlFO4cgTU3RXiTF58.t28JF.FJEnJhOOiURafmEFn
Received: from [193.36.230.96] by web26004.mail.ukl.yahoo.com via HTTP; Mon, 19 Feb 2007 13:36:04 GMT
X-Mailer: YahooMailRC/368.8 YahooMailWebService/0.6.132.8
Date: Mon, 19 Feb 2007 13:36:03 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Multiple time ranges in a document
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <41618.47977.qm@web26004.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

The problem arises because there are multiple ranges defined in the documen=
t and it is not easy to test the start/end value pairs when they are held a=
s independent values in separate fields. AFAIK there is currently no query =
implementation for testing position relationships in words from more than o=
ne field.=0AThere is one sneaky way however, to record and query range info=
rmation in the one field - you can (ab)use the position information stored =
by Lucene to encode data such as time and then query for ranges using SpanQ=
ueries.=0A=0ABy writing a custom analyzer you can artificially "place" word=
s in a required location in a field by setting the position increment value=
 appropriately.=0AIf you chose to think of the extent of the field as repre=
senting time e.g. the hours or minutes in a day/week you can post pairs of =
"start" and "end" words at an appropriate location to effectively record th=
e range of time or date information.=0A=0AThis solves the problem of record=
ing pairs of ranges that can be queried.=0A=0ANow for your query - your exa=
mple query is actually a collection of ranges rather than one single range =
(just Thursdays) so this would need to be expressed as multiple SpanQueries=
 testing the areas of the document which represent the time period of inter=
est to see if they contain a start and end pair. =0A=0AWorth a try?=0A=0AMa=
rk=0A=0A----- Original Message ----=0AFrom: Vijay Santhanam <vijay@spectrum=
wired.com>=0ATo: java-user@lucene.apache.org=0ASent: Sunday, 18 February, 2=
007 11:43:39 PM=0ASubject: Multiple time ranges in a document=0A=0AHello,=
=0A=0A =0A=0AI'm using a RangeFilter to find "Event" documents (with Start =
and End lucene=0Afriendly formatted date fields) that match a Users time ra=
nge query. This=0Aworks perfectly in sub-second times at decent loads, but =
I'm having trouble=0Asearching multiple performances in the one document. I=
ndexing them is no=0Aproblem, because I can add extra terms to the start an=
d end fields.=0A=0A =0A=0AHere's a situation that doesn't work to well with=
 the RangeFilter:-=0A=0A =0A=0ALet's say a comedian has a regular gig every=
 Monday for the next 3 weeks,=0Afrom 7pm-9pm. So, the start field will be 2=
00702191900, 200702261900,=0A200703051900. And, the end field will be 20070=
2192100, 200702262100,=0A200703052100.=0A=0AIf someone searches for an even=
t on Thursday anytime during his 3 week=0Astint, the comedian's event will =
show up, because the Range Filter will=0Aconsider the lowest term of the st=
art field and the highest term of the end=0Afield.=0A=0A =0A=0AAlso, sortin=
g by start or end fields will break, but I could write my own=0ASortCompara=
torSource to fix that.=0A=0A =0A=0AHow could I get around the filter proble=
m? I could write my own filter, but=0Ait would need to keep track of both f=
ields, and their respective term=0Apositions for each field.=0A=0A =0A=0ATh=
anks for your help,=0A=0A-Vijay=0A=0A =0A=0A=0A=0A=0A=0A=0A=09=0A=09=0A=09=
=09=0A___________________________________________________________ =0ANew Ya=
hoo! Mail is the ultimate force in competitive emailing. Find out more at t=
he Yahoo! Mail Championships. Plus: play games and win prizes. =0Ahttp://uk=
.rd.yahoo.com/evt=3D44106/*http://mail.yahoo.net/uk 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 19 13:45:46 2007
Return-Path: <java-user-return-26205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66517 invoked from network); 19 Feb 2007 13:45:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2007 13:45:45 -0000
Received: (qmail 34911 invoked by uid 500); 19 Feb 2007 13:45:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34878 invoked by uid 500); 19 Feb 2007 13:45:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34866 invoked by uid 99); 19 Feb 2007 13:45:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 05:45:51 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.188 as permitted sender)
Received: from [209.85.134.188] (HELO mu-out-0910.google.com) (209.85.134.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 05:45:40 -0800
Received: by mu-out-0910.google.com with SMTP id i10so497375mue
        for <java-user@lucene.apache.org>; Mon, 19 Feb 2007 05:45:18 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=CECf97HK18YLRA8HQBQk1Xe7s8lT3b/7L+6AkRxVqo6E5XIwNHFLAoRmeSRSF3NOAYWF0qG1yOvosDQQY4xdKxKKgYKBufBHl/sTcbAh3R+uqJsXQPgPJUqYMaRJNTawavZHGye08GLzyvbSmFq3paBng6T/Sq8BBXVKCPzoPCg=
Received: by 10.82.188.15 with SMTP id l15mr10870869buf.1171892717977;
        Mon, 19 Feb 2007 05:45:17 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Mon, 19 Feb 2007 05:45:17 -0800 (PST)
Message-ID: <359a92830702190545u665498d6m2486a20259eabf01@mail.gmail.com>
Date: Mon, 19 Feb 2007 08:45:17 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: QueryParser explicit and implicit search operator
In-Reply-To: <DD85A66A3EC15A48A90B24F725A2FDCF70B57A@elektra.cursor.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_36439_19050390.1171892717911"
References: <1FC5B216-4DEA-4A91-9527-F9A1A85A1D08@ehatchersolutions.com>
	 <DD85A66A3EC15A48A90B24F725A2FDCF70B57A@elektra.cursor.de>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_36439_19050390.1171892717911
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

<<<How else would you explain the 316 search results, when the results for
each single queries "Lucene" and "Query" is lesser than 316?>>>
Because some documents contain "Lucene" but not "Query" and vice-versa.

These results look perfectly reasonable to me too. The default operator is
AND, which is why queries 3 and 4 return the same results.

When you query on "Query" you get some number of documents (109 to be exact=
)
that ALSO contain "Lucene". The reverse is also true, when you query
"Lucene", 109 of those documents also contain "Query".

So, if you subtract 109 (look familiar?) from the sum of the individual
queries for Lucene and Query, you get 316 (155 + 270 - 109) which is exactl=
y
what you get from "Lucene OR Query". All fine from my perspective.

Best
Erick

On 2/19/07, Karimi-Tabatabaie Jamal <Jamal.Karimi@cursor.de> wrote:
>
> Hello Erik,
>
> You are right for a little complex query. I tested  the following queries
>
> serach at lucenebool.com with query "Query" 155 results
> serach at lucenebool.com with query "Lucene" 270 results
> serach at lucenebool.com with query "Query AND Lucene" 109 results
> serach at lucenebool.com with query "Query Lucene" 109 results
> serach at lucenebool.com with query "Query OR Lucene" 316 results
>
> and came to the guess that it seems to be fixed for a query like "X OR Y"=
!
> How else would you explain the 316 search results, when the results for e=
ach
> single queries "Lucene" and "Query" is lesser than 316?
>
> Jamal
>
> -----Urspr=FCngliche Nachricht-----
> Von: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Gesendet: Samstag, 17. Februar 2007 06:27
> An: java-user@lucene.apache.org
> Betreff: Re: QueryParser explicit and implicit search operator
>
>
> On Feb 16, 2007, at 1:53 PM, Karimi-Tabatabaie Jamal wrote:
> > For my problem there seems to exist a lucence Bug
> > (http://issues.apache.org/jira/browse/LUCENE-167) but also it seems
> > that
> > it's solved in the Lucene integration on site http://
> > www.lucenebook.com.
>
> Where do you see the problem solved at lucenebook.com?   The "Query
> parsed to:" for this query <http://www.lucenebook.com/search?
> query=3Daaaaa+AND+bbbbb+OR+ccccc+AND+ddddd> is
>
>         Query parsed to: +aaaaa bbbbb +ccccc +ddddd
>
> The OR caused the "bbbbb" term to not be required, yet all other
> terms are required.
>
>         Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_36439_19050390.1171892717911--

From java-user-return-26204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 19 13:45:47 2007
Return-Path: <java-user-return-26204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66520 invoked from network); 19 Feb 2007 13:45:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2007 13:45:45 -0000
Received: (qmail 33715 invoked by uid 500); 19 Feb 2007 13:45:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33671 invoked by uid 500); 19 Feb 2007 13:45:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33633 invoked by uid 99); 19 Feb 2007 13:45:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 05:45:44 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 05:45:32 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id D585B30EFC17; Mon, 19 Feb 2007 06:44:59 -0700 (MST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id C0ECF30EFC16
	for <java-user@lucene.apache.org>; Mon, 19 Feb 2007 06:44:41 -0700 (MST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <DD85A66A3EC15A48A90B24F725A2FDCF70B57A@elektra.cursor.de>
References: <DD85A66A3EC15A48A90B24F725A2FDCF70B57A@elektra.cursor.de>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <FCBBE30E-2967-4915-BDA5-9578D6497FC1@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: AW: QueryParser explicit and implicit search operator
Date: Mon, 19 Feb 2007 08:44:26 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1


On Feb 19, 2007, at 8:26 AM, Karimi-Tabatabaie Jamal wrote:
> You are right for a little complex query. I tested  the following =20
> queries
>
> serach at lucenebool.com with query "Query" 155 results
> serach at lucenebool.com with query "Lucene" 270 results
> serach at lucenebool.com with query "Query AND Lucene" 109 results
> serach at lucenebool.com with query "Query Lucene" 109 results
> serach at lucenebool.com with query "Query OR Lucene" 316 results
>
> and came to the guess that it seems to be fixed for a query like "X =20=

> OR Y"! How else would you explain the 316 search results, when the =20
> results for each single queries "Lucene" and "Query" is lesser than =20=

> 316?


We have the default operator set to AND for the QueryParser.  So =20
"Query Lucene" (without quotes) is the same as "Query AND Lucene".  =20
Explicit ORs override this default.

	Erik


>
> Jamal
>
> -----Urspr=FCngliche Nachricht-----
> Von: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Gesendet: Samstag, 17. Februar 2007 06:27
> An: java-user@lucene.apache.org
> Betreff: Re: QueryParser explicit and implicit search operator
>
>
> On Feb 16, 2007, at 1:53 PM, Karimi-Tabatabaie Jamal wrote:
>> For my problem there seems to exist a lucence Bug
>> (http://issues.apache.org/jira/browse/LUCENE-167) but also it seems
>> that
>> it's solved in the Lucene integration on site http://
>> www.lucenebook.com.
>
> Where do you see the problem solved at lucenebook.com?   The "Query
> parsed to:" for this query <http://www.lucenebook.com/search?
> query=3Daaaaa+AND+bbbbb+OR+ccccc+AND+ddddd> is
>
> 	Query parsed to: +aaaaa bbbbb +ccccc +ddddd
>
> The OR caused the "bbbbb" term to not be required, yet all other
> terms are required.
>
> 	Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 19 13:59:45 2007
Return-Path: <java-user-return-26206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71755 invoked from network); 19 Feb 2007 13:59:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2007 13:59:44 -0000
Received: (qmail 63093 invoked by uid 500); 19 Feb 2007 13:59:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62836 invoked by uid 500); 19 Feb 2007 13:59:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62825 invoked by uid 99); 19 Feb 2007 13:59:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 05:59:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 05:59:33 -0800
Received: by nf-out-0910.google.com with SMTP id i2so2211388nfe
        for <java-user@lucene.apache.org>; Mon, 19 Feb 2007 05:59:12 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=OP2GArt4yvfJ35Ih9qPSB3adFYrjBLYsmvyarm+erakVzzTUPCC1JsEyM31XbBvMgdG+afwhGwesKSXl9uNHLgI7EJbWub8B9BaV0zw8l5tOYJjo7peOj4d9pb0RjgncmrmnTFnDgdOMXwY5aQZD8mpeviiWwwxY3MLBisBhofk=
Received: by 10.49.107.8 with SMTP id j8mr5751405nfm.1171893552252;
        Mon, 19 Feb 2007 05:59:12 -0800 (PST)
Received: from ?10.0.1.12? ( [212.162.171.110])
        by mx.google.com with ESMTP id l32sm26508932nfa.2007.02.19.05.59.11;
        Mon, 19 Feb 2007 05:59:11 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <9034207.post@talk.nabble.com>
References: <9034207.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E07F203C-DC83-42E6-8418-5079302E831A@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: IndexSearcher on multi-core CPU machine
Date: Mon, 19 Feb 2007 14:57:30 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


18 feb 2007 kl. 22.52 skrev dmitri:

> With org.apache.lucene.store.MMapDirectory throughput is better but  
> I still
> have to create multiple IndexSearcher instances to have 100% CPU
> utilization.
>
> With multiple IndexSearchers search times are better under  
> multithreaded
> load.
>
> concurrent      1 searcher           5 searchers       10 searchers
> threads
> 1               180                  177               167
> 100             4887                 4056              3775

Are you using a single or multiple IndexReaders?

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 19 15:04:01 2007
Return-Path: <java-user-return-26207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97255 invoked from network); 19 Feb 2007 15:04:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2007 15:04:00 -0000
Received: (qmail 53703 invoked by uid 500); 19 Feb 2007 15:04:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53665 invoked by uid 500); 19 Feb 2007 15:04:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53653 invoked by uid 99); 19 Feb 2007 15:04:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 07:04:00 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 07:03:49 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HJA36-0001ON-GA
	for java-user@lucene.apache.org; Mon, 19 Feb 2007 07:03:28 -0800
Message-ID: <9043584.post@talk.nabble.com>
Date: Mon, 19 Feb 2007 07:03:28 -0800 (PST)
From: dmitri <evysq@mail.ru>
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher on multi-core CPU machine
In-Reply-To: <E07F203C-DC83-42E6-8418-5079302E831A@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: evysq@mail.ru
References: <9034207.post@talk.nabble.com> <E07F203C-DC83-42E6-8418-5079302E831A@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I use
-------------
searcher = new IndexSearcher(indexLocation);
-------------

So readers are created under the hood.

----
dmitri 


karl wettin-3 wrote:
> 
> 
> 18 feb 2007 kl. 22.52 skrev dmitri:
> 
>> With org.apache.lucene.store.MMapDirectory throughput is better but  
>> I still
>> have to create multiple IndexSearcher instances to have 100% CPU
>> utilization.
>>
>> With multiple IndexSearchers search times are better under  
>> multithreaded
>> load.
>>
>> concurrent      1 searcher           5 searchers       10 searchers
>> threads
>> 1               180                  177               167
>> 100             4887                 4056              3775
> 
> Are you using a single or multiple IndexReaders?
> 
> -- 
> karl
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/IndexSearcher-on-multi-core-CPU-machine-tf3249889.html#a9043584
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 19 15:12:20 2007
Return-Path: <java-user-return-26208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99411 invoked from network); 19 Feb 2007 15:12:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2007 15:12:19 -0000
Received: (qmail 67180 invoked by uid 500); 19 Feb 2007 15:12:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66179 invoked by uid 500); 19 Feb 2007 15:12:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66166 invoked by uid 99); 19 Feb 2007 15:12:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 07:12:21 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_FONT_BIG,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 217.69.20.190 as permitted sender)
Received: from [217.69.20.190] (HELO cluster-d.mailcontrol.com) (217.69.20.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 07:12:07 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly18d.srv.mailcontrol.com (MailControl) with SMTP id l1JFBcDh010722
	for <java-user@lucene.apache.org>; Mon, 19 Feb 2007 15:11:39 GMT
Received: From SGBD012104.wsatkins.com ([10.202.26.18]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 1171897877635; Mon, 19 Feb 2007 15:11:17 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012104.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 19 Feb 2007 15:11:17 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C75438.33C11990"
Subject: Fields
Date: Mon, 19 Feb 2007 15:11:15 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705DCCDE5@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Fields
Thread-Index: AcdUODM4WiYQXCjiSw6sosqRu2e1cg==
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 19 Feb 2007 15:11:17.0542 (UTC) FILETIME=[34488C60:01C75438]
X-Scanned-By: MailControl A-07-06-80 (www.mailcontrol.com) on 10.68.0.128
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C75438.33C11990
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi all,

I have a few question regarding indexing documents.

1. With my experience of indexing documents with lucene so far I have
done things like:

Doc.Add(Field.Text("album", Album));

Where Album is a string representing an album name.  Now with this sort
of indexing what I do is a search such as:

"album:Thriller"

a) Does this mean that I cannot do an search across all fields  by
submitting the query:

"Thriller"?  In other words by submitting this query would my code
search all fields?

b) Is there a way in which I can index elements of a document without
naming the field.  What would the impact of such a use of the indexing
capabilities of Lucene be?

2. Is there a limit to the number of
a) named fields per document that I can store
b) non-named fields per document that I can store

3.=20

a) Is it possible in Lucene to conduct searches that are very complex
such as:

((album =3D Thriller AND artist =3D (Michael OR Jackson)) OR (date between X
AND Y)) AND (label =3D sony OR Epic)   etc...

b) For such a query what are the performance penalties compared to a
simple search involving 1 term?

Cheers

Sachin



This email and any attached files are confidential and copyright protected.=
 If you are not the addressee, any dissemination of this communication is s=
trictly prohibited. Unless otherwise expressly agreed in writing, nothing s=
tated in this communication shall be legally binding.

The ultimate parent company of the Atkins Group is WS Atkins plc.  Register=
ed in England No. 1885586.  Registered Office Woodcote Grove, Ashley Road, =
Epsom, Surrey KT18 5BW.

Consider the environment. Please don't print this e-mail unless you really =
need to.=20

------_=_NextPart_001_01C75438.33C11990--

From java-user-return-26209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 19 15:25:15 2007
Return-Path: <java-user-return-26209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2804 invoked from network); 19 Feb 2007 15:25:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2007 15:25:14 -0000
Received: (qmail 82421 invoked by uid 500); 19 Feb 2007 15:25:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81404 invoked by uid 500); 19 Feb 2007 15:25:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81393 invoked by uid 99); 19 Feb 2007 15:25:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 07:25:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 07:25:03 -0800
Received: by nf-out-0910.google.com with SMTP id i2so2233640nfe
        for <java-user@lucene.apache.org>; Mon, 19 Feb 2007 07:24:42 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=bh+ASNZEt9ZRQLmDHAFiB/mxPPvwtFI0L8z6xVJxaRhtXUhvgxi2RThawmbSo539PYoXwL8LlYVdYX0V09qvSxkZc83kHhdcpq7sONYOcCxusHmYX2KZm7y6DrK+GdWVZy8EHIUnDqFpmJKixDrZ77J9/xzMg5a7yCAgxqV9V6E=
Received: by 10.49.64.18 with SMTP id r18mr5773868nfk.1171898682002;
        Mon, 19 Feb 2007 07:24:42 -0800 (PST)
Received: from ?10.0.1.12? ( [212.162.171.110])
        by mx.google.com with ESMTP id i1sm13014856nfe.2007.02.19.07.24.40;
        Mon, 19 Feb 2007 07:24:41 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <9043584.post@talk.nabble.com>
References: <9034207.post@talk.nabble.com> <E07F203C-DC83-42E6-8418-5079302E831A@gmail.com> <9043584.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8A0AACAC-3D62-430C-8BCE-3D867EFA2CAF@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: IndexSearcher on multi-core CPU machine
Date: Mon, 19 Feb 2007 16:22:57 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


What are the effects if you supply the same reader to IndexSearcher:s?

19 feb 2007 kl. 16.03 skrev dmitri:

>
> I use
> -------------
> searcher = new IndexSearcher(indexLocation);
> -------------
>
> So readers are created under the hood.
>
> ----
> dmitri
>
>
> karl wettin-3 wrote:
>>
>>
>> 18 feb 2007 kl. 22.52 skrev dmitri:
>>
>>> With org.apache.lucene.store.MMapDirectory throughput is better but
>>> I still
>>> have to create multiple IndexSearcher instances to have 100% CPU
>>> utilization.
>>>
>>> With multiple IndexSearchers search times are better under
>>> multithreaded
>>> load.
>>>
>>> concurrent      1 searcher           5 searchers       10 searchers
>>> threads
>>> 1               180                  177               167
>>> 100             4887                 4056              3775
>>
>> Are you using a single or multiple IndexReaders?
>>
>> --  
>> karl
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> --  
> View this message in context: http://www.nabble.com/IndexSearcher- 
> on-multi-core-CPU-machine-tf3249889.html#a9043584
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 19 15:30:52 2007
Return-Path: <java-user-return-26210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4313 invoked from network); 19 Feb 2007 15:30:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2007 15:30:51 -0000
Received: (qmail 88206 invoked by uid 500); 19 Feb 2007 15:30:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88163 invoked by uid 500); 19 Feb 2007 15:30:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88152 invoked by uid 99); 19 Feb 2007 15:30:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 07:30:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [64.233.184.225] (HELO wr-out-0506.google.com) (64.233.184.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 07:30:40 -0800
Received: by wr-out-0506.google.com with SMTP id i22so1598958wra
        for <java-user@lucene.apache.org>; Mon, 19 Feb 2007 07:30:19 -0800 (PST)
Received: by 10.90.104.14 with SMTP id b14mr7188469agc.1171899019261;
        Mon, 19 Feb 2007 07:30:19 -0800 (PST)
Received: from D2Q9FF1S ( [59.144.73.14])
        by mx.google.com with ESMTP id 38sm4819499nza.2007.02.19.07.30.17;
        Mon, 19 Feb 2007 07:30:19 -0800 (PST)
From: "Harini Raghavan" <harini.raghavan@insideview.com>
To: <java-user@lucene.apache.org>
Subject: RE: Counting term frequency without using Explanation
Date: Mon, 19 Feb 2007 21:02:19 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: AcdUOyRU4KeV5zTKTbu5teLQ4esxqg==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
In-Reply-To: 
Message-ID: <45d9c28b.03324b4d.3bd7.4fac@mx.google.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Erick,

I have a similar requirement to know the frequency of occurrence of a
keyword in a given content to find out the relevancy of the article to a set
of keywords. If the keyword is mentioned more than once in the article, then
I want to treat it as more relevant. 

Can you please point me to the threads you have mentioned?

Thanks,
Harini
 

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com] 
Sent: Wednesday, February 07, 2007 8:19 PM
To: java-user@lucene.apache.org
Subject: Re: Counting term frequency without using Explanation

Before you go too far down this path, please consider what a "hit" is. It's
more complicated than you think <G>.

If all you want to do is count up the number of times any term appears in
the document, it's not too hard. You should be able to use a
termenum/termdocs process to count them.

TermDocs should work, just seek to a term, skip to the document number
(which you'll have to get somewhere else), and keep adding to your count
while the docid is the same as your target. Repeat for each term.

But it's a much more complicated story if you want to accurately reflect a
query. For instance, consider a near query, that is terms within, say, 3 of
each other. If you do something like the above, you'll present "hits" that
aren't real. For instance...

a b c d e f g h i j a

if you search for a and c within 3 of each other, is this one hit? two? it
definitely isn't three which is what you'd get if you just counted the
occurrence of the terms a, b... What about a NOT clause? How does a phrase
query get counted?

There have been several discussions of various aspects of this issue, but
often in the context of highlighting. You'll probably get some good
information from the following threads...

Counting terms' hits from phrases
Counting hits in a document

as well as searching the archive on highlighting and/or hitcount

Best
Erick




On 2/7/07, csahat <csahat@gmail.com> wrote:
>
> Hi all,
>
>   I'm so sorry if this question already answered before in this list, 
> but I already search the list, and I couldn't find the answer.
>
>    This is what I want to do :
>
>   When the user type in the query, for example "WebSphere Java", 
> Lucene will show not only the score, but showing the term count per 
> document as well, like this
>
>   doc1    0.8333          websphere=3, Java = 2
>   doc2    0.817            websphere=2, Java=2
>
>
>   I already tried to implement with TermFreqVector, but TermFreqVector 
> show all the terms in the field, instead what I want is only the terms 
> that happen in the query.
> I already tried using TermDocs as well, but it always gave result 0.
>
>   I tried using Explanation class, using toString method, but I have 
> to "clean"
> the information.
>
>
>   Is there any "direct" way to do this in Lucene ?  Or perhaps someone 
> can give me a hint ?
>
>   Thanks in advance
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 19 15:31:54 2007
Return-Path: <java-user-return-26211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4452 invoked from network); 19 Feb 2007 15:31:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2007 15:31:53 -0000
Received: (qmail 90908 invoked by uid 500); 19 Feb 2007 15:31:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89956 invoked by uid 500); 19 Feb 2007 15:31:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89945 invoked by uid 99); 19 Feb 2007 15:31:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 07:31:54 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 07:31:42 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HJAU5-0006p0-ML
	for java-user@lucene.apache.org; Mon, 19 Feb 2007 07:31:21 -0800
Message-ID: <9044054.post@talk.nabble.com>
Date: Mon, 19 Feb 2007 07:31:21 -0800 (PST)
From: dmitri <evysq@mail.ru>
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher on multi-core CPU machine
In-Reply-To: <D5C59E88-DABB-445F-8191-F2A368F7FC22@aconex.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: evysq@mail.ru
References: <9034207.post@talk.nabble.com> <D5C59E88-DABB-445F-8191-F2A368F7FC22@aconex.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I don't think so as sorting in on integer fields
---------
dmitri



Paul Smith-2 wrote:
> 
> are you using Locale-sensitive sorting at all?
> 
> https://issues.apache.org/jira/browse/LUCENE-806
> 
> Just wondering if you're seeing the same problem we are having.
> 
> cheers,
> 
> Paul Smith
> 
> On 19/02/2007, at 8:52 AM, dmitri wrote:
> 
>>
>> We have search (no update) web app on 2 dual core CPU machine (2x  
>> Dual Core
>> AMD Opteron(tm) Processor 280) with 8G of RAM. Lucene 2.0 is used.
>> My index is optimized and non compound, 9G holding 6.5 M documents.
>> Search includes term queries, range filters and sorts.
>>
>> When I use single IndexSearcher and search with multiple threads  
>> CPU are
>> partially idle.
>>
>> To have 100% CPU utilization I have to create several IndexSearchers.
>>
>> With org.apache.lucene.store.MMapDirectory throughput is better but  
>> I still
>> have to create multiple IndexSearcher instances to have 100% CPU
>> utilization.
>>
>> With multiple IndexSearchers search times are better under  
>> multithreaded
>> load.
>> Following is average search times (in ms) for different number of  
>> parallel
>> threads and IndexSearchers:
>> concurrent  1 searcher  5 searchers 10 searchers
>> threads
>> 1                  180                   177              167
>> 2                   201                  184              174
>> 4                   241                  197              188
>> 5                  339                    236              220
>> 10                663                    454              420
>> 20              1172                    917              880
>> 50               2599                 2143            1912
>> 100             4887                 4056              3775
>> Maximum search times for smaller number of searchers differ in 2-3  
>> times.
>>
>> Search is CPU bound (no IO wait is observed).
>> Is there any way to better utilize the server other than create  
>> several
>> IndexSearchers?
>> I need to squeeze as much performance as possible out of the  
>> machine as we
>> have strict performance requirements.
>> -- 
>> View this message in context: http://www.nabble.com/IndexSearcher- 
>> on-multi-core-CPU-machine-tf3249889.html#a9034207
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> 
> 
> 
>  
> 

-- 
View this message in context: http://www.nabble.com/IndexSearcher-on-multi-core-CPU-machine-tf3249889.html#a9044054
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 19 15:32:53 2007
Return-Path: <java-user-return-26212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4703 invoked from network); 19 Feb 2007 15:32:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2007 15:32:52 -0000
Received: (qmail 92151 invoked by uid 500); 19 Feb 2007 15:32:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92116 invoked by uid 500); 19 Feb 2007 15:32:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92096 invoked by uid 99); 19 Feb 2007 15:32:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 07:32:50 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Jamal.Karimi@cursor.de designates 213.240.191.82 as permitted sender)
Received: from [213.240.191.82] (HELO mail.cursor.de) (213.240.191.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 07:32:40 -0800
Received: from localhost (localhost [127.0.0.1])
	by mail.cursor.de (Postfix) with ESMTP id 6FAA0434083
	for <java-user@lucene.apache.org>; Mon, 19 Feb 2007 16:32:21 +0100 (CET)
Received: from mail.cursor.de ([127.0.0.1])
	by localhost (mail.cursor.de [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 13392-09 for <java-user@lucene.apache.org>;
	Mon, 19 Feb 2007 16:32:14 +0100 (CET)
Received: from elektra.cursor.de (elektra.cursor.de [10.0.0.11])
	by mail.cursor.de (Postfix) with ESMTP id DB1BD434064
	for <java-user@lucene.apache.org>; Mon, 19 Feb 2007 16:32:14 +0100 (CET)
Content-class: urn:content-classes:message
Subject: AW: QueryParser explicit and implicit search operator
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Date: Mon, 19 Feb 2007 16:32:10 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Message-ID: <DD85A66A3EC15A48A90B24F725A2FDCF70B634@elektra.cursor.de>
In-Reply-To: <359a92830702190545u665498d6m2486a20259eabf01@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: QueryParser explicit and implicit search operator
thread-index: AcdULFDFRiSjvYsIQset244uM9vMBgADNnBA
From: "Karimi-Tabatabaie Jamal" <Jamal.Karimi@cursor.de>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Exactly.=20

That means that  last query "Lucene OR Query" must be parsed correct to =
"Lucene query" with the OR operator while default operator is set to =
AND. Right?

But in my implementation with default operator set to AND the query =
'Hare OR Tortoise' is parsed to 'Hare AND Tortoise'!

Regards,
Jamal
-----Urspr=FCngliche Nachricht-----
Von: Erick Erickson [mailto:erickerickson@gmail.com]=20
Gesendet: Montag, 19. Februar 2007 14:45
An: java-user@lucene.apache.org
Betreff: Re: QueryParser explicit and implicit search operator

<<<How else would you explain the 316 search results, when the results =
for
each single queries "Lucene" and "Query" is lesser than 316?>>>
Because some documents contain "Lucene" but not "Query" and vice-versa.

These results look perfectly reasonable to me too. The default operator =
is
AND, which is why queries 3 and 4 return the same results.

When you query on "Query" you get some number of documents (109 to be =
exact)
that ALSO contain "Lucene". The reverse is also true, when you query
"Lucene", 109 of those documents also contain "Query".

So, if you subtract 109 (look familiar?) from the sum of the individual
queries for Lucene and Query, you get 316 (155 + 270 - 109) which is =
exactly
what you get from "Lucene OR Query". All fine from my perspective.

Best
Erick

On 2/19/07, Karimi-Tabatabaie Jamal <Jamal.Karimi@cursor.de> wrote:
>
> Hello Erik,
>
> You are right for a little complex query. I tested  the following =
queries
>
> serach at lucenebool.com with query "Query" 155 results
> serach at lucenebool.com with query "Lucene" 270 results
> serach at lucenebool.com with query "Query AND Lucene" 109 results
> serach at lucenebool.com with query "Query Lucene" 109 results
> serach at lucenebool.com with query "Query OR Lucene" 316 results
>
> and came to the guess that it seems to be fixed for a query like "X OR =
Y"!
> How else would you explain the 316 search results, when the results =
for each
> single queries "Lucene" and "Query" is lesser than 316?
>
> Jamal
>
> -----Urspr=FCngliche Nachricht-----
> Von: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Gesendet: Samstag, 17. Februar 2007 06:27
> An: java-user@lucene.apache.org
> Betreff: Re: QueryParser explicit and implicit search operator
>
>
> On Feb 16, 2007, at 1:53 PM, Karimi-Tabatabaie Jamal wrote:
> > For my problem there seems to exist a lucence Bug
> > (http://issues.apache.org/jira/browse/LUCENE-167) but also it seems
> > that
> > it's solved in the Lucene integration on site http://
> > www.lucenebook.com.
>
> Where do you see the problem solved at lucenebook.com?   The "Query
> parsed to:" for this query <http://www.lucenebook.com/search?
> query=3Daaaaa+AND+bbbbb+OR+ccccc+AND+ddddd> is
>
>         Query parsed to: +aaaaa bbbbb +ccccc +ddddd
>
> The OR caused the "bbbbb" term to not be required, yet all other
> terms are required.
>
>         Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 19 15:33:45 2007
Return-Path: <java-user-return-26213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4892 invoked from network); 19 Feb 2007 15:33:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2007 15:33:45 -0000
Received: (qmail 94626 invoked by uid 500); 19 Feb 2007 15:33:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94344 invoked by uid 500); 19 Feb 2007 15:33:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94333 invoked by uid 99); 19 Feb 2007 15:33:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 07:33:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 07:33:33 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HJAVq-0007Lq-JU
	for java-user@lucene.apache.org; Mon, 19 Feb 2007 07:33:10 -0800
Message-ID: <9044066.post@talk.nabble.com>
Date: Mon, 19 Feb 2007 07:33:10 -0800 (PST)
From: dmitri <evysq@mail.ru>
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher on multi-core CPU machine
In-Reply-To: <8A0AACAC-3D62-430C-8BCE-3D867EFA2CAF@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: evysq@mail.ru
References: <9034207.post@talk.nabble.com> <E07F203C-DC83-42E6-8418-5079302E831A@gmail.com> <9043584.post@talk.nabble.com> <8A0AACAC-3D62-430C-8BCE-3D867EFA2CAF@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I haven't tried using several IndexSearchers over a single IndexReader.
Do you think it can help?
-------------------
dmitri


karl wettin-3 wrote:
> 
> 
> What are the effects if you supply the same reader to IndexSearcher:s?
> 
> 19 feb 2007 kl. 16.03 skrev dmitri:
> 
>>
>> I use
>> -------------
>> searcher = new IndexSearcher(indexLocation);
>> -------------
>>
>> So readers are created under the hood.
>>
>> ----
>> dmitri
>>
>>
>> karl wettin-3 wrote:
>>>
>>>
>>> 18 feb 2007 kl. 22.52 skrev dmitri:
>>>
>>>> With org.apache.lucene.store.MMapDirectory throughput is better but
>>>> I still
>>>> have to create multiple IndexSearcher instances to have 100% CPU
>>>> utilization.
>>>>
>>>> With multiple IndexSearchers search times are better under
>>>> multithreaded
>>>> load.
>>>>
>>>> concurrent      1 searcher           5 searchers       10 searchers
>>>> threads
>>>> 1               180                  177               167
>>>> 100             4887                 4056              3775
>>>
>>> Are you using a single or multiple IndexReaders?
>>>
>>> --  
>>> karl
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>> --  
>> View this message in context: http://www.nabble.com/IndexSearcher- 
>> on-multi-core-CPU-machine-tf3249889.html#a9043584
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/IndexSearcher-on-multi-core-CPU-machine-tf3249889.html#a9044066
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 19 15:41:07 2007
Return-Path: <java-user-return-26214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6771 invoked from network); 19 Feb 2007 15:41:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2007 15:41:06 -0000
Received: (qmail 9425 invoked by uid 500); 19 Feb 2007 15:41:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9019 invoked by uid 500); 19 Feb 2007 15:41:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9005 invoked by uid 99); 19 Feb 2007 15:41:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 07:41:07 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 07:40:55 -0800
Received: by nf-out-0910.google.com with SMTP id i2so2237503nfe
        for <java-user@lucene.apache.org>; Mon, 19 Feb 2007 07:40:34 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=GVMdDV2B72LlMzwjJUMlBVne6H4O9YKtZXmbs+Lxt1U3QIjMAVdvXsIq3OweOmG4bYvG7Bkb1Y5Czs/5K+FtKZr3NBMXWTjAqgZ3kNa3Yu/oY/JzrKgbmZ5XmhRMa1Y4SRMX7ZSg+jUkEy1mdavJBxCsqBrXyABQwHZ8SRcTUT8=
Received: by 10.48.204.7 with SMTP id b7mr5800730nfg.1171899634148;
        Mon, 19 Feb 2007 07:40:34 -0800 (PST)
Received: from ?10.0.1.12? ( [212.162.171.110])
        by mx.google.com with ESMTP id l32sm26893248nfa.2007.02.19.07.40.33;
        Mon, 19 Feb 2007 07:40:33 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <9044066.post@talk.nabble.com>
References: <9034207.post@talk.nabble.com> <E07F203C-DC83-42E6-8418-5079302E831A@gmail.com> <9043584.post@talk.nabble.com> <8A0AACAC-3D62-430C-8BCE-3D867EFA2CAF@gmail.com> <9044066.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <D7B69532-4CBF-4B49-87F8-80267BD419ED@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: IndexSearcher on multi-core CPU machine
Date: Mon, 19 Feb 2007 16:38:52 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

I don't know. But I'm curious about the results.

19 feb 2007 kl. 16.33 skrev dmitri:

>
> I haven't tried using several IndexSearchers over a single  
> IndexReader.
> Do you think it can help?
> -------------------
> dmitri
>
>
> karl wettin-3 wrote:
>>
>>
>> What are the effects if you supply the same reader to  
>> IndexSearcher:s?
>>
>> 19 feb 2007 kl. 16.03 skrev dmitri:
>>
>>>
>>> I use
>>> -------------
>>> searcher = new IndexSearcher(indexLocation);
>>> -------------
>>>
>>> So readers are created under the hood.
>>>
>>> ----
>>> dmitri
>>>
>>>
>>> karl wettin-3 wrote:
>>>>
>>>>
>>>> 18 feb 2007 kl. 22.52 skrev dmitri:
>>>>
>>>>> With org.apache.lucene.store.MMapDirectory throughput is better  
>>>>> but
>>>>> I still
>>>>> have to create multiple IndexSearcher instances to have 100% CPU
>>>>> utilization.
>>>>>
>>>>> With multiple IndexSearchers search times are better under
>>>>> multithreaded
>>>>> load.
>>>>>
>>>>> concurrent      1 searcher           5 searchers       10  
>>>>> searchers
>>>>> threads
>>>>> 1               180                  177               167
>>>>> 100             4887                 4056              3775
>>>>
>>>> Are you using a single or multiple IndexReaders?
>>>>
>>>> --  
>>>> karl
>>>>
>>>> ------------------------------------------------------------------- 
>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>
>>> --  
>>> View this message in context: http://www.nabble.com/IndexSearcher-
>>> on-multi-core-CPU-machine-tf3249889.html#a9043584
>>> Sent from the Lucene - Java Users mailing list archive at  
>>> Nabble.com.
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/IndexSearcher- 
> on-multi-core-CPU-machine-tf3249889.html#a9044066
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 19 16:05:41 2007
Return-Path: <java-user-return-26215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13771 invoked from network); 19 Feb 2007 16:05:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2007 16:05:40 -0000
Received: (qmail 38400 invoked by uid 500); 19 Feb 2007 16:05:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38372 invoked by uid 500); 19 Feb 2007 16:05:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38361 invoked by uid 99); 19 Feb 2007 16:05:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 08:05:41 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 08:05:30 -0800
Received: by nf-out-0910.google.com with SMTP id i2so2243383nfe
        for <java-user@lucene.apache.org>; Mon, 19 Feb 2007 08:05:09 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=HKGZziKpOzRr4xx+ER4y7xCnI308XVrhrH3Hp31FRHCiC3VobhgTcm7cK81GGZUSZ/FcAp9khNrvjhNIUKVyzQaNoNRiL1UiZDM0IPBWd+rOMJqKDEevxZq9Wa91ZqhTVNDtcFfpeeIAk3RjLqV0dwcxvJeMjN1gMLX69J8JJW8=
Received: by 10.82.177.3 with SMTP id z3mr11074856bue.1171901108878;
        Mon, 19 Feb 2007 08:05:08 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Mon, 19 Feb 2007 08:05:08 -0800 (PST)
Message-ID: <359a92830702190805s352a055ct13a6a7418f2e6f65@mail.gmail.com>
Date: Mon, 19 Feb 2007 11:05:08 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Fields
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705DCCDE5@SGBLOW2101.wsatkins.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_38280_26919114.1171901108600"
References: <BC1CFC544422CB4A934908E126A4742705DCCDE5@SGBLOW2101.wsatkins.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_38280_26919114.1171901108600
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See below.

On 2/19/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
>
> Hi all,
>
> I have a few question regarding indexing documents.
>
> 1. With my experience of indexing documents with lucene so far I have
> done things like:
>
> Doc.Add(Field.Text("album", Album));
>
> Where Album is a string representing an album name.  Now with this sort
> of indexing what I do is a search such as:
>
> "album:Thriller"
>
> a) Does this mean that I cannot do an search across all fields  by
> submitting the query:
>
> "Thriller"?  In other words by submitting this query would my code
> search all fields?


No. If you just submit "Thriller", you'll only search the default field. See
QueryParser for the default field.


b) Is there a way in which I can index elements of a document without
> naming the field.  What would the impact of such a use of the indexing
> capabilities of Lucene be?


I don't think this makes sense in Lucene terms. All elements in a document
have a field. You can index everything into one field if you need an
aggregate, which gives you this same result.

Do note, however, that there's no requirement that all documents have the
same fields.


2. Is there a limit to the number of
> a) named fields per document that I can store


I think there is, but it's absurdly high. Don't worry about this....


b) non-named fields per document that I can store


0 since I don't think you can.


3.
>
> a) Is it possible in Lucene to conduct searches that are very complex
> such as:
>
> ((album = Thriller AND artist = (Michael OR Jackson)) OR (date between X
> AND Y)) AND (label = sony OR Epic)   etc...


Yes


b) For such a query what are the performance penalties compared to a
> simple search involving 1 term?


In the immortal words of Mr. Hatcher.. .it depends. You'll really just have
to experiment and find out. It can probably be approximated by taking the
sum of the individual queries as the upper limit. The real killer is
wildcards..... The real question isn't "what is the effect on performance",
it's "is the performance good enough for my application". Which varies as
the characteristics of the database change.

I would argue that a 1M index will process arbitrarily complex queries "fast
enough". The same may not be true for a 100G index. So this question is
really unanswerable in the abstract.


Cheers
>
> Sachin
>
>
>
> This email and any attached files are confidential and copyright
> protected. If you are not the addressee, any dissemination of this
> communication is strictly prohibited. Unless otherwise expressly agreed in
> writing, nothing stated in this communication shall be legally binding.
>
> The ultimate parent company of the Atkins Group is WS Atkins
> plc.  Registered in England No. 1885586.  Registered Office Woodcote Grove,
> Ashley Road, Epsom, Surrey KT18 5BW.
>
> Consider the environment. Please don't print this e-mail unless you really
> need to.
>

------=_Part_38280_26919114.1171901108600--

From java-user-return-26216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 19 16:10:03 2007
Return-Path: <java-user-return-26216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15520 invoked from network); 19 Feb 2007 16:10:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2007 16:10:02 -0000
Received: (qmail 46959 invoked by uid 500); 19 Feb 2007 16:10:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46918 invoked by uid 500); 19 Feb 2007 16:10:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46907 invoked by uid 99); 19 Feb 2007 16:10:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 08:10:00 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 08:09:48 -0800
Received: by nf-out-0910.google.com with SMTP id i2so2244429nfe
        for <java-user@lucene.apache.org>; Mon, 19 Feb 2007 08:09:26 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=TteXwgd6c9E8WBHv9GlLlPdtBRBWkwFD94K9lbpGtcvuLUZbcCFiA5PxriRfGKVl2nFm3r/aFUeQG9IHiZj//AmtnO79sypCZh5urxsUzrUQwTdrya0NEjaklmaHStqExtInlPL8ThXvAHVl55ZUwPgPQkz6XvZWZtKGkYkVUg4=
Received: by 10.82.114.3 with SMTP id m3mr11120922buc.1171901366145;
        Mon, 19 Feb 2007 08:09:26 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Mon, 19 Feb 2007 08:09:25 -0800 (PST)
Message-ID: <359a92830702190809m429362eehae6bea7d77b6ff4b@mail.gmail.com>
Date: Mon, 19 Feb 2007 11:09:25 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Counting term frequency without using Explanation
In-Reply-To: <45d9c28b.03324b4d.3bd7.4fac@mx.google.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_38340_1381597.1171901365904"
References: <45d9c28b.03324b4d.3bd7.4fac@mx.google.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_38340_1381597.1171901365904
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Just search the mail archives for the threads mentioned... start at
...http://www.gossamer-threads.com/lists/lucene/java-user/


But if all you want to do is count terms, see the termdocs/termenum classes
in the Lucene api...

But I believe that term frequency is *already* part of the relevance
calculation provided out of the box. Are you sure that the default relevancy
calculations aren't already doing this for you?

Best
Erick

On 2/19/07, Harini Raghavan <harini.raghavan@insideview.com> wrote:
>
> Hi Erick,
>
> I have a similar requirement to know the frequency of occurrence of a
> keyword in a given content to find out the relevancy of the article to a
> set
> of keywords. If the keyword is mentioned more than once in the article,
> then
> I want to treat it as more relevant.
>
> Can you please point me to the threads you have mentioned?
>
> Thanks,
> Harini
>
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Wednesday, February 07, 2007 8:19 PM
> To: java-user@lucene.apache.org
> Subject: Re: Counting term frequency without using Explanation
>
> Before you go too far down this path, please consider what a "hit" is.
> It's
> more complicated than you think <G>.
>
> If all you want to do is count up the number of times any term appears in
> the document, it's not too hard. You should be able to use a
> termenum/termdocs process to count them.
>
> TermDocs should work, just seek to a term, skip to the document number
> (which you'll have to get somewhere else), and keep adding to your count
> while the docid is the same as your target. Repeat for each term.
>
> But it's a much more complicated story if you want to accurately reflect a
> query. For instance, consider a near query, that is terms within, say, 3
> of
> each other. If you do something like the above, you'll present "hits" that
> aren't real. For instance...
>
> a b c d e f g h i j a
>
> if you search for a and c within 3 of each other, is this one hit? two? it
> definitely isn't three which is what you'd get if you just counted the
> occurrence of the terms a, b... What about a NOT clause? How does a phrase
> query get counted?
>
> There have been several discussions of various aspects of this issue, but
> often in the context of highlighting. You'll probably get some good
> information from the following threads...
>
> Counting terms' hits from phrases
> Counting hits in a document
>
> as well as searching the archive on highlighting and/or hitcount
>
> Best
> Erick
>
>
>
>
> On 2/7/07, csahat <csahat@gmail.com> wrote:
> >
> > Hi all,
> >
> >   I'm so sorry if this question already answered before in this list,
> > but I already search the list, and I couldn't find the answer.
> >
> >    This is what I want to do :
> >
> >   When the user type in the query, for example "WebSphere Java",
> > Lucene will show not only the score, but showing the term count per
> > document as well, like this
> >
> >   doc1    0.8333          websphere=3, Java = 2
> >   doc2    0.817            websphere=2, Java=2
> >
> >
> >   I already tried to implement with TermFreqVector, but TermFreqVector
> > show all the terms in the field, instead what I want is only the terms
> > that happen in the query.
> > I already tried using TermDocs as well, but it always gave result 0.
> >
> >   I tried using Explanation class, using toString method, but I have
> > to "clean"
> > the information.
> >
> >
> >   Is there any "direct" way to do this in Lucene ?  Or perhaps someone
> > can give me a hint ?
> >
> >   Thanks in advance
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_38340_1381597.1171901365904--

From java-user-return-26217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 19 16:15:41 2007
Return-Path: <java-user-return-26217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18053 invoked from network); 19 Feb 2007 16:15:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2007 16:15:40 -0000
Received: (qmail 59811 invoked by uid 500); 19 Feb 2007 16:15:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59780 invoked by uid 500); 19 Feb 2007 16:15:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59766 invoked by uid 99); 19 Feb 2007 16:15:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 08:15:42 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 217.69.20.190 as permitted sender)
Received: from [217.69.20.190] (HELO cluster-d.mailcontrol.com) (217.69.20.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 08:15:28 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly14d.srv.mailcontrol.com (MailControl) with SMTP id l1JGF5fj009503
	for <java-user@lucene.apache.org>; Mon, 19 Feb 2007 16:15:05 GMT
Received: From SGBD012103.wsatkins.com ([10.202.26.17]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 1171901689670; Mon, 19 Feb 2007 16:14:49 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012103.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 19 Feb 2007 16:14:49 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Fields
Date: Mon, 19 Feb 2007 16:14:48 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705DCD09D@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Fields
Thread-Index: AcdUP9meWDbjmhuqSFuugiTZItjtiAAANrBw
References: <BC1CFC544422CB4A934908E126A4742705DCCDE5@SGBLOW2101.wsatkins.com> <359a92830702190805s352a055ct13a6a7418f2e6f65@mail.gmail.com>
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 19 Feb 2007 16:14:49.0215 (UTC) FILETIME=[1437B0F0:01C75441]
X-Scanned-By: MailControl A-07-06-85 (www.mailcontrol.com) on 10.68.0.124
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Erik,

I looked at the QueryParser API doc but I can't seem to find what the
default field is. Also, how would the syntax of the index code differ
when indexing a word to the default field from this:

Doc.Add(Field.Text("album", Album));

Cheers

Sachin

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: 19 February 2007 16:05
To: java-user@lucene.apache.org
Subject: Re: Fields

See below.

On 2/19/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
>
> Hi all,
>
> I have a few question regarding indexing documents.
>
> 1. With my experience of indexing documents with lucene so far I have=20
> done things like:
>
> Doc.Add(Field.Text("album", Album));
>
> Where Album is a string representing an album name.  Now with this=20
> sort of indexing what I do is a search such as:
>
> "album:Thriller"
>
> a) Does this mean that I cannot do an search across all fields  by=20
> submitting the query:
>
> "Thriller"?  In other words by submitting this query would my code=20
> search all fields?


No. If you just submit "Thriller", you'll only search the default field.
See QueryParser for the default field.


b) Is there a way in which I can index elements of a document without
> naming the field.  What would the impact of such a use of the indexing

> capabilities of Lucene be?


I don't think this makes sense in Lucene terms. All elements in a
document have a field. You can index everything into one field if you
need an aggregate, which gives you this same result.

Do note, however, that there's no requirement that all documents have
the same fields.


2. Is there a limit to the number of
> a) named fields per document that I can store


I think there is, but it's absurdly high. Don't worry about this....


b) non-named fields per document that I can store


0 since I don't think you can.


3.
>
> a) Is it possible in Lucene to conduct searches that are very complex=20
> such as:
>
> ((album =3D Thriller AND artist =3D (Michael OR Jackson)) OR (date =
between
X
> AND Y)) AND (label =3D sony OR Epic)   etc...


Yes


b) For such a query what are the performance penalties compared to a
> simple search involving 1 term?


In the immortal words of Mr. Hatcher.. .it depends. You'll really just
have to experiment and find out. It can probably be approximated by
taking the sum of the individual queries as the upper limit. The real
killer is wildcards..... The real question isn't "what is the effect on
performance", it's "is the performance good enough for my application".
Which varies as the characteristics of the database change.

I would argue that a 1M index will process arbitrarily complex queries
"fast enough". The same may not be true for a 100G index. So this
question is really unanswerable in the abstract.


Cheers
>
> Sachin
>
>
>
> This email and any attached files are confidential and copyright=20
> protected. If you are not the addressee, any dissemination of this=20
> communication is strictly prohibited. Unless otherwise expressly=20
> agreed in writing, nothing stated in this communication shall be
legally binding.
>
> The ultimate parent company of the Atkins Group is WS Atkins plc. =20
> Registered in England No. 1885586.  Registered Office Woodcote Grove,=20
> Ashley Road, Epsom, Surrey KT18 5BW.
>
> Consider the environment. Please don't print this e-mail unless you=20
> really need to.
>


This message has been scanned for viruses by MailControl - (see
http://bluepages.wsatkins.co.uk/?6875772)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 19 16:17:15 2007
Return-Path: <java-user-return-26218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19244 invoked from network); 19 Feb 2007 16:17:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2007 16:17:14 -0000
Received: (qmail 64241 invoked by uid 500); 19 Feb 2007 16:17:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64212 invoked by uid 500); 19 Feb 2007 16:17:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64084 invoked by uid 99); 19 Feb 2007 16:17:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 08:17:13 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 08:17:01 -0800
Received: by ug-out-1314.google.com with SMTP id k40so594278ugc
        for <java-user@lucene.apache.org>; Mon, 19 Feb 2007 08:16:39 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kvWSeVFaEkaiDrnOPsBeVB16asKxODKibp5bEKETbHkVw3SaBxmtcFj9fNdkymejCVwNLqWxySw/bwXjQxmcdjVbsEBbALFVFiaPjLJMl93Na5nNVJBj+BoJtuGoFI/lqT5MnTzsoATGcSptCcOe1KI4brBmI4VFc2GxEeIuFG0=
Received: by 10.82.114.3 with SMTP id m3mr11150114buc.1171901798994;
        Mon, 19 Feb 2007 08:16:38 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Mon, 19 Feb 2007 08:16:38 -0800 (PST)
Message-ID: <359a92830702190816q7bdb0e8pb6f199c0424034b1@mail.gmail.com>
Date: Mon, 19 Feb 2007 11:16:38 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: QueryParser explicit and implicit search operator
In-Reply-To: <DD85A66A3EC15A48A90B24F725A2FDCF70B634@elektra.cursor.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_38552_20636225.1171901798932"
References: <359a92830702190545u665498d6m2486a20259eabf01@mail.gmail.com>
	 <DD85A66A3EC15A48A90B24F725A2FDCF70B634@elektra.cursor.de>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_38552_20636225.1171901798932
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

You still haven't provided the data. Here's what Mr. Hatcher needs you to
do.

Provide a very short program that demonstrates this. It should parse a quer=
y
and print out the parsed query using ToString. For instance, are you
lowercasing the query before parsing? In which case or is not treated as an
operator, but a term.

We can keep going back and forth only to discover that you are not providin=
g
complete information. Or we're assuming something you aren't. or.... the
10,000 ways we can talk past each other without providing crucial
information.

So, please provide a short, self-contained program that demonstrates the
problem and I'm sure Mr. Hatcher will provide an answer in a trice.

I'm going to guess that you won't be able to do this, and in the process
you'll discover that you did something like... instantiated a new
QueryParser and didn't set the default operator as you think. Or lowercased
the query. Or set the default operator on a different QueryParser than you
actually used. Or......

Best
Erick

On 2/19/07, Karimi-Tabatabaie Jamal <Jamal.Karimi@cursor.de> wrote:
>
> Exactly.
>
> That means that  last query "Lucene OR Query" must be parsed correct to
> "Lucene query" with the OR operator while default operator is set to AND.
> Right?
>
> But in my implementation with default operator set to AND the query 'Hare
> OR Tortoise' is parsed to 'Hare AND Tortoise'!
>
> Regards,
> Jamal
> -----Urspr=FCngliche Nachricht-----
> Von: Erick Erickson [mailto:erickerickson@gmail.com]
> Gesendet: Montag, 19. Februar 2007 14:45
> An: java-user@lucene.apache.org
> Betreff: Re: QueryParser explicit and implicit search operator
>
> <<<How else would you explain the 316 search results, when the results fo=
r
> each single queries "Lucene" and "Query" is lesser than 316?>>>
> Because some documents contain "Lucene" but not "Query" and vice-versa.
>
> These results look perfectly reasonable to me too. The default operator i=
s
> AND, which is why queries 3 and 4 return the same results.
>
> When you query on "Query" you get some number of documents (109 to be
> exact)
> that ALSO contain "Lucene". The reverse is also true, when you query
> "Lucene", 109 of those documents also contain "Query".
>
> So, if you subtract 109 (look familiar?) from the sum of the individual
> queries for Lucene and Query, you get 316 (155 + 270 - 109) which is
> exactly
> what you get from "Lucene OR Query". All fine from my perspective.
>
> Best
> Erick
>
> On 2/19/07, Karimi-Tabatabaie Jamal <Jamal.Karimi@cursor.de> wrote:
> >
> > Hello Erik,
> >
> > You are right for a little complex query. I tested  the following
> queries
> >
> > serach at lucenebool.com with query "Query" 155 results
> > serach at lucenebool.com with query "Lucene" 270 results
> > serach at lucenebool.com with query "Query AND Lucene" 109 results
> > serach at lucenebool.com with query "Query Lucene" 109 results
> > serach at lucenebool.com with query "Query OR Lucene" 316 results
> >
> > and came to the guess that it seems to be fixed for a query like "X OR
> Y"!
> > How else would you explain the 316 search results, when the results for
> each
> > single queries "Lucene" and "Query" is lesser than 316?
> >
> > Jamal
> >
> > -----Urspr=FCngliche Nachricht-----
> > Von: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> > Gesendet: Samstag, 17. Februar 2007 06:27
> > An: java-user@lucene.apache.org
> > Betreff: Re: QueryParser explicit and implicit search operator
> >
> >
> > On Feb 16, 2007, at 1:53 PM, Karimi-Tabatabaie Jamal wrote:
> > > For my problem there seems to exist a lucence Bug
> > > (http://issues.apache.org/jira/browse/LUCENE-167) but also it seems
> > > that
> > > it's solved in the Lucene integration on site http://
> > > www.lucenebook.com.
> >
> > Where do you see the problem solved at lucenebook.com?   The "Query
> > parsed to:" for this query <http://www.lucenebook.com/search?
> > query=3Daaaaa+AND+bbbbb+OR+ccccc+AND+ddddd> is
> >
> >         Query parsed to: +aaaaa bbbbb +ccccc +ddddd
> >
> > The OR caused the "bbbbb" term to not be required, yet all other
> > terms are required.
> >
> >         Erik
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_38552_20636225.1171901798932--

From java-user-return-26219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 19 16:19:04 2007
Return-Path: <java-user-return-26219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19654 invoked from network); 19 Feb 2007 16:19:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2007 16:19:02 -0000
Received: (qmail 67991 invoked by uid 500); 19 Feb 2007 16:19:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67860 invoked by uid 500); 19 Feb 2007 16:19:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67849 invoked by uid 99); 19 Feb 2007 16:19:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 08:19:03 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 08:18:52 -0800
Received: by nf-out-0910.google.com with SMTP id i2so2246757nfe
        for <java-user@lucene.apache.org>; Mon, 19 Feb 2007 08:18:31 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qxKsMnJoEEsvZF5NdxN4/+9u0mU+3r884Tv2lAyYibc/HxKL7SqlVBeimo3qqYq6Rsl48d17uQtfuyso+fcabGQ4PabFpWsXnMBluIQqGsFCswxBqmtiihH27Mn02EPes8m9JCJD9/1v4J6J6+sERcuP05XS3Dsj0v4tHQOkkxU=
Received: by 10.82.107.15 with SMTP id f15mr11150675buc.1171901911095;
        Mon, 19 Feb 2007 08:18:31 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Mon, 19 Feb 2007 08:18:30 -0800 (PST)
Message-ID: <359a92830702190818p6e994dj7e79c7156883db40@mail.gmail.com>
Date: Mon, 19 Feb 2007 11:18:30 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Fields
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705DCD09D@SGBLOW2101.wsatkins.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_38596_20693874.1171901910976"
References: <BC1CFC544422CB4A934908E126A4742705DCCDE5@SGBLOW2101.wsatkins.com>
	 <359a92830702190805s352a055ct13a6a7418f2e6f65@mail.gmail.com>
	 <BC1CFC544422CB4A934908E126A4742705DCD09D@SGBLOW2101.wsatkins.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_38596_20693874.1171901910976
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

It's whatever you set it to. From the API...

QueryParser

public *QueryParser*(String
<http://java.sun.com/j2se/1.4/docs/api/java/lang/String.html> f,
                   Analyzer
<file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/analysis/Analyzer.html>
a)

Constructs a query parser.

*Parameters:*f - the default field for query terms.a - used to find terms in
the query text.

Note: this is the 2.1 API (idential to 2.0 as I remember).


On 2/19/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
>
> Hi Erik,
>
> I looked at the QueryParser API doc but I can't seem to find what the
> default field is. Also, how would the syntax of the index code differ
> when indexing a word to the default field from this:
>
> Doc.Add(Field.Text("album", Album));
>
> Cheers
>
> Sachin
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: 19 February 2007 16:05
> To: java-user@lucene.apache.org
> Subject: Re: Fields
>
> See below.
>
> On 2/19/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
> >
> > Hi all,
> >
> > I have a few question regarding indexing documents.
> >
> > 1. With my experience of indexing documents with lucene so far I have
> > done things like:
> >
> > Doc.Add(Field.Text("album", Album));
> >
> > Where Album is a string representing an album name.  Now with this
> > sort of indexing what I do is a search such as:
> >
> > "album:Thriller"
> >
> > a) Does this mean that I cannot do an search across all fields  by
> > submitting the query:
> >
> > "Thriller"?  In other words by submitting this query would my code
> > search all fields?
>
>
> No. If you just submit "Thriller", you'll only search the default field.
> See QueryParser for the default field.
>
>
> b) Is there a way in which I can index elements of a document without
> > naming the field.  What would the impact of such a use of the indexing
>
> > capabilities of Lucene be?
>
>
> I don't think this makes sense in Lucene terms. All elements in a
> document have a field. You can index everything into one field if you
> need an aggregate, which gives you this same result.
>
> Do note, however, that there's no requirement that all documents have
> the same fields.
>
>
> 2. Is there a limit to the number of
> > a) named fields per document that I can store
>
>
> I think there is, but it's absurdly high. Don't worry about this....
>
>
> b) non-named fields per document that I can store
>
>
> 0 since I don't think you can.
>
>
> 3.
> >
> > a) Is it possible in Lucene to conduct searches that are very complex
> > such as:
> >
> > ((album = Thriller AND artist = (Michael OR Jackson)) OR (date between
> X
> > AND Y)) AND (label = sony OR Epic)   etc...
>
>
> Yes
>
>
> b) For such a query what are the performance penalties compared to a
> > simple search involving 1 term?
>
>
> In the immortal words of Mr. Hatcher.. .it depends. You'll really just
> have to experiment and find out. It can probably be approximated by
> taking the sum of the individual queries as the upper limit. The real
> killer is wildcards..... The real question isn't "what is the effect on
> performance", it's "is the performance good enough for my application".
> Which varies as the characteristics of the database change.
>
> I would argue that a 1M index will process arbitrarily complex queries
> "fast enough". The same may not be true for a 100G index. So this
> question is really unanswerable in the abstract.
>
>
> Cheers
> >
> > Sachin
> >
> >
> >
> > This email and any attached files are confidential and copyright
> > protected. If you are not the addressee, any dissemination of this
> > communication is strictly prohibited. Unless otherwise expressly
> > agreed in writing, nothing stated in this communication shall be
> legally binding.
> >
> > The ultimate parent company of the Atkins Group is WS Atkins plc.
> > Registered in England No. 1885586.  Registered Office Woodcote Grove,
> > Ashley Road, Epsom, Surrey KT18 5BW.
> >
> > Consider the environment. Please don't print this e-mail unless you
> > really need to.
> >
>
>
> This message has been scanned for viruses by MailControl - (see
> http://bluepages.wsatkins.co.uk/?6875772)
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_38596_20693874.1171901910976--

From java-user-return-26220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 19 16:46:08 2007
Return-Path: <java-user-return-26220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29621 invoked from network); 19 Feb 2007 16:46:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2007 16:46:07 -0000
Received: (qmail 15481 invoked by uid 500); 19 Feb 2007 16:46:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15444 invoked by uid 500); 19 Feb 2007 16:46:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15433 invoked by uid 99); 19 Feb 2007 16:46:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 08:46:07 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 08:45:57 -0800
Received: by nf-out-0910.google.com with SMTP id i2so2253456nfe
        for <java-user@lucene.apache.org>; Mon, 19 Feb 2007 08:45:36 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=MjKKeQEq+30QJEDIm8iYKWqcIGo1sLNf4F+KGpdaVUTnfBYiuHdLh+dkj5UdxMMM+ZRx31xAKlXupZGjXtQ2JKXCD6ugAAMdbo6SmRbwuWX7lFWSt8otQF6qSsCVENPcy+8cYfU4DTA1/RgBxCLlU0t/Ng9rY4SXKsMpBDcR1CE=
Received: by 10.82.177.3 with SMTP id z3mr11147928bue.1171903536164;
        Mon, 19 Feb 2007 08:45:36 -0800 (PST)
Received: by 10.82.106.19 with HTTP; Mon, 19 Feb 2007 08:45:36 -0800 (PST)
Message-ID: <c68e39170702190845g4e30cc1fw13e7959cfe1a392a@mail.gmail.com>
Date: Mon, 19 Feb 2007 11:45:36 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: NO_NORMS and TOKENIZED?
In-Reply-To: <3F2DFC4E-581A-44AC-B51A-CAFC9B2973B8@rectangular.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20070126195010.90762.qmail@web50305.mail.yahoo.com>
	 <20070215150143.GA16525@fermat.math.technion.ac.il>
	 <c68e39170702151320g546790b4qb16199eb1bf8c6c@mail.gmail.com>
	 <4D497953-E489-4716-90BD-59A1B9AA6A93@rectangular.com>
	 <Pine.LNX.4.58.0702182226440.20338@hal.rescomp.berkeley.edu>
	 <3F2DFC4E-581A-44AC-B51A-CAFC9B2973B8@rectangular.com>
X-Google-Sender-Auth: 25504bf570acecd2
X-Virus-Checked: Checked by ClamAV on apache.org

On 2/19/07, Marvin Humphrey <marvin@rectangular.com> wrote:
> At present, KS doesn't let you do something like that -- you have to
> define all your fields up front.  What I'd like to do is come up with
> a FieldDef subclass that handles multi-dimensional data.  I seem to
> recall that Solr had something along those lines, using prefixed
> field names or something.  Do I recall correctly?

Yes, Solr does a simple prefix or suffix match.
Solr looks up field type for a field in a Map<String,SchemaField>, and
if it doesn't find it, it checks it's "dynamic fields".  If a dynamic
field is found, the SchemaField for it (a template) is quickly cloned,
with only the name being appropriately changed.

Normal field definition (the type attribute refers to another part of
schema.xml):
   <field name="text" type="text" indexed="true" stored="false"
multiValued="true"/>

Dynamic field definitions:
   <!-- Dynamic field definitions.  If a field name is not found, dynamicFields
        will be used if the name matches any of the patterns.
        RESTRICTION: the glob-like pattern in the name attribute must have
        a "*" only at the start or the end.
        EXAMPLE:  name="*_i" will match any field ending in _i (like
myid_i, z_i)
        Longer patterns will be matched first.  if equal size patterns
        both match, the first appearing in the schema will be used.  -->
   <dynamicField name="*_i"  type="sint"    indexed="true"  stored="true"/>
   <dynamicField name="*_s"  type="string"  indexed="true"  stored="true"/>
   <dynamicField name="*_l"  type="slong"   indexed="true"  stored="true"/>
   <dynamicField name="*_t"  type="text"    indexed="true"  stored="true"/>
   <dynamicField name="*_b"  type="boolean" indexed="true"  stored="true"/>
   <dynamicField name="*_f"  type="sfloat"  indexed="true"  stored="true"/>
   <dynamicField name="*_d"  type="sdouble" indexed="true"  stored="true"/>
   <dynamicField name="*_dt" type="date"    indexed="true"  stored="true"/>

If I had to do it over again, I'd be tempted to further restrict the
patterns so that they could be looked up from a Map rather than
linearly.  This hasn't proved to be a problem so far though, as the
number of field-types for dynamic fields normally remains small.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 19 17:44:40 2007
Return-Path: <java-user-return-26221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47687 invoked from network); 19 Feb 2007 17:44:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2007 17:44:40 -0000
Received: (qmail 4969 invoked by uid 500); 19 Feb 2007 17:44:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4928 invoked by uid 500); 19 Feb 2007 17:44:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4910 invoked by uid 99); 19 Feb 2007 17:44:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 09:44:42 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 09:44:30 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 4320630EFC17; Mon, 19 Feb 2007 10:44:10 -0700 (MST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id D5C4430EFC16
	for <java-user@lucene.apache.org>; Mon, 19 Feb 2007 10:44:06 -0700 (MST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <DD85A66A3EC15A48A90B24F725A2FDCF70B634@elektra.cursor.de>
References: <DD85A66A3EC15A48A90B24F725A2FDCF70B634@elektra.cursor.de>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A6A57FD8-4BD6-4582-BFF0-21AC26B57FF3@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: AW: QueryParser explicit and implicit search operator
Date: Mon, 19 Feb 2007 12:44:03 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1


On Feb 19, 2007, at 10:32 AM, Karimi-Tabatabaie Jamal wrote:
> That means that  last query "Lucene OR Query" must be parsed  
> correct to "Lucene query" with the OR operator while default  
> operator is set to AND. Right?
>
> But in my implementation with default operator set to AND the query  
> 'Hare OR Tortoise' is parsed to 'Hare AND Tortoise'!

Are you perhaps lowercasing the "OR" somewhere along the way (and  
using a stop word removing analyzer)?

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 19 18:05:28 2007
Return-Path: <java-user-return-26222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57907 invoked from network); 19 Feb 2007 18:05:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2007 18:05:27 -0000
Received: (qmail 45223 invoked by uid 500); 19 Feb 2007 18:05:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45044 invoked by uid 500); 19 Feb 2007 18:05:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45027 invoked by uid 99); 19 Feb 2007 18:05:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 10:05:28 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Jamal.Karimi@cursor.de designates 213.240.191.82 as permitted sender)
Received: from [213.240.191.82] (HELO mail.cursor.de) (213.240.191.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 10:05:18 -0800
Received: from localhost (localhost [127.0.0.1])
	by mail.cursor.de (Postfix) with ESMTP id 90B654340AA
	for <java-user@lucene.apache.org>; Mon, 19 Feb 2007 19:04:59 +0100 (CET)
Received: from mail.cursor.de ([127.0.0.1])
	by localhost (mail.cursor.de [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 14340-05 for <java-user@lucene.apache.org>;
	Mon, 19 Feb 2007 19:04:56 +0100 (CET)
Received: from elektra.cursor.de (elektra.cursor.de [10.0.0.11])
	by mail.cursor.de (Postfix) with ESMTP id 5E858434064
	for <java-user@lucene.apache.org>; Mon, 19 Feb 2007 19:04:56 +0100 (CET)
Content-class: urn:content-classes:message
Subject: AW: QueryParser explicit and implicit search operator
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Date: Mon, 19 Feb 2007 19:04:56 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Message-ID: <DD85A66A3EC15A48A90B24F725A2FDCF70B63E@elektra.cursor.de>
In-Reply-To: <359a92830702190816q7bdb0e8pb6f199c0424034b1@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: QueryParser explicit and implicit search operator
thread-index: AcdUQW0K2IqQX9zTTNKrC4H/miaYoAAC/njg
From: "Karimi-Tabatabaie Jamal" <Jamal.Karimi@cursor.de>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Erik,

You gave me the clue! I had a toLowerCase on the query.=20
I was in the hard believe that I did not program such things, as I knew =
the side effect.=20

Thanks alot for your boths help and sorry for the trouble. Mea culpa!

Regards,
Jamal

-----Urspr=FCngliche Nachricht-----
Von: Erick Erickson [mailto:erickerickson@gmail.com]=20
Gesendet: Montag, 19. Februar 2007 17:17
An: java-user@lucene.apache.org
Betreff: Re: QueryParser explicit and implicit search operator

You still haven't provided the data. Here's what Mr. Hatcher needs you =
to
do.

Provide a very short program that demonstrates this. It should parse a =
query
and print out the parsed query using ToString. For instance, are you
lowercasing the query before parsing? In which case or is not treated as =
an
operator, but a term.

We can keep going back and forth only to discover that you are not =
providing
complete information. Or we're assuming something you aren't. or.... the
10,000 ways we can talk past each other without providing crucial
information.

So, please provide a short, self-contained program that demonstrates the
problem and I'm sure Mr. Hatcher will provide an answer in a trice.

I'm going to guess that you won't be able to do this, and in the process
you'll discover that you did something like... instantiated a new
QueryParser and didn't set the default operator as you think. Or =
lowercased
the query. Or set the default operator on a different QueryParser than =
you
actually used. Or......

Best
Erick

On 2/19/07, Karimi-Tabatabaie Jamal <Jamal.Karimi@cursor.de> wrote:
>
> Exactly.
>
> That means that  last query "Lucene OR Query" must be parsed correct =
to
> "Lucene query" with the OR operator while default operator is set to =
AND.
> Right?
>
> But in my implementation with default operator set to AND the query =
'Hare
> OR Tortoise' is parsed to 'Hare AND Tortoise'!
>
> Regards,
> Jamal
> -----Urspr=FCngliche Nachricht-----
> Von: Erick Erickson [mailto:erickerickson@gmail.com]
> Gesendet: Montag, 19. Februar 2007 14:45
> An: java-user@lucene.apache.org
> Betreff: Re: QueryParser explicit and implicit search operator
>
> <<<How else would you explain the 316 search results, when the results =
for
> each single queries "Lucene" and "Query" is lesser than 316?>>>
> Because some documents contain "Lucene" but not "Query" and =
vice-versa.
>
> These results look perfectly reasonable to me too. The default =
operator is
> AND, which is why queries 3 and 4 return the same results.
>
> When you query on "Query" you get some number of documents (109 to be
> exact)
> that ALSO contain "Lucene". The reverse is also true, when you query
> "Lucene", 109 of those documents also contain "Query".
>
> So, if you subtract 109 (look familiar?) from the sum of the =
individual
> queries for Lucene and Query, you get 316 (155 + 270 - 109) which is
> exactly
> what you get from "Lucene OR Query". All fine from my perspective.
>
> Best
> Erick
>
> On 2/19/07, Karimi-Tabatabaie Jamal <Jamal.Karimi@cursor.de> wrote:
> >
> > Hello Erik,
> >
> > You are right for a little complex query. I tested  the following
> queries
> >
> > serach at lucenebool.com with query "Query" 155 results
> > serach at lucenebool.com with query "Lucene" 270 results
> > serach at lucenebool.com with query "Query AND Lucene" 109 results
> > serach at lucenebool.com with query "Query Lucene" 109 results
> > serach at lucenebool.com with query "Query OR Lucene" 316 results
> >
> > and came to the guess that it seems to be fixed for a query like "X =
OR
> Y"!
> > How else would you explain the 316 search results, when the results =
for
> each
> > single queries "Lucene" and "Query" is lesser than 316?
> >
> > Jamal
> >
> > -----Urspr=FCngliche Nachricht-----
> > Von: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> > Gesendet: Samstag, 17. Februar 2007 06:27
> > An: java-user@lucene.apache.org
> > Betreff: Re: QueryParser explicit and implicit search operator
> >
> >
> > On Feb 16, 2007, at 1:53 PM, Karimi-Tabatabaie Jamal wrote:
> > > For my problem there seems to exist a lucence Bug
> > > (http://issues.apache.org/jira/browse/LUCENE-167) but also it =
seems
> > > that
> > > it's solved in the Lucene integration on site http://
> > > www.lucenebook.com.
> >
> > Where do you see the problem solved at lucenebook.com?   The "Query
> > parsed to:" for this query <http://www.lucenebook.com/search?
> > query=3Daaaaa+AND+bbbbb+OR+ccccc+AND+ddddd> is
> >
> >         Query parsed to: +aaaaa bbbbb +ccccc +ddddd
> >
> > The OR caused the "bbbbb" term to not be required, yet all other
> > terms are required.
> >
> >         Erik
> >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 19 18:50:20 2007
Return-Path: <java-user-return-26223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72274 invoked from network); 19 Feb 2007 18:50:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2007 18:50:18 -0000
Received: (qmail 5282 invoked by uid 500); 19 Feb 2007 18:50:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5209 invoked by uid 500); 19 Feb 2007 18:50:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5194 invoked by uid 99); 19 Feb 2007 18:50:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 10:50:19 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_FONT_BIG,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 217.69.20.190 as permitted sender)
Received: from [217.69.20.190] (HELO cluster-d.mailcontrol.com) (217.69.20.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 10:50:04 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly13d.srv.mailcontrol.com (MailControl) with SMTP id l1JInfAJ010501
	for <java-user@lucene.apache.org>; Mon, 19 Feb 2007 18:49:42 GMT
Received: From SGBD012103.wsatkins.com ([10.202.26.17]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 1171910960999; Mon, 19 Feb 2007 18:49:20 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012103.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 19 Feb 2007 18:49:20 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C75456.AA5446C4"
Subject: Search in all fields
Date: Mon, 19 Feb 2007 18:49:19 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705DCD3F3@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Search in all fields
Thread-Index: AcdUVqnjH9qCTJEWS1qOKFglGDt+7g==
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 19 Feb 2007 18:49:20.0794 (UTC) FILETIME=[AA825FA0:01C75456]
X-Scanned-By: MailControl A-07-06-85 (www.mailcontrol.com) on 10.68.0.123
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C75456.AA5446C4
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi All,

I want to be able to do a search for a term in all fields in a document.


One way this can be done is to put every element of a document in the
default field (or I guess any other single named field) as well as
separate fields in which those elements belong.  So for example if for
my documents I had the following fields:

A, B, C, D and E

If I then set up a field called

All

And for all documents I processed as well as putting the elements of
that document in A, B, C, D and E I would also put them as a
concatenation into All as well.

One problem with this is that if for a particular document I had these
values for my five fields:

A -> Hello
B -> How
C -> Are
D -> You
E -> Mate
(All -> Hello How Are You Mate)

Then a search for "How Are You" in All would return true when no single
field contains this string which is not ideal.

Another problem with this is that it would double the size of the index
(unless Lucene does something clever here).

A way to solve the original issue is to convert the search for "How Are
You" into this:

A:How Are You OR B:How Are You OR C:How Are You OR D:How Are You OR
E:How Are You

This solves both the problems of the solution where we set up the All
field (viz. increasing the size of the index and  bringing back more
results than we should).

However, this solution also has it's drawback and that is that now we
have gone from a simple query to a complex ANDing of all fields in the
document.

My question is this: is there a third way?

Cheers

Sachin


This email and any attached files are confidential and copyright protected.=
 If you are not the addressee, any dissemination of this communication is s=
trictly prohibited. Unless otherwise expressly agreed in writing, nothing s=
tated in this communication shall be legally binding.

The ultimate parent company of the Atkins Group is WS Atkins plc.  Register=
ed in England No. 1885586.  Registered Office Woodcote Grove, Ashley Road, =
Epsom, Surrey KT18 5BW.

Consider the environment. Please don't print this e-mail unless you really =
need to.=20

------_=_NextPart_001_01C75456.AA5446C4--

From java-user-return-26224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 19 18:55:12 2007
Return-Path: <java-user-return-26224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74363 invoked from network); 19 Feb 2007 18:55:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2007 18:55:11 -0000
Received: (qmail 17524 invoked by uid 500); 19 Feb 2007 18:55:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17490 invoked by uid 500); 19 Feb 2007 18:55:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17479 invoked by uid 99); 19 Feb 2007 18:55:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 10:55:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [68.116.38.223] (HELO rectangular.com) (68.116.38.223)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 10:55:00 -0800
Received: from [67.189.26.9] (helo=[10.0.1.3])
	by rectangular.com with esmtpa (Exim 4.44)
	id 1HJEAP-000Ksr-AK
	for java-user@lucene.apache.org; Mon, 19 Feb 2007 11:27:17 -0800
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <c68e39170702190845g4e30cc1fw13e7959cfe1a392a@mail.gmail.com>
References: <20070126195010.90762.qmail@web50305.mail.yahoo.com> <20070215150143.GA16525@fermat.math.technion.ac.il> <c68e39170702151320g546790b4qb16199eb1bf8c6c@mail.gmail.com> <4D497953-E489-4716-90BD-59A1B9AA6A93@rectangular.com> <Pine.LNX.4.58.0702182226440.20338@hal.rescomp.berkeley.edu> <3F2DFC4E-581A-44AC-B51A-CAFC9B2973B8@rectangular.com> <c68e39170702190845g4e30cc1fw13e7959cfe1a392a@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <5C7142B8-D773-4576-8EA8-3C03D2638CFC@rectangular.com>
Content-Transfer-Encoding: 7bit
From: Marvin Humphrey <marvin@rectangular.com>
Subject: Re: NO_NORMS and TOKENIZED?
Date: Mon, 19 Feb 2007 10:54:38 -0800
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Feb 19, 2007, at 8:45 AM, Yonik Seeley wrote:

> If I had to do it over again, I'd be tempted to further restrict the
> patterns so that they could be looked up from a Map rather than
> linearly.

Awesome.  I know exactly how I'm going to implement this now.

> This hasn't proved to be a problem so far though, as the
> number of field-types for dynamic fields normally remains small.

For KS, there will be only one abstract class dedicated to multi- 
dimensional data.  Users will subclass to provide their own arbitrary  
field definitions.  The field definition itself won't be dynamic --  
only the suffix on the field name will be.

For a hashmap lookup, a prefix pattern could be restricted one of two  
ways: fixed length, or terminal character.  I'm inclined to go with a  
terminating underscore in the field name -- that allows the users to  
choose their own prefix for maximum readability, at the cost of an  
additional scan.

Here's how the schema for your CNET index might look.

    # ./CNETSchema.pm

    package CNETSchema::name;
    use base 'KinoSearch::Schema::FieldSpec';

    package CNETSchema::description;
    use base 'KinoSearch::Schema::FieldSpec';
    sub similarity {
        return KinoSearch::Contrib::LongFieldSim->new;
    }

    package CNETSchema::product_id;
    use base 'KinoSearch::Schema::FieldSpec';
    sub analyzed { 0 }

    package CNETSchema::attr;
    use base 'KinoSearch::Schema::DeepFieldSpec';
    sub analyzed { 0 }
    sub stored   { 0 }

    package CNETSchema;
    use base 'KinoSearch::Schema';
    use KinoSearch::Analyzer::PolyAnalyzer;
    sub analyzer {
        return KinoSearch::Analysis::PolyAnalyzer->new( language =>  
'en' );
    }
    __PACKAGE__->load_fields(qw( name description product_id attr ));

    1;

Then, at index time, you'll be able to do this:

    $index_writer->add_doc({
        name                         => 'Acme LT-1 Laptop',
        description                  => 'blah blah blah...',
        product_id                   => 'acme-lt-1',
        attr_weight                  => 6.3,
        attr_heat_dissipation_factor => 20,
    });

I'll need to make a few backend tweaks, but this API pretty much  
solves the multi-dimensional data problem. :)

Thoughts?

Marvin Humphrey
Rectangular Research
http://www.rectangular.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 19 19:02:04 2007
Return-Path: <java-user-return-26225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76778 invoked from network); 19 Feb 2007 19:02:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2007 19:02:03 -0000
Received: (qmail 27598 invoked by uid 500); 19 Feb 2007 19:02:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27548 invoked by uid 500); 19 Feb 2007 19:02:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27537 invoked by uid 99); 19 Feb 2007 19:02:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 11:02:04 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 11:01:54 -0800
Received: by nf-out-0910.google.com with SMTP id i2so2284907nfe
        for <java-user@lucene.apache.org>; Mon, 19 Feb 2007 11:01:32 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cIkkXYQSynviUGkwLU/A9iCkToptXXPWK5LndCIHOPs4KujGCiBAmMpc4mJKcMJVTeYfxNA0CQKeJqHNFKmyLuNTMhumf90p6uTbLk3chKkRVUXyVNZXBkYz1TTX/ZtM9kGaA6wMTgVEMS9Z4vt2xMD574UNlmGbdCeT/ocVrqU=
Received: by 10.82.172.15 with SMTP id u15mr11442388bue.1171911691987;
        Mon, 19 Feb 2007 11:01:31 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Mon, 19 Feb 2007 11:01:31 -0800 (PST)
Message-ID: <359a92830702191101h15357498h20aea6458118c0bc@mail.gmail.com>
Date: Mon, 19 Feb 2007 14:01:31 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search in all fields
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705DCD3F3@SGBLOW2101.wsatkins.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_41622_4177063.1171911691741"
References: <BC1CFC544422CB4A934908E126A4742705DCD3F3@SGBLOW2101.wsatkins.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_41622_4177063.1171911691741
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Sure. Convert your simple queries into span queries (which are also
relatively simple). Then, when you index everything in the "all" field,
subclass your analyzer to return a large PositionIncrementGap. Explaining
how this works with words is awkward, so....

doc.add("all", "one two three");
doc.add("all", "four five six");
doc.add("all", "seven eight nine");
index the document.

Assume you've implemented an analyzer that returns 1000 for
getPositionIncrementGap.

Now, the term offsets in the single document will be
one - 0
two - 1
three - 2
four 1003
five 1004
six 1005
seven 2006
eight 2007
nine 2008

Now, if you use SpanNearQuery with a slop of 900 (i.e. "one nine"~900) you
won't get a match because the "distance" between one and nine is more than
900. But "one three"~900 will match.

It's possible to transform any query into a set of span queries, See the
thread "Multiword Highlighting" that Mark Miller and I were exchanging ideas
on recently. Be aware that the code we were talking about has to have a
modification when used on a "regular" index where it pays attention to the
document that each sub-clause comes. The code, as written, assumes you're
using a MemoryIndex for one and only one document, so unless you need
complex queries, I'd just think about rewriting simple queries with ANDs as
a SpanNearQuery.

Best
Erick

On 2/19/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
>
> Hi All,
>
> I want to be able to do a search for a term in all fields in a document.
>
>
> One way this can be done is to put every element of a document in the
> default field (or I guess any other single named field) as well as
> separate fields in which those elements belong.  So for example if for
> my documents I had the following fields:
>
> A, B, C, D and E
>
> If I then set up a field called
>
> All
>
> And for all documents I processed as well as putting the elements of
> that document in A, B, C, D and E I would also put them as a
> concatenation into All as well.
>
> One problem with this is that if for a particular document I had these
> values for my five fields:
>
> A -> Hello
> B -> How
> C -> Are
> D -> You
> E -> Mate
> (All -> Hello How Are You Mate)
>
> Then a search for "How Are You" in All would return true when no single
> field contains this string which is not ideal.
>
> Another problem with this is that it would double the size of the index
> (unless Lucene does something clever here).
>
> A way to solve the original issue is to convert the search for "How Are
> You" into this:
>
> A:How Are You OR B:How Are You OR C:How Are You OR D:How Are You OR
> E:How Are You
>
> This solves both the problems of the solution where we set up the All
> field (viz. increasing the size of the index and  bringing back more
> results than we should).
>
> However, this solution also has it's drawback and that is that now we
> have gone from a simple query to a complex ANDing of all fields in the
> document.
>
> My question is this: is there a third way?
>
> Cheers
>
> Sachin
>
>
> This email and any attached files are confidential and copyright
> protected. If you are not the addressee, any dissemination of this
> communication is strictly prohibited. Unless otherwise expressly agreed in
> writing, nothing stated in this communication shall be legally binding.
>
> The ultimate parent company of the Atkins Group is WS Atkins
> plc.  Registered in England No. 1885586.  Registered Office Woodcote Grove,
> Ashley Road, Epsom, Surrey KT18 5BW.
>
> Consider the environment. Please don't print this e-mail unless you really
> need to.
>

------=_Part_41622_4177063.1171911691741--

From java-user-return-26226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 19 19:32:41 2007
Return-Path: <java-user-return-26226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85000 invoked from network); 19 Feb 2007 19:32:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2007 19:32:40 -0000
Received: (qmail 75562 invoked by uid 500); 19 Feb 2007 19:32:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75518 invoked by uid 500); 19 Feb 2007 19:32:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75507 invoked by uid 99); 19 Feb 2007 19:32:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 11:32:42 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of grant.ingersoll@gmail.com designates 64.233.184.232 as permitted sender)
Received: from [64.233.184.232] (HELO wr-out-0506.google.com) (64.233.184.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 11:32:30 -0800
Received: by wr-out-0506.google.com with SMTP id i22so1657947wra
        for <java-user@lucene.apache.org>; Mon, 19 Feb 2007 11:32:09 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=anRexh2lDDn+sYlQmEfFZ47Ci07SJsTQcDMCGg/+nXof0aK7VjL1gr8OHScpj/UHBL+6i1dw44SBV/HyEkxuyDC2zQZzlUDDyhzNGo8Aid6dMARQvH4wUBSsTo1AfnsJpCkWr7w7jkIaA6AVRBqLKA05GBWy0C+qDxJEf5/1iZY=
Received: by 10.90.79.6 with SMTP id c6mr7543544agb.1171913529724;
        Mon, 19 Feb 2007 11:32:09 -0800 (PST)
Received: from ?192.168.0.2? ( [74.229.189.244])
        by mx.google.com with ESMTP id 38sm15877419wrl.2007.02.19.11.32.08;
        Mon, 19 Feb 2007 11:32:09 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <3F2DFC4E-581A-44AC-B51A-CAFC9B2973B8@rectangular.com>
References: <20070126195010.90762.qmail@web50305.mail.yahoo.com> <20070215150143.GA16525@fermat.math.technion.ac.il> <c68e39170702151320g546790b4qb16199eb1bf8c6c@mail.gmail.com> <4D497953-E489-4716-90BD-59A1B9AA6A93@rectangular.com> <Pine.LNX.4.58.0702182226440.20338@hal.rescomp.berkeley.edu> <3F2DFC4E-581A-44AC-B51A-CAFC9B2973B8@rectangular.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <1A3D93FF-C3C8-4FA6-A777-33428FD2540D@gmail.com>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <grant.ingersoll@gmail.com>
Subject: Re: NO_NORMS and TOKENIZED?
Date: Mon, 19 Feb 2007 14:32:06 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

FWIW, we support, in our in-house system and in addition to fixed  
field semantics,  completely dynamic field names for some  
applications, but they have a fixed field type.  So, the field name  
can be anything, but the attributes of the field are fixed (i.e. it  
will always be tokenized with norms). This is useful for us, in some  
cases, when indexing XML files where the tag name becomes the field  
name and the set of tag names are not known ahead of time.  I suppose  
there are ways around this (by preprocessing all the files), but  
having the ability to add arbitrary fields is a good thing for us and  
some of the applications we do.

-Grant

On Feb 19, 2007, at 2:14 AM, Marvin Humphrey wrote:

>
> On Feb 18, 2007, at 10:33 PM, Chris Hostetter wrote:
>
>> I don't suppose you have a mailing pointer to my old comments do you
>> Marvin?
>
> http://tinyurl.com/394apl (mail-archives.apache.org)
>
> You're in good company.  The other party with strong objections was  
> Doug.
>
> http://tinyurl.com/36ucj2
>
>> en if i wanted to be able to use
>> an option on field foo for some docs and not on others i'd have to  
>> have
>> foo_optOFF and foo_optON ... then anytime i wanted to search on  
>> "foo" i'd
>> have to use a booleanquery without a coord factor across both.
>
> I'm trying to think of an example where that would actually come  
> into play.  What are some of the options you'd turn on and off?   
> Norms?  Tokenization?
>
> IIUC, that's a third objection in addition to your two from the  
> previous discussion.  The other two were "evolving" indexes, and  
> what you described as "dynamically typed fields" but what I would  
> call "multi-dimensional data".
>
> KinoSearch's Schema scheme allows you to add new fields, but you  
> can't take any away or change any existing defs  -- so you're able  
> to evolve, but only within fairly tight constraints.  I can't think  
> of an elegant way to improve that situation, so I've declared that  
> aspect "good enough" and we're moving on.  I don't think it's  
> really any worse than what we have now -- where field defs persist,  
> stored in field infos files, etc, and the resolution of conflicts  
> can bite you in the butt (as I recall hearing you discuss when no- 
> norms was being hashed out wrt suddenly having lots and lots of  
> memory-sucking norms).
>
> The multi-dimensional data problem is the one I'm most interested  
> in solving.  Lucene/KS indexes don't handle one-to-many  
> relationships well.  In your example, you had an index where the  
> products had "attributes", and the attributes might have taken many  
> different names -- so it wasn't possible to know all the field  
> names in advance.  It sounds like, effectively, you were faking a  
> second table.  So long as the names of your attributes don't crash  
> into the names of your primary fields, that'll work.
>
> At present, KS doesn't let you do something like that -- you have  
> to define all your fields up front.  What I'd like to do is come up  
> with a FieldDef subclass that handles multi-dimensional data.  I  
> seem to recall that Solr had something along those lines, using  
> prefixed field names or something.  Do I recall correctly?
>
> Marvin Humphrey
> Rectangular Research
> http://www.rectangular.com/
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

------------------------------------------------------
Grant Ingersoll
http://www.grantingersoll.com/
http://lucene.grantingersoll.com
http://www.paperoftheweek.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 19 20:07:39 2007
Return-Path: <java-user-return-26227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93316 invoked from network); 19 Feb 2007 20:07:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2007 20:07:38 -0000
Received: (qmail 21831 invoked by uid 500); 19 Feb 2007 20:07:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21787 invoked by uid 500); 19 Feb 2007 20:07:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21776 invoked by uid 99); 19 Feb 2007 20:07:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 12:07:39 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [68.116.38.223] (HELO rectangular.com) (68.116.38.223)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 12:07:27 -0800
Received: from [67.189.26.9] (helo=[10.0.1.3])
	by rectangular.com with esmtpa (Exim 4.44)
	id 1HJFIW-000L3W-1s
	for java-user@lucene.apache.org; Mon, 19 Feb 2007 12:39:44 -0800
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <1A3D93FF-C3C8-4FA6-A777-33428FD2540D@gmail.com>
References: <20070126195010.90762.qmail@web50305.mail.yahoo.com> <20070215150143.GA16525@fermat.math.technion.ac.il> <c68e39170702151320g546790b4qb16199eb1bf8c6c@mail.gmail.com> <4D497953-E489-4716-90BD-59A1B9AA6A93@rectangular.com> <Pine.LNX.4.58.0702182226440.20338@hal.rescomp.berkeley.edu> <3F2DFC4E-581A-44AC-B51A-CAFC9B2973B8@rectangular.com> <1A3D93FF-C3C8-4FA6-A777-33428FD2540D@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <D952A6D6-087C-4CC8-A20E-F46EF1767B4E@rectangular.com>
Content-Transfer-Encoding: 7bit
From: Marvin Humphrey <marvin@rectangular.com>
Subject: Re: NO_NORMS and TOKENIZED?
Date: Mon, 19 Feb 2007 12:07:04 -0800
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Feb 19, 2007, at 11:32 AM, Grant Ingersoll wrote:

> FWIW, we support, in our in-house system and in addition to fixed  
> field semantics,  completely dynamic field names for some  
> applications, but they have a fixed field type.  So, the field name  
> can be anything, but the attributes of the field are fixed (i.e. it  
> will always be tokenized with norms). This is useful for us, in  
> some cases, when indexing XML files where the tag name becomes the  
> field name and the set of tag names are not known ahead of time.  I  
> suppose there are ways around this (by preprocessing all the  
> files), but having the ability to add arbitrary fields is a good  
> thing for us and some of the applications we do.

The thing I don't like about this is that it prevents validation of  
field names, which is something I use a lot  in KS (e.g. try to  
delete a term from a field that's not indexed, get an error, as the  
field name was probably misspelled).  I can see the use, it just  
means sacrificing a lot of type safety for the more common cases.   
The user base at large has to suffer with more frequent, hard-to- 
detect bugs for a feature only needed by a few users.

About your app in particular -- how do you handle identical XML tag  
names that mean totally different things when nested inside different  
elements?

    <company>
      <name>Acme</name>
    </company>
    <product>
      <name>Widget</name>
    </product>

Marvin Humphrey
Rectangular Research
http://www.rectangular.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 19 22:29:56 2007
Return-Path: <java-user-return-26228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33471 invoked from network); 19 Feb 2007 22:29:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2007 22:29:55 -0000
Received: (qmail 87982 invoked by uid 500); 19 Feb 2007 22:29:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87938 invoked by uid 500); 19 Feb 2007 22:29:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87921 invoked by uid 99); 19 Feb 2007 22:29:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 14:29:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.207] (HELO spunkymail-a14.g.dreamhost.com) (208.97.132.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 14:29:44 -0800
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a14.g.dreamhost.com (Postfix) with ESMTP id D9CCE190E26
	for <java-user@lucene.apache.org>; Mon, 19 Feb 2007 14:29:24 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <D952A6D6-087C-4CC8-A20E-F46EF1767B4E@rectangular.com>
References: <20070126195010.90762.qmail@web50305.mail.yahoo.com> <20070215150143.GA16525@fermat.math.technion.ac.il> <c68e39170702151320g546790b4qb16199eb1bf8c6c@mail.gmail.com> <4D497953-E489-4716-90BD-59A1B9AA6A93@rectangular.com> <Pine.LNX.4.58.0702182226440.20338@hal.rescomp.berkeley.edu> <3F2DFC4E-581A-44AC-B51A-CAFC9B2973B8@rectangular.com> <1A3D93FF-C3C8-4FA6-A777-33428FD2540D@gmail.com> <D952A6D6-087C-4CC8-A20E-F46EF1767B4E@rectangular.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <655CE955-17B1-4D34-9A25-312E9E3E6489@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: NO_NORMS and TOKENIZED?
Date: Mon, 19 Feb 2007 17:29:20 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Feb 19, 2007, at 3:07 PM, Marvin Humphrey wrote:

>
> On Feb 19, 2007, at 11:32 AM, Grant Ingersoll wrote:
>
>> FWIW, we support, in our in-house system and in addition to fixed  
>> field semantics,  completely dynamic field names for some  
>> applications, but they have a fixed field type.  So, the field  
>> name can be anything, but the attributes of the field are fixed  
>> (i.e. it will always be tokenized with norms). This is useful for  
>> us, in some cases, when indexing XML files where the tag name  
>> becomes the field name and the set of tag names are not known  
>> ahead of time.  I suppose there are ways around this (by  
>> preprocessing all the files), but having the ability to add  
>> arbitrary fields is a good thing for us and some of the  
>> applications we do.
>
> The thing I don't like about this is that it prevents validation of  
> field names, which is something I use a lot  in KS (e.g. try to  
> delete a term from a field that's not indexed, get an error, as the  
> field name was probably misspelled).  I can see the use, it just  
> means sacrificing a lot of type safety for the more common cases.   
> The user base at large has to suffer with more frequent, hard-to- 
> detect bugs for a feature only needed by a few users.
>

Since all our dynamically named fields are of the same type, it isn't  
an issue for us at the moment.  Then again, though, we only have in- 
house users and don't have the same issue that you have.


> About your app in particular -- how do you handle identical XML tag  
> names that mean totally different things when nested inside  
> different elements?


It doesn't happen.  The tags are based on the output of some other  
processes and are unique and the tag/field name has semantics  
attached to it that is meaningful to the application.  I suppose,  
technically, they are known ahead of time, but there are potentially  
hundreds of them such that it doesn't make sense to populate them  
into our Field schema ahead of time as maintenance would be a nightmare.


>    <company>
>      <name>Acme</name>
>    </company>
>    <product>
>      <name>Widget</name>
>    </product>
>
> Marvin Humphrey
> Rectangular Research
> http://www.rectangular.com/
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 20 02:00:27 2007
Return-Path: <java-user-return-26229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80452 invoked from network); 20 Feb 2007 02:00:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2007 02:00:27 -0000
Received: (qmail 94987 invoked by uid 500); 20 Feb 2007 02:00:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94734 invoked by uid 500); 20 Feb 2007 02:00:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94723 invoked by uid 99); 20 Feb 2007 02:00:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 18:00:27 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Feb 2007 18:00:16 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 9F3A05B763; Mon, 19 Feb 2007 17:59:55 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 81C6C7F403
	for <java-user@lucene.apache.org>; Mon, 19 Feb 2007 17:59:55 -0800 (PST)
Date: Mon, 19 Feb 2007 17:59:55 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Multiple time ranges in a document
In-Reply-To: <41618.47977.qm@web26004.mail.ukl.yahoo.com>
Message-ID: <Pine.LNX.4.58.0702191755470.32726@hal.rescomp.berkeley.edu>
References: <41618.47977.qm@web26004.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


this came up on the solr list about a month ago and reminded me of
something doug mentioned durring the BOF at apachecon last year ... if you
are interested in writing your own Query subclass, this thread has some
thoughts on how this might be possible...

http://www.nabble.com/One-item%2C-multiple-fields%2C-and-range-queries-tf2969183.html#a8377712

-Hoss

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 20 09:37:27 2007
Return-Path: <java-user-return-26230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89960 invoked from network); 20 Feb 2007 09:37:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2007 09:37:26 -0000
Received: (qmail 21147 invoked by uid 500); 20 Feb 2007 09:37:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21119 invoked by uid 500); 20 Feb 2007 09:37:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21108 invoked by uid 99); 20 Feb 2007 09:37:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 01:37:26 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jmuguruza@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 01:37:16 -0800
Received: by ug-out-1314.google.com with SMTP id k40so740623ugc
        for <java-user@lucene.apache.org>; Tue, 20 Feb 2007 01:36:55 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=CpO51pspIrXc4RVFc236XQRYFLwgYZXBmjNo9vwhzNtmcOZKWjATEDwe+k2sQboyyyDBltQY0IUaJNqH30wVlcv8K7QUfJWJnpaBRGibCytg/JWeceH1jUed2DmoePcIfGv90skSTLY8LC8jTr+iU4LEPrKlB8m4aqmFNYoNJmU=
Received: by 10.78.122.11 with SMTP id u11mr1194921huc.1171964215502;
        Tue, 20 Feb 2007 01:36:55 -0800 (PST)
Received: by 10.78.48.18 with HTTP; Tue, 20 Feb 2007 01:36:55 -0800 (PST)
Message-ID: <f071061b0702200136r6493ade1w42e2e6de551288ad@mail.gmail.com>
Date: Tue, 20 Feb 2007 10:36:55 +0100
From: jm <jmuguruza@gmail.com>
To: java-user@lucene.apache.org
Subject: 2.1 lock file name
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I updated my code to use 2.1 (IndexWriter deleting docs etc), and when
using native locks I still get a lock like this:
lucene-2361bf484af61abc81e6e7f412ad43af-n-write.lock
and when using SimpleFSLockFactory:
lucene-2361bf484af61abc81e6e7f412ad43af-write.lock

>From the changes.txt:
9. LUCENE-771: The default location of the write lock is now the
    index directory, and is named simply "write.lock" (without a big
    digest prefix).

Not a big deal, just wondering if changes.txt is wrong or it refers to
some other lock file.

thanks for the 2.1 release to all,
javi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 20 09:51:34 2007
Return-Path: <java-user-return-26231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98565 invoked from network); 20 Feb 2007 09:51:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2007 09:51:34 -0000
Received: (qmail 37849 invoked by uid 500); 20 Feb 2007 09:51:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37805 invoked by uid 500); 20 Feb 2007 09:51:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37792 invoked by uid 99); 20 Feb 2007 09:51:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 01:51:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 86.111.223.190 as permitted sender)
Received: from [86.111.223.190] (HELO cluster-j.mailcontrol.com) (86.111.223.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 01:51:20 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly21j.srv.mailcontrol.com (MailControl) with SMTP id l1K9oq4W024862
	for <java-user@lucene.apache.org>; Tue, 20 Feb 2007 09:50:52 GMT
Received: From SGBD012103.wsatkins.com ([10.202.26.17]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 1171965027482; Tue, 20 Feb 2007 09:50:27 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012103.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 20 Feb 2007 09:50:27 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Search in all fields
Date: Tue, 20 Feb 2007 09:50:25 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705E0A3AA@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Search in all fields
Thread-Index: AcdUWH4T/a269dEBQgq+b5eY68bM1QAe7Z4g
References: <BC1CFC544422CB4A934908E126A4742705DCD3F3@SGBLOW2101.wsatkins.com> <359a92830702191101h15357498h20aea6458118c0bc@mail.gmail.com>
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 20 Feb 2007 09:50:27.0075 (UTC) FILETIME=[8C862530:01C754D4]
X-Scanned-By: MailControl A-06-00-00 (www.mailcontrol.com) on 10.74.0.131
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Erick,

I'm not sure I fully understand this.  Would I be right in saying that
with this solution I would still need to create an "all" field which
contains duplicates of data already indexed.  Because if this is so then
we still have the problem of doubling the index size.=20

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: 19 February 2007 19:02
To: java-user@lucene.apache.org
Subject: Re: Search in all fields

Sure. Convert your simple queries into span queries (which are also
relatively simple). Then, when you index everything in the "all" field,
subclass your analyzer to return a large PositionIncrementGap.
Explaining how this works with words is awkward, so....

doc.add("all", "one two three");
doc.add("all", "four five six");
doc.add("all", "seven eight nine");
index the document.

Assume you've implemented an analyzer that returns 1000 for
getPositionIncrementGap.

Now, the term offsets in the single document will be one - 0 two - 1
three - 2 four 1003 five 1004 six 1005 seven 2006 eight 2007 nine 2008

Now, if you use SpanNearQuery with a slop of 900 (i.e. "one nine"~900)
you won't get a match because the "distance" between one and nine is
more than 900. But "one three"~900 will match.

It's possible to transform any query into a set of span queries, See the
thread "Multiword Highlighting" that Mark Miller and I were exchanging
ideas on recently. Be aware that the code we were talking about has to
have a modification when used on a "regular" index where it pays
attention to the document that each sub-clause comes. The code, as
written, assumes you're using a MemoryIndex for one and only one
document, so unless you need complex queries, I'd just think about
rewriting simple queries with ANDs as a SpanNearQuery.

Best
Erick

On 2/19/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
>
> Hi All,
>
> I want to be able to do a search for a term in all fields in a
document.
>
>
> One way this can be done is to put every element of a document in the=20
> default field (or I guess any other single named field) as well as=20
> separate fields in which those elements belong.  So for example if for

> my documents I had the following fields:
>
> A, B, C, D and E
>
> If I then set up a field called
>
> All
>
> And for all documents I processed as well as putting the elements of=20
> that document in A, B, C, D and E I would also put them as a=20
> concatenation into All as well.
>
> One problem with this is that if for a particular document I had these

> values for my five fields:
>
> A -> Hello
> B -> How
> C -> Are
> D -> You
> E -> Mate
> (All -> Hello How Are You Mate)
>
> Then a search for "How Are You" in All would return true when no=20
> single field contains this string which is not ideal.
>
> Another problem with this is that it would double the size of the=20
> index (unless Lucene does something clever here).
>
> A way to solve the original issue is to convert the search for "How=20
> Are You" into this:
>
> A:How Are You OR B:How Are You OR C:How Are You OR D:How Are You OR=20
> E:How Are You
>
> This solves both the problems of the solution where we set up the All=20
> field (viz. increasing the size of the index and  bringing back more=20
> results than we should).
>
> However, this solution also has it's drawback and that is that now we=20
> have gone from a simple query to a complex ANDing of all fields in the

> document.
>
> My question is this: is there a third way?
>
> Cheers
>
> Sachin
>
>
> This email and any attached files are confidential and copyright=20
> protected. If you are not the addressee, any dissemination of this=20
> communication is strictly prohibited. Unless otherwise expressly=20
> agreed in writing, nothing stated in this communication shall be
legally binding.
>
> The ultimate parent company of the Atkins Group is WS Atkins plc. =20
> Registered in England No. 1885586.  Registered Office Woodcote Grove,=20
> Ashley Road, Epsom, Surrey KT18 5BW.
>
> Consider the environment. Please don't print this e-mail unless you=20
> really need to.
>


This message has been scanned for viruses by MailControl - (see
http://bluepages.wsatkins.co.uk/?6875772)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 20 10:51:45 2007
Return-Path: <java-user-return-26232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21004 invoked from network); 20 Feb 2007 10:51:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2007 10:51:44 -0000
Received: (qmail 4850 invoked by uid 500); 20 Feb 2007 10:51:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4825 invoked by uid 500); 20 Feb 2007 10:51:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4814 invoked by uid 99); 20 Feb 2007 10:51:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 02:51:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of shai.deljo@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 02:51:35 -0800
Received: by nf-out-0910.google.com with SMTP id i2so2475189nfe
        for <java-user@lucene.apache.org>; Tue, 20 Feb 2007 02:51:13 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=FEmOojhuiN2g/y17A6BTNMC18GBB/99pEFUP76XtR16D8nnS5ReXaj4GulIrTdwuEWhq28MVE5oOPQvOa+sL4eLyXDg+hIFbhX6cfenqnwvPYlRlxgN37RfM5CRH6tfZV3evNkvNFfg1VEQ4yax0PgmadETxr5CSxv7fB0q8AoY=
Received: by 10.48.204.7 with SMTP id b7mr6660755nfg.1171968673701;
        Tue, 20 Feb 2007 02:51:13 -0800 (PST)
Received: by 10.49.80.20 with HTTP; Tue, 20 Feb 2007 02:51:13 -0800 (PST)
Message-ID: <17f11d00702200251u4838a842p5dd27c472dc96953@mail.gmail.com>
Date: Tue, 20 Feb 2007 02:51:13 -0800
From: "shai deljo" <shai.deljo@gmail.com>
To: java-user@lucene.apache.org
Subject: Using Lucene - Design Question
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
I have no experience with Lucene and I'm trying to collect some
information in order to determine what solution is best for me.
I need to index ~50M documents (starting with 10M), the size of each
document is ~2k-~5k and I'll index a couple of fields per document. I
expect ~20 queries per seconds and each query is ~4 terms. Update rate
- not sure what is best and/or possible strategy based on performance,
i.e. incremental indexing vs. pushing a full index but as far as the
product is concerned most data can be updated daily, the head (let's
say 20%) needs hourly (or at least on the order of hours) update.
I also need to be able to override the scoring/ranking and inject my
own logic and of course  my main concern is response time, especially
since i have additional computation on the hits before returning the
results.

BTW, for the additional ranking/computation i will need to retrieve
values that are mapped by a term-field key, i.e. i can't know the key
until i have the result and the query in my hands. i figured i would
use Oracle Berkeley DB Java edition in order to keep the calls as much
as possible in the memory -> any advise on this as well ?

For these requirements, do i need to worry about partitioning the
Index? If i do partition it, is there a solution to merge the results
back or do i need to do it on my own (does Solr do it for me and if it
does, can i override the scoring there)?
AS far as serving multiple users, will a simple rsync of the index
between multiple nodes running the same index (i am not that sensitive
to data integrity) work or do i need to look at something like
terracotta?

In short, i am looking for the simplest solution.

Thanks in advance.
Shi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 20 11:32:24 2007
Return-Path: <java-user-return-26233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35144 invoked from network); 20 Feb 2007 11:32:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2007 11:32:22 -0000
Received: (qmail 57769 invoked by uid 500); 20 Feb 2007 11:32:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57712 invoked by uid 500); 20 Feb 2007 11:32:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57698 invoked by uid 99); 20 Feb 2007 11:32:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 03:32:20 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.29] (HELO out5.smtp.messagingengine.com) (66.111.4.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 03:32:09 -0800
Received: from web4.messagingengine.com (web4.internal [10.202.2.213])
	by out1.messagingengine.com (Postfix) with ESMTP id 4B9C21B6D82
	for <java-user@lucene.apache.org>; Tue, 20 Feb 2007 06:32:49 -0500 (EST)
Received: by web4.messagingengine.com (Postfix, from userid 99)
	id 42AA116967A; Tue, 20 Feb 2007 06:32:49 -0500 (EST)
Message-Id: <1171971169.15149.1175532147@webmail.messagingengine.com>
X-Sasl-Enc: W5ChviJfSGzQfu4OTHP/VNoES84n55JduaHnWwIxmolH 1171971169
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <f071061b0702200136r6493ade1w42e2e6de551288ad@mail.gmail.com>
Subject: Re: 2.1 lock file name
In-Reply-To: <f071061b0702200136r6493ade1w42e2e6de551288ad@mail.gmail.com>
Date: Tue, 20 Feb 2007 06:32:49 -0500
X-Virus-Checked: Checked by ClamAV on apache.org


On Tue, 20 Feb 2007 10:36:55 +0100, "jm" <jmuguruza@gmail.com> said:

> I updated my code to use 2.1 (IndexWriter deleting docs etc), and when
> using native locks I still get a lock like this:
> lucene-2361bf484af61abc81e6e7f412ad43af-n-write.lock
> and when using SimpleFSLockFactory:
> lucene-2361bf484af61abc81e6e7f412ad43af-write.lock

The defaulting only happens if FSDirectory.getDirectory() is called
without passing your own LockFactory.

If instead you create your own LockFactory and pass that in, then
FSDirectory won't change whichever lockDir you had specified to that
LockFactory.

If you want this same default behavior, but from your own created
LockFactory, you can do something like this:

  LockFactory lf = new NativeFSLockFactory(indexDir);
  Directory d = FSDirectory.getDirectory(indexDir, lf);
  lf.setLockPrefix(null);

That last line tells the lock factory that it's not necessary to use
that large digest prefix to differentiate locks (assuming
no other writer will be storing locks in this directory!).

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 20 11:40:01 2007
Return-Path: <java-user-return-26234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37709 invoked from network); 20 Feb 2007 11:40:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2007 11:40:00 -0000
Received: (qmail 69700 invoked by uid 500); 20 Feb 2007 11:40:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69673 invoked by uid 500); 20 Feb 2007 11:40:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69662 invoked by uid 99); 20 Feb 2007 11:40:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 03:40:01 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.243] (HELO web50310.mail.yahoo.com) (206.190.38.243)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 20 Feb 2007 03:39:49 -0800
Received: (qmail 90861 invoked by uid 60001); 20 Feb 2007 11:39:27 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=hlB37+k6ryRA4rZjHuAqFiiGbWU3y/czb6k4y4GuE5em1Yi5vUp82/f+6EIrSStcW4XiQYRSQ3rJV0apWrWPmqXnFeuVwQ6jD7EhTpheHZmlUN2qjw0J2uPyHoYedRYZ133V0HLiTSm3GQT7/bHybEeH4RuO3GHBVYW1CRIMsR4=;
X-YMail-OSG: RwuiGXYVM1l9QpSRIt96xuvYU3p1FXg9xQhvyK5wNmgnMArmvUZ0kM0A7qxflP0Lq6SKugZ6Btx8hsMu6Orkpp4jP3BchPu.dzNOjzy.cjgptxpaOS_YmpiNspC5VcFzg8UUnCYjb_UojRY-
Received: from [58.62.85.116] by web50310.mail.yahoo.com via HTTP; Tue, 20 Feb 2007 03:39:27 PST
X-Mailer: YahooMailRC/368.8 YahooMailWebService/0.6.132.8
Date: Tue, 20 Feb 2007 03:39:27 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Using Lucene - Design Question
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <854061.90847.qm@web50310.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Shi,=0A=0ANobody will be able to give you the precise answer, obviously.=
  The best way is to try.=0AYou didn't say what response time is desirable =
nor what kind of hardware you will be using.=0A=0AI wouldn't bother with th=
e Berkeley DB-backed Lucene index for now, just use the regular one (maybe =
use non-compound format).=0AIf you need to partition your index, MultiSearc=
her will help you search all your indices, and its Parallel cousin will let=
 you parallelize those searches.=0AIt sounds like rsync will work, but you'=
ll have to make sure that the segments file gets rsynced last.=0A=0AOtis=0A=
=0A. . . . . . . . . . . . . . . . . . . . . . . . . . . . . .=0ASimpy -- h=
ttp://www.simpy.com/  -  Tag  -  Search  -  Share=0A=0A----- Original Messa=
ge ----=0AFrom: shai deljo <shai.deljo@gmail.com>=0ATo: java-user@lucene.ap=
ache.org=0ASent: Tuesday, February 20, 2007 5:51:13 AM=0ASubject: Using Luc=
ene - Design Question=0A=0AHi,=0AI have no experience with Lucene and I'm t=
rying to collect some=0Ainformation in order to determine what solution is =
best for me.=0AI need to index ~50M documents (starting with 10M), the size=
 of each=0Adocument is ~2k-~5k and I'll index a couple of fields per docume=
nt. I=0Aexpect ~20 queries per seconds and each query is ~4 terms. Update r=
ate=0A- not sure what is best and/or possible strategy based on performance=
,=0Ai.e. incremental indexing vs. pushing a full index but as far as the=0A=
product is concerned most data can be updated daily, the head (let's=0Asay =
20%) needs hourly (or at least on the order of hours) update.=0AI also need=
 to be able to override the scoring/ranking and inject my=0Aown logic and o=
f course  my main concern is response time, especially=0Asince i have addit=
ional computation on the hits before returning the=0Aresults.=0A=0ABTW, for=
 the additional ranking/computation i will need to retrieve=0Avalues that a=
re mapped by a term-field key, i.e. i can't know the key=0Auntil i have the=
 result and the query in my hands. i figured i would=0Ause Oracle Berkeley =
DB Java edition in order to keep the calls as much=0Aas possible in the mem=
ory -> any advise on this as well ?=0A=0AFor these requirements, do i need =
to worry about partitioning the=0AIndex? If i do partition it, is there a s=
olution to merge the results=0Aback or do i need to do it on my own (does S=
olr do it for me and if it=0Adoes, can i override the scoring there)?=0AAS =
far as serving multiple users, will a simple rsync of the index=0Abetween m=
ultiple nodes running the same index (i am not that sensitive=0Ato data int=
egrity) work or do i need to look at something like=0Aterracotta?=0A=0AIn s=
hort, i am looking for the simplest solution.=0A=0AThanks in advance.=0AShi=
=0A=0A---------------------------------------------------------------------=
=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor ad=
ditional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 20 12:30:46 2007
Return-Path: <java-user-return-26235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49956 invoked from network); 20 Feb 2007 12:30:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2007 12:30:44 -0000
Received: (qmail 30479 invoked by uid 500); 20 Feb 2007 12:30:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30432 invoked by uid 500); 20 Feb 2007 12:30:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30410 invoked by uid 99); 20 Feb 2007 12:30:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 04:30:44 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_FONT_BIG,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 217.68.146.190 as permitted sender)
Received: from [217.68.146.190] (HELO cluster-b.mailcontrol.com) (217.68.146.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 04:30:29 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly31b.srv.mailcontrol.com (MailControl) with SMTP id l1KCTtj9007413
	for <java-user@lucene.apache.org>; Tue, 20 Feb 2007 12:29:57 GMT
Received: From SGBD012103.wsatkins.com ([10.202.26.17]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 1171974567867; Tue, 20 Feb 2007 12:29:27 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012103.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 20 Feb 2007 12:29:27 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C754EA.C2C2D756"
Subject: Search for a term in all fields
Date: Tue, 20 Feb 2007 12:29:25 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705E0AA2C@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Search for a term in all fields
Thread-Index: AcdU6sIQ71MMhbZmTtObSIRw6BlLdw==
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 20 Feb 2007 12:29:27.0314 (UTC) FILETIME=[C2F31720:01C754EA]
X-Scanned-By: MailControl A-07-06-90 (www.mailcontrol.com) on 10.66.0.141
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C754EA.C2C2D756
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi all,

How do I search for a term in all fields of a document?

Cheers

Sachin


This email and any attached files are confidential and copyright protected.=
 If you are not the addressee, any dissemination of this communication is s=
trictly prohibited. Unless otherwise expressly agreed in writing, nothing s=
tated in this communication shall be legally binding.

The ultimate parent company of the Atkins Group is WS Atkins plc.  Register=
ed in England No. 1885586.  Registered Office Woodcote Grove, Ashley Road, =
Epsom, Surrey KT18 5BW.

Consider the environment. Please don't print this e-mail unless you really =
need to.=20

------_=_NextPart_001_01C754EA.C2C2D756--

From java-user-return-26236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 20 12:35:19 2007
Return-Path: <java-user-return-26236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51228 invoked from network); 20 Feb 2007 12:35:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2007 12:35:18 -0000
Received: (qmail 39203 invoked by uid 500); 20 Feb 2007 12:35:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39183 invoked by uid 500); 20 Feb 2007 12:35:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39172 invoked by uid 99); 20 Feb 2007 12:35:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 04:35:19 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 04:35:08 -0800
Received: by nf-out-0910.google.com with SMTP id i2so2499612nfe
        for <java-user@lucene.apache.org>; Tue, 20 Feb 2007 04:34:47 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=G29C8R6FFjMnY2W9PTZ1sHgDicxvCXb+euSa0LSf3DfYkbrJ5AgGJfivylZG6wi/DFlAPNdgHWS9qeerO72xs2P/ko7kLxqjwfE11/T+m0lmyVnjRR1AvqmMoZNMu0G1gScOxWc1lZNDcJG0zW3i+6RtTP79Xio/e1eCCJa2g+o=
Received: by 10.49.13.14 with SMTP id q14mr6722647nfi.1171974886972;
        Tue, 20 Feb 2007 04:34:46 -0800 (PST)
Received: from ?10.0.1.12? ( [212.162.171.110])
        by mx.google.com with ESMTP id l32sm30473467nfa.2007.02.20.04.34.44;
        Tue, 20 Feb 2007 04:34:46 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705E0AA2C@SGBLOW2101.wsatkins.com>
References: <BC1CFC544422CB4A934908E126A4742705E0AA2C@SGBLOW2101.wsatkins.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <90765817-B367-4A8D-A299-FE5CF540AD6A@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Search for a term in all fields
Date: Tue, 20 Feb 2007 13:33:03 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


20 feb 2007 kl. 13.29 skrev Kainth, Sachin:

> How do I search for a term in all fields of a document?

You create a boolean query with a term query for each field available  
in the document you are searching for.

<http://lucene.apache.org/java/docs/api/org/apache/lucene/index/ 
IndexReader.html#getFieldNames 
(org.apache.lucene.index.IndexReader.FieldOption)>


-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 20 12:58:24 2007
Return-Path: <java-user-return-26237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55343 invoked from network); 20 Feb 2007 12:58:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2007 12:58:23 -0000
Received: (qmail 75027 invoked by uid 500); 20 Feb 2007 12:58:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74997 invoked by uid 500); 20 Feb 2007 12:58:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74986 invoked by uid 99); 20 Feb 2007 12:58:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 04:58:24 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [88.198.57.43] (HELO fop.bsdsystems.de) (88.198.57.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 04:58:12 -0800
Received: from [192.168.1.100] (c242179.customer.hansenet.de [213.39.242.179])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by fop.bsdsystems.de (Postfix) with ESMTP id 41E36252B5
	for <java-user@lucene.apache.org>; Tue, 20 Feb 2007 13:57:51 +0100 (CET)
Message-ID: <45DAF04C.2030105@bsdsystems.de>
Date: Tue, 20 Feb 2007 13:57:48 +0100
From: Dennis Berger <dennis.berger@bsdsystems.de>
User-Agent: Thunderbird 2.0b2 (Windows/20070116)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: ranking / scoring by field which contains a given rank?
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi List,
is it possible to sort or rank by a specific field which contains only 
integer numbers? I have a few million products with a specific salesrank.
If somebody searches "palm", he will get thousands of items, pocket 
adapter, pens everything else but not the most selled items. Which are 
not accessoires, but the main palm handheld. I would like that he got it 
sorted by salesrank. And it would be nice if this could be done while 
indexing. Is this possible?
If not, are there alternatives?

Right now I fetch 2000 items and sort them by hand and kick 1900 
products away to get the best 100 items. But thats a bad idea since you 
always have to fetch a lot more items than you actually need to get 
proper results..
So I had an idea an implemented the following:

I have to say that I concat all textfields "articleno, description, long 
description" to one fulltext field.
I parse the salesrank of each item, and calculate a boost factor by 
using and logarithmic interpolation with two given points.
x0/f0 = 1/5000 and x2/f2 = 250,1.
That Way I can get very high numbers for the best selled items. Linear 
boosting shouldn't be enough.
Now I set this boostfactor on the fulltext field and after that I add 
the field and add the document.
One should expect that searching a common item, you should get the best 
selled first.
But my tests showed that it doesn't matter how I set my x0/f0 x1/f1 the 
results are nearly the same bad results.
First item is salesrank 238 second is salesrank 36.
If you take this example I boosted the fulltext field of the item with 
salesrank 36 with a factor of 1510.
salesrank 238 was only boostet with a factor of 1,507. (this is german 
notation for the decimal number one dot five. NOT one thousand five 
hundred.)
I wonder why boosting one item with a factor of thousand and one with a 
factor of ONE doesn't make a difference?
The search term appeared 2 to 3 times on each item.
I tried values between 100000 and 1. even setting boost evertime to 1, 
gives me the quite same results. With exactly the same first 20 items.

I'm stuck, maybe you can help.

My code follows.


Code
-----
 public float calcBoostinterpolLog(int x){
        if(x > 1000)
                return 0.001F;
        double result;
        int x0 = 1;
        int f0 = 50000;
        int x1 = 250;
        int f1 = 1;

        result = f0 * Math.exp(  ((x - x0)*(Math.log(f1) - Math.log(f0)) 
) / (x1 -x0));
        return new Float(result);
    }
-----

 Field field_fulltext = new 
Field(Messages.getString("Indexer.FieldFulltext"), fulltext, 
Store.YES,Index.TOKENIZED);
        field_fulltext.setBoost(boost);
        document.add(field_fulltext);
-----

kinda regards,
-Dennis


-- 
Dennis Berger
BSDSystems
Eduardstrasse 43b
20257 Hamburg

Phone: +49 (0)40 54 00 18 17
Mobile: +49 (0) 179 123 15 09
E-Mail: db@bsdsystems.de


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 20 13:21:57 2007
Return-Path: <java-user-return-26238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63382 invoked from network); 20 Feb 2007 13:21:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2007 13:21:56 -0000
Received: (qmail 12645 invoked by uid 500); 20 Feb 2007 13:21:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12613 invoked by uid 500); 20 Feb 2007 13:21:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12598 invoked by uid 99); 20 Feb 2007 13:21:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 05:21:56 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.187 as permitted sender)
Received: from [209.85.134.187] (HELO mu-out-0910.google.com) (209.85.134.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 05:21:45 -0800
Received: by mu-out-0910.google.com with SMTP id i10so791371mue
        for <java-user@lucene.apache.org>; Tue, 20 Feb 2007 05:21:23 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=b52xjo6qEEAzzBO1cs7PAxqQWdwgl+Ooy2q6H7WDieyGODKuFEwbTfD/GqsaeWFBia6wcDXlYhTVI8hLDI0UhVRSHSc2U20bv+plyF9qD5WA+uet/N78UiF1bfcErxi2CDBFWVP2VSE+LKsfIHSAwVGbrjcxH70AOaakH6HVJUI=
Received: by 10.82.175.2 with SMTP id x2mr13103321bue.1171977682947;
        Tue, 20 Feb 2007 05:21:22 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Tue, 20 Feb 2007 05:21:22 -0800 (PST)
Message-ID: <359a92830702200521u270177c9lff7e58fc63d617d4@mail.gmail.com>
Date: Tue, 20 Feb 2007 08:21:22 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search in all fields
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705E0A3AA@SGBLOW2101.wsatkins.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_52099_12270254.1171977682909"
References: <BC1CFC544422CB4A934908E126A4742705DCD3F3@SGBLOW2101.wsatkins.com>
	 <359a92830702191101h15357498h20aea6458118c0bc@mail.gmail.com>
	 <BC1CFC544422CB4A934908E126A4742705E0A3AA@SGBLOW2101.wsatkins.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_52099_12270254.1171977682909
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yes, you've got it right. But this the classic trade-off, space for speed
and what you choose to do reflects your particular situation. Doubling the
index size isn't to be done lightly, but how big is your index? If its 500M,
doubling it to 1G isn't a problem, Lucene handles this quite nicely. I'm
working with an 8G index now. If your index is 10G, well, that's something
else again.

Really, about all you can do is try and measure in your particular
situation, because you don't know ahead of time whether complex queries over
a smaller index performs better or worse than simple queries over a large
index. It all depends upon too many variables to allow anyone to provide an
abstract answer.

And, the performance question is not "is it as fast as it can be", it's "Is
it good enough for our users", a point that often gets lost in efficiency
discussions.

Best
Erick

On 2/20/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
>
> Hi Erick,
>
> I'm not sure I fully understand this.  Would I be right in saying that
> with this solution I would still need to create an "all" field which
> contains duplicates of data already indexed.  Because if this is so then
> we still have the problem of doubling the index size.
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: 19 February 2007 19:02
> To: java-user@lucene.apache.org
> Subject: Re: Search in all fields
>
> Sure. Convert your simple queries into span queries (which are also
> relatively simple). Then, when you index everything in the "all" field,
> subclass your analyzer to return a large PositionIncrementGap.
> Explaining how this works with words is awkward, so....
>
> doc.add("all", "one two three");
> doc.add("all", "four five six");
> doc.add("all", "seven eight nine");
> index the document.
>
> Assume you've implemented an analyzer that returns 1000 for
> getPositionIncrementGap.
>
> Now, the term offsets in the single document will be one - 0 two - 1
> three - 2 four 1003 five 1004 six 1005 seven 2006 eight 2007 nine 2008
>
> Now, if you use SpanNearQuery with a slop of 900 (i.e. "one nine"~900)
> you won't get a match because the "distance" between one and nine is
> more than 900. But "one three"~900 will match.
>
> It's possible to transform any query into a set of span queries, See the
> thread "Multiword Highlighting" that Mark Miller and I were exchanging
> ideas on recently. Be aware that the code we were talking about has to
> have a modification when used on a "regular" index where it pays
> attention to the document that each sub-clause comes. The code, as
> written, assumes you're using a MemoryIndex for one and only one
> document, so unless you need complex queries, I'd just think about
> rewriting simple queries with ANDs as a SpanNearQuery.
>
> Best
> Erick
>
> On 2/19/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
> >
> > Hi All,
> >
> > I want to be able to do a search for a term in all fields in a
> document.
> >
> >
> > One way this can be done is to put every element of a document in the
> > default field (or I guess any other single named field) as well as
> > separate fields in which those elements belong.  So for example if for
>
> > my documents I had the following fields:
> >
> > A, B, C, D and E
> >
> > If I then set up a field called
> >
> > All
> >
> > And for all documents I processed as well as putting the elements of
> > that document in A, B, C, D and E I would also put them as a
> > concatenation into All as well.
> >
> > One problem with this is that if for a particular document I had these
>
> > values for my five fields:
> >
> > A -> Hello
> > B -> How
> > C -> Are
> > D -> You
> > E -> Mate
> > (All -> Hello How Are You Mate)
> >
> > Then a search for "How Are You" in All would return true when no
> > single field contains this string which is not ideal.
> >
> > Another problem with this is that it would double the size of the
> > index (unless Lucene does something clever here).
> >
> > A way to solve the original issue is to convert the search for "How
> > Are You" into this:
> >
> > A:How Are You OR B:How Are You OR C:How Are You OR D:How Are You OR
> > E:How Are You
> >
> > This solves both the problems of the solution where we set up the All
> > field (viz. increasing the size of the index and  bringing back more
> > results than we should).
> >
> > However, this solution also has it's drawback and that is that now we
> > have gone from a simple query to a complex ANDing of all fields in the
>
> > document.
> >
> > My question is this: is there a third way?
> >
> > Cheers
> >
> > Sachin
> >
> >
> > This email and any attached files are confidential and copyright
> > protected. If you are not the addressee, any dissemination of this
> > communication is strictly prohibited. Unless otherwise expressly
> > agreed in writing, nothing stated in this communication shall be
> legally binding.
> >
> > The ultimate parent company of the Atkins Group is WS Atkins plc.
> > Registered in England No. 1885586.  Registered Office Woodcote Grove,
> > Ashley Road, Epsom, Surrey KT18 5BW.
> >
> > Consider the environment. Please don't print this e-mail unless you
> > really need to.
> >
>
>
> This message has been scanned for viruses by MailControl - (see
> http://bluepages.wsatkins.co.uk/?6875772)
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_52099_12270254.1171977682909--

From java-user-return-26239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 20 13:35:13 2007
Return-Path: <java-user-return-26239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67507 invoked from network); 20 Feb 2007 13:35:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2007 13:35:13 -0000
Received: (qmail 30769 invoked by uid 500); 20 Feb 2007 13:35:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30741 invoked by uid 500); 20 Feb 2007 13:35:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30723 invoked by uid 99); 20 Feb 2007 13:35:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 05:35:08 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 05:34:57 -0800
Received: by ug-out-1314.google.com with SMTP id k40so777104ugc
        for <java-user@lucene.apache.org>; Tue, 20 Feb 2007 05:34:36 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=T7cScJS5WyqfYgbQMTN/hKD38LaRqZEJF27VALpSsEteTA+W/zlhFla6N4M4k46erHjBKwy7XXK2Itq+qCk/iLOmntOYCgYis6/EK2W9f9zebn02abDvYrNpkOzBuEnuHg+EX2JhACr2t3cNU+nrcjxHjbdrFPFp4wTt0vUBKI4=
Received: by 10.82.163.13 with SMTP id l13mr13121714bue.1171978475614;
        Tue, 20 Feb 2007 05:34:35 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Tue, 20 Feb 2007 05:34:35 -0800 (PST)
Message-ID: <359a92830702200534x4bff4fcfjb6bf622f78856591@mail.gmail.com>
Date: Tue, 20 Feb 2007 08:34:35 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ranking / scoring by field which contains a given rank?
In-Reply-To: <45DAF04C.2030105@bsdsystems.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_52315_9734136.1171978475503"
References: <45DAF04C.2030105@bsdsystems.de>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_52315_9734136.1171978475503
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm puzzled why you don't index a salesrank when you build your index and
use Lucene's built-in sorting to sort them at query time. This probably
means that I didn't read your e-mail carefully enough, but... If salesrank
is something that you can pre-calculate and put in your index, this should
fix you right up.

But do be aware that the native sort is lexical, meaning that if you indexed
values 1, 2, 3, 10, the sorting would be 1, 10, 2, 3. So you need to
normalize fields like this to get them to sort correctly, perhaps padding
them with 0 (i.e. 000001, 000002, 000003, 000010). See Lucene's NumberTools
class...

Best
Erick

On 2/20/07, Dennis Berger <dennis.berger@bsdsystems.de> wrote:
>
> Hi List,
> is it possible to sort or rank by a specific field which contains only
> integer numbers? I have a few million products with a specific salesrank.
> If somebody searches "palm", he will get thousands of items, pocket
> adapter, pens everything else but not the most selled items. Which are
> not accessoires, but the main palm handheld. I would like that he got it
> sorted by salesrank. And it would be nice if this could be done while
> indexing. Is this possible?
> If not, are there alternatives?
>
> Right now I fetch 2000 items and sort them by hand and kick 1900
> products away to get the best 100 items. But thats a bad idea since you
> always have to fetch a lot more items than you actually need to get
> proper results..
> So I had an idea an implemented the following:
>
> I have to say that I concat all textfields "articleno, description, long
> description" to one fulltext field.
> I parse the salesrank of each item, and calculate a boost factor by
> using and logarithmic interpolation with two given points.
> x0/f0 = 1/5000 and x2/f2 = 250,1.
> That Way I can get very high numbers for the best selled items. Linear
> boosting shouldn't be enough.
> Now I set this boostfactor on the fulltext field and after that I add
> the field and add the document.
> One should expect that searching a common item, you should get the best
> selled first.
> But my tests showed that it doesn't matter how I set my x0/f0 x1/f1 the
> results are nearly the same bad results.
> First item is salesrank 238 second is salesrank 36.
> If you take this example I boosted the fulltext field of the item with
> salesrank 36 with a factor of 1510.
> salesrank 238 was only boostet with a factor of 1,507. (this is german
> notation for the decimal number one dot five. NOT one thousand five
> hundred.)
> I wonder why boosting one item with a factor of thousand and one with a
> factor of ONE doesn't make a difference?
> The search term appeared 2 to 3 times on each item.
> I tried values between 100000 and 1. even setting boost evertime to 1,
> gives me the quite same results. With exactly the same first 20 items.
>
> I'm stuck, maybe you can help.
>
> My code follows.
>
>
> Code
> -----
> public float calcBoostinterpolLog(int x){
>         if(x > 1000)
>                 return 0.001F;
>         double result;
>         int x0 = 1;
>         int f0 = 50000;
>         int x1 = 250;
>         int f1 = 1;
>
>         result = f0 * Math.exp(  ((x - x0)*(Math.log(f1) - Math.log(f0))
> ) / (x1 -x0));
>         return new Float(result);
>     }
> -----
>
> Field field_fulltext = new
> Field(Messages.getString("Indexer.FieldFulltext"), fulltext,
> Store.YES,Index.TOKENIZED);
>         field_fulltext.setBoost(boost);
>         document.add(field_fulltext);
> -----
>
> kinda regards,
> -Dennis
>
>
> --
> Dennis Berger
> BSDSystems
> Eduardstrasse 43b
> 20257 Hamburg
>
> Phone: +49 (0)40 54 00 18 17
> Mobile: +49 (0) 179 123 15 09
> E-Mail: db@bsdsystems.de
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_52315_9734136.1171978475503--

From java-user-return-26240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 20 14:01:38 2007
Return-Path: <java-user-return-26240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77510 invoked from network); 20 Feb 2007 14:01:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2007 14:01:36 -0000
Received: (qmail 64601 invoked by uid 500); 20 Feb 2007 14:01:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64560 invoked by uid 500); 20 Feb 2007 14:01:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64525 invoked by uid 99); 20 Feb 2007 14:01:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 06:01:24 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 06:01:14 -0800
Received: by nf-out-0910.google.com with SMTP id i2so2520941nfe
        for <java-user@lucene.apache.org>; Tue, 20 Feb 2007 06:00:53 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=Gp885C9Uka/t9T2D6g7XSzkobCEIU96fznFSNsq3YhdvwblfNjHe9t64ZJaU5oSfQoAGFepy+8w08FAOCqAyp4/8FSOdIQB5kyBTXBLTr4g25fIdKw6314QONsLpjjjLgQBEMoxU9vYmqYH1vmyBZrmJdNysyipzRuwcDpW6Baw=
Received: by 10.82.177.3 with SMTP id z3mr13111405bue.1171980053285;
        Tue, 20 Feb 2007 06:00:53 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Tue, 20 Feb 2007 06:00:53 -0800 (PST)
Message-ID: <359a92830702200600s1ee464e4l8fc57a939bcee79e@mail.gmail.com>
Date: Tue, 20 Feb 2007 09:00:53 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene 2.1 and Luke
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_52787_18487145.1171980053220"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_52787_18487145.1171980053220
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Is there a Lucene 2.1 compatible version of Luke hanging around that I've
overlooked or do I need to compile it myself?

The change notes for Lucene 2.1 indicate index format changes, and, sure
enough, when I tried to open a new index with my current version of Luke, it
doesn't work (something about "not a lucene index" <G>)...

Erick

------=_Part_52787_18487145.1171980053220--

From java-user-return-26241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 20 14:13:14 2007
Return-Path: <java-user-return-26241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81964 invoked from network); 20 Feb 2007 14:13:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2007 14:13:14 -0000
Received: (qmail 97859 invoked by uid 500); 20 Feb 2007 14:13:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97824 invoked by uid 500); 20 Feb 2007 14:13:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97813 invoked by uid 99); 20 Feb 2007 14:13:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 06:13:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 06:13:01 -0800
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id l1KECli07558
	for <java-user@lucene.apache.org>; Tue, 20 Feb 2007 08:12:47 -0600
Message-ID: <45DB01DA.1030407@getopt.org>
Date: Tue, 20 Feb 2007 15:12:42 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.1 and Luke
References: <359a92830702200600s1ee464e4l8fc57a939bcee79e@mail.gmail.com>
In-Reply-To: <359a92830702200600s1ee464e4l8fc57a939bcee79e@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Erick Erickson wrote:
> Is there a Lucene 2.1 compatible version of Luke hanging around that I've
> overlooked or do I need to compile it myself?
>
> The change notes for Lucene 2.1 indicate index format changes, and, sure
> enough, when I tried to open a new index with my current version of 
> Luke, it
> doesn't work (something about "not a lucene index" <G>)...

... any moment now ... I'm awfully busy at my day job now, but basically 
I have the package ready, only need to update the website.

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 20 14:13:53 2007
Return-Path: <java-user-return-26242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82152 invoked from network); 20 Feb 2007 14:13:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2007 14:13:51 -0000
Received: (qmail 99900 invoked by uid 500); 20 Feb 2007 14:13:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99869 invoked by uid 500); 20 Feb 2007 14:13:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99858 invoked by uid 99); 20 Feb 2007 14:13:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 06:13:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [149.28.9.26] (HELO newman.ridge.aps.org) (149.28.9.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 06:13:39 -0800
Received: from [149.28.3.207] (dhcp3-207.aps.org [149.28.3.207])
	(authenticated bits=0)
	by newman.ridge.aps.org (8.13.6/8.13.1) with ESMTP id l1KEDJhA019010
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NOT)
	for <java-user@lucene.apache.org>; Tue, 20 Feb 2007 09:13:19 -0500 (EST)
	(envelope-from apsmith@aps.org)
Message-ID: <45DB01FE.8030703@aps.org>
Date: Tue, 20 Feb 2007 09:13:18 -0500
From: Arthur Smith <apsmith@aps.org>
User-Agent: Thunderbird 1.5.0.9 (Macintosh/20061207)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.1 and Luke
References: <359a92830702200600s1ee464e4l8fc57a939bcee79e@mail.gmail.com>
In-Reply-To: <359a92830702200600s1ee464e4l8fc57a939bcee79e@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Luke works with Lucene 2.1, but you have to use the new lucene jar 
explicitly -

http://www.getopt.org/luke/
|java -classpath luke.jar;lucene.jar org.getopt.luke.Luke

|somebody will probably put together a 2.1 package soon.

       Arthur

Erick Erickson wrote:
> Is there a Lucene 2.1 compatible version of Luke hanging around that I've
> overlooked or do I need to compile it myself?
>
> The change notes for Lucene 2.1 indicate index format changes, and, sure
> enough, when I tried to open a new index with my current version of 
> Luke, it
> doesn't work (something about "not a lucene index" <G>)...
>
> Erick
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 20 14:16:31 2007
Return-Path: <java-user-return-26243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82599 invoked from network); 20 Feb 2007 14:16:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2007 14:16:28 -0000
Received: (qmail 2610 invoked by uid 500); 20 Feb 2007 14:16:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2575 invoked by uid 500); 20 Feb 2007 14:16:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2553 invoked by uid 99); 20 Feb 2007 14:16:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 06:16:28 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [202.224.39.197] (HELO mail.asahi-net.or.jp) (202.224.39.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 06:16:16 -0800
Received: from sekiguchi (ZB048110.ppp.dion.ne.jp [219.125.48.110])
	by mail.asahi-net.or.jp (Postfix) with ESMTP id 106522E94B
	for <java-user@lucene.apache.org>; Tue, 20 Feb 2007 23:15:54 +0900 (JST)
From: "Koji Sekiguchi" <koji@r.email.ne.jp>
To: <java-user@lucene.apache.org>
Subject: RE: Lucene 2.1 and Luke
Date: Tue, 20 Feb 2007 23:15:51 +0900
Message-ID: <PKEIKOCKCHNIIHNECPCCAELMDBAA.koji@r.email.ne.jp>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <45DB01DA.1030407@getopt.org>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1807
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

I thought this is a solution...
http://issues.apache.org/jira/browse/SOLR-88

Koji

> -----Original Message-----
> From: Andrzej Bialecki [mailto:ab@getopt.org]
> Sent: Tuesday, February 20, 2007 11:13 PM
> To: java-user@lucene.apache.org
> Subject: Re: Lucene 2.1 and Luke
>=20
>=20
> Erick Erickson wrote:
> > Is there a Lucene 2.1 compatible version of Luke hanging around=20
> that I've
> > overlooked or do I need to compile it myself?
> >
> > The change notes for Lucene 2.1 indicate index format changes, and, =
sure
> > enough, when I tried to open a new index with my current version of=20
> > Luke, it
> > doesn't work (something about "not a lucene index" <G>)...
>=20
> ... any moment now ... I'm awfully busy at my day job now, but =
basically=20
> I have the package ready, only need to update the website.
>=20
> --=20
> Best regards,
> Andrzej Bialecki     <><
>  ___. ___ ___ ___ _ _   __________________________________
> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> http://www.sigram.com  Contact: info at sigram dot com
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 20 14:33:19 2007
Return-Path: <java-user-return-26244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94331 invoked from network); 20 Feb 2007 14:33:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2007 14:33:18 -0000
Received: (qmail 37029 invoked by uid 500); 20 Feb 2007 14:33:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36842 invoked by uid 500); 20 Feb 2007 14:33:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36831 invoked by uid 99); 20 Feb 2007 14:33:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 06:33:16 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.228 as permitted sender)
Received: from [66.249.82.228] (HELO wx-out-0506.google.com) (66.249.82.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 06:33:04 -0800
Received: by wx-out-0506.google.com with SMTP id i29so1995073wxd
        for <java-user@lucene.apache.org>; Tue, 20 Feb 2007 06:32:44 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=L5C9lTbY4tcSt2JP8sc+fLX6RqTBH3zhsMWdOVtXC514ZyHW8lhlEGcT7/rI1PQVsaTMU03MdaLQ9nzMD1+bhja4ousk65vR2+W27ASDTihtHI6NVfLSVvfHjO4doj0AD/nqxqyxF0oecHf8AT3cj8lfY8PLCwXSvPE+2KGOVvU=
Received: by 10.90.32.14 with SMTP id f14mr8640900agf.1171981964255;
        Tue, 20 Feb 2007 06:32:44 -0800 (PST)
Received: from ?192.168.1.105? ( [216.66.114.42])
        by mx.google.com with ESMTP id 35sm12306561wra.2007.02.20.06.32.42;
        Tue, 20 Feb 2007 06:32:43 -0800 (PST)
Message-ID: <45DB065A.4000602@gmail.com>
Date: Tue, 20 Feb 2007 09:31:54 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Neuter fields in query
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I need to make a query specified with fields to be field care free when 
used against a memory index (every part of the query will match all 
fields). I am not holding my breath, but any ideas? Is the only way to 
deconstruct and reconstruct the query?

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 20 14:38:01 2007
Return-Path: <java-user-return-26245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95530 invoked from network); 20 Feb 2007 14:38:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2007 14:38:00 -0000
Received: (qmail 46386 invoked by uid 500); 20 Feb 2007 14:37:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46365 invoked by uid 500); 20 Feb 2007 14:37:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46349 invoked by uid 99); 20 Feb 2007 14:37:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 06:37:58 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.184.229 as permitted sender)
Received: from [64.233.184.229] (HELO wr-out-0506.google.com) (64.233.184.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 06:37:47 -0800
Received: by wr-out-0506.google.com with SMTP id 55so2807238wri
        for <java-user@lucene.apache.org>; Tue, 20 Feb 2007 06:37:27 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=q9C8Bkh95Dzx+S42O3Olh6QxpgOR9P7XbzpWzHixKCDVxWQGgQo7MFuVbdGeyU5FB8/9suEohRBQkqlEz3gAKyC38se1S2AnbwGIr//7WKWoitwdAwzI2N8gap8wwzrc8QA+5ibI1AVOqTBO0KBiIQkLn8NXCmVBfwWHX1BIplE=
Received: by 10.90.89.5 with SMTP id m5mr8662123agb.1171982247048;
        Tue, 20 Feb 2007 06:37:27 -0800 (PST)
Received: from ?192.168.1.105? ( [216.66.114.42])
        by mx.google.com with ESMTP id 10sm12461244wrl.2007.02.20.06.37.25;
        Tue, 20 Feb 2007 06:37:26 -0800 (PST)
Message-ID: <45DB0777.6030306@gmail.com>
Date: Tue, 20 Feb 2007 09:36:39 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene 2.1 and Luke
References: <359a92830702200600s1ee464e4l8fc57a939bcee79e@mail.gmail.com> <45DB01FE.8030703@aps.org>
In-Reply-To: <45DB01FE.8030703@aps.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

This method gets you a ways, but some stuff still does not seem to work. 
Document reconstruction for one, at least for me.

Arthur Smith wrote:
> Luke works with Lucene 2.1, but you have to use the new lucene jar 
> explicitly -
>
> http://www.getopt.org/luke/
> |java -classpath luke.jar;lucene.jar org.getopt.luke.Luke
>
> |somebody will probably put together a 2.1 package soon.
>
>       Arthur
>
> Erick Erickson wrote:
>> Is there a Lucene 2.1 compatible version of Luke hanging around that 
>> I've
>> overlooked or do I need to compile it myself?
>>
>> The change notes for Lucene 2.1 indicate index format changes, and, sure
>> enough, when I tried to open a new index with my current version of 
>> Luke, it
>> doesn't work (something about "not a lucene index" <G>)...
>>
>> Erick
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 20 14:45:31 2007
Return-Path: <java-user-return-26246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99156 invoked from network); 20 Feb 2007 14:45:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2007 14:45:29 -0000
Received: (qmail 60329 invoked by uid 500); 20 Feb 2007 14:45:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60290 invoked by uid 500); 20 Feb 2007 14:45:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60279 invoked by uid 99); 20 Feb 2007 14:45:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 06:45:28 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 06:45:17 -0800
Received: by nf-out-0910.google.com with SMTP id i2so2531870nfe
        for <java-user@lucene.apache.org>; Tue, 20 Feb 2007 06:44:56 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tDNCoijeo2nhjzlZm6eyr7QcjJev4GbDiBXrtZkPcaW1htGWdW9t5XsF0BDxSYFZqqMg85q2Rf3pJ7avvvoQEOzOLJp2VcxmRqIu2DqqIJzzApd4rtPV/cTcjFaTeZlmEPv4OjE3mnDzcvpRCMcdTgyq8R7m5Q6Hl9MQmbFHNeM=
Received: by 10.82.177.3 with SMTP id z3mr13190743bue.1171982695355;
        Tue, 20 Feb 2007 06:44:55 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Tue, 20 Feb 2007 06:44:55 -0800 (PST)
Message-ID: <359a92830702200644l21a64104uee9ba6d516dd6182@mail.gmail.com>
Date: Tue, 20 Feb 2007 09:44:55 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.1 and Luke
In-Reply-To: <PKEIKOCKCHNIIHNECPCCAELMDBAA.koji@r.email.ne.jp>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_53619_18349764.1171982695097"
References: <45DB01DA.1030407@getopt.org>
	 <PKEIKOCKCHNIIHNECPCCAELMDBAA.koji@r.email.ne.jp>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_53619_18349764.1171982695097
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks all, this gets me "far enough" for a while.

And Andrezj, I can't thank you enough for writing and maintaining this tool,
it's saved me endless grief over the past year!

Best
Erick

On 2/20/07, Koji Sekiguchi <koji@r.email.ne.jp> wrote:
>
> I thought this is a solution...
> http://issues.apache.org/jira/browse/SOLR-88
>
> Koji
>
> > -----Original Message-----
> > From: Andrzej Bialecki [mailto:ab@getopt.org]
> > Sent: Tuesday, February 20, 2007 11:13 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: Lucene 2.1 and Luke
> >
> >
> > Erick Erickson wrote:
> > > Is there a Lucene 2.1 compatible version of Luke hanging around
> > that I've
> > > overlooked or do I need to compile it myself?
> > >
> > > The change notes for Lucene 2.1 indicate index format changes, and,
> sure
> > > enough, when I tried to open a new index with my current version of
> > > Luke, it
> > > doesn't work (something about "not a lucene index" <G>)...
> >
> > ... any moment now ... I'm awfully busy at my day job now, but basically
> > I have the package ready, only need to update the website.
> >
> > --
> > Best regards,
> > Andrzej Bialecki     <><
> >  ___. ___ ___ ___ _ _   __________________________________
> > [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> > ___|||__||  \|  ||  |  Embedded Unix, System Integration
> > http://www.sigram.com  Contact: info at sigram dot com
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_53619_18349764.1171982695097--

From java-user-return-26247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 20 15:04:24 2007
Return-Path: <java-user-return-26247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5928 invoked from network); 20 Feb 2007 15:04:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2007 15:04:23 -0000
Received: (qmail 96063 invoked by uid 500); 20 Feb 2007 15:04:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96038 invoked by uid 500); 20 Feb 2007 15:04:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96027 invoked by uid 99); 20 Feb 2007 15:04:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 07:04:24 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 07:04:13 -0800
Received: by nf-out-0910.google.com with SMTP id i2so2536737nfe
        for <java-user@lucene.apache.org>; Tue, 20 Feb 2007 07:03:52 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=H5wdRrX2C7O+35OrWwHbL1Gjb5IikeyGLIcTdUlSimaV8UrPEb4FUdCLZYQFamkdSD4OJwYmahbawbdh3AxPm4tSVo21x79C+dF4Q/LhPzhCZmGESVsc07041AAG4h2yAArnrP+yIKYxV1q+mws+Co/mU6UdGKU36zkbRN4FPIo=
Received: by 10.82.120.14 with SMTP id s14mr13289988buc.1171983831569;
        Tue, 20 Feb 2007 07:03:51 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Tue, 20 Feb 2007 07:03:51 -0800 (PST)
Message-ID: <359a92830702200703p335ee8b8gf7994f2e0af9b897@mail.gmail.com>
Date: Tue, 20 Feb 2007 10:03:51 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Neuter fields in query
In-Reply-To: <45DB065A.4000602@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_54547_9908931.1171983831525"
References: <45DB065A.4000602@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_54547_9908931.1171983831525
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Golleeee, Mark, it sounds like we're working on very similar projects <G>. I
solved something similar by storing the relevant parts of the original query
away ahead of time in a format suitable for using with the MemoryIndex. It
was lots easier to handle that way in my app, since I got in unfielded data
(entries on a form) that I had to map to one or more fields in my index
anyway, so it was just pretty much the raw query. All the manipulations I
had to do to make things work out (implied proximity and stemming with exact
matches etc....) were handled by throwing the raw query at the same
parser/analyzer for the MemoryIndex that I used originally with (you guessed
it) no fields in the query and just letting it default to the only field in
my MemoryIndex.....

Don't know if this helps or not.

Best
Erick

On 2/20/07, Mark Miller <markrmiller@gmail.com> wrote:
>
> I need to make a query specified with fields to be field care free when
> used against a memory index (every part of the query will match all
> fields). I am not holding my breath, but any ideas? Is the only way to
> deconstruct and reconstruct the query?
>
> - Mark
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_54547_9908931.1171983831525--

From java-user-return-26248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 20 16:09:03 2007
Return-Path: <java-user-return-26248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32364 invoked from network); 20 Feb 2007 16:09:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2007 16:09:01 -0000
Received: (qmail 8687 invoked by uid 500); 20 Feb 2007 16:09:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8651 invoked by uid 500); 20 Feb 2007 16:09:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8640 invoked by uid 99); 20 Feb 2007 16:09:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 08:09:02 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 209.85.132.250 as permitted sender)
Received: from [209.85.132.250] (HELO an-out-0708.google.com) (209.85.132.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 08:08:50 -0800
Received: by an-out-0708.google.com with SMTP id c3so367907ana
        for <java-user@lucene.apache.org>; Tue, 20 Feb 2007 08:08:29 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=HMvhKnWL0rxzFAkauXfQ9eKVayy0J+VE1blu8qfuuCUV6r5olEQyYaiDrs3WS6GBHwCAFSIPHFpFJdq0jgQfo3e+wgbTZkaxb8KSyv2P1+ffB5xp7QUdXPugmcl32wBF6kOciDbJVVu+3ibHg4k0CYvr5D9Vb13FQPQpVuXDwME=
Received: by 10.100.91.6 with SMTP id o6mr2820977anb.1171987709765;
        Tue, 20 Feb 2007 08:08:29 -0800 (PST)
Received: from ?192.168.1.105? ( [216.66.114.42])
        by mx.google.com with ESMTP id 15sm17745579wrl.2007.02.20.08.08.27;
        Tue, 20 Feb 2007 08:08:29 -0800 (PST)
Message-ID: <45DB1CCA.1030409@gmail.com>
Date: Tue, 20 Feb 2007 11:07:38 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Neuter fields in query
References: <45DB065A.4000602@gmail.com> <359a92830702200703p335ee8b8gf7994f2e0af9b897@mail.gmail.com>
In-Reply-To: <359a92830702200703p335ee8b8gf7994f2e0af9b897@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the info Erick. Unfortunately, I need to be able to do this 
with any old Query that is supplied to me...no access to the 'raw' query 
:( I also need the process to be relatively cheap which is why I don't 
wan to deconstruct and reconstruct.

- Mark

Erick Erickson wrote:
> Golleeee, Mark, it sounds like we're working on very similar projects 
> <G>. I
> solved something similar by storing the relevant parts of the original 
> query
> away ahead of time in a format suitable for using with the 
> MemoryIndex. It
> was lots easier to handle that way in my app, since I got in unfielded 
> data
> (entries on a form) that I had to map to one or more fields in my index
> anyway, so it was just pretty much the raw query. All the manipulations I
> had to do to make things work out (implied proximity and stemming with 
> exact
> matches etc....) were handled by throwing the raw query at the same
> parser/analyzer for the MemoryIndex that I used originally with (you 
> guessed
> it) no fields in the query and just letting it default to the only 
> field in
> my MemoryIndex.....
>
> Don't know if this helps or not.
>
> Best
> Erick
>
> On 2/20/07, Mark Miller <markrmiller@gmail.com> wrote:
>>
>> I need to make a query specified with fields to be field care free when
>> used against a memory index (every part of the query will match all
>> fields). I am not holding my breath, but any ideas? Is the only way to
>> deconstruct and reconstruct the query?
>>
>> - Mark
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 20 18:31:01 2007
Return-Path: <java-user-return-26249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82232 invoked from network); 20 Feb 2007 18:31:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2007 18:31:00 -0000
Received: (qmail 84378 invoked by uid 500); 20 Feb 2007 18:31:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84348 invoked by uid 500); 20 Feb 2007 18:31:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84333 invoked by uid 99); 20 Feb 2007 18:31:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 10:31:01 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 10:30:50 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id D4AAF5B770; Tue, 20 Feb 2007 10:30:29 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id CA8437F403
	for <java-user@lucene.apache.org>; Tue, 20 Feb 2007 10:30:29 -0800 (PST)
Date: Tue, 20 Feb 2007 10:30:29 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Search for a term in all fields
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705E0AA2C@SGBLOW2101.wsatkins.com>
Message-ID: <Pine.LNX.4.58.0702201016190.16563@hal.rescomp.berkeley.edu>
References: <BC1CFC544422CB4A934908E126A4742705E0AA2C@SGBLOW2101.wsatkins.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


The information Erick gave you when you asked this question yesterday is
all very accurate -- the one addition i would make is that you don't need
SpanNear queries to take advantage of positionINcrimentGap --
PhraseQueries do that to.

Consolidating your fields into a single "all" field, or constructing a
BoolenQuery across all of your existing fields are really the two
main options -- each with their tradeoffs.

http://www.nabble.com/Search-in-all-fields-tf3254569.html

: Date: Tue, 20 Feb 2007 12:29:25 -0000
: From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Search for a term in all fields
:
: Hi all,
:
: How do I search for a term in all fields of a document?
:
: Cheers
:
: Sachin
:
:
: This email and any attached files are confidential and copyright protected. If you are not the addressee, any dissemination of this communication is strictly prohibited. Unless otherwise expressly agreed in writing, nothing stated in this communication shall be legally binding.
:
: The ultimate parent company of the Atkins Group is WS Atkins plc.  Registered in England No. 1885586.  Registered Office Woodcote Grove, Ashley Road, Epsom, Surrey KT18 5BW.
:
: Consider the environment. Please don't print this e-mail unless you really need to.
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 20 19:05:58 2007
Return-Path: <java-user-return-26250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93058 invoked from network); 20 Feb 2007 19:05:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2007 19:05:57 -0000
Received: (qmail 54075 invoked by uid 500); 20 Feb 2007 19:05:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54038 invoked by uid 500); 20 Feb 2007 19:05:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54012 invoked by uid 99); 20 Feb 2007 19:05:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 11:05:58 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of shai.deljo@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 11:05:47 -0800
Received: by ug-out-1314.google.com with SMTP id k40so857600ugc
        for <java-user@lucene.apache.org>; Tue, 20 Feb 2007 11:05:26 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=E6vRumASKKsw0QyenchocWbGPGTUa5Jd3JE4qmiT5qfb/rpyG80OA4qCOnOlaL1rMPgqo49OZqp0onH14Lx5rn2HPudHe+Joqt/p5J3uh0pqQRWqrFiQWYimdvyvj9/oy3e/mlRmmjw6KHXJDr5OAG/44zQq/rWyXC7XaWj5xs8=
Received: by 10.78.181.13 with SMTP id d13mr636995huf.1171998325522;
        Tue, 20 Feb 2007 11:05:25 -0800 (PST)
Received: by 10.49.80.20 with HTTP; Tue, 20 Feb 2007 11:05:25 -0800 (PST)
Message-ID: <17f11d00702201105y6806f334i889b3a1ee91234c6@mail.gmail.com>
Date: Tue, 20 Feb 2007 11:05:25 -0800
From: "shai deljo" <shai.deljo@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using Lucene - Design Question
In-Reply-To: <854061.90847.qm@web50310.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <854061.90847.qm@web50310.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
Thanks for the reply.
* Regarding hardware I'll use something similar to: Core 2 Duo -
2.66GHz, 2x300 GB disk drives, 4 GB RAM running on one of the Linux
distributions.
* Regarding response time I'm looking to be ~300 milliseconds for at
least 80% of queries and ~500 milliseconds for 95% of queries.
* Will MultiSearcher (and it's parallel cosine :) ) allow me to search
indices cross multiple servers or is the assumption is that all
indices are on 1 server?
Thanks


On 2/20/07, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> Hi Shi,
>
> Nobody will be able to give you the precise answer, obviously.  The best way is to try.
> You didn't say what response time is desirable nor what kind of hardware you will be using.
>
> I wouldn't bother with the Berkeley DB-backed Lucene index for now, just use the regular one (maybe use non-compound format).
> If you need to partition your index, MultiSearcher will help you search all your indices, and its Parallel cousin will let you parallelize those searches.
> It sounds like rsync will work, but you'll have to make sure that the segments file gets rsynced last.
>
> Otis
>
> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
>
> ----- Original Message ----
> From: shai deljo <shai.deljo@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, February 20, 2007 5:51:13 AM
> Subject: Using Lucene - Design Question
>
> Hi,
> I have no experience with Lucene and I'm trying to collect some
> information in order to determine what solution is best for me.
> I need to index ~50M documents (starting with 10M), the size of each
> document is ~2k-~5k and I'll index a couple of fields per document. I
> expect ~20 queries per seconds and each query is ~4 terms. Update rate
> - not sure what is best and/or possible strategy based on performance,
> i.e. incremental indexing vs. pushing a full index but as far as the
> product is concerned most data can be updated daily, the head (let's
> say 20%) needs hourly (or at least on the order of hours) update.
> I also need to be able to override the scoring/ranking and inject my
> own logic and of course  my main concern is response time, especially
> since i have additional computation on the hits before returning the
> results.
>
> BTW, for the additional ranking/computation i will need to retrieve
> values that are mapped by a term-field key, i.e. i can't know the key
> until i have the result and the query in my hands. i figured i would
> use Oracle Berkeley DB Java edition in order to keep the calls as much
> as possible in the memory -> any advise on this as well ?
>
> For these requirements, do i need to worry about partitioning the
> Index? If i do partition it, is there a solution to merge the results
> back or do i need to do it on my own (does Solr do it for me and if it
> does, can i override the scoring there)?
> AS far as serving multiple users, will a simple rsync of the index
> between multiple nodes running the same index (i am not that sensitive
> to data integrity) work or do i need to look at something like
> terracotta?
>
> In short, i am looking for the simplest solution.
>
> Thanks in advance.
> Shi
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 20 19:23:29 2007
Return-Path: <java-user-return-26251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99092 invoked from network); 20 Feb 2007 19:23:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2007 19:23:28 -0000
Received: (qmail 76803 invoked by uid 500); 20 Feb 2007 19:23:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76578 invoked by uid 500); 20 Feb 2007 19:23:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76567 invoked by uid 99); 20 Feb 2007 19:23:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 11:23:29 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [192.31.106.7] (HELO mailgw1a.lmco.com) (192.31.106.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 11:23:17 -0800
Received: from emss07g01.ems.lmco.com (relay5.ems.lmco.com [166.29.2.16])by mailgw1a.lmco.com  (LM-6) with ESMTP id l1KJMte2007561for <java-user@lucene.apache.org>; Tue, 20 Feb 2007 12:22:56 -0700 (MST)
Received: from CONVERSION-DAEMON.lmco.com by lmco.com (PMDF V6.3-x3 #31239)
 id <0JDS001010H01A@lmco.com> for java-user@lucene.apache.org; Tue, 20 Feb 2007 12:22:55 -0700 (MST)
Received: from EMSS09I00.us.lmco.com ([158.183.26.31]) by lmco.com (PMDF V6.3-x3 #31239)
 with ESMTP id <0JDS00KC90HLSO@lmco.com> for java-user@lucene.apache.org; Tue, 20 Feb 2007 12:22:34 -0700 (MST)
Received: from emss10m05.us.lmco.com ([158.187.0.248]) by EMSS09I00.us.lmco.com with Microsoft SMTPSVC(5.0.2195.6713); Tue,
 20 Feb 2007 14:22:33 -0500
Date: Tue, 20 Feb 2007 14:22:33 -0500
From: "Walker, Keith 1" <keith.1.walker@lmco.com>
Subject: Running Lucene as a stateless session bean
To: java-user@lucene.apache.org
Message-id: <1AEC2AECA2A5B04BA1A56FADE29F0302024FCB15@emss10m05.us.lmco.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.5
Content-type: multipart/alternative; boundary="Boundary_(ID_COXuNcxOszvGiQe/gqhatA)"
Thread-Topic: Running Lucene as a stateless session bean
Thread-Index: AcdVJF5bZVdw5+HmSiKjcXueQxTL4w==
Content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
X-OriginalArrivalTime: 20 Feb 2007 19:22:33.0969 (UTC) FILETIME=[78F27E10:01C75524]
X-Virus-Checked: Checked by ClamAV on apache.org

--Boundary_(ID_COXuNcxOszvGiQe/gqhatA)
Content-type: text/plain; charset=US-ASCII
Content-transfer-encoding: 7BIT

I'm using an EJB to process documents using Lucene 1.3.  Things are
working fine now, but I  wanted to double check that this will work with
multiple instances of the EJB.  I know this is not conforming to the EJB
spec concerning file I/O, but ignoring that for now, my question is
about thread safety.  From the FAQ I see that IndexWriter and
IndexSearcher are thread safe, but QueryParser is not, so I'll have to
change that to a singleton.

My use of Lucene is not the typical scenario:  A document is converted
from it's original format (ex. PDF) using the GATE framework, then the
index created, a query parsed, the query run, and the index deleted.  So
each call to the EJB is acting only on objects/index created during that
call.  Here are the core steps:

Factory.createDataStore("gate.persist.SerialDataStore",
				datastoreURLStr);  [GATE call]
indexedCorpus.getIndexManager().createIndex();  [GATE call that uses
Lucene under the hood]
IndexSearcher search = new IndexSearcher(this.indexedCorpus
	
.getIndexDefinition().getIndexLocation());
luceneQuery = QueryParser.parse(theQuery,"body", new SimpleAnalyzer());
Hits hits = search.search(luceneQuery);
Explanation ex = search.explain(luceneQuery, hits.id(0));
deleteDirectory(this.indexSubDir);
Factory.deleteResource(this.indexedCorpus); [GATE call]


Thanks,
Keith

--Boundary_(ID_COXuNcxOszvGiQe/gqhatA)--

From java-user-return-26252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 20 20:16:21 2007
Return-Path: <java-user-return-26252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17208 invoked from network); 20 Feb 2007 20:16:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2007 20:16:19 -0000
Received: (qmail 69713 invoked by uid 500); 20 Feb 2007 20:16:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69681 invoked by uid 500); 20 Feb 2007 20:16:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69669 invoked by uid 99); 20 Feb 2007 20:16:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 12:16:21 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [217.12.11.36] (HELO smtp005.mail.ukl.yahoo.com) (217.12.11.36)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 20 Feb 2007 12:16:08 -0800
Received: (qmail 3510 invoked from network); 20 Feb 2007 20:15:45 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-YMail-OSG:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=fS9Q2emVAJktd1cO0VQkcILiENrLoo2eXOmDZqsUmYQ2U346aoBNkWaF+oMphUQDdy8pNB+wPB9r0PwcrD0gF6bVYviMWSl+EXfve3Z5EMtfI/uR21kmbEovtudMzD/YsBJBBdhfCpJ0aXfTeZXHBsxgG/5Q3Ind+SKryqdj9c8=  ;
Received: from unknown (HELO ?127.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp005.mail.ukl.yahoo.com with SMTP; 20 Feb 2007 20:15:45 -0000
X-YMail-OSG: .cHRg6QVM1k_AQtWjEWb3HLYlbwmQ52nEueNGlCKX47vT3pEwvpNLTrMnpCP9nNEobPq0f1tY02JLdTunpDCBPyTuvBFYeTd2gkjoR8tJ3euzPKsR1dXpqtPncZjux2UiRm45MDD48B.
Message-ID: <45DB56EA.2070005@yahoo.co.uk>
Date: Tue, 20 Feb 2007 20:15:38 +0000
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Running Lucene as a stateless session bean
References: <1AEC2AECA2A5B04BA1A56FADE29F0302024FCB15@emss10m05.us.lmco.com>
In-Reply-To: <1AEC2AECA2A5B04BA1A56FADE29F0302024FCB15@emss10m05.us.lmco.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Be careful with your use of GATE and multiple threads.
I recently had some trouble with their Factory.delete.. methods which 
ended up requiring a change to the core and this was applied to the 4.0 
trunk. A 3.1 patch has not been released so you'll need to be using the 
latest from SVN (now requires Java 1.5). GATE applications/Controller 
Pipelines are still un-threadsafe and are likely to remain that way.
However, it looks to me like you're only using it for it's document 
parser framework here so I'd recommend looking at Lius or the Lucene in 
Action parser framework.

Cheers,
Mark


Walker, Keith 1 wrote:
> I'm using an EJB to process documents using Lucene 1.3.  Things are
> working fine now, but I  wanted to double check that this will work with
> multiple instances of the EJB.  I know this is not conforming to the EJB
> spec concerning file I/O, but ignoring that for now, my question is
> about thread safety.  From the FAQ I see that IndexWriter and
> IndexSearcher are thread safe, but QueryParser is not, so I'll have to
> change that to a singleton.
>
> My use of Lucene is not the typical scenario:  A document is converted
> from it's original format (ex. PDF) using the GATE framework, then the
> index created, a query parsed, the query run, and the index deleted.  So
> each call to the EJB is acting only on objects/index created during that
> call.  Here are the core steps:
>
> Factory.createDataStore("gate.persist.SerialDataStore",
> 				datastoreURLStr);  [GATE call]
> indexedCorpus.getIndexManager().createIndex();  [GATE call that uses
> Lucene under the hood]
> IndexSearcher search = new IndexSearcher(this.indexedCorpus
> 	
> .getIndexDefinition().getIndexLocation());
> luceneQuery = QueryParser.parse(theQuery,"body", new SimpleAnalyzer());
> Hits hits = search.search(luceneQuery);
> Explanation ex = search.explain(luceneQuery, hits.id(0));
> deleteDirectory(this.indexSubDir);
> Factory.deleteResource(this.indexedCorpus); [GATE call]
>
>
> Thanks,
> Keith
>
>   



		
___________________________________________________________ 
The all-new Yahoo! Mail goes wherever you go - free your email address from your Internet provider. http://uk.docs.yahoo.com/nowyoucan.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 20 20:30:25 2007
Return-Path: <java-user-return-26253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27002 invoked from network); 20 Feb 2007 20:30:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2007 20:30:24 -0000
Received: (qmail 91710 invoked by uid 500); 20 Feb 2007 20:30:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91676 invoked by uid 500); 20 Feb 2007 20:30:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91665 invoked by uid 99); 20 Feb 2007 20:30:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 12:30:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.39.227] (HELO web50314.mail.yahoo.com) (206.190.39.227)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 20 Feb 2007 12:30:14 -0800
Received: (qmail 62019 invoked by uid 60001); 20 Feb 2007 20:29:53 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=LsYDFzSPSA2TvEHkOgIL5HUej5ag0ORRyL4up22zJdT714+9oIKBuMLQ4w5IaEBT9C+1ocLX35P/3ZFwQfJzF3q8zc6l5IagFQm7qgRXccd7NNPCO4ulC62XFzMgM1YiIjCL1vGcHiD7xxEw9AMCIW+DGD7+ElSVG+AXKFndAL4=;
X-YMail-OSG: MRJhUGkVM1l2ZcNO4zea6ddfmmIZesp3yl3PEn9HZsv5WpKnjnGa6pMkXxbzGNIHTgiWZrR4BvujtCR0KpLHWgHJWxNL6VJQGXghc27Ug_wHr8tsa1Lkb6mS0dOoaQaeD4Iha1tCCsItBsw-
Received: from [58.63.153.227] by web50314.mail.yahoo.com via HTTP; Tue, 20 Feb 2007 12:29:53 PST
X-Mailer: YahooMailRC/368.8 YahooMailWebService/0.6.132.8
Date: Tue, 20 Feb 2007 12:29:52 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Using Lucene - Design Question
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <12149.61556.qm@web50314.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Well, there is also a Remote cousin there.  That will let you distribute yo=
ur indices over N severs (sounds like you'll need multiple).  You should re=
ally take a stroll through Lucene's javadoc, it's incredibly nice now in wi=
nter time.  Or ... clears throat.... you could get a book ;)=0A=0AOtis=0A .=
 . . . . . . . . . . . . . . . . . . . . . . . . . . . . .=0ASimpy -- http:=
//www.simpy.com/  -  Tag  -  Search  -  Share=0A=0A----- Original Message -=
---=0AFrom: shai deljo <shai.deljo@gmail.com>=0ATo: java-user@lucene.apache=
.org=0ASent: Tuesday, February 20, 2007 2:05:25 PM=0ASubject: Re: Using Luc=
ene - Design Question=0A=0AHi,=0AThanks for the reply.=0A* Regarding hardwa=
re I'll use something similar to: Core 2 Duo -=0A2.66GHz, 2x300 GB disk dri=
ves, 4 GB RAM running on one of the Linux=0Adistributions.=0A* Regarding re=
sponse time I'm looking to be ~300 milliseconds for at=0Aleast 80% of queri=
es and ~500 milliseconds for 95% of queries.=0A* Will MultiSearcher (and it=
's parallel cosine :) ) allow me to search=0Aindices cross multiple servers=
 or is the assumption is that all=0Aindices are on 1 server?=0AThanks=0A=0A=
=0AOn 2/20/07, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:=0A> Hi =
Shi,=0A>=0A> Nobody will be able to give you the precise answer, obviously.=
  The best way is to try.=0A> You didn't say what response time is desirabl=
e nor what kind of hardware you will be using.=0A>=0A> I wouldn't bother wi=
th the Berkeley DB-backed Lucene index for now, just use the regular one (m=
aybe use non-compound format).=0A> If you need to partition your index, Mul=
tiSearcher will help you search all your indices, and its Parallel cousin w=
ill let you parallelize those searches.=0A> It sounds like rsync will work,=
 but you'll have to make sure that the segments file gets rsynced last.=0A>=
=0A> Otis=0A>=0A> . . . . . . . . . . . . . . . . . . . . . . . . . . . . .=
 .=0A> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share=0A>=0A> =
----- Original Message ----=0A> From: shai deljo <shai.deljo@gmail.com>=0A>=
 To: java-user@lucene.apache.org=0A> Sent: Tuesday, February 20, 2007 5:51:=
13 AM=0A> Subject: Using Lucene - Design Question=0A>=0A> Hi,=0A> I have no=
 experience with Lucene and I'm trying to collect some=0A> information in o=
rder to determine what solution is best for me.=0A> I need to index ~50M do=
cuments (starting with 10M), the size of each=0A> document is ~2k-~5k and I=
'll index a couple of fields per document. I=0A> expect ~20 queries per sec=
onds and each query is ~4 terms. Update rate=0A> - not sure what is best an=
d/or possible strategy based on performance,=0A> i.e. incremental indexing =
vs. pushing a full index but as far as the=0A> product is concerned most da=
ta can be updated daily, the head (let's=0A> say 20%) needs hourly (or at l=
east on the order of hours) update.=0A> I also need to be able to override =
the scoring/ranking and inject my=0A> own logic and of course  my main conc=
ern is response time, especially=0A> since i have additional computation on=
 the hits before returning the=0A> results.=0A>=0A> BTW, for the additional=
 ranking/computation i will need to retrieve=0A> values that are mapped by =
a term-field key, i.e. i can't know the key=0A> until i have the result and=
 the query in my hands. i figured i would=0A> use Oracle Berkeley DB Java e=
dition in order to keep the calls as much=0A> as possible in the memory -> =
any advise on this as well ?=0A>=0A> For these requirements, do i need to w=
orry about partitioning the=0A> Index? If i do partition it, is there a sol=
ution to merge the results=0A> back or do i need to do it on my own (does S=
olr do it for me and if it=0A> does, can i override the scoring there)?=0A>=
 AS far as serving multiple users, will a simple rsync of the index=0A> bet=
ween multiple nodes running the same index (i am not that sensitive=0A> to =
data integrity) work or do i need to look at something like=0A> terracotta?=
=0A>=0A> In short, i am looking for the simplest solution.=0A>=0A> Thanks i=
n advance.=0A> Shi=0A>=0A> ------------------------------------------------=
---------------------=0A> To unsubscribe, e-mail: java-user-unsubscribe@luc=
ene.apache.org=0A> For additional commands, e-mail: java-user-help@lucene.a=
pache.org=0A>=0A>=0A>=0A>=0A>=0A> -----------------------------------------=
----------------------------=0A> To unsubscribe, e-mail: java-user-unsubscr=
ibe@lucene.apache.org=0A> For additional commands, e-mail: java-user-help@l=
ucene.apache.org=0A>=0A>=0A=0A---------------------------------------------=
------------------------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lu=
cene.apache.org=0AFor additional commands, e-mail: java-user-help@lucene.ap=
ache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 20 20:43:30 2007
Return-Path: <java-user-return-26254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31437 invoked from network); 20 Feb 2007 20:43:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2007 20:43:28 -0000
Received: (qmail 10104 invoked by uid 500); 20 Feb 2007 20:43:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10068 invoked by uid 500); 20 Feb 2007 20:43:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10051 invoked by uid 99); 20 Feb 2007 20:43:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 12:43:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.155 as permitted sender)
Received: from [195.212.29.155] (HELO mtagate6.de.ibm.com) (195.212.29.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 12:43:16 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate6.de.ibm.com (8.13.8/8.13.8) with ESMTP id l1KKgtva147540
	for <java-user@lucene.apache.org>; Tue, 20 Feb 2007 20:42:55 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.2) with ESMTP id l1KKgsLU1994898
	for <java-user@lucene.apache.org>; Tue, 20 Feb 2007 21:42:55 +0100
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l1KKgssM009153
	for <java-user@lucene.apache.org>; Tue, 20 Feb 2007 21:42:54 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l1KKgons009128
	for <java-user@lucene.apache.org>; Tue, 20 Feb 2007 21:42:50 +0100
In-Reply-To: <1AEC2AECA2A5B04BA1A56FADE29F0302024FCB15@emss10m05.us.lmco.com>
Subject: Re: Running Lucene as a stateless session bean
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFB3A57BEE.4469CC4D-ON88257288.006D2662-88257288.00718D35@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Tue, 20 Feb 2007 12:40:17 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 20/02/2007 22:42:50
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Is that perhaps Lucene 1.4.3?
(Current release is 2.1.0, I am not aware of 1.3, such
old version is not even in the releases archives).

The static parse() was deprecated at 1.9 and removed
at 2.0, so it must be Lucene 1.9 or older.

Anyhow, at least from Lucene point of view (I am not
familiar with GATE), by instantiating (each time) a new
QueryParser object and using it, there should be no
thread safety problems.

Regards,
Doron


"Walker, Keith 1" <keith.1.walker@lmco.com> wrote on 20/02/2007 11:22:33:

> I'm using an EJB to process documents using Lucene 1.3.  Things are
> working fine now, but I  wanted to double check that this will work with
> multiple instances of the EJB.  I know this is not conforming to the EJB
> spec concerning file I/O, but ignoring that for now, my question is
> about thread safety.  From the FAQ I see that IndexWriter and
> IndexSearcher are thread safe, but QueryParser is not, so I'll have to
> change that to a singleton.

I think "singleton" would not be a good idea, thread safety wise.

>
> My use of Lucene is not the typical scenario:  A document is converted
> from it's original format (ex. PDF) using the GATE framework, then the
> index created, a query parsed, the query run, and the index deleted.  So
> each call to the EJB is acting only on objects/index created during that
> call.  Here are the core steps:
>
> Factory.createDataStore("gate.persist.SerialDataStore",
>             datastoreURLStr);  [GATE call]
> indexedCorpus.getIndexManager().createIndex();  [GATE call that uses
> Lucene under the hood]
> IndexSearcher search = new IndexSearcher(this.indexedCorpus
>
> .getIndexDefinition().getIndexLocation());
> luceneQuery = QueryParser.parse(theQuery,"body", new SimpleAnalyzer());
> Hits hits = search.search(luceneQuery);
> Explanation ex = search.explain(luceneQuery, hits.id(0));
> deleteDirectory(this.indexSubDir);
> Factory.deleteResource(this.indexedCorpus); [GATE call]
>
>
> Thanks,
> Keith


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 21 01:10:04 2007
Return-Path: <java-user-return-26255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4707 invoked from network); 21 Feb 2007 01:10:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2007 01:10:02 -0000
Received: (qmail 8940 invoked by uid 500); 21 Feb 2007 01:10:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7896 invoked by uid 500); 21 Feb 2007 01:10:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7885 invoked by uid 99); 21 Feb 2007 01:10:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 17:10:00 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of shai.deljo@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 17:09:49 -0800
Received: by nf-out-0910.google.com with SMTP id i2so48737nfe
        for <java-user@lucene.apache.org>; Tue, 20 Feb 2007 17:09:28 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=kmsxA3nk6aBFwllDjUmUTplmur5ig0+9qY5H9OFgNR7dvEws4OWoU3P2fTVk3jj1TQM4d+V5D/Ck6CTXyRBB03KhK2/xddF5dWy8NgYfOK8Eb2cTQ4jUJ8PVtGs6Dvas9layGurhE7GkK9sHKudVez6zg+knho10gMHe8PceRx8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=HSv80zWNFP5fBi9mG3gC6vbWe6pJr/r6noUFhBRzlPeFMId4zEfIVHtzOuVEe9dTTbpc3yC8coCE70VRKZ0RaaaAxm8NjT0ZLyNorPm11HXSckZ04QeiYg9YLaqiwP5P8YbuYKueBLucHJN/Gu0hpWiSyENdF8RczxZm/KAulRU=
Received: by 10.48.202.11 with SMTP id z11mr390248nff.1172020168295;
        Tue, 20 Feb 2007 17:09:28 -0800 (PST)
Received: by 10.49.80.20 with HTTP; Tue, 20 Feb 2007 17:09:28 -0800 (PST)
Message-ID: <17f11d00702201709r3bd00dau835f457b6d76bedb@mail.gmail.com>
Date: Tue, 20 Feb 2007 17:09:28 -0800
From: "shai deljo" <shai.deljo@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using Lucene - Design Question
In-Reply-To: <12149.61556.qm@web50314.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <12149.61556.qm@web50314.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I considered getting  Lucene in action but figured I'll wait for the
DVD to come out ;).
Seriously though, they write about RemoteSearchable and use RMI, Is
this the recommended solution? does it scale well?
Thanks

On 2/20/07, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> Well, there is also a Remote cousin there.  That will let you distribute your indices over N severs (sounds like you'll need multiple).  You should really take a stroll through Lucene's javadoc, it's incredibly nice now in winter time.  Or ... clears throat.... you could get a book ;)
>
> Otis
>  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
>
> ----- Original Message ----
> From: shai deljo <shai.deljo@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, February 20, 2007 2:05:25 PM
> Subject: Re: Using Lucene - Design Question
>
> Hi,
> Thanks for the reply.
> * Regarding hardware I'll use something similar to: Core 2 Duo -
> 2.66GHz, 2x300 GB disk drives, 4 GB RAM running on one of the Linux
> distributions.
> * Regarding response time I'm looking to be ~300 milliseconds for at
> least 80% of queries and ~500 milliseconds for 95% of queries.
> * Will MultiSearcher (and it's parallel cosine :) ) allow me to search
> indices cross multiple servers or is the assumption is that all
> indices are on 1 server?
> Thanks
>
>
> On 2/20/07, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> > Hi Shi,
> >
> > Nobody will be able to give you the precise answer, obviously.  The best way is to try.
> > You didn't say what response time is desirable nor what kind of hardware you will be using.
> >
> > I wouldn't bother with the Berkeley DB-backed Lucene index for now, just use the regular one (maybe use non-compound format).
> > If you need to partition your index, MultiSearcher will help you search all your indices, and its Parallel cousin will let you parallelize those searches.
> > It sounds like rsync will work, but you'll have to make sure that the segments file gets rsynced last.
> >
> > Otis
> >
> > . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> > Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
> >
> > ----- Original Message ----
> > From: shai deljo <shai.deljo@gmail.com>
> > To: java-user@lucene.apache.org
> > Sent: Tuesday, February 20, 2007 5:51:13 AM
> > Subject: Using Lucene - Design Question
> >
> > Hi,
> > I have no experience with Lucene and I'm trying to collect some
> > information in order to determine what solution is best for me.
> > I need to index ~50M documents (starting with 10M), the size of each
> > document is ~2k-~5k and I'll index a couple of fields per document. I
> > expect ~20 queries per seconds and each query is ~4 terms. Update rate
> > - not sure what is best and/or possible strategy based on performance,
> > i.e. incremental indexing vs. pushing a full index but as far as the
> > product is concerned most data can be updated daily, the head (let's
> > say 20%) needs hourly (or at least on the order of hours) update.
> > I also need to be able to override the scoring/ranking and inject my
> > own logic and of course  my main concern is response time, especially
> > since i have additional computation on the hits before returning the
> > results.
> >
> > BTW, for the additional ranking/computation i will need to retrieve
> > values that are mapped by a term-field key, i.e. i can't know the key
> > until i have the result and the query in my hands. i figured i would
> > use Oracle Berkeley DB Java edition in order to keep the calls as much
> > as possible in the memory -> any advise on this as well ?
> >
> > For these requirements, do i need to worry about partitioning the
> > Index? If i do partition it, is there a solution to merge the results
> > back or do i need to do it on my own (does Solr do it for me and if it
> > does, can i override the scoring there)?
> > AS far as serving multiple users, will a simple rsync of the index
> > between multiple nodes running the same index (i am not that sensitive
> > to data integrity) work or do i need to look at something like
> > terracotta?
> >
> > In short, i am looking for the simplest solution.
> >
> > Thanks in advance.
> > Shi
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 21 01:30:02 2007
Return-Path: <java-user-return-26256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10030 invoked from network); 21 Feb 2007 01:30:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2007 01:30:01 -0000
Received: (qmail 34251 invoked by uid 500); 21 Feb 2007 01:30:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34220 invoked by uid 500); 21 Feb 2007 01:30:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34209 invoked by uid 99); 21 Feb 2007 01:30:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 17:30:01 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 17:29:50 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HJgIU-0006zD-AO
	for java-user@lucene.apache.org; Tue, 20 Feb 2007 17:29:30 -0800
Message-ID: <9073976.post@talk.nabble.com>
Date: Tue, 20 Feb 2007 17:29:30 -0800 (PST)
From: orion <orion@terracottatech.com>
To: java-user@lucene.apache.org
Subject: Re: Using Lucene - Design Question
In-Reply-To: <17f11d00702201709r3bd00dau835f457b6d76bedb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: orion@terracottatech.com
References: <17f11d00702200251u4838a842p5dd27c472dc96953@mail.gmail.com> <12149.61556.qm@web50314.mail.yahoo.com> <17f11d00702201709r3bd00dau835f457b6d76bedb@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


If you'd like to try using Terracotta, we (Terracotta) would be glad to help
you out.  If you want more info, you can email me directly (orion at
terracotta.org) or you can use our web forums (http://forums.terracotta.org)
or our user mailing list (http://lists.terracotta.org/)

Cheers,
Orion



shai deljo wrote:
> 
> I considered getting  Lucene in action but figured I'll wait for the
> DVD to come out ;).
> Seriously though, they write about RemoteSearchable and use RMI, Is
> this the recommended solution? does it scale well?
> Thanks
> 
> On 2/20/07, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>> Well, there is also a Remote cousin there.  That will let you distribute
>> your indices over N severs (sounds like you'll need multiple).  You
>> should really take a stroll through Lucene's javadoc, it's incredibly
>> nice now in winter time.  Or ... clears throat.... you could get a book
>> ;)
>>
>> Otis
>>  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
>> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
>>
>> ----- Original Message ----
>> From: shai deljo <shai.deljo@gmail.com>
>> To: java-user@lucene.apache.org
>> Sent: Tuesday, February 20, 2007 2:05:25 PM
>> Subject: Re: Using Lucene - Design Question
>>
>> Hi,
>> Thanks for the reply.
>> * Regarding hardware I'll use something similar to: Core 2 Duo -
>> 2.66GHz, 2x300 GB disk drives, 4 GB RAM running on one of the Linux
>> distributions.
>> * Regarding response time I'm looking to be ~300 milliseconds for at
>> least 80% of queries and ~500 milliseconds for 95% of queries.
>> * Will MultiSearcher (and it's parallel cosine :) ) allow me to search
>> indices cross multiple servers or is the assumption is that all
>> indices are on 1 server?
>> Thanks
>>
>>
>> On 2/20/07, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>> > Hi Shi,
>> >
>> > Nobody will be able to give you the precise answer, obviously.  The
>> best way is to try.
>> > You didn't say what response time is desirable nor what kind of
>> hardware you will be using.
>> >
>> > I wouldn't bother with the Berkeley DB-backed Lucene index for now,
>> just use the regular one (maybe use non-compound format).
>> > If you need to partition your index, MultiSearcher will help you search
>> all your indices, and its Parallel cousin will let you parallelize those
>> searches.
>> > It sounds like rsync will work, but you'll have to make sure that the
>> segments file gets rsynced last.
>> >
>> > Otis
>> >
>> > . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
>> > Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
>> >
>> > ----- Original Message ----
>> > From: shai deljo <shai.deljo@gmail.com>
>> > To: java-user@lucene.apache.org
>> > Sent: Tuesday, February 20, 2007 5:51:13 AM
>> > Subject: Using Lucene - Design Question
>> >
>> > Hi,
>> > I have no experience with Lucene and I'm trying to collect some
>> > information in order to determine what solution is best for me.
>> > I need to index ~50M documents (starting with 10M), the size of each
>> > document is ~2k-~5k and I'll index a couple of fields per document. I
>> > expect ~20 queries per seconds and each query is ~4 terms. Update rate
>> > - not sure what is best and/or possible strategy based on performance,
>> > i.e. incremental indexing vs. pushing a full index but as far as the
>> > product is concerned most data can be updated daily, the head (let's
>> > say 20%) needs hourly (or at least on the order of hours) update.
>> > I also need to be able to override the scoring/ranking and inject my
>> > own logic and of course  my main concern is response time, especially
>> > since i have additional computation on the hits before returning the
>> > results.
>> >
>> > BTW, for the additional ranking/computation i will need to retrieve
>> > values that are mapped by a term-field key, i.e. i can't know the key
>> > until i have the result and the query in my hands. i figured i would
>> > use Oracle Berkeley DB Java edition in order to keep the calls as much
>> > as possible in the memory -> any advise on this as well ?
>> >
>> > For these requirements, do i need to worry about partitioning the
>> > Index? If i do partition it, is there a solution to merge the results
>> > back or do i need to do it on my own (does Solr do it for me and if it
>> > does, can i override the scoring there)?
>> > AS far as serving multiple users, will a simple rsync of the index
>> > between multiple nodes running the same index (i am not that sensitive
>> > to data integrity) work or do i need to look at something like
>> > terracotta?
>> >
>> > In short, i am looking for the simplest solution.
>> >
>> > Thanks in advance.
>> > Shi
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> >
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Using-Lucene---Design-Question-tf3259160.html#a9073976
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 21 05:23:03 2007
Return-Path: <java-user-return-26257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65608 invoked from network); 21 Feb 2007 05:22:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2007 05:22:59 -0000
Received: (qmail 5968 invoked by uid 500); 21 Feb 2007 05:22:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5936 invoked by uid 500); 21 Feb 2007 05:22:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5925 invoked by uid 99); 21 Feb 2007 05:22:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 21:22:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.252.100.172] (HELO web90505.mail.mud.yahoo.com) (216.252.100.172)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 20 Feb 2007 21:22:46 -0800
Received: (qmail 64958 invoked by uid 60001); 21 Feb 2007 05:22:25 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=bKflwwzsXSIKrxGJnzAXlD99wDvwiL4PLfaUEdrqAM+JxSV1GKvKpPgHCVFnlUD8Yzm3zeGvf/sJyIU4SC9ciBw1sLQNdhTn3gSO8Q1cvSFPMfn17Q2JzE0JCGgCbL0F6nUvGH/+McL9B0tCllbA7jYTPJgtk/Yo+p8gYCxjYJk=;
X-YMail-OSG: K_NWfJcVM1mX3cGC4A.w8.Xtdd1Gp68a2cr9onURkmcOYvfJCfJxjAGSEX.YGL6_mCJCLXg8s2tCW7QyfO0Y1KhrrGxyYZtW5D0xK1f8W20xnEwF32uAWoTNfLjUmnsaxn17HTonQSUKfDk-
Received: from [70.227.201.203] by web90505.mail.mud.yahoo.com via HTTP; Tue, 20 Feb 2007 21:22:25 PST
Date: Tue, 20 Feb 2007 21:22:25 -0800 (PST)
From: Venkat Seeth <svejb@yahoo.com>
Subject: Re: Using Lucene - Design Question
To: java-user@lucene.apache.org
In-Reply-To: <17f11d00702201709r3bd00dau835f457b6d76bedb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <843697.64476.qm@web90505.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

You could also use Hadoop RPC or ICE (www.zeroc.com)

I'm on that path now.

--Venkat

--- shai deljo <shai.deljo@gmail.com> wrote:

> I considered getting  Lucene in action but figured
> I'll wait for the
> DVD to come out ;).
> Seriously though, they write about RemoteSearchable
> and use RMI, Is
> this the recommended solution? does it scale well?
> Thanks
> 
> On 2/20/07, Otis Gospodnetic
> <otis_gospodnetic@yahoo.com> wrote:
> > Well, there is also a Remote cousin there.  That
> will let you distribute your indices over N severs
> (sounds like you'll need multiple).  You should
> really take a stroll through Lucene's javadoc, it's
> incredibly nice now in winter time.  Or ... clears
> throat.... you could get a book ;)
> >
> > Otis
> >  . . . . . . . . . . . . . . . . . . . . . . . . .
> . . . . .
> > Simpy -- http://www.simpy.com/  -  Tag  -  Search 
> -  Share
> >
> > ----- Original Message ----
> > From: shai deljo <shai.deljo@gmail.com>
> > To: java-user@lucene.apache.org
> > Sent: Tuesday, February 20, 2007 2:05:25 PM
> > Subject: Re: Using Lucene - Design Question
> >
> > Hi,
> > Thanks for the reply.
> > * Regarding hardware I'll use something similar
> to: Core 2 Duo -
> > 2.66GHz, 2x300 GB disk drives, 4 GB RAM running on
> one of the Linux
> > distributions.
> > * Regarding response time I'm looking to be ~300
> milliseconds for at
> > least 80% of queries and ~500 milliseconds for 95%
> of queries.
> > * Will MultiSearcher (and it's parallel cosine :)
> ) allow me to search
> > indices cross multiple servers or is the
> assumption is that all
> > indices are on 1 server?
> > Thanks
> >
> >
> > On 2/20/07, Otis Gospodnetic
> <otis_gospodnetic@yahoo.com> wrote:
> > > Hi Shi,
> > >
> > > Nobody will be able to give you the precise
> answer, obviously.  The best way is to try.
> > > You didn't say what response time is desirable
> nor what kind of hardware you will be using.
> > >
> > > I wouldn't bother with the Berkeley DB-backed
> Lucene index for now, just use the regular one
> (maybe use non-compound format).
> > > If you need to partition your index,
> MultiSearcher will help you search all your indices,
> and its Parallel cousin will let you parallelize
> those searches.
> > > It sounds like rsync will work, but you'll have
> to make sure that the segments file gets rsynced
> last.
> > >
> > > Otis
> > >
> > > . . . . . . . . . . . . . . . . . . . . . . . .
> . . . . . .
> > > Simpy -- http://www.simpy.com/  -  Tag  - 
> Search  -  Share
> > >
> > > ----- Original Message ----
> > > From: shai deljo <shai.deljo@gmail.com>
> > > To: java-user@lucene.apache.org
> > > Sent: Tuesday, February 20, 2007 5:51:13 AM
> > > Subject: Using Lucene - Design Question
> > >
> > > Hi,
> > > I have no experience with Lucene and I'm trying
> to collect some
> > > information in order to determine what solution
> is best for me.
> > > I need to index ~50M documents (starting with
> 10M), the size of each
> > > document is ~2k-~5k and I'll index a couple of
> fields per document. I
> > > expect ~20 queries per seconds and each query is
> ~4 terms. Update rate
> > > - not sure what is best and/or possible strategy
> based on performance,
> > > i.e. incremental indexing vs. pushing a full
> index but as far as the
> > > product is concerned most data can be updated
> daily, the head (let's
> > > say 20%) needs hourly (or at least on the order
> of hours) update.
> > > I also need to be able to override the
> scoring/ranking and inject my
> > > own logic and of course  my main concern is
> response time, especially
> > > since i have additional computation on the hits
> before returning the
> > > results.
> > >
> > > BTW, for the additional ranking/computation i
> will need to retrieve
> > > values that are mapped by a term-field key, i.e.
> i can't know the key
> > > until i have the result and the query in my
> hands. i figured i would
> > > use Oracle Berkeley DB Java edition in order to
> keep the calls as much
> > > as possible in the memory -> any advise on this
> as well ?
> > >
> > > For these requirements, do i need to worry about
> partitioning the
> > > Index? If i do partition it, is there a solution
> to merge the results
> > > back or do i need to do it on my own (does Solr
> do it for me and if it
> > > does, can i override the scoring there)?
> > > AS far as serving multiple users, will a simple
> rsync of the index
> > > between multiple nodes running the same index (i
> am not that sensitive
> > > to data integrity) work or do i need to look at
> something like
> > > terracotta?
> > >
> > > In short, i am looking for the simplest
> solution.
> > >
> > > Thanks in advance.
> > > Shi
> > >
> > >
>
---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > >
> > >
> > >
> > >
> > >
> > >
>
---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > >
> > >
> >
> >
>
---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >
> >
> >
> >
> >
> >
>
---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >
> >
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 



 
____________________________________________________________________________________
Have a burning question?  
Go to www.Answers.yahoo.com and get answers from real people who know.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 21 07:36:35 2007
Return-Path: <java-user-return-26258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96821 invoked from network); 21 Feb 2007 07:36:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2007 07:36:30 -0000
Received: (qmail 36029 invoked by uid 500); 21 Feb 2007 07:36:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35992 invoked by uid 500); 21 Feb 2007 07:36:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35981 invoked by uid 99); 21 Feb 2007 07:36:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 23:36:28 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Feb 2007 23:36:18 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id AF6005B770; Tue, 20 Feb 2007 23:35:57 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id ABCC17F403
	for <java-user@lucene.apache.org>; Tue, 20 Feb 2007 23:35:57 -0800 (PST)
Date: Tue, 20 Feb 2007 23:35:57 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: NO_NORMS and TOKENIZED?
In-Reply-To: <3F2DFC4E-581A-44AC-B51A-CAFC9B2973B8@rectangular.com>
Message-ID: <Pine.LNX.4.58.0702202316300.24047@hal.rescomp.berkeley.edu>
References: <20070126195010.90762.qmail@web50305.mail.yahoo.com>
 <20070215150143.GA16525@fermat.math.technion.ac.il>
 <c68e39170702151320g546790b4qb16199eb1bf8c6c@mail.gmail.com>
 <4D497953-E489-4716-90BD-59A1B9AA6A93@rectangular.com>
 <Pine.LNX.4.58.0702182226440.20338@hal.rescomp.berkeley.edu>
 <3F2DFC4E-581A-44AC-B51A-CAFC9B2973B8@rectangular.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: > en if i wanted to be able to use
: > an option on field foo for some docs and not on others i'd have to
: > have
: > foo_optOFF and foo_optON ... then anytime i wanted to search on
: > "foo" i'd
: > have to use a booleanquery without a coord factor across both.
:
: I'm trying to think of an example where that would actually come into
: play.  What are some of the options you'd turn on and off?  Norms?
: Tokenization?

it could be anything ... maybe i only care about termvectors for
editorials in a collection that contains editorials, news items, etc...

: IIUC, that's a third objection in addition to your two from the
: previous discussion.  The other two were "evolving" indexes, and what
: you described as "dynamically typed fields" but what I would call
: "multi-dimensional data".

evolving indexes is a big issue i hadn't thought of my last message,
but definitely important...

: KinoSearch's Schema scheme allows you to add new fields, but you
: can't take any away or change any existing defs  -- so you're able to
: evolve, but only within fairly tight constraints.  I can't think of

...yeah, i would find that... frustrating.  it would require downtime when
making a lot of upgrades that i currently can do on the fly.

: aspect "good enough" and we're moving on.  I don't think it's really
: any worse than what we have now -- where field defs persist, stored
: in field infos files, etc, and the resolution of conflicts can bite

the biggest differnece is that the field infos aren't globals, so as
segments merge and old segments get deleted old data (and field info)
vanishes into hte ether ... i take advantage of that a lot when planning
upgrades ... many types of field changes can be made in Solr by deploying
the schema.xml reindexing slowly over as long as it takes (which the index
is live and serving queries) then deploying the application changes that
take advantage of the new field options.

: The multi-dimensional data problem is the one I'm most interested in

i believe yonik already elaborated on that and gave you some good ideas.

the other situation i brought up in that thread from way back was
something Solr doesn't currently have a good solution for: one
field value for display, but other values (in the same field) for
searching ... likewise indexing one field value for sorting, but storing
several field values.

the workarround for this of course is to use multiple field names:
title, title_sort, title_search, etc...





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 21 10:40:49 2007
Return-Path: <java-user-return-26259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56363 invoked from network); 21 Feb 2007 10:40:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2007 10:40:43 -0000
Received: (qmail 46789 invoked by uid 500); 21 Feb 2007 10:40:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46706 invoked by uid 500); 21 Feb 2007 10:40:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46670 invoked by uid 99); 21 Feb 2007 10:40:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 02:40:36 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 86.111.223.190 as permitted sender)
Received: from [86.111.223.190] (HELO cluster-j.mailcontrol.com) (86.111.223.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 02:40:19 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly24j.srv.mailcontrol.com (MailControl) with SMTP id l1LAdoWa007470
	for <java-user@lucene.apache.org>; Wed, 21 Feb 2007 10:39:51 GMT
Received: From SGBD012103.wsatkins.com ([10.202.26.17]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 1172054370113; Wed, 21 Feb 2007 10:39:30 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012103.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 21 Feb 2007 10:39:29 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Search for a term in all fields
Date: Wed, 21 Feb 2007 10:39:29 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705E42956@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Search for a term in all fields
Thread-Index: AcdVHVb/vRGnL2NhQJey9DIQK0SqigAhvLqg
References: <BC1CFC544422CB4A934908E126A4742705E0AA2C@SGBLOW2101.wsatkins.com> <Pine.LNX.4.58.0702201016190.16563@hal.rescomp.berkeley.edu>
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 21 Feb 2007 10:39:29.0811 (UTC) FILETIME=[90F1C630:01C755A4]
X-Scanned-By: MailControl A-06-00-00 (www.mailcontrol.com) on 10.74.0.134
X-Virus-Checked: Checked by ClamAV on apache.org

Well, here's my current thoughts on acheiveing this.  Instead of putting
a 1000 space gap between elements of the 1ll field could I not use a
character that isn't used in the data such as ~ and then somehow (don't
know how) use that to search all fields?=20

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20
Sent: 20 February 2007 18:30
To: java-user@lucene.apache.org
Subject: Re: Search for a term in all fields


The information Erick gave you when you asked this question yesterday is
all very accurate -- the one addition i would make is that you don't
need SpanNear queries to take advantage of positionINcrimentGap --
PhraseQueries do that to.

Consolidating your fields into a single "all" field, or constructing a
BoolenQuery across all of your existing fields are really the two main
options -- each with their tradeoffs.

http://www.nabble.com/Search-in-all-fields-tf3254569.html

: Date: Tue, 20 Feb 2007 12:29:25 -0000
: From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Search for a term in all fields
:
: Hi all,
:
: How do I search for a term in all fields of a document?
:
: Cheers
:
: Sachin
:
:
: This email and any attached files are confidential and copyright
protected. If you are not the addressee, any dissemination of this
communication is strictly prohibited. Unless otherwise expressly agreed
in writing, nothing stated in this communication shall be legally
binding.
:
: The ultimate parent company of the Atkins Group is WS Atkins plc.
Registered in England No. 1885586.  Registered Office Woodcote Grove,
Ashley Road, Epsom, Surrey KT18 5BW.
:
: Consider the environment. Please don't print this e-mail unless you
really need to.
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



This message has been scanned for viruses by MailControl - (see
http://bluepages.wsatkins.co.uk/?6875772)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 21 10:48:45 2007
Return-Path: <java-user-return-26260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57928 invoked from network); 21 Feb 2007 10:48:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2007 10:48:45 -0000
Received: (qmail 58287 invoked by uid 500); 21 Feb 2007 10:48:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58257 invoked by uid 500); 21 Feb 2007 10:48:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58246 invoked by uid 99); 21 Feb 2007 10:48:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 02:48:46 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_FONT_BIG,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 86.111.223.190 as permitted sender)
Received: from [86.111.223.190] (HELO cluster-j.mailcontrol.com) (86.111.223.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 02:48:34 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly15j.srv.mailcontrol.com (MailControl) with SMTP id l1LAm6Kl008073
	for <java-user@lucene.apache.org>; Wed, 21 Feb 2007 10:48:06 GMT
Received: From SGBD012104.wsatkins.com ([10.202.26.18]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 1172054860657; Wed, 21 Feb 2007 10:47:40 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012104.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 21 Feb 2007 10:47:40 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C755A5.B50B97B3"
Subject: pagination
Date: Wed, 21 Feb 2007 10:47:39 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705E429B4@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: pagination
Thread-Index: AcdVpbTfAXe2jGytS921i+CTMgrVCg==
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 21 Feb 2007 10:47:40.0566 (UTC) FILETIME=[B5750B60:01C755A5]
X-Scanned-By: MailControl A-06-00-00 (www.mailcontrol.com) on 10.74.0.125
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C755A5.B50B97B3
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hello,

I was wondering if Lucene provides any mechanism which helps in
pagination.  In other words is there a way to return the first 10 of 500
results and then the  next 10 and so on.

Cheers


This email and any attached files are confidential and copyright protected.=
 If you are not the addressee, any dissemination of this communication is s=
trictly prohibited. Unless otherwise expressly agreed in writing, nothing s=
tated in this communication shall be legally binding.

The ultimate parent company of the Atkins Group is WS Atkins plc.  Register=
ed in England No. 1885586.  Registered Office Woodcote Grove, Ashley Road, =
Epsom, Surrey KT18 5BW.

Consider the environment. Please don't print this e-mail unless you really =
need to.=20

------_=_NextPart_001_01C755A5.B50B97B3--

From java-user-return-26261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 21 11:44:47 2007
Return-Path: <java-user-return-26261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76125 invoked from network); 21 Feb 2007 11:44:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2007 11:44:46 -0000
Received: (qmail 69919 invoked by uid 500); 21 Feb 2007 11:44:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69799 invoked by uid 500); 21 Feb 2007 11:44:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69768 invoked by uid 99); 21 Feb 2007 11:44:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 03:44:38 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 03:12:09 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id l1LBBfVC022736
	for <java-user@lucene.apache.org>; Wed, 21 Feb 2007 13:11:41 +0200
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz with ESMTP
	 id m2ldbnlr; 21 Feb 2007 13:11:00 +0200
Message-ID: <45DC28E0.4070604@teamware.com>
Date: Wed, 21 Feb 2007 22:11:28 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Positions in SpanFirst
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Wed, 21 Feb 2007 13:11:41 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=-1.11, required 5,
	autolearn=not spam, BAYES_05 -1.11)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have a field to which I add several bits of information, e.g.

doc.add(new Field("x", "first bit"));
doc.add(new Field("x", "second part"));
doc.add(new Field("x", "third section"));

I am using SpanFirstQuery to search them with something like:

while...
   SpanTermQuery stquery = new SpanTermQuery(new Term("x", termStr[incFactor]));
   query = new SpanFirstQuery(stquery, incFactor);
   incFactor++

but a search for

"first", span pos 1
"bit", span pos 2

gets a match, but

"second", span pos 1
"part", span pos 2

fails.  How can I get the first term position for each word in each Field added 
to the document for the same field name to be 1, so that the SpanFirst works.

Antony






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 21 12:07:46 2007
Return-Path: <java-user-return-26262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82637 invoked from network); 21 Feb 2007 12:07:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2007 12:07:45 -0000
Received: (qmail 4706 invoked by uid 500); 21 Feb 2007 12:07:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4675 invoked by uid 500); 21 Feb 2007 12:07:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4664 invoked by uid 99); 21 Feb 2007 12:07:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 04:07:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 04:07:32 -0800
Received: by nf-out-0910.google.com with SMTP id i2so176208nfe
        for <java-user@lucene.apache.org>; Wed, 21 Feb 2007 04:07:11 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:content-transfer-encoding:message-id:content-type:to:from:subject:date:x-mailer;
        b=FVZXjm7hIjn5AwLjQwf6hd3LuvB2mJn/aJmGM7Gb6xPWkOIJDHlIMje6i4uDKrRlIN9z5ZUgWNsis2TjMZR9KRqtIGW9VnrOKlGfStK5ku2K0ncloAq951AjNpPmEsrMXPkh2O1ff6q8pdWBAE88M94nBlIssvA3bB+i57Dv/Mc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:content-transfer-encoding:message-id:content-type:to:from:subject:date:x-mailer;
        b=mzxOtKuTIDfmvDjJN/tBNzJBdFlOMgmqLuvYbokUTbaynkxY6JNIt9ljn0wuijDpNDwIvqnRCaagEQhH0iQJlbLG1gtCI5eQQxvfOvI2BoMnkqF7VFKNLid0J4ujqE+i5DA4KHquvviWqU8jh2zfuKY73MohspUCG0IiSAtrh9Q=
Received: by 10.48.204.5 with SMTP id b5mr1273535nfg.1172059628114;
        Wed, 21 Feb 2007 04:07:08 -0800 (PST)
Received: from ?192.168.1.3? ( [83.249.110.75])
        by mx.google.com with ESMTP id q28sm2209629nfc.2007.02.21.04.07.07;
        Wed, 21 Feb 2007 04:07:07 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
Content-Transfer-Encoding: 7bit
Message-Id: <1FEAFAB5-B75F-427E-A24A-759ED94FFFE3@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: karl wettin <karl.wettin@gmail.com>
Subject: MultiSearcher vs IndexSearcher(new MultiReader
Date: Wed, 21 Feb 2007 13:05:23 +0100
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Could someone enlighten me a bit about the subject? When do I want to  
use a MultiSearcher rather than a searcher running of a MultiReader?  
There seems to be a bunch of limitations in the MultiSearcher, and it  
is these that made me curious.

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 21 12:37:29 2007
Return-Path: <java-user-return-26263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87946 invoked from network); 21 Feb 2007 12:37:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2007 12:37:28 -0000
Received: (qmail 65162 invoked by uid 500); 21 Feb 2007 12:37:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65127 invoked by uid 500); 21 Feb 2007 12:37:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65116 invoked by uid 99); 21 Feb 2007 12:37:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 04:37:28 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of bharath.nott@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 04:37:17 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1005325ugc
        for <java-user@lucene.apache.org>; Wed, 21 Feb 2007 04:36:55 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=H1eu5d4QkIw3JOUwY+VkCE56bRE7yfw2af5oSqyyTS1XYc5dYdQtL81iFv6DgLa08aM9RTNoXP+GwKlawWqDOA/rRwgMBdAVlHtVS+TfXwoT9OuxReCrqVJGnnAB64A8cgI6UDt/ZxpLMfvwXImsW89jSUyCpo0MXjieAPiKGEI=
Received: by 10.78.193.5 with SMTP id q5mr1360352huf.1172061415682;
        Wed, 21 Feb 2007 04:36:55 -0800 (PST)
Received: by 10.78.118.2 with HTTP; Wed, 21 Feb 2007 04:36:55 -0800 (PST)
Message-ID: <ede880620702210436w559366cexa7d81c3a802411f3@mail.gmail.com>
Date: Wed, 21 Feb 2007 07:36:55 -0500
From: Nott <bharath.nott@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MultiSearcher vs IndexSearcher(new MultiReader
In-Reply-To: <1FEAFAB5-B75F-427E-A24A-759ED94FFFE3@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3889_21139380.1172061415647"
References: <1FEAFAB5-B75F-427E-A24A-759ED94FFFE3@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3889_21139380.1172061415647
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi
MultiSearcher we have used whenwe use more than one folder. As  of we used
so far we did not had much issues with multisearcher. The index at times
becomes slow when you incluse more no of folder to search
We have the full index in one folder and the incremental index in another
folder so that fallback plan is easy when we face any issue with the index
file as such.

On 2/21/07, karl wettin <karl.wettin@gmail.com> wrote:
>
> Could someone enlighten me a bit about the subject? When do I want to
> use a MultiSearcher rather than a searcher running of a MultiReader?
> There seems to be a bunch of limitations in the MultiSearcher, and it
> is these that made me curious.
>
> --
> karl
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
~B

------=_Part_3889_21139380.1172061415647--

From java-user-return-26264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 21 13:05:58 2007
Return-Path: <java-user-return-26264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94238 invoked from network); 21 Feb 2007 13:05:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2007 13:05:48 -0000
Received: (qmail 23289 invoked by uid 500); 21 Feb 2007 13:05:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23247 invoked by uid 500); 21 Feb 2007 13:05:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23236 invoked by uid 99); 21 Feb 2007 13:05:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 05:05:45 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 05:05:34 -0800
Received: by nf-out-0910.google.com with SMTP id i2so187502nfe
        for <java-user@lucene.apache.org>; Wed, 21 Feb 2007 05:05:12 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=UIb5Llt+vRpo+RrM3WCat7Ev6b/3rQC9/H2rCe4otc1nbOMJcNE9qdcar7h6fPkB11wW1jTVhDQ4y9AoSHlmTKepJY9yLiuMMdr4s+LO5QCRh0y3hJGBOHrWVpH4PVHZ/oqmLB62bnC5QERI7f2tHn8RLuxqVk+qDJMLpE+3vNU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=JYL+l8oO6evxMjOAnHpJFdzFupM4punT8hw1q6zZCXxO+mWaI2VXA3xjkzbG6oCCNUNEIrnHwrcwfT5W02qBN4oB+sWGitb92/r4fFDeaHoeRfFWHD85aiPeaiLV4IGzJo1W2n1Fc1UkI2Cy9s2oaRFxcYLEYujALiQHYlxeOeQ=
Received: by 10.82.134.12 with SMTP id h12mr14104344bud.1172063112470;
        Wed, 21 Feb 2007 05:05:12 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Wed, 21 Feb 2007 05:05:12 -0800 (PST)
Message-ID: <359a92830702210505g14d8383eq28834b55036949a8@mail.gmail.com>
Date: Wed, 21 Feb 2007 08:05:12 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search for a term in all fields
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705E42956@SGBLOW2101.wsatkins.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4370_106898.1172063112346"
References: <BC1CFC544422CB4A934908E126A4742705E0AA2C@SGBLOW2101.wsatkins.com>
	 <Pine.LNX.4.58.0702201016190.16563@hal.rescomp.berkeley.edu>
	 <BC1CFC544422CB4A934908E126A4742705E42956@SGBLOW2101.wsatkins.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4370_106898.1172063112346
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I don't see what you're getting at. There are only two forms of a query
term,,,,
field:value
value

And the second is really the first with the default field you specified in
the parser implied. So just think of all terms you specify in a query as
field:term.

Having some "special character" in the index doesn't help you because you
still have to specify the field. And your two choices are still either a
BooleanQuery that mentions all fields or indexing the data into a single
field.

Best
Erick



On 2/21/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
>
> Well, here's my current thoughts on acheiveing this.  Instead of putting
> a 1000 space gap between elements of the 1ll field could I not use a
> character that isn't used in the data such as ~ and then somehow (don't
> know how) use that to search all fields?
>
> -----Original Message-----
> From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
> Sent: 20 February 2007 18:30
> To: java-user@lucene.apache.org
> Subject: Re: Search for a term in all fields
>
>
> The information Erick gave you when you asked this question yesterday is
> all very accurate -- the one addition i would make is that you don't
> need SpanNear queries to take advantage of positionINcrimentGap --
> PhraseQueries do that to.
>
> Consolidating your fields into a single "all" field, or constructing a
> BoolenQuery across all of your existing fields are really the two main
> options -- each with their tradeoffs.
>
> http://www.nabble.com/Search-in-all-fields-tf3254569.html
>
> : Date: Tue, 20 Feb 2007 12:29:25 -0000
> : From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
> : Reply-To: java-user@lucene.apache.org
> : To: java-user@lucene.apache.org
> : Subject: Search for a term in all fields
> :
> : Hi all,
> :
> : How do I search for a term in all fields of a document?
> :
> : Cheers
> :
> : Sachin
> :
> :
> : This email and any attached files are confidential and copyright
> protected. If you are not the addressee, any dissemination of this
> communication is strictly prohibited. Unless otherwise expressly agreed
> in writing, nothing stated in this communication shall be legally
> binding.
> :
> : The ultimate parent company of the Atkins Group is WS Atkins plc.
> Registered in England No. 1885586.  Registered Office Woodcote Grove,
> Ashley Road, Epsom, Surrey KT18 5BW.
> :
> : Consider the environment. Please don't print this e-mail unless you
> really need to.
> :
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> This message has been scanned for viruses by MailControl - (see
> http://bluepages.wsatkins.co.uk/?6875772)
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4370_106898.1172063112346--

From java-user-return-26265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 21 13:08:18 2007
Return-Path: <java-user-return-26265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95143 invoked from network); 21 Feb 2007 13:08:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2007 13:08:17 -0000
Received: (qmail 27291 invoked by uid 500); 21 Feb 2007 13:08:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27239 invoked by uid 500); 21 Feb 2007 13:08:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27218 invoked by uid 99); 21 Feb 2007 13:08:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 05:08:15 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 05:08:03 -0800
Received: by nf-out-0910.google.com with SMTP id i2so188036nfe
        for <java-user@lucene.apache.org>; Wed, 21 Feb 2007 05:07:42 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=PBSu0DIHydF+e3i/z+58mbQEZC116h9fmMK5YJ3FOROJ45VG/wmY6r5jl6YJHIG7MdV/rQAhNtnHXDrizibnpl5JODe9UYxHidqEkpVxOUKwUm67q9Qkr4GZZpWPO8DqJTxG64kpelcJoWGrDwpd7Vu475bymuT+s6+fTtUoO6c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=nfUywvb6MemmLEuuWTd6ytcV4cyvlTTMz6NsjE4rNqf5Y4u2fDO+Wd7YVr9sFrsBj2pNhpBNa7OqXQjBwQtL1mM0pgOA+TtRM/jyA0bsGO9MxvuMEUlIOJKism8F5dN4UEKjqRFj6kBlliaFPVvz9gP3dNksWYNgn/6frblW050=
Received: by 10.82.172.15 with SMTP id u15mr14103806bue.1172063261689;
        Wed, 21 Feb 2007 05:07:41 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Wed, 21 Feb 2007 05:07:41 -0800 (PST)
Message-ID: <359a92830702210507i3e91ffcfu9249bd9df74dc41f@mail.gmail.com>
Date: Wed, 21 Feb 2007 08:07:41 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: pagination
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705E429B4@SGBLOW2101.wsatkins.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4402_18871192.1172063261656"
References: <BC1CFC544422CB4A934908E126A4742705E429B4@SGBLOW2101.wsatkins.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4402_18871192.1172063261656
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See TopDocs, HitCollector, etc. Don't iterate through a Hits objects to get
docs beyond, say, 100 since it's designed to efficiently return the first
100 documents but re-executes the queries each 100 or so times you advance
to the next document.

Erick

On 2/21/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
>
> Hello,
>
> I was wondering if Lucene provides any mechanism which helps in
> pagination.  In other words is there a way to return the first 10 of 500
> results and then the  next 10 and so on.
>
> Cheers
>
>
> This email and any attached files are confidential and copyright
> protected. If you are not the addressee, any dissemination of this
> communication is strictly prohibited. Unless otherwise expressly agreed in
> writing, nothing stated in this communication shall be legally binding.
>
> The ultimate parent company of the Atkins Group is WS Atkins
> plc.  Registered in England No. 1885586.  Registered Office Woodcote Grove,
> Ashley Road, Epsom, Surrey KT18 5BW.
>
> Consider the environment. Please don't print this e-mail unless you really
> need to.
>

------=_Part_4402_18871192.1172063261656--

From java-user-return-26266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 21 13:17:12 2007
Return-Path: <java-user-return-26266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97031 invoked from network); 21 Feb 2007 13:17:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2007 13:17:12 -0000
Received: (qmail 41383 invoked by uid 500); 21 Feb 2007 13:17:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41192 invoked by uid 500); 21 Feb 2007 13:17:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41181 invoked by uid 99); 21 Feb 2007 13:17:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 05:17:12 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 05:17:01 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1013285ugc
        for <java-user@lucene.apache.org>; Wed, 21 Feb 2007 05:16:39 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=G4TxrOiYvNjVr7xcu4KDGLECXsqBdOPGQtOEtKyqPj8zXEBBySW6gfqpSWN4atARq/b6F91DTHezIUqzisp/BSbjEOpMdaauzHRmmYa4HwRHxEgKoR9TYAIaQQ5snr8LAMUR8uSg29wFZMLt+sLARD+pfIP7gBoSX06p75h59Qc=
Received: by 10.82.178.11 with SMTP id a11mr14099327buf.1172063798874;
        Wed, 21 Feb 2007 05:16:38 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Wed, 21 Feb 2007 05:16:38 -0800 (PST)
Message-ID: <359a92830702210516h2d0faa55id9a71f5e8bd1312c@mail.gmail.com>
Date: Wed, 21 Feb 2007 08:16:38 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Positions in SpanFirst
In-Reply-To: <45DC28E0.4070604@teamware.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4598_14179930.1172063798832"
References: <45DC28E0.4070604@teamware.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4598_14179930.1172063798832
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm not sure you can, since all the interfaces I use alter the increment
between successive terms, but I'll be the first to admit that there are many
nooks and crannies that I don't know about... But I suspect that a negative
increment is not supported intentionally....

But I really doubt you want to do this due to the consequences. Consider in
your example the terms would have the following offsets
first 0
bit 1
second 0
part 1
third 0
section 1

Now think about a proximity query "first section"~1. This would produce a
hit because you've changed the whole sense of what offsets mean. Is this
really a good thing?

I suspect that the guys who really know things about the internals could
provide some good suggestions if you gave them a better idea of what it is
you're trying to accomplish and why you think SpanFirst helps accomplish
that....


Best
Erick

On 2/21/07, Antony Bowesman <adb@teamware.com> wrote:
>
> Hi,
>
> I have a field to which I add several bits of information, e.g.
>
> doc.add(new Field("x", "first bit"));
> doc.add(new Field("x", "second part"));
> doc.add(new Field("x", "third section"));
>
> I am using SpanFirstQuery to search them with something like:
>
> while...
>    SpanTermQuery stquery = new SpanTermQuery(new Term("x",
> termStr[incFactor]));
>    query = new SpanFirstQuery(stquery, incFactor);
>    incFactor++
>
> but a search for
>
> "first", span pos 1
> "bit", span pos 2
>
> gets a match, but
>
> "second", span pos 1
> "part", span pos 2
>
> fails.  How can I get the first term position for each word in each Field
> added
> to the document for the same field name to be 1, so that the SpanFirst
> works.
>
> Antony
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4598_14179930.1172063798832--

From java-user-return-26267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 21 13:52:55 2007
Return-Path: <java-user-return-26267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5714 invoked from network); 21 Feb 2007 13:52:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2007 13:52:54 -0000
Received: (qmail 3080 invoked by uid 500); 21 Feb 2007 13:52:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3037 invoked by uid 500); 21 Feb 2007 13:52:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3026 invoked by uid 99); 21 Feb 2007 13:52:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 05:52:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [68.116.38.223] (HELO rectangular.com) (68.116.38.223)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 05:52:41 -0800
Received: from [67.189.26.9] (helo=[10.0.1.3])
	by rectangular.com with esmtpa (Exim 4.44)
	id 1HJsPW-00032m-At
	for java-user@lucene.apache.org; Wed, 21 Feb 2007 06:25:34 -0800
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <Pine.LNX.4.58.0702202316300.24047@hal.rescomp.berkeley.edu>
References: <20070126195010.90762.qmail@web50305.mail.yahoo.com> <20070215150143.GA16525@fermat.math.technion.ac.il> <c68e39170702151320g546790b4qb16199eb1bf8c6c@mail.gmail.com> <4D497953-E489-4716-90BD-59A1B9AA6A93@rectangular.com> <Pine.LNX.4.58.0702182226440.20338@hal.rescomp.berkeley.edu> <3F2DFC4E-581A-44AC-B51A-CAFC9B2973B8@rectangular.com> <Pine.LNX.4.58.0702202316300.24047@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <82FDB131-9F2E-460A-9FEB-29135736AA7C@rectangular.com>
Content-Transfer-Encoding: 7bit
From: Marvin Humphrey <marvin@rectangular.com>
Subject: Re: NO_NORMS and TOKENIZED?
Date: Wed, 21 Feb 2007 05:52:18 -0800
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Feb 20, 2007, at 11:35 PM, Chris Hostetter wrote:
> the biggest differnece is that the field infos aren't globals, so as
> segments merge and old segments get deleted old data (and field info)
> vanishes into hte ether ... i take advantage of that a lot when  
> planning
> upgrades ... many types of field changes can be made in Solr by  
> deploying
> the schema.xml reindexing slowly over as long as it takes (which  
> the index
> is live and serving queries) then deploying the application changes  
> that
> take advantage of the new field options.

Well, there's no fundamental technical limitation that makes it so  
that global field defs can't be purged -- especially after  
optimization.  I just don't have a system in place that makes it  
possible.  There'd probably be a few bugs if you tried shrinking a  
Schema now, but a few tests should find them and they're killable.

> : The multi-dimensional data problem is the one I'm most interested in
>
> i believe yonik already elaborated on that and gave you some good  
> ideas.
>
> the other situation i brought up in that thread from way back was
> something Solr doesn't currently have a good solution for: one
> field value for display, but other values (in the same field) for
> searching ... likewise indexing one field value for sorting, but  
> storing
> several field values.

In KS, the DocWriter class writes stored fields.  Since the field  
defs have global semantics, you don't need to know anything about the  
contents of the serialized document -- no conflict resolutions.  It's  
just a blob with a certain number of bytes.

My plan is to enable subclassing of DocWriter/DocReader.  That should  
make it possible to scratch a number of itches:

   * multiple values per field
   * different field values for display and searching
   * lazy loading
   * arbitrary data
   * arbitrary compression algo choice
   * complete document recovery
   * ...

Marvin Humphrey
Rectangular Research
http://www.rectangular.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 21 13:53:14 2007
Return-Path: <java-user-return-26268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5865 invoked from network); 21 Feb 2007 13:53:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2007 13:53:12 -0000
Received: (qmail 4660 invoked by uid 500); 21 Feb 2007 13:53:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4628 invoked by uid 500); 21 Feb 2007 13:53:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4617 invoked by uid 99); 21 Feb 2007 13:53:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 05:53:11 -0800
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jmuguruza@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 05:53:00 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1021119ugc
        for <java-user@lucene.apache.org>; Wed, 21 Feb 2007 05:52:39 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=mBRjAWpDRFXwf/rbIceWHZ64erZqLn0ALX0Pytssk/NgDYTdRG/jMtp2P7B8ItjAcwoxv31tYW1ZbzdvujHFQ3C7bh/jv1e9d52mncXFl7H6v3dvvtuk90Kxa6ha8YXpPrzt36kW8ntuUKYxqESbQZ5ny8z5U3rYSynyDA3n5p8=
Received: by 10.78.180.18 with SMTP id c18mr714071huf.1172065957641;
        Wed, 21 Feb 2007 05:52:37 -0800 (PST)
Received: by 10.78.48.18 with HTTP; Wed, 21 Feb 2007 05:52:37 -0800 (PST)
Message-ID: <f071061b0702210552l2372a87fxf2dac925dfb52417@mail.gmail.com>
Date: Wed, 21 Feb 2007 14:52:37 +0100
From: jm <jmuguruza@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: possible to disable internal caching?
In-Reply-To: <200702142046.11611@danielnaber.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <f071061b0702140812h406616fbp48a24430235cd38@mail.gmail.com>
	 <200702142046.11611@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Karl and Daniel

I am already disponing of the Searchers I am using. And regarding
IndexWriter.setTermIndexInterval(), I need the indexing to be as fast
as possible, is the searches where I dont need any speed and prefer to
keep the memory low.

javier

On 2/14/07, Daniel Naber <lucenelist2005@danielnaber.de> wrote:
> On Wednesday 14 February 2007 17:12, jm wrote:
>
> > So my question, is it possible to disable some of the caching lucene
> > does so the memory consumption will be smaller (I am a bit concerned
> > on the memory usage side)? Or the memory savings would not pay off?
>
> You could set IndexWriter.setTermIndexInterval() to a value larger than the
> default (128). Thus Lucene will use less memory for its term list index in
> memory.
>
> Regards
>  Daniel
>
> --
> http://www.danielnaber.de
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 21 14:03:50 2007
Return-Path: <java-user-return-26269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8759 invoked from network); 21 Feb 2007 14:03:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2007 14:03:47 -0000
Received: (qmail 27909 invoked by uid 500); 21 Feb 2007 14:03:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27875 invoked by uid 500); 21 Feb 2007 14:03:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27849 invoked by uid 99); 21 Feb 2007 14:03:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 06:03:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 217.68.146.190 as permitted sender)
Received: from [217.68.146.190] (HELO cluster-b.mailcontrol.com) (217.68.146.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 06:03:28 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly35b.srv.mailcontrol.com (MailControl) with SMTP id l1LE32hV022302
	for <java-user@lucene.apache.org>; Wed, 21 Feb 2007 14:03:02 GMT
Received: From SGBD012103.wsatkins.com ([10.202.26.17]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 1172066562534; Wed, 21 Feb 2007 14:02:42 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012103.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 21 Feb 2007 14:02:42 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Search for a term in all fields
Date: Wed, 21 Feb 2007 14:02:40 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705E4304E@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Search for a term in all fields
Thread-Index: AcdVuQT8sTI3TBQNRuSY4+vhI+dArwAAD/HA
References: <BC1CFC544422CB4A934908E126A4742705E0AA2C@SGBLOW2101.wsatkins.com> <Pine.LNX.4.58.0702201016190.16563@hal.rescomp.berkeley.edu> <BC1CFC544422CB4A934908E126A4742705E42956@SGBLOW2101.wsatkins.com> <359a92830702210505g14d8383eq28834b55036949a8@mail.gmail.com>
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 21 Feb 2007 14:02:42.0030 (UTC) FILETIME=[F412C0E0:01C755C0]
X-Scanned-By: MailControl A-07-06-90 (www.mailcontrol.com) on 10.66.0.145
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry I didn't make myself clear at all.  Remember you said that it is
possible to do this:

> Sure. Convert your simple queries into span queries (which are also=20
> relatively simple). Then, when you index everything in the "all"=20
> field, subclass your analyzer to return a large PositionIncrementGap.
> Explaining how this works with words is awkward, so....
>
> doc.add("all", "one two three");
> doc.add("all", "four five six");
> doc.add("all", "seven eight nine");
> index the document.
>
> Assume you've implemented an analyzer that returns 1000 for=20
> getPositionIncrementGap.
>
> Now, the term offsets in the single document will be one - 0 two - 1=20
> three - 2 four 1003 five 1004 six 1005 seven 2006 eight 2007 nine 2008
>
> Now, if you use SpanNearQuery with a slop of 900 (i.e. "one nine"~900)

> you won't get a match because the "distance" between one and nine is=20
> more than 900. But "one three"~900 will match.
>
> It's possible to transform any query into a set of span queries, See=20
> the thread "Multiword Highlighting" that Mark Miller and I were=20
> exchanging ideas on recently. Be aware that the code we were talking=20
> about has to have a modification when used on a "regular" index where=20
> it pays attention to the document that each sub-clause comes. The=20
> code, as written, assumes you're using a MemoryIndex for one and only=20
> one document, so unless you need complex queries, I'd just think about

> rewriting simple queries with ANDs as a SpanNearQuery.

Well, what I meant was instead of using a gap of 1000 what I was
thinking is could we not replace that gap of a 1000 characters with a ~.
Then, if this is possible what I was wondering is whether there is a way
of performing searches using the ~.

Cheers

Sachin
=20

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: 21 February 2007 13:05
To: java-user@lucene.apache.org
Subject: Re: Search for a term in all fields

I don't see what you're getting at. There are only two forms of a query
term,,,, field:value value

And the second is really the first with the default field you specified
in the parser implied. So just think of all terms you specify in a query
as field:term.

Having some "special character" in the index doesn't help you because
you still have to specify the field. And your two choices are still
either a BooleanQuery that mentions all fields or indexing the data into
a single field.

Best
Erick



On 2/21/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
>
> Well, here's my current thoughts on acheiveing this.  Instead of=20
> putting a 1000 space gap between elements of the 1ll field could I not

> use a character that isn't used in the data such as ~ and then somehow

> (don't know how) use that to search all fields?
>
> -----Original Message-----
> From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
> Sent: 20 February 2007 18:30
> To: java-user@lucene.apache.org
> Subject: Re: Search for a term in all fields
>
>
> The information Erick gave you when you asked this question yesterday=20
> is all very accurate -- the one addition i would make is that you=20
> don't need SpanNear queries to take advantage of positionINcrimentGap=20
> -- PhraseQueries do that to.
>
> Consolidating your fields into a single "all" field, or constructing a

> BoolenQuery across all of your existing fields are really the two main

> options -- each with their tradeoffs.
>
> http://www.nabble.com/Search-in-all-fields-tf3254569.html
>
> : Date: Tue, 20 Feb 2007 12:29:25 -0000
> : From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
> : Reply-To: java-user@lucene.apache.org
> : To: java-user@lucene.apache.org
> : Subject: Search for a term in all fields
> :
> : Hi all,
> :
> : How do I search for a term in all fields of a document?
> :
> : Cheers
> :
> : Sachin
> :
> :
> : This email and any attached files are confidential and copyright=20
> protected. If you are not the addressee, any dissemination of this=20
> communication is strictly prohibited. Unless otherwise expressly=20
> agreed in writing, nothing stated in this communication shall be=20
> legally binding.
> :
> : The ultimate parent company of the Atkins Group is WS Atkins plc.
> Registered in England No. 1885586.  Registered Office Woodcote Grove,=20
> Ashley Road, Epsom, Surrey KT18 5BW.
> :
> : Consider the environment. Please don't print this e-mail unless you=20
> really need to.
> :
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> This message has been scanned for viruses by MailControl - (see
> http://bluepages.wsatkins.co.uk/?6875772)
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 21 14:08:45 2007
Return-Path: <java-user-return-26270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11118 invoked from network); 21 Feb 2007 14:08:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2007 14:08:44 -0000
Received: (qmail 40016 invoked by uid 500); 21 Feb 2007 14:08:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39977 invoked by uid 500); 21 Feb 2007 14:08:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39966 invoked by uid 99); 21 Feb 2007 14:08:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 06:08:44 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a15.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 06:08:31 -0800
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a15.dreamhost.com (Postfix) with ESMTP id 9BA0C7F046
	for <java-user@lucene.apache.org>; Wed, 21 Feb 2007 06:08:10 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <Pine.LNX.4.58.0702202316300.24047@hal.rescomp.berkeley.edu>
References: <20070126195010.90762.qmail@web50305.mail.yahoo.com> <20070215150143.GA16525@fermat.math.technion.ac.il> <c68e39170702151320g546790b4qb16199eb1bf8c6c@mail.gmail.com> <4D497953-E489-4716-90BD-59A1B9AA6A93@rectangular.com> <Pine.LNX.4.58.0702182226440.20338@hal.rescomp.berkeley.edu> <3F2DFC4E-581A-44AC-B51A-CAFC9B2973B8@rectangular.com> <Pine.LNX.4.58.0702202316300.24047@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <EB6D675B-A7C0-4782-8411-F1FA1E17A05F@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: NO_NORMS and TOKENIZED?
Date: Wed, 21 Feb 2007 09:08:08 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Feb 21, 2007, at 2:35 AM, Chris Hostetter wrote:

>
> the other situation i brought up in that thread from way back was
> something Solr doesn't currently have a good solution for: one
> field value for display, but other values (in the same field) for
> searching ... likewise indexing one field value for sorting, but  
> storing
> several field values.
>
> the workarround for this of course is to use multiple field names:
> title, title_sort, title_search, etc...
>

I wonder if payloads could address this?  You could store your  
display info as a payload for the thing you are searching, etc.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 21 14:33:41 2007
Return-Path: <java-user-return-26271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26208 invoked from network); 21 Feb 2007 14:33:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2007 14:33:39 -0000
Received: (qmail 96715 invoked by uid 500); 21 Feb 2007 14:33:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96682 invoked by uid 500); 21 Feb 2007 14:33:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96671 invoked by uid 99); 21 Feb 2007 14:33:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 06:33:39 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 217.68.146.190 as permitted sender)
Received: from [217.68.146.190] (HELO cluster-b.mailcontrol.com) (217.68.146.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 06:33:25 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly36b.srv.mailcontrol.com (MailControl) with SMTP id l1LEX1hC013564
	for <java-user@lucene.apache.org>; Wed, 21 Feb 2007 14:33:02 GMT
Received: From SGBD012104.wsatkins.com ([10.202.26.18]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 117206836249; Wed, 21 Feb 2007 14:32:42 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012104.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 21 Feb 2007 14:32:41 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: pagination
Date: Wed, 21 Feb 2007 14:32:40 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705E93AA7@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: pagination
Thread-Index: AcdVuV80lIzIpbOqTBO7OmKg9m0tPQAC4P9g
References: <BC1CFC544422CB4A934908E126A4742705E429B4@SGBLOW2101.wsatkins.com> <359a92830702210507i3e91ffcfu9249bd9df74dc41f@mail.gmail.com>
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 21 Feb 2007 14:32:41.0935 (UTC) FILETIME=[24E675F0:01C755C5]
X-Scanned-By: MailControl A-07-06-90 (www.mailcontrol.com) on 10.66.0.146
X-Virus-Checked: Checked by ClamAV on apache.org

I might be missing something because TopDocs seems to only be about
finding the relevancy of documents and HitCollector doesn't seem to be
relavent either.=20

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: 21 February 2007 13:08
To: java-user@lucene.apache.org
Subject: Re: pagination

See TopDocs, HitCollector, etc. Don't iterate through a Hits objects to
get docs beyond, say, 100 since it's designed to efficiently return the
first 100 documents but re-executes the queries each 100 or so times you
advance to the next document.

Erick

On 2/21/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
>
> Hello,
>
> I was wondering if Lucene provides any mechanism which helps in=20
> pagination.  In other words is there a way to return the first 10 of=20
> 500 results and then the  next 10 and so on.
>
> Cheers
>
>
> This email and any attached files are confidential and copyright=20
> protected. If you are not the addressee, any dissemination of this=20
> communication is strictly prohibited. Unless otherwise expressly=20
> agreed in writing, nothing stated in this communication shall be
legally binding.
>
> The ultimate parent company of the Atkins Group is WS Atkins plc. =20
> Registered in England No. 1885586.  Registered Office Woodcote Grove,=20
> Ashley Road, Epsom, Surrey KT18 5BW.
>
> Consider the environment. Please don't print this e-mail unless you=20
> really need to.
>


This message has been scanned for viruses by MailControl - (see
http://bluepages.wsatkins.co.uk/?6875772)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 21 14:35:14 2007
Return-Path: <java-user-return-26272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26445 invoked from network); 21 Feb 2007 14:35:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2007 14:35:13 -0000
Received: (qmail 99011 invoked by uid 500); 21 Feb 2007 14:35:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98599 invoked by uid 500); 21 Feb 2007 14:35:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98588 invoked by uid 99); 21 Feb 2007 14:35:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 06:35:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [204.115.178.55] (HELO saturn.local) (204.115.178.55)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 06:35:03 -0800
Received: from TRAVELLER ([192.168.1.70]) by saturn.local with Microsoft SMTPSVC(5.0.2195.6713);
	 Wed, 21 Feb 2007 09:34:42 -0500
From: "Tim Johnson" <timothy.w.johnson@saic.com>
To: <java-user@lucene.apache.org>
Subject: Stop long running queries
Date: Wed, 21 Feb 2007 09:34:36 -0500
Message-ID: <000f01c755c5$6ac4f740$4601a8c0@TRAVELLER>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
Thread-Index: AcdVxWlCSer8eLHmSpmD6G4F8we1EA==
X-OriginalArrivalTime: 21 Feb 2007 14:34:42.0023 (UTC) FILETIME=[6C7A6F70:01C755C5]
X-Virus-Checked: Checked by ClamAV on apache.org

I'm having issues with some queries taking in excess of 500 secs to run to
completion. The system being used consists of ~100 million docs spilt up
across ~600 indexes.  The indexes are of various sizes from 15MB to 8GB and
all searches done in the system require an exact count of matching hits.
The documents are also indexed with various fields and types ranging from 15
to 200 fields depending on the data indexed.

98% of all queries run under 4 sec, but the remaining 2% run for > 15 secs
and sometimes > 500 secs.  These long running queries usually consist of
wildcard and range queries where the number of BooleanQuery statements
reaches into the 100,000 range.  Some of these queries return a relatively
small number of results (below 300).

I've recently tried to kill the search using a separate thread to wrap the
searcher.search method, which works, but only once.  The next query to come
through throws an "IOException: The handle is invalid." in the
FSInputStream.readInternal() method.

Any suggestions on how to stop these long running queries? 

Tim Johnson
SAIC
Systems Engineer
757.226.1569



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 21 14:58:18 2007
Return-Path: <java-user-return-26273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32557 invoked from network); 21 Feb 2007 14:58:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2007 14:58:17 -0000
Received: (qmail 40772 invoked by uid 500); 21 Feb 2007 14:58:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40541 invoked by uid 500); 21 Feb 2007 14:58:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40530 invoked by uid 99); 21 Feb 2007 14:58:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 06:58:15 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [217.146.189.35] (HELO web23010.mail.ird.yahoo.com) (217.146.189.35)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 21 Feb 2007 06:58:02 -0800
Received: (qmail 60066 invoked by uid 60001); 21 Feb 2007 14:57:40 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=GPfFIpXluLPQNv/VRx7sblqhngmM01NkMhcurX0m6Qc3CsHXArIWYEJkFEFlKtLZfcHMBdRSyvwzmSOhlG8Qttpr4DkCI8TZLeKNihPf00RgioFNvHsdV3rWlYZleTDGYya8VZxFTsvXMohLN4GaDPcIgQsPx/aG6m2ITNYIrmc=;
X-YMail-OSG: bmqK61EVM1nosL.mhI1rtmEUlc5hZC1Xc3bhNr9vnSE69jWgaCsEoD_dKNPhIjhNrqzIxLkmhBfudE.20gx_Cytda8sjeQraNQ6Isdn0eF3bu8RXb0rDo9SMTSRLvete1F9FZ1vURhne
Received: from [84.131.224.13] by web23010.mail.ird.yahoo.com via HTTP; Wed, 21 Feb 2007 14:57:40 GMT
X-Mailer: YahooMailRC/368.8 YahooMailWebService/0.6.132.8
Date: Wed, 21 Feb 2007 14:57:40 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: Stop long running queries
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <411635.59592.qm@web23010.mail.ird.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

have a look at  LuceneQueryOptimizer.java in nutch=0A=0A=0A----- Original M=
essage ----=0AFrom: Tim Johnson <timothy.w.johnson@saic.com>=0ATo: java-use=
r@lucene.apache.org=0ASent: Wednesday, 21 February, 2007 3:34:36 PM=0ASubje=
ct: Stop long running queries=0A=0AI'm having issues with some queries taki=
ng in excess of 500 secs to run to=0Acompletion. The system being used cons=
ists of ~100 million docs spilt up=0Aacross ~600 indexes.  The indexes are =
of various sizes from 15MB to 8GB and=0Aall searches done in the system req=
uire an exact count of matching hits.=0AThe documents are also indexed with=
 various fields and types ranging from 15=0Ato 200 fields depending on the =
data indexed.=0A=0A98% of all queries run under 4 sec, but the remaining 2%=
 run for > 15 secs=0Aand sometimes > 500 secs.  These long running queries =
usually consist of=0Awildcard and range queries where the number of Boolean=
Query statements=0Areaches into the 100,000 range.  Some of these queries r=
eturn a relatively=0Asmall number of results (below 300).=0A=0AI've recentl=
y tried to kill the search using a separate thread to wrap the=0Asearcher.s=
earch method, which works, but only once.  The next query to come=0Athrough=
 throws an "IOException: The handle is invalid." in the=0AFSInputStream.rea=
dInternal() method.=0A=0AAny suggestions on how to stop these long running =
queries? =0A=0ATim Johnson=0ASAIC=0ASystems Engineer=0A757.226.1569=0A=0A=
=0A=0A---------------------------------------------------------------------=
=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor ad=
ditional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A=0A=
=0A=0A=09=09=0A___________________________________________________________ =
=0AWhat kind of emailer are you? Find out today - get a free analysis of yo=
ur email personality. Take the quiz at the Yahoo! Mail Championship. =0Ahtt=
p://uk.rd.yahoo.com/evt=3D44106/*http://mail.yahoo.net/uk 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 21 14:58:55 2007
Return-Path: <java-user-return-26274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32880 invoked from network); 21 Feb 2007 14:58:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2007 14:58:54 -0000
Received: (qmail 43984 invoked by uid 500); 21 Feb 2007 14:58:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43928 invoked by uid 500); 21 Feb 2007 14:58:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43855 invoked by uid 99); 21 Feb 2007 14:58:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 06:58:51 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 209.85.134.185 as permitted sender)
Received: from [209.85.134.185] (HELO mu-out-0910.google.com) (209.85.134.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 06:58:39 -0800
Received: by mu-out-0910.google.com with SMTP id i10so1107746mue
        for <java-user@lucene.apache.org>; Wed, 21 Feb 2007 06:58:17 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ujpWOrb9e5za8geuJHpOr39pA6WZNS1SSqfTe5MtaYUzyx8sVWy/I5YPqrsgr0zEJHVhaHhyqysRl9mnoO3jht1DTEOrWyIHFjboD5fiXJCoEBZljElgeIAW3CNfAaSX7WLdzlRY6ca0WkYH1iuYRdHhhUvejIL1ceZ7H38CEjg=
Received: by 10.82.163.13 with SMTP id l13mr14163985bue.1172069897517;
        Wed, 21 Feb 2007 06:58:17 -0800 (PST)
Received: by 10.82.163.2 with HTTP; Wed, 21 Feb 2007 06:58:17 -0800 (PST)
Message-ID: <34b8543c0702210658w594bfdbcndce9eee9c5a518d6@mail.gmail.com>
Date: Wed, 21 Feb 2007 18:28:17 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: pagination
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705E429B4@SGBLOW2101.wsatkins.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6748_18768907.1172069897276"
References: <BC1CFC544422CB4A934908E126A4742705E429B4@SGBLOW2101.wsatkins.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6748_18768907.1172069897276
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi
I've overcome this problem without HitCollector, I build an interface just
like java.sql.ResultSet and its implementation class accept a Hits as
parameter and provide next() previous() etc. method to navigate between
records.
in my opinion this is a good solution.
Hope this help you


On 2/21/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
>
> Hello,
>
> I was wondering if Lucene provides any mechanism which helps in
> pagination.  In other words is there a way to return the first 10 of 500
> results and then the  next 10 and so on.
>
> Cheers
>
>
> This email and any attached files are confidential and copyright
> protected. If you are not the addressee, any dissemination of this
> communication is strictly prohibited. Unless otherwise expressly agreed in
> writing, nothing stated in this communication shall be legally binding.
>
> The ultimate parent company of the Atkins Group is WS Atkins
> plc.  Registered in England No. 1885586.  Registered Office Woodcote Grove,
> Ashley Road, Epsom, Surrey KT18 5BW.
>
> Consider the environment. Please don't print this e-mail unless you really
> need to.
>



-- 
Regards,
Mohammad

------=_Part_6748_18768907.1172069897276--

From java-user-return-26275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 21 14:59:08 2007
Return-Path: <java-user-return-26275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33014 invoked from network); 21 Feb 2007 14:59:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2007 14:59:06 -0000
Received: (qmail 45916 invoked by uid 500); 21 Feb 2007 14:59:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45875 invoked by uid 500); 21 Feb 2007 14:59:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45864 invoked by uid 99); 21 Feb 2007 14:59:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 06:59:06 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 06:58:54 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 0A18530EFC18; Wed, 21 Feb 2007 07:58:33 -0700 (MST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 53F0030EFC16
	for <java-user@lucene.apache.org>; Wed, 21 Feb 2007 07:58:30 -0700 (MST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <359a92830702210507i3e91ffcfu9249bd9df74dc41f@mail.gmail.com>
References: <BC1CFC544422CB4A934908E126A4742705E429B4@SGBLOW2101.wsatkins.com> <359a92830702210507i3e91ffcfu9249bd9df74dc41f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <367092FE-DA32-489D-86B6-5C9A209B8D51@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: pagination
Date: Wed, 21 Feb 2007 09:58:25 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1

I'll add that in a web application that using Hits to page through  
results is perfectly acceptable.  Going to these other APIs is a bit  
more complicated and often unnecessary.  Don't prematurely optimize!  :)

	Erik


On Feb 21, 2007, at 8:07 AM, Erick Erickson wrote:

> See TopDocs, HitCollector, etc. Don't iterate through a Hits  
> objects to get
> docs beyond, say, 100 since it's designed to efficiently return the  
> first
> 100 documents but re-executes the queries each 100 or so times you  
> advance
> to the next document.
>
> Erick
>
> On 2/21/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
>>
>> Hello,
>>
>> I was wondering if Lucene provides any mechanism which helps in
>> pagination.  In other words is there a way to return the first 10  
>> of 500
>> results and then the  next 10 and so on.
>>
>> Cheers
>>
>>
>> This email and any attached files are confidential and copyright
>> protected. If you are not the addressee, any dissemination of this
>> communication is strictly prohibited. Unless otherwise expressly  
>> agreed in
>> writing, nothing stated in this communication shall be legally  
>> binding.
>>
>> The ultimate parent company of the Atkins Group is WS Atkins
>> plc.  Registered in England No. 1885586.  Registered Office  
>> Woodcote Grove,
>> Ashley Road, Epsom, Surrey KT18 5BW.
>>
>> Consider the environment. Please don't print this e-mail unless  
>> you really
>> need to.
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 21 15:59:51 2007
Return-Path: <java-user-return-26276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58412 invoked from network); 21 Feb 2007 15:59:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2007 15:59:50 -0000
Received: (qmail 24962 invoked by uid 500); 21 Feb 2007 15:59:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24931 invoked by uid 500); 21 Feb 2007 15:59:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24920 invoked by uid 99); 21 Feb 2007 15:59:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 07:59:48 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 07:59:37 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1053882ugc
        for <java-user@lucene.apache.org>; Wed, 21 Feb 2007 07:59:16 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=oO5+DU7seazOcvblWuTXpqMsWaGBnis+SMUiNjyzcJTpi7xPvo3nENWbXQq4481nYrfpMeI4PDCTfPjJAfGVqAz5k5D6xiIAkMuyKdrAdHn6dnS8v2pQs4DtuUG17aPW7szJbwPgfiDVXtb2OXuzpktxFdNTEG50jNhtA3verhQ=
Received: by 10.82.111.8 with SMTP id j8mr14181528buc.1172073556110;
        Wed, 21 Feb 2007 07:59:16 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Wed, 21 Feb 2007 07:59:15 -0800 (PST)
Message-ID: <359a92830702210759w3f127b5ar1b5902cef3968747@mail.gmail.com>
Date: Wed, 21 Feb 2007 10:59:15 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search for a term in all fields
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705E4304E@SGBLOW2101.wsatkins.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7380_10538913.1172073555790"
References: <BC1CFC544422CB4A934908E126A4742705E0AA2C@SGBLOW2101.wsatkins.com>
	 <Pine.LNX.4.58.0702201016190.16563@hal.rescomp.berkeley.edu>
	 <BC1CFC544422CB4A934908E126A4742705E42956@SGBLOW2101.wsatkins.com>
	 <359a92830702210505g14d8383eq28834b55036949a8@mail.gmail.com>
	 <BC1CFC544422CB4A934908E126A4742705E4304E@SGBLOW2101.wsatkins.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7380_10538913.1172073555790
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Nothing jumps out at me....

Erick

On 2/21/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
>
> Sorry I didn't make myself clear at all.  Remember you said that it is
> possible to do this:
>
> > Sure. Convert your simple queries into span queries (which are also
> > relatively simple). Then, when you index everything in the "all"
> > field, subclass your analyzer to return a large PositionIncrementGap.
> > Explaining how this works with words is awkward, so....
> >
> > doc.add("all", "one two three");
> > doc.add("all", "four five six");
> > doc.add("all", "seven eight nine");
> > index the document.
> >
> > Assume you've implemented an analyzer that returns 1000 for
> > getPositionIncrementGap.
> >
> > Now, the term offsets in the single document will be one - 0 two - 1
> > three - 2 four 1003 five 1004 six 1005 seven 2006 eight 2007 nine 2008
> >
> > Now, if you use SpanNearQuery with a slop of 900 (i.e. "one nine"~900)
>
> > you won't get a match because the "distance" between one and nine is
> > more than 900. But "one three"~900 will match.
> >
> > It's possible to transform any query into a set of span queries, See
> > the thread "Multiword Highlighting" that Mark Miller and I were
> > exchanging ideas on recently. Be aware that the code we were talking
> > about has to have a modification when used on a "regular" index where
> > it pays attention to the document that each sub-clause comes. The
> > code, as written, assumes you're using a MemoryIndex for one and only
> > one document, so unless you need complex queries, I'd just think about
>
> > rewriting simple queries with ANDs as a SpanNearQuery.
>
> Well, what I meant was instead of using a gap of 1000 what I was
> thinking is could we not replace that gap of a 1000 characters with a ~.
> Then, if this is possible what I was wondering is whether there is a way
> of performing searches using the ~.
>
> Cheers
>
> Sachin
>
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: 21 February 2007 13:05
> To: java-user@lucene.apache.org
> Subject: Re: Search for a term in all fields
>
> I don't see what you're getting at. There are only two forms of a query
> term,,,, field:value value
>
> And the second is really the first with the default field you specified
> in the parser implied. So just think of all terms you specify in a query
> as field:term.
>
> Having some "special character" in the index doesn't help you because
> you still have to specify the field. And your two choices are still
> either a BooleanQuery that mentions all fields or indexing the data into
> a single field.
>
> Best
> Erick
>
>
>
> On 2/21/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
> >
> > Well, here's my current thoughts on acheiveing this.  Instead of
> > putting a 1000 space gap between elements of the 1ll field could I not
>
> > use a character that isn't used in the data such as ~ and then somehow
>
> > (don't know how) use that to search all fields?
> >
> > -----Original Message-----
> > From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
> > Sent: 20 February 2007 18:30
> > To: java-user@lucene.apache.org
> > Subject: Re: Search for a term in all fields
> >
> >
> > The information Erick gave you when you asked this question yesterday
> > is all very accurate -- the one addition i would make is that you
> > don't need SpanNear queries to take advantage of positionINcrimentGap
> > -- PhraseQueries do that to.
> >
> > Consolidating your fields into a single "all" field, or constructing a
>
> > BoolenQuery across all of your existing fields are really the two main
>
> > options -- each with their tradeoffs.
> >
> > http://www.nabble.com/Search-in-all-fields-tf3254569.html
> >
> > : Date: Tue, 20 Feb 2007 12:29:25 -0000
> > : From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
> > : Reply-To: java-user@lucene.apache.org
> > : To: java-user@lucene.apache.org
> > : Subject: Search for a term in all fields
> > :
> > : Hi all,
> > :
> > : How do I search for a term in all fields of a document?
> > :
> > : Cheers
> > :
> > : Sachin
> > :
> > :
> > : This email and any attached files are confidential and copyright
> > protected. If you are not the addressee, any dissemination of this
> > communication is strictly prohibited. Unless otherwise expressly
> > agreed in writing, nothing stated in this communication shall be
> > legally binding.
> > :
> > : The ultimate parent company of the Atkins Group is WS Atkins plc.
> > Registered in England No. 1885586.  Registered Office Woodcote Grove,
> > Ashley Road, Epsom, Surrey KT18 5BW.
> > :
> > : Consider the environment. Please don't print this e-mail unless you
> > really need to.
> > :
> >
> >
> >
> > -Hoss
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> > This message has been scanned for viruses by MailControl - (see
> > http://bluepages.wsatkins.co.uk/?6875772)
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_7380_10538913.1172073555790--

From java-user-return-26277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 21 16:11:31 2007
Return-Path: <java-user-return-26277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69788 invoked from network); 21 Feb 2007 16:11:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2007 16:11:30 -0000
Received: (qmail 65542 invoked by uid 500); 21 Feb 2007 16:11:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65503 invoked by uid 500); 21 Feb 2007 16:11:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65492 invoked by uid 99); 21 Feb 2007 16:11:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 08:11:31 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_FONT_BIG,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 217.69.20.190 as permitted sender)
Received: from [217.69.20.190] (HELO cluster-d.mailcontrol.com) (217.69.20.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 08:11:16 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly33d.srv.mailcontrol.com (MailControl) with SMTP id l1LGAjux029036
	for <java-user@lucene.apache.org>; Wed, 21 Feb 2007 16:10:46 GMT
Received: From SGBD012104.wsatkins.com ([10.202.26.18]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 1172074226908; Wed, 21 Feb 2007 16:10:26 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012104.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 21 Feb 2007 16:10:26 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C755D2.CBB2CCD9"
Subject: Returning only a small set of results
Date: Wed, 21 Feb 2007 16:10:24 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705E93E5A@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Returning only a small set of results
Thread-Index: AcdV0ssz4dadidYhQq63jPufwPi+ZA==
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 21 Feb 2007 16:10:26.0547 (UTC) FILETIME=[CC7B3C30:01C755D2]
X-Scanned-By: MailControl A-07-06-80 (www.mailcontrol.com) on 10.68.0.143
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C755D2.CBB2CCD9
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi all,

A question about efficiency and the internal workings of the Hits class.
When we make a call to IndexSearcher's search method thus:

Hits hits =3D searcher.Search(query);

Do we actually, physically get back all the results of the query even if
there are 20 million results or for efficiency do we physically get back
the first few results and if we then go and use (traverse, display
whatever) these hits then we physically get back more and more as and
when we need them.  It just seems that if we called the search method
and millions of records came back that this would be highly inefficient.
Also, if we do physically get back everything then is there a way of
ensuring we only get back a few at a time?

Thanks

Sachin


This email and any attached files are confidential and copyright protected.=
 If you are not the addressee, any dissemination of this communication is s=
trictly prohibited. Unless otherwise expressly agreed in writing, nothing s=
tated in this communication shall be legally binding.

The ultimate parent company of the Atkins Group is WS Atkins plc.  Register=
ed in England No. 1885586.  Registered Office Woodcote Grove, Ashley Road, =
Epsom, Surrey KT18 5BW.

Consider the environment. Please don't print this e-mail unless you really =
need to.=20

------_=_NextPart_001_01C755D2.CBB2CCD9--

From java-user-return-26278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 21 20:30:36 2007
Return-Path: <java-user-return-26278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83682 invoked from network); 21 Feb 2007 20:30:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2007 20:30:36 -0000
Received: (qmail 78589 invoked by uid 500); 21 Feb 2007 20:30:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77646 invoked by uid 500); 21 Feb 2007 20:30:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77634 invoked by uid 99); 21 Feb 2007 20:30:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 12:30:36 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 12:30:26 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id l1LKTwr6025618
	for <java-user@lucene.apache.org>; Wed, 21 Feb 2007 22:29:58 +0200
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz with ESMTP
	 id m2lmtj14; 21 Feb 2007 22:29:00 +0200
Message-ID: <45DCABC9.7060303@teamware.com>
Date: Thu, 22 Feb 2007 07:30:01 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Positions in SpanFirst
References: <45DC28E0.4070604@teamware.com> <359a92830702210516h2d0faa55id9a71f5e8bd1312c@mail.gmail.com>
In-Reply-To: <359a92830702210516h2d0faa55id9a71f5e8bd1312c@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Wed, 21 Feb 2007 22:29:58 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Erick,

> I'm not sure you can, since all the interfaces I use alter the increment
> between successive terms, but I'll be the first to admit that there are 
> many
> nooks and crannies that I don't know about... But I suspect that a negative
> increment is not supported intentionally....

I read your other interesting post about omitting termvector info and this led 
me to find Analyzer.getPositionIncrementGap.  The javadocs state

"Invoked before indexing a Field instance if terms have already been added to 
that field..."

so I thought that sounded good, but there does not seem to be a way to set it 
and most of the Analyzers just seem to use the base Analyzer method which 
returns 0, so I'm now confused as to what this actually does in practice.

> But I really doubt you want to do this due to the consequences. Consider in
> your example the terms would have the following offsets
> first 0
> bit 1
> second 0
> part 1
> third 0
> section 1
> 
> Now think about a proximity query "first section"~1. This would produce a
> hit because you've changed the whole sense of what offsets mean. Is this
> really a good thing?

That's a good point.  The field is used to index mail recipients and currently 
has a "starts with" search (non Lucene implementation).  Unless I can set the 
position increment gap, it is only ever possible to search for the first indexed 
recipient with proxity queries.\

I'm trying to ensure the Lucene implementation provides at least the original 
functionality.  If I can't achieve it I can just document the limitation.  If I 
can, I may get false hits, but I still have the choice to filter the hits and 
weed out the false ones before being given to the client.  It's not a 
showstopper, it would be good it it could be done.

Thanks
Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 21 21:00:49 2007
Return-Path: <java-user-return-26279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95893 invoked from network); 21 Feb 2007 21:00:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2007 21:00:49 -0000
Received: (qmail 56227 invoked by uid 500); 21 Feb 2007 21:00:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56180 invoked by uid 500); 21 Feb 2007 21:00:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56100 invoked by uid 99); 21 Feb 2007 21:00:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 13:00:53 -0800
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=UNDISC_RECIPS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 13:00:42 -0800
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id l1LL0ZU22401;
	Wed, 21 Feb 2007 15:00:36 -0600
Message-ID: <45DCB2EB.6000500@getopt.org>
Date: Wed, 21 Feb 2007 22:00:27 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To: undisclosed-recipients:;
Subject: ANN: Luke 0.7 released
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

I'm happy to announce that a new version of Luke - the Lucene Index 
Toolbox - is now available. As usually, you can get it from:

    http://www.getopt.org/luke

Highlights of this release:

* support for Lucene 2.1.0 release and earlier
* pagination of search results
* support for many new Field flags
* new plugin for term analysis (contributed by Mark Harwood)
* many other usability and functionality improvements.

Have fun!

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 21 21:25:14 2007
Return-Path: <java-user-return-26280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8573 invoked from network); 21 Feb 2007 21:25:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2007 21:25:12 -0000
Received: (qmail 13351 invoked by uid 500); 21 Feb 2007 21:25:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13310 invoked by uid 500); 21 Feb 2007 21:25:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13299 invoked by uid 99); 21 Feb 2007 21:25:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 13:25:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 13:25:01 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 3DF925B772; Wed, 21 Feb 2007 13:24:41 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 322607F403
	for <java-user@lucene.apache.org>; Wed, 21 Feb 2007 13:24:41 -0800 (PST)
Date: Wed, 21 Feb 2007 13:24:41 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: Search for a term in all fields
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705E42956@SGBLOW2101.wsatkins.com>
Message-ID: <Pine.LNX.4.58.0702211303240.21636@hal.rescomp.berkeley.edu>
References: <BC1CFC544422CB4A934908E126A4742705E0AA2C@SGBLOW2101.wsatkins.com>
 <Pine.LNX.4.58.0702201016190.16563@hal.rescomp.berkeley.edu>
 <BC1CFC544422CB4A934908E126A4742705E42956@SGBLOW2101.wsatkins.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Well, here's my current thoughts on acheiveing this.  Instead of putting
: a 1000 space gap between elements of the 1ll field could I not use a
: character that isn't used in the data such as ~ and then somehow (don't
: know how) use that to search all fields?

you could certianly introduce an artifical token into the stream, and then
use a SpanNotQuery to ensure that SpanNearQueries don't cross that
artificial token -- but it doesn't get arround the fact that you need to
add all of your text to a single ield ... that's not the same as "search
all field" (you have to be very clear about your terminology, if you
really ant to "search all fields" you need a boolean query across all
fields -- if you want to "search all text" then you haveto put "all text"
into a single field)

the real question you have to ask is why do you think a special character
would be better then a positionIncrimentGap? ... adding the gap is free,
easy to do, doesn't affect your index size at all, and doesn't require any
special parsing or index knowledge at query time -- just do phrase queries
as normal with moderate slop.

searching the archive for "sentence boundary" will find you some
justifications as to why you might want special marker terms in your data
to query on if you are trying to do searhes confined to a single
page/paragrpah/sentence/etc...  but if you don't have special needsl ike
that, a position gap is trivial and logical.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 21 21:30:27 2007
Return-Path: <java-user-return-26281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10581 invoked from network); 21 Feb 2007 21:30:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2007 21:30:26 -0000
Received: (qmail 25501 invoked by uid 500); 21 Feb 2007 21:30:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25462 invoked by uid 500); 21 Feb 2007 21:30:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25451 invoked by uid 99); 21 Feb 2007 21:30:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 13:30:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 13:30:15 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 491145B772; Wed, 21 Feb 2007 13:29:55 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 43EBB7F403
	for <java-user@lucene.apache.org>; Wed, 21 Feb 2007 13:29:55 -0800 (PST)
Date: Wed, 21 Feb 2007 13:29:55 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Stop long running queries
In-Reply-To: <000f01c755c5$6ac4f740$4601a8c0@TRAVELLER>
Message-ID: <Pine.LNX.4.58.0702211328350.24117@hal.rescomp.berkeley.edu>
References: <000f01c755c5$6ac4f740$4601a8c0@TRAVELLER>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org



optimizing away the expensive cases is your best bet if you can do it ...
another option is to use a custom HitCollector which keeps track of how
long it's been running and throws a subclass of RUntimeException which you
explicitly catch and deal with as appropriate if the query has been taking
too long.

: Date: Wed, 21 Feb 2007 09:34:36 -0500
: From: Tim Johnson <timothy.w.johnson@saic.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Stop long running queries
:
: I'm having issues with some queries taking in excess of 500 secs to run to
: completion. The system being used consists of ~100 million docs spilt up
: across ~600 indexes.  The indexes are of various sizes from 15MB to 8GB and
: all searches done in the system require an exact count of matching hits.
: The documents are also indexed with various fields and types ranging from 15
: to 200 fields depending on the data indexed.
:
: 98% of all queries run under 4 sec, but the remaining 2% run for > 15 secs
: and sometimes > 500 secs.  These long running queries usually consist of
: wildcard and range queries where the number of BooleanQuery statements
: reaches into the 100,000 range.  Some of these queries return a relatively
: small number of results (below 300).
:
: I've recently tried to kill the search using a separate thread to wrap the
: searcher.search method, which works, but only once.  The next query to come
: through throws an "IOException: The handle is invalid." in the
: FSInputStream.readInternal() method.
:
: Any suggestions on how to stop these long running queries?
:
: Tim Johnson
: SAIC
: Systems Engineer
: 757.226.1569
:
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 21 22:00:30 2007
Return-Path: <java-user-return-26282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22692 invoked from network); 21 Feb 2007 22:00:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2007 22:00:29 -0000
Received: (qmail 77723 invoked by uid 500); 21 Feb 2007 22:00:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77672 invoked by uid 500); 21 Feb 2007 22:00:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77641 invoked by uid 99); 21 Feb 2007 22:00:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 14:00:27 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 14:00:16 -0800
Received: by nf-out-0910.google.com with SMTP id i2so320109nfe
        for <java-user@lucene.apache.org>; Wed, 21 Feb 2007 13:59:55 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=KpXZylwAhyruooBgnRwr667sjw9y8tAD5C3znGoJtdGgCVm8UnX9o2HKmxcTmN5mOXgpABQJgqyMcgRI8wu7QTlXvgdjKfNRN85FnZNIsCHT9bwYvkNCL6AsNOMDTvnJnVNIRbLDRYYFyWcHe45pz5mqv+oXHj3LKsoGL7Mhk3I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Jcgh4DMckQ53mgh7OACide/SiF2HTmnC/tMEZLyUiY659R8xneEBx4F2rsF/4anf3zNDi+Qtdkqs48gzybojKoCiw5Uf4GUXYJc+ehV9Ir2fXz8kDErLa/Rj5ZuOSoAlJY+ZSzf+tF29S8l1sg1t7zF350zycfB5LAgKdpA4dkE=
Received: by 10.82.188.15 with SMTP id l15mr14291939buf.1172095194627;
        Wed, 21 Feb 2007 13:59:54 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Wed, 21 Feb 2007 13:59:54 -0800 (PST)
Message-ID: <359a92830702211359r2705dcbegdbfa6411b3b4b170@mail.gmail.com>
Date: Wed, 21 Feb 2007 16:59:54 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Positions in SpanFirst
In-Reply-To: <45DCABC9.7060303@teamware.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13629_8619331.1172095194053"
References: <45DC28E0.4070604@teamware.com>
	 <359a92830702210516h2d0faa55id9a71f5e8bd1312c@mail.gmail.com>
	 <45DCABC9.7060303@teamware.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13629_8619331.1172095194053
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See below..

On 2/21/07, Antony Bowesman <adb@teamware.com> wrote:
>
> Hi Erick,
>
> > I'm not sure you can, since all the interfaces I use alter the increment
> > between successive terms, but I'll be the first to admit that there are
> > many
> > nooks and crannies that I don't know about... But I suspect that a
> negative
> > increment is not supported intentionally....
>
> I read your other interesting post about omitting termvector info and this
> led
> me to find Analyzer.getPositionIncrementGap.  The javadocs state
>
> "Invoked before indexing a Field instance if terms have already been added
> to
> that field..."
>
> so I thought that sounded good, but there does not seem to be a way to set
> it
> and most of the Analyzers just seem to use the base Analyzer method which
> returns 0, so I'm now confused as to what this actually does in practice.



What this does is allow you to put gaps between successive sets of terms
indexed in the same field. For instance...
doc.add("field", "some stuff");
doc.add("field", "bunch hooey");
doc.add("field", "what is this");
writer.add(doc);

In this case, there would be the following positions, assuming that the
IncrementGap was 1000....
some 0
stuff 1
bunch 1002
hooey 1003
what 2004
is 2005
this 2006

It was a little hard to get my head around. The purpose is to be able to
increment things in a single field in a document, but have some sense of
grouping.


> But I really doubt you want to do this due to the consequences. Consider
> in
> > your example the terms would have the following offsets
> > first 0
> > bit 1
> > second 0
> > part 1
> > third 0
> > section 1
> >
> > Now think about a proximity query "first section"~1. This would produce
> a
> > hit because you've changed the whole sense of what offsets mean. Is this
> > really a good thing?
>
> That's a good point.  The field is used to index mail recipients and
> currently
> has a "starts with" search (non Lucene implementation).  Unless I can set
> the
> position increment gap, it is only ever possible to search for the first
> indexed
> recipient with proxity queries.\


This is confusing me. You can easily use proximity queries with the above
scenario. For instance, searching for "bunch hooey"~4 would generate a hit.
As would "bunch hooey"~10000. But "some this"~10 would not generate a hit.
Whether that does what you need is another question <G>... So it's time to
ask "what are you really trying to do?" In other words, what behavior are
you trying to mimic from the old code? It's not clear to me what the
behavior you need is. It'd help if you gave a concrete example of the raw
data, and what you want returned...

In your first example, using the above scheme, you'd get hits (using
SpanNear rather than SpanFirst) if you searched on
"first bit" in a SpanNear query with a slop of 2. You'd also get a hit if
you searched on
"second part" in a SpanNear with a slop of 2. Does this mimic the behavior
you need?

NOTE:, my "first bit" with slop shorthand above would actually be
constructed by instantiating a SpanNear query with two SpanTermQuerys in the
consctructor....

Best
Erick


I'm trying to ensure the Lucene implementation provides at least the
> original
> functionality.  If I can't achieve it I can just document the
> limitation.  If I
> can, I may get false hits, but I still have the choice to filter the hits
> and
> weed out the false ones before being given to the client.  It's not a
> showstopper, it would be good it it could be done.
>
> Thanks
> Antony
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_13629_8619331.1172095194053--

From java-user-return-26283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 21 22:03:34 2007
Return-Path: <java-user-return-26283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23844 invoked from network); 21 Feb 2007 22:03:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2007 22:03:33 -0000
Received: (qmail 84255 invoked by uid 500); 21 Feb 2007 22:03:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84224 invoked by uid 500); 21 Feb 2007 22:03:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84213 invoked by uid 99); 21 Feb 2007 22:03:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 14:03:34 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 14:03:23 -0800
Received: by nf-out-0910.google.com with SMTP id i2so320895nfe
        for <java-user@lucene.apache.org>; Wed, 21 Feb 2007 14:03:02 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=B30k3cMcIIOB8J/2hDUzgKL451dcxY8lbtrNoH8mMOQpRnV2BLI7JEc7gmktFVAr9fpx4j/wi06y4FBlCh3Xt4e7gedpV+6aGQWwvwV6mXWVuIeVQkJbaoidR1gmNQPZouzl9KXuSpULSSVS7UzL9lONHKBpXRTHH5ZXZnhy+H0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZLVHecZ2VsxkSuMuqydHKPG2qhALc8ZCkktbYe3vUUZcPSbh1yFDLaX0+J6+xpPXYI10wLRJgYgH5EPOAT7HEP0UpG9DRl3CXRVhDaRiN+UYyBN3llogZHzXGzQMe/dJ+xlv3bZ7nHNrfn1wEhd1zPr4+rJFY+TMXS4CPPRcaNs=
Received: by 10.82.134.12 with SMTP id h12mr14284461bud.1172095382326;
        Wed, 21 Feb 2007 14:03:02 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Wed, 21 Feb 2007 14:03:02 -0800 (PST)
Message-ID: <359a92830702211403l3bad189an41bcd4dcf1e3a868@mail.gmail.com>
Date: Wed, 21 Feb 2007 17:03:02 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ANN: Luke 0.7 released
In-Reply-To: <45DCB2EB.6000500@getopt.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13681_2542602.1172095382247"
References: <45DCB2EB.6000500@getopt.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13681_2542602.1172095382247
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Excellent! I'll be getting this first thing in the morning...

For a guy who's "really busy at his day job" you sure turned this around
quickly!

Erick

On 2/21/07, Andrzej Bialecki <ab@getopt.org> wrote:
>
> Hi all,
>
> I'm happy to announce that a new version of Luke - the Lucene Index
> Toolbox - is now available. As usually, you can get it from:
>
>     http://www.getopt.org/luke
>
> Highlights of this release:
>
> * support for Lucene 2.1.0 release and earlier
> * pagination of search results
> * support for many new Field flags
> * new plugin for term analysis (contributed by Mark Harwood)
> * many other usability and functionality improvements.
>
> Have fun!
>
> --
> Best regards,
> Andrzej Bialecki     <><
> ___. ___ ___ ___ _ _   __________________________________
> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> http://www.sigram.com  Contact: info at sigram dot com
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_13681_2542602.1172095382247--

From java-user-return-26284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 21 22:04:14 2007
Return-Path: <java-user-return-26284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24192 invoked from network); 21 Feb 2007 22:04:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2007 22:04:14 -0000
Received: (qmail 86032 invoked by uid 500); 21 Feb 2007 22:04:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85997 invoked by uid 500); 21 Feb 2007 22:04:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85985 invoked by uid 99); 21 Feb 2007 22:04:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 14:04:15 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 14:04:04 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id l1LM3box031646
	for <java-user@lucene.apache.org>; Thu, 22 Feb 2007 00:03:37 +0200
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz with ESMTP
	 id m2m03j9g; 22 Feb 2007 00:03:00 +0200
Message-ID: <45DCC1AD.5090504@teamware.com>
Date: Thu, 22 Feb 2007 09:03:25 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: ClassCastException/DocumentWriter and NullPointerException/RAMInputStream
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Thu, 22 Feb 2007 00:03:37 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

When adding documents to an index has anyone seen either

java.lang.ClassCastException: org.apache.lucene.analysis.Token cannot be cast to 
org.apache.lucene.index.Posting
   at 
org.apache.lucene.index.DocumentWriter.sortPostingTable(DocumentWriter.java:238)
   at org.apache.lucene.index.DocumentWriter.addDocument(DocumentWriter.java:96)
   at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:476)

or

java.lang.NullPointerException
   at org.apache.lucene.store.RAMInputStream.<init>(RAMInputStream.java:32)
   at org.apache.lucene.store.RAMDirectory.openInput(RAMDirectory.java:171)
   at org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:155)
   at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:129)
   at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:110)
   at org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:702)
   at org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:686)
   at org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:656)
   at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:402)

This data has been indexed many times, but I've never seen this before.  It's 
Java 6 and Lucene 2.0.

Thanks
Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 21 22:43:33 2007
Return-Path: <java-user-return-26285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38020 invoked from network); 21 Feb 2007 22:43:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2007 22:43:32 -0000
Received: (qmail 42142 invoked by uid 500); 21 Feb 2007 22:43:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42105 invoked by uid 500); 21 Feb 2007 22:43:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42094 invoked by uid 99); 21 Feb 2007 22:43:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 14:43:32 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mrs.nospam@gmail.com designates 209.85.132.243 as permitted sender)
Received: from [209.85.132.243] (HELO an-out-0708.google.com) (209.85.132.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 14:43:21 -0800
Received: by an-out-0708.google.com with SMTP id c3so667565ana
        for <java-user@lucene.apache.org>; Wed, 21 Feb 2007 14:43:00 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=jA4tRmfmlnN/EW9r6LsxWajD6cseCpEzexMDWYPvQLCrXBJ6zmAsAe/n3kHGWhWC2maEfaHblq1FxPHdnOXwXeUQSNHmAIHlYG5ntLrwRK2CJK71+au0Cry2SJQYkefEfT292U8bqWyL4FiMeaf9sP72JQLiYacoDwvjvX+3JLg=
Received: by 10.114.205.1 with SMTP id c1mr4017992wag.1172097779869;
        Wed, 21 Feb 2007 14:42:59 -0800 (PST)
Received: by 10.114.195.10 with HTTP; Wed, 21 Feb 2007 14:42:59 -0800 (PST)
Message-ID: <bd818c7b0702211442i78a202d7y8d527b12dbf441f6@mail.gmail.com>
Date: Wed, 21 Feb 2007 17:42:59 -0500
From: "no spam" <mrs.nospam@gmail.com>
To: java-user@lucene.apache.org
Subject: updating index
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15831_558443.1172097779841"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15831_558443.1172097779841
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I have an index where I'm storing the primary key of my database record as
an unindexed field.   Nightly I want to update my search index with any
database changes / additions.

I don't really see an efficient way to update these records besides doing
something like this which I'm worried with thrash the index.  Is this
approach good/bad/ugly?

Thanks,
Mark

IndexReader reader;
ArrayList docsToUpdate;

for (int i = 0; i < reader.maxDoc(); i++)
{
    Document doc = reader.document(i);
    if (doc != null)
    {
       String prinaryKey = doc.getField("id");

        if (docsToUpdate.contains(primaryKey))
        {
             // set fields
             writer.updateDocument(doc);
        }
}

// for all docs not found in index
for (DBObject o : docsToUpdate)
{
    if (o.syncedWithIndex() == false)
    {
       // create new doc
      Document doc = ....;

       // this is a new doc
       writer.addDocument(doc);
    }
}

------=_Part_15831_558443.1172097779841--

From java-user-return-26286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 21 22:43:45 2007
Return-Path: <java-user-return-26286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38169 invoked from network); 21 Feb 2007 22:43:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2007 22:43:42 -0000
Received: (qmail 43513 invoked by uid 500); 21 Feb 2007 22:43:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43479 invoked by uid 500); 21 Feb 2007 22:43:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43426 invoked by uid 99); 21 Feb 2007 22:43:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 14:43:38 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 14:43:26 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id A55B85B772; Wed, 21 Feb 2007 14:43:05 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 9D45F7F403
	for <java-user@lucene.apache.org>; Wed, 21 Feb 2007 14:43:05 -0800 (PST)
Date: Wed, 21 Feb 2007 14:43:05 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Returning only a small set of results
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705E93E5A@SGBLOW2101.wsatkins.com>
Message-ID: <Pine.LNX.4.58.0702211442030.26342@hal.rescomp.berkeley.edu>
References: <BC1CFC544422CB4A934908E126A4742705E93E5A@SGBLOW2101.wsatkins.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: A question about efficiency and the internal workings of the Hits class.
: When we make a call to IndexSearcher's search method thus:
:
: Hits hits = searcher.Search(query);
:
: Do we actually, physically get back all the results of the query even if
: there are 20 million results or for efficiency do we physically get back

the Hits class fetches back the first N result documents (where N is 100 i
think) and then it fetches more and more as needed if you ask for more.
generally speaking Hits works fine for simple pagination applications, but
if you are intented on walking deep down the list of ordred results, i
would avoid it.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 21 22:47:09 2007
Return-Path: <java-user-return-26287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39261 invoked from network); 21 Feb 2007 22:47:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2007 22:47:08 -0000
Received: (qmail 50072 invoked by uid 500); 21 Feb 2007 22:47:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50049 invoked by uid 500); 21 Feb 2007 22:47:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50038 invoked by uid 99); 21 Feb 2007 22:47:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 14:47:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 14:46:58 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 4854A5B772; Wed, 21 Feb 2007 14:46:38 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 431347F403
	for <java-user@lucene.apache.org>; Wed, 21 Feb 2007 14:46:38 -0800 (PST)
Date: Wed, 21 Feb 2007 14:46:38 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: MultiSearcher vs IndexSearcher(new MultiReader
In-Reply-To: <1FEAFAB5-B75F-427E-A24A-759ED94FFFE3@gmail.com>
Message-ID: <Pine.LNX.4.58.0702211445000.26342@hal.rescomp.berkeley.edu>
References: <1FEAFAB5-B75F-427E-A24A-759ED94FFFE3@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Could someone enlighten me a bit about the subject? When do I want to
: use a MultiSearcher rather than a searcher running of a MultiReader?
: There seems to be a bunch of limitations in the MultiSearcher, and it
: is these that made me curious.

as i understand it the limitations of the MultiSearcher come from the fact
that it only requires a Searchable[] and the Searchable itnerface is
sufficiently simplified that it can support a lot more possibilities for
what it is ultimately searching (ie: a RemoteSearchable)

with a MultiReader,you must have an IndexReader[] which is a much weighter
contract to fulfill.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 21 22:55:24 2007
Return-Path: <java-user-return-26288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41713 invoked from network); 21 Feb 2007 22:55:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2007 22:55:23 -0000
Received: (qmail 66597 invoked by uid 500); 21 Feb 2007 22:55:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66563 invoked by uid 500); 21 Feb 2007 22:55:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66552 invoked by uid 99); 21 Feb 2007 22:55:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 14:55:23 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 14:55:13 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 779045B772; Wed, 21 Feb 2007 14:54:53 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 72F377F403
	for <java-user@lucene.apache.org>; Wed, 21 Feb 2007 14:54:53 -0800 (PST)
Date: Wed, 21 Feb 2007 14:54:53 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Positions in SpanFirst
In-Reply-To: <45DCABC9.7060303@teamware.com>
Message-ID: <Pine.LNX.4.58.0702211451580.26342@hal.rescomp.berkeley.edu>
References: <45DC28E0.4070604@teamware.com> <359a92830702210516h2d0faa55id9a71f5e8bd1312c@mail.gmail.com>
 <45DCABC9.7060303@teamware.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: so I thought that sounded good, but there does not seem to be a way to set it
: and most of the Analyzers just seem to use the base Analyzer method which
: returns 0, so I'm now confused as to what this actually does in practice.

by default all the analyzers return 0, but you can subclass any analyzer
(or anonymously subclass it) or write your own wrapper analyzer that
impliments it to return whatever you want.

: That's a good point.  The field is used to index mail recipients and currently
: has a "starts with" search (non Lucene implementation).  Unless I can set the
: position increment gap, it is only ever possible to search for the first indexed
: recipient with proxity queries.\

search the archives for info on "boundary" searching ... sentence or
paragraph or page ... the basic mechanism that can be used to get "starts
with" type queries where your definition of starts with doesn't match up
with the actual first term in the field is to to put a marker token in at
the begining of each value and then to a SpanNear query that starts with
it.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 00:03:12 2007
Return-Path: <java-user-return-26289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65980 invoked from network); 22 Feb 2007 00:03:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 00:03:11 -0000
Received: (qmail 79436 invoked by uid 500); 22 Feb 2007 00:03:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79413 invoked by uid 500); 22 Feb 2007 00:03:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79402 invoked by uid 99); 22 Feb 2007 00:03:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 16:03:12 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 16:03:00 -0800
Received: by nf-out-0910.google.com with SMTP id i2so346847nfe
        for <java-user@lucene.apache.org>; Wed, 21 Feb 2007 16:02:39 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZNUNOmmBkZsIIfxT1aZ4G1TUzkHg/FM++ayeSpBwMG/4bJfi0+hSdHOSQaPEga9P1Qobfl1abBWuhz3PnYlzXp9Qu1HidoEb/v2JrO92b6PW2TnNx7DO5mZol17qKI02NvAsOoBcvwSIAESNPZW5dqlAMdut76oma9VXdS357QI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qvo/Wmm6+9R1I0ds1jdpp3B4NA3GegFzz21/UrdMhfRLll0pQ0zE6HpLBLCHwTFGwxAaOZG+or2voYTHF4YaQBO8/SQC/jCsHE+fqhLUTF0EBSN+XUhyoQsSmj2IwkUYis0s6NkoXlYdPn7h9B862U8wdcPpZwq5GW3JMICJing=
Received: by 10.82.153.5 with SMTP id a5mr539bue.1172102558833;
        Wed, 21 Feb 2007 16:02:38 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Wed, 21 Feb 2007 16:02:38 -0800 (PST)
Message-ID: <359a92830702211602k5214be53r81a81d776feec362@mail.gmail.com>
Date: Wed, 21 Feb 2007 19:02:38 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: updating index
In-Reply-To: <bd818c7b0702211442i78a202d7y8d527b12dbf441f6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15133_17136184.1172102558804"
References: <bd818c7b0702211442i78a202d7y8d527b12dbf441f6@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15133_17136184.1172102558804
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I think you can get MUCH better efficiency by using TermEnum/TermDocs. But I
think you need to index (UN_TOKENIZED) your primary key (although now I'm
not sure. But I'd be surprised if TermEnum worked with un-indexed data.
Still, it'd be worth trying but I've always assumed that TermEnums only
worked on indexed fields....).....

Anyway, your loop looks more like this...

TermEnum terms = IndexReader.terms(new Term("primarykey", ""));
TermDocs tDocs = IndexRreader.termDocs();

while (terms.next()) {
   if (docsToUpdate.contains(terms.text()) {
       tDocs.seek(terms.term());
       writer.updateDocument(tDocs.doc());
   }
}

NOTE: I've been fast and loose with edge conditions, like insuring that
while (terms.next()) doesn't skip the first term, so caveat emptor.... This
loop also assumes that there is one and only one document in your index with
the primary key. Otherwise, you have to do some more work with the TermDocs
class to process each document that has your primary key...

This is similar to creating Lucene filters, which is very fast....

Hope this helps
Erick



On 2/21/07, no spam <mrs.nospam@gmail.com> wrote:
>
> I have an index where I'm storing the primary key of my database record as
> an unindexed field.   Nightly I want to update my search index with any
> database changes / additions.
>
> I don't really see an efficient way to update these records besides doing
> something like this which I'm worried with thrash the index.  Is this
> approach good/bad/ugly?
>
> Thanks,
> Mark
>
> IndexReader reader;
> ArrayList docsToUpdate;
>
> for (int i = 0; i < reader.maxDoc(); i++)
> {
>     Document doc = reader.document(i);
>     if (doc != null)
>     {
>        String prinaryKey = doc.getField("id");
>
>         if (docsToUpdate.contains(primaryKey))
>         {
>              // set fields
>              writer.updateDocument(doc);
>         }
> }
>
> // for all docs not found in index
> for (DBObject o : docsToUpdate)
> {
>     if (o.syncedWithIndex() == false)
>     {
>        // create new doc
>       Document doc = ....;
>
>        // this is a new doc
>        writer.addDocument(doc);
>     }
> }
>

------=_Part_15133_17136184.1172102558804--

From java-user-return-26290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 00:10:09 2007
Return-Path: <java-user-return-26290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67521 invoked from network); 22 Feb 2007 00:10:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 00:10:09 -0000
Received: (qmail 88965 invoked by uid 500); 22 Feb 2007 00:10:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88937 invoked by uid 500); 22 Feb 2007 00:10:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88926 invoked by uid 99); 22 Feb 2007 00:10:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 16:10:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 16:09:57 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id l1M09ULt005883
	for <java-user@lucene.apache.org>; Thu, 22 Feb 2007 02:09:30 +0200
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz with ESMTP
	 id m2m29rqs; 22 Feb 2007 02:09:00 +0200
Message-ID: <45DCDF3D.4070305@teamware.com>
Date: Thu, 22 Feb 2007 11:09:33 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Positions in SpanFirst
References: <45DC28E0.4070604@teamware.com>	 <359a92830702210516h2d0faa55id9a71f5e8bd1312c@mail.gmail.com>	 <45DCABC9.7060303@teamware.com> <359a92830702211359r2705dcbegdbfa6411b3b4b170@mail.gmail.com>
In-Reply-To: <359a92830702211359r2705dcbegdbfa6411b3b4b170@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Thu, 22 Feb 2007 02:09:30 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Erick,

> What this does is allow you to put gaps between successive sets of terms
> indexed in the same field. For instance...
> doc.add("field", "some stuff");
> doc.add("field", "bunch hooey");
> doc.add("field", "what is this");
> writer.add(doc);
> 
> In this case, there would be the following positions, assuming that the
> IncrementGap was 1000....
> some 0
> stuff 1
> bunch 1002
> hooey 1003
> what 2004
> is 2005
> this 2006

So, if you can add 1000, shouldn't setting 0 each time cause it to start at 0 
each time?  The default Analyzer.getPositionIncrementGap always returns 0.

>> That's a good point.  The field is used to index mail recipients and
>> currently
>> has a "starts with" search (non Lucene implementation).  Unless I can set
>> the
>> position increment gap, it is only ever possible to search for the first
>> indexed
>> recipient with proxity queries.\
> 
> 
> This is confusing me. You can easily use proximity queries with the above
> scenario. For instance, searching for "bunch hooey"~4 would generate a hit.
> As would "bunch hooey"~10000. But "some this"~10 would not generate a hit.
> Whether that does what you need is another question <G>... So it's time to
> ask "what are you really trying to do?" In other words, what behavior are
> you trying to mimic from the old code? It's not clear to me what the
> behavior you need is. It'd help if you gave a concrete example of the raw
> data, and what you want returned...

You example is good enough, just assume they are people's names :)  I know I had 
a mail from Mrs Bunch Ogilvy, so I want to do a "starts with", i.e. SpanFirst 
for bunch, so I find all the first name bunches.

> In your first example, using the above scheme, you'd get hits (using
> SpanNear rather than SpanFirst) if you searched on
> "first bit" in a SpanNear query with a slop of 2. You'd also get a hit if
> you searched on
> "second part" in a SpanNear with a slop of 2. Does this mimic the behavior
> you need?

No, SpanNear is fine, but SpanFirst will not work as there always has to be a 
starting offset.  I can't search "bunch hooey" as SpanFirst unless I know that 
it was indexed as the second 'group' and therefore set the starting span 
position as 1002.

Using Lucene has added a whole world of new search possibilities to the product, 
but when people have been using something a certain way for 15 years, it can be 
difficult to shift their expectations :)  There's always someone who will shout...

Antony


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 00:15:35 2007
Return-Path: <java-user-return-26291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68374 invoked from network); 22 Feb 2007 00:15:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 00:15:34 -0000
Received: (qmail 94987 invoked by uid 500); 22 Feb 2007 00:15:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94951 invoked by uid 500); 22 Feb 2007 00:15:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94937 invoked by uid 99); 22 Feb 2007 00:15:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 16:15:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 16:15:24 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 2DFB05B772; Wed, 21 Feb 2007 16:15:03 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 26ACF7F403
	for <java-user@lucene.apache.org>; Wed, 21 Feb 2007 16:15:03 -0800 (PST)
Date: Wed, 21 Feb 2007 16:15:03 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Positions in SpanFirst
In-Reply-To: <45DCDF3D.4070305@teamware.com>
Message-ID: <Pine.LNX.4.58.0702211613220.31157@hal.rescomp.berkeley.edu>
References: <45DC28E0.4070604@teamware.com> 
 <359a92830702210516h2d0faa55id9a71f5e8bd1312c@mail.gmail.com> 
 <45DCABC9.7060303@teamware.com> <359a92830702211359r2705dcbegdbfa6411b3b4b170@mail.gmail.com>
 <45DCDF3D.4070305@teamware.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: So, if you can add 1000, shouldn't setting 0 each time cause it to start at 0
: each time?  The default Analyzer.getPositionIncrementGap always returns 0.

it's not called Analyzer.getPositionAfterGap .. it's
Analyzer.getPositionIncrementGap .. it's the Position Increment used when
there is a Gap -- so returning 0 means that no exra increment is used, and
multiple values are treated just like one long stream of tokens (each
token has a position of 1 greater then the token before it).




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 00:32:36 2007
Return-Path: <java-user-return-26292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71519 invoked from network); 22 Feb 2007 00:32:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 00:32:35 -0000
Received: (qmail 15879 invoked by uid 500); 22 Feb 2007 00:32:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15584 invoked by uid 500); 22 Feb 2007 00:32:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15573 invoked by uid 99); 22 Feb 2007 00:32:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 16:32:36 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 16:32:26 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id l1M0W0X9007133
	for <java-user@lucene.apache.org>; Thu, 22 Feb 2007 02:32:01 +0200
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz with ESMTP
	 id m2m2vlkw; 22 Feb 2007 02:31:00 +0200
Message-ID: <45DCE483.6020702@teamware.com>
Date: Thu, 22 Feb 2007 11:32:03 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Positions in SpanFirst
References: <45DC28E0.4070604@teamware.com>  <359a92830702210516h2d0faa55id9a71f5e8bd1312c@mail.gmail.com>  <45DCABC9.7060303@teamware.com> <359a92830702211359r2705dcbegdbfa6411b3b4b170@mail.gmail.com> <45DCDF3D.4070305@teamware.com> <Pine.LNX.4.58.0702211613220.31157@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0702211613220.31157@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Thu, 22 Feb 2007 02:32:01 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Ahh, now it falls into place.
Thanks
Antony


Chris Hostetter wrote:
> it's not called Analyzer.getPositionAfterGap .. it's
> Analyzer.getPositionIncrementGap .. it's the Position Increment used when
> there is a Gap -- so returning 0 means that no exra increment is used, and
> multiple values are treated just like one long stream of tokens (each
> token has a position of 1 greater then the token before it).



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 00:41:28 2007
Return-Path: <java-user-return-26293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73383 invoked from network); 22 Feb 2007 00:41:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 00:41:28 -0000
Received: (qmail 26005 invoked by uid 500); 22 Feb 2007 00:41:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25963 invoked by uid 500); 22 Feb 2007 00:41:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25931 invoked by uid 99); 22 Feb 2007 00:41:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 16:41:11 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 16:40:59 -0800
Received: by nf-out-0910.google.com with SMTP id i2so353550nfe
        for <java-user@lucene.apache.org>; Wed, 21 Feb 2007 16:40:38 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kcfDcbNu2aQBtoDmKio0REetgHlQ/AbxmqYZKS1ccgdcwoGvb4Nt371s484h4wp6hlAKovmOhbhXyqShwgBSrdCNv3y46MbvFvUqORU2uhtzxMw1VoJjWkYSrnV8k5CACZ+ywOY3HhmoIOv7eoPNDVD//QS3femnDi0ZcOWLQqk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jS7uKBQtdRDel3lqTZ97brx5sV3yBwc7sACbzuD/hcz1TTAaT74yDJPtav5w8LKw1iJsFFd6PdZH7GoSZrsqkanBqLr7m28k/uCSno960X4MVGsjhxS9zVuCGcWhXsrrWiqbM+94JDm3CcVpOgQnxm8ny8B/8q3foebGSGJfABw=
Received: by 10.82.178.11 with SMTP id a11mr8391buf.1172104838072;
        Wed, 21 Feb 2007 16:40:38 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Wed, 21 Feb 2007 16:40:38 -0800 (PST)
Message-ID: <359a92830702211640n6eb2eb94n7ec8306cc867a237@mail.gmail.com>
Date: Wed, 21 Feb 2007 19:40:38 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Positions in SpanFirst
In-Reply-To: <45DCDF3D.4070305@teamware.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15307_27255739.1172104838029"
References: <45DC28E0.4070604@teamware.com>
	 <359a92830702210516h2d0faa55id9a71f5e8bd1312c@mail.gmail.com>
	 <45DCABC9.7060303@teamware.com>
	 <359a92830702211359r2705dcbegdbfa6411b3b4b170@mail.gmail.com>
	 <45DCDF3D.4070305@teamware.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15307_27255739.1172104838029
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I really think you need to stop obsessing on SpanFirst <G>. I suspect that
this is leading you down an unrewarding path.

So I don't see why using a SpanNear that respects order and a large
IncrementGap won't solve your problem...... Although it would return "odd"
matches. Let's say you indexed "first second third" as one name and then
searched on a SpanNear of second and third with a slop of 100. You'd get a
match on a middle and last name rather than a first and last name..... But I
wonder if this can be tolerated given all the new capabilities you'll
doubtless be adding <G>.

Best
Erick

On 2/21/07, Antony Bowesman <adb@teamware.com> wrote:
>
> Hi Erick,
>
> > What this does is allow you to put gaps between successive sets of terms
> > indexed in the same field. For instance...
> > doc.add("field", "some stuff");
> > doc.add("field", "bunch hooey");
> > doc.add("field", "what is this");
> > writer.add(doc);
> >
> > In this case, there would be the following positions, assuming that the
> > IncrementGap was 1000....
> > some 0
> > stuff 1
> > bunch 1002
> > hooey 1003
> > what 2004
> > is 2005
> > this 2006
>
> So, if you can add 1000, shouldn't setting 0 each time cause it to start
> at 0
> each time?  The default Analyzer.getPositionIncrementGap always returns 0.
>
> >> That's a good point.  The field is used to index mail recipients and
> >> currently
> >> has a "starts with" search (non Lucene implementation).  Unless I can
> set
> >> the
> >> position increment gap, it is only ever possible to search for the
> first
> >> indexed
> >> recipient with proxity queries.\
> >
> >
> > This is confusing me. You can easily use proximity queries with the
> above
> > scenario. For instance, searching for "bunch hooey"~4 would generate a
> hit.
> > As would "bunch hooey"~10000. But "some this"~10 would not generate a
> hit.
> > Whether that does what you need is another question <G>... So it's time
> to
> > ask "what are you really trying to do?" In other words, what behavior
> are
> > you trying to mimic from the old code? It's not clear to me what the
> > behavior you need is. It'd help if you gave a concrete example of the
> raw
> > data, and what you want returned...
>
> You example is good enough, just assume they are people's names :)  I know
> I had
> a mail from Mrs Bunch Ogilvy, so I want to do a "starts with", i.e.
> SpanFirst
> for bunch, so I find all the first name bunches.
>
> > In your first example, using the above scheme, you'd get hits (using
> > SpanNear rather than SpanFirst) if you searched on
> > "first bit" in a SpanNear query with a slop of 2. You'd also get a hit
> if
> > you searched on
> > "second part" in a SpanNear with a slop of 2. Does this mimic the
> behavior
> > you need?
>
> No, SpanNear is fine, but SpanFirst will not work as there always has to
> be a
> starting offset.  I can't search "bunch hooey" as SpanFirst unless I know
> that
> it was indexed as the second 'group' and therefore set the starting span
> position as 1002.
>
> Using Lucene has added a whole world of new search possibilities to the
> product,
> but when people have been using something a certain way for 15 years, it
> can be
> difficult to shift their expectations :)  There's always someone who will
> shout...
>
> Antony
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_15307_27255739.1172104838029--

From java-user-return-26294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 00:46:19 2007
Return-Path: <java-user-return-26294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74356 invoked from network); 22 Feb 2007 00:46:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 00:46:18 -0000
Received: (qmail 34551 invoked by uid 500); 22 Feb 2007 00:46:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34514 invoked by uid 500); 22 Feb 2007 00:46:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34503 invoked by uid 99); 22 Feb 2007 00:46:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 16:46:19 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 16:46:09 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 8CFFD5B766; Wed, 21 Feb 2007 16:45:49 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 86BC07F403
	for <java-user@lucene.apache.org>; Wed, 21 Feb 2007 16:45:49 -0800 (PST)
Date: Wed, 21 Feb 2007 16:45:49 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Positions in SpanFirst
In-Reply-To: <359a92830702211640n6eb2eb94n7ec8306cc867a237@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0702211642400.31157@hal.rescomp.berkeley.edu>
References: <45DC28E0.4070604@teamware.com> 
 <359a92830702210516h2d0faa55id9a71f5e8bd1312c@mail.gmail.com> 
 <45DCABC9.7060303@teamware.com>  <359a92830702211359r2705dcbegdbfa6411b3b4b170@mail.gmail.com>
  <45DCDF3D.4070305@teamware.com> <359a92830702211640n6eb2eb94n7ec8306cc867a237@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: So I don't see why using a SpanNear that respects order and a large
: IncrementGap won't solve your problem...... Although it would return "odd"

i think the use case he's worreid about is that he needs to be able to
find matches just on the "start" of a persons name, ie...

	Email#1 To: Jim Bob; Sue Anne-Marie Brown; John Doe
	Email#2 To: Tom Smith; Bob Jones; John Doe

...he needs to support existing semantics that let him say "find emails
where the start of a persons name is 'bob' and it returns Email#2, but not
email#1 .. hence his interest in SpanFirst -- he wants to match the
"first" few tokens of a "value" added to a field (which isn't waht
SpanFirst does)


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 00:49:39 2007
Return-Path: <java-user-return-26295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75881 invoked from network); 22 Feb 2007 00:49:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 00:49:39 -0000
Received: (qmail 38959 invoked by uid 500); 22 Feb 2007 00:49:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38921 invoked by uid 500); 22 Feb 2007 00:49:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38910 invoked by uid 99); 22 Feb 2007 00:49:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 16:49:40 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 16:49:28 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HK28x-00063e-Tq
	for java-user@lucene.apache.org; Wed, 21 Feb 2007 16:49:07 -0800
Message-ID: <9092111.post@talk.nabble.com>
Date: Wed, 21 Feb 2007 16:49:07 -0800 (PST)
From: dmitri <evysq@mail.ru>
To: java-user@lucene.apache.org
Subject: Scoring while sorting
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: evysq@mail.ru
X-Virus-Checked: Checked by ClamAV on apache.org


What is the point to calculate score if the result set is going to be sorted
by some field?

Is it ok to replace several terms query (a OR b OR c) with MatchAllQuery and
RangeFilters (from a to a, from b to b, from c to c) if sorting is needed?
Won't it be faster?
---------------------
dmitri
-- 
View this message in context: http://www.nabble.com/Scoring-while-sorting-tf3270213.html#a9092111
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 03:27:11 2007
Return-Path: <java-user-return-26296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15331 invoked from network); 22 Feb 2007 03:27:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 03:27:09 -0000
Received: (qmail 19141 invoked by uid 500); 22 Feb 2007 03:27:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19112 invoked by uid 500); 22 Feb 2007 03:27:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19101 invoked by uid 99); 22 Feb 2007 03:27:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 19:27:10 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.73.178.148] (HELO web60420.mail.yahoo.com) (209.73.178.148)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 21 Feb 2007 19:26:57 -0800
Received: (qmail 10004 invoked by uid 60001); 22 Feb 2007 03:26:36 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=ks2FbgwFwPsqiE/YimMzCQMQWH/WSW+VP4xEmE7TUqXdeCEi4yCS+GKFGawvK3lIcGdvUhN51Lgr4Faxqa2UDm7FGLs8bJfBNcPTGnMDj3MyMLTjLA6Xjuqp4xmlJ8ECICx3H6HKiR18A6qmilnMqvVbv4ItNk6U1Mw8jzbcTOk=;
X-YMail-OSG: yHLrgzQVM1mEt2t.waUai_O1daTnHV66pu9RSXZyMWZaPTD9kZnue3D6pI2HUIs2fQ--
Received: from [155.69.147.185] by web60420.mail.yahoo.com via HTTP; Wed, 21 Feb 2007 19:26:36 PST
Date: Wed, 21 Feb 2007 19:26:36 -0800 (PST)
From: maureen tanuwidjaja <autumn_musique@yahoo.com>
Subject: Optimizing Index
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-653570078-1172114796=:8854"
Content-Transfer-Encoding: 8bit
Message-ID: <320519.8854.qm@web60420.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-653570078-1172114796=:8854
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi,
   
  I had an exsisting index file with the size 20.6 GB...I havent done any optimization in this index yet.Now I had a HDD of 100 GB,but apparently when I create program to optimize(which simply calls writer.optimize() to this indexfile),it gives the error that there is not enough space on the disk.
   
  I read that the size needed to optimize the index is twice as the original index size...then it should be around 40 GB instead...I confuse why the size of 100 GB is insufficient to do the optimization...
   
  Can anyone help me?
   
  THanks and Regards,
  Maureen 

 
---------------------------------
Need Mail bonding?
Go to the Yahoo! Mail Q&A for great tips from Yahoo! Answers users.
--0-653570078-1172114796=:8854--

From java-user-return-26297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 03:35:09 2007
Return-Path: <java-user-return-26297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17195 invoked from network); 22 Feb 2007 03:35:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 03:35:08 -0000
Received: (qmail 33616 invoked by uid 500); 22 Feb 2007 03:35:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33108 invoked by uid 500); 22 Feb 2007 03:35:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33097 invoked by uid 99); 22 Feb 2007 03:35:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 19:35:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 209.85.134.184 as permitted sender)
Received: from [209.85.134.184] (HELO mu-out-0910.google.com) (209.85.134.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 19:34:57 -0800
Received: by mu-out-0910.google.com with SMTP id i10so38890mue
        for <java-user@lucene.apache.org>; Wed, 21 Feb 2007 19:34:35 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=RMJMhIl5QTmSq6WWBw/B5jrKUq0KWBRV9I0b4L1pNRNM3worGB9/My2OQoA0ZdppWT84nhWuuGwEyrG6ChTMCninP5ImHguLYa3fuVl2xSLGgcuJJe+7Re4SG2OPL1BWb/AoTFb/5JTs3EAgjfC2LRakykNwJyr+xE8eaqyJUwc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=LNkl5B5QGmyYautyBmhUQGpgaHTlpNiPaDkN4b2APUh/SQNc5aFWj/+xDynoicaeVPjMD74oj20vNnkg+9jhe6WKYMWWw0jU6/gUgM7UzeiuFGNgcE4nC8kLenfuIeUzrYwXw4KD94BVajc++QKnkk2CIuQme6n67Pd3l/XICds=
Received: by 10.82.135.13 with SMTP id i13mr33181bud.1172115275826;
        Wed, 21 Feb 2007 19:34:35 -0800 (PST)
Received: by 10.82.106.19 with HTTP; Wed, 21 Feb 2007 19:34:35 -0800 (PST)
Message-ID: <c68e39170702211934x188b94ccs841f9417bc3c2cf6@mail.gmail.com>
Date: Wed, 21 Feb 2007 22:34:35 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Scoring while sorting
In-Reply-To: <9092111.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <9092111.post@talk.nabble.com>
X-Google-Sender-Auth: 89aceef29ebeae51
X-Virus-Checked: Checked by ClamAV on apache.org

On 2/21/07, dmitri <evysq@mail.ru> wrote:
> What is the point to calculate score if the result set is going to be sorted
> by some field?
>
> Is it ok to replace several terms query (a OR b OR c) with MatchAllQuery and
> RangeFilters (from a to a, from b to b, from c to c) if sorting is needed?
> Won't it be faster?

Yes.

Solr actually has an optional optimization where a query with a sort
without a score component can use a cached filter and re-sort that.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 04:22:05 2007
Return-Path: <java-user-return-26298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27393 invoked from network); 22 Feb 2007 04:22:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 04:22:04 -0000
Received: (qmail 94588 invoked by uid 500); 22 Feb 2007 04:22:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94359 invoked by uid 500); 22 Feb 2007 04:22:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94348 invoked by uid 99); 22 Feb 2007 04:22:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 20:22:05 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.73.178.152] (HELO web60424.mail.yahoo.com) (209.73.178.152)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 21 Feb 2007 20:21:52 -0800
Received: (qmail 5657 invoked by uid 60001); 22 Feb 2007 04:21:31 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=Z1NV4I0VihnQAI67OlAzUm7MMhQPd5u/oxMl/jiE54baQOvmTB6GXdj2/6ZS/YmE4BTH9sdDxaiUo8gjtnJTCdblAr2VMdOHybQGRsLu6h0BSxpIdcUcTxCCAtDH38npqhXrcoR/jg0NdbS1m6bxXE+InaEpEcx2tDGGtsagH0U=;
X-YMail-OSG: _9DTI4QVM1lJ1HaESn9tukBS0phio9IufzFroqP1FZWMqHK26iKtKNMy5VOuPG866pD3_Oi6I5ytTbfhSjf7WvUMx817HcOkbtlbhBCxC8yuIa.BESJdayl.50UxWe0x7j5hDzwZhnW2hJK861Y8YpJrPg--
Received: from [155.69.147.185] by web60424.mail.yahoo.com via HTTP; Wed, 21 Feb 2007 20:21:31 PST
Date: Wed, 21 Feb 2007 20:21:31 -0800 (PST)
From: maureen tanuwidjaja <autumn_musique@yahoo.com>
Subject: Searching eats lots of memory?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1722306798-1172118091=:5630"
Content-Transfer-Encoding: 8bit
Message-ID: <170863.5630.qm@web60424.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1722306798-1172118091=:5630
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

I also would like to know wheter searching in the indexfile eats lots of memory...I always ran out of memory when doing searching,i.e. it gives the exception java heap space(although I have put -Xmx768 in the VM argument) ...Is there any way to solve it?
 
---------------------------------
TV dinner still cooling?
Check out "Tonight's Picks" on Yahoo! TV.
--0-1722306798-1172118091=:5630--

From java-user-return-26299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 04:37:36 2007
Return-Path: <java-user-return-26299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33020 invoked from network); 22 Feb 2007 04:37:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 04:37:34 -0000
Received: (qmail 15367 invoked by uid 500); 22 Feb 2007 04:37:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15339 invoked by uid 500); 22 Feb 2007 04:37:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15328 invoked by uid 99); 22 Feb 2007 04:37:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 20:37:35 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Feb 2007 20:37:24 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id l1M4ato6022547
	for <java-user@lucene.apache.org>; Thu, 22 Feb 2007 06:36:55 +0200
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz with ESMTP
	 id m2m60110; 22 Feb 2007 06:36:00 +0200
Message-ID: <45DD1DDB.5070001@teamware.com>
Date: Thu, 22 Feb 2007 15:36:43 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: QueryParser bug?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Thu, 22 Feb 2007 06:36:55 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Using QueryParser to parse *tex* seems to create a PrefixQuery rather than 
WildcardQuery due to the trailing *, rather than Wildcard because of the other 
leading *.

As a result, this does not match, for example "context".  I've swapped the order 
of WILDTERM and PREFIXTERM in queryparsr.jj but that just prevents PrefixQuery 
from ever being generated.

Is this a known problem and is there any way around it?
Antony


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 08:10:14 2007
Return-Path: <java-user-return-26300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86087 invoked from network); 22 Feb 2007 08:10:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 08:10:14 -0000
Received: (qmail 77308 invoked by uid 500); 22 Feb 2007 08:10:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76374 invoked by uid 500); 22 Feb 2007 08:10:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76363 invoked by uid 99); 22 Feb 2007 08:10:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 00:10:13 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 00:10:01 -0800
Received: by nf-out-0910.google.com with SMTP id i2so438015nfe
        for <java-user@lucene.apache.org>; Thu, 22 Feb 2007 00:09:40 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=qi/D0rXWfQ114uS9g4kDnEFFKLvHJaT2IaCSa0bnOgtRIAo0beHi/CFO+1VRAM6e/sD6oNmPPQVJ6sLfQbcxyzQYCFyIcpE+8CWuy2UNoZu8L8UXQIXRWZX234vWNTdFnD92m7fI/WIgPCTJF+yfBqLi1lA5bOHiIC9y+RK+3NY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=Q6Wbyn0LEjdBvFdK+Wyb2ch1ziGCFDjmhWXufP0ako7M7fFwhzlzWnetJYnWnrV01pxwR+Uj91BUHfWbP4hs7N3JavCgCHBC1SertepO3tWBpJawgYgAQbj1/lOPRkQknSS/taCIvLGRacTEm5H7HILpKHgbBBde+rI3TbyTutA=
Received: by 10.82.134.12 with SMTP id h12mr65518bud.1172131780517;
        Thu, 22 Feb 2007 00:09:40 -0800 (PST)
Received: by 10.82.163.2 with HTTP; Thu, 22 Feb 2007 00:09:40 -0800 (PST)
Message-ID: <34b8543c0702220009m72f9e9c7pf8f9764953be6a48@mail.gmail.com>
Date: Thu, 22 Feb 2007 11:39:40 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: how to define a pool for Searcher?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18766_18495983.1172131780466"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_18766_18495983.1172131780466
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,
I am going to build a Searcher pooling. if any one has experience on this, I
would be glad to hear his/her recommendation and suggestion. I want to know
what issues I should be apply. considering I am going to use this on a web
application with many user sessions.

thank you very much in advance.
-- 
Regards,
Mohammad Norouzi

------=_Part_18766_18495983.1172131780466--

From java-user-return-26301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 08:17:56 2007
Return-Path: <java-user-return-26301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88059 invoked from network); 22 Feb 2007 08:17:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 08:17:55 -0000
Received: (qmail 85653 invoked by uid 500); 22 Feb 2007 08:17:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85610 invoked by uid 500); 22 Feb 2007 08:17:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85588 invoked by uid 99); 22 Feb 2007 08:17:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 00:17:54 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 00:17:43 -0800
Received: by nf-out-0910.google.com with SMTP id i2so439595nfe
        for <java-user@lucene.apache.org>; Thu, 22 Feb 2007 00:17:21 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=ZodP8hU1WVx4DnvXrA9sN2Qxhtr605nin8wS2luAUUG56JtY6Rq4Pumv0gvg956mLZdsAF7bvblF4rwfUY9Fi/gmFCukal8xkEcqmE/UbfCbpFAhgQyeCxw+h7NW1xkIfP5GIBlYkxSwEsj/93n3haXtGM/vKXNvJivWVWZZyr4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=QwZoz64oIDAaRgA634kpMmfCClHM/dSacORcuC6MAqzj49raNzrRDyKh/nASp8uhXAGbPSfTKWbCZvsdCivOBDP2se7qB1GHUEkB9vpxmbCpfxLduIMVE8Xlalwrhm+gTK8ElnCpugPZDihMBb3YR7nCh05GAohUwStVH0S2lkY=
Received: by 10.82.114.3 with SMTP id m3mr67637buc.1172132241333;
        Thu, 22 Feb 2007 00:17:21 -0800 (PST)
Received: by 10.82.163.2 with HTTP; Thu, 22 Feb 2007 00:17:21 -0800 (PST)
Message-ID: <34b8543c0702220017h52810c3fi92d9d76a33f5e52f@mail.gmail.com>
Date: Thu, 22 Feb 2007 11:47:21 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: a question about indexing database tables
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18839_18051069.1172132241292"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_18839_18051069.1172132241292
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello
In our application we have to index the database tables, there is two way to
make this

1- index each table in a separate directory and then keep all relation in
order to get right result. in this method, we should use filters to overcome
the problem of searching on another search result.
2. joining two or more tables and index the result of join query.

which approach is better, reliable, has acceptable performance.

thanks
-- 
Regards,
Mohammad

------=_Part_18839_18051069.1172132241292--

From java-user-return-26302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 08:20:47 2007
Return-Path: <java-user-return-26302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88726 invoked from network); 22 Feb 2007 08:20:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 08:20:46 -0000
Received: (qmail 90095 invoked by uid 500); 22 Feb 2007 08:20:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90057 invoked by uid 500); 22 Feb 2007 08:20:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90045 invoked by uid 99); 22 Feb 2007 08:20:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 00:20:46 -0800
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=UNPARSEABLE_RELAY,X_PRIORITY_HIGH
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [208.50.6.19] (HELO WM19.inbox.com) (208.50.6.19)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 22 Feb 2007 00:20:35 -0800
Received: from inbox.com (127.0.0.1:25)
	by inbox.com with [InBox.Com SMTP Server]
	id <702220003729.WM19> for <java-user@lucene.apache.org> from <wanster@inbox.com>;
	Thu, 22 Feb 2007 12:20:12 AM -0800
Mime-Version: 1.0
Date: Thu, 22 Feb 2007 00:20:12 -0800
Message-ID: <42E5A736D78.00000994wanster@inbox.com>
From: Ridzwan Aminuddin <wanster@inbox.com>
Subject: Lucene 1.4.3 : IndexWriter.addDocument(doc) fails when run on OS
  requiring permissions
To: java-user@lucene.apache.org
Importance: High
X-Priority: 1 (Highest)
X-Mailer: INBOX.COM
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: quoted-printable
X-IWM-ACU: gOvEh1NwyO3oKQC1RITwJrdX6Nj_ElWwfMsUIHXazSp1vgpcEU0gzoygs4ba
  ENSV-OEqKp5-Jw8KSJ6bJ3NNe0HrW9HQvhsb9i3NVgICyhWaBwWL8vpAMkz0
  Q50q8eQtL4nRjoTb-
X-Virus-Checked: Checked by ClamAV on apache.org

Hi=21

I'm writing a java program that uses Lucene 1.4.3 to index and create a =
vector file of words found in Text Files. The purpose is for text mining.

I created a Java .Jar file from my program and my python script calls the =
Java Jar executable. This is all triggered by my DTML code.

I'm running on Linux and i have no problem executing the script when i =
execute via command line. But once i trigger the script via the web (using =
Zope/Plone external methods ) it doesn't work anymore. This is because of =
the strict permissions that LInux has over its files and folders.=20

I've narrowed down the problem to the IndexWriter.addDocument(doc) method =
in Lucene 1.4.3 and as you can see below my code fails specifically when a =
new FieldsWriter object is being initialised.

I strongly suspect that it fails at this point but have no idea how to =
overcome this problem. I know that it has to do with the permissions =
because th eprogram works like a miracle when it is called via command =
line by the super user (sudo).

Could anyone give me any pointers or ideas of how i could overcome this.

The final statement which is printed before the program hangs is:
=22Entering DocumentWriter.AddDocument.... (4)=22

Here is the portions of my relevant code :



//-------------------------------------------------------------------------=
------------------
//=09=09=09Indexer.Java // This is my own method and class
//-------------------------------------------------------------------------=
------------------
        // continued from some other code......

=09Document doc =3D new Document();

        doc.add(Field.Text(=22articleTitle=22, articleTitle, true));
        doc.add(Field.Text(=22articleURL=22, articleURL, true));
        doc.add(Field.Text(=22articleSummary=22, articleSummary, true));
        doc.add(Field.Text(=22articleDate=22, articleDate, true));
        doc.add(Field.Text(=22articleSource=22, articleSource, true));
        doc.add(Field.Text(=22articleBody=22, articleBody, true));
        doc.add(Field.Keyword(=22filename=22, f.getCanonicalPath()));
       =20
=09try
                =7B
                    writer.addDocument(doc); // indexing fails because =
this statement cannot be executed

                =7D

                catch (Exception e)

                =7B
                    System.err.println (=22Cannot add doc exception =
thrown=21=22);

                =7D


//-------------------------------------------------------------------------=
------------------
//=09=09=09IndexWriter.Java // Lucene 1.4.3
//-------------------------------------------------------------------------=
------------------


public void addDocument(Document doc) throws IOException =7B

      addDocument(doc, analyzer);
  =7D


public void addDocument(Document doc, Analyzer analyzer) throws =
IOException =7B
   =20
    DocumentWriter dw; =20
     =20
    dw =3D new DocumentWriter(ramDirectory, analyzer, similarity, =
maxFieldLength);
   =20
    String segmentName =3D newSegmentName();
    dw.addDocument(segmentName, doc);      =09=09// The program fails to =
execute this line onwards=21

    synchronized (this) =7B

      segmentInfos.addElement(new SegmentInfo(segmentName, 1, =
ramDirectory));
      maybeMergeSegments();
    =7D

  =7D


//-------------------------------------------------------------------------=
------------------
//=09=09=09DocumentWriter.Java // Lucene 1.4.3
//-------------------------------------------------------------------------=
------------------



final void addDocument(String segment, Document doc)
            throws IOException =7B
  =20
      System.out.println(=22Entering DocumentWriter.AddDocument.... (1)=22);
  =20
    // write field names
    fieldInfos =3D new FieldInfos();
      System.out.println(=22Entering DocumentWriter.AddDocument.... (2)=22);

    fieldInfos.add(doc);
          System.out.println(=22Entering DocumentWriter.AddDocument.... =
(3)=22);

    fieldInfos.write(directory, segment + =22.fnm=22);

          System.out.println(=22Entering DocumentWriter.AddDocument.... =
(4)=22);  // The program fails after this=20

    // write field values
    FieldsWriter fieldsWriter =3D
            new FieldsWriter(directory, segment, fieldInfos);=09=09=09// =
Program fails to execute this statement
   =20
          System.out.println(=22Entering DocumentWriter.AddDocument.... =
(5)=22);

    try =7B
      fieldsWriter.addDocument(doc);

      System.out.println(=22Entering DocumentWriter.AddDocument.... (6)=22);
     =20
    =7D finally =7B
      fieldsWriter.close();
            System.out.println(=22Entering DocumentWriter.AddDocument.... =
(7)=22);

    =7D

          System.out.println(=22Entering DocumentWriter.AddDocument.... =
(8)=22);

    // invert doc into postingTable
    postingTable.clear();=09=09=09  // clear postingTable
    fieldLengths =3D new int=5BfieldInfos.size()=5D;    // init fieldLengths
    fieldPositions =3D new int=5BfieldInfos.size()=5D;  // init =
fieldPositions

          System.out.println(=22Entering DocumentWriter.AddDocument.... =
(9)=22);

    fieldBoosts =3D new float=5BfieldInfos.size()=5D;=09  // init =
fieldBoosts
    Arrays.fill(fieldBoosts, doc.getBoost());

          System.out.println(=22Entering DocumentWriter.AddDocument.... =
(10)=22);

    invertDocument(doc);

          System.out.println(=22Entering DocumentWriter.AddDocument.... =
(11)=22);

    // sort postingTable into an array
    Posting=5B=5D postings =3D sortPostingTable();

          System.out.println(=22Entering DocumentWriter.AddDocument.... =
(12)=22);

    /*
    for (int i =3D 0; i < postings.length; i++) =7B
      Posting posting =3D postings=5Bi=5D;
      System.out.print(posting.term);
      System.out.print(=22 freq=3D=22 + posting.freq);
      System.out.print(=22 pos=3D=22);
      System.out.print(posting.positions=5B0=5D);
      for (int j =3D 1; j < posting.freq; j++)
=09System.out.print(=22,=22 + posting.positions=5Bj=5D);
      System.out.println(=22=22);
    =7D
    */

    // write postings
    writePostings(postings, segment);

          System.out.println(=22Entering DocumentWriter.AddDocument.... =
(13)=22);

    // write norms of indexed fields
    writeNorms(doc, segment);

          System.out.println(=22Entering DocumentWriter.AddDocument.... =
(14)=22);

  =7D

//-------------------------------------------------------------------------=
------------------
//=09=09=09FieldsWriter.Java // Lucene 1.4.3
//-------------------------------------------------------------------------=
------------------


  FieldsWriter(Directory d, String segment, FieldInfos fn)
       throws IOException =7B
    fieldInfos =3D fn;
    fieldsStream =3D d.createFile(segment + =22.fdt=22);
    indexStream =3D d.createFile(segment + =22.fdx=22);
  =7D

//-------------------------------------------------------------------------=
------------------
//=09=09=09FSDirectory.Java // Lucene 1.4.3
//-------------------------------------------------------------------------=
------------------


public final OutputStream createFile(String name) throws IOException =7B
 =20
      System.out.println(=22Entering FSDirectory.createFile.... returning =
an OutputStream=22);

    return new FSOutputStream(new File(directory, name));
  =7D

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 08:30:08 2007
Return-Path: <java-user-return-26303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97764 invoked from network); 22 Feb 2007 08:30:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 08:30:07 -0000
Received: (qmail 1072 invoked by uid 500); 22 Feb 2007 08:30:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1037 invoked by uid 500); 22 Feb 2007 08:30:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1020 invoked by uid 99); 22 Feb 2007 08:30:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 00:30:06 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,MIME_BOUND_NEXTPART
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.154.194.71] (HELO srs2na11.bgl.lu) (194.154.194.71)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 22 Feb 2007 00:29:55 -0800
Received: from spmwf02l.luinternal.fortis.bank (unverified) by srs2na12.domain
 (Content Technologies SMTPRS 4.2.10) with ESMTP id <T7df5328f8c0aaf150a137@srs2na12.domain> for <java-user@lucene.apache.org>;
 Thu, 22 Feb 2007 09:30:43 +0100
Received: from SPMWB02L.luinternal.fortis.bank ([10.172.252.140]) by spmwf02l.luinternal.fortis.bank with Microsoft SMTPSVC(6.0.3790.0);
	 Thu, 22 Feb 2007 09:29:18 +0100
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_NextPartTM-000-70500af5-42b7-42e2-ba90-b4e4c6accfb8"
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: Open & Close Reader
Date: Thu, 22 Feb 2007 09:29:14 +0100
Message-ID: <EBC8F228BDB35A4394D0BE53DA25248808A9A41F@SPMWB02L.luinternal.fortis.bank>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: Open & Close Reader
Thread-Index: AcdWW4n6ar359bk5SVStE8ZmQ38wTw==
From: "DECAFFMEYER MATHIEU" <MATHIEU.DECAFFMAYER@fortis.lu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 22 Feb 2007 08:29:18.0656 (UTC) FILETIME=[8B8BDC00:01C7565B]
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPartTM-000-70500af5-42b7-42e2-ba90-b4e4c6accfb8
Content-Type: multipart/alternative; 
	boundary="----_=_NextPart_001_01C7565B.8937C480"

------_=_NextPart_001_01C7565B.8937C480
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

I need to merge indexes,
if I want the user to see the changes (the merged indexes), I heard I
need to close the index reader and re-open it again.

But I will need to do this avery x minutes for some reasons,
So I wondered what could happen if user does a query just when a re-open
of the reader has been done.

Thank you.

__________________________________
   Matthew



=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
Internet communications are not secure and therefore Fortis Banque Luxembou=
rg S.A. does not accept legal responsibility for the contents of this messa=
ge. The information contained in this e-mail is confidential and may be leg=
ally privileged. It is intended solely for the addressee. If you are not th=
e intended recipient, any disclosure, copying, distribution or any action t=
aken or omitted to be taken in reliance on it, is prohibited and may be unl=
awful. Nothing in the message is capable or intended to create any legally =
binding obligations on either party and it is not intended to provide legal=
 advice.
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D


------_=_NextPart_001_01C7565B.8937C480
Content-Type: text/html; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; charset=3Dus-ascii">
<META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version 6.5.7651.52">
<TITLE>Open &amp; Close Reader</TITLE>
</HEAD>
<BODY>
<!-- Converted from text/rtf format -->

<P><FONT SIZE=3D2 FACE=3D"Arial">Hi,</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial">I need to merge indexes,</FONT>

<BR><FONT SIZE=3D2 FACE=3D"Arial">if I want the user to see the changes (th=
e merged indexes), I heard I need to close the index reader and re-open it =
again.</FONT></P>

<P><FONT SIZE=3D2 FACE=3D"Arial">But I will need to do this avery x minutes=
 for some reasons,</FONT>

<BR><FONT SIZE=3D2 FACE=3D"Arial">So I wondered what could happen if user d=
oes a query just when a re-open of the reader has been done.</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial">Thank you.</FONT>
</P>

<P><B><SPAN LANG=3D"fr"><WBR><WBR><WBR><WBR><WBR><WBR><WBR><WBR><WBR><WBR><=
WBR><WBR><WBR><WBR><WBR><WBR><FONT COLOR=3D"#006699" SIZE=3D1 FACE=3D"Verda=
na">__________________________________</FONT></SPAN></B>

<BR><B><SPAN LANG=3D"fr"><FONT COLOR=3D"#006699" SIZE=3D1 FACE=3D"Verdana">=
&nbsp;&nbsp; Matthew</FONT></SPAN></B><SPAN LANG=3D"fr"><I></I><I></I></SPA=
N><I><SPAN LANG=3D"en-us"></SPAN></I>
</P>

<CODE><FONT SIZE=3D3><BR>
<BR>
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D<BR>
Internet communications are not secure and therefore Fortis Banque Luxembou=
rg S.A. does not accept legal responsibility for the contents of this messa=
ge. The information contained in this e-mail is confidential and may be leg=
ally privileged. It is intended solely for the addressee. If you are not th=
e intended recipient, any disclosure, copying, distribution or any action t=
aken or omitted to be taken in reliance on it, is prohibited and may be unl=
awful. Nothing in the message is capable or intended to create any legally =
binding obligations on either party and it is not intended to provide legal=
 advice.<BR>
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D<BR>
</FONT></CODE>
</BODY>
</HTML>
------_=_NextPart_001_01C7565B.8937C480--


------=_NextPartTM-000-70500af5-42b7-42e2-ba90-b4e4c6accfb8
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------=_NextPartTM-000-70500af5-42b7-42e2-ba90-b4e4c6accfb8--


From java-user-return-26304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 08:44:12 2007
Return-Path: <java-user-return-26304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5379 invoked from network); 22 Feb 2007 08:44:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 08:44:11 -0000
Received: (qmail 17735 invoked by uid 500); 22 Feb 2007 08:44:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17705 invoked by uid 500); 22 Feb 2007 08:44:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17694 invoked by uid 99); 22 Feb 2007 08:44:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 00:44:10 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.152 as permitted sender)
Received: from [195.212.29.152] (HELO mtagate3.de.ibm.com) (195.212.29.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 00:43:57 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate3.de.ibm.com (8.13.8/8.13.8) with ESMTP id l1M8hZ3u104958
	for <java-user@lucene.apache.org>; Thu, 22 Feb 2007 08:43:35 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.2) with ESMTP id l1M8hZ9L1519708
	for <java-user@lucene.apache.org>; Thu, 22 Feb 2007 09:43:35 +0100
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l1M8hZZV018260
	for <java-user@lucene.apache.org>; Thu, 22 Feb 2007 09:43:35 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l1M8hZ2x018252
	for <java-user@lucene.apache.org>; Thu, 22 Feb 2007 09:43:35 +0100
In-Reply-To: <42E5A736D78.00000994wanster@inbox.com>
Subject: Re: Lucene 1.4.3 : IndexWriter.addDocument(doc) fails when run on OS
  requiring permissions
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFDA9C83EF.05F174B1-ON8825728A.002E341E-8825728A.002F970C@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Thu, 22 Feb 2007 00:39:48 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 22/02/2007 10:43:34
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

This is a very common use case and Lucene is most likely not
the problem cause.

My guess is that (1) the first attempt to write anything to
disk failed. (2) opening the IndexWriter succeeded because
(a) the index exists already (from previous successful run) and
(b) locks are maintained in /tmp or so.

You can try running the same way some simple code that just
writes something to a file in the same directory where the
index is maintained (also, check access permissions at that folder).

Hope this helps,
Doron

(BTW, an exception stack trace would be far more informative than
the print statements here - best catch the exception in the
top level and print it.)

Ridzwan Aminuddin <wanster@inbox.com> wrote on 22/02/2007 00:20:12:

> Hi!
>
> I'm writing a java program that uses Lucene 1.4.3 to index and
> create a vector file of words found in Text Files. The purpose is
> for text mining.
>
> I created a Java .Jar file from my program and my python script
> calls the Java Jar executable. This is all triggered by my DTML code.
>
> I'm running on Linux and i have no problem executing the script when
> i execute via command line. But once i trigger the script via the
> web (using Zope/Plone external methods ) it doesn't work anymore.
> This is because of the strict permissions that LInux has over its
> files and folders.
>
> I've narrowed down the problem to the IndexWriter.addDocument(doc)
> method in Lucene 1.4.3 and as you can see below my code fails
> specifically when a new FieldsWriter object is being initialised.
>
> I strongly suspect that it fails at this point but have no idea how
> to overcome this problem. I know that it has to do with the
> permissions because th eprogram works like a miracle when it is
> called via command line by the super user (sudo).
>
> Could anyone give me any pointers or ideas of how i could overcome this.
>
> The final statement which is printed before the program hangs is:
> "Entering DocumentWriter.AddDocument.... (4)"
>
> Here is the portions of my relevant code :
>
>
>
>
//-------------------------------------------------------------------------------------------

> //         Indexer.Java // This is my own method and class
>
//-------------------------------------------------------------------------------------------

>         // continued from some other code......
>
>    Document doc = new Document();
>
>         doc.add(Field.Text("articleTitle", articleTitle, true));
>         doc.add(Field.Text("articleURL", articleURL, true));
>         doc.add(Field.Text("articleSummary", articleSummary, true));
>         doc.add(Field.Text("articleDate", articleDate, true));
>         doc.add(Field.Text("articleSource", articleSource, true));
>         doc.add(Field.Text("articleBody", articleBody, true));
>         doc.add(Field.Keyword("filename", f.getCanonicalPath()));
>
>    try
>                 {
>                     writer.addDocument(doc); // indexing fails
> because this statement cannot be executed
>
>                 }
>
>                 catch (Exception e)
>
>                 {
>                     System.err.println ("Cannot add doc exception
thrown!");
>
>                 }
>
>
>
//-------------------------------------------------------------------------------------------

> //         IndexWriter.Java // Lucene 1.4.3
>
//-------------------------------------------------------------------------------------------

>
>
> public void addDocument(Document doc) throws IOException {
>
>       addDocument(doc, analyzer);
>   }
>
>
> public void addDocument(Document doc, Analyzer analyzer) throws
IOException {
>
>     DocumentWriter dw;
>
>     dw = new DocumentWriter(ramDirectory, analyzer, similarity,
> maxFieldLength);
>
>     String segmentName = newSegmentName();
>     dw.addDocument(segmentName, doc);            // The program
> fails to execute this line onwards!
>
>     synchronized (this) {
>
>       segmentInfos.addElement(new SegmentInfo(segmentName, 1,
ramDirectory));
>       maybeMergeSegments();
>     }
>
>   }
>
>
>
//-------------------------------------------------------------------------------------------

> //         DocumentWriter.Java // Lucene 1.4.3
>
//-------------------------------------------------------------------------------------------

>
>
>
> final void addDocument(String segment, Document doc)
>             throws IOException {
>
>       System.out.println("Entering DocumentWriter.AddDocument.... (1)");
>
>     // write field names
>     fieldInfos = new FieldInfos();
>       System.out.println("Entering DocumentWriter.AddDocument.... (2)");
>
>     fieldInfos.add(doc);
>           System.out.println("Entering DocumentWriter.AddDocument....
(3)");
>
>     fieldInfos.write(directory, segment + ".fnm");
>
>           System.out.println("Entering DocumentWriter.
> AddDocument.... (4)");  // The program fails after this
>
>     // write field values
>     FieldsWriter fieldsWriter =
>             new FieldsWriter(directory, segment, fieldInfos);
> // Program fails to execute this statement
>
>           System.out.println("Entering DocumentWriter.AddDocument....
(5)");
>
>     try {
>       fieldsWriter.addDocument(doc);
>
>       System.out.println("Entering DocumentWriter.AddDocument.... (6)");
>
>     } finally {
>       fieldsWriter.close();
>             System.out.println("Entering DocumentWriter.AddDocument....
(7)");
>
>     }
>
>           System.out.println("Entering DocumentWriter.AddDocument....
(8)");
>
>     // invert doc into postingTable
>     postingTable.clear();           // clear postingTable
>     fieldLengths = new int[fieldInfos.size()];    // init fieldLengths
>     fieldPositions = new int[fieldInfos.size()];  // init fieldPositions
>
>           System.out.println("Entering DocumentWriter.AddDocument....
(9)");
>
>     fieldBoosts = new float[fieldInfos.size()];     // init fieldBoosts
>     Arrays.fill(fieldBoosts, doc.getBoost());
>
>           System.out.println("Entering DocumentWriter.AddDocument....
(10)");
>
>     invertDocument(doc);
>
>           System.out.println("Entering DocumentWriter.AddDocument....
(11)");
>
>     // sort postingTable into an array
>     Posting[] postings = sortPostingTable();
>
>           System.out.println("Entering DocumentWriter.AddDocument....
(12)");
>
>     /*
>     for (int i = 0; i < postings.length; i++) {
>       Posting posting = postings[i];
>       System.out.print(posting.term);
>       System.out.print(" freq=" + posting.freq);
>       System.out.print(" pos=");
>       System.out.print(posting.positions[0]);
>       for (int j = 1; j < posting.freq; j++)
>    System.out.print("," + posting.positions[j]);
>       System.out.println("");
>     }
>     */
>
>     // write postings
>     writePostings(postings, segment);
>
>           System.out.println("Entering DocumentWriter.AddDocument....
(13)");
>
>     // write norms of indexed fields
>     writeNorms(doc, segment);
>
>           System.out.println("Entering DocumentWriter.AddDocument....
(14)");
>
>   }
>
>
//-------------------------------------------------------------------------------------------

> //         FieldsWriter.Java // Lucene 1.4.3
>
//-------------------------------------------------------------------------------------------

>
>
>   FieldsWriter(Directory d, String segment, FieldInfos fn)
>        throws IOException {
>     fieldInfos = fn;
>     fieldsStream = d.createFile(segment + ".fdt");
>     indexStream = d.createFile(segment + ".fdx");
>   }
>
>
//-------------------------------------------------------------------------------------------

> //         FSDirectory.Java // Lucene 1.4.3
>
//-------------------------------------------------------------------------------------------

>
>
> public final OutputStream createFile(String name) throws IOException {
>
>       System.out.println("Entering FSDirectory.createFile....
> returning an OutputStream");
>
>     return new FSOutputStream(new File(directory, name));
>   }
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 09:10:03 2007
Return-Path: <java-user-return-26305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11971 invoked from network); 22 Feb 2007 09:10:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 09:10:02 -0000
Received: (qmail 47654 invoked by uid 500); 22 Feb 2007 09:10:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47628 invoked by uid 500); 22 Feb 2007 09:10:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47617 invoked by uid 99); 22 Feb 2007 09:10:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 01:10:01 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mbraun@uni-hd.de designates 129.206.100.212 as permitted sender)
Received: from [129.206.100.212] (HELO relay.uni-heidelberg.de) (129.206.100.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 01:09:49 -0800
Received: from serv25.ub.uni-heidelberg.de (serv25.ub.uni-heidelberg.de [147.142.186.75])
	by relay.uni-heidelberg.de (8.13.4/8.13.1) with ESMTP id l1M99QtP032105
	for <java-user@lucene.apache.org>; Thu, 22 Feb 2007 10:09:26 +0100
Received: from localhost (localhost [127.0.0.1])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 71D738BFA9
	for <java-user@lucene.apache.org>; Thu, 22 Feb 2007 10:09:26 +0100 (CET)
Received: from serv25.ub.uni-heidelberg.de ([127.0.0.1])
 by localhost (serv25.ub.uni-heidelberg.de [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 28708-01 for <java-user@lucene.apache.org>;
 Thu, 22 Feb 2007 10:09:25 +0100 (CET)
Received: from [147.142.85.36] (pers16.ub.uni-heidelberg.de [147.142.85.36])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 4D8988BFA8
	for <java-user@lucene.apache.org>; Thu, 22 Feb 2007 10:09:25 +0100 (CET)
Message-ID: <45DD5DC5.1000300@uni-hd.de>
Date: Thu, 22 Feb 2007 10:09:25 +0100
From: Martin Braun <mbraun@uni-hd.de>
Reply-To: mbraun@uni-hd.de
User-Agent: Thunderbird 1.5.0.9 (X11/20061206)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: autocomplete with multiple terms
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
X-Virus-Scanned: amavisd-new at ub.uni-heidelberg.de
X-Virus-Checked: Checked by ClamAV on apache.org

Hello All,

I am implementing a query auto-complete function  la google. Right now
I am using a TermEnum enumerator on a specific field and list the Terms
found.
That works good for Searches with only one Term, but when the user's
typing two or three words the function will autocomplete each Term
individually - but the problem is that the combination of the terms
could probably return no results.
An autocomplete Function should be really fast, so a search for all
possible combinations of the terms  wouldn't be a good solution.

So my strategy is in a dead end.

Does anybody know a better way?

I am not sure if we get enough queries for a search over an index base
on the user-queries.

the only thing I have found in the list before concerning this subject
is http://issues.apache.org/jira/browse/LUCENE-625, but I'm not sure if
it does the things I want.

tia,
martin



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 09:24:59 2007
Return-Path: <java-user-return-26306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19236 invoked from network); 22 Feb 2007 09:24:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 09:24:57 -0000
Received: (qmail 69030 invoked by uid 500); 22 Feb 2007 09:24:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69003 invoked by uid 500); 22 Feb 2007 09:24:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68992 invoked by uid 99); 22 Feb 2007 09:24:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 01:24:56 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [204.127.200.84] (HELO sccrmhc14.comcast.net) (204.127.200.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 01:24:44 -0800
Received: from xpsoleary (c-24-19-171-50.hsd1.wa.comcast.net[24.19.171.50])
          by comcast.net (sccrmhc14) with SMTP
          id <2007022209242301400p5ssle>; Thu, 22 Feb 2007 09:24:23 +0000
Reply-To: <tm-oleary@comcast.net>
From: "Mike O'Leary" <tm-oleary@comcast.net>
To: "Lucene Java User List" <java-user@lucene.apache.org>
Subject: Registering a local dtd file for use with Digester
Date: Thu, 22 Feb 2007 01:23:48 -0800
Message-ID: <015701c75663$2f9a7070$0302a8c0@xpsoleary>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0158_01C75620.21773070"
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
Thread-Index: AcdWYyg6pEppvPv1SN6ocrM7AOWlqg==
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0158_01C75620.21773070
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

I have a collection of XML files that I would like to parse using Digester
in order to index them for Lucene. A DTD file has been supplied for the XML
files, but none of those files has a <!DOCTYPE ...> line associating them
with the DTD file. Can the Digester's register function be used to tell it
to use that DTD file for such things as entity resolution? If so, how do I
do it? I don't understand how to specify a pathname for a local file in
terms of a publicId and an entityURL. If register can't be used for this
purpose, is there another way to do it? Thanks.

Mike


------=_NextPart_000_0158_01C75620.21773070--


From java-user-return-26307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 10:02:23 2007
Return-Path: <java-user-return-26307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33108 invoked from network); 22 Feb 2007 10:02:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 10:02:22 -0000
Received: (qmail 18335 invoked by uid 500); 22 Feb 2007 10:02:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17903 invoked by uid 500); 22 Feb 2007 10:02:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17892 invoked by uid 99); 22 Feb 2007 10:02:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 02:02:21 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 217.69.20.190 as permitted sender)
Received: from [217.69.20.190] (HELO cluster-d.mailcontrol.com) (217.69.20.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 02:02:07 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly41d.srv.mailcontrol.com (MailControl) with SMTP id l1MA1ju3030447
	for <java-user@lucene.apache.org>; Thu, 22 Feb 2007 10:01:45 GMT
Received: From SGBD012104.wsatkins.com ([10.202.26.18]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 1172138488203; Thu, 22 Feb 2007 10:01:28 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012104.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 22 Feb 2007 10:01:27 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Returning only a small set of results
Date: Thu, 22 Feb 2007 10:01:25 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705E9451D@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Returning only a small set of results
Thread-Index: AcdWCcSKTVl03OE1QPORcqNNoXQ3rgAXpzOw
References: <BC1CFC544422CB4A934908E126A4742705E93E5A@SGBLOW2101.wsatkins.com> <Pine.LNX.4.58.0702211442030.26342@hal.rescomp.berkeley.edu>
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 22 Feb 2007 10:01:27.0660 (UTC) FILETIME=[6B16EAC0:01C75668]
X-Scanned-By: MailControl A-07-06-80 (www.mailcontrol.com) on 10.68.0.151
X-Virus-Checked: Checked by ClamAV on apache.org

What can you use in place of Hits and how do they differ?=20

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20
Sent: 21 February 2007 22:43
To: java-user@lucene.apache.org
Subject: Re: Returning only a small set of results

: A question about efficiency and the internal workings of the Hits
class.
: When we make a call to IndexSearcher's search method thus:
:
: Hits hits =3D searcher.Search(query);
:
: Do we actually, physically get back all the results of the query even
if
: there are 20 million results or for efficiency do we physically get
back

the Hits class fetches back the first N result documents (where N is 100
i
think) and then it fetches more and more as needed if you ask for more.
generally speaking Hits works fine for simple pagination applications,
but if you are intented on walking deep down the list of ordred results,
i would avoid it.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



This message has been scanned for viruses by MailControl - (see
http://bluepages.wsatkins.co.uk/?6875772)


This email and any attached files are confidential and copyright protected.=
 If you are not the addressee, any dissemination of this communication is s=
trictly prohibited. Unless otherwise expressly agreed in writing, nothing s=
tated in this communication shall be legally binding.

The ultimate parent company of the Atkins Group is WS Atkins plc.  Register=
ed in England No. 1885586.  Registered Office Woodcote Grove, Ashley Road, =
Epsom, Surrey KT18 5BW.

Consider the environment. Please don't print this e-mail unless you really =
need to.=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 10:08:55 2007
Return-Path: <java-user-return-26308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36262 invoked from network); 22 Feb 2007 10:08:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 10:08:54 -0000
Received: (qmail 26483 invoked by uid 500); 22 Feb 2007 10:08:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25906 invoked by uid 500); 22 Feb 2007 10:08:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25895 invoked by uid 99); 22 Feb 2007 10:08:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 02:08:54 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of supriya.shyamal@artnology.com designates 80.67.18.13 as permitted sender)
Received: from [80.67.18.13] (HELO smtprelay01.ispgateway.de) (80.67.18.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 02:08:42 -0800
Received: (qmail 31807 invoked from network); 22 Feb 2007 10:08:19 -0000
Received: from unknown (HELO [192.168.100.19]) ([pbs]022615@[195.143.217.178])
          (envelope-sender <supriya.shyamal@artnology.com>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 22 Feb 2007 10:08:19 -0000
Message-ID: <45DD6B94.4010509@artnology.com>
Date: Thu, 22 Feb 2007 11:08:20 +0100
From: Supriya Kumar Shyamal <supriya.shyamal@artnology.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: ANN: Luke 0.7 released
References: <45DCB2EB.6000500@getopt.org>
In-Reply-To: <45DCB2EB.6000500@getopt.org>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Its really Great to have the tool compatible with Lucene 2.1.

It saves lot of energy.

Thanks once again.
supriya

Andrzej Bialecki wrote:
> Hi all,
>
> I'm happy to announce that a new version of Luke - the Lucene Index 
> Toolbox - is now available. As usually, you can get it from:
>
>    http://www.getopt.org/luke
>
> Highlights of this release:
>
> * support for Lucene 2.1.0 release and earlier
> * pagination of search results
> * support for many new Field flags
> * new plugin for term analysis (contributed by Mark Harwood)
> * many other usability and functionality improvements.
>
> Have fun!
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 10:17:20 2007
Return-Path: <java-user-return-26309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38947 invoked from network); 22 Feb 2007 10:17:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 10:17:19 -0000
Received: (qmail 38996 invoked by uid 500); 22 Feb 2007 10:17:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38969 invoked by uid 500); 22 Feb 2007 10:17:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38958 invoked by uid 99); 22 Feb 2007 10:17:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 02:17:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 02:17:07 -0800
Received: by nf-out-0910.google.com with SMTP id i2so464362nfe
        for <java-user@lucene.apache.org>; Thu, 22 Feb 2007 02:16:46 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=eyGgQ2StUfWy+Of1Fu9MSU9l4lBHK7sYQbIPau/5OwWym15prlLC4QW2xbf0fEIiasB/MA+syG0SnVawS5qF4Rt2BL/MD5aP553z5sdKk5aky4XMqIZEuLOisc8dUoKqNbVPBTiWsnczo9LN+Um5P/KguVrTQedwcl1aOrBXYqE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=sx74FZAZG9VOHHxGHlKscplY7+CV2Wi3439BINAkl7X5xGFNj52bItXy4/0+yZgfP53Ygoj7K1G9r6yIBJCWSeqT6ObbP3dXlTI/DCUd76ZFwAIdWzBeTwOinR+kNrRL3dkO8hnYsogMH31A+tBwZV1VA2jCBa2PqTGEHUZoIA4=
Received: by 10.48.202.18 with SMTP id z18mr3317817nff.1172139404173;
        Thu, 22 Feb 2007 02:16:44 -0800 (PST)
Received: from ?192.168.1.3? ( [83.249.110.75])
        by mx.google.com with ESMTP id l27sm5321877nfa.2007.02.22.02.16.43;
        Thu, 22 Feb 2007 02:16:43 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <45DD5DC5.1000300@uni-hd.de>
References: <45DD5DC5.1000300@uni-hd.de>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <D4E8A460-E0BF-426B-B3E8-FD831B9AC95D@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: autocomplete with multiple terms
Date: Thu, 22 Feb 2007 11:14:58 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


22 feb 2007 kl. 10.09 skrev Martin Braun:

> the only thing I have found in the list before concerning this subject
> is http://issues.apache.org/jira/browse/LUCENE-625, but I'm not  
> sure if
> it does the things I want.


> I am not sure if we get enough queries for a search over an index base
> on the user-queries.

If the content of your corpus is static enough, then time is the  
friend that will enable you gather enough user queries to build the  
suggestion data set.

Otherwise you have to produce simulated user queries by reducing your  
data set to the most common information. Perhaps using Markov chains,  
top n paths of terms with Dijkstra or so could be an easy way out.  
You can also start looking at the documents people choose to inspect,  
and use these as the base for phrase training.

I think you will get further considering this from a behavioral  
psychology angle rather than how to access the  corpus access  
problem. Also, navigating a reduced data set (such as the trie in  
LUCENE-625 compared to the corpus it suggests to) will save you a lot  
of system resources.

Hope this helps some.

-- 
karl





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 10:49:38 2007
Return-Path: <java-user-return-26310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45820 invoked from network); 22 Feb 2007 10:49:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 10:49:37 -0000
Received: (qmail 73156 invoked by uid 500); 22 Feb 2007 10:49:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73119 invoked by uid 500); 22 Feb 2007 10:49:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73108 invoked by uid 99); 22 Feb 2007 10:49:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 02:49:39 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 02:49:27 -0800
Received: by nf-out-0910.google.com with SMTP id i2so470831nfe
        for <java-user@lucene.apache.org>; Thu, 22 Feb 2007 02:49:06 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=GDXtgOqOt45MOzwYkVgsKQFDrStZZR6fk1MSP/OMd8e0GLJcCohflxs06bTNvo7pqbb8ZzSImHzhYI8HIdCuQ1mg5QROJ6+f9yVNDjAYPw6K4yrKcVuKBlQ/fLJIlCuBLWoiT7GJfSHgBlQMzuQ8PBobg/vjx3IEzyunqDRUcD8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=U3keJ9jmeMoZNJ3xoaGKADtaX6ViLevc/S+PzTirghkpS5hGH1z7OfZWESmAcmhOqEZBLqxdmSehhAX3LdalXVSV/TQdnH5MeSQ+UA29wOeKRSbpqkDYZM6yBdzY7tGn0OeekJsZg/MHjpUkgokeO22qqIbe8TKdySbYzmdIi20=
Received: by 10.49.12.4 with SMTP id p4mr3321332nfi.1172141345922;
        Thu, 22 Feb 2007 02:49:05 -0800 (PST)
Received: from ?192.168.1.3? ( [83.249.110.75])
        by mx.google.com with ESMTP id n22sm5386659nfc.2007.02.22.02.49.05;
        Thu, 22 Feb 2007 02:49:05 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <170863.5630.qm@web60424.mail.yahoo.com>
References: <170863.5630.qm@web60424.mail.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9E1B7804-88D7-4EE6-869B-D884EBA9B003@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Searching eats lots of memory?
Date: Thu, 22 Feb 2007 11:47:20 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


22 feb 2007 kl. 05.21 skrev maureen tanuwidjaja:

> I also would like to know wheter searching in the indexfile eats  
> lots of memory...I always ran out of memory when doing  
> searching,i.e. it gives the exception java heap space(although I  
> have put -Xmx768 in the VM argument) ...Is there any way to solve it?

Are you sure it's Lucene that consumes the memory? And if, do you  
really close and decouple all resources when they are not used any  
more? Profiling the application will probably show you what's up.

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 10:53:08 2007
Return-Path: <java-user-return-26311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46226 invoked from network); 22 Feb 2007 10:53:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 10:53:07 -0000
Received: (qmail 78643 invoked by uid 500); 22 Feb 2007 10:53:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78616 invoked by uid 500); 22 Feb 2007 10:53:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78605 invoked by uid 99); 22 Feb 2007 10:53:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 02:53:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.29] (HELO out5.smtp.messagingengine.com) (66.111.4.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 02:52:57 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id 8AFAB1CB048
	for <java-user@lucene.apache.org>; Thu, 22 Feb 2007 05:54:01 -0500 (EST)
Received: from web4.messagingengine.com ([10.202.2.213])
  by out1.internal (MEProxy); Thu, 22 Feb 2007 05:54:01 -0500
Received: by web4.messagingengine.com (Postfix, from userid 99)
	id 6A25B159D9E; Thu, 22 Feb 2007 05:54:01 -0500 (EST)
Message-Id: <1172141641.10439.1175932939@webmail.messagingengine.com>
X-Sasl-Enc: yHA3KlqTr2Coo8DlqbWO9mlbbtFjHDbU6SFe2EoPk8yO 1172141641
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <320519.8854.qm@web60420.mail.yahoo.com>
Subject: Re: Optimizing Index
In-Reply-To: <320519.8854.qm@web60420.mail.yahoo.com>
Date: Thu, 22 Feb 2007 05:54:01 -0500
X-Virus-Checked: Checked by ClamAV on apache.org


"maureen tanuwidjaja" wrote:

>   I had an exsisting index file with the size 20.6 GB...I havent done any
>   optimization in this index yet.Now I had a HDD of 100 GB,but apparently
>   when I create program to optimize(which simply calls writer.optimize()
>   to this indexfile),it gives the error that there is not enough space on
>   the disk.
>    
>   I read that the size needed to optimize the index is twice as the
>   original index size...then it should be around 40 GB instead...I
>   confuse why the size of 100 GB is insufficient to do the
>   optimization...

Does your disk only have this index?  Ie 100 GB - 20.6 = 79.4 GB of
free space?

Do you have reader(s) open on the index when you kick off the
optimize?  If so then the temporary free space required is 2X the size
of the index (41.2 GB in your case).

Worse, if your readers are refreshing during the optimize (eg because
on IndexReader.isCurrent() returned false) even more temporary disk
space can be tied up.  This is a case LUCENE-710 aims to fix (adding
"commit only on close" to IndexWriter).  The workaround for now is to
create app level logic to ensure readers never refresh during
optimize.

If you don't have readers then you really should only need 1X
additional free space at the start of optimize (20.6 GB free in your
case) so I'm baffled why 79.4 GB would not be enough.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 11:46:38 2007
Return-Path: <java-user-return-26312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61253 invoked from network); 22 Feb 2007 11:46:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 11:46:37 -0000
Received: (qmail 57850 invoked by uid 500); 22 Feb 2007 11:46:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57816 invoked by uid 500); 22 Feb 2007 11:46:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57803 invoked by uid 99); 22 Feb 2007 11:46:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 03:46:36 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.29] (HELO out5.smtp.messagingengine.com) (66.111.4.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 03:46:25 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id 7F0CA1CB2A9
	for <java-user@lucene.apache.org>; Thu, 22 Feb 2007 06:47:30 -0500 (EST)
Received: from web4.messagingengine.com ([10.202.2.213])
  by out1.internal (MEProxy); Thu, 22 Feb 2007 06:47:30 -0500
Received: by web4.messagingengine.com (Postfix, from userid 99)
	id 607D818AA86; Thu, 22 Feb 2007 06:47:30 -0500 (EST)
Message-Id: <1172144850.16556.1175940193@webmail.messagingengine.com>
X-Sasl-Enc: B+EcYcjFL7g7bL54H+ae7OsV7OxKfHE26Mp2LgJmf65Q 1172144850
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <EBC8F228BDB35A4394D0BE53DA25248808A9A41F@SPMWB02L.luinternal.fortis.bank>
Subject: Re: Open & Close Reader
In-Reply-To: <EBC8F228BDB35A4394D0BE53DA25248808A9A41F@SPMWB02L.luinternal.fortis.bank>
Date: Thu, 22 Feb 2007 06:47:30 -0500
X-Virus-Checked: Checked by ClamAV on apache.org


<MATHIEU.DECAFFMAYER@fortis.lu> wrote:

> I need to merge indexes,
> if I want the user to see the changes (the merged indexes), I heard I
> need to close the index reader and re-open it again.

Yes.  More generally, whenever there have been changes to an index
that you want your readers/searchers to see, you need to re-open the
reader/searcher.  A reader keeps a "point in time" view of the index
as of when it was open, and will not show any changes until it is
re-opened.

> But I will need to do this avery x minutes for some reasons,
> So I wondered what could happen if user does a query just when a re-open
> of the reader has been done.

I don't really understand this question -- could you provide more
detail here?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 12:09:41 2007
Return-Path: <java-user-return-26313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68531 invoked from network); 22 Feb 2007 12:09:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 12:09:40 -0000
Received: (qmail 90284 invoked by uid 500); 22 Feb 2007 12:09:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90257 invoked by uid 500); 22 Feb 2007 12:09:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90246 invoked by uid 99); 22 Feb 2007 12:09:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 04:09:40 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.154.194.71] (HELO srs2na11.bgl.lu) (194.154.194.71)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 22 Feb 2007 04:09:29 -0800
Received: from spmwf02l.luinternal.fortis.bank (unverified) by srs2na12.domain
 (Content Technologies SMTPRS 4.2.10) with ESMTP id <T7df5fb9a1a0aaf150a137@srs2na12.domain> for <java-user@lucene.apache.org>;
 Thu, 22 Feb 2007 13:10:18 +0100
Received: from SPMWB02L.luinternal.fortis.bank ([10.172.252.140]) by spmwf02l.luinternal.fortis.bank with Microsoft SMTPSVC(6.0.3790.0);
	 Thu, 22 Feb 2007 13:08:53 +0100
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: Open & Close Reader
Date: Thu, 22 Feb 2007 13:08:53 +0100
Message-ID: <EBC8F228BDB35A4394D0BE53DA25248808A9A429@SPMWB02L.luinternal.fortis.bank>
In-Reply-To: <1172144850.16556.1175940193@webmail.messagingengine.com>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: Open & Close Reader
Thread-Index: AcdWdxnHtRJEGUGMS9als6j5dKDW4gAAtZiA
From: "DECAFFMEYER MATHIEU" <MATHIEU.DECAFFMAYER@fortis.lu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 22 Feb 2007 12:08:53.0661 (UTC) FILETIME=[387614D0:01C7567A]
X-Virus-Checked: Checked by ClamAV on apache.org

My question is what happen when a re-opening of the reader occurs and in
the same time a user does a query on the index ? And are there solutions
for this.

__________________________________
   Matt

   =20

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: Thursday, February 22, 2007 12:48 PM
To: java-user@lucene.apache.org
Subject: Re: Open & Close Reader

*****  This message comes from the Internet Network *****


<MATHIEU.DECAFFMAYER@fortis.lu> wrote:

> I need to merge indexes,
> if I want the user to see the changes (the merged indexes), I heard I
> need to close the index reader and re-open it again.

Yes.  More generally, whenever there have been changes to an index
that you want your readers/searchers to see, you need to re-open the
reader/searcher.  A reader keeps a "point in time" view of the index
as of when it was open, and will not show any changes until it is
re-opened.

> But I will need to do this avery x minutes for some reasons,
> So I wondered what could happen if user does a query just when a
re-open
> of the reader has been done.

I don't really understand this question -- could you provide more
detail here?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
Internet communications are not secure and therefore Fortis Banque Luxembou=
rg S.A. does not accept legal responsibility for the contents of this messa=
ge. The information contained in this e-mail is confidential and may be leg=
ally privileged. It is intended solely for the addressee. If you are not th=
e intended recipient, any disclosure, copying, distribution or any action t=
aken or omitted to be taken in reliance on it, is prohibited and may be unl=
awful. Nothing in the message is capable or intended to create any legally =
binding obligations on either party and it is not intended to provide legal=
 advice.
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 12:34:42 2007
Return-Path: <java-user-return-26314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75595 invoked from network); 22 Feb 2007 12:34:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 12:34:40 -0000
Received: (qmail 44882 invoked by uid 500); 22 Feb 2007 12:34:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44855 invoked by uid 500); 22 Feb 2007 12:34:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44844 invoked by uid 99); 22 Feb 2007 12:34:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 04:34:37 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [68.142.229.99] (HELO smtp106.sbc.mail.re2.yahoo.com) (68.142.229.99)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 22 Feb 2007 04:34:25 -0800
Received: (qmail 87339 invoked from network); 22 Feb 2007 12:34:03 -0000
Received: from unknown (HELO ?10.1.1.2?) (mdc102254@sbcglobal.net@75.45.168.61 with plain)
  by smtp106.sbc.mail.re2.yahoo.com with SMTP; 22 Feb 2007 12:34:03 -0000
X-YMail-OSG: KUzOC40VM1keEWGLq5y7LfjbKJP3PjU3Qj8JhzFpqu7bbPmDvrNepz9uRuHdC0YKzC80xAy4ldb9mikRCw2AE3PvggfwDbruPvbrLg.H1vfBG2hnOaOEjOL95sh38bNwAmuKOeFAExOCKA--
Message-ID: <45DD8DBC.7080301@curtin.com>
Date: Thu, 22 Feb 2007 07:34:04 -0500
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene 1.4.3 : IndexWriter.addDocument(doc) fails when run on
 OS  requiring permissions
References: <42E5A736D78.00000994wanster@inbox.com>
In-Reply-To: <42E5A736D78.00000994wanster@inbox.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Is your disk almost full?  Under Linux, when you reach about 90% used on 
a file system, only the superuser can allocate more space (e.g. create 
files, add data to files, etc.).

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 12:55:02 2007
Return-Path: <java-user-return-26315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80088 invoked from network); 22 Feb 2007 12:55:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 12:55:02 -0000
Received: (qmail 75669 invoked by uid 500); 22 Feb 2007 12:54:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75628 invoked by uid 500); 22 Feb 2007 12:54:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75617 invoked by uid 99); 22 Feb 2007 12:54:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 04:54:59 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 04:54:48 -0800
Received: by ug-out-1314.google.com with SMTP id k40so98798ugc
        for <java-user@lucene.apache.org>; Thu, 22 Feb 2007 04:54:26 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GKjGhtW1rSkum2tIKTHYIoCh6eAnip37jujdG6kfg590zgyzxpguFdS89iiOs9q/MhN4niyNnqY4GMh2yep07R6+rlOVaLkcpGs9Kv9xtQ4SYcf3K2s2doHf2Bm1u3qLxzEpMzNwNUgsqWmHpxIwFhkmZTfFcoJUQ3zG3aGDYxo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DuQTexaXgffxd/r4V5CJYZrnUK06xMnucqbtfqTqhQyHowKpRgZr4J5I/DKdtnBqQwHE0JEjINPmF6My9Wr+hCPqwN5TON+PH0CIVtE536QpUzMv98UMS4q0j3tPi4jkmu168TdJvDI8AwAxAoGZzX/kWMnz/X+JOJ50/mq4YHM=
Received: by 10.114.153.18 with SMTP id a18mr240590wae.1172148865601;
        Thu, 22 Feb 2007 04:54:25 -0800 (PST)
Received: by 10.114.58.3 with HTTP; Thu, 22 Feb 2007 04:54:25 -0800 (PST)
Message-ID: <359a92830702220454o31cf4958xc2a14ab39da8dd0a@mail.gmail.com>
Date: Thu, 22 Feb 2007 07:54:25 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: a question about indexing database tables
In-Reply-To: <34b8543c0702220017h52810c3fi92d9d76a33f5e52f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_29959_2291648.1172148865547"
References: <34b8543c0702220017h52810c3fi92d9d76a33f5e52f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_29959_2291648.1172148865547
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

don't do either one <G>.... Search this mail archive for discussions of
databases, there are several long threads discussing this along with various
options on how to make this work. See particularly a mail entitled
*Oracle/Lucene
integration -status- *and any discussions participated in by Marcelo Ochoa.

But, in general, Lucene is a text search engine, NOT a RDBMS. When you start
saying "keep all relation in order to get right result", it sounds like
you're trying to use Lucene as a RDBMS. It doesn't do this very well, that's
not what it was built for. There are several options...
> get clever with your index such that you don't do anything like join
tables. This implies that you re-design your data layout, probably
de-normalizing lots of data, etc.
> Use a hybrid solution. That is, use Lucene to search text and then do
whatever further relational processing you need in the database. You need to
store enough information in the Lucene documents to be able to query the
database.
> stick with a database if it works for you already.

In general, it's a mis-use of lucene to try to get RDBMS behavior out of it.
When you find yourself trying to do this, take a few minutes and ask
yourself if this design is appropriate, and continue only if you can answer
in the affirmative...

Best
Erick

On 2/22/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
>
> Hello
> In our application we have to index the database tables, there is two way
> to
> make this
>
> 1- index each table in a separate directory and then keep all relation in
> order to get right result. in this method, we should use filters to
> overcome
> the problem of searching on another search result.
> 2. joining two or more tables and index the result of join query.
>
> which approach is better, reliable, has acceptable performance.
>
> thanks
> --
> Regards,
> Mohammad
>

------=_Part_29959_2291648.1172148865547--

From java-user-return-26316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 13:00:08 2007
Return-Path: <java-user-return-26316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80841 invoked from network); 22 Feb 2007 13:00:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 13:00:07 -0000
Received: (qmail 84011 invoked by uid 500); 22 Feb 2007 13:00:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83979 invoked by uid 500); 22 Feb 2007 13:00:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83968 invoked by uid 99); 22 Feb 2007 13:00:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 05:00:07 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.132.247 as permitted sender)
Received: from [209.85.132.247] (HELO an-out-0708.google.com) (209.85.132.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 04:59:56 -0800
Received: by an-out-0708.google.com with SMTP id c3so100143ana
        for <java-user@lucene.apache.org>; Thu, 22 Feb 2007 04:59:35 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZCGIs9rNK4TAxW0nMK4Cd6q+P050GpU2YVYQc/4Wjo/oLy4g9EOT3lspxM+lVYISlV0VO6kX1iLkwVxXVQPpfoYd4j44w6U4zEwmgieiihaIbE6yqYPF0lc873eWUHuYMxV1egfhpYYE37ZZdtBdXxEroqPViPQSM0fiBQq4Cjk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=lrPoVl+7dNyR+J+uIL6kOFI2BUXJuRnJmMmpwEh6fJYoET3zwtJGOWiHERF/CeedY9IfbA7RQdVZTzmqN1CWS1a6Uumrzk05kWWpKMOHbzEwgUqx9c1ojui71aXbhxavM0KQzfmsFXcS/wowICguBTiD+CxFoZnNm19pCsMCfUI=
Received: by 10.114.183.1 with SMTP id g1mr231536waf.1172149175192;
        Thu, 22 Feb 2007 04:59:35 -0800 (PST)
Received: by 10.114.58.3 with HTTP; Thu, 22 Feb 2007 04:59:35 -0800 (PST)
Message-ID: <359a92830702220459u54bc1bb5o13f9b4ea27c83125@mail.gmail.com>
Date: Thu, 22 Feb 2007 07:59:35 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Returning only a small set of results
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705E9451D@SGBLOW2101.wsatkins.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30099_6454107.1172149175158"
References: <BC1CFC544422CB4A934908E126A4742705E93E5A@SGBLOW2101.wsatkins.com>
	 <Pine.LNX.4.58.0702211442030.26342@hal.rescomp.berkeley.edu>
	 <BC1CFC544422CB4A934908E126A4742705E9451D@SGBLOW2101.wsatkins.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_30099_6454107.1172149175158
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See TopDocs, HitCollector, etc. You'll have to dig through the documentation
and try a few experiments to make sense of it all, one sentence explanations
aren't much help.

But think of Hits as a convenience class for getting the best-scoring 100
documents and use the other classes if you want to get *all* the documents.
Don't go to the other classes unless you start getting performance problems
with Hits. The main take-away from Hits is that it'll re-execute the query
every 100 documents you read from it or so, so the only time you care is
when you find yourself assembling large numbers of documents...

Erick

On 2/22/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
>
> What can you use in place of Hits and how do they differ?
>
> -----Original Message-----
> From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
> Sent: 21 February 2007 22:43
> To: java-user@lucene.apache.org
> Subject: Re: Returning only a small set of results
>
> : A question about efficiency and the internal workings of the Hits
> class.
> : When we make a call to IndexSearcher's search method thus:
> :
> : Hits hits = searcher.Search(query);
> :
> : Do we actually, physically get back all the results of the query even
> if
> : there are 20 million results or for efficiency do we physically get
> back
>
> the Hits class fetches back the first N result documents (where N is 100
> i
> think) and then it fetches more and more as needed if you ask for more.
> generally speaking Hits works fine for simple pagination applications,
> but if you are intented on walking deep down the list of ordred results,
> i would avoid it.
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> This message has been scanned for viruses by MailControl - (see
> http://bluepages.wsatkins.co.uk/?6875772)
>
>
> This email and any attached files are confidential and copyright
> protected. If you are not the addressee, any dissemination of this
> communication is strictly prohibited. Unless otherwise expressly agreed in
> writing, nothing stated in this communication shall be legally binding.
>
> The ultimate parent company of the Atkins Group is WS Atkins
> plc.  Registered in England No. 1885586.  Registered Office Woodcote Grove,
> Ashley Road, Epsom, Surrey KT18 5BW.
>
> Consider the environment. Please don't print this e-mail unless you really
> need to.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_30099_6454107.1172149175158--

From java-user-return-26317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 13:05:23 2007
Return-Path: <java-user-return-26317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82560 invoked from network); 22 Feb 2007 13:05:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 13:05:22 -0000
Received: (qmail 89119 invoked by uid 500); 22 Feb 2007 13:05:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89089 invoked by uid 500); 22 Feb 2007 13:05:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89071 invoked by uid 99); 22 Feb 2007 13:05:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 05:05:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [62.213.161.130] (HELO redhat.sirma.bg) (62.213.161.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 05:05:00 -0800
Received: from [192.168.128.140] ([192.168.128.140])
	(authenticated bits=0)
	by redhat.sirma.bg (8.12.7/8.12.7/Sirma Linux 0.6) with ESMTP id l1MD4Hct029003
	for <java-user@lucene.apache.org>; Thu, 22 Feb 2007 15:04:22 +0200
Message-ID: <45DD94D0.8010901@sirma.bg>
Date: Thu, 22 Feb 2007 15:04:16 +0200
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To: LUCENE MAIL LIST <java-user@lucene.apache.org>
Subject: Multy Language documents indexing
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Scanned: by Sirma Antivirus System             
X-Virus-Checked: Checked by ClamAV on apache.org

Hi All,

Our application that uses Lucene for indexing will be used to index 
documents that each of which contains parts written in different 
languages. For example some document could contain English, Chinese and 
Brazilian text. So how to index such document? Is there some best 
practice to do this?

What comes in my mind is to index 3 different Lucene Documents for the 
real document and keep in a database the meta info that these 3 
Documents are related to our real doc. For example for the myDoc.doc we 
will have in the index myDocEn.doc, myDocCn.doc and myDocBr.doc and when 
making search when the searched word is found in myDocCn.doc we will 
visualize to user myDoc.doc. Disadvantage here is that in this case the 
occurrences of the searched item will have to be recalculated. It is 
important for queries like Red NEAR/10 fox. So if someone knows better 
practice than this, please let me help.

Tanks in advance,
Ivan


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 13:06:59 2007
Return-Path: <java-user-return-26318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83419 invoked from network); 22 Feb 2007 13:06:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 13:06:56 -0000
Received: (qmail 94572 invoked by uid 500); 22 Feb 2007 13:06:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94522 invoked by uid 500); 22 Feb 2007 13:06:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94460 invoked by uid 99); 22 Feb 2007 13:06:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 05:06:50 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.132.242 as permitted sender)
Received: from [209.85.132.242] (HELO an-out-0708.google.com) (209.85.132.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 05:06:39 -0800
Received: by an-out-0708.google.com with SMTP id c3so101458ana
        for <java-user@lucene.apache.org>; Thu, 22 Feb 2007 05:06:18 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jwF9wc+txd4Ec8KzjL9DqFyPKt+J0MhLn50V16L5WcGaJi+vaOanvOSXEYCSDuS1vWdAEyD+rEBARD+6qO3VJTKUQdw6f6Dl6fMMO9/scies4nXj0+OIsAvDoHZ4ctobeW32ko++Stq8cnXAH+CRD+QpJ1Tpk2jtVmV8vm7z6tM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kZqd4hwaN5K+tQ2qm0OBdwNyZ9EYi9hoRpwZ7DE9EZuUfjqZwYA8GeNFLFMTYrWYlYjSAjYfGpy9/AFrsuHrXR3VK6K9XEkvNtQQ6URJCs9nFVwuy4tDDeGKyEtWHYN+e8Wt0/Vf8Lm3x7tq7i+t+PG/wI+ItM8Bk+WVNxK1s/s=
Received: by 10.115.17.1 with SMTP id u1mr240435wai.1172149577679;
        Thu, 22 Feb 2007 05:06:17 -0800 (PST)
Received: by 10.114.58.3 with HTTP; Thu, 22 Feb 2007 05:06:17 -0800 (PST)
Message-ID: <359a92830702220506u7d5f0b49l9bdc85d6bd415f67@mail.gmail.com>
Date: Thu, 22 Feb 2007 08:06:17 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Open & Close Reader
In-Reply-To: <EBC8F228BDB35A4394D0BE53DA25248808A9A429@SPMWB02L.luinternal.fortis.bank>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30187_13998902.1172149577563"
References: <1172144850.16556.1175940193@webmail.messagingengine.com>
	 <EBC8F228BDB35A4394D0BE53DA25248808A9A429@SPMWB02L.luinternal.fortis.bank>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_30187_13998902.1172149577563
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, it's your logic that takes the request from the user and executes the
search. So it's your logic that has to take care of any coordination between
threads that use the same reader. This is a standard multi-threading
resource-sharing issue.

If your application is not multi-threaded, I don't see how you can "close
the reader while the user is executing a query"...

Erick

On 2/22/07, DECAFFMEYER MATHIEU <MATHIEU.DECAFFMAYER@fortis.lu> wrote:
>
> My question is what happen when a re-opening of the reader occurs and in
> the same time a user does a query on the index ? And are there solutions
> for this.
>
> __________________________________
>    Matt
>
>
>
> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: Thursday, February 22, 2007 12:48 PM
> To: java-user@lucene.apache.org
> Subject: Re: Open & Close Reader
>
> *****  This message comes from the Internet Network *****
>
>
> <MATHIEU.DECAFFMAYER@fortis.lu> wrote:
>
> > I need to merge indexes,
> > if I want the user to see the changes (the merged indexes), I heard I
> > need to close the index reader and re-open it again.
>
> Yes.  More generally, whenever there have been changes to an index
> that you want your readers/searchers to see, you need to re-open the
> reader/searcher.  A reader keeps a "point in time" view of the index
> as of when it was open, and will not show any changes until it is
> re-opened.
>
> > But I will need to do this avery x minutes for some reasons,
> > So I wondered what could happen if user does a query just when a
> re-open
> > of the reader has been done.
>
> I don't really understand this question -- could you provide more
> detail here?
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ============================================
> Internet communications are not secure and therefore Fortis Banque
> Luxembourg S.A. does not accept legal responsibility for the contents of
> this message. The information contained in this e-mail is confidential and
> may be legally privileged. It is intended solely for the addressee. If you
> are not the intended recipient, any disclosure, copying, distribution or any
> action taken or omitted to be taken in reliance on it, is prohibited and may
> be unlawful. Nothing in the message is capable or intended to create any
> legally binding obligations on either party and it is not intended to
> provide legal advice.
> ============================================
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_30187_13998902.1172149577563--

From java-user-return-26319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 13:12:00 2007
Return-Path: <java-user-return-26319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85409 invoked from network); 22 Feb 2007 13:12:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 13:12:00 -0000
Received: (qmail 7240 invoked by uid 500); 22 Feb 2007 13:12:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7002 invoked by uid 500); 22 Feb 2007 13:12:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6985 invoked by uid 99); 22 Feb 2007 13:12:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 05:12:00 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.132.251 as permitted sender)
Received: from [209.85.132.251] (HELO an-out-0708.google.com) (209.85.132.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 05:11:49 -0800
Received: by an-out-0708.google.com with SMTP id c3so102476ana
        for <java-user@lucene.apache.org>; Thu, 22 Feb 2007 05:11:28 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=OL1kt7Nak0NwTBPyrJXi43tYI30LzukIhmrwbY4tK8k01oDYeP82bFj3GaSgdo4vnVLycll9h0EruDq3PVqgEHxzALVu84xPKoRBEsfpugCVQ48UIVSOrErKkekCBMAZ0C627dc7MmjeimiBt6LEneC3oyL6tC69iFVU07RIW58=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ay0Q/LDrWGPnKT28zdgFTxCM9ZrtdVjQSYa5yq8OSCteiLajx3Zss+2o7WwFWmJG+kdyvQmvBMzqF8MVlZBF426Z6yv4YAfdUgKvyJnq7Z+9WioHZqqtnfr6yCqLKoYLYWengGPUwJDlC14czKgQRCcMuBqmPji/U8JFMhv9iRE=
Received: by 10.114.127.1 with SMTP id z1mr228236wac.1172149888172;
        Thu, 22 Feb 2007 05:11:28 -0800 (PST)
Received: by 10.114.58.3 with HTTP; Thu, 22 Feb 2007 05:11:28 -0800 (PST)
Message-ID: <359a92830702220511h2562eeees83324bddf08c9818@mail.gmail.com>
Date: Thu, 22 Feb 2007 08:11:28 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multy Language documents indexing
In-Reply-To: <45DD94D0.8010901@sirma.bg>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30299_22828800.1172149888062"
References: <45DD94D0.8010901@sirma.bg>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_30299_22828800.1172149888062
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I know this has been discussed several times, but sure don't remember the
answers. Search the mail archive for "multiple languages" and you'll find
some good suggestions. But as I remember, it's not a trivial issue.

But I don't see why the "three different documents" approach wouldn't work.
You could also index the same text in three different fields in a single
document, using different language analyzers for each (See
PerFieldAnalyzerWrapper).....

Erick

On 2/22/07, Ivan Vasilev <ivasilev@sirma.bg> wrote:
>
> Hi All,
>
> Our application that uses Lucene for indexing will be used to index
> documents that each of which contains parts written in different
> languages. For example some document could contain English, Chinese and
> Brazilian text. So how to index such document? Is there some best
> practice to do this?
>
> What comes in my mind is to index 3 different Lucene Documents for the
> real document and keep in a database the meta info that these 3
> Documents are related to our real doc. For example for the myDoc.doc we
> will have in the index myDocEn.doc, myDocCn.doc and myDocBr.doc and when
> making search when the searched word is found in myDocCn.doc we will
> visualize to user myDoc.doc. Disadvantage here is that in this case the
> occurrences of the searched item will have to be recalculated. It is
> important for queries like "Red NEAR/10 fox". So if someone knows better
> practice than this, please let me help.
>
> Tanks in advance,
> Ivan
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_30299_22828800.1172149888062--

From java-user-return-26320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 13:18:00 2007
Return-Path: <java-user-return-26320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87471 invoked from network); 22 Feb 2007 13:17:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 13:17:59 -0000
Received: (qmail 17548 invoked by uid 500); 22 Feb 2007 13:17:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17513 invoked by uid 500); 22 Feb 2007 13:17:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17502 invoked by uid 99); 22 Feb 2007 13:17:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 05:17:59 -0800
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 05:17:48 -0800
Received: by ug-out-1314.google.com with SMTP id k40so104068ugc
        for <java-user@lucene.apache.org>; Thu, 22 Feb 2007 05:17:27 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=uFtJIcK8VtLcq0XHgNClFIEJyBsDy9DKiJMbnVUoKukMOyceSp6W155O92SHWuoZju9tFa661skM8pssaX0Gt/zyU+wQbXll69pCTgsOhf1uiP3vOaeWihNW1McfA/rymG3DT0eCQuMTcviVWmzlB2m+aFLfqER9xwZhi9FnqiE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=LQfr+kWXH6ClbvBcf5Yndc1O4hmip4ZzIjCuh0+GN3qPUxuUsE5N4KuwLBYGXgIvjz621O4ZLiP7cKRwSTKqHSK/ssvvTxM5mnhJDXt4mDRZ5L1/hgO+UekOYs7PizzHh5G0ES9I2MQNRdAMuzgN2YO78uPZ0qt8HJvVygTr6Og=
Received: by 10.82.154.2 with SMTP id b2mr111966bue.1172150247063;
        Thu, 22 Feb 2007 05:17:27 -0800 (PST)
Received: by 10.82.163.2 with HTTP; Thu, 22 Feb 2007 05:17:26 -0800 (PST)
Message-ID: <34b8543c0702220517v265e8b4fy846910c13313bb60@mail.gmail.com>
Date: Thu, 22 Feb 2007 16:47:26 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: a question about indexing database tables
In-Reply-To: <359a92830702220454o31cf4958xc2a14ab39da8dd0a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_23266_17345831.1172150246936"
References: <34b8543c0702220017h52810c3fi92d9d76a33f5e52f@mail.gmail.com>
	 <359a92830702220454o31cf4958xc2a14ab39da8dd0a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_23266_17345831.1172150246936
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks Erick
but we have to because we need to execute very big queries that create
traffik network and are very very slow. but with lucene we do it in some
milliseconds. and now we indexed our needed information by joining tables.
it works fine, besides, it returns the exact result as we can get from
database. we indexed about one million records.
but let me say, we are not using it instead of database, we use it to
generate some dynamic reports that if we did it by sql queries, it would
take about 15 minutes.

On 2/22/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> don't do either one <G>.... Search this mail archive for discussions of
> databases, there are several long threads discussing this along with
> various
> options on how to make this work. See particularly a mail entitled
> *Oracle/Lucene
> integration -status- *and any discussions participated in by Marcelo
> Ochoa.
>
> But, in general, Lucene is a text search engine, NOT a RDBMS. When you
> start
> saying "keep all relation in order to get right result", it sounds like
> you're trying to use Lucene as a RDBMS. It doesn't do this very well,
> that's
> not what it was built for. There are several options...
> > get clever with your index such that you don't do anything like join
> tables. This implies that you re-design your data layout, probably
> de-normalizing lots of data, etc.
> > Use a hybrid solution. That is, use Lucene to search text and then do
> whatever further relational processing you need in the database. You need
> to
> store enough information in the Lucene documents to be able to query the
> database.
> > stick with a database if it works for you already.
>
> In general, it's a mis-use of lucene to try to get RDBMS behavior out of
> it.
> When you find yourself trying to do this, take a few minutes and ask
> yourself if this design is appropriate, and continue only if you can
> answer
> in the affirmative...
>
> Best
> Erick
>
> On 2/22/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
> >
> > Hello
> > In our application we have to index the database tables, there is two
> way
> > to
> > make this
> >
> > 1- index each table in a separate directory and then keep all relation
> in
> > order to get right result. in this method, we should use filters to
> > overcome
> > the problem of searching on another search result.
> > 2. joining two or more tables and index the result of join query.
> >
> > which approach is better, reliable, has acceptable performance.
> >
> > thanks
> > --
> > Regards,
> > Mohammad
> >
>



-- 
Regards,
Mohammad

------=_Part_23266_17345831.1172150246936--

From java-user-return-26321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 13:23:17 2007
Return-Path: <java-user-return-26321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90360 invoked from network); 22 Feb 2007 13:23:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 13:23:16 -0000
Received: (qmail 30241 invoked by uid 500); 22 Feb 2007 13:23:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30206 invoked by uid 500); 22 Feb 2007 13:23:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30194 invoked by uid 99); 22 Feb 2007 13:23:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 05:23:16 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 217.79.216.190 as permitted sender)
Received: from [217.79.216.190] (HELO cluster-e.mailcontrol.com) (217.79.216.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 05:23:01 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly15e.srv.mailcontrol.com (MailControl) with SMTP id l1MDIEOH008735
	for <java-user@lucene.apache.org>; Thu, 22 Feb 2007 13:18:31 GMT
Received: From SGBD012104.wsatkins.com ([10.202.26.18]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 1172150273962; Thu, 22 Feb 2007 13:17:53 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012104.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 22 Feb 2007 13:17:53 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Returning only a small set of results
Date: Thu, 22 Feb 2007 13:17:52 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705ECF8B0@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Returning only a small set of results
Thread-Index: AcdWgWg8lNpN+tHsSGS3mJOPNlTKUAAAmMvQ
References: <BC1CFC544422CB4A934908E126A4742705E93E5A@SGBLOW2101.wsatkins.com> <Pine.LNX.4.58.0702211442030.26342@hal.rescomp.berkeley.edu> <BC1CFC544422CB4A934908E126A4742705E9451D@SGBLOW2101.wsatkins.com> <359a92830702220459u54bc1bb5o13f9b4ea27c83125@mail.gmail.com>
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 22 Feb 2007 13:17:53.0885 (UTC) FILETIME=[DC3A20D0:01C75683]
X-Scanned-By: MailControl A-07-06-90 (www.mailcontrol.com) on 10.69.0.125
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Erick you've helped a lot and so has everyone else.=20

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: 22 February 2007 13:00
To: java-user@lucene.apache.org
Subject: Re: Returning only a small set of results

See TopDocs, HitCollector, etc. You'll have to dig through the
documentation and try a few experiments to make sense of it all, one
sentence explanations aren't much help.

But think of Hits as a convenience class for getting the best-scoring
100 documents and use the other classes if you want to get *all* the
documents.
Don't go to the other classes unless you start getting performance
problems with Hits. The main take-away from Hits is that it'll
re-execute the query every 100 documents you read from it or so, so the
only time you care is when you find yourself assembling large numbers of
documents...

Erick

On 2/22/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
>
> What can you use in place of Hits and how do they differ?
>
> -----Original Message-----
> From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
> Sent: 21 February 2007 22:43
> To: java-user@lucene.apache.org
> Subject: Re: Returning only a small set of results
>
> : A question about efficiency and the internal workings of the Hits=20
> class.
> : When we make a call to IndexSearcher's search method thus:
> :
> : Hits hits =3D searcher.Search(query);
> :
> : Do we actually, physically get back all the results of the query=20
> even if
> : there are 20 million results or for efficiency do we physically get=20
> back
>
> the Hits class fetches back the first N result documents (where N is=20
> 100 i
> think) and then it fetches more and more as needed if you ask for
more.
> generally speaking Hits works fine for simple pagination applications,

> but if you are intented on walking deep down the list of ordred=20
> results, i would avoid it.
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> This message has been scanned for viruses by MailControl - (see
> http://bluepages.wsatkins.co.uk/?6875772)
>
>
> This email and any attached files are confidential and copyright=20
> protected. If you are not the addressee, any dissemination of this=20
> communication is strictly prohibited. Unless otherwise expressly=20
> agreed in writing, nothing stated in this communication shall be
legally binding.
>
> The ultimate parent company of the Atkins Group is WS Atkins plc. =20
> Registered in England No. 1885586.  Registered Office Woodcote Grove,=20
> Ashley Road, Epsom, Surrey KT18 5BW.
>
> Consider the environment. Please don't print this e-mail unless you=20
> really need to.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 13:26:12 2007
Return-Path: <java-user-return-26322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92164 invoked from network); 22 Feb 2007 13:26:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 13:26:11 -0000
Received: (qmail 39199 invoked by uid 500); 22 Feb 2007 13:26:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39151 invoked by uid 500); 22 Feb 2007 13:26:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39128 invoked by uid 99); 22 Feb 2007 13:26:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 05:26:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.154.194.71] (HELO srs2na11.bgl.lu) (194.154.194.71)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 22 Feb 2007 05:25:57 -0800
Received: from spmwf02l.luinternal.fortis.bank (unverified) by srs2na12.domain
 (Content Technologies SMTPRS 4.2.10) with ESMTP id <T7df6419c860aaf150a137@srs2na12.domain> for <java-user@lucene.apache.org>;
 Thu, 22 Feb 2007 14:26:47 +0100
Received: from SPMWB02L.luinternal.fortis.bank ([10.172.252.140]) by spmwf02l.luinternal.fortis.bank with Microsoft SMTPSVC(6.0.3790.0);
	 Thu, 22 Feb 2007 14:25:21 +0100
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: Open & Close Reader
Date: Thu, 22 Feb 2007 14:25:21 +0100
Message-ID: <EBC8F228BDB35A4394D0BE53DA25248808A9A42B@SPMWB02L.luinternal.fortis.bank>
In-Reply-To: <359a92830702220506u7d5f0b49l9bdc85d6bd415f67@mail.gmail.com>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: Open & Close Reader
Thread-Index: AcdWgk+83Lb4PATWSq23oQHQMOjYvwAAjIHg
From: "DECAFFMEYER MATHIEU" <MATHIEU.DECAFFMAYER@fortis.lu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 22 Feb 2007 13:25:21.0782 (UTC) FILETIME=[E731C960:01C75684]
X-Virus-Checked: Checked by ClamAV on apache.org

Actually I don't see how it could not be multi-threaded,
since it seems normal to me that I run it in a web application which is
multi-threaded for each user request ?

Erick, could u please explain to me your comment ?

Thank u.

__________________________________
   Matt

   =20

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Thursday, February 22, 2007 2:06 PM
To: java-user@lucene.apache.org
Subject: Re: Open & Close Reader

*****  This message comes from the Internet Network *****

Well, it's your logic that takes the request from the user and executes
the
search. So it's your logic that has to take care of any coordination
between
threads that use the same reader. This is a standard multi-threading
resource-sharing issue.

If your application is not multi-threaded, I don't see how you can
"close
the reader while the user is executing a query"...

Erick

On 2/22/07, DECAFFMEYER MATHIEU <MATHIEU.DECAFFMAYER@fortis.lu> wrote:
>
> My question is what happen when a re-opening of the reader occurs and
in
> the same time a user does a query on the index ? And are there
solutions
> for this.
>
> __________________________________
>    Matt
>
>
>
> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: Thursday, February 22, 2007 12:48 PM
> To: java-user@lucene.apache.org
> Subject: Re: Open & Close Reader
>
> *****  This message comes from the Internet Network *****
>
>
> <MATHIEU.DECAFFMAYER@fortis.lu> wrote:
>
> > I need to merge indexes,
> > if I want the user to see the changes (the merged indexes), I heard
I
> > need to close the index reader and re-open it again.
>
> Yes.  More generally, whenever there have been changes to an index
> that you want your readers/searchers to see, you need to re-open the
> reader/searcher.  A reader keeps a "point in time" view of the index
> as of when it was open, and will not show any changes until it is
> re-opened.
>
> > But I will need to do this avery x minutes for some reasons,
> > So I wondered what could happen if user does a query just when a
> re-open
> > of the reader has been done.
>
> I don't really understand this question -- could you provide more
> detail here?
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> Internet communications are not secure and therefore Fortis Banque
> Luxembourg S.A. does not accept legal responsibility for the contents
of
> this message. The information contained in this e-mail is confidential
and
> may be legally privileged. It is intended solely for the addressee. If
you
> are not the intended recipient, any disclosure, copying, distribution
or any
> action taken or omitted to be taken in reliance on it, is prohibited
and may
> be unlawful. Nothing in the message is capable or intended to create
any
> legally binding obligations on either party and it is not intended to
> provide legal advice.
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
Internet communications are not secure and therefore Fortis Banque Luxembou=
rg S.A. does not accept legal responsibility for the contents of this messa=
ge. The information contained in this e-mail is confidential and may be leg=
ally privileged. It is intended solely for the addressee. If you are not th=
e intended recipient, any disclosure, copying, distribution or any action t=
aken or omitted to be taken in reliance on it, is prohibited and may be unl=
awful. Nothing in the message is capable or intended to create any legally =
binding obligations on either party and it is not intended to provide legal=
 advice.
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 13:34:15 2007
Return-Path: <java-user-return-26323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94832 invoked from network); 22 Feb 2007 13:34:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 13:34:14 -0000
Received: (qmail 53132 invoked by uid 500); 22 Feb 2007 13:34:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53098 invoked by uid 500); 22 Feb 2007 13:34:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53087 invoked by uid 99); 22 Feb 2007 13:34:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 05:34:14 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.162.228 as permitted sender)
Received: from [64.233.162.228] (HELO nz-out-0506.google.com) (64.233.162.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 05:34:03 -0800
Received: by nz-out-0506.google.com with SMTP id i1so155190nzh
        for <java-user@lucene.apache.org>; Thu, 22 Feb 2007 05:33:42 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ES/AYvEca8SDPeP4wlR4L2+lOOrrf86HSlgXRsQknF/1AYRU5GFZ/C84kbByiUoIjXhK3XlUDHWdqbI8DFt7luEtxHwJk1M12Hn0cioA3npi5a5bXnkBIZK/Fubhu5f08iXXZ02sF4QeC+Dx660zJ6cFnn/mjs3cSRvinXa/jpM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=WaqiJsfEGrTaF0sh9lT6r0k4ywXMNVQn6CwZN07f7Yg/IQ/95aVrdT9L9C6pWViQaMH/nnKb72yChxljxLWyAIIXzojpHijnlcJIpXUrJMy2gkePXZQJ7kF6iNeRW0jvYDc05SG185y3XxRLpyE6o0cej82IfwFhoj/5ikD3pxQ=
Received: by 10.114.133.1 with SMTP id g1mr258806wad.1172151221620;
        Thu, 22 Feb 2007 05:33:41 -0800 (PST)
Received: by 10.114.58.3 with HTTP; Thu, 22 Feb 2007 05:33:41 -0800 (PST)
Message-ID: <359a92830702220533n40a4c115kd8971519e1e3266b@mail.gmail.com>
Date: Thu, 22 Feb 2007 08:33:41 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: a question about indexing database tables
In-Reply-To: <34b8543c0702220517v265e8b4fy846910c13313bb60@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_31066_27864134.1172151221583"
References: <34b8543c0702220017h52810c3fi92d9d76a33f5e52f@mail.gmail.com>
	 <359a92830702220454o31cf4958xc2a14ab39da8dd0a@mail.gmail.com>
	 <34b8543c0702220517v265e8b4fy846910c13313bb60@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_31066_27864134.1172151221583
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

OK, I was off on a tangent. We've had several discussions where people were
effectively trying to replace a RDBMS with Lucene and finding out it that
RDBMSs are very good at what they do <G>...

But in general, I'd probably approach it by doing the RDBMS work first and
indexing the result. I think this is your option (2). Yes, this will
de-normalize a bunch of your data and you'll chew up some space, but disk
space is cheap. Very cheap <G>.

One thing to remember, though, that took me a while to get used to,
especially when I had my database hat on. There's no requirement that every
document in a Lucene index have the same fields. Conceptually, you can store
*all* your tables in the same index. So a document for table one has fields
table_1_field1 table_1_field2 table_1_field3. "documents" for table two have
fields table_2_field1 table_2_field2 etc.....

These documents will never interfere with each other during searches because
they share no fields (and each query goes against a particular field).

I mention this because your maintenance will be much easier if you only have
one index <G>....

Best
Erick

On 2/22/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
>
> Thanks Erick
> but we have to because we need to execute very big queries that create
> traffik network and are very very slow. but with lucene we do it in some
> milliseconds. and now we indexed our needed information by joining tables.
> it works fine, besides, it returns the exact result as we can get from
> database. we indexed about one million records.
> but let me say, we are not using it instead of database, we use it to
> generate some dynamic reports that if we did it by sql queries, it would
> take about 15 minutes.
>
> On 2/22/07, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > don't do either one <G>.... Search this mail archive for discussions of
> > databases, there are several long threads discussing this along with
> > various
> > options on how to make this work. See particularly a mail entitled
> > *Oracle/Lucene
> > integration -status- *and any discussions participated in by Marcelo
> > Ochoa.
> >
> > But, in general, Lucene is a text search engine, NOT a RDBMS. When you
> > start
> > saying "keep all relation in order to get right result", it sounds like
> > you're trying to use Lucene as a RDBMS. It doesn't do this very well,
> > that's
> > not what it was built for. There are several options...
> > > get clever with your index such that you don't do anything like join
> > tables. This implies that you re-design your data layout, probably
> > de-normalizing lots of data, etc.
> > > Use a hybrid solution. That is, use Lucene to search text and then do
> > whatever further relational processing you need in the database. You
> need
> > to
> > store enough information in the Lucene documents to be able to query the
> > database.
> > > stick with a database if it works for you already.
> >
> > In general, it's a mis-use of lucene to try to get RDBMS behavior out of
> > it.
> > When you find yourself trying to do this, take a few minutes and ask
> > yourself if this design is appropriate, and continue only if you can
> > answer
> > in the affirmative...
> >
> > Best
> > Erick
> >
> > On 2/22/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
> > >
> > > Hello
> > > In our application we have to index the database tables, there is two
> > way
> > > to
> > > make this
> > >
> > > 1- index each table in a separate directory and then keep all relation
> > in
> > > order to get right result. in this method, we should use filters to
> > > overcome
> > > the problem of searching on another search result.
> > > 2. joining two or more tables and index the result of join query.
> > >
> > > which approach is better, reliable, has acceptable performance.
> > >
> > > thanks
> > > --
> > > Regards,
> > > Mohammad
> > >
> >
>
>
>
> --
> Regards,
> Mohammad
>

------=_Part_31066_27864134.1172151221583--

From java-user-return-26324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 14:55:44 2007
Return-Path: <java-user-return-26324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30058 invoked from network); 22 Feb 2007 14:55:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 14:55:43 -0000
Received: (qmail 21457 invoked by uid 500); 22 Feb 2007 14:55:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21423 invoked by uid 500); 22 Feb 2007 14:55:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21412 invoked by uid 99); 22 Feb 2007 14:55:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 06:55:42 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.60] (HELO web50306.mail.yahoo.com) (206.190.38.60)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 22 Feb 2007 06:55:30 -0800
Received: (qmail 56687 invoked by uid 60001); 22 Feb 2007 14:55:05 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=e/cTKN9qfxj4PS4TcpWINmO7OiC+LrpLz72DKJC755LYFPlCxRV5eX03qqTrhbOsw+Kpu38tYXEjokOdCFW+i10ud6RJ9VTHk1Z+y1S37CBR5E0snikqYwMifNRU47GaGPaHcZAaaR3PyXEO4KmvGRfOTB+ijQ3NrM6xTaOaN1A=;
X-YMail-OSG: 7ICBVz8VM1kjD1XYH5iXondjaWVq7PwMGOxPlOFvVJWoJsIGlGQ_JJ787vNX7BlgMA--
Received: from [58.63.153.142] by web50306.mail.yahoo.com via HTTP; Thu, 22 Feb 2007 06:55:05 PST
X-Mailer: YahooMailRC/368.8 YahooMailWebService/0.6.132.8
Date: Thu, 22 Feb 2007 06:55:05 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Scoring while sorting
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <371200.46431.qm@web50306.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

 ----- Original Message ---From: dmitri <evysq@mail.ru>=0A=0A> What is the =
point to calculate score if the result set is going to be sorted=0A> by som=
e field?=0A=0ANo point, I believe, unless your sort includes relevance scor=
e.  I believe there is a Lucene patch that involves a Matcher (a new concep=
t for Lucene) which does only matching without scoring.  If you try that pa=
tch, please let us know how it works.=0A=0AOtis=0A. . . . . . . . . . . . .=
 . . . . . . . . . . . . . . . . .=0ASimpy -- http://www.simpy.com/  -  Tag=
  -  Search  -  Share=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 17:38:40 2007
Return-Path: <java-user-return-26325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89271 invoked from network); 22 Feb 2007 17:38:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 17:38:39 -0000
Received: (qmail 54743 invoked by uid 500); 22 Feb 2007 17:38:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54709 invoked by uid 500); 22 Feb 2007 17:38:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54686 invoked by uid 99); 22 Feb 2007 17:38:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 09:38:39 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 09:38:25 -0800
Received: from [128.230.84.100] (ist-h335-d03.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.15F76612@mailer.syr.edu>; Thu, 22 Feb 2007 12:38:04 -0500
Message-ID: <45DDD4FB.5010906@syr.edu>
Date: Thu, 22 Feb 2007 12:38:03 -0500
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Registering a local dtd file for use with Digester
References: <015701c75663$2f9a7070$0302a8c0@xpsoleary>
In-Reply-To: <015701c75663$2f9a7070$0302a8c0@xpsoleary>
X-Enigmail-Version: 0.94.2.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Mike,

> I have a collection of XML files that I would like to parse using Digester
> in order to index them for Lucene. A DTD file has been supplied for the XML
> files, but none of those files has a <!DOCTYPE ...> line associating them
> with the DTD file. Can the Digester's register function be used to tell it
> to use that DTD file for such things as entity resolution? If so, how do I
> do it? I don't understand how to specify a pathname for a local file in
> terms of a publicId and an entityURL. If register can't be used for this
> purpose, is there another way to do it? Thanks.

Your issue will almost certainly be better addressed in a Digester forum
- your problem has nothing to do with Lucene.

A hint: it looks like you can create a Digester instance with an
externally created SAX parser[1], on which you can set the entity
resolver to an extended DefaultHandler2[2] (Java 1.5) which overrides
the getExternalSubset() method (specified by the EntityResolver2
interface[3]) to return an InputSource containing your desired DTD.

Something like (warning - untested; stolen in part from the Digester
FAQ[1]):

  SAXParser parser = SAXParserFactory.newInstance().newSAXParser();
  parser.getXMLReader().setEntityResolver(new DefaultHandler2() {
    getExternalSubset(String name, String baseURI) {
      return new InputSource(/* put your DTD here */);
    }
  });
  Digester digester = new Digester(parser);
  // add digester rules here
  parser.setContentHandler(digester);
  parser.parse(/* put your input document here */);

Hope it helps,
Steve

[1] Digester FAQ (instantiating Digester with an external SAX parser):
<http://wiki.apache.org/jakarta-commons/Digester/FAQ#head-8ac8fa70e2db185845fadec56785cd53eab8d3f9>

[2] DefaultHandler2 (enables external DTD resolution with no DOCTYPE in
the XML document):
<http://java.sun.com/j2se/1.5.0/docs/api/org/xml/sax/ext/DefaultHandler2.html>

[3] EntityResolver2 (implemented by DefaultHandler2):
<http://java.sun.com/j2se/1.5.0/docs/api/org/xml/sax/ext/EntityResolver2.html>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 18:13:27 2007
Return-Path: <java-user-return-26326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3052 invoked from network); 22 Feb 2007 18:13:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 18:13:26 -0000
Received: (qmail 44067 invoked by uid 500); 22 Feb 2007 18:13:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44037 invoked by uid 500); 22 Feb 2007 18:13:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44026 invoked by uid 99); 22 Feb 2007 18:13:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 10:13:27 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [216.252.120.163] (HELO web83507.mail.sp1.yahoo.com) (216.252.120.163)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 22 Feb 2007 10:13:14 -0800
Received: (qmail 92316 invoked by uid 60001); 22 Feb 2007 18:12:53 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=pacbell.net;
  h=Message-ID:X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=xMy8h0htV0AsnDBqx2W/YfAxTGWnq4fpbs4E6DgfopbBvgNBLm4DHxhiKtle4CXMCzezXD/7iC3L3cGx2qoOKrVJLrBsXCKvVfQ2+b6ONN1aYW/xtZFX7GASC4Qf31+O96Drk2+aCUlXYHOih0NDE4mUM8QkYaNUpqP/auxUyB0=  ;
Message-ID: <20070222181253.92314.qmail@web83507.mail.sp1.yahoo.com>
X-YMail-OSG: ly8ZxS0VM1lZI6Tvht835_u1OqWeVnZZP1RCwP714y9Pigbizpal8h8ueKtmFiK4lxxl.qlclz2MkMsJB4GHjEhMiwFctpT3sSS9hkX2mQqd8HUxHuXj5RwSDyhQoSalsulGBLZDThBV4A--
Received: from [71.146.21.222] by web83507.mail.sp1.yahoo.com via HTTP; Thu, 22 Feb 2007 10:12:53 PST
Date: Thu, 22 Feb 2007 10:12:53 -0800 (PST)
From: Felix Litman <f_litman@pacbell.net>
Subject: Re: search on colon ":" ending words
To: java-user@lucene.apache.org
In-Reply-To: <45D0DB48.1010701@teamware.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-36981913-1172167973=:92311"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

--0-36981913-1172167973=:92311
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Yes. thank you.  How did you make that modification not to treat ":" as a field-name terminator?

Is it using this  Or some other way?

String newquery = query.replace(query, ":", " ");
Thank you,
Felix
Antony Bowesman <adb@teamware.com> wrote: Not sure if you're still after a solution, but I had a similar issue and I 
modified QueryParser.jj to not treat : as a field name terminator, so work: 
would then just be given as work: to the analyzer and treated as a search term.

Antony


Felix Litman wrote:
> We want to be able to return a result regardless if users use a colon or not in the query.  So 'work:' and 'work' query should still return same result.
> 
> With the current parser if a user enters 'work:'  with a ":" , Lucene does not return anything :-(.   It seems to me the Lucene parser issue.... we are wondering if there is any simple way to make the Lucene parser ignore the ":" in the query?
> 
> any thoughts?
> 
> Erick Erickson  wrote: I've got to ask why you'd want to search on colons. Why not just index the
> words without colons and search without them too? Let's say you index the
> word "work:" Do you really want to have a search on "work" fail?
> 
> By and large, you're better off indexing and searching without
> punctuation....
> 
> Best
> Erick
> 
> On 1/28/07, Felix Litman  wrote:
>> Is there a simple way to turn off field-search syntax in the Lucene
>> parser, and have Lucene recognize words ending in a colon ":" as search
>> terms instead?
>>
>> Such words are very common occurrences for our documents (or any plain
>> text), but Lucene does not seem to find them. :-(
>>
>> Thank you,
>> Felix
>>
>>
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



--0-36981913-1172167973=:92311--

From java-user-return-26327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 18:20:09 2007
Return-Path: <java-user-return-26327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5135 invoked from network); 22 Feb 2007 18:20:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 18:20:08 -0000
Received: (qmail 62936 invoked by uid 500); 22 Feb 2007 18:20:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62892 invoked by uid 500); 22 Feb 2007 18:20:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62810 invoked by uid 99); 22 Feb 2007 18:20:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 10:20:00 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [216.252.120.157] (HELO web83501.mail.sp1.yahoo.com) (216.252.120.157)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 22 Feb 2007 10:19:47 -0800
Received: (qmail 23979 invoked by uid 60001); 22 Feb 2007 18:19:26 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=pacbell.net;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=6X2y61T1TzVvsAZzarmYMnuT+S8XtuYRD90Y9evDhpwktDAHZsU2VBYvAUEP+QHvD2BCd5SxKs5dienI8hyw0+rf/5j1PF+7ou0PLI57x74Uml9qN9acFhsX7IsF1nAv/Vwa5jukm7x2VpMlUnBFJBKq7hll+fgrwx1SX6tLaO4=;
X-YMail-OSG: SZOUkq8VM1l3ib_PFFBlOgKPtNL8Rw.tVumdIX6QCAKuGYGx3YLZW0OfhzKwe31SHQ--
Received: from [71.146.21.222] by web83501.mail.sp1.yahoo.com via HTTP; Thu, 22 Feb 2007 10:19:26 PST
Date: Thu, 22 Feb 2007 10:19:26 -0800 (PST)
From: Felix Litman <f_litman@pacbell.net>
Subject: "did you mean" for multi-word queries implementation
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1240554786-1172168366=:23934"
Content-Transfer-Encoding: 8bit
Message-ID: <955769.23934.qm@web83501.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1240554786-1172168366=:23934
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Did any one have success implementing "did you mean" feature for multi-word queries as described in Tom White's excellent "Did you Mean Lucene?" article?

 http://today.java.net/pub/a/today/2005/08/09/didyoumean.html

...and more specifically, using the CompositeDidYouMeanParser implementation as described in "Supporting Composite Queries" section of the article?

We are not able so far to get good "suggestions" to multi-word queries using this approach, so we are trying to determine if it is a Lucene issue, or our implementation...

Thank you,
Felix

--0-1240554786-1172168366=:23934--

From java-user-return-26328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 18:23:06 2007
Return-Path: <java-user-return-26328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5979 invoked from network); 22 Feb 2007 18:23:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 18:23:05 -0000
Received: (qmail 74788 invoked by uid 500); 22 Feb 2007 18:23:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74754 invoked by uid 500); 22 Feb 2007 18:23:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74727 invoked by uid 99); 22 Feb 2007 18:23:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 10:23:05 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.59] (HELO web50305.mail.yahoo.com) (206.190.38.59)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 22 Feb 2007 10:22:53 -0800
Received: (qmail 59001 invoked by uid 60001); 22 Feb 2007 18:22:31 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=CiDJIZ7N9j6jCeRTKcDnMfSyEW5qLhybVZvTY4DA8F/muBN9Wr29sQaW5w5krHwpsj8YbDCb0MfmxeIpXHEbHWWLNNpR5D61Ueuy5JD58MkoYPA08eiRPtKdNpLGgZ3nYeLJuYADgNB8HaKDwY51v/yGAC6WijGhlsZzSyaDx7Q=;
X-YMail-OSG: UFn.OS4VM1lATay0muUxsHkikE.7IEUV3fzJkVu96Nu8EarWzdUY9KQhDnQkNvuQ38vXeGwC4eYBp0zlDE1BRtwHTpxvd7xmyLZP_1TlqqQoZd7Uy34J54zUbPapM5Wfw_j18fJhq3mS3mw-
Received: from [58.63.153.142] by web50305.mail.yahoo.com via HTTP; Thu, 22 Feb 2007 10:22:31 PST
X-Mailer: YahooMailRC/368.8 YahooMailWebService/0.6.132.8
Date: Thu, 22 Feb 2007 10:22:31 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: "did you mean" for multi-word queries implementation
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <699555.58508.qm@web50305.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I believe it's a SpellChecker implementation deficiency, and Karl will prob=
ably suggest looking at LUCENE-626 as an alternative.  And I'll ask you to =
please report back how much better than the contrib SpellChecker Karl's sol=
ution is.=0A=0AOtis=0A . . . . . . . . . . . . . . . . . . . . . . . . . . =
. . . .=0ASimpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share=0A=0A=
----- Original Message ----=0AFrom: Felix Litman <f_litman@pacbell.net>=0AT=
o: java-user@lucene.apache.org=0ASent: Thursday, February 22, 2007 1:19:26 =
PM=0ASubject: "did you mean" for multi-word queries implementation=0A=0ADid=
 any one have success implementing "did you mean" feature for multi-word qu=
eries as described in Tom White's excellent "Did you Mean Lucene?" article?=
=0A=0A http://today.java.net/pub/a/today/2005/08/09/didyoumean.html=0A=0A..=
.and more specifically, using the CompositeDidYouMeanParser implementation =
as described in "Supporting Composite Queries" section of the article?=0A=
=0AWe are not able so far to get good "suggestions" to multi-word queries u=
sing this approach, so we are trying to determine if it is a Lucene issue, =
or our implementation...=0A=0AThank you,=0AFelix=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 18:46:41 2007
Return-Path: <java-user-return-26329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13674 invoked from network); 22 Feb 2007 18:46:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 18:46:40 -0000
Received: (qmail 16291 invoked by uid 500); 22 Feb 2007 18:46:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16256 invoked by uid 500); 22 Feb 2007 18:46:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16245 invoked by uid 99); 22 Feb 2007 18:46:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 10:46:41 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 10:46:29 -0800
Received: by nf-out-0910.google.com with SMTP id i2so588317nfe
        for <java-user@lucene.apache.org>; Thu, 22 Feb 2007 10:46:08 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=n5LryLJCV8d7SVna6QG7NUBfxt5fXGHo2KypHKd5x/vw0O/RjZyT7PJ734u2qD1cKgERSaCUF+IyywbfqHiC7a//d124Z1hFo+vRUDAEGkJxl0z2X/Fsjda7CBerjdjVwM5sa2Sjcgvuj3xjX52H5Z0MHbb6KLnGwdDLy/qPP3o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=iIuQdfGkg3436/FVHuabxnoQCy1W65pxA8/X0wOuPhft2sZOnTgwjZSx5Bbhgq9JFEWwhztR9ZFOevT4BoIIV8mblIksGG2MTrk5ConFR3y3JRKEI9nSD3fbUXx0t2+5JgXij+zJ92KeldL+c7fosvkV9EUiTYGiYZOiXk9GZhA=
Received: by 10.48.204.5 with SMTP id b5mr4180763nfg.1172169966935;
        Thu, 22 Feb 2007 10:46:06 -0800 (PST)
Received: from ?192.168.1.3? ( [83.249.110.75])
        by mx.google.com with ESMTP id z73sm6676643nfb.2007.02.22.10.46.05;
        Thu, 22 Feb 2007 10:46:05 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <699555.58508.qm@web50305.mail.yahoo.com>
References: <699555.58508.qm@web50305.mail.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <F28C80B8-2D45-4187-944B-1BBBBEF5FF88@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: "did you mean" for multi-word queries implementation
Date: Thu, 22 Feb 2007 19:44:20 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

22 feb 2007 kl. 19.22 skrev Otis Gospodnetic:

> I believe it's a SpellChecker implementation deficiency, and Karl  
> will probably suggest looking at LUCENE-626 as an alternative.  And  
> I'll ask you to please report back how much better than the contrib  
> SpellChecker Karl's solution is.

:)

The package level documentation for the refactor of LUCENE-626  
available in (and dependent to) LUCENE-550 might be helpful even  
though the API looks a bit diffrent. At least it describes a bit more  
how it works.

It is available as HTML at this location:

http://ginandtonique.org/~kalle/javadocs/didyoumean/org/apache/lucene/ 
search/didyoumean/package-summary.html

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 18:50:52 2007
Return-Path: <java-user-return-26330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14609 invoked from network); 22 Feb 2007 18:50:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 18:50:51 -0000
Received: (qmail 20604 invoked by uid 500); 22 Feb 2007 18:50:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20562 invoked by uid 500); 22 Feb 2007 18:50:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20551 invoked by uid 99); 22 Feb 2007 18:50:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 10:50:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 209.85.132.244 as permitted sender)
Received: from [209.85.132.244] (HELO an-out-0708.google.com) (209.85.132.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 10:50:40 -0800
Received: by an-out-0708.google.com with SMTP id c3so188244ana
        for <java-user@lucene.apache.org>; Thu, 22 Feb 2007 10:50:18 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=IshNZTOpA/WRc9rZovMDLcy4cLcdlzUNZxDqWDNiZUGI2R6OMHjaXNlvQV6iLstlsrEvDDX5xIsLBtyQKgjvPqFu5PXCuPquIUUHdHhSDnynQvzeHz2j6rquhJFGIUqNA4x32aFx0Z1f54Urweb5KKu2bENbQ1guKYru+3sTSWc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=kQEjUIz3eNlxwq736Y8JUBT2cMqe9djxLPR6/XWMlk/V25PXYdoq8gST7Db/TwAE51l6UBnSGZIhttFuGKtXp7ckMWGYqOKJdIhosrt1FJTK09XjC5575safeeNHMk4NW++jQx3VHcq5QnHvoIpj6YcLQpAzSPiHOIk4Hr8CvvI=
Received: by 10.100.107.2 with SMTP id f2mr776177anc.1172170218371;
        Thu, 22 Feb 2007 10:50:18 -0800 (PST)
Received: from ?192.168.1.105? ( [216.66.114.42])
        by mx.google.com with ESMTP id 8sm1373856wra.2007.02.22.10.50.17;
        Thu, 22 Feb 2007 10:50:17 -0800 (PST)
Message-ID: <45DDE5DA.80202@gmail.com>
Date: Thu, 22 Feb 2007 13:50:02 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: how to define a pool for Searcher?
References: <34b8543c0702220009m72f9e9c7pf8f9764953be6a48@mail.gmail.com>
In-Reply-To: <34b8543c0702220009m72f9e9c7pf8f9764953be6a48@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I would not do this from scratch...if you are interested in Solr go that 
route else I would build off http://issues.apache.org/jira/browse/LUCENE-390

- Mark

Mohammad Norouzi wrote:
> Hi all,
> I am going to build a Searcher pooling. if any one has experience on 
> this, I
> would be glad to hear his/her recommendation and suggestion. I want to 
> know
> what issues I should be apply. considering I am going to use this on a 
> web
> application with many user sessions.
>
> thank you very much in advance.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 19:18:19 2007
Return-Path: <java-user-return-26331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24246 invoked from network); 22 Feb 2007 19:18:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 19:18:18 -0000
Received: (qmail 75263 invoked by uid 500); 22 Feb 2007 19:18:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75230 invoked by uid 500); 22 Feb 2007 19:18:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75183 invoked by uid 99); 22 Feb 2007 19:18:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 11:18:16 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 11:18:05 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 25A7F5B76C; Thu, 22 Feb 2007 11:17:45 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 1FA407F403
	for <java-user@lucene.apache.org>; Thu, 22 Feb 2007 11:17:45 -0800 (PST)
Date: Thu, 22 Feb 2007 11:17:45 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Scoring while sorting
In-Reply-To: <371200.46431.qm@web50306.mail.yahoo.com>
Message-ID: <Pine.LNX.4.58.0702221113150.8755@hal.rescomp.berkeley.edu>
References: <371200.46431.qm@web50306.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: > What is the point to calculate score if the result set is going to be sorted
: > by some field?

: No point, I believe, unless your sort includes relevance score.  I

...which is non trivial information to deduce, since a SortField can
contain a SortComparatorSource which uses a ScoreDocComparator which can
do anything it wants with the ScoreDoc.

If you know that you really don't care about score, you can use Filters
instead of Queries and then sort the docs represented by bits() yourself
... this is an approachSolr takes if a DocSet (Solr concept roughly equal
to a BitSet of documents) is already in the cache and you want the first N
sorted by a field.

(the heart of the jira issue Otis refered to is unifying the concepts of a
Query Scorer and a Filter into a common base class: Matcher)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 19:40:00 2007
Return-Path: <java-user-return-26332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30847 invoked from network); 22 Feb 2007 19:39:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 19:39:59 -0000
Received: (qmail 16623 invoked by uid 500); 22 Feb 2007 19:39:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16589 invoked by uid 500); 22 Feb 2007 19:39:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16573 invoked by uid 99); 22 Feb 2007 19:39:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 11:39:59 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 11:39:48 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id B47675B766; Thu, 22 Feb 2007 11:39:27 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id B0DE17F403
	for <java-user@lucene.apache.org>; Thu, 22 Feb 2007 11:39:27 -0800 (PST)
Date: Thu, 22 Feb 2007 11:39:27 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: QueryParser bug?
In-Reply-To: <45DD1DDB.5070001@teamware.com>
Message-ID: <Pine.LNX.4.58.0702221138500.8755@hal.rescomp.berkeley.edu>
References: <45DD1DDB.5070001@teamware.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


i'm not very familiar with this issue, but are you using
setAllowLeadingWildcard(true) ? ... if not it definitely won't work.


: Date: Thu, 22 Feb 2007 15:36:43 +1100
: From: Antony Bowesman <adb@teamware.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: QueryParser bug?
:
: Using QueryParser to parse *tex* seems to create a PrefixQuery rather than
: WildcardQuery due to the trailing *, rather than Wildcard because of the other
: leading *.
:
: As a result, this does not match, for example "context".  I've swapped the order
: of WILDTERM and PREFIXTERM in queryparsr.jj but that just prevents PrefixQuery
: from ever being generated.
:
: Is this a known problem and is there any way around it?
: Antony
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 19:44:07 2007
Return-Path: <java-user-return-26333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32917 invoked from network); 22 Feb 2007 19:44:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 19:44:03 -0000
Received: (qmail 26116 invoked by uid 500); 22 Feb 2007 19:44:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26088 invoked by uid 500); 22 Feb 2007 19:44:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26074 invoked by uid 99); 22 Feb 2007 19:44:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 11:44:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 11:43:59 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id E104C5B766; Thu, 22 Feb 2007 11:43:38 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id D644A7F403
	for <java-user@lucene.apache.org>; Thu, 22 Feb 2007 11:43:38 -0800 (PST)
Date: Thu, 22 Feb 2007 11:43:38 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Lucene 1.4.3 : IndexWriter.addDocument(doc) fails when run on
 OS  requiring permissions
In-Reply-To: <42E5A736D78.00000994wanster@inbox.com>
Message-ID: <Pine.LNX.4.58.0702221141410.8755@hal.rescomp.berkeley.edu>
References: <42E5A736D78.00000994wanster@inbox.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


This sounds like it has absolutely nothing to do with Lucene, and
everything to do with good security permissions -- your Zope/python front
end is most likely running as a user thta does not have write permissions
to the directory where your index lives.  you'll need to remedy that.

you can write a simple java app that doens't use lucene at all -- just
creates a file and writes  "hellow world" to it -- and you will most
likely see this exact same behavior, dealing with teh file permissions is
totally out side the scope of Lucene.


: Date: Thu, 22 Feb 2007 00:20:12 -0800
: From: Ridzwan Aminuddin <wanster@inbox.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Lucene 1.4.3 : IndexWriter.addDocument(doc) fails when run on OS
:      requiring permissions
:
: Hi!
:
: I'm writing a java program that uses Lucene 1.4.3 to index and create a vector file of words found in Text Files. The purpose is for text mining.
:
: I created a Java .Jar file from my program and my python script calls the Java Jar executable. This is all triggered by my DTML code.
:
: I'm running on Linux and i have no problem executing the script when i execute via command line. But once i trigger the script via the web (using Zope/Plone external methods ) it doesn't work anymore. This is because of the strict permissions that LInux has over its files and folders.
:
: I've narrowed down the problem to the IndexWriter.addDocument(doc) method in Lucene 1.4.3 and as you can see below my code fails specifically when a new FieldsWriter object is being initialised.
:
: I strongly suspect that it fails at this point but have no idea how to overcome this problem. I know that it has to do with the permissions because th eprogram works like a miracle when it is called via command line by the super user (sudo).
:
: Could anyone give me any pointers or ideas of how i could overcome this.
:
: The final statement which is printed before the program hangs is:
: "Entering DocumentWriter.AddDocument.... (4)"
:
: Here is the portions of my relevant code :
:
:
:
: //-------------------------------------------------------------------------------------------
: //			Indexer.Java // This is my own method and class
: //-------------------------------------------------------------------------------------------
:         // continued from some other code......
:
: 	Document doc = new Document();
:
:         doc.add(Field.Text("articleTitle", articleTitle, true));
:         doc.add(Field.Text("articleURL", articleURL, true));
:         doc.add(Field.Text("articleSummary", articleSummary, true));
:         doc.add(Field.Text("articleDate", articleDate, true));
:         doc.add(Field.Text("articleSource", articleSource, true));
:         doc.add(Field.Text("articleBody", articleBody, true));
:         doc.add(Field.Keyword("filename", f.getCanonicalPath()));
:
: 	try
:                 {
:                     writer.addDocument(doc); // indexing fails because this statement cannot be executed
:
:                 }
:
:                 catch (Exception e)
:
:                 {
:                     System.err.println ("Cannot add doc exception thrown!");
:
:                 }
:
:
: //-------------------------------------------------------------------------------------------
: //			IndexWriter.Java // Lucene 1.4.3
: //-------------------------------------------------------------------------------------------
:
:
: public void addDocument(Document doc) throws IOException {
:
:       addDocument(doc, analyzer);
:   }
:
:
: public void addDocument(Document doc, Analyzer analyzer) throws IOException {
:
:     DocumentWriter dw;
:
:     dw = new DocumentWriter(ramDirectory, analyzer, similarity, maxFieldLength);
:
:     String segmentName = newSegmentName();
:     dw.addDocument(segmentName, doc);      		// The program fails to execute this line onwards!
:
:     synchronized (this) {
:
:       segmentInfos.addElement(new SegmentInfo(segmentName, 1, ramDirectory));
:       maybeMergeSegments();
:     }
:
:   }
:
:
: //-------------------------------------------------------------------------------------------
: //			DocumentWriter.Java // Lucene 1.4.3
: //-------------------------------------------------------------------------------------------
:
:
:
: final void addDocument(String segment, Document doc)
:             throws IOException {
:
:       System.out.println("Entering DocumentWriter.AddDocument.... (1)");
:
:     // write field names
:     fieldInfos = new FieldInfos();
:       System.out.println("Entering DocumentWriter.AddDocument.... (2)");
:
:     fieldInfos.add(doc);
:           System.out.println("Entering DocumentWriter.AddDocument.... (3)");
:
:     fieldInfos.write(directory, segment + ".fnm");
:
:           System.out.println("Entering DocumentWriter.AddDocument.... (4)");  // The program fails after this
:
:     // write field values
:     FieldsWriter fieldsWriter =
:             new FieldsWriter(directory, segment, fieldInfos);			// Program fails to execute this statement
:
:           System.out.println("Entering DocumentWriter.AddDocument.... (5)");
:
:     try {
:       fieldsWriter.addDocument(doc);
:
:       System.out.println("Entering DocumentWriter.AddDocument.... (6)");
:
:     } finally {
:       fieldsWriter.close();
:             System.out.println("Entering DocumentWriter.AddDocument.... (7)");
:
:     }
:
:           System.out.println("Entering DocumentWriter.AddDocument.... (8)");
:
:     // invert doc into postingTable
:     postingTable.clear();			  // clear postingTable
:     fieldLengths = new int[fieldInfos.size()];    // init fieldLengths
:     fieldPositions = new int[fieldInfos.size()];  // init fieldPositions
:
:           System.out.println("Entering DocumentWriter.AddDocument.... (9)");
:
:     fieldBoosts = new float[fieldInfos.size()];	  // init fieldBoosts
:     Arrays.fill(fieldBoosts, doc.getBoost());
:
:           System.out.println("Entering DocumentWriter.AddDocument.... (10)");
:
:     invertDocument(doc);
:
:           System.out.println("Entering DocumentWriter.AddDocument.... (11)");
:
:     // sort postingTable into an array
:     Posting[] postings = sortPostingTable();
:
:           System.out.println("Entering DocumentWriter.AddDocument.... (12)");
:
:     /*
:     for (int i = 0; i < postings.length; i++) {
:       Posting posting = postings[i];
:       System.out.print(posting.term);
:       System.out.print(" freq=" + posting.freq);
:       System.out.print(" pos=");
:       System.out.print(posting.positions[0]);
:       for (int j = 1; j < posting.freq; j++)
: 	System.out.print("," + posting.positions[j]);
:       System.out.println("");
:     }
:     */
:
:     // write postings
:     writePostings(postings, segment);
:
:           System.out.println("Entering DocumentWriter.AddDocument.... (13)");
:
:     // write norms of indexed fields
:     writeNorms(doc, segment);
:
:           System.out.println("Entering DocumentWriter.AddDocument.... (14)");
:
:   }
:
: //-------------------------------------------------------------------------------------------
: //			FieldsWriter.Java // Lucene 1.4.3
: //-------------------------------------------------------------------------------------------
:
:
:   FieldsWriter(Directory d, String segment, FieldInfos fn)
:        throws IOException {
:     fieldInfos = fn;
:     fieldsStream = d.createFile(segment + ".fdt");
:     indexStream = d.createFile(segment + ".fdx");
:   }
:
: //-------------------------------------------------------------------------------------------
: //			FSDirectory.Java // Lucene 1.4.3
: //-------------------------------------------------------------------------------------------
:
:
: public final OutputStream createFile(String name) throws IOException {
:
:       System.out.println("Entering FSDirectory.createFile.... returning an OutputStream");
:
:     return new FSOutputStream(new File(directory, name));
:   }
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 19:46:57 2007
Return-Path: <java-user-return-26334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34033 invoked from network); 22 Feb 2007 19:46:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 19:46:55 -0000
Received: (qmail 34357 invoked by uid 500); 22 Feb 2007 19:46:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34324 invoked by uid 500); 22 Feb 2007 19:46:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34313 invoked by uid 99); 22 Feb 2007 19:46:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 11:46:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 11:46:45 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 362335B766; Thu, 22 Feb 2007 11:46:25 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 2EB1A7F403
	for <java-user@lucene.apache.org>; Thu, 22 Feb 2007 11:46:25 -0800 (PST)
Date: Thu, 22 Feb 2007 11:46:25 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: Open & Close Reader
In-Reply-To: <EBC8F228BDB35A4394D0BE53DA25248808A9A42B@SPMWB02L.luinternal.fortis.bank>
Message-ID: <Pine.LNX.4.58.0702221144200.8755@hal.rescomp.berkeley.edu>
References: <EBC8F228BDB35A4394D0BE53DA25248808A9A42B@SPMWB02L.luinternal.fortis.bank>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: Actually I don't see how it could not be multi-threaded,
: since it seems normal to me that I run it in a web application which is
: multi-threaded for each user request ?

every application in the world is not a web application.

if you are dealing with multiple threads, you will need to o something to
ensure that threads don't try to use an IndexReader refrence while you are
in the middle of closing it and assigning a new IndexReader to it ... you
can do this with synchronization for example.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 20:07:17 2007
Return-Path: <java-user-return-26335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39908 invoked from network); 22 Feb 2007 20:07:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 20:07:16 -0000
Received: (qmail 73905 invoked by uid 500); 22 Feb 2007 20:07:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73784 invoked by uid 500); 22 Feb 2007 20:07:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73773 invoked by uid 99); 22 Feb 2007 20:07:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 12:07:18 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.170.99.248] (HELO mail.authsum.com) (216.170.99.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 12:07:03 -0800
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.authsum.com (Postfix) with ESMTP id C2E2178145
	for <java-user@lucene.apache.org>; Thu, 22 Feb 2007 15:06:42 -0500 (EST)
X-Virus-Scanned: amavisd-new at 
X-Spam-Score: -3.625
X-Spam-Level: 
Received: from mail.authsum.com ([127.0.0.1])
	by localhost (mail.authsum.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id d8etHh95ahzU for <java-user@lucene.apache.org>;
	Thu, 22 Feb 2007 15:06:39 -0500 (EST)
Received: from mail.authsum.com (unknown [216.170.99.248])
	by mail.authsum.com (Postfix) with ESMTP id CD4D078136
	for <java-user@lucene.apache.org>; Thu, 22 Feb 2007 15:06:38 -0500 (EST)
Message-ID: <24410133.811172174798416.JavaMail.root@localhost.localdomain>
Date: Thu, 22 Feb 2007 15:06:38 -0500 (EST)
From: Phillip Rhodes <spamsucks@rhoderunner.com>
To: java-user lucene <java-user@lucene.apache.org>
Subject: Efficient count of documents by type?
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Originating-IP: [209.166.180.139]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.625 tagged_above=-10 required=6.6
	tests=[ALL_TRUSTED=-1.8, AWL=0.774, BAYES_00=-2.599]

I have a query that can return documents that represent different types of things (e.g. books, movies, coupons, etc)

There is a  "object_type" keyword on each document, so I can tell that a document is a coupon or a book etc...

The problem is that I need to display a count of each item type that was found.  
For example,  your searched returned: 67 coupons, 54 movies, 28 books...

While I can loop through each document and increment some sort of counter by document type, sometimes I have over a 2000 documents, and this would mean that the query would be executed internally by lucene 20 times (for every 100 records).

I am looking at the HitCollector, but since I would need to still get each and every document (to figure out if it's a coupon vs. a book), I am not sure if there would be any benefits.  Would using a HitCollector cause the query to be run only 1x vs. 20 for 2000 documents?  Would that be the only benefit?

I would be interested in hearing what others think about this problem and how to best implement this functionality with lucene.

Thank you.
Phillip









---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 20:29:42 2007
Return-Path: <java-user-return-26336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51774 invoked from network); 22 Feb 2007 20:29:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 20:29:40 -0000
Received: (qmail 14377 invoked by uid 500); 22 Feb 2007 20:29:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14341 invoked by uid 500); 22 Feb 2007 20:29:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14330 invoked by uid 99); 22 Feb 2007 20:29:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 12:29:40 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.184.232 as permitted sender)
Received: from [64.233.184.232] (HELO wr-out-0506.google.com) (64.233.184.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 12:29:30 -0800
Received: by wr-out-0506.google.com with SMTP id 55so459608wri
        for <java-user@lucene.apache.org>; Thu, 22 Feb 2007 12:29:10 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=PocesWxMyrgYT8dSnpkxG9Y2D02jxQx6piIyzsrjPQV0MLoXQZ8GLWYEY+uKUrL/SFeeeHyhb5lQ9hadVB1mLFO1LnnyPA2OhCUyjrzQjb+e5o4PCcWiTb3NbEh5xu455bhS7Iq3DPlx5ba+kgmPiTMac68K5FK3Prm99+A1++U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=b+lIWDdQgEnEg/Lup1xhkv7Jfh2jSGBXPAI022CbIKZyPf5tTv+Zy5FDP5nuzCZzs1oITaxRED36VsVKU1FarHxzt0M+RvydTNJfOsKg3DWqwmnnG6hak4qClqRTOB0G3k7GcVcFiOxos+TC6L2GcALcjPz/cJ6RVi+7DCDHAbM=
Received: by 10.114.208.8 with SMTP id f8mr474185wag.1172176146172;
        Thu, 22 Feb 2007 12:29:06 -0800 (PST)
Received: by 10.114.58.3 with HTTP; Thu, 22 Feb 2007 12:29:06 -0800 (PST)
Message-ID: <359a92830702221229m58e29a81pe0fbb65e87673601@mail.gmail.com>
Date: Thu, 22 Feb 2007 15:29:06 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Efficient count of documents by type?
In-Reply-To: <24410133.811172174798416.JavaMail.root@localhost.localdomain>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_40554_7605249.1172176146097"
References: <24410133.811172174798416.JavaMail.root@localhost.localdomain>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_40554_7605249.1172176146097
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You might have some luck searching the mailing list for "faceted search", as
I remember there's been quite a discussion on that topic and I *think* it
applies...

Even if you use a HitCollector, you still have to categorize your document,
and all you have is the doc id to work with. But I think you'll be able to
combine a HitCollector with TermDocs and be pretty quick about getting your
results.

Something like this in your hitcollector....
TermDocs td = new TermDocs();
td.seek(new Term("objecttype", "coupons");
if (td.skipTo(docid) && td.doc == docId) {
   increment coupons counter
}

And repeat ad nauseum.

But what I'd really do is just collect an ordered list of all the doc IDs in
my hitcollector and *then* do something like...

TermDocs tdCoupons = new TermDocs();
TermDocs tdMovies = new TermDocs();

tdCoupons.seek(new Term("objecttype", "coupons");
tdMovies.seek(new Term("objecttype", "movies");

for (int docId : setOfAllDocIds) {
    if (tdCoupons.skipTo(docId) && tdCoupons.doc == docId) {
       increment coupon counter;
    }
    if (tdMovies.skipTo(docId) && tdMovies.doc == docId) {
      increment movie counter
   }
}

That way, you're progressing through all of the TermDocs in order and not
skipping around so much. I really have no clue how much more efficient this
would be......

Best
Erick

On 2/22/07, Phillip Rhodes <spamsucks@rhoderunner.com> wrote:
>
> I have a query that can return documents that represent different types of
> things (e.g. books, movies, coupons, etc)
>
> There is a  "object_type" keyword on each document, so I can tell that a
> document is a coupon or a book etc...
>
> The problem is that I need to display a count of each item type that was
> found.
> For example,  your searched returned: 67 coupons, 54 movies, 28 books...
>
> While I can loop through each document and increment some sort of counter
> by document type, sometimes I have over a 2000 documents, and this would
> mean that the query would be executed internally by lucene 20 times (for
> every 100 records).
>
> I am looking at the HitCollector, but since I would need to still get each
> and every document (to figure out if it's a coupon vs. a book), I am not
> sure if there would be any benefits.  Would using a HitCollector cause the
> query to be run only 1x vs. 20 for 2000 documents?  Would that be the only
> benefit?
>
> I would be interested in hearing what others think about this problem and
> how to best implement this functionality with lucene.
>
> Thank you.
> Phillip
>
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_40554_7605249.1172176146097--

From java-user-return-26337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 22:03:08 2007
Return-Path: <java-user-return-26337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82079 invoked from network); 22 Feb 2007 22:03:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 22:03:07 -0000
Received: (qmail 96753 invoked by uid 500); 22 Feb 2007 22:03:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96713 invoked by uid 500); 22 Feb 2007 22:03:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96688 invoked by uid 99); 22 Feb 2007 22:03:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 14:03:06 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.104.95.4] (HELO listing.marketingbrokers.com) (66.104.95.4)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 22 Feb 2007 14:02:53 -0800
Received: from ip66-104-95-21.z95-104-66.customer.algx.net ([66.104.95.21])
          by listing.marketingbrokers.com (JAMES SMTP Server 2.2.0) with SMTP ID 518
          for <java-user@lucene.apache.org>;
          Thu, 22 Feb 2007 14:01:54 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705E93AA7@SGBLOW2101.wsatkins.com>
References: <BC1CFC544422CB4A934908E126A4742705E429B4@SGBLOW2101.wsatkins.com> <359a92830702210507i3e91ffcfu9249bd9df74dc41f@mail.gmail.com> <BC1CFC544422CB4A934908E126A4742705E93AA7@SGBLOW2101.wsatkins.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-1-600986899
Message-Id: <E1DA463E-9B68-4EFB-BBB6-EF0717EFFD18@marketingbrokers.com>
From: "Peter W." <peter@marketingbrokers.com>
Subject: Re: pagination
Date: Thu, 22 Feb 2007 14:01:55 -0800
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-1-600986899
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed

Hello,

This snippet may help to understand TopDocs:

http://mail-archives.apache.org/mod_mbox/lucene-general/200508.mbox/% 
3C430CD197.6080609@apache.org%3E

Also, paging through Lucene results is 'do-it-yourself' exercise using
hits.length() until someone contributes a good implementation.

Oversimplifying, if you want 10 hits per page:

hitsperpage equals ten;

-if hits length is less than ten, you have one page
-else if hits length/hitsperpage modulos is 0, that's your pagecount
-else hits length/hitsperpage is your pagecount, modulos is for your  
last page

You will also need a variable to keep track of which page you are on  
and a static
method which returns min/max values to be included in your iteration  
loop.

You can also see my previous attempt at solving this:

http://www.gossamer-threads.com/lists/lucene/java-user/43595

Regards,

Peter W.

On Feb 21, 2007, at 6:32 AM, Kainth, Sachin wrote:

> I might be missing something because TopDocs seems to only be about
> finding the relevancy of documents and HitCollector doesn't seem to be
> relavent either.
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: 21 February 2007 13:08
> To: java-user@lucene.apache.org
> Subject: Re: pagination
>
> See TopDocs, HitCollector, etc. Don't iterate through a Hits  
> objects to
> get docs beyond, say, 100 since it's designed to efficiently return  
> the
> first 100 documents but re-executes the queries each 100 or so  
> times you
> advance to the next document.
>
> Erick
>
> On 2/21/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
>>
>> Hello,
>>
>> I was wondering if Lucene provides any mechanism which helps in
>> pagination.  In other words is there a way to return the first 10 of
>> 500 results and then the  next 10 and so on.


--Apple-Mail-1-600986899--

From java-user-return-26338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 22:38:06 2007
Return-Path: <java-user-return-26338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93869 invoked from network); 22 Feb 2007 22:38:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 22:38:05 -0000
Received: (qmail 72679 invoked by uid 500); 22 Feb 2007 22:38:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72642 invoked by uid 500); 22 Feb 2007 22:38:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72631 invoked by uid 99); 22 Feb 2007 22:38:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 14:38:07 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [192.31.106.7] (HELO mailgw1a.lmco.com) (192.31.106.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 14:37:54 -0800
Received: from emss02g01.ems.lmco.com (relay2.ems.lmco.com [166.29.2.54])by mailgw1a.lmco.com  (LM-6) with ESMTP id l1MMbVfU008206for <java-user@lucene.apache.org>; Thu, 22 Feb 2007 15:37:33 -0700 (MST)
Received: from CONVERSION-DAEMON.lmco.com by lmco.com (PMDF V6.3-x3 #31239)
 id <0JDV00G01YPQTL@lmco.com> for java-user@lucene.apache.org; Thu, 22 Feb 2007 15:37:27 -0700 (MST)
Received: from EMSS09I00.us.lmco.com ([158.183.26.31]) by lmco.com (PMDF V6.3-x3 #31239)
 with ESMTP id <0JDV00K0VYU34Q@lmco.com> for java-user@lucene.apache.org; Thu, 22 Feb 2007 15:37:15 -0700 (MST)
Received: from emss10m05.us.lmco.com ([158.187.0.248]) by EMSS09I00.us.lmco.com with Microsoft SMTPSVC(5.0.2195.6713); Thu,
 22 Feb 2007 17:37:14 -0500
Date: Thu, 22 Feb 2007 17:37:14 -0500
From: "Walker, Keith 1" <keith.1.walker@lmco.com>
Subject: RE: Running Lucene as a stateless session bean
In-reply-to: <OFB3A57BEE.4469CC4D-ON88257288.006D2662-88257288.00718D35@il.ibm.com>
To: java-user@lucene.apache.org
Message-id: <1AEC2AECA2A5B04BA1A56FADE29F0302024FCB33@emss10m05.us.lmco.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.5
Content-type: text/plain; charset=US-ASCII
Content-transfer-encoding: 7BIT
Thread-Topic: Running Lucene as a stateless session bean
Thread-Index: AcdVL9r4TEusyD3BSTyUjYsJKTRAcgBlOGcQ
Content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
References: <1AEC2AECA2A5B04BA1A56FADE29F0302024FCB15@emss10m05.us.lmco.com>
 <OFB3A57BEE.4469CC4D-ON88257288.006D2662-88257288.00718D35@il.ibm.com>
X-OriginalArrivalTime: 22 Feb 2007 22:37:15.0093 (UTC) FILETIME=[00441050:01C756D2]
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the suggestions. 

I'm using the Lucene packaged with Gate, which is lucene-1.3-final.jar
(ancient I suppose).

I am now seeing the threading problems with GATE, and although I was
hoping to stay with Gate in case we need some of it's capabilities,
although with the current design we could go with something like Lius.  

Regards,
Keith

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 22:40:33 2007
Return-Path: <java-user-return-26339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94399 invoked from network); 22 Feb 2007 22:40:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 22:40:31 -0000
Received: (qmail 76652 invoked by uid 500); 22 Feb 2007 22:40:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75874 invoked by uid 500); 22 Feb 2007 22:40:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75863 invoked by uid 99); 22 Feb 2007 22:40:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 14:40:32 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.104.95.4] (HELO listing.marketingbrokers.com) (66.104.95.4)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 22 Feb 2007 14:40:20 -0800
Received: from ip66-104-95-21.z95-104-66.customer.algx.net ([66.104.95.21])
          by listing.marketingbrokers.com (JAMES SMTP Server 2.2.0) with SMTP ID 142
          for <java-user@lucene.apache.org>;
          Thu, 22 Feb 2007 14:39:38 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <9073976.post@talk.nabble.com>
References: <17f11d00702200251u4838a842p5dd27c472dc96953@mail.gmail.com> <12149.61556.qm@web50314.mail.yahoo.com> <17f11d00702201709r3bd00dau835f457b6d76bedb@mail.gmail.com> <9073976.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A378136E-2D46-4A8E-AE29-8AA82934B46C@marketingbrokers.com>
Content-Transfer-Encoding: 7bit
From: "Peter W." <peter@marketingbrokers.com>
Subject: Re: Using Lucene - Design Question
Date: Thu, 22 Feb 2007 14:39:39 -0800
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

If you have experience using XML and doing web services requests
Solr is what you need. It's production quality code and evolving
quickly. It has a remarkable amount of extra functionality.

For CORBA type programmers, go with terracotta. It looks to go a
step further beyond sharing objects to sharing/clustering JVMs.

The RMI capabilities of RemoteSearchable within Lucene seem to
have been developed before Solr gained traction. I tried taking
some working RMI code and writing an inner class with Lucene but
it didn't feel robust.

Research on the mailing lists brings up older file copying
techniques based on synching the indexes with rsync. Probably
still in use, it looks to be an old-school solution better
addressed by Solr.

If you are mirroring your index in a database, there are some
combined Lucene/db update methods available:

1. mysql replication - data on the master is continuously
updated and replicates behind the scenes to remote slaves.
Lucene/db indexing code on each remote slave is a cron job.

2. Lucene indexing application on remote boxes makes network
call to central database, getting/indexing new data and reloading
it's own local ramdir.

For someone trying to get work done, use incremental updates to
one local index first. Then explore writing to multiple indexes and
reading them using MultiSearcher.

Afterward, use HTTP-based updates/requests with Solr to scale out.

Hope that helps.

Peter W.


On Feb 20, 2007, at 5:29 PM, orion wrote:

>
> If you'd like to try using Terracotta, we (Terracotta) would be  
> glad to help
> you out.  If you want more info, you can email me directly (orion at
> terracotta.org) or you can use our web forums (http:// 
> forums.terracotta.org)
> or our user mailing list (http://lists.terracotta.org/)
>
> Cheers,
> Orion
>
>
>
> shai deljo wrote:
>>
>> I considered getting  Lucene in action but figured I'll wait for the
>> DVD to come out ;).
>> Seriously though, they write about RemoteSearchable and use RMI, Is
>> this the recommended solution? does it scale well?
>> Thanks
>>
>> On 2/20/07, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>>> Well, there is also a Remote cousin there.  That will let you  
>>> distribute
>>> your indices over N severs (sounds like you'll need multiple).  You
>>> should really take a stroll through Lucene's javadoc, it's  
>>> incredibly
>>> nice now in winter time.  Or ... clears throat.... you could get  
>>> a book
>>> ;)
>>>
>>> Otis
>>>  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
>>> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
>>>
>>> ----- Original Message ----
>>> From: shai deljo <shai.deljo@gmail.com>
>>> To: java-user@lucene.apache.org
>>> Sent: Tuesday, February 20, 2007 2:05:25 PM
>>> Subject: Re: Using Lucene - Design Question
>>>
>>> Hi,
>>> Thanks for the reply.
>>> * Regarding hardware I'll use something similar to: Core 2 Duo -
>>> 2.66GHz, 2x300 GB disk drives, 4 GB RAM running on one of the Linux
>>> distributions.
>>> * Regarding response time I'm looking to be ~300 milliseconds for at
>>> least 80% of queries and ~500 milliseconds for 95% of queries.
>>> * Will MultiSearcher (and it's parallel cosine :) ) allow me to  
>>> search
>>> indices cross multiple servers or is the assumption is that all
>>> indices are on 1 server?
>>> Thanks
>>>
>>>
>>> On 2/20/07, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>>>> Hi Shi,
>>>>
>>>> Nobody will be able to give you the precise answer, obviously.  The
>>> best way is to try.
>>>> You didn't say what response time is desirable nor what kind of
>>> hardware you will be using.
>>>>
>>>> I wouldn't bother with the Berkeley DB-backed Lucene index for now,
>>> just use the regular one (maybe use non-compound format).
>>>> If you need to partition your index, MultiSearcher will help you  
>>>> search
>>> all your indices, and its Parallel cousin will let you  
>>> parallelize those
>>> searches.
>>>> It sounds like rsync will work, but you'll have to make sure  
>>>> that the
>>> segments file gets rsynced last.
>>>>
>>>> Otis
>>>>
>>>> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
>>>> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
>>>>
>>>> ----- Original Message ----
>>>> From: shai deljo <shai.deljo@gmail.com>
>>>> To: java-user@lucene.apache.org
>>>> Sent: Tuesday, February 20, 2007 5:51:13 AM
>>>> Subject: Using Lucene - Design Question
>>>>
>>>> Hi,
>>>> I have no experience with Lucene and I'm trying to collect some
>>>> information in order to determine what solution is best for me.
>>>> I need to index ~50M documents (starting with 10M), the size of  
>>>> each
>>>> document is ~2k-~5k and I'll index a couple of fields per  
>>>> document. I
>>>> expect ~20 queries per seconds and each query is ~4 terms.  
>>>> Update rate
>>>> - not sure what is best and/or possible strategy based on  
>>>> performance,
>>>> i.e. incremental indexing vs. pushing a full index but as far as  
>>>> the
>>>> product is concerned most data can be updated daily, the head  
>>>> (let's
>>>> say 20%) needs hourly (or at least on the order of hours) update.
>>>> I also need to be able to override the scoring/ranking and  
>>>> inject my
>>>> own logic and of course  my main concern is response time,  
>>>> especially
>>>> since i have additional computation on the hits before returning  
>>>> the
>>>> results.
>>>>
>>>> BTW, for the additional ranking/computation i will need to retrieve
>>>> values that are mapped by a term-field key, i.e. i can't know  
>>>> the key
>>>> until i have the result and the query in my hands. i figured i  
>>>> would
>>>> use Oracle Berkeley DB Java edition in order to keep the calls  
>>>> as much
>>>> as possible in the memory -> any advise on this as well ?
>>>>
>>>> For these requirements, do i need to worry about partitioning the
>>>> Index? If i do partition it, is there a solution to merge the  
>>>> results
>>>> back or do i need to do it on my own (does Solr do it for me and  
>>>> if it
>>>> does, can i override the scoring there)?
>>>> AS far as serving multiple users, will a simple rsync of the index
>>>> between multiple nodes running the same index (i am not that  
>>>> sensitive
>>>> to data integrity) work or do i need to look at something like
>>>> terracotta?
>>>>
>>>> In short, i am looking for the simplest solution.
>>>>
>>>> Thanks in advance.
>>>> Shi
>>>>
>>>> ------------------------------------------------------------------- 
>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> ------------------------------------------------------------------- 
>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/Using-Lucene--- 
> Design-Question-tf3259160.html#a9073976
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 22 23:21:28 2007
Return-Path: <java-user-return-26340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4067 invoked from network); 22 Feb 2007 23:21:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2007 23:21:27 -0000
Received: (qmail 30431 invoked by uid 500); 22 Feb 2007 23:21:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30399 invoked by uid 500); 22 Feb 2007 23:21:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30388 invoked by uid 99); 22 Feb 2007 23:21:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 15:21:28 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [24.201.245.36] (HELO relais.videotron.ca) (24.201.245.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 15:21:16 -0800
Received: from beetext06 ([70.81.32.231]) by VL-MH-MR002.ip.videotron.ca
 (Sun Java System Messaging Server 6.2-2.05 (built Apr 28 2005))
 with ESMTP id <0JDW004PJ0UTOKI0@VL-MH-MR002.ip.videotron.ca> for
 java-user@lucene.apache.org; Thu, 22 Feb 2007 18:20:54 -0500 (EST)
Date: Thu, 22 Feb 2007 18:20:50 -0500
From: Jean-Francois Beaulac <jean-francois.beaulac@beetext.com>
Subject: ConstantScoreQuery and MatchAllDocsQuery
To: java-user@lucene.apache.org
Message-id: <0JDW004PK0UTOKI0@VL-MH-MR002.ip.videotron.ca>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Content-type: multipart/alternative;
 boundary="Boundary_(ID_cKrWY53gFmhIyvmfJ9uX+Q)"
Thread-index: AcdW2BcYiUfhpKztSHuywt7IbWFE5A==
X-Virus-Checked: Checked by ClamAV on apache.org

--Boundary_(ID_cKrWY53gFmhIyvmfJ9uX+Q)
Content-type: text/plain; charset=us-ascii
Content-transfer-encoding: 7BIT

Hi,

 

What are those classes for?

 

I ask this because I need to return the frequency of the search terms with each of my results, I tried using the TermFreqVector
object but unfortunately it was not fast enough, so I decided to modifiy lucene to be able to return the frequency the same way the
score is returned by org.apache.lucene.search.Hits.

 

I started by adding public abstract int freq(); in package org.apache.lucene.search.Scorer abstract class, and then modified every
implementation of  Scorer to be able to get the frequency.

 

Then I added a new field in org.apache.lucene.search.HitDoc named freq, and changed the constructor so I give it the frequency when
it is created.

 

Finally I added a freq(int n) method to org.apache.lucene.search.Hits which acts exactly as score(int n) but returns the frequency
instead.

 

It works well and fast, the only problem I have is that I did not find a way to compute the frequency in both
ConstantScoreQuery.java and MatchAllDocsQuery.java internal scorers.

 

I just want to know if returning -1 or a java.lang.UnsupportedOperationException when the freq() method is called is a bad idea ;P

 

 

Thank you

 

--

Jean-Francois Beaulac


--Boundary_(ID_cKrWY53gFmhIyvmfJ9uX+Q)--

From java-user-return-26341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 23 01:16:36 2007
Return-Path: <java-user-return-26341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32985 invoked from network); 23 Feb 2007 01:16:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2007 01:16:35 -0000
Received: (qmail 61360 invoked by uid 500); 23 Feb 2007 01:16:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61331 invoked by uid 500); 23 Feb 2007 01:16:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61318 invoked by uid 99); 23 Feb 2007 01:16:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 17:16:36 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 17:16:26 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id l1N1FwIA013339
	for <java-user@lucene.apache.org>; Fri, 23 Feb 2007 03:15:59 +0200
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz with ESMTP
	 id m2n3f5em; 23 Feb 2007 03:15:00 +0200
Message-ID: <45DE4043.1090009@teamware.com>
Date: Fri, 23 Feb 2007 12:15:47 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: QueryParser bug?
References: <45DD1DDB.5070001@teamware.com> <Pine.LNX.4.58.0702221138500.8755@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0702221138500.8755@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Fri, 23 Feb 2007 03:15:59 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Chris Hostetter wrote:
> i'm not very familiar with this issue, but are you using
> setAllowLeadingWildcard(true) ? ... if not it definitely won't work.

That's not the issue.  (I've modified QP to allow "minWildcardPrefix" rather 
than just on/off), but the original QP shows the problem with 
setAllowLeadingWildcard(true).  The compiled JavaCC code will always create a 
PrefixQuery if the last character is *, regardless of any other wildcard 
characters before it.  Therefore the query is based on the Term:

Term(field, "*abc")

The decision is made in the JavaCC compiled code and I'm not familiar enough 
with JavaCC high level stuff to know how to make it choose based on an existing 
condition.

Regards
Antony

> : Date: Thu, 22 Feb 2007 15:36:43 +1100
> : From: Antony Bowesman <adb@teamware.com>
> : Reply-To: java-user@lucene.apache.org
> : To: java-user@lucene.apache.org
> : Subject: QueryParser bug?
> :
> : Using QueryParser to parse *tex* seems to create a PrefixQuery rather than
> : WildcardQuery due to the trailing *, rather than Wildcard because of the other
> : leading *.
> :
> : As a result, this does not match, for example "context".  I've swapped the order
> : of WILDTERM and PREFIXTERM in queryparsr.jj but that just prevents PrefixQuery
> : from ever being generated.
> :
> : Is this a known problem and is there any way around it?
> : Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 23 01:26:23 2007
Return-Path: <java-user-return-26342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34454 invoked from network); 23 Feb 2007 01:26:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2007 01:26:22 -0000
Received: (qmail 74687 invoked by uid 500); 23 Feb 2007 01:26:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74453 invoked by uid 500); 23 Feb 2007 01:26:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74442 invoked by uid 99); 23 Feb 2007 01:26:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 17:26:24 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 17:26:13 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id l1N1Pl30013801
	for <java-user@lucene.apache.org>; Fri, 23 Feb 2007 03:25:47 +0200
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz with ESMTP
	 id m2n3p8lq; 23 Feb 2007 03:25:00 +0200
Message-ID: <45DE429F.4020203@teamware.com>
Date: Fri, 23 Feb 2007 12:25:51 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Positions in SpanFirst
References: <45DC28E0.4070604@teamware.com>  <359a92830702210516h2d0faa55id9a71f5e8bd1312c@mail.gmail.com>  <45DCABC9.7060303@teamware.com>  <359a92830702211359r2705dcbegdbfa6411b3b4b170@mail.gmail.com>  <45DCDF3D.4070305@teamware.com> <359a92830702211640n6eb2eb94n7ec8306cc867a237@mail.gmail.com> <Pine.LNX.4.58.0702211642400.31157@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0702211642400.31157@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Fri, 23 Feb 2007 03:25:47 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Chris Hostetter wrote:
> : So I don't see why using a SpanNear that respects order and a large
> : IncrementGap won't solve your problem...... Although it would return "odd"
> 
> i think the use case he's worreid about is that he needs to be able to
> find matches just on the "start" of a persons name, ie...
> 
> 	Email#1 To: Jim Bob; Sue Anne-Marie Brown; John Doe
> 	Email#2 To: Tom Smith; Bob Jones; John Doe
> 
> ...he needs to support existing semantics that let him say "find emails
> where the start of a persons name is 'bob' and it returns Email#2, but not
> email#1 .. hence his interest in SpanFirst -- he wants to match the
> "first" few tokens of a "value" added to a field (which isn't waht
> SpanFirst does)

Correct.  That's one of the current search mechanisms.  It's not a major issue 
and I think I'll probably end up ducking it on the basis that the system 
directory defaults to a surname/firstname name order, but of course there's no 
guarantee that mail from other systems will have those names in that order, e.g.

#1 To: Bowesman Antony
#2 To: Antony Bowesman

makes this 'starts with' feature less useful.

Thanks again Hoss and Erick for the suggestions!  This list is excellent and I 
do wonder if you guys actually have day jobs that you are able to do as well as 
give the amount of time you seem to on this list!

Antony




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 23 02:07:35 2007
Return-Path: <java-user-return-26343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44811 invoked from network); 23 Feb 2007 02:07:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2007 02:07:34 -0000
Received: (qmail 4062 invoked by uid 500); 23 Feb 2007 02:07:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4032 invoked by uid 500); 23 Feb 2007 02:07:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4021 invoked by uid 99); 23 Feb 2007 02:07:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 18:07:35 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.73.178.156] (HELO web60413.mail.yahoo.com) (209.73.178.156)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 22 Feb 2007 18:07:22 -0800
Received: (qmail 91177 invoked by uid 60001); 23 Feb 2007 02:07:01 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=UnrBjrf5yrXCmjC1lugtMsRXY39eqtV8kg3gsmRTvP/IbtWQyEi6IlOTxzQMLjS8Z7uOdumOFFMDKRTBFEU8bsMtr3T5AvwQgsLfbE3Kx9noSr6OozRiopabEXHS9ilqdb94i5qXawbVNBBazGPwimcFIBw21w90bAXmSJp3N70=;
X-YMail-OSG: GI5zlBwVM1mnOAUcUeueBz5leqkhL3b8otgD79bMtt3rwRMJzMtCcXLytyhjhugCre8KnFSLFSpFXlMuHdrlpaDVPsZWL11eeQL6jyCaCgfzxqRvg6BoHIfdxoirE_Qaxw--
Received: from [155.69.174.165] by web60413.mail.yahoo.com via HTTP; Thu, 22 Feb 2007 18:07:01 PST
Date: Thu, 22 Feb 2007 18:07:01 -0800 (PST)
From: maureen tanuwidjaja <autumn_musique@yahoo.com>
Subject: Re: Optimizing Index
To: java-user@lucene.apache.org
In-Reply-To: <1172141641.10439.1175932939@webmail.messagingengine.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1478554470-1172196421=:89622"
Content-Transfer-Encoding: 8bit
Message-ID: <65554.89622.qm@web60413.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1478554470-1172196421=:89622
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit


yes I do have around 75 GB of free space on that HDD...I do not invoke any index reader...hence the program only calls indexwriter to optimize the index,and that's it..
   
  I am also perplexed why it tells that it have not enough disk space to do optimization...
  
Michael McCandless <lucene@mikemccandless.com> wrote:
  
"maureen tanuwidjaja" wrote:

> I had an exsisting index file with the size 20.6 GB...I havent done any
> optimization in this index yet.Now I had a HDD of 100 GB,but apparently
> when I create program to optimize(which simply calls writer.optimize()
> to this indexfile),it gives the error that there is not enough space on
> the disk.
> 
> I read that the size needed to optimize the index is twice as the
> original index size...then it should be around 40 GB instead...I
> confuse why the size of 100 GB is insufficient to do the
> optimization...

Does your disk only have this index? Ie 100 GB - 20.6 = 79.4 GB of
free space?

Do you have reader(s) open on the index when you kick off the
optimize? If so then the temporary free space required is 2X the size
of the index (41.2 GB in your case).

Worse, if your readers are refreshing during the optimize (eg because
on IndexReader.isCurrent() returned false) even more temporary disk
space can be tied up. This is a case LUCENE-710 aims to fix (adding
"commit only on close" to IndexWriter). The workaround for now is to
create app level logic to ensure readers never refresh during
optimize.

If you don't have readers then you really should only need 1X
additional free space at the start of optimize (20.6 GB free in your
case) so I'm baffled why 79.4 GB would not be enough.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



 
---------------------------------
Now that's room service! Choose from over 150,000 hotels 
in 45,000 destinations on Yahoo! Travel to find your fit.
--0-1478554470-1172196421=:89622--

From java-user-return-26344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 23 02:11:43 2007
Return-Path: <java-user-return-26344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46162 invoked from network); 23 Feb 2007 02:11:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2007 02:11:41 -0000
Received: (qmail 8397 invoked by uid 500); 23 Feb 2007 02:11:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8157 invoked by uid 500); 23 Feb 2007 02:11:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8146 invoked by uid 99); 23 Feb 2007 02:11:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 18:11:42 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=MSGID_MULTIPLE_AT
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.125.145.37] (HELO mercury.propylon.com) (194.125.145.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 18:11:30 -0800
Received: from propylon-sdsl.sdsl.esat.net ([193.120.101.26] helo=damienmc)
	by mercury.propylon.com with esmtp (Exim 4.50)
	id 1HKPrt-0006hn-8G
	for java-user@lucene.apache.org; Fri, 23 Feb 2007 02:09:26 +0000
From: "Damien McCarthy" <damien.mccarthy@propylon.com>
To: <java-user@lucene.apache.org>
References: <1172141641.10439.1175932939@webmail.messagingengine.com> <65554.89622.qm@web60413.mail.yahoo.com>
In-Reply-To: <65554.89622.qm@web60413.mail.yahoo.com>
Date: Fri, 23 Feb 2007 02:10:45 -0000
Message-ID: <001201c756ef$d549bb20$7fdd3160$@mccarthy@propylon.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcdW7yWFAZTGoiQdRKq2QHsaVoWGjQAAGPWg
Content-Language: en-gb
X-SA-Exim-Connect-IP: 193.120.101.26
X-SA-Exim-Mail-From: damien.mccarthy@propylon.com
Subject: RE: Optimizing Index
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on 
	mercury.propylon.com
X-Spam-Level: 
X-SA-Exim-Version: 4.2 (built Thu, 03 Mar 2005 10:44:12 +0100)
X-SA-Exim-Scanned: Yes (on mercury.propylon.com)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.1 required=5.0 tests=AWL autolearn=failed 
	version=3.0.3

What file system is the hard disc? If it is FAT32 one of your indexing files
is probably getting bigger than 4.7 gigs - the maximum file size in FAT32

Damien

-----Original Message-----
From: maureen tanuwidjaja [mailto:autumn_musique@yahoo.com] 
Sent: 23 February 2007 02:07
To: java-user@lucene.apache.org
Subject: Re: Optimizing Index


yes I do have around 75 GB of free space on that HDD...I do not invoke any
index reader...hence the program only calls indexwriter to optimize the
index,and that's it..
   
  I am also perplexed why it tells that it have not enough disk space to do
optimization...
  
Michael McCandless <lucene@mikemccandless.com> wrote:
  
"maureen tanuwidjaja" wrote:

> I had an exsisting index file with the size 20.6 GB...I havent done any
> optimization in this index yet.Now I had a HDD of 100 GB,but apparently
> when I create program to optimize(which simply calls writer.optimize()
> to this indexfile),it gives the error that there is not enough space on
> the disk.
> 
> I read that the size needed to optimize the index is twice as the
> original index size...then it should be around 40 GB instead...I
> confuse why the size of 100 GB is insufficient to do the
> optimization...

Does your disk only have this index? Ie 100 GB - 20.6 = 79.4 GB of
free space?

Do you have reader(s) open on the index when you kick off the
optimize? If so then the temporary free space required is 2X the size
of the index (41.2 GB in your case).

Worse, if your readers are refreshing during the optimize (eg because
on IndexReader.isCurrent() returned false) even more temporary disk
space can be tied up. This is a case LUCENE-710 aims to fix (adding
"commit only on close" to IndexWriter). The workaround for now is to
create app level logic to ensure readers never refresh during
optimize.

If you don't have readers then you really should only need 1X
additional free space at the start of optimize (20.6 GB free in your
case) so I'm baffled why 79.4 GB would not be enough.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



 
---------------------------------
Now that's room service! Choose from over 150,000 hotels 
in 45,000 destinations on Yahoo! Travel to find your fit.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 23 04:19:29 2007
Return-Path: <java-user-return-26345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83703 invoked from network); 23 Feb 2007 04:19:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2007 04:19:27 -0000
Received: (qmail 37597 invoked by uid 500); 23 Feb 2007 04:19:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37403 invoked by uid 500); 23 Feb 2007 04:19:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37277 invoked by uid 99); 23 Feb 2007 04:19:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 20:19:23 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 20:19:11 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id l1N4IjAg023571
	for <java-user@lucene.apache.org>; Fri, 23 Feb 2007 06:18:45 +0200
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz with ESMTP
	 id m2n6i6eu; 23 Feb 2007 06:18:00 +0200
Message-ID: <45DE6B28.5000509@teamware.com>
Date: Fri, 23 Feb 2007 15:18:48 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: search on colon ":" ending words
References: <20070222181253.92314.qmail@web83507.mail.sp1.yahoo.com>
In-Reply-To: <20070222181253.92314.qmail@web83507.mail.sp1.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Fri, 23 Feb 2007 06:18:45 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Felix Litman wrote:
> Yes. thank you.  How did you make that modification not to treat ":" as a field-name terminator?
> 
> Is it using this  Or some other way?

I removed the : handling stuff from QueryParser.jj in the method:

Query Clause(String field) :

I removed this section
---
   [
     LOOKAHEAD(2)
     (
     fieldToken=<TERM> <COLON> {field=discardEscapeChar(fieldToken.image);}
     | <STAR> <COLON> {field="*";}
     )
   ]
---

and you can also remove the COLON and : related bits to do with start terms and 
escaped chars if you want to exclude treating : as a separator, but from memory, 
it's the above section that does the field recognition.

Antony


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 23 04:38:29 2007
Return-Path: <java-user-return-26346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91569 invoked from network); 23 Feb 2007 04:38:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2007 04:38:29 -0000
Received: (qmail 58149 invoked by uid 500); 23 Feb 2007 04:38:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57934 invoked by uid 500); 23 Feb 2007 04:38:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57923 invoked by uid 99); 23 Feb 2007 04:38:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 20:38:31 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [216.252.120.166] (HELO web83510.mail.sp1.yahoo.com) (216.252.120.166)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 22 Feb 2007 20:38:19 -0800
Received: (qmail 82684 invoked by uid 60001); 23 Feb 2007 04:37:58 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=pacbell.net;
  h=Message-ID:X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=bXs/MWQ0dckNzy0+rISmSq/elwuRR++TX+I8KCqPAreLW4bmFNoR2tGKkAo0AlvhRfIQLvT1wJ0PnJcma5hqscnqyRnx2ZKereoXGjOfgCfpPWZ4km7vxGWrIxCk6e0f28WIK2DYWxapYNunKVo3Fb1zUZqOqS0o63muJYHiJBY=  ;
Message-ID: <20070223043758.82682.qmail@web83510.mail.sp1.yahoo.com>
X-YMail-OSG: jrl3i2gVM1leQn0picaSYxLXRPjNes74ayCXYdLAeIwQMyMCE_ZsQ6hEnf5rYCZ4CGEdC2SxJCD8MUXthJ3l73R.HuLv3H7.lOpLb1QhuVElPEswygu7
Received: from [75.2.192.183] by web83510.mail.sp1.yahoo.com via HTTP; Thu, 22 Feb 2007 20:37:58 PST
Date: Thu, 22 Feb 2007 20:37:58 -0800 (PST)
From: Felix Litman <f_litman@pacbell.net>
Subject: Re: search on colon ":" ending words
To: java-user@lucene.apache.org
In-Reply-To: <45DE6B28.5000509@teamware.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-233855442-1172205478=:82668"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

--0-233855442-1172205478=:82668
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

OK. Thank you.  We'll have to consider using this approach.
   
  I guess the drawback here is that ":" will not longer work as a field operator. ?:-(
   
  We were also considering using the following approach.
   
  String newquery = query.replace(query, ": ", " "); 
   
  It seems this way a colon should still work as a field operator if followed by a query term with no space in between
   
  Thanks,
  Felix.
  
Antony Bowesman <adb@teamware.com> wrote:
  Felix Litman wrote:
> Yes. thank you. How did you make that modification not to treat ":" as a field-name terminator?
> 
> Is it using this Or some other way?

I removed the : handling stuff from QueryParser.jj in the method:

Query Clause(String field) :

I removed this section
---
[
LOOKAHEAD(2)
(
fieldToken= {field=discardEscapeChar(fieldToken.image);}
| {field="*";}
)
]
---

and you can also remove the COLON and : related bits to do with start terms and 
escaped chars if you want to exclude treating : as a separator, but from memory, 
it's the above section that does the field recognition.

Antony


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



--0-233855442-1172205478=:82668--

From java-user-return-26347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 23 04:48:58 2007
Return-Path: <java-user-return-26347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94140 invoked from network); 23 Feb 2007 04:48:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2007 04:48:57 -0000
Received: (qmail 70502 invoked by uid 500); 23 Feb 2007 04:48:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69661 invoked by uid 500); 23 Feb 2007 04:48:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69650 invoked by uid 99); 23 Feb 2007 04:48:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 20:48:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [208.50.6.19] (HELO WM19.inbox.com) (208.50.6.19)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 22 Feb 2007 20:48:43 -0800
Received: from inbox.com (127.0.0.1:25)
	by inbox.com with [InBox.Com SMTP Server]
	id <702220249796.WM19> for <java-user@lucene.apache.org> from <wanster@inbox.com>;
	Thu, 22 Feb 2007 8:48:20 PM -0800
Mime-Version: 1.0
Date: Thu, 22 Feb 2007 20:48:20 -0800
Message-ID: <4D9EBBC3A70.00000A07wanster@inbox.com>
From: Ridzwan Aminuddin <wanster@inbox.com>
Subject: Re: Lucene 1.4.3 : IndexWriter.addDocument(doc) fails when run on
  OS requiring permissions
To: java-user@lucene.apache.org
In-Reply-To: <Pine.LNX.4.58.0702221141410.8755@hal.rescomp.berkeley.edu>
References: <42e5a736d78.00000994wanster@inbox.com>
X-Mailer: INBOX.COM
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: quoted-printable
X-IWM-ACU: IaZpTilLO4HxccxqPHwa0-b83LXs6QM21lJnxl8Ugh76tok6GNqqEURvRlaC
  3bgz947XXFq3bJ_-roiKDIR36FPN_AhvDMDP0AuMDZa4o6ESkPwLAf44sHqx
  Yw6jDcPEJ8kX_TGXD
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Guys.

Ok thanks for the replies. You guys are right that it is to do with the =
system and not with Lucene. However, what i'm trying to do is to pinpoint =
and narrow down to the exact place that causes the system to fail. and =
then from there try to remedy the problem.=20

The odd thing is that the program is still able to write other files to =
the subdirectories that the program itself creates. It is only when it =
goes through this indexing process that this program halts due to the =
insufficient permissions. But the directory i provided to store the target =
index files has been set to read/write/execute (drwxrwxrwx) all =
permissions.=20

In any case, i suspect that it is due to this portion of code.


:   FieldsWriter(Directory d, String segment, FieldInfos fn)
:        throws IOException =7B
:     fieldInfos =3D fn;
:     fieldsStream =3D d.createFile(segment + =22.fdt=22);
:     indexStream =3D d.createFile(segment + =22.fdx=22);
:   =7D


Are these two files created in the Directory d?
And is this Directory d the ramDirectory that i have provided when i =
called the method: dw =3D new DocumentWriter(ramDirectory, analyzer, =
similarity,
 maxFieldLength);
in IndexWriter.Java?

If yes. then where exactly does this ramDirectory point to? cos as far as =
i can see from the code, ramDirectory is initialised as=20

RamDirectory ramDirectory =3D new RamDirectory()

I think the program fails when it tries to create these two files somehow.

Please help to enlighten me?... Maybe knowing the exact path to this =
ramDirectory would help me in finding out which folder i need to provide =
access to....

Also, does Lucene ever write any temp data to /tmp ?



> -----Original Message-----
> From: hossman_lucene=40fucit.org
> Sent: Thu, 22 Feb 2007 11:43:38 -0800 (PST)
> To: java-user=40lucene.apache.org
> Subject: Re: Lucene 1.4.3 : IndexWriter.addDocument(doc) fails when run
> on OS requiring permissions
>=20
>=20
> This sounds like it has absolutely nothing to do with Lucene, and
> everything to do with good security permissions -- your Zope/python front
> end is most likely running as a user thta does not have write permissions
> to the directory where your index lives.  you'll need to remedy that.
>=20
> you can write a simple java app that doens't use lucene at all -- just
> creates a file and writes  =22hellow world=22 to it -- and you will most
> likely see this exact same behavior, dealing with teh file permissions is
> totally out side the scope of Lucene.
>=20
>=20
> : Date: Thu, 22 Feb 2007 00:20:12 -0800
> : From: Ridzwan Aminuddin <wanster=40inbox.com>
> : Reply-To: java-user=40lucene.apache.org
> : To: java-user=40lucene.apache.org
> : Subject: Lucene 1.4.3 : IndexWriter.addDocument(doc) fails when run on
> OS
> :      requiring permissions
> :
> : Hi=21
> :
> : I'm writing a java program that uses Lucene 1.4.3 to index and create a
> vector file of words found in Text Files. The purpose is for text mining.
> :
> : I created a Java .Jar file from my program and my python script calls
> the Java Jar executable. This is all triggered by my DTML code.
> :
> : I'm running on Linux and i have no problem executing the script when i
> execute via command line. But once i trigger the script via the web
> (using Zope/Plone external methods ) it doesn't work anymore. This is
> because of the strict permissions that LInux has over its files and
> folders.
> :
> : I've narrowed down the problem to the IndexWriter.addDocument(doc)
> method in Lucene 1.4.3 and as you can see below my code fails
> specifically when a new FieldsWriter object is being initialised.
> :
> : I strongly suspect that it fails at this point but have no idea how to
> overcome this problem. I know that it has to do with the permissions
> because th eprogram works like a miracle when it is called via command
> line by the super user (sudo).
> :
> : Could anyone give me any pointers or ideas of how i could overcome
> this.
> :
> : The final statement which is printed before the program hangs is:
> : =22Entering DocumentWriter.AddDocument.... (4)=22
> :
> : Here is the portions of my relevant code :
> :
> :
> :
> :
> =
//-------------------------------------------------------------------------=
------------------
> : //=09=09=09Indexer.Java // This is my own method and class
> :
> =
//-------------------------------------------------------------------------=
------------------
> :         // continued from some other code......
> :
> : =09Document doc =3D new Document();
> :
> :         doc.add(Field.Text(=22articleTitle=22, articleTitle, true));
> :         doc.add(Field.Text(=22articleURL=22, articleURL, true));
> :         doc.add(Field.Text(=22articleSummary=22, articleSummary, true));
> :         doc.add(Field.Text(=22articleDate=22, articleDate, true));
> :         doc.add(Field.Text(=22articleSource=22, articleSource, true));
> :         doc.add(Field.Text(=22articleBody=22, articleBody, true));
> :         doc.add(Field.Keyword(=22filename=22, f.getCanonicalPath()));
> :
> : =09try
> :                 =7B
> :                     writer.addDocument(doc); // indexing fails because
> this statement cannot be executed
> :
> :                 =7D
> :
> :                 catch (Exception e)
> :
> :                 =7B
> :                     System.err.println (=22Cannot add doc exception
> thrown=21=22);
> :
> :                 =7D
> :
> :
> :
> =
//-------------------------------------------------------------------------=
------------------
> : //=09=09=09IndexWriter.Java // Lucene 1.4.3
> :
> =
//-------------------------------------------------------------------------=
------------------
> :
> :
> : public void addDocument(Document doc) throws IOException =7B
> :
> :       addDocument(doc, analyzer);
> :   =7D
> :
> :
> : public void addDocument(Document doc, Analyzer analyzer) throws
> IOException =7B
> :
> :     DocumentWriter dw;
> :
> :     dw =3D new DocumentWriter(ramDirectory, analyzer, similarity,
> maxFieldLength);
> :
> :     String segmentName =3D newSegmentName();
> :     dw.addDocument(segmentName, doc);      =09=09// The program fails to
> execute this line onwards=21
> :
> :     synchronized (this) =7B
> :
> :       segmentInfos.addElement(new SegmentInfo(segmentName, 1,
> ramDirectory));
> :       maybeMergeSegments();
> :     =7D
> :
> :   =7D
> :
> :
> :
> =
//-------------------------------------------------------------------------=
------------------
> : //=09=09=09DocumentWriter.Java // Lucene 1.4.3
> :
> =
//-------------------------------------------------------------------------=
------------------
> :
> :
> :
> : final void addDocument(String segment, Document doc)
> :             throws IOException =7B
> :
> :       System.out.println(=22Entering DocumentWriter.AddDocument....
> (1)=22);
> :
> :     // write field names
> :     fieldInfos =3D new FieldInfos();
> :       System.out.println(=22Entering DocumentWriter.AddDocument....
> (2)=22);
> :
> :     fieldInfos.add(doc);
> :           System.out.println(=22Entering DocumentWriter.AddDocument....
> (3)=22);
> :
> :     fieldInfos.write(directory, segment + =22.fnm=22);
> :
> :           System.out.println(=22Entering DocumentWriter.AddDocument....
> (4)=22);  // The program fails after this
> :
> :     // write field values
> :     FieldsWriter fieldsWriter =3D
> :             new FieldsWriter(directory, segment, fieldInfos);=09=09=09//
> Program fails to execute this statement
> :
> :           System.out.println(=22Entering DocumentWriter.AddDocument....
> (5)=22);
> :
> :     try =7B
> :       fieldsWriter.addDocument(doc);
> :
> :       System.out.println(=22Entering DocumentWriter.AddDocument....
> (6)=22);
> :
> :     =7D finally =7B
> :       fieldsWriter.close();
> :             System.out.println(=22Entering =
DocumentWriter.AddDocument....
> (7)=22);
> :
> :     =7D
> :
> :           System.out.println(=22Entering DocumentWriter.AddDocument....
> (8)=22);
> :
> :     // invert doc into postingTable
> :     postingTable.clear();=09=09=09  // clear postingTable
> :     fieldLengths =3D new int=5BfieldInfos.size()=5D;    // init =
fieldLengths
> :     fieldPositions =3D new int=5BfieldInfos.size()=5D;  // init
> fieldPositions
> :
> :           System.out.println(=22Entering DocumentWriter.AddDocument....
> (9)=22);
> :
> :     fieldBoosts =3D new float=5BfieldInfos.size()=5D;=09  // init =
fieldBoosts
> :     Arrays.fill(fieldBoosts, doc.getBoost());
> :
> :           System.out.println(=22Entering DocumentWriter.AddDocument....
> (10)=22);
> :
> :     invertDocument(doc);
> :
> :           System.out.println(=22Entering DocumentWriter.AddDocument....
> (11)=22);
> :
> :     // sort postingTable into an array
> :     Posting=5B=5D postings =3D sortPostingTable();
> :
> :           System.out.println(=22Entering DocumentWriter.AddDocument....
> (12)=22);
> :
> :     /*
> :     for (int i =3D 0; i < postings.length; i++) =7B
> :       Posting posting =3D postings=5Bi=5D;
> :       System.out.print(posting.term);
> :       System.out.print(=22 freq=3D=22 + posting.freq);
> :       System.out.print(=22 pos=3D=22);
> :       System.out.print(posting.positions=5B0=5D);
> :       for (int j =3D 1; j < posting.freq; j++)
> : =09System.out.print(=22,=22 + posting.positions=5Bj=5D);
> :       System.out.println(=22=22);
> :     =7D
> :     */
> :
> :     // write postings
> :     writePostings(postings, segment);
> :
> :           System.out.println(=22Entering DocumentWriter.AddDocument....
> (13)=22);
> :
> :     // write norms of indexed fields
> :     writeNorms(doc, segment);
> :
> :           System.out.println(=22Entering DocumentWriter.AddDocument....
> (14)=22);
> :
> :   =7D
> :
> :
> =
//-------------------------------------------------------------------------=
------------------
> : //=09=09=09FieldsWriter.Java // Lucene 1.4.3
> :
> =
//-------------------------------------------------------------------------=
------------------
> :
> :
> :   FieldsWriter(Directory d, String segment, FieldInfos fn)
> :        throws IOException =7B
> :     fieldInfos =3D fn;
> :     fieldsStream =3D d.createFile(segment + =22.fdt=22);
> :     indexStream =3D d.createFile(segment + =22.fdx=22);
> :   =7D
> :
> :
> =
//-------------------------------------------------------------------------=
------------------
> : //=09=09=09FSDirectory.Java // Lucene 1.4.3
> :
> =
//-------------------------------------------------------------------------=
------------------
> :
> :
> : public final OutputStream createFile(String name) throws IOException =7B
> :
> :       System.out.println(=22Entering FSDirectory.createFile.... =
returning
> an OutputStream=22);
> :
> :     return new FSOutputStream(new File(directory, name));
> :   =7D
> :
> : ---------------------------------------------------------------------
> : To unsubscribe, e-mail: java-user-unsubscribe=40lucene.apache.org
> : For additional commands, e-mail: java-user-help=40lucene.apache.org
> :
>=20
>=20
>=20
> -Hoss
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe=40lucene.apache.org
> For additional commands, e-mail: java-user-help=40lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 23 05:05:42 2007
Return-Path: <java-user-return-26348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98746 invoked from network); 23 Feb 2007 05:05:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2007 05:05:42 -0000
Received: (qmail 89655 invoked by uid 500); 23 Feb 2007 05:05:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89346 invoked by uid 500); 23 Feb 2007 05:05:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89335 invoked by uid 99); 23 Feb 2007 05:05:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 21:05:43 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 21:05:33 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id l1N554Nn026038
	for <java-user@lucene.apache.org>; Fri, 23 Feb 2007 07:05:04 +0200
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz with ESMTP
	 id m2n74bty; 23 Feb 2007 07:04:00 +0200
Message-ID: <45DE75F5.4070705@teamware.com>
Date: Fri, 23 Feb 2007 16:04:53 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: TextMining.org Word extractor
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Fri, 23 Feb 2007 07:05:05 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=-0.185,
	required 5, autolearn=not spam, BAYES_40 -0.18)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

I'm extracting text from Word using TextMining.org extractors - it works better 
than POI because it extracts Word 6/95 as well as 97-2002, which POI cannot do. 
  However, I'm trying to find out about licence issues with the TM jar. The TM 
website seems to be permanently hacked these days.

Anyone know?

Also, has anyone come up with a good solution for extracting data from 
fast-saved files, something that neither TM nor POI can do.

Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 23 06:01:32 2007
Return-Path: <java-user-return-26349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9701 invoked from network); 23 Feb 2007 06:01:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2007 06:01:31 -0000
Received: (qmail 31245 invoked by uid 500); 23 Feb 2007 06:01:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31210 invoked by uid 500); 23 Feb 2007 06:01:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31199 invoked by uid 99); 23 Feb 2007 06:01:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 22:01:31 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Feb 2007 22:01:20 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 1FCB65B766; Thu, 22 Feb 2007 22:01:00 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 191E37F403
	for <java-user@lucene.apache.org>; Thu, 22 Feb 2007 22:01:00 -0800 (PST)
Date: Thu, 22 Feb 2007 22:01:00 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: QueryParser bug?
In-Reply-To: <45DE4043.1090009@teamware.com>
Message-ID: <Pine.LNX.4.58.0702222127460.17712@hal.rescomp.berkeley.edu>
References: <45DD1DDB.5070001@teamware.com> <Pine.LNX.4.58.0702221138500.8755@hal.rescomp.berkeley.edu>
 <45DE4043.1090009@teamware.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: than just on/off), but the original QP shows the problem with
: setAllowLeadingWildcard(true).  The compiled JavaCC code will always create a
: PrefixQuery if the last character is *, regardless of any other wildcard
: characters before it.  Therefore the query is based on the Term:

Yep, definitely a bug...

https://issues.apache.org/jira/browse/LUCENE-813

..i'm afraid i don't have any suggested fix or workarround.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 23 12:52:48 2007
Return-Path: <java-user-return-26350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45284 invoked from network); 23 Feb 2007 12:52:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2007 12:52:47 -0000
Received: (qmail 12827 invoked by uid 500); 23 Feb 2007 12:52:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12803 invoked by uid 500); 23 Feb 2007 12:52:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12792 invoked by uid 99); 23 Feb 2007 12:52:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 04:52:47 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.132.241 as permitted sender)
Received: from [209.85.132.241] (HELO an-out-0708.google.com) (209.85.132.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 04:52:36 -0800
Received: by an-out-0708.google.com with SMTP id c3so323959ana
        for <java-user@lucene.apache.org>; Fri, 23 Feb 2007 04:52:15 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=HM70zKQoCbDcFQxezm5ImXYYxq2NtGaLstgmgHR6clrAnyQvDLe5ZyGf953JUQW599TGTtmnyQoubYesCBD7rICX5/E40/cWYhvcb/LfV159GfnDSvG6HuKk4xIkmdw3pLH+W8azDRvGWRyZyzpR8CkDY+iUqwDCyZzqakzZRVs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=BATZD8T1Z+taf8H6ar+qB7Oiw2ITlQtb1ZLwMri6QtA6xs+IDO0y636qVNr8KNI2aopyDjV7+g5O1yawfowepQXUdAf6dpCTIZOpX5pNayc2ygzFxvEtEG31E7nu/7fDlmh2adDtQaEK7BfHmhwwdbWsuZ3dOxfHT9cTctV6DKY=
Received: by 10.114.94.1 with SMTP id r1mr824715wab.1172235135318;
        Fri, 23 Feb 2007 04:52:15 -0800 (PST)
Received: by 10.114.58.3 with HTTP; Fri, 23 Feb 2007 04:52:14 -0800 (PST)
Message-ID: <359a92830702230452p3e884f5aoc56822d67adee103@mail.gmail.com>
Date: Fri, 23 Feb 2007 07:52:15 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: search on colon ":" ending words
In-Reply-To: <20070223043758.82682.qmail@web83510.mail.sp1.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_55990_20020348.1172235135000"
References: <45DE6B28.5000509@teamware.com>
	 <20070223043758.82682.qmail@web83510.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_55990_20020348.1172235135000
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'd *strongly* advise doing it the simple way, that is, your replace.

1> it's simple and understandable.
2> next time you upgrade Lucene you, or the next poor programmer, will have
to remember/reimplement your change to the parser.
3> How will you insure that others in your organization (and you 6 months
from now) won't spend lots of time wondering why ':' didn't work as a field
separator in the query parser? I flat guarantee this will cause you grief...
4> I don't want Otis, Erik and Yonik to have to spend time answering the
question "Why isn't ':' working as a field separator?" <G>.

Best
Erick

On 2/22/07, Felix Litman <f_litman@pacbell.net> wrote:
>
> OK. Thank you.  We'll have to consider using this approach.
>
>   I guess the drawback here is that ":" will not longer work as a field
> operator. ?:-(
>
>   We were also considering using the following approach.
>
>   String newquery = query.replace(query, ": ", " ");
>
>   It seems this way a colon should still work as a field operator if
> followed by a query term with no space in between
>
>   Thanks,
>   Felix.
>
> Antony Bowesman <adb@teamware.com> wrote:
>   Felix Litman wrote:
> > Yes. thank you. How did you make that modification not to treat ":" as a
> field-name terminator?
> >
> > Is it using this Or some other way?
>
> I removed the : handling stuff from QueryParser.jj in the method:
>
> Query Clause(String field) :
>
> I removed this section
> ---
> [
> LOOKAHEAD(2)
> (
> fieldToken= {field=discardEscapeChar(fieldToken.image);}
> | {field="*";}
> )
> ]
> ---
>
> and you can also remove the COLON and : related bits to do with start
> terms and
> escaped chars if you want to exclude treating : as a separator, but from
> memory,
> it's the above section that does the field recognition.
>
> Antony
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>

------=_Part_55990_20020348.1172235135000--

From java-user-return-26351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 23 14:34:49 2007
Return-Path: <java-user-return-26351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77496 invoked from network); 23 Feb 2007 14:34:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2007 14:34:48 -0000
Received: (qmail 53820 invoked by uid 500); 23 Feb 2007 14:34:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53781 invoked by uid 500); 23 Feb 2007 14:34:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53759 invoked by uid 99); 23 Feb 2007 14:34:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 06:34:48 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_FONT_BIG,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 217.69.20.190 as permitted sender)
Received: from [217.69.20.190] (HELO cluster-d.mailcontrol.com) (217.69.20.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 06:34:32 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly15d.srv.mailcontrol.com (MailControl) with SMTP id l1NEY7M0003558
	for <java-user@lucene.apache.org>; Fri, 23 Feb 2007 14:34:09 GMT
Received: From SGBD012103.wsatkins.com ([10.202.26.17]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 1172241227750; Fri, 23 Feb 2007 14:33:47 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012103.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 23 Feb 2007 14:33:47 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C75757.A09C879D"
Subject: Index maintainance
Date: Fri, 23 Feb 2007 14:33:46 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705F07945@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Index maintainance
Thread-Index: AcdXV6A96K47ORILTHq6jOcXl5tAUQ==
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 23 Feb 2007 14:33:47.0615 (UTC) FILETIME=[A0DFEEF0:01C75757]
X-Scanned-By: MailControl A-07-06-85 (www.mailcontrol.com) on 10.68.0.125
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C75757.A09C879D
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi all,

Just wondering how one would perform index maintainance.  I know how to
add new documents:

writer =3D new IndexWriter(IndexDirectory, new PorterAnalyzer(), false);

(incidently, I wrote PorterAnalyzer myself for the PorterStemFilter
since I couldn't find an analyzer using it)

But what I don't know is how do we delete documents from the index and
how we replace documents in the index where those documents have
changed.

Cheers

Sachin


This email and any attached files are confidential and copyright protected.=
 If you are not the addressee, any dissemination of this communication is s=
trictly prohibited. Unless otherwise expressly agreed in writing, nothing s=
tated in this communication shall be legally binding.

The ultimate parent company of the Atkins Group is WS Atkins plc.  Register=
ed in England No. 1885586.  Registered Office Woodcote Grove, Ashley Road, =
Epsom, Surrey KT18 5BW.

Consider the environment. Please don't print this e-mail unless you really =
need to.=20

------_=_NextPart_001_01C75757.A09C879D--

From java-user-return-26352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 23 14:44:32 2007
Return-Path: <java-user-return-26352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80473 invoked from network); 23 Feb 2007 14:44:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2007 14:44:31 -0000
Received: (qmail 81244 invoked by uid 500); 23 Feb 2007 14:44:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81215 invoked by uid 500); 23 Feb 2007 14:44:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81203 invoked by uid 99); 23 Feb 2007 14:44:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 06:44:31 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.162.226 as permitted sender)
Received: from [64.233.162.226] (HELO nz-out-0506.google.com) (64.233.162.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 06:44:20 -0800
Received: by nz-out-0506.google.com with SMTP id i1so457614nzh
        for <java-user@lucene.apache.org>; Fri, 23 Feb 2007 06:43:59 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=JusKzVpUM+irdZKx6J0WM0r78gyAsvZZ88WkjT4dlYCwjmBV2pKmLv2tegxIIPiMeZEt6+2WmmweX0SEnx7e1c6ML1EV1M7cnrO9hk36ZqPIJnxxiKNL8jZIpBCHPkRkjtrzqeO+2sh/QuUh0dEkUmox0kXHVKokpjCY5GFs7wM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ffdROd3UgPOUKKNJ1PylQBwQBjSf5x4zofTCRNwMy4ZCE0zwRQ4RXBrIVXTZCe42AJs9ZnvjuI0aD96YH93ymbHuFLNldYgx5cuVyed8v1de6t6ecY/27+52hk2rhcXgSRBsP++l/hAexFoDLp2M1jtUbNN8/sziPgI8/XsSzs8=
Received: by 10.114.73.1 with SMTP id v1mr880597waa.1172241839147;
        Fri, 23 Feb 2007 06:43:59 -0800 (PST)
Received: by 10.114.58.3 with HTTP; Fri, 23 Feb 2007 06:43:58 -0800 (PST)
Message-ID: <359a92830702230643l3501fdb4g761bc6d630bd67a1@mail.gmail.com>
Date: Fri, 23 Feb 2007 09:43:58 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index maintainance
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705F07945@SGBLOW2101.wsatkins.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_58230_27182637.1172241838865"
References: <BC1CFC544422CB4A934908E126A4742705F07945@SGBLOW2101.wsatkins.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_58230_27182637.1172241838865
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

If you're using 2.1, see IndexModifier. If you're previous to 2.1, the
IndexModifier is (I think), hanging around in the contrib area. You have to
delete a document and re-add it, there's no such thing as "modify inplace"
in lucene currently.

Erick

On 2/23/07, Kainth, Sachin <Sachin.Kainth@atkinsglobal.com> wrote:
>
> Hi all,
>
> Just wondering how one would perform index maintainance.  I know how to
> add new documents:
>
> writer = new IndexWriter(IndexDirectory, new PorterAnalyzer(), false);
>
> (incidently, I wrote PorterAnalyzer myself for the PorterStemFilter
> since I couldn't find an analyzer using it)
>
> But what I don't know is how do we delete documents from the index and
> how we replace documents in the index where those documents have
> changed.
>
> Cheers
>
> Sachin
>
>
> This email and any attached files are confidential and copyright
> protected. If you are not the addressee, any dissemination of this
> communication is strictly prohibited. Unless otherwise expressly agreed in
> writing, nothing stated in this communication shall be legally binding.
>
> The ultimate parent company of the Atkins Group is WS Atkins
> plc.  Registered in England No. 1885586.  Registered Office Woodcote Grove,
> Ashley Road, Epsom, Surrey KT18 5BW.
>
> Consider the environment. Please don't print this e-mail unless you really
> need to.
>

------=_Part_58230_27182637.1172241838865--

From java-user-return-26353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 23 15:07:47 2007
Return-Path: <java-user-return-26353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89983 invoked from network); 23 Feb 2007 15:07:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2007 15:07:46 -0000
Received: (qmail 48532 invoked by uid 500); 23 Feb 2007 15:07:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48508 invoked by uid 500); 23 Feb 2007 15:07:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48419 invoked by uid 99); 23 Feb 2007 15:07:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 07:07:37 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.29] (HELO out5.smtp.messagingengine.com) (66.111.4.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 07:07:25 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id F09301CF495
	for <java-user@lucene.apache.org>; Fri, 23 Feb 2007 10:07:04 -0500 (EST)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by out1.internal (MEProxy); Fri, 23 Feb 2007 10:07:04 -0500
X-Sasl-enc: CnYx0XuZRibyEU29U4tRokDA9XRM5jB54LUkWCyJqVdY 1172243224
Received: from [9.34.99.107] (bi01pt1.ct.us.ibm.com [129.33.1.37])
	by mail.messagingengine.com (Postfix) with ESMTP id 7BA8313E57
	for <java-user@lucene.apache.org>; Fri, 23 Feb 2007 10:07:04 -0500 (EST)
Message-ID: <45DF0316.2000502@mikemccandless.com>
Date: Fri, 23 Feb 2007 10:07:02 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Index maintainance
References: <BC1CFC544422CB4A934908E126A4742705F07945@SGBLOW2101.wsatkins.com> <359a92830702230643l3501fdb4g761bc6d630bd67a1@mail.gmail.com>
In-Reply-To: <359a92830702230643l3501fdb4g761bc6d630bd67a1@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Erick Erickson wrote:
> If you're using 2.1, see IndexModifier. If you're previous to 2.1, the
> IndexModifier is (I think), hanging around in the contrib area. You have to
> delete a document and re-add it, there's no such thing as "modify inplace"
> in lucene currently.

Actually as of 2.1 you can now delete and update documents through
IndexWriter.  I would recommend using IndexWriter instead of
IndexModifier.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 23 15:16:00 2007
Return-Path: <java-user-return-26354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94589 invoked from network); 23 Feb 2007 15:15:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2007 15:15:59 -0000
Received: (qmail 73693 invoked by uid 500); 23 Feb 2007 15:15:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73655 invoked by uid 500); 23 Feb 2007 15:15:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73644 invoked by uid 99); 23 Feb 2007 15:15:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 07:15:59 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 86.111.223.190 as permitted sender)
Received: from [86.111.223.190] (HELO cluster-j.mailcontrol.com) (86.111.223.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 07:15:44 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly07j.srv.mailcontrol.com (MailControl) with SMTP id l1NFFGeW030876
	for <java-user@lucene.apache.org>; Fri, 23 Feb 2007 15:15:17 GMT
Received: From SGBD012104.wsatkins.com ([10.202.26.18]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 117224369694; Fri, 23 Feb 2007 15:14:56 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012104.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 23 Feb 2007 15:14:56 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Index maintainance
Date: Fri, 23 Feb 2007 15:14:55 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705F07AEC@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Index maintainance
Thread-Index: AcdXXG+E4GN9W71HRGa66lbzXmywXgAAM2Kg
References: <BC1CFC544422CB4A934908E126A4742705F07945@SGBLOW2101.wsatkins.com> <359a92830702230643l3501fdb4g761bc6d630bd67a1@mail.gmail.com> <45DF0316.2000502@mikemccandless.com>
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 23 Feb 2007 15:14:56.0056 (UTC) FILETIME=[602E2380:01C7575D]
X-Scanned-By: MailControl A-07-06-80 (www.mailcontrol.com) on 10.74.0.117
X-Virus-Checked: Checked by ClamAV on apache.org

I've just been looking at IndexReader and it seems you can do it using
that, but I don't know which concrete implementation of IndexReader to
use.=20

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: 23 February 2007 15:07
To: java-user@lucene.apache.org
Subject: Re: Index maintainance

Erick Erickson wrote:
> If you're using 2.1, see IndexModifier. If you're previous to 2.1, the

> IndexModifier is (I think), hanging around in the contrib area. You=20
> have to delete a document and re-add it, there's no such thing as
"modify inplace"
> in lucene currently.

Actually as of 2.1 you can now delete and update documents through
IndexWriter.  I would recommend using IndexWriter instead of
IndexModifier.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



This message has been scanned for viruses by MailControl - (see
http://bluepages.wsatkins.co.uk/?6875772)


This email and any attached files are confidential and copyright protected.=
 If you are not the addressee, any dissemination of this communication is s=
trictly prohibited. Unless otherwise expressly agreed in writing, nothing s=
tated in this communication shall be legally binding.

The ultimate parent company of the Atkins Group is WS Atkins plc.  Register=
ed in England No. 1885586.  Registered Office Woodcote Grove, Ashley Road, =
Epsom, Surrey KT18 5BW.

Consider the environment. Please don't print this e-mail unless you really =
need to.=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 23 15:17:15 2007
Return-Path: <java-user-return-26355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94857 invoked from network); 23 Feb 2007 15:17:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2007 15:17:12 -0000
Received: (qmail 76933 invoked by uid 500); 23 Feb 2007 15:17:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76663 invoked by uid 500); 23 Feb 2007 15:17:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76652 invoked by uid 99); 23 Feb 2007 15:17:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 07:17:13 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=FROM_HAS_ULINE_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.29] (HELO out5.smtp.messagingengine.com) (66.111.4.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 07:17:01 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id 584771CFAA7
	for <java-user@lucene.apache.org>; Fri, 23 Feb 2007 10:16:41 -0500 (EST)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by out1.internal (MEProxy); Fri, 23 Feb 2007 10:16:41 -0500
X-Sasl-enc: rmt21J3s8aGvQnzyPavdC1Flg0SyjmOzuEpMQNs/6jH5 1172243800
Received: from [192.168.2.36] (unknown [81.105.111.192])
	by mail.messagingengine.com (Postfix) with ESMTP id D4DE51CDF6
	for <java-user@lucene.apache.org>; Fri, 23 Feb 2007 10:16:40 -0500 (EST)
Message-ID: <45DF055C.9050705@fastmail.fm>
Date: Fri, 23 Feb 2007 15:16:44 +0000
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To:  paul_t100@fastmail.fm
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
CC:  java-user@lucene.apache.org
Subject: Can I use Lucene to retrieve a list of duplicates
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi I have Java Swing application with a table, I was considering using 
Lucene to index the data in the table. One task Id like to do is for the 
user to select 'Find Duplicate records for Column X', then I would 
filter the table to show only records where there is more than one with 
the same value i.e duplicate for that column. Is there a way to return 
all the duplicates from a Lucene index.

thanks paul Taylor

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 23 15:23:16 2007
Return-Path: <java-user-return-26356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97922 invoked from network); 23 Feb 2007 15:23:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2007 15:23:15 -0000
Received: (qmail 88595 invoked by uid 500); 23 Feb 2007 15:23:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88559 invoked by uid 500); 23 Feb 2007 15:23:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88548 invoked by uid 99); 23 Feb 2007 15:23:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 07:23:15 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 07:23:04 -0800
Received: by ug-out-1314.google.com with SMTP id k40so390808ugc
        for <java-user@lucene.apache.org>; Fri, 23 Feb 2007 07:22:43 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=i3EGCqyLyC3Muj5WbdqHucP+WvSqGZ9VvmaMK0o1ftAUG81MmE/9vjzMSDVtE+holKeghDCmKz9gGpbWNvGUirfxzbsIEfHurqk1rSdeTJ0UQRfXYTxvCagNLgnX783GNW3y9eDRTYelqvtHpoUBzf+R6T8me24XyQBXcfkZC3s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=h3MuK92Mwk+X7atP9mmF2brJUG/5YC8kyuJgOT2K80XNL9RhSMdf20o9JkCA8fxQLcSs263hvu7CBfrqCuaCBsGigajMzwxtKCDGEN4japfTkUKOGpqyLguCwl8BKO0DuLE9O6WYpXQ0XFrl+meQflBQ8domyVOLbZzMtmQqTII=
Received: by 10.114.110.1 with SMTP id i1mr922721wac.1172244158560;
        Fri, 23 Feb 2007 07:22:38 -0800 (PST)
Received: by 10.114.58.3 with HTTP; Fri, 23 Feb 2007 07:22:38 -0800 (PST)
Message-ID: <359a92830702230722w19c441f5oe3d6fdd361ef23c@mail.gmail.com>
Date: Fri, 23 Feb 2007 10:22:38 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, paul_t100@fastmail.fm
Subject: Re: Can I use Lucene to retrieve a list of duplicates
In-Reply-To: <45DF055C.9050705@fastmail.fm>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_59065_28963894.1172244158473"
References: <45DF055C.9050705@fastmail.fm>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_59065_28963894.1172244158473
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Sure, you can use the TermDocs/TermEnum classes. Basically, for a term
(probably column value in your app) these let you quickly answer the
question "which (and how many) documents does this term appear in". What you
get is the Lucene doc id, which let's you fetch all the information about
the documents you want.

Erick

On 2/23/07, Paul Taylor <paul_t100@fastmail.fm> wrote:
>
> Hi I have Java Swing application with a table, I was considering using
> Lucene to index the data in the table. One task Id like to do is for the
> user to select 'Find Duplicate records for Column X', then I would
> filter the table to show only records where there is more than one with
> the same value i.e duplicate for that column. Is there a way to return
> all the duplicates from a Lucene index.
>
> thanks paul Taylor
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_59065_28963894.1172244158473--

From java-user-return-26357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 23 15:58:58 2007
Return-Path: <java-user-return-26357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11139 invoked from network); 23 Feb 2007 15:58:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2007 15:58:57 -0000
Received: (qmail 67003 invoked by uid 500); 23 Feb 2007 15:59:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66748 invoked by uid 500); 23 Feb 2007 15:58:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66705 invoked by uid 99); 23 Feb 2007 15:58:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 07:58:59 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 07:58:47 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 27BE530EFC17; Fri, 23 Feb 2007 08:58:27 -0700 (MST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 4269430EFC16
	for <java-user@lucene.apache.org>; Fri, 23 Feb 2007 08:58:23 -0700 (MST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <45DF055C.9050705@fastmail.fm>
References: <45DF055C.9050705@fastmail.fm>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <14D348DD-E87D-4035-B54D-7290C0953532@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Can I use Lucene to retrieve a list of duplicates
Date: Fri, 23 Feb 2007 10:58:19 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1


On Feb 23, 2007, at 10:16 AM, Paul Taylor wrote:

> Hi I have Java Swing application with a table, I was considering  
> using Lucene to index the data in the table. One task Id like to do  
> is for the user to select 'Find Duplicate records for Column X',  
> then I would filter the table to show only records where there is  
> more than one with the same value i.e duplicate for that column. Is  
> there a way to return all the duplicates from a Lucene index.

Check this stuff out: <http://svn.apache.org/repos/asf/lucene/java/ 
trunk/contrib/swing/> - might be of help.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 23 16:20:17 2007
Return-Path: <java-user-return-26358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21036 invoked from network); 23 Feb 2007 16:20:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2007 16:20:16 -0000
Received: (qmail 11503 invoked by uid 500); 23 Feb 2007 16:20:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11469 invoked by uid 500); 23 Feb 2007 16:20:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11458 invoked by uid 99); 23 Feb 2007 16:20:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 08:20:17 -0800
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=FROM_HAS_ULINE_NUMS,MISSING_HEADERS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.29] (HELO out5.smtp.messagingengine.com) (66.111.4.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 08:20:05 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id 73DEE1CE62B
	for <java-user@lucene.apache.org>; Fri, 23 Feb 2007 11:19:44 -0500 (EST)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by out1.internal (MEProxy); Fri, 23 Feb 2007 11:19:44 -0500
X-Sasl-enc: qcx9t8AzjllADIEX7Hlh2eKWarI3X29MgP5MxcxhJ8+X 1172247583
Received: from [192.168.2.36] (unknown [81.105.111.192])
	by mail.messagingengine.com (Postfix) with ESMTP id D22F27B58
	for <java-user@lucene.apache.org>; Fri, 23 Feb 2007 11:19:43 -0500 (EST)
Message-ID: <45DF1423.3070707@fastmail.fm>
Date: Fri, 23 Feb 2007 16:19:47 +0000
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To:  paul_t100@fastmail.fm
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
CC:  java-user@lucene.apache.org
Subject: Re: Can I use Lucene to retrieve a list of duplicates
References: <45DF055C.9050705@fastmail.fm> <359a92830702230722w19c441f5oe3d6fdd361ef23c@mail.gmail.com>
In-Reply-To: <359a92830702230722w19c441f5oe3d6fdd361ef23c@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks this might do it, but do I need to know the terms beforehand, I 
just want to return any terms with frequency more than one?

Erick Erickson wrote:
> Sure, you can use the TermDocs/TermEnum classes. Basically, for a term 
> (probably column value in your app) these let you quickly answer the 
> question "which (and how many) documents does this term appear in". 
> What you get is the Lucene doc id, which let's you fetch all the 
> information about the documents you want.
>
> Erick
>
> On 2/23/07, *Paul Taylor* <paul_t100@fastmail.fm 
> <mailto:paul_t100@fastmail.fm>> wrote:
>
>     Hi I have Java Swing application with a table, I was considering using
>     Lucene to index the data in the table. One task Id like to do is
>     for the
>     user to select 'Find Duplicate records for Column X', then I would
>     filter the table to show only records where there is more than one
>     with
>     the same value i.e duplicate for that column. Is there a way to return
>     all the duplicates from a Lucene index.
>
>     thanks paul Taylor
>
>     ---------------------------------------------------------------------
>     To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>     <mailto:java-user-unsubscribe@lucene.apache.org>
>     For additional commands, e-mail: java-user-help@lucene.apache.org
>     <mailto:java-user-help@lucene.apache.org>
>
>
> ------------------------------------------------------------------------
>
> Internal Virus Database is out-of-date.
> Checked by AVG Free Edition.
> Version: 7.1.394 / Virus Database: 268.16.5/616 - Release Date: 04/01/2007
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 23 16:21:53 2007
Return-Path: <java-user-return-26359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21959 invoked from network); 23 Feb 2007 16:21:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2007 16:21:52 -0000
Received: (qmail 16745 invoked by uid 500); 23 Feb 2007 16:21:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16717 invoked by uid 500); 23 Feb 2007 16:21:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16693 invoked by uid 99); 23 Feb 2007 16:21:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 08:21:53 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=FROM_HAS_ULINE_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.29] (HELO out5.smtp.messagingengine.com) (66.111.4.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 08:21:40 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id 9B2C61CEAC6
	for <java-user@lucene.apache.org>; Fri, 23 Feb 2007 11:21:19 -0500 (EST)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by out1.internal (MEProxy); Fri, 23 Feb 2007 11:21:19 -0500
X-Sasl-enc: vwblQi+z6YPGV5d37nab5AQFG3Q/iNq7Nij2xa5jySQD 1172247679
Received: from [192.168.2.36] (unknown [81.105.111.192])
	by mail.messagingengine.com (Postfix) with ESMTP id F0FEF15A64
	for <java-user@lucene.apache.org>; Fri, 23 Feb 2007 11:21:18 -0500 (EST)
Message-ID: <45DF1482.1020308@fastmail.fm>
Date: Fri, 23 Feb 2007 16:21:22 +0000
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To:  paul_t100@fastmail.fm
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Can I use Lucene to retrieve a list of duplicates
References: <45DF055C.9050705@fastmail.fm> <14D348DD-E87D-4035-B54D-7290C0953532@ehatchersolutions.com>
In-Reply-To: <14D348DD-E87D-4035-B54D-7290C0953532@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

yes Ive seen this before thanks, it was an article that referred to this 
that pointed me towards  lucene in the first place :)
Erik Hatcher wrote:
>
> On Feb 23, 2007, at 10:16 AM, Paul Taylor wrote:
>
>> Hi I have Java Swing application with a table, I was considering 
>> using Lucene to index the data in the table. One task Id like to do 
>> is for the user to select 'Find Duplicate records for Column X', then 
>> I would filter the table to show only records where there is more 
>> than one with the same value i.e duplicate for that column. Is there 
>> a way to return all the duplicates from a Lucene index.
>
> Check this stuff out: 
> <http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/swing/> - 
> might be of help.
>
>     Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> --Internal Virus Database is out-of-date.
> Checked by AVG Free Edition.
> Version: 7.1.394 / Virus Database: 268.16.5/616 - Release Date: 
> 04/01/2007
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 23 16:49:25 2007
Return-Path: <java-user-return-26360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32450 invoked from network); 23 Feb 2007 16:49:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2007 16:49:23 -0000
Received: (qmail 54748 invoked by uid 500); 23 Feb 2007 16:49:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54688 invoked by uid 500); 23 Feb 2007 16:49:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54677 invoked by uid 99); 23 Feb 2007 16:49:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 08:49:24 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_FONT_BIG,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 217.69.20.190 as permitted sender)
Received: from [217.69.20.190] (HELO cluster-d.mailcontrol.com) (217.69.20.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 08:49:09 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly25d.srv.mailcontrol.com (MailControl) with SMTP id l1NGmjif015931
	for <java-user@lucene.apache.org>; Fri, 23 Feb 2007 16:48:45 GMT
Received: From SGBD012104.wsatkins.com ([10.202.26.18]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 11722493083; Fri, 23 Feb 2007 16:48:28 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012104.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 23 Feb 2007 16:48:27 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C7576A.70BB8B64"
Subject: Index modification
Date: Fri, 23 Feb 2007 16:48:27 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705F07E0A@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Index modification
Thread-Index: AcdXanCbcfXz1iRnRey+V9jkCggrZg==
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 23 Feb 2007 16:48:27.0945 (UTC) FILETIME=[71207190:01C7576A]
X-Scanned-By: MailControl A-07-06-80 (www.mailcontrol.com) on 10.68.0.135
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7576A.70BB8B64
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi all,

I am using the IndexModifier class to perform index modification.  I
have deleted 1 document from an index and the output indicates that 1
document does indeed get deleted.  However, running the program again
reveals that the document deleted has appeared again in the index.  This
despite the fact that I close the IndexModifier after the deletion.
Does anyone know what I'm missing?  Here is my code:

       	Analyzer analyzer =3D new PorterAnalyzer();
            IndexModifier indexModifier =3D new IndexModifier("D:\\Index",
analyzer, false);
            Console.WriteLine(indexModifier.DocCount() + " docs in
index");
            //indexModifier.Delete(1);
            indexModifier.Delete(new Term("artist", "hot"));
            Console.WriteLine("Deleted a document");
            Console.WriteLine(indexModifier.DocCount() + " docs in
index");
            indexModifier.Close();

Cheers




This email and any attached files are confidential and copyright protected.=
 If you are not the addressee, any dissemination of this communication is s=
trictly prohibited. Unless otherwise expressly agreed in writing, nothing s=
tated in this communication shall be legally binding.

The ultimate parent company of the Atkins Group is WS Atkins plc.  Register=
ed in England No. 1885586.  Registered Office Woodcote Grove, Ashley Road, =
Epsom, Surrey KT18 5BW.

Consider the environment. Please don't print this e-mail unless you really =
need to.=20

------_=_NextPart_001_01C7576A.70BB8B64--

From java-user-return-26361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 23 18:38:20 2007
Return-Path: <java-user-return-26361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75614 invoked from network); 23 Feb 2007 18:38:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2007 18:38:18 -0000
Received: (qmail 17714 invoked by uid 500); 23 Feb 2007 18:38:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17681 invoked by uid 500); 23 Feb 2007 18:38:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 58628 invoked by uid 99); 23 Feb 2007 17:54:31 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of shalsey@verisign.com designates 216.168.239.74 as permitted sender)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Leaking org.apache.lucene.index.* objects
Date: Fri, 23 Feb 2007 18:53:55 +0100
Message-ID: <EB84F4B13FB22344803AC2EA8B7480C0010B0A9F@BER2WNEXMB01.vcorp.ad.vrsn.com>
In-Reply-To: <Pine.LNX.4.58.0702092206380.31317@hal.rescomp.berkeley.edu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Leaking org.apache.lucene.index.* objects
Thread-Index: AcdM2rfM1Lbl2T1PTFWCgR6LZ5LZlAKmI3+w
From: "Halsey, Stephen" <shalsey@verisign.com>
To: <java-user@lucene.apache.org>
Cc: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
X-OriginalArrivalTime: 23 Feb 2007 17:53:57.0186 (UTC) FILETIME=[97230A20:01C75773]
X-Virus-Checked: Checked by ClamAV on apache.org

Great, thanks a lot for that Hoss.  Glad to hear it has been fixed.

Steve.=20

>-----Original Message-----
>From: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20
>Sent: 10 February 2007 06:14
>To: java-user@lucene.apache.org
>Cc: Otis Gospodnetic
>Subject: RE: Leaking org.apache.lucene.index.* objects
>
>
>: Its funny, but I'm having a memory leak with Hibernate that=20
>I spent the
>: whole of yesterday banging my head against a wall about and so when
>: searching for emails with Leak in the title came across your message.
>: I'm probably going to hit the same problem as you for long running
>: multi-threaded lucene index updates so am very interested in this.  I
>
>: Just noticed this is from December, so may well be a bit late for
>: helping out?
>
>FYI: After his original post to java-user Otis then replied on=20
>java-dev where a lively discussion ensued, resulting in a=20
>FieldCache bug being discovered and fixed...
>
>http://www.nabble.com/ThreadLocal-leak-%28was-Re%3A-Leaking-org
>.apache.lucene.index.*-objects%29-tf2831090.html#a7953064
>
>
>
>
>-Hoss
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 23 18:54:27 2007
Return-Path: <java-user-return-26362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83808 invoked from network); 23 Feb 2007 18:54:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2007 18:54:25 -0000
Received: (qmail 45980 invoked by uid 500); 23 Feb 2007 18:54:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45950 invoked by uid 500); 23 Feb 2007 18:54:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45939 invoked by uid 99); 23 Feb 2007 18:54:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 10:54:26 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 10:54:15 -0800
Received: by nf-out-0910.google.com with SMTP id i2so897671nfe
        for <java-user@lucene.apache.org>; Fri, 23 Feb 2007 10:53:54 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Cpgca0I1fDTgyZmha9TNQE4ckgLbo/8qqy2fdA3h4ZCN57nXdcdx3DmsrjCzBepTSSRNYW3u/XoUVFu/6Q+U1omns4kgJoo+gO0osxKuGcSVU8BSY9fatIsRQ1yIT9DrKQ8534zVALB4WbGpnErL9cA67sP+vR+I9gyxWFWvThc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Xsx870e/h3wgY9Lttua8+KeeYUYk6tf4Hm9qHbfUDOmA2HM9t6nCxYOXsD/0WuCL0iMGPG6Dtlrr+c7ovGuwekV3YsC2IO3MGO5cN7entxNNBaKjc993LiIVPHGqyci0xW9bk9yAWW4kOX8TxHdSNBtpBgjdtT1fKITuYwE6v8U=
Received: by 10.82.116.15 with SMTP id o15mr910820buc.1172256834227;
        Fri, 23 Feb 2007 10:53:54 -0800 (PST)
Received: by 10.82.135.7 with HTTP; Fri, 23 Feb 2007 10:53:54 -0800 (PST)
Message-ID: <ab0709bf0702231053j60e59c0dtf28d7a81bfebcf7e@mail.gmail.com>
Date: Fri, 23 Feb 2007 13:53:54 -0500
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Leaking org.apache.lucene.index.* objects
In-Reply-To: <EB84F4B13FB22344803AC2EA8B7480C0010B0A9F@BER2WNEXMB01.vcorp.ad.vrsn.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_44600_11456816.1172256834195"
References: <Pine.LNX.4.58.0702092206380.31317@hal.rescomp.berkeley.edu>
	 <EB84F4B13FB22344803AC2EA8B7480C0010B0A9F@BER2WNEXMB01.vcorp.ad.vrsn.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_44600_11456816.1172256834195
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Are you flushing the session every so often with hibernate? If not you might
not have been experiencing Otis's bug -- if so, never mind <g>

- Mark

On 2/23/07, Halsey, Stephen <shalsey@verisign.com> wrote:
>
> Great, thanks a lot for that Hoss.  Glad to hear it has been fixed.
>
> Steve.
>
> >-----Original Message-----
> >From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
> >Sent: 10 February 2007 06:14
> >To: java-user@lucene.apache.org
> >Cc: Otis Gospodnetic
> >Subject: RE: Leaking org.apache.lucene.index.* objects
> >
> >
> >: Its funny, but I'm having a memory leak with Hibernate that
> >I spent the
> >: whole of yesterday banging my head against a wall about and so when
> >: searching for emails with Leak in the title came across your message.
> >: I'm probably going to hit the same problem as you for long running
> >: multi-threaded lucene index updates so am very interested in this.  I
> >
> >: Just noticed this is from December, so may well be a bit late for
> >: helping out?
> >
> >FYI: After his original post to java-user Otis then replied on
> >java-dev where a lively discussion ensued, resulting in a
> >FieldCache bug being discovered and fixed...
> >
> >http://www.nabble.com/ThreadLocal-leak-%28was-Re%3A-Leaking-org
> >.apache.lucene.index.*-objects%29-tf2831090.html#a7953064
> >
> >
> >
> >
> >-Hoss
> >
> >
> >---------------------------------------------------------------------
> >To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_44600_11456816.1172256834195--

From java-user-return-26363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 23 18:56:03 2007
Return-Path: <java-user-return-26363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85130 invoked from network); 23 Feb 2007 18:56:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2007 18:56:02 -0000
Received: (qmail 50532 invoked by uid 500); 23 Feb 2007 18:55:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50501 invoked by uid 500); 23 Feb 2007 18:55:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50486 invoked by uid 99); 23 Feb 2007 18:55:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 10:55:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [128.121.61.10] (HELO phizblip.com) (128.121.61.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 10:55:39 -0800
Received: from [10.0.11.108] (avaliable.octelecom.net [208.187.181.114] (may be forged))
	(authenticated bits=0)
	by phizblip.com (8.13.6.20060614/8.13.6) with ESMTP id l1NItIWt087032
	for <java-user@lucene.apache.org>; Fri, 23 Feb 2007 11:55:18 -0700 (MST)
Message-ID: <45DF381E.6000208@my-family.us>
Date: Fri, 23 Feb 2007 11:53:18 -0700
From: Shane <lucene-user@my-family.us>
User-Agent: Thunderbird 1.5.0.9 (X11/20070212)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Determining if index exists Lucene 2.1
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Prior to Lucene 2.1, I was using FSDirectory.getDirectory(String path, 
boolean create)|| inside of a try block to determine whether or not a 
directory existed.

With the deprecation of the above class call in Lucene 2.1,  I need a 
new method for determining the existence of an index.  I can just check 
to see if either of the files INDEX_PATH/segments or 
INDEX_PATH/segments.gen exist, but that doesn't seem like the best route.

Is there a function call to determine whether or not an index already 
exists?

Thanks,

Shane

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 23 18:58:00 2007
Return-Path: <java-user-return-26364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86525 invoked from network); 23 Feb 2007 18:57:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2007 18:57:59 -0000
Received: (qmail 58342 invoked by uid 500); 23 Feb 2007 18:57:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58313 invoked by uid 500); 23 Feb 2007 18:57:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58302 invoked by uid 99); 23 Feb 2007 18:57:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 10:57:59 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 10:57:48 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 5F3A15B766; Fri, 23 Feb 2007 10:57:28 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 525D47F403
	for <java-user@lucene.apache.org>; Fri, 23 Feb 2007 10:57:28 -0800 (PST)
Date: Fri, 23 Feb 2007 10:57:28 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: TextMining.org Word extractor
In-Reply-To: <45DE75F5.4070705@teamware.com>
Message-ID: <Pine.LNX.4.58.0702231056140.1259@hal.rescomp.berkeley.edu>
References: <45DE75F5.4070705@teamware.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org



googling...
	TextMining.org licence
...turns up lots of useful info, some from the archive of this list.


: Date: Fri, 23 Feb 2007 16:04:53 +1100
: From: Antony Bowesman <adb@teamware.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: TextMining.org Word extractor
:
: I'm extracting text from Word using TextMining.org extractors - it works better
: than POI because it extracts Word 6/95 as well as 97-2002, which POI cannot do.
:   However, I'm trying to find out about licence issues with the TM jar. The TM
: website seems to be permanently hacked these days.
:
: Anyone know?
:
: Also, has anyone come up with a good solution for extracting data from
: fast-saved files, something that neither TM nor POI can do.
:
: Antony
:
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 23 18:58:30 2007
Return-Path: <java-user-return-26365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86790 invoked from network); 23 Feb 2007 18:58:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2007 18:58:29 -0000
Received: (qmail 60185 invoked by uid 500); 23 Feb 2007 18:58:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60147 invoked by uid 500); 23 Feb 2007 18:58:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60136 invoked by uid 99); 23 Feb 2007 18:58:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 10:58:30 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 10:58:18 -0800
Received: by nf-out-0910.google.com with SMTP id i2so898573nfe
        for <java-user@lucene.apache.org>; Fri, 23 Feb 2007 10:57:55 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=IMx3eZW7cUUqtAmVeuhdD5AO88W8X+9Yoi2HheAuf+0Wcjl6dfzNpbaeoZNdmrzzctxG8NV0Sk2YG6qnDya2eZzAhRZcDdSALnmaLCgE3+ZxcWzN4SbannpJDqACtenE/FK1H45sfqmaA5oG6rU0dBatS1Iuvn4HRalIKGsUYO4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=Gg3QbfnJw2b9CcUCltlj8CiHURpqQA1cUd4rP1EiCMdhUlufk5RV5GQ/16quayyypHZvtePAg5n3+xHreg6cObH3/COHxAhl43LAinimSJ9gCoM/bPbilcUy1Hsi3NRJFPaeeYqB/st1/KY3MRuwJ0GExrDGlx8isfkjiwHyv6w=
Received: by 10.48.202.18 with SMTP id z18mr6624541nff.1172257075691;
        Fri, 23 Feb 2007 10:57:55 -0800 (PST)
Received: from ?192.168.1.2? ( [83.249.110.75])
        by mx.google.com with ESMTP id l32sm10624647nfa.2007.02.23.10.57.54;
        Fri, 23 Feb 2007 10:57:55 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <45DF381E.6000208@my-family.us>
References: <45DF381E.6000208@my-family.us>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <BCB632A7-18F8-4975-90CF-1435284B202E@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Determining if index exists Lucene 2.1
Date: Fri, 23 Feb 2007 19:56:04 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


23 feb 2007 kl. 19.53 skrev Shane:
>
> Is there a function call to determine whether or not an index  
> already exists?

<http://lucene.apache.org/java/docs/api/org/apache/lucene/index/ 
IndexReader.html#indexExists(org.apache.lucene.store.Directory)>

HTH

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 23 18:59:05 2007
Return-Path: <java-user-return-26366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86994 invoked from network); 23 Feb 2007 18:59:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2007 18:59:04 -0000
Received: (qmail 62238 invoked by uid 500); 23 Feb 2007 18:59:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62016 invoked by uid 500); 23 Feb 2007 18:59:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62005 invoked by uid 99); 23 Feb 2007 18:59:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 10:59:04 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.29] (HELO out5.smtp.messagingengine.com) (66.111.4.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 10:58:52 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id DCAB11D029D
	for <java-user@lucene.apache.org>; Fri, 23 Feb 2007 13:58:31 -0500 (EST)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by out1.internal (MEProxy); Fri, 23 Feb 2007 13:58:31 -0500
X-Sasl-enc: DLQJBdmLlbN5TMRFEmJ7ADV5X5Wt5Wul5y6t0K0EqYCZ 1172257111
Received: from [9.34.99.107] (bi01pt1.ct.us.ibm.com [129.33.1.37])
	by mail.messagingengine.com (Postfix) with ESMTP id 7F34F15ACF
	for <java-user@lucene.apache.org>; Fri, 23 Feb 2007 13:58:31 -0500 (EST)
Message-ID: <45DF3955.2050500@mikemccandless.com>
Date: Fri, 23 Feb 2007 13:58:29 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Determining if index exists Lucene 2.1
References: <45DF381E.6000208@my-family.us>
In-Reply-To: <45DF381E.6000208@my-family.us>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Shane wrote:

> Prior to Lucene 2.1, I was using FSDirectory.getDirectory(String path, 
> boolean create)|| inside of a try block to determine whether or not a 
> directory existed.
> 
> With the deprecation of the above class call in Lucene 2.1,  I need a 
> new method for determining the existence of an index.  I can just check 
> to see if either of the files INDEX_PATH/segments or 
> INDEX_PATH/segments.gen exist, but that doesn't seem like the best route.
> 
> Is there a function call to determine whether or not an index already 
> exists?

You want IndexReader.indexExists(...).

Also you may want to use the new constructors to IndexWriter that create
a new index if there isn't one already, else open the existing one.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 23 19:00:49 2007
Return-Path: <java-user-return-26367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87761 invoked from network); 23 Feb 2007 19:00:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2007 19:00:48 -0000
Received: (qmail 67701 invoked by uid 500); 23 Feb 2007 19:00:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67663 invoked by uid 500); 23 Feb 2007 19:00:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67652 invoked by uid 99); 23 Feb 2007 19:00:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 11:00:48 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [62.213.161.130] (HELO redhat.sirma.bg) (62.213.161.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 11:00:37 -0800
Received: from [192.168.128.140] ([192.168.128.140])
	(authenticated bits=0)
	by redhat.sirma.bg (8.12.7/8.12.7/Sirma Linux 0.6) with ESMTP id l1NJ0Bct001686
	for <java-user@lucene.apache.org>; Fri, 23 Feb 2007 21:00:11 +0200
Message-ID: <45DF39BA.2000100@sirma.bg>
Date: Fri, 23 Feb 2007 21:00:10 +0200
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Multy Language documents indexing
References: <45DD94D0.8010901@sirma.bg> <359a92830702220511h2562eeees83324bddf08c9818@mail.gmail.com>
In-Reply-To: <359a92830702220511h2562eeees83324bddf08c9818@mail.gmail.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Scanned: by Sirma Antivirus System             
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Erik,
Here I describe about my research on this problem. It might be helpful 
for someone :)
I will divide the problem with multiple language docs in some subproblems:
*1. Determining the language in the text documents.
1.1. Determining the language in document when the whole text is in one 
and the same language.*
In the Lucene forum I found the following links to sites which provide 
tools for fulfilling this task.
http://odur.let.rug.nl/~vannoord/TextCat/
*_http://frank.spieleck.de/ngram/_*
I have made some tests with the first one and the results for English 
and German are 100% guess but for Russian 0% guess (I used the the 
encoding windows 1251 which is claimed to be supported for the Russian 
text recognition).
Link to this demo 
<http://odur.let.rug.nl/%7Evannoord/TextCat/Demo/>http://odur.let.rug.nl/~vannoord/TextCat/Demo/ 
<http://odur.let.rug.nl/%7Evannoord/TextCat/Demo/> 
<http://odur.let.rug.nl/%7Evannoord/TextCat/Demo/>
Other similar sites at: 
<http://odur.let.rug.nl/%7Evannoord/TextCat/Demo/>_http://odur.let.rug.nl/~vannoord/TextCat/competitors.html_ 
<http://odur.let.rug.nl/%7Evannoord/TextCat/competitors.html>
Note that it is important that when indexing the proper Analyzer will be 
chosen when creating Indexer because when searching with a searcher that 
uses not proper analyzer then the results bight be not correct. Example: 
If we index German document using Lucene GermanAnalyzer and then we 
search some German word in the doc by using StandardAnalyzer in is 
possible the word is not found.

*1.2. Determining the language in document when the some part of the 
text in a document is in one language other in a different language.*
I did not found tools for this neither free not commercial.

*2. How to keep the terms for documents when each document is in 
different language.*
There was a discussion about this in this forum and the approach that I 
best like is the one suggested in the mail 
http://mail-archives.apache.org/mod_mbox/lucene-java-dev/200211.mbox/%3c20021118032236.35558.qmail@web12704.mail.yahoo.com%3e 
<http://mail-archives.apache.org/mod_mbox/lucene-java-dev/200211.mbox/%3C20021118032236.35558.qmail@web12704.mail.yahoo.com%3E>
It suggests to index all the docs in one index no matter which analyzer 
we use.
I have done some tests with indexing in this way (see the attached 
source files and sample text files  names of the sample text files are 
important  they are hard coded in the sources to avoid using language 
recognizer  I did not have enough time to use it.)

*3. The encoding of the documents.*
There is another thing that is important  encoding for plain text 
documents written in different languages. It is important when indexing 
to know the encoding of the plain text documents otherwise the results 
are incorrect. For example when some document is encoded in ISO-8859-1 
 and when creating index we wrongly decide it is in UTF-16  then the 
results of searching are wrong.
So may be we have to write also some class(es) that will determine the 
right encoding of the document based on its BOM or if missing on the 
text contained in it.
Just some fun: MS Notepad has a bug in this sense - when the file 
created by Notepad contains exactly one of this texts: this app can 
break OR tuka ima golem bug (without line separator) then the same 
Notepad can not read it (unlike Wordpad or other programs) :). The 
second in Bulgarian means here is a big bug.

Best Regards,
Ivan Vasilev


Erick Erickson wrote:
> I know this has been discussed several times, but sure don't remember the
> answers. Search the mail archive for "multiple languages" and you'll find
> some good suggestions. But as I remember, it's not a trivial issue.
>
> But I don't see why the "three different documents" approach wouldn't 
> work.
> You could also index the same text in three different fields in a single
> document, using different language analyzers for each (See
> PerFieldAnalyzerWrapper).....
>
> Erick
>
> On 2/22/07, Ivan Vasilev <ivasilev@sirma.bg> wrote:
>>
>> Hi All,
>>
>> Our application that uses Lucene for indexing will be used to index
>> documents that each of which contains parts written in different
>> languages. For example some document could contain English, Chinese and
>> Brazilian text. So how to index such document? Is there some best
>> practice to do this?
>>
>> What comes in my mind is to index 3 different Lucene Documents for the
>> real document and keep in a database the meta info that these 3
>> Documents are related to our real doc. For example for the myDoc.doc we
>> will have in the index myDocEn.doc, myDocCn.doc and myDocBr.doc and when
>> making search when the searched word is found in myDocCn.doc we will
>> visualize to user myDoc.doc. Disadvantage here is that in this case the
>> occurrences of the searched item will have to be recalculated. It is
>> important for queries like "Red NEAR/10 fox". So if someone knows better
>> practice than this, please let me help.
>>
>> Tanks in advance,
>> Ivan
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 23 20:26:30 2007
Return-Path: <java-user-return-26368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22682 invoked from network); 23 Feb 2007 20:26:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2007 20:26:29 -0000
Received: (qmail 10960 invoked by uid 500); 23 Feb 2007 20:26:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10596 invoked by uid 500); 23 Feb 2007 20:26:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10585 invoked by uid 99); 23 Feb 2007 20:26:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 12:26:30 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [207.105.204.41] (HELO codecore.com) (207.105.204.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 12:26:18 -0800
Received: from [192.168.0.50] (adsl-75-17-183-76.dsl.irvnca.sbcglobal.net [75.17.183.76])
	by codecore.com (Postfix) with ESMTP id DAFFC143CE
	for <java-user@lucene.apache.org>; Fri, 23 Feb 2007 12:28:57 -0800 (PST)
Message-ID: <45DF4DD0.7010105@tkz.net>
Date: Fri, 23 Feb 2007 12:25:52 -0800
From: "Paul Sundling (Webdaddy)" <tkz@tkz.net>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: filtering by first letter
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I have a requirement to support filtering search results by first letter. 

This is relatively simple by adding a field to each index that 
represents the first letter for that relevant index and then adding a 
filter to the search.

The hard part is that I need to list all the letters you can filter BY.  
So if there are no names that start with S, it shouldn't appear as an 
option. 

Is there a simple and performant way to get a set of all the unique 
values for a Field in the Hits returned?  There would probably only be 
low number of unique values.

So let's say I have the following in my index:

letter, personName
m, mike smith
p, paul smith
g, george smith
g, glenda smith

I need to be able to display to the user that they can filter based on  
M, P or G within their search for George.

I could do a compromise and for search results above a certain level, 
show all letters and numbers, but it won't always give correct values.  
Imagine this edge case: A search for george has 50,000 results, but only 
a couple people had george as their last name.  Not many of the letters 
would be valid filters.

Thanks for any ideas or approaches I overlooked.

Paul Sundling


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 23 21:40:20 2007
Return-Path: <java-user-return-26369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50295 invoked from network); 23 Feb 2007 21:40:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2007 21:40:19 -0000
Received: (qmail 4700 invoked by uid 500); 23 Feb 2007 21:40:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4674 invoked by uid 500); 23 Feb 2007 21:40:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4651 invoked by uid 99); 23 Feb 2007 21:40:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 13:40:16 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.132.244 as permitted sender)
Received: from [209.85.132.244] (HELO an-out-0708.google.com) (209.85.132.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 13:40:05 -0800
Received: by an-out-0708.google.com with SMTP id c3so441865ana
        for <java-user@lucene.apache.org>; Fri, 23 Feb 2007 13:39:44 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ig8LmqUd5Kix2dszMnO3nYs1AUo+mRDxHK2Xh9dtO3Na77ZVH4Cwxp3VCG1tr+S4iOl1tlDh6ktrGBz12oABsolqaqO0+k0ZYhogxYY+MylI5NB1Hsa2q6MPXxm/0FzCLrNow/MiLKHlQhewFEdHHVS2cQXGscvtNXb4vXpP0WA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZZZ7b/mS3Lz9u6/Wh/dk8pt8J2yThg3f3cYsT7Q5Tr+3QGC4MCAmkaFl4FUOD4jYDJNAyXb/77zhxPOZ77zLCUM4ENBTwWAbM9/lEf5AMp0wy1cxqYb7oFNLuUqxrsKI7uqespy921o4INoCuOnZvdxsS+Vf51RVBfSF+vIC+nI=
Received: by 10.114.12.9 with SMTP id 9mr1241717wal.1172266783184;
        Fri, 23 Feb 2007 13:39:43 -0800 (PST)
Received: by 10.114.58.3 with HTTP; Fri, 23 Feb 2007 13:39:43 -0800 (PST)
Message-ID: <359a92830702231339i605ab4e7i8a70658c1e9eda2f@mail.gmail.com>
Date: Fri, 23 Feb 2007 16:39:43 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: filtering by first letter
In-Reply-To: <45DF4DD0.7010105@tkz.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_68069_27782855.1172266783117"
References: <45DF4DD0.7010105@tkz.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_68069_27782855.1172266783117
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See TermEnum (I don't think you need TermDocs for this). If you instantiate
a TermEnum(new Term("firstletterfield", "")), it'll enumerate all the terms
in your 'firstletter' field and you can just collect them and go...

For that matter, and assuming that your names are UN_TOKENIZED, you could do
something like this without a special field by iterating over your
personName field. This might be reasonable if your index is fairly static
and you could create this list at IndexReader open time, especially since
you can use TermEnum.skipTo("personName", "a") etc.....

Best
Erick

On 2/23/07, Paul Sundling (Webdaddy) <tkz@tkz.net> wrote:
>
> I have a requirement to support filtering search results by first letter.
>
> This is relatively simple by adding a field to each index that
> represents the first letter for that relevant index and then adding a
> filter to the search.
>
> The hard part is that I need to list all the letters you can filter BY.
> So if there are no names that start with S, it shouldn't appear as an
> option.
>
> Is there a simple and performant way to get a set of all the unique
> values for a Field in the Hits returned?  There would probably only be
> low number of unique values.
>
> So let's say I have the following in my index:
>
> letter, personName
> m, mike smith
> p, paul smith
> g, george smith
> g, glenda smith
>
> I need to be able to display to the user that they can filter based on
> M, P or G within their search for George.
>
> I could do a compromise and for search results above a certain level,
> show all letters and numbers, but it won't always give correct values.
> Imagine this edge case: A search for george has 50,000 results, but only
> a couple people had george as their last name.  Not many of the letters
> would be valid filters.
>
> Thanks for any ideas or approaches I overlooked.
>
> Paul Sundling
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_68069_27782855.1172266783117--

From java-user-return-26370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 23 22:47:27 2007
Return-Path: <java-user-return-26370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73603 invoked from network); 23 Feb 2007 22:47:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2007 22:47:26 -0000
Received: (qmail 6642 invoked by uid 500); 23 Feb 2007 22:47:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6604 invoked by uid 500); 23 Feb 2007 22:47:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6584 invoked by uid 99); 23 Feb 2007 22:47:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 14:47:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 14:47:15 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 69D575B766; Fri, 23 Feb 2007 14:46:55 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 651797F403;
	Fri, 23 Feb 2007 14:46:55 -0800 (PST)
Date: Fri, 23 Feb 2007 14:46:55 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org, paul_t100@fastmail.fm
Subject: Re: Can I use Lucene to retrieve a list of duplicates
In-Reply-To: <45DF1423.3070707@fastmail.fm>
Message-ID: <Pine.LNX.4.58.0702231446220.6828@hal.rescomp.berkeley.edu>
References: <45DF055C.9050705@fastmail.fm> <359a92830702230722w19c441f5oe3d6fdd361ef23c@mail.gmail.com>
 <45DF1423.3070707@fastmail.fm>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Thanks this might do it, but do I need to know the terms beforehand, I
: just want to return any terms with frequency more than one?

no, TermEnum will let you iterate over all the terms ... you don't even
need TermDocs if you just want the docFreq for each term (which would be 1
if there are no duplicates)

: Erick Erickson wrote:
: > Sure, you can use the TermDocs/TermEnum classes. Basically, for a term
: > (probably column value in your app) these let you quickly answer the
: > question "which (and how many) documents does this term appear in".
: > What you get is the Lucene doc id, which let's you fetch all the
: > information about the documents you want.
: >
: > Erick
: >
: > On 2/23/07, *Paul Taylor* <paul_t100@fastmail.fm
: > <mailto:paul_t100@fastmail.fm>> wrote:
: >
: >     Hi I have Java Swing application with a table, I was considering using
: >     Lucene to index the data in the table. One task Id like to do is
: >     for the
: >     user to select 'Find Duplicate records for Column X', then I would
: >     filter the table to show only records where there is more than one
: >     with
: >     the same value i.e duplicate for that column. Is there a way to return
: >     all the duplicates from a Lucene index.
: >
: >     thanks paul Taylor
: >
: >     ---------------------------------------------------------------------
: >     To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: >     <mailto:java-user-unsubscribe@lucene.apache.org>
: >     For additional commands, e-mail: java-user-help@lucene.apache.org
: >     <mailto:java-user-help@lucene.apache.org>
: >
: >
: > ------------------------------------------------------------------------
: >
: > Internal Virus Database is out-of-date.
: > Checked by AVG Free Edition.
: > Version: 7.1.394 / Virus Database: 268.16.5/616 - Release Date: 04/01/2007
: >
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 23 22:52:37 2007
Return-Path: <java-user-return-26371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75213 invoked from network); 23 Feb 2007 22:52:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2007 22:52:36 -0000
Received: (qmail 15645 invoked by uid 500); 23 Feb 2007 22:52:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15616 invoked by uid 500); 23 Feb 2007 22:52:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15605 invoked by uid 99); 23 Feb 2007 22:52:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 14:52:37 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 14:52:26 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 4D68F5B766; Fri, 23 Feb 2007 14:52:06 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 4B29A7F403
	for <java-user@lucene.apache.org>; Fri, 23 Feb 2007 14:52:06 -0800 (PST)
Date: Fri, 23 Feb 2007 14:52:06 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: search on colon ":" ending words
In-Reply-To: <20070223043758.82682.qmail@web83510.mail.sp1.yahoo.com>
Message-ID: <Pine.LNX.4.58.0702231447590.6828@hal.rescomp.berkeley.edu>
References: <20070223043758.82682.qmail@web83510.mail.sp1.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


:   String newquery = query.replace(query, ": ", " ");

you should be able to usea regex like so...

    String newquery = query.replaceAll(":\\b", "\\\\:");

...(i may have some extra/missing backslashes) to ensure that literal ":"
in your input which are followed by word boundaries are "escaped" fro mteh
query parser ... that way if your analyzer doesn't strip out the ":"
things will still work, and ":" at the end of your input will be properly
escaped (your current string replace will fail in this case)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 23 22:58:10 2007
Return-Path: <java-user-return-26372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77026 invoked from network); 23 Feb 2007 22:58:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2007 22:58:09 -0000
Received: (qmail 25612 invoked by uid 500); 23 Feb 2007 22:58:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25579 invoked by uid 500); 23 Feb 2007 22:58:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25568 invoked by uid 99); 23 Feb 2007 22:58:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 14:58:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 14:57:57 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 7BCCE5B766; Fri, 23 Feb 2007 14:57:37 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 789957F403
	for <java-user@lucene.apache.org>; Fri, 23 Feb 2007 14:57:37 -0800 (PST)
Date: Fri, 23 Feb 2007 14:57:37 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: Index maintainance
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705F07AEC@SGBLOW2101.wsatkins.com>
Message-ID: <Pine.LNX.4.58.0702231453580.6828@hal.rescomp.berkeley.edu>
References: <BC1CFC544422CB4A934908E126A4742705F07945@SGBLOW2101.wsatkins.com>
 <359a92830702230643l3501fdb4g761bc6d630bd67a1@mail.gmail.com>
 <45DF0316.2000502@mikemccandless.com> <BC1CFC544422CB4A934908E126A4742705F07AEC@SGBLOW2101.wsatkins.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I've just been looking at IndexReader and it seems you can do it using
: that, but I don't know which concrete implementation of IndexReader to
: use.

there is a static factory method for opening an IndexReader in the
IndexReader class (you can't call the constructors directly)

please go through the Lucene-Java tutorial and read the corrisponding demo
code ... it covers topics like these.

beyond that i don't know anyone who won't recomend you get a copy of LIA
and read it cover to cover...

http://lucene.apache.org/java/docs/gettingstarted.html
http://lucenebook.com/



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 23 23:00:43 2007
Return-Path: <java-user-return-26373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77739 invoked from network); 23 Feb 2007 23:00:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2007 23:00:42 -0000
Received: (qmail 29990 invoked by uid 500); 23 Feb 2007 23:00:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29953 invoked by uid 500); 23 Feb 2007 23:00:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29941 invoked by uid 99); 23 Feb 2007 23:00:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 15:00:44 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 15:00:33 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 8EED25B772; Fri, 23 Feb 2007 15:00:13 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 8A37F7F403
	for <java-user@lucene.apache.org>; Fri, 23 Feb 2007 15:00:13 -0800 (PST)
Date: Fri, 23 Feb 2007 15:00:13 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Index modification
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705F07E0A@SGBLOW2101.wsatkins.com>
Message-ID: <Pine.LNX.4.58.0702231459240.6828@hal.rescomp.berkeley.edu>
References: <BC1CFC544422CB4A934908E126A4742705F07E0A@SGBLOW2101.wsatkins.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


you should check the return count from deleteDocuments ... if i had to
guess i would say that your analyzer is steming the input in such a way
that your indexed terms don't match the Term you are trying to delete on.


: Date: Fri, 23 Feb 2007 16:48:27 -0000
: From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Index modification
:
: Hi all,
:
: I am using the IndexModifier class to perform index modification.  I
: have deleted 1 document from an index and the output indicates that 1
: document does indeed get deleted.  However, running the program again
: reveals that the document deleted has appeared again in the index.  This
: despite the fact that I close the IndexModifier after the deletion.
: Does anyone know what I'm missing?  Here is my code:
:
:        	Analyzer analyzer = new PorterAnalyzer();
:             IndexModifier indexModifier = new IndexModifier("D:\\Index",
: analyzer, false);
:             Console.WriteLine(indexModifier.DocCount() + " docs in
: index");
:             //indexModifier.Delete(1);
:             indexModifier.Delete(new Term("artist", "hot"));
:             Console.WriteLine("Deleted a document");
:             Console.WriteLine(indexModifier.DocCount() + " docs in
: index");
:             indexModifier.Close();
:
: Cheers
:
:
:
:
: This email and any attached files are confidential and copyright protected. If you are not the addressee, any dissemination of this communication is strictly prohibited. Unless otherwise expressly agreed in writing, nothing stated in this communication shall be legally binding.
:
: The ultimate parent company of the Atkins Group is WS Atkins plc.  Registered in England No. 1885586.  Registered Office Woodcote Grove, Ashley Road, Epsom, Surrey KT18 5BW.
:
: Consider the environment. Please don't print this e-mail unless you really need to.
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 24 00:18:12 2007
Return-Path: <java-user-return-26374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94353 invoked from network); 24 Feb 2007 00:18:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Feb 2007 00:18:12 -0000
Received: (qmail 21223 invoked by uid 500); 24 Feb 2007 00:18:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21196 invoked by uid 500); 24 Feb 2007 00:18:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21173 invoked by uid 99); 24 Feb 2007 00:18:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 16:18:15 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 16:18:04 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 28FD85B766; Fri, 23 Feb 2007 16:17:43 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 24B1E7F403
	for <java-user@lucene.apache.org>; Fri, 23 Feb 2007 16:17:43 -0800 (PST)
Date: Fri, 23 Feb 2007 16:17:43 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: ConstantScoreQuery and MatchAllDocsQuery
In-Reply-To: <0JDW004PK0UTOKI0@VL-MH-MR002.ip.videotron.ca>
Message-ID: <Pine.LNX.4.58.0702231603370.23821@hal.rescomp.berkeley.edu>
References: <0JDW004PK0UTOKI0@VL-MH-MR002.ip.videotron.ca>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org



: I ask this because I need to return the frequency of the search terms
: with each of my results, I tried using the TermFreqVector object but
: unfortunately it was not fast enough, so I decided to modifiy lucene to
: be able to return the frequency the same way the score is returned by
: org.apache.lucene.search.Hits.
	...
: I started by adding public abstract int freq(); in package
: org.apache.lucene.search.Scorerabstract class, and then modified
: everyimplementation of Scorer to be able to get the frequency.

can you elaborate on:
 * how you were trying to use TermFreqVector
 * how you define "fast enough"
 * how you are now getting the freq() value in all of the Scorer classes?

If all you need to know is the frequency of each term in your query (and
not hte frequency of all terms in teh document) did you try using the
freq() method in the TermDocs iterator instead of the TermFreqVector
class?

using Query.extractTerms, and then getting a TermDocs instance
and iterating over those terms using seek and over the docids from your
results using skipTo should be an extremely fast way to get the freq()
info.

: It works well and fast, the only problem I have is that I did not find a
: way to compute the frequency in both ConstantScoreQuery.java and
: MatchAllDocsQuery.java internal scorers.

neither of those queries involve any terms, so i'm not sure what freq()
would even make sense ... "1" or "0" i would imagine.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 24 05:54:05 2007
Return-Path: <java-user-return-26375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68102 invoked from network); 24 Feb 2007 05:54:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Feb 2007 05:54:04 -0000
Received: (qmail 39431 invoked by uid 500); 24 Feb 2007 05:54:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39388 invoked by uid 500); 24 Feb 2007 05:54:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39377 invoked by uid 99); 24 Feb 2007 05:54:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 21:54:05 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.155 as permitted sender)
Received: from [195.212.29.155] (HELO mtagate6.de.ibm.com) (195.212.29.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Feb 2007 21:53:52 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate6.de.ibm.com (8.13.8/8.13.8) with ESMTP id l1O5rUkW230424
	for <java-user@lucene.apache.org>; Sat, 24 Feb 2007 05:53:30 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.2) with ESMTP id l1O5rUZk1974344
	for <java-user@lucene.apache.org>; Sat, 24 Feb 2007 06:53:30 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l1O5rULU024364
	for <java-user@lucene.apache.org>; Sat, 24 Feb 2007 06:53:30 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l1O5rTGp024361
	for <java-user@lucene.apache.org>; Sat, 24 Feb 2007 06:53:29 +0100
In-Reply-To: <Pine.LNX.4.58.0702222127460.17712@hal.rescomp.berkeley.edu>
Subject: Re: QueryParser bug?
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFC54DA797.F557FF44-ON8825728C.001FCEE0-8825728C.00201DA6@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Fri, 23 Feb 2007 21:50:47 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 24/02/2007 07:53:29
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Antony,

Could you try the patch in
http://issues.apache.org/jira/browse/LUCENE-813

Thanks,
Doron

Chris Hostetter <hossman_lucene@fucit.org> wrote on 22/02/2007 22:01:00:

>
> : than just on/off), but the original QP shows the problem with
> : setAllowLeadingWildcard(true).  The compiled JavaCC code will
> always create a
> : PrefixQuery if the last character is *, regardless of any other
wildcard
> : characters before it.  Therefore the query is based on the Term:
>
> Yep, definitely a bug...
>
> http://issues.apache.org/jira/browse/LUCENE-813
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 24 23:25:45 2007
Return-Path: <java-user-return-26376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30401 invoked from network); 24 Feb 2007 23:25:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Feb 2007 23:25:43 -0000
Received: (qmail 17615 invoked by uid 500); 24 Feb 2007 23:25:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17576 invoked by uid 500); 24 Feb 2007 23:25:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17562 invoked by uid 99); 24 Feb 2007 23:25:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 24 Feb 2007 15:25:46 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [140.142.33.4] (HELO mxout2.cac.washington.edu) (140.142.33.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 24 Feb 2007 15:25:34 -0800
Received: from smtp.washington.edu (smtp.washington.edu [140.142.33.9] (may be forged))
	by mxout2.cac.washington.edu (8.13.7+UW06.06/8.13.7+UW06.09) with ESMTP id l1ONPEaV030879
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=OK)
	for <java-user@lucene.apache.org>; Sat, 24 Feb 2007 15:25:14 -0800
X-Auth-Received: from [192.168.2.100] (c-67-183-31-26.hsd1.wa.comcast.net [67.183.31.26])
	(authenticated authid=raghavks)
	by smtp.washington.edu (8.13.7+UW06.06/8.13.7+UW06.09) with ESMTP id l1ONPDZq019191
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NOT)
	for <java-user@lucene.apache.org>; Sat, 24 Feb 2007 15:25:14 -0800
Message-ID: <45E0C959.5030709@u.washington.edu>
Date: Sat, 24 Feb 2007 15:25:13 -0800
From: Raghavan Srinivasan <raghavks@u.washington.edu>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: pyLucene and indexes
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.3.0.289146, Antispam-Engine: 2.5.0.283055, Antispam-Data: 2007.2.24.151433
X-Uwash-Spam: Gauge=IIIIIII, Probability=7%, Report='__CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Have anyone on this forum successfully created indexes using pyLucene 
and then read it using the Java API . I realize this ought to be 
theoretically possible, but i don't have a lot of time left in my 
current project to chase down bugs . It would be very helpful to know if 
someone has succeeded with this on Lucene 2.0 .

Thanks,
Raghavan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 25 03:29:31 2007
Return-Path: <java-user-return-26377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81529 invoked from network); 25 Feb 2007 03:29:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2007 03:29:31 -0000
Received: (qmail 47249 invoked by uid 500); 25 Feb 2007 03:29:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47212 invoked by uid 500); 25 Feb 2007 03:29:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47200 invoked by uid 99); 25 Feb 2007 03:29:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 24 Feb 2007 19:29:33 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mrs.nospam@gmail.com designates 64.233.162.231 as permitted sender)
Received: from [64.233.162.231] (HELO nz-out-0506.google.com) (64.233.162.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 24 Feb 2007 19:29:22 -0800
Received: by nz-out-0506.google.com with SMTP id i1so840264nzh
        for <java-user@lucene.apache.org>; Sat, 24 Feb 2007 19:29:01 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mK1e9EfkteBAdjrycFol8FpYzG5GdppQBUkYTNL2r0iHFJTJmtzhrgzwC6OWGKDDeDTLN+xRwXG6COVwYLOVGj6pb/BpBv5ko4mcDp8aO/BrDm8wsxb/5bSgORh7nOI3HEBvX8uTEWqT56YupaClEqxrJ69rHy6TAWIq4Mi/ETM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=i4ztimBnmNhHQMRWjAT04BuTtBXxnqlt8lS+xzII0AuNAOR5lDg0RuXzEcJLklCRYdjAdOvzgb1Ny/5Z6Aw7AQyMqSaEIZxN0+9LcMTx+WPb3vYsGZPxqsm4TS8Zyl23y2LE8HZ8BO2Mnx68XewB3dtYVCSj+Pkdf9e5uc2RSn0=
Received: by 10.114.12.9 with SMTP id 9mr1650224wal.1172374140293;
        Sat, 24 Feb 2007 19:29:00 -0800 (PST)
Received: by 10.114.195.10 with HTTP; Sat, 24 Feb 2007 19:29:00 -0800 (PST)
Message-ID: <bd818c7b0702241929l31c262e9l891bfeb486f94efc@mail.gmail.com>
Date: Sat, 24 Feb 2007 22:29:00 -0500
From: "no spam" <mrs.nospam@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: updating index
In-Reply-To: <359a92830702211602k5214be53r81a81d776feec362@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_62952_16396718.1172374140245"
References: <bd818c7b0702211442i78a202d7y8d527b12dbf441f6@mail.gmail.com>
	 <359a92830702211602k5214be53r81a81d776feec362@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_62952_16396718.1172374140245
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I didn't fully understand your last post and why I wanted to do
IndexReader.terms() then IndexReader.termDocs().  Won't something like this
work?

        for (Business biz : updates)
        {
            Term t = new Term("id", biz.getId()+"");
            TermDocs tDocs = reader.termDocs(t);

            while (tDocs.next())
            {
                Document doc = reader.document(tDocs.doc());
            }
        }

But tDocs never contains any docs.   Is this because I've indexed my pk like
this:

 doc.add(new Field("id", biz.getId(), Field.Store.YES, Field.Index.NO));

instead of

 doc.add(new Field("id", biz.getId(), Field.Store.YES,
Field.Index.UNTOKENIZED));

Mark

On 2/21/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> I think you can get MUCH better efficiency by using TermEnum/TermDocs. But
> I
> think you need to index (UN_TOKENIZED) your primary key (although now I'm
> not sure. But I'd be surprised if TermEnum worked with un-indexed data.
> Still, it'd be worth trying but I've always assumed that TermEnums only
> worked on indexed fields....).....
>
> Anyway, your loop looks more like this...
>
> TermEnum terms = IndexReader.terms(new Term("primarykey", ""));
> TermDocs tDocs = IndexRreader.termDocs();
>
> while (terms.next()) {
>    if (docsToUpdate.contains(terms.text()) {
>        tDocs.seek(terms.term());
>        writer.updateDocument(tDocs.doc());
>    }
> }
>
> NOTE: I've been fast and loose with edge conditions, like insuring that
> while (terms.next()) doesn't skip the first term, so caveat emptor....
> This
> loop also assumes that there is one and only one document in your index
> with
> the primary key. Otherwise, you have to do some more work with the
> TermDocs
> class to process each document that has your primary key...
>
> This is similar to creating Lucene filters, which is very fast....
>
> Hope this helps
> Erick
>
>
>
>

------=_Part_62952_16396718.1172374140245--

From java-user-return-26378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 25 04:27:40 2007
Return-Path: <java-user-return-26378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96956 invoked from network); 25 Feb 2007 04:27:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2007 04:27:39 -0000
Received: (qmail 68373 invoked by uid 500); 25 Feb 2007 04:27:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68335 invoked by uid 500); 25 Feb 2007 04:27:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68324 invoked by uid 99); 25 Feb 2007 04:27:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 24 Feb 2007 20:27:42 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SUBJ_ALL_CAPS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [204.127.225.91] (HELO alnrmhc11.comcast.net) (204.127.225.91)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 24 Feb 2007 20:27:28 -0800
Received: from ximpleware (c-24-6-90-145.hsd1.ca.comcast.net[24.6.90.145])
          by comcast.net (alnrmhc11) with SMTP
          id <20070225042708b1100ldfhle>; Sun, 25 Feb 2007 04:27:08 +0000
Message-ID: <011301c75895$21123040$0d02a8c0@ximpleware>
From: "Jimmy Zhang" <crackeur@comcast.net>
To: <java-user@lucene.apache.org>
References: <BC1CFC544422CB4A934908E126A4742705F07945@SGBLOW2101.wsatkins.com> <359a92830702230643l3501fdb4g761bc6d630bd67a1@mail.gmail.com> <45DF0316.2000502@mikemccandless.com> <BC1CFC544422CB4A934908E126A4742705F07AEC@SGBLOW2101.wsatkins.com> <Pine.LNX.4.58.0702231453580.6828@hal.rescomp.berkeley.edu>
Subject: [ANN]VTD-XML 2.0
Date: Sat, 24 Feb 2007 20:26:25 -0800
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3028
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
X-Virus-Checked: Checked by ClamAV on apache.org

 The VTD-XML project team is proud to announce the release of 
version 2.0 of VTD-XML, the next generation XML parser/indexer.
The new features introduced in this version are:

* VTD+XML version 1.0: the world's first true native XML index 
that is simple, general-purpose and back-compatible with XML. 
* NodeRecorder Class that saves VTDNav's cursor location for 
later sequential access.
* Overwrite capability
* Lexically comparisons between VTD and strings

 To download the software, please go to 
http://sourceforge.net/project/showfiles.php?group_id=110612

 To read the latest benchmark report please go to
http://vtd-xml.sf.net/benchmark1.html

 To get the latest API overview
http://www.ximpleware.com/vtd-xml_intro.pdf


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 25 05:05:24 2007
Return-Path: <java-user-return-26379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4201 invoked from network); 25 Feb 2007 05:05:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2007 05:05:23 -0000
Received: (qmail 82618 invoked by uid 500); 25 Feb 2007 05:05:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82587 invoked by uid 500); 25 Feb 2007 05:05:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82575 invoked by uid 99); 25 Feb 2007 05:05:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 24 Feb 2007 21:05:25 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 24 Feb 2007 21:05:14 -0800
Received: by nf-out-0910.google.com with SMTP id i2so1270590nfe
        for <java-user@lucene.apache.org>; Sat, 24 Feb 2007 21:04:52 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=a61GVYHghvkoeTG8RG1ZQNPscT7qLJVM0PHMyDGaCQQr+xoskjrlbpz71NPMzZL2a5LS8U8+amEMPO5ZeA3fh2jDJ+6Z1LplP84ubKN/zUk2RrXNHUwPw9WB6OkuEUZeew+B/P20+T0PNqzWzsABajkYNz8XRXtWEpG9Q+zTiQ8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=CLB/qddy0ov6xx+A1HMl51XFU2F+kZYSTCWaSAe2A+cGO/BuE4bl+V7nTZrsrjMPWbgheoOcU6Vst7qhC+7cGWhIbfumTCoc873KIslQjQCwL7eRYyx551hnnjWmMeHcPmWeSaI1gT5YeYvKb5CQ3RINrmiZFbHMt5Is8vyGQUo=
Received: by 10.82.163.13 with SMTP id l13mr1219520bue.1172379892512;
        Sat, 24 Feb 2007 21:04:52 -0800 (PST)
Received: by 10.82.163.2 with HTTP; Sat, 24 Feb 2007 21:04:52 -0800 (PST)
Message-ID: <34b8543c0702242104o7317f95bt3b989b98ccb213b8@mail.gmail.com>
Date: Sun, 25 Feb 2007 08:34:52 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to define a pool for Searcher?
In-Reply-To: <45DDE5DA.80202@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_53928_14834814.1172379892484"
References: <34b8543c0702220009m72f9e9c7pf8f9764953be6a48@mail.gmail.com>
	 <45DDE5DA.80202@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_53928_14834814.1172379892484
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thank you Mark for your useful help. the code you introduce was very helpful
for me

but my only question is that I need to place an idle time for each open
searcher, so if it exceed the specific time then release that searcher and
get ready for another thread.

how can I put such this feature, I was thinking of a timeout listener, but
dont know where tu put it. I have a SingleSearcher that wraps lucene's
Searcher and it returns an ResultSet in which I put a Hits object. do I have
to put the time in my ResultSet or my SingleSeacher?

still I dont know ehrthrt the reader is important for Hits or Searcher?
consider I passed a hits to my ResultSet, now, if I close searcher, will the
Reader get closed?  or another vague thing is can a Reader work thread
safely for every Searcher with differenet queries?

Thank you very much again.

On 2/22/07, Mark Miller <markrmiller@gmail.com> wrote:
>
> I would not do this from scratch...if you are interested in Solr go that
> route else I would build off
> http://issues.apache.org/jira/browse/LUCENE-390
>
> - Mark
>
> Mohammad Norouzi wrote:
> > Hi all,
> > I am going to build a Searcher pooling. if any one has experience on
> > this, I
> > would be glad to hear his/her recommendation and suggestion. I want to
> > know
> > what issues I should be apply. considering I am going to use this on a
> > web
> > application with many user sessions.
> >
> > thank you very much in advance.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,
Mohammad

------=_Part_53928_14834814.1172379892484--

From java-user-return-26380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 25 06:48:43 2007
Return-Path: <java-user-return-26380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15939 invoked from network); 25 Feb 2007 06:48:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2007 06:48:42 -0000
Received: (qmail 29402 invoked by uid 500); 25 Feb 2007 06:48:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29369 invoked by uid 500); 25 Feb 2007 06:48:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29358 invoked by uid 99); 25 Feb 2007 06:48:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 24 Feb 2007 22:48:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 24 Feb 2007 22:48:34 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id l1P6m4fZ026101
	for <java-user@lucene.apache.org>; Sun, 25 Feb 2007 08:48:05 +0200
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz with ESMTP
	 id m2p8c16b; 25 Feb 2007 08:48:00 +0200
Message-ID: <45E13129.2010504@teamware.com>
Date: Sun, 25 Feb 2007 17:48:09 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: QueryParser bug?
References: <OFC54DA797.F557FF44-ON8825728C.001FCEE0-8825728C.00201DA6@il.ibm.com>
In-Reply-To: <OFC54DA797.F557FF44-ON8825728C.001FCEE0-8825728C.00201DA6@il.ibm.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Sun, 25 Feb 2007 08:48:05 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Doron, that works.
Antony


Doron Cohen wrote:
> Hi Antony,
> 
> Could you try the patch in
> http://issues.apache.org/jira/browse/LUCENE-813
> 
> Thanks,
> Doron



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 25 07:02:22 2007
Return-Path: <java-user-return-26381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19726 invoked from network); 25 Feb 2007 07:02:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2007 07:02:21 -0000
Received: (qmail 32961 invoked by uid 500); 25 Feb 2007 07:02:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32927 invoked by uid 500); 25 Feb 2007 07:02:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32916 invoked by uid 99); 25 Feb 2007 07:02:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 24 Feb 2007 23:02:24 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 24 Feb 2007 23:02:13 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id l1P71muJ027061
	for <java-user@lucene.apache.org>; Sun, 25 Feb 2007 09:01:48 +0200
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz with ESMTP
	 id m2p91aar; 25 Feb 2007 09:01:00 +0200
Message-ID: <45E13462.3010507@teamware.com>
Date: Sun, 25 Feb 2007 18:01:54 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: TextMining.org Word extractor
References: <45DE75F5.4070705@teamware.com> <Pine.LNX.4.58.0702231056140.1259@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0702231056140.1259@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Sun, 25 Feb 2007 09:01:48 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=-0.185,
	required 5, autolearn=not spam, BAYES_40 -0.18)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, I found the info, but it seems his offer to hand over the software

http://mail-archives.apache.org/mod_mbox/lucene-java-user/200602.mbox/%3Cfe93b8057e9.7e9fe93b805@tampabay.rr.com%3E

went un-answered.  Nutch uses Ryan Ackley's Word6 extractor, so I'm guessing it 
is still Apache 2, but as I am about to ship some software, I wanted to put the 
right licence text where it should be.

Antony


Chris Hostetter wrote:
> 
> googling...
> 	TextMining.org licence
> ...turns up lots of useful info, some from the archive of this list.
> 
> 
> : Date: Fri, 23 Feb 2007 16:04:53 +1100
> : From: Antony Bowesman <adb@teamware.com>
> : Reply-To: java-user@lucene.apache.org
> : To: java-user@lucene.apache.org
> : Subject: TextMining.org Word extractor
> :
> : I'm extracting text from Word using TextMining.org extractors - it works better
> : than POI because it extracts Word 6/95 as well as 97-2002, which POI cannot do.
> :   However, I'm trying to find out about licence issues with the TM jar. The TM
> : website seems to be permanently hacked these days.
> :
> : Anyone know?



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 25 07:08:20 2007
Return-Path: <java-user-return-26382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21629 invoked from network); 25 Feb 2007 07:08:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2007 07:08:19 -0000
Received: (qmail 35542 invoked by uid 500); 25 Feb 2007 07:08:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35505 invoked by uid 500); 25 Feb 2007 07:08:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35494 invoked by uid 99); 25 Feb 2007 07:08:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 24 Feb 2007 23:08:21 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 24 Feb 2007 23:08:10 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 8248F5B771; Sat, 24 Feb 2007 23:07:49 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 645837F403
	for <java-user@lucene.apache.org>; Sat, 24 Feb 2007 23:07:49 -0800 (PST)
Date: Sat, 24 Feb 2007 23:07:49 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: TextMining.org Word extractor
In-Reply-To: <45E13462.3010507@teamware.com>
Message-ID: <Pine.LNX.4.58.0702242306020.29289@hal.rescomp.berkeley.edu>
References: <45DE75F5.4070705@teamware.com> <Pine.LNX.4.58.0702231056140.1259@hal.rescomp.berkeley.edu>
 <45E13462.3010507@teamware.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Yes, I found the info, but it seems his offer to hand over the software
: went un-answered.  Nutch uses Ryan Ackley's Word6 extractor, so I'm guessing it

i don't know that you can assume that .. he specificaly said "Send me an
email directly if you are interested"

: is still Apache 2, but as I am about to ship some software, I wanted to put the
: right licence text where it should be.

he did explicitly say it was apache 2 in that email.  and whatever copy
you have that you want to ship should have come with the liscence.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 25 07:23:23 2007
Return-Path: <java-user-return-26383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24910 invoked from network); 25 Feb 2007 07:23:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2007 07:23:22 -0000
Received: (qmail 43499 invoked by uid 500); 25 Feb 2007 07:23:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43458 invoked by uid 500); 25 Feb 2007 07:23:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43447 invoked by uid 99); 25 Feb 2007 07:23:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 24 Feb 2007 23:23:25 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 24 Feb 2007 23:23:14 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id l1P7MjAX028602
	for <java-user@lucene.apache.org>; Sun, 25 Feb 2007 09:22:45 +0200
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz with ESMTP
	 id m2p9m7e3; 25 Feb 2007 09:22:00 +0200
Message-ID: <45E1394A.5070104@teamware.com>
Date: Sun, 25 Feb 2007 18:22:50 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: TextMining.org Word extractor
References: <45DE75F5.4070705@teamware.com> <Pine.LNX.4.58.0702231056140.1259@hal.rescomp.berkeley.edu> <45E13462.3010507@teamware.com> <Pine.LNX.4.58.0702242306020.29289@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0702242306020.29289@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Sun, 25 Feb 2007 09:22:45 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Hoss,

> : Yes, I found the info, but it seems his offer to hand over the software
> : went un-answered.  Nutch uses Ryan Ackley's Word6 extractor, so I'm guessing it
> 
> i don't know that you can assume that .. he specificaly said "Send me an
> email directly if you are interested"

Yes, hence this thread ;)  I'd not like to rely on the textmining parser only to 
discover it's not useable.  I can use POI if I have to, but it does not handle 
Word 6, which is bad, so I'd rather use TM.

> : is still Apache 2, but as I am about to ship some software, I wanted to put the
> : right licence text where it should be.
> 
> he did explicitly say it was apache 2 in that email.  and whatever copy
> you have that you want to ship should have come with the liscence.

Actually, the jar file is the one that's downloaded with the LuceneInAction.zip 
file from the Manning website

http://www.lucenebook.com/LuceneInAction.zip from http://www.manning.com/hatcher2/

and there's no licence file.  The book does not refer to the licence although it 
refers to the parser as 'freely available'.  The book just refers to the website 
- now unavailable.

I've tried sending Ryan Ackley mail direct.  Hopefully he will clarify its status.

Antony


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 25 07:31:12 2007
Return-Path: <java-user-return-26384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26582 invoked from network); 25 Feb 2007 07:31:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2007 07:31:11 -0000
Received: (qmail 45839 invoked by uid 500); 25 Feb 2007 07:31:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45807 invoked by uid 500); 25 Feb 2007 07:31:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45796 invoked by uid 99); 25 Feb 2007 07:31:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 24 Feb 2007 23:31:14 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ruchithakur1@gmail.com designates 64.233.162.229 as permitted sender)
Received: from [64.233.162.229] (HELO nz-out-0506.google.com) (64.233.162.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 24 Feb 2007 23:31:03 -0800
Received: by nz-out-0506.google.com with SMTP id i1so877365nzh
        for <java-user@lucene.apache.org>; Sat, 24 Feb 2007 23:30:42 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=ukYATrKGl8BpyHZEbEs6Us6B2AK5IzzEeEThPmPMZw3+RCAjkEt7z9bw9uq+GG2xapbk8VQ4OqN3xUR7ouo4F0lcFAcQAURm8HJWe+U5YWH67+dwdRDNQC0crlRT8gMQqluBgZHMeVIzYOI0cTKaitfsW3Jn6iZka6H4/3WhlKQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=PCx41kt9/4FPATBclrIN0fuXp3vsO22DmIiuMHC5BBwrOmHXK3NbHWBL8rJG/9Wpav6HbGsETGQ4rc5I6Tn9x6S/g0f9At3wXL8R3lmrWJYWzOByxxhLhNdNrmt4e9eSYA1D0LcPQNR+fIZ5wcNAa7vvm+LctjnpLpuOjnjTecc=
Received: by 10.114.155.1 with SMTP id c1mr249236wae.1172388642043;
        Sat, 24 Feb 2007 23:30:42 -0800 (PST)
Received: by 10.114.131.14 with HTTP; Sat, 24 Feb 2007 23:30:42 -0800 (PST)
Message-ID: <b6246fe60702242330h6d49d5f6r6965605cef609d51@mail.gmail.com>
Date: Sun, 25 Feb 2007 01:30:42 -0600
From: "ruchi thakur" <ruchithakur1@gmail.com>
To: java-user@lucene.apache.org
Subject: Querying multiple fields in a document
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_78644_30503897.1172388642019"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_78644_30503897.1172388642019
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

 Hello,
I am new to Lucene.
I have a document with 3 fields -   name,subject,rollno

I want to search on the 2 field names name and subject
ie; i want to search for documents having a particular combination of name
and subject, (say all the documents with name as bob and subject as maths) .
Would appreciate if i can have any ideas on this.
Thanks and Regards,
Ruchika

------=_Part_78644_30503897.1172388642019--

From java-user-return-26385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 25 11:36:10 2007
Return-Path: <java-user-return-26385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75766 invoked from network); 25 Feb 2007 11:36:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2007 11:36:08 -0000
Received: (qmail 27413 invoked by uid 500); 25 Feb 2007 11:36:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27372 invoked by uid 500); 25 Feb 2007 11:36:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27361 invoked by uid 99); 25 Feb 2007 11:36:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Feb 2007 03:36:09 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lmenaria@chambal.com designates 66.249.82.232 as permitted sender)
Received: from [66.249.82.232] (HELO wx-out-0506.google.com) (66.249.82.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Feb 2007 03:35:58 -0800
Received: by wx-out-0506.google.com with SMTP id i29so980648wxd
        for <java-user@lucene.apache.org>; Sun, 25 Feb 2007 03:35:37 -0800 (PST)
Received: by 10.114.14.1 with SMTP id 1mr957920wan.1172403336785;
        Sun, 25 Feb 2007 03:35:36 -0800 (PST)
Received: by 10.114.175.4 with HTTP; Sun, 25 Feb 2007 03:35:36 -0800 (PST)
Message-ID: <1324e4e20702250335t2f4c7182ic45c291fb5b09910@mail.gmail.com>
Date: Sun, 25 Feb 2007 18:35:36 +0700
From: "Laxmilal Menaria" <lmenaria@chambal.com>
To: java-user@lucene.apache.org
Subject: Re: Querying multiple fields in a document
In-Reply-To: <b6246fe60702242330h6d49d5f6r6965605cef609d51@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_82915_15331450.1172403336750"
References: <b6246fe60702242330h6d49d5f6r6965605cef609d51@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_82915_15331450.1172403336750
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi, i think you will use MultiSearcher and create a field and Value array
for that, that will solve your problem..

thanks

On 2/25/07, ruchi thakur <ruchithakur1@gmail.com> wrote:
>
> Hello,
> I am new to Lucene.
> I have a document with 3 fields -   name,subject,rollno
>
> I want to search on the 2 field names name and subject
> ie; i want to search for documents having a particular combination of name
> and subject, (say all the documents with name as bob and subject as maths)
> .
> Would appreciate if i can have any ideas on this.
> Thanks and Regards,
> Ruchika
>

------=_Part_82915_15331450.1172403336750--

From java-user-return-26386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 25 11:57:07 2007
Return-Path: <java-user-return-26386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78595 invoked from network); 25 Feb 2007 11:57:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2007 11:57:06 -0000
Received: (qmail 35349 invoked by uid 500); 25 Feb 2007 11:57:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35321 invoked by uid 500); 25 Feb 2007 11:57:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35310 invoked by uid 99); 25 Feb 2007 11:57:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Feb 2007 03:57:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [82.216.111.43] (HELO smtp7.tech.numericable.fr) (82.216.111.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Feb 2007 03:56:56 -0800
Received: from [192.168.1.101] (ip-3.net-82-216-252.rev.numericable.fr [82.216.252.3])
	by smtp7.tech.numericable.fr (Postfix) with ESMTP id 5C58316380E
	for <java-user@lucene.apache.org>; Sun, 25 Feb 2007 12:56:33 +0100 (CET)
From: Nicolas =?iso-8859-1?q?Lalev=E9e?= <nicolas.lalevee@anyware-tech.com>
To: java-user@lucene.apache.org
Subject: Re: Querying multiple fields in a document
Date: Sun, 25 Feb 2007 12:55:46 +0100
User-Agent: KMail/1.9.5
References: <b6246fe60702242330h6d49d5f6r6965605cef609d51@mail.gmail.com> <1324e4e20702250335t2f4c7182ic45c291fb5b09910@mail.gmail.com>
In-Reply-To: <1324e4e20702250335t2f4c7182ic45c291fb5b09910@mail.gmail.com>
Organization: Anyware Technologies
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200702251255.46288.nicolas.lalevee@anyware-tech.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Le dimanche 25 f=E9vrier 2007 12:35, Laxmilal Menaria a =E9crit=A0:
> Hi, i think you will use MultiSearcher and create a field and Value array
> for that, that will solve your problem..

I don't know what was your issue Laxmilal, but Ruchika just need a simple=20
query : "+name:bob +subject:maths".

Nicolas

>
> thanks
>
> On 2/25/07, ruchi thakur <ruchithakur1@gmail.com> wrote:
> > Hello,
> > I am new to Lucene.
> > I have a document with 3 fields -   name,subject,rollno
> >
> > I want to search on the 2 field names name and subject
> > ie; i want to search for documents having a particular combination of
> > name and subject, (say all the documents with name as bob and subject as
> > maths) .
> > Would appreciate if i can have any ideas on this.
> > Thanks and Regards,
> > Ruchika

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 25 12:33:00 2007
Return-Path: <java-user-return-26387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82328 invoked from network); 25 Feb 2007 12:32:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2007 12:32:58 -0000
Received: (qmail 57810 invoked by uid 500); 25 Feb 2007 12:33:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57766 invoked by uid 500); 25 Feb 2007 12:33:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57755 invoked by uid 99); 25 Feb 2007 12:33:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Feb 2007 04:33:00 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Feb 2007 04:32:48 -0800
Received: by nf-out-0910.google.com with SMTP id i2so1337325nfe
        for <java-user@lucene.apache.org>; Sun, 25 Feb 2007 04:32:27 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=XPxhxtDFFe2wNMruMX4NzEcIpP4BqPeGRcDd1BvadSnFUiDQD2JDmZUKjTlb7i4b+JeV0yQeihXD1+awfH9G9CO2/wHjLULXFGSYyg4YLo8M7qGbXhwmrreZ68CIAJkQrhtlrsqm6ORyB/2miQjrf6wld1KFn1NdHmRtKXP7oaE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=TXX/8oejO4f6ddYPILwhujR14KO9Wr11lr/KRxrNy6HybVkl2Xm7qo2nRfa250ynykSa1krtqY5PniOdDgL4WkQNETFq2HZMnQYYcCNdQ4mjHNJrcx+gac5zNODqta+m9AsXkIwq1FCOEBiFUnFxkOotY4ey9KONY90FmSW7UKQ=
Received: by 10.49.42.5 with SMTP id u5mr10264021nfj.1172406747397;
        Sun, 25 Feb 2007 04:32:27 -0800 (PST)
Received: from ?192.168.1.3? ( [83.249.110.75])
        by mx.google.com with ESMTP id l22sm16954363nfc.2007.02.25.04.32.26;
        Sun, 25 Feb 2007 04:32:26 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <34b8543c0702242104o7317f95bt3b989b98ccb213b8@mail.gmail.com>
References: <34b8543c0702220009m72f9e9c7pf8f9764953be6a48@mail.gmail.com> <45DDE5DA.80202@gmail.com> <34b8543c0702242104o7317f95bt3b989b98ccb213b8@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <6A95E03D-5E7E-417A-A2E4-481C87F61034@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: how to define a pool for Searcher?
Date: Sun, 25 Feb 2007 13:30:33 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


25 feb 2007 kl. 06.04 skrev Mohammad Norouzi:

> still I dont know ehrthrt the reader is important for Hits or  
> Searcher?
> consider I passed a hits to my ResultSet, now, if I close searcher,  
> will the
> Reader get closed?  or another vague thing is can a Reader work thread
> safely for every Searcher with differenet queries?

I'm not completely sure what you are asking, so I hope this helps:

If you passed a Directory to the IndexSearcher constructor the  
IndexReader within will be created at IndexSearcher construction time  
and closed at IndexSearcher close time.

If you passed an IndexReader to the IndexSearcher constructor, then  
the IndexReader will not be closed when the IndexSearcher closes. If  
you do it this way be careful not to leave unused open IndexReader:s  
around, as they consume memory.

An IndexSearcher requires the IndexReader associated with it to be  
open, and the same goes for any Hits produced by that IndexSearcher.  
However, the results in Hits are cached, so even if you close the  
IndexReader you will be able to access the top n accessed documents.  
You will always be able to access the document numbers and their  
score, as that does not require any access of the IndexReader. I.e.  
accessing documents from Hits requires an open IndexReader.


-- 
karl



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 25 14:02:49 2007
Return-Path: <java-user-return-26388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98825 invoked from network); 25 Feb 2007 14:02:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2007 14:02:48 -0000
Received: (qmail 26349 invoked by uid 500); 25 Feb 2007 14:02:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26304 invoked by uid 500); 25 Feb 2007 14:02:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26293 invoked by uid 99); 25 Feb 2007 14:02:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Feb 2007 06:02:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.236 as permitted sender)
Received: from [66.249.82.236] (HELO wx-out-0506.google.com) (66.249.82.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Feb 2007 06:02:36 -0800
Received: by wx-out-0506.google.com with SMTP id i29so1008963wxd
        for <java-user@lucene.apache.org>; Sun, 25 Feb 2007 06:02:16 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=g1HiNj+A3gLIUijr0ACOSeO12MEdEZC2OnMCOGrsh2SBxAe9GQy08h5BtcQSZ36zHiZK1epshQt9WrHaB4+/2zu4PgM2B5CxP77FhqTcQzx9eTg1rGAyIUCIbe4DwOrfx5dcoEvHfoUo+v7YjNYbJMoIapWAiHKazr5D7Laigv8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=m/rpyyFd1x5g1Nq2TwR9rL+4sSPkbi/H5xA5AUlve1R7PMxSRPdKm4ROsJZTpMR6JhQs49kfEpczkOp4AWURBp595XMs2lL7U0W8gU01kR0TOWg6fu9AIjK2IxpVCQRP++1qQKOojwTCkjC4qI4d4SiJ2xQiAUJxI6/05KEsdlw=
Received: by 10.90.98.10 with SMTP id v10mr3830105agb.1172412136256;
        Sun, 25 Feb 2007 06:02:16 -0800 (PST)
Received: from ?192.168.1.105? ( [216.66.114.42])
        by mx.google.com with ESMTP id 25sm6108424wra.2007.02.25.06.02.14;
        Sun, 25 Feb 2007 06:02:15 -0800 (PST)
Message-ID: <45E19739.30709@gmail.com>
Date: Sun, 25 Feb 2007 09:03:37 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: how to define a pool for Searcher?
References: <34b8543c0702220009m72f9e9c7pf8f9764953be6a48@mail.gmail.com>	 <45DDE5DA.80202@gmail.com> <34b8543c0702242104o7317f95bt3b989b98ccb213b8@mail.gmail.com>
In-Reply-To: <34b8543c0702242104o7317f95bt3b989b98ccb213b8@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I am a bit confused about what you are asking. Why do you need the 
Searcher to time out? That code should release your searchers at the 
appropriate times...when the index has been modified. The way that I use 
it is to make a synchronized map that keeps around an index accessor for 
each index that I open...from there the code should do the rest...when a 
writer or a writing reader is released the code waits for all searchers 
to be released and then clears the cache of searchers and new searchers 
are created when requested until another writer or writing reader is 
released...

Mohammad Norouzi wrote:
> Thank you Mark for your useful help. the code you introduce was very 
> helpful
> for me
>
> but my only question is that I need to place an idle time for each open
> searcher, so if it exceed the specific time then release that searcher 
> and
> get ready for another thread.
>
> how can I put such this feature, I was thinking of a timeout listener, 
> but
> dont know where tu put it. I have a SingleSearcher that wraps lucene's
> Searcher and it returns an ResultSet in which I put a Hits object. do 
> I have
> to put the time in my ResultSet or my SingleSeacher?
>
> still I dont know ehrthrt the reader is important for Hits or Searcher?
> consider I passed a hits to my ResultSet, now, if I close searcher, 
> will the
> Reader get closed?  or another vague thing is can a Reader work thread
> safely for every Searcher with differenet queries?
>
> Thank you very much again.
>
> On 2/22/07, Mark Miller <markrmiller@gmail.com> wrote:
>>
>> I would not do this from scratch...if you are interested in Solr go that
>> route else I would build off
>> http://issues.apache.org/jira/browse/LUCENE-390
>>
>> - Mark
>>
>> Mohammad Norouzi wrote:
>> > Hi all,
>> > I am going to build a Searcher pooling. if any one has experience on
>> > this, I
>> > would be glad to hear his/her recommendation and suggestion. I want to
>> > know
>> > what issues I should be apply. considering I am going to use this on a
>> > web
>> > application with many user sessions.
>> >
>> > thank you very much in advance.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 25 14:19:18 2007
Return-Path: <java-user-return-26389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4251 invoked from network); 25 Feb 2007 14:19:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2007 14:19:18 -0000
Received: (qmail 35119 invoked by uid 500); 25 Feb 2007 14:19:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35082 invoked by uid 500); 25 Feb 2007 14:19:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35071 invoked by uid 99); 25 Feb 2007 14:19:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Feb 2007 06:19:20 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 209.85.134.191 as permitted sender)
Received: from [209.85.134.191] (HELO mu-out-0910.google.com) (209.85.134.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Feb 2007 06:19:09 -0800
Received: by mu-out-0910.google.com with SMTP id i10so1041716mue
        for <java-user@lucene.apache.org>; Sun, 25 Feb 2007 06:18:48 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=h6vnyfyE7jUHC+l5meSfDEEqenNRhIZneLtqVHjoEluhL+FeBeG+uiS99o+FxfJ1PfNRQsv+KVYfzXXfeZ/VIuKPKcQPmy3k9JElG5bQzoq4+drzjisr0g4EqaSgJ5jM+cKQm+WzwIKIoUbks1q23X5hQyWD/OsCShAEYkTp2dg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=q3VWdOAvU8cG0XurfGx0WW/rP3R1FkdpwVHkwwXMSolxE20BOWxDSpDk7KVPREkSmU0+yA1mYSXK1+XJ0dQnoj8guIgENOH+EB1LurIk5OCECsNdrsf2bw/6xjBOKBK+v+cwRyYRrXMfEioRVyOD65VD9yHppes192RKgPjg7eo=
Received: by 10.82.135.13 with SMTP id i13mr1330235bud.1172413128027;
        Sun, 25 Feb 2007 06:18:48 -0800 (PST)
Received: by 10.82.163.2 with HTTP; Sun, 25 Feb 2007 06:18:47 -0800 (PST)
Message-ID: <34b8543c0702250618p11021435q373ba7a95139b75a@mail.gmail.com>
Date: Sun, 25 Feb 2007 17:48:47 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to define a pool for Searcher?
In-Reply-To: <45E19739.30709@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_55982_20767922.1172413127987"
References: <34b8543c0702220009m72f9e9c7pf8f9764953be6a48@mail.gmail.com>
	 <45DDE5DA.80202@gmail.com>
	 <34b8543c0702242104o7317f95bt3b989b98ccb213b8@mail.gmail.com>
	 <45E19739.30709@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_55982_20767922.1172413127987
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi
actually I dont have any writer or writing reader. I just have reader. when
a reader is created by the user because the document returned by hits is
very much, for example 20,000 so I display the result page by page. whenever
user click to next page the hits will use the reader to load next 20
records,
besides, I dont have one directory, there are more than one directory and
index on the server and each user may request for one of them.
the problem is, a user may close his browser window and the reader will stay
open becasue I cant detect it. and either if his session expires my destroy
method will be called and searcher will close but in the cached searcher i
can not detect which one is closed and ready it for next user. if the
searcher had a isClosed() method it was easy to determine but unfortunately
it's has'nt

any idea?
thanks again

On 2/25/07, Mark Miller <markrmiller@gmail.com> wrote:
>
> I am a bit confused about what you are asking. Why do you need the
> Searcher to time out? That code should release your searchers at the
> appropriate times...when the index has been modified. The way that I use
> it is to make a synchronized map that keeps around an index accessor for
> each index that I open...from there the code should do the rest...when a
> writer or a writing reader is released the code waits for all searchers
> to be released and then clears the cache of searchers and new searchers
> are created when requested until another writer or writing reader is
> released...
>
> Mohammad Norouzi wrote:
> > Thank you Mark for your useful help. the code you introduce was very
> > helpful
> > for me
> >
> > but my only question is that I need to place an idle time for each open
> > searcher, so if it exceed the specific time then release that searcher
> > and
> > get ready for another thread.
> >
> > how can I put such this feature, I was thinking of a timeout listener,
> > but
> > dont know where tu put it. I have a SingleSearcher that wraps lucene's
> > Searcher and it returns an ResultSet in which I put a Hits object. do
> > I have
> > to put the time in my ResultSet or my SingleSeacher?
> >
> > still I dont know ehrthrt the reader is important for Hits or Searcher?
> > consider I passed a hits to my ResultSet, now, if I close searcher,
> > will the
> > Reader get closed?  or another vague thing is can a Reader work thread
> > safely for every Searcher with differenet queries?
> >
> > Thank you very much again.
> >
> > On 2/22/07, Mark Miller <markrmiller@gmail.com> wrote:
> >>
> >> I would not do this from scratch...if you are interested in Solr go
> that
> >> route else I would build off
> >> http://issues.apache.org/jira/browse/LUCENE-390
> >>
> >> - Mark
> >>
> >> Mohammad Norouzi wrote:
> >> > Hi all,
> >> > I am going to build a Searcher pooling. if any one has experience on
> >> > this, I
> >> > would be glad to hear his/her recommendation and suggestion. I want
> to
> >> > know
> >> > what issues I should be apply. considering I am going to use this on
> a
> >> > web
> >> > application with many user sessions.
> >> >
> >> > thank you very much in advance.
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,
Mohammad

------=_Part_55982_20767922.1172413127987--

From java-user-return-26390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 25 14:41:04 2007
Return-Path: <java-user-return-26390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18312 invoked from network); 25 Feb 2007 14:41:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2007 14:41:03 -0000
Received: (qmail 48933 invoked by uid 500); 25 Feb 2007 14:41:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48900 invoked by uid 500); 25 Feb 2007 14:41:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48889 invoked by uid 99); 25 Feb 2007 14:41:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Feb 2007 06:41:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.228 as permitted sender)
Received: from [66.249.82.228] (HELO wx-out-0506.google.com) (66.249.82.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Feb 2007 06:40:52 -0800
Received: by wx-out-0506.google.com with SMTP id i29so1016056wxd
        for <java-user@lucene.apache.org>; Sun, 25 Feb 2007 06:40:31 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=MoKVy6DpyThwOsYZPm7NVRPPHRY8XQXwdKUfJ033oP0L0cOb6Qw6xjrO7wbIQDqbi78t4ZQmuxjHpZLp418Ebi9fuuUPgrUeWscshzOyjUwwBNVgWZ5Ujx6159O1dUIUMV1QO6StX6FcEnU3akHdma6cgwKhfCwbwU6V1DUlHGs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=KBY3j9kM8bYsb5mM5Qhkwd2HMLdixl4j/fLOEb8ntBARHsbg0aHBSyQAptgLq4ciJxrbNZgWIRMOkHOy+nvUXWqt8WGyKBYk7C/2YTWaGdCOKUM84QplUZBaYoeEFqP8yFgFdVVSvazHZtv/R4YTJMr6NGwUaxXce3wuonZYFwk=
Received: by 10.70.11.5 with SMTP id 5mr7421394wxk.1172414431607;
        Sun, 25 Feb 2007 06:40:31 -0800 (PST)
Received: from ?192.168.1.105? ( [216.66.114.42])
        by mx.google.com with ESMTP id 14sm8509510wrl.2007.02.25.06.40.29;
        Sun, 25 Feb 2007 06:40:30 -0800 (PST)
Message-ID: <45E1A034.5030200@gmail.com>
Date: Sun, 25 Feb 2007 09:41:56 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: how to define a pool for Searcher?
References: <34b8543c0702220009m72f9e9c7pf8f9764953be6a48@mail.gmail.com>	 <45DDE5DA.80202@gmail.com>	 <34b8543c0702242104o7317f95bt3b989b98ccb213b8@mail.gmail.com>	 <45E19739.30709@gmail.com> <34b8543c0702250618p11021435q373ba7a95139b75a@mail.gmail.com>
In-Reply-To: <34b8543c0702250618p11021435q373ba7a95139b75a@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

If you never modify your index you should never need to close your 
reader (or searcher). Doing so would just slow you down.

Mohammad Norouzi wrote:
> Hi
> actually I dont have any writer or writing reader. I just have reader. 
> when
> a reader is created by the user because the document returned by hits is
> very much, for example 20,000 so I display the result page by page. 
> whenever
> user click to next page the hits will use the reader to load next 20
> records,
> besides, I dont have one directory, there are more than one directory and
> index on the server and each user may request for one of them.
> the problem is, a user may close his browser window and the reader 
> will stay
> open becasue I cant detect it. and either if his session expires my 
> destroy
> method will be called and searcher will close but in the cached 
> searcher i
> can not detect which one is closed and ready it for next user. if the
> searcher had a isClosed() method it was easy to determine but 
> unfortunately
> it's has'nt
>
> any idea?
> thanks again
>
> On 2/25/07, Mark Miller <markrmiller@gmail.com> wrote:
>>
>> I am a bit confused about what you are asking. Why do you need the
>> Searcher to time out? That code should release your searchers at the
>> appropriate times...when the index has been modified. The way that I use
>> it is to make a synchronized map that keeps around an index accessor for
>> each index that I open...from there the code should do the rest...when a
>> writer or a writing reader is released the code waits for all searchers
>> to be released and then clears the cache of searchers and new searchers
>> are created when requested until another writer or writing reader is
>> released...
>>
>> Mohammad Norouzi wrote:
>> > Thank you Mark for your useful help. the code you introduce was very
>> > helpful
>> > for me
>> >
>> > but my only question is that I need to place an idle time for each 
>> open
>> > searcher, so if it exceed the specific time then release that searcher
>> > and
>> > get ready for another thread.
>> >
>> > how can I put such this feature, I was thinking of a timeout listener,
>> > but
>> > dont know where tu put it. I have a SingleSearcher that wraps lucene's
>> > Searcher and it returns an ResultSet in which I put a Hits object. do
>> > I have
>> > to put the time in my ResultSet or my SingleSeacher?
>> >
>> > still I dont know ehrthrt the reader is important for Hits or 
>> Searcher?
>> > consider I passed a hits to my ResultSet, now, if I close searcher,
>> > will the
>> > Reader get closed?  or another vague thing is can a Reader work thread
>> > safely for every Searcher with differenet queries?
>> >
>> > Thank you very much again.
>> >
>> > On 2/22/07, Mark Miller <markrmiller@gmail.com> wrote:
>> >>
>> >> I would not do this from scratch...if you are interested in Solr go
>> that
>> >> route else I would build off
>> >> http://issues.apache.org/jira/browse/LUCENE-390
>> >>
>> >> - Mark
>> >>
>> >> Mohammad Norouzi wrote:
>> >> > Hi all,
>> >> > I am going to build a Searcher pooling. if any one has 
>> experience on
>> >> > this, I
>> >> > would be glad to hear his/her recommendation and suggestion. I want
>> to
>> >> > know
>> >> > what issues I should be apply. considering I am going to use 
>> this on
>> a
>> >> > web
>> >> > application with many user sessions.
>> >> >
>> >> > thank you very much in advance.
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 25 15:05:55 2007
Return-Path: <java-user-return-26391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24187 invoked from network); 25 Feb 2007 15:05:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2007 15:05:54 -0000
Received: (qmail 63380 invoked by uid 500); 25 Feb 2007 15:05:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63343 invoked by uid 500); 25 Feb 2007 15:05:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63318 invoked by uid 99); 25 Feb 2007 15:05:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Feb 2007 07:05:54 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.184.230 as permitted sender)
Received: from [64.233.184.230] (HELO wr-out-0506.google.com) (64.233.184.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Feb 2007 07:05:43 -0800
Received: by wr-out-0506.google.com with SMTP id 55so1445235wri
        for <java-user@lucene.apache.org>; Sun, 25 Feb 2007 07:05:22 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kelL36s/8fMtHmwanjnGdaT0EBfRUPS0JFkPMKL7cx3rDcXhCqniryPOWNJRORo1NoB1zgHiqqV9hpA/mvbciCuuLSC86u7l010nUlJukuPqkiuOAwhgRktb5JsqTerq2FqmyzGe3j/ywnOysblcxBPSwFOEplLdYAD7GpfS6KM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ijpfAhmmbMOHFH1CpfVz1OpXGqp2nshImZE8OtiP+s49fmrCoErr/WX4lMd8Z7ZN6LtBjN3+9BpS/OUkS0qZAB47KibbskaOo4ZsenVq44ITqtpM8of6CHSTW5ZSiR9V+eZD9guA0Kv75FFvOpTMZ3BCRP4ZPggBZCF/LHmrjPI=
Received: by 10.114.145.1 with SMTP id s1mr581828wad.1172415921588;
        Sun, 25 Feb 2007 07:05:21 -0800 (PST)
Received: by 10.114.58.3 with HTTP; Sun, 25 Feb 2007 07:05:21 -0800 (PST)
Message-ID: <359a92830702250705g3bef1f46rf8b20a957f772193@mail.gmail.com>
Date: Sun, 25 Feb 2007 10:05:21 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: updating index
In-Reply-To: <bd818c7b0702241929l31c262e9l891bfeb486f94efc@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_89341_18369172.1172415921540"
References: <bd818c7b0702211442i78a202d7y8d527b12dbf441f6@mail.gmail.com>
	 <359a92830702211602k5214be53r81a81d776feec362@mail.gmail.com>
	 <bd818c7b0702241929l31c262e9l891bfeb486f94efc@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_89341_18369172.1172415921540
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yes, I'm pretty sure you have to index the field (UN_TOKENIZED) to be able
to fetch it with TermDocs/TermEnum! The loop I posted works like this....

for each term in the index for the field
    if  this is one I want to update
         use a TermDocs to get to that document and operate on it.


But this is actually pretty silly. Your loop uses a better approach, except
you're not using TermDocs correctly. Try

     TermDocs tDocs = new IndexReader.TermDocs()
     for (Business biz : updates)
       {
           Term t = new Term("id", biz.getId());
           tDocs.seek(t);
           while (tDocs.next())
           {
               Document doc = reader.document(tDocs.doc());
           }
       }

But TermDocs/TermEnum is looking at terms in the index. If you haven't
indexed the term, you won't find it, so your Field.Index.NO is really
hurting you here.

Best
Erick

On 2/24/07, no spam <mrs.nospam@gmail.com> wrote:
>
> I didn't fully understand your last post and why I wanted to do
> IndexReader.terms() then IndexReader.termDocs().  Won't something like
> this
> work?
>
>         for (Business biz : updates)
>         {
>             Term t = new Term("id", biz.getId()+"");
>             TermDocs tDocs = reader.termDocs(t);
>
>             while (tDocs.next())
>             {
>                 Document doc = reader.document(tDocs.doc());
>             }
>         }
>
> But tDocs never contains any docs.   Is this because I've indexed my pk
> like
> this:
>
> doc.add(new Field("id", biz.getId(), Field.Store.YES, Field.Index.NO));
>
> instead of
>
> doc.add(new Field("id", biz.getId(), Field.Store.YES,
> Field.Index.UNTOKENIZED));
>
> Mark
>
> On 2/21/07, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > I think you can get MUCH better efficiency by using TermEnum/TermDocs.
> But
> > I
> > think you need to index (UN_TOKENIZED) your primary key (although now
> I'm
> > not sure. But I'd be surprised if TermEnum worked with un-indexed data.
> > Still, it'd be worth trying but I've always assumed that TermEnums only
> > worked on indexed fields....).....
> >
> > Anyway, your loop looks more like this...
> >
> > TermEnum terms = IndexReader.terms(new Term("primarykey", ""));
> > TermDocs tDocs = IndexRreader.termDocs();
> >
> > while (terms.next()) {
> >    if (docsToUpdate.contains(terms.text()) {
> >        tDocs.seek(terms.term());
> >        writer.updateDocument(tDocs.doc());
> >    }
> > }
> >
> > NOTE: I've been fast and loose with edge conditions, like insuring that
> > while (terms.next()) doesn't skip the first term, so caveat emptor....
> > This
> > loop also assumes that there is one and only one document in your index
> > with
> > the primary key. Otherwise, you have to do some more work with the
> > TermDocs
> > class to process each document that has your primary key...
> >
> > This is similar to creating Lucene filters, which is very fast....
> >
> > Hope this helps
> > Erick
> >
> >
> >
> >
>

------=_Part_89341_18369172.1172415921540--

From java-user-return-26392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 25 15:55:57 2007
Return-Path: <java-user-return-26392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33404 invoked from network); 25 Feb 2007 15:55:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2007 15:55:56 -0000
Received: (qmail 97162 invoked by uid 500); 25 Feb 2007 15:55:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97128 invoked by uid 500); 25 Feb 2007 15:55:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97117 invoked by uid 99); 25 Feb 2007 15:55:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Feb 2007 07:55:59 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Feb 2007 07:55:47 -0800
Received: by nf-out-0910.google.com with SMTP id i2so1373327nfe
        for <java-user@lucene.apache.org>; Sun, 25 Feb 2007 07:55:25 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Y7/2wWfQuV+5OLeCbyQ7zCWJOLo5OiQuDqDmqCCfp/lutjhPHokxLNEPdBPHqUNiLg4byykYqEJXqWvp3GVPudMwuEE9LXdMKonq5x/0n2v6pIvK1qt5z8d5RGeI1/CutjlXTbL628NFvzTmW9BgZE3tvNWB+/JssOrsx13+PAc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tmZo5yD+LmPePp7QsvMaRA4XYXKVK1EzW5Mpt9CcVifpolxf/Fpgu9Zm9zg5nAdxUGvOnHxPkhtntNXXepu0iuc5KQtJISeMD8DFr9CctiF2SR8FzlwbU2HeSzSZvc4CptU6kt5xoF7CMeAM24BfbDpylRmO9k1/j92iDgGr7c8=
Received: by 10.82.116.15 with SMTP id o15mr1357600buc.1172418924789;
        Sun, 25 Feb 2007 07:55:24 -0800 (PST)
Received: by 10.82.163.2 with HTTP; Sun, 25 Feb 2007 07:55:24 -0800 (PST)
Message-ID: <34b8543c0702250755x356b3238l31b94690b605ea35@mail.gmail.com>
Date: Sun, 25 Feb 2007 19:25:24 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to define a pool for Searcher?
In-Reply-To: <45E1A034.5030200@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_56495_26851725.1172418924543"
References: <34b8543c0702220009m72f9e9c7pf8f9764953be6a48@mail.gmail.com>
	 <45DDE5DA.80202@gmail.com>
	 <34b8543c0702242104o7317f95bt3b989b98ccb213b8@mail.gmail.com>
	 <45E19739.30709@gmail.com>
	 <34b8543c0702250618p11021435q373ba7a95139b75a@mail.gmail.com>
	 <45E1A034.5030200@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_56495_26851725.1172418924543
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

so, you mean, I open one reader for each session (each user) and never close
it until the session has expired? if I do this, is that affect the
performance?

On 2/25/07, Mark Miller <markrmiller@gmail.com> wrote:
>
> If you never modify your index you should never need to close your
> reader (or searcher). Doing so would just slow you down.
>
> Mohammad Norouzi wrote:
> > Hi
> > actually I dont have any writer or writing reader. I just have reader.
> > when
> > a reader is created by the user because the document returned by hits is
> > very much, for example 20,000 so I display the result page by page.
> > whenever
> > user click to next page the hits will use the reader to load next 20
> > records,
> > besides, I dont have one directory, there are more than one directory
> and
> > index on the server and each user may request for one of them.
> > the problem is, a user may close his browser window and the reader
> > will stay
> > open becasue I cant detect it. and either if his session expires my
> > destroy
> > method will be called and searcher will close but in the cached
> > searcher i
> > can not detect which one is closed and ready it for next user. if the
> > searcher had a isClosed() method it was easy to determine but
> > unfortunately
> > it's has'nt
> >
> > any idea?
> > thanks again
> >
> > On 2/25/07, Mark Miller <markrmiller@gmail.com> wrote:
> >>
> >> I am a bit confused about what you are asking. Why do you need the
> >> Searcher to time out? That code should release your searchers at the
> >> appropriate times...when the index has been modified. The way that I
> use
> >> it is to make a synchronized map that keeps around an index accessor
> for
> >> each index that I open...from there the code should do the rest...when
> a
> >> writer or a writing reader is released the code waits for all searchers
> >> to be released and then clears the cache of searchers and new searchers
> >> are created when requested until another writer or writing reader is
> >> released...
> >>
> >> Mohammad Norouzi wrote:
> >> > Thank you Mark for your useful help. the code you introduce was very
> >> > helpful
> >> > for me
> >> >
> >> > but my only question is that I need to place an idle time for each
> >> open
> >> > searcher, so if it exceed the specific time then release that
> searcher
> >> > and
> >> > get ready for another thread.
> >> >
> >> > how can I put such this feature, I was thinking of a timeout
> listener,
> >> > but
> >> > dont know where tu put it. I have a SingleSearcher that wraps
> lucene's
> >> > Searcher and it returns an ResultSet in which I put a Hits object. do
> >> > I have
> >> > to put the time in my ResultSet or my SingleSeacher?
> >> >
> >> > still I dont know ehrthrt the reader is important for Hits or
> >> Searcher?
> >> > consider I passed a hits to my ResultSet, now, if I close searcher,
> >> > will the
> >> > Reader get closed?  or another vague thing is can a Reader work
> thread
> >> > safely for every Searcher with differenet queries?
> >> >
> >> > Thank you very much again.
> >> >
> >> > On 2/22/07, Mark Miller <markrmiller@gmail.com> wrote:
> >> >>
> >> >> I would not do this from scratch...if you are interested in Solr go
> >> that
> >> >> route else I would build off
> >> >> http://issues.apache.org/jira/browse/LUCENE-390
> >> >>
> >> >> - Mark
> >> >>
> >> >> Mohammad Norouzi wrote:
> >> >> > Hi all,
> >> >> > I am going to build a Searcher pooling. if any one has
> >> experience on
> >> >> > this, I
> >> >> > would be glad to hear his/her recommendation and suggestion. I
> want
> >> to
> >> >> > know
> >> >> > what issues I should be apply. considering I am going to use
> >> this on
> >> a
> >> >> > web
> >> >> > application with many user sessions.
> >> >> >
> >> >> > thank you very much in advance.
> >> >>
> >> >>
> ---------------------------------------------------------------------
> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >>
> >> >>
> >> >
> >> >
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,
Mohammad

------=_Part_56495_26851725.1172418924543--

From java-user-return-26393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 25 16:42:47 2007
Return-Path: <java-user-return-26393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41950 invoked from network); 25 Feb 2007 16:42:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2007 16:42:46 -0000
Received: (qmail 33520 invoked by uid 500); 25 Feb 2007 16:42:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32509 invoked by uid 500); 25 Feb 2007 16:42:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32498 invoked by uid 99); 25 Feb 2007 16:42:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Feb 2007 08:42:47 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [82.216.111.43] (HELO smtp7.tech.numericable.fr) (82.216.111.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Feb 2007 08:42:35 -0800
Received: from [192.168.1.101] (ip-3.net-82-216-252.rev.numericable.fr [82.216.252.3])
	by smtp7.tech.numericable.fr (Postfix) with ESMTP id 5D7E516380F
	for <java-user@lucene.apache.org>; Sun, 25 Feb 2007 17:42:12 +0100 (CET)
From: Nicolas =?iso-8859-1?q?Lalev=E9e?= <nicolas.lalevee@anyware-tech.com>
To: java-user@lucene.apache.org
Subject: Re: how to define a pool for Searcher?
Date: Sun, 25 Feb 2007 17:42:02 +0100
User-Agent: KMail/1.9.5
References: <34b8543c0702220009m72f9e9c7pf8f9764953be6a48@mail.gmail.com> <45E1A034.5030200@gmail.com> <34b8543c0702250755x356b3238l31b94690b605ea35@mail.gmail.com>
In-Reply-To: <34b8543c0702250755x356b3238l31b94690b605ea35@mail.gmail.com>
Organization: Anyware Technologies
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200702251742.02643.nicolas.lalevee@anyware-tech.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Le dimanche 25 f=E9vrier 2007 16:55, Mohammad Norouzi a =E9crit=A0:
> so, you mean, I open one reader for each session (each user) and never
> close it until the session has expired? if I do this, is that affect the
> performance?

The searcher/reader is a view on the index. And each time you open a new on=
e,=20
it cost some time. And the only reason to have a new view on the index is=20
that you modified it.
As you never modify it, as said Mark, never close your searcher/reader. If=
=20
your sevral users are reading the same index, you might share the instance =
of=20
the searcher in the different user sessions.

Nicolas

>
> On 2/25/07, Mark Miller <markrmiller@gmail.com> wrote:
> > If you never modify your index you should never need to close your
> > reader (or searcher). Doing so would just slow you down.
> >
> > Mohammad Norouzi wrote:
> > > Hi
> > > actually I dont have any writer or writing reader. I just have reader.
> > > when
> > > a reader is created by the user because the document returned by hits
> > > is very much, for example 20,000 so I display the result page by page.
> > > whenever
> > > user click to next page the hits will use the reader to load next 20
> > > records,
> > > besides, I dont have one directory, there are more than one directory
> >
> > and
> >
> > > index on the server and each user may request for one of them.
> > > the problem is, a user may close his browser window and the reader
> > > will stay
> > > open becasue I cant detect it. and either if his session expires my
> > > destroy
> > > method will be called and searcher will close but in the cached
> > > searcher i
> > > can not detect which one is closed and ready it for next user. if the
> > > searcher had a isClosed() method it was easy to determine but
> > > unfortunately
> > > it's has'nt
> > >
> > > any idea?
> > > thanks again
> > >
> > > On 2/25/07, Mark Miller <markrmiller@gmail.com> wrote:
> > >> I am a bit confused about what you are asking. Why do you need the
> > >> Searcher to time out? That code should release your searchers at the
> > >> appropriate times...when the index has been modified. The way that I
> >
> > use
> >
> > >> it is to make a synchronized map that keeps around an index accessor
> >
> > for
> >
> > >> each index that I open...from there the code should do the rest...wh=
en
> >
> > a
> >
> > >> writer or a writing reader is released the code waits for all
> > >> searchers to be released and then clears the cache of searchers and
> > >> new searchers are created when requested until another writer or
> > >> writing reader is released...
> > >>
> > >> Mohammad Norouzi wrote:
> > >> > Thank you Mark for your useful help. the code you introduce was ve=
ry
> > >> > helpful
> > >> > for me
> > >> >
> > >> > but my only question is that I need to place an idle time for each
> > >>
> > >> open
> > >>
> > >> > searcher, so if it exceed the specific time then release that
> >
> > searcher
> >
> > >> > and
> > >> > get ready for another thread.
> > >> >
> > >> > how can I put such this feature, I was thinking of a timeout
> >
> > listener,
> >
> > >> > but
> > >> > dont know where tu put it. I have a SingleSearcher that wraps
> >
> > lucene's
> >
> > >> > Searcher and it returns an ResultSet in which I put a Hits object.
> > >> > do I have
> > >> > to put the time in my ResultSet or my SingleSeacher?
> > >> >
> > >> > still I dont know ehrthrt the reader is important for Hits or
> > >>
> > >> Searcher?
> > >>
> > >> > consider I passed a hits to my ResultSet, now, if I close searcher,
> > >> > will the
> > >> > Reader get closed?  or another vague thing is can a Reader work
> >
> > thread
> >
> > >> > safely for every Searcher with differenet queries?
> > >> >
> > >> > Thank you very much again.
> > >> >
> > >> > On 2/22/07, Mark Miller <markrmiller@gmail.com> wrote:
> > >> >> I would not do this from scratch...if you are interested in Solr =
go
> > >>
> > >> that
> > >>
> > >> >> route else I would build off
> > >> >> http://issues.apache.org/jira/browse/LUCENE-390
> > >> >>
> > >> >> - Mark
> > >> >>
> > >> >> Mohammad Norouzi wrote:
> > >> >> > Hi all,
> > >> >> > I am going to build a Searcher pooling. if any one has
> > >>
> > >> experience on
> > >>
> > >> >> > this, I
> > >> >> > would be glad to hear his/her recommendation and suggestion. I
> >
> > want
> >
> > >> to
> > >>
> > >> >> > know
> > >> >> > what issues I should be apply. considering I am going to use
> > >>
> > >> this on
> > >> a
> > >>
> > >> >> > web
> > >> >> > application with many user sessions.
> > >> >> >
> > >> >> > thank you very much in advance.
> >
> > ---------------------------------------------------------------------
> >
> > >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>
> > >> ---------------------------------------------------------------------
> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 25 21:41:44 2007
Return-Path: <java-user-return-26394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25997 invoked from network); 25 Feb 2007 21:41:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2007 21:41:43 -0000
Received: (qmail 86716 invoked by uid 500); 25 Feb 2007 21:41:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86685 invoked by uid 500); 25 Feb 2007 21:41:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86674 invoked by uid 99); 25 Feb 2007 21:41:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Feb 2007 13:41:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Feb 2007 13:41:33 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id l1PLf1H0027816
	for <java-user@lucene.apache.org>; Sun, 25 Feb 2007 23:41:01 +0200
Received: from [10.142.3.12] ([10.142.3.12]) by nimitz with ESMTP
	 id m2pn4ntm; 25 Feb 2007 23:41:00 +0200
Message-ID: <45E20269.9030101@teamware.com>
Date: Mon, 26 Feb 2007 08:40:57 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: QueryParser oddity with PrefixQuery
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Sun, 25 Feb 2007 23:41:01 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

In certain cases, I use a modified QueryParser which does not allow "field:" 
syntax.  While testing variants of Prefix and Wildcard Query, I came across an 
oddity with getPrefixQuery().  The standard getPrefixQuery() (2.1) is given 
termStr without the trailing *, so the check

if (!allowLeadingWildcard && termStr.startsWith("*"))
   throw new ParseException("'*' not allowed as first character in PrefixQuery");

only triggers if you parse the String "**", in which case the PrefixQuery is 
then created with Term(field, "*"); whereas if you parse "*", getWildcardQuery() 
is called.

So it's not obvious that the test "termStr.startsWith("*"))" can ever occur, so 
this code seems redundant.

After Doron's latest patch http://issues.apache.org/jira/browse/LUCENE-813, if 
you parse "**" it now calls getWildcardQuery().

Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 25 23:56:51 2007
Return-Path: <java-user-return-26395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53214 invoked from network); 25 Feb 2007 23:56:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2007 23:56:50 -0000
Received: (qmail 88906 invoked by uid 500); 25 Feb 2007 23:56:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88865 invoked by uid 500); 25 Feb 2007 23:56:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88850 invoked by uid 99); 25 Feb 2007 23:56:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Feb 2007 15:56:52 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jloramas@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Feb 2007 15:56:40 -0800
Received: by ug-out-1314.google.com with SMTP id k40so672528ugc
        for <java-user@lucene.apache.org>; Sun, 25 Feb 2007 15:56:19 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=XkfNNXQ1bq0EN28vBHJWK0e8bAtiLYO3l8p2GAiNEWknwMY3P2IMOSUAsaMLkYJnYnh/bG66OCa1ixIWeFTDlnVWHAW9iK84tyR0FhvfpqKYHF7HFAQmXXrTSAy+fngHHxonGE+PSRlP3TLo+aDj1ft2/MpTRxLNKaxy7A4M0dM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=PVWEHbifeNxbH0fnEvcUMy4bEiAFyz8vhQgFORPzz+CT9Wa62lnoucF5UZFP6Om9uLunG0A+Xqcm5n3mx8x9VFOcToB35Y8zXFr4WBBbwJSaevuL8P2igRmhPvpN7buZcGH/uLb6sjMCls/fe3DUNH/T4brUk4/4WP3bpHMVV8Q=
Received: by 10.67.22.7 with SMTP id z7mr5557746ugi.1172447779594;
        Sun, 25 Feb 2007 15:56:19 -0800 (PST)
Received: by 10.66.217.12 with HTTP; Sun, 25 Feb 2007 15:56:19 -0800 (PST)
Message-ID: <e71b9bb40702251556j33575bd3x60f5e346489d68ce@mail.gmail.com>
Date: Mon, 26 Feb 2007 00:56:19 +0100
From: "=?ISO-8859-1?Q?oramas_mart=EDn?=" <jloramas@gmail.com>
To: java-user@lucene.apache.org
Subject: A solution to HitCollector-based searches problems
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_57437_26954193.1172447779560"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_57437_26954193.1172447779560
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hello,

As you probably know, the HitCollector-based search API is not meant to wor=
k
remotely, because it will generate a RPC-callback for every non-zero score.

There is another problem with MultiSearcher-HitCollector-based search which
knows nothing about mix HitCollector based searches (not to say it has
hardcode the way to mix TopDocs for the score and for the Sort searches).
Also the ParallelMultiSearcher inherits this problems and is unable to
parallelize the HitCollector-based searcher.

A final problem with the HitCollector-based search is related to the lost o=
f
a limit in the results, as the Hits class implements thought the
getMoreDocs() function, and lazy loading and caching of documents it does.


To solve those problems it is necessary a factory (HitCollectorSource) able
to generate collectors for single (SingleHitCollector) an multi
(MultiHitCollector) searches, and a new search method in the
Searchable interface for it. To avoid modifications to the lucene core, the
later requirement is NOT IMPLEMENTED in the library I have just created.
Instead, an ugly solution, a wrapper for those searchers
(SearcherHCSourceWrapper) and a Filter wrapper (FilterHitCollectorSource) t=
o
carry the factory-based searches, is provided.

Each collector is based in a two steps sequence, one for collecting hits or
subsearcher results, and another for generating the final result.

Also, just in case you don't want to add a wrapper to each searcher of your
project, there is an adapted version of IndexSearcher, MultiSearcher and
ParallelMultiSearcher (only for version 2.1) modified exactly the same way
the wrapper class SearcherHCSourceWrapper does. Just put them in your
class-path (before the Lucene core jar) and you will be using the new
collector interfaces without modifying your code.

There are some unit testing (copied and adapted from the Lucene
2.1distribution).

See http://sourceforge.net/projects/lucollector/ for the jar files and the
code.

If you find it interesting to complement the Lucene project, tell me how to
put it in the contribution area.

Regards,
Jos=E9 L. Oramas

------=_Part_57437_26954193.1172447779560--

From java-user-return-26396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 26 00:17:01 2007
Return-Path: <java-user-return-26396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55386 invoked from network); 26 Feb 2007 00:16:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2007 00:16:59 -0000
Received: (qmail 4453 invoked by uid 500); 26 Feb 2007 00:17:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4410 invoked by uid 500); 26 Feb 2007 00:17:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4399 invoked by uid 99); 26 Feb 2007 00:17:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Feb 2007 16:17:02 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a7.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Feb 2007 16:16:50 -0800
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a7.g.dreamhost.com (Postfix) with ESMTP id B106D5C0AC
	for <java-user@lucene.apache.org>; Sun, 25 Feb 2007 16:16:31 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <e71b9bb40702251556j33575bd3x60f5e346489d68ce@mail.gmail.com>
References: <e71b9bb40702251556j33575bd3x60f5e346489d68ce@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <CD101A03-49D1-43BC-B04D-ACB7CFD62B5E@apache.org>
Content-Transfer-Encoding: quoted-printable
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: A solution to HitCollector-based searches problems
Date: Sun, 25 Feb 2007 19:16:27 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

However, see Wiki HowToContribute: http://wiki.apache.org/jakarta-=20
lucene/HowToContribute if you wish to donate your code.

-Grant
On Feb 25, 2007, at 6:56 PM, oramas mart=EDn wrote:

> Hello,
>
> As you probably know, the HitCollector-based search API is not =20
> meant to work
> remotely, because it will generate a RPC-callback for every non-=20
> zero score.
>
> There is another problem with MultiSearcher-HitCollector-based =20
> search which
> knows nothing about mix HitCollector based searches (not to say it has
> hardcode the way to mix TopDocs for the score and for the Sort =20
> searches).
> Also the ParallelMultiSearcher inherits this problems and is unable to
> parallelize the HitCollector-based searcher.
>
> A final problem with the HitCollector-based search is related to =20
> the lost of
> a limit in the results, as the Hits class implements thought the
> getMoreDocs() function, and lazy loading and caching of documents =20
> it does.
>
>
> To solve those problems it is necessary a factory =20
> (HitCollectorSource) able
> to generate collectors for single (SingleHitCollector) an multi
> (MultiHitCollector) searches, and a new search method in the
> Searchable interface for it. To avoid modifications to the lucene =20
> core, the
> later requirement is NOT IMPLEMENTED in the library I have just =20
> created.
> Instead, an ugly solution, a wrapper for those searchers
> (SearcherHCSourceWrapper) and a Filter wrapper =20
> (FilterHitCollectorSource) to
> carry the factory-based searches, is provided.
>
> Each collector is based in a two steps sequence, one for collecting =20=

> hits or
> subsearcher results, and another for generating the final result.
>
> Also, just in case you don't want to add a wrapper to each searcher =20=

> of your
> project, there is an adapted version of IndexSearcher, =20
> MultiSearcher and
> ParallelMultiSearcher (only for version 2.1) modified exactly the =20
> same way
> the wrapper class SearcherHCSourceWrapper does. Just put them in your
> class-path (before the Lucene core jar) and you will be using the new
> collector interfaces without modifying your code.
>
> There are some unit testing (copied and adapted from the Lucene
> 2.1distribution).
>
> See http://sourceforge.net/projects/lucollector/ for the jar files =20
> and the
> code.
>
> If you find it interesting to complement the Lucene project, tell =20
> me how to
> put it in the contribution area.
>
> Regards,
> Jos=E9 L. Oramas

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/=20
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 26 02:41:16 2007
Return-Path: <java-user-return-26397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92655 invoked from network); 26 Feb 2007 02:41:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2007 02:41:16 -0000
Received: (qmail 23918 invoked by uid 500); 26 Feb 2007 02:41:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23891 invoked by uid 500); 26 Feb 2007 02:41:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23867 invoked by uid 99); 26 Feb 2007 02:41:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Feb 2007 18:41:17 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [207.105.204.41] (HELO codecore.com) (207.105.204.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Feb 2007 18:41:05 -0800
Received: from [192.168.0.51] (adsl-75-17-183-76.dsl.irvnca.sbcglobal.net [75.17.183.76])
	by codecore.com (Postfix) with ESMTP id CCF27143CE
	for <java-user@lucene.apache.org>; Sun, 25 Feb 2007 18:43:46 -0800 (PST)
Message-ID: <45E248A9.1030107@tkz.net>
Date: Sun, 25 Feb 2007 18:40:41 -0800
From: "Paul Sundling (Webdaddy)" <tkz@tkz.net>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: filtering by first letter
References: <45DF4DD0.7010105@tkz.net> <359a92830702231339i605ab4e7i8a70658c1e9eda2f@mail.gmail.com>
In-Reply-To: <359a92830702231339i605ab4e7i8a70658c1e9eda2f@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

OK I'm not sure I understand your answer.  I thought TermEnum gave you 
all the terms in an index, not from a search result.

Let me clarify what I need.  I'm looking for a way to find out all the 
values of the FIELD_FILTER_LETTER field for any given search.

INDEX TIME:   (done for each indexed person, stores the first letter of 
their name as a field)
        if (person.getPersonName() != null) {
            String filterLetter = person.getPersonName().substring(0, 
1).toLowerCase();
            document.add(new Field(FIELD_FILTER_LETTER, filterLetter,
                    Field.Store.YES, Field.Index.UN_TOKENIZED));
        }

SEARCH TIME:  (need to present a list of all values of 
FIELD_FILTER_LETTER for any given SEARCH)
        IndexSearcher searcher = getIndexSearcher();
        Hits result = searcher.search(query, filter, sort);

If the filter letter has been picked, this is the filter used, otherwise 
the filter is null:
So params comes from
            TermQuery letterQuery = new TermQuery(new Term(
                    KEY_FILTER_LETTER, params.getFilterLetter()));
            QueryFilter letterFilter = new QueryFilter(letterQuery);
            result = searcher.search(query, letterFilter, sort);

So where do I plug in the TermEnum at search time?  I haven't used 
TermEnum before.

Paul


Erick Erickson wrote:
> See TermEnum (I don't think you need TermDocs for this). If you 
> instantiate
> a TermEnum(new Term("firstletterfield", "")), it'll enumerate all the 
> terms
> in your 'firstletter' field and you can just collect them and go...
>
> For that matter, and assuming that your names are UN_TOKENIZED, you 
> could do
> something like this without a special field by iterating over your
> personName field. This might be reasonable if your index is fairly static
> and you could create this list at IndexReader open time, especially since
> you can use TermEnum.skipTo("personName", "a") etc.....
>
> Best
> Erick
>
> On 2/23/07, Paul Sundling (Webdaddy) <tkz@tkz.net> wrote:
>>
>> I have a requirement to support filtering search results by first 
>> letter.
>>
>> This is relatively simple by adding a field to each index that
>> represents the first letter for that relevant index and then adding a
>> filter to the search.
>>
>> The hard part is that I need to list all the letters you can filter BY.
>> So if there are no names that start with S, it shouldn't appear as an
>> option.
>>
>> Is there a simple and performant way to get a set of all the unique
>> values for a Field in the Hits returned?  There would probably only be
>> low number of unique values.
>>
>> So let's say I have the following in my index:
>>
>> letter, personName
>> m, mike smith
>> p, paul smith
>> g, george smith
>> g, glenda smith
>>
>> I need to be able to display to the user that they can filter based on
>> M, P or G within their search for George.
>>
>> I could do a compromise and for search results above a certain level,
>> show all letters and numbers, but it won't always give correct values.
>> Imagine this edge case: A search for george has 50,000 results, but only
>> a couple people had george as their last name.  Not many of the letters
>> would be valid filters.
>>
>> Thanks for any ideas or approaches I overlooked.
>>
>> Paul Sundling
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 26 03:32:21 2007
Return-Path: <java-user-return-26398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5441 invoked from network); 26 Feb 2007 03:32:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2007 03:32:20 -0000
Received: (qmail 58066 invoked by uid 500); 26 Feb 2007 03:32:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58029 invoked by uid 500); 26 Feb 2007 03:32:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58018 invoked by uid 99); 26 Feb 2007 03:32:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Feb 2007 19:32:21 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.132.242 as permitted sender)
Received: from [209.85.132.242] (HELO an-out-0708.google.com) (209.85.132.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Feb 2007 19:32:10 -0800
Received: by an-out-0708.google.com with SMTP id c3so659012ana
        for <java-user@lucene.apache.org>; Sun, 25 Feb 2007 19:31:49 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=TnY8UmtcchBcP03X5kKZVrzOB+yRHfU4EeSNMPFcQN1uOJS2YNOduWuFxOfkHXAoR1lP29Ki1oNhFkQgO20SMXn0K7nuXaqgCm2OFYh2FU7bPLZJAHwFnCwjmLNxBzVSzisVvSMGmPuCCELj5xpfu7W+GKSFupcERYP2bjmNniE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qgSIO7ED25CEnXKaOjb6at8bs2uEwVNC0LYCI/Y2JTPGp5nN9ZVVDNd4jKveW8CeK3Ss/AEyxYX0ZjerrZ7B3YCaYGu4mS6ju3l7YVESINzxT5vWmdVJyUS9T1HSu2DjyRodYZhumfk4yya7jbqiW03pwdqq6ucU5wBtHOovFj0=
Received: by 10.114.167.2 with SMTP id p2mr498365wae.1172460709127;
        Sun, 25 Feb 2007 19:31:49 -0800 (PST)
Received: by 10.114.58.3 with HTTP; Sun, 25 Feb 2007 19:31:49 -0800 (PST)
Message-ID: <359a92830702251931p7b7886ffw9319f74767369641@mail.gmail.com>
Date: Sun, 25 Feb 2007 22:31:49 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: filtering by first letter
In-Reply-To: <45E248A9.1030107@tkz.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_99986_20224579.1172460709083"
References: <45DF4DD0.7010105@tkz.net>
	 <359a92830702231339i605ab4e7i8a70658c1e9eda2f@mail.gmail.com>
	 <45E248A9.1030107@tkz.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_99986_20224579.1172460709083
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

OK, I was thinking you were wondering how to get only the set of letters you
wanted the user to be able to choose from....

You're right, the TermEnum/TermDocs tell you all of the terms in an index,
not really useful for your problem as I understand it now....


How many documents do you have in your index? If it's not too huge , you
could think about making a filter for each letter of the alphabet. That
would only amount to 1 bit/document * 26. You could generate these at
IndexReader initialization time, or perhaps you could make them persistent
if your index didn't change too often... And this *is* a TermEnum/TermDocs
function <G>...

Anyway, the idea here is to pre-calculate 26 bitsets. Then, at query time,
go the HitCollector route and, as each document came through your Collector,
check it's ID against your filters to see if you should add the letter
represented by that bitset to your list of filter letters. So, if your
document ID was found in bitset 0, you'd have an a. in bitset 1, you'd have
a b, etc.

This kind of scheme is *probably* significantly more efficient than fetching
the document for each hit, but I have no metrics so you'll have to
experiment. I don't like the fact that there are 26 tests for every
document... but it's late on Sunday <G>..... I'm sure you can make some
optimizations like not testing for letters already found etc.

What you really want is a map of all document IDs to your letter filter it
seems. You could think about creating a map of this. Perhaps a RAMDir (or,
indeed, an FSDir) that you then searched/fetched for your documents,
populated at start-up time. The notion here is that each document would be a
document ID and its associated letter. Or maybe just a common Java Map,
mapping document ID to letter...... Maybe a huge document where each field
was the document id and the value of that field was the filter letter...

Again, I have no clue how performance relates to fetching a document, but
it's an idea.

But before going down these routes, how big is your index and do you have
any clue whether you actually have a performance issue?

And finally, can you sell your product manger on defining this problem away?
By that I mean is it possible to just present all 26 letters, and if the
user chooses one that's not out there, return "no such documents"? I mention
this because I've spent too much time implementing complex solutions to
problems that really don't add anything that the user notices and only serve
to make the product late <G>...

Best
Erick



On 2/25/07, Paul Sundling (Webdaddy) <tkz@tkz.net> wrote:
>
> OK I'm not sure I understand your answer.  I thought TermEnum gave you
> all the terms in an index, not from a search result.
>
> Let me clarify what I need.  I'm looking for a way to find out all the
> values of the FIELD_FILTER_LETTER field for any given search.
>
> INDEX TIME:   (done for each indexed person, stores the first letter of
> their name as a field)
>         if (person.getPersonName() != null) {
>             String filterLetter = person.getPersonName().substring(0,
> 1).toLowerCase();
>             document.add(new Field(FIELD_FILTER_LETTER, filterLetter,
>                     Field.Store.YES, Field.Index.UN_TOKENIZED));
>         }
>
> SEARCH TIME:  (need to present a list of all values of
> FIELD_FILTER_LETTER for any given SEARCH)
>         IndexSearcher searcher = getIndexSearcher();
>         Hits result = searcher.search(query, filter, sort);
>
> If the filter letter has been picked, this is the filter used, otherwise
> the filter is null:
> So params comes from
>             TermQuery letterQuery = new TermQuery(new Term(
>                     KEY_FILTER_LETTER, params.getFilterLetter()));
>             QueryFilter letterFilter = new QueryFilter(letterQuery);
>             result = searcher.search(query, letterFilter, sort);
>
> So where do I plug in the TermEnum at search time?  I haven't used
> TermEnum before.
>
> Paul
>
>
> Erick Erickson wrote:
> > See TermEnum (I don't think you need TermDocs for this). If you
> > instantiate
> > a TermEnum(new Term("firstletterfield", "")), it'll enumerate all the
> > terms
> > in your 'firstletter' field and you can just collect them and go...
> >
> > For that matter, and assuming that your names are UN_TOKENIZED, you
> > could do
> > something like this without a special field by iterating over your
> > personName field. This might be reasonable if your index is fairly
> static
> > and you could create this list at IndexReader open time, especially
> since
> > you can use TermEnum.skipTo("personName", "a") etc.....
> >
> > Best
> > Erick
> >
> > On 2/23/07, Paul Sundling (Webdaddy) <tkz@tkz.net> wrote:
> >>
> >> I have a requirement to support filtering search results by first
> >> letter.
> >>
> >> This is relatively simple by adding a field to each index that
> >> represents the first letter for that relevant index and then adding a
> >> filter to the search.
> >>
> >> The hard part is that I need to list all the letters you can filter BY.
> >> So if there are no names that start with S, it shouldn't appear as an
> >> option.
> >>
> >> Is there a simple and performant way to get a set of all the unique
> >> values for a Field in the Hits returned?  There would probably only be
> >> low number of unique values.
> >>
> >> So let's say I have the following in my index:
> >>
> >> letter, personName
> >> m, mike smith
> >> p, paul smith
> >> g, george smith
> >> g, glenda smith
> >>
> >> I need to be able to display to the user that they can filter based on
> >> M, P or G within their search for George.
> >>
> >> I could do a compromise and for search results above a certain level,
> >> show all letters and numbers, but it won't always give correct values.
> >> Imagine this edge case: A search for george has 50,000 results, but
> only
> >> a couple people had george as their last name.  Not many of the letters
> >> would be valid filters.
> >>
> >> Thanks for any ideas or approaches I overlooked.
> >>
> >> Paul Sundling
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_99986_20224579.1172460709083--

From java-user-return-26399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 26 05:16:14 2007
Return-Path: <java-user-return-26399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32220 invoked from network); 26 Feb 2007 05:16:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2007 05:16:13 -0000
Received: (qmail 48769 invoked by uid 500); 26 Feb 2007 05:16:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48736 invoked by uid 500); 26 Feb 2007 05:16:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48725 invoked by uid 99); 26 Feb 2007 05:16:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Feb 2007 21:16:15 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 209.85.134.189 as permitted sender)
Received: from [209.85.134.189] (HELO mu-out-0910.google.com) (209.85.134.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Feb 2007 21:16:04 -0800
Received: by mu-out-0910.google.com with SMTP id i10so1208917mue
        for <java-user@lucene.apache.org>; Sun, 25 Feb 2007 21:15:42 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=oPSu0thpYcbVPL38+WQtzHqlEcIJFTvbazQY+xWl1PM6J/upM7R9usK4FwGkR5ZNqJ842WdCvK1/2Mgs+BPPFFp79TpqYSFEpVSdswBGl5bLtUsADS5O84c6bkHu2+JH6VAnRHBToQTare1cDrismEdfuKcNpBT/VeW3HkjVVmc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=fL3hgJz1zeJ0nXHEH7X35Tyg/clwgEcUEN2LeDTdE/RHKNTeC3d1sRBbtQeHVu2Ku0QA03+b3pdrEk6QCSKe9JsFC6ZGeQPMb47egqU/9o0DWTtVhXt0/IvFa6n3fNWYKxCOpABO/TSHMJSBNUkw6PkWV8L7TH0t/NP6mvk1XUc=
Received: by 10.82.178.11 with SMTP id a11mr1493942buf.1172466942533;
        Sun, 25 Feb 2007 21:15:42 -0800 (PST)
Received: by 10.82.163.2 with HTTP; Sun, 25 Feb 2007 21:15:42 -0800 (PST)
Message-ID: <34b8543c0702252115m340da119p5cdbfea15a65d039@mail.gmail.com>
Date: Mon, 26 Feb 2007 08:45:42 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: a question about indexing database tables
In-Reply-To: <359a92830702220533n40a4c115kd8971519e1e3266b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_63659_6744.1172466942451"
References: <34b8543c0702220017h52810c3fi92d9d76a33f5e52f@mail.gmail.com>
	 <359a92830702220454o31cf4958xc2a14ab39da8dd0a@mail.gmail.com>
	 <34b8543c0702220517v265e8b4fy846910c13313bb60@mail.gmail.com>
	 <359a92830702220533n40a4c115kd8971519e1e3266b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_63659_6744.1172466942451
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Erick
thank you and sorry for taking long my reply. I am involving in a project.

I was thinking of your idea about storing all tables in the same field. it
seems to me a good idea, but some vague issues.
first, how to create a lucene's document. did you mean, storing all tables
by joining all tables?
if no, how to determine each row to be inserted in the index file?

second, let's consider we indexed all tables as you said, how to find out
the data related in hierarchy of tables.

please have a look at following structure, I want to know whether I
understand you or not?

table1_id     table1_name table1_family   table2_id_emp  table2_address
    1                   x1               f1
1                     street1
    2                   x2               f2
1                     street2
    3                   x3               f3
2                     street6


On 2/22/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> OK, I was off on a tangent. We've had several discussions where people
> were
> effectively trying to replace a RDBMS with Lucene and finding out it that
> RDBMSs are very good at what they do <G>...
>
> But in general, I'd probably approach it by doing the RDBMS work first and
> indexing the result. I think this is your option (2). Yes, this will
> de-normalize a bunch of your data and you'll chew up some space, but disk
> space is cheap. Very cheap <G>.
>
> One thing to remember, though, that took me a while to get used to,
> especially when I had my database hat on. There's no requirement that
> every
> document in a Lucene index have the same fields. Conceptually, you can
> store
> *all* your tables in the same index. So a document for table one has
> fields
> table_1_field1 table_1_field2 table_1_field3. "documents" for table two
> have
> fields table_2_field1 table_2_field2 etc.....
>
> These documents will never interfere with each other during searches
> because
> they share no fields (and each query goes against a particular field).
>
> I mention this because your maintenance will be much easier if you only
> have
> one index <G>....
>
> Best
> Erick
>
> On 2/22/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
> >
> > Thanks Erick
> > but we have to because we need to execute very big queries that create
> > traffik network and are very very slow. but with lucene we do it in some
> > milliseconds. and now we indexed our needed information by joining
> tables.
> > it works fine, besides, it returns the exact result as we can get from
> > database. we indexed about one million records.
> > but let me say, we are not using it instead of database, we use it to
> > generate some dynamic reports that if we did it by sql queries, it would
> > take about 15 minutes.
> >
> > On 2/22/07, Erick Erickson <erickerickson@gmail.com> wrote:
> > >
> > > don't do either one <G>.... Search this mail archive for discussions
> of
> > > databases, there are several long threads discussing this along with
> > > various
> > > options on how to make this work. See particularly a mail entitled
> > > *Oracle/Lucene
> > > integration -status- *and any discussions participated in by Marcelo
> > > Ochoa.
> > >
> > > But, in general, Lucene is a text search engine, NOT a RDBMS. When you
> > > start
> > > saying "keep all relation in order to get right result", it sounds
> like
> > > you're trying to use Lucene as a RDBMS. It doesn't do this very well,
> > > that's
> > > not what it was built for. There are several options...
> > > > get clever with your index such that you don't do anything like join
> > > tables. This implies that you re-design your data layout, probably
> > > de-normalizing lots of data, etc.
> > > > Use a hybrid solution. That is, use Lucene to search text and then
> do
> > > whatever further relational processing you need in the database. You
> > need
> > > to
> > > store enough information in the Lucene documents to be able to query
> the
> > > database.
> > > > stick with a database if it works for you already.
> > >
> > > In general, it's a mis-use of lucene to try to get RDBMS behavior out
> of
> > > it.
> > > When you find yourself trying to do this, take a few minutes and ask
> > > yourself if this design is appropriate, and continue only if you can
> > > answer
> > > in the affirmative...
> > >
> > > Best
> > > Erick
> > >
> > > On 2/22/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
> > > >
> > > > Hello
> > > > In our application we have to index the database tables, there is
> two
> > > way
> > > > to
> > > > make this
> > > >
> > > > 1- index each table in a separate directory and then keep all
> relation
> > > in
> > > > order to get right result. in this method, we should use filters to
> > > > overcome
> > > > the problem of searching on another search result.
> > > > 2. joining two or more tables and index the result of join query.
> > > >
> > > > which approach is better, reliable, has acceptable performance.
> > > >
> > > > thanks
> > > > --
> > > > Regards,
> > > > Mohammad
> > > >
> > >
> >
> >
> >
> > --
> > Regards,
> > Mohammad
> >
>



-- 
Regards,
Mohammad

------=_Part_63659_6744.1172466942451--

From java-user-return-26400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 26 10:17:56 2007
Return-Path: <java-user-return-26400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26773 invoked from network); 26 Feb 2007 10:17:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2007 10:17:54 -0000
Received: (qmail 47413 invoked by uid 500); 26 Feb 2007 10:17:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47312 invoked by uid 500); 26 Feb 2007 10:17:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47288 invoked by uid 99); 26 Feb 2007 10:17:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 02:17:36 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of zhang.xiaoye@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 02:17:25 -0800
Received: by nf-out-0910.google.com with SMTP id i2so1581699nfe
        for <java-user@lucene.apache.org>; Mon, 26 Feb 2007 02:17:04 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=mxakXHdfqhmcWck8fR0S6+jyGBfFjCLMJdiES3U3x/jkpu7XWV+lBrIZ8L8kSLy/QCCxg3yU95RJLO9bbF9C9Ez6oNETo7HSG6EurgIi26kLxYdk/q+z15SQLE8UvPgLhvdGIrn9yYF+V/NV2HHWp28N3vVlahij2jjGUk69bYc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=I8ESjG8NtJBSgObueUsCebAeH1797NEVcIr6RqOxfrQnZsHgE8roRjHbLvFbUDHJeybQE27KjlC8NdPb46TLzjwz5RIwH/zkyLaJvWwE3rbnG0bzIhQ8FURqLjh9ptUnX543ounsWecymVADryoo1IpEQn+zB+1Rr+RISevhn7I=
Received: by 10.78.183.15 with SMTP id g15mr430438huf.1172485018501;
        Mon, 26 Feb 2007 02:16:58 -0800 (PST)
Received: by 10.78.48.15 with HTTP; Mon, 26 Feb 2007 02:16:58 -0800 (PST)
Message-ID: <a43ef01e0702260216xafed0bdj2ed5123ba9d023bb@mail.gmail.com>
Date: Mon, 26 Feb 2007 18:16:58 +0800
From: "=?UTF-8?B?5p2O5a+75qyi5pmV6I+c5LqG?=" <zhang.xiaoye@gmail.com>
To: java-user@lucene.apache.org
Subject: how to query range of Date by given date string?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_74822_29491842.1172485018460"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_74822_29491842.1172485018460
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline

aGVsbG86CkkgaGF2ZSBTdG9yZWQgRGF0ZSBpbiBpbmRleCwgYW5kIGhvdyBjb3VsZCBJIHF1ZXJ5
IHRoZSByZXN1bHQgYnkgZ2l2ZW4gcmFuZ2UKb2YgRGF0ZT8KZm9yIGV4YW1wbGU6Ckkgd291bGQg
ZmluZCBzb21lIG1hdGNoaW5nIHJlc3VsdCBpbiB0aGUgcmFuZ2Ugb2YgMjAwNy0wMi0yNCB0byAy
MDA3LTAyLTI1LgoKCi0tIAotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpXb0NhbOeUn+a0u++8jOWwveWcqOaOjOaPoe+8gQpodHRw
Oi8va29md2FuZy53b2NhbC5jbgotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo=
------=_Part_74822_29491842.1172485018460--

From java-user-return-26401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 26 10:35:26 2007
Return-Path: <java-user-return-26401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34714 invoked from network); 26 Feb 2007 10:35:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2007 10:35:25 -0000
Received: (qmail 72355 invoked by uid 500); 26 Feb 2007 10:35:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72323 invoked by uid 500); 26 Feb 2007 10:35:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72312 invoked by uid 99); 26 Feb 2007 10:35:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 02:35:26 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=FROM_HAS_ULINE_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.29] (HELO out5.smtp.messagingengine.com) (66.111.4.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 02:35:13 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id D34491D32BD;
	Mon, 26 Feb 2007 05:34:52 -0500 (EST)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by out1.internal (MEProxy); Mon, 26 Feb 2007 05:34:52 -0500
X-Sasl-enc: yptxs+5yDPXoAtBo49yzQyiBH9IFrhdDnz/ISEI9PID0 1172486092
Received: from [192.168.2.36] (unknown [81.105.111.192])
	by mail.messagingengine.com (Postfix) with ESMTP id 19BBF1A5AF;
	Mon, 26 Feb 2007 05:34:51 -0500 (EST)
Message-ID: <45E2B7CC.9070704@fastmail.fm>
Date: Mon, 26 Feb 2007 10:34:52 +0000
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To:  paul_t100@fastmail.fm
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To: Chris Hostetter <hossman_lucene@fucit.org>
CC:  java-user@lucene.apache.org
Subject: Re: Can I use Lucene to retrieve a list of duplicates
References: <45DF055C.9050705@fastmail.fm> <359a92830702230722w19c441f5oe3d6fdd361ef23c@mail.gmail.com> <45DF1423.3070707@fastmail.fm> <Pine.LNX.4.58.0702231446220.6828@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0702231446220.6828@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Sorry I don't see how I get access to TermEnums. So far Ive created a 
document per row, the first field holds the row id, then i have one  
field per column, and checked  the index has been created ok with some 
search querys.
I now want to pass a column to check, and receive  a list of all the 
documents that contain  a  term  in that column which is used by at 
least one other document for that column ( a duplicate term).

thanks paul

Chris Hostetter wrote:
> : Thanks this might do it, but do I need to know the terms beforehand, I
> : just want to return any terms with frequency more than one?
>
> no, TermEnum will let you iterate over all the terms ... you don't even
> need TermDocs if you just want the docFreq for each term (which would be 1
> if there are no duplicates)
>
> : Erick Erickson wrote:
> : > Sure, you can use the TermDocs/TermEnum classes. Basically, for a term
> : > (probably column value in your app) these let you quickly answer the
> : > question "which (and how many) documents does this term appear in".
> : > What you get is the Lucene doc id, which let's you fetch all the
> : > information about the documents you want.
> : >
> : > Erick
> : >
> : > On 2/23/07, *Paul Taylor* <paul_t100@fastmail.fm
> : > <mailto:paul_t100@fastmail.fm>> wrote:
> : >
> : >     Hi I have Java Swing application with a table, I was considering using
> : >     Lucene to index the data in the table. One task Id like to do is
> : >     for the
> : >     user to select 'Find Duplicate records for Column X', then I would
> : >     filter the table to show only records where there is more than one
> : >     with
> : >     the same value i.e duplicate for that column. Is there a way to return
> : >     all the duplicates from a Lucene index.
> : >
> : >     thanks paul Taylor
> : >
> : >     ---------------------------------------------------------------------
> : >     To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : >     <mailto:java-user-unsubscribe@lucene.apache.org>
> : >     For additional commands, e-mail: java-user-help@lucene.apache.org
> : >     <mailto:java-user-help@lucene.apache.org>
> : >
> : >
> : > ------------------------------------------------------------------------
> : >
> : > Internal Virus Database is out-of-date.
> : > Checked by AVG Free Edition.
> : > Version: 7.1.394 / Virus Database: 268.16.5/616 - Release Date: 04/01/2007
> : >
> :
> :
> : ---------------------------------------------------------------------
> : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : For additional commands, e-mail: java-user-help@lucene.apache.org
> :
>
>
>
> -Hoss
>
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 26 11:39:30 2007
Return-Path: <java-user-return-26402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63748 invoked from network); 26 Feb 2007 11:39:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2007 11:39:29 -0000
Received: (qmail 64531 invoked by uid 500); 26 Feb 2007 11:39:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64486 invoked by uid 500); 26 Feb 2007 11:39:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64470 invoked by uid 99); 26 Feb 2007 11:39:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 03:39:27 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 03:39:16 -0800
Received: by nf-out-0910.google.com with SMTP id i2so1599444nfe
        for <java-user@lucene.apache.org>; Mon, 26 Feb 2007 03:38:54 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jIG1taNR5/nsu04k6QgmHtESsfkx+Ia21z/lhGibKErD3nRxvGp9XIfh6mI8R7/4DbdrHApkomtLxYwG1FccNBmxuYm03OJZ0qEOfOsFjKJR8RVt944N0BBKqttH8MGrGbxuOkPk7zxdy+m8DDDj/xZANR7/21GUZ06xhK6woe0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Df5wBgt+R/dMnoslbt0zF65rtosWgnpNPIFhNnsSv8Ct6Zboe5Mm5xjzlUbvnZJSF8vZBm6ytX6qYmyk9BQ+nWkHV279+L9pfFXZeu4qH4oCPSLCq+QNK17X8yAmw4Uzy6v8/jBHBq9Vn9UyzONTmWwSwwBRkzRyTJ5m5F+7l7A=
Received: by 10.82.114.3 with SMTP id m3mr1613311buc.1172489934366;
        Mon, 26 Feb 2007 03:38:54 -0800 (PST)
Received: by 10.82.163.2 with HTTP; Mon, 26 Feb 2007 03:38:54 -0800 (PST)
Message-ID: <34b8543c0702260338i13cb8fe6j37189dae21ac45c@mail.gmail.com>
Date: Mon, 26 Feb 2007 15:08:54 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to define a pool for Searcher?
In-Reply-To: <200702251742.02643.nicolas.lalevee@anyware-tech.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_66149_30672469.1172489934323"
References: <34b8543c0702220009m72f9e9c7pf8f9764953be6a48@mail.gmail.com>
	 <45E1A034.5030200@gmail.com>
	 <34b8543c0702250755x356b3238l31b94690b605ea35@mail.gmail.com>
	 <200702251742.02643.nicolas.lalevee@anyware-tech.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_66149_30672469.1172489934323
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline

Tm8uIGFjdHVhbGx5IEkgZG9udCBjbG9zZSB0aGUgc2VhcmNoZXIuIEkganVzdCBzZXQgYSBmbGFn
IHRvIHRydWUgb3IgZmFsc2UuCm15IGNvbnNpZGVyYXRpb25zIGFyZToKW3BsZWFzZSBub3RlIEkg
cHJvdmlkZWQgYSBSZXN1bHRTZXQgc28gSSBkaXNwbGF5IHRoZSByZXN1bHQgcGFnZSBieSBwYWdl
IGFuZApkb250IGxvYWQgYWxsIHRoZSByZXN1bHQgaW4gYSBsaXN0XQoxLSBzaG91bGQgSSBvcGVu
IGEgc2VhcmNoZXIgZm9yIGVhY2ggdXNlcj8gYW5kIG9uZSByZWFkZXIgZm9yIGFsbCB1c2VyCnNl
c3Npb24/CjItIG9yIGNyZWF0ZSBhIHBvb2wgb2Ygc2VhcmNoZXIgYW5kIG9uZSByZWFkZXIgZm9y
IGFsbCBzZWFyY2hlcj8KMy0gb3IgYSBwb29sIG9mIHNlYXJjaGVyIGFuZCBlYWNoIGhhcyBpdHMg
b3duIHJlYWRlci4gYnV0IG5ldmVyIGNsb3NlIHRoZW0KanVzdCBzZXQgYSBmbGFnIHRvIHRydWUu
Cgp3aGljaCBvbmU/CgoKT24gMi8yNS8wNywgTmljb2xhcyBMYWxldsOpZSA8bmljb2xhcy5sYWxl
dmVlQGFueXdhcmUtdGVjaC5jb20+IHdyb3RlOgo+Cj4gTGUgZGltYW5jaGUgMjUgZsOpdnJpZXIg
MjAwNyAxNjo1NSwgTW9oYW1tYWQgTm9yb3V6aSBhIMOpY3JpdDoKPiA+IHNvLCB5b3UgbWVhbiwg
SSBvcGVuIG9uZSByZWFkZXIgZm9yIGVhY2ggc2Vzc2lvbiAoZWFjaCB1c2VyKSBhbmQgbmV2ZXIK
PiA+IGNsb3NlIGl0IHVudGlsIHRoZSBzZXNzaW9uIGhhcyBleHBpcmVkPyBpZiBJIGRvIHRoaXMs
IGlzIHRoYXQgYWZmZWN0IHRoZQo+ID4gcGVyZm9ybWFuY2U/Cj4KPiBUaGUgc2VhcmNoZXIvcmVh
ZGVyIGlzIGEgdmlldyBvbiB0aGUgaW5kZXguIEFuZCBlYWNoIHRpbWUgeW91IG9wZW4gYSBuZXcK
PiBvbmUsCj4gaXQgY29zdCBzb21lIHRpbWUuIEFuZCB0aGUgb25seSByZWFzb24gdG8gaGF2ZSBh
IG5ldyB2aWV3IG9uIHRoZSBpbmRleCBpcwo+IHRoYXQgeW91IG1vZGlmaWVkIGl0Lgo+IEFzIHlv
dSBuZXZlciBtb2RpZnkgaXQsIGFzIHNhaWQgTWFyaywgbmV2ZXIgY2xvc2UgeW91ciBzZWFyY2hl
ci9yZWFkZXIuIElmCj4geW91ciBzZXZyYWwgdXNlcnMgYXJlIHJlYWRpbmcgdGhlIHNhbWUgaW5k
ZXgsIHlvdSBtaWdodCBzaGFyZSB0aGUgaW5zdGFuY2UKPiBvZgo+IHRoZSBzZWFyY2hlciBpbiB0
aGUgZGlmZmVyZW50IHVzZXIgc2Vzc2lvbnMuCj4KPiBOaWNvbGFzCj4KPiA+Cj4gPiBPbiAyLzI1
LzA3LCBNYXJrIE1pbGxlciA8bWFya3JtaWxsZXJAZ21haWwuY29tPiB3cm90ZToKPiA+ID4gSWYg
eW91IG5ldmVyIG1vZGlmeSB5b3VyIGluZGV4IHlvdSBzaG91bGQgbmV2ZXIgbmVlZCB0byBjbG9z
ZSB5b3VyCj4gPiA+IHJlYWRlciAob3Igc2VhcmNoZXIpLiBEb2luZyBzbyB3b3VsZCBqdXN0IHNs
b3cgeW91IGRvd24uCj4gPiA+Cj4gPiA+IE1vaGFtbWFkIE5vcm91emkgd3JvdGU6Cj4gPiA+ID4g
SGkKPiA+ID4gPiBhY3R1YWxseSBJIGRvbnQgaGF2ZSBhbnkgd3JpdGVyIG9yIHdyaXRpbmcgcmVh
ZGVyLiBJIGp1c3QgaGF2ZQo+IHJlYWRlci4KPiA+ID4gPiB3aGVuCj4gPiA+ID4gYSByZWFkZXIg
aXMgY3JlYXRlZCBieSB0aGUgdXNlciBiZWNhdXNlIHRoZSBkb2N1bWVudCByZXR1cm5lZCBieQo+
IGhpdHMKPiA+ID4gPiBpcyB2ZXJ5IG11Y2gsIGZvciBleGFtcGxlIDIwLDAwMCBzbyBJIGRpc3Bs
YXkgdGhlIHJlc3VsdCBwYWdlIGJ5Cj4gcGFnZS4KPiA+ID4gPiB3aGVuZXZlcgo+ID4gPiA+IHVz
ZXIgY2xpY2sgdG8gbmV4dCBwYWdlIHRoZSBoaXRzIHdpbGwgdXNlIHRoZSByZWFkZXIgdG8gbG9h
ZCBuZXh0IDIwCj4gPiA+ID4gcmVjb3JkcywKPiA+ID4gPiBiZXNpZGVzLCBJIGRvbnQgaGF2ZSBv
bmUgZGlyZWN0b3J5LCB0aGVyZSBhcmUgbW9yZSB0aGFuIG9uZQo+IGRpcmVjdG9yeQo+ID4gPgo+
ID4gPiBhbmQKPiA+ID4KPiA+ID4gPiBpbmRleCBvbiB0aGUgc2VydmVyIGFuZCBlYWNoIHVzZXIg
bWF5IHJlcXVlc3QgZm9yIG9uZSBvZiB0aGVtLgo+ID4gPiA+IHRoZSBwcm9ibGVtIGlzLCBhIHVz
ZXIgbWF5IGNsb3NlIGhpcyBicm93c2VyIHdpbmRvdyBhbmQgdGhlIHJlYWRlcgo+ID4gPiA+IHdp
bGwgc3RheQo+ID4gPiA+IG9wZW4gYmVjYXN1ZSBJIGNhbnQgZGV0ZWN0IGl0LiBhbmQgZWl0aGVy
IGlmIGhpcyBzZXNzaW9uIGV4cGlyZXMgbXkKPiA+ID4gPiBkZXN0cm95Cj4gPiA+ID4gbWV0aG9k
IHdpbGwgYmUgY2FsbGVkIGFuZCBzZWFyY2hlciB3aWxsIGNsb3NlIGJ1dCBpbiB0aGUgY2FjaGVk
Cj4gPiA+ID4gc2VhcmNoZXIgaQo+ID4gPiA+IGNhbiBub3QgZGV0ZWN0IHdoaWNoIG9uZSBpcyBj
bG9zZWQgYW5kIHJlYWR5IGl0IGZvciBuZXh0IHVzZXIuIGlmCj4gdGhlCj4gPiA+ID4gc2VhcmNo
ZXIgaGFkIGEgaXNDbG9zZWQoKSBtZXRob2QgaXQgd2FzIGVhc3kgdG8gZGV0ZXJtaW5lIGJ1dAo+
ID4gPiA+IHVuZm9ydHVuYXRlbHkKPiA+ID4gPiBpdCdzIGhhcydudAo+ID4gPiA+Cj4gPiA+ID4g
YW55IGlkZWE/Cj4gPiA+ID4gdGhhbmtzIGFnYWluCj4gPiA+ID4KPiA+ID4gPiBPbiAyLzI1LzA3
LCBNYXJrIE1pbGxlciA8bWFya3JtaWxsZXJAZ21haWwuY29tPiB3cm90ZToKPiA+ID4gPj4gSSBh
bSBhIGJpdCBjb25mdXNlZCBhYm91dCB3aGF0IHlvdSBhcmUgYXNraW5nLiBXaHkgZG8geW91IG5l
ZWQgdGhlCj4gPiA+ID4+IFNlYXJjaGVyIHRvIHRpbWUgb3V0PyBUaGF0IGNvZGUgc2hvdWxkIHJl
bGVhc2UgeW91ciBzZWFyY2hlcnMgYXQKPiB0aGUKPiA+ID4gPj4gYXBwcm9wcmlhdGUgdGltZXMu
Li53aGVuIHRoZSBpbmRleCBoYXMgYmVlbiBtb2RpZmllZC4gVGhlIHdheSB0aGF0Cj4gSQo+ID4g
Pgo+ID4gPiB1c2UKPiA+ID4KPiA+ID4gPj4gaXQgaXMgdG8gbWFrZSBhIHN5bmNocm9uaXplZCBt
YXAgdGhhdCBrZWVwcyBhcm91bmQgYW4gaW5kZXgKPiBhY2Nlc3Nvcgo+ID4gPgo+ID4gPiBmb3IK
PiA+ID4KPiA+ID4gPj4gZWFjaCBpbmRleCB0aGF0IEkgb3Blbi4uLmZyb20gdGhlcmUgdGhlIGNv
ZGUgc2hvdWxkIGRvIHRoZQo+IHJlc3QuLi53aGVuCj4gPiA+Cj4gPiA+IGEKPiA+ID4KPiA+ID4g
Pj4gd3JpdGVyIG9yIGEgd3JpdGluZyByZWFkZXIgaXMgcmVsZWFzZWQgdGhlIGNvZGUgd2FpdHMg
Zm9yIGFsbAo+ID4gPiA+PiBzZWFyY2hlcnMgdG8gYmUgcmVsZWFzZWQgYW5kIHRoZW4gY2xlYXJz
IHRoZSBjYWNoZSBvZiBzZWFyY2hlcnMgYW5kCj4gPiA+ID4+IG5ldyBzZWFyY2hlcnMgYXJlIGNy
ZWF0ZWQgd2hlbiByZXF1ZXN0ZWQgdW50aWwgYW5vdGhlciB3cml0ZXIgb3IKPiA+ID4gPj4gd3Jp
dGluZyByZWFkZXIgaXMgcmVsZWFzZWQuLi4KPiA+ID4gPj4KPiA+ID4gPj4gTW9oYW1tYWQgTm9y
b3V6aSB3cm90ZToKPiA+ID4gPj4gPiBUaGFuayB5b3UgTWFyayBmb3IgeW91ciB1c2VmdWwgaGVs
cC4gdGhlIGNvZGUgeW91IGludHJvZHVjZSB3YXMKPiB2ZXJ5Cj4gPiA+ID4+ID4gaGVscGZ1bAo+
ID4gPiA+PiA+IGZvciBtZQo+ID4gPiA+PiA+Cj4gPiA+ID4+ID4gYnV0IG15IG9ubHkgcXVlc3Rp
b24gaXMgdGhhdCBJIG5lZWQgdG8gcGxhY2UgYW4gaWRsZSB0aW1lIGZvcgo+IGVhY2gKPiA+ID4g
Pj4KPiA+ID4gPj4gb3Blbgo+ID4gPiA+Pgo+ID4gPiA+PiA+IHNlYXJjaGVyLCBzbyBpZiBpdCBl
eGNlZWQgdGhlIHNwZWNpZmljIHRpbWUgdGhlbiByZWxlYXNlIHRoYXQKPiA+ID4KPiA+ID4gc2Vh
cmNoZXIKPiA+ID4KPiA+ID4gPj4gPiBhbmQKPiA+ID4gPj4gPiBnZXQgcmVhZHkgZm9yIGFub3Ro
ZXIgdGhyZWFkLgo+ID4gPiA+PiA+Cj4gPiA+ID4+ID4gaG93IGNhbiBJIHB1dCBzdWNoIHRoaXMg
ZmVhdHVyZSwgSSB3YXMgdGhpbmtpbmcgb2YgYSB0aW1lb3V0Cj4gPiA+Cj4gPiA+IGxpc3RlbmVy
LAo+ID4gPgo+ID4gPiA+PiA+IGJ1dAo+ID4gPiA+PiA+IGRvbnQga25vdyB3aGVyZSB0dSBwdXQg
aXQuIEkgaGF2ZSBhIFNpbmdsZVNlYXJjaGVyIHRoYXQgd3JhcHMKPiA+ID4KPiA+ID4gbHVjZW5l
J3MKPiA+ID4KPiA+ID4gPj4gPiBTZWFyY2hlciBhbmQgaXQgcmV0dXJucyBhbiBSZXN1bHRTZXQg
aW4gd2hpY2ggSSBwdXQgYSBIaXRzCj4gb2JqZWN0Lgo+ID4gPiA+PiA+IGRvIEkgaGF2ZQo+ID4g
PiA+PiA+IHRvIHB1dCB0aGUgdGltZSBpbiBteSBSZXN1bHRTZXQgb3IgbXkgU2luZ2xlU2VhY2hl
cj8KPiA+ID4gPj4gPgo+ID4gPiA+PiA+IHN0aWxsIEkgZG9udCBrbm93IGVocnRocnQgdGhlIHJl
YWRlciBpcyBpbXBvcnRhbnQgZm9yIEhpdHMgb3IKPiA+ID4gPj4KPiA+ID4gPj4gU2VhcmNoZXI/
Cj4gPiA+ID4+Cj4gPiA+ID4+ID4gY29uc2lkZXIgSSBwYXNzZWQgYSBoaXRzIHRvIG15IFJlc3Vs
dFNldCwgbm93LCBpZiBJIGNsb3NlCj4gc2VhcmNoZXIsCj4gPiA+ID4+ID4gd2lsbCB0aGUKPiA+
ID4gPj4gPiBSZWFkZXIgZ2V0IGNsb3NlZD8gIG9yIGFub3RoZXIgdmFndWUgdGhpbmcgaXMgY2Fu
IGEgUmVhZGVyIHdvcmsKPiA+ID4KPiA+ID4gdGhyZWFkCj4gPiA+Cj4gPiA+ID4+ID4gc2FmZWx5
IGZvciBldmVyeSBTZWFyY2hlciB3aXRoIGRpZmZlcmVuZXQgcXVlcmllcz8KPiA+ID4gPj4gPgo+
ID4gPiA+PiA+IFRoYW5rIHlvdSB2ZXJ5IG11Y2ggYWdhaW4uCj4gPiA+ID4+ID4KPiA+ID4gPj4g
PiBPbiAyLzIyLzA3LCBNYXJrIE1pbGxlciA8bWFya3JtaWxsZXJAZ21haWwuY29tPiB3cm90ZToK
PiA+ID4gPj4gPj4gSSB3b3VsZCBub3QgZG8gdGhpcyBmcm9tIHNjcmF0Y2guLi5pZiB5b3UgYXJl
IGludGVyZXN0ZWQgaW4gU29scgo+IGdvCj4gPiA+ID4+Cj4gPiA+ID4+IHRoYXQKPiA+ID4gPj4K
PiA+ID4gPj4gPj4gcm91dGUgZWxzZSBJIHdvdWxkIGJ1aWxkIG9mZgo+ID4gPiA+PiA+PiBodHRw
Oi8vaXNzdWVzLmFwYWNoZS5vcmcvamlyYS9icm93c2UvTFVDRU5FLTM5MAo+ID4gPiA+PiA+Pgo+
ID4gPiA+PiA+PiAtIE1hcmsKPiA+ID4gPj4gPj4KPiA+ID4gPj4gPj4gTW9oYW1tYWQgTm9yb3V6
aSB3cm90ZToKPiA+ID4gPj4gPj4gPiBIaSBhbGwsCj4gPiA+ID4+ID4+ID4gSSBhbSBnb2luZyB0
byBidWlsZCBhIFNlYXJjaGVyIHBvb2xpbmcuIGlmIGFueSBvbmUgaGFzCj4gPiA+ID4+Cj4gPiA+
ID4+IGV4cGVyaWVuY2Ugb24KPiA+ID4gPj4KPiA+ID4gPj4gPj4gPiB0aGlzLCBJCj4gPiA+ID4+
ID4+ID4gd291bGQgYmUgZ2xhZCB0byBoZWFyIGhpcy9oZXIgcmVjb21tZW5kYXRpb24gYW5kIHN1
Z2dlc3Rpb24uIEkKPiA+ID4KPiA+ID4gd2FudAo+ID4gPgo+ID4gPiA+PiB0bwo+ID4gPiA+Pgo+
ID4gPiA+PiA+PiA+IGtub3cKPiA+ID4gPj4gPj4gPiB3aGF0IGlzc3VlcyBJIHNob3VsZCBiZSBh
cHBseS4gY29uc2lkZXJpbmcgSSBhbSBnb2luZyB0byB1c2UKPiA+ID4gPj4KPiA+ID4gPj4gdGhp
cyBvbgo+ID4gPiA+PiBhCj4gPiA+ID4+Cj4gPiA+ID4+ID4+ID4gd2ViCj4gPiA+ID4+ID4+ID4g
YXBwbGljYXRpb24gd2l0aCBtYW55IHVzZXIgc2Vzc2lvbnMuCj4gPiA+ID4+ID4+ID4KPiA+ID4g
Pj4gPj4gPiB0aGFuayB5b3UgdmVyeSBtdWNoIGluIGFkdmFuY2UuCj4gPiA+Cj4gPiA+IC0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLQo+ID4gPgo+ID4gPiA+PiA+PiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVz
ZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPiA+ID4gPj4gPj4gRm9yIGFkZGl0aW9u
YWwgY29tbWFuZHMsIGUtbWFpbDoKPiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+
ID4gPiA+Pgo+ID4gPiA+Pgo+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+ID4gPiA+PiBUbyB1bnN1YnNjcmliZSwg
ZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPiA+ID4gPj4g
Rm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFw
YWNoZS5vcmcKPiA+ID4KPiA+ID4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gPiA+IFRvIHVuc3Vic2NyaWJlLCBl
LW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+ID4gPiBGb3Ig
YWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hl
Lm9yZwo+Cj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2Vy
LXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMs
IGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcKPgo+CgoKLS0gClJlZ2Fy
ZHMsCk1vaGFtbWFkCg==
------=_Part_66149_30672469.1172489934323--

From java-user-return-26403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 26 13:01:29 2007
Return-Path: <java-user-return-26403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90888 invoked from network); 26 Feb 2007 13:01:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2007 13:01:27 -0000
Received: (qmail 74655 invoked by uid 500); 26 Feb 2007 13:01:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74623 invoked by uid 500); 26 Feb 2007 13:01:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74612 invoked by uid 99); 26 Feb 2007 13:01:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 05:01:27 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.132.249 as permitted sender)
Received: from [209.85.132.249] (HELO an-out-0708.google.com) (209.85.132.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 05:01:16 -0800
Received: by an-out-0708.google.com with SMTP id c3so745137ana
        for <java-user@lucene.apache.org>; Mon, 26 Feb 2007 05:00:55 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=QX+xCSQs47U7C2KslXHYaCdpA/skq0zDqKW6tv631nxTNUlUPU4UwIrEvstzCkW6RXGKne7B6O7393r//gTzzpmCWOJWOrdcp39XS1/w9HnID0Wt4LyMRXy1aexYLdSr6LjjsgYLEUfI34jNkGPO031lmJ7lBsVg/ra/OcUfIjE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NJkpyFf1PVI+Frtm2p2FLbvjX0aXm496XE8QN4CqesyYv2u4yiqpjodIesihP5V2F3UgcxlJgtE+KLixJSNrLOXacW3bNV/BEKSKkw8dpYU+XYP5OUWQ3Qc3vx5GrqVOqfeztHyQ27i3xwWx6rHJO5kvAAODYBo2XUnSj+14pdY=
Received: by 10.114.158.1 with SMTP id g1mr1292362wae.1172494854802;
        Mon, 26 Feb 2007 05:00:54 -0800 (PST)
Received: by 10.114.58.3 with HTTP; Mon, 26 Feb 2007 05:00:54 -0800 (PST)
Message-ID: <359a92830702260500x577cd31cld7abbbbb33e3c00f@mail.gmail.com>
Date: Mon, 26 Feb 2007 08:00:54 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: a question about indexing database tables
In-Reply-To: <34b8543c0702252115m340da119p5cdbfea15a65d039@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_108560_4500325.1172494854749"
References: <34b8543c0702220017h52810c3fi92d9d76a33f5e52f@mail.gmail.com>
	 <359a92830702220454o31cf4958xc2a14ab39da8dd0a@mail.gmail.com>
	 <34b8543c0702220517v265e8b4fy846910c13313bb60@mail.gmail.com>
	 <359a92830702220533n40a4c115kd8971519e1e3266b@mail.gmail.com>
	 <34b8543c0702252115m340da119p5cdbfea15a65d039@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_108560_4500325.1172494854749
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

No, that's not what I was talking about. Remember that there's no
requirement in Lucene that each document have the same fields. So, you have
something like...

Document doc = new Document()
doc.add("table1_id", id);
doc.add("table1_name", name);
IndexWriter.add(doc);


Document doc = new Document();
doc.add("table2_id_emp", employeeId);
doc.add("table2_address", address);
IndexWriter.add(doc);


You now have two documents in the index, one with fields "table1_id",
"table1_name" and the other has fields "table2_id_emp", "table2_address".

These two documents are entirely orthogonal. That is, they have no fields in
common. Even if the values for these fields are the same (say for some
strange reason your name from table1 has a value of "nelson" and the address
from table2 also has a value of "nelson". These don't interfere with each
other since searching for "table1_name:nelson" would never look in the field
"table2_address".

So, all your tables can be stored in the same *index* (not the same
document, and most certainly not in the same field). They are all separate
because no two fields are the same for rows (documents) from different
tables.

The basic idea is that you index one lucene document for each row.

That said, I can't imagine that this is all you want to do. A one-for-one
mapping of table rows to documents is almost sure to be not the best design.
You'll probably want to de-normalize your data for easy lookup etc. There'll
be some up-front design work to get optimal performance. Especially, there's
no sense of performing joins in Lucene, and you shouldn't try.

Overall, use Lucene for searching/sorting text, use your RDBMS for
relational things.

Best
Erick

On 2/26/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
>
> Hi Erick
> thank you and sorry for taking long my reply. I am involving in a project.
>
> I was thinking of your idea about storing all tables in the same field. it
> seems to me a good idea, but some vague issues.
> first, how to create a lucene's document. did you mean, storing all tables
> by joining all tables?
> if no, how to determine each row to be inserted in the index file?
>
> second, let's consider we indexed all tables as you said, how to find out
> the data related in hierarchy of tables.
>
> please have a look at following structure, I want to know whether I
> understand you or not?
>
> table1_id     table1_name table1_family   table2_id_emp  table2_address
>     1                   x1               f1
> 1                     street1
>     2                   x2               f2
> 1                     street2
>     3                   x3               f3
> 2                     street6
>
>
> On 2/22/07, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > OK, I was off on a tangent. We've had several discussions where people
> > were
> > effectively trying to replace a RDBMS with Lucene and finding out it
> that
> > RDBMSs are very good at what they do <G>...
> >
> > But in general, I'd probably approach it by doing the RDBMS work first
> and
> > indexing the result. I think this is your option (2). Yes, this will
> > de-normalize a bunch of your data and you'll chew up some space, but
> disk
> > space is cheap. Very cheap <G>.
> >
> > One thing to remember, though, that took me a while to get used to,
> > especially when I had my database hat on. There's no requirement that
> > every
> > document in a Lucene index have the same fields. Conceptually, you can
> > store
> > *all* your tables in the same index. So a document for table one has
> > fields
> > table_1_field1 table_1_field2 table_1_field3. "documents" for table two
> > have
> > fields table_2_field1 table_2_field2 etc.....
> >
> > These documents will never interfere with each other during searches
> > because
> > they share no fields (and each query goes against a particular field).
> >
> > I mention this because your maintenance will be much easier if you only
> > have
> > one index <G>....
> >
> > Best
> > Erick
> >
> > On 2/22/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
> > >
> > > Thanks Erick
> > > but we have to because we need to execute very big queries that create
> > > traffik network and are very very slow. but with lucene we do it in
> some
> > > milliseconds. and now we indexed our needed information by joining
> > tables.
> > > it works fine, besides, it returns the exact result as we can get from
> > > database. we indexed about one million records.
> > > but let me say, we are not using it instead of database, we use it to
> > > generate some dynamic reports that if we did it by sql queries, it
> would
> > > take about 15 minutes.
> > >
> > > On 2/22/07, Erick Erickson <erickerickson@gmail.com> wrote:
> > > >
> > > > don't do either one <G>.... Search this mail archive for discussions
> > of
> > > > databases, there are several long threads discussing this along with
> > > > various
> > > > options on how to make this work. See particularly a mail entitled
> > > > *Oracle/Lucene
> > > > integration -status- *and any discussions participated in by Marcelo
> > > > Ochoa.
> > > >
> > > > But, in general, Lucene is a text search engine, NOT a RDBMS. When
> you
> > > > start
> > > > saying "keep all relation in order to get right result", it sounds
> > like
> > > > you're trying to use Lucene as a RDBMS. It doesn't do this very
> well,
> > > > that's
> > > > not what it was built for. There are several options...
> > > > > get clever with your index such that you don't do anything like
> join
> > > > tables. This implies that you re-design your data layout, probably
> > > > de-normalizing lots of data, etc.
> > > > > Use a hybrid solution. That is, use Lucene to search text and then
> > do
> > > > whatever further relational processing you need in the database. You
> > > need
> > > > to
> > > > store enough information in the Lucene documents to be able to query
> > the
> > > > database.
> > > > > stick with a database if it works for you already.
> > > >
> > > > In general, it's a mis-use of lucene to try to get RDBMS behavior
> out
> > of
> > > > it.
> > > > When you find yourself trying to do this, take a few minutes and ask
> > > > yourself if this design is appropriate, and continue only if you can
> > > > answer
> > > > in the affirmative...
> > > >
> > > > Best
> > > > Erick
> > > >
> > > > On 2/22/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
> > > > >
> > > > > Hello
> > > > > In our application we have to index the database tables, there is
> > two
> > > > way
> > > > > to
> > > > > make this
> > > > >
> > > > > 1- index each table in a separate directory and then keep all
> > relation
> > > > in
> > > > > order to get right result. in this method, we should use filters
> to
> > > > > overcome
> > > > > the problem of searching on another search result.
> > > > > 2. joining two or more tables and index the result of join query.
> > > > >
> > > > > which approach is better, reliable, has acceptable performance.
> > > > >
> > > > > thanks
> > > > > --
> > > > > Regards,
> > > > > Mohammad
> > > > >
> > > >
> > >
> > >
> > >
> > > --
> > > Regards,
> > > Mohammad
> > >
> >
>
>
>
> --
> Regards,
> Mohammad
>

------=_Part_108560_4500325.1172494854749--

From java-user-return-26404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 26 13:04:07 2007
Return-Path: <java-user-return-26404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91732 invoked from network); 26 Feb 2007 13:04:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2007 13:04:05 -0000
Received: (qmail 78853 invoked by uid 500); 26 Feb 2007 13:04:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78209 invoked by uid 500); 26 Feb 2007 13:04:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78198 invoked by uid 99); 26 Feb 2007 13:04:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 05:04:05 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.82.236 as permitted sender)
Received: from [66.249.82.236] (HELO wx-out-0506.google.com) (66.249.82.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 05:03:52 -0800
Received: by wx-out-0506.google.com with SMTP id i29so1358004wxd
        for <java-user@lucene.apache.org>; Mon, 26 Feb 2007 05:03:31 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZI0JofVQFp4hB4/5rbeCyaKi/VJBzxM5kZYvLB/ER/Lqyjhyb94ZjdR5p20JifEkH0E8EFJrDsTFt26dM8U8tGctfEC8HxfaNtlBe7Wb0gEAAjFEQmA3+1TmGm5xbAuH+zMBAYA2y43XFbrZHeSNuCoIXQhUrVnwrXOHWcl0GDs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cbaTVcMPHs+66mERvugd28j4uN1PJAgisJ7LkXwpga4k0JQudqlfoz8MhZfg0uuxYZ2bWzsvd4hVH1HU67kXRz2prEJHoDQcAIzcAHLDj90OnlbuUJANiJX1pxvnYqwByUZscHBcy0o7EhFIYvfCB/Y1q7LyxZJxvBitVVndxzY=
Received: by 10.114.81.1 with SMTP id e1mr629370wab.1172495009540;
        Mon, 26 Feb 2007 05:03:29 -0800 (PST)
Received: by 10.114.58.3 with HTTP; Mon, 26 Feb 2007 05:03:29 -0800 (PST)
Message-ID: <359a92830702260503n15501627yeb23666be17685a2@mail.gmail.com>
Date: Mon, 26 Feb 2007 08:03:29 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to query range of Date by given date string?
In-Reply-To: <a43ef01e0702260216xafed0bdj2ed5123ba9d023bb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_108628_974446.1172495009326"
References: <a43ef01e0702260216xafed0bdj2ed5123ba9d023bb@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_108628_974446.1172495009326
Content-Type: text/plain; charset=GB2312; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline

V2VsbCwgeW91IG5lZWQgdG8gZG8gdHdvIHRoaW5ncy4gRmlyc3QsIG1ha2Ugc3VyZSB5b3VyIGRh
dGVzIGFyZSBpbmRleGVkIHNvCnRoZXkgY2FuIGJlIHNvcnRlZCBsZXhpY2FsbHksIHdoaWNoIHRo
ZSBmb3JtYXQgeW91J3JlIHNob3dpbmcgaXMuIFlvdSBtaWdodAp3YW50IHRvIGxvb2sgYXQgdGhl
IERhdGVUb29scyBjbGFzcyBmb3IgaGFuZHkgbWV0aG9kcyBvZiB0cmFuc2Zvcm1pbmcgZGF0ZXMK
aW50byBMdWNlbmUtZnJpZW5kbHkgZm9ybWF0LgoKVGhlbiB1c2UgUmFuZ2VRdWVyeSBvciBSYW5n
ZUZpbHRlciBjbGFzc2VzIHRvIHNlYXJjaCBvdmVyIGEgcmFuZ2UuCgpCZXN0CkVyaWNrCgpPbiAy
LzI2LzA3LCDA7tGwu7bUzrLLwcsgPHpoYW5nLnhpYW95ZUBnbWFpbC5jb20+IHdyb3RlOgo+Cj4g
aGVsbG86Cj4gSSBoYXZlIFN0b3JlZCBEYXRlIGluIGluZGV4LCBhbmQgaG93IGNvdWxkIEkgcXVl
cnkgdGhlIHJlc3VsdCBieSBnaXZlbgo+IHJhbmdlCj4gb2YgRGF0ZT8KPiBmb3IgZXhhbXBsZToK
PiBJIHdvdWxkIGZpbmQgc29tZSBtYXRjaGluZyByZXN1bHQgaW4gdGhlIHJhbmdlIG9mIDIwMDct
MDItMjQgdG8KPiAyMDA3LTAyLTI1Lgo+Cj4KPiAtLQo+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gV29DYWzJ+rvuo6y+odTa
1cbO1aOhCj4gaHR0cDovL2tvZndhbmcud29jYWwuY24KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+Cg==
------=_Part_108628_974446.1172495009326--

From java-user-return-26405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 26 13:10:50 2007
Return-Path: <java-user-return-26405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94003 invoked from network); 26 Feb 2007 13:10:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2007 13:10:49 -0000
Received: (qmail 90023 invoked by uid 500); 26 Feb 2007 13:10:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89801 invoked by uid 500); 26 Feb 2007 13:10:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89790 invoked by uid 99); 26 Feb 2007 13:10:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 05:10:49 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.132.240 as permitted sender)
Received: from [209.85.132.240] (HELO an-out-0708.google.com) (209.85.132.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 05:10:37 -0800
Received: by an-out-0708.google.com with SMTP id c3so747108ana
        for <java-user@lucene.apache.org>; Mon, 26 Feb 2007 05:10:17 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Utb8jfVTR6vObDiZ09pxReJWLfkukwatbjW9O4km0QFSUvYJibjcIPzSBjWmQiRdWx8mCo7udWGgQ87a7HHPMJilf4DUIlP/H+UDlP3GvoRkJqpDkHJ5SIghgEokzG/qKHAjl3zHxS04GqAucoxaMYLvEmxKP60B2/WT4RmOxKg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=VKRtjTixwekPHWubateI8M7BLRmGK8sPgL5cWOqHDsME4yfSQIQSj/zk9JxjsD68agwlwIX1tXKcG9ULPndftAVXYr8m4+CTt9wRKOAU+6NbsSQXIlm2UeP4vOB49Yr9t6dvS1wjYGOgsKhPw8xDh8X2CD9kBn9D3ToqW9935WM=
Received: by 10.114.199.1 with SMTP id w1mr6558waf.1172495403479;
        Mon, 26 Feb 2007 05:10:03 -0800 (PST)
Received: by 10.114.58.3 with HTTP; Mon, 26 Feb 2007 05:10:03 -0800 (PST)
Message-ID: <359a92830702260510m1198d59q69f9b61d0fa6c0e1@mail.gmail.com>
Date: Mon, 26 Feb 2007 08:10:03 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, paul_t100@fastmail.fm
Subject: Re: Can I use Lucene to retrieve a list of duplicates
In-Reply-To: <45E2B7CC.9070704@fastmail.fm>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_108732_3157787.1172495403435"
References: <45DF055C.9050705@fastmail.fm>
	 <359a92830702230722w19c441f5oe3d6fdd361ef23c@mail.gmail.com>
	 <45DF1423.3070707@fastmail.fm>
	 <Pine.LNX.4.58.0702231446220.6828@hal.rescomp.berkeley.edu>
	 <45E2B7CC.9070704@fastmail.fm>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_108732_3157787.1172495403435
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Here's an excerpt from something I wrote to enumerate all the terms for a
field. I hacked out some of my tracing, so it may not even compile <G>.....

Basically, change the line "if (td.next())" to "while (td.next())" and every
time you stay in that loop for more than one cycle, you'll have duplicates
for that particular term....

  private void enumField(String field) throws Exception
    {
        long start = System.currentTimeMillis();
        TermEnum termEnum = this.reader.getIndexReader().terms(new
Term(field, ""));

        this.writer.println("");
        this.writer.println("");
        this.writer.println("");
        this.writer.println("Values for term " + field);

        TermDocs td = this.reader.getIndexReader().termDocs();
        Term term = termEnum.term();
        int idx = 0;
        int jdx = 0;

        while ((term != null) && term.field().equals(field)) {

            termEnum.next();
            td.seek(termEnum);

            if (td.next()) {
                ++jdx;
            }

            term = termEnum.term();
            ++idx;
        }
    }


Erick

On 2/26/07, Paul Taylor <paul_t100@fastmail.fm> wrote:
>
> Hi,
>
> Sorry I don't see how I get access to TermEnums. So far Ive created a
> document per row, the first field holds the row id, then i have one
> field per column, and checked  the index has been created ok with some
> search querys.
> I now want to pass a column to check, and receive  a list of all the
> documents that contain  a  term  in that column which is used by at
> least one other document for that column ( a duplicate term).
>
> thanks paul
>
> Chris Hostetter wrote:
> > : Thanks this might do it, but do I need to know the terms beforehand, I
> > : just want to return any terms with frequency more than one?
> >
> > no, TermEnum will let you iterate over all the terms ... you don't even
> > need TermDocs if you just want the docFreq for each term (which would be
> 1
> > if there are no duplicates)
> >
> > : Erick Erickson wrote:
> > : > Sure, you can use the TermDocs/TermEnum classes. Basically, for a
> term
> > : > (probably column value in your app) these let you quickly answer the
> > : > question "which (and how many) documents does this term appear in".
> > : > What you get is the Lucene doc id, which let's you fetch all the
> > : > information about the documents you want.
> > : >
> > : > Erick
> > : >
> > : > On 2/23/07, *Paul Taylor* <paul_t100@fastmail.fm
> > : > <mailto:paul_t100@fastmail.fm>> wrote:
> > : >
> > : >     Hi I have Java Swing application with a table, I was considering
> using
> > : >     Lucene to index the data in the table. One task Id like to do is
> > : >     for the
> > : >     user to select 'Find Duplicate records for Column X', then I
> would
> > : >     filter the table to show only records where there is more than
> one
> > : >     with
> > : >     the same value i.e duplicate for that column. Is there a way to
> return
> > : >     all the duplicates from a Lucene index.
> > : >
> > : >     thanks paul Taylor
> > : >
> > : >
> ---------------------------------------------------------------------
> > : >     To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > : >     <mailto:java-user-unsubscribe@lucene.apache.org>
> > : >     For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > : >     <mailto:java-user-help@lucene.apache.org>
> > : >
> > : >
> > : >
> ------------------------------------------------------------------------
> > : >
> > : > Internal Virus Database is out-of-date.
> > : > Checked by AVG Free Edition.
> > : > Version: 7.1.394 / Virus Database: 268.16.5/616 - Release Date:
> 04/01/2007
> > : >
> > :
> > :
> > : ---------------------------------------------------------------------
> > : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > : For additional commands, e-mail: java-user-help@lucene.apache.org
> > :
> >
> >
> >
> > -Hoss
> >
> >
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_108732_3157787.1172495403435--

From java-user-return-26406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 26 13:34:13 2007
Return-Path: <java-user-return-26406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98522 invoked from network); 26 Feb 2007 13:34:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2007 13:34:12 -0000
Received: (qmail 12985 invoked by uid 500); 26 Feb 2007 13:34:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12949 invoked by uid 500); 26 Feb 2007 13:34:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12938 invoked by uid 99); 26 Feb 2007 13:34:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 05:34:13 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 209.85.134.189 as permitted sender)
Received: from [209.85.134.189] (HELO mu-out-0910.google.com) (209.85.134.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 05:34:02 -0800
Received: by mu-out-0910.google.com with SMTP id i10so1314419mue
        for <java-user@lucene.apache.org>; Mon, 26 Feb 2007 05:33:40 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=CaZ07JEhnw2CdPHdyMHEAg2tlRLcJYwIcZPA7IVQCyLnMye4l5mxHUb88moBuS/rgwt/DC4Ulxqi0lJbcuXIa0jDV58AuM3y9qXBMvk6gQ0mA2oRTcnxaefBPTqlzU6y/fHNTW6Xyh3rOauBXVPe7KAbO40UjVL+dz953Vrl8Tc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=H0P92Kl0N6ppvzv/cqvUWALaXQTHy7RtCQrEfQkq9alawtyjL9pUmB3bpdzajPfjXJoEYzp7qwW3Wy1tgUdyIrKJ7XnHCLCW1Aj2xTrxNPJrt2yIpC2Wam4Y0YLWW9BGkQhnU3MB9pp0OQ66JTjdNyFeTa+XXILiY8QbnlYJmu4=
Received: by 10.82.188.15 with SMTP id l15mr1642942buf.1172496820056;
        Mon, 26 Feb 2007 05:33:40 -0800 (PST)
Received: by 10.82.163.2 with HTTP; Mon, 26 Feb 2007 05:33:40 -0800 (PST)
Message-ID: <34b8543c0702260533h5071f3eand8e05ae9bfa58c90@mail.gmail.com>
Date: Mon, 26 Feb 2007 17:03:40 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: a question about indexing database tables
In-Reply-To: <359a92830702260500x577cd31cld7abbbbb33e3c00f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_67469_29745823.1172496820016"
References: <34b8543c0702220017h52810c3fi92d9d76a33f5e52f@mail.gmail.com>
	 <359a92830702220454o31cf4958xc2a14ab39da8dd0a@mail.gmail.com>
	 <34b8543c0702220517v265e8b4fy846910c13313bb60@mail.gmail.com>
	 <359a92830702220533n40a4c115kd8971519e1e3266b@mail.gmail.com>
	 <34b8543c0702252115m340da119p5cdbfea15a65d039@mail.gmail.com>
	 <359a92830702260500x577cd31cld7abbbbb33e3c00f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_67469_29745823.1172496820016
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thank you very much Erick.
Really I didnt know about this. I've just thought we can not add two
different documents.
now my question is, if I index the data in the way you said and now I have a
query say, "(table1_name:john) AND (table2_address:Adam street)"
using MultiFieldQueryParser, what is the result?
is the result from both documents and if yes, which document will the Hits
return?
is the result a union of two documents or intersection?

thank you very much indeed

On 2/26/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> No, that's not what I was talking about. Remember that there's no
> requirement in Lucene that each document have the same fields. So, you
> have
> something like...
>
> Document doc = new Document()
> doc.add("table1_id", id);
> doc.add("table1_name", name);
> IndexWriter.add(doc);
>
>
> Document doc = new Document();
> doc.add("table2_id_emp", employeeId);
> doc.add("table2_address", address);
> IndexWriter.add(doc);
>
>
> You now have two documents in the index, one with fields "table1_id",
> "table1_name" and the other has fields "table2_id_emp", "table2_address".
>
> These two documents are entirely orthogonal. That is, they have no fields
> in
> common. Even if the values for these fields are the same (say for some
> strange reason your name from table1 has a value of "nelson" and the
> address
> from table2 also has a value of "nelson". These don't interfere with each
> other since searching for "table1_name:nelson" would never look in the
> field
> "table2_address".
>
> So, all your tables can be stored in the same *index* (not the same
> document, and most certainly not in the same field). They are all separate
> because no two fields are the same for rows (documents) from different
> tables.
>
> The basic idea is that you index one lucene document for each row.
>
> That said, I can't imagine that this is all you want to do. A one-for-one
> mapping of table rows to documents is almost sure to be not the best
> design.
> You'll probably want to de-normalize your data for easy lookup etc.
> There'll
> be some up-front design work to get optimal performance. Especially,
> there's
> no sense of performing joins in Lucene, and you shouldn't try.
>
> Overall, use Lucene for searching/sorting text, use your RDBMS for
> relational things.
>
> Best
> Erick
>
> On 2/26/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
> >
> > Hi Erick
> > thank you and sorry for taking long my reply. I am involving in a
> project.
> >
> > I was thinking of your idea about storing all tables in the same field.
> it
> > seems to me a good idea, but some vague issues.
> > first, how to create a lucene's document. did you mean, storing all
> tables
> > by joining all tables?
> > if no, how to determine each row to be inserted in the index file?
> >
> > second, let's consider we indexed all tables as you said, how to find
> out
> > the data related in hierarchy of tables.
> >
> > please have a look at following structure, I want to know whether I
> > understand you or not?
> >
> > table1_id     table1_name table1_family   table2_id_emp  table2_address
> >     1                   x1               f1
> > 1                     street1
> >     2                   x2               f2
> > 1                     street2
> >     3                   x3               f3
> > 2                     street6
> >
> >
> > On 2/22/07, Erick Erickson <erickerickson@gmail.com> wrote:
> > >
> > > OK, I was off on a tangent. We've had several discussions where people
> > > were
> > > effectively trying to replace a RDBMS with Lucene and finding out it
> > that
> > > RDBMSs are very good at what they do <G>...
> > >
> > > But in general, I'd probably approach it by doing the RDBMS work first
> > and
> > > indexing the result. I think this is your option (2). Yes, this will
> > > de-normalize a bunch of your data and you'll chew up some space, but
> > disk
> > > space is cheap. Very cheap <G>.
> > >
> > > One thing to remember, though, that took me a while to get used to,
> > > especially when I had my database hat on. There's no requirement that
> > > every
> > > document in a Lucene index have the same fields. Conceptually, you can
> > > store
> > > *all* your tables in the same index. So a document for table one has
> > > fields
> > > table_1_field1 table_1_field2 table_1_field3. "documents" for table
> two
> > > have
> > > fields table_2_field1 table_2_field2 etc.....
> > >
> > > These documents will never interfere with each other during searches
> > > because
> > > they share no fields (and each query goes against a particular field).
> > >
> > > I mention this because your maintenance will be much easier if you
> only
> > > have
> > > one index <G>....
> > >
> > > Best
> > > Erick
> > >
> > > On 2/22/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
> > > >
> > > > Thanks Erick
> > > > but we have to because we need to execute very big queries that
> create
> > > > traffik network and are very very slow. but with lucene we do it in
> > some
> > > > milliseconds. and now we indexed our needed information by joining
> > > tables.
> > > > it works fine, besides, it returns the exact result as we can get
> from
> > > > database. we indexed about one million records.
> > > > but let me say, we are not using it instead of database, we use it
> to
> > > > generate some dynamic reports that if we did it by sql queries, it
> > would
> > > > take about 15 minutes.
> > > >
> > > > On 2/22/07, Erick Erickson <erickerickson@gmail.com> wrote:
> > > > >
> > > > > don't do either one <G>.... Search this mail archive for
> discussions
> > > of
> > > > > databases, there are several long threads discussing this along
> with
> > > > > various
> > > > > options on how to make this work. See particularly a mail entitled
> > > > > *Oracle/Lucene
> > > > > integration -status- *and any discussions participated in by
> Marcelo
> > > > > Ochoa.
> > > > >
> > > > > But, in general, Lucene is a text search engine, NOT a RDBMS. When
> > you
> > > > > start
> > > > > saying "keep all relation in order to get right result", it sounds
> > > like
> > > > > you're trying to use Lucene as a RDBMS. It doesn't do this very
> > well,
> > > > > that's
> > > > > not what it was built for. There are several options...
> > > > > > get clever with your index such that you don't do anything like
> > join
> > > > > tables. This implies that you re-design your data layout, probably
> > > > > de-normalizing lots of data, etc.
> > > > > > Use a hybrid solution. That is, use Lucene to search text and
> then
> > > do
> > > > > whatever further relational processing you need in the database.
> You
> > > > need
> > > > > to
> > > > > store enough information in the Lucene documents to be able to
> query
> > > the
> > > > > database.
> > > > > > stick with a database if it works for you already.
> > > > >
> > > > > In general, it's a mis-use of lucene to try to get RDBMS behavior
> > out
> > > of
> > > > > it.
> > > > > When you find yourself trying to do this, take a few minutes and
> ask
> > > > > yourself if this design is appropriate, and continue only if you
> can
> > > > > answer
> > > > > in the affirmative...
> > > > >
> > > > > Best
> > > > > Erick
> > > > >
> > > > > On 2/22/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
> > > > > >
> > > > > > Hello
> > > > > > In our application we have to index the database tables, there
> is
> > > two
> > > > > way
> > > > > > to
> > > > > > make this
> > > > > >
> > > > > > 1- index each table in a separate directory and then keep all
> > > relation
> > > > > in
> > > > > > order to get right result. in this method, we should use filters
> > to
> > > > > > overcome
> > > > > > the problem of searching on another search result.
> > > > > > 2. joining two or more tables and index the result of join
> query.
> > > > > >
> > > > > > which approach is better, reliable, has acceptable performance.
> > > > > >
> > > > > > thanks
> > > > > > --
> > > > > > Regards,
> > > > > > Mohammad
> > > > > >
> > > > >
> > > >
> > > >
> > > >
> > > > --
> > > > Regards,
> > > > Mohammad
> > > >
> > >
> >
> >
> >
> > --
> > Regards,
> > Mohammad
> >
>



-- 
Regards,
Mohammad

------=_Part_67469_29745823.1172496820016--

From java-user-return-26407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 26 13:38:47 2007
Return-Path: <java-user-return-26407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99411 invoked from network); 26 Feb 2007 13:38:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2007 13:38:47 -0000
Received: (qmail 17958 invoked by uid 500); 26 Feb 2007 13:38:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17927 invoked by uid 500); 26 Feb 2007 13:38:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17916 invoked by uid 99); 26 Feb 2007 13:38:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 05:38:47 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_FONT_BIG,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 217.68.146.190 as permitted sender)
Received: from [217.68.146.190] (HELO cluster-b.mailcontrol.com) (217.68.146.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 05:38:32 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly14b.srv.mailcontrol.com (MailControl) with SMTP id l1QDbojR028591
	for <java-user@lucene.apache.org>; Mon, 26 Feb 2007 13:38:02 GMT
Received: From SGBD012104.wsatkins.com ([10.202.26.18]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 1172497054985; Mon, 26 Feb 2007 13:37:34 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012104.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 26 Feb 2007 13:37:34 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C759AB.037DF856"
Subject: Date searches
Date: Mon, 26 Feb 2007 13:35:42 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705F49AC9@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Date searches
Thread-Index: AcdZqwKyKSL2BD3rRn66qE7UYxAqZA==
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 26 Feb 2007 13:37:34.0802 (UTC) FILETIME=[45C2C320:01C759AB]
X-Scanned-By: MailControl A-07-06-90 (www.mailcontrol.com) on 10.66.0.124
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C759AB.037DF856
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi all,

I have an index in which dates are represented as ranges of two integers
(there are two fields one foreach integer).  The two integers are years.
AD dates are represented as a positive integer and BC dates as a
negative one  There are three possible types of ranges.  These are
listed below with example dates:

*	BC - BC (-2000 - -1000)
*	BC - AD (-1000 - 1000)
*	AD - AD (1000 - 1200)

What I want is to have a textbox in which the user enters a year (eg
1990) and all records for which that date falls within the record's date
range are returned.

What would be the query syntax for this?

Cheers=20


This email and any attached files are confidential and copyright protected.=
 If you are not the addressee, any dissemination of this communication is s=
trictly prohibited. Unless otherwise expressly agreed in writing, nothing s=
tated in this communication shall be legally binding.

The ultimate parent company of the Atkins Group is WS Atkins plc.  Register=
ed in England No. 1885586.  Registered Office Woodcote Grove, Ashley Road, =
Epsom, Surrey KT18 5BW.

Consider the environment. Please don't print this e-mail unless you really =
need to.=20

------_=_NextPart_001_01C759AB.037DF856--

From java-user-return-26408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 26 13:42:02 2007
Return-Path: <java-user-return-26408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 531 invoked from network); 26 Feb 2007 13:42:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2007 13:42:01 -0000
Received: (qmail 21514 invoked by uid 500); 26 Feb 2007 13:42:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21478 invoked by uid 500); 26 Feb 2007 13:42:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21467 invoked by uid 99); 26 Feb 2007 13:42:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 05:42:03 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [136.173.162.228] (HELO SMTP35.europarl.europa.eu) (136.173.162.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 05:41:50 -0800
Received: from EMAILBRUSV42.ep.parl.union.eu (unverified) by SMTP35.europarl.europa.eu
 (European Parliament) with ESMTP id <T7e0ae71de188ada2e41f54@SMTP35.europarl.europa.eu> for <java-user@lucene.apache.org>;
 Mon, 26 Feb 2007 14:39:57 +0100
Received: from epluxsex03.ep.parl.union.eu ([136.173.56.21]) by EMAILBRUSV42.ep.parl.union.eu with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 26 Feb 2007 14:41:27 +0100
Received: from EPLUXSEX01.ep.parl.union.eu ([136.173.56.16]) by epluxsex03.ep.parl.union.eu with Microsoft SMTPSVC(5.0.2195.6713);
	 Mon, 26 Feb 2007 14:41:27 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable
Subject: RE: how to query range of Date by given date string?
Date: Mon, 26 Feb 2007 14:41:26 +0100
Message-ID: <CA7398CB8402E445AABF081C51E43ACB059EDA@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: how to query range of Date by given date string?
Thread-Index: AcdZj1yycUxejk++TYKK9Vr/ncXjpwAG5peA
From: "WATHELET Thomas" <thomas.wathelet@europarl.europa.eu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 26 Feb 2007 13:41:27.0149 (UTC) FILETIME=[D04019D0:01C759AB]
X-Virus-Checked: Checked by ClamAV on apache.org

Parse your date with this classe DateTools.stringToDate to search and =
DateTools.dateToString() to store into index.=20

-----Original Message-----
From: =C0=EE=D1=B0=BB=B6=D4=CE=B2=CB=C1=CB =
[mailto:zhang.xiaoye@gmail.com]=20
Sent: 26 February 2007 11:17
To: java-user@lucene.apache.org
Subject: how to query range of Date by given date string?

hello:
I have Stored Date in index, and how could I query the result by given =
range
of Date?
for example:
I would find some matching result in the range of 2007-02-24 to =
2007-02-25.


--=20
--------------------------------------------------------------
WoCal=C9=FA=BB=EE=A3=AC=BE=A1=D4=DA=D5=C6=CE=D5=A3=A1
http://kofwang.wocal.cn
--------------------------------------------------------------



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 26 13:54:55 2007
Return-Path: <java-user-return-26409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3781 invoked from network); 26 Feb 2007 13:54:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2007 13:54:55 -0000
Received: (qmail 42667 invoked by uid 500); 26 Feb 2007 13:54:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42636 invoked by uid 500); 26 Feb 2007 13:54:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42625 invoked by uid 99); 26 Feb 2007 13:54:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 05:54:55 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 05:54:44 -0800
Received: by ug-out-1314.google.com with SMTP id k40so781457ugc
        for <java-user@lucene.apache.org>; Mon, 26 Feb 2007 05:54:22 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=XkbSyz1p3+urH34VApeYgrXIa73UlIBL5++E0HxMKgNHuDen89WgvCi9yuhB+VXk28TGwG1Lx1g/KhsAeREQxIaIHUNKxVaY+S2na/0hg/haJckEw8pWPCPBVhpfp+qBWWV1RbPgVYqLIn+AmDYCmynJEKDxddCooFBk9XtR1dc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jOBZCX4EPJKJbvP0pd8++aSTvc0jyF7k4XtzpAOPxBdxItnNcQFbdk5vEysf3vU/ur7WTTlv2MBsmtmG9p/G6Rol8o3Kalat3M3/th5mVEBAQ1FADyu/MY1xyR8GWFj4QhoGUlQ5JXUm5nS+9+VE+0W2gSYkzKXZuxEwrM2KLWs=
Received: by 10.114.208.8 with SMTP id f8mr2067674wag.1172498049820;
        Mon, 26 Feb 2007 05:54:09 -0800 (PST)
Received: by 10.114.58.3 with HTTP; Mon, 26 Feb 2007 05:54:09 -0800 (PST)
Message-ID: <359a92830702260554n18989c09o89d5fe36f4e4cfa7@mail.gmail.com>
Date: Mon, 26 Feb 2007 08:54:09 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: a question about indexing database tables
In-Reply-To: <34b8543c0702260533h5071f3eand8e05ae9bfa58c90@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_109468_23398089.1172498049686"
References: <34b8543c0702220017h52810c3fi92d9d76a33f5e52f@mail.gmail.com>
	 <359a92830702220454o31cf4958xc2a14ab39da8dd0a@mail.gmail.com>
	 <34b8543c0702220517v265e8b4fy846910c13313bb60@mail.gmail.com>
	 <359a92830702220533n40a4c115kd8971519e1e3266b@mail.gmail.com>
	 <34b8543c0702252115m340da119p5cdbfea15a65d039@mail.gmail.com>
	 <359a92830702260500x577cd31cld7abbbbb33e3c00f@mail.gmail.com>
	 <34b8543c0702260533h5071f3eand8e05ae9bfa58c90@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_109468_23398089.1172498049686
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You'll get no hits since there is no document in the index that has both
fields.

On 2/26/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
>
> Thank you very much Erick.
> Really I didnt know about this. I've just thought we can not add two
> different documents.
> now my question is, if I index the data in the way you said and now I have
> a
> query say, "(table1_name:john) AND (table2_address:Adam street)"
> using MultiFieldQueryParser, what is the result?
> is the result from both documents and if yes, which document will the Hits
> return?
> is the result a union of two documents or intersection?
>
> thank you very much indeed
>
> On 2/26/07, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > No, that's not what I was talking about. Remember that there's no
> > requirement in Lucene that each document have the same fields. So, you
> > have
> > something like...
> >
> > Document doc = new Document()
> > doc.add("table1_id", id);
> > doc.add("table1_name", name);
> > IndexWriter.add(doc);
> >
> >
> > Document doc = new Document();
> > doc.add("table2_id_emp", employeeId);
> > doc.add("table2_address", address);
> > IndexWriter.add(doc);
> >
> >
> > You now have two documents in the index, one with fields "table1_id",
> > "table1_name" and the other has fields "table2_id_emp",
> "table2_address".
> >
> > These two documents are entirely orthogonal. That is, they have no
> fields
> > in
> > common. Even if the values for these fields are the same (say for some
> > strange reason your name from table1 has a value of "nelson" and the
> > address
> > from table2 also has a value of "nelson". These don't interfere with
> each
> > other since searching for "table1_name:nelson" would never look in the
> > field
> > "table2_address".
> >
> > So, all your tables can be stored in the same *index* (not the same
> > document, and most certainly not in the same field). They are all
> separate
> > because no two fields are the same for rows (documents) from different
> > tables.
> >
> > The basic idea is that you index one lucene document for each row.
> >
> > That said, I can't imagine that this is all you want to do. A
> one-for-one
> > mapping of table rows to documents is almost sure to be not the best
> > design.
> > You'll probably want to de-normalize your data for easy lookup etc.
> > There'll
> > be some up-front design work to get optimal performance. Especially,
> > there's
> > no sense of performing joins in Lucene, and you shouldn't try.
> >
> > Overall, use Lucene for searching/sorting text, use your RDBMS for
> > relational things.
> >
> > Best
> > Erick
> >
> > On 2/26/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
> > >
> > > Hi Erick
> > > thank you and sorry for taking long my reply. I am involving in a
> > project.
> > >
> > > I was thinking of your idea about storing all tables in the same
> field.
> > it
> > > seems to me a good idea, but some vague issues.
> > > first, how to create a lucene's document. did you mean, storing all
> > tables
> > > by joining all tables?
> > > if no, how to determine each row to be inserted in the index file?
> > >
> > > second, let's consider we indexed all tables as you said, how to find
> > out
> > > the data related in hierarchy of tables.
> > >
> > > please have a look at following structure, I want to know whether I
> > > understand you or not?
> > >
> > > table1_id     table1_name table1_family
> table2_id_emp  table2_address
> > >     1                   x1               f1
> > > 1                     street1
> > >     2                   x2               f2
> > > 1                     street2
> > >     3                   x3               f3
> > > 2                     street6
> > >
> > >
> > > On 2/22/07, Erick Erickson <erickerickson@gmail.com> wrote:
> > > >
> > > > OK, I was off on a tangent. We've had several discussions where
> people
> > > > were
> > > > effectively trying to replace a RDBMS with Lucene and finding out it
> > > that
> > > > RDBMSs are very good at what they do <G>...
> > > >
> > > > But in general, I'd probably approach it by doing the RDBMS work
> first
> > > and
> > > > indexing the result. I think this is your option (2). Yes, this will
> > > > de-normalize a bunch of your data and you'll chew up some space, but
> > > disk
> > > > space is cheap. Very cheap <G>.
> > > >
> > > > One thing to remember, though, that took me a while to get used to,
> > > > especially when I had my database hat on. There's no requirement
> that
> > > > every
> > > > document in a Lucene index have the same fields. Conceptually, you
> can
> > > > store
> > > > *all* your tables in the same index. So a document for table one has
> > > > fields
> > > > table_1_field1 table_1_field2 table_1_field3. "documents" for table
> > two
> > > > have
> > > > fields table_2_field1 table_2_field2 etc.....
> > > >
> > > > These documents will never interfere with each other during searches
> > > > because
> > > > they share no fields (and each query goes against a particular
> field).
> > > >
> > > > I mention this because your maintenance will be much easier if you
> > only
> > > > have
> > > > one index <G>....
> > > >
> > > > Best
> > > > Erick
> > > >
> > > > On 2/22/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
> > > > >
> > > > > Thanks Erick
> > > > > but we have to because we need to execute very big queries that
> > create
> > > > > traffik network and are very very slow. but with lucene we do it
> in
> > > some
> > > > > milliseconds. and now we indexed our needed information by joining
> > > > tables.
> > > > > it works fine, besides, it returns the exact result as we can get
> > from
> > > > > database. we indexed about one million records.
> > > > > but let me say, we are not using it instead of database, we use it
> > to
> > > > > generate some dynamic reports that if we did it by sql queries, it
> > > would
> > > > > take about 15 minutes.
> > > > >
> > > > > On 2/22/07, Erick Erickson <erickerickson@gmail.com> wrote:
> > > > > >
> > > > > > don't do either one <G>.... Search this mail archive for
> > discussions
> > > > of
> > > > > > databases, there are several long threads discussing this along
> > with
> > > > > > various
> > > > > > options on how to make this work. See particularly a mail
> entitled
> > > > > > *Oracle/Lucene
> > > > > > integration -status- *and any discussions participated in by
> > Marcelo
> > > > > > Ochoa.
> > > > > >
> > > > > > But, in general, Lucene is a text search engine, NOT a RDBMS.
> When
> > > you
> > > > > > start
> > > > > > saying "keep all relation in order to get right result", it
> sounds
> > > > like
> > > > > > you're trying to use Lucene as a RDBMS. It doesn't do this very
> > > well,
> > > > > > that's
> > > > > > not what it was built for. There are several options...
> > > > > > > get clever with your index such that you don't do anything
> like
> > > join
> > > > > > tables. This implies that you re-design your data layout,
> probably
> > > > > > de-normalizing lots of data, etc.
> > > > > > > Use a hybrid solution. That is, use Lucene to search text and
> > then
> > > > do
> > > > > > whatever further relational processing you need in the database.
> > You
> > > > > need
> > > > > > to
> > > > > > store enough information in the Lucene documents to be able to
> > query
> > > > the
> > > > > > database.
> > > > > > > stick with a database if it works for you already.
> > > > > >
> > > > > > In general, it's a mis-use of lucene to try to get RDBMS
> behavior
> > > out
> > > > of
> > > > > > it.
> > > > > > When you find yourself trying to do this, take a few minutes and
> > ask
> > > > > > yourself if this design is appropriate, and continue only if you
> > can
> > > > > > answer
> > > > > > in the affirmative...
> > > > > >
> > > > > > Best
> > > > > > Erick
> > > > > >
> > > > > > On 2/22/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
> > > > > > >
> > > > > > > Hello
> > > > > > > In our application we have to index the database tables, there
> > is
> > > > two
> > > > > > way
> > > > > > > to
> > > > > > > make this
> > > > > > >
> > > > > > > 1- index each table in a separate directory and then keep all
> > > > relation
> > > > > > in
> > > > > > > order to get right result. in this method, we should use
> filters
> > > to
> > > > > > > overcome
> > > > > > > the problem of searching on another search result.
> > > > > > > 2. joining two or more tables and index the result of join
> > query.
> > > > > > >
> > > > > > > which approach is better, reliable, has acceptable
> performance.
> > > > > > >
> > > > > > > thanks
> > > > > > > --
> > > > > > > Regards,
> > > > > > > Mohammad
> > > > > > >
> > > > > >
> > > > >
> > > > >
> > > > >
> > > > > --
> > > > > Regards,
> > > > > Mohammad
> > > > >
> > > >
> > >
> > >
> > >
> > > --
> > > Regards,
> > > Mohammad
> > >
> >
>
>
>
> --
> Regards,
> Mohammad
>

------=_Part_109468_23398089.1172498049686--

From java-user-return-26410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 26 15:18:24 2007
Return-Path: <java-user-return-26410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42391 invoked from network); 26 Feb 2007 15:18:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2007 15:18:23 -0000
Received: (qmail 75767 invoked by uid 500); 26 Feb 2007 15:18:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75732 invoked by uid 500); 26 Feb 2007 15:18:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75721 invoked by uid 99); 26 Feb 2007 15:18:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 07:18:25 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_FONT_BIG,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 217.68.146.190 as permitted sender)
Received: from [217.68.146.190] (HELO cluster-b.mailcontrol.com) (217.68.146.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 07:18:10 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly07b.srv.mailcontrol.com (MailControl) with SMTP id l1QFHa5U024088
	for <java-user@lucene.apache.org>; Mon, 26 Feb 2007 15:17:42 GMT
Received: From SGBD012104.wsatkins.com ([10.202.26.18]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 117250303625; Mon, 26 Feb 2007 15:17:16 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012104.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 26 Feb 2007 15:17:15 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C759B9.328E8B97"
Subject: Date Searches
Date: Mon, 26 Feb 2007 15:17:15 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705F49E8C@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Date Searches
Thread-Index: AcdZqwKyKSL2BD3rRn66qE7UYxAqZAADib1w
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 26 Feb 2007 15:17:15.0958 (UTC) FILETIME=[32CEBD60:01C759B9]
X-Scanned-By: MailControl A-07-06-90 (www.mailcontrol.com) on 10.66.0.117
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C759B9.328E8B97
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Anybody?

> ______________________________________________=20
> From: 	Kainth, Sachin=20=20
> Sent:	26 February 2007 13:36
> To:	'java-user@lucene.apache.org'
> Subject:	Date searches
>=20
> Hi all,
>=20
> I have an index in which dates are represented as ranges of two
> integers (there are two fields one foreach integer).  The two integers
> are years.  AD dates are represented as a positive integer and BC
> dates as a negative one  There are three possible types of ranges.
> These are listed below with example dates:
>=20
> *	BC - BC (-2000 - -1000)
> *	BC - AD (-1000 - 1000)
> *	AD - AD (1000 - 1200)
>=20
> What I want is to have a textbox in which the user enters a year (eg
> 1990) and all records for which that date falls within the record's
> date range are returned.
>=20
> What would be the query syntax for this?
>=20
> Cheers=20


This email and any attached files are confidential and copyright protected.=
 If you are not the addressee, any dissemination of this communication is s=
trictly prohibited. Unless otherwise expressly agreed in writing, nothing s=
tated in this communication shall be legally binding.

The ultimate parent company of the Atkins Group is WS Atkins plc.  Register=
ed in England No. 1885586.  Registered Office Woodcote Grove, Ashley Road, =
Epsom, Surrey KT18 5BW.

Consider the environment. Please don't print this e-mail unless you really =
need to.=20

------_=_NextPart_001_01C759B9.328E8B97--

From java-user-return-26411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 26 15:23:16 2007
Return-Path: <java-user-return-26411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44978 invoked from network); 26 Feb 2007 15:23:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2007 15:23:16 -0000
Received: (qmail 85450 invoked by uid 500); 26 Feb 2007 15:23:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85004 invoked by uid 500); 26 Feb 2007 15:23:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84992 invoked by uid 99); 26 Feb 2007 15:23:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 07:23:18 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.164.102.196] (HELO mail.gotuit.com) (216.164.102.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 07:23:07 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Date Searches
Date: Mon, 26 Feb 2007 10:22:41 -0500
Message-ID: <586B46B62C73C44AA8F4302E01A84A842D938E@exchange.gotuit.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Date Searches
Thread-Index: AcdZqwKyKSL2BD3rRn66qE7UYxAqZAADib1wAAAmneA=
From: "Seeta Somagani" <seeta@gotuit.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


This might help.
http://www.catb.org/~esr/faqs/smart-questions.html


-----Original Message-----
From: Kainth, Sachin [mailto:Sachin.Kainth@atkinsglobal.com]=20
Sent: Monday, February 26, 2007 10:17 AM
To: java-user@lucene.apache.org
Subject: Date Searches

Anybody?

> ______________________________________________=20
> From: 	Kainth, Sachin =20
> Sent:	26 February 2007 13:36
> To:	'java-user@lucene.apache.org'
> Subject:	Date searches
>=20
> Hi all,
>=20
> I have an index in which dates are represented as ranges of two
> integers (there are two fields one foreach integer).  The two integers
> are years.  AD dates are represented as a positive integer and BC
> dates as a negative one  There are three possible types of ranges.
> These are listed below with example dates:
>=20
> *	BC - BC (-2000 - -1000)
> *	BC - AD (-1000 - 1000)
> *	AD - AD (1000 - 1200)
>=20
> What I want is to have a textbox in which the user enters a year (eg
> 1990) and all records for which that date falls within the record's
> date range are returned.
>=20
> What would be the query syntax for this?
>=20
> Cheers=20


This email and any attached files are confidential and copyright
protected. If you are not the addressee, any dissemination of this
communication is strictly prohibited. Unless otherwise expressly agreed
in writing, nothing stated in this communication shall be legally
binding.

The ultimate parent company of the Atkins Group is WS Atkins plc.
Registered in England No. 1885586.  Registered Office Woodcote Grove,
Ashley Road, Epsom, Surrey KT18 5BW.

Consider the environment. Please don't print this e-mail unless you
really need to.=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 26 15:26:23 2007
Return-Path: <java-user-return-26412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46251 invoked from network); 26 Feb 2007 15:26:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2007 15:26:22 -0000
Received: (qmail 88725 invoked by uid 500); 26 Feb 2007 15:26:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88688 invoked by uid 500); 26 Feb 2007 15:26:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88677 invoked by uid 99); 26 Feb 2007 15:26:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 07:26:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.36.219] (HELO web53909.mail.yahoo.com) (206.190.36.219)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 26 Feb 2007 07:26:13 -0800
Received: (qmail 26282 invoked by uid 60001); 26 Feb 2007 15:25:52 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=bfgTOWdr8fASG9tY/M7y0Jnzx2bvgZN+zC9hjkIzGRehvcjxuDuZgckxxa9Y9+OclWr+mzPQ7t43ApKsiFpbg2txja0qBgxxQndOAVSMR5i2MHfIDSeqUeVeeQLADZQXtOW1x5+S9M66SeG/jFCp68/VRhf4gPQjhH7kKHLVzrk=  ;
Message-ID: <20070226152552.26280.qmail@web53909.mail.yahoo.com>
X-YMail-OSG: nEQbx1IVM1naDjNAeBCMLP30ry93rjvdZ9LYnjv.TbckvUl5TQ9oyEFy9bCNBL1Y79gkpacRD79icPUKGIP6U2zW3.p3VfK3vSXNwhvNEhSAsWyTQwObhRRuDXVlChHLNSu01ZlZ1EzXj1c-
Received: from [66.92.157.254] by web53909.mail.yahoo.com via HTTP; Mon, 26 Feb 2007 07:25:52 PST
X-Mailer: YahooMailRC/368.8 YahooMailWebService/0.6.132.8
Date: Mon, 26 Feb 2007 07:25:51 -0800 (PST)
From: ariel goldberg <ariflip@yahoo.com>
Subject: One index per user or one index per day?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

=0AGreetings,=0A=0A=0A=0A =0A=0A=0A=0AI'm creating an application that =0Ar=
equires the indexing of millions of documents on behalf of a large group of=
 =0Ausers, and was hoping to get an opinion on whether I should use one ind=
ex per =0Auser or one index per day.=0A=0A=0A=0A =0A=0A=0A=0AMy application=
 will have to handle =0Athe following:=0A=0A=0A=0A =0A=0A=0A=0A- the indexi=
ng of about 1 million 5K =0Adocuments per day, with each document containin=
g about 5 =0Afields=0A=0A=0A=0A- expiration of documents, since =0Aafter a =
while, my hard drive would run out of =0Aroom=0A=0A=0A=0A- queries that con=
sist of boolean =0Aexpressions (e.g., the body field contains "a" AND "b", =
and the title field =0Acontains "c"), as well as ranges (e.g., the document=
 needs to have been indexed =0Abetween 2/25/07 10:00 am and 2/28/07 9:00 pm=
)=0A=0A=0A=0A- permissions; in other words, user =0AA might be able to sear=
ch on documents X and Y, but user B might be able to =0Asearch on documents=
 Y and Z.=0A=0A=0A=0A- up to 1,000 =0Ausers=0A=0A=0A=0A =0A=0A=0A=0ASo, I w=
as considering the =0Afollowing:=0A=0A=0A=0A =0A=0A=0A=0A1) Using one index=
 per =0Auser=0A=0A=0A=0A =0A=0A=0A=0AThis would entail creating and using =
=0Aup to 1,000 indices.  Document Y in the example above would have to be =
=0Aduplicated.  Expiration is performed via IndexWriter.deleteDocuments.  T=
he =0Aadvantage here is that querying should be reasonably quick, because e=
ach index =0Awould only contain tens of thousands of documents, instead of =
millions.  The =0Adisadvantages: I'm concerned about the "too many open fil=
es" error, and I'm also =0Aconcerned about the performance of =0AdeleteDocu=
ments.=0A=0A=0A=0A =0A=0A=0A=0A2) Using one index per =0Aday=0A=0A=0A=0A =
=0A=0A=0A=0AEach day, I create a new index.  =0AAgain, document Y in the ex=
ample above would have to be duplicated (is there any =0Away around this?) =
 The advantage here is that expiring documents means simply =0Adeleting the=
 index corresponding to a particular day.  The disadvantage is the =0Aquery=
 performance, since the queries, which are already very complex, would have=
 =0Ato be performed using MultiSearcher (if expiration is after 10 days, th=
at's 10 =0Aindices to search across).=0A=0A=0A=0A =0A=0A=0A=0ATough to know=
 for sure which option =0Ais better without testing, but does anyone have a=
 gut reaction?  Any advice =0Awould be greatly appreciated!=0A=0A=0A=0A =0A=
=0A=0A=0AThanks,=0A=0A=0A=0AAriel=0A=0A=0A=0A=0A=0A=0A =0A_________________=
___________________________________________________________________=0ANeed =
Mail bonding?=0AGo to the Yahoo! Mail Q&A for great tips from Yahoo! Answer=
s users.=0Ahttp://answers.yahoo.com/dir/?link=3Dlist&sid=3D396546091

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 26 16:11:32 2007
Return-Path: <java-user-return-26413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74642 invoked from network); 26 Feb 2007 16:11:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2007 16:11:31 -0000
Received: (qmail 78611 invoked by uid 500); 26 Feb 2007 16:11:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78578 invoked by uid 500); 26 Feb 2007 16:11:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78567 invoked by uid 99); 26 Feb 2007 16:11:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 08:11:31 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jmuguruza@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 08:11:20 -0800
Received: by ug-out-1314.google.com with SMTP id k40so822072ugc
        for <java-user@lucene.apache.org>; Mon, 26 Feb 2007 08:10:58 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=ZHklcCOPDVLAeqlBHs3l6wrIA/KLNI8a9U2dlYvmBpu87lbj+1Ldj0jGe8OOal2hD0PEjRMrjp+AYu3hpNW3DGdOXkwRVvwsjpTATTNUWEk9XhwLVvzUr8P3jMzpOecAQGxX1SKeo8UH5SVozhOxkROaPX4NPclWgRWmWp9wiCc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=B49mh2+pEg0bFheZM2mhgUfUSDjNAOUmFCQOpu+AO22bMPSSc/4/SuYyruo16eKp835JVJ1jfRHXiumadAO++p/a6ZX8UsBUmhgdehmQVu9eD11bCFnfPo/Pc3Rq3mC2Wnm1usdvcSv10W21JuSU0NGxgLGcUKEjk4nTsmW/OpU=
Received: by 10.78.106.3 with SMTP id e3mr465479huc.1172506258575;
        Mon, 26 Feb 2007 08:10:58 -0800 (PST)
Received: by 10.78.48.18 with HTTP; Mon, 26 Feb 2007 08:10:58 -0800 (PST)
Message-ID: <f071061b0702260810n70a1a8a9oc2977e479a53ca64@mail.gmail.com>
Date: Mon, 26 Feb 2007 17:10:58 +0100
From: jm <jmuguruza@gmail.com>
To: java-user@lucene.apache.org
Subject: NPE in RAMDirectory after upgrade to 2.1
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hello all,

I have two processes running in parallel, each one adding and deleting
to its own set of indexes. Since I upgraded to 2.1 I am getting a NPE
at RAMDirectory.java line 207 in one of the processes.

Line 207 is:
      RAMFile existing = (RAMFile)fileMap.get(name);
the stack trace is:
java.lang.NullPointerException
org.apache.lucene.store.RAMDirectory.createOutput(RAMDirectory.java:207)
org.apache.lucene.index.FieldInfos.write(FieldInfos.java:256)
org.apache.lucene.index.DocumentWriter.addDocument(DocumentWriter.java:75)
org.apache.lucene.index.IndexWriter.buildSingleDocSegment(IndexWriter.java:706)
org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:694)
org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:680)


I understand this RAMDirectory is something used internally by the
FSDirectories.

I have been double checking my code and I cannot see anything wrong.
Besided upgrading to lucene 2.1 I made some changes to take advantage
of new features (mainly set the locking factory of my indexes to be
the native one, IndexWriter deletes stuff).

someone has a clue? I tried to reproduce in my workstation but had no
success, but it happens consistently in my prod environment.

thanks
javi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 26 16:25:39 2007
Return-Path: <java-user-return-26414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82825 invoked from network); 26 Feb 2007 16:25:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2007 16:25:38 -0000
Received: (qmail 12916 invoked by uid 500); 26 Feb 2007 16:25:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12875 invoked by uid 500); 26 Feb 2007 16:25:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12840 invoked by uid 99); 26 Feb 2007 16:25:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 08:25:38 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=FROM_HAS_ULINE_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.29] (HELO out5.smtp.messagingengine.com) (66.111.4.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 08:25:25 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id 15E571D936A;
	Mon, 26 Feb 2007 11:25:05 -0500 (EST)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by out1.internal (MEProxy); Mon, 26 Feb 2007 11:25:05 -0500
X-Sasl-enc: Y70WjxElBnNwIa1Nz2Wu5enJY3X3MWS3VJQO5LDVoYe4 1172507104
Received: from [192.168.2.36] (unknown [81.105.111.192])
	by mail.messagingengine.com (Postfix) with ESMTP id 52E89AFE4;
	Mon, 26 Feb 2007 11:25:04 -0500 (EST)
Message-ID: <45E309E7.7020102@fastmail.fm>
Date: Mon, 26 Feb 2007 16:25:11 +0000
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To:  paul_t100@fastmail.fm
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To: Erick Erickson <erickerickson@gmail.com>
CC:  java-user@lucene.apache.org
Subject: Re: Can I use Lucene to retrieve a list of duplicates
References: <45DF055C.9050705@fastmail.fm>	 <359a92830702230722w19c441f5oe3d6fdd361ef23c@mail.gmail.com>	 <45DF1423.3070707@fastmail.fm>	 <Pine.LNX.4.58.0702231446220.6828@hal.rescomp.berkeley.edu>	 <45E2B7CC.9070704@fastmail.fm> <359a92830702260510m1198d59q69f9b61d0fa6c0e1@mail.gmail.com>
In-Reply-To: <359a92830702260510m1198d59q69f9b61d0fa6c0e1@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi

I  got it working before I saw your latest mail, the only problem is 
that it doesn't look very efficient. This is my duplicate method, the 
problem is that I have to enumerate through *every* term. This was worse 
before because I was only interested
in terms that matched a particular field (column) but had enumerate 
through every term whatever field it was part of, so I recreated my 
index so that each document only contained a row number field, and a 
second field for the value of the column, however this means I am going 
to end up with a number of different indexes each solving a particular 
problem.

paul

 public List<Integer> getDuplicates()
    {
        List<Integer> matches = new ArrayList<Integer>();
        try
        {
            IndexReader ir = IndexReader.open(directory);
            TermEnum terms = ir.terms();
            while (terms.next())
            {
                if (terms.docFreq() > 1)
                {
                    TermDocs termDocs = ir.termDocs(terms.term());
                    while (termDocs.next())
                    {
                        Document d = ir.document(termDocs.doc());
                        matches.add(new 
Integer(d.getField(ROW_NUMBER).stringValue()));
                    }
                }
            }

        }
        catch (IOException ioe)
        {
            ioe.printStackTrace();
        }
        return matches;
    }

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 26 16:36:31 2007
Return-Path: <java-user-return-26415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86798 invoked from network); 26 Feb 2007 16:36:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2007 16:36:30 -0000
Received: (qmail 42672 invoked by uid 500); 26 Feb 2007 16:36:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42640 invoked by uid 500); 26 Feb 2007 16:36:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42628 invoked by uid 99); 26 Feb 2007 16:36:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 08:36:32 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.29] (HELO out5.smtp.messagingengine.com) (66.111.4.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 08:36:20 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id AE34F1D994E
	for <java-user@lucene.apache.org>; Mon, 26 Feb 2007 11:35:59 -0500 (EST)
Received: from web4.messagingengine.com ([10.202.2.213])
  by out1.internal (MEProxy); Mon, 26 Feb 2007 11:35:59 -0500
Received: by web4.messagingengine.com (Postfix, from userid 99)
	id 8175B1828A8; Mon, 26 Feb 2007 11:35:59 -0500 (EST)
Message-Id: <1172507759.4516.1176573789@webmail.messagingengine.com>
X-Sasl-Enc: /pdBqEk5MY6bnUJFasoQPYq3HBPwjpBZRDMGN/BRp4Tk 1172507759
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <f071061b0702260810n70a1a8a9oc2977e479a53ca64@mail.gmail.com>
Subject: Re: NPE in RAMDirectory after upgrade to 2.1
In-Reply-To: <f071061b0702260810n70a1a8a9oc2977e479a53ca64@mail.gmail.com>
Date: Mon, 26 Feb 2007 11:35:59 -0500
X-Virus-Checked: Checked by ClamAV on apache.org


"jm" <jmuguruza@gmail.com> wrote:

> I have two processes running in parallel, each one adding and deleting
> to its own set of indexes. Since I upgraded to 2.1 I am getting a NPE
> at RAMDirectory.java line 207 in one of the processes.
> 
> Line 207 is:
>       RAMFile existing = (RAMFile)fileMap.get(name);
> the stack trace is:
> java.lang.NullPointerException
> org.apache.lucene.store.RAMDirectory.createOutput(RAMDirectory.java:207)
> org.apache.lucene.index.FieldInfos.write(FieldInfos.java:256)
> org.apache.lucene.index.DocumentWriter.addDocument(DocumentWriter.java:75)
> org.apache.lucene.index.IndexWriter.buildSingleDocSegment(IndexWriter.java:706)
> org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:694)
> org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:680)

Hmm.  One thing that changed in 2.1 is when a RAMDirectory is closed
it now sets fileMap to null (which it did not pre-2.1).

Is it possible you are accidentally closing a writer but then calling
its addDocument method?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 26 17:02:59 2007
Return-Path: <java-user-return-26416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6850 invoked from network); 26 Feb 2007 17:02:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2007 17:02:56 -0000
Received: (qmail 92711 invoked by uid 500); 26 Feb 2007 17:02:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92680 invoked by uid 500); 26 Feb 2007 17:02:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92658 invoked by uid 99); 26 Feb 2007 17:02:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 09:02:55 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Sachin.Kainth@atkinsglobal.com designates 217.79.216.190 as permitted sender)
Received: from [217.79.216.190] (HELO cluster-e.mailcontrol.com) (217.79.216.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 09:02:38 -0800
Received: from SGBD012100.wsatkins.com ([193.117.24.24])
	by rly02e.srv.mailcontrol.com (MailControl) with SMTP id l1QH27g6011079
	for <java-user@lucene.apache.org>; Mon, 26 Feb 2007 17:02:08 GMT
Received: From SGBD012104.wsatkins.com ([10.202.26.18]) by SGBD012100.wsatkins.com (WebShield SMTP v4.5 MR2);
	id 1172509303138; Mon, 26 Feb 2007 17:01:43 +0000
Received: from SGBLOW2101.wsatkins.com ([10.22.33.30]) by SGBD012104.wsatkins.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 26 Feb 2007 17:01:43 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Date Searches
Date: Mon, 26 Feb 2007 17:01:42 -0000
Message-ID: <BC1CFC544422CB4A934908E126A4742705F7C48C@SGBLOW2101.wsatkins.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Date Searches
Thread-Index: AcdZqwKyKSL2BD3rRn66qE7UYxAqZAADib1wAAAmneAAA3ApYA==
References: <586B46B62C73C44AA8F4302E01A84A842D938E@exchange.gotuit.com>
From: "Kainth, Sachin" <Sachin.Kainth@atkinsglobal.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 26 Feb 2007 17:01:43.0063 (UTC) FILETIME=[CA4B1270:01C759C7]
X-Scanned-By: MailControl A-06-00-00 (www.mailcontrol.com) on 10.69.0.112
X-Virus-Checked: Checked by ClamAV on apache.org

Ok here's some more information on this:

Having done this search:

date1:{-9999999999" + " TO " + Date + "} AND " +
	"date2:{" + Date + " TO 9999999999}";=20

But the problem is that the range search feature here using
Lexicographic and not numeric ranges.  Is there a way to use numeric
ranges?

-----Original Message-----
From: Seeta Somagani [mailto:seeta@gotuit.com]=20
Sent: 26 February 2007 15:23
To: java-user@lucene.apache.org
Subject: RE: Date Searches


This might help.
http://www.catb.org/~esr/faqs/smart-questions.html


-----Original Message-----
From: Kainth, Sachin [mailto:Sachin.Kainth@atkinsglobal.com]
Sent: Monday, February 26, 2007 10:17 AM
To: java-user@lucene.apache.org
Subject: Date Searches

Anybody?

> ______________________________________________=20
> From: 	Kainth, Sachin =20
> Sent:	26 February 2007 13:36
> To:	'java-user@lucene.apache.org'
> Subject:	Date searches
>=20
> Hi all,
>=20
> I have an index in which dates are represented as ranges of two=20
> integers (there are two fields one foreach integer).  The two integers

> are years.  AD dates are represented as a positive integer and BC=20
> dates as a negative one  There are three possible types of ranges.
> These are listed below with example dates:
>=20
> *	BC - BC (-2000 - -1000)
> *	BC - AD (-1000 - 1000)
> *	AD - AD (1000 - 1200)
>=20
> What I want is to have a textbox in which the user enters a year (eg
> 1990) and all records for which that date falls within the record's=20
> date range are returned.
>=20
> What would be the query syntax for this?
>=20
> Cheers


This email and any attached files are confidential and copyright
protected. If you are not the addressee, any dissemination of this
communication is strictly prohibited. Unless otherwise expressly agreed
in writing, nothing stated in this communication shall be legally
binding.

The ultimate parent company of the Atkins Group is WS Atkins plc.
Registered in England No. 1885586.  Registered Office Woodcote Grove,
Ashley Road, Epsom, Surrey KT18 5BW.

Consider the environment. Please don't print this e-mail unless you
really need to.=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



This message has been scanned for viruses by MailControl - (see
http://bluepages.wsatkins.co.uk/?6875772)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 26 17:06:24 2007
Return-Path: <java-user-return-26417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8498 invoked from network); 26 Feb 2007 17:06:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2007 17:06:23 -0000
Received: (qmail 98199 invoked by uid 500); 26 Feb 2007 17:06:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98162 invoked by uid 500); 26 Feb 2007 17:06:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98151 invoked by uid 99); 26 Feb 2007 17:06:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 09:06:24 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [128.121.61.10] (HELO phizblip.com) (128.121.61.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 09:06:12 -0800
Received: from [10.0.11.108] (avaliable.octelecom.net [208.187.181.114] (may be forged))
	(authenticated bits=0)
	by phizblip.com (8.13.6.20060614/8.13.6) with ESMTP id l1QH5oKQ043637
	for <java-user@lucene.apache.org>; Mon, 26 Feb 2007 10:05:50 -0700 (MST)
Message-ID: <45E312F9.4@my-family.us>
Date: Mon, 26 Feb 2007 10:03:53 -0700
From: Shane <lucene-user@my-family.us>
User-Agent: Thunderbird 1.5.0.9 (X11/20070212)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: One index per user or one index per day?
References: <20070226152552.26280.qmail@web53909.mail.yahoo.com>
In-Reply-To: <20070226152552.26280.qmail@web53909.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

If you can categorize the documents based on user permissions, that is 
the route I would go. 

For example users 1, 2,  and 3 are allowed to search documents a and b.  
In addition, user 1 can search documents c and d, while users 2 and 3 
can search documents e and f.  I would create 3 indexes: one for docs a 
and b, one for docs c and d, and finally one for docs e and f.  Then 
using your method of choice, you can restrict documents based on the 
users permission.

I realize scaling may cause an issue, but this route would allow you to 
normalize your data and reduce duplication in the system.

Shane

ariel goldberg wrote:
> Greetings,
>
>
>
>  
>
>
>
> I'm creating an application that 
> requires the indexing of millions of documents on behalf of a large group of 
> users, and was hoping to get an opinion on whether I should use one index per 
> user or one index per day.
>
>
>
>  
>
>
>
> My application will have to handle 
> the following:
>
>
>
>  
>
>
>
> - the indexing of about 1 million 5K 
> documents per day, with each document containing about 5 
> fields
>
>
>
> - expiration of documents, since 
> after a while, my hard drive would run out of 
> room
>
>
>
> - queries that consist of boolean 
> expressions (e.g., the body field contains "a" AND "b", and the title field 
> contains "c"), as well as ranges (e.g., the document needs to have been indexed 
> between 2/25/07 10:00 am and 2/28/07 9:00 pm)
>
>
>
> - permissions; in other words, user 
> A might be able to search on documents X and Y, but user B might be able to 
> search on documents Y and Z.
>
>
>
> - up to 1,000 
> users
>
>
>
>  
>
>
>
> So, I was considering the 
> following:
>
>
>
>  
>
>
>
> 1) Using one index per 
> user
>
>
>
>  
>
>
>
> This would entail creating and using 
> up to 1,000 indices.  Document Y in the example above would have to be 
> duplicated.  Expiration is performed via IndexWriter.deleteDocuments.  The 
> advantage here is that querying should be reasonably quick, because each index 
> would only contain tens of thousands of documents, instead of millions.  The 
> disadvantages: I'm concerned about the "too many open files" error, and I'm also 
> concerned about the performance of 
> deleteDocuments.
>
>
>
>  
>
>
>
> 2) Using one index per 
> day
>
>
>
>  
>
>
>
> Each day, I create a new index.  
> Again, document Y in the example above would have to be duplicated (is there any 
> way around this?)  The advantage here is that expiring documents means simply 
> deleting the index corresponding to a particular day.  The disadvantage is the 
> query performance, since the queries, which are already very complex, would have 
> to be performed using MultiSearcher (if expiration is after 10 days, that's 10 
> indices to search across).
>
>
>
>  
>
>
>
> Tough to know for sure which option 
> is better without testing, but does anyone have a gut reaction?  Any advice 
> would be greatly appreciated!
>
>
>
>  
>
>
>
> Thanks,
>
>
>
> Ariel
>
>
>
>
>
>
>  
> ____________________________________________________________________________________
> Need Mail bonding?
> Go to the Yahoo! Mail Q&A for great tips from Yahoo! Answers users.
> http://answers.yahoo.com/dir/?link=list&sid=396546091
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 26 18:46:20 2007
Return-Path: <java-user-return-26418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48875 invoked from network); 26 Feb 2007 18:46:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2007 18:46:18 -0000
Received: (qmail 30716 invoked by uid 500); 26 Feb 2007 18:46:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30681 invoked by uid 500); 26 Feb 2007 18:46:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30670 invoked by uid 99); 26 Feb 2007 18:46:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 10:46:20 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [82.216.111.40] (HELO smtp4.tech.numericable.fr) (82.216.111.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 10:46:08 -0800
Received: from [192.168.1.101] (ip-3.net-82-216-252.rev.numericable.fr [82.216.252.3])
	by smtp4.tech.numericable.fr (Postfix) with ESMTP id CDDB312A82C
	for <java-user@lucene.apache.org>; Mon, 26 Feb 2007 19:45:45 +0100 (CET)
From: Nicolas =?iso-8859-1?q?Lalev=E9e?= <nicolas.lalevee@anyware-tech.com>
To: java-user@lucene.apache.org
Subject: Re: how to define a pool for Searcher?
Date: Mon, 26 Feb 2007 19:45:46 +0100
User-Agent: KMail/1.9.5
References: <34b8543c0702220009m72f9e9c7pf8f9764953be6a48@mail.gmail.com> <200702251742.02643.nicolas.lalevee@anyware-tech.com> <34b8543c0702260338i13cb8fe6j37189dae21ac45c@mail.gmail.com>
In-Reply-To: <34b8543c0702260338i13cb8fe6j37189dae21ac45c@mail.gmail.com>
Organization: Anyware Technologies
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200702261945.46694.nicolas.lalevee@anyware-tech.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Le lundi 26 f=E9vrier 2007 12:38, Mohammad Norouzi a =E9crit=A0:
> No. actually I dont close the searcher. I just set a flag to true or fals=
e.
> my considerations are:
> [please note I provided a ResultSet so I display the result page by page
> and dont load all the result in a list]
> 1- should I open a searcher for each user? and one reader for all user
> session?
> 2- or create a pool of searcher and one reader for all searcher?
> 3- or a pool of searcher and each has its own reader. but never close them
> just set a flag to true.
>
> which one?

I probably miss something here, because I will continue answer the same : h=
ave=20
only one instance of an index searcher in your entire web application.

Nicolas

>
> On 2/25/07, Nicolas Lalev=E9e <nicolas.lalevee@anyware-tech.com> wrote:
> > Le dimanche 25 f=E9vrier 2007 16:55, Mohammad Norouzi a =E9crit:
> > > so, you mean, I open one reader for each session (each user) and never
> > > close it until the session has expired? if I do this, is that affect
> > > the performance?
> >
> > The searcher/reader is a view on the index. And each time you open a new
> > one,
> > it cost some time. And the only reason to have a new view on the index =
is
> > that you modified it.
> > As you never modify it, as said Mark, never close your searcher/reader.
> > If your sevral users are reading the same index, you might share the
> > instance of
> > the searcher in the different user sessions.
> >
> > Nicolas
> >
> > > On 2/25/07, Mark Miller <markrmiller@gmail.com> wrote:
> > > > If you never modify your index you should never need to close your
> > > > reader (or searcher). Doing so would just slow you down.
> > > >
> > > > Mohammad Norouzi wrote:
> > > > > Hi
> > > > > actually I dont have any writer or writing reader. I just have
> >
> > reader.
> >
> > > > > when
> > > > > a reader is created by the user because the document returned by
> >
> > hits
> >
> > > > > is very much, for example 20,000 so I display the result page by
> >
> > page.
> >
> > > > > whenever
> > > > > user click to next page the hits will use the reader to load next
> > > > > 20 records,
> > > > > besides, I dont have one directory, there are more than one
> >
> > directory
> >
> > > > and
> > > >
> > > > > index on the server and each user may request for one of them.
> > > > > the problem is, a user may close his browser window and the reader
> > > > > will stay
> > > > > open becasue I cant detect it. and either if his session expires =
my
> > > > > destroy
> > > > > method will be called and searcher will close but in the cached
> > > > > searcher i
> > > > > can not detect which one is closed and ready it for next user. if
> >
> > the
> >
> > > > > searcher had a isClosed() method it was easy to determine but
> > > > > unfortunately
> > > > > it's has'nt
> > > > >
> > > > > any idea?
> > > > > thanks again
> > > > >
> > > > > On 2/25/07, Mark Miller <markrmiller@gmail.com> wrote:
> > > > >> I am a bit confused about what you are asking. Why do you need t=
he
> > > > >> Searcher to time out? That code should release your searchers at
> >
> > the
> >
> > > > >> appropriate times...when the index has been modified. The way th=
at
> >
> > I
> >
> > > > use
> > > >
> > > > >> it is to make a synchronized map that keeps around an index
> >
> > accessor
> >
> > > > for
> > > >
> > > > >> each index that I open...from there the code should do the
> >
> > rest...when
> >
> > > > a
> > > >
> > > > >> writer or a writing reader is released the code waits for all
> > > > >> searchers to be released and then clears the cache of searchers
> > > > >> and new searchers are created when requested until another writer
> > > > >> or writing reader is released...
> > > > >>
> > > > >> Mohammad Norouzi wrote:
> > > > >> > Thank you Mark for your useful help. the code you introduce was
> >
> > very
> >
> > > > >> > helpful
> > > > >> > for me
> > > > >> >
> > > > >> > but my only question is that I need to place an idle time for
> >
> > each
> >
> > > > >> open
> > > > >>
> > > > >> > searcher, so if it exceed the specific time then release that
> > > >
> > > > searcher
> > > >
> > > > >> > and
> > > > >> > get ready for another thread.
> > > > >> >
> > > > >> > how can I put such this feature, I was thinking of a timeout
> > > >
> > > > listener,
> > > >
> > > > >> > but
> > > > >> > dont know where tu put it. I have a SingleSearcher that wraps
> > > >
> > > > lucene's
> > > >
> > > > >> > Searcher and it returns an ResultSet in which I put a Hits
> >
> > object.
> >
> > > > >> > do I have
> > > > >> > to put the time in my ResultSet or my SingleSeacher?
> > > > >> >
> > > > >> > still I dont know ehrthrt the reader is important for Hits or
> > > > >>
> > > > >> Searcher?
> > > > >>
> > > > >> > consider I passed a hits to my ResultSet, now, if I close
> >
> > searcher,
> >
> > > > >> > will the
> > > > >> > Reader get closed?  or another vague thing is can a Reader work
> > > >
> > > > thread
> > > >
> > > > >> > safely for every Searcher with differenet queries?
> > > > >> >
> > > > >> > Thank you very much again.
> > > > >> >
> > > > >> > On 2/22/07, Mark Miller <markrmiller@gmail.com> wrote:
> > > > >> >> I would not do this from scratch...if you are interested in
> > > > >> >> Solr
> >
> > go
> >
> > > > >> that
> > > > >>
> > > > >> >> route else I would build off
> > > > >> >> http://issues.apache.org/jira/browse/LUCENE-390
> > > > >> >>
> > > > >> >> - Mark
> > > > >> >>
> > > > >> >> Mohammad Norouzi wrote:
> > > > >> >> > Hi all,
> > > > >> >> > I am going to build a Searcher pooling. if any one has
> > > > >>
> > > > >> experience on
> > > > >>
> > > > >> >> > this, I
> > > > >> >> > would be glad to hear his/her recommendation and suggestion.
> > > > >> >> > I
> > > >
> > > > want
> > > >
> > > > >> to
> > > > >>
> > > > >> >> > know
> > > > >> >> > what issues I should be apply. considering I am going to use
> > > > >>
> > > > >> this on
> > > > >> a
> > > > >>
> > > > >> >> > web
> > > > >> >> > application with many user sessions.
> > > > >> >> >
> > > > >> >> > thank you very much in advance.
> > > >
> > > > -------------------------------------------------------------------=
=2D-
> > > >
> > > > >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.o=
rg
> > > > >> >> For additional commands, e-mail:
> >
> > java-user-help@lucene.apache.org
> >
> >
> > ---------------------------------------------------------------------
> >
> > > > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > > -------------------------------------------------------------------=
=2D-
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 26 18:55:52 2007
Return-Path: <java-user-return-26419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51943 invoked from network); 26 Feb 2007 18:55:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2007 18:55:50 -0000
Received: (qmail 52321 invoked by uid 500); 26 Feb 2007 18:55:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52286 invoked by uid 500); 26 Feb 2007 18:55:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52274 invoked by uid 99); 26 Feb 2007 18:55:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 10:55:51 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jmuguruza@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 10:55:39 -0800
Received: by ug-out-1314.google.com with SMTP id k40so874029ugc
        for <java-user@lucene.apache.org>; Mon, 26 Feb 2007 10:55:16 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=mLrQRiCtbprna0LwzclYtnuEoghIHH+sbHrxxSHUS1yNvEviegBs+b1rIqdOWBZSZ1wiezjnTRKRE/yTlKMEhB64cMS/+m4l7f4CCxzu72tqhbZgiwOflSGwQQLQXErfEGz0IcbnxYG+OqjI3UckOoJfLQlDkU+QPqIFduRZoV0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=M7WX9e2aXXyMbr/I5lb89T6avDtgX0P0H8sigqURHf4eVxRzckES9u02OCU0a+xp9zKVrmPw5emkFOMgJI7gXzMVHwDyP17qunfi65P+q9+pH+WonTcORBv5NRqC3piWOqFgY56/iM6ZLGN0lfAAzs3hLHXRmEo8o+p2N8Qhw+s=
Received: by 10.78.180.16 with SMTP id c16mr486330huf.1172516116370;
        Mon, 26 Feb 2007 10:55:16 -0800 (PST)
Received: by 10.78.48.18 with HTTP; Mon, 26 Feb 2007 10:55:15 -0800 (PST)
Message-ID: <f071061b0702261055icb2bfc6p1606005ff4cb15e8@mail.gmail.com>
Date: Mon, 26 Feb 2007 19:55:15 +0100
From: jm <jmuguruza@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: NPE in RAMDirectory after upgrade to 2.1
In-Reply-To: <1172507759.4516.1176573789@webmail.messagingengine.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <f071061b0702260810n70a1a8a9oc2977e479a53ca64@mail.gmail.com>
	 <1172507759.4516.1176573789@webmail.messagingengine.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Mike,

You were right. As I have many indexes I keep a cache of the
IndexWriters, and in some specific case (that cannot happen in my dev
env) I was closing them without removing them from the cache. Somehow
it was working before 2.1, and upgrading made the error clear.

thanks
javi

On 2/26/07, Michael McCandless <lucene@mikemccandless.com> wrote:
>
> "jm" <jmuguruza@gmail.com> wrote:
>
> > I have two processes running in parallel, each one adding and deleting
> > to its own set of indexes. Since I upgraded to 2.1 I am getting a NPE
> > at RAMDirectory.java line 207 in one of the processes.
> >
> > Line 207 is:
> >       RAMFile existing = (RAMFile)fileMap.get(name);
> > the stack trace is:
> > java.lang.NullPointerException
> > org.apache.lucene.store.RAMDirectory.createOutput(RAMDirectory.java:207)
> > org.apache.lucene.index.FieldInfos.write(FieldInfos.java:256)
> > org.apache.lucene.index.DocumentWriter.addDocument(DocumentWriter.java:75)
> > org.apache.lucene.index.IndexWriter.buildSingleDocSegment(IndexWriter.java:706)
> > org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:694)
> > org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:680)
>
> Hmm.  One thing that changed in 2.1 is when a RAMDirectory is closed
> it now sets fileMap to null (which it did not pre-2.1).
>
> Is it possible you are accidentally closing a writer but then calling
> its addDocument method?
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 26 19:13:33 2007
Return-Path: <java-user-return-26420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63576 invoked from network); 26 Feb 2007 19:13:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2007 19:13:30 -0000
Received: (qmail 99637 invoked by uid 500); 26 Feb 2007 19:13:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99601 invoked by uid 500); 26 Feb 2007 19:13:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99590 invoked by uid 99); 26 Feb 2007 19:13:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 11:13:30 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chris.lu@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 11:13:19 -0800
Received: by nf-out-0910.google.com with SMTP id i2so1731838nfe
        for <java-user@lucene.apache.org>; Mon, 26 Feb 2007 11:12:54 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=iKiZ1RQlJes8YMGztKvu+9Vptc8AcLxtMEyxYc0r9gUb/Rk2MSqK2CpVVD/5FfnjQ6MQ6AKK6p5hyg09+Foerr/O/a/M9B+d3QFVZVYK/aPBkwjy7eMh1z+jzz7oBm0C3pk/XF1dV5kcBAtc7mCZ6TaLQYznpp4utZdaOgc3a6E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=BLxqCwHYQyaCk2QUU8TSg6giDDfJuaruX3Urlj7mvELgZIBDWJIDska5R4MvIm4qAvf1lYhgSRDFWG6sSVglm2fjnJSm3yeqbdzZEZVsLUIHRGg3L7tgEkcV42gXMU/9RaZmZFgsa2f9jSGWNJFTO0oQ/YJNKitjQX1lBX7NbJw=
Received: by 10.82.178.11 with SMTP id a11mr1938690buf.1172517173001;
        Mon, 26 Feb 2007 11:12:53 -0800 (PST)
Received: by 10.82.166.7 with HTTP; Mon, 26 Feb 2007 11:12:52 -0800 (PST)
Message-ID: <6e3ae6310702261112x54c14d55yeba29b5e7eb72106@mail.gmail.com>
Date: Mon, 26 Feb 2007 11:12:52 -0800
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to define a pool for Searcher?
In-Reply-To: <200702261945.46694.nicolas.lalevee@anyware-tech.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <34b8543c0702220009m72f9e9c7pf8f9764953be6a48@mail.gmail.com>
	 <200702251742.02643.nicolas.lalevee@anyware-tech.com>
	 <34b8543c0702260338i13cb8fe6j37189dae21ac45c@mail.gmail.com>
	 <200702261945.46694.nicolas.lalevee@anyware-tech.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, Nicolas,

Just a note: Having one searcher is far enough for ordinary usage,
even some production sites. But I do see some throughput gain through
increasing the number of searchers.

Those searchers should either be opened on an static index, or be
synchronized to open/close cleanly, to avoid any exceptions.

--=20
Chris Lu
-------------------------
Instant Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com


On 2/26/07, Nicolas Lalev=E9e <nicolas.lalevee@anyware-tech.com> wrote:
> Le lundi 26 f=E9vrier 2007 12:38, Mohammad Norouzi a =E9crit:
> > No. actually I dont close the searcher. I just set a flag to true or fa=
lse.
> > my considerations are:
> > [please note I provided a ResultSet so I display the result page by pag=
e
> > and dont load all the result in a list]
> > 1- should I open a searcher for each user? and one reader for all user
> > session?
> > 2- or create a pool of searcher and one reader for all searcher?
> > 3- or a pool of searcher and each has its own reader. but never close t=
hem
> > just set a flag to true.
> >
> > which one?
>
> I probably miss something here, because I will continue answer the same :=
 have
> only one instance of an index searcher in your entire web application.
>
> Nicolas
>
> >

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 26 19:22:24 2007
Return-Path: <java-user-return-26421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68989 invoked from network); 26 Feb 2007 19:22:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2007 19:22:07 -0000
Received: (qmail 15482 invoked by uid 500); 26 Feb 2007 19:22:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15443 invoked by uid 500); 26 Feb 2007 19:22:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15426 invoked by uid 99); 26 Feb 2007 19:22:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 11:22:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.29] (HELO out5.smtp.messagingengine.com) (66.111.4.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 11:21:57 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id 3BD1F1DF1B4
	for <java-user@lucene.apache.org>; Mon, 26 Feb 2007 14:21:36 -0500 (EST)
Received: from web4.messagingengine.com ([10.202.2.213])
  by out1.internal (MEProxy); Mon, 26 Feb 2007 14:21:36 -0500
Received: by web4.messagingengine.com (Postfix, from userid 99)
	id CC9C2160FE8; Mon, 26 Feb 2007 14:21:35 -0500 (EST)
Message-Id: <1172517693.32311.1176606555@webmail.messagingengine.com>
X-Sasl-Enc: waXBM5W/YaG5kl1B1LRDYYn8tmQ2Hf3Aurr8zHpXtYFq 1172517693
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <f071061b0702260810n70a1a8a9oc2977e479a53ca64@mail.gmail.com>
   <1172507759.4516.1176573789@webmail.messagingengine.com>
   <f071061b0702261055icb2bfc6p1606005ff4cb15e8@mail.gmail.com>
Subject: Re: NPE in RAMDirectory after upgrade to 2.1
In-Reply-To: <f071061b0702261055icb2bfc6p1606005ff4cb15e8@mail.gmail.com>
Date: Mon, 26 Feb 2007 14:21:33 -0500
X-Virus-Checked: Checked by ClamAV on apache.org

"jm" <jmuguruza@gmail.com> wrote:
> You were right. As I have many indexes I keep a cache of the
> IndexWriters, and in some specific case (that cannot happen in my dev
> env) I was closing them without removing them from the cache. Somehow
> it was working before 2.1, and upgrading made the error clear.

OK, glad you got to the bottom of it!

But, I don't think this error (NPE) is particularly clear (though it
is better than pre-2.1 which, I think, would in fact let the writer
run without holding the write lock).  I will open a Jira issue for
this.  I think we should explicitly detect when the IndexWriter is
used after being closed.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 26 19:59:13 2007
Return-Path: <java-user-return-26422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87702 invoked from network); 26 Feb 2007 19:59:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2007 19:59:12 -0000
Received: (qmail 14944 invoked by uid 500); 26 Feb 2007 19:59:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14908 invoked by uid 500); 26 Feb 2007 19:59:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14897 invoked by uid 99); 26 Feb 2007 19:59:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 11:59:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [82.216.111.39] (HELO smtp3.tech.numericable.fr) (82.216.111.39)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 11:59:00 -0800
Received: from [192.168.1.101] (ip-3.net-82-216-252.rev.numericable.fr [82.216.252.3])
	by smtp3.tech.numericable.fr (Postfix) with ESMTP id 1DE4C3E420
	for <java-user@lucene.apache.org>; Mon, 26 Feb 2007 20:58:37 +0100 (CET)
From: Nicolas =?iso-8859-1?q?Lalev=E9e?= <nicolas.lalevee@anyware-tech.com>
To: java-user@lucene.apache.org
Subject: Re: how to define a pool for Searcher?
Date: Mon, 26 Feb 2007 20:58:07 +0100
User-Agent: KMail/1.9.5
References: <34b8543c0702220009m72f9e9c7pf8f9764953be6a48@mail.gmail.com> <200702261945.46694.nicolas.lalevee@anyware-tech.com> <6e3ae6310702261112x54c14d55yeba29b5e7eb72106@mail.gmail.com>
In-Reply-To: <6e3ae6310702261112x54c14d55yeba29b5e7eb72106@mail.gmail.com>
Organization: Anyware Technologies
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200702262058.07160.nicolas.lalevee@anyware-tech.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Le lundi 26 f=E9vrier 2007 20:12, Chris Lu a =E9crit=A0:
> Hi, Nicolas,
>
> Just a note: Having one searcher is far enough for ordinary usage,
> even some production sites. But I do see some throughput gain through
> increasing the number of searchers.
>
> Those searchers should either be opened on an static index, or be
> synchronized to open/close cleanly, to avoid any exceptions.

ok, I have found what I missed. I looked to the code in SegmentReader, and=
=20
there are some synchronized functions. So the performance improve you are=20
talking about. Too bad because it only comes from the possibility to delete=
=20
document, which seems useless for the read-only-index use case.

Nicolas

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 26 20:21:23 2007
Return-Path: <java-user-return-26423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6515 invoked from network); 26 Feb 2007 20:21:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2007 20:21:14 -0000
Received: (qmail 84021 invoked by uid 500); 26 Feb 2007 20:21:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83991 invoked by uid 500); 26 Feb 2007 20:21:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83979 invoked by uid 99); 26 Feb 2007 20:21:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 12:21:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 12:21:03 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 1093C5B76C; Mon, 26 Feb 2007 12:20:43 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 0A3E97F403
	for <java-user@lucene.apache.org>; Mon, 26 Feb 2007 12:20:43 -0800 (PST)
Date: Mon, 26 Feb 2007 12:20:43 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: filtering by first letter
In-Reply-To: <45E248A9.1030107@tkz.net>
Message-ID: <Pine.LNX.4.58.0702261217250.8314@hal.rescomp.berkeley.edu>
References: <45DF4DD0.7010105@tkz.net> <359a92830702231339i605ab4e7i8a70658c1e9eda2f@mail.gmail.com>
 <45E248A9.1030107@tkz.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: OK I'm not sure I understand your answer.  I thought TermEnum gave you
: all the terms in an index, not from a search result.
:
: Let me clarify what I need.  I'm looking for a way to find out all the
: values of the FIELD_FILTER_LETTER field for any given search.
:
: INDEX TIME:   (done for each indexed person, stores the first letter of
: their name as a field)

what you are describing is basically a faceted search problem (see list
archive for copious discussion)

step #1: get a list of all possible "first letters" (that's where a
TermEnum comes into play ... iterate over all the terms for that ield)

step #2: for each first letter, get the BitSet of documents corrisponding
to that letter with a filter (this can be cached for hte life of your
IndexReader and interest it with a BitSet from a Filter made from your
users search critera

...there are other approaches to doing faceted searching that involve
iterating over the results to get the list of possible values -- but i'm
guessing the letters a name might start with is typically going ot be
smaller then the set of results from a search ... so this approach is
probably a safe bet.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 26 20:56:41 2007
Return-Path: <java-user-return-26424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22675 invoked from network); 26 Feb 2007 20:56:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2007 20:56:40 -0000
Received: (qmail 50557 invoked by uid 500); 26 Feb 2007 20:56:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50524 invoked by uid 500); 26 Feb 2007 20:56:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50513 invoked by uid 99); 26 Feb 2007 20:56:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 12:56:41 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.152 as permitted sender)
Received: from [195.212.29.152] (HELO mtagate3.de.ibm.com) (195.212.29.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 12:56:28 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate3.de.ibm.com (8.13.8/8.13.8) with ESMTP id l1QKu5Cw122730
	for <java-user@lucene.apache.org>; Mon, 26 Feb 2007 20:56:05 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.2) with ESMTP id l1QKu50k1851422
	for <java-user@lucene.apache.org>; Mon, 26 Feb 2007 21:56:05 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l1QKu5k7009292
	for <java-user@lucene.apache.org>; Mon, 26 Feb 2007 21:56:05 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l1QKu5lQ009286
	for <java-user@lucene.apache.org>; Mon, 26 Feb 2007 21:56:05 +0100
In-Reply-To: <45E20269.9030101@teamware.com>
Subject: Re: QueryParser oddity with PrefixQuery
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF49C44BBA.961E99DB-ON8825728E.006B18C0-8825728E.007295C1@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Mon, 26 Feb 2007 12:51:34 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 26/02/2007 22:56:04
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

I agree, might be a redundant check now. This test was added when the query
parser was enhanced to optionally allow leading wild card (revision 468291
),
but this case calls getWildCardQuery(), not getPrefixQuery().

Still, the check seems harmless - sort of defensive - protecting against
the
case that a bug in query parser would identify such a query as prefix
rather
than wildcard (although this is not very likely.)

Doron

Antony Bowesman wrote:

> In certain cases, I use a modified QueryParser which does not allow
"field:"
> syntax.  While testing variants of Prefix and Wildcard Query, I
cameacross an
> oddity with getPrefixQuery().  The standard getPrefixQuery() (2.1) is
given
> termStr without the trailing *, so the check
>
> if (!allowLeadingWildcard && termStr.startsWith("*"))
>    throw new ParseException("'*' not allowed as first character in
> PrefixQuery");
>
> only triggers if you parse the String "**", in which case the PrefixQuery
is
> then created with Term(field, "*"); whereas if you parse "*",
> getWildcardQuery()
> is called.
>
> So it's not obvious that the test "termStr.startsWith("*"))" can
> ever occur, so
> this code seems redundant.
>
> After Doron's latest patch
http://issues.apache.org/jira/browse/LUCENE-813
> , if
> you parse "**" it now calls getWildcardQuery().
>
> Antony


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 26 21:37:33 2007
Return-Path: <java-user-return-26425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40706 invoked from network); 26 Feb 2007 21:36:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2007 21:36:31 -0000
Received: (qmail 17322 invoked by uid 500); 26 Feb 2007 21:36:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17270 invoked by uid 500); 26 Feb 2007 21:36:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17246 invoked by uid 99); 26 Feb 2007 21:36:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 13:36:24 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 13:36:12 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 0E8725B770; Mon, 26 Feb 2007 13:35:52 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 08A1F7F403
	for <java-user@lucene.apache.org>; Mon, 26 Feb 2007 13:35:52 -0800 (PST)
Date: Mon, 26 Feb 2007 13:35:52 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Date Searches
In-Reply-To: <BC1CFC544422CB4A934908E126A4742705F49E8C@SGBLOW2101.wsatkins.com>
Message-ID: <Pine.LNX.4.58.0702261330340.10865@hal.rescomp.berkeley.edu>
References: <BC1CFC544422CB4A934908E126A4742705F49E8C@SGBLOW2101.wsatkins.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Date: Mon, 26 Feb 2007 15:17:15 -0000

: Anybody?

: > Sent:	26 February 2007 13:36


the java-user list is good -- but amazingly enough it's not unheard of for
two *whole* hours to go by without getting a direct response to a
question -- particularly when the last question/answer posted to the list
prior to your question was directly on topic: searching by dates, and
how to format the dates so that they would be in lexigraphic order...

http://www.nabble.com/how-to-query-range-of-Date-by-given-date-string--tf3291956.html

...patience is a must when asking for help from others.

in general, if you'd searched the list archive before posting, you
probably would have had your answer immediately.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 26 22:08:57 2007
Return-Path: <java-user-return-26426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54378 invoked from network); 26 Feb 2007 22:08:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2007 22:08:56 -0000
Received: (qmail 62486 invoked by uid 500); 26 Feb 2007 22:08:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62455 invoked by uid 500); 26 Feb 2007 22:08:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62444 invoked by uid 99); 26 Feb 2007 22:08:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 14:08:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 14:08:47 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 5CCA15B76C; Mon, 26 Feb 2007 14:08:27 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 55DC37F403;
	Mon, 26 Feb 2007 14:08:27 -0800 (PST)
Date: Mon, 26 Feb 2007 14:08:27 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>, paul_t100@fastmail.fm
Cc: Erick Erickson <erickerickson@gmail.com>
Subject: Re: Can I use Lucene to retrieve a list of duplicates
In-Reply-To: <45E309E7.7020102@fastmail.fm>
Message-ID: <Pine.LNX.4.58.0702261404500.16689@hal.rescomp.berkeley.edu>
References: <45DF055C.9050705@fastmail.fm>  <359a92830702230722w19c441f5oe3d6fdd361ef23c@mail.gmail.com>
  <45DF1423.3070707@fastmail.fm>  <Pine.LNX.4.58.0702231446220.6828@hal.rescomp.berkeley.edu>
  <45E2B7CC.9070704@fastmail.fm> <359a92830702260510m1198d59q69f9b61d0fa6c0e1@mail.gmail.com>
 <45E309E7.7020102@fastmail.fm>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


what you are doing below is iterating over every term in your index, and
for each Term, recording if that term appears in more then one doc (using
IndexReader.document which is a really bad idea ingeneral in a loop like
this)

your orriginal problem description was " 'Find Duplicate records for
Column X' then I would filter the table to show only records where there
is more than one with the same value i.e duplicate for that column." ...

if we equate columns with fields, then what you are doing is certainly
overkill -- you can request a TermEnum that starts at a particular field
Or use the full TermEnum and "skipTo" the first possible temr in your
field) and then stop iterating when you get to a new field -- you can aso
get a lot better performance when compiling hte list of ROW_NUMBER field
values if you use a FieldCache instead of fetching each document.


: Date: Mon, 26 Feb 2007 16:25:11 +0000
: From: Paul Taylor <paul_t100@fastmail.fm>
: Reply-To: java-user@lucene.apache.org, paul_t100@fastmail.fm
: To: Erick Erickson <erickerickson@gmail.com>
: Cc: java-user@lucene.apache.org
: Subject: Re: Can I use Lucene to retrieve a list of duplicates
:
: Hi
:
: I  got it working before I saw your latest mail, the only problem is
: that it doesn't look very efficient. This is my duplicate method, the
: problem is that I have to enumerate through *every* term. This was worse
: before because I was only interested
: in terms that matched a particular field (column) but had enumerate
: through every term whatever field it was part of, so I recreated my
: index so that each document only contained a row number field, and a
: second field for the value of the column, however this means I am going
: to end up with a number of different indexes each solving a particular
: problem.
:
: paul
:
:  public List<Integer> getDuplicates()
:     {
:         List<Integer> matches = new ArrayList<Integer>();
:         try
:         {
:             IndexReader ir = IndexReader.open(directory);
:             TermEnum terms = ir.terms();
:             while (terms.next())
:             {
:                 if (terms.docFreq() > 1)
:                 {
:                     TermDocs termDocs = ir.termDocs(terms.term());
:                     while (termDocs.next())
:                     {
:                         Document d = ir.document(termDocs.doc());
:                         matches.add(new
: Integer(d.getField(ROW_NUMBER).stringValue()));
:                     }
:                 }
:             }
:
:         }
:         catch (IOException ioe)
:         {
:             ioe.printStackTrace();
:         }
:         return matches;
:     }
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 26 23:17:14 2007
Return-Path: <java-user-return-26427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75099 invoked from network); 26 Feb 2007 23:17:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2007 23:17:13 -0000
Received: (qmail 65361 invoked by uid 500); 26 Feb 2007 23:17:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65326 invoked by uid 500); 26 Feb 2007 23:17:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65306 invoked by uid 99); 26 Feb 2007 23:17:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 15:17:15 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [132.230.150.3] (HELO atlas.informatik.uni-freiburg.de) (132.230.150.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 15:17:02 -0800
Received: from e180251101.adsl.alicedsl.de ([85.180.251.101])
	by atlas.informatik.uni-freiburg.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.66)
	(envelope-from <robisbob@web.de>)
	id 1HLp5E-00000H-ER
	for java-user@lucene.apache.org; Tue, 27 Feb 2007 00:16:40 +0100
Message-ID: <45E36A58.6020302@web.de>
Date: Tue, 27 Feb 2007 00:16:40 +0100
From: robisbob <robisbob@web.de>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Indexing-Error: Cannot delete <File>
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

i hope someone can help me. If I index a file directory I get the error 
you see here.
>  caught a class java.io.IOException
>  with message: Cannot delete _57e.tis
> Exception in thread "main" java.io.IOException: Cannot delete _57e.tis
>         at 
> org.apache.lucene.store.FSDirectory.deleteFile(FSDirectory.java:198)
>         at 
> org.apache.lucene.index.SegmentMerger.createCompoundFile(SegmentMerger.java:157)
>         at 
> org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:100)
>         at 
> org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:487)
>         at 
> org.apache.lucene.index.IndexWriter.maybeMergeSegments(IndexWriter.java:458)
>         at 
> org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:310)

So Lucene tries to delete this file, which exists and can be deleted 
manually. But somehow Lucene can't.
The weird thing is, if I index the same directory (same content, not 
same network) on my local machine, there is no such error.
I have searched the Internet for these kind of error and found only 
advises about closing the FileWriter, which I do.
I use lucene-1.5-rc1.

Thanx
Rob




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 26 23:57:20 2007
Return-Path: <java-user-return-26428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86185 invoked from network); 26 Feb 2007 23:57:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2007 23:57:20 -0000
Received: (qmail 8814 invoked by uid 500); 26 Feb 2007 23:57:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8452 invoked by uid 500); 26 Feb 2007 23:57:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8441 invoked by uid 99); 26 Feb 2007 23:57:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 15:57:22 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.29] (HELO out5.smtp.messagingengine.com) (66.111.4.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 15:57:11 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id 4B4941E11D9
	for <java-user@lucene.apache.org>; Mon, 26 Feb 2007 18:56:50 -0500 (EST)
Received: from web4.messagingengine.com ([10.202.2.213])
  by out1.internal (MEProxy); Mon, 26 Feb 2007 18:56:50 -0500
Received: by web4.messagingengine.com (Postfix, from userid 99)
	id 288B1161473; Mon, 26 Feb 2007 18:56:50 -0500 (EST)
Message-Id: <1172534210.8331.1176655421@webmail.messagingengine.com>
X-Sasl-Enc: ddc4EwQbNkEwGnlIcCZPv6sh6Joe3EC+AKbOc/3nq7O8 1172534210
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <45E36A58.6020302@web.de>
Subject: Re: Indexing-Error: Cannot delete <File>
In-Reply-To: <45E36A58.6020302@web.de>
Date: Mon, 26 Feb 2007 18:56:50 -0500
X-Virus-Checked: Checked by ClamAV on apache.org

"robisbob" <robisbob@web.de> wrote:

> i hope someone can help me. If I index a file directory I get the error 
> you see here.
> >  caught a class java.io.IOException
> >  with message: Cannot delete _57e.tis
> > Exception in thread "main" java.io.IOException: Cannot delete _57e.tis
> >         at 
> > org.apache.lucene.store.FSDirectory.deleteFile(FSDirectory.java:198)
> >         at 
> > org.apache.lucene.index.SegmentMerger.createCompoundFile(SegmentMerger.java:157)
> >         at 
> > org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:100)
> >         at 
> > org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:487)
> >         at 
> > org.apache.lucene.index.IndexWriter.maybeMergeSegments(IndexWriter.java:458)
> >         at 
> > org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:310)
> 
> So Lucene tries to delete this file, which exists and can be deleted 
> manually. But somehow Lucene can't.
> The weird thing is, if I index the same directory (same content, not 
> same network) on my local machine, there is no such error.
> I have searched the Internet for these kind of error and found only 
> advises about closing the FileWriter, which I do.
> I use lucene-1.5-rc1.

There are several sneaky IO related issues in Lucene, that have now been
fixed
in Lucene 2.1, that could explain this.  Is it possible to test Lucene
2.1 to
see if this issue is still happening?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 01:14:31 2007
Return-Path: <java-user-return-26429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5696 invoked from network); 27 Feb 2007 01:14:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 01:14:31 -0000
Received: (qmail 76034 invoked by uid 500); 27 Feb 2007 01:14:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76013 invoked by uid 500); 27 Feb 2007 01:14:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76002 invoked by uid 99); 27 Feb 2007 01:14:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 17:14:32 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [198.144.201.51] (HELO esseff.org) (198.144.201.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 17:14:21 -0800
Received: from localhost (localhost [127.0.0.1])
	by esseff.org (Postfix) with ESMTP id CEBC95EC7BA
	for <java-user@lucene.apache.org>; Mon, 26 Feb 2007 17:15:57 -0800 (PST)
X-Quarantine-ID: <T2JNAGXMDiWR>
X-Virus-Scanned: amavisd-new at esseff.org
Received: from esseff.org ([127.0.0.1])
	by localhost (esseff.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id T2JNAGXMDiWR for <java-user@lucene.apache.org>;
	Mon, 26 Feb 2007 17:15:53 -0800 (PST)
Received: from professorville.windows.esseff.org (professorville.windows.esseff.org [10.0.1.16])
	by esseff.org (Postfix) with ESMTP id C7C385DE88D
	for <java-user@lucene.apache.org>; Mon, 26 Feb 2007 17:15:52 -0800 (PST)
Subject: RE: Lucene 1.4.3 : IndexWriter.addDocument(doc) fails when run on  OS requiring permissions
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Content-class: urn:content-classes:message
Date: Mon, 26 Feb 2007 17:13:53 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Message-ID: <392521EA2692A2418DF48C331E61E32506ABF4@professorville.windows.esseff.org>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene 1.4.3 : IndexWriter.addDocument(doc) fails when run on  OS requiring permissions
Thread-Index: AcdXBe6jReXAcUi2TGS4EHVfEYueIgDBh6Iw
References: <42e5a736d78.00000994wanster@inbox.com> <4D9EBBC3A70.00000A07wanster@inbox.com>
From: "Steven Parkes" <steven_parkes@esseff.org>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

The easiest way to pin this down is to get the backtrace from the
exception, e.g., e.printStackTrace(). That would tell a lot.

That said, prior to 2.1, lucene would put lock files outside the index
directory. I don't know if that's what you're hitting, though, because I
think the writer should have taken the lock when you created it, not
when you tried to do the addDocument.

-----Original Message-----
From: Ridzwan Aminuddin [mailto:wanster@inbox.com]=20
Sent: Thursday, February 22, 2007 8:48 PM
To: java-user@lucene.apache.org
Subject: Re: Lucene 1.4.3 : IndexWriter.addDocument(doc) fails when run
on OS requiring permissions

Hi Guys.

Ok thanks for the replies. You guys are right that it is to do with the
system and not with Lucene. However, what i'm trying to do is to
pinpoint and narrow down to the exact place that causes the system to
fail. and then from there try to remedy the problem.=20

The odd thing is that the program is still able to write other files to
the subdirectories that the program itself creates. It is only when it
goes through this indexing process that this program halts due to the
insufficient permissions. But the directory i provided to store the
target index files has been set to read/write/execute (drwxrwxrwx) all
permissions.=20

In any case, i suspect that it is due to this portion of code.


:   FieldsWriter(Directory d, String segment, FieldInfos fn)
:        throws IOException {
:     fieldInfos =3D fn;
:     fieldsStream =3D d.createFile(segment + ".fdt");
:     indexStream =3D d.createFile(segment + ".fdx");
:   }


Are these two files created in the Directory d?
And is this Directory d the ramDirectory that i have provided when i
called the method: dw =3D new DocumentWriter(ramDirectory, analyzer,
similarity,
 maxFieldLength);
in IndexWriter.Java?

If yes. then where exactly does this ramDirectory point to? cos as far
as i can see from the code, ramDirectory is initialised as=20

RamDirectory ramDirectory =3D new RamDirectory()

I think the program fails when it tries to create these two files
somehow.

Please help to enlighten me?... Maybe knowing the exact path to this
ramDirectory would help me in finding out which folder i need to provide
access to....

Also, does Lucene ever write any temp data to /tmp ?



> -----Original Message-----
> From: hossman_lucene@fucit.org
> Sent: Thu, 22 Feb 2007 11:43:38 -0800 (PST)
> To: java-user@lucene.apache.org
> Subject: Re: Lucene 1.4.3 : IndexWriter.addDocument(doc) fails when
run
> on OS requiring permissions
>=20
>=20
> This sounds like it has absolutely nothing to do with Lucene, and
> everything to do with good security permissions -- your Zope/python
front
> end is most likely running as a user thta does not have write
permissions
> to the directory where your index lives.  you'll need to remedy that.
>=20
> you can write a simple java app that doens't use lucene at all -- just
> creates a file and writes  "hellow world" to it -- and you will most
> likely see this exact same behavior, dealing with teh file permissions
is
> totally out side the scope of Lucene.
>=20
>=20
> : Date: Thu, 22 Feb 2007 00:20:12 -0800
> : From: Ridzwan Aminuddin <wanster@inbox.com>
> : Reply-To: java-user@lucene.apache.org
> : To: java-user@lucene.apache.org
> : Subject: Lucene 1.4.3 : IndexWriter.addDocument(doc) fails when run
on
> OS
> :      requiring permissions
> :
> : Hi!
> :
> : I'm writing a java program that uses Lucene 1.4.3 to index and
create a
> vector file of words found in Text Files. The purpose is for text
mining.
> :
> : I created a Java .Jar file from my program and my python script
calls
> the Java Jar executable. This is all triggered by my DTML code.
> :
> : I'm running on Linux and i have no problem executing the script when
i
> execute via command line. But once i trigger the script via the web
> (using Zope/Plone external methods ) it doesn't work anymore. This is
> because of the strict permissions that LInux has over its files and
> folders.
> :
> : I've narrowed down the problem to the IndexWriter.addDocument(doc)
> method in Lucene 1.4.3 and as you can see below my code fails
> specifically when a new FieldsWriter object is being initialised.
> :
> : I strongly suspect that it fails at this point but have no idea how
to
> overcome this problem. I know that it has to do with the permissions
> because th eprogram works like a miracle when it is called via command
> line by the super user (sudo).
> :
> : Could anyone give me any pointers or ideas of how i could overcome
> this.
> :
> : The final statement which is printed before the program hangs is:
> : "Entering DocumentWriter.AddDocument.... (4)"
> :
> : Here is the portions of my relevant code :
> :
> :
> :
> :
>
//----------------------------------------------------------------------
---------------------
> : //			Indexer.Java // This is my own method and class
> :
>
//----------------------------------------------------------------------
---------------------
> :         // continued from some other code......
> :
> : 	Document doc =3D new Document();
> :
> :         doc.add(Field.Text("articleTitle", articleTitle, true));
> :         doc.add(Field.Text("articleURL", articleURL, true));
> :         doc.add(Field.Text("articleSummary", articleSummary, true));
> :         doc.add(Field.Text("articleDate", articleDate, true));
> :         doc.add(Field.Text("articleSource", articleSource, true));
> :         doc.add(Field.Text("articleBody", articleBody, true));
> :         doc.add(Field.Keyword("filename", f.getCanonicalPath()));
> :
> : 	try
> :                 {
> :                     writer.addDocument(doc); // indexing fails
because
> this statement cannot be executed
> :
> :                 }
> :
> :                 catch (Exception e)
> :
> :                 {
> :                     System.err.println ("Cannot add doc exception
> thrown!");
> :
> :                 }
> :
> :
> :
>
//----------------------------------------------------------------------
---------------------
> : //			IndexWriter.Java // Lucene 1.4.3
> :
>
//----------------------------------------------------------------------
---------------------
> :
> :
> : public void addDocument(Document doc) throws IOException {
> :
> :       addDocument(doc, analyzer);
> :   }
> :
> :
> : public void addDocument(Document doc, Analyzer analyzer) throws
> IOException {
> :
> :     DocumentWriter dw;
> :
> :     dw =3D new DocumentWriter(ramDirectory, analyzer, similarity,
> maxFieldLength);
> :
> :     String segmentName =3D newSegmentName();
> :     dw.addDocument(segmentName, doc);      		// The program
fails to
> execute this line onwards!
> :
> :     synchronized (this) {
> :
> :       segmentInfos.addElement(new SegmentInfo(segmentName, 1,
> ramDirectory));
> :       maybeMergeSegments();
> :     }
> :
> :   }
> :
> :
> :
>
//----------------------------------------------------------------------
---------------------
> : //			DocumentWriter.Java // Lucene 1.4.3
> :
>
//----------------------------------------------------------------------
---------------------
> :
> :
> :
> : final void addDocument(String segment, Document doc)
> :             throws IOException {
> :
> :       System.out.println("Entering DocumentWriter.AddDocument....
> (1)");
> :
> :     // write field names
> :     fieldInfos =3D new FieldInfos();
> :       System.out.println("Entering DocumentWriter.AddDocument....
> (2)");
> :
> :     fieldInfos.add(doc);
> :           System.out.println("Entering
DocumentWriter.AddDocument....
> (3)");
> :
> :     fieldInfos.write(directory, segment + ".fnm");
> :
> :           System.out.println("Entering
DocumentWriter.AddDocument....
> (4)");  // The program fails after this
> :
> :     // write field values
> :     FieldsWriter fieldsWriter =3D
> :             new FieldsWriter(directory, segment, fieldInfos);
//
> Program fails to execute this statement
> :
> :           System.out.println("Entering
DocumentWriter.AddDocument....
> (5)");
> :
> :     try {
> :       fieldsWriter.addDocument(doc);
> :
> :       System.out.println("Entering DocumentWriter.AddDocument....
> (6)");
> :
> :     } finally {
> :       fieldsWriter.close();
> :             System.out.println("Entering
DocumentWriter.AddDocument....
> (7)");
> :
> :     }
> :
> :           System.out.println("Entering
DocumentWriter.AddDocument....
> (8)");
> :
> :     // invert doc into postingTable
> :     postingTable.clear();			  // clear postingTable
> :     fieldLengths =3D new int[fieldInfos.size()];    // init
fieldLengths
> :     fieldPositions =3D new int[fieldInfos.size()];  // init
> fieldPositions
> :
> :           System.out.println("Entering
DocumentWriter.AddDocument....
> (9)");
> :
> :     fieldBoosts =3D new float[fieldInfos.size()];	  // init
fieldBoosts
> :     Arrays.fill(fieldBoosts, doc.getBoost());
> :
> :           System.out.println("Entering
DocumentWriter.AddDocument....
> (10)");
> :
> :     invertDocument(doc);
> :
> :           System.out.println("Entering
DocumentWriter.AddDocument....
> (11)");
> :
> :     // sort postingTable into an array
> :     Posting[] postings =3D sortPostingTable();
> :
> :           System.out.println("Entering
DocumentWriter.AddDocument....
> (12)");
> :
> :     /*
> :     for (int i =3D 0; i < postings.length; i++) {
> :       Posting posting =3D postings[i];
> :       System.out.print(posting.term);
> :       System.out.print(" freq=3D" + posting.freq);
> :       System.out.print(" pos=3D");
> :       System.out.print(posting.positions[0]);
> :       for (int j =3D 1; j < posting.freq; j++)
> : 	System.out.print("," + posting.positions[j]);
> :       System.out.println("");
> :     }
> :     */
> :
> :     // write postings
> :     writePostings(postings, segment);
> :
> :           System.out.println("Entering
DocumentWriter.AddDocument....
> (13)");
> :
> :     // write norms of indexed fields
> :     writeNorms(doc, segment);
> :
> :           System.out.println("Entering
DocumentWriter.AddDocument....
> (14)");
> :
> :   }
> :
> :
>
//----------------------------------------------------------------------
---------------------
> : //			FieldsWriter.Java // Lucene 1.4.3
> :
>
//----------------------------------------------------------------------
---------------------
> :
> :
> :   FieldsWriter(Directory d, String segment, FieldInfos fn)
> :        throws IOException {
> :     fieldInfos =3D fn;
> :     fieldsStream =3D d.createFile(segment + ".fdt");
> :     indexStream =3D d.createFile(segment + ".fdx");
> :   }
> :
> :
>
//----------------------------------------------------------------------
---------------------
> : //			FSDirectory.Java // Lucene 1.4.3
> :
>
//----------------------------------------------------------------------
---------------------
> :
> :
> : public final OutputStream createFile(String name) throws IOException
{
> :
> :       System.out.println("Entering FSDirectory.createFile....
returning
> an OutputStream");
> :
> :     return new FSOutputStream(new File(directory, name));
> :   }
> :
> :
---------------------------------------------------------------------
> : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : For additional commands, e-mail: java-user-help@lucene.apache.org
> :
>=20
>=20
>=20
> -Hoss
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 02:58:37 2007
Return-Path: <java-user-return-26430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37394 invoked from network); 27 Feb 2007 02:58:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 02:58:36 -0000
Received: (qmail 85047 invoked by uid 500); 27 Feb 2007 02:58:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85014 invoked by uid 500); 27 Feb 2007 02:58:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85003 invoked by uid 99); 27 Feb 2007 02:58:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 18:58:38 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 18:58:27 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id l1R2vx7R025275
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 04:57:59 +0200
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz with ESMTP
	 id m2r4l7i0; 27 Feb 2007 04:57:00 +0200
Message-ID: <45E39E25.2090302@teamware.com>
Date: Tue, 27 Feb 2007 13:57:41 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: ClassCastException/DocumentWriter and NullPointerException/RAMInputStream
References: <45DCC1AD.5090504@teamware.com>
In-Reply-To: <45DCC1AD.5090504@teamware.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Tue, 27 Feb 2007 04:57:59 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Looks like this was caused by a corrupt Java installation.  I was half expecting 
to see a comment in the code that said

// Impossible event occurred

Antony


Antony Bowesman wrote:
> When adding documents to an index has anyone seen either
> 
> java.lang.ClassCastException: org.apache.lucene.analysis.Token cannot be 
> cast to org.apache.lucene.index.Posting
>   at 
> org.apache.lucene.index.DocumentWriter.sortPostingTable(DocumentWriter.java:238) 
> 
>   at 
> org.apache.lucene.index.DocumentWriter.addDocument(DocumentWriter.java:96)
>   at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:476)
> 
> or
> 
> java.lang.NullPointerException
>   at org.apache.lucene.store.RAMInputStream.<init>(RAMInputStream.java:32)
>   at org.apache.lucene.store.RAMDirectory.openInput(RAMDirectory.java:171)
>   at 
> org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:155)
>   at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:129)
>   at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:110)
>   at 
> org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:702)
>   at 
> org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:686)
>   at 
> org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:656)
>   at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:402)
> 
> This data has been indexed many times, but I've never seen this before.  
> It's Java 6 and Lucene 2.0.
> 
> Thanks
> Antony
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 06:22:14 2007
Return-Path: <java-user-return-26431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81080 invoked from network); 27 Feb 2007 06:22:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 06:22:13 -0000
Received: (qmail 48094 invoked by uid 500); 27 Feb 2007 06:22:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48054 invoked by uid 500); 27 Feb 2007 06:22:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48043 invoked by uid 99); 27 Feb 2007 06:22:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 22:22:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [132.230.150.3] (HELO atlas.informatik.uni-freiburg.de) (132.230.150.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 22:22:02 -0800
Received: from e180238036.adsl.alicedsl.de ([85.180.238.36])
	by atlas.informatik.uni-freiburg.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.66)
	(envelope-from <robisbob@web.de>)
	id 1HLviX-000340-3V
	for java-user@lucene.apache.org; Tue, 27 Feb 2007 07:21:41 +0100
Message-ID: <45E3CDE7.2030609@web.de>
Date: Tue, 27 Feb 2007 07:21:27 +0100
From: robisbob <robisbob@web.de>
Reply-To:  java-user@lucene.apache.org
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Indexing-Error: Cannot delete <File>
References: <45E36A58.6020302@web.de> <1172534210.8331.1176655421@webmail.messagingengine.com>
In-Reply-To: <1172534210.8331.1176655421@webmail.messagingengine.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanx for your answer.
I will use the latest version to check this. Unfortunately I have only 
access to the computer, where the application will be run, once a week. 
And I can't reproduce the error at my local machine or any other 
computer I have access to.
So If someone has (better had) the same error, now it's the time to go 
public !!!

Rob
>
>   
>> i hope someone can help me. If I index a file directory I get the error 
>> you see here.
>>     
>>>  caught a class java.io.IOException
>>>  with message: Cannot delete _57e.tis
>>> Exception in thread "main" java.io.IOException: Cannot delete _57e.tis
>>>         at 
>>> org.apache.lucene.store.FSDirectory.deleteFile(FSDirectory.java:198)
>>>         at 
>>> org.apache.lucene.index.SegmentMerger.createCompoundFile(SegmentMerger.java:157)
>>>         at 
>>> org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:100)
>>>         at 
>>> org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:487)
>>>         at 
>>> org.apache.lucene.index.IndexWriter.maybeMergeSegments(IndexWriter.java:458)
>>>         at 
>>> org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:310)
>>>       
>> So Lucene tries to delete this file, which exists and can be deleted 
>> manually. But somehow Lucene can't.
>> The weird thing is, if I index the same directory (same content, not 
>> same network) on my local machine, there is no such error.
>> I have searched the Internet for these kind of error and found only 
>> advises about closing the FileWriter, which I do.
>> I use lucene-1.5-rc1.
>>     
>
> There are several sneaky IO related issues in Lucene, that have now been
> fixed
> in Lucene 2.1, that could explain this.  Is it possible to test Lucene
> 2.1 to
> see if this issue is still happening?
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 07:10:04 2007
Return-Path: <java-user-return-26432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90899 invoked from network); 27 Feb 2007 07:10:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 07:10:03 -0000
Received: (qmail 79998 invoked by uid 500); 27 Feb 2007 07:10:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79683 invoked by uid 500); 27 Feb 2007 07:10:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79672 invoked by uid 99); 27 Feb 2007 07:10:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 23:10:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.155 as permitted sender)
Received: from [195.212.29.155] (HELO mtagate6.de.ibm.com) (195.212.29.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 23:09:51 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate6.de.ibm.com (8.13.8/8.13.8) with ESMTP id l1R79Sbq233174
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 07:09:28 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.2) with ESMTP id l1R79R3P1941620
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 08:09:27 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l1R79RrS019682
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 08:09:27 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l1R79RsF019679
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 08:09:27 +0100
In-Reply-To: <362883D0-FC7E-4D90-A1AF-94EE70686639@gmail.com>
Subject: Re: Benchmarker
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFC5E8B72A.204074C1-ON8825728F.0026B2ED-8825728F.0026DA12@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Mon, 26 Feb 2007 23:04:21 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 27/02/2007 09:09:26
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Karl,

Seems I missed this email...
What is the status of this, have you solved it?

Doron

karl wettin <karl.wettin@gmail.com> wrote on 13/02/2007 03:24:44:

>
> 13 feb 2007 kl. 04.33 skrev Doron Cohen:
>
> >> Running (once) "ant jar" from the trunk directory should do it.
> >
> > Did it solve the problem?
>
> Indeed.
>
> Do you have way to much time to spare? I patched up the code to run
> on the index index in LUCENE-550. Unfortunatly it seems as I messed
> something up or missed something I have to do prior to running. ant
> run-standard pass in about 4 seconds. I get lots of output with info
> that clearly tells me that the Reuters set was loaded, but 4 seconds?
> Is my new laptop really that fast?
>
> What I did was very simple. I replaced the Directory in TestData (and
> that second similiar class that had a reference too) with my Index
> interface that contains writer and reader factory methods. Then some
> minor things like going from IndexWriter to IndexWriterInterface in
> method parameters.
>
> Would you mind taking a look at my patch of the benchmarker to see if
> it actually works as it should or not? Let me know and I'll post a
> new trunk.diff.bz2 to 550 containing the changes.
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 07:49:42 2007
Return-Path: <java-user-return-26433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 320 invoked from network); 27 Feb 2007 07:49:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 07:49:41 -0000
Received: (qmail 13524 invoked by uid 500); 27 Feb 2007 07:49:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13491 invoked by uid 500); 27 Feb 2007 07:49:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13480 invoked by uid 99); 27 Feb 2007 07:49:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 23:49:42 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.153 as permitted sender)
Received: from [195.212.29.153] (HELO mtagate4.de.ibm.com) (195.212.29.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Feb 2007 23:49:29 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate4.de.ibm.com (8.13.8/8.13.8) with ESMTP id l1R7n5uQ092944
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 07:49:05 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.2) with ESMTP id l1R7n5gt1904720
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 08:49:05 +0100
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l1R7n5hb002652
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 08:49:05 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l1R7n5aj002648
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 08:49:05 +0100
In-Reply-To: <359a92830702250705g3bef1f46rf8b20a957f772193@mail.gmail.com>
Subject: Re: updating index
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF82A22A82.39E67B2F-ON8825728F.002A733C-8825728F.002AAD88@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Mon, 26 Feb 2007 23:46:09 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 27/02/2007 09:49:05
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

"Erick Erickson" <erickerickson@gmail.com> wrote on 25/02/2007 07:05:21:

> Yes, I'm pretty sure you have to index the field (UN_TOKENIZED) to be
able
> to fetch it with TermDocs/TermEnum! The loop I posted works like this....

Once indexing the database_id field this way, also the newly added
API IndexWriter.updateDocument() may be useful.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 09:07:32 2007
Return-Path: <java-user-return-26434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24413 invoked from network); 27 Feb 2007 09:07:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 09:07:31 -0000
Received: (qmail 79136 invoked by uid 500); 27 Feb 2007 09:07:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79101 invoked by uid 500); 27 Feb 2007 09:07:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79090 invoked by uid 99); 27 Feb 2007 09:07:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 01:07:32 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 01:07:19 -0800
Received: by nf-out-0910.google.com with SMTP id i2so101552nfe
        for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 01:06:58 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=dt7kFjWIry+Xry2HGQX+TIBT2F6kEJT+Q6I8ARvS9ybAg9HPHfRgRTeh7Ob7fopLkEPh+KzKCPXfmKN4uzb2kyFPGayd+v8oyjq9I1z3bQcp6ATgfJ1CFmok9cDNit3MK36z2XnioZC4EJw5dOthXe1lHFjR5uxLj5N7mJmoPSc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=rn8iDijLC+qMArLGXm4SGgSM7ZHtrq9vdjfGrFnxeoyd7PGinLqtFnkctMrsAbcRcNqCZXSUHBrcTJaV2NA3+YGvp53OKy4G9808WaZuIbOSR1y7DmCyiyxu6qCHHxfkYsOWykEC1iP69ywrplievKS7H5CpSVlbs5vUSccBXQU=
Received: by 10.49.41.12 with SMTP id t12mr654847nfj.1172567218223;
        Tue, 27 Feb 2007 01:06:58 -0800 (PST)
Received: from ?192.168.1.6? ( [83.249.110.75])
        by mx.google.com with ESMTP id c10sm1165403nfb.2007.02.27.01.06.56;
        Tue, 27 Feb 2007 01:06:57 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <OFC5E8B72A.204074C1-ON8825728F.0026B2ED-8825728F.0026DA12@il.ibm.com>
References: <OFC5E8B72A.204074C1-ON8825728F.0026B2ED-8825728F.0026DA12@il.ibm.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <DA858F31-2DDE-4490-A8BC-4B0432288B22@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Benchmarker
Date: Tue, 27 Feb 2007 10:04:57 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

27 feb 2007 kl. 08.04 skrev Doron Cohen:
> Hi Karl,
>
> Seems I missed this email...
> What is the status of this, have you solved it?

I didn't do anything since I wrote this. If you have 10 minutes to  
spare some day for guiding me in the output and code via voice  
(skype?), I'd very much appreciate it.

But first I need to make sure I get it running without my changes to  
the code :)

-- 
karl

>
> Doron
>
> karl wettin <karl.wettin@gmail.com> wrote on 13/02/2007 03:24:44:
>
>>
>> 13 feb 2007 kl. 04.33 skrev Doron Cohen:
>>
>>>> Running (once) "ant jar" from the trunk directory should do it.
>>>
>>> Did it solve the problem?
>>
>> Indeed.
>>
>> Do you have way to much time to spare? I patched up the code to run
>> on the index index in LUCENE-550. Unfortunatly it seems as I messed
>> something up or missed something I have to do prior to running. ant
>> run-standard pass in about 4 seconds. I get lots of output with info
>> that clearly tells me that the Reuters set was loaded, but 4 seconds?
>> Is my new laptop really that fast?
>>
>> What I did was very simple. I replaced the Directory in TestData (and
>> that second similiar class that had a reference too) with my Index
>> interface that contains writer and reader factory methods. Then some
>> minor things like going from IndexWriter to IndexWriterInterface in
>> method parameters.
>>
>> Would you mind taking a look at my patch of the benchmarker to see if
>> it actually works as it should or not? Let me know and I'll post a
>> new trunk.diff.bz2 to 550 containing the changes.
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 10:06:04 2007
Return-Path: <java-user-return-26435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60278 invoked from network); 27 Feb 2007 10:06:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 10:06:04 -0000
Received: (qmail 67392 invoked by uid 500); 27 Feb 2007 10:06:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66704 invoked by uid 500); 27 Feb 2007 10:06:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66693 invoked by uid 99); 27 Feb 2007 10:06:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 02:06:04 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=FROM_HAS_ULINE_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.29] (HELO out5.smtp.messagingengine.com) (66.111.4.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 02:05:52 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id ACCE31E6AF6;
	Tue, 27 Feb 2007 05:05:31 -0500 (EST)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by out1.internal (MEProxy); Tue, 27 Feb 2007 05:05:31 -0500
X-Sasl-enc: G/mXxGykcQ4I0OO6Diq6Fgg2mwwicbHT0iHuxYPHSgXR 1172570731
Received: from [192.168.2.36] (unknown [81.105.111.192])
	by mail.messagingengine.com (Postfix) with ESMTP id BD06211291;
	Tue, 27 Feb 2007 05:05:30 -0500 (EST)
Message-ID: <45E40273.7000009@fastmail.fm>
Date: Tue, 27 Feb 2007 10:05:39 +0000
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To:  paul_t100@fastmail.fm
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To: Lucene Users <java-user@lucene.apache.org>
CC: Chris Hostetter <hossman_lucene@fucit.org>, 
 Erick Erickson <erickerickson@gmail.com>
Subject: Re: Can I use Lucene to retrieve a list of duplicates
References: <45DF055C.9050705@fastmail.fm>  <359a92830702230722w19c441f5oe3d6fdd361ef23c@mail.gmail.com>  <45DF1423.3070707@fastmail.fm>  <Pine.LNX.4.58.0702231446220.6828@hal.rescomp.berkeley.edu>  <45E2B7CC.9070704@fastmail.fm> <359a92830702260510m1198d59q69f9b61d0fa6c0e1@mail.gmail.com> <45E309E7.7020102@fastmail.fm> <Pine.LNX.4.58.0702261404500.16689@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0702261404500.16689@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Eric/Chris for all your help

Yes the missing magic was:  

TermDocs termDocs = ir.termDocs(terms.term());

instead of 

TermDocs termDocs = ir.termDocs();

I will try and use FieldCache as well.

This is the first time Ive used Lucene, but it certainly looks like it will help me with a number of areas in my application :)

paul

Chris Hostetter wrote:
> what you are doing below is iterating over every term in your index, and
> for each Term, recording if that term appears in more then one doc (using
> IndexReader.document which is a really bad idea ingeneral in a loop like
> this)
>
> your orriginal problem description was " 'Find Duplicate records for
> Column X' then I would filter the table to show only records where there
> is more than one with the same value i.e duplicate for that column." ...
>
> if we equate columns with fields, then what you are doing is certainly
> overkill -- you can request a TermEnum that starts at a particular field
> Or use the full TermEnum and "skipTo" the first possible temr in your
> field) and then stop iterating when you get to a new field -- you can aso
> get a lot better performance when compiling hte list of ROW_NUMBER field
> values if you use a FieldCache instead of fetching each document.
>
>
> : Date: Mon, 26 Feb 2007 16:25:11 +0000
> : From: Paul Taylor <paul_t100@fastmail.fm>
> : Reply-To: java-user@lucene.apache.org, paul_t100@fastmail.fm
> : To: Erick Erickson <erickerickson@gmail.com>
> : Cc: java-user@lucene.apache.org
> : Subject: Re: Can I use Lucene to retrieve a list of duplicates
> :
> : Hi
> :
> : I  got it working before I saw your latest mail, the only problem is
> : that it doesn't look very efficient. This is my duplicate method, the
> : problem is that I have to enumerate through *every* term. This was worse
> : before because I was only interested
> : in terms that matched a particular field (column) but had enumerate
> : through every term whatever field it was part of, so I recreated my
> : index so that each document only contained a row number field, and a
> : second field for the value of the column, however this means I am going
> : to end up with a number of different indexes each solving a particular
> : problem.
> :
> : paul
> :
> :  public List<Integer> getDuplicates()
> :     {
> :         List<Integer> matches = new ArrayList<Integer>();
> :         try
> :         {
> :             IndexReader ir = IndexReader.open(directory);
> :             TermEnum terms = ir.terms();
> :             while (terms.next())
> :             {
> :                 if (terms.docFreq() > 1)
> :                 {
> :                     TermDocs termDocs = ir.termDocs(terms.term());
> :                     while (termDocs.next())
> :                     {
> :                         Document d = ir.document(termDocs.doc());
> :                         matches.add(new
> : Integer(d.getField(ROW_NUMBER).stringValue()));
> :                     }
> :                 }
> :             }
> :
> :         }
> :         catch (IOException ioe)
> :         {
> :             ioe.printStackTrace();
> :         }
> :         return matches;
> :     }
> :
> : ---------------------------------------------------------------------
> : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : For additional commands, e-mail: java-user-help@lucene.apache.org
> :
>
>
>
> -Hoss
>
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 10:21:36 2007
Return-Path: <java-user-return-26436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64643 invoked from network); 27 Feb 2007 10:21:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 10:21:36 -0000
Received: (qmail 82518 invoked by uid 500); 27 Feb 2007 10:21:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82143 invoked by uid 500); 27 Feb 2007 10:21:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82132 invoked by uid 99); 27 Feb 2007 10:21:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 02:21:37 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.29] (HELO out5.smtp.messagingengine.com) (66.111.4.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 02:21:25 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id CA1A31E7469
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 05:21:05 -0500 (EST)
Received: from web4.messagingengine.com ([10.202.2.213])
  by out1.internal (MEProxy); Tue, 27 Feb 2007 05:21:05 -0500
Received: by web4.messagingengine.com (Postfix, from userid 99)
	id B0040182EE4; Tue, 27 Feb 2007 05:21:05 -0500 (EST)
Message-Id: <1172571665.20694.1176728483@webmail.messagingengine.com>
X-Sasl-Enc: p8g4U2bcNszSK04yXGP2VIenIGtJtoLl+nrkovY3s2UJ 1172571665
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org, java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <45E36A58.6020302@web.de>
   <1172534210.8331.1176655421@webmail.messagingengine.com>
   <45E3CDE7.2030609@web.de>
Subject: Re: Indexing-Error: Cannot delete <File>
In-Reply-To: <45E3CDE7.2030609@web.de>
Date: Tue, 27 Feb 2007 05:21:05 -0500
X-Virus-Checked: Checked by ClamAV on apache.org


"robisbob" <robisbob@web.de> wrote:
> Thanx for your answer. I will use the latest version to check this.
> Unfortunately I have only access to the computer, where the
> application will be run, once a week. And I can't reproduce the error
> at my local machine or any other computer I have access to. So If
> someone has (better had) the same error, now it's the time to go
> public !!!

These two issues (fixed in 2.1) look like they could be what you
are hitting:

  http://issues.apache.org/jira/browse/LUCENE-669

  http://issues.apache.org/jira/browse/LUCENE-665

Also, newer versions of Lucene don't try to directly delete a file like
that.  Instead, it attempts the delete but catches an IOException and
queues the file to retry deletion later.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 10:30:14 2007
Return-Path: <java-user-return-26437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69912 invoked from network); 27 Feb 2007 10:30:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 10:30:13 -0000
Received: (qmail 98167 invoked by uid 500); 27 Feb 2007 10:30:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98127 invoked by uid 500); 27 Feb 2007 10:30:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98115 invoked by uid 99); 27 Feb 2007 10:30:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 02:30:15 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.73.178.234] (HELO web60811.mail.yahoo.com) (209.73.178.234)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 27 Feb 2007 02:30:02 -0800
Received: (qmail 20203 invoked by uid 60001); 27 Feb 2007 10:29:41 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=4fEZrS1xYAZHLPpcM4qE2vwz5IJBNQjcD+Ry2gEzdvyFyytolkGtBMf1QXsVaSaQkzLmnOxLcPHkmarS2pabyuvhqQe3oVOGB8z8n9BXUN3GjhdZ2P2LJiXebvIp3COWtB3Rz0HGCGpWGQzMFTD/oZFSimysB77c8xFoKS/8nVk=;
X-YMail-OSG: OkB8ouQVM1kFNBVLbXXCSv2R8FQwJ_t8gtDoaHVdLH2lseFi.54mimbLJeA_2XhZkh27UBJQqsMgvG8vOWuETJaddhIywZqMhpnyBJvbsB5BB3c05wIsn6gzVKlWnTtcimanIQ2VMOnlCF5Brwoksjxxdw--
Received: from [212.179.71.70] by web60811.mail.yahoo.com via HTTP; Tue, 27 Feb 2007 02:29:41 PST
Date: Tue, 27 Feb 2007 02:29:41 -0800 (PST)
From: zzzzz shalev <zzzzz_shalev@yahoo.com>
Subject: indexing norms???
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-569565626-1172572181=:20195"
Content-Transfer-Encoding: 8bit
Message-ID: <625535.20195.qm@web60811.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-569565626-1172572181=:20195
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

can someone explain to me the norm issue that is stored in each field at index time for scoring, how in impacts the index size, for lucene 1.4.3 is it active by default. and the penalty of disabling it
   
  much much thanks in advance

 
---------------------------------
Any questions?  Get answers on any topic at Yahoo! Answers. Try it now.
--0-569565626-1172572181=:20195--

From java-user-return-26438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 11:25:28 2007
Return-Path: <java-user-return-26438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92218 invoked from network); 27 Feb 2007 11:25:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 11:25:27 -0000
Received: (qmail 78537 invoked by uid 500); 27 Feb 2007 11:25:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78509 invoked by uid 500); 27 Feb 2007 11:25:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78498 invoked by uid 99); 27 Feb 2007 11:25:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 03:25:29 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [89.107.46.3] (HELO [89.107.46.3]) (89.107.46.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 03:25:18 -0800
Received: from [10.22.13.70] (helo=it-d-mspamer)
	by [89.107.46.3] with esmtp (Exim 4.63)
	(envelope-from <mspamer@ebuyer.com>)
	id 1HM0Rz-0003pP-8d
	for java-user@lucene.apache.org; Tue, 27 Feb 2007 11:24:55 +0000
Subject: recovering an index from RAM disk.
From: Martin Spamer <mspamer@ebuyer.com>
To: java-user@lucene.apache.org
Content-Type: text/plain
Organization: Ebuyer.com
Date: Tue, 27 Feb 2007 11:25:32 +0000
Message-Id: <1172575532.8469.10.camel@it-d-mspamer>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.3 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


I generate my index to the file system and load that index into a
RAMDirectory for speed.  If my indexer fails the directory based index
can be left in an inadequate state for my needs.  I therefore wish to
flush the current index from the RAMDirectory back to the File system.
The RAMDirectory class doesn't seem to support this feature.  Is this
possible and can anybody give me some pointers ?




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 11:47:35 2007
Return-Path: <java-user-return-26439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 794 invoked from network); 27 Feb 2007 11:47:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 11:47:33 -0000
Received: (qmail 9356 invoked by uid 500); 27 Feb 2007 11:47:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9330 invoked by uid 500); 27 Feb 2007 11:47:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9311 invoked by uid 99); 27 Feb 2007 11:47:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 03:47:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.29] (HELO out5.smtp.messagingengine.com) (66.111.4.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 03:47:24 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id 6742A1E7B0A
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 06:47:04 -0500 (EST)
Received: from web4.messagingengine.com ([10.202.2.213])
  by out1.internal (MEProxy); Tue, 27 Feb 2007 06:47:04 -0500
Received: by web4.messagingengine.com (Postfix, from userid 99)
	id 48AD81892EB; Tue, 27 Feb 2007 06:47:04 -0500 (EST)
Message-Id: <1172576824.29689.1176739649@webmail.messagingengine.com>
X-Sasl-Enc: jgMeytVEZeIYlrmwkoawmJRy9tLv8Z+efxv6ZV/+sbdy 1172576824
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <1172575532.8469.10.camel@it-d-mspamer>
Subject: Re: recovering an index from RAM disk.
In-Reply-To: <1172575532.8469.10.camel@it-d-mspamer>
Date: Tue, 27 Feb 2007 06:47:04 -0500
X-Virus-Checked: Checked by ClamAV on apache.org

"Martin Spamer" wrote:
> I generate my index to the file system and load that index into a
> RAMDirectory for speed.  If my indexer fails the directory based index
> can be left in an inadequate state for my needs.  I therefore wish to
> flush the current index from the RAMDirectory back to the File system.
> The RAMDirectory class doesn't seem to support this feature.  Is this
> possible and can anybody give me some pointers ?

As of Lucene 2.1, there is a static Directory.copy method that you could
use to copy the full contents of your RAMDirectory back to an
FSDirectory?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 14:13:08 2007
Return-Path: <java-user-return-26440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55245 invoked from network); 27 Feb 2007 14:13:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 14:13:07 -0000
Received: (qmail 54897 invoked by uid 500); 27 Feb 2007 14:13:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54866 invoked by uid 500); 27 Feb 2007 14:13:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54855 invoked by uid 99); 27 Feb 2007 14:13:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 06:13:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 06:12:56 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HM34F-0002kK-Dz
	for java-user@lucene.apache.org; Tue, 27 Feb 2007 06:12:35 -0800
Message-ID: <9182802.post@talk.nabble.com>
Date: Tue, 27 Feb 2007 06:12:35 -0800 (PST)
From: dmitri <evysq@mail.ru>
To: java-user@lucene.apache.org
Subject: ParallelSearcher in multi-node environment
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: evysq@mail.ru
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I want to execute parallel search over several machines. But
ParallelSearcher doesn't look perfect. It creates threads for and spawns
many requests to the underlying Searchables (over a network) for a single
search.
Is there a decent implementation of the parallel search over remote indexes
somewhere?

----------------------
Thank you
  Dmitri

-- 
View this message in context: http://www.nabble.com/ParallelSearcher-in-multi-node-environment-tf3301080.html#a9182802
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 14:13:39 2007
Return-Path: <java-user-return-26441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55342 invoked from network); 27 Feb 2007 14:13:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 14:13:37 -0000
Received: (qmail 56475 invoked by uid 500); 27 Feb 2007 14:13:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56446 invoked by uid 500); 27 Feb 2007 14:13:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56435 invoked by uid 99); 27 Feb 2007 14:13:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 06:13:39 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 06:13:27 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HM34i-0002mc-TN
	for java-user@lucene.apache.org; Tue, 27 Feb 2007 06:13:04 -0800
Message-ID: <9182802.post@talk.nabble.com>
Date: Tue, 27 Feb 2007 06:12:35 -0800 (PST)
From: dmitri <evysq@mail.ru>
To: java-user@lucene.apache.org
Subject: ParallelSearcher in multi-node environment
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: evysq@mail.ru
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I want to execute parallel search over several machines. But
ParallelSearcher doesn't look perfect. It creates threads and spawns many
requests to the underlying Searchables (over a network) for a single search.
Is there a decent implementation of the parallel search over remote indexes
somewhere?

----------------------
Thank you
  Dmitri

-- 
View this message in context: http://www.nabble.com/ParallelSearcher-in-multi-node-environment-tf3301080.html#a9182802
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 14:23:23 2007
Return-Path: <java-user-return-26442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64536 invoked from network); 27 Feb 2007 14:23:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 14:23:21 -0000
Received: (qmail 77825 invoked by uid 500); 27 Feb 2007 14:23:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77707 invoked by uid 500); 27 Feb 2007 14:23:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77696 invoked by uid 99); 27 Feb 2007 14:23:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 06:23:23 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mskumar@gmail.com designates 64.233.162.231 as permitted sender)
Received: from [64.233.162.231] (HELO nz-out-0506.google.com) (64.233.162.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 06:23:12 -0800
Received: by nz-out-0506.google.com with SMTP id i1so1529151nzh
        for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 06:22:51 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=iWDZocTRIuBvyXQMlR88gbvkSoLYPTY0hox48N8WU9eBr115DaqZluCbBQJM6QmGqyoBOT3Yp9SYD5rm6uP01rkr+ouXdG28zXEWqrbUp6D/tG135v+gxV7uzN2tRpO3vAZuAvl/zqNnM+H8At92NXBbFO6Gju9CdQLVcQ/Hd1A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=VOVI3CSexkW7V9P66mPKGGaHZXt36b7h8/YPBDwNCqof6f04F89tpYMGIQMvqz7jRsbhk0d7OI+S2uU2H5YLU2bXimDY7BdLUon55/OYCzWe7/10N46Q8ljGU41YHu1Z9mheAuKPLs6x+YmgTb91Kp8OIbL1jbSF2cNoZbQ5Itk=
Received: by 10.115.54.1 with SMTP id g1mr312895wak.1172586158416;
        Tue, 27 Feb 2007 06:22:38 -0800 (PST)
Received: by 10.114.15.2 with HTTP; Tue, 27 Feb 2007 06:22:38 -0800 (PST)
Message-ID: <f514763f0702270622x2770d82cq64610fe7e9ec90fd@mail.gmail.com>
Date: Tue, 27 Feb 2007 19:52:38 +0530
From: Saravana <mskumar@gmail.com>
To: java-user@lucene.apache.org
Subject: indexing performance
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11930_28687050.1172586158386"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11930_28687050.1172586158386
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

Is it possible to scale lucene indexing like 2000/3000 documents per
second?  I need to index 10 fields each with 20 bytes long.  I should be
able to search by just giving any of the field values as criteria. I need to
get the count that has same field values.

Will it be possible?

with regards,
MSK

------=_Part_11930_28687050.1172586158386--

From java-user-return-26443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 14:30:51 2007
Return-Path: <java-user-return-26443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66870 invoked from network); 27 Feb 2007 14:30:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 14:30:49 -0000
Received: (qmail 90176 invoked by uid 500); 27 Feb 2007 14:30:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90142 invoked by uid 500); 27 Feb 2007 14:30:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90131 invoked by uid 99); 27 Feb 2007 14:30:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 06:30:51 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.132.242 as permitted sender)
Received: from [209.85.132.242] (HELO an-out-0708.google.com) (209.85.132.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 06:30:39 -0800
Received: by an-out-0708.google.com with SMTP id c3so1077210ana
        for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 06:30:18 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=WUtThoA2qAYy6HiMBf0gexwHO0xJpLbfUbIjc6KvsvVeDStZu2KpYWon8CpbKmRH0DBtfUF7ue4ig4vJWgGEqV5tU8tFxsFV1b94tUHzTPxSaJ1pJ2FW+DkpoAfW5feKsylrmmOpovef97BsVRZ3rO/nxPeBMS6WxEbLl1HFGoU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=N5s0tCoEvThvlKQmfZYCMSo53SXsqgJL2NRkirhQaA19U8p9g+HAXdO5c5iDwk9AZgkUpP4LtISaku2R92cwUM3Lvr0BFuU/YS6nRzt5IoteFMOFKxWtSSIhRGEUkOSIg7ESB/igZtUOMslKDbVJQBfKG1GtlCK7a5yMWxJ6+2s=
Received: by 10.114.197.1 with SMTP id u1mr2544967waf.1172586614813;
        Tue, 27 Feb 2007 06:30:14 -0800 (PST)
Received: by 10.114.58.3 with HTTP; Tue, 27 Feb 2007 06:30:14 -0800 (PST)
Message-ID: <359a92830702270630r76fba4dcl9855ef6c06ca6637@mail.gmail.com>
Date: Tue, 27 Feb 2007 09:30:14 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene 2.1, using FieldSelector speeds up my app by a factor of 10+, numbers attached
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12213_11435724.1172586614685"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_12213_11435724.1172586614685
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I thought I'd put up some numbers that may be useful for people who
find themselves doing performance tuning and/or are just curious.

See then end of this e-mail for design notes

DISCLAIMER: Your results may vary. Once I figured out the
speed-up I got by using FieldSelector, I stopped looking for
further improvements or refining my test harness since we're now
getting better than 3 times the design performance target. So,
while I'm quite confident I'm seeing a *very* significant improvement,
these numbers aren't all that precise.

I'm into the performance tuning phase now, so I wrote a little test
harness that creates a configurable number of threads firing queries
off at my search engine with no delays, first firing off a warm-up
query before starting any of the threads. It's a fairly simple
measurement, but the results are pretty consistent and way better
than "one-one thousand, two - one thousand"...

This particular application returns lots summaries at a time as a
result of a search, the default is 500. This is summary information,
so I only return 6 fields from each document. I'm using a
TopDocs to assemble results.

Baseline QPS for returning 1,000 results 0.9 or so queries per
second (QPS), before any tuning. This is not acceptable in our app.....

So I started by asking:
What happens if I retrieve only one doc?
What happens if I retrieve 100 docs?
What happens if I retrieve 1000 docs?

All the above require the same search effort, including sorting, so the
fact that my results were as follows lead me to scratch my head
since I expected the time to be spent in searching and sorting. Note
that these numbers are with default (relevance) sorting. Sorting on
other fields costs about 0.2 QPS, so I'll ignore them.
returning     1 doc,  33 qps
returning  100 docs, 4.34 qps
returning 1000 docs, 0.88 qps (ZERO.88. Less than 1)

Hmmmm, sez I. This is surprising. So I commented out the document
fetch and kludged in hard-coded responses for the data I would have
gotten from the loaded document and got 11 QPS. So then I
uncommented the document fetch (without FieldSelector) but still
used fake field data and was back to 0.89 QPS. Men have been
hung on flimsier evidence.

So, I poked around and found FieldSelector, which has been
mentioned several times on the mailing list, but I hadn't found reason
to use it yet. It took about 1/2 hour to implement and run my first test.
Then I spent another hour realizing that I had foolishly excluded a
couple of compressed un-indexed fields that could be loaded. If a field
can be loaded the usual way, it can be loaded with a FieldSelector.
Sheeeesh...

Anyway, here's the results of using FieldSelector to load only the
fields I need.
returning 1,000 docs 12.5 QPS excluding the 2 compressed fields.
                      (just skipping them)
returning 1,000 docs 7.14 QPS including loading the compressed
                     fields

So, I regenerated the index without compressing those two fields,
and the result is
returning 1,000 docs, all necessary fields, none compressed: 9 QPS

The regenerated index has two fields (one an integer and one the
title of the book) that were stored compressed and not indexed in
the 7.14 QPS case, and stored and indexed UN_TOKENIZED in
the 9 QPS case. No, don't ask me what I was thinking when I
compressed a 4 digit field. I plead advancing senility.

And the little moral here, one I return to repeatedly. The preliminary
test took me maybe 3 hours to write and get the first set of
anomalous results, which pointed me in a completely different
direction than I expected. There's no substitute for data when
performance tuning.

Design notes:

I strongly suspect that the meta-data heavy design of this index is
the main reason for the differences I'm finding when I use
IndexReader.document(doc, FieldSelector) rather than
IndexReader.document(doc). I doubt (but have no evidence) that
an index with no meta-data would get this kind of performance
improvement.

My particular application indexes 20,000+ books, some of them
quite large (i.e. over 7,000 pages). The index approaches 8G. I
designed it to avoid needing a database, so I store a LOT of data
I don't search. Some of it is compressed and the meta-data is not
indexed. The point is that in this particular application there may
be as much data stored as indexed for each book. And extracting
it, particularly the compressed fields (which may be quite large)
turns out to be expensive. I haven't calculated an exact ratio of
stored to indexed data. And, far and away the largest amount of
meta-data (I'm guessing 90%) is irrelevant to the search results
I'm concentrating on here. So avoiding the overhead of loading the
unneeded meta-data is where the savings is coming from I believe.

The underpinnings of this design is that I need to search lots of
page text, but only when displaying a specific book do I care about
things like how many pages are in each chapter, the start and end
page of each chapter, the size of the image corresponding to each
page, etc. I never have to search the meta-data so I store it but
don't index it. This allows me to avoid connecting to a database,
simplifying the application considerably.

Let me add a HUGE thanks for the FieldSelector (a subset of lazy
loading?) and the work that went into it. It's a rare pleasure (actually,
not all that rare in Lucene <G>) to find a ready-made solution to
my problem if I'm just smart enough to look for it.

Otis, Yonik, Eric et.al. Feel free to add anything from this e-mail
to any documentation you wish if you think it'd be useful there.

Best
Erick

------=_Part_12213_11435724.1172586614685--

From java-user-return-26444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 14:34:56 2007
Return-Path: <java-user-return-26444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67904 invoked from network); 27 Feb 2007 14:34:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 14:34:55 -0000
Received: (qmail 95675 invoked by uid 500); 27 Feb 2007 14:34:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95639 invoked by uid 500); 27 Feb 2007 14:34:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95628 invoked by uid 99); 27 Feb 2007 14:34:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 06:34:57 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.184.227 as permitted sender)
Received: from [64.233.184.227] (HELO wr-out-0506.google.com) (64.233.184.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 06:34:46 -0800
Received: by wr-out-0506.google.com with SMTP id 68so1965606wra
        for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 06:34:24 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=EYRlpWqSKOalU/ltZe9TFOraRvivck4BhggJhOaeVhTRBCTNMhOcUy0D/C4Qa7cGsMWfBfN6hqKNK4vKWP1elswbabfeyBZrY5jJ2Xy0MbYBPd5GQyTKkmpq/3Wtg8uJVySrqgCIAGLEkTpeB3+66qsUbx1YyFVlwHNkWcizMKQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=nyjPRtmx3pnGlUcota3R2DT18h4jj0pWasEiJEcq1amPbvh4ZJ+vgGUczpyf1Pu1qOgz6K5nVmR0vDb5xy6JUUZYP9SoAB+l/ZrKsiWNPWEkLNXrADG8sUfk3B9c2aNVco3LnZqUwpmdCyW7WTo4j5UO1L4DCN6M5nvHkYY1XwU=
Received: by 10.114.25.3 with SMTP id 3mr2580057way.1172586860263;
        Tue, 27 Feb 2007 06:34:20 -0800 (PST)
Received: by 10.114.58.3 with HTTP; Tue, 27 Feb 2007 06:34:20 -0800 (PST)
Message-ID: <359a92830702270634l4512ff07jded8e215a188a796@mail.gmail.com>
Date: Tue, 27 Feb 2007 09:34:20 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: indexing performance
In-Reply-To: <f514763f0702270622x2770d82cq64610fe7e9ec90fd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12373_9421965.1172586860182"
References: <f514763f0702270622x2770d82cq64610fe7e9ec90fd@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_12373_9421965.1172586860182
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

How do you expect anyone to be able to answer such an open-ended
question? What I'd do is create a test harness that generates a random
set of strings and try it.

Off the top of my head, this seems like a pretty steep requirement. And
at 2,000 docs a second you're going to have a huge index pretty soon
so you won't be able to do this for very long.

What are you trying to accomplish anyway?

Erick

On 2/27/07, Saravana <mskumar@gmail.com> wrote:
>
> Hi,
>
> Is it possible to scale lucene indexing like 2000/3000 documents per
> second?  I need to index 10 fields each with 20 bytes long.  I should be
> able to search by just giving any of the field values as criteria. I need
> to
> get the count that has same field values.
>
> Will it be possible?
>
> with regards,
> MSK
>

------=_Part_12373_9421965.1172586860182--

From java-user-return-26445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 14:43:53 2007
Return-Path: <java-user-return-26445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70125 invoked from network); 27 Feb 2007 14:43:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 14:43:52 -0000
Received: (qmail 13841 invoked by uid 500); 27 Feb 2007 14:43:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13699 invoked by uid 500); 27 Feb 2007 14:43:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13670 invoked by uid 99); 27 Feb 2007 14:43:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 06:43:53 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ricardo.psilva@gmail.com designates 64.233.162.226 as permitted sender)
Received: from [64.233.162.226] (HELO nz-out-0506.google.com) (64.233.162.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 06:43:41 -0800
Received: by nz-out-0506.google.com with SMTP id i1so1534488nzh
        for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 06:43:21 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=NTK/+b+D9Bkd1UBO1rG9JT1FfOa4iKzt80u5gst1TW53bByLVN6ToIqjuxcb4Eoz2n0HnJUKhLh4RAJcMtn8IRhd4E9p6MQLyF0zOlSiNzFYRnTd0EYPUZC4pjNzIRQwzYfgDE1mKAFBqP+a60OryxbZ193cPfq/n+nUziJsQMY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=jIrUcqopdQf6ow7LaWgdq5q6ZSmdfMjofchN7tav0q9RX7sUJ+XYdYit0swt/gA3olvSDFMmBBXsA328JUbeqpACGoUSBKIl5YNYlardbJG9roIN3hh/8L3WoOUfNfcNL6ar/afXS4Vp3CAyw19zS0YmvvL3DeBAboZU29/tDVU=
Received: by 10.114.192.1 with SMTP id p1mr415205waf.1172587397757;
        Tue, 27 Feb 2007 06:43:17 -0800 (PST)
Received: by 10.114.121.4 with HTTP; Tue, 27 Feb 2007 06:43:17 -0800 (PST)
Message-ID: <a97d21e80702270643w459e3bet58cde27c83d53a86@mail.gmail.com>
Date: Tue, 27 Feb 2007 11:43:17 -0300
From: "Ricardo Pereira da Silva" <ricardo.psilva@gmail.com>
To: java-user@lucene.apache.org
Subject: searchs based on text
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11653_6737900.1172587397523"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11653_6737900.1172587397523
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I've started to study Lucene just today and the demos give me much
information on how
to begin to use it.

But I have one doubt that I couldn't resolve reading the docs and the demo
sources:
 All the examples just search in the index by just a single word, but I need
to know
 if it's possible to search in the index using a reference text.

 Let me explain:
  supose that a web user reaches the search page of my commercial website
and needs
  to find a solution about some trouble. Then he types a long text (about
three or four paragraphs)
  and next clicks on the search button.

  In this cenario, it's that possible to perform a search through the index
using that long text?

  What I need it's something just like the Help system of microsoft office.

  I apreciate if someone could give me some directions.

 Best Regards.

 Ricardo Pereira - Brazil


 PS: If someone finds some error in this text, please submit me the
corrections. I'll apreciate the indications.
     I don't have money to do a great english course and I have try to learn
by myself usind the BBC site.

------=_Part_11653_6737900.1172587397523--

From java-user-return-26446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 15:02:43 2007
Return-Path: <java-user-return-26446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79014 invoked from network); 27 Feb 2007 15:02:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 15:02:42 -0000
Received: (qmail 66060 invoked by uid 500); 27 Feb 2007 15:02:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65880 invoked by uid 500); 27 Feb 2007 15:02:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65868 invoked by uid 99); 27 Feb 2007 15:02:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 07:02:43 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.162.235 as permitted sender)
Received: from [64.233.162.235] (HELO nz-out-0506.google.com) (64.233.162.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 07:02:31 -0800
Received: by nz-out-0506.google.com with SMTP id i1so1539162nzh
        for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 07:02:11 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=gwR2ObbMumZV9xsbj2gq6QlsOtwBL0Ila0/lsZx5NkxLSGdZIoLWP4kvZhF/i2AGv21bU0bEU/SQ2FfLqzS90leSaI4wJCljArjM4Rk/k7JQUiuVoFZXPEjVN5drxxpwR8BRbFYbC4Vd5t57s7BDYtAmXxWa6MRmvrPpB6huEjs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=RdVqhZbSdirySJLmQNOoRdygRpEiRuNFJ2n3HnNcC1i1RFmh9+l215ZxeMv5M8oSC624pdChwP2gnwFt7UyzII9kP2FX4+H03LPcC0NFZyUt6niBZOCNkTBRxyiSCWQXqxBwaVpzMuMjC7QCng1tXZ9z+GRgoSkWqq3pSJJjDU0=
Received: by 10.114.27.20 with SMTP id a20mr1138576waa.1172588530582;
        Tue, 27 Feb 2007 07:02:10 -0800 (PST)
Received: by 10.114.58.3 with HTTP; Tue, 27 Feb 2007 07:02:10 -0800 (PST)
Message-ID: <359a92830702270702s22c1cd77s801a0bf64c0c263f@mail.gmail.com>
Date: Tue, 27 Feb 2007 10:02:10 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: searchs based on text
In-Reply-To: <a97d21e80702270643w459e3bet58cde27c83d53a86@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13292_25333837.1172588530543"
References: <a97d21e80702270643w459e3bet58cde27c83d53a86@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13292_25333837.1172588530543
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Ricardo:

Well, your English is so much better than my Portuguese that I can only
congratulate you. You're perfectly understandable, so your efforts are
paying off!

About your question. It's quite easy to search on multiple terms. Just
submit the entire text to QueryParser.parse. Be sure that the default
operator (QueryParser.setDefaultOperator) is set to OR. You'll get back a
list of documents that are ordered by relevance, as Lucene calculates
relevance. You can use the "field:text" form to search across multiple
fields.

Several things, though.
> Give some thought to stemming both at index time and query time. Do this
if you think that the user would be well served by, for example "working"
being indexed as "work". So searching on "worker", "work", "working" would
all match (assuming you stemmed your query too).
> You may want to create a large list of stop words to exclude, again both
at index and query time.
> It *may* be useful to try to isolate the "important" words from the query.
But I'd only do this if submitting the whole text didn't give satisfactory
results.

Best
Erick

On 2/27/07, Ricardo Pereira da Silva <ricardo.psilva@gmail.com> wrote:
>
> I've started to study Lucene just today and the demos give me much
> information on how
> to begin to use it.
>
> But I have one doubt that I couldn't resolve reading the docs and the demo
> sources:
> All the examples just search in the index by just a single word, but I
> need
> to know
> if it's possible to search in the index using a reference text.
>
> Let me explain:
>   supose that a web user reaches the search page of my commercial website
> and needs
>   to find a solution about some trouble. Then he types a long text (about
> three or four paragraphs)
>   and next clicks on the search button.
>
>   In this cenario, it's that possible to perform a search through the
> index
> using that long text?
>
>   What I need it's something just like the Help system of microsoft
> office.
>
>   I apreciate if someone could give me some directions.
>
> Best Regards.
>
> Ricardo Pereira - Brazil
>
>
> PS: If someone finds some error in this text, please submit me the
> corrections. I'll apreciate the indications.
>      I don't have money to do a great english course and I have try to
> learn
> by myself usind the BBC site.
>

------=_Part_13292_25333837.1172588530543--

From java-user-return-26447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 15:37:54 2007
Return-Path: <java-user-return-26447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95996 invoked from network); 27 Feb 2007 15:37:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 15:37:53 -0000
Received: (qmail 54504 invoked by uid 500); 27 Feb 2007 15:37:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54460 invoked by uid 500); 27 Feb 2007 15:37:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54448 invoked by uid 99); 27 Feb 2007 15:37:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 07:37:53 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Andreas.Guther@markettools.com designates 72.5.112.150 as permitted sender)
Received: from [72.5.112.150] (HELO mvmail04.markettools.com) (72.5.112.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 07:37:42 -0800
Received: from WDCCPMAIL01.markettools.com ([10.64.64.33]) by mvmail04.markettools.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 27 Feb 2007 07:37:21 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: Index Write Access Strategies for Distributed Systems to Shared Index
Date: Tue, 27 Feb 2007 07:37:20 -0800
Message-ID: <3FB08D6A21B3EC4D8749EF6D9E626278F2402D@WDCCPMAIL01.markettools.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Index Write Access Strategies for Distributed Systems to Shared Index
thread-index: AcdahSrn/Egr8p/YSL2z3J3+OzFTHQ==
From: "Andreas Guther" <Andreas.Guther@markettools.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 27 Feb 2007 15:37:21.0106 (UTC) FILETIME=[2B8B7B20:01C75A85]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I am seeking for a best practice recommendation regarding distributed
write access to a Lucene index.

We have the following scenario:

* Our Lucene index is on a shared drive.
* The Lucene lock folder is on the same shared drive
* Our web application writing to the index will run on multiple
instances, i.e. we will have concurrent write access from applications
running on different servers

What might be the best approach to make sure that different web
applications will not send an index command to Lucene before Lucene has
release the lock.

One idea that comes to my mind is to check if there is a lock file in
the shared lock folder.

Another idea is to maintain my own shared lock file, but I probably have
the burden to synchronize the access to that file in a safe manner.

I am curious how other developer solve this problem.

Thanks in advance for any hint or input.

Andreas




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 15:41:22 2007
Return-Path: <java-user-return-26448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97202 invoked from network); 27 Feb 2007 15:41:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 15:41:20 -0000
Received: (qmail 60246 invoked by uid 500); 27 Feb 2007 15:41:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60209 invoked by uid 500); 27 Feb 2007 15:41:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60198 invoked by uid 99); 27 Feb 2007 15:41:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 07:41:21 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.219] (HELO web26008.mail.ukl.yahoo.com) (217.12.10.219)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 27 Feb 2007 07:41:07 -0800
Received: (qmail 50382 invoked by uid 60001); 27 Feb 2007 15:40:46 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=UkF2WeFvcxp1TZkd5OpwbmaBEo8sQq5bSGTtHbb3aCeApDE2zc/9oavpyfrMsUBtOC0Kfi7MCgmprUYfADIJOguv+aO512YxiZihc9KA9C4s8t8iNzvvuucLzYDANK1GuNgilwS+8Ucg+PN8IPhNhO9kAtPU8gvuyVTNIhHpZS4=;
X-YMail-OSG: jPjRz5wVM1myMWKwEal06.cZplc2tiYVrVifIWbOqejrk0dZnIGWiTaky6kZcxU8l7Hp_mgOmp5TFTK3G_GEnskj6kyYSfu5AsrcISb6etJjtATE.yUpNpmbGuG5O0mfV_Z6D.dyze5Z
Received: from [193.36.230.96] by web26008.mail.ukl.yahoo.com via HTTP; Tue, 27 Feb 2007 15:40:46 GMT
X-Mailer: YahooMailRC/368.8 YahooMailWebService/0.6.132.8
Date: Tue, 27 Feb 2007 15:40:46 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: searchs based on text
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <170857.49046.qm@web26008.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Take a look at the "MoreLikeThis" class in the "contrib" section will reduc=
e large amounts of text like your example paragraphs to only the "important=
" words which are useful for searching and provide you with a query object =
you can run.=0A=0AThe disadvantage of trying to feed your example content t=
hrough the default QueryParser is:=0A1) It will reject any illegal query sy=
ntax (e.g. unclosed brackets ) in your text=0A2) It may throw a TooManyClau=
ses exception if the text is too long (the default limit is 1024 terms)=0A3=
) Your query is likely to take a long time to execute because of the large =
number of query terms used.=0A=0ACheers,=0AMark=0A=0A=0A----- Original Mess=
age ----=0AFrom: Ricardo Pereira da Silva <ricardo.psilva@gmail.com>=0ATo: =
java-user@lucene.apache.org=0ASent: Tuesday, 27 February, 2007 2:43:17 PM=
=0ASubject: searchs based on text=0A=0AI've started to study Lucene just to=
day and the demos give me much=0Ainformation on how=0Ato begin to use it.=
=0A=0ABut I have one doubt that I couldn't resolve reading the docs and the=
 demo=0Asources:=0A All the examples just search in the index by just a sin=
gle word, but I need=0Ato know=0A if it's possible to search in the index u=
sing a reference text.=0A=0A Let me explain:=0A  supose that a web user rea=
ches the search page of my commercial website=0Aand needs=0A  to find a sol=
ution about some trouble. Then he types a long text (about=0Athree or four =
paragraphs)=0A  and next clicks on the search button.=0A=0A  In this cenari=
o, it's that possible to perform a search through the index=0Ausing that lo=
ng text?=0A=0A  What I need it's something just like the Help system of mic=
rosoft office.=0A=0A  I apreciate if someone could give me some directions.=
=0A=0A Best Regards.=0A=0A Ricardo Pereira - Brazil=0A=0A=0A PS: If someone=
 finds some error in this text, please submit me the=0Acorrections. I'll ap=
reciate the indications.=0A     I don't have money to do a great english co=
urse and I have try to learn=0Aby myself usind the BBC site.=0A=0A=0A=0A=0A=
=0A=09=09=0A___________________________________________________________ =0A=
The all-new Yahoo! Mail goes wherever you go - free your email address from=
 your Internet provider. http://uk.docs.yahoo.com/nowyoucan.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 15:50:18 2007
Return-Path: <java-user-return-26449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99830 invoked from network); 27 Feb 2007 15:50:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 15:50:17 -0000
Received: (qmail 76939 invoked by uid 500); 27 Feb 2007 15:50:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76905 invoked by uid 500); 27 Feb 2007 15:50:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76892 invoked by uid 99); 27 Feb 2007 15:50:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 07:50:17 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mskumar@gmail.com designates 64.233.162.231 as permitted sender)
Received: from [64.233.162.231] (HELO nz-out-0506.google.com) (64.233.162.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 07:50:06 -0800
Received: by nz-out-0506.google.com with SMTP id i1so1551296nzh
        for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 07:49:45 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ln6kjGiFXSO7wOKsz67o0h6o6Reqeh5iffc6ayKAWIE6Q6ezfttRq7gDpjNyMrQQFmYTGQd87piyqiq0wbf+edN8HQeOHpV2f85JXpiSQpxQEeh9DvkdFFhpSCBOjdlHcrfIqoWkoFg6B7e0McOv75OvAUbd6rO6cfCy5qwc2Tg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qSyOAt6wr3dkw7bat8UTvMTLxjLIOAwJC6sjvExb+eUPEhtWl6EqYzIsh3uBFToxa9sIyxa25fUbGRxu6QfZ+e+6N62Jumekn34Tji9tCRjdPApMUSwUv40QbgHta+WYc+0iXIB+Wy1KB3QtvbfKel2gBTWlFQ9BLGNkMLqZ5zw=
Received: by 10.114.181.1 with SMTP id d1mr2603945waf.1172591384953;
        Tue, 27 Feb 2007 07:49:44 -0800 (PST)
Received: by 10.114.15.2 with HTTP; Tue, 27 Feb 2007 07:49:44 -0800 (PST)
Message-ID: <f514763f0702270749s1e30f9d6p15f66cce5360b5e6@mail.gmail.com>
Date: Tue, 27 Feb 2007 21:19:44 +0530
From: Saravana <mskumar@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: indexing performance
In-Reply-To: <359a92830702270634l4512ff07jded8e215a188a796@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14440_28808001.1172591384907"
References: <f514763f0702270622x2770d82cq64610fe7e9ec90fd@mail.gmail.com>
	 <359a92830702270634l4512ff07jded8e215a188a796@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14440_28808001.1172591384907
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I thought of getting the maximum indexing rate by lucene. However I did the
test with sample strings and I am getting close to 600 documents/sec in a
512 MB RAM with 1.9 GHz Linux machine. Searching is pretty fast and I can
create new index files based on user or based on time etc so that I will end
up in searching with multiple index files.

I am trying to index the syslogs generated from one of my busy ftp server so
that I can get counts specific to an user with the given time frame. Since
my  ftp server is very busy it can generate so much syslogs per second. And
the important point here is I do not need any ranking etc..

So anybody faced the above scenario and any suggestions would be helpful.  I
am just trying to get the maximum performance from lucene for the given
hardware then i can purchase the needed hardware.

MSK


On 2/27/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> How do you expect anyone to be able to answer such an open-ended
> question? What I'd do is create a test harness that generates a random
> set of strings and try it.
>
> Off the top of my head, this seems like a pretty steep requirement. And
> at 2,000 docs a second you're going to have a huge index pretty soon
> so you won't be able to do this for very long.
>
> What are you trying to accomplish anyway?
>
> Erick
>
> On 2/27/07, Saravana <mskumar@gmail.com> wrote:
> >
> > Hi,
> >
> > Is it possible to scale lucene indexing like 2000/3000 documents per
> > second?  I need to index 10 fields each with 20 bytes long.  I should be
> > able to search by just giving any of the field values as criteria. I
> need
> > to
> > get the count that has same field values.
> >
> > Will it be possible?
> >
> > with regards,
> > MSK
> >
>

------=_Part_14440_28808001.1172591384907--

From java-user-return-26450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 16:02:21 2007
Return-Path: <java-user-return-26450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6225 invoked from network); 27 Feb 2007 16:02:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 16:02:20 -0000
Received: (qmail 12084 invoked by uid 500); 27 Feb 2007 16:02:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12036 invoked by uid 500); 27 Feb 2007 16:02:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11999 invoked by uid 99); 27 Feb 2007 16:02:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 08:02:19 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 08:02:05 -0800
Received: by nf-out-0910.google.com with SMTP id i2so203176nfe
        for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 08:01:44 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=bg4qKJEjBJgVM3Nuy3CsnRRsSjSAoleENxE2pEPOKJn5HzE8NJ9l0xWmPNYs/o953zcDlbiZSOrSvBKNeb31VlTesZn0wAeRWVFngenZJ9JSl2iHNtB7n1WprQhySVUjQkHOH6cw9IVqtICIxo/3V34ZjUTj2SGtUNVlS1dTgpw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=Uh7JYmM/i8YU7kjylaX18lq8uDyXgajwRuCx/qVG+jIPiFjVlzkAjttUXKBzns/KJ5n5Jy+o+QmvqgsyGejcSDL/hTcFYQE/dWzoshKBHd8Ctmf8jLaCdbXfsKoTwqF2F3sDIgNOoLUFjFhH9+7vTgYaP/b76Hu8b+V7rgBtoZQ=
Received: by 10.48.220.15 with SMTP id s15mr1386009nfg.1172592104383;
        Tue, 27 Feb 2007 08:01:44 -0800 (PST)
Received: from ?10.0.1.12? ( [212.162.171.110])
        by mx.google.com with ESMTP id q28sm2321526nfc.2007.02.27.08.01.43;
        Tue, 27 Feb 2007 08:01:43 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <f514763f0702270749s1e30f9d6p15f66cce5360b5e6@mail.gmail.com>
References: <f514763f0702270622x2770d82cq64610fe7e9ec90fd@mail.gmail.com> <359a92830702270634l4512ff07jded8e215a188a796@mail.gmail.com> <f514763f0702270749s1e30f9d6p15f66cce5360b5e6@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <EFA2A397-9FE0-4CB8-B5C5-C28B0DB99301@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: indexing performance
Date: Tue, 27 Feb 2007 16:59:42 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


27 feb 2007 kl. 16.49 skrev Saravana:

> I am trying to index the syslogs generated from one of my busy ftp  
> server so
> that I can get counts specific to an user with the given time  
> frame. Since
> my  ftp server is very busy it can generate so much syslogs per  
> second. And
> the important point here is I do not need any ranking etc..

My immediate thought when reading this is if it really is a text  
search engine you want to use for this?

If it is, how do you process the log? What fields to you split it up  
in and what analyzsers do you use? Optimizing the use of that is  
probably you best way to achieve better speed when appending  
documents to the index.

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 16:27:21 2007
Return-Path: <java-user-return-26451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16256 invoked from network); 27 Feb 2007 16:27:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 16:27:20 -0000
Received: (qmail 62413 invoked by uid 500); 27 Feb 2007 16:27:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62379 invoked by uid 500); 27 Feb 2007 16:27:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62368 invoked by uid 99); 27 Feb 2007 16:27:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 08:27:21 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ricardo.psilva@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 08:27:10 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1146899ugc
        for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 08:26:48 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cesKJtGtTqPRednEOAI6UTgwJ07bfZUVWves7aDmhbR2wQHezivXrUV+a+6c2mbrLlj4ZF/4YdF4sWNTWYPGnzK9e0r/d7FdqmJD/sOSwJAFO0fenPCEEf65mXEcJfKNZx/9/68pGuicG0VSLIbG9uaNpalrm6EmLEHXRqSXHVA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=UXrOK5wliEP/fvNAbAjNi8o/57W46eKac6eMPpZi63c93X3mQj21jtC+zf11yNQ/oMjLaSG3VrabD043vldNW7ro9Fv1RejQH+/huCqeyq8gU8MwNZjFLU4jz35FAePcgoiShziJ/nvFeCAHqKtOUlXO/k5DTvkBtHCZfEoYYtE=
Received: by 10.114.25.3 with SMTP id 3mr1845707way.1172593604415;
        Tue, 27 Feb 2007 08:26:44 -0800 (PST)
Received: by 10.114.121.4 with HTTP; Tue, 27 Feb 2007 08:26:44 -0800 (PST)
Message-ID: <a97d21e80702270826v17cde4dra97b7f847c498216@mail.gmail.com>
Date: Tue, 27 Feb 2007 13:26:44 -0300
From: "Ricardo Pereira da Silva" <ricardo.psilva@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: searchs based on text
In-Reply-To: <170857.49046.qm@web26008.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14523_16546011.1172593604373"
References: <170857.49046.qm@web26008.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14523_16546011.1172593604373
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

   I'm very happy  that I  can make myself understandable, so , thank's very
much fou your opinion!

   I really appreciate your hints, and now I have some direction to take in
my study.

   Thank you very much!


Best Regards,

Ricardo Pereira - Brazil




On 2/27/07, mark harwood <markharw00d@yahoo.co.uk> wrote:
>
> Take a look at the "MoreLikeThis" class in the "contrib" section will
> reduce large amounts of text like your example paragraphs to only the
> "important" words which are useful for searching and provide you with a
> query object you can run.
>
> The disadvantage of trying to feed your example content through the
> default QueryParser is:
> 1) It will reject any illegal query syntax (e.g. unclosed brackets ) in
> your text
> 2) It may throw a TooManyClauses exception if the text is too long (the
> default limit is 1024 terms)
> 3) Your query is likely to take a long time to execute because of the
> large number of query terms used.
>
> Cheers,
> Mark
>
>
> ----- Original Message ----
> From: Ricardo Pereira da Silva <ricardo.psilva@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, 27 February, 2007 2:43:17 PM
> Subject: searchs based on text
>
> I've started to study Lucene just today and the demos give me much
> information on how
> to begin to use it.
>
> But I have one doubt that I couldn't resolve reading the docs and the demo
> sources:
> All the examples just search in the index by just a single word, but I
> need
> to know
> if it's possible to search in the index using a reference text.
>
> Let me explain:
>   supose that a web user reaches the search page of my commercial website
> and needs
>   to find a solution about some trouble. Then he types a long text (about
> three or four paragraphs)
>   and next clicks on the search button.
>
>   In this cenario, it's that possible to perform a search through the
> index
> using that long text?
>
>   What I need it's something just like the Help system of microsoft
> office.
>
>   I apreciate if someone could give me some directions.
>
> Best Regards.
>
> Ricardo Pereira - Brazil
>
>
> PS: If someone finds some error in this text, please submit me the
> corrections. I'll apreciate the indications.
>      I don't have money to do a great english course and I have try to
> learn
> by myself usind the BBC site.
>
>
>
>
>
>
> ___________________________________________________________
> The all-new Yahoo! Mail goes wherever you go - free your email address
> from your Internet provider. http://uk.docs.yahoo.com/nowyoucan.html
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_14523_16546011.1172593604373--

From java-user-return-26452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 16:50:35 2007
Return-Path: <java-user-return-26452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24763 invoked from network); 27 Feb 2007 16:50:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 16:50:33 -0000
Received: (qmail 27694 invoked by uid 500); 27 Feb 2007 16:50:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27661 invoked by uid 500); 27 Feb 2007 16:50:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27650 invoked by uid 99); 27 Feb 2007 16:50:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 08:50:34 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.148.227.151] (HELO rwcrmhc11.comcast.net) (216.148.227.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 08:50:22 -0800
Received: from xpsoleary (c-24-19-171-50.hsd1.wa.comcast.net[24.19.171.50])
          by comcast.net (rwcrmhc11) with SMTP
          id <20070227165001m1100jhbnse>; Tue, 27 Feb 2007 16:50:01 +0000
Reply-To: <tm-oleary@comcast.net>
From: "Mike O'Leary" <tm-oleary@comcast.net>
To: "Lucene Java User List" <java-user@lucene.apache.org>
Subject: Storing extra data in index
Date: Tue, 27 Feb 2007 08:49:49 -0800
Message-ID: <009801c75a8f$4c6ec720$0302a8c0@xpsoleary>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0099_01C75A4C.3E4B8720"
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
Thread-Index: Acdaj0sG2nn1fMJxTUiH+6iMrzZOhQ==
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0099_01C75A4C.3E4B8720
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Is there a standard programming idiom for adding extra data to an index that
has been created? I am trying to write code to index and search a set of
documents using the BM25 algorithm, so (as I understand it) I need to store
the length of each document somewhere and the average document length for
the collection somewhere (and, I guess, the number of documents that have
been indexed at any point so I can keep a running average). It seems like it
would make sense to store these values in the index somehow so they are
available to the search code. Is there sample code somewhere that describes
how to do something like this? Or is there a better way that I'm not
thinking of? Thanks.

Mike O'Leary


------=_NextPart_000_0099_01C75A4C.3E4B8720--


From java-user-return-26453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 17:22:35 2007
Return-Path: <java-user-return-26453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38937 invoked from network); 27 Feb 2007 17:22:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 17:22:33 -0000
Received: (qmail 95077 invoked by uid 500); 27 Feb 2007 17:22:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95051 invoked by uid 500); 27 Feb 2007 17:22:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95040 invoked by uid 99); 27 Feb 2007 17:22:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 09:22:34 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.132.246 as permitted sender)
Received: from [209.85.132.246] (HELO an-out-0708.google.com) (209.85.132.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 09:22:23 -0800
Received: by an-out-0708.google.com with SMTP id c3so1123961ana
        for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 09:22:02 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=VkR6GcBH3MJDuXBMqkE8dv0rq82wnPie2lbO6PK0hdQoca+3mExhgFGao39dowKWnPy8nGts3YCiz/Pa/mszbibggyZtna6vzhhgBijE6+GmU5j69oKIrmJvllRWdlASoEGcbiIN/W0Dh4IPPHFoYi7unFgjTuaMvMSapDePX+A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=f41PJbshJtHxRaULtID0E2U9VNH7ErKJHD6/TdHzRthb5JAQudyDpCGEAmzSxg0i8qBfSu3irYU4ycxb2J8r1kwpc6BcdmJ064gFnI0qsy2Y0b+HQRax4hMUJJ9b9g/ZyPxf/YrRsML6Zlkkt61aq6i2bmdeWJWkkO5oCF1k9Ho=
Received: by 10.115.17.1 with SMTP id u1mr370208wai.1172596921262;
        Tue, 27 Feb 2007 09:22:01 -0800 (PST)
Received: by 10.114.58.3 with HTTP; Tue, 27 Feb 2007 09:22:01 -0800 (PST)
Message-ID: <359a92830702270922r3cb20f01ledbb641450b80df5@mail.gmail.com>
Date: Tue, 27 Feb 2007 12:22:01 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, tm-oleary@comcast.net
Subject: Re: Storing extra data in index
In-Reply-To: <009801c75a8f$4c6ec720$0302a8c0@xpsoleary>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17236_19654309.1172596921220"
References: <009801c75a8f$4c6ec720$0302a8c0@xpsoleary>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17236_19654309.1172596921220
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You can just add a document. I used this technique in an application,
and it hinges upon realizing that not all documents in an index need
to have the same fields. So, say your regular documents have
fields f1, f2, f3...fn. Create a special document with fields
s1, s2, s3, s4 that contain your meta data. Whenever you add
more "regular" documents to the index you can modify
the special document as necessary.

The beauty of this is that as long as the special document
contains no fields in common with your regular documents,
you'll never have it returned by searches because the fields
are disjoint. And searches to find it will be very fast because
there's only one.

You can take this as far as you like. For instance, you
could store a field (no need to even index it!) that
contains, say, an XML version of all the meta-data
you want to use in your special document. Perhaps
you want to read this document in at startup and
store it in a convenient form. Or.....

If you go this route, you may want to consider creating and storing
the meta-document as a post-build step. I was surprised at how
quickly I could traverse an index and build up the meta-data
document after I'd finished with all of the "regular" processing.

One caution, however; I'd be very careful about storing Lucene
document Ids in my meta-data document since they may change
if you delete documents and then optimize your index. In fact, they
WILL change.

BTW, I thoroughly approve of keeping all the parts you can
in the index, since that's fewer things to keep track of.

Hope this helps
Erick

On 2/27/07, Mike O'Leary <tm-oleary@comcast.net> wrote:
>
> Is there a standard programming idiom for adding extra data to an index
> that
> has been created? I am trying to write code to index and search a set of
> documents using the BM25 algorithm, so (as I understand it) I need to
> store
> the length of each document somewhere and the average document length for
> the collection somewhere (and, I guess, the number of documents that have
> been indexed at any point so I can keep a running average). It seems like
> it
> would make sense to store these values in the index somehow so they are
> available to the search code. Is there sample code somewhere that
> describes
> how to do something like this? Or is there a better way that I'm not
> thinking of? Thanks.
>
> Mike O'Leary
>
>

------=_Part_17236_19654309.1172596921220--

From java-user-return-26454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 17:22:42 2007
Return-Path: <java-user-return-26454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38992 invoked from network); 27 Feb 2007 17:22:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 17:22:41 -0000
Received: (qmail 95656 invoked by uid 500); 27 Feb 2007 17:22:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95631 invoked by uid 500); 27 Feb 2007 17:22:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95611 invoked by uid 99); 27 Feb 2007 17:22:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 09:22:37 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 09:22:25 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HM61a-0003W6-S9
	for java-user@lucene.apache.org; Tue, 27 Feb 2007 09:22:02 -0800
Message-ID: <9187114.post@talk.nabble.com>
Date: Tue, 27 Feb 2007 09:22:02 -0800 (PST)
From: moraleslos <moraleslos@hotmail.com>
To: java-user@lucene.apache.org
Subject: Highlighting issues
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: moraleslos@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


In my search query I have two fields to search, a metadata field and the
actual contents. The metadata field is just an enum containing FIRST and
LAST. Here is an example search query:

Content:"Barry Bonds" and Metadata:FIRST


I have Lucene highlight the hits like this:

...
getBestFragment(standardAnalyzer, "Content", content);
...


Now I would only expect the highlighted text to show the key words Barry
Bonds but instead some of the highlighted text I get back actually
highlights the enum FIRST. For example, one highlighted result is this:
********************************************
...attempting to slide into <p>first</p> base...
********************************************

The above result is not what I had in mind. Any ideas on why the highlighter
is highlighting my enum field and not only my keywords from the content
field? Thanks in advance!

-los 
-- 
View this message in context: http://www.nabble.com/Highlighting-issues-tf3302760.html#a9187114
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 17:31:50 2007
Return-Path: <java-user-return-26455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43671 invoked from network); 27 Feb 2007 17:31:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 17:31:24 -0000
Received: (qmail 19660 invoked by uid 500); 27 Feb 2007 17:31:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19630 invoked by uid 500); 27 Feb 2007 17:31:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19529 invoked by uid 99); 27 Feb 2007 17:31:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 09:31:22 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [204.127.192.84] (HELO rwcrmhc14.comcast.net) (204.127.192.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 09:31:10 -0800
Received: from xpsoleary (c-24-19-171-50.hsd1.or.comcast.net[24.19.171.50])
          by comcast.net (rwcrmhc14) with SMTP
          id <20070227173048m1400pm1qqe>; Tue, 27 Feb 2007 17:30:48 +0000
Reply-To: <tm-oleary@comcast.net>
From: "Mike O'Leary" <tm-oleary@comcast.net>
To: "'Erick Erickson'" <erickerickson@gmail.com>,
	<java-user@lucene.apache.org>
References: <009801c75a8f$4c6ec720$0302a8c0@xpsoleary> <359a92830702270922r3cb20f01ledbb641450b80df5@mail.gmail.com>
Subject: RE: Storing extra data in index
Date: Tue, 27 Feb 2007 09:30:33 -0800
Message-ID: <00a601c75a94$fe911890$0302a8c0@xpsoleary>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_00A7_01C75A51.F06DD890"
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <359a92830702270922r3cb20f01ledbb641450b80df5@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
Thread-Index: Acdak8xxjATgIa+MS/Gw5rxLTY4F1QAAH4ew
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_00A7_01C75A51.F06DD890
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

So if I wanted to record the length of each individual document, would it be
better to store that information with each document, perhaps as an unindexed
field? Or are there ways to refer to the indexed documents that don't change
through delete and optimize steps? Thanks.

Mike O'Leary

  _____  

From: Erick Erickson [mailto:erickerickson@gmail.com] 
Sent: Tuesday, February 27, 2007 9:22 AM
To: java-user@lucene.apache.org; tm-oleary@comcast.net
Subject: Re: Storing extra data in index

 

You can just add a document. I used this technique in an application, 
and it hinges upon realizing that not all documents in an index need
to have the same fields. So, say your regular documents have
fields f1, f2, f3...fn. Create a special document with fields 
s1, s2, s3, s4 that contain your meta data. Whenever you add
more "regular" documents to the index you can modify
the special document as necessary.

The beauty of this is that as long as the special document 
contains no fields in common with your regular documents,
you'll never have it returned by searches because the fields
are disjoint. And searches to find it will be very fast because
there's only one. 

You can take this as far as you like. For instance, you
could store a field (no need to even index it!) that 
contains, say, an XML version of all the meta-data
you want to use in your special document. Perhaps 
you want to read this document in at startup and
store it in a convenient form. Or.....

If you go this route, you may want to consider creating and storing
the meta-document as a post-build step. I was surprised at how 
quickly I could traverse an index and build up the meta-data
document after I'd finished with all of the "regular" processing.

One caution, however; I'd be very careful about storing Lucene 
document Ids in my meta-data document since they may change
if you delete documents and then optimize your index. In fact, they
WILL change.

BTW, I thoroughly approve of keeping all the parts you can
in the index, since that's fewer things to keep track of. 

Hope this helps
Erick

On 2/27/07, Mike O'Leary <tm-oleary@comcast.net> wrote:

Is there a standard programming idiom for adding extra data to an index that
has been created? I am trying to write code to index and search a set of
documents using the BM25 algorithm, so (as I understand it) I need to store 
the length of each document somewhere and the average document length for
the collection somewhere (and, I guess, the number of documents that have
been indexed at any point so I can keep a running average). It seems like it

would make sense to store these values in the index somehow so they are
available to the search code. Is there sample code somewhere that describes
how to do something like this? Or is there a better way that I'm not 
thinking of? Thanks.

Mike O'Leary

 


------=_NextPart_000_00A7_01C75A51.F06DD890--


From java-user-return-26456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 17:51:01 2007
Return-Path: <java-user-return-26456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52104 invoked from network); 27 Feb 2007 17:51:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 17:51:00 -0000
Received: (qmail 69812 invoked by uid 500); 27 Feb 2007 17:51:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69780 invoked by uid 500); 27 Feb 2007 17:51:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69763 invoked by uid 99); 27 Feb 2007 17:51:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 09:51:01 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.162.229 as permitted sender)
Received: from [64.233.162.229] (HELO nz-out-0506.google.com) (64.233.162.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 09:50:49 -0800
Received: by nz-out-0506.google.com with SMTP id i1so1582341nzh
        for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 09:50:28 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ec7RKhqDR+MMRJ1uwUNKUYRMBKUY53seFh1APzYx0og5282VhNu7Bl2FQZMUsICXjIE9CYXBWhEowGmZenj1esUFAbXKcDufVzjIhGAAOa06dBZ7tdiSlBCH5WAl/VZ3r+tZrpH3v67b3VypxCzl45GfqBfq0L0/Pc91N1IOCJQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=SryJoNapY9jcb5Qgj9Tq6qScPc65hi+jgnDgA7HY2pyUb4/Yd50M74mV7ilGs/tXzOJoWxXOZSgjo5CviYGIxEjSDkEkmlidMLpz2RTbwyHfAlI8QiDQI8Ky/98k7klXBpi3twCqUtHTWVP20Phb5FgXzfNE+4IR9J4UenYp4Cw=
Received: by 10.115.58.1 with SMTP id l1mr494802wak.1172598625278;
        Tue, 27 Feb 2007 09:50:25 -0800 (PST)
Received: by 10.114.58.3 with HTTP; Tue, 27 Feb 2007 09:50:25 -0800 (PST)
Message-ID: <359a92830702270950w3111c2d9l852289a0c67989b8@mail.gmail.com>
Date: Tue, 27 Feb 2007 12:50:25 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, tm-oleary@comcast.net
Subject: Re: Storing extra data in index
In-Reply-To: <00a601c75a94$fe911890$0302a8c0@xpsoleary>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17728_18773065.1172598625229"
References: <009801c75a8f$4c6ec720$0302a8c0@xpsoleary>
	 <359a92830702270922r3cb20f01ledbb641450b80df5@mail.gmail.com>
	 <00a601c75a94$fe911890$0302a8c0@xpsoleary>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17728_18773065.1172598625229
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Keep in mind that you'll have to store the length as you index. If you
tried to store the length with each document as a post-step, you'd
delete and re-add the document to the index...

That said, it's really up to you. It's very quick to use TermEnum/
TermDocs to enumerate all the lengths. Even though this works
with Lucene doc IDs, it's OK since you're working on a
snapshot of the index. They won't change before you
close your reader (and presumably re-read the data).

Or, you can simply create some sort of unique ID for each
doc that's entirely independent of the Lucene ID and store
*that* id along with the length in your meta-data. Whichever
you think would suite your needs better.

Which is best you'll only discover by testing in your situation.
I suspect either will be "good enough".

Erick

On 2/27/07, Mike O'Leary <tm-oleary@comcast.net> wrote:
>
> So if I wanted to record the length of each individual document, would it
> be
> better to store that information with each document, perhaps as an
> unindexed
> field? Or are there ways to refer to the indexed documents that don't
> change
> through delete and optimize steps? Thanks.
>
> Mike O'Leary
>
>   _____
>
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Tuesday, February 27, 2007 9:22 AM
> To: java-user@lucene.apache.org; tm-oleary@comcast.net
> Subject: Re: Storing extra data in index
>
>
>
> You can just add a document. I used this technique in an application,
> and it hinges upon realizing that not all documents in an index need
> to have the same fields. So, say your regular documents have
> fields f1, f2, f3...fn. Create a special document with fields
> s1, s2, s3, s4 that contain your meta data. Whenever you add
> more "regular" documents to the index you can modify
> the special document as necessary.
>
> The beauty of this is that as long as the special document
> contains no fields in common with your regular documents,
> you'll never have it returned by searches because the fields
> are disjoint. And searches to find it will be very fast because
> there's only one.
>
> You can take this as far as you like. For instance, you
> could store a field (no need to even index it!) that
> contains, say, an XML version of all the meta-data
> you want to use in your special document. Perhaps
> you want to read this document in at startup and
> store it in a convenient form. Or.....
>
> If you go this route, you may want to consider creating and storing
> the meta-document as a post-build step. I was surprised at how
> quickly I could traverse an index and build up the meta-data
> document after I'd finished with all of the "regular" processing.
>
> One caution, however; I'd be very careful about storing Lucene
> document Ids in my meta-data document since they may change
> if you delete documents and then optimize your index. In fact, they
> WILL change.
>
> BTW, I thoroughly approve of keeping all the parts you can
> in the index, since that's fewer things to keep track of.
>
> Hope this helps
> Erick
>
> On 2/27/07, Mike O'Leary <tm-oleary@comcast.net> wrote:
>
> Is there a standard programming idiom for adding extra data to an index
> that
> has been created? I am trying to write code to index and search a set of
> documents using the BM25 algorithm, so (as I understand it) I need to
> store
> the length of each document somewhere and the average document length for
> the collection somewhere (and, I guess, the number of documents that have
> been indexed at any point so I can keep a running average). It seems like
> it
>
> would make sense to store these values in the index somehow so they are
> available to the search code. Is there sample code somewhere that
> describes
> how to do something like this? Or is there a better way that I'm not
> thinking of? Thanks.
>
> Mike O'Leary
>
>
>
>

------=_Part_17728_18773065.1172598625229--

From java-user-return-26457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 17:59:56 2007
Return-Path: <java-user-return-26457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58059 invoked from network); 27 Feb 2007 17:59:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 17:59:56 -0000
Received: (qmail 94856 invoked by uid 500); 27 Feb 2007 17:59:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94829 invoked by uid 500); 27 Feb 2007 17:59:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94818 invoked by uid 99); 27 Feb 2007 17:59:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 09:59:57 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of walt.stoneburner@gmail.com designates 64.233.162.236 as permitted sender)
Received: from [64.233.162.236] (HELO nz-out-0506.google.com) (64.233.162.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 09:59:46 -0800
Received: by nz-out-0506.google.com with SMTP id i1so1584394nzh
        for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 09:59:25 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=YtN8bVRigVFZusfMUcCxCHnqOQvWQJHRu7CdGG66WLnLvsISSA8XYSBAV7oB8YCvPm1PSDZf2nIN3M/le3wJmQ898HlNq0NX0W2SGA5Kpjd676bf8wiKq1pe5stxixAdfDgC7dOdlwP4caooUUMsI9oW9oD8+P2h9gBk3piZzr8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=iIq47dQ3PyMs6q6mq5x+N4jFVQ84QUtlfyKNceNl+/odpZh3yAp+fLX8ciNlOb4051Inzojv8apFgkU9Q7dLlfWANn7YmQlxAdrPRdrz1CtLsfakicYj730ujj9Eursa6OH1I7pY+ZmUqVot0qZQBg8lTojCg7wvpA+OPG1ix34=
Received: by 10.114.25.3 with SMTP id 3mr1882905way.1172599165093;
        Tue, 27 Feb 2007 09:59:25 -0800 (PST)
Received: by 10.114.126.10 with HTTP; Tue, 27 Feb 2007 09:59:25 -0800 (PST)
Message-ID: <ae6f38f60702270959q405a0ab9p208a306577c497b@mail.gmail.com>
Date: Tue, 27 Feb 2007 12:59:25 -0500
From: "Walt Stoneburner" <walt.stoneburner@gmail.com>
To: java-user@lucene.apache.org
Subject: Soliciting Design Thoughts on Date Searching
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

I've been asked if it's possible to search on dates within a document.
 The high level goal is to index a number of documents which mention
specific dates, and then perform a broad query for documents that
mention dates within a certain time period.

In thinking about how to go about solving this problem, I would figure
one would need a filter to extract all the date formats and store them
in a separate field, perhaps as a list.

Has anyone done something like this with Lucene, or perhaps could give
me some gentle design issues / recommendations for consideration so
that I don't paint myself into a corner later?

Thanks,
-Walt Stoneburner

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 18:00:23 2007
Return-Path: <java-user-return-26458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58403 invoked from network); 27 Feb 2007 18:00:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 18:00:22 -0000
Received: (qmail 96509 invoked by uid 500); 27 Feb 2007 18:00:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96479 invoked by uid 500); 27 Feb 2007 18:00:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96373 invoked by uid 99); 27 Feb 2007 18:00:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 10:00:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.170.99.253] (HELO mail.authsum.com) (216.170.99.253)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 10:00:01 -0800
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.authsum.com (Postfix) with ESMTP id D73EE7818F
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 12:59:39 -0500 (EST)
X-Virus-Scanned: amavisd-new at 
X-Spam-Score: -3.706
X-Spam-Level: 
Received: from mail.authsum.com ([127.0.0.1])
	by localhost (mail.authsum.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id EkhXPupihxqd for <java-user@lucene.apache.org>;
	Tue, 27 Feb 2007 12:59:36 -0500 (EST)
Received: from mail.authsum.com (unknown [216.170.99.248])
	by mail.authsum.com (Postfix) with ESMTP id 16501780E4
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 12:59:36 -0500 (EST)
Message-ID: <8447493.1811172599175957.JavaMail.root@localhost.localdomain>
Date: Tue, 27 Feb 2007 12:59:35 -0500 (EST)
From: Phillip Rhodes <spamsucks@rhoderunner.com>
To: java-user lucene <java-user@lucene.apache.org>
Subject: indexing and searching the document title question
In-Reply-To: <28958965.1791172592787148.JavaMail.root@localhost.localdomain>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Originating-IP: [209.166.180.139]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.706 tagged_above=-10 required=6.6
	tests=[ALL_TRUSTED=-1.8, AWL=0.693, BAYES_00=-2.599]

Hi,
According to the FAQ, by indexing the title of the document and performing a search against the shorter field will automatically give it a higher weight than matches against the document content.  That is what I am trying to accomplish with a "NAME" field.  If someone enters a close match of the name of a document (example Names: "Color Me Mine" ,"Pittsburgh and Its Countryside"), I want that document to get a hit.  The search is user entered, so I want it to be case-insensitive.  I also don't want it to have to be an exact match.  Search terms such as "Pittsburgh Countryside" should match up against a name of "Pittsburgh and Its Countryside".


Here I am adding the name field to my document:
String value= "Color Me Mine";
document.add(new Field("NAME", value, Field.Store.YES,
				Field.Index.TOKENIZED));

Performing a search:
NAME:color me mine ->returns no results
NAME:color -> returns the document

I tried indexing the document without the value tokenized:
document.add(new Field("NAME", value, Field.Store.YES,
				Field.Index.UN_TOKENIZED));

This caused the search to be case sensitive.

I am about to modify my indexing/searching code to use a secondary field, "name_lowercase", this field would of course contain the name of the object in lowercase and I would lowercase my search terms in I construct my TermQuery for this field.  

Is this a valid approach, or am I missing something?

Thanks!  




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 18:00:43 2007
Return-Path: <java-user-return-26459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58568 invoked from network); 27 Feb 2007 18:00:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 18:00:41 -0000
Received: (qmail 97899 invoked by uid 500); 27 Feb 2007 18:00:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97872 invoked by uid 500); 27 Feb 2007 18:00:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97861 invoked by uid 99); 27 Feb 2007 18:00:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 10:00:21 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.151 as permitted sender)
Received: from [195.212.29.151] (HELO mtagate2.de.ibm.com) (195.212.29.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 10:00:08 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.13.8/8.13.8) with ESMTP id l1RHxknr059258
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 17:59:46 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.2) with ESMTP id l1RHxk2d1462276
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 18:59:46 +0100
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l1RHxjEh008984
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 18:59:45 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l1RHxjQS008981
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 18:59:45 +0100
In-Reply-To: <DA858F31-2DDE-4490-A8BC-4B0432288B22@gmail.com>
Subject: Re: Benchmarker
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFA654C10F.6E183CE3-ON8825728F.0060C99F-8825728F.006271B2@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Tue, 27 Feb 2007 09:55:16 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 27/02/2007 19:59:45
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

karl wettin <karl.wettin@gmail.com> wrote on 27/02/2007 01:04:57:

>
> But first I need to make sure I get it running without my changes to
> the code :)
>

Ok, this should be easy:
 - checkut current trunk;
 - cd to contrib/benchmark;
 - run "ant run-task";
This should run the benchmark-by-task and at the
end print something like this:

---> Report sum by Prefix (MAddDocs) and Round (4 about 4 out of 49)
Operation     round mrg buf runCnt recsPerRun rec/s elapsedSec
MAddDocs_2000     0  10  10      1       2000 133.2      15.01
MAddDocs_2000 -   1 100  10  -   1  -  - 2000 213.6   -   9.36
MAddDocs_2000     2  10 100      1       2000 346.1       5.78
MAddDocs_2000 -   3 100 100  -   1  -  - 2000 383.3   -   5.22

For start, is this working?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 18:05:13 2007
Return-Path: <java-user-return-26460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60364 invoked from network); 27 Feb 2007 18:05:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 18:05:12 -0000
Received: (qmail 12056 invoked by uid 500); 27 Feb 2007 18:05:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11210 invoked by uid 500); 27 Feb 2007 18:05:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11199 invoked by uid 99); 27 Feb 2007 18:05:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 10:05:12 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.184.231 as permitted sender)
Received: from [64.233.184.231] (HELO wr-out-0506.google.com) (64.233.184.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 10:05:01 -0800
Received: by wr-out-0506.google.com with SMTP id 68so2061677wra
        for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 10:04:40 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=TUipca/DOxG6YEa61/T8Z/aplUVY2+YzkSZ/V8GnDfmDg46d9uEkSJ8MfNESHGbMfEZ3m/ERMyHDULZYliEEsdFe6L6+O2wJYyLV65p+qc+0iUCZV+rCKVuGr7n/m9RtTNcpIWiqZfUUG3xHnJNjasDMnrDJkTdunNImg7++8Sc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=IXlY1P834G/N6LNFro8zxOepd0n00UJoInbWBj2igvkaQdk8TwWWHBEpIm81VhYE3fFdbc2S2fn2Agy0Ou3Lx1TPnewG4Htm9j3HT+1zGvuUXtsn6kL3cUrL+8G0Sn16/GO16QzxE9ONTUXiRa8+TmjYbk0EGiWaVZFIgLKM/f0=
Received: by 10.114.157.1 with SMTP id f1mr427371wae.1172599473266;
        Tue, 27 Feb 2007 10:04:33 -0800 (PST)
Received: by 10.114.58.3 with HTTP; Tue, 27 Feb 2007 10:04:33 -0800 (PST)
Message-ID: <359a92830702271004i3e4244c9q8676b21b0154102a@mail.gmail.com>
Date: Tue, 27 Feb 2007 13:04:33 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Soliciting Design Thoughts on Date Searching
In-Reply-To: <ae6f38f60702270959q405a0ab9p208a306577c497b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18057_16328118.1172599473197"
References: <ae6f38f60702270959q405a0ab9p208a306577c497b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_18057_16328118.1172599473197
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

If you search the mailing list archive for 'date', you'll find a wealth of
discussion on this topic. Also, try DateTools, DateRange, etc.

http://www.gossamer-threads.com/lists/lucene/java-user/


Erick

On 2/27/07, Walt Stoneburner <walt.stoneburner@gmail.com> wrote:
>
> I've been asked if it's possible to search on dates within a document.
> The high level goal is to index a number of documents which mention
> specific dates, and then perform a broad query for documents that
> mention dates within a certain time period.
>
> In thinking about how to go about solving this problem, I would figure
> one would need a filter to extract all the date formats and store them
> in a separate field, perhaps as a list.
>
> Has anyone done something like this with Lucene, or perhaps could give
> me some gentle design issues / recommendations for consideration so
> that I don't paint myself into a corner later?
>
> Thanks,
> -Walt Stoneburner
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_18057_16328118.1172599473197--

From java-user-return-26461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 18:14:21 2007
Return-Path: <java-user-return-26461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64253 invoked from network); 27 Feb 2007 18:14:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 18:14:18 -0000
Received: (qmail 29741 invoked by uid 500); 27 Feb 2007 18:14:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29493 invoked by uid 500); 27 Feb 2007 18:14:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29482 invoked by uid 99); 27 Feb 2007 18:14:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 10:14:19 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.184.226 as permitted sender)
Received: from [64.233.184.226] (HELO wr-out-0506.google.com) (64.233.184.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 10:14:08 -0800
Received: by wr-out-0506.google.com with SMTP id 68so2065696wra
        for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 10:13:47 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NurPNdc91tlO6fHjE60CS96Ov42V3lwNIChZX2Edb26qRKHjJE8e8MNWDECRMkUsuy6oi5MFBvg88ZuPqJnn2hmcG6GRf4+RqzvkGq8XsjtS8hXMK7Qy7bMEQ+RSB1NGLsTlfzcAKWpq88Fw7xdsnvL+QWc5q0Euj2NZAQZLvoE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Ouvg9khQ98bqyJyl7N+fb7GxoSjS/8MXwP9mPObWdh6aQPP3ww0SB1Nt69dbNr/Xo8pxzhcwF/85GLK3atIO8LjnaMgUoiPeZZwKhjryyclHqUf59VBh2opxr6v9zicCgvO8MlTBgTUJh9UutCgGLVYbeaca/0z/EWgi3KkMpu8=
Received: by 10.115.47.1 with SMTP id z1mr2678517waj.1172600026072;
        Tue, 27 Feb 2007 10:13:46 -0800 (PST)
Received: by 10.114.58.3 with HTTP; Tue, 27 Feb 2007 10:13:45 -0800 (PST)
Message-ID: <359a92830702271013v6accdac8r72b0ea9e8304e929@mail.gmail.com>
Date: Tue, 27 Feb 2007 13:13:45 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: indexing and searching the document title question
In-Reply-To: <8447493.1811172599175957.JavaMail.root@localhost.localdomain>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18317_13577111.1172600025853"
References: <28958965.1791172592787148.JavaMail.root@localhost.localdomain>
	 <8447493.1811172599175957.JavaMail.root@localhost.localdomain>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_18317_13577111.1172600025853
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You've probably got it right. But I'd add a couple of things....

1> by using the correct analyzer at index and query time, the
casing will be taken care of for you.

2> you don't want UN_TOKENIZED for fields you search on
in general because there's no parsing. So if you indexed
"This is a String", searching on "This" or "this" wouldn't match.

3> In your code fragment, you didn't show what Analyzer you
use. This is way more important than you think.

4> get a copy of Luke (google lucene luke). It'll let you examine
your index and save you a world of hurt. There have been some
very nice improvements lately along with 2.1 compatability.

5> If you want searches and indexing to use different analyzers
on different fields, see PerFieldAnalyzerWrapper.

6> You'll probably find yourself storing the same data multiple
times, once for searching and once for displaying. So you'll search
on the lowercased, indexed field and display the UN_TOKENIZED
version since it'll retain the capitalization.

7> I think your underlying problem is that the syntax of the search
isn't correct. You're really searching on
NAME:color
defaultfield:me
defaultfield:mine

You want something like +NAME:color +NAME:me +NAME:mine

Best
Erick

On 2/27/07, Phillip Rhodes <spamsucks@rhoderunner.com> wrote:
>
> Hi,
> According to the FAQ, by indexing the title of the document and performing
> a search against the shorter field will automatically give it a higher
> weight than matches against the document content.  That is what I am trying
> to accomplish with a "NAME" field.  If someone enters a close match of the
> name of a document (example Names: "Color Me Mine" ,"Pittsburgh and Its
> Countryside"), I want that document to get a hit.  The search is user
> entered, so I want it to be case-insensitive.  I also don't want it to have
> to be an exact match.  Search terms such as "Pittsburgh Countryside" should
> match up against a name of "Pittsburgh and Its Countryside".
>
>
> Here I am adding the name field to my document:
> String value= "Color Me Mine";
> document.add(new Field("NAME", value, Field.Store.YES,
>                                 Field.Index.TOKENIZED));
>
> Performing a search:
> NAME:color me mine ->returns no results
> NAME:color -> returns the document
>
> I tried indexing the document without the value tokenized:
> document.add(new Field("NAME", value, Field.Store.YES,
>                                 Field.Index.UN_TOKENIZED));
>
> This caused the search to be case sensitive.
>
> I am about to modify my indexing/searching code to use a secondary field,
> "name_lowercase", this field would of course contain the name of the object
> in lowercase and I would lowercase my search terms in I construct my
> TermQuery for this field.
>
> Is this a valid approach, or am I missing something?
>
> Thanks!
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_18317_13577111.1172600025853--

From java-user-return-26462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 18:18:24 2007
Return-Path: <java-user-return-26462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67020 invoked from network); 27 Feb 2007 18:18:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 18:18:23 -0000
Received: (qmail 43239 invoked by uid 500); 27 Feb 2007 18:18:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43211 invoked by uid 500); 27 Feb 2007 18:18:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43200 invoked by uid 99); 27 Feb 2007 18:18:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 10:18:24 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of aarnone@rightnow.com designates 69.145.86.37 as permitted sender)
Received: from [69.145.86.37] (HELO rnt-boz-0203.rightnow.com) (69.145.86.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 10:18:13 -0800
Received: from EVS2.corp.rightnow.com ([172.22.1.206]) by rnt-boz-0203.rightnow.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 27 Feb 2007 11:17:52 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C75A9B.9847E19E"
Subject: document field updates
Date: Tue, 27 Feb 2007 11:17:51 -0700
Message-ID: <25E214935D7C0342B91631BC43467D8D76F1DE@EVS2.corp.rightnow.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: document field updates
Thread-Index: Acdam5gAiI8yITvKSu23y3bzMHV8AQ==
From: "Arnone, Anthony" <aarnone@rightnow.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 27 Feb 2007 18:17:52.0592 (UTC) FILETIME=[985B9D00:01C75A9B]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C75A9B.9847E19E
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

I know this has been asked before, but I'd like to ask once more for =
peace of mind.

=20

Is there a way to do single field inserts/updates without deleing and =
reinserting a document?

=20

If the answer is no, what exactly would be entailed in adding this =
functionality, or, better yet, is this planned for a future release of =
Lucene (2.0+)? Essentially, how heinous would it be to reach way into =
the guts of Lucene to make this a reality? Also, would this even be an =
efficient operation, or would it require an optimize operation to make =
searching perform well?

=20

=20

Thanks for your patience (and understanding),

Anthony Arnone


------_=_NextPart_001_01C75A9B.9847E19E--

From java-user-return-26463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 18:22:05 2007
Return-Path: <java-user-return-26463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68208 invoked from network); 27 Feb 2007 18:22:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 18:22:04 -0000
Received: (qmail 51357 invoked by uid 500); 27 Feb 2007 18:22:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51330 invoked by uid 500); 27 Feb 2007 18:22:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51319 invoked by uid 99); 27 Feb 2007 18:22:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 10:22:05 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mbarbarelli@gmail.com designates 209.85.132.245 as permitted sender)
Received: from [209.85.132.245] (HELO an-out-0708.google.com) (209.85.132.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 10:21:54 -0800
Received: by an-out-0708.google.com with SMTP id c3so1139344ana
        for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 10:21:33 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Qshdp/Yldj0SeUHgxF1VzRNyBNZxm5jWEBVB3WddxJYWD2kLInTwFB2iQe+pJAVlvZasFR+X7HKkHyJKkuHw/Z936icGJMEhzpuhwthl3psLdR8eez8H9nBRxC7OgBL0Wi5UGWcd1RVdEXkyJp7U45f2d89BSYXZuChuSFI1T/Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=k5p0GNtSmAwwtf7yN1YPO3YFrVyOkbPx7pwQzA3RVULKFLR51iY2MTcz0lfl08gpGm6yijbzquZz0NGiZpQ5CU1822IhNeDmjYZCFw+1uEu4eyNj45NOE5WlQyTBI2HMpisi2tjcMpiqHHdms/7QreHNcJE0+zSqC/Fj4uWxYsA=
Received: by 10.100.107.2 with SMTP id f2mr2108297anc.1172600493351;
        Tue, 27 Feb 2007 10:21:33 -0800 (PST)
Received: by 10.100.133.2 with HTTP; Tue, 27 Feb 2007 10:21:33 -0800 (PST)
Message-ID: <a258c0620702271021q6079bb4am60ce57c8a7b43cc5@mail.gmail.com>
Date: Tue, 27 Feb 2007 10:21:33 -0800
From: "Michael Barbarelli" <mbarbarelli@gmail.com>
To: java-user@lucene.apache.org
Subject: Fwd: Unable to retreive 2/13 field values
In-Reply-To: <a258c0620702270718w6f387d36i6ea0875a850a55b3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3198_11958567.1172600493323"
References: <a258c0620702270718w6f387d36i6ea0875a850a55b3@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3198_11958567.1172600493323
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello.  I'm using Lucene.NET, but would like to pose the question here in
the Java group since I think the collective expertise here is still valid.
Hope you don't mind.

After indexing data from an Oracle DB using the standard analyzer, I am
using Luke (standardanalyzer) to query at the moment.  Everything works
great, except that for some reason, I'm unable to retrieve any values from
two of the thirteen fields I am indexing, per document.   The fields in
question are "VAT_reg" and "status_desc".  I can see that the data is there
in the index, and I have tried every possible query syntax to retrieve hits
with those values. Nothing seems to work.

            // indexing code

            Document doc = new Document();

            doc.Add(Field.Keyword("rec_id",entity_id.Trim()));
            doc.Add(Field.Text("company_name",entity_name.Trim()));
            doc.Add(Field.Text("VAT_reg",VAT_reg.Trim()));
            doc.Add(Field.Text("add_line1",add_line1.Trim()));
            doc.Add(Field.Text("add_line2",add_line2.Trim()));
            doc.Add(Field.Text("add_line3",add_line3.Trim()));
            doc.Add(Field.Text("add_line4",add_line4.Trim()));
            doc.Add(Field.Text("add_line5",add_line5.Trim()));
            doc.Add(Field.Text("add_line6",add_line6.Trim()));
            doc.Add(Field.Text("country_iso",country_iso.Trim()));
            doc.Add(Field.Text("status_desc",status_desc.Trim()));
            doc.Add(Field.Text("firstname",firstname.Trim()));
            doc.Add(Field.Text("lastname",lastname.Trim()));

            writer.AddDocument(doc);

Valid VAT_Reg values are:

GB821628930  (+VAT_reg:GB* doesn't work)
N/A
FR67421715731

Valid Status_desc values Are:

Live                 (+status_desc:Live doesn't work)
Refer To Buyer
In Progress

Any ideas as to why I cannot retrieve the info in these two fields?  Many
thanks in advance.

------=_Part_3198_11958567.1172600493323--

From java-user-return-26464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 18:25:56 2007
Return-Path: <java-user-return-26464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69769 invoked from network); 27 Feb 2007 18:25:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 18:25:54 -0000
Received: (qmail 60922 invoked by uid 500); 27 Feb 2007 18:25:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60889 invoked by uid 500); 27 Feb 2007 18:25:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60863 invoked by uid 99); 27 Feb 2007 18:25:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 10:25:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [198.144.201.51] (HELO esseff.org) (198.144.201.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 10:25:39 -0800
Received: from localhost (localhost [127.0.0.1])
	by esseff.org (Postfix) with ESMTP id DC1905ECA6F
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 10:27:20 -0800 (PST)
X-Quarantine-ID: <oE3S1utA6G7q>
X-Virus-Scanned: amavisd-new at esseff.org
Received: from esseff.org ([127.0.0.1])
	by localhost (esseff.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id oE3S1utA6G7q for <java-user@lucene.apache.org>;
	Tue, 27 Feb 2007 10:27:13 -0800 (PST)
Received: from professorville.windows.esseff.org (professorville.windows.esseff.org [10.0.1.16])
	by esseff.org (Postfix) with ESMTP id 905085ECA0A
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 10:27:13 -0800 (PST)
Subject: RE: document field updates
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Content-class: urn:content-classes:message
Date: Tue, 27 Feb 2007 10:25:08 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Message-ID: <392521EA2692A2418DF48C331E61E32506ABF7@professorville.windows.esseff.org>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: document field updates
Thread-Index: Acdam5gAiI8yITvKSu23y3bzMHV8AQAAIjDA
References: <25E214935D7C0342B91631BC43467D8D76F1DE@EVS2.corp.rightnow.com>
From: "Steven Parkes" <steven_parkes@esseff.org>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

There are no plans to do this. It's essentially impossible, given (1)
the reverse nature of text indexes and (2) Lucene's write-once segment
architecture.

-----Original Message-----
From: Arnone, Anthony [mailto:aarnone@rightnow.com]=20
Sent: Tuesday, February 27, 2007 10:18 AM
To: java-user@lucene.apache.org
Subject: document field updates

I know this has been asked before, but I'd like to ask once more for
peace of mind.

=20

Is there a way to do single field inserts/updates without deleing and
reinserting a document?

=20

If the answer is no, what exactly would be entailed in adding this
functionality, or, better yet, is this planned for a future release of
Lucene (2.0+)? Essentially, how heinous would it be to reach way into
the guts of Lucene to make this a reality? Also, would this even be an
efficient operation, or would it require an optimize operation to make
searching perform well?

=20

=20

Thanks for your patience (and understanding),

Anthony Arnone


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 18:50:04 2007
Return-Path: <java-user-return-26465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78468 invoked from network); 27 Feb 2007 18:50:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 18:50:03 -0000
Received: (qmail 11176 invoked by uid 500); 27 Feb 2007 18:50:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11140 invoked by uid 500); 27 Feb 2007 18:50:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11129 invoked by uid 99); 27 Feb 2007 18:50:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 10:50:04 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mrs.nospam@gmail.com designates 64.233.184.230 as permitted sender)
Received: from [64.233.184.230] (HELO wr-out-0506.google.com) (64.233.184.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 10:49:52 -0800
Received: by wr-out-0506.google.com with SMTP id 68so2080968wra
        for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 10:49:31 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Xi64ZUHUMEZQtcPbHuJvQ0WLW0q2J/IZzD+3qqfSTeCuxxWmUwN9EhOhVKxEmJl+nLoebJtYbtXfrRlCLI4zFVpquoUrrTvYfVNzisFC8s9FMryg62blnuFle4h83ZV3Hbf2ZQW7CmhrU+/EnbGpyO7X3as+rllMNl5EkzYtsdk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=uB9An2WFL0PMv3lDW0SfM8cLkbSyJB7KCLRFinx2RqHGkDRIxbtxlCx6QxNgzmSnvx5pCHKHguX5Et/IHHE3Fg1IanFxkl5tPObdBUtQBA4MVBmV6DdBPF8ao4f3QTJWAiD9ZULRevbC5lMMkJqaNJaeXfxvOuqP/ibE5OgJxso=
Received: by 10.114.182.1 with SMTP id e1mr510490waf.1172602162776;
        Tue, 27 Feb 2007 10:49:22 -0800 (PST)
Received: by 10.114.195.10 with HTTP; Tue, 27 Feb 2007 10:49:22 -0800 (PST)
Message-ID: <bd818c7b0702271049u3dd26012meab3bec5d5bc0829@mail.gmail.com>
Date: Tue, 27 Feb 2007 13:49:22 -0500
From: "no spam" <mrs.nospam@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: updating index
In-Reply-To: <OF82A22A82.39E67B2F-ON8825728F.002A733C-8825728F.002AAD88@il.ibm.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16784_12716748.1172602162714"
References: <359a92830702250705g3bef1f46rf8b20a957f772193@mail.gmail.com>
	 <OF82A22A82.39E67B2F-ON8825728F.002A733C-8825728F.002AAD88@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_16784_12716748.1172602162714
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yes correct, I'll be using the new updateDocument() api call!

Erick thanks for correcting my poor use of termdocs :)

On 2/27/07, Doron Cohen <DORONC@il.ibm.com> wrote:
>
> "Erick Erickson" <erickerickson@gmail.com> wrote on 25/02/2007 07:05:21:
>
> > Yes, I'm pretty sure you have to index the field (UN_TOKENIZED) to be
> able
> > to fetch it with TermDocs/TermEnum! The loop I posted works like
> this....
>
> Once indexing the database_id field this way, also the newly added
> API IndexWriter.updateDocument() may be useful.
>
>

------=_Part_16784_12716748.1172602162714--

From java-user-return-26466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 18:59:14 2007
Return-Path: <java-user-return-26466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81125 invoked from network); 27 Feb 2007 18:59:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 18:59:13 -0000
Received: (qmail 36046 invoked by uid 500); 27 Feb 2007 18:59:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36013 invoked by uid 500); 27 Feb 2007 18:59:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36002 invoked by uid 99); 27 Feb 2007 18:59:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 10:59:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.217] (HELO web26006.mail.ukl.yahoo.com) (217.12.10.217)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 27 Feb 2007 10:59:01 -0800
Received: (qmail 16149 invoked by uid 60001); 27 Feb 2007 18:58:38 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=jLl4mduX1BmEO+dQIp/mF7RF84UwWdg+GxJcln2UJXykXSMV8gTds0OnZHcl2I4gQSUrgPF7P2tcTU2kaLFEFLH6SCjO82YdlNG5CIm1qaeQBbY+VUwkNSa7mmZGEHI4g393IDKA1WQJer9BD9aJfDIjOHRVwXCtoCkrlQG4UYM=;
X-YMail-OSG: cODuEbcVM1k3gHMZ8yebMc9we7NSopT3N__YCn31QCmrXiVRmjH.7gRo6QCeDn2vVs_Ltmld_StaNCnmLAcIEqDATbamiRaLej7X2DlCg3SPvASXjz_0qnhM6_OIBi3Be9dcAoOXy1Fd
Received: from [193.36.230.96] by web26006.mail.ukl.yahoo.com via HTTP; Tue, 27 Feb 2007 18:58:38 GMT
X-Mailer: YahooMailRC/368.8 YahooMailWebService/0.6.132.8
Date: Tue, 27 Feb 2007 18:58:38 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Highlighting issues
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <735144.14393.qm@web26006.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

This snippet from the Highlighter JUnit test should reveal the solution:=0A=
=0A=0A    public void testFieldSpecificHighlighting() throws IOException, P=
arseException=0A    {=0A        String docMainText=3D"fred is one of the pe=
ople";=0A        QueryParser parser=3Dnew QueryParser(FIELD_NAME,analyzer);=
=0A        Query query=3Dparser.parse("fred category:people");=0A        =
=0A        //highlighting respects fieldnames used in query=0A        Query=
Scorer fieldSpecificScorer=3Dnew QueryScorer(query, "contents");=0A        =
Highlighter fieldSpecificHighlighter =3D=0A            new Highlighter(new =
SimpleHTMLFormatter(),fieldSpecificScorer);=0A        fieldSpecificHighligh=
ter.setTextFragmenter(new NullFragmenter());=0A        String result=3Dfiel=
dSpecificHighlighter.getBestFragment(analyzer,FIELD_NAME,docMainText);=0A  =
      assertEquals("Should match",result,"<B>fred</B> is one of the people"=
);=0A        =0A        //highlighting does not respect fieldnames used in =
query=0A        QueryScorer fieldInSpecificScorer=3Dnew QueryScorer(query);=
=0A        Highlighter fieldInSpecificHighlighter =3D=0A            new Hig=
hlighter(new SimpleHTMLFormatter(),fieldInSpecificScorer);=0A        fieldI=
nSpecificHighlighter.setTextFragmenter(new NullFragmenter());=0A        res=
ult=3DfieldInSpecificHighlighter.getBestFragment(analyzer,FIELD_NAME,docMai=
nText);=0A        assertEquals("Should match",result,"<B>fred</B> is one of=
 the <B>people</B>");        =0A        =0A        reader.close();        =
=0A    }=0A=0ACheers=0AMark=0A=0A=0A----- Original Message ----=0AFrom: mor=
aleslos <moraleslos@hotmail.com>=0ATo: java-user@lucene.apache.org=0ASent: =
Tuesday, 27 February, 2007 5:22:02 PM=0ASubject: Highlighting issues=0A=0A=
=0AIn my search query I have two fields to search, a metadata field and the=
=0Aactual contents. The metadata field is just an enum containing FIRST and=
=0ALAST. Here is an example search query:=0A=0AContent:"Barry Bonds" and Me=
tadata:FIRST=0A=0A=0AI have Lucene highlight the hits like this:=0A=0A...=
=0AgetBestFragment(standardAnalyzer, "Content", content);=0A...=0A=0A=0ANow=
 I would only expect the highlighted text to show the key words Barry=0ABon=
ds but instead some of the highlighted text I get back actually=0Ahighlight=
s the enum FIRST. For example, one highlighted result is this:=0A**********=
**********************************=0A...attempting to slide into <p>first</=
p> base...=0A********************************************=0A=0AThe above re=
sult is not what I had in mind. Any ideas on why the highlighter=0Ais highl=
ighting my enum field and not only my keywords from the content=0Afield? Th=
anks in advance!=0A=0A-los =0A-- =0AView this message in context: http://ww=
w.nabble.com/Highlighting-issues-tf3302760.html#a9187114=0ASent from the Lu=
cene - Java Users mailing list archive at Nabble.com.=0A=0A=0A-------------=
--------------------------------------------------------=0ATo unsubscribe, =
e-mail: java-user-unsubscribe@lucene.apache.org=0AFor additional commands, =
e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A=0A=0A=0A=09=09=0A_____=
______________________________________________________ =0AAll New Yahoo! Ma=
il =96 Tired of unwanted email come-ons? Let our SpamGuard protect you. htt=
p://uk.docs.yahoo.com/nowyoucan.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 19:10:18 2007
Return-Path: <java-user-return-26467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84918 invoked from network); 27 Feb 2007 19:10:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 19:10:18 -0000
Received: (qmail 61129 invoked by uid 500); 27 Feb 2007 19:10:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61104 invoked by uid 500); 27 Feb 2007 19:10:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61093 invoked by uid 99); 27 Feb 2007 19:10:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 11:10:18 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 11:10:07 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 5CFE85B771; Tue, 27 Feb 2007 11:09:46 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 531517F403
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 11:09:46 -0800 (PST)
Date: Tue, 27 Feb 2007 11:09:46 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: recovering an index from RAM disk.
In-Reply-To: <1172575532.8469.10.camel@it-d-mspamer>
Message-ID: <Pine.LNX.4.58.0702271108590.16565@hal.rescomp.berkeley.edu>
References: <1172575532.8469.10.camel@it-d-mspamer>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


IndeexWriter has an addIndexes method which takes in a directory ... so
open a new IndexWRiter pointed at the FSDirectory you want to write to and
add your RAMDirectory to it.

: Date: Tue, 27 Feb 2007 11:25:32 +0000
: From: Martin Spamer <mspamer@ebuyer.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: recovering an index from RAM disk.
:
:
: I generate my index to the file system and load that index into a
: RAMDirectory for speed.  If my indexer fails the directory based index
: can be left in an inadequate state for my needs.  I therefore wish to
: flush the current index from the RAMDirectory back to the File system.
: The RAMDirectory class doesn't seem to support this feature.  Is this
: possible and can anybody give me some pointers ?
:
:
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 19:14:45 2007
Return-Path: <java-user-return-26468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86758 invoked from network); 27 Feb 2007 19:14:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 19:14:44 -0000
Received: (qmail 73631 invoked by uid 500); 27 Feb 2007 19:14:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73606 invoked by uid 500); 27 Feb 2007 19:14:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73566 invoked by uid 99); 27 Feb 2007 19:14:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 11:14:13 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mrs.nospam@gmail.com designates 64.233.184.237 as permitted sender)
Received: from [64.233.184.237] (HELO wr-out-0506.google.com) (64.233.184.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 11:14:01 -0800
Received: by wr-out-0506.google.com with SMTP id 68so2090886wra
        for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 11:13:41 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=kgLXepRMMZSRXr7ExZBMaB40YZvQlNKPABxtlcOYISiKL35COfue/4GHw9Fx4Dct/rS8wZKPHQXOOapL+vaPqt3h1cEixVoPGB1ItTwkoxjonPJCotR7MkJt3IyiKV5UCzgqEVhnq0Zfzf+4cL+XN+pqloXefIGt8XyI7Ax7AzU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=BPkmvBYA8cH2dr9kbJ9rwR+hwetLjpoM7iyxgraNl/FPjBh/0IJWX3x6quP5R1t4zJAU5YTbFETyAd9iZtXLhrq/PLMjTzH3tWBOIVtGqlSu+1NrG6JJ1zzUBTWP+f8WnB3R59aX10C2WTnIaN06ZUHYZdCmblkt4mYaLoWKJTU=
Received: by 10.114.25.3 with SMTP id 3mr1905792way.1172603563377;
        Tue, 27 Feb 2007 11:12:43 -0800 (PST)
Received: by 10.114.195.10 with HTTP; Tue, 27 Feb 2007 11:12:43 -0800 (PST)
Message-ID: <bd818c7b0702271112r179ef09egafd56a95618bd6c3@mail.gmail.com>
Date: Tue, 27 Feb 2007 14:12:43 -0500
From: "no spam" <mrs.nospam@gmail.com>
To: lucene <java-user@lucene.apache.org>
Subject: all records within distance -- small index
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17456_13497290.1172603563350"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17456_13497290.1172603563350
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I have a very small index of 500 docs with an index size of < 100k on disk
so far.  I want to whip through the docs and get only the ones within a
lat/lon within radius.  I realize this isn't how lucene wants to do things
(normally query search first) but how can I do this in an efficient manner?

Mark

------=_Part_17456_13497290.1172603563350--

From java-user-return-26469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 19:21:59 2007
Return-Path: <java-user-return-26469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91237 invoked from network); 27 Feb 2007 19:21:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 19:21:58 -0000
Received: (qmail 98814 invoked by uid 500); 27 Feb 2007 19:21:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98782 invoked by uid 500); 27 Feb 2007 19:21:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98767 invoked by uid 99); 27 Feb 2007 19:21:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 11:21:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 11:21:41 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 84E9F5B76E; Tue, 27 Feb 2007 11:21:21 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 814DF7F403
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 11:21:21 -0800 (PST)
Date: Tue, 27 Feb 2007 11:21:21 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: indexing and searching the document title question
In-Reply-To: <359a92830702271013v6accdac8r72b0ea9e8304e929@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0702271120540.16565@hal.rescomp.berkeley.edu>
References: <28958965.1791172592787148.JavaMail.root@localhost.localdomain>
  <8447493.1811172599175957.JavaMail.root@localhost.localdomain>
 <359a92830702271013v6accdac8r72b0ea9e8304e929@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: 7> I think your underlying problem is that the syntax of the search
: isn't correct. You're really searching on
: NAME:color
: defaultfield:me
: defaultfield:mine
:
: You want something like +NAME:color +NAME:me +NAME:mine

or...      NAME:"color me mine"



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 19:29:05 2007
Return-Path: <java-user-return-26470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93948 invoked from network); 27 Feb 2007 19:29:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 19:29:04 -0000
Received: (qmail 15181 invoked by uid 500); 27 Feb 2007 19:29:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15147 invoked by uid 500); 27 Feb 2007 19:29:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15136 invoked by uid 99); 27 Feb 2007 19:29:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 11:29:05 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 11:28:54 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 2CD795B76E; Tue, 27 Feb 2007 11:28:34 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 22DF67F403
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 11:28:34 -0800 (PST)
Date: Tue, 27 Feb 2007 11:28:34 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: indexing performance
In-Reply-To: <EFA2A397-9FE0-4CB8-B5C5-C28B0DB99301@gmail.com>
Message-ID: <Pine.LNX.4.58.0702271126040.16565@hal.rescomp.berkeley.edu>
References: <f514763f0702270622x2770d82cq64610fe7e9ec90fd@mail.gmail.com>
 <359a92830702270634l4512ff07jded8e215a188a796@mail.gmail.com>
 <f514763f0702270749s1e30f9d6p15f66cce5360b5e6@mail.gmail.com>
 <EFA2A397-9FE0-4CB8-B5C5-C28B0DB99301@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

:
: > I am trying to index the syslogs generated from one of my busy ftp
: > server so
: > that I can get counts specific to an user with the given time
: > frame. Since

: My immediate thought when reading this is if it really is a text
: search engine you want to use for this?

ditto ... if you aren't going to be using Lucene for anything more then
lookups by username finding yourself an extremely fast database that
doens't have the overhead of building a completley normalized index may be
a better way to go.

likewise if all you *really* need is counts per user withint buckets of
time, a 10 line app thta tails your log file and incriments in memory
counters flushing them to disk every few minutes would probably work to...


	...it's all a question of details.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 19:36:57 2007
Return-Path: <java-user-return-26471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98435 invoked from network); 27 Feb 2007 19:36:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 19:36:56 -0000
Received: (qmail 39396 invoked by uid 500); 27 Feb 2007 19:36:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39367 invoked by uid 500); 27 Feb 2007 19:36:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39356 invoked by uid 99); 27 Feb 2007 19:36:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 11:36:56 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.162.224 as permitted sender)
Received: from [64.233.162.224] (HELO nz-out-0506.google.com) (64.233.162.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 11:36:45 -0800
Received: by nz-out-0506.google.com with SMTP id i1so1609254nzh
        for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 11:36:24 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=L/y3R7j2Nz+/za8RNgYNA8g5BLdxNuqxOtBEwhM6R8a/rnUWbg8zABjj6d3jzwp4HIhA8pDC6I8AtbylrOi/0xa467GO1bmD1kM3osmRV+jB07hpwT9Z92ukbNlXtnJ73flIyJs1WoKHcdzd2RtjTwjVH6C6iFCO/s4zuN5Rqh4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=rraO1aoMvDHfAxmG0mwxwvJSx+DsR3xeVVEd941TfrJBHEoG+92+g5QOhMyM/9lhPk1PGlnEy67/OTvl0MYVQKsesHoObTh07XE2J1vDgO0nE0cSfx9klOcJ3h3pGxKZKIJWPd3Q5oQxBINgpkGtj8fYNrZVZjlBhZiURgh8dao=
Received: by 10.114.126.1 with SMTP id y1mr610214wac.1172604983951;
        Tue, 27 Feb 2007 11:36:23 -0800 (PST)
Received: by 10.114.58.3 with HTTP; Tue, 27 Feb 2007 11:36:23 -0800 (PST)
Message-ID: <359a92830702271136t443eab64p300c874fed142f32@mail.gmail.com>
Date: Tue, 27 Feb 2007 14:36:23 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: all records within distance -- small index
In-Reply-To: <bd818c7b0702271112r179ef09egafd56a95618bd6c3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20731_21197827.1172604983911"
References: <bd818c7b0702271112r179ef09egafd56a95618bd6c3@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_20731_21197827.1172604983911
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See Lucene In Action. There's an example in the book that is almost exactly
what you want, see section 6.1

Erick

On 2/27/07, no spam <mrs.nospam@gmail.com> wrote:
>
> I have a very small index of 500 docs with an index size of < 100k on disk
> so far.  I want to whip through the docs and get only the ones within a
> lat/lon within radius.  I realize this isn't how lucene wants to do things
> (normally query search first) but how can I do this in an efficient
> manner?
>
> Mark
>

------=_Part_20731_21197827.1172604983911--

From java-user-return-26472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 19:50:34 2007
Return-Path: <java-user-return-26472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5306 invoked from network); 27 Feb 2007 19:50:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 19:50:31 -0000
Received: (qmail 72136 invoked by uid 500); 27 Feb 2007 19:50:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72107 invoked by uid 500); 27 Feb 2007 19:50:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72096 invoked by uid 99); 27 Feb 2007 19:50:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 11:50:30 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.15 as permitted sender)
Received: from [80.67.18.15] (HELO smtprelay03.ispgateway.de) (80.67.18.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 11:50:17 -0800
Received: (qmail 23257 invoked from network); 27 Feb 2007 19:49:54 -0000
Received: from unknown (HELO p5496ff7e.dip.t-dialin.net) ([pbs]695637@[84.150.255.126])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay03.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 27 Feb 2007 19:49:54 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Fwd: Unable to retreive 2/13 field values
Date: Tue, 27 Feb 2007 20:51:32 +0100
User-Agent: KMail/1.8.2
References: <a258c0620702270718w6f387d36i6ea0875a850a55b3@mail.gmail.com> <a258c0620702271021q6079bb4am60ce57c8a7b43cc5@mail.gmail.com>
In-Reply-To: <a258c0620702271021q6079bb4am60ce57c8a7b43cc5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200702272051.32342@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Tuesday 27 February 2007 19:21, Michael Barbarelli wrote:

> GB821628930 =C2=A0(+VAT_reg:GB* doesn't work)

What about VAT_reg:gb*? Also see QueryParser.setLowercaseExpandedTerms()

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 19:52:58 2007
Return-Path: <java-user-return-26473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6240 invoked from network); 27 Feb 2007 19:52:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 19:52:57 -0000
Received: (qmail 78680 invoked by uid 500); 27 Feb 2007 19:52:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78650 invoked by uid 500); 27 Feb 2007 19:52:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78639 invoked by uid 99); 27 Feb 2007 19:52:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 11:52:58 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of nrichter@gmail.com designates 64.233.184.228 as permitted sender)
Received: from [64.233.184.228] (HELO wr-out-0506.google.com) (64.233.184.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 11:52:47 -0800
Received: by wr-out-0506.google.com with SMTP id 68so2106307wra
        for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 11:52:27 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=QGVQYM/rhbA74R8+yA42AxFr0yde3o6KdUgRAXbEYJAD6eQWtP+abVT8fVXoet86+NarIuKe3SQKM3nqgT9mwCAFdqd9s+8jdfKc/dwmVIsljXWUAUxykASpBlZjOMx12gUCMS/lo0COSfRMGszHPmF0wGQLKseStaXmhZIXOM8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=tH2oY53TIjIF9cLMNS+Sk8kCR+ehsbu+OyH82s6nLOPP7ezpC/+hTahoJk5g1gN8VrBaRML+43pApd66B272BSgIJ21lotd6++OFUBTu/DfdZuX+rhqvaYdIAt38g/y08hAExdQG/UcXTXoh7hMQOeuRMyWa++NsGAWMHvKqCTw=
Received: by 10.114.81.1 with SMTP id e1mr443103wab.1172605942772;
        Tue, 27 Feb 2007 11:52:22 -0800 (PST)
Received: by 10.114.184.12 with HTTP; Tue, 27 Feb 2007 11:52:22 -0800 (PST)
Message-ID: <8c9f7ec80702271152s43101cedx49add526def1049b@mail.gmail.com>
Date: Tue, 27 Feb 2007 12:52:22 -0700
From: "Neal Richter" <nrichter@gmail.com>
To: java-user@lucene.apache.org
Subject: RE: document field updates
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Steven Parkes wrote:
>There are no plans to do this. It's essentially impossible, given (1)
>the reverse nature of text indexes and (2) Lucene's write-once segment
>architecture.

What if the field is stored and unindexed?  It should be possible to
update the contents of that  in isolation.  How would that be done?

Thanks

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 19:55:05 2007
Return-Path: <java-user-return-26474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7087 invoked from network); 27 Feb 2007 19:55:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 19:55:05 -0000
Received: (qmail 83553 invoked by uid 500); 27 Feb 2007 19:55:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83514 invoked by uid 500); 27 Feb 2007 19:55:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83503 invoked by uid 99); 27 Feb 2007 19:55:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 11:55:04 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mrs.nospam@gmail.com designates 64.233.184.228 as permitted sender)
Received: from [64.233.184.228] (HELO wr-out-0506.google.com) (64.233.184.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 11:54:53 -0800
Received: by wr-out-0506.google.com with SMTP id 68so2107121wra
        for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 11:54:32 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kRtf8H6vJBB1Ls+p5HJwqUtP8IR7+ZvZbfT9gxj2AVbHTEjOagWDLcfr2ABhbGQ/MlFbKlCQiHyhoSgitm82ALCgdUDBMk2RsCO0d+rDoRGBfgRgbWZNU1ZT6dIMQg9cmqvmYNic1vIghirbYIXxVXuaHZcEo0hTCjLWxIkN2uA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=X4+YIARli/U6pKheNL2Adpo6kbTerV1H+lhfldpB5iCzGlHwv48rBCrGY4M780wbKw9VxrwnPTpJFDhEu2q6uskevGkB611M47p/LcYXjrMtffF2qwYicCwGWWAQkhz7G/uJlmPi+sEW2Yboz6E5VQusXxSlE3mbNfgIUSdBC/Y=
Received: by 10.114.46.1 with SMTP id t1mr542000wat.1172606072044;
        Tue, 27 Feb 2007 11:54:32 -0800 (PST)
Received: by 10.114.195.10 with HTTP; Tue, 27 Feb 2007 11:54:31 -0800 (PST)
Message-ID: <bd818c7b0702271154h6bcc99b3m532944d8982ce1a1@mail.gmail.com>
Date: Tue, 27 Feb 2007 14:54:31 -0500
From: "no spam" <mrs.nospam@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: all records within distance -- small index
In-Reply-To: <359a92830702271136t443eab64p300c874fed142f32@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18692_18540931.1172606071877"
References: <bd818c7b0702271112r179ef09egafd56a95618bd6c3@mail.gmail.com>
	 <359a92830702271136t443eab64p300c874fed142f32@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_18692_18540931.1172606071877
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I do have that book (at home) ... now that I think about it I believe I
marked that page.

I've definitely learned a lot more and I need to re-parse the book :)

On 2/27/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> See Lucene In Action. There's an example in the book that is almost
> exactly
> what you want, see section 6.1
>
> Erick
>
> On 2/27/07, no spam <mrs.nospam@gmail.com> wrote:
> >
> > I have a very small index of 500 docs with an index size of < 100k on
> disk
> > so far.  I want to whip through the docs and get only the ones within a
> > lat/lon within radius.  I realize this isn't how lucene wants to do
> things
> > (normally query search first) but how can I do this in an efficient
> > manner?
> >
> > Mark
> >
>

------=_Part_18692_18540931.1172606071877--

From java-user-return-26475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 19:55:11 2007
Return-Path: <java-user-return-26475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7108 invoked from network); 27 Feb 2007 19:55:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 19:55:10 -0000
Received: (qmail 83973 invoked by uid 500); 27 Feb 2007 19:55:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83927 invoked by uid 500); 27 Feb 2007 19:55:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83852 invoked by uid 99); 27 Feb 2007 19:55:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 11:55:06 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.170.99.253] (HELO mail.authsum.com) (216.170.99.253)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 11:54:53 -0800
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.authsum.com (Postfix) with ESMTP id 4150878193
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 14:54:32 -0500 (EST)
X-Virus-Scanned: amavisd-new at 
X-Spam-Score: -3.813
X-Spam-Level: 
Received: from mail.authsum.com ([127.0.0.1])
	by localhost (mail.authsum.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id FsGVayTxotJP for <java-user@lucene.apache.org>;
	Tue, 27 Feb 2007 14:54:31 -0500 (EST)
Received: from mail.authsum.com (unknown [216.170.99.248])
	by mail.authsum.com (Postfix) with ESMTP id AD53D78190
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 14:54:31 -0500 (EST)
Message-ID: <30616660.1901172606071628.JavaMail.root@localhost.localdomain>
Date: Tue, 27 Feb 2007 14:54:31 -0500 (EST)
From: Phillip Rhodes <spamsucks@rhoderunner.com>
To: java-user@lucene.apache.org
Subject: Re: all records within distance -- small index
In-Reply-To: <bd818c7b0702271112r179ef09egafd56a95618bd6c3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Originating-IP: [209.166.180.139]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.813 tagged_above=-10 required=6.6
	tests=[ALL_TRUSTED=-1.8, AWL=0.586, BAYES_00=-2.599]

I am doing this, but for 16000+ records.

I indexed each document with the lat/long values as keywords.  I added a 1000 to each value to get it into the positive range.

I do a range query for the lat long, calculating the min/max for the long/lat from the origination point.  Don't forget to add a 1000 to your offset before you do the search.

I do all this, and just figured out today that I was indexing with a SimpleAnalyzer, searching with the StandardAnalyzer.  Will wonders ever cease?

Phillip


----- Original Message -----
From: "no spam" <mrs.nospam@gmail.com>
To: "lucene" <java-user@lucene.apache.org>
Sent: Tuesday, February 27, 2007 2:12:43 PM (GMT-0500) America/New_York
Subject: all records within distance -- small index

I have a very small index of 500 docs with an index size of < 100k on disk
so far.  I want to whip through the docs and get only the ones within a
lat/lon within radius.  I realize this isn't how lucene wants to do things
(normally query search first) but how can I do this in an efficient manner?

Mark


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 20:40:45 2007
Return-Path: <java-user-return-26476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35914 invoked from network); 27 Feb 2007 20:40:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 20:40:45 -0000
Received: (qmail 79838 invoked by uid 500); 27 Feb 2007 20:40:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79807 invoked by uid 500); 27 Feb 2007 20:40:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79796 invoked by uid 99); 27 Feb 2007 20:40:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 12:40:46 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [198.144.201.51] (HELO esseff.org) (198.144.201.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 12:40:35 -0800
Received: from localhost (localhost [127.0.0.1])
	by esseff.org (Postfix) with ESMTP id CFF4A4B71FC
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 12:42:18 -0800 (PST)
X-Quarantine-ID: <3+4vd5LJ4nSk>
X-Virus-Scanned: amavisd-new at esseff.org
Received: from esseff.org ([127.0.0.1])
	by localhost (esseff.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 3+4vd5LJ4nSk for <java-user@lucene.apache.org>;
	Tue, 27 Feb 2007 12:42:15 -0800 (PST)
Received: from professorville.windows.esseff.org (professorville.windows.esseff.org [10.0.1.16])
	by esseff.org (Postfix) with ESMTP id 01E974B71D8
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 12:42:15 -0800 (PST)
Subject: RE: document field updates
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Content-class: urn:content-classes:message
Date: Tue, 27 Feb 2007 12:40:08 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Message-ID: <392521EA2692A2418DF48C331E61E32506ABF8@professorville.windows.esseff.org>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: document field updates
Thread-Index: AcdaqOPVx9dUEV4aT0OPmpyBOVa4rwABS3eQ
References: <8c9f7ec80702271152s43101cedx49add526def1049b@mail.gmail.com>
From: "Steven Parkes" <steven_parkes@esseff.org>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

It is true that you can store more data and that will make it possible
to get it back. Storing fields (w/ or w/o indexing) allows you to pull
them back. Storing term vectors gives you something in-between nothing
and everything.

However, you're still gonna get stuck on the "update" part. Lucene does
not rewrite segments. It's fundamental to Lucene that it doesn't: from
that a lot of Lucene's concurrent nature flow.

The way I think of it is that Lucene never adds docs to segments. It
creates single doc segments and it merges segments to create bigger
segments. No where in that model is there the concept of changing
anything inside a segment once it's been created.

Could you tell a little more about why delete/reinsert is not viable for
you? A lot of people have dealt with this issue and come up with
acceptable solutions ...

-----Original Message-----
From: Neal Richter [mailto:nrichter@gmail.com]=20
Sent: Tuesday, February 27, 2007 11:52 AM
To: java-user@lucene.apache.org
Subject: RE: document field updates

Steven Parkes wrote:
>There are no plans to do this. It's essentially impossible, given (1)
>the reverse nature of text indexes and (2) Lucene's write-once segment
>architecture.

What if the field is stored and unindexed?  It should be possible to
update the contents of that  in isolation.  How would that be done?

Thanks

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 20:52:34 2007
Return-Path: <java-user-return-26477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40181 invoked from network); 27 Feb 2007 20:52:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 20:52:33 -0000
Received: (qmail 8465 invoked by uid 500); 27 Feb 2007 20:52:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8443 invoked by uid 500); 27 Feb 2007 20:52:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8432 invoked by uid 99); 27 Feb 2007 20:52:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 12:52:34 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of peterlkeegan@gmail.com designates 64.233.162.238 as permitted sender)
Received: from [64.233.162.238] (HELO nz-out-0506.google.com) (64.233.162.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 12:52:23 -0800
Received: by nz-out-0506.google.com with SMTP id i1so1627075nzh
        for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 12:52:02 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=q1Vo2fhnnVuGZ7hbKSJpsb+UqXHgJonXDPIU639KRJRUpgHz6GuxKs8twD/90HOvr6rVoliPHAgJ2ABCLSCAJsHqTsf/4CCGycZYfmdY6LIhkFurCpPYJtL6mOrYXS/pw3vy7kgmkLHuIbCta4Af2SYxGGLqCNdvy2Egoa8NN/E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=itCekkJkMd3Ve/WByuMFg2+HghdF2yhO0eM1MBXTeyTstEoZe/502WXer6IN0D9DXFScEgME6E4fqhwUvr5ngTfpfQYya61IUCtbORi40FnuFZ/UbRuIYVh9aoUTsn8F8xNK/bnvjT3Z+RU/CTnSwKoqM4AaQDDFUmsHKl4WR5Q=
Received: by 10.65.23.7 with SMTP id a7mr11449886qbj.1172609522492;
        Tue, 27 Feb 2007 12:52:02 -0800 (PST)
Received: by 10.65.155.5 with HTTP; Tue, 27 Feb 2007 12:52:02 -0800 (PST)
Message-ID: <e994873a0702271252p273e38ecn888a4137c0d7a638@mail.gmail.com>
Date: Tue, 27 Feb 2007 15:52:02 -0500
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Sorting by Score
In-Reply-To: <Pine.LNX.4.58.0602011300220.14150@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8762_19423385.1172609522343"
References: <BFF5F6DFB538074B8A3FCD685C0DBE3601241334@MERC23.na.sas.com>
	 <Pine.LNX.4.58.0602011300220.14150@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8762_19423385.1172609522343
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Suppose one wanted to use this custom rounding score comparator on all
fields and all queries. How would you get it plugged in most efficiently,
given that SortField requires a non-null field name?

Peter

On 2/1/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : I've not used the sorting code yet, but it looks like you have to
> : provide some custom ScoreDocComparator by adding a SortField using the
> : SortField(String field, SortComparatorSource comparator) constructor.
> : I'm just not certain what you should specify for the field value since
> : you really want to just round off the score.
> :
> : Could someone with more experience using the Sort API clarify whether
> : this is possible?
>
> yes, it should be possible, and yes your description of a solution sounds
> right ... the only odd thing is you'd be writting a
> SortComparatorSource/ScoreDocComparator that would be ignoring the field
> it's given, but there's nothing wrong with that.
>
> Round your number to the desired precision, then compare them, and return
> 0 if they are equal so that the secondary sort (on date in this case) can
> take affect.
>
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_8762_19423385.1172609522343--

From java-user-return-26478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 21:14:54 2007
Return-Path: <java-user-return-26478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47951 invoked from network); 27 Feb 2007 21:14:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 21:14:53 -0000
Received: (qmail 47457 invoked by uid 500); 27 Feb 2007 21:14:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47415 invoked by uid 500); 27 Feb 2007 21:14:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47404 invoked by uid 99); 27 Feb 2007 21:14:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 13:14:54 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 13:14:43 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id l1RLEGq7017290
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 23:14:16 +0200
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz with ESMTP
	 id m2rneedf; 27 Feb 2007 23:14:00 +0200
Message-ID: <45E49F24.5040408@teamware.com>
Date: Wed, 28 Feb 2007 08:14:12 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Best way to returning hits after search?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Tue, 27 Feb 2007 23:14:16 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

I am doing what I should not, i.e. iterating the Hits after a search to collect 
two ID fields from each document in Hits to pass back to the searcher along with 
the score.

The index is approx 10-15 fields per doc, and indexes mail data, which is not 
stored, as it exists elsewhere.  Each mail has a unique object ID, so that gets 
indexed as the field "contentid".

I have been looking at HitCollector, but I was wondering the best way to collect 
the contentId field and score.

In HitCollector javadoc is says that you should not use 
IndexReader.getDocument(doc) during the collection loop, but is there any 
difference between

   searcher.search(query, new HitCollector() {
            public void collect(int doc, float score) {
                bits.set(doc);
            }
       });

   iterate bitset {
     IndexReader.getDocument(doc, FieldSelector)
     saveContentId()
   }

and

   searcher.search(query, new HitCollector() {
            public void collect(int doc, float score) {
                IndexReader.getDocument(doc, FieldSelector)
                saveContentId()
            }
       });

Given that I have to read the documents to get the relevant fields, does either 
method work?

Thanks
Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 21:56:14 2007
Return-Path: <java-user-return-26479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66670 invoked from network); 27 Feb 2007 21:56:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 21:56:13 -0000
Received: (qmail 40352 invoked by uid 500); 27 Feb 2007 21:56:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40323 invoked by uid 500); 27 Feb 2007 21:56:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40310 invoked by uid 99); 27 Feb 2007 21:56:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 13:56:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.151 as permitted sender)
Received: from [195.212.29.151] (HELO mtagate2.de.ibm.com) (195.212.29.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 13:56:01 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.13.8/8.13.8) with ESMTP id l1RLtcCL055172
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 21:55:38 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.2) with ESMTP id l1RLtcqc1835250
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 22:55:38 +0100
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l1RLtcqt028922
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 22:55:38 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l1RLtchN028918
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 22:55:38 +0100
In-Reply-To: <625535.20195.qm@web60811.mail.yahoo.com>
Subject: Re: indexing norms???
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFB6A95CB0.C5425221-ON8825728F.0076FB19-8825728F.0077F457@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Tue, 27 Feb 2007 13:50:13 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 27/02/2007 23:55:37
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

* Indexing size cost - 1 byte per field per doc

* Search time memory cost - 1 byte per field per doc

* Usage - document score normalization by the doc field
  length, and a place to hold doc/field indexing time
  boosts, also applied during scoring. (more info in
  the Scoring documentation.)

* Only maintained for indexed fields.

* For fields known to be of ~constant length, or fields used just
  for filtering or date search, it makes sense to omit norms. Almost
  for sure there are more cases that I just don't think of now,
  but you get the idea.

zzzzz shalev <zzzzz_shalev@yahoo.com> wrote on 27/02/2007 02:29:41:

> can someone explain to me the norm issue that is stored in each
> field at index time for scoring, how in impacts the index size, for
> lucene 1.4.3 is it active by default. and the penalty of disabling it
>
>   much much thanks in advance
>
>
> ---------------------------------


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 22:08:21 2007
Return-Path: <java-user-return-26480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70736 invoked from network); 27 Feb 2007 22:08:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 22:08:20 -0000
Received: (qmail 66668 invoked by uid 500); 27 Feb 2007 22:08:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66641 invoked by uid 500); 27 Feb 2007 22:08:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66630 invoked by uid 99); 27 Feb 2007 22:08:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 14:08:22 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.170.99.253] (HELO mail.authsum.com) (216.170.99.253)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 14:08:10 -0800
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.authsum.com (Postfix) with ESMTP id 2362C78196
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 17:07:49 -0500 (EST)
X-Virus-Scanned: amavisd-new at 
X-Spam-Score: -3.849
X-Spam-Level: 
Received: from mail.authsum.com ([127.0.0.1])
	by localhost (mail.authsum.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id TVb8fm6IBMfQ for <java-user@lucene.apache.org>;
	Tue, 27 Feb 2007 17:07:45 -0500 (EST)
Received: from mail.authsum.com (unknown [216.170.99.248])
	by mail.authsum.com (Postfix) with ESMTP id 1D29978190
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 17:07:45 -0500 (EST)
Message-ID: <27752368.2021172614064971.JavaMail.root@localhost.localdomain>
Date: Tue, 27 Feb 2007 17:07:44 -0500 (EST)
From: Phillip Rhodes <spamsucks@rhoderunner.com>
To: java-user@lucene.apache.org
Subject: Re: indexing and searching the document title question
In-Reply-To: <31036823.2001172613802592.JavaMail.root@localhost.localdomain>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Originating-IP: [209.166.180.139]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.849 tagged_above=-10 required=6.6
	tests=[ALL_TRUSTED=-1.8, AWL=0.550, BAYES_00=-2.599]

I am confused.  I am following the faq that says indexing/searching a title=
 of a document will cause it be ranked higher.

When I do a search on the title of my document (name in my case), the docum=
ent is being returned.  But it does not get ranked higher, in fact, it gets=
 buried in the results.

I am using the StandardAnalyser on both the indexing and the searching.
I added the NAME to my document as a tokenized field.
=09=09document.add(new Field("NAME", "Color Me Mine", Field.Store.YES,
=09=09=09=09Field.Index.TOKENIZED));
My queryparser uses the StandardAnalyzer and it is building the query on th=
e correct field.  Running this query will return 127 results with the match=
ing document name at #40 in the list.
NAME:"color me mine" (CONTENTS:color CONTENTS:me CONTENTS:mine)


If I run this query (NAME:"color me mine"), I will get my one match, but no=
thing else since I am not searching the contents of the document, so I know=
 the "name" query is returning a record.


Can anyone think of anything else I can do to boost the results of a match =
on the NAME field? I tried setting a boost on the "name" query, but it didn=
't work.  The documents were not returned in any different order.
The query toString method returned:
NAME:"color me mine"^2.0 (CONTENTS:color CONTENTS:me CONTENTS:mine)

Thanks.

I am installing LUKE now...

The Name is definitely on my document:
Document<stored/uncompressed,indexed<OBJECT_ID:238173> stored/uncompressed<=
SNIPPET:Color Me Mine is a friendly place where you can create your own art=
work on the pottery piece of your ...> stored/uncompressed,indexed<ATTRACTI=
ON_ID:238173> stored/uncompressed,indexed,tokenized<NAME:Color Me Mine> sto=
red/uncompressed,indexed<OBJECT_TYPE:com.reffects.dmi.dbom.Attraction> stor=
ed/uncompressed,indexed,tokenized<CATEGORY_NAME:Arts & Entertainment> store=
d/uncompressed,indexed<CATEGORY_ID:29> stored/uncompressed,indexed<OBJECT_T=
YPE:ACTIVITY> stored/uncompressed,indexed<ATTRACTION_TYPE:A> stored/uncompr=
essed,indexed<BLUE_RIBBON:false> stored/uncompressed,indexed<CABIN_FEVER:fa=
lse> stored/uncompressed,indexed<APPALACIAN:false> stored/uncompressed,inde=
xed<WILD:false> stored/uncompressed,indexed,tokenized<REGION_NAME:Pittsburg=
h and Its Countryside> stored/uncompressed,indexed<REGION_ID:4> stored/unco=
mpressed,indexed,tokenized<CITY:PITTSBURGH> stored/uncompressed,indexed<ZIP=
_CODE:15217> stored/uncompressed,indexed<LATITUDE:1040.438167> stored/uncom=
pressed,indexed<LONGITUDE:920.078858> stored/uncompressed,indexed<HANDICAP_=
ACCESS:N> stored/uncompressed,indexed<SITE_ID:16651> stored/uncompressed,in=
dexed<SITE_ID:16501>>



----- Original Message -----
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Sent: Tuesday, February 27, 2007 1:13:45 PM (GMT-0500) America/New_York
Subject: Re: indexing and searching the document title question

You've probably got it right. But I'd add a couple of things....

1> by using the correct analyzer at index and query time, the
casing will be taken care of for you.

2> you don't want UN_TOKENIZED for fields you search on
in general because there's no parsing. So if you indexed
"This is a String", searching on "This" or "this" wouldn't match.

3> In your code fragment, you didn't show what Analyzer you
use. This is way more important than you think.

4> get a copy of Luke (google lucene luke). It'll let you examine
your index and save you a world of hurt. There have been some
very nice improvements lately along with 2.1 compatability.

5> If you want searches and indexing to use different analyzers
on different fields, see PerFieldAnalyzerWrapper.

6> You'll probably find yourself storing the same data multiple
times, once for searching and once for displaying. So you'll search
on the lowercased, indexed field and display the UN_TOKENIZED
version since it'll retain the capitalization.

7> I think your underlying problem is that the syntax of the search
isn't correct. You're really searching on
NAME:color
defaultfield:me
defaultfield:mine

You want something like +NAME:color +NAME:me +NAME:mine

Best
Erick

On 2/27/07, Phillip Rhodes <spamsucks@rhoderunner.com> wrote:
>
> Hi,
> According to the FAQ, by indexing the title of the document and performin=
g
> a search against the shorter field will automatically give it a higher
> weight than matches against the document content.  That is what I am tryi=
ng
> to accomplish with a "NAME" field.  If someone enters a close match of th=
e
> name of a document (example Names: "Color Me Mine" ,"Pittsburgh and Its
> Countryside"), I want that document to get a hit.  The search is user
> entered, so I want it to be case-insensitive.  I also don't want it to ha=
ve
> to be an exact match.  Search terms such as "Pittsburgh Countryside" shou=
ld
> match up against a name of "Pittsburgh and Its Countryside".
>
>
> Here I am adding the name field to my document:
> String value=3D "Color Me Mine";
> document.add(new Field("NAME", value, Field.Store.YES,
>                                 Field.Index.TOKENIZED));
>
> Performing a search:
> NAME:color me mine ->returns no results
> NAME:color -> returns the document
>
> I tried indexing the document without the value tokenized:
> document.add(new Field("NAME", value, Field.Store.YES,
>                                 Field.Index.UN_TOKENIZED));
>
> This caused the search to be case sensitive.
>
> I am about to modify my indexing/searching code to use a secondary field,
> "name_lowercase", this field would of course contain the name of the obje=
ct
> in lowercase and I would lowercase my search terms in I construct my
> TermQuery for this field.
>
> Is this a valid approach, or am I missing something?
>
> Thanks!
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 22:11:25 2007
Return-Path: <java-user-return-26481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71921 invoked from network); 27 Feb 2007 22:11:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 22:11:24 -0000
Received: (qmail 73874 invoked by uid 500); 27 Feb 2007 22:11:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73846 invoked by uid 500); 27 Feb 2007 22:11:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73828 invoked by uid 99); 27 Feb 2007 22:11:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 14:11:23 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of grant.ingersoll@gmail.com designates 66.249.82.239 as permitted sender)
Received: from [66.249.82.239] (HELO wx-out-0506.google.com) (66.249.82.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 14:11:10 -0800
Received: by wx-out-0506.google.com with SMTP id i29so1915981wxd
        for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 14:10:50 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=dI4eey+hq4vixqMQV8Q8yUN7HxHnax2QMRYH7LUBQ9h3kUER4TK2wiq/emBYEz0gQjvpcQwUp3Z99CFBTs24l/yDQEER2eW6DXoUs6BfnG8nQyXZEk0CXLmh24V5ri3HYlkm+w+C6pV87l0p/2fV4fgSS+LJG7mB7eieyjyJt1o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=iQs2qSSUyZzT+t/6dw8nfvpaH/TCqeivtnftKNk1Kzs/8nKZaAvqxg3JSDJGrRPwoal0h/s3n6qCm9We0nZN5V3bqJ4pu6R9i+8rcuUvXym0TA7smyFpoOve8JfOhKRd0FLLoxqYpF1wLP6jPcFm3W4fzRZ/IsctvGPWLzCXqzo=
Received: by 10.90.103.2 with SMTP id a2mr6967552agc.1172614250091;
        Tue, 27 Feb 2007 14:10:50 -0800 (PST)
Received: from ?192.168.0.2? ( [74.229.189.244])
        by mx.google.com with ESMTP id 7sm1402851wrl.2007.02.27.14.10.48;
        Tue, 27 Feb 2007 14:10:49 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <359a92830702270630r76fba4dcl9855ef6c06ca6637@mail.gmail.com>
References: <359a92830702270630r76fba4dcl9855ef6c06ca6637@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <0A099E7A-68C6-4256-A106-B5C9EF3CFFC0@gmail.com>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <grant.ingersoll@gmail.com>
Subject: Re: Lucene 2.1, using FieldSelector speeds up my app by a factor of 10+, numbers attached
Date: Tue, 27 Feb 2007 17:10:44 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Cool, Erick.  Thanks for sharing.  Actually, I would like to start a  
use case section on the wiki for just these types of contributions...

-Grant

On Feb 27, 2007, at 9:30 AM, Erick Erickson wrote:

> I thought I'd put up some numbers that may be useful for people who
> find themselves doing performance tuning and/or are just curious.
>
> See then end of this e-mail for design notes
>
> DISCLAIMER: Your results may vary. Once I figured out the
> speed-up I got by using FieldSelector, I stopped looking for
> further improvements or refining my test harness since we're now
> getting better than 3 times the design performance target. So,
> while I'm quite confident I'm seeing a *very* significant improvement,
> these numbers aren't all that precise.
>
> I'm into the performance tuning phase now, so I wrote a little test
> harness that creates a configurable number of threads firing queries
> off at my search engine with no delays, first firing off a warm-up
> query before starting any of the threads. It's a fairly simple
> measurement, but the results are pretty consistent and way better
> than "one-one thousand, two - one thousand"...
>
> This particular application returns lots summaries at a time as a
> result of a search, the default is 500. This is summary information,
> so I only return 6 fields from each document. I'm using a
> TopDocs to assemble results.
>
> Baseline QPS for returning 1,000 results 0.9 or so queries per
> second (QPS), before any tuning. This is not acceptable in our  
> app.....
>
> So I started by asking:
> What happens if I retrieve only one doc?
> What happens if I retrieve 100 docs?
> What happens if I retrieve 1000 docs?
>
> All the above require the same search effort, including sorting, so  
> the
> fact that my results were as follows lead me to scratch my head
> since I expected the time to be spent in searching and sorting. Note
> that these numbers are with default (relevance) sorting. Sorting on
> other fields costs about 0.2 QPS, so I'll ignore them.
> returning     1 doc,  33 qps
> returning  100 docs, 4.34 qps
> returning 1000 docs, 0.88 qps (ZERO.88. Less than 1)
>
> Hmmmm, sez I. This is surprising. So I commented out the document
> fetch and kludged in hard-coded responses for the data I would have
> gotten from the loaded document and got 11 QPS. So then I
> uncommented the document fetch (without FieldSelector) but still
> used fake field data and was back to 0.89 QPS. Men have been
> hung on flimsier evidence.
>
> So, I poked around and found FieldSelector, which has been
> mentioned several times on the mailing list, but I hadn't found reason
> to use it yet. It took about 1/2 hour to implement and run my first  
> test.
> Then I spent another hour realizing that I had foolishly excluded a
> couple of compressed un-indexed fields that could be loaded. If a  
> field
> can be loaded the usual way, it can be loaded with a FieldSelector.
> Sheeeesh...
>
> Anyway, here's the results of using FieldSelector to load only the
> fields I need.
> returning 1,000 docs 12.5 QPS excluding the 2 compressed fields.
>                      (just skipping them)
> returning 1,000 docs 7.14 QPS including loading the compressed
>                     fields
>
> So, I regenerated the index without compressing those two fields,
> and the result is
> returning 1,000 docs, all necessary fields, none compressed: 9 QPS
>
> The regenerated index has two fields (one an integer and one the
> title of the book) that were stored compressed and not indexed in
> the 7.14 QPS case, and stored and indexed UN_TOKENIZED in
> the 9 QPS case. No, don't ask me what I was thinking when I
> compressed a 4 digit field. I plead advancing senility.
>
> And the little moral here, one I return to repeatedly. The preliminary
> test took me maybe 3 hours to write and get the first set of
> anomalous results, which pointed me in a completely different
> direction than I expected. There's no substitute for data when
> performance tuning.
>
> Design notes:
>
> I strongly suspect that the meta-data heavy design of this index is
> the main reason for the differences I'm finding when I use
> IndexReader.document(doc, FieldSelector) rather than
> IndexReader.document(doc). I doubt (but have no evidence) that
> an index with no meta-data would get this kind of performance
> improvement.
>
> My particular application indexes 20,000+ books, some of them
> quite large (i.e. over 7,000 pages). The index approaches 8G. I
> designed it to avoid needing a database, so I store a LOT of data
> I don't search. Some of it is compressed and the meta-data is not
> indexed. The point is that in this particular application there may
> be as much data stored as indexed for each book. And extracting
> it, particularly the compressed fields (which may be quite large)
> turns out to be expensive. I haven't calculated an exact ratio of
> stored to indexed data. And, far and away the largest amount of
> meta-data (I'm guessing 90%) is irrelevant to the search results
> I'm concentrating on here. So avoiding the overhead of loading the
> unneeded meta-data is where the savings is coming from I believe.
>
> The underpinnings of this design is that I need to search lots of
> page text, but only when displaying a specific book do I care about
> things like how many pages are in each chapter, the start and end
> page of each chapter, the size of the image corresponding to each
> page, etc. I never have to search the meta-data so I store it but
> don't index it. This allows me to avoid connecting to a database,
> simplifying the application considerably.
>
> Let me add a HUGE thanks for the FieldSelector (a subset of lazy
> loading?) and the work that went into it. It's a rare pleasure  
> (actually,
> not all that rare in Lucene <G>) to find a ready-made solution to
> my problem if I'm just smart enough to look for it.
>
> Otis, Yonik, Eric et.al. Feel free to add anything from this e-mail
> to any documentation you wish if you think it'd be useful there.
>
> Best
> Erick

------------------------------------------------------
Grant Ingersoll
http://www.grantingersoll.com/
http://lucene.grantingersoll.com
http://www.paperoftheweek.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 22:21:57 2007
Return-Path: <java-user-return-26482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76946 invoked from network); 27 Feb 2007 22:21:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 22:21:56 -0000
Received: (qmail 303 invoked by uid 500); 27 Feb 2007 22:21:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 161 invoked by uid 500); 27 Feb 2007 22:21:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 150 invoked by uid 99); 27 Feb 2007 22:21:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 14:21:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 14:21:45 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id C8C0A5B76C; Tue, 27 Feb 2007 14:21:24 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id C50D77F403
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 14:21:24 -0800 (PST)
Date: Tue, 27 Feb 2007 14:21:24 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Sorting by Score
In-Reply-To: <e994873a0702271252p273e38ecn888a4137c0d7a638@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0702271414330.29182@hal.rescomp.berkeley.edu>
References: <BFF5F6DFB538074B8A3FCD685C0DBE3601241334@MERC23.na.sas.com> 
 <Pine.LNX.4.58.0602011300220.14150@hal.rescomp.berkeley.edu>
 <e994873a0702271252p273e38ecn888a4137c0d7a638@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Suppose one wanted to use this custom rounding score comparator on all
: fields and all queries. How would you get it plugged in most efficiently,
: given that SortField requires a non-null field name?

i'm not sure i understand the first part of question .. this custom
SortComparatorSource would deal only with the score, it wouldn't matter
what other fields you'd want to make SortFields on to do secondary
sorting. .. You as the client have to specify the Sort obejct when
executing the search, and you can build that Sort object up anyway you
want.

Yes the SortField class has a constructor arg for field, but
as you can see from the javadocs, it can be null in many circumstances
(consider SortFiled#FIELD_SCORE and SortField#FIELD_DOC for instance) ...
hmmm, actually i see now that SortField(String,SortComparatorSource) says
it cannot be null ... not sure if that's actually enforced or not, but
it's no bother -- all that matters is that you don't make any attempt to
use the field name in your SortComparatorSource.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 22:31:57 2007
Return-Path: <java-user-return-26483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84094 invoked from network); 27 Feb 2007 22:31:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 22:31:56 -0000
Received: (qmail 34238 invoked by uid 500); 27 Feb 2007 22:31:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34213 invoked by uid 500); 27 Feb 2007 22:31:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34202 invoked by uid 99); 27 Feb 2007 22:31:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 14:31:58 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.14 as permitted sender)
Received: from [80.67.18.14] (HELO smtprelay02.ispgateway.de) (80.67.18.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 14:31:46 -0800
Received: (qmail 5330 invoked from network); 27 Feb 2007 22:31:23 -0000
Received: from unknown (HELO p5496f970.dip.t-dialin.net) ([pbs]695637@[84.150.249.112])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 27 Feb 2007 22:31:23 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: indexing and searching the document title question
Date: Tue, 27 Feb 2007 23:33:01 +0100
User-Agent: KMail/1.8.2
References: <27752368.2021172614064971.JavaMail.root@localhost.localdomain>
In-Reply-To: <27752368.2021172614064971.JavaMail.root@localhost.localdomain>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200702272333.01610@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Tuesday 27 February 2007 23:07, Phillip Rhodes wrote:

> NAME:"color me mine"^2.0 (CONTENTS:color CONTENTS:me CONTENTS:mine)

Try a (much) higer boost like 20 or 50, does that help?

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 22:35:55 2007
Return-Path: <java-user-return-26484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87288 invoked from network); 27 Feb 2007 22:35:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 22:35:54 -0000
Received: (qmail 47143 invoked by uid 500); 27 Feb 2007 22:35:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47079 invoked by uid 500); 27 Feb 2007 22:35:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47041 invoked by uid 99); 27 Feb 2007 22:35:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 14:35:55 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [24.201.245.36] (HELO relais.videotron.ca) (24.201.245.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 14:35:43 -0800
Received: from beetext06 ([70.81.32.231]) by VL-MH-MR001.ip.videotron.ca
 (Sun Java System Messaging Server 6.2-2.05 (built Apr 28 2005))
 with ESMTP id <0JE5002GW82SEQ42@VL-MH-MR001.ip.videotron.ca> for
 java-user@lucene.apache.org; Tue, 27 Feb 2007 17:35:16 -0500 (EST)
Date: Tue, 27 Feb 2007 17:35:01 -0500
From: Jean-Francois Beaulac <jean-francois.beaulac@beetext.com>
Subject: RE: ConstantScoreQuery and MatchAllDocsQuery
In-reply-to: <Pine.LNX.4.58.0702231603370.23821@hal.rescomp.berkeley.edu>
To: java-user@lucene.apache.org
Message-id: <0JE5002GX82SEQ42@VL-MH-MR001.ip.videotron.ca>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: quoted-printable
Thread-index: AcdXqku7aVU/mf3rQ0K/EWWkcVdCjgDEZOOA
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

The existing code retrieved a TermPositionVector with =
IndexReader.getTermFreqVector(docId, field). It then extracted the terms =
for
the query and stores them in two different array.

One containing single word terms, the other containing the phrases.

For single word term it loops on the array of term and increment the =
frequency this way:

freq +=3D tpv.getTermFrequencies()[tpv.indexOf(currentTerm.text())];

For the phrase it works the same way, but of course it searches for the =
entire set of terms in the correct order.

Fast enough means that for the search query: on going for, if I have =
3000 results which consists of document with an average of 1000
words it must be able to do it under 50ms on a dual Xeon machine. With =
the TermPositionVector my best results with no load on the
server were around 3000ms.

I am still an amateur with lucene, I have to migrate an application =
which used a customized version of lucene 1.3 to 2.1. I would
really like to be able to use an unmodified version of lucene since it =
would be a lot easier to keep up to date with lucene.

I'll give a try with TermDocs.

Thanks

-----Message d'origine-----
De=A0: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20
Envoy=E9=A0: February 23, 2007 7:18 PM
=C0=A0: Lucene Users
Objet=A0: Re: ConstantScoreQuery and MatchAllDocsQuery



: I ask this because I need to return the frequency of the search terms
: with each of my results, I tried using the TermFreqVector object but
: unfortunately it was not fast enough, so I decided to modifiy lucene =
to
: be able to return the frequency the same way the score is returned by
: org.apache.lucene.search.Hits.
	...
: I started by adding public abstract int freq(); in package
: org.apache.lucene.search.Scorerabstract class, and then modified
: everyimplementation of Scorer to be able to get the frequency.

can you elaborate on:
 * how you were trying to use TermFreqVector
 * how you define "fast enough"
 * how you are now getting the freq() value in all of the Scorer =
classes?

If all you need to know is the frequency of each term in your query (and
not hte frequency of all terms in teh document) did you try using the
freq() method in the TermDocs iterator instead of the TermFreqVector
class?

using Query.extractTerms, and then getting a TermDocs instance
and iterating over those terms using seek and over the docids from your
results using skipTo should be an extremely fast way to get the freq()
info.

: It works well and fast, the only problem I have is that I did not find =
a
: way to compute the frequency in both ConstantScoreQuery.java and
: MatchAllDocsQuery.java internal scorers.

neither of those queries involve any terms, so i'm not sure what freq()
would even make sense ... "1" or "0" i would imagine.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 22:41:37 2007
Return-Path: <java-user-return-26485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88765 invoked from network); 27 Feb 2007 22:41:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 22:41:36 -0000
Received: (qmail 60253 invoked by uid 500); 27 Feb 2007 22:41:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60210 invoked by uid 500); 27 Feb 2007 22:41:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60159 invoked by uid 99); 27 Feb 2007 22:41:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 14:41:37 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.73.178.231] (HELO web60823.mail.yahoo.com) (209.73.178.231)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 27 Feb 2007 14:41:25 -0800
Received: (qmail 85235 invoked by uid 60001); 27 Feb 2007 22:41:03 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=Ctzpo/rTv6Ed0Xs6UZOiU4nOYRxW6Y5wbd0PmkFF+2Akzfqiz83v3TOvjWxKsd9e5D83+NykaWAhdnkkrHDb834Y4Y9/PafuWJKiY6/C6TEc4ka2i2orCBvKivoS7IcL3XtgZ2jl7EhGowMNajsk8x3y2b6O5eUTeu27s+gbdDw=;
X-YMail-OSG: eujmdaMVM1m87ZKZ8gmGHA5ElI.OnpIvaqTeV1AiZiz3aT5GsYKZ08Z8oiihW6UcINjFvESKFMVm3U2QxsP.TvNTiBIk8PBBx2tlciIoH7cLIrFsjWVMSKTbCqFRwnEQ5GDes56U5d5z4p2tiJDy97FLrqc-
Received: from [212.179.71.70] by web60823.mail.yahoo.com via HTTP; Tue, 27 Feb 2007 14:41:03 PST
Date: Tue, 27 Feb 2007 14:41:03 -0800 (PST)
From: zzzzz shalev <zzzzz_shalev@yahoo.com>
Subject: alternative idf and length norm impl?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1127061028-1172616063=:83069"
Content-Transfer-Encoding: 8bit
Message-ID: <434703.83069.qm@web60823.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1127061028-1172616063=:83069
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

can anyone recommend alternative impl for calculating idf and length norm impl
   
  i've heard of slope pivot (dont know what that is)
   
   
   
  once again, many thanks in advance

 
---------------------------------
Want to start your own business? Learn how on Yahoo! Small Business.
--0-1127061028-1172616063=:83069--

From java-user-return-26486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 22:44:29 2007
Return-Path: <java-user-return-26486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89800 invoked from network); 27 Feb 2007 22:44:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 22:44:28 -0000
Received: (qmail 66873 invoked by uid 500); 27 Feb 2007 22:44:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66840 invoked by uid 500); 27 Feb 2007 22:44:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66829 invoked by uid 99); 27 Feb 2007 22:44:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 14:44:30 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.155 as permitted sender)
Received: from [195.212.29.155] (HELO mtagate6.de.ibm.com) (195.212.29.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 14:44:17 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate6.de.ibm.com (8.13.8/8.13.8) with ESMTP id l1RMhtp8186430
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 22:43:55 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.2) with ESMTP id l1RMhtxd1843366
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 23:43:55 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l1RMhtAM005203
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 23:43:55 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l1RMhtZP005200
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 23:43:55 +0100
In-Reply-To: <45E49F24.5040408@teamware.com>
Subject: Re: Best way to returning hits after search?
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFF450CBAF.D9102937-ON8825728F.0078E14E-8825728F.007C741C@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Tue, 27 Feb 2007 14:39:21 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 28/02/2007 00:43:54
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

The collect() method is going to be invoked once for each document that
matches the query (having nonzero score). If the index is very large, that
may turn to be a very large number of calls. Often, search applications
only fetch additional data (doc fields) for only a small subset of the
entire set of documents matching a query - e.g. first page (0-9), second
page (10-19), etc.  But if your application is going to fetch in an
exhaustive manner, and especially for a short field like DB_ID, it
sometimes makes sense to cache in memory the entire field (its values for
all the docs), for the entire life of the index reader/searcher, and use
that cached data. The collect method can then use that cached data.

Lucene maintains and uses a field cache for sorting by fields. But (AFAIK)
this capability is not open for use for general application purposes like
the one here. You should be able to implement that yourself though. Try
searching the list for field caching for some useful discussions and
pointers -
http://www.nabble.com/forum/Search.jtp?query=fields+caching&local=y&forum=45&daterange=0&startdate=&enddate=

Doron

Antony Bowesman <adb@teamware.com> wrote on 27/02/2007 13:14:12:

> I am doing what I should not, i.e. iterating the Hits after a search
> to collect
> two ID fields from each document in Hits to pass back to the
> searcher along with
> the score.
>
> The index is approx 10-15 fields per doc, and indexes mail data, which is
not
> stored, as it exists elsewhere.  Each mail has a unique object ID,
> so that gets
> indexed as the field "contentid".
>
> I have been looking at HitCollector, but I was wondering the best
> way to collect
> the contentId field and score.
>
> In HitCollector javadoc is says that you should not use
> IndexReader.getDocument(doc) during the collection loop, but is there any

> difference between
>
>    searcher.search(query, new HitCollector() {
>             public void collect(int doc, float score) {
>                 bits.set(doc);
>             }
>        });
>
>    iterate bitset {
>      IndexReader.getDocument(doc, FieldSelector)
>      saveContentId()
>    }
>
> and
>
>    searcher.search(query, new HitCollector() {
>             public void collect(int doc, float score) {
>                 IndexReader.getDocument(doc, FieldSelector)
>                 saveContentId()
>             }
>        });
>
> Given that I have to read the documents to get the relevant fields,
> does either
> method work?
>
> Thanks
> Antony
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 23:19:26 2007
Return-Path: <java-user-return-26487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2071 invoked from network); 27 Feb 2007 23:19:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 23:19:24 -0000
Received: (qmail 24118 invoked by uid 500); 27 Feb 2007 23:19:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24093 invoked by uid 500); 27 Feb 2007 23:19:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24082 invoked by uid 99); 27 Feb 2007 23:19:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 15:19:25 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of peterlkeegan@gmail.com designates 64.233.162.229 as permitted sender)
Received: from [64.233.162.229] (HELO nz-out-0506.google.com) (64.233.162.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 15:19:14 -0800
Received: by nz-out-0506.google.com with SMTP id i1so1659199nzh
        for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 15:18:52 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tiMchhBYsMZndd3sWYPSJZ04MFjOPl0V/+RQOylGAZ/e0frdmY30ogxkMMy76P6/dGpVBfvPX9K++afI8L0Bdz5gvwWtVKCDfdSmU9dnHIsKhNe+po1MsYxEf1BbNH0WfY/KGGXUnpLfkhsbXe30PsnbDflbr4X9ATNWgvFBjyA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=W58oZ3pnGG+xZwkI7ToV34zll8GH/tJJUQ642aezYF0IWXD2X0iVcfMHIA24X2soXmzXlnFqcoMgSE0xQvwFnuO8t7ylzbz11Mo2+9Q80H8GKInQzQzdX4H3rCPESfCPVCbGmLjnnyksev5zQW6ij27rnJqc5W7/seIX71OAxX0=
Received: by 10.65.122.20 with SMTP id z20mr11666793qbm.1172618331929;
        Tue, 27 Feb 2007 15:18:51 -0800 (PST)
Received: by 10.65.155.5 with HTTP; Tue, 27 Feb 2007 15:18:51 -0800 (PST)
Message-ID: <e994873a0702271518o3d28b4ei6f6d8d852f6eb1ee@mail.gmail.com>
Date: Tue, 27 Feb 2007 18:18:51 -0500
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Sorting by Score
In-Reply-To: <Pine.LNX.4.58.0702271414330.29182@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9984_8700351.1172618331854"
References: <BFF5F6DFB538074B8A3FCD685C0DBE3601241334@MERC23.na.sas.com>
	 <Pine.LNX.4.58.0602011300220.14150@hal.rescomp.berkeley.edu>
	 <e994873a0702271252p273e38ecn888a4137c0d7a638@mail.gmail.com>
	 <Pine.LNX.4.58.0702271414330.29182@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9984_8700351.1172618331854
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm building up the Sort object for the search with 2 SortFields - first is
for the custom rounded scoring, second is for date. This Sort object is used
to construct a FieldSortedHitQueue which is used with a custom HitCollector.
And yes, this comparator ignores the field name.

> hmmm, actually i see now that SortField(String,SortComparatorSource) says
it cannot > be null ... not sure if that's actually enforced or not

The constructor doesn't complain, but FieldSortedHitQueue expects a field
name when it tries to locate the comparator from the cache:

    at org.apache.lucene.search.FieldCacheImpl$Entry.<init>(
FieldCacheImpl.java:60)
    at org.apache.lucene.search.FieldSortedHitQueue.lookup(
FieldSortedHitQueue.java:157)
    at org.apache.lucene.search.FieldSortedHitQueue.getCachedComparator(
FieldSortedHitQueue.java:185)
    at org.apache.lucene.search.FieldSortedHitQueue.<init>(
FieldSortedHitQueue.java:58)

Peter

On 2/27/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : Suppose one wanted to use this custom rounding score comparator on all
> : fields and all queries. How would you get it plugged in most
> efficiently,
> : given that SortField requires a non-null field name?
>
> i'm not sure i understand the first part of question .. this custom
> SortComparatorSource would deal only with the score, it wouldn't matter
> what other fields you'd want to make SortFields on to do secondary
> sorting. .. You as the client have to specify the Sort obejct when
> executing the search, and you can build that Sort object up anyway you
> want.
>
> Yes the SortField class has a constructor arg for field, but
> as you can see from the javadocs, it can be null in many circumstances
> (consider SortFiled#FIELD_SCORE and SortField#FIELD_DOC for instance) ...
> hmmm, actually i see now that SortField(String,SortComparatorSource) says
> it cannot be null ... not sure if that's actually enforced or not, but
> it's no bother -- all that matters is that you don't make any attempt to
> use the field name in your SortComparatorSource.
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_9984_8700351.1172618331854--

From java-user-return-26488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 23:27:50 2007
Return-Path: <java-user-return-26488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5733 invoked from network); 27 Feb 2007 23:27:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 23:27:49 -0000
Received: (qmail 43342 invoked by uid 500); 27 Feb 2007 23:27:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43316 invoked by uid 500); 27 Feb 2007 23:27:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43305 invoked by uid 99); 27 Feb 2007 23:27:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 15:27:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [72.3.240.46] (HELO s68659.istandfor.com) (72.3.240.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 15:27:39 -0800
Received: from [192.168.1.36] (pool-162-84-203-177.ny5030.east.verizon.net [162.84.203.177])
	(authenticated bits=0)
	by s68659.istandfor.com (8.12.11.20060308/8.12.11) with ESMTP id l1RNRGEN012226
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 17:27:18 -0600
Message-ID: <45E4BDDB.6000409@istandfor.com>
Date: Tue, 27 Feb 2007 18:25:15 -0500
From: Ruslan Sivak <rsivak@istandfor.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: optimizing single document searches
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I am using Lucene in a little bit weird way, instead of searching all 
the documents for a specific query, I am searching a single document for 
many specific queries. 

On a single document of 10k characters, doing about 40k searches takes 
about 5 seconds.  This is not bad, but I was wondering if I can somehow 
speed this up.  It also takes about 5 seconds to generate the 
searchTerms (which is fine, since I will do it once and cache it). 

I'm not sure what information would be needed, but my queries look 
something like this:

"Brooklyn NY"

I am currently using SpanNearQuery with a slop of 0 and inOrder of 
false.  Is there perhaps another type of Query I can use to speed things 
up?  TermQuery doesn't work since I have multiple terms, and PhraseQuery 
seems to take around the same time, and is not compatible with 
SpanNearQuery (I later merge this query with another in a SpanNearQuery). 

I can live without merging this into the SpanNearQuery, as long as I can 
find something that can do the 40k searches faster. 

Russ

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 23:40:30 2007
Return-Path: <java-user-return-26489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11633 invoked from network); 27 Feb 2007 23:40:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 23:40:29 -0000
Received: (qmail 67831 invoked by uid 500); 27 Feb 2007 23:40:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67805 invoked by uid 500); 27 Feb 2007 23:40:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67794 invoked by uid 99); 27 Feb 2007 23:40:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 15:40:31 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 15:40:19 -0800
Received: by nf-out-0910.google.com with SMTP id i2so330763nfe
        for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 15:39:58 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=aoko9NRF9hPVvtKxQcJusCItfk5KZmwCaJu3EN7vhxiYXAkpdOENav9QQPceO4ruGutVPZov6XY/GMjI/GYLu3p9mZYgOxbOPuWS2CefZMd+EhwsBx1T9IeaEVGw88XPljInH+pOLqS4T+pCsC71z4fvIjgUuZK7/jLTFy/jjas=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=mOj/n8gHEVub9VEeF5iPPiPGpcytjbT6LH+rvKVzSmp7vtC9en9+dH7L3Vl0bvcgDGz/cf/K+gWTMLRiFHMgnK5cHR5cD+1gkrkAAzVwWB9PmoeJnbyyUfq1MEkPtGEb60oLQ0Lvc6kfUCZTrK+xYmjJpOcOxtdJMEWE530d1fA=
Received: by 10.48.202.11 with SMTP id z11mr2250568nff.1172619598265;
        Tue, 27 Feb 2007 15:39:58 -0800 (PST)
Received: from ?192.168.1.3? ( [83.249.110.75])
        by mx.google.com with ESMTP id g1sm3658332nfe.2007.02.27.15.39.57;
        Tue, 27 Feb 2007 15:39:57 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <45E4BDDB.6000409@istandfor.com>
References: <45E4BDDB.6000409@istandfor.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <6725DE81-8D20-49E2-873E-FB775929CD18@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: optimizing single document searches
Date: Wed, 28 Feb 2007 00:37:55 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


28 feb 2007 kl. 00.25 skrev Ruslan Sivak:
]

> On a single document of 10k characters, doing about 40k searches  
> takes about 5 seconds.  This is not bad, but I was wondering if I  
> can somehow speed this up.

Your corpus contains only one document? Try contrib/memory, an index  
optimized for that scenario.

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 23:49:06 2007
Return-Path: <java-user-return-26490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15036 invoked from network); 27 Feb 2007 23:49:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 23:49:03 -0000
Received: (qmail 80940 invoked by uid 500); 27 Feb 2007 23:49:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80897 invoked by uid 500); 27 Feb 2007 23:49:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80886 invoked by uid 99); 27 Feb 2007 23:49:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 15:49:05 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.132.244 as permitted sender)
Received: from [209.85.132.244] (HELO an-out-0708.google.com) (209.85.132.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 15:48:54 -0800
Received: by an-out-0708.google.com with SMTP id c3so1214767ana
        for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 15:48:33 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=C11hWcju+Jg2YfmsM+SgiAYpF71+szinyWOaQfTOIfPNNsTOdjvjkP+Js/yLmcq7TT3OpOaYZqElRxN9KGhfiPlUQpB5cn4g6M5UmeSaBvqw/khDzgzMc0fdRdrxrtQm32uzIDB8DQyZBBjsYOj4erInoCOnv7CHVM7iAij1ZqI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=J/dvBGpmBZLyt/CEV6ebuBVIF3151K+NnK8jvWi2t6dlC0OYea/3898Dp+sUF+IINiX+JrNCEUmjnwpTXBG2N8nOVp7W1kE+ux1b/Pdgvhxg0mkOHQ3sKO8Utr0xPG57V2OSFqMC6QnGchNnLM4LOxtbNyQKQMSzmNumD8UjC+M=
Received: by 10.115.77.1 with SMTP id e1mr293668wal.1172620109438;
        Tue, 27 Feb 2007 15:48:29 -0800 (PST)
Received: by 10.114.58.3 with HTTP; Tue, 27 Feb 2007 15:48:29 -0800 (PST)
Message-ID: <359a92830702271548g138dee6dp23c351475176aa81@mail.gmail.com>
Date: Tue, 27 Feb 2007 18:48:29 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Sorting by Score
In-Reply-To: <e994873a0702271518o3d28b4ei6f6d8d852f6eb1ee@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27058_878303.1172620109390"
References: <BFF5F6DFB538074B8A3FCD685C0DBE3601241334@MERC23.na.sas.com>
	 <Pine.LNX.4.58.0602011300220.14150@hal.rescomp.berkeley.edu>
	 <e994873a0702271252p273e38ecn888a4137c0d7a638@mail.gmail.com>
	 <Pine.LNX.4.58.0702271414330.29182@hal.rescomp.berkeley.edu>
	 <e994873a0702271518o3d28b4ei6f6d8d852f6eb1ee@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_27058_878303.1172620109390
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This may be off base, but I've recently been in something similar.

The first part was just to iterate through the TopDocs that's available to
my and normalize the scores right in the ScoreDocs. Like this...

        for (ScoreDoc scd : this.topDocs.scoreDocs) {
            scd.score = this.getBucket(scd.score, maxScore);
        }

where getBucket is my score normalizer, and in your case it would round your
scores.


Then I constructed a Sort object with SortField.FIELD_SCORE as the first
sotrField, like this...

        Sort stuff = new Sort(
                    new SortField[] {
                        SortField.FIELD_SCORE,
                        new SortField("somefield"),
                        new SortField("someotherfield")
                    });

and passed that object to the FieldSortedHitQueue.

Erick

On 2/27/07, Peter Keegan <peterlkeegan@gmail.com> wrote:
>
> I'm building up the Sort object for the search with 2 SortFields - first
> is
> for the custom rounded scoring, second is for date. This Sort object is
> used
> to construct a FieldSortedHitQueue which is used with a custom
> HitCollector.
> And yes, this comparator ignores the field name.
>
> > hmmm, actually i see now that SortField(String,SortComparatorSource)
> says
> it cannot > be null ... not sure if that's actually enforced or not
>
> The constructor doesn't complain, but FieldSortedHitQueue expects a field
> name when it tries to locate the comparator from the cache:
>
>     at org.apache.lucene.search.FieldCacheImpl$Entry.<init>(
> FieldCacheImpl.java:60)
>     at org.apache.lucene.search.FieldSortedHitQueue.lookup(
> FieldSortedHitQueue.java:157)
>     at org.apache.lucene.search.FieldSortedHitQueue.getCachedComparator(
> FieldSortedHitQueue.java:185)
>     at org.apache.lucene.search.FieldSortedHitQueue.<init>(
> FieldSortedHitQueue.java:58)
>
> Peter
>
> On 2/27/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> >
> >
> > : Suppose one wanted to use this custom rounding score comparator on all
> > : fields and all queries. How would you get it plugged in most
> > efficiently,
> > : given that SortField requires a non-null field name?
> >
> > i'm not sure i understand the first part of question .. this custom
> > SortComparatorSource would deal only with the score, it wouldn't matter
> > what other fields you'd want to make SortFields on to do secondary
> > sorting. .. You as the client have to specify the Sort obejct when
> > executing the search, and you can build that Sort object up anyway you
> > want.
> >
> > Yes the SortField class has a constructor arg for field, but
> > as you can see from the javadocs, it can be null in many circumstances
> > (consider SortFiled#FIELD_SCORE and SortField#FIELD_DOC for instance)
> ...
> > hmmm, actually i see now that SortField(String,SortComparatorSource)
> says
> > it cannot be null ... not sure if that's actually enforced or not, but
> > it's no bother -- all that matters is that you don't make any attempt to
> > use the field name in your SortComparatorSource.
> >
> >
> > -Hoss
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_27058_878303.1172620109390--

From java-user-return-26491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 23:50:19 2007
Return-Path: <java-user-return-26491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15461 invoked from network); 27 Feb 2007 23:50:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 23:50:17 -0000
Received: (qmail 85986 invoked by uid 500); 27 Feb 2007 23:50:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85949 invoked by uid 500); 27 Feb 2007 23:50:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85938 invoked by uid 99); 27 Feb 2007 23:50:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 15:50:19 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 15:50:08 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1270987ugc
        for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 15:49:47 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=CnKZtnk4TDg+mX4W061WvgUtlrHxjxU6Pu7tsB52tXxdWziuaXQKAXvc5+SyCCgXqKJH6lUtp05nNFJ5MoAEROAOebaQQa2G38ucA3gjhqVBX3Ba4G+Z7c97hSu40OiNX+7p/YQxCzMksi3WFrsO9uMiCxn+fwkPRMv5SXamRn8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=R53ynhPBjk1rpP2MJIHRKOuipfdpia2djI3J7XLT3tG5YzhNH0dL607hwDr9JFeSzyDfglRVHgqLU8sC+ijo13a2vKfITCI2iSTlcejiLatjym+5IeEUlpFhYnOhNCNtPlEyIz+ju37SOEX4OdvCDbu4oY3/Zg332COLq6k9204=
Received: by 10.114.205.1 with SMTP id c1mr523441wag.1172620185156;
        Tue, 27 Feb 2007 15:49:45 -0800 (PST)
Received: by 10.114.58.3 with HTTP; Tue, 27 Feb 2007 15:49:45 -0800 (PST)
Message-ID: <359a92830702271549r492d417dme10c5842e1bc9ebb@mail.gmail.com>
Date: Tue, 27 Feb 2007 18:49:45 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: optimizing single document searches
In-Reply-To: <6725DE81-8D20-49E2-873E-FB775929CD18@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27082_857975.1172620185121"
References: <45E4BDDB.6000409@istandfor.com>
	 <6725DE81-8D20-49E2-873E-FB775929CD18@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_27082_857975.1172620185121
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Which is very, very cool. I wound up using it for hit counting and it
works like a charm....

On 2/27/07, karl wettin <karl.wettin@gmail.com> wrote:
>
>
> 28 feb 2007 kl. 00.25 skrev Ruslan Sivak:
> ]
>
> > On a single document of 10k characters, doing about 40k searches
> > takes about 5 seconds.  This is not bad, but I was wondering if I
> > can somehow speed this up.
>
> Your corpus contains only one document? Try contrib/memory, an index
> optimized for that scenario.
>
> --
> karl
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_27082_857975.1172620185121--

From java-user-return-26492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 27 23:57:58 2007
Return-Path: <java-user-return-26492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18142 invoked from network); 27 Feb 2007 23:57:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2007 23:57:57 -0000
Received: (qmail 3640 invoked by uid 500); 27 Feb 2007 23:57:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3613 invoked by uid 500); 27 Feb 2007 23:57:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3602 invoked by uid 99); 27 Feb 2007 23:57:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 15:57:58 -0800
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=FROM_EXCESS_BASE64
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [216.9.248.50] (HELO smtp03.bis.na.blackberry.com) (216.9.248.50)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 15:57:47 -0800
Message-ID: <1887451458-1172620619-cardhu_blackberry.rim.net-1470398416-@bwe035-cell00.bisx.prod.on.blackberry>
Reply-To: rsivak@istandfor.com
References: <45E4BDDB.6000409@istandfor.com> <6725DE81-8D20-49E2-873E-FB775929CD18@gmail.com>
In-Reply-To: <6725DE81-8D20-49E2-873E-FB775929CD18@gmail.com>
Sensitivity: Normal
Importance: Normal
To: java-user@lucene.apache.org
Subject: Re: optimizing single document searches
From: "=?UTF-8?B?UnVzcw==?=" <rsivak@istandfor.com>
Date: Tue, 27 Feb 2007 23:49:06 +0000
Content-type: text/plain
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks, I will try it tommorow... Is it significantly different from using a standard index on a ramdir?

Russ
Sent wirelessly via BlackBerry from T-Mobile.  

-----Original Message-----
From: karl wettin <karl.wettin@gmail.com>
Date: Wed, 28 Feb 2007 00:37:55 
To:java-user@lucene.apache.org
Subject: Re: optimizing single document searches


28 feb 2007 kl. 00.25 skrev Ruslan Sivak:
]

> On a single document of 10k characters, doing about 40k searches  
> takes about 5 seconds.  This is not bad, but I was wondering if I  
> can somehow speed this up.

Your corpus contains only one document? Try contrib/memory, an index  
optimized for that scenario.

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 28 00:11:55 2007
Return-Path: <java-user-return-26493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21742 invoked from network); 28 Feb 2007 00:11:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2007 00:11:54 -0000
Received: (qmail 21974 invoked by uid 500); 28 Feb 2007 00:11:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21936 invoked by uid 500); 28 Feb 2007 00:11:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21924 invoked by uid 99); 28 Feb 2007 00:11:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 16:11:56 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 16:11:44 -0800
Received: by nf-out-0910.google.com with SMTP id i2so337614nfe
        for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 16:11:23 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=el5NbsjdMoO6EAlGC2g+jd0D3xXNkkO6F6C2MG/4U3xZeacBoyXuo4fX/EIJynLD0EyT+YUDNBERZR0Tqm6fxZfo+Gles1YF7j4QGO0SaWRcgmon5p1tvCqXtdXx2kYe/Ed/zT/83LJ618zrEt0O8IBPLvcpdCnl51G3GBH3w18=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=ngHNhAIFcM7bfZKHKUpX8sLA6Q/dennT598j6N9rVQTtu0czTuynSp/s1DOq0Uieg+7WXJ+ZmiPAn5eHHMiD58NgG5pLFbwn1S9yKIfGQuL+FBe9JD9FHgaRTg/BltLxU5afqMh/COTZwRgVp4HIndKZZdOvIWtZC1GigqPrTNM=
Received: by 10.48.216.7 with SMTP id o7mr2261628nfg.1172621483014;
        Tue, 27 Feb 2007 16:11:23 -0800 (PST)
Received: from ?192.168.1.3? ( [83.249.110.75])
        by mx.google.com with ESMTP id l27sm3765688nfa.2007.02.27.16.11.22;
        Tue, 27 Feb 2007 16:11:22 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <1887451458-1172620619-cardhu_blackberry.rim.net-1470398416-@bwe035-cell00.bisx.prod.on.blackberry>
References: <45E4BDDB.6000409@istandfor.com> <6725DE81-8D20-49E2-873E-FB775929CD18@gmail.com> <1887451458-1172620619-cardhu_blackberry.rim.net-1470398416-@bwe035-cell00.bisx.prod.on.blackberry>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E43C5512-7A80-4D43-8E7A-F3533A50D9E4@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: optimizing single document searches
Date: Wed, 28 Feb 2007 01:09:20 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


28 feb 2007 kl. 00.49 skrev Russ:

> Thanks, I will try it tommorow... Is it significantly different  
> from using a standard index on a ramdir?
>

A bit different.

You can also try LUCENE-550. It has about the same speed as contrib/ 
memory but can handle multiple documents and use reader, writer and  
searcher as any other index.

-- 
karl

> Russ
> Sent wirelessly via BlackBerry from T-Mobile.
>
> -----Original Message-----
> From: karl wettin <karl.wettin@gmail.com>
> Date: Wed, 28 Feb 2007 00:37:55
> To:java-user@lucene.apache.org
> Subject: Re: optimizing single document searches
>
>
> 28 feb 2007 kl. 00.25 skrev Ruslan Sivak:
> ]
>
>> On a single document of 10k characters, doing about 40k searches
>> takes about 5 seconds.  This is not bad, but I was wondering if I
>> can somehow speed this up.
>
> Your corpus contains only one document? Try contrib/memory, an index
> optimized for that scenario.
>
> -- 
> karl
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 28 00:19:18 2007
Return-Path: <java-user-return-26494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29735 invoked from network); 28 Feb 2007 00:18:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2007 00:18:47 -0000
Received: (qmail 42194 invoked by uid 500); 28 Feb 2007 00:18:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42152 invoked by uid 500); 28 Feb 2007 00:18:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42141 invoked by uid 99); 28 Feb 2007 00:18:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 16:18:48 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=FROM_EXCESS_BASE64,MIME_BASE64_TEXT
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [216.9.248.52] (HELO smtp05.bis.na.blackberry.com) (216.9.248.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 16:18:37 -0800
Message-ID: <202736219-1172621870-cardhu_blackberry.rim.net-48713606-@bwe002-cell00.bisx.prod.on.blackberry>
Content-Transfer-Encoding: base64
Reply-To: rsivak@istandfor.com
References: <45E4BDDB.6000409@istandfor.com> <6725DE81-8D20-49E2-873E-FB775929CD18@gmail.com> <359a92830702271549r492d417dme10c5842e1bc9ebb@mail.gmail.com>
In-Reply-To: <359a92830702271549r492d417dme10c5842e1bc9ebb@mail.gmail.com>
Sensitivity: Normal
Importance: Normal
To: java-user@lucene.apache.org
Subject: Re: optimizing single document searches
From: "=?UTF-8?B?UnVzcw==?=" <rsivak@istandfor.com>
Date: Wed, 28 Feb 2007 00:01:54 +0000
Content-type: text/plain
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

SSB3aWxsIGRlZmluYXRlbGx5IGNoZWNrIGl0IG91dCB0b21tb3Jvdy4NCg0KSSBhbHNvIGZvcmdv
dCB0byBtZW50aW9uIHRoYXQgSSBhbSBub3QgaW50ZXJlc3RlZCBpbiB0aGUgaGl0cyB0aGVtc2Vs
dmVzLCBvbmx5IHdoZXRoZXIgb3Igbm90IHRoZXJlIHdhcyBhIGhpdC4gIElzIHRoZXJlIHNvbWV0
aGluZyBJIGNhbiB1c2UgdGhhdCdzIG9wdGltaXplZCBmb3IgdGhpcyBzY2VuYXJpbywgb3Igc2hv
dWxkIEkgbG9vayBpbnRvIHJld3JpdGluZyB0aGUgc2VhcmNoIG1ldGhvZCBvZiB0aGUgaW5kZXhh
cnNlYXJjaGVyPyAgQ3VycmVudGx5IEkganVzdCBjaGVjayBoaXRzLnNpemUoKS4NCg0KUnVzcw0K
U2VudCB3aXJlbGVzc2x5IHZpYSBCbGFja0JlcnJ5IGZyb20gVC1Nb2JpbGUuICANCg0KLS0tLS1P
cmlnaW5hbCBNZXNzYWdlLS0tLS0NCkZyb206ICJFcmljayBFcmlja3NvbiIgPGVyaWNrZXJpY2tz
b25AZ21haWwuY29tPg0KRGF0ZTogVHVlLCAyNyBGZWIgMjAwNyAxODo0OTo0NSANClRvOmphdmEt
dXNlckBsdWNlbmUuYXBhY2hlLm9yZw0KU3ViamVjdDogUmU6IG9wdGltaXppbmcgc2luZ2xlIGRv
Y3VtZW50IHNlYXJjaGVzDQoNCldoaWNoIGlzIHZlcnksIHZlcnkgY29vbC4gSSB3b3VuZCB1cCB1
c2luZyBpdCBmb3IgaGl0IGNvdW50aW5nIGFuZCBpdA0Kd29ya3MgbGlrZSBhIGNoYXJtLi4uLg0K
DQpPbiAyLzI3LzA3LCBrYXJsIHdldHRpbiA8a2FybC53ZXR0aW5AZ21haWwuY29tPiB3cm90ZToN
Cj4NCj4NCj4gMjggZmViIDIwMDcga2wuIDAwLjI1IHNrcmV2IFJ1c2xhbiBTaXZhazoNCj4gXQ0K
Pg0KPiA+IE9uIGEgc2luZ2xlIGRvY3VtZW50IG9mIDEwayBjaGFyYWN0ZXJzLCBkb2luZyBhYm91
dCA0MGsgc2VhcmNoZXMNCj4gPiB0YWtlcyBhYm91dCA1IHNlY29uZHMuICBUaGlzIGlzIG5vdCBi
YWQsIGJ1dCBJIHdhcyB3b25kZXJpbmcgaWYgSQ0KPiA+IGNhbiBzb21laG93IHNwZWVkIHRoaXMg
dXAuDQo+DQo+IFlvdXIgY29ycHVzIGNvbnRhaW5zIG9ubHkgb25lIGRvY3VtZW50PyBUcnkgY29u
dHJpYi9tZW1vcnksIGFuIGluZGV4DQo+IG9wdGltaXplZCBmb3IgdGhhdCBzY2VuYXJpby4NCj4N
Cj4gLS0NCj4ga2FybA0KPg0KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFp
bDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQo+IEZvciBhZGRpdGlv
bmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQo+
DQo+DQoNCg==



From java-user-return-26495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 28 01:38:45 2007
Return-Path: <java-user-return-26495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59693 invoked from network); 28 Feb 2007 01:38:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2007 01:38:44 -0000
Received: (qmail 47487 invoked by uid 500); 28 Feb 2007 01:38:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47455 invoked by uid 500); 28 Feb 2007 01:38:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47436 invoked by uid 99); 28 Feb 2007 01:38:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 17:38:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 17:38:33 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id l1S1c3Xw000467
	for <java-user@lucene.apache.org>; Wed, 28 Feb 2007 03:38:03 +0200
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz with ESMTP
	 id m2s3178r; 28 Feb 2007 03:37:00 +0200
Message-ID: <45E4DCE5.7030605@teamware.com>
Date: Wed, 28 Feb 2007 12:37:41 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Best way to returning hits after search?
References: <OFF450CBAF.D9102937-ON8825728F.0078E14E-8825728F.007C741C@il.ibm.com>
In-Reply-To: <OFF450CBAF.D9102937-ON8825728F.0078E14E-8825728F.007C741C@il.ibm.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Wed, 28 Feb 2007 03:38:03 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Doron Cohen wrote:
> The collect() method is going to be invoked once for each document that
> matches the query (having nonzero score). If the index is very large, that
> may turn to be a very large number of calls. Often, search applications
> only fetch additional data (doc fields) for only a small subset of the
> entire set of documents matching a query - e.g. first page (0-9), second
> page (10-19), etc.  But if your application is going to fetch in an
> exhaustive manner, and especially for a short field like DB_ID, it
> sometimes makes sense to cache in memory the entire field (its values for
> all the docs), for the entire life of the index reader/searcher, and use
> that cached data. The collect method can then use that cached data.

That's an excellent idea!  We cannot easily change our client implementation, so 
have to support the exhaustive retrieval for now, although I do limit the 
absolute max hits that will be returned.  We are hoping to implement paging in a 
later client version.

I'm not sure I can cache all the GUIDs though.  A GUID is 20 bytes and there are 
two that need to be cached.  The document count could be up to 100M, though in 
most cases <20M.  I am keeping a BitSet filter cache for a searcher for each 
user's mail, so I could extend that to cache all the IDs for that user and give 
that cache a shortish life and/or limit the total cache available.  That would 
really help.

I'll have a play - thanks for the input.
Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 28 04:09:37 2007
Return-Path: <java-user-return-26496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2578 invoked from network); 28 Feb 2007 04:09:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2007 04:09:36 -0000
Received: (qmail 76997 invoked by uid 500); 28 Feb 2007 04:09:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76921 invoked by uid 500); 28 Feb 2007 04:09:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76884 invoked by uid 99); 28 Feb 2007 04:09:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 20:09:37 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mrs.nospam@gmail.com designates 64.233.184.239 as permitted sender)
Received: from [64.233.184.239] (HELO wr-out-0506.google.com) (64.233.184.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 20:09:26 -0800
Received: by wr-out-0506.google.com with SMTP id 68so37962wra
        for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 20:09:05 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=N5NaShStcwsE8ziem05W66eQ5gLybhXhXubKcp0Px5ZHz2Y4Lanj2qymJWr0Y1vfBH+Y9wlCI1PIqK2eBVirC73YG70R08ju9+LuN5KHlOS9/y9OM4gvXRzsw7V94n05CR+EdxtrKoZE/5vBc4PmKAY1SLvVa3m5DWZgR938BXA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Yb332IsyGYpe+qBmiX9Zo2lmUt/eAulul2tfudHSQiW+eucbUhxMQYs2XD/E0AkpFtNUbO3Skk2q+hI5zlD8pPs9+4s1jyZ2L+XrPsRioTeuJXeZUbbKFFoyH6Y9OKOvmBw2Pfe4hPXHv4WLnmyzZpRdk3tmWs3OlqkkEpl3z2k=
Received: by 10.114.171.1 with SMTP id t1mr598382wae.1172635744752;
        Tue, 27 Feb 2007 20:09:04 -0800 (PST)
Received: by 10.114.195.10 with HTTP; Tue, 27 Feb 2007 20:09:04 -0800 (PST)
Message-ID: <bd818c7b0702272009x20234093w9d37eab039293ba7@mail.gmail.com>
Date: Tue, 27 Feb 2007 23:09:04 -0500
From: "no spam" <mrs.nospam@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: all records within distance -- small index
In-Reply-To: <30616660.1901172606071628.JavaMail.root@localhost.localdomain>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26772_23465277.1172635744465"
References: <bd818c7b0702271112r179ef09egafd56a95618bd6c3@mail.gmail.com>
	 <30616660.1901172606071628.JavaMail.root@localhost.localdomain>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26772_23465277.1172635744465
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I just dug my book out.  Chapter six shows a custom sort that implements a
SortComparatorSource combined with a TermQuery.  I like the way that works
but I guess what I really need to do is a RangeQuery as well.

I have another large index that has 1.2 million docs.  I use a query along
with a hit collector for that.  I then get the lat/lon for each doc and calc
the distance there.  I use some radian math to prevent the expensive great
circle distance first.  I guess this is more expensive than your range query
above?  I've indexed my docs with lat/lon encoded in a single field comma
separated.  I still get < 1 second search times but I know there has to be a
better way.

Don't you have to multiply your lat/lon by 1000 to preserve decimal accuracy
and then calc your offset?  Maybe it's late and I'm not thinking about this
right :)

Mark

------=_Part_26772_23465277.1172635744465--

From java-user-return-26497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 28 05:28:25 2007
Return-Path: <java-user-return-26497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21565 invoked from network); 28 Feb 2007 05:28:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2007 05:28:24 -0000
Received: (qmail 53679 invoked by uid 500); 28 Feb 2007 05:28:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53652 invoked by uid 500); 28 Feb 2007 05:28:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53641 invoked by uid 99); 28 Feb 2007 05:28:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 21:28:24 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 21:28:13 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 267BC5B76C; Tue, 27 Feb 2007 21:27:52 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 0B05C7F403
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 21:27:52 -0800 (PST)
Date: Tue, 27 Feb 2007 21:27:52 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Sorting by Score
In-Reply-To: <e994873a0702271518o3d28b4ei6f6d8d852f6eb1ee@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0702272126220.18243@hal.rescomp.berkeley.edu>
References: <BFF5F6DFB538074B8A3FCD685C0DBE3601241334@MERC23.na.sas.com> 
 <Pine.LNX.4.58.0602011300220.14150@hal.rescomp.berkeley.edu> 
 <e994873a0702271252p273e38ecn888a4137c0d7a638@mail.gmail.com> 
 <Pine.LNX.4.58.0702271414330.29182@hal.rescomp.berkeley.edu>
 <e994873a0702271518o3d28b4ei6f6d8d852f6eb1ee@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: The constructor doesn't complain, but FieldSortedHitQueue expects a field
: name when it tries to locate the comparator from the cache:

can't you pick any arbitrary "marker" field name (that's not a real field
name) and use that?


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 28 05:34:44 2007
Return-Path: <java-user-return-26498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23251 invoked from network); 28 Feb 2007 05:34:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2007 05:34:43 -0000
Received: (qmail 58860 invoked by uid 500); 28 Feb 2007 05:34:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58371 invoked by uid 500); 28 Feb 2007 05:34:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58360 invoked by uid 99); 28 Feb 2007 05:34:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 21:34:46 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 21:34:35 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id B11AF5B76C; Tue, 27 Feb 2007 21:34:14 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id AA7107F403
	for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 21:34:14 -0800 (PST)
Date: Tue, 27 Feb 2007 21:34:14 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Sorting by Score
In-Reply-To: <359a92830702271548g138dee6dp23c351475176aa81@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0702272127550.18243@hal.rescomp.berkeley.edu>
References: <BFF5F6DFB538074B8A3FCD685C0DBE3601241334@MERC23.na.sas.com> 
 <Pine.LNX.4.58.0602011300220.14150@hal.rescomp.berkeley.edu> 
 <e994873a0702271252p273e38ecn888a4137c0d7a638@mail.gmail.com> 
 <Pine.LNX.4.58.0702271414330.29182@hal.rescomp.berkeley.edu> 
 <e994873a0702271518o3d28b4ei6f6d8d852f6eb1ee@mail.gmail.com>
 <359a92830702271548g138dee6dp23c351475176aa81@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: The first part was just to iterate through the TopDocs that's available to
: my and normalize the scores right in the ScoreDocs. Like this...

Won't that be done after the Lucene does the hitcollecting/sorting? ... he
wants the "bucketing" to happen as part of hte scoring so that the
secondary sort will determine the ordering within the bucket.

(or am i missing something about your description?)




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 28 06:15:02 2007
Return-Path: <java-user-return-26499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39723 invoked from network); 28 Feb 2007 06:15:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2007 06:15:01 -0000
Received: (qmail 12676 invoked by uid 500); 28 Feb 2007 06:15:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12648 invoked by uid 500); 28 Feb 2007 06:15:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12636 invoked by uid 99); 28 Feb 2007 06:15:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 22:15:02 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of nrichter@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Feb 2007 22:14:51 -0800
Received: by ug-out-1314.google.com with SMTP id k40so38585ugc
        for <java-user@lucene.apache.org>; Tue, 27 Feb 2007 22:14:29 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=SY/xa0gkU3dKWPZSWV1V4vUmUKqZVwqUK0sii8cMzJhpUBzXJznV43frSksiSvpg6W67DbjZeRL+45TItn/NCUznsQ6WeGQ0BnCbNu4tba1ITmnBc1JNKUu9A+IO2xPOYYxEPXvLPAy2EkdfJf2CgPMYyNGGX0Wpm6+rR3tuXrM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=TXKvQucQin57hUa90BBokI3aFOfsqI2rbHTdCD/1Ytb6aZ8B++Qa2lUKildTERVKd7Lowa1EhtrZBMxTc0+AqTOWImLhHyg/xmZZFcBHfRIqTdJ7vMS/p5+kvJfluWMl6YqUtl2LpKzFOqlZopEQE7FKRGiy2xoKvkk/QhwdD2M=
Received: by 10.115.77.1 with SMTP id e1mr696373wal.1172643254763;
        Tue, 27 Feb 2007 22:14:14 -0800 (PST)
Received: by 10.114.184.12 with HTTP; Tue, 27 Feb 2007 22:14:14 -0800 (PST)
Message-ID: <8c9f7ec80702272214k72a6156bu1dd7e137ed21ba4b@mail.gmail.com>
Date: Tue, 27 Feb 2007 23:14:14 -0700
From: "Neal Richter" <nrichter@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: document field updates
In-Reply-To: <392521EA2692A2418DF48C331E61E32506ABF8@professorville.windows.esseff.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <8c9f7ec80702271152s43101cedx49add526def1049b@mail.gmail.com>
	 <392521EA2692A2418DF48C331E61E32506ABF8@professorville.windows.esseff.org>
X-Virus-Checked: Checked by ClamAV on apache.org

On 2/27/07, Steven Parkes <steven_parkes@esseff.org> wrote:
> It is true that you can store more data and that will make it possible
> to get it back. Storing fields (w/ or w/o indexing) allows you to pull
> them back. Storing term vectors gives you something in-between nothing
> and everything.

I will look into term-vectors...

> However, you're still gonna get stuck on the "update" part. Lucene does
> not rewrite segments. It's fundamental to Lucene that it doesn't: from
> that a lot of Lucene's concurrent nature flow.

Are unindexed fields stored seperately from the main inverted index?
If so then, one could implement the field value change as a delete and
re-add of just that value?

> Could you tell a little more about why delete/reinsert is not viable for
> you? A lot of people have dealt with this issue and come up with
> acceptable solutions ...

Anthony Arnone (first poster in thread) and I have been using CLucene
to change the guts of HtDig.  Here is a scenario:

We have a new term relevant to an already written document that is
newly found and we'd like to make this new term searchable.

We spider URL "foo" and index all text associated with "foo" and the
doc goes into the index.  Next we discover a link back to foo in some
other page:  <a aref="foo">beer<a/>.  What would be nice is to
incrementally add the word 'beer' to the document 'foo' (in a special
linked-text field), and all other to-be-discovered link-text without
rewriting the document (which we no longer have in memory) or
requiring a multi-index search where the linked-text field is stored
in a second index.

Note that the practical effect of the example above is much like the
adding of some new 'tag' to a document in the new world of tags.

Are you aware of some implementation of Lucene that solves this need
well with a second index for 'tags' complete with multi-index boolean
queries?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 28 13:02:37 2007
Return-Path: <java-user-return-26500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3372 invoked from network); 28 Feb 2007 13:02:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2007 13:02:37 -0000
Received: (qmail 56149 invoked by uid 500); 28 Feb 2007 13:02:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56121 invoked by uid 500); 28 Feb 2007 13:02:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56109 invoked by uid 99); 28 Feb 2007 13:02:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 05:02:36 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of peterlkeegan@gmail.com designates 64.233.162.236 as permitted sender)
Received: from [64.233.162.236] (HELO nz-out-0506.google.com) (64.233.162.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 05:02:25 -0800
Received: by nz-out-0506.google.com with SMTP id i1so128670nzh
        for <java-user@lucene.apache.org>; Wed, 28 Feb 2007 05:02:04 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=L9ysSDFFIcYB3+Y9glc4NelhIaFlX0NxBSU3FgQ2Wu8Ov+Z1YYpPklQIF/s1bpq6d7qDUBANthN03GH1zDvm6TMahGEaPqnOV/QB9OSSSDEw88ugaS+/or3K8jZNHxkmxtE3YmbN/rcDpyahQVUBQ4nOtf1ohSnbzge3Hs3RDhU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=fok5dd6FXE0qPvEBxXGYN3jSmRrFPwi753sF9S9Ngmkza60b5MWcqDL+aQY+uikP7HIiSZhYftLqJPR8XwvwTmZ/yaH/hPOyC6cRx3acvuHuB+1o0llE7s+5pT+dzasGABNEgB0yCyq7CISrmcR4sUIrVy8A5YXgw1Yo08TY0uw=
Received: by 10.65.210.18 with SMTP id m18mr935495qbq.1172667724235;
        Wed, 28 Feb 2007 05:02:04 -0800 (PST)
Received: by 10.65.155.5 with HTTP; Wed, 28 Feb 2007 05:02:04 -0800 (PST)
Message-ID: <e994873a0702280502k18ada778ic3d57af69557b6dc@mail.gmail.com>
Date: Wed, 28 Feb 2007 08:02:04 -0500
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Sorting by Score
In-Reply-To: <Pine.LNX.4.58.0702272127550.18243@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14439_23697012.1172667724186"
References: <BFF5F6DFB538074B8A3FCD685C0DBE3601241334@MERC23.na.sas.com>
	 <Pine.LNX.4.58.0602011300220.14150@hal.rescomp.berkeley.edu>
	 <e994873a0702271252p273e38ecn888a4137c0d7a638@mail.gmail.com>
	 <Pine.LNX.4.58.0702271414330.29182@hal.rescomp.berkeley.edu>
	 <e994873a0702271518o3d28b4ei6f6d8d852f6eb1ee@mail.gmail.com>
	 <359a92830702271548g138dee6dp23c351475176aa81@mail.gmail.com>
	 <Pine.LNX.4.58.0702272127550.18243@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14439_23697012.1172667724186
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>can't you pick any arbitrary "marker" field name (that's not a real field
>name) and use that?

Yes, I could. I guess you're saying that the field name doesn't matter,
except that it's used for caching the comparator, right?

>... he wants the "bucketing" to happen as part of hte scoring so that the
> secondary sort will determine the ordering within the bucket.

Yes, exactly. Couldn't I just do this rounding in the HitCollector, before
inserting it into the FieldSortedHitQueue?



On 2/28/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : The first part was just to iterate through the TopDocs that's available
> to
> : my and normalize the scores right in the ScoreDocs. Like this...
>
> Won't that be done after the Lucene does the hitcollecting/sorting? ... he
> wants the "bucketing" to happen as part of hte scoring so that the
> secondary sort will determine the ordering within the bucket.
>
> (or am i missing something about your description?)
>
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_14439_23697012.1172667724186--

From java-user-return-26501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 28 13:25:16 2007
Return-Path: <java-user-return-26501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13760 invoked from network); 28 Feb 2007 13:25:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2007 13:25:15 -0000
Received: (qmail 97738 invoked by uid 500); 28 Feb 2007 13:25:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97708 invoked by uid 500); 28 Feb 2007 13:25:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97697 invoked by uid 99); 28 Feb 2007 13:25:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 05:25:15 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.132.251 as permitted sender)
Received: from [209.85.132.251] (HELO an-out-0708.google.com) (209.85.132.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 05:25:02 -0800
Received: by an-out-0708.google.com with SMTP id c3so92535ana
        for <java-user@lucene.apache.org>; Wed, 28 Feb 2007 05:24:41 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=TjysT+p1v+y+thi+1yBJJJjVLYYkpTAGszb29A5K5smj0oC3C4E4HcOVkKBVy+dWlgd4OaOKZm04iLFwT1gJvrwTnA21g+KPUfmePAhHPgQayAoGzQv2GcONywwJw2f3F3spjtLr8NrIsEVsiHPTUADh8E4whtabD/PmeB9dVIU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GwqVPyblRQaCt1/Cb8nIoCNwMyFbynFtbwHSWnQUjwHpcIKUnkGZsMf6/RZURRpKWNNXzK94LMxu9W4jp+AjZX/vRTHSu4Q0N/HvdlWmidSJX4DTbV3eBryVWmQ3sSvqX2A+1ICGNN/dtfdGclk4mdS4n9voetQioh92XFM9ep0=
Received: by 10.115.33.1 with SMTP id l1mr704339waj.1172669077348;
        Wed, 28 Feb 2007 05:24:37 -0800 (PST)
Received: by 10.114.58.3 with HTTP; Wed, 28 Feb 2007 05:24:37 -0800 (PST)
Message-ID: <359a92830702280524j660bdafav6e668166ccfd7d6a@mail.gmail.com>
Date: Wed, 28 Feb 2007 08:24:37 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Sorting by Score
In-Reply-To: <Pine.LNX.4.58.0702272127550.18243@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_39742_9562309.1172669077233"
References: <BFF5F6DFB538074B8A3FCD685C0DBE3601241334@MERC23.na.sas.com>
	 <Pine.LNX.4.58.0602011300220.14150@hal.rescomp.berkeley.edu>
	 <e994873a0702271252p273e38ecn888a4137c0d7a638@mail.gmail.com>
	 <Pine.LNX.4.58.0702271414330.29182@hal.rescomp.berkeley.edu>
	 <e994873a0702271518o3d28b4ei6f6d8d852f6eb1ee@mail.gmail.com>
	 <359a92830702271548g138dee6dp23c351475176aa81@mail.gmail.com>
	 <Pine.LNX.4.58.0702272127550.18243@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_39742_9562309.1172669077233
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Empirically, when I insert the elements in the FieldSortedHitQueue
they get sorted according to the Sort object. The original query
that gives me a TopDocs applied
no secondary sorting, only relevancy. Since I normalized
all the scores into one of only 5 discrete values, and secondary
sorting was applied to all docs with the same score when I inserted
them in the FieldSortedHitQueue.

Now popping things of the FieldSortedHitQueue is ordered the
way I want.

You could just operate on the FieldSortedHitQueue at this point, but
I decided the rest of my code would be simpler if I stuffed them back
into the TopDocs, so there's some explanation below that you can
just skip if I've cleared things up already.....

*****************
The step I left out is moving the documents from the
FIeldSortedHitQueue back to topDocs.scoreDocs.
So the steps are as follows..

1> "bucketize" the scores. That is, go through the
TopDocs.scoreDocs and adjust each raw score into
one of my buckets. This is made easy by the
existence of topDocs.getMaxScore. TopDocs has
had no sorting other than relevancy applied so far.

2> assemble the FieldSortedHitQueue by inserting
each element from scoreDocs into it, with a suitable
Sort object, relevance is the first field (SortField.FIELD_SCORE).

3> pop the entries off the FieldSortedHitQueue, overwriting
the elements in topDocs.scoreDocs.

I left out step <3>, although I suppose you could
operate directly on the FieldSortedHitQueue.

NOTE: in my case, I just put everything back in the
scoreDocs without attempting any efficiencies. If I
needed more performance, I'd only put as many items
back as I needed to display. But as I wrote yesterday,
performance isn't an issue so there's no point. Although
I know one place to look if we need to squeeze more QPS.

How efficient this is is an open question. But it's "fast enough"
and relatively simple so I stopped looking for more
efficiencies....

Erick

On 2/28/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : The first part was just to iterate through the TopDocs that's available
> to
> : my and normalize the scores right in the ScoreDocs. Like this...
>
> Won't that be done after the Lucene does the hitcollecting/sorting? ... he
> wants the "bucketing" to happen as part of hte scoring so that the
> secondary sort will determine the ordering within the bucket.
>
> (or am i missing something about your description?)
>
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_39742_9562309.1172669077233--

From java-user-return-26502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 28 14:06:52 2007
Return-Path: <java-user-return-26502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32164 invoked from network); 28 Feb 2007 14:06:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2007 14:06:52 -0000
Received: (qmail 79872 invoked by uid 500); 28 Feb 2007 14:06:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79841 invoked by uid 500); 28 Feb 2007 14:06:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79824 invoked by uid 99); 28 Feb 2007 14:06:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 06:06:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [198.144.201.51] (HELO esseff.org) (198.144.201.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 06:06:39 -0800
Received: from localhost (localhost [127.0.0.1])
	by esseff.org (Postfix) with ESMTP id 726AD5F6501
	for <java-user@lucene.apache.org>; Wed, 28 Feb 2007 06:08:28 -0800 (PST)
X-Quarantine-ID: <G+r0Y90hnexo>
X-Virus-Scanned: amavisd-new at esseff.org
Received: from esseff.org ([127.0.0.1])
	by localhost (esseff.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id G+r0Y90hnexo for <java-user@lucene.apache.org>;
	Wed, 28 Feb 2007 06:08:24 -0800 (PST)
Received: from professorville.windows.esseff.org (professorville.windows.esseff.org [10.0.1.16])
	by esseff.org (Postfix) with ESMTP id 189755F64F6
	for <java-user@lucene.apache.org>; Wed, 28 Feb 2007 06:08:24 -0800 (PST)
Subject: RE: document field updates
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Content-class: urn:content-classes:message
Date: Wed, 28 Feb 2007 05:59:56 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Message-ID: <392521EA2692A2418DF48C331E61E32506ABFC@professorville.windows.esseff.org>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: document field updates
Thread-Index: Acda/8uA6FeAqWqeTg6UC6v4VdKBrQAQE6Cw
References: <8c9f7ec80702271152s43101cedx49add526def1049b@mail.gmail.com> <392521EA2692A2418DF48C331E61E32506ABF8@professorville.windows.esseff.org> <8c9f7ec80702272214k72a6156bu1dd7e137ed21ba4b@mail.gmail.com>
From: "Steven Parkes" <steven_parkes@esseff.org>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

	Are unindexed fields stored seperately from the main inverted
index?
	If so then, one could implement the field value change as a
delete and
	re-add of just that value?

The short answer is that won't work. Field values are stored in a
different data structure than the postings lists but docids are
consistent across all contents of a segment. Deleting something and
readding it is going to put it into a different segment which is going
to keep this from working. (Not to mention that you want the postings
lists updated if you want it to be searchable ...)

	Are you aware of some implementation of Lucene that solves this
need
	well with a second index for 'tags' complete with multi-index
boolean
	queries?

I'm pretty sure this has been done, I'm just not 100% sure where. Does
Nutch index link text? I don't know if Solr has anything like this but
if I remember correctly, Collex has tags but as far as I can tell, it's
not been open sourced (yet?)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 28 15:20:08 2007
Return-Path: <java-user-return-26503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65738 invoked from network); 28 Feb 2007 15:20:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2007 15:20:08 -0000
Received: (qmail 41135 invoked by uid 500); 28 Feb 2007 15:20:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41105 invoked by uid 500); 28 Feb 2007 15:20:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41094 invoked by uid 99); 28 Feb 2007 15:20:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 07:20:09 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [136.173.162.228] (HELO SMTP35.europarl.europa.eu) (136.173.162.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 07:19:56 -0800
Received: from EMAILBRUSV42.ep.parl.union.eu (unverified) by SMTP35.europarl.europa.eu
 (European Parliament) with ESMTP id <T7e158da07488ada2e41f54@SMTP35.europarl.europa.eu> for <java-user@lucene.apache.org>;
 Wed, 28 Feb 2007 16:18:02 +0100
Received: from epluxsex03.ep.parl.union.eu ([136.173.56.21]) by EMAILBRUSV42.ep.parl.union.eu with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 28 Feb 2007 16:19:33 +0100
Received: from EPLUXSEX01.ep.parl.union.eu ([136.173.56.16]) by epluxsex03.ep.parl.union.eu with Microsoft SMTPSVC(5.0.2195.6713);
	 Wed, 28 Feb 2007 16:19:33 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C75B4B.D97E89AA"
Subject: RamDirectory vs IndexWriter
Date: Wed, 28 Feb 2007 16:19:33 +0100
Message-ID: <CA7398CB8402E445AABF081C51E43ACB059EDB@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: RamDirectory vs IndexWriter
Thread-Index: AcdbS9lsxhdOzXRRSwqZD8HhwA+eSQ==
From: "WATHELET Thomas" <thomas.wathelet@europarl.europa.eu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 28 Feb 2007 15:19:33.0366 (UTC) FILETIME=[D9890960:01C75B4B]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C75B4B.D97E89AA
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I don't really understand the difference between using the ramDirectory
and using IndexWriter.

What's the difference between using ramDirectory instead of using
IndexWriter with those properties set to:
setMergeFactor(1000);setMaxMergeDocs(10000);setMaxBufferedDocs(10000);


------_=_NextPart_001_01C75B4B.D97E89AA--

From java-user-return-26504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 28 15:30:11 2007
Return-Path: <java-user-return-26504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69128 invoked from network); 28 Feb 2007 15:30:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2007 15:30:10 -0000
Received: (qmail 65269 invoked by uid 500); 28 Feb 2007 15:30:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65223 invoked by uid 500); 28 Feb 2007 15:30:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65185 invoked by uid 99); 28 Feb 2007 15:30:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 07:30:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [84.96.21.10] (HELO trinity.anyware-tech.com) (84.96.21.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 07:29:57 -0800
Received: from localhost (localhost [127.0.0.1])
	by trinity.anyware-tech.com (Postfix) with ESMTP id 39E1F477C99
	for <java-user@lucene.apache.org>; Wed, 28 Feb 2007 16:29:36 +0100 (CET)
Received: from trinity.anyware-tech.com ([127.0.0.1])
	by localhost (trinity.anyware-tech.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 24213-03-2 for <java-user@lucene.apache.org>;
	Wed, 28 Feb 2007 16:29:30 +0100 (CET)
Received: from bumbo.anyware (bumbo.anyware [10.0.3.29])
	by trinity.anyware-tech.com (Postfix) with ESMTP id C23DF479110
	for <java-user@lucene.apache.org>; Wed, 28 Feb 2007 16:29:29 +0100 (CET)
From: Nicolas =?utf-8?q?Lalev=C3=A9e?= <nicolas.lalevee@anyware-tech.com>
Organization: Anyware Technologies
To: java-user@lucene.apache.org
Subject: Re: RamDirectory vs IndexWriter
Date: Wed, 28 Feb 2007 16:29:28 +0100
User-Agent: KMail/1.9.5
References: <CA7398CB8402E445AABF081C51E43ACB059EDB@EPLUXSEX01.ep.parl.union.eu>
In-Reply-To: <CA7398CB8402E445AABF081C51E43ACB059EDB@EPLUXSEX01.ep.parl.union.eu>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200702281629.28439.nicolas.lalevee@anyware-tech.com>
X-Virus-Scanned: Debian amavisd-new at anyware-tech.com
X-Virus-Checked: Checked by ClamAV on apache.org

Le Mercredi 28 F=C3=A9vrier 2007 16:19, WATHELET Thomas a =C3=A9crit=C2=A0:
> I don't really understand the difference between using the ramDirectory
> and using IndexWriter.
>
> What's the difference between using ramDirectory instead of using
> IndexWriter with those properties set to:
> setMergeFactor(1000);setMaxMergeDocs(10000);setMaxBufferedDocs(10000);

The two classes are not designed to accomplish the same feature. The=20
IndexWriter write documents in a Directory. And a RAMDirectory is a special=
=20
implementation of a Directory which is holding the data in RAM, rather than=
=20
holding them on a file system like the FSDirectory.

=2D-=20
Nicolas LALEV=C3=89E
Solutions & Technologies
ANYWARE TECHNOLOGIES
Tel : +33 (0)5 61 00 52 90
=46ax : +33 (0)5 61 00 51 46
http://www.anyware-tech.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 28 15:50:49 2007
Return-Path: <java-user-return-26505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76510 invoked from network); 28 Feb 2007 15:50:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2007 15:50:47 -0000
Received: (qmail 17231 invoked by uid 500); 28 Feb 2007 15:50:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17182 invoked by uid 500); 28 Feb 2007 15:50:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16954 invoked by uid 99); 28 Feb 2007 15:50:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 07:50:37 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,MIME_BOUND_NEXTPART
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.190.206.154] (HELO srs2na11.bgl.lu) (212.190.206.154)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 28 Feb 2007 07:50:26 -0800
Received: from spmwf02l.luinternal.fortis.bank (unverified) by srs2na12.domain
 (Content Technologies SMTPRS 4.2.10) with ESMTP id <T7e15ac21e70aaf150a11a@srs2na12.domain> for <java-user@lucene.apache.org>;
 Wed, 28 Feb 2007 16:51:21 +0100
Received: from SPMWB01L.luinternal.fortis.bank ([10.172.252.139]) by spmwf02l.luinternal.fortis.bank with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 28 Feb 2007 16:50:03 +0100
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_NextPartTM-000-7c61fe17-8906-4345-9922-b53000aec212"
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: Merge Indexes - addIndexes
Date: Wed, 28 Feb 2007 16:50:02 +0100
Message-ID: <EBC8F228BDB35A4394D0BE53DA25248808A9A46C@SPMWB02L.luinternal.fortis.bank>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: Merge Indexes - addIndexes
Thread-Index: AcdbUBWCqXjQckCWSFmxdLE1/qtMHA==
From: "DECAFFMEYER MATHIEU" <MATHIEU.DECAFFMAYER@fortis.lu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 28 Feb 2007 15:50:03.0032 (UTC) FILETIME=[1C19E980:01C75B50]
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPartTM-000-7c61fe17-8906-4345-9922-b53000aec212
Content-Type: multipart/alternative; 
	boundary="----_=_NextPart_001_01C75B50.1BFE2BD3"

------_=_NextPart_001_01C75B50.1BFE2BD3
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

I store the Lucene Index of my web applications in a file system.
Oftenly, I need to add to this index another index also stored as file
system.

I have three questions :

* What is the best way to do this ?
  Open an IndexReader on this newcoming index-file system=20
  and use addIndexes(IndexReader[] readers) ?=20
   (where I will have each time one IndexReader in the array)

* Which files do I need ?
  I see in the File System that the following is stored :
  - segments
  - deletable
  - _1.cfs
  - untokenizedFieldNames.txt
  - stopWordList.txt
  - analyzerType.txt

* Can the merge be time consuming ?
   What happen when a user does a query in my search engine when I'm
merging the indexes
   with the method addIndexes(IndexReader[] readers)  ?


Thank u for any help !

__________________________________

   Matt



=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
Internet communications are not secure and therefore Fortis Banque Luxembou=
rg S.A. does not accept legal responsibility for the contents of this messa=
ge. The information contained in this e-mail is confidential and may be leg=
ally privileged. It is intended solely for the addressee. If you are not th=
e intended recipient, any disclosure, copying, distribution or any action t=
aken or omitted to be taken in reliance on it, is prohibited and may be unl=
awful. Nothing in the message is capable or intended to create any legally =
binding obligations on either party and it is not intended to provide legal=
 advice.
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D


------_=_NextPart_001_01C75B50.1BFE2BD3
Content-Type: text/html; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; charset=3Dus-ascii">
<META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version 6.5.7651.52">
<TITLE>Merge Indexes - addIndexes</TITLE>
</HEAD>
<BODY>
<!-- Converted from text/rtf format -->

<P><FONT SIZE=3D2 FACE=3D"Arial">Hi,</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial">I store the Lucene Index of my web applica=
tions in a file system.</FONT>

<BR><FONT SIZE=3D2 FACE=3D"Arial">Oftenly, I need to add to this index anot=
her index also stored as file system.</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial">I have three questions :</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial">* What is the best way to do this ?</FONT>

<BR><FONT SIZE=3D2 FACE=3D"Arial">&nbsp; Open an IndexReader on this newcom=
ing index-file system </FONT>

<BR><FONT SIZE=3D2 FACE=3D"Arial">&nbsp; and use addIndexes(IndexReader[] r=
eaders) ? </FONT>

<BR><FONT SIZE=3D2 FACE=3D"Arial">&nbsp;&nbsp; (where I will have each time=
 one IndexReader in the array)</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial">* Which files do I need ?</FONT>

<BR><FONT SIZE=3D2 FACE=3D"Arial">&nbsp; I see in the File System that the =
following is stored :</FONT>

<BR><FONT SIZE=3D2 FACE=3D"Arial">&nbsp; - segments</FONT>

<BR><FONT SIZE=3D2 FACE=3D"Arial">&nbsp; - deletable</FONT>

<BR><FONT SIZE=3D2 FACE=3D"Arial">&nbsp; - _1.cfs</FONT>

<BR><FONT SIZE=3D2 FACE=3D"Arial">&nbsp; - untokenizedFieldNames.txt</FONT>

<BR><FONT SIZE=3D2 FACE=3D"Arial">&nbsp; - stopWordList.txt</FONT>

<BR><FONT SIZE=3D2 FACE=3D"Arial">&nbsp; - analyzerType.txt</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial">* Can the merge be time consuming ?</FONT>

<BR><FONT SIZE=3D2 FACE=3D"Arial">&nbsp;&nbsp; What happen when a user does=
 a query in my search engine when I'm merging the indexes</FONT>

<BR><FONT SIZE=3D2 FACE=3D"Arial">&nbsp;&nbsp; with the method addIndexes(I=
ndexReader[] readers)&nbsp; ?</FONT>
</P>
<BR>

<P><FONT SIZE=3D2 FACE=3D"Arial">Thank u for any help !</FONT>
</P>

<P><B><SPAN LANG=3D"fr"><WBR><WBR><WBR><WBR><WBR><WBR><WBR><WBR><WBR><WBR><=
WBR><WBR><WBR><WBR><WBR><WBR><FONT COLOR=3D"#006699" SIZE=3D1 FACE=3D"Verda=
na">__________________________________</FONT></SPAN></B>
</P>

<P><B><SPAN LANG=3D"fr"><FONT COLOR=3D"#006699" SIZE=3D1 FACE=3D"Verdana">&=
nbsp;&nbsp; Matt</FONT></SPAN></B><SPAN LANG=3D"fr"><I></I><I></I></SPAN><I=
><SPAN LANG=3D"en-us"></SPAN></I>
</P>

<CODE><FONT SIZE=3D3><BR>
<BR>
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D<BR>
Internet communications are not secure and therefore Fortis Banque Luxembou=
rg S.A. does not accept legal responsibility for the contents of this messa=
ge. The information contained in this e-mail is confidential and may be leg=
ally privileged. It is intended solely for the addressee. If you are not th=
e intended recipient, any disclosure, copying, distribution or any action t=
aken or omitted to be taken in reliance on it, is prohibited and may be unl=
awful. Nothing in the message is capable or intended to create any legally =
binding obligations on either party and it is not intended to provide legal=
 advice.<BR>
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D<BR>
</FONT></CODE>
</BODY>
</HTML>
------_=_NextPart_001_01C75B50.1BFE2BD3--


------=_NextPartTM-000-7c61fe17-8906-4345-9922-b53000aec212
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------=_NextPartTM-000-7c61fe17-8906-4345-9922-b53000aec212--


From java-user-return-26506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 28 16:06:18 2007
Return-Path: <java-user-return-26506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85190 invoked from network); 28 Feb 2007 16:06:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2007 16:06:17 -0000
Received: (qmail 53989 invoked by uid 500); 28 Feb 2007 16:06:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53954 invoked by uid 500); 28 Feb 2007 16:06:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53908 invoked by uid 99); 28 Feb 2007 16:06:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 08:06:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [136.173.162.228] (HELO SMTP35.europarl.europa.eu) (136.173.162.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 08:06:01 -0800
Received: from EMAILBRUSV42.ep.parl.union.eu (unverified) by SMTP35.europarl.europa.eu
 (European Parliament) with ESMTP id <T7e15b7d67c88ada2e41f54@SMTP35.europarl.europa.eu>;
 Wed, 28 Feb 2007 17:04:08 +0100
Received: from epbrusex02.ep.parl.union.eu ([136.173.156.27]) by EMAILBRUSV42.ep.parl.union.eu with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 28 Feb 2007 17:05:39 +0100
Received: from EPLUXSEX01.ep.parl.union.eu ([136.173.56.16]) by epbrusex02.ep.parl.union.eu with Microsoft SMTPSVC(5.0.2195.6713);
	 Wed, 28 Feb 2007 17:05:38 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: RamDirectory vs IndexWriter
Date: Wed, 28 Feb 2007 17:05:38 +0100
Message-ID: <CA7398CB8402E445AABF081C51E43ACB08F416@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: RamDirectory vs IndexWriter
Thread-Index: AcdbTVMH1wyVj58ITI2HbjZgsIc/mQABOMQA
From: "WATHELET Thomas" <thomas.wathelet@europarl.europa.eu>
To: <java-user@lucene.apache.org>
Cc: <nicolas.lalevee@anyware-tech.com>
X-OriginalArrivalTime: 28 Feb 2007 16:05:38.0871 (UTC) FILETIME=[49E79C70:01C75B52]
X-Virus-Checked: Checked by ClamAV on apache.org

Je pense mettre mal exprim=E9e.
Dans les 2 cas j'utilise la classe IndexWriter mais dans un cas je =
l'utilise avec un RamDirectory et dans l'autre avec FSDirecory =
(index=3Dnew IndexWriter(ram OR fsdir,analyser,true))
Si j'utilise la classe ramDirectory c'est pour =E9viter l'acc=E8s disque =
fr=E9quent.
Mais j'ai constat=E9e quand utilisant FSDirecory et en paramettrant les =
setMergeFactor(1000);setMaxMergeDocs(10000);setMaxBufferedDocs(10000) =
j'ai plus ou moin le m=EAme comportement.
Suis-je dans le bon chemin.=20

-----Original Message-----
From: Nicolas Lalev=E9e [mailto:nicolas.lalevee@anyware-tech.com]=20
Sent: 28 February 2007 16:29
To: java-user@lucene.apache.org
Subject: Re: RamDirectory vs IndexWriter

Le Mercredi 28 F=E9vrier 2007 16:19, WATHELET Thomas a =E9crit=A0:
> I don't really understand the difference between using the =
ramDirectory
> and using IndexWriter.
>
> What's the difference between using ramDirectory instead of using
> IndexWriter with those properties set to:
> setMergeFactor(1000);setMaxMergeDocs(10000);setMaxBufferedDocs(10000);

The two classes are not designed to accomplish the same feature. The=20
IndexWriter write documents in a Directory. And a RAMDirectory is a =
special=20
implementation of a Directory which is holding the data in RAM, rather =
than=20
holding them on a file system like the FSDirectory.

--=20
Nicolas LALEV=C9E
Solutions & Technologies
ANYWARE TECHNOLOGIES
Tel : +33 (0)5 61 00 52 90
Fax : +33 (0)5 61 00 51 46
http://www.anyware-tech.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 28 16:17:17 2007
Return-Path: <java-user-return-26507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90494 invoked from network); 28 Feb 2007 16:17:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2007 16:17:16 -0000
Received: (qmail 90104 invoked by uid 500); 28 Feb 2007 16:17:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90066 invoked by uid 500); 28 Feb 2007 16:17:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90051 invoked by uid 99); 28 Feb 2007 16:17:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 08:17:17 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 08:17:06 -0800
Received: by ug-out-1314.google.com with SMTP id k40so159467ugc
        for <java-user@lucene.apache.org>; Wed, 28 Feb 2007 08:16:45 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jXNAHrJyj6jlE0MjffvIBd3yKXztAcCubY4bFZtLO9kqQCD5y7qW/Vah8sHrhukay6vGTaFYCQozxbbKbbRSxLp1y1mKCZUHaRpEHGgNpe+RLpx8Bh0PAHGm+yaT4vdBn2wGi3fgJa+JIW52p9Xm874lKd0Op6nnU+xr5baIn3M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tlQsewKMO3N3NmokoHaIcKnJQB95mxeBrvAWJblMXQzGn+PV92UVbsbZ6+zQHhCyFNQsqKuw4l88xrFp08MWcz7Wrfstybtk8joHE0N9gjC/2BL/A2xAvxK+JXk//g1Ah/U2kEDrefLjkQSmEc8wCzdHkvE7uYlK2k/CPNjDYDk=
Received: by 10.114.112.1 with SMTP id k1mr457222wac.1172679335202;
        Wed, 28 Feb 2007 08:15:35 -0800 (PST)
Received: by 10.114.58.3 with HTTP; Wed, 28 Feb 2007 08:15:35 -0800 (PST)
Message-ID: <359a92830702280815q3685f47eyd4b1c1897880422@mail.gmail.com>
Date: Wed, 28 Feb 2007 11:15:35 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: RamDirectory vs IndexWriter
In-Reply-To: <CA7398CB8402E445AABF081C51E43ACB059EDB@EPLUXSEX01.ep.parl.union.eu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_44520_14155205.1172679335118"
References: <CA7398CB8402E445AABF081C51E43ACB059EDB@EPLUXSEX01.ep.parl.union.eu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_44520_14155205.1172679335118
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I guess it depends upon your goal. If you're asking what the difference
between writing to a RAMDirectory *then* flushing to an FSDIrectory,
I don't believer there's much, if any. As I remember (and my memory
isn't always...er...accurate), there's been discussion on this thread
by those who know that underneath the covers an FSDirecotyr
uses a RAMDirectory for a while, then flushes it to disk.

If you're asking what the difference between a RAMDirectory is
and an FSDirectory, that's another story.

Erick


On 2/28/07, WATHELET Thomas <thomas.wathelet@europarl.europa.eu> wrote:
>
> I don't really understand the difference between using the ramDirectory
> and using IndexWriter.
>
> What's the difference between using ramDirectory instead of using
> IndexWriter with those properties set to:
> setMergeFactor(1000);setMaxMergeDocs(10000);setMaxBufferedDocs(10000);
>
>

------=_Part_44520_14155205.1172679335118--

From java-user-return-26508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 28 16:53:50 2007
Return-Path: <java-user-return-26508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10853 invoked from network); 28 Feb 2007 16:53:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2007 16:53:49 -0000
Received: (qmail 91193 invoked by uid 500); 28 Feb 2007 16:53:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91154 invoked by uid 500); 28 Feb 2007 16:53:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91143 invoked by uid 99); 28 Feb 2007 16:53:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 08:53:50 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ismail@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 08:53:39 -0800
Received: by ug-out-1314.google.com with SMTP id k40so169206ugc
        for <java-user@lucene.apache.org>; Wed, 28 Feb 2007 08:53:18 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=P6LjP7wFQoh35mDxe5E0CXF0WlaZJP5PC3/ptmOfKKqmeYp4tvfcUGm+2ifqESfq2XdKD27OM0QdNXWr62S4/GtZJxgvKEzRYS2aNZy9uEc4Jrz/urE4RJzEZXwtaWFn6gWCV9VViWstDDDyjt5dypcjxWCnBg3ZZwGgUc0vhRs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=Hv0UKIZwfE43aXFGpy5PhucT0VzVMRLVZU77hkuePZh75kwD0I7nbQEhoYy79hMDC+vkX3dAXEwniRy2pMsuGI3YEXsSWlH0j16C3wVUGrgHb3Xp2jWT8N0b7JothKGfn7+MFVdC3p8ZKgj54DUEZGIYRiobGt6Je0x4JaZ1eV8=
Received: by 10.78.149.13 with SMTP id w13mr63786hud.1172681591873;
        Wed, 28 Feb 2007 08:53:11 -0800 (PST)
Received: by 10.78.21.13 with HTTP; Wed, 28 Feb 2007 08:53:11 -0800 (PST)
Message-ID: <1f07f6920702280853j77176973v291312d58c33fdfa@mail.gmail.com>
Date: Wed, 28 Feb 2007 11:53:11 -0500
From: "Ismail Siddiqui" <ismail@gmail.com>
To: java-user@lucene.apache.org
Subject: Filtering results on a Field
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_34105_8922931.1172681591809"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_34105_8922931.1172681591809
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hey guys,
I want to filter a result set on a particular field..I have code like this

try
        {
            PhraseQuery textQuery = new PhraseQuery();
            PhraseQuery titleQuery = new PhraseQuery();
            PhraseQuery catQuery = new PhraseQuery();
            textQuery.setSlop( 20 );
            titleQuery.setSlop( 4 );

            for( int k = 0; k < phrase.length; k++ )
            {
                textQuery.add( new Term( NAME, phrase[k] ) );
                titleQuery.add( new Term( REVIEW, phrase[k] ) );


            }
            bQuery.add( textQuery, BooleanClause.Occur.SHOULD );
            bQuery.add( titleQuery, BooleanClause.Occur.SHOULD );

            if(category!=null && !category.equals("")){
             catQuery.add( new Term( TYPE, category ) );
             bQuery.add(catQuery,BooleanClause.Occur.MUST);

            }

        }
        catch( Exception e )
        {
            throw new RuntimeException( "Unable to make any sense of the
query.", e );
        }



Now the problem is its getting all results for a particular category
regardless the "phrase" is  in the title or text field which make sense as
the other two have SHOULD clause. the problem is I can not set a MUST clause
on the other two field as I need to match either one of the field. so what i
want to is either title or text MUST have it and if category is not null it
MUST have the category string passed. any ideas

------=_Part_34105_8922931.1172681591809--

From java-user-return-26509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 28 17:17:47 2007
Return-Path: <java-user-return-26509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34946 invoked from network); 28 Feb 2007 17:17:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2007 17:17:45 -0000
Received: (qmail 64297 invoked by uid 500); 28 Feb 2007 17:17:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64262 invoked by uid 500); 28 Feb 2007 17:17:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64251 invoked by uid 99); 28 Feb 2007 17:17:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 09:17:47 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.90.179 as permitted sender)
Received: from [66.249.90.179] (HELO ik-out-1112.google.com) (66.249.90.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 09:17:36 -0800
Received: by ik-out-1112.google.com with SMTP id b35so135306ika
        for <java-user@lucene.apache.org>; Wed, 28 Feb 2007 09:17:14 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=fapF/w0rC8tatwo9U5ay2oIh2MFFSz5q1jPKiOT+DFlM5inkmXdT6d4jCmL0mCv5t3q8gwx21uBzHcEBhv0k6FRXGZI+gAU4azrx6eY5Um/nt4AZhsQlPrilFb5GQoLEeHvAGWznAucSHpI0m6AqSkFjii+2MO5uHdNegaDgjsg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=FJhFwaL1C22GpZ5WAXJsg5a0MGv5IjwHVOsufcynUw5MwEzwmNl3BDgHUkgo9q4tp8kByFcYMDmKFJZWOFTHIyQJWm6uXzu6p3W34Xw0SlNHX8BPxVbMnPNYBJXdSQ9IZOnb5fsDtakJ/d75C4BG6XtTzHYFkIyoOiLF1nuLmHY=
Received: by 10.114.15.1 with SMTP id 1mr224320wao.1172683019901;
        Wed, 28 Feb 2007 09:16:59 -0800 (PST)
Received: by 10.114.58.3 with HTTP; Wed, 28 Feb 2007 09:16:59 -0800 (PST)
Message-ID: <359a92830702280916r347bfc72l7e42a251f7b0b118@mail.gmail.com>
Date: Wed, 28 Feb 2007 12:16:59 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Filtering results on a Field
In-Reply-To: <1f07f6920702280853j77176973v291312d58c33fdfa@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_46614_11003765.1172683019756"
References: <1f07f6920702280853j77176973v291312d58c33fdfa@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_46614_11003765.1172683019756
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

When you have a category, add the pair of clauses as a sub-Boolean query.

Something like...

try
       {
           PhraseQuery textQuery = new PhraseQuery();
           PhraseQuery titleQuery = new PhraseQuery();
           PhraseQuery catQuery = new PhraseQuery();
           textQuery.setSlop( 20 );
           titleQuery.setSlop( 4 );

bQueryPair = new BooleanQuery();
bQueryAll = new BooleanQuery();

           for( int k = 0; k < phrase.length; k++ )
           {
               textQuery.add( new Term( NAME, phrase[k] ) );
               titleQuery.add( new Term( REVIEW, phrase[k] ) );


           }
           bQueryPair.add( textQuery, BooleanClause.Occur.SHOULD );
           bQueryPair.add( titleQuery, BooleanClause.Occur.SHOULD );

           if(category!=null && !category.equals("")){
            catQuery.add( new Term( TYPE, category ) );
            bQueryAll.add(catQuery,BooleanClause.Occur.MUST);
           bQueryAll.add(bQueryPair, BooleanCluase.Occur.MUST)

           } else {
              bQueryAll = bQueryPair;
           }

       }
       catch( Exception e )
       {
           throw new RuntimeException( "Unable to make any sense of the
query.", e );
       }


and use bQueryAll in your query.

And please be waaaay more elegant than the code I wrote <G>.

Erick


On 2/28/07, Ismail Siddiqui <ismail@gmail.com> wrote:
>
> Hey guys,
> I want to filter a result set on a particular field..I have code like this
>
> try
>         {
>             PhraseQuery textQuery = new PhraseQuery();
>             PhraseQuery titleQuery = new PhraseQuery();
>             PhraseQuery catQuery = new PhraseQuery();
>             textQuery.setSlop( 20 );
>             titleQuery.setSlop( 4 );
>
>             for( int k = 0; k < phrase.length; k++ )
>             {
>                 textQuery.add( new Term( NAME, phrase[k] ) );
>                 titleQuery.add( new Term( REVIEW, phrase[k] ) );
>
>
>             }
>             bQuery.add( textQuery, BooleanClause.Occur.SHOULD );
>             bQuery.add( titleQuery, BooleanClause.Occur.SHOULD );
>
>             if(category!=null && !category.equals("")){
>              catQuery.add( new Term( TYPE, category ) );
>              bQuery.add(catQuery,BooleanClause.Occur.MUST);
>
>             }
>
>         }
>         catch( Exception e )
>         {
>             throw new RuntimeException( "Unable to make any sense of the
> query.", e );
>         }
>
>
>
> Now the problem is its getting all results for a particular category
> regardless the "phrase" is  in the title or text field which make sense as
> the other two have SHOULD clause. the problem is I can not set a MUST
> clause
> on the other two field as I need to match either one of the field. so what
> i
> want to is either title or text MUST have it and if category is not null
> it
> MUST have the category string passed. any ideas
>

------=_Part_46614_11003765.1172683019756--

From java-user-return-26510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 28 17:36:29 2007
Return-Path: <java-user-return-26510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46166 invoked from network); 28 Feb 2007 17:36:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2007 17:36:28 -0000
Received: (qmail 4195 invoked by uid 500); 28 Feb 2007 17:36:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4163 invoked by uid 500); 28 Feb 2007 17:36:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4152 invoked by uid 99); 28 Feb 2007 17:36:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 09:36:29 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ismail@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 09:36:17 -0800
Received: by ug-out-1314.google.com with SMTP id k40so181314ugc
        for <java-user@lucene.apache.org>; Wed, 28 Feb 2007 09:35:56 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=T1OsuI3fcgm5HDGuzQh03MYQ/uwHGzKtACcsIiAJ1JPwfffhxtDr94wLFqFOkH07fU6AYDovQ981M4Ap2waUrG3wkZYONCsCTLnLtSrkoR65l4ULlfGYRwye9kcoq4RhdAJDY7mpYB4bn+LhawNo46MzZunT3oN5RrJyw70voss=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=a88C+s7+EuMoyanwZmaTpeHftNkoQZ6FIf3X2RqCbkSg72A/+f8BwPIvMO5VkGr0CjSTblVj5KVX2pvZ/yMBZRb9+A8g+5oF00FGE42IyE6dAEzmrT0V5Kv+HLGqnkLzYK0iwcWf2D/9dJ0KCHb5ZS0sIYbW1mzsVZnDQZnx2wc=
Received: by 10.78.20.13 with SMTP id 13mr64626hut.1172684155143;
        Wed, 28 Feb 2007 09:35:55 -0800 (PST)
Received: by 10.78.21.13 with HTTP; Wed, 28 Feb 2007 09:35:55 -0800 (PST)
Message-ID: <1f07f6920702280935m3a102bffhb96bace7255031c0@mail.gmail.com>
Date: Wed, 28 Feb 2007 12:35:55 -0500
From: "Ismail Siddiqui" <ismail@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Filtering results on a Field
In-Reply-To: <359a92830702280916r347bfc72l7e42a251f7b0b118@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_34841_28346793.1172684155100"
References: <1f07f6920702280853j77176973v291312d58c33fdfa@mail.gmail.com>
	 <359a92830702280916r347bfc72l7e42a251f7b0b118@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_34841_28346793.1172684155100
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

thanks a lot

On 2/28/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> When you have a category, add the pair of clauses as a sub-Boolean query.
>
> Something like...
>
> try
>       {
>           PhraseQuery textQuery = new PhraseQuery();
>           PhraseQuery titleQuery = new PhraseQuery();
>           PhraseQuery catQuery = new PhraseQuery();
>           textQuery.setSlop( 20 );
>           titleQuery.setSlop( 4 );
>
> bQueryPair = new BooleanQuery();
> bQueryAll = new BooleanQuery();
>
>           for( int k = 0; k < phrase.length; k++ )
>           {
>               textQuery.add( new Term( NAME, phrase[k] ) );
>               titleQuery.add( new Term( REVIEW, phrase[k] ) );
>
>
>           }
>           bQueryPair.add( textQuery, BooleanClause.Occur.SHOULD );
>           bQueryPair.add( titleQuery, BooleanClause.Occur.SHOULD );
>
>           if(category!=null && !category.equals("")){
>            catQuery.add( new Term( TYPE, category ) );
>            bQueryAll.add(catQuery,BooleanClause.Occur.MUST);
>           bQueryAll.add(bQueryPair, BooleanCluase.Occur.MUST)
>
>           } else {
>              bQueryAll = bQueryPair;
>           }
>
>       }
>       catch( Exception e )
>       {
>           throw new RuntimeException( "Unable to make any sense of the
> query.", e );
>       }
>
>
> and use bQueryAll in your query.
>
> And please be waaaay more elegant than the code I wrote <G>.
>
> Erick
>
>
> On 2/28/07, Ismail Siddiqui <ismail@gmail.com> wrote:
> >
> > Hey guys,
> > I want to filter a result set on a particular field..I have code like
> this
> >
> > try
> >         {
> >             PhraseQuery textQuery = new PhraseQuery();
> >             PhraseQuery titleQuery = new PhraseQuery();
> >             PhraseQuery catQuery = new PhraseQuery();
> >             textQuery.setSlop( 20 );
> >             titleQuery.setSlop( 4 );
> >
> >             for( int k = 0; k < phrase.length; k++ )
> >             {
> >                 textQuery.add( new Term( NAME, phrase[k] ) );
> >                 titleQuery.add( new Term( REVIEW, phrase[k] ) );
> >
> >
> >             }
> >             bQuery.add( textQuery, BooleanClause.Occur.SHOULD );
> >             bQuery.add( titleQuery, BooleanClause.Occur.SHOULD );
> >
> >             if(category!=null && !category.equals("")){
> >              catQuery.add( new Term( TYPE, category ) );
> >              bQuery.add(catQuery,BooleanClause.Occur.MUST);
> >
> >             }
> >
> >         }
> >         catch( Exception e )
> >         {
> >             throw new RuntimeException( "Unable to make any sense of the
> > query.", e );
> >         }
> >
> >
> >
> > Now the problem is its getting all results for a particular category
> > regardless the "phrase" is  in the title or text field which make sense
> as
> > the other two have SHOULD clause. the problem is I can not set a MUST
> > clause
> > on the other two field as I need to match either one of the field. so
> what
> > i
> > want to is either title or text MUST have it and if category is not null
> > it
> > MUST have the category string passed. any ideas
> >
>

------=_Part_34841_28346793.1172684155100--

From java-user-return-26511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 28 19:12:11 2007
Return-Path: <java-user-return-26511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91125 invoked from network); 28 Feb 2007 19:12:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2007 19:12:09 -0000
Received: (qmail 86447 invoked by uid 500); 28 Feb 2007 19:12:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86417 invoked by uid 500); 28 Feb 2007 19:12:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86402 invoked by uid 99); 28 Feb 2007 19:12:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 11:12:11 -0800
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.170.99.248] (HELO mail.authsum.com) (216.170.99.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 11:11:58 -0800
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.authsum.com (Postfix) with ESMTP id 8EC867810C
	for <java-user@lucene.apache.org>; Wed, 28 Feb 2007 14:11:37 -0500 (EST)
X-Virus-Scanned: amavisd-new at 
X-Spam-Score: -3.861
X-Spam-Level: 
Received: from mail.authsum.com ([127.0.0.1])
	by localhost (mail.authsum.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id jELBcXF6j9uq for <java-user@lucene.apache.org>;
	Wed, 28 Feb 2007 14:11:33 -0500 (EST)
Received: from mail.authsum.com (unknown [216.170.99.248])
	by mail.authsum.com (Postfix) with ESMTP id D3C8F78109
	for <java-user@lucene.apache.org>; Wed, 28 Feb 2007 14:11:33 -0500 (EST)
Message-ID: <16298188.2211172689893770.JavaMail.root@localhost.localdomain>
Date: Wed, 28 Feb 2007 14:11:33 -0500 (EST)
From: Phillip Rhodes <spamsucks@rhoderunner.com>
To: java-user@lucene.apache.org
Subject: Re: indexing and searching the document title question
In-Reply-To: <200702272333.01610@danielnaber.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Originating-IP: [209.166.180.139]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.861 tagged_above=-10 required=6.6
	tests=[ALL_TRUSTED=-1.8, AWL=0.538, BAYES_00=-2.599]

I found the problem!

I did not realize using a HitCollector would return things in an unsorted order.

I was using the HitCollector to try to maximize performance by only returning the documents that I needed (which page of the results, and how many per page).

-Phillip


----- Original Message -----
From: "Daniel Naber" <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Sent: Tuesday, February 27, 2007 5:33:01 PM (GMT-0500) America/New_York
Subject: Re: indexing and searching the document title question

On Tuesday 27 February 2007 23:07, Phillip Rhodes wrote:

> NAME:"color me mine"^2.0 (CONTENTS:color CONTENTS:me CONTENTS:mine)

Try a (much) higer boost like 20 or 50, does that help?

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 28 19:13:20 2007
Return-Path: <java-user-return-26512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91852 invoked from network); 28 Feb 2007 19:13:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2007 19:13:19 -0000
Received: (qmail 90390 invoked by uid 500); 28 Feb 2007 19:13:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90360 invoked by uid 500); 28 Feb 2007 19:13:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90347 invoked by uid 99); 28 Feb 2007 19:13:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 11:13:21 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of walt.stoneburner@gmail.com designates 66.249.90.177 as permitted sender)
Received: from [66.249.90.177] (HELO ik-out-1112.google.com) (66.249.90.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 11:13:10 -0800
Received: by ik-out-1112.google.com with SMTP id b35so162726ika
        for <java-user@lucene.apache.org>; Wed, 28 Feb 2007 11:12:48 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=sc5abGddZL9micbxdRMQBKSlKI1Sm9NdaB3Xr2k2vWDedy0S1xtoBwyABbTocWJHYZN/8UP/ba+vuLKAA4vS8PaRH9tqp/y6L3da3nLkHGRWMZ79Gmlaqi9ghJTK4OJ1GmGbuCZ8XPqWGd2Uv49X5RPSmQdAi6yfvTUMXBwPPiE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=ToMK6+pgcRzy2iAf3yjybvaXdkDTI+FgH9JUOYtgLs+jnts8yTobSdz26uJIwMPVfuYcgS/g2EbrE+8zjWONAAqoxiA7HgI5dBYALoqId+xv2esX5xo0ZRmxg33pEHVWNKXcTvbx4CzsqcpHX7Sxgq7rpO3nwFTJbtNSEK5wXPg=
Received: by 10.114.181.1 with SMTP id d1mr24815waf.1172689964829;
        Wed, 28 Feb 2007 11:12:44 -0800 (PST)
Received: by 10.114.126.10 with HTTP; Wed, 28 Feb 2007 11:12:44 -0800 (PST)
Message-ID: <ae6f38f60702281112t1fb79fadpc34c16a6a574da11@mail.gmail.com>
Date: Wed, 28 Feb 2007 14:12:44 -0500
From: "Walt Stoneburner" <walt.stoneburner@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Soliciting Design Thoughts on Date Searching
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Been searching http://www.gossamer-threads.com/lists/lucene/java-user/
as Erick suggested; man, is there a wealth of information in the
Lucene archives.

I have found many examples of how to convert text to dates and back,
how to search Date fields for various ranges, and so forth -- but I
don't think this is what I'm looking for.

That material assumes I have a single date, such as last modified
date, and it's stored in a date field, and that I'm searching that
field.

What I'm looking to do is different.

I have generic material that _contain_ dates: historic time lines,
certificates, news articles, forms, deeds, testimonies, and wildly
free form genealogical information.  The dates have no specific
structure, obvious context, nor consistency.

Finding relevant material would be trivial if those dates were easily
cherry picked out and placed in a date field.  But they're not.  A
given document can have any number of embedded dates, provided for any
reason, and I'm interested in locating things which mention any date,
potentially within a range.

The issue isn't in using DateRange on a Date Field, but in knowing if
there is some filter that already exists which extracts dates from a
body of text to put into a Date Field.  If not, the DateTool solution
is a helpful step in building my own filter; I just don't want to
reinvent the wheel if it already exists.

Now this is where my personal knowledge of Lucene breaks down.
Assuming I can extract each date from a source's body and convert it
to a usable format, can a Lucene Date Field hold more than one date?
For example, is a strict name/value pair, or can the value be a array
of dates, or can I append additional dates under the same name?

Super generalizing, to break the discussion from a date specific
example, suppose I did this:
document.add( Field.Text( "title", "Learning Perl, Fourth Edition" )
); // real title
document.add( Field.Text( "title", "Camel Book" ) );  // my wife knows
it by the cover

Could I do a search for both the long and short title against the title field?

If the answer is yes, problem solved!  I'll just pile on a ton of
dates as I find them and add them to the document.  (Note, I could
easily have hundreds.)

for ( Date somedate : allDatesFoundInSource[] ) {
  document.add( Field.Text( "embeddedDates", somedate ) );  // Right
way to do this?
}


If the answer is no, it better illustrates the problem I face:
searching across an arbitrary collection of dates.


Erick, if I've missed something obvious in the archives, I'll happily
accept my public flogging.    Thanks for your help so far.

-wls

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 28 19:23:18 2007
Return-Path: <java-user-return-26513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96472 invoked from network); 28 Feb 2007 19:23:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2007 19:23:17 -0000
Received: (qmail 2746 invoked by uid 500); 28 Feb 2007 19:23:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2709 invoked by uid 500); 28 Feb 2007 19:23:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2698 invoked by uid 99); 28 Feb 2007 19:23:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 11:23:18 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of TAigner@wescodist.com designates 12.29.179.198 as permitted sender)
Received: from [12.29.179.198] (HELO smtp4.wescodist.com) (12.29.179.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 11:23:06 -0800
Received: from EMAIL02.wescodist.com ([207.152.236.122]) by smtp4.wescodist.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 28 Feb 2007 14:22:45 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Soliciting Design Thoughts on Date Searching
Date: Wed, 28 Feb 2007 14:22:44 -0500
Message-ID: <6B6D3063DF0A7A4DB8A989D40C61BEB303EFDBDC@EMAIL02.wescodist.com>
In-Reply-To: <ae6f38f60702281112t1fb79fadpc34c16a6a574da11@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Soliciting Design Thoughts on Date Searching
Thread-Index: AcdbbH8G5x1Y3hMkR0CX58CQRg4RZgAAI82g
References: <ae6f38f60702281112t1fb79fadpc34c16a6a574da11@mail.gmail.com>
From: "Aigner, Thomas" <TAigner@WescoDist.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 28 Feb 2007 19:22:45.0237 (UTC) FILETIME=[D2F7DA50:01C75B6D]
X-Virus-Checked: Checked by ClamAV on apache.org

Walt,
	I am no expert, but it sounds like you need to associate many
dates to a single record.  Can this be handled as you would a synonym?
Basically add a token at the same offset as the row itself?  i.e. you
would have a record that would also have a date field that has 3 offsets
that would be treated as a synonym type (basically
setPositionIncrement(0)?)

	Just thinking outloud..

Tom


-----Original Message-----
From: Walt Stoneburner [mailto:walt.stoneburner@gmail.com]=20
Sent: Wednesday, February 28, 2007 2:13 PM
To: java-user@lucene.apache.org
Subject: Re: Soliciting Design Thoughts on Date Searching

Been searching http://www.gossamer-threads.com/lists/lucene/java-user/
as Erick suggested; man, is there a wealth of information in the
Lucene archives.

I have found many examples of how to convert text to dates and back,
how to search Date fields for various ranges, and so forth -- but I
don't think this is what I'm looking for.

That material assumes I have a single date, such as last modified
date, and it's stored in a date field, and that I'm searching that
field.

What I'm looking to do is different.

I have generic material that _contain_ dates: historic time lines,
certificates, news articles, forms, deeds, testimonies, and wildly
free form genealogical information.  The dates have no specific
structure, obvious context, nor consistency.

Finding relevant material would be trivial if those dates were easily
cherry picked out and placed in a date field.  But they're not.  A
given document can have any number of embedded dates, provided for any
reason, and I'm interested in locating things which mention any date,
potentially within a range.

The issue isn't in using DateRange on a Date Field, but in knowing if
there is some filter that already exists which extracts dates from a
body of text to put into a Date Field.  If not, the DateTool solution
is a helpful step in building my own filter; I just don't want to
reinvent the wheel if it already exists.

Now this is where my personal knowledge of Lucene breaks down.
Assuming I can extract each date from a source's body and convert it
to a usable format, can a Lucene Date Field hold more than one date?
For example, is a strict name/value pair, or can the value be a array
of dates, or can I append additional dates under the same name?

Super generalizing, to break the discussion from a date specific
example, suppose I did this:
document.add( Field.Text( "title", "Learning Perl, Fourth Edition" )
); // real title
document.add( Field.Text( "title", "Camel Book" ) );  // my wife knows
it by the cover

Could I do a search for both the long and short title against the title
field?

If the answer is yes, problem solved!  I'll just pile on a ton of
dates as I find them and add them to the document.  (Note, I could
easily have hundreds.)

for ( Date somedate : allDatesFoundInSource[] ) {
  document.add( Field.Text( "embeddedDates", somedate ) );  // Right
way to do this?
}


If the answer is no, it better illustrates the problem I face:
searching across an arbitrary collection of dates.


Erick, if I've missed something obvious in the archives, I'll happily
accept my public flogging.    Thanks for your help so far.

-wls

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 28 19:25:29 2007
Return-Path: <java-user-return-26514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97686 invoked from network); 28 Feb 2007 19:25:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2007 19:25:28 -0000
Received: (qmail 8699 invoked by uid 500); 28 Feb 2007 19:25:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8665 invoked by uid 500); 28 Feb 2007 19:25:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8654 invoked by uid 99); 28 Feb 2007 19:25:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 11:25:30 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.170.99.248] (HELO mail.authsum.com) (216.170.99.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 11:25:18 -0800
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.authsum.com (Postfix) with ESMTP id 3534A781A4
	for <java-user@lucene.apache.org>; Wed, 28 Feb 2007 14:24:57 -0500 (EST)
X-Virus-Scanned: amavisd-new at 
X-Spam-Score: -3.622
X-Spam-Level: 
Received: from mail.authsum.com ([127.0.0.1])
	by localhost (mail.authsum.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id xqBfqgAj8awe for <java-user@lucene.apache.org>;
	Wed, 28 Feb 2007 14:24:56 -0500 (EST)
Received: from mail.authsum.com (unknown [216.170.99.248])
	by mail.authsum.com (Postfix) with ESMTP id 5135C7810C
	for <java-user@lucene.apache.org>; Wed, 28 Feb 2007 14:24:56 -0500 (EST)
Message-ID: <7085189.2241172690696222.JavaMail.root@localhost.localdomain>
Date: Wed, 28 Feb 2007 14:24:56 -0500 (EST)
From: Phillip Rhodes <spamsucks@rhoderunner.com>
To: java-user@lucene.apache.org
Subject: Re: all records within distance -- small index
In-Reply-To: <bd818c7b0702272009x20234093w9d37eab039293ba7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_50_7265524.1172690696220"
X-Originating-IP: [209.166.180.139]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.622 tagged_above=-10 required=6.6
	tests=[ALL_TRUSTED=-1.8, AWL=0.280, BAYES_00=-2.599, HTML_40_50=0.496,
	HTML_MESSAGE=0.001]

------=_Part_50_7265524.1172690696220
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit

I just add a 1000 to it, but in my rounding, I always make sure that I have 4 decimal places. 

Here are some code snippets; 


//indexing the lat 
double lat = physicalAddress.getLatitude() + 1000.0; 
Double latitude = new Double(lat); 
document.add(new Field(Indexer.LATITUDE, latitude.toString(), Field.Store.YES, 
Field.Index.UN_TOKENIZED)); 


//constructing the lat filter 
Double minLatitude = new Double(sp.getInitialLatitude() 
- deltaLatitude + 1000.0); 
Double maxLatitude = new Double(sp.getInitialLatitude() 
+ deltaLatitude + 1000.0); 
RangeFilter latfilter = new RangeFilter(Indexer.LATITUDE, 
getRound(minLatitude), getRound(maxLatitude), true, 
true); 


//my rounding function 
public String getRound(Double value) { 
int decimalPlace = 4; 
BigDecimal bd = new BigDecimal(value); 
bd = bd.setScale(decimalPlace, BigDecimal.ROUND_UP); 
//r = bd.doubleValue(); 
String x = bd.toString(); 
log.debug("orig=" + value); 
log.debug("value=" + x); 
return x; 
//System.out.println(r); // output is 3.15 

} 


----- Original Message ----- 
From: "no spam" <mrs.nospam@gmail.com> 
To: java-user@lucene.apache.org 
Sent: Tuesday, February 27, 2007 11:09:04 PM (GMT-0500) America/New_York 
Subject: Re: all records within distance -- small index 

I just dug my book out. Chapter six shows a custom sort that implements a 
SortComparatorSource combined with a TermQuery. I like the way that works 
but I guess what I really need to do is a RangeQuery as well. 

I have another large index that has 1.2 million docs. I use a query along 
with a hit collector for that. I then get the lat/lon for each doc and calc 
the distance there. I use some radian math to prevent the expensive great 
circle distance first. I guess this is more expensive than your range query 
above? I've indexed my docs with lat/lon encoded in a single field comma 
separated. I still get < 1 second search times but I know there has to be a 
better way. 

Don't you have to multiply your lat/lon by 1000 to preserve decimal accuracy 
and then calc your offset? Maybe it's late and I'm not thinking about this 
right :) 

Mark 

------=_Part_50_7265524.1172690696220--


From java-user-return-26515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 28 19:41:40 2007
Return-Path: <java-user-return-26515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5360 invoked from network); 28 Feb 2007 19:41:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2007 19:41:39 -0000
Received: (qmail 35040 invoked by uid 500); 28 Feb 2007 19:41:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35012 invoked by uid 500); 28 Feb 2007 19:41:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35001 invoked by uid 99); 28 Feb 2007 19:41:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 11:41:42 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.109.24.22] (HELO smtp-vbr2.xs4all.nl) (194.109.24.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 11:41:30 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr2.xs4all.nl (8.13.8/8.13.8) with ESMTP id l1SJf9NQ004850
	for <java-user@lucene.apache.org>; Wed, 28 Feb 2007 20:41:09 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: optimizing single document searches
Date: Wed, 28 Feb 2007 20:41:08 +0100
User-Agent: KMail/1.8.2
References: <45E4BDDB.6000409@istandfor.com> <359a92830702271549r492d417dme10c5842e1bc9ebb@mail.gmail.com> <202736219-1172621870-cardhu_blackberry.rim.net-48713606-@bwe002-cell00.bisx.prod.on.blackberry>
In-Reply-To: <202736219-1172621870-cardhu_blackberry.rim.net-48713606-@bwe002-cell00.bisx.prod.on.blackberry>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200702282041.08968.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

On Wednesday 28 February 2007 01:01, Russ wrote:
> I will definatelly check it out tommorow.
> 
> I also forgot to mention that I am not interested in the hits themselves, 
only whether or not there was a hit.  Is there something I can use that's 
optimized for this scenario, or should I look into rewriting the search 
method of the indexarsearcher?  Currently I just check hits.size().

For a single document: get the Scorer from the Query via Weight.
Then check the return value of Scorer.next(), it will indicate whether
the only doc matches the query.

Regards,
Paul Elschot.


> 
> Russ
> Sent wirelessly via BlackBerry from T-Mobile.  
> 
> -----Original Message-----
> From: "Erick Erickson" <erickerickson@gmail.com>
> Date: Tue, 27 Feb 2007 18:49:45 
> To:java-user@lucene.apache.org
> Subject: Re: optimizing single document searches
> 
> Which is very, very cool. I wound up using it for hit counting and it
> works like a charm....
> 
> On 2/27/07, karl wettin <karl.wettin@gmail.com> wrote:
> >
> >
> > 28 feb 2007 kl. 00.25 skrev Ruslan Sivak:
> > ]
> >
> > > On a single document of 10k characters, doing about 40k searches
> > > takes about 5 seconds.  This is not bad, but I was wondering if I
> > > can somehow speed this up.
> >
> > Your corpus contains only one document? Try contrib/memory, an index
> > optimized for that scenario.
> >
> > --
> > karl
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> 
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 28 20:06:53 2007
Return-Path: <java-user-return-26516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16717 invoked from network); 28 Feb 2007 20:06:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2007 20:06:52 -0000
Received: (qmail 74311 invoked by uid 500); 28 Feb 2007 20:06:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74277 invoked by uid 500); 28 Feb 2007 20:06:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74264 invoked by uid 99); 28 Feb 2007 20:06:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 12:06:54 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of peterlkeegan@gmail.com designates 64.233.162.227 as permitted sender)
Received: from [64.233.162.227] (HELO nz-out-0506.google.com) (64.233.162.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 12:06:42 -0800
Received: by nz-out-0506.google.com with SMTP id i1so231990nzh
        for <java-user@lucene.apache.org>; Wed, 28 Feb 2007 12:06:21 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=JPWnIhW7EiurPIxB9SxXkpntESJsSTCEDqxHK8j7NvXQFWnM9QtI5f87TUZFjEoPFVnOKz7WoyTmKwU1lIWVAKwZ2uYyQB8u/pgYEh/+qN3MgQaLWjTqtkr/TtUjl54FuhhYvT6Pr1eJ277iCJVJKHI9ntzF7cOWB+t771GwJJM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NKtK8H4CQwPMbOM1pM0WUe3WWiyXyvBY5zCrzVq1m7zKV73gWJrv89d3XScx6dTPGay3ix/2m7dGp/z4jRGdCa5SDrYNaHTsftuoNebKyiUKjHs3IeFoWsnLgLqiGeDKsPWclBmiG/7w+TeNflAOuIEgPdJ05C794UYtUcgFq+M=
Received: by 10.65.126.16 with SMTP id d16mr1609572qbn.1172693181533;
        Wed, 28 Feb 2007 12:06:21 -0800 (PST)
Received: by 10.65.155.5 with HTTP; Wed, 28 Feb 2007 12:06:21 -0800 (PST)
Message-ID: <e994873a0702281206g3d68e2c7i7dba144d1b0e7e11@mail.gmail.com>
Date: Wed, 28 Feb 2007 15:06:21 -0500
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Sorting by Score
In-Reply-To: <359a92830702280524j660bdafav6e668166ccfd7d6a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19478_30332820.1172693181472"
References: <BFF5F6DFB538074B8A3FCD685C0DBE3601241334@MERC23.na.sas.com>
	 <Pine.LNX.4.58.0602011300220.14150@hal.rescomp.berkeley.edu>
	 <e994873a0702271252p273e38ecn888a4137c0d7a638@mail.gmail.com>
	 <Pine.LNX.4.58.0702271414330.29182@hal.rescomp.berkeley.edu>
	 <e994873a0702271518o3d28b4ei6f6d8d852f6eb1ee@mail.gmail.com>
	 <359a92830702271548g138dee6dp23c351475176aa81@mail.gmail.com>
	 <Pine.LNX.4.58.0702272127550.18243@hal.rescomp.berkeley.edu>
	 <359a92830702280524j660bdafav6e668166ccfd7d6a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19478_30332820.1172693181472
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Erich,

Yes, this seems to be the simplest way to implement score 'bucketization',
but wouldn't it be more efficient to do this with a custom ScoreComparator?
That way, you'd do the bucketizing and sorting in one 'step' (compare()).
Maybe the savings isn't measurable, though. A comparator might also allow
one to do a more sophisticated rounding or bucketizing since you'd be
getting 2 scores at a time.

Peter


On 2/28/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> Empirically, when I insert the elements in the FieldSortedHitQueue
> they get sorted according to the Sort object. The original query
> that gives me a TopDocs applied
> no secondary sorting, only relevancy. Since I normalized
> all the scores into one of only 5 discrete values, and secondary
> sorting was applied to all docs with the same score when I inserted
> them in the FieldSortedHitQueue.
>
> Now popping things of the FieldSortedHitQueue is ordered the
> way I want.
>
> You could just operate on the FieldSortedHitQueue at this point, but
> I decided the rest of my code would be simpler if I stuffed them back
> into the TopDocs, so there's some explanation below that you can
> just skip if I've cleared things up already.....
>
> *****************
> The step I left out is moving the documents from the
> FIeldSortedHitQueue back to topDocs.scoreDocs.
> So the steps are as follows..
>
> 1> "bucketize" the scores. That is, go through the
> TopDocs.scoreDocs and adjust each raw score into
> one of my buckets. This is made easy by the
> existence of topDocs.getMaxScore. TopDocs has
> had no sorting other than relevancy applied so far.
>
> 2> assemble the FieldSortedHitQueue by inserting
> each element from scoreDocs into it, with a suitable
> Sort object, relevance is the first field (SortField.FIELD_SCORE).
>
> 3> pop the entries off the FieldSortedHitQueue, overwriting
> the elements in topDocs.scoreDocs.
>
> I left out step <3>, although I suppose you could
> operate directly on the FieldSortedHitQueue.
>
> NOTE: in my case, I just put everything back in the
> scoreDocs without attempting any efficiencies. If I
> needed more performance, I'd only put as many items
> back as I needed to display. But as I wrote yesterday,
> performance isn't an issue so there's no point. Although
> I know one place to look if we need to squeeze more QPS.
>
> How efficient this is is an open question. But it's "fast enough"
> and relatively simple so I stopped looking for more
> efficiencies....
>
> Erick
>
> On 2/28/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> >
> >
> > : The first part was just to iterate through the TopDocs that's
> available
> > to
> > : my and normalize the scores right in the ScoreDocs. Like this...
> >
> > Won't that be done after the Lucene does the hitcollecting/sorting? ...
> he
> > wants the "bucketing" to happen as part of hte scoring so that the
> > secondary sort will determine the ordering within the bucket.
> >
> > (or am i missing something about your description?)
> >
> >
> >
> >
> > -Hoss
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_19478_30332820.1172693181472--

From java-user-return-26517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 28 21:31:52 2007
Return-Path: <java-user-return-26517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57919 invoked from network); 28 Feb 2007 21:31:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2007 21:31:51 -0000
Received: (qmail 39050 invoked by uid 500); 28 Feb 2007 21:31:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39018 invoked by uid 500); 28 Feb 2007 21:31:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39007 invoked by uid 99); 28 Feb 2007 21:31:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 13:31:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [72.3.240.46] (HELO s68659.istandfor.com) (72.3.240.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 13:31:40 -0800
Received: from [192.168.1.36] (pool-162-84-203-177.ny5030.east.verizon.net [162.84.203.177])
	(authenticated bits=0)
	by s68659.istandfor.com (8.12.11.20060308/8.12.11) with ESMTP id l1SLUueK004686
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 28 Feb 2007 15:31:19 -0600
Message-ID: <45E5F417.7080802@istandfor.com>
Date: Wed, 28 Feb 2007 16:28:55 -0500
From: Ruslan Sivak <rsivak@istandfor.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: optimizing single document searches
References: <45E4BDDB.6000409@istandfor.com> <6725DE81-8D20-49E2-873E-FB775929CD18@gmail.com> <1887451458-1172620619-cardhu_blackberry.rim.net-1470398416-@bwe035-cell00.bisx.prod.on.blackberry> <E43C5512-7A80-4D43-8E7A-F3533A50D9E4@gmail.com>
In-Reply-To: <E43C5512-7A80-4D43-8E7A-F3533A50D9E4@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

karl wettin wrote:
>
> 28 feb 2007 kl. 00.49 skrev Russ:
>
>> Thanks, I will try it tommorow... Is it significantly different from 
>> using a standard index on a ramdir?
>>
>
> A bit different.
>
> You can also try LUCENE-550. It has about the same speed as 
> contrib/memory but can handle multiple documents and use reader, 
> writer and searcher as any other index.
>
> --karl
>
Karl,

Thank you.  I tried the contrib/memory and it's awesome.  Got my search 
time down to 300ms from 5 seconds. 

I'm still having some performance issues on the set up.  I can probably 
live with them, as I'll be caching these terms, but maybe I can optimize 
it somehow.  It currently takes about 3.5 seconds to set up.  I am 
basically creating 40k SpanNearQueries.  Here is my method that creates 
them.  Is there anything I can improve?

private static Analyzer analyzer=new StandardAnalyzer();
public static SpanNearQuery createSpanNearQuery(String string, int slop, 
boolean inOrder)
    {
        Vector terms=new Vector();
        TokenStream tokenizer=Lucene.analyzer.tokenStream("body", new 
StringReader(string));
        Token token = null;
        do {

            try {
                token=tokenizer.next();
            } catch (Exception e) {
                e.printStackTrace();
            }
            if (token!=null)
            {
                terms.add(new SpanTermQuery(new 
Term("body",token.termText())));
            }
        }
        while (token!=null && terms.size()<10);
       
        SpanTermQuery[] termsArray=new SpanTermQuery[terms.size()];
        for (int i=0;i<terms.size();i++)
        {
            termsArray[i]=(SpanTermQuery) terms.get(i);
        }
        return new SpanNearQuery(termsArray,slop,inOrder);
    }


Russ

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 28 21:38:11 2007
Return-Path: <java-user-return-26518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63429 invoked from network); 28 Feb 2007 21:38:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2007 21:38:10 -0000
Received: (qmail 57213 invoked by uid 500); 28 Feb 2007 21:38:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57185 invoked by uid 500); 28 Feb 2007 21:38:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57174 invoked by uid 99); 28 Feb 2007 21:38:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 13:38:11 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.184.232 as permitted sender)
Received: from [64.233.184.232] (HELO wr-out-0506.google.com) (64.233.184.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 13:38:00 -0800
Received: by wr-out-0506.google.com with SMTP id 36so390206wra
        for <java-user@lucene.apache.org>; Wed, 28 Feb 2007 13:37:39 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kIf4x+b2bbufmaprV5H/KYzbzGuvdjzdG/zN/fGNXNuu9KpeBZh/6PMnLDVGg8Ets2COut0SMwMK4u5wj8V+b2h8GfZY8t5h3sDYf28SqBcXwIK+s9xFwjDPdTQhOzI/SinUdPGUnVppSYDpHeVsfo67oUlUHzjLXdrFKE6A4OI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=HfyBK8HW5BkfQZCUqCeBrvsa7yDJQKhzzlA0bp8Zr4r/hjddmP3TGuz9tVR5bv/WNj8Gs+OESeU0qhWo6bws2G2pjPj+Nuxj9Lu4mKY6TjAU0M7YRq74EM4QTFp/5SRLIeFXVRnlvmwtsszvlW5qxkQrn3jgd6HHkwKkM++qz8M=
Received: by 10.114.79.1 with SMTP id c1mr60774wab.1172698619451;
        Wed, 28 Feb 2007 13:36:59 -0800 (PST)
Received: by 10.114.58.3 with HTTP; Wed, 28 Feb 2007 13:36:59 -0800 (PST)
Message-ID: <359a92830702281336t3975875eh89c580cb7bb34a96@mail.gmail.com>
Date: Wed, 28 Feb 2007 16:36:59 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Sorting by Score
In-Reply-To: <e994873a0702281206g3d68e2c7i7dba144d1b0e7e11@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_54604_13313288.1172698619414"
References: <BFF5F6DFB538074B8A3FCD685C0DBE3601241334@MERC23.na.sas.com>
	 <Pine.LNX.4.58.0602011300220.14150@hal.rescomp.berkeley.edu>
	 <e994873a0702271252p273e38ecn888a4137c0d7a638@mail.gmail.com>
	 <Pine.LNX.4.58.0702271414330.29182@hal.rescomp.berkeley.edu>
	 <e994873a0702271518o3d28b4ei6f6d8d852f6eb1ee@mail.gmail.com>
	 <359a92830702271548g138dee6dp23c351475176aa81@mail.gmail.com>
	 <Pine.LNX.4.58.0702272127550.18243@hal.rescomp.berkeley.edu>
	 <359a92830702280524j660bdafav6e668166ccfd7d6a@mail.gmail.com>
	 <e994873a0702281206g3d68e2c7i7dba144d1b0e7e11@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_54604_13313288.1172698619414
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

It may well be, but as I said this is efficient enough for my needs
so I didn't pursue it. One of my pet peeves is spending time making
things "more efficient" when there's no need, and my index isn't
going to grow enough larger to worry about that now <G>...

Erick

On 2/28/07, Peter Keegan <peterlkeegan@gmail.com> wrote:
>
> Erich,
>
> Yes, this seems to be the simplest way to implement score 'bucketization',
> but wouldn't it be more efficient to do this with a custom
> ScoreComparator?
> That way, you'd do the bucketizing and sorting in one 'step' (compare()).
> Maybe the savings isn't measurable, though. A comparator might also allow
> one to do a more sophisticated rounding or bucketizing since you'd be
> getting 2 scores at a time.
>
> Peter
>
>
> On 2/28/07, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > Empirically, when I insert the elements in the FieldSortedHitQueue
> > they get sorted according to the Sort object. The original query
> > that gives me a TopDocs applied
> > no secondary sorting, only relevancy. Since I normalized
> > all the scores into one of only 5 discrete values, and secondary
> > sorting was applied to all docs with the same score when I inserted
> > them in the FieldSortedHitQueue.
> >
> > Now popping things of the FieldSortedHitQueue is ordered the
> > way I want.
> >
> > You could just operate on the FieldSortedHitQueue at this point, but
> > I decided the rest of my code would be simpler if I stuffed them back
> > into the TopDocs, so there's some explanation below that you can
> > just skip if I've cleared things up already.....
> >
> > *****************
> > The step I left out is moving the documents from the
> > FIeldSortedHitQueue back to topDocs.scoreDocs.
> > So the steps are as follows..
> >
> > 1> "bucketize" the scores. That is, go through the
> > TopDocs.scoreDocs and adjust each raw score into
> > one of my buckets. This is made easy by the
> > existence of topDocs.getMaxScore. TopDocs has
> > had no sorting other than relevancy applied so far.
> >
> > 2> assemble the FieldSortedHitQueue by inserting
> > each element from scoreDocs into it, with a suitable
> > Sort object, relevance is the first field (SortField.FIELD_SCORE).
> >
> > 3> pop the entries off the FieldSortedHitQueue, overwriting
> > the elements in topDocs.scoreDocs.
> >
> > I left out step <3>, although I suppose you could
> > operate directly on the FieldSortedHitQueue.
> >
> > NOTE: in my case, I just put everything back in the
> > scoreDocs without attempting any efficiencies. If I
> > needed more performance, I'd only put as many items
> > back as I needed to display. But as I wrote yesterday,
> > performance isn't an issue so there's no point. Although
> > I know one place to look if we need to squeeze more QPS.
> >
> > How efficient this is is an open question. But it's "fast enough"
> > and relatively simple so I stopped looking for more
> > efficiencies....
> >
> > Erick
> >
> > On 2/28/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> > >
> > >
> > > : The first part was just to iterate through the TopDocs that's
> > available
> > > to
> > > : my and normalize the scores right in the ScoreDocs. Like this...
> > >
> > > Won't that be done after the Lucene does the hitcollecting/sorting?
> ...
> > he
> > > wants the "bucketing" to happen as part of hte scoring so that the
> > > secondary sort will determine the ordering within the bucket.
> > >
> > > (or am i missing something about your description?)
> > >
> > >
> > >
> > >
> > > -Hoss
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>

------=_Part_54604_13313288.1172698619414--

From java-user-return-26519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 28 21:39:50 2007
Return-Path: <java-user-return-26519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65427 invoked from network); 28 Feb 2007 21:39:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2007 21:39:49 -0000
Received: (qmail 61808 invoked by uid 500); 28 Feb 2007 21:39:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61776 invoked by uid 500); 28 Feb 2007 21:39:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61765 invoked by uid 99); 28 Feb 2007 21:39:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 13:39:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.104.95.4] (HELO listing.marketingbrokers.com) (66.104.95.4)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 28 Feb 2007 13:39:38 -0800
Received: from ip66-104-95-21.z95-104-66.customer.algx.net ([66.104.95.21])
          by listing.marketingbrokers.com (JAMES SMTP Server 2.2.0) with SMTP ID 79
          for <java-user@lucene.apache.org>;
          Wed, 28 Feb 2007 13:38:55 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <6B6D3063DF0A7A4DB8A989D40C61BEB303EFDBDC@EMAIL02.wescodist.com>
References: <ae6f38f60702281112t1fb79fadpc34c16a6a574da11@mail.gmail.com> <6B6D3063DF0A7A4DB8A989D40C61BEB303EFDBDC@EMAIL02.wescodist.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B6D760B0-69FC-4B40-81B7-81C842E623B6@marketingbrokers.com>
Content-Transfer-Encoding: 7bit
From: "Peter W." <peter@marketingbrokers.com>
Subject: Re: Soliciting Design Thoughts on Date Searching
Date: Wed, 28 Feb 2007 13:38:56 -0800
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

There are a few ways to solve this but no
Date extraction filter I know of. Adding
a hundred fields for each Lucene doc
seems bloated.

First, get your text out of the various
source documents (.doc,.pdf,.html) using
available tools out there described in the
Lucene in Action book.

It sounds like you know Perl, so next
try regexes to pull out dates from the
text using java.util.regex and make sure to
remove extra whitespace.

Put your clean date Strings into a java TreeMap
or TreeSet collection to eliminate duplicates.

Finally, loop thru the collection adding items
to a StringBuffer delimited by commas, then make
one long String (holding all your dates) and add
to the Lucene doc as one Field.Text.

You might be able to set that Field to indexed, but not
stored to save space.

Regards,

Peter W.



On Feb 28, 2007, at 11:22 AM, Aigner, Thomas wrote:

> Walt,
> 	I am no expert, but it sounds like you need to associate many
> dates to a single record.
> ...
>
> Tom
>
>
> -----Original Message-----
> From: Walt Stoneburner [mailto:walt.stoneburner@gmail.com]
> Sent: Wednesday, February 28, 2007 2:13 PM
> To: java-user@lucene.apache.org
> Subject: Re: Soliciting Design Thoughts on Date Searching
>
> ...
> The issue isn't in using DateRange on a Date Field, but in knowing if
> there is some filter that already exists which extracts dates from a
> body of text to put into a Date Field.  If not, the DateTool solution
> is a helpful step in building my own filter; I just don't want to
> reinvent the wheel if it already exists.
>
> Now this is where my personal knowledge of Lucene breaks down.
> Assuming I can extract each date from a source's body and convert it
> to a usable format, can a Lucene Date Field hold more than one date?
> For example, is a strict name/value pair, or can the value be a array
> of dates, or can I append additional dates under the same name?
>
> Super generalizing, to break the discussion from a date specific
> example, suppose I did this:
> document.add( Field.Text( "title", "Learning Perl, Fourth Edition" )
> ); // real title
> document.add( Field.Text( "title", "Camel Book" ) );  // my wife knows
> it by the cover
>
> Could I do a search for both the long and short title against the  
> title
> field?
>
> If the answer is yes, problem solved!  I'll just pile on a ton of
> dates as I find them and add them to the document.  (Note, I could
> easily have hundreds.)
>
> for ( Date somedate : allDatesFoundInSource[] ) {
>   document.add( Field.Text( "embeddedDates", somedate ) );  // Right
> way to do this?
> }
>
>
> If the answer is no, it better illustrates the problem I face:
> searching across an arbitrary collection of dates.
>
>
> Erick, if I've missed something obvious in the archives, I'll happily
> accept my public flogging.    Thanks for your help so far.
>
> -wls

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 28 21:57:32 2007
Return-Path: <java-user-return-26520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74196 invoked from network); 28 Feb 2007 21:57:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2007 21:57:31 -0000
Received: (qmail 4356 invoked by uid 500); 28 Feb 2007 21:57:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4325 invoked by uid 500); 28 Feb 2007 21:57:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4313 invoked by uid 99); 28 Feb 2007 21:57:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 13:57:33 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.155 as permitted sender)
Received: from [195.212.29.155] (HELO mtagate6.de.ibm.com) (195.212.29.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 13:57:19 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate6.de.ibm.com (8.13.8/8.13.8) with ESMTP id l1SLuwVS282768
	for <java-user@lucene.apache.org>; Wed, 28 Feb 2007 21:56:58 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.2) with ESMTP id l1SLuvCA1814734
	for <java-user@lucene.apache.org>; Wed, 28 Feb 2007 22:56:58 +0100
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l1SLuvv9013941
	for <java-user@lucene.apache.org>; Wed, 28 Feb 2007 22:56:57 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l1SLuvrt013938
	for <java-user@lucene.apache.org>; Wed, 28 Feb 2007 22:56:57 +0100
In-Reply-To: <45E4DCE5.7030605@teamware.com>
Subject: Re: Best way to returning hits after search?
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF67020611.68B2D004-ON88257290.007660C9-88257290.007817AC@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Wed, 28 Feb 2007 13:51:43 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 28/02/2007 23:56:56
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Antony Bowesman <adb@teamware.com> wrote on 27/02/2007 17:37:41:

> Doron Cohen wrote:
> > The collect() method is going to be invoked once for each document that
> > matches the query (having nonzero score). If the index is very large,
that
> > may turn to be a very large number of calls. Often, search applications
> > only fetch additional data (doc fields) for only a small subset of the
> > entire set of documents matching a query - e.g. first page (0-9),
second
> > page (10-19), etc.  But if your application is going to fetch in an
> > exhaustive manner, and especially for a short field like DB_ID, it
> > sometimes makes sense to cache in memory the entire field (its values
for
> > all the docs), for the entire life of the index reader/searcher, and
use
> > that cached data. The collect method can then use that cached data.
>
> That's an excellent idea!  We cannot easily change our client
> implementation, so
> have to support the exhaustive retrieval for now, although I do limit the

> absolute max hits that will be returned.  We are hoping to implement
> paging in a
> later client version.
>
> I'm not sure I can cache all the GUIDs though.  A GUID is 20 bytes
> and there are
> two that need to be cached.  The document count could be up to
100M,though in
> most cases <20M.  I am keeping a BitSet filter cache for a searcher for
each
> user's mail, so I could extend that to cache all the IDs for that
> user and give
> that cache a shortish life and/or limit the total cache available.
> That would
> really help.
>
> I'll have a play - thanks for the input.
> Antony

If you decide to cache stored field value in memory, FieldCache may be
useful for this - so you don't have to implement your own cache - you can
access the field values with something like:
   FieldCache fieldCache = FieldCache.DEFAULT;
   String db_id_field[] =
fieldCache.getStrings(indexReader,"DB_ID_FIELD_NAME");
Those values are valid for the lifetime of the index-reader. Once a new
index reader is opened, when GC collects the unused old index reader
object, it would also be able to collect (from the cache) unused field
values.

See also http://www.gossamer-threads.com/lists/lucene/java-user/39352

Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 28 22:23:12 2007
Return-Path: <java-user-return-26521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88873 invoked from network); 28 Feb 2007 22:23:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2007 22:23:11 -0000
Received: (qmail 44445 invoked by uid 500); 28 Feb 2007 22:23:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44420 invoked by uid 500); 28 Feb 2007 22:23:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44409 invoked by uid 99); 28 Feb 2007 22:23:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 14:23:13 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [165.212.64.22] (HELO gateout02.mbox.net) (165.212.64.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 14:23:01 -0800
Received: from gateout02.mbox.net (gateout02.mbox.net [165.212.64.22])
	by gateout02.mbox.net (Postfix) with ESMTP id 60AD917F1;
	Wed, 28 Feb 2007 22:22:23 +0000 (GMT)
Received: from GW2.EXCHPROD.USA.NET [165.212.116.254] by gateout02.mbox.net via smtad (C8.MAIN.3.34P) 
	with ESMTP id XID555LBbwwX4853Xo2; Wed, 28 Feb 2007 22:22:23 -0000
X-USANET-Source: 165.212.116.254 IN   jkim@sitescape.com GW2.EXCHPROD.USA.NET
X-USANET-MsgId: XID555LBbwwX4853Xo2
Received: from PEACE ([216.195.213.27]) by GW2.EXCHPROD.USA.NET with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 28 Feb 2007 15:22:18 -0700
From: "Jong Kim" <jkim@sitescape.com>
To: <java-user@lucene.apache.org>
Subject: ranking/scoring algorithm in details
Date: Wed, 28 Feb 2007 17:20:36 -0500
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0088_01C75B5C.C314AF20"
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
Thread-Index: AcdbhqtXPqZ5iSllQ5uP2gNFsVfTQg==
Message-ID: <GW2aXj97vPYGrN7kf0V00025cfb@GW2.EXCHPROD.USA.NET>
X-OriginalArrivalTime: 28 Feb 2007 22:22:18.0122 (UTC) FILETIME=[E81BA6A0:01C75B86]
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0088_01C75B5C.C314AF20
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi,
 
Does anyone know of a written document that describes in some details
how Lucene's ranking/scoring algorithm works? I'm safely assuming that
a single consistent algorithm is being used to compute the scores of
each matching documents (with or without explicit boost factors in the
query) and rank them accordingly. 
 
I would appreciate any pointer to such information, or your own description
if you happen to know that. 
 
Thanks in advance.
/Jong

------=_NextPart_000_0088_01C75B5C.C314AF20--


From java-user-return-26522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 28 23:26:44 2007
Return-Path: <java-user-return-26522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10114 invoked from network); 28 Feb 2007 23:26:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2007 23:26:43 -0000
Received: (qmail 47141 invoked by uid 500); 28 Feb 2007 23:26:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47112 invoked by uid 500); 28 Feb 2007 23:26:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47090 invoked by uid 99); 28 Feb 2007 23:26:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 15:26:43 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 15:26:32 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 7401E5B771; Wed, 28 Feb 2007 15:26:11 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 66F3D7F403
	for <java-user@lucene.apache.org>; Wed, 28 Feb 2007 15:26:11 -0800 (PST)
Date: Wed, 28 Feb 2007 15:26:11 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: Soliciting Design Thoughts on Date Searching
In-Reply-To: <ae6f38f60702281112t1fb79fadpc34c16a6a574da11@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0702281520430.13666@hal.rescomp.berkeley.edu>
References: <ae6f38f60702281112t1fb79fadpc34c16a6a574da11@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I have generic material that _contain_ dates: historic time lines,
: certificates, news articles, forms, deeds, testimonies, and wildly
: free form genealogical information.  The dates have no specific
: structure, obvious context, nor consistency.

identifying an extracting dates from bulk text sounds like a pretyt
interesting analysys problem ... if you wrote a Tokenizer that could
recognize dates, you could then format them using something like DateTools
to ensure it would be easy to find them ... but Lucene Analyzers can not
currently create terns in multiple fields - so if you wanted a special
"date" field for each doc, you would have to extract those dates in a
preprocessing step.

if you aren't picky how your index is stored however, there is no reason
why you can't have a single field with your "text" terms and your "date"
terms ... you would just have to be careful to know the differnece in
searching ... make your analyzer prefix all of your date terms with
soemthing it would never let your regular terms start with (ie "__")  and
make sure you bear that structure in mind when creating your RangeFilter
on dates.

: Now this is where my personal knowledge of Lucene breaks down.
: Assuming I can extract each date from a source's body and convert it
: to a usable format, can a Lucene Date Field hold more than one date?

fields can contain as many values as you want -- or none at all.

: If the answer is yes, problem solved!  I'll just pile on a ton of

definitely yes.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 28 23:36:47 2007
Return-Path: <java-user-return-26523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14750 invoked from network); 28 Feb 2007 23:36:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2007 23:36:46 -0000
Received: (qmail 66672 invoked by uid 500); 28 Feb 2007 23:36:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66637 invoked by uid 500); 28 Feb 2007 23:36:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66626 invoked by uid 99); 28 Feb 2007 23:36:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 15:36:47 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 15:36:36 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 43EB95B76E; Wed, 28 Feb 2007 15:36:16 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 34C8B7F403
	for <java-user@lucene.apache.org>; Wed, 28 Feb 2007 15:36:16 -0800 (PST)
Date: Wed, 28 Feb 2007 15:36:16 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: ParallelSearcher in multi-node environment
In-Reply-To: <9182802.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0702281535150.13666@hal.rescomp.berkeley.edu>
References: <9182802.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I want to execute parallel search over several machines. But
: ParallelSearcher doesn't look perfect. It creates threads and spawns many
: requests to the underlying Searchables (over a network) for a single search.
: Is there a decent implementation of the parallel search over remote indexes
: somewhere?

what would you consider "decent implementation" of a parallel search? ...
how could it be done in parallel without spawning seperate threads for
each sub Searchable?



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 28 23:47:33 2007
Return-Path: <java-user-return-26524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18268 invoked from network); 28 Feb 2007 23:47:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2007 23:47:33 -0000
Received: (qmail 79019 invoked by uid 500); 28 Feb 2007 23:47:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78986 invoked by uid 500); 28 Feb 2007 23:47:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78972 invoked by uid 99); 28 Feb 2007 23:47:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 15:47:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [198.144.201.51] (HELO esseff.org) (198.144.201.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 15:47:24 -0800
Received: from localhost (localhost [127.0.0.1])
	by esseff.org (Postfix) with ESMTP id D21B95F661F
	for <java-user@lucene.apache.org>; Wed, 28 Feb 2007 15:49:15 -0800 (PST)
X-Quarantine-ID: <VDBwNawKfqTE>
X-Virus-Scanned: amavisd-new at esseff.org
Received: from esseff.org ([127.0.0.1])
	by localhost (esseff.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id VDBwNawKfqTE for <java-user@lucene.apache.org>;
	Wed, 28 Feb 2007 15:49:12 -0800 (PST)
Received: from professorville.windows.esseff.org (professorville.windows.esseff.org [10.0.1.16])
	by esseff.org (Postfix) with ESMTP id EB3A85F661A
	for <java-user@lucene.apache.org>; Wed, 28 Feb 2007 15:49:11 -0800 (PST)
Subject: RE: ranking/scoring algorithm in details
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Content-class: urn:content-classes:message
Date: Wed, 28 Feb 2007 15:46:56 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Message-ID: <392521EA2692A2418DF48C331E61E32506ABFF@professorville.windows.esseff.org>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: ranking/scoring algorithm in details
Thread-Index: AcdbhqtXPqZ5iSllQ5uP2gNFsVfTQgAC/hxQ
References: <GW2aXj97vPYGrN7kf0V00025cfb@GW2.EXCHPROD.USA.NET>
From: "Steven Parkes" <steven_parkes@esseff.org>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

http://lucene.apache.org/java/docs/scoring.html
(which you can also find by googling "lucene scoring")

-----Original Message-----
From: Jong Kim [mailto:jkim@sitescape.com]=20
Sent: Wednesday, February 28, 2007 2:21 PM
To: java-user@lucene.apache.org
Subject: ranking/scoring algorithm in details

Hi,
=20
Does anyone know of a written document that describes in some details
how Lucene's ranking/scoring algorithm works? I'm safely assuming that
a single consistent algorithm is being used to compute the scores of
each matching documents (with or without explicit boost factors in the
query) and rank them accordingly.=20
=20
I would appreciate any pointer to such information, or your own
description
if you happen to know that.=20
=20
Thanks in advance.
/Jong

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 28 23:56:44 2007
Return-Path: <java-user-return-26525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21477 invoked from network); 28 Feb 2007 23:56:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2007 23:56:43 -0000
Received: (qmail 92255 invoked by uid 500); 28 Feb 2007 23:56:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92227 invoked by uid 500); 28 Feb 2007 23:56:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92216 invoked by uid 99); 28 Feb 2007 23:56:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 15:56:45 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [198.144.201.51] (HELO esseff.org) (198.144.201.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 15:56:33 -0800
Received: from localhost (localhost [127.0.0.1])
	by esseff.org (Postfix) with ESMTP id A98975F662A
	for <java-user@lucene.apache.org>; Wed, 28 Feb 2007 15:58:25 -0800 (PST)
X-Quarantine-ID: <7nd0Ae5qIGgx>
X-Virus-Scanned: amavisd-new at esseff.org
Received: from esseff.org ([127.0.0.1])
	by localhost (esseff.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 7nd0Ae5qIGgx for <java-user@lucene.apache.org>;
	Wed, 28 Feb 2007 15:58:19 -0800 (PST)
Received: from professorville.windows.esseff.org (professorville.windows.esseff.org [10.0.1.16])
	by esseff.org (Postfix) with ESMTP id 9C1215F65A3
	for <java-user@lucene.apache.org>; Wed, 28 Feb 2007 15:58:19 -0800 (PST)
Subject: RE: Soliciting Design Thoughts on Date Searching
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Content-class: urn:content-classes:message
Date: Wed, 28 Feb 2007 15:56:02 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Message-ID: <392521EA2692A2418DF48C331E61E32506AC00@professorville.windows.esseff.org>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Soliciting Design Thoughts on Date Searching
Thread-Index: Acdbj+lt360V+L6RRCKz9XP2T4nr3gAAtqtw
References: <ae6f38f60702281112t1fb79fadpc34c16a6a574da11@mail.gmail.com> <Pine.LNX.4.58.0702281520430.13666@hal.rescomp.berkeley.edu>
From: "Steven Parkes" <steven_parkes@esseff.org>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Yeah, date finding is a little like entity extraction, since dates can
have many formats, depending on how crazy you want to get ("a week from
tomorrow" is 3/8/2007 if you know that this e-mail was written today).
So much so that I went and looked up lingpipe, but they seem to not be
concerned with dates.=20

Even if you don't get crazy, it's not straightforward: is 3/8/2007 March
8th or August 3rd? Dates can be written many ways. The real challenge is
recognizing dates.

As Chris said, once you have them, you just stick them in the token
stream. In fact, you can emit the date token (as Chris suggested, with
some delimiter that helps you know it's a date) with a position
increment of zero and then emit the regular tokens so that the token
stream will have both and aligned.

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20
Sent: Wednesday, February 28, 2007 3:26 PM
To: Lucene Users
Subject: Re: Soliciting Design Thoughts on Date Searching


: I have generic material that _contain_ dates: historic time lines,
: certificates, news articles, forms, deeds, testimonies, and wildly
: free form genealogical information.  The dates have no specific
: structure, obvious context, nor consistency.

identifying an extracting dates from bulk text sounds like a pretyt
interesting analysys problem ... if you wrote a Tokenizer that could
recognize dates, you could then format them using something like
DateTools
to ensure it would be easy to find them ... but Lucene Analyzers can not
currently create terns in multiple fields - so if you wanted a special
"date" field for each doc, you would have to extract those dates in a
preprocessing step.

if you aren't picky how your index is stored however, there is no reason
why you can't have a single field with your "text" terms and your "date"
terms ... you would just have to be careful to know the differnece in
searching ... make your analyzer prefix all of your date terms with
soemthing it would never let your regular terms start with (ie "__")
and
make sure you bear that structure in mind when creating your RangeFilter
on dates.

: Now this is where my personal knowledge of Lucene breaks down.
: Assuming I can extract each date from a source's body and convert it
: to a usable format, can a Lucene Date Field hold more than one date?

fields can contain as many values as you want -- or none at all.

: If the answer is yes, problem solved!  I'll just pile on a ton of

definitely yes.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-26526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 01 05:30:05 2007
Return-Path: <java-user-return-26526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17333 invoked from network); 1 Mar 2007 05:30:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Mar 2007 05:30:04 -0000
Received: (qmail 89125 invoked by uid 500); 1 Mar 2007 05:30:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89082 invoked by uid 500); 1 Mar 2007 05:30:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89071 invoked by uid 99); 1 Mar 2007 05:30:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 21:30:06 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 21:29:55 -0800
Received: by nf-out-0910.google.com with SMTP id i2so724374nfe
        for <java-user@lucene.apache.org>; Wed, 28 Feb 2007 21:29:33 -0800 (PST)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=oy4W4zNNYNUobqkWos9HCP9LeJrxsT/a6deMR7fAmPyXJRzpfUjdh9y0XlctbTpWX/RdELiOy/YyDkKs/N5yoE8rgT1p8VE0KdE0RjlpSpuV7zgb63zVqujAkmMoPWlAkJnyK+liHMD/Y9xFsvrggTSJ3NJYnBC2uJbatJj5d7g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=rzA1xfnkvB1I2bEu6a/Ix6ONX8IgMDpDnRqzPDhglnrbLIoOK5fsXEtr6gpgrrY2XFKz3sbIRyUn/LGTkPzbOdl2r90Oz759dwI0FaAN/Ou0qgzNlQ9g2uptyIPrc5xAUjSO+hfXyYeYIhKWyQnYcWfLwCyOhxt3eIeKNB7R+Zo=
Received: by 10.82.136.4 with SMTP id j4mr478893bud.1172726973193;
        Wed, 28 Feb 2007 21:29:33 -0800 (PST)
Received: by 10.82.163.2 with HTTP; Wed, 28 Feb 2007 21:29:33 -0800 (PST)
Message-ID: <34b8543c0702282129l32c71e3i48f0502c4a22e08f@mail.gmail.com>
Date: Thu, 1 Mar 2007 08:59:33 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Best way to returning hits after search?
In-Reply-To: <OF67020611.68B2D004-ON88257290.007660C9-88257290.007817AC@il.ibm.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24877_6196789.1172726973157"
References: <45E4DCE5.7030605@teamware.com>
	 <OF67020611.68B2D004-ON88257290.007660C9-88257290.007817AC@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24877_6196789.1172726973157
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello
I am implemented an IndexResultSet just like java.sql.ResultSet with all its
methods. when I call searcher.search(...) I pass a the returned Hits to my
IndexResultSet.
in the IndexResultSet I have getString(String) getString(int) getInt()
next() previous() absolute() and all methods of the java.sql.ResultSet
besides, because I am using MyFaces in my application, I customized
DataModel in order to support pagination and I keep open my reader so,
pagination works fine.
in addition, I provided a SercherPool to keep readers open and close when
the user ends his searching or an idle time occured.


On 3/1/07, Doron Cohen <DORONC@il.ibm.com> wrote:
>
> Antony Bowesman <adb@teamware.com> wrote on 27/02/2007 17:37:41:
>
> > Doron Cohen wrote:
> > > The collect() method is going to be invoked once for each document
> that
> > > matches the query (having nonzero score). If the index is very large,
> that
> > > may turn to be a very large number of calls. Often, search
> applications
> > > only fetch additional data (doc fields) for only a small subset of the
> > > entire set of documents matching a query - e.g. first page (0-9),
> second
> > > page (10-19), etc.  But if your application is going to fetch in an
> > > exhaustive manner, and especially for a short field like DB_ID, it
> > > sometimes makes sense to cache in memory the entire field (its values
> for
> > > all the docs), for the entire life of the index reader/searcher, and
> use
> > > that cached data. The collect method can then use that cached data.
> >
> > That's an excellent idea!  We cannot easily change our client
> > implementation, so
> > have to support the exhaustive retrieval for now, although I do limit
> the
>
> > absolute max hits that will be returned.  We are hoping to implement
> > paging in a
> > later client version.
> >
> > I'm not sure I can cache all the GUIDs though.  A GUID is 20 bytes
> > and there are
> > two that need to be cached.  The document count could be up to
> 100M,though in
> > most cases <20M.  I am keeping a BitSet filter cache for a searcher for
> each
> > user's mail, so I could extend that to cache all the IDs for that
> > user and give
> > that cache a shortish life and/or limit the total cache available.
> > That would
> > really help.
> >
> > I'll have a play - thanks for the input.
> > Antony
>
> If you decide to cache stored field value in memory, FieldCache may be
> useful for this - so you don't have to implement your own cache - you can
> access the field values with something like:
>    FieldCache fieldCache = FieldCache.DEFAULT;
>    String db_id_field[] =
> fieldCache.getStrings(indexReader,"DB_ID_FIELD_NAME");
> Those values are valid for the lifetime of the index-reader. Once a new
> index reader is opened, when GC collects the unused old index reader
> object, it would also be able to collect (from the cache) unused field
> values.
>
> See also http://www.gossamer-threads.com/lists/lucene/java-user/39352
>
> Doron
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,
Mohammad

------=_Part_24877_6196789.1172726973157--

From java-user-return-26527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 01 07:50:25 2007
Return-Path: <java-user-return-26527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57296 invoked from network); 1 Mar 2007 07:50:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Mar 2007 07:50:25 -0000
Received: (qmail 46919 invoked by uid 500); 1 Mar 2007 07:50:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46894 invoked by uid 500); 1 Mar 2007 07:50:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46883 invoked by uid 99); 1 Mar 2007 07:50:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Feb 2007 23:50:22 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.191.69.36] (HELO web30104.mail.mud.yahoo.com) (209.191.69.36)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 28 Feb 2007 23:50:10 -0800
Received: (qmail 11311 invoked by uid 60001); 1 Mar 2007 07:49:49 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=DZNQ+Q5deV5ZGXx8JrdElHNigL57Xd5zVym9EziCsxTSyfEdP/DUN3DCsjXCHia/07bczMThY1WeDcyFnTlgJQn4wZc4/J+XqzUYsln0J20A5V4CVTJIktUFiF4aZF6k+vLaee5v7MnKPX2TfjzboFSEQIU5mHGEUkvtODRVw9c=;
X-YMail-OSG: NJ.wrhgVM1lAfa6n5hpJ4YctuSYe5MmUkOjwphlQX6hpf38HXtRD1A8uyGkqJWLfy2hfZpFv1T_4WOBGjW9fgmEby_o0vuD1yPmH3_99kAdCGU3Pc9YZBr9OK_UFyQycTkZonKLkgEiHWQ--
Received: from [216.52.49.11] by web30104.mail.mud.yahoo.com via HTTP; Wed, 28 Feb 2007 23:49:49 PST
Date: Wed, 28 Feb 2007 23:49:49 -0800 (PST)
From: Raaj <raajwizz@yahoo.com>
Subject: Performance in having Multiple Index files 
To: java-user@lucene.apache.org
In-Reply-To: <34b8543c0702282129l32c71e3i48f0502c4a22e08f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-820652487-1172735389=:10897"
Content-Transfer-Encoding: 8bit
Message-ID: <118164.10897.qm@web30104.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-820652487-1172735389=:10897
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

hi all,

i have requirement where in i create an index file for each xml file . i have over 100/150 xml files which are all related . 

if create 100/150 index files and query using these indices , will this affect the performance of the search operation . 

bye
raaj



 
---------------------------------
Need a quick answer? Get one in minutes from people who know. Ask your question on Yahoo! Answers.
--0-820652487-1172735389=:10897--

